System.register(["kld-intersections"],function(Ba,Cb){var Sb;return{setters:[function(jc){Sb=jc.default}],execute:function(){function jc(f,c,h){h=h||0;var e=[];if(f<=c)for(0>=h&&(h=-h||1);f<=c;f+=h)e.push(f);else for(0<=h&&(h=-h||-1);f>=c;f+=h)e.push(f);return e}function lc(f,c){for(var h=Array(f);0<f;)h[--f]=c;return h}function Xd(f,c){for(var h=Array(f);0<f;)h[--f]=c(f);return h}function ed(f,c,h){for(var e=[],k=0;k<f.length;k++){var n=f[k];c.call(h,n)&&e.push(n)}return e}function Yd(f,c){var h;
f.find(function(e,k){return h=c(e,k)});return h}function id(f,c){return f.filter(function(h){return!!h[c]})}function Wc(f,c,h){"string"===typeof c&&(c=new RegExp(c,"i"));return Wb.filter(f,Wb.filter.test.bind(c))}function Ad(f,c){return Wb.filter(f,function(h,e){return!!c[e]})}function Cd(f,c,h){return Wb.filter(f,function(e,k){return!c.call(h,e,k)})}function fe(f,c){return Wb.filter(f,function(h){return!h[c]})}function Sd(f,c){return Wb.filter(f,function(h){return h!==c})}function jd(f,c){return Wb.filter(f,
function(h){return-1===c.indexOf(h)})}function bb(f,c){if(!f.length)return f;var h=[f[0]];if(c)for(c=1;c<f.length;c++){var e=f[c];e!==h[h.length]&&h.push(e)}else for(c=1;c<f.length;c++)e=f[c],-1===h.indexOf(e)&&h.push(e);return h}function Fb(f,c,h){for(var e=f.slice(),k=e.length;k--;)for(var n=f[k],b=k+1;b<e.length;b++)c.call(h,n,e[b])&&e.splice(b--,1);return e}function vc(f,c){for(var h={},e=[],k=0;k<f.length;k++){var n=f[k];h[n[c]]||(h[n[c]]=!0,e.push(n))}return e}function pc(f){return Wb.filter(f,
Boolean)}function sd(f){for(var c=0,h=0,e=f.length;c<e;)f.hasOwnProperty(c)&&(f[h++]=f[c]),c++;for(;h++<e;)f.pop();return f}function pd(f,c,h){return f.forEach(c,h)}function tc(){var f=Array.from(arguments),c=f.shift(),h="function"===typeof Wb.last(f)?f.pop():function(k){return k},e=[c].concat(f).map(function(k){return Array.from(k)});return c.map(function(k,n){return h(Wb.pluck(e,n),n)})}function bd(f,c){if("number"===typeof c){if(0>=c)return f;c--}return f.reduce(function(h,e){return h.concat(Array.isArray(e)?
bd(e,c):[e])},[])}function Xb(f,c,h){for(var e=[],k=0;k<f.length;k++)e.push.apply(e,c.call(h,f[k],k));return e}function Tb(f,c){return f.reduce(function(h,e){0<h.length&&h.push(c);h.push(e);return h},[])}function Oc(f,c){return Wb.interpose(f,c)}function td(f,c,h){return f.map(c,h)}function Pb(f,c,h,e,k,n,b,d){return f.map(function(m){return m[c](h,e,k,n,b,d)})}function tb(f,c){return f.map(function(h){return h[c]})}function hb(f,c,h,e){return f.reduce(c,h,e)}function qb(f,c,h,e){return f.reduceRight(c,
h,e)}function za(f,c,h){return f.some(c,h)}function cb(f,c,h){return f.every(c,h)}function wb(f,c){var h=f.length;if(!c||h!==c.length)return!1;for(var e=0;e<h;e++){if(f[e]&&c[e]&&f[e].equals&&c[e].equals)if(f[e].equals(c[e]))continue;else return!1;if(f[e]!=c[e])return!1}return!0}function Hb(f,c){var h=f.length;if(!c||h!==c.length)return!1;for(var e=0;e<h;e++)if(!Wb.objectEquals(f[e],c[e]))return!1;return!0}function Ub(f,c){if(c)for(c=1;c<f.length;c++){if(f[c-1]<f[c])return!1}else for(c=1;c<f.length;c++)if(f[c-
1]>f[c])return!1;return!0}function lb(f,c){return f.sort(c)}function mb(f,c,h){return Wb.pluck(f.map(function(e,k){return{value:e,criteria:c.call(h,e,k)}}).sort(function(e,k){e=e.criteria;k=k.criteria;return e<k?-1:e>k?1:0}),"value")}function Qb(f,c){return Wb.sortBy(f,function(h){return h[c]})}function Gc(f){return f.reverse()}function mc(f){return f.slice().reverse()}function Pc(f,c,h){h=h||String;return f.map(function(e){return h(e).match(c)})}function Xc(f){return f[0]}function Q(f){return f[f.length-
1]}function fa(f,c){return Wb.filter(Wb.uniq(f),function(h){return-1<c.indexOf(h)})}function Ia(f,c){f=f.slice();for(var h=0;h<c.length;h++){var e=c[h];-1===f.indexOf(e)&&f.push(e)}return f}function Qa(f,c,h){f.splice(h,0,c)}function ec(f,c){f.splice(c,1)}function Nb(f,c){var h=f.indexOf(c);0<=h&&Wb.removeAt(f,h);return c}function Za(f,c){f.push.apply(f,c);return f}function ic(f,c,h){f.splice.apply(f,[h,0].concat(c))}function ld(f,c){f.includes(c)||f.push(c)}function xd(f,c,h){f.splice(h,1,c)}function Yc(f){f.length=
0;return f}function Ua(f,c){for(var h=0;h<f.length;h++)if(!c.includes(f[h]))return!1;return!0}function Mc(f,c,h,e){h=h||Wb.NullFunction;e=e||Wb.GLOBAL;c=c||function(k,n,b){n.call(e,k,b)};return f.reduceRight(function(k,n,b){return function(){c.call(e,k,n,b)}},h)()}function pb(f,c,h,e,k,n){e=e||function(){};return f.clone().reverse().reduce(function(b,d,m){return function(){c.call(k||Wb.GLOBAL,d,m);n&&0!==m%n?b():b.delay(h)}},e)()}function fb(){var f=Array.from(arguments),c=f.shift(),h=c.length,e=
!1;if(1===f.length){var k=f[0].progressBar;var n=f[0].iterator;var b=f[0].labelFunction;var d=f[0].whenDone;var m=f[0].context}else k=f[0],n=f[1],b=f[2],d=f[3],m=f[4];m||(m="undefined"!==typeof window?window:global);b||(b=function(a){return a});k||(e=!0,k=(f=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?f.addProgressBar():{value:null,label:null,remove:function(){}});k.value=0;c.reduceRight(function(a,g,l){return function(){try{k.value=l/h,b&&(k.label=
b.call(m,g,l)),n.call(m,g,l)}catch(r){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",l,g,r,r.stack)}Wb.delay(a,0)}},function(){k.value=1;e&&function(){k.remove()}.delay(0);d&&d.call(m)})();return c}function eb(f,c,h){0>c&&(c=f.length+c);0>h&&(h=f.length+h);var e=f[c];f[c]=f[h];f[h]=e;return f}function bc(f,c){c=c||1;return f.slice(c).concat(f.slice(0,c))}function ac(f,c,h){return Wb.Group.fromArray(f,c,h)}function Fd(f,c){return Wb.groupBy(f,function(h){return h[c]})}function we(f,
c,h){c=c||function(n){return n};var e=[],k=[];f.forEach(function(n,b){(c.call(h,n,b)?e:k).push(n)});return[e,k]}function Je(f,c,h){function e(n,b){if(!b.length)return[n,[]];var d=b[0];b=b.slice(1);var m=n.concat([d]);if(c.call(h,m))return e(m,b);n=e(n,b);return[n[0],[d].concat(n[1])]}function k(n,b){if(!b.length)return n;b=e([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return k(n.concat([b[0]]),b[1])}return k([],f)}function Lf(f,
c){c=c||1;return Wb.range(0,Math.ceil(f.length/c)-1).map(function(h){return f.slice(h*c,h*c+c)},f)}function ud(f,c){for(var h=f.map(function(b,d){return b[c[d]]}),e=c.slice(),k=f.length;k--;0<=k){var n=e[k]+1;if(f[k][n]){e[k]=n;break}else if(0===k){e=void 0;break}else e[k]=0}return[h,e]}function Fe(f){for(var c=f.reduce(function(n,b){return n*b.length},1),h=f.map(function(n){return 0}),e=Array(c),k=0;k<c;k++)h=Wb.combinationsPick(f,h),e[k]=h[0],h=h[1];return e}function Pd(f,c){return f.slice(0,c)}
function Rb(f,c){return f.slice(c)}function oa(f,c,h){for(var e=0;e<f.length&&c.call(h,f[e],e);e++);return f.slice(0,e)}function Ha(f,c,h){for(var e=0;e<f.length&&c.call(h,f[e],e);e++);return f.slice(e)}function Mb(f){for(var c=Wb.range(0,f.length-1),h=Array(f.length),e=0;e<f.length;e++){var k=c.splice(Math.round(Math.random()*(c.length-1)),1);h[k]=f[e]}return h}function P(f,c,h){c=c||function(k){return k};var e;f.reduce(function(k,n,b){b=c.call(h,n,b);if("number"!==typeof b||b<=k)return k;e=n;return b},
-Infinity);return e}function ta(f,c,h){c=c||function(e){return e};return Wb.max(f,function(e,k){return-c.call(h,e,k)})}function Pa(f){for(var c=0,h=0;h<f.length;h++)c+=f[h];return c}function Jb(f,c){return f.reduce(function(h,e){return e===c?h+1:h},0)}function Rc(f){return f.length}function Zc(f,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(f.length)/Math.log(2)+1),e=Math.ceil(Math.round(f.length/h));return Wb.range(0,h-1).map(function(k){return f.slice(k*e,(k+1)*
e)})}if(c instanceof Array)return f.reduce(function(k,n){if(n<c[1])return k[0].push(n),k;for(var b=1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return k[b].push(n),k;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Wb.range(1,c.length).map(function(){return[]}))}function oe(f){return[].concat(f)}function se(f){return Wb.from(f)}function Df(f,c,h){return f.forEach(c,h)}function Qd(f,c,h){return f.every(c,h)}function ue(f,c,h){return f.some(c,h)}function of(f,c,h){return f.map(c,
h)}function Gf(f,c,h){return Wb.filter(f,c,h)}function rg(f,c,h,e){e&&(h=h.bind(e));return f.reduce(h,c)}function mg(f,c,h){function e(b,d){if(!n&&(b||d)){n=!0;try{h(b,k)}catch(m){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(m.stack||m))}}}var k=[],n=!1;return f.reduceRight(function(b,d,m){if(!n)return function(a,g){if(a)return e(a);0<m&&k.push(g);try{c(d,m,Wb.once(b))}catch(l){e(l)}}},function(b,d){k.push(d);e(b,!0)})()}function Uc(f,c,h,e){function k(){for(;g<c.parallel&&
a<f.length;)l[a++]()}function n(r,v){if(!(-1<d.indexOf(r)||(d.push(r),g--,m)))if(!v&&d.length<f.length)k();else{m=!0;try{e&&e(v,b)}catch(y){console.error("Error in mapAsync - main callback invocation error:\n"+(y.stack||y))}}}"function"===typeof c&&(e=h,h=c,c=null);c=c||{};if(!f.length)return e&&e(null,[]);c.parallel||(c.parallel=Infinity);var b=[],d=[],m=!1,a=0,g=0,l=f.map(function(r,v){return function(){g++;try{h(r,v,Wb.once(function(y,A){b[v]=y||A;n(v,y)}))}catch(y){n(v,y)}}});return k()}function yf(){return function(){}}
function dg(){return function(f){return f}}function Gg(){return function(){return null}}function mf(){return function(){return!1}}function Ka(){return function(){return!0}}function $a(){return function(){throw Error("Not yet implemented");}}function Kb(f){var c=[],h;for(h in f)f.__lookupGetter__(h)||"function"!==typeof f[h]||c.push(h);return c}function ba(f){var c=[],h;for(h in f)!f.__lookupGetter__(h)&&f.hasOwnProperty(h)&&"function"===typeof f[h]&&c.push(h);return c}function Ja(f){if(f.superclass)return[];
var c=f.toString();f="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);h?f=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(f=c[1]);return f.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(e){return e.trim()}).filter(function(e){return!!e})}function ob(f){var c="";f.declaredClass?c+=f.declaredClass+">>":f.declaredObject&&(c+=f.declaredObject+".");return c+(f.methodName||f.displayName||f.name||"anonymous")}function zb(f){f=
String(f).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=f.split(/\n|\r/),h=void 0,e=0;e<c.length;e++){var k=c[e].match(/^(\s+)[^\s]/);k&&(void 0===h||k[1].length<h.length)&&(h=k[1])}return h?f.replace(new RegExp("^"+h,"gm"),""):f}function Nc(f){var c=Date.now();f();return Date.now()-c}function yc(f,c){for(var h=Date.now(),e=0;e<c;e++)f();return(Date.now()-h)/c}function Ed(f,c){var h=Array.prototype.slice.call(arguments),e=h.shift();c=1E3*h.shift();return setTimeout(function(){return e.apply(e,
h)},c)}function zd(f,c){var h,e,k,n,b,d,m=Jd.debounce(c,function(){b=n=!1});return function(){h=this;e=arguments;k||(k=setTimeout(function(){k=null;b&&f.apply(h,e);m()},c));n?b=!0:d=f.apply(h,e);m();n=!0;return d}}function Bd(f,c,h){var e;return function(){var k=this,n=arguments;h&&!e&&c.apply(k,n);clearTimeout(e);e=setTimeout(function(){e=null;h||c.apply(k,n)},f)}}function Ie(f,c,h){var e=Jd._throttledByName;return e[f]?e[f]:e[f]=Jd.throttle(function(){Jd.debounceNamed(f,c,function(){delete e[f]})();
h.apply(this,arguments)},c)}function Jg(f,c,h,e){var k=Jd._debouncedByName;return k[f]?k[f]:k[f]=Jd.debounce(c,function(){delete k[f];h.apply(this,arguments)},e)}function wg(f,c){var h=Jd._queues,e=h[f]||(h[f]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(k){e.tasks.push(k);e._workerActive||e.activateWorker()},pushAll:function(k){k.forEach(function(n){e.tasks.push(n)});e._workerActive||e.activateWorker()},pushNoActivate:function(k){e.tasks.push(k)},handleError:function(k){k&&console.error("Error in queue: "+
k)},activateWorker:function(){function k(d){e.handleError(d);e.activateWorker()}var n=e.tasks,b=e._workerActive;if(0===n.length)b&&(e._workerActive=!1,"function"===typeof e.drain&&e.drain()),delete h[f];else{b||(e._workerActive=!0);try{e.worker(n.shift(),k)}catch(d){k(d)}}}});return e}function Qh(f,c,h){function e(){a&&clearTimeout(a);d=!0;delete n[f]}function k(g){d||(e(),b.callbacks.forEach(function(l){try{l.apply(null,g)}catch(r){console.error("Error when invoking callbacks in queueUntil ["+f+
"]:\n"+String(r.stack||r))}}))}var n=Jd._queueUntilCallbacks,b=n[f];if(b)return b;var d=!1,m=!1;if(h)var a=setTimeout(function(){d||k([Error("timeout")])},h);b=n[f]={callbacks:[],cancel:function(){m=!0;e()},whenDone:function(g){b.callbacks.push(g);return b}};setTimeout(function(){if(!m)try{c(function(){k(arguments)})}catch(g){k([g])}},0);return b}function Vf(){var f=Array.prototype.slice,c=f.call(arguments),h=Jd._composeAsyncDefaultEndCallback,e=h,k,n,b=new Promise(function(d,m){k=d;n=m});return c.reverse().reduce(function(d,
m,a){var g=!1;return function(){function l(){g=!0;var y=f.call(arguments),A=y.shift();A?(e(A),n(A)):d.apply(null,y)}var r=f.call(arguments);if(e===h&&a===c.length-1){for(;r.length&&"function"!==typeof r[r.length-1];)r.pop();"function"===typeof r[r.length-1]&&(e=r.pop())}if("function"===typeof m)try{var v=m.apply(this,r.concat([l]));v&&"function"===typeof v.then&&"function"===typeof v.catch&&v.then(function(y){return l(null,y)}).catch(function(y){return l(y)})}catch(y){console.error("composeAsync: ",
y.stack||y),g||(e(y),n(y))}else m&&"function"===typeof m.then&&"function"===typeof m.catch?m.then(function(y){l(null,y)}).catch(function(y){l(y)}):(r=Error("Invalid argument to composeAsync: "+m),e(r),n(r));return b}},function(){var d=f.call(arguments);e.apply(null,[null].concat(d));k(d[0])})}function Hh(){return Array.prototype.slice.call(arguments).reverse().reduce(function(f,c){return function(){return f(c.apply(this,arguments))}},function(f){return f})}function ek(f){return function(){var c=Array.prototype.slice.call(arguments);
c=[c[1],c[0]].concat(c.slice(2));return f.apply(null,c)}}function Zh(f){f=f||function(){};return function(){var c=Jd.arr.from(arguments);f.apply(null,[null].concat(c))}}function ml(f,c,h){var e=Date.now(),k=50;h||(h=c,c=f,f=void 0);(function b(){if(c())return h();if(f){var d=Date.now()-e;d=f-d;if(0>=d)return h(Error("timeout"));d<k&&(k=d)}setTimeout(b,k)})()}function Hf(f,c,h){function e(b,d,m,a){if(n.length){var g=null;b=n.indexOf(b);-1<b&&n.splice(b,1);m?(n.length=0,g=Error("in waitForAll at"+("number"===
typeof d?" "+d:"")+": \n"+(m.stack||String(m)))):a&&(k[d]=a);n.length||setTimeout(function(){h(g,k)},0)}}h||(h=c,c=f,f=null);f=f||{};var k=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,d){try{b(function(){var m=Array.prototype.slice.call(arguments),a=m.shift();e(b,d,a,m)})}catch(m){e(b,d,m,null)}});f.timeout&&setTimeout(function(){if(n.length){var b=k.map(function(d,m){return null===d&&m}).filter(function(d){return"number"===typeof d}).join(", ");
e(null,null,Error("waitForAll timed out, functions at "+b+" not done"),null)}},f.timeout)}else h(null,k)}function Gj(f,c,h,e){function k(){return f.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);f=n.shift();k.isWrapper=!0;k.originalFunction=f;return k}function bj(f,c){var h=function(){var e=Array.prototype.slice.call(arguments);e=c.isWrapper?e:[f.bind(this)].concat(e);return c.apply(this,e)};h.isWrapper=
!0;h.originalFunction=f;return h}function Oe(f){for(;f.originalFunction;)f=f.originalFunction;return f}function Kk(f){var c=[];do c.push(f),f=f.originalFunction;while(f);return c}function kl(f,c,h){h.originalFunction=f[c];var e=f.hasOwnProperty(c);f[c]=function(){e?f[c]=h.originalFunction:delete f[c];return h.apply(this,arguments)};return f}function ih(f){if(f){if("function"!==typeof f)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=f.apply(this,
arguments)}}}function dm(){var f=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!f)return f=!0,c.apply(this,arguments)}})}function ul(f,c){var h=Array.prototype.slice.call(arguments),e=Jd._eitherNameRegistry;f=h.shift();var k=e[f]||(e[f]={wasCalled:!1,callsLeft:0});k.callsLeft++;return function(){k.callsLeft--;0>=k.callsLeft&&delete e[f];if(!k.wasCalled)return k.wasCalled=!0,c.apply(this,arguments)}}function dl(f){return eval(f)}function Si(f){return Jd.evalJS("("+
f.toString()+");")}function sg(f,c){return Jd.Closure.fromFunction(f,c).recreateFunc()}function Rf(f,c,h,e){var k=h||f.name;if(!k)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={"this":c};e&&(n=Jd.objectMerge([n,e]));h&&h[k]&&(n.$super=Jd.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[k].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+
b+"\n"+b.stack),null}},{obj:c,name:k}).recreateFunc());return Jd.addToObject(Jd.asScript(f,n),c,k)}function Xm(f,c,h){f.displayName=h;var e=c.attributeConnections?c.attributeConnections.filter(function(k){return"update"===k.getSourceAttrName()}):[];e&&e.forEach(function(k){k.disconnect()});c[h]=f;typeof c&&(f.declaredObject=Jd.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:Jd.safeToString(c)});
e&&e.forEach(function(k){k.connect()});return f}function Zb(f,c){return Jd.Closure.fromFunction(f,c||{}).recreateFunc()}function $b(f,c,h){f.hasLivelyClosure&&(f.livelyClosure.funcProperties[c]=h)}function Ce(f){return f.hasLivelyClosure?f.livelyClosure.varMapping:f.isWrapper?f.originalFunction.varMapping:f.varMapping?f.varMapping:{}}function Ae(f,c,h){f[c]=h;f.hasLivelyClosure&&(f.livelyClosure.funcProperties[c]=h)}function hd(f){for(var c=[],h=f.prototype;h;)c=Object.keys(h).reduce(function(e,k){"function"===
typeof h[k]&&-1===e.indexOf(k)&&e.push(k);return e},c),h=Object.getPrototypeOf(h);return c}function jh(f){return Object.keys(f.prototype).filter(function(c){return"function"===typeof f.prototype[c]})}function Oj(f,c){var h=function(e){var k=Array.prototype.slice.call(arguments);k.shift();try{return e.apply(f,k)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",
f,c,k,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=Jd.wrap(f,h);h.originalFunction=f;h.methodName="$logErrorsWrapper";return h}function rm(f,c){var h=function(e){var k=Array.prototype.slice.call(arguments);k.shift();try{var n=e.apply(f,k)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+
c;h=Jd.wrap(f,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=f;return h}function Oo(f,c){var h=function(k){var n=Array.prototype.slice.call(arguments);n.shift();e=k.apply(f,n);c?console.warn("%s(%s) -> %s",Jd.qualifiedMethodName(f),n,e):console.log("%s(%s) -> %s",Jd.qualifiedMethodName(f),n,e);return e};h.methodName="$logCallsAdvice::"+Jd.qualifiedMethodName(f);var e=Jd.wrap(f,h);e.originalFunction=f;e.methodName="$logCallsWrapper::"+Jd.qualifiedMethodName(f);return e}function Po(f,
c){return Jd.wrap(f,function(h){var e=Array.prototype.slice.call(arguments);e.shift();c.push(e);e=h.apply(f,e);c.pop();return e})}function so(){try{throw Error();}catch(f){return String(f.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,"$1")}).join("\n")}}function ok(f){if(f&&Array.isArray(f))return"["+f.map(ok)+"]";if("string"!==typeof f)return String(f);f=String(f);f=f.replace(/\n/g,"\\n\\\n");f=f.replace(/(")/g,"\\$1");return'"'+f+'"'}function Vm(f){return Array.isArray(f)}
function em(f){return f&&1==f.nodeType}function zm(f){return f instanceof Function}function wf(f){return"boolean"==typeof f}function Wm(f){return"string"==typeof f}function vn(f){return"number"==typeof f}function zk(f){return"undefined"==typeof f}function Fl(f){return f instanceof RegExp}function vl(f){return"object"==typeof f}function ie(f){if(!f)return!0;switch(typeof f){case "string":case "number":case "boolean":return!0}return!1}function ll(f){for(var c in f)if(f.hasOwnProperty(c))return!1;return!0}
function cl(f,c){if(f===c)return!0;if(!f||!c)return f==c;if(Array.isArray(f))return Be.arrayDeepEquals(f,c);switch(f.constructor){case String:case Date:case Boolean:case Number:return f==c}if("function"===typeof f.isEqualNode)return f.isEqualNode(c);if("function"===typeof f.equals)return f.equals(c);var h=[],e;for(e in f)if(h.push(e),"function"!==typeof f[e]&&!cl(f[e],c[e]))return!1;for(e in c)if(-1===h.indexOf(e)&&"function"!==typeof c[e]&&!cl(c[e],f[e]))return!1;return!0}function wl(f){return f?
Object.keys(f).map(function(c){return f[c]}):[]}function Mg(f,c){for(var h={},e=0;e<c.length;e++)h[c[e]]=f[c[e]];return h}function Yh(f,c){f=f||{};f=Be.getOwnPropertyDescriptors(f);for(var h=0;h<c.length;h++)c[h]in f&&delete f[c[h]];return Object.defineProperties({},f)}function Ga(f,c,h,e){c=Be.functionFromString(c);return Be.asScriptOf(c,f,h,e)}function ub(f,c){for(var h=null,e=1;e<arguments.length;e++)if("string"==typeof arguments[e])h=arguments[e],f.categories||(f.categories={}),f.categories[h]||
(f.categories[h]=[]),h=f.categories[h];else{c=arguments[e];for(var k in c){var n=c.__lookupGetter__(k),b=c.__lookupSetter__(k);n&&f.__defineGetter__(k,n);b&&f.__defineSetter__(k,b);n||b||(n=c[k],f[k]=n,h&&h.push(k),"function"===typeof n&&(n.displayName||(n.displayName=k),"undefined"!==typeof lively&&lively.Module&&lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return f}function Eb(f){if(Be.isPrimitive(f))return f;if(Array.isArray(f))return Array.prototype.slice.call(f);var c={},
h;for(h in f)f.hasOwnProperty(h)&&(c[h]=f[h]);return c}function rb(f,c,h){for(var e={},k=0;k<c.length;k++)c[k]in f&&(e[c[k]]=h?h(c[k],f[c[k]]):f[c[k]]);return e}function Db(f,c,h){c=c||{};h=h||0;if(c.customPrinter){var e=c._ignoreSignal||(c._ignoreSignal={}),k=c.customPrinter(f,e,function(r){return Db(r,c,h+1)});if(k!==e)return k}if(!f)return Be.print(f);if("function"===typeof f)return c.printFunctionSource?String(f):"function"+(f.name?" "+f.name:"")+"("+Be.argumentNames(f).join(",")+") {/*...*/}";
switch(f.constructor){case String:case Boolean:case RegExp:case Number:return Be.print(f)}if("function"===typeof f.serializeExpr)return f.serializeExpr();var n=f&&Array.isArray(f);e=n?"[":"{";k=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return e+"/*...*/"+k;var b=[];if(n)b=f.map(function(r){return Db(r,c,h+1)});else for(var d=Object.keys(f).sort(function(r,v){var y="function"===typeof f[r];return y===("function"===typeof f[v])?r<v?-1:r>v?1:0:y?1:-1}),m=0;m<d.length;m++){if(m>(c.maxNumberOfKeys||Infinity)){d=
d.length-m;b.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var a=d[m];n&&Db(f[a],c,h+1);var g=Db(f[a],c,h+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+g)}if(0===b.length)return e+k;d=b.join(", ");m=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||d.length>=c.minLengthForNewLine);var l=Be.indent("",c.indent||"  ",h);a=Be.indent("",c.indent||"  ",h+1);g=m&&!n?"\n"+a:"";n=m&&!n?"\n"+l:"";m&&(d=b.join(","+(m?"\n"+a:"")));return e+g+d+n+k}function Cc(f){return 1<arguments.length?Cc(Array.prototype.slice.call(arguments)):
Array.isArray(f[0])?Array.prototype.concat.apply([],f):f.reduce(function(c,h){for(var e in h)h.hasOwnProperty(e)&&(c[e]=h[e]);return c},{})}function qd(f,c){if(!f)return c;if(!c)return f;if(Array.isArray(f)){if(!Array.isArray(c))return c;var h=f.map(function(e,k){return qd(e,c[k])});c.length>f.length&&(h=h.concat(c.slice(f.length)));return h}return"object"!==typeof f||"object"!==typeof c?c:Object.keys(f).concat(Object.keys(c)).reduce(function(e,k){e[k]=f[k]?c[k]?"object"!==typeof f[k]||"object"!==
typeof c[k]?c[k]:qd(f[k],c[k]):f[k]:c[k];return e},{})}function nd(f,c){c=[];for(var h in f){var e=f[h],k=e.hasOwnProperty("before")?e.before:e.before=[];e=e.hasOwnProperty("after")?e.after:e.after=[];for(var n=k.length;n--;){var b=k[n],d=f[b];d?(d.hasOwnProperty("after")||(d.after=[]),d.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+b+" but that property cannot be found.")),k.splice(n,1))}for(k=e.length;k--;)n=e[k],
f[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),e.splice(k,1));c.push(h)}h=[];e=[];for(k=c.length+1;c.length;){if(k===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+c.map(function(m){var a=f[m].before,g=f[m].after;if(!(a&&a.length||g&&g.length))return"";m+="\n";a&&a.length&&(m+="  - before "+a.join(",")+"\n");g&&g.length&&(m+="  - after "+
g.join(",")+"\n");return m}).join(""));k=c.length;n=[];for(b=c.length;b--;)d=c[b],Be.isSubset(f[d].after,e)&&(c.splice(b,1),e.push(d),n.push(d));h.push(n)}return Be.flatten(h,1)}function rc(f){return Object.create(f)}function kc(f,c){for(var h=[];f;)f.hasOwnProperty(c)&&h.unshift(f[c]),f=Object.getPrototypeOf(f);return h}function Sc(f,c){return Be.merge(Be.valuesInPropertyHierarchy(f,c))}function xb(f){if(!f||"object"!==typeof f||f instanceof RegExp)return f;var c=Array.isArray(f)?Array(f.length):
{},h;for(h in f)f.hasOwnProperty(h)&&(c[h]=xb(f[h]));return c}function kd(f){return null===f?"null":"undefined"===typeof f?"undefined":f.constructor.name}function ke(f){function c(e,k,n,b){if(e.constructor.name===k){h+=n;if(e.length||Object.keys(e).length)h+="...";h+=b}}if(!Be.isMutableType(f))return Be.safeToString(f);if("Object"!==f.constructor.name&&!Array.isArray(f)&&f.constructor.name)return f.constructor.name?f.constructor.name:Object.prototype.toString.call(f).split(" ")[1].split("]")[0];var h=
"";c(f,"Object","{","}");c(f,"Array","[","]");return h}function Se(f){return-1===["null","undefined","Boolean","Number","String"].indexOf(Be.typeStringOf(f))}function ee(f){try{return(f?f.toString():String(f)).replace("\n","")}catch(c){return"<error printing object>"}}function Pe(f){switch(typeof f){case "string":return new String(f);case "boolean":return new Boolean(f);case "number":return new Number(f);default:return f}}function nf(f,c){c=void 0===c?"_":c;var h=1;do var e=c+"-"+h++;while(e in f);
return e}function If(){return dd.formatFromArray(Array.prototype.slice.call(arguments))}function Mf(f){function c(r,v){return""+r}function h(r,v){return r.toString()}function e(r,v){return dd.inspectObject(r)}var k=f.shift();k||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(r,v,y){return-1<y?r.toFixed(y):r.toString()},o:e},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;k=function(r){for(var v=[],y=b.exec(r);y;y=b.exec(r)){var A=
y[8]||y[5];A=A in n?n[A]:e;var E=y[3]?parseInt(y[3]):"."==y[4]?-1:0;v.push(r.substr(0,"%"==y[0][0]?y.index:y.index+1));v.push({appender:A,precision:E});r=r.substr(y.index+y[0].length)}r&&v.push(r.toString());return v}(k);for(var d="",m=0,a=0;a<k.length;++a){var g=k[a];if(g&&"object"==typeof g){var l=f[m++];d+=(g.appender||c)(l,d,g.precision)}else d+=""+g}return d}function Ig(f,c,h){if(!h||0>=h)return f;for(var e="";0<h;)h--,e+=c;return dd.lines(f).map(function(k){return e+k}).join("\n")}function ch(f,
c){c||(c="  ");return dd.min(f.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function wh(f,c,h){c||(c="  ");h||(h=0);var e=dd.minIndent(f,c);if(e===h)return f;if(e<h)return dd.indent(f,c,h-e);var k=c.repeat(e-h);return dd.lines(f).map(function(n){return n.slice(k.length)}).join("\n")}function tg(f){return'"'+f.replace(/"/g,'\\"')+'"'}function va(f){if(f&&Array.isArray(f))return"["+f.map(va)+"]";if("string"!==typeof f)return String(f);f=String(f);f=f.replace(/\n/g,
"\\n\\\n");f=f.replace(/(")/g,"\\$1");return'"'+f+'"'}function Fa(f,c){c=c||0;return f.reduce(function(h,e){return h+(Array.isArray(e)?Fa(e,c+1):dd.indent(e+"\n","  ",c))},"")}function nb(f,c,h){return h?" ".repeat(c)+f:f+" ".repeat(c)}function Wa(f,c){function h(d){return n?!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[d]}var e=[],k=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;f.forEach(function(d){d.forEach(function(m,a){void 0===e[a]&&(e[a]=0);e[a]=Math.max(e[a],
String(m).length)})});return f.map(function(d){return d.map(function(m,a){m=String(m);return dd.pad(m,e[a]-m.length,h(a))}).join(k)}).join("\n")}function xc(f,c,h,e){function k(b,d,m){n[d]=e.repeat(b)+c(m,b);m=h(m,b);var a=d+1;if(!m||!m.length)return a;var g=a,l=m.length-1;m.forEach(function(r,v){a=k(b+1,a,r);r=l===v;var y=n[g].split(""),A=b*e.length+e.length;for(v=b*e.length+1;v<A;v++)y[v]="-";r&&(y[b*e.length]="\\");n[g]=y.join("");r||n.slice(g,a).forEach(function(E,F){E=E.split("");E[b*e.length]=
"|";n[g+F]=E.join("")});g=a});return a}var n=[];e=e||"  ";k(0,0,f);return n.join("\n")}function nc(f){return f.split("")}function Hc(f){return f.split(/\n\r?/)}function Qc(f,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?f.split("\n").concat("").reduce(function(e,k){var n=e[0];e=e[1];/^\s*$/.test(e)===/^\s*$/.test(k)?e+="\n"+k:(e.length&&n.push(e),e=k);return[n,e]},[[],""])[0]:f.split(new RegExp(h+"+"))}function Vd(f){return dd.lines(f).compact()}function hg(f,c){return f.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}
function lg(f,c){c=c||{};var h=c.cellSplitter||/\s+/,e=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;f=dd.lines(f);for(var k=[],n=0;n<f.length;n++){var b=dd.tokens(f[n],h);c&&(b=b.map(function(d){if(d.match(e))return d;var m=Number(d);if(!isNaN(m))return m;m=new Date(d);return isNaN(+m)?d.trim():m}));0<b.length&&k.push(b)}return k}function fi(f){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=f;return c.textContent}
function Xg(f,c){return(f=f.trim().match(/([^?#]*)(#.*)?$/))?f[1].split(c||"&").inject({},function(h,e){if((e=e.split("="))[0]){var k=decodeURIComponent(e.shift());e=1<e.length?e.join("="):e[0];void 0!=e&&(e=decodeURIComponent(e));k in h?(Array.isArray(h[k])||(h[k]=[h[k]]),h[k].push(e)):h[k]=e}return h}):{}}function Di(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function Xk(f){return decodeURIComponent(atob(f).split("").map(function(c){return"%"+
("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function El(f){var c=f.match(dd.urlStartRe),h=(c=c?c[0]:null)?f.slice(c.length):f;do f=h,h=f.replace(dd.pathDoubleDotRe,"");while(h!=f);h=h.replace(dd.pathDoubleSlashRe,"$1/");h=h.replace(dd.pathDotRe,"/");c&&(h=c+h);return h}function Qo(){return dd.normalizePath(Array.prototype.slice.call(arguments).reduce(function(f,c){return"string"===typeof c?f.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):f}))}function Ro(){return dd.newUUIDTemplate.replace(dd.newUUIDRe,
dd.newUUIDReplacer).toUpperCase()}function Pv(f,c){return"data:"+(c||"text/plain")+";base64,"+dd.base64EncodeUnicode(f)}function iq(f){var c=0,h=f.length;if(0==h)return c;for(var e=0;e<h;e++){var k=f.charCodeAt(e);c=(c<<5)-c+k;c&=c}return c}function Pt(f){function c(m,a,g,l,r,v){a=b(b(a,m),b(l,v));return b(a<<r|a>>>32-r,g)}function h(m,a,g,l,r,v,y){return c(a&g|~a&l,m,a,r,v,y)}function e(m,a,g,l,r,v,y){return c(a&l|g&~l,m,a,r,v,y)}function k(m,a,g,l,r,v,y){return c(g^(a|~l),m,a,r,v,y)}function n(m,
a){var g=m[0],l=m[1],r=m[2],v=m[3];g=h(g,l,r,v,a[0],7,-680876936);v=h(v,g,l,r,a[1],12,-389564586);r=h(r,v,g,l,a[2],17,606105819);l=h(l,r,v,g,a[3],22,-1044525330);g=h(g,l,r,v,a[4],7,-176418897);v=h(v,g,l,r,a[5],12,1200080426);r=h(r,v,g,l,a[6],17,-1473231341);l=h(l,r,v,g,a[7],22,-45705983);g=h(g,l,r,v,a[8],7,1770035416);v=h(v,g,l,r,a[9],12,-1958414417);r=h(r,v,g,l,a[10],17,-42063);l=h(l,r,v,g,a[11],22,-1990404162);g=h(g,l,r,v,a[12],7,1804603682);v=h(v,g,l,r,a[13],12,-40341101);r=h(r,v,g,l,a[14],17,
-1502002290);l=h(l,r,v,g,a[15],22,1236535329);g=e(g,l,r,v,a[1],5,-165796510);v=e(v,g,l,r,a[6],9,-1069501632);r=e(r,v,g,l,a[11],14,643717713);l=e(l,r,v,g,a[0],20,-373897302);g=e(g,l,r,v,a[5],5,-701558691);v=e(v,g,l,r,a[10],9,38016083);r=e(r,v,g,l,a[15],14,-660478335);l=e(l,r,v,g,a[4],20,-405537848);g=e(g,l,r,v,a[9],5,568446438);v=e(v,g,l,r,a[14],9,-1019803690);r=e(r,v,g,l,a[3],14,-187363961);l=e(l,r,v,g,a[8],20,1163531501);g=e(g,l,r,v,a[13],5,-1444681467);v=e(v,g,l,r,a[2],9,-51403784);r=e(r,v,g,l,
a[7],14,1735328473);l=e(l,r,v,g,a[12],20,-1926607734);g=c(l^r^v,g,l,a[5],4,-378558);v=c(g^l^r,v,g,a[8],11,-2022574463);r=c(v^g^l,r,v,a[11],16,1839030562);l=c(r^v^g,l,r,a[14],23,-35309556);g=c(l^r^v,g,l,a[1],4,-1530992060);v=c(g^l^r,v,g,a[4],11,1272893353);r=c(v^g^l,r,v,a[7],16,-155497632);l=c(r^v^g,l,r,a[10],23,-1094730640);g=c(l^r^v,g,l,a[13],4,681279174);v=c(g^l^r,v,g,a[0],11,-358537222);r=c(v^g^l,r,v,a[3],16,-722521979);l=c(r^v^g,l,r,a[6],23,76029189);g=c(l^r^v,g,l,a[9],4,-640364487);v=c(g^l^r,
v,g,a[12],11,-421815835);r=c(v^g^l,r,v,a[15],16,530742520);l=c(r^v^g,l,r,a[2],23,-995338651);g=k(g,l,r,v,a[0],6,-198630844);v=k(v,g,l,r,a[7],10,1126891415);r=k(r,v,g,l,a[14],15,-1416354905);l=k(l,r,v,g,a[5],21,-57434055);g=k(g,l,r,v,a[12],6,1700485571);v=k(v,g,l,r,a[3],10,-1894986606);r=k(r,v,g,l,a[10],15,-1051523);l=k(l,r,v,g,a[1],21,-2054922799);g=k(g,l,r,v,a[8],6,1873313359);v=k(v,g,l,r,a[15],10,-30611744);r=k(r,v,g,l,a[6],15,-1560198380);l=k(l,r,v,g,a[13],21,1309151649);g=k(g,l,r,v,a[4],6,-145523070);
v=k(v,g,l,r,a[11],10,-1120210379);r=k(r,v,g,l,a[2],15,718787259);l=k(l,r,v,g,a[9],21,-343485551);m[0]=b(g,m[0]);m[1]=b(l,m[1]);m[2]=b(r,m[2]);m[3]=b(v,m[3])}var b=function(m,a){var g=(m&65535)+(a&65535);return(m>>16)+(a>>16)+(g>>16)<<16|g&65535},d="0123456789abcdef".split("");return function(m){for(var a=m.length,g=0;g<a;g++){for(var l=g,r=m[g],v="",y=0;4>y;y++)v+=d[r>>8*y+4&15]+d[r>>8*y&15];m[l]=v}return m.join("")}(function(m){var a=m.length,g=[1732584193,-271733879,-1732584194,271733878],l;for(l=
64;l<=a;l+=64){var r,v=m.substring(l-64,l),y=[];for(r=0;64>r;r+=4)y[r>>2]=v.charCodeAt(r)+(v.charCodeAt(r+1)<<8)+(v.charCodeAt(r+2)<<16)+(v.charCodeAt(r+3)<<24);n(g,y)}m=m.substring(l-64);r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];v=m.length;for(l=0;l<v;l++)r[l>>2]|=m.charCodeAt(l)<<(l%4<<3);r[l>>2]|=128<<(l%4<<3);if(55<l)for(n(g,r),l=16;l--;)r[l]=0;r[14]=8*a;n(g,r);return g}(f))}function xp(f,c){var h=[];f.replace(c,function(e,k){h.push({match:e,start:k,end:k+e.length})});return h}function Qv(f,c,h){function e(b,
d){if(d.constructor!==RegExp){if(0===b.indexOf(d))return{match:d,rest:b.slice(d.length)};for(var m=0;m<d.length;m++)if(d[m]!=b[m])return{match:null,pos:m};return{match:null}}return(d=dd.reMatches(b,d))&&d.length&&0===d[0].start?{match:d[0].match,rest:b.slice(d[0].end)}:{match:null}}function k(b){var d=dd.reMatches(b,/__\//g),m=dd.reMatches(b,/\/__/g);if(d.length!==m.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+
JSON.stringify(m));var a=0;return d.reduce(function(g,l,r){var v=m[r];r=g.pop();l=l.start-a;v=v.end-a;var y;var A=y=3;r=[r.slice(0,l),r.slice(l+y,v-A),r.slice(v)];r[0].length&&(g.push(r[0]),a+=r[0].length);try{r[1].length&&(g.push(new RegExp(r[1])),a+=r[1].length+3+3)}catch(E){throw Error("Cannot create pattern re from: "+dd.inspectObject(r));}r[2].length&&g.push(r[2]);return g},[b])}function n(b,d){d=k(d);a:{for(var m=b,a=0,g=0;g<d.length;g++){var l=d[g];m=e(m,l);if(!m.match){d={matched:!1,pos:a+
(m.pos||0),pattern:l};break a}a+=m.match.length;m=m.rest}d=m.length?{matched:!1,pos:a}:{matched:!0}}if(d.matched)return d;d.error=b.slice(0,d.pos)+"<--UNMATCHED--\x3e"+b.slice(d.pos);return d}h=h||{};h.normalizeWhiteSpace&&(f=f.replace(/\s+/g," "));h.ignoreIndent&&(f=f.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return f==c?{matched:!0}:n(f,c)}function Rv(f,c,h){f=f.slice(c);return"string"===typeof h?(f=f.indexOf(h),-1===f?null:f+c):h.constructor===RegExp?(c=dd.reMatches(f,h),c[0]?c[0].start:null):
null}function yx(f,c,h){f=f.slice(0,c);return"string"===typeof h?(f=f.lastIndexOf(h),-1===f?null:f):h.constructor===RegExp?(f=dd.reMatches(f,h),dd.last(f)?dd.last(f).start:null):null}function zx(f){var c=dd.lineRanges(f);return function(h){for(var e=0;e<c.length;e++){var k=c[e];if(h>=k[0]&&h<k[1])return e}return-1}}function Ax(f){return function(c){return dd.lineRanges(f)[c]}}function Sv(f){for(var c=0,h=dd.lines(f),e=[],k=0;k<h.length;k++)f=c+h[k].length+1,e.push([c,f]),c=f;return e}function Tv(f,
c){var h=f.length;if(0===h)return-1;for(var e=0;;){var k=e+Math.floor((h-e)/2),n=$jscomp.makeIterator(f[k]),b=n.next().value;n=n.next().value;if(c<b){if(0===k)break;h=k}else if(c>n)e=k;else return k}return-1}function Qt(f,c,h){h=void 0===h?0:h;f=this.substring(h||0).search(c);return 0<=f?f+(h||0):f}function Uv(f,c,h){h=void 0===h?f.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));f=this.substring(0,h+1);h=-1;for(var e=0,k;null!=(k=c.exec(f));)h=k.index,c.lastIndex=
++e;return h}function Vv(f,c){return"undefined"===typeof JsDiff?"diff not supported":JsDiff.convertChangesToXML(JsDiff.diffWordsWithSpace(f,c))}function jq(f){return""==f}function yp(f){f=f[0];return"A"===f||"E"===f||"I"===f||"O"===f||"U"===f||"a"===f||"e"===f||"i"===f||"o"===f||"u"===f||!1}function Rt(f,c){var h=parseFloat(f);return isNaN(h)?f:h.toFixed(c)}function rs(f){return f.length?f.charAt(0).toUpperCase()+f.slice(1):f}function St(f){return f.split(" ").map(dd.capitalize).join("")}function So(f){var c=
f.split("-"),h=c.length;if(1==h)return c[0];f="-"==f.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var e=1;e<h;e++)f+=c[e].charAt(0).toUpperCase()+c[e].substring(1);return f}function Am(f,c,h){c=c||30;h=void 0===h?"...":h;return f.length>c?f.slice(0,c-h.length)+h:String(f)}function ss(f,c,h){c=c||30;return f.length>c?(void 0===h?"...":h)+f.slice(-c):String(f)}function kq(f){return f.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function br(f){return f.slice(0,
f.length-1)+String.fromCharCode(f.charCodeAt(f.length-1)+1)}function Wv(f){return f.charCodeAt(0)-48}function Xv(f,c){for(var h=[],e=0;e<f.length;e++){h[e]=[];for(var k=0;k<c.length;k++)h[e][k]=0}for(e=0;e<f.length;e++)h[e][0]=0;for(e=1;e<f.length;e++)for(k=1;k<c.length;k++)h[e][k]=f[e-1]==c[k-1]?h[e-1][k-1]+1:0;for(var n=k=e=-1,b=0;b<f.length;b++)for(var d=0;d<c.length;d++){var m=h[b][d];e<m&&(e=m,k=b-m,n=d-m)}return{length:e,indexA:k,indexB:n,string:0<e?f.slice(k,k+e):""}}function Bx(f,c){return"insert"===
c.action?f.slice(0,c.start)+c.lines.join("\n")+f.slice(c.start):"remove"===c.action?f.slice(0,c.start)+f.slice(c.end):f}function Tt(f,c){return c.reduce(function(h,e){return dd.applyChange(f,e)},f)}function cr(f,c){if(0===f.length)return c.length;if(0===c.length)return f.length;var h;if(f.length>c.length){var e=f;f=c;c=e}var k=Array(f.length+1);for(e=0;e<=f.length;e++)k[e]=e;for(e=1;e<=c.length;e++){var n=e;for(h=1;h<=f.length;h++){var b=c[e-1]===f[h-1]?k[h-1]:Math.min(k[h-1]+1,Math.min(n+1,k[h]+
1));k[h-1]=n;n=b}k[f.length]=n}return k[f.length]}function Ut(f,c){f=f||0;return Math.round(Math.random()*((c||100)-f)+f)}function Cx(f){return Math.floor(Math.random()*f)}function Dx(f){if(1E3>f)return String(Math.round(100*f)/100)+"B";f/=1024;return 1E3>f?String(Math.round(100*f)/100)+"KB":String(Math.round(f/1024*100)/100)+"MB"}function Ex(f){return f.reduce(function(c,h){return c+h},0)/f.length}function Yv(f,c,h){return(f-c)/h+c}function Zv(f){var c=f.sort(function(h,e){return e-h});f=f.length;
return 0===f%2?.5*(c[f/2-1]+c[f/2]):c[(f-1)/2]}function Fx(f,c,h,e){e=e||0;if(c<h)var k=h;else k=c,c=h;return 0<=k-f+e&&0>=c-f-e}function ts(f,c,h){return Math.max(c,Math.min(h,f))}function $v(f){return f.sort(function(c,h){return c-h})}function us(f,c){c=c||"px";if((f=f.match(/([0-9\.]+)\s*(.*)/))&&f[1]){var h=parseFloat(f[1]);return dh.convertLength(h,f[2],c)}}function wn(f,c){c=1/c;return Math.round(f*c)/c}function zp(f,c,h,e){var k=dh.roundTo(f,h);return Math.abs(f-k)<c/2?k:e?f:k+(f-(f<k?k-c/
2:k+c/2))*h/(h-c)}function Ym(f){return 180*f/Math.PI%360}function Ei(f){return f/180*Math.PI}function To(f,c,h){c=void 0===c?5:c;h=void 0===h?3E4:h;f=Math.min(h,c*Math.pow(2,f));return Math.min(h,c+Math.random()*(3*(f/2+Math.round(f/2*Math.random()))-c))}function to(f,c,h){return c+f*(h-c)}function Vt(f,c){var h=[],e;for(e in f)(f.__lookupGetter__(e)||"function"!==typeof f[e])&&(c?c(e,f):1)&&h.push(e);return h}function Gx(f,c){return Object.getOwnPropertyNames(f).reduce(function(h,e){(c?c(f,e):1)&&
h.push(e);return h},[])}function vs(f){var c=[],h;for(h in f)f.hasOwnProperty(h)&&(f.__lookupGetter__(h)||"function"!==f[h])&&c.push(h);return c}function Wt(f,c,h){var e=[],k;for(k in f)if(f.hasOwnProperty(k)){var n=f[k];"function"!==n&&e.push(c.call(h||this,k,n))}return e}function dr(f,c){for(var h in f)if(f[h]===c)return h}function ws(f){var c=[],h;for(h in f)c.push(f[h]);return c}function Xt(f){var c=[],h;for(h in f)f.hasOwnProperty(h)&&c.push(f[h]);return c}function Yt(f,c){for(var h in f)if(c(f,
h))return!0;return!1}function Hx(f,c){var h=[],e;for(e in f)(c?c(f,e):1)&&h.push(e);return h}function xs(f){return Object.keys(f).sort().join("").hashCode()}function aw(f,c,h){return Ap.dateFormat(f,c,h)}function er(f,c){return c&&c instanceof Date&&c.getTime()===f.getTime()}function fr(f,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<f)return"";if(c===f)return"now";var e="min",k="sec",n="hour",b="day",d=Math.round((c-f)/1E3);f=d%60;c=Math.floor(d/60)%60;var m=Math.floor(d/60/60)%24;d=Math.floor(d/
60/60/24);var a=[];0<d&&(a.push(d),1<d&&(b+="s"),a.push(b));if(h.forceHours||0<m&&2>d)a.push(m),1<m&&(n+="s"),a.push(n);if(h.forceMinutes||0<c&&3>m&&0===d)a.push(c),1<c&&(e+="s"),a.push(e);if(h.forceSeconds||0<f&&3>c&&0===m&&0===d)a.push(f),1<f&&(k+="s"),a.push(k);return a.join(" ")}function xh(f){return"function"===typeof f?xh.convertCallbackFun(f):Promise.resolve(f)}function ys(f,c){return new Promise(function(h){return setTimeout(h,f,c)})}function gr(f,c){return new Promise(function(h,e){return setTimeout(e,
f,c)})}function hr(f,c){return new Promise(function(h,e){var k=!1;setTimeout(function(){return!k&&(k=!0)&&e(Error("Promise timed out"))},f);c.then(function(n){return!k&&(k=!0)&&h(n)},function(n){return!k&&(k=!0)&&e(n)})})}function zs(f){var c=Date.now();return Promise.resolve(f).then(function(){return Date.now()-c})}function Ix(f,c,h){"function"===typeof f&&(c=f,f=void 0);return new Promise(function(e,k){var n=!1,b=!1,d=void 0,m=void 0,a=setInterval(function(){if(n)return clearInterval(a);try{m=c()}catch(g){d=
g}if(m||d||b)return n=!0,clearInterval(a),d?k(d):b?"undefined"===typeof h?k(Error("timeout")):e(h):e(m)},10);"number"===typeof f&&setTimeout(function(){return b=!0},f)})}function bw(){var f,c,h=new Promise(function(e,k){f=e;c=k});return{resolve:f,reject:c,promise:h}}function cw(f){return function(){var c=Array.from(arguments),h=this;return new Promise(function(e,k){c.push(function(n,b){return n?k(n):e(b)});f.apply(h,c)})}}function lq(f){return function(){var c=Array.from(arguments),h=this;return new Promise(function(e,
k){c.push(function(){var n=Array.from(arguments),b=n.shift();return b?k(b):e(n)});f.apply(h,c)})}}function Jx(f,c,h,e,k){var n=f.shift();if(n)try{Promise.resolve(n(c,h)).then(function(b){return Jx(f,b,h,e,k)}).catch(function(b){k(b)})}catch(b){k(b)}else e(c)}function Zt(f){return new Promise(function(c,h){return Fi._chainResolveNext(f.slice(),void 0,{},c,h)})}function Bp(f,c){return Promise.resolve(f).then(function(h){try{c()}catch(e){console.error("Error in promise finally: "+e.stack||e)}return h}).catch(function(h){try{c()}catch(e){console.error("Error in promise finally: "+
e.stack||e)}throw h;})}function $t(f,c){function h(){c--;try{var g=b++;f[g]().then(function(l){c++;k[g]=l;0===--d?m():e()}).catch(function(l){return a(l)})}catch(l){a(l)}}function e(){for(;!n&&0<d&&b<f.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!f.length)return Promise.resolve([]);var k=[],n=null,b=0,d=f.length,m,a;return new Promise(function(g,l){m=function(){return g(k)};a=function(r){return l(n=r)};e()})}function Ti(f,c){if(f instanceof Ti)return f;if(!(this instanceof Ti))return new Ti(f,c);
this.setSplitter(c||".");this.fromPath(f)}function au(f){var c={},h;for(h in f)c[h]=f[h].slice();return c}function bu(f,c){var h={},e;for(e in f)if(!c.includes(e)){h[e]=[];for(var k=f[e],n=0;n<k.length;n++){var b=k[n];c.includes(b)||h[e].push(b)}}return h}function cu(f,c,h,e){h=void 0===h?[]:h;e=void 0===e?Infinity:e;if(!Array.isArray(f[c]))return[];for(var k=[],n={},b={},d=0;d<h.length;d++)b[h[d]]=!0;c=f[c].slice();d={};for(var m=c.length;m--;){var a=c[m];a in b?c.splice(m,1):d[a]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(a=c.shift(),!(a in n||a in b)&&(m=d[a]||0,!(m>e)&&(k.push(a),n[a]=!0,a=f[a])))for(var g=0;g<a.length;g++){var l=a[g];l in n||l in d||(d[l]=m+1,c.push(l))}return k}function du(f,c,h,e){e=void 0===e?Infinity:e;h&&(f=Wj.without(f,h));c=[c];h=0;for(var k={};c.length&&h++<e;){var n=c.shift();if(!k[n]){var b=f[n]||[];k[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return k}function As(f){var c={},h;for(h in f)for(var e=f[h],k=0;k<e.length;k++){var n=e[k];c[n]?c[n].push(h):
c[n]=[h]}return c}function eu(f,c){c=[];var h={},e={},k={};for(g in f){h.hasOwnProperty(g)||(h[g]=!0,c.push(g));var n=f[g],b={};if(n){e[g]=[];n=$jscomp.makeIterator(n);for(var d=n.next();!d.done;d=n.next())if(d=d.value,!b.hasOwnProperty(d)&&g!==d){var m=k[d]||(k[d]=[]);m.includes(g)||m.push(g);b[d]=!0;e[g].push(d);h.hasOwnProperty(d)||(h[d]=!0,c.push(d))}}}for(f=[];c.length;){h=Infinity;var a=[];b=[];n=[];for(d=0;d<c.length;d++){var g=c[d];m=e[g]||[];m.length>h||(m.length!==h||m.some(function(l){return a.includes(l)})?
(h=m.length,a=[g],b=[d],n=(k[g]||[]).slice()):(a.push(g),b.push(d),n.push.apply(n,$jscomp.arrayFromIterable(k[g]||[]))))}for(d=b.length;d--;)g=c[b[d]],k[g]=[],c.splice(b[d],1);h=$jscomp.makeIterator(n);for(g=h.next();!g.done;g=h.next())g=g.value,e[g]=e[g].filter(function(l){return!a.includes(l)});f.push(a)}return f}function Bs(f,c,h,e,k,n){function b(a){-1<d.indexOf(a)||(e=f.call(n,e,a,m++),d=d.concat([a]),Wj.withoutAll(c[a]||[],d).forEach(function(g){return b(g)}))}var d=k||[],m=0;b(h);return e}
function fu(f){f=void 0===f?10:f;for(var c={},h=Wj.range(1,f).map(String),e=0;e<h.length;e++){var k=Math.floor(Math.random()*f);c[h[e]]=Wj.shuffle(h).slice(0,k)}return c}function gu(f){return Array.isArray(f)&&2<=f.length&&f[0]<=f[1]}function Kx(f){return f.sort(Ui.compare)}function uo(f,c){return f[0]<c[0]?f[1]<c[0]?-3:f[1]===c[0]?-2:-1:f[0]===c[0]?f[1]===c[1]?0:f[1]<c[1]?-1:1:-1*uo(c,f)}function dw(f,c,h){switch(this.compare(f,c)){case -3:case 3:return null;case 0:return h&&h(f,c,f),f;case 2:case 1:var e=
f;f=c;c=e;case -2:case -1:return e=[f[0],Math.max(f[1],c[1])],h&&h(f,c,e),e;default:throw Error("Interval compare failed");}}function Lx(f,c){for(var h=[],e=f.length;0<e;){var k=f.shift();e--;for(var n=0;n<e;n++){var b=Ui.coalesce(k,f[n],c);b&&(k=b,f.splice(n,1),e--,n--)}h.push(k)}return this.sort(h)}function ir(f,c,h){for(var e=[];0<f.length;){var k=f.shift(),n=c.map(function(b){b=Ui.compare(k,b);return-1===b||0===b||1===b});e.push(h(k,n[0]));e.push(k)}return e}function Zm(f,c,h,e,k,n){n=n||Ui.GLOBAL;
h=this.sort(h);for(var b,d=[];b=h.shift();)if(!(b[1]<f)){b[0]<f&&(b=Array.prototype.slice.call(b),b[0]=f);var m=c<b[0]?c:b[0];f<m&&d.push(e.call(n,[f,m],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;k&&(a=d.slice(-1)[0])&&k.call(n,a,b,a)}else d.push(e.call(n,b,!1));f=b[1];if(f>=c)break}f<c&&d.push(e.call(n,[f,c],!0));return d}function ew(f,c,h){return Ui.intervalsInRangeDo(f,c,Ui.coalesceOverlapping(Array.prototype.slice.call(h)),function(e,k){return k?e:null}).filter(Boolean)}
function Cs(f,c){var h=0,e,k;return c.map(function(n){for(;k=f[h];)if(k[0]<n[0])h++;else break;if(k&&k[0]===n[0]){for(e=h;k=f[e];)if(k[1]<n[1])e++;else break;if(k&&k[1]===n[1])return Ui.range(h,e)}return[]})}function fw(f,c,h){h=h||0;h+c>f.length&&(h-=h+c-f.length);return{array:f,from:h,to:h+c}}function Xn(f){return f.array.slice(f.from,f.to)}function gw(f,c){return c<f.from||c>=f.to?null:c-f.from}function jr(f,c){return 0>c||c>f.to-f.from?null:f.from+c}function Ds(f,c){if(!(c in f.array))return null;
var h=0;c<f.from&&(h=-f.from+c);c>=f.to&&(h=c-f.to+1);return 0===h?f:vo.create(f.array,f.to-f.from,f.from+h)}function kr(f,c,h){return(f=f[c])?f[h]:void 0}function Ak(f,c,h,e){(f=f[c])&&(f[h]=e);return e}function lr(f,c){return f[c]}function mq(f,c,h){return f[c]=h}function ca(f,c){return f.reduce(function(h,e){h.push(e[c]);return h},[])}function wa(f,c,h){return f.map(function(e,k){return e[c]?e[c]=h[k]:void 0})}function ib(f,c,h){for(var e=Array(f);0<f;)e[--f]=$h.arrayWithN(c,h);return e}function Gb(f,
c,h,e){for(var k=Array(f),n=0;n<f;n++){k[n]=Array(c);for(var b=0;b<c;b++)k[n][b]=h.call(e||this,n,b)}return k}function zc(f,c,h){f.forEach(function(e,k){e.forEach(function(n,b){c.call(h||this,n,k,b)})})}function Kc(f,c,h){var e=Array(f.length);f.forEach(function(k,n){e[n]=Array(k.length);k.forEach(function(b,d){e[n][d]=c.call(h||this,b,n,d)})});return e}function re(f){for(var c=f[0],h=Array(f.length-1),e=1;e<f.length;e++)for(var k=h[e-1]={},n=0;n<c.length;n++)k[c[n]]=f[e][n];return h}function Ke(f,
c){Array.isArray(f)||(f=[f]);var h=[[]],e=h[0],k=f.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(d,m){var a=e.indexOf(m);-1===a&&(a=e.length,e.push(m));d[a]=b[m];return d},[])])},[]);c=1===arguments.length?null:c;k.forEach(function(n){for(var b=0;b<e.length;b++)n[b]||(n[b]=c)});return h.concat(k)}function uf(f,c,h,e,k){e=void 0===e?{i:0}:e;k=void 0===k?0:k;var n=e.i++;c(f,n,k);(h(f,n,k)||[]).forEach(function(b){return uf(b,c,h,e,k+1)})}function Cg(f,c,h,e,k){e=void 0===e?{i:0}:
e;k=void 0===k?0:k;var n=e.i++;(h(f,n,k)||[]).forEach(function(b){return Cg(b,c,h,e,k)});c(f,n,k)}function ph(f,c,h){if(c(f))return f;if((f=h(f))&&f.length)for(var e=0;e<f.length;e++){var k=ph(f[e],c,h);if(k)return k}}function Rh(f,c,h){var e=[];c(f)&&e.push(f);return e.concat(nl.flatten((h(f)||[]).map(function(k){return Rh(k,c,h)})))}function mh(f,c,h,e){e=void 0===e?0:e;return[c(f,e)].concat(nl.flatten((h(f)||[]).map(function(k){return mh(k,c,h,e+1)})))}function og(f,c,h,e){e=void 0===e?0:e;var k=
(h(f)||[]).map(function(n){return og(n,c,h,e+1)});return c(f,k,e)}function ki(f){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!f[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=f.sendHeartbeat&&(f.heartbeatInterval||1E3);var e=f.hasOwnProperty("ignoreUnknownMessages")?f.ignoreUnknownMessages:!1,k={_outgoing:[],_inflight:[],_id:f.id||fm.newUUID(),_ignoreUnknownMessages:e,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:fm.OFFLINE,_runWhenOnlineCallbacks:function(){var b=k._whenOnlineCallbacks.slice();k._whenOnlineCallbacks=
[];b.forEach(function(d){try{d.call(null,null,k)}catch(m){console.error("error in _runWhenOnlineCallbacks: %s",m)}})},_ensureStatusWatcher:function(){k._statusWatcherProc||(k._statusWatcherProc=setInterval(function(){k.isOnline()&&k._whenOnlineCallbacks.length&&k._runWhenOnlineCallbacks();var b=k._status;k._status=k.isOnline()?fm.ONLINE:fm.OFFLINE;k._status!==fm.ONLINE&&k._statusWatcherProc&&k.reconnect();if(k._status!==b&&k.onStatusChange)k.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=fm.newUUID());b.sender=k.id();b.messageIndex=k._messageCounter++;return b},_queueSend:function(b,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);k._outgoing.push([b,d])},_deliverMessageQueue:function(){function b(a){if(-1!==k._inflight.indexOf(a)){var g=a[0],l=a[1];l&&(k._messageResponseCallbacks[g.messageId]=l);f.send.call(k,g,function(r){fm.remove(k._inflight,a);
r&&d(r,a);k._deliverMessageQueue()})}}function d(a,g){var l=g[1];delete k._messageResponseCallbacks[g[0].messageId];console.error(a);l&&l(a)}if(f.allowConcurrentSends||!k._inflight.length){var m=k._outgoing.shift();m&&(k._inflight.push(m),k.isOnline()?b(m):k.whenOnline(function(){b(m)}),function(a){"number"===typeof f.sendTimeout&&setTimeout(function(){-1!==k._inflight.indexOf(a)&&(fm.remove(k._inflight,a),d(Error("Timeout sending message"),a),k._deliverMessageQueue())},f.sendTimeout)}(m),f.allowConcurrentSends&&
k._outgoing.length&&k._deliverMessageQueue())}},_startHeartbeatProcess:function(){k._startHeartbeatProcessProc||(k._startHeartbeatProcessProc=setTimeout(function(){f.sendHeartbeat.call(k,function(b,d){k._startHeartbeatProcessProc=null;k._startHeartbeatProcess()})},k._heartbeatInterval))},id:function(){return k._id},isOnline:function(){return f.isOnline.call(k)},heartbeatEnabled:function(){return"number"===typeof k._heartbeatInterval},listen:function(b){if(!k._listenInProgress)return k._listenInProgress=
!0,k._ensureStatusWatcher(),f.listen.call(k,function(d){k._listenInProgress=null;b&&b(d);k.heartbeatEnabled()&&k._startHeartbeatProcess()})},reconnect:function(){if(k._status!==fm.ONLINE)return k.listen(),k},send:function(b,d){k._addMissingData(b);k._queueSend(b,d);k._deliverMessageQueue();return b},sendTo:function(b,d,m,a){return k.send({target:b,action:d,data:m},a)},onMessage:function(b){k.emit("message",b);if(b.inResponseTo){var d=k._messageResponseCallbacks[b.inResponseTo];d&&!b.expectMoreResponses&&
delete k._messageResponseCallbacks[b.inResponseTo];d&&d(null,b)}else if(d=k._services[b.action])try{d.call(null,b,k)}catch(m){d=String(m.stack||m),console.error("Error invoking service: "+d),k.answer(b,{error:d})}else k._ignoreUnknownMessages||k.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,d,m,a){"function"===typeof m&&(a=m,m=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:d};m&&(b.expectMoreResponses=!0);return k.send(b,a)},close:function(b){clearInterval(k._statusWatcherProc);
k._statusWatcherProc=null;f.close.call(k,function(d){k._status=fm.OFFLINE;b&&b(d)});return k},whenOnline:function(b){k._whenOnlineCallbacks.push(b);k.isOnline()&&k._runWhenOnlineCallbacks();return k},outgoingMessages:function(){return fm.pluck(k._inflight.concat(k._outgoing),0)},addServices:function(b){Object.assign(k._services,b);return k}};f.services&&k.addServices(f.services);fm.makeEmitter(k);for(var n in f)-1===h.indexOf(n)&&f.hasOwnProperty(n)&&(k[n]=f[n]);return k}function gm(f,c,h){h||(h=
c,c=f,f=null);f=f||{};var e=f.args||[];f=ai.create(f);f.run.apply(f,[c].concat(e).concat(h));return f}function $m(f){f=f||{};f.useMessenger=!0;var c=f.workerId||ai.newUUID(),h=ai.messengerCreate({sendTimeout:5E3,send:function(e,k){h.worker.postMessage(e);k()},listen:function(e){var k=h.worker=ai.isNodejs?ai.NodejsWorker.create(f):ai.BrowserWorker.create(f);k.on("message",function(n){h.onMessage(n)});k.on("ready",function(){ai.NodejsWorker.debug&&console.log("WORKER READY!!!")});k.on("close",function(){ai.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});k.once("ready",e)},close:function(e){return h.worker.ready?h.sendTo(c,"close",{},function(k,n){(k=k||n.data.error)&&console.error("Error in worker messenger close: "+k.stack||k);if(k)e(k);else{var b=!1;h.worker.once("close",function(){b=!0});ai.waitFor(1E3,function(){return!!b},e)}}):e(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(e,k){h.sendTo(c,"remoteEval",{expr:e},function(n,b){k(n,b?b.data.result:null)})},run:function(){var e=
Array.prototype.slice.call(arguments),k=e.shift(),n=e.pop();if("function"!==typeof k)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(k),args:e},function(b,d){n(b||d.data.error,d?d.data.result:null)})}});h.listen();return h}function an(){if(!xe.isNode||xe.GLOBAL.lively||xe.GLOBAL.lively)if(xe.livelyLang._prevLivelyGlobal=xe.GLOBAL.lively,xe.GLOBAL.lively||(xe.GLOBAL.lively={}),xe.GLOBAL.lively.lang)for(var f in xe.livelyLang)xe.GLOBAL.lively.lang[f]=
xe.livelyLang[f];else xe.GLOBAL.lively.lang=xe.livelyLang}function hm(f){if(!f)return f;if(Array.isArray(f))return xe.createChain(xe.arr,f);if("Date"===f.constructor.name)return xe.createChain(xe.date,f);switch(typeof f){case "string":return xe.createChain(xe.string,f);case "object":return xe.createChain(xe.obj,f);case "function":return xe.createChain(xe.fun,f);case "number":return xe.createChain(xe.num,f)}throw Error("Chain for object "+f+" ("+f.constructor.name+") no supported");}function Dh(){xe.isNode||
(xe.livelyLang._prevLivelyGlobal?delete xe.GLOBAL.lively.lang:delete xe.GLOBAL.lively);return xe.livelyLang}function nh(){Object.assign(xe.livelyLang,{worker:xF,messenger:yF,events:Tz,tree:hu,grid:Uz,arrayProjection:zF,interval:AF,graph:iu,date:ju,properties:Uo,obj:Ng,arr:ng,fun:xn,num:sm,string:Li,Closure:fk,promise:xh,Path:Ti,Group:yn});xe.globalInterfaceSpec.forEach(function(f){if("installMethods"===f.action){var c=xe.Path(f.target);c.isIn(xe.GLOBAL)||c.set(xe.GLOBAL,{},!0);var h=xe.Path(f.sources[0]);
f.methods.forEach(function(e){xe.installProperty(h.concat([e]),c.concat([e]))});f.alias&&f.alias.forEach(function(e){xe.installProperty(h.concat([e[1]]),c.concat([e[0]]))})}else if("installObject"===f.action)c=xe.Path(f.target),f=xe.Path(f.source).get(xe.livelyLang),c.set(xe.GLOBAL,f,!0);else throw Error("Cannot deal with global setup action: "+f.action);})}function Cp(){xe.globalInterfaceSpec.forEach(function(f){if("installMethods"===f.action){var c=xe.Path(f.target),h=xe.Path(f.source).get(xe.livelyLang),
e=c.get(xe.GLOBAL);e&&(f.methods.filter(function(k){return h===e[k]}).forEach(function(k){delete e[k]}),f.alias&&f.alias.filter(function(k){return h===e[k]}).forEach(function(k){delete e[k[0]]}))}else if("installObject"===f.action)c=xe.Path(f.target),c.del(xe.GLOBAL);else throw Error("Cannot deal with global setup action: "+f.action);})}function BF(f){return function(c,h,e,k){null==e&&(e=f);null==k&&(k=e);null==h&&(h=kj.unit(c));var n=kj.unit(c);if(n===h)return c;var b=kj.unitLess(c);"px"!==kj.unit(e)&&
console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==kj.unit(k)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=kj.unitLess(c)*kj.unitLess(e);else if("rem"===n)b=kj.unitLess(c)*kj.unitLess(f);else if("ex"===n)b=kj.unitLess(c)*kj.unitLess(e)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),
c;e=b;if("px"!==h)if("em"===h)e=b/kj.unitLess(k);else if("rem"===h)e=b/kj.unitLess(f);else if("ex"===h)e=b/kj.unitLess(k)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(e.toFixed(5))+h}}function Vz(f){return Number(kj.parseCssLength(f,"px").slice(0,-2))}function Gl(f,c,h,e){if("number"===typeof f){var k=f;
f=c;c=e}else k=f.x,f=f.y,h=c.x-k,c=c.y-f;return new ne.Rectangle(k,f,h,c)}function th(f,c){return new ne.Point(f,c)}function Mx(f){f=new ae.Color(f);return{red:f.red()/255,green:f.green()/255,blue:f.blue()/255,alpha:f.alpha()}}function ku(f){return(f=f.match(LY))?{scheme:f[1],auth:f[2],host:f[3],port:f[4],path:f[5]}:null}function hw(f){var c="";f.scheme&&(c+=f.scheme+":");c+="//";f.auth&&(c+=f.auth+"@");f.host&&(c+=f.host);f.port&&(c+=":"+f.port);f.path&&(c+=f.path);return c}function CF(f){var c=
f,h=ku(f);if(h){if(!h.path)return f;c=h.path}f=bn.isAbsolute(c);c=c.split(/\/+/);for(var e,k=0,n=c.length-1;0<=n;n--)e=c[n],"."===e?c.splice(n,1):".."===e?k++:0<k&&(""===e?(c.splice(n+1,k),k=0):(c.splice(n,2),k--));c=c.join("/");""===c&&(c=f?"/":".");return h?(h.path=c,hw(h)):c}function DF(f,c){""===f&&(f=".");""===c&&(c=".");var h=ku(c),e=ku(f);e&&(f=e.path||"/");if(h&&!h.scheme)return e&&(h.scheme=e.scheme),hw(h);if(h||c.match(fea))return c;if(e&&!e.host&&!e.path)return e.host=c,hw(e);f="/"===c.charAt(0)?
c:CF(f.replace(/\/+$/,"")+"/"+c);return e?(e.path=f,hw(e)):f}function mr(f){return f}function lJ(f){return nr(f)?"$"+f:f}function EF(f){return nr(f)?f.slice(1):f}function nr(f){if(!f)return!1;var c=f.length;if(9>c||95!==f.charCodeAt(c-1)||95!==f.charCodeAt(c-2)||111!==f.charCodeAt(c-3)||116!==f.charCodeAt(c-4)||111!==f.charCodeAt(c-5)||114!==f.charCodeAt(c-6)||112!==f.charCodeAt(c-7)||95!==f.charCodeAt(c-8)||95!==f.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==f.charCodeAt(c))return!1;return!0}
function iw(f,c){return f===c?0:null===f?1:null===c?-1:f>c?1:-1}function or(){(this||Yn)._array=[];(this||Yn)._set=Wz?new Map:Object.create(null)}function Xz(){(this||pr)._array=[];(this||pr)._sorted=!0;(this||pr)._last={generatedLine:-1,generatedColumn:0}}function Pj(f){f||(f={});(this||Mi)._file=Bm.getArg(f,"file",null);(this||Mi)._sourceRoot=Bm.getArg(f,"sourceRoot",null);(this||Mi)._skipValidation=Bm.getArg(f,"skipValidation",!1);(this||Mi)._sources=new mJ;(this||Mi)._names=new mJ;(this||Mi)._mappings=
new gea;(this||Mi)._sourcesContents=null}function Dp(f,c,h,e,k,n){var b=Math.floor((c-f)/2)+f,d=k(h,e[b],!0);return 0===d?b:0<d?1<c-b?Dp(b,c,h,e,k,n):n==nJ.LEAST_UPPER_BOUND?c<e.length?c:-1:b:1<b-f?Dp(f,b,h,e,k,n):n==nJ.LEAST_UPPER_BOUND?b:0>f?-1:f}function wo(f,c,h){var e=f[c];f[c]=f[h];f[h]=e}function Nx(f,c,h,e){if(h<e){var k=h-1;wo(f,Math.round(h+Math.random()*(e-h)),e);for(var n=f[e],b=h;b<e;b++)0>=c(f[b],n)&&(k+=1,wo(f,k,b));wo(f,k+1,b);k+=1;Nx(f,c,h,k-1);Nx(f,c,k+1,e)}}function Yk(f,c){var h=
f;"string"===typeof f&&(h=Qg.parseSourceMapInput(f));return null!=h.sections?new lj(h,c):new Cm(h,c)}function Cm(f,c){var h=f;"string"===typeof f&&(h=Qg.parseSourceMapInput(f));f=Qg.getArg(h,"version");var e=Qg.getArg(h,"sources"),k=Qg.getArg(h,"names",[]),n=Qg.getArg(h,"sourceRoot",null),b=Qg.getArg(h,"sourcesContent",null),d=Qg.getArg(h,"mappings");h=Qg.getArg(h,"file",null);if(f!=(this||sf)._version)throw Error("Unsupported version: "+f);n&&(n=Qg.normalize(n));e=e.map(String).map(Qg.normalize).map(function(m){return n&&
Qg.isAbsolute(n)&&Qg.isAbsolute(m)?Qg.relative(n,m):m});(this||sf)._names=xC.fromArray(k.map(String),!0);(this||sf)._sources=xC.fromArray(e,!0);(this||sf)._absoluteSources=(this||sf)._sources.toArray().map(function(m){return Qg.computeSourceURL(n,m,c)});(this||sf).sourceRoot=n;(this||sf).sourcesContent=b;(this||sf)._mappings=d;(this||sf)._sourceMapURL=c;(this||sf).file=h}function yC(){(this||sf).generatedLine=0;(this||sf).generatedColumn=0;(this||sf).source=null;(this||sf).originalLine=null;(this||
sf).originalColumn=null;(this||sf).name=null}function lj(f,c){var h=f;"string"===typeof f&&(h=Qg.parseSourceMapInput(f));f=Qg.getArg(h,"version");h=Qg.getArg(h,"sections");if(f!=(this||sf)._version)throw Error("Unsupported version: "+f);(this||sf)._sources=new xC;(this||sf)._names=new xC;var e={line:-1,column:0};(this||sf)._sections=h.map(function(k){if(k.url)throw Error("Support for url field in sections not implemented.");var n=Qg.getArg(k,"offset"),b=Qg.getArg(n,"line"),d=Qg.getArg(n,"column");
if(b<e.line||b===e.line&&d<e.column)throw Error("Section offsets must be ordered and non-overlapping.");e=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:d+1},consumer:new Yk(Qg.getArg(k,"map"),c)}})}function Tl(f,c,h,e,k){(this||Hj).children=[];(this||Hj).sourceContents={};(this||Hj).line=null==f?null:f;(this||Hj).column=null==c?null:c;(this||Hj).source=null==h?null:h;(this||Hj).name=null==k?null:k;(this||Hj).$$$isSourceNode$$$=!0;null!=e&&this.add(e)}function Dm(f,c){c=void 0===c?{}:
c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},nq.obj.dissoc(c&&c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},nq.obj.dissoc(c,["format"]));return nq.es.generate(f,c)}function zC(f,c){for(var h=65536,e=0;e<c.length;e+=2){h+=c[e];if(h>f)return!1;h+=c[e+1];if(h>=f)return!0}}function Zn(f,c){return 65>f?36===f:91>f?!0:97>f?95===f:123>f?!0:65535>=f?170<=f&&hea.test(String.fromCharCode(f)):!1===c?
!1:zC(f,MY)}function lu(f,c){return 48>f?36===f:58>f?!0:65>f?!1:91>f?!0:97>f?95===f:123>f?!0:65535>=f?170<=f&&iea.test(String.fromCharCode(f)):!1===c?!1:zC(f,MY)||zC(f,jea)}function vi(f,c){return new gk(f,{beforeExpr:!0,binop:c})}function Og(f,c){void 0===c&&(c={});c.keyword=f;return oJ[f]=new gk(f,c)}function $n(f,c){return 10===f||13===f||!c&&(8232===f||8233===f)}function lk(f){return new RegExp("^(?:"+f.replace(/ /g,"|")+")$")}function mu(f,c){for(var h=1,e=0;;){Ox.lastIndex=e;var k=Ox.exec(f);
if(k&&k.index<c)++h,e=k.index+k[0].length;else return new AC(h,c-e)}}function Dd(f){var c={},h;for(h in FF)c[h]=f&&pJ.call(f,h)?f[h]:FF[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!NY&&"object"===typeof console&&console.warn&&(NY=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);
if(OY(c.onToken)){var e=c.onToken;c.onToken=function(k){return e.push(k)}}OY(c.onComment)&&(c.onComment=Vo(c,c.onComment));return c}function Vo(f,c){return function(h,e,k,n,b,d){h={type:h?"Block":"Line",value:e,start:k,end:n};f.locations&&(h.loc=new Yz(this,b,d));f.ranges&&(h.range=[k,n]);c.push(h)}}function oq(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function Px(f,c,h,e){f.type=c;f.end=h;this.options.locations&&(f.loc.end=e);this.options.ranges&&
(f.range[1]=h);return f}function qr(f){f=PY[f]={binary:lk(kea[f]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:lk("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:lk(lea[f])}};f.nonBinary.Script_Extensions=f.nonBinary.Script;f.nonBinary.gc=f.nonBinary.General_Category;f.nonBinary.sc=f.nonBinary.Script;f.nonBinary.scx=f.nonBinary.Script_Extensions}function nu(f){if(65535>=f)return String.fromCharCode(f);f-=65536;return String.fromCharCode((f>>10)+55296,(f&1023)+56320)}function rr(f){return 36===f||40<=f&&43>=f||46===f||63===f||91<=f&&94>=f||123<=f&&125>=f}function Es(f){return 65<=f&&90>=f||97<=f&&122>=f||95===f}function BC(f){return Es(f)||Qx(f)}function Qx(f){return 48<=
f&&57>=f}function CC(f){return 48<=f&&57>=f||65<=f&&70>=f||97<=f&&102>=f}function Zz(f){return 65<=f&&70>=f?10+(f-65):97<=f&&102>=f?10+(f-97):f-48}function $z(f){return"function"!==typeof BigInt?null:BigInt(f.replace(/_/g,""))}function ou(f){if(65535>=f)return String.fromCharCode(f);f-=65536;return String.fromCharCode((f>>10)+55296,(f&1023)+56320)}function jw(f){return"string"===typeof f?function(c){return c===f}:f?f:function(){return!0}}function pu(f,c){c=mea(c||Of);for(var h in f)c[h]=f[h];return c}
function kw(f,c,h){h(f,c)}function Wo(f,c,h){}function Vh(f){return"\u2716"===f.name}function pq(){}function zn(f){return 14>f&&8<f||32===f||160===f||$n(f)}function sr(f,c,h,e){var k=[];e=e||Nf.walk.make(Nf.custom.withMemberExpression);Object.keys(Nf.walk.base).forEach(function(n){var b=e[n];e[n]=function(d,m,a){Nf.arr.pushIfNotIncluded(k,d);return b(d,m,a)}});e.Property=function(n,b,d){Nf.arr.pushIfNotIncluded(k,n);d(n.key,b,"Expression");d(n.value,b,"Expression")};e.LabeledStatement=function(n,
b,d){n.label&&d(n.label,b,"Expression");d(n.body,b,"Statement")};Nf.walk.findNodeAround(f,c,h,e);return k}function Fs(f,c){function h(k){return null===k?null:e[k.type](k,h)}var e=Nf.obj.extend({Program:function(k,n){return{start:k.start,end:k.end,type:"Program",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},FunctionDeclaration:function(k,n){return{start:k.start,end:k.end,type:"FunctionDeclaration",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},BlockStatement:function(k,
n){return{start:k.start,end:k.end,type:"BlockStatement",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},ExpressionStatement:function(k,n){return{start:k.start,end:k.end,type:"ExpressionStatement",expression:n(k.expression),source:k.source,astIndex:k.astIndex}},CallExpression:function(k,n){return{start:k.start,end:k.end,type:"CallExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},MemberExpression:function(k,n){return{start:k.start,end:k.end,type:"MemberExpression",
object:n(k.object),property:n(k.property),computed:k.computed,source:k.source,astIndex:k.astIndex}},NewExpression:function(k,n){return{start:k.start,end:k.end,type:"NewExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},VariableDeclaration:function(k,n){return{start:k.start,end:k.end,type:"VariableDeclaration",declarations:k.declarations.map(n),kind:k.kind,source:k.source,astIndex:k.astIndex}},VariableDeclarator:function(k,n){return{start:k.start,end:k.end,
type:"VariableDeclarator",id:n(k.id),init:n(k.init),source:k.source,astIndex:k.astIndex}},FunctionExpression:function(k,n){return{start:k.start,end:k.end,type:"FunctionExpression",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},IfStatement:function(k,n){return{start:k.start,end:k.end,type:"IfStatement",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},ConditionalExpression:function(k,n){return{start:k.start,
end:k.end,type:"ConditionalExpression",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},SwitchStatement:function(k,n){return{start:k.start,end:k.end,type:"SwitchStatement",discriminant:n(k.discriminant),cases:k.cases.map(n),source:k.source,astIndex:k.astIndex}},SwitchCase:function(k,n){return{start:k.start,end:k.end,type:"SwitchCase",test:n(k.test),consequent:k.consequent.map(n),source:k.source,astIndex:k.astIndex}},BreakStatement:function(k,
n){return{start:k.start,end:k.end,type:"BreakStatement",label:k.label,source:k.source,astIndex:k.astIndex}},ContinueStatement:function(k,n){return{start:k.start,end:k.end,type:"ContinueStatement",label:k.label,source:k.source,astIndex:k.astIndex}},TryStatement:function(k,n){return{start:k.start,end:k.end,type:"TryStatement",block:n(k.block),handler:n(k.handler),finalizer:n(k.finalizer),guardedHandlers:k.guardedHandlers.map(n),source:k.source,astIndex:k.astIndex}},CatchClause:function(k,n){return{start:k.start,
end:k.end,type:"CatchClause",param:n(k.param),guard:n(k.guard),body:n(k.body),source:k.source,astIndex:k.astIndex}},ThrowStatement:function(k,n){return{start:k.start,end:k.end,type:"ThrowStatement",argument:n(k.argument),source:k.source,astIndex:k.astIndex}},ForStatement:function(k,n){return{start:k.start,end:k.end,type:"ForStatement",init:n(k.init),test:n(k.test),update:n(k.update),body:n(k.body),source:k.source,astIndex:k.astIndex}},ForInStatement:function(k,n){return{start:k.start,end:k.end,type:"ForInStatement",
left:n(k.left),right:n(k.right),body:n(k.body),source:k.source,astIndex:k.astIndex}},WhileStatement:function(k,n){return{start:k.start,end:k.end,type:"WhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},DoWhileStatement:function(k,n){return{start:k.start,end:k.end,type:"DoWhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},WithStatement:function(k,n){return{start:k.start,end:k.end,type:"WithStatement",object:n(k.object),body:n(k.body),
source:k.source,astIndex:k.astIndex}},UnaryExpression:function(k,n){return{start:k.start,end:k.end,type:"UnaryExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},BinaryExpression:function(k,n){return{start:k.start,end:k.end,type:"BinaryExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},LogicalExpression:function(k,n){return{start:k.start,end:k.end,type:"LogicalExpression",left:n(k.left),operator:k.operator,
right:n(k.right),source:k.source,astIndex:k.astIndex}},AssignmentExpression:function(k,n){return{start:k.start,end:k.end,type:"AssignmentExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},UpdateExpression:function(k,n){return{start:k.start,end:k.end,type:"UpdateExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},ReturnStatement:function(k,n){return{start:k.start,end:k.end,type:"ReturnStatement",
argument:n(k.argument),source:k.source,astIndex:k.astIndex}},Identifier:function(k,n){return{start:k.start,end:k.end,type:"Identifier",name:k.name,source:k.source,astIndex:k.astIndex}},Literal:function(k,n){return{start:k.start,end:k.end,type:"Literal",value:k.value,raw:k.raw,source:k.source,astIndex:k.astIndex}},ObjectExpression:function(k,n){return{start:k.start,end:k.end,type:"ObjectExpression",properties:k.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:k.source,
astIndex:k.astIndex}},ArrayExpression:function(k,n){return{start:k.start,end:k.end,type:"ArrayExpression",elements:k.elements.map(n),source:k.source,astIndex:k.astIndex}},SequenceExpression:function(k,n){return{start:k.start,end:k.end,type:"SequenceExpression",expressions:k.expressions.map(n),source:k.source,astIndex:k.astIndex}},EmptyStatement:function(k,n){return{start:k.start,end:k.end,type:"EmptyStatement",source:k.source,astIndex:k.astIndex}},ThisExpression:function(k,n){return{start:k.start,
end:k.end,type:"ThisExpression",source:k.source,astIndex:k.astIndex}},DebuggerStatement:function(k,n){return{start:k.start,end:k.end,type:"DebuggerStatement",source:k.source,astIndex:k.astIndex}},LabeledStatement:function(k,n){return{start:k.start,end:k.end,type:"LabeledStatement",label:k.label,body:n(k.body),source:k.source,astIndex:k.astIndex}}},c||{});return h(f)}function qu(f,c,h){if(!c)return[];f=Nf.findNodesIncluding(f,c.start);var e=f.indexOf(c);f=f.slice(0,e);f=Nf.arr.detect(f.reverse(),function(k){return Array.isArray(k.body)}).body;
if(!h)return Nf.arr.without(f,c);c=f.indexOf(c);return"before"===h?f.slice(0,c):f.slice(c+1)}function qq(f,c,h){f.astIndex||null!=h&&!h||Nf.addAstIndex(f);var e=null;Nf.withMozillaAstDo(f,null,function(k,n,b){e||n.astIndex<c||(n.astIndex===c?e=n:k())});return e}function xa(f,c,h){h||(h=c,c=f,f=null);f||(f={});c.astIndex||Nf.addAstIndex(c);var e,k=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");
Nf.withMozillaAstDo(c,{},function(b,d,m,a){if(!(k||d.astIndex<h.astIndex)){if(d===h||d.astIndex===h.astIndex)if(k=!0,f.asPath)e=a;else{d=Nf.Path(a);do e=d.get(c),d=d.slice(0,d.size()-1);while(-1==n.indexOf(e.type)&&0<d.size())}!k&&b()}});return e}function Xo(f){Nf.withMozillaAstDo(f,{index:0},function(c,h,e){c();h.astIndex=e.index++});return f}function Ul(f,c){"string"===typeof f&&(c=f,f=bi.parse(f));c&&bi.AllNodesVisitor.run(f,function(h,e,k){return!h.source&&(h.source=c.slice(h.start,h.end))});
return f}function cn(f,c){c=void 0===c?{}:c;var h=bi.parse("("+f+")",c);bi.AllNodesVisitor.run(h,function(e,k,n){if(!e._positionFixed){e._positionFixed=!0;if(e.start||0===e.start)e.start+=-1,e.end+=-1;c.addSource&&!e.source&&(e.source=f.slice(e.start,e.end))}});return h.body[0].expression}function ao(f,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+f+"}");try{var e=bi.parse(h||f,c);h?e=null:c.addSource&&bi.addSource(e,f)}catch(n){var k=n}k&&void 0!==k.raisedAt?(h&&(k.pos-=3,k.raisedAt-=3,k.loc.column-=3),h=""+f.slice(k.raisedAt-20,k.raisedAt),h=h+"<-error->"+f.slice(k.raisedAt,k.raisedAt+20),c.verbose&&console.log("parse error: "+h),k.parseErrorSource=h):k&&c.verbose&&
console.log(""+k+k.stack);e||(e=bi.loose.parse(f,c),c.addSource&&bi.addSource(e,f),e.isFuzzy=!0,e.parseError=k);return e}function ye(f,c){function h(l){l=k(e(l));b.allComments=l.comments}function e(l){n.forEach(function(r){var v=bi.arr.detect(bi.nodesAt(r.start,b).reverse(),function(y){return"BlockStatement"===y.type||"Program"===y.type});v||(v=b);v.comments||(v.comments=[]);v.comments.push(r);l.nodesWithComments.push(v)});return l}function k(l){l.nodesWithComments.forEach(function(r){bi.arr.clone(r.comments).reduce(function(v,
y){if(y.isBlock)return v.lastComment=null,v;if(!v.lastComment)return v.lastComment=y,v;var A=v.lastComment;if(bi.arr.detect(r.body,function(F){return F.start>=A.end&&F.end<=y.start}))return v.lastComment=y,v;var E=f.slice(A.end,y.start);if(/[\n\r][\n\r]+/.test(E))return v.lastComment=y,v;A.text+="\n"+y.text;A.end=y.end;bi.arr.remove(r.comments,y);bi.arr.remove(l.comments,y);return v},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,r,v,y,A,E){n.push({isBlock:l,text:r,node:null,
start:v,end:y,line:A,column:E})}}try{var b=bi.acorn.parse(f,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var d=f.split("\n"),m=l,a=m.loc;c=a.line;a=a.column;var g=m.pos;d=d[c-1];m="Syntax error at line "+c+" column "+a+" (index "+g+') "'+m.message+'"\nsource: '+d.slice(0,a)+"<--SyntaxError--\x3e"+d.slice(a);m=new SyntaxError(m);m.loc={line:c,column:a};m.pos=g;throw m;}throw l;}c.addSource&&bi.addSource(b,f);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&bi.addAstIndex(b);
b&&n&&h({ast:b,comments:n,nodesWithComments:[]});return b}function Uf(f){return Af.identifierRe.test(f)&&-1===f.indexOf("-")}function Ra(f){return"this"===f?{type:"ThisExpression"}:{name:String(f),type:"Identifier"}}function Em(f){return{type:"Literal",value:f}}function Yo(f){return{type:"ExpressionStatement",expression:f}}function tr(f){return{type:"ReturnStatement",argument:f}}function Rx(){return{type:"EmptyStatement"}}function aA(f,c,h){return{left:f,right:h,operator:c,type:"BinaryExpression"}}
function lw(f,c,h){for(var e=[],k=2;k<arguments.length;++k)e[k-2]=arguments[k];k=f.arrow;var n=f.id,b=f.expression,d=f.generator;c=void 0===c?[]:c;c=c.map(function(m){return"string"===typeof m?Af.id(m):m});return{type:(k?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?Af.id(n):n:void 0,params:c,body:b&&1===e.length?e[0]:{body:e,type:"BlockStatement"},expression:b||!1,generator:d||!1}}function rq(f,c){for(var h=[],e=1;e<arguments.length;++e)h[e-1]=arguments[e];"string"===typeof f&&(f=Af.id(f));
return{type:"CallExpression",callee:f,arguments:h}}function Xj(f,c,h){"string"===typeof f&&(f={name:f,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:f,init:c}]}}function Zo(f,c,h){"string"===typeof f&&(f=Af.id(f));"string"===typeof c?(h||Af.isIdentifier(c)||(h=!0),c=h?Af.literal(c):Af.id(c)):"number"===typeof c?(c=Af.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:f,property:c}}function ol(f,
c){for(var h=[],e=1;e<arguments.length;++e)h[e-1]=arguments[e];return h.reduce(function(k,n){return Af.member(k,n)},"object"===typeof f?f:Af.id(f))}function sq(f,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?Af.id(c):c:Af.id("undefined"),left:"string"===typeof f?Af.id(f):f}}function xo(f){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function ru(f){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(Af.block.apply(Af,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Fm(f,c,h,e){for(var k=[],n=3;n<arguments.length;++n)k[n-3]=arguments[n];Array.isArray(h)||(k.unshift(h),h=null);return{block:Af.block(k),finalizer:h?Af.block(h):null,handler:{body:Af.block(c),param:Af.id(f),type:"CatchClause"},type:"TryStatement"}}function Sx(f,c){return{type:"Property",key:f,computed:"Identifier"!==f.type,shorthand:!1,value:c}}function An(f){for(var c=
[],h=0;h<f.length;h+=2){var e=f[h];"string"===typeof e&&(e=Af.id(e));c.push(Af.prop(e,f[h+1]))}return{properties:c,type:"ObjectExpression"}}function Gm(f,c,h){c=void 0===c?Af.block():c;h=void 0===h?Af.block():h;return{consequent:c,alternate:h,test:f,type:"IfStatement"}}function su(f,c,h){return{type:"ForInStatement",left:"string"===typeof f?Af.varDecl(f):f,right:"string"===typeof c?Af.id(c):c,body:h}}function tu(f,c,h){c=void 0===c?Af.id("undefined"):c;h=void 0===h?Af.id("undefined"):h;return{consequent:c,
alternate:h,test:f,type:"ConditionalExpression"}}function bA(f,c,h){return{operator:f,left:c,right:h,type:"LogicalExpression"}}function mw(f){var c=new ge.ScopeVisitor,h=c.newScope(f,null);c.accept(f,h,[]);return h}function DC(f,c){return ge.withMozillaAstDo(f,[],function(h,e,k){e.start<=c&&c<=e.end&&(k.push(e),h());return k})}function cj(f,c){return ge.tree.filter(ge.scopes(f),function(h){h=h.node;var e=h.start,k=h.end;"FunctionDeclaration"===h.type&&(e=h.params.length?h.params[0].start:h.body.start,
k=h.body.end);return e<=c&&c<=k},function(h){return h.subScopes})}function EC(f,c){return ge.arr.last(ge.scopesAtIndex(f,c))}function FC(f,c){return ge.arr.filter(ge.nodesAt(f,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function Gs(f){return ge.withMozillaAstDo(f,{root:f,result:[]},function(c,h,e){e.result.push(h);if(h!==e.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return e;c();return e}).result}
function GC(f,c,h){h=void 0===h?[]:h;c&&f.node.id&&f.node.id.name&&h.push(f.node.id);ge.helpers.declIds(f.params,h);for(c=0;c<f.funcDecls.length;c++){var e=f.funcDecls[c].id;e&&h.push(e)}ge.helpers.varDeclIds(f,h);h.push.apply(h,$jscomp.arrayFromIterable(f.catches));for(c=0;c<f.classDecls.length;c++)(e=f.classDecls[c].id)&&h.push(e);h.push.apply(h,$jscomp.arrayFromIterable(f.importSpecifiers));return h}function ur(f,c){for(var h=[],e=$jscomp.makeIterator(ge.declarationsOfScope(f,!0)),k=e.next();!k.done;k=
e.next())h.push(k.value.name);c&&ge._findJsLintGlobalDeclarations("Program"===f.node.type?f.node:f.node.body,h);return h}function Ep(f,c){c=void 0===c?[]:c;if(!f||!f.comments)return c;f=$jscomp.makeIterator(f.comments);for(var h=f.next();!h.done;h=f.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace(ge.globalDeclRe,"").split(","));for(var e=h.next();!e.done;e=h.next())c.push(e.value.trim())}return c}function tq(f){return ge.FindToplevelFuncDeclVisitor.run(f)}
function uq(f,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var e=c.decls||ge.declarationsWithIdsOfScope(c);c.decls=e;return e.find(function(k){k=$jscomp.makeIterator(k);k.next();return k.next().value.name==f})||uq(f,h)}function Hm(f){function c(e,k){var n=[e].concat(k);e.refs.forEach(function(b){var d=$jscomp.makeIterator(ge.resolveReference(b.name,n)),m=d.next().value;d=d.next().value;h.set(b,{decl:m,declId:d,ref:b})});e.subScopes.forEach(function(b){return c(b,
n)})}if(f.referencesResolvedSafely)return f;var h=f.resolvedRefMap||(f.resolvedRefMap=new Map);c(f,[]);f.referencesResolvedSafely=!0;return f}function HC(f,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var e=h.ref,k=e.end;if(e.start<=f&&f<=k)return h}}function dn(f,c){function h(b){var d=ge._declaredVarNames(b,e);return ge.arr.filter(b.subScopes.map(h).reduce(function(m,a){return m.concat(a)},b.refs),function(m){return-1===d.indexOf(m.name)})}
c=c||{};c.withComments=!0;"string"===typeof f&&(f=ge.parse(f,c));f=ge.scopes(f);var e=!!c.jslintGlobalComment;c=ge._declaredVarNames(f,e);var k=f.refs.concat(ge.arr.flatten(f.subScopes.map(h))),n=ge.arr.withoutAll(k.map(function(b){return b.name}),c);return{scope:f,varDecls:f.varDecls,funcDecls:ge.arr.filter(f.funcDecls,function(b){return b.id}),classDecls:ge.arr.filter(f.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:k,thisRefs:f.thisRefs}}function Zk(f,c){f=ge.topLevelDeclsAndRefs(f,
c);var h=f.declaredNames.concat(ge.knownGlobals);return ge.arr.filter(f.refs,function(e){return-1===h.indexOf(e.name)})}function Tx(f,c,h,e){if(!c&&!f)throw Error("Need at least ast or code");c=c?c:ge.stringify(f);f=f&&f.loc?f:ge.parse(c,{locations:!0});return ge.withMozillaAstDo(f,[],function(k,n,b){h.every(function(d){return ge.num.between(d,n.loc.start.line,n.loc.end.line)})&&(ge.arr.pushIfNotIncluded(b,n),k());return b})}function vr(f,c,h,e){h=void 0===h?!0:h;e=void 0===e?{refs:[],decls:[]}:e;
if("this"===c)return e.refs.push.apply(e.refs,$jscomp.arrayFromIterable(f.thisRefs)),e;var k=ge.__varDeclIdsFor(f,c);if(!h&&k.length)return e;h=$jscomp.makeIterator(f.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&e.refs.push(n);e.decls.push.apply(e.decls,$jscomp.arrayFromIterable(k));f=$jscomp.makeIterator(f.subScopes);for(k=f.next();!k.done;k=f.next())vr(k.value,c,!1,e);return e}function Ux(f,c,h){var e=null;ge.arr.detect(ge.scopesAtIndex(f,h).reverse(),function(k){k=ge.declarationsOfScope(k,
!0);var n=ge.arr.pluck(k,"name").indexOf(c);if(-1===n)return!1;e=k[n];return!0});return e}function uu(f,c){c="string"===typeof c?ge.parse(c):c;return ge.custom.findNodesIncluding(c,f)}function bo(f,c,h){var e=ge.nodesAt(c.start,f).reverse().find(function(n){return ge.arr.include(ge._stmtTypes,n.type)});if(h&&h.asPath){c=new ge.BaseVisitor;var k;c.accept=ge.fun.wrap(c.accept,function(n,b,d,m){if(b===e)throw k=m,Error("stop search");return n(b,d,m)});try{c.accept(f,{},[])}catch(n){}return k}return e}
function wr(f){var c=[];f=f.node.body||[];for(var h=0;h<f.length;h++){var e=f[h];if("ImportDeclaration"===e.type)if(0===e.specifiers.length)c.push({local:null,imported:null,fromModule:e.source.value,node:e});else{var k=e.source?e.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(e.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:k,node:e}})))}}return c}function nw(f,c){(void 0===c?0:c)&&ge.resolveReferences(f);c=[];for(var h={},e=$jscomp.makeIterator(f.exportDecls),k=e.next();!k.done;h={$jscomp$loop$prop$node$2221:h.$jscomp$loop$prop$node$2221},k=e.next()){h.$jscomp$loop$prop$node$2221=k.value;var n=ge.statementOf(f.node,h.$jscomp$loop$prop$node$2221);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:h.$jscomp$loop$prop$node$2221,
type:"all"}):"ExportDefaultDeclaration"===n.type?ge.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2221,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(k=f.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2221,type:"id",decl:k.decl,declId:k.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2221,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(d){return function(m){if(b){var a=d.$jscomp$loop$prop$node$2221;var g=m.exported}else m.local&&(a=(g=f.resolvedRefMap.get(m.local))?g.decl:null,g=g?g.declId:null);return{local:!b&&
m.local?m.local.name:null,exported:m.exported?m.exported.name:null,imported:b&&m.local?m.local.name:null,fromModule:b||null,type:"id",node:d.$jscomp$loop$prop$node$2221,decl:a,declId:g}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(d){return function(m){return{local:m.id?m.id.name:"default",exported:m.id?m.id.name:"default",type:n.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2221,decl:m,declId:m.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2221,decl:n.declaration,declId:n.declaration.id})}}return ge.arr.uniqBy(c,function(d,m){return d.local==m.local&&d.exported==m.exported&&d.fromModule==m.fromModule})}function vu(f){return(new vq.ObjectSpreadTransformer).accept(f,
{},[])}function en(f,c){if(f.start===c.start&&f.end===c.end)return 0;if(f.end<=c.start)return-1;if(f.start>=c.end||f.start<=c.start&&f.end>=c.end)return 1;if(c.start<=f.start&&c.end>=f.end)return-1;throw Error("Comparing nodes");}function xr(f,c,h){h="object"===typeof h?h:{changes:[],source:h};var e=!1,k=h.changes.reduce(function(b,d){if(b.end<d.pos)return b;var m=d.pos<b.start;e=e||d.pos>=b.start&&d.pos<=b.end;if("add"===d.type)return{start:m?b.start+d.string.length:b.start,end:b.end+d.string.length};
if("del"===d.type)return{start:m?b.start-d.length:b.start,end:b.end-d.length};throw Error("Cannot deal with change "+De.obj.inspect(d));},{start:f.start,end:f.end}),n=h.source;f=c(f,n.slice(k.start,k.end),e);f="string"===typeof f?f:Array.isArray(f)?f.map(De._node2string).join("\n"+De._findIndentAt(n,k.start)):f=De._node2string(f);k=[{type:"del",pos:k.start,length:k.end-k.start},{type:"add",pos:k.start,string:f}];return{changes:h.changes.concat(k),source:De._applyChanges(k,n)}}function cA(f,c){f=f.sort(function(k,
n){return De._compareNodesForReplacement(k.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<f.length;h++){var e=f[h];c=De.replaceNode(e.target,e.replacementFunc,c)}return c}function IC(f,c,h,e){e="object"===typeof f?f:null;f="string"===typeof f?f:e.source||De._node2string(e);return De.replaceNode(c,h,f)}function qJ(f,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(f.varDecls));f=$jscomp.makeIterator(f.subScopes);for(var h=f.next();!h.done;h=f.next())qJ(h.value,
c);return c}function Fp(f){var c="object"===typeof f?f:De.parse(f);f="string"===typeof f?f:c.source||De._node2string(c);c=De.scopes(c);var h=De.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var e=h.next();!e.done;e=h.next())c.push({target:e.value,replacementFunc:function(k,n,b){b&&(k=De.parse(n).body[0]);return k.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return De.replaceNodes(c,f)}function Vx(f){var c="object"===typeof f?f:De.parse(f);
f="string"===typeof f?f:c.source||De._node2string(c);c=De.scopes(c);var h=De.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var e=h.next();!e.done;e=h.next())c.push({target:e.value,replacementFunc:function(k,n,b){b&&(k=De.parse(n).body[0]);n=[];k=$jscomp.makeIterator(k.declarations);for(b=k.next();!b.done;b=k.next()){var d=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:d.init}]});d=$jscomp.makeIterator(De.helpers.objPropertiesAsList(d.id,
[],!1));for(var m=d.next();!m.done;m=d.next())m=m.value.key,n.push(De.varDecl(m[m.length-2],De.memberChain.apply(De,[b.name].concat($jscomp.arrayFromIterable(m))),"var"))}return n}});return De.replaceNodes(c,f)}function ow(f,c){c=c||{};var h=De.parse(f,c),e=De.arr.last(h.body);if("ExpressionStatement"!==e.type)return c.asAST?h:f;h.body.splice(h.body.length-1,1,De.returnStmt(e.expression));return c.asAST?h:De.stringify(h)}function Wx(f,c){c=c||{};f=De.returnLastStatement(f,c);return c.asAST?De.program(De.funcExpr.apply(De,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(f.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+f+"\n}"}function JC(f,c){"string"===typeof f&&(f=De.parse(f));c=c||{};var h="Program"===f.type,e=c.startFuncNode||De.id("__start_execution");c=c.endFuncNode||De.id("__end_execution");var k=De.topLevelFuncDecls(f),n=f.body,b=[];k.forEach(function(d){var m=d.node;De.Path(d.path).set(f,De.exprStmt(m.id));b.push(m)});n.unshift(De.exprStmt(De.funcCall(e)));e=De.arr.last(n);"ExpressionStatement"===
e.type?(n.pop(),n.push(De.exprStmt(De.funcCall(c,De.id("null"),e.expression)))):"VariableDeclaration"===e.type&&"Identifier"===De.arr.last(e.declarations).id.type?n.push(De.exprStmt(De.funcCall(c,De.id("null"),De.arr.last(e.declarations).id))):n.push(De.exprStmt(De.funcCall(c,De.id("null"),De.id("undefined"))));b.push(De.tryStmt.apply(De,["err",[De.exprStmt(De.funcCall(c,De.id("err"),De.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?De.program.apply(De,$jscomp.arrayFromIterable(b)):
De.block.apply(De,$jscomp.arrayFromIterable(b))}function dA(f){if(!De.isProbablySingleExpressionRe.test(f)||30<f.split("\n").length)return f;try{var c=De.fuzzyParse(f);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(f="("+f.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return f}function Hs(f,c){var h=Dg.statementOf(f,
c,{asPath:!0}).slice(0,-2);h=Dg.Path(h).get(f);return h.comments&&h.comments.length?Dg.chain(Dg.extractComments(f)).reversed().detect(function(e){return e.followingNode===c}).value():null}function Is(f,c){function h(v){return Dg.arr.detect(v.node.body,function(y){return y.start>v.comment.end})}function e(v){return{type:"unknown",comment:v.comment.text}}function k(v){v=Dg.Path(v.path.slice(0,-1)).get(g);return{name:v.id?v.id.name:"<error: no name for function>",args:Dg.arr.pluck(v.params,"name")}}
function n(v){for(var y=Dg.Path(v.path.slice(0,-2)).get(g),A=y.key?y.key.name:"<error: no name for method>",E=v.path.slice(),F="<error: no object found for method>";E.length&&"init"!==Dg.arr.last(E);)E.pop();E.length&&(F=Dg.Path(E.slice(0,-1).concat(["id","name"])).get(g));if(Dg.string.startsWith(F,"<error")){for(E=v.path.slice();E.length&&"right"!==Dg.arr.last(E);)E.pop();E.length&&(F=Dg.Path(E.slice(0,-1).concat(["left"])).get(g),F=l.slice(F.start,F.end))}Dg.string.startsWith(F,"<error")&&(E=v.path.slice(),
(v=(v=Dg.Path(E.slice(0,-6)).get(g))&&"CallExpression"===v.type&&v.arguments[0])&&(F=l.slice(v.start,v.end)));return{name:A,args:Dg.arr.pluck(y.value.params,"name"),objectName:F}}function b(v){v=Dg.Path(v.path.slice(0,-1)).get(g);if("FunctionExpression"!==v.type&&"FunctionDeclaration"!==v.type)return{};var y=Dg.statementOf(g,v);if("ExpressionStatement"!==y.type||"AssignmentExpression"!==y.expression.type)return{};var A=l.slice(y.expression.left.object.start,y.expression.left.object.end);return{name:l.slice(y.expression.left.property.start,
y.expression.left.property.end),objectName:A,args:Dg.arr.pluck(v.params,"name")}}function d(v){var y=v.path.slice(0,-3);var A=Dg.Path(y).get(g);if(A&&"Property"===A.type){var E=Dg.arr.pluck(A.value.callee.params,"name");var F=A.key?A.key.name:"<error: no name for method>"}F||(y=v.path.slice(0,-2),(A=Dg.Path(y).get(g))&&"Property"===A.type&&(E=Dg.arr.pluck(A.value.params,"name"),F=A.key?A.key.name:"<error: no name for method>"));F||(F="<error: no name for method>",E=[],y=v.path);A=Dg.arr.clone(y);
for(v="<error: no object found for method>";A.length&&"init"!==Dg.arr.last(A);)A.pop();A.length&&(v=Dg.Path(A.slice(0,-1).concat(["id","name"])).get(g));if(Dg.string.startsWith(v,"<error")){for(A=Dg.arr.clone(y);A.length&&"right"!==Dg.arr.last(A);)A.pop();A.length&&(v=Dg.Path(A.slice(0,-1).concat(["left"])).get(g),v=l.slice(v.start,v.end))}Dg.string.startsWith(v,"<error")&&(A=Dg.arr.clone(y),(y=(y=Dg.Path(A.slice(0,-4)).get(g))&&"CallExpression"===y.type&&y.arguments[0])&&(v=l.slice(y.start,y.end)));
return{name:F,args:E,objectName:v}}function m(v){return v&&"VariableDeclaration"===v.type&&1===v.declarations.length}function a(v){return"AssignmentExpression"!==v.type?!1:"ObjectExpression"===v.right.type?!0:"AssignmentExpression"===v.right.type?a(v.right):!1}var g="string"===typeof f?Dg.parse(f,{withComments:!0}):f,l=c?c:"string"===typeof f?f:Dg.stringify(f),r=Dg.arr.sortBy(function(v){var y=[],A=new Dg.Visitor;A.accept=Dg.fun.wrap(A.accept,function(E,F,G,I){F.comments&&Dg.arr.pushAll(y,F.comments.map(function(M){return{path:I,
comment:M,node:F}}));return E(F,G,I)});A.accept(v,y,[]);return y}(g),function(v){return v.comment.start});return r.map(function(v,y){if(Dg.arr.equals(v.path.slice(-2),["value","body"]))return Dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},n(v)]);var A=v.path.slice(-5);Dg.arr.removeAt(A,1);if(Dg.arr.equals(A,["properties","value","callee","body"]))return Dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},d(v)]);if((A=Dg.Path(v.path.slice(0,-1)).get(g))&&"FunctionDeclaration"===
A.type)return Dg.obj.merge([v,v.comment,{type:"function",comment:v.comment.text},k(v)]);if(Dg.arr.equals(v.path.slice(-2),["right","body"]))return Dg.obj.merge([v,v.comment,{type:"method",comment:v.comment.text},b(v)]);A=h(v);return A?(y=r[y+1])&&y.comment.start<=A.start?Dg.obj.merge([v,v.comment,{followingNode:A},e(v)]):m(A)&&("ObjectExpression"===A.declarations[0].init.type||a(A.declarations[0].init))?Dg.obj.merge([v,v.comment,{followingNode:A},{type:"object",comment:v.comment.text},{name:A.declarations[0].id.name}]):
m(A)?Dg.obj.merge([v,v.comment,{followingNode:A},{type:"var",comment:v.comment.text},{name:A.declarations[0].id.name}]):Dg.obj.merge([v,v.comment,{followingNode:A},e(v)]):Dg.obj.merge([v,v.comment,{followingNode:A},e(v)])})}function wu(f,c){c=c||wi.obj.merge({hideOneLiners:!1},c);"string"===typeof f&&(f=wi.parse(f,{addSource:!0}));for(var h=[],e=$jscomp.makeIterator("Program"===f.type?f.body:f.body.body),k=e.next();!k.done;k=e.next()){k=k.value;k=wi.unwrapExport(k);var n=wi.functionWrapper(k,c)||
wi.varDefs(k)||wi.funcDef(k)||wi.es6ClassDef(k)||wi.someObjectExpressionCall(k);if(n){if(c.hideOneLiners)if(f.loc)n=wi.arr.filter(n,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(f.source){k=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&k.includes(b.parent)||(b.node.source||"").includes("\n"))&&k.push(b);n=k}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function yr(f){return wi.arr.flatmap(f,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?yr(wi.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?yr(c.elements):[]:[]})}function Xx(f){return Rg.isValidIdentifierRe.test(f)}function Im(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function Js(f,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return f+"("+(c&&c[1]||"")+")"}function xu(f){return f===f||f===Array||f===Function||f===String||f===Boolean||f===Date||f===RegExp||f===Number||f===Promise?!0:f instanceof Function&&(void 0!==f.superclass||void 0!==f._superclass)}function zr(f,c){return f.map(function(h){return h[c]})}function wq(f){if(Symbol.keyFor(f))return'Symbol.for("'+Symbol.keyFor(f)+'")';if(xi.knownSymbols.get(f))return xi.knownSymbols.get(f);String(f).match(xi.symMatcher);return String(f)}function yu(f){if(!f)return String(f);
if(Array.isArray(f))return"["+f.map(yu).join(",")+"]";if("symbol"===typeof f)return xi.printSymbol(f);try{return String(f)}catch(c){throw Error("Cannot print object: "+c.stack);}}function Ar(f,c){c=void 0===c?{}:c;var h=f.value,e=f.isPromise,k=f.promisedValue,n=f.promiseStatus;return f.isError||h instanceof Error?(c=String(h),(k=h.stack||"")&&h.message!==h.stack&&(k=String(k),0===k.indexOf(c)&&(k=k.slice(c.length)),c+="\n"+k),c):e?(f=xi.string.print(n),c="pending"===n?void 0:Ar({value:k},c),"Promise({status: "+
f+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?xi.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function pw(f,c){var h="";return Promise.resolve().then(function(){var e=c.lastIndexOf(".");0<=e?(h=c.slice(e+1),c=c.slice(0,e)):(h=c,c='(typeof window === "undefined" ? global : window)');return f(c)}).then(function(e){return{evalResult:e,startLetters:h,code:c}})}function Jm(f,c,h){f=gj.getObjectForCompletion(f,c).then(function(e){var k=e.evalResult;
e={completions:gj.descriptorsOfObjAndProtoProperties(k&&k.isEvalResult?k.value:k),startLetters:e.startLetters,code:e.code};k&&k.isPromise&&("fulfilled"===k.promiseStatus?e.promiseResolvedCompletions=gj.descriptorsOfObjAndProtoProperties(k.promisedValue):"rejected"===k.promiseStatus&&(e.promiseRejectedCompletions=gj.descriptorsOfObjAndProtoProperties(k.promisedValue)));return e});"function"===typeof h&&f.then(function(e){return h(null,e)}).catch(function(e){return h(e)});return f}function Yx(f,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(k){return k}},h);c=f;if(h.ignoreUndeclaredExcept){var e=
Ac.topLevelDeclsAndRefs(f);h.excludeRefs=Ac.arr.withoutAll(e.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=Ac.arr.withoutAll(e.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&Ac.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(Ac.additionalIgnoredRefs(f,h));h.excludeDecls=h.excludeDecls.concat(Ac.additionalIgnoredDecls(f,
h));c=Ac.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=Ac.es6ModuleTransforms(c,h));c=Ac.replaceRefs(c,h);c=Ac.replaceVarDecls(c,h);c=Ac.clearEmptyExports(c,h);c=Ac.replaceClassDecls(c,h);c=Ac.splitExportDeclarations(c,h);c=Ac.insertCapturesForExportDeclarations(c,h);c=Ac.insertCapturesForImportDeclarations(c,h);c=Ac.insertDeclarationsForExports(c,h);c=Ac.putFunctionDeclsInFront(c,h);return c=Ac.transformImportMeta(c,
h)}function zu(f,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=Ac.Path("body.0.expression").get(f);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Ac.stringify(f).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Ac.stringify(f).slice(0,
300)+"...");c=Ac.Path("arguments.1.body.body").get(c);var e=Ac.arr.last(c);if("ReturnStatement"!==e.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+Ac.stringify(f).slice(0,300)+"...");var k=e.argument.properties.find(function(n){return"setters"===n.key.name});if(!k)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+Ac.stringify(f).slice(0,300)+
"...");e=e.argument.properties.find(function(n){return"execute"===n.key.name});if(!e)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+Ac.stringify(f).slice(0,300)+"...");k.value.elements.forEach(function(n){n.params[0]=Ac.assign(n.params[0],Ac.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
Ac.arr.include(h.exclude,b.expression.left.name))return b;var d=b.expression.left;b=h.declarationWrapper?Ac.declarationWrapperCall(h.declarationWrapper,null,Ac.literal(d.name),Ac.literal("var"),b.expression,h.captureObj,h):b.expression;return Ac.exprStmt(Ac.assign(Ac.member(h.captureObj,d),b))})});(k=e.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(k=e.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));k&&(Ac.arr.remove(e.value.body.body,k),Ac.arr.pushAt(c,k,c.length-1));h.sourceAccessorName&&((k=e.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(k=e.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),k&&(Ac.arr.remove(e.value.body.body,
k),Ac.arr.pushAt(c,k,c.length-1)));return f}function Zx(f,c){var h=Ac.stringify(c.captureObj),e=0;f.body=f.body.reduce(function(k,n){var b=[n],d="",m=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(g){return[g.local.name,g.exported.name]});d="import { "+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return g===l?l:g+" as "+l}).join(",")+" } from "+n.source.raw+";\n";m="export { "+a.map(function(g){g=$jscomp.makeIterator(g);g.next();
return g.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(g){return[g.id.name,g.id.name]})):a=n.specifiers.map(function(g){return[g.exported.name,g.local.name]});m&&(b=[],d+=m);b=b.concat(Ac.parse(d+a.map(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;return h+"."+g+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(e++,b=b.concat(Ac.parse("\n       import * as __captured"+e+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+e+"__);\n      ")));return k.concat(b)},[]);return f}function fn(f){(this||eA).__wrapped__=f;(this||eA).__actions__=[];(this||eA).__dir__=1;(this||eA).__filtered__=!1;(this||eA).__iteratees__=[];(this||eA).__takeCount__=4294967295;(this||eA).__views__=[]}function $x(f,c){(this||GF).__wrapped__=f;(this||GF).__actions__=[];(this||GF).__chain__=!!c;(this||GF).__index__=0;(this||GF).__values__=void 0}function ay(f){if(nea(f)&&!oea(f)&&!(f instanceof
pea)){if(f instanceof QY)return f;if(qea.call(f,"__wrapped__"))return rea(f)}return new QY(f)}function KC(f,c,h,e,k,n,b,d,m,a){function g(){for(var F=arguments.length,G=Array(F),I=F;I--;)G[I]=arguments[I];if(y)var M=sea(g),L=tea(G,M);e&&(G=uea(G,e,k,y));n&&(G=vea(G,n,b,y));F-=L;if(y&&F<a)return I=wea(G,M),xea(f,c,KC,g.placeholder,h,G,I,d,m,a-F);I=r?h:this||rJ;M=v?I[f]:f;F=G.length;d?G=yea(G,d):A&&1<F&&G.reverse();l&&m<F&&(G.length=m);(this||rJ)&&(this||rJ)!==zea&&(this||rJ)instanceof g&&(M=E||RY(M));
return M.apply(I,G)}var l=c&128,r=c&1,v=c&2,y=c&24,A=c&512,E=v?void 0:RY(f);return g}function fA(f){return f&&f.__esModule?f:{default:f}}function LC(f){if(Array.isArray(f)){for(var c=0,h=Array(f.length);c<f.length;c++)h[c]=f[c];return h}return Array.from(f)}function qw(f){var c=null;"string"===typeof f.version&&/^7\./.test(f.version)&&(c=Object.getPrototypeOf(f),!c||Object.prototype.hasOwnProperty.call(c,"version")&&Object.prototype.hasOwnProperty.call(c,"transform")&&Object.prototype.hasOwnProperty.call(c,
"template")&&Object.prototype.hasOwnProperty.call(c,"types")||(c=null));return Object.assign({},c,f)}function Gp(f,c){c=void 0===c?"__lvVarRecorder":c;pk.ensureJSXPlugin();"function"===typeof f&&(f=String(f));if(lively.FreezerRuntime)return f.split(c+".").join("");f="string"===typeof f?pk.parseFunction(f):f;f=pk.ReplaceVisitor.run(f,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return pk.stringify(f)}function xq(f){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),
f;pk.ensureJSXPlugin();pk.ensureOptionalCatchBinding();pk.ensureImportMeta();f=babel.transform(f,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;f=f.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");f.startsWith("(function")&&f.endsWith(");")&&(f=f.slice(1,-2));return f}function Ks(f,c){f=eh.transform.transformSingleExpression(f);
f=eh.parse(f,{withComments:!0});c=eh.processInlineCodeTransformOptions(f,c);var h=eh.query.topLevelDeclsAndRefs(f),e=h.classDecls,k=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(e),$jscomp.arrayFromIterable(k)).forEach(function(m){return m["x-lively-object-meta"]=Object.assign({},n,{start:m.start,end:m.end})});h.forEach(function(m){return m.declarations.forEach(function(a){return a["x-lively-object-meta"]=
Object.assign({},n,{start:a.start,end:a.end})})});f=eh.transform.objectSpreadTransform(f);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(e=eh.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?eh.getGlobal():eh.Path(c.topLevelVarRecorderName).get(e));if(c.topLevelVarRecorder){e=(c.dontTransform||[]).concat(["arguments"]);k=c.recordGlobals?null:eh.arr.withoutAll(Object.keys(c.topLevelVarRecorder),e);h=eh.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||
"function"===typeof c.declarationCallback){var d=c.declarationWrapperName||eh.defaultDeclarationWrapperName;c.declarationWrapper=eh.member(eh.id(c.varRecorderName||"__lvVarRecorder"),eh.literal(d),!0);c.declarationCallback&&(c.topLevelVarRecorder[d]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:eh.member(h,eh.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,
evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};f=eh.capturing.rewriteToCaptureTopLevelVariables(f,h,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:k,exclude:e,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(f=eh.transform.wrapInStartEndCall(f,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));
f=eh.stringify(f);c.jsx&&(f=eh.es5Transpilation(f));c.sourceURL&&(f+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return f}function Au(f,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return f;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||eh.defaultDeclarationWrapperName;c.declarationWrapper=eh.member(eh.id(c.varRecorderName),eh.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}f=eh.parse(f);h=(c.dontTransform||
[]).concat(["arguments"]);c.recordGlobals||eh.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=eh.capturing.rewriteToRegisterModuleToCaptureSetters(f,eh.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return eh.stringify(c)}function co(f,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var e=new yh.EvalResult,k=!1,n=!1;c=yh._normalizeEvalOptions(c);var b=yh.promise.deferred(),d=c.topLevelVarRecorder||yh.getGlobal(),m=f;c.wrapInStartEndCall&&(d[yh.startEvalFunctionName]&&
console.warn(e.addWarning("startEvalFunctionName "+yh.startEvalFunctionName+" already exists in recorder!")),d[yh.endEvalFunctionName]&&console.warn(e.addWarning("endEvalFunctionName "+yh.endEvalFunctionName+" already exists in recorder!")),d[yh.startEvalFunctionName]=function(){if(k)console.warn(e.addWarning("onEvalStartCalled multiple times!"));else if(k=!0,"function"===typeof c.onStartEval)c.onStartEval()},d[yh.endEvalFunctionName]=function(l,r){n?console.warn(e.addWarning("onEvalEndCalled multiple times!")):
(n=!0,yh.finishEval(l,r,e,c,d,b,h))});try{f=yh.evalCodeTransform(f,c),c.header&&(f=c.header+f),c.footer&&(f+=c.footer),c.transpiler&&(f=c.transpiler(f,c.transpilerOptions))}catch(l){console.warn(e.addWarning("lively.vm evalCodeTransform not working: "+l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=f);var a=yh._eval.call(c.context,f,c.topLevelVarRecorder,c.originalSource||m)}catch(l){var g=l}if(c.wrapInStartEndCall){if(g&&!n)d[yh.endEvalFunctionName](g,void 0)}else yh.finishEval(g,
g||a,e,c,d,b,h);return c.sync?e:b.promise}function gA(f,c){c=Object.assign(c||{},{sync:!0});return yh.runEval(f,c)}function hA(f){if(void 0===f){if("undefined"===typeof System)return null;f=System}var c=f.get("@lively-env");c||f.set("@lively-env",f.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:f["__lively.notifications_emitter"]||(f["__lively.notifications_emitter"]=MC({},{maxListenerLimit:1E4})),notifications:f["__lively.notifications_notifications"]||
(f["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Ls(f,c,h){hA(h).emitter.on(f,c);return c}function Vl(f,c,h,e){c=void 0===c?{}:c;h=void 0===h?Date.now():h;c=Object.assign({type:f,time:h},c);h=hA(e);e=h.emitter;h=h.notifications;e.emit(f,c);e.isLogging&&(f=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(f+" "+Db(c,{maxDepth:2})));e.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function Br(f,c,h){hA(h).emitter.removeListener(f,
c);return c}function Hp(f,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);f.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var e=h,k=e.format,n=e.targetModule;n=f.decanonicalize(n||"*scratch*",e.parentModule);h.targetModule=n;k&&((e=f.getConfig().meta[n])||(e={}),e[n]||(e[n]={}),e[n].format||(e[n].format=k,f.config(e)));k=f.get("@lively-env").moduleEnv(n);e=k.recorder;var b=
k.recorderName,d=k.dontTransform,m=Ni.getEs6Transpiler(f,h,k),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||k.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:a,recordGlobals:!0,dontTransform:d,varRecorderName:b,topLevelVarRecorder:e,sourceURL:h.sourceURL||h.targetModule,context:h.context||e,wrapInStartEndCall:!0,
es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:m,declarationWrapperName:k.varDefinitionCallbackName,currentModuleAccessor:Ni.funcCall(Ni.member(Ni.funcCall(Ni.member(Ni.member("__lvVarRecorder","System"),"get"),Ni.literal("@lively-env")),"moduleEnv"),Ni.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&Ni.hasUnimportedImports(f,c,n))return Ni.ensureImportsAreImported(f,c,n).catch(function(g){return null}).then(function(g){return Hp(f,g,Object.assign({},h,{importsEnsured:!0}))});
if(!k.record()){if(!h.sync&&!h._moduleImported)return f.import(n).catch(function(g){return null}).then(function(){return Hp(f,c,Object.assign({},h,{_moduleImported:!0}))});k.ensureRecord()}if(h.es6Transpile&&h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(g){return console.error(g)}).then(function(g){return Hp(f,
c,Object.assign({},h,{transpiler:g,_transpilerLoaded:!0}))});f.debug&&console.log("[lively.module] runEval in module "+n+" started");Ni.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,targetModule:h.targetModule},Date.now(),f);f.get("@lively-env").evaluationStart(n);n=Ni.vmRunEval(c,h);return h.sync?Ni.evalEnd(f,c,h,n):Promise.resolve(n).then(function(g){return Ni.evalEnd(f,c,h,g)})}function Km(f,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),e=h.format,
k=h.System;h=h.targetModule;k||"undefined"===typeof System||(k=System);return!k&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(e)?xl.esmEval.runEval(k,f,c):xl.globalEval.runEval(f,c)}function Cr(f,c){return xl.globalEval.syncEval(f,c)}function NC(f){return Sf.withSuperclasses(f).slice(1)}function Lm(f){var c=[];do c.push(f),f=f[Sf.superclassSymbol];while(f&&f.name);return c.map(function(h){return h.name}).join("->")}
function Bu(f){for(var c=[];f;)c.push(f),f=f[Sf.superclassSymbol];return c}function Ip(f,c){do if(f===c)return!0;while(f=f[Sf.superclassSymbol]);return!1}function OC(f,c){if(f.constructor===c&&f.__proto__===c.prototype)return f;f.constructor=c;f.__proto__=c.prototype;return f}function Ms(f){return f&&"function"===typeof f}function rw(f){var c=Sf.RuntimeSourceDescriptor.for(f),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return Sf.Path("body.body").get(h).map(function(e){var k=
e.static,n=e.kind;e=e.key;var b=e.value;e=e.name||b;b=k?f:f.prototype;b="get"===n?b.__lookupGetter__(e):"set"===n?b.__lookupSetter__(e):b[e];return{static:k,name:e,value:b,kind:n,owner:f}})}function Ns(f){return Sf.runtimeNonStaticMembers(f).concat(Sf.runtimeNonStaticMembers(f))}function Os(f){var c=Sf.obj.getOwnPropertyDescriptors(f);return Sf.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var e=c[h],k="function"===typeof e.value?"method":"get"in e?"get":
"set"in e?"set":"unknown";return{static:!0,name:h,value:"method"===k?e.value:"get"===k?e.get:"set"===k?e.set:null,kind:k,owner:f}})}function sw(f){return Sf.arr.uniq(Sf.arr.flatmap(Sf.arr.without(Sf.withSuperclasses(f),Object),function(c){return Sf.runtimeStaticClassMembers(c)}))}function tw(f){var c=xj.propertiesAndSettingsInHierarchyOf(f),h=c.properties;c=c.propertySettings;f[xj.propertiesAndSettingsCacheSym]={properties:h,order:xj.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,
classHierarchy:xj.getClassHierarchy(f)};h&&"object"===typeof h?xj.prepareClassForProperties(f,c,h):console.warn("Class "+f.name+" indicates it has managed properties but its properties accessor ("+(xj.defaultPropertiesKey+") does not return a valid property descriptor map"))}function yq(f,c){c!==f.constructor&&(f.constructor=c,Eg.setPrototypeOf(f,c.prototype))}function uw(f,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=f&&f[Eg.superclassSymbol];h&&h===c||(Eg.ensureInitializeStub(c),
f[Eg.superclassSymbol]=c,Eg.setPrototypeOf(f.prototype,c.prototype),c!==Object&&Eg.setPrototypeOf(f,c));return c}function hc(f,c,h,e,k,n,b){h=void 0===h?[]:h;e=void 0===e?[]:e;k=void 0===k?{}:k;var d=f.name,m=d&&k.hasOwnProperty(d)&&k[d];k=m&&m[Eg.superclassSymbol];m&&"function"===typeof m&&k||(m=f);Eg.setSuperclass(m,c);Eg.installMethods(m,h,e);m[Eg.objMetaSymbol]=b;n&&(f=n.package(),b=m[Eg.moduleMetaSymbol],k=Date.now(),m[Eg.moduleMetaSymbol]={package:f?{name:f.name,version:f.version}:{},pathInPackage:f?
n.pathInPackage():n.id,lastChange:b&&b.lastChange&&k<=b.lastChange?b.lastChange+1:k,lastSuperclassChange:0},c&&c.referencedAs&&(m.hasOwnProperty(Eg.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(m[Eg.moduleSubscribeToToplevelChangesSym]),m[Eg.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,g){if(a===c.referencedAs){a=g&&g[Eg.moduleMetaSymbol];var l=m[Eg.moduleMetaSymbol];if(a){if(a.lastChange===l.lastSuperclassChange)return;
l.lastSuperclassChange=a.lastChange}Eg.setSuperclass(m,g);Eg.installMethods(m,h,e);Eg.prepareClassForManagedPropertiesAfterCreation(m)}})));m.toString=function(){var a=String(this.prototype[Eg.initializeSymbol]).match(Eg.constructorArgMatcher),g=this[Eg.superclassSymbol];return"class "+this.name+" "+(g?"extends "+g.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};Eg.prepareClassForManagedPropertiesAfterCreation(m);return m}function yl(f,c,h,e,k){"function"!==typeof h||"undefined"!==
typeof e&&"object"!==typeof e||(k=e,e="call",k||(k={}),k.updater||(k.updater=function(m,a){return m(null,a)}));var n=f.getConnectionPoints&&f.getConnectionPoints()||f.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||Eh.AttributeConnection;"function"===typeof k&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),k={converter:k});n&&(k=Eh.obj.merge(n,
k));b=new b(f,c,h,e,k);var d=b.getExistingConnection();if(d)return d.resetSpec(),d.init(f,c,h,e,k),d;k=b.connect();if("function"===typeof f.onConnect)f.onConnect(c,h,e);n&&n.updateOnConnect&&b.update(f[c]);return k}function $o(f,c,h,e){"function"!==typeof h||"undefined"!==typeof e&&"object"!==typeof e||(e="call");if(f.attributeConnections){for(var k=$jscomp.makeIterator(f.attributeConnections.slice()),n=k.next();!n.done;n=k.next())n=n.value,n.getSourceAttrName()==c&&n.getTargetObj()===h&&n.getTargetMethodName()==
e&&n.disconnect();if("function"==typeof f.onDisconnect)f.onDisconnect(c,h,e)}}function Dr(f){for(var c;f.attributeConnections&&(c=f.attributeConnections[0]);)c.disconnect()}function Cu(f,c,h,e,k){"function"!==typeof h||"undefined"!==typeof e&&"object"!==typeof e?k=k||{}:(k=e,e="call",k=k||{},k.updater||(k.updater=function(n,b){return n(null,b)}));k=k||{};k.removeAfterUpdate=!0;return Eh.connect(f,c,h,e,k)}function xf(f,c,h){var e=f.attributeConnections;if(e){f=f[c];for(var k=0,n=e.length;k<n;k++){var b=
e[k];b.getSourceAttrName()==c&&b.update(h,f)}}}function PC(f,c,h,e){if(null!=f[c])h[e](f[c]);else Eh.connect(f,c,h,e,{removeAfterUpdate:!0})}function QC(f,c,h,e){for(var k={key:c.pop(),whenDefined:function(n){Eh.callWhenNotNull(n,this.key,h,e)}};0<c.length;)k={key:c.pop(),next:k,whenDefined:function(n){Eh.callWhenNotNull(n,this.key,this.next,"whenDefined")}};k.whenDefined(f)}function vw(f,c){var h=!1;c||"function"!==typeof f||(c=f,h=!0);if(h){f=Eh.AttributeConnection.prototype;f.isActive||(f.isActive=
0);f.isActive++;try{var e=c()}finally{f.isActive--,0>=f.isActive&&delete f.isActive}}else{h=f.sourceObj;var k=f.sourceAttribute,n=f.targetObj,b=f.targetAttribute;f=n&&b?function(d){return d.getSourceAttrName()===k&&n===d.getTargetObj()&&b===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===k};(f=h.attributeConnections&&h.attributeConnections.filter(f))&&Eh.arr.invoke(f,"activate");try{e=c()}finally{f&&Eh.arr.invoke(f,"deactivate")}}return e}function ww(f){if(null==f)return!0;f=typeof f;
return"boolean"===f||"number"===f||"string"===f?!0:!1}function Jp(f){return f.constructor.className||f.constructor.name}function Er(f){if(f&&f.constructor){var c=qk.getClassName(f);if(c){if(f=f.constructor[qk.moduleMetaInClassProp],"Object"!==c||f)return f&&(delete f.lastChange,delete f.lastSuperclassChange),{className:c,module:f}}else console.warn("Cannot serialize class info of anonymous class of instance "+f)}}function Kp(f){var c=f.module;if(c){var h=c.pathInPackage;if(c.package&&c.package.name&&
"no group"!==c.package.name){var e=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=qk.string.joinPath(e,h)}e=System.get("@lively-env");if(c=e.moduleEnv(h)||e.moduleEnv(c.pathInPackage))return c.recorder[f.className];console.warn("Trying to deserialize instance of class "+f.className+" but the module "+h+" is not yet loaded")}return System.global[f.className]}function Bk(f,c,h){c=void 0===c?function(a){return a}:c;h=void 0===h?{}:h;var e=new pj.ExpressionSerializer,k=h,n=h.isMorph?h.propertiesAndPropertySettings().order:
[];n=n.length?n:pj.obj.keys(f);for(var b=$jscomp.makeIterator(n),d=b.next();!d.done;d=b.next()){d=d.value;var m=f[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;pj.obj.isString(m)&&e.isSerializedExpression(m)&&(m=e.deserializeExpr(m));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(m=Bk(m,c));m&&m._id&&(m=c(Bk(m,c)));k[d]=m}f.submorphs&&(k.submorphs=f.submorphs.map(function(a){return Bk(a,c)}));if(h)for(e=$jscomp.makeIterator(n.filter(function(a){return!!f[a]})),
d=e.next();!d.done;d=e.next())n=d.value,h[n]=k[n];if(f.__refs__)for(h=$jscomp.makeIterator(f.__refs__),e=h.next();!e.done;e=h.next())n=$jscomp.makeIterator(e.value),e=n.next().value,n=n.next().value,pj.Path(e).set(k,pj.Path(n).get(k));if(f.__connections__)for(h=$jscomp.makeIterator(f.__connections__),e=h.next();!e.done;e=h.next())e=e.value,pj.connect(pj.Path(e.pathToSource).get(k),e.sourceAttrName,pj.Path(e.pathToTarget).get(k),e.targetMethodName,Object.assign({},pj.obj.select(e,["garbageCollect",
"converterString","updaterString","varMapping"])));return k}function rk(f,c){var h=c=void 0===c?{}:c,e=void 0===h.keepFunctions?!0:h.keepFunctions,k=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,b=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var d=void 0===h.path?"":h.path,m=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,a=void 0===h.nestedExpressions?{}:h.nestedExpressions,g=void 0===h.objToPath?new WeakMap:
h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var r={skipAttributes:k,skipUnchangedFromDefault:m,root:!1,keepFunctions:e,asExpression:b,nestedExpressions:a,connections:h,objRefs:l,objToPath:g,keepConnections:n};if(g.has(f))return l.push([d,g.get(f)]),null;g.set(f,d);b&&(e=!1);var v=new pj.ExpressionSerializer,y=function(Ea,K){try{if(K=K.__serialize__(),b){var Z=pj.string.newUUID();a[Z]=K;K=Z}else K=K.__expr__?v.exprStringEncode(K):K}catch(U){console.log("[export to JSON] failed converting "+
Ea+" to serialized expression")}return K},A={};g.set(f,d);n&&f.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(f.attributeConnections));f.isText&&(A.textAndAttributes=f.textAndAttributes.map(function(Ea,K){return Ea&&Ea.isMorph?rk(Ea,Object.assign({},r,{path:d?d+".textAndAttributes."+K:"textAndAttributes."+K})):Ea}));f.submorphs&&0<f.submorphs.length&&(A.submorphs=f.submorphs.map(function(Ea,K){return rk(Ea,Object.assign({},r,{path:d?d+".submorphs."+K:"submorphs."+K}))}).filter(Boolean));
var E={};for(R in f.spec(m)){E.$jscomp$loop$prop$name$2226=R;m=f[E.$jscomp$loop$prop$name$2226];!m||"object"!==typeof m||Array.isArray(m)||m.isMorph||g.set(m,d?d+"."+E.$jscomp$loop$prop$name$2226:E.$jscomp$loop$prop$name$2226);if("submorphs"!==E.$jscomp$loop$prop$name$2226&&!k.includes(E.$jscomp$loop$prop$name$2226))if("metadata"===E.$jscomp$loop$prop$name$2226&&pj.Path("commit.__serialize__").get(m))A[E.$jscomp$loop$prop$name$2226]=Object.assign({},m,{commit:y(E.$jscomp$loop$prop$name$2226+".commit",
m.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(E.$jscomp$loop$prop$name$2226)){for(var F={},G=$jscomp.makeIterator(["top","left","right","bottom"]),I=G.next();!I.done;I=G.next()){I=I.value;var M=m[I];if(M&&M.__serialize__&&(M=M.__serialize__())&&M.__expr__)if(b){var L=pj.string.newUUID();a[L]=M;M=L}else M=v.exprStringEncode(M);F[I]=M}A[E.$jscomp$loop$prop$name$2226]=F}else if(m&&m.isMorph)A[E.$jscomp$loop$prop$name$2226]=rk(m,Object.assign({},r,{path:d?d+"."+
E.$jscomp$loop$prop$name$2226:E.$jscomp$loop$prop$name$2226}));else if(m&&m.__serialize__)A[E.$jscomp$loop$prop$name$2226]=y(E.$jscomp$loop$prop$name$2226,m);else if(Array.isArray(m))A[E.$jscomp$loop$prop$name$2226]=m.map(function(Ea){return function(K,Z){return K&&K.isMorph?rk(K,Object.assign({},r,{path:d?d+"."+Ea.$jscomp$loop$prop$name$2226+"."+Z:Ea.$jscomp$loop$prop$name$2226+"."+Z})):K&&K.__serialize__?y(Ea.$jscomp$loop$prop$name$2226+"."+Z,K):K}}(E));else{if(m&&!pj.obj.isString(m)&&!pj.obj.isNumber(m)&&
0<pj.properties.allOwnPropertiesOrFunctions(m).length)for(var S in m)m[S]&&m[S].isMorph&&(m[S]=rk(m[S],Object.assign({},r,{path:d?d+"."+E.$jscomp$loop$prop$name$2226+"."+S:E.$jscomp$loop$prop$name$2226+"."+S})));A[E.$jscomp$loop$prop$name$2226]=m}E={$jscomp$loop$prop$name$2226:E.$jscomp$loop$prop$name$2226}}f.isText&&delete A.textString;b||(A._id=f._id);e?(A.type=f.constructor,Object.keys(f).forEach(function(Ea){return"function"===typeof f[Ea]&&(A[Ea]=f[Ea])})):(A.styleSheets&&(A.styleSheets=[]),
A.type=pj.getSerializableClassMeta(f));if(n&&c){var R=[];S=$jscomp.makeIterator(h);for(e=S.next();!e.done;e=S.next())G=e=e.value,k=G.sourceAttrName,n=G.targetMethodName,F=G.targetObj,h=G.updaterString,E=G.converterString,m=G.garbageCollect,G=g.get(G.sourceObj),F=g.get(F),"string"===typeof G&&"string"===typeof F?R.push({pathToSource:G,pathToTarget:F,garbageCollect:m,updaterString:h,converterString:E,sourceAttrName:k,targetMethodName:n,varMapping:{properties:Uo}}):console.log("skipping:",e);b||(A.__connections__=
R)}if(b&&c){c="morph("+pj.obj.inspect(A)+")";var aa={"lively.morphic":["morph"]},ra;for(ra in a)c=c.replace('"'+ra+'"',a[ra].__expr__),Object.entries(a[ra].bindings||{}).forEach(function(Ea){var K=$jscomp.makeIterator(Ea);Ea=K.next().value;K=K.next().value;aa[Ea]=aa[Ea]?pj.arr.uniq([].concat($jscomp.arrayFromIterable(aa[Ea]),$jscomp.arrayFromIterable(K))):K});return{__expr__:c,bindings:aa}}c&&(A.__refs__=l);return A}function im(f){var c={},h;for(h in f)c[h]=ig.referencesOfId(f,h);return c}function RC(f){return f&&
f.__ref__}function SC(f,c){var h={};return ig.referencesOfId((h[f.id]=f.currentSnapshot,h),f.id,c)}function Vg(f,c,h){f=f[c];c=[];for(var e in f.props){var k=f.props[e]||{},n=k.value;k=k.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(ig.referencesInArray(n,h&&e))):!k&&n&&ig.isReference(n)&&c.push(h?{key:e,id:n.id}:n.id)}if(f.hasOwnProperty("entries"))for(e=0;e<f.entries.length;e++)n=f.entries[e],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(ig.referencesInArray(n,h&&
n))):n&&ig.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function TC(f,c){for(var h=[],e=0;e<f.length;e++){var k=f[e];Array.isArray(k)?h.push.apply(h,$jscomp.arrayFromIterable(TC(k,c?c+"["+e+"]":void 0))):k&&ig.isReference(k)&&h.push(c?{key:c+"["+e+"]",id:k.id}:k.id)}return h}function Ps(f,c){return(f[c][ig.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function iA(f,c){return ig.referencesOfId(f,c).map(function(h){return h+":"+ig.classNameOfId(f,h)})}function Lp(f,c){return(f[c][ig.ClassHelper.classMetaForSerializationProp]||
{}).className||"Object"}function Mp(f,c,h,e){function k(y,A,E){if(!g)if(50<E)alert(""+m);else if(y===A)m.push(y),g=m.slice();else if(!a[y]){a[y]=!0;m.push(y);y=ig.referencesOfId(f,y);for(var F=0;F<y.length;F++)k(y[F],A,E+1);m.pop()}}e=void 0===e?{}:e;var n=void 0===e.showPath?!0:e.showPath,b=e.hasOwnProperty("showClassNames")?e.showClassNames:!n,d=e.hasOwnProperty("showPropNames")?e.showPropNames:n;e=e.hasOwnProperty("hideId")?e.hideId:n;var m=[],a={},g;k(c,h,0);if(!g)return null;if(!b&&!d)return g;
c=[];for(h=0;h<g.length-1;h++){var l=g[h],r=g[h+1],v=[];e||v.push(l);b&&v.push((f[l][ig.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(l=ig.referencesOfId(f,l,!0).find(function(y){return y.id===r})||{key:"????"},v.push(l.key));c.push(v.join(":"))}n&&(c="."+c.join("."));return c}function ap(f,c,h){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=ig.Path(h).parts();var e=f[c];for(c=0;;){if(1E3<c++)throw"stop";var k=h.shift();if(!k)break;if(!e.props||!e.props[k])throw Error("Property "+
k+" not found for ref "+JSON.stringify(e));e=e.props[k].value;if(!e)throw Error("Property "+k+" has no value");for(;Array.isArray(e);)e=e[h.shift()];if(!e||!e.__ref__)return e;e=f[e.id]}return e}function HF(f,c,h,e){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=ig.Path(h).parts();f=f[c];c=h.shift();if(!f.props||!f.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(f));var k=(f.props[c]||{}).value;if(!k)throw Error("Property "+c+" has no value");if(h.length){var n=
ig.Path(h).get(k);ig.Path(h).set(k,e(f,c,n))}else f.props[c].value=e(f,c,k)}function Qs(f,c){var h=ig.arr.withoutAll(Object.keys(c),f),e=h.filter(function(n){if("AttributeConnection"===ig.classNameOfId(c,n))return c[n].props.garbageCollect.value}),k=ig.referenceGraph(ig.obj.dissoc(Object.assign({},c),e));f.forEach(function(n){n=ig.graph.subgraphReachableBy(k,n);for(var b=h.length;b--;)h[b]in n&&h.splice(b,1)});h.forEach(function(n){return delete c[n]});return h}function jA(f){var c={},h;for(h in f){c.$jscomp$loop$prop$id$748$2228=
h;if("AttributeConnection"===ig.classNameOfId(f,c.$jscomp$loop$prop$id$748$2228)){var e=f[c.$jscomp$loop$prop$id$748$2228];if(!f[ig.Path("props.targetObj.value.id").get(e)]){if(e=f[ig.Path("props.sourceObj.value.id").get(e)])e.props.attributeConnections.value=e.props.attributeConnections.value.filter(function(k){return function(n){return n.id!=k.$jscomp$loop$prop$id$748$2228}}(c));delete f[c.$jscomp$loop$prop$id$748$2228]}}c={$jscomp$loop$prop$id$748$2228:c.$jscomp$loop$prop$id$748$2228}}}function Rs(f,
c){c=void 0===c?ig.defaultExprSerializer:c;f.snapshot&&(f=f.snapshot);for(var h=[],e=0,k=Object.keys(f);e<k.length;e++){var n=f[k[e]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var b=ig.ClassHelper.sourceModulesInObjRef(n);b&&b.length&&h.push.apply(h,$jscomp.arrayFromIterable(b.map(function(m){return(m.package&&m.package.name||"")+"/"+m.pathInPackage})));if(n.props)for(var d in n.props)b=n.props[d].value,"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&
h.push.apply(h,$jscomp.arrayFromIterable(b))}}return h=ig.arr.uniq(h)}function UC(){if(SY)return TY;SY=!0;return TY={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function IF(){throw Error("setTimeout has not been defined");}function JF(){throw Error("clearTimeout has not been defined");}function sJ(f){if(by===setTimeout)return setTimeout(f,0);if((by===IF||!by)&&setTimeout)return by=setTimeout,setTimeout(f,0);try{return by(f,
0)}catch(c){try{return by.call(null,f,0)}catch(h){return by.call(this||VC,f,0)}}}function tJ(){WC&&kA&&(WC=!1,kA.length?xw=kA.concat(xw):uJ=-1,xw.length&&vJ())}function vJ(){if(!WC){var f=sJ(tJ);WC=!0;for(var c=xw.length;c;){kA=xw;for(xw=[];++uJ<c;)kA&&kA[uJ].run();uJ=-1;c=xw.length}kA=null;WC=!1;(function(h){if(cy===clearTimeout)return clearTimeout(h);if((cy===JF||!cy)&&clearTimeout)return cy=clearTimeout,clearTimeout(h);try{cy(h)}catch(e){try{return cy.call(null,h)}catch(k){return cy.call(this||
VC,h)}}})(f)}}function yi(f,c){(this||VC).fun=f;(this||VC).array=c}function Fr(){}function lA(){if(UY)return VY;UY=!0;var f=WY;return VY="object"===typeof f&&f.env&&f.env.NODE_DEBUG&&/\bsemver\b/i.test(f.env.NODE_DEBUG)?function(c){for(var h=[],e=0;e<arguments.length;++e)h[e-0]=arguments[e];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function Np(){if(XY)return Du;XY=!0;var f=UC().MAX_SAFE_COMPONENT_LENGTH,c=lA();Du=Du={};var h=Du.re=[],e=Du.src=
[],k=Du.t={},n=0,b=function(d,m,a){var g=n++;c(g,m);k[d]=g;e[g]=m;h[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+e[k.NUMERICIDENTIFIER]+")\\.("+(e[k.NUMERICIDENTIFIER]+")\\.(")+(e[k.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+e[k.NUMERICIDENTIFIERLOOSE]+")\\.("+(e[k.NUMERICIDENTIFIERLOOSE]+")\\.(")+(e[k.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER",
"(?:"+e[k.NUMERICIDENTIFIER]+"|"+e[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+e[k.NUMERICIDENTIFIERLOOSE]+"|"+e[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+e[k.PRERELEASEIDENTIFIER]+"(?:\\."+e[k.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+e[k.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+e[k.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+e[k.BUILDIDENTIFIER]+"(?:\\."+e[k.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+e[k.MAINVERSION]+
e[k.PRERELEASE]+"?"+e[k.BUILD]+"?");b("FULL","^"+e[k.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+e[k.MAINVERSIONLOOSE]+e[k.PRERELEASELOOSE]+"?"+e[k.BUILD]+"?");b("LOOSE","^"+e[k.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",e[k.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",e[k.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+e[k.XRANGEIDENTIFIER]+")(?:\\.("+(e[k.XRANGEIDENTIFIER]+")(?:\\.(")+(e[k.XRANGEIDENTIFIER]+")(?:")+(e[k.PRERELEASE]+")?"+e[k.BUILD]+"?)?)?"));
b("XRANGEPLAINLOOSE","[v=\\s]*("+e[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(e[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(e[k.XRANGEIDENTIFIERLOOSE]+")(?:")+(e[k.PRERELEASELOOSE]+")?"+e[k.BUILD]+"?)?)?"));b("XRANGE","^"+e[k.GTLT]+"\\s*"+e[k.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+e[k.GTLT]+"\\s*"+e[k.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+f+"})(?:\\.(\\d{1,"+(f+"}))?(?:\\.(\\d{1,")+(f+"}))?(?:$|[^\\d])"));b("COERCERTL",e[k.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+e[k.LONETILDE]+
"\\s+",!0);Du.tildeTrimReplace="$1~";b("TILDE","^"+e[k.LONETILDE]+e[k.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+e[k.LONETILDE]+e[k.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+e[k.LONECARET]+"\\s+",!0);Du.caretTrimReplace="$1^";b("CARET","^"+e[k.LONECARET]+e[k.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+e[k.LONECARET]+e[k.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+e[k.GTLT]+"\\s*("+e[k.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+e[k.GTLT]+"\\s*("+e[k.FULLPLAIN]+")$|^$");b("COMPARATORTRIM",
"(\\s*)"+e[k.GTLT]+"\\s*("+e[k.LOOSEPLAIN]+"|"+e[k.XRANGEPLAIN]+")",!0);Du.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+e[k.XRANGEPLAIN]+")\\s+-\\s+("+(e[k.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+e[k.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(e[k.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Du}function XC(){if(YY)return ZY;YY=!0;var f=/^[0-9]+$/,c=function(h,e){var k=f.test(h),n=f.test(e);k&&
n&&(h=+h,e=+e);return h===e?0:k&&!n?-1:n&&!k?1:h<e?-1:1};return ZY={compareIdentifiers:c,rcompareIdentifiers:function(h,e){return c(e,h)}}}function tm(){if($Y)return aZ;$Y=!0;var f=lA(),c=UC(),h=c.MAX_LENGTH,e=c.MAX_SAFE_INTEGER;c=Np();var k=c.re,n=c.t,b=XC().compareIdentifiers,d=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof d){if(m.loose===!!a.loose&&m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+
m);if(m.length>h)throw new TypeError("version is longer than "+h+" characters");f("SemVer",m,a);(this||eg).options=a;(this||eg).loose=!!a.loose;(this||eg).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?k[n.LOOSE]:k[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||eg).raw=m;(this||eg).major=+a[1];(this||eg).minor=+a[2];(this||eg).patch=+a[3];if((this||eg).major>e||0>(this||eg).major)throw new TypeError("Invalid major version");if((this||eg).minor>e||0>(this||eg).minor)throw new TypeError("Invalid minor version");
if((this||eg).patch>e||0>(this||eg).patch)throw new TypeError("Invalid patch version");(this||eg).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<e)return l}return g}):[];(this||eg).build=a[5]?a[5].split("."):[];this.format()};d.prototype.format=function(){(this||eg).version=(this||eg).major+"."+(this||eg).minor+"."+(this||eg).patch;(this||eg).prerelease.length&&((this||eg).version+="-"+(this||eg).prerelease.join("."));return(this||eg).version};d.prototype.toString=
function(){return(this||eg).version};d.prototype.compare=function(m){f("SemVer.compare",(this||eg).version,(this||eg).options,m);if(!(m instanceof d)){if("string"===typeof m&&m===(this||eg).version)return 0;m=new d(m,(this||eg).options)}return m.version===(this||eg).version?0:this.compareMain(m)||this.comparePre(m)};d.prototype.compareMain=function(m){m instanceof d||(m=new d(m,(this||eg).options));return b((this||eg).major,m.major)||b((this||eg).minor,m.minor)||b((this||eg).patch,m.patch)};d.prototype.comparePre=
function(m){m instanceof d||(m=new d(m,(this||eg).options));if((this||eg).prerelease.length&&!m.prerelease.length)return-1;if(!(this||eg).prerelease.length&&m.prerelease.length)return 1;if(!(this||eg).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||eg).prerelease[a],l=m.prerelease[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};d.prototype.compareBuild=function(m){m instanceof
d||(m=new d(m,(this||eg).options));var a=0;do{var g=(this||eg).build[a],l=m.build[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};d.prototype.inc=function(m,a){switch(m){case "premajor":(this||eg).prerelease.length=0;(this||eg).patch=0;(this||eg).minor=0;(this||eg).major++;this.inc("pre",a);break;case "preminor":(this||eg).prerelease.length=0;(this||eg).patch=0;(this||eg).minor++;this.inc("pre",a);
break;case "prepatch":(this||eg).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||eg).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||eg).minor&&0===(this||eg).patch&&0!==(this||eg).prerelease.length||(this||eg).major++;(this||eg).minor=0;(this||eg).patch=0;(this||eg).prerelease=[];break;case "minor":0===(this||eg).patch&&0!==(this||eg).prerelease.length||(this||eg).minor++;(this||eg).patch=0;(this||eg).prerelease=
[];break;case "patch":0===(this||eg).prerelease.length&&(this||eg).patch++;(this||eg).prerelease=[];break;case "pre":if(0===(this||eg).prerelease.length)(this||eg).prerelease=[0];else{for(m=(this||eg).prerelease.length;0<=--m;)"number"===typeof(this||eg).prerelease[m]&&((this||eg).prerelease[m]++,m=-2);-1===m&&(this||eg).prerelease.push(0)}a&&((this||eg).prerelease[0]===a?isNaN((this||eg).prerelease[1])&&((this||eg).prerelease=[a,0]):(this||eg).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+
m);}this.format();(this||eg).raw=(this||eg).version;return this||eg};return aZ=d}function yo(){if(bZ)return cZ;bZ=!0;var f=UC().MAX_LENGTH,c=Np(),h=c.re,e=c.t,k=tm();return cZ=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof k)return n;if("string"!==typeof n||n.length>f||!(b.loose?h[e.LOOSE]:h[e.FULL]).test(n))return null;try{return new k(n,b)}catch(d){return null}}}function KF(){if(dZ)return eZ;dZ=!0;var f=yo();return eZ=function(c,h){return(c=f(c,h))?c.version:
null}}function tQ(){if(fZ)return gZ;fZ=!0;var f=yo();return gZ=function(c,h){return(c=f(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function uQ(){if(hZ)return iZ;hZ=!0;var f=tm();return iZ=function(c,h,e,k){"string"===typeof e&&(k=e,e=void 0);try{return(new f(c,e)).inc(h,k).version}catch(n){return null}}}function bp(){if(jZ)return kZ;jZ=!0;var f=tm();return kZ=function(c,h,e){return(new f(c,e)).compare(new f(h,e))}}function YC(){if(lZ)return mZ;lZ=!0;var f=bp();return mZ=function(c,h,e){return 0===
f(c,h,e)}}function vQ(){if(nZ)return oZ;nZ=!0;var f=yo(),c=YC();return oZ=function(h,e){if(c(h,e))return null;h=f(h);e=f(e);var k=h.prerelease.length||e.prerelease.length,n=k?"pre":"",b;for(b in h)if(("major"===b||"minor"===b||"patch"===b)&&h[b]!==e[b])return n+b;return k?"prerelease":""}}function wQ(){if(pZ)return qZ;pZ=!0;var f=tm();return qZ=function(c,h){return(new f(c,h)).major}}function wJ(){if(rZ)return sZ;rZ=!0;var f=tm();return sZ=function(c,h){return(new f(c,h)).minor}}function xQ(){if(tZ)return uZ;
tZ=!0;var f=tm();return uZ=function(c,h){return(new f(c,h)).patch}}function Qj(){if(vZ)return wZ;vZ=!0;var f=yo();return wZ=function(c,h){return(c=f(c,h))&&c.prerelease.length?c.prerelease:null}}function Op(){if(xZ)return yZ;xZ=!0;var f=bp();return yZ=function(c,h,e){return f(h,c,e)}}function cp(){if(zZ)return AZ;zZ=!0;var f=bp();return AZ=function(c,h){return f(c,h,!0)}}function dy(){if(BZ)return CZ;BZ=!0;var f=tm();return CZ=function(c,h,e){c=new f(c,e);h=new f(h,e);return c.compare(h)||c.compareBuild(h)}}
function cc(){if(DZ)return EZ;DZ=!0;var f=dy();return EZ=function(c,h){return c.sort(function(e,k){return f(e,k,h)})}}function dp(){if(FZ)return GZ;FZ=!0;var f=dy();return GZ=function(c,h){return c.sort(function(e,k){return f(k,e,h)})}}function Ss(){if(HZ)return IZ;HZ=!0;var f=bp();return IZ=function(c,h,e){return 0<f(c,h,e)}}function mA(){if(JZ)return KZ;JZ=!0;var f=bp();return KZ=function(c,h,e){return 0>f(c,h,e)}}function ep(){if(LZ)return MZ;LZ=!0;var f=bp();return MZ=function(c,h,e){return 0!==
f(c,h,e)}}function ZC(){if(NZ)return OZ;NZ=!0;var f=bp();return OZ=function(c,h,e){return 0<=f(c,h,e)}}function ey(){if(PZ)return QZ;PZ=!0;var f=bp();return QZ=function(c,h,e){return 0>=f(c,h,e)}}function xJ(){if(RZ)return SZ;RZ=!0;var f=YC(),c=ep(),h=Ss(),e=ZC(),k=mA(),n=ey();return SZ=function(b,d,m,a){switch(d){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;
case "":case "=":case "==":return f(b,m,a);case "!=":return c(b,m,a);case ">":return h(b,m,a);case ">=":return e(b,m,a);case "<":return k(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+d);}}}function yJ(){if(TZ)return UZ;TZ=!0;var f=tm(),c=yo(),h=Np(),e=h.re,k=h.t;return UZ=function(n,b){if(n instanceof f)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var d=null;if(b.rtl){for(var m;(m=e[k.COERCERTL].exec(n))&&(!d||d.index+
d[0].length!==n.length);)d&&m.index+m[0].length===d.index+d[0].length||(d=m),e[k.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;e[k.COERCERTL].lastIndex=-1}else d=n.match(e[k.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),b)}}function Bn(){if(VZ)return yQ;VZ=!0;var f=function(I,M){var L=this;M&&"object"===typeof M||(M={loose:!!M,includePrerelease:!1});if(I instanceof f)return I.loose===!!M.loose&&I.includePrerelease===!!M.includePrerelease?I:new f(I.raw,M);if(I instanceof
c)return(this||Hl).raw=I.value,(this||Hl).set=[[I]],this.format(),this||Hl;(this||Hl).options=M;(this||Hl).loose=!!M.loose;(this||Hl).includePrerelease=!!M.includePrerelease;(this||Hl).raw=I;(this||Hl).set=I.split(/\s*\|\|\s*/).map(function(S){return L.parseRange(S.trim())}).filter(function(S){return S.length});if(!(this||Hl).set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()};f.prototype.format=function(){(this||Hl).range=(this||Hl).set.map(function(I){return I.join(" ").trim()}).join("||").trim();
return(this||Hl).range};f.prototype.toString=function(){return(this||Hl).range};f.prototype.parseRange=function(I){var M=this,L=(this||Hl).options.loose;I=I.trim();I=I.replace(L?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],G((this||Hl).options.includePrerelease));h("hyphen replace",I);I=I.replace(n[b.COMPARATORTRIM],d);h("comparator trim",I,n[b.COMPARATORTRIM]);I=I.replace(n[b.TILDETRIM],m);I=I.replace(n[b.CARETTRIM],a);I=I.split(/\s+/).join(" ");var S=L?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return I.split(" ").map(function(R){var aa=
R;R=(M||Hl).options;h("comp",aa,R);aa=y(aa,R);h("caret",aa);aa=r(aa,R);h("tildes",aa);aa=E(aa,R);h("xrange",aa);h("replaceStars",aa,R);aa=aa.trim().replace(n[b.STAR],"");h("stars",aa);return aa}).join(" ").split(/\s+/).map(function(R){var aa=(M||Hl).options;h("replaceGTE0",R,aa);return R.trim().replace(n[aa.includePrerelease?b.GTE0PRE:b.GTE0],"")}).filter((this||Hl).options.loose?function(R){return!!R.match(S)}:function(){return!0}).map(function(R){return new c(R,(M||Hl).options)})};f.prototype.intersects=
function(I,M){if(!(I instanceof f))throw new TypeError("a Range is required");return(this||Hl).set.some(function(L){return g(L,M)&&I.set.some(function(S){return g(S,M)&&L.every(function(R){return S.every(function(aa){return R.intersects(aa,M)})})})})};f.prototype.test=function(I){if(!I)return!1;if("string"===typeof I)try{I=new e(I,(this||Hl).options)}catch(ra){return!1}for(var M=0;M<(this||Hl).set.length;M++){a:{var L=(this||Hl).set[M];for(var S=I,R=(this||Hl).options,aa=0;aa<L.length;aa++)if(!L[aa].test(S)){L=
!1;break a}if(S.prerelease.length&&!R.includePrerelease){for(R=0;R<L.length;R++)if(h(L[R].semver),L[R].semver!==c.ANY&&0<L[R].semver.prerelease.length&&(aa=L[R].semver,aa.major===S.major&&aa.minor===S.minor&&aa.patch===S.patch)){L=!0;break a}L=!1}else L=!0}if(L)return!0}return!1};yQ=f;var c=Eu(),h=lA(),e=tm(),k=Np(),n=k.re,b=k.t,d=k.comparatorTrimReplace,m=k.tildeTrimReplace,a=k.caretTrimReplace,g=function(I,M){var L=!0;I=I.slice();for(var S=I.pop();L&&I.length;)L=I.every(function(R){return S.intersects(R,
M)}),S=I.pop();return L},l=function(I){return!I||"x"===I.toLowerCase()||"*"===I},r=function(I,M){return I.trim().split(/\s+/).map(function(L){return v(L,M)}).join(" ")},v=function(I,M){return I.replace(M.loose?n[b.TILDELOOSE]:n[b.TILDE],function(L,S,R,aa,ra){h("tilde",I,L,S,R,aa,ra);l(S)?L="":l(R)?L=">="+S+".0.0 <"+(+S+1)+".0.0-0":l(aa)?L=">="+S+"."+R+".0 <"+S+"."+(+R+1)+".0-0":ra?(h("replaceTilde pr",ra),L=">="+S+"."+R+"."+aa+"-"+ra+" <"+S+"."+(+R+1)+".0-0"):L=">="+S+"."+R+"."+aa+" <"+S+"."+(+R+
1)+".0-0";h("tilde return",L);return L})},y=function(I,M){return I.trim().split(/\s+/).map(function(L){return A(L,M)}).join(" ")},A=function(I,M){h("caret",I,M);var L=M.includePrerelease?"-0":"";return I.replace(M.loose?n[b.CARETLOOSE]:n[b.CARET],function(S,R,aa,ra,Ea){h("caret",I,S,R,aa,ra,Ea);l(R)?S="":l(aa)?S=">="+R+".0.0"+L+" <"+(+R+1)+".0.0-0":l(ra)?S="0"===R?">="+R+"."+aa+".0"+L+" <"+R+"."+(+aa+1)+".0-0":">="+R+"."+aa+".0"+L+" <"+(+R+1)+".0.0-0":Ea?(h("replaceCaret pr",Ea),S="0"===R?"0"===aa?
">="+R+"."+aa+"."+ra+"-"+Ea+" <"+R+"."+aa+"."+(+ra+1)+"-0":">="+R+"."+aa+"."+ra+"-"+Ea+" <"+R+"."+(+aa+1)+".0-0":">="+R+"."+aa+"."+ra+"-"+Ea+" <"+(+R+1)+".0.0-0"):(h("no pr"),S="0"===R?"0"===aa?">="+R+"."+aa+"."+ra+L+" <"+R+"."+aa+"."+(+ra+1)+"-0":">="+R+"."+aa+"."+ra+L+" <"+R+"."+(+aa+1)+".0-0":">="+R+"."+aa+"."+ra+" <"+(+R+1)+".0.0-0");h("caret return",S);return S})},E=function(I,M){h("replaceXRanges",I,M);return I.split(/\s+/).map(function(L){return F(L,M)}).join(" ")},F=function(I,M){I=I.trim();
return I.replace(M.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(L,S,R,aa,ra,Ea){h("xRange",I,L,S,R,aa,ra,Ea);var K=l(R),Z=K||l(aa);ra=Z||l(ra);"="===S&&ra&&(S="");Ea=M.includePrerelease?"-0":"";K?L=">"===S||"<"===S?"<0.0.0-0":"*":S&&ra?(Z&&(aa=0),ra=0,">"===S?(S=">=",Z?(R=+R+1,aa=0):aa=+aa+1,ra=0):"<="===S&&(S="<",Z?R=+R+1:aa=+aa+1),"<"===S&&(Ea="-0"),L=S+R+"."+aa+"."+ra+Ea):Z?L=">="+R+".0.0"+Ea+" <"+(+R+1)+".0.0-0":ra&&(L=">="+R+"."+aa+".0"+Ea+" <"+R+"."+(+aa+1)+".0-0");h("xRange return",L);return L})},
G=function(I){return function(M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la){L=l(S)?"":l(R)?">="+S+".0.0"+(I?"-0":""):l(aa)?">="+S+"."+R+".0"+(I?"-0":""):ra?">="+L:">="+L+(I?"-0":"");K=l(Z)?"":l(U)?"<"+(+Z+1)+".0.0-0":l(V)?"<"+Z+"."+(+U+1)+".0-0":na?"<="+Z+"."+U+"."+V+"-"+na:I?"<"+Z+"."+U+"."+(+V+1)+"-0":"<="+K;return(L+" "+K).trim()}};return yQ}function Eu(){if(WZ)return zQ;WZ=!0;var f=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===
!!g.loose)return a;a=a.value}b("comparator",a,g);(this||yj).options=g;(this||yj).loose=!!g.loose;this.parse(a);(this||yj).value=(this||yj).semver===f?"":(this||yj).operator+(this||yj).semver.version;b("comp",this||yj)};c.prototype.parse=function(a){var g=a.match((this||yj).options.loose?e[k.COMPARATORLOOSE]:e[k.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+a);(this||yj).operator=void 0!==g[1]?g[1]:"";"="===(this||yj).operator&&((this||yj).operator="");(this||yj).semver=g[2]?new d(g[2],
(this||yj).options.loose):f};c.prototype.toString=function(){return(this||yj).value};c.prototype.test=function(a){b("Comparator.test",a,(this||yj).options.loose);if((this||yj).semver===f||a===f)return!0;if("string"===typeof a)try{a=new d(a,(this||yj).options)}catch(g){return!1}return n(a,(this||yj).operator,(this||yj).semver,(this||yj).options)};c.prototype.intersects=function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});
if(""===(this||yj).operator)return""===(this||yj).value?!0:(new m(a.value,g)).test((this||yj).value);if(""===a.operator)return""===a.value?!0:(new m((this||yj).value,g)).test(a.semver);var l=(">="===(this||yj).operator||">"===(this||yj).operator)&&(">="===a.operator||">"===a.operator),r=("<="===(this||yj).operator||"<"===(this||yj).operator)&&("<="===a.operator||"<"===a.operator),v=(this||yj).semver.version===a.semver.version,y=(">="===(this||yj).operator||"<="===(this||yj).operator)&&(">="===a.operator||
"<="===a.operator),A=n((this||yj).semver,"<",a.semver,g)&&(">="===(this||yj).operator||">"===(this||yj).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||yj).semver,">",a.semver,g)&&("<="===(this||yj).operator||"<"===(this||yj).operator)&&(">="===a.operator||">"===a.operator);return l||r||v&&y||A||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return f}}});zQ=c;var h=Np(),e=h.re,k=h.t,n=xJ(),b=lA(),d=tm(),m=Bn();return zQ}function yw(){if(XZ)return YZ;
XZ=!0;var f=Bn();return YZ=function(c,h,e){try{h=new f(h,e)}catch(k){return!1}return h.test(c)}}function zJ(){if(ZZ)return $Z;ZZ=!0;var f=Bn();return $Z=function(c,h){return(new f(c,h)).set.map(function(e){return e.map(function(k){return k.value}).join(" ").trim().split(" ")})}}function pl(){if(a_)return b_;a_=!0;var f=tm(),c=Bn();return b_=function(h,e,k){var n=null,b=null,d=null;try{d=new c(e,k)}catch(m){return null}h.forEach(function(m){!d.test(m)||n&&-1!==b.compare(m)||(n=m,b=new f(n,k))});return n}}
function Fu(){if(c_)return d_;c_=!0;var f=tm(),c=Bn();return d_=function(h,e,k){var n=null,b=null,d=null;try{d=new c(e,k)}catch(m){return null}h.forEach(function(m){!d.test(m)||n&&1!==b.compare(m)||(n=m,b=new f(n,k))});return n}}function eo(){if(e_)return f_;e_=!0;var f=tm(),c=Bn(),h=Ss();return f_=function(e,k){e=new c(e,k);var n=new f("0.0.0");if(e.test(n))return n;n=new f("0.0.0-0");if(e.test(n))return n;n=null;for(k=0;k<e.set.length;++k)e.set[k].forEach(function(b){var d=new f(b.semver.version);
switch(b.operator){case ">":0===d.prerelease.length?d.patch++:d.prerelease.push(0),d.raw=d.format();case "":case ">=":if(!n||h(n,d))n=d;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&e.test(n)?n:null}}function AQ(){if(g_)return h_;g_=!0;var f=Bn();return h_=function(c,h){try{return(new f(c,h)).range||"*"}catch(e){return null}}}function li(){if(i_)return j_;i_=!0;var f=tm(),c=Eu(),h=c.ANY,e=Bn(),k=yw(),n=Ss(),b=mA(),d=ey(),m=ZC();return j_=function(a,
g,l,r){a=new f(a,r);g=new e(g,r);switch(l){case ">":var v=n;l=d;var y=b;var A=">";var E=">=";break;case "<":v=b;l=m;y=n;A="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(k(a,g,r))return!1;for(var F={},G=0;G<g.set.length;F={$jscomp$loop$prop$high$2230:F.$jscomp$loop$prop$high$2230,$jscomp$loop$prop$low$2231:F.$jscomp$loop$prop$low$2231},++G){var I=g.set[G];F.$jscomp$loop$prop$high$2230=null;F.$jscomp$loop$prop$low$2231=null;I.forEach(function(M){return function(L){L.semver===
h&&(L=new c(">=0.0.0"));M.$jscomp$loop$prop$high$2230=M.$jscomp$loop$prop$high$2230||L;M.$jscomp$loop$prop$low$2231=M.$jscomp$loop$prop$low$2231||L;v(L.semver,M.$jscomp$loop$prop$high$2230.semver,r)?M.$jscomp$loop$prop$high$2230=L:y(L.semver,M.$jscomp$loop$prop$low$2231.semver,r)&&(M.$jscomp$loop$prop$low$2231=L)}}(F));if(F.$jscomp$loop$prop$high$2230.operator===A||F.$jscomp$loop$prop$high$2230.operator===E||(!F.$jscomp$loop$prop$low$2231.operator||F.$jscomp$loop$prop$low$2231.operator===A)&&l(a,
F.$jscomp$loop$prop$low$2231.semver)||F.$jscomp$loop$prop$low$2231.operator===E&&y(a,F.$jscomp$loop$prop$low$2231.semver))return!1}return!0}}function LF(){if(k_)return l_;k_=!0;var f=li();return l_=function(c,h,e){return f(c,h,">",e)}}function BQ(){if(m_)return n_;m_=!0;var f=li();return n_=function(c,h,e){return f(c,h,"<",e)}}function CQ(){if(o_)return p_;o_=!0;var f=Bn();return p_=function(c,h,e){c=new f(c,e);h=new f(h,e);return c.intersects(h)}}function nA(){if(q_)return r_;q_=!0;var f=yw(),c=
bp();return r_=function(h,e,k){var n=[],b=null,d=null;h=h.sort(function(g,l){return c(g,l,k)});for(var m=$jscomp.makeIterator(h),a=m.next();!a.done;a=m.next())a=a.value,f(a,e,k)?(d=a,b||(b=a)):(d&&n.push([b,d]),b=d=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())m=$jscomp.makeIterator(d.value),d=m.next().value,m=m.next().value,d===m?b.push(d):m||d!==h[0]?m?d===h[0]?b.push("<="+m):b.push(d+" - "+m):b.push(">="+d):b.push("*");h=b.join(" || ");return h.length<
("string"===typeof e.raw?e.raw:String(e)).length?h:e}}function MF(){if(s_)return t_;s_=!0;var f=Bn(),c=Eu().ANY,h=yw(),e=bp(),k=function(d,m,a){if(1===d.length&&d[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,r,v=$jscomp.makeIterator(d);for(d=v.next();!d.done;d=v.next())d=d.value,">"===d.operator||">="===d.operator?l=n(l,d,a):"<"===d.operator||"<="===d.operator?r=b(r,d,a):g.add(d.semver);if(1<g.size)return null;if(l&&r){var y=e(l.semver,r.semver,a);if(0<y||0===y&&(">="!==l.operator||
"<="!==r.operator))return null}for(d=$jscomp.makeIterator(g).next();!d.done;){y=d.value;if(l&&!h(y,String(l),a)||r&&!h(y,String(r),a))return null;l=$jscomp.makeIterator(m);for(d=l.next();!d.done;d=l.next())if(!h(y,String(d.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(d=m.next();!d.done;d=m.next()){d=d.value;var A=A||">"===d.operator||">="===d.operator;var E=E||"<"===d.operator||"<="===d.operator;if(l)if(">"===d.operator||">="===d.operator){if(g=n(l,d,a),g===d)return!1}else if(">="===
l.operator&&!h(l.semver,String(d),a))return!1;if(r)if("<"===d.operator||"<="===d.operator){if(g=b(r,d,a),g===d)return!1}else if("<="===r.operator&&!h(r.semver,String(d),a))return!1;if(!d.operator&&(r||l)&&0!==y)return!1}return l&&E&&!r&&0!==y||r&&A&&!l&&0!==y?!1:!0},n=function(d,m,a){if(!d)return m;a=e(d.semver,m.semver,a);return 0<a?d:0>a?m:">"===m.operator&&">="===d.operator?m:d},b=function(d,m,a){if(!d)return m;a=e(d.semver,m.semver,a);return 0>a?d:0<a?m:"<"===m.operator&&"<="===d.operator?m:d};
return t_=function(d,m,a){d=new f(d,a);m=new f(m,a);var g=!1;d=$jscomp.makeIterator(d.set);var l=d.next();a:for(;!l.done;l=d.next()){l=l.value;for(var r=$jscomp.makeIterator(m.set),v=r.next();!v.done;v=r.next())if(v=k(l,v.value,a),g=g||null!==v,v)continue a;if(g)return!1}return!0}}function fo(f){f=Object.assign({plugins:xg.allPlugins,reinitializeIds:!1,skipMigrations:!0},f);if(f.reinitializeIds&&"function"!==typeof f.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");
return f}function mi(f,c){c=xg.normalizeOptions(c);var h=c.objPool||new xg.ObjectPool(c);c=">="+xg.serializerVersion.replace(xg.majorAndMinorVersionRe,"");f=h.snapshotObject(f);xg.removeUnreachableObjects([f.id],f.snapshot);xg.clearDanglingConnections(f.snapshot);f.requiredVersion=c;return f}function oA(f,c){c=xg.normalizeOptions(c);var h=f.requiredVersion;h&&!xg.semver.satisfies(xg.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+
(xg.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new xg.ObjectPool(c)).resolveFromSnapshotAndId(f)}function Gu(f,c,h){function e(){var d=xg.deserialize(f,h);xg.runMigrations(n,"objectConverter",f,k);return d}h=xg.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var k=h.objPool||(h.objPool=new xg.ObjectPool(h));c=xg.normalizeMigrations(c);var n=c.after,b;xg.runMigrations(c.before,"snapshotConverter",f,k);"function"===typeof h.onDeserializationStart&&(b=h.onDeserializationStart(f,
h));return b instanceof Promise?b.then(e):e()}function Pp(f,c){return xg.deserialize(xg.serialize(f,c),c)}function DQ(f){return"[object Array]"===Aea.call(f)}function Cn(f,c,h){(this||EQ).type=Number(f);(this||EQ).vNode=c;(this||EQ).patch=h}function fy(f,c){var h=f.vnode;h||(h=f.vnode=f.render(c));if(!(Bea(h)||Cea(h)||Dea(h)))throw Error("thunk did not return a valid node");return h}function fp(f,c){var h;for(h in f){if(!(h in c)){var e=e||{};e[h]=void 0}var k=f[h],n=c[h];if(k!==n)if(u_(k)&&u_(n))if(zl(n)!==
zl(k))e=e||{},e[h]=n;else if(Eea(n))e=e||{},e[h]=n;else{if(k=fp(k,n))e=e||{},e[h]=k}else e=e||{},e[h]=n}for(var b in c)b in f||(e=e||{},e[b]=c[b]);return e}function zl(f){if(Object.getPrototypeOf)return Object.getPrototypeOf(f);if(f.__proto__)return f.__proto__;if(f.constructor)return f.constructor.prototype}function pA(f,c){var h={a:f};AJ(f,c,h,0);return h}function AJ(f,c,h,e){if(f!==c){var k=h[e],n=!1;if(BJ(f)||BJ(c))$C(f,c,h,e);else if(null==c)CJ(f)||(kh(f,h,e),NF(f,h,e),k=h[e]),k=ci(k,new Il(Il.REMOVE,
f,c));else if(qA(c))if(qA(f))if(f.tagName===c.tagName&&f.namespace===c.namespace&&f.key===c.key){var b=Fea(f.properties,c.properties);b&&(k=ci(k,new Il(Il.PROPS,f,b)));b=e;var d=f.children;c=c.children;var m=rA(c),a=m.keys,g=m.free;if(g.length===c.length)c={children:c,moves:null};else{m=rA(d);var l=m.keys;if(m.free.length===d.length)c={children:c,moves:null};else{m=[];for(var r=0,v=g.length,y=0,A=0;A<d.length;A++){var E=d[A];E.key?a.hasOwnProperty(E.key)?(E=a[E.key],m.push(c[E])):(y++,m.push(null)):
r<v?(E=g[r++],m.push(c[E])):(y++,m.push(null))}g=r>=g.length?c.length:g[r];for(r=0;r<c.length;r++)v=c[r],v.key?l.hasOwnProperty(v.key)||m.push(v):r>=g&&m.push(v);l=m.slice();g=0;r=[];v=[];for(E=0;E<c.length;){var F=c[E];for(A=l[g];null===A&&l.length;)r.push(Qp(l,g,null)),A=l[g];A&&A.key===F.key?(g++,E++):F.key?(A&&A.key?a[A.key]!==E+1?(r.push(Qp(l,g,A.key)),(A=l[g])&&A.key===F.key?g++:v.push({key:F.key,to:E})):v.push({key:F.key,to:E}):v.push({key:F.key,to:E}),E++):A&&A.key&&r.push(Qp(l,g,A.key))}for(;g<
l.length;)A=l[g],r.push(Qp(l,g,A&&A.key));c=r.length!==y||v.length?{children:m,moves:{removes:r,inserts:v}}:{children:m,moves:null}}}a=c.children;m=d.length;y=a.length;m=m>y?m:y;for(y=0;y<m;y++)l=d[y],g=a[y],b+=1,l?AJ(l,g,h,b):g&&(k=ci(k,new Il(Il.INSERT,null,g))),qA(l)&&l.count&&(b+=l.count);c.moves&&(k=ci(k,new Il(Il.ORDER,f,c.moves)))}else k=ci(k,new Il(Il.VNODE,f,c)),n=!0;else k=ci(k,new Il(Il.VNODE,f,c)),n=!0;else v_(c)?v_(f)?f.text!==c.text&&(k=ci(k,new Il(Il.VTEXT,f,c))):(k=ci(k,new Il(Il.VTEXT,
f,c)),n=!0):CJ(c)&&(CJ(f)||(n=!0),k=ci(k,new Il(Il.WIDGET,f,c)));k&&(h[e]=k);n&&(kh(f,h,e),NF(f,h,e))}}function NF(f,c,h){if(CJ(f))"function"===typeof f.destroy&&(c[h]=ci(c[h],new Il(Il.REMOVE,f,null)));else if(qA(f)&&(f.hasWidgets||f.hasThunks)){f=f.children;for(var e=f.length,k=0;k<e;k++){var n=f[k];h+=1;NF(n,c,h);qA(n)&&n.count&&(h+=n.count)}}else BJ(f)&&$C(f,null,c,h)}function $C(f,c,h,e){f=Gea(f,c);f=pA(f.a,f.b);a:{for(k in f)if("a"!==k){var k=!0;break a}k=!1}k&&(h[e]=new Il(Il.THUNK,null,f))}
function kh(f,c,h){if(qA(f)){if(f.hooks){var e=c[h],k=Il.PROPS,n=f.hooks,b={},d;for(d in n)b[d]=void 0;c[h]=ci(e,new Il(k,f,b))}if(f.descendantHooks||f.hasThunks)for(f=f.children,e=f.length,k=0;k<e;k++)n=f[k],h+=1,kh(n,c,h),qA(n)&&n.count&&(h+=n.count)}else BJ(f)&&$C(f,null,c,h)}function Qp(f,c,h){f.splice(c,1);return{from:c,key:h}}function rA(f){for(var c={},h=[],e=f.length,k=0;k<e;k++){var n=f[k];n.key?c[n.key]=k:h.push(k)}return{keys:c,free:h}}function ci(f,c){return f?(Hea(f)?f.push(c):f=[f,c],
f):c}function OF(f,c,h,e){if(e)if(e=e[c],w_(e))e.unhook&&e.unhook(f,c,h);else if("attributes"===c)for(var k in e)f.removeAttribute(k);else if("style"===c)for(var n in e)f.style[n]="";else f[c]="string"===typeof e?"":null}function zq(f){if(Object.getPrototypeOf)return Object.getPrototypeOf(f);if(f.__proto__)return f.__proto__;if(f.constructor)return f.constructor.prototype}function aD(f,c){var h=c?c.document||x_:x_,e=c?c.warn:null;f=Iea(f).a;if(Jea(f))return f.init();if(Kea(f))return h.createTextNode(f.text);
if(!Lea(f))return e&&e("Item is not a valid virtual dom node",f),null;h=null===f.namespace?h.createElement(f.tagName):h.createElementNS(f.namespace,f.tagName);Mea(h,f.properties);f=f.children;for(e=0;e<f.length;e++){var k=aD(f[e],c);k&&h.appendChild(k)}return h}function gy(f,c,h,e,k){e=e||{};if(f){DJ(h,k,k)&&(e[k]=f);var n=c.children;if(n){f=f.childNodes;for(var b=0;b<c.children.length;b++){k+=1;var d=n[b]||Nea,m=k+(d.count||0);DJ(h,k,m)&&gy(f[b],d,h,e,k);k=m}}}return e}function DJ(f,c,h){if(0===
f.length)return!1;for(var e=0,k=f.length-1,n,b;e<=k;){n=(k+e)/2>>0;b=f[n];if(e===k)return b>=c&&b<=h;if(b<c)e=n+1;else if(b>h)k=n-1;else return!0}return!1}function FQ(f,c){return f>c?1:-1}function EJ(f,c){"function"===typeof c.destroy&&Oea(c)&&c.destroy(f)}function FJ(f,c,h){h=h||{};h.patch=h.patch&&h.patch!==FJ?h.patch:GJ;h.render=h.render||Pea;return h.patch(f,c,h)}function GJ(f,c,h){var e=[];for(k in c)"a"!==k&&e.push(Number(k));if(0===e.length)return f;var k=Qea(f,c.a,e);var n=f.ownerDocument;
h.document||n===Rea||(h.document=n);for(n=0;n<e.length;n++){var b=e[n];var d=k[b],m=c[b],a=h;if(d)if(Sea(m))for(var g=0;g<m.length;g++)b=y_(m[g],d,a),d===f&&(f=b);else b=y_(m,d,a),d===f&&(f=b)}return f}function PF(f,c,h,e,k){(this||Hu).tagName=f;(this||Hu).properties=c||Tea;(this||Hu).children=h||Uea;(this||Hu).key=null!=e?String(e):void 0;(this||Hu).namespace="string"===typeof k?k:null;f=h&&h.length||0;e=0;var n=k=!1,b=!1,d;for(a in c)if(c.hasOwnProperty(a)){var m=c[a];Vea(m)&&m.unhook&&(d||(d={}),
d[a]=m)}for(c=0;c<f;c++){var a=h[c];Wea(a)?(e+=a.count||0,!k&&a.hasWidgets&&(k=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!k&&Xea(a)?"function"===typeof a.destroy&&(k=!0):!n&&Yea(a)&&(n=!0)}(this||Hu).count=f+e;(this||Hu).hasWidgets=k;(this||Hu).hasThunks=n;(this||Hu).hooks=d;(this||Hu).descendantHooks=b}function QF(f){(this||Zea).text=String(f)}function jm(f){if(!(this instanceof jm))return new jm(f);this.value=f}function sA(f){if(!(this instanceof sA))return new sA(f);
this.value=f}function go(f,c,h,e){if("string"===typeof f)c.push(new z_(f));else if("number"===typeof f)c.push(new z_(String(f)));else if(Iu(f))c.push(f);else if(A_(f))for(var k=0;k<f.length;k++)go(f[k],c,h,e);else if(null!==f&&void 0!==f)throw c={tagName:h,properties:e},h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+HJ(f)+".\nThe parent vnode is:\n"+HJ(c),h.foreignObject=
f,h.parentVnode=c,h;}function Iu(f){return $ea(f)||afa(f)||bfa(f)||cfa(f)}function HJ(f){try{return JSON.stringify(f,null,"    ")}catch(c){return String(f)}}function RF(f,c){if(3===f.nodeType)return new B_(f.nodeValue);if(1===f.nodeType||9===f.nodeType){var h="http://www.w3.org/1999/xhtml"!==f.namespaceURI?f.namespaceURI:null,e=c&&f.getAttribute(c)?f.getAttribute(c):null,k=f.tagName;var n,b={};if(f.hasAttributes()){if(f.namespaceURI&&"http://www.w3.org/1999/xhtml"!==f.namespaceURI)var d=f.namespaceURI;
for(var m=0;m<f.attributes.length;m++){if("style"==f.attributes[m].name){var a=f.style;var g={};for(n=0;n<a.length;++n){var l=a.item(n);g[l]=String(a[l]);-1<g[l].indexOf("url")&&(g[l]=g[l].replace(/"/g,""))}a="style";l=n=void 0}else d?(n=f.attributes[m],a=n.name,g=n.value,n=dfa[n.name]||"",l=void 0):(n=void 0,g=f.attributes[m],a=C_[g.name]?C_[g.name]:g.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(g=g.value,n=!0):g=g.value,l=n||!1,n=void 0);n?b[a]={namespace:n,value:g}:l?(b.attributes||(b.attributes=
{}),b.attributes[a]=g):b[a]=g}}d=[];for(m=0;m<f.childNodes.length;m++)d.push(RF(f.childNodes[m],c));return new efa(k,b,d,e,h)}return new B_("")}function hy(f){var c={};zi.addFill(f,c);zi.addTransform(f,c);zi.addTransformOrigin(f,c);zi.addDisplay(f,c);zi.addExtentStyle(f,c);zi.addBorder(f,c);zi.addBorderRadius(f,c);zi.addShadowStyle(f,c);f.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*f.grayscale+"%)");f.blur&&(c.filter=(c.filter||"")+" blur("+f.blur+"px)");null!=f.opacity&&(c.opacity=f.opacity);
f.draggable&&!f.isWorld&&(c["touch-action"]="none");return c}function SF(f,c){var h=f.position,e=f.origin,k=f.scale,n=f.rotation,b=f.flipped,d=f.tilted,m=f.perspective,a=f.__stackIdx__||0,g=Math.round(h.x-e.x);h=Math.round(h.y-e.y);e=f.renderOnGPU||f.dropShadow&&!f.dropShadow.fast||0<f.grayscale;f.owner&&f.owner.isText||e?c.transform=e?"translate3d("+g+"px, "+h+"px, "+a+"px)":"translate("+g+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=g+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+
k.toFixed(5)+","+k.toFixed(5)+")";m&&(c.perspective=m+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");d&&(c.transform+=" rotateX("+180*d+"deg)")}function tA(f,c){var h=f.width;f=f.height;c.width=h||1;c.height=f||1;c.viewBox=[0,0,h||1,f||1].join(" ");return c}function iy(f){var c="";if(0<f.length){var h=f[0];var e=h.position;var k=e.y;e=e.x;c+="M "+e+" "+k+" "}for(var n=1;n<f.length-1;n++){var b=f[n],d=b.position,m=d.x;d=d.y;var a=b,g=a.controlPoints.previous;c=a.isSmooth?c+("C "+(e+h.controlPoints.next.x)+
" "+(k+h.controlPoints.next.y)+" "+(m+g.x)+" "+(d+g.y)+" "+m+" "+d+" "):c+("L "+m+" "+d+" ");h=b;e=m;k=d}0<f.length&&(b=f[f.length-1].position,n=b.x,b=b.y,f=f[f.length-1],m=f.controlPoints.previous,c=f.isSmooth?c+("C "+(e+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+" "+(n+m.x)+" "+(b+m.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function jy(f,c){var h=f.id,e=f.vertices,k=f.fill,n=f.borderColor,b=f.borderWidth;e.length&&(c.d=zi.getSvgVertices(e));zi.addSvgBorderStyle(f,c);c["stroke-width"]=
b.valueOf();c.fill=k?k.isGradient?"url(#gradient-fill"+h+")":k.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function ky(f){var c=f.reactsToPointer,h=f.nativeCursor,e=f.clipMode,k=hf.styleProps(f);f=f._animationQueue.maskedProps("css");"backgroundImage"in f&&delete k.background;"visible"!==e&&(k.overflow=e,k["-webkit-overflow-scrolling"]="touch",k["overflow-anchor"]="none");Object.assign(k,f);k.position="absolute";k["pointer-events"]=
c?"auto":"none";k.cursor=h;return k}function bD(f,c){this.morph=f;this.type=c}function ly(f,c){c={animation:new hf.Animation(f),key:f.id,id:f.id,attributes:{},className:(f.hideScrollbars?f.styleClasses.concat("hiddenScrollbar"):f.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new hf.MorphAfterRenderHook(f,c)};c.attributes["touch-action"]=hf.bowser.ios&&f.draggable&&!f.isWorld?"none":hf.bowser.ios&&"visible"!=f.clipMode&&!f.isWorld?"auto":"manipulation";return c}function cD(f){var c=
new hf.SvgAnimation(f,"svg"),h={};hf.addSvgAttributes(f,h);Object.assign(h,f._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function dD(f){var c=new hf.SvgAnimation(f,"path"),h={mask:0!==f.drawnProportion?"url(#mask"+f.id+")":""};hf.addPathAttributes(f,h);Object.assign(h,f._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function eD(f,c,h){var e=h=h.valueOf(),k=e.bounds,n=e.focus,b=e.vector;e=e.stops;var d=c.x;c=c.y;f={namespace:"http://www.w3.org/2000/svg",
attributes:{id:"gradient-"+f,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(f.attributes.gradientTransform="rotate("+hf.num.toDegrees(b.extent().theta())+", "+d/2+", "+c/2+")");n&&k&&(b=k.width,k=k.height,f.attributes.gradientTransform="matrix(\n"+b/d+", 0, 0, "+k/c+",\n"+(d/2-b/d*(d/2)+n.x*d-d/2)+",\n"+(c/2-k/c*(c/2)+n.y*c-c/2)+")");return hf.h(h.type,f,e.map(function(m){return hf.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*m.offset+"%","stop-opacity":m.color.a,"stop-color":m.color.withA(1).toString()}})}))}
function zw(f,c){c=void 0===c?f.env.renderer:c;return hf.createNode(f.render(c),c.domEnvironment)}function uA(f,c){var h=c.renderMap.get(f),e=c.getNodeForMorph(f);if(e&&h){var k=c.render(f),n=hf.diff(h,k);f=c.renderMap.get(f.owner).children[0].children;h=f.indexOf(h);f[h]=k;hf.patch(e,n)}}function fD(f,c){if(f.needsRerender()){var h=!1,e=c.domNode,k=c.renderMap.get(f)||e&&(h=!0)&&hf.parser(e)||c.render(f),n=c.render(f);h&&(k.key=n.key);h=hf.diff(k,n);e=e||(c.domNode=hf.createNode(k,c.domEnvironment));
e.parentNode||hf.initDOMState(c,f);hf.patch(e,h);c.renderFixedMorphs(n.fixedMorphs,f)}}function Ju(f,c,h){return(((1-3*h+3*c)*f+(3*h-6*c))*f+3*c)*f}function mj(f){return f}function Ij(f){return bg.obj.isFunction(f)?f:bg.Bezier.apply(bg,$jscomp.arrayFromIterable(eval("(["+f.match(/\((.*)\)/)[1]+"])")))}function my(f){var c=0,h=0;do c+=f.offsetTop||0,h+=f.offsetLeft||0,f=f.offsetParent;while(f);return{top:c,left:h}}function TF(){return System.get("@system-env").browser?Sh.createDOMEnvironment_browser():
Sh.createDOMEnvironment_node()}function vA(){return Sh._defaultEnv||(Sh._defaultEnv=System.get("@system-env").browser?new Sh.DomEnvironment(window,document,function(){}):Sh.createDOMEnvironment())}function zj(f,c,h){f=void 0===f?"lively-css":f;h=void 0===h?document:h;var e=h.getElementById(f);return e?Sh.setCSSDef(e,c,h):Sh.addCSSDef(f,c,h)}function df(f,c,h,e){h=void 0===h?document:h;e=void 0===e?!0:e;var k=h.getElementById(f),n=!1;return k?e&&k.getAttribute("href")!==c?(k.setAttribute("href",c),
k.onload=function(){return n=!0},Sh.promise.waitFor(3E4,function(){return!!n&&k})):Promise.resolve():(k=h.createElement("link"),k.type="text/css",k.rel="stylesheet",k.setAttribute("id",f),k.setAttribute("href",c),k.onload=function(){return n=!0},h.head.appendChild(k),Sh.promise.waitFor(3E4,function(){return!!n&&k}))}function Aw(f,c){return Array.isArray(f)?f.reduce(function(h,e){return Aw(e,h)},c):"string"===typeof f?c.filter(function(h){return h.path()!==f&&h.name()!==f}):f instanceof RegExp?c.filter(function(h){return!f.test(h.path())&&
!f.test(h.name())}):"function"===typeof f?c.filter(function(h){return!f(h)}):c}function je(f){f=$jscomp.makeIterator(f.split("?"));f.next();var c=f.next().value;f={};if(!c)return f;if(c=c.split("&"))for(var h=0;h<c.length;h++){var e=c[h].split("="),k=e[0],n=!0;if(1<e.length)if(n=decodeURIComponent(e.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}f[k]=n}return f}function Ku(f){return Object.keys(f).map(function(c){return c+
"="+encodeURIComponent(String(f[c]))}).join("&")}function ny(f){var c=f;do f=c,c=f.replace(fg.pathDoubleDotRe,"");while(c!=f);c=c.replace(fg.pathDoubleSlashRe,"$1/");return c=c.replace(fg.pathDotRe,"/")}function gd(f,c){var h=f.match(fg.urlRe),e=c.match(fg.urlRe),k=!0;if(h&&!e||!h&&e)k=!1;if(h&&e){var n=h[1];var b=h[2];var d=e[1];var m=e[2];n!==d?k=!1:b!==m?k=!1:(f=h[3],c=e[3])}if(!k)throw Error("[relativePathBetween] incompatible paths: "+f+" vs. "+c);f=fg.withRelativePartsResolved(f);c=fg.withRelativePartsResolved(c);
if(f==c)return"";h=fg._relativePathBetween_checkPathes(c,f);if(!h)throw Error("pathname differs in relativePathFrom "+f+" vs "+c);return h}function wA(f,c){return fg.withRelativePartsResolved(f.replace(fg.slashEndRe,"")+"/"+c.replace(fg.slashStartRe,""))}function ja(f){return f.startsWith("/")?f.replace(fg.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function q(f){var c=[];for(f=fg.parent(f);f&&(c.unshift(f),f=fg.parent(f),"/"!==f););return c}function w(f,c){if(!f)throw Error("lively.resource resource constructor: expects url but got "+
f);if(f.isResource)return f;f=String(f);for(var h=0;h<fg.extensions.length;h++)if(fg.extensions[h].matches(f))return new fg.extensions[h].resourceClass(f,c);throw Error("Cannot find resource type for url "+f);}function B(f,c,h){var e,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return e=w(f,h).asDirectory(),d.yield(e.ensureExistance(),2);case 2:n=d.forIn(c);case 3:if(null==(k=n.getNext())){d.jumpTo(5);break}if(!c.hasOwnProperty(k)){d.jumpTo(3);
break}b=e.join(k);return"object"===typeof c[k]?d.yield(B(b,c[k],h),9):d.yield(b.write(c[k]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;case 5:return d.return(e)}})}function D(f){var c=f.name;fg.extensions=fg.extensions.filter(function(h){return h.name!==c}).concat(f)}function J(f){var c="string"===typeof f?f:f.name;fg.extensions=fg.extensions.filter(function(h){return h.name!==c})}function O(f,c){var h=void 0===f.useProxy?!0:f.useProxy,e=void 0===f.useCors?!0:f.useCors,k=f.url,n=
f.onLoad,b=f.headers,d=f.onProgress,m=new XMLHttpRequest,a=Fh.promise.deferred();m.open("PUT",k);h&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),k=f.proxyDomain||Fh.defaultOrigin());for(var g in b)m.setRequestHeader(g,b[g]);m.upload.addEventListener("progress",d);m.responseType="json";m.onload=function(){n(m.response);a.resolve(m)};e&&(m.withCredentials=!0);m.send(c);return a.promise}function X(f,c,h){c=void 0===c?"infinity":c;var e,k,n,b,d,m,a,g,l,r,
v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(f.dirList(c,h),2);case 2:e=A.yieldResult,k={},n=$jscomp.makeIterator(e),b=n.next();case 3:if(b.done){A.jumpTo(5);break}d=b.value;if(d.isDirectory()){m={};A.jumpTo(6);break}return A.yield(d.read(),7);case 7:m=A.yieldResult;case 6:a=m;g=d.asFile().relativePathFrom(f).split("/");l=k;r=$jscomp.makeIterator(g.slice(0,-1));for(v=r.next();!v.done;v=r.next())y=v.value,l[y]||(l[y]={}),l=l[y];l[g[g.length-
1]]=a;b=n.next();A.jumpTo(3);break;case 5:return A.return(k)}})}function da(f,c){var h=document.head,e=h.namespaceURI;return new Promise(function(k,n){var b=document.createElementNS(e,"script");b.setAttribute("type","text/ecmascript");h.appendChild(b);b.setAttributeNS(null,"id",f);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",f):b.setAttribute("src",f);b.onload=k;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function pa(){var f,c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return e.return(Promise.resolve());f=System.decanonicalize("lively.resources");if(System.get("@system-env").node){e.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");e.leaveTryBlock(3);break}return e.yield(System.import("fetch-ponyfill",f),4);case 4:c=e.yieldResult;e.jumpTo(3);break;case 5:return e.enterCatchBlock(),e.yield(System.normalize("fetch-ponyfill",f),7);case 7:h=e.yieldResult.replace("file://",""),c=System._nodeRequire(h);case 3:Object.assign(System.global,
c()),e.jumpToEnd()}})}function ua(f,c){c=(c=c.trim())&&"?"!==c?nj.parseQuery(c):{};c.name=f.replace(/\.json$/,"").replace(/%20/g," ");return"/worlds/load?"+nj.stringifyQuery(c)}function Oa(f){Object.assign(nj.nameToClassMapping,f)}function ab(f,c){f=void 0===f?{}:f;c=void 0===c?{restore:!1}:c;var h=nj.nameToClassMapping.default;f.type&&("function"===typeof f.type&&(h=f.type),"object"===typeof f.type?h=nj.locateClass(f.type):"string"===typeof f.type&&(h=nj.nameToClassMapping[f.type.toLowerCase()]||
h));var e={};return c.restore?(new h((e[Symbol.for("lively-instance-restorer")]=!0,e))).initFromJSON(f):new h(f)}function Ab(f){return("function"===typeof f?f.className:"string"===typeof f?f.toLowerCase():"")+"_"+nj.string.newUUID().replace(/-/g,"_")}function Bb(f){var c=f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!Oi.canonicalizeFunctionKey(c)&&c&&Oi.letterRe.test(c)&&(f=-1);return f}function Ec(f,c){if("string"===typeof f)return f;if(!f||"object"!==typeof f)return null;
switch(c){case "ios":return f.ios||f.mac;case "mac":return f.mac||f.ios;case "win":case "windows":case "windowsphone":return f.win||f.windows;case "linux":return f.linux||f.win||f.windows;case "chromeos":return f.chromeos||f.linux||f.win||f.windows;case "android":return f.android||f.linux||f.win||f.windows;default:return f.linux||f.win||f.windows}}function Ic(f,c,h,e){e=void 0===e?h.name:e;(f[c]=Rp.fun.wrap(f[c],h)).hookFunc=h;h.hookName=e}function uc(f,c,h){for(var e=[],k=f[c];k;)e.push(k),k=k.originalFunction;
k="string"===typeof h?e.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):e.find(function(n){return n.hookFunc===h});if(!k)return!1;Rp.arr.remove(e,k);f[c]=e.reduceRight(function(n,b){return Rp.fun.wrap(n,b.hookFunc||b)});return!0}function wd(f,c,h){for(f=f[c];f;){if(f.hookFunc&&("string"===typeof h&&f.hookFunc.hookName===h||f.hookFunc===h))return!0;f=f.originalFunction}return!1}function Gd(f){if(f.loads){var c=f.loads;return Bw.arr.uniq(Object.keys(Bw.loadedModules(f)).concat(Object.keys(c))).reduce(function(h,
e){var k=c[e]?c[e].depMap:{};h[e]=Object.keys(k).map(function(n){var b=k[n];return"@empty"===b?b+"/"+n:b});return h},{})}return Object.keys(f._loader.moduleRecords).reduce(function(h,e){h[e]=f._loader.moduleRecords[e].dependencies.filter(Boolean).map(function(k){return k.name});return h},{})}function pe(f,c,h,e,k){var n=f.get("@lively-env").pendingExportChanges;(f=zo.module(f,c).record())&&(h in f.exports||k)&&((n[c]||(n[c]={}))[h]=e)}function Kd(f,c){var h=f.get("@lively-env").pendingExportChanges[c];
h&&(zo.clearPendingModuleExportChanges(f,c),zo.updateModuleExports(f,c,h))}function ve(f,c,h,e,k){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);f.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+e);if(!e||"es6"===e||"esm"===e||"register"===e||"defined"===e)return d.yield(Lk.moduleSourceChangeEsm(f,c,h,k),8);if("global"!==e)throw Error("moduleSourceChange is not supported for module "+c+
" with format "+e);return d.yield(Lk.moduleSourceChangeGlobal(f,c,h,k),7);case 7:n=d.yieldResult;d.jumpTo(5);break;case 8:n=d.yieldResult;case 5:return Lk.emit("lively.modules/modulechanged",{module:c,newSource:h,options:k},Date.now(),f),d.return(n);case 2:throw b=d.enterCatchBlock(),Lk.emit("lively.modules/modulechanged",{module:c,newSource:h,error:b,options:k},Date.now(),f),b;}})}function rf(f){return/\.js/i.test(f)}function ef(f){return Dn.isJsFile(f)?f.replace(/\/[^\/]*$/,""):f.replace(/\/$/,
"")}function te(f){return/^[^:\\]+:\/\//.test(f)}function Ef(f){var c=f.match(/^([^:]+:\/\/)(.*)/);if(!c)return f;f=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,"/");return f+h}function Xe(f,c,h){h=void 0===h?!1:h;var e=Bf.classHolder.PackageRegistry.ofSystem(f),k=e.allPackageURLs();f=h?c:Bf.normalizePackageURL(f,c,k);return{pkg:e.findPackageWithURL(f),url:f,allPackageURLs:k,registry:e}}function Te(f,c,h){f=Bf.lookupPackage(f,
c,void 0===h?!1:h);c=f.url;h=f.registry;return f.pkg||h.addPackageAt(c,"devPackageDirs")}function pf(f,c,h){f=Bf.lookupPackage(f,c,void 0===h?!1:h);if(h=f.pkg)return h;throw Error("[getPackage] package "+c+" (as "+f.url+") not found");}function Wf(f,c,h){return Bf.getPackage(f,h).updateConfig(c)}function Qf(f,c){return Promise.resolve(Bf.ensurePackage(f,c)).then(function(h){return h.import()})}function pg(f,c){return(f=Bf.lookupPackage(f,c).pkg)?f.remove():null}function Th(f,c,h){return Bf.getPackage(f,
c).reload(h)}function sk(f,c,h){return Promise.resolve(Bf.ensurePackage(f,c)).then(function(e){return e.register(h)})}function mk(f){return Bf.Package.allPackages(f).map(function(c){return c.asSpec()})}function Gi(f,c){f="string"===typeof f?Nd.parse(f):f;c.scope=Nd.query.resolveReferences(Nd.query.scopes(f));return Nd.ClassReplaceVisitor.run(f,c)}function Wh(f,c,h){h=gp.ensureParent(f,c);var e=f.System._nodeRequire("module");c.startsWith(".")&&(c=gp.relative(f,c));return e._load(c,h)}function Vi(f,
c,h){h=gp.ensureParent(f,c);var e=f.System._nodeRequire("module");c.startsWith(".")&&(c=gp.relative(f,c));return e._resolveFilename(c,h)}function Ao(f,c,h){var e=Ff.livelySystemEnv(f);c=f.decanonicalize(c,h);return e.loadedModules[c]||(e.loadedModules[c]=new Ff.ModuleInterface(f,c))}function Bo(f,c,h){h=void 0===h?!1:h;var e=Ff.livelySystemEnv(f);return(h?c:f.normalizeSync(c))in e.loadedModules}function Ts(f,c,h){h=void 0===h?!1:h;var e,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){Ff.livelySystemEnv(f);e=h?c:f.normalizeSync(c);if(Ff.isModuleLoaded(f,e,!0))return b.return(!0);k=Ff.Package.forModuleId(f,e);return k&&"no group"!==k.name?b.yield(k.hasResource(e),3):(n=f.resource(e).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function Lu(){return We.exceptions}function Mu(f){return We.exceptions=f}function Nu(f,c,h,e,k){c=String(c);f=e.sourceAccessorName;var n=e.recorder,b=e.recorderName,d=e.dontTransform,m=e.varDefinitionCallbackName,
a=void 0===e.embedOriginalCode?!0:e.embedOriginalCode;f=a?f:void 0;e={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:f,dontTransform:d,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:m,evalId:e.nextEvalId(),classTransform:We.classToFunctionTransform,currentModuleAccessor:We.funcCall(We.member(We.funcCall(We.member(We.member("__lvVarRecorder","System"),"get"),We.literal("@lively-env")),"moduleEnv"),We.literal(h))};n=k?'console.log("[lively.modules] executing module '+
h+'");\n':"";d="";"System.global"===b?delete e.declarationWrapperName:(n+='System.get("@lively-env").evaluationStart("'+h+'");\nvar '+(b+' = System.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+(a?"\nvar "+f+" = "+JSON.stringify(c)+";\n":""),d+='\nSystem.get("@lively-env").evaluationEnd("'+h+'");');try{var g=n+We.evalCodeTransform(c,e)+d;k&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=g);return{source:g,options:e}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+
h+" "+l.stack),{source:c,options:e}}}function Us(f,c,h,e,k,n){c=String(c);f=Object.assign({},k,{classTransform:We.classToFunctionTransform,topLevelVarRecorder:e.recorder,varRecorderName:e.recorderName,dontTransform:e.dontTransform,recordGlobals:!0,declarationWrapperName:e.varDefinitionCallbackName,currentModuleAccessor:We.funcCall(We.member(We.funcCall(We.member(We.member("__lvVarRecorder","System"),"get"),We.literal("@lively-env")),"moduleEnv"),We.literal(h))});try{var b=We.evalCodeTransformOfSystemRegisterSetters(c,
f);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",d.stack),c}}function gi(f,c){return f.translate(c).then(function(h){var e=We.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!e)throw Error("Cannot find register call in translated source of "+c.name);var k=
e.expression;e=k.arguments[0].elements.map(function(n){return n.value});k=k.arguments[1];h=h.slice(k.start,k.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");f.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:e,declare:h}})}function Ck(f,c){return f.translate(c).then(function(h){return{translated:h}})}function Yj(f){We.isHookInstalled(f,"translate","lively_modules_translate_hook")||We.installHook(f,
"translate",function(c,h){return We.customTranslate.call(f,c,h)},"lively_modules_translate_hook")}function En(f){We.removeHook(f,"translate","lively_modules_translate_hook")}function xA(f){f.resource=Hi.resource;Hi.isHookInstalled(f,"fetch",Hi.fetchResource)&&Hi.removeHook(f,"fetch","fetchResource");Hi.installHook(f,"fetch",Hi.fetchResource);Hi.isHookInstalled(f,"resource","livelyProtocol")&&Hi.removeHook(f,"fetch","livelyProtocol");Hi.installHook(f,"resource",Hi.livelyProtocol)}function yA(f){Hi.removeHook(f,
"fetch","fetchResource");Hi.removeHook(f,"resource","livelyProtocol");delete f.resource}function hi(f){le.isHookInstalled(f,"normalize","normalizeHook")||le.installHook(f,"normalize",le.normalizeHook,"normalizeHook");le.isHookInstalled(f,"decanonicalize","decanonicalizeHook")||le.installHook(f,"decanonicalize",le.decanonicalizeHook,"decanonicalizeHook");le.isHookInstalled(f,"normalizeSync","decanonicalizeHook")||le.installHook(f,"normalizeSync",le.decanonicalizeHook,"decanonicalizeHook");le.isHookInstalled(f,
"newModule","newModule_volatile")||le.installHook(f,"newModule",le.newModule_volatile,"newModule_volatile");le.isHookInstalled(f,"instantiate","instantiate_triggerOnLoadCallbacks")||le.installHook(f,"instantiate",le.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");le.isHookInstalled(f,"locate","locateHook")||le.installHook(f,"locate",le.locateHook,"locateHook")}function Mm(f){le.removeHook(f,"normalize","normalizeHook");le.removeHook(f,"decanonicalize","decanonicalizeHook");
le.removeHook(f,"normalizeSync","decanonicalizeHook");le.removeHook(f,"newModule","newModule_volatile");le.removeHook(f,"instantiate","instantiate_triggerOnLoadCallbacks");le.removeHook(f,"locate","locateHook")}function hp(f){return{moduleEnv:function(c){return le.classHolder.module(f,c)},get itself(){return f.get(f.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){le.classHolder.module(f,c).evaluationStart()},evaluationEnd:function(c){le.classHolder.module(f,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:f.baseURL,transpiler:f.transpiler,defaultJSExtensions:f.defaultJSExtensions,map:f.map,meta:f.meta,packages:f.packages,paths:f.paths,packageConfigPaths:f.packageConfigPaths},null,2)},get packageRegistry(){return f["__lively.modules__packageRegistry"]},set packageRegistry(c){f["__lively.modules__packageRegistry"]=c},packages:f["__lively.modules__packages"]||(f["__lively.modules__packages"]={}),loadedModules:f["__lively.modules__loadedModules"]||(f["__lively.modules__loadedModules"]=
{}),pendingExportChanges:f["__lively.modules__pendingExportChanges"]||(f["__lively.modules__pendingExportChanges"]={}),notifications:f["__lively.modules__notifications"]||(f["__lively.modules__notifications"]=[]),notificationSubscribers:f["__lively.modules__notificationSubscribers"]||(f["__lively.modules__notificationSubscribers"]={}),options:f["__lively.modules__options"]||(f["__lively.modules__options"]=le.obj.deepCopy(le.defaultOptions)),onLoadCallbacks:f["__lively.modules__onLoadCallbacks"]||
(f["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:f["__lively.modules__modulePackageMapCache"]}}function Vs(f,c){return f&&"string"!==typeof f?f:le.systems()[f]||(le.systems()[f]=le.makeSystem(c))}function zA(f){f=f&&"string"!==typeof f?le.nameOfSystem(f):f;delete le.systems()[f]}function IJ(f,c){f.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!le.urlQuery().noModuleCache;f.useModuleTranslationCache=h;f.set("@lively-env",f.newModule(le.livelySystemEnv(f)));
"undefined"!==typeof WorkerGlobalScope&&f.set("@system-env",f.newModule(Object.assign({},f.get("@system-env"),{browser:!0,worker:!0,location:location})));(h="undefined"!==typeof process&&process.versions&&process.versions.electron)&&f.set("@system-env",f.newModule(Object.assign({electron:h},f.get("@system-env"))));le.wrapResource(f);le.wrapModuleLoad(f);le.wrapModuleResolution(f);h&&(h=["electron"].reduce(function(e,k){e[k]="@node/"+k;return e},{}),c.map=le.obj.merge(h,c.map));le.isNode&&(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(e,
k){e[k]="@node/"+k;return e},{}),c.map=le.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==f.transpiler||(h=le.GLOBAL.System,"lively.transpiler"===h.transpiler?(f.set("lively.transpiler",h.get("lively.transpiler")),f._loader.transpilerPromise=h._loader.transpilerPromise,f.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):f.config({map:{"plugin-babel":h.map["plugin-babel"],
"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));f.config(c);return f}function JJ(f){f=le.getSystem(f);return JSON.stringify({baseURL:f.baseURL,transpiler:f.transpiler,defaultJSExtensions:f.defaultJSExtensions,defaultExtension:f.defaultExtension,map:f.map,meta:f.meta,packages:f.packages,paths:f.paths,packageConfigPaths:f.packageConfigPaths,bundles:f.bundles},null,2)}function KJ(f,c,h){var e=f.decanonicalize(c);
if(f.get(e))try{h(le.classHolder.module(f,e))}catch(k){console.error(k)}else f.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function LJ(f){return f.get("@lively-env").loadedModules}function MJ(f){var c=f.loads?Object.keys(f.loads):Object.keys(f._loader.moduleRecords);return le.arr.uniq(c.concat(Object.keys(le.loadedModules(f))))}function GQ(f,c,h){return Promise.all(le.obj.values(le.loadedModules(f)).map(function(e){return e.search(c,h)})).then(function(e){return le.arr.flatten(e,
1)})}function HQ(){throw Error("setTimeout has not been defined");}function IQ(){throw Error("clearTimeout has not been defined");}function D_(f){if(oy===setTimeout)return setTimeout(f,0);if((oy===HQ||!oy)&&setTimeout)return oy=setTimeout,setTimeout(f,0);try{return oy(f,0)}catch(c){try{return oy.call(null,f,0)}catch(h){return oy.call(this||gD,f,0)}}}function ffa(){hD&&AA&&(hD=!1,AA.length?Cw=AA.concat(Cw):NJ=-1,Cw.length&&E_())}function E_(){if(!hD){var f=D_(ffa);hD=!0;for(var c=Cw.length;c;){AA=
Cw;for(Cw=[];++NJ<c;)AA&&AA[NJ].run();NJ=-1;c=Cw.length}AA=null;hD=!1;(function(h){if(py===clearTimeout)return clearTimeout(h);if((py===IQ||!py)&&clearTimeout)return py=clearTimeout,clearTimeout(h);try{py(h)}catch(e){try{return py.call(null,h)}catch(k){return py.call(this||gD,h)}}})(f)}}function F_(f,c){(this||gD).fun=f;(this||gD).array=c}function Dw(){}function OJ(){if(G_)return H_;G_=!0;return H_={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,
MAX_SAFE_COMPONENT_LENGTH:16}}function PJ(){if(I_)return J_;I_=!0;var f=Zj;return J_="object"===typeof f&&f.env&&f.env.NODE_DEBUG&&/\bsemver\b/i.test(f.env.NODE_DEBUG)?function(c){for(var h=[],e=0;e<arguments.length;++e)h[e-0]=arguments[e];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function iD(){if(K_)return Ou;K_=!0;var f=OJ().MAX_SAFE_COMPONENT_LENGTH,c=PJ();Ou=Ou={};var h=Ou.re=[],e=Ou.src=[],k=Ou.t={},n=0,b=function(d,m,a){var g=n++;c(g,m);
k[d]=g;e[g]=m;h[g]=new RegExp(m,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+e[k.NUMERICIDENTIFIER]+")\\.("+(e[k.NUMERICIDENTIFIER]+")\\.(")+(e[k.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+e[k.NUMERICIDENTIFIERLOOSE]+")\\.("+(e[k.NUMERICIDENTIFIERLOOSE]+")\\.(")+(e[k.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+e[k.NUMERICIDENTIFIER]+"|"+e[k.NONNUMERICIDENTIFIER]+
")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+e[k.NUMERICIDENTIFIERLOOSE]+"|"+e[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+e[k.PRERELEASEIDENTIFIER]+"(?:\\."+e[k.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+e[k.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+e[k.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+e[k.BUILDIDENTIFIER]+"(?:\\."+e[k.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+e[k.MAINVERSION]+e[k.PRERELEASE]+"?"+e[k.BUILD]+"?");b("FULL",
"^"+e[k.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+e[k.MAINVERSIONLOOSE]+e[k.PRERELEASELOOSE]+"?"+e[k.BUILD]+"?");b("LOOSE","^"+e[k.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",e[k.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",e[k.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+e[k.XRANGEIDENTIFIER]+")(?:\\.("+(e[k.XRANGEIDENTIFIER]+")(?:\\.(")+(e[k.XRANGEIDENTIFIER]+")(?:")+(e[k.PRERELEASE]+")?"+e[k.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+e[k.XRANGEIDENTIFIERLOOSE]+
")(?:\\.("+(e[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(e[k.XRANGEIDENTIFIERLOOSE]+")(?:")+(e[k.PRERELEASELOOSE]+")?"+e[k.BUILD]+"?)?)?"));b("XRANGE","^"+e[k.GTLT]+"\\s*"+e[k.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+e[k.GTLT]+"\\s*"+e[k.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+f+"})(?:\\.(\\d{1,"+(f+"}))?(?:\\.(\\d{1,")+(f+"}))?(?:$|[^\\d])"));b("COERCERTL",e[k.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+e[k.LONETILDE]+"\\s+",!0);Ou.tildeTrimReplace="$1~";b("TILDE","^"+e[k.LONETILDE]+
e[k.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+e[k.LONETILDE]+e[k.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+e[k.LONECARET]+"\\s+",!0);Ou.caretTrimReplace="$1^";b("CARET","^"+e[k.LONECARET]+e[k.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+e[k.LONECARET]+e[k.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+e[k.GTLT]+"\\s*("+e[k.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+e[k.GTLT]+"\\s*("+e[k.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+e[k.GTLT]+"\\s*("+e[k.LOOSEPLAIN]+"|"+e[k.XRANGEPLAIN]+
")",!0);Ou.comparatorTrimReplace="$1$2$3";b("HYPHENRANGE","^\\s*("+e[k.XRANGEPLAIN]+")\\s+-\\s+("+(e[k.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+e[k.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(e[k.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Ou}function JQ(){if(L_)return M_;L_=!0;var f=/^[0-9]+$/,c=function(h,e){var k=f.test(h),n=f.test(e);k&&n&&(h=+h,e=+e);return h===e?0:k&&!n?-1:n&&!k?1:h<e?-1:1};return M_=
{compareIdentifiers:c,rcompareIdentifiers:function(h,e){return c(e,h)}}}function ip(){if(N_)return O_;N_=!0;var f=PJ(),c=OJ(),h=c.MAX_LENGTH,e=c.MAX_SAFE_INTEGER;c=iD();var k=c.re,n=c.t,b=JQ().compareIdentifiers,d=function(m,a){a&&"object"===typeof a||(a={loose:!!a,includePrerelease:!1});if(m instanceof d){if(m.loose===!!a.loose&&m.includePrerelease===!!a.includePrerelease)return m;m=m.version}else if("string"!==typeof m)throw new TypeError("Invalid Version: "+m);if(m.length>h)throw new TypeError("version is longer than "+
h+" characters");f("SemVer",m,a);(this||gg).options=a;(this||gg).loose=!!a.loose;(this||gg).includePrerelease=!!a.includePrerelease;a=m.trim().match(a.loose?k[n.LOOSE]:k[n.FULL]);if(!a)throw new TypeError("Invalid Version: "+m);(this||gg).raw=m;(this||gg).major=+a[1];(this||gg).minor=+a[2];(this||gg).patch=+a[3];if((this||gg).major>e||0>(this||gg).major)throw new TypeError("Invalid major version");if((this||gg).minor>e||0>(this||gg).minor)throw new TypeError("Invalid minor version");if((this||gg).patch>
e||0>(this||gg).patch)throw new TypeError("Invalid patch version");(this||gg).prerelease=a[4]?a[4].split(".").map(function(g){if(/^[0-9]+$/.test(g)){var l=+g;if(0<=l&&l<e)return l}return g}):[];(this||gg).build=a[5]?a[5].split("."):[];this.format()};d.prototype.format=function(){(this||gg).version=(this||gg).major+"."+(this||gg).minor+"."+(this||gg).patch;(this||gg).prerelease.length&&((this||gg).version+="-"+(this||gg).prerelease.join("."));return(this||gg).version};d.prototype.toString=function(){return(this||
gg).version};d.prototype.compare=function(m){f("SemVer.compare",(this||gg).version,(this||gg).options,m);if(!(m instanceof d)){if("string"===typeof m&&m===(this||gg).version)return 0;m=new d(m,(this||gg).options)}return m.version===(this||gg).version?0:this.compareMain(m)||this.comparePre(m)};d.prototype.compareMain=function(m){m instanceof d||(m=new d(m,(this||gg).options));return b((this||gg).major,m.major)||b((this||gg).minor,m.minor)||b((this||gg).patch,m.patch)};d.prototype.comparePre=function(m){m instanceof
d||(m=new d(m,(this||gg).options));if((this||gg).prerelease.length&&!m.prerelease.length)return-1;if(!(this||gg).prerelease.length&&m.prerelease.length)return 1;if(!(this||gg).prerelease.length&&!m.prerelease.length)return 0;var a=0;do{var g=(this||gg).prerelease[a],l=m.prerelease[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};d.prototype.compareBuild=function(m){m instanceof d||(m=new d(m,(this||
gg).options));var a=0;do{var g=(this||gg).build[a],l=m.build[a];f("prerelease compare",a,g,l);if(void 0===g&&void 0===l)return 0;if(void 0===l)return 1;if(void 0===g)return-1;if(g!==l)return b(g,l)}while(++a)};d.prototype.inc=function(m,a){switch(m){case "premajor":(this||gg).prerelease.length=0;(this||gg).patch=0;(this||gg).minor=0;(this||gg).major++;this.inc("pre",a);break;case "preminor":(this||gg).prerelease.length=0;(this||gg).patch=0;(this||gg).minor++;this.inc("pre",a);break;case "prepatch":(this||
gg).prerelease.length=0;this.inc("patch",a);this.inc("pre",a);break;case "prerelease":0===(this||gg).prerelease.length&&this.inc("patch",a);this.inc("pre",a);break;case "major":0===(this||gg).minor&&0===(this||gg).patch&&0!==(this||gg).prerelease.length||(this||gg).major++;(this||gg).minor=0;(this||gg).patch=0;(this||gg).prerelease=[];break;case "minor":0===(this||gg).patch&&0!==(this||gg).prerelease.length||(this||gg).minor++;(this||gg).patch=0;(this||gg).prerelease=[];break;case "patch":0===(this||
gg).prerelease.length&&(this||gg).patch++;(this||gg).prerelease=[];break;case "pre":if(0===(this||gg).prerelease.length)(this||gg).prerelease=[0];else{for(m=(this||gg).prerelease.length;0<=--m;)"number"===typeof(this||gg).prerelease[m]&&((this||gg).prerelease[m]++,m=-2);-1===m&&(this||gg).prerelease.push(0)}a&&((this||gg).prerelease[0]===a?isNaN((this||gg).prerelease[1])&&((this||gg).prerelease=[a,0]):(this||gg).prerelease=[a,0]);break;default:throw Error("invalid increment argument: "+m);}this.format();
(this||gg).raw=(this||gg).version;return this||gg};return O_=d}function jD(){if(P_)return Q_;P_=!0;var f=OJ().MAX_LENGTH,c=iD(),h=c.re,e=c.t,k=ip();return Q_=function(n,b){b&&"object"===typeof b||(b={loose:!!b,includePrerelease:!1});if(n instanceof k)return n;if("string"!==typeof n||n.length>f||!(b.loose?h[e.LOOSE]:h[e.FULL]).test(n))return null;try{return new k(n,b)}catch(d){return null}}}function gfa(){if(R_)return S_;R_=!0;var f=jD();return S_=function(c,h){return(c=f(c,h))?c.version:null}}function hfa(){if(T_)return U_;
T_=!0;var f=ip();return U_=function(c,h,e,k){"string"===typeof e&&(k=e,e=void 0);try{return(new f(c,e)).inc(h,k).version}catch(n){return null}}}function Ws(){if(V_)return W_;V_=!0;var f=ip();return W_=function(c,h,e){return(new f(c,e)).compare(new f(h,e))}}function QJ(){if(X_)return Y_;X_=!0;var f=Ws();return Y_=function(c,h,e){return 0<f(c,h,e)}}function KQ(){if(Z_)return $_;Z_=!0;var f=Ws();return $_=function(c,h,e){return 0<=f(c,h,e)}}function LQ(){if(a0)return b0;a0=!0;var f=Ws();return b0=function(c,
h,e){return 0===f(c,h,e)}}function MQ(){if(c0)return d0;c0=!0;var f=Ws();return d0=function(c,h,e){return 0>f(c,h,e)}}function e0(){if(f0)return g0;f0=!0;var f=Ws();return g0=function(c,h,e){return 0!==f(c,h,e)}}function NQ(){if(h0)return i0;h0=!0;var f=Ws();return i0=function(c,h,e){return 0>=f(c,h,e)}}function j0(){if(k0)return l0;k0=!0;var f=LQ(),c=e0(),h=QJ(),e=KQ(),k=MQ(),n=NQ();return l0=function(b,d,m,a){switch(d){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=
m.version),b===m;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof m&&(m=m.version),b!==m;case "":case "=":case "==":return f(b,m,a);case "!=":return c(b,m,a);case ">":return h(b,m,a);case ">=":return e(b,m,a);case "<":return k(b,m,a);case "<=":return n(b,m,a);default:throw new TypeError("Invalid operator: "+d);}}}function ifa(){if(m0)return n0;m0=!0;var f=ip();return n0=function(c,h){return(new f(c,h)).major}}function jfa(){if(o0)return p0;o0=!0;var f=ip(),c=jD(),h=iD(),e=h.re,
k=h.t;return p0=function(n,b){if(n instanceof f)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var d=null;if(b.rtl){for(var m;(m=e[k.COERCERTL].exec(n))&&(!d||d.index+d[0].length!==n.length);)d&&m.index+m[0].length===d.index+d[0].length||(d=m),e[k.COERCERTL].lastIndex=m.index+m[1].length+m[2].length;e[k.COERCERTL].lastIndex=-1}else d=n.match(e[k.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),b)}}function Xs(){if(q0)return OQ;q0=!0;var f=
function(I,M){var L=this;M&&"object"===typeof M||(M={loose:!!M,includePrerelease:!1});if(I instanceof f)return I.loose===!!M.loose&&I.includePrerelease===!!M.includePrerelease?I:new f(I.raw,M);if(I instanceof c)return(this||Jl).raw=I.value,(this||Jl).set=[[I]],this.format(),this||Jl;(this||Jl).options=M;(this||Jl).loose=!!M.loose;(this||Jl).includePrerelease=!!M.includePrerelease;(this||Jl).raw=I;(this||Jl).set=I.split(/\s*\|\|\s*/).map(function(S){return L.parseRange(S.trim())}).filter(function(S){return S.length});
if(!(this||Jl).set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()};f.prototype.format=function(){(this||Jl).range=(this||Jl).set.map(function(I){return I.join(" ").trim()}).join("||").trim();return(this||Jl).range};f.prototype.toString=function(){return(this||Jl).range};f.prototype.parseRange=function(I){var M=this,L=(this||Jl).options.loose;I=I.trim();I=I.replace(L?n[b.HYPHENRANGELOOSE]:n[b.HYPHENRANGE],G((this||Jl).options.includePrerelease));h("hyphen replace",I);I=I.replace(n[b.COMPARATORTRIM],
d);h("comparator trim",I,n[b.COMPARATORTRIM]);I=I.replace(n[b.TILDETRIM],m);I=I.replace(n[b.CARETTRIM],a);I=I.split(/\s+/).join(" ");var S=L?n[b.COMPARATORLOOSE]:n[b.COMPARATOR];return I.split(" ").map(function(R){var aa=R;R=(M||Jl).options;h("comp",aa,R);aa=y(aa,R);h("caret",aa);aa=r(aa,R);h("tildes",aa);aa=E(aa,R);h("xrange",aa);h("replaceStars",aa,R);aa=aa.trim().replace(n[b.STAR],"");h("stars",aa);return aa}).join(" ").split(/\s+/).map(function(R){var aa=(M||Jl).options;h("replaceGTE0",R,aa);
return R.trim().replace(n[aa.includePrerelease?b.GTE0PRE:b.GTE0],"")}).filter((this||Jl).options.loose?function(R){return!!R.match(S)}:function(){return!0}).map(function(R){return new c(R,(M||Jl).options)})};f.prototype.intersects=function(I,M){if(!(I instanceof f))throw new TypeError("a Range is required");return(this||Jl).set.some(function(L){return g(L,M)&&I.set.some(function(S){return g(S,M)&&L.every(function(R){return S.every(function(aa){return R.intersects(aa,M)})})})})};f.prototype.test=function(I){if(!I)return!1;
if("string"===typeof I)try{I=new e(I,(this||Jl).options)}catch(ra){return!1}for(var M=0;M<(this||Jl).set.length;M++){a:{var L=(this||Jl).set[M];for(var S=I,R=(this||Jl).options,aa=0;aa<L.length;aa++)if(!L[aa].test(S)){L=!1;break a}if(S.prerelease.length&&!R.includePrerelease){for(R=0;R<L.length;R++)if(h(L[R].semver),L[R].semver!==c.ANY&&0<L[R].semver.prerelease.length&&(aa=L[R].semver,aa.major===S.major&&aa.minor===S.minor&&aa.patch===S.patch)){L=!0;break a}L=!1}else L=!0}if(L)return!0}return!1};
OQ=f;var c=RJ(),h=PJ(),e=ip(),k=iD(),n=k.re,b=k.t,d=k.comparatorTrimReplace,m=k.tildeTrimReplace,a=k.caretTrimReplace,g=function(I,M){var L=!0;I=I.slice();for(var S=I.pop();L&&I.length;)L=I.every(function(R){return S.intersects(R,M)}),S=I.pop();return L},l=function(I){return!I||"x"===I.toLowerCase()||"*"===I},r=function(I,M){return I.trim().split(/\s+/).map(function(L){return v(L,M)}).join(" ")},v=function(I,M){return I.replace(M.loose?n[b.TILDELOOSE]:n[b.TILDE],function(L,S,R,aa,ra){h("tilde",I,
L,S,R,aa,ra);l(S)?L="":l(R)?L=">="+S+".0.0 <"+(+S+1)+".0.0-0":l(aa)?L=">="+S+"."+R+".0 <"+S+"."+(+R+1)+".0-0":ra?(h("replaceTilde pr",ra),L=">="+S+"."+R+"."+aa+"-"+ra+" <"+S+"."+(+R+1)+".0-0"):L=">="+S+"."+R+"."+aa+" <"+S+"."+(+R+1)+".0-0";h("tilde return",L);return L})},y=function(I,M){return I.trim().split(/\s+/).map(function(L){return A(L,M)}).join(" ")},A=function(I,M){h("caret",I,M);var L=M.includePrerelease?"-0":"";return I.replace(M.loose?n[b.CARETLOOSE]:n[b.CARET],function(S,R,aa,ra,Ea){h("caret",
I,S,R,aa,ra,Ea);l(R)?S="":l(aa)?S=">="+R+".0.0"+L+" <"+(+R+1)+".0.0-0":l(ra)?S="0"===R?">="+R+"."+aa+".0"+L+" <"+R+"."+(+aa+1)+".0-0":">="+R+"."+aa+".0"+L+" <"+(+R+1)+".0.0-0":Ea?(h("replaceCaret pr",Ea),S="0"===R?"0"===aa?">="+R+"."+aa+"."+ra+"-"+Ea+" <"+R+"."+aa+"."+(+ra+1)+"-0":">="+R+"."+aa+"."+ra+"-"+Ea+" <"+R+"."+(+aa+1)+".0-0":">="+R+"."+aa+"."+ra+"-"+Ea+" <"+(+R+1)+".0.0-0"):(h("no pr"),S="0"===R?"0"===aa?">="+R+"."+aa+"."+ra+L+" <"+R+"."+aa+"."+(+ra+1)+"-0":">="+R+"."+aa+"."+ra+L+" <"+R+
"."+(+aa+1)+".0-0":">="+R+"."+aa+"."+ra+" <"+(+R+1)+".0.0-0");h("caret return",S);return S})},E=function(I,M){h("replaceXRanges",I,M);return I.split(/\s+/).map(function(L){return F(L,M)}).join(" ")},F=function(I,M){I=I.trim();return I.replace(M.loose?n[b.XRANGELOOSE]:n[b.XRANGE],function(L,S,R,aa,ra,Ea){h("xRange",I,L,S,R,aa,ra,Ea);var K=l(R),Z=K||l(aa);ra=Z||l(ra);"="===S&&ra&&(S="");Ea=M.includePrerelease?"-0":"";K?L=">"===S||"<"===S?"<0.0.0-0":"*":S&&ra?(Z&&(aa=0),ra=0,">"===S?(S=">=",Z?(R=+R+
1,aa=0):aa=+aa+1,ra=0):"<="===S&&(S="<",Z?R=+R+1:aa=+aa+1),"<"===S&&(Ea="-0"),L=S+R+"."+aa+"."+ra+Ea):Z?L=">="+R+".0.0"+Ea+" <"+(+R+1)+".0.0-0":ra&&(L=">="+R+"."+aa+".0"+Ea+" <"+R+"."+(+aa+1)+".0-0");h("xRange return",L);return L})},G=function(I){return function(M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la){L=l(S)?"":l(R)?">="+S+".0.0"+(I?"-0":""):l(aa)?">="+S+"."+R+".0"+(I?"-0":""):ra?">="+L:">="+L+(I?"-0":"");K=l(Z)?"":l(U)?"<"+(+Z+1)+".0.0-0":l(V)?"<"+Z+"."+(+U+1)+".0-0":na?"<="+Z+"."+U+"."+V+"-"+na:I?"<"+Z+
"."+U+"."+(+V+1)+"-0":"<="+K;return(L+" "+K).trim()}};return OQ}function RJ(){if(r0)return PQ;r0=!0;var f=Symbol("SemVer ANY"),c=function(a,g){g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(a instanceof c){if(a.loose===!!g.loose)return a;a=a.value}b("comparator",a,g);(this||Aj).options=g;(this||Aj).loose=!!g.loose;this.parse(a);(this||Aj).value=(this||Aj).semver===f?"":(this||Aj).operator+(this||Aj).semver.version;b("comp",this||Aj)};c.prototype.parse=function(a){var g=a.match((this||
Aj).options.loose?e[k.COMPARATORLOOSE]:e[k.COMPARATOR]);if(!g)throw new TypeError("Invalid comparator: "+a);(this||Aj).operator=void 0!==g[1]?g[1]:"";"="===(this||Aj).operator&&((this||Aj).operator="");(this||Aj).semver=g[2]?new d(g[2],(this||Aj).options.loose):f};c.prototype.toString=function(){return(this||Aj).value};c.prototype.test=function(a){b("Comparator.test",a,(this||Aj).options.loose);if((this||Aj).semver===f||a===f)return!0;if("string"===typeof a)try{a=new d(a,(this||Aj).options)}catch(g){return!1}return n(a,
(this||Aj).operator,(this||Aj).semver,(this||Aj).options)};c.prototype.intersects=function(a,g){if(!(a instanceof c))throw new TypeError("a Comparator is required");g&&"object"===typeof g||(g={loose:!!g,includePrerelease:!1});if(""===(this||Aj).operator)return""===(this||Aj).value?!0:(new m(a.value,g)).test((this||Aj).value);if(""===a.operator)return""===a.value?!0:(new m((this||Aj).value,g)).test(a.semver);var l=(">="===(this||Aj).operator||">"===(this||Aj).operator)&&(">="===a.operator||">"===a.operator),
r=("<="===(this||Aj).operator||"<"===(this||Aj).operator)&&("<="===a.operator||"<"===a.operator),v=(this||Aj).semver.version===a.semver.version,y=(">="===(this||Aj).operator||"<="===(this||Aj).operator)&&(">="===a.operator||"<="===a.operator),A=n((this||Aj).semver,"<",a.semver,g)&&(">="===(this||Aj).operator||">"===(this||Aj).operator)&&("<="===a.operator||"<"===a.operator);a=n((this||Aj).semver,">",a.semver,g)&&("<="===(this||Aj).operator||"<"===(this||Aj).operator)&&(">="===a.operator||">"===a.operator);
return l||r||v&&y||A||a};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return f}}});PQ=c;var h=iD(),e=h.re,k=h.t,n=j0(),b=PJ(),d=ip(),m=Xs();return PQ}function SJ(){if(s0)return t0;s0=!0;var f=Xs();return t0=function(c,h,e){try{h=new f(h,e)}catch(k){return!1}return h.test(c)}}function kfa(){if(u0)return v0;u0=!0;var f=Xs();return v0=function(c,h){try{return(new f(c,h)).range||"*"}catch(e){return null}}}function lfa(){if(w0)return x0;w0=!0;var f=jD();return x0=
function(c,h){return(c=f(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function mfa(){if(y0)return z0;y0=!0;var f=jD(),c=LQ();return z0=function(h,e){if(c(h,e))return null;h=f(h);e=f(e);var k=h.prerelease.length||e.prerelease.length,n=k?"pre":"",b;for(b in h)if(("major"===b||"minor"===b||"patch"===b)&&h[b]!==e[b])return n+b;return k?"prerelease":""}}function nfa(){if(A0)return B0;A0=!0;var f=ip();return B0=function(c,h){return(new f(c,h)).minor}}function ofa(){if(C0)return D0;C0=!0;var f=ip();
return D0=function(c,h){return(new f(c,h)).patch}}function pfa(){if(E0)return F0;E0=!0;var f=jD();return F0=function(c,h){return(c=f(c,h))&&c.prerelease.length?c.prerelease:null}}function qfa(){if(G0)return H0;G0=!0;var f=Ws();return H0=function(c,h,e){return f(h,c,e)}}function rfa(){if(I0)return J0;I0=!0;var f=Ws();return J0=function(c,h){return f(c,h,!0)}}function QQ(){if(K0)return L0;K0=!0;var f=ip();return L0=function(c,h,e){c=new f(c,e);h=new f(h,e);return c.compare(h)||c.compareBuild(h)}}function sfa(){if(M0)return N0;
M0=!0;var f=QQ();return N0=function(c,h){return c.sort(function(e,k){return f(e,k,h)})}}function tfa(){if(O0)return P0;O0=!0;var f=QQ();return P0=function(c,h){return c.sort(function(e,k){return f(k,e,h)})}}function ufa(){if(Q0)return R0;Q0=!0;var f=Xs();return R0=function(c,h){return(new f(c,h)).set.map(function(e){return e.map(function(k){return k.value}).join(" ").trim().split(" ")})}}function vfa(){if(S0)return T0;S0=!0;var f=ip(),c=Xs();return T0=function(h,e,k){var n=null,b=null,d=null;try{d=
new c(e,k)}catch(m){return null}h.forEach(function(m){!d.test(m)||n&&-1!==b.compare(m)||(n=m,b=new f(n,k))});return n}}function wfa(){if(U0)return V0;U0=!0;var f=ip(),c=Xs();return V0=function(h,e,k){var n=null,b=null,d=null;try{d=new c(e,k)}catch(m){return null}h.forEach(function(m){!d.test(m)||n&&1!==b.compare(m)||(n=m,b=new f(n,k))});return n}}function xfa(){if(W0)return X0;W0=!0;var f=ip(),c=Xs(),h=QJ();return X0=function(e,k){e=new c(e,k);var n=new f("0.0.0");if(e.test(n))return n;n=new f("0.0.0-0");
if(e.test(n))return n;n=null;for(k=0;k<e.set.length;++k)e.set[k].forEach(function(b){var d=new f(b.semver.version);switch(b.operator){case ">":0===d.prerelease.length?d.patch++:d.prerelease.push(0),d.raw=d.format();case "":case ">=":if(!n||h(n,d))n=d;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}});return n&&e.test(n)?n:null}}function RQ(){if(Y0)return Z0;Y0=!0;var f=ip(),c=RJ(),h=c.ANY,e=Xs(),k=SJ(),n=QJ(),b=MQ(),d=NQ(),m=KQ();return Z0=function(a,g,l,r){a=
new f(a,r);g=new e(g,r);switch(l){case ">":var v=n;l=d;var y=b;var A=">";var E=">=";break;case "<":v=b;l=m;y=n;A="<";E="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(k(a,g,r))return!1;for(var F={},G=0;G<g.set.length;F={$jscomp$loop$prop$high$2235:F.$jscomp$loop$prop$high$2235,$jscomp$loop$prop$low$2236:F.$jscomp$loop$prop$low$2236},++G){var I=g.set[G];F.$jscomp$loop$prop$high$2235=null;F.$jscomp$loop$prop$low$2236=null;I.forEach(function(M){return function(L){L.semver===
h&&(L=new c(">=0.0.0"));M.$jscomp$loop$prop$high$2235=M.$jscomp$loop$prop$high$2235||L;M.$jscomp$loop$prop$low$2236=M.$jscomp$loop$prop$low$2236||L;v(L.semver,M.$jscomp$loop$prop$high$2235.semver,r)?M.$jscomp$loop$prop$high$2235=L:y(L.semver,M.$jscomp$loop$prop$low$2236.semver,r)&&(M.$jscomp$loop$prop$low$2236=L)}}(F));if(F.$jscomp$loop$prop$high$2235.operator===A||F.$jscomp$loop$prop$high$2235.operator===E||(!F.$jscomp$loop$prop$low$2236.operator||F.$jscomp$loop$prop$low$2236.operator===A)&&l(a,
F.$jscomp$loop$prop$low$2236.semver)||F.$jscomp$loop$prop$low$2236.operator===E&&y(a,F.$jscomp$loop$prop$low$2236.semver))return!1}return!0}}function yfa(){if($0)return a1;$0=!0;var f=RQ();return a1=function(c,h,e){return f(c,h,">",e)}}function zfa(){if(b1)return c1;b1=!0;var f=RQ();return c1=function(c,h,e){return f(c,h,"<",e)}}function Afa(){if(d1)return e1;d1=!0;var f=Xs();return e1=function(c,h,e){c=new f(c,e);h=new f(h,e);return c.intersects(h)}}function Bfa(){if(f1)return g1;f1=!0;var f=SJ(),
c=Ws();return g1=function(h,e,k){var n=[],b=null,d=null;h=h.sort(function(g,l){return c(g,l,k)});for(var m=$jscomp.makeIterator(h),a=m.next();!a.done;a=m.next())a=a.value,f(a,e,k)?(d=a,b||(b=a)):(d&&n.push([b,d]),b=d=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())m=$jscomp.makeIterator(d.value),d=m.next().value,m=m.next().value,d===m?b.push(d):m||d!==h[0]?m?d===h[0]?b.push("<="+m):b.push(d+" - "+m):b.push(">="+d):b.push("*");h=b.join(" || ");return h.length<
("string"===typeof e.raw?e.raw:String(e)).length?h:e}}function Cfa(){if(h1)return i1;h1=!0;var f=Xs(),c=RJ().ANY,h=SJ(),e=Ws(),k=function(d,m,a){if(1===d.length&&d[0].semver===c)return 1===m.length&&m[0].semver===c;var g=new Set,l,r,v=$jscomp.makeIterator(d);for(d=v.next();!d.done;d=v.next())d=d.value,">"===d.operator||">="===d.operator?l=n(l,d,a):"<"===d.operator||"<="===d.operator?r=b(r,d,a):g.add(d.semver);if(1<g.size)return null;if(l&&r){var y=e(l.semver,r.semver,a);if(0<y||0===y&&(">="!==l.operator||
"<="!==r.operator))return null}for(d=$jscomp.makeIterator(g).next();!d.done;){y=d.value;if(l&&!h(y,String(l),a)||r&&!h(y,String(r),a))return null;l=$jscomp.makeIterator(m);for(d=l.next();!d.done;d=l.next())if(!h(y,String(d.value),a))return!1;return!0}m=$jscomp.makeIterator(m);for(d=m.next();!d.done;d=m.next()){d=d.value;var A=A||">"===d.operator||">="===d.operator;var E=E||"<"===d.operator||"<="===d.operator;if(l)if(">"===d.operator||">="===d.operator){if(g=n(l,d,a),g===d)return!1}else if(">="===
l.operator&&!h(l.semver,String(d),a))return!1;if(r)if("<"===d.operator||"<="===d.operator){if(g=b(r,d,a),g===d)return!1}else if("<="===r.operator&&!h(r.semver,String(d),a))return!1;if(!d.operator&&(r||l)&&0!==y)return!1}return l&&E&&!r&&0!==y||r&&A&&!l&&0!==y?!1:!0},n=function(d,m,a){if(!d)return m;a=e(d.semver,m.semver,a);return 0<a?d:0>a?m:">"===m.operator&&">="===d.operator?m:d},b=function(d,m,a){if(!d)return m;a=e(d.semver,m.semver,a);return 0>a?d:0<a?m:"<"===m.operator&&"<="===d.operator?m:d};
return i1=function(d,m,a){d=new f(d,a);m=new f(m,a);var g=!1;d=$jscomp.makeIterator(d.set);var l=d.next();a:for(;!l.done;l=d.next()){l=l.value;for(var r=$jscomp.makeIterator(m.set),v=r.next();!v.done;v=r.next())if(v=k(l,v.value,a),g=g||null!==v,v)continue a;if(g)return!1}return!0}}function UF(f,c,h,e){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;e=void 0===e?0:e;var k,n,b,d,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:k=
c;n=k.maxDepth;b=k.excludes;if(0<n&&e>n)return F.return(h);F.setCatchFinallyBlocks(2);d=JSON;m=d.parse;return F.yield(gn.resource(f).join("package.json").read(),4);case 4:a=m.call(d,F.yieldResult);g=a.name+"@"+a.version;if(h[g]||b.includes(a.name))return F.return(h);h[g]=Object.assign({url:f},gn.obj.select(a,["name","version","dependencies","devDependencies","main"]));F.leaveTryBlock(3);break;case 2:return F.enterCatchBlock(),F.return(h);case 3:return F.setCatchFinallyBlocks(5),F.yield(gn.resource(f).join("node_modules").dirList(1),
7);case 7:l=F.yieldResult;F.leaveTryBlock(6);break;case 5:return F.enterCatchBlock(),F.return(h);case 6:r=$jscomp.makeIterator(l),v=r.next();case 8:if(v.done){F.jumpTo(10);break}A=y=v.value;E=A.url;return F.yield(UF(E,c,h,e+1),11);case 11:h=F.yieldResult;v=r.next();F.jumpTo(8);break;case 10:return F.return(h)}})}function TJ(f,c){var h=Object.assign({},f.dependencies,{},f.devDependencies);return Object.keys(h).reduce(function(e,k){var n=h[k],b=gn.obj.values(c).find(function(m){var a=m.version;return m.name===
k&&lively.modules.semver.satisfies(a,n)})||{},d=b.name;b=b.version;e[k]=d?d+"@"+b:void 0;return e},{})}function UJ(f){function c(k,n){var b=k+"@"+n;if(b in e)return e[b];var d=h.find(function(a){var g=a.version;return a.name===k&&lively.modules.semver.satisfies(g,n)})||{},m=d.name;d=d.version;return e[b]=m?m+"@"+d:void 0}var h=gn.obj.values(f),e={};return Object.keys(f).reduce(function(k,n){var b=f[n],d=Object.assign({},b.dependencies,{},b.devDependencies);k[n]=Object.keys(d).map(function(m){return c(m,
d[m])}).filter(function(m){return!!m});return k},{})}function VJ(f,c){yd.defaultSystem=f;c&&(yd.GLOBAL.System=f);return f}function WJ(){yd._wrapModuleResolution(yd.defaultSystem)}function XJ(){yd._unwrapModuleResolution(yd.defaultSystem)}function YJ(){return Object.keys(yd.requireMap())}function VF(f){return yd._module(yd.defaultSystem,f)}function ZJ(f,c){return yd._isModuleLoaded(yd.defaultSystem,f,c)}function $J(f,c){return yd._doesModuleExist(yd.defaultSystem,f,c)}function aK(){return yd._printSystemConfig(yd.defaultSystem)}
function bK(f,c){return yd._whenLoaded(yd.defaultSystem,f,c)}function cK(f){return yd._importPackage(yd.defaultSystem,f)}function dK(f,c){return yd._registerPackage(yd.defaultSystem,f,c)}function eK(f){return yd._removePackage(yd.defaultSystem,f)}function fK(f,c){return yd._reloadPackage(yd.defaultSystem,f,c)}function gK(){return yd.getPackageSpecs(yd.defaultSystem)}function hK(f,c){return yd._getPackage(yd.defaultSystem,f,void 0===c?!1:c)}function iK(f){return yd.Package.forModuleId(yd.defaultSystem,
f)}function jK(f){return yd._ensurePackage(yd.defaultSystem,f)}function kK(f,c){return yd._applyPackageConfig(yd.defaultSystem,f,c)}function lK(f,c){return yd._lookupPackage(yd.defaultSystem,f,void 0===c?!1:c)}function mK(f,c,h){return yd._moduleSourceChange(yd.defaultSystem,f,c,h)}function nK(){return yd.computeRequireMap(yd.defaultSystem)}function oK(f,c){return yd._isHookInstalled(yd.defaultSystem,f,c)}function pK(f,c){return yd._installHook(yd.defaultSystem,f,c)}function qK(f,c){return yd._removeHook(yd.defaultSystem,
f,c)}function rK(){yd._wrapModuleLoad(yd.defaultSystem)}function sK(){yd._unwrapModuleLoad(yd.defaultSystem)}function SQ(f){return f&&f.__ref__}function WF(f,c){return Cf.serialize(f,Cf.normalizeOptions(c))}function XF(f,c){c=void 0===c?{}:c;return Cf.deserializeWithMigrations(f,c.migrations||Cf.migrations,Cf.normalizeOptions(c))}function tK(f){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(c=Cf,h=c.loadMorphFromSnapshot,e.yield(f.readJson(),2)):e.return(h.call(c,
e.yieldResult))})}function TQ(f,c,h){f=void 0===f?Cf.MorphicEnv.default().world:f;var e,k,n,b,d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:e=h||{};k=void 0===e.showIndicator?!0:e.showIndicator;n=void 0===e.changeName?!0:e.changeName;b=void 0===e.changeBrowserURL?!0:e.changeBrowserURL;c||(d=Cf.resource(document.location.href),m=d.name(),c=d.join("../"+m.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&
(c=Cf.resource(c));n&&(f.name=c.nameWithoutExt());b&&(a=encodeURI(h.pathForBrowserHistory||Cf.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));if(!k){y.jumpTo(2);break}return y.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return l=y.yieldResult,r=l.LoadingIndicator,g=r.open("string"===typeof k?k:"Snapshotting..."),y.yield(g.whenRendered(),4);case 4:return y.yield(Cf.promise.delay(100),2);case 2:return y.setFinallyBlock(6),
y.yield(Cf.createMorphSnapshot(f,h),8);case 8:return v=y.yieldResult,g.label="Uploading...",y.yield(g.whenRendered(),9);case 9:return y.return(c.writeJson(v));case 6:y.enterFinallyBlock(),g&&g.remove(),y.leaveFinallyBlock(0)}})}function uK(f){return Cf.deserializeMorph(Cf.serializeMorph(f),{migrations:kD,reinitializeIds:!0})}function BA(f,c){c=void 0===c?{}:c;var h,e,k,n,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:h=
System.get("@system-env").node;e=c;k=void 0===e.addPreview?!h:e.addPreview;n=void 0===e.previewWidth?100:e.previewWidth;b=void 0===e.previewHeight?100:e.previewHeight;d=void 0===e.previewType?"png":e.previewType;m=void 0===e.testLoad?!0:e.testLoad;a=void 0===e.addPackages?!0:e.addPackages;g=void 0===e.ignoreMorphs?[]:e.ignoreMorphs;l=void 0===e.frozenSnapshot?!1:e.frozenSnapshot;r=Cf.serializeMorph(f,{frozenSnapshot:l});if(!a){Ea.jumpTo(2);break}return Ea.yield(Cf.findRequiredPackagesOfSnapshot(r),
3);case 3:v=Ea.yieldResult,y=v.packages,A=v.depMap,r.packages=y,r.packageDepMap=A;case 2:if(!k){Ea.jumpTo(4);break}return Ea.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return E=Ea.yieldResult,F=E.renderMorphToDataURI,G=n||f.width,I=b||f.height,M=d||"png",Ea.setCatchFinallyBlocks(6),L=r,Ea.yield(F(f,{width:G,height:I,type:M,ignoreMorphs:g}),8);case 8:L.preview=Ea.yieldResult;Ea.leaveTryBlock(4);break;case 6:return S=Ea.enterCatchBlock(),console.error("Error generating morph preview: "+
S),R=r,Ea.yield(F(Cf.morph({fill:f.fill,width:G,height:I}),{width:G,height:I,type:M,ignoreMorphs:g}),9);case 9:R.preview=Ea.yieldResult;case 4:r.preview||(r.preview="");if(!m){Ea.jumpTo(10);break}Ea.setCatchFinallyBlocks(11);return Ea.yield(Cf.loadMorphFromSnapshot(r,{highlightBuggyMorphs:!0,rootObject:f}),13);case 13:aa=Ea.yieldResult;if(!aa||!aa.isMorph)throw Error("reloading snapshot does not create a morph!");Ea.leaveTryBlock(10);break;case 11:throw ra=Ea.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
ra.stack);case 10:return Ea.return(r)}})}function Pu(f,c){return Cf.deserializeMorph(f,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Cf.loadPackagesAndModulesOfSnapshot,migrations:kD},c))}function j1(f,c){var h,e,k,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!f.isDirectory())return d=c,m=f.name(),a.yield(f.read(),9);h=c[f.name()]={};return a.yield(f.dirList(),4);case 4:e=a.yieldResult,k=$jscomp.makeIterator(e),
n=k.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(j1(b,h),6);case 6:n=k.next();a.jumpTo(5);break;case 9:return d[m]=a.yieldResult,a.return(c)}})}function k1(f,c){c=void 0===c?[]:c;var h=[];if(f.hasOwnProperty("package.json")){var e=c.slice(1).reduceRight(function(n,b){return n.join(b)},Cf.resource(c[0])).url;h.push({files:f,url:e,requiredPackages:f.requiredPackages})}for(var k in f)"object"===typeof f[k]&&h.push.apply(h,$jscomp.arrayFromIterable(k1(f[k],c.concat(k))));return h}
function UQ(f){var c=Cf.findPackagesInFileSpec(f.packages),h={};f=f.packageDepMap;if(!f)return c;c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next())e=e.value,h[e.url]=e;return Cf.arr.flatten(Cf.graph.sortByReference(f)).map(function(k){return h[k]})}function YF(f){var c,h,e,k,n,b,d,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:if(!f.packagesToRegister){G.jumpTo(2);break}c=$jscomp.makeIterator(f.packagesToRegister);h=c.next();
case 3:if(h.done){G.jumpTo(2);break}e=h.value;G.setCatchFinallyBlocks(6);return G.yield(Cf.registerPackage(e),8);case 8:G.leaveTryBlock(4);break;case 6:G.enterCatchBlock(),console.error("Failed to register package "+e);case 4:h=c.next();G.jumpTo(3);break;case 2:if(!f.packages){G.jumpTo(9);break}k=Cf.packagesOfSnapshot(f);n=$jscomp.makeIterator(k);b=n.next();case 10:if(b.done){G.jumpTo(9);break}m=d=b.value;a=m.files;g=m.url;if(r=(l=Cf.lookupPackage(g))&&l.pkg){v=r.version;y=JSON.parse(a["package.json"]);
A=y.version;try{if(A&&v&&Cf.semver.lte(A,v,!0)){console.log("[load morph] Package "+g+" is loaded in version "+v+(" which is newer than "+A+". Will NOT load older variant."));G.jumpTo(11);break}}catch(I){console.warn("Error in package version comparison: ",I)}}return G.yield(Cf.createFiles(g,a),13);case 13:return G.yield(Cf.ensurePackage(g),14);case 14:return r=G.yieldResult,G.yield(r.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return G.yield(System.import("lively.classes/object-classes.js"),
16);case 16:E=G.yieldResult,F=E.default,Cf.objectScriptingEnabled=!!F,Cf.objectScriptingEnabled&&F.withId(r.name);case 11:b=n.next();G.jumpTo(10);break;case 9:return G.yield(Promise.all(Cf.requiredModulesOfSnapshot(f).map(function(I){return(System.get(I)?null:System.import(I)).catch(function(M){return console.error("Error loading "+I,M)})})),0)}})}function vK(f){var c,h,e,k,n,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:c=
{},h=f.snapshot,e=[],k={},n=!0,b={},d={},a=qa.forIn(h);case 2:if(null==(m=a.getNext())){qa.jumpTo(4);break}g=h[m]["lively.serializer-class-info"];if(!(g&&g.module&&g.module.package)){qa.jumpTo(5);break}l=Cf.getPackage(g.module.package.name);if(!l.address.startsWith("local://")){qa.jumpTo(5);break}return qa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return r=qa.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2238=r.default,qa.yield(System.import("lively.classes/util.js"),8);case 8:v=
qa.yieldResult,y=v.withSuperclasses,Cf.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2238,A=d.$jscomp$loop$prop$ObjectPackage$2238.forSystemPackage(l),E=A.objectModule.systemModule._recorder[g.className],F=y(E),F.forEach(function(La){return function(Lb){(Lb=La.$jscomp$loop$prop$ObjectPackage$2238.lookupPackageForClass(Lb))&&e.push(Lb.systemPackage)}}(d));case 5:if(G=h[m].props.metadata)if(I=void 0,G.value&&G.value.__ref__?(M=h[G.value.id],M.props.externalPackages&&(I=M.props.externalPackages.value)):
I=G.externalPackages,I)for(n=!0,L=0;L<I.length;L++)k[I[L]]=!0;d={$jscomp$loop$prop$ObjectPackage$2238:d.$jscomp$loop$prop$ObjectPackage$2238};qa.jumpTo(2);break;case 4:n&&(f.packagesToRegister=Object.keys(k)),S=[],R=$jscomp.makeIterator(e),aa=R.next();case 9:if(aa.done)return e=[].concat($jscomp.arrayFromIterable(S),$jscomp.arrayFromIterable(e)),qa.yield(Promise.all(e.map(function(La){var Lb,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){if(1==dc.nextAddress)return Lb=Cf.resource(La.address).asDirectory(),
dc.yield(Cf.resourceToJSON(Lb,{}),2);qc=dc.yieldResult;c[Lb.parent().url]||(c[Lb.parent().url]={});Object.assign(c[Lb.parent().url],qc);b[La.url]||(b[La.url]=[]);dc.jumpToEnd()})})),16);ra=aa.value;Ea=$jscomp.makeIterator(ra.modules());K=Ea.next();case 12:if(K.done){aa=R.next();qa.jumpTo(9);break}Z=K.value;if(Z.id.endsWith(".json")){qa.jumpTo(13);break}U=$jscomp;V=U.makeIterator;return qa.yield(Z.imports(),15);case 15:for(na=V.call(U,qa.yieldResult),la=na.next();!la.done;la=na.next())if(jb=ya=la.value,
gb=jb.fromModule,ka=Cf.module(gb).package())ia=ka.config,ia.lively&&ia.lively.isObjectPackage&&(S.push(ka),b[ra.url]?Cf.arr.pushIfNotIncluded(b[ra.url],ka.url):b[ra.url]=[ka.url]);case 13:K=Ea.next();qa.jumpTo(12);break;case 16:return qa.return({packages:c,depMap:b})}})}function wK(){VQ=!0;for(var f,c,h=ZF.length;h;){c=ZF;ZF=[];for(f=-1;++f<h;)c[f]();h=ZF.length}VQ=!1}function lD(f,c,h){var e=h[h.length-1];f===e.element&&(h.pop(),e=h[h.length-1]);h=e.element;e=e.index;Array.isArray(h)?h.push(f):e===
c.length-2?(c=c.pop(),h[c]=f):c.push(f)}function Mk(){Mk.init.call(this)}function xK(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f);}function l1(f,c,h,e){var k,n,b;if(xK(h),void 0===(n=f._events)?(n=f._events=Object.create(null),f._eventsCount=0):(void 0!==n.newListener&&(f.emit("newListener",c,h.listener?h.listener:h),n=f._events),b=n[c]),void 0===b)n[c]=h,++f._eventsCount;else if("function"==typeof b?b=n[c]=e?[h,b]:[b,
h]:e?b.unshift(h):b.push(h),0<(k=void 0===f._maxListeners?Mk.defaultMaxListeners:f._maxListeners)&&b.length>k&&!b.warned)b.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=f,h.type=c,h.count=b.length,console&&console.warn&&console.warn(h);return f}function Dfa(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=
!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m1(f,c,h){f={fired:!1,wrapFn:void 0,target:f,type:c,listener:h};c=Dfa.bind(f);return c.listener=h,f.wrapFn=c,c}function n1(f,c,h){f=f._events;if(void 0===f)return[];c=f[c];if(void 0===c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),f=0;f<h.length;++f)h[f]=c[f].listener||c[f];else h=o1(c,c.length);return h}function p1(f){var c=this._events;if(void 0!==
c){f=c[f];if("function"==typeof f)return 1;if(void 0!==f)return f.length}return 0}function o1(f,c){for(var h=Array(c),e=0;e<c;++e)h[e]=f[e];return h}function mD(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function qy(){this._store={}}function $F(f){this._store=new qy;if(f&&Array.isArray(f))for(var c=0,h=f.length;c<h;c++)this.add(f[c])}function hn(f){var c;if(!f||"object"!==typeof f)return f;if(Array.isArray(f)){var h=[];var e=0;for(c=f.length;e<c;e++)h[e]=hn(f[e]);return h}if(f instanceof
Date)return f.toISOString();if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer||"undefined"!==typeof Blob&&f instanceof Blob)return f instanceof ArrayBuffer?"function"===typeof f.slice?f=f.slice(0):(e=new ArrayBuffer(f.byteLength),h=new Uint8Array(e),f=new Uint8Array(f),h.set(f),f=e):(e=f.size,h=f.type,f="function"===typeof f.slice?f.slice(0,e,h):f.webkitSlice(0,e,h)),f;h=Object.getPrototypeOf(f);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&q1.call(h)==Efa);if(!h)return f;
h={};for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(c=hn(f[e]),"undefined"!==typeof c&&(h[e]=c));return h}function r1(f){var c=!1;return nD(function(h){if(c)throw Error("once called more than once");c=!0;f.apply(this,h)})}function s1(f){return nD(function(c){c=hn(c);var h=this,e="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var d;try{var m=r1(function(a,g){a?b(a):n(g)});c.push(m);(d=f.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(a){b(a)}});e&&k.then(function(n){e(null,
n)},e);return k})}function Ffa(f,c,h){if(f.constructor.listeners("debug").length){for(var e=["api",f.name,c],k=0;k<h.length-1;k++)e.push(h[k]);f.constructor.emit("debug",e);var n=h[h.length-1];h[h.length-1]=function(b,d){var m=["api",f.name,c];m=m.concat(b?["error",b]:["success",d]);f.constructor.emit("debug",m);n(b,d)}}}function Nm(f,c){return s1(nD(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));
var e=this;Ffa(e,f,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(k,n){e.taskqueue.addTask(function(b){b?n(b):k(e[f].apply(e,h))})})}))}function aG(f,c){for(var h={},e=0,k=c.length;e<k;e++){var n=c[e];n in f&&(h[n]=f[n])}return h}function t1(f){return f}function Gfa(f){return[{ok:f}]}function u1(f,c,h){function e(){var v=[];g.forEach(function(y){y.docs.forEach(function(A){v.push({id:y.id,docs:[A]})})});h(null,{results:v})}function k(){if(!(r>=l.length)){var v=l.slice(r,Math.min(r+
6,l.length));n(v,r);r+=v.length}}function n(v,y){v.forEach(function(A,E){var F=y+E;E=d.get(A);var G=aG(E[0],["atts_since","attachments"]);G.open_revs=E.map(function(M){return M.rev});G.open_revs=G.open_revs.filter(t1);var I=t1;0===G.open_revs.length&&(delete G.open_revs,I=Gfa);["revs","attachments","binary","ajax","latest"].forEach(function(M){M in c&&(G[M]=c[M])});f.get(A,G,function(M,L){M=M?[{error:M}]:I(L);g[F]={id:A,docs:M};++a===m&&e();k()})})}var b=c.docs,d=new Aq;b.forEach(function(v){d.has(v.id)?
d.get(v.id).push(v):d.set(v.id,[v])});var m=d.size,a=0,g=Array(m),l=[];d.forEach(function(v,y){l.push(y)});var r=0;k()}function Hfa(f){bG&&addEventListener("storage",function(c){f.emit(c.key)})}function oD(){Sp.EventEmitter.call(this);this._listeners={};Hfa(this)}function Gr(f){if("undefined"!==typeof console&&"function"===typeof console[f]){var c=Array.prototype.slice.call(arguments,1);console[f].apply(console,c)}}function Ifa(f){var c=0;f||(c=2E3);f=parseInt(f,10)||0;c=parseInt(c,10);c=c!==c||c<=
f?(f||1)<<1:c+1;6E5<c&&(f=3E5,c=6E5);return~~((c-f)*Math.random()+f)}function WQ(f,c){Gr("info","The above "+f+" is totally normal. "+c)}function el(f,c,h){Error.call(this,h);this.status=f;this.name=c;this.message=h;this.error=!0}function hj(f,c){function h(e){for(var k in f)"function"!==typeof f[k]&&(this[k]=f[k]);void 0!==e&&(this.reason=e)}h.prototype=el.prototype;return new h(c)}function pD(f){if("object"!==typeof f){var c=f;f=v1;f.data=c}"error"in f&&"conflict"===f.error&&(f.name="conflict",
f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f}function XQ(f){var c={},h=f.filter&&"function"===typeof f.filter;c.query=f.query_params;return function(e){e.doc||(e.doc={});var k;if(k=h)try{k=!(0,f.filter)(e.doc,c)}catch(b){k=hj(yK,"Filter function threw: "+b.toString())}if("object"===typeof k)return k;if(k)return!1;if(!f.include_docs)delete e.doc;else if(!f.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&
(e.doc._attachments[n].stub=!0);return!0}}function zK(f){for(var c=[],h=0,e=f.length;h<e;h++)c=c.concat(f[h]);return c}function w1(f){var c;f?"string"!==typeof f?c=hj(x1):/^_/.test(f)&&!/^_(design|local)/.test(f)&&(c=hj(Jfa)):c=hj(Kfa);if(c)throw c;}function Qu(f){return"boolean"===typeof f._remote?f._remote:"function"===typeof f.type?(Gr("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===f.type()):!1}function YQ(f){if(!f)return null;var c=f.split("/");return 2===
c.length?c:1===c.length?[f,f]:null}function y1(f){return(f=YQ(f))?f.join("/"):null}function z1(f){f=Lfa.exec(f);for(var c={},h=14;h--;){var e=A1[h],k=f[h]||"",n=-1!==["user","password"].indexOf(e);c[e]=n?decodeURIComponent(k):k}c.queryKey={};c[A1[12]].replace(Mfa,function(b,d,m){d&&(c.queryKey[d]=m)});return c}function ZQ(f,c){var h=[],e=[],k;for(k in c)c.hasOwnProperty(k)&&(h.push(k),e.push(c[k]));h.push(f);return Function.apply(null,h).apply(null,e)}function AK(f,c,h){return new Promise(function(e,
k){f.get(c,function(n,b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return e({updated:!1,rev:n});b._id=c;b._rev=n;e(Nfa(f,b,h))})})}function Nfa(f,c,h){return f.put(c).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return AK(f,c._id,h)})}function $Q(f,c){f=f||[];c=c||{};try{return new Blob(f,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),e=0;e<f.length;e+=1)h.append(f[e]);return h.getBlob(c.type)}}function aR(f,c){for(var h=f.length,e=new ArrayBuffer(h),k=new Uint8Array(e),n=0;n<h;n++)k[n]=f.charCodeAt(n);return $Q([e],{type:c})}function bR(f,c){return aR(atob(f),c)}function B1(f,c){var h=new FileReader,e="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(e)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,d=
0;d<b;d++)k+=String.fromCharCode(n[d]);c(k)};e?h.readAsBinaryString(f):h.readAsArrayBuffer(f)}function C1(f,c){B1(f,function(h){c(h)})}function cR(f,c){C1(f,function(h){c(btoa(h))})}function Ofa(f,c){var h=new FileReader;h.onloadend=function(e){e=e.target.result||new ArrayBuffer(0);c(e)};h.readAsArrayBuffer(f)}function Pfa(f,c,h){return f.webkitSlice?f.webkitSlice(c,h):f.slice(c,h)}function Qfa(f,c,h,e,k){if(0<h||e<c.size)c=Pfa(c,h,e);Ofa(c,function(n){f.append(n);k()})}function Rfa(f,c,h,e,k){if(0<
h||e<c.length)c=c.substring(h,e);f.appendBinary(c);k()}function dR(f,c){function h(){Sfa(k)}function e(){var r=g.end(!0);r=btoa(r);c(r);g.destroy()}function k(){var r=a*d,v=r+d;a++;a<m?l(g,f,r,v,h):l(g,f,r,v,e)}var n="string"===typeof f,b=n?f.length:f.size,d=Math.min(32768,b),m=Math.ceil(b/d),a=0,g=n?new BK:new BK.ArrayBuffer,l=n?Rfa:Qfa;k()}function D1(f,c){f=hn(f);if(!c)return E1.v4().replace(/-/g,"").toLowerCase();delete f._rev_tree;return BK.hash(JSON.stringify(f))}function CA(f){f=f.rev_tree.slice();
for(var c;c=f.pop();){var h=c.ids,e=h[2];c=c.pos;if(e.length){h=0;for(var k=e.length;h<k;h++)f.push({pos:c+1,ids:e[h]})}else if(e=!!h[1].deleted,h=h[0],!n||(d!==e?d:b!==c?b<c:n<h)){var n=h;var b=c;var d=e}}return b+"-"+n}function DA(f,c){f=f.slice();for(var h;h=f.pop();){var e=h.pos,k=h.ids,n=k[2];h=c(0===n.length,e,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)f.push({pos:e+1,ids:n[k],ctx:h})}}function Tfa(f,c){return f.pos-c.pos}function eR(f){var c=[];DA(f,function(e,k,n,b,d){e&&c.push({rev:k+
"-"+n,pos:k,opts:d})});c.sort(Tfa).reverse();f=0;for(var h=c.length;f<h;f++)delete c[f].pos;return c}function fR(f){var c=CA(f);f=eR(f.rev_tree);for(var h=[],e=0,k=f.length;e<k;e++){var n=f[e];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function Ufa(f){var c=[];DA(f.rev_tree,function(h,e,k,n,b){"available"!==b.status||h||(c.push(e+"-"+k),b.status="missing")});return c}function F1(f){var c=[];f=f.slice();for(var h;h=f.pop();){var e=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var d=0===k.length;h=h.history?
h.history.slice():[];h.push({id:n,opts:b});d&&c.push({pos:e+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)f.push({pos:e+1,ids:k[n],history:h})}return c.reverse()}function Vfa(f,c){return f.pos-c.pos}function G1(f,c){for(var h,e,k=f.length;c<k;c++){var n=f[c];n=[n.id,n.opts,[]];e?(e[2].push(n),e=n):h=e=n}return h}function Wfa(f,c){return f[0]<c[0]?-1:1}function H1(f,c){c=[{tree1:f,tree2:c}];for(var h=!1;0<c.length;){var e=c.pop(),k=e.tree1;e=e.tree2;if(k[1].status||e[1].status)k[1].status="available"===
k[1].status||"available"===e[1].status?"available":"missing";for(var n=0;n<e[2].length;n++)if(k[2][0]){for(var b=!1,d=0;d<k[2].length;d++)k[2][d][0]===e[2][n][0]&&(c.push({tree1:k[2][d],tree2:e[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];d=e[2][n];for(var m,a=b,g=d,l=Wfa,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,d)}}else h="new_leaf",k[2][0]=e[2][n]}return{conflicts:h,tree:f}}function I1(f,c,h){var e=[],k=!1,n=!1;if(!f.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,
d=f.length;b<d;b++){var m=f[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=H1(m.ids,c.ids),e.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=H1(l.ids,g.ids),l.parent[2][l.parentIdx]=
n.tree,e.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):e.push(m)}else e.push(m)}n||e.push(c);e.sort(Vfa);return{tree:e,conflicts:k||"internal_node"}}function Xfa(f,c){f=F1(f);for(var h,e,k=0,n=f.length;k<n;k++){var b=f[k],d=b.ids;if(d.length>c){h||(h={});var m=d.length-c;var a={pos:b.pos+m,ids:G1(d,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+d[g].id]=!0}else a={pos:b.pos,ids:G1(d,0)};e=e?I1(e,a,!0).tree:[a]}h&&DA(e,function(l,r,v){delete h[r+"-"+v]});return{tree:e,revs:h?Object.keys(h):[]}}function J1(f,
c,h){f=I1(f,c);h=Xfa(f.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:f.conflicts}}function Yfa(f){return f.ids}function Ew(f,c){c||(c=CA(f));c=c.substring(c.indexOf("-")+1);f=f.rev_tree.map(Yfa);for(var h;h=f.pop();){if(h[0]===c)return!!h[1].deleted;f=f.concat(h[2])}}function EA(f){return/^_local/.test(f)}function Zfa(f,c){for(var h=c.rev_tree.slice(),e;e=h.pop();){var k=e.pos,n=e.ids,b=n[0],d=n[1];n=n[2];var m=0===n.length;e=e.history?e.history.slice():[];e.push({id:b,pos:k,opts:d});if(m)for(d=
0,m=e.length;d<m;d++){var a=e[d];if(a.pos+"-"+a.id===f)return k+"-"+b}b=0;for(d=n.length;b<d;b++)h.push({pos:k+1,ids:n[b],history:e})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+f);}function cG(f,c,h){function e(){k.cancel()}Sp.EventEmitter.call(this);var k=this;this.db=f;c=c?hn(c):{};var n=c.complete=r1(function(d,m){d?(m=k,0<("listenerCount"in m?m.listenerCount("error"):Sp.EventEmitter.listenerCount(m,"error"))&&k.emit("error",d)):k.emit("complete",m);k.removeAllListeners();
f.removeListener("destroyed",e)});h&&(k.on("complete",function(d){h(null,d)}),k.on("error",h));f.once("destroyed",e);c.onChange=function(d,m,a){if(!k.isCancelled)try{k.emit("change",d,m,a)}catch(g){Gr("error",'Error in .on("change", function):',g)}};var b=new Promise(function(d,m){c.complete=function(a,g){a?m(a):d(g)}});k.once("cancel",function(){f.removeListener("destroyed",e);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(d){n(null,
d)},n);f.taskqueue.isReady?k.validateChanges(c):f.taskqueue.addTask(function(d){d?c.complete(d):k.isCancelled?k.emit("cancel"):k.validateChanges(c)})}function $fa(f,c,h){var e=[{rev:f._rev}];"all_docs"===h.style&&(e=eR(c.rev_tree).map(function(k){return{rev:k.rev}}));e={id:c.id,changes:e,doc:f};Ew(c,f._rev)&&(e.deleted=!0);h.conflicts&&(e.doc._conflicts=fR(c),e.doc._conflicts.length||delete e.doc._conflicts);return e}function gR(f,c){return function(h,e){h||e[0]&&e[0].error?(h=h||e[0],h.docId=c,f(h)):
f(null,e.length?e[0]:e)}}function aga(f){for(var c=0;c<f.length;c++){var h=f[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var e=Object.keys(h._attachments),k=0;k<e.length;k++){var n=e[k];h._attachments[n]=aG(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}function bga(f,c){var h=f._id;var e=c._id;h=h<e?-1:h>e?1:0;if(0!==h)return h;f=f._revisions?f._revisions.start:0;c=c._revisions?c._revisions.start:0;return f<c?-1:f>c?1:0}function cga(f){var c={},
h=[];DA(f,function(e,k,n,b){k=k+"-"+n;e&&(c[k]=0);void 0!==b&&h.push({from:b,to:k});return k});h.reverse();h.forEach(function(e){c[e.from]=void 0===c[e.from]?1+c[e.to]:Math.min(c[e.from],1+c[e.to])});return c}function dga(f){var c="limit"in f?f.keys.slice(f.skip,f.limit+f.skip):0<f.skip?f.keys.slice(f.skip):f.keys;f.keys=c;f.skip=0;delete f.limit;f.descending&&(c.reverse(),f.descending=!1)}function K1(f){var c=f._compactionQueue[0],h=c.opts,e=c.callback;f.get("_local/compaction").catch(function(){return!1}).then(function(k){k&&
k.last_seq&&(h.last_seq=k.last_seq);f._compact(h,function(n,b){n?e(n):e(null,b);Ru(function(){f._compactionQueue.shift();f._compactionQueue.length&&K1(f)})})})}function Al(){Sp.EventEmitter.call(this);for(var f in Al.prototype)"function"===typeof this[f]&&(this[f]=this[f].bind(this))}function dG(){this.failed=this.isReady=!1;this.queue=[]}function ega(f,c){var h=f.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var e=dj.adapters,k=dj.preferredAdapters;
h=dj.prefix;c=c.adapter;if(!c)for(var n=0;n<k.length;++n)if(c=k[n],"idb"===c&&"websql"in e&&bG&&localStorage["_pouch__websqldb_"+h+f])Gr("log",'PouchDB is downgrading "'+f+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;e=e[c];return{name:(e&&"use_prefix"in e?e.use_prefix:1)?h+f:f,adapter:c}}function fga(f){function c(e){f.removeListener("closed",h);e||f.constructor.emit("destroyed",f.name)}function h(){f.removeListener("destroyed",c);f.constructor.emit("unref",
f)}f.once("destroyed",c);f.once("closed",h);f.constructor.emit("ref",f)}function dj(f,c){if(!(this instanceof dj))return new dj(f,c);var h=this;c=c||{};f&&"object"===typeof f&&(c=f,f=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=hn(c);h.auto_compaction=c.auto_compaction;h.prefix=dj.prefix;if("string"!==typeof f)throw Error("Missing/invalid DB name");var e=ega((c.prefix||"")+f,c);c.name=e.name;c.adapter=c.adapter||e.adapter;h.name=f;h._adapter=c.adapter;
dj.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!dj.adapters[c.adapter]||!dj.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);Al.call(h);h.taskqueue=new dG;h.adapter=c.adapter;dj.adapters[c.adapter].call(h,c,function(k){if(k)return h.taskqueue.fail(k);fga(h);h.emit("created",h);dj.emit("created",h.name);h.taskqueue.ready(h)})}function L1(f,c){for(var h=0,e=c.length;h<e&&(f=f[c[h]],f);h++);return f}function M1(f){for(var c=[],h="",e=0,k=f.length;e<k;e++){var n=f[e];
"."===n?0<e&&"\\"===f[e-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function gga(f){return f[Object.keys(f)[0]]}function eG(f){var c={};f.forEach(function(h){Object.keys(h).forEach(function(e){var k=h[e];"object"!==typeof k&&(k={$eq:k});if(-1<N1.indexOf(e))c[e]=k instanceof Array?k.map(function(b){return eG([b])}):eG([k]);else{var n=c[e]=c[e]||{};Object.keys(k).forEach(function(b){var d=k[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?
"$gte"===b?d>n.$gte&&(n.$gte=d):d>=n.$gte&&(delete n.$gte,n.$gt=d):"undefined"!==typeof n.$gt?"$gte"===b?d>n.$gt&&(delete n.$gt,n.$gte=d):d>n.$gt&&(n.$gt=d):n[b]=d):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?d<n.$lte&&(n.$lte=d):d<=n.$lte&&(delete n.$lte,n.$lt=d):"undefined"!==typeof n.$lt?"$lte"===b?d<n.$lt&&(delete n.$lt,n.$lte=d):d<n.$lt&&(n.$lt=d):n[b]=d):"$ne"===b?"$ne"in n?n.$ne.push(d):n.$ne=[d]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,
delete n.$lte,delete n.$ne,n.$eq=d):n[b]=d})}})});return c}function O1(f){for(var c in f){if(Array.isArray(f))for(var h in f)f[h].$and&&(f[h]=eG(f[h].$and));var e=f[c];"object"===typeof e&&O1(e)}return f}function P1(f,c){for(var h in f){"$and"===h&&(c=!0);var e=f[h];"object"===typeof e&&(c=P1(e,c))}return c}function hga(f){var c=hn(f);f=!1;P1(c,!1)&&(c=O1(c),"$and"in c&&(c=eG(c.$and)),f=!0);["$or","$nor"].forEach(function(b){b in c&&c[b].forEach(function(d){for(var m=Object.keys(d),a=0;a<m.length;a++){var g=
m[a],l=d[g];if("object"!==typeof l||null===l)d[g]={$eq:l}}})});"$not"in c&&(c.$not=eG([c.$not]));for(var h=Object.keys(c),e=0;e<h.length;e++){var k=h[e],n=c[k];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!f&&(n.$ne=[n.$ne]);c[k]=n}return c}function Fn(f,c){if(f===c)return 0;f=FA(f);c=FA(c);var h=hR(f),e=hR(c);if(0!==h-e)return h-e;switch(typeof f){case "number":return f-c;case "boolean":return f<c?-1:1;case "string":return f===c?0:f>c?1:-1}if(Array.isArray(f))a:{h=Math.min(f.length,c.length);
for(e=0;e<h;e++){var k=Fn(f[e],c[e]);if(0!==k){f=k;break a}}f=f.length===c.length?0:f.length>c.length?1:-1}else a:{h=Object.keys(f);e=Object.keys(c);k=Math.min(h.length,e.length);for(var n=0;n<k;n++){var b=Fn(h[n],e[n]);if(0!==b){f=b;break a}b=Fn(f[h[n]],c[e[n]]);if(0!==b){f=b;break a}}f=h.length===e.length?0:h.length>e.length?1:-1}return f}function FA(f){switch(typeof f){case "undefined":return null;case "number":if(Infinity===f||-Infinity===f||isNaN(f))return null;break;case "object":var c=f;if(Array.isArray(f)){var h=
f.length;f=Array(h);for(var e=0;e<h;e++)f[e]=FA(c[e])}else{if(f instanceof Date)return f.toJSON();if(null!==f)for(h in f={},c)c.hasOwnProperty(h)&&(e=c[h],"undefined"!==typeof e&&(f[h]=FA(e)))}}return f}function iga(f){if(null!==f)switch(typeof f){case "boolean":return f?1:0;case "number":if(0===f)f="1";else{var c=f.toExponential().split(/e\+?/),h=parseInt(c[1],10);f=0>f;h=((f?-h:h)- -324).toString();for(var e="",k=3-h.length;e.length<k;)e+="0";h=(f?"0":"2")+(""+(e+h));c=Math.abs(parseFloat(c[0]));
f&&(c=10-c);f=c.toFixed(20);f=f.replace(/\.?0+$/,"");f=h+=""+f}return f;case "string":return f.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(f);c=n?f:Object.keys(f);h=-1;e=c.length;k="";if(n)for(;++h<e;)k+=Ys(c[h]);else for(;++h<e;)n=c[h],k+=Ys(n)+Ys(f[n]);return k}return""}function Ys(f){f=FA(f);return hR(f)+""+iga(f)+"\x00"}function hR(f){var c=["boolean","number","string","object"].indexOf(typeof f);if(~c)return null===
f?1:Array.isArray(f)?5:3>c?c+2:c+3;if(Array.isArray(f))return 5}function jga(f){function c(h){return f.map(function(e){e=Object.keys(e)[0];e=M1(e);return L1(h,e)})}return function(h,e){var k=c(h.doc),n=c(e.doc);k=Fn(k,n);if(0!==k)return k;h=h.doc._id;e=e.doc._id;return h<e?-1:h>e?1:0}}function kga(f,c,h){f=f.filter(function(k){return qD(k.doc,c.selector,h)});if(c.sort){var e=jga(c.sort);f=f.sort(e);"string"!==typeof c.sort[0]&&"desc"===gga(c.sort[0])&&(f=f.reverse())}if("limit"in c||"skip"in c)e=
c.skip||0,f=f.slice(e,("limit"in c?c.limit:f.length)+e);return f}function qD(f,c,h){return h.every(function(e){var k=c[e],n=M1(e),b=L1(f,n);return-1<N1.indexOf(e)?lga(e,k,f):iR(k,f,n,b)})}function iR(f,c,h,e){return f?"object"===typeof f?Object.keys(f).every(function(k){var n=f[k];if(!Q1[k])throw Error('unknown operator "'+k+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Q1[k](c,n,h,e)}):f===e:!0}function lga(f,
c,h){return"$or"===f?c.some(function(e){return qD(h,e,Object.keys(e))}):"$not"===f?!qD(h,c,Object.keys(c)):!c.find(function(e){return qD(h,e,Object.keys(e))})}function fG(f){return"undefined"!==typeof f&&null!==f}function GA(f){return"undefined"!==typeof f}function R1(f,c){return c.some(function(h){return f instanceof Array?-1<f.indexOf(h):f===h})}function mga(f,c){return c.every(function(h){return-1<f.indexOf(h)})}function nga(f,c){switch(c){case "null":return null===f;case "boolean":return"boolean"===
typeof f;case "number":return"number"===typeof f;case "string":return"string"===typeof f;case "array":return f instanceof Array;case "object":return"[object Object]"==={}.toString.call(f)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");}function oga(f,c){if(f.selector&&f.filter&&"_selector"!==f.filter)return c(Error('selector invalid for filter "'+("string"===typeof f.filter?f.filter:"function")+'"'));c()}function pga(f){f.view&&!f.filter&&
(f.filter="_view");f.selector&&!f.filter&&(f.filter="_selector");f.filter&&"string"===typeof f.filter&&("_view"===f.filter?f.view=y1(f.view):f.filter=y1(f.filter))}function qga(f,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Qu(f.db)}function rga(f,c){var h=c.complete;if("_view"===c.filter){if(!c.view||"string"!==typeof c.view){var e=hj(yK,"`view` filter parameter not found or invalid.");return h(e)}var k=YQ(c.view);f.db.get("_design/"+k[0],function(b,d){if(f.isCancelled)return h(null,
{status:"cancelled"});if(b)return h(pD(b));b=d&&d.views&&d.views[k[1]]&&d.views[k[1]].map;if(!b)return h(hj(Zs,d.views?"missing json key: "+k[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=ZQ(d,{});c.filter=d;f.doChanges(c)})}else if(c.selector)c.filter=function(b){var d=c.selector;if("object"!==
typeof d)throw Error("Selector error: expected a JSON object");d=hga(d);return(b=kga([{doc:b}],{selector:d},Object.keys(d)))&&1===b.length},f.doChanges(c);else{var n=YQ(c.filter);f.db.get("_design/"+n[0],function(b,d){if(f.isCancelled)return h(null,{status:"cancelled"});if(b)return h(pD(b));b=d&&d.filters&&d.filters[n[1]];if(!b)return h(hj(Zs,d&&d.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=ZQ('"use strict";\nreturn '+b+";",{});f.doChanges(c)})}}function S1(f){return f.reduce(function(c,
h){c[h]=!0;return c},{})}function T1(f){if(!/^\d+-/.test(f))return hj(U1);var c=f.indexOf("-"),h=f.substring(0,c);f=f.substring(c+1);return{prefix:parseInt(h,10),id:f}}function V1(f,c,h){h||(h={deterministic_revs:!0});var e={status:"available"};f._deleted&&(e.deleted=!0);if(c){f._id||(f._id=CK());var k=D1(f,h.deterministic_revs);if(f._rev){c=T1(f._rev);if(c.error)return c;f._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,e,[]]]]}];var n=c.prefix+1}else f._rev_tree=[{pos:1,ids:[k,e,[]]}],
n=1}else{if(f._revisions){k=f._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],e,[]];h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];f._rev_tree=[{pos:n,ids:c}];n=f._revisions.start;k=f._revisions.ids[0]}if(!f._rev_tree){c=T1(f._rev);if(c.error)return c;n=c.prefix;k=c.id;f._rev_tree=[{pos:n,ids:[k,e,[]]}]}}w1(f._id);f._rev=n+"-"+k;e={metadata:{},data:{}};for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)){if((n="_"===d[0])&&!sga[d])throw f=hj(W1,d),f.message=W1.message+
": "+d,f;n&&!tga[d]?e.metadata[d.slice(1)]=f[d]:e.data[d]=f[d]}return e}function uga(f,c,h){try{var e=atob(f.data)}catch(k){e={error:hj(X1,"Attachment is not a valid base64 string")}}if(e.error)return h(e.error);f.length=e.length;f.data="blob"===c?aR(e,f.content_type):"base64"===c?btoa(e):e;dR(e,function(k){f.digest="md5-"+k;h()})}function vga(f,c,h){dR(f.data,function(e){f.digest="md5-"+e;f.length=f.data.size||f.data.length||0;"binary"===c?C1(f.data,function(k){f.data=k;h()}):"base64"===c?cR(f.data,
function(k){f.data=k;h()}):h()})}function wga(f,c,h){if(f.stub)return h();"string"===typeof f.data?uga(f,c,h):vga(f,c,h)}function xga(f,c,h){function e(){k++;f.length===k&&(n?h(n):h())}if(!f.length)return h();var k=0,n;f.forEach(function(b){function d(l){n=l;a++;a===m.length&&e()}var m=b.data&&b.data._attachments?Object.keys(b.data._attachments):[],a=0;if(!m.length)return e();for(var g in b.data._attachments)b.data._attachments.hasOwnProperty(g)&&wga(b.data._attachments[g],c,d)})}function yga(f,c,
h,e,k,n,b,d,m){f=f||1E3;var a=d.new_edits,g=new Aq,l=0,r=c.length;c.forEach(function(v,y){if(v._id&&EA(v._id))h[v._deleted?"_removeLocal":"_putLocal"](v,{ctx:k},function(E,F){n[y]=E||F;++l===r&&m&&m()});else{var A=v.metadata.id;g.has(A)?(r--,g.get(A).push([v,y])):g.set(A,[[v,y]])}});g.forEach(function(v,y){function A(){++F<v.length?E():++l===r&&m&&m()}function E(){var G=v[F],I=G[0];G=G[1];if(e.has(y)){var M=f,L=e.get(y);b:{var S=I.metadata.rev;var R=L.rev_tree.slice();var aa=S.split("-");S=parseInt(aa[0],
10);aa=aa[1];for(var ra;ra=R.pop();){if(ra.pos===S&&ra.ids[0]===aa){R=!0;break b}for(var Ea=ra.ids[2],K=0,Z=Ea.length;K<Z;K++)R.push({pos:ra.pos+1,ids:Ea[K]})}R=!1}R&&!a?(n[G]=I,A()):(aa=L.winningRev||CA(L),R="deleted"in L?L.deleted:Ew(L,aa),S="deleted"in I.metadata?I.metadata.deleted:Ew(I.metadata),ra=/^1-/.test(I.metadata.rev),R&&!S&&a&&ra&&(ra=I.data,ra._rev=aa,ra._id=I.metadata.id,I=V1(ra,a)),aa=J1(L.rev_tree,I.metadata.rev_tree[0],M),a&&(R&&S&&"new_leaf"!==aa.conflicts||!R&&"new_leaf"!==aa.conflicts||
R&&!S&&"new_branch"===aa.conflicts)?(I=hj(rD),n[G]=I,A()):(M=I.metadata.rev,I.metadata.rev_tree=aa.tree,I.stemmedRevs=aa.stemmedRevs||[],L.rev_map&&(I.metadata.rev_map=L.rev_map),L=CA(I.metadata),S=Ew(I.metadata,L),R=R===S?0:R<S?-1:1,M=M===L?S:Ew(I.metadata,M),b(I,L,S,M,!0,R,G,A)))}else L=J1([],I.metadata.rev_tree[0],f),I.metadata.rev_tree=L.tree,I.stemmedRevs=L.stemmedRevs||[],L=CA(I.metadata),M=Ew(I.metadata,L),"was_delete"in d&&M?(n[G]=hj(Zs,"deleted"),A()):a&&"missing"===I.metadata.rev_tree[0].ids[1].status?
(I=hj(rD),n[G]=I,A()):b(I,L,M,M,!1,M?0:1,G,A)}var F=0;E()})}function Su(f){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);f(hj(jR,h,c.type))}}function kR(f,c,h){try{var e=JSON.stringify(f)}catch(k){e=Y1.stringify(f)}return{data:e,winningRev:c,deletedOrLocal:h?"1":"0",seq:f.seq,id:f.id}}function HA(f){if(!f)return null;var c=f.data;try{var h=JSON.parse(c)}catch(e){h=Y1.parse(c)}h.winningRev=f.winningRev;h.deleted="1"===f.deletedOrLocal;
h.seq=f.seq;return h}function DK(f){if(!f)return f;var c=f._doc_id_rev.lastIndexOf(":");f._id=f._doc_id_rev.substring(0,c-1);f._rev=f._doc_id_rev.substring(c+1);delete f._doc_id_rev;return f}function Z1(f,c,h,e){h?f?"string"!==typeof f?e(f):e(bR(f,c)):e($Q([""],{type:c})):f?"string"!==typeof f?B1(f,function(k){e(btoa(k))}):e(f):e("")}function $1(f,c,h,e){function k(d,m){var a=d._attachments[m];d=a.digest;h.objectStore("attach-store").get(d).onsuccess=function(g){a.body=g.target.result.body;++b===
n.length&&e&&e()}}var n=Object.keys(f._attachments||{});if(!n.length)return e&&e();var b=0;n.forEach(function(d){c.attachments&&c.include_docs?k(f,d):(f._attachments[d].stub=!0,++b===n.length&&e&&e())})}function lR(f,c){return Promise.all(f.map(function(h){if(h.doc&&h.doc._attachments){var e=Object.keys(h.doc._attachments);return Promise.all(e.map(function(k){var n=h.doc._attachments[k];if("body"in n){var b=n.body,d=n.content_type;return new Promise(function(m){Z1(b,d,c,function(a){h.doc._attachments[k]=
sD(aG(n,["digest","content_type"]),{data:a});m()})})}}))}}))}function a2(f,c,h){function e(){k.length&&k.forEach(function(a){d.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(g){g.target.result||b.delete(a)}})}var k=[],n=h.objectStore("by-sequence"),b=h.objectStore("attach-store"),d=h.objectStore("attach-seq-store"),m=f.length;f.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(g){g=g.target.result;"number"!==typeof g?(m--,m||
e()):(n.delete(g),d.index("seq").openCursor(IDBKeyRange.only(g)).onsuccess=function(l){if(l=l.target.result){var r=l.value.digestSeq.split("::")[0];k.push(r);d.delete(l.primaryKey);l.continue()}else m--,m||e()})}})}function $s(f,c,h){try{return{txn:f.transaction(c,h)}}catch(e){return{error:e}}}function zga(f,c,h,e,k,n){function b(){var gb=$s(k,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(gb.error)return n(gb.error);M=gb.txn;M.onabort=
Su(n);M.ontimeout=Su(n);M.oncomplete=l;L=M.objectStore("document-store");S=M.objectStore("by-sequence");R=M.objectStore("attach-store");aa=M.objectStore("attach-seq-store");ra=M.objectStore("meta-store");ra.get("meta-store").onsuccess=function(ka){K=ka.target.result;a()};v(function(ka){if(ka)return jb=!0,n(ka);g()})}function d(){V=!0;a()}function m(){yga(f.revs_limit,I,e,ya,M,la,y,h,d)}function a(){K&&V&&(K.docCount+=na,ra.put(K))}function g(){function gb(Lb){(Lb=HA(Lb.target.result))&&ya.set(Lb.id,
Lb);++ka===I.length&&m()}if(I.length)for(var ka=0,ia=0,qa=I.length;ia<qa;ia++){var La=I[ia];La._id&&EA(La._id)?++ka===I.length&&m():L.get(La.metadata.id).onsuccess=gb}}function l(){jb||(gG.notify(e._meta.name),n(null,la))}function r(gb,ka){R.get(gb).onsuccess=function(ia){ia.target.result?ka():(ia=hj(Aga,"unknown stub attachment with digest "+gb),ia.status=412,ka(ia))}}function v(gb){var ka=[];I.forEach(function(La){La.data&&La.data._attachments&&Object.keys(La.data._attachments).forEach(function(Lb){Lb=
La.data._attachments[Lb];Lb.stub&&ka.push(Lb.digest)})});if(!ka.length)return gb();var ia=0,qa;ka.forEach(function(La){r(La,function(Lb){Lb&&!qa&&(qa=Lb);++ia===ka.length&&gb(qa)})})}function y(gb,ka,ia,qa,La,Lb,qc,dc){gb.metadata.winningRev=ka;gb.metadata.deleted=ia;var oc=gb.data;oc._id=gb.metadata.id;oc._rev=gb.metadata.rev;qa&&(oc._deleted=!0);if(oc._attachments&&Object.keys(oc._attachments).length)return E(gb,ka,ia,La,qc,dc);na+=Lb;a();A(gb,ka,ia,La,qc,dc)}function A(gb,ka,ia,qa,La,Lb){function qc(Hd){var be=
gb.stemmedRevs||[];qa&&e.auto_compaction&&(be=be.concat(Ufa(gb.metadata)));be&&be.length&&a2(be,gb.metadata.id,M);$c.seq=Hd.target.result;Hd=kR($c,ka,ia);L.put(Hd).onsuccess=dc}function dc(){la[La]={ok:!0,id:$c.id,rev:$c.rev};ya.set(gb.metadata.id,gb.metadata);F(gb,$c.seq,Lb)}var oc=gb.data,$c=gb.metadata;oc._doc_id_rev=$c.id+"::"+$c.rev;delete oc._id;delete oc._rev;var Vb=S.put(oc);Vb.onsuccess=qc;Vb.onerror=function(Hd){Hd.preventDefault();Hd.stopPropagation();S.index("_doc_id_rev").getKey(oc._doc_id_rev).onsuccess=
function(be){S.put(oc,be.target.result).onsuccess=qc}}}function E(gb,ka,ia,qa,La,Lb){function qc(){oc===$c.length&&A(gb,ka,ia,qa,La,Lb)}function dc(){oc++;qc()}var oc=0,$c=Object.keys(gb.data._attachments);$c.forEach(function(Vb){Vb=gb.data._attachments[Vb];if(Vb.stub)oc++,qc();else{var Hd=Vb.data;delete Vb.data;Vb.revpos=parseInt(ka,10);G(Vb.digest,Hd,dc)}})}function F(gb,ka,ia){function qa(){++Lb===qc.length&&ia()}function La(oc){oc=aa.put({seq:ka,digestSeq:gb.data._attachments[oc].digest+"::"+
ka});oc.onsuccess=qa;oc.onerror=function($c){$c.preventDefault();$c.stopPropagation();qa()}}var Lb=0,qc=Object.keys(gb.data._attachments||{});if(!qc.length)return ia();for(var dc=0;dc<qc.length;dc++)La(qc[dc])}function G(gb,ka,ia){R.count(gb).onsuccess=function(qa){if(qa.target.result)return ia();R.put({digest:gb,body:ka}).onsuccess=ia}}var I=c.docs,M,L,S,R,aa,ra,Ea,K;c=0;for(var Z=I.length;c<Z;c++){var U=I[c];U._id&&EA(U._id)||(U=I[c]=V1(U,h.new_edits,f),U.error&&!Ea&&(Ea=U))}if(Ea)return n(Ea);
var V=!1,na=0,la=Array(I.length),ya=new Aq,jb=!1;xga(I,e._meta.blobSupport?"blob":"base64",function(gb){if(gb)return n(gb);b()})}function b2(f,c,h,e,k){function n(r){g=r.target.result;a&&k(a,g,l)}function b(r){a=r.target.result;g&&k(a,g,l)}function d(){if(!a.length)return k();var r=a[a.length-1];if(c&&c.upper)try{var v=IDBKeyRange.bound(r,c.upper,!0,c.upperOpen)}catch(y){if("DataError"===y.name&&0===y.code)return k()}else v=IDBKeyRange.lowerBound(r,!0);c=v;g=a=null;f.getAll(c,e).onsuccess=n;f.getAllKeys(c,
e).onsuccess=b}function m(r){r=r.target.result;if(!r)return k();k([r.key],[r.value],r)}-1===e&&(e=1E3);var a,g;if("function"===typeof f.getAll&&"function"===typeof f.getAllKeys&&1<e&&!h){var l={"continue":d};f.getAll(c,e).onsuccess=n;f.getAllKeys(c,e).onsuccess=b}else h?f.openCursor(c,"prev").onsuccess=m:f.openCursor(c).onsuccess=m}function Bga(f,c,h){if("function"===typeof f.getAll)f.getAll(c).onsuccess=h;else{var e=[];f.openCursor(c).onsuccess=function(k){(k=k.target.result)?(e.push(k.value),k.continue()):
h({target:{result:e}})}}}function Cga(f,c,h){var e=Array(f.length),k=0;f.forEach(function(n,b){c.get(n).onsuccess=function(d){e[b]=d.target.result?d.target.result:{key:n,error:"not_found"};k++;k===f.length&&h(f,e,{})}})}function Dga(f,c,h,e,k){try{if(f&&c)return k?IDBKeyRange.bound(c,f,!h,!1):IDBKeyRange.bound(f,c,!1,!h);if(f)return k?IDBKeyRange.upperBound(f):IDBKeyRange.lowerBound(f);if(c)return k?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(e)return IDBKeyRange.only(e)}catch(n){return{error:n}}return null}
function Ega(f,c,h){function e(R,aa){R.openCursor(null,"prev").onsuccess=function(ra){ra=ra.target.result;var Ea=void 0;ra&&ra.key&&(Ea=ra.key);return aa({target:{result:[Ea]}})}}function k(R,aa,ra){I.get(R.id+"::"+ra).onsuccess=function(Ea){aa.doc=DK(Ea.target.result)||{};f.conflicts&&(Ea=fR(R),Ea.length&&(aa.doc._conflicts=Ea));$1(aa.doc,f,G)}}function n(R){for(var aa=0,ra=R.length;aa<ra&&M.length!==y;aa++){var Ea=R[aa];if(Ea.error&&r)M.push(Ea);else{var K=HA(Ea);Ea=K.winningRev;var Z={id:K.id,
key:K.id,value:{rev:Ea}};K.deleted?r&&(M.push(Z),Z.value.deleted=!0,Z.doc=null):0>=v--&&(M.push(Z),f.include_docs&&k(K,Z,Ea))}}}function b(R,aa,ra){ra&&(n(aa),M.length<y&&ra.continue())}function d(R){R=R.target.result;f.descending&&(R=R.reverse());n(R)}function m(){var R={total_rows:L,offset:f.skip,rows:M};f.update_seq&&void 0!==S&&(R.update_seq=S);h(null,R)}var a="startkey"in f?f.startkey:!1,g="endkey"in f?f.endkey:!1,l="key"in f?f.key:!1,r="keys"in f?f.keys:!1,v=f.skip||0,y="number"===typeof f.limit?
f.limit:-1,A=!1!==f.inclusive_end,E,F;if(!r&&(F=(E=Dga(a,g,A,l,f.descending))&&E.error)&&("DataError"!==F.name||0!==F.code))return h(hj(jR,F.name,F.message));a=["document-store","by-sequence","meta-store"];f.attachments&&a.push("attach-store");c=$s(c,a,"readonly");if(c.error)return h(c.error);var G=c.txn;G.oncomplete=function(){f.attachments?lR(M,f.binary).then(m):m()};G.onabort=Su(h);c=G.objectStore("document-store");a=G.objectStore("by-sequence");g=G.objectStore("meta-store");var I=a.index("_doc_id_rev"),
M=[],L,S;g.get("meta-store").onsuccess=function(R){L=R.target.result.docCount};f.update_seq&&e(a,function(R){R.target.result&&0<R.target.result.length&&(S=R.target.result[0])});if(!F&&0!==y){if(r)return Cga(f.keys,c,b);if(-1===y)return Bga(c,E,d);b2(c,E,f.descending,y+v,b)}}function Fga(f){return(new Promise(function(c){var h=$Q([""]);h=f.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);c(k||
!e||43<=parseInt(e[1],10))};h.onerror=f.onabort=function(e){e.preventDefault();e.stopPropagation();c(!1)}})).catch(function(){return!1})}function Gga(f,c){f.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function Hga(f,c,h,e){try{f(c,h)}catch(k){e.emit("error",k)}}function c2(){!mR&&nR.length&&(mR=!0,nR.shift()())}function Iga(f,c,h){nR.push(function(){f(function(e,k){Hga(c,e,k,h);mR=!1;Ru(function(){c2()})})});c2()}function Jga(f,
c,h,e){function k(G,I,M,L){if(M.seq!==I)return L();if(M.winningRev===G._rev)return L(M,G);F.get(G._id+"::"+M.winningRev).onsuccess=function(S){L(M,DK(S.target.result))}}function n(G,I,M){if(m&&!m.has(G._id))return M();var L=y.get(G._id);if(L)return k(G,I,L,M);E.get(G._id).onsuccess=function(S){L=HA(S.target.result);y.set(G._id,L);k(G,I,L,M)}}function b(){f.complete(null,{results:l,last_seq:a})}f=hn(f);if(f.continuous){var d=h+":"+CK();gG.addListener(h,d,c,f);gG.notify(h);return{cancel:function(){gG.removeListener(h,
d)}}}var m=f.doc_ids&&new hG(f.doc_ids);f.since=f.since||0;var a=f.since,g="limit"in f?f.limit:-1;0===g&&(g=1);var l=[],r=0,v=XQ(f),y=new Aq;c=["document-store","by-sequence"];f.attachments&&c.push("attach-store");e=$s(e,c,"readonly");if(e.error)return f.complete(e.error);var A=e.txn;A.onabort=Su(f.complete);A.oncomplete=function(){!f.continuous&&f.attachments?lR(l).then(b):b()};e=A.objectStore("by-sequence");var E=A.objectStore("document-store");var F=e.index("_doc_id_rev");c=f.since&&!f.descending?
IDBKeyRange.lowerBound(f.since,!0):null;b2(e,c,f.descending,g,function(G,I,M){function L(Ea,K){var Z=f.processChange(K,Ea,f);a=Z.seq=Ea.seq;Ea=v(Z);if("object"===typeof Ea)return Promise.reject(Ea);if(!Ea)return Promise.resolve();r++;f.return_docs&&l.push(Z);return f.attachments&&f.include_docs?new Promise(function(U){$1(K,f,A,function(){lR([Z],f.binary).then(function(){U(Z)})})}):Promise.resolve(Z)}function S(){for(var Ea=[],K=0,Z=R.length;K<Z&&r!==g;K++){var U=R[K];U&&Ea.push(L(aa[K],U))}Promise.all(Ea).then(function(V){for(var na=
0,la=V.length;na<la;na++)if(V[na])f.onChange(V[na])}).catch(f.complete);r!==g&&M.continue()}if(M&&G.length){var R=Array(G.length),aa=Array(G.length),ra=0;I.forEach(function(Ea,K){Ea=DK(Ea);n(Ea,G[K],function(Z,U){aa[K]=Z;R[K]=U;++ra===G.length&&S()})})}})}function d2(f,c){var h=this;Iga(function(e){Kga(h,f,e)},c,h.constructor)}function Kga(f,c,h){function e(r){var v=r.createObjectStore("document-store",{keyPath:"id"});r.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev",
"_doc_id_rev",{unique:!0});r.createObjectStore("attach-store",{keyPath:"digest"});r.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});r.createObjectStore("detect-blob-support");v.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});r.createObjectStore("local-store",{keyPath:"_id"});r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function k(r,v){var y=r.objectStore("document-store");y.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});y.openCursor().onsuccess=function(A){if(A=A.target.result){var E=A.value,F=Ew(E);E.deletedOrLocal=F?"1":"0";y.put(E);A.continue()}else v()}}function n(r,v){var y=r.objectStore("local-store"),A=r.objectStore("document-store"),E=r.objectStore("by-sequence");A.openCursor().onsuccess=function(F){var G=F.target.result;if(G){var I=G.value;F=I.id;var M=EA(F);I=CA(I);if(M){var L=F+"::"+I;M=F+"::";I=F+"::~";F=E.index("_doc_id_rev");M=IDBKeyRange.bound(M,I,!1,!1);var S=F.openCursor(M);
S.onsuccess=function(R){(S=R.target.result)?(R=S.value,R._doc_id_rev===L&&y.put(R),E.delete(S.primaryKey),S.continue()):(A.delete(G.primaryKey),G.continue())}}else G.continue()}else v&&v()}}function b(r){r=r.createObjectStore("attach-seq-store",{autoIncrement:!0});r.createIndex("seq","seq");r.createIndex("digestSeq","digestSeq",{unique:!0})}function d(r,v){var y=r.objectStore("by-sequence"),A=r.objectStore("attach-store"),E=r.objectStore("attach-seq-store");A.count().onsuccess=function(F){if(!F.target.result)return v();
y.openCursor().onsuccess=function(G){G=G.target.result;if(!G)return v();for(var I=G.value,M=G.primaryKey,L=Object.keys(I._attachments||{}),S={},R=0;R<L.length;R++)S[I._attachments[L[R]].digest]=!0;I=Object.keys(S);for(R=0;R<I.length;R++)E.put({seq:M,digestSeq:I[R]+"::"+M});G.continue()}}}function m(r){function v(E){return E.data?HA(E):(E.deleted="1"===E.deletedOrLocal,E)}var y=r.objectStore("by-sequence"),A=r.objectStore("document-store");A.openCursor().onsuccess=function(E){function F(){var M=kR(I,
I.winningRev,I.deleted);A.put(M).onsuccess=function(){G.continue()}}var G=E.target.result;if(G){var I=v(G.value);I.winningRev=I.winningRev||CA(I);if(I.seq)return F();(function(){var M=I.id+"::",L=I.id+"::\uffff",S=0;y.index("_doc_id_rev").openCursor(IDBKeyRange.bound(M,L)).onsuccess=function(R){R=R.target.result;if(!R)return I.seq=S,F();var aa=R.primaryKey;aa>S&&(S=aa);R.continue()}})()}}}var a=c.name,g=null;f._meta=null;f._remote=!1;f.type=function(){return"idb"};f._id=s1(function(r){r(null,f._meta.instanceId)});
f._bulkDocs=function(r,v,y){zga(c,r,v,f,g,y)};f._get=function(r,v,y){function A(){y(G,{doc:E,metadata:F,ctx:I})}var E,F,G,I=v.ctx;if(!I){var M=$s(g,["document-store","by-sequence","attach-store"],"readonly");if(M.error)return y(M.error);I=M.txn}I.objectStore("document-store").get(r).onsuccess=function(L){F=HA(L.target.result);if(!F)return G=hj(Zs,"missing"),A();if(v.rev)var S=v.latest?Zfa(v.rev,F):v.rev;else if(S=F.winningRev,Ew(F))return G=hj(Zs,"deleted"),A();L=I.objectStore("by-sequence");S=F.id+
"::"+S;L.index("_doc_id_rev").get(S).onsuccess=function(R){(E=R.target.result)&&(E=DK(E));if(!E)return G=hj(Zs,"missing"),A();A()}}};f._getAttachment=function(r,v,y,A,E){if(A.ctx)r=A.ctx;else{r=$s(g,["document-store","by-sequence","attach-store"],"readonly");if(r.error)return E(r.error);r=r.txn}v=y.digest;var F=y.content_type;r.objectStore("attach-store").get(v).onsuccess=function(G){Z1(G.target.result.body,F,A.binary,function(I){E(null,I)})}};f._info=function(r){var v,y,A=$s(g,["meta-store","by-sequence"],
"readonly");if(A.error)return r(A.error);A=A.txn;A.objectStore("meta-store").get("meta-store").onsuccess=function(E){y=E.target.result.docCount};A.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(E){v=(E=E.target.result)?E.key:0};A.oncomplete=function(){r(null,{doc_count:y,update_seq:v,idb_attachment_format:f._meta.blobSupport?"binary":"base64"})}};f._allDocs=function(r,v){Ega(r,g,v)};f._changes=function(r){return Jga(r,f,a,g)};f._close=function(r){g.close();tD.delete(a);r()};
f._getRevisionTree=function(r,v){var y=$s(g,["document-store"],"readonly");if(y.error)return v(y.error);y.txn.objectStore("document-store").get(r).onsuccess=function(A){(A=HA(A.target.result))?v(null,A.rev_tree):v(hj(Zs))}};f._doCompaction=function(r,v,y){var A=$s(g,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(A.error)return y(A.error);var E=A.txn;E.objectStore("document-store").get(r).onsuccess=function(F){F=HA(F.target.result);DA(F.rev_tree,function(M,L,S,R,
aa){-1!==v.indexOf(L+"-"+S)&&(aa.status="missing")});a2(v,r,E);var G=F.winningRev,I=F.deleted;E.objectStore("document-store").put(kR(F,G,I))};E.onabort=Su(y);E.oncomplete=function(){y()}};f._getLocal=function(r,v){var y=$s(g,["local-store"],"readonly");if(y.error)return v(y.error);r=y.txn.objectStore("local-store").get(r);r.onerror=Su(v);r.onsuccess=function(A){(A=A.target.result)?(delete A._doc_id_rev,v(null,A)):v(hj(Zs))}};f._putLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});delete r._revisions;
var A=r._rev,E=r._id;r._rev=A?"0-"+(parseInt(A.split("-")[1],10)+1):"0-1";var F=v.ctx,G;if(!F){F=$s(g,["local-store"],"readwrite");if(F.error)return y(F.error);F=F.txn;F.onerror=Su(y);F.oncomplete=function(){G&&y(null,G)}}var I=F.objectStore("local-store");A?(E=I.get(E),E.onsuccess=function(M){(M=M.target.result)&&M._rev===A?I.put(r).onsuccess=function(){G={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,G)}:y(hj(rD))}):(E=I.add(r),E.onerror=function(M){y(hj(rD));M.preventDefault();M.stopPropagation()},
E.onsuccess=function(){G={ok:!0,id:r._id,rev:r._rev};v.ctx&&y(null,G)})};f._removeLocal=function(r,v,y){"function"===typeof v&&(y=v,v={});var A=v.ctx;if(!A){A=$s(g,["local-store"],"readwrite");if(A.error)return y(A.error);A=A.txn;A.oncomplete=function(){E&&y(null,E)}}var E,F=r._id,G=A.objectStore("local-store");A=G.get(F);A.onerror=Su(y);A.onsuccess=function(I){(I=I.target.result)&&I._rev===r._rev?(G.delete(F),E={ok:!0,id:F,rev:"0-0"},v.ctx&&y(null,E)):y(hj(Zs))}};f._destroy=function(r,v){gG.removeAllListeners(a);
(r=oR.get(a))&&r.result&&(r.result.close(),tD.delete(a));r=indexedDB.deleteDatabase(a);r.onsuccess=function(){oR.delete(a);bG&&a in localStorage&&delete localStorage[a];v(null,{ok:!0})};r.onerror=Su(v)};var l=tD.get(a);if(l)return g=l.idb,f._meta=l.global,Ru(function(){h(null,f)});l=indexedDB.open(a,5);oR.set(a,l);l.onupgradeneeded=function(r){function v(){var G=E[F-1];F++;G&&G(A,v)}var y=r.target.result;if(1>r.oldVersion)return e(y);var A=r.currentTarget.transaction;3>r.oldVersion&&y.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>r.oldVersion&&b(y);var E=[k,n,d,m],F=r.oldVersion;v()};l.onsuccess=function(r){function v(){"undefined"!==typeof I&&E&&(f._meta={name:a,instanceId:M,blobSupport:I},tD.set(a,{idb:g,global:f._meta}),h(null,f))}function y(){if("undefined"!==typeof G&&"undefined"!==typeof F){var L=a+"_id";L in F?M=F[L]:F[L]=M=CK();F.docCount=G;A.objectStore("meta-store").put(F)}}g=r.target.result;g.onversionchange=function(){g.close();tD.delete(a)};
g.onabort=function(L){Gr("error","Database has a global failure",L.target.error);g.close();tD.delete(a)};var A=g.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),E=!1,F,G,I,M;A.objectStore("meta-store").get("meta-store").onsuccess=function(L){F=L.target.result||{id:"meta-store"};y()};Gga(A,function(L){G=L;y()});pR||(pR=Fga(A));pR.then(function(L){I=L;v()});A.oncomplete=function(){E=!0;v()};A.onabort=Su(h)};l.onerror=function(r){(r=r.target.error&&r.target.error.message)?
-1!==r.indexOf("stored database is a higher version")&&(r=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):r="Failed to open indexedDB, are you in private browsing mode?";Gr("error",r);h(hj(jR,r))}}function Lga(f,c){return new Promise(function(h,e){function k(){m++;f[a++]().then(b,d)}function n(){if(++g===l)r?e(r):h();else for(;m<c&&a<l;)k()}function b(){m--;n()}function d(v){m--;r=r||v;n()}for(var m=0,a=0,g=0,l=f.length,
r;m<c&&a<l;)k()})}function qR(f){var c=(f=f.doc||f.ok)&&f._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=bR(h.data,h.content_type)})}function IA(f){return/^_design/.test(f)?"_design/"+encodeURIComponent(f.slice(8)):/^_local/.test(f)?"_local/"+encodeURIComponent(f.slice(7)):encodeURIComponent(f)}function e2(f){return f._attachments&&Object.keys(f._attachments)?Promise.all(Object.keys(f._attachments).map(function(c){var h=f._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(e){cR(h.data,
e)})).then(function(e){h.data=e})})):Promise.resolve()}function Mga(f,c){if(c.prefix){var h=z1(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(f=c.name.substr(c.prefix.length),f=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(f));c=z1(f);if(c.user||c.password)c.auth={username:c.user,password:c.password};f=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=f.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=f.join("/");return c}function jn(f,c){return EK(f,f.db+"/"+c)}function EK(f,
c){return f.protocol+"://"+f.host+(f.port?":"+f.port:"")+"/"+f.path+(f.path?"/":"")+c}function FK(f){return"?"+Object.keys(f).map(function(c){return c+"="+encodeURIComponent(f[c])}).join("&")}function Nga(f){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),e=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");f=!("method"in f)||"GET"===f.method;return(h||e||c)&&f}function rR(f,c){function h(l,r){return Nm(l,nD(function(v){k().then(function(){return r.apply(this,
v)}).catch(function(y){v.pop()(y)})})).bind(b)}function e(l,r,v){var y={};r=r||{};r.headers=r.headers||new uD;r.headers.get("Content-Type")||r.headers.set("Content-Type","application/json");r.headers.get("Accept")||r.headers.set("Accept","application/json");return a(l,r).then(function(A){y.ok=A.ok;y.status=A.status;return A.json()}).then(function(A){y.data=A;if(!y.ok){y.data.status=y.status;A=pD(y.data);if(v)return v(A);throw A;}Array.isArray(y.data)&&(y.data=y.data.map(function(E){return E.error||
E.missing?pD(E):E}));if(v)v(null,y.data);else return y})}function k(){if(f.skip_setup)return Promise.resolve();if(g)return g;g=e(m).catch(function(l){return l&&l.status&&404===l.status?(WQ(404,"PouchDB is just detecting if the remote exists."),e(m,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});g.catch(function(){g=null});return g}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var b=this,d=Mga(f.name,f),m=jn(d,"");
f=hn(f);var a=function(l,r){r=r||{};r.headers=r.headers||new uD;r.credentials="include";if(f.auth||d.auth){var v=f.auth||d.auth;v=btoa(unescape(encodeURIComponent(v.username+":"+v.password)));r.headers.set("Authorization","Basic "+v)}var y=f.headers||{};Object.keys(y).forEach(function(A){r.headers.append(A,y[A])});Nga(r)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(f.fetch||f2)(l,r)},g;Ru(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=h("id",function(l){a(EK(d,
"")).then(function(r){return r.json()}).catch(function(){return{}}).then(function(r){r=r&&r.uuid?r.uuid+d.db:jn(d,"");l(null,r)})});b.compact=h("compact",function(l,r){"function"===typeof l&&(r=l,l={});l=hn(l);e(jn(d,"_compact"),{method:"POST"}).then(function(){function v(){b.info(function(y,A){A&&!A.compact_running?r(null,{ok:!0}):setTimeout(v,l.interval||200)})}v()})});b.bulkGet=Nm("bulkGet",function(l,r){function v(G){var I={};l.revs&&(I.revs=!0);l.attachments&&(I.attachments=!0);l.latest&&(I.latest=
!0);e(jn(d,"_bulk_get"+FK(I)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(M){l.attachments&&l.binary&&M.data.results.forEach(function(L){L.docs.forEach(qR)});G(null,M.data)}).catch(G)}function y(){function G(aa){return function(ra,Ea){L[aa]=Ea.results;++M===I&&r(null,{results:zK(L)})}}for(var I=Math.ceil(l.docs.length/50),M=0,L=Array(I),S=0;S<I;S++){var R=aG(l,["revs","attachments","binary","latest"]);R.docs=l.docs.slice(50*S,Math.min(l.docs.length,50*(S+1)));u1(A,R,G(S))}}var A=
this,E=EK(d,""),F=sR[E];"boolean"!==typeof F?v(function(G,I){G?(sR[E]=!1,WQ(G.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),y()):(sR[E]=!0,r(null,I))}):F?v(r):y()});b._info=function(l){k().then(function(){return a(jn(d,""))}).then(function(r){return r.json()}).then(function(r){r.host=jn(d,"");l(null,r)}).catch(l)};b.fetch=function(l,r){return k().then(function(){var v="/"===l.substring(0,1)?EK(d,l.substring(1)):jn(d,l);return a(v,r)})};b.get=h("get",function(l,r,v){function y(F){function G(L){var S=
I[L];L=IA(F._id)+"/"+n(L)+"?rev="+F._rev;return a(jn(d,L)).then(function(R){return"buffer"in R?R.buffer():R.blob()}).then(function(R){if(r.binary){var aa=Object.getOwnPropertyDescriptor(R.__proto__,"type");if(!aa||aa.set)R.type=S.content_type;return R}return new Promise(function(ra){cR(R,ra)})}).then(function(R){delete S.stub;delete S.length;S.data=R})}var I=F._attachments,M=I&&Object.keys(I);if(I&&M.length)return M=M.map(function(L){return function(){return G(L)}}),Lga(M,5)}function A(F){return Array.isArray(F)?
Promise.all(F.map(function(G){if(G.ok)return y(G.ok)})):y(F)}"function"===typeof r&&(v=r,r={});r=hn(r);var E={};r.revs&&(E.revs=!0);r.revs_info&&(E.revs_info=!0);r.latest&&(E.latest=!0);r.open_revs&&("all"!==r.open_revs&&(r.open_revs=JSON.stringify(r.open_revs)),E.open_revs=r.open_revs);r.rev&&(E.rev=r.rev);r.conflicts&&(E.conflicts=r.conflicts);r.update_seq&&(E.update_seq=r.update_seq);l=IA(l);E=jn(d,l+FK(E));e(E).then(function(F){return Promise.resolve().then(function(){if(r.attachments)return A(F.data)}).then(function(){v(null,
F.data)})}).catch(function(F){F.docId=l;v(F)})});b.remove=h("remove",function(l,r,v,y){"string"===typeof r?(l={_id:l,_rev:r},"function"===typeof v&&(y=v,v={})):"function"===typeof r?(y=r,v={}):(y=v,v=r);r=l._rev||v.rev;r=jn(d,IA(l._id))+"?rev="+r;e(r,{method:"DELETE"},y).catch(y)});b.getAttachment=h("getAttachment",function(l,r,v,y){"function"===typeof v&&(y=v,v={});v=v.rev?"?rev="+v.rev:"";l=jn(d,IA(l))+"/"+n(r)+v;var A;a(l,{method:"GET"}).then(function(E){A=E.headers.get("content-type");if(E.ok)return"undefined"===
typeof GK||GK.browser||"function"!==typeof E.buffer?E.blob():E.buffer();throw E;}).then(function(E){"undefined"===typeof GK||GK.browser||(E.type=A);y(null,E)}).catch(function(E){y(E)})});b.removeAttachment=h("removeAttachment",function(l,r,v,y){l=jn(d,IA(l)+"/"+n(r))+"?rev="+v;e(l,{method:"DELETE"},y).catch(y)});b.putAttachment=h("putAttachment",function(l,r,v,y,A,E){"function"===typeof A&&(E=A,A=y,y=v,v=null);l=IA(l)+"/"+n(r);l=jn(d,l);v&&(l+="?rev="+v);if("string"===typeof y){try{var F=atob(y)}catch(G){return E(hj(X1,
"Attachment is not a valid base64 string"))}y=F?aR(F,A):""}e(l,{headers:new uD({"Content-Type":A}),method:"PUT",body:y},E).catch(E)});b._bulkDocs=function(l,r,v){l.new_edits=r.new_edits;k().then(function(){return Promise.all(l.docs.map(e2))}).then(function(){return e(jn(d,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},v)}).catch(v)};b._put=function(l,r,v){k().then(function(){return e2(l)}).then(function(){return e(jn(d,IA(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(y){v(null,
y.data)}).catch(function(y){y.docId=l&&l._id;v(y)})};b.allDocs=h("allDocs",function(l,r){"function"===typeof l&&(r=l,l={});l=hn(l);var v={},y="GET";l.conflicts&&(v.conflicts=!0);l.update_seq&&(v.update_seq=!0);l.descending&&(v.descending=!0);l.include_docs&&(v.include_docs=!0);l.attachments&&(v.attachments=!0);l.key&&(v.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(v.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(v.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(v.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(v.limit=l.limit);"undefined"!==typeof l.skip&&(v.skip=l.skip);v=FK(v);if("undefined"!==typeof l.keys){y="POST";var A={keys:l.keys}}e(jn(d,"_all_docs"+v),{method:y,body:JSON.stringify(A)}).then(function(E){l.include_docs&&l.attachments&&l.binary&&E.data.rows.forEach(qR);r(null,E.data)}).catch(r)});b._changes=function(l){var r="batch_size"in l?l.batch_size:25;l=hn(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var v="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>v-l.timeout&&(v=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>v-l.heartbeat&&(v=l.heartbeat+5E3);var y={};"timeout"in l&&l.timeout&&(y.timeout=l.timeout);var A="undefined"!==typeof l.limit?l.limit:!1,E=A;l.style&&(y.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)y.include_docs=!0;l.attachments&&(y.attachments=!0);l.continuous&&(y.feed="longpoll");l.seq_interval&&(y.seq_interval=l.seq_interval);
l.conflicts&&(y.conflicts=!0);l.descending&&(y.descending=!0);l.update_seq&&(y.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(y.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(y.filter=l.filter);l.view&&"string"===typeof l.view&&(y.filter="_view",y.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var F in l.query_params)l.query_params.hasOwnProperty(F)&&(y[F]=l.query_params[F]);var G="GET";if(l.doc_ids){y.filter="_doc_ids";G="POST";var I={doc_ids:l.doc_ids}}else l.selector&&
(y.filter="_selector",G="POST",I={selector:l.selector});var M=new Oga,L,S=function(ra,Ea){if(!l.aborted){y.since=ra;"object"===typeof y.since&&(y.since=JSON.stringify(y.since));l.descending?A&&(y.limit=E):y.limit=!A||E>r?r:E;var K=jn(d,"_changes"+FK(y)),Z={signal:M.signal,method:G,body:JSON.stringify(I)};L=ra;l.aborted||k().then(function(){return e(K,Z,Ea)}).catch(Ea)}},R={results:[]},aa=function(ra,Ea){if(!l.aborted){var K=0;if(Ea&&Ea.results){K=Ea.results.length;R.last_seq=Ea.last_seq;var Z=null,
U=null;"number"===typeof Ea.pending&&(Z=Ea.pending);if("string"===typeof R.last_seq||"number"===typeof R.last_seq)U=R.last_seq;Ea.results=Ea.results.filter(function(V){E--;var na=XQ(l)(V);na&&(l.include_docs&&l.attachments&&l.binary&&qR(V),l.return_docs&&R.results.push(V),l.onChange(V,Z,U));return na})}else if(ra){l.aborted=!0;l.complete(ra);return}Ea&&Ea.last_seq&&(L=Ea.last_seq);ra=A&&0>=E||Ea&&K<r||l.descending;(!l.continuous||A&&0>=E)&&ra?l.complete(null,R):Ru(function(){S(L,aa)})}};S(l.since||
0,aa);return{cancel:function(){l.aborted=!0;M.abort()}}};b.revsDiff=h("revsDiff",function(l,r,v){"function"===typeof r&&(v=r);e(jn(d,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},v).catch(v)});b._close=function(l){l()};b._destroy=function(l,r){e(jn(d,""),{method:"DELETE"}).then(function(v){r(null,v)}).catch(function(v){404===v.status?r(null,{ok:!0}):r(v)})}}function JA(f){this.status=400;this.name="query_parse_error";this.message=f;this.error=!0;try{Error.captureStackTrace(this,JA)}catch(c){}}
function HK(f){this.status=404;this.name="not_found";this.message=f;this.error=!0;try{Error.captureStackTrace(this,HK)}catch(c){}}function IK(f){this.status=500;this.name="invalid_value";this.message=f;this.error=!0;try{Error.captureStackTrace(this,IK)}catch(c){}}function g2(f,c){c&&f.then(function(h){Ru(function(){c(null,h)})},function(h){Ru(function(){c(h)})});return f}function Pga(f){return nD(function(c){var h=c.pop();c=f.apply(this,c);"function"===typeof h&&g2(c,h);return c})}function Qga(f,
c){return f.then(function(h){return c().then(function(){return h})},function(h){return c().then(function(){throw h;})})}function tR(f,c){return function(){var h=arguments,e=this;return f.add(function(){return c.apply(e,h)})}}function h2(f){f=new hG(f);var c=Array(f.size),h=-1;f.forEach(function(e){c[++h]=e});return c}function uR(f){var c=Array(f.size),h=-1;f.forEach(function(e,k){c[++h]=k});return c}function i2(f){return new IK("builtin "+f+" function requires map values to be numbers or number arrays")}
function vR(f){for(var c=0,h=0,e=f.length;h<e;h++){var k=f[h];if("number"!==typeof k)if(Array.isArray(k)){c="number"===typeof c?[c]:c;for(var n=0,b=k.length;n<b;n++){var d=k[n];if("number"!==typeof d)throw i2("_sum");"undefined"===typeof c[n]?c.push(d):c[n]+=d}}else throw i2("_sum");else"number"===typeof c?c+=k:c[0]+=k}return c}function j2(f,c){return ZQ("return ("+f.replace(/;\s*$/,"")+");",{emit:c,sum:vR,log:Rga,isArray:Sga,toJSON:Tga})}function iG(){this.promise=new Promise(function(f){f()})}function k2(f){if(!f)return"undefined";
switch(typeof f){case "function":return f.toString();case "string":return f.toString();default:return JSON.stringify(f)}}function Uga(f,c){return k2(f)+k2(c)+"undefined"}function l2(f,c,h,e,k,n){var b=Uga(h,e);if(!k){var d=f._cachedViews=f._cachedViews||{};if(d[b])return d[b]}var m=f.info().then(function(a){var g=a.db_name+"-mrview-"+(k?"temp":BK.hash(b));return AK(f,"_local/"+n,function(l){l.views=l.views||{};var r=c;-1===r.indexOf("/")&&(r=c+"/"+c);r=l.views[r]=l.views[r]||{};if(!r[g])return r[g]=
!0,l}).then(function(){return f.registerDependentDatabase(g).then(function(l){l=l.db;l.auto_compaction=!0;var r={name:g,db:l,sourceDB:f,adapter:f.adapter,mapFun:h,reduceFun:e};return r.db.get("_local/lastSeq").catch(function(v){if(404!==v.status)throw v;}).then(function(v){r.seq=v?v.seq:0;if(d)r.db.once("destroyed",function(){delete d[b]});return r})})})});d&&(d[b]=m);return m}function wR(f){return-1===f.indexOf("/")?[f,f]:f.split("/")}function Vga(f){return 1===f.length&&/^1-/.test(f[0].rev)}function m2(f,
c){try{f.emit("error",c)}catch(h){Gr("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),Gr("error",c)}}function n2(f,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(e){return f.getAttachment(c._id,e,{rev:c._rev})}))}function Wga(f,c,h){var e=Qu(c)&&!Qu(f),k=Object.keys(h._attachments);return e?f.get(h._id).then(function(n){return Promise.all(k.map(function(b){return n._attachments&&
n._attachments[b]&&n._attachments[b].digest===h._attachments[b].digest?f.getAttachment(n._id,b):c.getAttachment(h._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return n2(c,h)}):n2(c,h)}function Xga(f){var c=[];Object.keys(f).forEach(function(h){f[h].missing.forEach(function(e){c.push({id:h,rev:e})})});return{docs:c,revs:!0,latest:!0}}function Yga(f,c,h,e){function k(d){return f.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(m){if(e.cancelled)throw Error("cancelled");m.rows.forEach(function(a){var g;
(g=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(g=a.doc,g=g._attachments&&0<Object.keys(g._attachments).length);g||(g=a.doc,g=g._conflicts&&0<g._conflicts.length);g||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete h[a.id])})})}h=hn(h);var n=[],b=!0;return Promise.resolve().then(function(){var d=Object.keys(h).filter(function(m){m=h[m].missing;return 1===m.length&&/^1-/.test(m[0])});if(0<d.length)return k(d)}).then(function(){var d=Xga(h);if(d.docs.length)return f.bulkGet(d).then(function(m){if(e.cancelled)throw Error("cancelled");
return Promise.all(m.results.map(function(a){return Promise.all(a.docs.map(function(g){var l=g.ok;g.error&&(b=!1);return l&&l._attachments?Wga(c,f,l).then(function(r){var v=Object.keys(l._attachments);r.forEach(function(y,A){A=l._attachments[v[A]];delete A.stub;delete A.length;A.data=y});return l}):l}))})).then(function(a){n=n.concat(zK(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function xR(f,c,h,e,k){return f.get(c).catch(function(n){if(404===n.status)return"http"!==f.adapter&&
"https"!==f.adapter||WQ(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:e,_id:c,history:[],replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!k.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(b){return b.session_id!==e}),n.history.unshift({last_seq:h,session_id:e}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=e,n.last_seq=h,f.put(n).catch(function(b){if(409===b.status)return xR(f,c,h,e,k);throw b;
})})}function jG(f,c,h,e,k){this.src=f;this.target=c;this.id=h;this.returnValue=e;this.opts=k||{}}function o2(f,c){var h=f[0],e=f.slice(1),k=c[0],n=c.slice(1);return h&&0!==c.length?yR(h.session_id,c)?{last_seq:h.last_seq,history:f}:yR(k.session_id,e)?{last_seq:k.last_seq,history:n}:o2(e,n):{last_seq:0,history:[]}}function yR(f,c){var h=c[0],e=c.slice(1);return f&&0!==c.length?f===h.session_id?!0:yR(f,e):!1}function p2(f){return"number"===typeof f.status&&4===Math.floor(f.status/100)}function Zga(f,
c,h,e){if(!1===f.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof f.back_off_function&&(f.back_off_function=Ifa);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var k=function(){f.current_back_off=0};c.once("paused",function(){c.removeListener("active",k)});c.once("active",k)}f.current_back_off=f.current_back_off||0;f.current_back_off=f.back_off_function(f.current_back_off);setTimeout(e,f.current_back_off)}}function $ga(f){return Object.keys(f).sort(Fn).reduce(function(c,
h){c[h]=f[h];return c},{})}function aha(f,c,h){var e=h.doc_ids?h.doc_ids.sort(Fn):"",k=h.filter?h.filter.toString():"",n="",b="",d="";h.selector&&(d=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify($ga(h.query_params)));h.filter&&"_view"===h.filter&&(b=h.view.toString());return Promise.all([f.id(),c.id()]).then(function(m){var a=m[0]+m[1]+k+b+n+e+d;return new Promise(function(g){dR(a,g)})}).then(function(m){m=m.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+m})}function q2(f,
c,h,e,k){function n(){return jb?Promise.resolve():aha(f,c,h).then(function(qa){ya=qa;jb=new jG(f,c,ya,e,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){gb=[];if(0!==L.docs.length){var qa=L.docs;return c.bulkDocs({docs:qa,new_edits:!1},{timeout:h.timeout}).then(function(La){if(e.cancelled)throw v(),
Error("cancelled");var Lb=Object.create(null);La.forEach(function(qc){qc.error&&(Lb[qc.id]=qc)});La=Object.keys(Lb).length;k.doc_write_failures+=La;k.docs_written+=qa.length-La;qa.forEach(function(qc){var dc=Lb[qc._id];if(dc)if(k.errors.push(dc),qc=(dc.name||"").toLowerCase(),"unauthorized"===qc||"forbidden"===qc)e.emit("denied",hn(dc));else throw dc;else gb.push(qc)})},function(La){k.doc_write_failures+=qa.length;throw La;})}}function d(){if(L.error)throw Error("There was a problem getting docs.");
k.last_seq=Ea=L.seq;var qa=hn(k);gb.length&&(qa.docs=gb,"number"===typeof L.pending&&(qa.pending=L.pending,delete L.pending),e.emit("change",qa));R=!0;return jb.writeCheckpoint(L.seq,ka).then(function(){R=!1;if(e.cancelled)throw v(),Error("cancelled");L=void 0;F()}).catch(function(La){I(La);throw La;})}function m(){var qa={};L.changes.forEach(function(La){"_user/"!==La.id&&(qa[La.id]=La.changes.map(function(Lb){return Lb.rev}))});return c.revsDiff(qa).then(function(La){if(e.cancelled)throw v(),Error("cancelled");
L.diffs=La})}function a(){return Yga(f,c,L.diffs,e).then(function(qa){L.error=!qa.ok;qa.docs.forEach(function(La){delete L.diffs[La._id];k.docs_read++;L.docs.push(La)})})}function g(){e.cancelled||L||(0===M.length?l(!0):(L=M.shift(),m().then(a).then(b).then(d).then(g).catch(function(qa){r("batch processing terminated with error",qa)})))}function l(qa){if(0===S.changes.length){if(0===M.length&&!L){if(K&&ia.live||aa)e.state="pending",e.emit("paused");aa&&v()}}else if(qa||aa||S.changes.length>=Z){M.push(S);
S={seq:0,changes:[],docs:[]};if("pending"===e.state||"stopped"===e.state)e.state="active",e.emit("active");g()}}function r(qa,La){ra||(La.message||(La.message=qa),k.ok=!1,k.status="aborting",M=[],S={seq:0,changes:[],docs:[]},v(La))}function v(qa){if(!ra){if(e.cancelled&&(k.status="cancelled",R))return;k.status=k.status||"complete";k.end_time=(new Date).toISOString();k.last_seq=Ea;ra=!0;if(qa){qa=hj(qa);qa.result=k;var La=(qa.name||"").toLowerCase();"unauthorized"===La||"forbidden"===La?(e.emit("error",
qa),e.removeAllListeners()):Zga(h,e,qa,function(){q2(f,c,h,e)})}else e.emit("complete",k),e.removeAllListeners()}}function y(qa,La,Lb){if(e.cancelled)return v();"number"===typeof La&&(S.pending=La);XQ(h)(qa)&&(S.seq=qa.seq||Lb,S.changes.push(qa),Ru(function(){l(0===M.length&&ia.live)}))}function A(qa){V=!1;if(e.cancelled)return v();if(0<qa.results.length)ia.since=qa.results[qa.results.length-1].seq,F(),l(!0);else{var La=function(){K?(ia.live=!0,F()):aa=!0;l(!0)};L||0!==qa.results.length?La():(R=!0,
jb.writeCheckpoint(qa.last_seq,ka).then(function(){R=!1;k.last_seq=Ea=qa.last_seq;La()}).catch(I))}}function E(qa){V=!1;if(e.cancelled)return v();r("changes rejected",qa)}function F(){function qa(){Lb.cancel()}function La(){e.removeListener("cancel",qa)}if(!V&&!aa&&M.length<U){V=!0;e._changes&&(e.removeListener("cancel",e._abortChanges),e._changes.cancel());e.once("cancel",qa);var Lb=f.changes(ia).on("change",y);Lb.then(La,La);Lb.then(A).catch(E);h.retry&&(e._changes=Lb,e._abortChanges=qa)}}function G(){n().then(function(){if(e.cancelled)v();
else return jb.getCheckpoint().then(function(qa){Ea=qa;ia={since:Ea,limit:Z,batch_size:Z,style:"all_docs",doc_ids:na,selector:la,return_docs:!0};h.filter&&("string"!==typeof h.filter?ia.include_docs=!0:ia.filter=h.filter);"heartbeat"in h&&(ia.heartbeat=h.heartbeat);"timeout"in h&&(ia.timeout=h.timeout);h.query_params&&(ia.query_params=h.query_params);h.view&&(ia.view=h.view);F()})}).catch(function(qa){r("getCheckpoint rejected with ",qa)})}function I(qa){R=!1;r("writeCheckpoint completed with error",
qa)}var M=[],L,S={seq:0,changes:[],docs:[]},R=!1,aa=!1,ra=!1,Ea=0,K=h.continuous||h.live||!1,Z=h.batch_size||100,U=h.batches_limit||10,V=!1,na=h.doc_ids,la=h.selector,ya,jb,gb=[],ka=CK();k=k||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ia={};e.ready(f,c);e.cancelled?v():(e._addedListeners||(e.once("cancel",v),"function"===typeof h.complete&&(e.once("error",h.complete),e.once("complete",function(qa){h.complete(null,qa)})),e._addedListeners=
!0),"undefined"===typeof h.since?G():n().then(function(){R=!0;return jb.writeCheckpoint(h.since,ka)}).then(function(){R=!1;e.cancelled?v():(Ea=h.since,G())}).catch(I))}function JK(){Sp.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var f=this,c=new Promise(function(h,e){f.once("complete",h);f.once("error",e)});f.then=function(h,e){return c.then(h,e)};f.catch=function(h){return c.catch(h)};f.catch(function(){})}function KK(f,c){var h=c.PouchConstructor;return"string"===typeof f?new h(f,
c):f}function zR(f,c,h,e){"function"===typeof h&&(e=h,h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw hj(yK,"`doc_ids` filter parameter is not a list.");h.complete=e;h=hn(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;e=new JK(h);f=KK(f,h);c=KK(c,h);q2(f,c,h,e);return e}function bha(f,c,h,e){"function"===typeof h&&(e=h,h={});"undefined"===typeof h&&(h={});h=hn(h);h.PouchConstructor=h.PouchConstructor||
this;f=KK(f,h);c=KK(c,h);return new AR(f,c,h,e)}function AR(f,c,h,e){function k(I){y.emit("change",{direction:"pull",change:I})}function n(I){y.emit("change",{direction:"push",change:I})}function b(I){y.emit("denied",{direction:"push",doc:I})}function d(I){y.emit("denied",{direction:"pull",doc:I})}function m(){y.pushPaused=!0;y.pullPaused&&y.emit("paused")}function a(){y.pullPaused=!0;y.pushPaused&&y.emit("paused")}function g(){y.pushPaused=!1;y.pullPaused&&y.emit("active",{direction:"push"})}function l(){y.pullPaused=
!1;y.pushPaused&&y.emit("active",{direction:"pull"})}function r(I){return function(M,L){var S="denied"===M&&(L===d||L===b),R="paused"===M&&(L===a||L===m),aa="active"===M&&(L===l||L===g);if("change"===M&&(L===k||L===n)||S||R||aa)M in F||(F[M]={}),F[M][I]=!0,2===Object.keys(F[M]).length&&y.removeAllListeners(M)}}function v(I,M,L){if(-1==I.listeners(M).indexOf(L))I.on(M,L)}var y=this;this.canceled=!1;var A=h.push?sD({},h,h.push):h,E=h.pull?sD({},h,h.pull):h;this.push=zR(f,c,A);this.pull=zR(c,f,E);this.pullPaused=
this.pushPaused=!0;var F={};h.live&&(this.push.on("complete",y.pull.cancel.bind(y.pull)),this.pull.on("complete",y.push.cancel.bind(y.push)));this.on("newListener",function(I){"change"===I?(v(y.pull,"change",k),v(y.push,"change",n)):"denied"===I?(v(y.pull,"denied",d),v(y.push,"denied",b)):"active"===I?(v(y.pull,"active",l),v(y.push,"active",g)):"paused"===I&&(v(y.pull,"paused",a),v(y.push,"paused",m))});this.on("removeListener",function(I){"change"===I?(y.pull.removeListener("change",k),y.push.removeListener("change",
n)):"denied"===I?(y.pull.removeListener("denied",d),y.push.removeListener("denied",b)):"active"===I?(y.pull.removeListener("active",l),y.push.removeListener("active",g)):"paused"===I&&(y.pull.removeListener("paused",a),y.push.removeListener("paused",m))});this.pull.on("removeListener",r("pull"));this.push.on("removeListener",r("push"));var G=Promise.all([this.push,this.pull]).then(function(I){I={push:I[0],pull:I[1]};y.emit("complete",I);e&&e(null,I);y.removeAllListeners();return I},function(I){y.cancel();
e?e(I):y.emit("error",I);y.removeAllListeners();if(e)throw I;});this.then=function(I,M){return G.then(I,M)};this.catch=function(I){return G.catch(I)}}function ry(){this._store={}}function kG(f){this._store=new ry;if(f&&Array.isArray(f))for(var c=0,h=f.length;c<h;c++)this.add(f[c])}function cha(){vD&&KA&&(vD=!1,KA.length?sy=KA.concat(sy):lG=-1,sy.length&&r2())}function r2(){if(!vD){BR=!1;vD=!0;for(var f=sy.length,c=setTimeout(cha);f;){KA=sy;for(sy=[];KA&&++lG<f;)KA[lG].run();lG=-1;f=sy.length}KA=null;
lG=-1;vD=!1;clearTimeout(c)}}function s2(f,c){this.fun=f;this.array=c}function fl(f,c,h){Error.call(this,h);this.status=f;this.name=c;this.message=h;this.error=!0}function LA(f){return f.call.bind(f)}function mG(f,c){if("object"!=typeof f)return!1;try{return c(f),!0}catch(h){return!1}}function t2(f){return Tp&&Bq?void 0!==Hr(f):u2(f)||v2(f)||w2(f)||x2(f)||y2(f)||z2(f)||A2(f)||B2(f)||C2(f)||D2(f)||E2(f)}function u2(f){return Tp&&Bq?"Uint8Array"===Hr(f):"[object Uint8Array]"===Wl(f)||dha(f)&&void 0!==
f.buffer}function v2(f){return Tp&&Bq?"Uint8ClampedArray"===Hr(f):"[object Uint8ClampedArray]"===Wl(f)}function w2(f){return Tp&&Bq?"Uint16Array"===Hr(f):"[object Uint16Array]"===Wl(f)}function x2(f){return Tp&&Bq?"Uint32Array"===Hr(f):"[object Uint32Array]"===Wl(f)}function y2(f){return Tp&&Bq?"Int8Array"===Hr(f):"[object Int8Array]"===Wl(f)}function z2(f){return Tp&&Bq?"Int16Array"===Hr(f):"[object Int16Array]"===Wl(f)}function A2(f){return Tp&&Bq?"Int32Array"===Hr(f):"[object Int32Array]"===Wl(f)}
function B2(f){return Tp&&Bq?"Float32Array"===Hr(f):"[object Float32Array]"===Wl(f)}function C2(f){return Tp&&Bq?"Float64Array"===Hr(f):"[object Float64Array]"===Wl(f)}function D2(f){return Tp&&Bq?"BigInt64Array"===Hr(f):"[object BigInt64Array]"===Wl(f)}function E2(f){return Tp&&Bq?"BigUint64Array"===Hr(f):"[object BigUint64Array]"===Wl(f)}function LK(f){return"[object Map]"===Wl(f)}function MK(f){return"[object Set]"===Wl(f)}function NK(f){return"[object WeakMap]"===Wl(f)}function CR(f){return"[object WeakSet]"===
Wl(f)}function OK(f){return"[object ArrayBuffer]"===Wl(f)}function F2(f){return"undefined"!=typeof ArrayBuffer&&(OK.working?OK(f):f instanceof ArrayBuffer)}function PK(f){return"[object DataView]"===Wl(f)}function G2(f){return"undefined"!=typeof DataView&&(PK.working?PK(f):f instanceof DataView)}function QK(f){return"[object SharedArrayBuffer]"===Wl(f)}function H2(f){return"undefined"!=typeof SharedArrayBuffer&&(QK.working?QK(f):f instanceof SharedArrayBuffer)}function I2(f){return mG(f,eha)}function J2(f){return mG(f,
fha)}function K2(f){return mG(f,gha)}function L2(f){return M2&&mG(f,hha)}function N2(f){return DR&&mG(f,iha)}function ty(f,c){var h={seen:[],stylize:jha};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),ER(c)?h.showHidden=c:c&&ni._extend(h,c),MA(h.showHidden)&&(h.showHidden=!1),MA(h.depth)&&(h.depth=2),MA(h.colors)&&(h.colors=!1),MA(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=kha),RK(h,f,h.depth)}function kha(f,c){return(c=ty.styles[c])?
"\u001b["+ty.colors[c][0]+"m"+f+"\u001b["+ty.colors[c][1]+"m":f}function jha(f,c){return f}function RK(f,c,h){if(f.customInspect&&c&&SK(c.inspect)&&c.inspect!==ni.inspect&&(!c.constructor||c.constructor.prototype!==c)){var e=c.inspect(h,f);return TK(e)||(e=RK(f,e,h)),e}var k=function(a,g){if(MA(g))return a.stylize("undefined","undefined");if(TK(g))return g="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(g,"string");if(O2(g))return a.stylize(""+g,"number");
if(ER(g))return a.stylize(""+g,"boolean");if(null===g)return a.stylize("null","null")}(f,c);if(k)return k;k=Object.keys(c);var n=function(a){var g={};return a.forEach(function(l,r){g[l]=!0}),g}(k);if(f.showHidden&&(k=Object.getOwnPropertyNames(c)),nG(c)&&(0<=k.indexOf("message")||0<=k.indexOf("description")))return FR(c);if(0===k.length){if(SK(c))return f.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(oG(c))return f.stylize(RegExp.prototype.toString.call(c),"regexp");if(UK(c))return f.stylize(Date.prototype.toString.call(c),
"date");if(nG(c))return FR(c)}var b="",d=!1,m=["{","}"];(P2(c)&&(d=!0,m=["[","]"]),SK(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return oG(c)&&(b=" "+RegExp.prototype.toString.call(c)),UK(c)&&(b=" "+Date.prototype.toUTCString.call(c)),nG(c)&&(b=" "+FR(c)),0!==k.length||d&&0!=c.length?0>h?oG(c)?f.stylize(RegExp.prototype.toString.call(c),"regexp"):f.stylize("[Object]","special"):(f.seen.push(c),e=d?function(a,g,l,r,v){for(var y=[],A=0,E=g.length;A<E;++A)Object.prototype.hasOwnProperty.call(g,
String(A))?y.push(GR(a,g,l,r,String(A),!0)):y.push("");return v.forEach(function(F){F.match(/^\d+$/)||y.push(GR(a,g,l,r,F,!0))}),y}(f,c,h,n,k):k.map(function(a){return GR(f,c,h,n,a,d)}),f.seen.pop(),function(a,g,l){var r=0;return 60<a.reduce(function(v,y){return r++,0<=y.indexOf("\n")&&r++,v+y.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===g?"":g+"\n ")+" "+a.join(",\n  ")+" "+l[1]:l[0]+g+" "+a.join(", ")+" "+l[1]}(e,b,m)):m[0]+b+m[1]}function FR(f){return"["+Error.prototype.toString.call(f)+
"]"}function GR(f,c,h,e,k,n){var b,d,m;if((m=Object.getOwnPropertyDescriptor(c,k)||{value:c[k]}).get?d=m.set?f.stylize("[Getter/Setter]","special"):f.stylize("[Getter]","special"):m.set&&(d=f.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(e,k)||(b="["+k+"]"),d||(0>f.seen.indexOf(m.value)?-1<(d=null===h?RK(f,m.value,null):RK(f,m.value,h-1)).indexOf("\n")&&(d=n?d.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+d.split("\n").map(function(a){return"   "+a}).join("\n")):
d=f.stylize("[Circular]","special")),MA(b)){if(n&&k.match(/^\d+$/))return d;(b=JSON.stringify(""+k)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=f.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=f.stylize(b,"string"))}return b+": "+d}function P2(f){return Array.isArray(f)}function ER(f){return"boolean"==typeof f}function O2(f){return"number"==typeof f}function TK(f){return"string"==typeof f}function MA(f){return void 0===f}function oG(f){return wD(f)&&
"[object RegExp]"===Object.prototype.toString.call(f)}function wD(f){return"object"==typeof f&&null!==f}function UK(f){return wD(f)&&"[object Date]"===Object.prototype.toString.call(f)}function nG(f){return wD(f)&&("[object Error]"===Object.prototype.toString.call(f)||f instanceof Error)}function SK(f){return"function"==typeof f}function HR(f){return 10>f?"0"+f.toString(10):f.toString(10)}function lha(){var f=new Date,c=[HR(f.getHours()),HR(f.getMinutes()),HR(f.getSeconds())].join(":");return[f.getDate(),
mha[f.getMonth()],c].join(" ")}function nha(f,c){if(!f){var h=Error("Promise was rejected with a falsy value");h.reason=f;f=h}return c(f)}function Q2(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");return-1===f&&(f=c),[f,f===c?0:4-f%4]}function oha(f,c,h){for(var e,k=[],n=c;n<h;n+=3)c=(f[n]<<16&16711680)+(f[n+1]<<8&65280)+(255&f[n+2]),k.push(Tu[(e=c)>>18&63]+Tu[e>>12&63]+Tu[e>>6&63]+Tu[63&e]);return k.join("")}function Fw(f){if(2147483647<
f)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);return Object.setPrototypeOf(f,jf.prototype),f}function jf(f,c,h){if("number"==typeof f){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return IR(f)}return R2(f,c,h)}function R2(f,c,h){if("string"==typeof f)return function(k,n){"string"==typeof n&&""!==n||(n="utf8");if(!jf.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|S2(k,
n),d=Fw(b);k=d.write(k,n);k!==b&&(d=d.slice(0,k));return d}(f,c);if(ArrayBuffer.isView(f))return JR(f);if(null==f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Gw(f,ArrayBuffer)||f&&Gw(f.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Gw(f,SharedArrayBuffer)||f&&Gw(f.buffer,SharedArrayBuffer)))return pha(f,c,h);if("number"==typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');
var e=f.valueOf&&f.valueOf();if(null!=e&&e!==f)return jf.from(e,c,h);if(e=function(k){if(jf.isBuffer(k)){var n=0|KR(k.length),b=Fw(n);return 0===b.length||k.copy(b,0,0,n),b}if(void 0!==k.length)return(n="number"!=typeof k.length)||(n=k.length,n=n!=n),n?Fw(0):JR(k);if("Buffer"===k.type&&Array.isArray(k.data))return JR(k.data)}(f))return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof f[Symbol.toPrimitive])return jf.from(f[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function T2(f){if("number"!=typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function IR(f){return T2(f),Fw(0>f?0:0|KR(f))}function JR(f){for(var c=0>f.length?0:0|KR(f.length),h=Fw(c),e=0;e<c;e+=1)h[e]=255&f[e];return h}function pha(f,c,h){if(0>c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var e;return e=void 0===c&&void 0===h?new Uint8Array(f):void 0===h?new Uint8Array(f,c):new Uint8Array(f,c,h),Object.setPrototypeOf(e,jf.prototype),e}function KR(f){if(2147483647<=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|f}function S2(f,c){if(jf.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Gw(f,ArrayBuffer))return f.byteLength;if("string"!=typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof f);var h=f.length,e=2<arguments.length&&!0===arguments[2];if(!e&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return LR(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return U2(f).length;default:if(k)return e?-1:LR(f).length;c=(""+c).toLowerCase();k=!0}}function qha(f,c,h){var e=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>f)&&(h=f);for(f="";c<h;++c)f+=rha[this[c]];return f;case "utf8":case "utf-8":return V2(this,c,h);case "ascii":f="";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(127&this[c]);return f;case "latin1":case "binary":f="";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return 0===c&&h===this.length?MR.fromByteArray(this):
MR.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(f=0;f<c.length;f+=2)h+=String.fromCharCode(c[f]+256*c[f+1]);return h;default:if(e)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();e=!0}}function NA(f,c,h){var e=f[c];f[c]=f[h];f[h]=e}function W2(f,c,h,e,k){if(0===f.length)return-1;"string"==typeof h?(e=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=k?0:f.length-1),0>h&&(h=f.length+
h),h>=f.length){if(k)return-1;h=f.length-1}else if(0>h){if(!k)return-1;h=0}if("string"==typeof c&&(c=jf.from(c,e)),jf.isBuffer(c))return 0===c.length?-1:X2(f,c,h,e,k);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(f,c,h):Uint8Array.prototype.lastIndexOf.call(f,c,h):X2(f,[c],h,e,k);throw new TypeError("val must be string, number or Buffer");}function X2(f,c,h,e,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
d=f.length,m=c.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>f.length||2>c.length)return-1;b=2;d/=2;m/=2;h/=2}if(k)for(e=-1;h<d;h++)if(n(f,h)===n(c,-1===e?0:h-e)){if(-1===e&&(e=h),h-e+1===m)return e*b}else-1!==e&&(h-=h-e),e=-1;else for(h+m>d&&(h=d-m);0<=h;h--){d=!0;for(e=0;e<m;e++)if(n(f,h+e)!==n(c,e)){d=!1;break}if(d)return h}return-1}function Y2(f,c,h,e){for(var k=[],n=0;n<c.length;++n)k.push(255&c.charCodeAt(n));return VK(k,f,h,e)}
function V2(f,c,h){h=Math.min(f.length,h);for(var e=[];c<h;){var k,n,b=f[c],d=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=h)switch(m){case 1:128>b&&(d=b);break;case 2:128==(192&(k=f[c+1]))&&127<(n=(31&b)<<6|63&k)&&(d=n);break;case 3:k=f[c+1];var a=f[c+2];128==(192&k)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&k)<<6|63&a)&&(55296>n||57343<n)&&(d=n);break;case 4:k=f[c+1];a=f[c+2];var g=f[c+3];128==(192&k)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&k)<<12|(63&a)<<6|63&g)&&1114112>n&&(d=n)}null===d?
(d=65533,m=1):65535<d&&(d-=65536,e.push(d>>>10&1023|55296),d=56320|1023&d);e.push(d);c+=m}f=e.length;if(4096>=f)e=String.fromCharCode.apply(String,e);else{h="";for(k=0;k<f;)h+=String.fromCharCode.apply(String,e.slice(k,k+=4096));e=h}return e}function Gn(f,c,h){if(0!=f%1||0>f)throw new RangeError("offset is not uint");if(f+c>h)throw new RangeError("Trying to access beyond buffer length");}function Up(f,c,h,e,k,n){if(!jf.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+e>f.length)throw new RangeError("Index out of range");}function Z2(f,c,h,e,k,n){if(h+e>f.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function $2(f,c,h,e,k){return c=+c,h>>>=0,k||Z2(f,0,h,4),xD.write(f,c,h,e,23,4),h+4}function a3(f,c,h,e,k){return c=+c,h>>>=0,k||Z2(f,0,h,8),xD.write(f,c,h,e,52,8),h+8}function LR(f,c){var h;c=c||1/0;for(var e=f.length,k=null,n=[],b=0;b<
e;++b){if(55295<(h=f.charCodeAt(b))&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===e){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&-1<(c-=3)&&n.push(239,191,189);if(k=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function U2(f){return MR.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(sha,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(f))}function VK(f,c,h,e){for(var k=0;k<e&&!(k+h>=c.length||k>=f.length);++k)c[k+h]=f[k];return k}function Gw(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function b3(f,c){for(var h in f)c[h]=f[h]}function OA(f,
c,h){return Uu(f,c,h)}function pG(f){switch(this.encoding=function(c){var h=function(e){if(!e)return"utf8";for(var k;;)switch(e){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return e;default:if(k)return;e=(""+e).toLowerCase();k=!0}}(c);if("string"!=typeof h&&(NR.isEncoding===c3||!c3(c)))throw Error("Unknown encoding: "+c);return h||c}(f),this.encoding){case "utf16le":this.text=
tha;this.end=uha;f=4;break;case "utf8":this.fillLast=vha;f=4;break;case "base64":this.text=wha;this.end=xha;f=3;break;default:return this.write=yha,this.end=zha,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=NR.allocUnsafe(f)}function OR(f){return 127>=f?0:6==f>>5?2:14==f>>4?3:30==f>>3?4:2==f>>6?-1:-2}function vha(f){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&f[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<f.length){if(128!=(192&f[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<f.length&&128!=(192&f[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=f.length?(f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(f.copy(this.lastChar,c,0,f.length),this.lastNeed-=f.length,void 0)}function tha(f,c){if(0==(f.length-c)%2){if(c=f.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=
f[f.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",c,f.length-1)}function uha(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function wha(f,c){var h=(f.length-c)%3;return 0===h?f.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",
c,f.length-h))}function xha(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function yha(f){return f.toString(this.encoding)}function zha(f){return f&&f.length?this.write(f):""}function Ir(f,c,h){h||(h=Error);var e=function(k,n,b){return b.call(this,"string"==typeof c?c:c(k,n,b))||this};$jscomp.inherits(e,h);e.prototype.name=h.name;e.prototype.code=f;d3[f]=e}function e3(f,c){if(Array.isArray(f)){var h=f.length;return f=f.map(function(e){return String(e)}),
2<h?"one of "+c+" "+f.slice(0,h-1).join(", ")+", or "+f[h-1]:2===h?"one of "+c+" "+f[0]+" or "+f[1]:"of "+c+" "+f[0]}return"of "+c+" "+String(f)}function PR(f){try{if(!QR.localStorage)return!1}catch(c){return!1}f=QR.localStorage[f];return null!=f&&"true"===String(f).toLowerCase()}function f3(f,c){var h=Object.keys(f);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(f);c&&(e=e.filter(function(k){return Object.getOwnPropertyDescriptor(f,k).enumerable}));h.push.apply(h,e)}return h}
function Aha(f,c){for(var h=0;h<c.length;h++){var e=c[h];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(f,e.key,e)}}function g3(f,c){RR(f,c);WK(f)}function WK(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function RR(f,c){f.emit("error",c)}function Bha(){}function uy(f,c,h){return c in f?Object.defineProperty(f,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[c]=h,f}function vy(f,
c){return{value:f,done:c}}function Cha(f){var c=f[wy];if(null!==c){var h=f[PA].read();null!==h&&(f[QA]=null,f[wy]=null,f[RA]=null,c(vy(h,!1)))}}function Dha(f){h3.nextTick(Cha,f)}function i3(){function f(ka,ia,qa){F=F||qG();ka=ka||{};"boolean"!=typeof qa&&(qa=ia instanceof F);this.objectMode=!!ka.objectMode;qa&&(this.objectMode=this.objectMode||!!ka.readableObjectMode);this.highWaterMark=Z(this,ka,"readableHighWaterMark",qa);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ka.emitClose;this.autoDestroy=!!ka.autoDestroy;this.destroyed=!1;this.defaultEncoding=ka.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ka.encoding&&(aa||(aa=yD.StringDecoder),this.decoder=new aa(ka.encoding),this.encoding=ka.encoding)}function c(ka){if(F=F||qG(),!(this instanceof
c))return new c(ka);this._readableState=new f(ka,this,this instanceof F);this.readable=!0;ka&&("function"==typeof ka.read&&(this._read=ka.read),"function"==typeof ka.destroy&&(this._destroy=ka.destroy));I.call(this)}function h(ka,ia,qa,La,Lb){R("readableAddChunk",ia);var qc,dc=ka._readableState;if(null===ia)dc.reading=!1,function(oc,$c){if(R("onEofChunk"),!$c.ended){if($c.decoder){var Vb=$c.decoder.end();Vb&&Vb.length&&($c.buffer.push(Vb),$c.length+=$c.objectMode?1:Vb.length)}$c.ended=!0;$c.sync?
n(oc):($c.needReadable=!1,$c.emittedReadable||($c.emittedReadable=!0,b(oc)))}}(ka,dc);else if(Lb||(qc=function(oc,$c){var Vb;var Hd=$c;M.isBuffer(Hd)||Hd instanceof L||"string"==typeof $c||void 0===$c||oc.objectMode||(Vb=new V("chunk",["string","Buffer","Uint8Array"],$c));return Vb}(dc,ia)),qc)jb(ka,qc);else if(dc.objectMode||ia&&0<ia.length)if("string"==typeof ia||dc.objectMode||Object.getPrototypeOf(ia)===M.prototype||(ia=M.from(ia)),La)dc.endEmitted?jb(ka,new ya):e(ka,dc,ia,!0);else if(dc.ended)jb(ka,
new na);else{if(dc.destroyed)return!1;dc.reading=!1;dc.decoder&&!qa?(ia=dc.decoder.write(ia),dc.objectMode||0!==ia.length?e(ka,dc,ia,!1):d(ka,dc)):e(ka,dc,ia,!1)}else La||(dc.reading=!1,d(ka,dc));return!dc.ended&&(dc.length<dc.highWaterMark||0===dc.length)}function e(ka,ia,qa,La){ia.flowing&&0===ia.length&&!ia.sync?(ia.awaitDrain=0,ka.emit("data",qa)):(ia.length+=ia.objectMode?1:qa.length,La?ia.buffer.unshift(qa):ia.buffer.push(qa),ia.needReadable&&n(ka));d(ka,ia)}function k(ka,ia){if(0>=ka||0===
ia.length&&ia.ended)ka=0;else if(ia.objectMode)ka=1;else if(ka!=ka)ka=ia.flowing&&ia.length?ia.buffer.head.data.length:ia.length;else{if(ka>ia.highWaterMark){var qa=ka;var La=(1073741824<=qa?qa=1073741824:(qa--,qa|=qa>>>1,qa|=qa>>>2,qa|=qa>>>4,qa|=qa>>>8,qa|=qa>>>16,qa++),qa);ia.highWaterMark=La}ka=ka<=ia.length?ka:ia.ended?ia.length:(ia.needReadable=!0,0)}return ka}function n(ka){var ia=ka._readableState;R("emitReadable",ia.needReadable,ia.emittedReadable);ia.needReadable=!1;ia.emittedReadable||
(R("emitReadable",ia.flowing),ia.emittedReadable=!0,G.nextTick(b,ka))}function b(ka){var ia=ka._readableState;R("emitReadable_",ia.destroyed,ia.length,ia.ended);ia.destroyed||!ia.length&&!ia.ended||(ka.emit("readable"),ia.emittedReadable=!1);ia.needReadable=!ia.flowing&&!ia.ended&&ia.length<=ia.highWaterMark;r(ka)}function d(ka,ia){ia.readingMore||(ia.readingMore=!0,G.nextTick(m,ka,ia))}function m(ka,ia){for(;!ia.reading&&!ia.ended&&(ia.length<ia.highWaterMark||ia.flowing&&0===ia.length);){var qa=
ia.length;if(R("maybeReadMore read 0"),ka.read(0),qa===ia.length)break}ia.readingMore=!1}function a(ka){var ia=ka._readableState;ia.readableListening=0<ka.listenerCount("readable");ia.resumeScheduled&&!ia.paused?ia.flowing=!0:0<ka.listenerCount("data")&&ka.resume()}function g(ka){R("readable nexttick read 0");ka.read(0)}function l(ka,ia){R("resume",ia.reading);ia.reading||ka.read(0);ia.resumeScheduled=!1;ka.emit("resume");r(ka);ia.flowing&&!ia.reading&&ka.read(0)}function r(ka){var ia=ka._readableState;
for(R("flow",ia.flowing);ia.flowing&&null!==ka.read(););}function v(ka,ia){return 0===ia.length?null:(ia.objectMode?qa=ia.buffer.shift():!ka||ka>=ia.length?(qa=ia.decoder?ia.buffer.join(""):1===ia.buffer.length?ia.buffer.first():ia.buffer.concat(ia.length),ia.buffer.clear()):qa=ia.buffer.consume(ka,ia.decoder),qa);var qa}function y(ka){var ia=ka._readableState;R("endReadable",ia.endEmitted);ia.endEmitted||(ia.ended=!0,G.nextTick(A,ia,ka))}function A(ka,ia){if(R("endReadableNT",ka.endEmitted,ka.length),
!ka.endEmitted&&0===ka.length&&(ka.endEmitted=!0,ia.readable=!1,ia.emit("end"),ka.autoDestroy))ka=ia._writableState,(!ka||ka.autoDestroy&&ka.finished)&&ia.destroy()}function E(ka,ia){for(var qa=0,La=ka.length;qa<La;qa++)if(ka[qa]===ia)return qa;return-1}if(j3)return SR;j3=!0;var F,G=Zj;SR=c;c.ReadableState=f;Vu.EventEmitter;var I=XK,M=ij.Buffer,L=Eha.Uint8Array||function(){},S=ni;var R=S&&S.debuglog?S.debuglog("stream"):function(){};var aa,ra,Ea,K=Fha;S=k3;var Z=l3.getHighWaterMark,U=at.codes,V=U.ERR_INVALID_ARG_TYPE,
na=U.ERR_STREAM_PUSH_AFTER_EOF,la=U.ERR_METHOD_NOT_IMPLEMENTED,ya=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Pi(c,I);var jb=S.errorOrDestroy,gb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ka){this._readableState&&(this._readableState.destroyed=ka)}});c.prototype.destroy=S.destroy;c.prototype._undestroy=S.undestroy;c.prototype._destroy=function(ka,
ia){ia(ka)};c.prototype.push=function(ka,ia){var qa,La=this._readableState;return La.objectMode?qa=!0:"string"==typeof ka&&((ia=ia||La.defaultEncoding)!==La.encoding&&(ka=M.from(ka,ia),ia=""),qa=!0),h(this,ka,ia,!1,qa)};c.prototype.unshift=function(ka){return h(this,ka,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ka){aa||(aa=yD.StringDecoder);ka=new aa(ka);this._readableState.decoder=ka;this._readableState.encoding=this._readableState.decoder.encoding;
for(var ia=this._readableState.buffer.head,qa="";null!==ia;)qa+=ka.write(ia.data),ia=ia.next;return this._readableState.buffer.clear(),""!==qa&&this._readableState.buffer.push(qa),this._readableState.length=qa.length,this};return c.prototype.read=function(ka){R("read",ka);ka=parseInt(ka,10);var ia=this._readableState,qa=ka;if(0!==ka&&(ia.emittedReadable=!1),0===ka&&ia.needReadable&&((0!==ia.highWaterMark?ia.length>=ia.highWaterMark:0<ia.length)||ia.ended))return R("read: emitReadable",ia.length,ia.ended),
0===ia.length&&ia.ended?y(this):n(this),null;if(0===(ka=k(ka,ia))&&ia.ended)return 0===ia.length&&y(this),null;var La,Lb=ia.needReadable;return R("need readable",Lb),(0===ia.length||ia.length-ka<ia.highWaterMark)&&R("length less than watermark",Lb=!0),ia.ended||ia.reading?R("reading or ended",!1):Lb&&(R("do read"),ia.reading=!0,ia.sync=!0,0===ia.length&&(ia.needReadable=!0),this._read(ia.highWaterMark),ia.sync=!1,ia.reading||(ka=k(qa,ia))),null===(La=0<ka?v(ka,ia):null)?(ia.needReadable=ia.length<=
ia.highWaterMark,ka=0):(ia.length-=ka,ia.awaitDrain=0),0===ia.length&&(ia.ended||(ia.needReadable=!0),qa!==ka&&ia.ended&&y(this)),null!==La&&this.emit("data",La),La},c.prototype._read=function(ka){jb(this,new la("_read()"))},c.prototype.pipe=function(ka,ia){function qa(Ca,Na){R("onunpipe");Ca===Vb&&Na&&!1===Na.hasUnpiped&&(Na.hasUnpiped=!0,R("cleanup"),ka.removeListener("close",dc),ka.removeListener("finish",oc),ka.removeListener("drain",be),ka.removeListener("error",qc),ka.removeListener("unpipe",
qa),Vb.removeListener("end",La),Vb.removeListener("end",$c),Vb.removeListener("data",Lb),ha=!0,!Hd.awaitDrain||ka._writableState&&!ka._writableState.needDrain||be())}function La(){R("onend");ka.end()}function Lb(Ca){R("ondata");Ca=ka.write(Ca);R("dest.write",Ca);!1===Ca&&((1===Hd.pipesCount&&Hd.pipes===ka||1<Hd.pipesCount&&-1!==E(Hd.pipes,ka))&&!ha&&(R("false write response, pause",Hd.awaitDrain),Hd.awaitDrain++),Vb.pause())}function qc(Ca){R("onerror",Ca);$c();ka.removeListener("error",qc);0===ka.listeners("error").length&&
jb(ka,Ca)}function dc(){ka.removeListener("finish",oc);$c()}function oc(){R("onfinish");ka.removeListener("close",dc);$c()}function $c(){R("unpipe");Vb.unpipe(ka)}var Vb=this,Hd=this._readableState;switch(Hd.pipesCount){case 0:Hd.pipes=ka;break;case 1:Hd.pipes=[Hd.pipes,ka];break;default:Hd.pipes.push(ka)}Hd.pipesCount+=1;R("pipe count=%d opts=%j",Hd.pipesCount,ia);ia=ia&&!1===ia.end||ka===G.stdout||ka===G.stderr?$c:La;Hd.endEmitted?G.nextTick(ia):Vb.once("end",ia);ka.on("unpipe",qa);var be=function(Ca){return function(){var Na=
Ca._readableState;R("pipeOnDrain",Na.awaitDrain);Na.awaitDrain&&Na.awaitDrain--;0===Na.awaitDrain&&Ca.listeners("data").length&&(Na.flowing=!0,r(Ca))}}(Vb);ka.on("drain",be);var ha=!1;return Vb.on("data",Lb),function(Ca,Na,yb){if("function"==typeof Ca.prependListener)return Ca.prependListener(Na,yb);Ca._events&&Ca._events[Na]?Array.isArray(Ca._events[Na])?Ca._events[Na].unshift(yb):Ca._events[Na]=[yb,Ca._events[Na]]:Ca.on(Na,yb)}(ka,"error",qc),ka.once("close",dc),ka.once("finish",oc),ka.emit("pipe",
Vb),Hd.flowing||(R("pipe resume"),Vb.resume()),ka},c.prototype.unpipe=function(ka){var ia=this._readableState,qa={hasUnpiped:!1};if(0===ia.pipesCount)return this;if(1===ia.pipesCount)return ka&&ka!==ia.pipes||(ka||(ka=ia.pipes),ia.pipes=null,ia.pipesCount=0,ia.flowing=!1,ka&&ka.emit("unpipe",this,qa)),this;if(!ka){ka=ia.pipes;qa=ia.pipesCount;ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;for(ia=0;ia<qa;ia++)ka[ia].emit("unpipe",this,{hasUnpiped:!1});return this}var La=E(ia.pipes,ka);return-1===La||
(ia.pipes.splice(La,1),--ia.pipesCount,1===ia.pipesCount&&(ia.pipes=ia.pipes[0]),ka.emit("unpipe",this,qa)),this},c.prototype.on=function(ka,ia){ia=I.prototype.on.call(this,ka,ia);var qa=this._readableState;return"data"===ka?(qa.readableListening=0<this.listenerCount("readable"),!1!==qa.flowing&&this.resume()):"readable"===ka&&(qa.endEmitted||qa.readableListening||(qa.readableListening=qa.needReadable=!0,qa.flowing=!1,qa.emittedReadable=!1,R("on readable",qa.length,qa.reading),qa.length?n(this):qa.reading||
G.nextTick(g,this))),ia},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ka,ia){ia=I.prototype.removeListener.call(this,ka,ia);return"readable"===ka&&G.nextTick(a,this),ia},c.prototype.removeAllListeners=function(ka){var ia=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ka&&void 0!==ka||G.nextTick(a,this),ia},c.prototype.resume=function(){var ka=this._readableState;ka.flowing||(R("resume"),ka.flowing=!ka.readableListening,ka.resumeScheduled||(ka.resumeScheduled=
!0,G.nextTick(l,this,ka)));return ka.paused=!1,this},c.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ka){var ia=this,qa=this._readableState,La=!1,Lb;for(Lb in ka.on("end",function(){if(R("wrapped end"),qa.decoder&&!qa.ended){var qc=qa.decoder.end();qc&&qc.length&&ia.push(qc)}ia.push(null)}),ka.on("data",
function(qc){(R("wrapped data"),qa.decoder&&(qc=qa.decoder.write(qc)),qa.objectMode&&null==qc)||(qa.objectMode||qc&&qc.length)&&(ia.push(qc)||(La=!0,ka.pause()))}),ka)void 0===this[Lb]&&"function"==typeof ka[Lb]&&(this[Lb]=function(qc){return function(){return ka[qc].apply(ka,arguments)}}(Lb));for(Lb=0;Lb<gb.length;Lb++)ka.on(gb[Lb],this.emit.bind(this,gb[Lb]));return this._read=function(qc){R("wrapped _read",qc);La&&(La=!1,ka.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===ra&&(ra=Gha),ra(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ka){this._readableState&&(this._readableState.flowing=
ka)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ka,ia){return void 0===Ea&&(Ea=m3),Ea(c,ka,ia)}),SR}function Hha(){function f(U){var V=this;this.entry=this.next=null;this.finish=function(){var na=V.entry;for(V.entry=null;na;){var la=na.callback;U.pendingcb--;la(void 0);na=na.next}U.corkedRequestsFree.next=V;!0}}function c(){}function h(U,V,na){g=g||qG();U=U||{};"boolean"!=
typeof na&&(na=V instanceof g);this.objectMode=!!U.objectMode;na&&(this.objectMode=this.objectMode||!!U.writableObjectMode);this.highWaterMark=G(this,U,"writableHighWaterMark",na);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==U.decodeStrings;this.defaultEncoding=U.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(la){!function(ya,jb){var gb=ya._writableState,
ka=gb.sync,ia=gb.writecb;if("function"!=typeof ia)throw new S;(function(qa){qa.writing=!1;qa.writecb=null;qa.length-=qa.writelen;qa.writelen=0}(gb),jb)?!function(qa,La,Lb,qc,dc){--La.pendingcb;Lb?(l.nextTick(dc,qc),l.nextTick(a,qa,La),qa._writableState.errorEmitted=!0,Z(qa,qc)):(dc(qc),qa._writableState.errorEmitted=!0,Z(qa,qc),a(qa,La))}(ya,gb,ka,jb,ia):((jb=d(gb)||ya.destroyed)||gb.corked||gb.bufferProcessing||!gb.bufferedRequest||b(ya,gb),ka?l.nextTick(n,ya,gb,jb,ia):n(ya,gb,jb,ia))}(V,la)};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==U.emitClose;this.autoDestroy=!!U.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function e(U){var V=this instanceof(g=g||qG());if(!V&&!E.call(e,this))return new e(U);this._writableState=new h(U,this,V);this.writable=!0;U&&("function"==typeof U.write&&(this._write=U.write),"function"==typeof U.writev&&(this._writev=U.writev),
"function"==typeof U.destroy&&(this._destroy=U.destroy),"function"==typeof U.final&&(this._final=U.final));v.call(this)}function k(U,V,na,la,ya,jb,gb){V.writelen=la;V.writecb=gb;V.writing=!0;V.sync=!0;V.destroyed?V.onwrite(new aa("write")):na?U._writev(ya,V.onwrite):U._write(ya,jb,V.onwrite);V.sync=!1}function n(U,V,na,la){na||(0===V.length&&V.needDrain&&(V.needDrain=!1,U.emit("drain")),!0);V.pendingcb--;la();a(U,V)}function b(U,V){V.bufferProcessing=!0;var na=V.bufferedRequest;if(U._writev&&na&&
na.next){var la=Array(V.bufferedRequestCount),ya=V.corkedRequestsFree;ya.entry=na;for(var jb=0,gb=!0;na;)la[jb]=na,na.isBuf||(gb=!1),na=na.next,jb+=1;la.allBuffers=gb;k(U,V,!0,V.length,la,"",ya.finish);V.pendingcb++;V.lastBufferedRequest=null;ya.next?(V.corkedRequestsFree=ya.next,ya.next=null):V.corkedRequestsFree=new f(V);V.bufferedRequestCount=0}else{for(;na&&(la=na.chunk,k(U,V,!1,V.objectMode?1:la.length,la,na.encoding,na.callback),na=na.next,V.bufferedRequestCount--,!V.writing););null===na&&(V.lastBufferedRequest=
null)}V.bufferedRequest=na;V.bufferProcessing=!1}function d(U){return U.ending&&0===U.length&&null===U.bufferedRequest&&!U.finished&&!U.writing}function m(U,V){U._final(function(na){V.pendingcb--;na&&Z(U,na);V.prefinished=!0;U.emit("prefinish");a(U,V)})}function a(U,V){var na=d(V),la;if(la=na)V.prefinished||V.finalCalled||("function"!=typeof U._final||V.destroyed?(V.prefinished=!0,U.emit("prefinish")):(V.pendingcb++,V.finalCalled=!0,l.nextTick(m,U,V))),la=(!0,0===V.pendingcb&&(V.finished=!0,U.emit("finish"),
V.autoDestroy));la&&(V=U._readableState,(!V||V.autoDestroy&&V.endEmitted)&&U.destroy());return na}if(n3)return TR;n3=!0;var g,l=Zj;TR=e;e.WritableState=h;var r={deprecate:o3},v=XK,y=ij.Buffer,A=Iha.Uint8Array||function(){},E,F=k3,G=l3.getHighWaterMark,I=at.codes,M=I.ERR_INVALID_ARG_TYPE,L=I.ERR_METHOD_NOT_IMPLEMENTED,S=I.ERR_MULTIPLE_CALLBACK,R=I.ERR_STREAM_CANNOT_PIPE,aa=I.ERR_STREAM_DESTROYED,ra=I.ERR_STREAM_NULL_VALUES,Ea=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;
return Pi(e,v),h.prototype.getBuffer=function(){for(var U=this.bufferedRequest,V=[];U;)V.push(U),U=U.next;return V},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(U){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(e,
Symbol.hasInstance,{value:function(U){return!!E.call(this,U)||this===e&&U&&U._writableState instanceof h}})):E=function(U){return U instanceof this},e.prototype.pipe=function(){Z(this,new R)},e.prototype.write=function(U,V,na){var la,ya=this._writableState,jb=!1,gb=!ya.objectMode&&(la=U,y.isBuffer(la)||la instanceof A);return gb&&!y.isBuffer(U)&&(U=y.from(U)),"function"==typeof V&&(na=V,V=null),gb?V="buffer":V||(V=ya.defaultEncoding),"function"!=typeof na&&(na=c),ya.ending?function(ka,ia){var qa=
new Ea;Z(ka,qa);l.nextTick(ia,qa)}(this,na):(gb||function(ka,ia,qa,La){var Lb;return null===qa?Lb=new ra:"string"==typeof qa||ia.objectMode||(Lb=new M("chunk",["string","Buffer"],qa)),!Lb||(Z(ka,Lb),l.nextTick(La,Lb),!1)}(this,ya,U,na))&&(ya.pendingcb++,jb=function(ka,ia,qa,La,Lb,qc){if(!qa){var dc=La;ia.objectMode||!1===ia.decodeStrings||"string"!=typeof dc||(dc=y.from(dc,Lb));La!==dc&&(qa=!0,Lb="buffer",La=dc)}var oc=ia.objectMode?1:La.length;ia.length+=oc;(dc=ia.length<ia.highWaterMark)||(ia.needDrain=
!0);ia.writing||ia.corked?(ka=ia.lastBufferedRequest,ia.lastBufferedRequest={chunk:La,encoding:Lb,isBuf:qa,callback:qc,next:null},ka?ka.next=ia.lastBufferedRequest:ia.bufferedRequest=ia.lastBufferedRequest,ia.bufferedRequestCount+=1):k(ka,ia,!1,oc,La,Lb,qc);return dc}(this,ya,gb,U,V,na)),jb},e.prototype.cork=function(){this._writableState.corked++},e.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,U.writing||U.corked||U.bufferProcessing||!U.bufferedRequest||b(this,U))},
e.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=U.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((U+"").toLowerCase())))throw new K(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
e.prototype._write=function(U,V,na){na(new L("_write()"))},e.prototype._writev=null,e.prototype.end=function(U,V,na){var la=this._writableState;"function"==typeof U?(na=U,U=null,V=null):"function"==typeof V&&(na=V,V=null);null!=U&&this.write(U,V);la.corked&&(la.corked=1,this.uncork());la.ending||(U=na,la.ending=!0,a(this,la),U&&(la.finished?l.nextTick(U):this.once("finish",U)),la.ended=!0,this.writable=!1);return this},Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),e.prototype.destroy=F.destroy,e.prototype._undestroy=F.undestroy,e.prototype._destroy=function(U,V){V(U)},TR}function qG(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&
(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(a){a.end()}if(p3)return UR;p3=!0;var e=Zj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};UR=f;var n=i3(),b=Hha();Pi(f,n);k=k(b.prototype);for(var d=0;d<k.length;d++){var m=k[d];f.prototype[m]||(f.prototype[m]=b.prototype[m])}return Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),UR}function Jha(){}function q3(f,c){var h=Object.keys(f);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(f);c&&(e=e.filter(function(k){return Object.getOwnPropertyDescriptor(f,k).enumerable}));h.push.apply(h,e)}return h}function Kha(f,c){for(var h=0;h<c.length;h++){var e=c[h];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(f,e.key,
e)}}function r3(f,c){VR(f,c);YK(f)}function YK(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function VR(f,c){f.emit("error",c)}function xy(f,c,h){return c in f?Object.defineProperty(f,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[c]=h,f}function yy(f,c){return{value:f,done:c}}function Lha(f){var c=f[zy];if(null!==c){var h=f[SA].read();null!==h&&(f[TA]=null,f[zy]=null,f[UA]=null,c(yy(h,!1)))}}function Mha(f){s3.nextTick(Lha,
f)}function Nha(){function f(ka,ia,qa){F=F||ZK();ka=ka||{};"boolean"!=typeof qa&&(qa=ia instanceof F);this.objectMode=!!ka.objectMode;qa&&(this.objectMode=this.objectMode||!!ka.readableObjectMode);this.highWaterMark=Z(this,ka,"readableHighWaterMark",qa);this.buffer=new K;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==ka.emitClose;this.autoDestroy=!!ka.autoDestroy;this.destroyed=!1;this.defaultEncoding=ka.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ka.encoding&&(aa||(aa=yD.StringDecoder),this.decoder=new aa(ka.encoding),this.encoding=ka.encoding)}function c(ka){if(F=F||ZK(),!(this instanceof c))return new c(ka);this._readableState=new f(ka,this,this instanceof F);this.readable=!0;ka&&("function"==typeof ka.read&&(this._read=ka.read),"function"==typeof ka.destroy&&
(this._destroy=ka.destroy));I.call(this)}function h(ka,ia,qa,La,Lb){R("readableAddChunk",ia);var qc,dc=ka._readableState;if(null===ia)dc.reading=!1,function(oc,$c){if(R("onEofChunk"),!$c.ended){if($c.decoder){var Vb=$c.decoder.end();Vb&&Vb.length&&($c.buffer.push(Vb),$c.length+=$c.objectMode?1:Vb.length)}$c.ended=!0;$c.sync?n(oc):($c.needReadable=!1,$c.emittedReadable||($c.emittedReadable=!0,b(oc)))}}(ka,dc);else if(Lb||(qc=function(oc,$c){var Vb;var Hd=$c;M.isBuffer(Hd)||Hd instanceof L||"string"==
typeof $c||void 0===$c||oc.objectMode||(Vb=new V("chunk",["string","Buffer","Uint8Array"],$c));return Vb}(dc,ia)),qc)jb(ka,qc);else if(dc.objectMode||ia&&0<ia.length)if("string"==typeof ia||dc.objectMode||Object.getPrototypeOf(ia)===M.prototype||(ia=M.from(ia)),La)dc.endEmitted?jb(ka,new ya):e(ka,dc,ia,!0);else if(dc.ended)jb(ka,new na);else{if(dc.destroyed)return!1;dc.reading=!1;dc.decoder&&!qa?(ia=dc.decoder.write(ia),dc.objectMode||0!==ia.length?e(ka,dc,ia,!1):d(ka,dc)):e(ka,dc,ia,!1)}else La||
(dc.reading=!1,d(ka,dc));return!dc.ended&&(dc.length<dc.highWaterMark||0===dc.length)}function e(ka,ia,qa,La){ia.flowing&&0===ia.length&&!ia.sync?(ia.awaitDrain=0,ka.emit("data",qa)):(ia.length+=ia.objectMode?1:qa.length,La?ia.buffer.unshift(qa):ia.buffer.push(qa),ia.needReadable&&n(ka));d(ka,ia)}function k(ka,ia){if(0>=ka||0===ia.length&&ia.ended)ka=0;else if(ia.objectMode)ka=1;else if(ka!=ka)ka=ia.flowing&&ia.length?ia.buffer.head.data.length:ia.length;else{if(ka>ia.highWaterMark){var qa=ka;var La=
(1073741824<=qa?qa=1073741824:(qa--,qa|=qa>>>1,qa|=qa>>>2,qa|=qa>>>4,qa|=qa>>>8,qa|=qa>>>16,qa++),qa);ia.highWaterMark=La}ka=ka<=ia.length?ka:ia.ended?ia.length:(ia.needReadable=!0,0)}return ka}function n(ka){var ia=ka._readableState;R("emitReadable",ia.needReadable,ia.emittedReadable);ia.needReadable=!1;ia.emittedReadable||(R("emitReadable",ia.flowing),ia.emittedReadable=!0,G.nextTick(b,ka))}function b(ka){var ia=ka._readableState;R("emitReadable_",ia.destroyed,ia.length,ia.ended);ia.destroyed||
!ia.length&&!ia.ended||(ka.emit("readable"),ia.emittedReadable=!1);ia.needReadable=!ia.flowing&&!ia.ended&&ia.length<=ia.highWaterMark;r(ka)}function d(ka,ia){ia.readingMore||(ia.readingMore=!0,G.nextTick(m,ka,ia))}function m(ka,ia){for(;!ia.reading&&!ia.ended&&(ia.length<ia.highWaterMark||ia.flowing&&0===ia.length);){var qa=ia.length;if(R("maybeReadMore read 0"),ka.read(0),qa===ia.length)break}ia.readingMore=!1}function a(ka){var ia=ka._readableState;ia.readableListening=0<ka.listenerCount("readable");
ia.resumeScheduled&&!ia.paused?ia.flowing=!0:0<ka.listenerCount("data")&&ka.resume()}function g(ka){R("readable nexttick read 0");ka.read(0)}function l(ka,ia){R("resume",ia.reading);ia.reading||ka.read(0);ia.resumeScheduled=!1;ka.emit("resume");r(ka);ia.flowing&&!ia.reading&&ka.read(0)}function r(ka){var ia=ka._readableState;for(R("flow",ia.flowing);ia.flowing&&null!==ka.read(););}function v(ka,ia){return 0===ia.length?null:(ia.objectMode?qa=ia.buffer.shift():!ka||ka>=ia.length?(qa=ia.decoder?ia.buffer.join(""):
1===ia.buffer.length?ia.buffer.first():ia.buffer.concat(ia.length),ia.buffer.clear()):qa=ia.buffer.consume(ka,ia.decoder),qa);var qa}function y(ka){var ia=ka._readableState;R("endReadable",ia.endEmitted);ia.endEmitted||(ia.ended=!0,G.nextTick(A,ia,ka))}function A(ka,ia){if(R("endReadableNT",ka.endEmitted,ka.length),!ka.endEmitted&&0===ka.length&&(ka.endEmitted=!0,ia.readable=!1,ia.emit("end"),ka.autoDestroy))ka=ia._writableState,(!ka||ka.autoDestroy&&ka.finished)&&ia.destroy()}function E(ka,ia){for(var qa=
0,La=ka.length;qa<La;qa++)if(ka[qa]===ia)return qa;return-1}if(t3)return WR;t3=!0;var F,G=Zj;WR=c;c.ReadableState=f;Vu.EventEmitter;var I=XK,M=ij.Buffer,L=Oha.Uint8Array||function(){},S=ni;var R=S&&S.debuglog?S.debuglog("stream"):function(){};var aa,ra,Ea,K=Pha;S=u3;var Z=v3.getHighWaterMark,U=at.codes,V=U.ERR_INVALID_ARG_TYPE,na=U.ERR_STREAM_PUSH_AFTER_EOF,la=U.ERR_METHOD_NOT_IMPLEMENTED,ya=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Pi(c,I);var jb=S.errorOrDestroy,gb=["error","close","destroy","pause",
"resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ka){this._readableState&&(this._readableState.destroyed=ka)}});c.prototype.destroy=S.destroy;c.prototype._undestroy=S.undestroy;c.prototype._destroy=function(ka,ia){ia(ka)};c.prototype.push=function(ka,ia){var qa,La=this._readableState;return La.objectMode?qa=!0:"string"==typeof ka&&((ia=ia||La.defaultEncoding)!==La.encoding&&(ka=M.from(ka,
ia),ia=""),qa=!0),h(this,ka,ia,!1,qa)};c.prototype.unshift=function(ka){return h(this,ka,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ka){aa||(aa=yD.StringDecoder);ka=new aa(ka);this._readableState.decoder=ka;this._readableState.encoding=this._readableState.decoder.encoding;for(var ia=this._readableState.buffer.head,qa="";null!==ia;)qa+=ka.write(ia.data),ia=ia.next;return this._readableState.buffer.clear(),""!==qa&&this._readableState.buffer.push(qa),
this._readableState.length=qa.length,this};return c.prototype.read=function(ka){R("read",ka);ka=parseInt(ka,10);var ia=this._readableState,qa=ka;if(0!==ka&&(ia.emittedReadable=!1),0===ka&&ia.needReadable&&((0!==ia.highWaterMark?ia.length>=ia.highWaterMark:0<ia.length)||ia.ended))return R("read: emitReadable",ia.length,ia.ended),0===ia.length&&ia.ended?y(this):n(this),null;if(0===(ka=k(ka,ia))&&ia.ended)return 0===ia.length&&y(this),null;var La,Lb=ia.needReadable;return R("need readable",Lb),(0===
ia.length||ia.length-ka<ia.highWaterMark)&&R("length less than watermark",Lb=!0),ia.ended||ia.reading?R("reading or ended",!1):Lb&&(R("do read"),ia.reading=!0,ia.sync=!0,0===ia.length&&(ia.needReadable=!0),this._read(ia.highWaterMark),ia.sync=!1,ia.reading||(ka=k(qa,ia))),null===(La=0<ka?v(ka,ia):null)?(ia.needReadable=ia.length<=ia.highWaterMark,ka=0):(ia.length-=ka,ia.awaitDrain=0),0===ia.length&&(ia.ended||(ia.needReadable=!0),qa!==ka&&ia.ended&&y(this)),null!==La&&this.emit("data",La),La},c.prototype._read=
function(ka){jb(this,new la("_read()"))},c.prototype.pipe=function(ka,ia){function qa(Ca,Na){R("onunpipe");Ca===Vb&&Na&&!1===Na.hasUnpiped&&(Na.hasUnpiped=!0,R("cleanup"),ka.removeListener("close",dc),ka.removeListener("finish",oc),ka.removeListener("drain",be),ka.removeListener("error",qc),ka.removeListener("unpipe",qa),Vb.removeListener("end",La),Vb.removeListener("end",$c),Vb.removeListener("data",Lb),ha=!0,!Hd.awaitDrain||ka._writableState&&!ka._writableState.needDrain||be())}function La(){R("onend");
ka.end()}function Lb(Ca){R("ondata");Ca=ka.write(Ca);R("dest.write",Ca);!1===Ca&&((1===Hd.pipesCount&&Hd.pipes===ka||1<Hd.pipesCount&&-1!==E(Hd.pipes,ka))&&!ha&&(R("false write response, pause",Hd.awaitDrain),Hd.awaitDrain++),Vb.pause())}function qc(Ca){R("onerror",Ca);$c();ka.removeListener("error",qc);0===ka.listeners("error").length&&jb(ka,Ca)}function dc(){ka.removeListener("finish",oc);$c()}function oc(){R("onfinish");ka.removeListener("close",dc);$c()}function $c(){R("unpipe");Vb.unpipe(ka)}
var Vb=this,Hd=this._readableState;switch(Hd.pipesCount){case 0:Hd.pipes=ka;break;case 1:Hd.pipes=[Hd.pipes,ka];break;default:Hd.pipes.push(ka)}Hd.pipesCount+=1;R("pipe count=%d opts=%j",Hd.pipesCount,ia);ia=ia&&!1===ia.end||ka===G.stdout||ka===G.stderr?$c:La;Hd.endEmitted?G.nextTick(ia):Vb.once("end",ia);ka.on("unpipe",qa);var be=function(Ca){return function(){var Na=Ca._readableState;R("pipeOnDrain",Na.awaitDrain);Na.awaitDrain&&Na.awaitDrain--;0===Na.awaitDrain&&Ca.listeners("data").length&&(Na.flowing=
!0,r(Ca))}}(Vb);ka.on("drain",be);var ha=!1;return Vb.on("data",Lb),function(Ca,Na,yb){if("function"==typeof Ca.prependListener)return Ca.prependListener(Na,yb);Ca._events&&Ca._events[Na]?Array.isArray(Ca._events[Na])?Ca._events[Na].unshift(yb):Ca._events[Na]=[yb,Ca._events[Na]]:Ca.on(Na,yb)}(ka,"error",qc),ka.once("close",dc),ka.once("finish",oc),ka.emit("pipe",Vb),Hd.flowing||(R("pipe resume"),Vb.resume()),ka},c.prototype.unpipe=function(ka){var ia=this._readableState,qa={hasUnpiped:!1};if(0===
ia.pipesCount)return this;if(1===ia.pipesCount)return ka&&ka!==ia.pipes||(ka||(ka=ia.pipes),ia.pipes=null,ia.pipesCount=0,ia.flowing=!1,ka&&ka.emit("unpipe",this,qa)),this;if(!ka){ka=ia.pipes;qa=ia.pipesCount;ia.pipes=null;ia.pipesCount=0;ia.flowing=!1;for(ia=0;ia<qa;ia++)ka[ia].emit("unpipe",this,{hasUnpiped:!1});return this}var La=E(ia.pipes,ka);return-1===La||(ia.pipes.splice(La,1),--ia.pipesCount,1===ia.pipesCount&&(ia.pipes=ia.pipes[0]),ka.emit("unpipe",this,qa)),this},c.prototype.on=function(ka,
ia){ia=I.prototype.on.call(this,ka,ia);var qa=this._readableState;return"data"===ka?(qa.readableListening=0<this.listenerCount("readable"),!1!==qa.flowing&&this.resume()):"readable"===ka&&(qa.endEmitted||qa.readableListening||(qa.readableListening=qa.needReadable=!0,qa.flowing=!1,qa.emittedReadable=!1,R("on readable",qa.length,qa.reading),qa.length?n(this):qa.reading||G.nextTick(g,this))),ia},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ka,ia){ia=I.prototype.removeListener.call(this,
ka,ia);return"readable"===ka&&G.nextTick(a,this),ia},c.prototype.removeAllListeners=function(ka){var ia=I.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ka&&void 0!==ka||G.nextTick(a,this),ia},c.prototype.resume=function(){var ka=this._readableState;ka.flowing||(R("resume"),ka.flowing=!ka.readableListening,ka.resumeScheduled||(ka.resumeScheduled=!0,G.nextTick(l,this,ka)));return ka.paused=!1,this},c.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ka){var ia=this,qa=this._readableState,La=!1,Lb;for(Lb in ka.on("end",function(){if(R("wrapped end"),qa.decoder&&!qa.ended){var qc=qa.decoder.end();qc&&qc.length&&ia.push(qc)}ia.push(null)}),ka.on("data",function(qc){(R("wrapped data"),qa.decoder&&(qc=qa.decoder.write(qc)),qa.objectMode&&null==qc)||(qa.objectMode||qc&&qc.length)&&(ia.push(qc)||
(La=!0,ka.pause()))}),ka)void 0===this[Lb]&&"function"==typeof ka[Lb]&&(this[Lb]=function(qc){return function(){return ka[qc].apply(ka,arguments)}}(Lb));for(Lb=0;Lb<gb.length;Lb++)ka.on(gb[Lb],this.emit.bind(this,gb[Lb]));return this._read=function(qc){R("wrapped _read",qc);La&&(La=!1,ka.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ra&&(ra=Qha),ra(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ka){this._readableState&&(this._readableState.flowing=ka)}}),c._fromList=v,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ka,
ia){return void 0===Ea&&(Ea=m3),Ea(c,ka,ia)}),WR}function w3(){function f(U){var V=this;this.entry=this.next=null;this.finish=function(){var na=V.entry;for(V.entry=null;na;){var la=na.callback;U.pendingcb--;la(void 0);na=na.next}U.corkedRequestsFree.next=V;!0}}function c(){}function h(U,V,na){g=g||ZK();U=U||{};"boolean"!=typeof na&&(na=V instanceof g);this.objectMode=!!U.objectMode;na&&(this.objectMode=this.objectMode||!!U.writableObjectMode);this.highWaterMark=G(this,U,"writableHighWaterMark",na);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==U.decodeStrings;this.defaultEncoding=U.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(la){!function(ya,jb){var gb=ya._writableState,ka=gb.sync,ia=gb.writecb;if("function"!=typeof ia)throw new S;(function(qa){qa.writing=!1;qa.writecb=null;qa.length-=qa.writelen;qa.writelen=0}(gb),jb)?!function(qa,La,Lb,qc,dc){--La.pendingcb;
Lb?(l.nextTick(dc,qc),l.nextTick(a,qa,La),qa._writableState.errorEmitted=!0,Z(qa,qc)):(dc(qc),qa._writableState.errorEmitted=!0,Z(qa,qc),a(qa,La))}(ya,gb,ka,jb,ia):((jb=d(gb)||ya.destroyed)||gb.corked||gb.bufferProcessing||!gb.bufferedRequest||b(ya,gb),ka?l.nextTick(n,ya,gb,jb,ia):n(ya,gb,jb,ia))}(V,la)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==U.emitClose;this.autoDestroy=!!U.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function e(U){var V=this instanceof(g=g||ZK());if(!V&&!E.call(e,this))return new e(U);this._writableState=new h(U,this,V);this.writable=!0;U&&("function"==typeof U.write&&(this._write=U.write),"function"==typeof U.writev&&(this._writev=U.writev),"function"==typeof U.destroy&&(this._destroy=U.destroy),"function"==typeof U.final&&(this._final=U.final));v.call(this)}function k(U,V,na,la,ya,jb,gb){V.writelen=la;V.writecb=gb;V.writing=!0;
V.sync=!0;V.destroyed?V.onwrite(new aa("write")):na?U._writev(ya,V.onwrite):U._write(ya,jb,V.onwrite);V.sync=!1}function n(U,V,na,la){na||(0===V.length&&V.needDrain&&(V.needDrain=!1,U.emit("drain")),!0);V.pendingcb--;la();a(U,V)}function b(U,V){V.bufferProcessing=!0;var na=V.bufferedRequest;if(U._writev&&na&&na.next){var la=Array(V.bufferedRequestCount),ya=V.corkedRequestsFree;ya.entry=na;for(var jb=0,gb=!0;na;)la[jb]=na,na.isBuf||(gb=!1),na=na.next,jb+=1;la.allBuffers=gb;k(U,V,!0,V.length,la,"",
ya.finish);V.pendingcb++;V.lastBufferedRequest=null;ya.next?(V.corkedRequestsFree=ya.next,ya.next=null):V.corkedRequestsFree=new f(V);V.bufferedRequestCount=0}else{for(;na&&(la=na.chunk,k(U,V,!1,V.objectMode?1:la.length,la,na.encoding,na.callback),na=na.next,V.bufferedRequestCount--,!V.writing););null===na&&(V.lastBufferedRequest=null)}V.bufferedRequest=na;V.bufferProcessing=!1}function d(U){return U.ending&&0===U.length&&null===U.bufferedRequest&&!U.finished&&!U.writing}function m(U,V){U._final(function(na){V.pendingcb--;
na&&Z(U,na);V.prefinished=!0;U.emit("prefinish");a(U,V)})}function a(U,V){var na=d(V),la;if(la=na)V.prefinished||V.finalCalled||("function"!=typeof U._final||V.destroyed?(V.prefinished=!0,U.emit("prefinish")):(V.pendingcb++,V.finalCalled=!0,l.nextTick(m,U,V))),la=(!0,0===V.pendingcb&&(V.finished=!0,U.emit("finish"),V.autoDestroy));la&&(V=U._readableState,(!V||V.autoDestroy&&V.endEmitted)&&U.destroy());return na}if(x3)return YR;x3=!0;var g,l=Zj;YR=e;e.WritableState=h;var r={deprecate:o3},v=XK,y=ij.Buffer,
A=Rha.Uint8Array||function(){},E,F=u3,G=v3.getHighWaterMark,I=at.codes,M=I.ERR_INVALID_ARG_TYPE,L=I.ERR_METHOD_NOT_IMPLEMENTED,S=I.ERR_MULTIPLE_CALLBACK,R=I.ERR_STREAM_CANNOT_PIPE,aa=I.ERR_STREAM_DESTROYED,ra=I.ERR_STREAM_NULL_VALUES,Ea=I.ERR_STREAM_WRITE_AFTER_END,K=I.ERR_UNKNOWN_ENCODING,Z=F.errorOrDestroy;return Pi(e,v),h.prototype.getBuffer=function(){for(var U=this.bufferedRequest,V=[];U;)V.push(U),U=U.next;return V},function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(U){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(e,Symbol.hasInstance,{value:function(U){return!!E.call(this,U)||this===e&&U&&U._writableState instanceof h}})):E=function(U){return U instanceof this},e.prototype.pipe=function(){Z(this,new R)},e.prototype.write=function(U,V,na){var la,
ya=this._writableState,jb=!1,gb=!ya.objectMode&&(la=U,y.isBuffer(la)||la instanceof A);return gb&&!y.isBuffer(U)&&(U=y.from(U)),"function"==typeof V&&(na=V,V=null),gb?V="buffer":V||(V=ya.defaultEncoding),"function"!=typeof na&&(na=c),ya.ending?function(ka,ia){var qa=new Ea;Z(ka,qa);l.nextTick(ia,qa)}(this,na):(gb||function(ka,ia,qa,La){var Lb;return null===qa?Lb=new ra:"string"==typeof qa||ia.objectMode||(Lb=new M("chunk",["string","Buffer"],qa)),!Lb||(Z(ka,Lb),l.nextTick(La,Lb),!1)}(this,ya,U,na))&&
(ya.pendingcb++,jb=function(ka,ia,qa,La,Lb,qc){if(!qa){var dc=La;ia.objectMode||!1===ia.decodeStrings||"string"!=typeof dc||(dc=y.from(dc,Lb));La!==dc&&(qa=!0,Lb="buffer",La=dc)}var oc=ia.objectMode?1:La.length;ia.length+=oc;(dc=ia.length<ia.highWaterMark)||(ia.needDrain=!0);ia.writing||ia.corked?(ka=ia.lastBufferedRequest,ia.lastBufferedRequest={chunk:La,encoding:Lb,isBuf:qa,callback:qc,next:null},ka?ka.next=ia.lastBufferedRequest:ia.bufferedRequest=ia.lastBufferedRequest,ia.bufferedRequestCount+=
1):k(ka,ia,!1,oc,La,Lb,qc);return dc}(this,ya,gb,U,V,na)),jb},e.prototype.cork=function(){this._writableState.corked++},e.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,U.writing||U.corked||U.bufferProcessing||!U.bufferedRequest||b(this,U))},e.prototype.setDefaultEncoding=function(U){if("string"==typeof U&&(U=U.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((U+"").toLowerCase())))throw new K(U);return this._writableState.defaultEncoding=
U,this},Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),e.prototype._write=function(U,V,na){na(new L("_write()"))},e.prototype._writev=null,e.prototype.end=function(U,V,na){var la=this._writableState;"function"==typeof U?(na=U,U=null,V=null):"function"==typeof V&&(na=V,V=null);
null!=U&&this.write(U,V);la.corked&&(la.corked=1,this.uncork());la.ending||(U=na,la.ending=!0,a(this,la),U&&(la.finished?l.nextTick(U):this.once("finish",U)),la.ended=!0,this.writable=!1);return this},Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=
U)}}),e.prototype.destroy=F.destroy,e.prototype._undestroy=F.undestroy,e.prototype._destroy=function(U,V){V(U)},YR}function ZK(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(a){a.end()}if(y3)return ZR;y3=!0;var e=Zj,k=Object.keys||
function(a){var g=[],l;for(l in a)g.push(l);return g};ZR=f;var n=Nha(),b=w3();Pi(f,n);k=k(b.prototype);for(var d=0;d<k.length;d++){var m=k[d];f.prototype[m]||(f.prototype[m]=b.prototype[m])}return Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),ZR}function Sha(f,c){var h=this._transformState;h.transforming=!1;var e=
h.writecb;if(null===e)return this.emit("error",new Tha);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);e(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function Wu(f){if(!(this instanceof Wu))return new Wu(f);$K.call(this,f);this._transformState={afterTransform:Sha.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;f&&("function"==
typeof f.transform&&(this._transform=f.transform),"function"==typeof f.flush&&(this._flush=f.flush));this.on("prefinish",Uha)}function Uha(){var f=this;"function"!=typeof this._flush||this._readableState.destroyed?z3(this,null,null):this._flush(function(c,h){z3(f,c,h)})}function z3(f,c,h){if(c)return f.emit("error",c);if(null!=h&&f.push(h),f._writableState.length)throw new Vha;if(f._transformState.transforming)throw new Wha;return f.push(null)}function rG(f){if(!(this instanceof rG))return new rG(f);
A3.call(this,f)}function B3(f){if(f)throw f;}function Xha(f,c,h,e){e=function(b){var d=!1;return function(){d||(d=!0,b.apply(void 0,arguments))}}(e);var k=!1;f.on("close",function(){k=!0});void 0===$R&&($R=aS);$R(f,{readable:c,writable:h},function(b){if(b)return e(b);k=!0;e()});var n=!1;return function(b){if(!k&&!n)return n=!0,f.setHeader&&"function"==typeof f.abort?f.abort():"function"==typeof f.destroy?f.destroy():(e(b||new Yha("pipe")),void 0)}}function C3(f){f()}function Zha(f,c){return f.pipe(c)}
function Jr(){bS.call(this||cS)}function aL(){}function Hw(f){D3.call(this);this._block=bL.allocUnsafe(f);this._blockSize=f;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function zD(){E3.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function cL(f,c){return f<<c|f>>>32-c}function Co(f,c,h,e,k,n,b){return cL(f+(c&h|~c&e)+k+n|0,b)+c|0}function Do(f,c,h,e,k,n,b){return cL(f+(c&e|h&~e)+k+n|0,b)+c|0}function Eo(f,c,h,e,k,n,b){return cL(f+(c^h^e)+
k+n|0,b)+c|0}function Fo(f,c,h,e,k,n,b){return cL(f+(h^(c|~e))+k+n|0,b)+c|0}function AD(){F3.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function Kr(f,c){return f<<c|f>>>32-c}function Iw(f,c){(this||Bl)._block=G3.alloc(f);(this||Bl)._finalSize=c;(this||Bl)._blockSize=f;(this||Bl)._len=0}function BD(){this.init();(this||Ii)._w=$ha;H3.call(this||Ii,64,56)}function sG(){this.init();(this||Nk)._w=aia;I3.call(this||Nk,64,56)}function tG(){this.init();
(this||Ok)._w=bia;J3.call(this||Ok,64,56)}function dL(){this.init();(this||Hn)._w=cia;dia.call(this||Hn,64,56)}function CD(){this.init();(this||Jf)._w=eia;K3.call(this||Jf,128,112)}function In(f,c){return f>>>0<c>>>0?1:0}function eL(){this.init();(this||tk)._w=fia;gia.call(this||tk,128,112)}function Jn(f){L3.call(this||km);(this||km).hashMode="string"==typeof f;(this||km).hashMode?(this||km)[f]=(this||km)._finalOrDigest:(this||km).final=(this||km)._finalOrDigest;(this||km)._final&&((this||km).__final=
(this||km)._final,(this||km)._final=null);(this||km)._decoder=null;(this||km)._encoding=null}function fL(f){M3.call(this,"digest");this._hash=f}function gL(f,c){N3.call(this,"digest");"string"==typeof c&&(c=VA.from(c));this._alg=f;this._key=c;64<c.length?c=f(c):64>c.length&&(c=VA.concat([c,hia],64));f=this._ipad=VA.allocUnsafe(64);for(var h=this._opad=VA.allocUnsafe(64),e=0;64>e;e++)f[e]=54^c[e],h[e]=92^c[e];this._hash=[f]}function uG(f,c){O3.call(this,"digest");"string"==typeof c&&(c=vG.from(c));
var h="sha512"===f||"sha384"===f?128:64;(this._alg=f,this._key=c,c.length>h)?c=("rmd160"===f?new dS:eS(f)).update(c).digest():c.length<h&&(c=vG.concat([c,iia],h));for(var e=this._ipad=vG.allocUnsafe(h),k=this._opad=vG.allocUnsafe(h),n=0;n<h;n++)e[n]=54^c[n],k[n]=92^c[n];this._hash="rmd160"===f?new dS:eS(f);this._hash.update(e)}function P3(f,c){if("string"!=typeof f&&!jia.isBuffer(f))throw new TypeError(c+" must be a buffer or string");}function Q3(f,c,h){var e=function(m){function a(g){return kia(m).update(g).digest()}
return"rmd160"===m||"ripemd160"===m?function(g){return(new lia).update(g).digest()}:"md5"===m?mia:a}(f),k="sha512"===f||"sha384"===f?128:64;c.length>k?c=e(c):c.length<k&&(c=bt.concat([c,nia],k));for(var n=bt.allocUnsafe(k+hL[f]),b=bt.allocUnsafe(k+hL[f]),d=0;d<k;d++)n[d]=54^c[d],b[d]=92^c[d];c=bt.allocUnsafe(k+h+4);n.copy(c,0,0,k);(this||ct).ipad1=c;(this||ct).ipad2=n;(this||ct).opad=b;(this||ct).alg=f;(this||ct).blocksize=k;(this||ct).hash=e;(this||ct).size=hL[f]}function R3(f,c,h,e,k){return wG.importKey("raw",
f,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return wG.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:k}},n,e<<3)}).then(function(n){return DD.from(n)})}function S3(f,c){if(!f)throw Error(c||"Assertion failed");}function Cq(f){this.options=f;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function oia(){this.tmp=Array(2);this.keys=null}function Lr(f){T3.call(this,f);var c=new oia;this._desState=c;this.deriveKeys(c,f.key)}
function pia(f){qia.equal(f.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=f[c]}function ria(f,c){sia.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),e=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===f?[Ay.create({type:"encrypt",key:h}),Ay.create({type:"decrypt",key:e}),Ay.create({type:"encrypt",key:c})]:[Ay.create({type:"decrypt",key:c}),Ay.create({type:"encrypt",key:e}),Ay.create({type:"decrypt",key:h})]}function Xu(f){U3.call(this,
f);this._edeState=new ria(this.type,this.options.key)}function iL(f){V3.call(this||jL);var c=f.mode.toLowerCase(),h=xG[c];var e=f.decrypt?"decrypt":"encrypt";var k=f.key;WA.isBuffer(k)||(k=WA.from(k));"des-ede"!==c&&"des-ede-cbc"!==c||(k=WA.concat([k,k.slice(0,8)]));f=f.iv;WA.isBuffer(f)||(f=WA.from(f));(this||jL)._des=h.create({key:k,iv:f,type:e})}function W3(f,c,h){var e=c.length,k=tia(c,f._cache);return f._cache=f._cache.slice(e),f._prev=yG.concat([f._prev,h?c:k]),k}function uia(f){return f._prev=
f._cipher.encryptBlock(f._prev),f._prev}function fS(f){kL.isBuffer(f)||(f=kL.from(f));for(var c=f.length/4|0,h=Array(c),e=0;e<c;e++)h[e]=f.readUInt32BE(4*e);return h}function gS(f){for(;0<f.length;f++)f[0]=0}function X3(f,c,h,e,k){var n=h[0],b=h[1],d=h[2];h=h[3];var m=f[0]^c[0],a=f[1]^c[1],g=f[2]^c[2];f=f[3]^c[3];for(var l=4,r=1;r<k;r++){var v=n[m>>>24]^b[a>>>16&255]^d[g>>>8&255]^h[255&f]^c[l++];var y=n[a>>>24]^b[g>>>16&255]^d[f>>>8&255]^h[255&m]^c[l++];var A=n[g>>>24]^b[f>>>16&255]^d[m>>>8&255]^
h[255&a]^c[l++];var E=n[f>>>24]^b[m>>>16&255]^d[a>>>8&255]^h[255&g]^c[l++];m=v;a=y;g=A;f=E}return v=(e[m>>>24]<<24|e[a>>>16&255]<<16|e[g>>>8&255]<<8|e[255&f])^c[l++],y=(e[a>>>24]<<24|e[g>>>16&255]<<16|e[f>>>8&255]<<8|e[255&m])^c[l++],A=(e[g>>>24]<<24|e[f>>>16&255]<<16|e[m>>>8&255]<<8|e[255&a])^c[l++],E=(e[f>>>24]<<24|e[m>>>16&255]<<16|e[a>>>8&255]<<8|e[255&g])^c[l++],[v>>>0,y>>>0,A>>>0,E>>>0]}function Mr(f){(this||Nr)._key=fS(f);this._reset()}function Y3(f){var c=ED.allocUnsafe(16);return c.writeUInt32BE(f[0]>>>
0,0),c.writeUInt32BE(f[1]>>>0,4),c.writeUInt32BE(f[2]>>>0,8),c.writeUInt32BE(f[3]>>>0,12),c}function zG(f){(this||ho).h=f;(this||ho).state=ED.alloc(16,0);(this||ho).cache=ED.allocUnsafe(0)}function By(f,c,h,e){Z3.call(this||oi);var k=Vp.alloc(4,0);(this||oi)._cipher=new via.AES(c);var n=(this||oi)._cipher.encryptBlock(k);(this||oi)._ghash=new $3(n);c=this||oi;k=h;if(12===k.length)c=(c._finID=Vp.concat([k,Vp.from([0,0,0,1])]),Vp.concat([k,Vp.from([0,0,0,2])]));else{h=new $3(n);n=k.length;var b=n%16;
h.update(k);b&&(b=16-b,h.update(Vp.alloc(b,0)));h.update(Vp.alloc(8,0));k=8*n;n=Vp.alloc(8);n.writeUIntBE(k,0,8);h.update(n);c._finID=h.state;c=Vp.from(c._finID);c=(wia(c),c)}(this||oi)._prev=Vp.from(c);(this||oi)._cache=Vp.allocUnsafe(0);(this||oi)._secCache=Vp.allocUnsafe(0);(this||oi)._decrypt=e;(this||oi)._alen=0;(this||oi)._len=0;(this||oi)._mode=f;(this||oi)._authTag=null;(this||oi)._called=!1}function AG(f,c,h,e){a4.call(this||dt);(this||dt)._cipher=new xia.AES(c);(this||dt)._prev=hS.from(h);
(this||dt)._cache=hS.allocUnsafe(0);(this||dt)._secCache=hS.allocUnsafe(0);(this||dt)._decrypt=e;(this||dt)._mode=f}function BG(f,c,h){b4.call(this||uk);(this||uk)._cache=new lL;(this||uk)._last=void 0;(this||uk)._cipher=new yia.AES(c);(this||uk)._prev=FD.from(h);(this||uk)._mode=f;(this||uk)._autopadding=!0}function lL(){(this||uk).cache=FD.allocUnsafe(0)}function c4(f,c,h){f=d4[f.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=FD.from(h)),"GCM"!==f.mode&&
h.length!==f.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=FD.from(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===f.type?new zia(f.module,c,h,!0):"auth"===f.type?new Aia(f.module,c,h,!0):new BG(f.module,c,h)}function CG(f,c,h){e4.call(this||gl);(this||gl)._cache=new mL;(this||gl)._cipher=new Bia.AES(c);(this||gl)._prev=Jw.from(h);(this||gl)._mode=f;(this||gl)._autopadding=!0}function mL(){(this||gl).cache=Jw.allocUnsafe(0)}
function f4(f,c,h){f=g4[f.toLowerCase()];if(!f)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=Jw.from(c)),c.length!==f.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=Jw.from(h)),"GCM"!==f.mode&&h.length!==f.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===f.type?new Cia(f.module,c,h):"auth"===f.type?new Dia(f.module,c,h):new CG(f.module,c,h)}function iS(f,c,h){if(f=f.toLowerCase(),Cy[f])return jS.createCipheriv(f,c,h);
if(Kw[f])return new h4({key:c,iv:h,mode:f});throw new TypeError("invalid suite type");}function kS(f,c,h){if(f=f.toLowerCase(),Cy[f])return jS.createDecipheriv(f,c,h);if(Kw[f])return new h4({key:c,iv:h,mode:f,decrypt:!0});throw new TypeError("invalid suite type");}function Dy(f){(this||nL).rand=f}function Ey(f){(this||i4).rand=f||new Eia.Rand}function lS(f){if(null!==mS)var c=mS;else{c=[2];for(var h=1,e=3;1048576>e;e+=2){for(var k=Math.ceil(Math.sqrt(e)),n=0;n<h&&c[n]<=k&&0!=e%c[n];n++);h!==n&&c[n]<=
k||(c[h++]=e)}c=(mS=c,c)}for(h=0;h<c.length;h++)if(0===f.modn(c[h]))return 0===f.cmpn(c[h]);return!0}function nS(f){var c=Go.mont(f);return 0===oS.toRed(c).redPow(f.subn(1)).fromRed().cmpn(1)}function DG(f,c){if(16>f)return new Go(2===c||5===c?[140,123]:[140,39]);var h,e;for(c=new Go(c);;){for(h=new Go(Fia(Math.ceil(f/8)));h.bitLength()>f;)h.ishrn(1);if(h.isEven()&&h.iadd(Gia),h.testn(1)||h.iadd(oS),c.cmp(oS)){if(!c.cmp(Hia))for(;h.mod(Iia).cmp(Jia);)h.iadd(j4)}else for(;h.mod(Kia).cmp(Lia);)h.iadd(j4);
if(lS(e=h.shrn(1))&&lS(h)&&nS(e)&&nS(h)&&k4.test(e)&&k4.test(h))return h}}function Mia(f,c){return c=c||"utf8",Yu.isBuffer(f)||(f=new Yu(f,c)),(this||Rj)._pub=new Or(f),this||Rj}function Nia(f,c){return c=c||"utf8",Yu.isBuffer(f)||(f=new Yu(f,c)),(this||Rj)._priv=new Or(f),this||Rj}function et(f,c,h){this.setGenerator(c);(this||Rj).__prime=new Or(f);(this||Rj)._prime=Or.mont((this||Rj).__prime);(this||Rj)._primeLen=f.length;(this||Rj)._pub=void 0;(this||Rj)._priv=void 0;(this||Rj)._primeCode=void 0;
h?((this||Rj).setPublicKey=Mia,(this||Rj).setPrivateKey=Nia):(this||Rj)._primeCode=8}function oL(f,c){f=new Yu(f.toArray());return c?f.toString(c):f}function pL(f,c){var h=l4(c);var e=h.toRed(Fy.mont(c.modulus)).redPow(new Fy(c.publicExponent)).fromRed();h=h.invm(c.modulus);var k=c.modulus.byteLength();f=(Fy.mont(c.modulus),(new Fy(f)).mul(e).umod(c.modulus));var n=f.toRed(Fy.mont(c.prime1)),b=f.toRed(Fy.mont(c.prime2));e=c.coefficient;var d=c.prime1;f=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);
n=n.fromRed();b=b.fromRed();e=n.isub(b).imul(e).umod(d);return e.imul(f),b.iadd(e),new Oia(b.imul(h).umod(c.modulus).toArray(!1,k))}function l4(f){for(var c=f.modulus.byteLength(),h=new Fy(m4(c));0<=h.cmp(f.modulus)||!h.umod(f.prime1)||!h.umod(f.prime2);)h=new Fy(m4(c));return h}function n4(f){return 1===f.length?"0"+f:f}function o4(f){for(var c="",h=0;h<f.length;h++)c+=n4(f[h].toString(16));return c}function XA(f,c){if(f instanceof XA)return f;this._importDER(f,c)||(Pia(f.r&&f.s,"Signature without r or s"),
this.r=new qL(f.r,16),this.s=new qL(f.s,16),void 0===f.recoveryParam?this.recoveryParam=null:this.recoveryParam=f.recoveryParam)}function Qia(){this.place=0}function pS(f,c){var h=f[c.place++];if(!(128&h))return h;h&=15;for(var e=0,k=0,n=c.place;k<h;k++,n++)e<<=8,e|=f[n];return c.place=n,e}function p4(f){for(var c=0,h=f.length-1;!(f[c]||128&f[c+1])&&c<h;)c++;return 0===c?f:f.slice(c)}function qS(f,c){if(128>c)return f.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(f.push(128|h);--h;)f.push(c>>>
(h<<3)&255);f.push(c)}function q4(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function r4(f){return 1===f.length?"0"+f:f}function s4(f){return 7===f.length?"0"+f:6===f.length?"00"+f:5===f.length?"000"+f:4===f.length?"0000"+f:3===f.length?"00000"+f:2===f.length?"000000"+f:1===f.length?"0000000"+f:f}function rL(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function Pr(){if(!(this instanceof Pr))return new Pr;t4.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=Ria;this.W=Array(160)}function ft(){if(!(this instanceof ft))return new ft;u4.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=Sia;this.W=Array(64)}function Zu(){if(!(this instanceof Zu))return new Zu;v4.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Lw(){if(!(this instanceof Lw))return new Lw;w4.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Mw(){if(!(this instanceof Mw))return new Mw;x4.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function $u(){if(!(this instanceof $u))return new $u;y4.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function z4(f,c,h,e){return 15>=f?c^h^e:31>=f?c&h|~c&e:47>=f?(c|~h)^e:63>=f?c&e|h&~e:c^(h|~e)}function GD(f,c,h){if(!(this instanceof GD))return new GD(f,c,h);this.Hash=f;this.blockSize=f.blockSize/8;this.outSize=f.outSize/8;this.outer=
this.inner=null;this._init(Tia.toArray(c,h))}function Nw(f){if(!(this instanceof Nw))return new Nw(f);this.hash=f.hash;this.predResist=!!f.predResist;this.outLen=this.hash.outSize;this.minEntropy=f.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=YA.toArray(f.entropy,f.entropyEnc||"hex"),h=YA.toArray(f.nonce,f.nonceEnc||"hex");f=YA.toArray(f.pers,f.persEnc||"hex");A4(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,h,f)}function gt(f,c){this.type=f;this.p=new ZA(c.p,16);this.red=c.prime?ZA.red(c.prime):ZA.mont(this.p);this.zero=(new ZA(0)).toRed(this.red);this.one=(new ZA(1)).toRed(this.red);this.two=(new ZA(2)).toRed(this.red);this.n=c.n&&new ZA(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;f=this.n&&this.p.div(this.n);!f||0<f.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function Qr(f,c){this.curve=f;this.type=c;this.precomputed=null}function Rr(f){HD.call(this,"short",f);this.a=(new lm(f.a,16)).toRed(this.red);this.b=(new lm(f.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(f);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Kn(f,c,h,e){HD.BasePoint.call(this,f,"affine");null===c&&null===
h?(this.x=null,this.y=null,this.inf=!0):(this.x=new lm(c,16),this.y=new lm(h,16),e&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function io(f,c,h,e){HD.BasePoint.call(this,f,"jacobian");null===c&&null===h&&null===e?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lm(0)):(this.x=new lm(c,16),this.y=new lm(h,16),this.z=new lm(e,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function ID(f){sL.call(this,"mont",f);this.a=(new JD(f.a,16)).toRed(this.red);this.b=(new JD(f.b,16)).toRed(this.red);this.i4=(new JD(4)).toRed(this.red).redInvm();this.two=(new JD(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Ln(f,c,h){sL.BasePoint.call(this,f,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new JD(c,16),this.z=new JD(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function av(f){this.extended=this.mOneA=(this.twisted=1!=(0|f.a))&&-1==(0|f.a);tL.call(this,"edwards",f);this.a=(new Ow(f.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Ow(f.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Ow(f.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Uia(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|f.c)}function ql(f,c,h,e,k){tL.BasePoint.call(this,f,"projective");null===c&&null===h&&null===e?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ow(c,16),this.y=new Ow(h,16),this.z=e?new Ow(e,16):this.curve.one,this.t=k&&new Ow(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function B4(f){"short"===f.type?this.curve=new rS.short(f):"edwards"===f.type?this.curve=new rS.edwards(f):this.curve=new rS.mont(f);this.g=this.curve.g;this.n=this.curve.n;this.hash=f.hash;C4(this.g.validate(),"Invalid curve");C4(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function Gy(f,c){Object.defineProperty(sS,f,{configurable:!0,enumerable:!0,
get:function(){var h=new B4(c);return Object.defineProperty(sS,f,{configurable:!0,enumerable:!0,value:h}),h}})}function Mn(f,c){this.ec=f;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function Sr(f){if(!(this instanceof Sr))return new Sr(f);"string"==typeof f&&(D4(tS.hasOwnProperty(f),"Unknown curve "+f),f=tS[f]);f instanceof tS.PresetCurve&&(f={curve:f});this.curve=f.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=f.curve.g;this.g.precompute(f.curve.n.bitLength()+1);this.hash=f.hash||f.curve.hash}function kn(f,c){this.eddsa=f;this._secret=E4(c.secret);f.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=E4(c.pub)}function Hy(f,c){this.eddsa=f;"object"!=typeof c&&(c=Via(c));Array.isArray(c)&&(c={R:c.slice(0,f.encodingLength),S:c.slice(f.encodingLength)});Wia(c.R&&c.S,"Signature without R or S");f.isPoint(c.R)&&(this._R=c.R);c.S instanceof Xia&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function Wp(f){if(Yia("ed25519"===f,"only tested with ed25519 so far"),!(this instanceof Wp))return new Wp(f);this.curve=f=Zia[f].curve;this.g=f.g;this.g.precompute(f.n.bitLength()+1);this.pointClass=f.point().constructor;this.encodingLength=Math.ceil(f.n.bitLength()/8);this.hash=$ia.sha512}function Tr(f){(this||ln)._reporterState={obj:null,path:[],options:f||{},errors:[]}}function KD(f,c){(this||ln).path=f;this.rethrow(c)}function F4(){function f(n,
b){if(e.call(this||Xh,b),!k.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||Xh).base=n;(this||Xh).offset=0;(this||Xh).length=n.length}function c(n,b){if(Array.isArray(n))(this||Xh).length=0,(this||Xh).value=n.map(function(d){return d instanceof c||(d=new c(d,b)),(this||Xh).length+=d.length,d},this||Xh);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||Xh).value=n;(this||Xh).length=1}else if("string"==typeof n)(this||Xh).value=n,(this||
Xh).length=k.byteLength(n);else{if(!k.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||Xh).value=n;(this||Xh).length=n.length}}if(G4)return uL;G4=!0;var h=Pi,e=EG().Reporter,k=ij.Buffer;return h(f,e),uL.DecoderBuffer=f,f.prototype.save=function(){return{offset:(this||Xh).offset,reporter:e.prototype.save.call(this||Xh)}},f.prototype.restore=function(n){var b=new f((this||Xh).base);return b.offset=n.offset,b.length=(this||Xh).offset,(this||Xh).offset=n.offset,e.prototype.restore.call(this||
Xh,n.reporter),b},f.prototype.isEmpty=function(){return(this||Xh).offset===(this||Xh).length},f.prototype.readUInt8=function(n){return(this||Xh).offset+1<=(this||Xh).length?(this||Xh).base.readUInt8((this||Xh).offset++,!0):this.error(n||"DecoderBuffer overrun")},f.prototype.skip=function(n,b){if(!((this||Xh).offset+n<=(this||Xh).length))return this.error(b||"DecoderBuffer overrun");b=new f((this||Xh).base);return b._reporterState=(this||Xh)._reporterState,b.offset=(this||Xh).offset,b.length=(this||
Xh).offset+n,(this||Xh).offset+=n,b},f.prototype.raw=function(n){return(this||Xh).base.slice(n?n.offset:(this||Xh).offset,(this||Xh).length)},uL.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new k((this||Xh).length)),b||(b=0),0===(this||Xh).length||(Array.isArray((this||Xh).value)?(this||Xh).value.forEach(function(d){d.join(n,b);b+=d.length}):("number"==typeof(this||Xh).value?n[b]=(this||Xh).value:"string"==typeof(this||Xh).value?n.write((this||Xh).value,b):k.isBuffer((this||Xh).value)&&
(this||Xh).value.copy(n,b),b+=(this||Xh).length)),n},uL}function EG(){if(H4)return uS;H4=!0;var f=uS;return f.Reporter=I4.Reporter,f.DecoderBuffer=F4().DecoderBuffer,f.EncoderBuffer=F4().EncoderBuffer,f.Node=function(){function c(a,g){var l={};(this||qh)._baseState=l;l.enc=a;l.parent=g||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(J4)return vS;J4=!0;var h=EG().Reporter,e=EG().EncoderBuffer,k=EG().DecoderBuffer,n=Ur,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),d="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);vS=c;var m="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var a=(this||qh)._baseState,g={};m.forEach(function(r){g[r]=a[r]});var l=new (this||qh).constructor(g.parent);return l._baseState=g,l},c.prototype._wrap=function(){var a=(this||qh)._baseState;d.forEach(function(g){(this||qh)[g]=function(){var l=new (this||qh).constructor(this||qh);return a.children.push(l),l[g].apply(l,arguments)}},this||qh)},c.prototype._init=function(a){var g=(this||qh)._baseState;n(null===g.parent);a.call(this||qh);g.children=g.children.filter(function(l){return l._baseState.parent===
(this||qh)},this||qh);n.equal(g.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var g=(this||qh)._baseState,l=a.filter(function(r){return r instanceof(this||qh).constructor},this||qh);a=a.filter(function(r){return!(r instanceof(this||qh).constructor)},this||qh);0!==l.length&&(n(null===g.children),g.children=l,l.forEach(function(r){r._baseState.parent=this||qh},this||qh));0!==a.length&&(n(null===g.args),g.args=a,g.reverseArgs=a.map(function(r){if("object"!=
typeof r||r.constructor!==Object)return r;var v={};return Object.keys(r).forEach(function(y){y==(0|y)&&(y|=0);v[r[y]]=y}),v}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=function(){throw Error(a+" not implemented for encoding: "+(this||qh)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var g=
(this||qh)._baseState,l=Array.prototype.slice.call(arguments);return n(null===g.tag),g.tag=a,this._useArgs(l),this||qh}}),c.prototype.use=function(a){n(a);var g=(this||qh)._baseState;return n(null===g.use),g.use=a,this||qh},c.prototype.optional=function(){return(this||qh)._baseState.optional=!0,this||qh},c.prototype.def=function(a){var g=(this||qh)._baseState;return n(null===g.default),g.default=a,g.optional=!0,this||qh},c.prototype.explicit=function(a){var g=(this||qh)._baseState;return n(null===
g.explicit&&null===g.implicit),g.explicit=a,this||qh},c.prototype.implicit=function(a){var g=(this||qh)._baseState;return n(null===g.explicit&&null===g.implicit),g.implicit=a,this||qh},c.prototype.obj=function(){var a=(this||qh)._baseState,g=Array.prototype.slice.call(arguments);return a.obj=!0,0!==g.length&&this._useArgs(g),this||qh},c.prototype.key=function(a){var g=(this||qh)._baseState;return n(null===g.key),g.key=a,this||qh},c.prototype.any=function(){return(this||qh)._baseState.any=!0,this||
qh},c.prototype.choice=function(a){var g=(this||qh)._baseState;return n(null===g.choice),g.choice=a,this._useArgs(Object.keys(a).map(function(l){return a[l]})),this||qh},c.prototype.contains=function(a){var g=(this||qh)._baseState;return n(null===g.use),g.contains=a,this||qh},c.prototype._decode=function(a,g){var l=(this||qh)._baseState;if(null===l.parent)return a.wrapResult(l.children[0]._decode(a,g));var r,v=l.default,y=!0,A=null;if(null!==l.key&&(A=a.enterKey(l.key)),l.optional){var E=null;if(null!==
l.explicit?E=l.explicit:null!==l.implicit?E=l.implicit:null!==l.tag&&(E=l.tag),null!==E||l.any){if(y=this._peekTag(a,E,l.any),a.isError(y))return y}else{var F=a.save();try{null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),y=!0}catch(I){y=!1}a.restore(F)}}if(l.obj&&y&&(r=a.enterObject()),y){if(null!==l.explicit){E=this._decodeTag(a,l.explicit);if(a.isError(E))return E;a=E}E=a.offset;if(null===l.use&&null===l.choice){l.any&&(F=a.save());var G=this._decodeTag(a,null!==l.implicit?
l.implicit:l.tag,l.any);if(a.isError(G))return G;l.any?v=a.raw(F):a=G}if(g&&g.track&&null!==l.tag&&g.track(a.path(),E,a.length,"tagged"),g&&g.track&&null!==l.tag&&g.track(a.path(),a.offset,a.length,"content"),v=l.any?v:null===l.choice?this._decodeGeneric(l.tag,a,g):this._decodeChoice(a,g),a.isError(v))return v;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(I){I._decode(a,g)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(v=new k(v),v=this._getUse(l.contains,a._reporterState.obj)._decode(v,
g))}return l.obj&&y&&(v=a.leaveObject(r)),null===l.key||null===v&&!0!==y?null!==A&&a.exitKey(A):a.leaveKey(A,l.key,v),v},c.prototype._decodeGeneric=function(a,g,l){var r=(this||qh)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(g,a,r.args[0],l):/str$/.test(a)?this._decodeStr(g,a,l):"objid"===a&&r.args?this._decodeObjid(g,r.args[0],r.args[1],l):"objid"===a?this._decodeObjid(g,null,null,l):"gentime"===a||"utctime"===a?this._decodeTime(g,a,l):"null_"===a?this._decodeNull(g,
l):"bool"===a?this._decodeBool(g,l):"objDesc"===a?this._decodeStr(g,a,l):"int"===a||"enum"===a?this._decodeInt(g,r.args&&r.args[0],l):null!==r.use?this._getUse(r.use,g._reporterState.obj)._decode(g,l):g.error("unknown tag: "+a)},c.prototype._getUse=function(a,g){var l=(this||qh)._baseState;return l.useDecoder=this._use(a,g),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},c.prototype._decodeChoice=function(a,g){var l=(this||qh)._baseState,r=null,v=!1;return Object.keys(l.choice).some(function(y){var A=a.save(),E=l.choice[y];try{var F=E._decode(a,g);if(a.isError(F))return!1;r={type:y,value:F};v=!0}catch(G){return a.restore(A),!1}return!0},this||qh),v?r:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new e(a,(this||qh).reporter)},c.prototype._encode=function(a,g,l){var r=(this||qh)._baseState;if(null===r.default||
r.default!==a)if(a=this._encodeValue(a,g,l),void 0!==a&&!this._skipDefault(a,g,l))return a},c.prototype._encodeValue=function(a,g,l){var r=(this||qh)._baseState;if(null===r.parent)return r.children[0]._encode(a,g||new h);var v=null;if((this||qh).reporter=g,r.optional&&void 0===a){if(null===r.default)return;a=r.default}var y=null,A=!1;if(r.any)v=this._createEncoderBuffer(a);else if(r.choice)v=this._encodeChoice(a,g);else if(r.contains)y=this._getUse(r.contains,l)._encode(a,g),A=!0;else if(r.children)y=
r.children.map(function(F){if("null_"===F._baseState.tag)return F._encode(null,g,a);if(null===F._baseState.key)return g.error("Child should have a key");var G=g.enterKey(F._baseState.key);if("object"!=typeof a)return g.error("Child expected, but input is not object");F=F._encode(a[F._baseState.key],g,a);return g.leaveKey(G),F},this||qh).filter(function(F){return F}),y=this._createEncoderBuffer(y);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return g.error("Too many args for : "+
r.tag);if(!Array.isArray(a))return g.error("seqof/setof, but data is not Array");y=this.clone();y._baseState.implicit=null;y=this._createEncoderBuffer(a.map(function(F){return this._getUse((this||qh)._baseState.args[0],a)._encode(F,g)},y))}else null!==r.use?v=this._getUse(r.use,l)._encode(a,g):(y=this._encodePrimitive(r.tag,a),A=!0);if(!r.any&&null===r.choice){l=null!==r.implicit?r.implicit:r.tag;var E=null===r.implicit?"universal":"context";null===l?null===r.use&&g.error("Tag could be omitted only for .use()"):
null===r.use&&(v=this._encodeComposite(l,A,E,y))}return null!==r.explicit&&(v=this._encodeComposite(r.explicit,!1,"context",v)),v},c.prototype._encodeChoice=function(a,g){var l=(this||qh)._baseState,r=l.choice[a.type];return r||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(l.choice))),r._encode(a.value,g)},c.prototype._encodePrimitive=function(a,g){var l=(this||qh)._baseState;if(/str$/.test(a))return this._encodeStr(g,a);if("objid"===a&&l.args)return this._encodeObjid(g,l.reverseArgs[0],
l.args[1]);if("objid"===a)return this._encodeObjid(g,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(g,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(g,l.args&&l.reverseArgs[0]);if("bool"===a)return this._encodeBool(g);if("objDesc"===a)return this._encodeStr(g,a);throw Error("Unsupported tag: "+a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},
vS}(),uS}function K4(){if(L4)return wS;L4=!0;var f=wS;return f._reverse=function(c){var h={};return Object.keys(c).forEach(function(e){(0|e)==e&&(e|=0);h[c[e]]=e}),h},f.der=function(){if(M4)return Iy;M4=!0;var c=K4();return Iy.tagClass={0:"universal",1:"application",2:"context",3:"private"},Iy.tagClassByName=c._reverse(Iy.tagClass),Iy.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},Iy.tagByName=c._reverse(Iy.tag),Iy}(),wS}function N4(){function f(a){(this||Jy).enc="der";(this||Jy).name=a.name;(this||Jy).entity=a;(this||Jy).tree=new c;(this||Jy).tree._init(a.body)}function c(a){b.Node.call(this||Jy,"der",a)}function h(a,g){var l=a.readUInt8(g);if(a.isError(l))return l;var r=m.tagClass[l>>6],v=0==(32&
l);if(31==(31&l)){var y=l;for(l=0;128==(128&y);){if(y=a.readUInt8(g),a.isError(y))return y;l<<=7;l|=127&y}}else l&=31;return{cls:r,primitive:v,tag:l,tagStr:m.tag[l]}}function e(a,g,l){var r=a.readUInt8(l);if(a.isError(r))return r;if(!g&&128===r)return null;if(0==(128&r))return r;g=127&r;if(4<g)return a.error("length octect is too long");for(var v=r=0;v<g;v++){r<<=8;var y=a.readUInt8(l);if(a.isError(y))return y;r|=y}return r}if(O4)return xS;O4=!0;var k=Pi,n=vL(),b=n.base,d=n.bignum,m=n.constants.der;
return xS=f,f.prototype.decode=function(a,g){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,g)),(this||Jy).tree._decode(a,g)},k(c,b.Node),c.prototype._peekTag=function(a,g,l){if(a.isEmpty())return!1;var r=a.save(),v=h(a,'Failed to peek tag: "'+g+'"');return a.isError(v)?v:(a.restore(r),v.tag===g||v.tagStr===g||v.tagStr+"of"===g||l)},c.prototype._decodeTag=function(a,g,l){var r=h(a,'Failed to decode tag of "'+g+'"');if(a.isError(r))return r;var v=e(a,r.primitive,'Failed to get length of "'+
g+'"');if(a.isError(v))return v;if(!l&&r.tag!==g&&r.tagStr!==g&&r.tagStr+"of"!==g)return a.error('Failed to match tag: "'+g+'"');if(r.primitive||null!==v)return a.skip(v,'Failed to match body of: "'+g+'"');l=a.save();r=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||Jy).tag+'"');return a.isError(r)?r:(v=a.offset-l.offset,a.restore(l),a.skip(v,'Failed to match body of: "'+g+'"'))},c.prototype._skipUntilEnd=function(a,g){for(;;){var l=h(a,g);if(a.isError(l))return l;var r,v=e(a,
l.primitive,g);if(a.isError(v))return v;if(r=l.primitive||null!==v?a.skip(v):this._skipUntilEnd(a,g),a.isError(r))return r;if("end"===l.tagStr)break}},c.prototype._decodeList=function(a,g,l,r){for(g=[];!a.isEmpty();){var v=this._peekTag(a,"end");if(a.isError(v))return v;var y=l.decode(a,"der",r);if(a.isError(y)&&v)break;g.push(y)}return g},c.prototype._decodeStr=function(a,g){if("bitstr"===g)return g=a.readUInt8(),a.isError(g)?g:{unused:g,data:a.raw()};if("bmpstr"===g){g=a.raw();if(1==g.length%2)return a.error("Decoding of string type: bmpstr length mismatch");
a="";for(var l=0;l<g.length/2;l++)a+=String.fromCharCode(g.readUInt16BE(2*l));return a}return"numstr"===g?(g=a.raw().toString("ascii"),this._isNumstr(g)?g:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===g||"objDesc"===g?a.raw():"printstr"===g?(g=a.raw().toString("ascii"),this._isPrintstr(g)?g:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(g)?a.raw().toString():a.error("Decoding of string type: "+g+" unsupported")},c.prototype._decodeObjid=
function(a,g,l){for(var r=[],v=0;!a.isEmpty();){var y=a.readUInt8();v<<=7;v|=127&y;0==(128&y)&&(r.push(v),v=0)}128&y&&r.push(v);a=r[0]/40|0;v=r[0]%40;if(l=l?r:[a,v].concat(r.slice(1)),g)r=g[l.join(" ")],void 0===r&&(r=g[l.join(".")]),void 0!==r&&(l=r);return l},c.prototype._decodeTime=function(a,g){var l=a.raw().toString();if("gentime"===g){a=0|l.slice(0,4);g=0|l.slice(4,6);var r=0|l.slice(6,8),v=0|l.slice(8,10),y=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==g)return a.error("Decoding "+
g+" time is not supported yet");a=0|l.slice(0,2);g=0|l.slice(2,4);r=0|l.slice(4,6);v=0|l.slice(6,8);y=0|l.slice(8,10);l=0|l.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,g-1,r,v,y,l,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var g=a.readUInt8();return a.isError(g)?g:0!==g},c.prototype._decodeInt=function(a,g){a=a.raw();a=new d(a);return g&&(a=g[a.toString(10)]||a),a},c.prototype._use=function(a,g){return"function"==typeof a&&(a=a(g)),a._getDecoder("der").tree},
xS}function aja(){if(P4)return yS;P4=!0;var f=yS;return f.der=N4(),f.pem=function(){function c(n){k.call(this||zS,n);(this||zS).enc="pem"}if(Q4)return AS;Q4=!0;var h=Pi,e=ij.Buffer,k=N4();return h(c,k),AS=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var d=b.label.toUpperCase(),m=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,g=-1,l=0;l<n.length;l++){var r=n[l].match(m);if(null!==r&&r[2]===d){if(-1!==a){if("END"!==r[1])break;g=l;break}if("BEGIN"!==r[1])break;a=l}}if(-1===a||-1===
g)throw Error("PEM section not found for: "+d);n=n.slice(a+1,g).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new e(n,"base64");return k.prototype.decode.call(this||zS,n,b)},AS}(),yS}function R4(){function f(m){(this||mn).enc="der";(this||mn).name=m.name;(this||mn).entity=m;(this||mn).tree=new c;(this||mn).tree._init(m.body)}function c(m){b.Node.call(this||mn,"der",m)}function h(m){return 10>m?"0"+m:m}if(S4)return BS;S4=!0;var e=Pi,k=ij.Buffer,n=vL(),b=n.base,d=n.constants.der;return BS=f,f.prototype.encode=
function(m,a){return(this||mn).tree._encode(m,a).join()},e(c,b.Node),c.prototype._encodeComposite=function(m,a,g,l){var r;a:{var v=m;m=(this||mn).reporter;"seqof"===v?v="seq":"setof"===v&&(v="set");if(d.tagByName.hasOwnProperty(v))v=d.tagByName[v];else if("number"!=typeof v||(0|v)!==v){g=m.error("Unknown tag: "+v);break a}31<=v?g=m.error("Multi-octet tag encoding unsupported"):(a||(v|=32),g=v|d.tagClassByName[g||"universal"]<<6)}if(128>l.length)return(r=new k(2))[0]=g,r[1]=l.length,this._createEncoderBuffer([r,
l]);m=1;for(a=l.length;256<=a;a>>=8)m++;(r=new k(2+m))[0]=g;r[1]=128|m;a=1+m;for(g=l.length;0<g;a--,g>>=8)r[a]=255&g;return this._createEncoderBuffer([r,l])},c.prototype._encodeStr=function(m,a){if("bitstr"===a)return this._createEncoderBuffer([0|m.unused,m.data]);if("bmpstr"===a){a=new k(2*m.length);for(var g=0;g<m.length;g++)a.writeUInt16BE(m.charCodeAt(g),2*g);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(m)?this._createEncoderBuffer(m):(this||mn).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===a?this._isPrintstr(m)?this._createEncoderBuffer(m):(this||mn).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(m):(this||mn).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(m,a,g){if("string"==typeof m){if(!a)return(this||
mn).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(m))return(this||mn).reporter.error("objid not found in values map");m=a[m].split(/[\s\.]+/g);for(a=0;a<m.length;a++)m[a]|=0}else if(Array.isArray(m))for(m=m.slice(),a=0;a<m.length;a++)m[a]|=0;if(!Array.isArray(m))return(this||mn).reporter.error("objid() should be either array or string, got: "+JSON.stringify(m));if(!g){if(40<=m[1])return(this||mn).reporter.error("Second objid identifier OOB");m.splice(0,2,40*m[0]+
m[1])}var l=0;for(a=0;a<m.length;a++)for(g=m[a],l++;128<=g;g>>=7)l++;l=new k(l);var r=l.length-1;for(a=m.length-1;0<=a;a--)for(g=m[a],l[r--]=127&g;0<(g>>=7);)l[r--]=128|127&g;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(m,a){var g;m=new Date(m);return"gentime"===a?g=[h(m.getFullYear()),h(m.getUTCMonth()+1),h(m.getUTCDate()),h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):"utctime"===a?g=[h(m.getFullYear()%100),h(m.getUTCMonth()+1),h(m.getUTCDate()),
h(m.getUTCHours()),h(m.getUTCMinutes()),h(m.getUTCSeconds()),"Z"].join(""):(this||mn).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(g,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(m,a){if("string"==typeof m){if(!a)return(this||mn).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(m))return(this||mn).reporter.error("Values map doesn't contain: "+JSON.stringify(m));m=a[m]}"number"==
typeof m||k.isBuffer(m)||(a=m.toArray(),!m.sign&&128&a[0]&&a.unshift(0),m=new k(a));if(k.isBuffer(m)){var g=m.length;0===m.length&&g++;g=new k(g);return m.copy(g),0===m.length&&(g[0]=0),this._createEncoderBuffer(g)}if(128>m)return this._createEncoderBuffer(m);if(256>m)return this._createEncoderBuffer([0,m]);g=1;for(a=m;256<=a;a>>=8)g++;for(a=(g=Array(g)).length-1;0<=a;a--)g[a]=255&m,m>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(new k(g))},c.prototype._encodeBool=function(m){return this._createEncoderBuffer(m?
255:0)},c.prototype._use=function(m,a){return"function"==typeof m&&(m=m(a)),m._getEncoder("der").tree},c.prototype._skipDefault=function(m,a,g){var l=(this||mn)._baseState;if(null===l.default)return!1;m=m.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,a,g).join()),m.length!==l.defaultBuffer.length)return!1;for(a=0;a<m.length;a++)if(m[a]!==l.defaultBuffer[a])return!1;return!0},BS}function bja(){if(T4)return CS;T4=!0;var f=CS;return f.der=R4(),f.pem=function(){function c(k){e.call(this||
DS,k);(this||DS).enc="pem"}if(U4)return ES;U4=!0;var h=Pi,e=R4();return h(c,e),ES=c,c.prototype.encode=function(k,n){k=e.prototype.encode.call(this||DS,k).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],d=0;d<k.length;d+=64)b.push(k.slice(d,d+64));return b.push("-----END "+n.label+"-----"),b.join("\n")},ES}(),CS}function vL(){if(V4)return FS;V4=!0;var f=FS;return f.bignum=Om,f.define=function(){function c(k,n){(this||Dq).name=k;(this||Dq).body=n;(this||Dq).decoders={};(this||Dq).encoders=
{}}if(W4)return GS;W4=!0;var h=vL(),e=Pi;return GS.define=function(k,n){return new c(k,n)},c.prototype._createNamed=function(k){try{var n=$A.runInThisContext("(function "+(this||Dq).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(d){this._initNamed(d)}}return e(n,k),n.prototype._initNamed=function(b){k.call(this||Dq,b)},new n(this||Dq)},c.prototype._getDecoder=function(k){return k=k||"der",(this||Dq).decoders.hasOwnProperty(k)||((this||Dq).decoders[k]=this._createNamed(h.decoders[k])),
(this||Dq).decoders[k]},c.prototype.decode=function(k,n,b){return this._getDecoder(n).decode(k,b)},c.prototype._getEncoder=function(k){return k=k||"der",(this||Dq).encoders.hasOwnProperty(k)||((this||Dq).encoders[k]=this._createNamed(h.encoders[k])),(this||Dq).encoders[k]},c.prototype.encode=function(k,n,b){return this._getEncoder(n).encode(k,b)},GS}().define,f.base=EG(),f.constants=K4(),f.decoders=aja(),f.encoders=bja(),FS}function LD(f){var c;"object"!=typeof f||HS.isBuffer(f)||(c=f.passphrase,
f=f.key);"string"==typeof f&&(f=HS.from(f));var h=c;f=f.toString();var e=f.match(cja);if(e){var k="aes"+e[1],n=wL.from(e[2],"hex");var b=wL.from(e[3].replace(/[\r\n]/g,""),"base64");e=FG(h,n.slice(0,8),parseInt(e[1],10)).key;h=[];k=Eq.createDecipheriv(k,e,n);h.push(k.update(b));h.push(k.final());b=wL.concat(h)}else b=f.match(dja),b=new wL(b[2].replace(/[\r\n]/g,""),"base64");f=f.match(eja)[1];switch(f){case "CERTIFICATE":var d=Xp.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||
(d=Xp.PublicKey.decode(b,"der")),c=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Xp.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=Xp.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=Xp.EncryptedPrivateKey.decode(b,"der"),
b=c,k=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=fja[h.algorithm.decrypt.cipher.algo.join(".")],f=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(d.split("-")[1],10)/8,b=gja.pbkdf2Sync(b,k,n,h,"sha1"),d=hja.createDecipheriv(d,b,f),f=[],b=(f.push(d.update(c)),f.push(d.final()),HS.concat(f));case "PRIVATE KEY":switch(c=(d=Xp.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Xp.RSAPrivateKey.decode(d.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:Xp.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=Xp.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Xp.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Xp.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Xp.DSAPrivateKey.decode(b,
"der")};case "EC PRIVATE KEY":return{curve:(b=Xp.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+f);}}function X4(f,c,h,e){if((f=new Ho(f.toArray())).length<c.byteLength()){var k=new Ho(c.byteLength()-f.length);k.fill(0);f=Ho.concat([k,f])}k=h.length;h=(h=IS(h,c)).mod(c);h=new Ho(h.toArray());h.length<c.byteLength()&&(c=new Ho(c.byteLength()-h.length),c.fill(0),h=Ho.concat([c,h]));c=h;h=new Ho(k);h.fill(1);k=new Ho(k);return k.fill(0),
k=aB(e,k).update(h).update(new Ho([0])).update(f).update(c).digest(),h=aB(e,k).update(h).digest(),{k:k=aB(e,k).update(h).update(new Ho([1])).update(f).update(c).digest(),v:aB(e,k).update(h).digest()}}function IS(f,c){var h=new xL(f);f=(f.length<<3)-c.bitLength();return 0<f&&h.ishrn(f),h}function Y4(f,c,h){var e;do{for(e=new Ho(0);8*e.length<f.bitLength();)c.v=aB(h,c.k).update(c.v).digest(),e=Ho.concat([e,c.v]);e=IS(e,f);c.k=aB(h,c.k).update(c.v).update(new Ho([0])).digest();c.v=aB(h,c.k).update(c.v).digest()}while(-1!==
e.cmp(f));return e}function Z4(f,c){if(0>=f.cmpn(0))throw Error("invalid sig");if(f.cmp(c)>=c)throw Error("invalid sig");}function GG(f){yL.Writable.call(this||mm);f=bB[f];if(!f)throw Error("Unknown message digest");(this||mm)._hashType=f.hash;(this||mm)._hash=$4(f.hash);(this||mm)._tag=f.id;(this||mm)._signType=f.sign}function HG(f){yL.Writable.call(this||mm);f=bB[f];if(!f)throw Error("Unknown message digest");(this||mm)._hash=$4(f.hash);(this||mm)._tag=f.id;(this||mm)._signType=f.sign}function a5(f){return new GG(f)}
function b5(f){return new HG(f)}function cB(f){(this||nn).curveType=Fq[f];(this||nn).curveType||((this||nn).curveType={name:f});(this||nn).curve=new ija.ec((this||nn).curveType.name);(this||nn).keys=void 0}function JS(f,c,h){Array.isArray(f)||(f=f.toArray());f=new Pw(f);h&&f.length<h&&(h=new Pw(h-f.length),h.fill(0),f=Pw.concat([h,f]));return c?f.toString(c):f}function c5(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function d5(f,
c){if("number"!=typeof f||f!=f)throw new TypeError("offset must be a number");if(f>e5||0>f)throw new TypeError("offset must be a uint32");if(f>f5||f>c)throw new RangeError("offset out of range");}function g5(f,c,h){if("number"!=typeof f||f!=f)throw new TypeError("size must be a number");if(f>e5||0>f)throw new TypeError("size must be a uint32");if(f+c>h||f>f5)throw new RangeError("buffer too small");}function h5(f,c,h,e){return KS.browser?(h=new Uint8Array(f.buffer,c,h),LS.getRandomValues(h),e?(KS.nextTick(function(){e(null,
f)}),void 0):f):e?(i5(h,function(k,n){if(k)return e(k);n.copy(f,c);e(null,f)}),void 0):(i5(h).copy(f,c),f)}function jja(f){var c=[];f.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,16))});return c}function zL(f){return f&&f.__esModule?f:{default:f}}function j5(f,c){f=f||[];c=c||{};try{return new Blob(f,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),e=0;e<f.length;e+=1)h.append(f[e]);return h.getBlob(c.type)}}function k5(f){for(var c=f.length,h=new ArrayBuffer(c),e=new Uint8Array(h),k=0;k<c;k++)e[k]=f.charCodeAt(k);return h}function l5(f,c){return j5([k5(f)],{type:c})}function m5(f,c){var h=new FileReader,e="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(e)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,d=0;d<b;d++)k+=String.fromCharCode(n[d]);c(k)};e?
h.readAsBinaryString(f):h.readAsArrayBuffer(f)}function n5(f,c){m5(f,function(h){c(h)})}function kja(f,c,h){return f.webkitSlice?f.webkitSlice(c,h):f.slice(c,h)}function lja(f,c,h,e,k){if(0<h||e<c.size)c=kja(c,h,e);o5.readAsArrayBuffer(c,function(n){f.append(n);k()})}function mja(f,c,h,e,k){if(0<h||e<c.length)c=c.substring(h,e);f.appendBinary(c);k()}function AL(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function IG(f){var c;if(!f||"object"!==typeof f)return f;if(Array.isArray(f)){var h=
[];var e=0;for(c=f.length;e<c;e++)h[e]=IG(f[e]);return h}if(f instanceof Date)return f.toISOString();if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer||"undefined"!==typeof Blob&&f instanceof Blob)return f instanceof ArrayBuffer?"function"===typeof f.slice?f=f.slice(0):(e=new ArrayBuffer(f.byteLength),h=new Uint8Array(e),f=new Uint8Array(f),h.set(f),f=e):(e=f.size,h=f.type,f="function"===typeof f.slice?f.slice(0,e,h):f.webkitSlice(0,e,h)),f;h=Object.getPrototypeOf(f);null===h?h=!0:(h=
h.constructor,h="function"==typeof h&&h instanceof h&&p5.call(h)==nja);if(!h)return f;h={};for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(c=IG(f[e]),"undefined"!==typeof c&&(h[e]=c));return h}function q5(f){var c=!1;return MS(function(h){if(c)throw Error("once called more than once");c=!0;f.apply(this,h)})}function r5(f){return MS(function(c){c=IG(c);var h=this,e="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var d;try{var m=q5(function(a,g){a?b(a):n(g)});c.push(m);
(d=f.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(a){b(a)}});e&&k.then(function(n){e(null,n)},e);return k})}function oja(f,c,h){if(f.constructor.listeners("debug").length){for(var e=["api",f.name,c],k=0;k<h.length-1;k++)e.push(h[k]);f.constructor.emit("debug",e);var n=h[h.length-1];h[h.length-1]=function(b,d){var m=["api",f.name,c];m=m.concat(b?["error",b]:["success",d]);f.constructor.emit("debug",m);n(b,d)}}}function NS(f,c){for(var h={},e=0,k=c.length;e<k;e++){var n=c[e];n in f&&(h[n]=f[n])}return h}
function s5(f){return f}function pja(f){return[{ok:f}]}function qja(f){BL&&addEventListener("storage",function(c){f.emit(c.key)})}function MD(){CL.call(this);this._listeners={};qja(this)}function OS(f){if("undefined"!==typeof console&&"function"===typeof console[f]){var c=Array.prototype.slice.call(arguments,1);console[f].apply(console,c)}}function t5(f){if(!f)return null;var c=f.split("/");return 2===c.length?c:1===c.length?[f,f]:null}function u5(f,c,h){return new Promise(function(e,k){f.get(c,function(n,
b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return e({updated:!1,rev:n});b._id=c;b._rev=n;e(rja(f,b,h))})})}function rja(f,c,h){return f.put(c).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return u5(f,c._id,h)})}function v5(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");-1===f&&(f=c);return[f,f===c?0:4-f%4]}function sja(f,c,h){for(var e=[],k=c;k<h;k+=3)c=(f[k]<<16&16711680)+(f[k+
1]<<8&65280)+(f[k+2]&255),e.push(bv[c>>18&63]+bv[c>>12&63]+bv[c>>6&63]+bv[c&63]);return e.join("")}function Qw(f){if(f>PS)throw new RangeError('The value "'+f+'" is invalid for option "size"');f=new Uint8Array(f);Object.setPrototypeOf(f,lf.prototype);return f}function lf(f,c,h){if("number"===typeof f){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return QS(f)}return w5(f,c,h)}function w5(f,c,h){if("string"===typeof f){var e=c;if("string"!==
typeof e||""===e)e="utf8";if(!lf.isEncoding(e))throw new TypeError("Unknown encoding: "+e);c=x5(f,e)|0;h=Qw(c);f=h.write(f,e);f!==c&&(h=h.slice(0,f));return h}if(ArrayBuffer.isView(f))return RS(f);if(null==f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Rw(f,ArrayBuffer)||f&&Rw(f.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(Rw(f,SharedArrayBuffer)||f&&Rw(f.buffer,SharedArrayBuffer))){if(0>
c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');f=void 0===c&&void 0===h?new Uint8Array(f):void 0===h?new Uint8Array(f,c):new Uint8Array(f,c,h);Object.setPrototypeOf(f,lf.prototype);return f}if("number"===typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');e=f.valueOf&&f.valueOf();if(null!=e&&e!==f)return lf.from(e,c,h);if(e=tja(f))return e;
if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof f[Symbol.toPrimitive])return lf.from(f[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);}function y5(f){if("number"!==typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function QS(f){y5(f);return Qw(0>
f?0:SS(f)|0)}function RS(f){for(var c=0>f.length?0:SS(f.length)|0,h=Qw(c),e=0;e<c;e+=1)h[e]=f[e]&255;return h}function tja(f){if(lf.isBuffer(f)){var c=SS(f.length)|0,h=Qw(c);if(0===h.length)return h;f.copy(h,0,0,c);return h}if(void 0!==f.length)return(c="number"!==typeof f.length)||(c=f.length,c=c!==c),c?Qw(0):RS(f);if("Buffer"===f.type&&Array.isArray(f.data))return RS(f.data)}function SS(f){if(f>=PS)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+PS.toString(16)+" bytes");
return f|0}function x5(f,c){if(lf.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Rw(f,ArrayBuffer))return f.byteLength;if("string"!==typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var h=f.length,e=2<arguments.length&&!0===arguments[2];if(!e&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return TS(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
h;case "hex":return h>>>1;case "base64":return DL.toByteArray(z5(f)).length;default:if(k)return e?-1:TS(f).length;c=(""+c).toLowerCase();k=!0}}function uja(f,c,h){var e=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;if(!c||0>c)c=0;if(!h||0>h||h>f)h=f;for(f="";c<h;++c)f+=vja[this[c]];return f;case "utf8":case "utf-8":return A5(this,c,h);case "ascii":f=
"";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(this[c]&127);return f;case "latin1":case "binary":f="";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return c=0===c&&h===this.length?DL.fromByteArray(this):DL.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(f=0;f<c.length;f+=2)h+=String.fromCharCode(c[f]+256*c[f+1]);return h;default:if(e)throw new TypeError("Unknown encoding: "+
f);f=(f+"").toLowerCase();e=!0}}function dB(f,c,h){var e=f[c];f[c]=f[h];f[h]=e}function B5(f,c,h,e,k){if(0===f.length)return-1;"string"===typeof h?(e=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=k?0:f.length-1);0>h&&(h=f.length+h);if(h>=f.length){if(k)return-1;h=f.length-1}else if(0>h)if(k)h=0;else return-1;"string"===typeof c&&(c=lf.from(c,e));if(lf.isBuffer(c))return 0===c.length?-1:C5(f,c,h,e,k);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
k?Uint8Array.prototype.indexOf.call(f,c,h):Uint8Array.prototype.lastIndexOf.call(f,c,h):C5(f,[c],h,e,k);throw new TypeError("val must be string, number or Buffer");}function C5(f,c,h,e,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,d=f.length,m=c.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>f.length||2>c.length)return-1;b=2;d/=2;m/=2;h/=2}if(k)for(e=-1;h<d;h++)if(n(f,h)===n(c,-1===e?0:h-e)){if(-1===e&&(e=h),h-e+1===
m)return e*b}else-1!==e&&(h-=h-e),e=-1;else for(h+m>d&&(h=d-m);0<=h;h--){d=!0;for(e=0;e<m;e++)if(n(f,h+e)!==n(c,e)){d=!1;break}if(d)return h}return-1}function A5(f,c,h){h=Math.min(f.length,h);for(var e=[];c<h;){var k=f[c],n=null,b=239<k?4:223<k?3:191<k?2:1;if(c+b<=h)switch(b){case 1:128>k&&(n=k);break;case 2:var d=f[c+1];128===(d&192)&&(k=(k&31)<<6|d&63,127<k&&(n=k));break;case 3:d=f[c+1];var m=f[c+2];128===(d&192)&&128===(m&192)&&(k=(k&15)<<12|(d&63)<<6|m&63,2047<k&&(55296>k||57343<k)&&(n=k));break;
case 4:d=f[c+1];m=f[c+2];var a=f[c+3];128===(d&192)&&128===(m&192)&&128===(a&192)&&(k=(k&15)<<18|(d&63)<<12|(m&63)<<6|a&63,65535<k&&1114112>k&&(n=k))}null===n?(n=65533,b=1):65535<n&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|n&1023);e.push(n);c+=b}f=e.length;if(f<=D5)e=String.fromCharCode.apply(String,e);else{h="";for(c=0;c<f;)h+=String.fromCharCode.apply(String,e.slice(c,c+=D5));e=h}return e}function Nn(f,c,h){if(0!==f%1||0>f)throw new RangeError("offset is not uint");if(f+c>h)throw new RangeError("Trying to access beyond buffer length");
}function Yp(f,c,h,e,k,n){if(!lf.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+e>f.length)throw new RangeError("Index out of range");}function E5(f,c,h,e,k,n){if(h+e>f.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function F5(f,c,h,e,k){c=+c;h>>>=0;k||E5(f,c,h,4);ND.write(f,c,h,e,23,4);return h+4}function G5(f,c,h,e,k){c=+c;h>>>=0;k||E5(f,
c,h,8);ND.write(f,c,h,e,52,8);return h+8}function z5(f){f=f.split("=")[0];f=f.trim().replace(wja,"");if(2>f.length)return"";for(;0!==f.length%4;)f+="=";return f}function TS(f,c){c=c||Infinity;for(var h,e=f.length,k=null,n=[],b=0;b<e;++b){h=f.charCodeAt(b);if(55295<h&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===e){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=(k-55296<<10|h-56320)+65536}else k&&-1<
(c-=3)&&n.push(239,191,189);k=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function H5(f){for(var c=[],h=0;h<f.length;++h)c.push(f.charCodeAt(h)&255);return c}function JG(f,c,h,e){for(var k=0;k<e&&!(k+h>=c.length||k>=f.length);++k)c[k+
h]=f[k];return k}function Rw(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function Ky(f){if("object"!==typeof f||null===f)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Sw).db=f;(this||Sw)._ended=!1;(this||Sw)._nexting=!1}function ht(f){if("object"!==typeof f||null===f)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||on).db=f;(this||on)._operations=
[];(this||on)._written=!1}function Kl(f){(this||Gq).status="new";(this||Gq).supports=xja(f,{status:!0})}function I5(f,c){var h={},e;for(e in c)if(yja.call(c,e)){var k=c[e];-1!==zja.indexOf(e)&&(k=f._serializeKey(k));h[e]=k}return h}function OD(f,c){J5.call(this||it,f);(this||it)._options=c;(this||it)._iterator=null;(this||it)._operations=[]}function eB(f){K5.call(this||On,f.supports||{});Aja.forEach(function(c){"function"!==typeof f[c]||(this||On).supports.additionalMethods[c]||((this||On).supports.additionalMethods[c]=
!0)},this||On);(this||On)._db=f;(this||On)._operations=[];L5(this||On)}function Bja(f){M5.concat("iterator").forEach(function(c){f["_"+c]=function(){return(this||On)._db[c].apply((this||On)._db,arguments)}});Object.keys(f.supports.additionalMethods).forEach(function(c){f[c]=function(){return(this||On)._db[c].apply((this||On)._db,arguments)}})}function L5(f){M5.forEach(function(c){f["_"+c]=function(){(this||On)._operations.push({method:c,args:arguments})}});Object.keys(f.supports.additionalMethods).forEach(function(c){f[c]=
function(){(this||On)._operations.push({method:c,args:arguments})}});f._iterator=function(c){c=new N5(f,c);(this||On)._operations.push({iterator:c});return c}}function O5(){if(P5)return Q5;P5=!0;return Q5=Vu.EventEmitter}function PD(){function f(e,k,n){n||(n=Error);var b=function(d,m,a){return n.call(this,"string"===typeof k?k:k(d,m,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=e;h[e]=b}function c(e,k){if(Array.isArray(e)){var n=e.length;e=e.map(function(b){return String(b)});
return 2<n?"one of "+k+" "+e.slice(0,n-1).join(", ")+", or "+e[n-1]:2===n?"one of "+k+" "+e[0]+" or "+e[1]:"of "+k+" "+e[0]}return"of "+k+" "+String(e)}if(R5)return US;R5=!0;var h={};f("ERR_INVALID_OPT_VALUE",function(e,k){return'The value "'+k+'" is invalid for option "'+e+'"'},TypeError);f("ERR_INVALID_ARG_TYPE",function(e,k,n){var b;if(b="string"===typeof k)b="not "===k.substr(0,4);b?(b="must not be",k=k.replace(/^not /,"")):b="must be";var d=void 0;if(void 0===d||d>e.length)d=e.length;" argument"===
e.substring(d-9,d)?e="The "+e+" "+b+" "+c(k,"type"):(d=void 0,"number"!==typeof d&&(d=0),d=d+1>e.length?!1:-1!==e.indexOf(".",d),e='The "'+e+'" '+(d?"property":"argument")+" "+b+" "+c(k,"type"));return e+(". Received type "+typeof n)},TypeError);f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");f("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});f("ERR_STREAM_PREMATURE_CLOSE","Premature close");f("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+
" after a stream was destroyed"});f("ERR_MULTIPLE_CALLBACK","Callback called multiple times");f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");f("ERR_STREAM_WRITE_AFTER_END","write after end");f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);f("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");US.codes=h;return US}function VS(f){try{if(!WS.localStorage)return!1}catch(c){return!1}f=
WS.localStorage[f];return null==f?!1:"true"===String(f).toLowerCase()}function S5(f,c){for(var h in f)c[h]=f[h]}function fB(f,c,h){return cv(f,c,h)}function Cja(f){if(!f)return"utf8";for(var c;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(c)return;f=(""+f).toLowerCase();c=!0}}function KG(f){var c=Cja(f);if("string"!==typeof c&&
(XS.isEncoding===T5||!T5(f)))throw Error("Unknown encoding: "+f);this.encoding=c||f;switch(this.encoding){case "utf16le":this.text=Dja;this.end=Eja;f=4;break;case "utf8":this.fillLast=Fja;f=4;break;case "base64":this.text=Gja;this.end=Hja;f=3;break;default:this.write=Ija;this.end=Jja;return}this.lastTotal=this.lastNeed=0;this.lastChar=XS.allocUnsafe(f)}function YS(f){return 127>=f?0:6===f>>5?2:14===f>>4?3:30===f>>3?4:2===f>>6?-1:-2}function Kja(f,c,h){var e=c.length-1;if(e<h)return 0;var k=YS(c[e]);
if(0<=k)return 0<k&&(f.lastNeed=k-1),k;if(--e<h||-2===k)return 0;k=YS(c[e]);if(0<=k)return 0<k&&(f.lastNeed=k-2),k;if(--e<h||-2===k)return 0;k=YS(c[e]);return 0<=k?(0<k&&(2===k?k=0:f.lastNeed=k-3),k):0}function Fja(f){var c=this.lastTotal-this.lastNeed;a:if(128!==(f[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&1<f.length){if(128!==(f[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<f.length&&128!==(f[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==
h)return h;if(this.lastNeed<=f.length)return f.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,c,0,f.length);this.lastNeed-=f.length}function Dja(f,c){if(0===(f.length-c)%2){if(c=f.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=f[f.length-
1];return f.toString("utf16le",c,f.length-1)}function Eja(f){f=f&&f.length?this.write(f):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function Gja(f,c){var h=(f.length-c)%3;if(0===h)return f.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]);return f.toString("base64",c,f.length-h)}function Hja(f){f=f&&f.length?this.write(f):"";return this.lastNeed?
f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function Ija(f){return f.toString(this.encoding)}function Jja(f){return f&&f.length?this.write(f):""}function ZS(){function f(k){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,d=Array(b),m=0;m<b;m++)d[m]=arguments[m];k.apply(this,d)}}}function c(){}function h(k,n,b){if("function"===typeof n)return h(k,null,n);n||(n={});b=f(b||c);var d=n.readable||!1!==n.readable&&k.readable,m=n.writable||!1!==n.writable&&k.writable,a=function(){k.writable||
l()},g=k._writableState&&k._writableState.finished,l=function(){m=!1;g=!0;d||b.call(k)},r=k._readableState&&k._readableState.endEmitted,v=function(){d=!1;r=!0;m||b.call(k)},y=function(F){b.call(k,F)},A=function(){var F;if(d&&!r)return k._readableState&&k._readableState.ended||(F=new e),b.call(k,F);if(m&&!g)return k._writableState&&k._writableState.ended||(F=new e),b.call(k,F)},E=function(){k.req.on("finish",l)};if(k.setHeader&&"function"===typeof k.abort)if(k.on("complete",l),k.on("abort",A),k.req)E();
else k.on("request",E);else m&&!k._writableState&&(k.on("end",a),k.on("close",a));k.on("end",v);k.on("finish",l);if(!1!==n.error)k.on("error",y);k.on("close",A);return function(){k.removeListener("complete",l);k.removeListener("abort",A);k.removeListener("request",E);k.req&&k.req.removeListener("finish",l);k.removeListener("end",a);k.removeListener("close",a);k.removeListener("finish",l);k.removeListener("end",v);k.removeListener("error",y);k.removeListener("close",A)}}if(U5)return V5;U5=!0;var e=
PD().codes.ERR_STREAM_PREMATURE_CLOSE;return V5=h}function Lja(){if(W5)return X5;W5=!0;return X5=function(){throw Error("Readable.from is not available in the browser");}}function Mja(){function f(d,m){var a=Object.keys(d);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(d);m&&(g=g.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable}));a.push.apply(a,g)}return a}function c(d){for(var m=1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?
f(Object(a),!0).forEach(function(g){var l=a[g];g in d?Object.defineProperty(d,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(a,g))})}return d}function h(d,m){for(var a=0;a<m.length;a++){var g=m[a];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(d,
g.key,g)}}function e(d,m,a){m&&h(d.prototype,m);a&&h(d,a);return d}if(Y5)return Z5;Y5=!0;var k=ij.Buffer,n=$5.inspect,b=n&&n.custom||"inspect";return Z5=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}e(d,[{key:"push",value:function(m){m={data:m,next:null};0<this.length?this.tail.next=m:this.head=m;this.tail=m;++this.length}},{key:"unshift",value:function(m){m={data:m,next:this.head};0===this.length&&(this.tail=
m);this.head=m;++this.length}},{key:"shift",value:function(){if(0!==this.length){var m=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return m}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(m){if(0===this.length)return"";for(var a=this.head,g=""+a.data;a=a.next;)g+=m+a.data;return g}},{key:"concat",value:function(m){if(0===this.length)return k.alloc(0);m=k.allocUnsafe(m>>>0);for(var a=this.head,g=0;a;)k.prototype.copy.call(a.data,
m,g),g+=a.data.length,a=a.next;return m}},{key:"consume",value:function(m,a){m<this.head.data.length?(a=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):a=m===this.head.data.length?this.shift():a?this._getString(m):this._getBuffer(m);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var a=this.head,g=1,l=a.data;for(m-=l.length;a=a.next;){var r=a.data,v=m>r.length?r.length:m;l=v===r.length?l+r:l+r.slice(0,m);m-=v;if(0===m){v===r.length?
(++g,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=r.slice(v));break}++g}this.length-=g;return l}},{key:"_getBuffer",value:function(m){var a=k.allocUnsafe(m),g=this.head,l=1;g.data.copy(a);for(m-=g.data.length;g=g.next;){var r=g.data,v=m>r.length?r.length:m;r.copy(a,a.length-m,0,v);m-=v;if(0===m){v===r.length?(++l,this.head=g.next?g.next:this.tail=null):(this.head=g,g.data=r.slice(v));break}++l}this.length-=l;return a}},{key:b,value:function(m,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);
return d}()}function a6(){function f(k,n){h(k,n);c(k)}function c(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function h(k,n){k.emit("error",n)}if(b6)return c6;b6=!0;var e=Zj;return c6={destroy:function(k,n){var b=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return n?n(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=
!0,e.nextTick(h,this,k)):e.nextTick(h,this,k)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(k||null,function(m){!n&&m?b._writableState?b._writableState.errorEmitted?e.nextTick(c,b):(b._writableState.errorEmitted=!0,e.nextTick(f,b,m)):e.nextTick(f,b,m):n?(e.nextTick(c,b),n(m)):e.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,
this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(k,n){var b=k._readableState,d=k._writableState;b&&b.autoDestroy||d&&d.autoDestroy?k.destroy(n):k.emit("error",n)}}}function d6(){if(e6)return f6;e6=!0;var f=PD().codes.ERR_INVALID_OPT_VALUE;
return f6={getHighWaterMark:function(c,h,e,k){h=null!=h.highWaterMark?h.highWaterMark:k?h[e]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new f(k?e:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function g6(){function f(U){var V=this;this.entry=this.next=null;this.finish=function(){var na=V.entry;for(V.entry=null;na;){var la=na.callback;U.pendingcb--;la(void 0);na=na.next}U.corkedRequestsFree.next=V}}function c(){}function h(U,V,na){l=l||QD();U=U||{};"boolean"!==
typeof na&&(na=V instanceof l);this.objectMode=!!U.objectMode;na&&(this.objectMode=this.objectMode||!!U.writableObjectMode);this.highWaterMark=F(this,U,"writableHighWaterMark",na);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==U.decodeStrings;this.defaultEncoding=U.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(la){var ya=V._writableState,jb=ya.sync,gb=ya.writecb;
if("function"!==typeof gb)throw new L;ya.writing=!1;ya.writecb=null;ya.length-=ya.writelen;ya.writelen=0;la?(--ya.pendingcb,jb?(g.nextTick(gb,la),g.nextTick(a,V,ya),V._writableState.errorEmitted=!0,K(V,la)):(gb(la),V._writableState.errorEmitted=!0,K(V,la),a(V,ya))):((la=d(ya)||V.destroyed)||ya.corked||ya.bufferProcessing||!ya.bufferedRequest||b(V,ya),jb?g.nextTick(n,V,ya,la,gb):n(V,ya,la,gb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=
this.prefinished=!1;this.emitClose=!1!==U.emitClose;this.autoDestroy=!!U.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new f(this)}function e(U){l=l||QD();var V=this instanceof l;if(!V&&!Z.call(e,this))return new e(U);this._writableState=new h(U,this,V);this.writable=!0;U&&("function"===typeof U.write&&(this._write=U.write),"function"===typeof U.writev&&(this._writev=U.writev),"function"===typeof U.destroy&&(this._destroy=U.destroy),"function"===typeof U.final&&(this._final=U.final));
v.call(this)}function k(U,V,na,la,ya,jb,gb){V.writelen=la;V.writecb=gb;V.writing=!0;V.sync=!0;if(V.destroyed)V.onwrite(new R("write"));else na?U._writev(ya,V.onwrite):U._write(ya,jb,V.onwrite);V.sync=!1}function n(U,V,na,la){!na&&0===V.length&&V.needDrain&&(V.needDrain=!1,U.emit("drain"));V.pendingcb--;la();a(U,V)}function b(U,V){V.bufferProcessing=!0;var na=V.bufferedRequest;if(U._writev&&na&&na.next){var la=Array(V.bufferedRequestCount),ya=V.corkedRequestsFree;ya.entry=na;for(var jb=0,gb=!0;na;)la[jb]=
na,na.isBuf||(gb=!1),na=na.next,jb+=1;la.allBuffers=gb;k(U,V,!0,V.length,la,"",ya.finish);V.pendingcb++;V.lastBufferedRequest=null;ya.next?(V.corkedRequestsFree=ya.next,ya.next=null):V.corkedRequestsFree=new f(V);V.bufferedRequestCount=0}else{for(;na&&(la=na.chunk,k(U,V,!1,V.objectMode?1:la.length,la,na.encoding,na.callback),na=na.next,V.bufferedRequestCount--,!V.writing););null===na&&(V.lastBufferedRequest=null)}V.bufferedRequest=na;V.bufferProcessing=!1}function d(U){return U.ending&&0===U.length&&
null===U.bufferedRequest&&!U.finished&&!U.writing}function m(U,V){U._final(function(na){V.pendingcb--;na&&K(U,na);V.prefinished=!0;U.emit("prefinish");a(U,V)})}function a(U,V){var na=d(V);na&&(V.prefinished||V.finalCalled||("function"!==typeof U._final||V.destroyed?(V.prefinished=!0,U.emit("prefinish")):(V.pendingcb++,V.finalCalled=!0,g.nextTick(m,U,V))),0===V.pendingcb&&(V.finished=!0,U.emit("finish"),V.autoDestroy&&(V=U._readableState,(!V||V.autoDestroy&&V.endEmitted)&&U.destroy())));return na}
if(h6)return $S;h6=!0;var g=Zj;$S=e;var l;e.WritableState=h;var r={deprecate:Nja},v=O5(),y=ij.Buffer,A=Oja.Uint8Array||function(){},E=a6(),F=d6().getHighWaterMark,G=PD().codes,I=G.ERR_INVALID_ARG_TYPE,M=G.ERR_METHOD_NOT_IMPLEMENTED,L=G.ERR_MULTIPLE_CALLBACK,S=G.ERR_STREAM_CANNOT_PIPE,R=G.ERR_STREAM_DESTROYED,aa=G.ERR_STREAM_NULL_VALUES,ra=G.ERR_STREAM_WRITE_AFTER_END,Ea=G.ERR_UNKNOWN_ENCODING,K=E.errorOrDestroy;Xl(e,v);h.prototype.getBuffer=function(){for(var U=this.bufferedRequest,V=[];U;)V.push(U),
U=U.next;return V};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(U){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var Z=Function.prototype[Symbol.hasInstance];Object.defineProperty(e,Symbol.hasInstance,{value:function(U){return Z.call(this,U)?!0:this!==e?!1:U&&U._writableState instanceof
h}})}else Z=function(U){return U instanceof this};e.prototype.pipe=function(){K(this,new S)};e.prototype.write=function(U,V,na){var la=this._writableState,ya=!1,jb;if(jb=!la.objectMode)jb=U,jb=y.isBuffer(jb)||jb instanceof A;jb&&!y.isBuffer(U)&&(U=y.from(U));"function"===typeof V&&(na=V,V=null);jb?V="buffer":V||(V=la.defaultEncoding);"function"!==typeof na&&(na=c);if(la.ending)la=na,na=new ra,K(this,na),g.nextTick(la,na);else{var gb;if(!(gb=jb)){gb=U;var ka=na,ia;null===gb?ia=new aa:"string"===typeof gb||
la.objectMode||(ia=new I("chunk",["string","Buffer"],gb));ia?(K(this,ia),g.nextTick(ka,ia),gb=!1):gb=!0}gb&&(la.pendingcb++,ya=jb,ya||(ia=U,la.objectMode||!1===la.decodeStrings||"string"!==typeof ia||(ia=y.from(ia,V)),U!==ia&&(ya=!0,V="buffer",U=ia)),jb=la.objectMode?1:U.length,la.length+=jb,ia=la.length<la.highWaterMark,ia||(la.needDrain=!0),la.writing||la.corked?(jb=la.lastBufferedRequest,la.lastBufferedRequest={chunk:U,encoding:V,isBuf:ya,callback:na,next:null},jb?jb.next=la.lastBufferedRequest:
la.bufferedRequest=la.lastBufferedRequest,la.bufferedRequestCount+=1):k(this,la,!1,jb,U,V,na),ya=ia)}return ya};e.prototype.cork=function(){this._writableState.corked++};e.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,U.writing||U.corked||U.bufferProcessing||!U.bufferedRequest||b(this,U))};e.prototype.setDefaultEncoding=function(U){"string"===typeof U&&(U=U.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((U+
"").toLowerCase())))throw new Ea(U);this._writableState.defaultEncoding=U;return this};Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});e.prototype._write=function(U,V,na){na(new M("_write()"))};e.prototype._writev=null;e.prototype.end=function(U,V,na){var la=this._writableState;
"function"===typeof U?(na=U,V=U=null):"function"===typeof V&&(na=V,V=null);null!==U&&void 0!==U&&this.write(U,V);la.corked&&(la.corked=1,this.uncork());if(!la.ending){U=na;la.ending=!0;a(this,la);if(U)if(la.finished)g.nextTick(U);else this.once("finish",U);la.ended=!0;this.writable=!1}return this};Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===
this._writableState?!1:this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}});e.prototype.destroy=E.destroy;e.prototype._undestroy=E.undestroy;e.prototype._destroy=function(U,V){V(U)};return $S}function QD(){function f(a){if(!(this instanceof f))return new f(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",
c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(a){a.end()}if(i6)return aT;i6=!0;var e=Zj,k=Object.keys||function(a){var g=[],l;for(l in a)g.push(l);return g};aT=f;var n=j6(),b=g6();Xl(f,n);k=k(b.prototype);for(var d=0;d<k.length;d++){var m=k[d];f.prototype[m]||(f.prototype[m]=b.prototype[m])}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(f.prototype,"writableBuffer",
{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=
a,this._writableState.destroyed=a)}});return aT}function Pja(){function f(F,G,I){G in F?Object.defineProperty(F,G,{value:I,enumerable:!0,configurable:!0,writable:!0}):F[G]=I;return F}function c(F,G){return{value:F,done:G}}function h(F){var G=F[m];if(null!==G){var I=F[y].read();null!==I&&(F[r]=null,F[m]=null,F[a]=null,G(c(I,!1)))}}function e(F){n.nextTick(h,F)}function k(F,G){return function(I,M){F.then(function(){if(G[l])I(c(void 0,!0));else G[v](I,M)},M)}}if(k6)return l6;k6=!0;var n=Zj,b,d=ZS(),
m=Symbol("lastResolve"),a=Symbol("lastReject"),g=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),y=Symbol("stream"),A=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((b={get stream(){return this[y]},next:function(){var F=this,G=this[g];if(null!==G)return Promise.reject(G);if(this[l])return Promise.resolve(c(void 0,!0));if(this[y].destroyed)return new Promise(function(I,M){n.nextTick(function(){F[g]?M(F[g]):I(c(void 0,!0))})});if(G=this[r])G=new Promise(k(G,
this));else{G=this[y].read();if(null!==G)return Promise.resolve(c(G,!1));G=new Promise(this[v])}return this[r]=G}},f(b,Symbol.asyncIterator,function(){return this}),f(b,"return",function(){var F=this;return new Promise(function(G,I){F[y].destroy(null,function(M){M?I(M):G(c(void 0,!0))})})}),b),A);return l6=function(F){var G,I=Object.create(E,(G={},f(G,y,{value:F,writable:!0}),f(G,m,{value:null,writable:!0}),f(G,a,{value:null,writable:!0}),f(G,g,{value:null,writable:!0}),f(G,l,{value:F._readableState.endEmitted,
writable:!0}),f(G,v,{value:function(M,L){var S=I[y].read();S?(I[r]=null,I[m]=null,I[a]=null,M(c(S,!1))):(I[m]=M,I[a]=L)},writable:!0}),G));I[r]=null;d(F,function(M){if(M&&"ERR_STREAM_PREMATURE_CLOSE"!==M.code){var L=I[a];null!==L&&(I[r]=null,I[m]=null,I[a]=null,L(M));I[g]=M}else M=I[m],null!==M&&(I[r]=null,I[m]=null,I[a]=null,M(c(void 0,!0))),I[l]=!0});F.on("readable",e.bind(null,I));return I}}function j6(){function f(qa,La,Lb){if("function"===typeof qa.prependListener)return qa.prependListener(La,
Lb);if(qa._events&&qa._events[La])Array.isArray(qa._events[La])?qa._events[La].unshift(Lb):qa._events[La]=[Lb,qa._events[La]];else qa.on(La,Lb)}function c(qa,La,Lb){M=M||QD();qa=qa||{};"boolean"!==typeof Lb&&(Lb=La instanceof M);this.objectMode=!!qa.objectMode;Lb&&(this.objectMode=this.objectMode||!!qa.readableObjectMode);this.highWaterMark=K(this,qa,"readableHighWaterMark",Lb);this.buffer=new Ea;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=
!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==qa.emitClose;this.autoDestroy=!!qa.autoDestroy;this.destroyed=!1;this.defaultEncoding=qa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;qa.encoding&&(ya||(ya=bT.StringDecoder),this.decoder=new ya(qa.encoding),this.encoding=qa.encoding)}function h(qa){M=M||QD();if(!(this instanceof h))return new h(qa);this._readableState=
new c(qa,this,this instanceof M);this.readable=!0;qa&&("function"===typeof qa.read&&(this._read=qa.read),"function"===typeof qa.destroy&&(this._destroy=qa.destroy));L.call(this)}function e(qa,La,Lb,qc,dc){ra("readableAddChunk",La);var oc=qa._readableState;if(null===La)oc.reading=!1,ra("onEofChunk"),oc.ended||(oc.decoder&&(La=oc.decoder.end())&&La.length&&(oc.buffer.push(La),oc.length+=oc.objectMode?1:La.length),oc.ended=!0,oc.sync?b(qa):(oc.needReadable=!1,oc.emittedReadable||(oc.emittedReadable=
!0,d(qa))));else{if(!dc){dc=La;var $c;S.isBuffer(dc)||dc instanceof R||"string"===typeof dc||void 0===dc||oc.objectMode||($c=new U("chunk",["string","Buffer","Uint8Array"],dc));var Vb=$c}if(Vb)ka(qa,Vb);else if(oc.objectMode||La&&0<La.length)if("string"===typeof La||oc.objectMode||Object.getPrototypeOf(La)===S.prototype||(La=S.from(La)),qc)oc.endEmitted?ka(qa,new la):k(qa,oc,La,!0);else if(oc.ended)ka(qa,new V);else{if(oc.destroyed)return!1;oc.reading=!1;oc.decoder&&!Lb?(La=oc.decoder.write(La),oc.objectMode||
0!==La.length?k(qa,oc,La,!1):m(qa,oc)):k(qa,oc,La,!1)}else qc||(oc.reading=!1,m(qa,oc))}return!oc.ended&&(oc.length<oc.highWaterMark||0===oc.length)}function k(qa,La,Lb,qc){La.flowing&&0===La.length&&!La.sync?(La.awaitDrain=0,qa.emit("data",Lb)):(La.length+=La.objectMode?1:Lb.length,qc?La.buffer.unshift(Lb):La.buffer.push(Lb),La.needReadable&&b(qa));m(qa,La)}function n(qa,La){if(0>=qa||0===La.length&&La.ended)return 0;if(La.objectMode)return 1;if(qa!==qa)return La.flowing&&La.length?La.buffer.head.data.length:
La.length;if(qa>La.highWaterMark){var Lb=qa;1073741824<=Lb?Lb=1073741824:(Lb--,Lb|=Lb>>>1,Lb|=Lb>>>2,Lb|=Lb>>>4,Lb|=Lb>>>8,Lb|=Lb>>>16,Lb++);La.highWaterMark=Lb}return qa<=La.length?qa:La.ended?La.length:(La.needReadable=!0,0)}function b(qa){var La=qa._readableState;ra("emitReadable",La.needReadable,La.emittedReadable);La.needReadable=!1;La.emittedReadable||(ra("emitReadable",La.flowing),La.emittedReadable=!0,I.nextTick(d,qa))}function d(qa){var La=qa._readableState;ra("emitReadable_",La.destroyed,
La.length,La.ended);La.destroyed||!La.length&&!La.ended||(qa.emit("readable"),La.emittedReadable=!1);La.needReadable=!La.flowing&&!La.ended&&La.length<=La.highWaterMark;y(qa)}function m(qa,La){La.readingMore||(La.readingMore=!0,I.nextTick(a,qa,La))}function a(qa,La){for(;!La.reading&&!La.ended&&(La.length<La.highWaterMark||La.flowing&&0===La.length);){var Lb=La.length;ra("maybeReadMore read 0");qa.read(0);if(Lb===La.length)break}La.readingMore=!1}function g(qa){return function(){var La=qa._readableState;
ra("pipeOnDrain",La.awaitDrain);La.awaitDrain&&La.awaitDrain--;0===La.awaitDrain&&qa.listeners("data").length&&(La.flowing=!0,y(qa))}}function l(qa){var La=qa._readableState;La.readableListening=0<qa.listenerCount("readable");La.resumeScheduled&&!La.paused?La.flowing=!0:0<qa.listenerCount("data")&&qa.resume()}function r(qa){ra("readable nexttick read 0");qa.read(0)}function v(qa,La){ra("resume",La.reading);La.reading||qa.read(0);La.resumeScheduled=!1;qa.emit("resume");y(qa);La.flowing&&!La.reading&&
qa.read(0)}function y(qa){var La=qa._readableState;for(ra("flow",La.flowing);La.flowing&&null!==qa.read(););}function A(qa,La){if(0===La.length)return null;La.objectMode?qa=La.buffer.shift():!qa||qa>=La.length?(qa=La.decoder?La.buffer.join(""):1===La.buffer.length?La.buffer.first():La.buffer.concat(La.length),La.buffer.clear()):qa=La.buffer.consume(qa,La.decoder);return qa}function E(qa){var La=qa._readableState;ra("endReadable",La.endEmitted);La.endEmitted||(La.ended=!0,I.nextTick(F,La,qa))}function F(qa,
La){ra("endReadableNT",qa.endEmitted,qa.length);qa.endEmitted||0!==qa.length||(qa.endEmitted=!0,La.readable=!1,La.emit("end"),qa.autoDestroy&&(qa=La._writableState,(!qa||qa.autoDestroy&&qa.finished)&&La.destroy()))}function G(qa,La){for(var Lb=0,qc=qa.length;Lb<qc;Lb++)if(qa[Lb]===La)return Lb;return-1}if(m6)return cT;m6=!0;var I=Zj;cT=h;var M;h.ReadableState=c;var L=O5(),S=ij.Buffer,R=Qja.Uint8Array||function(){},aa=$5;var ra=aa&&aa.debuglog?aa.debuglog("stream"):function(){};var Ea=Mja();aa=a6();
var K=d6().getHighWaterMark,Z=PD().codes,U=Z.ERR_INVALID_ARG_TYPE,V=Z.ERR_STREAM_PUSH_AFTER_EOF,na=Z.ERR_METHOD_NOT_IMPLEMENTED,la=Z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ya,jb,gb;Xl(h,L);var ka=aa.errorOrDestroy,ia=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(qa){this._readableState&&(this._readableState.destroyed=qa)}});h.prototype.destroy=aa.destroy;
h.prototype._undestroy=aa.undestroy;h.prototype._destroy=function(qa,La){La(qa)};h.prototype.push=function(qa,La){var Lb=this._readableState;if(Lb.objectMode)var qc=!0;else"string"===typeof qa&&(La=La||Lb.defaultEncoding,La!==Lb.encoding&&(qa=S.from(qa,La),La=""),qc=!0);return e(this,qa,La,!1,qc)};h.prototype.unshift=function(qa){return e(this,qa,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(qa){ya||(ya=bT.StringDecoder);qa=new ya(qa);
this._readableState.decoder=qa;this._readableState.encoding=this._readableState.decoder.encoding;for(var La=this._readableState.buffer.head,Lb="";null!==La;)Lb+=qa.write(La.data),La=La.next;this._readableState.buffer.clear();""!==Lb&&this._readableState.buffer.push(Lb);this._readableState.length=Lb.length;return this};h.prototype.read=function(qa){ra("read",qa);qa=parseInt(qa,10);var La=this._readableState,Lb=qa;0!==qa&&(La.emittedReadable=!1);if(0===qa&&La.needReadable&&((0!==La.highWaterMark?La.length>=
La.highWaterMark:0<La.length)||La.ended))return ra("read: emitReadable",La.length,La.ended),0===La.length&&La.ended?E(this):b(this),null;qa=n(qa,La);if(0===qa&&La.ended)return 0===La.length&&E(this),null;var qc=La.needReadable;ra("need readable",qc);if(0===La.length||La.length-qa<La.highWaterMark)qc=!0,ra("length less than watermark",qc);La.ended||La.reading?ra("reading or ended",!1):qc&&(ra("do read"),La.reading=!0,La.sync=!0,0===La.length&&(La.needReadable=!0),this._read(La.highWaterMark),La.sync=
!1,La.reading||(qa=n(Lb,La)));qc=0<qa?A(qa,La):null;null===qc?(La.needReadable=La.length<=La.highWaterMark,qa=0):(La.length-=qa,La.awaitDrain=0);0===La.length&&(La.ended||(La.needReadable=!0),Lb!==qa&&La.ended&&E(this));null!==qc&&this.emit("data",qc);return qc};h.prototype._read=function(qa){ka(this,new na("_read()"))};h.prototype.pipe=function(qa,La){function Lb(yb,gc){ra("onunpipe");yb===be&&gc&&!1===gc.hasUnpiped&&(gc.hasUnpiped=!0,ra("cleanup"),qa.removeListener("close",$c),qa.removeListener("finish",
Vb),qa.removeListener("drain",Ca),qa.removeListener("error",oc),qa.removeListener("unpipe",Lb),be.removeListener("end",qc),be.removeListener("end",Hd),be.removeListener("data",dc),Na=!0,!ha.awaitDrain||qa._writableState&&!qa._writableState.needDrain||Ca())}function qc(){ra("onend");qa.end()}function dc(yb){ra("ondata");yb=qa.write(yb);ra("dest.write",yb);!1===yb&&((1===ha.pipesCount&&ha.pipes===qa||1<ha.pipesCount&&-1!==G(ha.pipes,qa))&&!Na&&(ra("false write response, pause",ha.awaitDrain),ha.awaitDrain++),
be.pause())}function oc(yb){ra("onerror",yb);Hd();qa.removeListener("error",oc);0===qa.listeners("error").length&&ka(qa,yb)}function $c(){qa.removeListener("finish",Vb);Hd()}function Vb(){ra("onfinish");qa.removeListener("close",$c);Hd()}function Hd(){ra("unpipe");be.unpipe(qa)}var be=this,ha=this._readableState;switch(ha.pipesCount){case 0:ha.pipes=qa;break;case 1:ha.pipes=[ha.pipes,qa];break;default:ha.pipes.push(qa)}ha.pipesCount+=1;ra("pipe count=%d opts=%j",ha.pipesCount,La);La=La&&!1===La.end||
qa===I.stdout||qa===I.stderr?Hd:qc;if(ha.endEmitted)I.nextTick(La);else be.once("end",La);qa.on("unpipe",Lb);var Ca=g(be);qa.on("drain",Ca);var Na=!1;be.on("data",dc);f(qa,"error",oc);qa.once("close",$c);qa.once("finish",Vb);qa.emit("pipe",be);ha.flowing||(ra("pipe resume"),be.resume());return qa};h.prototype.unpipe=function(qa){var La=this._readableState,Lb={hasUnpiped:!1};if(0===La.pipesCount)return this;if(1===La.pipesCount){if(qa&&qa!==La.pipes)return this;qa||(qa=La.pipes);La.pipes=null;La.pipesCount=
0;La.flowing=!1;qa&&qa.emit("unpipe",this,Lb);return this}if(!qa){qa=La.pipes;Lb=La.pipesCount;La.pipes=null;La.pipesCount=0;La.flowing=!1;for(La=0;La<Lb;La++)qa[La].emit("unpipe",this,{hasUnpiped:!1});return this}var qc=G(La.pipes,qa);if(-1===qc)return this;La.pipes.splice(qc,1);--La.pipesCount;1===La.pipesCount&&(La.pipes=La.pipes[0]);qa.emit("unpipe",this,Lb);return this};h.prototype.on=function(qa,La){La=L.prototype.on.call(this,qa,La);var Lb=this._readableState;"data"===qa?(Lb.readableListening=
0<this.listenerCount("readable"),!1!==Lb.flowing&&this.resume()):"readable"!==qa||Lb.endEmitted||Lb.readableListening||(Lb.readableListening=Lb.needReadable=!0,Lb.flowing=!1,Lb.emittedReadable=!1,ra("on readable",Lb.length,Lb.reading),Lb.length?b(this):Lb.reading||I.nextTick(r,this));return La};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(qa,La){La=L.prototype.removeListener.call(this,qa,La);"readable"===qa&&I.nextTick(l,this);return La};h.prototype.removeAllListeners=
function(qa){var La=L.prototype.removeAllListeners.apply(this,arguments);"readable"!==qa&&void 0!==qa||I.nextTick(l,this);return La};h.prototype.resume=function(){var qa=this._readableState;qa.flowing||(ra("resume"),qa.flowing=!qa.readableListening,qa.resumeScheduled||(qa.resumeScheduled=!0,I.nextTick(v,this,qa)));qa.paused=!1;return this};h.prototype.pause=function(){ra("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(ra("pause"),this._readableState.flowing=
!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(qa){var La=this,Lb=this._readableState,qc=!1;qa.on("end",function(){ra("wrapped end");if(Lb.decoder&&!Lb.ended){var oc=Lb.decoder.end();oc&&oc.length&&La.push(oc)}La.push(null)});qa.on("data",function(oc){ra("wrapped data");Lb.decoder&&(oc=Lb.decoder.write(oc));Lb.objectMode&&(null===oc||void 0===oc)||!(Lb.objectMode||oc&&oc.length)||La.push(oc)||(qc=!0,qa.pause())});for(var dc in qa)void 0===this[dc]&&"function"===
typeof qa[dc]&&(this[dc]=function(oc){return function(){return qa[oc].apply(qa,arguments)}}(dc));for(dc=0;dc<ia.length;dc++)qa.on(ia[dc],this.emit.bind(this,ia[dc]));this._read=function(oc){ra("wrapped _read",oc);qc&&(qc=!1,qa.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===jb&&(jb=Pja());return jb(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,
"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(qa){this._readableState&&(this._readableState.flowing=qa)}});h._fromList=A;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(qa,La){void 0===gb&&(gb=Lja());
return gb(h,qa,La)});return cT}function n6(){function f(g,l){var r=this._transformState;r.transforming=!1;var v=r.writecb;if(null===v)return this.emit("error",new b);r.writechunk=null;r.writecb=null;null!=l&&this.push(l);v(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(g){if(!(this instanceof c))return new c(g);a.call(this,g);this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,
writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"===typeof g.transform&&(this._transform=g.transform),"function"===typeof g.flush&&(this._flush=g.flush));this.on("prefinish",h)}function h(){var g=this;"function"!==typeof this._flush||this._readableState.destroyed?e(this,null,null):this._flush(function(l,r){e(g,l,r)})}function e(g,l,r){if(l)return g.emit("error",l);null!=r&&g.push(r);if(g._writableState.length)throw new m;if(g._transformState.transforming)throw new d;
return g.push(null)}if(o6)return dT;o6=!0;dT=c;var k=PD().codes,n=k.ERR_METHOD_NOT_IMPLEMENTED,b=k.ERR_MULTIPLE_CALLBACK,d=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=k.ERR_TRANSFORM_WITH_LENGTH_0,a=QD();Xl(c,a);c.prototype.push=function(g,l){this._transformState.needTransform=!1;return a.prototype.push.call(this,g,l)};c.prototype._transform=function(g,l,r){r(new n("_transform()"))};c.prototype._write=function(g,l,r){var v=this._transformState;v.writecb=r;v.writechunk=g;v.writeencoding=l;v.transforming||
(g=this._readableState,(v.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark))};c.prototype._read=function(g){g=this._transformState;null===g.writechunk||g.transforming?g.needTransform=!0:(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform))};c.prototype._destroy=function(g,l){a.prototype._destroy.call(this,g,function(r){l(r)})};return dT}function RD(f,c){if(!((this||jt)instanceof RD))return new RD(f,c);c=c||{};p6.call(this||jt,Rja(c,
{objectMode:!0}));(this||jt)._iterator=f;(this||jt)._options=c;this.on("end",(this||jt).destroy.bind(this||jt,null,null))}function q6(f,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);Sja(this||Pm,{type:f,name:f,cause:"string"!=typeof c?c:h,message:c},"ewr")}function eT(f,c){Error.call(this||Pm);Error.captureStackTrace&&Error.captureStackTrace(this||Pm,(this||Pm).constructor);q6.call(this||Pm,"CustomError",f,c)}function Tja(f,c,h){var e=function(k,n){q6.call(this||Pm,c,k,n);"FilesystemError"==c&&
((this||Pm).code=(this||Pm).cause.code,(this||Pm).path=(this||Pm).cause.path,(this||Pm).errno=(this||Pm).cause.errno,(this||Pm).message=(f.errno[(this||Pm).cause.errno]?f.errno[(this||Pm).cause.errno].description:(this||Pm).cause.message)+((this||Pm).cause.path?" ["+(this||Pm).cause.path+"]":""));Error.call(this||Pm);Error.captureStackTrace&&Error.captureStackTrace(this||Pm,e)};e.prototype=h?new h:new eT;return e}function LG(f){(this||Qm).db=(this||Qm)._levelup=f;(this||Qm).batch=f.db.batch();(this||
Qm).ops=[];(this||Qm).length=0}function r6(f,c){if(null==f)throw new TypeError("Cannot convert first argument to object");for(var h=Object(f),e=1;e<arguments.length;e++){var k=arguments[e];if(null!=k)for(var n=Object.keys(Object(k)),b=0,d=n.length;b<d;b++){var m=n[b],a=Object.getOwnPropertyDescriptor(k,m);void 0!==a&&a.enumerable&&(h[m]=k[m])}}return h}function s6(){function f(m){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(m)}function c(m){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(m)}function h(m,a){return(h=Object.setPrototypeOf||function(g,l){return g.__proto__=l,g})(m,a)}function e(m,a,g){g||(g=Error);g=function(l){function r(v,y,A){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");!0;v=c(r).call(this,"string"==typeof a?a:
a(v,y,A));if(!v||"object"!==f(v)&&"function"!=typeof v){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=this}return v.code=m,v}return!function(v,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,writable:!0,configurable:!0}});y&&h(v,y)}(r,l),r}(g);d[m]=g}function k(m,a){if(Array.isArray(m)){var g=m.length;return m=m.map(function(l){return String(l)}),
2<g?"one of ".concat(a," ").concat(m.slice(0,g-1).join(", "),", or ")+m[g-1]:2===g?"one of ".concat(a," ").concat(m[0]," or ").concat(m[1]):"of ".concat(a," ").concat(m[0])}return"of ".concat(a," ").concat(String(m))}if(t6)return fT;t6=!0;var n,b,d={};return e("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),e("ERR_INVALID_ARG_TYPE",function(m,a,g){var l;if(void 0===n&&(n=gT()),n("string"==typeof m,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(l="must not be",
a=a.replace(/^not /,"")):l="must be",function(v,y,A){return(void 0===A||A>v.length)&&(A=v.length),v.substring(A-y.length,A)===y}(m," argument"))m="The ".concat(m," ").concat(l," ").concat(k(a,"type"));else{var r=function(v,y,A){return"number"!=typeof A&&(A=0),!(A+y.length>v.length)&&-1!==v.indexOf(y,A)}(m,".")?"property":"argument";m='The "'.concat(m,'" ').concat(r," ").concat(l," ").concat(k(a,"type"))}return m+=". Received type ".concat(f(g))},TypeError),e("ERR_INVALID_ARG_VALUE",function(m,a){var g=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=ni);var l=b.inspect(a);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(m,"' ").concat(g,". Received ").concat(l)},TypeError),e("ERR_INVALID_RETURN_VALUE",function(m,a,g){var l;return l=g&&g.constructor&&g.constructor.name?"instance of ".concat(g.constructor.name):"type ".concat(f(g)),"Expected ".concat(m,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},
TypeError),e("ERR_MISSING_ARGS",function(){for(var m=arguments.length,a=Array(m),g=0;g<m;g++)a[g]=arguments[g];void 0===n&&(n=gT());n(0<a.length,"At least one arg needs to be specified");m="The ";g=a.length;switch(a=a.map(function(l){return'"'.concat(l,'"')}),g){case 1:m+="".concat(a[0]," argument");break;case 2:m+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:m+=a.slice(0,g-1).join(", "),m+=", and ".concat(a[g-1]," arguments")}return"".concat(m," must be specified")},TypeError),
fT.codes=d,fT}function Uja(){function f(L,S){for(var R=0;R<S.length;R++){var aa=S[R];aa.enumerable=aa.enumerable||!1;aa.configurable=!0;"value"in aa&&(aa.writable=!0);Object.defineProperty(L,aa.key,aa)}}function c(L,S){return!S||"object"!==m(S)&&"function"!=typeof S?h(L):S}function h(L){if(void 0===L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function e(L){var S="function"==typeof Map?new Map:void 0;return(e=function(R){function aa(){return n(R,
arguments,d(this).constructor)}if(null===R||(ra=R,-1===Function.toString.call(ra).indexOf("[native code]")))return R;var ra;if("function"!=typeof R)throw new TypeError("Super expression must either be null or a function");if(void 0!==S){if(S.has(R))return S.get(R);S.set(R,aa)}return aa.prototype=Object.create(R.prototype,{constructor:{value:aa,enumerable:!1,writable:!0,configurable:!0}}),b(aa,R)})(L)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(L){return!1}}function n(L,S,R){return(n=k()?Reflect.construct:function(aa,ra,Ea){var K=[null];K.push.apply(K,ra);aa=new (Function.bind.apply(aa,K));return Ea&&b(aa,Ea.prototype),aa}).apply(null,arguments)}function b(L,S){return(b=Object.setPrototypeOf||function(R,aa){return R.__proto__=aa,R})(L,S)}function d(L){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||
Object.getPrototypeOf(S)})(L)}function m(L){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(L)}function a(L,S,R){return(void 0===R||R>L.length)&&(R=L.length),L.substring(R-S.length,R)===S}function g(L){var S=Object.keys(L),R=Object.create(Object.getPrototypeOf(L));return S.forEach(function(aa){R[aa]=L[aa]}),Object.defineProperty(R,"message",
{value:L.message}),R}function l(L){return y(L,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function r(L,S,R){var aa="",ra="",Ea=0,K="",Z=!1,U=l(L),V=U.split("\n"),na=l(S).split("\n"),la=0,ya="";if("strictEqual"===R&&"object"===m(L)&&"object"===m(S)&&null!==L&&null!==S&&(R="strictEqualObject"),1===V.length&&1===na.length&&V[0]!==na[0]){var jb=V[0].length+na[0].length;if(10>=jb){if(!("object"===m(L)&&null!==L||"object"===
m(S)&&null!==S||0===L&&0===S))return"".concat(M[R],"\n\n")+"".concat(V[0]," !== ").concat(na[0],"\n")}else if("strictEqualObject"!==R&&jb<(v.stderr&&v.stderr.isTTY?v.stderr.columns:80)){for(;V[0][la]===na[0][la];)la++;2<la&&(ya="\n  ".concat(function(qa,La){if(La=Math.floor(La),0==qa.length||0==La)return"";var Lb=qa.length*La;for(La=Math.floor(Math.log(La)/Math.log(2));La;)qa+=qa,La--;return qa+qa.substring(0,Lb-qa.length)}(" ",la),"^"),la=0)}}L=V[V.length-1];for(S=na[na.length-1];L===S&&(2>la++?
K="\n  ".concat(L).concat(K):aa=L,V.pop(),na.pop(),0!==V.length&&0!==na.length);)L=V[V.length-1],S=na[na.length-1];L=Math.max(V.length,na.length);if(0===L){aa=U.split("\n");if(30<aa.length)for(aa[26]="".concat(E,"...").concat(I);27<aa.length;)aa.pop();return"".concat(M.notIdentical,"\n\n").concat(aa.join("\n"),"\n")}3<la&&(K="\n".concat(E,"...").concat(I).concat(K),Z=!0);""!==aa&&(K="\n  ".concat(aa).concat(K),aa="");U=0;R=M[R]+"\n".concat(F,"+ actual").concat(I," ").concat(G,"- expected").concat(I);
S=" ".concat(E,"...").concat(I," Lines skipped");for(la=0;la<L;la++){jb=la-Ea;if(V.length<la+1)1<jb&&2<la&&(4<jb?(ra+="\n".concat(E,"...").concat(I),Z=!0):3<jb&&(ra+="\n  ".concat(na[la-2]),U++),ra+="\n  ".concat(na[la-1]),U++),Ea=la,aa+="\n".concat(G,"-").concat(I," ").concat(na[la]),U++;else if(na.length<la+1)1<jb&&2<la&&(4<jb?(ra+="\n".concat(E,"...").concat(I),Z=!0):3<jb&&(ra+="\n  ".concat(V[la-2]),U++),ra+="\n  ".concat(V[la-1]),U++),Ea=la,ra+="\n".concat(F,"+").concat(I," ").concat(V[la]),
U++;else{var gb=na[la],ka=V[la],ia=ka!==gb&&(!a(ka,",")||ka.slice(0,-1)!==gb);ia&&a(gb,",")&&gb.slice(0,-1)===ka&&(ia=!1,ka+=",");ia?(1<jb&&2<la&&(4<jb?(ra+="\n".concat(E,"...").concat(I),Z=!0):3<jb&&(ra+="\n  ".concat(V[la-2]),U++),ra+="\n  ".concat(V[la-1]),U++),Ea=la,ra+="\n".concat(F,"+").concat(I," ").concat(ka),aa+="\n".concat(G,"-").concat(I," ").concat(gb),U+=2):(ra+=aa,aa="",1!==jb&&0!==la||(ra+="\n  ".concat(ka),U++))}if(20<U&&la<L-2)return"".concat(R).concat(S,"\n").concat(ra,"\n").concat(E,
"...").concat(I).concat(aa,"\n")+"".concat(E,"...").concat(I)}return"".concat(R).concat(Z?S:"","\n").concat(ra).concat(aa).concat(K).concat(ya)}if(u6)return v6;u6=!0;var v=Zj,y=ni.inspect,A=s6().codes.ERR_INVALID_ARG_TYPE,E="",F="",G="",I="",M={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",
notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return v6=function(L){function S(aa){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");
if(!0,"object"!==m(aa)||null===aa)throw new A("options","Object",aa);var ra=aa.message,Ea=aa.operator,K=aa.stackStartFn,Z=aa.actual;aa=aa.expected;var U=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=ra)var V=c(this,d(S).call(this,String(ra)));else if(v.stderr&&v.stderr.isTTY&&(v.stderr&&v.stderr.getColorDepth&&1!==v.stderr.getColorDepth()?(E="\u001b[34m",F="\u001b[32m",I="\u001b[39m",G="\u001b[31m"):(E="",F="",I="",G="")),"object"===m(Z)&&null!==Z&&"object"===m(aa)&&null!==aa&&"stack"in Z&&
Z instanceof Error&&"stack"in aa&&aa instanceof Error&&(Z=g(Z),aa=g(aa)),"deepStrictEqual"===Ea||"strictEqual"===Ea)V=c(this,d(S).call(this,r(Z,aa,Ea)));else if("notDeepStrictEqual"===Ea||"notStrictEqual"===Ea){V=M[Ea];var na=l(Z).split("\n");if("notStrictEqual"===Ea&&"object"===m(Z)&&null!==Z&&(V=M.notStrictEqualObject),30<na.length)for(na[26]="".concat(E,"...").concat(I);27<na.length;)na.pop();V=1===na.length?c(this,d(S).call(this,"".concat(V," ").concat(na[0]))):c(this,d(S).call(this,"".concat(V,
"\n\n").concat(na.join("\n"),"\n")))}else{V=l(Z);na="";var la=M[Ea];"notDeepEqual"===Ea||"notEqual"===Ea?1024<(V="".concat(M[Ea],"\n\n").concat(V)).length&&(V="".concat(V.slice(0,1021),"...")):(na="".concat(l(aa)),512<V.length&&(V="".concat(V.slice(0,509),"...")),512<na.length&&(na="".concat(na.slice(0,509),"...")),"deepEqual"===Ea||"equal"===Ea?V="".concat(la,"\n\n").concat(V,"\n\nshould equal\n\n"):na=" ".concat(Ea," ").concat(na));V=c(this,d(S).call(this,"".concat(V).concat(na)))}return Error.stackTraceLimit=
U,V.generatedMessage=!ra,Object.defineProperty(h(V),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),V.code="ERR_ASSERTION",V.actual=Z,V.expected=aa,V.operator=Ea,Error.captureStackTrace&&Error.captureStackTrace(h(V),K),V.stack,V.name="AssertionError",c(V)}var R;return!function(aa,ra){if("function"!=typeof ra&&null!==ra)throw new TypeError("Super expression must either be null or a function");aa.prototype=Object.create(ra&&ra.prototype,{constructor:{value:aa,
writable:!0,configurable:!0}});ra&&b(aa,ra)}(S,L),R=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:y.custom,value:function(aa,ra){return y(this,function(Ea){for(var K=1;K<arguments.length;K++){var Z=null!=arguments[K]?arguments[K]:{},U=Object.keys(Z);"function"==typeof Object.getOwnPropertySymbols&&(U=U.concat(Object.getOwnPropertySymbols(Z).filter(function(V){return Object.getOwnPropertyDescriptor(Z,V).enumerable})));U.forEach(function(V){var na=
Z[V];V in Ea?Object.defineProperty(Ea,V,{value:na,enumerable:!0,configurable:!0,writable:!0}):Ea[V]=na})}return Ea}({},ra,{customInspect:!1,depth:0}))}}],f(S.prototype,R),S}(e(Error))}function w6(f,c){if(!(f=function(h){if(Array.isArray(h))return h}(f)||function(h,e){var k=[],n=!0,b=!1,d=void 0;try{for(var m,a=h[Symbol.iterator]();!(n=(m=a.next()).done)&&(k.push(m.value),!e||k.length!==e);n=!0);}catch(g){b=!0,d=g}finally{try{n||null==a.return||a.return()}finally{if(b)throw d;}}return k}(f,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");
return f}function kt(f){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function hT(f){return f.call.bind(f)}function Vja(f){if(0===f.length||10<f.length)return!0;for(var c=0;c<f.length;c++){var h=f.charCodeAt(c);if(48>h||57<h)return!0}return 10===f.length&&f>=Math.pow(2,32)}function EL(f){return Object.keys(f).filter(Vja).concat(FL(f).filter(Object.prototype.propertyIsEnumerable.bind(f)))}
function x6(f,c){if(f===c)return 0;for(var h=f.length,e=c.length,k=0,n=Math.min(h,e);k<n;++k)if(f[k]!==c[k]){h=f[k];e=c[k];break}return h<e?-1:e<h?1:0}function Vr(f,c,h,e){if(f===c)return 0!==f||!h||y6(f,c);if(h){if("object"!==kt(f))return"number"==typeof f&&iT(f)&&iT(c);if("object"!==kt(c)||null===f||null===c||Object.getPrototypeOf(f)!==Object.getPrototypeOf(c))return!1}else{if(null===f||"object"!==kt(f))return(null===c||"object"!==kt(c))&&f==c;if(null===c||"object"!==kt(c))return!1}var k=z6(f);
if(k!==z6(c))return!1;if(Array.isArray(f)){if(f.length!==c.length)return!1;k=EL(f);var n=EL(c);return k.length===n.length&&MG(f,c,h,e,1,k)}if("[object Object]"===k&&(!GL(f)&&GL(c)||!HL(f)&&HL(c)))return!1;if(A6(f)){if(!A6(c)||Date.prototype.getTime.call(f)!==Date.prototype.getTime.call(c))return!1}else if(B6(f)){if(!B6(c)||(Wja?f.source!==c.source||f.flags!==c.flags:RegExp.prototype.toString.call(f)!==RegExp.prototype.toString.call(c)))return!1}else if(Xja(f)||f instanceof Error){if(f.message!==c.message||
f.name!==c.name)return!1}else{if(Yja(f)){if(h||!Zja(f)&&!$ja(f)){if(!function(b,d){return b.byteLength===d.byteLength&&0===x6(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(f,c))return!1}else if(!function(b,d){if(b.byteLength!==d.byteLength)return!1;for(var m=0;m<b.byteLength;m++)if(b[m]!==d[m])return!1;return!0}(f,c))return!1;k=EL(f);n=EL(c);return k.length===n.length&&MG(f,c,h,e,0,k)}if(HL(f))return!(!HL(c)||f.size!==c.size)&&MG(f,c,h,e,2);
if(GL(f))return!(!GL(c)||f.size!==c.size)&&MG(f,c,h,e,3);if(aka(f)){if(f.byteLength!==c.byteLength||0!==x6(new Uint8Array(f),new Uint8Array(c)))return!1}else if(bka(f)&&!function(b,d){return C6(b)?C6(d)&&y6(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(d)):D6(b)?D6(d)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(d):E6(b)?E6(d)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(d):F6(b)?F6(d)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(d):
cka(d)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(d)}(f,c))return!1}return MG(f,c,h,e,0)}function G6(f,c){return c.filter(function(h){return IL(f,h)})}function MG(f,c,h,e,k,n){if(5===arguments.length){n=Object.keys(f);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var d=0;d<n.length;d++)if(!NG(c,n[d]))return!1;if(h&&5===arguments.length)if(b=FL(f),0!==b.length){var m=0;for(d=0;d<b.length;d++){var a=b[d];if(IL(f,a)){if(!IL(c,a))return!1;n.push(a);m++}else if(IL(c,a))return!1}d=
FL(c);if(b.length!==d.length&&G6(c,d).length!==m)return!1}else if(b=FL(c),0!==b.length&&0!==G6(c,b).length)return!1;if(0===n.length&&(0===k||1===k&&0===f.length||0===f.size))return!0;if(void 0===e)e={val1:new Map,val2:new Map,position:0};else{b=e.val1.get(f);if(void 0!==b&&(m=e.val2.get(c),void 0!==m))return b===m;e.position++}e.val1.set(f,e.position);e.val2.set(c,e.position);b=dka(f,c,h,n,e,k);return e.val1.delete(f),e.val2.delete(c),b}function H6(f,c,h,e){for(var k=JL(f),n=0;n<k.length;n++){var b=
k[n];if(Vr(c,b,h,e))return f.delete(b),!0}return!1}function I6(f){switch(kt(f)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":f=+f;case "number":if(iT(f))return!1}return!0}function J6(f,c,h,e,k,n){for(var b=JL(f),d=0;d<b.length;d++){var m=b[d];if(Vr(h,m,k,n)&&Vr(e,c.get(m),k,n))return f.delete(m),!0}return!1}function dka(f,c,h,e,k,n){var b=0;if(2===n){if(!function(d,m,a,g){for(var l=null,r=JL(d),v=0;v<r.length;v++){var y=r[v];if("object"===kt(y)&&null!==y)null===
l&&(l=new Set),l.add(y);else if(!m.has(y)){if(a)return!1;var A=d,E=m,F=I6(y);if(null!=F?!F:!E.has(F)||A.has(F))return!1;null===l&&(l=new Set);l.add(y)}}if(null!==l){m=JL(m);for(r=0;r<m.length;r++)if(v=m[r],"object"===kt(v)&&null!==v){if(!H6(l,v,a,g))return!1}else if(!a&&!d.has(v)&&!H6(l,v,a,g))return!1;return 0===l.size}return!0}(f,c,h,k))return!1}else if(3===n){if(!function(d,m,a,g){for(var l=null,r=K6(d),v=0;v<r.length;v++){var y=w6(r[v],2),A=y[0],E=y[1];if("object"===kt(A)&&null!==A)null===l&&
(l=new Set),l.add(A);else if(y=m.get(A),void 0===y&&!m.has(A)||!Vr(E,y,a,g)){if(a)return!1;y=d;var F=m,G=g,I=I6(A);if(null!=I)y=I;else{var M=F.get(I);y=!(void 0===M&&!F.has(I)||!Vr(E,M,!1,G))&&!y.has(I)&&Vr(E,M,!1,G)}if(!y)return!1;null===l&&(l=new Set);l.add(A)}}if(null!==l){m=K6(m);for(r=0;r<m.length;r++)if(v=w6(m[r],2),v=(A=v[0],v[1]),"object"===kt(A)&&null!==A){if(!J6(l,d,A,v,a,g))return!1}else if(!(a||d.has(A)&&Vr(d.get(A),v,!1,g)||J6(l,d,A,v,!1,g)))return!1;return 0===l.size}return!0}(f,c,h,
k))return!1}else if(1===n)for(;b<f.length;b++){if(!NG(f,b)){if(NG(c,b))return!1;for(e=Object.keys(f);b<e.length;b++)if(n=e[b],!NG(c,n)||!Vr(f[n],c[n],h,k))return!1;return e.length===Object.keys(c).length}if(!NG(c,b)||!Vr(f[b],c[b],h,k))return!1}for(b=0;b<e.length;b++)if(n=e[b],!Vr(f[n],c[n],h,k))return!1;return!0}function gT(){function f(V){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(na){return typeof na}:function(na){return na&&"function"==typeof Symbol&&na.constructor===
Symbol&&na!==Symbol.prototype?"symbol":typeof na})(V)}function c(){v=L6.isDeepEqual;y=L6.isDeepStrictEqual}function h(V){if(V.message instanceof Error)throw V.message;throw new L(V);}function e(V,na,la,ya){if(!la){var jb=!1;if(0===na)jb=!0,ya="No value argument passed to `assert.ok()`";else if(ya instanceof Error)throw ya;V=new L({actual:la,expected:!0,message:ya,operator:"==",stackStartFn:V});throw V.generatedMessage=jb,V;}}function k(){for(var V=arguments.length,na=Array(V),la=0;la<V;la++)na[la]=
arguments[la];e.apply(void 0,[k,na.length].concat(na))}function n(V,na,la,ya){if("function"!=typeof na){if(aa(na))return na.test(V);if(2===arguments.length)throw new F("expected",["Function","RegExp"],na);if("object"!==f(V)||null===V){var jb=new L({actual:V,expected:na,message:la,operator:"deepStrictEqual",stackStartFn:ya});throw jb.operator=ya.name,jb;}var gb=Object.keys(na);if(na instanceof Error)gb.push("name","message");else if(0===gb.length)throw new G("error",na,"may not be an empty object");
return void 0===v&&c(),gb.forEach(function(ka){if(!("string"==typeof V[ka]&&aa(na[ka])&&na[ka].test(V[ka])||ka in V&&y(V[ka],na[ka]))){if(!la){ka=new U(V,gb);var ia=new U(na,gb,V);ka=new L({actual:ka,expected:ia,operator:"deepStrictEqual",stackStartFn:ya});throw ka.actual=V,ka.expected=na,ka.operator=ya.name,ka;}h({actual:V,expected:na,message:la,operator:ya.name,stackStartFn:ya})}}),!0}return void 0!==na.prototype&&V instanceof na||!Error.isPrototypeOf(na)&&!0===na.call({},V)}function b(V){if("function"!=
typeof V)throw new F("fn","Function",V);try{V()}catch(na){return na}return Z}function d(V){return R(V)||null!==V&&"object"===f(V)&&"function"==typeof V.then&&"function"==typeof V.catch}function m(V){return Promise.resolve().then(function(){var na;if("function"==typeof V){if(!d(na=V()))throw new I("instance of Promise","promiseFn",na);}else{if(!d(V))throw new F("promiseFn",["Function","Promise"],V);na=V}return Promise.resolve().then(function(){return na}).then(function(){return Z}).catch(function(la){return la})})}
function a(V,na,la,ya){if("string"==typeof la){if(4===arguments.length)throw new F("error",["Object","Error","Function","RegExp"],la);if("object"===f(na)&&null!==na){if(na.message===la)throw new E("error/message",'The error message "'.concat(na.message,'" is identical to the message.'));}else if(na===la)throw new E("error/message",'The error "'.concat(na,'" is identical to the message.'));ya=la;la=void 0}else if(null!=la&&"object"!==f(la)&&"function"!=typeof la)throw new F("error",["Object","Error",
"Function","RegExp"],la);if(na===Z){var jb="";la&&la.name&&(jb+=" (".concat(la.name,")"));jb+=ya?": ".concat(ya):".";h({actual:void 0,expected:la,operator:V.name,message:"Missing expected ".concat("rejects"===V.name?"rejection":"exception").concat(jb),stackStartFn:V})}if(la&&!n(na,la,ya,V))throw na;}function g(V,na,la,ya){if(na!==Z){if("string"==typeof la&&(ya=la,la=void 0),!la||n(na,la))ya=ya?": ".concat(ya):".",h({actual:na,expected:la,operator:V.name,message:"Got unwanted ".concat("doesNotReject"===
V.name?"rejection":"exception").concat(ya,"\n")+'Actual message: "'.concat(na&&na.message,'"'),stackStartFn:V});throw na;}}function l(){for(var V=arguments.length,na=Array(V),la=0;la<V;la++)na[la]=arguments[la];e.apply(void 0,[l,na.length].concat(na))}if(M6)return jT;M6=!0;var r=Zj,v,y,A=s6().codes,E=A.ERR_AMBIGUOUS_ARGUMENT,F=A.ERR_INVALID_ARG_TYPE,G=A.ERR_INVALID_ARG_VALUE,I=A.ERR_INVALID_RETURN_VALUE,M=A.ERR_MISSING_ARGS,L=Uja(),S=ni.inspect;A=ni.types;var R=A.isPromise,aa=A.isRegExp;A=Object.assign?
Object.assign:eka.assign;var ra=Object.is?Object.is:N6,Ea=!1,K=jT=k,Z={};K.fail=function ka(na,la,ya,jb,gb){var ia=arguments.length;if(0===ia)var qa="Failed";else 1===ia?(ya=na,na=void 0):(!1===Ea&&(Ea=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ia&&(jb="!="));if(ya instanceof Error)throw ya;ia={actual:na,expected:la,operator:void 0===
jb?"fail":jb,stackStartFn:gb||ka};void 0!==ya&&(ia.message=ya);ia=new L(ia);throw qa&&(ia.message=qa,ia.generatedMessage=!0),ia;};K.AssertionError=L;K.ok=k;K.equal=function gb(la,ya,jb){if(2>arguments.length)throw new M("actual","expected");la!=ya&&h({actual:la,expected:ya,message:jb,operator:"==",stackStartFn:gb})};K.notEqual=function ka(ya,jb,gb){if(2>arguments.length)throw new M("actual","expected");ya==jb&&h({actual:ya,expected:jb,message:gb,operator:"!=",stackStartFn:ka})};K.deepEqual=function ia(jb,
gb,ka){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(jb,gb)||h({actual:jb,expected:gb,message:ka,operator:"deepEqual",stackStartFn:ia})};K.notDeepEqual=function qa(gb,ka,ia){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();v(gb,ka)&&h({actual:gb,expected:ka,message:ia,operator:"notDeepEqual",stackStartFn:qa})};K.deepStrictEqual=function La(ka,ia,qa){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();y(ka,ia)||h({actual:ka,expected:ia,
message:qa,operator:"deepStrictEqual",stackStartFn:La})};K.notDeepStrictEqual=function Lb(ia,qa,La){if(2>arguments.length)throw new M("actual","expected");void 0===v&&c();y(ia,qa)&&h({actual:ia,expected:qa,message:La,operator:"notDeepStrictEqual",stackStartFn:Lb})};K.strictEqual=function qc(qa,La,Lb){if(2>arguments.length)throw new M("actual","expected");ra(qa,La)||h({actual:qa,expected:La,message:Lb,operator:"strictEqual",stackStartFn:qc})};K.notStrictEqual=function dc(La,Lb,qc){if(2>arguments.length)throw new M("actual",
"expected");ra(La,Lb)&&h({actual:La,expected:Lb,message:qc,operator:"notStrictEqual",stackStartFn:dc})};var U=function oc(Lb,qc,dc){var $c=this;if(!(this instanceof oc))throw new TypeError("Cannot call a class as a function");!0;qc.forEach(function(Vb){Vb in Lb&&(void 0!==dc&&"string"==typeof dc[Vb]&&aa(Lb[Vb])&&Lb[Vb].test(dc[Vb])?$c[Vb]=dc[Vb]:$c[Vb]=Lb[Vb])})};return K.throws=function dc(qc){for(var oc=arguments.length,$c=Array(1<oc?oc-1:0),Vb=1;Vb<oc;Vb++)$c[Vb-1]=arguments[Vb];a.apply(void 0,
[dc,b(qc)].concat($c))},K.rejects=function oc(dc){for(var $c=arguments.length,Vb=Array(1<$c?$c-1:0),Hd=1;Hd<$c;Hd++)Vb[Hd-1]=arguments[Hd];return m(dc).then(function(be){return a.apply(void 0,[oc,be].concat(Vb))})},K.doesNotThrow=function $c(oc){for(var Vb=arguments.length,Hd=Array(1<Vb?Vb-1:0),be=1;be<Vb;be++)Hd[be-1]=arguments[be];g.apply(void 0,[$c,b(oc)].concat(Hd))},K.doesNotReject=function Vb($c){for(var Hd=arguments.length,be=Array(1<Hd?Hd-1:0),ha=1;ha<Hd;ha++)be[ha-1]=arguments[ha];return m($c).then(function(Ca){return g.apply(void 0,
[Vb,Ca].concat(be))})},K.ifError=function Hd(Vb){if(null!=Vb){var be="ifError got unwanted exception: ";"object"===f(Vb)&&"string"==typeof Vb.message?0===Vb.message.length&&Vb.constructor?be+=Vb.constructor.name:be+=Vb.message:be+=S(Vb);be=new L({actual:Vb,expected:null,operator:"ifError",message:be,stackStartFn:Hd});Vb=Vb.stack;if("string"==typeof Vb){Vb=Vb.split("\n");Vb.shift();for(var ha=be.stack.split("\n"),Ca=0;Ca<Vb.length;Ca++){var Na=ha.indexOf(Vb[Ca]);if(-1!==Na){ha=ha.slice(0,Na);break}}be.stack=
"".concat(ha.join("\n"),"\n").concat(Vb.join("\n"))}throw be;}},K.strict=A(l,K,{equal:K.strictEqual,deepEqual:K.deepStrictEqual,notEqual:K.notStrictEqual,notDeepEqual:K.notDeepStrictEqual}),K.strict.strict=K.strict,jT}function hl(f,c,h){if(!((this||Wi)instanceof hl))return new hl(f,c,h);var e=this||Wi;KL.call(this||Wi);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!f||"object"!==typeof f){f=new fka("First argument must be an abstract-leveldown compliant store");if("function"===
typeof h)return LL.nextTick(h,f);throw f;}gka.strictEqual(typeof f.status,"string",".status required, old abstract-leveldown");(this||Wi).options=SD(c);(this||Wi)._db=f;(this||Wi).db=new O6(f);this.open(h||function(k){k&&e.emit("error",k)});(this||Wi).supports=hka((this||Wi).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||Wi).supports.additionalMethods).forEach(function(k){null==(this||Wi)[k]&&((this||Wi)[k]=function(){return(this||Wi).db[k].apply((this||
Wi).db,arguments)})},this||Wi)}function OG(f,c){if(!f._isOpening()&&!f.isOpen())return LL.nextTick(c,new P6("Database is not open")),!0}function dv(f,c){return Object.hasOwnProperty.call(f,c)&&c}function ika(f){return f}function ML(f){return f}function kT(f){return void 0===f||null===f||lT.isBuffer(f)}function jp(f){if(!((this||Tw)instanceof jp))return new jp(f);(this||Tw).opts=f||{};(this||Tw).encodings=mT}function jka(f){return f.toString((this||fh).encoding)}function kka(f){(this||fh).charReceived=
f.length%2;(this||fh).charLength=(this||fh).charReceived?2:0}function lka(f){(this||fh).charReceived=f.length%3;(this||fh).charLength=(this||fh).charReceived?3:0}function Q6(){function f(F,G,I){(this||Xi).chunk=F;(this||Xi).encoding=G;(this||Xi).callback=I}function c(F,G){var I=TD();F=F||{};var M=F.highWaterMark,L=F.objectMode?16:16384;(this||Xi).highWaterMark=M||0===M?M:L;(this||Xi).objectMode=!!F.objectMode;G instanceof I&&((this||Xi).objectMode=(this||Xi).objectMode||!!F.writableObjectMode);(this||
Xi).highWaterMark=~~(this||Xi).highWaterMark;(this||Xi).needDrain=!1;(this||Xi).ending=!1;(this||Xi).ended=!1;(this||Xi).finished=!1;(this||Xi).decodeStrings=!1!==F.decodeStrings;(this||Xi).defaultEncoding=F.defaultEncoding||"utf8";(this||Xi).length=0;(this||Xi).writing=!1;(this||Xi).corked=0;(this||Xi).sync=!0;(this||Xi).bufferProcessing=!1;(this||Xi).onwrite=function(S){a(G,S)};(this||Xi).writecb=null;(this||Xi).writelen=0;(this||Xi).buffer=[];(this||Xi).pendingcb=0;(this||Xi).prefinished=!1;(this||
Xi).errorEmitted=!1}function h(F){var G=TD();if(!((this||Xi)instanceof h||(this||Xi)instanceof G))return new h(F);(this||Xi)._writableState=new c(F,this||Xi);(this||Xi).writable=!0;E.call(this||Xi)}function e(F,G,I){var M=Error("write after end");F.emit("error",M);v.nextTick(function(){I(M)})}function k(F,G,I,M){var L=!0;if(!(A.isBuffer(I)||A.isString(I)||A.isNullOrUndefined(I)||G.objectMode)){var S=new TypeError("Invalid non-string/buffer chunk");F.emit("error",S);v.nextTick(function(){M(S)});L=
!1}return L}function n(F,G,I,M,L){var S=M;!G.objectMode&&!1!==G.decodeStrings&&A.isString(I)&&(I=new y(I,S));A.isBuffer(I)&&(M="buffer");S=G.objectMode?1:I.length;G.length+=S;var R=G.length<G.highWaterMark;R||(G.needDrain=!0);G.writing||G.corked?G.buffer.push(new f(I,M,L)):b(F,G,!1,S,I,M,L);return R}function b(F,G,I,M,L,S,R){G.writelen=M;G.writecb=R;G.writing=!0;G.sync=!0;I?F._writev(L,G.onwrite):F._write(L,S,G.onwrite);G.sync=!1}function d(F,G,I,M,L){I?v.nextTick(function(){G.pendingcb--;L(M)}):
(G.pendingcb--,L(M));F._writableState.errorEmitted=!0;F.emit("error",M)}function m(F){F.writing=!1;F.writecb=null;F.length-=F.writelen;F.writelen=0}function a(F,G){var I=F._writableState,M=I.sync,L=I.writecb;m(I);if(G)d(F,I,M,G,L);else{var S=I.ending&&0===I.length&&!I.finished&&!I.writing;S||I.corked||I.bufferProcessing||!I.buffer.length||l(F,I);M?v.nextTick(function(){g(F,I,S,L)}):g(F,I,S,L)}}function g(F,G,I,M){!I&&0===G.length&&G.needDrain&&(G.needDrain=!1,F.emit("drain"));G.pendingcb--;M();r(F,
G)}function l(F,G){G.bufferProcessing=!0;if(F._writev&&1<G.buffer.length){for(var I=[],M=0;M<G.buffer.length;M++)I.push(G.buffer[M].callback);G.pendingcb++;b(F,G,!0,G.length,G.buffer,"",function(R){for(var aa=0;aa<I.length;aa++)G.pendingcb--,I[aa](R)});G.buffer=[]}else{for(M=0;M<G.buffer.length;M++){var L=G.buffer[M],S=L.chunk;b(F,G,!1,G.objectMode?1:S.length,S,L.encoding,L.callback);if(G.writing){M++;break}}M<G.buffer.length?G.buffer=G.buffer.slice(M):G.buffer.length=0}G.bufferProcessing=!1}function r(F,
G){var I=G.ending&&0===G.length&&!G.finished&&!G.writing;I&&(0===G.pendingcb?(G.prefinished||(G.prefinished=!0,F.emit("prefinish")),G.finished=!0,F.emit("finish")):G.prefinished||(G.prefinished=!0,F.emit("prefinish")));return I}if(R6)return nT;R6=!0;var v=Zj;nT=h;var y=ij.Buffer;h.WritableState=c;var A=Rm;A.inherits=Xl;var E=gB;A.inherits(h,E);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(F,G,I){var M=(this||Xi)._writableState,L=!1;
A.isFunction(G)&&(I=G,G=null);A.isBuffer(F)?G="buffer":G||(G=M.defaultEncoding);A.isFunction(I)||(I=function(){});M.ended?e(this||Xi,M,I):k(this||Xi,M,F,I)&&(M.pendingcb++,L=n(this||Xi,M,F,G,I));return L};h.prototype.cork=function(){(this||Xi)._writableState.corked++};h.prototype.uncork=function(){var F=(this||Xi)._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.finished||F.bufferProcessing||!F.buffer.length||l(this||Xi,F))};h.prototype._write=function(F,G,I){I(Error("not implemented"))};
h.prototype._writev=null;h.prototype.end=function(F,G,I){var M=(this||Xi)._writableState;A.isFunction(F)?(I=F,G=F=null):A.isFunction(G)&&(I=G,G=null);A.isNullOrUndefined(F)||this.write(F,G);M.corked&&(M.corked=1,this.uncork());if(!M.ending&&!M.finished){F=this||Xi;M.ending=!0;r(F,M);if(I)if(M.finished)v.nextTick(I);else F.once("finish",I);M.ended=!0}};return nT}function TD(){function f(d){if(!((this||lt)instanceof f))return new f(d);n.call(this||lt,d);b.call(this||lt,d);d&&!1===d.readable&&((this||
lt).readable=!1);d&&!1===d.writable&&((this||lt).writable=!1);(this||lt).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||lt).allowHalfOpen=!1);this.once("end",c)}function c(){(this||lt).allowHalfOpen||(this||lt)._writableState.ended||h.nextTick((this||lt).end.bind(this||lt))}if(S6)return oT;S6=!0;var h=Zj;oT=f;var e=Object.keys||function(d){var m=[],a;for(a in d)m.push(a);return m},k=Rm;k.inherits=Xl;var n=T6(),b=Q6();k.inherits(f,n);(function(d,m){for(var a=0,g=d.length;a<g;a++)m(d[a],a)})(e(b.prototype),
function(d){f.prototype[d]||(f.prototype[d]=b.prototype[d])});return oT}function T6(){function f(L,S){var R=TD();L=L||{};var aa=L.highWaterMark,ra=L.objectMode?16:16384;(this||ug).highWaterMark=aa||0===aa?aa:ra;(this||ug).highWaterMark=~~(this||ug).highWaterMark;(this||ug).buffer=[];(this||ug).length=0;(this||ug).pipes=null;(this||ug).pipesCount=0;(this||ug).flowing=null;(this||ug).ended=!1;(this||ug).endEmitted=!1;(this||ug).reading=!1;(this||ug).sync=!0;(this||ug).needReadable=!1;(this||ug).emittedReadable=
!1;(this||ug).readableListening=!1;(this||ug).objectMode=!!L.objectMode;S instanceof R&&((this||ug).objectMode=(this||ug).objectMode||!!L.readableObjectMode);(this||ug).defaultEncoding=L.defaultEncoding||"utf8";(this||ug).ranOut=!1;(this||ug).awaitDrain=0;(this||ug).readingMore=!1;(this||ug).decoder=null;(this||ug).encoding=null;L.encoding&&(I||(I=pT.StringDecoder),(this||ug).decoder=new I(L.encoding),(this||ug).encoding=L.encoding)}function c(L){TD();if(!((this||ug)instanceof c))return new c(L);
(this||ug)._readableState=new f(L,this||ug);(this||ug).readable=!0;F.call(this||ug)}function h(L,S,R,aa,ra){var Ea=R;var K=null;G.isBuffer(Ea)||G.isString(Ea)||G.isNullOrUndefined(Ea)||S.objectMode||(K=new TypeError("Invalid non-string/buffer chunk"));(Ea=K)?L.emit("error",Ea):G.isNullOrUndefined(R)?(S.reading=!1,S.ended||(S.decoder&&!S.ended&&(R=S.decoder.end())&&R.length&&(S.buffer.push(R),S.length+=S.objectMode?1:R.length),S.ended=!0,k(L))):S.objectMode||R&&0<R.length?S.ended&&!ra?(R=Error("stream.push() after EOF"),
L.emit("error",R)):S.endEmitted&&ra?(R=Error("stream.unshift() after end event"),L.emit("error",R)):(!S.decoder||ra||aa||(R=S.decoder.write(R)),ra||(S.reading=!1),S.flowing&&0===S.length&&!S.sync?(L.emit("data",R),L.read(0)):(S.length+=S.objectMode?1:R.length,ra?S.buffer.unshift(R):S.buffer.push(R),S.needReadable&&k(L)),b(L,S)):ra||(S.reading=!1);return!S.ended&&(S.needReadable||S.length<S.highWaterMark||0===S.length)}function e(L,S){if(0===S.length&&S.ended)return 0;if(S.objectMode)return 0===L?
0:1;if(isNaN(L)||G.isNull(L))return S.flowing&&S.buffer.length?S.buffer[0].length:S.length;if(0>=L)return 0;if(L>S.highWaterMark){var R=L;if(8388608<=R)R=8388608;else{R--;for(var aa=1;32>aa;aa<<=1)R|=R>>aa;R++}S.highWaterMark=R}if(L>S.length){if(S.ended)return S.length;S.needReadable=!0;return 0}return L}function k(L){var S=L._readableState;S.needReadable=!1;S.emittedReadable||(M("emitReadable",S.flowing),S.emittedReadable=!0,S.sync?v.nextTick(function(){n(L)}):n(L))}function n(L){M("emit readable");
L.emit("readable");a(L)}function b(L,S){S.readingMore||(S.readingMore=!0,v.nextTick(function(){for(var R=S.length;!S.reading&&!S.flowing&&!S.ended&&S.length<S.highWaterMark&&(M("maybeReadMore read 0"),L.read(0),R!==S.length);)R=S.length;S.readingMore=!1}))}function d(L){return function(){var S=L._readableState;M("pipeOnDrain",S.awaitDrain);S.awaitDrain&&S.awaitDrain--;0===S.awaitDrain&&E.listenerCount(L,"data")&&(S.flowing=!0,a(L))}}function m(L,S){S.resumeScheduled||(S.resumeScheduled=!0,v.nextTick(function(){S.resumeScheduled=
!1;L.emit("resume");a(L);S.flowing&&!S.reading&&L.read(0)}))}function a(L){var S=L._readableState;M("flow",S.flowing);if(S.flowing){do var R=L.read();while(null!==R&&S.flowing)}}function g(L,S){var R=S.buffer,aa=S.length,ra=!!S.decoder;S=!!S.objectMode;if(0===R.length)return null;if(0===aa)aa=null;else if(S)aa=R.shift();else if(!L||L>=aa)aa=ra?R.join(""):A.concat(R,aa),R.length=0;else if(L<R[0].length)S=R[0],aa=S.slice(0,L),R[0]=S.slice(L);else if(L===R[0].length)aa=R.shift();else{aa=ra?"":new A(L);
for(var Ea=0,K=0,Z=R.length;K<Z&&Ea<L;K++){S=R[0];var U=Math.min(L-Ea,S.length);ra?aa+=S.slice(0,U):S.copy(aa,Ea,0,U);U<S.length?R[0]=S.slice(U):R.shift();Ea+=U}}return aa}function l(L){var S=L._readableState;if(0<S.length)throw Error("endReadable called on non-empty stream");S.endEmitted||(S.ended=!0,v.nextTick(function(){S.endEmitted||0!==S.length||(S.endEmitted=!0,L.readable=!1,L.emit("end"))}))}function r(L,S){for(var R=0,aa=L.length;R<aa;R++)S(L[R],R)}if(U6)return qT;U6=!0;var v=Zj;qT=c;var y=
mka,A=ij.Buffer;c.ReadableState=f;var E=Vu.EventEmitter;E.listenerCount||(E.listenerCount=function(L,S){return L.listeners(S).length});var F=gB,G=Rm;G.inherits=Xl;var I,M=nka;M=M&&M.debuglog?M.debuglog("stream"):function(){};G.inherits(c,F);c.prototype.push=function(L,S){var R=(this||ug)._readableState;G.isString(L)&&!R.objectMode&&(S=S||R.defaultEncoding,S!==R.encoding&&(L=new A(L,S),S=""));return h(this||ug,R,L,S,!1)};c.prototype.unshift=function(L){return h(this||ug,(this||ug)._readableState,L,
"",!0)};c.prototype.setEncoding=function(L){I||(I=pT.StringDecoder);(this||ug)._readableState.decoder=new I(L);(this||ug)._readableState.encoding=L;return this||ug};c.prototype.read=function(L){M("read",L);var S=(this||ug)._readableState,R=L;if(!G.isNumber(L)||0<L)S.emittedReadable=!1;if(0===L&&S.needReadable&&(S.length>=S.highWaterMark||S.ended))return M("read: emitReadable",S.length,S.ended),0===S.length&&S.ended?l(this||ug):k(this||ug),null;L=e(L,S);if(0===L&&S.ended)return 0===S.length&&l(this||
ug),null;var aa=S.needReadable;M("need readable",aa);if(0===S.length||S.length-L<S.highWaterMark)aa=!0,M("length less than watermark",aa);if(S.ended||S.reading)aa=!1,M("reading or ended",aa);aa&&(M("do read"),S.reading=!0,S.sync=!0,0===S.length&&(S.needReadable=!0),this._read(S.highWaterMark),S.sync=!1);aa&&!S.reading&&(L=e(R,S));aa=0<L?g(L,S):null;G.isNull(aa)&&(S.needReadable=!0,L=0);S.length-=L;0!==S.length||S.ended||(S.needReadable=!0);R!==L&&S.ended&&0===S.length&&l(this||ug);G.isNull(aa)||this.emit("data",
aa);return aa};c.prototype._read=function(L){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(L,S){function R(jb){M("onunpipe");jb===na&&ra()}function aa(){M("onend");L.end()}function ra(){M("cleanup");L.removeListener("close",Z);L.removeListener("finish",U);L.removeListener("drain",ya);L.removeListener("error",K);L.removeListener("unpipe",R);na.removeListener("end",aa);na.removeListener("end",ra);na.removeListener("data",Ea);!la.awaitDrain||L._writableState&&!L._writableState.needDrain||
ya()}function Ea(jb){M("ondata");!1===L.write(jb)&&(M("false write response, pause",na._readableState.awaitDrain),na._readableState.awaitDrain++,na.pause())}function K(jb){M("onerror",jb);V();L.removeListener("error",K);0===E.listenerCount(L,"error")&&L.emit("error",jb)}function Z(){L.removeListener("finish",U);V()}function U(){M("onfinish");L.removeListener("close",Z);V()}function V(){M("unpipe");na.unpipe(L)}var na=this||ug,la=(this||ug)._readableState;switch(la.pipesCount){case 0:la.pipes=L;break;
case 1:la.pipes=[la.pipes,L];break;default:la.pipes.push(L)}la.pipesCount+=1;M("pipe count=%d opts=%j",la.pipesCount,S);S=S&&!1===S.end||L===v.stdout||L===v.stderr?ra:aa;if(la.endEmitted)v.nextTick(S);else na.once("end",S);L.on("unpipe",R);var ya=d(na);L.on("drain",ya);na.on("data",Ea);if(L._events&&L._events.error)y(L._events.error)?L._events.error.unshift(K):L._events.error=[K,L._events.error];else L.on("error",K);L.once("close",Z);L.once("finish",U);L.emit("pipe",na);la.flowing||(M("pipe resume"),
na.resume());return L};c.prototype.unpipe=function(L){var S=(this||ug)._readableState;if(0===S.pipesCount)return this||ug;if(1===S.pipesCount){if(L&&L!==S.pipes)return this||ug;L||(L=S.pipes);S.pipes=null;S.pipesCount=0;S.flowing=!1;L&&L.emit("unpipe",this||ug);return this||ug}if(!L){L=S.pipes;var R=S.pipesCount;S.pipes=null;S.pipesCount=0;S.flowing=!1;for(var aa=0;aa<R;aa++)L[aa].emit("unpipe",this||ug);return this||ug}a:{aa=S.pipes;R=0;for(var ra=aa.length;R<ra;R++)if(aa[R]===L){aa=R;break a}aa=
-1}if(-1===aa)return this||ug;S.pipes.splice(aa,1);--S.pipesCount;1===S.pipesCount&&(S.pipes=S.pipes[0]);L.emit("unpipe",this||ug);return this||ug};c.prototype.on=function(L,S){S=F.prototype.on.call(this||ug,L,S);"data"===L&&!1!==(this||ug)._readableState.flowing&&this.resume();if("readable"===L&&(this||ug).readable&&(L=(this||ug)._readableState,!L.readableListening))if(L.readableListening=!0,L.emittedReadable=!1,L.needReadable=!0,L.reading)L.length&&k(this||ug);else{var R=this||ug;v.nextTick(function(){M("readable nexttick read 0");
R.read(0)})}return S};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var L=(this||ug)._readableState;L.flowing||(M("resume"),L.flowing=!0,L.reading||(M("resume read 0"),this.read(0)),m(this||ug,L));return this||ug};c.prototype.pause=function(){M("call pause flowing=%j",(this||ug)._readableState.flowing);!1!==(this||ug)._readableState.flowing&&(M("pause"),(this||ug)._readableState.flowing=!1,this.emit("pause"));return this||ug};c.prototype.wrap=function(L){var S=(this||ug)._readableState,
R=!1,aa=this||ug;L.on("end",function(){M("wrapped end");if(S.decoder&&!S.ended){var Ea=S.decoder.end();Ea&&Ea.length&&aa.push(Ea)}aa.push(null)});L.on("data",function(Ea){M("wrapped data");S.decoder&&(Ea=S.decoder.write(Ea));Ea&&(S.objectMode||Ea.length)&&!aa.push(Ea)&&(R=!0,L.pause())});for(var ra in L)G.isFunction(L[ra])&&G.isUndefined((this||ug)[ra])&&((this||ug)[ra]=function(Ea){return function(){return L[Ea].apply(L,arguments)}}(ra));r(["error","close","destroy","pause","resume"],function(Ea){L.on(Ea,
aa.emit.bind(aa,Ea))});aa._read=function(Ea){M("wrapped _read",Ea);R&&(R=!1,L.resume())};return aa};c._fromList=g;return qT}function V6(){function f(n,b){(this||Pn).afterTransform=function(d,m){var a=b._transformState;a.transforming=!1;var g=a.writecb;g?(a.writechunk=null,a.writecb=null,k.isNullOrUndefined(m)||b.push(m),g&&g(d),d=b._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&b._read(d.highWaterMark),d=void 0):d=b.emit("error",Error("no writecb in Transform class"));return d};
(this||Pn).needTransform=!1;(this||Pn).transforming=!1;(this||Pn).writecb=null;(this||Pn).writechunk=null}function c(n){if(!((this||Pn)instanceof c))return new c(n);e.call(this||Pn,n);(this||Pn)._transformState=new f(n,this||Pn);var b=this||Pn;(this||Pn)._readableState.needReadable=!0;(this||Pn)._readableState.sync=!1;this.once("prefinish",function(){k.isFunction((this||Pn)._flush)?this._flush(function(d){h(b,d)}):h(b)})}function h(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");
if(b.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(W6)return rT;W6=!0;rT=c;var e=TD(),k=Rm;k.inherits=Xl;k.inherits(c,e);c.prototype.push=function(n,b){(this||Pn)._transformState.needTransform=!1;return e.prototype.push.call(this||Pn,n,b)};c.prototype._transform=function(n,b,d){throw Error("not implemented");};c.prototype._write=function(n,b,d){var m=(this||Pn)._transformState;m.writecb=d;m.writechunk=n;m.writeencoding=b;m.transforming||(n=(this||
Pn)._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||Pn)._transformState;k.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return rT}function oka(){function f(e){if(!((this||X6)instanceof f))return new f(e);c.call(this||X6,e)}if(Y6)return sT;Y6=!0;sT=f;var c=V6(),h=Rm;h.inherits=Xl;h.inherits(f,c);f.prototype._transform=
function(e,k,n){n(null,e)};return sT}function PG(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function pka(f){var c={},h;for(h in f)c[h]=f[h];return c}function qka(f,c,h){f.open(function(){});return{apply:function(e,k,n){k=k||{};for(var b=[],d=-1,m=e.length;++d<m;){var a=e[d],g=a,l=a.prefix;l&&l.options&&(g.keyEncoding=g.keyEncoding||l.options.keyEncoding,g.valueEncoding=g.valueEncoding||l.options.valueEncoding);g=a;l=a.prefix;l="function"===typeof l.prefix?l.prefix():l;g.prefix=
l;b.push({key:c.encode([a.prefix,h.encodeKey(a.key,k,a)]),value:"del"!==a.type&&h.encodeValue(a.value,k,a),type:a.type})}f.db.batch(b,k,n)},get:function(e,k,n,b){n.asBuffer=h.valueAsBuffer(n);return f.db.get(c.encode([k,h.encodeKey(e,n,void 0)]),n,function(d,m){d?b(d):b(null,h.decodeValue(m,n))})},createDecoder:function(e){return function(k,n){return{key:h.decodeKey(c.decode(k)[1],e),value:h.decodeValue(n,e)}}},isClosed:function(){return f.isClosed()},close:function(e){return f.close(e)},iterator:function(e){var k=
pka(e||{}),n=e.prefix||[];rka.toLtgt(e,k,function(b){return c.encode([n,h.encodeKey(b,k,{})])},c.lowerBound,c.upperBound);k.prefix=null;k.keyAsBuffer=k.valueAsBuffer=!1;"number"!==typeof k.limit&&(k.limit=-1);k.keyAsBuffer=c.buffer;k.valueAsBuffer=h.valueAsBuffer(k);return function(b){return{next:function(d){return b.next(d)},end:function(d){b.end(d)}}}(f.db.iterator(k))}}}function tT(){Error.call(this)}function Ly(f,c){if(!(this instanceof Ly))return new Ly(f,c);Z6.call(this,{objectMode:!0,highWaterMark:f.highWaterMark});
this._waiting=!1;this._options=f;this._makeData=c}function UD(f){$6.call(this||Uw,f);(this||Uw)._destroyed=!1}function ska(f,c,h){h(null,f)}function uT(f){return function(c,h,e){"function"==typeof c&&(e=h,h=c,c={});"function"!=typeof h&&(h=ska);"function"!=typeof e&&(e=null);return f(c,h,e)}}function vk(f){this._capacity=a7(f);this._front=this._length=0;if(b7(f)){for(var c=f.length,h=0;h<c;++h)this[h]=f[h];this._length=c}}function a7(f){if("number"!==typeof f)if(b7(f))f=f.length;else return 16;f=
Math.min(Math.max(16,f),1073741824);f=(f>>>0)-1;f|=f>>1;f|=f>>2;f|=f>>4;f|=f>>8;return(f|f>>16)+1}function vT(f){f=f.rev_tree.slice();for(var c;c=f.pop();){var h=c.ids,e=h[2];c=c.pos;if(e.length){h=0;for(var k=e.length;h<k;h++)f.push({pos:c+1,ids:e[h]})}else if(e=!!h[1].deleted,h=h[0],!n||(d!==e?d:b!==c?b<c:n<h)){var n=h;var b=c;var d=e}}return b+"-"+n}function NL(f,c){f=f.slice();for(var h;h=f.pop();){var e=h.pos,k=h.ids,n=k[2];h=c(0===n.length,e,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)f.push({pos:e+
1,ids:n[k],ctx:h})}}function tka(f,c){return f.pos-c.pos}function c7(f){var c=[];NL(f,function(e,k,n,b,d){e&&c.push({rev:k+"-"+n,pos:k,opts:d})});c.sort(tka).reverse();f=0;for(var h=c.length;f<h;f++)delete c[f].pos;return c}function d7(f){var c=[];f=f.slice();for(var h;h=f.pop();){var e=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var d=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});d&&c.push({pos:e+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)f.push({pos:e+1,ids:k[n],history:h})}return c.reverse()}
function uka(f,c){return f.pos-c.pos}function e7(f,c){for(var h,e,k=f.length;c<k;c++){var n=f[c];n=[n.id,n.opts,[]];e?(e[2].push(n),e=n):h=e=n}return h}function vka(f,c){return f[0]<c[0]?-1:1}function f7(f,c){c=[{tree1:f,tree2:c}];for(var h=!1;0<c.length;){var e=c.pop(),k=e.tree1;e=e.tree2;if(k[1].status||e[1].status)k[1].status="available"===k[1].status||"available"===e[1].status?"available":"missing";for(var n=0;n<e[2].length;n++)if(k[2][0]){for(var b=!1,d=0;d<k[2].length;d++)k[2][d][0]===e[2][n][0]&&
(c.push({tree1:k[2][d],tree2:e[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];d=e[2][n];for(var m,a=b,g=d,l=vka,r=0,v=a.length;r<v;)m=r+v>>>1,0>l(a[m],g)?r=m+1:v=m;b.splice(r,0,d)}}else h="new_leaf",k[2][0]=e[2][n]}return{conflicts:h,tree:f}}function g7(f,c,h){var e=[],k=!1,n=!1;if(!f.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,d=f.length;b<d;b++){var m=f[b];if(m.pos===c.pos&&m.ids[0]===c.ids[0])n=f7(m.ids,c.ids),e.push({pos:m.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=
m.pos<c.pos?m:c,g=m.pos<c.pos?c:m,l=[],r=[];for(r.push({ids:a.ids,diff:g.pos-a.pos,parent:null,parentIdx:null});0<r.length;){var v=r.pop();if(0===v.diff)v.ids[0]===g.ids[0]&&l.push(v);else for(var y=v.ids[2],A=0,E=y.length;A<E;A++)r.push({ids:y[A],diff:v.diff-1,parent:v.ids,parentIdx:A})}(l=l[0])?(n=f7(l.ids,g.ids),l.parent[2][l.parentIdx]=n.tree,e.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):e.push(m)}else e.push(m)}n||e.push(c);e.sort(uka);return{tree:e,conflicts:k||"internal_node"}}function wka(f,
c){f=d7(f);for(var h,e,k=0,n=f.length;k<n;k++){var b=f[k],d=b.ids;if(d.length>c){h||(h={});var m=d.length-c;var a={pos:b.pos+m,ids:e7(d,m)};for(var g=0;g<m;g++)h[b.pos+g+"-"+d[g].id]=!0}else a={pos:b.pos,ids:e7(d,0)};e=e?g7(e,a,!0).tree:[a]}h&&NL(e,function(l,r,v){delete h[r+"-"+v]});return{tree:e,revs:h?Object.keys(h):[]}}function xka(f){return f.ids}function h7(f){return f.reduce(function(c,h){c[h]=!0;return c},{})}function i7(f){if(!/^\d+-/.test(f))return Hq.createError(Hq.INVALID_REV);var c=f.indexOf("-"),
h=f.substring(0,c);f=f.substring(c+1);return{prefix:parseInt(h,10),id:f}}function j7(f,c,h){h||(h={deterministic_revs:!0});var e={status:"available"};f._deleted&&(e.deleted=!0);if(c){f._id||(f._id=hB.uuid());var k=hB.rev(f,h.deterministic_revs);if(f._rev){c=i7(f._rev);if(c.error)return c;f._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,e,[]]]]}];var n=c.prefix+1}else f._rev_tree=[{pos:1,ids:[k,e,[]]}],n=1}else{if(f._revisions){k=f._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],e,[]];
h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];f._rev_tree=[{pos:n,ids:c}];n=f._revisions.start;k=f._revisions.ids[0]}if(!f._rev_tree){c=i7(f._rev);if(c.error)return c;n=c.prefix;k=c.id;f._rev_tree=[{pos:n,ids:[k,e,[]]}]}}hB.invalidIdError(f._id);f._rev=n+"-"+k;e={metadata:{},data:{}};for(var d in f)if(Object.prototype.hasOwnProperty.call(f,d)){if((n="_"===d[0])&&!yka[d])throw f=Hq.createError(Hq.DOC_VALIDATION,d),f.message=Hq.DOC_VALIDATION.message+": "+d,f;n&&!zka[d]?e.metadata[d.slice(1)]=
f[d]:e.data[d]=f[d]}return e}function Aka(f,c,h){try{var e=QG.atob(f.data)}catch(k){e={error:Hq.createError(Hq.BAD_ARG,"Attachment is not a valid base64 string")}}if(e.error)return h(e.error);f.length=e.length;f.data="blob"===c?QG.binaryStringToBlobOrBuffer(e,f.content_type):"base64"===c?QG.btoa(e):e;k7.binaryMd5(e,function(k){f.digest="md5-"+k;h()})}function Bka(f,c,h){k7.binaryMd5(f.data,function(e){f.digest="md5-"+e;f.length=f.data.size||f.data.length||0;"binary"===c?QG.blobOrBufferToBinaryString(f.data,
function(k){f.data=k;h()}):"base64"===c?QG.blobOrBufferToBase64(f.data,function(k){f.data=k;h()}):h()})}function Cka(f,c,h){if(f.stub)return h();"string"===typeof f.data?Aka(f,c,h):Bka(f,c,h)}function l7(f,c,h,e,k,n,b,d){if(Zp.revExists(c.rev_tree,h.metadata.rev)&&!d)return e[k]=h,n();var m=c.winningRev||Zp.winningRev(c),a="deleted"in c?c.deleted:Zp.isDeleted(c,m),g="deleted"in h.metadata?h.metadata.deleted:Zp.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);a&&!g&&d&&l&&(l=h.data,l._rev=m,l._id=
h.metadata.id,h=j7(l,d));f=Zp.merge(c.rev_tree,h.metadata.rev_tree[0],f);if(d&&(a&&g&&"new_leaf"!==f.conflicts||!a&&"new_leaf"!==f.conflicts||a&&!g&&"new_branch"===f.conflicts))return h=Hq.createError(Hq.REV_CONFLICT),e[k]=h,n();e=h.metadata.rev;h.metadata.rev_tree=f.tree;h.stemmedRevs=f.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=Zp.winningRev(h.metadata);d=Zp.isDeleted(h.metadata,c);a=a===d?0:a<d?-1:1;e=e===c?d:Zp.isDeleted(h.metadata,e);b(h,c,d,e,!0,a,k,n)}function RG(f){return f&&
"object"===typeof f&&"default"in f?f["default"]:f}function m7(f,c){f=new Uint8Array(f);return SG.blob([f],{type:c})}function Dka(f,c){SG.readAsBinaryString(f,c)}function n7(f,c){c=c.prefix()[0];f=f._cache;var h=f.get(c);h||(h=new mt.Map,f.set(c,h));return h}function iB(){this._batch=[];this._cache=new mt.Map}function wT(f){return"winningRev"in f?f.winningRev:TG.winningRev(f)}function Eka(f,c,h){var e=f.content_type;return new Promise(function(k,n){c.binaryStore.get(f.digest,function(b,d){if(b){if("NotFoundError"!==
b.name)return n(b);b=h.binary?SG.binaryStringToBlobOrBuffer("",e):""}else b=h.binary?m7(d,e):d.toString("base64");delete f.stub;delete f.length;f.data=b;k()})})}function xT(f,c,h){var e=[];f.forEach(function(k){k.doc&&k.doc._attachments&&Object.keys(k.doc._attachments).forEach(function(n){n=k.doc._attachments[n];"data"in n||e.push(n)})});return Promise.all(e.map(function(k){return Eka(k,c,h)}))}function yT(f){(this||jB).db=f;(this||jB)._ended=!1;(this||jB)._nexting=!1}function My(f){(this||Ll)._db=
f;(this||Ll)._operations=[];(this||Ll)._written=!1}function kp(f){if(!arguments.length||void 0===f)throw Error("constructor requires at least a location argument");if("string"!=typeof f)throw Error("constructor requires a location string argument");(this||um).location=f;(this||um).status="new"}function Iq(f,c,h,e,k,n){this._color=f;this.key=c;this.value=h;this.left=e;this.right=k;this._count=n}function ev(f){return new Iq(f._color,f.key,f.value,f.left,f.right,f._count)}function Ny(f,c){return new Iq(f,
c.key,c.value,c.left,c.right,c._count)}function Ml(f){f._count=1+(f.left?f.left._count:0)+(f.right?f.right._count:0)}function VD(f,c){this._compare=f;this.root=c}function zT(f,c){if(c.left){var h=zT(f,c.left);if(h)return h}if(h=f(c.key,c.value))return h;if(c.right)return zT(f,c.right)}function AT(f,c,h,e){if(0>=c(f,e.key)){if(e.left){var k=AT(f,c,h,e.left);if(k)return k}if(k=h(e.key,e.value))return k}if(e.right)return AT(f,c,h,e.right)}function BT(f,c,h,e,k){var n=h(f,k.key),b=h(c,k.key);if(0>=n&&
(k.left&&(n=BT(f,c,h,e,k.left))||0<b&&(n=e(k.key,k.value))))return n;if(0<b&&k.right)return BT(f,c,h,e,k.right)}function Jq(f,c){this.tree=f;this._stack=c}function o7(f,c){f.key=c.key;f.value=c.value;f.left=c.left;f.right=c.right;f._color=c._color;f._count=c._count}function Fka(f,c){return f<c?-1:f>c?1:0}function p7(f,c){for(var h in f)c[h]=f[h]}function WD(f,c,h){return Vw(f,c,h)}function Gka(f){return 0<Kq.compare(f,(this||jg)._end)}function Hka(f){return 0<=Kq.compare(f,(this||jg)._end)}function Ika(f){return 0>
Kq.compare(f,(this||jg)._end)}function Jka(f){return 0>=Kq.compare(f,(this||jg)._end)}function OL(f,c){q7.call(this||jg,f);(this||jg)._limit=c.limit;-1===(this||jg)._limit&&((this||jg)._limit=Infinity);f=f._store[f._location];(this||jg).keyAsBuffer=!1!==c.keyAsBuffer;(this||jg).valueAsBuffer=!1!==c.valueAsBuffer;(this||jg)._reverse=c.reverse;(this||jg)._options=c;(this||jg)._done=0;(this||jg)._reverse?((this||jg)._incr="prev",(this||jg)._start=Kq.upperBound(c),(this||jg)._end=Kq.lowerBound(c),"undefined"===
typeof(this||jg)._start?(this||jg)._tree=f.end:Kq.upperBoundInclusive(c)?(this||jg)._tree=f.le((this||jg)._start):(this||jg)._tree=f.lt((this||jg)._start),(this||jg)._end&&(Kq.lowerBoundInclusive(c)?(this||jg)._test=Hka:(this||jg)._test=Gka)):((this||jg)._incr="next",(this||jg)._start=Kq.lowerBound(c),(this||jg)._end=Kq.upperBound(c),"undefined"===typeof(this||jg)._start?(this||jg)._tree=f.begin:Kq.lowerBoundInclusive(c)?(this||jg)._tree=f.ge((this||jg)._start):(this||jg)._tree=f.gt((this||jg)._start),
(this||jg)._end&&(Kq.upperBoundInclusive(c)?(this||jg)._test=Jka:(this||jg)._test=Ika))}function $p(f){if(!((this||jg)instanceof $p))return new $p(f);r7.call(this||jg,"string"===typeof f?f:"");(this||jg)._location=(this||jg).location?"$"+(this||jg).location:"_tree";(this||jg)._store=(this||jg).location?XD:this||jg;(this||jg)._store[(this||jg)._location]=(this||jg)._store[(this||jg)._location]||Kka(Kq.compare)}function s7(f){return f&&"object"===typeof f&&"default"in f?f["default"]:f}function CT(f,
c){f=Lka.assign({db:Mka},f);Nka.call(this,f,c)}function DT(f){f.__serialize__=function(){return{__expr__:'({type: "'+f.type+'", name: "'+f.name+'", _id: "'+f._id+'"})'}};return f}function UG(f){var c,h,e,k,n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(!f)return m.return(!1);if(f&&f._rev)return m.return(f);c=f;h=c.type;e=c.name;k=c._id;n=Object;b=n.assign;d=f;return m.yield(Ih.MorphicDB.default.fetchCommit(h,e,k),2)}b.call(n,d,m.yieldResult);return m.return(f)})}
function t7(){function f(c){(this||Oka).options=c||{}}if(u7)return ET;u7=!0;ET=f;f.prototype.emit=function(c){return c};f.prototype.visit=function(c){return this[c.type](c)};f.prototype.mapVisit=function(c,h){var e="";h=h||"";for(var k=0,n=c.length;k<n;k++)e+=this.visit(c[k]),h&&k<n-1&&(e+=this.emit(h));return e};return ET}function v7(){if(w7)return x7;w7=!0;return x7="function"===typeof Object.create?function(f,c){c&&(f.super_=c,f.prototype=Object.create(c.prototype,{constructor:{value:f,enumerable:!1,
writable:!0,configurable:!0}}))}:function(f,c){if(c){f.super_=c;var h=function(){};h.prototype=c.prototype;f.prototype=new h;f.prototype.constructor=f}}}function Pka(){function f(e){c.call(this||FT,e)}if(y7)return GT;y7=!0;var c=t7(),h=v7();GT=f;h(f,c);f.prototype.compile=function(e){return e.stylesheet.rules.map((this||FT).visit,this||FT).join("")};f.prototype.comment=function(e){return this.emit("",e.position)};f.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)};
f.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")};f.prototype.document=function(e){return this.emit("@"+(e.vendor||"")+"document "+e.document,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")};f.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)};f.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)};f.prototype.supports=function(e){return this.emit("@supports "+
e.supports,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")};f.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit("{")+this.mapVisit(e.keyframes)+this.emit("}")};f.prototype.keyframe=function(e){var k=e.declarations;return this.emit(e.values.join(","),e.position)+this.emit("{")+this.mapVisit(k)+this.emit("}")};f.prototype.page=function(e){var k=e.selectors.length?e.selectors.join(", "):"";return this.emit("@page "+k,e.position)+
this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")};f.prototype["font-face"]=function(e){return this.emit("@font-face",e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")};f.prototype.host=function(e){return this.emit("@host",e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")};f.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)};f.prototype.rule=function(e){var k=e.declarations;return k.length?this.emit(e.selectors.join(","),
e.position)+this.emit("{")+this.mapVisit(k)+this.emit("}"):""};f.prototype.declaration=function(e){return this.emit(e.property+":"+e.value,e.position)+this.emit(";")};return GT}function Qka(){function f(e){e=e||{};c.call(this||Oy,e);(this||Oy).indentation=e.indent}if(z7)return HT;z7=!0;var c=t7(),h=v7();HT=f;h(f,c);f.prototype.compile=function(e){return this.stylesheet(e)};f.prototype.stylesheet=function(e){return this.mapVisit(e.stylesheet.rules,"\n\n")};f.prototype.comment=function(e){return this.emit(this.indent()+
"/*"+e.comment+"*/",e.position)};f.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)};f.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.document=function(e){return this.emit("@"+(e.vendor||"")+"document "+e.document,e.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.charset=
function(e){return this.emit("@charset "+e.charset+";",e.position)};f.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)};f.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.keyframes,
"\n")+this.emit(this.indent(-1)+"}")};f.prototype.keyframe=function(e){var k=e.declarations;return this.emit(this.indent())+this.emit(e.values.join(", "),e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(k,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};f.prototype.page=function(e){var k=e.selectors.length?e.selectors.join(", ")+" ":"";return this.emit("@page "+k,e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+
this.emit("\n}")};f.prototype["font-face"]=function(e){return this.emit("@font-face ",e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};f.prototype.host=function(e){return this.emit("@host",e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};f.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)};f.prototype.rule=
function(e){var k=this.indent(),n=e.declarations;return n.length?this.emit(e.selectors.map(function(b){return k+b}).join(",\n"),e.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(n,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};f.prototype.declaration=function(e){return this.emit(this.indent())+this.emit(e.property+": "+e.value,e.position)+this.emit(";")};f.prototype.indent=function(e){(this||Oy).level=(this||Oy).level||1;return null!=e?((this||Oy).level+=
e,""):Array((this||Oy).level).join((this||Oy).indentation||"  ")};return HT}function Rka(){if(A7)return PL;A7=!0;var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");PL.encode=function(c){if(0<=c&&c<f.length)return f[c];throw new TypeError("Must be between 0 and 63: "+c);};PL.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};return PL}function B7(){if(C7)return QL;C7=!0;var f=Rka();QL.encode=function(c){var h=
"",e=0>c?(-c<<1)+1:c<<1;do c=e&31,e>>>=5,0<e&&(c|=32),h+=f.encode(c);while(0<e);return h};QL.decode=function(c,h,e){var k=c.length,n=0,b=0;do{if(h>=k)throw Error("Expected more digits in base 64 VLQ value.");var d=f.decode(c.charCodeAt(h++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(h-1));var m=!!(d&32);d&=31;n+=d<<b;b+=5}while(m);c=n>>1;e.value=1===(n&1)?-c:c;e.rest=h};return QL}function VG(){function f(r){return(r=r.match(a))?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}
function c(r){var v="";r.scheme&&(v+=r.scheme+":");v+="//";r.auth&&(v+=r.auth+"@");r.host&&(v+=r.host);r.port&&(v+=":"+r.port);r.path&&(v+=r.path);return v}function h(r){var v=r,y=f(r);if(y){if(!y.path)return r;v=y.path}r=jo.isAbsolute(v);v=v.split(/\/+/);for(var A,E=0,F=v.length-1;0<=F;F--)A=v[F],"."===A?v.splice(F,1):".."===A?E++:0<E&&(""===A?(v.splice(F+1,E),E=0):(v.splice(F,2),E--));v=v.join("/");""===v&&(v=r?"/":".");return y?(y.path=v,c(y)):v}function e(r,v){""===r&&(r=".");""===v&&(v=".");
var y=f(v),A=f(r);A&&(r=A.path||"/");if(y&&!y.scheme)return A&&(y.scheme=A.scheme),c(y);if(y||v.match(g))return v;if(A&&!A.host&&!A.path)return A.host=v,c(A);r="/"===v.charAt(0)?v:h(r.replace(/\/+$/,"")+"/"+v);return A?(A.path=r,c(A)):r}function k(r){return r}function n(r){return d(r)?"$"+r:r}function b(r){return d(r)?r.slice(1):r}function d(r){if(!r)return!1;var v=r.length;if(9>v||95!==r.charCodeAt(v-1)||95!==r.charCodeAt(v-2)||111!==r.charCodeAt(v-3)||116!==r.charCodeAt(v-4)||111!==r.charCodeAt(v-
5)||114!==r.charCodeAt(v-6)||112!==r.charCodeAt(v-7)||95!==r.charCodeAt(v-8)||95!==r.charCodeAt(v-9))return!1;for(v-=10;0<=v;v--)if(36!==r.charCodeAt(v))return!1;return!0}function m(r,v){return r===v?0:null===r?1:null===v?-1:r>v?1:-1}if(D7)return jo;D7=!0;jo.getArg=function(r,v,y){if(v in r)return r[v];if(3===arguments.length)return y;throw Error('"'+v+'" is a required argument.');};var a=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,g=/^data:.+,.+$/;jo.urlParse=f;jo.urlGenerate=
c;jo.normalize=h;jo.join=e;jo.isAbsolute=function(r){return"/"===r.charAt(0)||a.test(r)};jo.relative=function(r,v){""===r&&(r=".");r=r.replace(/\/$/,"");for(var y=0;0!==v.indexOf(r+"/");){var A=r.lastIndexOf("/");if(0>A)return v;r=r.slice(0,A);if(r.match(/^([^\/]+:\/)?\/*$/))return v;++y}return Array(y+1).join("../")+v.substr(r.length+1)};var l=!("__proto__"in Object.create(null));jo.toSetString=l?k:n;jo.fromSetString=l?k:b;jo.compareByOriginalPositions=function(r,v,y){var A=m(r.source,v.source);
if(0!==A)return A;A=r.originalLine-v.originalLine;if(0!==A)return A;A=r.originalColumn-v.originalColumn;if(0!==A||y)return A;A=r.generatedColumn-v.generatedColumn;if(0!==A)return A;A=r.generatedLine-v.generatedLine;return 0!==A?A:m(r.name,v.name)};jo.compareByGeneratedPositionsDeflated=function(r,v,y){var A=r.generatedLine-v.generatedLine;if(0!==A)return A;A=r.generatedColumn-v.generatedColumn;if(0!==A||y)return A;A=m(r.source,v.source);if(0!==A)return A;A=r.originalLine-v.originalLine;if(0!==A)return A;
A=r.originalColumn-v.originalColumn;return 0!==A?A:m(r.name,v.name)};jo.compareByGeneratedPositionsInflated=function(r,v){var y=r.generatedLine-v.generatedLine;if(0!==y)return y;y=r.generatedColumn-v.generatedColumn;if(0!==y)return y;y=m(r.source,v.source);if(0!==y)return y;y=r.originalLine-v.originalLine;if(0!==y)return y;y=r.originalColumn-v.originalColumn;return 0!==y?y:m(r.name,v.name)};jo.parseSourceMapInput=function(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))};jo.computeSourceURL=function(r,
v,y){v=v||"";r&&("/"!==r[r.length-1]&&"/"!==v[0]&&(r+="/"),v=r+v);if(y){r=f(y);if(!r)throw Error("sourceMapURL could not be parsed");r.path&&(y=r.path.lastIndexOf("/"),0<=y&&(r.path=r.path.substring(0,y+1)));v=e(c(r),v)}return h(v)};return jo}function E7(){function f(){(this||ko)._array=[];(this||ko)._set=e?new Map:Object.create(null)}if(F7)return IT;F7=!0;var c=VG(),h=Object.prototype.hasOwnProperty,e="undefined"!==typeof Map;f.fromArray=function(k,n){for(var b=new f,d=0,m=k.length;d<m;d++)b.add(k[d],
n);return b};f.prototype.size=function(){return e?(this||ko)._set.size:Object.getOwnPropertyNames((this||ko)._set).length};f.prototype.add=function(k,n){var b=e?k:c.toSetString(k),d=e?this.has(k):h.call((this||ko)._set,b),m=(this||ko)._array.length;d&&!n||(this||ko)._array.push(k);d||(e?(this||ko)._set.set(k,m):(this||ko)._set[b]=m)};f.prototype.has=function(k){if(e)return(this||ko)._set.has(k);k=c.toSetString(k);return h.call((this||ko)._set,k)};f.prototype.indexOf=function(k){if(e){var n=(this||
ko)._set.get(k);if(0<=n)return n}else if(n=c.toSetString(k),h.call((this||ko)._set,n))return(this||ko)._set[n];throw Error('"'+k+'" is not in the set.');};f.prototype.at=function(k){if(0<=k&&k<(this||ko)._array.length)return(this||ko)._array[k];throw Error("No element indexed by "+k);};f.prototype.toArray=function(){return(this||ko)._array.slice()};IT.ArraySet=f;return IT}function Ska(){function f(){(this||Wr)._array=[];(this||Wr)._sorted=!0;(this||Wr)._last={generatedLine:-1,generatedColumn:0}}if(G7)return JT;
G7=!0;var c=VG();f.prototype.unsortedForEach=function(h,e){(this||Wr)._array.forEach(h,e)};f.prototype.add=function(h){var e=(this||Wr)._last,k=e.generatedLine,n=h.generatedLine,b=e.generatedColumn,d=h.generatedColumn;n>k||n==k&&d>=b||0>=c.compareByGeneratedPositionsInflated(e,h)?(this||Wr)._last=h:(this||Wr)._sorted=!1;(this||Wr)._array.push(h)};f.prototype.toArray=function(){(this||Wr)._sorted||((this||Wr)._array.sort(c.compareByGeneratedPositionsInflated),(this||Wr)._sorted=!0);return(this||Wr)._array};
JT.MappingList=f;return JT}function H7(){function f(n){n||(n={});(this||Qi)._file=h.getArg(n,"file",null);(this||Qi)._sourceRoot=h.getArg(n,"sourceRoot",null);(this||Qi)._skipValidation=h.getArg(n,"skipValidation",!1);(this||Qi)._sources=new e;(this||Qi)._names=new e;(this||Qi)._mappings=new k;(this||Qi)._sourcesContents=null}if(I7)return KT;I7=!0;var c=B7(),h=VG(),e=E7().ArraySet,k=Ska().MappingList;f.prototype._version=3;f.fromSourceMap=function(n){var b=n.sourceRoot,d=new f({file:n.file,sourceRoot:b});
n.eachMapping(function(m){var a={generated:{line:m.generatedLine,column:m.generatedColumn}};null!=m.source&&(a.source=m.source,null!=b&&(a.source=h.relative(b,a.source)),a.original={line:m.originalLine,column:m.originalColumn},null!=m.name&&(a.name=m.name));d.addMapping(a)});n.sources.forEach(function(m){var a=m;null!==b&&(a=h.relative(b,m));d._sources.has(a)||d._sources.add(a);a=n.sourceContentFor(m);null!=a&&d.setSourceContent(m,a)});return d};f.prototype.addMapping=function(n){var b=h.getArg(n,
"generated"),d=h.getArg(n,"original",null),m=h.getArg(n,"source",null);n=h.getArg(n,"name",null);(this||Qi)._skipValidation||this._validateMapping(b,d,m,n);null!=m&&(m=String(m),(this||Qi)._sources.has(m)||(this||Qi)._sources.add(m));null!=n&&(n=String(n),(this||Qi)._names.has(n)||(this||Qi)._names.add(n));(this||Qi)._mappings.add({generatedLine:b.line,generatedColumn:b.column,originalLine:null!=d&&d.line,originalColumn:null!=d&&d.column,source:m,name:n})};f.prototype.setSourceContent=function(n,
b){null!=(this||Qi)._sourceRoot&&(n=h.relative((this||Qi)._sourceRoot,n));null!=b?((this||Qi)._sourcesContents||((this||Qi)._sourcesContents=Object.create(null)),(this||Qi)._sourcesContents[h.toSetString(n)]=b):(this||Qi)._sourcesContents&&(delete (this||Qi)._sourcesContents[h.toSetString(n)],0===Object.keys((this||Qi)._sourcesContents).length&&((this||Qi)._sourcesContents=null))};f.prototype.applySourceMap=function(n,b,d){var m=b;if(null==b){if(null==n.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');
m=n.file}var a=(this||Qi)._sourceRoot;null!=a&&(m=h.relative(a,m));var g=new e,l=new e;(this||Qi)._mappings.unsortedForEach(function(r){if(r.source===m&&null!=r.originalLine){var v=n.originalPositionFor({line:r.originalLine,column:r.originalColumn});null!=v.source&&(r.source=v.source,null!=d&&(r.source=h.join(d,r.source)),null!=a&&(r.source=h.relative(a,r.source)),r.originalLine=v.line,r.originalColumn=v.column,null!=v.name&&(r.name=v.name))}v=r.source;null==v||g.has(v)||g.add(v);r=r.name;null==r||
l.has(r)||l.add(r)},this||Qi);(this||Qi)._sources=g;(this||Qi)._names=l;n.sources.forEach(function(r){var v=n.sourceContentFor(r);null!=v&&(null!=d&&(r=h.join(d,r)),null!=a&&(r=h.relative(a,r)),this.setSourceContent(r,v))},this||Qi)};f.prototype._validateMapping=function(n,b,d,m){if(b&&"number"!==typeof b.line&&"number"!==typeof b.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");
if(!(n&&"line"in n&&"column"in n&&0<n.line&&0<=n.column&&!b&&!d&&!m||n&&"line"in n&&"column"in n&&b&&"line"in b&&"column"in b&&0<n.line&&0<=n.column&&0<b.line&&0<=b.column&&d))throw Error("Invalid mapping: "+JSON.stringify({generated:n,source:d,original:b,name:m}));};f.prototype._serializeMappings=function(){for(var n=0,b=1,d=0,m=0,a=0,g=0,l="",r,v,y,A=(this||Qi)._mappings.toArray(),E=0,F=A.length;E<F;E++){v=A[E];r="";if(v.generatedLine!==b)for(n=0;v.generatedLine!==b;)r+=";",b++;else if(0<E){if(!h.compareByGeneratedPositionsInflated(v,
A[E-1]))continue;r+=","}r+=c.encode(v.generatedColumn-n);n=v.generatedColumn;null!=v.source&&(y=(this||Qi)._sources.indexOf(v.source),r+=c.encode(y-g),g=y,r+=c.encode(v.originalLine-1-m),m=v.originalLine-1,r+=c.encode(v.originalColumn-d),d=v.originalColumn,null!=v.name&&(v=(this||Qi)._names.indexOf(v.name),r+=c.encode(v-a),a=v));l+=r}return l};f.prototype._generateSourcesContent=function(n,b){return n.map(function(d){if(!(this||Qi)._sourcesContents)return null;null!=b&&(d=h.relative(b,d));d=h.toSetString(d);
return Object.prototype.hasOwnProperty.call((this||Qi)._sourcesContents,d)?(this||Qi)._sourcesContents[d]:null},this||Qi)};f.prototype.toJSON=function(){var n={version:(this||Qi)._version,sources:(this||Qi)._sources.toArray(),names:(this||Qi)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Qi)._file&&(n.file=(this||Qi)._file);null!=(this||Qi)._sourceRoot&&(n.sourceRoot=(this||Qi)._sourceRoot);(this||Qi)._sourcesContents&&(n.sourcesContent=this._generateSourcesContent(n.sources,n.sourceRoot));
return n};f.prototype.toString=function(){return JSON.stringify(this.toJSON())};KT.SourceMapGenerator=f;return KT}function Tka(){function f(c,h,e,k,n,b){var d=Math.floor((h-c)/2)+c,m=n(e,k[d],!0);return 0===m?d:0<m?1<h-d?f(d,h,e,k,n,b):b==Py.LEAST_UPPER_BOUND?h<k.length?h:-1:d:1<d-c?f(c,d,e,k,n,b):b==Py.LEAST_UPPER_BOUND?d:0>c?-1:c}if(J7)return Py;J7=!0;Py.GREATEST_LOWER_BOUND=1;Py.LEAST_UPPER_BOUND=2;Py.search=function(c,h,e,k){if(0===h.length)return-1;c=f(-1,h.length,c,h,e,k||Py.GREATEST_LOWER_BOUND);
if(0>c)return-1;for(;0<=c-1&&0===e(h[c],h[c-1],!0);)--c;return c};return Py}function Uka(){function f(h,e,k){var n=h[e];h[e]=h[k];h[k]=n}function c(h,e,k,n){if(k<n){var b=k-1;f(h,Math.round(k+Math.random()*(n-k)),n);for(var d=h[n],m=k;m<n;m++)0>=e(h[m],d)&&(b+=1,f(h,b,m));f(h,b+1,m);b+=1;c(h,e,k,b-1);c(h,e,b+1,n)}}if(K7)return LT;K7=!0;LT.quickSort=function(h,e){c(h,e,0,h.length-1)};return LT}function Vka(){function f(a,g){var l=a;"string"===typeof a&&(l=k.parseSourceMapInput(a));return null!=l.sections?
new e(l,g):new c(l,g)}function c(a,g){var l=a;"string"===typeof a&&(l=k.parseSourceMapInput(a));a=k.getArg(l,"version");var r=k.getArg(l,"sources"),v=k.getArg(l,"names",[]),y=k.getArg(l,"sourceRoot",null),A=k.getArg(l,"sourcesContent",null),E=k.getArg(l,"mappings");l=k.getArg(l,"file",null);if(a!=(this||tf)._version)throw Error("Unsupported version: "+a);y&&(y=k.normalize(y));r=r.map(String).map(k.normalize).map(function(F){return y&&k.isAbsolute(y)&&k.isAbsolute(F)?k.relative(y,F):F});(this||tf)._names=
b.fromArray(v.map(String),!0);(this||tf)._sources=b.fromArray(r,!0);(this||tf)._absoluteSources=(this||tf)._sources.toArray().map(function(F){return k.computeSourceURL(y,F,g)});(this||tf).sourceRoot=y;(this||tf).sourcesContent=A;(this||tf)._mappings=E;(this||tf)._sourceMapURL=g;(this||tf).file=l}function h(){(this||tf).generatedLine=0;(this||tf).generatedColumn=0;(this||tf).source=null;(this||tf).originalLine=null;(this||tf).originalColumn=null;(this||tf).name=null}function e(a,g){var l=a;"string"===
typeof a&&(l=k.parseSourceMapInput(a));a=k.getArg(l,"version");l=k.getArg(l,"sections");if(a!=(this||tf)._version)throw Error("Unsupported version: "+a);(this||tf)._sources=new b;(this||tf)._names=new b;var r={line:-1,column:0};(this||tf)._sections=l.map(function(v){if(v.url)throw Error("Support for url field in sections not implemented.");var y=k.getArg(v,"offset"),A=k.getArg(y,"line"),E=k.getArg(y,"column");if(A<r.line||A===r.line&&E<r.column)throw Error("Section offsets must be ordered and non-overlapping.");
r=y;return{generatedOffset:{generatedLine:A+1,generatedColumn:E+1},consumer:new f(k.getArg(v,"map"),g)}})}if(L7)return WG;L7=!0;var k=VG(),n=Tka(),b=E7().ArraySet,d=B7(),m=Uka().quickSort;f.fromSourceMap=function(a,g){return c.fromSourceMap(a,g)};f.prototype._version=3;f.prototype.__generatedMappings=null;Object.defineProperty(f.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){(this||tf).__generatedMappings||this._parseMappings((this||tf)._mappings,(this||tf).sourceRoot);
return(this||tf).__generatedMappings}});f.prototype.__originalMappings=null;Object.defineProperty(f.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||tf).__originalMappings||this._parseMappings((this||tf)._mappings,(this||tf).sourceRoot);return(this||tf).__originalMappings}});f.prototype._charIsMappingSeparator=function(a,g){a=a.charAt(g);return";"===a||","===a};f.prototype._parseMappings=function(a,g){throw Error("Subclasses must implement _parseMappings");};f.GENERATED_ORDER=
1;f.ORIGINAL_ORDER=2;f.GREATEST_LOWER_BOUND=1;f.LEAST_UPPER_BOUND=2;f.prototype.eachMapping=function(a,g,l){g=g||null;switch(l||f.GENERATED_ORDER){case f.GENERATED_ORDER:l=(this||tf)._generatedMappings;break;case f.ORIGINAL_ORDER:l=(this||tf)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var r=(this||tf).sourceRoot;l.map(function(v){var y=null===v.source?null:(this||tf)._sources.at(v.source);y=k.computeSourceURL(r,y,(this||tf)._sourceMapURL);return{source:y,generatedLine:v.generatedLine,
generatedColumn:v.generatedColumn,originalLine:v.originalLine,originalColumn:v.originalColumn,name:null===v.name?null:(this||tf)._names.at(v.name)}},this||tf).forEach(a,g)};f.prototype.allGeneratedPositionsFor=function(a){var g=k.getArg(a,"line"),l={source:k.getArg(a,"source"),originalLine:g,originalColumn:k.getArg(a,"column",0)};l.source=this._findSourceIndex(l.source);if(0>l.source)return[];var r=[];l=this._findMapping(l,(this||tf)._originalMappings,"originalLine","originalColumn",k.compareByOriginalPositions,
n.LEAST_UPPER_BOUND);if(0<=l){var v=(this||tf)._originalMappings[l];if(void 0===a.column)for(g=v.originalLine;v&&v.originalLine===g;)r.push({line:k.getArg(v,"generatedLine",null),column:k.getArg(v,"generatedColumn",null),lastColumn:k.getArg(v,"lastGeneratedColumn",null)}),v=(this||tf)._originalMappings[++l];else for(a=v.originalColumn;v&&v.originalLine===g&&v.originalColumn==a;)r.push({line:k.getArg(v,"generatedLine",null),column:k.getArg(v,"generatedColumn",null),lastColumn:k.getArg(v,"lastGeneratedColumn",
null)}),v=(this||tf)._originalMappings[++l]}return r};WG.SourceMapConsumer=f;c.prototype=Object.create(f.prototype);c.prototype.consumer=f;c.prototype._findSourceIndex=function(a){var g=a;null!=(this||tf).sourceRoot&&(g=k.relative((this||tf).sourceRoot,g));if((this||tf)._sources.has(g))return(this||tf)._sources.indexOf(g);for(g=0;g<(this||tf)._absoluteSources.length;++g)if((this||tf)._absoluteSources[g]==a)return g;return-1};c.fromSourceMap=function(a,g){var l=Object.create(c.prototype),r=l._names=
b.fromArray(a._names.toArray(),!0),v=l._sources=b.fromArray(a._sources.toArray(),!0);l.sourceRoot=a._sourceRoot;l.sourcesContent=a._generateSourcesContent(l._sources.toArray(),l.sourceRoot);l.file=a._file;l._sourceMapURL=g;l._absoluteSources=l._sources.toArray().map(function(M){return k.computeSourceURL(l.sourceRoot,M,g)});a=a._mappings.toArray().slice();for(var y=l.__generatedMappings=[],A=l.__originalMappings=[],E=0,F=a.length;E<F;E++){var G=a[E],I=new h;I.generatedLine=G.generatedLine;I.generatedColumn=
G.generatedColumn;G.source&&(I.source=v.indexOf(G.source),I.originalLine=G.originalLine,I.originalColumn=G.originalColumn,G.name&&(I.name=r.indexOf(G.name)),A.push(I));y.push(I)}m(l.__originalMappings,k.compareByOriginalPositions);return l};c.prototype._version=3;Object.defineProperty(c.prototype,"sources",{get:function(){return(this||tf)._absoluteSources.slice()}});c.prototype._parseMappings=function(a,g){g=1;for(var l=0,r=0,v=0,y=0,A=0,E=a.length,F=0,G={},I={},M=[],L=[],S,R,aa,ra,Ea;F<E;)if(";"===
a.charAt(F))g++,F++,l=0;else if(","===a.charAt(F))F++;else{S=new h;S.generatedLine=g;for(ra=F;ra<E&&!this._charIsMappingSeparator(a,ra);ra++);R=a.slice(F,ra);if(aa=G[R])F+=R.length;else{for(aa=[];F<ra;)d.decode(a,F,I),Ea=I.value,F=I.rest,aa.push(Ea);if(2===aa.length)throw Error("Found a source, but no line and column");if(3===aa.length)throw Error("Found a source and line, but no column");G[R]=aa}S.generatedColumn=l+aa[0];l=S.generatedColumn;1<aa.length&&(S.source=y+aa[1],y+=aa[1],S.originalLine=
r+aa[2],r=S.originalLine,S.originalLine+=1,S.originalColumn=v+aa[3],v=S.originalColumn,4<aa.length&&(S.name=A+aa[4],A+=aa[4]));L.push(S);"number"===typeof S.originalLine&&M.push(S)}m(L,k.compareByGeneratedPositionsDeflated);(this||tf).__generatedMappings=L;m(M,k.compareByOriginalPositions);(this||tf).__originalMappings=M};c.prototype._findMapping=function(a,g,l,r,v,y){if(0>=a[l])throw new TypeError("Line must be greater than or equal to 1, got "+a[l]);if(0>a[r])throw new TypeError("Column must be greater than or equal to 0, got "+
a[r]);return n.search(a,g,v,y)};c.prototype.computeColumnSpans=function(){for(var a=0;a<(this||tf)._generatedMappings.length;++a){var g=(this||tf)._generatedMappings[a];if(a+1<(this||tf)._generatedMappings.length){var l=(this||tf)._generatedMappings[a+1];if(g.generatedLine===l.generatedLine){g.lastGeneratedColumn=l.generatedColumn-1;continue}}g.lastGeneratedColumn=Infinity}};c.prototype.originalPositionFor=function(a){var g={generatedLine:k.getArg(a,"line"),generatedColumn:k.getArg(a,"column")};a=
this._findMapping(g,(this||tf)._generatedMappings,"generatedLine","generatedColumn",k.compareByGeneratedPositionsDeflated,k.getArg(a,"bias",f.GREATEST_LOWER_BOUND));if(0<=a&&(a=(this||tf)._generatedMappings[a],a.generatedLine===g.generatedLine)){g=k.getArg(a,"source",null);null!==g&&(g=(this||tf)._sources.at(g),g=k.computeSourceURL((this||tf).sourceRoot,g,(this||tf)._sourceMapURL));var l=k.getArg(a,"name",null);null!==l&&(l=(this||tf)._names.at(l));return{source:g,line:k.getArg(a,"originalLine",null),
column:k.getArg(a,"originalColumn",null),name:l}}return{source:null,line:null,column:null,name:null}};c.prototype.hasContentsOfAllSources=function(){return(this||tf).sourcesContent?(this||tf).sourcesContent.length>=(this||tf)._sources.size()&&!(this||tf).sourcesContent.some(function(a){return null==a}):!1};c.prototype.sourceContentFor=function(a,g){if(!(this||tf).sourcesContent)return null;var l=this._findSourceIndex(a);if(0<=l)return(this||tf).sourcesContent[l];null!=(this||tf).sourceRoot&&(a=k.relative((this||
tf).sourceRoot,a));var r;if(null!=(this||tf).sourceRoot&&(r=k.urlParse((this||tf).sourceRoot))){l=a.replace(/^file:\/\//,"");if("file"==r.scheme&&(this||tf)._sources.has(l))return(this||tf).sourcesContent[(this||tf)._sources.indexOf(l)];if((!r.path||"/"==r.path)&&(this||tf)._sources.has("/"+a))return(this||tf).sourcesContent[(this||tf)._sources.indexOf("/"+a)]}if(g)return null;throw Error('"'+a+'" is not in the SourceMap.');};c.prototype.generatedPositionFor=function(a){var g=k.getArg(a,"source");
g=this._findSourceIndex(g);if(0>g)return{line:null,column:null,lastColumn:null};g={source:g,originalLine:k.getArg(a,"line"),originalColumn:k.getArg(a,"column")};a=this._findMapping(g,(this||tf)._originalMappings,"originalLine","originalColumn",k.compareByOriginalPositions,k.getArg(a,"bias",f.GREATEST_LOWER_BOUND));return 0<=a&&(a=(this||tf)._originalMappings[a],a.source===g.source)?{line:k.getArg(a,"generatedLine",null),column:k.getArg(a,"generatedColumn",null),lastColumn:k.getArg(a,"lastGeneratedColumn",
null)}:{line:null,column:null,lastColumn:null}};WG.BasicSourceMapConsumer=c;e.prototype=Object.create(f.prototype);e.prototype.constructor=f;e.prototype._version=3;Object.defineProperty(e.prototype,"sources",{get:function(){for(var a=[],g=0;g<(this||tf)._sections.length;g++)for(var l=0;l<(this||tf)._sections[g].consumer.sources.length;l++)a.push((this||tf)._sections[g].consumer.sources[l]);return a}});e.prototype.originalPositionFor=function(a){var g={generatedLine:k.getArg(a,"line"),generatedColumn:k.getArg(a,
"column")},l=n.search(g,(this||tf)._sections,function(r,v){var y=r.generatedLine-v.generatedOffset.generatedLine;return y?y:r.generatedColumn-v.generatedOffset.generatedColumn});return(l=(this||tf)._sections[l])?l.consumer.originalPositionFor({line:g.generatedLine-(l.generatedOffset.generatedLine-1),column:g.generatedColumn-(l.generatedOffset.generatedLine===g.generatedLine?l.generatedOffset.generatedColumn-1:0),bias:a.bias}):{source:null,line:null,column:null,name:null}};e.prototype.hasContentsOfAllSources=
function(){return(this||tf)._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})};e.prototype.sourceContentFor=function(a,g){for(var l=0;l<(this||tf)._sections.length;l++){var r=(this||tf)._sections[l].consumer.sourceContentFor(a,!0);if(r)return r}if(g)return null;throw Error('"'+a+'" is not in the SourceMap.');};e.prototype.generatedPositionFor=function(a){for(var g=0;g<(this||tf)._sections.length;g++){var l=(this||tf)._sections[g];if(-1!==l.consumer._findSourceIndex(k.getArg(a,
"source"))){var r=l.consumer.generatedPositionFor(a);if(r)return{line:r.line+(l.generatedOffset.generatedLine-1),column:r.column+(l.generatedOffset.generatedLine===r.line?l.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};e.prototype._parseMappings=function(a,g){(this||tf).__generatedMappings=[];(this||tf).__originalMappings=[];for(a=0;a<(this||tf)._sections.length;a++){g=(this||tf)._sections[a];for(var l=g.consumer._generatedMappings,r=0;r<l.length;r++){var v=l[r],y=g.consumer._sources.at(v.source);
y=k.computeSourceURL(g.consumer.sourceRoot,y,(this||tf)._sourceMapURL);(this||tf)._sources.add(y);y=(this||tf)._sources.indexOf(y);var A=null;v.name&&(A=g.consumer._names.at(v.name),(this||tf)._names.add(A),A=(this||tf)._names.indexOf(A));v={source:y,generatedLine:v.generatedLine+(g.generatedOffset.generatedLine-1),generatedColumn:v.generatedColumn+(g.generatedOffset.generatedLine===v.generatedLine?g.generatedOffset.generatedColumn-1:0),originalLine:v.originalLine,originalColumn:v.originalColumn,
name:A};(this||tf).__generatedMappings.push(v);"number"===typeof v.originalLine&&(this||tf).__originalMappings.push(v)}}m((this||tf).__generatedMappings,k.compareByGeneratedPositionsDeflated);m((this||tf).__originalMappings,k.compareByOriginalPositions)};WG.IndexedSourceMapConsumer=e;return WG}function Wka(){function f(k,n,b,d,m){(this||Jj).children=[];(this||Jj).sourceContents={};(this||Jj).line=null==k?null:k;(this||Jj).column=null==n?null:n;(this||Jj).source=null==b?null:b;(this||Jj).name=null==
m?null:m;(this||Jj).$$$isSourceNode$$$=!0;null!=d&&this.add(d)}if(M7)return MT;M7=!0;var c=H7().SourceMapGenerator,h=VG(),e=/(\r?\n)/;f.fromStringWithSourceMap=function(k,n,b){function d(A,E){if(null===A||void 0===A.source)m.add(E);else{var F=b?h.join(b,A.source):A.source;m.add(new f(A.originalLine,A.originalColumn,F,E,A.name))}}var m=new f,a=k.split(e),g=0,l=function(){var A=g<a.length?a[g++]:void 0,E=(g<a.length?a[g++]:void 0)||"";return A+E},r=1,v=0,y=null;n.eachMapping(function(A){if(null!==y)if(r<
A.generatedLine)d(y,l()),r++,v=0;else{var E=a[g]||"",F=E.substr(0,A.generatedColumn-v);a[g]=E.substr(A.generatedColumn-v);v=A.generatedColumn;d(y,F);y=A;return}for(;r<A.generatedLine;)m.add(l()),r++;v<A.generatedColumn&&(E=a[g]||"",m.add(E.substr(0,A.generatedColumn)),a[g]=E.substr(A.generatedColumn),v=A.generatedColumn);y=A},this||Jj);g<a.length&&(y&&d(y,l()),m.add(a.splice(g).join("")));n.sources.forEach(function(A){var E=n.sourceContentFor(A);null!=E&&(null!=b&&(A=h.join(b,A)),m.setSourceContent(A,
E))});return m};f.prototype.add=function(k){if(Array.isArray(k))k.forEach(function(n){this.add(n)},this||Jj);else if(k.$$$isSourceNode$$$||"string"===typeof k)k&&(this||Jj).children.push(k);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+k);return this||Jj};f.prototype.prepend=function(k){if(Array.isArray(k))for(var n=k.length-1;0<=n;n--)this.prepend(k[n]);else if(k.$$$isSourceNode$$$||"string"===typeof k)(this||Jj).children.unshift(k);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+
k);return this||Jj};f.prototype.walk=function(k){for(var n,b=0,d=(this||Jj).children.length;b<d;b++)n=(this||Jj).children[b],n.$$$isSourceNode$$$?n.walk(k):""!==n&&k(n,{source:(this||Jj).source,line:(this||Jj).line,column:(this||Jj).column,name:(this||Jj).name})};f.prototype.join=function(k){var n,b=(this||Jj).children.length;if(0<b){var d=[];for(n=0;n<b-1;n++)d.push((this||Jj).children[n]),d.push(k);d.push((this||Jj).children[n]);(this||Jj).children=d}return this||Jj};f.prototype.replaceRight=function(k,
n){var b=(this||Jj).children[(this||Jj).children.length-1];b.$$$isSourceNode$$$?b.replaceRight(k,n):"string"===typeof b?(this||Jj).children[(this||Jj).children.length-1]=b.replace(k,n):(this||Jj).children.push("".replace(k,n));return this||Jj};f.prototype.setSourceContent=function(k,n){(this||Jj).sourceContents[h.toSetString(k)]=n};f.prototype.walkSourceContents=function(k){for(var n=0,b=(this||Jj).children.length;n<b;n++)(this||Jj).children[n].$$$isSourceNode$$$&&(this||Jj).children[n].walkSourceContents(k);
var d=Object.keys((this||Jj).sourceContents);n=0;for(b=d.length;n<b;n++)k(h.fromSetString(d[n]),(this||Jj).sourceContents[d[n]])};f.prototype.toString=function(){var k="";this.walk(function(n){k+=n});return k};f.prototype.toStringWithSourceMap=function(k){var n="",b=1,d=0,m=new c(k),a=!1,g=null,l=null,r=null,v=null;this.walk(function(y,A){n+=y;null!==A.source&&null!==A.line&&null!==A.column?(g===A.source&&l===A.line&&r===A.column&&v===A.name||m.addMapping({source:A.source,original:{line:A.line,column:A.column},
generated:{line:b,column:d},name:A.name}),g=A.source,l=A.line,r=A.column,v=A.name,a=!0):a&&(m.addMapping({generated:{line:b,column:d}}),g=null,a=!1);for(var E=0,F=y.length;E<F;E++)10===y.charCodeAt(E)?(b++,d=0,E+1===F?(g=null,a=!1):a&&m.addMapping({source:A.source,original:{line:A.line,column:A.column},generated:{line:b,column:d},name:A.name})):d++});this.walkSourceContents(function(y,A){m.setSourceContent(y,A)});return{code:n,map:m}};MT.SourceNode=f;return MT}function N7(){if(O7)return XG;O7=!0;
XG.SourceMapGenerator=H7().SourceMapGenerator;XG.SourceMapConsumer=Vka().SourceMapConsumer;XG.SourceNode=Wka().SourceNode;return XG}function P7(f){var c=f.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");f=f.indexOf("=");return-1===f&&(f=c),[f,f===c?0:4-f%4]}function Xka(f,c,h){for(var e,k=[],n=c;n<h;n+=3)c=(f[n]<<16&16711680)+(f[n+1]<<8&65280)+(255&f[n+2]),k.push(fv[(e=c)>>18&63]+fv[e>>12&63]+fv[e>>6&63]+fv[63&e]);return k.join("")}function Ww(f){if(2147483647<f)throw new RangeError('The value "'+
f+'" is invalid for option "size"');f=new Uint8Array(f);return Object.setPrototypeOf(f,kf.prototype),f}function kf(f,c,h){if("number"==typeof f){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return NT(f)}return Q7(f,c,h)}function Q7(f,c,h){if("string"==typeof f)return function(k,n){"string"==typeof n&&""!==n||(n="utf8");if(!kf.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|R7(k,n),d=Ww(b);k=d.write(k,n);k!==b&&(d=
d.slice(0,k));return d}(f,c);if(ArrayBuffer.isView(f))return OT(f);if(null==f)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Xw(f,ArrayBuffer)||f&&Xw(f.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Xw(f,SharedArrayBuffer)||f&&Xw(f.buffer,SharedArrayBuffer)))return Yka(f,c,h);if("number"==typeof f)throw new TypeError('The "value" argument must not be of type number. Received type number');
var e=f.valueOf&&f.valueOf();if(null!=e&&e!==f)return kf.from(e,c,h);if(e=function(k){if(kf.isBuffer(k)){var n=0|PT(k.length),b=Ww(n);return 0===b.length||k.copy(b,0,0,n),b}if(void 0!==k.length)return(n="number"!=typeof k.length)||(n=k.length,n=n!=n),n?Ww(0):OT(k);if("Buffer"===k.type&&Array.isArray(k.data))return OT(k.data)}(f))return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof f[Symbol.toPrimitive])return kf.from(f[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof f);}function S7(f){if("number"!=typeof f)throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"');}function NT(f){return S7(f),Ww(0>f?0:0|PT(f))}function OT(f){for(var c=0>f.length?0:0|PT(f.length),h=Ww(c),e=0;e<c;e+=1)h[e]=255&f[e];return h}function Yka(f,c,h){if(0>c||f.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var e;return e=void 0===c&&void 0===h?new Uint8Array(f):void 0===h?new Uint8Array(f,c):new Uint8Array(f,c,h),Object.setPrototypeOf(e,kf.prototype),e}function PT(f){if(2147483647<=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|f}function R7(f,c){if(kf.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Xw(f,ArrayBuffer))return f.byteLength;if("string"!=typeof f)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof f);var h=f.length,e=2<arguments.length&&!0===arguments[2];if(!e&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return QT(f).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return T7(f).length;default:if(k)return e?-1:QT(f).length;c=(""+c).toLowerCase();k=!0}}function Zka(f,c,h){var e=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(f||(f="utf8");;)switch(f){case "hex":f=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>f)&&(h=f);for(f="";c<h;++c)f+=$ka[this[c]];return f;case "utf8":case "utf-8":return U7(this,c,h);case "ascii":f="";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(127&this[c]);return f;case "latin1":case "binary":f="";for(h=Math.min(this.length,h);c<h;++c)f+=String.fromCharCode(this[c]);return f;case "base64":return 0===c&&h===this.length?RT.fromByteArray(this):
RT.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(f=0;f<c.length;f+=2)h+=String.fromCharCode(c[f]+256*c[f+1]);return h;default:if(e)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase();e=!0}}function kB(f,c,h){var e=f[c];f[c]=f[h];f[h]=e}function V7(f,c,h,e,k){if(0===f.length)return-1;"string"==typeof h?(e=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=k?0:f.length-1),0>h&&(h=f.length+
h),h>=f.length){if(k)return-1;h=f.length-1}else if(0>h){if(!k)return-1;h=0}if("string"==typeof c&&(c=kf.from(c,e)),kf.isBuffer(c))return 0===c.length?-1:W7(f,c,h,e,k);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(f,c,h):Uint8Array.prototype.lastIndexOf.call(f,c,h):W7(f,[c],h,e,k);throw new TypeError("val must be string, number or Buffer");}function W7(f,c,h,e,k){function n(a,g){return 1===b?a[g]:a.readUInt16BE(g*b)}var b=1,
d=f.length,m=c.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>f.length||2>c.length)return-1;b=2;d/=2;m/=2;h/=2}if(k)for(e=-1;h<d;h++)if(n(f,h)===n(c,-1===e?0:h-e)){if(-1===e&&(e=h),h-e+1===m)return e*b}else-1!==e&&(h-=h-e),e=-1;else for(h+m>d&&(h=d-m);0<=h;h--){d=!0;for(e=0;e<m;e++)if(n(f,h+e)!==n(c,e)){d=!1;break}if(d)return h}return-1}function X7(f,c,h,e){for(var k=[],n=0;n<c.length;++n)k.push(255&c.charCodeAt(n));return RL(k,f,h,e)}
function U7(f,c,h){h=Math.min(f.length,h);for(var e=[];c<h;){var k,n,b=f[c],d=null,m=239<b?4:223<b?3:191<b?2:1;if(c+m<=h)switch(m){case 1:128>b&&(d=b);break;case 2:128==(192&(k=f[c+1]))&&127<(n=(31&b)<<6|63&k)&&(d=n);break;case 3:k=f[c+1];var a=f[c+2];128==(192&k)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&k)<<6|63&a)&&(55296>n||57343<n)&&(d=n);break;case 4:k=f[c+1];a=f[c+2];var g=f[c+3];128==(192&k)&&128==(192&a)&&128==(192&g)&&65535<(n=(15&b)<<18|(63&k)<<12|(63&a)<<6|63&g)&&1114112>n&&(d=n)}null===d?
(d=65533,m=1):65535<d&&(d-=65536,e.push(d>>>10&1023|55296),d=56320|1023&d);e.push(d);c+=m}f=e.length;if(4096>=f)e=String.fromCharCode.apply(String,e);else{h="";for(k=0;k<f;)h+=String.fromCharCode.apply(String,e.slice(k,k+=4096));e=h}return e}function Qn(f,c,h){if(0!=f%1||0>f)throw new RangeError("offset is not uint");if(f+c>h)throw new RangeError("Trying to access beyond buffer length");}function aq(f,c,h,e,k,n){if(!kf.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+e>f.length)throw new RangeError("Index out of range");}function Y7(f,c,h,e,k,n){if(h+e>f.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function Z7(f,c,h,e,k){return c=+c,h>>>=0,k||Y7(f,0,h,4),YD.write(f,c,h,e,23,4),h+4}function $7(f,c,h,e,k){return c=+c,h>>>=0,k||Y7(f,0,h,8),YD.write(f,c,h,e,52,8),h+8}function QT(f,c){var h;c=c||1/0;for(var e=f.length,k=null,n=[],b=0;b<
e;++b){if(55295<(h=f.charCodeAt(b))&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===e){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&-1<(c-=3)&&n.push(239,191,189);if(k=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function T7(f){return RT.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(ala,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(f))}function RL(f,c,h,e){for(var k=0;k<e&&!(k+h>=c.length||k>=f.length);++k)c[k+h]=f[k];return k}function Xw(f,c){return f instanceof c||null!=f&&null!=f.constructor&&null!=f.constructor.name&&f.constructor.name===c.name}function bla(){if(a8)return SL.exports;a8=!0;var f=
ZD.Buffer;(function(c){var h=function(e){return"function"===typeof e?e:"function"===typeof f?function(k){return(new f(k,"base64")).toString("binary")}:"object"===typeof c.base64js?function(k){k=c.base64js.b64ToByteArray(k);return Array.prototype.map.call(k,function(n){return String.fromCharCode(n)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(c.atob);c.atob=h;SL.exports&&(SL.exports=h)})(window);return SL.exports}
function lB(f){throw new RangeError(cla[f]);}function b8(f,c){var h=f.split("@"),e="";1<h.length&&(e=h[0]+"@",f=h[1]);f=f.replace(dla,".").split(".");h=[];for(var k=f.length;k--;)h[k]=c(f[k]);c=h.join(".");return e+c}function c8(f){for(var c=[],h=0,e=f.length;h<e;){var k=f.charCodeAt(h++);if(55296<=k&&56319>=k&&h<e){var n=f.charCodeAt(h++);56320==(64512&n)?c.push(((1023&k)<<10)+(1023&n)+65536):(c.push(k),h--)}else c.push(k)}return c}function Xr(){this.href=this.path=this.pathname=this.query=this.search=
this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function YG(f,c,h){if(f&&gv.isObject(f)&&f instanceof Xr)return f;var e=new Xr;return e.parse(f,c,h),e}function hv(f){if("string"!=typeof f)throw new TypeError("Path must be a string. Received "+JSON.stringify(f));}function d8(f,c){for(var h,e="",k=0,n=-1,b=0,d=0;d<=f.length;++d){if(d<f.length)h=f.charCodeAt(d);else{if(47===h)break;h=47}if(47===h){if(n!==d-1&&1!==b)if(n!==d-1&&2===b){if(2>e.length||2!==k||46!==e.charCodeAt(e.length-
1)||46!==e.charCodeAt(e.length-2))if(2<e.length){if(n=e.lastIndexOf("/"),n!==e.length-1){-1===n?(e="",k=0):k=(e=e.slice(0,n)).length-1-e.lastIndexOf("/");n=d;b=0;continue}}else if(2===e.length||1===e.length){e="";k=0;n=d;b=0;continue}c&&(0<e.length?e+="/..":e="..",k=2)}else 0<e.length?e+="/"+f.slice(n+1,d):e=f.slice(n+1,d),k=d-n-1;n=d;b=0}else 46===h&&-1!==b?++b:b=-1}return e}function ela(){function f(e,k){try{return decodeURIComponent(e.join(""))}catch(b){}if(1===e.length)return e;k=k||1;var n=e.slice(0,
k);e=e.slice(k);return Array.prototype.concat.call([],f(n),f(e))}if(e8)return f8;e8=!0;var c=/%[a-f0-9]{2}/gi,h=/(%[a-f0-9]{2})+/gi;return f8=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(a){for(var k={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=h.exec(e);n;){try{k[n[0]]=decodeURIComponent(n[0])}catch(g){var b=n[0];try{var d=decodeURIComponent(b)}catch(l){d=
b.match(c);for(var m=1;m<d.length;m++)b=f(d,m).join(""),d=b.match(c);d=b}d!==n[0]&&(k[n[0]]=d)}n=h.exec(e)}k["%C2"]="\ufffd";n=Object.keys(k);for(b=0;b<n.length;b++)d=n[b],e=e.replace(new RegExp(d,"g"),k[d]);return e}}}function fla(){function f(){return Array.prototype.reduce.call(arguments,function(S,R){return v.resolve(S,R)})}function c(S){return"\\"===y.sep?S.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):S}function h(S){return A(S.replace(/\+/g,"%2B"))}function e(S,R,aa){setImmediate(function(){S(R,
aa)})}function k(S,R){try{return JSON.parse(S.replace(/^\)\]\}'/,""))}catch(aa){throw aa.sourceMapData=R,aa;}}function n(S,R,aa){R=h(R);try{return String(S(R))}catch(ra){throw ra.sourceMapData=aa,ra;}}function b(S,R,aa,ra){try{var Ea=m(S,R)}catch(K){return e(ra,K)}if(!Ea||Ea.map)return e(ra,null,Ea);S=h(Ea.url);aa(S,function(K,Z){if(K)return K.sourceMapData=Ea,ra(K);Ea.map=String(Z);try{Ea.map=k(Ea.map,Ea)}catch(U){return ra(U)}ra(null,Ea)})}function d(S,R,aa){S=m(S,R);if(!S||S.map)return S;S.map=
n(aa,S.url,S);S.map=k(S.map,S);return S}function m(S,R){R=c(R);S=(S=S.match(F))?S[1]||S[2]||"":null;if(!S)return null;var aa=S.match(G);if(aa){var ra=aa[1]||"text/plain",Ea=aa[2]||"";aa=aa[3]||"";R={sourceMappingURL:S,url:null,sourcesRelativeTo:R,map:aa};if(!I.test(ra)){var K=Error("Unuseful data uri mime type: "+ra);K.sourceMapData=R;throw K;}try{if(";base64"===Ea)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)K=r(aa);else{var Z=r(aa),U=Z.length,V=new Uint8Array(U);for(S=0;S<
U;S++)V[S]=Z.charCodeAt(S);K=(new TextDecoder(M,{fatal:!0})).decode(V)}else K=decodeURIComponent(aa);R.map=k(K,R)}catch(na){throw na.sourceMapData=R,na;}return R}K=f(R,S);return{sourceMappingURL:S,url:K,sourcesRelativeTo:K,map:null}}function a(S,R,aa,ra,Ea){"function"===typeof ra&&(Ea=ra,ra={});var K=S.sources?S.sources.length:0,Z={sourcesResolved:[],sourcesContent:[]};if(0===K)e(Ea,null,Z);else{var U=function(){K--;0===K&&Ea(null,Z)};l(S,R,ra,function(V,na,la){Z.sourcesResolved[la]=V;"string"===
typeof na?(Z.sourcesContent[la]=na,e(U,null)):(V=h(V),aa(V,function(ya,jb){Z.sourcesContent[la]=ya?ya:String(jb);U()}))})}}function g(S,R,aa,ra){var Ea={sourcesResolved:[],sourcesContent:[]};if(!S.sources||0===S.sources.length)return Ea;l(S,R,ra,function(K,Z,U){Ea.sourcesResolved[U]=K;if(null!==aa)if("string"===typeof Z)Ea.sourcesContent[U]=Z;else{K=h(K);try{Ea.sourcesContent[U]=String(aa(K))}catch(V){Ea.sourcesContent[U]=V}}});return Ea}function l(S,R,aa,ra){aa=aa||{};R=c(R);for(var Ea,K,Z=0,U=S.sources.length;Z<
U;Z++)Ea=null,"string"===typeof aa.sourceRoot?Ea=aa.sourceRoot:"string"===typeof S.sourceRoot&&!1!==aa.sourceRoot&&(Ea=S.sourceRoot),Ea=null===Ea||""===Ea?f(R,S.sources[Z]):f(R,Ea.replace(L,"/"),S.sources[Z]),K=(S.sourcesContent||[])[Z],ra(Ea,K,Z)}if(g8)return h8;g8=!0;var r=bla(),v=$D,y=i8,A=ela(),E=/[#@] sourceMappingURL=([^\s'"]*)/,F=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+E.source+")\\s*\\*/|//(?:"+E.source+"))\\s*"),G=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,I=/^(?:application|text)\/json$/,M=
"utf-8",L=/\/?$/;return h8={resolveSourceMap:b,resolveSourceMapSync:d,resolveSources:a,resolveSourcesSync:g,resolve:function(S,R,aa,ra,Ea){function K(U){a(U.map,U.sourcesRelativeTo,aa,ra,function(V,na){if(V)return Ea(V);U.sourcesResolved=na.sourcesResolved;U.sourcesContent=na.sourcesContent;Ea(null,U)})}"function"===typeof ra&&(Ea=ra,ra={});if(null===S){var Z={sourceMappingURL:null,url:R,sourcesRelativeTo:R,map:null};S=h(R);aa(S,function(U,V){if(U)return U.sourceMapData=Z,Ea(U);Z.map=String(V);try{Z.map=
k(Z.map,Z)}catch(na){return Ea(na)}K(Z)})}else b(S,R,aa,function(U,V){if(U)return Ea(U);if(!V)return Ea(null,null);K(V)})},resolveSync:function(S,R,aa,ra){if(null===S)S={sourceMappingURL:null,url:R,sourcesRelativeTo:R,map:null},S.map=n(aa,R,S),S.map=k(S.map,S);else if(S=d(S,R,aa),!S)return null;R=g(S.map,S.sourcesRelativeTo,aa,ra);S.sourcesResolved=R.sourcesResolved;S.sourcesContent=R.sourcesContent;return S},parseMapToJSON:k}}function Ye(){throw Error("Node.js fs module is not supported by jspm core"+
("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));}function gla(){if(j8)return iv;j8=!0;var f=N7().SourceMapGenerator,c=N7().SourceMapConsumer,h=fla(),e=hla,k=i8;iv=function(b){b._comment=b.comment;b.map=new f;b.position={line:1,column:1};b.files={};for(var d in iv)b[d]=iv[d]};var n=function(b){return"\\"===k.sep?b.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):b};iv.updatePosition=function(b){var d=
b.match(/\n/g);d&&((this||lp).position.line+=d.length);d=b.lastIndexOf("\n");(this||lp).position.column=~d?b.length-d:(this||lp).position.column+b.length};iv.emit=function(b,d){if(d){var m=n(d.source||"source.css");(this||lp).map.addMapping({source:m,generated:{line:(this||lp).position.line,column:Math.max((this||lp).position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}});this.addFile(m,d)}this.updatePosition(b);return b};iv.addFile=function(b,d){"string"!==typeof d.content||
Object.prototype.hasOwnProperty.call((this||lp).files,b)||((this||lp).files[b]=d.content)};iv.applySourceMaps=function(){Object.keys((this||lp).files).forEach(function(b){var d=(this||lp).files[b];(this||lp).map.setSourceContent(b,d);if(!1!==(this||lp).options.inputSourcemaps&&(d=h.resolveSync(d,b,e.readFileSync))){var m=new c(d.map);(this||lp).map.applySourceMap(m,b,n(k.dirname(d.sourcesRelativeTo)))}},this||lp)};iv.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?this.emit("",b.position):
this._comment(b)};return iv}function ST(f){return[]}function TL(f,c){c=void 0===c?{}:c;var h,e,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return h=c.morphicDB||zf.MorphicDB.default,b.yield(h.load("part","string"===typeof f?f:f.name,c,"string"===typeof f?void 0:f),2);case 2:e=b.yieldResult;if(!e.isWindow||!e.targetMorph){b.jumpTo(3);break}k=e.targetMorph;return b.yield(zf.ensureCommitInfo(e.metadata&&e.metadata.commit),4);case 4:(n=b.yieldResult)&&
k.changeMetaData("commit",n,!0,!1);case 3:return b.return(e)}})}function TT(f,c,h,e,k,n){var b,d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:A.setCatchFinallyBlocks(2);if(f.isMorph){A.jumpTo(4);break}if("function"!==typeof f.beforePublish){A.jumpTo(5);break}return A.yield(f.beforePublish(c,f),5);case 4:b=[],f.withAllSubmorphsDo(function(E){"function"===typeof E.beforePublish&&b.push(E)}),d=$jscomp.makeIterator(b),m=d.next();case 8:if(m.done){A.jumpTo(5);
break}a=m.value;return A.yield(a.beforePublish(),9);case 9:m=d.next();A.jumpTo(8);break;case 5:A.leaveTryBlock(3);break;case 2:g=A.enterCatchBlock(),l="Error in beforePublish of "+f+"\n"+g.stack,"function"===typeof f.world&&f.world()?f.world().logError(Error(l)):console.error(l);case 3:return r=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),v=h.morphicDB||zf.MorphicDB.default,A.yield(v.snapshotAndCommit("part",c,f,r,e,k,n),12);case 12:return y=A.yieldResult,zf.emit("lively.partsbin/partpublished",
y),A.return(y)}})}function ZG(f,c){c=void 0===c?{}:c;var h,e,k,n,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La,Lb,qc,dc,oc,$c,Vb,Hd,be,ha,Ca,Na,yb,gc,Ud,Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cd){switch(cd.nextAddress){case 1:return h=c,e=void 0===h.showPublishDialog?!0:h.showPublishDialog,k=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?!0:h.loadingIndicator,b=void 0===h.preferWindow?!0:h.preferWindow,a=f,g=f.world()||
f.env.world,l=f.name,r=[],v="",cd.yield(zf.ensureCommitInfo(zf.Path("metadata.commit").get(f)||zf.Path("metadata.commit").get(a)),2);case 2:y=cd.yieldResult;A=c.morphicDB||zf.MorphicDB.default;y||(y={type:"part",name:f.name,author:g.getCurrentUser(),tags:[],description:"no description"});if(!e){y&&(E=y,l=E.name,r=E.tags,v=E.description);cd.jumpTo(3);break}F=g;G=F.openPrompt;return cd.yield(zf.loadPart("publish part dialog"),5);case 5:return cd.yield(G.call(F,cd.yieldResult,{part:f}),4);case 4:I=cd.yieldResult;
M=I.db;L=I.commit;if(!L)return cd.return(null);M&&(c.morphicDB=A=M);S=L;l=S.name;r=S.tags;v=S.description;case 3:if(!n){cd.jumpTo(6);break}R=$world.execCommand("open loading indicator","saving "+l+"...");return cd.yield(zf.promise.delay(80),6);case 6:cd.setCatchFinallyBlocks(8,9);aa="HEAD";ra=y?y.name:f.name;if(ra===l){Ea=y?y._id:void 0;cd.jumpTo(11);break}return cd.yield(A.exists("part",l),12);case 12:K=cd.yieldResult;Z=K.exists;U=K.commitId;if(!Z){cd.jumpTo(13);break}return cd.yield(g.confirm('A part "'+
l+'" already exists, overwrite?'),14);case 14:V=cd.yieldResult;if(!V)return cd.return(null);Ea=U;case 13:a.name=l;case 11:return b&&!f.isWindow&&(na=f.getWindow())&&na.targetMorph===f&&(f=na,m=na.metadata,d=!0),la={author:f.world().getCurrentUser(),message:"published",tags:r,description:v},cd.yield(zf.savePart(f,l,c,la,aa,Ea),15);case 15:ya=cd.yieldResult;if(!d){cd.jumpTo(16);break}if(a.metadata)return gb=a.metadata,cd.yield(zf.ensureCommitInfo(na.metadata.commit),20);jb=a;return cd.yield(zf.ensureCommitInfo(na.metadata.commit),
19);case 19:jb.metadata={commit:cd.yieldResult};cd.jumpTo(18);break;case 20:gb.commit=cd.yieldResult;case 18:na.metadata=m;case 16:return k&&f.setStatusMessage("saved part "+l),cd.return(ya);case 9:cd.enterFinallyBlock();R&&R.remove();cd.leaveFinallyBlock(0);break;case 8:ka=cd.enterCatchBlock();ia=$jscomp.makeIterator(ka.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ia.next();ia.next();qa=ia.next().value;La=ia.next().value;
if(!qa||!La){cd.jumpTo(21);break}Lb=$jscomp;qc=Lb.makeIterator;return cd.yield(A.log(La,1,!0),22);case 22:return dc=qc.call(Lb,cd.yieldResult),$c=oc=dc.next().value,Vb=$c.author,Hd=Vb.name,be=$c.timestamp,ha='The current version of part "'+l+'" is not the most recent!\nA newer version by '+(Hd+" was saved on ")+(zf.date.format(new Date(be),"yyyy-mm-dd HH:MM")+". Overwrite?"),cd.yield(g.confirm(["Version Mismatch\n",{},ha,{fontWeight:"normal",fontSize:16}]),23);case 23:Ca=cd.yieldResult;if(!Ca)return cd.return(null);
Na=zf.obj.dissoc(oc,["preview"]);a.changeMetaData("commit",Na,!0,!1);return cd.return(ZG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 21:yb=$jscomp.makeIterator(ka.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||[]);yb.next();yb.next();gc=yb.next().value;if(!gc){cd.jumpTo(24);break}Ud="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return cd.yield(g.confirm(Ud),25);case 25:Td=cd.yieldResult;
if(!Td)return cd.return(null);a.changeMetaData("commit",null,!0,!1);return cd.return(ZG(a,Object.assign({},c,{morphicDB:A,showPublishDialog:!1})));case 24:throw console.error(ka),k&&g.logError("Error saving part: "+ka),ka;}})}function UT(f){f=void 0===f?{}:f;var c,h,e,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return c=f.morphicDB||zf.MorphicDB.default,d.yield(c.latestCommits("part"),2);if(3!=d.nextAddress)return h=d.yieldResult,e=h.map(function(m){return{isListItem:!0,
string:m.name,value:m}}),d.yield($world.filterableListPrompt("Select part to load",e,{fuzzy:!0}),3);k=d.yieldResult;n=$jscomp.makeIterator(k.selected);b=n.next().value;return d.return(b?zf.loadPart(b):null)})}function VT(f){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",{input:f.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=h.yieldResult;if(!c)throw"canceled";
return h.return(zf.saveObjectToPartsbinFolder(f,c,{previewWidth:f.width,previewHeight:f.height}))})}function WT(f,c,h){h=void 0===h?{}:h;var e,k,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(f=(e=f.getWindow())&&e.targetMorph===f?e:f);r.setCatchFinallyBlocks(2);if(f.isMorph){r.jumpTo(4);break}if("function"!==typeof f.beforePublish){r.jumpTo(5);break}return r.yield(f.beforePublish(c,f),
5);case 4:k=[],f.withAllSubmorphsDo(function(v){"function"===typeof v.beforePublish&&k.push(v)}),n=$jscomp.makeIterator(k),b=n.next();case 8:if(b.done){r.jumpTo(5);break}d=b.value;return r.yield(d.beforePublish(),9);case 9:b=n.next();r.jumpTo(8);break;case 5:r.leaveTryBlock(3);break;case 2:m=r.enterCatchBlock(),a="Error in beforePublish of "+f+"\n"+m.stack,"function"===typeof f.world&&f.world()?f.world().logError(Error(a)):console.error(a);case 3:return r.yield(zf.resource(h.partsbinFolder).ensureExistance(),
12);case 12:return g=zf.resource(h.partsbinFolder).join(c+".json"),r.yield(zf.createMorphSnapshot(f,h),13);case 13:return l=r.yieldResult,r.yield(g.write(JSON.stringify(l,null,2)),14);case 14:return r.return({partName:c,url:g.url})}})}function $G(f,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(zf.loadPart(f,c))})}function XT(f){var c={type:"input",extent:zf.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:zf.Rectangle.inset(4,4),border:{color:zf.Color.gray,
width:1}};return Object.assign(zf.morph({extent:zf.pt(420,24),layout:new zf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"name input",placeholder:"name"}),Object.assign({},c,{name:"type input",placeholder:"type"}),Object.assign({},c,{name:"timestamp input",placeholder:"timestamp"}),{layout:new zf.VerticalLayout({resizeSubmorphs:!0,spacing:3}),submorphs:[Object.assign({},c,{name:"author.name input",placeholder:"author name"}),Object.assign({},c,{name:"author.email input",
placeholder:"author email"}),Object.assign({},c,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},c,{name:"tags input",placeholder:"tags"}),Object.assign({},c,{height:70,name:"description input",type:"text"}),Object.assign({},c,{height:70,name:"message input",type:"text"}),Object.assign({},c,{height:70,name:"metadata input",type:"text"}),{layout:new zf.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",
name:"cancel button",label:"Cancel"}]}],name:"commit editor",get ui(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),cancelButton:this.get("cancel button"),
okButton:this.get("ok button")}},set commit(h){this._commit=h;var e=h.type,k=h.timestamp,n=h.author,b=h.tags,d=h.description,m=h.metadata,a=this.ui,g=a.typeInput,l=a.timestampInput,r=a.authorNameInput,v=a.authorEmailInput,y=a.authorRealmInput,A=a.tagsInput,E=a.descriptionInput,F=a.messageInput,G=a.metadataInput;a.nameInput.input=h.name;g.input=e;l.input=String(new Date(k));r.input=n.name;v.input=n.email;y.input=n.realm;A.input=b.join(" ");E.textString=d;F.textString="";G.textString=m?JSON.stringify(m,
null,2):""},get commit(){var h=this._commit;if(!h)throw Error("commit editor does not have a _commit object");var e=this.ui,k=e.authorNameInput,n=e.authorEmailInput,b=e.authorRealmInput,d=e.tagsInput,m=e.descriptionInput,a=e.messageInput,g=e.metadataInput,l=e.nameInput.input;e=e.typeInput.input;if(h.name!==l)throw Error("name does not match _commit.name: "+l+" vs "+h.name);if(h.type!==e)throw Error("type does not match _commit.type: "+e+" vs "+h.type);h.author.name=k.input;h.author.email=n.input;
h.author.realm=b.input;h.tags=d.input.split(" ").map(function(r){return r.trim()}).filter(Boolean);h.description=m.textString;h.message=a.textString;h.metadata=g.textString?JSON.parse(g.textString):null;return h},onLoad:function(){zf.connect(this.ui.okButton,"fire",this,"accept");zf.connect(this.ui.cancelButton,"fire",this,"cancel")},accept:function(){},cancel:function(){}}),f)}function UL(f,c,h){var e,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){e=f.isResource?f:Pg.resource(System.decanonicalize(f));
k=e.nameWithoutExt();return n.return(Pg.loadWorldFromDB(k,void 0,c,h))})}function VL(f,c,h){var e,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return e=Pg.MorphicDB.default,b.yield(e.load("world",void 0,h,f),2);k=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";h=Object.assign({pathForBrowserHistory:Pg.pathForBrowserHistory(k.name,n)},h);return b.return(Pg.loadWorld(k,c,h))})}function WL(f,c,h,e){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return k=Pg.MorphicDB.default,d.yield(k.load("world",f,e,void 0,c||void 0),2);n=d.yieldResult;b="undefined"!==typeof document?document.location.search:"";e=Object.assign({pathForBrowserHistory:Pg.pathForBrowserHistory(f,b)},e);return d.return(Pg.loadWorld(n,h,e))})}function XL(f,c,h){h=void 0===h?{}:h;var e,k,n,b,d,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:e=h;k=e.env;n=void 0===e.verbose?!0:e.verbose;b=void 0===e.localconfig?
!0:e.localconfig;d=void 0===e.l2l?!0:e.l2l;m=void 0===e.shell?!0:e.shell;a=void 0===e.worldLoadDialog?!1:e.worldLoadDialog;g=void 0===e.showUserFlap?"undefined"===typeof f.showsUserFlap?!0:f.showsUserFlap:e.showUserFlap;k=k||(c?c.env:Pg.MorphicEnv.default());l=k.domEnv.document||document;r=l.getElementById("dom-loading-indicator");E.setCatchFinallyBlocks(2,3);if(!(v=d)){E.jumpTo(5);break}return E.yield(Pg.setupLively2Lively(f),6);case 6:v=E.yieldResult;case 5:y=v;if(!y||!m){E.jumpTo(7);break}return E.yield(Pg.setupLivelyShell({l2lClient:y}),
7);case 7:n&&r&&(r.style.display="");if(!b){E.jumpTo(9);break}return E.yield(Pg.loadLocalConfig(),10);case 10:case 9:return E.yield(k.setWorld(f),11);case 11:a&&f.execCommand("load world");h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);f.showsUserFlap=g;if(c)c.onUnload();Pg.emit("world/loaded",f);return E.return(f);case 3:E.enterFinallyBlock();r&&(r.style.display="none");E.leaveFinallyBlock(0);break;case 2:A=E.enterCatchBlock();console.error("Error loading world: ",
A);if(!c){E.jumpTo(12);break}return E.yield(k.setWorld(c),13);case 13:c.showError(A);case 12:throw A;}})}function aE(f,c){var h,e,k,n,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La,Lb,qc,dc,oc,$c,Vb,Hd,be;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=f.name,e=[],k="",ha.yield(Pg.ensureCommitInfo(Pg.Path("metadata.commit").get(f)),
2);case 2:n=ha.yieldResult;b=c.morphicdb||Pg.MorphicDB.default;d="";m="db";if(!c.showSaveDialog){n&&(a=n,h=a.name,e=a.tags,k=a.description);ha.jumpTo(3);break}return ha.yield(Pg.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return g=ha.yieldResult,ha.yield(f.openPrompt(g,{targetWorld:f}),5);case 5:if(l=ha.yieldResult,r=l.commit,v=l.db,y=l.mode,A=l.filePath,v&&(b=v),m=y,d=A,E=r||{},h=E.name,e=E.tags,k=E.description,!h)return ha.return(null);case 3:return F=$world.execCommand("open loading indicator",
"saving "+h+"..."),ha.yield(Pg.promise.delay(80),6);case 6:if("json"!=m){ha.jumpTo(7);break}G=Pg.resource(System.baseURL).join(d).withRelativePartsResolved();return ha.yield(G.exists(),8);case 8:return ha.yieldResult?(F.visible=!1,ha.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},G.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):
ha.yield(G.ensureExistance(),10);case 12:I=ha.yieldResult;if(!I)return F.remove(),ha.return();F.visible=!0;case 10:return M=G,L=M.writeJson,ha.yield(Pg.createMorphSnapshot(f),14);case 14:return ha.yield(L.call(M,ha.yieldResult),13);case 13:return F.remove(),f.setStatusMessage("saved world "+h+" to file: "+G.url),ha.return();case 7:ha.setCatchFinallyBlocks(15,16);S={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[F]};R="HEAD";aa=n?n.name:f.name;if(!c.useExpectedCommit){ha.jumpTo(18);
break}if(aa===h||!c.confirmOverwrite){ra=n?n._id:void 0;ha.jumpTo(18);break}return ha.yield(b.exists("world",h),20);case 20:Ea=ha.yieldResult;K=Ea.exists;Z=Ea.commitId;if(!K){ha.jumpTo(21);break}return ha.yield(f.confirm('A world "'+h+'" already exists, overwrite?',{styleClasses:["Halo"],fill:Pg.Color.rgba(0,0,0,.8)}),22);case 22:U=ha.yieldResult;if(!U)return ha.return(null);ra=Z;case 21:f.name=h;case 18:return V={author:f.getCurrentUser(),message:"world save",tags:e,description:k},ha.yield(b.snapshotAndCommit("world",
h,f,S,V,R,ra),23);case 23:return na=ha.yieldResult,window.history&&(la="undefined"!==typeof document?document.location.search:"",ya=Pg.pathForBrowserHistory(h,la),window.history.pushState({},"lively.next",ya)),f.setStatusMessage("saved world "+h),f.get("world-list")&&f.get("world-list").onWorldSaved(h),ha.return(na);case 16:ha.enterFinallyBlock();F.remove();ha.leaveFinallyBlock(0);break;case 15:jb=ha.enterCatchBlock();if(jb.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ha.return(aE(f,
Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));gb=$jscomp.makeIterator(jb.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);gb.next();gb.next();ka=gb.next().value;ia=gb.next().value;if(!ka||!ia){ha.jumpTo(24);break}qa=$jscomp;La=qa.makeIterator;return ha.yield(b.log(ia,1,!0),25);case 25:Lb=La.call(qa,ha.yieldResult);qc=Lb.next().value;dc=!0;if(!c.confirmOverwrite){ha.jumpTo(26);break}oc=qc;$c=oc.author;
Vb=$c.name;Hd=oc.timestamp;be="The current version of world "+h+" is not the most recent!\nA newer version by "+(Vb+" was saved on ")+(Pg.date.format(new Date(Hd),"yyyy-mm-dd HH:MM")+". Overwrite?");return ha.yield(f.confirm(be),27);case 27:dc=ha.yieldResult;case 26:if(!dc)return ha.return(null);f.changeMetaData("commit",Pg.obj.dissoc(qc,["preview"]),!0,!1);return ha.return(aE(f,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 24:console.error(jb),f.logError("Error saving world: "+jb),ha.jumpTo(16)}})}
function YT(f,c){var h=f.row;f=f.column;var e=c.row;c=c.column;return h<e?-2:h===e?f<c?-1:f===c?0:1:2}function jv(f,c){return 0>Yl.comparePosition(f,c)}function bE(f,c){return 0>=Yl.comparePosition(f,c)}function kv(f,c){return 0===Yl.comparePosition(f,c)}function cE(f,c){return Yl.lessPosition(f,c)?f:c}function dE(f,c){return Yl.lessPosition(f,c)?c:f}function ZT(f,c){if(!f||!c)return f==c;var h=!0,e={},k;for(k in f)if(e[k]=!0,!c.hasOwnProperty(k)||f[k]!==c[k]){h=!1;break}if(h)for(var n in c)if(!(e[n]||
f.hasOwnProperty(n)&&f[n]===c[n])){h=!1;break}return h}function YL(f,c,h,e,k){k=void 0===k?"":k;var n="string"!==typeof f,b="string"!==typeof h;if(n||b){var d=[];n?d.push(f,c):d.push(f+k,c);b?d.push(h,e):d.push(h+k,e);return d}return!c&&!e||c==e?[f+k+h,c]:c&&e?di.shallowEquals(c,e)?[f+k+h,c]:[f+k,c,h,e]:[f+k,c,h,e]}function ZL(f,c){c=void 0===c?"":c;if(2>=f.length)return f;var h=[],e=$jscomp.makeIterator(f),k=e.next().value,n=e.next().value;for(e=2;e<f.length;e+=2)n=di.concatAttributePair(k,n,f[e],
f[e+1],c),2>=n.length?(k=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),k=n.next().value,n=n.next().value);h.push(k,n);return h}function $L(f,c){for(var h=0,e=0;e<f.length;e+=2){var k=f[e],n=h+("string"===typeof k?k.length:1);if(n<c)h=n;else{if(h===c)return[f.slice(0,e),f.slice(e)];if(n===c)return[f.slice(0,e+2),f.slice(e+2)];if("string"!==typeof k)throw Error("Assuming text is a string for splitting it, got "+k+" instead!");var b=f[e+1],
d=c-h;n=[].concat($jscomp.arrayFromIterable(f.slice(0,e)),[k.slice(0,d),b]);f=k.length===d?f.slice(e+2):[k.slice(c-h),b].concat($jscomp.arrayFromIterable(f.slice(e+2)));return[n,f]}}return[f,[]]}function aM(f,c){var h=f;f=0;for(var e=[],k=0;k<c.length;k++){var n=$jscomp.makeIterator(di.splitTextAndAttributesAt(h,c[k]-f));h=n.next().value;n=n.next().value;e.push(h);for(var b=0;b<h.length;b+=2)f+="string"===typeof h[b]?h[b].length:1;h=n}e.push(h);return e}function bM(f,c,h){h=void 0===h?!1:h;if(!f.length||
2===f.length&&""==f[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?f:f.slice();f=h?f:f.slice();for(h=0;h<c.length;h+=2)f.push(c[h],c[h+1]);return f}function cM(f,c,h){var e=c.start;c=c.end;if(di.eqPosition(e,c))return null;di.lessPosition(c,e)&&(c=$jscomp.makeIterator([c,e]),e=c.next().value,c=c.next().value);var k=e;e=k.row;var n=k.column;k=c;c=k.row;k=k.column;var b=f.getLine(e),d=b.textAndAttributes,m=0;n=$jscomp.makeIterator(di.splitTextAndAttributesAt(d,n));f=n.next().value;
n=n.next().value;d.length=0;di.textAndAttributesDo(f,function(l,r){m+="string"===typeof l?l.length:1;d.push(l,r)});if(e===c){var a=$jscomp.makeIterator(di.splitTextAndAttributesAt(n,k-m));n=a.next().value;a=a.next().value}di.textAndAttributesDo(n,function(l,r){return d.push(l,h(b,r))});e===c&&di.textAndAttributesDo(a,function(l,r){return d.push(l,r)});b._textAttributes=null;b.textAndAttributes=di.joinTextAttributes(d);if(e!==c){a={};for(e+=1;e<c;a={$jscomp$loop$prop$textAndAttributes$1227$2253:a.$jscomp$loop$prop$textAndAttributes$1227$2253},
e++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1227$2253=b.textAndAttributes,f=a.$jscomp$loop$prop$textAndAttributes$1227$2253.slice(),a.$jscomp$loop$prop$textAndAttributes$1227$2253.length=0,di.textAndAttributesDo(f,function(l){return function(r,v){return l.$jscomp$loop$prop$textAndAttributes$1227$2253.push(r,h(b,v))}}(a)),b._textAttributes=null,b.textAndAttributes=di.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1227$2253);b=b.nextLine();var g=b.textAndAttributes;e=$jscomp.makeIterator(di.splitTextAndAttributesAt(g,
k));a=e.next().value;e=e.next().value;g.length=0;di.textAndAttributesDo(a,function(l,r){return g.push(l,h(b,r))});di.textAndAttributesDo(e,function(l,r){return g.push(l,r)});b._textAttributes=null;b.textAndAttributes=di.joinTextAttributes(g)}}function dM(f,c){var h=f.column;f=f.row;var e=[],k=[];c=$jscomp.makeIterator(di.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var d=n[b];d=h+("string"==typeof d?d.length:1);e.push({start:{row:f,
column:h},end:{row:f,column:d}});k.push(n[b],n[b+1]);h=d}h=0;f++}return{ranges:e,textAndAttributes:k}}function aH(f,c){c=void 0===c?"\n":c;if(!f.length)return[];for(var h=[],e=[],k=0;k<f.length;k+=2){var n=f[k],b=f[k+1];if("string"!==typeof n)e.push(n,b);else for(;n.length;){var d=n.indexOf(c);if(-1===d){e.push(n,b);break}0<d&&e.push(n.slice(0,d),b);h.push(e);n=n.slice(d+1);e=[]}}e.length?h.push(e):(e=$jscomp.makeIterator(f.slice(-2)),f=e.next().value,e=e.next().value,"string"===typeof f&&f.endsWith(c)&&
h.push(["",e]));return h}function eM(f,c){c=void 0===c?f.textAndAttributesInRange(f.selection.range):c;var h=new f.constructor(Object.assign({},f.defaultTextStyle,{width:f.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);f=h.textRenderer.directRenderLineFn(h);c=c();var e=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;e&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=e.whiteSpace,c.style.overflowWrap=e.overflowWrap,c.style.wordBreak=
e.wordBreak,c.style.minWidth=e.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);for(e=h.next();!e.done;e=h.next())c.appendChild(f(e.value));return c.outerHTML}function bH(f){if(f&&f.isListItem&&"string"===typeof f.string)return f;if(!f||!f.isListItem)return{isListItem:!0,string:String(f),value:f};var c=f.string||f.label||"no item.string";f.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,e){return 0==e%2?String(h):""}).join(""):String(c):String(c);return f}
function fM(f){var c=f.filePath,h=f.worldName,e=f.commit,k=f.loadingIndicator,n=f.progress,b=void 0===f.logError?function(L){return console.log(L)}:f.logError,d,m,a,g,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.setCatchFinallyBlocks(2),d=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
n.opacity=0,n.hasFixedPosition=!0,n.openInWorld(),n.bottomCenter=k.topCenter,L.yield(af.polyfills(),4);case 4:return m=$world.env,af.doBootstrap?L.yield(af.bootstrapLivelySystem(k,n,d),8):L.yield(af.fastPrepLivelySystem(k),7);case 7:L.jumpTo(6);break;case 8:case 6:return k.label="Loading lively.2lively...",L.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:af.askBeforeQuit&&window.addEventListener("beforeunload",function(S){return S.returnValue="Really?"},!0);if("dynamic"!=d["lively.morphic"]||
af.fastLoad){a=lively.morphic;L.jumpTo(10);break}k.label="Loading lively.morphic...";return L.yield(lively.modules.importPackage("lively.morphic"),11);case 11:a=L.yieldResult,n.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:k.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;g=document.location;L.setCatchFinallyBlocks(12);l={verbose:!0,localconfig:!0,l2l:!0,shell:!0};
if(e)return L.yield(a.World.loadFromCommit(e,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+e.name})),15);if(h)return"__newWorld__"==h?Object.values(d).every(function(S){return"frozen"==S})||af.fastLoad?L.yield(lively.modules.module("lively.ide/world.js").recorder,27):L.yield(lively.modules.System.import("lively.ide/world.js"),25):L.yield(a.World.loadFromDB(h,void 0,void 0,Object.assign({},l,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){L.jumpTo(15);break}return L.yield(a.World.loadFromResource(af.resource(System.baseURL).join(c),
void 0,Object.assign({},l,{browserURL:"/worlds/load?file="+c})),15);case 25:return y=L.yieldResult,r=y.LivelyWorld,L.yield(lively.modules.System.import("lively.morphic/world-loading.js"),26);case 26:A=L.yieldResult;v=A.loadWorld;L.jumpTo(24);break;case 27:return E=L.yieldResult,r=E.LivelyWorld,L.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,28);case 28:F=L.yieldResult,v=F.loadWorld;case 24:return L.yield(v(new r({openNewProjectPrompt:!0})),15);case 15:L.leaveTryBlock(13,
2);break;case 12:G=L.enterCatchBlock(2),window.__loadError__=G;case 13:return window.addEventListener("popstate",function(S){document.location==g&&document.location.reload()}),k.remove(),af.worldLoaded=!0,lively.modules.removeHook("fetch","logFetch"),L.yield(m.renderer.worldMorph.whenRendered(),31);case 31:"dynamic"!=d["lively.morphic"]||af.fastLoad||(m.renderer.clear(),m.fontMetric.uninstall(),m.eventDispatcher.uninstall());L.leaveTryBlock(0);break;case 2:throw I=L.enterCatchBlock(),I.originalErr&&
(I=I.originalErr),M=I.message,I.stack!==I.message&&(M+=I.stack.includes(I.message)?I.stack.replace(I.message,"\n"):I.stack),b(M),I;}})}Ba({B:Dm,D:Zx,F:ld,G:ac,H:ed,J:Qd,K:Fb,M:bd,N:So,O:Q,P:Ti,Q:Kp,R:Wm,S:tc,U:Rs,V:vK,W:Nb,X:mi,Z:YF,_:xh,a:WF,a0:Gl,a1:th,aC:Pu,aQ:Km,aR:Jp,aV:$o,aW:Dr,aa:$G,ab:TL,ac:aE,al:ab,ao:yl,ap:xf,aq:hc,as:Cu,b:Vg,bA:ao,bE:Xx,bF:cn,bK:yq,bN:Ij,bO:bH,bT:ih,bU:vw,bW:function(f){f=void 0===f?document.body:f;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Yr.default().world||
(c=window.$world=window.$$world=new Qy({name:k8.name,extent:th(window.innerWidth,window.innerHeight)}),Yr.default().setWorldRenderedOn(c,f,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var e=oA(k8,{reinitializeIds:function(k){return k}});if(e.isWorld)e.position=th(0,0),Yr.default().setWorldRenderedOn(e,f,window.prerenderNode),"elastic"===e.resizePolicy&&e.execCommand("resize to fit window");else try{f!=document.body?(new window.ResizeObserver(function(k){return e.execCommand("resize on client",
k[0])})).observe(f):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return e.execCommand("resize on client")},e.openInWorld(th(0,0)),e.execCommand("resize on client",f)}catch(k){e.position=th(0,0)}});h.jumpToEnd()})},bn:hm,bp:Ro,bs:Cr,bw:B,c:Lp,d:RC,e:xq,g:Qs,h:BA,i:fa,j:Hh,k:Gp,l:VF,m:Ps,n:Gi,o:jc,p:ye,q:pc,r:w,t:cA,u:bb,v:wl,w:jd,x:mw,y:Yx,z:vu});var eE=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");eE.evalJS=dl;eE.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;
var fk=function(f,c,h,e){this.originalFunc=f;this.varMapping=c||{};this.setFuncSource(h||f);this.setFuncProperties(f||e)};fk.fromFunction=function(f,c){return new this(f,c||{})};fk.fromSource=function(f,c){return new this(null,c||{},f)};fk.prototype.setFuncSource=function(f){return this.source=f="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(f):
String(f)};fk.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};fk.prototype.hasFuncSource=function(){return this.source&&!0};fk.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};fk.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};fk.prototype.setFuncProperties=function(f){var c=this.getFuncProperties(),h;for(h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};fk.prototype.lookup=function(f){return this.varMapping[f]};
fk.prototype.parameterNames=function(f){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(f).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(f=eE.parameterRegex.exec(f))?(f[1]||f[2]||"").split(",").map(function(c){return c.trim()}):[]};fk.prototype.firstParameter=function(f){return this.parameterNames(f)[0]||null};fk.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),
this.originalFunc)};fk.prototype.recreateFuncFromSource=function(f,c){c=[];var h="$super"===this.firstParameter(f);for(e in this.varMapping)this.varMapping.hasOwnProperty(e)&&"this"!=e&&c.push("var "+e+" = this.varMapping."+e+";\n");var e="";0<c.length&&(e+=c.join("\n"));h&&(e+="(function superWrapperForClosure() { return ");e+="("+f+")";h&&(e+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var k=eE.evalJS.call(this,e)||this.couldNotCreateFunc(e);this.addFuncProperties(k);
return this.originalFunc=k}catch(n){throw f="Cannot create function "+n+" src: "+e,console.error(f),Error(f);}};fk.prototype.addFuncProperties=function(f){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(f[h]=c[h]);this.addClosureInformation(f)};fk.prototype.couldNotCreateFunc=function(f){var c="Could not recreate closure from source: \n"+f;console.error(c);return function(){throw Error(c);}};fk.prototype.asFunction=function(){return this.recreateFunc()};fk.prototype.addClosureInformation=
function(f){f.hasLivelyClosure=!0;f.livelyClosure=this;return f};$jscomp.global.Object.defineProperties(fk.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ba("bu",fk);eE.Closure=fk;eE.default=fk;var mB=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");mB.groupBy=ac;var yn=function(){};yn.fromArray=function(f,c,h){for(var e=new mB.Group,k=0,n=f.length;k<n;k++){var b=c.call(h,
f[k],k);e[b]||(e[b]=[]);e[b].push(f[k])}return e};yn.prototype.toArray=function(){return this.reduceGroups(function(f,c,h){return f.concat([h])},[])};yn.prototype.forEach=function(f,c){var h=this;Object.keys(h).forEach(function(e){h[e].forEach(f.bind(c,e))});return h};yn.prototype.forEachGroup=function(f,c){var h=this;Object.keys(h).forEach(function(e){f.call(c,e,h[e])});return h};yn.prototype.map=function(f,c){var h=new mB.Group;this.forEachGroup(function(e,k){h[e]=k.map(f.bind(c,e))});return h};
yn.prototype.mapGroups=function(f,c){var h=new mB.Group;this.forEachGroup(function(e,k){h[e]=f.call(c,e,k)});return h};yn.prototype.keys=function(){return Object.keys(this)};yn.prototype.reduceGroups=function(f,c,h){this.forEachGroup(function(e,k){c=f.call(h,c,e,k)});return c};yn.prototype.count=function(){return this.reduceGroups(function(f,c,h){f[c]=h.length;return f},{})};$jscomp.global.Object.defineProperties(yn,{by:{configurable:!0,enumerable:!0,get:function(){return mB.groupBy}}});mB.Group=
yn;mB.default=yn;var Wb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Wb.range=jc;Wb.withN=lc;Wb.genN=Xd;Wb.filter=ed;Wb.findAndGet=Yd;Wb.filterByKey=id;Wb.grep=Wc;Wb.mask=Ad;Wb.reject=Cd;Wb.rejectByKey=fe;Wb.without=Sd;Wb.withoutAll=jd;Wb.uniq=bb;Wb.uniqBy=Fb;Wb.uniqByKey=vc;Wb.compact=pc;Wb.mutableCompact=sd;Wb.forEach=pd;Wb.zip=tc;Wb.flatten=bd;Wb.flatmap=Xb;Wb.interpose=Tb;Wb.delimWith=Oc;Wb.map=td;Wb.invoke=Pb;Wb.pluck=tb;Wb.reduce=hb;Wb.reduceRight=qb;Wb.some=za;Wb.every=cb;Wb.equals=
wb;Wb.deepEquals=Hb;Wb.isSorted=Ub;Wb.sort=lb;Wb.sortBy=mb;Wb.sortByKey=Qb;Wb.reverse=Gc;Wb.reversed=mc;Wb.reMatches=Pc;Wb.first=Xc;Wb.last=Q;Wb.intersect=fa;Wb.union=Ia;Wb.pushAt=Qa;Wb.removeAt=ec;Wb.remove=Nb;Wb.pushAll=Za;Wb.pushAllAt=ic;Wb.pushIfNotIncluded=ld;Wb.replaceAt=xd;Wb.clear=Yc;Wb.isSubset=Ua;Wb.doAndContinue=Mc;Wb.nestedDelay=pb;Wb.forEachShowingProgress=fb;Wb.swap=eb;Wb.rotate=bc;Wb.groupBy=ac;Wb.groupByKey=Fd;Wb.partition=we;Wb.batchify=Je;Wb.toTuples=Lf;Wb.combinationsPick=ud;Wb.combinations=
Fe;Wb.take=Pd;Wb.drop=Rb;Wb.takeWhile=oa;Wb.dropWhile=Ha;Wb.shuffle=Mb;Wb.max=P;Wb.min=ta;Wb.sum=Pa;Wb.count=Jb;Wb.size=Rc;Wb.histogram=Zc;Wb.clone=oe;Wb.toArray=se;Wb.each=Df;Wb.all=Qd;Wb.any=ue;Wb.collect=of;Wb.findAll=Gf;Wb.inject=rg;Wb.mapAsyncSeries=mg;Wb.mapAsync=Uc;Wb.objectEquals=cl;Wb.delay=Ed;Wb.once=ih;Wb.NullFunction=Gg;Wb.Group=yn;Wb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Wb.features={from:!!Array.from,filter:!!Array.prototype.filter,
find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Wb.from=Wb.features.from?Array.from:function(f){if(!f)return[];if(Array.isArray(f))return f;if(f.toArray)return f.toArray();for(var c=f.length,h=Array(c);c--;)h[c]=f[c];return h};Wb.detect=Wb.features.find?function(f,c,h){return f.find(c,h)}:function(f,c,h){for(var e,k=0,n=f.length;k<n;k++)if(e=f[k],c.call(h,e,k))return e};Wb.findIndex=Wb.features.findIndex?function(f,c,h){return f.findIndex(c,h)}:
function(f,c,h){var e=-1;return f.find(function(k,n){e=n;return c.call(k,h)})?e:-1};Wb.isArray=Array.isArray;Wb.includes=Wb.features.includes?function(f,c){return f.includes(c)}:function(f,c){return-1!==f.indexOf(c)};Wb.include=Wb.includes;Wb.permutations=function(){function f(c,h){return c.length?Wb.flatmap(c,function(e,k){return f(c.slice(0,k).concat(c.slice(k+1)),h.concat([e]))}):[h]}return function(c){return f(c,[])}}();Wb.features.from||(Array.from=Wb.from);Wb.features.filter||(Array.prototype.filter=
function(f,c){return Wb.filter(this,f,c)});Wb.features.find||(Array.prototype.find=function(f,c){return Wb.detect(this,f,c)});Wb.features.findIndex||(Array.prototype.findIndex=function(f,c){return Wb.findIndex(this,f,c)});Wb.features.includes||(Array.prototype.includes=function(f){return Wb.includes(this,f)});var $T=Wb.from,aU=Wb.detect,bU=Wb.findIndex,cU=Ba("f",Wb.isArray),dU=Wb.includes,eU=Wb.include,fU=Wb.permutations;Wb.range=jc;Wb.range=jc;Wb.from=$T;Wb.from=$T;Wb.withN=lc;Wb.withN=lc;Wb.genN=
Xd;Wb.genN=Xd;Wb.filter=ed;Wb.filter=ed;Wb.detect=aU;Wb.detect=aU;Wb.findIndex=bU;Wb.findIndex=bU;Wb.findAndGet=Yd;Wb.findAndGet=Yd;Wb.filterByKey=id;Wb.filterByKey=id;Wb.grep=Wc;Wb.grep=Wc;Wb.mask=Ad;Wb.mask=Ad;Wb.reject=Cd;Wb.reject=Cd;Wb.rejectByKey=fe;Wb.rejectByKey=fe;Wb.without=Sd;Wb.without=Sd;Wb.withoutAll=jd;Wb.withoutAll=jd;Wb.uniq=bb;Wb.uniq=bb;Wb.uniqBy=Fb;Wb.uniqBy=Fb;Wb.uniqByKey=vc;Wb.uniqByKey=vc;Wb.compact=pc;Wb.compact=pc;Wb.mutableCompact=sd;Wb.mutableCompact=sd;Wb.forEach=pd;Wb.forEach=
pd;Wb.zip=tc;Wb.zip=tc;Wb.flatten=bd;Wb.flatten=bd;Wb.flatmap=Xb;Wb.flatmap=Xb;Wb.interpose=Tb;Wb.interpose=Tb;Wb.delimWith=Oc;Wb.delimWith=Oc;Wb.map=td;Wb.map=td;Wb.invoke=Pb;Wb.invoke=Pb;Wb.pluck=tb;Wb.pluck=tb;Wb.reduce=hb;Wb.reduce=hb;Wb.reduceRight=qb;Wb.reduceRight=qb;Wb.isArray=cU;Wb.isArray=cU;Wb.includes=dU;Wb.includes=dU;Wb.include=eU;Wb.include=eU;Wb.some=za;Wb.some=za;Wb.every=cb;Wb.every=cb;Wb.equals=wb;Wb.equals=wb;Wb.deepEquals=Hb;Wb.deepEquals=Hb;Wb.isSorted=Ub;Wb.isSorted=Ub;Wb.sort=
lb;Wb.sort=lb;Wb.sortBy=mb;Wb.sortBy=mb;Wb.sortByKey=Qb;Wb.sortByKey=Qb;Wb.reverse=Gc;Wb.reverse=Gc;Wb.reversed=mc;Wb.reversed=mc;Wb.reMatches=Pc;Wb.reMatches=Pc;Wb.first=Xc;Wb.first=Xc;Wb.last=Q;Wb.last=Q;Wb.intersect=fa;Wb.intersect=fa;Wb.union=Ia;Wb.union=Ia;Wb.pushAt=Qa;Wb.pushAt=Qa;Wb.removeAt=ec;Wb.removeAt=ec;Wb.remove=Nb;Wb.remove=Nb;Wb.pushAll=Za;Wb.pushAll=Za;Wb.pushAllAt=ic;Wb.pushAllAt=ic;Wb.pushIfNotIncluded=ld;Wb.pushIfNotIncluded=ld;Wb.replaceAt=xd;Wb.replaceAt=xd;Wb.clear=Yc;Wb.clear=
Yc;Wb.isSubset=Ua;Wb.isSubset=Ua;Wb.doAndContinue=Mc;Wb.doAndContinue=Mc;Wb.nestedDelay=pb;Wb.nestedDelay=pb;Wb.forEachShowingProgress=fb;Wb.forEachShowingProgress=fb;Wb.swap=eb;Wb.swap=eb;Wb.rotate=bc;Wb.rotate=bc;Wb.groupBy=ac;Wb.groupBy=ac;Wb.groupByKey=Fd;Wb.groupByKey=Fd;Wb.partition=we;Wb.partition=we;Wb.batchify=Je;Wb.batchify=Je;Wb.toTuples=Lf;Wb.toTuples=Lf;Wb.permutations=fU;Wb.permutations=fU;Wb.combinationsPick=ud;Wb.combinationsPick=ud;Wb.combinations=Fe;Wb.combinations=Fe;Wb.take=Pd;
Wb.take=Pd;Wb.drop=Rb;Wb.drop=Rb;Wb.takeWhile=oa;Wb.takeWhile=oa;Wb.dropWhile=Ha;Wb.dropWhile=Ha;Wb.shuffle=Mb;Wb.shuffle=Mb;Wb.max=P;Wb.max=P;Wb.min=ta;Wb.min=ta;Wb.sum=Pa;Wb.sum=Pa;Wb.count=Jb;Wb.count=Jb;Wb.size=Rc;Wb.size=Rc;Wb.histogram=Zc;Wb.histogram=Zc;Wb.clone=oe;Wb.clone=oe;Wb.toArray=se;Wb.toArray=se;Wb.each=Df;Wb.each=Df;Wb.all=Qd;Wb.all=Qd;Wb.any=ue;Wb.any=ue;Wb.collect=of;Wb.collect=of;Wb.findAll=Gf;Wb.findAll=Gf;Wb.inject=rg;Wb.inject=rg;Wb.mapAsyncSeries=mg;Wb.mapAsyncSeries=mg;Wb.mapAsync=
Uc;Wb.mapAsync=Uc;var ng=Object.freeze({__proto__:null,range:jc,from:$T,withN:lc,genN:Xd,filter:ed,detect:aU,findIndex:bU,findAndGet:Yd,filterByKey:id,grep:Wc,mask:Ad,reject:Cd,rejectByKey:fe,without:Sd,withoutAll:jd,uniq:bb,uniqBy:Fb,uniqByKey:vc,compact:pc,mutableCompact:sd,forEach:pd,zip:tc,flatten:bd,flatmap:Xb,interpose:Tb,delimWith:Oc,map:td,invoke:Pb,pluck:tb,reduce:hb,reduceRight:qb,isArray:cU,includes:dU,include:eU,some:za,every:cb,equals:wb,deepEquals:Hb,isSorted:Ub,sort:lb,sortBy:mb,sortByKey:Qb,
reverse:Gc,reversed:mc,reMatches:Pc,first:Xc,last:Q,intersect:fa,union:Ia,pushAt:Qa,removeAt:ec,remove:Nb,pushAll:Za,pushAllAt:ic,pushIfNotIncluded:ld,replaceAt:xd,clear:Yc,isSubset:Ua,doAndContinue:Mc,nestedDelay:pb,forEachShowingProgress:fb,swap:eb,rotate:bc,groupBy:ac,groupByKey:Fd,partition:we,batchify:Je,toTuples:Lf,permutations:fU,combinationsPick:ud,combinations:Fe,take:Pd,drop:Rb,takeWhile:oa,dropWhile:Ha,shuffle:Mb,max:P,min:ta,sum:Pa,count:Jb,size:Rc,histogram:Zc,clone:oe,toArray:se,each:Df,
all:Qd,any:ue,collect:of,findAll:Gf,inject:rg,mapAsyncSeries:mg,mapAsync:Uc});Ba("a4",ng);var Jd=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Jd.Empty=yf;Jd.K=dg;Jd.Null=Gg;Jd.False=mf;Jd.True=Ka;Jd.notYetImplemented=$a;Jd.all=Kb;Jd.own=ba;Jd.argumentNames=Ja;Jd.qualifiedMethodName=ob;Jd.extractBody=zb;Jd.timeToRun=Nc;Jd.timeToRunN=yc;Jd.delay=Ed;Jd.throttle=zd;Jd.debounce=Bd;Jd.throttleNamed=Ie;Jd.debounceNamed=Jg;Jd.createQueue=wg;Jd.workerWithCallbackQueue=Qh;Jd._composeAsyncDefaultEndCallback=
function(f,c){f&&console.error("lively.lang.composeAsync error",f)};Jd.composeAsync=Vf;Jd.compose=Hh;Jd.flip=ek;Jd.withNull=Zh;Jd.waitFor=ml;Jd.waitForAll=Hf;Jd.curry=Gj;Jd.wrap=bj;Jd.getOriginal=Oe;Jd.wrapperChain=Kk;Jd.replaceMethodForOneCall=kl;Jd.once=ih;Jd.either=dm;Jd.eitherNamed=ul;Jd.evalJS=dl;Jd.fromString=Si;Jd.asScript=sg;Jd.asScriptOf=Rf;Jd.addToObject=Xm;Jd.binds=Zb;Jd.setLocalVarValue=$b;Jd.getVarMapping=Ce;Jd.setProperty=Ae;Jd.functionNames=hd;Jd.localFunctionNames=jh;Jd.logErrors=
Oj;Jd.logCompletion=rm;Jd.logCalls=Oo;Jd.traceCalls=Po;Jd.webkitStack=so;Jd.objectMerge=Cc;Jd.safeToString=ee;Jd.Closure=fk;Jd.arr=ng;Jd._throttledByName={};Jd._debouncedByName={};Jd._queues={};Jd._queueUntilCallbacks={};Jd._eitherNameRegistry={};Jd.Empty=yf;Jd.Empty=yf;Jd.K=dg;Jd.K=dg;Jd.Null=Gg;Jd.Null=Gg;Jd.False=mf;Jd.False=mf;Jd.True=Ka;Jd.True=Ka;Jd.notYetImplemented=$a;Jd.notYetImplemented=$a;Jd.withNull=Zh;Jd.withNull=Zh;Jd.all=Kb;Jd.all=Kb;Jd.own=ba;Jd.own=ba;Jd.argumentNames=Ja;Jd.argumentNames=
Ja;Jd.qualifiedMethodName=ob;Jd.qualifiedMethodName=ob;Jd.extractBody=zb;Jd.extractBody=zb;Jd.timeToRun=Nc;Jd.timeToRun=Nc;Jd.timeToRunN=yc;Jd.timeToRunN=yc;Jd.delay=Ed;Jd.delay=Ed;Jd.throttle=zd;Jd.throttle=zd;Jd.debounce=Bd;Jd.debounce=Bd;Jd.throttleNamed=Ie;Jd.throttleNamed=Ie;Jd.debounceNamed=Jg;Jd.debounceNamed=Jg;Jd.createQueue=wg;Jd.createQueue=wg;Jd.workerWithCallbackQueue=Qh;Jd.workerWithCallbackQueue=Qh;Jd.composeAsync=Vf;Jd.composeAsync=Vf;Jd.compose=Hh;Jd.compose=Hh;Jd.waitFor=ml;Jd.waitFor=
ml;Jd.waitForAll=Hf;Jd.waitForAll=Hf;Jd.flip=ek;Jd.flip=ek;Jd.curry=Gj;Jd.curry=Gj;Jd.wrap=bj;Jd.wrap=bj;Jd.binds=Zb;Jd.binds=Zb;Jd.getOriginal=Oe;Jd.getOriginal=Oe;Jd.wrapperChain=Kk;Jd.wrapperChain=Kk;Jd.replaceMethodForOneCall=kl;Jd.replaceMethodForOneCall=kl;Jd.once=ih;Jd.once=ih;Jd.either=dm;Jd.either=dm;Jd.eitherNamed=ul;Jd.eitherNamed=ul;Jd.evalJS=dl;Jd.evalJS=dl;Jd.fromString=Si;Jd.fromString=Si;Jd.asScript=sg;Jd.asScript=sg;Jd.asScriptOf=Rf;Jd.asScriptOf=Rf;Jd.addToObject=Xm;Jd.addToObject=
Xm;Jd.setLocalVarValue=$b;Jd.setLocalVarValue=$b;Jd.getVarMapping=Ce;Jd.getVarMapping=Ce;Jd.setProperty=Ae;Jd.setProperty=Ae;Jd.functionNames=hd;Jd.functionNames=hd;Jd.localFunctionNames=jh;Jd.localFunctionNames=jh;Jd.logErrors=Oj;Jd.logErrors=Oj;Jd.logCompletion=rm;Jd.logCompletion=rm;Jd.logCalls=Oo;Jd.logCalls=Oo;Jd.traceCalls=Po;Jd.traceCalls=Po;Jd.webkitStack=so;Jd.webkitStack=so;var xn=Object.freeze({__proto__:null,Empty:yf,K:dg,Null:Gg,False:mf,True:Ka,notYetImplemented:$a,withNull:Zh,all:Kb,
own:ba,argumentNames:Ja,qualifiedMethodName:ob,extractBody:zb,timeToRun:Nc,timeToRunN:yc,delay:Ed,throttle:zd,debounce:Bd,throttleNamed:Ie,debounceNamed:Jg,createQueue:wg,workerWithCallbackQueue:Qh,composeAsync:Vf,compose:Hh,waitFor:ml,waitForAll:Hf,flip:ek,curry:Gj,wrap:bj,binds:Zb,getOriginal:Oe,wrapperChain:Kk,replaceMethodForOneCall:kl,once:ih,either:dm,eitherNamed:ul,evalJS:dl,fromString:Si,asScript:sg,asScriptOf:Rf,addToObject:Xm,setLocalVarValue:$b,getVarMapping:Ce,setProperty:Ae,functionNames:hd,
localFunctionNames:jh,logErrors:Oj,logCompletion:rm,logCalls:Oo,traceCalls:Po,webkitStack:so});Ba("ar",xn);var Be=lively.FreezerRuntime.recorderFor("lively.lang/object.js");Be.print=ok;Be.indent=function(f,c,h){if(!h||0>=h)return f;for(;0<h;)h--,f=c+f;return f};Be.isArray=Vm;Be.isElement=em;Be.isFunction=zm;Be.isBoolean=wf;Be.isString=Wm;Be.isNumber=vn;Be.isUndefined=zk;Be.isRegExp=Fl;Be.isObject=vl;Be.isPrimitive=ie;Be.isEmpty=ll;Be.equals=cl;Be.values=wl;Be.select=Mg;Be.dissoc=Yh;Be.addScript=Ga;
Be.extend=ub;Be.clone=Eb;Be.extract=rb;Be.inspect=Db;Be.merge=Cc;Be.deepMerge=qd;Be.sortKeysWithBeforeAndAfterConstraints=nd;Be.inherit=rc;Be.valuesInPropertyHierarchy=kc;Be.mergePropertyInHierarchy=Sc;Be.deepCopy=xb;Be.typeStringOf=kd;Be.shortPrintStringOf=ke;Be.isMutableType=Se;Be.safeToString=ee;Be.asObject=Pe;Be.newKeyIn=nf;Be.functionFromString=Si;Be.asScriptOf=Rf;Be.argumentNames=Ja;Be.arrayDeepEquals=Hb;Be.isSubset=Ua;Be.flatten=bd;Be.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?
Object.getOwnPropertyDescriptors:function(f){var c={},h;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(f,h)});return c};Be.keys=Object.keys;var gU=Be.keys,hU=Be.getOwnPropertyDescriptors;Be.isArray=Vm;Be.isArray=Vm;Be.isElement=em;Be.isElement=em;Be.isFunction=zm;Be.isFunction=zm;Be.isBoolean=wf;Be.isBoolean=wf;Be.isString=Wm;Be.isString=Wm;Be.isNumber=vn;Be.isNumber=vn;Be.isUndefined=
zk;Be.isUndefined=zk;Be.isRegExp=Fl;Be.isRegExp=Fl;Be.isObject=vl;Be.isObject=vl;Be.isPrimitive=ie;Be.isPrimitive=ie;Be.isEmpty=ll;Be.isEmpty=ll;Be.equals=cl;Be.equals=cl;Be.keys=gU;Be.keys=gU;Be.values=wl;Be.values=wl;Be.select=Mg;Be.select=Mg;Be.dissoc=Yh;Be.dissoc=Yh;Be.addScript=Ga;Be.addScript=Ga;Be.extend=ub;Be.extend=ub;Be.clone=Eb;Be.clone=Eb;Be.extract=rb;Be.extract=rb;Be.inspect=Db;Be.inspect=Db;Be.merge=Cc;Be.merge=Cc;Be.deepMerge=qd;Be.deepMerge=qd;Be.inherit=rc;Be.inherit=rc;Be.valuesInPropertyHierarchy=
kc;Be.valuesInPropertyHierarchy=kc;Be.mergePropertyInHierarchy=Sc;Be.mergePropertyInHierarchy=Sc;Be.sortKeysWithBeforeAndAfterConstraints=nd;Be.sortKeysWithBeforeAndAfterConstraints=nd;Be.deepCopy=xb;Be.deepCopy=xb;Be.typeStringOf=kd;Be.typeStringOf=kd;Be.shortPrintStringOf=ke;Be.shortPrintStringOf=ke;Be.isMutableType=Se;Be.isMutableType=Se;Be.safeToString=ee;Be.safeToString=ee;Be.asObject=Pe;Be.asObject=Pe;Be.newKeyIn=nf;Be.newKeyIn=nf;Be.getOwnPropertyDescriptors=hU;Be.getOwnPropertyDescriptors=
hU;var Ng=Object.freeze({__proto__:null,isArray:Vm,isElement:em,isFunction:zm,isBoolean:wf,isString:Wm,isNumber:vn,isUndefined:zk,isRegExp:Fl,isObject:vl,isPrimitive:ie,isEmpty:ll,equals:cl,keys:gU,values:wl,select:Mg,dissoc:Yh,addScript:Ga,extend:ub,clone:Eb,extract:rb,inspect:Db,merge:Cc,deepMerge:qd,inherit:rc,valuesInPropertyHierarchy:kc,mergePropertyInHierarchy:Sc,sortKeysWithBeforeAndAfterConstraints:nd,deepCopy:xb,typeStringOf:kd,shortPrintStringOf:ke,isMutableType:Se,safeToString:ee,asObject:Pe,
newKeyIn:nf,getOwnPropertyDescriptors:hU});Ba("a5",Ng);var dd=lively.FreezerRuntime.recorderFor("lively.lang/string.js");dd.format=If;dd.formatFromArray=Mf;dd.indent=Ig;dd.minIndent=ch;dd.changeIndent=wh;dd.quote=tg;dd.print=va;dd.printNested=Fa;dd.pad=nb;dd.printTable=Wa;dd.printTree=xc;dd.toArray=nc;dd.lines=Hc;dd.paragraphs=Qc;dd.nonEmptyLines=Vd;dd.tokens=hg;dd.tableize=lg;dd.unescapeCharacterEntities=fi;dd.toQueryParams=Xg;dd.base64EncodeUnicode=Di;dd.base64DecodeUnicode=Xk;dd.normalizePath=
El;dd.joinPath=Qo;dd.newUUID=Ro;dd.createDataURI=Pv;dd.hashCode=iq;dd.md5=Pt;dd.reMatches=xp;dd.stringMatch=Qv;dd.peekRight=Rv;dd.peekLeft=yx;dd.lineIndexComputer=zx;dd.lineNumberToIndexesComputer=Ax;dd.lineRanges=Sv;dd.findLineWithIndexInLineRanges=Tv;dd.regexIndexOf=Qt;dd.regexLastIndexOf=Uv;dd.diff=Vv;dd.empty=jq;dd.startsWithVowel=yp;dd.withDecimalPrecision=Rt;dd.capitalize=rs;dd.camelCaseString=St;dd.camelize=So;dd.truncate=Am;dd.truncateLeft=ss;dd.regExpEscape=kq;dd.succ=br;dd.digitValue=Wv;
dd.longestCommonSubstring=Xv;dd.applyChange=Bx;dd.applyChanges=Tt;dd.levenshtein=cr;dd.inspectObject=Db;dd.min=ta;dd.last=Q;dd.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,endsWith:!!String.prototype.endsWith};dd.pathDotRe=/\/\.\//g;dd.pathDoubleDotRe=/\/[^\/]+\/\.\./;dd.pathDoubleSlashRe=/(^|[^:])[\/]+/g;dd.urlStartRe=/^[a-z0-9-_\.]+:\/\//;dd.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";dd.newUUIDRe=/[xy]/g;dd.newUUIDReplacer=
function(f){var c=16*Math.random()|0;return("x"==f?c:c&3|8).toString(16)};dd.includes=dd.features.includes?function(f,c){return f.includes(c)}:function(f,c){return-1<f.indexOf(c)};dd.include=dd.includes;dd.startsWith=dd.features.startsWith?function(f,c){return f.startsWith(c)}:function(f,c){return 0===f.indexOf(c)};dd.endsWith=dd.features.endsWith?function(f,c){return f.endsWith(c)}:function(f,c){var h=f.length-c.length;return 0<=h&&f.lastIndexOf(c)===h};dd.times=dd.features.repeat?function(f,c){return f.repeat(c)}:
function(f,c){return 1>c?"":Array(c+1).join(f)};var iU=dd.includes,jU=dd.include,kU=dd.startsWith,lU=dd.endsWith,mU=dd.times;dd.format=If;dd.format=If;dd.formatFromArray=Mf;dd.formatFromArray=Mf;dd.indent=Ig;dd.indent=Ig;dd.minIndent=ch;dd.minIndent=ch;dd.changeIndent=wh;dd.changeIndent=wh;dd.quote=tg;dd.quote=tg;dd.print=va;dd.print=va;dd.printNested=Fa;dd.printNested=Fa;dd.pad=nb;dd.pad=nb;dd.printTable=Wa;dd.printTable=Wa;dd.printTree=xc;dd.printTree=xc;dd.toArray=nc;dd.toArray=nc;dd.lines=Hc;
dd.lines=Hc;dd.paragraphs=Qc;dd.paragraphs=Qc;dd.nonEmptyLines=Vd;dd.nonEmptyLines=Vd;dd.tokens=hg;dd.tokens=hg;dd.tableize=lg;dd.tableize=lg;dd.unescapeCharacterEntities=fi;dd.unescapeCharacterEntities=fi;dd.base64EncodeUnicode=Di;dd.base64EncodeUnicode=Di;dd.base64DecodeUnicode=Xk;dd.base64DecodeUnicode=Xk;dd.toQueryParams=Xg;dd.toQueryParams=Xg;dd.normalizePath=El;dd.normalizePath=El;dd.joinPath=Qo;dd.joinPath=Qo;dd.newUUID=Ro;dd.newUUID=Ro;dd.createDataURI=Pv;dd.createDataURI=Pv;dd.hashCode=iq;
dd.hashCode=iq;dd.md5=Pt;dd.md5=Pt;dd.reMatches=xp;dd.reMatches=xp;dd.stringMatch=Qv;dd.stringMatch=Qv;dd.peekRight=Rv;dd.peekRight=Rv;dd.peekLeft=yx;dd.peekLeft=yx;dd.lineIndexComputer=zx;dd.lineIndexComputer=zx;dd.lineNumberToIndexesComputer=Ax;dd.lineNumberToIndexesComputer=Ax;dd.findLineWithIndexInLineRanges=Tv;dd.findLineWithIndexInLineRanges=Tv;dd.regexIndexOf=Qt;dd.regexIndexOf=Qt;dd.regexLastIndexOf=Uv;dd.regexLastIndexOf=Uv;dd.lineRanges=Sv;dd.lineRanges=Sv;dd.diff=Vv;dd.diff=Vv;dd.empty=
jq;dd.empty=jq;dd.includes=iU;dd.includes=iU;dd.include=jU;dd.include=jU;dd.startsWith=kU;dd.startsWith=kU;dd.startsWithVowel=yp;dd.startsWithVowel=yp;dd.endsWith=lU;dd.endsWith=lU;dd.withDecimalPrecision=Rt;dd.withDecimalPrecision=Rt;dd.capitalize=rs;dd.capitalize=rs;dd.camelCaseString=St;dd.camelCaseString=St;dd.camelize=So;dd.camelize=So;dd.truncate=Am;dd.truncate=Am;dd.truncateLeft=ss;dd.truncateLeft=ss;dd.regExpEscape=kq;dd.regExpEscape=kq;dd.succ=br;dd.succ=br;dd.digitValue=Wv;dd.digitValue=
Wv;dd.times=mU;dd.times=mU;dd.longestCommonSubstring=Xv;dd.longestCommonSubstring=Xv;dd.applyChange=Bx;dd.applyChange=Bx;dd.applyChanges=Tt;dd.applyChanges=Tt;dd.levenshtein=cr;dd.levenshtein=cr;var Li=Object.freeze({__proto__:null,format:If,formatFromArray:Mf,indent:Ig,minIndent:ch,changeIndent:wh,quote:tg,print:va,printNested:Fa,pad:nb,printTable:Wa,printTree:xc,toArray:nc,lines:Hc,paragraphs:Qc,nonEmptyLines:Vd,tokens:hg,tableize:lg,unescapeCharacterEntities:fi,base64EncodeUnicode:Di,base64DecodeUnicode:Xk,
toQueryParams:Xg,normalizePath:El,joinPath:Qo,newUUID:Ro,createDataURI:Pv,hashCode:iq,md5:Pt,reMatches:xp,stringMatch:Qv,peekRight:Rv,peekLeft:yx,lineIndexComputer:zx,lineNumberToIndexesComputer:Ax,findLineWithIndexInLineRanges:Tv,regexIndexOf:Qt,regexLastIndexOf:Uv,lineRanges:Sv,diff:Vv,empty:jq,includes:iU,include:jU,startsWith:kU,startsWithVowel:yp,endsWith:lU,withDecimalPrecision:Rt,capitalize:rs,camelCaseString:St,camelize:So,truncate:Am,truncateLeft:ss,regExpEscape:kq,succ:br,digitValue:Wv,
times:mU,longestCommonSubstring:Xv,applyChange:Bx,applyChanges:Tt,levenshtein:cr});Ba("s",Li);var dh=lively.FreezerRuntime.recorderFor("lively.lang/number.js");dh.random=Ut;dh.randomSmallerInteger=Cx;dh.humanReadableByteSize=Dx;dh.average=Ex;dh.averageInc=Yv;dh.median=Zv;dh.between=Fx;dh.clamp=ts;dh.sort=$v;dh.parseLength=us;dh.roundTo=wn;dh.detent=zp;dh.toDegrees=Ym;dh.toRadians=Ei;dh.backoff=To;dh.interpolate=to;dh.normalRandom=function(f,c){var h,e=!1;return function(k,n){if(e)return e=!1,h*n+
k;do{var b=2*Math.random()-1;var d=2*Math.random()-1;var m=b*b+d*d}while(1<=m||0==m);m=Math.sqrt(-2*Math.log(m)/m);h=d*m;e=!0;return k+n*b*m}}();dh.convertLength=function(){function f(c,h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*f(1/96,"in");if("pt"===h)return c*f(1/72,"in");if("pc"===h)return c*f(12,"pt")}return function n(h,e,k){return e===k?h:"cm"===k?f(h,e):"cm"===e?h/f(1,k):n(n(h,e,"cm"),"cm",k)}}();var nU=dh.normalRandom,oU=dh.convertLength;
dh.random=Ut;dh.random=Ut;dh.normalRandom=nU;dh.normalRandom=nU;dh.randomSmallerInteger=Cx;dh.randomSmallerInteger=Cx;dh.humanReadableByteSize=Dx;dh.humanReadableByteSize=Dx;dh.average=Ex;dh.average=Ex;dh.averageInc=Yv;dh.averageInc=Yv;dh.median=Zv;dh.median=Zv;dh.between=Fx;dh.between=Fx;dh.sort=$v;dh.sort=$v;dh.parseLength=us;dh.parseLength=us;dh.convertLength=oU;dh.convertLength=oU;dh.roundTo=wn;dh.roundTo=wn;dh.detent=zp;dh.detent=zp;dh.toDegrees=Ym;dh.toDegrees=Ym;dh.toRadians=Ei;dh.toRadians=
Ei;dh.backoff=To;dh.backoff=To;dh.interpolate=to;dh.interpolate=to;dh.clamp=ts;dh.clamp=ts;var sm=Object.freeze({__proto__:null,random:Ut,normalRandom:nU,randomSmallerInteger:Cx,humanReadableByteSize:Dx,average:Ex,averageInc:Yv,median:Zv,between:Fx,sort:$v,parseLength:us,convertLength:oU,roundTo:wn,detent:zp,toDegrees:Ym,toRadians:Ei,backoff:To,interpolate:to,clamp:ts});Ba("an",sm);var Dk=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Dk.all=Vt;Dk.allOwnPropertiesOrFunctions=Gx;Dk.own=
vs;Dk.forEachOwn=Wt;Dk.nameFor=dr;Dk.values=ws;Dk.ownValues=Xt;Dk.any=Yt;Dk.allProperties=Hx;Dk.hash=xs;Dk.all=Vt;Dk.all=Vt;Dk.allOwnPropertiesOrFunctions=Gx;Dk.allOwnPropertiesOrFunctions=Gx;Dk.own=vs;Dk.own=vs;Dk.forEachOwn=Wt;Dk.forEachOwn=Wt;Dk.nameFor=dr;Dk.nameFor=dr;Dk.values=ws;Dk.values=ws;Dk.ownValues=Xt;Dk.ownValues=Xt;Dk.any=Yt;Dk.any=Yt;Dk.allProperties=Hx;Dk.allProperties=Hx;Dk.hash=xs;Dk.hash=xs;var Uo=Object.freeze({__proto__:null,all:Vt,allOwnPropertiesOrFunctions:Gx,own:vs,forEachOwn:Wt,
nameFor:dr,values:ws,ownValues:Xt,any:Yt,allProperties:Hx,hash:xs});Ba("aU",Uo);var Ap=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Ap.format=aw;Ap.equals=er;Ap.relativeTo=fr;Ap.dateFormat=function(){var f=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,k=function(n,b){n=String(n);for(b=b||2;n.length<
b;)n="0"+n;return n};return function(n,b,d){var m=f;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(m.masks[b]||b||m.masks["default"]);"UTC:"==b.slice(0,4)&&(b=b.slice(4),d=!0);var a=d?"getUTC":"get",g=n[a+"Date"](),l=n[a+"Day"](),r=n[a+"Month"](),v=n[a+"FullYear"](),y=n[a+"Hours"](),A=n[a+"Minutes"](),E=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var F=d?0:n.getTimezoneOffset(),
G={d:g,dd:k(g),ddd:m.i18n.dayNames[l],dddd:m.i18n.dayNames[l+7],m:r+1,mm:k(r+1),mmm:m.i18n.monthNames[r],mmmm:m.i18n.monthNames[r+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:k(y%12||12),H:y,HH:k(y),M:A,MM:k(A),s:E,ss:k(E),l:k(a,3),L:k(99<a?Math.round(a/10):a),t:12>y?"a":"p",tt:12>y?"am":"pm",T:12>y?"A":"P",TT:12>y?"AM":"PM",Z:d?"UTC":(String(n).match(h)||[""]).pop().replace(e,""),o:(0<F?"-":"+")+k(100*Math.floor(Math.abs(F)/60)+Math.abs(F)%60,4),S:["th","st","nd","rd"][3<g%10?0:(10!=g%100-g%10)*
g%10]};return b.replace(c,function(I){return I in G?G[I]:I.slice(1,I.length-1)})}}();f.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};f.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};return f}();var pU=Ap.dateFormat;Ap.format=aw;Ap.format=aw;Ap.equals=er;Ap.equals=er;Ap.relativeTo=fr;Ap.relativeTo=fr;Ap.dateFormat=pU;Ap.dateFormat=pU;var ju=Object.freeze({__proto__:null,format:aw,equals:er,relativeTo:fr,dateFormat:pU});Ba("a3",ju);var Fi=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Fi.promise=xh;Fi.delay=
ys;Fi.delayReject=gr;Fi.timeout=hr;Fi.timeToRun=zs;Fi.waitFor=Ix;Fi.deferred=bw;Fi.convertCallbackFun=cw;Fi.convertCallbackFunWithManyArgs=lq;Fi._chainResolveNext=Jx;Fi.chain=Zt;Fi.promise_finally=Bp;Fi.parallel=$t;Fi.newUUID=Ro;Fi.pushIfNotIncluded=ld;Fi.removeAt=ec;Object.assign(Fi.promise,{delay:ys,delayReject:gr,timeout:hr,waitFor:Ix,deferred:bw,convertCallbackFun:cw,convertCallbackFunWithManyArgs:lq,chain:Zt,"finally":Fi.promise_finally,parallel:$t});Fi.promise=xh;Fi.promise=xh;Fi.delay=ys;Fi.delay=
ys;Fi.delayReject=gr;Fi.delayReject=gr;Fi.timeout=hr;Fi.timeout=hr;Fi.timeToRun=zs;Fi.timeToRun=zs;Fi.waitFor=Ix;Fi.waitFor=Ix;Fi.deferred=bw;Fi.deferred=bw;Fi.convertCallbackFun=cw;Fi.convertCallbackFun=cw;Fi.convertCallbackFunWithManyArgs=lq;Fi.convertCallbackFunWithManyArgs=lq;Fi.chain=Zt;Fi.chain=Zt;Fi.finally=Bp;Fi.promise_finally=Bp;Fi.parallel=$t;Fi.parallel=$t;Fi.default=xh;var lv=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");lv.Path=Ti;lv.inspect=Db;Object.assign(lv.Path.prototype,
{get isPathAccessor(){return!0},fromPath:function(f){"string"===typeof f&&""!==f&&f!==this.splitter?(this._parts=f.split(this.splitter),this._path=f):Array.isArray(f)?(this._parts=[].concat(f),this._path=f.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(f){f&&(this.splitter=f);return this},map:function(f){this._mapper=f;return this},parts:function(){return this._parts},size:function(){return this._parts.length},slice:function(f,c){return lv.Path(this.parts().slice(f,
c))},normalizePath:function(){return this._path},isRoot:function(f){return 0===this._parts.length},isIn:function(f){return this.isRoot()?!0:(f=this.get(f,-1))&&f.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(f){return f&&f.isPathAccessor&&this.parts().equals(f.parts())},isParentPathOf:function(f){f=f&&f.isPathAccessor?f:lv.Path(f);var c=this.parts();f=f.parts();for(var h=0;h<c.length;h++)if(c[h]!=f[h])return!1;return!0},relativePathTo:function(f){f=lv.Path(f);return this.isParentPathOf(f)?
f.slice(this.size(),f.size()):void 0},del:function(f){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(f.hasOwnProperty(h))f=f[h];else return!1}return delete f[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(f,c,h){if(this.isRoot())return h(null,null);for(var e=0;e<this._parts.length-1;e++){var k=this._parts[e];if(!f.hasOwnProperty(k)||"object"!==typeof f[k]&&"function"!==typeof f[k])if(c)f=f[k]={};else return h(null,k);else f=f[k]}return h(f,
this._parts[this._parts.length-1])},set:function(f,c,h){return this.withParentAndKeyDo(f,h,function(e,k){return e?e[k]=c:void 0})},defineProperty:function(f,c,h){return this.withParentAndKeyDo(f,h,function(e,k){return e?Object.defineProperty(e,k,c):void 0})},get:function(f,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(e,k){return e?h._mapper?h._mapper(k,e[k]):e[k]:e},f)},concat:function(f,c){return lv.Path(this.parts().concat(lv.Path(f,c).parts()))},toString:function(){return this.normalizePath()},
serializeExpr:function(){return"lively.lang.Path("+lv.inspect(this.parts())+")"},watch:function(f){if(f&&!this.isRoot()){var c=f.target,h=this.get(c,-1),e=this.parts().slice(-1)[0],k="propertyWatcher$"+e,n=h&&h.hasOwnProperty(k),b=f.uninstall,d=f.haltWhenChanged,m=f.showStack,a=h.__lookupGetter__(e),g=h.__lookupSetter__(e);c&&e&&h&&(b?n&&(delete h[e],h[e]=h[k],delete h[k]):n||(a||g?console.log(h+'["'+e+'"] is a getter/setter, watching not support'):(h[k]=h[e],h.__defineSetter__(e,function(l){var r=
h[k];if(f.onSet)f.onSet(l,r);r=h+"."+e+" changed: "+r+" -> "+l;m&&(r+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));f.verbose&&console.log(r);if(d)debugger;return h[k]=l}),h.__defineGetter__(e,function(){if(f.onGet)f.onGet(h[k]);return h[k]}),console.log("Watcher for "+h+"."+e+" installed"))))}},debugFunctionWrapper:function(f){var c=f.target,h=this.get(c,-1),e=this.parts().slice(-1)[0],k=void 0===f.haltWhenChanged?!0:f.haltWhenChanged,n=h&&e&&h[e],b=n&&n.isDebugFunctionWrapper;
c&&e&&n&&h&&(f.uninstall?b&&(h[e]=h[e].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+e)):b?console.log("debugFunctionWrapper for "+h+"."+e+" already installed"):(f=h[e]=n.wrap(function(d){var m=Array.from(arguments);if(k)debugger;return m.shift().apply(h,m)}),f.isDebugFunctionWrapper=!0,f.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+e+" installed")))}});lv.default=Ti;var Wj=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");Wj.clone=au;
Wj.without=bu;Wj.hull=cu;Wj.subgraphReachableBy=du;Wj.invert=As;Wj.sortByReference=eu;Wj.reduce=Bs;Wj.random=fu;Wj.range=jc;Wj.shuffle=Mb;Wj.withoutAll=jd;Wj.flatten=bd;Wj.uniq=bb;Wj.values=wl;Wj.clone=au;Wj.clone=au;Wj.without=bu;Wj.without=bu;Wj.hull=cu;Wj.hull=cu;Wj.subgraphReachableBy=du;Wj.subgraphReachableBy=du;Wj.invert=As;Wj.invert=As;Wj.sortByReference=eu;Wj.sortByReference=eu;Wj.reduce=Bs;Wj.reduce=Bs;Wj.random=fu;Wj.random=fu;var iu=Object.freeze({__proto__:null,clone:au,without:bu,hull:cu,
subgraphReachableBy:du,invert:As,sortByReference:eu,reduce:Bs,random:fu});Ba("bR",iu);var Ui=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");Ui.isInterval=gu;Ui.sort=Kx;Ui.compare=uo;Ui.coalesce=dw;Ui.coalesceOverlapping=Lx;Ui.mergeOverlapping=ir;Ui.intervalsInRangeDo=Zm;Ui.intervalsInbetween=ew;Ui.mapToMatchingIndexes=Cs;Ui.benchmark=function(){function f(c,h,e){return c.name+" "+Ui.timeToRunN(function(){return c.apply(null,h,1E5)},e)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",f(Ui.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),f(Ui.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),f(Ui.mapToMatchingIndexes,[Ui.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};Ui.range=jc;Ui.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Ui.isInterval=gu;Ui.isInterval=gu;Ui.sort=Kx;Ui.sort=Kx;Ui.compare=uo;Ui.compare=uo;Ui.coalesce=dw;Ui.coalesce=dw;Ui.coalesceOverlapping=
Lx;Ui.coalesceOverlapping=Lx;Ui.mergeOverlapping=ir;Ui.mergeOverlapping=ir;Ui.intervalsInRangeDo=Zm;Ui.intervalsInRangeDo=Zm;Ui.intervalsInbetween=ew;Ui.intervalsInbetween=ew;Ui.mapToMatchingIndexes=Cs;Ui.mapToMatchingIndexes=Cs;var AF=Object.freeze({__proto__:null,isInterval:gu,sort:Kx,compare:uo,coalesce:dw,coalesceOverlapping:Lx,mergeOverlapping:ir,intervalsInRangeDo:Zm,intervalsInbetween:ew,mapToMatchingIndexes:Cs}),vo=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");vo.create=
fw;vo.toArray=Xn;vo.originalToProjectedIndex=gw;vo.projectedToOriginalIndex=jr;vo.transformToIncludeIndex=Ds;vo.create=fw;vo.create=fw;vo.toArray=Xn;vo.toArray=Xn;vo.originalToProjectedIndex=gw;vo.originalToProjectedIndex=gw;vo.projectedToOriginalIndex=jr;vo.projectedToOriginalIndex=jr;vo.transformToIncludeIndex=Ds;vo.transformToIncludeIndex=Ds;var zF=Object.freeze({__proto__:null,create:fw,toArray:Xn,originalToProjectedIndex:gw,projectedToOriginalIndex:jr,transformToIncludeIndex:Ds}),$h=lively.FreezerRuntime.recorderFor("lively.lang/grid.js");
$h.get=kr;$h.set=Ak;$h.getRow=lr;$h.setRow=mq;$h.getCol=ca;$h.setCol=wa;$h.create=ib;$h.mapCreate=Gb;$h.forEach=zc;$h.map=Kc;$h.toObjects=re;$h.tableFromObjects=Ke;$h.benchmark=function(){var f=[],c=$h.create(1E3,200,1);var h=$h.timeToRunN(function(){$h.forEach(c,function(k){})},10);f.push("forEach: "+h.toFixed(2)+"ms");h=$h.timeToRunN(function(){$h.map(c,function(k,n,b){return n+b+Math.round(100*Math.random())})},10);f.push("map: "+h.toFixed(2)+"ms");var e=$h.create(1E3,2E3);h=$h.timeToRunN(function(){e=
Array(1E3);for(var k=0;1E3>k;k++)e[k]=Array(2E3);$h.forEach(c,function(n,b,d){e[b][d]=b+d+Math.round(100*Math.random())})},10);f.push("map with forEach: "+h+"ms");f.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return f.join("\n")};$h.arrayWithN=lc;$h.timeToRunN=yc;$h.get=kr;$h.get=kr;$h.set=Ak;$h.set=Ak;$h.getRow=lr;$h.getRow=lr;$h.setRow=mq;$h.setRow=mq;$h.getCol=ca;$h.getCol=ca;$h.setCol=wa;$h.setCol=wa;$h.create=ib;$h.create=ib;$h.mapCreate=Gb;$h.mapCreate=
Gb;$h.forEach=zc;$h.forEach=zc;$h.map=Kc;$h.map=Kc;$h.toObjects=re;$h.toObjects=re;$h.tableFromObjects=Ke;$h.tableFromObjects=Ke;var Uz=Object.freeze({__proto__:null,get:kr,set:Ak,getRow:lr,setRow:mq,getCol:ca,setCol:wa,create:ib,mapCreate:Gb,forEach:zc,map:Kc,toObjects:re,tableFromObjects:Ke}),nl=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");nl.prewalk=uf;nl.postwalk=Cg;nl.find=ph;nl.filter=Rh;nl.map=mh;nl.mapTree=og;nl.flatten=bd;nl.detect=nl.find;var qU=nl.detect;nl.prewalk=uf;nl.prewalk=
uf;nl.postwalk=Cg;nl.postwalk=Cg;nl.find=ph;nl.find=ph;nl.detect=qU;nl.detect=qU;nl.filter=Rh;nl.filter=Rh;nl.map=mh;nl.map=mh;nl.mapTree=og;nl.mapTree=og;var hu=Object.freeze({__proto__:null,prewalk:uf,postwalk:Cg,find:ph,detect:qU,filter:Rh,map:mh,mapTree:og});Ba("a2",hu);var fE=lively.FreezerRuntime.recorderFor("lively.lang/events.js");fE.isNode="undefined"!==typeof process&&process.versions&&process.versions.node;fE.makeEmitter=fE.isNode?function(f,c){if(f.on&&f.removeListener)return f;var h=
"undefined"!==typeof System?System._nodeRequire("events"):require("events");Object.assign(f,h.EventEmitter.prototype);h.EventEmitter.call(f);c&&c.maxListenerLimit&&f.setMaxListeners(c.maxListenerLimit);return f}:function(f){if(f.on&&f.removeListener)return f;f.listeners={};f.on=function(c,h){h&&(f.listeners[c]||(f.listeners[c]=[]),f.listeners[c].push(h))};f.once=function(c,h){function e(){f.removeListener(c,e);h.apply(this,arguments)}if(h)f.on(c,e)};f.removeListener=function(c,h){f.listeners[c]&&
(f.listeners[c]=f.listeners[c].filter(function(e){return e!==h}))};f.removeAllListeners=function(c){f.listeners[c]&&(f.listeners[c]=[])};f.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=f.listeners[h])&&h.length&&h.forEach(function(e){try{e.apply(null,c)}catch(k){console.error("Error in event handler: %s",k.stack||String(k))}})};return f};var MC=fE.makeEmitter;fE.makeEmitter=MC;fE.makeEmitter=MC;var Tz=Object.freeze({__proto__:null,makeEmitter:MC});Ba("bl",Tz);var fm=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");
fm.create=ki;fm.remove=Nb;fm.pluck=tb;fm.makeEmitter=MC;fm.newUUID=Ro;fm.OFFLINE="offline";fm.ONLINE="online";fm.CONNECTING="connecting";fm.create=ki;fm.create=ki;var yF=Object.freeze({__proto__:null,create:ki}),ai=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");ai.fork=gm;ai.create=$m;ai.makeEmitter=MC;ai.newUUID=Ro;ai.waitFor=ml;ai.messengerCreate=ki;ai.Closure=fk;ai.isNodejs="undefined"!==typeof require&&"undefined"!==typeof process;ai.WorkerSetup={loadDependenciesBrowser:function(f){importScripts.apply("undefined"!==
typeof self?self:this,f.scriptsToLoad||[])},loadDependenciesNodejs:function(f){(global.lively||(global.lively={})).lang=require(require("path").join(f.libLocation,"index"))},initBrowserGlobals:function(f){remoteWorker.send=function(c){postMessage(c)};f="undefined"!==typeof self?self:this;f=f.Global=f;f.window=f;f.console=f.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=function(){for(var e=arguments[0],k=1;k<arguments.length;k++)e=e.replace("%s",arguments[k]);remoteWorker.send({type:h,
message:["[",h.toUpperCase(),"] ",e].join("")})}});return c}()},initOnMessageHandler:function(f){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(f){remoteWorker.callStringifiedFunction=function(c,h,e){try{var k=eval("("+c+")")}catch(d){e(Error("Cannot create function from string: "+
d.stack||d));return}c=k.length===h.length+1;var n=lively.lang.fun.once(function(d,m){remoteWorker.isBusy=!1;e(d,m)});remoteWorker.isBusy=!0;c&&h.push(n);try{var b=k.apply(remoteWorker,h.concat([n]))}catch(d){n(d,null);return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,e=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(e,c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=
function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(f){if(!f.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,
h){try{var e=eval(c.data.expr)}catch(k){e=k.stack||k}h.answer(c,{result:String(e)})},run:function(c,h){var e=c.data.func,k=c.data.args;e?remoteWorker.callStringifiedFunction(e,k,function(n,b){h.answer(c,{error:n?String(n):null,result:b})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",
workerReady:!1});remoteWorker.close()}})}};ai.BrowserWorker={create:function(f){f=f||{};if(!f.libLocation&&!f.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');f.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));
h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[ai.WorkerSetup.initBrowserGlobals,ai.WorkerSetup.loadDependenciesBrowser,ai.WorkerSetup.initOnMessageHandler,ai.WorkerSetup.initWorkerInterface,ai.WorkerSetup.initWorkerMessenger].join("\n"));c="("+ai.Closure.fromSource(c).getFuncSource()+
")();";c=new Worker(function(h){try{var e=new Blob([h],{type:"text/javascript"})}catch(k){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,e=new BlobBuilder,e.append(h),e=e.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(e)}(c));(function(h,e){ai.makeEmitter(e);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var k=Object.keys(h).reduce(function(n,b){"function"!==typeof h[b]&&(n[b]=h[b]);return n},{});e.onmessage=function(n){void 0!==n.data.workerReady?(e.ready=!!n.data.workerReady,e.ready?e.emit("ready"):e.emit("close")):e.emit("message",n.data)};e.errors=[];e.onerror=function(n){console.error(n);e.errors.push(n);e.emit("error",n)};e.postMessage({action:"setup",options:k})})(f,c);return c}};ai.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(f){f=f||{};var c,h=ai.makeEmitter({ready:!1,
errors:[],postMessage:function(e){c?h.ready?c.send(e):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});ai.NodejsWorker.startWorker(f,function(e,k){e?(h.ready=!1,h.emit("error",e)):(c=k,c.on("message",function(n){ai.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var f=process;console.log("[WORKER] Starting init");f.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));f.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);f.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(f,c,h){var e=require("path"),k=require("os"),n=require("fs");k=e.join(k.tmpDir(),"lively-nodejs-workers/");var b=e.join(k,"nodejs-worker-init.js");ai.NodejsWorker.initCodeFileCreated?n.exists(b,function(d){d?h(null,b):ai.NodejsWorker.createWorkerCodeFile(f,b,c,h)}):ai.NodejsWorker.createWorkerCodeFile(f,b,c,h)},createWorkerCodeFile:function(f,c,h,e){f=require("path");var k=require("fs"),n=require("child_process").exec;n("mkdir -p "+f.dirname(c),
function(b,d,m){b?e(Error(["[WORKER PARENT] Could not create worker temp dir:",d,m].join("\n"))):k.writeFile(c,h,function(a){ai.NodejsWorker.debug&&console.log("worker code file %s created",c);ai.NodejsWorker.initCodeFileCreated=!0;e(a,c)})})},startWorker:function(f,c){var h=require("util"),e=require("child_process").fork,k=String(ai.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[ai.WorkerSetup.loadDependenciesNodejs,ai.WorkerSetup.initOnMessageHandler,ai.WorkerSetup.initWorkerInterface,
ai.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",k);ai.NodejsWorker.ensureInitCodeFile(f,h,function(n,b){if(n)return c(n);var d=e(b,{});ai.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(m){"pong"===m.action?console.log("[WORKER pong] ",m):"log"===m.action&&console.log("[Message from WORKER] ",m.data)});d.once("message",function(m){ai.NodejsWorker.debug&&console.log("worker setup done");c(null,d,m)});d.on("close",function(){ai.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:f}});global.WORKER=d})}};ai.fork=gm;ai.fork=gm;ai.create=$m;ai.create=$m;var xF=Object.freeze({__proto__:null,fork:gm,create:$m}),xe=lively.FreezerRuntime.recorderFor("lively.lang/index.js");xe.createLivelyLangObject=function(){return{chain:xe.chain,noConflict:xe.noConflict,installGlobals:xe.installGlobals,uninstallGlobals:xe.uninstallGlobals,globalInterfaceSpec:xe.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};xe.globalInstall=an;xe.chain=
hm;xe.createChain=function(f,c){return Object.keys(f).reduce(function(h,e){h[e]=function(){var k=Array.prototype.slice.call(arguments);k=f[e].apply(null,[c].concat(k));return xe.chain(k)};return h},{value:function(){return c}})};xe.noConflict=Dh;xe.installGlobals=nh;xe.installProperty=function(f,c){if(!f.isIn(xe.livelyLang))throw c=Error("property not provided by lively.lang: "+f),console.error(c.stack||c),c;f=f.get(xe.livelyLang);if("function"===typeof f&&"prototype"===c.slice(-2,-1).toString()){var h=
f;f=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this);return h.apply(null,e)};f.toString=function(){return h.toString()}}c.set(xe.GLOBAL,f,!0)};xe.uninstallGlobals=Cp;xe.string=Li;xe.num=sm;xe.fun=xn;xe.Closure=fk;xe.arr=ng;xe.obj=Ng;xe.properties=Uo;xe.date=ju;xe.promise=xh;xe.Path=Ti;xe.graph=iu;xe.interval=AF;xe.arrayProjection=zF;xe.Group=yn;xe.grid=Uz;xe.tree=hu;xe.events=Tz;xe.messenger=yF;xe.worker=xF;xe.worker=xF;xe.worker=xF;xe.messenger=yF;xe.messenger=yF;xe.events=
Tz;xe.events=Tz;xe.tree=hu;xe.tree=hu;xe.grid=Uz;xe.grid=Uz;xe.arrayProjection=zF;xe.arrayProjection=zF;xe.interval=AF;xe.interval=AF;xe.graph=iu;xe.graph=iu;xe.date=ju;xe.date=ju;xe.properties=Uo;xe.properties=Uo;xe.obj=Ng;xe.obj=Ng;xe.arr=ng;xe.arr=ng;xe.fun=xn;xe.fun=xn;xe.num=sm;xe.num=sm;xe.string=Li;xe.string=Li;xe.Closure=fk;xe.Closure=fk;xe.promise=xh;xe.promise=xh;xe.Path=Ti;xe.Path=Ti;xe.Group=yn;xe.Group=yn;xe.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;xe.isNode="undefined"!==typeof process&&process.env&&"function"===typeof process.exit;xe.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var gM=xe.createLivelyLangObject();xe.livelyLang=gM;xe.livelyLang=gM;xe.livelyLang=gM;xe.globalInstall=
an;xe.globalInstall=an;xe.chain=hm;xe.chain=hm;xe.noConflict=Dh;xe.noConflict=Dh;xe.installGlobals=nh;xe.installGlobals=nh;xe.uninstallGlobals=Cp;xe.uninstallGlobals=Cp;var l8=Object.freeze({__proto__:null,worker:xF,messenger:yF,events:Tz,tree:hu,grid:Uz,arrayProjection:zF,interval:AF,graph:iu,date:ju,properties:Uo,obj:Ng,arr:ng,fun:xn,num:sm,string:Li,Closure:fk,promise:xh,Path:Ti,Group:yn,livelyLang:gM,globalInstall:an,chain:hm,noConflict:Dh,installGlobals:nh,uninstallGlobals:Cp}),kj=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
kj.parseUnit=function(f,c){c||(c=[0,""]);f=String(f);var h=parseFloat(f,10);c[0]=h;c[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return c};kj.unit=function(f){return kj.parseUnit(f)[1]};kj.unitLess=function(f){return kj.parseUnit(f)[0]};kj.genericCssLengthParser=BF;kj.cssLengthToPixels=Vz;kj.baseFontSize="16px";if(System.get("@system-env").browser)try{kj.newBaseFontSize=kj.genericCssLengthParser(kj.baseFontSize)(window.getComputedStyle(document.body).fontSize),kj.newBaseFontSize&&"NaN"!==kj.newBaseFontSize.slice(0,
3)&&(kj.baseFontSize=kj.newBaseFontSize)}catch(f){}kj.genericCssLengthParser=BF;kj.genericCssLengthParser=BF;var rU=kj.genericCssLengthParser(kj.baseFontSize);kj.parseCssLength=rU;kj.parseCssLength=rU;kj.parseCssLength=rU;kj.cssLengthToPixels=Vz;kj.cssLengthToPixels=Vz;var ne=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");ne.rect=Gl;ne.pt=th;ne.num=sm;ne.string=Li;ne.grid=Uz;ne.cssLengthToPixels=Vz;var Yg=function(f,c){this.x=f||0;this.y=c||0};Yg.ensure=function(f){return f instanceof
ne.Point?f:new ne.Point(f.x,f.y)};Yg.polar=function(f,c){return new ne.Point(f*Math.cos(c),f*Math.sin(c))};Yg.random=function(f){return new ne.Point(ne.num.randomSmallerInteger(f.x),ne.num.randomSmallerInteger(f.y))};Yg.fromLiteral=function(f){return ne.pt(f.x,f.y)};Yg.fromTuple=function(f){return ne.pt(f[0],f[1])};Yg.prototype.getX=function(){return this.x};Yg.prototype.getY=function(){return this.y};Yg.prototype.toFixed=function(f){return new ne.Point(this.x.toFixed(f),this.y.toFixed(f))};Yg.prototype.addPt=
function(f){return new ne.Point(this.x+f.x,this.y+f.y)};Yg.prototype.addXY=function(f,c){return new ne.Point(this.x+f,this.y+c)};Yg.prototype.midPt=function(f){return new ne.Point((this.x+f.x)/2,(this.y+f.y)/2)};Yg.prototype.subPt=function(f){return new ne.Point(this.x-f.x,this.y-f.y)};Yg.prototype.subXY=function(f,c){return new ne.Point(this.x-f,this.y-c)};Yg.prototype.scaleBy=function(f,c){return new ne.Point(this.x*f,this.y*(c||f))};Yg.prototype.scaleByPt=function(f){return new ne.Point(this.x*
f.x,this.y*f.y)};Yg.prototype.negated=function(){return new ne.Point(-this.x,-this.y)};Yg.prototype.inverted=function(){return new ne.Point(1/this.x,1/this.y)};Yg.prototype.invertedSafely=function(){return new ne.Point(this.x&&1/this.x,this.y&&1/this.y)};Yg.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};Yg.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};Yg.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};Yg.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};Yg.prototype.withX=function(f){return ne.pt(f,this.y)};Yg.prototype.withY=function(f){return ne.pt(this.x,f)};Yg.prototype.copy=function(){return new ne.Point(this.x,this.y)};Yg.prototype.minPt=function(f,c){c||(c=new ne.Point(0,0));c.x=Math.min(this.x,f.x);c.y=Math.min(this.y,f.y);return c};Yg.prototype.maxPt=function(f,c){c||(c=new ne.Point(0,0));c.x=Math.max(this.x,f.x);c.y=Math.max(this.y,f.y);return c};Yg.prototype.random=function(){return ne.Point.random(this)};Yg.prototype.normalized=
function(){var f=this.r();return ne.pt(this.x/f,this.y/f)};Yg.prototype.fastNormalized=function(){var f=this.fastR();return ne.pt(this.x/f,this.y/f)};Yg.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};Yg.prototype.matrixTransform=function(f,c){var h=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return c?Object.assign(c,{x:h,y:f}):ne.pt(h,f)};Yg.prototype.matrixTransformDirection=function(f,c){var h=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return c?Object.assign(c,{x:h,
y:f}):ne.pt(h,f)};Yg.prototype.griddedBy=function(f){return ne.pt(this.x-this.x%f.x,this.y-this.y%f.y)};Yg.prototype.roundTo=function(f){return new ne.Point(ne.num.roundTo(this.x,f),ne.num.roundTo(this.y,f))};Yg.prototype.dist=function(f){var c=this.x-f.x;f=this.y-f.y;return Math.sqrt(c*c+f*f)};Yg.prototype.distSquared=function(f){var c=this.x-f.x;f=this.y-f.y;return c*c+f*f};Yg.prototype.nearestPointOnLineBetween=function(f,c){if(f.x==c.x)return ne.pt(f.x,this.y);if(f.y==c.y)return ne.pt(this.x,
f.y);var h=f.x;f=f.y;var e=c.x-h;c=c.y-f;var k=((this.y-f)/e+(this.x-h)/c)/(e/c+c/e);return ne.pt(h+k*e,f+k*c)};Yg.prototype.interpolate=function(f,c,h){return void 0===h||h?ne.pt(ne.num.interpolate(f,this.x,c.x),ne.num.interpolate(f,this.y,c.y)):ne.Point.polar(ne.num.interpolate(f,this.r(),c.r()),ne.num.interpolate(f,this.theta(),c.theta()))};Yg.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Yg.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,c=17,h=0;6>h;h++)c=
(c+f/c)/2;return c};Yg.prototype.theta=function(){return Math.atan2(this.y,this.x)};Yg.prototype.asRectangle=function(){return new ne.Rectangle(this.x,this.y,0,0)};Yg.prototype.extent=function(f){return new ne.Rectangle(this.x,this.y,f.x,f.y)};Yg.prototype.extentAsRectangle=function(){return new ne.Rectangle(0,0,this.x,this.y)};Yg.prototype.lineTo=function(f){return new ne.Line(this,f)};Yg.prototype.toTuple=function(){return[this.x,this.y]};Yg.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Yg.prototype.toString=function(f){return void 0===f||f?ne.string.format("pt(%1.f,%1.f)",this.x,this.y):ne.string.format("pt(%10.d,%10.d)",this.x,this.y)};Yg.prototype.inspect=function(){return JSON.stringify(this)};Yg.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Yg.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ba("ae",Yg);ne.Point=Yg;var Re=function(f,
c,h,e){this.x=f||0;this.y=c||0;this.width=h||0;this.height=e||0};Re.fromAny=function(f,c){return ne.rect(f.minPt(c),f.maxPt(c))};Re.fromLiteral=function(f){return new ne.Rectangle(f.x,f.y,f.width,f.height)};Re.fromTuple=function(f){return new ne.Rectangle(f[0],f[1],f[2],f[3])};Re.unionPts=function(f){for(var c=f[0],h=f[0],e=1;e<f.length;e++)c=c.minPt(f[e]),h=h.maxPt(f[e]);return ne.rect(c,h)};Re.ensure=function(f){return f instanceof ne.Rectangle?f:new ne.Rectangle(f.x,f.y,f.width,f.height)};Re.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var c=f.getBoundingClientRect();return ne.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){c=ne.cssLengthToPixels(f.style.left||"0px");var h=ne.cssLengthToPixels(f.style.top||"0px"),e=ne.cssLengthToPixels(f.style.width||"0px");f=ne.cssLengthToPixels(f.style.hieght||"0px");return new ne.Rectangle(c,h,e,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new ne.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};Re.inset=function(f,c,h,e){void 0===c&&(c=f);void 0===h&&(h=f);void 0===e&&(e=c);return new ne.Rectangle(f,c,h-f,e-c)};Re.prototype.getX=function(){return this.x};Re.prototype.getY=function(){return this.y};Re.prototype.getWidth=function(){return this.width};Re.prototype.getHeight=function(){return this.height};Re.prototype.copy=function(){return new ne.Rectangle(this.x,this.y,this.width,this.height)};Re.prototype.toFixed=
function(f){return new ne.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};Re.prototype.withWidth=function(f){return new ne.Rectangle(this.x,this.y,f,this.height)};Re.prototype.withHeight=function(f){return new ne.Rectangle(this.x,this.y,this.width,f)};Re.prototype.withX=function(f){return new ne.Rectangle(f,this.y,this.width,this.height)};Re.prototype.withY=function(f){return new ne.Rectangle(this.x,f,this.width,this.height)};Re.prototype.withExtent=function(f){return new ne.Rectangle(this.x,
this.y,f.x,f.y)};Re.prototype.withTopLeft=function(f){return ne.Rectangle.fromAny(f,this.bottomRight())};Re.prototype.withTopRight=function(f){return ne.Rectangle.fromAny(this.bottomLeft(),f)};Re.prototype.withBottomRight=function(f){return ne.Rectangle.fromAny(f,this.topLeft())};Re.prototype.withBottomLeft=function(f){return ne.Rectangle.fromAny(f,this.topRight())};Re.prototype.withLeftCenter=function(f){return new ne.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};Re.prototype.withRightCenter=
function(f){return new ne.Rectangle(this.x,this.y,f.x-this.x,this.height)};Re.prototype.withTopCenter=function(f){return new ne.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};Re.prototype.withBottomCenter=function(f){return new ne.Rectangle(this.x,this.y,this.width,f.y-this.y)};Re.prototype.withCenter=function(f){return new ne.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};Re.prototype.insetBy=function(f){return new ne.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};Re.prototype.insetByPt=function(f){return new ne.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};Re.prototype.grid=function(f,c){var h=this.width/c,e=this.height/f;return ne.grid.mapCreate(f,c,function(k,n){return new ne.Rectangle(h*n,e*k,h,e)})};Re.prototype.divide=function(f){var c=this;return f.map(function(h){return ne.rect(c.x+c.width*h.x,c.y+c.height*h.y,c.width*h.width,c.height*h.height)})};Re.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Re.prototype.lineTo=function(f){var c=this.center(),h=f.center();h=c.lineTo(h);c=this.lineIntersection(h)[0];f=f.lineIntersection(h)[0];return c&&f&&c.lineTo(f)};Re.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};Re.prototype.inspect=function(){return JSON.stringify(this)};Re.prototype.topLeft=function(){return new ne.Point(this.x,this.y)};Re.prototype.topRight=function(){return new ne.Point(this.maxX(),this.y)};Re.prototype.bottomRight=
function(){return new ne.Point(this.maxX(),this.maxY())};Re.prototype.bottomLeft=function(){return new ne.Point(this.x,this.maxY())};Re.prototype.leftCenter=function(){return new ne.Point(this.x,this.center().y)};Re.prototype.rightCenter=function(){return new ne.Point(this.maxX(),this.center().y)};Re.prototype.topCenter=function(){return new ne.Point(this.center().x,this.y)};Re.prototype.bottomCenter=function(){return new ne.Point(this.center().x,this.maxY())};Re.prototype.extent=function(){return new ne.Point(this.width,
this.height)};Re.prototype.center=function(){return new ne.Point(this.x+this.width/2,this.y+this.height/2)};Re.prototype.topEdge=function(){return new ne.Line(this.topLeft(),this.topRight())};Re.prototype.bottomEdge=function(){return new ne.Line(this.bottomLeft(),this.bottomRight())};Re.prototype.leftEdge=function(){return new ne.Line(this.topLeft(),this.bottomLeft())};Re.prototype.rightEdge=function(){return new ne.Line(this.topRight(),this.bottomRight())};Re.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Re.prototype.allPoints=function(){for(var f=this.x,c=this.y,h=this.width,e=this.height,k=[],n=c;n<c+e;n++)for(var b=f;b<f+h;b++)k.push(ne.pt(b,n));return k};Re.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};Re.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};Re.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};Re.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};Re.prototype.translatedBy=function(f){return new ne.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};Re.prototype.scaleByRect=function(f){return new ne.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};Re.prototype.scaleRectIn=function(f){return new ne.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};Re.prototype.scaleRectTo=
function(f){var c,h;this.width>this.height?h=this.width:c=this.height;f=h?f.width/h:f.height/c;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};Re.prototype.expandBy=function(f){return this.insetBy(0-f)};Re.prototype.translateForInclusion=function(f){var c=f.x,h=f.y,e=c+f.width,k=h+f.height;e>this.right()&&(c-=e-this.right());k>this.bottom()&&(h-=k-this.bottom());c<this.x&&(c=this.x);h<this.y&&(h=this.y);return ne.rect(c,h,f.width,f.height)};Re.prototype.transformRectForInclusion=
function(f){var c=this.topLeft().maxPt(f.topLeft());f=c.addPt(f.extent());f=this.bottomRight().minPt(f);return ne.rect(c,f)};Re.prototype.insetByRect=function(f){return new ne.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};Re.prototype.outsetByRect=function(f){return new ne.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};Re.prototype.interpolate=function(f,c){var h=this.topLeft(),
e=this.bottomRight(),k=c.topLeft();c=c.bottomRight();return ne.Rectangle.fromAny(h.interpolate(f,k),e.interpolate(f,c))};Re.prototype.intersection=function(f){var c=Math.max(this.x,f.x),h=Math.max(this.y,f.y);return new ne.Rectangle(c,h,Math.min(this.x+this.width,f.x+f.width)-c,Math.min(this.y+this.height,f.y+f.height)-h)};Re.prototype.union=function(f){return ne.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};Re.prototype.lineIntersection=function(f){return this.edges().map(function(c){return c.intersection(f)}).filter(function(c){return!!c})};
Re.prototype.dist=function(f){var c=this.closestPointToPt(f.center());f=f.closestPointToPt(c);return c.dist(f)};Re.prototype.relativeToAbsPoint=function(f){return new ne.Point(this.x+this.width*f.x,this.y+this.height*f.y)};Re.prototype.closestPointToPt=function(f){return ne.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};Re.prototype.maxX=function(){return this.x+this.width};Re.prototype.maxY=function(){return this.y+this.height};Re.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Re.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Re.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Re.prototype.randomPoint=function(){return ne.Point.random(ne.pt(this.width,this.height)).addPt(this.topLeft())};Re.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};Re.prototype.left=function(){return this.x};Re.prototype.right=function(){return this.maxX()};
Re.prototype.top=function(){return this.y};Re.prototype.bottom=function(){return this.maxY()};Re.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Re.prototype.toAttributeValue=function(f){f=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",f||.01)};Re.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Re.prototype.partNamed=function(f){return this[f].call(this)};Re.prototype.withPartNamed=function(f,c){return this[this.setterName(f)].call(this,c)};Re.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};Re.prototype.partNameNear=function(f,c,h){f=this.partNameNearest(f,c);return c.dist(this.partNamed(f))<h?f:null};Re.prototype.partNameNearest=function(f,c){for(var h=1E99,e,k=0;k<f.length;k++){e=f[k];var n=c.dist(this.partNamed(e));if(n<
h){var b=e;h=n}}return b};Re.prototype.toString=function(){return ne.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Re.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Re.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ba("$",Re);ne.Rectangle=Re;var il=function(f,c,h){f?f instanceof ne.Point?(c=c||0,void 0===h&&(h=ne.pt(1,1)),this.a=this.ensureNumber(h.x*Math.cos(c)),this.b=this.ensureNumber(h.y*Math.sin(c)),this.c=this.ensureNumber(h.x*-Math.sin(c)),this.d=this.ensureNumber(h.y*Math.cos(c)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};il.prototype.copy=function(){return new ne.Transform(this)};il.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};il.prototype.getRotation=function(){var f=ne.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};il.prototype.getScale=function(){var f=this.a,c=this.c;f=Math.sqrt(f*f+c*c);return Math.abs(f-1)<this.eps?1:f};il.prototype.getScalePoint=function(){var f=this.a,c=this.b,h=this.c,e=this.d,k=Math.atan2(-h,f);return ne.pt(Math.sqrt(f*f+h*h),Math.abs(c)>Math.abs(e)?c/Math.sin(k):e/Math.cos(k))};il.prototype.getTranslation=function(){return ne.pt(this.e,this.f)};il.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};il.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var c=this.getRotation(),h=this.getScalePoint();0!=c&&(f+=" rotate("+this.getRotation()+")");if(1!=h.x||1!=h.y)f+=" scale("+h.x+","+h.y+")";return f};il.prototype.toCSSValue=function(f){var c="",h=this.getTranslation();c+="translate("+h.x.toFixed(2)+"px,"+h.y.toFixed(2)+"px)";if(f){h=f.width/2;var e=f.height/2;c+=" translate("+h.toFixed(2)+"px,"+e.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(h=f.width/2,e=f.height/2,c+=" translate("+(-1*h).toFixed(2)+"px,"+(-1*e).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)c+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return c};il.prototype.toCSSTransformString=function(){var f=this.getRotation(),c=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+c+","+c+")"};il.prototype.toString=function(){return this.toCSSTransformString()};il.prototype.toMatrix=function(){return this.copy()};il.prototype.transformPoint=
function(f,c){return f.matrixTransform(this,c)};il.prototype.transformDirection=function(f,c){return f.matrixTransformDirection(this,c)};il.prototype.matrixTransformForMinMax=function(f,c,h){var e=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;e>h.x&&(h.x=e);f>h.y&&(h.y=f);e<c.x&&(c.x=e);f<c.y&&(c.y=f)};il.prototype.transformRectToRect=function(f){var c=ne.pt(Infinity,Infinity),h=ne.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),c,h);this.matrixTransformForMinMax(f.bottomRight(),
c,h);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),c,h),this.matrixTransformForMinMax(f.bottomLeft(),c,h));return ne.rect(c,h)};il.prototype.preConcatenate=function(f){var c=this.matrix_||this.toMatrix();this.a=f.a*c.a+f.c*c.b;this.b=f.b*c.a+f.d*c.b;this.c=f.a*c.c+f.c*c.d;this.d=f.b*c.c+f.d*c.d;this.e=f.a*c.e+f.c*c.f+f.e;this.f=f.b*c.e+f.d*c.f+f.f;this.matrix_=this.toMatrix();return this};il.prototype.invert=function(){var f=this.copy(),c=1/(f.a*f.d-f.c*f.b);this.a=f.d*c;this.b=
-f.b*c;this.c=-f.c*c;this.d=f.a*c;this.e=(f.c*f.f-f.e*f.d)*c;this.f=-(f.a*f.f-f.b*f.e)*c;return this};il.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};il.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};il.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(il.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});ne.Transform=il;var pn=function(f,c){this.start=f;this.end=c};pn.fromCoords=function(f,c,h,e){return new ne.Line(ne.pt(f,c),ne.pt(h,e))};pn.prototype.withStart=function(f){return new ne.Line(f,this.end)};pn.prototype.withEnd=function(f){return new ne.Line(this.start,f)};pn.prototype.sampleN=function(f){f=f||10;for(var c=
this.end.subPt(this.start).scaleBy(1/f),h=[],e=0;e<=f;e++)h.push(this.start.addPt(c.scaleBy(e)));return h};pn.prototype.sample=function(f){return this.sampleN(this.length()/f)};pn.prototype.length=function(){return this.start.dist(this.end)};pn.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};pn.prototype.distanceFromLine=function(f){var c=this.start.x,h=this.start.y,e=this.end.x,k=this.end.y;return Math.abs((k-h)*f.x-(e-c)*f.y+e*h-k*c)/Math.sqrt(Math.pow(k-
h,2)+Math.pow(e-c,2))};pn.prototype.includesPoint=function(f,c){var h=this.start.x,e=this.start.y,k=this.end.x,n=this.end.y,b=f.x;f=f.y;var d=0===(k-h)*(f-e)-(b-h)*(n-e);if(c||!d)return d;c=Math.min(e,n);d=Math.max(h,k);e=Math.max(e,n);return Math.min(h,k)<=b&&b<=d&&c<=f&&f<=e};pn.prototype.intersection=function(f,c){var h=this.start,e=this.end,k=f.start,n=f.end;f=h.x;h=h.y;var b=e.x;e=e.y;var d=k.x;k=k.y;var m=n.x;n=n.y;var a=((f*e-h*b)*(d-m)-(f-b)*(d*n-k*m))/((f-b)*(k-n)-(h-e)*(d-m)),g=((f*e-h*
b)*(k-n)-(h-e)*(d*n-k*m))/((f-b)*(k-n)-(h-e)*(d-m));return Infinity!==a&&Infinity!==g&&(c||ne.num.between(a,f,b,1E-4)&&ne.num.between(g,h,e,1E-4)&&ne.num.between(a,d,m,1E-4)&&ne.num.between(g,k,n,1E-4))?ne.pt(a,g):null};pn.prototype.perpendicularLine=function(f,c,h){f=void 0===f?0:f;c=void 0===c?1:c;h=void 0===h?"cc":h;var e=this.start,k=this.toVector();f=e.addPt(k.scaleBy(f));h=k.theta()+("cc"===h?-1:1)*Math.PI/2;return new ne.Line(f,f.addPt(ne.Point.polar(c,h)))};pn.prototype.toVector=function(){return this.end.subPt(this.start)};
pn.prototype.toString=function(){return ne.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};pn.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(pn.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});ne.Line=pn;ne.rect=Gl;ne.rect=Gl;ne.pt=th;ne.pt=th;var ila=
Object.freeze({__proto__:null,Point:Yg,Rectangle:Re,Transform:il,Line:pn,rect:Gl,pt:th}),ae=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");ae.parse=Mx;ae.Color=function(f){this._listeners={};this.subscribe(ae.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(ae.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(ae.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(ae.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(ae.Events.INT_UPDATED,this._INTUpdated);this.parse(f)};
ae.parse=Mx;ae.parse=Mx;ae.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",UPDATED:"updated"};ae.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",
chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",
deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",
lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",
mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",
pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};ae.absround=
function(f){return.5+f<<0};ae.hue2rgb=function(f,c,h){0>h&&(h+=1);1<h&&--h;return h<1/6?f+6*(c-f)*h:.5>h?c:h<2/3?f+(c-f)*(2/3-h)*6:f};ae.p2v=function(f){return ae.isPercent.test(f)?ae.absround(2.55*parseInt(f)):f};ae.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;ae.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;ae.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;ae.isPercent=/^\d+(\.\d+)*%$/;ae.hexBit=/([0-9a-f])/gi;ae.leadHex=/^#/;ae.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;
ae.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;ae.Color.prototype._decimal=0;ae.Color.prototype._hex="#000000";ae.Color.prototype._red=0;ae.Color.prototype._green=0;ae.Color.prototype._blue=0;ae.Color.prototype._hue=0;ae.Color.prototype._saturation=0;ae.Color.prototype._lightness=0;ae.Color.prototype._brightness=0;ae.Color.prototype._alpha=1;ae.Color.prototype.parse=function(f){if("undefined"==typeof f)return this;switch(!0){case isFinite(f):this.decimal(f);
this.output=ae.Color.INT;break;case f instanceof ae.Color:this.copy(f);break;default:switch(typeof f){case "object":this.set(f);break;case "string":switch(!0){case ae.namedColors.hasOwnProperty(f):f=ae.namedColors[f];f=f.replace(ae.leadHex,"");this.decimal(parseInt(f,16));break;case ae.isHex.test(f):f=f.replace(ae.leadHex,"");3==f.length&&(f=f.replace(ae.hexBit,"$1$1"));this.decimal(parseInt(f,16));break;case ae.isRGB.test(f):f=f.match(ae.matchRGB);this.red(ae.p2v(f[1]));this.green(ae.p2v(f[2]));
this.blue(ae.p2v(f[3]));this.alpha(parseFloat(f[5])||1);this.output=(ae.isPercent.test(f[1])?2:1)+(f[5]?2:0);break;case ae.isHSL.test(f):f=f.match(ae.matchHSL),this.hue(parseInt(f[1])),this.saturation(parseInt(f[2])),this.lightness(parseInt(f[3])),this.alpha(parseFloat(f[5])||1),this.output=f[5]?6:5}}}return this};ae.Color.prototype.clone=function(){return new ae.Color(this.decimal())};ae.Color.prototype.copy=function(f){this.set(f.decimal());return this};ae.Color.prototype.set=function(f,c){if(1==
arguments.length)if("object"==typeof f)for(var h in f){if("function"==typeof this[h])this[h](f[h])}else isFinite(f)&&this.decimal(f);else if("function"==typeof this[f])this[f](c);return this};ae.Color.prototype.interpolate=function(f,c){f instanceof ae.Color||(f=new ae.Color(f));this._red=ae.absround(+this._red+(f._red-this._red)*c);this._green=ae.absround(+this._green+(f._green-this._green)*c);this._blue=ae.absround(+this._blue+(f._blue-this._blue)*c);this._alpha=ae.absround(+this._alpha+(f._alpha-
this._alpha)*c);this.broadcast(ae.Events.RGB_UPDATED);this.broadcast(ae.Events.UPDATED);return this};ae.Color.prototype._RGB2HSL=function(){var f=this._red/255,c=this._green/255,h=this._blue/255,e=Math.max(f,c,h),k=Math.min(f,c,h),n=(e+k)/2;if(e==k)this._saturation=this._hue=0;else{var b=e-k;k=b/(.5>=n?e+k:2-e-k);this._hue=ae.absround((e==f?(c-h)/b+(c<h?6:0):e==c?(h-f)/b+2:(f-c)/b+4)/6*360);this._saturation=ae.absround(100*k)}this._lightness=ae.absround(100*n);this._brightness=ae.absround(100*e)};
ae.Color.prototype._HSL2RGB=function(){var f=this._hue/360,c=this._saturation/100,h=this._lightness/100;c=.5>h?h*(1+c):h+c-h*c;h=2*h-c;this._red=ae.absround(255*ae.hue2rgb(h,c,f+1/3));this._green=ae.absround(255*ae.hue2rgb(h,c,f));this._blue=ae.absround(255*ae.hue2rgb(h,c,f-1/3))};ae.Color.prototype._HSV2RGB=function(){var f=this._hue/360,c=this._saturation/100,h=this._brightness/100,e=0,k=0,n=0,b=Math.floor(6*f),d=6*f-b;f=h*(1-c);var m=h*(1-d*c);c=h*(1-(1-d)*c);switch(b%6){case 0:e=h;k=c;n=f;break;
case 1:e=m;k=h;n=f;break;case 2:e=f;k=h;n=c;break;case 3:e=f;k=m;n=h;break;case 4:e=c;k=f;n=h;break;case 5:e=h,k=f,n=m}this._red=ae.absround(255*e);this._green=ae.absround(255*k);this._blue=ae.absround(255*n)};ae.Color.prototype._INT2HEX=function(){var f=this._decimal.toString(16);f="000000".substr(0,6-f.length)+f;this._hex="#"+f.toUpperCase()};ae.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};ae.Color.prototype._HEX2INT=
function(){this._decimal=parseInt(this._hex,16)};ae.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};ae.Color.prototype._RGBUpdated=function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};ae.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};ae.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};ae.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};
ae.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};ae.Color.prototype._broadcastUpdate=function(){this.broadcast(ae.Events.UPDATED)};ae.Color.prototype.decimal=function(f){return this._handle("_decimal",f,ae.Events.INT_UPDATED)};ae.Color.prototype.hex=function(f){return this._handle("_hex",f,ae.Events.HEX_UPDATED)};ae.Color.prototype.red=function(f){return this._handle("_red",f,ae.Events.RGB_UPDATED)};ae.Color.prototype.green=function(f){return this._handle("_green",
f,ae.Events.RGB_UPDATED)};ae.Color.prototype.blue=function(f){return this._handle("_blue",f,ae.Events.RGB_UPDATED)};ae.Color.prototype.hue=function(f){return this._handle("_hue",f,ae.Events.HSL_UPDATED)};ae.Color.prototype.saturation=function(f){return this._handle("_saturation",f,ae.Events.HSL_UPDATED)};ae.Color.prototype.lightness=function(f){return this._handle("_lightness",f,ae.Events.HSL_UPDATED)};ae.Color.prototype.brightness=function(f){return this._handle("_brightness",f,ae.Events.HSV_UPDATED)};
ae.Color.prototype.alpha=function(f){return this._handle("_alpha",f)};ae.Color.prototype._handle=function(f,c,h){"undefined"!=typeof this[f]&&"undefined"!=typeof c&&(c!=this[f]&&(this[f]=c,h&&this.broadcast(h)),this.broadcast(ae.Events.UPDATED));return this[f]};ae.Color.prototype.getHex=function(){return this._hex};ae.Color.prototype.getRGB=function(){return"rgb("+[ae.absround(this._red),ae.absround(this._green),ae.absround(this._blue)].join(", ")+")"};ae.Color.prototype.getPRGB=function(){return"rgb("+
[ae.absround(100*this._red/255)+"%",ae.absround(100*this._green/255)+"%",ae.absround(100*this._blue/255)+"%"].join(", ")+")"};ae.Color.prototype.getRGBA=function(){return"rgba("+[ae.absround(this._red),ae.absround(this._green),ae.absround(this._blue),this._alpha].join(", ")+")"};ae.Color.prototype.getPRGBA=function(){return"rgba("+[ae.absround(100*this._red/255)+"%",ae.absround(100*this._green/255)+"%",ae.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};ae.Color.prototype.getHSL=function(){return"hsl("+
[ae.absround(this._hue),ae.absround(this._saturation)+"%",ae.absround(this._lightness)+"%"].join(", ")+")"};ae.Color.prototype.getHSLA=function(){return"hsla("+[ae.absround(this._hue),ae.absround(this._saturation)+"%",ae.absround(this._lightness)+"%",this._alpha].join(", ")+")"};ae.Color.prototype.format=function(f){var c={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},h;for(h in c)f=f.split("%"+
h+"%").join(c[h]);return f};ae.Color.prototype.output=0;ae.Color.HEX=0;ae.Color.RGB=1;ae.Color.PRGB=2;ae.Color.RGBA=3;ae.Color.PRGBA=4;ae.Color.HSL=5;ae.Color.HSLA=6;ae.Color.INT=7;ae.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};ae.Color.prototype._listeners=null;ae.Color.prototype._isSubscribed=
function(f){return null!=this._listeners[f]};ae.Color.prototype.subscribe=function(f,c){this._isSubscribed(f)||(this._listeners[f]=[]);this._listeners[f].push(c)};ae.Color.prototype.unsubscribe=function(f,c){if(this._isSubscribed(f))for(var h=this._listeners[f],e=0,k=h.length;e<k;e++)if(h[e]===c)return h.splice(e,1),this.unsubscribe(f,c)};ae.Color.prototype.broadcast=function(f,c){if(this._isSubscribed(f)){f=this._listeners[f];for(var h=f.length,e=0;e<h;e++)f[e].apply(this,c)}};ae.Color.prototype.tween=
function(f,c){c instanceof ae.Color||(c=new ae.Color(c));var h=+new Date,e=this;this.broadcast("tweenStart");var k=setInterval(function(){var n=Math.min(1,(+new Date-h)/f);e.interpolate(c,n);e.broadcast("tweenProgress");1==n&&(clearInterval(k),e.broadcast("tweenComplete"))},20);return k};ae.Color.prototype.bind=function(f,c){var h=this;this.subscribe("updated",function(){f[c]=h.toString()})};ae.Color.random=function(){return new ae.Color(ae.absround(16777215*Math.random()))};ae.Color.bind=function(f,
c){var h=new ae.Color(f[c]);h.bind(f,c);return h};var he=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");he.floor=function(f){return Math.floor(255.99*f)};he.pad=function(f,c,h){h=void 0===h?he.arr.last:h;return[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(Array(Math.max(c-f.length,0)).fill(h(f))))};he.num=sm;he.obj=Ng;he.arr=ng;he.parse=Mx;he.Rectangle=Re;he.rect=Gl;he.pt=th;he.Point=Yg;he.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var gE=function(){};gE.prototype.offsets=function(){return null};gE.prototype.stepCount=function(){return 0};gE.prototype.stepSize=function(){return 0};gE.prototype.chord=function(f){var c=this,h=f.hue,e=f.saturation,k=f.brightness;return(this.offsets()||he.arr.range(0,this.steps()).map(function(n){return n*c.stepSize()})).map(function(n){return he.Color.hsb(h+n%360,e,k)})};$jscomp.global.Object.defineProperties(gE.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
he.ColorHarmony=gE;var Ry=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ry,he.ColorHarmony);Ry.prototype.steps=function(){return 1};Ry.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Ry.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ba("b3",Ry);he.Complementary=Ry;var Sy=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Sy,he.ColorHarmony);Sy.prototype.steps=function(){return 2};
Sy.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Sy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ba("b4",Sy);he.Triadic=Sy;var nB=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(nB,he.ColorHarmony);nB.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(nB.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ba("b5",nB);he.Tetradic=
nB;var Ty=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ty,he.ColorHarmony);Ty.prototype.steps=function(){return 3};Ty.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(Ty.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ba("b6",Ty);he.Quadratic=Ty;var Uy=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Uy,he.ColorHarmony);Uy.prototype.steps=function(){return 5};Uy.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Uy.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ba("b7",Uy);he.Analogous=Uy;var oB=function(){return he.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(oB,he.ColorHarmony);oB.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(oB.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ba("b8",oB);he.Neutral=
oB;var Tg=function(f,c,h,e){this.r=f||0;this.g=c||0;this.b=h||0;this.a=e||(0===e?0:1)};Tg.random=function(f,c){void 0===f&&(f=0);void 0===c&&(c=255);return he.Color.rgb(he.num.random(f,c),he.num.random(f,c),he.num.random(f,c))};Tg.hsb=function(f,c,h){if(0==c)return new he.Color(h,h,h);var e=f%360/60;f=Math.floor(e);var k=e-f;e=(1-c)*h;var n=(1-c*k)*h;c=(1-c*(1-k))*h;switch(f){case 0:return new he.Color(h,c,e);case 1:return new he.Color(n,h,e);case 2:return new he.Color(e,h,c);case 3:return new he.Color(e,
n,h);case 4:return new he.Color(c,e,h);case 5:return new he.Color(h,e,n);default:return new he.Color(0,0,0)}};Tg.wheel=function(f){return he.Color.wheelHsb(void 0===f?10:f,0,.9,.7)};Tg.wheelHsb=function(f,c,h,e){for(var k=Array(f),n=360/Math.max(f,1),b=0;b<f;b++)k[b]=he.Color.hsb(c+b*n,h,e);return k};Tg.rgb=function(f,c,h){return new he.Color(f/255,c/255,h/255)};Tg.rgbHex=function(f){return(f=this.parseHex(f))&&0<=f[0]&&0<=f[1]&&0<=f[2]?new he.Color(f[0],f[1],f[2]):null};Tg.rgba=function(f,c,h,e){return new he.Color(f/
255,c/255,h/255,e)};Tg.fromLiteral=function(f){return new he.Color(f.r,f.g,f.b,f.a)};Tg.fromTuple=function(f){return new he.Color(f[0],f[1],f[2],f[3])};Tg.fromTuple8Bit=function(f){return new he.Color(f[0]/255,f[1]/255,f[2]/255,f[3]/255)};Tg.fromString=function(f){return f&&"none"!==f?this.fromTuple(this.parse(f)):null};Tg.parse=function(f){return f&&"none"!==f?(f=he.parse(f),[f.red,f.green,f.blue,f.alpha]):null};Tg.parseRGB=function(f){var c=f.match(this.rgbaRegex);if(c){f=parseInt(c[1])/(c[2]?100:
255);var h=parseInt(c[3])/(c[4]?100:255),e=parseInt(c[5])/(c[6]?100:255);c=c[7]?parseFloat(c[7]):1;return[f,h,e,c]}return null};Tg.parseHex=function(f){var c;var h="";for(c=0;c<f.length;c++){var e=f[c].toLowerCase();if("a"==e||"b"==e||"c"==e||"d"==e||"e"==e||"f"==e||"0"==e||"1"==e||"2"==e||"3"==e||"4"==e||"5"==e||"6"==e||"7"==e||"8"==e||"9"==e)h+=e}if(6==h.length)c=h.substring(0,2),f=h.substring(2,4),h=h.substring(4,6);else if(3==h.length)c=h.substring(0,1),c+=c,f=h.substring(1,2),f+=f,h=h.substring(2,
3),h+=h;else return null;c=parseInt(c,16)/255;f=parseInt(f,16)/255;h=parseInt(h,16)/255;return[c,f,h]};Tg.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};Tg.prototype.equals=function(f){return f?this.r===f.r&&this.g===f.g&&this.b===f.b&&this.a===f.a:!1};Tg.prototype.darker=function(f){var c=this.mixedWith(he.Color.black,.5);return 1<f?c.darker(f-1):c};Tg.prototype.lighter=function(f){if(0==f)return this;var c=this.mixedWith(he.Color.white,.5);return 1<f?c.lighter(f-1):c};Tg.prototype.interpolate=
function(f,c){if(c.isGradient)return c.interpolate(1-f,this);c=he.obj.isArray(c)?c:c.toTuple();return he.Color.fromTuple(this.toTuple().map(function(h,e){return he.num.interpolate(f,h,c[e])}))};Tg.prototype.toString=function(){return 1===this.a?"rgb("+he.floor(this.r)+","+he.floor(this.g)+","+he.floor(this.b)+")":this.toRGBAString()};Tg.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};Tg.prototype.toHexString=
function(){function f(c){for(;2>c.length;)c="0"+c;return c}return f(Math.floor(255.99*this.r).toString(16))+f(Math.floor(255.99*this.g).toString(16))+f(Math.floor(255.99*this.b).toString(16))};Tg.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};Tg.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};Tg.prototype.toHSB=function(){var f=Math.max(this.r,this.g,this.b),c=Math.min(this.r,this.g,this.b),h;f==c?h=0:f==this.r?h=(this.g-this.b)/(f-c)*60:f==
this.g?h=60*(2+(this.b-this.r)/(f-c)):f==this.b&&(h=60*(4+(this.r-this.g)/(f-c)));return[(h+360)%360,0==f?0:(f-c)/f,f]};Tg.prototype.withA=function(f){return new he.Color(this.r,this.g,this.b,f)};Tg.prototype.mixedWith=function(f,c){var h=1-c;return new he.Color(this.r*c+f.r*h,this.g*c+f.g*h,this.b*c+f.b*h,this.a*c+f.a*h)};Tg.prototype.invert=function(){return he.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};Tg.prototype.toCSSString=function(){return this.toRGBAString()};Tg.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};Tg.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(Tg.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var f=this,c=he.Color.named;return Object.keys(c).find(function(h){return c[h].equals(f)})}}});$jscomp.global.Object.defineProperties(Tg,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return he.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new he.Color(0,0,0),almostBlack:he.Color.rgb(64,64,64),white:new he.Color(1,1,1),gray:new he.Color(.8,.8,.8),red:new he.Color(.8,0,0),green:new he.Color(0,.8,0),yellow:new he.Color(.8,.8,0),blue:new he.Color(0,0,.8),purple:new he.Color(.5,0,.5),magenta:new he.Color(1,0,1),pink:he.Color.rgb(255,30,153),turquoise:he.Color.rgb(0,240,255),tangerine:he.Color.rgb(242,
133,0),orange:he.Color.rgb(255,153,0),cyan:he.Color.rgb(0,255,255),brown:he.Color.rgb(182,67,0),limeGreen:he.Color.rgb(51,255,0),darkGray:he.Color.rgb(102,102,102),lightGray:he.Color.rgb(230,230,230),veryLightGray:he.Color.rgb(243,243,243),transparent:he.Color.rgba(0,0,0,0),lively:he.Color.rgb(245,124,0)}}}});Ba("C",Tg);he.Color=Tg;Object.assign(he.Color,he.Color.named);var Yw=function(f){this.stops=f?f.map(function(c){return c}):[]};Yw.create=function(f){var c=[],h;for(h in f)c.push({offset:Number(h),
color:f[h]});return new this({stops:c})};Yw.parse=function(f){return f.startsWith("radial-gradient")?he.RadialGradient.parse(f):f.startsWith("linear-gradient")?he.LinearGradient.parse(f):he.Color.fromTuple(he.Color.parse(f))};Yw.prototype.equals=function(f){return f&&f.isGradient?this.toString()==f.toString():!1};Yw.prototype.getStopsLighter=function(f){return he.arr.collect(this.stops,function(c){return{offset:c.offset,color:c.color.lighter(f)}})};Yw.prototype.getStopsDarker=function(f){return he.arr.collect(this.stops,
function(c){return{offset:c.offset,color:c.color.darker(f)}})};Yw.prototype.interpolateStops=function(f,c){var h=he.pad(this.stops,c.length);c=he.pad(c,this.stops.length);var e=[],k;for(k=0;k<h.length;k++){var n=h[k];var b=n.color;var d=n.offset;var m=c[k];n=m.color;m=m.offset;e.push({color:b.interpolate(f,n),offset:he.num.interpolate(f,d,m)})}return e};Yw.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Yw.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});he.Gradient=Yw;var qn=function(f){var c=void 0===f?{}:f;f=c.vector;c=he.Gradient.call(this,c.stops)||this;c.vector=f;return c};$jscomp.inherits(qn,he.Gradient);qn.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};qn.prototype.angleToRect=function(f){return he.Point.polar(1,f).extentAsRectangle().withCenter(he.pt(.5,.5))};qn.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};qn.prototype.toString=function(){return this.toCSSString()};qn.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),vector:this.vector})};qn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),vector:this.vector})};qn.prototype.interpolate=function(f,c,h){h=void 0===h?{width:1E3,height:1E3}:h;c.isColor&&(c=new he.LinearGradient({vector:this.vector,stops:this.stops.map(function(e){return{color:c,
offset:e.offset}})}));if("radialGradient"==c.type){if(.5>f)return new he.LinearGradient({vector:this.vector.interpolate(f,he.rect(0,0,0,1)),stops:this.interpolateStops(f,c.stops.map(function(e,k){return{color:e.color,offset:1}}))});if(.5<=f)return new he.RadialGradient({stops:this.interpolateStops(f,c.stops),focus:he.pt(.5,0).interpolate(f,c.focus),bounds:he.rect(0,0,100*h.width,2*h.height).interpolate(f,c.bounds)})}return new he.LinearGradient({stops:this.interpolateStops(f,c.stops),vector:this.vector.interpolate(f,
c.vector)})};qn.prototype.toCSSString=function(){var f="linear-gradient("+(he.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(c){return c.color.toRGBAString()+" "+((100*c.offset).toFixed()+"%")}).join(",");return f+")"};qn.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(qn.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:he.rect(he.pt(0,0),he.pt(0,1)),northeast:he.rect(he.pt(1,0),he.pt(0,1)),westeast:he.rect(he.pt(1,0),he.pt(0,0)),southeast:he.rect(he.pt(1,1),he.pt(0,0)),southnorth:he.rect(he.pt(0,1),he.pt(0,0)),southwest:he.rect(he.pt(0,1),he.pt(1,0)),eastwest:he.rect(he.pt(0,0),he.pt(1,0)),northwest:he.rect(he.pt(0,0),he.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(f){this._vector=f?"string"===typeof f?this.vectors[f.toLowerCase()]:"number"===typeof f?this.angleToRect(f):f:this.vectors.northsouth}}});Ba("af",qn);he.LinearGradient=qn;var mp=function(f){var c=void 0===f?{}:f;f=c.focus;var h=c.bounds;c=he.Gradient.call(this,c.stops)||this;c.focus=f||he.pt(.5,.5);c.bounds=h||new he.Rectangle(0,0,20,20);return c};$jscomp.inherits(mp,he.Gradient);mp.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};mp.prototype.toString=function(){return this.toCSSString()};
mp.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),focus:this.focus,bounds:this.bounds})};mp.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};mp.prototype.interpolate=function(f,c,h){h=void 0===h?{height:1E3,width:1E3}:h;c.isColor&&(c=new he.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(e){return{color:c,offset:e.offset}})}));return"linearGradient"==
c.type?c.interpolate(1-f,this,h):new he.RadialGradient({bounds:this.bounds.interpolate(f,c.bounds),stops:this.interpolateStops(f,c.stops),focus:this.focus.interpolate(f,c.focus)})};mp.prototype.toCSSString=function(){var f=this.focus.scaleBy(100),c=this.bounds.extent();f="radial-gradient("+c.x/2+"px "+c.y/2+"px at "+f.x+"% "+f.y+"%";for(c=0;c<this.stops.length;c++)f+=","+this.stops[c].color.toRGBAString()+" "+((100*this.stops[c].offset).toFixed()+"%");return f+")"};mp.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(mp.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ba("ad",mp);he.RadialGradient=mp;var cH=Ba("b9","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
he.flatDesignColors=cH;he.flatDesignColors=cH;he.flatDesignColors=cH;var dH=Ba("ba","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
he.materialDesignColors=dH;he.materialDesignColors=dH;he.materialDesignColors=dH;var eH=Ba("bb","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
he.webSafeColors=eH;he.webSafeColors=eH;he.webSafeColors=eH;var jla=Object.freeze({__proto__:null,Complementary:Ry,Triadic:Sy,Tetradic:nB,Quadratic:Ty,Analogous:Uy,Neutral:oB,Color:Tg,LinearGradient:qn,RadialGradient:mp,flatDesignColors:cH,materialDesignColors:dH,webSafeColors:eH}),m8=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Ne=function(){};Ne.prototype.accept=function(f,c,h){if(!f)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+f);if(!f.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(f));switch(f.type){case "Node":return this.visitNode(f,c,h);case "SourceLocation":return this.visitSourceLocation(f,c,h);case "Position":return this.visitPosition(f,c,h);case "Program":return this.visitProgram(f,c,h);case "Function":return this.visitFunction(f,c,h);case "Statement":return this.visitStatement(f,c,h);case "Directive":return this.visitDirective(f,c,h);case "SwitchCase":return this.visitSwitchCase(f,c,h);case "CatchClause":return this.visitCatchClause(f,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(f,c,h);case "Expression":return this.visitExpression(f,c,h);case "Property":return this.visitProperty(f,c,h);case "Pattern":return this.visitPattern(f,c,h);case "Super":return this.visitSuper(f,c,h);case "SpreadElement":return this.visitSpreadElement(f,c,h);case "TemplateElement":return this.visitTemplateElement(f,c,h);case "Class":return this.visitClass(f,c,h);case "ClassBody":return this.visitClassBody(f,c,h);case "MethodDefinition":return this.visitMethodDefinition(f,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(f,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(f,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(f,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(f,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(f,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(f,c,h);case "JSXAttribute":return this.visitJSXAttribute(f,c,h);case "JSXText":return this.visitJSXText(f,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(f,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(f,c,h);case "Identifier":return this.visitIdentifier(f,c,h);case "Literal":return this.visitLiteral(f,c,h);case "ExpressionStatement":return this.visitExpressionStatement(f,c,h);case "BlockStatement":return this.visitBlockStatement(f,c,h);case "EmptyStatement":return this.visitEmptyStatement(f,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(f,c,h);
case "WithStatement":return this.visitWithStatement(f,c,h);case "ReturnStatement":return this.visitReturnStatement(f,c,h);case "LabeledStatement":return this.visitLabeledStatement(f,c,h);case "BreakStatement":return this.visitBreakStatement(f,c,h);case "ContinueStatement":return this.visitContinueStatement(f,c,h);case "IfStatement":return this.visitIfStatement(f,c,h);case "SwitchStatement":return this.visitSwitchStatement(f,c,h);case "ThrowStatement":return this.visitThrowStatement(f,c,h);case "TryStatement":return this.visitTryStatement(f,
c,h);case "WhileStatement":return this.visitWhileStatement(f,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(f,c,h);case "ForStatement":return this.visitForStatement(f,c,h);case "ForInStatement":return this.visitForInStatement(f,c,h);case "Declaration":return this.visitDeclaration(f,c,h);case "ThisExpression":return this.visitThisExpression(f,c,h);case "ArrayExpression":return this.visitArrayExpression(f,c,h);case "ObjectExpression":return this.visitObjectExpression(f,c,h);case "FunctionExpression":return this.visitFunctionExpression(f,
c,h);case "UnaryExpression":return this.visitUnaryExpression(f,c,h);case "UpdateExpression":return this.visitUpdateExpression(f,c,h);case "BinaryExpression":return this.visitBinaryExpression(f,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(f,c,h);case "LogicalExpression":return this.visitLogicalExpression(f,c,h);case "MemberExpression":return this.visitMemberExpression(f,c,h);case "ConditionalExpression":return this.visitConditionalExpression(f,c,h);case "CallExpression":return this.visitCallExpression(f,
c,h);case "NewExpression":return this.visitNewExpression(f,c,h);case "SequenceExpression":return this.visitSequenceExpression(f,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(f,c,h);case "YieldExpression":return this.visitYieldExpression(f,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(f,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(f,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(f,c,h);case "ObjectPattern":return this.visitObjectPattern(f,
c,h);case "ArrayPattern":return this.visitArrayPattern(f,c,h);case "RestElement":return this.visitRestElement(f,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(f,c,h);case "ClassExpression":return this.visitClassExpression(f,c,h);case "MetaProperty":return this.visitMetaProperty(f,c,h);case "ImportDeclaration":return this.visitImportDeclaration(f,c,h);case "ImportSpecifier":return this.visitImportSpecifier(f,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(f,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(f,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(f,c,h);case "ExportSpecifier":return this.visitExportSpecifier(f,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(f,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(f,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(f,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(f,c,h);case "AwaitExpression":return this.visitAwaitExpression(f,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(f,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(f,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(f,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(f,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(f,c,h);case "JSXElement":return this.visitJSXElement(f,
c,h);case "JSXFragment":return this.visitJSXFragment(f,c,h);case "ImportExpression":return this.visitImportExpression(f,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(f,c,h);case "FunctionBody":return this.visitFunctionBody(f,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(f,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(f,c,h);case "ForOfStatement":return this.visitForOfStatement(f,c,h);case "ClassDeclaration":return this.visitClassDeclaration(f,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(f,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(f,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(f));};Ne.prototype.visitNode=function(f,c,h){return f};Ne.prototype.visitSourceLocation=function(f,c,h){f.start=this.accept(f.start,c,h.concat(["start"]));f.end=this.accept(f.end,c,h.concat(["end"]));return f};Ne.prototype.visitPosition=function(f,c,h){return f};Ne.prototype.visitProgram=
function(f,c,h){for(var e=[],k=0;k<f.body.length;k++){var n=f.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.body=e;return f};Ne.prototype.visitFunction=function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));for(var e=[],k=0;k<f.params.length;k++){var n=f.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.params=e;f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitStatement=
function(f,c,h){return f};Ne.prototype.visitDirective=function(f,c,h){f.expression=this.accept(f.expression,c,h.concat(["expression"]));return f};Ne.prototype.visitSwitchCase=function(f,c,h){f.test&&(f.test=this.accept(f.test,c,h.concat(["test"])));for(var e=[],k=0;k<f.consequent.length;k++){var n=f.consequent[k];n=n?this.accept(n,c,h.concat(["consequent",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.consequent=e;return f};Ne.prototype.visitCatchClause=function(f,c,h){f.param&&(f.param=this.accept(f.param,
c,h.concat(["param"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitVariableDeclarator=function(f,c,h){f.id=this.accept(f.id,c,h.concat(["id"]));f.init&&(f.init=this.accept(f.init,c,h.concat(["init"])));return f};Ne.prototype.visitExpression=function(f,c,h){return f};Ne.prototype.visitProperty=function(f,c,h){f.key=this.accept(f.key,c,h.concat(["key"]));f.value=this.accept(f.value,c,h.concat(["value"]));return f};Ne.prototype.visitPattern=function(f,c,h){return f};
Ne.prototype.visitSuper=function(f,c,h){return f};Ne.prototype.visitSpreadElement=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitTemplateElement=function(f,c,h){return f};Ne.prototype.visitClass=function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,c,h.concat(["superClass"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitClassBody=function(f,c,h){for(var e=
[],k=0;k<f.body.length;k++){var n=f.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.body=e;return f};Ne.prototype.visitMethodDefinition=function(f,c,h){f.key=this.accept(f.key,c,h.concat(["key"]));f.value=this.accept(f.value,c,h.concat(["value"]));return f};Ne.prototype.visitModuleDeclaration=function(f,c,h){return f};Ne.prototype.visitModuleSpecifier=function(f,c,h){f.local=this.accept(f.local,c,h.concat(["local"]));return f};Ne.prototype.visitJSXEmptyExpression=
function(f,c,h){return f};Ne.prototype.visitJSXExpressionContainer=function(f,c,h){f.expression=this.accept(f.expression,c,h.concat(["expression"]));return f};Ne.prototype.visitJSXSpreadChild=function(f,c,h){f.expression=this.accept(f.expression,c,h.concat(["expression"]));return f};Ne.prototype.visitJSXBoundaryElement=function(f,c,h){f.name=this.accept(f.name,c,h.concat(["name"]));return f};Ne.prototype.visitJSXAttribute=function(f,c,h){f.name=this.accept(f.name,c,h.concat(["name"]));f.value&&(f.value=
this.accept(f.value,c,h.concat(["value"])));return f};Ne.prototype.visitJSXText=function(f,c,h){return f};Ne.prototype.visitJSXOpeningFragment=function(f,c,h){return f};Ne.prototype.visitJSXClosingFragment=function(f,c,h){return f};Ne.prototype.visitIdentifier=function(f,c,h){return f};Ne.prototype.visitLiteral=function(f,c,h){return f};Ne.prototype.visitExpressionStatement=function(f,c,h){f.expression=this.accept(f.expression,c,h.concat(["expression"]));return f};Ne.prototype.visitBlockStatement=
function(f,c,h){for(var e=[],k=0;k<f.body.length;k++){var n=f.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.body=e;return f};Ne.prototype.visitEmptyStatement=function(f,c,h){return f};Ne.prototype.visitDebuggerStatement=function(f,c,h){return f};Ne.prototype.visitWithStatement=function(f,c,h){f.object=this.accept(f.object,c,h.concat(["object"]));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitReturnStatement=function(f,
c,h){f.argument&&(f.argument=this.accept(f.argument,c,h.concat(["argument"])));return f};Ne.prototype.visitLabeledStatement=function(f,c,h){f.label=this.accept(f.label,c,h.concat(["label"]));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitBreakStatement=function(f,c,h){f.label&&(f.label=this.accept(f.label,c,h.concat(["label"])));return f};Ne.prototype.visitContinueStatement=function(f,c,h){f.label&&(f.label=this.accept(f.label,c,h.concat(["label"])));return f};Ne.prototype.visitIfStatement=
function(f,c,h){f.test=this.accept(f.test,c,h.concat(["test"]));f.consequent=this.accept(f.consequent,c,h.concat(["consequent"]));f.alternate&&(f.alternate=this.accept(f.alternate,c,h.concat(["alternate"])));return f};Ne.prototype.visitSwitchStatement=function(f,c,h){f.discriminant=this.accept(f.discriminant,c,h.concat(["discriminant"]));for(var e=[],k=0;k<f.cases.length;k++){var n=f.cases[k];n=n?this.accept(n,c,h.concat(["cases",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.cases=e;return f};
Ne.prototype.visitThrowStatement=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitTryStatement=function(f,c,h){f.block=this.accept(f.block,c,h.concat(["block"]));f.handler&&(f.handler=this.accept(f.handler,c,h.concat(["handler"])));f.finalizer&&(f.finalizer=this.accept(f.finalizer,c,h.concat(["finalizer"])));return f};Ne.prototype.visitWhileStatement=function(f,c,h){f.test=this.accept(f.test,c,h.concat(["test"]));f.body=this.accept(f.body,c,h.concat(["body"]));
return f};Ne.prototype.visitDoWhileStatement=function(f,c,h){f.body=this.accept(f.body,c,h.concat(["body"]));f.test=this.accept(f.test,c,h.concat(["test"]));return f};Ne.prototype.visitForStatement=function(f,c,h){f.init&&(f.init=this.accept(f.init,c,h.concat(["init"])));f.test&&(f.test=this.accept(f.test,c,h.concat(["test"])));f.update&&(f.update=this.accept(f.update,c,h.concat(["update"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitForInStatement=function(f,c,h){f.left=
this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitDeclaration=function(f,c,h){return f};Ne.prototype.visitThisExpression=function(f,c,h){return f};Ne.prototype.visitArrayExpression=function(f,c,h){if(f.elements){for(var e=[],k=0;k<f.elements.length;k++){var n=f.elements[k];n=n?this.accept(n,c,h.concat(["elements",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.elements=e}return f};
Ne.prototype.visitObjectExpression=function(f,c,h){for(var e=[],k=0;k<f.properties.length;k++){var n=f.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.properties=e;return f};Ne.prototype.visitFunctionExpression=function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));for(var e=[],k=0;k<f.params.length;k++){var n=f.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.params=e;f.body=
this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitUnaryExpression=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitUpdateExpression=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitBinaryExpression=function(f,c,h){f.left=this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));return f};Ne.prototype.visitAssignmentExpression=function(f,
c,h){f.left=this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));return f};Ne.prototype.visitLogicalExpression=function(f,c,h){f.left=this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));return f};Ne.prototype.visitMemberExpression=function(f,c,h){f.object=this.accept(f.object,c,h.concat(["object"]));f.property=this.accept(f.property,c,h.concat(["property"]));return f};Ne.prototype.visitConditionalExpression=function(f,
c,h){f.test=this.accept(f.test,c,h.concat(["test"]));f.alternate=this.accept(f.alternate,c,h.concat(["alternate"]));f.consequent=this.accept(f.consequent,c,h.concat(["consequent"]));return f};Ne.prototype.visitCallExpression=function(f,c,h){f.callee=this.accept(f.callee,c,h.concat(["callee"]));for(var e=[],k=0;k<f.arguments.length;k++){var n=f.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.arguments=e;return f};Ne.prototype.visitNewExpression=
function(f,c,h){f.callee=this.accept(f.callee,c,h.concat(["callee"]));for(var e=[],k=0;k<f.arguments.length;k++){var n=f.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.arguments=e;return f};Ne.prototype.visitSequenceExpression=function(f,c,h){for(var e=[],k=0;k<f.expressions.length;k++){var n=f.expressions[k];n=n?this.accept(n,c,h.concat(["expressions",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.expressions=e;return f};Ne.prototype.visitArrowFunctionExpression=
function(f,c,h){f.body=this.accept(f.body,c,h.concat(["body"]));f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));for(var e=[],k=0;k<f.params.length;k++){var n=f.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.params=e;return f};Ne.prototype.visitYieldExpression=function(f,c,h){f.argument&&(f.argument=this.accept(f.argument,c,h.concat(["argument"])));return f};Ne.prototype.visitTemplateLiteral=function(f,c,h){for(var e=[],k=0;k<f.quasis.length;k++){var n=
f.quasis[k];n=n?this.accept(n,c,h.concat(["quasis",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.quasis=e;e=[];for(k=0;k<f.expressions.length;k++)n=(n=f.expressions[k])?this.accept(n,c,h.concat(["expressions",k])):n,Array.isArray(n)?e.push.apply(e,n):e.push(n);f.expressions=e;return f};Ne.prototype.visitTaggedTemplateExpression=function(f,c,h){f.tag=this.accept(f.tag,c,h.concat(["tag"]));f.quasi=this.accept(f.quasi,c,h.concat(["quasi"]));return f};Ne.prototype.visitAssignmentProperty=function(f,
c,h){f.value=this.accept(f.value,c,h.concat(["value"]));f.key=this.accept(f.key,c,h.concat(["key"]));return f};Ne.prototype.visitObjectPattern=function(f,c,h){for(var e=[],k=0;k<f.properties.length;k++){var n=f.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.properties=e;return f};Ne.prototype.visitArrayPattern=function(f,c,h){if(f.elements){for(var e=[],k=0;k<f.elements.length;k++){var n=f.elements[k];n=n?this.accept(n,c,h.concat(["elements",
k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.elements=e}return f};Ne.prototype.visitRestElement=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitAssignmentPattern=function(f,c,h){f.left=this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));return f};Ne.prototype.visitClassExpression=function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,
c,h.concat(["superClass"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitMetaProperty=function(f,c,h){f.meta=this.accept(f.meta,c,h.concat(["meta"]));f.property=this.accept(f.property,c,h.concat(["property"]));return f};Ne.prototype.visitImportDeclaration=function(f,c,h){for(var e=[],k=0;k<f.specifiers.length;k++){var n=f.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.specifiers=e;f.source=this.accept(f.source,
c,h.concat(["source"]));return f};Ne.prototype.visitImportSpecifier=function(f,c,h){f.imported=this.accept(f.imported,c,h.concat(["imported"]));f.local=this.accept(f.local,c,h.concat(["local"]));return f};Ne.prototype.visitImportDefaultSpecifier=function(f,c,h){f.local=this.accept(f.local,c,h.concat(["local"]));return f};Ne.prototype.visitImportNamespaceSpecifier=function(f,c,h){f.local=this.accept(f.local,c,h.concat(["local"]));return f};Ne.prototype.visitExportNamedDeclaration=function(f,c,h){f.declaration&&
(f.declaration=this.accept(f.declaration,c,h.concat(["declaration"])));for(var e=[],k=0;k<f.specifiers.length;k++){var n=f.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.specifiers=e;f.source&&(f.source=this.accept(f.source,c,h.concat(["source"])));return f};Ne.prototype.visitExportSpecifier=function(f,c,h){f.exported=this.accept(f.exported,c,h.concat(["exported"]));f.local=this.accept(f.local,c,h.concat(["local"]));return f};Ne.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));for(var e=[],k=0;k<f.params.length;k++){var n=f.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.params=e;f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitAnonymousDefaultExportedClassDeclaration=function(f,c,h){f.id&&(f.id=this.accept(f.id,c,h.concat(["id"])));f.superClass&&(f.superClass=this.accept(f.superClass,c,h.concat(["superClass"])));f.body=this.accept(f.body,
c,h.concat(["body"]));return f};Ne.prototype.visitExportDefaultDeclaration=function(f,c,h){f.declaration=this.accept(f.declaration,c,h.concat(["declaration"]));return f};Ne.prototype.visitExportAllDeclaration=function(f,c,h){f.source=this.accept(f.source,c,h.concat(["source"]));return f};Ne.prototype.visitAwaitExpression=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitJSXMemberExpression=function(f,c,h){f.object=this.accept(f.object,c,h.concat(["object"]));
f.property=this.accept(f.property,c,h.concat(["property"]));return f};Ne.prototype.visitJSXNamespacedName=function(f,c,h){f.namespace=this.accept(f.namespace,c,h.concat(["namespace"]));f.name=this.accept(f.name,c,h.concat(["name"]));return f};Ne.prototype.visitJSXOpeningElement=function(f,c,h){for(var e=[],k=0;k<f.attributes.length;k++){var n=f.attributes[k];n=n?this.accept(n,c,h.concat(["attributes",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.attributes=e;f.name=this.accept(f.name,c,h.concat(["name"]));
return f};Ne.prototype.visitJSXClosingElement=function(f,c,h){f.name=this.accept(f.name,c,h.concat(["name"]));return f};Ne.prototype.visitJSXSpreadAttribute=function(f,c,h){f.argument=this.accept(f.argument,c,h.concat(["argument"]));return f};Ne.prototype.visitJSXElement=function(f,c,h){f.openingElement=this.accept(f.openingElement,c,h.concat(["openingElement"]));for(var e=[],k=0;k<f.children.length;k++){var n=f.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?e.push.apply(e,
n):e.push(n)}f.children=e;f.closingElement&&(f.closingElement=this.accept(f.closingElement,c,h.concat(["closingElement"])));return f};Ne.prototype.visitJSXFragment=function(f,c,h){f.openingFragment=this.accept(f.openingFragment,c,h.concat(["openingFragment"]));for(var e=[],k=0;k<f.children.length;k++){var n=f.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.children=e;f.closingFragment=this.accept(f.closingFragment,c,h.concat(["closingFragment"]));
return f};Ne.prototype.visitImportExpression=function(f,c,h){f.source=this.accept(f.source,c,h.concat(["source"]));return f};Ne.prototype.visitRegExpLiteral=function(f,c,h){return f};Ne.prototype.visitFunctionBody=function(f,c,h){for(var e=[],k=0;k<f.body.length;k++){var n=f.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.body=e;return f};Ne.prototype.visitFunctionDeclaration=function(f,c,h){f.id=this.accept(f.id,c,h.concat(["id"]));for(var e=[],
k=0;k<f.params.length;k++){var n=f.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.params=e;f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitVariableDeclaration=function(f,c,h){for(var e=[],k=0;k<f.declarations.length;k++){var n=f.declarations[k];n=n?this.accept(n,c,h.concat(["declarations",k])):n;Array.isArray(n)?e.push.apply(e,n):e.push(n)}f.declarations=e;return f};Ne.prototype.visitForOfStatement=function(f,c,h){f.left=
this.accept(f.left,c,h.concat(["left"]));f.right=this.accept(f.right,c,h.concat(["right"]));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitClassDeclaration=function(f,c,h){f.id=this.accept(f.id,c,h.concat(["id"]));f.superClass&&(f.superClass=this.accept(f.superClass,c,h.concat(["superClass"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};Ne.prototype.visitJSXIdentifier=function(f,c,h){return f};Ne.prototype.visitBigIntLiteral=function(f,c,h){return f};Ba("bC",
Ne);m8.Visitor=Ne;m8.default=Ne;var pi=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");pi.obj=Ng;pi.Path=Ti;pi.Visitor=Ne;var hE=function(){return pi.Visitor.apply(this,arguments)||this};$jscomp.inherits(hE,pi.Visitor);hE.prototype.accept=function(f,c,h){var e=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),k=[];h=pi.Visitor.prototype.accept.call(this,f,{index:c.index,tree:k},h);c.tree.push({node:f,path:e,index:c.index++,children:k});return h};pi.PrinterVisitor=
hE;var rl=function(){return pi.Visitor.apply(this,arguments)||this};$jscomp.inherits(rl,pi.Visitor);rl.prototype.recordNotEqual=function(f,c,h,e){h.comparisons.errors.push({node1:f,node2:c,path:h.completePath,msg:e})};rl.prototype.compareType=function(f,c,h){return this.compareField("type",f,c,h)};rl.prototype.compareField=function(f,c,h,e){h=pi.Path(e.completePath.join(".")).get(h);if(c&&h&&c[f]===h[f]||c&&"*"===c[f]||h&&"*"===h[f])return!0;var k=e.completePath.join(".")+"."+f;this.recordNotEqual(c,
h,e,c?h?k+" is not equal: "+c[f]+" vs. "+h[f]:"node2 not defined but node1 ("+k+") is: "+c[f]:"node1 on "+k+" not defined");return!1};rl.prototype.accept=function(f,c,h,e){var k=pi.Path(e.join(".")).get(c);if("*"!==f&&"*"!==k&&(h={completePath:e,comparisons:h.comparisons},this.compareType(f,c,h)))this["visit"+f.type](f,c,h,e)};rl.prototype.visitFunction=function(f,c,h,e){f.generator&&this.compareField("generator",f,c,h);f.expression&&this.compareField("expression",f,c,h);return pi.Visitor.prototype.visitFunction.call(this,
f,c,h,e)};rl.prototype.visitSwitchStatement=function(f,c,h,e){f.lexical&&this.compareField("lexical",f,c,h);return pi.Visitor.prototype.visitSwitchStatement.call(this,f,c,h,e)};rl.prototype.visitForInStatement=function(f,c,h,e){f.each&&this.compareField("each",f,c,h);return pi.Visitor.prototype.visitForInStatement.call(this,f,c,h,e)};rl.prototype.visitFunctionDeclaration=function(f,c,h,e){f.generator&&this.compareField("generator",f,c,h);f.expression&&this.compareField("expression",f,c,h);return pi.Visitor.prototype.visitFunctionDeclaration.call(this,
f,c,h,e)};rl.prototype.visitVariableDeclaration=function(f,c,h,e){this.compareField("kind",f,c,h);return pi.Visitor.prototype.visitVariableDeclaration.call(this,f,c,h,e)};rl.prototype.visitUnaryExpression=function(f,c,h,e){this.compareField("operator",f,c,h);f.prefix&&this.compareField("prefix",f,c,h);return pi.Visitor.prototype.visitUnaryExpression.call(this,f,c,h,e)};rl.prototype.visitBinaryExpression=function(f,c,h,e){this.compareField("operator",f,c,h);return pi.Visitor.prototype.visitBinaryExpression.call(this,
f,c,h,e)};rl.prototype.visitAssignmentExpression=function(f,c,h,e){this.compareField("operator",f,c,h);return pi.Visitor.prototype.visitAssignmentExpression.call(this,f,c,h,e)};rl.prototype.visitUpdateExpression=function(f,c,h,e){this.compareField("operator",f,c,h);f.prefix&&this.compareField("prefix",f,c,h);return pi.Visitor.prototype.visitUpdateExpression.call(this,f,c,h,e)};rl.prototype.visitLogicalExpression=function(f,c,h,e){this.compareField("operator",f,c,h);return pi.Visitor.prototype.visitLogicalExpression.call(this,
f,c,h,e)};rl.prototype.visitMemberExpression=function(f,c,h,e){f.computed&&this.compareField("computed",f,c,h);return pi.Visitor.prototype.visitMemberExpression.call(this,f,c,h,e)};rl.prototype.visitComprehensionBlock=function(f,c,h,e){f.each&&this.compareField("each",f,c,h);return pi.Visitor.prototype.visitComprehensionBlock.call(this,f,c,h,e)};rl.prototype.visitIdentifier=function(f,c,h,e){this.compareField("name",f,c,h);return pi.Visitor.prototype.visitIdentifier.call(this,f,c,h,e)};rl.prototype.visitLiteral=
function(f,c,h,e){this.compareField("value",f,c,h);return pi.Visitor.prototype.visitLiteral.call(this,f,c,h,e)};rl.prototype.visitClassDeclaration=function(f,c,h,e){this.compareField("id",f,c,h);f.superClass&&this.compareField("superClass",f,c,h);this.compareField("body",f,c,h);return pi.Visitor.prototype.visitClassDeclaration.call(this,f,c,h,e)};rl.prototype.visitClassBody=function(f,c,h,e){this.compareField("body",f,c,h);return pi.Visitor.prototype.visitClassBody.call(this,f,c,h,e)};rl.prototype.visitMethodDefinition=
function(f,c,h,e){this.compareField("static",f,c,h);this.compareField("computed",f,c,h);this.compareField("kind",f,c,h);this.compareField("key",f,c,h);this.compareField("value",f,c,h);return pi.Visitor.prototype.visitMethodDefinition.call(this,f,c,h,e)};pi.ComparisonVisitor=rl;var wk=function(){return pi.Visitor.apply(this,arguments)||this};$jscomp.inherits(wk,pi.Visitor);wk.prototype.newScope=function(f,c){f={node:f,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(f);return f};wk.prototype.visitVariableDeclaration=function(f,c,h){c.varDecls.push(f);c.varDeclPaths.push(h);return pi.Visitor.prototype.visitVariableDeclaration.call(this,f,c,h)};wk.prototype.visitVariableDeclarator=function(f,c,h){f.init&&(f.init=this.accept(f.init,
c,h.concat(["init"])));return f};wk.prototype.visitFunction=function(f,c,h){var e=this,k=this.newScope(f,c);f.params.forEach(function(n,b){"AssignmentPattern"===n.type&&e.accept(n.right,k,h.concat("params",b,"right"))});k.params=Array.prototype.slice.call(f.params);return k};wk.prototype.visitFunctionDeclaration=function(f,c,h){var e=this.visitFunction(f,c,h);c.funcDecls.push(f);c.funcDeclPaths.push(h);var k=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,d){b=k.accept(b,e,h.concat(["defaults",
d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=k.accept(f.rest,e,h.concat(["rest"])));f.body=k.accept(f.body,e,h.concat(["body"]));f.loc&&(f.loc=k.accept(f.loc,e,h.concat(["loc"])));return f};wk.prototype.visitFunctionExpression=function(f,c,h){var e=this.visitFunction(f,c,h),k=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,d){b=k.accept(b,e,h.concat(["defaults",d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=k.accept(f.rest,
e,h.concat(["rest"])));f.body=k.accept(f.body,e,h.concat(["body"]));f.loc&&(f.loc=k.accept(f.loc,e,h.concat(["loc"])));return f};wk.prototype.visitArrowFunctionExpression=function(f,c,h){var e=this.visitFunction(f,c,h),k=this;f.defaults&&(f.defaults=f.defaults.reduce(function(n,b,d){b=k.accept(b,e,h.concat(["defaults",d]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));f.rest&&(f.rest=k.accept(f.rest,e,h.concat(["rest"])));f.body=k.accept(f.body,e,h.concat(["body"]));f.loc&&(f.loc=k.accept(f.loc,
e,h.concat(["loc"])));return f};wk.prototype.visitIdentifier=function(f,c,h){c.refs.push(f);return pi.Visitor.prototype.visitIdentifier.call(this,f,c,h)};wk.prototype.visitMemberExpression=function(f,c,h){f.object=this.accept(f.object,c,h.concat(["object"]));f.computed&&(f.property=this.accept(f.property,c,h.concat(["property"])));return f};wk.prototype.visitProperty=function(f,c,h){f.computed&&(f.key=this.accept(f.key,c,h.concat(["key"])));f.value=this.accept(f.value,c,h.concat(["value"]));return f};
wk.prototype.visitThisExpression=function(f,c,h){c.thisRefs.push(f);return pi.Visitor.prototype.visitThisExpression.call(this,f,c,h)};wk.prototype.visitTryStatement=function(f,c,h){f.block=this.accept(f.block,c,h.concat(["block"]));f.handler&&(f.handler=this.accept(f.handler,c,h.concat(["handler"])),c.catches.push(f.handler.param));f.finalizer&&(f.finalizer=this.accept(f.finalizer,c,h.concat(["finalizer"])));return f};wk.prototype.visitLabeledStatement=function(f,c,h){f.body=this.accept(f.body,c,
h.concat(["body"]));return f};wk.prototype.visitClassDeclaration=function(f,c,h){c.classDecls.push(f);c.classDeclPaths.push(h);f.superClass&&(f.superClass=this.accept(f.superClass,c,h.concat(["superClass"])));f.body=this.accept(f.body,c,h.concat(["body"]));return f};wk.prototype.visitClassExpression=function(f,c,h){f.id&&(c.classExprs.push(f),c.classExprPaths.push(h));f.superClass&&(f.superClass=this.accept(f.superClass,c,h.concat(["superClass"])));f.body=this.accept(f.body,c,h.concat(["body"]));
return f};wk.prototype.visitMethodDefinition=function(f,c,h){f.value=this.accept(f.value,c,h.concat(["value"]));return f};wk.prototype.visitMetaProperty=function(f,c,h){return f};wk.prototype.visitBreakStatement=function(f,c,h){return f};wk.prototype.visitContinueStatement=function(f,c,h){return f};wk.prototype.visitImportSpecifier=function(f,c,h){c.importSpecifiers.push(f.local);c.importSpecifierPaths.push(h);return f};wk.prototype.visitImportDefaultSpecifier=function(f,c,h){c.importSpecifiers.push(f.local);
c.importSpecifierPaths.push(h);return f};wk.prototype.visitImportNamespaceSpecifier=function(f,c,h){c.importSpecifiers.push(f.local);c.importSpecifierPaths.push(h);return f};wk.prototype.visitExportSpecifier=function(f,c,h){f.local=this.accept(f.local,c,h.concat(["local"]));return f};wk.prototype.visitExportNamedDeclaration=function(f,c,h){c.exportDecls.push(f);c.exportDeclPaths.push(h);f.source||pi.Visitor.prototype.visitExportNamedDeclaration.call(this,f,c,h);return f};wk.prototype.visitExportDefaultDeclaration=
function(f,c,h){c.exportDecls.push(f);c.exportDeclPaths.push(h);return pi.Visitor.prototype.visitExportDefaultDeclaration.call(this,f,c,h)};wk.prototype.visitExportAllDeclaration=function(f,c,h){c.exportDecls.push(f);c.exportDeclPaths.push(h);return pi.Visitor.prototype.visitExportAllDeclaration.call(this,f,c,h)};pi.ScopeVisitor=wk;pi.BaseVisitor=Ne;pi.Visitor=Ne;pi.PrinterVisitor=hE;pi.PrinterVisitor=hE;pi.ComparisonVisitor=rl;pi.ComparisonVisitor=rl;pi.ScopeVisitor=wk;pi.ScopeVisitor=wk;var rh=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sU={};(function h(c){function e(G){var I={},M;for(M in G)if(G.hasOwnProperty(M)){var L=G[M];I[M]="object"===typeof L&&null!==L?e(L):L}return I}function k(G,I){var M;var L=G.length;for(M=0;L;){var S=L>>>1;var R=M+S;I(G[R])?L=S:(M=R+1,L-=S+1)}return M}function n(G,I){(this||rh).parent=G;(this||rh).key=I}function b(G,I,M,L){(this||rh).node=G;(this||rh).path=I;(this||rh).wrap=M;(this||rh).ref=L}function d(){}function m(G){return null==
G?!1:"object"===typeof G&&"string"===typeof G.type}function a(G,I){for(var M=G.length-1;0<=M;--M)if(G[M].node===I)return!0;return!1}function g(G,I){return(new d).traverse(G,I)}function l(G,I){var M=k(I,function(L){return L.range[0]>G.range[0]});G.extendedRange=[G.range[0],G.range[1]];M!==I.length&&(G.extendedRange[1]=I[M].range[0]);--M;0<=M&&(G.extendedRange[0]=I[M].range[1]);return G}var r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var v={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var y={};var A={};var E={};var F={Break:y,Skip:A,Remove:E};n.prototype.replace=function(G){(this||rh).parent[(this||rh).key]=G};n.prototype.remove=function(){if(Array.isArray((this||rh).parent))return(this||rh).parent.splice((this||rh).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function G(ra,Ea){if(Array.isArray(Ea))for(M=
0,L=Ea.length;M<L;++M)ra.push(Ea[M]);else ra.push(Ea)}var I,M,L;if(!(this||rh).__current.path)return null;var S=[];var R=2;for(I=(this||rh).__leavelist.length;R<I;++R){var aa=(this||rh).__leavelist[R];G(S,aa.path)}G(S,(this||rh).__current.path);return S};d.prototype.type=function(){return this.current().type||(this||rh).__current.wrap};d.prototype.parents=function(){var G;var I=[];var M=1;for(G=(this||rh).__leavelist.length;M<G;++M)I.push((this||rh).__leavelist[M].node);return I};d.prototype.current=
function(){return(this||rh).__current.node};d.prototype.__execute=function(G,I){var M=void 0;var L=(this||rh).__current;(this||rh).__current=I;(this||rh).__state=null;G&&(M=G.call(this||rh,I.node,(this||rh).__leavelist[(this||rh).__leavelist.length-1].node));(this||rh).__current=L;return M};d.prototype.notify=function(G){(this||rh).__state=G};d.prototype.skip=function(){this.notify(A)};d.prototype["break"]=function(){this.notify(y)};d.prototype.remove=function(){this.notify(E)};d.prototype.__initialize=
function(G,I){(this||rh).visitor=I;(this||rh).root=G;(this||rh).__worklist=[];(this||rh).__leavelist=[];(this||rh).__current=null;(this||rh).__state=null;(this||rh).__fallback=null;"iteration"===I.fallback?(this||rh).__fallback=Object.keys:"function"===typeof I.fallback&&((this||rh).__fallback=I.fallback);(this||rh).__keys=v;I.keys&&((this||rh).__keys=Object.assign(Object.create((this||rh).__keys),I.keys))};d.prototype.traverse=function(G,I){var M,L,S;this.__initialize(G,I);var R={};var aa=(this||
rh).__worklist;var ra=(this||rh).__leavelist;aa.push(new b(G,null,null,null));for(ra.push(new b(null,null,null,null));aa.length;)if(G=aa.pop(),G===R){G=ra.pop();var Ea=this.__execute(I.leave,G);if((this||rh).__state===y||Ea===y)break}else if(G.node){Ea=this.__execute(I.enter,G);if((this||rh).__state===y||Ea===y)break;aa.push(R);ra.push(G);if((this||rh).__state!==A&&Ea!==A){Ea=G.node;var K=Ea.type||G.wrap;var Z=(this||rh).__keys[K];if(!Z)if((this||rh).__fallback)Z=this.__fallback(Ea);else throw Error("Unknown node type "+
K+".");for(M=Z.length;0<=--M;){var U=Z[M];if(S=Ea[U])if(Array.isArray(S))for(L=S.length;0<=--L;){if(S[L]&&!a(ra,S[L])){if(K!==r.ObjectExpression&&K!==r.ObjectPattern||"properties"!==Z[M])if(m(S[L]))G=new b(S[L],[U,L],null,null);else continue;else G=new b(S[L],[U,L],"Property",null);aa.push(G)}}else m(S)&&!a(ra,S)&&aa.push(new b(S,U,null,null))}}}};d.prototype.replace=function(G,I){function M(la){if(la.ref.remove()){var ya=la.ref.key;var jb=la.ref.parent;for(la=ra.length;la--;){var gb=ra[la];if(gb.ref&&
gb.ref.parent===jb){if(gb.ref.key<ya)break;--gb.ref.key}}}}var L,S,R;this.__initialize(G,I);var aa={};var ra=(this||rh).__worklist;var Ea=(this||rh).__leavelist;var K={root:G};var Z=new b(G,null,null,new n(K,"root"));ra.push(Z);for(Ea.push(Z);ra.length;)if(Z=ra.pop(),Z===aa){Z=Ea.pop();var U=this.__execute(I.leave,Z);void 0!==U&&U!==y&&U!==A&&U!==E&&Z.ref.replace(U);(this||rh).__state!==E&&U!==E||M(Z);if((this||rh).__state===y||U===y)break}else{U=this.__execute(I.enter,Z);void 0!==U&&U!==y&&U!==A&&
U!==E&&(Z.ref.replace(U),Z.node=U);if((this||rh).__state===E||U===E)M(Z),Z.node=null;if((this||rh).__state===y||U===y)break;if(G=Z.node)if(ra.push(aa),Ea.push(Z),(this||rh).__state!==A&&U!==A){U=G.type||Z.wrap;var V=(this||rh).__keys[U];if(!V)if((this||rh).__fallback)V=this.__fallback(G);else throw Error("Unknown node type "+U+".");for(L=V.length;0<=--L;){var na=V[L];if(R=G[na])if(Array.isArray(R))for(S=R.length;0<=--S;){if(R[S]){if(U!==r.ObjectExpression&&U!==r.ObjectPattern||"properties"!==V[L])if(m(R[S]))Z=
new b(R[S],[na,S],null,new n(R,S));else continue;else Z=new b(R[S],[na,S],"Property",new n(R,S));ra.push(Z)}}else m(R)&&ra.push(new b(R,na,null,new n(G,na)))}}}return K.root};c.Syntax=r;c.traverse=g;c.replace=function(G,I){return(new d).replace(G,I)};c.attachComments=function(G,I,M){var L=[],S;if(!G.range)throw Error("attachComments needs range information");if(!M.length){if(I.length){var R=0;for(S=I.length;R<S;R+=1)M=e(I[R]),M.extendedRange=[0,G.range[0]],L.push(M);G.leadingComments=L}return G}R=
0;for(S=I.length;R<S;R+=1)L.push(l(e(I[R]),M));var aa=0;g(G,{enter:function(ra){for(var Ea;aa<L.length;){Ea=L[aa];if(Ea.extendedRange[1]>ra.range[0])break;Ea.extendedRange[1]===ra.range[0]?(ra.leadingComments||(ra.leadingComments=[]),ra.leadingComments.push(Ea),L.splice(aa,1)):aa+=1}if(aa===L.length)return F.Break;if(L[aa].extendedRange[0]>ra.range[1])return F.Skip}});aa=0;g(G,{leave:function(ra){for(var Ea;aa<L.length;){Ea=L[aa];if(ra.range[1]<Ea.extendedRange[0])break;ra.range[1]===Ea.extendedRange[0]?
(ra.trailingComments||(ra.trailingComments=[]),ra.trailingComments.push(Ea),L.splice(aa,1)):aa+=1}if(aa===L.length)return F.Break;if(L[aa].extendedRange[0]>ra.range[1])return F.Skip}});return G};c.VisitorKeys=v;c.VisitorOption=F;c.Controller=d;c.cloneEnvironment=function(){return h({})};return c})(sU);var n8={};(function(){function c(e){if(null==e)return!1;switch(e.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(e){switch(e.type){case "IfStatement":return null!=e.alternate?e.alternate:e.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return e.body}return null}n8={isExpression:function(e){if(null==e)return!1;switch(e.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(e){if(null==e)return!1;switch(e.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(e){return c(e)||null!=e&&"FunctionDeclaration"===e.type},isProblematicIfStatement:function(e){if("IfStatement"!==e.type||null==e.alternate)return!1;e=e.consequent;do{if("IfStatement"===e.type&&null==e.alternate)return!0;e=h(e)}while(e);return!1},trailingStatement:h}})();var kla=n8,o8={};
(function(){function c(g){if(65535>=g)return String.fromCharCode(g);var l=String.fromCharCode(Math.floor((g-65536)/1024)+55296);g=String.fromCharCode((g-65536)%1024+56320);return l+g}var h;var e=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var k=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var m=Array(128);for(h=0;128>h;++h)m[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var a=Array(128);for(h=0;128>h;++h)a[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;o8={isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||97<=g&&102>=g||65<=g&&70>=g},isOctalDigit:function(g){return 48<=g&&55>=g},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===
g||160===g||5760<=g&&0<=d.indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStartES5:function(g){return 128>g?m[g]:e.test(c(g))},isIdentifierPartES5:function(g){return 128>g?a[g]:k.test(c(g))},isIdentifierStartES6:function(g){return 128>g?m[g]:n.test(c(g))},isIdentifierPartES6:function(g){return 128>g?a[g]:b.test(c(g))}}})();var p8=o8,q8={};(function(){function c(m,a){return a||"yield"!==m?h(m,a):!1}function h(m,a){if(a)a:switch(m){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(m.length){case 2:return"if"===m||"in"===m||"do"===m;case 3:return"var"===m||"for"===m||"new"===m||"try"===m;case 4:return"this"===m||"else"===m||"case"===m||"void"===m||"with"===m||"enum"===m;case 5:return"while"===m||"break"===m||"catch"===m||"throw"===m||"const"===m||"yield"===m||"class"===m||"super"===m;case 6:return"return"===m||"typeof"===m||"delete"===m||"switch"===m||"export"===m||"import"===m;case 7:return"default"===m||"finally"===m||"extends"===
m;case 8:return"function"===m||"continue"===m||"debugger"===m;case 10:return"instanceof"===m;default:return!1}}function e(m,a){return"null"===m||"true"===m||"false"===m||c(m,a)}function k(m,a){return"null"===m||"true"===m||"false"===m||h(m,a)}function n(m){var a;if(0===m.length)return!1;var g=m.charCodeAt(0);if(!d.isIdentifierStartES5(g))return!1;var l=1;for(a=m.length;l<a;++l)if(g=m.charCodeAt(l),!d.isIdentifierPartES5(g))return!1;return!0}function b(m){var a;if(0===m.length)return!1;var g=d.isIdentifierStartES6;
var l=0;for(a=m.length;l<a;++l){var r=m.charCodeAt(l);if(55296<=r&&56319>=r){++l;if(l>=a)return!1;var v=m.charCodeAt(l);if(!(56320<=v&&57343>=v))return!1;r=1024*(r-55296)+(v-56320)+65536}if(!g(r))return!1;g=d.isIdentifierPartES6}return!0}var d=p8;q8={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:e,isReservedWordES6:k,isRestrictedWord:function(m){return"eval"===m||"arguments"===m},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(m,a){return n(m)&&!e(m,a)},isIdentifierES6:function(m,
a){return b(m)&&!k(m,a)}}})();var lla=q8,fH={};fH.ast=kla;fH.code=p8;fH.keyword=lla;var bn={getArg:function(c,h,e){if(h in c)return c[h];if(3===arguments.length)return e;throw Error('"'+h+'" is a required argument.');}},LY=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,fea=/^data:.+,.+$/;bn.urlParse=ku;bn.urlGenerate=hw;bn.normalize=CF;bn.join=DF;bn.isAbsolute=function(c){return"/"===c.charAt(0)||LY.test(c)};bn.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var e=
0;0!==h.indexOf(c+"/");){var k=c.lastIndexOf("/");if(0>k)return h;c=c.slice(0,k);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++e}return Array(e+1).join("../")+h.substr(c.length+1)};var r8=!("__proto__"in Object.create(null));bn.toSetString=r8?mr:lJ;bn.fromSetString=r8?mr:EF;bn.compareByOriginalPositions=function(c,h,e){var k=iw(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;if(0!==k||e)return k;k=c.generatedColumn-h.generatedColumn;
if(0!==k)return k;k=c.generatedLine-h.generatedLine;return 0!==k?k:iw(c.name,h.name)};bn.compareByGeneratedPositionsDeflated=function(c,h,e){var k=c.generatedLine-h.generatedLine;if(0!==k)return k;k=c.generatedColumn-h.generatedColumn;if(0!==k||e)return k;k=iw(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;return 0!==k?k:iw(c.name,h.name)};bn.compareByGeneratedPositionsInflated=function(c,h){var e=c.generatedLine-h.generatedLine;
if(0!==e)return e;e=c.generatedColumn-h.generatedColumn;if(0!==e)return e;e=iw(c.source,h.source);if(0!==e)return e;e=c.originalLine-h.originalLine;if(0!==e)return e;e=c.originalColumn-h.originalColumn;return 0!==e?e:iw(c.name,h.name)};bn.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};bn.computeSourceURL=function(c,h,e){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(e){c=ku(e);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(e=c.path.lastIndexOf("/"),
0<=e&&(c.path=c.path.substring(0,e+1)));h=DF(hw(c),h)}return CF(h)};var hM={},s8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");hM.encode=function(c){if(0<=c&&c<s8.length)return s8[c];throw new TypeError("Must be between 0 and 63: "+c);};hM.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var iE={encode:function(c){var h="",e=0>c?(-c<<1)+1:c<<1;do c=e&31,e>>>=5,0<e&&(c|=32),h+=hM.encode(c);while(0<e);return h},
decode:function(c,h,e){var k=c.length,n=0,b=0;do{if(h>=k)throw Error("Expected more digits in base 64 VLQ value.");var d=hM.decode(c.charCodeAt(h++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(h-1));var m=!!(d&32);d&=31;n+=d<<b;b+=5}while(m);c=n>>1;e.value=1===(n&1)?-c:c;e.rest=h}},Yn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tU=bn,uU=Object.prototype.hasOwnProperty,Wz="undefined"!==typeof Map;or.fromArray=function(c,h){for(var e=new or,k=0,n=c.length;k<
n;k++)e.add(c[k],h);return e};or.prototype.size=function(){return Wz?(this||Yn)._set.size:Object.getOwnPropertyNames((this||Yn)._set).length};or.prototype.add=function(c,h){var e=Wz?c:tU.toSetString(c),k=Wz?this.has(c):uU.call((this||Yn)._set,e),n=(this||Yn)._array.length;k&&!h||(this||Yn)._array.push(c);k||(Wz?(this||Yn)._set.set(c,n):(this||Yn)._set[e]=n)};or.prototype.has=function(c){if(Wz)return(this||Yn)._set.has(c);c=tU.toSetString(c);return uU.call((this||Yn)._set,c)};or.prototype.indexOf=
function(c){if(Wz){var h=(this||Yn)._set.get(c);if(0<=h)return h}else if(h=tU.toSetString(c),uU.call((this||Yn)._set,h))return(this||Yn)._set[h];throw Error('"'+c+'" is not in the set.');};or.prototype.at=function(c){if(0<=c&&c<(this||Yn)._array.length)return(this||Yn)._array[c];throw Error("No element indexed by "+c);};or.prototype.toArray=function(){return(this||Yn)._array.slice()};var pr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,t8=bn;Xz.prototype.unsortedForEach=
function(c,h){(this||pr)._array.forEach(c,h)};Xz.prototype.add=function(c){var h=(this||pr)._last,e=h.generatedLine,k=c.generatedLine,n=h.generatedColumn,b=c.generatedColumn;k>e||k==e&&b>=n||0>=t8.compareByGeneratedPositionsInflated(h,c)?(this||pr)._last=c:(this||pr)._sorted=!1;(this||pr)._array.push(c)};Xz.prototype.toArray=function(){(this||pr)._sorted||((this||pr)._array.sort(t8.compareByGeneratedPositionsInflated),(this||pr)._sorted=!0);return(this||pr)._array};var Mi="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Bm=bn,mJ=or,gea=Xz;Pj.prototype._version=3;Pj.fromSourceMap=function(c){var h=c.sourceRoot,e=new Pj({file:c.file,sourceRoot:h});c.eachMapping(function(k){var n={generated:{line:k.generatedLine,column:k.generatedColumn}};null!=k.source&&(n.source=k.source,null!=h&&(n.source=Bm.relative(h,n.source)),n.original={line:k.originalLine,column:k.originalColumn},null!=k.name&&(n.name=k.name));e.addMapping(n)});c.sources.forEach(function(k){var n=k;null!==h&&
(n=Bm.relative(h,k));e._sources.has(n)||e._sources.add(n);n=c.sourceContentFor(k);null!=n&&e.setSourceContent(k,n)});return e};Pj.prototype.addMapping=function(c){var h=Bm.getArg(c,"generated"),e=Bm.getArg(c,"original",null),k=Bm.getArg(c,"source",null);c=Bm.getArg(c,"name",null);(this||Mi)._skipValidation||this._validateMapping(h,e,k,c);null!=k&&(k=String(k),(this||Mi)._sources.has(k)||(this||Mi)._sources.add(k));null!=c&&(c=String(c),(this||Mi)._names.has(c)||(this||Mi)._names.add(c));(this||Mi)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=e&&e.line,originalColumn:null!=e&&e.column,source:k,name:c})};Pj.prototype.setSourceContent=function(c,h){null!=(this||Mi)._sourceRoot&&(c=Bm.relative((this||Mi)._sourceRoot,c));null!=h?((this||Mi)._sourcesContents||((this||Mi)._sourcesContents=Object.create(null)),(this||Mi)._sourcesContents[Bm.toSetString(c)]=h):(this||Mi)._sourcesContents&&(delete (this||Mi)._sourcesContents[Bm.toSetString(c)],0===Object.keys((this||Mi)._sourcesContents).length&&((this||
Mi)._sourcesContents=null))};Pj.prototype.applySourceMap=function(c,h,e){var k=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');k=c.file}var n=(this||Mi)._sourceRoot;null!=n&&(k=Bm.relative(n,k));var b=new mJ,d=new mJ;(this||Mi)._mappings.unsortedForEach(function(m){if(m.source===k&&null!=m.originalLine){var a=c.originalPositionFor({line:m.originalLine,column:m.originalColumn});
null!=a.source&&(m.source=a.source,null!=e&&(m.source=Bm.join(e,m.source)),null!=n&&(m.source=Bm.relative(n,m.source)),m.originalLine=a.line,m.originalColumn=a.column,null!=a.name&&(m.name=a.name))}a=m.source;null==a||b.has(a)||b.add(a);m=m.name;null==m||d.has(m)||d.add(m)},this||Mi);(this||Mi)._sources=b;(this||Mi)._names=d;c.sources.forEach(function(m){var a=c.sourceContentFor(m);null!=a&&(null!=e&&(m=Bm.join(e,m)),null!=n&&(m=Bm.relative(n,m)),this.setSourceContent(m,a))},this||Mi)};Pj.prototype._validateMapping=
function(c,h,e,k){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!e&&!k||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
e))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:e,original:h,name:k}));};Pj.prototype._serializeMappings=function(){for(var c=0,h=1,e=0,k=0,n=0,b=0,d="",m,a,g,l=(this||Mi)._mappings.toArray(),r=0,v=l.length;r<v;r++){a=l[r];m="";if(a.generatedLine!==h)for(c=0;a.generatedLine!==h;)m+=";",h++;else if(0<r){if(!Bm.compareByGeneratedPositionsInflated(a,l[r-1]))continue;m+=","}m+=iE.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(g=(this||Mi)._sources.indexOf(a.source),
m+=iE.encode(g-b),b=g,m+=iE.encode(a.originalLine-1-k),k=a.originalLine-1,m+=iE.encode(a.originalColumn-e),e=a.originalColumn,null!=a.name&&(a=(this||Mi)._names.indexOf(a.name),m+=iE.encode(a-n),n=a));d+=m}return d};Pj.prototype._generateSourcesContent=function(c,h){return c.map(function(e){if(!(this||Mi)._sourcesContents)return null;null!=h&&(e=Bm.relative(h,e));e=Bm.toSetString(e);return Object.prototype.hasOwnProperty.call((this||Mi)._sourcesContents,e)?(this||Mi)._sourcesContents[e]:null},this||
Mi)};Pj.prototype.toJSON=function(){var c={version:(this||Mi)._version,sources:(this||Mi)._sources.toArray(),names:(this||Mi)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Mi)._file&&(c.file=(this||Mi)._file);null!=(this||Mi)._sourceRoot&&(c.sourceRoot=(this||Mi)._sourceRoot);(this||Mi)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};Pj.prototype.toString=function(){return JSON.stringify(this.toJSON())};var nJ={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,e,k){if(0===h.length)return-1;c=Dp(-1,h.length,c,h,e,k||nJ.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===e(h[c],h[c-1],!0);)--c;return c}},sf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qg=bn,vU=nJ,xC=or,gH=function(c,h){Nx(c,h,0,c.length-1)};Yk.fromSourceMap=function(c,h){return Cm.fromSourceMap(c,h)};Yk.prototype._version=3;Yk.prototype.__generatedMappings=null;Object.defineProperty(Yk.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||sf).__generatedMappings||this._parseMappings((this||sf)._mappings,(this||sf).sourceRoot);return(this||sf).__generatedMappings}});Yk.prototype.__originalMappings=null;Object.defineProperty(Yk.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||sf).__originalMappings||this._parseMappings((this||sf)._mappings,(this||sf).sourceRoot);return(this||sf).__originalMappings}});Yk.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};Yk.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};Yk.GENERATED_ORDER=1;Yk.ORIGINAL_ORDER=2;Yk.GREATEST_LOWER_BOUND=1;Yk.LEAST_UPPER_BOUND=2;Yk.prototype.eachMapping=function(c,h,e){h=h||null;switch(e||Yk.GENERATED_ORDER){case Yk.GENERATED_ORDER:e=(this||sf)._generatedMappings;break;case Yk.ORIGINAL_ORDER:e=(this||sf)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var k=(this||sf).sourceRoot;
e.map(function(n){var b=null===n.source?null:(this||sf)._sources.at(n.source);b=Qg.computeSourceURL(k,b,(this||sf)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||sf)._names.at(n.name)}},this||sf).forEach(c,h)};Yk.prototype.allGeneratedPositionsFor=function(c){var h=Qg.getArg(c,"line"),e={source:Qg.getArg(c,"source"),originalLine:h,originalColumn:Qg.getArg(c,"column",
0)};e.source=this._findSourceIndex(e.source);if(0>e.source)return[];var k=[];e=this._findMapping(e,(this||sf)._originalMappings,"originalLine","originalColumn",Qg.compareByOriginalPositions,vU.LEAST_UPPER_BOUND);if(0<=e){var n=(this||sf)._originalMappings[e];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)k.push({line:Qg.getArg(n,"generatedLine",null),column:Qg.getArg(n,"generatedColumn",null),lastColumn:Qg.getArg(n,"lastGeneratedColumn",null)}),n=(this||sf)._originalMappings[++e];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)k.push({line:Qg.getArg(n,"generatedLine",null),column:Qg.getArg(n,"generatedColumn",null),lastColumn:Qg.getArg(n,"lastGeneratedColumn",null)}),n=(this||sf)._originalMappings[++e]}return k};Cm.prototype=Object.create(Yk.prototype);Cm.prototype.consumer=Yk;Cm.prototype._findSourceIndex=function(c){var h=c;null!=(this||sf).sourceRoot&&(h=Qg.relative((this||sf).sourceRoot,h));if((this||sf)._sources.has(h))return(this||sf)._sources.indexOf(h);
for(h=0;h<(this||sf)._absoluteSources.length;++h)if((this||sf)._absoluteSources[h]==c)return h;return-1};Cm.fromSourceMap=function(c,h){var e=Object.create(Cm.prototype),k=e._names=xC.fromArray(c._names.toArray(),!0),n=e._sources=xC.fromArray(c._sources.toArray(),!0);e.sourceRoot=c._sourceRoot;e.sourcesContent=c._generateSourcesContent(e._sources.toArray(),e.sourceRoot);e.file=c._file;e._sourceMapURL=h;e._absoluteSources=e._sources.toArray().map(function(r){return Qg.computeSourceURL(e.sourceRoot,
r,h)});c=c._mappings.toArray().slice();for(var b=e.__generatedMappings=[],d=e.__originalMappings=[],m=0,a=c.length;m<a;m++){var g=c[m],l=new yC;l.generatedLine=g.generatedLine;l.generatedColumn=g.generatedColumn;g.source&&(l.source=n.indexOf(g.source),l.originalLine=g.originalLine,l.originalColumn=g.originalColumn,g.name&&(l.name=k.indexOf(g.name)),d.push(l));b.push(l)}gH(e.__originalMappings,Qg.compareByOriginalPositions);return e};Cm.prototype._version=3;Object.defineProperty(Cm.prototype,"sources",
{get:function(){return(this||sf)._absoluteSources.slice()}});Cm.prototype._parseMappings=function(c,h){h=1;for(var e=0,k=0,n=0,b=0,d=0,m=c.length,a=0,g={},l={},r=[],v=[],y,A,E,F,G;a<m;)if(";"===c.charAt(a))h++,a++,e=0;else if(","===c.charAt(a))a++;else{y=new yC;y.generatedLine=h;for(F=a;F<m&&!this._charIsMappingSeparator(c,F);F++);A=c.slice(a,F);if(E=g[A])a+=A.length;else{for(E=[];a<F;)iE.decode(c,a,l),G=l.value,a=l.rest,E.push(G);if(2===E.length)throw Error("Found a source, but no line and column");
if(3===E.length)throw Error("Found a source and line, but no column");g[A]=E}y.generatedColumn=e+E[0];e=y.generatedColumn;1<E.length&&(y.source=b+E[1],b+=E[1],y.originalLine=k+E[2],k=y.originalLine,y.originalLine+=1,y.originalColumn=n+E[3],n=y.originalColumn,4<E.length&&(y.name=d+E[4],d+=E[4]));v.push(y);"number"===typeof y.originalLine&&r.push(y)}gH(v,Qg.compareByGeneratedPositionsDeflated);(this||sf).__generatedMappings=v;gH(r,Qg.compareByOriginalPositions);(this||sf).__originalMappings=r};Cm.prototype._findMapping=
function(c,h,e,k,n,b){if(0>=c[e])throw new TypeError("Line must be greater than or equal to 1, got "+c[e]);if(0>c[k])throw new TypeError("Column must be greater than or equal to 0, got "+c[k]);return vU.search(c,h,n,b)};Cm.prototype.computeColumnSpans=function(){for(var c=0;c<(this||sf)._generatedMappings.length;++c){var h=(this||sf)._generatedMappings[c];if(c+1<(this||sf)._generatedMappings.length){var e=(this||sf)._generatedMappings[c+1];if(h.generatedLine===e.generatedLine){h.lastGeneratedColumn=
e.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Cm.prototype.originalPositionFor=function(c){var h={generatedLine:Qg.getArg(c,"line"),generatedColumn:Qg.getArg(c,"column")};c=this._findMapping(h,(this||sf)._generatedMappings,"generatedLine","generatedColumn",Qg.compareByGeneratedPositionsDeflated,Qg.getArg(c,"bias",Yk.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||sf)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=Qg.getArg(c,"source",null);null!==h&&(h=(this||sf)._sources.at(h),
h=Qg.computeSourceURL((this||sf).sourceRoot,h,(this||sf)._sourceMapURL));var e=Qg.getArg(c,"name",null);null!==e&&(e=(this||sf)._names.at(e));return{source:h,line:Qg.getArg(c,"originalLine",null),column:Qg.getArg(c,"originalColumn",null),name:e}}return{source:null,line:null,column:null,name:null}};Cm.prototype.hasContentsOfAllSources=function(){return(this||sf).sourcesContent?(this||sf).sourcesContent.length>=(this||sf)._sources.size()&&!(this||sf).sourcesContent.some(function(c){return null==c}):
!1};Cm.prototype.sourceContentFor=function(c,h){if(!(this||sf).sourcesContent)return null;var e=this._findSourceIndex(c);if(0<=e)return(this||sf).sourcesContent[e];null!=(this||sf).sourceRoot&&(c=Qg.relative((this||sf).sourceRoot,c));var k;if(null!=(this||sf).sourceRoot&&(k=Qg.urlParse((this||sf).sourceRoot))){e=c.replace(/^file:\/\//,"");if("file"==k.scheme&&(this||sf)._sources.has(e))return(this||sf).sourcesContent[(this||sf)._sources.indexOf(e)];if((!k.path||"/"==k.path)&&(this||sf)._sources.has("/"+
c))return(this||sf).sourcesContent[(this||sf)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Cm.prototype.generatedPositionFor=function(c){var h=Qg.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:Qg.getArg(c,"line"),originalColumn:Qg.getArg(c,"column")};c=this._findMapping(h,(this||sf)._originalMappings,"originalLine","originalColumn",Qg.compareByOriginalPositions,Qg.getArg(c,"bias",
Yk.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||sf)._originalMappings[c],c.source===h.source)?{line:Qg.getArg(c,"generatedLine",null),column:Qg.getArg(c,"generatedColumn",null),lastColumn:Qg.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};lj.prototype=Object.create(Yk.prototype);lj.prototype.constructor=Yk;lj.prototype._version=3;Object.defineProperty(lj.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||sf)._sections.length;h++)for(var e=0;e<(this||sf)._sections[h].consumer.sources.length;e++)c.push((this||
sf)._sections[h].consumer.sources[e]);return c}});lj.prototype.originalPositionFor=function(c){var h={generatedLine:Qg.getArg(c,"line"),generatedColumn:Qg.getArg(c,"column")},e=vU.search(h,(this||sf)._sections,function(k,n){var b=k.generatedLine-n.generatedOffset.generatedLine;return b?b:k.generatedColumn-n.generatedOffset.generatedColumn});return(e=(this||sf)._sections[e])?e.consumer.originalPositionFor({line:h.generatedLine-(e.generatedOffset.generatedLine-1),column:h.generatedColumn-(e.generatedOffset.generatedLine===
h.generatedLine?e.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};lj.prototype.hasContentsOfAllSources=function(){return(this||sf)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};lj.prototype.sourceContentFor=function(c,h){for(var e=0;e<(this||sf)._sections.length;e++){var k=(this||sf)._sections[e].consumer.sourceContentFor(c,!0);if(k)return k}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};lj.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||sf)._sections.length;h++){var e=(this||sf)._sections[h];if(-1!==e.consumer._findSourceIndex(Qg.getArg(c,"source"))){var k=e.consumer.generatedPositionFor(c);if(k)return{line:k.line+(e.generatedOffset.generatedLine-1),column:k.column+(e.generatedOffset.generatedLine===k.line?e.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};lj.prototype._parseMappings=function(c,h){(this||sf).__generatedMappings=[];(this||sf).__originalMappings=[];for(c=0;c<(this||
sf)._sections.length;c++){h=(this||sf)._sections[c];for(var e=h.consumer._generatedMappings,k=0;k<e.length;k++){var n=e[k],b=h.consumer._sources.at(n.source);b=Qg.computeSourceURL(h.consumer.sourceRoot,b,(this||sf)._sourceMapURL);(this||sf)._sources.add(b);b=(this||sf)._sources.indexOf(b);var d=null;n.name&&(d=h.consumer._names.at(n.name),(this||sf)._names.add(d),d=(this||sf)._names.indexOf(d));n={source:b,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:d};(this||sf).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||sf).__originalMappings.push(n)}}gH((this||sf).__generatedMappings,Qg.compareByGeneratedPositionsDeflated);gH((this||sf).__originalMappings,Qg.compareByOriginalPositions)};var Hj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iM=bn,
mla=/(\r?\n)/;Tl.fromStringWithSourceMap=function(c,h,e){function k(r,v){if(null===r||void 0===r.source)n.add(v);else{var y=e?iM.join(e,r.source):r.source;n.add(new Tl(r.originalLine,r.originalColumn,y,v,r.name))}}var n=new Tl,b=c.split(mla),d=0,m=function(){var r=d<b.length?b[d++]:void 0,v=(d<b.length?b[d++]:void 0)||"";return r+v},a=1,g=0,l=null;h.eachMapping(function(r){if(null!==l)if(a<r.generatedLine)k(l,m()),a++,g=0;else{var v=b[d]||"",y=v.substr(0,r.generatedColumn-g);b[d]=v.substr(r.generatedColumn-
g);g=r.generatedColumn;k(l,y);l=r;return}for(;a<r.generatedLine;)n.add(m()),a++;g<r.generatedColumn&&(v=b[d]||"",n.add(v.substr(0,r.generatedColumn)),b[d]=v.substr(r.generatedColumn),g=r.generatedColumn);l=r},this||Hj);d<b.length&&(l&&k(l,m()),n.add(b.splice(d).join("")));h.sources.forEach(function(r){var v=h.sourceContentFor(r);null!=v&&(null!=e&&(r=iM.join(e,r)),n.setSourceContent(r,v))});return n};Tl.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||Hj);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||Hj).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Hj};Tl.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||Hj).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Hj};Tl.prototype.walk=function(c){for(var h,
e=0,k=(this||Hj).children.length;e<k;e++)h=(this||Hj).children[e],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||Hj).source,line:(this||Hj).line,column:(this||Hj).column,name:(this||Hj).name})};Tl.prototype.join=function(c){var h,e=(this||Hj).children.length;if(0<e){var k=[];for(h=0;h<e-1;h++)k.push((this||Hj).children[h]),k.push(c);k.push((this||Hj).children[h]);(this||Hj).children=k}return this||Hj};Tl.prototype.replaceRight=function(c,h){var e=(this||Hj).children[(this||Hj).children.length-
1];e.$$$isSourceNode$$$?e.replaceRight(c,h):"string"===typeof e?(this||Hj).children[(this||Hj).children.length-1]=e.replace(c,h):(this||Hj).children.push("".replace(c,h));return this||Hj};Tl.prototype.setSourceContent=function(c,h){(this||Hj).sourceContents[iM.toSetString(c)]=h};Tl.prototype.walkSourceContents=function(c){for(var h=0,e=(this||Hj).children.length;h<e;h++)(this||Hj).children[h].$$$isSourceNode$$$&&(this||Hj).children[h].walkSourceContents(c);var k=Object.keys((this||Hj).sourceContents);
h=0;for(e=k.length;h<e;h++)c(iM.fromSetString(k[h]),(this||Hj).sourceContents[k[h]])};Tl.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};Tl.prototype.toStringWithSourceMap=function(c){var h="",e=1,k=0,n=new Pj(c),b=!1,d=null,m=null,a=null,g=null;this.walk(function(l,r){h+=l;null!==r.source&&null!==r.line&&null!==r.column?(d===r.source&&m===r.line&&a===r.column&&g===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e,column:k},
name:r.name}),d=r.source,m=r.line,a=r.column,g=r.name,b=!0):b&&(n.addMapping({generated:{line:e,column:k}}),d=null,b=!1);for(var v=0,y=l.length;v<y;v++)10===l.charCodeAt(v)?(e++,k=0,v+1===y?(d=null,b=!1):b&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:e,column:k},name:r.name})):k++});this.walkSourceContents(function(l,r){n.setSourceContent(l,r)});return{code:h,map:n}};var rn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Io=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(ha,
Ca){var Na="";for(Ca|=0;0<Ca;Ca>>>=1,ha+=ha)Ca&1&&(Na+=ha);return Na}function e(ha){var Ca=ha.length;return Ca&&oc.code.isLineTerminator(ha.charCodeAt(Ca-1))}function k(ha,Ca){for(var Na in Ca)Ca.hasOwnProperty(Na)&&(ha[Na]=Ca[Na]);return ha}function n(ha,Ca){function Na(Ud){return"object"===typeof Ud&&Ud instanceof Object&&!(Ud instanceof RegExp)}var yb;for(yb in Ca)if(Ca.hasOwnProperty(yb)){var gc=Ca[yb];Na(gc)?Na(ha[yb])?n(ha[yb],gc):ha[yb]=n({},gc):ha[yb]=gc}return ha}function b(ha,Ca){return 8232===
(ha&-2)?(Ca?"u":"\\u")+(8232===ha?"2028":"2029"):10===ha||13===ha?(Ca?"":"\\")+(10===ha?"n":"r"):String.fromCharCode(ha)}function d(ha,Ca){if(8===ha)return"\\b";if(12===ha)return"\\f";if(9===ha)return"\\t";var Na=ha.toString(16).toUpperCase();return K||255<ha?"\\u"+"0000".slice(Na.length)+Na:0!==ha||oc.code.isDecimalDigit(Ca)?11===ha?"\\x0B":"\\x"+"00".slice(Na.length)+Na:"\\0"}function m(ha){if(92===ha)return"\\\\";if(10===ha)return"\\n";if(13===ha)return"\\r";if(8232===ha)return"\\u2028";if(8233===
ha)return"\\u2029";throw Error("Incorrectly classified character");}function a(ha){var Ca,Na="";var yb=0;for(Ca=ha.length;yb<Ca;++yb){var gc=ha[yb];Na+=Array.isArray(gc)?a(gc):gc}return Na}function g(ha,Ca){if(!Lb)return Array.isArray(ha)?a(ha):ha;if(null==Ca){if(ha instanceof aa)return ha;Ca={}}return null==Ca.loc?new aa(null,null,Lb,ha,Ca.name||null):new aa(Ca.loc.start.line,Ca.loc.start.column,!0===Lb?Ca.loc.source||null:Lb,ha,Ca.name||null)}function l(){return ya?ya:" "}function r(ha,Ca){var Na=
g(ha).toString();if(0===Na.length)return[Ca];var yb=g(Ca).toString();if(0===yb.length)return[ha];Na=Na.charCodeAt(Na.length-1);yb=yb.charCodeAt(0);return(43===Na||45===Na)&&Na===yb||oc.code.isIdentifierPartES5(Na)&&oc.code.isIdentifierPartES5(yb)||47===Na&&105===yb?[ha,l(),Ca]:oc.code.isWhiteSpace(Na)||oc.code.isLineTerminator(Na)||oc.code.isWhiteSpace(yb)||oc.code.isLineTerminator(yb)?[ha,Ca]:[ha,ya,Ca]}function v(ha){var Ca=ra;ra+=Ea;ha(ra);ra=Ca}function y(ha,Ca){if("Line"===ha.type){if(e(ha.value))return"//"+
ha.value;Ca="//"+ha.value;dc||(Ca+="\n");return Ca}if(qa.format.indent.adjustMultilineComment&&/[\n\r]/.test(ha.value)){var Na,yb;ha=("/*"+ha.value+"*/").split(/\r\n|[\r\n]/);var gc=Number.MAX_VALUE;var Ud=1;for(Na=ha.length;Ud<Na;++Ud){var Td=ha[Ud];for(yb=0;yb<Td.length&&oc.code.isWhiteSpace(Td.charCodeAt(yb));)++yb;gc>yb&&(gc=yb)}"undefined"!==typeof Ca?(Td=ra,"*"===ha[1][gc]&&(Ca+=" "),ra=Ca):(gc&1&&--gc,Td=ra);Ud=1;for(Na=ha.length;Ud<Na;++Ud)Ca=g([ra,ha[Ud].slice(gc)]),ha[Ud]=Lb?Ca.join(""):
Ca;ra=Td;return ha.join("\n")}return"/*"+ha.value+"*/"}function A(ha,Ca){var Na;if(ha.leadingComments&&0<ha.leadingComments.length){var yb=Ca;if(dc){var gc=ha.leadingComments[0];Ca=[];var Ud=gc.extendedRange;var Td=gc.range;var cd=qc.substring(Ud[0],Td[0]);var gf=(cd.match(/\n/g)||[]).length;0<gf?(Ca.push(h("\n",gf)),Ca.push([ra,y(gc)])):(Ca.push(cd),Ca.push(y(gc)));gf=Td;cd=1;for(Na=ha.leadingComments.length;cd<Na;cd++)gc=ha.leadingComments[cd],Td=gc.range,gf=qc.substring(gf[1],Td[0]),gf=(gf.match(/\n/g)||
[]).length,Ca.push(h("\n",gf)),Ca.push([ra,y(gc)]),gf=Td;cd=qc.substring(Td[1],Ud[1]);gf=(cd.match(/\n/g)||[]).length;Ca.push(h("\n",gf))}else for(gc=ha.leadingComments[0],Ca=[],ka&&ha.type===$c.Program&&0===ha.body.length&&Ca.push("\n"),Ca.push(y(gc)),e(g(Ca).toString())||Ca.push("\n"),cd=1,Na=ha.leadingComments.length;cd<Na;++cd)gc=ha.leadingComments[cd],gc=[y(gc)],e(g(gc).toString())||gc.push("\n"),Ca.push([ra,gc]);Ca.push([ra,yb])}if(ha.trailingComments)if(dc)gc=ha.trailingComments[0],Ud=gc.extendedRange,
Td=gc.range,cd=qc.substring(Ud[0],Td[0]),gf=(cd.match(/\n/g)||[]).length,0<gf?(Ca.push(h("\n",gf)),Ca.push([ra,y(gc)])):(Ca.push(cd),Ca.push(y(gc)));else{yb=!e(g(Ca).toString());cd=g([ra,Ca,Ea]).toString();for(Na=cd.length-1;0<=Na&&!oc.code.isLineTerminator(cd.charCodeAt(Na));--Na);Ud=h(" ",cd.length-1-Na);cd=0;for(Na=ha.trailingComments.length;cd<Na;++cd)gc=ha.trailingComments[cd],yb?(Ca=0===cd?[Ca,Ea]:[Ca,Ud],Ca.push(y(gc,Ud))):Ca=[Ca,[ra,y(gc)]],cd===Na-1||e(g(Ca).toString())||(Ca=[Ca,"\n"])}return Ca}
function E(ha,Ca,Na){for(var yb=0;ha<Ca;ha++)"\n"===qc[ha]&&yb++;for(ha=1;ha<yb;ha++)Na.push(la)}function F(ha,Ca,Na){return Ca<Na?["(",ha,")"]:ha}function G(ha){var Ca;var Na=ha.split(/\r\n|\n/);ha=1;for(Ca=Na.length;ha<Ca;ha++)Na[ha]=la+ra+Na[ha];return Na}function I(){}function M(ha){return g(ha.name,ha)}function L(ha,Ca){return ha.async?"async"+(Ca?l():ya):""}function S(ha){return ha.generator&&!qa.moz.starlessGenerator?"*"+ya:""}function R(ha){var Ca=ha.value,Na="";Ca.async&&(Na+=L(Ca,!ha.computed));
Ca.generator&&(Na+=S(Ca)?"*":"");return Na}var aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La,Lb,qc,dc;var oc=fH;var $c=sU.Syntax;var Vb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var Hd={"||":Vb.LogicalOR,"&&":Vb.LogicalAND,"|":Vb.BitwiseOR,
"^":Vb.BitwiseXOR,"&":Vb.BitwiseAND,"==":Vb.Equality,"!=":Vb.Equality,"===":Vb.Equality,"!==":Vb.Equality,is:Vb.Equality,isnt:Vb.Equality,"<":Vb.Relational,">":Vb.Relational,"<=":Vb.Relational,">=":Vb.Relational,"in":Vb.Relational,"instanceof":Vb.Relational,"<<":Vb.BitwiseSHIFT,">>":Vb.BitwiseSHIFT,">>>":Vb.BitwiseSHIFT,"+":Vb.Additive,"-":Vb.Additive,"*":Vb.Multiplicative,"%":Vb.Multiplicative,"/":Vb.Multiplicative,"**":Vb.Exponentiation};I.prototype.maybeBlock=function(ha,Ca){var Na,yb=this||rn;
var gc=!qa.comment||!ha.leadingComments;if(ha.type===$c.BlockStatement&&gc)return[ya,this.generateStatement(ha,Ca)];if(ha.type===$c.EmptyStatement&&gc)return";";v(function(){Na=[la,[ra,yb.generateStatement(ha,Ca)]]});return Na};I.prototype.maybeBlockSuffix=function(ha,Ca){var Na=e(g(Ca).toString());return ha.type!==$c.BlockStatement||qa.comment&&ha.leadingComments||Na?Na?[Ca,ra]:[Ca,la,ra]:[Ca,ya]};I.prototype.generatePattern=function(ha,Ca,Na){return ha.type===$c.Identifier?M(ha):this.generateExpression(ha,
Ca,Na)};I.prototype.generateFunctionParams=function(ha){var Ca;var Na=!1;if(ha.type!==$c.ArrowFunctionExpression||ha.rest||ha.defaults&&0!==ha.defaults.length||1!==ha.params.length||ha.params[0].type!==$c.Identifier){var yb=ha.type===$c.ArrowFunctionExpression?[L(ha,!1)]:[];yb.push("(");ha.defaults&&(Na=!0);var gc=0;for(Ca=ha.params.length;gc<Ca;++gc)Na&&ha.defaults[gc]?yb.push(this.generateAssignment(ha.params[gc],ha.defaults[gc],"=",Vb.Assignment,7)):yb.push(this.generatePattern(ha.params[gc],Vb.Assignment,
7)),gc+1<Ca&&yb.push(","+ya);ha.rest&&(ha.params.length&&yb.push(","+ya),yb.push("..."),yb.push(M(ha.rest)));yb.push(")")}else yb=[L(ha,!0),M(ha.params[0])];return yb};I.prototype.generateFunctionBody=function(ha){var Ca=this.generateFunctionParams(ha);ha.type===$c.ArrowFunctionExpression&&(Ca.push(ya),Ca.push("=>"));ha.expression?(Ca.push(ya),ha=this.generateExpression(ha.body,Vb.Assignment,7),"{"===ha.toString().charAt(0)&&(ha=["(",ha,")"]),Ca.push(ha)):Ca.push(this.maybeBlock(ha.body,9));return Ca};
I.prototype.generateIterationForStatement=function(ha,Ca,Na){var yb=["for"+(Ca.await?l()+"await":"")+ya+"("],gc=this||rn;v(function(){Ca.left.type===$c.VariableDeclaration?v(function(){yb.push(Ca.left.kind+l());yb.push(gc.generateStatement(Ca.left.declarations[0],0))}):yb.push(gc.generateExpression(Ca.left,Vb.Call,7));yb=r(yb,ha);yb=[r(yb,gc.generateExpression(Ca.right,Vb.Assignment,7)),")"]});yb.push(this.maybeBlock(Ca.body,Na));return yb};I.prototype.generatePropertyKey=function(ha,Ca){var Na=[];
Ca&&Na.push("[");Na.push(this.generateExpression(ha,Vb.Assignment,7));Ca&&Na.push("]");return Na};I.prototype.generateAssignment=function(ha,Ca,Na,yb,gc){Vb.Assignment<yb&&(gc|=1);return F([this.generateExpression(ha,Vb.Call,gc),ya+Na+ya,this.generateExpression(Ca,Vb.Assignment,gc)],Vb.Assignment,yb)};I.prototype.semicolon=function(ha){return!gb&&ha&32?"":";"};I.Statement={BlockStatement:function(ha,Ca){var Na,yb,gc=["{",la],Ud=this||rn;v(function(){0===ha.body.length&&dc&&(Na=ha.range,2<Na[1]-Na[0]&&
(yb=qc.substring(Na[0]+1,Na[1]-1),"\n"===yb[0]&&(gc=["{"]),gc.push(yb)));var Td;var cd=1;Ca&8&&(cd|=16);var gf=0;for(Td=ha.body.length;gf<Td;++gf){dc&&(0===gf&&(ha.body[0].leadingComments&&(Na=ha.body[0].leadingComments[0].extendedRange,yb=qc.substring(Na[0],Na[1]),"\n"===yb[0]&&(gc=["{"])),ha.body[0].leadingComments||E(ha.range[0],ha.body[0].range[0],gc)),0<gf&&(ha.body[gf-1].trailingComments||ha.body[gf].leadingComments||E(ha.body[gf-1].range[1],ha.body[gf].range[0],gc)));gf===Td-1&&(cd|=32);var Ze=
ha.body[gf].leadingComments&&dc?Ud.generateStatement(ha.body[gf],cd):[ra,Ud.generateStatement(ha.body[gf],cd)];gc.push(Ze);e(g(Ze).toString())||(dc&&gf<Td-1?ha.body[gf+1].leadingComments||gc.push(la):gc.push(la));dc&&gf===Td-1&&(ha.body[gf].trailingComments||E(ha.body[gf].range[1],ha.range[1],gc))}});gc.push([ra,"}"]);return gc},BreakStatement:function(ha,Ca){return ha.label?"break "+ha.label.name+this.semicolon(Ca):"break"+this.semicolon(Ca)},ContinueStatement:function(ha,Ca){return ha.label?"continue "+
ha.label.name+this.semicolon(Ca):"continue"+this.semicolon(Ca)},ClassBody:function(ha,Ca){var Na=["{",la],yb=this||rn;v(function(gc){var Ud;var Td=0;for(Ud=ha.body.length;Td<Ud;++Td)Na.push(gc),Na.push(yb.generateExpression(ha.body[Td],Vb.Sequence,7)),Td+1<Ud&&Na.push(la)});e(g(Na).toString())||Na.push(la);Na.push(ra);Na.push("}");return Na},ClassDeclaration:function(ha,Ca){Ca=["class"];ha.id&&(Ca=r(Ca,this.generateExpression(ha.id,Vb.Sequence,7)));if(ha.superClass){var Na=r("extends",this.generateExpression(ha.superClass,
Vb.Unary,7));Ca=r(Ca,Na)}Ca.push(ya);Ca.push(this.generateStatement(ha.body,33));return Ca},DirectiveStatement:function(ha,Ca){if(qa.raw&&ha.raw)return ha.raw+this.semicolon(Ca);ha=ha.directive;var Na;var yb="double"===V?'"':"'";var gc=0;for(Na=ha.length;gc<Na;++gc){var Ud=ha.charCodeAt(gc);if(39===Ud){yb='"';break}else if(34===Ud){yb="'";break}else 92===Ud&&++gc}return yb+ha+yb+this.semicolon(Ca)},DoWhileStatement:function(ha,Ca){var Na=r("do",this.maybeBlock(ha.body,1));Na=this.maybeBlockSuffix(ha.body,
Na);return r(Na,["while"+ya+"(",this.generateExpression(ha.test,Vb.Sequence,7),")"+this.semicolon(Ca)])},CatchClause:function(ha,Ca){var Na,yb=this||rn;v(function(){if(ha.param){if(Na=["catch"+ya+"(",yb.generateExpression(ha.param,Vb.Sequence,7),")"],ha.guard){var gc=yb.generateExpression(ha.guard,Vb.Sequence,7);Na.splice(2,0," if ",gc)}}else Na=["catch"]});Na.push(this.maybeBlock(ha.body,1));return Na},DebuggerStatement:function(ha,Ca){return"debugger"+this.semicolon(Ca)},EmptyStatement:function(ha,
Ca){return";"},ExportDefaultDeclaration:function(ha,Ca){var Na=["export"];var yb=Ca&32?33:1;Na=r(Na,"default");return Na=I.Statement.hasOwnProperty(ha.declaration.type)?r(Na,this.generateStatement(ha.declaration,yb)):r(Na,this.generateExpression(ha.declaration,Vb.Assignment,7)+this.semicolon(Ca))},ExportNamedDeclaration:function(ha,Ca){var Na=["export"],yb=this||rn;var gc=Ca&32?33:1;if(ha.declaration)return r(Na,this.generateStatement(ha.declaration,gc));ha.specifiers&&(0===ha.specifiers.length?Na=
r(Na,"{"+ya+"}"):ha.specifiers[0].type===$c.ExportBatchSpecifier?Na=r(Na,this.generateExpression(ha.specifiers[0],Vb.Sequence,7)):(Na=r(Na,"{"),v(function(Ud){var Td;Na.push(la);var cd=0;for(Td=ha.specifiers.length;cd<Td;++cd)Na.push(Ud),Na.push(yb.generateExpression(ha.specifiers[cd],Vb.Sequence,7)),cd+1<Td&&Na.push(","+la)}),e(g(Na).toString())||Na.push(la),Na.push(ra+"}")),ha.source?Na=r(Na,["from"+ya,this.generateExpression(ha.source,Vb.Sequence,7),this.semicolon(Ca)]):Na.push(this.semicolon(Ca)));
return Na},ExportAllDeclaration:function(ha,Ca){return["export"+ya,"*"+ya,"from"+ya,this.generateExpression(ha.source,Vb.Sequence,7),this.semicolon(Ca)]},ExpressionStatement:function(ha,Ca){function Na(cd){if("class"!==cd.slice(0,5))return!1;cd=cd.charCodeAt(5);return 123===cd||oc.code.isWhiteSpace(cd)||oc.code.isLineTerminator(cd)}function yb(cd){if("function"!==cd.slice(0,8))return!1;cd=cd.charCodeAt(8);return 40===cd||oc.code.isWhiteSpace(cd)||42===cd||oc.code.isLineTerminator(cd)}function gc(cd){var gf;
if("async"!==cd.slice(0,5)||!oc.code.isWhiteSpace(cd.charCodeAt(5)))return!1;var Ze=6;for(gf=cd.length;Ze<gf&&oc.code.isWhiteSpace(cd.charCodeAt(Ze));++Ze);if(Ze===gf||"function"!==cd.slice(Ze,Ze+8))return!1;cd=cd.charCodeAt(Ze+8);return 40===cd||oc.code.isWhiteSpace(cd)||42===cd||oc.code.isLineTerminator(cd)}var Ud=[this.generateExpression(ha.expression,Vb.Sequence,7)];var Td=g(Ud).toString();123===Td.charCodeAt(0)||Na(Td)||yb(Td)||gc(Td)||ia&&Ca&16&&ha.expression.type===$c.Literal&&"string"===typeof ha.expression.value?
Ud=["(",Ud,")"+this.semicolon(Ca)]:Ud.push(this.semicolon(Ca));return Ud},ImportDeclaration:function(ha,Ca){var Na=this||rn;if(0===ha.specifiers.length)return["import",ya,this.generateExpression(ha.source,Vb.Sequence,7),this.semicolon(Ca)];var yb=["import"];var gc=0;ha.specifiers[gc].type===$c.ImportDefaultSpecifier&&(yb=r(yb,[this.generateExpression(ha.specifiers[gc],Vb.Sequence,7)]),++gc);ha.specifiers[gc]&&(0!==gc&&yb.push(","),ha.specifiers[gc].type===$c.ImportNamespaceSpecifier?yb=r(yb,[ya,this.generateExpression(ha.specifiers[gc],
Vb.Sequence,7)]):(yb.push(ya+"{"),1===ha.specifiers.length-gc?(yb.push(ya),yb.push(this.generateExpression(ha.specifiers[gc],Vb.Sequence,7)),yb.push(ya+"}"+ya)):(v(function(Ud){var Td;yb.push(la);var cd=gc;for(Td=ha.specifiers.length;cd<Td;++cd)yb.push(Ud),yb.push(Na.generateExpression(ha.specifiers[cd],Vb.Sequence,7)),cd+1<Td&&yb.push(","+la)}),e(g(yb).toString())||yb.push(la),yb.push(ra+"}"+ya))));return yb=r(yb,["from"+ya,this.generateExpression(ha.source,Vb.Sequence,7),this.semicolon(Ca)])},VariableDeclarator:function(ha,
Ca){Ca=Ca&1?7:6;return ha.init?[this.generateExpression(ha.id,Vb.Assignment,Ca),ya,"=",ya,this.generateExpression(ha.init,Vb.Assignment,Ca)]:this.generatePattern(ha.id,Vb.Assignment,Ca)},VariableDeclaration:function(ha,Ca){function Na(){Ud=ha.declarations[0];qa.comment&&Ud.leadingComments?(cd.push("\n"),cd.push([ra,Td.generateStatement(Ud,gf)])):(cd.push(l()),cd.push(Td.generateStatement(Ud,gf)));yb=1;for(gc=ha.declarations.length;yb<gc;++yb)Ud=ha.declarations[yb],qa.comment&&Ud.leadingComments?(cd.push(","+
la),cd.push([ra,Td.generateStatement(Ud,gf)])):(cd.push(","+ya),cd.push(Td.generateStatement(Ud,gf)))}var yb,gc,Ud,Td=this||rn;var cd=[ha.kind];var gf=Ca&1?1:0;1<ha.declarations.length?v(Na):Na();cd.push(this.semicolon(Ca));return cd},ThrowStatement:function(ha,Ca){return[r("throw",this.generateExpression(ha.argument,Vb.Sequence,7)),this.semicolon(Ca)]},TryStatement:function(ha,Ca){var Na;Ca=["try",this.maybeBlock(ha.block,1)];Ca=this.maybeBlockSuffix(ha.block,Ca);if(ha.handlers){var yb=0;for(Na=
ha.handlers.length;yb<Na;++yb)if(Ca=r(Ca,this.generateStatement(ha.handlers[yb],1)),ha.finalizer||yb+1!==Na)Ca=this.maybeBlockSuffix(ha.handlers[yb].body,Ca)}else{var gc=ha.guardedHandlers||[];yb=0;for(Na=gc.length;yb<Na;++yb)if(Ca=r(Ca,this.generateStatement(gc[yb],1)),ha.finalizer||yb+1!==Na)Ca=this.maybeBlockSuffix(gc[yb].body,Ca);if(ha.handler)if(Array.isArray(ha.handler))for(yb=0,Na=ha.handler.length;yb<Na;++yb){if(Ca=r(Ca,this.generateStatement(ha.handler[yb],1)),ha.finalizer||yb+1!==Na)Ca=
this.maybeBlockSuffix(ha.handler[yb].body,Ca)}else Ca=r(Ca,this.generateStatement(ha.handler,1)),ha.finalizer&&(Ca=this.maybeBlockSuffix(ha.handler.body,Ca))}ha.finalizer&&(Ca=r(Ca,["finally",this.maybeBlock(ha.finalizer,1)]));return Ca},SwitchStatement:function(ha,Ca){var Na,yb,gc=this||rn;v(function(){Na=["switch"+ya+"(",gc.generateExpression(ha.discriminant,Vb.Sequence,7),")"+ya+"{"+la]});if(ha.cases){var Ud=1;var Td=0;for(yb=ha.cases.length;Td<yb;++Td)Td===yb-1&&(Ud|=32),Ca=[ra,this.generateStatement(ha.cases[Td],
Ud)],Na.push(Ca),e(g(Ca).toString())||Na.push(la)}Na.push([ra,"}"]);return Na},SwitchCase:function(ha,Ca){var Na,yb,gc,Ud,Td,cd=this||rn;v(function(){Na=ha.test?[r("case",cd.generateExpression(ha.test,Vb.Sequence,7)),":"]:["default:"];gc=0;(Ud=ha.consequent.length)&&ha.consequent[0].type===$c.BlockStatement&&(yb=cd.maybeBlock(ha.consequent[0],1),Na.push(yb),gc=1);gc===Ud||e(g(Na).toString())||Na.push(la);for(Td=1;gc<Ud;++gc)gc===Ud-1&&Ca&32&&(Td|=32),yb=[ra,cd.generateStatement(ha.consequent[gc],
Td)],Na.push(yb),gc+1===Ud||e(g(yb).toString())||Na.push(la)});return Na},IfStatement:function(ha,Ca){var Na=this||rn;v(function(){gc=["if"+ya+"(",Na.generateExpression(ha.test,Vb.Sequence,7),")"]});var yb=1;Ca&32&&(yb|=32);if(ha.alternate){gc.push(this.maybeBlock(ha.consequent,1));var gc=this.maybeBlockSuffix(ha.consequent,gc);gc=ha.alternate.type===$c.IfStatement?r(gc,["else ",this.generateStatement(ha.alternate,yb)]):r(gc,r("else",this.maybeBlock(ha.alternate,yb)))}else gc.push(this.maybeBlock(ha.consequent,
yb));return gc},ForStatement:function(ha,Ca){var Na,yb=this||rn;v(function(){Na=["for"+ya+"("];ha.init?ha.init.type===$c.VariableDeclaration?Na.push(yb.generateStatement(ha.init,0)):(Na.push(yb.generateExpression(ha.init,Vb.Sequence,6)),Na.push(";")):Na.push(";");ha.test&&(Na.push(ya),Na.push(yb.generateExpression(ha.test,Vb.Sequence,7)));Na.push(";");ha.update&&(Na.push(ya),Na.push(yb.generateExpression(ha.update,Vb.Sequence,7)));Na.push(")")});Na.push(this.maybeBlock(ha.body,Ca&32?33:1));return Na},
ForInStatement:function(ha,Ca){return this.generateIterationForStatement("in",ha,Ca&32?33:1)},ForOfStatement:function(ha,Ca){return this.generateIterationForStatement("of",ha,Ca&32?33:1)},LabeledStatement:function(ha,Ca){return[ha.label.name+":",this.maybeBlock(ha.body,Ca&32?33:1)]},Program:function(ha,Ca){var Na;var yb=ha.body.length;Ca=[ka&&0<yb?"\n":""];var gc=17;for(Na=0;Na<yb;++Na){ka||Na!==yb-1||(gc|=32);dc&&(0===Na&&(ha.body[0].leadingComments||E(ha.range[0],ha.body[Na].range[0],Ca)),0<Na&&
(ha.body[Na-1].trailingComments||ha.body[Na].leadingComments||E(ha.body[Na-1].range[1],ha.body[Na].range[0],Ca)));var Ud=[ra,this.generateStatement(ha.body[Na],gc)];Ca.push(Ud);Na+1<yb&&!e(g(Ud).toString())&&(dc?ha.body[Na+1].leadingComments||Ca.push(la):Ca.push(la));dc&&Na===yb-1&&(ha.body[Na].trailingComments||E(ha.body[Na].range[1],ha.range[1],Ca))}return Ca},FunctionDeclaration:function(ha,Ca){return[L(ha,!0),"function",S(ha)||l(),ha.id?M(ha.id):"",this.generateFunctionBody(ha)]},ReturnStatement:function(ha,
Ca){return ha.argument?[r("return",this.generateExpression(ha.argument,Vb.Sequence,7)),this.semicolon(Ca)]:["return"+this.semicolon(Ca)]},WhileStatement:function(ha,Ca){var Na,yb=this||rn;v(function(){Na=["while"+ya+"(",yb.generateExpression(ha.test,Vb.Sequence,7),")"]});Na.push(this.maybeBlock(ha.body,Ca&32?33:1));return Na},WithStatement:function(ha,Ca){var Na,yb=this||rn;v(function(){Na=["with"+ya+"(",yb.generateExpression(ha.object,Vb.Sequence,7),")"]});Na.push(this.maybeBlock(ha.body,Ca&32?33:
1));return Na}};k(I.prototype,I.Statement);I.Expression={SequenceExpression:function(ha,Ca,Na){var yb;Vb.Sequence<Ca&&(Na|=1);var gc=[];var Ud=0;for(yb=ha.expressions.length;Ud<yb;++Ud)gc.push(this.generateExpression(ha.expressions[Ud],Vb.Assignment,Na)),Ud+1<yb&&gc.push(","+ya);return F(gc,Vb.Sequence,Ca)},AssignmentExpression:function(ha,Ca,Na){return this.generateAssignment(ha.left,ha.right,ha.operator,Ca,Na)},ArrowFunctionExpression:function(ha,Ca,Na){return F(this.generateFunctionBody(ha),Vb.ArrowFunction,
Ca)},ConditionalExpression:function(ha,Ca,Na){Vb.Conditional<Ca&&(Na|=1);return F([this.generateExpression(ha.test,Vb.LogicalOR,Na),ya+"?"+ya,this.generateExpression(ha.consequent,Vb.Assignment,Na),ya+":"+ya,this.generateExpression(ha.alternate,Vb.Assignment,Na)],Vb.Conditional,Ca)},LogicalExpression:function(ha,Ca,Na){return this.BinaryExpression(ha,Ca,Na)},BinaryExpression:function(ha,Ca,Na){var yb=Hd[ha.operator];var gc="**"===ha.operator?Vb.Postfix:yb;var Ud="**"===ha.operator?yb:yb+1;yb<Ca&&
(Na|=1);gc=this.generateExpression(ha.left,gc,Na);var Td=gc.toString();Td=47===Td.charCodeAt(Td.length-1)&&oc.code.isIdentifierPartES5(ha.operator.charCodeAt(0))?[gc,l(),ha.operator]:r(gc,ha.operator);gc=this.generateExpression(ha.right,Ud,Na);"/"===ha.operator&&"/"===gc.toString().charAt(0)||"<"===ha.operator.slice(-1)&&"!--"===gc.toString().slice(0,3)?(Td.push(l()),Td.push(gc)):Td=r(Td,gc);return"in"!==ha.operator||Na&1?F(Td,yb,Ca):["(",Td,")"]},CallExpression:function(ha,Ca,Na){var yb;var gc=[this.generateExpression(ha.callee,
Vb.Call,3)];ha.optional&&gc.push("?.");gc.push("(");var Ud=0;for(yb=ha.arguments.length;Ud<yb;++Ud)gc.push(this.generateExpression(ha.arguments[Ud],Vb.Assignment,7)),Ud+1<yb&&gc.push(","+ya);gc.push(")");return Na&2?F(gc,Vb.Call,Ca):["(",gc,")"]},ChainExpression:function(ha,Ca,Na){Vb.OptionalChaining<Ca&&(Na|=2);ha=this.generateExpression(ha.expression,Vb.OptionalChaining,Na);return F(ha,Vb.OptionalChaining,Ca)},NewExpression:function(ha,Ca,Na){var yb=ha.arguments.length;var gc=r("new",this.generateExpression(ha.callee,
Vb.New,Na&4&&!jb&&0===yb?5:1));if(!(Na&4)||jb||0<yb){gc.push("(");for(Na=0;Na<yb;++Na)gc.push(this.generateExpression(ha.arguments[Na],Vb.Assignment,7)),Na+1<yb&&gc.push(","+ya);gc.push(")")}return F(gc,Vb.New,Ca)},MemberExpression:function(ha,Ca,Na){var yb=[this.generateExpression(ha.object,Vb.Call,Na&2?3:1)];ha.computed?(ha.optional&&yb.push("?."),yb.push("["),yb.push(this.generateExpression(ha.property,Vb.Sequence,Na&2?7:5)),yb.push("]")):(ha.optional||ha.object.type!==$c.Literal||"number"!==typeof ha.object.value||
(Na=g(yb).toString(),0>Na.indexOf(".")&&!/[eExX]/.test(Na)&&oc.code.isDecimalDigit(Na.charCodeAt(Na.length-1))&&!(2<=Na.length&&48===Na.charCodeAt(0))&&yb.push(" ")),yb.push(ha.optional?"?.":"."),yb.push(M(ha.property)));return F(yb,Vb.Member,Ca)},MetaProperty:function(ha,Ca,Na){Na=[];Na.push("string"===typeof ha.meta?ha.meta:M(ha.meta));Na.push(".");Na.push("string"===typeof ha.property?ha.property:M(ha.property));return F(Na,Vb.Member,Ca)},UnaryExpression:function(ha,Ca,Na){var yb=this.generateExpression(ha.argument,
Vb.Unary,7);if(""===ya)Na=r(ha.operator,yb);else if(Na=[ha.operator],2<ha.operator.length)Na=r(Na,yb);else{ha=g(Na).toString();var gc=ha.charCodeAt(ha.length-1);ha=yb.toString().charCodeAt(0);((43===gc||45===gc)&&gc===ha||oc.code.isIdentifierPartES5(gc)&&oc.code.isIdentifierPartES5(ha))&&Na.push(l());Na.push(yb)}return F(Na,Vb.Unary,Ca)},YieldExpression:function(ha,Ca,Na){Na=ha.delegate?"yield*":"yield";ha.argument&&(Na=r(Na,this.generateExpression(ha.argument,Vb.Yield,7)));return F(Na,Vb.Yield,Ca)},
AwaitExpression:function(ha,Ca,Na){ha=r(ha.all?"await*":"await",this.generateExpression(ha.argument,Vb.Await,7));return F(ha,Vb.Await,Ca)},UpdateExpression:function(ha,Ca,Na){return ha.prefix?F([ha.operator,this.generateExpression(ha.argument,Vb.Unary,7)],Vb.Unary,Ca):F([this.generateExpression(ha.argument,Vb.Postfix,7),ha.operator],Vb.Postfix,Ca)},FunctionExpression:function(ha,Ca,Na){Ca=[L(ha,!0),"function"];ha.id?(Ca.push(S(ha)||l()),Ca.push(M(ha.id))):Ca.push(S(ha)||ya);Ca.push(this.generateFunctionBody(ha));
return Ca},ArrayPattern:function(ha,Ca,Na){return this.ArrayExpression(ha,Ca,Na,!0)},ArrayExpression:function(ha,Ca,Na,yb){var gc=this||rn;if(!ha.elements.length)return"[]";var Ud=yb?!1:1<ha.elements.length;var Td=["[",Ud?la:""];v(function(cd){var gf;var Ze=0;for(gf=ha.elements.length;Ze<gf;++Ze)ha.elements[Ze]?(Td.push(Ud?cd:""),Td.push(gc.generateExpression(ha.elements[Ze],Vb.Assignment,7))):(Ud&&Td.push(cd),Ze+1===gf&&Td.push(",")),Ze+1<gf&&Td.push(","+(Ud?la:ya))});Ud&&!e(g(Td).toString())&&Td.push(la);
Td.push(Ud?ra:"");Td.push("]");return Td},RestElement:function(ha,Ca,Na){return"..."+this.generatePattern(ha.argument)},ClassExpression:function(ha,Ca,Na){Ca=["class"];ha.id&&(Ca=r(Ca,this.generateExpression(ha.id,Vb.Sequence,7)));ha.superClass&&(Na=r("extends",this.generateExpression(ha.superClass,Vb.Unary,7)),Ca=r(Ca,Na));Ca.push(ya);Ca.push(this.generateStatement(ha.body,33));return Ca},MethodDefinition:function(ha,Ca,Na){Ca=ha["static"]?["static"+ya]:[];ha="get"===ha.kind||"set"===ha.kind?[r(ha.kind,
this.generatePropertyKey(ha.key,ha.computed)),this.generateFunctionBody(ha.value)]:[R(ha),this.generatePropertyKey(ha.key,ha.computed),this.generateFunctionBody(ha.value)];return r(Ca,ha)},Property:function(ha,Ca,Na){return"get"===ha.kind||"set"===ha.kind?[ha.kind,l(),this.generatePropertyKey(ha.key,ha.computed),this.generateFunctionBody(ha.value)]:ha.shorthand?"AssignmentPattern"===ha.value.type?this.AssignmentPattern(ha.value,Vb.Sequence,7):this.generatePropertyKey(ha.key,ha.computed):ha.method?
[R(ha),this.generatePropertyKey(ha.key,ha.computed),this.generateFunctionBody(ha.value)]:[this.generatePropertyKey(ha.key,ha.computed),":"+ya,this.generateExpression(ha.value,Vb.Assignment,7)]},ObjectExpression:function(ha,Ca,Na){var yb,gc,Ud=this||rn;if(!ha.properties.length)return"{}";var Td=1<ha.properties.length;v(function(){gc=Ud.generateExpression(ha.properties[0],Vb.Sequence,7)});if(!Td&&!/[\r\n]/g.test(g(gc).toString()))return["{",ya,gc,ya,"}"];v(function(cd){var gf;yb=["{",la,cd,gc];if(Td){yb.push(","+
la);var Ze=1;for(gf=ha.properties.length;Ze<gf;++Ze)yb.push(cd),yb.push(Ud.generateExpression(ha.properties[Ze],Vb.Sequence,7)),Ze+1<gf&&yb.push(","+la)}});e(g(yb).toString())||yb.push(la);yb.push(ra);yb.push("}");return yb},AssignmentPattern:function(ha,Ca,Na){return this.generateAssignment(ha.left,ha.right,"=",Ca,Na)},ObjectPattern:function(ha,Ca,Na){var yb=this||rn;if(!ha.properties.length)return"{}";var gc=!1;if(1===ha.properties.length){var Ud=ha.properties[0];Ud.type===$c.Property&&Ud.value.type!==
$c.Identifier&&(gc=!0)}else for(Ca=0,Na=ha.properties.length;Ca<Na;++Ca)if(Ud=ha.properties[Ca],Ud.type===$c.Property&&!Ud.shorthand){gc=!0;break}var Td=["{",gc?la:""];v(function(cd){var gf;var Ze=0;for(gf=ha.properties.length;Ze<gf;++Ze)Td.push(gc?cd:""),Td.push(yb.generateExpression(ha.properties[Ze],Vb.Sequence,7)),Ze+1<gf&&Td.push(","+(gc?la:ya))});gc&&!e(g(Td).toString())&&Td.push(la);Td.push(gc?ra:"");Td.push("}");return Td},ThisExpression:function(ha,Ca,Na){return"this"},Super:function(ha,
Ca,Na){return"super"},Identifier:function(ha,Ca,Na){return M(ha)},ImportDefaultSpecifier:function(ha,Ca,Na){return M(ha.id||ha.local)},ImportNamespaceSpecifier:function(ha,Ca,Na){Ca=["*"];(ha=ha.id||ha.local)&&Ca.push(ya+"as"+l()+M(ha));return Ca},ImportSpecifier:function(ha,Ca,Na){Ca=ha.imported;Na=[Ca.name];(ha=ha.local)&&ha.name!==Ca.name&&Na.push(l()+"as"+l()+M(ha));return Na},ExportSpecifier:function(ha,Ca,Na){Ca=ha.local;Na=[Ca.name];(ha=ha.exported)&&ha.name!==Ca.name&&Na.push(l()+"as"+l()+
M(ha));return Na},Literal:function(ha,Ca,Na){if(ha.hasOwnProperty("raw")&&La&&qa.raw)try{var yb=La(ha.raw).body[0].expression;if(yb.type===$c.Literal&&yb.value===ha.value)return ha.raw}catch(Ze){}if(ha.regex)return"/"+ha.regex.pattern+"/"+ha.regex.flags;if(null===ha.value)return"null";if("string"===typeof ha.value){ha=ha.value;Ca="";var gc=0,Ud=0,Td;Na=0;for(yb=ha.length;Na<yb;++Na){var cd=ha.charCodeAt(Na);if(39===cd)++gc;else if(34===cd)++Ud;else if(47===cd&&K)Ca+="\\";else if(oc.code.isLineTerminator(cd)||
92===cd){Ca+=m(cd);continue}else if(!oc.code.isIdentifierPartES5(cd)&&(K&&32>cd||!K&&!na&&(32>cd||126<cd))){Ca+=d(cd,ha.charCodeAt(Na+1));continue}Ca+=String.fromCharCode(cd)}var gf=(Td=!("double"===V||"auto"===V&&Ud<gc))?"'":'"';if(Td?gc:Ud){ha=Ca;Ca=gf;Na=0;for(yb=ha.length;Na<yb;++Na){cd=ha.charCodeAt(Na);if(39===cd&&Td||34===cd&&!Td)Ca+="\\";Ca+=String.fromCharCode(cd)}ha=Ca+gf}else ha=gf+Ca+gf;return ha}if("number"===typeof ha.value){ha=ha.value;if(ha!==ha)throw Error("Numeric literal whose value is NaN");
if(0>ha||0===ha&&0>1/ha)throw Error("Numeric literal whose value is negative");if(ha===1/0)ha=K?"null":Z?"1e400":"1e+400";else{Ca=""+ha;if(Z&&!(3>Ca.length)){Na=Ca.indexOf(".");K||48!==Ca.charCodeAt(0)||1!==Na||(Na=0,Ca=Ca.slice(1));yb=Ca;Ca=Ca.replace("e+","e");cd=0;0<(gc=yb.indexOf("e"))&&(cd=+yb.slice(gc+1),yb=yb.slice(0,gc));0<=Na&&(cd-=yb.length-Na-1,yb=+(yb.slice(0,Na)+yb.slice(Na+1))+"");for(gc=0;48===yb.charCodeAt(yb.length+gc-1);)--gc;0!==gc&&(cd-=gc,yb=yb.slice(0,gc));0!==cd&&(yb+="e"+cd);
(yb.length<Ca.length||U&&1E12<ha&&Math.floor(ha)===ha&&(yb="0x"+ha.toString(16)).length<Ca.length)&&+yb===ha&&(Ca=yb)}ha=Ca}return ha}if("boolean"===typeof ha.value)return ha.value?"true":"false";ha=ha.value;Ca=ha.toString();if(ha.source)if(Na=Ca.match(/\/([^/]*)$/)){Na=Na[1];Ca="";Td=Ud=!1;yb=0;for(cd=ha.source.length;yb<cd;++yb)gc=ha.source.charCodeAt(yb),Td?(Ca+=b(gc,Td),Td=!1):(Ud?93===gc&&(Ud=!1):47===gc?Ca+="\\":91===gc&&(Ud=!0),Ca+=b(gc,Td),Td=92===gc);ha="/"+Ca+"/"+Na}else ha=Ca;else ha=Ca;
return ha},GeneratorExpression:function(ha,Ca,Na){return this.ComprehensionExpression(ha,Ca,Na)},ComprehensionExpression:function(ha,Ca,Na){var yb,gc,Ud=this||rn;var Td=ha.type===$c.GeneratorExpression?["("]:["["];if(qa.moz.comprehensionExpressionStartsWithAssignment){var cd=this.generateExpression(ha.body,Vb.Assignment,7);Td.push(cd)}ha.blocks&&v(function(){yb=0;for(gc=ha.blocks.length;yb<gc;++yb)cd=Ud.generateExpression(ha.blocks[yb],Vb.Sequence,7),0<yb||qa.moz.comprehensionExpressionStartsWithAssignment?
Td=r(Td,cd):Td.push(cd)});ha.filter&&(Td=r(Td,"if"+ya),cd=this.generateExpression(ha.filter,Vb.Sequence,7),Td=r(Td,["(",cd,")"]));qa.moz.comprehensionExpressionStartsWithAssignment||(cd=this.generateExpression(ha.body,Vb.Assignment,7),Td=r(Td,cd));Td.push(ha.type===$c.GeneratorExpression?")":"]");return Td},ComprehensionBlock:function(ha,Ca,Na){Ca=ha.left.type===$c.VariableDeclaration?[ha.left.kind,l(),this.generateStatement(ha.left.declarations[0],0)]:this.generateExpression(ha.left,Vb.Call,7);Ca=
r(Ca,ha.of?"of":"in");Ca=r(Ca,this.generateExpression(ha.right,Vb.Sequence,7));return["for"+ya+"(",Ca,")"]},SpreadElement:function(ha,Ca,Na){return["...",this.generateExpression(ha.argument,Vb.Assignment,7)]},TaggedTemplateExpression:function(ha,Ca,Na){var yb=3;Na&2||(yb=1);ha=[this.generateExpression(ha.tag,Vb.Call,yb),this.generateExpression(ha.quasi,Vb.Primary,4)];return F(ha,Vb.TaggedTemplate,Ca)},TemplateElement:function(ha,Ca,Na){return ha.value.raw},TemplateLiteral:function(ha,Ca,Na){var yb;
Ca=["`"];Na=0;for(yb=ha.quasis.length;Na<yb;++Na)Ca.push(this.generateExpression(ha.quasis[Na],Vb.Primary,7)),Na+1<yb&&(Ca.push("${"+ya),Ca.push(this.generateExpression(ha.expressions[Na],Vb.Sequence,7)),Ca.push(ya+"}"));Ca.push("`");return Ca},ModuleSpecifier:function(ha,Ca,Na){return this.Literal(ha,Ca,Na)},ImportExpression:function(ha,Ca,Na){return F(["import(",this.generateExpression(ha.source,Vb.Assignment,7),")"],Vb.Call,Ca)}};k(I.prototype,I.Expression);I.prototype.generateExpression=function(ha,
Ca,Na){var yb=ha.type||$c.Property;if(qa.verbatim&&ha.hasOwnProperty(qa.verbatim))return yb=ha[qa.verbatim],"string"===typeof yb?Na=F(G(yb),Vb.Sequence,Ca):(Na=G(yb.content),yb=null!=yb.precedence?yb.precedence:Vb.Sequence,Na=F(Na,yb,Ca)),g(Na,ha);Ca=this[yb](ha,Ca,Na);qa.comment&&(Ca=A(ha,Ca));return g(Ca,ha)};I.prototype.generateStatement=function(ha,Ca){Ca=this[ha.type](ha,Ca);qa.comment&&(Ca=A(ha,Ca));var Na=g(Ca).toString();ha.type!==$c.Program||ka||""!==la||"\n"!==Na.charAt(Na.length-1)||(Ca=
Lb?g(Ca).replaceRight(/\s+$/,""):Na.replace(/\s+$/,""));return g(Ca,ha)};var be=c().format;Io.version="2.0.0";Io.generate=function(ha,Ca){var Na=c();null!=Ca?("string"===typeof Ca.indent&&(Na.format.indent.style=Ca.indent),"number"===typeof Ca.base&&(Na.format.indent.base=Ca.base),Ca=n(Na,Ca),Ea=Ca.format.indent.style,ra="string"===typeof Ca.base?Ca.base:h(Ea,Ca.format.indent.base)):(Ca=Na,Ea=Ca.format.indent.style,ra=h(Ea,Ca.format.indent.base));K=Ca.format.json;Z=Ca.format.renumber;U=K?!1:Ca.format.hexadecimal;
V=K?"double":Ca.format.quotes;na=Ca.format.escapeless;la=Ca.format.newline;ya=Ca.format.space;Ca.format.compact&&(la=ya=Ea=ra="");jb=Ca.format.parentheses;gb=Ca.format.semicolons;ka=Ca.format.safeConcatenation;ia=Ca.directive;La=K?null:Ca.parse;Lb=Ca.sourceMap;qc=Ca.sourceCode;dc=Ca.format.preserveBlankLines&&null!==qc;qa=Ca;Lb&&(aa=Io.browser?rn.sourceMap.SourceNode:Tl);Na=new I;if(I.Statement.hasOwnProperty(ha.type))ha=Na.generateStatement(ha,1);else if(I.Expression.hasOwnProperty(ha.type))ha=Na.generateExpression(ha,
Vb.Sequence,7);else throw Error("Unknown node type: "+ha.type);if(!Lb)return ha={code:ha.toString(),map:null},Ca.sourceMapWithCode?ha:ha.code;ha=ha.toStringWithSourceMap({file:Ca.file,sourceRoot:Ca.sourceMapRoot});Ca.sourceContent&&ha.map.setSourceContent(Ca.sourceMap,Ca.sourceContent);return Ca.sourceMapWithCode?ha:ha.map.toString()};Io.attachComments=sU.attachComments;Io.Precedence=n({},Vb);Io.browser=!1;Io.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};Io.FORMAT_DEFAULTS=be})();var nla=Object.freeze({__proto__:null,"default":Io,FORMAT_DEFAULTS:Io.FORMAT_DEFAULTS,FORMAT_MINIFY:Io.FORMAT_MINIFY,Precedence:Io.Precedence,attachComments:Io.attachComments,browser:Io.browser,generate:Io.generate,version:Io.version}),nq=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");nq.stringify=Dm;nq.obj=Ng;nq.escodegen=nla;nq.es=nq.escodegen.escodegen||nq.escodegen;var jE=nq.es;nq.escodegen=jE;nq.es=jE;nq.default=
Dm;var wU={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ola={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},pla=/^in(stanceof)?$/,xU="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
u8="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
hea=new RegExp("["+xU+"]"),iea=new RegExp("["+xU+u8+"]");xU=u8=null;var MY=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,
14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,
0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],jea=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,
13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,
9,787719,239],gk=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},Zr={beforeExpr:!0},Lq={startsExpr:!0},oJ={},Sa={num:new gk("num",Lq),regexp:new gk("regexp",Lq),string:new gk("string",Lq),name:new gk("name",Lq),eof:new gk("eof"),bracketL:new gk("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new gk("]"),braceL:new gk("{",{beforeExpr:!0,startsExpr:!0}),braceR:new gk("}"),parenL:new gk("(",{beforeExpr:!0,startsExpr:!0}),parenR:new gk(")"),comma:new gk(",",Zr),semi:new gk(";",Zr),colon:new gk(":",Zr),dot:new gk("."),question:new gk("?",Zr),questionDot:new gk("?."),arrow:new gk("=>",Zr),template:new gk("template"),invalidTemplate:new gk("invalidTemplate"),ellipsis:new gk("...",Zr),backQuote:new gk("`",Lq),dollarBraceL:new gk("${",{beforeExpr:!0,startsExpr:!0}),eq:new gk("=",{beforeExpr:!0,
isAssign:!0}),assign:new gk("_=",{beforeExpr:!0,isAssign:!0}),incDec:new gk("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new gk("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:vi("||",1),logicalAND:vi("&&",2),bitwiseOR:vi("|",3),bitwiseXOR:vi("^",4),bitwiseAND:vi("&",5),equality:vi("==/!=/===/!==",6),relational:vi("</>/<=/>=",7),bitShift:vi("<</>>/>>>",8),plusMin:new gk("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:vi("%",10),star:vi("*",10),slash:vi("/",10),starstar:new gk("**",
{beforeExpr:!0}),coalesce:vi("??",1),_break:Og("break"),_case:Og("case",Zr),_catch:Og("catch"),_continue:Og("continue"),_debugger:Og("debugger"),_default:Og("default",Zr),_do:Og("do",{isLoop:!0,beforeExpr:!0}),_else:Og("else",Zr),_finally:Og("finally"),_for:Og("for",{isLoop:!0}),_function:Og("function",Lq),_if:Og("if"),_return:Og("return",Zr),_switch:Og("switch"),_throw:Og("throw",Zr),_try:Og("try"),_var:Og("var"),_const:Og("const"),_while:Og("while",{isLoop:!0}),_with:Og("with"),_new:Og("new",{beforeExpr:!0,
startsExpr:!0}),_this:Og("this",Lq),_super:Og("super",Lq),_class:Og("class",Lq),_extends:Og("extends",Zr),_export:Og("export"),_import:Og("import",Lq),_null:Og("null",Lq),_true:Og("true",Lq),_false:Og("false",Lq),_in:Og("in",{beforeExpr:!0,binop:7}),_instanceof:Og("instanceof",{beforeExpr:!0,binop:7}),_typeof:Og("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Og("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Og("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},bq=/\r\n?|\n|\u2028|\u2029/,
Ox=new RegExp(bq.source,"g"),yU=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$r=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,v8=Object.prototype,pJ=v8.hasOwnProperty,qla=v8.toString,OY=Array.isArray||function(c){return"[object Array]"===qla.call(c)},AC=function(c,h){this.line=c;this.column=h};AC.prototype.offset=function(c){return new AC(this.line,this.column+c)};var Yz=function(c,h,e){this.start=h;this.end=e;null!==c.sourceFile&&(this.source=c.sourceFile)},FF={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},NY=!1,Zl=function(c,h,e){this.options=c=Dd(c);this.sourceFile=c.sourceFile;this.keywords=lk(ola[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var k="";!0!==c.allowReserved&&(k=wU[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(k+=" await"));this.reservedWords=lk(k);k=(k?k+" ":"")+wU.strict;this.reservedWordsStrict=lk(k);this.reservedWordsStrictBind=lk(k+" "+wU.strictBind);this.input=String(h);this.containsEsc=!1;e?(this.pos=e,this.lineStart=this.input.lastIndexOf("\n",e-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(bq).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Sa.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Vy={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Zl.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Vy.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Vy.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Vy.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Vy.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Vy.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Vy.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Vy.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Zl.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var e=0;e<c.length;e++)h=c[e](h);return h};Zl.parse=function(c,h){return(new this(h,
c)).parse()};Zl.parseExpressionAt=function(c,h,e){c=new this(e,c,h);c.nextToken();return c.parseExpression()};Zl.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(Zl.prototype,Vy);var np=Zl.prototype,rla=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;np.strictDirective=function(c){for(;;){$r.lastIndex=c;c+=$r.exec(this.input)[0].length;var h=rla.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){$r.lastIndex=c+h[0].length;c=$r.exec(this.input);h=c.index+c[0].length;
var e=this.input.charAt(h);return";"===e||"}"===e||bq.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(e)||"!"===e&&"="===this.input.charAt(h+1))}c+=h[0].length;$r.lastIndex=c;c+=$r.exec(this.input)[0].length;";"===this.input[c]&&c++}};np.eat=function(c){return this.type===c?(this.next(),!0):!1};np.isContextual=function(c){return this.type===Sa.name&&this.value===c&&!this.containsEsc};np.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};np.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};np.canInsertSemicolon=function(){return this.type===Sa.eof||this.type===Sa.braceR||bq.test(this.input.slice(this.lastTokEnd,this.start))};np.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};np.semicolon=function(){this.eat(Sa.semi)||this.insertSemicolon()||this.unexpected()};np.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};np.expect=function(c){this.eat(c)||this.unexpected()};np.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};np.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};np.checkExpressionErrors=function(c,h){if(!c)return!1;var e=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=e||0<=c;0<=e&&this.raise(e,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};np.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};np.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Yi=Zl.prototype;Yi.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==Sa.eof;){var e=this.parseStatement(null,!0,h);c.body.push(e)}if(this.inModule)for(h=0,e=Object.keys(this.undefinedExports);h<e.length;h+=1){var k=e[h];this.raiseRecoverable(this.undefinedExports[k].start,"Export '"+k+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var zU={kind:"loop"},sla={kind:"switch"};Yi.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;$r.lastIndex=this.pos;var h=$r.exec(this.input);h=this.pos+h[0].length;var e=this.input.charCodeAt(h);if(91===e)return!0;if(c)return!1;if(123===e)return!0;if(Zn(e,!0)){for(c=h+1;lu(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!pla.test(c))return!0}return!1};Yi.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
$r.lastIndex=this.pos;var c=$r.exec(this.input);c=this.pos+c[0].length;return!bq.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!lu(this.input.charAt(c+8)))};Yi.parseStatement=function(c,h,e){var k=this.type,n=this.startNode();if(this.isLet(c)){k=Sa._var;var b="let"}switch(k){case Sa._break:case Sa._continue:return this.parseBreakContinueStatement(n,k.keyword);case Sa._debugger:return this.parseDebuggerStatement(n);case Sa._do:return this.parseDoStatement(n);
case Sa._for:return this.parseForStatement(n);case Sa._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Sa._class:return c&&this.unexpected(),this.parseClass(n,!0);case Sa._if:return this.parseIfStatement(n);case Sa._return:return this.parseReturnStatement(n);case Sa._switch:return this.parseSwitchStatement(n);case Sa._throw:return this.parseThrowStatement(n);case Sa._try:return this.parseTryStatement(n);
case Sa._const:case Sa._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Sa._while:return this.parseWhileStatement(n);case Sa._with:return this.parseWithStatement(n);case Sa.braceL:return this.parseBlock(!0,n);case Sa.semi:return this.parseEmptyStatement(n);case Sa._export:case Sa._import:if(10<this.options.ecmaVersion&&k===Sa._import&&($r.lastIndex=this.pos,c=$r.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return k===Sa._import?this.parseImport(n):this.parseExport(n,e);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;e=this.parseExpression();return k===Sa.name&&"Identifier"===
e.type&&this.eat(Sa.colon)?this.parseLabeledStatement(n,h,e,c):this.parseExpressionStatement(n,e)}};Yi.parseBreakContinueStatement=function(c,h){var e="break"===h;this.next();this.eat(Sa.semi)||this.insertSemicolon()?c.label=null:this.type!==Sa.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var k=0;k<this.labels.length;++k){var n=this.labels[k];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(e||"loop"===n.kind))break;if(c.label&&e)break}}k===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,e?"BreakStatement":"ContinueStatement")};Yi.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Yi.parseDoStatement=function(c){this.next();this.labels.push(zU);c.body=this.parseStatement("do");this.labels.pop();this.expect(Sa._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Sa.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Yi.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(zU);this.enterScope(0);this.expect(Sa.parenL);if(this.type===Sa.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var e=this.isLet();if(this.type===Sa._var||this.type===Sa._const||e){var k=this.startNode();e=e?"let":this.value;this.next();this.parseVar(k,!0,e);this.finishNode(k,"VariableDeclaration");
if((this.type===Sa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===k.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Sa._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,k);-1<h&&this.unexpected(h);return this.parseFor(c,k)}k=new oq;e=this.parseExpression(!0,k);if(this.type===Sa._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Sa._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(e,
!1,k),this.checkLValPattern(e),this.parseForIn(c,e);this.checkExpressionErrors(k,!0);-1<h&&this.unexpected(h);return this.parseFor(c,e)};Yi.parseFunctionStatement=function(c,h,e){this.next();return this.parseFunction(c,hH|(e?0:AU),!1,h)};Yi.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Sa._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Yi.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Sa.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Yi.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Sa.braceL);this.labels.push(sla);this.enterScope(0);for(var h,e=!1;this.type!==Sa.braceR;)if(this.type===Sa._case||this.type===
Sa._default){var k=this.type===Sa._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();k?h.test=this.parseExpression():(e&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),e=!0,h.test=null);this.expect(Sa.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Yi.parseThrowStatement=
function(c){this.next();bq.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var tla=[];Yi.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Sa._catch){var h=this.startNode();this.next();if(this.eat(Sa.parenL)){h.param=this.parseBindingAtom();var e="Identifier"===h.param.type;this.enterScope(e?32:
0);this.checkLValPattern(h.param,e?4:2);this.expect(Sa.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Sa._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Yi.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Yi.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(zU);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Yi.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Yi.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Yi.parseLabeledStatement=function(c,h,e,k){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===h&&this.raise(e.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Sa._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var d=this.labels[b];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(k?-1===k.indexOf("label")?k+"label":k:"label");
this.labels.pop();c.label=e;return this.finishNode(c,"LabeledStatement")};Yi.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Yi.parseBlock=function(c,h,e){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Sa.braceL);for(c&&this.enterScope(0);this.type!==Sa.braceR;){var k=this.parseStatement(null);h.body.push(k)}e&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
Yi.parseFor=function(c,h){c.init=h;this.expect(Sa.semi);c.test=this.type===Sa.semi?null:this.parseExpression();this.expect(Sa.semi);c.update=this.type===Sa.parenR?null:this.parseExpression();this.expect(Sa.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Yi.parseForIn=function(c,h){var e=this.type===Sa._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!e||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(e?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=e?this.parseExpression():this.parseMaybeAssign();this.expect(Sa.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,e?"ForInStatement":"ForOfStatement")};Yi.parseVar=function(c,h,e){c.declarations=[];for(c.kind=e;;){var k=this.startNode();this.parseVarId(k,e);this.eat(Sa.eq)?k.init=this.parseMaybeAssign(h):
"const"!==e||this.type===Sa._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===k.id.type||h&&(this.type===Sa._in||this.isContextual("of"))?k.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(k,"VariableDeclarator"));if(!this.eat(Sa.comma))break}return c};Yi.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var hH=1,AU=2;Yi.parseFunction=
function(c,h,e,k){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!k)this.type===Sa.star&&h&AU&&this.unexpected(),c.generator=this.eat(Sa.star);8<=this.options.ecmaVersion&&(c.async=!!k);h&hH&&(c.id=h&4&&this.type!==Sa.name?null:this.parseIdent(),!c.id||h&AU||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));k=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&hH||(c.id=this.type===Sa.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,e,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,h&hH?"FunctionDeclaration":"FunctionExpression")};Yi.parseFunctionParams=function(c){this.expect(Sa.parenL);c.params=this.parseBindingList(Sa.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Yi.parseClass=function(c,h){this.next();var e=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var k=this.startNode(),n=!1;k.body=[];for(this.expect(Sa.braceL);this.type!==Sa.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(k.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=e;this.next();c.body=this.finishNode(k,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Yi.parseClassElement=function(c){var h=
this;if(this.eat(Sa.semi))return null;var e=this.startNode(),k=function(m,a){void 0===a&&(a=!1);var g=h.start,l=h.startLoc;if(!h.eatContextual(m))return!1;if(!(h.type===Sa.parenL||a&&h.canInsertSemicolon()))return!0;e.key&&h.unexpected();e.computed=!1;e.key=h.startNodeAt(g,l);e.key.name=m;h.finishNode(e.key,"Identifier");return!1};e.kind="method";e.static=k("static");var n=this.eat(Sa.star),b=!1;n||(8<=this.options.ecmaVersion&&k("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Sa.star)):
k("get")?e.kind="get":k("set")&&(e.kind="set"));e.key||this.parsePropertyName(e);k=e.key;var d=!1;e.computed||e.static||!("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)?e.static&&"Identifier"===k.type&&"prototype"===k.name&&this.raise(k.start,"Classes may not have a static property named prototype"):("method"!==e.kind&&this.raise(k.start,"Constructor can't have get/set modifier"),n&&this.raise(k.start,"Constructor can't be a generator"),b&&this.raise(k.start,
"Constructor can't be an async method"),e.kind="constructor",d=c);this.parseClassMethod(e,n,b,d);"get"===e.kind&&0!==e.value.params.length&&this.raiseRecoverable(e.value.start,"getter should have no params");"set"===e.kind&&1!==e.value.params.length&&this.raiseRecoverable(e.value.start,"setter should have exactly one param");"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params");return e};Yi.parseClassMethod=function(c,
h,e,k){c.value=this.parseMethod(h,e,k);return this.finishNode(c,"MethodDefinition")};Yi.parseClassId=function(c,h){this.type===Sa.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Yi.parseClassSuper=function(c){c.superClass=this.eat(Sa._extends)?this.parseExprSubscripts():null};Yi.parseExport=function(c,h){this.next();if(this.eat(Sa.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Sa.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Sa._default)){this.checkExport(h,"default",this.lastTokStart);var e;this.type===Sa._function||(e=this.isAsyncFunction())?(h=this.startNode(),this.next(),e&&this.next(),c.declaration=this.parseFunction(h,hH|4,!1,e)):this.type===Sa._class?(e=this.startNode(),c.declaration=this.parseClass(e,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
Sa.string&&this.unexpected(),c.source=this.parseExprAtom();else{e=0;for(h=c.specifiers;e<h.length;e+=1){var k=h[e];this.checkUnreserved(k.local);this.checkLocalExport(k.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Yi.checkExport=function(c,h,e){c&&(pJ.call(c,h)&&this.raiseRecoverable(e,"Duplicate export '"+h+"'"),c[h]=!0)};Yi.checkPatternExport=function(c,h){var e=h.type;if("Identifier"===e)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===e)for(e=
0,h=h.properties;e<h.length;e+=1)this.checkPatternExport(c,h[e]);else if("ArrayPattern"===e)for(e=0,h=h.elements;e<h.length;e+=1){var k=h[e];k&&this.checkPatternExport(c,k)}else"Property"===e?this.checkPatternExport(c,h.value):"AssignmentPattern"===e?this.checkPatternExport(c,h.left):"RestElement"===e?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===e&&this.checkPatternExport(c,h.expression)};Yi.checkVariableExport=function(c,h){if(c)for(var e=0;e<h.length;e+=1)this.checkPatternExport(c,
h[e].id)};Yi.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Yi.parseExportSpecifiers=function(c){var h=[],e=!0;for(this.expect(Sa.braceL);!this.eat(Sa.braceR);){if(e)e=!1;else if(this.expect(Sa.comma),this.afterTrailingComma(Sa.braceR))break;var k=this.startNode();k.local=this.parseIdent(!0);k.exported=this.eatContextual("as")?this.parseIdent(!0):
k.local;this.checkExport(c,k.exported.name,k.exported.start);h.push(this.finishNode(k,"ExportSpecifier"))}return h};Yi.parseImport=function(c){this.next();this.type===Sa.string?(c.specifiers=tla,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Sa.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Yi.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Sa.name){var e=
this.startNode();e.local=this.parseIdent();this.checkLValSimple(e.local,2);c.push(this.finishNode(e,"ImportDefaultSpecifier"));if(!this.eat(Sa.comma))return c}if(this.type===Sa.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Sa.braceL);!this.eat(Sa.braceR);){if(h)h=!1;else if(this.expect(Sa.comma),this.afterTrailingComma(Sa.braceR))break;e=this.startNode();
e.imported=this.parseIdent(!0);this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported);this.checkLValSimple(e.local,2);c.push(this.finishNode(e,"ImportSpecifier"))}return c};Yi.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Yi.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var nt=Zl.prototype;nt.toAssignable=function(c,h,e){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";e&&this.checkPatternErrors(e,!0);e=0;for(var k=c.properties;e<k.length;e+=
1){var n=k[e];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";e&&this.checkPatternErrors(e,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,e);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else e&&this.checkPatternErrors(e,!0);return c};nt.toAssignableList=function(c,h){for(var e=c.length,k=0;k<e;k++){var n=c[k];n&&this.toAssignable(n,h)}e&&(e=c[e-1],6===this.options.ecmaVersion&&h&&e&&"RestElement"===e.type&&"Identifier"!==e.argument.type&&this.unexpected(e.argument.start));return c};nt.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};nt.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Sa.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};nt.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Sa.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Sa.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Sa.braceL:return this.parseObj(!0)}return this.parseIdent()};
nt.parseBindingList=function(c,h,e){for(var k=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Sa.comma),h&&this.type===Sa.comma)k.push(null);else if(e&&this.afterTrailingComma(c))break;else if(this.type===Sa.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);k.push(h);this.type===Sa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);k.push(b)}return k};
nt.parseBindingListItem=function(c){return c};nt.parseMaybeDefault=function(c,h,e){e=e||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Sa.eq))return e;c=this.startNodeAt(c,h);c.left=e;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};nt.checkLValSimple=function(c,h,e){void 0===h&&(h=0);var k=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(k?"Binding ":"Assigning to ")+c.name+
" in strict mode");k&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),e&&(pJ.call(e,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),e[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":k&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return k&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,e);default:this.raise(c.start,(k?"Binding":"Assigning to")+" rvalue")}};nt.checkLValPattern=function(c,h,e){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var k=0;for(c=c.properties;k<c.length;k+=1)this.checkLValInnerPattern(c[k],h,e);break;case "ArrayPattern":k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&this.checkLValInnerPattern(n,h,e)}break;default:this.checkLValSimple(c,h,e)}};nt.checkLValInnerPattern=
function(c,h,e){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,e);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,e);break;case "RestElement":this.checkLValPattern(c.argument,h,e);break;default:this.checkLValPattern(c,h,e)}};var oj=Zl.prototype;oj.checkPropClash=function(c,h,e){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var k=c.key;switch(k.type){case "Identifier":var n=
k.name;break;case "Literal":n=String(k.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(e?0>e.doubleProto&&(e.doubleProto=k.start):this.raiseRecoverable(k.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(e=h[n])?("init"===c?this.strict&&e.init||e.get||e.set:e.init||e[c])&&this.raiseRecoverable(k.start,"Redefinition of property"):e=h[n]={init:!1,get:!1,set:!1},e[c]=!0)}};oj.parseExpression=function(c,h){var e=this.start,k=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Sa.comma){e=this.startNodeAt(e,k);for(e.expressions=[n];this.eat(Sa.comma);)e.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(e,"SequenceExpression")}return n};oj.parseMaybeAssign=function(c,h,e){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var k=!1,n=-1,b=-1;h?(n=h.parenthesizedAssign,b=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new oq,k=!0);var d=this.start,m=this.startLoc;
if(this.type===Sa.parenL||this.type===Sa.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,h);e&&(a=e.call(this,a,d,m));if(this.type.isAssign)return e=this.startNodeAt(d,m),e.operator=this.value,this.type===Sa.eq&&(a=this.toAssignable(a,!1,h)),k||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=a.start&&(h.shorthandAssign=-1),this.type===Sa.eq?this.checkLValPattern(a):this.checkLValSimple(a),e.left=a,this.next(),e.right=this.parseMaybeAssign(c),this.finishNode(e,
"AssignmentExpression");k&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<b&&(h.trailingComma=b);return a};oj.parseMaybeConditional=function(c,h){var e=this.start,k=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Sa.question)?(h=this.startNodeAt(e,k),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Sa.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};oj.parseExprOps=function(c,h){var e=this.start,
k=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===e&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,e,k,-1,c)};oj.parseExprOp=function(c,h,e,k,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Sa._in)&&b>k){var d=this.type===Sa.logicalOR||this.type===Sa.logicalAND,m=this.type===Sa.coalesce;m&&(b=Sa.logicalAND.binop);var a=this.value;this.next();var g=this.start,l=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),g,l,b,n);c=this.buildBinary(h,
e,c,b,a,d||m);(d&&this.type===Sa.coalesce||m&&(this.type===Sa.logicalOR||this.type===Sa.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,e,k,n)}return c};oj.buildBinary=function(c,h,e,k,n,b){c=this.startNodeAt(c,h);c.left=e;c.operator=n;c.right=k;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};oj.parseMaybeUnary=function(c,h){var e=this.start,k=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Sa.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(e,k),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Sa.starstar)?this.buildBinary(e,k,n,this.parseMaybeUnary(null,!1),"**",!1):n};oj.parseExprSubscripts=function(c){var h=this.start,e=this.startLoc,k=this.parseExprAtom(c);if("ArrowFunctionExpression"===
k.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return k;h=this.parseSubscripts(k,h,e);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};oj.parseSubscripts=function(c,h,e,k){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var d=this.parseSubscript(c,
h,e,k,n,b);d.optional&&(b=!0);if(d===c||"ArrowFunctionExpression"===d.type)return b&&(c=this.startNodeAt(h,e),c.expression=d,d=this.finishNode(c,"ChainExpression")),d;c=d}};oj.parseSubscript=function(c,h,e,k,n,b){var d=11<=this.options.ecmaVersion,m=d&&this.eat(Sa.questionDot);k&&m&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Sa.bracketL);if(a||m&&this.type!==Sa.parenL&&this.type!==Sa.backQuote||this.eat(Sa.dot))h=this.startNodeAt(h,
e),h.object=c,h.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!a,a&&this.expect(Sa.bracketR),d&&(h.optional=m),c=this.finishNode(h,"MemberExpression");else if(!k&&this.eat(Sa.parenL)){k=new oq;b=this.yieldPos;var g=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Sa.parenR,8<=this.options.ecmaVersion,!1,k);if(n&&!m&&!this.canInsertSemicolon()&&this.eat(Sa.arrow))return this.checkPatternErrors(k,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=g,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,e),a,!0);this.checkExpressionErrors(k,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=g||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,e);h.callee=c;h.arguments=a;d&&(h.optional=m);c=this.finishNode(h,"CallExpression")}else this.type===
Sa.backQuote&&((m||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,e),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};oj.parseExprAtom=function(c){this.type===Sa.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Sa._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Sa.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Sa.dot&&this.type!==Sa.bracketL&&this.type!==Sa.parenL&&this.unexpected(),this.finishNode(h,"Super");case Sa._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Sa.name:c=this.start;var e=this.startLoc,k=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!k&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Sa._function))return this.parseFunction(this.startNodeAt(c,
e),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Sa.arrow))return this.parseArrowExpression(this.startNodeAt(c,e),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Sa.name&&!k)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Sa.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,e),[n],!0)}return n;case Sa.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Sa.num:case Sa.string:return this.parseLiteral(this.value);
case Sa._null:case Sa._true:case Sa._false:return h=this.startNode(),h.value=this.type===Sa._null?null:this.type===Sa._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Sa.parenL:return e=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=e),0>c.parenthesizedBind&&(c.parenthesizedBind=e)),h;case Sa.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Sa.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Sa.braceL:return this.parseObj(!1,c);case Sa._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Sa._class:return this.parseClass(this.startNode(),!1);case Sa._new:return this.parseNew();case Sa.backQuote:return this.parseTemplate();case Sa._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};oj.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Sa.parenL:return this.parseDynamicImport(c);case Sa.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};oj.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Sa.parenR)){var h=this.start;this.eat(Sa.comma)&&this.eat(Sa.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};oj.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};oj.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};oj.parseParenExpression=function(){this.expect(Sa.parenL);var c=this.parseExpression();this.expect(Sa.parenR);return c};oj.parseParenAndDistinguishExpression=function(c){var h=this.start,e=this.startLoc,k=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,d=[],m=!0,a=!1,g=new oq,l=this.yieldPos,r=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Sa.parenR;)if(m?m=!1:this.expect(Sa.comma),k&&this.afterTrailingComma(Sa.parenR,!0)){a=!0;break}else if(this.type===Sa.ellipsis){var v=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Sa.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,g,this.parseParenItem));k=this.start;m=this.startLoc;
this.expect(Sa.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Sa.arrow))return this.checkPatternErrors(g,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=r,this.parseParenArrowList(h,e,d);d.length&&!a||this.unexpected(this.lastTokStart);v&&this.unexpected(v);this.checkExpressionErrors(g,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=r||this.awaitPos;1<d.length?(c=this.startNodeAt(n,b),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",k,m)):c=d[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,e),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};oj.parseParenItem=function(c){return c};oj.parseParenArrowList=function(c,h,e){return this.parseArrowExpression(this.startNodeAt(c,h),e)};var ula=[];oj.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Sa.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var e=this.startLoc,k=this.type===Sa._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,e,!0);k&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Sa.parenL)?c.arguments=this.parseExprList(Sa.parenR,8<=this.options.ecmaVersion,!1):c.arguments=ula;return this.finishNode(c,"NewExpression")};oj.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Sa.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===Sa.backQuote;return this.finishNode(h,"TemplateElement")};oj.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var e=this.parseTemplateElement({isTagged:c});for(h.quasis=[e];!e.tail;)this.type===Sa.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Sa.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Sa.braceR),h.quasis.push(e=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};oj.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Sa.name||this.type===Sa.num||this.type===Sa.string||this.type===Sa.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Sa.star)&&!bq.test(this.input.slice(this.lastTokEnd,this.start))};oj.parseObj=function(c,h){var e=this.startNode(),k=!0,n={};e.properties=[];for(this.next();!this.eat(Sa.braceR);){if(k)k=
!1;else if(this.expect(Sa.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Sa.braceR))break;var b=this.parseProperty(c,h);c||this.checkPropClash(b,n,h);e.properties.push(b)}return this.finishNode(e,c?"ObjectPattern":"ObjectExpression")};oj.parseProperty=function(c,h){var e=this.startNode(),k;if(9<=this.options.ecmaVersion&&this.eat(Sa.ellipsis)){if(c)return e.argument=this.parseIdent(!1),this.type===Sa.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(e,
"RestElement");this.type===Sa.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));e.argument=this.parseMaybeAssign(!1,h);this.type===Sa.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(e,"SpreadElement")}if(6<=this.options.ecmaVersion){e.method=!1;e.shorthand=!1;if(c||h){var n=this.start;var b=this.startLoc}c||(k=this.eat(Sa.star))}var d=this.containsEsc;this.parsePropertyName(e);if(!c&&!d&&
8<=this.options.ecmaVersion&&!k&&this.isAsyncProp(e)){var m=!0;k=9<=this.options.ecmaVersion&&this.eat(Sa.star);this.parsePropertyName(e,h)}else m=!1;this.parsePropertyValue(e,c,k,m,n,b,h,d);return this.finishNode(e,"Property")};oj.parsePropertyValue=function(c,h,e,k,n,b,d,m){(e||k)&&this.type===Sa.colon&&this.unexpected();this.eat(Sa.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Sa.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(e,k)):h||m||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Sa.comma||this.type===Sa.braceR||this.type===Sa.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((e||k)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Sa.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((e||k)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};oj.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Sa.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Sa.bracketR),c.key;c.computed=!1}return c.key=this.type===Sa.num||this.type===Sa.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};oj.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};oj.parseMethod=function(c,h,e){var k=this.startNode(),n=this.yieldPos,b=this.awaitPos,d=this.awaitIdentPos;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=c);8<=this.options.ecmaVersion&&(k.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(k.generator?8:0)|64|(e?128:0));this.expect(Sa.parenL);k.params=this.parseBindingList(Sa.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(k,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=d;return this.finishNode(k,"FunctionExpression")};oj.parseArrowExpression=function(c,h,e){var k=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((e?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!e);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};oj.parseFunctionBody=function(c,h,e){var k=this.strict,n=!1;if(h&&this.type!==Sa.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!k||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!k&&!n&&!h&&!e&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!k);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};oj.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};oj.checkParams=function(c,h){var e={},k=0;for(c=c.params;k<c.length;k+=1)this.checkLValInnerPattern(c[k],1,h?null:e)};oj.parseExprList=function(c,h,e,k){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Sa.comma),
h&&this.afterTrailingComma(c))break;if(e&&this.type===Sa.comma)var d=null;else this.type===Sa.ellipsis?(d=this.parseSpread(k),k&&this.type===Sa.comma&&0>k.trailingComma&&(k.trailingComma=this.start)):d=this.parseMaybeAssign(!1,k);n.push(d)}return n};oj.checkUnreserved=function(c){var h=c.start,e=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,e).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};oj.parseIdent=function(c,h){h=this.startNode();this.type===Sa.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};oj.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Sa.semi||this.canInsertSemicolon()||this.type!==Sa.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Sa.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};oj.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!1);return this.finishNode(c,"AwaitExpression")};var jM=Zl.prototype;jM.raise=function(c,h){var e=mu(this.input,c);h+=" ("+e.line+":"+e.column+")";h=new SyntaxError(h);h.pos=c;h.loc=e;h.raisedAt=this.pos;throw h;};jM.raiseRecoverable=
jM.raise;jM.curPosition=function(){if(this.options.locations)return new AC(this.curLine,this.pos-this.lineStart)};var Wy=Zl.prototype,vla=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Wy.enterScope=function(c){this.scopeStack.push(new vla(c))};Wy.exitScope=function(){this.scopeStack.pop()};Wy.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Wy.declareName=function(c,h,e){var k=!1;if(2===h)h=this.currentScope(),k=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),k=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){k=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}k&&this.raiseRecoverable(e,"Identifier '"+c+"' has already been declared")};Wy.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Wy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Wy.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};Wy.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var Xy=function(c,h,e){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new Yz(c,e));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},iH=Zl.prototype;iH.startNode=function(){return new Xy(this,this.start,this.startLoc)};iH.startNodeAt=function(c,h){return new Xy(this,
c,h)};iH.finishNode=function(c,h){return Px.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};iH.finishNodeAt=function(c,h,e,k){return Px.call(this,c,h,e,k)};iH.copyNode=function(c){var h=new Xy(this,c.start,this.startLoc),e;for(e in c)h[e]=c[e];return h};var as=function(c,h,e,k,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!e;this.override=k;this.generator=!!n},$l={b_stat:new as("{",!1),b_expr:new as("{",!0),b_tmpl:new as("${",!1),p_stat:new as("(",!1),p_expr:new as("(",!0),q_tmpl:new as("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new as("function",!1),f_expr:new as("function",!0),f_expr_gen:new as("function",!0,!1,null,!0),f_gen:new as("function",!1,!1,null,!0)},kM=Zl.prototype;kM.initialContext=function(){return[$l.b_stat]};kM.braceIsBlock=function(c){var h=this.curContext();return h===$l.f_expr||h===$l.f_stat?!0:c!==Sa.colon||h!==$l.b_stat&&h!==$l.b_expr?c===Sa._return||c===Sa.name&&this.exprAllowed?bq.test(this.input.slice(this.lastTokEnd,this.start)):c===Sa._else||
c===Sa.semi||c===Sa.eof||c===Sa.parenR||c===Sa.arrow?!0:c===Sa.braceL?h===$l.b_stat:c===Sa._var||c===Sa._const||c===Sa.name?!1:!this.exprAllowed:!h.isExpr};kM.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};kM.updateContext=function(c){var h,e=this.type;e.keyword&&c===Sa.dot?this.exprAllowed=!1:(h=e.updateContext)?h.call(this,c):this.exprAllowed=e.beforeExpr};Sa.parenR.updateContext=Sa.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===$l.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Sa.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?$l.b_stat:$l.b_expr);this.exprAllowed=!0};Sa.dollarBraceL.updateContext=function(){this.context.push($l.b_tmpl);this.exprAllowed=!0};Sa.parenL.updateContext=function(c){this.context.push(c===Sa._if||c===Sa._for||c===Sa._with||c===Sa._while?
$l.p_stat:$l.p_expr);this.exprAllowed=!0};Sa.incDec.updateContext=function(){};Sa._function.updateContext=Sa._class.updateContext=function(c){!c.beforeExpr||c===Sa._else||c===Sa.semi&&this.curContext()!==$l.p_stat||c===Sa._return&&bq.test(this.input.slice(this.lastTokEnd,this.start))||(c===Sa.colon||c===Sa.braceL)&&this.curContext()===$l.b_stat?this.context.push($l.f_stat):this.context.push($l.f_expr);this.exprAllowed=!1};Sa.backQuote.updateContext=function(){this.curContext()===$l.q_tmpl?this.context.pop():
this.context.push($l.q_tmpl);this.exprAllowed=!1};Sa.star.updateContext=function(c){c===Sa._function&&(c=this.context.length-1,this.context[c]=this.context[c]===$l.f_expr?$l.f_expr_gen:$l.f_gen);this.exprAllowed=!0};Sa.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Sa.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var kea={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
lea={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
PY={};qr(9);qr(10);qr(11);qr(12);var zh=Zl.prototype,Zw=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=PY[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Zw.prototype.reset=function(c,h,e){var k=-1!==e.indexOf("u");this.start=c|0;this.source=h+"";this.flags=e;this.switchU=k&&6<=this.parser.options.ecmaVersion;this.switchN=k&&9<=this.parser.options.ecmaVersion};Zw.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Zw.prototype.at=function(c,h){void 0===h&&(h=!1);var e=this.source,k=e.length;if(c>=k)return-1;var n=e.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=k)return n;
c=e.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Zw.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var e=this.source,k=e.length;if(c>=k)return k;var n=e.charCodeAt(c),b;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=k||56320>(b=e.charCodeAt(c+1))||57343<b?c+1:c+2};Zw.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Zw.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Zw.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Zw.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};zh.validateRegExpFlags=function(c){for(var h=c.validFlags,e=c.flags,k=0;k<e.length;k++){var n=e.charAt(k);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<e.indexOf(n,k+1)&&this.raise(c.start,"Duplicate regular expression flag")}};zh.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};zh.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,e=c.backReferenceNames;h<
e.length;h+=1)-1===c.groupNames.indexOf(e[h])&&c.raise("Invalid named capture referenced")};zh.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};zh.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};zh.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};zh.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var e=!1;9<=this.options.ecmaVersion&&(e=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!e,!0}c.pos=h;return!1};zh.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};zh.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};zh.regexp_eatBracedQuantifier=function(c,h){var e=c.pos;if(c.eat(123)){var k=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(k=c.lastIntValue);if(c.eat(125))return-1!==k&&k<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=e}return!1};zh.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};zh.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};zh.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};zh.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};zh.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};zh.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};zh.regexp_eatSyntaxCharacter=function(c){var h=c.current();return rr(h)?(c.lastIntValue=h,c.advance(),!0):!1};zh.regexp_eatPatternCharacters=function(c){for(var h=c.pos,e=0;-1!==(e=c.current())&&
!rr(e);)c.advance();return c.pos!==h};zh.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};zh.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};zh.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};zh.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=nu(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=nu(c.lastIntValue);return!0}return!1};zh.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,e=11<=this.options.ecmaVersion,k=c.current(e);c.advance(e);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,e)&&(k=c.lastIntValue);
e=k;if(Zn(e,!0)||36===e||95===e)return c.lastIntValue=k,!0;c.pos=h;return!1};zh.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,e=11<=this.options.ecmaVersion,k=c.current(e);c.advance(e);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,e)&&(k=c.lastIntValue);e=k;if(lu(e,!0)||36===e||95===e||8204===e||8205===e)return c.lastIntValue=k,!0;c.pos=h;return!1};zh.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};zh.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var e=c.lastIntValue;if(c.switchU)return e>c.maxBackReference&&(c.maxBackReference=e),!0;if(e<=c.numCapturingParens)return!0;c.pos=h}return!1};zh.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};zh.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};zh.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};zh.regexp_eatZero=
function(c){return 48!==c.current()||Qx(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};zh.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};zh.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};zh.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var e=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){e=c.lastIntValue;if(h&&55296<=e&&56319>=e){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var k=c.lastIntValue;if(56320<=k&&57343>=k)return c.lastIntValue=1024*(e-55296)+(k-56320)+65536,!0}c.pos=h;c.lastIntValue=e}return!0}if(k=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))k=c.lastIntValue,k=0<=k&&1114111>=k;
if(k)return!0;h&&c.raise("Invalid unicode escape");c.pos=e}return!1};zh.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};zh.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};zh.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};zh.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var e=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
e,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};zh.regexp_validateUnicodePropertyNameAndValue=function(c,h,e){pJ.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(e)||c.raise("Invalid property value")};zh.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
zh.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";Es(h=c.current());)c.lastStringValue+=nu(h),c.advance();return""!==c.lastStringValue};zh.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";BC(h=c.current());)c.lastStringValue+=nu(h),c.advance();return""!==c.lastStringValue};zh.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};zh.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};zh.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var e=c.lastIntValue;!c.switchU||-1!==h&&-1!==e||c.raise("Invalid character class");-1!==h&&-1!==e&&h>e&&c.raise("Range out of order in character class")}}};zh.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var e=c.current();(99===
e||48<=e&&55>=e)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};zh.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};zh.regexp_eatClassControlLetter=function(c){var h=
c.current();return Qx(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};zh.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};zh.regexp_eatDecimalDigits=function(c){var h=c.pos,e;for(c.lastIntValue=0;Qx(e=c.current());)c.lastIntValue=10*c.lastIntValue+(e-48),c.advance();return c.pos!==h};zh.regexp_eatHexDigits=function(c){var h=c.pos,e;for(c.lastIntValue=0;CC(e=c.current());)c.lastIntValue=
16*c.lastIntValue+Zz(e),c.advance();return c.pos!==h};zh.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var e=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*e+c.lastIntValue:c.lastIntValue=8*h+e}else c.lastIntValue=h;return!0}return!1};zh.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};zh.regexp_eatFixedHexDigits=
function(c,h){for(var e=c.pos,k=c.lastIntValue=0;k<h;++k){var n=c.current();if(!CC(n))return c.pos=e,!1;c.lastIntValue=16*c.lastIntValue+Zz(n);c.advance()}return!0};var jH=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Yz(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Kj=Zl.prototype;Kj.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new jH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Kj.getToken=function(){this.next();return new jH(this)};"undefined"!==typeof Symbol&&(Kj[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Sa.eof,value:h}}}});Kj.curContext=function(){return this.context[this.context.length-1]};Kj.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Sa.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Kj.readToken=function(c){return Zn(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Kj.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};Kj.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,e=this.input.indexOf("*/",this.pos+=2);-1===e&&this.raise(this.pos-2,"Unterminated comment");this.pos=e+2;if(this.options.locations){Ox.lastIndex=h;for(var k;(k=Ox.exec(this.input))&&k.index<this.pos;)++this.curLine,this.lineStart=k.index+k[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,e),h,this.pos,c,this.curPosition())};
Kj.skipLineComment=function(c){for(var h=this.pos,e=this.options.onComment&&this.curPosition(),k=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!$n(k);)k=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,e,this.curPosition())};Kj.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&yU.test(String.fromCharCode(c)))++this.pos;else break a}}};Kj.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var e=this.type;this.type=c;this.value=
h;this.updateContext(e)};Kj.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Sa.ellipsis);++this.pos;return this.finishToken(Sa.dot)};Kj.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Sa.assign,2):this.finishOp(Sa.slash,1)};
Kj.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),e=1,k=42===c?Sa.star:Sa.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++e,k=Sa.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Sa.assign,e+1):this.finishOp(k,e)};Kj.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Sa.assign,3):this.finishOp(124===c?Sa.logicalOR:Sa.logicalAND,
2):61===h?this.finishOp(Sa.assign,2):this.finishOp(124===c?Sa.bitwiseOR:Sa.bitwiseAND,1)};Kj.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Sa.assign,2):this.finishOp(Sa.bitwiseXOR,1)};Kj.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!bq.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Sa.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Sa.assign,2):this.finishOp(Sa.plusMin,1)};Kj.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),e=1;if(h===c)return e=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+e)?this.finishOp(Sa.assign,e+1):this.finishOp(Sa.bitShift,e);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(e=2);return this.finishOp(Sa.relational,e)};Kj.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Sa.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Sa.arrow)):this.finishOp(61===c?Sa.eq:Sa.prefix,1)};Kj.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var e=this.input.charCodeAt(this.pos+
2);if(48>e||57<e)return this.finishOp(Sa.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Sa.assign,3):this.finishOp(Sa.coalesce,2)}return this.finishOp(Sa.question,1)};Kj.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Sa.parenL);case 41:return++this.pos,this.finishToken(Sa.parenR);case 59:return++this.pos,this.finishToken(Sa.semi);case 44:return++this.pos,this.finishToken(Sa.comma);case 91:return++this.pos,
this.finishToken(Sa.bracketL);case 93:return++this.pos,this.finishToken(Sa.bracketR);case 123:return++this.pos,this.finishToken(Sa.braceL);case 125:return++this.pos,this.finishToken(Sa.braceR);case 58:return++this.pos,this.finishToken(Sa.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Sa.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Sa.prefix,1)}this.raise(this.pos,"Unexpected character '"+ou(c)+"'")};Kj.finishOp=function(c,h){var e=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,e)};Kj.readRegexp=function(){for(var c,h,e=this.pos;;){this.pos>=this.input.length&&this.raise(e,"Unterminated regular expression");var k=this.input.charAt(this.pos);bq.test(k)&&this.raise(e,"Unterminated regular expression");if(c)c=!1;else{if("["===k)h=
!0;else if("]"===k&&h)h=!1;else if("/"===k&&!h)break;c="\\"===k}++this.pos}c=this.input.slice(e,this.pos);++this.pos;k=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(k);k=this.regexpState||(this.regexpState=new Zw(this));k.reset(e,c,h);this.validateRegExpFlags(k);this.validateRegExpPattern(k);e=null;try{e=new RegExp(c,h)}catch(n){}return this.finishToken(Sa.regexp,{pattern:c,flags:h,value:e})};Kj.readInt=function(c,h,e){var k=12<=this.options.ecmaVersion&&void 0===h;e=e&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,d=0,m=0,a=null==h?Infinity:h;m<a;++m,++this.pos){var g=this.input.charCodeAt(this.pos);if(k&&95===g)e&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===m&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=g;else{var l=97<=g?g-97+10:65<=g?g-65+10:48<=g&&57>=g?g-48:Infinity;if(l>=c)break;d=g;
b=b*c+l}}k&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:b};Kj.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var e=this.readInt(c);null==e&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(e=$z(this.input.slice(h,this.pos)),++this.pos):Zn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Sa.num,e)};Kj.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var e=2<=this.pos-h&&48===this.input.charCodeAt(h);e&&this.strict&&this.raise(h,"Invalid number");var k=this.input.charCodeAt(this.pos);if(!e&&!c&&11<=this.options.ecmaVersion&&110===k)return e=$z(this.input.slice(h,this.pos)),++this.pos,Zn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Sa.num,e);e&&/[89]/.test(this.input.slice(h,
this.pos))&&(e=!1);46!==k||e||(++this.pos,this.readInt(10),k=this.input.charCodeAt(this.pos));69!==k&&101!==k||e||(k=this.input.charCodeAt(++this.pos),43!==k&&45!==k||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Zn(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);e=e?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Sa.num,e)};Kj.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};Kj.readString=function(c){for(var h="",e=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var k=this.input.charCodeAt(this.pos);if(k===c)break;92===k?(h+=this.input.slice(e,this.pos),h+=this.readEscapedChar(!1),e=
this.pos):($n(k,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(e,this.pos++);return this.finishToken(Sa.string,h)};var w8={};Kj.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===w8)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Kj.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw w8;this.raise(c,h)};Kj.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var e=this.input.charCodeAt(this.pos);if(96===e||36===e&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Sa.template||this.type===Sa.invalidTemplate)){if(36===e)return this.pos+=2,this.finishToken(Sa.dollarBraceL);++this.pos;return this.finishToken(Sa.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Sa.template,c)}if(92===e)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if($n(e)){c+=this.input.slice(h,this.pos);++this.pos;switch(e){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(e)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};Kj.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Sa.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Kj.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ou(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],k=parseInt(e,8);255<k&&(e=e.slice(0,-1),k=parseInt(e,8));this.pos+=e.length-1;h=this.input.charCodeAt(this.pos);"0"===e&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-e.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(k)}return $n(h)?"":String.fromCharCode(h)}};Kj.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};Kj.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,e=this.pos,k=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(lu(n,
k))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(e,this.pos),e=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?Zn:lu)(n,k)||this.invalidStringToken(e,"Invalid Unicode escape"),c+=ou(n),e=this.pos;else break;h=!1}return c+this.input.slice(e,this.pos)};Kj.readWord=function(){var c=this.readWord1(),h=Sa.name;this.keywords.test(c)&&(h=oJ[c]);return this.finishToken(h,
c)};Zl.acorn={Parser:Zl,version:"8.0.3",defaultOptions:FF,Position:AC,SourceLocation:Yz,getLineInfo:mu,Node:Xy,TokenType:gk,tokTypes:Sa,keywordTypes:oJ,TokContext:as,tokContexts:$l,isIdentifierChar:lu,isIdentifierStart:Zn,Token:jH,isNewLine:$n,lineBreak:bq,lineBreakG:Ox,nonASCIIwhitespace:yU};var mv=Object.freeze({__proto__:null,Node:Xy,Parser:Zl,Position:AC,SourceLocation:Yz,TokContext:as,Token:jH,TokenType:gk,defaultOptions:FF,getLineInfo:mu,isIdentifierChar:lu,isIdentifierStart:Zn,isNewLine:$n,
keywordTypes:oJ,lineBreak:bq,lineBreakG:Ox,nonASCIIwhitespace:yU,parse:function(c,h){return Zl.parse(c,h)},parseExpressionAt:function(c,h,e){return Zl.parseExpressionAt(c,h,e)},tokContexts:$l,tokTypes:Sa,tokenizer:function(c,h){return Zl.tokenizer(c,h)},version:"8.0.3"});Ba("bB",mv);var pB=function(c,h){this.node=c;this.state=h},mea=Object.create||function(c){function h(){}h.prototype=c;return new h},Of={};Of.Program=Of.BlockStatement=function(c,h,e){var k=0;for(c=c.body;k<c.length;k+=1)e(c[k],h,
"Statement")};Of.Statement=kw;Of.EmptyStatement=Wo;Of.ExpressionStatement=Of.ParenthesizedExpression=Of.ChainExpression=function(c,h,e){return e(c.expression,h,"Expression")};Of.IfStatement=function(c,h,e){e(c.test,h,"Expression");e(c.consequent,h,"Statement");c.alternate&&e(c.alternate,h,"Statement")};Of.LabeledStatement=function(c,h,e){return e(c.body,h,"Statement")};Of.BreakStatement=Of.ContinueStatement=Wo;Of.WithStatement=function(c,h,e){e(c.object,h,"Expression");e(c.body,h,"Statement")};Of.SwitchStatement=
function(c,h,e){e(c.discriminant,h,"Expression");var k=0;for(c=c.cases;k<c.length;k+=1){var n=c[k];n.test&&e(n.test,h,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)e(n[b],h,"Statement")}};Of.SwitchCase=function(c,h,e){c.test&&e(c.test,h,"Expression");var k=0;for(c=c.consequent;k<c.length;k+=1)e(c[k],h,"Statement")};Of.ReturnStatement=Of.YieldExpression=Of.AwaitExpression=function(c,h,e){c.argument&&e(c.argument,h,"Expression")};Of.ThrowStatement=Of.SpreadElement=function(c,h,e){return e(c.argument,
h,"Expression")};Of.TryStatement=function(c,h,e){e(c.block,h,"Statement");c.handler&&e(c.handler,h);c.finalizer&&e(c.finalizer,h,"Statement")};Of.CatchClause=function(c,h,e){c.param&&e(c.param,h,"Pattern");e(c.body,h,"Statement")};Of.WhileStatement=Of.DoWhileStatement=function(c,h,e){e(c.test,h,"Expression");e(c.body,h,"Statement")};Of.ForStatement=function(c,h,e){c.init&&e(c.init,h,"ForInit");c.test&&e(c.test,h,"Expression");c.update&&e(c.update,h,"Expression");e(c.body,h,"Statement")};Of.ForInStatement=
Of.ForOfStatement=function(c,h,e){e(c.left,h,"ForInit");e(c.right,h,"Expression");e(c.body,h,"Statement")};Of.ForInit=function(c,h,e){"VariableDeclaration"===c.type?e(c,h):e(c,h,"Expression")};Of.DebuggerStatement=Wo;Of.FunctionDeclaration=function(c,h,e){return e(c,h,"Function")};Of.VariableDeclaration=function(c,h,e){var k=0;for(c=c.declarations;k<c.length;k+=1)e(c[k],h)};Of.VariableDeclarator=function(c,h,e){e(c.id,h,"Pattern");c.init&&e(c.init,h,"Expression")};Of.Function=function(c,h,e){c.id&&
e(c.id,h,"Pattern");for(var k=0,n=c.params;k<n.length;k+=1)e(n[k],h,"Pattern");e(c.body,h,c.expression?"Expression":"Statement")};Of.Pattern=function(c,h,e){"Identifier"===c.type?e(c,h,"VariablePattern"):"MemberExpression"===c.type?e(c,h,"MemberPattern"):e(c,h)};Of.VariablePattern=Wo;Of.MemberPattern=kw;Of.RestElement=function(c,h,e){return e(c.argument,h,"Pattern")};Of.ArrayPattern=function(c,h,e){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&e(n,h,"Pattern")}};Of.ObjectPattern=function(c,
h,e){var k=0;for(c=c.properties;k<c.length;k+=1){var n=c[k];"Property"===n.type?(n.computed&&e(n.key,h,"Expression"),e(n.value,h,"Pattern")):"RestElement"===n.type&&e(n.argument,h,"Pattern")}};Of.Expression=kw;Of.ThisExpression=Of.Super=Of.MetaProperty=Wo;Of.ArrayExpression=function(c,h,e){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&e(n,h,"Expression")}};Of.ObjectExpression=function(c,h,e){var k=0;for(c=c.properties;k<c.length;k+=1)e(c[k],h)};Of.FunctionExpression=Of.ArrowFunctionExpression=
Of.FunctionDeclaration;Of.SequenceExpression=function(c,h,e){var k=0;for(c=c.expressions;k<c.length;k+=1)e(c[k],h,"Expression")};Of.TemplateLiteral=function(c,h,e){for(var k=0,n=c.quasis;k<n.length;k+=1)e(n[k],h);k=0;for(c=c.expressions;k<c.length;k+=1)e(c[k],h,"Expression")};Of.TemplateElement=Wo;Of.UnaryExpression=Of.UpdateExpression=function(c,h,e){e(c.argument,h,"Expression")};Of.BinaryExpression=Of.LogicalExpression=function(c,h,e){e(c.left,h,"Expression");e(c.right,h,"Expression")};Of.AssignmentExpression=
Of.AssignmentPattern=function(c,h,e){e(c.left,h,"Pattern");e(c.right,h,"Expression")};Of.ConditionalExpression=function(c,h,e){e(c.test,h,"Expression");e(c.consequent,h,"Expression");e(c.alternate,h,"Expression")};Of.NewExpression=Of.CallExpression=function(c,h,e){e(c.callee,h,"Expression");if(c.arguments){var k=0;for(c=c.arguments;k<c.length;k+=1)e(c[k],h,"Expression")}};Of.MemberExpression=function(c,h,e){e(c.object,h,"Expression");c.computed&&e(c.property,h,"Expression")};Of.ExportNamedDeclaration=
Of.ExportDefaultDeclaration=function(c,h,e){c.declaration&&e(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&e(c.source,h,"Expression")};Of.ExportAllDeclaration=function(c,h,e){c.exported&&e(c.exported,h);e(c.source,h,"Expression")};Of.ImportDeclaration=function(c,h,e){for(var k=0,n=c.specifiers;k<n.length;k+=1)e(n[k],h);e(c.source,h,"Expression")};Of.ImportExpression=function(c,h,e){e(c.source,h,"Expression")};Of.ImportSpecifier=Of.ImportDefaultSpecifier=
Of.ImportNamespaceSpecifier=Of.Identifier=Of.Literal=Wo;Of.TaggedTemplateExpression=function(c,h,e){e(c.tag,h,"Expression");e(c.quasi,h,"Expression")};Of.ClassDeclaration=Of.ClassExpression=function(c,h,e){return e(c,h,"Class")};Of.Class=function(c,h,e){c.id&&e(c.id,h,"Pattern");c.superClass&&e(c.superClass,h,"Expression");e(c.body,h)};Of.ClassBody=function(c,h,e){var k=0;for(c=c.body;k<c.length;k+=1)e(c[k],h)};Of.MethodDefinition=Of.Property=function(c,h,e){c.computed&&e(c.key,h,"Expression");e(c.value,
h,"Expression")};var ot=Object.freeze({__proto__:null,ancestor:function(c,h,e,k,n){var b=[];e||(e=Of);(function l(m,a,g){g=g||m.type;var r=h[g],v=m!==b[b.length-1];v&&b.push(m);e[g](m,a,l);r&&r(m,a||b,b);v&&b.pop()})(c,k,n)},base:Of,findNodeAfter:function(c,h,e,k,n){e=jw(e);k||(k=Of);try{(function g(d,m,a){if(!(d.end<h)){a=a||d.type;if(d.start>=h&&e(a,d))throw new pB(d,m);k[a](d,m,g)}})(c,n)}catch(b){if(b instanceof pB)return b;throw b;}},findNodeAround:function(c,h,e,k,n){e=jw(e);k||(k=Of);try{(function g(d,
m,a){a=a||d.type;if(!(d.start>h||d.end<h)&&(k[a](d,m,g),e(a,d)))throw new pB(d,m);})(c,n)}catch(b){if(b instanceof pB)return b;throw b;}},findNodeAt:function(c,h,e,k,n,b){n||(n=Of);k=jw(k);try{(function l(m,a,g){g=g||m.type;if((null==h||m.start<=h)&&(null==e||m.end>=e))n[g](m,a,l);if(!(null!=h&&m.start!==h||null!=e&&m.end!==e)&&k(g,m))throw new pB(m,a);})(c,b)}catch(d){if(d instanceof pB)return d;throw d;}},findNodeBefore:function(c,h,e,k,n){e=jw(e);k||(k=Of);var b;(function l(m,a,g){m.start>h||(g=
g||m.type,m.end<=h&&(!b||b.node.end<m.end)&&e(g,m)&&(b=new pB(m,a)),k[g](m,a,l))})(c,n);return b},full:function(c,h,e,k,n){e||(e=Of);(function g(d,m,a){var l=a||d.type;e[l](d,m,g);a||h(d,m,l)})(c,k,n)},fullAncestor:function(c,h,e,k){e||(e=Of);var n=[];(function g(d,m,a){var l=a||d.type,r=d!==n[n.length-1];r&&n.push(d);e[l](d,m,g);a||h(d,m||n,n,l);r&&n.pop()})(c,k)},make:pu,recursive:function(c,h,e,k,n){var b=e?pu(e,k||void 0):k;(function l(m,a,g){b[g||m.type](m,a,l)})(c,h,n)},simple:function(c,h,
e,k,n){e||(e=Of);(function g(d,m,a){a=a||d.type;var l=h[a];e[a](d,m,g);l&&l(d,m)})(c,k,n)}}),Pk=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Sa.eof,start:0,end:0};this.tok.validateRegExpFlags=pq;this.tok.validateRegExpPattern=pq;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Yz(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=
0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};Pk.prototype.startNode=function(){return new Xy(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Pk.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};Pk.prototype.startNodeAt=function(c){return this.options.locations?new Xy(this.toks,c[0],c[1]):new Xy(this.toks,c)};Pk.prototype.finishNode=function(c,h){c.type=h;c.end=
this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Pk.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Sa.name,start:h.start,end:h.start,loc:h.loc};return h};Pk.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Pk.prototype.dummyString=function(){var c=
this.dummyNode("Literal");c.value=c.raw="\u2716";return c};Pk.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Pk.prototype.isContextual=function(c){return this.tok.type===Sa.name&&this.tok.value===c};Pk.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Sa.name)};Pk.prototype.canInsertSemicolon=function(){return this.tok.type===Sa.eof||this.tok.type===Sa.braceR||bq.test(this.input.slice(this.last.end,this.tok.start))};Pk.prototype.semicolon=function(){return this.eat(Sa.semi)};
Pk.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};Pk.prototype.pushCx=function(){this.context.push(this.curIndent)};Pk.prototype.popCx=function(){this.curIndent=this.context.pop()};Pk.prototype.lineEnd=function(c){for(;c<this.input.length&&!$n(this.input.charCodeAt(c));)++c;return c};Pk.prototype.indentationAfter=function(c){for(var h=0;;++c){var e=this.input.charCodeAt(c);if(32===e)++h;else if(9===e)h+=
this.options.tabSize;else return h}};Pk.prototype.closes=function(c,h,e,k){return this.tok.type===c||this.tok.type===Sa.eof?!0:e!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!k||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};Pk.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};Pk.prototype.extend=function(c,h){this[c]=h(this[c])};Pk.prototype.parse=
function(){this.next();return this.parseTopLevel()};Pk.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var e=0;e<c.length;e++)h=c[e](h);return h};Pk.parse=function(c,h){return(new this(c,h)).parse()};Pk.BaseParser=Zl;var lM=Pk.prototype;lM.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};lM.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Sa.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Sa.ellipsis),new jH(this.toks)}catch(k){if(!(k instanceof SyntaxError))throw k;var c=k.message,h=k.raisedAt,e=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(k.pos+1),/string/.test(c))e={start:k.pos,end:h,type:Sa.string,value:this.input.slice(k.pos+
1,h)};else if(/regular expr/i.test(c)){e=this.input.slice(k.pos,h);try{e=new RegExp(e)}catch(n){}e={start:k.pos,end:h,type:Sa.regexp,value:e}}else e=/template/.test(c)?{start:k.pos,end:h,type:Sa.template,value:this.input.slice(k.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!zn(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!$n(c)););else if(/unexpected character/i.test(c))h++,e=!1;else if(/regular expression/i.test(c))e=!0;else throw k;this.resetTo(h);!0===e&&(e={start:h,end:h,type:Sa.name,value:"\u2716"});if(e)return this.options.locations&&(e.loc=new Yz(this.toks,mu(this.input,e.start),mu(this.input,e.end))),e}};lM.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=Ox.lastIndex=0;for(var e;(e=Ox.exec(this.input))&&e.index<c;)++this.toks.curLine,this.toks.lineStart=e.index+e[0].length}};lM.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var bs=Pk.prototype;bs.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,mu(this.input,
0)]:0);for(c.body=[];this.tok.type!==Sa.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};bs.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Sa._var;var e="let"}switch(c){case Sa._break:case Sa._continue:this.next();var k=c===Sa._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Sa.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,k?"BreakStatement":"ContinueStatement");case Sa._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Sa._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Sa._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Sa._for:this.next();k=9<=this.options.ecmaVersion&&this.inAsync&&this.eatContextual("await");this.pushCx();this.expect(Sa.parenL);
if(this.tok.type===Sa.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Sa._var||this.tok.type===Sa._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Sa._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Sa._in&&(h.await=k),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===Sa._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==
Sa._in&&(h.await=k),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Sa._function:return this.next(),this.parseFunction(h,!0);case Sa._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Sa._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Sa._return:return this.next(),this.eat(Sa.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,
"ReturnStatement");case Sa._switch:c=this.curIndent;e=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Sa.braceL);!this.closes(Sa.braceR,c,e,!0);)if(this.tok.type===Sa._case||this.tok.type===Sa._default){var n=this.tok.type===Sa._case;k&&this.finishNode(k,"SwitchCase");h.cases.push(k=this.startNode());k.consequent=[];this.next();k.test=n?this.parseExpression():null;this.expect(Sa.colon)}else k||(h.cases.push(k=this.startNode()),k.consequent=
[],k.test=null),k.consequent.push(this.parseStatement());k&&this.finishNode(k,"SwitchCase");this.popCx();this.eat(Sa.braceR);return this.finishNode(h,"SwitchStatement");case Sa._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Sa._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Sa._catch&&(k=this.startNode(),this.next(),this.eat(Sa.parenL)?(k.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Sa.parenR)):
k.param=null,k.body=this.parseBlock(),h.handler=this.finishNode(k,"CatchClause")),h.finalizer=this.eat(Sa._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Sa._var:case Sa._const:return this.parseVar(h,!1,e||this.tok.value);case Sa._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case Sa._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case Sa.braceL:return this.parseBlock();case Sa.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Sa._class:return this.parseClass(!0);case Sa._import:return 10<this.options.ecmaVersion&&(k=this.lookAhead(1).type,k===Sa.parenL||k===Sa.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case Sa._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);k=this.parseExpression();if(Vh(k))return this.next(),this.tok.type===Sa.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Sa.name&&"Identifier"===k.type&&this.eat(Sa.colon))return h.body=this.parseStatement(),h.label=k,this.finishNode(h,"LabeledStatement");h.expression=k;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};bs.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Sa.braceL);var h=this.curIndent,
e=this.curLineStart;for(c.body=[];!this.closes(Sa.braceR,h,e,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Sa.braceR);return this.finishNode(c,"BlockStatement")};bs.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Sa.semi)&&this.tok.type!==Sa.semi&&(c.test=this.parseExpression());this.eat(Sa.semi)&&this.tok.type!==Sa.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Sa.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};bs.parseForIn=
function(c,h){var e=this.tok.type===Sa._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Sa.parenR);c.body=this.parseStatement();return this.finishNode(c,e)};bs.parseVar=function(c,h,e){c.kind=e;this.next();c.declarations=[];do e=this.startNode(),e.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),e.init=this.eat(Sa.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(e,"VariableDeclarator"));
while(this.eat(Sa.comma));c.declarations.length||(e=this.startNode(),e.id=this.dummyIdent(),c.declarations.push(this.finishNode(e,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};bs.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Sa.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Sa._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var e=this.curIndent+1,k=
this.curLineStart;this.eat(Sa.braceL);this.curIndent+1<e&&(e=this.curIndent,k=this.curLineStart);for(;!this.closes(Sa.braceR,e,k);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Sa.star));this.parsePropertyName(n);if(Vh(n.key))Vh(this.parseMaybeAssign())&&this.next(),this.eat(Sa.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===Sa.parenL||this.tok.type===Sa.braceL?n.static=!1:(n.static=!0,b=this.eat(Sa.star),
this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Sa.parenL||this.canInsertSemicolon())var d=!1;else d=!0,b=9<=this.options.ecmaVersion&&this.eat(Sa.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Sa.parenL&&this.tok.type!==Sa.braceL?(n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||
b||d||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,d));h.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Sa.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};bs.parseFunction=function(c,
h,e){var k=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Sa.star));8<=this.options.ecmaVersion&&(c.async=!!e);this.tok.type===Sa.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=k;this.inFunction=n;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};bs.parseExport=
function(){var c=this.startNode();this.next();if(this.eat(Sa.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Sa._default)){var h;if(this.tok.type===Sa._function||(h=this.toks.isAsyncFunction())){var e=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(e,"nullableID",h)}else this.tok.type===
Sa._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};bs.parseImport=
function(){var c=this.startNode();this.next();if(this.tok.type===Sa.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Sa.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");this.eat(Sa.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Sa.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,
"ImportDeclaration")};bs.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Sa.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;var e=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Sa.braceL);this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Sa.braceR,h+(this.curLineStart<=k?1:0),e);){var n=this.startNode();if(this.eat(Sa.star))n.local=
this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Vh(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Sa.comma)}this.eat(Sa.braceR);this.popCx()}return c};bs.parseExportSpecifierList=function(){var c=[],h=this.curIndent,e=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Sa.braceL);
this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Sa.braceR,h+(this.curLineStart<=k?1:0),e)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Vh(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Sa.comma)}this.eat(Sa.braceR);this.popCx();return c};var Qk=Pk.prototype;Qk.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=
this.checkLVal(c.expression),c;default:return this.dummyIdent()}};Qk.parseExpression=function(c){var h=this.storeCurrentPos(),e=this.parseMaybeAssign(c);if(this.tok.type===Sa.comma){h=this.startNodeAt(h);for(h.expressions=[e];this.eat(Sa.comma);)h.expressions.push(this.parseMaybeAssign(c));return this.finishNode(h,"SequenceExpression")}return e};Qk.parseParenExpression=function(){this.pushCx();this.expect(Sa.parenL);var c=this.parseExpression();this.popCx();this.expect(Sa.parenR);return c};Qk.parseMaybeAssign=
function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Sa.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Sa.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),e=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Sa.eq?this.toAssignable(e):
this.checkLVal(e),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):e};Qk.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),e=this.parseExprOps(c);return this.eat(Sa.question)?(h=this.startNodeAt(h),h.test=e,h.consequent=this.parseMaybeAssign(),h.alternate=this.expect(Sa.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):e};Qk.parseExprOps=function(c){var h=this.storeCurrentPos(),e=this.curIndent,k=this.curLineStart;
return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,e,k)};Qk.parseExprOp=function(c,h,e,k,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var d=this.tok.type.binop;if(null!=d&&(!k||this.tok.type!==Sa._in)&&d>e){var m=this.startNodeAt(h);m.left=c;m.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine()?m.right=this.dummyIdent():(c=this.storeCurrentPos(),m.right=this.parseExprOp(this.parseMaybeUnary(!1),c,d,k,n,b));this.finishNode(m,
/&&|\|\||\?\?/.test(m.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(m,h,e,k,n,b)}return c};Qk.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var e=this.parseAwait();c=!0}else if(this.tok.type.prefix){e=this.startNode();var k=this.tok.type===Sa.incDec;k||(c=!0);e.operator=this.tok.value;e.prefix=!0;this.next();e.argument=this.parseMaybeUnary(!0);
k&&(e.argument=this.checkLVal(e.argument));e=this.finishNode(e,k?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Sa.ellipsis)e=this.startNode(),this.next(),e.argument=this.parseMaybeUnary(c),e=this.finishNode(e,"SpreadElement");else for(e=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)k=this.startNodeAt(h),k.operator=this.tok.value,k.prefix=!1,k.argument=this.checkLVal(e),this.next(),e=this.finishNode(k,"UpdateExpression");return!c&&this.eat(Sa.starstar)?
(c=this.startNodeAt(h),c.operator="**",c.left=e,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):e};Qk.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};Qk.parseSubscripts=function(c,h,e,k,n){for(var b=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine())if(this.tok.type===Sa.dot&&this.curIndent===k)--k;else break;var m="Identifier"===
c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Sa.questionDot);a&&(d=!0);if(a&&this.tok.type!==Sa.parenL&&this.tok.type!==Sa.bracketL&&this.tok.type!==Sa.backQuote||this.eat(Sa.dot)){var g=this.startNodeAt(h);g.object=c;this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine()?g.property=this.dummyIdent():g.property=this.parsePropertyAccessor()||this.dummyIdent();g.computed=!1;b&&(g.optional=a);c=this.finishNode(g,"MemberExpression")}else if(this.tok.type===Sa.bracketL)this.pushCx(),
this.next(),g=this.startNodeAt(h),g.object=c,g.property=this.parseExpression(),g.computed=!0,b&&(g.optional=a),this.popCx(),this.expect(Sa.bracketR),c=this.finishNode(g,"MemberExpression");else if(e||this.tok.type!==Sa.parenL)if(this.tok.type===Sa.backQuote)a=this.startNodeAt(h),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");else break;else{g=this.parseExprList(Sa.parenR);if(m&&this.eat(Sa.arrow))return this.parseArrowExpression(this.startNodeAt(h),g,!0);m=this.startNodeAt(h);
m.callee=c;m.arguments=g;b&&(m.optional=a);c=this.finishNode(m,"CallExpression")}}d&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};Qk.parseExprAtom=function(){switch(this.tok.type){case Sa._this:case Sa._super:var c=this.tok.type===Sa._this?"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case Sa.name:h=this.storeCurrentPos();c=this.parseIdent();var e=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Sa._function))return this.parseFunction(this.startNodeAt(h),
!1,!0);this.tok.type===Sa.name&&(c=this.parseIdent(),e=!0)}return this.eat(Sa.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],e):c;case Sa.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case Sa.num:case Sa.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Sa.num&&
110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Sa._null:case Sa._true:case Sa._false:return h=this.startNode(),h.value=this.tok.type===Sa._null?null:this.tok.type===Sa._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case Sa.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Sa.parenR);if(this.eat(Sa.arrow))return c=c.expressions||[c],c.length&&Vh(c[c.length-
1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Sa.bracketL:return h=this.startNode(),h.elements=this.parseExprList(Sa.bracketR,!0),this.finishNode(h,"ArrayExpression");case Sa.braceL:return this.parseObj();case Sa._class:return this.parseClass(!1);case Sa._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Sa._new:return this.parseNew();
case Sa.backQuote:return this.parseTemplate();case Sa._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};Qk.parseExprImport=function(){var c=this.startNode(),h=this.parseIdent(!0);switch(this.tok.type){case Sa.parenL:return this.parseDynamicImport(c);case Sa.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};Qk.parseDynamicImport=function(c){c.source=this.parseExprList(Sa.parenR)[0]||
this.dummyString();return this.finishNode(c,"ImportExpression")};Qk.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};Qk.parseNew=function(){var c=this.startNode(),h=this.curIndent,e=this.curLineStart,k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Sa.dot))return c.meta=k,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");k=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),k,!0,h,e);
c.arguments=this.tok.type===Sa.parenL?this.parseExprList(Sa.parenR):[];return this.finishNode(c,"NewExpression")};Qk.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Sa.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Sa.backQuote;return this.finishNode(c,"TemplateElement")};Qk.parseTemplate=function(){var c=this.startNode();this.next();
c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Sa.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Sa.backQuote);return this.finishNode(c,"TemplateLiteral")};Qk.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,e=this.curLineStart;this.eat(Sa.braceL);
this.curIndent+1<h&&(h=this.curIndent,e=this.curLineStart);for(;!this.closes(Sa.braceR,h,e);){var k=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Sa.ellipsis))k.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(k,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),k.method=!1,k.shorthand=!1,n=this.eat(Sa.star));this.parsePropertyName(k);if(this.toks.isAsyncProp(k)){var d=!0;n=9<=this.options.ecmaVersion&&this.eat(Sa.star);this.parsePropertyName(k)}else d=
!1;Vh(k.key)?Vh(this.parseMaybeAssign())&&this.next():(this.eat(Sa.colon)?(k.kind="init",k.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Sa.parenL||this.tok.type===Sa.braceL)?(k.kind="init",k.method=!0,k.value=this.parseMethod(n,d)):5<=this.options.ecmaVersion&&"Identifier"===k.key.type&&!k.computed&&("get"===k.key.name||"set"===k.key.name)&&this.tok.type!==Sa.comma&&this.tok.type!==Sa.braceR&&this.tok.type!==Sa.eq?(k.kind=k.key.name,this.parsePropertyName(k),k.value=
this.parseMethod(!1)):(k.kind="init",6<=this.options.ecmaVersion?this.eat(Sa.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=k.key,n.right=this.parseMaybeAssign(),k.value=this.finishNode(n,"AssignmentExpression")):k.value=k.key:k.value=this.dummyIdent(),k.shorthand=!0),c.properties.push(this.finishNode(k,"Property")))}this.eat(Sa.comma)}this.popCx();this.eat(Sa.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};
Qk.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Sa.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Sa.bracketR);return}c.computed=!1}var h=this.tok.type===Sa.num||this.tok.type===Sa.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};Qk.parsePropertyAccessor=function(){if(this.tok.type===Sa.name||this.tok.type.keyword)return this.parseIdent()};Qk.parseIdent=function(){var c=this.tok.type===Sa.name?this.tok.value:this.tok.type.keyword;
if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};Qk.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Qk.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===
c.type){c.type="ObjectPattern";for(var e=0,k=c.properties;e<k.length;e+=1)this.toAssignable(k[e],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};Qk.toAssignableList=function(c,h){for(var e=
0;e<c.length;e+=1)this.toAssignable(c[e],h);return c};Qk.parseFunctionParams=function(c){c=this.parseExprList(Sa.parenR);return this.toAssignableList(c,!0)};Qk.parseMethod=function(c,h){var e=this.startNode(),k=this.inAsync,n=this.inFunction;this.initFunction(e);6<=this.options.ecmaVersion&&(e.generator=!!c);8<=this.options.ecmaVersion&&(e.async=!!h);this.inAsync=e.async;this.inFunction=!0;e.params=this.parseFunctionParams();e.body=this.parseBlock();this.toks.adaptDirectivePrologue(e.body.body);this.inAsync=
k;this.inFunction=n;return this.finishNode(e,"FunctionExpression")};Qk.parseArrowExpression=function(c,h,e){var k=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!e);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Sa.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=k;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};
Qk.parseExprList=function(c,h){this.pushCx();var e=this.curIndent,k=this.curLineStart,n=[];for(this.next();!this.closes(c,e+1,k);)if(this.eat(Sa.comma))n.push(h?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Vh(b)){if(this.closes(c,e,k))break;this.next()}else n.push(b);this.eat(Sa.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};Qk.parseAwait=function(){var c=this.startNode();this.next();c.argument=
this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};FF.tabSize=4;var mM=Object.freeze({__proto__:null,LooseParser:Pk,isDummy:Vh,parse:function(c,h){return Pk.parse(c,h)}}),Nf=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");Nf.forEachNode=function(c,h,e,k){k=k||{};var n=k.traversal||"preorder",b=Nf.obj.clone(k.visitors?k.visitors:Nf.walk.make(Nf.custom.visitors.withMemberExpression)),d="preorder"===n?function(m,a,g,l,r){h(g,e,l,a);return m(g,l+1,r)}:function(m,
a,g,l,r){m=m(g,l+1,r);h(g,e,l,a);return m};Object.keys(b).forEach(function(m){var a=b[m];b[m]=function(g,l,r){return d(a,m,g,l,r)}});Nf.walk.recursive(c,0,null,b);return c};Nf.matchNodes=function(c,h,e,k){return Nf.forEachNode(c,function(n,b,d,m){if(h[n.type])h[n.type](n,b,d,m)},e,k)};Nf.findNodesIncluding=sr;Nf.withParentInfo=function(c,h,e){function k(a){var g={id:Nf.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(g);return g}e=e||{};var n=Nf.walk.make({Function:function(a,
g,l){g&&g.scope&&(g.scope=k(g.scope));l(a.body,g,"ScopeBody")},VariableDeclarator:function(a,g,l){a.init&&l(a.init,g,"Expression")},VariableDeclaration:function(a,g,l){for(var r=0;r<a.declarations.length;++r){var v=a.declarations[r];v&&l(v,g,"VariableDeclarator")}},ObjectExpression:function(a,g,l){for(var r=0;r<a.properties.length;++r){var v=a.properties[r];l(v.key,g,"Expression");l(v.value,g,"Expression")}},MemberExpression:function(a,g,l){l(a.object,g,"Expression");l(a.property,g,"Expression")}},
Nf.walk.base),b,d=[];Nf.forEachNode(c,function(a){Nf.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(g){if(!a.__lookupGetter__(g)){var l=a[g];a.__defineGetter__(g,function(){b=g;return l});d.push([a,g,a[g]])}})},null,{visitors:n});var m=[];Object.keys(n).forEach(function(a){var g=n[a];n[a]=function(l,r,v){return a===l.type||e.visitAllNodes?(m.push(h.call(null,l,{scope:r.scope,depth:r.depth,parent:r.parent,type:a,propertyInParent:b})),g(l,{scope:r.scope,parent:l,
depth:r.depth+1},v)):g(l,r,v)}});Nf.walk.recursive(c,{scope:k(),parent:null,propertyInParent:"",depth:0},null,n);d.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return m};Nf.copy=Fs;Nf.findSiblings=qu;Nf.findNodeByAstIndex=qq;Nf.findStatementOfNode=xa;Nf.addAstIndex=Xo;Nf.obj=Ng;Nf.arr=ng;Nf.string=Li;Nf.Path=Ti;Nf.withMozillaAstDo=qB;Nf.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Nf.acorn=mv;Nf.walk=ot;Nf.loose=mM;Nf.custom=
{};Nf.custom.forEachNode=Nf.forEachNode;Nf.custom.matchNodes=Nf.matchNodes;Nf.custom.findNodesIncluding=Nf.findNodesIncluding;Nf.custom.withParentInfo=Nf.withParentInfo;Nf.custom.copy=Nf.copy;Nf.custom.findSiblings=Nf.findSiblings;Nf.custom.findNodeByAstIndex=Nf.findNodeByAstIndex;Nf.custom.findStatementOfNode=Nf.findStatementOfNode;Nf.custom.addAstIndex=Nf.addAstIndex;var Yy=Ba("E",Nf.custom);Nf.walk=ot;Nf.walk=ot;Nf.loose=mM;Nf.loose=mM;Nf.acorn=mv;Nf.acorn=mv;Nf.custom=Yy;Nf.custom=Yy;Nf.findStatementOfNode=
xa;Nf.findStatementOfNode=xa;Nf.addAstIndex=Xo;Nf.addAstIndex=Xo;Nf.findNodesIncluding=sr;Nf.findNodesIncluding=sr;Nf.findSiblings=qu;Nf.findSiblings=qu;Nf.findNodeByAstIndex=qq;Nf.findNodeByAstIndex=qq;Nf.copy=Fs;Nf.copy=Fs;Nf.custom.visitors={stopAtFunctions:Nf.walk.make(Object.assign({Function:function(){}},Nf.walk.base)),withMemberExpression:Nf.walk.make({MemberExpression:function(c,h,e){e(c.object,h,"Expression");e(c.property,h,"Expression")}},Nf.walk.base)};var Sj=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");
Sj.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var e=c.body[h];"BlockStatement"===e.type&&e[Sj.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(e.body))}return c};Sj.block=function(c){return{type:"BlockStatement",body:c}};Sj.Visitor=Ne;var pt=function(){return Sj.Visitor.apply(this,arguments)||this};$jscomp.inherits(pt,Sj.Visitor);pt.prototype.accept=function(c,h,e){this.doFunc(c,h,e);return Sj.Visitor.prototype.accept.call(this,c,h,e)};pt.run=function(c,
h,e){var k=new this;k.doFunc=h;k.accept(c,e,[]);return e};Ba("A",pt);Sj.AllNodesVisitor=pt;var rB=function(){return Sj.Visitor.apply(this,arguments)||this};$jscomp.inherits(rB,Sj.Visitor);rB.prototype.accept=function(c,h,e){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:e}),c;default:return Sj.Visitor.prototype.accept.call(this,c,h,e)}};rB.run=function(c){var h=[];(new this).accept(c,h,[]);return h};
Sj.FindToplevelFuncDeclVisitor=rB;Sj.canBeInlinedSym=Symbol("canBeInlined");var cs=function(){return Sj.Visitor.apply(this,arguments)||this};$jscomp.inherits(cs,Sj.Visitor);cs.prototype.accept=function(c,h,e){c=this.replacer(Sj.Visitor.prototype.accept.call(this,c,h,e));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Sj.block(c),(h[Sj.canBeInlinedSym]=!0,h)):c};cs.prototype.visitBlockStatement=function(c,h,e){return Sj.blockInliner(Sj.Visitor.prototype.visitBlockStatement.call(this,c,
h,e))};cs.prototype.visitProgram=function(c,h,e){return Sj.blockInliner(Sj.Visitor.prototype.visitProgram.call(this,c,h,e))};cs.run=function(c,h){var e=new this;e.replacer=h;return e.accept(c,null,[])};Sj.ReplaceManyVisitor=cs;var qt=function(){return Sj.Visitor.apply(this,arguments)||this};$jscomp.inherits(qt,Sj.Visitor);qt.prototype.accept=function(c,h,e){return this.replacer(Sj.Visitor.prototype.accept.call(this,c,h,e),e)};qt.run=function(c,h){var e=new this;e.replacer=h;return e.accept(c,null,
[])};Sj.ReplaceVisitor=qt;Sj.AllNodesVisitor=pt;Sj.AllNodesVisitor=pt;Sj.FindToplevelFuncDeclVisitor=rB;Sj.FindToplevelFuncDeclVisitor=rB;Sj.ReplaceVisitor=qt;Sj.ReplaceVisitor=qt;Sj.ReplaceManyVisitor=cs;Sj.ReplaceManyVisitor=cs;var bi=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");bi.addSource=Ul;bi.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return bi.findNodesIncluding(h,c)};bi.parseFunction=cn;bi.fuzzyParse=ao;bi.acornParseAsyncAware=function(c,h){if(h.onComment){var e=
h.onComment;h.onComment=function(b,d,m,a,g,l){return e.call(this,b,d,m-14,a-14,g,l)}}var k=bi.acorn.parse("async () => {\n"+c+"\n}",h);if(k.loc)var n=k.loc.constructor;k={body:k.body[0].expression.body.body,sourceType:"module",type:"Program"};bi.AllNodesVisitor.run(k,function(b,d,m){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(m=b.loc,d=m.start,m=m.end,b.loc=new n(h,{column:d.column,line:d.line-1},{column:m.column,line:m.line-1}));h.addSource&&
!b.source&&(b.source=c.slice(b.start,b.end))}});k.start=k.body[0].start;k.end=bi.arr.last(k.body).end;h.addSource&&(k.source=c);k.body[0].loc&&n&&(k.loc=new n(h,k.body[0].loc.start,bi.arr.last(k.body).loc.end));return k};bi.parse=ye;bi.arr=ng;bi.acorn=mv;bi.loose=mM;bi.walk=ot;bi.addAstIndex=Xo;bi.findNodesIncluding=sr;bi.custom=Yy;bi.AllNodesVisitor=pt;bi.walk=ot;bi.walk=ot;bi.parse=ye;bi.parse=ye;bi.parseFunction=cn;bi.parseFunction=cn;bi.fuzzyParse=ao;bi.fuzzyParse=ao;bi.addSource=Ul;bi.addSource=
Ul;bi.custom.addSource=bi.addSource;var Jh=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");Jh.string=Li;Jh.Path=Ti;Jh.BaseVisitor=Ne;Jh.PrinterVisitor=hE;Jh.ComparisonVisitor=rl;Jh.stringify=Dm;Jh.addAstIndex=Xo;Jh.parse=ye;Jh.addSource=Ul;Jh.methods={withMozillaAstDo:function(c,h,e){var k=new Jh.BaseVisitor,n=k.accept;k.accept=function(b,d,m){h=e(function(){n.call(k,b,d,m)},b,d,m);return b};k.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var e=h.printSource||
!1,k=h.printPositions||!1,n=h.printIndex||!1,b=[];if("string"===typeof c){var d=c;c=Jh.parse(c)}else d=h.source||c.source;e&&!c.source&&(d||(d=Jh.stringify(c),c=Jh.parse(d)),Jh.addSource(c,d));(new Jh.PrinterVisitor).accept(c,{index:0,tree:b},[]);return Jh.string.printTree(b[0],function(m){var a=m.path+":"+m.node.type,g=[];n&&g.push(m.index);k&&g.push(m.node.start+"-"+m.node.end);e&&(m=m.node.source||d.slice(m.node.start,m.node.end),m=Jh.string.print(m.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),g.push(m));g.length&&(a+="("+g.join(",")+")");return a},function(m){return m.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var e={completePath:[],comparisons:{errors:[]}};(new Jh.ComparisonVisitor).accept(c,h,e,[]);return e.comparisons.errors.length?e.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,e){c.astIndex||Jh.addAstIndex(c);e=new Jh.BaseVisitor;var k=null;(e.accept=function(n,b,d,m){if(!k)return b=b.concat(m),n.astIndex===
h&&(k={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,d,m)}).call(e,c,[],{},[]);return k},rematchAstWithSource:function(c,h,e,k){e=!!e;h=Jh.parse(h,e?{locations:!0}:void 0);var n=new Jh.BaseVisitor;k&&(h=Jh.Path(k).get(h));n.accept=function(b,d,m){m=m||[];var a=m.reduce(function(g,l){return g[l]},c);a.start=b.start;a.end=b.end;e&&(a.loc=b.loc);return this["visit"+b.type](b,d,m)};n.accept(h)}};Jh.withMozillaAstDo=Jh.methods.withMozillaAstDo;
Jh.printAst=Jh.methods.printAst;Jh.compareAst=Jh.methods.compareAst;Jh.pathToNode=Jh.methods.pathToNode;Jh.rematchAstWithSource=Jh.methods.rematchAstWithSource;var qB=Jh.withMozillaAstDo,kH=Jh.printAst,lH=Jh.compareAst,mH=Jh.pathToNode,nH=Jh.rematchAstWithSource;Jh.BaseVisitor=Ne;Jh.BaseVisitor=Ne;Jh.withMozillaAstDo=qB;Jh.withMozillaAstDo=qB;Jh.printAst=kH;Jh.printAst=kH;Jh.compareAst=lH;Jh.compareAst=lH;Jh.pathToNode=mH;Jh.pathToNode=mH;Jh.rematchAstWithSource=nH;Jh.rematchAstWithSource=nH;var Af=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");Af.isIdentifier=Uf;Af.id=Ra;Af.literal=Em;Af.exprStmt=Yo;Af.returnStmt=tr;Af.empty=Rx;Af.binaryExpr=aA;Af.funcExpr=lw;Af.funcCall=rq;Af.varDecl=Xj;Af.member=Zo;Af.memberChain=ol;Af.assign=sq;Af.block=xo;Af.program=ru;Af.tryStmt=Fm;Af.prop=Sx;Af.objectLiteral=An;Af.ifStmt=Gm;Af.forIn=su;Af.conditional=tu;Af.logical=bA;Af.isIdentifier=Uf;Af.isIdentifier=Uf;Af.id=Ra;Af.id=Ra;Af.literal=Em;Af.literal=Em;Af.objectLiteral=An;Af.objectLiteral=
An;Af.prop=Sx;Af.prop=Sx;Af.exprStmt=Yo;Af.exprStmt=Yo;Af.returnStmt=tr;Af.returnStmt=tr;Af.empty=Rx;Af.empty=Rx;Af.binaryExpr=aA;Af.binaryExpr=aA;Af.funcExpr=lw;Af.funcExpr=lw;Af.funcCall=rq;Af.funcCall=rq;Af.varDecl=Xj;Af.varDecl=Xj;Af.member=Zo;Af.member=Zo;Af.memberChain=ol;Af.memberChain=ol;Af.assign=sq;Af.assign=sq;Af.block=xo;Af.block=xo;Af.program=ru;Af.program=ru;Af.tryStmt=Fm;Af.tryStmt=Fm;Af.ifStmt=Gm;Af.ifStmt=Gm;Af.forIn=su;Af.forIn=su;Af.conditional=tu;Af.conditional=tu;Af.logical=bA;
Af.logical=bA;Af.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var $w=Object.freeze({__proto__:null,isIdentifier:Uf,id:Ra,literal:Em,objectLiteral:An,prop:Sx,exprStmt:Yo,returnStmt:tr,empty:Rx,binaryExpr:aA,funcExpr:lw,funcCall:rq,varDecl:Xj,member:Zo,memberChain:ol,assign:sq,block:xo,program:ru,tryStmt:Fm,ifStmt:Gm,forIn:su,conditional:tu,logical:bA}),ge=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");ge.scopes=mw;ge.nodesAtIndex=DC;ge.scopesAtIndex=cj;ge.scopeAtIndex=
EC;ge.scopesAtPos=FC;ge.nodesInScopeOf=Gs;ge.declarationsOfScope=GC;ge.declarationsWithIdsOfScope=function(c){var h=ge.helpers.declIds(c.params).concat(c.catches),e=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(ge.arr.filter(c.funcDecls,function(k){return k.id})),$jscomp.arrayFromIterable(ge.arr.filter(c.classDecls,function(k){return k.id})));return h.map(function(k){return[k,k]}).concat(e.map(function(k){return[k,k.id]})).concat(ge.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(k){return[ge.statementOf(c.node,
k),k]}))};ge._declaredVarNames=ur;ge._findJsLintGlobalDeclarations=Ep;ge.topLevelFuncDecls=tq;ge.resolveReference=uq;ge.resolveReferences=Hm;ge.refWithDeclAt=HC;ge.topLevelDeclsAndRefs=dn;ge.findGlobalVarRefs=Zk;ge.findNodesIncludingLines=Tx;ge.__varDeclIdsFor=function(c,h){for(var e=[],k=$jscomp.makeIterator(c.params),n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&e.push(n);k=$jscomp.makeIterator(c.funcDecls);for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&e.push(n.id);k=$jscomp.makeIterator(c.classDecls);
for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&e.push(n.id);k=$jscomp.makeIterator(c.importSpecifiers);for(n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&e.push(n);c=$jscomp.makeIterator(ge.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&e.push(n);return e};ge.findReferencesAndDeclsInScope=vr;ge.findDeclarationClosestToIndex=Ux;ge.nodesAt=uu;ge.statementOf=bo;ge.imports=wr;ge.exports=nw;ge.arr=ng;ge.chain=hm;ge.num=sm;ge.tree=hu;ge.fun=xn;ge.obj=
Ng;ge.BaseVisitor=Ne;ge.ScopeVisitor=wk;ge.FindToplevelFuncDeclVisitor=rB;ge.withMozillaAstDo=qB;ge.parse=ye;ge.acorn=mv;ge.walk=ot;ge.custom=Yy;ge.stringify=Dm;ge.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var e=0;e<c.length;e++){var k=c[e];if(k)if("Identifier"===k.type)h.push(k);else if("RestElement"===k.type)h.push(k.argument);else if("AssignmentPattern"===k.type)ge.helpers.declIds([k.left],h);else if("ObjectPattern"===k.type)for(var n=0;n<k.properties.length;n++){var b=k.properties[n];
ge.helpers.declIds([b.value||b],h)}else"ArrayPattern"===k.type&&ge.helpers.declIds(k.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var e=c.next();!e.done;e=c.next()){e=$jscomp.makeIterator(e.value.declarations);for(var k=e.next();!k.done;k=e.next()){k=k.value;for(var n=$jscomp.makeIterator(ge.helpers.declIds([k.id])),b=n.next();!b.done;b=n.next())h.push([k,b.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var e=c.next();!e.done;e=c.next()){e=$jscomp.makeIterator(e.value.declarations);for(var k=e.next();!k.done;k=e.next())ge.helpers.declIds([k.value.id],h)}return h},objPropertiesAsList:function(c,h,e,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,d={key:h.concat([b]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":e||k.push(d);for(d=0;d<n.value.elements.length;d++)ge.helpers.objPropertiesAsList(n.value.elements[d],
h.concat([b,d]),e,k);break;case "ObjectExpression":case "ObjectPattern":e||k.push(d);ge.helpers.objPropertiesAsList(n.value,h.concat([b]),e,k);break;case "AssignmentPattern":e||k.push(d);ge.helpers.objPropertiesAsList(n.left,h.concat([b]),e,k);break;default:k.push(d)}}return k},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};ge.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
ge.globalDeclRe=/^\s*global\s*/;ge._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var nM=ge.helpers,BU=ge.knownGlobals;
ge.helpers=nM;ge.helpers=nM;ge.knownGlobals=BU;ge.knownGlobals=BU;ge.scopes=mw;ge.scopes=mw;ge.nodesAtIndex=DC;ge.nodesAtIndex=DC;ge.scopesAtIndex=cj;ge.scopesAtIndex=cj;ge.scopeAtIndex=EC;ge.scopeAtIndex=EC;ge.scopesAtPos=FC;ge.scopesAtPos=FC;ge.nodesInScopeOf=Gs;ge.nodesInScopeOf=Gs;ge.declarationsOfScope=GC;ge.declarationsOfScope=GC;ge._declaredVarNames=ur;ge._declaredVarNames=ur;ge._findJsLintGlobalDeclarations=Ep;ge._findJsLintGlobalDeclarations=Ep;ge.topLevelDeclsAndRefs=dn;ge.topLevelDeclsAndRefs=
dn;ge.topLevelFuncDecls=tq;ge.topLevelFuncDecls=tq;ge.findGlobalVarRefs=Zk;ge.findGlobalVarRefs=Zk;ge.findNodesIncludingLines=Tx;ge.findNodesIncludingLines=Tx;ge.findReferencesAndDeclsInScope=vr;ge.findReferencesAndDeclsInScope=vr;ge.findDeclarationClosestToIndex=Ux;ge.findDeclarationClosestToIndex=Ux;ge.nodesAt=uu;ge.nodesAt=uu;ge.statementOf=bo;ge.statementOf=bo;ge.resolveReferences=Hm;ge.resolveReferences=Hm;ge.refWithDeclAt=HC;ge.refWithDeclAt=HC;ge.imports=wr;ge.imports=wr;ge.exports=nw;ge.exports=
nw;var rt=Object.freeze({__proto__:null,helpers:nM,knownGlobals:BU,scopes:mw,nodesAtIndex:DC,scopesAtIndex:cj,scopeAtIndex:EC,scopesAtPos:FC,nodesInScopeOf:Gs,declarationsOfScope:GC,_declaredVarNames:ur,_findJsLintGlobalDeclarations:Ep,topLevelDeclsAndRefs:dn,topLevelFuncDecls:tq,findGlobalVarRefs:Zk,findNodesIncludingLines:Tx,findReferencesAndDeclsInScope:vr,findDeclarationClosestToIndex:Ux,nodesAt:uu,statementOf:bo,resolveReferences:Hm,refWithDeclAt:HC,imports:wr,exports:nw});Ba("bz",rt);var vq=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");vq.objectSpreadTransform=vu;vq.Visitor=Ne;vq.funcCall=rq;vq.member=Zo;var oM=function(){return vq.Visitor.apply(this,arguments)||this};$jscomp.inherits(oM,vq.Visitor);oM.prototype.accept=function(c,h,e){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return vq.Visitor.prototype.accept.call(this,c,h,e)};oM.prototype.transformSpreadElement=function(c){var h=[],e=[h];c.properties.forEach(function(k){"SpreadElement"!==
k.type?h.push(k):(e.push(k),h=[],e.push(h))});if(1===e.length)return c;h.length||e.pop();return vq.funcCall.apply(vq,[vq.member("Object","assign")].concat($jscomp.arrayFromIterable(e.map(function(k){return"SpreadElement"===k.type?k.argument:{properties:k,type:"ObjectExpression"}}))))};vq.ObjectSpreadTransformer=oM;vq.default=vu;var De=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");De._node2string=function(c){return c.source||De.stringify(c)};De._findIndentAt=function(c,h){var e=
De.string.peekLeft(c,h,/\s+$/);c="number"===typeof e?c.slice(e,h):"";"\n"===c[0]&&(c=c.slice(1));return c};De._applyChanges=function(c,h){for(var e=0;e<c.length;e++){var k=c[e];if("del"===k.type)h=h.slice(0,k.pos)+h.slice(k.pos+k.length);else if("add"===k.type)h=h.slice(0,k.pos)+k.string+h.slice(k.pos);else throw Error("Unexpected change "+De.obj.inspect(k));}return h};De._compareNodesForReplacement=en;De.replaceNode=xr;De.replaceNodes=cA;De.replace=IC;De.__findVarDecls=qJ;De.oneDeclaratorPerVarDecl=
Fp;De.oneDeclaratorForVarsInDestructoring=Vx;De.returnLastStatement=ow;De.wrapInFunction=Wx;De.wrapInStartEndCall=JC;De.transformSingleExpression=dA;De.arr=ng;De.obj=Ng;De.string=Li;De.chain=hm;De.Path=Ti;De.helpers=nM;De.scopes=mw;De.topLevelDeclsAndRefs=dn;De.topLevelFuncDecls=tq;De.parse=ye;De.fuzzyParse=ao;De.objectSpreadTransform=vu;De.varDecl=Xj;De.memberChain=ol;De.id=Ra;De.exprStmt=Yo;De.funcCall=rq;De.returnStmt=tr;De.tryStmt=Fm;De.program=ru;De.block=xo;De.funcExpr=lw;De.stringify=Dm;De.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;De.replaceNode=xr;De.replaceNode=xr;De.replaceNodes=cA;De.replaceNodes=cA;De.replace=IC;De.replace=IC;De._compareNodesForReplacement=en;De._compareNodesForReplacement=en;De.oneDeclaratorPerVarDecl=Fp;De.oneDeclaratorPerVarDecl=Fp;De.oneDeclaratorForVarsInDestructoring=Vx;De.oneDeclaratorForVarsInDestructoring=Vx;De.returnLastStatement=ow;De.returnLastStatement=ow;De.wrapInFunction=Wx;De.wrapInFunction=Wx;De.wrapInStartEndCall=JC;De.wrapInStartEndCall=JC;De.transformSingleExpression=
dA;De.transformSingleExpression=dA;De.objectSpreadTransform=vu;De.objectSpreadTransform=vu;var sB=Object.freeze({__proto__:null,replaceNode:xr,replaceNodes:cA,replace:IC,_compareNodesForReplacement:en,oneDeclaratorPerVarDecl:Fp,oneDeclaratorForVarsInDestructoring:Vx,returnLastStatement:ow,wrapInFunction:Wx,wrapInStartEndCall:JC,transformSingleExpression:dA,objectSpreadTransform:vu});Ba("bv",sB);var Dg=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Dg.getCommentPrecedingNode=Hs;Dg.extractComments=
Is;Dg.obj=Ng;Dg.string=Li;Dg.Path=Ti;Dg.chain=hm;Dg.arr=ng;Dg.fun=xn;Dg.parse=ye;Dg.statementOf=bo;Dg.Visitor=Ne;Dg.stringify=Dm;Dg.getCommentPrecedingNode=Hs;Dg.getCommentPrecedingNode=Hs;Dg.extractComments=Is;Dg.extractComments=Is;var pM=Object.freeze({__proto__:null,getCommentPrecedingNode:Hs,extractComments:Is}),wi=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");wi.findDecls=wu;wi.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(wi.arr.compact(c.body.body.map(function(e,k){return wi.es6ClassMethod(e,h,k)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};wi.es6ClassMethod=function(c,h,e){if("MethodDefinition"!==c.type)return null;var k;"constructor"===c.kind?k="class-constructor":"method"===c.kind?k=c.static?"class-class-method":"class-instance-method":"get"===c.kind?k=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(k=c.static?"class-class-setter":"class-instance-setter");return k?{type:k,parent:h,node:c,name:c.key.name}:null};wi.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],e={};c=$jscomp.makeIterator(wi.withVarDeclIds(c));for(var k=c.next();!k.done;e={$jscomp$loop$prop$def$2224:e.$jscomp$loop$prop$def$2224},k=c.next())if(k=k.value,e.$jscomp$loop$prop$def$2224={name:k.id.name,node:k.node,type:"var-decl"},h.push(e.$jscomp$loop$prop$def$2224),e.$jscomp$loop$prop$def$2224.node.init){for(k=
e.$jscomp$loop$prop$def$2224.node.init;"AssignmentExpression"===k.type;)k=k.right;if("ObjectExpression"===k.type)e.$jscomp$loop$prop$def$2224.type="object-decl",e.$jscomp$loop$prop$def$2224.children=wi.objectKeyValsAsDefs(k).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2224})}}(e)),h.push.apply(h,$jscomp.arrayFromIterable(e.$jscomp$loop$prop$def$2224.children));else if(k=wi.someObjectExpressionCall(k,e.$jscomp$loop$prop$def$2224))e.$jscomp$loop$prop$def$2224.children=
k.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2224})}}(e)),h.push.apply(h,$jscomp.arrayFromIterable(e.$jscomp$loop$prop$def$2224.children))}return h};wi.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};wi.someObjectExpressionCall=function(c,h){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(e){return"ObjectExpression"===
e.type}))?wi.objectKeyValsAsDefs(c,h):null};wi.functionWrapper=function(c,h){if(!wi.isFunctionWrapper(c))return null;var e=wi.Path("expression.arguments.0").get(c);h=e&&"FunctionExpression"===e.type&&5<wi.string.lines(e.source||"").length?wi.findDecls(e,h):wi.findDecls(wi.Path("expression.callee").get(c),h);var k={node:c,name:wi.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||(n.parent=k)});return h};wi.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};wi.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(e){return{name:e.key.name||e.key.value,type:"FunctionExpression"===e.value.type?"method":"property",node:e,parent:h}})};wi.isFunctionWrapper=function(c){return"CallExpression"===wi.Path("expression.type").get(c)&&"FunctionExpression"===wi.Path("expression.callee.type").get(c)};wi.declIds=yr;wi.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&
h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};wi.parse=ye;wi.arr=ng;wi.Path=Ti;wi.string=Li;wi.obj=Ng;wi.findDecls=wu;wi.findDecls=wu;var oH=Object.freeze({__proto__:null,findDecls:wu}),Rg=lively.FreezerRuntime.recorderFor("lively.ast/index.js");Rg.isValidIdentifier=Xx;Rg.BaseVisitor=Ne;Rg.BaseVisitor=Ne;Rg.withMozillaAstDo=qB;Rg.withMozillaAstDo=qB;Rg.printAst=kH;Rg.printAst=kH;Rg.compareAst=lH;Rg.compareAst=lH;Rg.pathToNode=mH;Rg.pathToNode=mH;Rg.rematchAstWithSource=
nH;Rg.rematchAstWithSource=nH;Rg.ReplaceManyVisitor=cs;Rg.ReplaceManyVisitor=cs;Rg.ReplaceVisitor=qt;Rg.ReplaceVisitor=qt;Rg.AllNodesVisitor=pt;Rg.AllNodesVisitor=pt;Rg.parse=ye;Rg.parse=ye;Rg.parseFunction=cn;Rg.parseFunction=cn;Rg.fuzzyParse=ao;Rg.fuzzyParse=ao;Rg.acorn=mv;Rg.walk=ot;Rg.custom=Yy;Rg.stringify=Dm;Rg.escodegen=jE;Rg.escodegen=jE;Rg.escodegen=jE;Rg.acorn=mv;Rg.acorn=mv;Rg.walk=ot;Rg.walk=ot;Rg.nodes=$w;Rg.query=rt;Rg.transform=sB;Rg.comments=pM;Rg.categorizer=oH;Rg.query=rt;Rg.query=
rt;Rg.transform=sB;Rg.transform=sB;Rg.comments=pM;Rg.comments=pM;Rg.categorizer=oH;Rg.categorizer=oH;Rg.stringify=Dm;Rg.stringify=Dm;Rg.nodes=$w;Rg.nodes=$w;Rg.custom=Yy;Rg.custom=Yy;Rg.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
Rg.isValidIdentifier=Xx;Rg.isValidIdentifier=Xx;Rg.parse=ye;Rg.Node=Rg.parse("").constructor;Object.defineProperty(Rg.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var x8=Object.freeze({__proto__:null,BaseVisitor:Ne,withMozillaAstDo:qB,printAst:kH,compareAst:lH,pathToNode:mH,rematchAstWithSource:nH,ReplaceManyVisitor:cs,ReplaceVisitor:qt,AllNodesVisitor:pt,parse:ye,parseFunction:cn,fuzzyParse:ao,escodegen:jE,acorn:mv,walk:ot,query:rt,
transform:sB,comments:pM,categorizer:oH,stringify:Dm,nodes:$w,custom:Yy,isValidIdentifier:Xx});Ba("bt",x8);var xi=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");xi.getGlobal=Im;xi.signatureOf=Js;xi.isClass=xu;xi.pluck=zr;xi.printSymbol=wq;xi.safeToString=yu;xi.printEvalResult=Ar;xi.obj=Ng;xi.string=Li;xi.getGlobal=Im;xi.getGlobal=Im;xi.signatureOf=Js;xi.signatureOf=Js;xi.isClass=xu;xi.isClass=xu;xi.pluck=zr;xi.pluck=zr;xi.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();xi.symMatcher=/^Symbol\((.*)\)$/;xi.printSymbol=wq;xi.printSymbol=wq;xi.safeToString=yu;xi.safeToString=yu;xi.printEvalResult=Ar;xi.printEvalResult=Ar;var CU=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||xi.safeToString(n);if(!xi.obj.isObject(n))return xi.safeToString(n);
try{var d=xi.obj.inspect(n,{customPrinter:e,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(m){}return"{}"===d?xi.safeToString(n):d}function h(n,b){if("string"===typeof n||Array.isArray(n)||!k||"function"!==typeof n[k])return b;var d="function"===typeof n.entries,m=d?n.entries():n[k](),a=[];b=d?"{":"[";var g=d?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,r;10>l;l++){r=m.next();if(r.done)break;a.push(r.value)}m=a.map(function(v){return d?String(v[0])+": "+String(v[1]):
c(v,2)}).join(", ");return n+"("+b+m+g+")"}function e(n,b,d){if(!n)return b;if("symbol"===typeof n)return xi.printSymbol(n);if("string"===typeof n)return xi.string.print(xi.string.truncate(n,100));if(n.isMorph)return xi.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return xi.safeToString(n);var m=n.length||n.byteLength;if(void 0!==m&&10<m&&n.slice)return"["+("string"===typeof n||n.byteLength?
xi.safeToString(n.slice(0,10)):n.slice(0,10).map(d))+",...]";n=h(n,b);return n!==b?n:b}var k="undefined"!==typeof Symbol&&Symbol.iterator;return c}();xi.printInspectEvalValue=CU;xi.printInspectEvalValue=CU;xi.printInspectEvalValue=CU;var gj=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");gj.getObjectForCompletion=pw;gj.propertyExtract=function(c,h,e){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(gj.printSymbol)).filter(function(k){return-1===c.indexOf(k)}).map(e).filter(function(k){return!!k}).sort(function(k,
n){return k.name<n.name?-1:k.name>n.name?1:0})};gj.getMethodsOf=function(c,h){return gj.propertyExtract(c,h,function(e){return h.__lookupGetter__&&h.__lookupGetter__(e)||"function"!==typeof h[e]?null:{name:e,completion:gj.signatureOf(e,h[e])}})};gj.getAttributesOf=function(c,h){return gj.propertyExtract(c,h,function(e){return h.__lookupGetter__&&!h.__lookupGetter__(e)&&"function"===typeof h[e]?null:{name:e,completion:e}})};gj.getProtoChain=function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};
gj.getDescriptorOf=function(c,h){function e(k,n){k.length>n&&(k=k.slice(0,n)+"...");return k.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return e(gj.safeToString(c),50);h=c.toString();h=e(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return gj.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?e(c.type,50):"string"===typeof c.name&&c.name.length?e(c.name,50):"anonymous class":
"prototype"};gj.getCompletionsOfObj=function(c,h){try{var e=[];var k=gj.getProtoChain(c).map(function(b){var d=gj.getDescriptorOf(c,b);b=gj.getMethodsOf(e,b).concat(gj.getAttributesOf(e,b));e=e.concat(gj.pluck(b,"name"));return[d,gj.pluck(b,"completion")]})}catch(b){var n=b}h(n,k)};gj.descriptorsOfObjAndProtoProperties=function(c){var h=[];return gj.getProtoChain(c).map(function(e){var k=gj.getDescriptorOf(c,e);e=gj.getMethodsOf(h,e).concat(gj.getAttributesOf(h,e));h=h.concat(gj.pluck(e,"name"));
return[k,gj.pluck(e,"completion")]})};gj.getCompletions=Jm;gj.lang=l8;gj.signatureOf=Js;gj.pluck=zr;gj.safeToString=yu;gj.printSymbol=wq;gj.getObjectForCompletion=pw;gj.getObjectForCompletion=pw;gj.getCompletions=Jm;gj.getCompletions=Jm;var pH=Object.freeze({__proto__:null,getObjectForCompletion:pw,getCompletions:Jm});Ba("aP",pH);var Ac=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");Ac.rewriteToCaptureTopLevelVariables=Yx;Ac.transformImportMeta=function(c,h){return Ac.ReplaceVisitor.run(c,
function(e){return"MetaProperty"==e.type&&"import"==e.meta.name?Ac.parse("({url: _context.id})").body[0].expression:e})};Ac.rewriteToRegisterModuleToCaptureSetters=zu;Ac.clearEmptyExports=function(c,h){h=Ac.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var e=h.next();!e.done;e=h.next())e=e.value,e.declaration||!e.specifiers||e.specifiers.length||Ac.arr.remove(c.body,e);return c};Ac.replaceRefs=function(c,h){var e=Ac.topLevelDeclsAndRefs(c),k=e.refs.filter(function(b){return Ac.shouldRefBeCaptured(b,
e,h)}),n=[];c=Ac.ReplaceVisitor.run(c,function(b,d){if("Property"===b.type&&k.includes(b.key)&&b.shorthand)return Ac.prop(Ac.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){d=b.declaration;var m=b.specifiers;d&&(d.id?n.push(d.id):d.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(d.declarations.map(function(a){return a.id}))));m&&m.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&k.includes(b.left)&&h.declarationWrapper?Object.assign({},
b,{right:Ac.declarationWrapperCall(h.declarationWrapper,null,Ac.literal(b.left.name),Ac.literal("assignment"),b.right,h.captureObj,h)}):b});return Ac.ReplaceVisitor.run(c,function(b,d,m){return k.includes(b)&&!n.includes(b)?Ac.member(h.captureObj,b):b})};Ac.replaceVarDecls=function(c,h){var e=Ac.topLevelDeclsAndRefs(c);return Ac.ReplaceManyVisitor.run(c,function(k){if(!e.varDecls.includes(k)||k.declarations.every(function(l){return!Ac.shouldDeclBeCaptured(l,h)}))return k;for(var n=[],b=0;b<k.declarations.length;b++){var d=
k.declarations[b];if(Ac.shouldDeclBeCaptured(d,h)){var m=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};m=h.declarationWrapper&&d.id.name?Ac.declarationWrapperCall(h.declarationWrapper,d,Ac.literal(d.id.name),Ac.literal(k.kind),m,h.captureObj,h):m;if(d.id.type.includes("Pattern")){var a=Ac.generateUniqueName(e.declaredNames,"destructured_1"),g={type:"Identifier",name:a};d=Ac.transformPattern(d.id,
{parent:g,declaredNames:e.declaredNames}).map(function(l){return l[Ac.annotationSym]&&l[Ac.annotationSym].capture?Ac.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?Ac.declarationWrapperCall(h.declarationWrapper,null,Ac.literal(l.declarations[0].id.name),Ac.literal(k.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});e.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([Ac.varDecl(g,m,k.kind)].concat(d)))}else n.push(Ac.assignExpr(h.captureObj,
d.id,m,!1)),h.keepTopLevelVarDecls&&n.push(Ac.varDecl(d.id,Ac.member(h.captureObj,d.id)))}else n.push({type:"VariableDeclaration",kind:k.kind||"var",declarations:[d]})}return n})};Ac.generateUniqueName=function(c,h){for(var e=1;-1<c.indexOf(h);){if(1E3<e)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++e)}return h};Ac.additionalIgnoredDecls=function(c,h){h=Ac.topLevelDeclsAndRefs(c);for(var e=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],
b=Ac.Path(h.scope.varDeclPaths[k]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||e.push.apply(e,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(e.map(function(d){return d.id.name}))};Ac.additionalIgnoredRefs=function(c,h){h=Ac.topLevelDeclsAndRefs(c);for(var e=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],b=Ac.Path(h.scope.varDeclPaths[k]).slice(0,
-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||e.push.apply(e,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(Ac.queryHelpers.declIds(e.map(function(d){return d.id})).map(function(d){return d.name}))};Ac.shouldDeclBeCaptured=function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};Ac.shouldRefBeCaptured=function(c,h,e){if(h.scope.importSpecifiers.includes(c))return!1;
for(var k=0;k<h.scope.exportDecls.length;k++){var n=h.scope.exportDecls[k];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return e.excludeRefs.includes(c.name)||e.includeRefs&&!e.includeRefs.includes(c.name)?!1:!0};Ac.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,h.classToFunction);var e=Ac.topLevelDeclsAndRefs(c);if(!e.classDecls.length)return c;for(var k=c.body.length-1;0<=k;k--){var n=c.body[k];n.id&&e.classDecls.includes(n)&&
c.body.splice(k+1,0,Ac.assignExpr(h.captureObj,n.id,n.id,!1))}return c};Ac.splitExportDeclarations=function(c,h){h=c.body;for(var e=c.body=[],k=0;k<h.length;k++){var n=h[k];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)e.push(n);else for(var b=n.declaration.declarations,d=0;d<b.length;d++)e.push({type:"ExportNamedDeclaration",specifiers:[],declaration:Ac.varDecl(b[d].id,b[d].init,n.declaration.kind)})}return c};
Ac.insertCapturesForExportedImports=Zx;Ac.insertCapturesForExportDeclarations=function(c,h){for(var e=[],k=0;k<c.body.length;k++){var n=c.body[k];e.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,d=Ac.generateUniqueName(Ac.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=Ac.id(d);Ac.arr.pushAt(e,Ac.assignExpr(h.captureObj,
d,b.raw,!1),e.indexOf(n))}else n.declaration.declarations?e.push.apply(e,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(m){var a=m.id;h.declarationWrapper&&(m.init.callee&&m.init.callee.name===h.declarationWrapper.name||(a=Ac.declarationWrapperCall(h.declarationWrapper,m,Ac.literal(m.id.name),Ac.literal("assignment"),m.id,h.captureObj,h)));return Ac.assignExpr(h.captureObj,m.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&e.push(Ac.assignExpr(h.captureObj,
n.declaration.id,n.declaration.id,!1))}c.body=e;return c};Ac.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(e,k){return e.concat("ImportDeclaration"===k.type&&k.specifiers.length?[k].concat(k.specifiers.map(function(n){return Ac.assignExpr(h.captureObj,n.local,n.local,!1)})):[k])},[]);return c};Ac.insertDeclarationsForExports=function(c,h){for(var e=Ac.topLevelDeclsAndRefs(c),k=[],n=0;n<c.body.length;n++){var b=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===
b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?k=k.concat([Ac.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:Ac.member(h.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?k.push(b):k=k.concat(b.specifiers.map(function(d){return e.declaredNames.includes(d.local.name)?null:Ac.varDeclOrAssignment(c,{type:"VariableDeclarator",id:d.local,init:Ac.member(h.captureObj,
d.local)})}).filter(Boolean)).concat(b)}c.body=k;return c};Ac.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var e=0;e<c.body.length;e++){var k=c.body[e];"ExportDefaultDeclaration"===k.type&&"FunctionDeclaration"===k.declaration.type&&k.declaration.id&&k.declaration.async&&(h.push(k.declaration),k.declaration={type:"Identifier",name:k.declaration.id.name});h.push(k)}c.body=h;return c};Ac.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(e,k){if("ExportNamedDeclaration"===
k.type)if(k.source){var n=d=k.source;var b=k.specifiers.map(function(m){return{type:"ExpressionStatement",expression:Ac.exportFromImport({type:"Literal",value:m.exported.name},{type:"Literal",value:m.local.name},d,h.moduleExportFunc,h.moduleImportFunc)}})}else b=k.declaration?(b=k.declaration.declarations)?b.map(function(m){h.excludeDecls.push(m.id);return Ac.varDecl(m.id,Ac.assignExpr(h.captureObj,m.id,h.declarationWrapper?Ac.declarationWrapperCall(h.declarationWrapper,null,Ac.literal(m.id.name),
Ac.literal(k.declaration.kind),m,h.captureObj,h):m.init,!1),k.declaration.kind)}).concat(b.map(function(m){return Ac.exportCallStmt(h.moduleExportFunc,m.id.name,m.id)})):[k.declaration].concat(Ac.exportCallStmt(h.moduleExportFunc,k.declaration.id.name,k.declaration.id)):k.specifiers.map(function(m){return Ac.exportCallStmt(h.moduleExportFunc,m.exported.name,Ac.shouldDeclBeCaptured({id:m.local},h)?Ac.member(h.captureObj,m.local):m.local)});else if("ExportDefaultDeclaration"===k.type)b=k.declaration&&
k.declaration.id?[k.declaration].concat(Ac.exportCallStmt(h.moduleExportFunc,"default",k.declaration.id)):[Ac.exportCallStmt(h.moduleExportFunc,"default",k.declaration)];else if("ExportAllDeclaration"===k.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=k.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",expression:Ac.exportFromImport(n,n,d,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",
id:n,init:null}]},right:Ac.importCall(null,d,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else b="ImportDeclaration"===k.type?k.specifiers.length?k.specifiers.map(function(m){return Ac.varDeclAndImportCall(c,m.local,"ImportSpecifier"===m.type&&m.imported.name||"ImportDefaultSpecifier"===m.type&&"default"||null,k.source,h.moduleImportFunc)}):Ac.importCallStmt(null,k.source,h.moduleImportFunc):[k];return e.concat(b)},[]);return c};Ac.putFunctionDeclsInFront=function(c,
h){var e=Ac.topLevelDeclsAndRefs(c).scope,k=e.funcDecls;if(!k.length)return c;for(var n=[],b=k.length;b--;){var d=k[b];if(d.id&&Ac.shouldDeclBeCaptured(d,h)){var m=e.funcDeclPaths[b].slice(0,-1),a=Ac.Path(m).get(e.node);m={type:"Identifier",name:d.id.name};var g=h.declarationWrapper?Ac.declarationWrapperCall(h.declarationWrapper,d,Ac.literal(m.name),Ac.literal("function"),m,h.captureObj,h):m,l=Object.assign({},d);Array.isArray(a)?a.splice(a.indexOf(d),1,Ac.exprStmt(d.id)):"ExportNamedDeclaration"===
a.type?(a=e.node.body.indexOf(a),-1<a&&e.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=d.id);n.unshift(Ac.assignExpr(h.captureObj,m,g,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};Ac.computeDefRanges=function(c,h){c=Ac.topLevelDeclsAndRefs(c);return Ac.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(e){return e.id})).reduce(function(e,
k){e[k.id.name]||(e[k.id.name]=[]);e[k.id.name].push({type:k.type,start:k.start,end:k.end});return e},{})};Ac.transformPattern=function(c,h){return"ArrayPattern"===c.type?Ac.transformArrayPattern(c,h):"ObjectPattern"===c.type?Ac.transformObjectPattern(c,h):[]};Ac.transformArrayPattern=function(c,h){for(var e=h.declaredNames,k=Ac.annotationSym,n=[],b=0;b<c.elements.length;b++){var d=c.elements[b];if("Identifier"===d.type)d=Ac.varDecl(d,Ac.member(h.parent,Ac.id(b),!0)),d[k]={capture:!0},n.push(d);else if("RestElement"===
d.type)d=Ac.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:Ac.member(h.parent,Ac.id("slice"),!1)}),d[k]={capture:!0},n.push(d);else if("AssignmentPattern"==d.type)d=Ac.varDecl(d.left,Ac.conditional(Ac.binaryExpr(Ac.member(h.parent,Ac.id(b),!0),"===",Ac.id("undefined")),d.right,Ac.member(h.parent,Ac.id(b),!0))),d[k]={capture:!0},n.push(d);else{var m=Ac.id(Ac.generateUniqueName(e,h.parent.name+"$"+b)),a=Ac.varDecl(m,Ac.member(h.parent,b));e.push(m.name);n.push(a);
n.push.apply(n,$jscomp.arrayFromIterable(Ac.transformPattern(d,{parent:m,declaredNames:e})))}}return n};Ac.transformObjectPattern=function(c,h){for(var e=h.declaredNames,k=Ac.annotationSym,n=[],b=0;b<c.properties.length;b++){var d=c.properties[b];if("RestElement"==d.type){var m=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),a=Ac.nodes.varDecl(d.argument.name,Ac.nodes.objectLiteral([])),g=Ac.nodes.varDecl(d.argument.name,Ac.id(d.argument.name));d=Ac.nodes.exprStmt(Ac.nodes.funcCall(Ac.nodes.funcExpr({},
[],Ac.nodes.forIn("__key",h.parent,Ac.nodes.block.apply(Ac.nodes,[].concat($jscomp.arrayFromIterable(m.length?m.map(function(l){return Ac.nodes.ifStmt(Ac.nodes.binaryExpr(Ac.nodes.id("__key"),"===",Ac.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[Ac.nodes.exprStmt(Ac.nodes.assign(Ac.nodes.member(d.argument.name,Ac.nodes.id("__key"),!0),Ac.nodes.member(h.parent,Ac.nodes.id("__key"),!0)))]))))));g[k]={capture:!0};n.push(a,g,d)}else"Identifier"==d.value.type?(a=Ac.varDecl(d.value,
Ac.member(h.parent,d.key)),a[k]={capture:!0},n.push(a)):"AssignmentPattern"==d.value.type?(a=Ac.varDecl(d.value.left,Ac.conditional(Ac.binaryExpr(Ac.member(h.parent,d.key),"===",Ac.id("undefined")),d.value.right,Ac.member(h.parent,d.key))),a[k]={capture:!0},n.push(a)):(a=Ac.id(Ac.generateUniqueName(e,h.parent.name+"$"+d.key.name)),g=Ac.varDecl(a,Ac.member(h.parent,d.key)),g[k]={capture:!1},e.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([g].concat(Ac.transformPattern(d.value,{parent:a,declaredNames:e})))))}return n};
Ac.varDeclOrAssignment=function(c,h,e){return-1<Ac.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?Ac.exprStmt(Ac.assign(h.id,h.init)):{declarations:[h],kind:e||"var",type:"VariableDeclaration"}};Ac.assignExpr=function(c,h,e,k){return Ac.exprStmt(Ac.assign(Ac.member(c,h,k),e||Ac.id("undefined")))};Ac.exportFromImport=function(c,h,e,k,n){return Ac.exportCall(k,c,Ac.importCall(h,e,n))};Ac.varDeclAndImportCall=function(c,h,e,k,n){return Ac.varDecl(h,Ac.importCall(e,k,n))};Ac.importCall=function(c,
h,e){"string"===typeof c&&(c=Ac.literal(c));return{arguments:[h].concat(c||[]),callee:e,type:"CallExpression"}};Ac.importCallStmt=function(c,h,e){return Ac.exprStmt(Ac.importCall(c,h,e))};Ac.exportCall=function(c,h,e){"string"===typeof h&&(h=Ac.literal(h));e=Ac.obj.deepCopy(e);return Ac.funcCall(c,h,e)};Ac.exportCallStmt=function(c,h,e){return Ac.exprStmt(Ac.exportCall(c,h,e))};Ac.declarationWrapperCall=function(c,h,e,k,n,b,d){if(h){var m=[],a=!1;if(h["x-lively-object-meta"]){a=h["x-lively-object-meta"];
h=a.start;var g=a.end,l=a.evalId,r=a.sourceAccessorName;a=!0;m.push("start",Ac.nodes.literal(h),"end",Ac.nodes.literal(g))}void 0===l&&d.hasOwnProperty("evalId")&&(l=d.evalId,a=!0);void 0===r&&d.hasOwnProperty("sourceAccessorName")&&(r=d.sourceAccessorName,a=!0);void 0!==l&&m.push("evalId",Ac.nodes.literal(l));r&&m.push("moduleSource",Ac.nodes.id(r));if(a)return Ac.funcCall(c,e,k,n,b,Ac.nodes.objectLiteral(m))}return Ac.funcCall(c,e,k,n,b)};Ac.obj=Ng;Ac.string=Li;Ac.chain=hm;Ac.arr=ng;Ac.fun=xn;Ac.Path=
Ti;Ac.parse=ye;Ac.stringify=Dm;Ac.query=rt;Ac.transform=sB;Ac.nodes=$w;Ac.Visitor=Ne;Ac.ReplaceManyVisitor=cs;Ac.ReplaceVisitor=qt;var nv=Ac.nodes;Ac.member=nv.member;Ac.prop=nv.prop;Ac.varDecl=nv.varDecl;Ac.assign=nv.assign;Ac.id=nv.id;Ac.literal=nv.literal;Ac.exprStmt=nv.exprStmt;Ac.conditional=nv.conditional;Ac.binaryExpr=nv.binaryExpr;Ac.funcCall=nv.funcCall;var y8=Ac.query;Ac.topLevelDeclsAndRefs=y8.topLevelDeclsAndRefs;Ac.queryHelpers=y8.helpers;var z8=Ac.transform;Ac.transformSingleExpression=
z8.transformSingleExpression;Ac.wrapInStartEndCall=z8.wrapInStartEndCall;Ac.rewriteToCaptureTopLevelVariables=Yx;Ac.rewriteToCaptureTopLevelVariables=Yx;Ac.rewriteToRegisterModuleToCaptureSetters=zu;Ac.rewriteToRegisterModuleToCaptureSetters=zu;Ac.insertCapturesForExportedImports=Zx;Ac.insertCapturesForExportedImports=Zx;Ac.annotationSym=Symbol("lively.ast-destructuring-transform");var qH=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Yx,rewriteToRegisterModuleToCaptureSetters:zu,
insertCapturesForExportedImports:Zx}),A8={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},wla=A8=A8["default"],xla={},B8=xla=Array.isArray,qM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,C8={};C8="object"==typeof qM&&qM&&qM.Object===Object&&qM;var yla={},zla="object"==typeof self&&self&&self.Object===Object&&self,tB=yla=C8||zla||Function("return this")(),Ala={},rM=Ala=tB.Symbol,Bla={},D8=Object.prototype,Cla=D8.hasOwnProperty,
Dla=D8.toString,rH=rM?rM.toStringTag:void 0,Ela=Bla=function(c){var h=Cla.call(c,rH),e=c[rH];try{c[rH]=void 0;var k=!0}catch(b){}var n=Dla.call(c);k&&(h?c[rH]=e:delete c[rH]);return n},E8={},Fla=Object.prototype.toString;E8=function(c){return Fla.call(c)};var Gla={},Hla=E8,F8=rM?rM.toStringTag:void 0,DU=Gla=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":F8&&F8 in Object(c)?Ela(c):Hla(c)},Ila={},EU=Ila=function(c){return null!=c&&"object"==typeof c},Jla={},Kla=Jla=function(c){return"string"==
typeof c||!B8(c)&&EU(c)&&"[object String]"==DU(c)},Lla={},FU=Lla=function(c){return c},Mla={},Nla=Mla=function(c){return"symbol"==typeof c||EU(c)&&"[object Symbol]"==DU(c)},Ola={},kE=Ola=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},Pla={},Qla=Pla=function(c){if(!kE(c))return!1;c=DU(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},G8={};G8=tB["__core-js_shared__"];var Rla={},GU=G8,H8=function(){var c=/[^.]+$/.exec(GU&&
GU.keys&&GU.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Sla=Rla=function(c){return!!H8&&H8 in c},I8={},Tla=Function.prototype.toString;I8=function(c){if(null!=c){try{return Tla.call(c)}catch(h){}return c+""}return""};var Ula={},Vla=I8,Wla=/^\[object .+?Constructor\]$/,Xla=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yla=Ula=function(c){return!kE(c)||
Sla(c)?!1:(Qla(c)?Xla:Wla).test(Vla(c))},J8={};J8=function(c,h){return null==c?void 0:c[h]};var Zla={},$la=J8,K8=Zla=function(c,h){c=$la(c,h);return Yla(c)?c:void 0},ama={},L8=ama=function(){try{var c=K8(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),bma={},M8=bma=function(c,h){var e=-1,k=c.length;for(h||(h=Array(k));++e<k;)h[e]=c[e];return h},cma={},N8=Object.create,HU=cma=function(){function c(){}return function(h){if(!kE(h))return{};if(N8)return N8(h);c.prototype=h;h=new c;c.prototype=
void 0;return h}}(),dma={},ema=/^(?:0|[1-9]\d*)$/,fma=dma=function(c,h){var e=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==e||"symbol"!=e&&ema.test(c))&&-1<c&&0==c%1&&c<h},gma={},O8=gma=function(c,h,e){switch(e.length){case 0:return c.call(h);case 1:return c.call(h,e[0]);case 2:return c.call(h,e[0],e[1]);case 3:return c.call(h,e[0],e[1],e[2])}return c.apply(h,e)},P8={};P8=function(c){return function(){return c}};var hma={},ima=P8,jma=hma=L8?function(c,h){return L8(c,"toString",{configurable:!0,
enumerable:!1,value:ima(h),writable:!0})}:FU,kma={},lma=Date.now,Q8=kma=function(c){var h=0,e=0;return function(){var k=lma(),n=16-(k-e);e=k;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},mma={},nma=mma=Q8(jma),oma={},R8=oma=K8(tB,"WeakMap"),pma={},qma=pma=function(c,h){for(var e=-1,k=null==c?0:c.length;++e<k&&!1!==h(c[e],e,c););return c},rma={},S8=0/0,sma=/^\s+|\s+$/g,tma=/^[-+]0x[0-9a-f]+$/i,uma=/^0b[01]+$/i,vma=/^0o[0-7]+$/i,wma=parseInt,xma=rma=function(c){if("number"==
typeof c)return c;if(Nla(c))return S8;kE(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=kE(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=c.replace(sma,"");var h=uma.test(c);return h||vma.test(c)?wma(c.slice(2),h?2:8):tma.test(c)?S8:+c},yma={},zma=yma=function(c,h,e,k){var n=c.length;for(e+=k?1:-1;k?e--:++e<n;)if(h(c[e],e,c))return e;return-1},T8={},U8=1/0;T8=function(c){if(!c)return 0===c?c:0;c=xma(c);return c===U8||c===-U8?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Ama={},Bma=T8,
V8=Ama=function(c){c=Bma(c);var h=c%1;return c===c?h?c-h:c:0},Cma={},Dma=Cma=function(c){return c!==c},W8={};W8=function(c,h,e){--e;for(var k=c.length;++e<k;)if(c[e]===h)return e;return-1};var X8={},Ema=W8;X8=function(c,h,e){return h===h?Ema(c,h,e):zma(c,Dma,e)};var Fma={},Gma=X8,Hma=Fma=function(c,h){return!(null==c||!c.length)&&-1<Gma(c,h,0)},Ima={},Jma=Ima=function(){},Kma={},IU=Kma=function(){},eA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Lma={};fn.prototype=
HU(IU.prototype);var JU=Lma=fn.prototype.constructor=fn,GF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mma={};$x.prototype=HU(IU.prototype);var Y8=Mma=$x.prototype.constructor=$x,Z8={};Z8=function(c){if(c instanceof JU)return c.clone();var h=new Y8(c.__wrapped__,c.__chain__);h.__actions__=M8(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var Nma={},pea=JU,QY=Y8,oea=B8,nea=EU,rea=Z8,qea=Object.prototype.hasOwnProperty;ay.prototype=IU.prototype;
var Oma=Nma=ay.prototype.constructor=ay,Pma={},sM=Pma=R8&&new R8,Qma={},$8=Qma=sM?function(c){return sM.get(c)}:Jma,a9={};a9={};var b9={},c9=a9,Rma=Object.prototype.hasOwnProperty;b9=function(c){for(var h=c.name+"",e=c9[h],k=Rma.call(c9,h)?e.length:0;k--;){var n=e[k],b=n.func;if(null==b||b==c)return n.name}return h};var Sma={},Tma=b9,Uma=Sma=function(c){var h=Tma(c),e=Oma[h];if("function"!=typeof e||!(h in JU.prototype))return!1;if(c===e)return!0;h=$8(e);return!!h&&c===h[0]},Vma={},d9=Vma=sM?function(c,
h){sM.set(c,h);return c}:FU,Wma={},tM=Wma=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var e=HU(c.prototype);h=c.apply(e,h);return kE(h)?h:e}},uM="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Xma={},Yma=Xma=function(c,h,e){function k(){return((this||uM)&&(this||uM)!==tB&&(this||uM)instanceof k?b:c).apply(n?e:this||uM,arguments)}var n=h&1,b=tM(c);return k},Zma={},$ma=Math.max,e9=Zma=function(c,h,e,k){var n=-1,b=c.length,d=e.length,m=-1,a=h.length,g=$ma(b-d,0),l=Array(a+g);for(k=!k;++m<a;)l[m]=h[m];for(;++n<d;)if(k||n<b)l[e[n]]=c[n];for(;g--;)l[m++]=c[n++];return l},ana={},bna=Math.max,f9=ana=function(c,h,e,k){var n=-1,b=c.length,d=-1,m=e.length,
a=-1,g=h.length,l=bna(b-m,0),r=Array(l+g);for(k=!k;++n<l;)r[n]=c[n];for(l=n;++a<g;)r[l+a]=h[a];for(;++d<m;)if(k||n<b)r[l+e[d]]=c[n++];return r},cna={},dna=cna=function(c,h){for(var e=c.length,k=0;e--;)c[e]===h&&++k;return k},ena={},g9=ena=Q8(d9),fna={},gna=/\{\n\/\* \[wrapped with (.+)\] \*/,hna=/,? & /,ina=fna=function(c){return(c=c.match(gna))?c[1].split(hna):[]},jna={},kna=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lna=jna=function(c,h){var e=h.length;if(!e)return c;var k=e-1;h[k]=(1<e?"& ":"")+
h[k];h=h.join(2<e?", ":" ");return c.replace(kna,"{\n/* [wrapped with "+h+"] */\n")},h9={},mna=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];h9=function(c,h){qma(mna,function(e){var k="_."+e[0];h&e[1]&&!Hma(c,k)&&c.push(k)});return c.sort()};var nna={},ona=h9,i9=nna=function(c,h,e){h+="";return nma(c,lna(h,ona(ina(h),e)))},pna={},j9=pna=function(c,h,e,k,n,b,d,m,a,g){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);
n=[c,h,n,l?b:void 0,l?d:void 0,l?void 0:b,l?void 0:d,m,a,g];e=e.apply(void 0,n);Uma(c)&&g9(e,n);e.placeholder=k;return i9(e,c,h)},qna={},k9=qna=function(c){return c.placeholder},rna={},sna=Math.min,tna=rna=function(c,h){for(var e=c.length,k=sna(h.length,e),n=M8(c);k--;){var b=h[k];c[k]=fma(b,e)?n[b]:void 0}return c},una={},vM=una=function(c,h){for(var e=-1,k=c.length,n=0,b=[];++e<k;){var d=c[e];if(d===h||"__lodash_placeholder__"===d)c[e]="__lodash_placeholder__",b[n++]=e}return b},rJ="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vna={},uea=e9,vea=f9,tea=dna,RY=tM,xea=j9,sea=k9,yea=tna,wea=vM,zea=tB,l9=vna=KC,wM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wna={},xna=wna=function(c,h,e){function k(){for(var b=arguments.length,d=Array(b),m=b,a=k9(k);m--;)d[m]=arguments[m];m=3>b&&d[0]!==a&&d[b-1]!==a?[]:vM(d,a);b-=m.length;return b<e?j9(c,h,l9,k.placeholder,void 0,d,m,void 0,void 0,e-b):O8((this||wM)&&(this||wM)!==tB&&(this||
wM)instanceof k?n:c,this||wM,d)}var n=tM(c);return k},xM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yna={},zna=yna=function(c,h,e,k){function n(){for(var m=-1,a=arguments.length,g=-1,l=k.length,r=Array(l+a),v=(this||xM)&&(this||xM)!==tB&&(this||xM)instanceof n?d:c;++g<l;)r[g]=k[g];for(;a--;)r[g++]=arguments[++m];return O8(v,b?e:this||xM,r)}var b=h&1,d=tM(c);return n},m9={},Ana=Math.min;m9=function(c,h){var e=c[1],k=h[1],n=e|k,b=128==k&&8==e||128==k&&256==e&&c[7].length<=
h[8]||384==k&&h[7].length<=h[8]&&8==e;if(!(131>n||b))return c;k&1&&(c[2]=h[2],n|=e&1?0:4);if(e=h[3])b=c[3],c[3]=b?e9(b,e,h[4]):e,c[4]=b?vM(c[3],"__lodash_placeholder__"):h[4];if(e=h[5])b=c[5],c[5]=b?f9(b,e,h[6]):e,c[6]=b?vM(c[5],"__lodash_placeholder__"):h[6];(e=h[7])&&(c[7]=e);k&128&&(c[8]=null==c[8]?h[8]:Ana(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var n9={},Bna=m9,o9=Math.max;n9=function(c,h,e,k,n,b,d,m){var a=h&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");
var g=k?k.length:0;g||(h&=-97,k=n=void 0);d=void 0===d?d:o9(V8(d),0);m=void 0===m?m:V8(m);g-=n?n.length:0;if(h&64){var l=k,r=n;k=n=void 0}var v=a?void 0:$8(c);b=[c,h,e,k,n,l,r,b,d,m];v&&Bna(b,v);c=b[0];h=b[1];e=b[2];k=b[3];n=b[4];m=b[9]=void 0===b[9]?a?0:c.length:o9(b[9]-g,0);!m&&h&24&&(h&=-25);e=h&&1!=h?8==h||16==h?xna(c,h,m):32!=h&&33!=h||n.length?l9.apply(void 0,b):zna(c,h,e,k):Yma(c,h,e);return i9((v?d9:g9)(e,b),c,h)};var Cna={},Dna=n9,Ena=Cna=function(c,h,e){h=e?void 0:h;h=c&&null==h?c.length:
h;return Dna(c,128,void 0,void 0,void 0,void 0,h)},KU={};Object.defineProperty(KU,"__esModule",{value:!0});KU.default=function(c){var h=c.types,e=function(n){return function(b){var d=n[b.type];if(d)return d(b);throw Error(b.type+" could not be transformed");}},k=function(n,b){var d=b.opts;b=d.useNew;var m=void 0===b?!1:b;b=d.module;var a=d.function;d=d.useVariables;var g=void 0===d?!1:d,l=d=void 0;!0===g?d=/^[A-Z]/:(0,Fna.default)(g)&&(d=new RegExp(g));var r=m?h.newExpression:h.callExpression;l=function(v){return function(y){return r(v,
[y])}};b?(m=n.scope.generateUidIdentifier(m?"JSXNode":"jsx"),l=l(m),b=h.importDeclaration([h.importDefaultSpecifier(m)],h.stringLiteral(b)),n.findParent(function(v){return v.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,p9.default)(h.identifier,1)).reduce((0,p9.default)(h.memberExpression,2)),l=l(n)):l=Gna.default;return{variablesRegex:d,jsxObjectTransformer:l}};return{inherits:wla,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",k(n,b));var d=b.get("jsxConfig"),
m=d.variablesRegex,a=d.jsxObjectTransformer,g=function(I){return h.stringLiteral(I.name)},l=function(I){return h.stringLiteral(I.namespace.name+":"+I.name.name)},r=e({JSXIdentifier:function(I){return h.identifier(I.name)},JSXMemberExpression:function(I){return h.memberExpression(r(I.object),r(I.property))}}),v=e({JSXIdentifier:m?function(I){return m.test(I.name)?h.identifier(I.name):g(I)}:g,JSXNamespacedName:l,JSXMemberExpression:r});d=function(I){return I.expression};var y=e({JSXIdentifier:g,JSXNamespacedName:l,
JSXMemberExpression:r}),A=e({StringLiteral:function(I){return I},JSXExpressionContainer:d}),E=function(I){var M=[],L=[];I.forEach(function(S){switch(S.type){case "JSXAttribute":M||(M=[]);var R=y(S.name);R=Hna.default.keyword.isIdentifierNameES6(R.value)?h.identifier(R.value):R;M.push(h.objectProperty(R,A(S.value)));break;case "JSXSpreadAttribute":M&&(L.push(h.objectExpression(M)),M=null);L.push(S.argument);break;default:throw Error(S.type+" cannot be used as a JSX attribute");}});M&&0<M.length&&L.push(h.objectExpression(M));
return 0===L.length?h.objectExpression([]):1===L.length?L[0]:h.callExpression(b.addHelper("extends"),L)};l=function(I){return a(h.objectExpression([h.objectProperty(h.identifier(Ina),v(I.openingElement.name)),h.objectProperty(h.identifier(Jna),E(I.openingElement.attributes)),h.objectProperty(h.identifier(Kna),I.closingElement?G(I.children):h.nullLiteral())]))};var F=e({JSXText:function(I){if(b.opts.noTrim)return h.stringLiteral(I.value);I=I.value.replace(/\n\s*/g,"");return""===I?null:h.stringLiteral(I)},
JSXElement:l,JSXExpressionContainer:d}),G=function(I){return h.arrayExpression(I.map(F).filter(Boolean).reduce(function(M,L){var S=0<M.length?M[M.length-1]:null;return"StringLiteral"===L.type&&S&&"StringLiteral"===S.type?[].concat(LC(M.slice(0,-1)),[h.stringLiteral(S.value+L.value)]):[].concat(LC(M),[L])},[]))};n.replaceWith(l(n.node))}}}};var Fna=fA(Kla),Gna=fA(FU),p9=fA(Ena),Hna=fA(fH),Ina="elementName",Jna="attributes",Kna="children",sH={};Object.defineProperty(sH,"__esModule",{value:!0});sH.declare=
function(c){return function(h,e,k){h.assertVersion||(h=Object.assign(qw(h),{assertVersion:function(n){var b=h.version;if("number"===typeof n){if(!Number.isInteger(n))throw Error("Expected string or integer value.");n="^"+n+".0.0-0"}if("string"!==typeof n)throw Error("Expected string or integer value.");var d=Error.stackTraceLimit;"number"===typeof d&&25>d&&(Error.stackTraceLimit=25);var m="7."===b.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+b+"\". You'll need to update your @babel/core version."):
Error('Requires Babel "'+n+'", but was loaded with "'+b+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');"number"===typeof d&&(Error.stackTraceLimit=d);throw Object.assign(m,{code:"BABEL_VERSION_UNSUPPORTED",version:b,range:n});}}));return c(h,e||{},k)}};
var uB={};Object.defineProperty(uB,"__esModule",{value:!0});uB.default=void 0;var Lna=(0,sH.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,e){e.plugins.push("optionalCatchBinding")}}});uB.default=Lna;var yM={};Object.defineProperty(yM,"__esModule",{value:!0});yM.default=void 0;var Mna=uB&&uB.__esModule?uB:{default:uB},Nna=(0,sH.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Mna.default,
visitor:{CatchClause:function(h){if(!h.node.param){var e=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(e)}}}}});yM.default=Nna;var zM={};Object.defineProperty(zM,"__esModule",{value:!0});zM.default=void 0;var Ona=(0,sH.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,e){e.plugins.push("importMeta")}}});zM.default=Ona;var pk=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");pk.ensureJSXPlugin=function(){pk.transformJSX&&
("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",pk.transformJSX.default))};pk.ensureOptionalCatchBinding=function(){pk.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",pk.catchBinding.default))};pk.ensureImportMeta=function(){pk.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",pk.importMeta.default))};pk.stringifyFunctionWithoutToplevelRecorder=Gp;pk.es5Transpilation=xq;pk.capturing=qH;pk.capturing=qH;pk.capturing=qH;pk.parseFunction=cn;pk.stringify=Dm;pk.ReplaceVisitor=qt;pk.transformJSX=KU;pk.catchBinding=yM;pk.importMeta=zM;pk.stringifyFunctionWithoutToplevelRecorder=Gp;pk.stringifyFunctionWithoutToplevelRecorder=Gp;pk.es5Transpilation=xq;pk.es5Transpilation=xq;var Pna=Object.freeze({__proto__:null,
capturing:qH,stringifyFunctionWithoutToplevelRecorder:Gp,es5Transpilation:xq}),eh=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");eh.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(k){return k.text.startsWith("lively.vm ")});if(!c)return h;try{var e=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,e)}catch(k){return h}};eh.evalCodeTransform=Ks;eh.evalCodeTransformOfSystemRegisterSetters=Au;eh.copyProperties=
function(c,h,e){e=void 0===e?[]:e;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(k){return-1===e.indexOf(k)&&Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(c,k))})};eh.arr=ng;eh.Path=Ti;eh.parse=ye;eh.stringify=Dm;eh.transform=sB;eh.query=rt;eh.nodes=$w;eh.capturing=qH;eh.es5Transpilation=xq;eh.getGlobal=Im;var AM=eh.nodes;eh.id=AM.id;eh.literal=AM.literal;eh.member=AM.member;eh.objectLiteral=AM.objectLiteral;eh.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
eh.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";eh.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";eh.defaultClassToFunctionConverterName="initializeES6ClassForLively";eh.defaultClassToFunctionConverterName="initializeES6ClassForLively";eh.defaultClassToFunctionConverterName="initializeES6ClassForLively";eh.evalCodeTransform=Ks;eh.evalCodeTransform=Ks;eh.evalCodeTransformOfSystemRegisterSetters=Au;eh.evalCodeTransformOfSystemRegisterSetters=Au;var yh=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");
yh._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:yh.getGlobal(),varRecorderName:yh.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",
object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:yh.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:yh.endEvalFunctionName},computed:!0});return c};yh.runEval=co;yh.finishEval=function(c,h,e,k,n,b,d){k.wrapInStartEndCall&&(delete n[yh.startEvalFunctionName],delete n[yh.endEvalFunctionName]);c?(e.isError=!0,e.value=c):e.value=h;e.value instanceof Promise&&(e.isPromise=
!0);if(k.sync){if(e.processSync(k),"function"===typeof k.onEndEval)k.onEndEval(c,h)}else e.process(k).then(function(){"function"===typeof d&&d(null,e);"function"===typeof k.onEndEval&&k.onEndEval(c,h);return e},function(m){"function"===typeof d&&d(m,void 0);"function"===typeof k.onEndEval&&k.onEndEval(m,void 0);return e}).then(b.resolve,b.reject)};yh.syncEval=gA;yh.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var e={},k=new Promise(function(n){return setTimeout(n,
h,e)});return Promise.race([k,c.value]).then(function(n){return Object.assign(c,n!==e?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};yh.arr=ng;yh.obj=Ng;yh.string=Li;yh.Path=Ti;yh.promise=xh;yh.Closure=fk;yh.evalCodeTransform=Ks;yh.printEvalResult=Ar;yh.getGlobal=Im;yh.defaultTopLevelVarRecorderName="__lvVarRecorder";yh.startEvalFunctionName="lively.vm-on-eval-start";yh.endEvalFunctionName=
"lively.vm-on-eval-end";yh._eval=yh.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var tH=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};tH.prototype.addWarning=function(c){this.warnings.push(c);return c};tH.prototype.printed=function(c){c=void 0===c?{}:c;this.value=yh.printEvalResult(this,
c)};tH.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};tH.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return yh.tryToWaitForPromise(h,c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};yh.EvalResult=tH;var lE=yh.defaultTopLevelVarRecorderName;yh.defaultTopLevelVarRecorderName=lE;yh.defaultTopLevelVarRecorderName=
lE;yh.getGlobal=Im;yh.getGlobal=Im;yh.runEval=co;yh.runEval=co;yh.syncEval=gA;yh.syncEval=gA;var Qna=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:lE,getGlobal:Im,runEval:co,syncEval:gA}),Ni=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");Ni.ensureImportsAreImported=function(c,h,e){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(k=Ni.parse(h),n=k.body,b=n.filter(function(m){return"ImportDeclaration"===m.type}),d.yield(Promise.all(b.map(function(m){return c.normalize(m.source.value,
e).then(function(a){m.source.value=a;return c.get(a)||c.import(a)})})).catch(function(m){console.error("Error ensuring imports: "+m.message);throw m;}),2)):d.return(Ni.stringify(k))})};Ni.hasUnimportedImports=function(c,h,e){h=Ni.parse(h).body.filter(function(k){return"ImportDeclaration"===k.type});return 0<Ni.arr.uniq(h.map(function(k){return k.source.value})).filter(Boolean).filter(function(k){return!c.get(c.decanonicalize(k,e))}).length};Ni.babelTranspilerForAsyncAwaitCode=function(c,h,e,k){return function(n,
b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:e,code:!0,ast:!1},b);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Ni.babelPluginTranspilerForAsyncAwaitCode=function(c,h,e,k){return function(n,b){var d=c.babelOptions||{},m=[];m.push(h.presetES2015);d.stage3&&m.push({plugins:h.pluginsStage3});d.stage2&&m.push({plugins:h.pluginsStage2});d.stage1&&m.push({plugins:h.pluginsStage1});b=Object.assign({sourceMap:void 0,
inputSourceMap:void 0,filename:e,babelrc:!1,presets:m,moduleIds:!1,code:!0,ast:!1},b);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,"}).call(this)")}};Ni.getEs6Transpiler=function(c,h,e){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var k=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return k?Ni.babelTranspilerForAsyncAwaitCode(c,k,h.targetModule,e):c.import(c.transpiler).then(function(d){return Ni.babelTranspilerForAsyncAwaitCode(c,
d,h.targetModule,e)})}if("plugin-babel"===c.transpiler){k=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");var n=c.get(k);return n?Ni.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,e):c.import(k).then(function(d){return Ni.babelPluginTranspilerForAsyncAwaitCode(c,d,h.targetModule,e)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,e);return function(d,m){return b.transpileDoit(d,
m)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Ni.runEval=Hp;Ni.evalEnd=function(c,h,e,k){c.get("@lively-env").evaluationEnd(e.targetModule);c.debug&&console.log("[lively.module] runEval in module "+e.targetModule+" done");Ni.emit("lively.vm/doitresult",{code:h,result:k,waitForPromise:e.waitForPromise,targetModule:e.targetModule},Date.now(),c);return k};Ni.parse=ye;Ni.nodes=$w;Ni.stringify=Dm;Ni.emit=Vl;var BM=Ni.nodes;Ni.funcCall=BM.funcCall;Ni.member=
BM.member;Ni.id=BM.id;Ni.literal=BM.literal;Ni.arr=ng;Ni.vmRunEval=co;Ni.runEval=Hp;Ni.runEval=Hp;var Rna=Object.freeze({__proto__:null,runEval:Hp}),Ek=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");Ek.obj=Ng;var mE=function(){};mE.prototype.runEval=function(c,h){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("runEval(source, options) not yet implemented for "+e.constructor.name))})};mE.prototype.keysOfObject=function(c,
h){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+e.constructor.name))})};Ek.EvalStrategy=mE;var vB=function(){return Ek.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(vB,Ek.EvalStrategy);vB.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(k){return{isError:!0,
value:k}}}))})};vB.prototype.keysOfObject=function(c,h){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return e.runEval(b,h)},c),2);k=n.yieldResult;return n.return({completions:k.completions,prefix:k.startLetters})})};Ek.SimpleEvalStrategy=vB;var Zy=function(){return Ek.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Zy,Ek.EvalStrategy);Zy.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");
return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};Zy.prototype.runEval=function(c,h){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=e.normalizeOptions(h);k=h.System||lively.modules.System;n={};k.config({meta:(n[h.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,h))})};Zy.prototype.keysOfObject=function(c,h){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,
h)},c),2);e=k.yieldResult;return k.return({completions:e.completions,prefix:e.startLetters})})};Ek.LivelyVmEvalStrategy=Zy;var $y=function(){return Ek.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits($y,Ek.LivelyVmEvalStrategy);$y.prototype.sourceForRemote=function(c,h,e){var k=Ek.obj.isString(e.context)?e.context:!1;e=Ek.obj.dissoc(e,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(e)+
';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+k+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};$y.prototype.runEval=function(c,h){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(e.remoteEval(e.sourceForRemote("eval",c,h),h))})};$y.prototype.keysOfObject=function(c,h){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(e.remoteEval(e.sourceForRemote("keysOfObject",
c,h),h))})};$y.prototype.remoteEval=function(c,h){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(e.basicRemoteEval(c,h),4);if(2!=b.nextAddress)return k=b.yieldResult,b.return("string"===typeof k?JSON.parse(k):k);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(k||n)})})};$y.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Not yet implemented");
})};Ek.RemoteEvalStrategy=$y;var ov=function(c){var h=Ek.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(ov,Ek.RemoteEvalStrategy);ov.prototype.normalizeOptions=function(c){c=Ek.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};ov.prototype.basicRemoteEval=function(c,h){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=e.normalizeOptions(h),
k="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(e[k]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};ov.prototype.basicRemoteEval_web=function(c,h){var e,k,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:e=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);k=e.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==k)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(h,c),4);case 4:d=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw m=a.enterCatchBlock(),Error("Cannot reach server at "+h+": "+m.message);case 3:if(!d.ok)throw Error("Server at "+h+": "+d.statusText);return a.return(d.text())}})};ov.prototype.basicRemoteEval_node=function(c,h){var e,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){e=System._nodeRequire("url").parse;
k=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},e(h));return b.return(new Promise(function(d,m){var a=k.request(n,function(g){g.setEncoding("utf8");var l="";g.on("data",function(r){return l+=r});g.on("end",function(){return d(l)});g.on("error",function(r){return m(r)})});a.on("error",function(g){return m(g)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(ov,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
Ek.HttpEvalStrategy=ov;var nE=function(c,h){var e=Ek.RemoteEvalStrategy.call(this)||this;e.l2lClient=c;e.targetId=h;return e};$jscomp.inherits(nE,Ek.RemoteEvalStrategy);nE.prototype.basicRemoteEval=function(c,h){var e=this,k,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k=e,n=k.l2lClient,b=k.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);d=a.yieldResult;(m=d.data)&&m.value&&m.value.isEvalResult&&(m=
m.value);return a.return(m)})};Ek.L2LEvalStrategy=nE;Ek.EvalStrategy=mE;Ek.EvalStrategy=mE;Ek.SimpleEvalStrategy=vB;Ek.SimpleEvalStrategy=vB;Ek.LivelyVmEvalStrategy=Zy;Ek.LivelyVmEvalStrategy=Zy;Ek.HttpEvalStrategy=ov;Ek.HttpEvalStrategy=ov;Ek.L2LEvalStrategy=nE;Ek.L2LEvalStrategy=nE;var uH=Object.freeze({__proto__:null,RemoteEvalStrategy:$y,EvalStrategy:mE,SimpleEvalStrategy:vB,LivelyVmEvalStrategy:Zy,HttpEvalStrategy:ov,L2LEvalStrategy:nE});Ba("by",uH);var xl=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
xl.runEval=Km;xl.syncEval=Cr;xl.completions=pH;xl.completions=pH;xl.completions=pH;xl.globalEval=Qna;xl.esmEval=Rna;xl.defaultTopLevelVarRecorderName=lE;xl.defaultTopLevelVarRecorderName=lE;xl.defaultClassToFunctionConverterName="initializeES6ClassForLively";xl.defaultClassToFunctionConverterName="initializeES6ClassForLively";xl.evalCodeTransform=Ks;xl.evalCodeTransform=Ks;xl.evalCodeTransformOfSystemRegisterSetters=Au;xl.evalCodeTransformOfSystemRegisterSetters=Au;xl.runEval=Km;xl.runEval=Km;xl.syncEval=
Cr;xl.syncEval=Cr;xl.evalStrategies=uH;xl.evalStrategies=uH;xl.evalStrategies=uH;var q9=Object.freeze({__proto__:null,completions:pH,defaultTopLevelVarRecorderName:lE,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:Ks,evalCodeTransformOfSystemRegisterSetters:Au,runEval:Km,syncEval:Cr,evalStrategies:uH});Ba("bx",q9);var qj=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");qj.string=Li;qj.arr=ng;qj.parse=ye;qj.query=rt;qj.runEval=Km;qj.objMetaSym=
Symbol.for("lively-object-meta");qj.moduleSym=Symbol.for("lively-module-meta");qj.descriptorCache=new Map;var oE=function(c,h){c&&h?this.update(h,c):this.reset()};oE.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};oE.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};oE.prototype.changeSource=function(c){var h=this.moduleSource,e=this.sourceLocation,k=e.start;e=e.end;h=h.slice(0,k)+c+h.slice(e);this.update(h,{start:k,end:k+c.length});this._source=c;return this};oE.prototype.toString=function(){var c=qj.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(oE.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=qj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
qj.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=qj.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=qj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=qj.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,e=qj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=qj.arr.withoutAll(h,e);c=qj.arr.withoutAll(qj.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:e,localDeclaredNames:k,undeclaredNames:c}}}});qj.SourceDescriptor=oE;var cq=function(c,h){this.obj=c;this.System=h;this.reset()};cq.forObjectWithModuleSource=function(c,h,e){c=this.for(c,e);c.ensureSourceDescriptor(c.sourceLocation,h);return c};cq.for=function(c,h){var e=qj.descriptorCache.get(c);e||(e=new this(c,h),qj.descriptorCache.set(c,e));return e};cq.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};cq.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};cq.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=qj.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};cq.prototype.changeSource=
function(c){var h=this,e,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(e=h,k=e.module,n.yield(k.changeSourceAction(function(b){if(b!==h.moduleSource)throw Error("source of module "+k.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};cq.prototype._modifiedSource=function(c){var h=this.moduleSource,e=this.sourceLocation,k=e.start;e=e.end;return{moduleSource:h.slice(0,k)+c+h.slice(e),sourceLocation:{start:k,
end:k+c.length}}};cq.prototype._renamedSource=function(c){var h=this.ast,e=h.type,k=h.id;h=k.start;k=k.end;if("ClassDeclaration"!==e)throw Error("Don't know how to rename "+e);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(k))};cq.prototype._basicChangeSource=function(c){var h=this.meta,e=this._modifiedSource(c),k=e.moduleSource;e=e.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:k},e);this._sourceLocation=e;this._moduleSource=k;this._source=c;return this};
cq.prototype.toString=function(){var c=qj.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(e){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(cq.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[qj.moduleSym])throw Error("runtime object of source descriptor has no module data");
var e=c[qj.moduleSym];c=e.package.name;e=e.pathInPackage;c=e.includes("://")?e:c+"/"+e;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[qj.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[qj.objMetaSym]},set:function(c){this.obj[qj.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=qj.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=qj.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=qj.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=qj.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,e=qj.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=qj.arr.withoutAll(h,e);
c=qj.arr.withoutAll(qj.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:e,localDeclaredNames:k,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=qj.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ba("bI",cq);qj.RuntimeSourceDescriptor=cq;var Sf=lively.FreezerRuntime.recorderFor("lively.classes/util.js");Sf.superclasses=NC;Sf.getClassHierarchy=
Lm;Sf.withSuperclasses=Bu;Sf.inheritsFrom=Ip;Sf.changeClass=OC;Sf.isClass=Ms;Sf.lexicalClassMembers=rw;Sf.runtimeClassMembers=Ns;Sf.runtimeClassMembersInProtoChain=function(c){return Sf.arr.uniq(Sf.arr.flatmap(Sf.arr.without(Sf.withSuperclasses(c),Object),function(h){return Sf.runtimeClassMembers(h)}))};Sf.runtimeNonStaticMembers=function(c){var h=c.prototype,e=Sf.obj.getOwnPropertyDescriptors(h);return Sf.arr.withoutAll(Object.keys(e),["constructor"]).map(function(k){var n=e[k],b="function"===typeof n.value?
"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:k,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:h}})};Sf.runtimeNonstaticClassMembersInProtoChain=function(c){return Sf.arr.uniq(Sf.arr.flatmap(Sf.arr.without(Sf.withSuperclasses(c),Object),function(h){return Sf.runtimeNonStaticMembers(h)}))};Sf.runtimeStaticClassMembers=Os;Sf.runtimeStaticClassMembersInProtoChain=sw;Sf.arr=ng;Sf.obj=Ng;Sf.Path=Ti;Sf.RuntimeSourceDescriptor=cq;Sf.superclasses=NC;
Sf.superclasses=NC;var CM=Symbol.for("lively-instance-initialize");Sf.initializeSymbol=CM;Sf.initializeSymbol=CM;Sf.initializeSymbol=CM;var LU=Symbol.for("lively-instance-restorer");Sf.instanceRestorerSymbol=LU;Sf.instanceRestorerSymbol=LU;Sf.instanceRestorerSymbol=LU;var DM=Symbol.for("lively-instance-superclass");Sf.superclassSymbol=DM;Sf.superclassSymbol=DM;Sf.superclassSymbol=DM;var EM=Symbol.for("lively-module-meta");Sf.moduleMetaSymbol=EM;Sf.moduleMetaSymbol=EM;Sf.moduleMetaSymbol=EM;var FM=
Symbol.for("lively-object-meta");Sf.objMetaSymbol=FM;Sf.objMetaSymbol=FM;Sf.objMetaSymbol=FM;var GM=Symbol.for("lively-klass-changes-subscriber");Sf.moduleSubscribeToToplevelChangesSym=GM;Sf.moduleSubscribeToToplevelChangesSym=GM;Sf.moduleSubscribeToToplevelChangesSym=GM;Sf.getClassHierarchy=Lm;Sf.getClassHierarchy=Lm;Sf.withSuperclasses=Bu;Sf.withSuperclasses=Bu;Sf.inheritsFrom=Ip;Sf.inheritsFrom=Ip;Sf.changeClass=OC;Sf.changeClass=OC;Sf.isClass=Ms;Sf.isClass=Ms;Sf.lexicalClassMembers=rw;Sf.lexicalClassMembers=
rw;Sf.runtimeClassMembers=Ns;Sf.runtimeClassMembers=Ns;Sf.runtimeStaticClassMembers=Os;Sf.runtimeStaticClassMembers=Os;Sf.runtimeStaticClassMembersInProtoChain=sw;Sf.runtimeStaticClassMembersInProtoChain=sw;var MU=Ba("bJ",function(){function c(d){return d.replace(b,function(m,a){return a[a.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
e={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},k={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(d){return e[d]||"ASCII_"+d.charCodeAt(0)},b=/([\s-]+.)/g;return function(d){d=c(d);return 0<=h.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(m){return k[m]}).replace(/[^\w\$_]/g,n)}}());Sf.toJsIdentifier=MU;Sf.toJsIdentifier=MU;Sf.toJsIdentifier=MU;var xj=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
xj.hasManagedProperties=function(c){return c.hasOwnProperty(xj.defaultPropertiesKey)};xj.prepareClassForManagedPropertiesAfterCreation=tw;xj.prepareClassForProperties=function(c,h,e){xj.ensurePropertyInitializer(c);var k=h.valueStoreProperty,n=h.defaultGetter,b=h.defaultSetter,d=c.prototype;Object.keys(e).forEach(function(m){var a=e[m],g=d.hasOwnProperty(m)&&d.__lookupGetter__(m);if(!g||g._wasGenerated)g=a.get||"function"===typeof n&&function(){return n.call(this,m)}||function(){return this[k][m]},
g._wasGenerated=!0,d.__defineGetter__(m,g);g=d.hasOwnProperty(m)&&d.__lookupSetter__(m);if(!g||g._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(l){b.call(this,m,l)}||function(l){this[k][m]=l},a._wasGenerated=!0,d.__defineSetter__(m,a)})};xj.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,e=h[xj.propertiesAndSettingsCacheSym];
if(e)if(e.classHierarchy!=xj.getClassHierarchy(h)){var k=xj.propertiesAndSettingsInHierarchyOf(h);e=k.properties;k=k.propertySettings;h[xj.propertiesAndSettingsCacheSym]={properties:e,propertySettings:k,order:xj.obj.sortKeysWithBeforeAndAfterConstraints(e),classHierarchy:xj.getClassHierarchy(h)};xj.prepareClassForProperties(h,k,e)}else return e;return h[xj.propertiesAndSettingsCacheSym]||xj.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var e=this.propertiesAndPropertySettings();xj.prepareInstanceForProperties(this,e.propertySettings,e.properties,h,e.order);return this}})};xj.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},xj.defaultPropertySettings),e={},k=xj.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=xj.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<k.length;b++){var d=k[b];d&&"object"===typeof d&&Object.assign(h,d)}for(b=0;b<n.length;b++)if(k=
n[b],"object"!==typeof k)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+k);else for(var m in k)e.hasOwnProperty(m)?Object.assign(e[m],k[m]):e[m]=k[m];return{properties:e,propertySettings:h}};xj.prepareInstanceForProperties=function(c,h,e,k,n){var b=h.valueStoreProperty;n=n||xj.obj.sortKeysWithBeforeAndAfterConstraints(e);h=[];var d={};c.hasOwnProperty(b)||(c[b]={});for(var m=0;m<n.length;m++){var a=n[m],g=e[a],l=g.derived,r=!!g.foldable,v=g.hasOwnProperty("defaultValue")?
g.defaultValue:void 0;Array.isArray(v)&&(v=v.slice());l||r||(c[b][a]=v);var y=void 0;g.hasOwnProperty("initialize")?(y=d[a]={initialize:v},h.push(a)):l&&void 0!==v?(y=d[a]={derived:v},h.push(a)):r&&void 0!==v&&(y=d[a]={folded:v},h.push(a));k&&a in k&&(g.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(y||(y=d[a]={},h.push(a)),y.value=k[a]))}for(m=0;m<h.length;m++)k=h[m],n=d[k],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(e[k].initialize.call(c,
b?n.value:n.initialize),b&&(c[k]=n.value)):n.hasOwnProperty("derived")?c[k]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[k]=b?n.value:n.folded:b&&(c[k]=n.value)};xj.obj=Ng;xj.getClassHierarchy=Lm;xj.defaultPropertiesSettingKey="propertySettings";xj.defaultPropertiesKey="properties";xj.defaultInstanceInitializerMethod="initializeProperties";xj.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");xj.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
xj.prepareClassForManagedPropertiesAfterCreation=tw;xj.prepareClassForManagedPropertiesAfterCreation=tw;var Eg=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Eg.adoptObject=yq;Eg.setSuperclass=uw;Eg.installValueDescriptor=function(c,h,e){e=Object.assign(e,Eg.defaultPropertyDescriptorForValue);e.value.displayName=e.key;if(e.needsDeclaringClass){var k=e.value.originalFunction||e.value;e.value=Object.assign(function(){return k.call.apply(k,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:k,toString:function(){return k.toString()},displayName:e.key})}Object.defineProperty(c,e.key,e)};Eg.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,Eg.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};Eg.installMethods=function(c,h,e){e&&e.forEach(function(d){d.value?Eg.installValueDescriptor(c,c,d):Eg.installGetterSetterDescriptor(c,d)});h&&h.forEach(function(d){d.value?Eg.installValueDescriptor(c.prototype,c,d):Eg.installGetterSetterDescriptor(c.prototype,
d)});c.prototype[Eg.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(Eg.initializeSymbol)&&c.prototype[Eg.initializeSymbol].isDefaultInitializer&&c[Eg.superclassSymbol].prototype[Eg.initializeSymbol]&&delete c.prototype[Eg.initializeSymbol]:(Object.defineProperty(c.prototype,Eg.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[Eg.initializeSymbol].isDefaultInitializer=!0,c.prototype[Eg.initializeSymbol].displayName="lively-initialize");
h=h.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var k=Object.getOwnPropertyNames(c.prototype),n=0;n<k.length;n++){var b=k[n];h.includes(b)||delete c.prototype[b]}e=e.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(k=0;k<h.length;k++)n=h[k],e.includes(n)||delete c[n]};Eg.ensureInitializeStub=function(c){c===Object||c.prototype[Eg.initializeSymbol]||(Object.defineProperty(c.prototype,Eg.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[Eg.initializeSymbol].displayName="lively-initialize-stub")};Eg.initializeClass=hc;Eg.prepareClassForManagedPropertiesAfterCreation=tw;Eg.superclassSymbol=DM;Eg.moduleSubscribeToToplevelChangesSym=GM;Eg.moduleMetaSymbol=EM;Eg.objMetaSymbol=FM;Eg.initializeSymbol=CM;Eg.constructorArgMatcher=/\([^\\)]*\)/;Eg.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};Eg.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var HM="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};Eg.setPrototypeOf=HM;Eg.setPrototypeOf=HM;Eg.setPrototypeOf=HM;Eg.adoptObject=yq;Eg.adoptObject=yq;Eg.setSuperclass=uw;Eg.setSuperclass=uw;Eg.initializeClass=hc;Eg.initializeClass=hc;Eg.initializeClass._get=function n(h,e,k){null===h&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,e);if(void 0===b)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,e,k);if("value"in b)return b.value;e=b.get;return void 0===e?void 0:e.call(k)};Eg.initializeClass._set=function d(e,k,n,b){var m=Object.getOwnPropertyDescriptor(e,k);void 0===m?(e=Object.getPrototypeOf(e),null!==e&&d(e,k,n,b)):"value"in m&&m.writable?m.value=n:(k=m.set,void 0!==k&&k.call(b,n));return n};var pE=Object.freeze({__proto__:null,setPrototypeOf:HM,adoptObject:yq,setSuperclass:uw,initializeClass:hc}),Eh=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
Eh.connect=yl;Eh.disconnect=$o;Eh.disconnectAll=Dr;Eh.once=Cu;Eh.signal=xf;Eh.callWhenNotNull=PC;Eh.callWhenPathNotNull=QC;Eh.noUpdate=vw;Eh.string=Li;Eh.arr=ng;Eh.Closure=fk;Eh.obj=Ng;Eh.stringifyFunctionWithoutToplevelRecorder=Gp;Eh.connect=yl;Eh.connect=yl;Eh.disconnect=$o;Eh.disconnect=$o;Eh.disconnectAll=Dr;Eh.disconnectAll=Dr;Eh.once=Cu;Eh.once=Cu;Eh.signal=xf;Eh.signal=xf;Eh.noUpdate=vw;Eh.noUpdate=vw;var IM=function(e){var k=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=
k.hasOwnProperty("AttributeConnection")&&"function"===typeof k.AttributeConnection?k.AttributeConnection:k.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m,a,g){this.init(b,d,m,a,g)}},{key:"init",value:function(b,d,m,a,g){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=
d;this.targetObj=m;this.targetMethodName=a;this.varMapping={source:b,target:m};g=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},g);g.removeAfterUpdate&&(this.removeAfterUpdate=!0);g.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof g.garbageCollect&&(this.garbageCollect=g.garbageCollect);"boolean"===typeof g.signalOnAssignment&&(this.signalOnAssignment=g.signalOnAssignment);g.converter&&this.setConverter(g.converter);
g.updater&&this.setUpdater(g.updater);g.varMapping&&(this.varMapping=Object.assign(g.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,d,m,a){Eh.arr.equals(Eh.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,d){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=
this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return Eh.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,d,m){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&
(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},
{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=Eh.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=Eh.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},
{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?Eh.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&
(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=
this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var d=this.sourceAttrName,m=this.forceAttributeConnection,a=b.__lookupSetter__(d),g=b.__lookupGetter__(d),l=!a&&!g&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||m?this.addSourceObjGetterAndSetter(g,a):l.isWrapped||this.addConnectionWrapper(b,d,l);return this}},{key:"disconnect",value:function(){var b=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();
d.attributeConnections=d.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var m=d.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;0==m.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,d){if(this.isActive)return null;var m=this,a=this.getUpdater(),g=this.getConverter(),l=this.targetObj,r=this.targetMethodName;if(!l||!r)return d=
"Cannot update "+this.toString(b)+" because of no target ("+l+") or targetProp ("+r+") ",this.isWeakConnection&&this.disconnect(),console.error(d),null;var v=l[r],y=function(E,F,G,I,M,L){G=[E,F,G,I,M,L];g&&(b=g.call(m,E,F),E=G[0]=b);E="function"===typeof v?v.apply(l,G):l[r]=E;m.removeAfterUpdate&&m.disconnect();return E};try{return this.isActive=!0,a?a.call(this,y,b,d):y(b,d)}catch(E){var A=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();A?A.logError(E,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+E+"\n"+E.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,d){if(!(b&&b.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var m=this.sourceObj,a=this.sourceAttrName,g=this.privateAttrName(a);m[g]&&console.warn("newAttrName "+g+" already exists.Are there already other connections?");
m.hasOwnProperty("doNotSerialize")||(m.doNotSerialize=[]);Eh.arr.pushIfNotIncluded(m.doNotSerialize,g);m.hasOwnProperty("doNotCopyProperties")||(m.doNotCopyProperties=[]);Eh.arr.pushIfNotIncluded(m.doNotCopyProperties,g);b&&(m.hasOwnProperty(a)?m.__defineGetter__(g,b):m.__defineGetter__(g,function(){return m.constructor.prototype.__lookupGetter__(a).bind(m)()}));d&&(m.hasOwnProperty(a)?m.__defineSetter__(g,d):m.__defineSetter__(g,function(l){m.constructor.prototype.__lookupSetter__(a).bind(m)(l)}));
b||d||!m.hasOwnProperty(a)||(m[g]=m[a]);m.__defineSetter__(a,function(l){var r=m[g];m[g]=l;if(void 0===m.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;m.attributeConnections.forEach(function(v){v&&v.getSourceAttrName()===a&&v.signalOnAssignment&&v.update(l,r)});return l});m.__lookupSetter__(a).isAttributeConnectionSetter=!0;m.__defineGetter__(a,function(){return m[g]});m.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(b,d,m){if("function"!==typeof m)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(d)){b[this.privateAttrName(d)]=m;var g=function(){return m}}else g=function(){return Object.getPrototypeOf(b)[d]};b[d]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),r=this[d].originalFunction.apply(this,
arguments),v=0;v<l.length;v++){var y=l[v];y.getSourceAttrName()===d&&y.update(arguments[0])}return r};b[d].isOwnProperty=a;b[d].isWrapped=!0;b[d].isConnectionWrapper=!0;Object.defineProperty(b[d],"originalFunction",{get:g});b[d].toString=function(){return"<Wrapped "+g()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,d=this.privateAttrName(b),m=this.sourceObj;if(m){if(m.__lookupGetter__(b)){if(delete m[b],m.hasOwnProperty(d)){try{m[b]=m[d]}catch(g){}delete m[d]}}else if(m[b]&&
m[b].isConnectionWrapper){var a=m[b];delete m[b];m[b]||(m[b]=a.originalFunction)}m.doNotSerialize&&m.doNotSerialize.includes(d)&&(m.doNotSerialize=Eh.arr.without(m.doNotSerialize,d),0==m.doNotSerialize.length&&delete m.doNotSerialize);m.doNotCopyProperties&&m.doNotCopyProperties.includes(d)&&(m.doNotCopyProperties=Eh.arr.without(m.doNotCopyProperties,d),0==m.doNotCopyProperties.length&&delete m.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var d=0,m=b.length;d<m;d++)if(this.isSimilarConnection(b[d]))return b[d];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==
b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return Eh.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],[{key:"className",get:function(){return"AttributeConnection"}}],k,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);Eh.AttributeConnection=IM;Eh.AttributeConnection=IM;Eh.AttributeConnection=IM;Eh.callWhenNotNull=PC;Eh.callWhenNotNull=PC;Eh.callWhenPathNotNull=QC;Eh.callWhenPathNotNull=QC;var Sna=Object.freeze({__proto__:null,connect:yl,disconnect:$o,disconnectAll:Dr,once:Cu,signal:xf,noUpdate:vw,AttributeConnection:IM,callWhenNotNull:PC,callWhenPathNotNull:QC}),
r9=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(r9,jla);Object.assign(r9,ila);var Tna=Object.freeze({__proto__:null,Complementary:Ry,Triadic:Sy,Tetradic:nB,Quadratic:Ty,Analogous:Uy,Neutral:oB,Color:Tg,LinearGradient:qn,RadialGradient:mp,flatDesignColors:cH,materialDesignColors:dH,webSafeColors:eH,Point:Yg,Rectangle:Re,Transform:il,Line:pn,rect:Gl,pt:th});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,
"__serialize__",{configurable:!0,value:function(){var e=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),k=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(e.get(n))return{__expr__:e.get(n)};n=String(n).match(k);return{__expr__:n?'Symbol("'+
n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,value:function(e,k,n){var b=e.add(this),d=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;e.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=
m.next();!l.done;l=m.next()){var r=$jscomp.makeIterator(l.value);l=r.next().value;r=r.next().value;g++;l=b.snapshotProperty(b.id,l,n.concat("key",String(g)),k,e);r=b.snapshotProperty(b.id,r,n.concat("value",String(g)),k,e);a.push(l,r)}return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",{configurable:!0,value:function(e,k,n,b,d){e=e.entries;for(var m=0;m<e.length;m+=2){var a=e[m+1],g=k.recreateProperty("key."+m,e[m],n,b,d.concat("key",m));a=k.recreateProperty("value."+
m,a,n,b,d.concat("value",m));this.set(g,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(e,k,n){var b=e.add(this),d=b.currentRev,m=b.currentSnapshot,a=m.entries=[],g=0;k[b.id]=m;e.classHelper.addClassInfo(b,this,m);m=$jscomp.makeIterator(this);for(var l=m.next();!l.done;l=m.next())l=l.value,g++,l=b.snapshotProperty(b.id,l,n.concat("entry",String(g)),k,e),a.push(l);return b.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",
{configurable:!0,value:function(e,k,n,b,d){e=e.entries;for(var m=0;m<e.length;m++){var a=k.recreateProperty("entry."+m,e[m],n,b,d.concat("key",m));this.add(a)}}});var NU=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");NU.isPrimitive=ww;NU.isPrimitive=ww;NU.isPrimitive=ww;var qk=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");qk.getClassName=Jp;qk.getSerializableClassMeta=Er;qk.locateClass=Kp;qk.arr=ng;qk.string=Li;qk.classMetaForSerializationProp="lively.serializer-class-info";
qk.classSuperClassProp=Symbol.for("lively-instance-superclass");qk.moduleMetaInClassProp=Symbol.for("lively-module-meta");qk.getClassName=Jp;qk.getClassName=Jp;qk.getSerializableClassMeta=Er;qk.getSerializableClassMeta=Er;qk.locateClass=Kp;qk.locateClass=Kp;var pv=function(e){this.options=Object.assign({ignoreClassNotFound:!0},e);this[Symbol.for("lively-instance-restorer")]=!0};pv.prototype.addClassInfo=function(e,k,n){(e=qk.getSerializableClassMeta(k))&&(n[qk.classMetaForSerializationProp]=e)};pv.prototype.restoreIfClassInstance=
function(e,k){if(k.hasOwnProperty(qk.classMetaForSerializationProp)&&(e=k[qk.classMetaForSerializationProp],e.className)){k=qk.locateClass(e);if(!k||"function"!==typeof k){k="Trying to deserialize instance of "+JSON.stringify(e)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(k);console.error(k);return{isClassPlaceHolder:!0,className:e.className}}return k.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new k(this):new k}};pv.sourceModulesInObjRef=function(e){var k=
[];(e=e&&e[qk.classMetaForSerializationProp])&&e.module&&k.push(e.module);return k};pv.sourceModulesIn=function(e){var k=[];Object.keys(e).forEach(function(n){(n=e[n])&&n[qk.classMetaForSerializationProp]&&k.push(n[qk.classMetaForSerializationProp])});return qk.arr.uniqBy(k,function(n,b){var d=n.module,m=b.module;return!d&&!m||d&&!m||!d&&m?n.className===b.className:n.className===b.className&&d.package.name==m.package.name&&d.package.pathInPackage==m.package.pathInPackage})};$jscomp.global.Object.defineProperties(pv.prototype,
{classNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__LivelyClassName__"}},sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(pv,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return qk.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return qk.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,
get:function(){return qk.classSuperClassProp}}});qk.ClassHelper=pv;qk.default=pv;var pj=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");pj.deserializeSpec=Bk;pj.serializeSpec=rk;pj.string=Li;pj.Closure=fk;pj.Path=Ti;pj.obj=Ng;pj.properties=Uo;pj.arr=ng;pj.getSerializableClassMeta=Er;pj.connect=yl;var lo=function(e){this.prefix=Object.assign({prefix:"__lv_expr__"},e).prefix+":"};lo.prototype.isSerializedExpression=function(e){return 0===e.indexOf(this.prefix)};
lo.prototype.requiredModulesOf__expr__=function(e){return this.isSerializedExpression(e)?(e=this.exprStringDecode(e).bindings)?Object.keys(e):null:null};lo.prototype.exprStringDecode=function(e){var k=e.indexOf(":");e.slice(0,k);e=e.slice(k+1);for(var n={},b=!1;e&&e.startsWith("{")&&0<=(k=e.indexOf("}:"));){b=!0;var d=e.slice(1,k);e=e.slice(k+2);e.includes("https:")&&e.indexOf("https:")<e.indexOf(":")?(e=e.replace("https:","__HTTP_PLACEHOLDER__"),k=e.indexOf(":")-20+6,e=e.replace("__HTTP_PLACEHOLDER__",
"https:")):k=e.indexOf(":");var m=e.slice(0,k);d=d.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var g=$jscomp.makeIterator(a.split(":"));a=g.next().value;g=g.next().value;return{exported:a,local:g}});n[m]=d;e=e.slice(k+1)}return{__expr__:e,bindings:b?n:null}};lo.prototype.exprStringEncode=function(e){var k=e.bindings;e=String(e.__expr__);if(k)for(var n=Object.keys(k),b=0;b<n.length;b++){var d=n[b],m=k[d];Array.isArray(m)&&(m=m.map(function(a){return"string"===
typeof a?a:a.exported+":"+a.local}).join(","));e="{"+m+"}:"+d+":"+e}return this.prefix+e};lo.prototype.convert__expr__obj=function(e){console.assert("__expr__"in e,"obj has no property __expr__");return this.prefix+e.__expr__};lo.prototype.__eval__=function(e,k){return pj.__eval__(e,k)};lo.prototype.deserializeExpr=function(e){if(!e.startsWith(this.prefix))throw Error('"'+e+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(e))};
lo.prototype.deserializeExprObj=function(e){var k=e.__expr__;e=e.bindings;var n={};if(e)for(var b=e?Object.keys(e):[],d=0;d<b.length;d++){var m=b[d],a=e[m];if(lively.FreezerRuntime){var g=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(m));if(!g){var l=lively.FreezerRuntime.fetchStandaloneFor(m);l&&(g=l.exports)}g.exports&&(g=g.exports)}else g=System.get(System.decanonicalize(m));if(!g)throw Error("[lively.serializer] expression eval: bindings specify to import "+m+" but this module is not loaded!\nSource: "+
k);for(m=0;m<a.length;m++){var r=a[m],v=l=void 0;"string"===typeof r?v=l=r:"object"===typeof r&&(l=r.local,v=r.exported);n[l]=g[v];k="var "+l+" = __boundValues__."+l+";\n"+k}}return this.__eval__(k,n)};pj.ExpressionSerializer=lo;pj.__eval__=pj.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();pj.deserializeSpec=Bk;pj.deserializeSpec=Bk;pj.serializeSpec=rk;pj.serializeSpec=rk;pj.default=lo;var ak=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
ak.obj=Ng;ak.Plugin=function(){};var OU=function(){};OU.prototype.serializeObject=function(e,k,n,b,d){if("function"!==typeof e.__serialize__)return null;(e=e.__serialize__(n,b,d))&&e.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(e),e=k?n:{__expr__:n});return e};OU.prototype.deserializeObject=function(e,k,n,b){return(k=n.__expr__)?e.expressionSerializer.deserializeExpr(k):null};ak.CustomSerializePlugin=OU;var PU=function(){};PU.prototype.additionallySerialize=function(e,k,
n,b){e.classHelper.addClassInfo(k,k.realObj,n)};PU.prototype.deserializeObject=function(e,k,n,b){return e.classHelper.restoreIfClassInstance(k,n)};ak.ClassPlugin=PU;var s9=function(){};s9.prototype.serializeObject=function(e,k,n,b,d){e&&e.isMorph&&(e.__isBeingSerialized__=!0);return null};ak.SerializationIndicationPlugin=s9;var t9=function(){};t9.prototype.additionallySerialize=function(e,k,n,b){k.realObj&&k.realObj.isMorph&&(k.realObj.__isBeingSerialized__=!1)};ak.SerializationFinishPlugin=t9;var JM=
function(){};JM.prototype.additionallySerialize=function(e,k,n,b){var d=k.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(n,k,e,b)};JM.prototype.additionallyDeserializeBeforeProperties=function(e,k,n,b,d,m,a){"function"===typeof n.__deserialize__&&n.__deserialize__(d,k,m,e,a)};JM.prototype.additionallyDeserializeAfterProperties=function(e,k,n,b,d,m){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,k)};ak.AdditionallySerializePlugin=JM;
var u9=function(){};u9.prototype.propertiesToSerialize=function(e,k,n,b){return(e=k.realObj)&&e.__only_serialize__||null};ak.OnlySerializePropsPlugin=u9;var v9=function(){};v9.prototype.propertiesToSerialize=function(e,k,n,b){e=k.realObj;if(!e||!e.__dont_serialize__)return null;e=ak.obj.mergePropertyInHierarchy(e,"__dont_serialize__");k=[];for(n=0;n<b.length;n++){var d=b[n];e.includes(d)||k.push(d)}return k};ak.DontSerializePropsPlugin=v9;var QU=function(){};QU.prototype.propertiesToSerialize=function(e,
k,n,b){var d=k.realObj;k=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!k)return null;e=k.properties;n=k.propertySettings.valueStoreProperty||"_state";k=[];if(d[n]){if(d.__only_serialize__){for(var m=0;m<b.length;m++){d=b[m];var a=e[d];d!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||k.push(d))}return k}n=b.indexOf(n);-1<n&&b.splice(n,1);for(m in e)n=e[m],d=b.indexOf(m),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?-1<
d&&b.splice(d,1):-1===d&&k.push(m);return k.concat(b)}};QU.prototype.additionallyDeserializeBeforeProperties=function(e,k,n,b,d,m,a){var g=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!g)return b;var l=g.order;g=g.propertySettings.valueStoreProperty||"_state";b=d.props;if(b[g])return b;b=ak.obj.clone(b);n.hasOwnProperty(g)||n.initializeProperties();for(d=0;d<l.length;d++)g=l[d],b.hasOwnProperty(g)&&(k.recreatePropertyAndSetProperty(n,b,g,m,e,a),delete b[g]);return b};ak.LivelyClassPropertiesPlugin=
QU;var RU={livelyClassPropertiesPlugin:new ak.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new ak.DontSerializePropsPlugin,onlySerializePropsPlugin:new ak.OnlySerializePropsPlugin,additionallySerializePlugin:new ak.AdditionallySerializePlugin,classPlugin:new ak.ClassPlugin,customSerializePlugin:new ak.CustomSerializePlugin,indicationPlugin:new ak.SerializationIndicationPlugin,finishPlugin:new ak.SerializationFinishPlugin};ak.plugins=RU;ak.plugins=RU;ak.plugins=RU;var vH=[ak.plugins.indicationPlugin,
ak.plugins.customSerializePlugin,ak.plugins.classPlugin,ak.plugins.additionallySerializePlugin,ak.plugins.onlySerializePropsPlugin,ak.plugins.dontSerializePropsPlugin,ak.plugins.livelyClassPropertiesPlugin,ak.plugins.finishPlugin];ak.allPlugins=vH;ak.allPlugins=vH;ak.allPlugins=vH;var xk=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");xk.__additionally_serialize__addObjectFunction=function(e,k,n,b,d){d=void 0===d?[]:d;return function(m,a,g){g=void 0===g?!1:g;return k.props[m]=
g?{value:a,verbatim:g}:{value:e.snapshotProperty(e.id,a,d.concat([m]),n,b)}}};xk.arr=ng;xk.Path=Ti;xk.obj=Ng;xk.string=Li;xk.isPrimitive=ww;xk.ClassHelper=pv;xk.ExpressionSerializer=lo;xk.allPlugins=vH;xk.debugSerialization=!1;xk.debugDeserialization=!1;var hk=function(e){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},e);this.reset()};hk.withDefaultPlugins=function(e){return new this(Object.assign({plugins:xk.allPlugins},e))};hk.resolveFromSnapshotAndId=function(e,
k){return(new this(k)).resolveFromSnapshotAndId(e)};hk.fromSnapshot=function(e,k){return(new this(k)).readSnapshot(e)};hk.withObject=function(e,k){k=new this(k);k.add(e);return k};hk.prototype.reset=function(){this.uuidGen=xk.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var e=this.options;this.classHelper=new xk.ClassHelper(e);this.expressionSerializer=new xk.ExpressionSerializer;e.idPropertyName&&(this.idPropertyName=e.idPropertyName);e.uuidGen&&(this.uuidGen=e.uuidGen);e.reinitializeIds&&
(this.reinitializeIds=e.reinitializeIds);e.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=e.ignoreClassNotFound);var k=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};e.plugins&&e.plugins.forEach(function(n){"function"===typeof n.serializeObject&&
k.serializeObject.push(n);"function"===typeof n.additionallySerialize&&k.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&k.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&k.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&k.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&k.additionallyDeserializeAfterProperties.push(n);"function"===typeof n.beforeDeserialization&&
k.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&k.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&k.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&k.afterSerialization.push(n)})};hk.prototype.knowsId=function(e){return!!this._id_ref_map[e]};hk.prototype.refForId=function(e){return this._id_ref_map[e]};hk.prototype.resolveToObj=function(e){return(e=this._id_ref_map[e])?e.realObj:void 0};hk.prototype.ref=function(e){return this._obj_ref_map.get(e)};
hk.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};hk.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};hk.prototype.internalAddRef=function(e){e.realObj&&this._obj_ref_map.set(e.realObj,e);return this._id_ref_map[e.id]=e};hk.prototype.add=function(e){var k=this;if(!xk.isPrimitive(e)){if(Array.isArray(e))return e.map(function(b){return k.add(b)});var n=e.__serialization_id_property__||this.idPropertyName;return this.ref(e)||this.internalAddRef(new xk.ObjectRef(e[n]||
this.uuidGen(),e,void 0,this.idPropertyName))}};hk.prototype.snapshot=function(e){var k={};this.plugin_beforeSerialization(k,e);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(k,this);return k=this.plugin_afterSerialization(k,e)};hk.prototype.snapshotObject=function(e){e=this.add(e).id;var k=this.snapshot(e);return{id:e,snapshot:k}};hk.prototype.readSnapshot=function(e,k){if(e.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)xk.ObjectRef.fromSnapshot(k,e,this,[],this.idPropertyName);else{k=0;for(var n=Object.keys(e);k<n.length;k++)this.resolveToObj(n[k])||xk.ObjectRef.fromSnapshot(n[k],e,this,[],this.idPropertyName)}return this};hk.prototype.resolveFromSnapshotAndId=function(e){if(!e.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!e.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var k=e=this.plugin_beforeDeserialization(e),n=k.id;this.readSnapshot(k.snapshot,
n);this.plugin_afterDeserialization(e);return this.resolveToObj(n)};hk.prototype.plugin_beforeSerialization=function(e,k){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,e,k)};hk.prototype.plugin_afterSerialization=function(e,k){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,e,k);b&&(e=b)}return e};hk.prototype.plugin_beforeDeserialization=function(e){for(var k=
0;k<this.plugins.beforeDeserialization.length;k++){var n=this.plugins.beforeDeserialization[k].beforeDeserialization(this,e);n&&(e=n)}return e};hk.prototype.plugin_afterDeserialization=function(e){for(var k=0;k<this.plugins.afterDeserialization.length;k++)this.plugins.afterDeserialization[k].afterDeserialization(this,e)};hk.prototype.plugin_serializeObject=function(e,k,n,b){for(var d=0;d<this.plugins.serializeObject.length;d++){var m=this.plugins.serializeObject[d].serializeObject(e,k,this,n,b);if(m)return m}};
hk.prototype.plugin_propertiesToSerialize=function(e,k,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var d=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,e,k,n);d&&(n=d)}return n};hk.prototype.plugin_additionallySerialize=function(e,k,n,b){n=this.plugins.additionallySerialize.length?xk.__additionally_serialize__addObjectFunction(e,k,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
e,k,n)};hk.prototype.plugin_deserializeObject=function(e,k,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var d=this.plugins.deserializeObject[b].deserializeObject(this,e,k,n);if(d)return d}};hk.prototype.plugin_additionallyDeserializeBeforeProperties=function(e,k,n,b,d,m){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var g=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,e,k,n,b,d,m);g&&(n=g)}return n};
hk.prototype.plugin_additionallyDeserializeAfterProperties=function(e,k,n,b,d){for(var m=0;m<this.plugins.additionallyDeserializeAfterProperties.length;m++)this.plugins.additionallyDeserializeAfterProperties[m].additionallyDeserializeAfterProperties(this,e,k,n,b,d)};xk.ObjectPool=hk;var Mq=function(e,k,n,b){this.id=e;this.idPropertyName=void 0===b?"id":b;this.realObj=k;this.snapshotVersions=[];this.snapshots={};n&&(e=n.rev||0,this.snapshotVersions.push(e),this.snapshots[e]=n)};Mq.fromSnapshot=function(e,
k,n,b,d){b=void 0===b?[]:b;e=new this(e,void 0,void 0,d);try{return n.internalAddRef(e).recreateObjFromSnapshot(k,n,b)}catch(m){if(n.options.highlightBuggyMorphs)for(;b.length;){if((k=xk.Path(b).map(function(a,g){return"submorphs"==a?g.filter(function(l){return!l.isHand&&!l.isEpiMorph}):g}).get(n.options.rootObject))&&k.isMorph&&k.world()){k.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw m;}};Mq.prototype.asRefForSerializedObjMap=function(e){return{__ref__:!0,id:this.id,rev:void 0===
e?"????":e}};Mq.prototype.snapshotObject=function(e,k,n){n=void 0===n?[]:n;xk.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,d=this.realObj,m=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=d._rev||0;var g=this.asRefForSerializedObjMap(a);xk.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(m[a])return e[b]||(e[b]=m[a]),g;var l=typeof b;"number"===l&&(b=String(b),l="string");if("string"!==l)throw Error("Error snapshoting "+d+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(l=k.plugin_serializeObject(d,!1,e,n))return m[a]=e[b]=l,g;l=Object.getOwnPropertyNames(d);var r={};m=m[a]=e[b]={rev:a,props:r};(a=k.plugin_propertiesToSerialize(this,m,l))&&(l=a);for(a=0;a<l.length;a++){var v=l[a];r[v]={value:this.snapshotProperty(b,d[v],n.concat([v]),e,k)}}k.plugin_additionallySerialize(this,
m,e,n);return g};Mq.prototype.snapshotProperty=function(e,k,n,b,d){var m=this;if(xk.isPrimitive(k))return k;var a=d.plugin_serializeObject(k,!0,b,n);if(a)return a;if("function"!==typeof k)return Array.isArray(k)?k.map(function(g,l){return m.snapshotProperty(e,g,n.concat(l),b,d)}):(k=d.add(k))&&k.isObjectRef?k.snapshotObject(b,d,n):k};Mq.prototype.recreateObjFromSnapshot=function(e,k,n){if(this.realObj)return this;xk.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=e[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=b.rev,m;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=b;(m=k.plugin_deserializeObject(this,b,n))||(m={});"undefined"===typeof m._rev&&"object"===typeof m&&(m._rev=d||0);this.realObj=m;k.internalAddRef(this);if(!m)return this;d=b.props;var a=k.plugin_additionallyDeserializeBeforeProperties(this,m,d,b,e,n);a&&(d=a);if(d)for(var g in d)this.recreatePropertyAndSetProperty(m,
d,g,e,k,n);g=m.__serialization_id_property__||this.idPropertyName;k.reinitializeIds&&m.hasOwnProperty(g)&&(m[g]=k.reinitializeIds(this.id,this));k.plugin_additionallyDeserializeAfterProperties(this,m,b,e,n);return this};Mq.prototype.recreatePropertyAndSetProperty=function(e,k,n,b,d,m){try{var a=k[n]||{value:"NON EXISTING"},g=a.value;e[n]=a.verbatim?g:this.recreateProperty(n,g,b,d,m.concat(n))}catch(r){try{var l=String(e)}catch(v){l="[some "+e.constructor.name+"]"}r.__seen?console.error("Error deserializing property "+
n+" of "+l):(e=n+" of "+l+" ("+JSON.stringify(g)+")",console.error("Error deserializing property "+e),r.__seen=!0);throw r;}};Mq.prototype.recreateProperty=function(e,k,n,b,d){var m=this;if("string"===typeof k&&b.expressionSerializer.isSerializedExpression(k))return b.expressionSerializer.deserializeExpr(k);if(xk.isPrimitive(k))return k;if(Array.isArray(k))return k.map(function(a,g){return m.recreateProperty(g,a,n,b,d.concat(g))});e=k.__serialization_id_property__||this.idPropertyName;return(b.refForId(k[e])||
xk.ObjectRef.fromSnapshot(k[e],n,b,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(Mq.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var e=xk.arr.last(this.snapshotVersions);else e=0,this.snapshotVersions.push(e);return this.snapshots[e]||(this.snapshots[e]={rev:e,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
xk.arr.last(this.snapshotVersions):0}}});Ba("bQ",Mq);xk.ObjectRef=Mq;var ig=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");ig.referenceGraph=im;ig.isReference=RC;ig.referencesOfRef=SC;ig.referencesOfId=Vg;ig.referencesInArray=TC;ig.moduleOfId=Ps;ig.referencesAndClassNamesOfId=iA;ig.classNameOfId=Lp;ig.findPathFromToId=Mp;ig.lookupPath=ap;ig.modifyProperty=HF;ig.removeUnreachableObjects=Qs;ig.clearDanglingConnections=jA;ig.requiredModulesOfSnapshot=Rs;ig.ClassHelper=
pv;ig.Path=Ti;ig.obj=Ng;ig.arr=ng;ig.graph=iu;ig.ExpressionSerializer=lo;ig.referenceGraph=im;ig.referenceGraph=im;ig.isReference=RC;ig.isReference=RC;ig.referencesOfRef=SC;ig.referencesOfRef=SC;ig.referencesOfId=Vg;ig.referencesOfId=Vg;ig.moduleOfId=Ps;ig.moduleOfId=Ps;ig.referencesAndClassNamesOfId=iA;ig.referencesAndClassNamesOfId=iA;ig.classNameOfId=Lp;ig.classNameOfId=Lp;ig.findPathFromToId=Mp;ig.findPathFromToId=Mp;ig.lookupPath=ap;ig.lookupPath=ap;ig.modifyProperty=HF;ig.modifyProperty=HF;
ig.removeUnreachableObjects=Qs;ig.removeUnreachableObjects=Qs;ig.clearDanglingConnections=jA;ig.clearDanglingConnections=jA;ig.defaultExprSerializer=new ig.ExpressionSerializer;ig.requiredModulesOfSnapshot=Rs;ig.requiredModulesOfSnapshot=Rs;var TY={},SY=!1,w9,VC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vm=w9={};try{var by="function"==typeof setTimeout?setTimeout:IF}catch(e){by=IF}try{var cy="function"==typeof clearTimeout?clearTimeout:JF}catch(e){cy=JF}!0;var kA,
xw=[],WC=!1,uJ=-1;vm.nextTick=function(e){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];xw.push(new yi(e,k));1!==xw.length||WC||sJ(vJ)};yi.prototype.run=function(){(this||VC).fun.apply(null,(this||VC).array)};vm.title="browser";vm.browser=!0;vm.env={};vm.argv=[];vm.version="";vm.versions={};vm.on=Fr;vm.addListener=Fr;vm.once=Fr;vm.off=Fr;vm.removeListener=Fr;vm.removeAllListeners=Fr;vm.emit=Fr;vm.prependListener=Fr;vm.prependOnceListener=
Fr;vm.listeners=function(e){return[]};vm.binding=function(e){throw Error("process.binding is not supported");};vm.cwd=function(){return"/"};vm.chdir=function(e){throw Error("process.chdir is not supported");};vm.umask=function(){return 0};var WY=Ba("bj",w9),VY={},UY=!1,Du={},XY=!1,ZY={},YY=!1,aZ={},$Y=!1,eg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cZ={},bZ=!1,eZ={},dZ=!1,gZ={},fZ=!1,iZ={},hZ=!1,kZ={},jZ=!1,mZ={},lZ=!1,oZ={},nZ=!1,qZ={},pZ=!1,sZ={},rZ=!1,uZ=
{},tZ=!1,wZ={},vZ=!1,yZ={},xZ=!1,AZ={},zZ=!1,CZ={},BZ=!1,EZ={},DZ=!1,GZ={},FZ=!1,IZ={},HZ=!1,KZ={},JZ=!1,MZ={},LZ=!1,OZ={},NZ=!1,QZ={},PZ=!1,SZ={},RZ=!1,UZ={},TZ=!1,yQ={},VZ=!1,Hl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zQ={},WZ=!1,yj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,YZ={},XZ=!1,$Z={},ZZ=!1,b_={},a_=!1,d_={},c_=!1,f_={},e_=!1,h_={},g_=!1,j_={},i_=!1,l_={},k_=!1,n_={},m_=!1,p_={},o_=!1,r_={},q_=!1,t_={},s_=!1,
x9={},y9=!1,Una=function(){if(y9)return x9;y9=!0;var e=Np();return x9={re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:UC().SEMVER_SPEC_VERSION,SemVer:tm(),compareIdentifiers:XC().compareIdentifiers,rcompareIdentifiers:XC().rcompareIdentifiers,parse:yo(),valid:KF(),clean:tQ(),inc:uQ(),diff:vQ(),major:wQ(),minor:wJ(),patch:xQ(),prerelease:Qj(),compare:bp(),rcompare:Op(),compareLoose:cp(),compareBuild:dy(),sort:cc(),rsort:dp(),gt:Ss(),lt:mA(),eq:YC(),neq:ep(),gte:ZC(),lte:ey(),cmp:xJ(),coerce:yJ(),
Comparator:Eu(),Range:Bn(),satisfies:yw(),toComparators:zJ(),maxSatisfying:pl(),minSatisfying:Fu(),minVersion:eo(),validRange:AQ(),outside:li(),gtr:LF(),ltr:BQ(),intersects:CQ(),simplifyRange:nA(),subset:MF()}}(),xg=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");xg.normalizeOptions=fo;xg.normalizeMigrations=function(e){e=void 0===e?[]:e;return{before:e.filter(function(k){return"function"===typeof k.snapshotConverter}),after:e.filter(function(k){return"function"===typeof k.objectConverter})}};
xg.runMigrations=function(e,k,n,b){for(var d=0;d<e.length;d++){var m=e[d];try{n=m[k](n,b)}catch(a){console.error("migration "+m.name+" failed:"),console.error(a)}}return n};xg.serialize=mi;xg.deserialize=oA;xg.deserializeWithMigrations=Gu;xg.copy=Pp;xg.ObjectPool=hk;xg.serializerVersion="0.1.3";xg.requiredModulesOfSnapshot=Rs;xg.removeUnreachableObjects=Qs;xg.clearDanglingConnections=jA;xg.allPlugins=vH;xg.semver=Una;xg.normalizeOptions=fo;xg.normalizeOptions=fo;xg.majorAndMinorVersionRe=/\.[^\.]+$/;
xg.ObjectRef=Mq;xg.ObjectRef=Mq;xg.ObjectPool=hk;xg.ObjectPool=hk;xg.requiredModulesOfSnapshot=Rs;xg.requiredModulesOfSnapshot=Rs;xg.removeUnreachableObjects=Qs;xg.removeUnreachableObjects=Qs;xg.serialize=mi;xg.serialize=mi;xg.deserialize=oA;xg.deserialize=oA;xg.deserializeWithMigrations=Gu;xg.deserializeWithMigrations=Gu;xg.copy=Pp;xg.copy=Pp;xg.ExpressionSerializer=lo;xg.serializeSpec=rk;xg.deserializeSpec=Bk;xg.getSerializableClassMeta=Er;xg.locateClass=Kp;xg.getClassName=Jp;xg.ExpressionSerializer=
lo;xg.ExpressionSerializer=lo;xg.getSerializableClassMeta=Er;xg.getSerializableClassMeta=Er;xg.locateClass=Kp;xg.locateClass=Kp;xg.serializeSpec=rk;xg.serializeSpec=rk;xg.deserializeSpec=Bk;xg.deserializeSpec=Bk;xg.getClassName=Jp;xg.getClassName=Jp;var Vna=Object.freeze({__proto__:null,normalizeOptions:fo,ObjectRef:Mq,ObjectPool:hk,requiredModulesOfSnapshot:Rs,removeUnreachableObjects:Qs,serialize:mi,deserialize:oA,deserializeWithMigrations:Gu,copy:Pp,ExpressionSerializer:lo,getSerializableClassMeta:Er,
locateClass:Kp,serializeSpec:rk,deserializeSpec:Bk,getClassName:Jp}),Wna={},Aea=Object.prototype.toString,SU=Wna=Array.isArray||DQ,Xna={},wH=Xna="2",EQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z9={};Cn.NONE=0;Cn.VTEXT=1;Cn.VNODE=2;Cn.WIDGET=3;Cn.PROPS=4;Cn.ORDER=5;Cn.INSERT=6;Cn.REMOVE=7;Cn.THUNK=8;z9=Cn;Cn.prototype.version=wH;Cn.prototype.type="VirtualPatch";var ax=z9,Yna={},xH=Yna=function(e){return e&&"VirtualNode"===e.type&&e.version===wH},Zna={},KM=Zna=
function(e){return e&&"VirtualText"===e.type&&e.version===wH},$na={},az=$na=function(e){return e&&"Widget"===e.type},aoa={},yH=aoa=function(e){return e&&"Thunk"===e.type},boa={},Bea=xH,Cea=KM,Dea=az,A9=boa=function(e,k){var n=e,b=k;yH(k)&&(b=fy(k,e));yH(e)&&(n=fy(e,null));return{a:n,b:b}},coa={},LM=coa=function(e){return"object"===typeof e&&null!==e},doa={},zH=doa=function(e){return e&&("function"===typeof e.hook&&!e.hasOwnProperty("hook")||"function"===typeof e.unhook&&!e.hasOwnProperty("unhook"))},
B9={},u_=LM,Eea=zH;B9=fp;var C9={},Hea=SU,Il=ax,qA=xH,v_=KM,CJ=az,BJ=yH,Gea=A9,Fea=B9;C9=pA;var eoa={},foa=eoa=C9,goa=Object.freeze({}),D9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hoa={},E9="undefined"!==typeof D9?D9:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var TU=document;else(TU=E9["__GLOBAL_DOCUMENT_CACHE@4"])||(TU=E9["__GLOBAL_DOCUMENT_CACHE@4"]=goa);var F9=hoa=TU,ioa={},w_=zH,G9=ioa=function(e,k,n){for(var b in k){var d=k[b];
if(void 0===d)OF(e,b,d,n);else if(w_(d))OF(e,b,d,n),d.hook&&d.hook(e,b,n?n[b]:void 0);else if(LM(d)){var m=void 0,a=void 0,g=e,l=b,r=n?n[l]:void 0;if("attributes"===l)for(a in d)m=d[a],void 0===m?g.removeAttribute(a):g.setAttribute(a,m);else if(r&&LM(r)&&zq(r)!==zq(d))g[l]=d;else for(m in LM(g[l])||(g[l]={}),a="style"===l?"":void 0,d)r=d[m],g[l][m]=void 0===r?a:r}else e[b]=d}},joa={},x_=F9,Mea=G9,Lea=xH,Kea=KM,Jea=az,Iea=A9,H9=joa=aD,koa={},loa=koa=function(e,k){return az(e)&&az(k)?"name"in e&&"name"in
k?e.id===k.id:e.init===k.init:!1},moa={},Nea={},noa=moa=function(e,k,n,b){return n&&0!==n.length?(n.sort(FQ),gy(e,k,n,b,0)):{}},I9={},Oea=az;I9=function(e,k,n){var b=e.vNode,d=e.patch;switch(e.type){case ax.REMOVE:return(d=k.parentNode)&&d.removeChild(k),EJ(k,b),null;case ax.INSERT:return d=n.render(d,n),k&&k.appendChild(d),k;case ax.VTEXT:return 3===k.nodeType?(k.replaceData(0,k.length,d.text),d=k):(b=k.parentNode,d=n.render(d,n),b&&d!==k&&b.replaceChild(d,k)),d;case ax.WIDGET:return d=(e=loa(b,
d))?d.update(b,k)||k:n.render(d,n),(n=k.parentNode)&&d!==k&&n.replaceChild(d,k),e||EJ(k,b),d;case ax.VNODE:return b=k.parentNode,d=n.render(d,n),b&&d!==k&&b.replaceChild(d,k),d;case ax.ORDER:b=k.childNodes;n={};for(var m,a=0;a<d.removes.length;a++)m=d.removes[a],e=b[m.from],m.key&&(n[m.key]=e),k.removeChild(e);a=b.length;for(var g=0;g<d.inserts.length;g++)m=d.inserts[g],e=n[m.key],k.insertBefore(e,m.to>=a++?null:b[m.to]);return k;case ax.PROPS:return G9(k,d,b.properties),k;case ax.THUNK:return d=
n.patch(k,d,n),k&&d&&k!==d&&k.parentNode&&k.parentNode.replaceChild(d,k),d;default:return k}};var J9={},Rea=F9,Sea=SU,Pea=H9,Qea=noa,y_=I9;J9=FJ;var ooa={},poa=ooa=J9,Hu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,K9={},Wea=xH,Xea=az,Yea=yH,Vea=zH;K9=PF;var Tea={},Uea=[];PF.prototype.version=wH;PF.prototype.type="VirtualNode";var UU=K9,Zea="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,L9={};L9=QF;QF.prototype.version=wH;QF.prototype.type=
"VirtualText";var VU=L9,M9={};M9=function(e){var k=String.prototype.split,n=/()??/.exec("")[1]===e;return function(b,d,m){if("[object RegExp]"!==Object.prototype.toString.call(d))return k.call(b,d,m);var a=[],g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),l=0;d=new RegExp(d.source,g+"g");var r,v;b+="";n||(r=new RegExp("^"+d.source+"$(?!\\s)",g));for(m=m===e?4294967295:m>>>0;v=d.exec(b);){g=v.index+v[0].length;if(g>l){a.push(b.slice(l,v.index));!n&&1<v.length&&v[0].replace(r,
function(){for(var A=1;A<arguments.length-2;A++)arguments[A]===e&&(v[A]=e)});1<v.length&&v.index<b.length&&Array.prototype.push.apply(a,v.slice(1));var y=v[0].length;l=g;if(a.length>=m)break}d.lastIndex===v.index&&d.lastIndex++}l===b.length?(y||!d.test(""))&&a.push(""):a.push(b.slice(l));return a.length>m?a.slice(0,m):a}}();var qoa={},roa=M9,soa=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,toa=/^\.|#/,uoa=qoa=function(e,k){if(!e)return"DIV";var n=!k.hasOwnProperty("id");e=roa(e,soa);var b=null;toa.test(e[1])&&
(b="DIV");var d,m;for(m=0;m<e.length;m++)if(d=e[m]){var a=d.charAt(0);if(b)if("."===a){var g=g||[];g.push(d.substring(1,d.length))}else"#"===a&&n&&(k.id=d.substring(1,d.length));else b=d}g&&(k.className&&g.push(k.className),k.className=g.join(" "));return k.namespace?b:b.toUpperCase()},N9={};N9=jm;jm.prototype.hook=function(e,k){e[k]!==this.value&&(e[k]=this.value)};var voa=N9,O9="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P9={},WU="undefined"!==typeof window?
window:"undefined"!==typeof O9?O9:{};P9=function(e,k){return e in WU?WU[e]:WU[e]=k};var Q9={},R9=P9;Q9=function(e,k,n){var b="__INDIVIDUAL_ONE_VERSION_"+e,d=R9(b+"_ENFORCE_SINGLETON",k);if(d!==k)throw Error("Can only have one copy of "+e+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+k);return R9(b,n)};var S9={};Q9("ev-store","7");S9=function(e){var k=e["__EV_STORE_KEY@7"];k||(k=e["__EV_STORE_KEY@7"]={});return k};var T9={},U9=S9;T9=sA;sA.prototype.hook=function(e,
k){e=U9(e);k=k.substr(3);e[k]=this.value};sA.prototype.unhook=function(e,k){e=U9(e);k=k.substr(3);e[k]=void 0};var V9={},A_=SU,z_=VU,$ea=xH,afa=KM,bfa=az,cfa=yH,woa=T9;V9=function(e,k,n){var b=[],d;if(d=!n)d="string"===typeof k||A_(k)||Iu(k);if(d){n=k;var m={}}m=m||k||{};e=uoa(e,m);if(m.hasOwnProperty("key")){var a=m.key;m.key=void 0}if(m.hasOwnProperty("namespace")){var g=m.namespace;m.namespace=void 0}"INPUT"!==e||g||!m.hasOwnProperty("value")||void 0===m.value||zH(m.value)||(m.value=voa(m.value));
k=m;for(var l in k)k.hasOwnProperty(l)&&(d=k[l],zH(d)||"ev-"===l.substr(0,3)&&(k[l]=woa(d)));void 0!==n&&null!==n&&go(n,b,e,m);return new UU(e,m,b,a,g)};var xoa={},yoa=xoa=V9,W9={};W9=H9;var zoa={},AH=zoa={diff:foa,patch:poa,h:yoa,create:W9,VNode:UU,VText:VU},Aoa={},Boa=Aoa={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",
autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",
enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",
list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},X9={};X9={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Coa={},efa=UU,B_=VU,XU,C_=Boa,dfa=X9,Doa=Coa=function(e,
k){if(!e)return RF(document.createTextNode(""));if("string"===typeof e){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");XU=XU||new DOMParser;e=XU.parseFromString(e,"text/html");e=e.body.firstChild?e.getElementsByTagName("body")[0].firstChild:e.head.firstChild&&("TITLE"!==e.head.firstChild.tagName||e.title)?e.head.firstChild:e.firstChild&&"HTML"!==e.firstChild.tagName?e.firstChild:document.createTextNode("")}if("object"!==typeof e||
!e||!e.nodeType)throw Error("invalid dom node",e);return RF(e,k)},Eoa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,YU={};!function(e,k){YU?YU=k():(this||Eoa)[e]=k()}("bowser",function(){function e(m){function a(U){return(U=m.match(U))&&1<U.length&&U[1]||""}function g(U){return(U=m.match(U))&&1<U.length&&U[2]||""}var l=a(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(m)&&/android/i.test(m),v=/nexus\s*[0-6]\s*/i.test(m),y=!v&&/nexus\s*[0-9]+/i.test(m),
A=/CrOS/.test(m),E=/silk/i.test(m),F=/sailfish/i.test(m),G=/tizen/i.test(m),I=/(web|hpw)os/i.test(m),M=/windows phone/i.test(m),L=!M&&/windows/i.test(m),S=!l&&!E&&/macintosh/i.test(m),R=!r&&!F&&!G&&!I&&/linux/i.test(m),aa=a(/edge\/(\d+(\.\d+)?)/i),ra=a(/version\/(\d+(\.\d+)?)/i),Ea=/tablet/i.test(m),K=!Ea&&/[^-]mobi/i.test(m),Z=/xbox/i.test(m);/opera|opr|opios/i.test(m)?A={name:"Opera",opera:!0,version:ra||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(m)?A={name:"Opera Coast",coast:!0,
version:ra||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(m)?A={name:"Yandex Browser",yandexbrowser:!0,version:ra||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(m)?A={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(m)?A={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(m)?A={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(m)?A={name:"Puffin",puffin:!0,
version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(m)?A={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(m)?A={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:M?(A={name:"Windows Phone",windowsphone:!0},aa?(A.msedge=!0,A.version=aa):(A.msie=!0,A.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(m)?A={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:A?A={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(m)?A={name:"Microsoft Edge",msedge:!0,version:aa}:/vivaldi/i.test(m)?A={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||ra}:F?A={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(m)?A={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(m)?(A={name:"Firefox",firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(m)&&(A.firefoxos=!0)):E?A={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(m)?A={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(m)?A={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(m)||/rim\stablet/i.test(m)?A={name:"BlackBerry",blackberry:!0,version:ra||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:I?(A={name:"WebOS",webos:!0,version:ra||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(m)&&(A.touchpad=!0)):/bada/i.test(m)?A={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:G?A={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||ra}:/qupzilla/i.test(m)?A={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||ra}:/chromium/i.test(m)?A={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||ra}:/chrome|crios|crmo/i.test(m)?A={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
r?A={name:"Android",version:ra}:/safari|applewebkit/i.test(m)?(A={name:"Safari",safari:!0},ra&&(A.version=ra)):l?(A={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},ra&&(A.version=ra)):A=/googlebot/i.test(m)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||ra}:{name:a(/^(.*)\/(.*) /),version:g(/^(.*)\/(.*) /)};!A.msedge&&/(apple)?webkit/i.test(m)?(/(apple)?webkit\/537\.36/i.test(m)?(A.name=A.name||"Blink",A.blink=!0):(A.name=A.name||"Webkit",A.webkit=!0),!A.version&&ra&&(A.version=
ra)):!A.opera&&/gecko\//i.test(m)&&(A.name=A.name||"Gecko",A.gecko=!0,A.version=A.version||a(/gecko\/(\d+(\.\d+)?)/i));A.msedge||!r&&!A.silk?l?(A[l]=!0,A.ios=!0):S?A.mac=!0:Z?A.xbox=!0:L?A.windows=!0:R&&(A.linux=!0):A.android=!0;L="";A.windowsphone?L=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(L=a(/os (\d+([_\s]\d+)*) like mac os x/i),L=L.replace(/[_\s]/g,".")):r?L=a(/android[ \/-](\d+(\.\d+)*)/i):A.webos?L=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):A.blackberry?L=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
A.bada?L=a(/bada\/(\d+(\.\d+)*)/i):A.tizen&&(L=a(/tizen[\/\s](\d+(\.\d+)*)/i));L&&(A.osversion=L);L=L.split(".")[0];if(Ea||y||"ipad"==l||r&&(3==L||4<=L&&!K)||A.silk)A.tablet=!0;else if(K||"iphone"==l||"ipod"==l||r||v||A.blackberry||A.webos||A.bada)A.mobile=!0;A.msedge||A.msie&&10<=A.version||A.yandexbrowser&&15<=A.version||A.vivaldi&&1<=A.version||A.chrome&&20<=A.version||A.firefox&&20<=A.version||A.safari&&6<=A.version||A.opera&&10<=A.version||A.ios&&A.osversion&&6<=A.osversion.split(".")[0]||A.blackberry&&
10.1<=A.version||A.chromium&&20<=A.version?A.a=!0:A.msie&&10>A.version||A.chrome&&20>A.version||A.firefox&&20>A.version||A.safari&&6>A.version||A.opera&&10>A.version||A.ios&&A.osversion&&6>A.osversion.split(".")[0]||A.chromium&&20>A.version?A.c=!0:A.x=!0;return A}function k(m,a){var g=[],l;if(Array.prototype.map)return Array.prototype.map.call(m,a);for(l=0;l<m.length;l++)g=a(m[l]);return g}function n(m){var a=Math.max(m[0].split(".").length,m[1].split(".").length);for(m=k(m,function(g){var l=a-g.split(".").length;
g+=Array(l+1).join(".0");return k(g.split("."),function(r){return Array(20-r.length).join("0")+r}).reverse()});0<=--a;){if(m[0][a]>m[1][a])return 1;if(m[0][a]===m[1][a]){if(0===a)return 0}else return-1}}function b(m,a,g){var l=d;"string"===typeof a&&(g=a,a=void 0);void 0===a&&(a=!1);g&&(l=e(g));g=""+l.version;for(var r in m)if(m.hasOwnProperty(r)&&l[r])return 0>n([g,m[r]]);return a}var d=e("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(m){for(var a=0;a<m.length;++a){var g=
m[a];if("string"===typeof g&&g in d)return!0}return!1};d.isUnsupportedBrowser=b;d.compareVersions=n;d.check=function(m,a,g){return!b(m,a,g)};d._detect=e;return d});var qv=YU,Nq=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Nq.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var e=(document.location.hash||document.location.search).slice(1);e=e&&e.split("&");var k={};if(e)for(var n=0;n<e.length;n++){var b=e[n].split("="),d=b[0],m=!0;if(1<b.length&&
(m=decodeURIComponent(b.slice(1).join("=")),m.match(/^(true|false|null|[0-9"[{].*)$/)))try{m=JSON.parse(m)}catch(a){"["===m[0]&&(m=m.slice(1,-1).split(","))}k[d]=m}return k};Nq.Rectangle=Re;Nq.Color=Tg;Nq.bowser=qv;Nq.isMac=!!Nq.bowser.mac;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(e){return e.hasOwnProperty("_cachedKeyhandlers")&&(e._cachedKeyhandlers=null)});Nq.config={onloadURLQuery:Nq.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:Nq.Color.black.withA(.2),
spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(e){return e.includes("lively.morphic/objectdb")||e.includes("lively.next-node_modules")||e.includes("node_modules")||e.includes("custom-npm-modules")||e.includes("mocha-es6")||
e.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",
command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open workspace",onlyWhenFocused:!1,args:{askForMode:!0}}},
{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},
command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",
direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",
args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",
command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",
args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",
offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},
command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S 4",win:"Ctrl-Shift-L R E S 4"},command:{command:"resize active window",args:{how:"col4"}}},{keys:{mac:"Meta-Shift-L R E S 5",win:"Ctrl-Shift-L R E S 5"},command:{command:"resize active window",args:{how:"col5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-1",win:"Ctrl-Shift-L R E S Alt-1"},command:{command:"resize active window",
args:{how:"quadrant1"}}},{keys:{mac:"Meta-Shift-L R E S Alt-2",win:"Ctrl-Shift-L R E S Alt-2"},command:{command:"resize active window",args:{how:"quadrant2"}}},{keys:{mac:"Meta-Shift-L R E S Alt-3",win:"Ctrl-Shift-L R E S Alt-3"},command:{command:"resize active window",args:{how:"quadrant3"}}},{keys:{mac:"Meta-Shift-L R E S Alt-4",win:"Ctrl-Shift-L R E S Alt-4"},command:{command:"resize active window",args:{how:"quadrant4"}}},{keys:{mac:"Meta-Shift-L R E S Alt-5",win:"Ctrl-Shift-L R E S Alt-5"},command:{command:"resize active window",
args:{how:"quadrant5"}}},{keys:{mac:"Meta-Shift-L R E S Alt-6",win:"Ctrl-Shift-L R E S Alt-6"},command:{command:"resize active window",args:{how:"quadrant6"}}},{keys:{mac:"Meta-Shift-L R E S Alt-7",win:"Ctrl-Shift-L R E S Alt-7"},command:{command:"resize active window",args:{how:"quadrant7"}}},{keys:{mac:"Meta-Shift-L R E S Alt-8",win:"Ctrl-Shift-L R E S Alt-8"},command:{command:"resize active window",args:{how:"quadrant8"}}},{keys:{mac:"Meta-Shift-L R E S Alt-9",win:"Ctrl-Shift-L R E S Alt-9"},command:{command:"resize active window",
args:{how:"quadrant9"}}},{keys:{mac:"Meta-Shift-L R E S Alt-0",win:"Ctrl-Shift-L R E S Alt-0"},command:{command:"resize active window",args:{how:"quadrant0"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",
args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S H T",win:"Ctrl-Shift-L R E S H T"},command:{command:"resize active window",args:{how:"halftop"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},command:{command:"resize active window",args:{how:"bottom"}}},
{keys:{mac:"Meta-Shift-L R E S H B",win:"Ctrl-Shift-L R E S H B"},command:{command:"resize active window",args:{how:"halfbottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,
useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{"delete":!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",
mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",
mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",
mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",
args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",
mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},
{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},
{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",
args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",
mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},
{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},
{keys:{mac:"Ctrl-Space"},command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",
mac:"Meta-,"},command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},
{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},
{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},
{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",
mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},
{keys:"Alt-Shift-4",command:"spell check word"},{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Nq.Rectangle.inset(4,
2,4,2),fontSize:Nq.isMac?12:16,clipMode:"auto"},modes:{text:{style:{}}}},systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:"/lively.morphic/assets/ibm-plex/css/ibm-plex.css",fontAwesome:"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css",inconsolata:"/lively.morphic/assets/inconsolata/inconsolata.css"}};var am=Ba("a8",Nq.config);Nq.default=am;var zi=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
zi.styleProps=hy;zi.addTransform=SF;zi.addTransformOrigin=function(e,k){if(e=e.origin)k.transformOrigin=e.x+"px "+e.y+"px"};zi.addDisplay=function(e,k){e=e.visible;null!=e&&(k.display=e?"":"none")};zi.addBorderRadius=function(e,k){var n=e.borderRadiusLeft,b=e.borderRadiusRight,d=e.borderRadiusBottom;e=e.borderRadiusTop;k.borderRadius=e+"px "+e+"px "+d+"px "+d+"px / "+n+"px "+b+"px "+b+"px "+n+"px"};zi.addBorder=function(e,k){var n=e.borderWidthLeft,b=e.borderColorLeft,d=e.borderStyleLeft,m=e.borderWidthRight,
a=e.borderColorRight,g=e.borderStyleRight,l=e.borderColor,r=e.borderWidthBottom,v=e.borderColorBottom,y=e.borderStyleBottom,A=e.borderWidthTop,E=e.borderColorTop;e=e.borderStyleTop;var F=function(G){return zi.bowser.safari?zi.string.camelize(G):G};k[F("border-left-style")]=""+d;k[F("border-right-style")]=""+g;k[F("border-bottom-style")]=""+y;k[F("border-top-style")]=""+e;k[F("border-left-width")]=n+"px";k[F("border-right-width")]=m+"px";k[F("border-bottom-width")]=r+"px";k[F("border-top-width")]=
A+"px";k[F("border-top-color")]=E?E.toString():"transparent";k[F("border-right-color")]=a?a.toString():"transparent";k[F("border-bottom-color")]=v?v.toString():"transparent";k[F("border-left-color")]=b?b.toString():"transparent";l&&l.isGradient&&(k["border-image"]=l.toString())};zi.addFill=function(e,k){(e=e.fill)?e.isGradient?k.backgroundImage=e.toString():k.background=e.toString():k.background=zi.Color.transparent.toString()};zi.addExtentStyle=function(e,k){e=e.extent;k.width=e.x+"px";k.height=
e.y+"px"};zi.shadowCss=function(e){return e.dropShadow?e.dropShadow.toFilterCss():""};zi.addShadowStyle=function(e,k){e.isSvgMorph||e.isImage?k.filter=zi.shadowCss(e):(e=e.dropShadow)&&e.fast||e&&e.inset?k.boxShadow=e?e.toCss():"none":k.filter=e?e.toFilterCss():""};zi.addSvgAttributes=tA;zi.getSvgVertices=iy;zi.addPathAttributes=jy;zi.addSvgBorderStyle=function(e,k){var n=e.borderStyle.valueOf();"dashed"===n?(e=e.borderWidth.valueOf(),k["stroke-dasharray"]=1.61*e+" "+e):"dotted"===n&&(k["stroke-dasharray"]=
"1 "+2*e.borderWidth.valueOf(),k["stroke-linecap"]="round",k["stroke-linejoin"]="round");return k};zi.config=am;zi.pt=th;zi.Color=Tg;zi.arr=ng;zi.num=sm;zi.string=Li;zi.bowser=qv;zi.styleProps=hy;zi.styleProps=hy;zi.addTransform=SF;zi.addTransform=SF;zi.addSvgAttributes=tA;zi.addSvgAttributes=tA;zi.getSvgVertices=iy;zi.getSvgVertices=iy;zi.addPathAttributes=jy;zi.addPathAttributes=jy;var hf=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");hf.defaultStyle=ky;hf.MorphAfterRenderHook=
function(e,k){this.morph=e;this.renderer=k};hf.Animation=function(e){this.morph=e};hf.SvgAnimation=bD;hf.defaultAttributes=ly;hf.svgAttributes=cD;hf.pathAttributes=dD;hf.renderGradient=eD;hf.initDOMState=function(e,k){e.rootNode.appendChild(e.domNode);e.ensureDefaultCSS().then(function(){return hf.promise.delay(500)}).then(function(){return k.env.fontMetric&&k.env.fontMetric.reset()}).then(function(){return k.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=(n.metadata||{}).serializationInfo;
b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};hf.renderMorph=zw;hf.renderSubTree=uA;hf.renderRootMorph=fD;hf.vdom=AH;hf.parser=Doa;hf.num=sm;hf.obj=Ng;hf.arr=ng;hf.properties=Uo;hf.promise=xh;hf.Color=Tg;hf.RadialGradient=mp;hf.pt=th;hf.Point=Yg;hf.LinearGradient=qn;hf.rect=Gl;hf.config=am;hf.styleProps=hy;hf.addSvgAttributes=tA;hf.addPathAttributes=jy;hf.bowser=qv;var MM=hf.vdom;hf.h=MM.h;hf.diff=MM.diff;hf.patch=MM.patch;hf.createNode=MM.create;hf.defaultCSS=
"\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
hf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
hf.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var ds=Ba("bf",function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=k.hasOwnProperty("ShadowObject")&&"function"===typeof k.ShadowObject?k.ShadowObject:k.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){hf.obj.isBoolean(b)&&(b=hf.config.defaultShadow);var d=b;b=d.rotation;var m=d.distance,
a=d.blur,g=d.color,l=d.morph,r=d.inset,v=d.spread;d=d.fast;this.rotation=hf.obj.isNumber(b)?b:45;this.distance=hf.obj.isNumber(m)?m:2;this.blur=hf.obj.isNumber(a)?a:6;this.inset=r||!1;this.spread=v||0;this.color=g||hf.Color.gray.darker();this.morph=l;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),d=b.distance,m=b.rotation,a=b.color,g=b.inset,l=b.blur,r=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:m,color:a,inset:g,blur:l,spread:r,fast:b}).map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;y=y.next().value;return v+":"+y})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"toCss",value:function(){var b=
this.color,d=this.inset,m=this.blur,a=this.spread,g=hf.Point.polar(this.distance,hf.num.toRadians(this.rotation)),l=g.y;return(d?"inset":"")+" "+b.toString()+" "+g.x.toFixed(2)+"px "+l.toFixed(2)+"px "+m+"px "+a+"px"}},{key:"toJson",value:function(){return hf.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",value:function(b){return!!b&&hf.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,d=this.color,m=hf.Point.polar(this.distance,
hf.num.toRadians(this.rotation)),a=m.x;m=m.y;b=hf.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+m.toFixed(2)+"px "+b.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(b,d){return new hf.ShadowObject({distance:hf.num.interpolate(b,this.distance,d.distance),rotation:hf.num.interpolate(b,this.rotation,d.rotation),color:this.color.interpolate(b,d.color),blur:hf.num.interpolate(b,this.blur,d.blur),spread:hf.num.interpolate(b,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],
[{key:"className",get:function(){return"ShadowObject"}}],k,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3438,end:6875})}(void 0));hf.ShadowObject=ds;hf.ShadowObject=ds;hf.ShadowObject=ds;hf.defaultStyle=ky;hf.defaultStyle=ky;hf.MorphAfterRenderHook.prototype.hook=function(e,
k,n,b){var d=this;b=void 0===b?0:b;var m=!!e.parentNode;m&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,e));m||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(e)):(b++,setTimeout(function(){return d.hook(e,k,n,b)},20*b))};hf.MorphAfterRenderHook.prototype.updateScroll=function(e,k,n){var b=this,d=e.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;
if(k&&d)return d.then(function(){return b.updateScroll(e,k,!0)});if(!e.isWorld&&k){d=e.scroll;var m=d.x,a=d.y;if(!e._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var g=e.isText&&e.viewState.fastScroll?k.querySelector(".scrollLayer"):k;!e._skipScrollUpdate&&g&&(g.scrollTop!==a&&(g.scrollTop=a),g.scrollLeft!==m&&(g.scrollLeft=m),!n&&requestAnimationFrame(function(){g.scrollTop!==a&&(g.scrollTop=a);g.scrollLeft!==m&&(g.scrollLeft=m)},e.id))}}};hf.MorphAfterRenderHook.prototype.unhook=
function(e,k){};hf.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(e,k){var n=this;e.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,k.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,k)})};hf.Animation.prototype.hook=function(e){this.morph._animationQueue.startAnimationsFor(e)};hf.SvgAnimation=bD;hf.SvgAnimation=bD;hf.SvgAnimation.prototype.hook=function(e){this.morph._animationQueue.startSvgAnimationsFor(e,this.type)};hf.defaultAttributes=ly;hf.defaultAttributes=ly;hf.svgAttributes=
cD;hf.svgAttributes=cD;hf.pathAttributes=dD;hf.pathAttributes=dD;hf.renderGradient=eD;hf.renderGradient=eD;hf.renderMorph=zw;hf.renderMorph=zw;hf.renderSubTree=uA;hf.renderSubTree=uA;hf.renderRootMorph=fD;hf.renderRootMorph=fD;var Tc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ZU={};!function(e,k){k(ZU)}(ZU,function(e){function k(ma){return 10===ma||13===ma||8232===ma||8233===ma||32===ma||9===ma||11===ma||12===ma||160===ma||5760<=ma&&0<=wB.indexOf(ma)}function n(ma){return 48<=
ma&&57>=ma}function b(ma){(this||Tc).index=0;(this||Tc).path=ma;(this||Tc).max=ma.length;(this||Tc).result=[];(this||Tc).param=0;(this||Tc).err="";(this||Tc).segmentStart=0;(this||Tc).data=[]}function d(ma){for(;ma.index<ma.max&&k(ma.path.charCodeAt(ma.index));)ma.index++}function m(ma){var Ma,Da=ma.index,Ta=Da,kb=ma.max,fc=!1,Ya=!1,Yb=!1,Ib=!1;if(Ta>=kb)return void(ma.err="SvgPath: missed param (at pos "+Ta+")");if(Ma=ma.path.charCodeAt(Ta),43!==Ma&&45!==Ma||(Ta++,Ma=Ta<kb?ma.path.charCodeAt(Ta):
0),!n(Ma)&&46!==Ma)return void(ma.err="SvgPath: param should start with 0..9 or `.` (at pos "+Ta+")");if(46!==Ma){if(fc=48===Ma,Ta++,Ma=Ta<kb?ma.path.charCodeAt(Ta):0,fc&&Ta<kb&&Ma&&n(Ma))return void(ma.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Da+")");for(;Ta<kb&&n(ma.path.charCodeAt(Ta));)Ta++,Ya=!0;Ma=Ta<kb?ma.path.charCodeAt(Ta):0}if(46===Ma){Ib=!0;for(Ta++;n(ma.path.charCodeAt(Ta));)Ta++,Yb=!0;Ma=Ta<kb?ma.path.charCodeAt(Ta):0}if(101===Ma||69===Ma){if(Ib&&!Ya&&
!Yb||(Ta++,Ma=Ta<kb?ma.path.charCodeAt(Ta):0,43!==Ma&&45!==Ma||Ta++,!(Ta<kb&&n(ma.path.charCodeAt(Ta)))))return void(ma.err="SvgPath: invalid float exponent (at pos "+Ta+")");for(;Ta<kb&&n(ma.path.charCodeAt(Ta));)Ta++}ma.index=Ta;ma.param=parseFloat(ma.path.slice(Da,Ta))+0}function a(){if(!((this||Tc)instanceof a))return new a;(this||Tc).queue=[];(this||Tc).cache=null}function g(ma,Ma,Da,Ta){var kb=(ma*Da+Ma*Ta)/(Math.sqrt(ma*ma+Ma*Ma)*Math.sqrt(ma*ma+Ma*Ma));return 1<kb&&(kb=1),-1>kb&&(kb=-1),(0>
ma*Ta-Ma*Da?-1:1)*Math.acos(kb)}function l(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib,md){var Ob=md*(ma-Da)/2+Ib*(Ma-Ta)/2,me=-Ib*(ma-Da)/2+md*(Ma-Ta)/2,He=Ya*Ya,Zf=Yb*Yb,Xf=Ob*Ob,bf=me*me,$f=He*Zf-He*bf-Zf*Xf;0>$f&&($f=0);$f=Math.sqrt($f/(He*bf+Zf*Xf))*(kb===fc?-1:1);kb=$f*Ya/Yb*me;$f=$f*-Yb/Ya*Ob;ma=md*kb-Ib*$f+(ma+Da)/2;Ma=Ib*kb+md*$f+(Ma+Ta)/2;Ta=(Ob-kb)/Ya;Ib=(me-$f)/Yb;Ya=(-Ob-kb)/Ya;me=(-me-$f)/Yb;Yb=g(1,0,Ta,Ib);me=g(Ta,Ib,Ya,me);return 0===fc&&0<me&&(me-=xB),1===fc&&0>me&&(me+=xB),[ma,Ma,Yb,me]}function r(ma,
Ma){var Da=4/3*Math.tan(Ma/4),Ta=Math.cos(ma),kb=Math.sin(ma),fc=Math.cos(ma+Ma);ma=Math.sin(ma+Ma);return[Ta,kb,Ta-kb*Da,kb+Ta*Da,fc+ma*Da,ma-fc*Da,fc,ma]}function v(ma,Ma,Da){if(!((this||Tc)instanceof v))return new v(ma,Ma,Da);(this||Tc).rx=ma;(this||Tc).ry=Ma;(this||Tc).ax=Da}function y(ma){if(!((this||Tc)instanceof y))return new y(ma);ma=new b(ma);var Ma=ma.max;for(d(ma);ma.index<Ma&&!ma.err.length;)a:{var Da,Ta=void 0,kb=ma,fc=kb.max;kb.segmentStart=kb.index;var Ya=kb.path.charCodeAt(kb.index);
b:{switch(32|Ya){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:Ya=!0;break b}Ya=!1}if(Ya){if(Ta=rv[kb.path[kb.index].toLowerCase()],kb.index++,d(kb),kb.data=[],Ta)for(Ya=!1;;){for(Da=Ta;0<Da;Da--){if(m(kb),kb.err.length)break a;kb.data.push(kb.param);d(kb);Ya=!1;kb.index<fc&&44===kb.path.charCodeAt(kb.index)&&(kb.index++,d(kb),Ya=!0)}if(!Ya){if(kb.index>=kb.max)break;Da=kb.path.charCodeAt(kb.index);if(!(48<=Da&&57>=Da||43===Da||45===Da||46===Da))break}}fc=
kb;kb=fc.path[fc.segmentStart];Ta=kb.toLowerCase();Ya=fc.data;if("m"===Ta&&2<Ya.length&&(fc.result.push([kb,Ya[0],Ya[1]]),Ya=Ya.slice(2),Ta="l",kb="m"===kb?"l":"L"),"r"===Ta)fc.result.push([kb].concat(Ya));else for(;Ya.length>=rv[Ta]&&(fc.result.push([kb].concat(Ya.splice(0,rv[Ta]))),rv[Ta]););}else kb.err="SvgPath: bad command "+kb.path[kb.index]+" (at pos "+kb.index+")"}ma=(ma.err.length?ma.result=[]:ma.result.length&&(0>"mM".indexOf(ma.result[0][0])?(ma.err="SvgPath: string should start with `M` or `m`",
ma.result=[]):ma.result[0][0]="M"),{err:ma.err,segments:ma.result});(this||Tc).segments=ma.segments;(this||Tc).err=ma.err;(this||Tc).__stack=[]}function A(ma,Ma,Da,Ta,kb,fc,Ya,Yb){(this||Tc).a={x:ma,y:Ma};(this||Tc).b={x:Da,y:Ta};(this||Tc).c={x:kb,y:fc};(this||Tc).d={x:Ya,y:Yb};null!==Ya&&void 0!==Ya&&null!==Yb&&void 0!==Yb?((this||Tc).getArcLength=R,(this||Tc).getPoint=M,(this||Tc).getDerivative=F):((this||Tc).getArcLength=L,(this||Tc).getPoint=I,(this||Tc).getDerivative=E);this.init()}function E(ma,
Ma,Da){return{x:2*(1-Da)*(ma[1]-ma[0])+2*Da*(ma[2]-ma[1]),y:2*(1-Da)*(Ma[1]-Ma[0])+2*Da*(Ma[2]-Ma[1])}}function F(ma,Ma,Da){return I([3*(ma[1]-ma[0]),3*(ma[2]-ma[1]),3*(ma[3]-ma[2])],[3*(Ma[1]-Ma[0]),3*(Ma[2]-Ma[1]),3*(Ma[3]-Ma[2])],Da)}function G(ma,Ma,Da,Ta,kb){for(var fc=1,Ya=ma/Ma,Yb=(ma-Da(Ta,kb,Ya))/Ma;.001<fc;){var Ib=Da(Ta,kb,Ya+Yb),md=Da(Ta,kb,Ya-Yb);Ib=Math.abs(ma-Ib)/Ma;md=Math.abs(ma-md)/Ma;Ib<fc?(fc=Ib,Ya+=Yb):md<fc?(fc=md,Ya-=Yb):Yb/=2}return Ya}function I(ma,Ma,Da){return{x:(1-Da)*
(1-Da)*ma[0]+2*(1-Da)*Da*ma[1]+Da*Da*ma[2],y:(1-Da)*(1-Da)*Ma[0]+2*(1-Da)*Da*Ma[1]+Da*Da*Ma[2]}}function M(ma,Ma,Da){return{x:(1-Da)*(1-Da)*(1-Da)*ma[0]+3*(1-Da)*(1-Da)*Da*ma[1]+3*(1-Da)*Da*Da*ma[2]+Da*Da*Da*ma[3],y:(1-Da)*(1-Da)*(1-Da)*Ma[0]+3*(1-Da)*(1-Da)*Da*Ma[1]+3*(1-Da)*Da*Da*Ma[2]+Da*Da*Da*Ma[3]}}function L(ma,Ma,Da){void 0===Da&&(Da=1);var Ta=ma[0]-2*ma[1]+ma[2],kb=Ma[0]-2*Ma[1]+Ma[2],fc=2*ma[1]-2*ma[0],Ya=2*Ma[1]-2*Ma[0],Yb=4*(Ta*Ta+kb*kb);if(0===Yb)return Da*Math.sqrt(Math.pow(ma[2]-ma[0],
2)+Math.pow(Ma[2]-Ma[0],2));ma=4*(Ta*fc+kb*Ya)/(2*Yb);Da+=ma;fc=(fc*fc+Ya*Ya)/Yb-ma*ma;return Math.sqrt(Yb)/2*(Da*Math.sqrt(Da*Da+fc)-ma*Math.sqrt(ma*ma+fc)+fc*Math.log(Math.abs((Da+Math.sqrt(Da*Da+fc))/(ma+Math.sqrt(ma*ma+fc)))))}function S(ma,Ma,Da){var Ta,kb=Da.length-1;if(0===kb)return 0;if(0===ma){for(Ta=ma=0;Ta<=kb;Ta++)ma+=$U[kb][Ta]*Math.pow(1-Ma,kb-Ta)*Math.pow(Ma,Ta)*Da[Ta];return ma}var fc=Array(kb);for(Ta=0;Ta<kb;Ta++)fc[Ta]=kb*(Da[Ta+1]-Da[Ta]);return S(ma-1,Ma,fc)}function R(ma,Ma,Da){var Ta,
kb;void 0===Da&&(Da=1);Da/=2;for(kb=Ta=0;20>kb;kb++){var fc=Da*aV[20][kb]+Da;var Ya=bV[20][kb],Yb=Ma,Ib=fc;fc=S(1,Ib,ma);Yb=S(1,Ib,Yb);Ta+=Ya*Math.sqrt(fc*fc+Yb*Yb)}return Da*Ta}function aa(ma,Ma,Da,Ta){var kb=ma*Da+Ma*Ta;return 1<kb&&(kb=1),-1>kb&&(kb=-1),(0>ma*Ta-Ma*Da?-1:1)*Math.acos(kb)}function ra(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib,md){var Ob=md*(ma-Da)/2+Ib*(Ma-Ta)/2,me=-Ib*(ma-Da)/2+md*(Ma-Ta)/2,He=Ya*Ya,Zf=Yb*Yb,Xf=Ob*Ob,bf=me*me,$f=He*Zf-He*bf-Zf*Xf;0>$f&&($f=0);$f=Math.sqrt($f/(He*bf+Zf*Xf))*(kb===
fc?-1:1);kb=$f*Ya/Yb*me;$f=$f*-Yb/Ya*Ob;ma=md*kb-Ib*$f+(ma+Da)/2;Ma=Ib*kb+md*$f+(Ma+Ta)/2;Ta=(Ob-kb)/Ya;Ib=(me-$f)/Yb;Ya=(-Ob-kb)/Ya;me=(-me-$f)/Yb;Yb=aa(1,0,Ta,Ib);me=aa(Ta,Ib,Ya,me);return 0===fc&&0<me&&(me-=yB),1===fc&&0>me&&(me+=yB),[ma,Ma,Yb,me]}function Ea(ma,Ma){var Da=4/3*Math.tan(Ma/4),Ta=Math.cos(ma),kb=Math.sin(ma),fc=Math.cos(ma+Ma);ma=Math.sin(ma+Ma);return[Ta,kb,Ta-kb*Da,kb+Ta*Da,fc+ma*Da,ma-fc*Da,fc,ma]}function K(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib){var md=0,Ob=[],me=[];cV(ma,Ma,Da,Ta,kb,fc,
Ya,Yb,Ib).forEach(function(He){He=new Oq(He[0],He[1],He[2],He[3],He[4],He[5],He[6],He[7]);var Zf=He.getTotalLength();md+=Zf;Ob.push(Zf);me.push(He)});(this||Tc).length=md;(this||Tc).partialLengths=Ob;(this||Tc).curves=me}function Z(ma,Ma,Da,Ta){(this||Tc).x0=ma;(this||Tc).x1=Ma;(this||Tc).y0=Da;(this||Tc).y1=Ta}function U(ma,Ma){return Math.sqrt((ma[0]-Ma[0])*(ma[0]-Ma[0])+(ma[1]-Ma[1])*(ma[1]-Ma[1]))}function V(ma,Ma,Da){return[ma[0]+(Ma[0]-ma[0])*Da,ma[1]+(Ma[1]-ma[1])*Da]}function na(ma,Ma,Da){var Ta=
ma.map(function(kb,fc){return la(kb,Ma[fc])});return function(kb){var fc=Ta.map(function(Ya){return Ya(kb)});return Da?ka(fc):fc}}function la(ma,Ma){return function(Da){return ma.map(function(Ta,kb){return Ta+Da*(Ma[kb]-Ta)})}}function ya(ma){return"number"==typeof ma&&isFinite(ma)}function jb(ma){var Ma;a:{for(Ma=0;Ma<ma.length-2;Ma++){var Da=ma[Ma],Ta=ma[Ma+1],kb=ma[Ma+2];if(Da[0]*(Ta[1]-kb[1])+Ta[0]*(kb[1]-Da[1])+kb[0]*(Da[1]-Ta[1])){Ma=!0;break a}}Ma=!1}if(Ma){kb=-1;var fc=ma.length,Ya=0,Yb=0,
Ib=ma[fc-1];for(Ma=0;++kb<fc;)Da=Ib,Ib=ma[kb],Ma+=Ta=Da[0]*Ib[1]-Ib[0]*Da[1],Ya+=(Da[0]+Ib[0])*Ta,Yb+=(Da[1]+Ib[1])*Ta;ma=(Ma*=3,[Ya/Ma,Yb/Ma])}else ma=[(ma[0][0]+ma[ma.length-1][0])/2,(ma[0][1]+ma[ma.length-1][1])/2];return ma}function gb(ma){return ma.toString().split("M").map(function(Ma,Da){return Ma=Ma.trim(),Da&&Ma?"M"+Ma:Ma}).filter(function(Ma){return Ma})}function ka(ma){return"M"+ma.join("L")+"Z"}function ia(ma,Ma){var Da=ma.length+Ma;Ma=bx(ma)/Ma;for(var Ta=0,kb=0,fc=Ma/2;ma.length<Da;){var Ya=
ma[Ta],Yb=ma[(Ta+1)%ma.length],Ib=U(Ya,Yb);fc<=kb+Ib?(ma.splice(Ta+1,0,Ib?V(Ya,Yb,(fc-kb)/Ib):Ya.slice(0)),fc+=Ma):(kb+=Ib,Ta++)}}function qa(ma,Ma){var Da;if("string"==typeof ma){ma=(new NM(ma)).abs();a:{var Ta=ma.segments||[];var kb=[];if(Ta.length&&"M"===Ta[0][0]){for(var fc=0;fc<Ta.length;fc++){var Ya=Ta[fc],Yb=Ya[0],Ib=Ya[1];Ya=Ya[2];if("M"===Yb&&fc||"Z"===Yb)break;if("M"===Yb||"L"===Yb)kb.push([Ib,Ya]);else if("H"===Yb)kb.push([Ib,kb[kb.length-1][1]]);else{if("V"!==Yb){Ta=!1;break a}kb.push([kb[kb.length-
1][0],Ib])}}Ta=!!kb.length&&{ring:kb}}else Ta=!1}if(!Ta){kb=gb(ma)[0];ma=[];Ta=3;if(!kb)throw new TypeError(BH);a:{if("undefined"!=typeof window&&window&&window.document)try{var md=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Ob=(md.setAttributeNS(null,"d",kb),md);break a}catch(me){}Ob=dV(kb)}md=Ob;Ob=md.getTotalLength();Ma&&ya(Ma)&&0<Ma&&(Ta=Math.max(Ta,Math.ceil(Ob/Ma)));for(kb=0;kb<Ta;kb++)fc=md.getPointAtLength(Ob*kb/Ta),ma.push([fc.x,fc.y]);Ta={ring:ma,skipBisect:!0}}Ob=
Ta;ma=Ob.ring;Ta=Ob.skipBisect}else if(!Array.isArray(ma))throw new TypeError(BH);if(Da=ma.slice(0),!La(Da))throw new TypeError(BH);1<Da.length&&1E-9>U(Da[0],Da[Da.length-1])&&Da.pop();0<bz(Da)&&Da.reverse();if(!Ta&&Ma&&ya(Ma)&&0<Ma)for(void 0===Ma&&(Ma=1/0),Ob=0;Ob<Da.length;Ob++)for(md=Da[Ob],ma=Ob===Da.length-1?Da[0]:Da[Ob+1];U(md,ma)>Ma;)ma=V(md,ma,.5),Da.splice(Ob+1,0,ma);return Da}function La(ma){return ma.every(function(Ma){return Array.isArray(Ma)&&2<=Ma.length&&ya(Ma[0])&&ya(Ma[1])})}function Lb(ma,
Ma,Da){var Ta;return Ta=ma.length-Ma.length,ia(ma,0>Ta?-1*Ta:0),ia(Ma,0<Ta?Ta:0),OM(ma,Ma),na(ma,Ma,Da)}function qc(ma,Ma,Da){Da=Da||2;var Ta=Ma&&Ma.length,kb=Ta?Ma[0]*Da:ma.length,fc=dc(ma,0,kb,Da,!0),Ya=[];if(!fc)return Ya;var Yb;if(Ta){var Ib=Da,md;var Ob=[];Ta=0;for(md=Ma.length;Ta<md;Ta++){var me=Ma[Ta]*Ib;var He=Ta<md-1?Ma[Ta+1]*Ib:ma.length;me=dc(ma,me,He,Ib,!1);me===me.next&&(me.steiner=!0);Ob.push(ha(me))}Ob.sort(Vb);for(Ta=0;Ta<Ob.length;Ta++){Ma=Ob[Ta];Ib=fc;if(Ib=Hd(Ma,Ib))Ma=Td(Ib,Ma),
oc(Ma,Ma.next);fc=oc(fc,fc.next)}}if(ma.length>80*Da){var Zf=Yb=ma[0];var Xf=Ta=ma[1];for(Ib=Da;Ib<kb;Ib+=Da)Ob=ma[Ib],Ma=ma[Ib+1],Ob<Zf&&(Zf=Ob),Ma<Xf&&(Xf=Ma),Ob>Yb&&(Yb=Ob),Ma>Ta&&(Ta=Ma);Yb=Math.max(Yb-Zf,Ta-Xf)}return $c(fc,Ya,Da,Zf,Xf,Yb),Ya}function dc(ma,Ma,Da,Ta,kb){if(kb===0<ii(ma,Ma,Da,Ta))for(kb=Ma;kb<Da;kb+=Ta)var fc=cd(kb,ma[kb],ma[kb+1],fc);else for(kb=Da-Ta;kb>=Ma;kb-=Ta)fc=cd(kb,ma[kb],ma[kb+1],fc);return fc&&yb(fc,fc.next)&&(gf(fc),fc=fc.next),fc}function oc(ma,Ma){if(!ma)return ma;
Ma||(Ma=ma);var Da=ma;do if(ma=!1,Da.steiner||!yb(Da,Da.next)&&0!==Na(Da.prev,Da,Da.next))Da=Da.next;else{if(gf(Da),(Da=Ma=Da.prev)===Da.next)return null;ma=!0}while(ma||Da!==Ma);return Ma}function $c(ma,Ma,Da,Ta,kb,fc,Ya){if(ma){if(!Ya&&fc){var Yb=ma,Ib=Yb;do null===Ib.z&&(Ib.z=be(Ib.x,Ib.y,Ta,kb,fc)),Ib.prevZ=Ib.prev,Ib=Ib.nextZ=Ib.next;while(Ib!==Yb);Ib.prevZ.nextZ=null;Ib.prevZ=null;Yb=Ib;var md,Ob,me,He,Zf=1;do{Ib=Yb;var Xf=Yb=null;for(me=0;Ib;){me++;var bf=Ib;for(md=He=0;md<Zf&&(He++,bf=bf.nextZ);md++);
for(md=Zf;0<He||0<md&&bf;)0===He?(Ob=bf,bf=bf.nextZ,md--):0!==md&&bf?Ib.z<=bf.z?(Ob=Ib,Ib=Ib.nextZ,He--):(Ob=bf,bf=bf.nextZ,md--):(Ob=Ib,Ib=Ib.nextZ,He--),Xf?Xf.nextZ=Ob:Yb=Ob,Ob.prevZ=Xf,Xf=Ob;Ib=bf}Xf.nextZ=null;Zf*=2}while(1<me)}for(Ib=ma;ma.prev!==ma.next;){Ob=ma.prev;Yb=ma.next;if(fc)a:{bf=ma;md=Ta;var $f=kb,Jo=fc;Xf=bf.prev;me=bf;He=bf.next;if(0<=Na(Xf,me,He))bf=!1;else{var eV=Xf.x>me.x?Xf.x>He.x?Xf.x:He.x:me.x>He.x?me.x:He.x,fV=Xf.y>me.y?Xf.y>He.y?Xf.y:He.y:me.y>He.y?me.y:He.y;Zf=be(Xf.x<me.x?
Xf.x<He.x?Xf.x:He.x:me.x<He.x?me.x:He.x,Xf.y<me.y?Xf.y<He.y?Xf.y:He.y:me.y<He.y?me.y:He.y,md,$f,Jo);md=be(eV,fV,md,$f,Jo);for($f=bf.nextZ;$f&&$f.z<=md;){if($f!==bf.prev&&$f!==bf.next&&Ca(Xf.x,Xf.y,me.x,me.y,He.x,He.y,$f.x,$f.y)&&0<=Na($f.prev,$f,$f.next)){bf=!1;break a}$f=$f.nextZ}for($f=bf.prevZ;$f&&$f.z>=Zf;){if($f!==bf.prev&&$f!==bf.next&&Ca(Xf.x,Xf.y,me.x,me.y,He.x,He.y,$f.x,$f.y)&&0<=Na($f.prev,$f,$f.next)){bf=!1;break a}$f=$f.prevZ}bf=!0}}else a:if(bf=ma,Xf=bf.prev,me=bf,He=bf.next,0<=Na(Xf,
me,He))bf=!1;else{for(Zf=bf.next.next;Zf!==bf.prev;){if(Ca(Xf.x,Xf.y,me.x,me.y,He.x,He.y,Zf.x,Zf.y)&&0<=Na(Zf.prev,Zf,Zf.next)){bf=!1;break a}Zf=Zf.next}bf=!0}if(bf)Ma.push(Ob.i/Da),Ma.push(ma.i/Da),Ma.push(Yb.i/Da),gf(ma),Ib=ma=Yb.next;else if((ma=Yb)===Ib){if(Ya)if(1===Ya){Ya=Ma;Ob=Da;Yb=ma;do Ib=Yb.prev,bf=Yb.next.next,!yb(Ib,bf)&&gc(Ib,Yb,Yb.next,bf)&&Ud(Ib,bf)&&Ud(bf,Ib)&&(Ya.push(Ib.i/Ob),Ya.push(Yb.i/Ob),Ya.push(bf.i/Ob),gf(Yb),gf(Yb.next),Yb=ma=bf),Yb=Yb.next;while(Yb!==ma);ma=Yb;$c(ma,Ma,
Da,Ta,kb,fc,2)}else{if(2===Ya)a:{Ya=ma;do{for(Ob=Ya.next.next;Ob!==Ya.prev;){if(Yb=Ya.i!==Ob.i){Yb=Ya;Ib=Ob;if(bf=Yb.next.i!==Ib.i&&Yb.prev.i!==Ib.i){b:{bf=Yb;do{if(bf.i!==Yb.i&&bf.next.i!==Yb.i&&bf.i!==Ib.i&&bf.next.i!==Ib.i&&gc(bf,bf.next,Yb,Ib)){bf=!0;break b}bf=bf.next}while(bf!==Yb);bf=!1}bf=!bf}if(bf=bf&&Ud(Yb,Ib)&&Ud(Ib,Yb)){bf=Yb;Xf=!1;me=(Yb.x+Ib.x)/2;Ib=(Yb.y+Ib.y)/2;do bf.y>Ib!=bf.next.y>Ib&&me<(bf.next.x-bf.x)*(Ib-bf.y)/(bf.next.y-bf.y)+bf.x&&(Xf=!Xf),bf=bf.next;while(bf!==Yb);bf=Xf}Yb=
bf}if(Yb){ma=Td(Ya,Ob);Ya=oc(Ya,Ya.next);ma=oc(ma,ma.next);$c(Ya,Ma,Da,Ta,kb,fc);$c(ma,Ma,Da,Ta,kb,fc);break a}Ob=Ob.next}Ya=Ya.next}while(Ya!==ma)}}else $c(oc(ma),Ma,Da,Ta,kb,fc,1);break}}}}function Vb(ma,Ma){return ma.x-Ma.x}function Hd(ma,Ma){var Da=Ma,Ta=ma.x,kb=ma.y,fc=-1/0;do{if(kb<=Da.y&&kb>=Da.next.y){var Ya=Da.x+(kb-Da.y)*(Da.next.x-Da.x)/(Da.next.y-Da.y);if(Ya<=Ta&&Ya>fc){if(fc=Ya,Ya===Ta){if(kb===Da.y)return Da;if(kb===Da.next.y)return Da.next}var Yb=Da.x<Da.next.x?Da:Da.next}}Da=Da.next}while(Da!==
Ma);if(!Yb)return null;if(Ta===fc)return Yb.prev;var Ib;Ma=Yb;Ya=Yb.x;var md=Yb.y,Ob=1/0;for(Da=Yb.next;Da!==Ma;)Ta>=Da.x&&Da.x>=Ya&&Ca(kb<md?Ta:fc,kb,Ya,md,kb<md?fc:Ta,kb,Da.x,Da.y)&&((Ib=Math.abs(kb-Da.y)/(Ta-Da.x))<Ob||Ib===Ob&&Da.x>Yb.x)&&Ud(Da,ma)&&(Yb=Da,Ob=Ib),Da=Da.next;return Yb}function be(ma,Ma,Da,Ta,kb){return ma=32767*(ma-Da)/kb,Ma=32767*(Ma-Ta)/kb,ma=16711935&(ma|ma<<8),ma=252645135&(ma|ma<<4),ma=858993459&(ma|ma<<2),ma=1431655765&(ma|ma<<1),Ma=16711935&(Ma|Ma<<8),Ma=252645135&(Ma|Ma<<
4),Ma=858993459&(Ma|Ma<<2),Ma=1431655765&(Ma|Ma<<1),ma|Ma<<1}function ha(ma){var Ma=ma,Da=ma;do Ma.x<Da.x&&(Da=Ma),Ma=Ma.next;while(Ma!==ma);return Da}function Ca(ma,Ma,Da,Ta,kb,fc,Ya,Yb){return 0<=(kb-Ya)*(Ma-Yb)-(ma-Ya)*(fc-Yb)&&0<=(ma-Ya)*(Ta-Yb)-(Da-Ya)*(Ma-Yb)&&0<=(Da-Ya)*(fc-Yb)-(kb-Ya)*(Ta-Yb)}function Na(ma,Ma,Da){return(Ma.y-ma.y)*(Da.x-Ma.x)-(Ma.x-ma.x)*(Da.y-Ma.y)}function yb(ma,Ma){return ma.x===Ma.x&&ma.y===Ma.y}function gc(ma,Ma,Da,Ta){return!!(yb(ma,Ma)&&yb(Da,Ta)||yb(ma,Ta)&&yb(Da,
Ma))||0<Na(ma,Ma,Da)!=0<Na(ma,Ma,Ta)&&0<Na(Da,Ta,ma)!=0<Na(Da,Ta,Ma)}function Ud(ma,Ma){return 0>Na(ma.prev,ma,ma.next)?0<=Na(ma,Ma,ma.next)&&0<=Na(ma,ma.prev,Ma):0>Na(ma,Ma,ma.prev)||0>Na(ma,ma.next,Ma)}function Td(ma,Ma){var Da=new Ze(ma.i,ma.x,ma.y),Ta=new Ze(Ma.i,Ma.x,Ma.y),kb=ma.next,fc=Ma.prev;return ma.next=Ma,Ma.prev=ma,Da.next=kb,kb.prev=Da,Ta.next=Da,Da.prev=Ta,fc.next=Ta,Ta.prev=fc,Ta}function cd(ma,Ma,Da,Ta){ma=new Ze(ma,Ma,Da);return Ta?(ma.next=Ta.next,ma.prev=Ta,Ta.next.prev=ma,Ta.next=
ma):(ma.prev=ma,ma.next=ma),ma}function gf(ma){ma.next.prev=ma.prev;ma.prev.next=ma.next;ma.prevZ&&(ma.prevZ.nextZ=ma.nextZ);ma.nextZ&&(ma.nextZ.prevZ=ma.prevZ)}function Ze(ma,Ma,Da){(this||Tc).i=ma;(this||Tc).x=Ma;(this||Tc).y=Da;(this||Tc).prev=null;(this||Tc).next=null;(this||Tc).z=null;(this||Tc).prevZ=null;(this||Tc).nextZ=null;(this||Tc).steiner=!1}function ii(ma,Ma,Da,Ta){for(var kb=0,fc=Da-Ta;Ma<Da;Ma+=Ta)kb+=(ma[fc]-ma[Ma])*(ma[Ma+1]+ma[fc+1]),fc=Ma;return kb}function Gh(ma,Ma){var Da=Ma.id,
Ta=Ma.bbox,kb=null==Ma.properties?{}:Ma.properties;ma=Bj(ma,Ma);return null==Da&&null==Ta?{type:"Feature",properties:kb,geometry:ma}:null==Ta?{type:"Feature",id:Da,properties:kb,geometry:ma}:{type:"Feature",id:Da,bbox:Ta,properties:kb,geometry:ma}}function Bj(ma,Ma){function Da(md){return Yb(md)}function Ta(md){for(var Ob=[],me=0,He=md.length;me<He;++me){var Zf=md[me],Xf=Ob;Xf.length&&Xf.pop();for(var bf=Ib[0>Zf?~Zf:Zf],$f=0,Jo=bf.length;$f<Jo;++$f)Xf.push(Yb(bf[$f],$f));if(0>Zf)for(Zf=Xf,Xf=Zf.length,
bf=Xf-Jo;bf<--Xf;)Jo=Zf[bf],Zf[bf++]=Zf[Xf],Zf[Xf]=Jo}return 2>Ob.length&&Ob.push(Ob[0]),Ob}function kb(md){for(md=Ta(md);4>md.length;)md.push(md[0]);return md}function fc(md){return md.map(kb)}function Ya(md){var Ob=md.type;switch(Ob){case "GeometryCollection":return{type:Ob,geometries:md.geometries.map(Ya)};case "Point":md=Yb(md.coordinates);break;case "MultiPoint":md=md.coordinates.map(Da);break;case "LineString":md=Ta(md.arcs);break;case "MultiLineString":md=md.arcs.map(Ta);break;case "Polygon":md=
fc(md.arcs);break;case "MultiPolygon":md=md.arcs.map(fc);break;default:return null}return{type:Ob,coordinates:md}}var Yb=PM(ma.transform),Ib=ma.arcs;return Ya(Ma)}function rj(ma,Ma){function Da(Ib){switch(Ib.type){case "GeometryCollection":Ib.geometries.forEach(Da);break;case "Polygon":Ta(Ib.arcs);break;case "MultiPolygon":Ib.arcs.forEach(Ta)}}function Ta(Ib){Ib.forEach(function(md){md.forEach(function(Ob){(fc[Ob=0>Ob?~Ob:Ob]||(fc[Ob]=[])).push(Ib)})});Ya.push(Ib)}function kb(Ib){Ib=Bj(ma,{type:"Polygon",
arcs:[Ib]}).coordinates[0];for(var md,Ob=-1,me=Ib.length,He=Ib[me-1],Zf=0;++Ob<me;)md=He,He=Ib[Ob],Zf+=md[0]*He[1]-md[1]*He[0];return Math.abs(Zf)}var fc={},Ya=[],Yb=[];return Ma.forEach(Da),Ya.forEach(function(Ib){if(!Ib._){var md=[],Ob=[Ib];Ib._=1;for(Yb.push(md);Ib=Ob.pop();)md.push(Ib),Ib.forEach(function(me){me.forEach(function(He){fc[0>He?~He:He].forEach(function(Zf){Zf._||(Zf._=1,Ob.push(Zf))})})})}}),Ya.forEach(function(Ib){delete Ib._}),{type:"MultiPolygon",arcs:Yb.map(function(Ib){var md=
[];if(Ib.forEach(function(Xf){Xf.forEach(function(bf){bf.forEach(function($f){2>fc[0>$f?~$f:$f].length&&md.push($f)})})}),md=QM(ma,md),1<(Ib=md.length))for(var Ob,me,He=1,Zf=kb(md[0]);He<Ib;++He)(Ob=kb(md[He]))>Zf&&(me=md[0],md[0]=md[He],md[He]=me,Zf=Ob);return md})}}function Cj(ma){return function(Ma,Da){return RM(ma(Ma),Da)}}function Tj(ma,Ma){var Da={},Ta={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return ma.forEach(function(kb){var fc=[];kb.forEach(function(Ya,
Yb){Yb=Ya[0]<Ya[1]?Ya.join(","):Ya[1]+","+Ya[0];Ya=Ya.map(function(Ib){return Ma[Ib]});Yb in Da?fc.push(~Da[Yb]):(fc.push(Da[Yb]=Ta.arcs.length),Ta.arcs.push(Ya))});Ta.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(bz(kb.map(function(Ya){return Ma[Ya[0]]}))),arcs:[fc]})}),Ta.objects.triangles.geometries.sort(function(kb,fc){return kb.area-fc.area}),Ta}function bk(ma,Ma){for(var Da=ma.objects.triangles.geometries,Ta=SM(function(kb){return kb.area}).left;Da.length>Ma;)!function(){var kb=
Da[0],fc=gV(Da)[0][0],Ya=Da[fc],Yb=rj(ma,[kb,Ya]);Yb.area=kb.area+Ya.area;Yb.type="Polygon";Yb.arcs=Yb.arcs[0];Da.splice(fc,1);Da.shift();Da.splice(Ta(Da,Yb.area),0,Yb)}();if(Ma>Da.length)throw new RangeError("Can't collapse topology into "+Ma+" pieces.");return TM(ma,ma.objects.triangles).features.map(function(kb){return kb.geometry.coordinates[0].pop(),kb.geometry.coordinates[0]})}function jj(ma){ma=UM(ma.reduce(function(kb,fc){return kb.concat([fc[0]],[fc[1]])},[]));for(var Ma=[],Da=0,Ta=ma.length;Da<
Ta;Da+=3)Ma.push([[ma[Da],ma[Da+1]],[ma[Da+1],ma[Da+2]],[ma[Da+2],ma[Da]]]);return Ma}function Kh(ma,Ma,Da){function Ta(Ya,Yb,Ib){void 0===Yb&&(Yb=[]);void 0===Ib&&(Ib=0);for(var md=0;md<Ya.length;md++){var Ob=Ya.splice(md,1),me=Da[Ob[0]][Yb.length];Ib+me<kb&&(Ya.length?Ta(Ya.slice(),Yb.concat(Ob),Ib+me):(kb=Ib+me,fc=Yb.concat(Ob)));Ya.length&&Ya.splice(md,0,Ob[0])}}var kb=1/0,fc=ma.map(function(Ya,Yb){return Yb});return Ta(fc),fc}function ik(ma,Ma,Da){void 0===Da&&(Da={});var Ta=Da.maxSegmentLength;
void 0===Ta&&(Ta=10);var kb=Da.string;void 0===kb&&(kb=!0);Da=Da.single;void 0===Da&&(Da=!1);var fc=qa(ma,Ta);fc.length<Ma.length+2&&ia(fc,Ma.length+2-fc.length);var Ya;fc=zB(fc,Ma.length);var Yb=Ma.map(function(Ib){return qa(Ib,Ta)});ma="string"==typeof ma&&ma;return Da&&!Ma.every(function(Ib){return"string"==typeof Ib})||(Ya=Ma.slice(0)),Rk(fc,Yb,{match:!0,string:kb,single:Da,t0:ma,t1:Ya})}function Rk(ma,Ma,Da){void 0===Da&&(Da={});var Ta=Da.string,kb=Da.single,fc=Da.t0,Ya=Da.t1,Yb=(Da=Da.match)?
VM(ma,Ma):ma.map(function(Ob,me){return me}),Ib=Yb.map(function(Ob,me){return Lb(ma[Ob],Ma[me],Ta)});if(Da&&Array.isArray(fc)&&(fc=Yb.map(function(Ob){return fc[Ob]})),kb&&Ta&&(Array.isArray(fc)&&(fc=fc.join(" ")),Array.isArray(Ya)&&(Ya=Ya.join(" "))),kb){var md=Ta?function(Ob){return Ib.map(function(me){return me(Ob)}).join(" ")}:function(Ob){return Ib.map(function(me){return me(Ob)})};return Ta&&(fc||Ya)?function(Ob){return 1E-4>Ob&&fc||1E-4>1-Ob&&Ya||md(Ob)}:md}return Ta?(fc=Array.isArray(fc)?
fc.map(function(Ob){return"string"==typeof Ob&&Ob}):[],Ya=Array.isArray(Ya)?Ya.map(function(Ob){return"string"==typeof Ob&&Ob}):[],Ib.map(function(Ob,me){return fc[me]||Ya[me]?function(He){return 1E-4>He&&fc[me]||1E-4>1-He&&Ya[me]||Ob(He)}:Ob})):Ib}function nk(ma,Ma,Da,Ta,kb){var fc=Zd(ma,Ma,Da),Ya=ma-Da+","+Ma,Yb="A"+Da+","+Da+",0,1,1,";return cz(fc,Ta,"M"+Ya+Yb+(ma+Da+","+Ma)+Yb+Ya+"Z",2*Math.PI*Da,kb)}function Sk(ma,Ma,Da,Ta,kb,fc){var Ya=$d(ma,Ma,Da,Ta),Yb=ma+Da,Ib=Ma+Ta;return cz(Ya,kb,"M"+ma+
","+Ma+"L"+Yb+","+Ma+"L"+Yb+","+Ib+"L"+ma+","+Ib+"Z",2*Da+2*Ta,fc)}function cz(ma,Ma,Da,Ta,kb){void 0===kb&&(kb={});var fc=kb.maxSegmentLength;void 0===fc&&(fc=10);kb=kb.string;void 0===kb&&(kb=!0);var Ya,Yb;Ma=qa(Ma,fc);return ya(Ta)&&Ma.length<Ta/fc&&ia(Ma,Math.ceil(Ta/fc-Ma.length)),Ya=ma(Ma),Yb=na(Ya,Ma,kb),kb?function(Ib){return 1E-4>Ib?Da:Yb(Ib)}:Yb}function Zd(ma,Ma,Da){return function(Ta){var kb=jb(Ta),fc=bx(Ta.concat([Ta[0]])),Ya=Math.atan2(Ta[0][1]-kb[1],Ta[0][0]-kb[0]),Yb=0;return Ta.map(function(Ib,
md){var Ob;return md&&(Yb+=U(Ib,Ta[md-1])),Ob=Ya+2*Math.PI*(fc?Yb/fc:md/Ta.length),[Math.cos(Ob)*Da+ma,Math.sin(Ob)*Da+Ma]})}}function $d(ma,Ma,Da,Ta){return function(kb){var fc=jb(kb),Ya=bx(kb.concat([kb[0]]));fc=Math.atan2(kb[0][1]-fc[1],kb[0][0]-fc[0]);var Yb=0;0>fc&&(fc=2*Math.PI+fc);var Ib=fc/(2*Math.PI);return kb.map(function(md,Ob){Ob&&(Yb+=U(md,kb[Ob-1]));md=(Ib+(Ya?Yb/Ya:Ob/kb.length))%1;md=.125>=md?[1,.5+4*md]:.375>=md?[1.5-4*md,1]:.625>=md?[0,2.5-4*md]:.875>=md?[4*md-2.5,0]:[1,4*md-3.5];
return[ma+md[0]*Da,Ma+md[1]*Ta]})}}var bz=function(ma){for(var Ma,Da=-1,Ta=ma.length,kb=ma[Ta-1],fc=0;++Da<Ta;)Ma=kb,kb=ma[Da],fc+=Ma[1]*kb[0]-Ma[0]*kb[1];return fc/2},bx=function(ma){var Ma=-1,Da=ma.length,Ta=ma[Da-1],kb=Ta[0];Ta=Ta[1];for(var fc=0;++Ma<Da;){var Ya=kb;var Yb=Ta;Ta=ma[Ma];kb=Ta[0];Ta=Ta[1];Ya-=kb;Yb-=Ta;fc+=Math.sqrt(Ya*Ya+Yb*Yb)}return fc},rv={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},wB=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];
a.prototype.matrix=function(ma){return 1===ma[0]&&0===ma[1]&&0===ma[2]&&1===ma[3]&&0===ma[4]&&0===ma[5]?this||Tc:((this||Tc).cache=null,(this||Tc).queue.push(ma),this||Tc)};a.prototype.translate=function(ma,Ma){return 0===ma&&0===Ma||((this||Tc).cache=null,(this||Tc).queue.push([1,0,0,1,ma,Ma])),this||Tc};a.prototype.scale=function(ma,Ma){return 1===ma&&1===Ma||((this||Tc).cache=null,(this||Tc).queue.push([ma,0,0,Ma,0,0])),this||Tc};a.prototype.rotate=function(ma,Ma,Da){var Ta,kb,fc;return 0!==ma&&
(this.translate(Ma,Da),Ta=ma*Math.PI/180,kb=Math.cos(Ta),fc=Math.sin(Ta),(this||Tc).queue.push([kb,fc,-fc,kb,0,0]),(this||Tc).cache=null,this.translate(-Ma,-Da)),this||Tc};a.prototype.skewX=function(ma){return 0!==ma&&((this||Tc).cache=null,(this||Tc).queue.push([1,0,Math.tan(ma*Math.PI/180),1,0,0])),this||Tc};a.prototype.skewY=function(ma){return 0!==ma&&((this||Tc).cache=null,(this||Tc).queue.push([1,Math.tan(ma*Math.PI/180),0,1,0,0])),this||Tc};a.prototype.toArray=function(){var ma=this||Tc;if((this||
Tc).cache)return(this||Tc).cache;if(!(this||Tc).queue.length)return(this||Tc).cache=[1,0,0,1,0,0],(this||Tc).cache;if((this||Tc).cache=(this||Tc).queue[0],1===(this||Tc).queue.length)return(this||Tc).cache;for(var Ma=1;Ma<(this||Tc).queue.length;Ma++){var Da=ma.cache,Ta=ma.queue[Ma];ma.cache=[Da[0]*Ta[0]+Da[2]*Ta[1],Da[1]*Ta[0]+Da[3]*Ta[1],Da[0]*Ta[2]+Da[2]*Ta[3],Da[1]*Ta[2]+Da[3]*Ta[3],Da[0]*Ta[4]+Da[2]*Ta[5]+Da[4],Da[1]*Ta[4]+Da[3]*Ta[5]+Da[5]]}return(this||Tc).cache};a.prototype.calc=function(ma,
Ma,Da){var Ta;return(this||Tc).queue.length?((this||Tc).cache||((this||Tc).cache=this.toArray()),Ta=(this||Tc).cache,[ma*Ta[0]+Ma*Ta[2]+(Da?0:Ta[4]),ma*Ta[1]+Ma*Ta[3]+(Da?0:Ta[5])]):[ma,Ma]};var AB={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},BB=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,CB=/[\s,]+/,DB=function(ma){var Ma,Da,Ta=new a;return ma.split(BB).forEach(function(kb){if(kb.length){if(void 0!==AB[kb])return void(Ma=kb);switch(Da=kb.split(CB).map(function(fc){return+fc||
0}),Ma){case "matrix":return void(6===Da.length&&Ta.matrix(Da));case "scale":return void(1===Da.length?Ta.scale(Da[0],Da[0]):2===Da.length&&Ta.scale(Da[0],Da[1]));case "rotate":return void(1===Da.length?Ta.rotate(Da[0],0,0):3===Da.length&&Ta.rotate(Da[0],Da[1],Da[2]));case "translate":return void(1===Da.length?Ta.translate(Da[0],0):2===Da.length&&Ta.translate(Da[0],Da[1]));case "skewX":return void(1===Da.length&&Ta.skewX(Da[0]));case "skewY":return void(1===Da.length&&Ta.skewY(Da[0]))}}}),Ta},xB=
2*Math.PI,hV=function(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib){var md=Math.sin(Ib*xB/360),Ob=Math.cos(Ib*xB/360);Ib=Ob*(ma-Da)/2+md*(Ma-Ta)/2;var me=-md*(ma-Da)/2+Ob*(Ma-Ta)/2;if(0===Ib&&0===me||0===Ya||0===Yb)return[];Ya=Math.abs(Ya);Yb=Math.abs(Yb);Ib=Ib*Ib/(Ya*Ya)+me*me/(Yb*Yb);1<Ib&&(Ya*=Math.sqrt(Ib),Yb*=Math.sqrt(Ib));var He=l(ma,Ma,Da,Ta,kb,fc,Ya,Yb,md,Ob);ma=[];Ma=He[2];Da=He[3];Ta=Math.max(Math.ceil(Math.abs(Da)/(xB/4)),1);Da/=Ta;for(kb=0;kb<Ta;kb++)ma.push(r(Ma,Da)),Ma+=Da;return ma.map(function(Zf){for(var Xf=
0;Xf<Zf.length;Xf+=2){var bf=Zf[Xf+0],$f=Zf[Xf+1];bf*=Ya;$f*=Yb;var Jo=md*bf+Ob*$f;Zf[Xf+0]=Ob*bf-md*$f+He[0];Zf[Xf+1]=Jo+He[1]}return Zf})},WM=Math.PI/180;v.prototype.transform=function(ma){var Ma=Math.cos((this||Tc).ax*WM),Da=Math.sin((this||Tc).ax*WM),Ta=[(this||Tc).rx*(ma[0]*Ma+ma[2]*Da),(this||Tc).rx*(ma[1]*Ma+ma[3]*Da),(this||Tc).ry*(-ma[0]*Da+ma[2]*Ma),(this||Tc).ry*(-ma[1]*Da+ma[3]*Ma)];ma=Ta[0]*Ta[0]+Ta[2]*Ta[2];Ma=Ta[1]*Ta[1]+Ta[3]*Ta[3];Da=((Ta[0]-Ta[3])*(Ta[0]-Ta[3])+(Ta[2]+Ta[1])*(Ta[2]+
Ta[1]))*((Ta[0]+Ta[3])*(Ta[0]+Ta[3])+(Ta[2]-Ta[1])*(Ta[2]-Ta[1]));var kb=(ma+Ma)/2;if(Da<1E-10*kb)return(this||Tc).rx=(this||Tc).ry=Math.sqrt(kb),(this||Tc).ax=0,this||Tc;Ta=Ta[0]*Ta[1]+Ta[2]*Ta[3];Da=Math.sqrt(Da);var fc=kb+Da/2;Da=kb-Da/2;return(this||Tc).ax=1E-10>Math.abs(Ta)&&1E-10>Math.abs(fc-Ma)?90:180*Math.atan(Math.abs(Ta)>Math.abs(fc-Ma)?(fc-ma)/Ta:Ta/(fc-Ma))/Math.PI,0<=(this||Tc).ax?((this||Tc).rx=Math.sqrt(fc),(this||Tc).ry=Math.sqrt(Da)):((this||Tc).ax+=90,(this||Tc).rx=Math.sqrt(Da),
(this||Tc).ry=Math.sqrt(fc)),this||Tc};v.prototype.isDegenerate=function(){return(this||Tc).rx<1E-10*(this||Tc).ry||(this||Tc).ry<1E-10*(this||Tc).rx};y.prototype.__matrix=function(ma){var Ma,Da=this||Tc;ma.queue.length&&this.iterate(function(Ta,kb,fc,Ya){switch(Ta[0]){case "v":var Yb=ma.calc(0,Ta[1],!0);fc=0===Yb[0]?["v",Yb[1]]:["l",Yb[0],Yb[1]];break;case "V":Yb=ma.calc(fc,Ta[1],!1);fc=Yb[0]===ma.calc(fc,Ya,!1)[0]?["V",Yb[1]]:["L",Yb[0],Yb[1]];break;case "h":Yb=ma.calc(Ta[1],0,!0);fc=0===Yb[1]?
["h",Yb[0]]:["l",Yb[0],Yb[1]];break;case "H":Yb=ma.calc(Ta[1],Ya,!1);fc=Yb[1]===ma.calc(fc,Ya,!1)[1]?["H",Yb[0]]:["L",Yb[0],Yb[1]];break;case "a":case "A":Yb=ma.toArray();var Ib=v(Ta[1],Ta[2],Ta[3]).transform(Yb);if(0>Yb[0]*Yb[3]-Yb[1]*Yb[2]&&(Ta[5]=Ta[5]?"0":"1"),Yb=ma.calc(Ta[6],Ta[7],"a"===Ta[0]),"A"===Ta[0]&&Ta[6]===fc&&Ta[7]===Ya||"a"===Ta[0]&&0===Ta[6]&&0===Ta[7]){fc=["a"===Ta[0]?"l":"L",Yb[0],Yb[1]];break}fc=Ib.isDegenerate()?["a"===Ta[0]?"l":"L",Yb[0],Yb[1]]:[Ta[0],Ib.rx,Ib.ry,Ib.ax,Ta[4],
Ta[5],Yb[0],Yb[1]];break;case "m":Yb=ma.calc(Ta[1],Ta[2],0<kb);fc=["m",Yb[0],Yb[1]];break;default:for(Yb=Ta[0],fc=[Yb],Ya=Yb.toLowerCase()===Yb,Ma=1;Ma<Ta.length;Ma+=2)Yb=ma.calc(Ta[Ma],Ta[Ma+1],Ya),fc.push(Yb[0],Yb[1])}Da.segments[kb]=fc},!0)};y.prototype.__evaluateStack=function(){var ma,Ma=this||Tc;if((this||Tc).__stack.length){if(1===(this||Tc).__stack.length)return this.__matrix((this||Tc).__stack[0]),void((this||Tc).__stack=[]);var Da=a();for(ma=(this||Tc).__stack.length;0<=--ma;)Da.matrix(Ma.__stack[ma].toArray());
this.__matrix(Da);(this||Tc).__stack=[]}};y.prototype.toString=function(){var ma=this||Tc,Ma=[];this.__evaluateStack();for(var Da=0;Da<(this||Tc).segments.length;Da++){var Ta=ma.segments[Da][0];Ta=0<Da&&"m"!==Ta&&"M"!==Ta&&Ta===ma.segments[Da-1][0];Ma=Ma.concat(Ta?ma.segments[Da].slice(1):ma.segments[Da])}return Ma.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};y.prototype.translate=function(ma,Ma){return(this||Tc).__stack.push(a().translate(ma,Ma||0)),this||
Tc};y.prototype.scale=function(ma,Ma){return(this||Tc).__stack.push(a().scale(ma,Ma||0===Ma?Ma:ma)),this||Tc};y.prototype.rotate=function(ma,Ma,Da){return(this||Tc).__stack.push(a().rotate(ma,Ma||0,Da||0)),this||Tc};y.prototype.skewX=function(ma){return(this||Tc).__stack.push(a().skewX(ma)),this||Tc};y.prototype.skewY=function(ma){return(this||Tc).__stack.push(a().skewY(ma)),this||Tc};y.prototype.matrix=function(ma){return(this||Tc).__stack.push(a().matrix(ma)),this||Tc};y.prototype.transform=function(ma){return ma.trim()?
((this||Tc).__stack.push(DB(ma)),this||Tc):this||Tc};y.prototype.round=function(ma){var Ma,Da=0,Ta=0,kb=0,fc=0;return ma=ma||0,this.__evaluateStack(),(this||Tc).segments.forEach(function(Ya){var Yb=Ya[0].toLowerCase()===Ya[0];switch(Ya[0]){case "H":case "h":return Yb&&(Ya[1]+=kb),kb=Ya[1]-Ya[1].toFixed(ma),void(Ya[1]=+Ya[1].toFixed(ma));case "V":case "v":return Yb&&(Ya[1]+=fc),fc=Ya[1]-Ya[1].toFixed(ma),void(Ya[1]=+Ya[1].toFixed(ma));case "Z":case "z":return kb=Da,void(fc=Ta);case "M":case "m":return Yb&&
(Ya[1]+=kb,Ya[2]+=fc),kb=Ya[1]-Ya[1].toFixed(ma),fc=Ya[2]-Ya[2].toFixed(ma),Da=kb,Ta=fc,Ya[1]=+Ya[1].toFixed(ma),void(Ya[2]=+Ya[2].toFixed(ma));case "A":case "a":return Yb&&(Ya[6]+=kb,Ya[7]+=fc),kb=Ya[6]-Ya[6].toFixed(ma),fc=Ya[7]-Ya[7].toFixed(ma),Ya[1]=+Ya[1].toFixed(ma),Ya[2]=+Ya[2].toFixed(ma),Ya[3]=+Ya[3].toFixed(ma+2),Ya[6]=+Ya[6].toFixed(ma),void(Ya[7]=+Ya[7].toFixed(ma));default:return Ma=Ya.length,Yb&&(Ya[Ma-2]+=kb,Ya[Ma-1]+=fc),kb=Ya[Ma-2]-Ya[Ma-2].toFixed(ma),fc=Ya[Ma-1]-Ya[Ma-1].toFixed(ma),
void Ya.forEach(function(Ib,md){md&&(Ya[md]=+Ya[md].toFixed(ma))})}}),this||Tc};y.prototype.iterate=function(ma,Ma){var Da,Ta=(this||Tc).segments,kb={},fc=!1,Ya=0,Yb=0,Ib=0,md=0;if(Ma||this.__evaluateStack(),Ta.forEach(function(me,He){var Zf=ma(me,He,Ya,Yb);Array.isArray(Zf)&&(kb[He]=Zf,fc=!0);He=me[0]===me[0].toLowerCase();switch(me[0]){case "m":case "M":return Ya=me[1]+(He?Ya:0),Yb=me[2]+(He?Yb:0),Ib=Ya,void(md=Yb);case "h":case "H":return void(Ya=me[1]+(He?Ya:0));case "v":case "V":return void(Yb=
me[1]+(He?Yb:0));case "z":case "Z":return Ya=Ib,void(Yb=md);default:Ya=me[me.length-2]+(He?Ya:0),Yb=me[me.length-1]+(He?Yb:0)}}),!fc)return this||Tc;var Ob=[];for(Ma=0;Ma<Ta.length;Ma++)if(void 0!==kb[Ma])for(Da=0;Da<kb[Ma].length;Da++)Ob.push(kb[Ma][Da]);else Ob.push(Ta[Ma]);return(this||Tc).segments=Ob,this||Tc};y.prototype.abs=function(){return this.iterate(function(ma,Ma,Da,Ta){Ma=ma[0];var kb=Ma.toUpperCase();if(Ma!==kb)switch(ma[0]=kb,Ma){case "v":return void(ma[1]+=Ta);case "a":return ma[6]+=
Da,void(ma[7]+=Ta);default:for(Ma=1;Ma<ma.length;Ma++)ma[Ma]+=Ma%2?Da:Ta}},!0),this||Tc};y.prototype.rel=function(){return this.iterate(function(ma,Ma,Da,Ta){var kb=ma[0],fc=kb.toLowerCase();if(kb!==fc&&(0!==Ma||"M"!==kb))switch(ma[0]=fc,kb){case "V":return void(ma[1]-=Ta);case "A":return ma[6]-=Da,void(ma[7]-=Ta);default:for(Ma=1;Ma<ma.length;Ma++)ma[Ma]-=Ma%2?Da:Ta}},!0),this||Tc};y.prototype.unarc=function(){return this.iterate(function(ma,Ma,Da,Ta){var kb,fc,Ya,Yb=[];Ma=ma[0];return"A"!==Ma&&
"a"!==Ma?null:("a"===Ma?(fc=Da+ma[6],Ya=Ta+ma[7]):(fc=ma[6],Ya=ma[7]),kb=hV(Da,Ta,fc,Ya,ma[4],ma[5],ma[1],ma[2],ma[3]),0===kb.length?[["a"===ma[0]?"l":"L",ma[6],ma[7]]]:(kb.forEach(function(Ib){Yb.push(["C",Ib[2],Ib[3],Ib[4],Ib[5],Ib[6],Ib[7]])}),Yb))}),this||Tc};y.prototype.unshort=function(){var ma,Ma,Da,Ta,kb,fc=(this||Tc).segments;return this.iterate(function(Ya,Yb,Ib,md){var Ob,me=Ya[0],He=me.toUpperCase();Yb&&("T"===He?(Ob="t"===me,Da=fc[Yb-1],"Q"===Da[0]?(ma=Da[1]-Ib,Ma=Da[2]-md):"q"===Da[0]?
(ma=Da[1]-Da[3],Ma=Da[2]-Da[4]):(ma=0,Ma=0),Ta=-ma,kb=-Ma,Ob||(Ta+=Ib,kb+=md),fc[Yb]=[Ob?"q":"Q",Ta,kb,Ya[1],Ya[2]]):"S"===He&&(Ob="s"===me,Da=fc[Yb-1],"C"===Da[0]?(ma=Da[3]-Ib,Ma=Da[4]-md):"c"===Da[0]?(ma=Da[3]-Da[5],Ma=Da[4]-Da[6]):(ma=0,Ma=0),Ta=-ma,kb=-Ma,Ob||(Ta+=Ib,kb+=md),fc[Yb]=[Ob?"c":"C",Ta,kb,Ya[1],Ya[2],Ya[3],Ya[4]]))}),this||Tc};var NM=y,CH={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},iV=/([astvzqmhlc])([^astvzqmhlc]*)/gi,kV=function(ma){var Ma=[];return ma.replace(iV,function(Da,Ta,kb){Da=
Ta.toLowerCase();kb=(kb=kb.match(jV))?kb.map(Number):[];for("m"===Da&&2<kb.length&&(Ma.push([Ta].concat(kb.splice(0,2))),Da="l",Ta="m"===Ta?"l":"L");0<=kb.length;){if(kb.length===CH[Da])return kb.unshift(Ta),Ma.push(kb);if(kb.length<CH[Da])throw Error("malformed path data");Ma.push([Ta].concat(kb.splice(0,CH[Da])))}}),Ma},jV=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Oq=function(ma,Ma,Da,Ta,kb,fc,Ya,Yb){return new A(ma,Ma,Da,Ta,kb,fc,Ya,Yb)};A.prototype={constructor:A,init:function(){(this||Tc).length=this.getArcLength([(this||
Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y])},getTotalLength:function(){return(this||Tc).length},getPointAtLength:function(ma){ma=G(ma,(this||Tc).length,(this||Tc).getArcLength,[(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y]);return this.getPoint([(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,
(this||Tc).d.y],ma)},getTangentAtLength:function(ma){ma=G(ma,(this||Tc).length,(this||Tc).getArcLength,[(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y]);ma=this.getDerivative([(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y],ma);var Ma=Math.sqrt(ma.x*ma.x+ma.y*ma.y);return 0<Ma?{x:ma.x/Ma,y:ma.y/Ma}:{x:0,y:0}},getPropertiesAtLength:function(ma){ma=G(ma,
(this||Tc).length,(this||Tc).getArcLength,[(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y]);var Ma=this.getDerivative([(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||Tc).b.y,(this||Tc).c.y,(this||Tc).d.y],ma);var Da=Math.sqrt(Ma.x*Ma.x+Ma.y*Ma.y);Ma=0<Da?{x:Ma.x/Da,y:Ma.y/Da}:{x:0,y:0};ma=this.getPoint([(this||Tc).a.x,(this||Tc).b.x,(this||Tc).c.x,(this||Tc).d.x],[(this||Tc).a.y,(this||
Tc).b.y,(this||Tc).c.y,(this||Tc).d.y],ma);return{x:ma.x,y:ma.y,tangentX:Ma.x,tangentY:Ma.y}}};var aV=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,
.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,
-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,
.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,
-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,
.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,
-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,
.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,
-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,
.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],
[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],bV=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],
[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,
.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,
.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,
.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,
.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,
.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,
.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,
.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,
.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,
.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,
.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],$U=[[1],[1,1],[1,2,1],[1,3,
3,1]],yB=2*Math.PI,cV=function(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib){var md=Math.sin(kb*yB/360),Ob=Math.cos(kb*yB/360);kb=Ob*(ma-Yb)/2+md*(Ma-Ib)/2;var me=-md*(ma-Yb)/2+Ob*(Ma-Ib)/2;if(0===kb&&0===me||0===Da||0===Ta)return[];Da=Math.abs(Da);Ta=Math.abs(Ta);kb=kb*kb/(Da*Da)+me*me/(Ta*Ta);1<kb&&(Da*=Math.sqrt(kb),Ta*=Math.sqrt(kb));var He=ra(ma,Ma,Yb,Ib,fc,Ya,Da,Ta,md,Ob);ma=[];Ma=He[2];fc=He[3];Ya=Math.max(Math.ceil(Math.abs(fc)/(yB/4)),1);fc/=Ya;for(Yb=0;Yb<Ya;Yb++)ma.push(Ea(Ma,fc)),Ma+=fc;return ma.map(function(Zf){for(var Xf=
0;Xf<Zf.length;Xf+=2){var bf=Zf[Xf+0],$f=Zf[Xf+1];bf*=Da;$f*=Ta;var Jo=md*bf+Ob*$f;Zf[Xf+0]=Ob*bf-md*$f+He[0];Zf[Xf+1]=Jo+He[1]}return Zf})},XM=function(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib){return new K(ma,Ma,Da,Ta,kb,fc,Ya,Yb,Ib)};K.prototype={constructor:K,init:function(){},getTotalLength:function(){return(this||Tc).length},getPointAtLength:function(ma){var Ma=this||Tc;0>ma?ma=0:ma>(this||Tc).length&&(ma=(this||Tc).length);for(var Da=(this||Tc).partialLengths.length-1;(this||Tc).partialLengths[Da]>=ma&&
0<(this||Tc).partialLengths[Da];)Da--;Da<(this||Tc).partialLengths.length-1&&Da++;for(var Ta=0,kb=0;kb<Da;kb++)Ta+=Ma.partialLengths[kb];return(this||Tc).curves[Da].getPointAtLength(ma-Ta)},getTangentAtLength:function(ma){var Ma=this||Tc;0>ma?ma=0:ma>(this||Tc).length&&(ma=(this||Tc).length);for(var Da=(this||Tc).partialLengths.length-1;(this||Tc).partialLengths[Da]>=ma&&0<(this||Tc).partialLengths[Da];)Da--;Da<(this||Tc).partialLengths.length-1&&Da++;for(var Ta=0,kb=0;kb<Da;kb++)Ta+=Ma.partialLengths[kb];
return(this||Tc).curves[Da].getTangentAtLength(ma-Ta)},getPropertiesAtLength:function(ma){var Ma=this.getTangentAtLength(ma);ma=this.getPointAtLength(ma);return{x:ma.x,y:ma.y,tangentX:Ma.x,tangentY:Ma.y}}};var st=function(ma,Ma,Da,Ta){return new Z(ma,Ma,Da,Ta)};Z.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Tc).x0-(this||Tc).x1,2)+Math.pow((this||Tc).y0-(this||Tc).y1,2))};Z.prototype.getPointAtLength=function(ma){ma/=Math.sqrt(Math.pow((this||Tc).x0-(this||Tc).x1,2)+Math.pow((this||
Tc).y0-(this||Tc).y1,2));return{x:(this||Tc).x0+((this||Tc).x1-(this||Tc).x0)*ma,y:(this||Tc).y0+((this||Tc).y1-(this||Tc).y0)*ma}};Z.prototype.getTangentAtLength=function(){var ma=Math.sqrt(((this||Tc).x1-(this||Tc).x0)*((this||Tc).x1-(this||Tc).x0)+((this||Tc).y1-(this||Tc).y0)*((this||Tc).y1-(this||Tc).y0));return{x:((this||Tc).x1-(this||Tc).x0)/ma,y:((this||Tc).y1-(this||Tc).y0)/ma}};Z.prototype.getPropertiesAtLength=function(ma){ma=this.getPointAtLength(ma);var Ma=this.getTangentAtLength();return{x:ma.x,
y:ma.y,tangentX:Ma.x,tangentY:Ma.y}};var dV=function(ma){function Ma(Ya){if(!Ya)return null;var Yb;Ya=kV(Ya);for(var Ib=[0,0],md=[0,0],Ob=0;Ob<Ya.length;Ob++)"M"===Ya[Ob][0]?(Ib=[Ya[Ob][1],Ya[Ob][2]],kb.push(null)):"m"===Ya[Ob][0]?(Ib=[Ya[Ob][1]+Ib[0],Ya[Ob][2]+Ib[1]],kb.push(null)):"L"===Ya[Ob][0]?(Da+=Math.sqrt(Math.pow(Ib[0]-Ya[Ob][1],2)+Math.pow(Ib[1]-Ya[Ob][2],2)),kb.push(new st(Ib[0],Ya[Ob][1],Ib[1],Ya[Ob][2])),Ib=[Ya[Ob][1],Ya[Ob][2]]):"l"===Ya[Ob][0]?(Da+=Math.sqrt(Math.pow(Ya[Ob][1],2)+Math.pow(Ya[Ob][2],
2)),kb.push(new st(Ib[0],Ya[Ob][1]+Ib[0],Ib[1],Ya[Ob][2]+Ib[1])),Ib=[Ya[Ob][1]+Ib[0],Ya[Ob][2]+Ib[1]]):"H"===Ya[Ob][0]?(Da+=Math.abs(Ib[0]-Ya[Ob][1]),kb.push(new st(Ib[0],Ya[Ob][1],Ib[1],Ib[1])),Ib[0]=Ya[Ob][1]):"h"===Ya[Ob][0]?(Da+=Math.abs(Ya[Ob][1]),kb.push(new st(Ib[0],Ib[0]+Ya[Ob][1],Ib[1],Ib[1])),Ib[0]=Ya[Ob][1]+Ib[0]):"V"===Ya[Ob][0]?(Da+=Math.abs(Ib[1]-Ya[Ob][1]),kb.push(new st(Ib[0],Ib[0],Ib[1],Ya[Ob][1])),Ib[1]=Ya[Ob][1]):"v"===Ya[Ob][0]?(Da+=Math.abs(Ya[Ob][1]),kb.push(new st(Ib[0],Ib[0],
Ib[1],Ib[1]+Ya[Ob][1])),Ib[1]=Ya[Ob][1]+Ib[1]):"z"===Ya[Ob][0]||"Z"===Ya[Ob][0]?(Da+=Math.sqrt(Math.pow(Ya[0][1]-Ib[0],2)+Math.pow(Ya[0][2]-Ib[1],2)),kb.push(new st(Ib[0],Ya[0][1],Ib[1],Ya[0][2])),Ib=[Ya[0][1],Ya[0][2]]):"C"===Ya[Ob][0]?(Yb=new Oq(Ib[0],Ib[1],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4],Ya[Ob][5],Ya[Ob][6]),Da+=Yb.getTotalLength(),Ib=[Ya[Ob][5],Ya[Ob][6]],kb.push(Yb)):"c"===Ya[Ob][0]?(Yb=new Oq(Ib[0],Ib[1],Ib[0]+Ya[Ob][1],Ib[1]+Ya[Ob][2],Ib[0]+Ya[Ob][3],Ib[1]+Ya[Ob][4],Ib[0]+Ya[Ob][5],
Ib[1]+Ya[Ob][6]),Da+=Yb.getTotalLength(),Ib=[Ya[Ob][5]+Ib[0],Ya[Ob][6]+Ib[1]],kb.push(Yb)):"S"===Ya[Ob][0]?(Yb=0<Ob&&-1<["C","c","S","s"].indexOf(Ya[Ob-1][0])?new Oq(Ib[0],Ib[1],2*Ib[0]-Ya[Ob-1][Ya[Ob-1].length-4],2*Ib[1]-Ya[Ob-1][Ya[Ob-1].length-3],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4]):new Oq(Ib[0],Ib[1],Ib[0],Ib[1],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4]),Da+=Yb.getTotalLength(),Ib=[Ya[Ob][3],Ya[Ob][4]],kb.push(Yb)):"s"===Ya[Ob][0]?(Yb=0<Ob&&-1<["C","c","S","s"].indexOf(Ya[Ob-1][0])?new Oq(Ib[0],
Ib[1],Ib[0]+Yb.d.x-Yb.c.x,Ib[1]+Yb.d.y-Yb.c.y,Ib[0]+Ya[Ob][1],Ib[1]+Ya[Ob][2],Ib[0]+Ya[Ob][3],Ib[1]+Ya[Ob][4]):new Oq(Ib[0],Ib[1],Ib[0],Ib[1],Ib[0]+Ya[Ob][1],Ib[1]+Ya[Ob][2],Ib[0]+Ya[Ob][3],Ib[1]+Ya[Ob][4]),Da+=Yb.getTotalLength(),Ib=[Ya[Ob][3]+Ib[0],Ya[Ob][4]+Ib[1]],kb.push(Yb)):"Q"===Ya[Ob][0]?(Yb=new Oq(Ib[0],Ib[1],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4]),Da+=Yb.getTotalLength(),kb.push(Yb),Ib=[Ya[Ob][3],Ya[Ob][4]],md=[Ya[Ob][1],Ya[Ob][2]]):"q"===Ya[Ob][0]?(Yb=new Oq(Ib[0],Ib[1],Ib[0]+Ya[Ob][1],
Ib[1]+Ya[Ob][2],Ib[0]+Ya[Ob][3],Ib[1]+Ya[Ob][4]),Da+=Yb.getTotalLength(),md=[Ib[0]+Ya[Ob][1],Ib[1]+Ya[Ob][2]],Ib=[Ya[Ob][3]+Ib[0],Ya[Ob][4]+Ib[1]],kb.push(Yb)):"T"===Ya[Ob][0]?(Yb=0<Ob&&-1<["Q","q","T","t"].indexOf(Ya[Ob-1][0])?new Oq(Ib[0],Ib[1],2*Ib[0]-md[0],2*Ib[1]-md[1],Ya[Ob][1],Ya[Ob][2]):new st(Ib[0],Ya[Ob][1],Ib[1],Ya[Ob][2]),kb.push(Yb),Da+=Yb.getTotalLength(),md=[2*Ib[0]-md[0],2*Ib[1]-md[1]],Ib=[Ya[Ob][1],Ya[Ob][2]]):"t"===Ya[Ob][0]?(Yb=0<Ob&&-1<["Q","q","T","t"].indexOf(Ya[Ob-1][0])?new Oq(Ib[0],
Ib[1],2*Ib[0]-md[0],2*Ib[1]-md[1],Ib[0]+Ya[Ob][1],Ib[1]+Ya[Ob][2]):new st(Ib[0],Ib[0]+Ya[Ob][1],Ib[1],Ib[1]+Ya[Ob][2]),Da+=Yb.getTotalLength(),md=[2*Ib[0]-md[0],2*Ib[1]-md[1]],Ib=[Ya[Ob][1]+Ib[0],Ya[Ob][2]+Ib[0]],kb.push(Yb)):"A"===Ya[Ob][0]?(Yb=new XM(Ib[0],Ib[1],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4],Ya[Ob][5],Ya[Ob][6],Ya[Ob][7]),Da+=Yb.getTotalLength(),Ib=[Ya[Ob][6],Ya[Ob][7]],kb.push(Yb)):"a"===Ya[Ob][0]&&(Yb=new XM(Ib[0],Ib[1],Ya[Ob][1],Ya[Ob][2],Ya[Ob][3],Ya[Ob][4],Ya[Ob][5],Ib[0]+Ya[Ob][6],
Ib[1]+Ya[Ob][7]),Da+=Yb.getTotalLength(),Ib=[Ib[0]+Ya[Ob][6],Ib[1]+Ya[Ob][7]],kb.push(Yb)),Ta.push(Da);return Ma}var Da=0,Ta=[],kb=[];Ma.getTotalLength=function(){return Da};Ma.getPointAtLength=function(Ya){Ya=fc(Ya);return kb[Ya.i].getPointAtLength(Ya.fraction)};Ma.getTangentAtLength=function(Ya){Ya=fc(Ya);return kb[Ya.i].getTangentAtLength(Ya.fraction)};Ma.getPropertiesAtLength=function(Ya){Ya=fc(Ya);return kb[Ya.i].getPropertiesAtLength(Ya.fraction)};var fc=function(Ya){0>Ya?Ya=0:Ya>Da&&(Ya=Da);
for(var Yb=Ta.length-1;Ta[Yb]>=Ya&&0<Ta[Yb];)Yb--;return Yb++,{fraction:Ya-Ta[Yb-1],i:Yb}};return Ma(ma)},BH='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',OM=function(ma,Ma){for(var Da,Ta,kb,fc=ma.length,Ya=1/0,Yb=0;Yb<fc;Yb++)!function(Ib){Ta=0;Ma.forEach(function(md,Ob){md=U(ma[(Ib+Ob)%fc],md);Ta+=
md*md});Ta<Ya&&(Ya=Ta,Da=Ib)}(Yb);Da&&(kb=ma.splice(0,Da),ma.splice.apply(ma,[ma.length,0].concat(kb)))},UM=qc;qc.deviation=function(ma,Ma,Da,Ta){var kb=Ma&&Ma.length,fc=Math.abs(ii(ma,0,kb?Ma[0]*Da:ma.length,Da));if(kb){kb=0;for(var Ya=Ma.length;kb<Ya;kb++)fc-=Math.abs(ii(ma,Ma[kb]*Da,kb<Ya-1?Ma[kb+1]*Da:ma.length,Da))}for(kb=Ma=0;kb<Ta.length;kb+=3){Ya=Ta[kb]*Da;var Yb=Ta[kb+1]*Da,Ib=Ta[kb+2]*Da;Ma+=Math.abs((ma[Ya]-ma[Ib])*(ma[Yb+1]-ma[Ya+1])-(ma[Ya]-ma[Yb])*(ma[Ib+1]-ma[Ya+1]))}return 0===fc&&
0===Ma?0:Math.abs((Ma-fc)/fc)};qc.flatten=function(ma){for(var Ma=ma[0][0].length,Da={vertices:[],holes:[],dimensions:Ma},Ta=0,kb=0;kb<ma.length;kb++){for(var fc=0;fc<ma[kb].length;fc++)for(var Ya=0;Ya<Ma;Ya++)Da.vertices.push(ma[kb][fc][Ya]);0<kb&&(Ta+=ma[kb-1].length,Da.holes.push(Ta))}return Da};var sv=function(ma){return ma},PM=function(ma){if(null==ma)return sv;var Ma,Da,Ta=ma.scale[0],kb=ma.scale[1],fc=ma.translate[0],Ya=ma.translate[1];return function(Yb,Ib){Ib||(Ma=Da=0);Ib=2;var md=Yb.length,
Ob=Array(md);Ob[0]=(Ma+=Yb[0])*Ta+fc;for(Ob[1]=(Da+=Yb[1])*kb+Ya;Ib<md;)Ob[Ib]=Yb[Ib],++Ib;return Ob}},TM=function(ma,Ma){return"GeometryCollection"===Ma.type?{type:"FeatureCollection",features:Ma.geometries.map(function(Da){return Gh(ma,Da)})}:Gh(ma,Ma)},QM=function(ma,Ma){function Da(md){var Ob,me=ma.arcs[0>md?~md:md],He=me[0];return ma.transform?(Ob=[0,0],me.forEach(function(Zf){Ob[0]+=Zf[0];Ob[1]+=Zf[1]})):Ob=me[me.length-1],0>md?[Ob,He]:[He,Ob]}function Ta(md,Ob){for(var me in md){var He=md[me];
delete Ob[He.start];delete He.start;delete He.end;He.forEach(function(Zf){kb[0>Zf?~Zf:Zf]=1});Yb.push(He)}}var kb={},fc={},Ya={},Yb=[],Ib=-1;return Ma.forEach(function(md,Ob){var me,He=ma.arcs[0>md?~md:md];3>He.length&&!He[1][0]&&!He[1][1]&&(me=Ma[++Ib],Ma[Ib]=md,Ma[Ob]=me)}),Ma.forEach(function(md){var Ob=Da(md);var me=Ob[0],He=Ob[1];(Ob=Ya[me])?(delete Ya[Ob.end],Ob.push(md),Ob.end=He,md=fc[He])?(delete fc[md.start],me=md===Ob?Ob:Ob.concat(md),fc[me.start=Ob.start]=Ya[me.end=md.end]=me):fc[Ob.start]=
Ya[Ob.end]=Ob:(Ob=fc[He])?(delete fc[Ob.start],Ob.unshift(md),Ob.start=me,md=Ya[me])?(delete Ya[md.end],me=md===Ob?Ob:md.concat(Ob),fc[me.start=md.start]=Ya[me.end=Ob.end]=me):fc[Ob.start]=Ya[Ob.end]=Ob:(Ob=[md],fc[Ob.start=me]=Ya[Ob.end=He]=Ob)}),Ta(Ya,fc),Ta(fc,Ya),Ma.forEach(function(md){kb[0>md?~md:md]||Yb.push([md])}),Yb},dz=function(ma,Ma){for(var Da=0,Ta=ma.length;Da<Ta;){var kb=Da+Ta>>>1;ma[kb]<Ma?Da=kb+1:Ta=kb}return Da},gV=function(ma){function Ma(Xf,bf){Xf.forEach(function($f){0>$f&&($f=
~$f);var Jo=kb[$f];Jo?Jo.push(bf):kb[$f]=[bf]})}function Da(Xf,bf){Xf.forEach(function($f){Ma($f,bf)})}function Ta(Xf,bf){"GeometryCollection"===Xf.type?Xf.geometries.forEach(function($f){Ta($f,bf)}):Xf.type in Ya&&Ya[Xf.type](Xf.arcs,bf)}var kb={},fc=ma.map(function(){return[]}),Ya={LineString:Ma,MultiLineString:Da,Polygon:Da,MultiPolygon:function(Xf,bf){Xf.forEach(function($f){Da($f,bf)})}};ma.forEach(Ta);for(var Yb in kb){ma=kb[Yb];for(var Ib=ma.length,md=0;md<Ib;++md)for(var Ob=md+1;Ob<Ib;++Ob){var me,
He=ma[md],Zf=ma[Ob];(me=fc[He])[Yb=dz(me,Zf)]!==Zf&&me.splice(Yb,0,Zf);(me=fc[Zf])[Yb=dz(me,He)]!==He&&me.splice(Yb,0,He)}}return fc},RM=function(ma,Ma){return ma<Ma?-1:ma>Ma?1:ma>=Ma?0:NaN},SM=function(ma){return 1===ma.length&&(ma=Cj(ma)),{left:function(Ma,Da,Ta,kb){null==Ta&&(Ta=0);for(null==kb&&(kb=Ma.length);Ta<kb;){var fc=Ta+kb>>>1;0>ma(Ma[fc],Da)?Ta=fc+1:kb=fc}return Ta},right:function(Ma,Da,Ta,kb){null==Ta&&(Ta=0);for(null==kb&&(kb=Ma.length);Ta<kb;){var fc=Ta+kb>>>1;0<ma(Ma[fc],Da)?kb=fc:
Ta=fc+1}return Ta}}};SM(RM);var zB=function(ma,Ma){return bk(Tj(jj(ma),ma),Ma)},VM=function(ma,Ma){if(8<ma.length)return ma.map(function(Ta,kb){return kb});var Da=ma.map(function(Ta){return Ma.map(function(kb){kb=U(jb(Ta),jb(kb));return kb*kb})});return Kh(ma,Ma,Da)};e.interpolate=function(ma,Ma,Da){void 0===Da&&(Da={});var Ta=Da.maxSegmentLength;void 0===Ta&&(Ta=10);Da=Da.string;void 0===Da&&(Da=!0);var kb=qa(ma,Ta);Ta=qa(Ma,Ta);var fc=Lb(kb,Ta,Da);return!Da||"string"!=typeof ma&&"string"!=typeof Ma?
fc:function(Ya){return 1E-4>Ya&&"string"==typeof ma?ma:1E-4>1-Ya&&"string"==typeof Ma?Ma:fc(Ya)}};e.separate=ik;e.combine=function(ma,Ma,Da){void 0===Da&&(Da={});var Ta=Da.maxSegmentLength;void 0===Ta&&(Ta=10);var kb=Da.string;void 0===kb&&(kb=!0);Da=Da.single;void 0===Da&&(Da=!1);var fc=ik(Ma,ma,{maxSegmentLength:Ta,string:kb,single:Da});return Da?function(Ya){return fc(1-Ya)}:fc.map(function(Ya){return function(Yb){return Ya(1-Yb)}})};e.interpolateAll=function(ma,Ma,Da){void 0===Da&&(Da={});var Ta=
Da.maxSegmentLength;void 0===Ta&&(Ta=10);var kb=Da.string;void 0===kb&&(kb=!0);Da=Da.single;if(void 0===Da&&(Da=!1),!Array.isArray(ma)||!Array.isArray(Ma)||ma.length!==Ma.length||!ma.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var fc,Ya,Yb=function(md){return qa(md,Ta)},Ib=ma.map(Yb);Yb=Ma.map(Yb);return Da?
(ma.every(function(md){return"string"==typeof md})&&(fc=ma.slice(0)),Ma.every(function(md){return"string"==typeof md})&&(Ya=Ma.slice(0))):(fc=ma.slice(0),Ya=Ma.slice(0)),Rk(Ib,Yb,{string:kb,single:Da,t0:fc,t1:Ya,match:!1})};e.splitPathString=function(ma){return gb((new NM(ma)).abs())};e.toPathString=ka;e.fromCircle=nk;e.toCircle=function(ma,Ma,Da,Ta,kb){var fc=nk(Ma,Da,Ta,ma,kb);return function(Ya){return fc(1-Ya)}};e.fromRect=Sk;e.toRect=function(ma,Ma,Da,Ta,kb,fc){var Ya=Sk(Ma,Da,Ta,kb,ma,fc);return function(Yb){return Ya(1-
Yb)}};Object.defineProperty(e,"__esModule",{value:!0})});var Foa={},Goa="function"===typeof Float32Array,Hoa=Foa=function(e,k,n,b){if(!(0<=e&&1>=e&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(e===k&&n===b)return mj;for(var d=Goa?new Float32Array(11):Array(11),m=0;11>m;++m)d[m]=Ju(.1*m,e,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var g=0,l=1;10!==l&&d[l]<=a;++l)g+=.1;--l;l=g+(a-d[l])/(d[l+1]-d[l])*.1;var r=3*(1-3*n+3*e)*l*l+2*(3*n-6*e)*l+3*e;if(.001<=r){for(g=
0;4>g;++g){r=3*(1-3*n+3*e)*l*l+2*(3*n-6*e)*l+3*e;if(0===r)break;var v=Ju(l,e,n)-a;l-=v/r}a=l}else if(0===r)a=l;else{l=g;g+=.1;var y=0;do v=l+(g-l)/2,r=Ju(v,e,n)-a,0<r?g=v:l=v;while(1E-7<Math.abs(r)&&10>++y);a=v}return Ju(a,k,b)}},Dc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var e={},k={};!function(n,b){function d(){(this||Dc)._delay=0;(this||Dc)._endDelay=0;(this||Dc)._fill="none";(this||Dc)._iterationStart=0;(this||Dc)._iterations=1;(this||Dc)._duration=
0;(this||Dc)._playbackRate=1;(this||Dc)._direction="normal";(this||Dc)._easing="linear";(this||Dc)._easingFunction=F}function m(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(V,na,la){var ya=new d;return na&&(ya.fill="both",ya.duration="auto"),"number"!=typeof V||isNaN(V)?void 0!==V&&Object.getOwnPropertyNames(V).forEach(function(jb){"auto"==V[jb]||("number"==typeof ya[jb]||"duration"==jb)&&("number"!=typeof V[jb]||isNaN(V[jb]))||
"fill"==jb&&-1==A.indexOf(V[jb])||"direction"==jb&&-1==E.indexOf(V[jb])||"playbackRate"==jb&&1!==V[jb]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(ya[jb]=V[jb])}):ya.duration=V,ya}function g(V,na,la,ya){return 0>V||1<V||0>la||1<la?F:function(jb){if(0>=jb){var gb=0;return 0<V?gb=na/V:!na&&0<la&&(gb=ya/la),gb*jb}if(1<=jb)return gb=0,1>la?gb=(ya-1)/(la-1):1==la&&1>V&&(gb=(na-1)/(V-1)),1+gb*(jb-1);gb=0;for(var ka=1;gb<ka;){var ia=(gb+ka)/
2,qa=3*V*(1-ia)*(1-ia)*ia+3*la*(1-ia)*ia*ia+ia*ia*ia;if(1E-5>Math.abs(jb-qa))break;qa<jb?gb=ia:ka=ia}return 3*na*(1-ia)*(1-ia)*ia+3*ya*(1-ia)*ia*ia+ia*ia*ia}}function l(V,na){return function(la){if(1<=la)return 1;var ya=1/V;return(la+=na*ya)-la%ya}}function r(V){S||(S=document.createElement("div").style);S.animationTimingFunction="";S.animationTimingFunction=V;var na=S.animationTimingFunction;if(""==na&&m())throw new TypeError(V+" is not a valid value for easing");return na}function v(V){if("linear"==
V)return F;var na=R.exec(V);return na?g.apply(this||Dc,na.slice(1).map(Number)):(na=aa.exec(V))?l(Number(na[1]),M):(na=ra.exec(V))?l(Number(na[1]),{start:G,middle:I,end:M}[na[2]]):L[V]||F}function y(V,na,la){if(null==na)return Ea;var ya=la.delay+V+la.endDelay;return na<Math.min(la.delay,ya)?K:na>=Math.min(la.delay+V,ya)?Z:U}var A=["backwards","forwards","both","none"],E=["reverse","alternate","alternate-reverse"],F=function(V){return V};d.prototype={_setMember:function(V,na){(this||Dc)["_"+V]=na;
(this||Dc)._effect&&((this||Dc)._effect._timingInput[V]=na,(this||Dc)._effect._timing=n.normalizeTimingInput((this||Dc)._effect._timingInput),(this||Dc)._effect.activeDuration=n.calculateActiveDuration((this||Dc)._effect._timing),(this||Dc)._effect._animation&&(this||Dc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||Dc)._playbackRate},set delay(V){this._setMember("delay",V)},get delay(){return(this||Dc)._delay},set endDelay(V){this._setMember("endDelay",V)},get endDelay(){return(this||
Dc)._endDelay},set fill(V){this._setMember("fill",V)},get fill(){return(this||Dc)._fill},set iterationStart(V){if((isNaN(V)||0>V)&&m())throw new TypeError("iterationStart must be a non-negative number, received: "+V);this._setMember("iterationStart",V)},get iterationStart(){return(this||Dc)._iterationStart},set duration(V){if("auto"!=V&&(isNaN(V)||0>V)&&m())throw new TypeError("duration must be non-negative or auto, received: "+V);this._setMember("duration",V)},get duration(){return(this||Dc)._duration},
set direction(V){this._setMember("direction",V)},get direction(){return(this||Dc)._direction},set easing(V){(this||Dc)._easingFunction=v(r(V));this._setMember("easing",V)},get easing(){return(this||Dc)._easing},set iterations(V){if((isNaN(V)||0>V)&&m())throw new TypeError("iterations must be non-negative, received: "+V);this._setMember("iterations",V)},get iterations(){return(this||Dc)._iterations}};var G=1,I=.5,M=0,L={ease:g(.25,.1,.25,1),"ease-in":g(.42,0,1,1),"ease-out":g(0,0,.58,1),"ease-in-out":g(.42,
0,.58,1),"step-start":l(1,G),"step-middle":l(1,I),"step-end":l(1,M)},S=null,R=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,aa=/steps\(\s*(\d+)\s*\)/,ra=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ea=0,K=1,Z=2,U=3;n.cloneTimingInput=function(V){if("number"==typeof V)return V;var na={},la;for(la in V)na[la]=V[la];return na};n.makeTiming=a;n.numericTimingToObject=function(V){return"number"==typeof V&&(V=isNaN(V)?
{duration:0}:{duration:V}),V};n.normalizeTimingInput=function(V,na){return V=n.numericTimingToObject(V),a(V,na)};n.calculateActiveDuration=function(V){return Math.abs((0===V.duration||0===V.iterations?0:V.duration*V.iterations)/V.playbackRate)};n.calculateIterationProgress=function(V,na,la){var ya=y(V,na,la);a:{var jb=la.fill;switch(ya){case K:V="backwards"==jb||"both"==jb?0:null;break a;case U:V=na-la.delay;break a;case Z:V="forwards"==jb||"both"==jb?V:null;break a;case Ea:V=null;break a}V=void 0}if(null===
V)return null;na=la.duration;jb=la.iterationStart;na=(0===na?ya!==K&&(jb+=la.iterations):jb+=V/na,jb);jb=na===1/0?la.iterationStart%1:na%1;V=(0!==jb||ya!==Z||0===la.iterations||0===V&&0!==la.duration||(jb=1),jb);jb=ya===Z&&la.iterations===1/0?1/0:1===V?Math.floor(na)-1:Math.floor(na);na=ya=la.direction;"normal"!==ya&&"reverse"!==ya&&("alternate-reverse"===ya&&(jb+=1),na="normal",jb!==1/0&&0!=jb%2&&(na="reverse"));return la._easingFunction("normal"===na?V:1-V)};n.calculatePhase=y;n.normalizeEasing=
r;n.parseEasingFunction=v}(e);(function(n,b){function d(l){var r=[],v;for(v in l)if(!(v in["easing","offset","composite"])){var y=l[v];Array.isArray(y)||(y=[y]);for(var A,E=y.length,F=0;F<E;F++)A={},A.offset="offset"in l?l.offset:1==E?1:F/(E-1),"easing"in l&&(A.easing=l.easing),"composite"in l&&(A.composite=l.composite),A[v]=y[F],r.push(A)}return r.sort(function(G,I){return G.offset-I.offset}),r}var m={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var g={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=d;n.normalizeKeyframes=function(l){function r(){var F=v.length;null==v[F-1].offset&&(v[F-1].offset=1);1<F&&null==v[0].offset&&(v[0].offset=0);for(var G=0,I=v[0].offset,M=1;M<F;M++){var L=v[M].offset;if(null!=L){for(var S=1;S<M-G;S++)v[G+S].offset=I+(L-I)*S/(M-G);G=M;I=L}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=d(l));var v=l.map(function(F){var G={},I;for(I in F){var M=F[I];if("offset"==
I){if(null!=M){if(M=Number(M),!isFinite(M))throw new TypeError("Keyframe offsets must be numbers.");if(0>M||1<M)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==I){if("add"==M||"accumulate"==M)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=M)throw new TypeError("Invalid composite mode "+M+".");}else M="easing"==I?n.normalizeEasing(M):""+M;var L=void 0,S=I,R=M;M=G;var aa=S;if("display"!==
aa&&0!==aa.lastIndexOf("animation",0)&&0!==aa.lastIndexOf("transition",0))if(aa=m[S])for(L in a.style[S]=R,aa)S=aa[L],R=a.style[S],M[S]=S in g?g[S][R]||R:R;else M[S]=S in g?g[S][R]||R:R}return void 0==G.offset&&(G.offset=null),void 0==G.easing&&(G.easing="linear"),G});l=!0;for(var y=-1/0,A=0;A<v.length;A++){var E=v[A].offset;if(null!=E){if(E<y)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");y=E}else l=!1}return v=v.filter(function(F){return 0<=F.offset&&
1>=F.offset}),l||r(),v}})(e);(function(n){var b={};n.isDeprecated=function(d,m,a,g){g=g?"are":"is";var l=new Date;m=new Date(m);return m.setMonth(m.getMonth()+3),!(l<m&&(d in b||console.warn("Web Animations: "+d+" "+g+" deprecated and will stop working on "+m.toDateString()+". "+a),b[d]=!0,1))};n.deprecated=function(d,m,a,g){var l=g?"are":"is";if(n.isDeprecated(d,m,a,g))throw Error(d+" "+l+" no longer supported. "+a);}})(e);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===n[d]&&(b=!0)})),!b)return}!function(d,m,a){function g(r){for(var v={},y=0;y<r.length;y++)for(var A in r[y])if("offset"!=A&&"easing"!=A&&"composite"!=A){var E={offset:r[y].offset,easing:r[y].easing,value:r[y][A]};v[A]=v[A]||[];v[A].push(E)}for(var F in v)if(r=v[F],0!=r[0].offset||1!=r[r.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return v}function l(r){var v=[],y;for(y in r)for(var A=r[y],E=0;E<A.length-1;E++){var F=E,G=E+1,I=A[F].offset,M=A[G].offset,L=I,S=M;0==E&&(L=-1/0,0==M&&(G=F));E==A.length-2&&(S=1/0,1==I&&(F=G));v.push({applyFrom:L,applyTo:S,startOffset:A[F].offset,endOffset:A[G].offset,easingFunction:d.parseEasingFunction(A[F].easing),property:y,interpolation:m.propertyInterpolation(y,A[F].value,A[G].value)})}return v.sort(function(R,aa){return R.startOffset-aa.startOffset}),
v}m.convertEffectInput=function(r){r=d.normalizeKeyframes(r);var v=g(r),y=l(v);return function(A,E){if(null!=E)y.filter(function(G){return E>=G.applyFrom&&E<G.applyTo}).forEach(function(G){var I=E-G.startOffset,M=G.endOffset-G.startOffset;I=0==M?0:G.easingFunction(I/M);m.apply(A,G.property,G.interpolation(I))});else for(var F in v)"offset"!=F&&"easing"!=F&&"composite"!=F&&m.clear(A,F)}}}(e,k);(function(d,m,a){function g(v){return v.replace(/-(.)/g,function(y,A){return A.toUpperCase()})}var l={};m.addPropertiesHandler=
function(v,y,A){for(var E=0;E<A.length;E++){var F=v,G=y,I=g(A[E]);l[I]=l[I]||[];l[I].push([F,G])}};var r={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};m.propertyInterpolation=function(v,y,A){var E=v;/-/.test(v)&&!d.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(E=g(v));"initial"!=y&&"initial"!=A||("initial"==y&&(y=r[E]),"initial"==A&&(A=r[E]));v=y==A?[]:l[E];for(E=0;v&&E<v.length;E++){var F=v[E][0](y),G=v[E][0](A);if(void 0!==F&&void 0!==G&&(F=
v[E][1](F,G))){var I=m.Interpolation.apply(null,F);return function(M){return 0==M?y:1==M?A:I(M)}}}return m.Interpolation(!1,!0,function(M){return M?A:y})}})(e,k);(function(d,m,a){function g(l){var r=d.calculateActiveDuration(l),v=function(y){return d.calculateIterationProgress(r,y,l)};return v._totalDuration=l.delay+r+l.endDelay,v}m.KeyframeEffect=function(l,r,v,y){var A,E=g(d.normalizeTimingInput(v)),F=m.convertEffectInput(r);r=function(){F(l,A)};return r._update=function(G){return null!==(A=E(G))},
r._clear=function(){F(l,null)},r._hasSameTarget=function(G){return l===G},r._target=l,r._totalDuration=E._totalDuration,r._id=y,r}})(e,k);(function(d,m){function a(F,G,I){I.enumerable=!0;I.configurable=!0;Object.defineProperty(F,G,I)}function g(F){(this||Dc)._element=F;(this||Dc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||Dc)._style=F.style;(this||Dc)._length=0;(this||Dc)._isAnimatedProperty={};var G=window;F=!(!F.namespaceURI||-1==F.namespaceURI.indexOf("/svg"))&&
(r in G||(G[r]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(G.navigator.userAgent)),G[r]);(this||Dc)._updateSvgTransformAttr=F;(this||Dc)._savedTransformAttr=null;for(F=0;F<(this||Dc)._style.length;F++)G=(this||Dc)._style[F],(this||Dc)._surrogateStyle[G]=(this||Dc)._style[G];this._updateIndices()}function l(F){if(!F._webAnimationsPatchedStyle){var G=new g(F);try{a(F,"style",{get:function(){return G}})}catch(I){F.style._set=function(M,L){F.style[M]=L},F.style._clear=function(M){F.style[M]=""}}F._webAnimationsPatchedStyle=
F.style}}var r="_webAnimationsUpdateSvgTransformAttr";m={cssText:1,length:1,parentRule:1};var v={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},y={removeProperty:1,setProperty:1};g.prototype={get cssText(){return(this||Dc)._surrogateStyle.cssText},set cssText(F){for(var G={},I=0;I<(this||Dc)._surrogateStyle.length;I++)G[(this||Dc)._surrogateStyle[I]]=!0;(this||Dc)._surrogateStyle.cssText=F;this._updateIndices();for(I=0;I<(this||Dc)._surrogateStyle.length;I++)G[(this||
Dc)._surrogateStyle[I]]=!0;for(var M in G)(this||Dc)._isAnimatedProperty[M]||(this||Dc)._style.setProperty(M,(this||Dc)._surrogateStyle.getPropertyValue(M))},get length(){return(this||Dc)._surrogateStyle.length},get parentRule(){return(this||Dc)._style.parentRule},_updateIndices:function(){for(;(this||Dc)._length<(this||Dc)._surrogateStyle.length;)Object.defineProperty(this||Dc,(this||Dc)._length,{configurable:!0,enumerable:!1,get:function(F){return function(){return(this||Dc)._surrogateStyle[F]}}((this||
Dc)._length)}),(this||Dc)._length++;for(;(this||Dc)._length>(this||Dc)._surrogateStyle.length;)(this||Dc)._length--,Object.defineProperty(this||Dc,(this||Dc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(F,G){(this||Dc)._style[F]=G;(this||Dc)._isAnimatedProperty[F]=!0;(this||Dc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(F)&&(null==(this||Dc)._savedTransformAttr&&((this||Dc)._savedTransformAttr=(this||Dc)._element.getAttribute("transform")),(this||Dc)._element.setAttribute("transform",
d.transformToSvgMatrix(G)))},_clear:function(F){(this||Dc)._style[F]=(this||Dc)._surrogateStyle[F];(this||Dc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(F)&&((this||Dc)._savedTransformAttr?(this||Dc)._element.setAttribute("transform",(this||Dc)._savedTransformAttr):(this||Dc)._element.removeAttribute("transform"),(this||Dc)._savedTransformAttr=null);delete (this||Dc)._isAnimatedProperty[F]}};for(var A in v)g.prototype[A]=function(F,G){return function(){var I=(this||Dc)._surrogateStyle[F].apply((this||
Dc)._surrogateStyle,arguments);return G&&((this||Dc)._isAnimatedProperty[arguments[0]]||(this||Dc)._style[F].apply((this||Dc)._style,arguments),this._updateIndices()),I}}(A,A in y);for(var E in document.documentElement.style)E in m||E in v||function(F){a(g.prototype,F,{get:function(){return(this||Dc)._surrogateStyle[F]},set:function(G){(this||Dc)._surrogateStyle[F]=G;this._updateIndices();(this||Dc)._isAnimatedProperty[F]||((this||Dc)._style[F]=G)}})}(E);d.apply=function(F,G,I){l(F);F.style._set(d.propertyName(G),
I)};d.clear=function(F,G){F._webAnimationsPatchedStyle&&F.style._clear(d.propertyName(G))}})(k);(function(d){window.Element.prototype.animate=function(m,a){var g="";return a&&a.id&&(g=a.id),d.timeline._play(d.KeyframeEffect(this||Dc,m,a,g))}})(k);(function(d,m){function a(g,l,r){if("number"==typeof g&&"number"==typeof l)return g*(1-r)+l*r;if("boolean"==typeof g&&"boolean"==typeof l)return.5>r?g:l;if(g.length==l.length){for(var v=[],y=0;y<g.length;y++)v.push(a(g[y],l[y],r));return v}throw"Mismatched interpolation arguments "+
g+":"+l;}d.Interpolation=function(g,l,r){return function(v){return r(a(g,l,v))}}})(k);(function(d,m){m=function(){function a(g,l){for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],v=0;4>v;v++)for(var y=0;4>y;y++)for(var A=0;4>A;A++)r[v][y]+=l[v][A]*g[A][y];return r}return function(g,l,r,v,y){for(var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],E=0;4>E;E++)A[E][3]=y[E];for(E=0;3>E;E++)for(y=0;3>y;y++)A[3][E]+=g[y]*A[y][E];g=v[0];E=v[1];y=v[2];v=v[3];var F=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
F[0][0]=1-2*(E*E+y*y);F[0][1]=2*(g*E-y*v);F[0][2]=2*(g*y+E*v);F[1][0]=2*(g*E+y*v);F[1][1]=1-2*(g*g+y*y);F[1][2]=2*(E*y-g*v);F[2][0]=2*(g*y-E*v);F[2][1]=2*(E*y+g*v);F[2][2]=1-2*(g*g+E*E);A=a(A,F);v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(v[2][1]=r[2],A=a(A,v));r[1]&&(v[2][1]=0,v[2][0]=r[0],A=a(A,v));r[0]&&(v[2][0]=0,v[1][0]=r[0],A=a(A,v));for(E=0;3>E;E++)for(y=0;3>y;y++)A[E][y]*=l[E];return 0==A[0][2]&&0==A[0][3]&&0==A[1][2]&&0==A[1][3]&&0==A[2][0]&&0==A[2][1]&&1==A[2][2]&&0==A[2][3]&&0==
A[3][2]&&1==A[3][3]?[A[0][0],A[0][1],A[1][0],A[1][1],A[3][0],A[3][1]]:A[0].concat(A[1],A[2],A[3])}}();d.composeMatrix=m;d.quat=function(a,g,l){var r=d.dot(a,g);r=Math.max(Math.min(r,1),-1);var v=[];if(1===r)v=a;else for(var y=Math.acos(r),A=1*Math.sin(l*y)/Math.sqrt(1-r*r),E=0;4>E;E++)v.push(a[E]*(Math.cos(l*y)-r*A)+g[E]*A);return v}})(k);(function(d,m,a){d.sequenceNumber=0;var g=function(l,r,v){(this||Dc).target=l;(this||Dc).currentTime=r;(this||Dc).timelineTime=v;(this||Dc).type="finish";(this||
Dc).bubbles=!1;(this||Dc).cancelable=!1;(this||Dc).currentTarget=l;(this||Dc).defaultPrevented=!1;(this||Dc).eventPhase=Event.AT_TARGET;(this||Dc).timeStamp=Date.now()};m.Animation=function(l){(this||Dc).id="";l&&l._id&&((this||Dc).id=l._id);(this||Dc)._sequenceNumber=d.sequenceNumber++;(this||Dc)._currentTime=0;(this||Dc)._startTime=null;(this||Dc)._paused=!1;(this||Dc)._playbackRate=1;(this||Dc)._inTimeline=!0;(this||Dc)._finishedFlag=!0;(this||Dc).onfinish=null;(this||Dc)._finishHandlers=[];(this||
Dc)._effect=l;(this||Dc)._inEffect=(this||Dc)._effect._update(0);(this||Dc)._idle=!0;(this||Dc)._currentTimePending=!1};m.Animation.prototype={_ensureAlive:function(){0>(this||Dc).playbackRate&&0===(this||Dc).currentTime?(this||Dc)._inEffect=(this||Dc)._effect._update(-1):(this||Dc)._inEffect=(this||Dc)._effect._update((this||Dc).currentTime);(this||Dc)._inTimeline||!(this||Dc)._inEffect&&(this||Dc)._finishedFlag||((this||Dc)._inTimeline=!0,m.timeline._animations.push(this||Dc))},_tickCurrentTime:function(l,
r){l!=(this||Dc)._currentTime&&((this||Dc)._currentTime=l,(this||Dc)._isFinished&&!r&&((this||Dc)._currentTime=0<(this||Dc)._playbackRate?(this||Dc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||Dc)._idle||(this||Dc)._currentTimePending?null:(this||Dc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(m.restart(),(this||Dc)._paused||null==(this||Dc)._startTime||((this||Dc)._startTime=(this||Dc)._timeline.currentTime-l/(this||Dc)._playbackRate),(this||Dc)._currentTimePending=
!1,(this||Dc)._currentTime!=l&&((this||Dc)._idle&&((this||Dc)._idle=!1,(this||Dc)._paused=!0),this._tickCurrentTime(l,!0),m.applyDirtiedAnimation(this||Dc)))},get startTime(){return(this||Dc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||Dc)._paused||(this||Dc)._idle||((this||Dc)._startTime=l,this._tickCurrentTime(((this||Dc)._timeline.currentTime-(this||Dc)._startTime)*(this||Dc).playbackRate),m.applyDirtiedAnimation(this||Dc))},get playbackRate(){return(this||Dc)._playbackRate},set playbackRate(l){if(l!=
(this||Dc)._playbackRate){var r=(this||Dc).currentTime;(this||Dc)._playbackRate=l;(this||Dc)._startTime=null;"paused"!=(this||Dc).playState&&"idle"!=(this||Dc).playState&&((this||Dc)._finishedFlag=!1,(this||Dc)._idle=!1,this._ensureAlive(),m.applyDirtiedAnimation(this||Dc));null!=r&&((this||Dc).currentTime=r)}},get _isFinished(){return!(this||Dc)._idle&&(0<(this||Dc)._playbackRate&&(this||Dc)._currentTime>=(this||Dc)._totalDuration||0>(this||Dc)._playbackRate&&0>=(this||Dc)._currentTime)},get _totalDuration(){return(this||
Dc)._effect._totalDuration},get playState(){return(this||Dc)._idle?"idle":null==(this||Dc)._startTime&&!(this||Dc)._paused&&0!=(this||Dc).playbackRate||(this||Dc)._currentTimePending?"pending":(this||Dc)._paused?"paused":(this||Dc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||Dc)._playbackRate)(this||Dc)._currentTime=0;else{if(!((this||Dc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||Dc)._currentTime=(this||Dc)._totalDuration}},play:function(){(this||Dc)._paused=!1;((this||Dc)._isFinished||(this||Dc)._idle)&&(this._rewind(),(this||Dc)._startTime=null);(this||Dc)._finishedFlag=!1;(this||Dc)._idle=!1;this._ensureAlive();m.applyDirtiedAnimation(this||Dc)},pause:function(){(this||Dc)._isFinished||(this||Dc)._paused||(this||Dc)._idle?(this||Dc)._idle&&(this._rewind(),(this||Dc)._idle=!1):(this||Dc)._currentTimePending=!0;(this||Dc)._startTime=null;(this||Dc)._paused=!0},finish:function(){(this||
Dc)._idle||((this||Dc).currentTime=0<(this||Dc)._playbackRate?(this||Dc)._totalDuration:0,(this||Dc)._startTime=(this||Dc)._totalDuration-(this||Dc).currentTime,(this||Dc)._currentTimePending=!1,m.applyDirtiedAnimation(this||Dc))},cancel:function(){(this||Dc)._inEffect&&((this||Dc)._inEffect=!1,(this||Dc)._idle=!0,(this||Dc)._paused=!1,(this||Dc)._finishedFlag=!0,(this||Dc)._currentTime=0,(this||Dc)._startTime=null,(this||Dc)._effect._update(null),m.applyDirtiedAnimation(this||Dc))},reverse:function(){(this||
Dc).playbackRate*=-1;this.play()},addEventListener:function(l,r){"function"==typeof r&&"finish"==l&&(this||Dc)._finishHandlers.push(r)},removeEventListener:function(l,r){"finish"==l&&(l=(this||Dc)._finishHandlers.indexOf(r),0<=l&&(this||Dc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||Dc)._isFinished){if(!(this||Dc)._finishedFlag){var r=new g(this||Dc,(this||Dc)._currentTime,l),v=(this||Dc)._finishHandlers.concat((this||Dc).onfinish?[(this||Dc).onfinish]:[]);setTimeout(function(){v.forEach(function(y){y.call(r.target,
r)})},0);(this||Dc)._finishedFlag=!0}}else(this||Dc)._finishedFlag=!1},_tick:function(l,r){(this||Dc)._idle||(this||Dc)._paused||(null==(this||Dc)._startTime?r&&((this||Dc).startTime=l-(this||Dc)._currentTime/(this||Dc).playbackRate):(this||Dc)._isFinished||this._tickCurrentTime((l-(this||Dc)._startTime)*(this||Dc).playbackRate));r&&((this||Dc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||Dc).playState in{pending:1,running:1}||!(this||Dc)._finishedFlag},_targetAnimations:function(){var l=
(this||Dc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||Dc)&&l.push(this||Dc)},_unmarkTarget:function(){var l=this._targetAnimations(),r=l.indexOf(this||Dc);-1!==r&&l.splice(r,1)}}})(e,k);(function(d,m,a){function g(R){var aa=E;E=[];R<S.currentTime&&(R=S.currentTime);S._animations.sort(l);S._animations=y(R,!0,S._animations)[0];aa.forEach(function(ra){ra[1](R)});v()}function l(R,
aa){return R._sequenceNumber-aa._sequenceNumber}function r(){(this||Dc)._animations=[];(this||Dc).currentTime=window.performance&&performance.now?performance.now():0}function v(){M.forEach(function(R){R()});M.length=0}function y(R,aa,ra){L=!0;I=!1;m.timeline.currentTime=R;G=!1;var Ea=[],K=[],Z=[],U=[];return ra.forEach(function(V){V._tick(R,aa);V._inEffect?(K.push(V._effect),V._markTarget()):(Ea.push(V._effect),V._unmarkTarget());V._needsTick&&(G=!0);var na=V._inEffect||V._needsTick;(V._inTimeline=
na)?Z.push(V):U.push(V)}),M.push.apply(M,Ea),M.push.apply(M,K),G&&requestAnimationFrame(function(){}),L=!1,[Z,U]}var A=window.requestAnimationFrame,E=[],F=0;window.requestAnimationFrame=function(R){var aa=F++;return 0==E.length&&A(g),E.push([aa,R]),aa};window.cancelAnimationFrame=function(R){E.forEach(function(aa){aa[0]==R&&(aa[1]=function(){})})};r.prototype={_play:function(R){R._timing=d.normalizeTimingInput(R.timing);R=new m.Animation(R);return R._idle=!1,R._timeline=this||Dc,(this||Dc)._animations.push(R),
m.restart(),m.applyDirtiedAnimation(R),R}};var G=!1,I=!1;m.restart=function(){return G||(G=!0,requestAnimationFrame(function(){}),I=!0),I};m.applyDirtiedAnimation=function(R){L||(R._markTarget(),R=R._targetAnimations(),R.sort(l),y(m.timeline.currentTime,!1,R.slice())[1].forEach(function(aa){aa=S._animations.indexOf(aa);-1!==aa&&S._animations.splice(aa,1)}),v())};var M=[],L=!1,S=new r;m.timeline=S})(e,k);(function(d,m){function a(A,E){for(var F=0,G=0;G<A.length;G++)F+=A[G]*E[G];return F}function g(A,
E){return[A[0]*E[0]+A[4]*E[1]+A[8]*E[2]+A[12]*E[3],A[1]*E[0]+A[5]*E[1]+A[9]*E[2]+A[13]*E[3],A[2]*E[0]+A[6]*E[1]+A[10]*E[2]+A[14]*E[3],A[3]*E[0]+A[7]*E[1]+A[11]*E[2]+A[15]*E[3],A[0]*E[4]+A[4]*E[5]+A[8]*E[6]+A[12]*E[7],A[1]*E[4]+A[5]*E[5]+A[9]*E[6]+A[13]*E[7],A[2]*E[4]+A[6]*E[5]+A[10]*E[6]+A[14]*E[7],A[3]*E[4]+A[7]*E[5]+A[11]*E[6]+A[15]*E[7],A[0]*E[8]+A[4]*E[9]+A[8]*E[10]+A[12]*E[11],A[1]*E[8]+A[5]*E[9]+A[9]*E[10]+A[13]*E[11],A[2]*E[8]+A[6]*E[9]+A[10]*E[10]+A[14]*E[11],A[3]*E[8]+A[7]*E[9]+A[11]*E[10]+
A[15]*E[11],A[0]*E[12]+A[4]*E[13]+A[8]*E[14]+A[12]*E[15],A[1]*E[12]+A[5]*E[13]+A[9]*E[14]+A[13]*E[15],A[2]*E[12]+A[6]*E[13]+A[10]*E[14]+A[14]*E[15],A[3]*E[12]+A[7]*E[13]+A[11]*E[14]+A[15]*E[15]]}function l(A){return 2*((A.deg||0)/360+(A.grad||0)/400+(A.turn||0))*Math.PI+(A.rad||0)}function r(A){switch(A.t){case "rotatex":return A=l(A.d[0]),[1,0,0,0,0,Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1];case "rotatey":return A=l(A.d[0]),[Math.cos(A),0,-Math.sin(A),0,0,1,0,0,Math.sin(A),
0,Math.cos(A),0,0,0,0,1];case "rotate":case "rotatez":return A=l(A.d[0]),[Math.cos(A),Math.sin(A),0,0,-Math.sin(A),Math.cos(A),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var E=A.d[0],F=A.d[1],G=A.d[2];A=l(A.d[3]);var I=E*E+F*F+G*G;0===I?(E=1,G=F=0):1!==I&&(I=Math.sqrt(I),E/=I,F/=I,G/=I);I=Math.sin(A/2);A=I*Math.cos(A/2);I*=I;return[1-2*(F*F+G*G)*I,2*(E*F*I+G*A),2*(E*G*I-F*A),0,2*(E*F*I-G*A),1-2*(E*E+G*G)*I,2*(F*G*I+E*A),0,2*(E*G*I+F*A),2*(F*G*I-E*A),1-2*(E*E+F*F)*I,0,0,0,0,1];case "scale":return[A.d[0],
0,0,0,0,A.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[A.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,A.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,A.d[0],0,0,0,0,1];case "scale3d":return[A.d[0],0,0,0,0,A.d[1],0,0,0,0,A.d[2],0,0,0,0,1];case "skew":return E=l(A.d[0]),F=l(A.d[1]),[1,Math.tan(F),0,0,Math.tan(E),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return A=l(A.d[0]),[1,0,0,0,Math.tan(A),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return A=l(A.d[0]),[1,Math.tan(A),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return E=A.d[0].px||0,F=A.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,0,1];case "translatex":return E=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,0,0,1];case "translatey":return F=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,F,0,1];case "translatez":return G=A.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,G,1];case "translate3d":return E=A.d[0].px||0,F=A.d[1].px||0,G=A.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,E,F,G,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,A.d[0].px?
-1/A.d[0].px:0,0,0,0,1];case "matrix":return[A.d[0],A.d[1],0,0,A.d[2],A.d[3],0,0,0,0,1,0,A.d[4],A.d[5],0,1];case "matrix3d":return A.d}}function v(A){return 0===A.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:A.map(r).reduce(g)}var y=function(){function A(I){return I[0][0]*I[1][1]*I[2][2]+I[1][0]*I[2][1]*I[0][2]+I[2][0]*I[0][1]*I[1][2]-I[0][2]*I[1][1]*I[2][0]-I[1][2]*I[2][1]*I[0][0]-I[2][2]*I[0][1]*I[1][0]}function E(I){var M=F(I);return[I[0]/M,I[1]/M,I[2]/M]}function F(I){return Math.sqrt(I[0]*I[0]+I[1]*
I[1]+I[2]*I[2])}function G(I,M,L,S){return[L*I[0]+S*M[0],L*I[1]+S*M[1],L*I[2]+S*M[2]]}return function(I){I=[I.slice(0,4),I.slice(4,8),I.slice(8,12),I.slice(12,16)];if(1!==I[3][3])return null;for(var M=[],L=0;4>L;L++)M.push(I[L].slice());for(L=0;3>L;L++)M[L][3]=0;if(0===A(M))return null;var S=[];if(I[0][3]||I[1][3]||I[2][3]){S.push(I[0][3]);S.push(I[1][3]);S.push(I[2][3]);S.push(I[3][3]);var R=1/A(M),aa=M[0][0],ra=M[0][1];L=M[0][2];var Ea=M[1][0],K=M[1][1],Z=M[1][2],U=M[2][0],V=M[2][1],na=M[2][2];
R=[[(K*na-Z*V)*R,(L*V-ra*na)*R,(ra*Z-L*K)*R,0],[(Z*U-Ea*na)*R,(aa*na-L*U)*R,(L*Ea-aa*Z)*R,0],[(Ea*V-K*U)*R,(U*ra-aa*V)*R,(aa*K-ra*Ea)*R,0]];aa=[];for(ra=0;3>ra;ra++){for(Ea=L=0;3>Ea;Ea++)L+=M[3][Ea]*R[Ea][ra];aa.push(L)}M=(aa.push(1),R.push(aa),R);M=[[M[0][0],M[1][0],M[2][0],M[3][0]],[M[0][1],M[1][1],M[2][1],M[3][1]],[M[0][2],M[1][2],M[2][2],M[3][2]],[M[0][3],M[1][3],M[2][3],M[3][3]]];R=[];for(aa=0;4>aa;aa++){for(L=ra=0;4>L;L++)ra+=S[L]*M[L][aa];R.push(ra)}S=R}else S=[0,0,0,1];M=I[3].slice(0,3);R=
[];R.push(I[0].slice(0,3));aa=[];aa.push(F(R[0]));R[0]=E(R[0]);ra=[];R.push(I[1].slice(0,3));ra.push(a(R[0],R[1]));R[1]=G(R[1],R[0],1,-ra[0]);aa.push(F(R[1]));R[1]=E(R[1]);ra[0]/=aa[1];R.push(I[2].slice(0,3));ra.push(a(R[0],R[2]));R[2]=G(R[2],R[0],1,-ra[1]);ra.push(a(R[1],R[2]));R[2]=G(R[2],R[1],1,-ra[2]);aa.push(F(R[2]));R[2]=E(R[2]);ra[1]/=aa[2];ra[2]/=aa[2];I=R[1];L=R[2];if(0>a(R[0],[I[1]*L[2]-I[2]*L[1],I[2]*L[0]-I[0]*L[2],I[0]*L[1]-I[1]*L[0]]))for(L=0;3>L;L++)aa[L]*=-1,R[L][0]*=-1,R[L][1]*=-1,
R[L][2]*=-1;var la,ya;I=R[0][0]+R[1][1]+R[2][2]+1;return 1E-4<I?(la=.5/Math.sqrt(I),ya=[(R[2][1]-R[1][2])*la,(R[0][2]-R[2][0])*la,(R[1][0]-R[0][1])*la,.25/la]):R[0][0]>R[1][1]&&R[0][0]>R[2][2]?(la=2*Math.sqrt(1+R[0][0]-R[1][1]-R[2][2]),ya=[.25*la,(R[0][1]+R[1][0])/la,(R[0][2]+R[2][0])/la,(R[2][1]-R[1][2])/la]):R[1][1]>R[2][2]?(la=2*Math.sqrt(1+R[1][1]-R[0][0]-R[2][2]),ya=[(R[0][1]+R[1][0])/la,.25*la,(R[1][2]+R[2][1])/la,(R[0][2]-R[2][0])/la]):(la=2*Math.sqrt(1+R[2][2]-R[0][0]-R[1][1]),ya=[(R[0][2]+
R[2][0])/la,(R[1][2]+R[2][1])/la,.25*la,(R[1][0]-R[0][1])/la]),[M,aa,ra,ya,S]}}();d.dot=a;d.makeMatrixDecomposition=function(A){return[y(v(A))]};d.transformListToMatrix=v})(k);(function(d){function m(r,v){var y=r.exec(v);if(y)return y=r.ignoreCase?y[0].toLowerCase():y[0],[y,v.substr(y.length)]}function a(r,v){v=v.replace(/^\s*/,"");if(r=r(v))return[r[0],r[1].replace(/^\s*/,"")]}function g(r,v){for(var y=r,A=v;y&&A;)y>A?y%=A:A%=y;return r*v/(y+A)}function l(r,v,y,A,E){for(var F=[],G=[],I=[],M=g(A.length,
E.length),L=0;L<M;L++){var S=v(A[L%A.length],E[L%E.length]);if(!S)return;F.push(S[0]);G.push(S[1]);I.push(S[2])}return[F,G,function(R){R=R.map(function(aa,ra){return I[ra](aa)}).join(y);return r?r(R):R}]}d.consumeToken=m;d.consumeTrimmed=a;d.consumeRepeated=function(r,v,y){r=a.bind(null,r);for(var A=[];;){var E=r(y);if(!E||(A.push(E[0]),y=E[1],!(E=m(v,y))||""==E[1]))return[A,y];y=E[1]}};d.consumeParenthesised=function(r,v){for(var y=0,A=0;A<v.length&&(!/\s|,/.test(v[A])||0!=y);A++)if("("==v[A])y++;
else if(")"==v[A]&&(y--,0==y&&A++,0>=y))break;r=r(v.substr(0,A));return void 0==r?void 0:[r,v.substr(A)]};d.ignore=function(r){return function(v){v=r(v);return v&&(v[0]=void 0),v}};d.optional=function(r,v){return function(y){return r(y)||[v,y]}};d.consumeList=function(r,v){for(var y=[],A=0;A<r.length;A++){v=d.consumeTrimmed(r[A],v);if(!v||""==v[0])return;void 0!==v[0]&&y.push(v[0]);v=v[1]}if(""==v)return y};d.mergeNestedRepeated=l.bind(null,null);d.mergeWrappedNestedRepeated=l;d.mergeList=function(r,
v,y){for(var A=[],E=[],F=[],G=0,I=0;I<y.length;I++)if("function"==typeof y[I]){var M=y[I](r[G],v[G++]);A.push(M[0]);E.push(M[1]);F.push(M[2])}else!function(L){A.push(!1);E.push(!1);F.push(function(){return y[L]})}(I);return[A,E,function(L){for(var S="",R=0;R<L.length;R++)S+=F[R](L[R]);return S}]}})(k);(function(d){function m(g){var l={inset:!1,lengths:[],color:null};if((g=d.consumeRepeated(function(r){var v=d.consumeToken(/^inset/i,r);return v?(l.inset=!0,v):(v=d.consumeLengthOrPercent(r))?(l.lengths.push(v[0]),
v):(v=d.consumeColor(r),v?(l.color=v[0],v):void 0)},/^/,g))&&g[0].length)return[l,g[1]]}var a=function(g,l,r,v){function y(M){return{inset:M,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var A=[],E=[],F=0;F<r.length||F<v.length;F++){var G=r[F]||y(v[F].inset),I=v[F]||y(r[F].inset);A.push(G);E.push(I)}return d.mergeNestedRepeated(g,l,A,E)}.bind(null,function(g,l){for(;g.lengths.length<Math.max(g.lengths.length,l.lengths.length);)g.lengths.push({px:0});for(;l.lengths.length<Math.max(g.lengths.length,
l.lengths.length);)l.lengths.push({px:0});if(g.inset==l.inset&&!!g.color==!!l.color){for(var r,v=[],y=[[],0],A=[[],0],E=0;E<g.lengths.length;E++){var F=d.mergeDimensions(g.lengths[E],l.lengths[E],2==E);y[0].push(F[0]);A[0].push(F[1]);v.push(F[2])}g.color&&l.color&&(l=d.mergeColors(g.color,l.color),y[1]=l[0],A[1]=l[1],r=l[2]);return[y,A,function(G){for(var I=g.inset?"inset ":" ",M=0;M<v.length;M++)I+=v[M](G[0][M])+" ";return r&&(I+=r(G[1])),I}]}},", ");d.addPropertiesHandler(function(g){if((g=d.consumeRepeated(m,
/^,/,g))&&""==g[1])return g[0]},a,["box-shadow","text-shadow"])})(k);(function(d,m){function a(y){return y.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function g(y,A,E){return Math.min(A,Math.max(y,E))}function l(y){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(y))return Number(y)}function r(y,A){return function(E,F){return[E,F,function(G){return a(g(y,A,G))}]}}function v(y){y=y.trim().split(/\s*[\s,]\s*/);if(0!==y.length){for(var A=[],E=0;E<y.length;E++){var F=l(y[E]);if(void 0===F)return;A.push(F)}return A}}
d.clamp=g;d.addPropertiesHandler(v,function(y,A){if(y.length==A.length)return[y,A,function(E){return E.map(a).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(l,r(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(l,r(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(l,function(y,A){if(0!=y)return r(0,1/0)(y,A)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(l,function(y,A){return[y,A,function(E){return Math.round(g(1,1/0,E))}]},["orphans","widows"]);
d.addPropertiesHandler(l,function(y,A){return[y,A,Math.round]},["z-index"]);d.parseNumber=l;d.parseNumberList=v;d.mergeNumbers=function(y,A){return[y,A,a]};d.numberToString=a})(k);(function(d,m){d.addPropertiesHandler(String,function(a,g){if("visible"==a||"visible"==g)return[0,1,function(l){return 0>=l?a:1<=l?g:"visible"}]},["visibility"])})(k);(function(d,m){function a(r){r=r.trim();l.fillStyle="#000";l.fillStyle=r;var v=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=r,v==l.fillStyle)return l.fillRect(0,
0,1,1),r=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),v=r[3]/255,[r[0]*v,r[1]*v,r[2]*v,v]}function g(r,v){return[r,v,function(y){if(y[3])for(var A=0;3>A;A++)y[A]=Math.round(Math.max(0,Math.min(255,y[A]/y[3])));return y[3]=d.numberToString(d.clamp(0,1,y[3])),"rgba("+y.join(",")+")"}]}m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");m.width=m.height=1;var l=m.getContext("2d");d.addPropertiesHandler(a,g,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,a);d.mergeColors=g})(k);(function(d,m){function a(E){function F(){var R=S.exec(E);L=R?R[0]:void 0}function G(){if("("!==L){var R=Number(L);return F(),R}F();R=M();return")"!==L?NaN:(F(),R)}function I(){for(var R=G();"*"===L||"/"===L;){var aa=L;F();var ra=G();"*"===aa?R*=ra:R/=ra}return R}function M(){for(var R=I();"+"===L||"-"===L;){var aa=L;F();var ra=I();"+"===aa?R+=ra:R-=ra}return R}var L,S=/([\+\-\w\.]+|[\(\)\*\/])/g;return F(),M()}function g(E,F){if("0"==
(F=F.trim().toLowerCase())&&0<="px".search(E))return{px:0};if(/^[^(]*$|^calc/.test(F)){F=F.replace(/calc\(/g,"(");var G={};F=F.replace(E,function(R){return G[R]=null,"U"+R});E="U("+E.source+")";for(var I=F.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+E,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),M=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],L=0;L<M.length;)M[L].test(I)?(I=I.replace(M[L],"$1"),L=0):L++;if("D"==I){for(var S in G){I=a(F.replace(new RegExp("U"+
S,"g"),"").replace(new RegExp(E,"g"),"*0"));if(!isFinite(I))return;G[S]=I}return G}}}function l(E,F){return r(E,F,!0)}function r(E,F,G){var I,M=[];for(I in E)M.push(I);for(I in F)0>M.indexOf(I)&&M.push(I);return E=M.map(function(L){return E[L]||0}),F=M.map(function(L){return F[L]||0}),[E,F,function(L){var S=L.map(function(R,aa){return 1==L.length&&G&&(R=Math.max(R,0)),d.numberToString(R)+M[aa]}).join(" + ");return 1<L.length?"calc("+S+")":S}]}var v=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
m=g.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var y=g.bind(null,/deg|rad|grad|turn/g);d.parseLength=v;d.parseLengthOrPercent=m;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,m);d.parseAngle=y;d.mergeDimensions=r;v=d.consumeParenthesised.bind(null,v);v=d.consumeRepeated.bind(void 0,v,/^/);var A=d.consumeRepeated.bind(void 0,v,/^,/);d.consumeSizePairList=A;v=d.mergeNestedRepeated.bind(void 0,l," ");y=d.mergeNestedRepeated.bind(void 0,v,",");d.mergeNonNegativeSizePair=
v;d.addPropertiesHandler(function(E){if((E=A(E))&&""==E[1])return E[0]},y,["background-size"]);d.addPropertiesHandler(m,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(m,r,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(k);
(function(d,m){function a(l){return d.consumeLengthOrPercent(l)||d.consumeToken(/^auto/,l)}function g(l){if((l=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,a,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}m=d.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,r){return"auto"==l||"auto"==r?[!0,!1,function(v){v=v?l:r;if("auto"==v)return"auto";v=d.mergeDimensions(v,
v);return v[2](v[0])}]:d.mergeDimensions(l,r)},", ");d.parseBox=g;d.mergeBoxes=m;d.addPropertiesHandler(g,m,["clip"])})(k);(function(d,m){function a(I){return function(M){var L=0;return I.map(function(S){return S===A?M[L++]:S})}}function g(I){return I}function l(I){if("none"==(I=I.toLowerCase().trim()))return[];for(var M,L=/\s*(\w+)\(([^)]*)\)/g,S=[],R=0;(M=L.exec(I))&&M.index==R;){R=M.index+M[0].length;var aa=M[1],ra=G[aa];if(!ra)break;M=M[2].split(",");ra=ra[0];if(ra.length<M.length)break;for(var Ea=
[],K=0;K<ra.length;K++){var Z=M[K];var U=ra[K];if(void 0===(Z=Z?{A:function(V){return"0"==V.trim()?F:d.parseAngle(V)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[U.toUpperCase()](Z):{a:F,n:Ea[0],t:E}[U]))return;Ea.push(Z)}if(S.push({t:aa,d:Ea}),L.lastIndex==I.length)return S}}function r(I){return I.toFixed(6).replace(".000000","")}function v(I,M){if(I.decompositionPair!==M){I.decompositionPair=M;var L=d.makeMatrixDecomposition(I)}if(M.decompositionPair!==I){M.decompositionPair=I;var S=
d.makeMatrixDecomposition(M)}return null==L[0]||null==S[0]?[[!1],[!0],function(R){return R?M[0].d:I[0].d}]:(L[0].push(0),S[0].push(1),[L,S,function(R){var aa=d.quat(L[0][3],S[0][3],R[5]);return d.composeMatrix(R[0],R[1],R[2],aa,R[4]).map(r).join(",")}])}function y(I){return I.replace(/(x|y|z|3d)?$/,"3d")}var A=null,E={px:0},F={deg:0},G={matrix:["NNNNNN",[A,A,0,0,A,A,0,0,0,0,1,0,A,A,0,1],g],matrix3d:["NNNNNNNNNNNNNNNN",g],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([A,A,1]),g],scalex:["N",a([A,1,1]),a([A,1])],scaley:["N",a([1,A,1]),a([1,A])],scalez:["N",a([1,1,A])],scale3d:["NNN",g],skew:["Aa",null,g],skewx:["A",null,a([A,F])],skewy:["A",null,a([F,A])],translate:["Tt",a([A,A,E]),g],translatex:["T",a([A,E,E]),a([A,E])],translatey:["T",a([E,A,E]),a([E,A])],translatez:["L",a([E,E,A])],translate3d:["TTL",g]};d.addPropertiesHandler(l,function(I,M){var L=d.makeMatrixDecomposition&&!0,S=!1;if(!I.length||!M.length){I.length||(S=!0,I=M,M=[]);for(var R=
0;R<I.length;R++){var aa=I[R].t,ra=I[R].d,Ea="scale"==aa.substr(0,5)?1:0;M.push({t:aa,d:ra.map(function(ka){if("number"==typeof ka)return Ea;var ia={},qa;for(qa in ka)ia[qa]=Ea;return ia})})}}ra=[];var K=[],Z=[];if(I.length!=M.length){if(!L)return;var U=v(I,M);ra=[U[0]];K=[U[1]];Z=[["matrix",[U[2]]]]}else for(R=0;R<I.length;R++){aa=I[R].t;var V=M[R].t,na=I[R].d,la=M[R].d;U=G[aa];var ya=G[V];if("perspective"==aa&&"perspective"==V||!("matrix"!=aa&&"matrix3d"!=aa||"matrix"!=V&&"matrix3d"!=V)){if(!L)return;
U=v([I[R]],[M[R]]);ra.push(U[0]);K.push(U[1]);Z.push(["matrix",[U[2]]])}else{if(aa!=V)if(U[2]&&ya[2]&&aa.replace(/[xy]/,"")==V.replace(/[xy]/,""))aa=aa.replace(/[xy]/,""),na=U[2](na),la=ya[2](la);else{if(!U[1]||!ya[1]||y(aa)!=y(V)){if(!L)return;U=v(I,M);ra=[U[0]];K=[U[1]];Z=[["matrix",[U[2]]]];break}aa=y(aa);na=U[1](na);la=ya[1](la)}ya=[];V=[];for(var jb=[],gb=0;gb<na.length;gb++)U=("number"==typeof na[gb]?d.mergeNumbers:d.mergeDimensions)(na[gb],la[gb]),ya[gb]=U[0],V[gb]=U[1],jb.push(U[2]);ra.push(ya);
K.push(V);Z.push([aa,jb])}}S&&(I=ra,ra=K,K=I);return[ra,K,function(ka){return ka.map(function(ia,qa){ia=ia.map(function(La,Lb){return Z[qa][1][Lb](La)}).join(",");return"matrix"==Z[qa][0]&&16==ia.split(",").length&&(Z[qa][0]="matrix3d"),Z[qa][0]+"("+ia+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(I){I=d.transformListToMatrix(l(I));return"matrix("+r(I[0])+" "+r(I[1])+" "+r(I[4])+" "+r(I[5])+" "+r(I[12])+" "+r(I[13])+")"}})(k);(function(d){function m(a){return a=100*Math.round(a/
100),a=d.clamp(100,900,a),400===a?"normal":700===a?"bold":String(a)}d.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,g){return[a,g,m]},["font-weight"])})(k);(function(d){function m(v){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,v)||d.consumeLengthOrPercent(v)}function a(v,y){if((y=d.consumeRepeated(m,/^/,y))&&""==y[1]&&(y=y[0],y[0]=y[0]||"center",y[1]=y[1]||"center",3==v&&(y[2]=y[2]||{px:0}),y.length==v)){if(/top|bottom/.test(y[0])||
/left|right/.test(y[1]))v=y[0],y[0]=y[1],y[1]=v;if(/left|right|center|Object/.test(y[0])&&/top|bottom|center|Object/.test(y[1]))return y.map(function(A){return"object"==typeof A?A:l[A]})}}function g(v){if(v=d.consumeRepeated(m,/^/,v)){for(var y=v[0],A=[{"%":50},{"%":50}],E=0,F=!1,G=0;G<y.length;G++){var I=y[G];if("string"==typeof I)F=/bottom|right/.test(I),E={left:0,right:0,center:E,top:1,bottom:1}[I],A[E]=l[I],"center"==I&&E++;else{if(F){F=void 0;var M={};for(F in I)M[F]=-I[F];I=M;I["%"]=(I["%"]||
0)+100}A[E]=I;E++;F=!1}}return[A,v[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},r=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(a.bind(null,3),r,["transform-origin"]);d.addPropertiesHandler(a.bind(null,2),r,["perspective-origin"]);d.consumePosition=g;d.mergeOffsetList=r;r=d.mergeNestedRepeated.bind(null,r,", ");d.addPropertiesHandler(function(v){if((v=d.consumeRepeated(g,/^,/,v))&&""==v[1])return v[0]},r,["background-position",
"object-position"])})(k);(function(d){var m=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),a=d.consumeRepeated.bind(void 0,m,/^/),g=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),l=d.mergeNestedRepeated.bind(void 0,g,",");d.addPropertiesHandler(function(r){var v=d.consumeToken(/^circle/,r);return v&&v[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),m,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],v[1])):(v=d.consumeToken(/^ellipse/,r))&&v[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),a,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],v[1])):(r=d.consumeToken(/^polygon/,r))&&r[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],r[1])):void 0},function(r,v){if(r[0]===v[0])return"circle"==r[0]?d.mergeList(r.slice(1),v.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==r[0]?d.mergeList(r.slice(1),v.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==r[0]&&r[1]==v[1]?d.mergeList(r.slice(2),v.slice(2),["polygon(",r[1],l,")"]):void 0},["shape-outside"])})(k);(function(d,m){function a(r,v){v.concat([r]).forEach(function(y){y in document.documentElement.style&&
(g[r]=y);l[y]=r})}var g={},l={};a("transform",["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(r){return g[r]||r};d.unprefixedPropertyName=function(r){return l[r]||r}})(k)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var b=function(m,a,g){(this||Dc).target=m;(this||Dc).currentTime=a;(this||Dc).timelineTime=g;(this||Dc).type="cancel";(this||Dc).bubbles=!1;(this||Dc).cancelable=!1;(this||Dc).currentTarget=m;(this||Dc).defaultPrevented=!1;(this||Dc).eventPhase=Event.AT_TARGET;(this||Dc).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(m,a){m=d.call(this||Dc,m,a);m._cancelHandlers=[];m.oncancel=null;var g=m.cancel;m.cancel=function(){g.call(this||Dc);var v=new b(this||
Dc,null,n()),y=(this||Dc)._cancelHandlers.concat((this||Dc).oncancel?[(this||Dc).oncancel]:[]);setTimeout(function(){y.forEach(function(A){A.call(v.target,v)})},0)};var l=m.addEventListener;m.addEventListener=function(v,y){"function"==typeof y&&"cancel"==v?(this||Dc)._cancelHandlers.push(y):l.call(this||Dc,v,y)};var r=m.removeEventListener;return m.removeEventListener=function(v,y){"cancel"==v?(v=(this||Dc)._cancelHandlers.indexOf(y),0<=v&&(this||Dc)._cancelHandlers.splice(v,1)):r.call(this||Dc,v,
y)},m}}})();(function(n){var b=document.documentElement,d=null,m=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";d=b.animate({opacity:[a,a]},{duration:1});d.currentTime=0;m=getComputedStyle(b).getPropertyValue("opacity")==a}catch(l){}finally{d&&d.cancel()}if(!m){var g=window.Element.prototype.animate;window.Element.prototype.animate=function(l,r){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||
(l=n.convertToArrayForm(l)),g.call(this||Dc,l,r)}}})(e)}();var bg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");bg.convertToSvgEasing=function(e){for(var k in bg.easings)if(bg.easings[k]===e){if(k.includes("inOut"))return k.replace("inOut","").toLowerCase()+"InOut";if(k.includes("out"))return k.replace("out","").toLowerCase()+"Out";if(k.includes("in"))return k.replace("in","").toLowerCase()+"In"}};bg.stringToEasing=Ij;bg.obj=Ng;bg.promise=xh;bg.fun=xn;bg.num=sm;bg.properties=
Uo;bg.arr=ng;bg.string=Li;bg.Color=Tg;bg.styleProps=hy;bg.addPathAttributes=jy;bg.addSvgAttributes=tA;bg.flubber=ZU;bg.Bezier=Hoa;bg.ShadowObject=ds;var Pq=Ba("at",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});bg.easings=Pq;bg.easings=Pq;bg.easings=Pq;bg.stringToEasing=Ij;bg.stringToEasing=
Ij;var YM=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("AnimationQueue")&&"function"===typeof k.AnimationQueue?k.AnimationQueue:k.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?
bg.obj.merge(this.animations.map(function(d){return d.getAnimationProps(b)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var d=this,m=new bg.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:m},function(){var a=m.affectsMorph&&d.animations.find(function(l){return l.equals(m)});if(!a){var g;if(g=d.animations.find(function(l){return l.canMerge(m)}))return g.mergeWith(m),g;if(m.affectsMorph)return m.assignProps(),
d.animations.push(m),m}return a})}},{key:"startAnimationsFor",value:function(b){for(var d=0;d<this.animations.length;d++)this.animations[d].start(b)}},{key:"startSvgAnimationsFor",value:function(b,d){this.animations.forEach(function(m){return m.startSvg(b,d)})}},{key:"removeAnimation",value:function(b){bg.arr.remove(this.animations,b)}}],[{key:"className",get:function(){return"AnimationQueue"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2518,end:3809})}(void 0);bg.AnimationQueue=YM;bg.AnimationQueue=YM;bg.AnimationQueue=YM;var lV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("PropertyAnimation")&&"function"===typeof k.PropertyAnimation?k.PropertyAnimation:k.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m){var a=this;this.queue=b;this.morph=d;if(d.isPath&&"fill"in m){var g=d.fill||bg.Color.transparent,l=m.fill;m.customTween=bg.fun.compose(function(E){d.fill=g.interpolate(E,l);return E},m.customTween||function(E){});delete m.fill;d.fill=g}if("dropShadow"in m){var r=d.dropShadow||new bg.ShadowObject({blur:0,distance:0,spread:0}),v=m.dropShadow;m.customTween=
bg.fun.compose(function(E){d.dropShadow=r.interpolate(E,v||new bg.ShadowObject({blur:0,distance:0,spread:0}));1==E&&(d.dropShadow=v);return E},m.customTween||function(E){});delete m.dropShadow;d.dropShadow=r}if("visible"in m){var y=void 0===b.originalOpacity?d.opacity:b.originalOpacity;b.originalOpacity=y;var A=m.visible;m.customTween=bg.fun.compose(function(E){if(a._otherVisibleTransformationInProgress)return E;0==E&&1==A&&(d.visible=!0);d.opacity=A?bg.num.interpolate(E,0,y):bg.num.interpolate(E,
y,0);1==E&&(d.visible=A,d.opacity=y,delete b.originalOpacity);return E},m.customTween||function(E){});this.queue.animations.forEach(function(E){return E._otherVisibleTransformationInProgress=!0});delete m.visible}this.config=this.convertBounds(m);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=bg.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||
(this._promise=new Promise(function(d,m){b.resolveCallback=function(){b.onFinish(b);b.subAnimations?b.subAnimations.then(d):d(b.morph)}}))}},{key:"finish",value:function(b){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(m){return m.isText&&m.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;bg.arr.any(bg.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():
this.onFinish())}},{key:"convertBounds",value:function(b){var d=b.bounds,m=b.origin,a=b.rotation,g=b.scale;m=m||this.morph.origin;a=a||this.morph.rotation;g=g||this.morph.scale;return d?Object.assign({},bg.obj.dissoc(b,["bounds"]),{origin:m,rotation:a,scale:g,position:d.topLeft().addPt(m),extent:d.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&bg.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==
b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var d=this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(m){d&&d(m);b.config.customTween&&b.config.customTween(m);return m};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||bg.properties.any(this.animatedProps,function(d,m){return!bg.obj.equals(d[m],b.morph[m])})}},{key:"animatedProps",
get:function(){return bg.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||bg.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,d){var m=[],a;for(a in b)bg.obj.equals(d[a],b[a])&&m.push(a);return[bg.obj.dissoc(b,
m),bg.obj.dissoc(d,m)]}},{key:"getAnimationProps",value:function(b){var d=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),m=d.next().value;d=d.next().value;var a=this.capturedProperties.fill,g=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=g=!1,delete m.background,delete d.background,delete m.backgroundImage,delete d.backgroundImage);"none"==m.filter&&d.boxShadow&&(delete m.filter,m.boxShadow="none");"none"==d.filter&&m.boxShadow&&(delete d.filter,d.boxShadow=
"none");a&&g&&(a.isGradient||g.isGradient)&&(this.tweenGradient=this.interpolate("gradient",a,g));b=$jscomp.makeIterator(bg.arr.union(bg.obj.keys(m),bg.obj.keys(d)));for(a=b.next();!a.done;a=b.next())a=a.value,a in m||(m[a]=d[a]),a in d||(d[a]=m[a]);return[bg.obj.isEmpty(m)?!1:m,bg.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,d=b.isSvgMorph,m=b.isPath,a=b.isPolygon,g={};g.css=bg.styleProps(this.morph);d&&(g.svg=bg.addSvgAttributes(b,{}));m&&(g.path=bg.addPathAttributes(b,
{}));a&&(g.polygon=bg.addPathAttributes(b,{}));return g}},{key:"assignProps",value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:bg.arr.withoutAll(b,this.morph.styleClasses),added:bg.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,d,m){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(g){return bg.num.interpolate(g,
d,m)};case "d":return bg.flubber.interpolate(d,m);case "stroke-width":return function(g){return bg.num.interpolate(g,d,m)};case "stroke":return function(g){return bg.Color.fromString(d).interpolate(g,bg.Color.fromString(m),a.morph.bounds())};case "gradient":return function(g){return d.interpolate(g,m,a.morph.bounds())};case "fill":return d=bg.Color.fromString(d),m=bg.Color.fromString(m),function(g){return d.interpolate(g,m)}}}},{key:"startSvg",value:function(b,d){var m=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(d)),g=a.next().value;a=a.next().value;var l={},r=bg.stringToEasing(this.easing),v;for(v in g)l[v]=this.interpolate(v,g[v],a[v]);var y,A=function(E){y||(y=E);E-=y;if(1<E/m.duration)return m.finish(d);for(var F in l)l[F]&&b.setAttribute(F,l[F](r(E/m.duration)));requestAnimationFrame(A)};requestAnimationFrame(A)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),m=d.next().value,
a=d.next().value;b&&this.tween(b,m,a);if(this.config.origin){var g=this.capturedProperties.origin,l=this.config.origin,r=b.childNodes[0];r&&this.tween(r,r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+g.x+"px, "+g.y+"px, 0px)"},r.style.top?{left:g.x+"px",top:g.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(v){this.active=!1}}},{key:"tween",value:function(b,d,m,a){var g=this;a=void 0===a?!0:a;var l=this.animatedProps.scroll,r=this.config.customTween,v=!1,y=
function(){a&&(g.finish("css"),g.morph.makeDirty())};if(r){var A,E=bg.stringToEasing(this.easing),F=function(la){A||(A=la);var ya=Math.min(1,(la-A)/g.duration);g.morph.dontRecordChangesWhile(function(){return r(E(ya))});if(1<=ya)return g.finish("css");requestAnimationFrame(F)};requestAnimationFrame(F);v=!0}if(l){var G,I=this.morph.env.eventDispatcher.eventState;v=bg.promise.deferred();var M=v.promise,L=v.resolve,S=this.interpolate("scrollLeft",b.scrollLeft,l.x),R=this.interpolate("scrollTop",b.scrollTop,
l.y),aa=bg.stringToEasing(this.easing),ra=function(la){G||(G=la);la-=G;var ya=Math.min(1,la/g.duration);b.scrollTop=R(aa(ya));b.scrollLeft=S(aa(ya));if(1<=la/g.duration)return I.scroll.interactiveScrollInProgress=null,L(),g.finish("css");requestAnimationFrame(ra)};M.debounce=function(){};requestAnimationFrame(ra);v=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ea,K=bg.stringToEasing(this.easing),Z=function(la){Ea||(Ea=la);la-=Ea;if(1<=la/g.duration)return g.finish("css");b.style.setProperty("background-image",
g.tweenGradient(K(la/g.duration)));requestAnimationFrame(Z)};delete d.backgroundImage;delete m.backgroundImage;delete d.background;delete m.background;requestAnimationFrame(Z);v=!0}else this.tweenGradient&&(v=!0);if(b&&d&&m){l={};M={};for(var U in d)l[bg.string.camelize(U)]=d[U];for(var V in m)M[bg.string.camelize(V)]=m[V];try{var na=b.animate([l,M],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});na.onfinish=function(){y();setTimeout(function(){return na.cancel()},
200)};v=!0}catch(la){v=!1}}v||y()}}],[{key:"className",get:function(){return"PropertyAnimation"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3818,end:17317})}(void 0);bg.PropertyAnimation=lV;bg.PropertyAnimation=lV;bg.PropertyAnimation=lV;var Sh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");
Sh.cumulativeOffset=my;Sh.createIFrame=function(e,k,n){k=void 0===k?"about:blank":k;n=void 0===n?new Sh.Rectangle(0,0,700,700):n;return new Promise(function(b,d){if(!e)throw Error("Need parent element!");var m=document.createElement("iframe");m.style.position="absolute";m.style.top=n.top()+"px";m.style.left=n.left()+"px";m.style.width=n.width+"px";m.style.height=n.height+"px";m.src=k;var a=!1;m.onload=function(g){a=!0;m.onload=null;b(m)};Sh.promise.waitFor(1E3,function(){return!!a}).catch(function(g){return d(Error("iframe load timeout"))});
e.appendChild(m)})};Sh.requestAnimationFramePolyfill=function(e){for(var k=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!e.requestAnimationFrame;++b)e.requestAnimationFrame=e[n[b]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[b]+"CancelAnimationFrame"]||e[n[b]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(d,m){var a=Date.now(),g=Math.max(0,16-(a-k));m=e.setTimeout(function(){d(a+g)},g);k=a+g;return m});e.cancelAnimationFrame||(e.cancelAnimationFrame=
function(d){clearTimeout(d)})};Sh.createDOMEnvironment_browser=function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(e=Sh.IFramedDomEnvironment,k.yield(Sh.createIFrame(document.body),2)):k.return(new e(k.yieldResult))})};Sh.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var e=System._nodeRequire("jsdom"),k=e.createVirtualConsole().sendTo(console);return new Promise(function(n,b){e.env("<div></div>",
["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:k},function(d,m){return d?b(d):n(new Sh.DomEnvironment(m,m.document,function(){return m.close()}))})})};Sh.createDOMEnvironment=TF;Sh.defaultDOMEnv=vA;Sh.setCSSDef=function(e,k,n){Sh.arr.from(e.childNodes).forEach(function(b){return e.removeChild(b)});k=n.createTextNode(k);e.styleSheet?e.styleSheet.cssText=k.nodeValue:e.appendChild(k);return e};Sh.addCSSDef=function(e,k,n){var b=n.createElement("style");b.type="text/css";e&&b.setAttribute("id",
e);Sh.setCSSDef(b,k,n);n.head.appendChild(b);return b};Sh.addOrChangeCSSDeclaration=zj;Sh.addOrChangeLinkedCSS=df;Sh.promise=xh;Sh.obj=Ng;Sh.arr=ng;Sh.Rectangle=Re;Sh.cumulativeOffset=my;Sh.cumulativeOffset=my;Sh.createDOMEnvironment=TF;Sh.createDOMEnvironment=TF;(function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("DomEnvironment")&&"function"===typeof k.DomEnvironment?k.DomEnvironment:k.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m){Sh.requestAnimationFramePolyfill(b);this.window=b;this.document=d;this.destroyFn=m}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:"className",get:function(){return"DomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3032,end:3326})})(void 0);(function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof k.IFramedDomEnvironment?k.IFramedDomEnvironment:k.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:"className",get:function(){return"IFramedDomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3328,end:3672})})(Sh.DomEnvironment);Sh._defaultEnv=Sh._defaultEnv||void 0;Sh.defaultDOMEnv=vA;Sh.defaultDOMEnv=vA;Sh.addOrChangeCSSDeclaration=zj;Sh.addOrChangeCSSDeclaration=zj;Sh.addOrChangeLinkedCSS=df;Sh.addOrChangeLinkedCSS=df;var ZM=function(){return function(e){e=void 0===e?window.document:e;return function(k,n,b){var d=n||void 0;"undefined"===typeof b&&
(b=n,d=void 0);var m=k.split(".");if(1<m.length)for(k=m.shift(),n=0;n<m.length;n++){var a=m[n],g;-1<(g=a.indexOf("#"))&&(a.slice(g+1),a.slice(0,g))}n=k.split("#");1<n.length&&(k=n[0]);k=e.createElement(k);if(d){for(var l in d)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(k[l]=d[l]);if(l=d.style)for(var r in l)k.style[r]=l[r];if(r=d.dataset)if(k.dataset)for(var v in r)k.dataset[v]=r[v];else for(v in r)k.setAttribute("data-"+v,r[v]);if(d=d.attributes)for(var y in d)d[y]&&Sh.obj.isBoolean(d[y])?k.toggleAttribute(y):
k.setAttribute(y,d[y])}b||(b="");if("string"===typeof b)k.appendChild(e.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)y=b[n],k.appendChild("string"===typeof y?e.createTextNode(y):y);else k.appendChild("string"===typeof b?e.createTextNode(b):b);return k}}}();Sh.hyperscriptFnForDocument=ZM;Sh.hyperscriptFnForDocument=ZM;Sh.hyperscriptFnForDocument=ZM;var fg=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");fg.applyExclude=Aw;fg.parseQuery=je;fg.stringifyQuery=
Ku;fg.withRelativePartsResolved=ny;fg._relativePathBetween_checkPathes=function(e,k){e.startsWith("/")&&(e=e.slice(1));k.startsWith("/")&&(k=k.slice(1));e=e.split("/");k=k.split("/");for(var n=0;n<k.length&&e[n]&&e[n]==k[n];n++);return"../".repeat(Math.max(0,k.length-n-1))+e.splice(n,e.length).join("/")};fg.relativePathBetween=gd;fg.join=wA;fg.parent=ja;fg.parents=q;fg.resource=w;fg.createFiles=B;fg.registerExtension=D;fg.unregisterExtension=J;fg.applyExclude=Aw;fg.applyExclude=Aw;fg.parseQuery=je;
fg.parseQuery=je;fg.stringifyQuery=Ku;fg.stringifyQuery=Ku;fg.slashEndRe=/\/+$/;fg.slashStartRe=/^\/+/;fg.protocolRe=/^[a-z0-9-_\.]+:/;fg.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;fg.slashslashRe=/^\/\/[^\/]+/;fg.pathDotRe=/\/\.\//g;fg.pathDoubleDotRe=/\/[^\/]+\/\.\./;fg.pathDoubleSlashRe=/(^|[^:])[\/]+/g;fg.withRelativePartsResolved=ny;fg.withRelativePartsResolved=ny;fg.relativePathBetween=gd;fg.relativePathBetween=gd;fg.join=wA;fg.join=wA;fg.parent=ja;fg.parent=ja;fg.parents=q;fg.parents=q;var EB=[];
fg.extensions=EB;fg.extensions=EB;fg.extensions=EB;fg.resource=w;fg.resource=w;fg.createFiles=B;fg.createFiles=B;fg.registerExtension=D;fg.registerExtension=D;fg.unregisterExtension=J;fg.unregisterExtension=J;var $M=/^file:\/\/\/[a-z]:\//i;fg.windowsURLPrefixRe=$M;fg.windowsURLPrefixRe=$M;fg.windowsURLPrefixRe=$M;var aN=/^[a-z]:\//i;fg.windowsPathPrefixRe=aN;fg.windowsPathPrefixRe=aN;fg.windowsPathPrefixRe=aN;var bN=/^[a-z]:\/$/i;fg.windowsRootPathRe=bN;fg.windowsRootPathRe=bN;fg.windowsRootPathRe=
bN;var ck=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");ck.nyi=function(e,k){throw Error(k+" for "+e.constructor.name+" not yet implemented");};ck.resource=w;ck.parseQuery=je;ck.withRelativePartsResolved=ny;ck.relativePathBetween=gd;ck.windowsPathPrefixRe=aN;ck.stringifyQuery=Ku;ck.slashEndRe=/\/+$/;ck.slashStartRe=/^\/+/;ck.protocolRe=/^[a-z0-9-_\.]+:/;ck.slashslashRe=/^\/\/[^\/]+/;var gh=function(e,k){if(!e)throw Error("Cannot create resource without url");this.url=String(e);
this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};gh.fromProps=function(e){e=void 0===e?{}:e;return(new this(e.url)).assignProperties(e)};gh.prototype.equals=function(e){if(!e||this.constructor!==e.constructor)return!1;var k=this.url;e=e.url;"/"===k[k.length-1]&&(k=k.slice(0,-1));"/"===e[e.length-1]&&(e=e.slice(0,-1));return k===e};gh.prototype.toString=function(){return this.constructor.name+
'("'+this.url+'")'};gh.prototype.newResource=function(e){return ck.resource(e,this)};gh.prototype.path=function(){var e=this.url.replace(ck.protocolRe,"").replace(ck.slashslashRe,"");return""===e?"/":e};gh.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};gh.prototype.name=function(){var e=this.path(),k=e.lastIndexOf("?");-1<k&&(e=e.slice(0,k));e.endsWith("/")&&(e=e.slice(0,-1));e=e.split("/");return decodeURIComponent(e[e.length-1])};gh.prototype.ext=function(){var e=this.url;
if(e.endsWith("/"))return"";e=$jscomp.makeIterator(e.match(/\.([^\/\.]+$)/)||["",""]);e.next();return e.next().value.toLowerCase()};gh.prototype.nameWithoutExt=function(){var e=this.name(),k=e.lastIndexOf(".");0<k&&(e=e.slice(0,k));return e};gh.prototype.scheme=function(){return this.url.split(":")[0]};gh.prototype.host=function(){var e=this.url.indexOf("://");if(-1===e)return null;e=this.url.slice(e+3);var k=e.indexOf("/");return e.slice(0,-1<k?k:e.length)};gh.prototype.schemeAndHost=function(){return this.isRoot()?
this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};gh.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(ck.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};gh.prototype.parents=function(){for(var e=[],k=this.parent();k;)e.unshift(k),k=k.parent();return e};gh.prototype.isParentOf=function(e){var k=this;return e.schemeAndHost()===this.schemeAndHost()&&e.parents().some(function(n){return n.equals(k)})};gh.prototype.query=function(){return ck.parseQuery(this.url)};
gh.prototype.withQuery=function(e){var k=Object.assign({},this.query(),{},e);e=$jscomp.makeIterator(this.url.split("?")).next().value;k=ck.stringifyQuery(k);return this.newResource(e+"?"+k)};gh.prototype.commonDirectory=function(e){if(e.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(e))return this;if(this.isRoot())return this.asDirectory();if(e.isRoot())return e.asDirectory();e=e.parents();for(var k=this.parents(),n=this.root(),b=0;b<k.length;b++){var d=k[b],
m=e[b];if(!m||!d.equals(m))break;n=d}return n};gh.prototype.withRelativePartsResolved=function(){var e=this.path(),k=ck.withRelativePartsResolved(e);if(k===e)return this;k.startsWith("/")&&(k=k.slice(1));k[1]===":".startsWith("/")?k=k.slice(1):":"===k[1]&&k.match(ck.windowsPathPrefixRe)&&(k=k.slice(3));return this.newResource(this.root().url+k)};gh.prototype.relativePathFrom=function(e){return ck.relativePathBetween(e.url,this.url)};gh.prototype.withPath=function(e){return(this.isRoot()?this:this.root()).join(e)};
gh.prototype.join=function(e){return this.newResource(this.url.replace(ck.slashEndRe,"")+"/"+e.replace(ck.slashStartRe,""))};gh.prototype.isRoot=function(){return"/"===this.path()};gh.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(ck.slashEndRe)};gh.prototype.isDirectory=function(){return!this.isFile()};gh.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(ck.slashEndRe,"")+"/")};gh.prototype.root=function(){if(this.isRoot())return this;
var e=this.url.slice(0,-this.path().length);return this.newResource(e+"/")};gh.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(ck.slashEndRe,"")):this};gh.prototype.assignProperties=function(e){for(var k in e)if("url"!==k){var n=k;if("isLink"===k||"isDirectory"===k)n="_"+k;this[n]=e[k]}return this};gh.prototype.ensureExistance=function(e){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(k.exists(),
2);case 2:return n.yieldResult?n.return(k):n.yield(k.parent().ensureExistance(),3);case 3:return k.isFile()?n.yield(k.write(e||""),5):n.yield(k.mkdir(),5);case 5:return n.return(k)}})};gh.prototype.copyTo=function(e,k){k=void 0===k?!0:k;var n=this,b,d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(n.isFile()){m=e.isFile()?e:e.join(n.name());if(!k){l.jumpTo(8);break}return l.yield(m.parent().ensureExistance(),8)}if(!e.isDirectory())throw Error("Cannot copy a directory to a file!");
return l.yield(n.dirList("infinity"),4);case 4:return b=l.yieldResult,d=b.map(function(r){return e.join(r.relativePathFrom(n))}),l.yield(e.ensureExistance(),5);case 5:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isDirectory()&&d[y].ensureExistance()).then(r)}},function(){return Promise.resolve()})(),6);case 6:return l.yield(b.reduceRight(function(r,v,y){return function(){return Promise.resolve(v.isFile()&&v.copyTo(d[y],!1)).then(r)}},function(){return Promise.resolve()})(),
3);case 8:return a=m,g=a.write,l.yield(n.read(),11);case 11:return l.yield(g.call(a,l.yieldResult),3);case 3:return l.return(n)}})};gh.prototype.rename=function(e){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(k.copyTo(e),2);k.remove();return n.return(e)})};gh.prototype.beBinary=function(e){return this.setBinary(!0)};gh.prototype.setBinary=function(e){this.binary=e;return this};gh.prototype.read=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ck.nyi(e,
"read");k.jumpToEnd()})};gh.prototype.write=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ck.nyi(e,"write");k.jumpToEnd()})};gh.prototype.mkdir=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ck.nyi(e,"mkdir");k.jumpToEnd()})};gh.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ck.nyi(e,"exists");k.jumpToEnd()})};gh.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){ck.nyi(e,
"remove");k.jumpToEnd()})};gh.prototype.dirList=function(e,k){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){ck.nyi(n,"dirList");b.jumpToEnd()})};gh.prototype.readProperties=function(e){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){ck.nyi(k,"readProperties");n.jumpToEnd()})};gh.prototype.writeJson=function(e,k){return this.write((void 0===k?0:k)?JSON.stringify(e,null,2):JSON.stringify(e))};gh.prototype.readJson=function(e){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==
d.nextAddress?(n=JSON,b=n.parse,d.yield(k.read(),2)):d.return(b.call(n,d.yieldResult))})};gh.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(gh.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Ba("bD",gh);ck.Resource=gh;ck.default=gh;var Fh=
lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");Fh.davNs=function(e){return(e=e.match(/\/([a-z]+?):multistatus/i))?e[1]:"d"};Fh.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};Fh.readPropertyNode=
function(e,k){k=void 0===k?{}:k;var n=e.tagName.replace(/[^:]+:/,"");n=Fh.propertyNodeMap[n];e=e.textContent;switch(n){case "lastModified":case "created":e=new Date(e);break;case "size":e=Number(e)}k[n]=e;return k};Fh.readXMLPropfindResult=function(e){var k=(new DOMParser).parseFromString(e,"text/xml");e=Fh.davNs(e);k=(new Fh.XPathQuery("/"+e+":multistatus/"+e+":response")).findAll(k.documentElement);var n=new Fh.XPathQuery(e+":href"),b=new Fh.XPathQuery(e+":propstat/"+e+":prop");return k.map(function(d){var m=
b.findFirst(d);m=Array.from(m.childNodes).reduce(function(a,g){return Fh.readPropertyNode(g,a)},{});d=n.findFirst(d);m.url=d.textContent||d.text;return m})};Fh.defaultOrigin=function(){return document.location.origin};Fh.makeRequest=function(e,k,n,b,d){b=void 0===b?{}:b;d=e.url;var m=e.useCors,a=e.useProxy,g=e.headers;m="undefined"!==typeof m?m:!0;k={method:void 0===k?"GET":k};if("undefined"!==typeof a?a:1)Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":d}),
d=e.proxyDomain||Fh.defaultOrigin();m&&(k.mode="cors");n&&(k.body=n);k.redirect="follow";k.headers=Object.assign({},b,{},g);return fetch(d,k)};Fh.upload=O;Fh.Resource=gh;Fh.applyExclude=Aw;Fh.promise=xh;Fh.num=sm;var DH=function(e){this.expression=e;this.contextNode=null;this.xpe=new XPathEvaluator};DH.prototype.establishContext=function(e){this.nsResolver||(e=e.ownerDocument?e.ownerDocument.documentElement:e.documentElement,e!==this.contextNode&&(this.contextNode=e,this.nsResolver=this.xpe.createNSResolver(e)))};
DH.prototype.manualNSLookup=function(){this.nsResolver=function(e){return Namespace[e.toUpperCase()]||null};return this};DH.prototype.findAll=function(e,k){this.establishContext(e);e=this.xpe.evaluate(this.expression,e,this.nsResolver,XPathResult.ANY_TYPE,null);for(var n=[],b;b=e.iterateNext();)n.push(b);return 0<n.length||void 0===k?n:k};DH.prototype.findFirst=function(e){this.establishContext(e);return this.xpe.evaluate(this.expression,e,this.nsResolver,XPathResult.ANY_TYPE,null).iterateNext()};
Fh.XPathQuery=DH;Fh.propertyNodeMap={getlastmodified:"lastModified",creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Fh.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Fh.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof process;Fh.upload=O;Fh.upload=O;var Sm=function(e,k){k=void 0===k?{}:k;e=Fh.Resource.call(this,e,k)||this;e.onLoad=k.onLoad||function(){};e.onProgress=k.onProgress||function(){};e.useProxy=k.hasOwnProperty("useProxy")?k.useProxy:!1;e.proxyDomain=k.proxyDomain||void 0;e.useCors=k.hasOwnProperty("useCors")?k.useCors:!1;e.headers=k.headers||{};e.binary=e.isFile()?Fh.binaryExtensions.includes(e.ext()):
!1;e.errorOnHTTPStatusCodes=k.hasOwnProperty("errorOnHTTPStatusCodes")?k.errorOnHTTPStatusCodes:!0;return e};$jscomp.inherits(Sm,Fh.Resource);Sm.prototype.join=function(e){return Object.assign(Fh.Resource.prototype.join.call(this,e),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Sm.prototype.makeProxied=function(e){void 0!==e&&(this.proxyDomain=e);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Sm.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Sm.prototype.read=function(){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(Fh.makeRequest(e),2);k=n.yieldResult;if(!k.ok&&e.errorOnHTTPStatusCodes)throw Error("Cannot read "+e.url+": "+k.statusText+" "+k.status);if(!e.binary)return n.return(k.text());if("blob"===e.binary)return n.return(k.blob());if("function"===
typeof k.arrayBuffer)return n.return(k.arrayBuffer());if("function"===typeof k.buffer)return n.return(k.buffer());throw Error("Don't now how to read binary resource "+e+"'");})};Sm.prototype.write=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!k.isFile())throw Error("Cannot write a non-file: "+k.url);return b.yield(Fh.upload(k,e),2)}n=b.yieldResult;if(!Fh.num.between(n.status,200,300)&&k.errorOnHTTPStatusCodes)throw Error("Cannot write "+
k.url+": "+n.statusText+" "+n.status);return b.return(k)})};Sm.prototype.mkdir=function(){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(e.isFile())throw Error("Cannot mkdir on a file: "+e.url);return n.yield(Fh.makeRequest(e,"MKCOL"),2)}k=n.yieldResult;if(!k.ok&&e.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+e.url+": "+k.statusText+" "+k.status);return n.return(e)})};Sm.prototype.exists=function(){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return e.isRoot()?(k=!0,n.jumpTo(2)):n.yield(Fh.makeRequest(e,"HEAD"),3);2!=n.nextAddress&&(k=!!n.yieldResult.ok);return n.return(k)})};Sm.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(Fh.makeRequest(e,"DELETE"),2):k.return(e)})};Sm.prototype._propfind=function(){var e=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(Fh.makeRequest(e,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=d.nextAddress){k=d.yieldResult;if(!k.ok&&e.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+e.url+": "+k.statusText);return d.yield(k.text(),3)}n=d.yieldResult;b=e.root();return d.return(Fh.readXMLPropfindResult(n).map(function(m){return b.join(m.url).assignProperties(m)}))})};Sm.prototype.dirList=function(e,k){e=void 0===e?1:e;k=void 0===k?{}:k;var n=this,b,d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if("number"!==
typeof e&&"infinity"!==e)throw Error("dirList \u2013 invalid depth argument: "+e);b=k;d=b.exclude;0>=e&&(e=1);return 1===e?l.yield(n._propfind(),5):l.yield(n.dirList(1,k),4)}if(5!=l.nextAddress)return m=l.yieldResult,a=m.filter(function(r){return r.isDirectory()}),l.return(Promise.all(a.map(function(r){return r.dirList("number"===typeof e?e-1:e,k)})).then(function(r){return r.reduce(function(v,y){return v.concat(y)},m)}));g=l.yieldResult;g.shift();d&&(g=Fh.applyExclude(d,g));return l.return(g)})};
Sm.prototype.readProperties=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k._propfind(),2);n=b.yieldResult[0];return b.return(k.assignProperties(n))})};Sm.prototype.post=function(e){e=void 0===e?null:e;var k=this,n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof e&&(e=JSON.stringify(e)),m.yield(Fh.makeRequest(k,"POST",e,{}),2);case 2:return n=m.yieldResult,
m.setCatchFinallyBlocks(3),m.yield(n.text(),5);case 5:b=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{d=JSON.parse(b)}catch(a){}if(!n.ok&&k.errorOnHTTPStatusCodes)throw Error("Error in POST "+k.url+": "+(b||n.statusText));return m.return(d||b)}})};Sm.prototype.copyTo=function(e,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(n.isFile()&&(b=e.isFile()?e:e.join(n.name()),
Fh.isNode)){if(b.isHTTPResource)return d.return(n._copyTo_file_nodejs_http(b,k));if(b.isNodeJSFileResource)return d.return(n._copyTo_file_nodejs_fs(b,k))}return d.return(Fh.Resource.prototype.copyTo.call(n,e,k))})};Sm.prototype._copyFrom_file_nodejs_fs=function(e,k){k=void 0===k?!0:k;var n=this,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return d=e._createReadStream(),d.on("error",
function(g){return b=g}),a.yield(Fh.makeRequest(n,"PUT",d),4);m=a.yieldResult;if(b)throw b;if(!m.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+m.statusText+" "+m.status);return a.return(n)})};Sm.prototype._copyTo_file_nodejs_fs=function(e,k){k=void 0===k?!0:k;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return k?m.yield(e.parent().ensureExistance(),2):m.jumpTo(2);if(4!=m.nextAddress)return m.yield(Fh.makeRequest(n,"GET"),4);b=
m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.return(new Promise(function(a,g){return b.body.pipe(e._createWriteStream()).on("error",function(l){return d=l}).on("finish",function(){return d?g(d):a(n)})}))})};Sm.prototype._copyTo_file_nodejs_http=function(e,k){k=void 0===k?!0:k;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(!k){m.jumpTo(2);break}return m.yield(e.parent().ensureExistance(),
2);case 2:return m.yield(Fh.makeRequest(n,"GET"),4);case 4:b=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return m.yield(Fh.makeRequest(e,"PUT",b.body),5);case 5:d=m.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+d.statusText+" "+d.status);m.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Sm.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Fh.WebDAVResource=
Sm;var cN={name:"http-webdav-resource",matches:function(e){return e.startsWith("http:")||e.startsWith("https:")},resourceClass:Fh.WebDAVResource};Fh.resourceExtension=cN;Fh.resourceExtension=cN;Fh.resourceExtension=cN;Fh.default=Sm;var tt=System.get("@system-env").node?require("fs"):{},Ioa=tt.readFile,Joa=tt.writeFile,Koa=tt.exists,Loa=tt.readdir,Moa=tt.mkdir,Noa=tt.rmdir,Ooa=tt.unlink,Poa=tt.lstat,Qoa=tt.rename,Roa=tt.createWriteStream,Soa=tt.createReadStream,Fg=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
Fg.wrapInPromise=function(e){return function(k){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(d,m){return e.apply(null,n.concat(function(a,g){return a?m(a):d(g)}))})}};Fg.Resource=gh;Fg.applyExclude=Aw;Fg.windowsURLPrefixRe=$M;Fg.windowsRootPathRe=bN;Fg.createWriteStream=Roa;Fg.createReadStream=Soa;Fg.readFile=Ioa;Fg.writeFile=Joa;Fg.exists=Koa;Fg.mkdir=Moa;Fg.rmdir=Noa;Fg.unlink=Ooa;Fg.readdir=Loa;Fg.lstat=Poa;Fg.rename=Qoa;Fg.readFileP=Fg.wrapInPromise(Fg.readFile);
Fg.writeFileP=Fg.wrapInPromise(Fg.writeFile);Fg.existsP=function(e){return new Promise(function(k,n){return Fg.exists(e,function(b){return k(!!b)})})};Fg.readdirP=Fg.wrapInPromise(Fg.readdir);Fg.mkdirP=Fg.wrapInPromise(Fg.mkdir);Fg.rmdirP=Fg.wrapInPromise(Fg.rmdir);Fg.unlinkP=Fg.wrapInPromise(Fg.unlink);Fg.lstatP=Fg.wrapInPromise(Fg.lstat);Fg.renameP=Fg.wrapInPromise(Fg.rename);var Rn=function(){return Fg.Resource.apply(this,arguments)||this};$jscomp.inherits(Rn,Fg.Resource);Rn.prototype.path=function(){return this.url.replace("file://",
"")};Rn.prototype.stat=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Fg.lstatP(e.path()))})};Rn.prototype.read=function(){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){k=Fg.readFileP(e.path());return n.return(e.binary?k:k.then(String))})};Rn.prototype.write=function(e){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(k.isDirectory())throw Error("Cannot write into a directory: "+
k.path());return n.yield(Fg.writeFileP(k.path(),e),2)}return n.return(k)})};Rn.prototype.mkdir=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(e.isFile())throw Error("Cannot mkdir on a file: "+e.path());return k.yield(Fg.mkdirP(e.path()),2)}return k.return(e)})};Rn.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(e.isRoot()?!0:Fg.existsP(e.path()))})};Rn.prototype.dirList=
function(e,k){e=void 0===e?1:e;k=void 0===k?{}:k;var n=this,b,d,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:if("number"!==typeof e&&"infinity"!==e)throw Error("dirList \u2013 invalid depth argument: "+e);b=k;d=b.exclude;0>=e&&(e=1);if(1!==e){G.jumpTo(2);break}m=[];a=$jscomp;g=a.makeIterator;return G.yield(Fg.readdirP(n.path()),3);case 3:l=g.call(a,G.yieldResult),r=l.next();case 4:if(r.done){G.jumpTo(6);break}v=r.value;y=n.join(v);
return G.yield(y.stat(),7);case 7:A=G.yieldResult;y=A.isDirectory()?y.asDirectory():y;y._assignPropsFromStat(A);m.push(y);r=l.next();G.jumpTo(4);break;case 6:return d&&(m=Fg.applyExclude(d,m)),G.return(m);case 2:return G.yield(n.dirList(1,k),8);case 8:return E=G.yieldResult,F=E.filter(function(I){return I.isDirectory()}),G.return(Promise.all(F.map(function(I){return I.dirList("number"===typeof e?e-1:e,k)})).then(function(I){return I.reduce(function(M,L){return M.concat(L)},E)}))}})};Rn.prototype.isEmptyDirectory=
function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(e.dirList(),2):k.return(0===k.yieldResult.length)})};Rn.prototype.rename=function(e){var k=this,n,b,d,m,a,g,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:if(!(e instanceof k.constructor))return G.return(Fg.Resource.prototype.rename.call(k,e));if(k.isFile()){e=e.asFile();Fg.renameP(k.path(),e.path());G.jumpTo(2);break}e=e.asDirectory();
return G.yield(e.ensureExistance(),3);case 3:return n=[],b=[],d=$jscomp,m=d.makeIterator,G.yield(k.dirList("infinity"),4);case 4:a=m.call(d,G.yieldResult);for(g=a.next();!g.done;g=a.next())l=g.value,l.isDirectory()?b.push(l):n.push(l);r=$jscomp.makeIterator(b);v=r.next();case 5:if(v.done){G.jumpTo(7);break}y=v.value;return G.yield(e.join(y.relativePathFrom(k)).ensureExistance(),6);case 6:v=r.next();G.jumpTo(5);break;case 7:A=$jscomp.makeIterator(n),E=A.next();case 9:if(E.done)return G.yield(k.remove(),
2);F=E.value;return G.yield(F.rename(e.join(F.relativePathFrom(k))),10);case 10:E=A.next();G.jumpTo(9);break;case 2:return G.return(e)}})};Rn.prototype.remove=function(){var e=this,k,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(e.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return e.isDirectory()?(k=$jscomp,n=k.makeIterator,a.yield(e.dirList(),7)):a.yield(Fg.unlinkP(e.path()),3);case 7:b=n.call(k,a.yieldResult),d=b.next();
case 8:if(d.done)return a.yield(Fg.rmdirP(e.path()),3);m=d.value;return a.yield(m.remove(),9);case 9:d=b.next();a.jumpTo(8);break;case 3:return a.return(e)}})};Rn.prototype.readProperties=function(){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=e,n=k._assignPropsFromStat,b.yield(e.stat(),2)):b.return(n.call(k,b.yieldResult))})};Rn.prototype.copyTo=function(e,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return n.isFile()&&
(b=e.isFile()?e:e.join(n.name()),b.isHTTPResource)?d.return(b._copyFrom_file_nodejs_fs(n,k=!0)):d.return(Fg.Resource.prototype.copyTo.call(n,e,k))})};Rn.prototype._assignPropsFromStat=function(e){return this.assignProperties({lastModified:e.mtime,created:e.ctime,size:e.size,type:e.isDirectory()?"directory":"file",isLink:e.isSymbolicLink()})};Rn.prototype._createWriteStream=function(){return Fg.createWriteStream(this.path())};Rn.prototype._createReadStream=function(){return Fg.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(Rn.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Fg.NodeJSFileResource=Rn;var EH=function(e,k){"file:///"!==e.slice(0,8)&&"file://"===e.slice(0,7)&&(e="file:///"+e.slice(7));e.includes("\\")&&(e=e.replace(/\\/g,"/"));return Fg.NodeJSFileResource.call(this,e,k)||this};$jscomp.inherits(EH,Fg.NodeJSFileResource);EH.prototype.path=function(){return this.url.replace("file:///","")};EH.prototype.isRoot=function(){return!!this.path().match(Fg.windowsRootPathRe)};
EH.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var e=this.url.match(Fg.windowsURLPrefixRe);if(e)return this.newResource(e[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};Fg.NodeJSWindowsFileResource=EH;var dN={name:"nodejs-file-resource",matches:function(e){return e.startsWith("file:")},resourceClass:"undefined"!=typeof process&&"win32"===process.platform?Fg.NodeJSWindowsFileResource:Fg.NodeJSFileResource};Fg.resourceExtension=
dN;Fg.resourceExtension=dN;Fg.resourceExtension=dN;var Cl=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Cl.applyExclude=function(e,k){return k?"string"===typeof k?!e.url.includes(k):"function"===typeof k?!k(e):k instanceof RegExp?!k.test(e.url):!0:!0};Cl.Resource=gh;Cl.createFiles=B;Cl.debug=!1;Cl.slashRe=/\//g;var es=function(e,k){k=void 0===k?{}:k;if(!e||"string"!==typeof e)throw Error("LocalResourceInMemoryBackend needs name!");this.name=e;this._filespec=k};es.removeHost=
function(e){delete this.hosts[e]};es.ensure=function(e,k){var n=this;k=void 0===k?{}:k;var b=this.named(k.host);return Promise.resolve().then(function(){return e?Cl.createFiles("local://"+b.name,e):null}).then(function(){return n})};es.named=function(e){e||(e="default");return this.hosts[e]||(this.hosts[e]=new this(e))};es.prototype.get=function(e){return this._filespec[e]};es.prototype.set=function(e,k){this._filespec[e]=k};es.prototype.write=function(e,k){var n=this._filespec[e];n||(n=this._filespec[e]=
{created:new Date});n.content=k;n.isDirectory=!1;n.lastModified=new Date};es.prototype.read=function(e){return(e=this._filespec[e])&&e.content?e.content:""};es.prototype.mkdir=function(e){var k=this._filespec[e];k&&k.isDirectory||(k||(k=this._filespec[e]={created:new Date}),k.content&&delete k.content,k.isDirectory=!0,k.lastModified=new Date)};es.prototype.partialFilespec=function(e,k){e=void 0===e?"/":e;k=void 0===k?Infinity:k;for(var n={},b=this.filespec,d=Object.keys(b),m=0;m<d.length;m++){var a=
d[m];if(a.startsWith(e)&&e!==a){var g=a.slice(e.length);(g.includes("/")?g.match(Cl.slashRe).length+1:1)>k||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(es.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(e){this._filespec=e}}});$jscomp.global.Object.defineProperties(es,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});Cl.LocalResourceInMemoryBackend=es;var ut=function(){return Cl.Resource.apply(this,
arguments)||this};$jscomp.inherits(ut,Cl.Resource);ut.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};ut.prototype.write=function(e){Cl.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var k=this.localBackend.get(this.path());if(k&&k.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),e);return Promise.resolve(this)};
ut.prototype.mkdir=function(){Cl.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var e=this.localBackend.get(this.path());if(e&&e.isDirectory)return Promise.resolve(this);if(e&&!e.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};ut.prototype.exists=function(){Cl.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};ut.prototype.remove=function(){var e=this;Cl.debug&&console.log("["+this+"] remove");var k=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(k)&&delete e.localBackend.filespec[n]});return Promise.resolve(this)};ut.prototype.readProperties=function(){Cl.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};ut.prototype.dirList=function(e,k){e=void 0===e?1:e;k=void 0===k?{}:k;Cl.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(e,k);k=k.exclude;var n=this.path(),b=[],d=Object.keys(this.localBackend.filespec);"infinity"===e&&(e=Infinity);for(var m={},a=0;a<d.length;m={$jscomp$loop$prop$dirToChild$2233:m.$jscomp$loop$prop$dirToChild$2233},a++){var g=d[a];g.startsWith(n)&&n!==g&&(g=g.slice(n.length),(g.includes("/")?g.match(Cl.slashRe).length+1:1)>e?(m.$jscomp$loop$prop$dirToChild$2233=this.join(g.split("/").slice(0,e).join("/")+"/"),
b.some(function(l){return function(r){return r.equals(l.$jscomp$loop$prop$dirToChild$2233)}}(m))||b.push(m.$jscomp$loop$prop$dirToChild$2233)):(g=this.join(g),k&&!Cl.applyExclude(g,k)||b.push(g)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(ut.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return Cl.LocalResourceInMemoryBackend.named(this.host())}}});Cl.LocalResource=ut;var eN={name:"local-resource",matches:function(e){return e.startsWith("local:")},resourceClass:Cl.LocalResource};
Cl.resourceExtension=eN;Cl.resourceExtension=eN;Cl.resourceExtension=eN;Cl.default=ut;var sj=lively.FreezerRuntime.recorderFor("lively.resources/index.js");sj.createFileSpec=X;sj.loadViaScript=da;sj.ensureFetch=pa;sj.default=gh;sj.Resource=gh;sj.unregisterExtension=J;sj.registerExtension=D;sj.parseQuery=je;sj.extensions=EB;sj.createFiles=B;sj.resource=w;sj.httpResourceExtension=cN;sj.fileResourceExtension=dN;sj.localResourceExtension=eN;sj.registerExtension(sj.localResourceExtension);sj.registerExtension(sj.httpResourceExtension);
sj.registerExtension(sj.fileResourceExtension);sj.createFileSpec=X;sj.createFileSpec=X;sj.loadViaScript=da;sj.loadViaScript=da;sj.ensureFetch=pa;sj.ensureFetch=pa;sj.registerExtension=D;sj.registerExtension=D;sj.unregisterExtension=J;sj.unregisterExtension=J;sj.parseQuery=je;sj.parseQuery=je;sj.extensions=EB;sj.extensions=EB;sj.createFiles=B;sj.createFiles=B;sj.resource=w;sj.resource=w;var Toa=Object.freeze({__proto__:null,Resource:gh,createFileSpec:X,loadViaScript:da,ensureFetch:pa,registerExtension:D,
unregisterExtension:J,parseQuery:je,extensions:EB,createFiles:B,resource:w}),nj=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");nj.pathForBrowserHistory=ua;nj.addClassMappings=Oa;nj.morph=ab;nj.newMorphId=Ab;nj.lazyInspect=function(e){var k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),2);k=b.yieldResult;n=k.inspect;nj.inspect=n;return b.return(n(e))})};nj.locateClass=Kp;nj.string=Li;nj.parseQuery=
je;nj.stringifyQuery=Ku;nj.touchInput=nj.touchInput||void 0;try{document.createEvent("TouchEvent"),nj.touchInput=!0}catch(e){nj.touchInput=!1}var Qq=Ba("ay",nj.touchInput);nj.touchInputDevice=Qq;nj.touchInputDevice=Qq;nj.touchInputDevice=Qq;nj.nameToClassMapping=nj.nameToClassMapping||{};nj.pathForBrowserHistory=ua;nj.pathForBrowserHistory=ua;nj.addClassMappings=Oa;nj.addClassMappings=Oa;nj.morph=ab;nj.morph=ab;nj.newMorphId=Ab;nj.newMorphId=Ab;var FB=Ba("a6",nj.lazyInspect);nj.inspect=FB;nj.inspect=
FB;nj.inspect=FB;var fs=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");fs.obj=Ng;fs.morph=ab;var op=Ba("am",function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=k.hasOwnProperty("Icon")&&"function"===typeof k.Icon?k.Icon:k.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,void 0,[{key:"className",get:function(){return"Icon"}},{key:"makeLabel",value:function(b,
d){var m=d=void 0===d?{prefix:"",suffix:""}:d,a=m.prefix;m=m.suffix;var g=[];a&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));g.push.apply(g,$jscomp.arrayFromIterable(this.textAttribute(b,fs.obj.dissoc(d,["fontSize"]))));m&&g.push.apply(g,$jscomp.arrayFromIterable("string"===typeof m?[m||"",{}]:m));return fs.morph(Object.assign({type:"label",value:g},fs.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,d){d=void 0===d?{}:d;var m=d.textStyleClasses&&
d.textStyleClasses.includes("far");return[fs.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:m?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(b,d){b.textAndAttributes=this.textAttribute(d)}}],k,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:661,end:1789})}(void 0));fs.Icon=op;fs.Icon=op;fs.Icon=op;var fN=Ba("bi",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},
"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},
"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},
"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});fs.Icons=fN;fs.Icons=fN;fs.Icons=fN;var Ue=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Ue.vdom=AH;Ue.promise=xh;Ue.arr=ng;Ue.tree=hu;Ue.obj=Ng;Ue.string=Li;Ue.addOrChangeCSSDeclaration=zj;Ue.addOrChangeLinkedCSS=df;Ue.defaultStyle=ky;Ue.renderGradient=eD;Ue.defaultAttributes=ly;Ue.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Ue.pathAttributes=dD;Ue.svgAttributes=cD;Ue.renderMorph=zw;Ue.Transform=il;Ue.pt=th;Ue.getSvgVertices=iy;Ue.config=am;var gN=Ue.vdom;Ue.h=gN.h;Ue.diff=gN.diff;Ue.patch=gN.patch;Ue.createNode=gN.create;Ue.svgNs="http://www.w3.org/2000/svg";Ue.InitStroke=function(e,k,n){this.path=e;this.renderer=k;this.reverse=n};Ue.InitStroke.prototype.hook=function(e,k,n){k=this.path.drawnProportion||0;0!=k&&(e.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),e.setAttribute("stroke-dasharray",e.getTotalLength()),
e.setAttribute("stroke-dashoffset",e.getTotalLength()*(this.reverse?1-k:-1+(1-k))))};var hN=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=k.hasOwnProperty("Renderer")&&"function"===typeof k.Renderer?k.Renderer:k.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+
b);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);m||(m={window:System.global,document:d.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=d;this.domNode=null;this.domEnvironment=m;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=m.window.requestAnimationFrame.bind(m.window)}},{key:"clear",value:function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d=
b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:d&&(m=d.parentNode,m.removeChild(d),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(g){return m.removeChild(g)})),b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return Ue.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(d){return Promise.all([Ue.addOrChangeCSSDeclaration("lively-morphic-css",
Ue.defaultCSS,d),Ue.addOrChangeLinkedCSS("lively-ibm-plex",Ue.config.css.ibmPlex),Ue.addOrChangeLinkedCSS("lively-font-awesome",Ue.config.css.fontAwesome,d,!1),Ue.addOrChangeLinkedCSS("lively-font-inconsolata",Ue.config.css.inconsolata,d,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",
value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);b.renderWorldLoopLater=null;return d.yield(Ue.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var d=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||
this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-1);try{d.renderStep()}catch(m){console.error("Error rendering morphs:",m)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var d="#"+Ue.string.regExpEscape(b.id),m=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==
b.id&&(m=this.domNode);if(m)return m;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(m=b.next();!m.done;m=b.next())if(m=m.value.querySelector(d))return m;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var d=this.renderMap.get(b);if(d)return d}b.aboutToRender(this);d=b.render(this);this.renderMap.set(b,d);return d}},{key:"renderAsFixed",
value:function(b){b=this.render(b);b.properties.style.position="fixed";return b}},{key:"renderFixedMorphs",value:function(b,d){d=this.domNode;var m=this.fixedMorphNodeMap;if((b.length||m.size)&&d&&d.parentNode){d=d.parentNode;for(var a=$jscomp.makeIterator(m),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;b.includes(g)||(l.parentNode.removeChild(l),m.delete(g))}a=b.map(function(y){return m.get(y)});var r=a.map(function(y){return y&&y.id});g=[].concat($jscomp.arrayFromIterable(d.children)).map(function(y){return y.id}).filter(function(y){return r.includes(y)});
Ue.arr.equals(r,g)||a.map(function(y){return y&&y.parentNode&&y.parentNode.removeChild(y)});b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next()){a=a.value;g=this.renderMap.get(a)||this.renderAsFixed(a);l=this.renderAsFixed(a);l=Ue.diff(g,l);var v=m.get(a);v||(v=Ue.createNode(g,this.domEnvironment),m.set(a,v));v.parentNode||d.appendChild(v);Ue.patch(v,l)}}}},{key:"renderMorph",value:function(b){var d=this.renderSubmorphs(b);return Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Ue.defaultStyle(b)}),
d)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,d){var m=b.borderWidthLeft,a=b.borderWidthTop,g=b.origin,l=g.x;g=g.y;for(var r=d.length-1,v=Array(r+1);0<=r;r--)d[r].__stackIdx__=r,v[r]=this.render(d[r]);d={};return Ue.h("div",{style:Object.assign({position:"absolute",left:l-(b.isPath?0:m)+"px",top:g-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==
b.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+b.id+")",d):{}):{})},v)}},{key:"renderWorld",value:function(b){for(var d=b.submorphs,m=[],a=[],g=0;g<d.length;g++){var l=d[g];l.hasFixedPosition?a.push(l):m.push(l)}d=this.renderSelectedSubmorphs(b,m);b=Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Ue.defaultStyle(b)}),d);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var d=b.imageUrl;if(d.startsWith("data:")){var m=
d.indexOf(","),a=d.substring(5,m),g=$jscomp.makeIterator(a.split(";"));a=g.next().value;g=g.next().value;m=d.substring(m+1);"base64"!==g&&(d=Ue.string.createDataURI(m,a))}return Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Ue.defaultStyle(b)}),[Ue.h("img",{src:d,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){var d=function(){};d.prototype.hook=
function(m,a,g){b.afterRender(m,b._canvas!==m)};return Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Ue.defaultStyle(b)}),[Ue.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new d}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Ue.defaultStyle(b)}),[Ue.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",
width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var d=b.startMarker,m=b.endMarker,a=b.showControlPoints,g=Ue.getSvgVertices(b.vertices),l=Ue.h("path",Object.assign({namespace:Ue.svgNs,id:"svg"+b.id},Ue.pathAttributes(b))),r=Ue.h("mask",{namespace:Ue.svgNs,id:"mask"+b.id},[Ue.h("rect",{namespace:Ue.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Ue.h("path",{namespace:Ue.svgNs,initStroke:new Ue.InitStroke(b,
this,!0),attributes:{d:g,stroke:"black",fill:"none"}}),Ue.h("path",{namespace:Ue.svgNs,initStroke:new Ue.InitStroke(b,this,!1),attributes:{d:g,stroke:"white",fill:"none"}})]);g=[Ue.h("clipPath",{namespace:Ue.svgNs,id:"clipPath"+b.id},Ue.h("path",{namespace:Ue.svgNs,attributes:{d:g,fill:"white"}})),r];d&&(d.id||(d.id="start-marker"),l.properties.attributes["marker-start"]="url(#"+b.id+"-"+d.id+")",g=[],g.push(this._renderPath_Marker(b,d)));m&&(m.id||(m.id="end-marker"),l.properties.attributes["marker-end"]=
"url(#"+b.id+"-"+m.id+")",g||(g=[]),g.push(this._renderPath_Marker(b,m)));var v;a&&(v=Ue.h("g",{namespace:Ue.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,l,g,v)}},{key:"_renderPath_ControlPoints",value:function(b,d){function m(S,R,aa,ra,Ea,K){var Z=ra?12:Math.min(8,Math.max(3,l));aa="path-point path-point-"+aa;ra=ra?"orange":r;"string"===typeof Ea&&(aa+="-"+Ea);K&&(Z=Math.max(3,Math.ceil(Z/2)));return K?Ue.h("circle",{namespace:Ue.svgNs,style:{fill:"white","stroke-width":2,
stroke:ra},attributes:{class:aa,cx:S,cy:R,r:Z}}):Ue.h("circle",{namespace:Ue.svgNs,style:{fill:ra},attributes:{class:aa,cx:S,cy:R,r:Z}})}var a=b.vertices;d=b.borderWidth;var g=b.showControlPoints;b=b._controlPointDrag;var l=0==d?6:d+2,r="red";d=[];if("object"===typeof g){var v=g.radius;(g=g.fill)&&(r=String(g));"number"===typeof v&&(l=v)}if(a.length){g=0;var y=a[0];v=y.x;var A=y.y;y=y.controlPoints.next;var E=b&&b.maybeMerge&&b.maybeMerge.includes(g);d.push(m(v,A,g,E));for(g=1;g<a.length-1;g++){var F=
a[g];E=F.isSmooth;var G=F.x,I=F.y,M=F.controlPoints;F=M.previous;M=M.next;var L=b&&b.maybeMerge&&b.maybeMerge.includes(g);E?d.push(m(G,I,g,L),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(G+F.x,I+F.y,g,!1,"control-1",!0)):d.push(m(G,I,g,L));v=G;A=I;y=M}I=a[a.length-1];a=I.isSmooth;E=I.x;G=I.y;I=I.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(g);a?d.push(m(E,G,g,b),m(v+y.x,A+y.y,g-1,!1,"control-2",!0),m(E+I.x,G+I.y,g,!1,"control-1",!0)):d.push(m(E,G,g,b))}return d}},{key:"_renderPath_Marker",
value:function(b,d){function m(a){var g=a.tagName,l=a.id,r=a.children,v=a.style;r=r?r.map(m):void 0;l&&(l=b.id+"-"+l);return Ue.h(g,{namespace:Ue.svgNs,id:l,style:v,attributes:Ue.obj.dissoc(a,["tagName","id","children","style"])},r)}return m(d)}},{key:"renderSvgMorph",value:function(b,d,m,a){a=void 0===a?[]:a;var g=Ue.svgAttributes(b),l=b.innerBounds(),r=l.width;l=l.height;var v,y=[];b.fill&&b.fill.isGradient&&(v||(v=[]),v.push(Ue.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&
(v||(v=[]),v.push(Ue.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));m&&m.length&&(v||(v=[]),v.push.apply(v,$jscomp.arrayFromIterable(m)));y.push(d);v&&y.push(Ue.h("defs",{namespace:Ue.svgNs},v));d=Ue.obj.select(Ue.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Ue.h("div",Object.assign({},Ue.defaultAttributes(b,this),{style:Object.assign({},d,{width:r+"px",height:l+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),
[Ue.h("svg",Object.assign({namespace:Ue.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},g),y),this.renderSubmorphs(b),Ue.h("svg",Object.assign({namespace:Ue.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},g),a)])}},{key:"renderPreview",value:function(b,d){var m=void 0===d.center?!0:d.center,a=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,g=void 0===d.asNode?!1:d.asNode,l=b.origin,r=b.rotation,
v=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var y=Math.max(.1,1/b.scale);y=(new Ue.Transform(b.position.negated(),0,Ue.pt(y,y))).transformRectToRect(b.bounds());var A=Math.max(.1,Math.min(v/y.width,d/y.height));l=new Ue.Transform(y.topLeft().negated().scaleBy(A).subPt(l),r,Ue.pt(A,A));r=(r=this.getNodeForMorph(b))?r.cloneNode(!0):Ue.renderMorph(b);m&&(b=l.transformRectToRect(b.extent.extentAsRectangle()),l=l.preConcatenate(new Ue.Transform(Ue.pt(b.width<v?(v-b.width)/2:0,b.height<
d?(d-b.height)/2:0))));r.style.transform=l.toCSSTransformString();r.style.pointerEvents="";Ue.tree.prewalk(r,function(E){if("string"===typeof E.className){var F=E.className.split(" ").map(function(G){return G.trim()}).filter(Boolean);F.includes("Morph")&&(E.className=Ue.arr.withoutAll(F,["morph","Morph"]).join(" "),a.find(function(G){return G.id===E.id})&&E.remove(),E.id="")}},function(E){return Array.from(E.childNodes)});return g?r:r.outerHTML}}],[{key:"className",get:function(){return"Renderer"}},
{key:"default",value:function(){return this._default||new this}}],k,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1125,end:20109})}(void 0);Ue.Renderer=hN;Ue.Renderer=hN;Ue.Renderer=hN;var qE=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),Y9=
function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=k.hasOwnProperty("FontDetector")&&"function"===typeof k.FontDetector?k.FontDetector:k.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights=
"normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,m){return[d,String(100*(m+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var b=this.defaultWidth,d=this.defaultHeight,m=this.possibleFontWeights,a=this.baseFonts,g=this.document.getElementsByTagName("body")[0],l=this.span||
this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var r=this.document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.overflow="hidden";r.style["pointer-events"]="none";r.style["-webkit-user-select"]="none";r.appendChild(l);g.appendChild(r)}for(var v in m)for(var y in a)l.style.fontFamily=a[y],l.style.fontWeight=m[v],b[a[y]+"@"+m[v]]=l.offsetWidth,d[a[y]+"@"+m[v]]=l.offsetHeight;this.span=l;this.prepared=
!0}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var m=this.defaultWidth,a=this.defaultHeight,g=this.baseFonts,l=this.span,r=this.document.body;l.parentNode||r.appendChild(l);for(var v in g)if(l.style.fontWeight=d,l.style.fontFamily=b+","+g[v],l.offsetWidth!=m[g[v]+"@"+d]||l.offsetHeight!=a[g[v]+"@"+d])return!0;return!1}}],[{key:"className",get:function(){return"FontDetector"}},
{key:"fonts",get:function(){return qE.fonts}}],k,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3672})}(void 0),Uoa=Y9=qE.FontDetector,mV=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},
{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},
{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",
type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",
type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",
type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",
type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},
{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",
type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},
{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},
{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",
type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",
type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",
type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},
{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",
type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},
{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},
{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},
{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",
type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},
{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},
{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",
type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",
type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},
{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",
type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",
type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",
type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},
{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",
type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",
type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},
{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",
type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",
type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},
{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},
{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},
{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];qE.fonts=mV;qE.fonts=mV;qE.fonts=mV;qE.default=Y9;var ej=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");ej.textlayerNodeForFontMeasure=function(e){var k=e.viewState,n=k.text_layer_node;k=k.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(e.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));k&&!k.className.includes("newtext-text-layer")&&
(e.viewState.fontmetric_text_layer_node=k=null);n&&!k&&n.parentNode&&(k=e.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return k};ej.isExtendingChar=function(e){return 768<=e.charCodeAt(0)&&ej.extendingChars.test(e)};ej.skipExtendingChars=function(e,k,n){for(;(0>n?0<k:k<e.length)&&ej.isExtendingChar(e.charAt(k));)k+=n;return k};ej.charBoundsOfBigMonospacedLine=function(e,k,n,b,d,m,a,g){d=void 0===d?0:d;m=void 0===m?0:m;n=n.text.length;if(500>
n||k.isProportional(ej.getComputedFontFamily(b)))return null;var l=Infinity,r=a.defaultTextStyle;a.lineWrapping&&(l=b.getBoundingClientRect().width);k=k._domMeasure.defaultCharExtent(e,{defaultTextStyle:r},g);e=k.width;k=k.height;b=Array(n);for(a=0;a<n;a++)d+e>l&&(d=0,m+=k),b[a]={x:d,y:m,width:e,height:k},d+=e;return b};ej.charBoundsOfLine=function(e,k,n,b){n=void 0===n?0:n;b=void 0===b?0:b;e=k.ELEMENT_NODE;var d=k.TEXT_NODE,m=k.ownerDocument,a=[],g=0;if(k)if(k.className.includes("line")){n-=k.offsetLeft;
b-=k.offsetTop;var l=k.childNodes[0]}else l=k.getElementsByClassName("line")[0].childNodes[0],n=n-k.offsetLeft+ej.getComputedMarginLeft(k),b-=k.offsetTop;else l=null;if(!l){var r=l=m.createElement("br");k.appendChild(r)}for(;l&&!(Infinity<g);){var v="BR"!==l.tagName&&l.nodeType===e&&l.childNodes[0]||l;if(v.nodeType===d)for(var y=v.length,A=0;A<y;A++){var E=ej.measureCharInner(m,v,A,"right");var F=E.left;var G=E.top;k=E.width;E=E.height;F+=n;G+=b;a[g++]={x:F,y:G,width:k,height:E}}else if(l.nodeType===
e)v=l.getBoundingClientRect(),F=v.left,G=v.top,k=v.width,E=v.height,F+=n,G+=b,a[g++]={x:F,y:G,width:k,height:E};else throw Error("Cannot deal with node "+l);l=l.nextSibling}r&&r.parentNode.removeChild(r);return a};ej.measureCharInner=function(e,k,n,b){b=void 0===b?"left":b;var d=n;n+=1;if(3==k.nodeType)for(var m=0;4>m;m++){var a=ej.getUsefulRect(ej.range(e,k,d,n).getClientRects(),b);if(a.left||a.right||0==d)break;n=d;--d}return a};ej.range=function(e,k,n,b,d){e=e.createRange();e.setEnd(d||k,b);e.setStart(k,
n);return e};ej.getUsefulRect=function(e,k){var n={left:0,right:0,top:0,bottom:0};if("left"==k)for(k=0;k<e.length&&(n=e[k]).left==n.right;k++);else for(k=e.length-1;0<=k&&(n=e[k]).left==n.right;k--);return n};ej.string=Li;ej.obj=Ng;ej.FontDetector=Uoa;ej.cumulativeOffset=my;ej.config=am;ej.debug=!!ej.config.onloadURLQuery["debug-font-metric"];ej.checkTimeout=1E3;var Z9=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("FontMetric")&&
"function"===typeof k.FontMetric?k.FontMetric:k.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var d=this.element.parentNode;var m=this.element.ownerDocument}this.uninstall();
this.charMap={};this.cachedBoundsInfo={};m&&d&&this.install(m,d,b)}},{key:"install",value:function(b,d,m){this.element=b.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new ej.DOMTextMeasure).install(b,d,m)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",
value:function(b,d){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d?"hidden":"visible"}},{key:"measure",value:function(b,d){var m=b.fontFamily,a=b.fontSize,g=b.fontWeight,l=b.fontStyle,r=b.textDecoration,v=b.textStyleClasses;b=b.transform;var y=this.element;b&&(b=b.inverse());y.textContent=d;Object.assign(y.style,{"-webkit-text-size-adjust":"none",fontFamily:m,fontWeight:g,fontStyle:l,textDecoration:r,transform:b,
fontSize:a+"px"});y.className=v?v.join(" "):"";try{var A=y.getBoundingClientRect();var E=A.width;var F=A.height}catch(G){return{width:0,height:0}}return{height:F,width:E}}},{key:"charBoundsFor",value:function(b,d){var m=d.length,a=Array(m),g=this.cachedBoundsInfo,l=g.bounds,r=g.str;g=g.style;if(this.isProportional(b.fontFamily)){g=l&&ej.obj.equals(g,b);for(var v=!b.fixedCharacterSpacing,y=0,A=0;y<m;y++){var E=d[y];if(v)if(g=g&&E===r[y]){var F=l[y];E=F.width;F=F.height}else E=d.substr(0,y+1),F=this.measure(b,
E),E=F.width,F=F.height,E-=A;else F=this.sizeFor(b,E),E=F.width,F=F.height;a[y]={x:A,y:0,width:Math.ceil(E),height:Math.ceil(F)};A+=E}v&&(this.cachedBoundsInfo={bounds:a,str:d,style:b})}else for(d=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-d.width,d=d.height,r=0;r<m;r++)l=b*r,a[r]={x:l,y:0,width:b,height:d};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var d={fontFamily:b,fontSize:12},m=this.sizeFor(d,
"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[b]=m!==d}},{key:"sizeFor",value:function(b,d,m){var a=b.fontFamily,g=b.fontSize,l=b.fontWeight,r=b.fontStyle,v=b.textDecoration,y=b.textStyleClasses;b={fontFamily:a,fontSize:g,fontWeight:l,fontStyle:r,textDecoration:v,textStyleClasses:y};if((void 0===m||!m)&&1<d.length)return this.measure(b,d);m=y?y.join(" "):"";a=[a,g,l,r,v,m].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][d]||(this.charMap[a][d]=this.measure(b,
d));return this.charMap[a][d]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,d){d=void 0===d?"normal":d;var m=this.fontDetector||(this.fontDetector=new ej.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+d]){var a=this.supportedFontCache[b+"-"+d],g=a.ts;a=a.value;if(Date.now()-g<ej.checkTimeout)return a}m=m.isFontSupported(b,d);this.supportedFontCache[b+"-"+d]={ts:Date.now(),value:m};return m}},{key:"defaultCharExtent",
value:function(b,d,m){return this._domMeasure.defaultCharExtent(b,d,m)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,d,m,a,g,l,r){return this._domMeasure.computeCharBBoxes(b,d,0,0,g,l,r,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,d,m,a,g,l,r){return this._domMeasure.computeBBoxesOfLines(b,d,0,0,g,l,r)}}],[{key:"className",get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},
{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var d=new ej.FontMetric;d.install(b,b.body);return d}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:312,end:7392})}(void 0),Voa=Z9=ej.FontMetric;ej.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("DOMTextMeasure")&&"function"===typeof k.DOMTextMeasure?k.DOMTextMeasure:k.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&b&&this.install(d,b);return this}},
{key:"install",value:function(b,d,m){this.maxLineBBoxCacheCount=(this.debug=m=void 0===m?!1:m)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=m?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(m?" debug":"");this.setMeasureNodeStyles(b.style,!0);d.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,d){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var d=b.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,d,m){var a=this,g=this.generateStyleKey(d),l=this.defaultCharWidthHeightCache[g];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var r=this.doc;return this.withTextLayerNodeDo(b,m,d,g,function(v){var y=r.createElement("span");y.className="line";y.style.whiteSpace="pre";v.appendChild(y);y.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var A=y.getBoundingClientRect().width,E=r.createElement("span");E.className="line";E.style.whiteSpace="pre";v.appendChild(E);E.textContent="H\ne\nll\no";var F=E.getBoundingClientRect().height;v.removeChild(y);v.removeChild(E);return a.defaultCharWidthHeightCache[g]={width:A/92,height:Math.ceil(F/4)}})}},{key:"computeBBoxesOfLines",value:function(b,d,m,a,g,l,r){var v=this;m=void 0===m?0:m;a=void 0===a?0:a;for(var y=this.generateStyleKey(g),A=Array(d.length),E=!0,F=0;F<d.length;F++){var G=!d[F].textAttributes.length&&
this.lineBBoxCache[y+"_"+d[F].text];G&&G.height&&G.width?A[F]=G:E=!1}return E?A:this.withTextLayerNodeDo(b,l,g,y,function(I,M,L){for(var S=Array(d.length),R=Array(d.length),aa=0;aa<d.length;aa++)if(!R[aa]){var ra=r(d[aa]);ra.style.display="inline-block";I.appendChild(ra);S[aa]=ra}for(aa=0;aa<S.length;aa++)if(!R[aa]){ra=S[aa];var Ea=ra.getBoundingClientRect();v.lineBBoxCache[y+"_"+d[aa].text]=R[aa]={x:Ea.left-ra.offsetLeft+m-M,y:Ea.top-ra.offsetTop+a-L,width:Ea.width,height:Ea.height}}for(M=0;M<S.length;M++)I.removeChild(S[M]);
return R})}},{key:"computeCharBBoxes",value:function(b,d,m,a,g,l,r,v){var y=this;m=void 0===m?0:m;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,l,g,this.generateStyleKey(g),function(A,E,F){var G=r(d);A.appendChild(G);A=1E4<d.stringSize&&ej.charBoundsOfBigMonospacedLine(b,v,d,G,m,a,g,l)||ej.charBoundsOfLine(d,G,m-E,a-F);y.debug||G.parentNode.removeChild(G);return A})}},{key:"withTextLayerNodeDo",value:function(b,d,m,a,g){var l=this.doc,r=this.textlayerNodeCache,v=this.element,y=ej.textlayerNodeForFontMeasure(b);
y||(y=r[a]);if(!y){this.textlayerNodeCacheCount++;y=r[a]=d(m,[]);y.id=a;d=m.width;var A=m.clipMode;m.width||m.clipMode&&"visible"!==m.clipMode?(m=l.createElement("div"),m.style.position="absolute",A&&(m.style.overflow=A),d&&(m.style.width=d+"px"),m.id=a,m.appendChild(y),v.appendChild(m)):v.appendChild(y)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,y.style.transform=a.toString());a=y.getBoundingClientRect();
b=a.left;a=a.top;try{return g(y,b,a)}finally{if(y.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){g=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var E;g--&&(E=v.childNodes[0]);)r[E.id]=null,v.removeChild(E);this.textlayerNodeCacheCount-=g}}}}],[{key:"className",get:function(){return"DOMTextMeasure"}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11046,end:19408})})(void 0);ej.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;ej.getComputedFontFamily="function"===typeof ej.GLOBAL.getComputedStyle?function(e){return ej.GLOBAL.getComputedStyle(e).fontFamily}:function(){return""};ej.getComputedMarginLeft="function"===typeof ej.GLOBAL.getComputedStyle?function(e){return parseInt(ej.GLOBAL.getComputedStyle(e).marginLeft)||0}:function(){return 0};
ej.default=Z9;var Dj=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Dj.signalBindings=function(e,k,n){if(e=e.attributeConnections){e=e.slice();for(var b=0;b<e.length;b++)e[b].sourceAttrName===k&&e[b].update(n)}};Dj.informMorph=function(e,k,n){try{n.onChange(k);Dj.signalBindings(n,"change",k);for(var b=n.owner;b;)b.onSubmorphChange(k,n),b=b.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};Dj.arr=ng;Dj.string=Li;Dj.obj=Ng;Dj.connect=yl;Dj.signal=xf;Dj.disconnect=$o;(function(e){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("Change")&&"function"===typeof k.Change?k.Change:k.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");}},{key:"reverseApply",
value:function(){throw Error("Not yet implemented");}}],[{key:"className",get:function(){return"Change"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:766,end:1016})})(void 0);var nV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("GroupChange")&&
"function"===typeof k.GroupChange?k.GroupChange:k.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);b.group=
this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:"className",get:function(){return"GroupChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1025,end:1448})}(Dj.Change);Dj.GroupChange=nV;Dj.GroupChange=nV;Dj.GroupChange=nV;var oV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ValueChange")&&"function"===typeof k.ValueChange?k.ValueChange:k.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:"type",get:function(){return"setter"}},{key:Symbol.for("lively-instance-initialize"),
value:function(b,d,m,a){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=d;this.value=m;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:"className",get:function(){return"ValueChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1457,end:1866})}(Dj.Change);Dj.ValueChange=oV;Dj.ValueChange=oV;Dj.ValueChange=oV;var pV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("MethodCallChange")&&"function"===typeof k.MethodCallChange?k.MethodCallChange:k.MethodCallChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(n,e,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m,a,g){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=d;this.args=m;this.undo=a;this.meta=g}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,
d=b.target;d[b.selector].apply(d,b.args)}}}],[{key:"className",get:function(){return"MethodCallChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1875,end:2448})}(Dj.GroupChange);Dj.MethodCallChange=pV;Dj.MethodCallChange=pV;Dj.MethodCallChange=pV;var iN=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=k.hasOwnProperty("ChangeManager")&&"function"===typeof k.ChangeManager?k.ChangeManager:k.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=
[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(d){return d.target===b})}},{key:"apply",value:function(b,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(b,d,m){this.defaultMeta=b;this.metaStack.push(b);b=m(d);this.metaStack.pop();this.defaultMeta=Dj.arr.last(this.metaStack)||{};return b}},{key:"addValueChange",value:function(b,d,m,a){d=new Dj.ValueChange(b,d,m,Object.assign({},this.defaultMeta,{},a));return this._record(b,
d)}},{key:"addMethodCallChangeDoing",value:function(b,d,m){var a=b.target,g=b.selector,l=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+g)});l=new Dj.MethodCallChange(a,g,l,b,this.defaultMeta);d.groupChangesWhile(l,m);return l}},{key:"_record",value:function(b,d){Dj.signal(this,"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=b._morphicState[d.prop],b._morphicState[d.prop]=d.value);b.makeDirty(d);var m=Dj.arr.last(this.changeGroupStack);m&&m.consumesChanges()?
m.addChange(d):(this.changes.push(d),b._rev=++this.revision,this.informChangeListeners(d));Dj.informMorph(this,d,b);return d}},{key:"groupChangesWhile",value:function(b,d,m,a){a=void 0===a?!0:a;d||(d=new Dj.GroupChange(b));this.changeGroupStack.push(d);try{return m(),Dj.arr.remove(this.changeGroupStack,d),a?this._record(b,d):d}catch(g){throw Dj.arr.remove(this.changeGroupStack,d),g;}}},{key:"dontRecordChangesWhile",value:function(b,d){return this.groupChangesWhile(b,void 0,d,!1)}},{key:"recordChangesWhile",
value:function(b,d){var m=this.changes.length;b();b=this.changes.slice(m,this.changes.length);return d?b.filter(d):b}},{key:"addChangeListener",value:function(b){Dj.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){Dj.arr.remove(this.changeRecordedListeners,b)}},{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(d){return d(b)})}},{key:"recordChangesStart",value:function(b,d){d=Dj.obj.newKeyIn(this.changeRecorders,
(void 0===d?"":d)+"__change_recorder_"+Date.now());var m=b?function(g){return b(g)&&a.changes.push(g)}:function(g){return a.changes.push(g)},a=this.changeRecorders[d]={id:d,filter:b,changes:[],listener:m};this.addChangeListener(m);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];var d=this.changeRecorders[b],m=d.changes;d=d.listener;delete this.changeRecorders[b];this.removeChangeListener(d);return m}},{key:"recordChangesStartForMorph",value:function(b,
d){d=this.recordChangesStart(d,b.id);var m=this.changeRecordersPerMorph.get(b);m||(m=[],this.changeRecordersPerMorph.set(b,m));m.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(b,d){var m=this.changeRecordersPerMorph.get(b);if(!m||!m.length)return console.warn("Cannot endMorphChangeRecorder for morph "+b+": recorder not found"),[];(b=d)?Dj.arr.remove(m,b):b=m.pop();return this.recordChangesStop(b)}}],[{key:"className",get:function(){return"ChangeManager"}}],k,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2458,end:7504})}(void 0);Dj.ChangeManager=iN;Dj.ChangeManager=iN;Dj.ChangeManager=iN;var sn=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");sn.printArg=function(e){return sn.obj.inspect(e,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};sn.obj=Ng;sn.arr=ng;sn.events=Tz;
sn.fun=xn;(function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("Undo")&&"function"===typeof k.Undo?k.Undo:k.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m){d=void 0===d?[]:d;this.name=b;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===m?0:m}},{key:"recorded",
value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(m){var a=m.target;return a.isUsedAsEpiMorph()||!d.targets.some(function(g){return g===a||g.isAncestorOf(a)})?!1:"function"===
typeof b?b(m):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");
this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){sn.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=sn.arr.sortBy(b.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});b.length&&(this.changes=sn.arr.flatmap(b,function(d){return d.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var b=
this.name,d=this.changes,m=this.no,a=this.isRecording();d=d.length?"\n  "+d.map(function(g){var l=g.selector,r=g.args,v=g.prop,y=g.value;g=g.target;return l?g+"."+l+"("+r.map(sn.printArg)+")":g+"."+v+" = "+sn.printArg(y)}).join("\n  "):"no changes";return"Undo("+m+":"+b+" "+(a?"RECORDING ":"")+d+")"}}],[{key:"className",get:function(){return"Undo"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2487})})(void 0);var FH=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("UndoManager")&&"function"===typeof k.UndoManager?k.UndoManager:k.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=
b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=sn.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),
this.undos=sn.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(b,d);return this.undoStop()}},{key:"groupLaterCancel",value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var d=this,m=this.grouping;(m.debounce||(m.debounce=sn.fun.debounce(b||m.debounceTime,function(){m.debounce=
null;m.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(b,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new sn.Undo(d,[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"undo",
value:function(){this.undoStop();var b=this.undos.pop();if(b){sn.arr.remove(this.grouping.current,b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+b+")"}}],[{key:"className",get:function(){return"UndoManager"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2619,end:5662})}(void 0);sn.UndoManager=FH;sn.UndoManager=
FH;sn.UndoManager=FH;var Sn=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");Sn.promise=xh;Sn.bowser=qv;Sn.touchInputDevice=Qq;Sn.placeholderValue="\u0001\u0001";Sn.placeholderRe=/\u0001/g;var $9=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=k.hasOwnProperty("TextInput")&&"function"===typeof k.TextInput?k.TextInput:k.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,d){var m=this,a=this.domState,g=a.isInstalled,l=a.rootNode;this.world=d;if(g){if(l===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=
b;b.tabIndex=1;d=a.textareaNode=b.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
Sn.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";b.insertBefore(d,b.firstChild);Sn.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(r){return m.onRootNodeFocus(r)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(r){return m.onTextAreaFocus(r)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(r){return m.onTextAreaBlur(r)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(r){return m.eventDispatcher.dispatchDOMEvent(r)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(r){return m.inputState.manualCopy?m.inputState.manualCopy.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(r){return m.inputState.manualPaste?m.inputState.manualPaste.onEvent(r):m.eventDispatcher.dispatchDOMEvent(r)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(r){return m.onCompositionStart(r)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(r){return m.onCompositionEnd(r)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(r){return m.onCompositionUpdate(r)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(r){return m.onInput(r)},capturing:!1}];a.eventHandlers.forEach(function(r){return r.node.addEventListener(r.type,r.fn,r.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(m){return m.node.removeEventListener(m.type,m.fn,m.capturing)});var d=b.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=Sn.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(Sn.placeholderRe,""):""}},{key:"focus",value:function(b,d){var m=this.domState.textareaNode;m&&(Sn.touchInputDevice&&b&&b.isText&&!b.readOnly&&m.removeAttribute("disabled"),b&&b.stealFocus||m.ownerDocument.activeElement!==m&&m.focus(),
Sn.bowser.firefox&&Promise.resolve().then(function(){return m.ownerDocument.activeElement!==m&&m.focus()}),b&&b.isText&&b.focusable?(Sn.touchInputDevice&&m.focus(),this.ensureBeingAtCursorOfText(b)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var b=this.domState.textareaNode;Sn.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var m=d.domState.textareaNode,
a=function(g){m.removeEventListener("copy",a);g.preventDefault();b.forEach(function(l){return g.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return m.removeEventListener("copy",a)},300);m.addEventListener("copy",a);m.value="";m.select();m.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var d=this;return this.execCommand("manualCopy",function(){var m=d.domState.textareaNode;m.value=b;m.select();m.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var d=b.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,d){var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(!m.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=m.inputState;if(!a[b]){v.jumpTo(2);break}v.setCatchFinallyBlocks(3);return v.yield(a[b].promise,
5);case 5:v.leaveTryBlock(2);break;case 3:v.enterCatchBlock();case 2:return g=Sn.promise.deferred(),l=!1,a[b]={onEvent:function(y){l||(a[b]=null,l=!0,g.resolve(y))},promise:g.promise},d(),v.setCatchFinallyBlocks(6),v.yield(Sn.promise.waitFor(1E3,function(){return l}),8);case 8:v.leaveTryBlock(7);break;case 6:r=v.enterCatchBlock(),a[b]=null,l=!0,g.reject(r);case 7:return v.return(g.promise)}})}},{key:"onTextAreaBlur",value:function(b){var d=this;setTimeout(function(){var m=d.domState||{},a=m.textareaNode;
m=m.rootNode;!m||document.activeElement!==m||d.world.focusedMorph&&d.world.focusedMorph.stealFocus||Sn.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var d=this.domState||{},m=d.rootNode;if(b.target===d.textareaNode||b.target===m)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var d=
this.readValue();b.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var d=this.inputState.composition,m=this.readValue();d.lastValue!==m&&(d.lastValue=m,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var d=(this.domState||{}).textareaNode;d&&(d.style.left=b.x+"px",d.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var d=b.world();if(d){var m=b.whatsVisible,a=b.cursorPosition,g=a.row;a=a.column;g=Math.max(m.startRow,Math.min(g,m.endRow));m=b.charBoundsFromTextPosition({row:g,column:a}).topLeft();b=d.visibleBounds().insetBy(10).constrainPt(b.worldPoint(m.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:"className",get:function(){return"TextInput"}}],k,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:235,end:12261})}(void 0),Woa=$9=Sn.TextInput;Sn.default=$9;var qV=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");qV.arr=ng;var a$=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=k.hasOwnProperty("KillRing")&&"function"===typeof k.KillRing?k.KillRing:k.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var d=this.buffer;d.push(b);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:"className",get:function(){return"KillRing"}}],k,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:614})}(void 0),Xoa=a$=qV.KillRing;qV.default=a$;var Oi=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Oi.computeHashIdOfEvent=Bb;Oi.isModifier=function(e){if(Oi.isNumber(e))return!1;
e=e.replace(/-$/,"").toLowerCase();return Oi.arr.withoutAll(Object.keys(Oi.KEY_MODS),["","input-"]).includes(e)};Oi.canonicalizeFunctionKey=function(e){e=e.toLowerCase();switch(e){case "space":e="space";break;case "esc":e="escape";break;case "return":e="enter";break;case "arrowleft":e="left";break;case "arrowright":e="right";break;case "arrowup":e="up";break;case "arrowdown":e="down";break;case "esc":e="escape";break;case "return":e="enter"}return Oi.FUNCTION_KEYS.includes(e)?Oi.string.capitalize(e):
""};Oi.decodeKeyIdentifier=function(e,k){var n=/u\+?([\d\w]{4})/gi,b=function(d,m){return String.fromCharCode(parseInt(m,16))};e=e&&e.replace(n,b);if("Command"===e||"Cmd"===e)e="Meta";" "===e&&(e="Space");8===k&&(e="Backspace");return e};Oi.identifyKeyFromCode=function(e){e=e.code;if("string"!==typeof e)return null;if(e.startsWith("Key"))return e.slice(3);if(e.startsWith("Numpad"))return e;if(e.startsWith("Digit")||e.startsWith("Arrow"))return e.slice(5);if(e.match(/^F[0-9]{1-2}$/))return e;switch(e){case "Insert":case "Home":case "PageUp":case "PageDown":return e;
case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";case "Semicolon":return";"}return null};Oi.dedasherize=function(e){for(var k=[];;){var n=e.indexOf("-");if(-1===n)return e&&k.push(e),k;0===n?(k.push(e[0]),e=e.slice(2)):(k.push(e.slice(0,n)),e=e.slice(n+
1))}};Oi.bowser=qv;Oi.arr=ng;Oi.string=Li;Oi.letterRe=/[a-z]/i;Oi.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Oi.KEY_MODS=function(){for(var e={control:1,ctrl:1,alt:2,option:2,shift:4,"super":8,win:8,meta:8,command:8,cmd:8},k=["alt","ctrl","meta","shift"],n=Math.pow(2,k.length);n--;)e[n]=k.filter(function(b){return n&e[b]}).join("-")+"-";e[0]="";e[-1]="input-";return e}();Oi.isNumber=function(){var e=/^[0-9]+$/;return function(k){return e.test(k)}}();Oi.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");
Oi.Keys={computeHashIdOfEvent:Bb,keyComboToEventSpec:function(e,k){k=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},k);var n=Oi.dedasherize(e),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return k.keyCombo=e,k.key=n[1],k;for(var d=n.length-1;0<=d;d--){var m=b[n[d].toLowerCase()];
m&&(n.splice(d,1),k.isModified=!0,k[m]=!0)}if(!n.length)return k.keyCombo=Oi.Keys.eventToKeyCombo(k),k.key=Oi.arr.last(Oi.dedasherize(k.keyCombo)),k.onlyModifiers=!0,k;1<n.length&&console.warn('Strange key "'+e+'" encountered in keyComboToEventSpec, parsing probably failed');e=Oi.arr.last(n);(n=Oi.canonicalizeFunctionKey(e))?(k.isFunctionKey=!0,k.key=n):k.key=k.isModified?Oi.string.capitalize(e):e;k.keyCombo=Oi.Keys.eventToKeyCombo(k);return k},eventToKeyCombo:function(e,k){Object.assign({ignoreModifiersIfNoCombo:!1,
ignoreKeys:[]},k);k=e.key;var n=e.data,b=e.keyIdentifier;if("string"===typeof n)return"input-"+n;if(!k&&b&&(k=Oi.decodeKeyIdentifier(b,e.which||e.keyCode),e.key=k=k[e.shiftKey?"toUpperCase":"toLowerCase"](),Oi.isModifier(k)))return Oi.string.capitalize(k);n=Oi.KEY_MODS[Oi.computeHashIdOfEvent(e)];if("input-"===n)return n+k;e.code&&(k=Oi.identifyKeyFromCode(e)||k);e=!k||Oi.isModifier(k)?n.replace(/-$/,""):n+k;e.match(/\s$/)&&(e=e.replace(/\s$/,"Space"));return e.replace(/(^|-)([a-z])/g,function(d,
m,a){return m+a.toUpperCase()})},canonicalizeKeyCombo:function(e){return Oi.Keys.eventToKeyCombo(Oi.Keys.keyComboToEventSpec(e))},canonicalizeEvent:function(e){return e._isLivelyKeyEventSpec?e:Oi.Keys.keyComboToEventSpec(Oi.Keys.eventToKeyCombo(e))}};var rV=Oi.Keys;Oi.default=rV;var Ji=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");Ji.bowser=qv;Ji.obj=Ng;Ji.pt=th;Ji.Keys=rV;Ji.cumulativeOffset=my;var sV="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");
Ji.pointerEvents=sV;Ji.pointerEvents=sV;Ji.pointerEvents=sV;var tV="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");Ji.mouseEvents=tV;Ji.mouseEvents=tV;Ji.mouseEvents=tV;var uV=["keydown","keyup","keypress"];Ji.keyboardEvents=uV;Ji.keyboardEvents=uV;Ji.keyboardEvents=uV;var jN=Ji.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");Ji.keyLikeEvents=jN;Ji.keyLikeEvents=jN;Ji.keyLikeEvents=jN;var kN=
function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("Event")&&"function"===typeof k.Event?k.Event:k.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m,a,g,l,r){this.type=b;this.domEvt=d;this.dispatcher=m;this.targetMorphs=a;this.hand=g;this.halo=l;this.layoutHalo=r;this.stopped=!1;this._keyCombo=
void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},
{key:"keyInputState",get:function(){return this.state.keyInputState}},{key:"isMouseEvent",value:function(){return Ji.pointerEvents.includes(this.type)||Ji.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&Ji.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();
this.onStopCallbacks.forEach(function(b){return b()})}},{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return Ji.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),
Ji.pt(0,0);b=Ji.cumulativeOffset(b);var d=this.domEvt;b=Ji.pt((d.pageX||0)-b.left,(d.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var d=this.state.clickedOnMorph;return d&&(b===d||b.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?(this.domEvt.buttons||0)&1:!1}},{key:"rightMouseButtonPressed",value:function(){return 3===this.domEvt.which||2===this.domEvt.buttons}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?(this.domEvt.buttons||0)&4:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var d=!1;Ji.bowser.mac||(d=d||b.ctrlKey);if(Ji.bowser.tablet||Ji.bowser.tablet)d=d||!1;return d||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=Ji.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:"className",get:function(){return"Event"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:956,end:4962})}(void 0);Ji.Event=kN;Ji.Event=kN;Ji.Event=kN;var lN=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("KeyEvent")&&"function"===typeof k.KeyEvent?k.KeyEvent:k.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m,a,g,l,r){console.assert(Ji.keyLikeEvents.includes(b),"not a keyboard event: "+b);hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,d,m,a,g,l,r);Object.assign(this,Ji.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:"className",get:function(){return"KeyEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4972,end:5341})}(Ji.Event);Ji.KeyEvent=lN;Ji.KeyEvent=lN;Ji.KeyEvent=lN;var mN=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof k.SimulatedDOMEvent?k.SimulatedDOMEvent:k.SimulatedDOMEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var d=b.position,m=d.x;d=d.y;b=Ji.obj.dissoc(b,["position"]);b.pageX=m;b.pageY=d}!b.hasOwnProperty("pointerId")&&Ji.mouseEvents.concat(Ji.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,
altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:"className",get:function(){return"SimulatedDOMEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:5350,end:6246})}(void 0);Ji.SimulatedDOMEvent=mN;Ji.SimulatedDOMEvent=mN;Ji.SimulatedDOMEvent=mN;var Tf=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");Tf.dragStartEvent=function(e,k,n,b,d,m,a){var g=(new Tf.Event("morphicdragstart",e,k,[n],d,m,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=g.position;b.lastDragPosition=g.position;b.dragDelta=Tf.pt(0,0);b.absDragDelta=Tf.pt(0,0)}).onStop(function(){b.draggedMorph=
null;k.schedule(Tf.dragEndEvent(e,k,n,b,d,m,a))});return g};Tf.dragEvent=function(e,k,n,b,d,m,a){var g=(new Tf.Event("morphicdrag",e,k,[b.draggedMorph],d,m,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||k.world).getInverseTransform().transformDirection(g.position.subPt(b.lastDragPosition));b.absDragDelta=g.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=g.position}).onStop(function(){b.draggedMorph=null;k.schedule(Tf.dragEndEvent(e,k,n,b,d,
m,a))});return g};Tf.dragEndEvent=function(e,k,n,b,d,m,a){var g=b.draggedMorph||n,l=(new Tf.Event("morphicdragend",e,k,[g],d,m,a)).onDispatch(function(){b.dragDelta=(g.owner||k.world).getInverseTransform().transformDirection(l.position.subPt(b.lastDragPosition));b.absDragDelta=l.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=Tf.pt(0,0);b.absDragDelta=Tf.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return l};
Tf.focusEvents=function(e,k){var n=e.eventState;if(n.focusedMorph===k)return[];e=[];n.focusedMorph&&e.push((new Tf.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));e.push((new Tf.Event("focus",null,this,[k],null,null,null)).onDispatch(function(){return n.focusedMorph=k}));return e};Tf.arr=ng;Tf.fun=xn;Tf.Path=Ti;Tf.promise=xh;Tf.pt=th;Tf.config=am;Tf.TextInput=Woa;Tf.KillRing=Xoa;Tf.Event=kN;Tf.KeyEvent=lN;Tf.SimulatedDOMEvent=mN;Tf.keyLikeEvents=
jN;Tf.cumulativeOffset=my;Tf.bowser=qv;Tf.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",
capturing:!1},{type:"drop",capturing:!1}];Tf.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);Tf.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];
Tf.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",
compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};Tf.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");Tf.textOnlyEvents=
["input","compositionstart","compositionupdate","compositionend"];var b$=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=k.hasOwnProperty("EventDispatcher")&&"function"===typeof k.EventDispatcher?k.EventDispatcher:k.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d){this.activations=
0;this.emitter=b;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new Tf.KillRing(Tf.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=Tf.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:null,draggedMorph:null,dragDelta:null,absDragDelta:null,
lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);Tf.focusEvents(this,b).forEach(function(m){return d.dispatchEvent(m)})}},
{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(b.toLowerCase())}},{key:"whenIdle",value:function(){var b=this;return Tf.promise.waitFor(function(){return 0===
b.activations})}},{key:"install",value:function(b){var d=this;if(this.installed)return this;this.installed=!0;var m=this.emitter,a=System.global;Tf.domEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing;g=g.passive;var v=function(y){return d.dispatchDOMEvent(y)};d.handlerFunctions.push({node:m,type:l,fn:v,capturing:r});m.addEventListener(l,v,{capture:r,passive:g})});a.addEventListener&&Tf.globalDomEventsWeListenTo.forEach(function(g){var l=g.type,r=g.capturing,v=g.morphMethod;g=g.passive;
var y=function(A){return d.dispatchDOMEvent(A,d.world,v)};d.handlerFunctions.push({node:a,type:l,fn:y,capturing:r});a.addEventListener(l,y,{capture:r,passive:g})});this.keyInputHelper=(new Tf.TextInput(this)).install(b,this.world);Tf.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();
this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,d){var m=this,a=b.type,g=this.eventState,l=[d].concat(d.ownerChain()),r="touch"===b.pointerType,v=b.pointerId,y="number"===typeof v?this.world.handForPointerId(v,b.isPrimary):this.world.firstHand,A="number"!==typeof v||r?null:this.world.haloForPointerId(v),E="number"!==typeof v||r?null:this.world.layoutHaloForPointerId(v),F=new (Tf.keyLikeEvents.includes(a)?Tf.KeyEvent:Tf.Event)(a,b,this,l,y,A,E),G=[F],I=[];switch(a){case "keydown":g.pressedKeys[F.key]=
!0;break;case "keyup":"Meta"===F.key?g.pressedKeys={}:delete g.pressedKeys[F.key];break;case "click":G=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),d).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),d).events;G=G.concat(a);break;case "pointerdown":F.onDispatch(function(){m.focusMorph(d);g.clickedOnMorph=d;g.clickedOnPosition=F.position;g.downTimeStamp=b.timeStamp;var M=!1,L=0;if(g.prevClick){L=g.prevClick;M=L.clickedOnMorph;var S=L.clickedAtTime;L=L.clickCount;
S=Date.now()-S;M=M===d&&S<Tf.config.repeatClickInterval}g.clickCount=M?L+1:1});break;case "pointerup":F.onAfterDispatch(function(){var M=g.clickedOnMorph,L=g.clickedOnPosition,S=g.clickCount,R=Date.now();g.prevClick={clickedOnMorph:M,clickedOnPosition:L,clickedAtTime:R,clickCount:S};g.clickedOnMorph=null;g.clickCount=0;M=b.timeStamp-g.downTimeStamp;L=g.clickedOnPosition.dist(F.position);S=Tf.config.longClick;R=S.minDur;var aa=S.maxDur;L<S.maxDist&&M>=R&&M<=aa&&(M=new Tf.Event("longclick",b,m,l,y,
A,E),m.schedule(M))});g.draggedMorph&&(G.push(Tf.dragEndEvent(b,this,d,g,y,A,E)),F.targetMorphs=[this.world]);y.carriesMorphs()&&(g.dropHoverTarget?(G.push(new Tf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),d=g.dropHoverTarget,g.dropHoverTarget=null):d=y.findDropTarget(F.position,y.grabbedMorphs),y.isAncestorOf(d)&&(d=this.world),G.push(new Tf.Event("morphicdrop",b,this,[d],y,A,E)),F.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(F.targetMorphs=[this.world],
a=y.findDropTarget(F.position,y.grabbedMorphs)||this.world,g.dropHoverTarget===a?G.push(new Tf.Event("morphicdrophoverupdate",b,this,[a],y,A,E)):(g.dropHoverTarget&&G.push(new Tf.Event("morphicdrophoverout",b,this,[g.dropHoverTarget],y,A,E)),g.dropHoverTarget=a,G.push(new Tf.Event("morphicdrophoverin",b,this,[a],y,A,E)))):g.draggedMorph?(F.targetMorphs=[this.world],G.push(Tf.dragEvent(b,this,d,g,y,A,E))):g.clickedOnMorph&&g.clickedOnPosition&&g.clickedOnMorph.draggable&&!g.draggedMorph&&!y.carriesMorphs()&&
(a=g.clickedOnPosition.dist(F.position),r=g.clickedOnMorph,a>r.dragTriggerDistance&&(r.grabbable?G.push(new Tf.Event("grab",b,this,[r],y,A,E)):r.draggable&&G.push(Tf.dragStartEvent(b,this,r,g,y,A,E)),F.targetMorphs=[this.world]));break;case "pointerover":g.hover.unresolvedPointerOut&&(g.hover.unresolvedPointerOut=!1);a=[d].concat(d.ownerChain()).reverse();G=Tf.arr.withoutAll(g.hover.hoveredOverMorphs,a).map(function(M){return(new Tf.Event("hoverout",b,m,[M],y,A,E)).onDispatch(function(){return Tf.arr.remove(g.hover.hoveredOverMorphs,
M)})});a=Tf.arr.withoutAll(a,g.hover.hoveredOverMorphs).map(function(M){return(new Tf.Event("hoverin",b,m,[M],y,A,E)).onDispatch(function(){return Tf.arr.pushIfNotIncluded(g.hover.hoveredOverMorphs,M)})});G=G.concat(a);break;case "pointerout":G=[];g.hover.unresolvedPointerOut=!0;I.push(function(){if(g.hover.unresolvedPointerOut)return Promise.all(g.hover.hoveredOverMorphs.map(function(M){return m.schedule((new Tf.Event("hoverout",b,m,[M],y,A,E)).onAfterDispatch(function(){return Tf.arr.remove(g.hover.hoveredOverMorphs,
M)}))}))});r&&this.world.removeHandForPointerId(v);break;case "blur":G=[(new Tf.Event(a,b,this,[d],y,A,E)).onDispatch(function(){return g.focusedMorph=null})];break;case "focus":G=Tf.focusEvents(this,d);break;case "scroll":G=[(new Tf.Event(a,b,this,[d],y,A,E)).onDispatch(function(){if(!g.scroll.interactiveScrollInProgress){var M=Tf.promise.deferred(),L=M.promise,S=M.resolve;M="Firefox"==Tf.bowser.name?500:250;"Safari"==Tf.bowser.name&&(M=1E3);g.scroll.interactiveScrollInProgress=L;L.debounce=Tf.fun.debounce(M,
function(){g.scroll.interactiveScrollInProgress=null;S()})}g.scroll.interactiveScrollInProgress.debounce();L=b.target.documentElement||b.target;M=L.scrollLeft;var R=L.scrollTop,aa=d.scroll,ra=aa.x;aa=aa.y;if("hidden"!=L.style.overflow&&ra!==M||aa!==R)d.scroll=Tf.pt(M,R)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?F.targetMorphs=[d]:G=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==
a&&"dragover"!==a||b.preventDefault()}return{events:G,later:I}}},{key:"schedule",value:function(b){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(b)}).then(function(){return d.activations--},function(m){d.activations--;throw m;})}},{key:"dispatchEvent",value:function(b,d){d=d||Tf.typeToMethodMap[b.type];if(!d)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(g){return g()});this.activations++;for(var m,
a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][d](b)}catch(g){m=Error("Error in event handler "+b.targetMorphs[a]+"."+d+": "+(g.stack||g)),m.originalError=g,"undefined"!==typeof this.world?this.world.logError(m):console.error(m)}if(m||b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(g){return g()});if(m)throw m;}},{key:"dispatchDOMEvent",value:function(b,d,m){var a=this,g=this.world,l=this.eventState,r=this.nodeMorphMap,v=b.type;l.timeOfLastActivity=this.timestampBase+
b.timeStamp;if(!d&&Tf.focusTargetingEvents.includes(v))d=l.focusedMorph||g;else if(!d){for(l=b.target;;){d=l.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(l=l.parentNode))return}d=r.get(l);if(!d){var y=l.id;(d=g.withAllSubmorphsDetect(function(A){return A.id===y}))&&r.set(l,d)}}d&&(b=this.processDOMEvent(b,d),r=b.events,b.later.map(function(A){a.activations++;return Tf.promise.delay(0).then(A).then(function(){return a.activations--},function(E){a.activations--;
throw E;})}),r.forEach(function(A){return a.dispatchEvent(A,m)}),g&&g.needsRerender()&&Tf.eventsCausingImmediateRender.has(v)&&g.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var d=[],m=0;m<arguments.length;++m)d[m-0]=arguments[m];m=this.emitter.document||this.emitter.ownerDocument;var a=[];d=$jscomp.makeIterator(d);for(var g=d.next();!g.done;g=d.next()){var l=g=g.value,r=l.target,v=l.position;l=l.type;if(Tf.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+
l+", no keyInputHelper installed!");g=Object.assign({},g,{target:this.keyInputHelper.textareaNode})}r||(r=v?this.world.morphsContainingPoint(v)[0]:this.world);r.isMorph&&(g=Object.assign({},g,{target:m.getElementById(r.id)}));g.position&&(r=Tf.cumulativeOffset(m.getElementById(this.world.id)),g.position=g.position.addXY(r.left,r.top));"scroll"===l&&("scrollLeft"in g||"scrollTop"in g)&&(g.target.scrollLeft=g.scrollLeft||0,g.target.scrollTop=g.scrollTop||0);g=new Tf.SimulatedDOMEvent(g);a.push(g);this.dispatchDOMEvent(g)}return a}},
{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,d){var m=this,a=[],g=this.eventState;g.clickedOnMorph=null;g.dropHoverTarget&&(a.push(new Tf.Event("morphicdrophoverout",d.domEvt,this,[g.dropHoverTarget],b,null,null)),g.dropHoverTarget=null);a.forEach(function(l){return m.dispatchEvent(l)})}}],
[{key:"className",get:function(){return"EventDispatcher"}}],k,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7617,end:30013})}(void 0),Yoa=b$=Tf.EventDispatcher;Tf.default=b$;var nm=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");nm.defaultDOMEnv=vA;nm.Renderer=
hN;nm.FontMetric=Voa;nm.ChangeManager=iN;nm.UndoManager=FH;nm.EventDispatcher=Yoa;nm.subscribe=Ls;nm.unsubscribe=Br;var Yr=Ba("aX",function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),n=k.hasOwnProperty("MorphicEnv")&&"function"===typeof k.MorphicEnv?k.MorphicEnv:k.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var d=
this;b=void 0===b?nm.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=new nm.ChangeManager;this.undoManager=new nm.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(m){d._waitForDOMEnv=null;d.initWithDOMEnv(m);d.initialized=!0}).catch(function(m){return console.error("Error initializing MorphicEnv with dom env: "+
m.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=nm.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});
this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b){var d=this;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return d.setWorld(b)}):
this.setWorldRenderedOn(b,this.domEnv.document.body)}},{key:"setWorldRenderedOn",value:function(b,d,m){var a=this;m=void 0===m?null:m;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,d,m)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new nm.Renderer(b,d,this.domEnv);this.renderer.domNode=m;this.eventDispatcher=(new nm.EventDispatcher(this.domEnv.window,
b)).install(d);b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[nm.subscribe("lively.modules/moduleloaded",function(m){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(m)})})];
d["lively.modules/modulechanged"]=[nm.subscribe("lively.modules/modulechanged",function(m){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(m)})})];d["lively.partsbin/partpublished"]=[nm.subscribe("lively.partsbin/partpublished",function(m){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(m)})})];d["lively.user/userchanged"]=[nm.subscribe("lively.user/userchanged",function(m){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(m)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(d){return b[d].forEach(function(m){return nm.unsubscribe(d,m)})}))}},{key:"getTargetsFor",value:function(b){var d=this.world,m=[];if(!d||!d.submorphs)return m;"function"===typeof d[b]&&m.push(d);d=$jscomp.makeIterator(d.submorphs);for(var a=d.next();!a.done;a=d.next())a=a.value,"function"===typeof a[b]&&m.push(a),a.isWindow&&a.targetMorph&&"function"===
typeof a.targetMorph[b]&&m.push(a.targetMorph);return m}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,d=this.world,m=this.fontMetric;b&&(b.changes.length=0);d&&d.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});m&&m.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,d=
this.world,m=0,a=0;d&&d.withAllSubmorphsDo(function(g){g.undoManager&&(m++,a+=g.undoManager.undos.length+g.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+m+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,d=this.whenRenderedRequesters,m=0,a=$jscomp.makeIterator(d),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;var r=l=l.next().value,v=r.maxAttempts,y=r.resolve;r=r.reject;g._dirty||
g._rendering?++l.currentAttempt>v?(d.delete(g),r(Error("Failed to wait for whenRendered of "+g+" (tried "+v+"x)"))):m++:(d.delete(g),y(g))}this.whenRenderedTickingProcess=m?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,d){var m=this;d=void 0===d?50:d;var a=this.whenRenderedRequesters,g=this.whenRenderedTickingProcess,l=a.get(b);if(!l){var r,v;l=new Promise(function(y,A){r=y;v=A});a.set(b,l={maxAttempts:d,currentAttempt:0,
resolve:r,reject:v,promise:l})}g||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return m.updateWhenRenderedRequests()}));return l.promise}}],[{key:"className",get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);return b[b.length-
1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],k,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:406,end:8262})}(void 0));nm.MorphicEnv=Yr;nm.MorphicEnv=
Yr;nm.MorphicEnv=Yr;var Zoa=Object.freeze({__proto__:null,MorphicEnv:Yr}),cx=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");cx.printArg=function(e){return cx.obj.inspect(e,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};cx.obj=Ng;cx.arr=ng;cx.promise=xh;var c$=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=k.hasOwnProperty("CommandHandler")&&"function"===typeof k.CommandHandler?k.CommandHandler:k.CommandHandler=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},{key:"printCommand",
value:function(b){var d=b.target.string,m=b.args,a=b.count,g=b.evt,l=b.keyCombo;return'"'+b.name+'" '+(g?g+" ":"")+(l?l+" ":"")+(m?cx.printArg(m):"")+("number"===typeof a?" x"+a:"")+" "+d}},{key:"lookupCommand",value:function(b,d){var m;if(!b)return{};"string"===typeof b&&(m=b);"string"===typeof b.command&&(m=b.command);if(b.exec){var a=b;m=a.name}a||(a=d.commands.find(function(g){return g.name===m}));return{name:m,command:a}}},{key:"exec",value:function(b,d,m,a,g){var l=this,r=this.lookupCommand(b,
d)||{},v=r.name,y=r.command;if(!y)return console.warn("Cannot find command "+(v||b)),null;if(v){if(g){var A=g.type;if(g.isKeyEvent)var E=g.keyCombo}this.addToHistory({name:v,target:{string:String(d),id:d.id},args:m,count:a,time:Date.now(),evt:A,keyCombo:E})}var F=d.world();"string"===typeof y.progressIndicator&&(this.progressIndicator=F.execCommand("open loading indicator",y.progressIndicator));if("function"===typeof y.exec)try{var G=y.exec(d,m,y.handlesCount?a:void 0,g)}catch(I){G=I,b="Error in interactive command "+
v+": "+(I.stack||I),F?F.logError(b):console.error(b)}else console.error("command "+v+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();G&&"function"===typeof G.catch?(G.catch(function(I){var M="Error in interactive command "+v+": "+I+"\n"+(I.stack||I);F?F.logError(M):console.error(M);throw I;}),this.progressIndicator&&cx.promise.finally(G,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();G&&"number"===typeof a&&
1<a&&!y.handlesCount&&(G="function"===typeof G.then?G.then(function(){return l.exec(y,d,m,a-1,g,null)}):this.exec(y,d,m,a-1,g,null));return G}}],[{key:"className",get:function(){return"CommandHandler"}}],k,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:3586})}(void 0),$oa=
c$=cx.CommandHandler;cx.default=c$;var ah=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");ah.ensureSpaces=function(e){return e.length?e:" "};ah.invokeKeyHandlers=function(e,k,n){n=void 0===n?!1:n;var b=k=ah.Keys.canonicalizeEvent(k),d=b.key,m=b.data,a,g=!1,l=e.keyhandlers,r=k.keyInputState||{};b=b.keyCombo.startsWith("input-");var v=!1,y=r.count,A=r.keyChain||"",E=!1;if(!l||n&&b)return!1;for(n=l.length;n--;)if((a=l[n].eventCommandLookup(e,k))&&a.command){E=a;a=E.command;var F=
E.args,G=E.passEvent,I=E.count;v=E.keyChain;var M=E.onlyWhenFocused;E=!0;y=I;A=v;v="null"===a;if(M&&(M=e.world())&&M.focusedMorph&&M.focusedMorph!==e)continue;g=v?!1:e.execCommand(a,F,I,k);!g||b&&"insertstring"===a||G||"function"!==typeof k.stop||k.stop();if(g||v)break}g||v||!b||!e.onTextInput||A||(g=e.execCommand("insertstring",{string:m||d,undoGroup:ah.config.text.undoGroupDelay},r.count,k));if(E)if("function"===typeof k.onAfterDispatch)k.onAfterDispatch(function(){r.count=g?void 0:y;r.keyChain=
g?"":A});else r.count=g?void 0:y,r.keyChain=g?"":A;return g&&!v};ah.simulateKeys=function(e,k,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&(b=1===k.length?[k]:k.split(/ /g).map(ah.ensureSpaces),d=$jscomp.makeIterator(b),m=d.next());if(3!=g.nextAddress){if(m.done)return g.jumpTo(0);a=m.value;return g.yield(ah.simulateKey(e,a,n),3)}m=d.next();return g.jumpTo(2)})};ah.simulateKey=function(e,k,n){return ah.invokeKeyHandlers(e,
Object.assign({},ah.Keys.keyComboToEventSpec(k),{keyInputState:n}))};ah.bowserOS=function(){return ah.bowser.mac?"mac":ah.bowser.windows?"windows":ah.bowser.windowsphone?"windowsphone":ah.bowser.linux?"linux":ah.bowser.chromeos?"chromeos":ah.bowser.android?"android":ah.bowser.ios?"ios":ah.bowser.blackberry?"blackberry":ah.bowser.firefoxos?"firefoxos":ah.bowser.webos?"webos":ah.bowser.bada?"bada":ah.bowser.tizen?"tizen":ah.bowser.sailfish?"sailfish":"unknown"};ah.findKeysForPlatform=Ec;ah.Keys=rV;
ah.bowser=qv;ah.config=am;ah.arr=ng;ah.findKeysForPlatform=Ec;ah.findKeysForPlatform=Ec;ah.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var vV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=k.hasOwnProperty("KeyHandler")&&"function"===typeof k.KeyHandler?
k.KeyHandler:k.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?ah.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(b,d){var m=this;d=void 0===d?{keyChain:void 0,count:void 0}:d;b=ah.Keys.canonicalizeKeyCombo(b);
var a=d.keyChain||"";d=d.count;if(!a&&b.startsWith("Ctrl-")){var g=b.match(/^Ctrl-([0-9]+)/);if(g)return{command:"null",count:parseInt(("number"===typeof d?d:"")+g[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}g=[b];if(!r&&b.startsWith("input-")){r=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toUpperCase()});var l=b.replace(/^(input-)(.*)$/,function(v,y,A){return y+A.toLowerCase()});g.push(r,l)}var r=g.map(function(v){return m.keyBindings[v]})[0];a&&(g=g.find(function(v){return m.keyBindings[a+
" "+v]}))&&(a+=" "+g,r=this.keyBindings[a]||r);if(r&&"chainKeys"===r)return a=a||b,b={command:"null",keyChain:a},void 0!==d&&(b.count=d),b;if(r)return b="object"===typeof r?Object.assign({},r):{command:r},void 0!==d&&(b.count=d),b}},{key:"bindKey",value:function(b,d){var m=this;"object"==typeof b&&b&&!Array.isArray(b)&&(b=ah.findKeysForPlatform(b,this.platform));if(b){if("function"==typeof d)return this.addCommand({exec:d,bindKey:b,name:d.name||b});(Array.isArray(b)?b:b.includes("|")?b.split("|"):
[b]).forEach(function(a){var g="";if(-1!=a.indexOf(" ")){var l=a.split(/\s+/);a=l.pop();l.forEach(function(r){r=ah.Keys.canonicalizeKeyCombo(r);g+=(g?" ":"")+r;m.addCommandToBinding(g,"chainKeys")});g+=" "}m.addCommandToBinding(g+ah.Keys.canonicalizeKeyCombo(a),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,d=Object.keys(this.keyBindings),m=d.filter(function(a){return"chainKeys"===b.keyBindings[a]});
m=ah.arr.sortBy(m,function(a){return a.length}).reverse();m.forEach(function(a){d.some(function(g){return a!==g&&g.startsWith(a)})||(delete b.keyBindings[a],ah.arr.remove(d,a),ah.arr.remove(m,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,d){var m=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete m.keyBindings[a]});
d?this.keyBindings[b]=d:delete this.keyBindings[b];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:"className",get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,d,m){return ah.invokeKeyHandlers(b,d,void 0===m?!1:m)}},{key:"simulateKeys",value:function(b,d,m){return ah.simulateKeys(b,d,m)}},{key:"withBindings",value:function(b,d){var m=new this(d);b.forEach(function(a){return m.bindKey(a.keys,a.command)});return m}},{key:"prettyCombo",value:function(b){var d=this._prettyCombos||
(this._prettyCombos={});return this._prettyCombos[b]?d[b]:d[b]=b.replace(ah.regexps.meta,"\u2318").replace(ah.regexps.alt,"\u2325").replace(ah.regexps.ctrl,"\u2303").replace(ah.regexps.tab,"\u21e5").replace(ah.regexps.enter,"\u23ce").replace(ah.regexps.shift,"\u21e7").replace(ah.regexps.backspace,"\u232b").replace(ah.regexps.delete,"\u2326").replace(ah.regexps.left,"\u2192").replace(ah.regexps.right,"\u2190").replace(ah.regexps.up,"\u2191").replace(ah.regexps.down,"\u2193").replace(ah.regexps.keySpacer,
"$1").replace(ah.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,d,m){function a(v){if(r[v.id])return r[v.id];var y=l[v.id]||(l[v.id]=v.keyCommandMap);return r[v.id]=ah.arr.groupBy(Object.keys(y),function(A){return y[A].name})}var g=this;m=void 0===m?!0:m;var l={},r={};return((void 0===d?0:d)?b.commandsIncludingOwners:b.commands.map(function(v){return{command:v,target:b}})).map(function(v){var y=v.target;v=v.command;var A=a(y)[v.name];return{keys:A,target:y,command:v,
prettyKeys:A&&m?A.map(function(E){return g.prettyCombo(E)}):null}})}}],k,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6164,end:13032})}(void 0);vV=ah.KeyHandler;var wV=Ba("a9",vV);ah.default=vV;var ez=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),d$=function(e){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("Script")&&"function"===typeof k.Script?k.Script:k.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,d,m){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:"className",get:function(){return"Script"}}],
k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:19,end:1360})}(void 0),xV=function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("TargetScript")&&"function"===typeof k.TargetScript?k.TargetScript:k.TargetScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b,d,m){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=d;this.args=m||[]}},{key:"execute",value:function(){"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==
b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:"className",get:function(){return"TargetScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1362,end:1906})}(ez.Script),e$=
function(e){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("FunctionScript")&&"function"===typeof k.FunctionScript?k.FunctionScript:k.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(n,e,[{key:Symbol.for("lively-instance-initialize"),value:function(b){hc._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=
b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:"className",get:function(){return"FunctionScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1908,end:2242})}(ez.Script);ez.Script=d$;ez.Script=d$;ez.TargetScript=xV;ez.TargetScript=xV;ez.FunctionScript=e$;ez.FunctionScript=e$;var Rp=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Rp.install=Ic;Rp.remove=uc;Rp.isInstalled=wd;Rp.arr=ng;Rp.fun=xn;Rp.install=Ic;Rp.install=Ic;Rp.remove=uc;Rp.remove=uc;Rp.isInstalled=wd;Rp.isInstalled=wd;var nN=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");nN.classHolder={};var dx=nN.classHolder;
nN.classHolder=dx;nN.classHolder=dx;var Bw=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");Bw.computeRequireMap=Gd;Bw.graph=iu;Bw.arr=ng;Bw.obj=Ng;Bw.loadedModules=LJ;Bw.computeRequireMap=Gd;Bw.computeRequireMap=Gd;var zo=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");zo.scheduleModuleExportsChange=pe;zo.runScheduledExportChanges=Kd;zo.clearPendingModuleExportChanges=function(e,k){delete e.get("@lively-env").pendingExportChanges[k]};zo.updateModuleExports=
function(e,k,n){var b=e.debug;zo.module(e,k).updateRecord(function(d){var m=[],a=[];Object.keys(n).forEach(function(E){var F=n[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",k,E,String(F).slice(0,30).replace(/\n/g,"")+"...");var G=!(E in d.exports);G&&(d.__lively_modules__.evalOnlyExport[E]=!0);d.exports[E]=F;G?m.push(E):a.push(E)});if(m.length){var g=e.get(k);Object.isFrozen(g)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
k),e.set(k,e.newModule(d.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",k),m.forEach(function(E){Object.defineProperty(g,E,{configurable:!1,enumerable:!0,get:function(){return d.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",d.importers.length,k);for(var l=0,r=d.importers.length;l<r;l++){var v=d.importers[l];if(!v.locked){var y;
if(v.dependencies.some(function(E,F){y=F;return E&&E.name===d.name})){if(b){var A=zo.module(e,v.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+A["package"]().name+"/"+A.pathInPackage())}zo.module(e,v.name).evaluationStart();v.setters[y](d.exports);zo.module(e,v.name).evaluationEnd()}}}}})};zo.module=Ao;zo.scheduleModuleExportsChange=pe;zo.scheduleModuleExportsChange=pe;zo.runScheduledExportChanges=Kd;zo.runScheduledExportChanges=Kd;var Lk=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
Lk.moduleSourceChange=ve;Lk.moduleSourceChangeEsm=function(e,k,n,b){var d,m,a,g,l,r,v,y,A,E,F,G,I,M,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:return d=e.debug,m={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"esm"}},S.yield(Lk.instrumentSourceOfEsmModuleLoad(e,m),2);case 2:a=S.yieldResult,g=function(R,aa){return Lk.scheduleModuleExportsChange(e,m.name,R,aa,!0)},l=a.declare(g),d&&console.log("[lively.vm es6] sourceChange of %s with deps",
m.name,a.localDeps),r=[],v=$jscomp.makeIterator(a.localDeps),y=v.next();case 3:if(y.done){S.jumpTo(5);break}A=y.value;return S.yield(e.normalize(A,m.name),6);case 6:return E=S.yieldResult,F=Lk.classHolder.module(e,E),S.yield(F.load(),7);case 7:G=S.yieldResult;r.push({name:A,fullname:E,module:F,exports:G});y=v.next();S.jumpTo(3);break;case 5:if(I=e.loads&&e.loads[m.name])I.deps=r.map(function(R){return R.name}),I.depMap=r.reduce(function(R,aa){R[aa.name]=aa.fullname;return R},{}),I.metadata&&I.metadata.entry&&
(I.metadata.entry.deps=I.deps,I.metadata.entry.normalizedDeps=r.map(function(R){return R.fullname}),I.metadata.entry.declare=a.declare);M=Lk.classHolder.module(e,m.name);L=M.record();r.forEach(function(R,aa){return M.addDependencyToModuleRecord(R.module,l.setters[aa])});L&&(L.execute=l.execute);r.forEach(function(R,aa){return l.setters[aa](R.exports)});return S.return(l.execute())}})};Lk.moduleSourceChangeGlobal=function(e,k,n,b){var d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==
g.nextAddress)return d={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"global"}},e.get(k)?g.jumpTo(2):g.yield(e["import"](k),2);if(4!=g.nextAddress)return g.yield(Lk.instrumentSourceOfGlobalModuleLoad(e,d),4);m=g.yieldResult;d.source=m.translated;a=Lk.doInstantiateGlobalModule(e,d);e.delete(k);e.set(a.name,a.esModule);return g.return(a.module)})};Lk.doInstantiateGlobalModule=function(e,k){var n=Lk.__createEntry();n.name=k.name;n.esmExports=!0;k.metadata.entry=
n;n.deps=[];for(var b in k.metadata.globals){var d=k.metadata.globals[b];d&&n.deps.push(d)}n.execute=function(m,a,g){(a=(a=Lk.classHolder.module(e,g.id).metadata())&&a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(v){try{delete e.global[v]}catch(y){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+v+'"]')}});if(k.metadata.globals){var l={};for(var r in k.metadata.globals)k.metadata.globals[r]&&(l[r]=m(k.metadata.globals[r]))}if(m=k.metadata.exports)k.source+=
'\nSystem.global["'+m+'"] = '+m+";";g=e.get("@@global-helpers").prepareGlobal(g.id,m,l);Lk.__evaluateGlobalLoadSource(e,k);return g()};return Lk.runExecuteOfGlobalModule(e,n)};Lk.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};Lk.__evaluateGlobalLoadSource=function(e,k){function n(){0==--d&&(m.System=m.SystemJS=b)}var b,d=
0,m=e.global;return function(a){try{0==d++&&(b=m.System),m.System=m.SystemJS=this,(0,eval)(a.source),n()}catch(g){throw n(),Error("Error evaluating "+a.address+":\n"+g.stack);}}.call(e,k)};Lk.runExecuteOfGlobalModule=function(e,k){var n={},b=k.module={exports:n,id:k.name};k.evaluated=!0;if(n=k.execute.call(e.global,function(d){var m=k.deps.find(function(a){return a===d});if(m=m&&e.get(k.normalizedDeps[k.deps.indexOf(m)])||e.get(e.decanonicalize(d,k.name)))return m;throw Error("Module "+d+" not declared as a dependency of "+
k.name);},n,b))b.exports=n;n=b.exports;b=e.get("@system-env").constructor;k.esModule=n&&(n.__esModule||n instanceof b)?n:k.esmExports&&n!==e.global?e.newModule(n):{"default":n};return k};Lk.arr=ng;Lk.emit=Vl;Lk.instrumentSourceOfEsmModuleLoad=gi;Lk.instrumentSourceOfGlobalModuleLoad=Ck;Lk.scheduleModuleExportsChange=pe;Lk.classHolder=dx;Lk.moduleSourceChange=ve;Lk.moduleSourceChange=ve;var Dn=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Dn.isJsFile=rf;Dn.asDir=ef;Dn.isURL=
te;Dn.urlResolve=Ef;Dn.string=Li;Dn.isJsFile=rf;Dn.isJsFile=rf;Dn.asDir=ef;Dn.asDir=ef;var GH=Dn.string.joinPath;Dn.join=GH;Dn.join=GH;Dn.join=GH;Dn.isURL=te;Dn.isURL=te;Dn.urlResolve=Ef;Dn.urlResolve=Ef;var gs=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");gs.arr=ng;gs.obj=Ng;gs.isURL=te;gs.installHook=Ic;gs.isHookInstalled=wd;var tv=function(e){this.pkg=e};tv.prototype.applyConfig=function(e){var k=this.System,n=this.packageURL,b=this.pkg;e=gs.obj.deepMerge(b.config,
e);var d=e.name||n.split("/").slice(-1)[0],m=e.version,a=e.systemjs||{},g=e.lively,l=e.main||"index.js",r={},v={};k.config({map:(r[d]=n,r),packages:(v[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),v)});k.packages[n].configured=!0;k=k.getConfig().packages[n]||{};k.map||(k.map={});a&&(g&&g.main?l=g.main:a.main&&(l=a.main),this.applySystemJSConfig(a));l.match(/\.[^\/\.]+/)||(l+=".js");k.main=l;b.version=m;b.config=e;b._name=d;b.mergeWithConfig(k);
return g?this.applyLivelyConfig(g):{subPackages:[]}};tv.prototype.applySystemJSConfig=function(e){var k=this.System;e.packageConfigPaths&&k.config({packageConfigPaths:gs.arr.uniq(k.packageConfigPaths.concat(e.packageConfigPaths))});e.packages&&k.config({packages:e.packages});e.globalmap&&k.config({map:e.globalmap});e.babelOptions&&k.config({babelOptions:e.babelOptions});e.meta&&k.config({meta:e.meta})};tv.prototype.applyLivelyConfig=function(e){this.applyLivelyConfigMeta(e);this.applyLivelyConfigHooks(e);
this.applyLivelyConfigBundles(e)};tv.prototype.applyLivelyConfigHooks=function(e){var k=this;(e.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&gs.isHookInstalled(k.System,n.target,b.name)||gs.installHook(k.System,n.target,b)}catch(d){console.error("Error installing hook for %s: %s",k.packageURL,d,n)}})};tv.prototype.applyLivelyConfigBundles=function(e){var k=this;if(!e.bundles)return Promise.resolve();var n=Object.keys(e.bundles).reduce(function(b,d){var m=k.packageURL+"/"+
d;d=e.bundles[d].map(function(a){return k.System.decanonicalize(a,k.packageURL+"/")});b[m]=d;return b},{});this.System.config({bundles:n});return Promise.resolve()};tv.prototype.applyLivelyConfigMeta=function(e){if(e.meta){var k={},n=this.System.getConfig().packages[this.packageURL]||{},b={meta:{},packages:(k[this.packageURL]=n,k)};Object.keys(e.meta).forEach(function(d){var m=e.meta[d];gs.isURL(d)?b.meta[d]=m:(n.meta||(n.meta={}),n.meta[d]=m)});this.System.config(b)}};$jscomp.global.Object.defineProperties(tv.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});gs.PackageConfiguration=tv;gs.default=tv;var Bf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");Bf.normalizePackageURL=function(e,k,n){n=void 0===n?[]:n;if(n.some(function(b){return b===k}))return k;e=e.decanonicalize(k.replace(/[\/]+$/,"")+"/");if(!Bf.isURL(e))throw Error("Strange package URL: "+e+" is not a valid URL");
e.match(/\.js/)&&(e=-1<e.indexOf(e+".js")?e.replace(/\.js$/,""):e.split("/").slice(0,-1).join("/"));e.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+e);return String(e).replace(/\/$/,"")};Bf.lookupPackage=Xe;Bf.ensurePackage=Te;Bf.getPackage=pf;Bf.applyConfig=Wf;Bf.importPackage=Qf;Bf.removePackage=pg;Bf.reloadPackage=Th;Bf.registerPackage=sk;Bf.getPackageSpecs=mk;Bf.arr=ng;Bf.promise=xh;Bf.obj=Ng;Bf.emit=Vl;Bf.module=Ao;Bf.resource=w;Bf.PackageConfiguration=
tv;Bf.isURL=te;Bf.join=GH;Bf.classHolder=dx;var Uj=function(e,k,n,b,d){d=void 0===d?{}:d;this.System=e;this.url=k;this.registerProcess=null;this.map={};this.setConfig(d)};Uj.allPackages=function(e){return Bf.obj.values(Bf.classHolder.PackageRegistry.ofSystem(e).byURL)};Uj.allPackageURLs=function(e){return Bf.classHolder.PackageRegistry.ofSystem(e).allPackageURLs()};Uj.forModule=function(e,k){return this.forModuleId(e,k.id)};Uj.forModuleId=function(e,k){return(k=Bf.classHolder.ModulePackageMapping.forSystem(e).getPackageURLForModuleId(k))?
Bf.getPackage(e,k,!0):null};Uj.fromJSON=function(e,k){return(new Bf.Package(e)).fromJSON(k)};Uj.prototype.setConfig=function(e){this._name=e.name;this.version=e.version;this.dependencies=e.dependencies||{};this.devDependencies=e.devDependencies||{};this.main=e.main||"index.js";this.systemjs=e.systemjs;this.lively=e.lively};Uj.prototype.toJSON=function(){var e=this.System,k=Bf.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));k.url.startsWith(e.baseURL)&&
(k.url=k.url.slice(e.baseURL.length).replace(/^\//,""));return k};Uj.prototype.fromJSON=function(e){var k=this.System;this.url=e.url;this._name=e._name;this.version=e.version;this.map=e.map||{};this.main=e.main;this.dependencies=e.dependencies||{};this.devDependencies=e.devDependencies||{};this.systemjs=e.systemjs;this.lively=e.lively;Bf.isURL(this.url)||(this.url=Bf.join(k.baseURL,this.url));this.registerWithConfig();return this};Uj.prototype.asSpec=function(){return Object.assign({},Bf.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(e){return{name:e.id,deps:e.directRequirements().map(function(k){return k.id})}})})};Uj.prototype.path=function(){var e=this.System.baseURL;return 0===this.url.indexOf(e)?this.url.slice(e.length):this.url};Uj.prototype.modules=function(){var e=this.url,k=this.System;return Bf.classHolder.ModulePackageMapping.forSystem(k).getModuleIdsForPackageURL(e).map(function(n){return Bf.module(k,n)})};Uj.prototype.resources=
function(e,k){k=void 0===k?[".git","node_modules",".module_cache","lively.next-node_modules"]:k;var n=this,b,d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=n,d=b.System,m=b.url,a=Bf.Package.allPackageURLs(d),g=a.filter(function(A){return A!==m&&!m.startsWith(A)}),y.yield(Bf.resource(m).dirList("infinity",{exclude:k}),2);l=y.yieldResult;r=l.filter(function(A){return!A.isDirectory()&&!g.some(function(E){return A.url.startsWith(E)})}).map(function(A){return A.url});
v=Bf.arr.pluck(n.modules(),"id");e&&(r=r.filter(e));return y.return(r.map(function(A){var E=A.replace(m,"").replace(/^\//,"");return{isLoaded:v.includes(A),url:A,nameInPackage:E,package:n}}))})};Uj.prototype.hasResource=function(e){var k=this.url;return(e.startsWith(k)?Bf.resource(e):Bf.resource(k).join(e)).exists()};Uj.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Uj.prototype.mergeWithConfig=function(e){var k=e=Object.assign({},e),n=k.name;k=k.map;n&&(delete e.name,
this._name=n);k&&(delete e.map,Object.assign(this.map,k));Object.assign(this,e);return this};Uj.prototype.addMapping=function(e,k){this.map[e]=k;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[e]=k,n)},b)})};Uj.prototype.tryToLoadPackageConfig=function(){var e=this,k,n,b,d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:k=e;n=k.System;b=k.url;d=b+"/package.json";m={};a={};n.config({meta:(m[d]={format:"json"},m),packages:(a[b]=
{meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",d);A.setCatchFinallyBlocks(2);if(g=n.get(d)){A.jumpTo(4);break}return A.yield(n.import(d),5);case 5:g=A.yieldResult;case 4:return l=g,r=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),Bf.arr.pushIfNotIncluded(r,d),n.config({packageConfigPaths:r}),A.return(l);case 2:return v=A.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
d,v),delete n.meta[d],y=b.split("/").slice(-1)[0],A.return({name:y})}})};Uj.prototype.import=function(){var e=this,k,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(e.register(),2);case 2:return k=e,n=k.url,b=k.System,d=Bf,m=d.module,a=b,r.yield(b.normalize(n),3);case 3:return g=m.call(d,a,r.yieldResult),r.yield(b.import(g.id),4);case 4:return l=r.yieldResult,r.yield(Bf.promise.waitFor(1E3,function(){return g.isLoaded()}),5);
case 5:return r.return(l)}})};Uj.prototype.isRegistering=function(){return!!this.registerProcess};Uj.prototype.register=function(e){var k=this,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(k.isRegistering())return r.return(k.registerProcess.promise);n=k;b=n.System;d=n.url;k.registerProcess=Bf.promise.deferred();m=k.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",d);r.setCatchFinallyBlocks(2,3);if(a=
e){r.jumpTo(5);break}return r.yield(k.tryToLoadPackageConfig(),6);case 6:a=r.yieldResult;case 5:g=a,k.registerWithConfig(g),k.registerProcess.resolve(g);case 3:r.enterFinallyBlock();delete k.registerProcess;r.leaveFinallyBlock(4);break;case 2:throw l=r.enterCatchBlock(),k.registerProcess.reject(l),l;case 4:return r.return(m)}})};Uj.prototype.updateConfig=function(e){e=Object.assign({},this.runtimeConfig,{},e);var k=this.name,n=this.version,b=e,d=b.name;b=b.version;(new Bf.PackageConfiguration(this)).applyConfig(e);
if(k!==e.name||n!==e.version)console.log("[lively.modules] Updating registry "+k+"@"+n+" => "+d+"@"+b),Bf.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,k,n,d,b)};Uj.prototype.registerWithConfig=function(e){e=void 0===e?this.runtimeConfig:e;var k=this.System,n=this.url,b=(new Bf.PackageConfiguration(this)).applyConfig(e),d=Bf.join(n,"package.json");k.get(d)||k.set(d,k.newModule(Object.assign({},e,{default:e})));Bf.emit("lively.modules/packageregistered",{"package":n},
Date.now(),k);return b};Uj.prototype.remove=function(e){e=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},e);var k=this.System,n=this.url;n=n.replace(/\/$/,"");e.unloadModules&&this.modules().forEach(function(g){return g.unload(e)});Bf.classHolder.PackageRegistry.ofSystem(k).removePackage(this);var b=k.getConfig(),d=n+"/package.json";k.delete(String(d));Bf.arr.remove(b.packageConfigPaths||[],d);var m={},a={};k.config({meta:(m[d]={},m),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});
delete k.packages[n];Bf.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),k)};Uj.prototype.reload=function(e){var k=this.url,n=Bf.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(k);this.remove(e);e={};n.addPackageAt(k,b||"devPackageDirs",(e[k]=this,e));return this.import()};Uj.prototype.fork=function(e,k){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k||(k=Bf.resource(n.url).join("../"+e).withRelativePartsResolved().url),
b.yield(n.changeAddress(k,e,!1),2)):b.return(b.yieldResult)})};Uj.prototype.rename=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=Bf.resource(k.url).join("../"+e).withRelativePartsResolved().url,b.yield(k.changeAddress(n,e,!0),2)):b.return(b.yieldResult)})};Uj.prototype.changeAddress=function(e,k,n){k=void 0===k?null:k;n=void 0===n?!0:n;var b=this,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:return e=
e.replace(/\/?/,""),d=b,m=d.System,a=d.url,na.yield(b.runtimeConfig,2);case 2:return g=na.yieldResult,l=Bf.resource(a).asDirectory(),r=new Bf.Package(m,e),na.yield(Bf.resource(e).asDirectory(),3);case 3:return v=na.yieldResult,g.name=k||b.name,y=Bf.classHolder.PackageRegistry.ofSystem(m),A=y.coversDirectory(a),Bf.classHolder.ModulePackageMapping.forSystem(m).clearCache(),m.packages[a]&&(m.packages[e]=m.packages[a],n&&delete m.packages[a]),Object.assign(r,Bf.obj.select(b,["_name","map","config"])),
na.yield(v.ensureExistance(),4);case 4:return na.yield(b.resources(void 0,[]),5);case 5:E=na.yieldResult.map(function(la){return la.url}),F=b.modules(),G=$jscomp.makeIterator(F),I=G.next();case 6:if(I.done){na.jumpTo(8);break}M=I.value;L=v.join(M.pathInPackage()).url;return n?na.yield(M.renameTo(L),10):na.yield(M.copyTo(L),10);case 10:S=E.indexOf(M.id);-1<S&&E.splice(S,1);I=G.next();na.jumpTo(6);break;case 8:R=$jscomp.makeIterator(E),aa=R.next();case 13:if(aa.done){if(!n){na.jumpTo(17);break}return na.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}ra=aa.value;Ea=Bf.resource(ra);K=Ea.relativePathFrom(l);return na.yield(Ea.copyTo(v.join(K)),14);case 14:aa=R.next();na.jumpTo(13);break;case 18:return na.yield(l.remove(),17);case 17:if(!k){na.jumpTo(20);break}r.name=k;r.config.name=k;Z=Bf.resource(e).join("package.json");na.setCatchFinallyBlocks(21);return na.yield(Z.exists(),23);case 23:if(!na.yieldResult){na.jumpTo(24);break}return na.yield(Z.readJson(),25);case 25:U=na.yieldResult;if(U.name!==b.name){na.jumpTo(26);break}U.name=
k;return na.yield(Z.writeJson(U,!0),26);case 26:(V=m.get(Z.url))&&m.set(Z.url,m.newModule(Object.assign({},V,{name:k})));case 24:na.leaveTryBlock(20);break;case 21:na.enterCatchBlock();case 20:return A=A||"individualPackageDirs","individualPackageDirs"!==A&&"devPackageDirs"!==A||y._addPackageDir(e,A,!0),y._addPackageWithConfig(r,g,e,A),y.resetByURL(),y._updateLatestPackages(),na.return(r)}})};Uj.prototype.search=function(e,k){k=void 0===k?{}:k;var n=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return k.includeUnloaded?m.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),m.jumpTo(2));2!=m.nextAddress&&(b=m.yieldResult.map(function(a){return Bf.module(n.System,a.url)}));d=b;return m.return(Promise.all(d.map(function(a){return a.search(e,k).catch(function(g){console.error("Error searching module "+a.name+":\n"+g.stack);return[]})})).then(function(a){return Bf.arr.flatten(a,
1)}))})};$jscomp.global.Object.defineProperties(Uj.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var e=this.System.get(this.url+"/package.json");return e&&e.name?e.name:Bf.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(e){return this._name=e}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(e){return this.url=e}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var e=this.main,k=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};e&&(b.main=e);k&&(b.systemjs=k);n&&(b.lively=n);return b}}});Bf.Package=Uj;Bf.ensurePackage=Te;Bf.ensurePackage=Te;Bf.importPackage=Qf;Bf.importPackage=Qf;Bf.removePackage=pg;Bf.removePackage=pg;Bf.reloadPackage=
Th;Bf.reloadPackage=Th;Bf.registerPackage=sk;Bf.registerPackage=sk;Bf.getPackage=pf;Bf.getPackage=pf;Bf.lookupPackage=Xe;Bf.lookupPackage=Xe;Bf.applyConfig=Wf;Bf.applyConfig=Wf;Bf.getPackageSpecs=mk;Bf.getPackageSpecs=mk;Bf.Package=Uj;Bf.Package=Uj;var Nd=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");Nd.isFunctionNode=function(e){return"ArrowFunctionExpression"===e.type||"FunctionExpression"===e.type||"FunctionDeclaration"===e.type};Nd.ensureIdentifier=function(e){return e.replace(Nd.firstIdRe,
"_").replace(Nd.trailingIdRe,"_")};Nd.constructorTemplate=function(e){return Nd.funcExpr({id:e?Nd.id(e):null},["__first_arg__"],Nd.ifStmt(Nd.binaryExpr(Nd.id("__first_arg__"),"&&",Nd.member("__first_arg__",Nd.funcCall(Nd.member("Symbol","for"),Nd.literal("lively-instance-restorer")),!0)),Nd.block(),Nd.block(Nd.exprStmt(Nd.funcCall(Nd.member(Nd.member("this",Nd.funcCall(Nd.member("Symbol","for"),Nd.literal("lively-instance-initialize")),!0),"apply"),Nd.id("this"),Nd.id("arguments"))))))};Nd.replaceSuper=
function(e,k,n,b){console.assert("Super"===e.type);(k=k.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Nd.stringify(e)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?e:k&&"static"===k[Nd.methodKindSymbol]?Nd.funcCall(Nd.member("Object","getPrototypeOf"),Nd.id(Nd.tempLivelyClassVar)):Nd.funcCall(Nd.member("Object","getPrototypeOf"),Nd.member(Nd.id(Nd.tempLivelyClassVar),
"prototype"))};Nd.replaceSuperMethodCall=function(e,k,n,b){console.assert("CallExpression"===e.type);console.assert("Super"===e.callee.object.type);return Nd.funcCall.apply(Nd,[Nd.member(Nd.funcCall(Nd.member(b.functionNode,"_get"),Nd.replaceSuper(e.callee.object,k,n.concat(["callee","object"]),b),Nd.literal(e.callee.property.value||e.callee.property.name),Nd.id("this")),"call"),Nd.id("this")].concat($jscomp.arrayFromIterable(e.arguments)))};Nd.replaceDirectSuperCall=function(e,k,n,b){console.assert("CallExpression"===
e.type);console.assert("Super"===e.callee.type);return Nd.funcCall.apply(Nd,[Nd.member(Nd.funcCall(Nd.member(b.functionNode,"_get"),Nd.replaceSuper(e.callee,k,n.concat(["callee"]),b),Nd.funcCall(Nd.member("Symbol","for"),Nd.literal("lively-instance-initialize")),Nd.id("this")),"call"),Nd.id("this")].concat($jscomp.arrayFromIterable(e.arguments)))};Nd.replaceSuperGetter=function(e,k,n,b){console.assert("MemberExpression"===e.type);console.assert("Super"===e.object.type);return Nd.funcCall(Nd.member(b.functionNode,
"_get"),Nd.replaceSuper(e.object,k,n.concat(["object"]),b),Nd.literal(e.property.value||e.property.name),Nd.id("this"))};Nd.replaceSuperSetter=function(e,k,n,b){console.assert("AssignmentExpression"===e.type);console.assert("Super"===e.left.object.type);return Nd.funcCall(Nd.member(b.functionNode,"_set"),Nd.replaceSuper(e.left.object,k,n.concat(["left","object"]),b),Nd.literal(e.left.property.value||e.left.property.name),e.right,Nd.id("this"))};Nd.replaceClass=function(e,k,n,b){console.assert("ClassDeclaration"===
e.type||"ClassExpression"===e.type);var d=e.body.body,m=e.superClass;n=e.id;var a=e.type,g=e.start,l=e.end,r=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,v=Nd.id("undefined"),y=Nd.id("undefined"),A=n?n.name:"anonymous_class",E=b.evalId,F=b.sourceAccessorName;e=e["x-lively-object-meta"]||{start:g,end:l};d.length&&(r=d.reduce(function(L,S){var R=S.key,aa=S.kind,ra=S.value,Ea=S.static;"Literal"!==R.type&&"Identifier"!==R.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(R));
if("method"===aa){aa={};S=Nd.id(A+"_"+Nd.ensureIdentifier(R.name||R.value)+"_");ra=["key",Nd.literal(R.name||R.value),"value",Object.assign({},ra,(aa.id=S,aa[Nd.methodKindSymbol]=Ea?"static":"proto",aa))];var K=Nd.objectLiteral(ra)}else"get"===aa||"set"===aa?(S={},K=Nd.objectLiteral(["key",Nd.literal(R.name||R.value),aa,Object.assign({},ra,(S.id=Nd.id(aa),S[Nd.methodKindSymbol]=Ea?"static":"proto",S))])):"constructor"===aa?(R={},ra=["key",Nd.funcCall(Nd.member("Symbol","for"),Nd.literal("lively-instance-initialize")),
"value",Object.assign({},ra,(R.id=Nd.id(A+"_initialize_"),R[Nd.methodKindSymbol]="proto",R))],K=Nd.objectLiteral(ra)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+aa+", ignoring it, "+JSON.stringify(S));(Ea?L.clazz:L.inst).push(K);return L},{inst:[],clazz:r?[Nd.parse('({ key: "className", get: function get() { return "'+A+'"; } })').body[0].expression]:[]}),d=r.inst,r=r.clazz,d.length&&(v={type:"ArrayExpression",elements:d}),r.length&&(y={type:"ArrayExpression",
elements:r}));d=b.scope;if(m&&b.currentModuleAccessor)if(b.classHolder===m.object){var G=m;var I=m.property.name}else{var M=d&&d.resolvedRefMap&&d.resolvedRefMap.get(m);M&&M.decl&&d.decls&&d.decls.find(function(L){return $jscomp.makeIterator(L).next().value===M.decl})&&(G=m,I=m.name)}I=G?Nd.objectLiteral(["referencedAs",Nd.literal(I),"value",G]):m||Nd.id("undefined");G=n&&"ClassDeclaration"===a;m=["start",Nd.literal(e.start),"end",Nd.literal(e.end)];"undefined"!==typeof E&&m.push("evalId",Nd.literal(E));
F&&m.push("moduleSource",Nd.nodes.id(F));E=Nd.objectLiteral(m);v=Nd.funcCall(Nd.funcExpr({},["superclass"],Nd.varDecl(Nd.tempLivelyClassHolderVar,k.classHolder),Nd.varDecl(Nd.tempLivelyClassVar,G?{type:"ConditionalExpression",test:Nd.binaryExpr(Nd.funcCall(Nd.member(Nd.tempLivelyClassHolderVar,"hasOwnProperty"),Nd.literal(n.name)),"&&",Nd.binaryExpr({argument:Nd.member(Nd.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Nd.literal("function"))),consequent:Nd.member(Nd.tempLivelyClassHolderVar,
n),alternate:Nd.assign(Nd.member(Nd.tempLivelyClassHolderVar,n),Nd.constructorTemplate(n.name))}:n?Nd.constructorTemplate(n.name):Nd.constructorTemplate(null)),Nd.returnStmt(Nd.funcCall(b.functionNode,Nd.id(Nd.tempLivelyClassVar),Nd.id("superclass"),v,y,Nd.id(Nd.tempLivelyClassHolderVar),b.currentModuleAccessor||Nd.id("undefined"),E))),I);if("ClassExpression"===a)return v;a=v;b.declarationWrapper&&k.classHolder===b.classHolder&&(a=Nd.funcCall(b.declarationWrapper,Nd.literal(n.name),Nd.literal("class"),
a,b.classHolder,E));a=Nd.varDecl(n,a,"var");a[Nd.isTransformedClassVarDeclSymbol]=!0;return a};Nd.splitExportDefaultWithClass=function(e,k,n,b){return e.declaration&&e.declaration[Nd.isTransformedClassVarDeclSymbol]?[e.declaration,{declaration:e.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:e};Nd.classToFunctionTransform=Gi;Nd.arr=ng;Nd.parse=ye;Nd.stringify=Dm;Nd.query=rt;Nd.nodes=$w;Nd.Visitor=Ne;var Rq=Nd.nodes;Nd.assign=Rq.assign;Nd.member=Rq.member;Nd.id=Rq.id;Nd.exprStmt=
Rq.exprStmt;Nd.funcCall=Rq.funcCall;Nd.literal=Rq.literal;Nd.objectLiteral=Rq.objectLiteral;Nd.varDecl=Rq.varDecl;Nd.funcExpr=Rq.funcExpr;Nd.returnStmt=Rq.returnStmt;Nd.binaryExpr=Rq.binaryExpr;Nd.ifStmt=Rq.ifStmt;Nd.block=Rq.block;Nd.firstIdRe=/^[^_a-z]/i;Nd.trailingIdRe=/[^_a-z0-9]/ig;Nd.isTransformedClassVarDeclSymbol=Symbol();Nd.methodKindSymbol=Symbol();Nd.tempLivelyClassVar="__lively_class__";Nd.tempLivelyClassHolderVar="__lively_classholder__";var oN=function(){return Nd.Visitor.apply(this,
arguments)||this};$jscomp.inherits(oN,Nd.Visitor);oN.prototype.accept=function(e,k,n){Nd.isFunctionNode(e)&&(k=Object.assign({},k,{classHolder:Nd.objectLiteral([]),currentMethod:e[Nd.methodKindSymbol]?e:k.currentMethod}));if("ClassExpression"===e.type||"ClassDeclaration"===e.type)e=Nd.replaceClass(e,k,n,k.options);"Super"===e.type&&(e=Nd.replaceSuper(e,k,n,k.options));"MemberExpression"===e.type&&e.object&&"Super"===e.object.type&&(e=Nd.replaceSuperGetter(e,k,n,k.options));"AssignmentExpression"===
e.type&&"MemberExpression"===e.left.type&&"Super"===e.left.object.type&&(e=Nd.replaceSuperSetter(e,k,n,k.options));"CallExpression"===e.type&&"Super"===e.callee.type&&(e=Nd.replaceDirectSuperCall(e,k,n,k.options));"CallExpression"===e.type&&e.callee.object&&"Super"===e.callee.object.type&&(e=Nd.replaceSuperMethodCall(e,k,n,k.options));e=Nd.Visitor.prototype.accept.call(this,e,k,n);return"ExportDefaultDeclaration"===e.type?Nd.splitExportDefaultWithClass(e,k,n,k.options):e};oN.run=function(e,k){var n=
new this,b=k.classHolder||Nd.objectLiteral([]);return n.accept(e,{options:k,classHolder:b},[])};Nd.ClassReplaceVisitor=oN;Nd.classToFunctionTransform=Gi;Nd.classToFunctionTransform=Gi;var rE=lively.FreezerRuntime.recorderFor("lively.classes/index.js");rE.runtime=pE;rE.classToFunctionTransform=Gi;rE.runtime=pE;rE.runtime=pE;rE.classToFunctionTransform=Gi;rE.classToFunctionTransform=Gi;var apa=Object.freeze({__proto__:null,runtime:pE,classToFunctionTransform:Gi}),yk=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");
yk.arr=ng;yk.Path=Ti;yk.fuzzyParse=ao;yk.query=rt;yk.stringify=Dm;yk.resource=w;var vt=function(e,k,n,b,d,m,a){this.System=e;this.intoModuleId=k;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=d.moduleId;this.importData=d;this.alias=m;this.parsed=a||yk.fuzzyParse(b)};vt.run=function(e,k,n,b,d,m,a){return(new this(e,k,n,b,d,m,a)).run()};vt.prototype.run=function(){var e=this.generateImportStatement(),k=e.standaloneImport,n=e.importedVarName,b=this.existingImportsOfFromModule(),d=b.imports,
m=b.importsOfFromModule;b=b.importsOfVar;m=this.importsToBeReused(m,b,e);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:k,from:b[0].start,to:b[0].end};if(m.length&&(e=this.modifyExistingImport(m,k)))return e;d=yk.arr.last(d);return this.insertNewImport(m,k,n,d?d.end:0)};vt.prototype.importsToBeReused=function(e,k,n){n.isDefault&&(e=e.filter(function(b){return!b.specifiers.some(function(d){return"ImportDefaultSpecifier"==d.type})}));
return e};vt.prototype.generateImportStatement=function(){var e=this.intoModuleId,k=this.fromModuleId,n=this.importData,b=this.intoPackage,d=this.alias,m="default"===n.exported;d=d?d:m?n.local:n.exported;var a=!m&&n.exported!==d;b=b&&b.name;var g=k,l=n.packageName,r=n.pathInPackage;if(n.isMain)g=l;else if(b===l)try{g=yk.resource(k).relativePathFrom(yk.resource(e)),g.startsWith(".")||(g="./"+g)}catch(v){l&&"no group"!==l&&r&&(g=l+"/"+r)}else l&&"no group"!==l&&r&&(g=l+"/"+r);return{isDefault:m,standaloneImport:m?
"import "+d+' from "'+g+'";':"import { "+n.exported+(a?" as "+d:"")+' } from "'+g+'";',importedVarName:d}};vt.prototype.existingImportsOfFromModule=function(){var e=this.System,k=this.fromModuleId,n=this.intoModuleId,b=this.importData,d=b.exported,m=b.local,a=this.alias,g="default"===d;b=this.parsed.body.filter(function(r){return"ImportDeclaration"===r.type});var l=g?a||m:a||d;m=b.filter(function(r){if(!r.source||"string"!==typeof r.source.value)return null;r=e.decanonicalize(r.source.value,n);return k===
r});a=m.filter(function(r){return(r.specifiers||[]).some(function(v){return g?"ImportDefaultSpecifier"===v.type&&v.local.name===l:yk.Path("imported.name").get(v)===d&&yk.Path("local.name").get(v)===l})});return{imports:b,importsOfFromModule:m,importsOfVar:a}};vt.prototype.modifyExistingImport=function(e,k){e=yk.arr.flatmap(e,function(l){return l.specifiers||[]});if(!e.length)return null;e=$jscomp.makeIterator(yk.arr.partition(e,function(l){return"ImportDefaultSpecifier"===l.type}));var n=$jscomp.makeIterator(e.next().value).next().value,
b=$jscomp.makeIterator(e.next().value).next().value;e=this.alias;var d=this.intoModuleSource,m=this.importData,a=m.exported;m=m.local;var g="default"===a;g?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(g){n=d.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(e||m)+",";a=d.slice(0,n);d=d.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);d.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+d,generated:b,
standaloneImport:k,importedVarName:e||m,from:n,to:n+b.length}}n=b?b.end:n.end;g=(m=e&&e!==a)?a+" as "+e:a;b=b?", "+g:", { "+g+" }";return{status:"modified",newSource:""+d.slice(0,n)+b+d.slice(n),generated:b,standaloneImport:k,importedVarName:m?e:a,from:n,to:n+b.length}};vt.prototype.insertNewImport=function(e,k,n,b){b=void 0===b?0:b;e&&e.length&&(b=yk.arr.last(e).end);var d=this.intoModuleSource;e=d.slice(0,b);d=d.slice(b);var m=k;e.length&&!e.endsWith("\n")&&(m="\n"+m);d.length&&!d.startsWith("\n")&&
(m+="\n");return{status:"modified",newSource:e+m+d,generated:m,standaloneImport:k,importedVarName:n,from:b,to:b+m.length}};yk.ImportInjector=vt;var pN=function(){};pN.getGlobals=function(e,k){e=k||yk.fuzzyParse(e,{withComments:!0});return(e=e.comments?e.comments.find(function(n){return n.isBlock&&n.text.startsWith("global")}):null)?e.text.replace(/^global\s*/,"").split(",").map(function(n){return n.trim()}).filter(Boolean):[]};pN.run=function(e,k,n){n=n||yk.fuzzyParse(e,{withComments:!0});var b=(n=
n.comments?n.comments.find(function(m){return m.isBlock&&m.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(m){return m.trim()}).filter(Boolean):[],d=k.filter(function(m){return!b.includes(m)});if(!d.length)return{status:"not modified",newSource:e,generated:"",from:0,to:0};if(!n)return n="/*global "+d.join(",")+"*/\n",{status:"modified",newSource:n+e,generated:n,from:0,to:n.length};k=n.start+2+n.text.length;d=d.join(",");b.length?d=","+d:n.text.startsWith("global ")||
(d=" "+d);n=k+d.length;return{status:"modified",newSource:e.slice(0,k)+d+e.slice(k),generated:d,from:k,to:n}};yk.GlobalInjector=pN;var HH=function(){};HH.removeImports=function(e,k,n){n=n||yk.fuzzyParse(e);var b=yk.arr.flatmap(n.body,function(d){return"ImportDeclaration"===d.type&&d.specifiers.length?d.specifiers.map(function(m){return{local:m.local,importStmt:d}}):[]}).filter(function(d){return k.some(function(m){return m.local===d.local.name})});n=b.map(function(d){return{local:d.local.name,from:d.importStmt.source.value}});
e=yk.arr.uniq(b.map(function(d){var m=d.importStmt.specifiers.find(function(a){return d.local===a.local});yk.arr.remove(d.importStmt.specifiers,m);return d.importStmt})).slice().reverse().reduce(function(d,m){var a=d.source;d=d.changes;var g=m.start,l=m.end,r=m.specifiers,v=a.slice(0,g),y=a.slice(l);a=a.slice(g,l);(m=r.length?yk.stringify(m):"")&&m.includes("\n")&&!a.includes("\n")&&(m=m.replace(/\s+/g," "));a=v+m+y;d=d.concat({replacement:m,start:g,end:l});return{source:a,changes:d}},{source:e,changes:[]});
return Object.assign({},e,{removedImports:n})};HH.findUnusedImports=function(e){var k="string"===typeof e?yk.fuzzyParse(e):e;e=yk.arr.flatmap(k.body,function(d){return"ImportDeclaration"===d.type&&d.specifiers.length?d.specifiers.map(function(m){return{local:m.local,from:d.source?d.source.value:"",importStmt:d}}):[]});var n=e.map(function(d){return d.local});k=yk.query.resolveReferences(yk.query.scopes(k));k=Array.from(k.resolvedRefMap.keys()).filter(function(d){return!n.includes(d)});var b=yk.arr.uniq(k.map(function(d){return d.name}));
return e.filter(function(d){return!b.includes(d.local.name)}).map(function(d){return Object.assign({},d,{local:d.local.name})})};HH.removeUnusedImports=function(e){var k=yk.fuzzyParse(e);return this.removeImports(e,this.findUnusedImports(k),k)};yk.ImportRemover=HH;var gp=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");gp.ensureParent=function(e,k,n){if(n)return n;n=e.id;var b=e.System;k=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;
n={id:k,filename:k,paths:[]};(e=e.package())&&n.paths.push(gp.resource(e.url).join("node_modules/").path());return n};gp.relative=function(e,k){return gp.resource(e.id).parent().join(k).url.replace("file://","")};gp._require=Wh;gp._resolve=Vi;gp.resource=w;gp._require=Wh;gp._require=Wh;gp._resolve=Vi;gp._resolve=Vi;var Ff=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");Ff.module=Ao;Ff.isModuleLoaded=Bo;Ff.doesModuleExist=Ts;Ff.arr=ng;Ff.obj=Ng;Ff.graph=iu;Ff.parse=ye;Ff.query=rt;
Ff.computeRequireMap=Gd;Ff.moduleSourceChange=ve;Ff.scheduleModuleExportsChange=pe;Ff.runScheduledExportChanges=Kd;Ff.livelySystemEnv=hp;Ff.Package=Uj;Ff.isURL=te;Ff.emit=Vl;Ff.subscribe=Ls;Ff.defaultClassToFunctionConverterName="initializeES6ClassForLively";Ff.classRuntime=pE;Ff.ImportInjector=vt;Ff.GlobalInjector=pN;Ff.ImportRemover=HH;Ff._require=Wh;Ff._resolve=Vi;Ff.classHolder=dx;var qN=function(){var e=/['"]format (esm|es6)['"];/,k=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,d){return d&&d.format?("es6"==d.format&&"esm"==d.format,d.format):e.test(b.slice(0,5E3))||!k.test(b.slice(0,5E3))&&n.test(b)?"esm":k.test(b.slice(0,5E3))?"cjs":"global"}}();Ff.detectModuleFormat=qN;Ff.detectModuleFormat=qN;Ff.detectModuleFormat=qN;Ff.classHolder.module=Ff.module;Ff.isModuleLoaded=Bo;Ff.isModuleLoaded=Bo;Ff.doesModuleExist=Ts;Ff.doesModuleExist=Ts;Ff.globalProps={initialized:!1,descriptors:{}};var Zg=function(e,k){var n=this;if(!Ff.isURL(k)&&!/^@/.test(k))throw Error("ModuleInterface constructor called with "+
k+" that does not seem to be a fully normalized module id.");this.System=e;this.id=k;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;Ff.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};Zg.prototype.fullName=function(){return this.id};Zg.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};Zg.prototype.source=function(){var e=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(k){return e._source=k})};Zg.prototype.setSource=function(e){this.sourceAccessorName&&this.recorderName&&e.includes("var "+this.recorderName)&&e.includes("var "+this.sourceAccessorName)||this._source===e||(this.reset(),this._source=e)};Zg.prototype.ast=function(){var e=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress){if(e._ast)return d.return(e._ast);k=e;n=Ff;b=n.parse;return d.yield(e.source(),2)}return d.return(k._ast=b.call(n,d.yieldResult))})};Zg.prototype.scope=function(){var e=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return e._scope?n.return(e._scope):n.yield(e.ast(),2);k=n.yieldResult;return n.return(e._scope=Ff.query.topLevelDeclsAndRefs(k).scope)})};Zg.prototype.resolvedScope=function(){var e=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==
d.nextAddress?(k=e,n=Ff.query,b=n.resolveReferences,d.yield(e.scope(),2)):d.return(k._scope=b.call(n,d.yieldResult))})};Zg.prototype.metadata=function(){var e=this.System.loads?this.System.loads[this.id]:null;return e?e.metadata:null};Zg.prototype.addMetadata=function(e){var k=this.System,n=this.id,b=this.metadata();e=b?Object.assign(b,e):e;b={};k.config({meta:(b[n]=e,b)});return k.meta[n]};Zg.prototype.format=function(){var e=this.metadata();return e&&e.format?e.format:this._source?Ff.detectModuleFormat(this._source):
"global"};Zg.prototype.setFormat=function(e){return this.addMetadata({format:e})};Zg.prototype.reset=function(){this._scope=this._ast=this._source=null};Zg.prototype.get=function(){return this.System.get(this.id)};Zg.prototype.load=function(e){var k=this,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=k,b=n.id,d=n.System,e&&k.addMetadata(e),(m=d.get(b))?a.jumpTo(2):a.yield(d.import(b),3);2!=a.nextAddress&&(m=a.yieldResult);return a.return(m)})};
Zg.prototype.isLoaded=function(){return!!this.System.get(this.id)};Zg.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete Ff.livelySystemEnv(this.System).loadedModules[this.id]};Zg.prototype.unloadDeps=function(e){var k=this;e=Ff.obj.merge({forgetDeps:!0,forgetEnv:!0},e);this.dependents().forEach(function(n){k.System.delete(n.id);k.System.loads&&delete k.System.loads[n.id];e.forgetEnv&&n.unloadEnv()})};Zg.prototype.unload=function(e){var k=this,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return e=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},e),n=k,b=n.System,d=n.id,e.reset&&k.reset(),e.forgetDeps&&k.unloadDeps(e),k.System.delete(d),b.loads&&delete b.loads[d],b.meta&&delete b.meta[d],e.forgetEnv&&k.unloadEnv(),(m=b._livelyModulesTranslationCache)?a.yield(m.deleteCachedData(d),2):a.jumpTo(2);Ff.emit("lively.modules/moduleunloaded",{module:k.id},Date.now(),k.System);a.jumpToEnd()})};Zg.prototype.reload=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(e=Ff.obj.merge({reloadDeps:!0,resetEnv:!0},e),n=[k],e.reloadDeps&&(n=k.dependents().concat(n)),b.yield(k.unload({forgetDeps:e.reloadDeps,forgetEnv:e.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(d){return d.id!==k.id&&d.load()})),3):b.yield(k.load(),0)})};Zg.prototype.copyTo=function(e){var k=this,n,b,d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=k.System.resource(e),b=n.write,l.yield(k.source(),3);if(2!=l.nextAddress)return l.yield(b.call(n,
l.yieldResult),2);d=k;m=d.System;a=Ff.module(m,e);g=Ff.obj.select(k,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,g);m.set(e,m.newModule(m.get(k.id)));return l.return(a)})};Zg.prototype.renameTo=function(e,k){k=void 0===k?{}:k;var n=this,b,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:return b=k,d=void 0===b.unload?!0:b.unload,m=void 0===b.removeFile?!0:b.removeFile,g.yield(n.copyTo(e),
2);case 2:a=g.yieldResult;if(!d){g.jumpTo(3);break}return g.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!m){g.jumpTo(5);break}return g.yield(n.System.resource(n.id).remove(),5);case 5:return g.return(a)}})};Zg.prototype.whenLoaded=function(e){if(this.isLoaded())try{e(this)}catch(k){console.error(k)}else Ff.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:e})};Zg.prototype.changeSourceAction=function(e){var k=this;return Promise.resolve(this.source()).then(function(n){return e(n)}).then(function(n){return k.changeSource(n)})};
Zg.prototype.changeSource=function(e,k){k=Object.assign({doSave:!0,doEval:!0},k);var n=this.System,b=this.id,d=this.format(),m;this.reset();this.lastModifiedAt=new Date;return Promise.all([k.doSave&&this.System.resource(b).write(e),k.doEval&&Ff.moduleSourceChange(n,b,e,d,k).then(function(a){return m=a})]).then(function(){return m})};Zg.prototype.addDependencyToModuleRecord=function(e,k){var n=this;k=void 0===k?function(){}:k;var b=this.record(),d=e.record();if(b&&d){var m,a=b.dependencies.some(function(l,
r){if(l)return m=r,l&&l.name===e.id});a?d!==b.dependencies[m]&&b.dependencies.splice(m,1,d):b.dependencies.push(d);a&&b.setters[m]||(b.setters[a?m:b.dependencies.length-1]=k);var g;d.importers.some(function(l,r){if(l)return g=r,l&&l.name===n.id})?b!==d.importers[g]&&d.importers.splice(g,1,b):d.importers.push(b)}};Zg.prototype.dependents=function(){var e=this;return Ff.graph.hull(Ff.graph.invert(Ff.computeRequireMap(this.System)),this.id).map(function(k){return Ff.module(e.System,k)})};Zg.prototype.requirements=
function(){var e=this;return Ff.graph.hull(Ff.computeRequireMap(this.System),this.id).map(function(k){return Ff.module(e.System,k)})};Zg.prototype.directRequirements=function(){var e=this,k=(this.record()||{}).dependencies||[];return Ff.arr.pluck(k.filter(Boolean),"name").map(function(n){return Ff.module(e.System,n)})};Zg.prototype.define=function(e,k,n,b){n=void 0===n?!0:n;var d=this.System,m=this.id,a=this.recorder,g=Symbol.for("lively-object-meta"),l=Symbol.for("lively-module-meta");"function"!==
typeof k||!b||"function"!==b.kind&&"class"!==b.kind||(k[g]=b);k&&k[g]&&!k[l]&&(b=this.pathInPackage(),g=this.package(),k[l]={package:g?{name:g.name,version:g.version}:{},pathInPackage:b});a[e]=k;Ff.scheduleModuleExportsChange(d,m,e,k,!1);this.notifyTopLevelObservers(e);(n=n||!this.isEvalutionInProgress())&&Ff.runScheduledExportChanges(d,m);return k};Zg.prototype.undefine=function(e){delete this.recorder[e]};Zg.prototype.subscribeToToplevelDefinitionChanges=function(e){this._observersOfTopLevelState.push(e);
return e};Zg.prototype.notifyTopLevelObservers=function(e){var k=this.recorder;Ff.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],e)||this._observersOfTopLevelState.forEach(function(n){return n(e,k[e])})};Zg.prototype.unsubscribeFromToplevelDefinitionChanges=function(e){this._observersOfTopLevelState="string"===typeof e?this._observersOfTopLevelState.filter(function(k){return k.name!==e}):this._observersOfTopLevelState.filter(function(k){return k!==e})};Zg.prototype.evaluationStart=
function(){this._evaluationsInProgress++};Zg.prototype.evaluationEnd=function(){this._evaluationsInProgress--;Ff.runScheduledExportChanges(this.System,this.id)};Zg.prototype.nextEvalId=function(){return this._evalId++};Zg.prototype.isEvalutionInProgress=function(){return 0<this._evaluationsInProgress};Zg.prototype.env=function(){return this};Zg.prototype.package=function(){return Ff.Package.forModule(this.System,this)};Zg.prototype.pathInPackage=function(){var e=this.package();return e&&0===this.id.indexOf(e.address)?
this.id.slice(e.address.length).replace(/^\//,""):this.id};Zg.prototype.imports=function(){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=Ff.query,n=k.imports,b.yield(e.scope(),2)):b.return(n.call(k,b.yieldResult))})};Zg.prototype.exports=function(){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=Ff.query,n=k.exports,b.yield(e.scope(),2)):b.return(n.call(k,b.yieldResult))})};Zg.prototype.addImports=
function(e){var k=this,n,b,d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.source(),2);n=y.yieldResult;b=$jscomp.makeIterator(e);for(d=b.next();!d.done;d=b.next())m=d.value,a=Ff.module(k.System,m.from||m.moduleId),g=a.package(),l={exported:m.exported||m.local,moduleId:a.id,packageName:g.name,packageURL:g.url,pathInPackage:a.pathInPackage()},r=m.local,v=Ff.ImportInjector.run(k.System,k.id,k.package(),n,l,r),n=v.newSource;return y.yield(k.changeSource(n),
0)})};Zg.prototype.addGlobalDeclaration=function(e){var k=this,n,b,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(k.source(),2):3!=g.nextAddress?(n=g.yieldResult,b=Ff.GlobalInjector.run(n,e),d=b.status,m=b.newSource,(a="modified"===d)?g.yield(k.changeSource(m),3):g.jumpTo(3)):g.return(a)})};Zg.prototype.removeImports=function(e){var k=this,n,b,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e.length?
a.yield(k.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(Ff.ImportRemover.removeImports(n,e),3);case 3:return b=a.yieldResult,d=b.source,m=b.removedImports,a.yield(k.changeSource(d),4);case 4:m.forEach(function(g){return delete k.recorder[g.local]}),a.jumpToEnd()}})};Zg.prototype._localDeclForRefAt=function(e){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(k.resolvedScope(),2);n=d.yieldResult;b=Ff.query.refWithDeclAt(e,
n);return d.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Zg.prototype._localDeclForName=function(e){var k=this,n,b,d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(k.resolvedScope(),2);n=v.yieldResult;d=$jscomp.makeIterator(n.resolvedRefMap.values());for(m=d.next();!m.done;m=d.next())if(g=a=m.value,l=g.ref,r=l.name,e===r){b=a;break}return v.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Zg.prototype._importForNSRefAt=function(e){var k=
this,n,b,d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(k.resolvedScope(),2);n=y.yieldResult;b=n.node;d=Ff.query.nodesAtIndex(b,e);if(2>d.length)return y.return([null,null]);m=d[d.length-1];a=d[d.length-2];if("Identifier"!=m.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return y.return([null,null]);g=n.resolvedRefMap.get(a.object)||{};l=g.decl;if(!l||"ImportDeclaration"!==l.type)return y.return([null,null]);
r=a.object.name;v=l.specifiers.find(function(A){return A.local.name===r});return y.return("ImportNamespaceSpecifier"!==v.type?[null,null]:[l,v.local,m.name])})};Zg.prototype._resolveImportedDecl=function(e){var k=this,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!e)return r.return([]);n=e.id;b=n.name;return r.yield(k.imports(),2);case 2:d=r.yieldResult;m=d.find(function(v){return v.local==b});if(!m){r.jumpTo(3);break}a=Ff.module(k.System,
m.fromModule,k.id);g=[e];l=g.concat;return r.yield(a.bindingPathForExport(m.imported),4);case 4:return r.return(l.call(g,r.yieldResult));case 3:return r.return([e])}})};Zg.prototype.bindingPathFor=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k._localDeclForName(e),2):4!=b.nextAddress?(n=b.yieldResult)?b.yield(k._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};Zg.prototype.bindingPathForExport=function(e){var k=
this,n,b,d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return l.yield(k.resolvedScope(),2);case 2:return l.yield(k.exports(),3);case 3:n=l.yieldResult;b=n.find(function(r){return r.exported===e});if(!b.fromModule)return l.return(k._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&b.decl?k:null}));d=Ff.module(k.System,b.fromModule,k.id);m={decl:b.node,id:b.declId,declModule:k};a=[m];g=a.concat;return l.yield(d.bindingPathForExport(b.imported),
5);case 5:return l.return(g.call(a,l.yieldResult))}})};Zg.prototype.bindingPathForRefAt=function(e){var k=this,n,b,d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(k._localDeclForRefAt(e),2);case 2:n=A.yieldResult;if(!n){A.jumpTo(3);break}return A.yield(k._resolveImportedDecl(n),4);case 4:return A.return(A.yieldResult);case 3:return b=$jscomp,d=b.makeIterator,A.yield(k._importForNSRefAt(e),5);case 5:m=d.call(b,A.yieldResult);
a=m.next().value;g=m.next().value;l=m.next().value;if(!a)return A.return([]);r=Ff.module(k.System,a.source.value,k.id);v=[{decl:a,declModule:k,id:g}];y=v.concat;return A.yield(r.bindingPathForExport(l),6);case 6:return A.return(y.call(v,A.yieldResult))}})};Zg.prototype.definitionForRefAt=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.bindingPathForRefAt(e),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};
Zg.prototype.ensureRecord=function(){var e=this.System,k=e._loader.moduleRecords;return k[this.id]?k[this.id]:k[this.id]={name:this.id,exports:e.newModule({}),dependencies:[],importers:[],setters:[]}};Zg.prototype.record=function(){var e=this.System._loader.moduleRecords[this.id];if(!e)return null;e.hasOwnProperty("__lively_modules__")||(e.__lively_modules__={evalOnlyExport:{}});return e};Zg.prototype.updateRecord=function(e){var k=this.record();if(!k)throw Error("es6 environment global of "+this.id+
": module not loaded, cannot get export object!");k.locked=!0;try{return e(k)}finally{k.locked=!1}};Zg.prototype.search=function(e,k){var n=this,b,d,m,a,g,l,r,v,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return k=Object.assign({excludedModules:[]},k),k.excludedModules.some(function(L){return"string"===typeof L?L===n.id:L instanceof RegExp?L.test(n.id):"function"===typeof L?L(n.id):!1})?M.return([]):M.yield(n.source(),2);b=M.yieldResult;e instanceof
RegExp?(m="g",e.ignoreCase&&(m+="i"),e.multiline&&(m+="m"),d=RegExp(e.source,m)):d=RegExp(e,"g");for(g=[];null!==(a=d.exec(b));)g.push([a.index,a[0].length]);r=l=0;v=1;for(y=0;l<b.length&&r<g.length;l++)"\n"==b[l]&&(v++,y=l+1),A=$jscomp.makeIterator(g[r]),E=A.next().value,F=A.next().value,l===E&&(G=b.slice(y).indexOf("\n"),G=-1===G?b.length:G+y,I=n.package(),g[r]={moduleId:n.id,packageName:I?I.name:void 0,pathInPackage:I?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:F,line:v,column:l-y,lineString:1E3<
G-y?"..."+b.slice(l-10,l+100)+"...":b.slice(y,G)},r++);return M.return(g)})};Zg.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Zg.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch","getComputedStyle"].concat($jscomp.arrayFromIterable(Ff.GlobalInjector.getGlobals(this._source))).concat(Ff.query.knownGlobals)}},
recorder:{configurable:!0,enumerable:!0,set:function(e){return this._recorder=e},get:function(){if(this._recorder)return this._recorder;var e=this.System,k=this;if(!Ff.globalProps.initialized){Ff.globalProps.initialized=!0;for(var n in e.global)if(e.global.__lookupGetter__(n)||"closed"==n)Ff.globalProps.descriptors[n]={value:void 0,configurable:!0,writable:!0}}n={};if(e.get("@system-env").node){var b=Ff._require.bind(null,this);b.resolve=Ff._resolve.bind(null,this);n.require={configurable:!0,writable:!0,
value:b}}b={};return this._recorder=Object.create(e.global,Object.assign({},Ff.globalProps.descriptors,{},n,(b.System={configurable:!0,writable:!0,value:e},b.__currentLivelyModule={value:k},b[Ff.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:Ff.classRuntime.initializeClass},b[this.varDefinitionCallbackName]={value:function(d,m,a,g,l){l=l||{};l.kind=m;return k.define(d,a,!1,l)}},b._moduleExport={value:function(d,m){Ff.scheduleModuleExportsChange(e,k.id,d,m,!0)}},b._moduleImport=
{value:function(d,m){var a=e.decanonicalize(d,k.id),g=e.get(a);if(g){k.addDependencyToModuleRecord(Ff.module(e,a),function(l){return Object.assign(k.recorder,l)});if(void 0==m)return g;g.hasOwnProperty(m)||console.warn("import from "+g+": Has no export "+m+"!");return g[m]}console.warn("import of "+m+" failed: "+d+" (tried as "+k.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});Ff.ModuleInterface=Zg;Ff.default=Ao;var We=
lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");We.canonicalURL=function(e){var k=e.match(/([^:]+:\/\/)(.*)/);if(k){var n=k[1];e=k[2]}e=e.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+e};We.prepareNodejsCaching=function(){var e=System._nodeRequire("fs"),k=System._nodeRequire("path"),n="win32"===process.platform;k=n||"/"!==process.cwd()?process.cwd():k.join(process.env.HOME,".lively.next");We.nodejsCacheDirURL=n?"file:///"+k.replace(/\\/g,"/"):"file://"+k;e.existsSync(k)||
e.mkdirSync(k)};We.getExceptions=Lu;We.setExceptions=Mu;We.prepareCodeForCustomCompile=Nu;We.prepareTranslatedCodeForSetterCapture=Us;We.getCachedNodejsModule=function(e,k){try{var n=e._nodeRequire("module").Module,b=n._resolveFilename(k.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));return n._cache[b]}catch(d){e.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",k.name)}return null};We.addNodejsWrapperSource=function(e,k){var n=We.getCachedNodejsModule(e,
k);if(n)return k.metadata.format="esm",k.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+We.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return We.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),e.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",k.name),!0;e.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",
k.name);return!1};We.customTranslate=function(e,k){var n=this,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:b=n;d=b.debug;if(a=(m=k.metadata)&&m.hasOwnProperty("instrument")&&!m.instrument||We.exceptions.some(function(Ea){return Ea(k.name)}))return d&&console.log("[lively.modules customTranslate ignoring] %s",k.name),ra.return(e(k));if(We.isNode&&We.addNodejsWrapperSource(b,k))return d&&console.log("[lively.modules] loaded %s from nodejs cache",
k.name),ra.return(e(k));g=Date.now();l=We.detectModuleFormat(k.source,m);r=We.module(b,k.name);v=!1;y="esm"===l;r.setSource(k.source);ra.setCatchFinallyBlocks(2);A=b.useModuleTranslationCache;E=b.global.indexedDB;F=A&&String(We.string.hashCode(k.source));if(A&&E&&y)return G=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new We.BrowserModuleTranslationCache),ra.yield(G.fetchStoredModuleSource(k.name),8);if(!(We.isNode&&A&&y)){ra.jumpTo(5);break}G=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new We.NodeModuleTranslationCache);return ra.yield(G.fetchStoredModuleSource(k.name),7);case 7:if((I=ra.yieldResult)&&I.hash==F&&I.timestamp>=We.NodeModuleTranslationCache.earliestDate&&I.source)return m.format="register",m.deps=[],d&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",k.name,Date.now()-g),ra.return(Promise.resolve(I.source));ra.jumpTo(5);break;case 8:if((I=ra.yieldResult)&&I.hash==F&&I.timestamp>=We.BrowserModuleTranslationCache.earliestDate&&
I.source)return m.format="register",m.deps=[],d&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",k.name,Date.now()-g),ra.return(Promise.resolve(I.source));case 5:ra.leaveTryBlock(3);break;case 2:M=ra.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+M.stack);case 3:return L={},y?(r.recorderName="__lvVarRecorder",r.recorder===b.global&&r.unloadEnv(),k.metadata.format="esm",S=We.prepareCodeForCustomCompile(b,
k.source,k.name,r,d),L=S.options,R=S.source,k.source=R,v=k.metadata["lively.modules instrumented"]=!0,d&&console.log("[lively.modules] loaded %s as es6 module",k.name)):"global"===k.metadata.format&&(r.recorderName="System.global",r.recorder=b.global,k.metadata.format="global",aa=We.prepareCodeForCustomCompile(b,k.source,k.name,r,d),L=aa.options,R=aa.source,k.source=R,v=k.metadata["lively.modules instrumented"]=!0,d&&console.log("[lively.modules] loaded %s as instrumented global module",k.name)),
v||d&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",k.name,k.metadata.format),ra.return(e(k).then(function(Ea){var K,Z,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:0===Ea.indexOf("System.register(")&&(d&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",k.name),Ea=We.prepareTranslatedCodeForSetterCapture(b,Ea,k.name,r,L,d));if(We.isNode&&A&&y)return K=
b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new We.NodeModuleTranslationCache),V.setCatchFinallyBlocks(8),V.yield(K.cacheModuleSource(k.name,F,Ea),10);if(!(A&&E&&y)){V.jumpTo(3);break}K=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new We.BrowserModuleTranslationCache);V.setCatchFinallyBlocks(5);return V.yield(K.cacheModuleSource(k.name,F,Ea),7);case 7:d&&console.log("[lively.modules customTranslate] stored cached version for %s",k.name);V.leaveTryBlock(3);
break;case 5:Z=V.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+Z.stack);V.jumpTo(3);break;case 10:d&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",k.name);V.leaveTryBlock(3);break;case 8:U=V.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+U.stack);case 3:return d&&console.log("[lively.modules customTranslate] done %s after %sms",k.name,Date.now()-g),V.return(Ea)}})}))}})};
We.instrumentSourceOfEsmModuleLoad=gi;We.instrumentSourceOfGlobalModuleLoad=Ck;We.wrapModuleLoad=Yj;We.unwrapModuleLoad=En;We.parse=ye;We.nodes=$w;We.isValidIdentifier=Xx;var yV=We.nodes;We.funcCall=yV.funcCall;We.member=yV.member;We.literal=yV.literal;We.evalCodeTransform=Ks;We.evalCodeTransformOfSystemRegisterSetters=Au;We.arr=ng;We.string=Li;We.properties=Uo;We.module=Ao;We.detectModuleFormat=qN;We.resource=w;We.installHook=Ic;We.removeHook=uc;We.isHookInstalled=wd;We.classToFunctionTransform=
Gi;We.isNode=System.get("@system-env").node;var IH=function(){};IH.prototype.cacheModuleSource=function(e,k,n){throw Error("not yet implemented");};IH.prototype.fetchStoredModuleSource=function(e){throw Error("not yet implemented");};IH.prototype.deleteCachedData=function(e){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(IH,{earliestDate:{configurable:!0,enumerable:!0,get:function(){return+new Date("Sun Nov 06 2016 16:00:00 GMT-0800 (PST)")}}});We.ModuleTranslationCache=
IH;We.nodejsCacheDirURL=null;var ex=function(){return We.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(ex,We.ModuleTranslationCache);ex.prototype.ensurePath=function(e){var k=this,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(k.moduleCacheDir.join(e).exists(),2);case 2:if(r.yieldResult)return r.return();n="";m=$jscomp.makeIterator(e.split("/"));a=m.next();case 3:if(a.done){r.jumpTo(0);break}g=a.value;
n+=g+"/";b=k.moduleCacheDir.join(n);return r.yield(b.exists(),6);case 6:if(r.yieldResult){r.jumpTo(7);break}r.setCatchFinallyBlocks(8);return r.yield(b.mkdir(),10);case 10:r.leaveTryBlock(7);break;case 8:if(l=r.enterCatchBlock(),"EEXIST"!=l.code)throw l;case 7:return b=We.resource("file://"+n+"/package.json"),r.yield(b.exists(),11);case 11:if(!r.yieldResult){r.jumpTo(4);break}return r.yield(b.read(),13);case 13:return d=r.yieldResult,r.yield(k.moduleCacheDir.join(n+"/package.json").write(d),4);case 4:a=
m.next(),r.jumpTo(3)}})};ex.prototype.dumpModuleCache=function(){var e=this,k,n,b,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:n=g.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(k=n.getNext())){g.jumpTo(0);break}b=We.resource("file://"+k);return g.yield(b.exists(),5);case 5:if(!g.yieldResult){g.jumpTo(2);break}d=e;m=d.cacheModuleSource;a=k;return g.yield(b.read(),8);case 8:return g.yield(m.call(d,a,"NO_HASH",g.yieldResult),
2)}})};ex.prototype.getFileName=function(e){return e.match(/([^\/]*.)(\.js)?$/)[0]};ex.prototype.fetchStoredModuleSource=function(e){var k=this,n,b,d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return e=e.replace("file://",""),n=k.getFileName(e),b=e.replace(n,""),d=k.moduleCacheDir.join(e),r.yield(d.exists(),2);case 2:return r.yieldResult?r.yield(d.stat(),3):r.return(null);case 3:return m=r.yieldResult,a=m.birthtime,r.yield(d.read(),4);case 4:return g=
r.yieldResult,r.yield(k.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return l=r.yieldResult,r.return({source:g,timestamp:a,hash:l})}})};ex.prototype.cacheModuleSource=function(e,k,n){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=e.replace("file://",""),d=b.getFileName(e),m=e.replace(d,""),a.yield(b.ensurePath(m),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(e).write(n),3):a.yield(b.moduleCacheDir.join(m+"/.hash_"+d).write(k),0)})};
ex.prototype.deleteCachedData=function(e){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(e=e.replace("file://",""),n=k.getFileName(e),e.replace(n,""),b=k.moduleCacheDir.join(e),d.yield(b.exists(),2)):3!=d.nextAddress?d.yieldResult?d.yield(b.remove(),3):d.return(!1):d.return(!0)})};$jscomp.global.Object.defineProperties(ex.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){We.nodejsCacheDirURL||We.prepareNodejsCaching();return We.resource(We.nodejsCacheDirURL+
"/.module_cache/")}}});We.NodeModuleTranslationCache=ex;var fz=function(e){e=void 0===e?"lively.modules-module-translation-cache":e;var k=We.ModuleTranslationCache.call(this)||this;k.version=2;k.sourceCodeCacheStoreName="sourceCodeStore";k.dbName=e;k.db=k.openDb();return k};$jscomp.inherits(fz,We.ModuleTranslationCache);fz.prototype.openDb=function(){var e=this,k=System.global.indexedDB.open(this.version);return new Promise(function(n,b){k.onsuccess=function(d){n(this.result)};k.onerror=function(d){return b(d.target)};
k.onupgradeneeded=function(d){return d.currentTarget.result.createObjectStore(e.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};fz.prototype.deleteDb=function(){var e=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(k,n){e.onerror=function(b){return n(b.target)};e.onsuccess=function(b){return k(b)}})};fz.prototype.closeDb=function(){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(e.db,2);k=b.yieldResult;
n=k.close();return b.return(new Promise(function(d,m){n.onsuccess=function(a){d(this.result)};n.onerror=function(a){return m(a.target.errorCode)}}))})};fz.prototype.cacheModuleSource=function(e,k,n){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.db,2);d=m.yieldResult;return m.return(new Promise(function(a,g){var l=d.transaction([b.sourceCodeCacheStoreName],"readwrite"),r=l.objectStore(b.sourceCodeCacheStoreName),v=Date.now();r.put({moduleId:e,
hash:k,source:n,timestamp:v});l.oncomplete=a;l.onerror=g}))})};fz.prototype.fetchStoredModuleSource=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(d,m){var a=n.transaction([k.sourceCodeCacheStoreName]).objectStore(k.sourceCodeCacheStoreName).get(e);a.onerror=m;a.onsuccess=function(g){return d(a.result)}}))})};fz.prototype.deleteCachedData=function(e){var k=this,
n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(d,m){var a=n.transaction([k.sourceCodeCacheStoreName],"readwrite").objectStore(k.sourceCodeCacheStoreName).delete(e);a.onerror=m;a.onsuccess=function(g){return d(a.result)}}))})};We.BrowserModuleTranslationCache=fz;We.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");We.exceptions=[function(e){return!e.endsWith(".js")&&
!e.endsWith(".jsx")&&!e.startsWith("https://jspm.dev")},function(e){return e.endsWith("dist/acorn.js")||e.endsWith("dist/escodegen.browser.js")||e.endsWith("bowser.js")||e.endsWith("TweenMax.min.js")},function(e){return e.endsWith("babel-core/browser.js")||e.endsWith("system.src.js")||e.includes("systemjs-plugin-babel")}];We.pendingConfigs=[];We.configInitialized=!1;We.prepareCodeForCustomCompile=Nu;We.prepareCodeForCustomCompile=Nu;We.prepareTranslatedCodeForSetterCapture=Us;We.prepareTranslatedCodeForSetterCapture=
Us;We.wrapModuleLoad=Yj;We.wrapModuleLoad=Yj;We.unwrapModuleLoad=En;We.unwrapModuleLoad=En;We.getExceptions=Lu;We.getExceptions=Lu;We.setExceptions=Mu;We.setExceptions=Mu;We.instrumentSourceOfEsmModuleLoad=gi;We.instrumentSourceOfEsmModuleLoad=gi;We.instrumentSourceOfGlobalModuleLoad=Ck;We.instrumentSourceOfGlobalModuleLoad=Ck;var Hi=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");Hi.fetchResource=function(e,k){var n=this,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:b=
n;d=b.resource(k.name);m=b.get("@system-env").node&&!d.isNodeJSFileResource;if(!m){R.jumpTo(2);break}return R.yield(bpa(k.name),3);case 3:d=R.yieldResult;case 2:if(!d)return R.return(e(k));R.setCatchFinallyBlocks(4);if(!d.isResource){l=d;R.jumpTo(6);break}return R.yield(d.read(),7);case 7:l=R.yieldResult;case 6:a=l;R.leaveTryBlock(5);break;case 4:g=r=R.enterCatchBlock();case 5:if(!g||!b.get("@system-env").browser){R.jumpTo(8);break}v=d.url.startsWith("http");y=!d.url.startsWith(document.location.origin);
if(!v||!y){R.jumpTo(8);break}R.setCatchFinallyBlocks(10);return R.yield(d.makeProxied().read(),12);case 12:a=R.yieldResult;g=null;R.leaveTryBlock(8);break;case 10:R.enterCatchBlock();case 8:if(g)throw g;if(!m){R.jumpTo(13);break}A=a.headers||{};E=A._headers;F=$jscomp.makeIterator(E&&E["content-encoding"]||[]);G=F.next().value;return"br"==G?(I=Hi.Buffer,M=I.from,L=Hi.brotli,S=L.decompress,R.yield(a.buffer(),17)):R.yield(a.text(),16);case 16:a=R.yieldResult;R.jumpTo(13);break;case 17:a=M.call(I,S.call(L,
R.yieldResult)).toString();case 13:return R.return(a)}})};Hi.livelyProtocol=function(e,k){var n=k.match(Hi.livelyURLRe);if(!n)return e(k);e=$jscomp.makeIterator(n);e.next();e.next();var b=e.next().value;return{read:function(){var d="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(d?d.textString:"/*Could not locate "+b+"*/")},write:function(d){var m="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!m)return Promise.reject("Could not save morph "+b);m.textString=
d;return Promise.resolve(this)}}};Hi.wrapResource=xA;Hi.unwrapResource=yA;Hi.resource=w;Hi.Resource=gh;Hi.installHook=Ic;Hi.removeHook=uc;Hi.isHookInstalled=wd;Hi.brotli=Hi.brotli||void 0;if(System.get("@system-env").node){var bpa=System._nodeRequire("node-fetch");Hi.brotli=System._nodeRequire("brotli")}Hi.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;Hi.wrapResource=xA;Hi.wrapResource=xA;Hi.unwrapResource=yA;Hi.unwrapResource=yA;var GB=function(){return Hi.Resource.apply(this,arguments)||this};$jscomp.inherits(GB,
Hi.Resource);GB.prototype.read=function(){var e=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=e.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(k);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+k+"*/"))})};GB.prototype.write=function(e){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){n=k.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return d.return(Promise.reject("Could not save morph "+
n));b.textString=e;return d.return(Promise.resolve(k))})};GB.prototype.exists=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return("undefined"!==typeof $world&&$world.getMorphWithId(e.morphId))})};GB.prototype.remove=function(){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){"undefined"!==typeof $world&&$world.getMorphWithId(e.morphId).remove();return k.return(!0)})};$jscomp.global.Object.defineProperties(GB.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var e=this.url.match(Hi.livelyURLRe);e=$jscomp.makeIterator(e);e.next();e.next();return e.next().value}}});Hi.LivelyResource=GB;var zV={name:"lively.modules",matches:function(e){return e.match(Hi.livelyURLRe)},resourceClass:Hi.LivelyResource};Hi.resourceExtension=zV;Hi.resourceExtension=zV;Hi.resourceExtension=zV;Hi.registerExtension=D;Hi.registerExtension(Hi.resourceExtension);var le=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
le.wrapModuleResolution=hi;le.unwrapModuleResolution=Mm;le.livelySystemEnv=hp;le.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};le.nameOfSystem=function(e){return Object.keys(le.systems()).detect(function(k){return le.systems()[k]===e})};le.getSystem=Vs;le.removeSystem=zA;le.makeSystem=function(e){return le.prepareSystem(new System.constructor,e)};le.prepareSystem=IJ;le.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(e,k){var n=k.split("=");k=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));e[k]=n;return e},{}):{}};le.preNormalize=function(e,k,n){".."===k&&(k="../index.js");k=k.replace(le.doubleSlashRe,function(g){return":"===g[0]?g:g[0]+"/"});var b=e.get("@lively-env").packageRegistry;if(b){var d=n&&b.findPackageHavingURL(n);if(d){var m=d.map,a=d.url;if(m=m&&m[k]||e.map[k])"object"===typeof m&&(m=le.normalize_doMapWithObject(m,
d,e)),"string"===typeof m&&""!==m&&(k=m),k.startsWith(".")&&(k=le.urlResolve(le.join(a,k)))}}b&&(e=b.resolvePath(k,n))&&(e.endsWith("/")&&!k.endsWith("/")&&(e=e.slice(0,-1)),!e.endsWith("/")&&k.endsWith("/")&&(e+="/"),k=e);return k};le.postNormalize=function(e,k,n){n=k.replace(le.jsExtRe,"");if(k.endsWith("/"))return k;var b=e.get("@lively-env").packageRegistry;if(b){if(e=b.findPackageWithURL(n))return e=(e.main||"index.js").replace(le.dotSlashStartRe,""),k=n.replace(le.trailingSlashRe,"")+"/"+e}else if(n in
e.packages&&(e=e.packages[n].main))return k=n.replace(le.trailingSlashRe,"")+"/"+e.replace(le.dotSlashStartRe,"");return(n=k.match(le.jsonJsExtRe))?n[1]:k};le.checkExistence=function(e,k){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){k._fileCheckMap=k._fileCheckMap||{};if(e in k._fileCheckMap)return d.return(k._fileCheckMap[e]);n=k._fileCheckMap;b=e;return d.yield(le.resource(e).exists(),2)}return d.return(n[b]=d.yieldResult)})};le.normalizeHook=function(e,
k,n,b){var d=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(n&&"cjs"==k)return y.return("cjs");m=d;a=le.preNormalize(m,k,n);return y.yield(e(a,n,b),2);case 2:g=y.yieldResult;l=le.postNormalize(m,g||a,!1);r=l.startsWith("file:");m.debug&&console.log("[normalize] "+k+" => "+l);if(le.jsExtRe.test(k)||le.jsxExtRe.test(k)||le.jsonExtRe.test(l)||le.nodeModRe.test(l)||le.nodeExtRe.test(l)||m.loads&&m.loads[l]||!le.jsExtRe.test(l)){y.jumpTo(3);
break}return y.yield(le.checkExistence(l,m),4);case 4:if(y.yieldResult)return y.return(l);v=l.replace(".js","/index.js");return y.yield(le.checkExistence(v,m),5);case 5:return y.yieldResult||!r?y.return(v):y.return(l.replace(".js","/index.node"));case 3:return le.jsxJsExtRe.test(l)&&(l=l.replace(".jsx.js",".jsx")),y.return(l)}})};le.decanonicalizeHook=function(e,k,n,b){if(k&&k.endsWith("!cjs")){k=k.replace("!cjs","");var d="!cjs"}var m=le.preNormalize(this,k,n);e=e(m,n,b);e=le.postNormalize(this,
e,!0);d&&(e+=d);this.debug&&console.log("[normalizeSync] "+k+" => "+e);return e};le.locateHook=function(e,k){var n,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=$jscomp.makeIterator(k.name.split("!")),b=n.next().value,n.next(),k.name=b,m.yield(e(k),2);d=m.yieldResult;return m.return(d)})};le.normalize_doMapWithObject=function(e,k,n){k=n.get(k.map["@env"]||"@system-env");var b;for(b in e){n="~"==b[0];var d=n?b.substr(1):b;var m=k;for(d=d.split(".");d.length;)m=
m[d.shift()];if(!n&&m||n&&!m){var a=e[b];break}}if(a&&"string"!=typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};le.normalize_packageOfURL=function(e,k){var n=Object.keys(k.packages||{}).map(function(b){return 0===e.indexOf(b)?{url:b,penalty:e.slice(b.length).length}:null}).filter(function(b){return!!b});return(k=(n=n.length?n.reduce(function(b,d){return b.penalty>d.penalty?d:b}).url:null)&&k.packages[n])?{systemPackage:k,packageURL:n}:null};le.newModule_volatile=
function(e,k){var n=Object.freeze;Object.freeze=function(b){return b};e=e(k);Object.freeze=n;return e};le.printSystemConfig=JJ;le.instantiate_triggerOnLoadCallbacks=function(e,k){var n=this;return e(k).then(function(b){var d={};le.promise.waitFor(6E4,function(){return n.get(k.name)},d).then(function(m){if(m===d)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+k.name+" timed out");else{m=k.name;for(var a=le.classHolder.module(n,m),g=n.get("@lively-env").onLoadCallbacks,l=g.length;l--;){var r=
g[l],v=r.moduleName,y=r.callback;if((r.resolved?v:n.decanonicalize(v))===m){g.splice(l,1);try{y(a)}catch(A){console.error(A)}}}le.emit("lively.modules/moduleloaded",{module:k.name},Date.now(),n)}});return b})};le.whenLoaded=KJ;le.loadedModules=LJ;le.knownModuleNames=MJ;le.searchLoadedModules=GQ;le.arr=ng;le.obj=Ng;le.promise=xh;le.removeHook=uc;le.installHook=Ic;le.isHookInstalled=wd;le.classHolder=dx;le.isNode=System.get("@system-env").node;le.GLOBAL="undefined"!==typeof window?window:"undefined"!==
typeof global?global:"undefined"!==typeof self?self:void 0;le.defaultOptions={notificationLimit:null};le.wrapModuleResolution=hi;le.wrapModuleResolution=hi;le.unwrapModuleResolution=Mm;le.unwrapModuleResolution=Mm;le.wrapModuleLoad=Yj;le.wrapResource=xA;le.emit=Vl;le.join=GH;le.urlResolve=Ef;le.resource=w;le.dotSlashStartRe=/^\.?\//;le.trailingSlashRe=/\/$/;le.jsExtRe=/\.js$/;le.jsxExtRe=/\.jsx$/;le.nodeExtRe=/\.node$/;le.jsonExtRe=/\.json$/;le.jsonJsExtRe=/(.*\.json)\.js$/i;le.jsxJsExtRe=/(.*\.jsx)\.js$/i;
le.doubleSlashRe=/.\/{2,}/g;le.nodeModRe=/@node.*/;le.whenLoaded=KJ;le.whenLoaded=KJ;le.getSystem=Vs;le.getSystem=Vs;le.removeSystem=zA;le.removeSystem=zA;le.prepareSystem=IJ;le.prepareSystem=IJ;le.printSystemConfig=JJ;le.printSystemConfig=JJ;le.livelySystemEnv=hp;le.livelySystemEnv=hp;le.loadedModules=LJ;le.loadedModules=LJ;le.knownModuleNames=MJ;le.knownModuleNames=MJ;le.searchLoadedModules=GQ;le.searchLoadedModules=GQ;var f$,gD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,wm=f$={};try{var oy="function"==typeof setTimeout?setTimeout:HQ}catch(e){oy=HQ}try{var py="function"==typeof clearTimeout?clearTimeout:IQ}catch(e){py=IQ}!0;var AA,Cw=[],hD=!1,NJ=-1;wm.nextTick=function(e){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];Cw.push(new F_(e,k));1!==Cw.length||hD||D_(E_)};F_.prototype.run=function(){(this||gD).fun.apply(null,(this||gD).array)};wm.title="browser";wm.browser=!0;wm.env={};wm.argv=[];
wm.version="";wm.versions={};wm.on=Dw;wm.addListener=Dw;wm.once=Dw;wm.off=Dw;wm.removeListener=Dw;wm.removeAllListeners=Dw;wm.emit=Dw;wm.prependListener=Dw;wm.prependOnceListener=Dw;wm.listeners=function(e){return[]};wm.binding=function(e){throw Error("process.binding is not supported");};wm.cwd=function(){return"/"};wm.chdir=function(e){throw Error("process.chdir is not supported");};wm.umask=function(){return 0};var Zj=f$,H_={},G_=!1,J_={},I_=!1,Ou={},K_=!1,M_={},L_=!1,O_={},N_=!1,gg="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Q_={},P_=!1,S_={},R_=!1,U_={},T_=!1,W_={},V_=!1,Y_={},X_=!1,$_={},Z_=!1,b0={},a0=!1,d0={},c0=!1,g0={},f0=!1,i0={},h0=!1,l0={},k0=!1,n0={},m0=!1,p0={},o0=!1,OQ={},q0=!1,Jl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,PQ={},r0=!1,Aj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,t0={},s0=!1,v0={},u0=!1,x0={},w0=!1,z0={},y0=!1,B0={},A0=!1,D0={},C0=!1,F0={},E0=!1,H0=
{},G0=!1,J0={},I0=!1,L0={},K0=!1,N0={},M0=!1,P0={},O0=!1,R0={},Q0=!1,T0={},S0=!1,V0={},U0=!1,X0={},W0=!1,Z0={},Y0=!1,a1={},$0=!1,c1={},b1=!1,e1={},d1=!1,g1={},f1=!1,i1={},h1=!1,g$={},h$=!1,rN=function(){if(h$)return g$;h$=!0;var e=iD();return g$={re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:OJ().SEMVER_SPEC_VERSION,SemVer:ip(),compareIdentifiers:JQ().compareIdentifiers,rcompareIdentifiers:JQ().rcompareIdentifiers,parse:jD(),valid:gfa(),clean:lfa(),inc:hfa(),diff:mfa(),major:ifa(),minor:nfa(),
patch:ofa(),prerelease:pfa(),compare:Ws(),rcompare:qfa(),compareLoose:rfa(),compareBuild:QQ(),sort:sfa(),rsort:tfa(),gt:QJ(),lt:MQ(),eq:LQ(),neq:e0(),gte:KQ(),lte:NQ(),cmp:j0(),coerce:jfa(),Comparator:RJ(),Range:Xs(),satisfies:SJ(),toComparators:ufa(),maxSatisfying:vfa(),minSatisfying:wfa(),minVersion:xfa(),validRange:kfa(),outside:RQ(),gtr:yfa(),ltr:zfa(),intersects:Afa(),simplifyRange:Bfa(),subset:Cfa()}}(),uh=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");
uh.isAbsolute=function(e){return e.startsWith("/")||e.startsWith("http:")||e.startsWith("https:")||e.startsWith("file:")||e.match(uh.urlStartRe)};uh.ensureResource=function(e){return e.isResource?e:uh.resource(e)};uh.semver=rN;uh.arr=ng;uh.obj=Ng;uh.promise=xh;uh.getPackage=pf;uh.Package=Uj;uh.resource=w;uh.isURL=te;uh.classHolder=dx;uh.urlStartRe=/^[a-z\.-_\+]+:/i;var tj=function(e,k){k=void 0===k?{}:k;this.System=e;this.packageBaseDirs=k.packageBaseDirs||[];this.devPackageDirs=k.devPackageDirs||
[];this.individualPackageDirs=k.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};tj.ofSystem=function(e){var k=e.get("@lively-env").packageRegistry;k||(k=e["__lively.modules__packageRegistry"]=new this(e));return k};tj.forDirectory=function(e,k){return new this(e,{packageBaseDirs:[uh.ensureResource(k)]})};tj.fromJSON=function(e,k){return(new this(e)).fromJSON(k)};tj.prototype.resetByURL=function(){this._byURL=null};tj.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};
tj.prototype.toJSON=function(){function e(v){v=v.url;return v.startsWith(k.baseURL)?v.slice(k.baseURL.length).replace(/^\//,""):v}var k=this.System,n=this.packageMap,b=this.individualPackageDirs,d=this.devPackageDirs,m=this.packageBaseDirs,a={},g;for(g in n){var l=n[g];a[g]={};a[g].latest=l.latest;a[g].versions={};for(var r in l.versions)a[g].versions[r]=l.versions[r].toJSON()}return{packageMap:a,individualPackageDirs:b.map(e),devPackageDirs:d.map(e),packageBaseDirs:m.map(e)}};tj.prototype.fromJSON=
function(e){function k(v){return uh.isURL(v)?uh.resource(v):uh.resource(b.baseURL).join(v)}var n={},b=this.System,d=uh.resource(b.baseURL),m;for(m in e.packageMap){var a=e.packageMap[m];n[m]={};n[m].latest=a.latest;n[m].versions={};for(var g in a.versions){var l=a.versions[g],r=l.url;uh.isAbsolute(r)||(r=d.join(r).url);l=uh.Package.fromJSON(b,Object.assign({},l,{url:r}));n[m].versions[g]=l}}this.packageMap=n;this.individualPackageDirs=e.individualPackageDirs.map(k);this.devPackageDirs=e.devPackageDirs.map(k);
this.packageBaseDirs=e.packageBaseDirs.map(k);this.resetByURL();uh.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};tj.prototype.updateFromJSON=function(e){var k=this.packageMap,n;for(n in e.packageMap){var b=e.packageMap[n];k[n]||(k[n]={});k[n].latest?uh.semver.gt(b.latest,k[n].latest)&&(k[n].latest=b.latest):k[n].latest;k[n].versions||(k[n].versions={});var d=this.System,m=uh.resource(d.baseURL),a;for(a in b.versions){var g=b.versions[a],l=g.url;uh.isAbsolute(l)||(l=m.join(l).url);
g=new uh.Package.fromJSON(d,Object.assign({},g,{url:l}));k[n].versions[a]=g}}this.resetByURL();uh.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};tj.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};tj.prototype.isReady=function(){return!this._readyPromise};tj.prototype.withPackagesDo=function(e){for(var k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)e(n[b])}};tj.prototype.findPackage=function(e){for(var k in this.packageMap){var n=
this.packageMap[k].versions,b;for(b in n){var d=n[b];if(e(d))return d}}return null};tj.prototype.filterPackages=function(e){var k=[];this.withPackagesDo(function(n){return e(n)&&k.push(n)});return k};tj.prototype.allPackages=function(){var e=[],k;for(k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)e.push(n[b])}return e};tj.prototype.sortPackagesByVersion=function(e){return e.sort(function(k,n){return uh.semver.compare(k.version,n.version,!0)})};tj.prototype.matches=function(e,
k,n){var b=e.version;return e.name!==k?!1:!n||uh.semver.validRange(b||"",!0)&&uh.semver.satisfies(b,n,!0)?!0:!1};tj.prototype.coversDirectory=function(e){e=uh.ensureResource(e).asDirectory();var k=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(d){return d.equals(e)}))return"individualPackageDirs";if(n.some(function(d){return d.equals(e)}))return"devPackageDirs";var b=e.parent().parent();return k.some(function(d){return d.equals(b)})?this.allPackages().find(function(d){return uh.ensureResource(d.url).equals(e)})?
"packageCollectionDirs":"maybe packageCollectionDirs":null};tj.prototype.lookup=function(e,k){var n=this,b=this.packageMap[e];if(!b)return null;if(!k||"latest"===k)return b.versions[b.latest];if(!uh.semver.validRange(k,!0))throw Error("PackageRegistry>>lookup of "+e+": Invalid version - "+k);b=uh.obj.values(b.versions).filter(function(d){return n.matches(d,e,k)});return 1>=b.length?b[0]:uh.arr.last(this.sortPackagesByVersion(b))};tj.prototype.findPackageDependency=function(e,k,n){n||(n=e.dependencies[k]||
e.devDependencies[k]);uh.semver.validRange(n,!0)||(n=null);return this.lookup(k,n)};tj.prototype.findPackageWithURL=function(e){e.isResource&&(e=e.url);e.endsWith("/")&&(e=e.slice(0,-1));return this.byURL[e]};tj.prototype.findPackageHavingURL=function(e){e.isResource&&(e=e.url);e.endsWith("/")&&(e=e.slice(0,-1));var k=Infinity,n=null,b=this.byURL,d;for(d in b)if(0===e.indexOf(d)){var m=e.slice(d.length).length;m>=k||(k=m,n=b[d])}return n};tj.prototype.findPackageForPath=function(e,k){if(uh.isAbsolute(e))return this.findPackageHavingURL(e);
if(e.startsWith("."))return null;e=$jscomp.makeIterator(e.split("/")).next().value;if(!e)return null;var n=e.indexOf("@");if(-1<n){var b=e.slice(n+1);e=e.slice(0,n)}return!b&&k?this.findPackageDependency(k,e):this.lookup(e,b)};tj.prototype.resolvePath=function(e,k){if(uh.isAbsolute(e))return e;var n=k&&k.isPackage||null;if(!n&&k){if(e.startsWith("."))return k=uh.resource(k),k.isDirectory()||(k=k.parent()),k.join(e).withRelativePartsResolved().url;n=this.findPackageHavingURL(k)}k=this.findPackageForPath(e,
n);if(!k)return null;n=e.indexOf("/");return(e=-1===n||n===e.length-1?"":e.slice(n))?uh.resource(k.url).join(e).url:k.url};tj.prototype.update=function(){var e=this,k,n,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:if(!e.isReady())return U.return(e.whenReady().then(function(){return e.update()}));k=uh.promise.deferred();e._readyPromise=k.promise;e.packageBaseDirs=e.packageBaseDirs.map(function(V){return V.asDirectory()});
e.individualPackageDirs=e.individualPackageDirs.map(function(V){return V.asDirectory()});e.devPackageDirs=e.devPackageDirs.map(function(V){return V.asDirectory()});n={};U.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(e.packageBaseDirs);d=b.next();case 5:if(d.done){U.jumpTo(7);break}m=d.value;a=$jscomp;g=a.makeIterator;return U.yield(m.dirList(1),8);case 8:l=g.call(a,U.yieldResult),r=l.next();case 9:if(r.done){d=b.next();U.jumpTo(5);break}v=r.value;y=$jscomp;A=y.makeIterator;return U.yield(v.dirList(1),
12);case 12:E=A.call(y,U.yieldResult.filter(function(V){return V.isDirectory()})),F=E.next();case 13:if(F.done){r=l.next();U.jumpTo(9);break}G=F.value;return U.yield(e._discoverPackagesIn(G,n,"packageCollectionDirs"),16);case 16:n=U.yieldResult;F=E.next();U.jumpTo(13);break;case 7:I=$jscomp.makeIterator(e.individualPackageDirs),d=I.next();case 17:if(d.done){U.jumpTo(19);break}M=d.value;return U.yield(e._discoverPackagesIn(M,n,"individualPackageDirs"),20);case 20:n=U.yieldResult;d=I.next();U.jumpTo(17);
break;case 19:L=$jscomp.makeIterator(e.devPackageDirs),d=L.next();case 21:if(d.done){U.jumpTo(23);break}S=d.value;return U.yield(e._discoverPackagesIn(S,n,"devPackageDirs"),24);case 24:n=U.yieldResult;d=L.next();U.jumpTo(21);break;case 23:for(R in n)aa=n[R],ra=aa.pkg,Ea=aa.config,K=aa.covered,e.System.debug&&console.log("[PackageRegistry] Adding discovered package "+R+" (from "+K+")"),e._addPackageWithConfig(ra,Ea,R+"/",K);e._updateLatestPackages();k.resolve();case 3:U.enterFinallyBlock();e._readyPromise=
null;e.resetByURL();uh.classHolder.ModulePackageMapping.forSystem(e.System).clearCache();U.leaveFinallyBlock(4);break;case 2:Z=U.enterCatchBlock();k.reject(Z);U.jumpTo(3);break;case 4:return U.return(e)}})};tj.prototype.addPackageAt=function(e,k,n){k=void 0===k?"individualPackageDirs":k;var b=this,d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){d=e.isResource?e.url:e;d.endsWith("/")&&d.slice(0,-1);if(b.byURL[d])throw Error("package in "+d+" already added to registry");
return y.yield(b._discoverPackagesIn(uh.ensureResource(e).asDirectory(),{},void 0,n),2)}m=y.yieldResult;for(a in m)b.byURL[a]||(g=m[a],l=g.pkg,r=g.config,v=b._addPackageDir(a,k,!0),b._addPackageWithConfig(l,r,a+"/",v));b.resetByURL();uh.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return y.return(b.findPackageWithURL(e))})};tj.prototype.removePackage=function(e,k){k=void 0===k?!0:k;var n=e.name,b=e.version,d=uh.ensureResource(e.url),m=this.coversDirectory(d);
"devPackageDirs"===m?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(d)}):"individualPackageDirs"===m&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(d)}));m=this.packageMap;m[n]&&(delete m[n].versions[b],0===Object.keys(m[n].versions).length&&delete m[n]);this.resetByURL();uh.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();k&&this._updateLatestPackages(e.name)};tj.prototype.updateNameAndVersionOf=function(e,
k,n,b,d){var m=this.packageMap;m[k]?m[k].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+k+" found in registry ("+e.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+k+"@"+n+" not found in registry ("+e.url+")");this._addToPackageMap(e,b,d);m[k]&&m[k].versions[n]&&(delete m[k].versions[n],0===Object.keys(m[k].versions).length&&delete m[k]);this._updateLatestPackages(e.name)};tj.prototype._updateLatestPackages=function(e){var k=this.packageMap;
if(e&&k[e])k[e].latest=uh.arr.last(uh.semver.sort(Object.keys(k[e].versions),!0));else for(var n in k)k[n].latest=uh.arr.last(uh.semver.sort(Object.keys(k[n].versions),!0))};tj.prototype._discoverPackagesIn=function(e,k,n,b){b=void 0===b?null:b;var d=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!e.isDirectory())return y.return(k);m=e.asFile().url;if(k.hasOwnProperty(m))return y.return(k);y.setCatchFinallyBlocks(2);a=b&&b[m]||new uh.Package(d.System,
m);return y.yield(a.tryToLoadPackageConfig(),4)}if(2!=y.nextAddress)return g=y.yieldResult,a.setConfig(g),k[m]={pkg:a,config:g,covered:n},d.System.debug&&(l=g,r=l.name,v=l.version,console.log("[lively.modules] package "+r+"@"+v+" discovered in "+e.url)),y.return(k);y.enterCatchBlock();return y.return(k)})};tj.prototype._addToPackageMap=function(e,k,n,b){if(!k)throw Error("Cannot add package without name");n||(n="0.0.0");var d=this.packageMap;k=d[k]||(d[k]={versions:{},latest:null});if(k.versions[n])if(d=
"Redefining version "+n+" of package "+e.url,void 0===b||b)console.warn(d);else throw Error(d+" not allowed");k.versions[n]=e};tj.prototype._addPackageWithConfig=function(e,k,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);e.registerWithConfig(k);this._addToPackageMap(e,e.name,e.version);return e};tj.prototype._addPackageDir=function(e,k,n){k=void 0===k?"individualPackageDirs":k;n=void 0===n?!0:n;e=uh.ensureResource(e).asDirectory();if(("packageCollectionDirs"===k||"maybe packageCollectionDirs"===
k)&&(this.coversDirectory(e)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";e=this[k].concat(e);this[k]=n?uh.arr.uniqBy(e,function(b,d){return b.equals(d)}):e;return k};$jscomp.global.Object.defineProperties(tj.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var e=$jscomp.makeIterator(this.allPackages()),k=e.next();!k.done;k=e.next())k=k.value,this._byURL[k.url]=k}return this._byURL}}});uh.PackageRegistry=tj;var Tn=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");
Tn.arr=ng;Tn.obj=Ng;Tn.subscribe=Ls;Tn.unsubscribe=Br;Tn.module=Ao;var mo=function(e){this.System=e;this.subscribeToSystemChanges()};mo.forSystem=function(e){this._forSystemMap||(this._forSystemMap=new WeakMap);var k=this._forSystemMap.get(e);if(k)return k;k=new this(e);this._forSystemMap.set(e,k);return k};mo.run=function(e,k){e=void 0===e?System:e;return this.forSystem(e).systemExports(k)};mo.findExportOfValue=function(e,k){k=void 0===k?System:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return d.yield(n.run(k),2);b=d.yieldResult;return d.return(b.find(function(m){var a=m.local;m=Tn.module(k,m.moduleId);m=m.recorder||k.get(m.id)||{};try{return m[a]===e}catch(g){return!1}}))})};mo.prototype.subscribeToSystemChanges=function(){var e=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[Tn.subscribe("lively.modules/moduleloaded",function(n){return e.clearCacheFor(n.module)},k),Tn.subscribe("lively.modules/modulechanged",function(n){return e.clearCacheFor(n.module)},
k),Tn.subscribe("lively.vm/doitresult",function(n){return e.clearCacheFor(n.targetModule)},k)]}};mo.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var e=this.System;Tn.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],e);Tn.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],e);Tn.unsubscribe("lively.vm/doitresult",this._notificationHandlers[2],e);this._notificationHandlers=null}};mo.prototype.clearCacheFor=function(e){this.exportByModuleCache[e]=
null};mo.prototype.systemExports=function(e){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.rawExportsByModule(e),2);n=b.yieldResult;Object.keys(n).forEach(function(d){return k.resolveExportsOfModule(d,n)});return b.return(Tn.arr.flatmap(Object.keys(n),function(d){return n[d].resolvedExports||n[d].rawExports}))})};mo.prototype.rawExportsByModule=function(e){var k=this,n,b,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(e=e||{},n=k.System,b=n.get("@lively-env")||{},d=Object.keys(b.loadedModules||{}),m={},a=function(l){1>l%50&&e.progress.step&&e.progress.step("Scanning ...",l/d.length)},g.yield(Promise.all(d.map(function(l,r){e.progress&&a(r);return k.rawExportsOfModule(l,e,m).then(function(v){return v?m[l]=v:null})})),2)):g.return(m)})};mo.prototype.rawExportsOfModule=function(e,k){k=void 0===k?{}:k;var n=this,b,d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:b=
n;d=b.System;m=b.exportByModuleCache;a=k.excludedPackages||[];g=k.excludedURLs||(k.excludedURLs=a.filter(function(U){return"string"===typeof U}));l=k.excludeFns||(k.excludeFns=a.filter(function(U){return"function"===typeof U}));r=k.excludedPackageURLs||(k.excludedPackageURLs=g.concat(g.map(function(U){return d.decanonicalize(U.replace(/\/?$/,"/")).replace(/\/$/,"")})));v=k.livelyEnv||(k.livelyEnv=d.get("@lively-env")||{});k.modes||(k.modes=Object.keys(v.loadedModules||{}));if(m[e])return y=m[e].rawExports,
Z.return(r.includes(y.packageURL)||l.some(function(U){return U(y.packageURL)})?null:m[e]);A=Tn.module(d,e);E=A.pathInPackage();G=(F=A.package())&&F.main&&E===F.main;I=F?F.url:"";M=F?F.name:"";L=F?F.version:"";S={moduleId:e,isMain:G,pathInPackage:E,packageName:M,packageURL:I,packageVersion:L,exports:[]};if(r.includes(I)||l.some(function(U){return U(I)}))return Z.return(null);Z.setCatchFinallyBlocks(2);R=A.format();return["register","es6","esm"].includes(R)?(Ea=S,Z.yield(A.exports(),7)):Z.yield(A.load(),
6);case 6:aa=Z.yieldResult;S.exports=[];for(ra in aa)"__useDefault"!==ra&&"default"!==ra&&S.exports.push({exported:ra,local:ra,type:"id"});Z.jumpTo(5);break;case 7:Ea.exports=Z.yieldResult;case 5:Z.leaveTryBlock(3);break;case 2:K=Z.enterCatchBlock(),S.error=K;case 3:return Z.return(m[e]={rawExports:S})}})};mo.prototype.resolveExportsOfModule=function(e,k,n){var b=this;n=void 0===n?{}:n;if(!n[e]){n[e]=!0;var d=k[e];if(d&&!d.resolvedExports){var m=this.System,a=Tn.obj.select(d.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));
d.resolvedExports=Tn.arr.flatmap(d.rawExports.exports,function(g){var l=g.type,r=g.exported,v=g.local,y=g.fromModule;if("all"!==l)return[Object.assign({},a,{type:l,exported:r,local:v,fromModule:y})];g=m.decanonicalize(y,e);b.resolveExportsOfModule(g,k,n);return(k[g].resolvedExports||[]).map(function(A){return Object.assign({},a,{type:A.type,exported:A.exported,local:A.local,fromModule:A.fromModule||y})})});n[e]=!1}}};$jscomp.global.Object.defineProperties(mo.prototype,{exportByModuleCache:{configurable:!0,
enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ba("bH",mo);Tn.ExportLookup=mo;Tn.default=mo;var gn=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");gn.buildPackageMap=UF;gn.resolvePackageDependencies=TJ;gn.dependencyGraph=UJ;gn.arr=ng;gn.fun=xn;gn.promise=xh;gn.obj=Ng;gn.resource=w;gn.buildPackageMap=UF;gn.buildPackageMap=UF;gn.resolvePackageDependencies=TJ;gn.resolvePackageDependencies=TJ;gn.dependencyGraph=UJ;gn.dependencyGraph=
UJ;var sN=Object.freeze({__proto__:null,buildPackageMap:UF,resolvePackageDependencies:TJ,dependencyGraph:UJ}),Un=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");Un.arr=ng;Un.unsubscribe=Br;Un.subscribe=Ls;Un.knownModuleNames=MJ;Un.classHolder=dx;var hs=function(e){this.System=e;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};hs.forSystem=function(e){var k=e["__lively.modules__modulePackageMapCache"];if(k)return k;k=new this(e);
return e["__lively.modules__modulePackageMapCache"]=k};hs.prototype.subscribeToSystemChanges=function(){var e=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[Un.subscribe("lively.modules/moduleloaded",function(n){return e.addModuleIdToCache(n.module)},k),Un.subscribe("lively.modules/moduleunloaded",function(n){return e.removeModuleFromCache(n.module)},k),Un.subscribe("lively.modules/packageregistered",function(n){return e.clearCache()},k),Un.subscribe("lively.modules/packageremoved",
function(n){return e.clearCache()},k)]}};hs.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var e=this.System;Un.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],e);Un.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],e);Un.unsubscribe("lively.modules/packageregistered",this._notificationHandlers[2],e);Un.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],e);this._notificationHandlers=null}};hs.prototype.clearCache=
function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};hs.prototype.ensureCache=function(){var e=this.System,k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var d=Un.classHolder.Package.allPackageURLs(e),m=0;m<d.length;m++)k[d[m]]=[];e=Un.knownModuleNames(e);for(m=0;m<e.length;m++){for(var a=e[m],g=void 0,l=0;l<d.length;l++){var r=d[l];a.startsWith(r)&&(!g||g.length<
r.length)&&(g=r)}g?(k[g].push(a),n[a]=g):b[a]={}}this._cacheInitialized=!0;return this};hs.prototype.addModuleIdToCache=function(e){this.ensureCache();var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[e])return n[e];if(b[e])return null;for(var d=Object.keys(k),m,a=0;a<d.length;a++){var g=d[a];e.startsWith(g)&&(!m||m.length<g.length)&&(m=g)}if(m)return(k[m]||(k[m]=[])).push(e),n[e]=m;b[e]={};return null};hs.prototype.removeModuleFromCache=function(e){if(this._cacheInitialized){var k=
this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(e))delete b[e];else if(b=n[e])delete n[e],k[b]&&Un.arr.remove(k[b],e)}};hs.prototype.getPackageURLForModuleId=function(e){return this.modulesToPackage[e]||this.addModuleIdToCache(e)};hs.prototype.getModuleIdsForPackageURL=function(e){this.ensureCache();return this.packageToModule[e]||[]};Un.ModulePackageMapping=hs;Un.default=hs;var yd=lively.FreezerRuntime.recorderFor("lively.modules/index.js");yd.changeSystem=
VJ;yd.wrapModuleResolution=WJ;yd.unwrapModuleResolution=XJ;yd.loadedModules=YJ;yd.module=VF;yd.isModuleLoaded=ZJ;yd.doesModuleExist=$J;yd.printSystemConfig=aK;yd.whenLoaded=bK;yd.importPackage=cK;yd.registerPackage=dK;yd.removePackage=eK;yd.reloadPackage=fK;yd.getPackages=gK;yd.getPackage=hK;yd.getPackageOfModule=iK;yd.ensurePackage=jK;yd.applyPackageConfig=kK;yd.lookupPackage=lK;yd.moduleSourceChange=mK;yd.requireMap=nK;yd.isHookInstalled=oK;yd.installHook=pK;yd.removeHook=qK;yd.wrapModuleLoad=rK;
yd.unwrapModuleLoad=sK;yd.getSystem=Vs;yd.removeSystem=zA;yd.prepareSystem=IJ;yd._printSystemConfig=JJ;yd._unwrapModuleResolution=Mm;yd._wrapModuleResolution=hi;yd._whenLoaded=KJ;yd._module=Ao;yd._doesModuleExist=Ts;yd._isModuleLoaded=Bo;yd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;yd.defaultSystem=yd.defaultSystem||yd.prepareSystem(yd.GLOBAL.System);var AV=yd.defaultSystem;yd.System=AV;yd.defaultSystem=AV;yd.getSystem=Vs;yd.getSystem=
Vs;yd.removeSystem=zA;yd.removeSystem=zA;yd.loadedModules=YJ;yd.loadedModules=YJ;yd.printSystemConfig=aK;yd.printSystemConfig=aK;yd.whenLoaded=bK;yd.whenLoaded=bK;yd.changeSystem=VJ;yd.changeSystem=VJ;yd.module=VF;yd.module=VF;yd.doesModuleExist=$J;yd.doesModuleExist=$J;yd.isModuleLoaded=ZJ;yd.isModuleLoaded=ZJ;yd.unwrapModuleResolution=XJ;yd.unwrapModuleResolution=XJ;yd.wrapModuleResolution=WJ;yd.wrapModuleResolution=WJ;yd.Package=Uj;yd._getPackage=pf;yd._ensurePackage=Te;yd.getPackageSpecs=mk;yd._applyPackageConfig=
Wf;yd._importPackage=Qf;yd._removePackage=pg;yd._reloadPackage=Th;yd._registerPackage=sk;yd._lookupPackage=Xe;yd.importPackage=cK;yd.importPackage=cK;yd.registerPackage=dK;yd.registerPackage=dK;yd.removePackage=eK;yd.removePackage=eK;yd.reloadPackage=fK;yd.reloadPackage=fK;yd.getPackages=gK;yd.getPackages=gK;yd.getPackage=hK;yd.getPackage=hK;yd.getPackageOfModule=iK;yd.getPackageOfModule=iK;yd.ensurePackage=jK;yd.ensurePackage=jK;yd.applyPackageConfig=kK;yd.applyPackageConfig=kK;yd.lookupPackage=
lK;yd.lookupPackage=lK;yd.PackageRegistry=tj;yd.PackageRegistry=tj;yd.PackageRegistry=tj;yd._moduleSourceChange=ve;yd.moduleSourceChange=mK;yd.moduleSourceChange=mK;yd.computeRequireMap=Gd;yd.requireMap=nK;yd.requireMap=nK;yd._isHookInstalled=wd;yd._installHook=Ic;yd._removeHook=uc;yd.isHookInstalled=oK;yd.isHookInstalled=oK;yd.installHook=pK;yd.installHook=pK;yd.removeHook=qK;yd.removeHook=qK;yd._wrapModuleLoad=Yj;yd._unwrapModuleLoad=En;yd.wrapModuleLoad=rK;yd.wrapModuleLoad=rK;yd.unwrapModuleLoad=
sK;yd.unwrapModuleLoad=sK;yd.default=mo;yd.ExportLookup=mo;yd.cjs=sN;yd.cjs=sN;yd.cjs=sN;yd.default=rN;yd.semver=rN;yd.ImportInjector=vt;yd.scripting=yd.defaultSystem._scripting={module:yd._module,ensurePackage:yd._ensurePackage,registerPackage:yd._registerPackage,importPackage:yd._importPackage,lookupPackage:yd._lookupPackage,ImportInjector:vt};yd.defaultClassToFunctionConverterName="initializeES6ClassForLively";yd.classRuntime=pE;yd.defaultSystem.global[yd.defaultClassToFunctionConverterName]=yd.classRuntime.initializeClass;
yd.classHolder=dx;yd.ModulePackageMapping=hs;yd.classHolder.ModulePackageMapping=yd.ModulePackageMapping;yd.classHolder.Package=yd.Package;yd.classHolder.PackageRegistry=yd.PackageRegistry;var BV=Ba("bG",yd.scripting);yd.scripting=BV;yd.scripting=BV;var tN=Object.freeze({__proto__:null,System:AV,getSystem:Vs,removeSystem:zA,loadedModules:YJ,printSystemConfig:aK,whenLoaded:bK,changeSystem:VJ,module:VF,doesModuleExist:$J,isModuleLoaded:ZJ,unwrapModuleResolution:XJ,wrapModuleResolution:WJ,importPackage:cK,
registerPackage:dK,removePackage:eK,reloadPackage:fK,getPackages:gK,getPackage:hK,getPackageOfModule:iK,ensurePackage:jK,applyPackageConfig:kK,lookupPackage:lK,PackageRegistry:tj,moduleSourceChange:mK,requireMap:nK,isHookInstalled:oK,installHook:pK,removeHook:qK,wrapModuleLoad:rK,unwrapModuleLoad:sK,ExportLookup:mo,cjs:sN,semver:rN,scripting:BV});Ba("T",tN);var tn=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");tn.isReference=SQ;tn.removeUnreachableObjects=Qs;tn.obj=Ng;tn.Path=
Ti;tn.connect=yl;tn.disconnectAll=Dr;tn.isReference=SQ;tn.isReference=SQ;var kD=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(e){var k=e.snapshot,n;for(n in k){var b=k[n],d=b.props&&b.props.textAndAttributes;if(d){var m=d.value;if(!Array.isArray(m))console.warn("object migrator found textAndAttributes field but it is not an Array!");
else if(m.length&&"string"!==typeof m[0]){m=[].concat.apply([],m);for(var a=0;a<m.length;a+=2){var g=m[a+1];g&&Array.isArray(g)&&(m[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(g))))}b.props.textAndAttributes=Object.assign({},d,{value:m})}}}return e}},{date:"2017-04-29",name:"Window button fix",description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(e,k){(k=k.refForId(e.id).realObj)&&
k.isMorph&&k.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name})||n.fixControls(),n.minimizedBounds=null,tn.disconnectAll(n.get("minimize")),tn.connect(n.get("minimize"),"onMouseDown",n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return e}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",
snapshotConverter:function(e){var k=e.id,n=e.snapshot,b;for(b in n){var d=n[b].props;d&&d.styleSheets&&(d.styleSheets.value||(d.styleSheets.value=[]),d.styleSheets.value=d.styleSheets.value&&d.styleSheets.value.filter(function(m){m=n[m.id];var a=n[m.props.rules.value.id];return!m.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}tn.removeUnreachableObjects([k],n);return e}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",
snapshotConverter:function(e){var k=e.snapshot,n;for(n in k){var b=k[n],d=b["lively.serializer-class-info"];d&&("ChromeTheme"===d.className||"GithubTheme"===d.className?(d.className="DefaultTheme",d.module.pathInPackage="ide/themes/default.js"):"JavaScriptTokenizer"===d.className&&delete b["lively.serializer-class-info"])}return e}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(e,k){(k=k.refForId(e.id).realObj)&&
k.isMorph&&k.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var d in tn.obj.dissoc(b.rules,["_rev"]))b.rules[d]=b.unwrapFoldedProps(b.rules[d])})});return e}},{date:"2017-07-13",name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(e){var k=e.snapshot,n;for(n in k){var b=k[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return e}},{date:"2017-07-26",name:"components, ide, and halo extraction",
snapshotConverter:function(e){var k=e.snapshot,n=e.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(A){return"{"+A+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js",
"lively.ide",null,"text/ui.js"]];for(var d in b){for(var m=b[d]["index.js"],a=$jscomp.makeIterator(n),g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value),r=l.next().value;g=l.next().value;if(l=l.next().value){r=new RegExp('(import\\s)(.*)(\\sfrom \\"'+r+")","g");var v=r.exec(m);v&&(m=m.replace(r,"import "+l(v[2])+'from "'+g))}else m=m.replace(new RegExp(r,"g"),g)}b[d]["index.js"]=m}for(var y in k)if((d=k[y]["lively.serializer-class-info"])&&d.module)for(b=d.module.package.name+"/"+
d.module.pathInPackage,m=$jscomp.makeIterator(n),a=m.next();!a.done;a=m.next())if(l=$jscomp.makeIterator(a.value),a=l.next().value,g=l.next().value,l.next(),l=l.next().value,b.includes(a)){d.module.package.name=g;d.module.package.version="0.1.0";d.module.pathInPackage=l||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return e}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(e,k){k=$jscomp.makeIterator(k.objectRefs());for(var n=k.next();!n.done;n=
k.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return e}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(e){var k=e.snapshot,n;for(n in k){var b=k[n],d=b["lively.serializer-class-info"];d&&d.module&&("Tree"==d.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==d.className&&delete k[n],"InspectorTreeData"==d.className&&delete k[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(d.className)&&
(d.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete k[n])}return e}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(e){var k=e.id,n=e.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&tn.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&tn.isReference(b.props.commit.value))){var d=n[b.props.commit.value.id].props;b.props.commit.value='__lv_expr__:({type: "'+d.type.value+
'", name: "'+d.name.value+'", _id: "'+d._id.value+'"})'}});tn.removeUnreachableObjects([k],n);return e}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(e){var k=e.packages,n,b=tn.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(k))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";',
'import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(k,n);return e}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(e){Object.values(e.snapshot).map(function(k){k.props.fontFamily&&"Camphor"==k.props.fontFamily.value&&(k.props.fontFamily.value="Nunito")});return e}}];tn.migrations=kD;tn.migrations=kD;tn.migrations=kD;var Cf=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Cf.normalizeOptions=function(e){e=Object.assign({reinitializeIds:!1},
e);e.reinitializeIds&&(e.reinitializeIds="function"===typeof e.reinitializeIds?e.reinitializeIds:function(k,n){return n.realObj.isMorph?Cf.newMorphId(n.realObj.constructor):null});return e};Cf.serializeMorph=WF;Cf.deserializeMorph=XF;Cf.loadWorldFromResource=tK;Cf.saveWorldToResource=TQ;Cf.copyMorph=uK;Cf.createMorphSnapshot=BA;Cf.loadMorphFromSnapshot=Pu;Cf.resourceToJSON=j1;Cf.findPackagesInFileSpec=k1;Cf.packagesOfSnapshot=UQ;Cf.loadPackagesAndModulesOfSnapshot=YF;Cf.findRequiredPackagesOfSnapshot=
vK;Cf.requiredModulesOfSnapshot=Rs;Cf.deserializeWithMigrations=Gu;Cf.serialize=mi;Cf.MorphicEnv=Yr;Cf.resource=w;Cf.newMorphId=Ab;Cf.morph=ab;Cf.pathForBrowserHistory=ua;Cf.serializeMorph=WF;Cf.serializeMorph=WF;Cf.deserializeMorph=XF;Cf.deserializeMorph=XF;Cf.loadWorldFromResource=tK;Cf.loadWorldFromResource=tK;Cf.saveWorldToResource=TQ;Cf.saveWorldToResource=TQ;Cf.copyMorph=uK;Cf.copyMorph=uK;Cf.modules=tN;Cf.createFiles=B;Cf.promise=xh;Cf.graph=iu;Cf.arr=ng;Cf.migrations=kD;var sE=Cf.modules;
Cf.registerPackage=sE.registerPackage;Cf.module=sE.module;Cf.getPackage=sE.getPackage;Cf.ensurePackage=sE.ensurePackage;Cf.lookupPackage=sE.lookupPackage;Cf.semver=sE.semver;Cf.objectScriptingEnabled=!1;Cf.createMorphSnapshot=BA;Cf.createMorphSnapshot=BA;Cf.loadMorphFromSnapshot=Pu;Cf.loadMorphFromSnapshot=Pu;Cf.packagesOfSnapshot=UQ;Cf.packagesOfSnapshot=UQ;Cf.loadPackagesAndModulesOfSnapshot=YF;Cf.loadPackagesAndModulesOfSnapshot=YF;Cf.findRequiredPackagesOfSnapshot=vK;Cf.findRequiredPackagesOfSnapshot=
vK;var uv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cpa={},i$=uv.MutationObserver||uv.WebKitMutationObserver;if(i$){var j$=0,dpa=new i$(wK),k$=uv.document.createTextNode("");dpa.observe(k$,{characterData:!0});var CV=function(){k$.data=j$=++j$%2}}else if(uv.setImmediate||"undefined"===typeof uv.MessageChannel)CV="document"in uv&&"onreadystatechange"in uv.document.createElement("script")?function(){var e=uv.document.createElement("script");e.onreadystatechange=
function(){wK();e.onreadystatechange=null;e.parentNode.removeChild(e);e=null};uv.document.documentElement.appendChild(e)}:function(){setTimeout(wK,0)};else{var l$=new uv.MessageChannel;l$.port1.onmessage=wK;CV=function(){l$.port2.postMessage(0)}}var VQ,ZF=[],epa=cpa=function(e){1!==ZF.push(e)||VQ||CV()},DV={},m$="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);
if(m$){var n$=new Uint8Array(16);DV=function(){m$(n$);return n$}}else{var o$=Array(16);DV=function(){for(var e=0,k;16>e;e++)0===(e&3)&&(k=4294967296*Math.random()),o$[e]=k>>>((e&3)<<3)&255;return o$}}for(var p$=DV,fpa={},no=[],uN=0;256>uN;++uN)no[uN]=(uN+256).toString(16).substr(1);var q$=fpa=function(e,k){k=k||0;return[no[e[k++]],no[e[k++]],no[e[k++]],no[e[k++]],"-",no[e[k++]],no[e[k++]],"-",no[e[k++]],no[e[k++]],"-",no[e[k++]],no[e[k++]],"-",no[e[k++]],no[e[k++]],no[e[k++]],no[e[k++]],no[e[k++]],
no[e[k++]]].join("")},gpa={},r$,EV,FV=0,GV=0,hpa=gpa=function(e,k,n){n=k&&n||0;var b=k||[];e=e||{};var d=e.node||r$,m=void 0!==e.clockseq?e.clockseq:EV;if(null==d||null==m){var a=p$();null==d&&(d=r$=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==m&&(m=EV=(a[6]<<8|a[7])&16383)}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var g=void 0!==e.nsecs?e.nsecs:GV+1,l=a-FV+(g-GV)/1E4;0>l&&void 0===e.clockseq&&(m=m+1&16383);(0>l||a>FV)&&void 0===e.nsecs&&(g=0);if(1E4<=g)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
FV=a;GV=g;EV=m;a+=122192928E5;e=(1E4*(a&268435455)+g)%4294967296;b[n++]=e>>>24&255;b[n++]=e>>>16&255;b[n++]=e>>>8&255;b[n++]=e&255;e=a/4294967296*1E4&268435455;b[n++]=e>>>8&255;b[n++]=e&255;b[n++]=e>>>24&15|16;b[n++]=e>>>16&255;b[n++]=m>>>8|128;b[n++]=m&255;for(m=0;6>m;++m)b[n+m]=d[m];return k?k:q$(b)},s$={};s$=function(e,k,n){n=k&&n||0;"string"==typeof e&&(k="binary"===e?Array(16):null,e=null);e=e||{};e=e.random||(e.rng||p$)();e[6]=e[6]&15|64;e[8]=e[8]&63|128;if(k)for(var b=0;16>b;++b)k[n+b]=e[b];
return k||q$(e)};var ipa={},HV=s$;HV.v1=hpa;var jpa=ipa=HV.v4=HV,qi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kpa={},lpa=kpa=function(e){function k(v,y){var A=v[0],E=v[1],F=v[2],G=v[3];A+=(E&F|~E&G)+y[0]-680876936|0;A=(A<<7|A>>>25)+E|0;G+=(A&E|~A&F)+y[1]-389564586|0;G=(G<<12|G>>>20)+A|0;F+=(G&A|~G&E)+y[2]+606105819|0;F=(F<<17|F>>>15)+G|0;E+=(F&G|~F&A)+y[3]-1044525330|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&G)+y[4]-176418897|0;A=(A<<7|A>>>25)+E|0;G+=(A&E|~A&F)+y[5]+
1200080426|0;G=(G<<12|G>>>20)+A|0;F+=(G&A|~G&E)+y[6]-1473231341|0;F=(F<<17|F>>>15)+G|0;E+=(F&G|~F&A)+y[7]-45705983|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&G)+y[8]+1770035416|0;A=(A<<7|A>>>25)+E|0;G+=(A&E|~A&F)+y[9]-1958414417|0;G=(G<<12|G>>>20)+A|0;F+=(G&A|~G&E)+y[10]-42063|0;F=(F<<17|F>>>15)+G|0;E+=(F&G|~F&A)+y[11]-1990404162|0;E=(E<<22|E>>>10)+F|0;A+=(E&F|~E&G)+y[12]+1804603682|0;A=(A<<7|A>>>25)+E|0;G+=(A&E|~A&F)+y[13]-40341101|0;G=(G<<12|G>>>20)+A|0;F+=(G&A|~G&E)+y[14]-1502002290|0;F=(F<<17|F>>>15)+
G|0;E+=(F&G|~F&A)+y[15]+1236535329|0;E=(E<<22|E>>>10)+F|0;A+=(E&G|F&~G)+y[1]-165796510|0;A=(A<<5|A>>>27)+E|0;G+=(A&F|E&~F)+y[6]-1069501632|0;G=(G<<9|G>>>23)+A|0;F+=(G&E|A&~E)+y[11]+643717713|0;F=(F<<14|F>>>18)+G|0;E+=(F&A|G&~A)+y[0]-373897302|0;E=(E<<20|E>>>12)+F|0;A+=(E&G|F&~G)+y[5]-701558691|0;A=(A<<5|A>>>27)+E|0;G+=(A&F|E&~F)+y[10]+38016083|0;G=(G<<9|G>>>23)+A|0;F+=(G&E|A&~E)+y[15]-660478335|0;F=(F<<14|F>>>18)+G|0;E+=(F&A|G&~A)+y[4]-405537848|0;E=(E<<20|E>>>12)+F|0;A+=(E&G|F&~G)+y[9]+568446438|
0;A=(A<<5|A>>>27)+E|0;G+=(A&F|E&~F)+y[14]-1019803690|0;G=(G<<9|G>>>23)+A|0;F+=(G&E|A&~E)+y[3]-187363961|0;F=(F<<14|F>>>18)+G|0;E+=(F&A|G&~A)+y[8]+1163531501|0;E=(E<<20|E>>>12)+F|0;A+=(E&G|F&~G)+y[13]-1444681467|0;A=(A<<5|A>>>27)+E|0;G+=(A&F|E&~F)+y[2]-51403784|0;G=(G<<9|G>>>23)+A|0;F+=(G&E|A&~E)+y[7]+1735328473|0;F=(F<<14|F>>>18)+G|0;E+=(F&A|G&~A)+y[12]-1926607734|0;E=(E<<20|E>>>12)+F|0;A+=(E^F^G)+y[5]-378558|0;A=(A<<4|A>>>28)+E|0;G+=(A^E^F)+y[8]-2022574463|0;G=(G<<11|G>>>21)+A|0;F+=(G^A^E)+y[11]+
1839030562|0;F=(F<<16|F>>>16)+G|0;E+=(F^G^A)+y[14]-35309556|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^G)+y[1]-1530992060|0;A=(A<<4|A>>>28)+E|0;G+=(A^E^F)+y[4]+1272893353|0;G=(G<<11|G>>>21)+A|0;F+=(G^A^E)+y[7]-155497632|0;F=(F<<16|F>>>16)+G|0;E+=(F^G^A)+y[10]-1094730640|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^G)+y[13]+681279174|0;A=(A<<4|A>>>28)+E|0;G+=(A^E^F)+y[0]-358537222|0;G=(G<<11|G>>>21)+A|0;F+=(G^A^E)+y[3]-722521979|0;F=(F<<16|F>>>16)+G|0;E+=(F^G^A)+y[6]+76029189|0;E=(E<<23|E>>>9)+F|0;A+=(E^F^G)+y[9]-640364487|0;
A=(A<<4|A>>>28)+E|0;G+=(A^E^F)+y[12]-421815835|0;G=(G<<11|G>>>21)+A|0;F+=(G^A^E)+y[15]+530742520|0;F=(F<<16|F>>>16)+G|0;E+=(F^G^A)+y[2]-995338651|0;E=(E<<23|E>>>9)+F|0;A+=(F^(E|~G))+y[0]-198630844|0;A=(A<<6|A>>>26)+E|0;G+=(E^(A|~F))+y[7]+1126891415|0;G=(G<<10|G>>>22)+A|0;F+=(A^(G|~E))+y[14]-1416354905|0;F=(F<<15|F>>>17)+G|0;E+=(G^(F|~A))+y[5]-57434055|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~G))+y[12]+1700485571|0;A=(A<<6|A>>>26)+E|0;G+=(E^(A|~F))+y[3]-1894986606|0;G=(G<<10|G>>>22)+A|0;F+=(A^(G|~E))+y[10]-
1051523|0;F=(F<<15|F>>>17)+G|0;E+=(G^(F|~A))+y[1]-2054922799|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~G))+y[8]+1873313359|0;A=(A<<6|A>>>26)+E|0;G+=(E^(A|~F))+y[15]-30611744|0;G=(G<<10|G>>>22)+A|0;F+=(A^(G|~E))+y[6]-1560198380|0;F=(F<<15|F>>>17)+G|0;E+=(G^(F|~A))+y[13]+1309151649|0;E=(E<<21|E>>>11)+F|0;A+=(F^(E|~G))+y[4]-145523070|0;A=(A<<6|A>>>26)+E|0;G+=(E^(A|~F))+y[11]-1120210379|0;G=(G<<10|G>>>22)+A|0;F+=(A^(G|~E))+y[2]+718787259|0;F=(F<<15|F>>>17)+G|0;E+=(G^(F|~A))+y[9]-343485551|0;v[0]=A+v[0]|0;v[1]=
((E<<21|E>>>11)+F|0)+v[1]|0;v[2]=F+v[2]|0;v[3]=G+v[3]|0}function n(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v.charCodeAt(A)+(v.charCodeAt(A+1)<<8)+(v.charCodeAt(A+2)<<16)+(v.charCodeAt(A+3)<<24);return y}function b(v){var y=[],A;for(A=0;64>A;A+=4)y[A>>2]=v[A]+(v[A+1]<<8)+(v[A+2]<<16)+(v[A+3]<<24);return y}function d(v){var y=v.length,A=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=y;E+=64)k(A,n(v.substring(E-64,E)));v=v.substring(E-64);var F=v.length;var G=[0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0];for(E=0;E<F;E+=1)G[E>>2]|=v.charCodeAt(E)<<(E%4<<3);G[E>>2]|=128<<(E%4<<3);if(55<E)for(k(A,G),E=0;16>E;E+=1)G[E]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;G[14]=v;G[15]=y;k(A,G);return A}function m(v){var y;for(y=0;y<v.length;y+=1){var A=y,E,F=v[y],G="";for(E=0;4>E;E+=1)G+=r[F>>8*E+4&15]+r[F>>8*E&15];v[A]=G}return v.join("")}function a(v){/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v)));return v}function g(v){var y=[],A=v.length,
E;for(E=0;E<A-1;E+=2)y.push(parseInt(v.substr(E,2),16));return String.fromCharCode.apply(String,y)}function l(){this.reset()}var r="0123456789abcdef".split("");m(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function v(y,A){y=y|0||0;return 0>y?Math.max(y+A,0):Math.min(y,A)}ArrayBuffer.prototype.slice=function(y,A){var E=(this||qi).byteLength;y=v(y,E);var F=E;A!==e&&(F=v(A,E));if(y>F)return new ArrayBuffer(0);F-=y;A=new ArrayBuffer(F);E=new Uint8Array(A);y=new Uint8Array(this||
qi,y,F);E.set(y);return A}}();l.prototype.append=function(v){this.appendBinary(a(v));return this||qi};l.prototype.appendBinary=function(v){(this||qi)._buff+=v;(this||qi)._length+=v.length;v=(this||qi)._buff.length;var y;for(y=64;y<=v;y+=64)k((this||qi)._hash,n((this||qi)._buff.substring(y-64,y)));(this||qi)._buff=(this||qi)._buff.substring(y-64);return this||qi};l.prototype.end=function(v){var y=(this||qi)._buff,A=y.length,E,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<A;E+=1)F[E>>2]|=y.charCodeAt(E)<<
(E%4<<3);this._finish(F,A);y=m((this||qi)._hash);v&&(y=g(y));this.reset();return y};l.prototype.reset=function(){(this||qi)._buff="";(this||qi)._length=0;(this||qi)._hash=[1732584193,-271733879,-1732584194,271733878];return this||qi};l.prototype.getState=function(){return{buff:(this||qi)._buff,length:(this||qi)._length,hash:(this||qi)._hash}};l.prototype.setState=function(v){(this||qi)._buff=v.buff;(this||qi)._length=v.length;(this||qi)._hash=v.hash;return this||qi};l.prototype.destroy=function(){delete (this||
qi)._hash;delete (this||qi)._buff;delete (this||qi)._length};l.prototype._finish=function(v,y){v[y>>2]|=128<<(y%4<<3);if(55<y)for(k((this||qi)._hash,v),y=0;16>y;y+=1)v[y]=0;var A=8*(this||qi)._length;A=A.toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(A[2],16);A=parseInt(A[1],16)||0;v[14]=y;v[15]=A;k((this||qi)._hash,v)};l.hash=function(v,y){return l.hashBinary(a(v),y)};l.hashBinary=function(v,y){v=d(v);v=m(v);return y?g(v):v};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=
function(v){var y=(this||qi)._buff.buffer,A=new Uint8Array(y.byteLength+v.byteLength);A.set(new Uint8Array(y));A.set(new Uint8Array(v),y.byteLength);y=A.length;(this||qi)._length+=v.byteLength;for(v=64;v<=y;v+=64)k((this||qi)._hash,b(A.subarray(v-64,v)));(this||qi)._buff=v-64<y?new Uint8Array(A.buffer.slice(v-64)):new Uint8Array(0);return this||qi};l.ArrayBuffer.prototype.end=function(v){var y=(this||qi)._buff,A=y.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F;for(F=0;F<A;F+=1)E[F>>2]|=y[F]<<(F%4<<
3);this._finish(E,A);y=m((this||qi)._hash);v&&(y=g(y));this.reset();return y};l.ArrayBuffer.prototype.reset=function(){(this||qi)._buff=new Uint8Array(0);(this||qi)._length=0;(this||qi)._hash=[1732584193,-271733879,-1732584194,271733878];return this||qi};l.ArrayBuffer.prototype.getState=function(){var v=l.prototype.getState.call(this||qi);v.buff=String.fromCharCode.apply(null,new Uint8Array(v.buff));return v};l.ArrayBuffer.prototype.setState=function(v){var y=v.buff,A=y.length,E=new ArrayBuffer(A);
E=new Uint8Array(E);var F;for(F=0;F<A;F+=1)E[F]=y.charCodeAt(F);v.buff=E;return l.prototype.setState.call(this||qi,v)};l.ArrayBuffer.prototype.destroy=l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(v,y){var A=new Uint8Array(v),E=A.length;v=[1732584193,-271733879,-1732584194,271733878];var F;for(F=64;F<=E;F+=64)k(v,b(A.subarray(F-64,F)));A=F-64<E?A.subarray(F-64):new Uint8Array(0);var G=A.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<
G;F+=1)I[F>>2]|=A[F]<<(F%4<<3);I[F>>2]|=128<<(F%4<<3);if(55<F)for(k(v,I),F=0;16>F;F+=1)I[F]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(E[2],16);E=parseInt(E[1],16)||0;I[14]=A;I[15]=E;k(v,I);v=m(v);return y?g(v):v};return l}(),tE={stringify:function(e){var k=[];k.push({obj:e});e="";for(var n,b,d,m,a,g,l;n=k.pop();)if(b=n.obj,d=n.prefix||"",n=n.val||"",e+=d,n)e+=n;else if("object"!==typeof b)e+="undefined"===typeof b?null:JSON.stringify(b);else if(null===b)e+="null";else if(Array.isArray(b)){k.push({val:"]"});
for(d=b.length-1;0<=d;d--)n=0===d?"":",",k.push({obj:b[d],prefix:n});k.push({val:"["})}else{n=[];for(m in b)b.hasOwnProperty(m)&&n.push(m);k.push({val:"}"});for(d=n.length-1;0<=d;d--)a=n[d],g=b[a],l=0<d?",":"",l+=JSON.stringify(a)+":",k.push({obj:g,prefix:l});k.push({val:"{"})}return e},parse:function(e){for(var k=[],n=[],b=0,d,m,a,g;;)if(d=e[b++],"}"===d||"]"===d||"undefined"===typeof d){if(1===k.length)return k.pop();lD(k.pop(),k,n)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;
case "n":b+=3;lD(null,k,n);break;case "t":b+=3;lD(!0,k,n);break;case "f":b+=4;lD(!1,k,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d="";for(b--;;)if(m=e[b++],/[\d\.\-e\+]/.test(m))d+=m;else{b--;break}lD(parseFloat(d),k,n);break;case '"':d="";m=void 0;for(a=0;;)if(g=e[b++],'"'!==g||"\\"===m&&1===a%2)d+=g,m=g,"\\"===m?a++:a=0;else break;lD(JSON.parse('"'+d+'"'),k,n);break;case "[":d={element:[],index:k.length};k.push(d.element);n.push(d);
break;case "{":d={element:{},index:k.length};k.push(d.element);n.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},mpa={},IV=mpa=function(e){return function(){var k=arguments.length;if(k){for(var n=[],b=-1;++b<k;)n[b]=arguments[b];return e.call(this,n)}return e.call(this,[])}},npa={},Xl=npa="function"===typeof Object.create?function(e,k){k&&(e.super_=k,e.prototype=Object.create(k.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,
k){if(k){e.super_=k;var n=function(){};n.prototype=k.prototype;e.prototype=new n;e.prototype.constructor=e}},uE="object"==typeof Reflect?Reflect:null,t$=uE&&"function"==typeof uE.apply?uE.apply:function(e,k,n){return Function.prototype.apply.call(e,k,n)};var opa=uE&&"function"==typeof uE.ownKeys?uE.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var u$=Number.isNaN||function(e){return e!=
e};Mk.EventEmitter=Mk;Mk.prototype._events=void 0;Mk.prototype._eventsCount=0;Mk.prototype._maxListeners=void 0;var v$=10;Object.defineProperty(Mk,"defaultMaxListeners",{enumerable:!0,get:function(){return v$},set:function(e){if("number"!=typeof e||0>e||u$(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");v$=e}});Mk.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=
Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Mk.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||u$(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};Mk.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Mk.defaultMaxListeners:this._maxListeners};Mk.prototype.emit=function(e){for(var k=[],n=1;n<arguments.length;n++)k.push(arguments[n]);
n="error"===e;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var d;if(0<k.length&&(d=k[0]),d instanceof Error)throw d;k=Error("Unhandled error."+(d?" ("+d.message+")":""));throw k.context=d,k;}n=b[e];if(void 0===n)return!1;if("function"==typeof n)t$(n,this,k);else for(d=n.length,b=o1(n,d),n=0;n<d;++n)t$(b[n],this,k);return!0};Mk.prototype.addListener=function(e,k){return l1(this,e,k,!1)};Mk.prototype.on=Mk.prototype.addListener;Mk.prototype.prependListener=function(e,
k){return l1(this,e,k,!0)};Mk.prototype.once=function(e,k){return xK(k),this.on(e,m1(this,e,k)),this};Mk.prototype.prependOnceListener=function(e,k){return xK(k),this.prependListener(e,m1(this,e,k)),this};Mk.prototype.removeListener=function(e,k){var n,b,d;if((xK(k),void 0===(b=this._events))||void 0===(n=b[e]))return this;if(n===k||n.listener===k)0==--this._eventsCount?this._events=Object.create(null):(delete b[e],b.removeListener&&this.emit("removeListener",e,n.listener||k));else if("function"!=
typeof n){var m=-1;for(d=n.length-1;0<=d;d--)if(n[d]===k||n[d].listener===k){var a=n[d].listener;m=d;break}if(0>m)return this;if(0===m)n.shift();else{for(;m+1<n.length;m++)n[m]=n[m+1];n.pop();!0}1===n.length&&(b[e]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",e,a||k)}return this};Mk.prototype.off=Mk.prototype.removeListener;Mk.prototype.removeAllListeners=function(e){var k,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=
Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(k=b[n])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(k=n[e]))this.removeListener(e,k);else if(void 0!==k)for(n=k.length-1;0<=n;n--)this.removeListener(e,k[n]);return this};
Mk.prototype.listeners=function(e){return n1(this,e,!0)};Mk.prototype.rawListeners=function(e){return n1(this,e,!1)};Mk.listenerCount=function(e,k){return"function"==typeof e.listenerCount?e.listenerCount(k):p1.call(e,k)};Mk.prototype.listenerCount=p1;Mk.prototype.eventNames=function(){return 0<this._eventsCount?opa(this._events):[]};var Vu=Mk,w$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ppa={},GK=Zj,Ru=mD(epa),E1=mD(jpa),BK=mD(lpa),Y1=mD(tE),nD=mD(IV),wt=mD(Xl),
Sp=Vu;qy.prototype.get=function(e){return this._store["$"+e]};qy.prototype.set=function(e,k){this._store["$"+e]=k;return!0};qy.prototype.has=function(e){return"$"+e in this._store};qy.prototype.delete=function(e){e="$"+e;var k=e in this._store;delete this._store[e];return k};qy.prototype.forEach=function(e){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var d=k[n],m=this._store[d];d=d.substring(1);e(m,d)}};Object.defineProperty(qy.prototype,"size",{get:function(){return Object.keys(this._store).length}});
$F.prototype.add=function(e){return this._store.set(e,!0)};$F.prototype.has=function(e){return this._store.has(e)};$F.prototype.forEach=function(e){this._store.forEach(function(k,n){e(n)})};Object.defineProperty($F.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()){var hG=Set;
var Aq=Map}else hG=$F,Aq=qy;var q1=Function.prototype.toString,Efa=q1.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var bG=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){bG=!1}wt(oD,Sp.EventEmitter);oD.prototype.addListener=function(e,k,n,b){function d(){if(m._listeners[k])if(a)a="waiting";else{a=!0;var g=aG(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(g).on("change",function(l){l.seq>
b.since&&!b.cancelled&&(b.since=l.seq,b.onChange(l))}).on("complete",function(){"waiting"===a&&Ru(d);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[k]){var m=this,a=!1;this._listeners[k]=d;this.on(e,d)}};oD.prototype.removeListener=function(e,k){k in this._listeners&&(Sp.EventEmitter.prototype.removeListener.call(this,e,this._listeners[k]),delete this._listeners[k])};oD.prototype.notifyLocalWindows=function(e){bG&&(localStorage[e]="a"===localStorage[e]?"b":"a")};oD.prototype.notify=function(e){this.emit(e);
this.notifyLocalWindows(e)};var sD="function"===typeof Object.assign?Object.assign:function(e){for(var k=Object(e),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(k[d]=b[d])}return k};wt(el,Error);el.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new el(401,"unauthorized","Name or password is incorrect.");var qpa=new el(400,"bad_request","Missing JSON list of 'docs'"),
Zs=new el(404,"not_found","missing"),rD=new el(409,"conflict","Document update conflict"),x1=new el(400,"bad_request","_id field must contain a string"),Kfa=new el(412,"missing_id","_id is required for puts"),Jfa=new el(400,"bad_request","Only reserved document ids may start with underscore.");new el(412,"precondition_failed","Database not open");var v1=new el(500,"unknown_error","Database encountered an unknown error"),X1=new el(500,"badarg","Some query argument is invalid");new el(400,"invalid_request",
"Request was invalid");var rpa=new el(400,"query_parse_error","Some query parameter is invalid"),W1=new el(500,"doc_validation","Bad special document member"),yK=new el(400,"bad_request","Something wrong with the request"),JV=new el(400,"bad_request","Document must be a JSON object");new el(404,"not_found","Database not found");var jR=new el(500,"indexed_db_went_bad","unknown");new el(500,"web_sql_went_bad","unknown");new el(500,"levelDB_went_went_bad","unknown");new el(403,"forbidden","Forbidden by design doc validate_doc_update function");
var U1=new el(400,"bad_request","Invalid rev format");new el(412,"file_exists","The database could not be created, the file already exists.");var Aga=new el(412,"missing_stub","A pre-existing attachment stub wasn't found");new el(413,"invalid_url","Provided URL is invalid");var A1="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Mfa=/(?:^|&)([^&=]*)=?([^&]*)/g,Lfa=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Sfa=w$.setImmediate||w$.setTimeout,CK=E1.v4;wt(cG,Sp.EventEmitter);cG.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};cG.prototype.validateChanges=function(e){var k=e.complete,n=this;dj._changesFilterPlugin?dj._changesFilterPlugin.validate(e,function(b){if(b)return k(b);n.doChanges(e)}):n.doChanges(e)};cG.prototype.doChanges=function(e){var k=this,n=e.complete;e=hn(e);"live"in e&&!("continuous"in e)&&(e.continuous=e.live);e.processChange=$fa;"latest"===
e.since&&(e.since="now");e.since||(e.since=0);if("now"===e.since)this.db.info().then(function(m){k.isCancelled?n(null,{status:"cancelled"}):(e.since=m.update_seq,k.doChanges(e))},n);else{if(dj._changesFilterPlugin){if(dj._changesFilterPlugin.normalize(e),dj._changesFilterPlugin.shouldFilter(this,e))return dj._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(m){m in e&&Gr("warn",'The "'+m+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});
"descending"in e||(e.descending=!1);e.limit=0===e.limit?1:e.limit;e.complete=n;var b=this.db._changes(e);if(b&&"function"===typeof b.cancel){var d=k.cancel;k.cancel=nD(function(m){b.cancel();d.apply(this,m)})}}};wt(Al,Sp.EventEmitter);Al.prototype.post=Nm("post",function(e,k,n){"function"===typeof k&&(n=k,k={});if("object"!==typeof e||Array.isArray(e))return n(hj(JV));this.bulkDocs({docs:[e]},k,gR(n,e._id))});Al.prototype.put=Nm("put",function(e,k,n){function b(){var a=e._rev.split("-"),g=a[1];a=
parseInt(a[0],10)+1;var l=D1();e._revisions={start:a,ids:[l,g]};e._rev=a+"-"+l;k.new_edits=!1}function d(a){"function"===typeof m._put&&!1!==k.new_edits?m._put(e,k,a):m.bulkDocs({docs:[e]},k,gR(a,e._id))}"function"===typeof k&&(n=k,k={});if("object"!==typeof e||Array.isArray(e))return n(hj(JV));w1(e._id);if(EA(e._id)&&"function"===typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var m=this;k.force&&e._rev?(b(),d(function(a){n(a,a?null:{ok:!0,id:e._id,rev:e._rev})})):
d(n)});Al.prototype.putAttachment=Nm("putAttachment",function(e,k,n,b,d){function m(g){var l="_rev"in g?parseInt(g._rev,10):0;g._attachments=g._attachments||{};g._attachments[k]={content_type:d,data:b,revpos:++l};return a.put(g)}var a=this;"function"===typeof d&&(d=b,b=n,n=null);"undefined"===typeof d&&(d=b,b=n,n=null);d||Gr("warn","Attachment",k,"on document",e,"is missing content_type");return a.get(e).then(function(g){if(g._rev!==n)throw hj(rD);return m(g)},function(g){if(g.reason===Zs.message)return m({_id:e});
throw g;})});Al.prototype.removeAttachment=Nm("removeAttachment",function(e,k,n,b){var d=this;d.get(e,function(m,a){if(m)b(m);else if(a._rev!==n)b(hj(rD));else{if(!a._attachments)return b();delete a._attachments[k];0===Object.keys(a._attachments).length&&delete a._attachments;d.put(a,b)}})});Al.prototype.remove=Nm("remove",function(e,k,n,b){"string"===typeof k?(e={_id:e,_rev:k},"function"===typeof n&&(b=n,n={})):"function"===typeof k?(b=k,n={}):(b=n,n=k);n=n||{};n.was_delete=!0;k={_id:e._id,_rev:e._rev||
n.rev,_deleted:!0};if(EA(k._id)&&"function"===typeof this._removeLocal)return this._removeLocal(e,b);this.bulkDocs({docs:[k]},n,gR(b,k._id))});Al.prototype.revsDiff=Nm("revsDiff",function(e,k,n){function b(l,r){g.has(l)||g.set(l,{missing:[]});g.get(l).missing.push(r)}function d(l,r){var v=e[l].slice(0);DA(r,function(y,A,E,F,G){y=A+"-"+E;A=v.indexOf(y);-1!==A&&(v.splice(A,1),"available"!==G.status&&b(l,y))});v.forEach(function(y){b(l,y)})}"function"===typeof k&&(n=k,k={});var m=Object.keys(e);if(!m.length)return n(null,
{});var a=0,g=new Aq;m.map(function(l){this._getRevisionTree(l,function(r,v){if(r&&404===r.status&&"missing"===r.message)g.set(l,{missing:e[l]});else{if(r)return n(r);d(l,v)}if(++a===m.length){var y={};g.forEach(function(A,E){y[E]=A});return n(null,y)}})},this)});Al.prototype.bulkGet=Nm("bulkGet",function(e,k){u1(this,e,k)});Al.prototype.compactDocument=Nm("compactDocument",function(e,k,n){var b=this;this._getRevisionTree(e,function(d,m){if(d)return n(d);var a=cga(m),g=[],l=[];Object.keys(a).forEach(function(r){a[r]>
k&&g.push(r)});DA(m,function(r,v,y,A,E){r=v+"-"+y;"available"===E.status&&-1!==g.indexOf(r)&&l.push(r)});b._doCompaction(e,l,n)})});Al.prototype.compact=Nm("compact",function(e,k){"function"===typeof e&&(k=e,e={});e=e||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:e,callback:k});1===this._compactionQueue.length&&K1(this)});Al.prototype._compact=function(e,k){var n=this,b=[];n.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",function(d){b.push(n.compactDocument(d.id,
0))}).on("complete",function(d){var m=d.last_seq;Promise.all(b).then(function(){return AK(n,"_local/compaction",function(a){return!a.last_seq||a.last_seq<m?(a.last_seq=m,a):!1})}).then(function(){k(null,{ok:!0})}).catch(k)}).on("error",k)};Al.prototype.get=Nm("get",function(e,k,n){function b(){var l=[],r=d.length;if(!r)return n(null,l);d.forEach(function(v){m.get(e,{rev:v,revs:k.revs,latest:k.latest,attachments:k.attachments,binary:k.binary},function(y,A){if(y)l.push({missing:v});else{y=0;for(var E=
l.length;y<E;y++)if(l[y].ok&&l[y].ok._rev===A._rev){var F=!0;break}F||l.push({ok:A})}r--;r||n(null,l)})})}"function"===typeof k&&(n=k,k={});if("string"!==typeof e)return n(hj(x1));if(EA(e)&&"function"===typeof this._getLocal)return this._getLocal(e,n);var d=[],m=this;if(k.open_revs)if("all"===k.open_revs)this._getRevisionTree(e,function(l,r){if(l)return n(l);d=eR(r).map(function(v){return v.rev});b()});else if(Array.isArray(k.open_revs)){d=k.open_revs;for(var a=0;a<d.length;a++){var g=d[a];if("string"!==
typeof g||!/^\d+-/.test(g))return n(hj(U1))}b()}else return n(hj(v1,"function_clause"));else return this._get(e,k,function(l,r){if(l)return l.docId=e,n(l);var v=r.doc,y=r.metadata,A=r.ctx;k.conflicts&&(r=fR(y),r.length&&(v._conflicts=r));Ew(y,v._rev)&&(v._deleted=!0);if(k.revs||k.revs_info){l=v._rev.split("-");r=parseInt(l[0],10);l=l[1];var E=F1(y.rev_tree);y=null;for(var F=0;F<E.length;F++){var G=E[F],I=G.ids.map(function(aa){return aa.id}).indexOf(l);if(I===r-1||!y&&-1!==I)y=G}if(!y)return l=Error("invalid rev tree"),
l.docId=e,n(l);r=y.ids.map(function(aa){return aa.id}).indexOf(v._rev.split("-")[1])+1;y.ids.splice(r,y.ids.length-r);y.ids.reverse();k.revs&&(v._revisions={start:y.pos+y.ids.length-1,ids:y.ids.map(function(aa){return aa.id})});if(k.revs_info){var M=y.pos+y.ids.length;v._revs_info=y.ids.map(function(aa){M--;return{rev:M+"-"+aa.id,status:aa.opts.status}})}}if(k.attachments&&v._attachments){var L=v._attachments,S=Object.keys(L).length;if(0===S)return n(null,v);Object.keys(L).forEach(function(aa){this._getAttachment(v._id,
aa,L[aa],{rev:v._rev,binary:k.binary,ctx:A},function(ra,Ea){ra=v._attachments[aa];ra.data=Ea;delete ra.stub;delete ra.length;--S||n(null,v)})},m)}else{if(v._attachments)for(var R in v._attachments)v._attachments.hasOwnProperty(R)&&(v._attachments[R].stub=!0);n(null,v)}})});Al.prototype.getAttachment=Nm("getAttachment",function(e,k,n,b){var d=this;n instanceof Function&&(b=n,n={});this._get(e,n,function(m,a){if(m)return b(m);if(a.doc._attachments&&a.doc._attachments[k])n.ctx=a.ctx,n.binary=!0,d._getAttachment(e,
k,a.doc._attachments[k],n,b);else return b(hj(Zs))})});Al.prototype.allDocs=Nm("allDocs",function(e,k){"function"===typeof e&&(k=e,e={});e.skip="undefined"!==typeof e.skip?e.skip:0;e.start_key&&(e.startkey=e.start_key);e.end_key&&(e.endkey=e.end_key);if("keys"in e){if(!Array.isArray(e.keys))return k(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in e})[0];if(n){k(hj(rpa,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Qu(this)&&
(dga(e),0===e.keys.length))return this._allDocs({limit:0},k)}return this._allDocs(e,k)});Al.prototype.changes=function(e,k){"function"===typeof e&&(k=e,e={});e=e||{};e.return_docs="return_docs"in e?e.return_docs:!e.live;return new cG(this,e,k)};Al.prototype.close=Nm("close",function(e){this._closed=!0;this.emit("closed");return this._close(e)});Al.prototype.info=Nm("info",function(e){var k=this;this._info(function(n,b){if(n)return e(n);b.db_name=b.db_name||k.name;b.auto_compaction=!(!k.auto_compaction||
Qu(k));b.adapter=k.adapter;e(null,b)})});Al.prototype.id=Nm("id",function(e){return this._id(e)});Al.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};Al.prototype.bulkDocs=Nm("bulkDocs",function(e,k,n){"function"===typeof k&&(n=k,k={});k=k||{};Array.isArray(e)&&(e={docs:e});if(!e||!e.docs||!Array.isArray(e.docs))return n(hj(qpa));for(var b=0;b<e.docs.length;++b)if("object"!==typeof e.docs[b]||Array.isArray(e.docs[b]))return n(hj(JV));var d;e.docs.forEach(function(g){g._attachments&&
Object.keys(g._attachments).forEach(function(l){var r;(r=d)||(r="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":!1);d=r;g._attachments[l].content_type||Gr("warn","Attachment",l,"on document",g._id,"is missing content_type")})});if(d)return n(hj(yK,d));"new_edits"in k||(k.new_edits="new_edits"in e?e.new_edits:!0);var m=this;k.new_edits||Qu(m)||e.docs.sort(bga);aga(e.docs);var a=e.docs.map(function(g){return g._id});return this._bulkDocs(e,k,function(g,
l){if(g)return n(g);k.new_edits||(l=l.filter(function(v){return v.error}));if(!Qu(m)){g=0;for(var r=l.length;g<r;g++)l[g].id=l[g].id||a[g]}n(null,l)})});Al.prototype.registerDependentDatabase=Nm("registerDependentDatabase",function(e,k){var n=new this.constructor(e,this.__opts);AK(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[e])return!1;b.dependentDbs[e]=!0;return b}).then(function(){k(null,{db:n})}).catch(k)});Al.prototype.destroy=Nm("destroy",
function(e,k){function n(){b._destroy(e,function(m,a){if(m)return k(m);b._destroyed=!0;b.emit("destroyed");k(null,a||{ok:!0})})}"function"===typeof e&&(k=e,e={});var b=this,d="use_prefix"in b?b.use_prefix:!0;if(Qu(b))return n();b.get("_local/_pouch_dependentDbs",function(m,a){if(m)return 404!==m.status?k(m):n();var g=b.constructor;m=Object.keys(a.dependentDbs).map(function(l){l=d?l.replace(new RegExp("^"+g.prefix),""):l;return(new g(l,b.__opts)).destroy()});Promise.all(m).then(n,k)})});dG.prototype.execute=
function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()};dG.prototype.fail=function(e){this.failed=e;this.execute()};dG.prototype.ready=function(e){this.isReady=!0;this.db=e;this.execute()};dG.prototype.addTask=function(e){this.queue.push(e);this.failed&&this.execute()};wt(dj,Al);var Oga="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},f2=fetch,uD=Headers;dj.adapters={};dj.preferredAdapters=[];dj.prefix=
"_pouch_";var x$=new Sp.EventEmitter;(function(e){Object.keys(Sp.EventEmitter.prototype).forEach(function(n){"function"===typeof Sp.EventEmitter.prototype[n]&&(e[n]=x$[n].bind(x$))});var k=e._destructionListeners=new Aq;e.on("ref",function(n){k.has(n.name)||k.set(n.name,[]);k.get(n.name).push(n)});e.on("unref",function(n){if(k.has(n.name)){var b=k.get(n.name),d=b.indexOf(n);0>d||(b.splice(d,1),1<b.length?k.set(n.name,b):k.delete(n.name))}});e.on("destroyed",function(n){if(k.has(n)){var b=k.get(n);
k.delete(n);b.forEach(function(d){d.emit("destroyed",!0)})}})})(dj);dj.adapter=function(e,k,n){k.valid()&&(dj.adapters[e]=k,n&&dj.preferredAdapters.push(e))};dj.plugin=function(e){if("function"===typeof e)e(dj);else{if("object"!==typeof e||0===Object.keys(e).length)throw Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(k){dj.prototype[k]=e[k]})}this.__defaults&&(dj.__defaults=sD({},this.__defaults));return dj};dj.defaults=function(e){function k(n,
b){if(!(this instanceof k))return new k(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=sD({},k.__defaults,b);dj.call(this,n,b)}wt(k,dj);k.preferredAdapters=dj.preferredAdapters.slice();Object.keys(dj).forEach(function(n){n in k||(k[n]=dj[n])});k.__defaults=sD({},this.__defaults,e);return k};dj.fetch=function(e,k){return f2(e,k)};var N1=["$or","$nor","$not"],Q1={$elemMatch:function(e,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(d){return qD(d,
k,Object.keys(k))}):b.some(function(d){return iR(k,e,n,d)}):!1},$allMatch:function(e,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(d){return qD(d,k,Object.keys(k))}):b.every(function(d){return iR(k,e,n,d)}):!1},$eq:function(e,k,n,b){return GA(b)&&0===Fn(b,k)},$gte:function(e,k,n,b){return GA(b)&&0<=Fn(b,k)},$gt:function(e,k,n,b){return GA(b)&&0<Fn(b,k)},$lte:function(e,k,n,b){return GA(b)&&0>=Fn(b,k)},$lt:function(e,k,n,b){return GA(b)&&0>Fn(b,k)},$exists:function(e,
k,n,b){return k?GA(b):!GA(b)},$mod:function(e,k,n,b){if(e=fG(b)){e=k[0];k=k[1];if(0===e)throw Error("Bad divisor, cannot divide by zero");if(parseInt(e,10)!==e)throw Error("Divisor is not an integer");if(parseInt(k,10)!==k)throw Error("Modulus is not an integer");e=parseInt(b,10)!==b?!1:b%e===k}return e},$ne:function(e,k,n,b){return k.every(function(d){return 0!==Fn(b,d)})},$in:function(e,k,n,b){return fG(b)&&R1(b,k)},$nin:function(e,k,n,b){return fG(b)&&!R1(b,k)},$size:function(e,k,n,b){return fG(b)&&
b.length===k},$all:function(e,k,n,b){return Array.isArray(b)&&mga(b,k)},$regex:function(e,k,n,b){if(e=fG(b))e=(new RegExp(k)).test(b);return e},$type:function(e,k,n,b){return nga(b,k)}};dj.plugin(function(e){e._changesFilterPlugin={validate:oga,normalize:pga,shouldFilter:qga,filter:rga}});dj.version="7.2.1";var sga=S1("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
tga=S1("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),gG=new oD,mR=!1,nR=[],tD=new Aq,pR,oR=new Aq;d2.valid=function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var sR={};rR.valid=function(){return!0};wt(JA,Error);wt(HK,Error);wt(IK,Error);var Rga=Gr.bind(null,"log"),Sga=Array.isArray,Tga=JSON.parse;iG.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()})};
iG.prototype.finish=function(){return this.promise};var y$={},z$=new iG,spa=function(e,k){return vR(k)},tpa=function(e,k){return k.length},upa=function(e,k){e=vR(k);for(var n=Math.min.apply(null,k),b=Math.max.apply(null,k),d=k.length,m=0,a=0,g=k.length;a<g;a++){var l=k[a];m+=l*l}return{sum:e,min:n,max:b,count:d,sumsqr:m}},A$=function(e,k,n,b){function d(la,ya,jb,gb,ka){try{return{output:ya(jb,gb,ka)}}catch(ia){return m2(la,ia),{error:ia}}}function m(la,ya){var jb=Fn(la.key,ya.key);return 0!==jb?jb:
Fn(la.value,ya.value)}function a(la,ya,jb){jb=jb||0;return"number"===typeof ya?la.slice(jb,ya+jb):0<jb?la.slice(jb):la}function g(la){var ya=la.value;return ya&&"object"===typeof ya&&ya._id||la.id}function l(la){la.rows.forEach(function(ya){var jb=ya.doc&&ya.doc._attachments;jb&&Object.keys(jb).forEach(function(gb){var ka=jb[gb];jb[gb].data=bR(ka.data,ka.content_type)})})}function r(la){return function(ya){la.include_docs&&la.attachments&&la.binary&&l(ya);return ya}}function v(la,ya,jb,gb){ya=ya[la];
"undefined"!==typeof ya&&(gb&&(ya=encodeURIComponent(JSON.stringify(ya))),jb.push(la+"="+ya))}function y(la){if("undefined"!==typeof la){var ya=Number(la);return isNaN(ya)||ya!==parseInt(la,10)?la:ya}}function A(la){la.group_level=y(la.group_level);la.limit=y(la.limit);la.skip=y(la.skip);return la}function E(la,ya){var jb=la.descending?"endkey":"startkey",gb=la.descending?"startkey":"endkey";if("undefined"!==typeof la[jb]&&"undefined"!==typeof la[gb]&&0<Fn(la[jb],la[gb]))throw new JA("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");
if(ya.reduce&&!1!==la.reduce){if(la.include_docs)throw new JA("{include_docs:true} is invalid for reduce");if(la.keys&&1<la.keys.length&&!la.group&&!la.group_level)throw new JA("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(ka){a:{if(ka=la[ka]){if("number"!==typeof ka){ka=new JA('Invalid value for integer: "'+ka+'"');break a}if(0>ka){ka=new JA('Invalid value for positive integer: "'+ka+'"');break a}}ka=void 0}if(ka)throw ka;})}function F(la,
ya,jb){var gb=[],ka,ia="GET",qa,La;v("reduce",jb,gb);v("include_docs",jb,gb);v("attachments",jb,gb);v("limit",jb,gb);v("descending",jb,gb);v("group",jb,gb);v("group_level",jb,gb);v("skip",jb,gb);v("stale",jb,gb);v("conflicts",jb,gb);v("startkey",jb,gb,!0);v("start_key",jb,gb,!0);v("endkey",jb,gb,!0);v("end_key",jb,gb,!0);v("inclusive_end",jb,gb);v("key",jb,gb,!0);v("update_seq",jb,gb);gb=gb.join("&");gb=""===gb?"":"?"+gb;if("undefined"!==typeof jb.keys){var Lb="keys="+encodeURIComponent(JSON.stringify(jb.keys));
2E3>=Lb.length+gb.length+1?gb+=("?"===gb[0]?"&":"?")+Lb:(ia="POST","string"===typeof ya?ka={keys:jb.keys}:ya.keys=jb.keys)}if("string"===typeof ya)return Lb=wR(ya),la.fetch("_design/"+Lb[0]+"/_view/"+Lb[1]+gb,{headers:new uD({"Content-Type":"application/json"}),method:ia,body:JSON.stringify(ka)}).then(function(qc){qa=qc.ok;La=qc.status;return qc.json()}).then(function(qc){if(!qa)throw qc.status=La,pD(qc);qc.rows.forEach(function(dc){if(dc.value&&dc.value.error&&"builtin_reduce_error"===dc.value.error)throw Error(dc.reason);
});return qc}).then(r(jb));ka=ka||{};Object.keys(ya).forEach(function(qc){Array.isArray(ya[qc])?ka[qc]=ya[qc]:ka[qc]=ya[qc].toString()});return la.fetch("_temp_view"+gb,{headers:new uD({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(ka)}).then(function(qc){qa=qc.ok;La=qc.status;return qc.json()}).then(function(qc){if(!qa)throw qc.status=La,pD(qc);return qc}).then(r(jb))}function G(la,ya,jb){return new Promise(function(gb,ka){la._query(ya,jb,function(ia,qa){if(ia)return ka(ia);
gb(qa)})})}function I(la){return new Promise(function(ya,jb){la._viewCleanup(function(gb,ka){if(gb)return jb(gb);ya(ka)})})}function M(la){return function(ya){if(404===ya.status)return la;throw ya;}}function L(la,ya,jb){function gb(La,Lb){for(var qc=[],dc=new hG,oc=0,$c=Lb.rows.length;oc<$c;oc++){var Vb=Lb.rows[oc].doc;if(Vb&&(qc.push(Vb),dc.add(Vb._id),Vb._deleted=!qa.has(Vb._id),!Vb._deleted)){var Hd=qa.get(Vb._id);"value"in Hd&&(Vb.value=Hd.value)}}Lb=uR(qa);Lb.forEach(function(be){if(!dc.has(be)){var ha=
{_id:be};be=qa.get(be);"value"in be&&(ha.value=be.value);qc.push(ha)}});La.keys=h2(Lb.concat(La.keys));qc.push(La);return qc}var ka="_local/doc_"+la,ia={_id:ka,keys:[]};la=jb.get(la);var qa=la[0];ka=Vga(la[1])?Promise.resolve(ia):ya.db.get(ka).catch(M(ia));return ka.then(function(La){return(La.keys.length?ya.db.allDocs({keys:La.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Lb){return gb(La,Lb)})})}function S(la,ya,jb){return la.db.get("_local/lastSeq").catch(M({_id:"_local/lastSeq",
seq:0})).then(function(gb){var ka=uR(ya);return Promise.all(ka.map(function(ia){return L(ia,la,ya)})).then(function(ia){ia=zK(ia);gb.seq=jb;ia.push(gb);return la.db.bulkDocs({docs:ia})})})}function R(la){la="string"===typeof la?la:la.name;var ya=y$[la];ya||(ya=y$[la]=new iG);return ya}function aa(la){return tR(R(la),function(){return ra(la)})()}function ra(la){function ya(qc,dc){return function(){return S(la,qc,dc)}}function jb(){return la.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,
style:"all_docs",since:La,limit:50}).then(gb)}function gb(qc){qc=qc.results;if(qc.length){for(var dc=new Aq,oc=0,$c=qc.length;oc<$c;oc++){var Vb=qc[oc];if("_"!==Vb.doc._id[0]){ka=[];ia=Vb.doc;if(!ia._deleted){var Hd=la.sourceDB;try{qa(ia)}catch(Ud){m2(Hd,Ud)}}ka.sort(m);Hd=void 0;for(var be=ka,ha=new Aq,Ca=0,Na=be.length;Ca<Na;Ca++){var yb=be[Ca],gc=[yb.key,yb.id];0<Ca&&0===Fn(yb.key,Hd)&&gc.push(Ca);ha.set(Ys(gc),yb);Hd=yb.key}dc.set(Vb.doc._id,[ha,Vb.changes])}La=Vb.seq}Lb.add(ya(dc,La));if(!(50>
qc.length))return jb()}}var ka,ia,qa=k(la.mapFun,function(qc,dc){qc={id:ia._id,key:FA(qc)};"undefined"!==typeof dc&&null!==dc&&(qc.value=FA(dc));ka.push(qc)}),La=la.seq||0,Lb=new iG;return jb().then(function(){return Lb.finish()}).then(function(){la.seq=La})}function Ea(la,ya,jb){0===jb.group_level&&delete jb.group_level;var gb=jb.group||jb.group_level,ka=n(la.reduceFun),ia=[],qa=isNaN(jb.group_level)?Number.POSITIVE_INFINITY:jb.group_level;ya.forEach(function(oc){var $c=ia[ia.length-1],Vb=gb?oc.key:
null;gb&&Array.isArray(Vb)&&(Vb=Vb.slice(0,qa));$c&&0===Fn($c.groupKey,Vb)?($c.keys.push([oc.key,oc.id]),$c.values.push(oc.value)):ia.push({keys:[[oc.key,oc.id]],values:[oc.value],groupKey:Vb})});ya=[];for(var La=0,Lb=ia.length;La<Lb;La++){var qc=ia[La],dc=d(la.sourceDB,ka,qc.keys,qc.values,!1);if(dc.error&&dc.error instanceof IK)throw dc.error;ya.push({value:dc.error?null:dc.output,key:qc.groupKey})}return{rows:a(ya,jb.limit,jb.skip)}}function K(la,ya){return tR(R(la),function(){return Z(la,ya)})()}
function Z(la,ya){function jb(dc){dc.include_docs=!0;return la.db.allDocs(dc).then(function(oc){ka=oc.total_rows;return oc.rows.map(function($c){if("value"in $c.doc&&"object"===typeof $c.doc.value&&null!==$c.doc.value){var Vb=Object.keys($c.doc.value).sort(),Hd=["id","key","value"];if(!(Vb<Hd||Vb>Hd))return $c.doc.value}a:{Vb=$c.doc._id;Hd=[];for(var be=[],ha=0;;){var Ca=Vb[ha++];if("\x00"===Ca)if(1===Hd.length){Vb=Hd.pop();break a}else{var Na=Hd;var yb=be;Ca=Na.pop();if(yb.length){var gc=yb[yb.length-
1];Ca===gc.element&&(yb.pop(),gc=yb[yb.length-1]);yb=gc.element;gc=gc.index;Array.isArray(yb)?yb.push(Ca):gc===Na.length-2?(Na=Na.pop(),yb[Na]=Ca):Na.push(Ca)}continue}switch(Ca){case "1":Hd.push(null);break;case "2":Hd.push("1"===Vb[ha]);ha++;break;case "3":gc=Vb;Na=Ca=ha;if("1"===gc[Ca])gc=0,Ca++;else{yb="0"===gc[Ca];Ca++;var Ud="",Td=gc.substring(Ca,Ca+3);Td=parseInt(Td,10)+-324;yb&&(Td=-Td);for(Ca+=3;;){var cd=gc[Ca];if("\x00"===cd)break;else Ud+=cd;Ca++}Ud=Ud.split(".");gc=1===Ud.length?parseInt(Ud,
10):parseFloat(Ud[0]+"."+Ud[1]);yb&&(gc-=10);0!==Td&&(gc=parseFloat(gc+"e"+Td))}yb=gc;Ca-=Na;Hd.push(yb);ha+=Ca;break;case "4":for(Ca="";;){Na=Vb[ha];if("\x00"===Na)break;Ca+=Na;ha++}Ca=Ca.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");Hd.push(Ca);break;case "5":Ca={element:[],index:Hd.length};Hd.push(Ca.element);be.push(Ca);break;case "6":Ca={element:{},index:Hd.length};Hd.push(Ca.element);be.push(Ca);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+
Ca);}}}return{key:Vb[0],id:Vb[1],value:"value"in $c.doc?$c.doc.value:null}})})}function gb(dc){var oc=ia?Ea(la,dc,ya):{total_rows:ka,offset:qa,rows:dc};ya.update_seq&&(oc.update_seq=la.seq);if(ya.include_docs){var $c=h2(dc.map(g));return la.sourceDB.allDocs({keys:$c,include_docs:!0,conflicts:ya.conflicts,attachments:ya.attachments,binary:ya.binary}).then(function(Vb){var Hd=new Aq;Vb.rows.forEach(function(be){Hd.set(be.id,be.doc)});dc.forEach(function(be){var ha=g(be);if(ha=Hd.get(ha))be.doc=ha});
return oc})}return oc}var ka,ia=la.reduceFun&&!1!==ya.reduce,qa=ya.skip||0;"undefined"===typeof ya.keys||ya.keys.length||(ya.limit=0,delete ya.keys);if("undefined"!==typeof ya.keys){var La=ya.keys.map(function(dc){dc={startkey:Ys([dc]),endkey:Ys([dc,{}])};ya.update_seq&&(dc.update_seq=!0);return jb(dc)});return Promise.all(La).then(zK).then(gb)}La={descending:ya.descending};ya.update_seq&&(La.update_seq=!0);if("start_key"in ya)var Lb=ya.start_key;"startkey"in ya&&(Lb=ya.startkey);if("end_key"in ya)var qc=
ya.end_key;"endkey"in ya&&(qc=ya.endkey);"undefined"!==typeof Lb&&(La.startkey=ya.descending?Ys([Lb,{}]):Ys([Lb]));"undefined"!==typeof qc&&(Lb=!1!==ya.inclusive_end,ya.descending&&(Lb=!Lb),La.endkey=Ys(Lb?[qc,{}]:[qc]));"undefined"!==typeof ya.key&&(qc=Ys([ya.key]),Lb=Ys([ya.key,{}]),La.descending?(La.endkey=qc,La.startkey=Lb):(La.startkey=qc,La.endkey=Lb));ia||("number"===typeof ya.limit&&(La.limit=ya.limit),La.skip=qa);return jb(La).then(gb)}function U(la){return la.fetch("_view_cleanup",{headers:new uD({"Content-Type":"application/json"}),
method:"POST"}).then(function(ya){return ya.json()})}function V(la){return la.get("_local/"+e).then(function(ya){var jb=new Aq;Object.keys(ya.views).forEach(function(ka){var ia=wR(ka);ka="_design/"+ia[0];ia=ia[1];var qa=jb.get(ka);qa||(qa=new hG,jb.set(ka,qa));qa.add(ia)});var gb={keys:uR(jb),include_docs:!0};return la.allDocs(gb).then(function(ka){var ia={};ka.rows.forEach(function(qa){var La=qa.key.substring(8);jb.get(qa.key).forEach(function(Lb){var qc=La+"/"+Lb;ya.views[qc]||(qc=Lb);qc=Object.keys(ya.views[qc]);
var dc=qa.doc&&qa.doc.views&&qa.doc.views[Lb];qc.forEach(function(oc){ia[oc]=ia[oc]||dc})})});ka=Object.keys(ia).filter(function(qa){return!ia[qa]}).map(function(qa){return tR(R(qa),function(){return(new la.constructor(qa,la.__opts)).destroy()})()});return Promise.all(ka).then(function(){return{ok:!0}})})},M({ok:!0}))}function na(la,ya,jb){if("function"===typeof la._query)return G(la,ya,jb);if(Qu(la))return F(la,ya,jb);if("string"!==typeof ya)return E(jb,ya),z$.add(function(){return l2(la,"temp_view/temp_view",
ya.map,ya.reduce,!0,e).then(function(ia){return Qga(aa(ia).then(function(){return K(ia,jb)}),function(){return ia.db.destroy()})})}),z$.finish();var gb=wR(ya),ka=gb[1];return la.get("_design/"+gb[0]).then(function(ia){var qa=ia.views&&ia.views[ka];if(!qa)throw new HK("ddoc "+ia._id+" has no view named "+ka);b(ia,ka);E(jb,qa);return l2(la,ya,qa.map,qa.reduce,!1,e).then(function(La){return"ok"===jb.stale||"update_after"===jb.stale?("update_after"===jb.stale&&Ru(function(){aa(La)}),K(La,jb)):aa(La).then(function(){return K(La,
jb)})})})}return{query:function(la,ya,jb){var gb=this;"function"===typeof ya&&(jb=ya,ya={});ya=ya?A(ya):{};"function"===typeof la&&(la={map:la});var ka=Promise.resolve().then(function(){return na(gb,la,ya)});g2(ka,jb);return ka},viewCleanup:Pga(function(){return"function"===typeof this._viewCleanup?I(this):Qu(this)?U(this):V(this)})}}("mrviews",function(e,k){return"function"===typeof e&&2===e.length?function(n){return e(n,k)}:j2(e.toString(),k)},function(e){e=e.toString();if(/^_sum/.test(e))var k=
spa;else if(/^_count/.test(e))k=tpa;else if(/^_stats/.test(e))k=upa;else{if(/^_/.test(e))throw Error(e+" is not a supported reduce function.");k=void 0}return k?k:j2(e)},function(e,k){var n=e.views&&e.views[k];if("string"!==typeof n.map)throw new HK("ddoc "+e._id+" has no string view named "+k+", instead found object of type: "+typeof n.map);});jG.prototype.writeCheckpoint=function(e,k){var n=this;return this.updateTarget(e,k).then(function(){return n.updateSource(e,k)})};jG.prototype.updateTarget=
function(e,k){return this.opts.writeTargetCheckpoint?xR(this.target,this.id,e,k,this.returnValue):Promise.resolve(!0)};jG.prototype.updateSource=function(e,k){if(this.opts.writeSourceCheckpoint){var n=this;return xR(this.src,this.id,e,k,this.returnValue).catch(function(b){if(p2(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var B$={undefined:function(e,k){return 0===Fn(e.last_seq,k.last_seq)?k.last_seq:0},1:function(e,k){e=k.session_id===e.session_id?{last_seq:k.last_seq,
history:k.history}:o2(k.history,e.history);return e.last_seq}};jG.prototype.getCheckpoint=function(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(k){return k.last_seq||0}).catch(function(k){if(404!==k.status)throw k;return 0}):e.target.get(e.id).then(function(k){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?k.last_seq||0:e.src.get(e.id).then(function(n){if(k.version!==n.version)return 0;var b=k.version?
k.version.toString():"undefined";return b in B$?B$[b](k,n):0},function(n){if(404===n.status&&k.last_seq)return e.src.put({_id:e.id,last_seq:0}).then(function(){return 0},function(b){return p2(b)?(e.opts.writeSourceCheckpoint=!1,k.last_seq):0});throw n;})}).catch(function(k){if(404!==k.status)throw k;return 0})};wt(JK,Sp.EventEmitter);JK.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};JK.prototype.ready=function(e,k){function n(){b.cancel()}var b=this;b._readyCalled||
(b._readyCalled=!0,e.once("destroyed",n),k.once("destroyed",n),b.once("complete",function(){e.removeListener("destroyed",n);k.removeListener("destroyed",n)}))};wt(AR,Sp.EventEmitter);AR.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};dj.plugin(function(e){e.adapter("idb",d2,!0)}).plugin(function(e){e.adapter("http",rR,!1);e.adapter("https",rR,!1)}).plugin({query:function(e,k,n){return A$.query.call(this,e,k,n)},viewCleanup:function(e){return A$.viewCleanup.call(this,
e)}}).plugin(function(e){e.replicate=zR;e.sync=bha;Object.defineProperty(e.prototype,"replicate",{get:function(){var k=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(n,b,d){return k.constructor.replicate(n,k,b,d)},to:function(n,b,d){return k.constructor.replicate(k,n,b,d)}});return this.replicateMethods}});e.prototype.sync=function(k,n,b){return this.constructor.sync(this,k,n,b)}});var vpa=ppa=dj,gz={};Object.defineProperty(gz,"__esModule",{value:!0});ry.prototype.get=
function(e){return this._store["$"+e]};ry.prototype.set=function(e,k){this._store["$"+e]=k;return!0};ry.prototype.has=function(e){return"$"+e in this._store};ry.prototype.delete=function(e){e="$"+e;var k=e in this._store;delete this._store[e];return k};ry.prototype.forEach=function(e){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var d=k[n],m=this._store[d];d=d.substring(1);e(m,d)}};Object.defineProperty(ry.prototype,"size",{get:function(){return Object.keys(this._store).length}});kG.prototype.add=
function(e){return this._store.set(e,!0)};kG.prototype.has=function(e){return this._store.has(e)};kG.prototype.forEach=function(e){this._store.forEach(function(k,n){e(n)})};Object.defineProperty(kG.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map})()?(gz.Set=Set,gz.Map=Map):(gz.Set=
kG,gz.Map=ry);var KV={},LV=Zj;KV.test=function(){return"undefined"!==typeof LV&&!LV.browser};KV.install=function(e){return function(){LV.nextTick(e)}};var C$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,MV="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NV={},D$=MV.MutationObserver||MV.WebKitMutationObserver;NV.test=function(){return D$};NV.install=function(e){var k=0;e=new D$(e);var n=MV.document.createTextNode("");e.observe(n,
{characterData:!0});return function(){n.data=k=++k%2}};var OV="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wpa={},JH=[KV,{test:function(){return"function"===typeof C$.queueMicrotask},install:function(e){return function(){C$.queueMicrotask(e)}}},NV,{test:function(){return OV.setImmediate?!1:"undefined"!==typeof OV.MessageChannel},install:function(e){var k=new OV.MessageChannel;k.port1.onmessage=
e;return function(){k.port2.postMessage(0)}}},{test:function(){return"document"in vN&&"onreadystatechange"in vN.document.createElement("script")},install:function(e){return function(){var k=vN.document.createElement("script");k.onreadystatechange=function(){e();k.onreadystatechange=null;k.parentNode.removeChild(k);k=null};vN.document.documentElement.appendChild(k);return e}}},{test:function(){return!0},install:function(e){return function(){setTimeout(e,0)}}}],vD,KA,lG=-1,sy=[],BR=!1,KH=-1,xpa=JH.length;
for(;++KH<xpa;)if(JH[KH]&&JH[KH].test&&JH[KH].test()){var ypa=JH[KH].install(r2);break}s2.prototype.run=function(){var e=this.fun,k=this.array;switch(k.length){case 0:return e();case 1:return e(k[0]);case 2:return e(k[0],k[1]);case 3:return e(k[0],k[1],k[2]);default:return e.apply(null,k)}};var dk=wpa=function(e){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];sy.push(new s2(e,k));BR||vD||(BR=!0,ypa())},hh={};Object.defineProperty(hh,"__esModule",
{value:!0});(Xl&&"object"===typeof Xl&&"default"in Xl?Xl["default"]:Xl)(fl,Error);fl.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var zpa=new fl(401,"unauthorized","Name or password is incorrect."),Apa=new fl(400,"bad_request","Missing JSON list of 'docs'"),Bpa=new fl(404,"not_found","missing"),Cpa=new fl(409,"conflict","Document update conflict"),Dpa=new fl(400,"bad_request","_id field must contain a string"),Epa=
new fl(412,"missing_id","_id is required for puts"),Fpa=new fl(400,"bad_request","Only reserved document ids may start with underscore."),Gpa=new fl(412,"precondition_failed","Database not open"),E$=new fl(500,"unknown_error","Database encountered an unknown error"),Hpa=new fl(500,"badarg","Some query argument is invalid"),Ipa=new fl(400,"invalid_request","Request was invalid"),Jpa=new fl(400,"query_parse_error","Some query parameter is invalid"),Kpa=new fl(500,"doc_validation","Bad special document member"),
Lpa=new fl(400,"bad_request","Something wrong with the request"),Mpa=new fl(400,"bad_request","Document must be a JSON object"),Npa=new fl(404,"not_found","Database not found"),Opa=new fl(500,"indexed_db_went_bad","unknown"),Ppa=new fl(500,"web_sql_went_bad","unknown"),Qpa=new fl(500,"levelDB_went_went_bad","unknown"),Rpa=new fl(403,"forbidden","Forbidden by design doc validate_doc_update function"),Spa=new fl(400,"bad_request","Invalid rev format"),Tpa=new fl(412,"file_exists","The database could not be created, the file already exists."),
Upa=new fl(412,"missing_stub","A pre-existing attachment stub wasn't found"),Vpa=new fl(413,"invalid_url","Provided URL is invalid");hh.UNAUTHORIZED=zpa;hh.MISSING_BULK_DOCS=Apa;hh.MISSING_DOC=Bpa;hh.REV_CONFLICT=Cpa;hh.INVALID_ID=Dpa;hh.MISSING_ID=Epa;hh.RESERVED_ID=Fpa;hh.NOT_OPEN=Gpa;hh.UNKNOWN_ERROR=E$;hh.BAD_ARG=Hpa;hh.INVALID_REQUEST=Ipa;hh.QUERY_PARSE_ERROR=Jpa;hh.DOC_VALIDATION=Kpa;hh.BAD_REQUEST=Lpa;hh.NOT_AN_OBJECT=Mpa;hh.DB_MISSING=Npa;hh.WSQ_ERROR=Ppa;hh.LDB_ERROR=Qpa;hh.FORBIDDEN=Rpa;
hh.INVALID_REV=Spa;hh.FILE_EXISTS=Tpa;hh.MISSING_STUB=Upa;hh.IDB_ERROR=Opa;hh.INVALID_URL=Vpa;hh.createError=function(e,k){function n(b){for(var d=Object.getOwnPropertyNames(e),m=0,a=d.length;m<a;m++)"function"!==typeof e[d[m]]&&(this[d[m]]=e[d[m]]);void 0!==b&&(this.reason=b)}n.prototype=fl.prototype;return new n(k)};hh.generateErrorFromResponse=function(e){if("object"!==typeof e){var k=e;e=E$;e.data=k}"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409);"name"in e||(e.name=e.error||
"unknown");"status"in e||(e.status=500);"message"in e||(e.message=e.message||e.reason);return e};var Wpa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,PV=Object.prototype.toString,wN=function(e){return!(Wpa&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===PV.call(e)},F$=function(e){return!!wN(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==PV.call(e)&&"[object Function]"===PV.call(e.callee)},Xpa=function(){return wN(arguments)}();
wN.isLegacyArguments=F$;var Ypa=Xpa?wN:F$,Zpa=Object.prototype.toString,$pa=Function.prototype.toString,aqa=/^\s*(?:function)?\*/,G$="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,H$=Object.getPrototypeOf;a:if(G$){try{var xN=Function("return function*() {}")();break a}catch(e){}xN=void 0}else xN=!1;var bqa=xN?H$(xN):{},Pi="function"==typeof Object.create?function(e,k){k&&(e.super_=k,e.prototype=Object.create(k.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:
function(e,k){if(k){e.super_=k;var n=function(){};n.prototype=k.prototype;e.prototype=new n;e.prototype.constructor=e}},I$=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},Ej={},dha=I$,M2="undefined"!=typeof BigInt,DR="undefined"!=typeof Symbol,Bq=DR&&void 0!==Symbol.toStringTag,Tp="undefined"!=typeof Uint8Array,cqa="undefined"!=typeof ArrayBuffer;if(Tp&&Bq)var dqa=Object.getPrototypeOf(Uint8Array.prototype),Hr=LA(Object.getOwnPropertyDescriptor(dqa,
Symbol.toStringTag).get);var Wl=LA(Object.prototype.toString),eha=LA(Number.prototype.valueOf),fha=LA(String.prototype.valueOf),gha=LA(Boolean.prototype.valueOf);if(M2)var hha=LA(BigInt.prototype.valueOf);if(DR)var iha=LA(Symbol.prototype.valueOf);Ej.isArgumentsObject=Ypa;Ej.isGeneratorFunction=function(e){return"function"==typeof e&&(!!aqa.test($pa.call(e))||(G$?H$(e)===bqa:"[object GeneratorFunction]"===Zpa.call(e)))};Ej.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||
null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch};Ej.isArrayBufferView=function(e){return cqa&&ArrayBuffer.isView?ArrayBuffer.isView(e):t2(e)||G2(e)};Ej.isTypedArray=t2;Ej.isUint8Array=u2;Ej.isUint8ClampedArray=v2;Ej.isUint16Array=w2;Ej.isUint32Array=x2;Ej.isInt8Array=y2;Ej.isInt16Array=z2;Ej.isInt32Array=A2;Ej.isFloat32Array=B2;Ej.isFloat64Array=C2;Ej.isBigInt64Array=D2;Ej.isBigUint64Array=E2;LK.working="undefined"!=typeof Map&&LK(new Map);Ej.isMap=function(e){return"undefined"!=
typeof Map&&(LK.working?LK(e):e instanceof Map)};MK.working="undefined"!=typeof Set&&MK(new Set);Ej.isSet=function(e){return"undefined"!=typeof Set&&(MK.working?MK(e):e instanceof Set)};NK.working="undefined"!=typeof WeakMap&&NK(new WeakMap);Ej.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(NK.working?NK(e):e instanceof WeakMap)};CR.working="undefined"!=typeof WeakSet&&CR(new WeakSet);Ej.isWeakSet=function(e){return CR(e)};OK.working="undefined"!=typeof ArrayBuffer&&OK(new ArrayBuffer);
Ej.isArrayBuffer=F2;PK.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&PK(new DataView(new ArrayBuffer(1),0,1));Ej.isDataView=G2;QK.working="undefined"!=typeof SharedArrayBuffer&&QK(new SharedArrayBuffer);Ej.isSharedArrayBuffer=H2;Ej.isAsyncFunction=function(e){return"[object AsyncFunction]"===Wl(e)};Ej.isMapIterator=function(e){return"[object Map Iterator]"===Wl(e)};Ej.isSetIterator=function(e){return"[object Set Iterator]"===Wl(e)};Ej.isGeneratorObject=function(e){return"[object Generator]"===
Wl(e)};Ej.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===Wl(e)};Ej.isNumberObject=I2;Ej.isStringObject=J2;Ej.isBooleanObject=K2;Ej.isBigIntObject=L2;Ej.isSymbolObject=N2;Ej.isBoxedPrimitive=function(e){return I2(e)||J2(e)||K2(e)||L2(e)||N2(e)};Ej.isAnyArrayBuffer=function(e){return Tp&&(F2(e)||H2(e))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(Ej,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland");
}})});var LH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ni={},vv=Zj,J$=Object.getOwnPropertyDescriptors||function(e){for(var k=Object.keys(e),n={},b=0;b<k.length;b++)n[k[b]]=Object.getOwnPropertyDescriptor(e,k[b]);return n},eqa=/%[sdj%]/g;ni.format=function(e){if(!TK(e)){for(var k=[],n=0;n<arguments.length;n++)k.push(ty(arguments[n]));return k.join(" ")}n=1;var b=arguments,d=b.length;k=String(e).replace(eqa,function(a){if("%%"===a)return"%";if(n>=d)return a;switch(a){case "%s":return String(b[n++]);
case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(g){return"[Circular]"}default:return a}});for(var m=b[n];n<d;m=b[++n])null!==m&&wD(m)?k+=" "+ty(m):k+=" "+m;return k};ni.deprecate=function(e,k){if(void 0!==vv&&!0===vv.noDeprecation)return e;if(void 0===vv)return function(){return ni.deprecate(e,k).apply(this||LH,arguments)};var n=!1;return function(){if(!n){if(vv.throwDeprecation)throw Error(k);vv.traceDeprecation?console.trace(k):console.error(k);n=!0}return e.apply(this||
LH,arguments)}};var yN={},K$=/^$/;if(vv.env.NODE_DEBUG){var QV=vv.env.NODE_DEBUG;QV=QV.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();K$=new RegExp("^"+QV+"$","i")}ni.debuglog=function(e){if(e=e.toUpperCase(),!yN[e])if(K$.test(e)){var k=vv.pid;yN[e]=function(){var n=ni.format.apply(ni,arguments);console.error("%s %d: %s",e,k,n)}}else yN[e]=function(){};return yN[e]};ni.inspect=ty;ty.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,
39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ty.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};ni.types=Ej;ni.isArray=P2;ni.isBoolean=ER;ni.isNull=function(e){return null===e};ni.isNullOrUndefined=function(e){return null==e};ni.isNumber=O2;ni.isString=TK;ni.isSymbol=function(e){return"symbol"==typeof e};ni.isUndefined=MA;ni.isRegExp=oG;ni.types.isRegExp=
oG;ni.isObject=wD;ni.isDate=UK;ni.types.isDate=UK;ni.isError=nG;ni.types.isNativeError=nG;ni.isFunction=SK;ni.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e};ni.isBuffer=I$;var mha="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");ni.log=function(){console.log("%s - %s",lha(),ni.format.apply(ni,arguments))};ni.inherits=Pi;ni._extend=function(e,k){if(!k||!wD(k))return e;for(var n=Object.keys(k),b=n.length;b--;)e[n[b]]=
k[n[b]];return e};var HB="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;ni.promisify=function(e){function k(){for(var n,b,d=new Promise(function(g,l){n=g;b=l}),m=[],a=0;a<arguments.length;a++)m.push(arguments[a]);m.push(function(g,l){g?b(g):n(l)});try{e.apply(this||LH,m)}catch(g){b(g)}return d}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(HB&&e[HB]){if("function"!=typeof(k=e[HB]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');
return Object.defineProperty(k,HB,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}return Object.setPrototypeOf(k,Object.getPrototypeOf(e)),HB&&Object.defineProperty(k,HB,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,J$(e))};ni.promisify.custom=HB;ni.callbackify=function(e){function k(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var d=n.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var m=this||
LH,a=function(){return d.apply(m,arguments)};e.apply(this||LH,n).then(function(g){vv.nextTick(a.bind(null,null,g))},function(g){vv.nextTick(nha.bind(null,g,a))})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(k,Object.getPrototypeOf(e)),Object.defineProperties(k,J$(e)),k};for(var Tu=[],is=[],fqa="undefined"!=typeof Uint8Array?Uint8Array:Array,vE=0;64>vE;++vE)Tu[vE]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[vE],
is["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(vE)]=vE;is[45]=62;is[95]=63;var ij={},MR={byteLength:function(e){e=Q2(e);var k=e[1];return 3*(e[0]+k)/4-k},toByteArray:function(e){var k=Q2(e);var n=k[0];k=k[1];var b=new fqa(3*(n+k)/4-k),d=0,m=0<k?n-4:n;for(n=0;n<m;n+=4){var a=is[e.charCodeAt(n)]<<18|is[e.charCodeAt(n+1)]<<12|is[e.charCodeAt(n+2)]<<6|is[e.charCodeAt(n+3)];b[d++]=a>>16&255;b[d++]=a>>8&255;b[d++]=255&a}2===k&&(a=is[e.charCodeAt(n)]<<2|is[e.charCodeAt(n+
1)]>>4,b[d++]=255&a);1===k&&(a=is[e.charCodeAt(n)]<<10|is[e.charCodeAt(n+1)]<<4|is[e.charCodeAt(n+2)]>>2,b[d++]=a>>8&255,b[d++]=255&a);return b},fromByteArray:function(e){for(var k,n=e.length,b=n%3,d=[],m=0,a=n-b;m<a;m+=16383)d.push(oha(e,m,m+16383>a?a:m+16383));1===b?(k=e[n-1],d.push(Tu[k>>2]+Tu[k<<4&63]+"==")):2===b&&(k=(e[n-2]<<8)+e[n-1],d.push(Tu[k>>10]+Tu[k>>4&63]+Tu[k<<2&63]+"="));return d.join("")}},xD={read:function(e,k,n,b,d){var m=8*d-b-1;var a=(1<<m)-1,g=a>>1,l=-7;d=n?d-1:0;var r=n?-1:
1,v=e[k+d];d+=r;n=v&(1<<-l)-1;v>>=-l;for(l+=m;0<l;n=256*n+e[k+d],d+=r,l-=8);m=n&(1<<-l)-1;n>>=-l;for(l+=b;0<l;m=256*m+e[k+d],d+=r,l-=8);if(0===n)n=1-g;else{if(n===a)return m?NaN:1/0*(v?-1:1);m+=Math.pow(2,b);n-=g}return(v?-1:1)*m*Math.pow(2,n-b)},write:function(e,k,n,b,d,m){var a,g,l,r=8*m-d-1,v=(1<<r)-1,y=v>>1,A=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;m=b?0:m-1;b=b?1:-1;var E=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);for(isNaN(k)||k===1/0?(g=isNaN(k)?1:0,a=v):(a=Math.floor(Math.log(k)/Math.LN2),1>k*(l=
Math.pow(2,-a))&&(a--,l*=2),2<=(k+=1<=a+y?A/l:A*Math.pow(2,1-y))*l&&(a++,l/=2),a+y>=v?(g=0,a=v):1<=a+y?(g=(k*l-1)*Math.pow(2,d),a+=y):(g=k*Math.pow(2,y-1)*Math.pow(2,d),a=0));8<=d;e[n+m]=255&g,m+=b,g/=256,d-=8);a=a<<d|g;for(r+=d;0<r;e[n+m]=255&a,m+=b,a/=256,r-=8);e[n+m-b]|=128*E}},L$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ij.Buffer=jf;ij.SlowBuffer=function(e){+e!=e&&(e=0);return jf.alloc(+e)};ij.INSPECT_MAX_BYTES=50;ij.kMaxLength=2147483647;
jf.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(e,k),42===e.foo()}catch(n){return!1}}();jf.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(jf.prototype,"parent",{enumerable:!0,
get:function(){if(jf.isBuffer(this))return this.buffer}});Object.defineProperty(jf.prototype,"offset",{enumerable:!0,get:function(){if(jf.isBuffer(this))return this.byteOffset}});jf.poolSize=8192;jf.from=function(e,k,n){return R2(e,k,n)};Object.setPrototypeOf(jf.prototype,Uint8Array.prototype);Object.setPrototypeOf(jf,Uint8Array);jf.alloc=function(e,k,n){return T2(e),0>=e?Fw(e):void 0!==k?"string"==typeof n?Fw(e).fill(k,n):Fw(e).fill(k):Fw(e)};jf.allocUnsafe=function(e){return IR(e)};jf.allocUnsafeSlow=
function(e){return IR(e)};jf.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==jf.prototype};jf.compare=function(e,k){if(Gw(e,Uint8Array)&&(e=jf.from(e,e.offset,e.byteLength)),Gw(k,Uint8Array)&&(k=jf.from(k,k.offset,k.byteLength)),!jf.isBuffer(e)||!jf.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===k)return 0;for(var n=e.length,b=k.length,d=0,m=Math.min(n,b);d<m;++d)if(e[d]!==k[d]){n=e[d];b=k[d];break}return n<b?-1:b<n?1:0};
jf.isEncoding=function(e){switch(String(e).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};jf.concat=function(e,k){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return jf.alloc(0);var n;if(void 0===k)for(n=k=0;n<e.length;++n)k+=e[n].length;k=jf.allocUnsafe(k);var b=0;for(n=0;n<e.length;++n){var d=e[n];
if(Gw(d,Uint8Array)&&(d=jf.from(d)),!jf.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(k,b);b+=d.length}return k};jf.byteLength=S2;jf.prototype._isBuffer=!0;jf.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<e;k+=2)NA(this,k,k+1);return this};jf.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=
0;k<e;k+=4)NA(this,k,k+3),NA(this,k+1,k+2);return this};jf.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<e;k+=8)NA(this,k,k+7),NA(this,k+1,k+6),NA(this,k+2,k+5),NA(this,k+3,k+4);return this};jf.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?V2(this,0,e):qha.apply(this,arguments)};jf.prototype.toLocaleString=jf.prototype.toString;jf.prototype.equals=function(e){if(!jf.isBuffer(e))throw new TypeError("Argument must be a Buffer");
return this===e||0===jf.compare(this,e)};jf.prototype.inspect=function(){var e="",k=ij.INSPECT_MAX_BYTES;return e=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(e+=" ... "),"<Buffer "+e+">"};L$&&(jf.prototype[L$]=jf.prototype.inspect);jf.prototype.compare=function(e,k,n,b,d){if(Gw(e,Uint8Array)&&(e=jf.from(e,e.offset,e.byteLength)),!jf.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===k&&
(k=0),void 0===n&&(n=e?e.length:0),void 0===b&&(b=0),void 0===d&&(d=this.length),0>k||n>e.length||0>b||d>this.length)throw new RangeError("out of range index");if(b>=d&&k>=n)return 0;if(b>=d)return-1;if(k>=n)return 1;if(this===e)return 0;var m=(d>>>=0)-(b>>>=0),a=(n>>>=0)-(k>>>=0),g=Math.min(m,a);b=this.slice(b,d);e=e.slice(k,n);for(k=0;k<g;++k)if(b[k]!==e[k]){m=b[k];a=e[k];break}return m<a?-1:a<m?1:0};jf.prototype.includes=function(e,k,n){return-1!==this.indexOf(e,k,n)};jf.prototype.indexOf=function(e,
k,n){return W2(this,e,k,n,!0)};jf.prototype.lastIndexOf=function(e,k,n){return W2(this,e,k,n,!1)};jf.prototype.write=function(e,k,n,b){if(void 0===k)b="utf8",n=this.length,k=0;else if(void 0===n&&"string"==typeof k)b=k,n=this.length,k=0;else{if(!isFinite(k))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var d=this.length-k;if((void 0===n||n>d)&&(n=d),0<e.length&&(0>n||0>k)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");
b||(b="utf8");for(d=!1;;)switch(b){case "hex":a:{k=Number(k)||0;b=this.length-k;n?(n=Number(n))>b&&(n=b):n=b;b=e.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){d=parseInt(e.substr(2*b,2),16);if(d!=d){n=b;break a}this[k+b]=d}n=b}return n;case "utf8":case "utf-8":return VK(LR(e,this.length-k),this,k,n);case "ascii":return Y2(this,e,k,n);case "latin1":case "binary":return Y2(this,e,k,n);case "base64":return VK(U2(e),this,k,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;d=this.length-k;for(var m=
[],a=0;a<e.length&&!(0>(d-=2));++a){var g=e.charCodeAt(a);n=g>>8;g%=256;m.push(g);m.push(n)}return VK(m,this,k,b);default:if(d)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();d=!0}};jf.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};jf.prototype.slice=function(e,k){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n);0>(k=void 0===k?n:~~k)?0>(k+=n)&&(k=0):k>n&&(k=n);k<e&&(k=e);e=this.subarray(e,k);return Object.setPrototypeOf(e,
jf.prototype),e};jf.prototype.readUIntLE=function(e,k,n){e>>>=0;k>>>=0;n||Gn(e,k,this.length);n=this[e];for(var b=1,d=0;++d<k&&(b*=256);)n+=this[e+d]*b;return n};jf.prototype.readUIntBE=function(e,k,n){e>>>=0;k>>>=0;n||Gn(e,k,this.length);n=this[e+--k];for(var b=1;0<k&&(b*=256);)n+=this[e+--k]*b;return n};jf.prototype.readUInt8=function(e,k){return e>>>=0,k||Gn(e,1,this.length),this[e]};jf.prototype.readUInt16LE=function(e,k){return e>>>=0,k||Gn(e,2,this.length),this[e]|this[e+1]<<8};jf.prototype.readUInt16BE=
function(e,k){return e>>>=0,k||Gn(e,2,this.length),this[e]<<8|this[e+1]};jf.prototype.readUInt32LE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]};jf.prototype.readUInt32BE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])};jf.prototype.readIntLE=function(e,k,n){e>>>=0;k>>>=0;n||Gn(e,k,this.length);n=this[e];for(var b=1,d=0;++d<k&&(b*=256);)n+=this[e+d]*b;return n>=128*b&&(n-=Math.pow(2,
8*k)),n};jf.prototype.readIntBE=function(e,k,n){e>>>=0;k>>>=0;n||Gn(e,k,this.length);n=k;for(var b=1,d=this[e+--n];0<n&&(b*=256);)d+=this[e+--n]*b;return d>=128*b&&(d-=Math.pow(2,8*k)),d};jf.prototype.readInt8=function(e,k){return e>>>=0,k||Gn(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]};jf.prototype.readInt16LE=function(e,k){e>>>=0;k||Gn(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e};jf.prototype.readInt16BE=function(e,k){e>>>=0;k||Gn(e,2,this.length);e=this[e+
1]|this[e]<<8;return 32768&e?4294901760|e:e};jf.prototype.readInt32LE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};jf.prototype.readInt32BE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};jf.prototype.readFloatLE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),xD.read(this,e,!0,23,4)};jf.prototype.readFloatBE=function(e,k){return e>>>=0,k||Gn(e,4,this.length),xD.read(this,e,!1,23,4)};jf.prototype.readDoubleLE=
function(e,k){return e>>>=0,k||Gn(e,8,this.length),xD.read(this,e,!0,52,8)};jf.prototype.readDoubleBE=function(e,k){return e>>>=0,k||Gn(e,8,this.length),xD.read(this,e,!1,52,8)};jf.prototype.writeUIntLE=function(e,k,n,b){(e=+e,k>>>=0,n>>>=0,b)||Up(this,e,k,n,Math.pow(2,8*n)-1,0);b=1;var d=0;for(this[k]=255&e;++d<n&&(b*=256);)this[k+d]=e/b&255;return k+n};jf.prototype.writeUIntBE=function(e,k,n,b){(e=+e,k>>>=0,n>>>=0,b)||Up(this,e,k,n,Math.pow(2,8*n)-1,0);b=n-1;var d=1;for(this[k+b]=255&e;0<=--b&&
(d*=256);)this[k+b]=e/d&255;return k+n};jf.prototype.writeUInt8=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,1,255,0),this[k]=255&e,k+1};jf.prototype.writeUInt16LE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,2,65535,0),this[k]=255&e,this[k+1]=e>>>8,k+2};jf.prototype.writeUInt16BE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,2,65535,0),this[k]=e>>>8,this[k+1]=255&e,k+2};jf.prototype.writeUInt32LE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,4,4294967295,0),this[k+3]=e>>>24,this[k+
2]=e>>>16,this[k+1]=e>>>8,this[k]=255&e,k+4};jf.prototype.writeUInt32BE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,4,4294967295,0),this[k]=e>>>24,this[k+1]=e>>>16,this[k+2]=e>>>8,this[k+3]=255&e,k+4};jf.prototype.writeIntLE=function(e,k,n,b){(e=+e,k>>>=0,b)||(b=Math.pow(2,8*n-1),Up(this,e,k,n,b-1,-b));b=0;var d=1,m=0;for(this[k]=255&e;++b<n&&(d*=256);)0>e&&0===m&&0!==this[k+b-1]&&(m=1),this[k+b]=(e/d>>0)-m&255;return k+n};jf.prototype.writeIntBE=function(e,k,n,b){(e=+e,k>>>=0,b)||(b=Math.pow(2,
8*n-1),Up(this,e,k,n,b-1,-b));b=n-1;var d=1,m=0;for(this[k+b]=255&e;0<=--b&&(d*=256);)0>e&&0===m&&0!==this[k+b+1]&&(m=1),this[k+b]=(e/d>>0)-m&255;return k+n};jf.prototype.writeInt8=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,1,127,-128),0>e&&(e=255+e+1),this[k]=255&e,k+1};jf.prototype.writeInt16LE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,2,32767,-32768),this[k]=255&e,this[k+1]=e>>>8,k+2};jf.prototype.writeInt16BE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,2,32767,-32768),this[k]=
e>>>8,this[k+1]=255&e,k+2};jf.prototype.writeInt32LE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,4,2147483647,-2147483648),this[k]=255&e,this[k+1]=e>>>8,this[k+2]=e>>>16,this[k+3]=e>>>24,k+4};jf.prototype.writeInt32BE=function(e,k,n){return e=+e,k>>>=0,n||Up(this,e,k,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[k]=e>>>24,this[k+1]=e>>>16,this[k+2]=e>>>8,this[k+3]=255&e,k+4};jf.prototype.writeFloatLE=function(e,k,n){return $2(this,e,k,!0,n)};jf.prototype.writeFloatBE=function(e,k,n){return $2(this,
e,k,!1,n)};jf.prototype.writeDoubleLE=function(e,k,n){return a3(this,e,k,!0,n)};jf.prototype.writeDoubleBE=function(e,k,n){return a3(this,e,k,!1,n)};jf.prototype.copy=function(e,k,n,b){if(!jf.isBuffer(e))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),k>=e.length&&(k=e.length),k||(k=0),0<b&&b<n&&(b=n),b===n)||0===e.length||0===this.length)return 0;if(0>k)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");
if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);e.length-k<b-n&&(b=e.length-k+n);var d=b-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(k,n,b);else if(this===e&&n<k&&k<b)for(b=d-1;0<=b;--b)e[b+k]=this[b+n];else Uint8Array.prototype.set.call(e,this.subarray(n,b),k);return d};jf.prototype.fill=function(e,k,n,b){if("string"==typeof e){if("string"==typeof k?(b=k,k=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==
b&&"string"!=typeof b)throw new TypeError("encoding must be a string");if("string"==typeof b&&!jf.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===e.length){var d=e.charCodeAt(0);("utf8"===b&&128>d||"latin1"===b)&&(e=d)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(0>k||this.length<k||this.length<n)throw new RangeError("Out of range index");if(n<=k)return this;if(k>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(b=k;b<n;++b)this[b]=e;else{d=
jf.isBuffer(e)?e:jf.from(e,b);var m=d.length;if(0===m)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(b=0;b<n-k;++b)this[b+k]=d[b%m]}return this};var sha=/[^+/0-9A-Za-z-_]/g,rha=function(){for(var e=Array(256),k=0;16>k;++k)for(var n=16*k,b=0;16>b;++b)e[n+b]="0123456789abcdef"[k]+"0123456789abcdef"[b];return e}(),zN={},AN=ij,Uu=AN.Buffer;Uu.from&&Uu.alloc&&Uu.allocUnsafe&&Uu.allocUnsafeSlow?zN=AN:(b3(AN,zN),zN.Buffer=OA);OA.prototype=Object.create(Uu.prototype);b3(Uu,OA);
OA.from=function(e,k,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Uu(e,k,n)};OA.alloc=function(e,k,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=Uu(e);return void 0!==k?"string"==typeof n?e.fill(k,n):e.fill(k):e.fill(0),e};OA.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Uu(e)};OA.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");
return AN.SlowBuffer(e)};var Lj=zN,yD={},NR=Lj.Buffer,c3=NR.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};yD.StringDecoder=pG;pG.prototype.write=function(e){if(0===e.length)return"";var k;if(this.lastNeed){if(void 0===(k=this.fillLast(e)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<e.length?k?k+this.text(e,
n):this.text(e,n):k||""};pG.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"\ufffd":e};pG.prototype.text=function(e,k){var n=e.length-1;if(n<k)n=0;else{var b=OR(e[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<k||-2===b?0:0<=(b=OR(e[n]))?(0<b&&(this.lastNeed=b-2),b):--n<k||-2===b?0:0<=(b=OR(e[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return e.toString("utf8",k);this.lastTotal=n;b=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,b),e.toString("utf8",
k,b)};pG.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};var XK=Vu.EventEmitter,at={},d3={};Ir("ERR_INVALID_OPT_VALUE",function(e,k){return'The value "'+k+'" is invalid for option "'+e+'"'},TypeError);Ir("ERR_INVALID_ARG_TYPE",function(e,k,n){var b;e=("string"==typeof k&&"not "===
k.substr(0,4)?(b="must not be",k=k.replace(/^not /,"")):b="must be",function(d,m,a){return(void 0===a||a>d.length)&&(a=d.length),d.substring(a-m.length,a)===m}(e," argument"))?"The "+e+" "+b+" "+e3(k,"type"):'The "'+e+'" '+(function(d,m,a){return"number"!=typeof a&&(a=0),!(a+m.length>d.length)&&-1!==d.indexOf(m,a)}(e,".")?"property":"argument")+" "+b+" "+e3(k,"type");return e+=". Received type "+typeof n,e},TypeError);Ir("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ir("ERR_METHOD_NOT_IMPLEMENTED",
function(e){return"The "+e+" method is not implemented"});Ir("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ir("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ir("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ir("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ir("ERR_STREAM_WRITE_AFTER_END","write after end");Ir("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ir("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+
e},TypeError);Ir("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");at.codes=d3;var m3=function(){throw Error("Readable.from is not available in the browser");},QR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,o3=function(e,k){if(PR("noDeprecation"))return e;var n=!1;return function(){if(!n){if(PR("throwDeprecation"))throw Error(k);PR("traceDeprecation")?console.trace(k):console.warn(k);n=!0}return e.apply(this||QR,arguments)}},BN=ij.Buffer,RV=
ni.inspect,gqa=RV&&RV.custom||"inspect",Fha=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var k;return k=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=
this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,d=""+b.data;b=b.next;)d+=n+b.data;return d}},{key:"concat",value:function(n){if(0===this.length)return BN.alloc(0);for(var b,d,m=BN.allocUnsafe(n>>>0),a=this.head,g=0;a;)n=a.data,b=m,d=g,void BN.prototype.copy.call(n,b,d),g+=a.data.length,a=a.next;
return m}},{key:"consume",value:function(n,b){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):d=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,d=1,m=b.data;for(n-=m.length;b=b.next;){var a=b.data,g=n>a.length?a.length:n;if(g===a.length?m+=a:m+=a.slice(0,n),0==(n-=g)){g===a.length?(++d,b.next?this.head=
b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(g));break}++d}return this.length-=d,m}},{key:"_getBuffer",value:function(n){var b=BN.allocUnsafe(n),d=this.head,m=1;d.data.copy(b);for(n-=d.data.length;d=d.next;){var a=d.data,g=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,g),0==(n-=g)){g===a.length?(++m,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=a.slice(g));break}++m}return this.length-=m,b}},{key:gqa,value:function(n,b){return RV(this,function(d){for(var m=
1;m<arguments.length;m++){var a=null!=arguments[m]?arguments[m]:{};m%2?f3(Object(a),!0).forEach(function(g){var l=a[g];g in d?Object.defineProperty(d,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):d[g]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(a)):f3(Object(a)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(a,g))})}return d}({},b,{depth:0,customInspect:!1}))}}],Aha(e.prototype,k),e}(),IB=Zj,k3={destroy:function(e,
k){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||b?(k?k(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,IB.nextTick(RR,this,e)):IB.nextTick(RR,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!k&&d?n._writableState?n._writableState.errorEmitted?IB.nextTick(WK,n):
(n._writableState.errorEmitted=!0,IB.nextTick(g3,n,d)):IB.nextTick(g3,n,d):k?(IB.nextTick(WK,n),k(d)):IB.nextTick(WK,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=
!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,k){var n=e._readableState,b=e._writableState;n&&n.autoDestroy||b&&b.autoDestroy?e.destroy(k):e.emit("error",k)}},hqa=at.codes.ERR_INVALID_OPT_VALUE,l3={getHighWaterMark:function(e,k,n,b){k=null!=k.highWaterMark?k.highWaterMark:b?k[n]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new hqa(b?n:"highWaterMark",k);return Math.floor(k)}return e.objectMode?16:16384}},M$=at.codes.ERR_STREAM_PREMATURE_CLOSE,SV,h3=Zj,iqa=function d(k,
n,b){if("function"==typeof n)return d(k,null,n);n||(n={});b=function(G){var I=!1;return function(){if(!I){I=!0;for(var M=arguments.length,L=Array(M),S=0;S<M;S++)L[S]=arguments[S];G.apply(this,L)}}}(b||Bha);var m=n.readable||!1!==n.readable&&k.readable,a=n.writable||!1!==n.writable&&k.writable,g=function(){k.writable||r()},l=k._writableState&&k._writableState.finished,r=function(){a=!1;l=!0;m||b.call(k)},v=k._readableState&&k._readableState.endEmitted,y=function(){m=!1;v=!0;a||b.call(k)},A=function(G){b.call(k,
G)},E=function(){var G;return m&&!v?(k._readableState&&k._readableState.ended||(G=new M$),b.call(k,G)):a&&!l?(k._writableState&&k._writableState.ended||(G=new M$),b.call(k,G)):void 0},F=function(){k.req.on("finish",r)};return k.setHeader&&"function"==typeof k.abort?(k.on("complete",r),k.on("abort",E),k.req?F():k.on("request",F)):a&&!k._writableState&&(k.on("end",g),k.on("close",g)),k.on("end",y),k.on("finish",r),!1!==n.error&&k.on("error",A),k.on("close",E),function(){k.removeListener("complete",
r);k.removeListener("abort",E);k.removeListener("request",F);k.req&&k.req.removeListener("finish",r);k.removeListener("end",g);k.removeListener("close",g);k.removeListener("finish",r);k.removeListener("end",y);k.removeListener("error",A);k.removeListener("close",E)}},wy=Symbol("lastResolve"),RA=Symbol("lastReject"),MH=Symbol("error"),CN=Symbol("ended"),QA=Symbol("lastPromise"),TV=Symbol("handlePromise"),PA=Symbol("stream"),jqa=Object.getPrototypeOf(function(){}),kqa=Object.setPrototypeOf((uy(SV={get stream(){return this[PA]},
next:function(){var k=this,n=this[MH];if(null!==n)return Promise.reject(n);if(this[CN])return Promise.resolve(vy(void 0,!0));if(this[PA].destroyed)return new Promise(function(b,d){h3.nextTick(function(){k[MH]?d(k[MH]):b(vy(void 0,!0))})});if(n=this[QA])n=new Promise(function(b,d){return function(m,a){b.then(function(){if(d[CN])return m(vy(void 0,!0)),void 0;d[TV](m,a)},a)}}(n,this));else{n=this[PA].read();if(null!==n)return Promise.resolve(vy(n,!1));n=new Promise(this[TV])}return this[QA]=n,n}},Symbol.asyncIterator,
function(){return this}),uy(SV,"return",function(){var k=this;return new Promise(function(n,b){k[PA].destroy(null,function(d){if(d)return b(d),void 0;n(vy(void 0,!0))})})}),SV),jqa),Gha=function(k){var n,b=Object.create(kqa,(uy(n={},PA,{value:k,writable:!0}),uy(n,wy,{value:null,writable:!0}),uy(n,RA,{value:null,writable:!0}),uy(n,MH,{value:null,writable:!0}),uy(n,CN,{value:k._readableState.endEmitted,writable:!0}),uy(n,TV,{value:function(d,m){var a=b[PA].read();a?(b[QA]=null,b[wy]=null,b[RA]=null,
d(vy(a,!1))):(b[wy]=d,b[RA]=m)},writable:!0}),n));return b[QA]=null,iqa(k,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==d.code){var m=b[RA];return null!==m&&(b[QA]=null,b[wy]=null,b[RA]=null,m(d)),b[MH]=d,void 0}d=b[wy];null!==d&&(b[QA]=null,b[wy]=null,b[RA]=null,d(vy(void 0,!0)));b[CN]=!0}),k.on("readable",Dha.bind(null,b)),b},SR={},j3=!1,Eha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TR={},n3=!1,Iha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?
self:global,UR={},p3=!1,lqa=i3(),N$=at.codes.ERR_STREAM_PREMATURE_CLOSE,aS=function m(n,b,d){if("function"==typeof b)return m(n,null,b);b||(b={});d=function(I){var M=!1;return function(){if(!M){M=!0;for(var L=arguments.length,S=Array(L),R=0;R<L;R++)S[R]=arguments[R];I.apply(this,S)}}}(d||Jha);var a=b.readable||!1!==b.readable&&n.readable,g=b.writable||!1!==b.writable&&n.writable,l=function(){n.writable||v()},r=n._writableState&&n._writableState.finished,v=function(){g=!1;r=!0;a||d.call(n)},y=n._readableState&&
n._readableState.endEmitted,A=function(){a=!1;y=!0;g||d.call(n)},E=function(I){d.call(n,I)},F=function(){var I;return a&&!y?(n._readableState&&n._readableState.ended||(I=new N$),d.call(n,I)):g&&!r?(n._writableState&&n._writableState.ended||(I=new N$),d.call(n,I)):void 0},G=function(){n.req.on("finish",v)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",v),n.on("abort",F),n.req?G():n.on("request",G)):g&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",A),n.on("finish",
v),!1!==b.error&&n.on("error",E),n.on("close",F),function(){n.removeListener("complete",v);n.removeListener("abort",F);n.removeListener("request",G);n.req&&n.req.removeListener("finish",v);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",v);n.removeListener("end",A);n.removeListener("error",E);n.removeListener("close",F)}},DN=ij.Buffer,UV=ni.inspect,mqa=UV&&UV.custom||"inspect",Pha=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(d){d={data:d,next:null};0<this.length?this.tail.next=d:this.head=d;this.tail=d;++this.length}},{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var m=this.head,a=""+m.data;m=m.next;)a+=d+m.data;return a}},{key:"concat",value:function(d){if(0===this.length)return DN.alloc(0);for(var m,a,g=DN.allocUnsafe(d>>>0),l=this.head,r=0;l;)d=l.data,m=g,a=r,void DN.prototype.copy.call(d,m,a),r+=l.data.length,l=l.next;return g}},{key:"consume",value:function(d,m){var a;return d<this.head.data.length?(a=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):
a=d===this.head.data.length?this.shift():m?this._getString(d):this._getBuffer(d),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var m=this.head,a=1,g=m.data;for(d-=g.length;m=m.next;){var l=m.data,r=d>l.length?l.length:d;if(r===l.length?g+=l:g+=l.slice(0,d),0==(d-=r)){r===l.length?(++a,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=l.slice(r));break}++a}return this.length-=a,g}},{key:"_getBuffer",value:function(d){var m=DN.allocUnsafe(d),
a=this.head,g=1;a.data.copy(m);for(d-=a.data.length;a=a.next;){var l=a.data,r=d>l.length?l.length:d;if(l.copy(m,m.length-d,0,r),0==(d-=r)){r===l.length?(++g,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=l.slice(r));break}++g}return this.length-=g,m}},{key:mqa,value:function(d,m){return UV(this,function(a){for(var g=1;g<arguments.length;g++){var l=null!=arguments[g]?arguments[g]:{};g%2?q3(Object(l),!0).forEach(function(r){var v=l[r];r in a?Object.defineProperty(a,r,{value:v,
enumerable:!0,configurable:!0,writable:!0}):a[r]=v}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):q3(Object(l)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(l,r))})}return a}({},m,{depth:0,customInspect:!1}))}}],Kha(n.prototype,b),n}(),JB=Zj,u3={destroy:function(n,b){var d=this,m=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||m?(b?b(n):n&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,JB.nextTick(VR,this,n)):JB.nextTick(VR,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?d._writableState?d._writableState.errorEmitted?JB.nextTick(YK,d):(d._writableState.errorEmitted=!0,JB.nextTick(r3,d,a)):JB.nextTick(r3,d,a):b?(JB.nextTick(YK,d),b(a)):JB.nextTick(YK,d)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var d=n._readableState,m=n._writableState;d&&d.autoDestroy||m&&m.autoDestroy?n.destroy(b):
n.emit("error",b)}},nqa=at.codes.ERR_INVALID_OPT_VALUE,VV,v3={getHighWaterMark:function(n,b,d,m){b=null!=b.highWaterMark?b.highWaterMark:m?b[d]:null;if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new nqa(m?d:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},s3=Zj,oqa=aS,zy=Symbol("lastResolve"),UA=Symbol("lastReject"),NH=Symbol("error"),EN=Symbol("ended"),TA=Symbol("lastPromise"),WV=Symbol("handlePromise"),SA=Symbol("stream"),pqa=Object.getPrototypeOf(function(){}),
qqa=Object.setPrototypeOf((xy(VV={get stream(){return this[SA]},next:function(){var n=this,b=this[NH];if(null!==b)return Promise.reject(b);if(this[EN])return Promise.resolve(yy(void 0,!0));if(this[SA].destroyed)return new Promise(function(d,m){s3.nextTick(function(){n[NH]?m(n[NH]):d(yy(void 0,!0))})});if(b=this[TA])b=new Promise(function(d,m){return function(a,g){d.then(function(){if(m[EN])return a(yy(void 0,!0)),void 0;m[WV](a,g)},g)}}(b,this));else{b=this[SA].read();if(null!==b)return Promise.resolve(yy(b,
!1));b=new Promise(this[WV])}return this[TA]=b,b}},Symbol.asyncIterator,function(){return this}),xy(VV,"return",function(){var n=this;return new Promise(function(b,d){n[SA].destroy(null,function(m){if(m)return d(m),void 0;b(yy(void 0,!0))})})}),VV),pqa),Qha=function(n){var b,d=Object.create(qqa,(xy(b={},SA,{value:n,writable:!0}),xy(b,zy,{value:null,writable:!0}),xy(b,UA,{value:null,writable:!0}),xy(b,NH,{value:null,writable:!0}),xy(b,EN,{value:n._readableState.endEmitted,writable:!0}),xy(b,WV,{value:function(m,
a){var g=d[SA].read();g?(d[TA]=null,d[zy]=null,d[UA]=null,m(yy(g,!1))):(d[zy]=m,d[UA]=a)},writable:!0}),b));return d[TA]=null,oqa(n,function(m){if(m&&"ERR_STREAM_PREMATURE_CLOSE"!==m.code){var a=d[UA];return null!==a&&(d[TA]=null,d[zy]=null,d[UA]=null,a(m)),d[NH]=m,void 0}m=d[zy];null!==m&&(d[TA]=null,d[zy]=null,d[UA]=null,m(yy(void 0,!0)));d[EN]=!0}),n.on("readable",Mha.bind(null,d)),d},WR={},t3=!1,Oha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,YR={},x3=!1,Rha=
"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ZR={},y3=!1,rqa=w3(),O$=qG(),FN=at.codes,sqa=FN.ERR_METHOD_NOT_IMPLEMENTED,Tha=FN.ERR_MULTIPLE_CALLBACK,Wha=FN.ERR_TRANSFORM_ALREADY_TRANSFORMING,Vha=FN.ERR_TRANSFORM_WITH_LENGTH_0,$K=O$;Pi(Wu,$K);Wu.prototype.push=function(n,b){return this._transformState.needTransform=!1,$K.prototype.push.call(this,n,b)};Wu.prototype._transform=function(n,b,d){d(new sqa("_transform()"))};Wu.prototype._write=function(n,b,d){var m=this._transformState;
(m.writecb=d,m.writechunk=n,m.writeencoding=b,m.transforming)||(n=this._readableState,(m.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};Wu.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};Wu.prototype._destroy=function(n,b){$K.prototype._destroy.call(this,n,function(d){b(d)})};var A3=Wu;Pi(rG,A3);rG.prototype._transform=
function(n,b,d){d(null,n)};var $R,P$=at.codes,tqa=P$.ERR_MISSING_ARGS,Yha=P$.ERR_STREAM_DESTROYED,cS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bS=Vu.EventEmitter;Pi(Jr,bS);Jr.Readable=lqa;Jr.Writable=rqa;Jr.Duplex=O$;Jr.Transform=Wu;Jr.PassThrough=rG;Jr.finished=aS;Jr.pipeline=function(){for(var n=arguments.length,b=Array(n),d=0;d<n;d++)b[d]=arguments[d];var m,a=b.length?"function"!=typeof b[b.length-1]?B3:b.pop():B3;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new tqa("streams");
var g=b.map(function(l,r){var v=r<b.length-1;return Xha(l,v,0<r,function(y){m||(m=y);y&&g.forEach(C3);v||(g.forEach(C3),a(m))})});return b.reduce(Zha)};Jr.Stream=Jr;Jr.prototype.pipe=function(n,b){function d(A){n.writable&&!1===n.write(A)&&v.pause&&v.pause()}function m(){v.readable&&v.resume&&v.resume()}function a(){y||(y=!0,n.end())}function g(){y||(y=!0,"function"==typeof n.destroy&&n.destroy())}function l(A){if(r(),0===bS.listenerCount(this||cS,"error"))throw A;}function r(){v.removeListener("data",
d);n.removeListener("drain",m);v.removeListener("end",a);v.removeListener("close",g);v.removeListener("error",l);n.removeListener("error",l);v.removeListener("end",r);v.removeListener("close",r);n.removeListener("close",r)}var v=this||cS;v.on("data",d);n.on("drain",m);n._isStdio||b&&!1===b.end||(v.on("end",a),v.on("close",g));var y=!1;return v.on("error",l),n.on("error",l),v.on("end",r),v.on("close",r),n.on("close",r),n.emit("pipe",v),n};var gB=Jr,GN="undefined"!=typeof globalThis?globalThis:"undefined"!=
typeof self?self:global,$A={},wE=function(n){if(Object.keys)return Object.keys(n);var b=[],d;for(d in n)b.push(d);return b},KB=function(n,b){if(n.forEach)return n.forEach(b);for(var d=0;d<n.length;d++)b(n[d],d,n)},uqa=function(){try{return Object.defineProperty({},"_",{}),function(n,b,d){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(n){return function(b,d,m){b[d]=m}}}(),Q$="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
aL.prototype={};var wv=$A.Script=function(n){if(!((this||GN)instanceof wv))return new wv(n);(this||GN).code=n};wv.prototype.runInContext=function(n){if(!(n instanceof aL))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var d=b.contentWindow,m=d.eval,a=d.execScript;!m&&a&&(a.call(d,"null"),m=d.eval);KB(wE(n),function(l){d[l]=n[l]});KB(Q$,function(l){n[l]&&(d[l]=n[l])});var g=wE(d);m=
m.call(d,(this||GN).code);return KB(wE(d),function(l){var r;if(!(r=l in n)){a:if(g.indexOf)r=g.indexOf(l);else{for(r=0;r<g.length;r++)if(g[r]===l)break a;r=-1}r=-1===r}r&&(n[l]=d[l])}),KB(Q$,function(l){l in n||uqa(n,l,d[l])}),document.body.removeChild(b),m};wv.prototype.runInThisContext=function(){return eval((this||GN).code)};wv.prototype.runInNewContext=function(n){var b=wv.createContext(n),d=this.runInContext(b);return n&&KB(wE(b),function(m){n[m]=b[m]}),d};KB(wE(wv.prototype),function(n){$A[n]=
wv[n]=function(b){var d=wv(b);return d[n].apply(d,[].slice.call(arguments,1))}});$A.isContext=function(n){return n instanceof aL};$A.createScript=function(n){return $A.Script(n)};$A.createContext=wv.createContext=function(n){var b=new aL;return"object"==typeof n&&KB(wE(n),function(d){b[d]=n[d]}),b};var R$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vqa=Zj,wqa=Lj.Buffer,HN=R$.crypto||R$.msCrypto,hz=HN&&HN.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var d=wqa.allocUnsafe(n);if(0<n)if(65536<n)for(var m=0;m<n;m+=65536)HN.getRandomValues(d.slice(m,m+65536));else HN.getRandomValues(d);return"function"==typeof b?vqa.nextTick(function(){b(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},bL=Lj.Buffer,D3=gB.Transform;Pi(Hw,D3);Hw.prototype._transform=function(n,b,d){var m=null;try{this.update(n,b)}catch(a){m=a}d(m)};Hw.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(d){b=d}n(b)};Hw.prototype.update=function(n,b){var d=n;if(!bL.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");bL.isBuffer(n)||(n=bL.from(n,b));b=this._block;for(d=0;this._blockOffset+n.length-d>=this._blockSize;){for(var m=this._blockOffset;m<this._blockSize;)b[m++]=n[d++];this._update();this._blockOffset=0}for(;d<n.length;)b[this._blockOffset++]=n[d++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};Hw.prototype._update=function(){throw Error("_update is not implemented");};Hw.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};Hw.prototype._digest=function(){throw Error("_digest is not implemented");
};var E3=Hw,xqa=Lj.Buffer,Kg=Array(16);Pi(zD,E3);zD.prototype._update=function(){for(var n=0;16>n;++n)Kg[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,d=this._c,m=this._d;n=Co(n,b,d,m,Kg[0],3614090360,7);m=Co(m,n,b,d,Kg[1],3905402710,12);d=Co(d,m,n,b,Kg[2],606105819,17);b=Co(b,d,m,n,Kg[3],3250441966,22);n=Co(n,b,d,m,Kg[4],4118548399,7);m=Co(m,n,b,d,Kg[5],1200080426,12);d=Co(d,m,n,b,Kg[6],2821735955,17);b=Co(b,d,m,n,Kg[7],4249261313,22);n=Co(n,b,d,m,Kg[8],1770035416,7);m=Co(m,n,b,d,Kg[9],
2336552879,12);d=Co(d,m,n,b,Kg[10],4294925233,17);b=Co(b,d,m,n,Kg[11],2304563134,22);n=Co(n,b,d,m,Kg[12],1804603682,7);m=Co(m,n,b,d,Kg[13],4254626195,12);d=Co(d,m,n,b,Kg[14],2792965006,17);n=Do(n,b=Co(b,d,m,n,Kg[15],1236535329,22),d,m,Kg[1],4129170786,5);m=Do(m,n,b,d,Kg[6],3225465664,9);d=Do(d,m,n,b,Kg[11],643717713,14);b=Do(b,d,m,n,Kg[0],3921069994,20);n=Do(n,b,d,m,Kg[5],3593408605,5);m=Do(m,n,b,d,Kg[10],38016083,9);d=Do(d,m,n,b,Kg[15],3634488961,14);b=Do(b,d,m,n,Kg[4],3889429448,20);n=Do(n,b,d,
m,Kg[9],568446438,5);m=Do(m,n,b,d,Kg[14],3275163606,9);d=Do(d,m,n,b,Kg[3],4107603335,14);b=Do(b,d,m,n,Kg[8],1163531501,20);n=Do(n,b,d,m,Kg[13],2850285829,5);m=Do(m,n,b,d,Kg[2],4243563512,9);d=Do(d,m,n,b,Kg[7],1735328473,14);n=Eo(n,b=Do(b,d,m,n,Kg[12],2368359562,20),d,m,Kg[5],4294588738,4);m=Eo(m,n,b,d,Kg[8],2272392833,11);d=Eo(d,m,n,b,Kg[11],1839030562,16);b=Eo(b,d,m,n,Kg[14],4259657740,23);n=Eo(n,b,d,m,Kg[1],2763975236,4);m=Eo(m,n,b,d,Kg[4],1272893353,11);d=Eo(d,m,n,b,Kg[7],4139469664,16);b=Eo(b,
d,m,n,Kg[10],3200236656,23);n=Eo(n,b,d,m,Kg[13],681279174,4);m=Eo(m,n,b,d,Kg[0],3936430074,11);d=Eo(d,m,n,b,Kg[3],3572445317,16);b=Eo(b,d,m,n,Kg[6],76029189,23);n=Eo(n,b,d,m,Kg[9],3654602809,4);m=Eo(m,n,b,d,Kg[12],3873151461,11);d=Eo(d,m,n,b,Kg[15],530742520,16);n=Fo(n,b=Eo(b,d,m,n,Kg[2],3299628645,23),d,m,Kg[0],4096336452,6);m=Fo(m,n,b,d,Kg[7],1126891415,10);d=Fo(d,m,n,b,Kg[14],2878612391,15);b=Fo(b,d,m,n,Kg[5],4237533241,21);n=Fo(n,b,d,m,Kg[12],1700485571,6);m=Fo(m,n,b,d,Kg[3],2399980690,10);d=
Fo(d,m,n,b,Kg[10],4293915773,15);b=Fo(b,d,m,n,Kg[1],2240044497,21);n=Fo(n,b,d,m,Kg[8],1873313359,6);m=Fo(m,n,b,d,Kg[15],4264355552,10);d=Fo(d,m,n,b,Kg[6],2734768916,15);b=Fo(b,d,m,n,Kg[13],1309151649,21);n=Fo(n,b,d,m,Kg[4],4149444226,6);m=Fo(m,n,b,d,Kg[11],3174756917,10);d=Fo(d,m,n,b,Kg[2],718787259,15);b=Fo(b,d,m,n,Kg[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+d|0;this._d=this._d+m|0};zD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=xqa.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var XV=ij.Buffer,F3=Hw,xt=Array(16),OH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],PH=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],QH=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],RH=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],SH=[0,1518500249,1859775393,2400959708,2840853838],TH=[1352829926,1548603684,1836072691,2053994217,0];Pi(AD,F3);AD.prototype._update=function(){for(var n=0;16>n;++n)xt[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var d=0|this._c,m=0|this._d,a=0|this._e,g=0|this._a,l=0|this._b,r=0|this._c,
v=0|this._d,y=0|this._e,A=0;80>A;A+=1){if(16>A){var E=a;E=Kr(b+(n^d^m)+xt[OH[A]]+SH[0]|0,QH[A])+E|0;b=y;var F=Kr(g+(l^(r|~v))+xt[PH[A]]+TH[0]|0,RH[A])+b|0}else 32>A?(E=a,E=Kr(b+(n&d|~n&m)+xt[OH[A]]+SH[1]|0,QH[A])+E|0,b=y,F=Kr(g+(l&v|r&~v)+xt[PH[A]]+TH[1]|0,RH[A])+b|0):48>A?(E=a,E=Kr(b+((n|~d)^m)+xt[OH[A]]+SH[2]|0,QH[A])+E|0,b=y,F=Kr(g+((l|~r)^v)+xt[PH[A]]+TH[2]|0,RH[A])+b|0):64>A?(E=a,E=Kr(b+(n&m|d&~m)+xt[OH[A]]+SH[3]|0,QH[A])+E|0,b=y,F=Kr(g+(l&r|~l&v)+xt[PH[A]]+TH[3]|0,RH[A])+b|0):(E=a,E=Kr(b+(n^
(d|~m))+xt[OH[A]]+SH[4]|0,QH[A])+E|0,b=y,F=Kr(g+(l^r^v)+xt[PH[A]]+TH[4]|0,RH[A])+b|0);b=a;a=m;m=Kr(d,10);d=n;n=E;g=y;y=v;v=Kr(r,10);r=l;l=F}d=this._b+d+v|0;this._b=this._c+m+y|0;this._c=this._d+a+g|0;this._d=this._e+b+l|0;this._e=this._a+n+r|0;this._a=d};AD.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=XV.alloc?XV.alloc(20):new XV(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var Bl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,G3=Lj.Buffer;Iw.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=G3.from(n,b));b=(this||Bl)._block;for(var d=(this||Bl)._blockSize,m=n.length,a=(this||Bl)._len,
g=0;g<m;){for(var l=a%d,r=Math.min(m-g,d-l),v=0;v<r;v++)b[l+v]=n[g+v];g+=r;0==(a+=r)%d&&this._update(b)}return(this||Bl)._len+=m,this||Bl};Iw.prototype.digest=function(n){var b=(this||Bl)._len%(this||Bl)._blockSize;(this||Bl)._block[b]=128;(this||Bl)._block.fill(0,b+1);b>=(this||Bl)._finalSize&&(this._update((this||Bl)._block),(this||Bl)._block.fill(0));b=8*(this||Bl)._len;if(4294967295>=b)(this||Bl)._block.writeUInt32BE(b,(this||Bl)._blockSize-4);else{var d=(4294967295&b)>>>0;(this||Bl)._block.writeUInt32BE((b-
d)/4294967296,(this||Bl)._blockSize-8);(this||Bl)._block.writeUInt32BE(d,(this||Bl)._blockSize-4)}this._update((this||Bl)._block);b=this._hash();return n?b.toString(n):b};Iw.prototype._update=function(){throw Error("_update must be implemented by subclass");};var Ii="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,H3=Iw,yqa=Lj.Buffer,zqa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],$ha=Array(64);Pi(BD,H3);BD.prototype.init=function(){return(this||Ii)._a=1779033703,(this||Ii)._b=3144134277,(this||Ii)._c=1013904242,(this||Ii)._d=2773480762,(this||Ii)._e=1359893119,(this||Ii)._f=2600822924,(this||Ii)._g=528734635,(this||Ii)._h=1541459225,this||Ii};BD.prototype._update=function(n){for(var b,d=(this||Ii)._w,m=0|(this||Ii)._a,a=0|(this||Ii)._b,g=0|(this||Ii)._c,l=0|(this||Ii)._d,r=0|(this||Ii)._e,v=0|(this||Ii)._f,y=0|(this||Ii)._g,A=0|
(this||Ii)._h,E=0;16>E;++E)d[E]=n.readInt32BE(4*E);for(;64>E;++E){n=E;var F=(((b=d[E-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+d[E-7],G=d[E-15];d[n]=0|F+((G>>>7|G<<25)^(G>>>18|G<<14)^G>>>3)+d[E-16]}for(b=0;64>b;++b)E=A+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(y^r&(v^y))+zqa[b]+d[b]|0,n=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&a|g&(m|a))|0,A=y,y=v,v=r,r=l+E|0,l=g,g=a,a=m,m=E+n|0;(this||Ii)._a=m+(this||Ii)._a|0;(this||Ii)._b=a+(this||Ii)._b|0;(this||Ii)._c=g+(this||Ii)._c|0;(this||Ii)._d=
l+(this||Ii)._d|0;(this||Ii)._e=r+(this||Ii)._e|0;(this||Ii)._f=v+(this||Ii)._f|0;(this||Ii)._g=y+(this||Ii)._g|0;(this||Ii)._h=A+(this||Ii)._h|0};BD.prototype._hash=function(){var n=yqa.allocUnsafe(32);return n.writeInt32BE((this||Ii)._a,0),n.writeInt32BE((this||Ii)._b,4),n.writeInt32BE((this||Ii)._c,8),n.writeInt32BE((this||Ii)._d,12),n.writeInt32BE((this||Ii)._e,16),n.writeInt32BE((this||Ii)._f,20),n.writeInt32BE((this||Ii)._g,24),n.writeInt32BE((this||Ii)._h,28),n};var Nk="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,I3=Iw,Aqa=Lj.Buffer,Bqa=[1518500249,1859775393,-1894007588,-899497514],aia=Array(80);Pi(sG,I3);sG.prototype.init=function(){return(this||Nk)._a=1732584193,(this||Nk)._b=4023233417,(this||Nk)._c=2562383102,(this||Nk)._d=271733878,(this||Nk)._e=3285377520,this||Nk};sG.prototype._update=function(n){for(var b,d=(this||Nk)._w,m=0|(this||Nk)._a,a=0|(this||Nk)._b,g=0|(this||Nk)._c,l=0|(this||Nk)._d,r=0|(this||Nk)._e,v=0;16>v;++v)d[v]=n.readInt32BE(4*v);for(;80>
v;++v)d[v]=d[v-3]^d[v-8]^d[v-14]^d[v-16];for(n=0;80>n;++n)v=~~(n/20),v=0|((b=m)<<5|b>>>27)+(0===v?a&g|~a&l:2===v?a&g|a&l|g&l:a^g^l)+r+d[n]+Bqa[v],r=l,l=g,g=a<<30|a>>>2,a=m,m=v;(this||Nk)._a=m+(this||Nk)._a|0;(this||Nk)._b=a+(this||Nk)._b|0;(this||Nk)._c=g+(this||Nk)._c|0;(this||Nk)._d=l+(this||Nk)._d|0;(this||Nk)._e=r+(this||Nk)._e|0};sG.prototype._hash=function(){var n=Aqa.allocUnsafe(20);return n.writeInt32BE(0|(this||Nk)._a,0),n.writeInt32BE(0|(this||Nk)._b,4),n.writeInt32BE(0|(this||Nk)._c,8),
n.writeInt32BE(0|(this||Nk)._d,12),n.writeInt32BE(0|(this||Nk)._e,16),n};var Ok="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,J3=Iw,Cqa=Lj.Buffer,Dqa=[1518500249,1859775393,-1894007588,-899497514],bia=Array(80);Pi(tG,J3);tG.prototype.init=function(){return(this||Ok)._a=1732584193,(this||Ok)._b=4023233417,(this||Ok)._c=2562383102,(this||Ok)._d=271733878,(this||Ok)._e=3285377520,this||Ok};tG.prototype._update=function(n){for(var b,d=(this||Ok)._w,m=0|(this||Ok)._a,a=
0|(this||Ok)._b,g=0|(this||Ok)._c,l=0|(this||Ok)._d,r=0|(this||Ok)._e,v=0;16>v;++v)d[v]=n.readInt32BE(4*v);for(;80>v;++v)d[v]=(b=d[v-3]^d[v-8]^d[v-14]^d[v-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(m<<5|m>>>27)+(0===b?a&g|~a&l:2===b?a&g|a&l|g&l:a^g^l)+r+d[n]+Dqa[b]|0,r=l,l=g,g=a<<30|a>>>2,a=m,m=b;(this||Ok)._a=m+(this||Ok)._a|0;(this||Ok)._b=a+(this||Ok)._b|0;(this||Ok)._c=g+(this||Ok)._c|0;(this||Ok)._d=l+(this||Ok)._d|0;(this||Ok)._e=r+(this||Ok)._e|0};tG.prototype._hash=function(){var n=Cqa.allocUnsafe(20);
return n.writeInt32BE(0|(this||Ok)._a,0),n.writeInt32BE(0|(this||Ok)._b,4),n.writeInt32BE(0|(this||Ok)._c,8),n.writeInt32BE(0|(this||Ok)._d,12),n.writeInt32BE(0|(this||Ok)._e,16),n};var Hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dia=Iw,Eqa=Lj.Buffer,cia=Array(64);Pi(dL,BD);dL.prototype.init=function(){return(this||Hn)._a=3238371032,(this||Hn)._b=914150663,(this||Hn)._c=812702999,(this||Hn)._d=4144912697,(this||Hn)._e=4290775857,(this||Hn)._f=1750603025,(this||
Hn)._g=1694076839,(this||Hn)._h=3204075428,this||Hn};dL.prototype._hash=function(){var n=Eqa.allocUnsafe(28);return n.writeInt32BE((this||Hn)._a,0),n.writeInt32BE((this||Hn)._b,4),n.writeInt32BE((this||Hn)._c,8),n.writeInt32BE((this||Hn)._d,12),n.writeInt32BE((this||Hn)._e,16),n.writeInt32BE((this||Hn)._f,20),n.writeInt32BE((this||Hn)._g,24),n};var Jf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,K3=Iw,Fqa=Lj.Buffer,S$=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],eia=Array(160);Pi(CD,K3);CD.prototype.init=function(){return(this||Jf)._ah=1779033703,(this||Jf)._bh=3144134277,(this||Jf)._ch=1013904242,(this||Jf)._dh=2773480762,(this||Jf)._eh=1359893119,(this||Jf)._fh=2600822924,(this||Jf)._gh=528734635,(this||Jf)._hh=1541459225,(this||Jf)._al=4089235720,(this||Jf)._bl=2227873595,(this||Jf)._cl=4271175723,(this||
Jf)._dl=1595750129,(this||Jf)._el=2917565137,(this||Jf)._fl=725511199,(this||Jf)._gl=4215389547,(this||Jf)._hl=327033209,this||Jf};CD.prototype._update=function(n){for(var b=(this||Jf)._w,d=0|(this||Jf)._ah,m=0|(this||Jf)._bh,a=0|(this||Jf)._ch,g=0|(this||Jf)._dh,l=0|(this||Jf)._eh,r=0|(this||Jf)._fh,v=0|(this||Jf)._gh,y=0|(this||Jf)._hh,A=0|(this||Jf)._al,E=0|(this||Jf)._bl,F=0|(this||Jf)._cl,G=0|(this||Jf)._dl,I=0|(this||Jf)._el,M=0|(this||Jf)._fl,L=0|(this||Jf)._gl,S=0|(this||Jf)._hl,R=0;32>R;R+=
2)b[R]=n.readInt32BE(4*R),b[R+1]=n.readInt32BE(4*R+4);for(;160>R;R+=2){n=b[R-30];var aa=b[R-30+1],ra=(n>>>1|aa<<31)^(n>>>8|aa<<24)^n>>>7,Ea=(aa>>>1|n<<31)^(aa>>>8|n<<24)^(aa>>>7|n<<25);var K=n=b[R-4];var Z=aa=b[R-4+1];K=(K>>>19|Z<<13)^(Z>>>29|K<<3)^K>>>6;aa=(aa>>>19|n<<13)^(n>>>29|aa<<3)^(aa>>>6|n<<26);Z=b[R-32];var U=b[R-32+1];n=Ea+b[R-14+1]|0;ra=ra+b[R-14]+In(n,Ea)|0;ra=(ra=ra+K+In(n=n+aa|0,aa)|0)+Z+In(n=n+U|0,U)|0;b[R]=ra;b[R+1]=n}for(R=0;160>R;R+=2){ra=b[R];n=b[R+1];aa=d&m|a&(d|m);var V=A&E|F&
(A|E);Z=(d>>>28|A<<4)^(A>>>2|d<<30)^(A>>>7|d<<25);U=(A>>>28|d<<4)^(d>>>2|A<<30)^(d>>>7|A<<25);var na=S$[R],la=S$[R+1],ya=v^l&(r^v),jb=L^I&(M^L);Ea=S+((I>>>14|l<<18)^(I>>>18|l<<14)^(l>>>9|I<<23))|0;K=y+((l>>>14|I<<18)^(l>>>18|I<<14)^(I>>>9|l<<23))+In(Ea,S)|0;K=(K=(K=K+ya+In(Ea=Ea+jb|0,jb)|0)+na+In(Ea=Ea+la|0,la)|0)+ra+In(Ea=Ea+n|0,n)|0;n=U+V|0;ra=Z+aa+In(n,U)|0;y=v;S=L;v=r;L=M;r=l;M=I;l=g+K+In(I=G+Ea|0,G)|0;g=a;G=F;a=m;F=E;m=d;E=A;d=K+ra+In(A=Ea+n|0,Ea)|0}(this||Jf)._al=(this||Jf)._al+A|0;(this||Jf)._bl=
(this||Jf)._bl+E|0;(this||Jf)._cl=(this||Jf)._cl+F|0;(this||Jf)._dl=(this||Jf)._dl+G|0;(this||Jf)._el=(this||Jf)._el+I|0;(this||Jf)._fl=(this||Jf)._fl+M|0;(this||Jf)._gl=(this||Jf)._gl+L|0;(this||Jf)._hl=(this||Jf)._hl+S|0;(this||Jf)._ah=(this||Jf)._ah+d+In((this||Jf)._al,A)|0;(this||Jf)._bh=(this||Jf)._bh+m+In((this||Jf)._bl,E)|0;(this||Jf)._ch=(this||Jf)._ch+a+In((this||Jf)._cl,F)|0;(this||Jf)._dh=(this||Jf)._dh+g+In((this||Jf)._dl,G)|0;(this||Jf)._eh=(this||Jf)._eh+l+In((this||Jf)._el,I)|0;(this||
Jf)._fh=(this||Jf)._fh+r+In((this||Jf)._fl,M)|0;(this||Jf)._gh=(this||Jf)._gh+v+In((this||Jf)._gl,L)|0;(this||Jf)._hh=(this||Jf)._hh+y+In((this||Jf)._hl,S)|0};CD.prototype._hash=function(){function n(d,m,a){b.writeInt32BE(d,a);b.writeInt32BE(m,a+4)}var b=Fqa.allocUnsafe(64);return n((this||Jf)._ah,(this||Jf)._al,0),n((this||Jf)._bh,(this||Jf)._bl,8),n((this||Jf)._ch,(this||Jf)._cl,16),n((this||Jf)._dh,(this||Jf)._dl,24),n((this||Jf)._eh,(this||Jf)._el,32),n((this||Jf)._fh,(this||Jf)._fl,40),n((this||
Jf)._gh,(this||Jf)._gl,48),n((this||Jf)._hh,(this||Jf)._hl,56),b};var tk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gia=Iw,Gqa=Lj.Buffer,fia=Array(160);Pi(eL,CD);eL.prototype.init=function(){return(this||tk)._ah=3418070365,(this||tk)._bh=1654270250,(this||tk)._ch=2438529370,(this||tk)._dh=355462360,(this||tk)._eh=1731405415,(this||tk)._fh=2394180231,(this||tk)._gh=3675008525,(this||tk)._hh=1203062813,(this||tk)._al=3238371032,(this||tk)._bl=914150663,(this||tk)._cl=
812702999,(this||tk)._dl=4144912697,(this||tk)._el=4290775857,(this||tk)._fl=1750603025,(this||tk)._gl=1694076839,(this||tk)._hl=3204075428,this||tk};eL.prototype._hash=function(){function n(d,m,a){b.writeInt32BE(d,a);b.writeInt32BE(m,a+4)}var b=Gqa.allocUnsafe(48);return n((this||tk)._ah,(this||tk)._al,0),n((this||tk)._bh,(this||tk)._bl,8),n((this||tk)._ch,(this||tk)._cl,16),n((this||tk)._dh,(this||tk)._dl,24),n((this||tk)._eh,(this||tk)._el,32),n((this||tk)._fh,(this||tk)._fl,40),b};var iz,T$=iz=
{};(iz=T$=function(n){n=n.toLowerCase();var b=iz[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=sG;iz.sha1=tG;iz.sha224=dL;iz.sha256=BD;iz.sha384=eL;iz.sha512=CD;var YV=T$,km="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,U$=Lj.Buffer,L3=gB.Transform,Hqa=yD.StringDecoder;Pi(Jn,L3);Jn.prototype.update=function(n,b,d){"string"==typeof n&&(n=U$.from(n,b));n=this._update(n);return(this||km).hashMode?this||km:(d&&(n=this._toString(n,
d)),n)};Jn.prototype.setAutoPadding=function(){};Jn.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Jn.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Jn.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Jn.prototype._transform=function(n,b,d){try{(this||km).hashMode?this._update(n):this.push(this._update(n))}catch(a){var m=a}finally{d(m)}};Jn.prototype._flush=function(n){try{this.push(this.__final())}catch(d){var b=
d}n(b)};Jn.prototype._finalOrDigest=function(n){var b=this.__final()||U$.alloc(0);return n&&(b=this._toString(b,n,!0)),b};Jn.prototype._toString=function(n,b,d){if((this||km)._decoder||((this||km)._decoder=new Hqa(b),(this||km)._encoding=b),(this||km)._encoding!==b)throw Error("can't switch encodings");n=(this||km)._decoder.write(n);return d&&(n+=(this||km)._decoder.end()),n};var M3=Jn;Pi(fL,M3);fL.prototype._update=function(n){this._hash.update(n)};fL.prototype._final=function(){return this._hash.digest()};
var UH=function(n){return"md5"===(n=n.toLowerCase())?new zD:"rmd160"===n||"ripemd160"===n?new AD:new fL(YV(n))},V$=function(n){return(new zD).update(n).digest()},Iqa=Pi,VA=Lj.Buffer,N3=Jn,hia=VA.alloc(128);Iqa(gL,N3);gL.prototype._update=function(n){this._hash.push(n)};gL.prototype._final=function(){var n=this._alg(VA.concat(this._hash));return this._alg(VA.concat([this._opad,n]))};var Jqa=Pi,O3=Jn,vG=Lj.Buffer,dS=AD,eS=YV,iia=vG.alloc(128);Jqa(uG,O3);uG.prototype._update=function(n){this._hash.update(n)};
uG.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new dS:eS(this._alg)).update(this._opad).update(n).digest()};var W$=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new uG("rmd160",b):"md5"===n?new gL(V$,b):new uG(n,b)},X$={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},jia=ij.Buffer,Kqa=Math.pow(2,30)-1,ZV,Y$=function(n,b,d,m){if(P3(n,"Password"),P3(b,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof m)throw new TypeError("Key length not a number");if(0>m||m>Kqa||m!=m)throw new TypeError("Bad key length");},Z$=Zj;Z$.browser?ZV="utf-8":ZV=6<=parseInt(Z$.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var IN=ZV,ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mia=V$,lia=AD,kia=YV,bt=Lj.Buffer,nia=bt.alloc(128),hL={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};Q3.prototype.run=function(n,b){return n.copy(b,(this||ct).blocksize),this.hash(b).copy((this||ct).opad,(this||ct).blocksize),this.hash((this||ct).opad)};var $V,aW=function(n,b,d,m,a){Y$(n,b,d,m);bt.isBuffer(n)||(n=bt.from(n,IN));bt.isBuffer(b)||(b=bt.from(b,
IN));n=new Q3(a=a||"sha1",n,b.length);var g=bt.allocUnsafe(m),l=bt.allocUnsafe(b.length+4);b.copy(l,0,0,b.length);var r=0;a=hL[a];m=Math.ceil(m/a);for(var v=1;v<=m;v++){l.writeUInt32BE(v,b.length);for(var y=n.run(l,n.ipad1),A=y,E=1;E<d;E++){A=n.run(A,n.ipad2);for(var F=0;F<a;F++)y[F]^=A[F]}y.copy(g,r);r+=a}return g},VH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bW=Zj,DD=Lj.Buffer,wG=VH.crypto&&VH.crypto.subtle,Lqa={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},cW=[],JN={pbkdf2:function(n,b,d,m,a,g){"function"==typeof a&&(g=a,a=void 0);var l=Lqa[(a=a||"sha1").toLowerCase()];if(!l||"function"!=typeof VH.Promise)return bW.nextTick(function(){try{var r=aW(n,b,d,m,a)}catch(v){return g(v)}g(null,r)});if(Y$(n,b,d,m),"function"!=typeof g)throw Error("No callback provided to pbkdf2");DD.isBuffer(n)||(n=DD.from(n,IN));DD.isBuffer(b)||(b=DD.from(b,IN));(function(r,v){r.then(function(y){bW.nextTick(function(){v(null,
y)})},function(y){bW.nextTick(function(){v(y)})})})(function(r){if(VH.process&&!VH.process.browser||!wG||!wG.importKey||!wG.deriveBits)return Promise.resolve(!1);if(void 0!==cW[r])return cW[r];var v=R3($V=$V||DD.alloc(8),$V,10,128,r).then(function(){return!0}).catch(function(){return!1});return cW[r]=v,v}(l).then(function(r){return r?R3(n,b,d,m,l):aW(n,b,d,m,a)}),g)}};JN.pbkdf2Sync=aW;S3.equal=function(n,b,d){if(n!=b)throw Error(d||"Assertion failed: "+n+" != "+b);};var Ur=S3,Nl={readUInt32BE:function(n,
b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,d){n[0+d]=b>>>24;n[1+d]=b>>>16&255;n[2+d]=b>>>8&255;n[3+d]=255&b},ip:function(n,b,d,m){for(var a=0,g=0,l=6;0<=l;l-=2){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>>r+l&1}for(l=6;0<=l;l-=2){for(r=1;25>=r;r+=8)g<<=1,g|=b>>>r+l&1;for(r=1;25>=r;r+=8)g<<=1,g|=n>>>r+l&1}d[m+0]=a>>>0;d[m+1]=g>>>0},rip:function(n,b,d,m){for(var a=0,g=0,l=0;4>l;l++)for(var r=24;0<=r;r-=8)a<<=1,a|=b>>>r+l&1,a<<=1,a|=
n>>>r+l&1;for(l=4;8>l;l++)for(r=24;0<=r;r-=8)g<<=1,g|=b>>>r+l&1,g<<=1,g|=n>>>r+l&1;d[m+0]=a>>>0;d[m+1]=g>>>0},pc1:function(n,b,d,m){for(var a=0,g=0,l=7;5<=l;l--){for(var r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(r=0;24>=r;r+=8)a<<=1,a|=n>>r+l&1}for(r=0;24>=r;r+=8)a<<=1,a|=b>>r+l&1;for(l=1;3>=l;l++){for(r=0;24>=r;r+=8)g<<=1,g|=b>>r+l&1;for(r=0;24>=r;r+=8)g<<=1,g|=n>>r+l&1}for(r=0;24>=r;r+=8)g<<=1,g|=n>>r+l&1;d[m+0]=a>>>0;d[m+1]=g>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},KN=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Nl.pc2=function(n,b,d,m){for(var a=0,g=0,l=KN.length>>>1,r=0;r<l;r++)a<<=1,a|=n>>>KN[r]&1;for(r=l;r<KN.length;r++)g<<=1,g|=b>>>KN[r]&1;d[m+0]=a>>>0;d[m+1]=g>>>0};Nl.expand=function(n,b,d){var m=0;var a=(1&n)<<5|n>>>27;for(var g=23;15<=g;g-=4)a<<=6,a|=n>>>g&63;for(g=11;3<=g;g-=4)m|=n>>>g&63,m<<=6;b[d+0]=a>>>0;b[d+1]=(m|(31&n)<<1|n>>>31)>>>0};var $$=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Nl.substitute=function(n,b){for(var d=0,m=0;4>m;m++)d<<=4,d|=$$[64*m+(n>>>18-6*m&63)];for(m=0;4>m;m++)d<<=4,d|=$$[256+64*m+(b>>>18-6*m&63)];return d>>>0};var aaa=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Nl.permute=function(n){for(var b=0,d=0;d<aaa.length;d++)b<<=1,b|=n>>>aaa[d]&
1;return b>>>0};Nl.padSplit=function(n,b,d){for(n=n.toString(2);n.length<b;)n="0"+n;for(var m=[],a=0;a<b;a+=d)m.push(n.slice(a,a+d));return m.join(" ")};var Mqa=Ur;Cq.prototype._init=function(){};Cq.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};Cq.prototype._buffer=function(n,b){for(var d=Math.min(this.buffer.length-this.bufferOff,n.length-b),m=0;m<d;m++)this.buffer[this.bufferOff+m]=n[b+m];return this.bufferOff+=d,d};Cq.prototype._flushBuffer=
function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};Cq.prototype._updateEncrypt=function(n){var b=0,d=0,m=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(m,d)));for(var a=n.length-(n.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,m,d),d+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return m};
Cq.prototype._updateDecrypt=function(n){for(var b=0,d=0,m=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(m*this.blockSize);0<m;m--)b+=this._buffer(n,b),d+=this._flushBuffer(a,d);return this._buffer(n,b),a};Cq.prototype.final=function(n){var b,d;return n&&(b=this.update(n)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(d):d};Cq.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};Cq.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};Cq.prototype._unpad=function(n){return n};Cq.prototype._finalDecrypt=function(){Mqa.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var baa=Ur,T3=Cq;Pi(Lr,T3);Lr.create=function(n){return new Lr(n)};var Nqa=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Lr.prototype.deriveKeys=function(n,b){n.keys=Array(32);baa.equal(b.length,
this.blockSize,"Invalid key length");var d=Nl.readUInt32BE(b,0);b=Nl.readUInt32BE(b,4);Nl.pc1(d,b,n.tmp,0);d=n.tmp[0];b=n.tmp[1];for(var m=0;m<n.keys.length;m+=2){var a=Nqa[m>>>1];d=Nl.r28shl(d,a);b=Nl.r28shl(b,a);Nl.pc2(d,b,n.keys,m)}};Lr.prototype._update=function(n,b,d,m){var a=this._desState,g=Nl.readUInt32BE(n,b);n=Nl.readUInt32BE(n,b+4);Nl.ip(g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,g,n,a.tmp,0):this._decrypt(a,g,n,a.tmp,0);g=a.tmp[0];n=a.tmp[1];Nl.writeUInt32BE(d,
g,m);Nl.writeUInt32BE(d,n,m+4)};Lr.prototype._pad=function(n,b){for(var d=n.length-b;b<n.length;b++)n[b]=d;return!0};Lr.prototype._unpad=function(n){for(var b=n[n.length-1],d=n.length-b;d<n.length;d++)baa.equal(n[d],b);return n.slice(0,n.length-b)};Lr.prototype._encrypt=function(n,b,d,m,a){for(var g=0;g<n.keys.length;g+=2){var l=n.keys[g],r=n.keys[g+1];Nl.expand(d,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Nl.substitute(l,r);r=d;d=(b^Nl.permute(l))>>>0;b=r}Nl.rip(d,b,m,a)};Lr.prototype._decrypt=function(n,
b,d,m,a){for(var g=n.keys.length-2;0<=g;g-=2){var l=n.keys[g],r=n.keys[g+1];Nl.expand(d,n.tmp,0);l^=n.tmp[0];r^=n.tmp[1];l=Nl.substitute(l,r);r=d;d=(b^Nl.permute(l))>>>0;b=r}Nl.rip(d,b,m,a)};var LN={},qia=Ur,Oqa=Pi,MN={};LN.instantiate=function(n){function b(g){n.call(this,g);this._cbcInit()}Oqa(b,n);for(var d=Object.keys(MN),m=0;m<d.length;m++){var a=d[m];b.prototype[a]=MN[a]}return b.create=function(g){return new b(g)},b};MN._cbcInit=function(){this._cbcState=new pia(this.options.iv)};MN._update=
function(n,b,d,m){var a=this.constructor.super_.prototype,g=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)g[l]^=n[b+l];a._update.call(this,g,0,d,m);for(l=0;l<this.blockSize;l++)g[l]=d[m+l]}else{a._update.call(this,n,b,d,m);for(l=0;l<this.blockSize;l++)d[m+l]^=g[l];for(l=0;l<this.blockSize;l++)g[l]=n[b+l]}};var sia=Ur,U3=Cq,Ay=Lr;Pi(Xu,U3);Xu.create=function(n){return new Xu(n)};Xu.prototype._update=function(n,b,d,m){var a=this._edeState;a.ciphers[0]._update(n,b,d,m);
a.ciphers[1]._update(d,m,d,m);a.ciphers[2]._update(d,m,d,m)};Xu.prototype._pad=Ay.prototype._pad;Xu.prototype._unpad=Ay.prototype._unpad;var jL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,V3=Jn,Pqa=Pi,WA=Lj.Buffer,xG={"des-ede3-cbc":LN.instantiate(Xu),"des-ede3":Xu,"des-ede-cbc":LN.instantiate(Xu),"des-ede":Xu,"des-cbc":LN.instantiate(Lr),"des-ecb":Lr};xG.des=xG["des-cbc"];xG.des3=xG["des-ede3-cbc"];Pqa(iL,V3);iL.prototype._update=function(n){return WA.from((this||
jL)._des.update(n))};iL.prototype._final=function(){return WA.from((this||jL)._des.final())};var Qqa=ij.Buffer,xE=function(n,b){for(var d=Math.min(n.length,b.length),m=new Qqa(d),a=0;a<d;++a)m[a]=n[a]^b[a];return m},caa=function(n){for(var b,d=n.length;d--;){if(255!==(b=n.readUInt8(d))){b++;n.writeUInt8(b,d);break}n.writeUInt8(0,d)}},daa={},yG=Lj.Buffer,tia=xE;daa.encrypt=function(n,b,d){for(var m,a=yG.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=
yG.allocUnsafe(0)),!(n._cache.length<=b.length)){a=yG.concat([a,W3(n,b,d)]);break}m=n._cache.length;a=yG.concat([a,W3(n,b.slice(0,m),d)]);b=b.slice(m)}return a};var eaa={},dW=Lj.Buffer;eaa.encrypt=function(n,b,d){for(var m=b.length,a=dW.allocUnsafe(m),g=-1;++g<m;){var l=g;var r=n;var v=b[g],y=d,A=r._cipher.encryptBlock(r._prev)[0]^v;r=(r._prev=dW.concat([r._prev.slice(1),dW.from([y?v:A])]),A);a[l]=r}return a};var faa={},NN=Lj.Buffer;faa.encrypt=function(n,b,d){for(var m=b.length,a=NN.allocUnsafe(m),
g=-1;++g<m;){for(var l=g,r,v,y=n,A=b[g],E=d,F=-1,G=0;8>++F;){v=A&1<<7-F?128:0;G+=(128&(r=y._cipher.encryptBlock(y._prev)[0]^v))>>F%8;var I=y,M=y._prev;r=E?v:r;v=M.length;var L=-1,S=NN.allocUnsafe(M.length);for(M=NN.concat([M,NN.from([r])]);++L<v;)S[L]=M[L]<<1|M[L+1]>>7;I._prev=S}a[l]=G}return a};var gaa={},Rqa=ij.Buffer;gaa.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=Rqa.concat([n._cache,uia(n)]);var d=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),xE(b,d)};
var eW={},haa=Lj.Buffer;eW.encrypt=function(n,b){var d=Math.ceil(b.length/16),m=n._cache.length;n._cache=haa.concat([n._cache,haa.allocUnsafe(16*d)]);for(var a=0;a<d;a++){var g=n;var l=g._cipher.encryptBlockRaw(g._prev);g=(caa(g._prev),l);l=m+16*a;n._cache.writeUInt32BE(g[0],l+0);n._cache.writeUInt32BE(g[1],l+4);n._cache.writeUInt32BE(g[2],l+8);n._cache.writeUInt32BE(g[3],l+12)}d=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),xE(b,d)};var LB={"aes-128-ecb":{cipher:"AES",key:128,
iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",
key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",
type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",
key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},Sqa={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=xE(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var d=n._prev;n._prev=b;
n=n._cipher.decryptBlock(b);return xE(n,d)}},CFB:daa,CFB8:eaa,CFB1:faa,OFB:gaa,CTR:eW,GCM:eW},fW;for(fW in LB)LB[fW].module=Sqa[LB[fW].mode];var Nr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WH={},kL=Lj.Buffer,Tqa=[0,1,2,4,8,16,32,64,128,27,54],Tm=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var d=[],m=[[],[],[],[]],a=[[],[],[],[]],g=0,l=0,r=0;256>r;++r){var v=l^l<<1^l<<2^l<<3^l<<4;v=v>>>8^255&v^99;b[g]=v;d[v]=g;var y=n[g],A=n[y],
E=n[A],F=257*n[v]^16843008*v;m[0][g]=F<<24|F>>>8;m[1][g]=F<<16|F>>>16;m[2][g]=F<<8|F>>>24;m[3][g]=F;F=16843009*E^65537*A^257*y^16843008*g;a[0][v]=F<<24|F>>>8;a[1][v]=F<<16|F>>>16;a[2][v]=F<<8|F>>>24;a[3][v]=F;0===g?g=l=1:(g=y^n[n[n[E^y]]],l^=n[n[l]])}return{SBOX:b,INV_SBOX:d,SUB_MIX:m,INV_SUB_MIX:a}}();Mr.blockSize=16;Mr.keySize=32;Mr.prototype.blockSize=Mr.blockSize;Mr.prototype.keySize=Mr.keySize;Mr.prototype._reset=function(){for(var n=(this||Nr)._key,b=n.length,d=b+6,m=4*(d+1),a=[],g=0;g<b;g++)a[g]=
n[g];for(g=b;g<m;g++)n=a[g-1],0==g%b?(n=n<<8|n>>>24,n=Tm.SBOX[n>>>24]<<24|Tm.SBOX[n>>>16&255]<<16|Tm.SBOX[n>>>8&255]<<8|Tm.SBOX[255&n],n^=Tqa[g/b|0]<<24):6<b&&4==g%b&&(n=Tm.SBOX[n>>>24]<<24|Tm.SBOX[n>>>16&255]<<16|Tm.SBOX[n>>>8&255]<<8|Tm.SBOX[255&n]),a[g]=a[g-b]^n;b=[];for(g=0;g<m;g++){n=m-g;var l=a[n-(g%4?0:4)];b[g]=4>g||4>=n?l:Tm.INV_SUB_MIX[0][Tm.SBOX[l>>>24]]^Tm.INV_SUB_MIX[1][Tm.SBOX[l>>>16&255]]^Tm.INV_SUB_MIX[2][Tm.SBOX[l>>>8&255]]^Tm.INV_SUB_MIX[3][Tm.SBOX[255&l]]}(this||Nr)._nRounds=d;(this||
Nr)._keySchedule=a;(this||Nr)._invKeySchedule=b};Mr.prototype.encryptBlockRaw=function(n){return X3(fS(n),(this||Nr)._keySchedule,Tm.SUB_MIX,Tm.SBOX,(this||Nr)._nRounds)};Mr.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=kL.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};Mr.prototype.decryptBlock=function(n){var b=(n=fS(n))[1];n[1]=n[3];n[3]=b;n=X3(n,(this||Nr)._invKeySchedule,Tm.INV_SUB_MIX,Tm.INV_SBOX,
(this||Nr)._nRounds);b=kL.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[1],12),b};Mr.prototype.scrub=function(){gS((this||Nr)._keySchedule);gS((this||Nr)._invKeySchedule);gS((this||Nr)._key)};WH.AES=Mr;var ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ED=Lj.Buffer,Uqa=ED.alloc(16,0);zG.prototype.ghash=function(n){for(var b=-1;++b<n.length;)(this||ho).state[b]^=n[b];this._multiply()};zG.prototype._multiply=
function(){for(var n,b,d=[(n=(this||ho).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],m=[0,0,0,0],a=-1;128>++a;){0!=((this||ho).state[~~(a/8)]&1<<7-a%8)&&(m[0]^=d[0],m[1]^=d[1],m[2]^=d[2],m[3]^=d[3]);b=0!=(1&d[3]);for(n=3;0<n;n--)d[n]=d[n]>>>1|(1&d[n-1])<<31;d[0]>>>=1;b&&(d[0]^=-520093696)}(this||ho).state=Y3(m)};zG.prototype.update=function(n){for((this||ho).cache=ED.concat([(this||ho).cache,n]);16<=(this||ho).cache.length;)n=(this||ho).cache.slice(0,16),(this||ho).cache=
(this||ho).cache.slice(16),this.ghash(n)};zG.prototype.final=function(n,b){return(this||ho).cache.length&&this.ghash(ED.concat([(this||ho).cache,Uqa],16)),this.ghash(Y3([0,n,0,b])),(this||ho).state};var oi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,via=WH,Vp=Lj.Buffer,Z3=Jn,$3=zG,wia=caa;Pi(By,Z3);By.prototype._update=function(n){if(!(this||oi)._called&&(this||oi)._alen){var b=16-(this||oi)._alen%16;16>b&&(b=Vp.alloc(b,0),(this||oi)._ghash.update(b))}(this||oi)._called=
!0;b=(this||oi)._mode.encrypt(this||oi,n);return(this||oi)._decrypt?(this||oi)._ghash.update(n):(this||oi)._ghash.update(b),(this||oi)._len+=n.length,b};By.prototype._final=function(){if((this||oi)._decrypt&&!(this||oi)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=xE((this||oi)._ghash.final(8*(this||oi)._alen,8*(this||oi)._len),(this||oi)._cipher.encryptBlock((this||oi)._finID)),b;if(b=(this||oi)._decrypt){b=(this||oi)._authTag;var d=0;n.length!==b.length&&d++;for(var m=
Math.min(n.length,b.length),a=0;a<m;++a)d+=n[a]^b[a];b=d}if(b)throw Error("Unsupported state or unable to authenticate data");(this||oi)._authTag=n;(this||oi)._cipher.scrub()};By.prototype.getAuthTag=function(){if((this||oi)._decrypt||!Vp.isBuffer((this||oi)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||oi)._authTag};By.prototype.setAuthTag=function(n){if(!(this||oi)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||oi)._authTag=
n};By.prototype.setAAD=function(n){if((this||oi)._called)throw Error("Attempting to set AAD in unsupported state");(this||oi)._ghash.update(n);(this||oi)._alen+=n.length};var dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xia=WH,hS=Lj.Buffer,a4=Jn;Pi(AG,a4);AG.prototype._update=function(n){return(this||dt)._mode.encrypt(this||dt,n,(this||dt)._decrypt)};AG.prototype._final=function(){(this||dt)._cipher.scrub()};var MB=Lj.Buffer,FG=function(n,b,d,m){if(MB.isBuffer(n)||
(n=MB.from(n,"binary")),b&&(MB.isBuffer(b)||(b=MB.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");d/=8;for(var a=MB.alloc(d),g=MB.alloc(m||0),l=MB.alloc(0);0<d||0<m;){var r=new zD;r.update(l);r.update(n);b&&r.update(b);l=r.digest();r=0;if(0<d){var v=a.length-d;r=Math.min(d,l.length);l.copy(a,v,0,r);d-=r}r<l.length&&0<m&&(v=Math.min(m,l.length-r),l.copy(g,g.length-m,r,r+v),m-=v)}return l.fill(0),{key:a,iv:g}},uk="undefined"!=typeof globalThis?globalThis:
"undefined"!=typeof self?self:global,Aia=By,FD=Lj.Buffer,d4=LB,zia=AG,b4=Jn,yia=WH;Pi(BG,b4);BG.prototype._update=function(n){var b;(this||uk)._cache.add(n);for(n=[];b=(this||uk)._cache.get((this||uk)._autopadding);)b=(this||uk)._mode.decrypt(this||uk,b),n.push(b);return FD.concat(n)};BG.prototype._final=function(){var n=(this||uk)._cache.flush();if((this||uk)._autopadding){n=(this||uk)._mode.decrypt(this||uk,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var d=-1;++d<b;)if(n[d+
(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};BG.prototype.setAutoPadding=function(n){return(this||uk)._autopadding=!!n,this||uk};lL.prototype.add=function(n){(this||uk).cache=FD.concat([(this||uk).cache,n])};lL.prototype.get=function(n){var b;if(n){if(16<(this||uk).cache.length)return b=(this||uk).cache.slice(0,16),(this||uk).cache=(this||uk).cache.slice(16),b}else if(16<=(this||uk).cache.length)return b=
(this||uk).cache.slice(0,16),(this||uk).cache=(this||uk).cache.slice(16),b;return null};lL.prototype.flush=function(){if((this||uk).cache.length)return(this||uk).cache};var gl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,g4=LB,Dia=By,Jw=Lj.Buffer,Cia=AG,e4=Jn,Bia=WH;Pi(CG,e4);CG.prototype._update=function(n){var b;(this||gl)._cache.add(n);for(n=[];b=(this||gl)._cache.get();)b=(this||gl)._mode.encrypt(this||gl,b),n.push(b);return Jw.concat(n)};var Vqa=Jw.alloc(16,
16);CG.prototype._final=function(){var n=(this||gl)._cache.flush();if((this||gl)._autopadding)return n=(this||gl)._mode.encrypt(this||gl,n),(this||gl)._cipher.scrub(),n;if(!n.equals(Vqa))throw(this||gl)._cipher.scrub(),Error("data not multiple of block length");};CG.prototype.setAutoPadding=function(n){return(this||gl)._autopadding=!!n,this||gl};mL.prototype.add=function(n){(this||gl).cache=Jw.concat([(this||gl).cache,n])};mL.prototype.get=function(){if(15<(this||gl).cache.length){var n=(this||gl).cache.slice(0,
16);return(this||gl).cache=(this||gl).cache.slice(16),n}return null};mL.prototype.flush=function(){for(var n=16-(this||gl).cache.length,b=Jw.allocUnsafe(n),d=-1;++d<n;)b.writeUInt8(n,d);return Jw.concat([(this||gl).cache,b])};var Eq={};Eq.createCipher=Eq.Cipher=function(n,b){var d=g4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");b=FG(b,!1,d.key,d.iv);return f4(n,b.key,b.iv)};Eq.createCipheriv=Eq.Cipheriv=f4;Eq.createDecipher=Eq.Decipher=function(n,b){var d=d4[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");
b=FG(b,!1,d.key,d.iv);return c4(n,b.key,b.iv)};Eq.createDecipheriv=Eq.Decipheriv=c4;Eq.listCiphers=Eq.getCiphers=function(){return Object.keys(LB)};var jz={"des-ecb":{key:8,iv:0}};jz["des-cbc"]=jz.des={key:8,iv:8};jz["des-ede3-cbc"]=jz.des3={key:24,iv:8};jz["des-ede3"]={key:24,iv:0};jz["des-ede-cbc"]={key:16,iv:8};jz["des-ede"]={key:16,iv:0};var iaa,jaa,kaa,h4=iL,jS=Eq,Cy=LB,Kw=jz;var Wqa=iaa=function(n,b){if(n=n.toLowerCase(),Cy[n]){var d=Cy[n].key;var m=Cy[n].iv}else{if(!Kw[n])throw new TypeError("invalid suite type");
d=8*Kw[n].key;m=Kw[n].iv}b=FG(b,!1,d,m);return iS(n,b.key,b.iv)};var Xqa=jaa=function(n,b){if(n=n.toLowerCase(),Cy[n]){var d=Cy[n].key;var m=Cy[n].iv}else{if(!Kw[n])throw new TypeError("invalid suite type");d=8*Kw[n].key;m=Kw[n].iv}b=FG(b,!1,d,m);return kS(n,b.key,b.iv)};var Yqa=kaa=function(){return Object.keys(Kw).concat(jS.getCiphers())};var Zqa=Object.freeze({}),db="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,laa={},maa={exports:laa};!function(n,b){function d(K,
Z){if(!K)throw Error(Z||"Assertion failed");}function m(K,Z){K.super_=Z;var U=function(){};U.prototype=Z.prototype;K.prototype=new U;K.prototype.constructor=K}function a(K,Z,U){if(a.isBN(K))return K;(this||db).negative=0;(this||db).words=null;(this||db).length=0;(this||db).red=null;null!==K&&("le"!==Z&&"be"!==Z||(U=Z,Z=10),this._init(K||0,Z||10,U||"be"))}function g(K,Z,U){var V=0;for(U=Math.min(K.length,U);Z<U;Z++){var na=K.charCodeAt(Z)-48;V<<=4;V|=49<=na&&54>=na?na-49+10:17<=na&&22>=na?na-17+10:
15&na}return V}function l(K,Z,U,V){var na=0;for(U=Math.min(K.length,U);Z<U;Z++){var la=K.charCodeAt(Z)-48;na*=V;na+=49<=la?la-49+10:17<=la?la-17+10:la}return na}function r(K,Z,U){U.negative=Z.negative^K.negative;var V=K.length+Z.length|0;U.length=V;V=V-1|0;var na=(0|K.words[0])*(0|Z.words[0]),la=na/67108864|0;U.words[0]=67108863&na;for(var ya=1;ya<V;ya++){var jb=la>>>26;na=67108863&la;la=Math.min(ya,Z.length-1);for(var gb=Math.max(0,ya-K.length+1);gb<=la;gb++)jb+=(na=(0|K.words[ya-gb|0])*(0|Z.words[gb])+
na)/67108864|0,na&=67108863;U.words[ya]=0|na;la=0|jb}return 0!==la?U.words[ya]=0|la:U.length--,U.strip()}function v(K,Z){(this||db).x=K;(this||db).y=Z}function y(K,Z){(this||db).name=K;(this||db).p=new a(Z,16);(this||db).n=(this||db).p.bitLength();(this||db).k=(new a(1)).iushln((this||db).n).isub((this||db).p);(this||db).tmp=this._tmp()}function A(){y.call(this||db,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this||db,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}
function F(){y.call(this||db,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function G(){y.call(this||db,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(K){"string"==typeof K?(K=a._prime(K),(this||db).m=K.p,(this||db).prime=K):(d(K.gtn(1),"modulus must be greater than 1"),(this||db).m=K,(this||db).prime=null)}function M(K){I.call(this||db,K);(this||db).shift=(this||db).m.bitLength();0!=(this||db).shift%26&&((this||db).shift+=26-(this||db).shift%
26);(this||db).r=(new a(1)).iushln((this||db).shift);(this||db).r2=this.imod((this||db).r.sqr());(this||db).rinv=(this||db).r._invmp((this||db).m);(this||db).minv=(this||db).rinv.mul((this||db).r).isubn(1).div((this||db).m);(this||db).minv=(this||db).minv.umod((this||db).r);(this||db).minv=(this||db).r.sub((this||db).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var L=Zqa.Buffer}catch(K){}a.isBN=function(K){return K instanceof a||null!==K&&"object"==typeof K&&K.constructor.wordSize===
a.wordSize&&Array.isArray(K.words)};a.max=function(K,Z){return 0<K.cmp(Z)?K:Z};a.min=function(K,Z){return 0>K.cmp(Z)?K:Z};a.prototype._init=function(K,Z,U){if("number"==typeof K)return this._initNumber(K,Z,U);if("object"==typeof K)return this._initArray(K,Z,U);"hex"===Z&&(Z=16);d(Z===(0|Z)&&2<=Z&&36>=Z);var V=0;"-"===(K=K.toString().replace(/\s+/g,""))[0]&&V++;16===Z?this._parseHex(K,V):this._parseBase(K,Z,V);"-"===K[0]&&((this||db).negative=1);this.strip();"le"===U&&this._initArray(this.toArray(),
Z,U)};a.prototype._initNumber=function(K,Z,U){0>K&&((this||db).negative=1,K=-K);67108864>K?((this||db).words=[67108863&K],(this||db).length=1):4503599627370496>K?((this||db).words=[67108863&K,K/67108864&67108863],(this||db).length=2):(d(9007199254740992>K),(this||db).words=[67108863&K,K/67108864&67108863,1],(this||db).length=3);"le"===U&&this._initArray(this.toArray(),Z,U)};a.prototype._initArray=function(K,Z,U){if(d("number"==typeof K.length),0>=K.length)return(this||db).words=[0],(this||db).length=
1,this||db;(this||db).length=Math.ceil(K.length/3);(this||db).words=Array((this||db).length);for(Z=0;Z<(this||db).length;Z++)(this||db).words[Z]=0;var V=0;if("be"===U)for(Z=K.length-1,U=0;0<=Z;Z-=3){var na=K[Z]|K[Z-1]<<8|K[Z-2]<<16;(this||db).words[U]|=na<<V&67108863;(this||db).words[U+1]=na>>>26-V&67108863;26<=(V+=24)&&(V-=26,U++)}else if("le"===U)for(U=Z=0;Z<K.length;Z+=3)na=K[Z]|K[Z+1]<<8|K[Z+2]<<16,(this||db).words[U]|=na<<V&67108863,(this||db).words[U+1]=na>>>26-V&67108863,26<=(V+=24)&&(V-=26,
U++);return this.strip()};a.prototype._parseHex=function(K,Z){(this||db).length=Math.ceil((K.length-Z)/6);(this||db).words=Array((this||db).length);for(var U=0;U<(this||db).length;U++)(this||db).words[U]=0;var V,na=0;U=K.length-6;for(V=0;U>=Z;U-=6){var la=g(K,U,U+6);(this||db).words[V]|=la<<na&67108863;(this||db).words[V+1]|=la>>>26-na&4194303;26<=(na+=24)&&(na-=26,V++)}U+6!==Z&&(la=g(K,Z,U+6),(this||db).words[V]|=la<<na&67108863,(this||db).words[V+1]|=la>>>26-na&4194303);this.strip()};a.prototype._parseBase=
function(K,Z,U){(this||db).words=[0];(this||db).length=1;for(var V=0,na=1;67108863>=na;na*=Z)V++;V--;na=na/Z|0;var la=K.length-U,ya=la%V;la=Math.min(la,la-ya)+U;for(var jb=U;jb<la;jb+=V)U=l(K,jb,jb+V,Z),this.imuln(na),67108864>(this||db).words[0]+U?(this||db).words[0]+=U:this._iaddn(U);if(0!==ya){V=1;U=l(K,jb,K.length,Z);for(jb=0;jb<ya;jb++)V*=Z;this.imuln(V);67108864>(this||db).words[0]+U?(this||db).words[0]+=U:this._iaddn(U)}};a.prototype.copy=function(K){K.words=Array((this||db).length);for(var Z=
0;Z<(this||db).length;Z++)K.words[Z]=(this||db).words[Z];K.length=(this||db).length;K.negative=(this||db).negative;K.red=(this||db).red};a.prototype.clone=function(){var K=new a(null);return this.copy(K),K};a.prototype._expand=function(K){for(;(this||db).length<K;)(this||db).words[(this||db).length++]=0;return this||db};a.prototype.strip=function(){for(;1<(this||db).length&&0===(this||db).words[(this||db).length-1];)(this||db).length--;return this._normSign()};a.prototype._normSign=function(){return 1===
(this||db).length&&0===(this||db).words[0]&&((this||db).negative=0),this||db};a.prototype.inspect=function(){return((this||db).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],aa=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(K,Z){if(Z=0|Z||1,16===(K=K||10)||"hex"===K){var U="";for(var V=K=0,na=0;na<(this||
db).length;na++){var la=(this||db).words[na],ya=(16777215&(la<<K|V)).toString(16);U=0!==(V=la>>>24-K&16777215)||na!==(this||db).length-1?S[6-ya.length]+ya+U:ya+U;26<=(K+=2)&&(K-=26,na--)}for(0!==V&&(U=V.toString(16)+U);0!=U.length%Z;)U="0"+U;return 0!==(this||db).negative&&(U="-"+U),U}if(K===(0|K)&&2<=K&&36>=K){V=R[K];na=aa[K];U="";la=this.clone();for(la.negative=0;!la.isZero();)ya=la.modn(na).toString(K),U=(la=la.idivn(na)).isZero()?ya+U:S[V-ya.length]+ya+U;for(this.isZero()&&(U="0"+U);0!=U.length%
Z;)U="0"+U;return 0!==(this||db).negative&&(U="-"+U),U}d(!1,"Base should be between 2 and 36")};a.prototype.toNumber=function(){var K=(this||db).words[0];return 2===(this||db).length?K+=67108864*(this||db).words[1]:3===(this||db).length&&1===(this||db).words[2]?K+=4503599627370496+67108864*(this||db).words[1]:2<(this||db).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||db).negative?-K:K};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(K,
Z){return d(void 0!==L),this.toArrayLike(L,K,Z)};a.prototype.toArray=function(K,Z){return this.toArrayLike(Array,K,Z)};a.prototype.toArrayLike=function(K,Z,U){var V=this.byteLength();U=U||Math.max(1,V);d(V<=U,"byte array longer than desired length");d(0<U,"Requested array length <= 0");this.strip();var na="le"===Z;K=new K(U);Z=this.clone();if(na){for(na=0;!Z.isZero();na++)V=Z.andln(255),Z.iushrn(8),K[na]=V;for(;na<U;na++)K[na]=0}else{for(na=0;na<U-V;na++)K[na]=0;for(na=0;!Z.isZero();na++)V=Z.andln(255),
Z.iushrn(8),K[U-na-1]=V}return K};Math.clz32?a.prototype._countBits=function(K){return 32-Math.clz32(K)}:a.prototype._countBits=function(K){var Z=0;return 4096<=K&&(Z+=13,K>>>=13),64<=K&&(Z+=7,K>>>=7),8<=K&&(Z+=4,K>>>=4),2<=K&&(Z+=2,K>>>=2),Z+K};a.prototype._zeroBits=function(K){if(0===K)return 26;var Z=0;return 0==(8191&K)&&(Z+=13,K>>>=13),0==(127&K)&&(Z+=7,K>>>=7),0==(15&K)&&(Z+=4,K>>>=4),0==(3&K)&&(Z+=2,K>>>=2),0==(1&K)&&Z++,Z};a.prototype.bitLength=function(){var K=this._countBits((this||db).words[(this||
db).length-1]);return 26*((this||db).length-1)+K};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var K=0,Z=0;Z<(this||db).length;Z++){var U=this._zeroBits((this||db).words[Z]);if(K+=U,26!==U)break}return K};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(K){return 0!==(this||db).negative?this.abs().inotn(K).iaddn(1):this.clone()};a.prototype.fromTwos=function(K){return this.testn(K-1)?this.notn(K).iaddn(1).ineg():this.clone()};a.prototype.isNeg=
function(){return 0!==(this||db).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){return this.isZero()||((this||db).negative^=1),this||db};a.prototype.iuor=function(K){for(;(this||db).length<K.length;)(this||db).words[(this||db).length++]=0;for(var Z=0;Z<K.length;Z++)(this||db).words[Z]|=K.words[Z];return this.strip()};a.prototype.ior=function(K){return d(0==((this||db).negative|K.negative)),this.iuor(K)};a.prototype.or=function(K){return(this||db).length>
K.length?this.clone().ior(K):K.clone().ior(this||db)};a.prototype.uor=function(K){return(this||db).length>K.length?this.clone().iuor(K):K.clone().iuor(this||db)};a.prototype.iuand=function(K){var Z=(this||db).length>K.length?K:this||db;for(var U=0;U<Z.length;U++)(this||db).words[U]&=K.words[U];return(this||db).length=Z.length,this.strip()};a.prototype.iand=function(K){return d(0==((this||db).negative|K.negative)),this.iuand(K)};a.prototype.and=function(K){return(this||db).length>K.length?this.clone().iand(K):
K.clone().iand(this||db)};a.prototype.uand=function(K){return(this||db).length>K.length?this.clone().iuand(K):K.clone().iuand(this||db)};a.prototype.iuxor=function(K){var Z,U;(this||db).length>K.length?(Z=this||db,U=K):(Z=K,U=this||db);for(K=0;K<U.length;K++)(this||db).words[K]=Z.words[K]^U.words[K];if((this||db)!==Z)for(;K<Z.length;K++)(this||db).words[K]=Z.words[K];return(this||db).length=Z.length,this.strip()};a.prototype.ixor=function(K){return d(0==((this||db).negative|K.negative)),this.iuxor(K)};
a.prototype.xor=function(K){return(this||db).length>K.length?this.clone().ixor(K):K.clone().ixor(this||db)};a.prototype.uxor=function(K){return(this||db).length>K.length?this.clone().iuxor(K):K.clone().iuxor(this||db)};a.prototype.inotn=function(K){d("number"==typeof K&&0<=K);var Z=0|Math.ceil(K/26);K%=26;this._expand(Z);0<K&&Z--;for(var U=0;U<Z;U++)(this||db).words[U]=67108863&~(this||db).words[U];return 0<K&&((this||db).words[U]=~(this||db).words[U]&67108863>>26-K),this.strip()};a.prototype.notn=
function(K){return this.clone().inotn(K)};a.prototype.setn=function(K,Z){d("number"==typeof K&&0<=K);var U=K/26|0;K%=26;return this._expand(U+1),(this||db).words[U]=Z?(this||db).words[U]|1<<K:(this||db).words[U]&~(1<<K),this.strip()};a.prototype.iadd=function(K){var Z,U,V;if(0!==(this||db).negative&&0===K.negative)return(this||db).negative=0,this.isub(K),(this||db).negative^=1,this._normSign();if(0===(this||db).negative&&0!==K.negative)return K.negative=0,Z=this.isub(K),K.negative=1,Z._normSign();
(this||db).length>K.length?(U=this||db,V=K):(U=K,V=this||db);for(K=Z=0;K<V.length;K++)Z=(0|U.words[K])+(0|V.words[K])+Z,(this||db).words[K]=67108863&Z,Z>>>=26;for(;0!==Z&&K<U.length;K++)Z=(0|U.words[K])+Z,(this||db).words[K]=67108863&Z,Z>>>=26;if((this||db).length=U.length,0!==Z)(this||db).words[(this||db).length]=Z,(this||db).length++;else if(U!==(this||db))for(;K<U.length;K++)(this||db).words[K]=U.words[K];return this||db};a.prototype.add=function(K){var Z;return 0!==K.negative&&0===(this||db).negative?
(K.negative=0,Z=this.sub(K),K.negative^=1,Z):0===K.negative&&0!==(this||db).negative?((this||db).negative=0,Z=K.sub(this||db),(this||db).negative=1,Z):(this||db).length>K.length?this.clone().iadd(K):K.clone().iadd(this||db)};a.prototype.isub=function(K){if(0!==K.negative){K.negative=0;var Z=this.iadd(K);return K.negative=1,Z._normSign()}if(0!==(this||db).negative)return(this||db).negative=0,this.iadd(K),(this||db).negative=1,this._normSign();var U,V;Z=this.cmp(K);if(0===Z)return(this||db).negative=
0,(this||db).length=1,(this||db).words[0]=0,this||db;0<Z?(U=this||db,V=K):(U=K,V=this||db);for(var na=K=0;na<V.length;na++)K=(Z=(0|U.words[na])-(0|V.words[na])+K)>>26,(this||db).words[na]=67108863&Z;for(;0!==K&&na<U.length;na++)K=(Z=(0|U.words[na])+K)>>26,(this||db).words[na]=67108863&Z;if(0===K&&na<U.length&&U!==(this||db))for(;na<U.length;na++)(this||db).words[na]=U.words[na];return(this||db).length=Math.max((this||db).length,na),U!==(this||db)&&((this||db).negative=1),this.strip()};a.prototype.sub=
function(K){return this.clone().isub(K)};var ra=function(K,Z,U){var V=K.words,na=Z.words,la=U.words,ya=0|V[0],jb=8191&ya;ya>>>=13;var gb=0|V[1],ka=8191&gb;gb>>>=13;var ia=0|V[2],qa=8191&ia;ia>>>=13;var La=0|V[3],Lb=8191&La;La>>>=13;var qc=0|V[4],dc=8191&qc;qc>>>=13;var oc=0|V[5],$c=8191&oc;oc>>>=13;var Vb=0|V[6],Hd=8191&Vb;Vb>>>=13;var be=0|V[7],ha=8191&be;be>>>=13;var Ca=0|V[8],Na=8191&Ca;Ca>>>=13;var yb=0|V[9];V=8191&yb;yb>>>=13;var gc=0|na[0],Ud=8191&gc,Td=gc>>>13,cd=0|na[1];gc=8191&cd;var gf=
cd>>>13,Ze=0|na[2];cd=8191&Ze;var ii=Ze>>>13,Gh=0|na[3];Ze=8191&Gh;var Bj=Gh>>>13,rj=0|na[4];Gh=8191&rj;var Cj=rj>>>13,Tj=0|na[5];rj=8191&Tj;var bk=Tj>>>13,jj=0|na[6];Tj=8191&jj;var Kh=jj>>>13,ik=0|na[7];jj=8191&ik;var Rk=ik>>>13,nk=0|na[8];ik=8191&nk;nk>>>=13;var Sk=0|na[9];na=8191&Sk;Sk>>>=13;U.negative=K.negative^Z.negative;U.length=19;var cz=(0+Math.imul(jb,Ud)|0)+((8191&(K=(K=Math.imul(jb,Td))+Math.imul(ya,Ud)|0))<<13)|0;Z=(Math.imul(ya,Td)+(K>>>13)|0)+(cz>>>26)|0;cz&=67108863;var Zd=Math.imul(ka,
Ud);K=(K=Math.imul(ka,Td))+Math.imul(gb,Ud)|0;var $d=Math.imul(gb,Td);var bz=(Z+(Zd+Math.imul(jb,gc)|0)|0)+((8191&(K=(K=K+Math.imul(jb,gf)|0)+Math.imul(ya,gc)|0))<<13)|0;Z=(($d+Math.imul(ya,gf)|0)+(K>>>13)|0)+(bz>>>26)|0;bz&=67108863;Zd=Math.imul(qa,Ud);K=(K=Math.imul(qa,Td))+Math.imul(ia,Ud)|0;$d=Math.imul(ia,Td);Zd=Zd+Math.imul(ka,gc)|0;K=(K=K+Math.imul(ka,gf)|0)+Math.imul(gb,gc)|0;$d=$d+Math.imul(gb,gf)|0;var bx=(Z+(Zd+Math.imul(jb,cd)|0)|0)+((8191&(K=(K=K+Math.imul(jb,ii)|0)+Math.imul(ya,cd)|
0))<<13)|0;Z=(($d+Math.imul(ya,ii)|0)+(K>>>13)|0)+(bx>>>26)|0;bx&=67108863;Zd=Math.imul(Lb,Ud);K=(K=Math.imul(Lb,Td))+Math.imul(La,Ud)|0;$d=Math.imul(La,Td);Zd=Zd+Math.imul(qa,gc)|0;K=(K=K+Math.imul(qa,gf)|0)+Math.imul(ia,gc)|0;$d=$d+Math.imul(ia,gf)|0;Zd=Zd+Math.imul(ka,cd)|0;K=(K=K+Math.imul(ka,ii)|0)+Math.imul(gb,cd)|0;$d=$d+Math.imul(gb,ii)|0;var rv=(Z+(Zd+Math.imul(jb,Ze)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Bj)|0)+Math.imul(ya,Ze)|0))<<13)|0;Z=(($d+Math.imul(ya,Bj)|0)+(K>>>13)|0)+(rv>>>26)|0;rv&=
67108863;Zd=Math.imul(dc,Ud);K=(K=Math.imul(dc,Td))+Math.imul(qc,Ud)|0;$d=Math.imul(qc,Td);Zd=Zd+Math.imul(Lb,gc)|0;K=(K=K+Math.imul(Lb,gf)|0)+Math.imul(La,gc)|0;$d=$d+Math.imul(La,gf)|0;Zd=Zd+Math.imul(qa,cd)|0;K=(K=K+Math.imul(qa,ii)|0)+Math.imul(ia,cd)|0;$d=$d+Math.imul(ia,ii)|0;Zd=Zd+Math.imul(ka,Ze)|0;K=(K=K+Math.imul(ka,Bj)|0)+Math.imul(gb,Ze)|0;$d=$d+Math.imul(gb,Bj)|0;var wB=(Z+(Zd+Math.imul(jb,Gh)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Cj)|0)+Math.imul(ya,Gh)|0))<<13)|0;Z=(($d+Math.imul(ya,Cj)|
0)+(K>>>13)|0)+(wB>>>26)|0;wB&=67108863;Zd=Math.imul($c,Ud);K=(K=Math.imul($c,Td))+Math.imul(oc,Ud)|0;$d=Math.imul(oc,Td);Zd=Zd+Math.imul(dc,gc)|0;K=(K=K+Math.imul(dc,gf)|0)+Math.imul(qc,gc)|0;$d=$d+Math.imul(qc,gf)|0;Zd=Zd+Math.imul(Lb,cd)|0;K=(K=K+Math.imul(Lb,ii)|0)+Math.imul(La,cd)|0;$d=$d+Math.imul(La,ii)|0;Zd=Zd+Math.imul(qa,Ze)|0;K=(K=K+Math.imul(qa,Bj)|0)+Math.imul(ia,Ze)|0;$d=$d+Math.imul(ia,Bj)|0;Zd=Zd+Math.imul(ka,Gh)|0;K=(K=K+Math.imul(ka,Cj)|0)+Math.imul(gb,Gh)|0;$d=$d+Math.imul(gb,Cj)|
0;var AB=(Z+(Zd+Math.imul(jb,rj)|0)|0)+((8191&(K=(K=K+Math.imul(jb,bk)|0)+Math.imul(ya,rj)|0))<<13)|0;Z=(($d+Math.imul(ya,bk)|0)+(K>>>13)|0)+(AB>>>26)|0;AB&=67108863;Zd=Math.imul(Hd,Ud);K=(K=Math.imul(Hd,Td))+Math.imul(Vb,Ud)|0;$d=Math.imul(Vb,Td);Zd=Zd+Math.imul($c,gc)|0;K=(K=K+Math.imul($c,gf)|0)+Math.imul(oc,gc)|0;$d=$d+Math.imul(oc,gf)|0;Zd=Zd+Math.imul(dc,cd)|0;K=(K=K+Math.imul(dc,ii)|0)+Math.imul(qc,cd)|0;$d=$d+Math.imul(qc,ii)|0;Zd=Zd+Math.imul(Lb,Ze)|0;K=(K=K+Math.imul(Lb,Bj)|0)+Math.imul(La,
Ze)|0;$d=$d+Math.imul(La,Bj)|0;Zd=Zd+Math.imul(qa,Gh)|0;K=(K=K+Math.imul(qa,Cj)|0)+Math.imul(ia,Gh)|0;$d=$d+Math.imul(ia,Cj)|0;Zd=Zd+Math.imul(ka,rj)|0;K=(K=K+Math.imul(ka,bk)|0)+Math.imul(gb,rj)|0;$d=$d+Math.imul(gb,bk)|0;var BB=(Z+(Zd+Math.imul(jb,Tj)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Kh)|0)+Math.imul(ya,Tj)|0))<<13)|0;Z=(($d+Math.imul(ya,Kh)|0)+(K>>>13)|0)+(BB>>>26)|0;BB&=67108863;Zd=Math.imul(ha,Ud);K=(K=Math.imul(ha,Td))+Math.imul(be,Ud)|0;$d=Math.imul(be,Td);Zd=Zd+Math.imul(Hd,gc)|0;K=(K=K+
Math.imul(Hd,gf)|0)+Math.imul(Vb,gc)|0;$d=$d+Math.imul(Vb,gf)|0;Zd=Zd+Math.imul($c,cd)|0;K=(K=K+Math.imul($c,ii)|0)+Math.imul(oc,cd)|0;$d=$d+Math.imul(oc,ii)|0;Zd=Zd+Math.imul(dc,Ze)|0;K=(K=K+Math.imul(dc,Bj)|0)+Math.imul(qc,Ze)|0;$d=$d+Math.imul(qc,Bj)|0;Zd=Zd+Math.imul(Lb,Gh)|0;K=(K=K+Math.imul(Lb,Cj)|0)+Math.imul(La,Gh)|0;$d=$d+Math.imul(La,Cj)|0;Zd=Zd+Math.imul(qa,rj)|0;K=(K=K+Math.imul(qa,bk)|0)+Math.imul(ia,rj)|0;$d=$d+Math.imul(ia,bk)|0;Zd=Zd+Math.imul(ka,Tj)|0;K=(K=K+Math.imul(ka,Kh)|0)+Math.imul(gb,
Tj)|0;$d=$d+Math.imul(gb,Kh)|0;var CB=(Z+(Zd+Math.imul(jb,jj)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Rk)|0)+Math.imul(ya,jj)|0))<<13)|0;Z=(($d+Math.imul(ya,Rk)|0)+(K>>>13)|0)+(CB>>>26)|0;CB&=67108863;Zd=Math.imul(Na,Ud);K=(K=Math.imul(Na,Td))+Math.imul(Ca,Ud)|0;$d=Math.imul(Ca,Td);Zd=Zd+Math.imul(ha,gc)|0;K=(K=K+Math.imul(ha,gf)|0)+Math.imul(be,gc)|0;$d=$d+Math.imul(be,gf)|0;Zd=Zd+Math.imul(Hd,cd)|0;K=(K=K+Math.imul(Hd,ii)|0)+Math.imul(Vb,cd)|0;$d=$d+Math.imul(Vb,ii)|0;Zd=Zd+Math.imul($c,Ze)|0;K=(K=K+
Math.imul($c,Bj)|0)+Math.imul(oc,Ze)|0;$d=$d+Math.imul(oc,Bj)|0;Zd=Zd+Math.imul(dc,Gh)|0;K=(K=K+Math.imul(dc,Cj)|0)+Math.imul(qc,Gh)|0;$d=$d+Math.imul(qc,Cj)|0;Zd=Zd+Math.imul(Lb,rj)|0;K=(K=K+Math.imul(Lb,bk)|0)+Math.imul(La,rj)|0;$d=$d+Math.imul(La,bk)|0;Zd=Zd+Math.imul(qa,Tj)|0;K=(K=K+Math.imul(qa,Kh)|0)+Math.imul(ia,Tj)|0;$d=$d+Math.imul(ia,Kh)|0;Zd=Zd+Math.imul(ka,jj)|0;K=(K=K+Math.imul(ka,Rk)|0)+Math.imul(gb,jj)|0;$d=$d+Math.imul(gb,Rk)|0;var DB=(Z+(Zd+Math.imul(jb,ik)|0)|0)+((8191&(K=(K=K+Math.imul(jb,
nk)|0)+Math.imul(ya,ik)|0))<<13)|0;Z=(($d+Math.imul(ya,nk)|0)+(K>>>13)|0)+(DB>>>26)|0;DB&=67108863;Zd=Math.imul(V,Ud);K=(K=Math.imul(V,Td))+Math.imul(yb,Ud)|0;$d=Math.imul(yb,Td);Zd=Zd+Math.imul(Na,gc)|0;K=(K=K+Math.imul(Na,gf)|0)+Math.imul(Ca,gc)|0;$d=$d+Math.imul(Ca,gf)|0;Zd=Zd+Math.imul(ha,cd)|0;K=(K=K+Math.imul(ha,ii)|0)+Math.imul(be,cd)|0;$d=$d+Math.imul(be,ii)|0;Zd=Zd+Math.imul(Hd,Ze)|0;K=(K=K+Math.imul(Hd,Bj)|0)+Math.imul(Vb,Ze)|0;$d=$d+Math.imul(Vb,Bj)|0;Zd=Zd+Math.imul($c,Gh)|0;K=(K=K+Math.imul($c,
Cj)|0)+Math.imul(oc,Gh)|0;$d=$d+Math.imul(oc,Cj)|0;Zd=Zd+Math.imul(dc,rj)|0;K=(K=K+Math.imul(dc,bk)|0)+Math.imul(qc,rj)|0;$d=$d+Math.imul(qc,bk)|0;Zd=Zd+Math.imul(Lb,Tj)|0;K=(K=K+Math.imul(Lb,Kh)|0)+Math.imul(La,Tj)|0;$d=$d+Math.imul(La,Kh)|0;Zd=Zd+Math.imul(qa,jj)|0;K=(K=K+Math.imul(qa,Rk)|0)+Math.imul(ia,jj)|0;$d=$d+Math.imul(ia,Rk)|0;Zd=Zd+Math.imul(ka,ik)|0;K=(K=K+Math.imul(ka,nk)|0)+Math.imul(gb,ik)|0;$d=$d+Math.imul(gb,nk)|0;jb=(Z+(Zd+Math.imul(jb,na)|0)|0)+((8191&(K=(K=K+Math.imul(jb,Sk)|0)+
Math.imul(ya,na)|0))<<13)|0;Z=(($d+Math.imul(ya,Sk)|0)+(K>>>13)|0)+(jb>>>26)|0;jb&=67108863;Zd=Math.imul(V,gc);K=(K=Math.imul(V,gf))+Math.imul(yb,gc)|0;$d=Math.imul(yb,gf);Zd=Zd+Math.imul(Na,cd)|0;K=(K=K+Math.imul(Na,ii)|0)+Math.imul(Ca,cd)|0;$d=$d+Math.imul(Ca,ii)|0;Zd=Zd+Math.imul(ha,Ze)|0;K=(K=K+Math.imul(ha,Bj)|0)+Math.imul(be,Ze)|0;$d=$d+Math.imul(be,Bj)|0;Zd=Zd+Math.imul(Hd,Gh)|0;K=(K=K+Math.imul(Hd,Cj)|0)+Math.imul(Vb,Gh)|0;$d=$d+Math.imul(Vb,Cj)|0;Zd=Zd+Math.imul($c,rj)|0;K=(K=K+Math.imul($c,
bk)|0)+Math.imul(oc,rj)|0;$d=$d+Math.imul(oc,bk)|0;Zd=Zd+Math.imul(dc,Tj)|0;K=(K=K+Math.imul(dc,Kh)|0)+Math.imul(qc,Tj)|0;$d=$d+Math.imul(qc,Kh)|0;Zd=Zd+Math.imul(Lb,jj)|0;K=(K=K+Math.imul(Lb,Rk)|0)+Math.imul(La,jj)|0;$d=$d+Math.imul(La,Rk)|0;Zd=Zd+Math.imul(qa,ik)|0;K=(K=K+Math.imul(qa,nk)|0)+Math.imul(ia,ik)|0;$d=$d+Math.imul(ia,nk)|0;ya=(Z+(Zd+Math.imul(ka,na)|0)|0)+((8191&(K=(K=K+Math.imul(ka,Sk)|0)+Math.imul(gb,na)|0))<<13)|0;Z=(($d+Math.imul(gb,Sk)|0)+(K>>>13)|0)+(ya>>>26)|0;ya&=67108863;Zd=
Math.imul(V,cd);K=(K=Math.imul(V,ii))+Math.imul(yb,cd)|0;$d=Math.imul(yb,ii);Zd=Zd+Math.imul(Na,Ze)|0;K=(K=K+Math.imul(Na,Bj)|0)+Math.imul(Ca,Ze)|0;$d=$d+Math.imul(Ca,Bj)|0;Zd=Zd+Math.imul(ha,Gh)|0;K=(K=K+Math.imul(ha,Cj)|0)+Math.imul(be,Gh)|0;$d=$d+Math.imul(be,Cj)|0;Zd=Zd+Math.imul(Hd,rj)|0;K=(K=K+Math.imul(Hd,bk)|0)+Math.imul(Vb,rj)|0;$d=$d+Math.imul(Vb,bk)|0;Zd=Zd+Math.imul($c,Tj)|0;K=(K=K+Math.imul($c,Kh)|0)+Math.imul(oc,Tj)|0;$d=$d+Math.imul(oc,Kh)|0;Zd=Zd+Math.imul(dc,jj)|0;K=(K=K+Math.imul(dc,
Rk)|0)+Math.imul(qc,jj)|0;$d=$d+Math.imul(qc,Rk)|0;Zd=Zd+Math.imul(Lb,ik)|0;K=(K=K+Math.imul(Lb,nk)|0)+Math.imul(La,ik)|0;$d=$d+Math.imul(La,nk)|0;ka=(Z+(Zd+Math.imul(qa,na)|0)|0)+((8191&(K=(K=K+Math.imul(qa,Sk)|0)+Math.imul(ia,na)|0))<<13)|0;Z=(($d+Math.imul(ia,Sk)|0)+(K>>>13)|0)+(ka>>>26)|0;ka&=67108863;Zd=Math.imul(V,Ze);K=(K=Math.imul(V,Bj))+Math.imul(yb,Ze)|0;$d=Math.imul(yb,Bj);Zd=Zd+Math.imul(Na,Gh)|0;K=(K=K+Math.imul(Na,Cj)|0)+Math.imul(Ca,Gh)|0;$d=$d+Math.imul(Ca,Cj)|0;Zd=Zd+Math.imul(ha,
rj)|0;K=(K=K+Math.imul(ha,bk)|0)+Math.imul(be,rj)|0;$d=$d+Math.imul(be,bk)|0;Zd=Zd+Math.imul(Hd,Tj)|0;K=(K=K+Math.imul(Hd,Kh)|0)+Math.imul(Vb,Tj)|0;$d=$d+Math.imul(Vb,Kh)|0;Zd=Zd+Math.imul($c,jj)|0;K=(K=K+Math.imul($c,Rk)|0)+Math.imul(oc,jj)|0;$d=$d+Math.imul(oc,Rk)|0;Zd=Zd+Math.imul(dc,ik)|0;K=(K=K+Math.imul(dc,nk)|0)+Math.imul(qc,ik)|0;$d=$d+Math.imul(qc,nk)|0;gb=(Z+(Zd+Math.imul(Lb,na)|0)|0)+((8191&(K=(K=K+Math.imul(Lb,Sk)|0)+Math.imul(La,na)|0))<<13)|0;Z=(($d+Math.imul(La,Sk)|0)+(K>>>13)|0)+(gb>>>
26)|0;gb&=67108863;Zd=Math.imul(V,Gh);K=(K=Math.imul(V,Cj))+Math.imul(yb,Gh)|0;$d=Math.imul(yb,Cj);Zd=Zd+Math.imul(Na,rj)|0;K=(K=K+Math.imul(Na,bk)|0)+Math.imul(Ca,rj)|0;$d=$d+Math.imul(Ca,bk)|0;Zd=Zd+Math.imul(ha,Tj)|0;K=(K=K+Math.imul(ha,Kh)|0)+Math.imul(be,Tj)|0;$d=$d+Math.imul(be,Kh)|0;Zd=Zd+Math.imul(Hd,jj)|0;K=(K=K+Math.imul(Hd,Rk)|0)+Math.imul(Vb,jj)|0;$d=$d+Math.imul(Vb,Rk)|0;Zd=Zd+Math.imul($c,ik)|0;K=(K=K+Math.imul($c,nk)|0)+Math.imul(oc,ik)|0;$d=$d+Math.imul(oc,nk)|0;qa=(Z+(Zd+Math.imul(dc,
na)|0)|0)+((8191&(K=(K=K+Math.imul(dc,Sk)|0)+Math.imul(qc,na)|0))<<13)|0;Z=(($d+Math.imul(qc,Sk)|0)+(K>>>13)|0)+(qa>>>26)|0;qa&=67108863;Zd=Math.imul(V,rj);K=(K=Math.imul(V,bk))+Math.imul(yb,rj)|0;$d=Math.imul(yb,bk);Zd=Zd+Math.imul(Na,Tj)|0;K=(K=K+Math.imul(Na,Kh)|0)+Math.imul(Ca,Tj)|0;$d=$d+Math.imul(Ca,Kh)|0;Zd=Zd+Math.imul(ha,jj)|0;K=(K=K+Math.imul(ha,Rk)|0)+Math.imul(be,jj)|0;$d=$d+Math.imul(be,Rk)|0;Zd=Zd+Math.imul(Hd,ik)|0;K=(K=K+Math.imul(Hd,nk)|0)+Math.imul(Vb,ik)|0;$d=$d+Math.imul(Vb,nk)|
0;ia=(Z+(Zd+Math.imul($c,na)|0)|0)+((8191&(K=(K=K+Math.imul($c,Sk)|0)+Math.imul(oc,na)|0))<<13)|0;Z=(($d+Math.imul(oc,Sk)|0)+(K>>>13)|0)+(ia>>>26)|0;ia&=67108863;Zd=Math.imul(V,Tj);K=(K=Math.imul(V,Kh))+Math.imul(yb,Tj)|0;$d=Math.imul(yb,Kh);Zd=Zd+Math.imul(Na,jj)|0;K=(K=K+Math.imul(Na,Rk)|0)+Math.imul(Ca,jj)|0;$d=$d+Math.imul(Ca,Rk)|0;Zd=Zd+Math.imul(ha,ik)|0;K=(K=K+Math.imul(ha,nk)|0)+Math.imul(be,ik)|0;$d=$d+Math.imul(be,nk)|0;Lb=(Z+(Zd+Math.imul(Hd,na)|0)|0)+((8191&(K=(K=K+Math.imul(Hd,Sk)|0)+
Math.imul(Vb,na)|0))<<13)|0;Z=(($d+Math.imul(Vb,Sk)|0)+(K>>>13)|0)+(Lb>>>26)|0;Lb&=67108863;Zd=Math.imul(V,jj);K=(K=Math.imul(V,Rk))+Math.imul(yb,jj)|0;$d=Math.imul(yb,Rk);Zd=Zd+Math.imul(Na,ik)|0;K=(K=K+Math.imul(Na,nk)|0)+Math.imul(Ca,ik)|0;$d=$d+Math.imul(Ca,nk)|0;La=(Z+(Zd+Math.imul(ha,na)|0)|0)+((8191&(K=(K=K+Math.imul(ha,Sk)|0)+Math.imul(be,na)|0))<<13)|0;Z=(($d+Math.imul(be,Sk)|0)+(K>>>13)|0)+(La>>>26)|0;La&=67108863;Zd=Math.imul(V,ik);K=(K=Math.imul(V,nk))+Math.imul(yb,ik)|0;$d=Math.imul(yb,
nk);dc=(Z+(Zd+Math.imul(Na,na)|0)|0)+((8191&(K=(K=K+Math.imul(Na,Sk)|0)+Math.imul(Ca,na)|0))<<13)|0;Z=(($d+Math.imul(Ca,Sk)|0)+(K>>>13)|0)+(dc>>>26)|0;dc&=67108863;qc=(Z+Math.imul(V,na)|0)+((8191&(K=(K=Math.imul(V,Sk))+Math.imul(yb,na)|0))<<13)|0;return Z=(Math.imul(yb,Sk)+(K>>>13)|0)+(qc>>>26)|0,qc&=67108863,la[0]=cz,la[1]=bz,la[2]=bx,la[3]=rv,la[4]=wB,la[5]=AB,la[6]=BB,la[7]=CB,la[8]=DB,la[9]=jb,la[10]=ya,la[11]=ka,la[12]=gb,la[13]=qa,la[14]=ia,la[15]=Lb,la[16]=La,la[17]=dc,la[18]=qc,0!==Z&&(la[19]=
Z,U.length++),U};Math.imul||(ra=r);a.prototype.mulTo=function(K,Z){var U=(this||db).length+K.length;if(10===(this||db).length&&10===K.length)K=ra(this||db,K,Z);else if(63>U)K=r(this||db,K,Z);else if(1024>U){U=this||db;Z.negative=K.negative^U.negative;Z.length=U.length+K.length;for(var V=0,na=0,la=0;la<Z.length-1;la++){var ya=na;na=0;V&=67108863;for(var jb=Math.min(la,K.length-1),gb=Math.max(0,la-U.length+1);gb<=jb;gb++){var ka=(0|U.words[la-gb])*(0|K.words[gb]),ia=67108863&ka;V=67108863&(ia=ia+V|
0);na+=(ya=(ya=ya+(ka/67108864|0)|0)+(ia>>>26)|0)>>>26;ya&=67108863}Z.words[la]=V;V=ya}K=(0!==V?Z.words[la]=V:Z.length--,Z.strip())}else U=this||db,K=(new v).mulp(U,K,Z);return K};v.prototype.makeRBT=function(K){for(var Z=Array(K),U=a.prototype._countBits(K)-1,V=0;V<K;V++)Z[V]=this.revBin(V,U,K);return Z};v.prototype.revBin=function(K,Z,U){if(0===K||K===U-1)return K;for(var V=U=0;V<Z;V++)U|=(1&K)<<Z-V-1,K>>=1;return U};v.prototype.permute=function(K,Z,U,V,na,la){for(var ya=0;ya<la;ya++)V[ya]=Z[K[ya]],
na[ya]=U[K[ya]]};v.prototype.transform=function(K,Z,U,V,na,la){this.permute(la,K,Z,U,V,na);for(K=1;K<na;K<<=1){Z=K<<1;la=Math.cos(2*Math.PI/Z);for(var ya=Math.sin(2*Math.PI/Z),jb=0;jb<na;jb+=Z)for(var gb=la,ka=ya,ia=0;ia<K;ia++){var qa=U[jb+ia],La=V[jb+ia],Lb=U[jb+ia+K],qc=V[jb+ia+K],dc=gb*Lb-ka*qc;qc=gb*qc+ka*Lb;Lb=dc;U[jb+ia]=qa+Lb;V[jb+ia]=La+qc;U[jb+ia+K]=qa-Lb;V[jb+ia+K]=La-qc;ia!==Z&&(dc=la*gb-ya*ka,ka=la*ka+ya*gb,gb=dc)}}};v.prototype.guessLen13b=function(K,Z){K=1|Math.max(Z,K);Z=1&K;var U=
0;for(K=K/2|0;K;K>>>=1)U++;return 1<<U+1+Z};v.prototype.conjugate=function(K,Z,U){if(!(1>=U))for(var V=0;V<U/2;V++){var na=K[V];K[V]=K[U-V-1];K[U-V-1]=na;na=Z[V];Z[V]=-Z[U-V-1];Z[U-V-1]=-na}};v.prototype.normalize13b=function(K,Z){for(var U=0,V=0;V<Z/2;V++)U=8192*Math.round(K[2*V+1]/Z)+Math.round(K[2*V]/Z)+U,K[V]=67108863&U,U=67108864>U?0:U/67108864|0;return K};v.prototype.convert13b=function(K,Z,U,V){for(var na=0,la=0;la<Z;la++)na+=0|K[la],U[2*la]=8191&na,na>>>=13,U[2*la+1]=8191&na,na>>>=13;for(la=
2*Z;la<V;++la)U[la]=0;d(0===na);d(0==(-8192&na))};v.prototype.stub=function(K){for(var Z=Array(K),U=0;U<K;U++)Z[U]=0;return Z};v.prototype.mulp=function(K,Z,U){var V=2*this.guessLen13b(K.length,Z.length),na=this.makeRBT(V),la=this.stub(V),ya=Array(V),jb=Array(V),gb=Array(V),ka=Array(V),ia=Array(V),qa=Array(V),La=U.words;La.length=V;this.convert13b(K.words,K.length,ya,V);this.convert13b(Z.words,Z.length,ka,V);this.transform(ya,la,jb,gb,V,na);this.transform(ka,la,ia,qa,V,na);for(ya=0;ya<V;ya++)ka=jb[ya]*
ia[ya]-gb[ya]*qa[ya],gb[ya]=jb[ya]*qa[ya]+gb[ya]*ia[ya],jb[ya]=ka;return this.conjugate(jb,gb,V),this.transform(jb,gb,La,la,V,na),this.conjugate(La,la,V),this.normalize13b(La,V),U.negative=K.negative^Z.negative,U.length=K.length+Z.length,U.strip()};a.prototype.mul=function(K){var Z=new a(null);return Z.words=Array((this||db).length+K.length),this.mulTo(K,Z)};a.prototype.mulf=function(K){var Z=new a(null);Z.words=Array((this||db).length+K.length);var U=this||db;return(new v).mulp(U,K,Z)};a.prototype.imul=
function(K){return this.clone().mulTo(K,this||db)};a.prototype.imuln=function(K){d("number"==typeof K);d(67108864>K);for(var Z=0,U=0;U<(this||db).length;U++){var V=(0|(this||db).words[U])*K,na=(67108863&V)+(67108863&Z);Z>>=26;Z+=V/67108864|0;Z+=na>>>26;(this||db).words[U]=67108863&na}return 0!==Z&&((this||db).words[U]=Z,(this||db).length++),this||db};a.prototype.muln=function(K){return this.clone().imuln(K)};a.prototype.sqr=function(){return this.mul(this||db)};a.prototype.isqr=function(){return this.imul(this.clone())};
a.prototype.pow=function(K){for(var Z=Array(K.bitLength()),U=0;U<Z.length;U++){var V=U%26;Z[U]=(K.words[U/26|0]&1<<V)>>>V}if(0===Z.length)return new a(1);K=this||db;for(U=0;U<Z.length&&0===Z[U];U++,K=K.sqr());if(++U<Z.length)for(V=K.sqr();U<Z.length;U++,V=V.sqr())0!==Z[U]&&(K=K.mul(V));return K};a.prototype.iushln=function(K){d("number"==typeof K&&0<=K);var Z=K%26,U=(K-Z)/26,V=67108863>>>26-Z<<26-Z;if(0!==Z){var na=0;for(K=0;K<(this||db).length;K++){var la=(this||db).words[K]&V;(this||db).words[K]=
(0|(this||db).words[K])-la<<Z|na;na=la>>>26-Z}na&&((this||db).words[K]=na,(this||db).length++)}if(0!==U){for(K=(this||db).length-1;0<=K;K--)(this||db).words[K+U]=(this||db).words[K];for(K=0;K<U;K++)(this||db).words[K]=0;(this||db).length+=U}return this.strip()};a.prototype.ishln=function(K){return d(0===(this||db).negative),this.iushln(K)};a.prototype.iushrn=function(K,Z,U){d("number"==typeof K&&0<=K);Z=Z?(Z-Z%26)/26:0;var V=K%26,na=Math.min((K-V)/26,(this||db).length);K=67108863^67108863>>>V<<V;
if(Z-=na,Z=Math.max(0,Z),U){for(var la=0;la<na;la++)U.words[la]=(this||db).words[la];U.length=na}if(0!==na)if((this||db).length>na)for((this||db).length-=na,la=0;la<(this||db).length;la++)(this||db).words[la]=(this||db).words[la+na];else(this||db).words[0]=0,(this||db).length=1;na=0;for(la=(this||db).length-1;0<=la&&(0!==na||la>=Z);la--){var ya=0|(this||db).words[la];(this||db).words[la]=na<<26-V|ya>>>V;na=ya&K}return U&&0!==na&&(U.words[U.length++]=na),0===(this||db).length&&((this||db).words[0]=
0,(this||db).length=1),this.strip()};a.prototype.ishrn=function(K,Z,U){return d(0===(this||db).negative),this.iushrn(K,Z,U)};a.prototype.shln=function(K){return this.clone().ishln(K)};a.prototype.ushln=function(K){return this.clone().iushln(K)};a.prototype.shrn=function(K){return this.clone().ishrn(K)};a.prototype.ushrn=function(K){return this.clone().iushrn(K)};a.prototype.testn=function(K){d("number"==typeof K&&0<=K);var Z=K%26;K=(K-Z)/26;return!((this||db).length<=K)&&!!((this||db).words[K]&1<<
Z)};a.prototype.imaskn=function(K){d("number"==typeof K&&0<=K);var Z=K%26;K=(K-Z)/26;if(d(0===(this||db).negative,"imaskn works only with positive numbers"),(this||db).length<=K)return this||db;if(0!==Z&&K++,(this||db).length=Math.min(K,(this||db).length),0!==Z)(this||db).words[(this||db).length-1]&=67108863^67108863>>>Z<<Z;return this.strip()};a.prototype.maskn=function(K){return this.clone().imaskn(K)};a.prototype.iaddn=function(K){return d("number"==typeof K),d(67108864>K),0>K?this.isubn(-K):0!==
(this||db).negative?1===(this||db).length&&(0|(this||db).words[0])<K?((this||db).words[0]=K-(0|(this||db).words[0]),(this||db).negative=0,this||db):((this||db).negative=0,this.isubn(K),(this||db).negative=1,this||db):this._iaddn(K)};a.prototype._iaddn=function(K){(this||db).words[0]+=K;for(K=0;K<(this||db).length&&67108864<=(this||db).words[K];K++)(this||db).words[K]-=67108864,K===(this||db).length-1?(this||db).words[K+1]=1:(this||db).words[K+1]++;return(this||db).length=Math.max((this||db).length,
K+1),this||db};a.prototype.isubn=function(K){if(d("number"==typeof K),d(67108864>K),0>K)return this.iaddn(-K);if(0!==(this||db).negative)return(this||db).negative=0,this.iaddn(K),(this||db).negative=1,this||db;if((this||db).words[0]-=K,1===(this||db).length&&0>(this||db).words[0])(this||db).words[0]=-(this||db).words[0],(this||db).negative=1;else for(K=0;K<(this||db).length&&0>(this||db).words[K];K++)(this||db).words[K]+=67108864,--(this||db).words[K+1];return this.strip()};a.prototype.addn=function(K){return this.clone().iaddn(K)};
a.prototype.subn=function(K){return this.clone().isubn(K)};a.prototype.iabs=function(){return(this||db).negative=0,this||db};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(K,Z,U){var V;this._expand(K.length+U);var na=0;for(V=0;V<K.length;V++){var la=(0|(this||db).words[V+U])+na;na=(0|K.words[V])*Z;na=((la-=67108863&na)>>26)-(na/67108864|0);(this||db).words[V+U]=67108863&la}for(;V<(this||db).length-U;V++)na=(la=(0|(this||db).words[V+U])+na)>>26,(this||db).words[V+
U]=67108863&la;if(0===na)return this.strip();d(-1===na);for(V=na=0;V<(this||db).length;V++)na=(la=-(0|(this||db).words[V])+na)>>26,(this||db).words[V]=67108863&la;return(this||db).negative=1,this.strip()};a.prototype._wordDiv=function(K,Z){var U=((this||db).length,K.length),V=this.clone(),na=0|K.words[K.length-1];0!==(U=26-this._countBits(na))&&(K=K.ushln(U),V.iushln(U),na=0|K.words[K.length-1]);var la,ya=V.length-K.length;if("mod"!==Z){(la=new a(null)).length=ya+1;la.words=Array(la.length);for(var jb=
0;jb<la.length;jb++)la.words[jb]=0}jb=V.clone()._ishlnsubmul(K,1,ya);0===jb.negative&&(V=jb,la&&(la.words[ya]=1));for(--ya;0<=ya;ya--){jb=67108864*(0|V.words[K.length+ya])+(0|V.words[K.length+ya-1]);jb=Math.min(jb/na|0,67108863);for(V._ishlnsubmul(K,jb,ya);0!==V.negative;)jb--,V.negative=0,V._ishlnsubmul(K,1,ya),V.isZero()||(V.negative^=1);la&&(la.words[ya]=jb)}return la&&la.strip(),V.strip(),"div"!==Z&&0!==U&&V.iushrn(U),{div:la||null,mod:V}};a.prototype.divmod=function(K,Z,U){return d(!K.isZero()),
this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||db).negative&&0===K.negative?(la=this.neg().divmod(K,Z),"mod"!==Z&&(V=la.div.neg()),"div"!==Z&&(na=la.mod.neg(),U&&0!==na.negative&&na.iadd(K)),{div:V,mod:na}):0===(this||db).negative&&0!==K.negative?(la=this.divmod(K.neg(),Z),"mod"!==Z&&(V=la.div.neg()),{div:V,mod:la.mod}):0!=((this||db).negative&K.negative)?(la=this.neg().divmod(K.neg(),Z),"div"!==Z&&(na=la.mod.neg(),U&&0!==na.negative&&na.isub(K)),{div:la.div,mod:na}):K.length>(this||db).length||
0>this.cmp(K)?{div:new a(0),mod:this||db}:1===K.length?"div"===Z?{div:this.divn(K.words[0]),mod:null}:"mod"===Z?{div:null,mod:new a(this.modn(K.words[0]))}:{div:this.divn(K.words[0]),mod:new a(this.modn(K.words[0]))}:this._wordDiv(K,Z);var V,na,la};a.prototype.div=function(K){return this.divmod(K,"div",!1).div};a.prototype.mod=function(K){return this.divmod(K,"mod",!1).mod};a.prototype.umod=function(K){return this.divmod(K,"mod",!0).mod};a.prototype.divRound=function(K){var Z=this.divmod(K);if(Z.mod.isZero())return Z.div;
var U=0!==Z.div.negative?Z.mod.isub(K):Z.mod,V=K.ushrn(1);K=K.andln(1);U=U.cmp(V);return 0>U||1===K&&0===U?Z.div:0!==Z.div.negative?Z.div.isubn(1):Z.div.iaddn(1)};a.prototype.modn=function(K){d(67108863>=K);for(var Z=67108864%K,U=0,V=(this||db).length-1;0<=V;V--)U=(Z*U+(0|(this||db).words[V]))%K;return U};a.prototype.idivn=function(K){d(67108863>=K);for(var Z=0,U=(this||db).length-1;0<=U;U--)Z=(0|(this||db).words[U])+67108864*Z,(this||db).words[U]=Z/K|0,Z%=K;return this.strip()};a.prototype.divn=
function(K){return this.clone().idivn(K)};a.prototype.egcd=function(K){d(0===K.negative);d(!K.isZero());var Z=this||db,U=K.clone();Z=0!==Z.negative?Z.umod(K):Z.clone();K=new a(1);for(var V=new a(0),na=new a(0),la=new a(1),ya=0;Z.isEven()&&U.isEven();)Z.iushrn(1),U.iushrn(1),++ya;for(var jb=U.clone(),gb=Z.clone();!Z.isZero();){for(var ka=0,ia=1;0==(Z.words[0]&ia)&&26>ka;++ka,ia<<=1);if(0<ka)for(Z.iushrn(ka);0<ka--;)(K.isOdd()||V.isOdd())&&(K.iadd(jb),V.isub(gb)),K.iushrn(1),V.iushrn(1);ka=0;for(ia=
1;0==(U.words[0]&ia)&&26>ka;++ka,ia<<=1);if(0<ka)for(U.iushrn(ka);0<ka--;)(na.isOdd()||la.isOdd())&&(na.iadd(jb),la.isub(gb)),na.iushrn(1),la.iushrn(1);0<=Z.cmp(U)?(Z.isub(U),K.isub(na),V.isub(la)):(U.isub(Z),na.isub(K),la.isub(V))}return{a:na,b:la,gcd:U.iushln(ya)}};a.prototype._invmp=function(K){d(0===K.negative);d(!K.isZero());var Z=this||db,U=K.clone();Z=0!==Z.negative?Z.umod(K):Z.clone();for(var V,na=new a(1),la=new a(0),ya=U.clone();0<Z.cmpn(1)&&0<U.cmpn(1);){for(var jb=0,gb=1;0==(Z.words[0]&
gb)&&26>jb;++jb,gb<<=1);if(0<jb)for(Z.iushrn(jb);0<jb--;)na.isOdd()&&na.iadd(ya),na.iushrn(1);jb=0;for(gb=1;0==(U.words[0]&gb)&&26>jb;++jb,gb<<=1);if(0<jb)for(U.iushrn(jb);0<jb--;)la.isOdd()&&la.iadd(ya),la.iushrn(1);0<=Z.cmp(U)?(Z.isub(U),na.isub(la)):(U.isub(Z),la.isub(na))}return 0>(V=0===Z.cmpn(1)?na:la).cmpn(0)&&V.iadd(K),V};a.prototype.gcd=function(K){if(this.isZero())return K.abs();if(K.isZero())return this.abs();var Z=this.clone();K=K.clone();Z.negative=0;for(var U=K.negative=0;Z.isEven()&&
K.isEven();U++)Z.iushrn(1),K.iushrn(1);for(;;){for(;Z.isEven();)Z.iushrn(1);for(;K.isEven();)K.iushrn(1);var V=Z.cmp(K);if(0>V)V=Z,Z=K,K=V;else if(0===V||0===K.cmpn(1))break;Z.isub(K)}return K.iushln(U)};a.prototype.invm=function(K){return this.egcd(K).a.umod(K)};a.prototype.isEven=function(){return 0==(1&(this||db).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||db).words[0])};a.prototype.andln=function(K){return(this||db).words[0]&K};a.prototype.bincn=function(K){d("number"==typeof K);
var Z=K%26;K=(K-Z)/26;Z=1<<Z;if((this||db).length<=K)return this._expand(K+1),(this||db).words[K]|=Z,this||db;for(;0!==Z&&K<(this||db).length;K++){var U=0|(this||db).words[K];Z=(U+=Z)>>>26;U&=67108863;(this||db).words[K]=U}return 0!==Z&&((this||db).words[K]=Z,(this||db).length++),this||db};a.prototype.isZero=function(){return 1===(this||db).length&&0===(this||db).words[0]};a.prototype.cmpn=function(K){var Z=0>K;if(0!==(this||db).negative&&!Z)return-1;if(0===(this||db).negative&&Z)return 1;(this.strip(),
1<(this||db).length)?K=1:(Z&&(K=-K),d(67108863>=K,"Number is too big"),Z=0|(this||db).words[0],K=Z===K?0:Z<K?-1:1);return 0!==(this||db).negative?0|-K:K};a.prototype.cmp=function(K){if(0!==(this||db).negative&&0===K.negative)return-1;if(0===(this||db).negative&&0!==K.negative)return 1;K=this.ucmp(K);return 0!==(this||db).negative?0|-K:K};a.prototype.ucmp=function(K){if((this||db).length>K.length)return 1;if((this||db).length<K.length)return-1;for(var Z=0,U=(this||db).length-1;0<=U;U--){var V=0|(this||
db).words[U],na=0|K.words[U];if(V!==na){V<na?Z=-1:V>na&&(Z=1);break}}return Z};a.prototype.gtn=function(K){return 1===this.cmpn(K)};a.prototype.gt=function(K){return 1===this.cmp(K)};a.prototype.gten=function(K){return 0<=this.cmpn(K)};a.prototype.gte=function(K){return 0<=this.cmp(K)};a.prototype.ltn=function(K){return-1===this.cmpn(K)};a.prototype.lt=function(K){return-1===this.cmp(K)};a.prototype.lten=function(K){return 0>=this.cmpn(K)};a.prototype.lte=function(K){return 0>=this.cmp(K)};a.prototype.eqn=
function(K){return 0===this.cmpn(K)};a.prototype.eq=function(K){return 0===this.cmp(K)};a.red=function(K){return new I(K)};a.prototype.toRed=function(K){return d(!(this||db).red,"Already a number in reduction context"),d(0===(this||db).negative,"red works only with positives"),K.convertTo(this||db)._forceRed(K)};a.prototype.fromRed=function(){return d((this||db).red,"fromRed works only with numbers in reduction context"),(this||db).red.convertFrom(this||db)};a.prototype._forceRed=function(K){return(this||
db).red=K,this||db};a.prototype.forceRed=function(K){return d(!(this||db).red,"Already a number in reduction context"),this._forceRed(K)};a.prototype.redAdd=function(K){return d((this||db).red,"redAdd works only with red numbers"),(this||db).red.add(this||db,K)};a.prototype.redIAdd=function(K){return d((this||db).red,"redIAdd works only with red numbers"),(this||db).red.iadd(this||db,K)};a.prototype.redSub=function(K){return d((this||db).red,"redSub works only with red numbers"),(this||db).red.sub(this||
db,K)};a.prototype.redISub=function(K){return d((this||db).red,"redISub works only with red numbers"),(this||db).red.isub(this||db,K)};a.prototype.redShl=function(K){return d((this||db).red,"redShl works only with red numbers"),(this||db).red.shl(this||db,K)};a.prototype.redMul=function(K){return d((this||db).red,"redMul works only with red numbers"),(this||db).red._verify2(this||db,K),(this||db).red.mul(this||db,K)};a.prototype.redIMul=function(K){return d((this||db).red,"redMul works only with red numbers"),
(this||db).red._verify2(this||db,K),(this||db).red.imul(this||db,K)};a.prototype.redSqr=function(){return d((this||db).red,"redSqr works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.sqr(this||db)};a.prototype.redISqr=function(){return d((this||db).red,"redISqr works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.isqr(this||db)};a.prototype.redSqrt=function(){return d((this||db).red,"redSqrt works only with red numbers"),(this||db).red._verify1(this||
db),(this||db).red.sqrt(this||db)};a.prototype.redInvm=function(){return d((this||db).red,"redInvm works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.invm(this||db)};a.prototype.redNeg=function(){return d((this||db).red,"redNeg works only with red numbers"),(this||db).red._verify1(this||db),(this||db).red.neg(this||db)};a.prototype.redPow=function(K){return d((this||db).red&&!K.red,"redPow(normalNum)"),(this||db).red._verify1(this||db),(this||db).red.pow(this||db,K)};var Ea=
{k256:null,p224:null,p192:null,p25519:null};y.prototype._tmp=function(){var K=new a(null);return K.words=Array(Math.ceil((this||db).n/13)),K};y.prototype.ireduce=function(K){do{this.split(K,(this||db).tmp);var Z=(K=(K=this.imulK(K)).iadd((this||db).tmp)).bitLength()}while(Z>(this||db).n);Z=Z<(this||db).n?-1:K.ucmp((this||db).p);return 0===Z?(K.words[0]=0,K.length=1):0<Z?K.isub((this||db).p):K.strip(),K};y.prototype.split=function(K,Z){K.iushrn((this||db).n,0,Z)};y.prototype.imulK=function(K){return K.imul((this||
db).k)};m(A,y);A.prototype.split=function(K,Z){for(var U=Math.min(K.length,9),V=0;V<U;V++)Z.words[V]=K.words[V];if(Z.length=U,9>=K.length)return K.words[0]=0,K.length=1,void 0;U=K.words[9];Z.words[Z.length++]=4194303&U;for(V=10;V<K.length;V++)Z=0|K.words[V],K.words[V-10]=(4194303&Z)<<4|U>>>22,U=Z;U>>>=22;K.words[V-10]=U;0===U&&10<K.length?K.length-=10:K.length-=9};A.prototype.imulK=function(K){K.words[K.length]=0;K.words[K.length+1]=0;K.length+=2;for(var Z=0,U=0;U<K.length;U++){var V=0|K.words[U];
Z+=977*V;K.words[U]=67108863&Z;Z=64*V+(Z/67108864|0)}return 0===K.words[K.length-1]&&(K.length--,0===K.words[K.length-1]&&K.length--),K};m(E,y);m(F,y);m(G,y);G.prototype.imulK=function(K){for(var Z=0,U=0;U<K.length;U++){Z=19*(0|K.words[U])+Z;var V=67108863&Z;Z>>>=26;K.words[U]=V}return 0!==Z&&(K.words[K.length++]=Z),K};a._prime=function(K){if(Ea[K])return Ea[K];if("k256"===K)var Z=new A;else if("p224"===K)Z=new E;else if("p192"===K)Z=new F;else{if("p25519"!==K)throw Error("Unknown prime "+K);Z=new G}return Ea[K]=
Z,Z};I.prototype._verify1=function(K){d(0===K.negative,"red works only with positives");d(K.red,"red works only with red numbers")};I.prototype._verify2=function(K,Z){d(0==(K.negative|Z.negative),"red works only with positives");d(K.red&&K.red===Z.red,"red works only with red numbers")};I.prototype.imod=function(K){return(this||db).prime?(this||db).prime.ireduce(K)._forceRed(this||db):K.umod((this||db).m)._forceRed(this||db)};I.prototype.neg=function(K){return K.isZero()?K.clone():(this||db).m.sub(K)._forceRed(this||
db)};I.prototype.add=function(K,Z){this._verify2(K,Z);K=K.add(Z);return 0<=K.cmp((this||db).m)&&K.isub((this||db).m),K._forceRed(this||db)};I.prototype.iadd=function(K,Z){this._verify2(K,Z);K=K.iadd(Z);return 0<=K.cmp((this||db).m)&&K.isub((this||db).m),K};I.prototype.sub=function(K,Z){this._verify2(K,Z);K=K.sub(Z);return 0>K.cmpn(0)&&K.iadd((this||db).m),K._forceRed(this||db)};I.prototype.isub=function(K,Z){this._verify2(K,Z);K=K.isub(Z);return 0>K.cmpn(0)&&K.iadd((this||db).m),K};I.prototype.shl=
function(K,Z){return this._verify1(K),this.imod(K.ushln(Z))};I.prototype.imul=function(K,Z){return this._verify2(K,Z),this.imod(K.imul(Z))};I.prototype.mul=function(K,Z){return this._verify2(K,Z),this.imod(K.mul(Z))};I.prototype.isqr=function(K){return this.imul(K,K.clone())};I.prototype.sqr=function(K){return this.mul(K,K)};I.prototype.sqrt=function(K){if(K.isZero())return K.clone();var Z=(this||db).m.andln(3);if(d(1==Z%2),3===Z)return Z=(this||db).m.add(new a(1)).iushrn(2),this.pow(K,Z);for(var U=
(this||db).m.subn(1),V=0;!U.isZero()&&0===U.andln(1);)V++,U.iushrn(1);d(!U.isZero());Z=(new a(1)).toRed(this||db);var na=Z.redNeg(),la=(this||db).m.subn(1).iushrn(1),ya=(this||db).m.bitLength();for(ya=(new a(2*ya*ya)).toRed(this||db);0!==this.pow(ya,la).cmp(na);)ya.redIAdd(na);la=this.pow(ya,U);na=this.pow(K,U.addn(1).iushrn(1));K=this.pow(K,U);for(U=V;0!==K.cmp(Z);){ya=K;for(V=0;0!==ya.cmp(Z);V++)ya=ya.redSqr();d(V<U);la=this.pow(la,(new a(1)).iushln(U-V-1));na=na.redMul(la);la=la.redSqr();K=K.redMul(la);
U=V}return na};I.prototype.invm=function(K){K=K._invmp((this||db).m);return 0!==K.negative?(K.negative=0,this.imod(K).redNeg()):this.imod(K)};I.prototype.pow=function(K,Z){if(Z.isZero())return(new a(1)).toRed(this||db);if(0===Z.cmpn(1))return K.clone();var U=Array(16);U[0]=(new a(1)).toRed(this||db);U[1]=K;for(var V=2;V<U.length;V++)U[V]=this.mul(U[V-1],K);K=U[0];var na=0,la=0,ya=Z.bitLength()%26;0===ya&&(ya=26);for(V=Z.length-1;0<=V;V--){var jb=Z.words[V];for(--ya;0<=ya;ya--){var gb=jb>>ya&1;K!==
U[0]&&(K=this.sqr(K));0!==gb||0!==na?(na<<=1,na|=gb,(4===++la||0===V&&0===ya)&&(K=this.mul(K,U[na]),la=0,na=0)):la=0}ya=26}return K};I.prototype.convertTo=function(K){var Z=K.umod((this||db).m);return Z===K?Z.clone():Z};I.prototype.convertFrom=function(K){K=K.clone();return K.red=null,K};a.mont=function(K){return new M(K)};m(M,I);M.prototype.convertTo=function(K){return this.imod(K.ushln((this||db).shift))};M.prototype.convertFrom=function(K){K=this.imod(K.mul((this||db).rinv));return K.red=null,
K};M.prototype.imul=function(K,Z){if(K.isZero()||Z.isZero())return K.words[0]=0,K.length=1,K;K=K.imul(Z);Z=K.maskn((this||db).shift).mul((this||db).minv).imaskn((this||db).shift).mul((this||db).m);Z=K=K.isub(Z).iushrn((this||db).shift);return 0<=K.cmp((this||db).m)?Z=K.isub((this||db).m):0>K.cmpn(0)&&(Z=K.iadd((this||db).m)),Z._forceRed(this||db)};M.prototype.mul=function(K,Z){if(K.isZero()||Z.isZero())return(new a(0))._forceRed(this||db);K=K.mul(Z);Z=K.maskn((this||db).shift).mul((this||db).minv).imaskn((this||
db).shift).mul((this||db).m);Z=K=K.isub(Z).iushrn((this||db).shift);return 0<=K.cmp((this||db).m)?Z=K.isub((this||db).m):0>K.cmpn(0)&&(Z=K.iadd((this||db).m)),Z._forceRed(this||db)};M.prototype.invm=function(K){return this.imod(K._invmp((this||db).m).mul((this||db).r2))._forceRed(this||db)}}(maa,laa);var Om=maa.exports,ON,gW,naa=Object.freeze({}),nL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((ON=function(n){return gW||(gW=new Dy(null)),gW.generate(n)}).Rand=
Dy,Dy.prototype.generate=function(n){return this._rand(n)},Dy.prototype._rand=function(n){if((this||nL).rand.getBytes)return(this||nL).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||nL).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Dy.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?Dy.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),
n}:"object"==typeof window&&(Dy.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof naa.randomBytes)throw Error("Not supported");Dy.prototype._rand=function(n){return naa.randomBytes(n)}}catch(n){}var i4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,NB=Om,Eia=ON;Ey.create=function(n){return new Ey(n)};Ey.prototype._randbelow=function(n){var b=n.bitLength();b=Math.ceil(b/8);do var d=new NB((this||i4).rand.generate(b));while(0<=
d.cmp(n));return d};Ey.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};Ey.prototype.test=function(n,b,d){var m=n.bitLength(),a=NB.mont(n),g=(new NB(1)).toRed(a);b||(b=Math.max(1,m/48|0));m=n.subn(1);for(var l=0;!m.testn(l);l++);n=n.shrn(l);for(var r=m.toRed(a);0<b;b--){var v=this._randrange(new NB(2),m);d&&d(v);v=v.toRed(a).redPow(n);if(0!==v.cmp(g)&&0!==v.cmp(r)){for(var y=1;y<l;y++){if(0===(v=v.redSqr()).cmp(g))return!1;if(0===v.cmp(r))break}if(y===l)return!1}}return!0};
Ey.prototype.getDivisor=function(n,b){var d=n.bitLength(),m=NB.mont(n),a=(new NB(1)).toRed(m);b||(b=Math.max(1,d/48|0));d=n.subn(1);for(var g=0;!d.testn(g);g++);for(var l=n.shrn(g),r=d.toRed(m);0<b;b--){var v=this._randrange(new NB(2),d),y=n.gcd(v);if(0!==y.cmpn(1))return y;v=v.toRed(m).redPow(l);if(0!==v.cmp(a)&&0!==v.cmp(r)){for(y=1;y<g;y++){if(0===(v=v.redSqr()).cmp(a))return v.fromRed().subn(1).gcd(n);if(0===v.cmp(r))break}if(y===g)return v.redSqr().fromRed().subn(1).gcd(n)}}return!1};var Fia=
hz;DG.simpleSieve=lS;DG.fermatTest=nS;var Go=Om,Kia=new Go(24),k4=new Ey,Gia=new Go(1),oS=new Go(2),Hia=new Go(5),Iia=(new Go(16),new Go(8),new Go(10)),Jia=new Go(3),Lia=(new Go(7),new Go(11)),j4=new Go(4),mS=(new Go(12),null),Rj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Yu=ij.Buffer,Or=Om,oaa=new Ey,$qa=new Or(24),ara=new Or(11),bra=new Or(10),cra=new Or(3),dra=new Or(7),PN={};Object.defineProperty(et.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=
typeof(this||Rj)._primeCode){var n=(this||Rj).__prime;var b=(this||Rj).__gen.toString("hex"),d=[b,n.toString(16)].join("_");if(d in PN)n=PN[d];else{var m,a=0;if(!n.isEven()&&DG.simpleSieve&&DG.fermatTest(n)&&oaa.test(n)){switch(oaa.test(n.shrn(1))||(a+=2),b){case "02":n.mod($qa).cmp(ara)&&(a+=8);break;case "05":(m=n.mod(bra)).cmp(cra)&&m.cmp(dra)&&(a+=8);break;default:a+=4}n=(PN[d]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,PN[d]=a,a)}(this||Rj)._primeCode=n}return(this||Rj)._primeCode}});et.prototype.generateKeys=
function(){return(this||Rj)._priv||((this||Rj)._priv=new Or(hz((this||Rj)._primeLen))),(this||Rj)._pub=(this||Rj)._gen.toRed((this||Rj)._prime).redPow((this||Rj)._priv).fromRed(),this.getPublicKey()};et.prototype.computeSecret=function(n){n=(new Or(n)).toRed((this||Rj)._prime).redPow((this||Rj)._priv).fromRed();n=new Yu(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new Yu(b.length-n.length),b.fill(0),n=Yu.concat([b,n]));return n};et.prototype.getPublicKey=function(n){return oL((this||Rj)._pub,
n)};et.prototype.getPrivateKey=function(n){return oL((this||Rj)._priv,n)};et.prototype.getPrime=function(n){return oL((this||Rj).__prime,n)};et.prototype.getGenerator=function(n){return oL((this||Rj)._gen,n)};et.prototype.setGenerator=function(n,b){return b=b||"utf8",Yu.isBuffer(n)||(n=new Yu(n,b)),(this||Rj).__gen=n,(this||Rj)._gen=new Or(n),this||Rj};var paa,qaa,raa,kz=ij.Buffer,saa={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
era={binary:!0,hex:!0,base64:!0};var fra=paa=qaa=function(n){var b=new kz(saa[n].prime,"hex");n=new kz(saa[n].gen,"hex");return new et(b,n)};var gra=raa=function g(b,d,m,a){return kz.isBuffer(d)||void 0===era[d]?g(b,"binary",d,m):(d=d||"binary",a=a||"binary",m=m||new kz([2]),kz.isBuffer(m)||(m=new kz(m,a)),"number"==typeof b?new et(DG(b,m),m,!0):(kz.isBuffer(b)||(b=new kz(b,d)),new et(b,m,!0)))};var Oia=ij.Buffer,Fy=Om,m4=hz;pL.getr=l4;var lz={toArray:function(b,d){if(Array.isArray(b))return b.slice();
if(!b)return[];var m=[];if("string"!=typeof b){for(d=0;d<b.length;d++)m[d]=0|b[d];return m}if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),d=0;d<b.length;d+=2)m.push(parseInt(b[d]+b[d+1],16));else for(d=0;d<b.length;d++){var a=b.charCodeAt(d),g=a>>8;a&=255;g?m.push(g,a):m.push(a)}return m}};lz.zero2=n4;lz.toHex=o4;lz.encode=function(b,d){return"hex"===d?o4(b):b};var fj={},hra=Om;fj.assert=Ur;fj.toArray=lz.toArray;fj.zero2=lz.zero2;fj.toHex=lz.toHex;fj.encode=lz.encode;fj.getNAF=
function(b,d,m){m=Array(Math.max(b.bitLength(),m)+1);m.fill(0);d=1<<d+1;b=b.clone();for(var a=0;a<m.length;a++){var g,l=b.andln(d-1);b.isOdd()?(g=l>(d>>1)-1?(d>>1)-l:l,b.isubn(g)):g=0;m[a]=g;b.iushrn(1)}return m};fj.getJSF=function(b,d){var m=[[],[]];b=b.clone();d=d.clone();for(var a=0,g=0;0<b.cmpn(-a)||0<d.cmpn(-g);){var l;var r=b.andln(3)+a&3;var v=d.andln(3)+g&3;var y=(3===r&&(r=-1),3===v&&(v=-1),0==(1&r))?0:3!==(l=b.andln(7)+a&7)&&5!==l||2!==v?r:-r;r=(m[0].push(y),0==(1&v))?0:3!==(l=d.andln(7)+
g&7)&&5!==l||2!==r?v:-v;m[1].push(r);2*a===y+1&&(a=1-a);2*g===r+1&&(g=1-g);b.iushrn(1);d.iushrn(1)}return m};fj.cachedProperty=function(b,d,m){var a="_"+d;b.prototype[d]=function(){return void 0!==this[a]?this[a]:this[a]=m.call(this)}};fj.parseBytes=function(b){return"string"==typeof b?fj.toArray(b,"hex"):b};fj.intFromLE=function(b){return new hra(b,"hex","le")};var qL=Om,Pia=fj.assert;XA.prototype._importDER=function(b,d){b=fj.toArray(b,d);var m=new Qia;if(48!==b[m.place++]||pS(b,m)+m.place!==b.length||
2!==b[m.place++])return!1;var a=pS(b,m);d=b.slice(m.place,a+m.place);if(m.place+=a,2!==b[m.place++])return!1;a=pS(b,m);if(b.length!==a+m.place)return!1;b=b.slice(m.place,a+m.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new qL(d),this.s=new qL(b),this.recoveryParam=null,!0};XA.prototype.toDER=function(b){var d=this.r.toArray(),m=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&m[0]&&(m=[0].concat(m));d=p4(d);for(m=p4(m);!(m[0]||128&m[1]);)m=m.slice(1);
var a=[2];qS(a,d.length);(a=a.concat(d)).push(2);qS(a,m.length);d=a.concat(m);m=[48];return qS(m,d.length),m=m.concat(d),fj.encode(m,b)};var Ag={},ira=Ur;Ag.inherits=Pi;Ag.toArray=function(b,d){if(Array.isArray(b))return b.slice();if(!b)return[];var m=[];if("string"==typeof b)if(d){if("hex"===d)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)m.push(parseInt(b[a]+b[a+1],16))}else for(var a=d=0;a<b.length;a++){var g=b.charCodeAt(a);if(128>g)m[d++]=g;else if(2048>g)m[d++]=
g>>6|192,m[d++]=63&g|128;else{var l=b,r=a;55296!=(64512&l.charCodeAt(r))||0>r||r+1>=l.length||56320!=(64512&l.charCodeAt(r+1))?(m[d++]=g>>12|224,m[d++]=g>>6&63|128,m[d++]=63&g|128):(g=65536+((1023&g)<<10)+(1023&b.charCodeAt(++a)),m[d++]=g>>18|240,m[d++]=g>>12&63|128,m[d++]=g>>6&63|128,m[d++]=63&g|128)}}else for(a=0;a<b.length;a++)m[a]=0|b[a];return m};Ag.toHex=function(b){for(var d="",m=0;m<b.length;m++)d+=r4(b[m].toString(16));return d};Ag.htonl=q4;Ag.toHex32=function(b,d){for(var m="",a=0;a<b.length;a++){var g=
b[a];"little"===d&&(g=q4(g));m+=s4(g.toString(16))}return m};Ag.zero2=r4;Ag.zero8=s4;Ag.join32=function(b,d,m,a){m-=d;ira(0==m%4);m=Array(m/4);for(var g=0;g<m.length;g++,d+=4)m[g]=("big"===a?b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3]:b[d+3]<<24|b[d+2]<<16|b[d+1]<<8|b[d])>>>0;return m};Ag.split32=function(b,d){for(var m=Array(4*b.length),a=0,g=0;a<b.length;a++,g+=4){var l=b[a];"big"===d?(m[g]=l>>>24,m[g+1]=l>>>16&255,m[g+2]=l>>>8&255,m[g+3]=255&l):(m[g+3]=l>>>24,m[g+2]=l>>>16&255,m[g+1]=l>>>8&255,m[g]=255&
l)}return m};Ag.rotr32=function(b,d){return b>>>d|b<<32-d};Ag.rotl32=function(b,d){return b<<d|b>>>32-d};Ag.sum32=function(b,d){return b+d>>>0};Ag.sum32_3=function(b,d,m){return b+d+m>>>0};Ag.sum32_4=function(b,d,m,a){return b+d+m+a>>>0};Ag.sum32_5=function(b,d,m,a,g){return b+d+m+a+g>>>0};Ag.sum64=function(b,d,m,a){var g=a+b[d+1]>>>0;b[d]=(g<a?1:0)+m+b[d]>>>0;b[d+1]=g};Ag.sum64_hi=function(b,d,m,a){return(d+a>>>0<d?1:0)+b+m>>>0};Ag.sum64_lo=function(b,d,m,a){return d+a>>>0};Ag.sum64_4_hi=function(b,
d,m,a,g,l,r,v){var y=0,A=d;return y+=(A=A+a>>>0)<d?1:0,y+=(A=A+l>>>0)<l?1:0,b+m+g+r+(y+(A+v>>>0<v?1:0))>>>0};Ag.sum64_4_lo=function(b,d,m,a,g,l,r,v){return d+a+l+v>>>0};Ag.sum64_5_hi=function(b,d,m,a,g,l,r,v,y,A){var E=0,F=d;return E+=(F=F+a>>>0)<d?1:0,E+=(F=F+l>>>0)<l?1:0,E+=(F=F+v>>>0)<v?1:0,b+m+g+r+y+(E+(F+A>>>0<A?1:0))>>>0};Ag.sum64_5_lo=function(b,d,m,a,g,l,r,v,y,A){return d+a+l+v+A>>>0};Ag.rotr64_hi=function(b,d,m){return(d<<32-m|b>>>m)>>>0};Ag.rotr64_lo=function(b,d,m){return(b<<32-m|d>>>m)>>>
0};Ag.shr64_hi=function(b,d,m){return b>>>m};Ag.shr64_lo=function(b,d,m){return(b<<32-m|d>>>m)>>>0};var yE={},jra=Ur;yE.BlockHash=rL;rL.prototype.update=function(b,d){if(b=Ag.toArray(b,d),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(d=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-d,b.length),0===this.pending.length&&(this.pending=null),b=Ag.join32(b,0,b.length-d,this.endian),d=0;d<b.length;d+=
this._delta32)this._update(b,d,d+this._delta32);return this};rL.prototype.digest=function(b){return this.update(this._pad()),jra(null===this.pending),this._digest(b)};rL.prototype._pad=function(){var b=this.pendingTotal,d=this._delta8,m=d-(b+this.padLength)%d;d=Array(m+this.padLength);d[0]=128;for(var a=1;a<m;a++)d[a]=0;if(b<<=3,"big"===this.endian){for(m=8;m<this.padLength;m++)d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=0;d[a++]=b>>>24&255;d[a++]=b>>>16&255;d[a++]=b>>>8&255;d[a++]=255&b}else for(d[a++]=
255&b,d[a++]=b>>>8&255,d[a++]=b>>>16&255,d[a++]=b>>>24&255,d[a++]=0,d[a++]=0,d[a++]=0,d[a++]=0,m=8;m<this.padLength;m++)d[a++]=0;return d};var kra=Ur,xv=Ag.rotr64_hi,yv=Ag.rotr64_lo,taa=Ag.shr64_hi,uaa=Ag.shr64_lo,mz=Ag.sum64,hW=Ag.sum64_hi,iW=Ag.sum64_lo,lra=Ag.sum64_4_hi,mra=Ag.sum64_4_lo,nra=Ag.sum64_5_hi,ora=Ag.sum64_5_lo,t4=yE.BlockHash,Ria=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,
2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,
3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,
1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,
4234509866,1607167915,987167468,1816402316,1246189591];Ag.inherits(Pr,t4);Pr.blockSize=1024;Pr.outSize=512;Pr.hmacStrength=192;Pr.padLength=128;Pr.prototype._prepareBlock=function(b,d){for(var m=this.W,a=0;32>a;a++)m[a]=b[d+a];for(;a<m.length;a+=2){b=m[a-4];d=m[a-3];d=xv(b,d,19)^xv(d,b,29)^taa(b,d,6);b=(0>d&&(d+=4294967296),d);d=m[a-4];var g=m[a-3];g=yv(d,g,19)^yv(g,d,29)^uaa(d,g,6);d=(0>g&&(g+=4294967296),g);g=m[a-14];var l=m[a-13];var r=m[a-30];var v=m[a-29];v=xv(r,v,1)^xv(r,v,8)^taa(r,v,7);r=(0>
v&&(v+=4294967296),v);v=m[a-30];var y=m[a-29];y=yv(v,y,1)^yv(v,y,8)^uaa(v,y,7);v=(0>y&&(y+=4294967296),y);y=m[a-32];var A=m[a-31];m[a]=lra(b,d,g,l,r,v,y,A);m[a+1]=mra(b,d,g,l,r,v,y,A)}};Pr.prototype._update=function(b,d){this._prepareBlock(b,d);b=this.W;d=this.h[0];var m=this.h[1],a=this.h[2],g=this.h[3],l=this.h[4],r=this.h[5],v=this.h[6],y=this.h[7],A=this.h[8],E=this.h[9],F=this.h[10],G=this.h[11],I=this.h[12],M=this.h[13],L=this.h[14],S=this.h[15];kra(this.k.length===b.length);for(var R=0;R<b.length;R+=
2){var aa=A;var ra=E;aa=xv(aa,ra,14)^xv(aa,ra,18)^xv(ra,aa,9);ra=(0>aa&&(aa+=4294967296),aa);aa=A;var Ea=E;aa=yv(aa,Ea,14)^yv(aa,Ea,18)^yv(Ea,aa,9);var K=(0>aa&&(aa+=4294967296),aa);aa=A&F^~A&I;Ea=(0>aa&&(aa+=4294967296),aa);aa=E&G^~E&M;var Z=(0>aa&&(aa+=4294967296),aa);var U=this.k[R],V=this.k[R+1],na=b[R],la=b[R+1];aa=nra(L,S,ra,K,Ea,Z,U,V,na,la);Ea=ora(L,S,ra,K,Ea,Z,U,V,na,la);L=d;S=m;S=xv(L,S,28)^xv(S,L,2)^xv(S,L,7);L=(0>S&&(S+=4294967296),S);S=d;ra=m;ra=yv(S,ra,28)^yv(ra,S,2)^yv(ra,S,7);S=(0>
ra&&(ra+=4294967296),ra);K=d&a^d&l^a&l;ra=(0>K&&(K+=4294967296),K);Z=m&g^m&r^g&r;K=(0>Z&&(Z+=4294967296),Z);Z=hW(L,S,ra,K);ra=iW(L,S,ra,K);L=I;S=M;I=F;M=G;F=A;G=E;A=hW(v,y,aa,Ea);E=iW(y,y,aa,Ea);v=l;y=r;l=a;r=g;a=d;g=m;d=hW(aa,Ea,Z,ra);m=iW(aa,Ea,Z,ra)}mz(this.h,0,d,m);mz(this.h,2,a,g);mz(this.h,4,l,r);mz(this.h,6,v,y);mz(this.h,8,A,E);mz(this.h,10,F,G);mz(this.h,12,I,M);mz(this.h,14,L,S)};Pr.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h,"big"):Ag.split32(this.h,"big")};var zv=Ag.rotr32,
pra=Ur,yt=Ag.sum32,qra=Ag.sum32_4,rra=Ag.sum32_5,u4=yE.BlockHash,Sia=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Ag.inherits(ft,u4);ft.blockSize=512;ft.outSize=256;ft.hmacStrength=192;ft.padLength=64;ft.prototype._update=function(b,d){for(var m=this.W,a=0;16>a;a++)m[a]=b[d+a];for(;a<m.length;a++){b=a;d=m[a-2];d=zv(d,17)^zv(d,19)^d>>>10;var g=m[a-7];var l=m[a-15];l=
zv(l,7)^zv(l,18)^l>>>3;m[b]=qra(d,g,l,m[a-16])}b=this.h[0];d=this.h[1];g=this.h[2];l=this.h[3];var r=this.h[4],v=this.h[5],y=this.h[6],A=this.h[7];pra(this.k.length===m.length);for(a=0;a<m.length;a++){var E=A;A=r;A=zv(A,6)^zv(A,11)^zv(A,25);E=rra(E,A,r&v^~r&y,this.k[a],m[a]);A=b;A=zv(A,2)^zv(A,13)^zv(A,22);var F=yt(A,b&d^b&g^d&g);A=y;y=v;v=r;r=yt(l,E);l=g;g=d;d=b;b=yt(E,F)}this.h[0]=yt(this.h[0],b);this.h[1]=yt(this.h[1],d);this.h[2]=yt(this.h[2],g);this.h[3]=yt(this.h[3],l);this.h[4]=yt(this.h[4],
r);this.h[5]=yt(this.h[5],v);this.h[6]=yt(this.h[6],y);this.h[7]=yt(this.h[7],A)};ft.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h,"big"):Ag.split32(this.h,"big")};var jW=Ag.rotl32,XH=Ag.sum32,sra=Ag.sum32_5,v4=yE.BlockHash,tra=[1518500249,1859775393,2400959708,3395469782];Ag.inherits(Zu,v4);Zu.blockSize=512;Zu.outSize=160;Zu.hmacStrength=80;Zu.padLength=64;Zu.prototype._update=function(b,d){for(var m=this.W,a=0;16>a;a++)m[a]=b[d+a];for(;a<m.length;a++)m[a]=jW(m[a-3]^m[a-8]^m[a-
14]^m[a-16],1);b=this.h[0];d=this.h[1];var g=this.h[2],l=this.h[3],r=this.h[4];for(a=0;a<m.length;a++){var v=~~(a/20);v=sra(jW(b,5),0===v?d&g^~d&l:1===v||3===v?d^g^l:2===v?d&g^d&l^g&l:void 0,r,m[a],tra[v]);r=l;l=g;g=jW(d,30);d=b;b=v}this.h[0]=XH(this.h[0],b);this.h[1]=XH(this.h[1],d);this.h[2]=XH(this.h[2],g);this.h[3]=XH(this.h[3],l);this.h[4]=XH(this.h[4],r)};Zu.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h,"big"):Ag.split32(this.h,"big")};var w4=ft;Ag.inherits(Lw,w4);Lw.blockSize=
512;Lw.outSize=224;Lw.hmacStrength=192;Lw.padLength=64;Lw.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h.slice(0,7),"big"):Ag.split32(this.h.slice(0,7),"big")};var x4=Pr;Ag.inherits(Mw,x4);Mw.blockSize=1024;Mw.outSize=384;Mw.hmacStrength=192;Mw.padLength=128;Mw.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h.slice(0,12),"big"):Ag.split32(this.h.slice(0,12),"big")};var zE={};zE.sha1=Zu;zE.sha224=Lw;zE.sha256=ft;zE.sha384=Mw;zE.sha512=Pr;var vaa={},QN=Ag.rotl32,waa=
Ag.sum32,YH=Ag.sum32_3,xaa=Ag.sum32_4,y4=yE.BlockHash;Ag.inherits($u,y4);vaa.ripemd160=$u;$u.blockSize=512;$u.outSize=160;$u.hmacStrength=192;$u.padLength=64;$u.prototype._update=function(b,d){for(var m=this.h[0],a=this.h[1],g=this.h[2],l=this.h[3],r=this.h[4],v=m,y=a,A=g,E=l,F=r,G=0;80>G;G++){var I=waa(QN(xaa(m,z4(G,a,g,l),b[ura[G]+d],15>=G?0:31>=G?1518500249:47>=G?1859775393:63>=G?2400959708:2840853838),vra[G]),r);m=r;r=l;l=QN(g,10);g=a;a=I;I=waa(QN(xaa(v,z4(79-G,y,A,E),b[wra[G]+d],15>=G?1352829926:
31>=G?1548603684:47>=G?1836072691:63>=G?2053994217:0),xra[G]),F);v=F;F=E;E=QN(A,10);A=y;y=I}I=YH(this.h[1],g,E);this.h[1]=YH(this.h[2],l,F);this.h[2]=YH(this.h[3],r,v);this.h[3]=YH(this.h[4],m,y);this.h[4]=YH(this.h[0],a,A);this.h[0]=I};$u.prototype._digest=function(b){return"hex"===b?Ag.toHex32(this.h,"little"):Ag.split32(this.h,"little")};var ura=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,
2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],wra=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],vra=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],xra=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,
8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Tia=Ag,yra=Ur;GD.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());yra(b.length<=this.blockSize);for(var d=b.length;d<this.blockSize;d++)b.push(0);for(d=0;d<b.length;d++)b[d]^=54;this.inner=(new this.Hash).update(b);for(d=0;d<b.length;d++)b[d]^=106;this.outer=(new this.Hash).update(b)};GD.prototype.update=function(b,
d){return this.inner.update(b,d),this};GD.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var jl={};jl.utils=Ag;jl.common=yE;jl.sha=zE;jl.ripemd=vaa;jl.hmac=GD;jl.sha1=jl.sha.sha1;jl.sha256=jl.sha.sha256;jl.sha224=jl.sha.sha224;jl.sha384=jl.sha.sha384;jl.sha512=jl.sha.sha512;jl.ripemd160=jl.ripemd.ripemd160;var YA=lz,A4=Ur;Nw.prototype._init=function(b,d,m){b=b.concat(d).concat(m);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(d=0;d<this.V.length;d++)this.K[d]=
0,this.V[d]=1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};Nw.prototype._hmac=function(){return new jl.hmac(this.hash,this.K)};Nw.prototype._update=function(b){var d=this._hmac().update(this.V).update([0]);b&&(d=d.update(b));this.K=d.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};Nw.prototype.reseed=function(b,d,m,a){"string"!=typeof d&&(a=m,m=d,d=null);
b=YA.toArray(b,d);m=YA.toArray(m,a);A4(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(m||[]));this._reseed=1};Nw.prototype.generate=function(b,d,m,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(a=m,m=d,d=null);m&&(m=YA.toArray(m,a||"hex"),this._update(m));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(m),this._reseed++,
YA.encode(b,d)};var ZA=Om,RN=fj.getNAF,zra=fj.getJSF,SN=fj.assert;gt.prototype.point=function(){throw Error("Not implemented");};gt.prototype.validate=function(){throw Error("Not implemented");};gt.prototype._fixedNafMul=function(b,d){SN(b.precomputed);b=b._getDoubles();var m=RN(d,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var g=[],l=0;l<m.length;l+=b.step){var r=0;for(d=l+b.step-1;d>=l;d--)r=(r<<1)+m[d];g.push(r)}d=this.jpoint(null,null,null);for(m=this.jpoint(null,null,null);0<
a;a--){for(l=0;l<g.length;l++)(r=g[l])===a?m=m.mixedAdd(b.points[l]):r===-a&&(m=m.mixedAdd(b.points[l].neg()));d=d.add(m)}return d.toP()};gt.prototype._wnafMul=function(b,d){var m=b._getNAFPoints(4),a=m.points;m=RN(d,m.wnd,this._bitLength);for(var g=this.jpoint(null,null,null),l=m.length-1;0<=l;l--){for(d=0;0<=l&&0===m[l];l--)d++;if(0<=l&&d++,g=g.dblp(d),0>l)break;d=m[l];SN(0!==d);g="affine"===b.type?0<d?g.mixedAdd(a[d-1>>1]):g.mixedAdd(a[-d-1>>1].neg()):0<d?g.add(a[d-1>>1]):g.add(a[-d-1>>1].neg())}return"affine"===
b.type?g.toP():g};gt.prototype._wnafMulAdd=function(b,d,m,a,g){for(var l=this._wnafT1,r=this._wnafT2,v=this._wnafT3,y=0,A=0;A<a;A++){var E=(L=d[A])._getNAFPoints(b);l[A]=E.wnd;r[A]=E.points}for(A=a-1;1<=A;A-=2){E=A-1;var F=A;if(1===l[E]&&1===l[F]){var G=[d[E],null,null,d[F]];0===d[E].y.cmp(d[F].y)?(G[1]=d[E].add(d[F]),G[2]=d[E].toJ().mixedAdd(d[F].neg())):0===d[E].y.cmp(d[F].y.redNeg())?(G[1]=d[E].toJ().mixedAdd(d[F]),G[2]=d[E].add(d[F].neg())):(G[1]=d[E].toJ().mixedAdd(d[F]),G[2]=d[E].toJ().mixedAdd(d[F].neg()));
var I=[-3,-1,-5,-7,0,7,5,1,3],M=zra(m[E],m[F]);y=Math.max(M[0].length,y);v[E]=Array(y);v[F]=Array(y);for(b=0;b<y;b++)v[E][b]=I[3*((0|M[0][b])+1)+((0|M[1][b])+1)],v[F][b]=0,r[E]=G}else v[E]=RN(m[E],l[E],this._bitLength),v[F]=RN(m[F],l[F],this._bitLength),y=Math.max(v[E].length,y),y=Math.max(v[F].length,y)}d=this.jpoint(null,null,null);m=this._wnafT4;for(A=y;0<=A;A--){for(y=0;0<=A;){l=!0;for(b=0;b<a;b++)m[b]=0|v[b][A],0!==m[b]&&(l=!1);if(!l)break;y++;A--}if(0<=A&&y++,d=d.dblp(y),0>A)break;for(b=0;b<
a;b++){var L;y=m[b];0!==y&&(0<y?L=r[b][y-1>>1]:0>y&&(L=r[b][-y-1>>1].neg()),d="affine"===L.type?d.mixedAdd(L):d.add(L))}}for(A=0;A<a;A++)r[A]=null;return g?d:d.toP()};gt.BasePoint=Qr;Qr.prototype.eq=function(){throw Error("Not implemented");};Qr.prototype.validate=function(){return this.curve.validate(this)};gt.prototype.decodePoint=function(b,d){b=fj.toArray(b,d);d=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*d)return 6===b[0]?SN(0==b[b.length-1]%2):7===b[0]&&SN(1==b[b.length-
1]%2),this.point(b.slice(1,1+d),b.slice(1+d,1+2*d));if((2===b[0]||3===b[0])&&b.length-1===d)return this.pointFromX(b.slice(1,1+d),3===b[0]);throw Error("Unknown point format");};Qr.prototype.encodeCompressed=function(b){return this.encode(b,!0)};Qr.prototype._encode=function(b){var d=this.curve.p.byteLength(),m=this.getX().toArray("be",d);return b?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",d))};Qr.prototype.encode=function(b,d){return fj.encode(this._encode(d),b)};
Qr.prototype.precompute=function(b){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,b),d.beta=this._getBeta(),this.precomputed=d,this};Qr.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((b.bitLength()+1)/d.step)};Qr.prototype._getDoubles=function(b,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var m=[this],a=this,g=0;g<d;g+=b){for(var l=0;l<b;l++)a=a.dbl();m.push(a)}return{step:b,points:m}};Qr.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],m=(1<<b)-1,a=1===m?null:this.dbl(),g=1;g<m;g++)d[g]=d[g-1].add(a);return{wnd:b,points:d}};Qr.prototype._getBeta=function(){return null};Qr.prototype.dblp=function(b){for(var d=this,m=0;m<b;m++)d=d.dbl();return d};var lm=Om,kW=Pi,HD=gt,Ara=fj.assert;kW(Rr,HD);Rr.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var d=(new lm(b.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(b.lambda)var m=new lm(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(d))?m=a[0]:(m=a[1],Ara(0===this.g.mul(m).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:m,basis:b.basis?b.basis.map(function(g){return{a:new lm(g.a,16),b:new lm(g.b,16)}}):this._getEndoBasis(m)}}};
Rr.prototype._getEndoRoots=function(b){var d=b===this.p?this.red:lm.mont(b),m=(new lm(2)).toRed(d).redInvm();b=m.redNeg();d=(new lm(3)).toRed(d).redNeg().redSqrt().redMul(m);return[b.redAdd(d).fromRed(),b.redSub(d).fromRed()]};Rr.prototype._getEndoBasis=function(b){for(var d,m,a,g,l,r,v,y=this.n.ushrn(Math.floor(this.n.bitLength()/2)),A=this.n.clone(),E=new lm(1),F=new lm(0),G=new lm(0),I=new lm(1),M=0;0!==b.cmpn(0);){var L=A.div(b);v=A.sub(L.mul(b));r=G.sub(L.mul(E));L=I.sub(L.mul(F));if(!a&&0>v.cmp(y))d=
l.neg(),m=E,a=v.neg(),g=r;else if(a&&2==++M)break;l=v;A=b;b=v;G=E;E=r;I=F;F=L}l=v.neg();v=a.sqr().add(g.sqr());return 0<=l.sqr().add(r.sqr()).cmp(v)&&(l=d,r=m),a.negative&&(a=a.neg(),g=g.neg()),l.negative&&(l=l.neg(),r=r.neg()),[{a:a,b:g},{a:l,b:r}]};Rr.prototype._endoSplit=function(b){var d=this.endo.basis,m=d[0],a=d[1],g=a.b.mul(b).divRound(this.n),l=m.b.neg().mul(b).divRound(this.n);d=g.mul(m.a);var r=l.mul(a.a);m=g.mul(m.b);a=l.mul(a.b);return{k1:b.sub(d).sub(r),k2:m.add(a).neg()}};Rr.prototype.pointFromX=
function(b,d){(b=new lm(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(d&&!m||!d&&m)&&(a=a.redNeg()),this.point(b,a)};Rr.prototype.validate=function(b){if(b.inf)return!0;var d=b.x;b=b.y;var m=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(m).redIAdd(this.b);return 0===b.redSqr().redISub(d).cmpn(0)};Rr.prototype._endoWnafMulAdd=
function(b,d,m){for(var a=this._endoWnafT1,g=this._endoWnafT2,l=0;l<b.length;l++){var r=this._endoSplit(d[l]),v=b[l],y=v._getBeta();r.k1.negative&&(r.k1.ineg(),v=v.neg(!0));r.k2.negative&&(r.k2.ineg(),y=y.neg(!0));a[2*l]=v;a[2*l+1]=y;g[2*l]=r.k1;g[2*l+1]=r.k2}b=this._wnafMulAdd(1,a,g,2*l,m);for(d=0;d<2*l;d++)a[d]=null,g[d]=null;return b};kW(Kn,HD.BasePoint);Rr.prototype.point=function(b,d,m){return new Kn(this,b,d,m)};Rr.prototype.pointFromJSON=function(b,d){return Kn.fromJSON(this,b,d)};Kn.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var m=this.curve,a=function(g){return m.point(g.x.redMul(m.endo.beta),g.y)};b.beta=d;d.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return d}};Kn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Kn.fromJSON=function(b,d,m){function a(l){return b.point(l[0],l[1],m)}"string"==typeof d&&(d=JSON.parse(d));var g=b.point(d[0],d[1],m);if(!d[2])return g;d=d[2];return g.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[g].concat(d.doubles.points.map(a))},naf:d.naf&&{wnd:d.naf.wnd,
points:[g].concat(d.naf.points.map(a))}},g};Kn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Kn.prototype.isInfinity=function(){return this.inf};Kn.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var d=this.y.redSub(b.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(b.x).redInvm()));
b=d.redSqr().redISub(this.x).redISub(b.x);d=d.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,d)};Kn.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,m=this.x.redSqr();b=b.redInvm();m=m.redAdd(m).redIAdd(m).redIAdd(d).redMul(b);d=m.redSqr().redISub(this.x.redAdd(this.x));m=m.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,m)};Kn.prototype.getX=function(){return this.x.fromRed()};
Kn.prototype.getY=function(){return this.y.fromRed()};Kn.prototype.mul=function(b){return b=new lm(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};Kn.prototype.mulAdd=function(b,d,m){d=[this,d];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(d,b):this.curve._wnafMulAdd(1,d,b,2)};Kn.prototype.jmulAdd=function(b,d,m){d=[this,d];b=[b,m];return this.curve.endo?this.curve._endoWnafMulAdd(d,
b,!0):this.curve._wnafMulAdd(1,d,b,2,!0)};Kn.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};Kn.prototype.neg=function(b){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var m=function(a){return a.neg()};d.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(m)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(m)}}}return d};Kn.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};kW(io,HD.BasePoint);Rr.prototype.jpoint=function(b,d,m){return new io(this,b,d,m)};io.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),d=b.redSqr(),m=this.x.redMul(d);b=this.y.redMul(d).redMul(b);return this.curve.point(m,b)};io.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};io.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var d=b.z.redSqr(),m=this.z.redSqr(),a=this.x.redMul(d),g=b.x.redMul(m);d=this.y.redMul(d.redMul(b.z));m=b.y.redMul(m.redMul(this.z));g=a.redSub(g);m=d.redSub(m);if(0===g.cmpn(0))return 0!==m.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=g.redSqr(),r=l.redMul(g);l=a.redMul(l);a=m.redSqr().redIAdd(r).redISub(l).redISub(l);d=m.redMul(l.redISub(a)).redISub(d.redMul(r));b=this.z.redMul(b.z).redMul(g);return this.curve.jpoint(a,d,b)};io.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var d=this.z.redSqr(),m=this.x,a=b.x.redMul(d),g=this.y;b=b.y.redMul(d).redMul(this.z);a=m.redSub(a);b=g.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr();d=l.redMul(a);l=m.redMul(l);m=b.redSqr().redIAdd(d).redISub(l).redISub(l);g=b.redMul(l.redISub(m)).redISub(g.redMul(d));a=this.z.redMul(a);return this.curve.jpoint(m,g,a)};io.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var d=this,m=0;m<b;m++)d=d.dbl();return d}d=this.curve.a;var a=this.curve.tinv,g=this.x;m=this.y;var l=this.z,r=l.redSqr().redSqr(),v=m.redAdd(m);for(m=0;m<b;m++){var y=g.redSqr(),A=v.redSqr(),E=A.redSqr();y=y.redAdd(y).redIAdd(y).redIAdd(d.redMul(r));A=g.redMul(A);g=y.redSqr().redISub(A.redAdd(A));A=A.redISub(g);y=y.redMul(A);y=y.redIAdd(y).redISub(E);l=v.redMul(l);m+1<b&&(r=r.redMul(E));v=y}return this.curve.jpoint(g,v.redMul(a),l)};io.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};io.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var d=this.y.redSqr();var m=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(b).redISub(m);d=d.redIAdd(d);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(d).redISub(d),g=m.redIAdd(m);g=(g=g.redIAdd(g)).redIAdd(g);m=a;b=b.redMul(d.redISub(a)).redISub(g);d=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();m=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(m);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);g=a.redSqr();var l=m.redIAdd(m);l=(l=l.redIAdd(l)).redIAdd(l);m=g.redISub(b).redISub(b);b=a.redMul(b.redISub(m)).redISub(l);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(m,b,d)};io.prototype._threeDbl=function(){var b;if(this.zOne){var d=this.x.redSqr();var m=this.y.redSqr();var a=m.redSqr();m=this.x.redAdd(m).redSqr().redISub(d).redISub(a);m=m.redIAdd(m);var g=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=b=g.redSqr().redISub(m).redISub(m);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=g.redMul(m.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),m=this.y.redSqr(),d=this.x.redMul(m),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),g=d.redIAdd(d),d=(g=g.redIAdd(g)).redAdd(g),d=a.redSqr().redISub(d),b=this.y.redAdd(this.z).redSqr().redISub(m).redISub(b),m=m.redSqr(),m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),a=a.redMul(g.redISub(d)).redISub(m);return this.curve.jpoint(d,a,b)};io.prototype._dbl=
function(){var b=this.curve.a,d=this.x,m=this.y,a=this.z,g=a.redSqr().redSqr(),l=d.redSqr(),r=m.redSqr();b=l.redAdd(l).redIAdd(l).redIAdd(b.redMul(g));d=d.redAdd(d);g=d.redIAdd(d).redMul(r);d=b.redSqr().redISub(g.redAdd(g));g=g.redISub(d);r=r.redSqr();r=(r=(r=r.redIAdd(r)).redIAdd(r)).redIAdd(r);r=b.redMul(g).redISub(r);m=m.redAdd(m).redMul(a);return this.curve.jpoint(d,r,m)};io.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),d=this.y.redSqr(),m=this.z.redSqr(),
a=d.redSqr(),g=b.redAdd(b).redIAdd(b),l=g.redSqr();b=this.x.redAdd(d).redSqr().redISub(b).redISub(a);var r=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(l)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);g=g.redIAdd(b).redSqr().redISub(l).redISub(r).redISub(a);d=d.redMul(g);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(r).redISub(d);d=(d=d.redIAdd(d)).redIAdd(d);a=this.y.redMul(g.redMul(a.redISub(g)).redISub(b.redMul(r)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);m=
this.z.redAdd(b).redSqr().redISub(m).redISub(r);return this.curve.jpoint(d,a,m)};io.prototype.mul=function(b,d){return b=new lm(b,d),this.curve._wnafMul(this,b)};io.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var d=this.z.redSqr(),m=b.z.redSqr();if(0!==this.x.redMul(m).redISub(b.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);m=m.redMul(b.z);return 0===this.y.redMul(m).redISub(b.y.redMul(d)).cmpn(0)};io.prototype.eqXToP=function(b){var d=this.z.redSqr(),
m=b.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(m))return!0;b=b.clone();for(d=this.curve.redN.redMul(d);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(m.redIAdd(d),0===this.x.cmp(m))return!0}};io.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};io.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var JD=Om,yaa=Pi,sL=gt;yaa(ID,sL);ID.prototype.validate=
function(b){b=b.normalize().x;var d=b.redSqr();b=d.redMul(b).redAdd(d.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};yaa(Ln,sL.BasePoint);ID.prototype.decodePoint=function(b,d){return this.point(fj.toArray(b,d),1)};ID.prototype.point=function(b,d){return new Ln(this,b,d)};ID.prototype.pointFromJSON=function(b){return Ln.fromJSON(this,b)};Ln.prototype.precompute=function(){};Ln.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ln.fromJSON=function(b,
d){return new Ln(b,d[0],d[1]||b.one)};Ln.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ln.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Ln.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),m=b.redSub(d);b=b.redMul(d);d=m.redMul(d.redAdd(this.curve.a24.redMul(m)));return this.curve.point(b,d)};Ln.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Ln.prototype.diffAdd=function(b,d){var m=this.x.redAdd(this.z),a=this.x.redSub(this.z),g=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(m);g=g.redMul(a);a=d.z.redMul(b.redAdd(g).redSqr());d=d.x.redMul(b.redISub(g).redSqr());return this.curve.point(a,d)};Ln.prototype.mul=function(b){var d=b.clone();b=this;for(var m=this.curve.point(null,null),a=[];0!==d.cmpn(0);d.iushrn(1))a.push(d.andln(1));for(d=a.length-1;0<=d;d--)0===a[d]?(b=b.diffAdd(m,this),m=m.dbl()):(m=b.diffAdd(m,this),b=b.dbl());return m};Ln.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Ln.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Ln.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};Ln.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ln.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ow=Om,zaa=Pi,tL=gt,Uia=fj.assert;zaa(av,tL);av.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
av.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};av.prototype.jpoint=function(b,d,m,a){return this.point(b,d,m,a)};av.prototype.pointFromX=function(b,d){(b=new Ow(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=this.c2.redSub(this.a.redMul(m));m=this.one.redSub(this.c2.redMul(this.d).redMul(m));m=a.redMul(m.redInvm());a=m.redSqrt();if(0!==a.redSqr().redSub(m).cmp(this.zero))throw Error("invalid point");m=a.fromRed().isOdd();return(d&&!m||!d&&m)&&(a=a.redNeg()),this.point(b,
a)};av.prototype.pointFromY=function(b,d){(b=new Ow(b,16)).red||(b=b.toRed(this.red));var m=b.redSqr(),a=m.redSub(this.c2);m=m.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(m.redInvm());if(0===a.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,b)}m=a.redSqrt();if(0!==m.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return m.fromRed().isOdd()!==d&&(m=m.redNeg()),this.point(m,b)};av.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var d=b.x.redSqr(),m=b.y.redSqr();b=d.redMul(this.a).redAdd(m);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(m)));return 0===b.cmp(d)};zaa(ql,tL.BasePoint);av.prototype.pointFromJSON=function(b){return ql.fromJSON(this,b)};av.prototype.point=function(b,d,m,a){return new ql(this,b,d,m,a)};ql.fromJSON=function(b,d){return new ql(b,d[0],d[1],d[2])};ql.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};ql.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};ql.prototype._extDbl=function(){var b=this.x.redSqr(),d=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var a=this.curve._mulA(b),g=this.x.redAdd(this.y).redSqr().redISub(b).redISub(d);b=a.redAdd(d);m=b.redSub(m);var l=a.redSub(d);d=g.redMul(m);a=b.redMul(l);g=g.redMul(l);b=m.redMul(b);return this.curve.point(d,a,b,g)};ql.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var m=this.y.redSqr();if(this.curve.twisted){var a=(l=this.curve._mulA(d)).redAdd(m);if(this.zOne)b=b.redSub(d).redSub(m).redMul(a.redSub(this.curve.two)),d=a.redMul(l.redSub(m)),a=a.redSqr().redSub(a).redSub(a);else{var g=this.z.redSqr();g=a.redSub(g).redISub(g);b=b.redSub(d).redISub(m).redMul(g);d=a.redMul(l.redSub(m));a=a.redMul(g)}}else{var l=d.redAdd(m);g=this.curve._mulC(this.z).redSqr();g=l.redSub(g).redSub(g);b=this.curve._mulC(b.redISub(l)).redMul(g);
d=this.curve._mulC(l).redMul(d.redISub(m));a=l.redMul(g)}return this.curve.point(b,d,a)};ql.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ql.prototype._extAdd=function(b){var d=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),m=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),g=this.z.redMul(b.z.redAdd(b.z)),l=m.redSub(d);b=g.redSub(a);a=g.redAdd(a);g=m.redAdd(d);d=l.redMul(b);m=a.redMul(g);l=l.redMul(g);
b=b.redMul(a);return this.curve.point(d,m,b,l)};ql.prototype._projAdd=function(b){var d,m,a=this.z.redMul(b.z),g=a.redSqr(),l=this.x.redMul(b.x),r=this.y.redMul(b.y),v=this.curve.d.redMul(l).redMul(r),y=g.redSub(v);g=g.redAdd(v);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(l).redISub(r);b=a.redMul(y).redMul(b);return this.curve.twisted?(d=a.redMul(g).redMul(r.redSub(this.curve._mulA(l))),m=y.redMul(g)):(d=a.redMul(g).redMul(r.redSub(l)),m=this.curve._mulC(y).redMul(g)),this.curve.point(b,
d,m)};ql.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};ql.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};ql.prototype.mulAdd=function(b,d,m){return this.curve._wnafMulAdd(1,[this,d],[b,m],2,!1)};ql.prototype.jmulAdd=function(b,d,m){return this.curve._wnafMulAdd(1,[this,d],[b,m],2,!0)};ql.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};ql.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ql.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ql.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ql.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};ql.prototype.eqXToP=
function(b){var d=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;b=b.clone();for(var m=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(d.redIAdd(m),0===this.x.cmp(d))return!0}};ql.prototype.toP=ql.prototype.normalize;ql.prototype.mixedAdd=ql.prototype.add;var AE={};AE.base=gt;AE.short=Rr;AE.mont=ID;AE.edwards=av;var Bra={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},TN={},sS=TN,rS=AE,C4=fj.assert;sS.PresetCurve=B4;Gy("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:jl.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Gy("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:jl.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Gy("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:jl.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Gy("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:jl.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Gy("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:jl.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Gy("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:jl.sha256,gRed:!1,g:["9"]});Gy("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:jl.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var Aaa=Bra}catch(b){Aaa=void 0}Gy("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:jl.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Aaa]});var Cra=Om,Baa=fj.assert;
Mn.fromPublic=function(b,d,m){return d instanceof Mn?d:new Mn(b,{pub:d,pubEnc:m})};Mn.fromPrivate=function(b,d,m){return d instanceof Mn?d:new Mn(b,{priv:d,privEnc:m})};Mn.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Mn.prototype.getPublic=function(b,d){return"string"==
typeof b&&(d=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,b):this.pub};Mn.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};Mn.prototype._importPrivate=function(b,d){this.priv=new Cra(b,d||16);this.priv=this.priv.umod(this.ec.curve.n)};Mn.prototype._importPublic=function(b,d){if(b.x||b.y)return"mont"===this.ec.curve.type?Baa(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Baa(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,d)};Mn.prototype.derive=function(b){return b.mul(this.priv).getX()};Mn.prototype.sign=function(b,d,m){return this.ec.sign(b,this,d,m)};Mn.prototype.verify=function(b,d){return this.ec.verify(b,d,this)};Mn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var OB=Om,tS=TN,D4=fj.assert;Sr.prototype.keyPair=function(b){return new Mn(this,
b)};Sr.prototype.keyFromPrivate=function(b,d){return Mn.fromPrivate(this,b,d)};Sr.prototype.keyFromPublic=function(b,d){return Mn.fromPublic(this,b,d)};Sr.prototype.genKeyPair=function(b){b||(b={});b=new Nw({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||ON(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),m=this.n.sub(new OB(2));;){var a=new OB(b.generate(d));if(!(0<a.cmp(m)))return a.iaddn(1),this.keyFromPrivate(a)}};
Sr.prototype._truncateToN=function(b,d){var m=8*b.byteLength()-this.n.bitLength();return 0<m&&(b=b.ushrn(m)),!d&&0<=b.cmp(this.n)?b.sub(this.n):b};Sr.prototype.sign=function(b,d,m,a){"object"==typeof m&&(a=m,m=null);a||(a={});d=this.keyFromPrivate(d,m);b=this._truncateToN(new OB(b,16));var g=this.n.byteLength();m=d.getPrivate().toArray("be",g);g=b.toArray("be",g);g=new Nw({hash:this.hash,entropy:m,nonce:g,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var l=this.n.sub(new OB(1)),r=0;;r++){var v=a.k?
a.k(r):new OB(g.generate(this.n.byteLength()));if(!(0>=(v=this._truncateToN(v,!0)).cmpn(1)||0<=v.cmp(l))){var y=this.g.mul(v);if(!y.isInfinity()){var A=y.getX();m=A.umod(this.n);if(0!==m.cmpn(0)&&(v=v.invm(this.n).mul(m.mul(d.getPrivate()).iadd(b)),0!==(v=v.umod(this.n)).cmpn(0)))return b=(y.getY().isOdd()?1:0)|(0!==A.cmp(m)?2:0),a.canonical&&0<v.cmp(this.nh)&&(v=this.n.sub(v),b^=1),new XA({r:m,s:v,recoveryParam:b})}}}};Sr.prototype.verify=function(b,d,m,a){b=this._truncateToN(new OB(b,16));m=this.keyFromPublic(m,
a);a=(d=new XA(d,"hex")).r;d=d.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var g;d=d.invm(this.n);b=d.mul(b).umod(this.n);d=d.mul(a).umod(this.n);return this.curve._maxwellTrick?!(g=this.g.jmulAdd(b,m.getPublic(),d)).isInfinity()&&g.eqXToP(a):!(g=this.g.mulAdd(b,m.getPublic(),d)).isInfinity()&&0===g.getX().umod(this.n).cmp(a)};Sr.prototype.recoverPubKey=function(b,d,m,a){D4((3&m)===m,"The recovery param is more than two bits");d=new XA(d,a);a=this.n;var g=new OB(b);
b=d.r;var l=d.s,r=1&m;m>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&m)throw Error("Unable to find sencond key candinate");b=m?this.curve.pointFromX(b.add(this.curve.n),r):this.curve.pointFromX(b,r);d=d.r.invm(a);m=a.sub(g).mul(d).umod(a);a=l.mul(d).umod(a);return this.g.mulAdd(m,b,a)};Sr.prototype.getKeyRecoveryParam=function(b,d,m,a){if(null!==(d=new XA(d,a)).recoveryParam)return d.recoveryParam;for(a=0;4>a;a++){try{var g=this.recoverPubKey(b,d,a)}catch(l){continue}if(g.eq(m))return a}throw Error("Unable to find valid recovery factor");
};var Caa=fj.assert,E4=fj.parseBytes,BE=fj.cachedProperty;kn.fromPublic=function(b,d){return d instanceof kn?d:new kn(b,{pub:d})};kn.fromSecret=function(b,d){return d instanceof kn?d:new kn(b,{secret:d})};kn.prototype.secret=function(){return this._secret};BE(kn,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});BE(kn,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});BE(kn,"privBytes",function(){var b=this.eddsa,d=this.hash(),
m=b.encodingLength-1;b=d.slice(0,b.encodingLength);return b[0]&=248,b[m]&=127,b[m]|=64,b});BE(kn,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});BE(kn,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});BE(kn,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});kn.prototype.sign=function(b){return Caa(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};kn.prototype.verify=function(b,d){return this.eddsa.verify(b,d,
this)};kn.prototype.getSecret=function(b){return Caa(this._secret,"KeyPair is public only"),fj.encode(this.secret(),b)};kn.prototype.getPublic=function(b){return fj.encode(this.pubBytes(),b)};var Xia=Om,Wia=fj.assert,UN=fj.cachedProperty,Via=fj.parseBytes;UN(Hy,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});UN(Hy,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});UN(Hy,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});UN(Hy,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
Hy.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Hy.prototype.toHex=function(){return fj.encode(this.toBytes(),"hex").toUpperCase()};var $ia=jl,Zia=TN,Yia=fj.assert,Daa=fj.parseBytes;Wp.prototype.sign=function(b,d){b=Daa(b);var m=this.keyFromSecret(d),a=this.hashInt(m.messagePrefix(),b);d=this.g.mul(a);var g=this.encodePoint(d);b=this.hashInt(g,m.pubBytes(),b).mul(m.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:d,S:b,Rencoded:g})};Wp.prototype.verify=
function(b,d,m){b=Daa(b);d=this.makeSignature(d);m=this.keyFromPublic(m);b=this.hashInt(d.Rencoded(),m.pubBytes(),b);var a=this.g.mul(d.S());return d.R().add(m.pub().mul(b)).eq(a)};Wp.prototype.hashInt=function(){for(var b=this.hash(),d=0;d<arguments.length;d++)b.update(arguments[d]);return fj.intFromLE(b.digest()).umod(this.curve.n)};Wp.prototype.keyFromPublic=function(b){return kn.fromPublic(this,b)};Wp.prototype.keyFromSecret=function(b){return kn.fromSecret(this,b)};Wp.prototype.makeSignature=
function(b){return b instanceof Hy?b:new Hy(this,b)};Wp.prototype.encodePoint=function(b){var d=b.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=b.getX().isOdd()?128:0,d};Wp.prototype.decodePoint=function(b){var d=(b=fj.parseBytes(b)).length-1,m=b.slice(0,d).concat(-129&b[d]);b=0!=(128&b[d]);m=fj.intFromLE(m);return this.curve.pointFromY(m,b)};Wp.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};Wp.prototype.decodeInt=function(b){return fj.intFromLE(b)};
Wp.prototype.isPoint=function(b){return b instanceof this.pointClass};var fx={version:"6.5.2"};fx.utils=fj;fx.rand=ON;fx.curve=AE;fx.curves=TN;fx.ec=Sr;fx.eddsa=Wp;var GS={},W4=!1,Dq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,I4={},Dra=Pi;I4.Reporter=Tr;Tr.prototype.isError=function(b){return b instanceof KD};Tr.prototype.save=function(){var b=(this||ln)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Tr.prototype.restore=function(b){var d=(this||ln)._reporterState;d.obj=b.obj;d.path=d.path.slice(0,b.pathLen)};Tr.prototype.enterKey=function(b){return(this||ln)._reporterState.path.push(b)};Tr.prototype.exitKey=function(b){var d=(this||ln)._reporterState;d.path=d.path.slice(0,b-1)};Tr.prototype.leaveKey=function(b,d,m){var a=(this||ln)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[d]=m)};Tr.prototype.path=function(){return(this||ln)._reporterState.path.join("/")};Tr.prototype.enterObject=
function(){var b=(this||ln)._reporterState,d=b.obj;return b.obj={},d};Tr.prototype.leaveObject=function(b){var d=(this||ln)._reporterState,m=d.obj;return d.obj=b,m};Tr.prototype.error=function(b){var d=(this||ln)._reporterState,m=b instanceof KD;if(b=m?b:new KD(d.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!d.options.partial)throw b;return m||d.errors.push(b),b};Tr.prototype.wrapResult=function(b){var d=(this||ln)._reporterState;return d.options.partial?{result:this.isError(b)?
null:b,errors:d.errors}:b};Dra(KD,Error);KD.prototype.rethrow=function(b){if((this||ln).message=b+" at: "+((this||ln).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||ln,KD),!(this||ln).stack)try{throw Error((this||ln).message);}catch(d){(this||ln).stack=d.stack}return this||ln};var uL={},G4=!1,Xh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,vS={},J4=!1,qh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uS={},
H4=!1,Iy={},M4=!1,wS={},L4=!1,xS={},O4=!1,Jy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AS={},Q4=!1,zS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,yS={},P4=!1,BS={},S4=!1,mn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ES={},U4=!1,DS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,CS={},T4=!1,FS={},V4=!1,om=vL(),Eaa=om.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),Era=om.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),lW=om.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),Fra=om.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(lW),this.key("subjectPublicKey").bitstr())}),Gra=om.define("RelativeDistinguishedName",function(){this.setof(Era)}),
Hra=om.define("RDNSequence",function(){this.seqof(Gra)}),Faa=om.define("Name",function(){this.choice({rdnSequence:this.use(Hra)})}),Ira=om.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Eaa),this.key("notAfter").use(Eaa))}),Jra=om.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),Kra=om.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),
this.key("serialNumber").int(),this.key("signature").use(lW),this.key("issuer").use(Faa),this.key("validity").use(Ira),this.key("subject").use(Faa),this.key("subjectPublicKeyInfo").use(Fra),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Jra).optional())}),Lra=om.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(Kra),this.key("signatureAlgorithm").use(lW),
this.key("signatureValue").bitstr())}),zt={};zt.certificate=Lra;var Mra=om.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});zt.RSAPrivateKey=Mra;var Nra=om.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});
zt.RSAPublicKey=Nra;var Ora=om.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Gaa),this.key("subjectPublicKey").bitstr())});zt.PublicKey=Ora;var Gaa=om.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),Pra=om.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(Gaa),this.key("subjectPrivateKey").octstr())});zt.PrivateKey=Pra;var Qra=om.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
zt.EncryptedPrivateKey=Qra;var Rra=om.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});zt.DSAPrivateKey=Rra;zt.DSAparam=om.define("DSAparam",function(){this.int()});var Tra=om.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Sra),this.key("publicKey").optional().explicit(1).bitstr())});
zt.ECPrivateKey=Tra;var Sra=om.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});zt.signature=om.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var cja=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,eja=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,dja=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,wL=Lj.Buffer,Xp=zt,fja={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},hja=Eq,gja=JN,HS=Lj.Buffer;LD.signature=Xp.signature;var Haa={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},mW={},Ho=ij.Buffer,aB=W$,Ura=fx.ec,xL=Om;(mW=function(b,d,m,a,g){d=LD(d);if(d.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(l,r){var v=Haa[r.curve.join(".")];if(!v)throw Error("unknown curve "+r.curve.join("."));l=(new Ura(v)).keyFromPrivate(r.privateKey).sign(l);return new Ho(l.toDER())}(b,d)}if("dsa"===d.type){if("dsa"!==a)throw Error("wrong private key type");
return function(l,r,v){var y=r.params.priv_key,A=r.params.p,E=r.params.q;r=r.params.g;var F=new xL(0),G=IS(l,E).mod(E);var I=!1;for(l=X4(y,E,l,v);!1===I;){F=I=Y4(E,l,v);var M=E;F=r.toRed(xL.mont(A)).redPow(F).fromRed().mod(M);0===(I=I.invm(E).imul(G.add(y.mul(F))).mod(E)).cmpn(0)&&(I=!1,F=new xL(0))}v=I;y=F.toArray();v=v.toArray();128&y[0]&&(y=[0].concat(y));128&v[0]&&(v=[0].concat(v));A=[48,y.length+v.length+4,2,y.length];return A=A.concat(y,[2,v.length],v),new Ho(A)}(b,d,m)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=Ho.concat([g,b]);a=d.modulus.byteLength();for(m=[0,1];b.length+m.length+1<a;)m.push(255);m.push(0);for(a=-1;++a<b.length;)m.push(b[a]);return pL(m,d)}).getKey=X4;mW.makeKey=Y4;var nW=ij.Buffer,ZH=Om,Vra=fx.ec,mm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,VN=ij.Buffer,$4=UH,yL=gB,Iaa=Pi,Wra=mW,Xra=function(b,d,m,a,g){m=LD(m);if("ec"===m.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(v,
y,A){var E=Haa[A.data.algorithm.curve.join(".")];if(!E)throw Error("unknown curve "+A.data.algorithm.curve.join("."));return(new Vra(E)).verify(y,v,A.data.subjectPrivateKey.data)}(b,d,m)}if("dsa"===m.type){if("dsa"!==a)throw Error("wrong public key type");return function(v,y,A){var E=A.data.p,F=A.data.q,G=A.data.g;A=A.data.pub_key;var I=LD.signature.decode(v,"der");v=I.s;I=I.r;Z4(v,F);Z4(I,F);var M=ZH.mont(E);v=v.invm(F);return 0===G.toRed(M).redPow((new ZH(y)).mul(v).mod(F)).fromRed().mul(A.toRed(M).redPow(I.mul(v).mod(F)).fromRed()).mod(E).mod(F).cmp(I)}(b,
d,m)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");d=nW.concat([g,d]);g=m.modulus.byteLength();a=[1];for(var l=0;d.length+a.length+2<g;)a.push(255),l++;a.push(0);for(var r=-1;++r<d.length;)a.push(d[r]);a=new nW(a);d=ZH.mont(m.modulus);b=(b=(new ZH(b)).toRed(d)).redPow(new ZH(m.publicExponent));b=new nW(b.fromRed().toArray());d=8>l?1:0;g=Math.min(b.length,a.length);b.length!==a.length&&(d=1);for(r=-1;++r<g;)d|=b[r]^a[r];return 0===d},bB=X$;Object.keys(bB).forEach(function(b){bB[b].id=
new VN(bB[b].id,"hex");bB[b.toLowerCase()]=bB[b]});Iaa(GG,yL.Writable);GG.prototype._write=function(b,d,m){(this||mm)._hash.update(b);m()};GG.prototype.update=function(b,d){return"string"==typeof b&&(b=new VN(b,d)),(this||mm)._hash.update(b),this||mm};GG.prototype.sign=function(b,d){this.end();var m=(this||mm)._hash.digest();b=Wra(m,b,(this||mm)._hashType,(this||mm)._signType,(this||mm)._tag);return d?b.toString(d):b};Iaa(HG,yL.Writable);HG.prototype._write=function(b,d,m){(this||mm)._hash.update(b);
m()};HG.prototype.update=function(b,d){return"string"==typeof b&&(b=new VN(b,d)),(this||mm)._hash.update(b),this||mm};HG.prototype.verify=function(b,d,m){"string"==typeof d&&(d=new VN(d,m));this.end();m=(this||mm)._hash.digest();return Xra(d,m,b,(this||mm)._signType,(this||mm)._tag)};var nn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Pw=ij.Buffer,ija=fx,Yra=Om,Fq={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Fq.p224=Fq.secp224r1;Fq.p256=Fq.secp256r1=Fq.prime256v1;Fq.p192=Fq.secp192r1=Fq.prime192v1;Fq.p384=Fq.secp384r1;Fq.p521=Fq.secp521r1;cB.prototype.generateKeys=function(b,d){return(this||nn).keys=(this||nn).curve.genKeyPair(),this.getPublicKey(b,d)};cB.prototype.computeSecret=function(b,d,m){return d=d||"utf8",Pw.isBuffer(b)||(b=new Pw(b,
d)),JS((this||nn).curve.keyFromPublic(b).getPublic().mul((this||nn).keys.getPrivate()).getX(),m,(this||nn).curveType.byteLength)};cB.prototype.getPublicKey=function(b,d){var m=(this||nn).keys.getPublic("compressed"===d,!0);return"hybrid"===d&&(m[m.length-1]%2?m[0]=7:m[0]=6),JS(m,b)};cB.prototype.getPrivateKey=function(b){return JS((this||nn).keys.getPrivate(),b)};cB.prototype.setPublicKey=function(b,d){return d=d||"utf8",Pw.isBuffer(b)||(b=new Pw(b,d)),(this||nn).keys._importPublic(b),this||nn};cB.prototype.setPrivateKey=
function(b,d){d=d||"utf8";Pw.isBuffer(b)||(b=new Pw(b,d));b=new Yra(b);return b=b.toString(16),(this||nn).keys=(this||nn).curve.genKeyPair(),(this||nn).keys._importPrivate(b),this||nn};var oW=Lj.Buffer,WN=function(b,d){for(var m,a=oW.alloc(0),g=0;a.length<d;){m=g++;var l=oW.allocUnsafe(4);m=(l.writeUInt32BE(m,0),l);a=oW.concat([a,UH("sha1").update(b).update(m).digest()])}return a.slice(0,d)},XN=function(b,d){for(var m=b.length,a=-1;++a<m;)b[a]^=d[a];return b},Jaa=Om,Zra=Lj.Buffer,Kaa=function(b,d){return Zra.from(b.toRed(Jaa.mont(d.modulus)).redPow(new Jaa(d.publicExponent)).fromRed().toArray())},
pW=Om,At=Lj.Buffer,Laa=Om,$H=Lj.Buffer,CE={publicEncrypt:function(b,d,m){var a=b.padding?b.padding:m?1:4;b=LD(b);if(4===a)d=function(g,l){g=g.modulus.byteLength();var r=l.length,v=UH("sha1").update(At.alloc(0)).digest(),y=v.length,A=2*y;if(r>g-A-2)throw Error("message too long");A=At.alloc(g-r-A-2);var E=g-y-1;r=hz(y);l=XN(At.concat([v,A,At.alloc(1,1),l],E),WN(r,E));y=XN(r,WN(l,y));return new pW(At.concat([At.alloc(1),y,l],g))}(b,d);else if(1===a)d=function(g,l,r){var v=l.length;g=g.modulus.byteLength();
if(v>g-11)throw Error("message too long");if(r)var y=At.alloc(g-v-3,255);else{v=g-v-3;for(var A=At.allocUnsafe(v),E=0,F=hz(2*v),G=0;E<v;)G===F.length&&(F=hz(2*v),G=0),(y=F[G++])&&(A[E++]=y);y=A}return new pW(At.concat([At.from([0,r?1:2]),y,At.alloc(1),l],g))}(b,d,m);else{if(3!==a)throw Error("unknown padding");if(0<=(d=new pW(d)).cmp(b.modulus))throw Error("data too long for modulus");}return m?pL(d,b):Kaa(d,b)},privateDecrypt:function(b,d,m){var a=b.padding?b.padding:m?1:4;b=LD(b);var g=b.modulus.byteLength();
if(d.length>g||0<=(new Laa(d)).cmp(b.modulus))throw Error("decryption error");d=m?Kaa(new Laa(d),b):pL(d,b);var l=$H.alloc(g-d.length);if(d=$H.concat([l,d],g),4===a)return function(r,v){var y=r.modulus.byteLength(),A=UH("sha1").update($H.alloc(0)).digest();r=A.length;if(0!==v[0])throw Error("decryption error");var E=v.slice(1,r+1);v=v.slice(r+1);E=XN(E,WN(v,r));y=XN(v,WN(E,y-r-1));v=y.slice(0,r);A=$H.from(A);v=$H.from(v);E=0;var F=A.length;A.length!==v.length&&(E++,F=Math.min(A.length,v.length));
for(var G=-1;++G<F;)E+=A[G]^v[G];if(E)throw Error("decryption error");for(;0===y[r];)r++;if(1!==y[r++])throw Error("decryption error");return y.slice(r)}(b,d);if(1===a)return function(r,v,y){r=v.slice(0,2);for(var A=2,E=0;0!==v[A++];)if(A>=v.length){E++;break}var F=v.slice(2,A-1);("0002"!==r.toString("hex")&&!y||"0001"!==r.toString("hex")&&y)&&E++;8>F.length&&E++;if(E)throw Error("decryption error");return v.slice(A)}(0,d,m);if(3===a)return d;throw Error("unknown padding");},privateEncrypt:function(b,
d){return CE.publicEncrypt(b,d,!0)},publicDecrypt:function(b,d){return CE.privateDecrypt(b,d,!0)}},YN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qW,rW,KS=Zj,i5=hz,Maa=Lj.Buffer,f5=Lj.kMaxLength,LS=YN.crypto||YN.msCrypto,e5=Math.pow(2,32)-1;LS&&LS.getRandomValues||!KS.browser?(qW=function(b,d,m,a){if(!(Maa.isBuffer(b)||b instanceof YN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)a=d,d=0,m=b.length;else if("function"==
typeof m)a=m,m=b.length-d;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return d5(d,b.length),g5(m,d,b.length),h5(b,d,m,a)},rW=function(b,d,m){void 0===d&&(d=0);if(!(Maa.isBuffer(b)||b instanceof YN.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');d5(d,b.length);void 0===m&&(m=b.length-d);return g5(m,d,b.length),h5(b,d,m)}):(qW=c5,rW=c5);var Lh={};Lh.randomBytes=Lh.rng=Lh.pseudoRandomBytes=Lh.prng=hz;Lh.createHash=Lh.Hash=UH;Lh.createHmac=
Lh.Hmac=W$;var $ra=Object.keys(X$),asa="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat($ra);Lh.getHashes=function(){return asa};Lh.pbkdf2=JN.pbkdf2;Lh.pbkdf2Sync=JN.pbkdf2Sync;Lh.Cipher=iaa;Lh.createCipher=Wqa;Lh.Cipheriv=iS;Lh.createCipheriv=iS;Lh.Decipher=jaa;Lh.createDecipher=Xqa;Lh.Decipheriv=kS;Lh.createDecipheriv=kS;Lh.getCiphers=kaa;Lh.listCiphers=Yqa;Lh.DiffieHellmanGroup=fra;Lh.createDiffieHellmanGroup=paa;Lh.getDiffieHellman=qaa;Lh.createDiffieHellman=gra;Lh.DiffieHellman=
raa;Lh.createSign=a5;Lh.Sign=a5;Lh.createVerify=b5;Lh.Verify=b5;Lh.createECDH=function(b){return new cB(b)};Lh.publicEncrypt=CE.publicEncrypt;Lh.privateEncrypt=CE.privateEncrypt;Lh.publicDecrypt=CE.publicDecrypt;Lh.privateDecrypt=CE.privateDecrypt;Lh.randomFill=qW;Lh.randomFillSync=rW;Lh.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};Lh.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,
DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Av={};Object.defineProperty(Av,"__esModule",{value:!0});Av.default=function(){return bsa.default.randomFillSync(csa)};var bsa=Lh&&Lh.__esModule?Lh:{default:Lh},csa=new Uint8Array(16),
pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;for(var oo=[],sW=0;256>sW;++sW)oo.push((sW+256).toString(16).substr(1));pp.default=function(b,d){d=d||0;return(oo[b[d+0]]+oo[b[d+1]]+oo[b[d+2]]+oo[b[d+3]]+"-"+oo[b[d+4]]+oo[b[d+5]]+"-"+oo[b[d+6]]+oo[b[d+7]]+"-"+oo[b[d+8]]+oo[b[d+9]]+"-"+oo[b[d+10]]+oo[b[d+11]]+oo[b[d+12]]+oo[b[d+13]]+oo[b[d+14]]+oo[b[d+15]]).toLowerCase()};var ZN={};Object.defineProperty(ZN,"__esModule",{value:!0});ZN.default=void 0;var dsa=Av&&Av.__esModule?
Av:{default:Av},esa=pp&&pp.__esModule?pp:{default:pp},Naa,tW,uW=0,vW=0;ZN.default=function(b,d,m){m=d&&m||0;var a=d||[];b=b||{};var g=b.node||Naa,l=void 0!==b.clockseq?b.clockseq:tW;if(null==g||null==l){var r=b.random||(b.rng||dsa.default)();null==g&&(g=Naa=[r[0]|1,r[1],r[2],r[3],r[4],r[5]]);null==l&&(l=tW=(r[6]<<8|r[7])&16383)}r=void 0!==b.msecs?b.msecs:Date.now();var v=void 0!==b.nsecs?b.nsecs:vW+1,y=r-uW+(v-vW)/1E4;0>y&&void 0===b.clockseq&&(l=l+1&16383);(0>y||r>uW)&&void 0===b.nsecs&&(v=0);if(1E4<=
v)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");uW=r;vW=v;tW=l;r+=122192928E5;b=(1E4*(r&268435455)+v)%4294967296;a[m++]=b>>>24&255;a[m++]=b>>>16&255;a[m++]=b>>>8&255;a[m++]=b&255;b=r/4294967296*1E4&268435455;a[m++]=b>>>8&255;a[m++]=b&255;a[m++]=b>>>24&15|16;a[m++]=b>>>16&255;a[m++]=l>>>8|128;a[m++]=l&255;for(l=0;6>l;++l)a[m+l]=g[l];return d||(0,esa.default)(a)};var dq={};Object.defineProperty(dq,"__esModule",{value:!0});dq.default=function(b,d,m){function a(g,l,r,v){v=r&&v||0;if("string"===
typeof g){g=unescape(encodeURIComponent(g));for(var y=[],A=0;A<g.length;++A)y.push(g.charCodeAt(A));g=y}"string"===typeof l&&(l=jja(l));if(!Array.isArray(g))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=m(l.concat(g));l[6]=l[6]&15|d;l[8]=l[8]&63|128;if(r)for(g=0;16>g;++g)r[v+g]=l[g];return r||(0,fsa.default)(l)}try{a.name=b}catch(g){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";
a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};dq.URL=dq.DNS=void 0;var fsa=pp&&pp.__esModule?pp:{default:pp};dq.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";dq.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var PB={},Oaa=ij.Buffer;Object.defineProperty(PB,"__esModule",{value:!0});PB.default=void 0;var gsa=Lh&&Lh.__esModule?Lh:{default:Lh};PB.default=function(b){Array.isArray(b)?b=Oaa.from(b):"string"===typeof b&&(b=Oaa.from(b,"utf8"));return gsa.default.createHash("md5").update(b).digest()};var $N=
{};Object.defineProperty($N,"__esModule",{value:!0});$N.default=void 0;var hsa=dq&&dq.__esModule?dq:{default:dq},isa=PB&&PB.__esModule?PB:{default:PB},jsa=(0,hsa.default)("v3",48,isa.default);$N.default=jsa;var aO={};Object.defineProperty(aO,"__esModule",{value:!0});aO.default=void 0;var ksa=Av&&Av.__esModule?Av:{default:Av},lsa=pp&&pp.__esModule?pp:{default:pp};aO.default=function(b,d,m){"string"===typeof b&&(d="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||ksa.default)();
b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(d){m=m||0;for(var a=0;16>a;++a)d[m+a]=b[a];return d}return(0,lsa.default)(b)};var QB={},Paa=ij.Buffer;Object.defineProperty(QB,"__esModule",{value:!0});QB.default=void 0;var msa=Lh&&Lh.__esModule?Lh:{default:Lh};QB.default=function(b){Array.isArray(b)?b=Paa.from(b):"string"===typeof b&&(b=Paa.from(b,"utf8"));return msa.default.createHash("sha1").update(b).digest()};var bO={};Object.defineProperty(bO,"__esModule",{value:!0});bO.default=void 0;var nsa=dq&&dq.__esModule?
dq:{default:dq},osa=QB&&QB.__esModule?QB:{default:QB},psa=(0,nsa.default)("v5",80,osa.default);bO.default=psa;var RB={};Object.defineProperty(RB,"__esModule",{value:!0});Object.defineProperty(RB,"v1",{enumerable:!0,get:function(){return qsa.default}});Object.defineProperty(RB,"v3",{enumerable:!0,get:function(){return rsa.default}});Object.defineProperty(RB,"v4",{enumerable:!0,get:function(){return ssa.default}});Object.defineProperty(RB,"v5",{enumerable:!0,get:function(){return tsa.default}});var qsa=
zL(ZN),rsa=zL($N),ssa=zL(aO),tsa=zL(bO),po={};Object.defineProperty(po,"__esModule",{value:!0});po.atob=function(b){return Qaa(b)};po.btoa=function(b){return Raa(b)};po.base64StringToBlobOrBuffer=function(b,d){return l5(Qaa(b),d)};po.binaryStringToArrayBuffer=k5;po.binaryStringToBlobOrBuffer=l5;po.blob=j5;po.blobOrBufferToBase64=function(b,d){n5(b,function(m){d(Raa(m))})};po.blobOrBufferToBinaryString=n5;po.readAsArrayBuffer=function(b,d){var m=new FileReader;m.onloadend=function(a){a=a.target.result||
new ArrayBuffer(0);d(a)};m.readAsArrayBuffer(b)};po.readAsBinaryString=m5;po.typedBuffer=function(){};var Qaa=po.atob,Raa=po.btoa,ri="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,usa={},aI=usa=function(b){function d(E,F){var G=E[0],I=E[1],M=E[2],L=E[3];G+=(I&M|~I&L)+F[0]-680876936|0;G=(G<<7|G>>>25)+I|0;L+=(G&I|~G&M)+F[1]-389564586|0;L=(L<<12|L>>>20)+G|0;M+=(L&G|~L&I)+F[2]+606105819|0;M=(M<<17|M>>>15)+L|0;I+=(M&L|~M&G)+F[3]-1044525330|0;I=(I<<22|I>>>10)+M|0;G+=(I&
M|~I&L)+F[4]-176418897|0;G=(G<<7|G>>>25)+I|0;L+=(G&I|~G&M)+F[5]+1200080426|0;L=(L<<12|L>>>20)+G|0;M+=(L&G|~L&I)+F[6]-1473231341|0;M=(M<<17|M>>>15)+L|0;I+=(M&L|~M&G)+F[7]-45705983|0;I=(I<<22|I>>>10)+M|0;G+=(I&M|~I&L)+F[8]+1770035416|0;G=(G<<7|G>>>25)+I|0;L+=(G&I|~G&M)+F[9]-1958414417|0;L=(L<<12|L>>>20)+G|0;M+=(L&G|~L&I)+F[10]-42063|0;M=(M<<17|M>>>15)+L|0;I+=(M&L|~M&G)+F[11]-1990404162|0;I=(I<<22|I>>>10)+M|0;G+=(I&M|~I&L)+F[12]+1804603682|0;G=(G<<7|G>>>25)+I|0;L+=(G&I|~G&M)+F[13]-40341101|0;L=(L<<12|
L>>>20)+G|0;M+=(L&G|~L&I)+F[14]-1502002290|0;M=(M<<17|M>>>15)+L|0;I+=(M&L|~M&G)+F[15]+1236535329|0;I=(I<<22|I>>>10)+M|0;G+=(I&L|M&~L)+F[1]-165796510|0;G=(G<<5|G>>>27)+I|0;L+=(G&M|I&~M)+F[6]-1069501632|0;L=(L<<9|L>>>23)+G|0;M+=(L&I|G&~I)+F[11]+643717713|0;M=(M<<14|M>>>18)+L|0;I+=(M&G|L&~G)+F[0]-373897302|0;I=(I<<20|I>>>12)+M|0;G+=(I&L|M&~L)+F[5]-701558691|0;G=(G<<5|G>>>27)+I|0;L+=(G&M|I&~M)+F[10]+38016083|0;L=(L<<9|L>>>23)+G|0;M+=(L&I|G&~I)+F[15]-660478335|0;M=(M<<14|M>>>18)+L|0;I+=(M&G|L&~G)+F[4]-
405537848|0;I=(I<<20|I>>>12)+M|0;G+=(I&L|M&~L)+F[9]+568446438|0;G=(G<<5|G>>>27)+I|0;L+=(G&M|I&~M)+F[14]-1019803690|0;L=(L<<9|L>>>23)+G|0;M+=(L&I|G&~I)+F[3]-187363961|0;M=(M<<14|M>>>18)+L|0;I+=(M&G|L&~G)+F[8]+1163531501|0;I=(I<<20|I>>>12)+M|0;G+=(I&L|M&~L)+F[13]-1444681467|0;G=(G<<5|G>>>27)+I|0;L+=(G&M|I&~M)+F[2]-51403784|0;L=(L<<9|L>>>23)+G|0;M+=(L&I|G&~I)+F[7]+1735328473|0;M=(M<<14|M>>>18)+L|0;I+=(M&G|L&~G)+F[12]-1926607734|0;I=(I<<20|I>>>12)+M|0;G+=(I^M^L)+F[5]-378558|0;G=(G<<4|G>>>28)+I|0;L+=(G^
I^M)+F[8]-2022574463|0;L=(L<<11|L>>>21)+G|0;M+=(L^G^I)+F[11]+1839030562|0;M=(M<<16|M>>>16)+L|0;I+=(M^L^G)+F[14]-35309556|0;I=(I<<23|I>>>9)+M|0;G+=(I^M^L)+F[1]-1530992060|0;G=(G<<4|G>>>28)+I|0;L+=(G^I^M)+F[4]+1272893353|0;L=(L<<11|L>>>21)+G|0;M+=(L^G^I)+F[7]-155497632|0;M=(M<<16|M>>>16)+L|0;I+=(M^L^G)+F[10]-1094730640|0;I=(I<<23|I>>>9)+M|0;G+=(I^M^L)+F[13]+681279174|0;G=(G<<4|G>>>28)+I|0;L+=(G^I^M)+F[0]-358537222|0;L=(L<<11|L>>>21)+G|0;M+=(L^G^I)+F[3]-722521979|0;M=(M<<16|M>>>16)+L|0;I+=(M^L^G)+F[6]+
76029189|0;I=(I<<23|I>>>9)+M|0;G+=(I^M^L)+F[9]-640364487|0;G=(G<<4|G>>>28)+I|0;L+=(G^I^M)+F[12]-421815835|0;L=(L<<11|L>>>21)+G|0;M+=(L^G^I)+F[15]+530742520|0;M=(M<<16|M>>>16)+L|0;I+=(M^L^G)+F[2]-995338651|0;I=(I<<23|I>>>9)+M|0;G+=(M^(I|~L))+F[0]-198630844|0;G=(G<<6|G>>>26)+I|0;L+=(I^(G|~M))+F[7]+1126891415|0;L=(L<<10|L>>>22)+G|0;M+=(G^(L|~I))+F[14]-1416354905|0;M=(M<<15|M>>>17)+L|0;I+=(L^(M|~G))+F[5]-57434055|0;I=(I<<21|I>>>11)+M|0;G+=(M^(I|~L))+F[12]+1700485571|0;G=(G<<6|G>>>26)+I|0;L+=(I^(G|~M))+
F[3]-1894986606|0;L=(L<<10|L>>>22)+G|0;M+=(G^(L|~I))+F[10]-1051523|0;M=(M<<15|M>>>17)+L|0;I+=(L^(M|~G))+F[1]-2054922799|0;I=(I<<21|I>>>11)+M|0;G+=(M^(I|~L))+F[8]+1873313359|0;G=(G<<6|G>>>26)+I|0;L+=(I^(G|~M))+F[15]-30611744|0;L=(L<<10|L>>>22)+G|0;M+=(G^(L|~I))+F[6]-1560198380|0;M=(M<<15|M>>>17)+L|0;I+=(L^(M|~G))+F[13]+1309151649|0;I=(I<<21|I>>>11)+M|0;G+=(M^(I|~L))+F[4]-145523070|0;G=(G<<6|G>>>26)+I|0;L+=(I^(G|~M))+F[11]-1120210379|0;L=(L<<10|L>>>22)+G|0;M+=(G^(L|~I))+F[2]+718787259|0;M=(M<<15|M>>>
17)+L|0;I+=(L^(M|~G))+F[9]-343485551|0;E[0]=G+E[0]|0;E[1]=((I<<21|I>>>11)+M|0)+E[1]|0;E[2]=M+E[2]|0;E[3]=L+E[3]|0}function m(E){var F=[],G;for(G=0;64>G;G+=4)F[G>>2]=E.charCodeAt(G)+(E.charCodeAt(G+1)<<8)+(E.charCodeAt(G+2)<<16)+(E.charCodeAt(G+3)<<24);return F}function a(E){var F=[],G;for(G=0;64>G;G+=4)F[G>>2]=E[G]+(E[G+1]<<8)+(E[G+2]<<16)+(E[G+3]<<24);return F}function g(E){var F=E.length,G=[1732584193,-271733879,-1732584194,271733878],I;for(I=64;I<=F;I+=64)d(G,m(E.substring(I-64,I)));E=E.substring(I-
64);var M=E.length;var L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(I=0;I<M;I+=1)L[I>>2]|=E.charCodeAt(I)<<(I%4<<3);L[I>>2]|=128<<(I%4<<3);if(55<I)for(d(G,L),I=0;16>I;I+=1)L[I]=0;F=(8*F).toString(16).match(/(.*?)(.{0,8})$/);E=parseInt(F[2],16);F=parseInt(F[1],16)||0;L[14]=E;L[15]=F;d(G,L);return G}function l(E){var F;for(F=0;F<E.length;F+=1){var G=F,I,M=E[F],L="";for(I=0;4>I;I+=1)L+=A[M>>8*I+4&15]+A[M>>8*I&15];E[G]=L}return E.join("")}function r(E){/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E)));
return E}function v(E){var F=[],G=E.length,I;for(I=0;I<G-1;I+=2)F.push(parseInt(E.substr(I,2),16));return String.fromCharCode.apply(String,F)}function y(){this.reset()}var A="0123456789abcdef".split("");l(g("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function E(F,G){F=F|0||0;return 0>F?Math.max(F+G,0):Math.min(F,G)}ArrayBuffer.prototype.slice=function(F,G){var I=(this||ri).byteLength;F=E(F,I);var M=I;G!==b&&(M=E(G,I));if(F>M)return new ArrayBuffer(0);M-=F;G=
new ArrayBuffer(M);I=new Uint8Array(G);F=new Uint8Array(this||ri,F,M);I.set(F);return G}}();y.prototype.append=function(E){this.appendBinary(r(E));return this||ri};y.prototype.appendBinary=function(E){(this||ri)._buff+=E;(this||ri)._length+=E.length;E=(this||ri)._buff.length;var F;for(F=64;F<=E;F+=64)d((this||ri)._hash,m((this||ri)._buff.substring(F-64,F)));(this||ri)._buff=(this||ri)._buff.substring(F-64);return this||ri};y.prototype.end=function(E){var F=(this||ri)._buff,G=F.length,I,M=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0];for(I=0;I<G;I+=1)M[I>>2]|=F.charCodeAt(I)<<(I%4<<3);this._finish(M,G);F=l((this||ri)._hash);E&&(F=v(F));this.reset();return F};y.prototype.reset=function(){(this||ri)._buff="";(this||ri)._length=0;(this||ri)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ri};y.prototype.getState=function(){return{buff:(this||ri)._buff,length:(this||ri)._length,hash:(this||ri)._hash.slice()}};y.prototype.setState=function(E){(this||ri)._buff=E.buff;(this||ri)._length=E.length;
(this||ri)._hash=E.hash;return this||ri};y.prototype.destroy=function(){delete (this||ri)._hash;delete (this||ri)._buff;delete (this||ri)._length};y.prototype._finish=function(E,F){E[F>>2]|=128<<(F%4<<3);if(55<F)for(d((this||ri)._hash,E),F=0;16>F;F+=1)E[F]=0;var G=8*(this||ri)._length;G=G.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(G[2],16);G=parseInt(G[1],16)||0;E[14]=F;E[15]=G;d((this||ri)._hash,E)};y.hash=function(E,F){return y.hashBinary(r(E),F)};y.hashBinary=function(E,F){E=g(E);E=l(E);return F?
v(E):E};y.ArrayBuffer=function(){this.reset()};y.ArrayBuffer.prototype.append=function(E){var F=(this||ri)._buff.buffer,G=new Uint8Array(F.byteLength+E.byteLength);G.set(new Uint8Array(F));G.set(new Uint8Array(E),F.byteLength);F=G.length;(this||ri)._length+=E.byteLength;for(E=64;E<=F;E+=64)d((this||ri)._hash,a(G.subarray(E-64,E)));(this||ri)._buff=E-64<F?new Uint8Array(G.buffer.slice(E-64)):new Uint8Array(0);return this||ri};y.ArrayBuffer.prototype.end=function(E){var F=(this||ri)._buff,G=F.length,
I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M;for(M=0;M<G;M+=1)I[M>>2]|=F[M]<<(M%4<<3);this._finish(I,G);F=l((this||ri)._hash);E&&(F=v(F));this.reset();return F};y.ArrayBuffer.prototype.reset=function(){(this||ri)._buff=new Uint8Array(0);(this||ri)._length=0;(this||ri)._hash=[1732584193,-271733879,-1732584194,271733878];return this||ri};y.ArrayBuffer.prototype.getState=function(){var E=y.prototype.getState.call(this||ri);E.buff=String.fromCharCode.apply(null,new Uint8Array(E.buff));return E};y.ArrayBuffer.prototype.setState=
function(E){var F=E.buff,G=F.length,I=new ArrayBuffer(G);I=new Uint8Array(I);var M;for(M=0;M<G;M+=1)I[M]=F.charCodeAt(M);E.buff=I;return y.prototype.setState.call(this||ri,E)};y.ArrayBuffer.prototype.destroy=y.prototype.destroy;y.ArrayBuffer.prototype._finish=y.prototype._finish;y.ArrayBuffer.hash=function(E,F){var G=new Uint8Array(E),I=G.length;E=[1732584193,-271733879,-1732584194,271733878];var M;for(M=64;M<=I;M+=64)d(E,a(G.subarray(M-64,M)));G=M-64<I?G.subarray(M-64):new Uint8Array(0);var L=G.length;
var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(M=0;M<L;M+=1)S[M>>2]|=G[M]<<(M%4<<3);S[M>>2]|=128<<(M%4<<3);if(55<M)for(d(E,S),M=0;16>M;M+=1)S[M]=0;I=(8*I).toString(16).match(/(.*?)(.{0,8})$/);G=parseInt(I[2],16);I=parseInt(I[1],16)||0;S[14]=G;S[15]=I;d(E,S);E=l(E);return F?v(E):E};return y}(),DE={};Object.defineProperty(DE,"__esModule",{value:!0});var o5=po,wW=aI&&"object"===typeof aI&&"default"in aI?aI["default"]:aI,vsa=self.setImmediate||self.setTimeout;DE.binaryMd5=function(b,d){function m(){vsa(g)}
function a(){var G=E.end(!0);G=o5.btoa(G);d(G);E.destroy()}function g(){var G=A*v,I=G+v;A++;A<y?F(E,b,G,I,m):F(E,b,G,I,a)}var l="string"===typeof b,r=l?b.length:b.size,v=Math.min(32768,r),y=Math.ceil(r/v),A=0,E=l?new wW:new wW.ArrayBuffer,F=l?mja:lja;g()};DE.stringMd5=function(b){return wW.hash(b)};var Uh={};Object.defineProperty(Uh,"__esModule",{value:!0});var MS=AL(IV),wsa=AL(Xl),Saa=AL(dk),CL=AL(Vu),p5=Function.prototype.toString,nja=p5.call(Object);try{localStorage.setItem("_pouch_check_localstorage",
1);var BL=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){BL=!1}wsa(MD,CL);MD.prototype.addListener=function(b,d,m,a){function g(){if(l._listeners[d])if(r)r="waiting";else{r=!0;var v=NS(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));m.changes(v).on("change",function(y){y.seq>a.since&&!a.cancelled&&(a.since=y.seq,a.onChange(y))}).on("complete",function(){"waiting"===r&&Saa(g);r=!1}).on("error",function(){r=!1})}}if(!this._listeners[d]){var l=
this,r=!1;this._listeners[d]=g;this.on(b,g)}};MD.prototype.removeListener=function(b,d){d in this._listeners&&(CL.prototype.removeListener.call(this,b,this._listeners[d]),delete this._listeners[d])};MD.prototype.notifyLocalWindows=function(b){BL&&(localStorage[b]="a"===localStorage[b]?"b":"a")};MD.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var xsa="function"===typeof Object.assign?Object.assign:function(b){for(var d=Object(b),m=1;m<arguments.length;m++){var a=arguments[m];
if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(d[g]=a[g])}return d},ysa=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},Taa="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),zsa=/(?:^|&)([^&=]*)=?([^&]*)/g,Asa=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
Bsa=RB.v4;Uh.adapterFun=function(b,d){return r5(MS(function(m){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;oja(a,b,m);return this.taskqueue.isReady?d.apply(this,m):new Promise(function(g,l){a.taskqueue.addTask(function(r){r?l(r):g(a[b].apply(a,m))})})}))};Uh.assign=xsa;Uh.bulkGetShim=function(b,d,m){function a(){var I=[];E.forEach(function(M){M.docs.forEach(function(L){I.push({id:M.id,docs:[L]})})});
m(null,{results:I})}function g(){if(!(G>=F.length)){var I=F.slice(G,Math.min(G+6,F.length));l(I,G);G+=I.length}}function l(I,M){I.forEach(function(L,S){var R=M+S;S=v.get(L);var aa=NS(S[0],["atts_since","attachments"]);aa.open_revs=S.map(function(Ea){return Ea.rev});aa.open_revs=aa.open_revs.filter(s5);var ra=s5;0===aa.open_revs.length&&(delete aa.open_revs,ra=pja);["revs","attachments","binary","ajax","latest"].forEach(function(Ea){Ea in d&&(aa[Ea]=d[Ea])});b.get(L,aa,function(Ea,K){Ea=Ea?[{error:Ea}]:
ra(K);E[R]={id:L,docs:Ea};++A===y&&a();g()})})}var r=d.docs,v=new gz.Map;r.forEach(function(I){v.has(I.id)?v.get(I.id).push(I):v.set(I.id,[I])});var y=v.size,A=0,E=Array(y),F=[];v.forEach(function(I,M){F.push(M)});var G=0;g()};Uh.changesHandler=MD;Uh.clone=IG;Uh.defaultBackOff=function(b){var d=0;b||(d=2E3);b=parseInt(b,10)||0;d=parseInt(d,10);d=d!==d||d<=b?(b||1)<<1:d+1;6E5<d&&(b=3E5,d=6E5);return~~((d-b)*Math.random()+b)};Uh.explainError=function(b,d){OS("info","The above "+b+" is totally normal. "+
d)};Uh.filterChange=function(b){var d={},m=b.filter&&"function"===typeof b.filter;d.query=b.query_params;return function(a){a.doc||(a.doc={});var g;if(g=m)try{g=!(0,b.filter)(a.doc,d)}catch(r){g=hh.createError(hh.BAD_REQUEST,"Filter function threw: "+r.toString())}if("object"===typeof g)return g;if(g)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var l in a.doc._attachments)a.doc._attachments.hasOwnProperty(l)&&(a.doc._attachments[l].stub=!0);return!0}};Uh.flatten=function(b){for(var d=
[],m=0,a=b.length;m<a;m++)d=d.concat(b[m]);return d};Uh.functionName=ysa;Uh.guardedConsole=OS;Uh.hasLocalStorage=function(){return BL};Uh.invalidIdError=function(b){var d;b?"string"!==typeof b?d=hh.createError(hh.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(d=hh.createError(hh.RESERVED_ID)):d=hh.createError(hh.MISSING_ID);if(d)throw d;};Uh.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(OS("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};Uh.listenerCount=function(b,d){return"listenerCount"in b?b.listenerCount(d):CL.listenerCount(b,d)};Uh.nextTick=Saa;Uh.normalizeDdocFunctionName=function(b){return(b=t5(b))?b.join("/"):null};Uh.once=q5;Uh.parseDdocFunctionName=t5;Uh.parseUri=function(b){b=Asa.exec(b);for(var d={},m=14;m--;){var a=Taa[m],g=b[m]||"",l=-1!==["user","password"].indexOf(a);d[a]=l?decodeURIComponent(g):g}d.queryKey={};d[Taa[12]].replace(zsa,function(r,v,y){v&&(d.queryKey[v]=y)});return d};Uh.pick=
NS;Uh.rev=function(b,d){b=IG(b);if(!d)return RB.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return DE.stringMd5(JSON.stringify(b))};Uh.scopeEval=function(b,d){var m=[],a=[],g;for(g in d)d.hasOwnProperty(g)&&(m.push(g),a.push(d[g]));m.push(b);return Function.apply(null,m).apply(null,a)};Uh.toPromise=r5;Uh.upsert=u5;Uh.uuid=Bsa;var Uaa={};Uaa=function(){for(var b={},d=0;d<arguments.length;d++){var m=arguments[d],a;for(a in m)Csa.call(m,a)&&(b[a]=m[a])}return b};var Csa=Object.prototype.hasOwnProperty,
nz=Uaa,Vaa={};Vaa=function(b){for(var d=1;d<arguments.length;d++){var m=arguments[d],a;for(a in m)Dsa.call(m,a)&&(b[a]=m[a])}return b};for(var Dsa=Object.prototype.hasOwnProperty,Esa={},Fsa=Vaa,Waa=Esa=function(){var b=nz.apply(null,arguments);return Fsa(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:nz(b.additionalMethods)})},bv=[],js=[],Gsa="undefined"!==typeof Uint8Array?Uint8Array:Array,EE=0;64>EE;++EE)bv[EE]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[EE],js["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(EE)]=EE;js[45]=62;js[95]=63;var DL={byteLength:function(b){b=v5(b);var d=b[1];return 3*(b[0]+d)/4-d},toByteArray:function(b){var d=v5(b);var m=
d[0];d=d[1];var a=new Gsa(3*(m+d)/4-d),g=0,l=0<d?m-4:m,r;for(r=0;r<l;r+=4)m=js[b.charCodeAt(r)]<<18|js[b.charCodeAt(r+1)]<<12|js[b.charCodeAt(r+2)]<<6|js[b.charCodeAt(r+3)],a[g++]=m>>16&255,a[g++]=m>>8&255,a[g++]=m&255;2===d&&(m=js[b.charCodeAt(r)]<<2|js[b.charCodeAt(r+1)]>>4,a[g++]=m&255);1===d&&(m=js[b.charCodeAt(r)]<<10|js[b.charCodeAt(r+1)]<<4|js[b.charCodeAt(r+2)]>>2,a[g++]=m>>8&255,a[g++]=m&255);return a},fromByteArray:function(b){for(var d=b.length,m=d%3,a=[],g=0,l=d-m;g<l;g+=16383)a.push(sja(b,
g,g+16383>l?l:g+16383));1===m?(b=b[d-1],a.push(bv[b>>2]+bv[b<<4&63]+"==")):2===m&&(b=(b[d-2]<<8)+b[d-1],a.push(bv[b>>10]+bv[b>>4&63]+bv[b<<2&63]+"="));return a.join("")}},ND={read:function(b,d,m,a,g){var l=8*g-a-1;var r=(1<<l)-1,v=r>>1,y=-7;g=m?g-1:0;var A=m?-1:1,E=b[d+g];g+=A;m=E&(1<<-y)-1;E>>=-y;for(y+=l;0<y;m=256*m+b[d+g],g+=A,y-=8);l=m&(1<<-y)-1;m>>=-y;for(y+=a;0<y;l=256*l+b[d+g],g+=A,y-=8);if(0===m)m=1-v;else{if(m===r)return l?NaN:Infinity*(E?-1:1);l+=Math.pow(2,a);m-=v}return(E?-1:1)*l*Math.pow(2,
m-a)},write:function(b,d,m,a,g,l){var r,v=8*l-g-1,y=(1<<v)-1,A=y>>1,E=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;var F=a?1:-1,G=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,a=y):(a=Math.floor(Math.log(d)/Math.LN2),1>d*(r=Math.pow(2,-a))&&(a--,r*=2),d=1<=a+A?d+E/r:d+E*Math.pow(2,1-A),2<=d*r&&(a++,r/=2),a+A>=y?(d=0,a=y):1<=a+A?(d=(d*r-1)*Math.pow(2,g),a+=A):(d=d*Math.pow(2,A-1)*Math.pow(2,g),a=0));for(;8<=g;b[m+l]=d&255,l+=F,d/=256,g-=8);a=a<<g|d;for(v+=g;0<v;b[m+
l]=a&255,l+=F,a/=256,v-=8);b[m+l-F]|=128*G}},Xaa="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;var Yaa=lf;var PS=2147483647;lf.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(b,d);return 42===b.foo()}catch(m){return!1}}();lf.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(lf.prototype,"parent",{enumerable:!0,get:function(){if(lf.isBuffer(this))return this.buffer}});Object.defineProperty(lf.prototype,"offset",{enumerable:!0,get:function(){if(lf.isBuffer(this))return this.byteOffset}});lf.poolSize=8192;lf.from=function(b,d,m){return w5(b,d,m)};Object.setPrototypeOf(lf.prototype,Uint8Array.prototype);Object.setPrototypeOf(lf,Uint8Array);lf.alloc=function(b,d,m){y5(b);b=0>=b?Qw(b):void 0!==d?"string"===typeof m?Qw(b).fill(d,m):Qw(b).fill(d):Qw(b);
return b};lf.allocUnsafe=function(b){return QS(b)};lf.allocUnsafeSlow=function(b){return QS(b)};lf.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==lf.prototype};lf.compare=function(b,d){Rw(b,Uint8Array)&&(b=lf.from(b,b.offset,b.byteLength));Rw(d,Uint8Array)&&(d=lf.from(d,d.offset,d.byteLength));if(!lf.isBuffer(b)||!lf.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===d)return 0;for(var m=b.length,a=d.length,g=0,l=Math.min(m,
a);g<l;++g)if(b[g]!==d[g]){m=b[g];a=d[g];break}return m<a?-1:a<m?1:0};lf.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};lf.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return lf.alloc(0);var m;if(void 0===d)for(m=d=0;m<b.length;++m)d+=b[m].length;
d=lf.allocUnsafe(d);var a=0;for(m=0;m<b.length;++m){var g=b[m];Rw(g,Uint8Array)&&(g=lf.from(g));if(!lf.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,a);a+=g.length}return d};lf.byteLength=x5;lf.prototype._isBuffer=!0;lf.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<b;d+=2)dB(this,d,d+1);return this};lf.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var d=0;d<b;d+=4)dB(this,d,d+3),dB(this,d+1,d+2);return this};lf.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<b;d+=8)dB(this,d,d+7),dB(this,d+1,d+6),dB(this,d+2,d+5),dB(this,d+3,d+4);return this};lf.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?A5(this,0,b):uja.apply(this,arguments)};lf.prototype.toLocaleString=lf.prototype.toString;lf.prototype.equals=function(b){if(!lf.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===lf.compare(this,b)};lf.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};Xaa&&(lf.prototype[Xaa]=lf.prototype.inspect);lf.prototype.compare=function(b,d,m,a,g){Rw(b,Uint8Array)&&(b=lf.from(b,b.offset,b.byteLength));if(!lf.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===d&&(d=0);void 0===m&&(m=b?b.length:
0);void 0===a&&(a=0);void 0===g&&(g=this.length);if(0>d||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&d>=m)return 0;if(a>=g)return-1;if(d>=m)return 1;d>>>=0;m>>>=0;a>>>=0;g>>>=0;if(this===b)return 0;var l=g-a,r=m-d,v=Math.min(l,r);a=this.slice(a,g);b=b.slice(d,m);for(d=0;d<v;++d)if(a[d]!==b[d]){l=a[d];r=b[d];break}return l<r?-1:r<l?1:0};lf.prototype.includes=function(b,d,m){return-1!==this.indexOf(b,d,m)};lf.prototype.indexOf=function(b,d,m){return B5(this,b,
d,m,!0)};lf.prototype.lastIndexOf=function(b,d,m){return B5(this,b,d,m,!1)};lf.prototype.write=function(b,d,m,a){if(void 0===d)a="utf8",m=this.length,d=0;else if(void 0===m&&"string"===typeof d)a=d,m=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var g=this.length-d;if(void 0===m||m>g)m=g;if(0<b.length&&(0>m||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{d=Number(d)||0;a=this.length-d;m?(m=Number(m),m>a&&(m=a)):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!==g){b=a;break a}this[d+a]=g}b=a}return b;case "utf8":case "utf-8":return JG(TS(b,this.length-d),this,d,m);case "ascii":return JG(H5(b),this,d,m);case "latin1":case "binary":return JG(H5(b),this,d,m);case "base64":return JG(DL.toByteArray(z5(b)),this,d,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=
b;g=this.length-d;for(var l=[],r=0;r<a.length&&!(0>(g-=2));++r){var v=a.charCodeAt(r);b=v>>8;v%=256;l.push(v);l.push(b)}return JG(l,this,d,m);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};lf.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D5=4096;lf.prototype.slice=function(b,d){var m=this.length;b=~~b;d=void 0===d?m:~~d;0>b?(b+=m,0>b&&(b=0)):b>m&&(b=m);0>d?(d+=m,0>d&&(d=0)):d>m&&(d=m);d<b&&(d=b);b=
this.subarray(b,d);Object.setPrototypeOf(b,lf.prototype);return b};lf.prototype.readUIntLE=function(b,d,m){b>>>=0;d>>>=0;m||Nn(b,d,this.length);m=this[b];for(var a=1,g=0;++g<d&&(a*=256);)m+=this[b+g]*a;return m};lf.prototype.readUIntBE=function(b,d,m){b>>>=0;d>>>=0;m||Nn(b,d,this.length);m=this[b+--d];for(var a=1;0<d&&(a*=256);)m+=this[b+--d]*a;return m};lf.prototype.readUInt8=function(b,d){b>>>=0;d||Nn(b,1,this.length);return this[b]};lf.prototype.readUInt16LE=function(b,d){b>>>=0;d||Nn(b,2,this.length);
return this[b]|this[b+1]<<8};lf.prototype.readUInt16BE=function(b,d){b>>>=0;d||Nn(b,2,this.length);return this[b]<<8|this[b+1]};lf.prototype.readUInt32LE=function(b,d){b>>>=0;d||Nn(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};lf.prototype.readUInt32BE=function(b,d){b>>>=0;d||Nn(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};lf.prototype.readIntLE=function(b,d,m){b>>>=0;d>>>=0;m||Nn(b,d,this.length);m=this[b];for(var a=1,g=0;++g<
d&&(a*=256);)m+=this[b+g]*a;m>=128*a&&(m-=Math.pow(2,8*d));return m};lf.prototype.readIntBE=function(b,d,m){b>>>=0;d>>>=0;m||Nn(b,d,this.length);m=d;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=this[b+--m]*a;g>=128*a&&(g-=Math.pow(2,8*d));return g};lf.prototype.readInt8=function(b,d){b>>>=0;d||Nn(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};lf.prototype.readInt16LE=function(b,d){b>>>=0;d||Nn(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};lf.prototype.readInt16BE=
function(b,d){b>>>=0;d||Nn(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};lf.prototype.readInt32LE=function(b,d){b>>>=0;d||Nn(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};lf.prototype.readInt32BE=function(b,d){b>>>=0;d||Nn(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};lf.prototype.readFloatLE=function(b,d){b>>>=0;d||Nn(b,4,this.length);return ND.read(this,b,!0,23,4)};lf.prototype.readFloatBE=function(b,d){b>>>=0;d||Nn(b,
4,this.length);return ND.read(this,b,!1,23,4)};lf.prototype.readDoubleLE=function(b,d){b>>>=0;d||Nn(b,8,this.length);return ND.read(this,b,!0,52,8)};lf.prototype.readDoubleBE=function(b,d){b>>>=0;d||Nn(b,8,this.length);return ND.read(this,b,!1,52,8)};lf.prototype.writeUIntLE=function(b,d,m,a){b=+b;d>>>=0;m>>>=0;a||Yp(this,b,d,m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[d]=b&255;++g<m&&(a*=256);)this[d+g]=b/a&255;return d+m};lf.prototype.writeUIntBE=function(b,d,m,a){b=+b;d>>>=0;m>>>=0;a||Yp(this,
b,d,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[d+a]=b&255;0<=--a&&(g*=256);)this[d+a]=b/g&255;return d+m};lf.prototype.writeUInt8=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,1,255,0);this[d]=b&255;return d+1};lf.prototype.writeUInt16LE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,2,65535,0);this[d]=b&255;this[d+1]=b>>>8;return d+2};lf.prototype.writeUInt16BE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,2,65535,0);this[d]=b>>>8;this[d+1]=b&255;return d+2};lf.prototype.writeUInt32LE=function(b,d,m){b=
+b;d>>>=0;m||Yp(this,b,d,4,4294967295,0);this[d+3]=b>>>24;this[d+2]=b>>>16;this[d+1]=b>>>8;this[d]=b&255;return d+4};lf.prototype.writeUInt32BE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,4,4294967295,0);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};lf.prototype.writeIntLE=function(b,d,m,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*m-1),Yp(this,b,d,m,a-1,-a));a=0;var g=1,l=0;for(this[d]=b&255;++a<m&&(g*=256);)0>b&&0===l&&0!==this[d+a-1]&&(l=1),this[d+a]=(b/g>>0)-l&255;return d+m};
lf.prototype.writeIntBE=function(b,d,m,a){b=+b;d>>>=0;a||(a=Math.pow(2,8*m-1),Yp(this,b,d,m,a-1,-a));a=m-1;var g=1,l=0;for(this[d+a]=b&255;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[d+a+1]&&(l=1),this[d+a]=(b/g>>0)-l&255;return d+m};lf.prototype.writeInt8=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,1,127,-128);0>b&&(b=255+b+1);this[d]=b&255;return d+1};lf.prototype.writeInt16LE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,2,32767,-32768);this[d]=b&255;this[d+1]=b>>>8;return d+2};lf.prototype.writeInt16BE=
function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,2,32767,-32768);this[d]=b>>>8;this[d+1]=b&255;return d+2};lf.prototype.writeInt32LE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,4,2147483647,-2147483648);this[d]=b&255;this[d+1]=b>>>8;this[d+2]=b>>>16;this[d+3]=b>>>24;return d+4};lf.prototype.writeInt32BE=function(b,d,m){b=+b;d>>>=0;m||Yp(this,b,d,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[d]=b>>>24;this[d+1]=b>>>16;this[d+2]=b>>>8;this[d+3]=b&255;return d+4};lf.prototype.writeFloatLE=function(b,
d,m){return F5(this,b,d,!0,m)};lf.prototype.writeFloatBE=function(b,d,m){return F5(this,b,d,!1,m)};lf.prototype.writeDoubleLE=function(b,d,m){return G5(this,b,d,!0,m)};lf.prototype.writeDoubleBE=function(b,d,m){return G5(this,b,d,!1,m)};lf.prototype.copy=function(b,d,m,a){if(!lf.isBuffer(b))throw new TypeError("argument should be a Buffer");m||(m=0);a||0===a||(a=this.length);d>=b.length&&(d=b.length);d||(d=0);0<a&&a<m&&(a=m);if(a===m||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>m||m>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-d<a-m&&(a=b.length-d+m);var g=a-m;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,m,a);else if(this===b&&m<d&&d<a)for(a=g-1;0<=a;--a)b[a+d]=this[a+m];else Uint8Array.prototype.set.call(b,this.subarray(m,a),d);return g};lf.prototype.fill=function(b,d,m,a){if("string"===typeof b){"string"===typeof d?(a=d,d=
0,m=this.length):"string"===typeof m&&(a=m,m=this.length);if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!lf.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);if("utf8"===a&&128>g||"latin1"===a)b=g}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>d||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;d>>>=0;m=void 0===m?this.length:
m>>>0;b||(b=0);if("number"===typeof b)for(a=d;a<m;++a)this[a]=b;else{g=lf.isBuffer(b)?b:lf.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-d;++a)this[a+d]=g[a%l]}return this};var wja=/[^+/0-9A-Za-z-_]/g,vja=function(){for(var b=Array(256),d=0;16>d;++d)for(var m=16*d,a=0;16>a;++a)b[m+a]="0123456789abcdef"[d]+"0123456789abcdef"[a];return b}(),Sw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Hsa=
{};Ky.prototype.next=function(b){var d=this||Sw;if("function"!==typeof b)throw Error("next() requires a callback argument");if(d._ended)return dk(b,Error("cannot call next() after end()")),d;if(d._nexting)return dk(b,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;b.apply(null,arguments)});return d};Ky.prototype._next=function(b){dk(b)};Ky.prototype.seek=function(b){if((this||Sw)._ended)throw Error("cannot call seek() after end()");
if((this||Sw)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||Sw).db._serializeKey(b);this._seek(b)};Ky.prototype._seek=function(b){};Ky.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Sw)._ended)return dk(b,Error("end() already called on iterator"));(this||Sw)._ended=!0;this._end(b)};Ky.prototype._end=function(b){dk(b)};Ky.prototype._nextTick=dk;var Zaa=Hsa=Ky,on="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,Isa={};ht.prototype._checkWritten=function(){if((this||on)._written)throw Error("write() already called on this batch");};ht.prototype.put=function(b,d){this._checkWritten();var m=(this||on).db._checkKey(b)||(this||on).db._checkValue(d);if(m)throw m;b=(this||on).db._serializeKey(b);d=(this||on).db._serializeValue(d);this._put(b,d);return this||on};ht.prototype._put=function(b,d){(this||on)._operations.push({type:"put",key:b,value:d})};ht.prototype.del=function(b){this._checkWritten();
var d=(this||on).db._checkKey(b);if(d)throw d;b=(this||on).db._serializeKey(b);this._del(b);return this||on};ht.prototype._del=function(b){(this||on)._operations.push({type:"del",key:b})};ht.prototype.clear=function(){this._checkWritten();this._clear();return this||on};ht.prototype._clear=function(){(this||on)._operations=[]};ht.prototype.write=function(b,d){this._checkWritten();"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==
typeof b||null===b)b={};(this||on)._written=!0;this._write(b,d)};ht.prototype._write=function(b,d){(this||on).db._batch((this||on)._operations,b,d)};ht.prototype._nextTick=dk;var Jsa=Isa=ht,Gq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$aa={},xja=Waa,yja=Object.prototype.hasOwnProperty,zja="start end gt gte lt lte".split(" ");Kl.prototype.open=function(b,d){var m=this||Gq,a=(this||Gq).status;"function"===typeof b&&(d=b);if("function"!==typeof d)throw Error("open() requires a callback argument");
if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;(this||Gq).status="opening";this._open(b,function(g){if(g)return m.status=a,d(g);m.status="open";d()})};Kl.prototype._open=function(b,d){dk(d)};Kl.prototype.close=function(b){var d=this||Gq,m=(this||Gq).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||Gq).status="closing";this._close(function(a){if(a)return d.status=m,b(a);d.status="closed";b()})};
Kl.prototype._close=function(b){dk(b)};Kl.prototype.get=function(b,d,m){"function"===typeof d&&(m=d);if("function"!==typeof m)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return dk(m,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(b,d,m)};Kl.prototype._get=function(b,d,m){dk(function(){m(Error("NotFound"))})};Kl.prototype.put=function(b,d,m,a){"function"===typeof m&&(a=m);if("function"!==typeof a)throw Error("put() requires a callback argument");
var g=this._checkKey(b)||this._checkValue(d);if(g)return dk(a,g);b=this._serializeKey(b);d=this._serializeValue(d);if("object"!==typeof m||null===m)m={};this._put(b,d,m,a)};Kl.prototype._put=function(b,d,m,a){dk(a)};Kl.prototype.del=function(b,d,m){"function"===typeof d&&(m=d);if("function"!==typeof m)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return dk(m,a);b=this._serializeKey(b);if("object"!==typeof d||null===d)d={};this._del(b,d,m)};Kl.prototype._del=function(b,
d,m){dk(m)};Kl.prototype.batch=function(b,d,m){if(!arguments.length)return this._chainedBatch();"function"===typeof d&&(m=d);"function"===typeof b&&(m=b);if("function"!==typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return dk(m,Error("batch(array) requires an array argument"));if(0===b.length)return dk(m);if("object"!==typeof d||null===d)d={};for(var a=Array(b.length),g=0;g<b.length;g++){if("object"!==typeof b[g]||null===b[g])return dk(m,Error("batch(array) element must be an object and not `null`"));
var l=nz(b[g]);if("put"!==l.type&&"del"!==l.type)return dk(m,Error("`type` must be 'put' or 'del'"));var r=this._checkKey(l.key);if(r)return dk(m,r);l.key=this._serializeKey(l.key);if("put"===l.type){if(r=this._checkValue(l.value))return dk(m,r);l.value=this._serializeValue(l.value)}a[g]=l}this._batch(a,d,m)};Kl.prototype._batch=function(b,d,m){dk(m)};Kl.prototype.clear=function(b,d){if("function"===typeof b)d=b;else if("function"!==typeof d)throw Error("clear() requires a callback argument");b=I5(this||
Gq,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:-1;this._clear(b,d)};Kl.prototype._clear=function(b,d){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var m=this._iterator(b),a={},g=this||Gq,l=function(r){if(r)return m.end(function(){d(r)});m.next(function(v,y){if(v)return l(v);if(void 0===y)return m.end(d);g._del(y,a,l)})};l()};Kl.prototype._setupIteratorOptions=function(b){b=I5(this||Gq,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:
-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=!1!==b.valueAsBuffer;return b};Kl.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Kl.prototype._iterator=function(b){return new Zaa(this||Gq)};Kl.prototype._chainedBatch=function(){return new Jsa(this||Gq)};Kl.prototype._serializeKey=function(b){return b};Kl.prototype._serializeValue=function(b){return b};Kl.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");
if(Yaa.isBuffer(b)&&0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Kl.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Kl.prototype._nextTick=dk;$aa=Kl;var Ksa=$aa;var it="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aba={},J5=Zaa;Xl(OD,J5);OD.prototype.setDb=
function(b){var d=(this||it)._iterator=b.iterator((this||it)._options);(this||it)._operations.forEach(function(m){d[m.method].apply(d,m.args)})};OD.prototype._operation=function(b,d){if((this||it)._iterator)return(this||it)._iterator[b].apply((this||it)._iterator,d);(this||it)._operations.push({method:b,args:d})};["next","end"].forEach(function(b){OD.prototype["_"+b]=function(){this._operation(b,arguments)}});OD.prototype.seek=function(){this._operation("seek",arguments)};aba=OD;var On="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xW={},K5=Ksa,N5=aba,M5=["put","get","del","batch","clear"],Aja=["approximateSize","compactRange"];Xl(eB,K5);eB.prototype.type="deferred-leveldown";eB.prototype._open=function(b,d){var m=this||On;(this||On)._db.open(b,function(a){if(a)return d(a);m._operations.forEach(function(g){g.iterator?g.iterator.setDb(m._db):m._db[g.method].apply(m._db,g.args)});m._operations=[];Bja(m);d()})};eB.prototype._close=function(b){var d=this||On;(this||
On)._db.close(function(m){if(m)return b(m);L5(d);b()})};eB.prototype._serializeKey=function(b){return b};eB.prototype._serializeValue=function(b){return b};xW=eB;xW.DeferredIterator=N5;var Lsa=xW,Q5={},P5=!1,US={},R5=!1,WS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Msa={},Nja=Msa=function(b,d){if(VS("noDeprecation"))return b;var m=!1;return function(){if(!m){if(VS("throwDeprecation"))throw Error(d);VS("traceDeprecation")?console.trace(d):console.warn(d);m=!0}return b.apply(this||
WS,arguments)}},cO={},dO=ij,cv=dO.Buffer;cv.from&&cv.alloc&&cv.allocUnsafe&&cv.allocUnsafeSlow?cO=dO:(S5(dO,cO),cO.Buffer=fB);fB.prototype=Object.create(cv.prototype);S5(cv,fB);fB.from=function(b,d,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return cv(b,d,m)};fB.alloc=function(b,d,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=cv(b);void 0!==d?"string"===typeof m?b.fill(d,m):b.fill(d):b.fill(0);return b};fB.allocUnsafe=function(b){if("number"!==
typeof b)throw new TypeError("Argument must be a number");return cv(b)};fB.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return dO.SlowBuffer(b)};var bT={},XS=cO.Buffer,T5=XS.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};bT.StringDecoder=KG;KG.prototype.write=function(b){if(0===
b.length)return"";if(this.lastNeed){var d=this.fillLast(b);if(void 0===d)return"";var m=this.lastNeed;this.lastNeed=0}else m=0;return m<b.length?d?d+this.text(b,m):this.text(b,m):d||""};KG.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};KG.prototype.text=function(b,d){var m=Kja(this,b,d);if(!this.lastNeed)return b.toString("utf8",d);this.lastTotal=m;m=b.length-(m-this.lastNeed);b.copy(this.lastChar,0,m);return b.toString("utf8",d,m)};KG.prototype.fillLast=
function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var V5={},U5=!1,X5={},W5=!1,$5=Object.freeze({}),Z5={},Y5=!1,c6={},b6=!1,f6={},e6=!1,$S={},h6=!1,Oja="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aT={},i6=!1,l6={},k6=!1,cT={},m6=!1,Qja="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,dT={},o6=!1,yW={},bba=!1,cba={},dba=!1,Sq={},eba=!1;eba||(eba=!0,Sq=Sq=j6(),Sq.Stream=Sq,Sq.Readable=Sq,Sq.Writable=g6(),Sq.Duplex=QD(),Sq.Transform=n6(),Sq.PassThrough=function(){function b(m){if(!(this instanceof b))return new b(m);d.call(this,m)}if(bba)return yW;bba=!0;yW=b;var d=n6();Xl(b,d);b.prototype._transform=function(m,a,g){g(null,m)};return yW}(),Sq.finished=ZS(),Sq.pipeline=function(){function b(A){var E=!1;return function(){E||(E=!0,A.apply(void 0,
arguments))}}function d(A){if(A)throw A;}function m(A,E,F,G){G=b(G);var I=!1;A.on("close",function(){I=!0});void 0===l&&(l=ZS());l(A,{readable:E,writable:F},function(L){if(L)return G(L);I=!0;G()});var M=!1;return function(L){if(!I&&!M){M=!0;if(A.setHeader&&"function"===typeof A.abort)return A.abort();if("function"===typeof A.destroy)return A.destroy();G(L||new y("pipe"))}}}function a(A){A()}function g(A,E){return A.pipe(E)}if(dba)return cba;dba=!0;var l,r=PD().codes,v=r.ERR_MISSING_ARGS,y=r.ERR_STREAM_DESTROYED;
return cba=function(){for(var A=arguments.length,E=Array(A),F=0;F<A;F++)E[F]=arguments[F];var G=E.length?"function"!==typeof E[E.length-1]?d:E.pop():d;Array.isArray(E[0])&&(E=E[0]);if(2>E.length)throw new v("streams");var I,M=E.map(function(L,S){var R=S<E.length-1;return m(L,R,0<S,function(aa){I||(I=aa);aa&&M.forEach(a);R||(M.forEach(a),G(I))})});return E.reduce(g)}}());var fba=Sq;var jt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gba={},Nsa=Xl,p6=fba.Readable,
Rja=nz;gba=RD;Nsa(RD,p6);RD.prototype._read=function(){var b=this||jt,d=(this||jt)._options;(this||jt).destroyed||(this||jt)._iterator.next(function(m,a,g){if(!b.destroyed){if(m)return b.destroy(m);void 0===a&&void 0===g?b.push(null):!1!==d.keys&&!1===d.values?b.push(a):!1===d.keys&&!1!==d.values?b.push(g):b.push({key:a,value:g})}})};RD.prototype._destroy=function(b,d){(this||jt)._iterator.end(function(m){d(b||m)})};var Osa=gba,eO={};(function(b,d,m){eO?eO=m():d[b]=m()})("prr",eO,function(){var b=
"function"==typeof Object.defineProperty?function(m,a,g){Object.defineProperty(m,a,g);return m}:function(m,a,g){m[a]=g.value;return m},d=function(m,a){var g="object"==typeof a,l=!g&&"string"==typeof a,r=function(v){return g?!!a[v]:l?-1<a.indexOf(v[0]):!1};return{enumerable:r("enumerable"),configurable:r("configurable"),writable:r("writable"),value:m}};return function(m,a,g,l){var r;l=d(g,l);if("object"==typeof a){for(r in a)Object.hasOwnProperty.call(a,r)&&(l.value=a[r],b(m,r,l));return m}return b(m,
a,l)}});var Pm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Psa={},Sja=eO;eT.prototype=Error();var Qsa=Psa=function(b){var d=function(m,a){return Tja(b,m,a)};return{CustomError:eT,FilesystemError:d("FilesystemError"),createError:d}},Bv={},Rsa=Bv.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,
code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},
{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",
description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},
{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},
{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},
{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},
{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Bv.errno={};Bv.code={};Rsa.forEach(function(b){Bv.errno[b.errno]=
b;Bv.code[b.code]=b});Bv.custom=Qsa(Bv);Bv.create=Bv.custom.createError;var Ssa={},SB=Bv.create,TB=SB("LevelUPError"),zW=SB("NotFoundError",TB);zW.prototype.notFound=!0;zW.prototype.status=404;var UB=Ssa={LevelUPError:TB,InitializationError:SB("InitializationError",TB),OpenError:SB("OpenError",TB),ReadError:SB("ReadError",TB),WriteError:SB("WriteError",TB),NotFoundError:zW,EncodingError:SB("EncodingError",TB)},Tsa={},oz=Tsa=function(){var b,d=new Promise(function(m,a){b=function(g,l){g?a(g):m(l)}});
b.promise=d;return b};var FE=function(b,d){return"function"===typeof b?b:d};var hba=function(b){return"object"===typeof b&&null!==b?b:{}};var Qm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Usa={},bI=UB.WriteError;LG.prototype.put=function(b,d){try{(this||Qm).batch.put(b,d)}catch(m){throw new bI(m);}(this||Qm).ops.push({type:"put",key:b,value:d});(this||Qm).length++;return this||Qm};LG.prototype.del=function(b){try{(this||Qm).batch.del(b)}catch(d){throw new bI(d);
}(this||Qm).ops.push({type:"del",key:b});(this||Qm).length++;return this||Qm};LG.prototype.clear=function(){try{(this||Qm).batch.clear()}catch(b){throw new bI(b);}(this||Qm).ops=[];(this||Qm).length=0;return this||Qm};LG.prototype.write=function(b,d){var m=(this||Qm)._levelup,a=(this||Qm).ops;d=FE(b,d);if(!d){d=oz();var g=d.promise}b=hba(b);try{(this||Qm).batch.write(b,function(l){if(l)return d(new bI(l));m.emit("batch",a);d()})}catch(l){throw new bI(l);}return g};var Vsa=Usa=LG,eka={assign:r6,polyfill:function(){Object.assign||
Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r6})}},iba=Object.prototype.toString,jba=function(b){var d=iba.call(b),m="[object Arguments]"===d;return m||(m="[object Array]"!==d&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===iba.call(b.callee)),m};if(!Object.keys){var fO=Object.prototype.hasOwnProperty,kba=Object.prototype.toString,lba=Object.prototype.propertyIsEnumerable,Wsa=!lba.call({toString:null},"toString"),
Xsa=lba.call(function(){},"prototype"),gO="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),AW=function(b){var d=b.constructor;return d&&d.prototype===b},Ysa={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,
$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Zsa=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!Ysa["$"+b]&&fO.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{AW(window[b])}catch(d){return!0}}catch(d){return!0}return!1}();var $sa=function(b){var d=null!==b&&"object"==typeof b,m="[object Function]"===kba.call(b),a=jba(b),g=d&&"[object String]"===kba.call(b),l=[];if(!d&&!m&&!a)throw new TypeError("Object.keys called on a non-object");
d=Xsa&&m;if(g&&0<b.length&&!fO.call(b,0))for(g=0;g<b.length;++g)l.push(String(g));if(a&&0<b.length)for(a=0;a<b.length;++a)l.push(String(a));else for(var r in b)d&&"prototype"===r||!fO.call(b,r)||l.push(String(r));if(Wsa){if("undefined"!=typeof window&&Zsa)try{var v=AW(b)}catch(y){v=!1}else v=AW(b);for(a=0;a<gO.length;++a)v&&"constructor"===gO[a]||!fO.call(b,gO[a])||l.push(gO[a])}return l}}var ata=$sa,bta=Array.prototype.slice,mba=Object.keys,hO=mba?function(b){return mba(b)}:ata,nba=Object.keys;hO.shim=
function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2)||(Object.keys=function(b){return jba(b)?nba(bta.call(b)):nba(b)}):Object.keys=hO;return Object.keys||hO};var cta="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),dta=Object.prototype.toString,eta=Array.prototype.concat,BW=Object.defineProperty,oba=BW&&function(){var b={};try{for(var d in BW(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(m){return!1}}(),cI=function(b,
d){var m=2<arguments.length?arguments[2]:{},a=hO(d);cta&&(a=eta.call(a,Object.getOwnPropertySymbols(d)));for(var g=0;g<a.length;g+=1){var l=void 0,r=b,v=a[g],y=d[a[g]],A=m[a[g]];(!(v in r)||"function"==typeof(l=A)&&"[object Function]"===dta.call(l)&&A())&&(oba?BW(r,v,{configurable:!0,enumerable:!1,value:y,writable:!0}):r[v]=y)}};cI.supportsDescriptors=!!oba;var pba=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,fta=function(){if("function"!=typeof Symbol||
"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b={},d=Symbol("test"),m=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(m))return!1;for(d in b[d]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;m=Object.getOwnPropertySymbols(b);
return 1!==m.length||m[0]!==d||!Object.prototype.propertyIsEnumerable.call(b,d)||"function"==typeof Object.getOwnPropertyDescriptor&&(b=Object.getOwnPropertyDescriptor(b,d),42!==b.value||!0!==b.enumerable)?!1:!0},CW=Array.prototype.slice,gta=Object.prototype.toString,hta=function(b){var d=this;if("function"!=typeof d||"[object Function]"!==gta.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var m,a=CW.call(arguments,1),g=Math.max(0,d.length-a.length),l=[],r=0;r<
g;r++)l.push("$"+r);if(m=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof m){var v=d.apply(this,a.concat(CW.call(arguments)));return Object(v)===v?v:this}return d.apply(b,a.concat(CW.call(arguments)))}),d.prototype)g=function(){},g.prototype=d.prototype,m.prototype=new g,g.prototype=null;return m},DW=Function.prototype.bind||hta,dI=TypeError,VB=Object.getOwnPropertyDescriptor;if(VB)try{VB({},"")}catch(b){VB=null}var EW=function(){throw new dI;
},ita=VB?function(){try{return arguments.callee,EW}catch(b){try{return VB(arguments,"callee").get}catch(d){return EW}}}():EW,WB="function"==typeof pba&&"function"==typeof Symbol&&"symbol"==typeof pba("foo")&&"symbol"==typeof Symbol("bar")&&fta(),XB=Object.getPrototypeOf||function(b){return b.__proto__},FW="undefined"==typeof Uint8Array?void 0:XB(Uint8Array),GW={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?
void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":WB?XB([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,
"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,
"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,
"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,
"%IteratorPrototype%":WB?XB(XB([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&WB?XB((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,
"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,
"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&WB?XB((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:
Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":WB?XB(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":WB?Symbol:void 0,"%SymbolPrototype%":WB?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ita,"%TypedArray%":FW,
"%TypedArrayPrototype%":FW?FW.prototype:void 0,"%TypeError%":dI,"%TypeErrorPrototype%":dI.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,
"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==
typeof WeakSet?void 0:WeakSet.prototype},qba=DW.call(Function.call,String.prototype.replace),jta=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kta=/\\(\\)?/g,lta=function(b){var d=[];return qba(b,jta,function(m,a,g,l){d[d.length]=g?qba(l,kta,"$1"):a||m}),d},rba,sba=function(b,d){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');
var m=lta(b);var a="%"+(0<m.length?m[0]:"")+"%";if(!(a in GW))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===GW[a]&&!d)throw new dI("intrinsic "+a+" exists, but is not available. Please file an issue!");a=GW[a];for(var g=1;g<m.length;g+=1)if(null!=a)if(VB&&g+1>=m.length){var l=VB(a,m[g]);if(!(d||m[g]in a))throw new dI("base intrinsic for "+b+" exists, but the property is not available.");a=l?l.get||l.value:a[m[g]]}else a=a[m[g]];return a}("%Function%"),mta=sba.apply,nta=sba.call;
(rba=function(){return DW.apply(nta,arguments)}).apply=function(){return DW.apply(mta,arguments)};var HW,iO,ota=(HW=function(b,d){return 0===b&&0===d?1/b==1/d:b===d||!(b==b||d==d)},HW),pta=(iO=function(){return"function"==typeof Object.is?Object.is:ota},iO),tba=rba(iO(),Object);cI(tba,{getPolyfill:iO,implementation:HW,shim:function(){var b=pta();return cI(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var N6=tba;var uba=function(b){return b!=b};var jO,qta=uba,rta=(jO=function(){return Number.isNaN&&
Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:qta},cI),sta=uba,vba=jO();cI(vba,{getPolyfill:jO,implementation:sta,shim:function(){var b=jO();return rta(Number,{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var fT={},t6=!1,v6={},u6=!1,Wja=void 0!==/a/g.flags,JL=function(b){var d=[];return b.forEach(function(m){return d.push(m)}),d},K6=function(b){var d=[];return b.forEach(function(m,a){return d.push([a,m])}),d},y6=Object.is?Object.is:N6,FL=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:
function(){return[]},iT=Number.isNaN?Number.isNaN:vba,NG=hT(Object.prototype.hasOwnProperty),IL=hT(Object.prototype.propertyIsEnumerable),z6=hT(Object.prototype.toString),qp=ni.types,aka=qp.isAnyArrayBuffer,Yja=qp.isArrayBufferView,A6=qp.isDate,GL=qp.isMap,B6=qp.isRegExp,HL=qp.isSet,Xja=qp.isNativeError,bka=qp.isBoxedPrimitive,C6=qp.isNumberObject,D6=qp.isStringObject,E6=qp.isBooleanObject,F6=qp.isBigIntObject,cka=qp.isSymbolObject,Zja=qp.isFloat32Array,$ja=qp.isFloat64Array,L6={isDeepEqual:function(b,
d){return Vr(b,d,!1)},isDeepStrictEqual:function(b,d){return Vr(b,d,!0)}},jT={},M6=!1,tta=gT(),Wi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uta={},LL=Zj,KL=Vu.EventEmitter,vta=ni.inherits,O6=Lsa,hka=Waa,gka=tta,SD=hba,kO=UB.WriteError,P6=UB.ReadError,wta=UB.NotFoundError,xta=UB.OpenError,fka=UB.InitializationError;hl.prototype.emit=KL.prototype.emit;hl.prototype.once=KL.prototype.once;vta(hl,KL);hl.prototype.open=function(b,d){var m=this||Wi;"function"===typeof b&&
(d=b,b=null);if(!d){d=oz();var a=d.promise}b||(b=(this||Wi).options);if(this.isOpen())return LL.nextTick(d,null,m),a;if(this._isOpening())return this.once("open",function(){d(null,m)}),a;this.emit("opening");(this||Wi).db.open(b,function(g){if(g)return d(new xta(g));m.db=m._db;d(null,m);m.emit("open");m.emit("ready")});return a};hl.prototype.close=function(b){var d=this||Wi;if(!b){b=oz();var m=b.promise}if(this.isOpen())(this||Wi).db.close(function(){d.emit("closed");b.apply(null,arguments)}),this.emit("closing"),
(this||Wi).db=new O6((this||Wi)._db);else if(this.isClosed())LL.nextTick(b);else if("closing"===(this||Wi).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",function(){d.close(b)});return m};hl.prototype.isOpen=function(){return"open"===(this||Wi).db.status};hl.prototype._isOpening=function(){return"opening"===(this||Wi).db.status};hl.prototype.isClosed=function(){return/^clos|new/.test((this||Wi).db.status)};hl.prototype.get=function(b,d,m){m=FE(d,m);if(!m){m=oz();var a=
m.promise}if(OG(this||Wi,m))return a;d=SD(d);(this||Wi).db.get(b,d,function(g,l){if(g)return g=/notfound/i.test(g)||g.notFound?new wta("Key not found in database ["+b+"]",g):new P6(g),m(g);m(null,l)});return a};hl.prototype.put=function(b,d,m,a){var g=this||Wi;a=FE(m,a);if(!a){a=oz();var l=a.promise}if(OG(this||Wi,a))return l;m=SD(m);(this||Wi).db.put(b,d,m,function(r){if(r)return a(new kO(r));g.emit("put",b,d);a()});return l};hl.prototype.del=function(b,d,m){var a=this||Wi;m=FE(d,m);if(!m){m=oz();
var g=m.promise}if(OG(this||Wi,m))return g;d=SD(d);(this||Wi).db.del(b,d,function(l){if(l)return m(new kO(l));a.emit("del",b);m()});return g};hl.prototype.batch=function(b,d,m){if(!arguments.length)return new Vsa(this||Wi);var a=this||Wi;m="function"===typeof b?b:FE(d,m);if(!m){m=oz();var g=m.promise}if(OG(this||Wi,m))return g;d=SD(d);(this||Wi).db.batch(b,d,function(l){if(l)return m(new kO(l));a.emit("batch",b);m()});return g};hl.prototype.iterator=function(b){return(this||Wi).db.iterator(b)};hl.prototype.clear=
function(b,d){var m=this||Wi;d=FE(b,d);b=SD(b);if(!d){d=oz();var a=d.promise}if(OG(this||Wi,d))return a;(this||Wi).db.clear(b,function(g){if(g)return d(new kO(g));m.emit("clear",b);d()});return a};hl.prototype.readStream=hl.prototype.createReadStream=function(b){b=nz({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new Osa((this||Wi).db.iterator(b),b)};hl.prototype.keyStream=hl.prototype.createKeyStream=function(b){return this.createReadStream(nz(b,{keys:!0,values:!1}))};hl.prototype.valueStream=
hl.prototype.createValueStream=function(b){return this.createReadStream(nz(b,{keys:!1,values:!0}))};hl.prototype.toString=function(){return"LevelUP"};hl.prototype.type="levelup";hl.errors=UB;var yta=uta=hl.default=hl,pm={},zta=ij.Buffer;pm.compare=function(b,d){if(zta.isBuffer(b)){for(var m=Math.min(b.length,d.length),a=0;a<m;a++){var g=b[a]-d[a];if(g)return g}return b.length-d.length}return b<d?-1:b>d?1:0};var Ata=pm.lowerBoundKey=function(b){return dv(b,"gt")||dv(b,"gte")||dv(b,"min")||(b.reverse?
dv(b,"end"):dv(b,"start"))||void 0},IW=pm.lowerBound=function(b,d){var m=Ata(b);return m?b[m]:d},JW=pm.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},KW=pm.upperBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},Bta=pm.lowerBoundExclusive=function(b){return!JW(b)},Cta=pm.upperBoundExclusive=function(b){return!KW(b)},Dta=pm.upperBoundKey=function(b){return dv(b,"lt")||dv(b,"lte")||dv(b,"max")||(b.reverse?dv(b,"start"):dv(b,"end"))||void 0},
LW=pm.upperBound=function(b,d){var m=Dta(b);return m?b[m]:d};pm.start=function(b,d){return b.reverse?LW(b,d):IW(b,d)};pm.end=function(b,d){return b.reverse?IW(b,d):LW(b,d)};pm.startInclusive=function(b){return b.reverse?KW(b):JW(b)};pm.endInclusive=function(b){return b.reverse?JW(b):KW(b)};pm.toLtgt=function(b,d,m,a,g){d=d||{};m=m||ika;var l=3<arguments.length,r=pm.lowerBoundKey(b),v=pm.upperBoundKey(b);r?"gt"===r?d.gt=m(b.gt,!1):d.gte=m(b[r],!1):l&&(d.gte=m(a,!1));v?"lt"===v?d.lt=m(b.lt,!0):d.lte=
m(b[v],!0):l&&(d.lte=m(g,!0));null!=b.reverse&&(d.reverse=!!b.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};pm.contains=function(b,d,m){m=m||pm.compare;var a=IW(b);if(void 0!==a&&""!==a&&(a=m(d,a),0>a||0===a&&Bta(b)))return!1;a=LW(b);return void 0!==a&&""!==a&&(a=m(d,a),0<a||0===a&&Cta(b))?!1:!0};pm.filter=function(b,d){return function(m){return pm.contains(b,
m,d)}};var gx={},lT=Yaa;gx.utf8=gx["utf-8"]={encode:function(b){return kT(b)?b:String(b)},decode:ML,buffer:!1,type:"utf8"};gx.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};gx.binary={encode:function(b){return kT(b)?b:lT.from(b)},decode:ML,buffer:!0,type:"binary"};gx.none={encode:ML,decode:ML,buffer:!1,type:"id"};gx.id=gx.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){gx[b]={encode:function(d){return kT(d)?d:lT.from(d,b)},decode:function(d){return d.toString(b)},
buffer:!0,type:b}});var Tw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wba={},mT=gx;wba=jp;jp.prototype._encoding=function(b){"string"===typeof b&&(b=mT[b]);b||(b=mT.id);return b};jp.prototype._keyEncoding=function(b,d){return this._encoding(d&&d.keyEncoding||b&&b.keyEncoding||(this||Tw).opts.keyEncoding)};jp.prototype._valueEncoding=function(b,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Tw).opts.valueEncoding||
(this||Tw).opts.encoding)};jp.prototype.encodeKey=function(b,d,m){return this._keyEncoding(d,m).encode(b)};jp.prototype.encodeValue=function(b,d,m){return this._valueEncoding(d,m).encode(b)};jp.prototype.decodeKey=function(b,d){return this._keyEncoding(d).decode(b)};jp.prototype.decodeValue=function(b,d){return this._valueEncoding(d).decode(b)};jp.prototype.encodeBatch=function(b,d){var m=this||Tw;return b.map(function(a){var g={type:a.type,key:m.encodeKey(a.key,d,a)};m.keyAsBuffer(d,a)&&(g.keyEncoding=
"binary");a.prefix&&(g.prefix=a.prefix);"value"in a&&(g.value=m.encodeValue(a.value,d,a),m.valueAsBuffer(d,a)&&(g.valueEncoding="binary"));return g})};var Eta="lt gt lte gte start end".split(" ");jp.prototype.encodeLtgt=function(b){var d=this||Tw,m={};Object.keys(b).forEach(function(a){m[a]=-1<Eta.indexOf(a)?d.encodeKey(b[a],b):b[a]});return m};jp.prototype.createStreamDecoder=function(b){var d=this||Tw;return b.keys&&b.values?function(m,a){return{key:d.decodeKey(m,b),value:d.decodeValue(a,b)}}:b.keys?
function(m){return d.decodeKey(m,b)}:b.values?function(m,a){return d.decodeValue(a,b)}:function(){}};jp.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};jp.prototype.valueAsBuffer=function(b){return this._valueEncoding(b).buffer};var Fta=wba,Gta={},mka=Gta=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Rm={},Hta=ij.Buffer;Rm.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Rm.isBoolean=
function(b){return"boolean"===typeof b};Rm.isNull=function(b){return null===b};Rm.isNullOrUndefined=function(b){return null==b};Rm.isNumber=function(b){return"number"===typeof b};Rm.isString=function(b){return"string"===typeof b};Rm.isSymbol=function(b){return"symbol"===typeof b};Rm.isUndefined=function(b){return void 0===b};Rm.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Rm.isObject=function(b){return"object"===typeof b&&null!==b};Rm.isDate=function(b){return"[object Date]"===
Object.prototype.toString.call(b)};Rm.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Rm.isFunction=function(b){return"function"===typeof b};Rm.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Rm.isBuffer=Hta.isBuffer;var fh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pT={},xba=ij.Buffer,Ita=xba.isEncoding||function(b){switch(b&&
b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},MW=pT.StringDecoder=function(b){(this||fh).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!Ita(b))throw Error("Unknown encoding: "+b);switch((this||fh).encoding){case "utf8":(this||fh).surrogateSize=3;break;case "ucs2":case "utf16le":(this||fh).surrogateSize=2;(this||fh).detectIncompleteChar=kka;break;
case "base64":(this||fh).surrogateSize=3;(this||fh).detectIncompleteChar=lka;break;default:(this||fh).write=jka;return}(this||fh).charBuffer=new xba(6);(this||fh).charReceived=0;(this||fh).charLength=0};MW.prototype.write=function(b){for(var d="";(this||fh).charLength;){d=b.length>=(this||fh).charLength-(this||fh).charReceived?(this||fh).charLength-(this||fh).charReceived:b.length;b.copy((this||fh).charBuffer,(this||fh).charReceived,0,d);(this||fh).charReceived+=d;if((this||fh).charReceived<(this||
fh).charLength)return"";b=b.slice(d,b.length);d=(this||fh).charBuffer.slice(0,(this||fh).charLength).toString((this||fh).encoding);var m=d.charCodeAt(d.length-1);if(55296<=m&&56319>=m)(this||fh).charLength+=(this||fh).surrogateSize,d="";else{(this||fh).charReceived=(this||fh).charLength=0;if(0===b.length)return d;break}}this.detectIncompleteChar(b);var a=b.length;(this||fh).charLength&&(b.copy((this||fh).charBuffer,0,b.length-(this||fh).charReceived,a),a-=(this||fh).charReceived);d+=b.toString((this||
fh).encoding,0,a);a=d.length-1;m=d.charCodeAt(a);return 55296<=m&&56319>=m?(m=(this||fh).surrogateSize,(this||fh).charLength+=m,(this||fh).charReceived+=m,(this||fh).charBuffer.copy((this||fh).charBuffer,m,0,m),b.copy((this||fh).charBuffer,0,0,m),d.substring(0,a)):d};MW.prototype.detectIncompleteChar=function(b){for(var d=3<=b.length?3:b.length;0<d;d--){var m=b[b.length-d];if(1==d&&6==m>>5){(this||fh).charLength=2;break}if(2>=d&&14==m>>4){(this||fh).charLength=3;break}if(3>=d&&30==m>>3){(this||fh).charLength=
4;break}}(this||fh).charReceived=d};MW.prototype.end=function(b){var d="";b&&b.length&&(d=this.write(b));(this||fh).charReceived&&(b=(this||fh).encoding,d+=(this||fh).charBuffer.slice(0,(this||fh).charReceived).toString(b));return d};var nka=Object.freeze({}),nT={},R6=!1,Xi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,oT={},S6=!1,lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qT={},U6=!1,ug="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,rT={},W6=!1,Pn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sT={},Y6=!1,X6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ks={},yba=!1,Jta=function(){if(yba)return ks;yba=!0;var b=Zj;ks=ks=T6();ks.Stream=gB;ks.Readable=ks;ks.Writable=Q6();ks.Duplex=TD();ks.Transform=V6();ks.PassThrough=oka();b.browser||"disable"!==b.env.READABLE_STREAM||(ks=gB);return ks}(),Kta={},rka=PG(pm),Lta=PG(Vu),Mta=
PG(Fta),Nta=PG(Jta),zba=PG(Xl);zba(tT,Error);tT.prototype.name="NotFoundError";var Ota=Lta.EventEmitter,Pta=new tT,Aba=function(b,d,m,a){function g(r){var v={},y;if(a)for(y in a)"undefined"!==typeof a[y]&&(v[y]=a[y]);if(r)for(y in r)"undefined"!==typeof r[y]&&(v[y]=r[y]);return v}var l=new Ota;l.sublevels={};l.options=a;l.version="6.5.4";l.methods={};d=d||[];l.put=function(r,v,y,A){"function"===typeof y&&(A=y,y={});b.apply([{key:r,value:v,prefix:d.slice(),type:"put"}],g(y),function(E){if(E)return A(E);
l.emit("put",r,v);A(null)})};l.prefix=function(){return d.slice()};l.batch=function(r,v,y){"function"===typeof v&&(y=v,v={});r=r.map(function(A){return{key:A.key,value:A.value,prefix:A.prefix||d,keyEncoding:A.keyEncoding,valueEncoding:A.valueEncoding,type:A.type}});b.apply(r,g(v),function(A){if(A)return y(A);l.emit("batch",r);y(null)})};l.get=function(r,v,y){"function"===typeof v&&(y=v,v={});b.get(r,d,g(v),function(A,E){A?y(Pta):y(null,E)})};l.sublevel=function(r,v){return l.sublevels[r]=l.sublevels[r]||
Aba(b,d.concat(r),m,g(v))};l.readStream=l.createReadStream=function(r){r=g(r);r.prefix=d;var v=b.iterator(r);r=m(r,b.createDecoder(r));r.setIterator(v);return r};l.close=function(r){b.close(r)};l.isOpen=b.isOpen;l.isClosed=b.isClosed;return l},Z6=Nta.Readable;zba(Ly,Z6);Ly.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Ly.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=
!0;b._iterator.next(function(d,m,a){if(d||void 0===m&&void 0===a)return d||b._destroyed||b.push(null),b._cleanup(d);a=b._makeData(m,a);b._destroyed||b.push(a)})}};Ly.prototype._cleanup=function(b){if(!this._destroyed){this._destroyed=!0;var d=this;b&&"iterator has ended"!==b.message&&d.emit("error",b);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};Ly.prototype.destroy=function(){this._cleanup()};var Qta={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+
b[1]},decode:function(b){b=b.toString();var d=b.indexOf("\u00ff",1);return[b.substring(1,d),b.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},Rta=new Mta,Sta=Kta=function(b){return Aba(qka(b,Qta,Rta),[],Ly,b.options)},Uw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lO={},Tta=Zj,$6=fba.Transform,Bba=Xl;Bba(UD,$6);UD.prototype.destroy=function(b){if(!(this||Uw)._destroyed){(this||Uw)._destroyed=!0;var d=this||Uw;Tta.nextTick(function(){b&&d.emit("error",b);
d.emit("close")})}};lO=uT(function(b,d,m){b=new UD(b);b._transform=d;m&&(b._flush=m);return b});lO.ctor=uT(function(b,d,m){function a(g){if(!((this||Uw)instanceof a))return new a(g);(this||Uw).options=Object.assign({},b,g);UD.call(this||Uw,(this||Uw).options)}Bba(a,UD);a.prototype._transform=d;m&&(a.prototype._flush=m);return a});lO.obj=uT(function(b,d,m){b=new UD(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=d;m&&(b._flush=m);return b});var Cba=lO,Uta={};vk.prototype.toArray=function(){for(var b=
this._length,d=Array(b),m=this._front,a=this._capacity,g=0;g<b;++g)d[g]=this[m+g&a-1];return d};vk.prototype.push=function(b){var d=arguments.length,m=this._length;if(1<d){var a=this._capacity;if(m+d>a){for(var g=0;g<d;++g){this._checkCapacity(m+1);var l=this._front+m&this._capacity-1;this[l]=arguments[g];m++;this._length=m}return m}l=this._front;for(g=0;g<d;++g)this[l+m&a-1]=arguments[g],l++;this._length=m+d;return m+d}if(0===d)return m;this._checkCapacity(m+1);g=this._front+m&this._capacity-1;this[g]=
b;this._length=m+1;return m+1};vk.prototype.pop=function(){var b=this._length;if(0!==b){var d=this._front+b-1&this._capacity-1,m=this[d];this[d]=void 0;this._length=b-1;return m}};vk.prototype.shift=function(){var b=this._length;if(0!==b){var d=this._front,m=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=b-1;return m}};vk.prototype.unshift=function(b){var d=this._length,m=arguments.length;if(1<m){var a=this._capacity;if(d+m>a){for(var g=m-1;0<=g;g--){this._checkCapacity(d+1);
a=this._capacity;var l=(this._front-1&a-1^a)-a;this[l]=arguments[g];d++;this._length=d;this._front=l}return d}l=this._front;for(g=m-1;0<=g;g--)l=(l-1&a-1^a)-a,this[l]=arguments[g];this._front=l;this._length=d+m;return d+m}if(0===m)return d;this._checkCapacity(d+1);a=this._capacity;g=(this._front-1&a-1^a)-a;this[g]=b;this._length=d+1;this._front=g;return d+1};vk.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};vk.prototype.peekFront=function(){if(0!==
this._length)return this[this._front]};vk.prototype.get=function(b){if(b===(b|0)){var d=this._length;0>b&&(b+=d);if(!(0>b||b>=d))return this[this._front+b&this._capacity-1]}};vk.prototype.isEmpty=function(){return 0===this._length};vk.prototype.clear=function(){for(var b=this._length,d=this._front,m=this._capacity,a=0;a<b;++a)this[d+a&m-1]=void 0;this._front=this._length=0};vk.prototype.toString=function(){return this.toArray().toString()};vk.prototype.valueOf=vk.prototype.toString;vk.prototype.removeFront=
vk.prototype.shift;vk.prototype.removeBack=vk.prototype.pop;vk.prototype.insertFront=vk.prototype.unshift;vk.prototype.insertBack=vk.prototype.push;vk.prototype.enqueue=vk.prototype.push;vk.prototype.dequeue=vk.prototype.shift;vk.prototype.toJSON=vk.prototype.toArray;Object.defineProperty(vk.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});vk.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(a7(1.5*this._capacity+16))};vk.prototype._resizeTo=
function(b){var d=this._capacity;this._capacity=b;b=this._front;var m=this._length;if(b+m>d)for(b=b+m&d-1,m=0;m<b;++m)this[m+d]=this[m+0],this[m+0]=void 0};var b7=Array.isArray,Vta=Uta=vk,Wta={},Cv=ij.Buffer,Xta=Object.prototype.toString,NW="function"===typeof Cv.alloc&&"function"===typeof Cv.allocUnsafe&&"function"===typeof Cv.from,Yta=Wta=function(b,d,m){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Xta.call(b).slice(8,-1)){d>>>=0;var a=b.byteLength-
d;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===m)m=a;else if(m>>>=0,m>a)throw new RangeError("'length' is out of bounds");return NW?Cv.from(b.slice(d,d+m)):new Cv(new Uint8Array(b.slice(d,d+m)))}if("string"===typeof b){m=d;if("string"!==typeof m||""===m)m="utf8";if(!Cv.isEncoding(m))throw new TypeError('"encoding" must be a valid string encoding');return NW?Cv.from(b,m):new Cv(b,m)}return NW?Cv.from(b):new Cv(b)},eq={};Object.defineProperty(eq,"__esModule",{value:!0});eq.collectConflicts=
function(b){var d=vT(b);b=c7(b.rev_tree);for(var m=[],a=0,g=b.length;a<g;a++){var l=b[a];l.rev===d||l.opts.deleted||m.push(l.rev)}return m};eq.collectLeaves=c7;eq.compactTree=function(b){var d=[];NL(b.rev_tree,function(m,a,g,l,r){"available"!==r.status||m||(d.push(a+"-"+g),r.status="missing")});return d};eq.isDeleted=function(b,d){d||(d=vT(b));d=d.substring(d.indexOf("-")+1);b=b.rev_tree.map(xka);for(var m;m=b.pop();){if(m[0]===d)return!!m[1].deleted;b=b.concat(m[2])}};eq.isLocalId=function(b){return/^_local/.test(b)};
eq.merge=function(b,d,m){b=g7(b,d);m=wka(b.tree,m);return{tree:m.tree,stemmedRevs:m.revs,conflicts:b.conflicts}};eq.revExists=function(b,d){b=b.slice();var m=d.split("-");d=parseInt(m[0],10);m=m[1];for(var a;a=b.pop();){if(a.pos===d&&a.ids[0]===m)return!0;for(var g=a.ids[2],l=0,r=g.length;l<r;l++)b.push({pos:a.pos+1,ids:g[l]})}return!1};eq.rootToLeaf=d7;eq.traverseRevTree=NL;eq.winningRev=vT;eq.latest=function(b,d){for(var m=d.rev_tree.slice(),a;a=m.pop();){var g=a.pos,l=a.ids,r=l[0],v=l[1];l=l[2];
var y=0===l.length;a=a.history?a.history.slice():[];a.push({id:r,pos:g,opts:v});if(y)for(v=0,y=a.length;v<y;v++){var A=a[v];if(A.pos+"-"+A.id===b)return g+"-"+r}r=0;for(v=l.length;r<v;r++)m.push({pos:g+1,ids:l[r],history:a})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+b);};var un={};Object.defineProperty(un,"__esModule",{value:!0});var hB=Uh,QG=po,k7=DE,Hq=hh,Zp=eq,yka=h7("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),
zka=h7("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));un.invalidIdError=hB.invalidIdError;un.normalizeDdocFunctionName=hB.normalizeDdocFunctionName;un.parseDdocFunctionName=hB.parseDdocFunctionName;un.isDeleted=Zp.isDeleted;un.isLocalId=Zp.isLocalId;un.allDocsKeysQuery=function(b,d){var m={offset:d.skip};return Promise.all(d.keys.map(function(a){var g=hB.assign({key:a,deleted:"ok"},d);["limit","skip","keys"].forEach(function(l){delete g[l]});
return new Promise(function(l,r){b._allDocs(g,function(v,y){if(v)return r(v);d.update_seq&&void 0!==y.update_seq&&(m.update_seq=y.update_seq);m.total_rows=y.total_rows;l(y.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){m.rows=a;return m})};un.parseDoc=j7;un.preprocessAttachments=function(b,d,m){function a(){g++;b.length===g&&(l?m(l):m())}if(!b.length)return m();var g=0,l;b.forEach(function(r){function v(F){l=F;A++;A===y.length&&a()}var y=r.data&&r.data._attachments?Object.keys(r.data._attachments):
[],A=0;if(!y.length)return a();for(var E in r.data._attachments)r.data._attachments.hasOwnProperty(E)&&Cka(r.data._attachments[E],d,v)})};un.processDocs=function(b,d,m,a,g,l,r,v,y){b=b||1E3;var A=v.new_edits,E=new gz.Map,F=0,G=d.length;d.forEach(function(I,M){if(I._id&&Zp.isLocalId(I._id))m[I._deleted?"_removeLocal":"_putLocal"](I,{ctx:g},function(S,R){l[M]=S||R;++F===G&&y&&y()});else{var L=I.metadata.id;E.has(L)?(G--,E.get(L).push([I,M])):E.set(L,[[I,M]])}});E.forEach(function(I,M){function L(){++R<
I.length?S():++F===G&&y&&y()}function S(){var aa=I[R],ra=aa[0];aa=aa[1];if(a.has(M))l7(b,a.get(M),ra,l,aa,L,r,A);else{var Ea=Zp.merge([],ra.metadata.rev_tree[0],b);ra.metadata.rev_tree=Ea.tree;ra.stemmedRevs=Ea.stemmedRevs||[];Ea=Zp.winningRev(ra.metadata);var K=Zp.isDeleted(ra.metadata,Ea);"was_delete"in v&&K?(l[aa]=Hq.createError(Hq.MISSING_DOC,"deleted"),L()):A&&"missing"===ra.metadata.rev_tree[0].ids[1].status?(ra=Hq.createError(Hq.REV_CONFLICT),l[aa]=ra,L()):r(ra,Ea,K,K,!1,K?0:1,aa,L)}}var R=
0;S()})};un.updateDoc=l7;var eI={};Object.defineProperty(eI,"__esModule",{value:!0});var Dba=tE&&"object"===typeof tE&&"default"in tE?tE["default"]:tE;eI.safeJsonParse=function(b){try{return JSON.parse(b)}catch(d){return Dba.parse(b)}};eI.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(d){return Dba.stringify(b)}};var Zta={},$ta=RG(yta),aua=RG(Sta),mO=RG(IV),bua=RG(Vta),cua=RG(Yta),TG=eq,SG=po,mt=gz;iB.prototype.get=function(b,d,m){var a=n7(this,b),g=a.get(d);if(g)return Uh.nextTick(function(){m(null,
g)});if(null===g)return Uh.nextTick(function(){m({name:"NotFoundError"})});b.get(d,function(l,r){if(l)return"NotFoundError"===l.name&&a.set(d,null),m(l);a.set(d,r);m(null,r)})};iB.prototype.batch=function(b){for(var d=0,m=b.length;d<m;d++){var a=b[d],g=n7(this,a.prefix);"put"===a.type?g.set(a.key,a.value):g.set(a.key,null)}this._batch=this._batch.concat(b)};iB.prototype.execute=function(b,d){for(var m=new mt.Set,a=[],g=this._batch.length-1;0<=g;g--){var l=this._batch[g],r=l.prefix.prefix()[0]+"\u00ff"+
l.key;m.has(r)||(m.add(r),a.push(l))}b.batch(a,d)};var fI=new mt.Map,dua={encode:eI.safeJsonStringify,decode:eI.safeJsonParse,buffer:!1,type:"cheap-json"},gI=new Uh.changesHandler,eua=Zta=function(b,d){function m(){L.docStore=K.sublevel("document-store",{valueEncoding:dua});L.bySeqStore=K.sublevel("by-sequence",{valueEncoding:"json"});L.attachmentStore=K.sublevel("attach-store",{valueEncoding:"json"});L.binaryStore=K.sublevel("attach-binary-store",{valueEncoding:"binary"});L.localStore=K.sublevel("local-store",
{valueEncoding:"json"});L.metaStore=K.sublevel("meta-store",{valueEncoding:"json"});"object"===typeof b.migrate?b.migrate.doMigrationTwo(K,L,a):a()}function a(){L.metaStore.get("_local_last_update_seq",function(Z,U){"undefined"===typeof K._updateSeq&&(K._updateSeq=U||0);L.metaStore.get("_local_doc_count",function(V,na){K._docCount=V?0:na;L.metaStore.get("_local_uuid",function(la,ya){M=la?Uh.uuid():ya;L.metaStore.put("_local_uuid",M,function(){Uh.nextTick(function(){d(null,I)})})})})})}function g(Z){return K.isClosed()?
Z(Error("database is closed")):Z(null,K._docCount)}function l(Z,U){try{Z.apply(null,U)}catch(V){U[U.length-1](V)}}function r(){var Z=K._queue.peekFront();"read"===Z.type?v(Z):y(Z)}function v(Z){var U=[Z];Z=1;for(var V=K._queue.get(Z);"undefined"!==typeof V&&"read"===V.type;)U.push(V),Z++,V=K._queue.get(Z);var na=0;U.forEach(function(la){var ya=la.args,jb=ya[ya.length-1];ya[ya.length-1]=mO(function(gb){jb.apply(null,gb);++na===U.length&&Uh.nextTick(function(){U.forEach(function(){K._queue.shift()});
K._queue.length&&r()})});l(la.fun,ya)})}function y(Z){var U=Z.args,V=U[U.length-1];U[U.length-1]=mO(function(na){V.apply(null,na);Uh.nextTick(function(){K._queue.shift();K._queue.length&&r()})});l(Z.fun,U)}function A(Z){return mO(function(U){K._queue.push({fun:Z,args:U,type:"write"});1===K._queue.length&&Uh.nextTick(r)})}function E(Z){return mO(function(U){K._queue.push({fun:Z,args:U,type:"read"});1===K._queue.length&&Uh.nextTick(r)})}function F(Z){return("0000000000000000"+Z).slice(-16)}function G(Z,
U){"destroy"in aa?aa.destroy(Z,U):U(null)}b=Uh.clone(b);var I=this,M,L={},S=b.revs_limit,R=b.name;"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var aa=b.db,ra=Uh.functionName(aa);if(fI.has(ra))var Ea=fI.get(ra);else Ea=new mt.Map,fI.set(ra,Ea);if(Ea.has(R)){var K=Ea.get(R);m()}else Ea.set(R,aua($ta(aa(R),b,function(Z){if(Z)return Ea.delete(R),d(Z);K=Ea.get(R);K._docCount=-1;K._queue=new bua;"object"===typeof b.migrate?b.migrate.doMigrationOne(R,K,m):m()})));I._remote=!1;I.type=function(){return"leveldb"};
I._id=function(Z){Z(null,M)};I._info=function(Z){var U={doc_count:K._docCount,update_seq:K._updateSeq,backend_adapter:Uh.functionName(aa)};return Uh.nextTick(function(){Z(null,U)})};I._get=E(function(Z,U,V){U=Uh.clone(U);L.docStore.get(Z,function(na,la){if(na||!la)return V(hh.createError(hh.MISSING_DOC,"missing"));if(U.rev)var ya=U.latest?TG.latest(U.rev,la):U.rev;else if(ya=wT(la),"deleted"in la?la.deleted:un.isDeleted(la,ya))return V(hh.createError(hh.MISSING_DOC,"deleted"));L.bySeqStore.get(F(la.rev_map[ya]),
function(jb,gb){if(!gb)return V(hh.createError(hh.MISSING_DOC));if("_id"in gb&&gb._id!==la.id)return V(Error("wrong doc returned"));gb._id=la.id;if("_rev"in gb){if(gb._rev!==ya)return V(Error("wrong doc returned"))}else gb._rev=ya;return V(null,{doc:gb,metadata:la})})})});I._getAttachment=function(Z,U,V,na,la){var ya=V.content_type;L.binaryStore.get(V.digest,function(jb,gb){if(jb)return"NotFoundError"!==jb.name?la(jb):la(null,na.binary?SG.blob([""],{type:ya}):"");na.binary?la(null,m7(gb,ya)):la(null,
gb.toString("base64"))})};I._bulkDocs=A(function(Z,U,V){function na(Na,yb){$c.get(L.attachmentStore,Na,function(gc){gc?(gc=hh.createError(hh.MISSING_STUB,"unknown stub attachment with digest "+Na),yb(gc)):yb()})}function la(Na){function yb(){if(++gc===be.length)return Na(Ud)}var gc=0,Ud;be.forEach(function(Td){if(Td._id&&un.isLocalId(Td._id))return yb();$c.get(L.docStore,Td._id,function(cd,gf){cd?"NotFoundError"!==cd.name&&(Ud=cd):dc.set(Td._id,gf);yb()})})}function ya(Na,yb){var gc=Promise.resolve();
Na.forEach(function(Ud,Td){gc=gc.then(function(){return new Promise(function(cd,gf){I._doCompactionNoLock(Td,Ud,{ctx:$c},function(Ze){if(Ze)return gf(Ze);cd()})})})});gc.then(function(){yb()},yb)}function jb(Na){var yb=new mt.Map;dc.forEach(function(gc,Ud){yb.set(Ud,TG.compactTree(gc))});ya(yb,Na)}function gb(){ya(oc,function(Na){Na&&La(Na);if(I.auto_compaction)return jb(La);La()})}function ka(Na,yb,gc,Ud,Td,cd,gf,Ze){function ii(Kh){Tj++;Cj||(Kh?(Cj=Kh,Ze(Cj)):Tj===bk.length&&rj())}function Gh(Kh,
ik,Rk,nk){return function(Sk){qa(Kh,"md5-"+Sk,ik,Rk,nk)}}function Bj(Kh,ik,Rk){return function(nk){DE.binaryMd5(nk,Gh(Kh,ik,nk,Rk))}}function rj(){var Kh=Na.metadata.rev_map[Na.metadata.rev];if(Kh)return Ze();Kh=++Hd;Na.metadata.rev_map[Na.metadata.rev]=Na.metadata.seq=Kh;Kh=[{key:F(Kh),value:Na.data,prefix:L.bySeqStore,type:"put"},{key:Na.metadata.id,value:Na.metadata,prefix:L.docStore,type:"put"}];$c.batch(Kh);qc[gf]={ok:!0,id:Na.metadata.id,rev:Na.metadata.rev};dc.set(Na.metadata.id,Na.metadata);
Ze()}Vb+=cd;var Cj=null,Tj=0;Na.metadata.winningRev=yb;Na.metadata.deleted=gc;Na.data._id=Na.metadata.id;Na.data._rev=Na.metadata.rev;Ud&&(Na.data._deleted=!0);Na.stemmedRevs.length&&oc.set(Na.metadata.id,Na.stemmedRevs);var bk=Na.data._attachments?Object.keys(Na.data._attachments):[];for(yb=0;yb<bk.length;yb++)if(gc=bk[yb],Ud=Na.data._attachments[gc],Ud.stub)ia(Na.data._id,Na.data._rev,Ud.digest,ii);else if("string"===typeof Ud.data){try{var jj=SG.atob(Ud.data)}catch(Kh){V(hh.createError(hh.BAD_ARG,
"Attachment is not a valid base64 string"));return}Bj(Na,gc,ii)(jj)}else Dka(Ud.data,Bj(Na,gc,ii));bk.length||rj()}function ia(Na,yb,gc,Ud){function Td(){return new Promise(function(Ze,ii){$c.get(L.attachmentStore,gc,function(Gh,Bj){if(Gh&&"NotFoundError"!==Gh.name)return ii(Gh);Ze(Bj)})})}function cd(Ze){var ii=[Na,yb].join("@"),Gh={};Ze?Ze.refs&&(Gh.refs=Ze.refs,Gh.refs[ii]=!0):(Gh.refs={},Gh.refs[ii]=!0);return new Promise(function(Bj){$c.batch([{type:"put",prefix:L.attachmentStore,key:gc,value:Gh}]);
Bj(!Ze)})}var gf=Ca[gc]||Promise.resolve();Ca[gc]=gf.then(function(){return Td().then(cd).then(function(Ze){Ud(null,Ze)},Ud)})}function qa(Na,yb,gc,Ud,Td){gc=Na.data._attachments[gc];delete gc.data;gc.digest=yb;gc.length=Ud.length;var cd=Na.metadata.id;Na=Na.metadata.rev;gc.revpos=parseInt(Na,10);ia(cd,Na,yb,function(gf,Ze){if(gf||0===Ud.length||!Ze)return Td(gf);$c.batch([{type:"put",prefix:L.binaryStore,key:yb,value:cua(Ud,"binary")}]);Td()})}function La(Na){if(Na)return Uh.nextTick(function(){V(Na)});
$c.batch([{prefix:L.metaStore,type:"put",key:"_local_last_update_seq",value:Hd},{prefix:L.metaStore,type:"put",key:"_local_doc_count",value:K._docCount+Vb}]);$c.execute(K,function(yb){if(yb)return V(yb);K._docCount+=Vb;K._updateSeq=Hd;gI.notify(R);Uh.nextTick(function(){V(null,qc)})})}var Lb=U.new_edits,qc=Array(Z.docs.length),dc=new mt.Map,oc=new mt.Map,$c=new iB,Vb=0,Hd=K._updateSeq,be=Z.docs,ha=be.map(function(Na){if(Na._id&&un.isLocalId(Na._id))return Na;Na=un.parseDoc(Na,Lb,I.__opts);Na.metadata&&
!Na.metadata.rev_map&&(Na.metadata.rev_map={});return Na});Z=ha.filter(function(Na){return Na.error});if(Z.length)return V(Z[0]);var Ca={};if(!ha.length)return V(null,[]);(function(Na){var yb=[];be.forEach(function(Td){Td&&Td._attachments&&Object.keys(Td._attachments).forEach(function(cd){cd=Td._attachments[cd];cd.stub&&yb.push(cd.digest)})});if(!yb.length)return Na();var gc=0,Ud;yb.forEach(function(Td){na(Td,function(cd){cd&&!Ud&&(Ud=cd);++gc===yb.length&&Na(Ud)})})})(function(Na){if(Na)return V(Na);
la(function(yb){if(yb)return V(yb);un.processDocs(S,ha,I,dc,$c,qc,ka,U,gb)})})});I._allDocs=function(Z,U){return"keys"in Z?un.allDocsKeysQuery(this,Z):E(function(V,na){V=Uh.clone(V);g(function(la,ya){if(la)return na(la);la={};var jb=V.skip||0;V.startkey&&(la.gte=V.startkey);V.endkey&&(la.lte=V.endkey);V.key&&(la.gte=la.lte=V.key);if(V.descending){la.reverse=!0;var gb=la.lte;la.lte=la.gte;la.gte=gb}if("number"===typeof V.limit)var ka=V.limit;if(0===ka||"gte"in la&&"lte"in la&&la.gte>la.lte)return la=
{total_rows:ya,offset:V.skip,rows:[]},V.update_seq&&(la.update_seq=K._updateSeq),na(null,la);var ia=[],qa=L.docStore.readStream(la),La=Cba.obj(function(Lb,qc,dc){function oc(be){var ha={id:$c.id,key:$c.id,value:{rev:Vb}};if(V.include_docs){ha.doc=be;ha.doc._rev=ha.value.rev;V.conflicts&&(be=TG.collectConflicts($c),be.length&&(ha.doc._conflicts=be));for(var Ca in ha.doc._attachments)ha.doc._attachments.hasOwnProperty(Ca)&&(ha.doc._attachments[Ca].stub=!0)}if(!1===V.inclusive_end&&$c.id===V.endkey)return dc();
if(Hd)if("ok"===V.deleted)ha.value.deleted=!0,ha.doc=null;else return dc();ia.push(ha);dc()}var $c=Lb.value,Vb=wT($c),Hd="deleted"in $c?$c.deleted:un.isDeleted($c,Vb);if(!Hd){if(0<jb--){dc();return}if("number"===typeof ka&&0>=ka--){qa.unpipe();qa.destroy();dc();return}}else if("ok"!==V.deleted){dc();return}V.include_docs?L.bySeqStore.get(F($c.rev_map[Vb]),function(be,ha){oc(ha)}):oc()},function(Lb){Promise.resolve().then(function(){if(V.include_docs&&V.attachments)return xT(ia,L,V)}).then(function(){var qc=
{total_rows:ya,offset:V.skip,rows:ia};V.update_seq&&(qc.update_seq=K._updateSeq);na(null,qc)},na);Lb()}).on("unpipe",function(){La.end()});qa.on("error",na);qa.pipe(La)})})(Z,U)};I._changes=function(Z){function U(){Z.done=!0;Z.return_docs&&Z.limit&&Z.limit<la.length&&(la.length=Z.limit);Lb.unpipe(qc);Lb.destroy();Z.continuous||Z.cancelled||(Z.include_docs&&Z.attachments&&Z.return_docs?xT(la,L,Z).then(function(){Z.complete(null,{results:la,last_seq:ya})}):Z.complete(null,{results:la,last_seq:ya}))}
Z=Uh.clone(Z);if(Z.continuous){var V=R+":"+Uh.uuid();gI.addListener(R,V,I,Z);gI.notify(R);return{cancel:function(){gI.removeListener(R,V)}}}var na=Z.descending,la=[],ya=Z.since||0,jb=0,gb={reverse:na};if("limit"in Z&&0<Z.limit)var ka=Z.limit;gb.reverse||(gb.start=F(Z.since||0));var ia=Z.doc_ids&&new mt.Set(Z.doc_ids),qa=Uh.filterChange(Z),La=new mt.Map,Lb=L.bySeqStore.readStream(gb),qc=Cba.obj(function(dc,oc,$c){function Vb(ha){function Ca(yb){var gc=Z.processChange(yb,ha,Z);gc.seq=ha.seq;yb=qa(gc);
if("object"===typeof yb)return Z.complete(yb);if(yb){jb++;if(Z.attachments&&Z.include_docs)xT([gc],L,Z).then(function(){Z.onChange(gc)});else Z.onChange(gc);Z.return_docs&&la.push(gc)}$c()}var Na=wT(ha);if(ha.seq!==Hd)return $c();ya=Hd;if(Na===be._rev)return Ca(be);L.bySeqStore.get(F(ha.rev_map[Na]),function(yb,gc){Ca(gc)})}if(ka&&jb>=ka)return U(),$c();if(Z.cancelled||Z.done)return $c();var Hd=parseInt(dc.key,10),be=dc.value;if(Hd===Z.since&&!na||ia&&!ia.has(be._id))return $c();if(dc=La.get(be._id))return Vb(dc);
L.docStore.get(be._id,function(ha,Ca){if(Z.cancelled||Z.done||K.isClosed()||un.isLocalId(Ca.id))return $c();La.set(be._id,Ca);Vb(Ca)})},function(dc){if(Z.cancelled)return dc();Z.return_docs&&Z.limit&&Z.limit<la.length&&(la.length=Z.limit);dc()}).on("unpipe",function(){qc.end();U()});Lb.pipe(qc);return{cancel:function(){Z.cancelled=!0;U()}}};I._close=function(Z){if(K.isClosed())return Z(hh.createError(hh.NOT_OPEN));K.close(function(U){U?Z(U):(Ea.delete(R),Z())})};I._getRevisionTree=function(Z,U){L.docStore.get(Z,
function(V,na){V?U(hh.createError(hh.MISSING_DOC)):U(null,na.rev_tree)})};I._doCompaction=A(function(Z,U,V,na){I._doCompactionNoLock(Z,U,V,na)});I._doCompactionNoLock=function(Z,U,V,na){"function"===typeof V&&(na=V,V={});if(!U.length)return na();var la=V.ctx||new iB;la.get(L.docStore,Z,function(ya,jb){function gb(dc){dc&&(qc=dc);if(++Lb===U.length){if(qc)return na(qc);ia()}}function ka(dc){if(dc)return na(dc);la.batch(qa);if(V.ctx)return na();la.execute(K,na)}function ia(){function dc(be){be&&(Vb=
be);++$c===oc.length&&ka(Vb)}var oc=Object.keys(La);if(!oc.length)return ka();var $c=0,Vb,Hd=new mt.Map;U.forEach(function(be){Hd.set(Z+"@"+be,!0)});oc.forEach(function(be){la.get(L.attachmentStore,be,function(ha,Ca){if(ha)return"NotFoundError"===ha.name?dc():dc(ha);ha=Object.keys(Ca.refs||{}).filter(function(yb){return!Hd.has(yb)});var Na={};ha.forEach(function(yb){Na[yb]=!0});ha.length?qa.push({key:be,type:"put",value:{refs:Na},prefix:L.attachmentStore}):qa=qa.concat([{key:be,type:"del",prefix:L.attachmentStore},
{key:be,type:"del",prefix:L.binaryStore}]);dc()})})}if(ya)return na(ya);ya=U.map(function(dc){var oc=jb.rev_map[dc];delete jb.rev_map[dc];return oc});TG.traverseRevTree(jb.rev_tree,function(dc,oc,$c,Vb,Hd){-1!==U.indexOf(oc+"-"+$c)&&(Hd.status="missing")});var qa=[];qa.push({key:jb.id,value:jb,type:"put",prefix:L.docStore});var La={},Lb=0,qc;ya.forEach(function(dc){qa.push({key:F(dc),type:"del",prefix:L.bySeqStore});la.get(L.bySeqStore,F(dc),function(oc,$c){if(oc)return"NotFoundError"===oc.name?gb():
gb(oc);Object.keys($c._attachments||{}).forEach(function(Vb){La[$c._attachments[Vb].digest]=!0});gb()})})})};I._getLocal=function(Z,U){L.localStore.get(Z,function(V,na){V?U(hh.createError(hh.MISSING_DOC)):U(null,na)})};I._putLocal=function(Z,U,V){"function"===typeof U&&(V=U,U={});U.ctx?I._putLocalNoLock(Z,U,V):I._putLocalWithLock(Z,U,V)};I._putLocalWithLock=A(function(Z,U,V){I._putLocalNoLock(Z,U,V)});I._putLocalNoLock=function(Z,U,V){delete Z._revisions;var na=Z._rev,la=Z._id,ya=U.ctx||new iB;ya.get(L.localStore,
la,function(jb,gb){if(jb&&na||gb&&gb._rev!==na)return V(hh.createError(hh.REV_CONFLICT));Z._rev=na?"0-"+(parseInt(na.split("-")[1],10)+1):"0-1";ya.batch([{type:"put",prefix:L.localStore,key:la,value:Z}]);var ka={ok:!0,id:Z._id,rev:Z._rev};if(U.ctx)return V(null,ka);ya.execute(K,function(ia){if(ia)return V(ia);V(null,ka)})})};I._removeLocal=function(Z,U,V){"function"===typeof U&&(V=U,U={});U.ctx?I._removeLocalNoLock(Z,U,V):I._removeLocalWithLock(Z,U,V)};I._removeLocalWithLock=A(function(Z,U,V){I._removeLocalNoLock(Z,
U,V)});I._removeLocalNoLock=function(Z,U,V){var na=U.ctx||new iB;na.get(L.localStore,Z._id,function(la,ya){if(la)return"NotFoundError"!==la.name?V(la):V(hh.createError(hh.MISSING_DOC));if(ya._rev!==Z._rev)return V(hh.createError(hh.REV_CONFLICT));na.batch([{prefix:L.localStore,type:"del",key:Z._id}]);var jb={ok:!0,id:Z._id,rev:"0-0"};if(U.ctx)return V(null,jb);na.execute(K,function(gb){if(gb)return V(gb);V(null,jb)})})};I._destroy=function(Z,U){Z=Uh.functionName(aa);if(fI.has(Z))var V=fI.get(Z);else return G(R,
U);V.has(R)?(gI.removeAllListeners(R),V.get(R).close(function(){V.delete(R);G(R,U)})):G(R,U)}},jB="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fua={},Eba=Zj;yT.prototype.next=function(b){var d=this||jB;if("function"!=typeof b)throw Error("next() requires a callback argument");if(d._ended)return b(Error("cannot call next() after end()"));if(d._nexting)return b(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=
!1;b.apply(null,arguments)});Eba.nextTick(function(){d._nexting=!1;b()})};yT.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");if((this||jB)._ended)return b(Error("end() already called on iterator"));(this||jB)._ended=!0;if("function"==typeof(this||jB)._end)return this._end(b);Eba.nextTick(b)};var Fba=fua=yT,Ll="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gua={},hua=Zj;My.prototype._serializeKey=function(b){return(this||
Ll)._db._serializeKey(b)};My.prototype._serializeValue=function(b){return(this||Ll)._db._serializeValue(b)};My.prototype._checkWritten=function(){if((this||Ll)._written)throw Error("write() already called on this batch");};My.prototype.put=function(b,d){this._checkWritten();var m=(this||Ll)._db._checkKey(b,"key",(this||Ll)._db._isBuffer);if(m)throw m;b=this._serializeKey(b);d=this._serializeValue(d);"function"==typeof(this||Ll)._put?this._put(b,d):(this||Ll)._operations.push({type:"put",key:b,value:d});
return this||Ll};My.prototype.del=function(b){this._checkWritten();var d=(this||Ll)._db._checkKey(b,"key",(this||Ll)._db._isBuffer);if(d)throw d;b=this._serializeKey(b);"function"==typeof(this||Ll)._del?this._del(b):(this||Ll)._operations.push({type:"del",key:b});return this||Ll};My.prototype.clear=function(){this._checkWritten();(this||Ll)._operations=[];"function"==typeof(this||Ll)._clear&&this._clear();return this||Ll};My.prototype.write=function(b,d){this._checkWritten();"function"==typeof b&&
(d=b);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Ll)._written=!0;if("function"==typeof(this||Ll)._write)return this._write(d);if("function"==typeof(this||Ll)._db._batch)return(this||Ll)._db._batch((this||Ll)._operations,b,d);hua.nextTick(d)};var iua=gua=My,um="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gba={},jua=ij.Buffer,pz=Zj;kp.prototype.open=function(b,d){var m=this||um,a=(this||um).status;
"function"==typeof b&&(d=b);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||um)._open?((this||um).status="opening",this._open(b,function(g){if(g)return m.status=a,d(g);m.status="open";d()})):((this||um).status="open",pz.nextTick(d))};kp.prototype.close=function(b){var d=this||um,m=(this||um).status;if("function"!=typeof b)throw Error("close() requires a callback argument");
"function"==typeof(this||um)._close?((this||um).status="closing",this._close(function(a){if(a)return d.status=m,b(a);d.status="closed";b()})):((this||um).status="closed",pz.nextTick(b))};kp.prototype.get=function(b,d,m){var a;"function"==typeof d&&(m=d);if("function"!=typeof m)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||um)._get)return this._get(b,
d,m);pz.nextTick(function(){m(Error("NotFound"))})};kp.prototype.put=function(b,d,m,a){var g;"function"==typeof m&&(a=m);if("function"!=typeof a)throw Error("put() requires a callback argument");if(g=this._checkKey(b,"key"))return a(g);b=this._serializeKey(b);d=this._serializeValue(d);"object"!=typeof m&&(m={});if("function"==typeof(this||um)._put)return this._put(b,d,m,a);pz.nextTick(a)};kp.prototype.del=function(b,d,m){var a;"function"==typeof d&&(m=d);if("function"!=typeof m)throw Error("del() requires a callback argument");
if(a=this._checkKey(b,"key"))return m(a);b=this._serializeKey(b);"object"!=typeof d&&(d={});if("function"==typeof(this||um)._del)return this._del(b,d,m);pz.nextTick(m)};kp.prototype.batch=function(b,d,m){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(m=d);"function"==typeof b&&(m=b);if("function"!=typeof m)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return m(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var a=
0,g=b.length,l,r;a<g;a++)if(l=b[a],"object"==typeof l&&((r=this._checkKey(l.type,"type"))||(r=this._checkKey(l.key,"key"))))return m(r);if("function"==typeof(this||um)._batch)return this._batch(b,d,m);pz.nextTick(m)};kp.prototype.approximateSize=function(b,d,m){if(null==b||null==d||"function"==typeof b||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof m)throw Error("approximateSize() requires a callback argument");b=
this._serializeKey(b);d=this._serializeKey(d);if("function"==typeof(this||um)._approximateSize)return this._approximateSize(b,d,m);pz.nextTick(function(){m(null,0)})};kp.prototype._setupIteratorOptions=function(b){var d=this||um;b=nz(b);"start end gt gte lt lte".split(" ").forEach(function(m){b[m]&&d._isBuffer(b[m])&&0===b[m].length&&delete b[m]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;
return b};kp.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||um)._iterator?this._iterator(b):new Fba(this||um)};kp.prototype._chainedBatch=function(){return new iua(this||um)};kp.prototype._isBuffer=function(b){return jua.isBuffer(b)};kp.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};kp.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||pz.browser?b:String(b)};kp.prototype._checkKey=
function(b,d){if(null===b||void 0===b)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(d+" cannot be an empty Buffer");if(""===String(b))return Error(d+" cannot be an empty String")};Gba=kp;var kua=Gba;var Hba={};Hba=function(b){return new VD(b||Fka,null)};var rp=VD.prototype;Object.defineProperty(rp,"keys",{get:function(){var b=[];this.forEach(function(d,m){b.push(d)});return b}});Object.defineProperty(rp,"values",{get:function(){var b=[];this.forEach(function(d,
m){b.push(m)});return b}});Object.defineProperty(rp,"length",{get:function(){return this.root?this.root._count:0}});rp.insert=function(b,d){for(var m=this._compare,a=this.root,g=[],l=[];a;){var r=m(b,a.key);g.push(a);l.push(r);a=0>=r?a.left:a.right}g.push(new Iq(0,b,d,null,null,1));for(b=g.length-2;0<=b;--b)a=g[b],g[b]=0>=l[b]?new Iq(a._color,a.key,a.value,g[b+1],a.right,a._count+1):new Iq(a._color,a.key,a.value,a.left,g[b+1],a._count+1);for(b=g.length-1;1<b;--b){l=g[b-1];a=g[b];if(1===l._color||
1===a._color)break;d=g[b-2];if(d.left===l)if(l.left===a)if((r=d.right)&&0===r._color)l._color=1,d.right=Ny(1,r),d._color=0,--b;else{d._color=0;d.left=l.right;l._color=1;l.right=d;g[b-2]=l;g[b-1]=a;Ml(d);Ml(l);3<=b&&(b=g[b-3],b.left===d?b.left=l:b.right=l);break}else if((r=d.right)&&0===r._color)l._color=1,d.right=Ny(1,r),d._color=0,--b;else{l.right=a.left;d._color=0;d.left=a.right;a._color=1;a.left=l;a.right=d;g[b-2]=a;g[b-1]=l;Ml(d);Ml(l);Ml(a);3<=b&&(b=g[b-3],b.left===d?b.left=a:b.right=a);break}else if(l.right===
a)if((r=d.left)&&0===r._color)l._color=1,d.left=Ny(1,r),d._color=0,--b;else{d._color=0;d.right=l.left;l._color=1;l.left=d;g[b-2]=l;g[b-1]=a;Ml(d);Ml(l);3<=b&&(b=g[b-3],b.right===d?b.right=l:b.left=l);break}else if((r=d.left)&&0===r._color)l._color=1,d.left=Ny(1,r),d._color=0,--b;else{l.left=a.right;d._color=0;d.right=a.left;a._color=1;a.right=l;a.left=d;g[b-2]=a;g[b-1]=l;Ml(d);Ml(l);Ml(a);3<=b&&(b=g[b-3],b.right===d?b.right=a:b.left=a);break}}g[0]._color=1;return new VD(m,g[0])};rp.forEach=function(b,
d,m){if(this.root)switch(arguments.length){case 1:return zT(b,this.root);case 2:return AT(d,this._compare,b,this.root);case 3:if(!(0<=this._compare(d,m)))return BT(d,m,this._compare,b,this.root)}};Object.defineProperty(rp,"begin",{get:function(){for(var b=[],d=this.root;d;)b.push(d),d=d.left;return new Jq(this,b)}});Object.defineProperty(rp,"end",{get:function(){for(var b=[],d=this.root;d;)b.push(d),d=d.right;return new Jq(this,b)}});rp.at=function(b){if(0>b)return new Jq(this,[]);for(var d=this.root,
m=[];;){m.push(d);if(d.left){if(b<d.left._count){d=d.left;continue}b-=d.left._count}if(!b)return new Jq(this,m);--b;if(d.right){if(b>=d.right._count)break;d=d.right}else break}return new Jq(this,[])};rp.ge=function(b){for(var d=this._compare,m=this.root,a=[],g=0;m;){var l=d(b,m.key);a.push(m);0>=l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new Jq(this,a)};rp.gt=function(b){for(var d=this._compare,m=this.root,a=[],g=0;m;){var l=d(b,m.key);a.push(m);0>l&&(g=a.length);m=0>l?m.left:m.right}a.length=
g;return new Jq(this,a)};rp.lt=function(b){for(var d=this._compare,m=this.root,a=[],g=0;m;){var l=d(b,m.key);a.push(m);0<l&&(g=a.length);m=0>=l?m.left:m.right}a.length=g;return new Jq(this,a)};rp.le=function(b){for(var d=this._compare,m=this.root,a=[],g=0;m;){var l=d(b,m.key);a.push(m);0<=l&&(g=a.length);m=0>l?m.left:m.right}a.length=g;return new Jq(this,a)};rp.find=function(b){for(var d=this._compare,m=this.root,a=[];m;){var g=d(b,m.key);a.push(m);if(0===g)return new Jq(this,a);m=0>=g?m.left:m.right}return new Jq(this,
[])};rp.remove=function(b){return(b=this.find(b))?b.remove():this};rp.get=function(b){for(var d=this._compare,m=this.root;m;){var a=d(b,m.key);if(0===a)return m.value;m=0>=a?m.left:m.right}};var ls=Jq.prototype;Object.defineProperty(ls,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(ls,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});ls.clone=function(){return new Jq(this.tree,this._stack.slice())};ls.remove=function(){var b=
this._stack;if(0===b.length)return this.tree;var d=Array(b.length),m=b[b.length-1];d[d.length-1]=new Iq(m._color,m.key,m.value,m.left,m.right,m._count);for(var a=b.length-2;0<=a;--a)m=b[a],d[a]=m.left===b[a+1]?new Iq(m._color,m.key,m.value,d[a+1],m.right,m._count):new Iq(m._color,m.key,m.value,m.left,d[a+1],m._count);m=d[d.length-1];if(m.left&&m.right){b=d.length;for(m=m.left;m.right;)d.push(m),m=m.right;a=d[b-1];d.push(new Iq(m._color,a.key,a.value,m.left,m.right,m._count));d[b-1].key=m.key;d[b-
1].value=m.value;for(a=d.length-2;a>=b;--a)m=d[a],d[a]=new Iq(m._color,m.key,m.value,m.left,d[a+1],m._count);d[b-1].left=d[b]}m=d[d.length-1];if(0===m._color)for(a=d[d.length-2],a.left===m?a.left=null:a.right===m&&(a.right=null),d.pop(),a=0;a<d.length;++a)d[a]._count--;else if(m.left||m.right)for(m.left?o7(m,m.left):m.right&&o7(m,m.right),m._color=1,a=0;a<d.length-1;++a)d[a]._count--;else{if(1===d.length)return new VD(this.tree._compare,null);for(a=0;a<d.length;++a)d[a]._count--;a=d[d.length-2];for(var g,
l,r,v=d.length-1;0<=v;--v){b=d[v];if(0===v){b._color=1;break}g=d[v-1];if(g.left===b){l=g.right;if(l.right&&0===l.right._color){l=g.right=ev(l);r=l.right=ev(l.right);g.right=l.left;l.left=g;l.right=r;l._color=g._color;b._color=1;g._color=1;r._color=1;Ml(g);Ml(l);if(1<v){var y=d[v-2];y.left===g?y.left=l:y.right=l}d[v-1]=l;break}else if(l.left&&0===l.left._color){l=g.right=ev(l);r=l.left=ev(l.left);g.right=r.left;l.left=r.right;r.left=g;r.right=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Ml(g);
Ml(l);Ml(r);1<v&&(y=d[v-2],y.left===g?y.left=r:y.right=r);d[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.right=Ny(0,l);break}else g.right=Ny(0,l);else l=ev(l),g.right=l.left,l.left=g,l._color=g._color,g._color=0,Ml(g),Ml(l),1<v&&(y=d[v-2],y.left===g?y.left=l:y.right=l),d[v-1]=l,d[v]=g,v+1<d.length?d[v+1]=b:d.push(b),v+=2}else{l=g.left;if(l.left&&0===l.left._color){l=g.left=ev(l);r=l.left=ev(l.left);g.left=l.right;l.right=g;l.left=r;l._color=g._color;b._color=1;g._color=1;r._color=1;
Ml(g);Ml(l);1<v&&(y=d[v-2],y.right===g?y.right=l:y.left=l);d[v-1]=l;break}else if(l.right&&0===l.right._color){l=g.left=ev(l);r=l.right=ev(l.right);g.left=r.right;l.right=r.left;r.right=g;r.left=l;r._color=g._color;g._color=1;l._color=1;b._color=1;Ml(g);Ml(l);Ml(r);1<v&&(y=d[v-2],y.right===g?y.right=r:y.left=r);d[v-1]=r;break}if(1===l._color)if(0===g._color){g._color=1;g.left=Ny(0,l);break}else g.left=Ny(0,l);else l=ev(l),g.left=l.right,l.right=g,l._color=g._color,g._color=0,Ml(g),Ml(l),1<v&&(y=d[v-
2],y.right===g?y.right=l:y.left=l),d[v-1]=l,d[v]=g,v+1<d.length?d[v+1]=b:d.push(b),v+=2}}a.left===m?a.left=null:a.right=null}return new VD(this.tree._compare,d[0])};Object.defineProperty(ls,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(ls,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(ls,"index",{get:function(){var b=0,d=this._stack;
if(0===d.length)return(b=this.tree.root)?b._count:0;d[d.length-1].left&&(b=d[d.length-1].left._count);for(var m=d.length-2;0<=m;--m)d[m+1]===d[m].right&&(++b,d[m].left&&(b+=d[m].left._count));return b},enumerable:!0});ls.next=function(){var b=this._stack;if(0!==b.length){var d=b[b.length-1];if(d.right)for(d=d.right;d;)b.push(d),d=d.left;else for(b.pop();0<b.length&&b[b.length-1].right===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(ls,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;
if(b[b.length-1].right)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].left===b[d])return!0;return!1}});ls.update=function(b){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");var m=Array(d.length),a=d[d.length-1];m[m.length-1]=new Iq(a._color,a.key,b,a.left,a.right,a._count);for(b=d.length-2;0<=b;--b)a=d[b],m[b]=a.left===d[b+1]?new Iq(a._color,a.key,a.value,m[b+1],a.right,a._count):new Iq(a._color,a.key,a.value,a.left,m[b+1],a._count);return new VD(this.tree._compare,m[0])};
ls.prev=function(){var b=this._stack;if(0!==b.length){var d=b[b.length-1];if(d.left)for(d=d.left;d;)b.push(d),d=d.right;else for(b.pop();0<b.length&&b[b.length-1].left===d;)d=b[b.length-1],b.pop()}};Object.defineProperty(ls,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var d=b.length-1;0<d;--d)if(b[d-1].right===b[d])return!0;return!1}});var lua=Hba,nO={},oO=ij,Vw=oO.Buffer;Vw.from&&Vw.alloc&&Vw.allocUnsafe&&Vw.allocUnsafeSlow?nO=oO:(p7(oO,
nO),nO.Buffer=WD);p7(Vw,WD);WD.from=function(b,d,m){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Vw(b,d,m)};WD.alloc=function(b,d,m){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Vw(b);void 0!==d?"string"===typeof m?b.fill(d,m):b.fill(d):b.fill(0);return b};WD.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return Vw(b)};WD.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return oO.SlowBuffer(b)};var jg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,mua={},Iba=Xl,r7=kua,q7=Fba,Kq=pm,Kka=lua,pO=nO.Buffer,XD={};Iba(OL,q7);OL.prototype._next=function(b){if((this||jg)._done++>=(this||jg)._limit||!(this||jg)._tree.valid)return dk(b);var d=(this||jg)._tree.key;var m=(this||jg)._tree.value;if(!this._test(d))return dk(b);(this||jg).keyAsBuffer&&(d=pO.from(d));(this||jg).valueAsBuffer&&(m=pO.from(m));(this||jg)._tree[(this||jg)._incr]();dk(function(){b(null,
d,m)})};OL.prototype._test=function(){return!0};$p.clearGlobalStore=function(b){b?Object.keys(XD).forEach(function(d){delete XD[d]}):XD={}};Iba($p,r7);$p.prototype._open=function(b,d){var m=this||jg;dk(function(){d(null,m)})};$p.prototype._put=function(b,d,m,a){if("undefined"===typeof d||null===d)d="";m=(this||jg)._store[(this||jg)._location].find(b);(this||jg)._store[(this||jg)._location]=m.valid?m.update(d):(this||jg)._store[(this||jg)._location].insert(b,d);dk(a)};$p.prototype._get=function(b,
d,m){var a=(this||jg)._store[(this||jg)._location].get(b);if("undefined"===typeof a)return dk(function(){m(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(a)||(a=pO.from(String(a)));dk(function(){m(null,a)})};$p.prototype._del=function(b,d,m){(this||jg)._store[(this||jg)._location]=(this||jg)._store[(this||jg)._location].remove(b);dk(m)};$p.prototype._batch=function(b,d,m){d=-1;for(var a,g,l,r=b.length,v=(this||jg)._store[(this||jg)._location];++d<r;)b[d]&&(a=this._isBuffer(b[d].key)?b[d].key:
String(b[d].key),l=v.find(a),"put"===b[d].type?(g=this._isBuffer(b[d].value)?b[d].value:String(b[d].value),v=l.valid?l.update(g):v.insert(a,g)):v=l.remove());(this||jg)._store[(this||jg)._location]=v;dk(m)};$p.prototype._iterator=function(b){return new OL(this||jg,b)};$p.prototype._isBuffer=function(b){return pO.isBuffer(b)};$p.destroy=function(b,d){b="$"+b;b in XD&&delete XD[b];dk(d)};var nua=mua=$p.default=$p,oua={},Lka=Uh,Nka=s7(eua),Mka=s7(nua);CT.valid=function(){return!0};CT.use_prefix=!1;var pua=
oua=function(b){b.adapter("memory",CT,!0)},Ai=lively.FreezerRuntime.recorderFor("lively.storage/database.js");Ai.nodejsRequire=function(b){if(!Ai.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==typeof System?System._nodeRequire(b):require("module")._load(b)};Ai.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!Ai.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");
var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):Ai.GLOBAL.process.cwd(),m=Ai.nodejsRequire("path").join,a=Ai.nodejsRequire("fs"),g=a.mkdirSync,l=a.existsSync;a=a.readFileSync;if(b.includes("/"))return m(d,b);try{var r=a(m(d,"../package.json")),v=JSON.parse(r);if("lively.web"===v.name||"lively.next"===v.name){var y=m(d,"../.livelydbs");l(y)||g(y);return m(y,b)}}catch(A){}d=m(d,".livelydbs");l(d)||g(d);return m(d,b)};Ai.nodejs_attemptToLoadProperPouchDB=
function(){if(!Ai.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");b=b(d,"../../lib/index.js");try{return Ai.PouchDB=System._nodeRequire(b),Ai.PouchDB.plugin(Ai.pouchdbAdapterMem),!0}catch(m){return!1}}try{return Ai.PouchDB=require("pouchdb"),Ai.PouchDB.plugin(Ai.pouchdbAdapterMem),
!0}catch(m){return!1}};Ai._PouchDB=vpa;Ai.pouchdbAdapterMem=pua;Ai.Path=Ti;Ai.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Ai.isNode="undefined"!==typeof global&&"undefined"!==typeof process;Ai.PouchDB=Ai._PouchDB;Ai.PouchDB.plugin&&Ai.pouchdbAdapterMem&&Ai.PouchDB.plugin(Ai.pouchdbAdapterMem);Ai.createPouchDB=Ai.isNode?function(){var b=!1,d=!1;return function(m,a){a=void 0===a?{}:a;b||(b=!0,d=Ai.nodejs_attemptToLoadProperPouchDB());
a.adapter||(a.adapter=m.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==a.adapter&&(m=Ai.nodejs_leveldbPath(m));a=Object.assign({},a,{name:m});return new Ai.PouchDB(a)}}():function(b,d){return new Ai.PouchDB(Object.assign({name:b},d))};var Mh=function(b,d){d=void 0===d?{}:d;this.name=b;this.options=d;this._pouchdb=null};Mh.findDB=function(b){return this.databases.get(b)};Mh.ensureDB=function(b,d){var m=this.findDB(b);if(m)return m;m=new this(b,d);this.databases.set(b,m);b.endsWith("lively.storage-meta")||
this.createMetaEntryForDB(b,d);return m};Mh.knownDBs=function(b,d){return Ai.Database.ensureDB("lively.storage-meta").getAll().then(function(m){return m.map(function(a){return a._id})})};Mh.createMetaEntryForDB=function(b,d){var m=Ai.Database.ensureDB("lively.storage-meta");m.has(b).then(function(a){return!a&&m.set(b,{created:Date.now(),options:d})})};Mh.knowsDB=function(b){var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(m=d.ensureDB(b),g.yield(m.docCount(),
2)):3!=g.nextAddress?(a=g.yieldResult,0<a?g.return(!0):g.yield(m.destroy(),3)):g.return(!1)})};Mh.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};Mh.prototype.isDestroyed=function(){return!!this.pouchdb._destroyed};Mh.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};Mh.prototype.update=function(b,d,m,a){a=void 0===a?0:a;var g=this,l,r,v,y,A,E,F,G,I,M,L,S,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:return l=
m=m||{},r=void 0===l.ensure?!0:l.ensure,v=void 0===l.retryOnConflict?!0:l.retryOnConflict,y=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,A={latest:!0},E=g,F=E.pouchdb,aa.setCatchFinallyBlocks(2),aa.yield(F.get(b,A),4);case 4:G=aa.yieldResult;aa.leaveTryBlock(3);break;case 2:if(M=aa.enterCatchBlock(),"not_found"!==M.name||!r)throw M;case 3:return aa.yield(d(G),5);case 5:I=aa.yieldResult;if(!I||"object"!==typeof I)return aa.return(null);I._id!==b&&(I._id=b);G&&I._rev!==G._rev&&(I._rev=G._rev);
aa.setCatchFinallyBlocks(6);return aa.yield(F.put(I),8);case 8:return L=aa.yieldResult,S=L.rev,aa.return(Object.assign(I,{_rev:S}));case 6:R=aa.enterCatchBlock();if("conflict"===R.name&&v&&a<y)return aa.return(g.update(b,d,m,a+1));throw R;}})};Mh.prototype.mixin=function(b,d,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,function(l){return Object.assign(l||{_id:b},d)},m))})};Mh.prototype.set=function(b,d,m){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(a.update(b,
function(l){return d},m))})};Mh.prototype.get=function(b,d){d=void 0===d?{}:d;var m=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(m.pouchdb.get(b,d),4);if(2!=g.nextAddress)return g.return(g.yieldResult);a=g.enterCatchBlock();if("not_found"===a.name)return g.return(void 0);throw a;})};Mh.prototype.has=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(d.get(b),
2):m.return(!!m.yieldResult)})};Mh.prototype.add=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d.pouchdb.post(b))})};Mh.prototype.docList=function(b){b=void 0===b?{}:b;var d=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(d.pouchdb.allDocs(b),2);m=E.yieldResult;a=m.rows;g=[];for(l=0;l<a.length;l++)r=a[l],v=r.id,y=r.value,A=y.rev,g.push({id:v,rev:A});return E.return(g)})};
Mh.prototype.docCount=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.pouchdb.allDocs(),2);d=m.yieldResult;return m.return(d.rows.length)})};Mh.prototype.revList=function(b){var d=this,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(d.pouchdb.get(b,{revs:!0}),2);m=r.yieldResult;a=m._revisions;g=a.start;l=a.ids;return r.return(l.map(function(v){return g--+"-"+v}))})};
Mh.prototype.getAllRevisions=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=d,g=void 0===a.skip?0:a.skip,l=void 0===a.limit?0:a.limit,y.yield(m.revList(b),2)):3!=y.nextAddress?(r=y.yieldResult,0<g&&(r=r.slice(g)),0<l&&(r=r.slice(0,l)),v=r.map(function(A){return{rev:A,id:b}}),y.yield(m.getDocuments(v),3)):y.return(y.yieldResult)})};Mh.prototype.getAll=function(b){b=void 0===b?{}:b;var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==
g.nextAddress)return g.yield(d.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){return l.doc}))})};Mh.prototype.setDocuments=function(b,d){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.bulkDocs(b,d),2);case 2:a=E.yieldResult,g=0;case 3:if(!(g<a.length)){E.jumpTo(5);break}l=b[g];r=a[g];if(r.ok||"conflict"!==r.name||l._rev){E.jumpTo(4);break}return E.yield(m.set(l._id,
l),7);case 7:v=E.yieldResult,y=v._id,A=v._rev,a[g]={ok:!0,id:y,rev:A};case 4:g++;E.jumpTo(3);break;case 5:return E.return(a)}})};Mh.prototype.updateDocuments=function(b,d,m){var a=this,g,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.yield(a.pouchdb.bulkDocs(b,m),2);case 2:g=L.yieldResult,l=[],r={},v=0;case 3:if(!(v<g.length)){if(!l.length){L.jumpTo(8);break}G=Object;I=G.assign;M=r;return L.yield(a.updateDocuments(l,d,m),9)}y=
b[v];A=g[v];r[A._id||y._id]=A;if(A.ok||"conflict"!==A.name){L.jumpTo(4);break}return L.yield(a.get(y._id),7);case 7:if(E=L.yieldResult,F=d(E,y))F._id||(F._id=y._id),F._rev||(F._rev=E._rev),l.push(F);case 4:v++;L.jumpTo(3);break;case 9:r=I.call(G,{},M,{},L.yieldResult);case 8:return L.return(r)}})};Mh.prototype.getDocuments=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l,r,v,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return a=d,g=void 0===a.ignoreErrors?
!0:a.ignoreErrors,M.yield(m.pouchdb.bulkGet({docs:b}),2);l=M.yieldResult;r=l.results;v=[];for(y=0;y<r.length;y++)for(A=r[y],E=A.docs,F=A.id,console.assert(1===E.length,"getDocuments: expected only one doc for "+F),G=0;G<E.length;G++)I=E[G],g&&!I.ok||v.push(I.ok||I.error||I);return M.return(v)})};Mh.prototype.query=function(b,d){return this.pouchdb.query(b,d)};Mh.prototype.remove=function(b,d,m){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return"undefined"!==
typeof d?(g={_id:b,_rev:d},r.jumpTo(2)):r.yield(a.get(b),3);2!=r.nextAddress&&(g=r.yieldResult);l=g;return r.return(l?a.pouchdb.remove(l):void 0)})};Mh.prototype.removeAll=function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=b.pouchdb,a.yield(d.allDocs(),2)):3!=a.nextAddress?(m=a.yieldResult,a.yield(Promise.all(m.rows.map(function(g){return d.remove(g.id,g.value.rev)})),3)):a.return(a.yieldResult)})};Mh.prototype.replicateTo=function(b,
d){b instanceof Ai.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,d)};Mh.prototype.replicateFrom=function(b,d){b instanceof Ai.Database&&(b=b.pouchdb);return this.pouchdb.replicate.from(b,d)};Mh.prototype.sync=function(b,d){b instanceof Ai.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,d)};Mh.prototype.getConflicts=function(b){var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(d.pouchdb.query("conflict_index/conflict_index",
Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);m=g.yieldResult;a=m.rows;return g.return(a.map(function(l){var r={id:l.id,rev:l.doc._rev,doc:l.doc};l.doc._conflicts&&(r.conflicts=l.doc._conflicts,delete l.doc._conflicts);return r}))})};Mh.prototype.resolveConflicts=function(b,d){var m=this,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(m.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=E.yieldResult,g=a._conflicts.map(function(F){return{id:b,
rev:F}}),E.yield(m.getDocuments(g),3);case 3:l=E.yieldResult,r=a,v=$jscomp.makeIterator(l),y=v.next();case 4:if(y.done){E.jumpTo(6);break}A=y.value;return E.yield(d(r,A),7);case 7:return(r=E.yieldResult)?E.yield(m.set(b,r),8):E.return(null);case 8:return r=E.yieldResult,E.yield(m.pouchdb.remove(A),5);case 5:y=v.next();E.jumpTo(4);break;case 6:return E.return(r)}})};Mh.prototype.diffWith=function(b){var d=this,m,a,g,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress)return L.yield(b.docList(),2);if(3!=L.nextAddress)return m=L.yieldResult,L.yield(d.docList(),3);a=L.yieldResult;g=m.reduce(function(S,R){var aa={};return Object.assign(S,(aa[R.id]=R.rev,aa))},{});l=a.reduce(function(S,R){var aa={};return Object.assign(S,(aa[R.id]=R.rev,aa))},{});r=[];v=[];y=[];for(A in g)E=g[A],(F=l[A])?E!=F&&y.push({right:{id:A,rev:E},left:{id:A,rev:F}}):v.push({id:A,rev:E});for(G in l)I=l[G],(M=g[G])||r.push({id:G,rev:I});return L.return({inLeft:r,inRight:v,changed:y})})};
Mh.loadDump=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(a=b,g=a.header,l=a.docs,r=d.name||g.name,v=m.ensureDB(r),y.yield(v.setDocuments(l,{new_edits:!1}),2)):y.return(v)})};Mh.prototype.dump=function(b){b=void 0===b?{}:b;var d=this,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==aa.nextAddress)return m=b,a=m.filterFn,g=m.name,l=m.type,r=m.dbInfo,v=
d,y=v.name,A=v.pouchdb,F=E=g||y,G=l||A.type(),I=(new Date).toJSON(),M=Object,L=M.assign,aa.yield(A.info(),2);if(3!=aa.nextAddress)return S={name:F,db_type:G,start_time:I,db_info:L.call(M,{},aa.yieldResult,{db_name:E},r)},aa.yield(d.getAll({attachments:!0}),3);R=aa.yieldResult;"function"===typeof a&&(R=a(R,S));return aa.return({header:S,docs:R})})};Mh.prototype.backup=function(b){b=void 0===b?1:b;var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?
(m=d.name+"_backup_"+b,a=d.constructor.ensureDB(m),g.yield(d.replicateTo(a),2)):g.return(a)})};Mh.prototype.migrate=function(b){var d=this,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.getAll(),2);if(3!=y.nextAddress){m=y.yieldResult;a=[];g=[];for(l=0;l<m.length;l++)r=m[l],(v=b(r,l))?(v.hasOwnProperty("_id")||(v._id=r._id),v.hasOwnProperty("_rev")&&delete v._rev,a.push(v)):g.push(r);return y.yield(d.setDocuments(a),3)}return y.return({migrated:a.length,
unchanged:g.length})})};Mh.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};Mh.prototype.createDesignDoc=function(b){var d=b.name,m=b.mapFn,a=b.reduceFn,g=b.filterFn;b={_id:"_design/"+d,version:void 0===b.version?1:b.version};g&&Ai.Path("filters."+d).set(b,g.toString(),!0);m&&Ai.Path("views."+d+".map").set(b,m.toString(),!0);a&&Ai.Path("views."+d+".reduce").set(b,a.toString(),!0);return b};Mh.prototype.addDesignDocs=function(b,d){d=void 0===d?!1:d;var m=this,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==
l.nextAddress?(a=m.createDesignDocs(b),l.yield(m.updateDocuments(a,function(r,v){return!r.hasOwnProperty("version")||v.hasOwnProperty("version")&&v.version>r.version?v:null}),2)):3!=l.nextAddress?(g=l.yieldResult,d?l.yield(Promise.all(a.map(function(r){return m.designDocDoQueryStale(r._id)})),3):l.jumpTo(3)):l.return(g)})};Mh.prototype.addDesignDoc=function(b,d){var m=b.name,a=b.mapFn,g=b.reduceFn,l=b.version;d=void 0===d?!1:d;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==
A.nextAddress?(v=r.createDesignDoc({name:m,mapFn:a,reduceFn:g,version:l}),A.yield(r.set(v._id,v),2)):3!=A.nextAddress?(y=A.yieldResult,d?A.yield(r.designDocDoQueryStale(v._id),3):A.jumpTo(3)):A.return(y)})};Mh.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};Mh.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(Mh.prototype,{pouchdb:{configurable:!0,
enumerable:!0,get:function(){return this._pouchdb?this._pouchdb:this._pouchdb=Ai.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(Mh,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return Ai.PouchDB},set:function(b){Ai.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});Ai.Database=Mh;Ai.default=Mh;var Qe=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Qe.isHash=function(b){return"string"===
typeof b&&40===b.length&&b.match(Qe.hashRe)};Qe.checkArg=function(b,d,m){if("undefined"===typeof d&&"string"===typeof m&&!m.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===d&&"string"===typeof m&&!m.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof m){var a=typeof d,g=d?d.constructor.name:"";if(!m.split("|").some(function(l){return a===l||g===l}))throw Error('parameter "'+b+'" expected to be of type '+m+" but is "+(g||a));}if("function"===typeof m&&
(d=m(d))&&d.error)throw Error('check of parameter "'+b+'" failed: '+d.error);};Qe.checkArgs=function(b,d,m){for(var a in d)Qe.checkArg(a,b[a],d[a]);if("function"===typeof m&&(d=m(b))&&d.error)throw Error(d.error);return b};Qe.Database=Mh;Qe.resource=w;Qe.obj=Ng;Qe.promise=xh;Qe.arr=ng;Qe.string=Li;Qe.Path=Ti;Qe.parse=ye;Qe.categorizer=oH;Qe.sha1=function(){function b(){var l=g.createHash("sha1");return{update:function(r){return l.update(r)},digest:function(){return l.digest("hex")}}}function d(l){function r(aa){A[L]|=
(255&aa)<<S;S?S-=8:(L++,S=24);16===L&&v()}function v(){for(var aa=16;80>aa;aa++){var ra=A[aa-3]^A[aa-8]^A[aa-14]^A[aa-16];A[aa]=ra<<1|ra>>>31}var Ea,K;ra=E;var Z=F,U=G,V=I,na=M;for(aa=0;80>aa;aa++){20>aa?(Ea=V^Z&(U^V),K=1518500249):40>aa?(Ea=Z^U^V,K=1859775393):60>aa?(Ea=Z&U|V&(Z|U),K=2400959708):(Ea=Z^U^V,K=3395469782);var la=(ra<<5|ra>>>27)+Ea+na+K+(0|A[aa]);na=V;V=U;U=Z<<30|Z>>>2;Z=ra;ra=la}E=E+ra|0;F=F+Z|0;G=G+U|0;I=I+V|0;M=M+na|0;for(aa=L=0;16>aa;aa++)A[aa]=0}function y(aa){for(var ra="",Ea=
28;0<=Ea;Ea-=4)ra+=(aa>>Ea&15).toString(16);return ra}var A,E=1732584193,F=4023233417,G=2562383102,I=271733878,M=3285377520,L=0,S=24,R=0;return A=l?m:new Uint32Array(80),{update:function(aa){if("string"==typeof aa){var ra=aa.length;R+=8*ra;for(var Ea=0;Ea<ra;Ea++)r(aa.charCodeAt(Ea))}else for(ra=aa.length,R+=8*ra,Ea=0;Ea<ra;Ea++)r(aa[Ea])},digest:function(){r(128);(14<L||14===L&&24>S)&&v();L=14;S=24;r(0);r(0);r(0xffffffffff<R?R/1099511627776:0);r(4294967295<R?R/4294967296:0);for(var aa=24;0<=aa;aa-=
8)r(R>>aa);return y(E)+y(F)+y(G)+y(I)+y(M)}}}var m,a,g;return"object"==typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(g="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(m=new Uint32Array(80),a=d),function(l){if(void 0===l)return a(!1);var r=a(!0);return r.update(l),r.digest()}}();Qe.hashRe=/^[0-9a-f]+$/i;Qe.objectDBs=Qe.objectDBs||new Map;var si=function(b,d){this.name=b;if(!d.snapshotLocation||!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=d.snapshotLocation;this.__versionDB=this.__commitDB=null};si.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(b=Qe.Database.ensureDB("internal__objectdb-meta"),d.yield(b.getAll(),2)):d.return(d.yieldResult.map(function(m){return m._id}))})};si.find=function(b){var d=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(m=Qe.objectDBs.get(b))return l.return(m);a=Qe.Database.ensureDB("internal__objectdb-meta");
return l.yield(a.get(b),2)}return(g=l.yieldResult)?l.return(d.named(b,g)):l.return()})};si.named=function(b,d){d=void 0===d?{}:d;var m=Qe.objectDBs.get(b);if(m)return m;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=Qe.resource(d.snapshotLocation)}catch(a){d.snapshotLocation=Qe.resource(System.baseURL).join(d.snapshotLocation)}m=new this(b,d);Qe.objectDBs.set(b,m);Qe.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return m};si.prototype.destroy=function(){var b=this,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(d=Qe.Database.findDB(b.name+"-commits"))?g.yield(d.destroy(),2):g.jumpTo(2);if(4!=g.nextAddress)return(m=Qe.Database.findDB(b.name+"-version-graph"))?g.yield(m.destroy(),4):g.jumpTo(4);Qe.objectDBs.delete(b.name);a=
Qe.Database.ensureDB("internal__objectdb-meta");return g.yield(a.remove(b.name),0)})};si.prototype.snapshotResourceFor=function(b){var d=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(d+"/"+b+".json")};si.prototype.snapshotObject=function(b,d,m,a,g,l,r,v){var y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return A=function(G){return G},F.yield(A(m),2);E=F.yieldResult;return F.return(y.commit(b,d,E,g,l,r,v))})};si.prototype.loadObject=
function(b,d,m,a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.loadSnapshot(b,d,a,g),2);r=y.yieldResult;v=function(A){return A};return y.return(v(r))})};si.prototype.has=function(b,d){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(m.objectStats(b,d),2):a.return(!!a.yieldResult)})};si.prototype.objects=function(b){var d=this,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(d.objectStats(b),2);m=l.yieldResult;if(b)return l.return(Object.keys(m||{}));a={};for(g in m)a[g]=Object.keys(m[g]);return l.return(a)})};si.prototype.objectStats=function(b,d){var m=this,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:a={};if(g=m.__commitDB){U.jumpTo(2);break}return U.yield(m._commitDB(),3);case 3:g=U.yieldResult;case 2:return l=g,r={reduce:!0,group:!0},b&&d?r.key=
b+"\x00"+d:b&&(r.startkey=b+"\x00",r.endkey=b+"\ufff0"),U.setCatchFinallyBlocks(4),U.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",r),6);case 6:v=U.yieldResult;y=v.rows;A=$jscomp.makeIterator(y);for(E=A.next();!E.done;E=A.next())G=F=E.value,I=G.key,M=G.value,L=M.count,S=M.max,R=M.min,aa=$jscomp.makeIterator(I.split("\x00")),ra=aa.next().value,Ea=aa.next().value,K=a[ra]||(a[ra]={}),K[Ea]={count:L,newest:S,oldest:R};U.leaveTryBlock(5);break;case 4:return Z=U.enterCatchBlock(),console.error(Z),
U.return(a);case 5:return b&&d?U.return((a[b]||{})[d]):b?U.return(a[b]):U.return(a)}})};si.prototype.getCommits=function(b,d,m,a){m=void 0===m?"HEAD":m;a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(g._log(b,d,m,a),2);case 2:l=A.yieldResult;if(!l.length)return A.return([]);if(r=g.__commitDB){A.jumpTo(3);break}return A.yield(g._commitDB(),4);case 4:r=A.yieldResult;case 3:return v=r,A.yield(v.getDocuments(l.map(function(E){return{id:E}})),
5);case 5:return y=A.yieldResult,A.return(y)}})};si.prototype.getCommit=function(b){var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return(m=d.__commitDB)?g.jumpTo(2):g.yield(d._commitDB(),3);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.get(b))})};si.prototype.getCommitsWithIds=function(b){var d=this,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return b.length?(m=d.__commitDB)?g.jumpTo(2):g.yield(d._commitDB(),
3):g.return([]);2!=g.nextAddress&&(m=g.yieldResult);a=m;return g.return(a.getDocuments(b.map(function(l){return{id:l}})))})};si.prototype.getLatestCommit=function(b,d,m,a){m=void 0===m?"HEAD":m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return l=$jscomp,r=l.makeIterator,G.yield(g._log(b,d,m,1),2);case 2:v=r.call(l,G.yieldResult);y=v.next().value;if(!y)return G.return(null);if(A=g.__commitDB){G.jumpTo(3);break}return G.yield(g._commitDB(),
4);case 4:A=G.yieldResult;case 3:return E=A,G.yield(E.get(y),5);case 5:return(F=G.yieldResult)&&F.deleted&&!a?G.return(null):G.return(F)}})};si.prototype.commit=function(b,d,m,a,g,l,r){l=void 0===l?"HEAD":l;var v=this,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){switch(ya.nextAddress){case 1:y=a;A=y.author;E=void 0===y.description?"no description":y.description;F=void 0===y.tags?[]:y.tags;G=y.timestamp;I=void 0===y.message?"":y.message;
M=y.metadata;L=y.preview;if(!b)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!A)throw Error("Cannot commit "+b+"/"+d+" without user");if(S=v.__versionDB){ya.jumpTo(2);break}return ya.yield(v._versionDB(),3);case 3:S=ya.yieldResult;case 2:return R=S,ya.yield(v.versionGraph(b,d),4);case 4:Ea=(ra=(aa=ya.yieldResult)?aa.refs[l]:null)?[ra]:[];if(r){if(!aa)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+r+" but no version entry exists!");if(ra!==
r)throw Error('Trying to store "'+b+"/"+d+'" on top of expected version '+r+" but ref "+l+" is of version "+ra+"!");}Z=(K=Qe.isHash(m))?null:m?JSON.stringify(m):null;U=v._createCommit(b,d,E,F,M,A,G,I,Ea,K?null:m,Z,g||L,K?m:null);if(!m||K){ya.jumpTo(5);break}V=v.snapshotResourceFor(U);return ya.yield(V.parent().ensureExistance(),6);case 6:return V.canDealWithJSON?ya.yield(V.writeJson(m),5):ya.yield(V.write(Z),5);case 5:if(na=v.__commitDB){ya.jumpTo(11);break}return ya.yield(v._commitDB(),12);case 12:na=
ya.yieldResult;case 11:return la=na,ya.yield(la.set(U._id,U),13);case 13:return U=ya.yieldResult,aa||(aa={refs:{},history:{}}),aa.refs[l]=U._id,aa.history[U._id]=Ea,ya.yield(R.set(b+"/"+d,aa),14);case 14:return ya.return(U)}})};si.prototype.loadSnapshot=function(b,d,m,a){a=void 0===a?"HEAD":a;var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(m&&"string"!==typeof m){l=m;y.jumpTo(2);break}if(m){if(r=g.__commitDB){y.jumpTo(6);break}return y.yield(g._commitDB(),
7)}return y.yield(g.getLatestCommit(b,d,a),5);case 5:l=y.yieldResult;y.jumpTo(2);break;case 7:r=y.yieldResult;case 6:return v=r,y.yield(v.get(m),8);case 8:l=y.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+d+" (using "+m+")");return y.return(g.snapshotResourceFor(l).readJson())}})};si.prototype.revert=function(b,d,m,a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(l=g.__versionDB){y.jumpTo(2);break}return y.yield(g._versionDB(),
3);case 3:l=y.yieldResult;case 2:return r=l,y.yield(r.get(b+"/"+d),4);case 4:return v=y.yieldResult,v.refs[m||"HEAD"]=a,delete v.deleted,y.yield(r.set(b+"/"+d,v),5);case 5:return y.return(v)}})};si.prototype._createCommit=function(b,d,m,a,g,l,r,v,y,A,E,F,G){v=void 0===v?"":v;y=void 0===y?[]:y;!F&&A&&A.preview&&(F=A.preview);return this._createCommitFromSpec({name:d,type:b,timestamp:r||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:a,description:m,preview:F,message:v,content:G||E&&
Qe.sha1(E)||null,deleted:!G&&!A,metadata:g,ancestors:y},!0)};si.prototype._createCommitFromSpec=function(b,d){d=void 0===d?!1:d;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!d&&b.content&&(d=Qe.isHash(b.content),d||(b.content=Qe.sha1(b.content)));d=Qe.obj.dissoc(b,["preview"]);d=Qe.sha1(JSON.stringify(d));
return Object.assign(b,{_id:d})};si.prototype._commitDB=function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);d=b.name+"-commits";if(m=Qe.Database.findDB(d))return a.return(b.__commitDB=m);m=Qe.Database.ensureDB(d);return a.yield(m.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=m)})};si.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!b.__commitDB){d.jumpTo(2);
break}return d.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){d.jumpTo(0);break}return d.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,d.jumpToEnd()}})};si.prototype.versionGraph=function(b,d){var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(a=m.__versionDB){r.jumpTo(2);break}return r.yield(m._versionDB(),3);case 3:a=r.yieldResult;case 2:return g=a,r.yield(g.get(b+"/"+d),4);case 4:return l=
r.yieldResult,r.return(!l||l.deleted||l._deleted?null:l)}})};si.prototype._log=function(b,d,m,a){a=void 0===a?Infinity:a;var g=this,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(g.versionGraph(b,d),2);l=A.yieldResult;if(!l||l.deleted||l._deleted)return A.return([]);r=l.refs.HEAD;for(v=[];;){if(v.includes(r))throw Error("cyclic version graph???");v.push(r);y=$jscomp.makeIterator(l.history[r]||[]);r=y.next().value;if(!r||v.length>=a)break}return A.return(v)})};
si.prototype._findTimestampedVersionsOfObjectNamed=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l,r,v,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:a=d;g=void 0===a.include_docs?!0:a.include_docs;l=void 0===a.descending?!0:a.descending;r=void 0===a.startTime?"0".repeat(13):a.startTime;v=void 0===a.endTime?"9".repeat(13):a.endTime;y=b+"\x00"+(l?v:r);A=b+"\x00"+(l?r:v);if(E=m.__commitDB){M.jumpTo(2);break}return M.yield(m._commitDB(),3);case 3:E=
M.yieldResult;case 2:return F=E,M.yield(F.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:l,include_docs:g,startkey:y,endkey:A})),4);case 4:return G=M.yieldResult,I=G.rows,M.return(g?I.map(function(L){return L.doc}):I.map(function(L){return L.id}))}})};si.prototype._versionDB=function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);d=b.name+"-version-graph";if(m=Qe.Database.findDB(d))return a.return(b.__versionDB=
m);m=Qe.Database.ensureDB(d);return a.yield(m.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=m)})};si.prototype.exportToDir=function(b,d,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;var g=this,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La,Lb,qc,dc,oc,$c,Vb,Hd,be,ha,Ca,Na,yb,gc,Ud,Td,cd,gf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){switch(Ze.nextAddress){case 1:"string"===typeof b&&(b=Qe.resource(b));if(g.__commitDB){Ze.jumpTo(2);break}return Ze.yield(g._commitDB(),
3);case 3:case 2:if(l=g.__versionDB){Ze.jumpTo(4);break}return Ze.yield(g._versionDB(),5);case 5:l=Ze.yieldResult;case 4:r=l;v=[];if(!d)return Ze.yield(r.getAll(),13);y=$jscomp.makeIterator(d);A=y.next();case 8:if(A.done){Ze.jumpTo(7);break}F=E=A.value;G=F.name;I=F.type;M=b.join(I).join(G).asDirectory();return Ze.yield(g.versionGraph(I,G),11);case 11:return L=Ze.yieldResult,S=L.refs,R=L.history,aa=Object.keys(R),Ze.yield(g.getCommitsWithIds(aa),12);case 12:ra=Ze.yieldResult;v.push({refs:S,history:R,
currentExportDir:M,commits:ra,name:G,type:I});A=y.next();Ze.jumpTo(8);break;case 13:Ea=Ze.yieldResult,K=$jscomp.makeIterator(Ea),Z=K.next();case 14:if(Z.done){Ze.jumpTo(7);break}V=U=Z.value;na=V.refs;la=V.history;ya=V._id;if(ya.startsWith("_")){Ze.jumpTo(15);break}return Ze.yield(g.getCommit(na.HEAD||Object.keys(la)[0]),17);case 17:return jb=Ze.yieldResult,gb=jb.type,ka=jb.name,ia=b.join(gb).join(ka).asDirectory(),qa=Object.keys(la),Ze.yield(g.getCommitsWithIds(qa),18);case 18:La=Ze.yieldResult,v.push({refs:na,
history:la,currentExportDir:ia,commits:La,name:ka,type:gb});case 15:Z=K.next();Ze.jumpTo(14);break;case 7:Lb={},qc=$jscomp.makeIterator(v),dc=qc.next();case 19:if(dc.done){Ze.jumpTo(0);break}$c=oc=dc.value;Vb=$c.refs;Hd=$c.history;Lb.$jscomp$loop$prop$currentExportDir$1092$2240=$c.currentExportDir;be=$c.commits;ha=$c.name;Ca=$c.type;a||(be=be.filter(function(ii){return!ii.deleted}));Na=m?be.map(function(ii){return function(Gh){if(Gh.deleted||Gh._deleted||!Gh.content)return null;delete Gh._rev;Gh=
g.snapshotResourceFor(Gh);var Bj=ii.$jscomp$loop$prop$currentExportDir$1092$2240.join(Gh.parent().name()+"/"+Gh.name());return{from:Gh,to:Bj}}}(Lb)).filter(Boolean):[];m||be.forEach(function(ii){delete ii._rev});return Ze.yield(Lb.$jscomp$loop$prop$currentExportDir$1092$2240.ensureExistance(),22);case 22:return Ze.yield(Lb.$jscomp$loop$prop$currentExportDir$1092$2240.join("index.json").writeJson({name:ha,type:Ca}),23);case 23:return Ze.yield(Lb.$jscomp$loop$prop$currentExportDir$1092$2240.join("commits.json").writeJson(be),
24);case 24:return Ze.yield(Lb.$jscomp$loop$prop$currentExportDir$1092$2240.join("history.json").writeJson({refs:Vb,history:Hd}),25);case 25:yb=$jscomp.makeIterator(Na),gc=yb.next();case 26:if(gc.done){Lb={$jscomp$loop$prop$currentExportDir$1092$2240:Lb.$jscomp$loop$prop$currentExportDir$1092$2240};dc=qc.next();Ze.jumpTo(19);break}Td=Ud=gc.value;cd=Td.from;gf=Td.to;return Ze.yield(cd.copyTo(gf),27);case 27:gc=yb.next(),Ze.jumpTo(26)}})};si.prototype.exportToSpecs=function(b,d){d=void 0===d?!1:d;var m=
this,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:a=[];if(b){aa.jumpTo(2);break}b=[];return aa.yield(m.objectStats(),3);case 3:for(l in g=aa.yieldResult||{},g)for(r in g[l])b.push({type:l,name:r});case 2:v=$jscomp.makeIterator(b),y=v.next();case 4:if(y.done){aa.jumpTo(6);break}E=A=y.value;F=E.name;G=E.type;return aa.yield(m.versionGraph(G,F),7);case 7:return I=aa.yieldResult,M=I.refs,L=I.history,S=Object.keys(L),aa.yield(m.getCommitsWithIds(S),
8);case 8:R=aa.yieldResult;d||(R=R.filter(function(ra){return!ra.deleted}));R.forEach(function(ra){delete ra._rev});a.push({type:G,name:F,commits:R,history:{refs:M,history:L}});y=v.next();aa.jumpTo(4);break;case 6:return aa.return(a)}})};si.prototype.importFromDir=function(b,d,m){function a(I){var M,L,S,R,aa,ra,Ea,K,Z,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:return M=$jscomp,L=M.makeIterator,V.yield(Promise.all([I.join("index.json").readJson(),
I.join("commits.json").readJson(),I.join("history.json").readJson()]),2);case 2:S=L.call(M,V.yieldResult);R=S.next().value;aa=R.type;ra=R.name;Ea=S.next().value;K=S.next().value;if(!m){Z=[];V.jumpTo(3);break}return V.yield(I.dirList(1,{exclude:function(na){return!na.isDirectory()}}),4);case 4:Z=V.yieldResult;case 3:return U=Z,V.return({dir:I,type:aa,name:ra,commits:Ea,history:K,snapshotDirs:U})}})}d=void 0===d?!1:d;m=void 0===m?!1:m;var g=this,l,r,v,y,A,E,F,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(b.dirList(3,
{exclude:function(M){return!M.isDirectory()&&"index.json"!==M.name()}}),2);case 2:l=I.yieldResult,l=l.filter(function(M){return"index.json"===M.name()}),r=l.map(function(M){return M.parent()}),v=[],y=$jscomp.makeIterator(r),A=y.next();case 3:if(A.done){I.jumpTo(5);break}E=A.value;F=v;G=F.push;return I.yield(a(E),6);case 6:G.call(F,I.yieldResult);A=y.next();I.jumpTo(3);break;case 5:return I.return(g.importFromSpecs(v,d,m))}})};si.prototype.importFromSpecs=function(b,d,m){d=void 0===d?!1:d;m=void 0===
m?!1:m;var a=this,g,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(d){L.jumpTo(2);break}if(g=a.__versionDB){L.jumpTo(3);break}return L.yield(a._versionDB(),4);case 4:g=L.yieldResult;case 3:l=g,r=$jscomp.makeIterator(b),v=r.next();case 5:if(v.done){L.jumpTo(2);break}A=y=v.value;E=A.type;F=A.name;return L.yield(l.get(E+"/"+F),8);case 8:if(L.yieldResult)throw Error("Import failed: object "+E+"/"+F+" already exists and overwrite is not allowed");
v=r.next();L.jumpTo(5);break;case 2:G=$jscomp.makeIterator(b),I=G.next();case 9:if(I.done){L.jumpTo(11);break}M=I.value;return L.yield(a.importFromSpec(M,!0,m),10);case 10:I=G.next();L.jumpTo(9);break;case 11:return L.return(b)}})};si.prototype.importFromSpec=function(b,d,m){d=void 0===d?!1:d;m=void 0===m?!1:m;var a=this,g,l,r,v,y,A,E,F,G,I,M,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:if(g=a.__versionDB){R.jumpTo(2);break}return R.yield(a._versionDB(),
3);case 3:g=R.yieldResult;case 2:l=g;if(r=a.__commitDB){R.jumpTo(4);break}return R.yield(a._commitDB(),5);case 5:r=R.yieldResult;case 4:v=r;y=a;A=y.snapshotLocation;E=b;F=E.type;G=E.name;I=E.commits;M=E.history;L=E.snapshotDirs;if(!(S=!d)){R.jumpTo(6);break}return R.yield(l.get(F+"/"+G),7);case 7:S=R.yieldResult;case 6:if(S)throw Error("Import failed: object "+F+"/"+G+" already exists and overwrite is not allowed");return R.yield(Promise.all([v.setDocuments(I),l.set(F+"/"+G,M)].concat($jscomp.arrayFromIterable(L&&
m?L.map(function(aa){return aa.copyTo(A.join(aa.name()).asDirectory())}):[]))),8);case 8:return R.return(b)}})};si.prototype.importFromResource=function(b,d,m,a,g){g=void 0===g?!1:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(m.readJson(),2);case 2:r=y.yieldResult;if(!(v=g)){y.jumpTo(3);break}return y.yield(l.has(b,d),4);case 4:v=y.yieldResult;case 3:if(!v){y.jumpTo(5);break}return y.yield(l.delete(b,d,!1),5);case 5:return y.return(l.commit(b,
d,r,a))}})};si.prototype.replicateTo=function(b,d,m,a){return(new Qe.Synchronization(this,b,d,m,Object.assign({method:"replicateTo"},a))).start()};si.prototype.replicateFrom=function(b,d,m,a){return(new Qe.Synchronization(this,b,d,m,Object.assign({method:"replicateFrom"},a))).start()};si.prototype.sync=function(b,d,m,a){return(new Qe.Synchronization(this,b,d,m,Object.assign({method:"sync"},a))).start()};si.prototype.getConflicts=function(b,d){function m(A,E){var F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){return 1==
G.nextAddress?G.yield(A.getConflicts({include_docs:!0}),2):3!=G.nextAddress?(F=G.yieldResult,G.yield(Promise.all(F.map(function(I){var M,L,S,R,aa,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){if(1==Ea.nextAddress){M=I;L=M.id;S=M.rev;R=M.conflicts;aa=M.doc;if(d&&d[E]&&!d[E][L])return Ea.return(null);if(!b)return Ea.jumpTo(2);ra=R.map(function(K){return{id:L,rev:K}});return Ea.yield(A.getDocuments(ra),3)}2!=Ea.nextAddress&&(R=Ea.yieldResult);b?Qe.obj.dissoc(aa,["_conflicts"]):aa=
null;return Ea.return({id:L,rev:S,conflicts:R,kind:E,doc:aa})})})),3)):G.return(G.yieldResult.filter(Boolean))})}var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(g=a.__commitDB){A.jumpTo(2);break}return A.yield(a._commitDB(),3);case 3:g=A.yieldResult;case 2:l=g;if(r=a.__versionDB){A.jumpTo(4);break}return A.yield(a._versionDB(),5);case 5:r=A.yieldResult;case 4:return v=r,A.yield(m(v,"versions"),6);case 6:return y=A.yieldResult,A.yield(m(l,
"commits"),8);case 8:return A.yield(A.yieldResult,7);case 7:return A.return({versionConflicts:y,commitConflicts:A.yieldResult})}})};si.prototype.resolveConflict=function(b){var d=this,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:m=b;a=m.resolved;g=m.delete;l=m.kind;r=m.id;if("versions"===l){if(A=d.__versionDB){E.jumpTo(7);break}return E.yield(d._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(y=d.__commitDB){E.jumpTo(5);
break}return E.yield(d._commitDB(),6);case 6:y=E.yieldResult;case 5:v=y;E.jumpTo(3);break;case 8:A=E.yieldResult;case 7:v=A;case 3:return E.yield(v.set(r,a),9);case 9:return E.yield(Promise.all(g.map(function(F){return v.pouchdb.remove(r,F)})),0)}})};si.prototype.getDiff=function(b,d){var m=this,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La,Lb,qc,dc,oc,$c,Vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hd){switch(Hd.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Qe.Database.ensureDB(b+"-commits"),d=Qe.Database.ensureDB(b+"-version-graph"));if(g=m.__commitDB){Hd.jumpTo(2);break}return Hd.yield(m._commitDB(),3);case 3:g=Hd.yieldResult;case 2:l=g;if(r=m.__versionDB){Hd.jumpTo(4);break}return Hd.yield(m._versionDB(),5);case 5:r=Hd.yieldResult;case 4:return v=r,Hd.yield(l.diffWith(a),6);case 6:return y=Hd.yieldResult,Hd.yield(v.diffWith(d),7);case 7:return A=Hd.yieldResult,Hd.yield(Promise.all(A.inLeft.map(function(be){var ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){return 1==
Ca.nextAddress?(ha=be.id,Ca.yield(v.get(be.id),2)):Ca.return({id:ha,doc:Ca.yieldResult})})})),8);case 8:return E=Hd.yieldResult,F=Qe.arr,G=F.groupBy,Hd.yield(d.getAll(),9);case 9:return I=G.call(F,Hd.yieldResult,function(be){return be._id}),Hd.yield(Promise.all(A.inRight.map(function(be){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){return ha.return({id:be.id,doc:I[be.id]})})})),10);case 10:return M=Hd.yieldResult,Hd.yield(Promise.all(A.changed.map(function(be){var ha,Ca,Na,yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gc){return 1==
gc.nextAddress?(ha=Object,Ca=ha.assign,Na=be.left,gc.yield(v.get(be.left.id),2)):3!=gc.nextAddress?(yb=gc.yieldResult,gc.yield(d.get(be.right.id),3)):gc.return(Ca.call(ha,{},Na,{docA:yb,docB:gc.yieldResult}))})})),11);case 11:return L=Hd.yieldResult,S=Qe.arr,R=S.groupBy,Hd.yield(a.getAll(),12);case 12:aa=R.call(S,Hd.yieldResult,function(be){return be._id}),ra=[],Ea=[],K=[],Z=$jscomp.makeIterator(y.inLeft),U=Z.next();case 13:if(U.done){Hd.jumpTo(15);break}V=U.value;na=ra;la=na.push;return Hd.yield(l.get(V.id),
16);case 16:la.call(na,Hd.yieldResult);U=Z.next();Hd.jumpTo(13);break;case 15:ya=$jscomp.makeIterator(y.inRight),U=ya.next();case 17:if(U.done){Hd.jumpTo(19);break}jb=U.value;gb=Ea;ka=gb.push;return Hd.yield(aa[jb.id],20);case 20:ka.call(gb,Hd.yieldResult);U=ya.next();Hd.jumpTo(17);break;case 19:ia=$jscomp.makeIterator(y.changed),U=ia.next();case 21:if(U.done){Hd.jumpTo(23);break}qa=U.value;La=K;Lb=La.push;return Hd.yield(l.get(qa.left.id),24);case 24:return Lb.call(La,Hd.yieldResult),qc=K,dc=qc.push,
Hd.yield(a.get(qa.right.id),25);case 25:dc.call(qc,Hd.yieldResult);U=ia.next();Hd.jumpTo(21);break;case 23:return oc=ra.map(function(be){return Qe.obj.select(be,["_id","name","type"])}),$c=Ea.map(function(be){return Qe.obj.select(be,["_id","name","type"])}),Vb=K.map(function(be){return Qe.obj.select(be,["_id","name","type"])}),Hd.return({changed:L,remote:M,local:E,changedCommitTypeAndNames:Vb,remoteCommitTypeAndNames:$c,localCommitTypeAndNames:oc})}})};si.prototype.delete=function(b,d,m){m=void 0===
m?!0:m;var a=this,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){switch(Z.nextAddress){case 1:g=[];l=[];if(r=a.__commitDB){Z.jumpTo(2);break}return Z.yield(a._commitDB(),3);case 3:r=Z.yieldResult;case 2:return v=r,y={include_docs:!0,startkey:b+"\x00"+d+"\x00",endkey:b+"\x00"+d+"\uffff"},Z.yield(v.query("nameAndTimestamp_index",y),4);case 4:A=Z.yieldResult;E=A.rows;F=$jscomp.makeIterator(E);for(G=F.next();!G.done;G=F.next())M=I=G.value,L=M.doc,
L.deleted||L._deleted||!L.content||g.push(a.snapshotResourceFor(L)),l.push(Object.assign({},L,{_deleted:!0}));if(S=a.__versionDB){Z.jumpTo(5);break}return Z.yield(a._versionDB(),6);case 6:S=Z.yieldResult;case 5:return R=S,Z.yield(R.get(b+"/"+d),7);case 7:aa=Z.yieldResult;ra=aa._id;Ea=aa._rev;K={_id:ra,_rev:Ea,_deleted:!0};if(m){Z.jumpTo(8);break}return Z.yield(v.setDocuments(l),9);case 9:return Z.yield(R.setDocuments([K]),10);case 10:Promise.all(g.map(function(U){return U.remove()}));case 8:return Z.return({commits:l,
history:K,resources:g})}})};si.prototype.deleteCommit=function(b,d,m){d=void 0===d?!0:d;m=void 0===m?"HEAD":m;var a=this,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:if(b&&"string"!==typeof b){g=b;ra.jumpTo(2);break}if(!b){ra.jumpTo(2);break}if(l=a.__commitDB){ra.jumpTo(4);break}return ra.yield(a._commitDB(),5);case 5:l=ra.yieldResult;case 4:return r=l,ra.yield(r.get(b),6);case 6:g=ra.yieldResult;case 2:if(!g)throw Error("commit needed!");
if(v=a.__versionDB){ra.jumpTo(7);break}return ra.yield(a._versionDB(),8);case 8:v=ra.yieldResult;case 7:y=v;if(A=a.__commitDB){ra.jumpTo(9);break}return ra.yield(a._commitDB(),10);case 10:A=ra.yieldResult;case 9:return E=A,F=g,G=F.name,I=F.type,M=g.deleted||g._deleted||!g.content?[]:[a.snapshotResourceFor(g)],L=[Object.assign({},g,{_deleted:!0})],ra.yield(y.get(I+"/"+G),11);case 11:S=ra.yieldResult;if(!S)throw Error("No history for "+I+"/"+G+"@"+g._id);if(!S.refs[m])throw Error("Cannot delete commit "+
I+"/"+G+"@"+g._id+" b/c it is not where ref "+m+" is pointing!");R=$jscomp.makeIterator(S.history[g._id]||[]);aa=R.next().value;if(!aa&&1>=Object.keys(S.history).length)S._deleted=!0;else if(aa)delete S.history[g._id],S.refs[m]=aa;else throw Error("Cannot delete commit "+I+"/"+G+"@"+g._id+" b/c it has no ancestor but there are still other commits!");if(d){ra.jumpTo(12);break}return ra.yield(y.set(I+"/"+G,S),13);case 13:return ra.yield(E.setDocuments(L),14);case 14:return ra.yield(Promise.all(M.map(function(Ea){return Ea.remove()})),
12);case 12:return ra.return({commits:L,history:S,resources:M})}})};$jscomp.global.Object.defineProperties(si.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Qe.ObjectDB=si;var hx=function(b,
d,m,a,g){g=void 0===g?{}:g;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},g);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=d;this.remoteVersionDB=m;this.remoteLocation=a;this.deferred=Qe.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};hx.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Qe.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
hx.prototype.waitForIt=function(){return this.deferred.promise};hx.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};hx.prototype._startReplicationAndCopy=function(){function b(dc){return"paused"===qc&&"paused"===Lb&&0>=La.copyCalls&&0>=La.copyCallsWaiting?dc.state="paused":"complete"===qc&&"complete"===Lb&&La.isComplete()?dc.state="complete":dc.state="running"}function d(dc,oc){if(oc.length||
"complete"===Lb&&"complete"===qc&&La.isComplete()){V.cancel();if(oc.length){dc.state="complete";dc.errors=oc;ia.cancel();qa.cancel();var $c=Error("Synchronization error:\n  "+oc.join("\n  "));$c.errors=oc;console.log(dc+" errored")}else console.log(dc+" completed");$c?dc.deferred.reject($c):dc.deferred.resolve(dc)}}function m(dc){if(!dc.content)return null;var oc=dc.content.slice(0,2);dc=dc.content.slice(2);return oc+"/"+dc+".json"}var a=this,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,
jb,gb,ka,ia,qa,La,Lb,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){switch(dc.nextAddress){case 1:g=a;l=g.fromObjectDB;r=g.remoteCommitDB;v=g.remoteVersionDB;y=g.remoteLocation;A=g.options;E=A.debug;F=void 0===A.live?!1:A.live;G=void 0===A.retry?!1:A.retry;I=A.method;M=A.replicationFilter;L=void 0===A.pushDesignDocToRemote?!1:A.pushDesignDocToRemote;if(S=l.__versionDB){dc.jumpTo(2);break}return dc.yield(l._versionDB(),3);case 3:S=dc.yieldResult;case 2:R=S;if(aa=l.__commitDB){dc.jumpTo(4);
break}return dc.yield(l._commitDB(),5);case 5:aa=dc.yieldResult;case 4:ra=aa;Ea=l;K=Ea._commitdb_indexes;Z=Ea._versiondb_indexes;U=Ea.snapshotLocation;a.method=I;la=K.find(function(oc){return"nameTypeFilter"===oc.name});ya=Z.find(function(oc){return"nameTypeFilter"===oc.name});if(!L){dc.jumpTo(6);break}console.log("adding commitNameTypeFilter");return dc.yield(r.addDesignDoc(la),7);case 7:return console.log("adding versionNameTypeFilter"),dc.yield(v.addDesignDoc(ya),6);case 6:return jb={live:F,retry:G},
gb=Object.assign({},jb),ka=Object.assign({},jb),M&&(gb.filter=eval("("+la.filterFn+")"),gb.query_params=M,ka.filter=eval("("+ya.filterFn+")"),ka.query_params=M),ia=ra[I](r,gb),qa=R[I](v,ka),La={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},qc=Lb="not started",a.versionReplication=qa,a.commitReplication=ia,a.snapshotReplication=La,na=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
V=v.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),na.on("change",function(oc){var $c=oc.id,Vb=oc.changes;oc=oc.doc._conflicts;E&&console.log("commit changes "+$c+":",Vb,oc);oc&&(console.log("commit conflict "+$c+":",Vb,oc),a.conflicts.push({db:"commits",id:$c,changes:Vb,conflicts:oc}))}),V.on("change",function(oc){var $c=oc.id,Vb=oc.changes;oc=oc.doc._conflicts;E&&console.log("version changes "+$c+":",Vb,oc);oc&&(console.log("version conflict "+$c+":",Vb,oc),a.conflicts.push({db:"versions",
id:$c,changes:Vb,conflicts:oc}))}),ia.on("change",function(oc){var $c,Vb,Hd,be,ha,Ca,Na,yb,gc,Ud,Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cd){switch(cd.nextAddress){case 1:"replicateTo"===I?oc={direction:"push",change:oc}:"replicateFrom"===I&&(oc={direction:"pull",change:oc});$c=oc;Vb=$c.direction;Hd=$c.change;be=Hd.docs;console.log(a+" "+("push"===Vb?"send":"received")+" "+be.length+" commits");cd.setCatchFinallyBlocks(2,3);Ca=[];Na=$jscomp.makeIterator(be);for(yb=Na.next();!yb.done;yb=
Na.next())gc=yb.value,gc._id.startsWith("_")||(a.changes.push({direction:Vb,kind:"commits",id:gc._id,type:gc.type,name:gc.name}),(Ud=m(gc))&&Ca.push(Ud));La.nFilesToCopy+=Ca.length;if(!(0<La.copyCalls)){cd.jumpTo(5);break}La.copyCallsWaiting++;return cd.yield(Qe.promise.waitFor(function(){return 0>=La.copyCalls}),6);case 6:La.copyCallsWaiting--;case 5:return La.copyCalls++,b(a),console.log(a+" copying "+Ca.length+" snapshots..."),cd.yield(Qe.promise.parallel(Ca.map(function(gf){return function(){var Ze=
("push"===Vb?U:y).join(gf),ii=("push"===Vb?y:U).join(gf);return La.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+La.copyCalls+", "+Ze.url+" => "+ii.url+")"),Promise.resolve()):ii.exists().then(function(Gh){function Bj(rj){rj=void 0===rj?0:rj;return Ze.copyTo(ii).catch(function(Cj){if(5<=rj)throw Cj;return Bj(rj+1)})}return Gh?(E&&console.log("Skip copying to "+ii.url+", already exist"),Promise.resolve()):Ze.exists().then(function(rj){if(!rj)return console.warn("Skip copying "+
Ze.url+", does not exist"),Promise.resolve();E&&console.log(a+" Copying "+Ze.url+" => "+ii.url);return Bj(0).then(function(Cj){La.nFilesCopied++;La.stopped||0!==La.nFilesCopied%10||console.log(a+" copied "+La.nFilesCopied+" of "+La.nFilesToCopy+" snapshots");return Cj})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:cd.enterFinallyBlock();La.copyCalls--;b(a);d(a,ha?[ha]:[]);cd.leaveFinallyBlock(0);break;case 2:throw Td=cd.enterCatchBlock(),console.error("error in commitReplication onChange",
Td),ha=Td,Td;}})}).on("paused",function(){Lb="paused";b(a);E&&console.log(a+" commit replication paused")}).on("active",function(){Lb="active";b(a);E&&console.log(a+" commit replication active")}).on("error",function(oc){Lb="complete";b(a);console.error(a+" commit replication error",oc);d(a,[oc])}).on("complete",function(oc){Lb="complete";b(a);oc="sync"===I?oc.push.errors.concat(oc.pull.errors):oc.errors;d(a,oc)}),qa.on("change",function(oc){"replicateTo"===I?oc={direction:"push",change:oc}:"replicateFrom"===
I&&(oc={direction:"pull",change:oc});var $c=oc.direction;oc=oc.change.docs;E&&console.log(a+" "+("push"===$c?"send":"received")+" "+oc.length+" histories");oc.forEach(function(Vb){Vb._id.startsWith("_")||a.changes.push({direction:$c,kind:"versions",id:Vb._id})})}).on("paused",function(){qc="paused";b(a);E&&console.log(a+" version replication paused")}).on("active",function(oc){qc="active";b(a);E&&console.log(a+" version replication active",oc)}).on("error",function(oc){qc="complete";b(a);console.error(a+
" version replication error",oc);d(a,[oc])}).on("complete",function(oc){qc="complete";b(a);oc="sync"===I?oc.push.errors.concat(oc.pull.errors):oc.errors;d(a,oc)}),a.state="running",dc.return(a)}})};hx.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==b.state&&b.isSynchonizing?d.yield(b.whenPaused(),2):d.return(b):d.return(b.stop())})};hx.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};hx.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(hx.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(d){var m=d.direction,a=d.id,g=d.kind;if("_"!==a[0]){if("versions"===g)var l=b[m][a]||(b[m][a]=[]);else"commits"===g&&(a=d.type+"/"+d.name,l=b[m][a]||(b[m][a]=[]));
l.push(d)}});return b}}});Qe.Synchronization=hx;var YB={describe:function(b){function d(v,y){v=v.find(function(G){return G.name===y}).node.value.body;var A=v.body||[],E=(v.comments||[]).find(function(G){return G.end<A[0].start});v={name:y,parameters:[],sideEffect:!1,returns:null,description:""};if(E&&E.text.trim()){E=Qe.string.changeIndent(E.text," ",0).split("\n");E=$jscomp.makeIterator(E);for(var F=E.next();!F.done;F=E.next()){F=F.value;if(F.startsWith("ignore-in-doc")){v.description="";break}F.startsWith("side effect:")?
v.sideEffect=JSON.parse(F.split(":")[1]):F.startsWith("returns:")?v.returns=F.split(":")[1].trim():v.description+=F+"\n"}}E=$jscomp.makeIterator(A);for(F=E.next();!F.done;F=E.next())if(F=F.value,"checkArgs"===Qe.Path("declarations.0.init.callee.name").get(F)&&(F=Qe.Path("declarations.0.id.properties").get(F)))v.parameters=F.map(function(G){return G.key.name});return v}var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);
if(m._methodSpecs){v.jumpTo(4);break}return v.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=v.yieldResult,g=Qe.parse(a,{withComments:!0}),l=Qe.categorizer.findDecls(g),m._methodSpecs=l.filter(function(y){return y.parent&&"ObjectDBInterface"===y.parent.name});case 4:return v.return(b?d(m._methodSpecs,b):m._methodSpecs.map(function(y){return d(m._methodSpecs,y.name)}).filter(Boolean));case 2:return r=v.enterCatchBlock(),v.return("Error in describe "+r)}})},ensureDB:function(b){var d,
m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=Qe.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),m=d.db,a=d.snapshotLocation,l.yield(Qe.ObjectDB.find(m),2);if(g=l.yieldResult)return l.return(!1);Qe.ObjectDB.named(m,{snapshotLocation:a});return l.return(!0)})},destroyDB:function(b){var d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?(d=Qe.checkArgs(b,{db:"string"}),m=d.db,g.yield(Qe.ObjectDB.find(m),
2)):3!=g.nextAddress?(a=g.yieldResult)?g.yield(a.destroy(),3):g.return(!1):g.return(!0)})},fetchCommits:function(b){var d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z,U,V,na,la,ya,jb,gb,ka,ia,qa,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){switch(Lb.nextAddress){case 1:return d=Qe.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
m=d.db,a=d.ref,g=d.type,l=d.typesAndNames,r=d.knownCommitIds,v=d.includeDeleted,y=d.filterFn,Lb.yield(Qe.ObjectDB.find(m),2);case 2:A=Lb.yieldResult;a||(a="HEAD");if(!A)throw Error("db "+m+" does not exist");if(A.__commitDB){Lb.jumpTo(3);break}return Lb.yield(A._commitDB(),4);case 4:case 3:if(E=A.__versionDB){Lb.jumpTo(5);break}return Lb.yield(A._versionDB(),6);case 6:E=Lb.yieldResult;case 5:F=E;G={};I={};if(l)for(M=G.keys=[],L=$jscomp.makeIterator(l),S=L.next();!S.done;S=L.next())aa=R=S.value,ra=
aa.type,Ea=aa.name,K=aa.ref,M.push(ra+"/"+Ea),K&&(I[ra+"/"+Ea]=K);else g&&(G.startkey=g+'/\x00"',G.endkey=g+'/\uffff"');return Lb.yield(F.getAll(G),7);case 7:Z=Lb.yieldResult;U=[];V=$jscomp.makeIterator(Z);for(na=V.next();!na.done;na=V.next())la=na.value,la.deleted||la._deleted||(ya=la,jb=ya._id,gb=ya.refs,jb.startsWith("_")||(ka=gb[I[jb]||a]||a,!ka||r&&r.hasOwnProperty(ka)||U.push(ka)));return Lb.yield(A.getCommitsWithIds(U),8);case 8:ia=Lb.yieldResult;v||(ia=ia.filter(function(qc){return!qc.deleted}));
if(y)try{qa=eval("("+y+")");if("function"!==typeof qa)throw Error(y+" does not eval to a function!");La=ia.filter(qa);if(Array.isArray(La))ia=La;else throw Error(y+" does not return an array!");}catch(qc){console.error("fetchCommits filterFn failed:",qc)}return Lb.return(ia)}})},fetchVersionGraph:function(b){var d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string"}),m=d.db,a=d.type,g=d.name,
A.yield(Qe.ObjectDB.find(m),2);if(3!=A.nextAddress){l=A.yieldResult;if(!l)throw Error("db "+m+" does not exist");return A.yield(l.versionGraph(a,g),3)}r=A.yieldResult;v=r.refs;y=r.history;return A.return({refs:v,history:y})})},exists:function(b){var d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),m=d.db,a=d.type,g=d.name,l=d.ref,A.yield(Qe.ObjectDB.find(m),2);
if(3!=A.nextAddress)return r=A.yieldResult,A.yield(r.versionGraph(a,g),3);v=A.yieldResult;if(!v)return A.return({exists:!1,commitId:void 0});l=l||"HEAD";return(y=v.refs[l])?A.return({exists:!0,commitId:y}):A.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var d,m,a,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra,Ea,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:return d=Qe.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(V){return V.type&&V.name||V.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),m=d.db,a=d.type,g=d.name,l=d.ref,r=d.commit,v=d.limit,y=d.includeCommits,A=d.knownCommitIds,U.yield(Qe.ObjectDB.find(m),2);case 2:E=U.yieldResult;F=l||"HEAD";if(!E)throw Error("db "+m+" does not exist");v||(v=Infinity);r||l||(l=F);if(!r){U.jumpTo(3);break}G=r;if(a&&g){U.jumpTo(3);
break}return U.yield(E.getCommit(r),5);case 5:I=U.yieldResult;if(!I)throw Error("fetchLog: specified commit "+r+" but no commit with this id is in the database!");M=I;a=M.type;g=M.name;case 3:return U.yield(E.versionGraph(a,g),6);case 6:L=U.yieldResult;if(!L)throw Error("Unknown object "+a+"/"+g);S=L;R=S.refs;aa=S.history;G||(G=R[l]);ra=G;for(Ea=[];Ea.length<v&&!Ea.includes(ra);){Ea.push(ra);K=aa[ra];if(!K||!K.length)break;Z=$jscomp.makeIterator(K);ra=Z.next().value}if(!y){U.jumpTo(7);break}A&&(Ea=
Ea.filter(function(V){return!A.hasOwnProperty(V)}));return U.yield(E.getCommitsWithIds(Ea),8);case 8:Ea=U.yieldResult;case 7:return U.return(Ea)}})},fetchSnapshot:function(b){var d,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=Qe.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(F){return F.type&&F.name||F.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
m=d.db,a=d.type,g=d.name,l=d.ref,r=d.commit,E.yield(Qe.ObjectDB.find(m),2);case 2:v=E.yieldResult;l=l||"HEAD";if(!v)throw Error("db "+m+" does not exist");if(r){E.jumpTo(3);break}return E.yield(v.versionGraph(a,g),4);case 4:y=E.yieldResult;if(!y)throw Error("Unknown object "+a+"/"+g);r=y.refs[l];if(!r)throw Error("Cannot find commit for ref "+l+" of "+a+"/"+g);case 3:return E.yield(v.getCommit(r),5);case 5:A=E.yieldResult;if(!A)throw Error("Cannot find commit "+r);return E.return(v.loadSnapshot(void 0,
void 0,A))}})},revert:function(b){var d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),m=d.db,a=d.type,g=d.name,l=d.ref,r=d.toCommitId,y.yield(Qe.ObjectDB.find(m),2);v=y.yieldResult;l||(l="HEAD");return y.return(v.revert(a,g,l,r))})},commit:function(b){var d,m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),m=d.db,a=d.type,g=d.name,l=d.ref,r=d.expectedParentCommit,v=d.commitSpec,y=d.snapshot,A=d.preview,F.yield(Qe.ObjectDB.find(m),2);E=F.yieldResult;l||(l="HEAD");return F.return(E.commit(a,g,y,v,A,l,r))})},exportToSpecs:function(b){var d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d=Qe.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),m=d.db,a=d.nameAndTypes,l.yield(Qe.ObjectDB.find(m),2);g=l.yieldResult;if(!g)throw Error("db "+m+" does not exist");return l.return(g.exportToSpecs(a))})},exportToDir:function(b){var d,m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=Qe.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),m=d.db,a=d.url,g=d.nameAndTypes,l=d.copyResources,r=d.includeDeleted,A.yield(Qe.ObjectDB.find(m),2);v=A.yieldResult;if(!v)throw Error("db "+m+" does not exist");try{y=Qe.resource(a)}catch(E){y=Qe.resource(System.baseURL).join(a)}return A.return(v.exportToDir(y,g,l,r))})},importFromDir:function(b){var d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Qe.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),m=d.db,a=d.url,g=d.overwrite,l=d.copyResources,y.yield(Qe.ObjectDB.find(m),2);r=y.yieldResult;if(!r)throw Error("db "+m+" does not exist");try{v=Qe.resource(a)}catch(A){v=Qe.resource(System.baseURL).join(a)}return y.return(r.importFromDir(v,g,l))})},importFromSpecs:function(b){var d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=Qe.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
m=d.db,a=d.specs,g=d.overwrite,l=d.copyResources,v.yield(Qe.ObjectDB.find(m),2);r=v.yieldResult;if(!r)throw Error("db "+m+" does not exist");return v.return(r.importFromSpecs(a,g,l))})},importFromResource:function(b){var d,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),m=d.db,a=d.type,g=d.name,l=d.url,r=d.commitSpec,
v=d.purgeHistory,E.yield(Qe.ObjectDB.find(m),2);y=E.yieldResult;if(!y)throw Error("db "+m+" does not exist");try{A=Qe.resource(l)}catch(F){A=Qe.resource(System.baseURL).join(l)}return E.return(y.importFromResource(a,g,A,r,v))})},delete:function(b){var d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=Qe.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),m=d.db,a=d.type,g=d.name,l=d.dryRun,v.yield(Qe.ObjectDB.find(m),
2);r=v.yieldResult;return v.return(r.delete(a,g,"undefined"===typeof l||l))})},deleteCommit:function(b){var d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return d=Qe.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),m=d.db,a=d.commit,g=d.dryRun,r.yield(Qe.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.deleteCommit(a,"undefined"===typeof g||g))})},fetchConflicts:function(b){var d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return d=Qe.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),m=d.db,a=d.includeDocs,g=d.only,r.yield(Qe.ObjectDB.find(m),2);l=r.yieldResult;return r.return(l.getConflicts(a,g))})},resolveConflict:function(b){var d,m,a,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Qe.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),m=d.db,a=d.resolved,g=d.delete,l=d.kind,r=d.id,
y.yield(Qe.ObjectDB.find(m),2);v=y.yieldResult;return y.return(v.resolveConflict({resolved:a,delete:g,kind:l,id:r}))})},fetchDiff:function(b){var d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=Qe.checkArgs(b,{db:"string",otherDB:"string"}),m=d.db,a=d.otherDB,l.yield(Qe.ObjectDB.find(m),2);g=l.yieldResult;return l.return(g.getDiff(a))})},synchronize:function(b){var d,m,a,g,l,r,v,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return d=
Qe.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),m=d.db,a=d.otherDB,g=d.otherDBSnapshotLocation,l=d.onlyTypesAndNames,r=d.method,M.yield(Qe.ObjectDB.find(m),2);case 2:return g||(g=a.replace(/\/$/,"")+"/snapshots"),r||(r="replicateTo"),M.yield(Qe.ObjectDB.find(m),3);case 3:return v=M.yieldResult,M.yield(Qe.ObjectDB.named(a,{snapshotLocation:g}),4);case 4:return y=M.yieldResult,M.yield(y._commitDB(),
5);case 5:return A=M.yieldResult,M.yield(y._versionDB(),6);case 6:return E=M.yieldResult,F=y.snapshotLocation,G={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},I=v[r](A,E,F,G),M.yield(I.whenPaused(),7);case 7:return M.yield(I.safeStop(),8);case 8:return M.yield(I.waitForIt(),9);case 9:return M.return(Qe.obj.select(I,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Qe.ObjectDBInterface=YB;Qe.ObjectDBInterface=YB;Qe.ObjectDBInterface=YB;var Fk=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};Fk.prototype._processResponse=function(b){var d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return d=b.headers.get("content-type"),g.yield(b.text(),2);m=g.yieldResult;if("application/json"===d)try{a=JSON.parse(m)}catch(l){}if(!b.ok||a&&a.error)throw Error(a&&a.error||m||b.statusText);return g.return(a||m)})};Fk.prototype._GET=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==
v.nextAddress?(a=Object.keys(d).map(function(y){var A=d[y];"object"===typeof A&&(A=JSON.stringify(A));return y+"="+encodeURIComponent(A)}).join("&"),g=m.serverURL+b+"?"+a,l=m,r=l._processResponse,v.yield(fetch(g),2)):v.return(r.call(l,v.yieldResult))})};Fk.prototype._POST=function(b,d){d=void 0===d?{}:d;var m=this,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(a=m.serverURL+b,g=m,l=g._processResponse,r.yield(fetch(a,{method:"POST",body:JSON.stringify(d),
headers:{"content-type":"application/json"}}),2)):r.return(l.call(g,r.yieldResult))})};Fk.prototype.describe=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("describe",b))})};Fk.prototype.ensureDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("ensureDB",b))})};Fk.prototype.destroyDB=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("destroyDB",
b))})};Fk.prototype.fetchCommits=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchCommits",b))})};Fk.prototype.fetchVersionGraph=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchVersionGraph",b))})};Fk.prototype.exists=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("exists",b))})};Fk.prototype.fetchLog=function(b){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchLog",b))})};Fk.prototype.fetchSnapshot=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchSnapshot",b))})};Fk.prototype.revert=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("revert",b))})};Fk.prototype.commit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("commit",
b))})};Fk.prototype.exportToSpecs=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("exportToSpecs",b))})};Fk.prototype.exportToDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("exportToDir",b))})};Fk.prototype.importFromDir=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("importFromDir",b))})};Fk.prototype.importFromSpecs=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("importFromSpecs",b))})};Fk.prototype.importFromResource=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("importFromResource",b))})};Fk.prototype.delete=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("delete",b))})};Fk.prototype.deleteCommit=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("deleteCommit",
b))})};Fk.prototype.fetchConflicts=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchConflicts",b))})};Fk.prototype.resolveConflict=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("resolveConflict",b))})};Fk.prototype.fetchDiff=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._GET("fetchDiff",b))})};Fk.prototype.synchronize=
function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(d._POST("synchronize",b))})};Qe.ObjectDBHTTPInterface=Fk;Qe.default=si;var Gk=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");Gk.applyExclude=function(b,d){return d?"string"===typeof d?!b.url.includes(d):"function"===typeof d?!d(b):d instanceof RegExp?!d.test(b.url):!0:!0};Gk.Resource=gh;Gk.Database=Mh;Gk.debug=!1;Gk.slashRe=/\//g;var OW=function(){return Gk.Database.apply(this,
arguments)||this};$jscomp.inherits(OW,Gk.Database);OW.ensureDB=function(b,d){return Gk.Database.ensureDB.call(this,"lively.storage-"+b,d)};Gk.StorageDatabase=OW;var Tq=function(){return Gk.Resource.apply(this,arguments)||this};$jscomp.inherits(Tq,Gk.Resource);Tq.prototype.read=function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return Gk.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);m=(d=a.yieldResult)&&d.content;
return a.return(m?"string"===typeof m?m:JSON.stringify(m):"")})};Tq.prototype.readJson=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(b.read(),2);d=m.yieldResult;return m.return("string"===typeof d?JSON.parse(d):d)})};Tq.prototype.write=function(b){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){Gk.debug&&console.log("["+d+"] write");b||(b="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+
d.url+")");return m.yield(d.db.update(d.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var g=Date.now();return a?Object.assign({},a,{lastModified:g,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:g,created:g,size:"string"===typeof b?b.length:0,content:b}}),2)}return m.return(d)})};Tq.prototype.writeJson=function(b){return this.write(b)};Tq.prototype.mkdir=
function(){var b=this,d,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){Gk.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(d=a.yieldResult){if(!d.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}m=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:m,created:m,isDirectory:!0}),3)}return a.return(b)})};Tq.prototype.exists=function(){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return Gk.debug&&console.log("["+b+"] exists"),(d=b.isRoot())?m.jumpTo(2):m.yield(b.db.get(b.pathWithoutQuery()),3);2!=m.nextAddress&&(d=!!m.yieldResult);return m.return(d)})};Tq.prototype.remove=function(){var b=this,d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==
g.nextAddress?(Gk.debug&&console.log("["+b+"] remove"),d=b.pathWithoutQuery(),m=b.db,g.yield(m.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=g.nextAddress?(a=g.yieldResult,g.yield(m.setDocuments(a.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):g.return(b)})};Tq.prototype.readProperties=function(){Gk.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Tq.prototype.dirList=function(b,d){b=void 0===b?1:b;d=void 0===d?{}:d;var m=this,a,g,l,r,v,
y,A,E,F,G,I,M,L,S,R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==aa.nextAddress){Gk.debug&&console.log("["+m+"] dirList");if(!m.isDirectory())return aa.return(m.asDirectory().dirList(b,d));a=d;g=a.exclude;l=m.pathWithoutQuery();r=[];return aa.yield(m.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}v=aa.yieldResult;"infinity"===b&&(b=Infinity);y={};for(A=0;A<v.length;y={$jscomp$loop$prop$dirToChild$2242:y.$jscomp$loop$prop$dirToChild$2242},A++)if(F=E=v[A],G=F._id,G.startsWith(l)&&
l!==G)if(I=G.slice(l.length),M=I.includes("/")?I.match(Gk.slashRe).length+1:1,M>b)y.$jscomp$loop$prop$dirToChild$2242=m.join(I.split("/").slice(0,b).join("/")+"/"),r.some(function(ra){return function(Ea){return Ea.equals(ra.$jscomp$loop$prop$dirToChild$2242)}}(y))||r.push(y.$jscomp$loop$prop$dirToChild$2242);else if(L=m.join(I),!g||Gk.applyExclude(L,g))for(r.push(L),S="created lastModified mode group user contentType type etag size".split(" "),R=0;R<S.length;R++)L[S[R]]=E[S[R]];return aa.return(r)})};
$jscomp.global.Object.defineProperties(Tq.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=Gk.StorageDatabase.ensureDB(this.host()))}}});Gk.LivelyStorageResource=Tq;var PW={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:Gk.LivelyStorageResource};Gk.resourceExtension=PW;Gk.resourceExtension=PW;Gk.resourceExtension=PW;Gk.registerExtension=D;
Gk.registerExtension(Gk.resourceExtension);Gk.default=Tq;var Bt=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Bt.default=Mh;Bt.Database=Mh;Bt.ObjectDB=si;Bt.ObjectDBInterface=YB;Bt.ObjectDBHTTPInterface=Fk;Bt.ObjectDB=si;Bt.ObjectDB=si;Bt.ObjectDBInterface=YB;Bt.ObjectDBInterface=YB;Bt.ObjectDBHTTPInterface=Fk;Bt.ObjectDBHTTPInterface=Fk;var qua=Object.freeze({__proto__:null,Database:Mh,ObjectDB:si,ObjectDBInterface:YB,ObjectDBHTTPInterface:Fk}),Ih=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
Ih.convertToSerializableCommit=DT;Ih.ensureCommitInfo=UG;Ih.ObjectDBHTTPInterface=Fk;Ih.Database=Mh;Ih.loadMorphFromSnapshot=Pu;Ih.createMorphSnapshot=BA;Ih.resource=w;Ih.obj=Ng;Ih.Path=Ti;Ih.arr=ng;Ih.string=Li;Ih.morphicDBs=Ih.morphicDBs||(Ih.morphicDBs=new Map);Ih.defaultServerURL=("undefined"!==typeof document?document.location.origin:"http://localhost:9001")+"/objectdb/";Ih.convertToSerializableCommit=DT;Ih.convertToSerializableCommit=DT;Ih.ensureCommitInfo=UG;Ih.ensureCommitInfo=UG;var QW=function(b){var d=
lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){var l=g.snapshotLocation;g=g.serverURL;this.name=a;this.serverURL=g;this.snapshotLocation=l||a+"/snapshots/";this.httpDB=new Ih.ObjectDBHTTPInterface(g);
this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a._initialized?g.return():g.yield(a.ensureDB(),2);a._initialized=!0;g.jumpToEnd()})}},{key:"snapshotResourceFor",
value:function(a){var g=a.content.slice(0,2);a=a.content.slice(2);return Ih.resource(System.decanonicalize(this.snapshotLocation)).join(g+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,g){a=void 0===a?"world":a;g=void 0===g?!1:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return A.yield(l.initializeIfNecessary(),2);r=l;v=r.name;y={};return A.return(l.httpDB.fetchCommits({db:v,type:a,ref:"HEAD",knownCommitIds:y,includeDeleted:g}))})}},{key:"fetchCommit",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);if(3!=A.nextAddress)return v=[{type:a,name:g,ref:l}],A.yield(r.httpDB.fetchCommits({db:r.name,ref:l,type:a,typesAndNames:v,knownCommitIds:{}}),
3);y=A.yieldResult;return A.return(Ih.convertToSerializableCommit(y[0]))})}},{key:"fetchSnapshot",value:function(a,g,l,r){var v=this,y=arguments,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return A=a,1===y.length&&A.type&&A.name&&(a=A.type,g=A.name,l=A._id),G.yield(v.initializeIfNecessary(),2);E=v;F=E.name;return G.return(v.httpDB.fetchSnapshot({db:F,type:a,name:g,ref:r,commit:l}))})}},{key:"exists",value:function(a,g,l){var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;return A.return(r.httpDB.exists({db:y,type:a,name:g,ref:l}))})}},{key:"history",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchVersionGraph({db:v,type:a,name:g}))})}},{key:"log",value:function(a,g,l,r){l=void 0===l?!1:l;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){return 1==
E.nextAddress?E.yield(v.initializeIfNecessary(),2):3!=E.nextAddress?(y=v,A=y.name,E.yield(v.httpDB.fetchLog({db:A,commit:a,limit:g,includeCommits:l,knownCommitIds:r}),3)):E.return(E.yieldResult.map(Ih.convertToSerializableCommit))})}},{key:"revert",value:function(a,g,l,r){r=void 0===r?"HEAD":r;var v=this,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(v.initializeIfNecessary(),2);y=v;A=y.name;return E.return(v.httpDB.revert({db:A,type:a,name:g,
toCommitId:l,ref:r}))})}},{key:"snapshotAndCommit",value:function(a,g,l,r,v,y,A){var E=this,F,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(Ih.createMorphSnapshot(l,r),2);if(3!=I.nextAddress)return F=I.yieldResult,I.yield(E.commit(a,g,F,v,y,A),3);G=I.yieldResult;G=Ih.convertToSerializableCommit(G);l.changeMetaData("commit",Ih.obj.dissoc(G,["preview"]),!0,!1);return I.return(G)})}},{key:"commit",value:function(a,g,l,r,v,y){var A=this,E=arguments,
F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return F=a,1===E.length&&F.type&&F.name&&(a=F.type,g=F.name,l=F.snapshot||F.content,r=Ih.obj.dissoc(F,["snapshot","_rev","_id","ancestors","deleted"]),y=F._id),M.yield(A.initializeIfNecessary(),2);G=A;I=G.name;return M.return(A.httpDB.commit({db:I,type:a,name:g,ref:v,expectedParentCommit:y,commitSpec:r,snapshot:l}))})}},{key:"load",value:function(a,g,l,r,v){var y=this,A,E,F,G,I,M,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:"object"===
typeof a?r=a:A=a;E=r;if(!E)return S.yield(y.fetchCommit(A,g,v),6);if("string"!==typeof E){S.jumpTo(3);break}F=$jscomp;G=F.makeIterator;return S.yield(y.log(E,1,!0),5);case 5:I=G.call(F,S.yieldResult);E=I.next().value;S.jumpTo(3);break;case 6:E=S.yieldResult;case 3:return S.yield(y.fetchSnapshot(void 0,void 0,E._id),7);case 7:return M=S.yieldResult,S.yield(Ih.loadMorphFromSnapshot(M,l),8);case 8:return L=S.yieldResult,E=Ih.convertToSerializableCommit(E),L.changeMetaData("commit",Ih.obj.dissoc(E,["preview"]),
!0,!1),S.return(L)}})}},{key:"fetchDiff",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.fetchDiff({db:r,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.fetchConflicts({db:v,
includeDocs:a,only:g}))})}},{key:"resolveConflict",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(g.initializeIfNecessary(),2);l=g;r=l.name;return v.return(g.httpDB.resolveConflict(Object.assign({db:r},a)))})}},{key:"synchronize",value:function(a){var g=a.method,l=a.otherDB,r=a.otherDBSnapshotLocation,v=a.onlyTypesAndNames,y=this,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(y.initializeIfNecessary(),
2);A=y;E=A.name;return F.return(y.httpDB.synchronize({db:E,method:g,otherDB:l,otherDBSnapshotLocation:r,onlyTypesAndNames:v}))})}},{key:"softDelete",value:function(a,g,l,r,v){var y=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return A.return(y.commit(a,g,void 0,l,r,v))})}},{key:"delete",value:function(a,g,l){l=void 0===l?!0:l;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(r.initializeIfNecessary(),2);v=r;y=v.name;
return A.return(r.httpDB.delete({db:y,type:a,name:g,dryRun:l}))})}},{key:"deleteCommit",value:function(a,g){g=void 0===g?!0:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(l.initializeIfNecessary(),2);r=l;v=r.name;return y.return(l.httpDB.deleteCommit({db:v,commit:a,dryRun:g}))})}},{key:"codeSearchInPackages",value:function(a,g,l,r){g=void 0===g?"part":g;var v=this,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return L.yield(v.latestCommits(g),
2);case 2:y=L.yieldResult,A=[],E=0,"function"===typeof r&&(y=y.filter(r)),F=$jscomp.makeIterator(y),G=F.next();case 3:if(G.done){L.jumpTo(5);break}I=G.value;"function"===typeof l&&l(I.name,E++,y.length);return L.yield(v._textSearchInSnapshotOfCommit(a,I),6);case 6:M=L.yieldResult;M.length&&A.push.apply(A,$jscomp.arrayFromIterable(M));G=F.next();L.jumpTo(3);break;case 5:return L.return(A)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,g,l){var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return v=g,y=v._id,(A=l)?F.jumpTo(2):F.yield(r.fetchSnapshot(void 0,void 0,y),3);2!=F.nextAddress&&(A=F.yieldResult);E=A;return F.return((new Ih.SnapshotPackageHelper(E)).textSearch(a,g))})}}],[{key:"className",get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:Ih.defaultServerURL})}},{key:"named",value:function(a,g){var l=Ih.morphicDBs.get(a);if(l)return l;if(!g.serverURL)throw Error("Needs serverURL!");
g=new this(a,g);Ih.morphicDBs.set(a,g);return g}},{key:"wellKnownMorphicDBs",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g=Ih.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),v.yield(g.getAll(),2);l=v.yieldResult;r=l.reduce(function(y,A){var E={};return Object.assign(y,(E[A._id]=a.named(A.name,{serverURL:A.serverURL,snapshotLocation:A.snapshotLocation}),E))},{});r.default||(r.default=a.default);return v.return(r)})}},
{key:"addWellKnownMorphicDB",value:function(a,g){var l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){l=g;r=l.name;v=l.snapshotLocation;y=l.serverURL;A=Ih.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return E.yield(A.set(a,{name:r,snapshotLocation:v,serverURL:y}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g=Ih.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");
return l.yield(g.remove(a),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1381,end:9965})}(void 0);QW=Ih.MorphicDB;var ix=Ba("Y",QW),qO=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),m=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===
typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,g){var l=a&&a instanceof RegExp,r=[];if(!a)return r;for(var v={},y=$jscomp.makeIterator(this.filesInPackages()),A=y.next();!A.done;v={$jscomp$loop$prop$file$2244:v.$jscomp$loop$prop$file$2244},
A=y.next()){v.$jscomp$loop$prop$file$2244=A.value;A=v.$jscomp$loop$prop$file$2244.get(this.snapshot);var E=Ih.string.lineIndexComputer(A),F=Ih.string.lineRanges(A);if(l)A=Ih.string.reMatches(A,a),A.length&&r.push.apply(r,$jscomp.arrayFromIterable(A.map(function(aa){return function(ra){return Object.assign(ra,{commit:g,file:aa.$jscomp$loop$prop$file$2244})}}(v))));else for(var G=0,I=0;0<=(G=A.indexOf(a));){var M=G+I,L=M+a.length,S=E(M),R=A.slice.apply(A,$jscomp.arrayFromIterable(F[S]));r.push({match:a,
start:M,end:L,length:a.length,line:S,lineString:R,commit:g,file:v.$jscomp$loop$prop$file$2244});I+=G+a.length;A=A.slice(G+a.length)}}return r}},{key:"filesInPackages",value:function(){function a(r,v,y,A,E){E=void 0===E?[]:E;if(r["package.json"]&&"string"===typeof r["package.json"])try{var F=JSON.parse(r["package.json"]);A={url:y,path:v,name:F.name||Ih.arr.last(v)}}catch(I){}F=[];for(var G in r)"string"===typeof r[G]?E.push({path:v.concat(G),url:Ih.string.joinPath(y,G),package:A,get:function(I){return Ih.Path(this.path).get(I.packages)},
set:function(I,M){Ih.Path(this.path).set(I.packages,M)}}):F.push(G);F.forEach(function(I){return a(r[I],v.concat(I),Ih.string.joinPath(y,I),A,E)});return E}var g=[],l;for(l in this.snapshot.packages)a(this.snapshot.packages[l],[l],l,null,g);return g}}],[{key:"className",get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9975,end:12984})}(void 0);Ih.SnapshotPackageHelper=qO;Ih.SnapshotPackageHelper=qO;Ih.SnapshotPackageHelper=qO;Ih.default=QW;var Kf=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Kf.arr=ng;Kf.properties=Uo;Kf.Path=Ti;Kf.promise=xh;Kf.obj=Ng;Kf.registerExtension=D;Kf.Resource=gh;Kf.resource=w;Kf.pt=th;Kf.MorphicDB=ix;Kf.ObjectPool=hk;Kf.normalizeOptions=fo;Kf.deserializeMorph=XF;Kf.loadPackagesAndModulesOfSnapshot=
YF;Kf.subscribeOnce=function(b,d,m){hA(m).emitter.once(b,d);return d};var rO=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=d.hasOwnProperty("ComponentPolicy")&&"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.derivedMorph=
a;this._overriddenProps=new WeakMap;if(g.isMorph||"string"==typeof g)this.auto=g,"string"==typeof g&&(this.auto.isComponent=!0);else{a=g.click;var l=g.auto,r=g.hover,v=void 0===g.light?{}:g.light;g=void 0===g.dark?{}:g.dark;v&&(this.light=v);g&&(this.dark=g);a&&(this.click=a);l&&(this.auto=l);r&&(this.hover=r);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return Kf.obj.select(this,["auto","click",
"hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;for(var g=$jscomp.makeIterator(["auto","click","hover"]),l=g.next();!l.done;l=g.next())if(l=l.value,"string"==typeof a[l]){if(this.getResourceUrlFor(this[l])!=a[l])return!1}else if((this[l]||null)!=(a[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,g=[];this.derivedMorph.withAllSubmorphsDo(function(l){a.managesMorph(l)&&0<Object.keys(a._overriddenProps.get(l)).filter(function(r){return"_rev"!=
r}).length&&g.push([l,Object.keys(a._overriddenProps.get(l))])});return g}},{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Kf.obj.isEmpty(this.dark)&&a.push("dark");Kf.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__additionally_serialize__",value:function(a,g,l,r){this.auto&&r("auto",this.getResourceUrlFor(this.auto));this.click&&r("click",this.getResourceUrlFor(this.click));this.hover&&r("hover",this.getResourceUrlFor(this.hover))}},
{key:"__after_deserialize__",value:function(a,g){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return 1==g.nextAddress?g.yield(a._hasUnresolvedMaster,2):3!=g.nextAddress?g.yield(Kf.promise.waitFor(1E3,function(){return a._appliedMaster}),3):g.return(!0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url:
void 0==a.name?null:"styleguide://"+Kf.Path("metadata.commit.name").get($world)+"/"+a.name:null}},{key:"resolveMasterComponents",value:function(){var a=this,g,l,r,v,y,A,E,F,G,I,M,L,S,R,aa,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:g=Kf.promise.deferred(),a._hasUnresolvedMaster=g.promise,l=a,r=void 0===l.light?{}:l.light,v=void 0===l.dark?{}:l.dark,y=["auto","click","hover"],A=[],Ea.setCatchFinallyBlocks(2),E=$jscomp.makeIterator(y),F=E.next();
case 4:if(F.done){Ea.leaveTryBlock(3);break}G=F.value;if("string"!=typeof a[G]){Ea.jumpTo(7);break}I=a;M=G;return Ea.yield(Kf.resource(a[G]).read(),8);case 8:I[M]=Ea.yieldResult;case 7:if("string"!=typeof r[G]){Ea.jumpTo(9);break}L=r;S=G;return Ea.yield(Kf.resource(r[G]).read(),10);case 10:L[S]=Ea.yieldResult;case 9:if("string"!=typeof v[G]){Ea.jumpTo(11);break}R=v;aa=G;return Ea.yield(Kf.resource(v[G]).read(),12);case 12:R[aa]=Ea.yieldResult;case 11:A.push(a[G],r[G],v[G]);F=E.next();Ea.jumpTo(4);
break;case 2:throw ra=Ea.enterCatchBlock(),Error("Encountered invalid master component reference: "+ra.message);case 3:Kf.arr.compact(A).forEach(function(K){K.isComponent||(K.isComponent=!0)}),g.resolve(),a._hasUnresolvedMaster=!1,Ea.jumpToEnd()}})}},{key:"applyIfNeeded",value:function(a){var g=this;a=void 0===a?!1:a;if(this._hasUnresolvedMaster)return this._originalOpacity=this.derivedMorph.opacity,this.derivedMorph.withMetaDo({metaInteraction:!0},function(){[g.derivedMorph].concat($jscomp.arrayFromIterable(g.derivedMorph.ownerChain())).find(function(v){return v.isComponent})||
(g.derivedMorph.opacity=0)}),this._hasUnresolvedMaster.then(function(){g.applyIfNeeded(a);g.derivedMorph.withMetaDo({metaInteraction:!0},function(){g.derivedMorph.opacity=g._originalOpacity});delete g._originalOpacity;delete g._capturedExtents});var l=this.derivedMorph,r=this.determineMaster(l);r&&this._appliedMaster!=r&&(a=!0);a&&(this.apply(l,r),this._appliedMaster=r)}},{key:"apply",value:function(a,g){var l=this;if(!this._applying){this._applying=!0;try{a.dontRecordChangesWhile(function(){l.prepareSubmorphsToBeManaged(a,
g);g.withAllSubmorphsDoExcluding(function(r){var v=r==g,y=v?a:a.getSubmorphNamed(r.name);if(y)if(r.master&&!v)y.master=r.master.spec(),y._requestMasterStyling=!0,l._overriddenProps.get(y).position||(y.position=r.position),l._overriddenProps.get(y).extent||(y.extent=r.extent);else{v=$jscomp.makeIterator(r.styleProperties);for(var A=v.next();!A.done;A=v.next())if(A=A.value,!l._overriddenProps.get(y)[A])if("layout"==A)y.layout&&r.layout&&y.layout.name()==r.layout.name()&&y.layout.equals(r.layout)||(y.layout=
r.layout?r.layout.copy():void 0);else{if(r==g){if("extent"==A&&!y.extent.equals(Kf.pt(10,10))&&(!y.owner||y.owner.isWorld||y.ownerChain().find(function(E){return E.master&&E.master.managesMorph(y)})))continue;if("position"==A)continue}y.isLabel&&"extent"==A||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(A)||(Kf.obj.equals(y[A],r[A])||(y[A]=r[A]),["fixedHeight","fixedWidth"].includes(A)&&y._parametrizedProps&&y._parametrizedProps.extent&&(y.extent=y._parametrizedProps.extent))}y._parametrizedProps&&
delete y._parametrizedProps;l.reconcileSubmorphs(y,r)}},function(r){return g!=r&&r.master})})}finally{this._applying=!1,delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,g){var l=this._overriddenProps.get(a);this._overriddenProps.set(a,Kf.obj.dissoc(l,g))}},{key:"prepareSubmorphsToBeManaged",value:function(a,g){var l=this;g.withAllSubmorphsDoExcluding(function(r){(r=r==g?a:a.getSubmorphNamed(r.name))&&l.prepareMorphToBeManaged(r)},function(r){return r!=g&&r.master})}},
{key:"reconcileSubmorphs",value:function(a,g){}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},{key:"propsToSerializeForMorph",value:function(a,g){if(!this.managesMorph(a))return g;for(var l=[],r=$jscomp.makeIterator(a.styleProperties),v=r.next();!v.done;v=r.next())v=v.value,this._overriddenProps.get(a)[v]||!("position"==v&&a==this.derivedMorph||"extent"==v&&a==this.derivedMorph)&&l.push(v);return Kf.arr.withoutAll(g,l)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var g=
{},l;for(l in a._parametrizedProps)"__takenFromSnapshot__"!=l&&(g[l]=!0);this._overriddenProps.set(a,g)}}},{key:"determineMaster",value:function(a){var g=a.env.world.colorScheme,l=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var r=this.getMasterForState(this,{isHovered:l,isClicked:a});this.light&&"light"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||r);this.dark&&"dark"==g&&(r=this.getMasterForState(this.light,{isHovered:l,isClicked:a})||
r);return r}},{key:"getMasterForState",value:function(a,g){var l=a.hover,r=a.click,v=g.isClicked;a=a.auto;if(g.isHovered)if(l)a=l;else for(g=a&&a.master;g;){if(g.hover){a=g.hover;break}g=g.auto}if(v)if(r)a=r;else for(r=a&&a.master;r;){if(r.click){a=r.click;break}r=r.auto}return a}},{key:"onMorphChange",value:function(a,g){if(!this._applying&&!Kf.Path("meta.metaInteraction").get(g)&&!["_rev","name","master"].includes(g.prop)&&("opacity"==g.prop&&delete this._originalOpacity,a.styleProperties.includes(g.prop)))if(this.managesMorph(a)){if(!a.master||
a.master==this||["extent","position"].includes(g.prop))this._overriddenProps.get(a)[g.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[g.prop]=g.value;else{var l={};a._parametrizedProps=(l[g.prop]=g.value,l)}}}],[{key:"className",get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,g){g=g.constructor===Kf.ComponentPolicy?g:new this(a,g);a.master&&(g._overriddenProps=a.master._overriddenProps);return g}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1144,end:16520})}(void 0);Kf.ComponentPolicy=rO;Kf.ComponentPolicy=rO;Kf.ComponentPolicy=rO;Kf.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Kf.fetchedSnapshots=Kf.fetchedSnapshots||{};Kf.objectPools=Kf.objectPools||{};Kf.resolvedMasters=Kf.resolvedMasters||{};Kf.modulesToLoad=Kf.modulesToLoad||{};Kf.li=Kf.li||void 0;Kf.localNamePromise=Kf.localNamePromise||
void 0;Kf.masterComponentFetches=Kf.masterComponentFetches||{};(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:d.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=
this.url.match(Kf.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(Kf.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();var g=a.next().value;a.next();return g}},{key:"dirList",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return l.worldName==$world.metadata.commit.name?v.return($world.withAllSubmorphsSelect(function(y){return y.isComponent})):(r=Kf.resolvedMasters[l.worldName])?
v.return(Object.values(r)):v.return([])})}},{key:"localWorldName",value:function(){var a;if(a=Kf.Path("metadata.commit.name").get($world))return a;if(Kf.localNamePromise)return Kf.localNamePromise;a=Kf.promise.deferred();var g=a.resolve;Kf.localNamePromise=a.promise;if("__newWorld__"==Kf.resource(document.location.href).query().name)return g("__newWorld__"),Kf.localNamePromise;Kf.subscribeOnce("world/loaded",function(){g(Kf.Path("metadata.commit.name").get($world))},System);return Kf.localNamePromise}},
{key:"fetchFromMasterDir",value:function(a,g){var l=a.join(this.worldName).join(g+".json");if(Kf.masterComponentFetches[l.url])return Kf.masterComponentFetches[l.url];Kf.masterComponentFetches[l.url]=function(){var r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?(r=Kf,v=r.deserializeMorph,y.yield(l.readJson(),2)):y.return(v.call(r,y.yieldResult))})}();return Kf.masterComponentFetches[l.url]}},{key:"read",value:function(){var a=this,g,l,r,v,y,A,E,F,G,I,M,
L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:g=a.componentName;if(l=Kf.Path([a.worldName,a.componentName]).get(Kf.resolvedMasters))return R.return(l);if(!lively.FreezerRuntime){R.jumpTo(2);break}r=Kf.resource(window.location);r.isFile()&&(r=r.parent());v=r.join("masters/");return R.yield(a.fetchFromMasterDir(v,g),3);case 3:l=R.yieldResult;case 2:if(lively.FreezerRuntime){R.jumpTo(4);break}Kf.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",
a.worldName),A=Kf.promise.deferred(),y=A.resolve,Kf.fetchedSnapshots[a.worldName]=A.promise);return R.yield(a.localWorldName(),5);case 5:if(R.yieldResult==a.worldName){l="undefined"!==typeof $world&&$world.getSubmorphNamed(g);if(!l)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');return R.return(l)}return y?(F=Kf.MorphicDB.default,R.yield(F.exists("world",a.worldName),9)):R.yield(Kf.fetchedSnapshots[a.worldName],8);case 8:E=R.yieldResult;R.jumpTo(7);break;case 9:if(R.yieldResult.exists)return R.yield(F.fetchSnapshot("world",
a.worldName),15);G=Kf.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+".json");return R.yield(G.exists(),12);case 12:if(!R.yieldResult){y(null);R.jumpTo(11);break}return R.yield(G.readJson(),14);case 14:E=R.yieldResult;R.jumpTo(11);break;case 15:E=R.yieldResult;case 11:return R.yield(Kf.loadPackagesAndModulesOfSnapshot(E),16);case 16:y(E);case 7:I=new Kf.ObjectPool(Kf.normalizeOptions({}));M=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(aa){aa=$jscomp.makeIterator(aa);
aa.next();aa=aa.next().value;return Kf.Path("props.isComponent.value").get(aa)&&Kf.Path("props.name.value").get(aa)==g})||[]);L=M.next().value;if(!L)throw Error('Master component "'+g+'" can not be found in "'+a.worldName+'"');l=I.resolveFromSnapshotAndId(Object.assign({},E,{id:L}));case 4:return Kf.resolvedMasters[a.worldName]?Kf.resolvedMasters[a.worldName][g]=l:(S={},Kf.resolvedMasters[a.worldName]=(S[g]=l,S)),l._resourceHandle=a,R.yield(Promise.all(l.withAllSubmorphsSelect(function(aa){return aa.master}).map(function(aa){return aa.master.applyIfNeeded(!0)})),
17);case 17:return R.return(Promise.resolve(l))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return l.return(g&&g.isComponent)})}},{key:"remove",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(g=
"undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))g.isComponent=!1;return l.return(!0)})}}],[{key:"className",get:function(){return"StyleGuideResource"}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:20095,end:24895})})(Kf.Resource);var RW={name:"styleguide",matches:function(b){return b.match(Kf.styleGuideURLRe)},
resourceClass:Kf.StyleGuideResource};Kf.resourceExtension=RW;Kf.resourceExtension=RW;Kf.resourceExtension=RW;Kf.registerExtension(Kf.resourceExtension);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),m=d.hasOwnProperty("StyleGuide")&&"function"===typeof d.StyleGuide?d.StyleGuide:d.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,void 0,void 0,d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25080,end:25569})})(void 0);var Lc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");Lc.generateUnfolded=function(b,d,m){d=void 0===d?["top","left","right","bottom"]:d;m=void 0===m?"core":m;var a={},g={};d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;g={$jscomp$loop$prop$m$1115$2247:g.$jscomp$loop$prop$m$1115$2247},
l=d.next())g.$jscomp$loop$prop$m$1115$2247=l.value,a[b+Lc.string.capitalize(g.$jscomp$loop$prop$m$1115$2247)]={group:m,derived:!0,generated:!0,after:[b],get:function(r){return function(){return this.getProperty(b)[r.$jscomp$loop$prop$m$1115$2247]}}(g),set:function(r){return function(v){var y={};this[b]=Object.assign({},this.getProperty(b),(y[r.$jscomp$loop$prop$m$1115$2247]=v,y))}}(g)};return a};Lc.Color=Tg;Lc.Line=pn;Lc.Point=Yg;Lc.pt=th;Lc.rect=Gl;Lc.Rectangle=Re;Lc.Transform=il;Lc.string=Li;Lc.properties=
Uo;Lc.obj=Ng;Lc.arr=ng;Lc.num=sm;Lc.promise=xh;Lc.tree=hu;Lc.PropertyPath=Ti;Lc.signal=xf;Lc.copy=Pp;Lc.deserializeSpec=Bk;Lc.ExpressionSerializer=lo;Lc.serializeSpec=rk;Lc.getClassName=Jp;Lc.renderRootMorph=fD;Lc.ShadowObject=ds;Lc.AnimationQueue=YM;Lc.easings=Pq;Lc.addOrChangeCSSDeclaration=zj;Lc.Icon=op;Lc.morph=ab;Lc.newMorphId=Ab;Lc.MorphicEnv=Yr;Lc.config=am;Lc.CommandHandler=$oa;Lc.KeyHandler=wV;Lc.findKeysForPlatform=Ec;Lc.TargetScript=xV;Lc.copyMorph=uK;Lc.ComponentPolicy=rO;Lc.defaultCommandHandler=
new Lc.CommandHandler;var Ol=Ba("ag",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var g=a.env||Lc.MorphicEnv.default();this._env=g;this._rev=g.changeManager.revision;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=Lc.newMorphId(Lc.getClassName(this));this._animationQueue=new Lc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Lc.obj.select(a,Lc.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||
void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,g,l,r){this._env=Lc.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=g.id;this._animationQueue=new Lc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=
[];this._tickingScripts=[];this._parametrizedProps=Lc.obj.select(a.props,Lc.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=r.expressionSerializer;for(var v in this._parametrizedProps)(g=this._parametrizedProps[v].value)&&Lc.obj.isString(g)&&a.isSerializedExpression(g)&&(this._parametrizedProps[v]=a.deserializeExpr(g));this.initializeProperties()}},{key:"__after_deserialize__",value:function(a){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(g){console.error("[lively.morphic] "+
this+".onLoad() error: "+g.stack)}}},{key:"__only_serialize__",get:function(){var a=this.defaultProperties,g=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var r=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(A){return A.__isBeingSerialized__&&A.master}).find(Boolean),v;for(v in g){var y=g[v];r&&r.managesMorph(this)&&void 0!=r._overriddenProps.get(this)[v]?
l.push(v):y.readOnly||y.derived||Lc.obj.equals(this[v],a[v])||y.hasOwnProperty("serialize")&&!y.serialize||l.push(v)}return r&&!this.isComponent?r.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(a,g,l,r){if((g=a.props.submorphs)&&!this.isEpiMorph)for(g=g.value,r=g.length;r--;)l.refForId(g[r].id).realObj.isEpiMorph&&Lc.arr.removeAt(g,r);l=$jscomp.makeIterator(Lc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));
for(g=l.next();!g.done;g=l.next())g=g.value,a.props[g]={key:g,verbatim:!0,value:Lc.obj.extract(this[g],["top","right","bottom","left"],function(v,y){return y&&y.isColor?y.toTuple():y})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,g){a=void 0===a?!0:a;g=void 0===g?new WeakMap:g;var l=this.defaultProperties,r=this.propertiesAndPropertySettings().properties,v={submorphs:!0},y={};if(g.has(this))return g.get(this);
g.set(this,y);for(var A in r){var E=r[A];E&&(E.readOnly||E.derived||E.hasOwnProperty("serialize")&&!E.serialize||A in v||a&&(Lc.obj.equals(this[A],l[A])||this[A]&&l[A]&&this[A].valueOf&&l[A].valueOf&&Lc.obj.equals(this[A].valueOf(),l[A].valueOf()))||(y[A]=this[A]&&this[A].isMorph?this[A].spec(a,g):this[A]&&"layout"===A?this[A].copy():this[A]))}y.submorphs=this.submorphs.map(function(F){return F.spec(a,g)});y.type=this.constructor;return y}},{key:"printSpec",value:function(a,g){g=void 0===g?0:g;a=
(void 0===a?null:a)||this.spec();var l={name:!0,type:!0,submorphs:!0},r="  ".repeat(g+1),v="  ".repeat(g)+"{\n"+(r+'name: "'+a.name+'",\n')+(r+'type: "'+a.type+'",\n'),y;for(y in a)l[y]||(v+=""+r+y+": "+Lc.string.print(a[y])+",\n");if(a.submorphs){v+=r+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(l=a.next();!l.done;l=a.next())v+=this.printSpec(l.value,g+1);v+="]\n"}return v+="  ".repeat(g)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,g=a[Symbol.for("lively-instance-superclass")];
if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(g&&g._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};g=this.propertiesAndPropertySettings().properties;for(var l in g){var r=g[l];r.hasOwnProperty("defaultValue")&&(r=r.defaultValue,Array.isArray(r)&&(r=r.slice()),a[l]=r)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},
{key:"setProperty",value:function(a,g,l){return this.addValueChange(a,g,l)}},{key:"changeMetaData",value:function(a,g,l,r){l=void 0===l?!0:l;r=void 0===r?!0:r;var v=this.metadata;v||(v={});(new Lc.PropertyPath(a)).withParentAndKeyDo(v,!0,function(y,A){y[A]=r?Object.assign({},y[A],{},g):g;var E=y.__dont_serialize__;l?E&&E.includes(A)&&(Lc.arr.remove(E,A),0===E.length&&delete y.__dont_serialize__):(E||(E=y.__dont_serialize__=[]),Lc.arr.pushIfNotIncluded(E,A))});this.metadata=v}},{key:"installFont",
value:function(a,g){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[a]=g,l));this.insertFontCSS(a,g)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,g){a=$jscomp.makeIterator(a);for(var l=a.next();!l.done;l=a.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();g=$jscomp.makeIterator(g);for(l=g.next();!l.done;l=g.next())a=l.value,this.insertFontCSS(a,
this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(l.whenRendered(),2);g.endsWith(".otf")?Lc.addOrChangeCSSDeclaration(l.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+l.installedFonts[a]+'") format("opentype");\n         }'):Lc.addOrChangeCSSDeclaration(l.id+"-"+a,'@import url("'+l.installedFonts[a]+'");');r.jumpToEnd()})}},{key:"toString",
value:function(){return"<"+Lc.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:Lc.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},g={},l=this.propertiesAndPropertySettings().properties,r=[],
v;for(v in l)a[v]||l[v].derived&&!l[v].showInInspector||(g[v]=!0,r.push({key:v,value:this[v]}));r.push({key:"id",value:this.id});r.push({key:"owner",value:this.owner});r=r.sort(function(A,E){A=A.key.toLowerCase();E=E.key.toLowerCase();return A<E?-1:A===E?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),v=l.next();!v.done;v=l.next())v=v.value,a["$$"+v.sourceAttrName,""+v.sourceAttrName]=!0;Object.assign(g,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=a.next();!l.done;l=a.next())l=l.value,l in this&&(g[l]=!0,r.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var y in this)!g[y]&&this.hasOwnProperty(y)&&r.unshift({key:y,value:this[y],keyString:"[UNKNOWN PROPERTY] "+y});return{sort:!1,includeDefault:!1,properties:r}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,g,l,r){var v=this.world();r=Object.assign({maxLines:7},r);return v?v.setStatusMessageFor(this,
a,g,l,r):console.log(a)}},{key:"showError",value:function(a){var g=this.world();return g?g.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var g=this,l=a.meta&&a.meta.animation,r=a.prop,v=a.value;if("position"===r||"rotation"===r||"scale"===r||"origin"===r||"reactsToPointer"===r)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[r]=v,l));else if("extent"==r)this.onBoundsChanged(this.bounds());else"layout"==r&&(l?v&&v.attachAnimated(l.duration,this,l.easing):
v&&v.attach());this.layout&&this.layout.onChange(a);this.isComponent&&(r=this.world(),(r?r.withAllSubmorphsSelect(function(y){return y.master&&y.master.uses(g)}):[]).forEach(function(y){y.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var g=this;Lc.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(l){Lc.signal(g,l,a.partNamed(l))})}},{key:"onSubmorphChange",
value:function(a,g){var l=this;if(this.isComponent&&!a.meta.metaInteraction&&!a.meta.layoutAction){var r=this.world();r&&r.withAllSubmorphsDo(function(v){v.master&&v.master.uses(l)&&v.requestMasterStyling()})}if(this.master)this.master.onMorphChange(g,a);this.layout&&this.layout.onSubmorphChange(g,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,a)}},{key:"addValueChange",value:function(a,g,l){return this.env.changeManager.addValueChange(this,
a,g,l)}},{key:"addMethodCallChangeDoing",value:function(a,g){return this.env.changeManager.addMethodCallChangeDoing(a,this,g)}},{key:"groupChangesWhile",value:function(a,g){return this.env.changeManager.groupChangesWhile(this,a,g)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,g){return this.env.changeManager.recordChangesWhile(a,g)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,
a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,g){return this.env.changeManager.doWithValueChangeMeta(a,this,g)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g._animationQueue.registerAnimation(a),g._animationQueue.animationsActive?l?r.yield(l.asPromise(),3):r.jumpTo(2):(l&&l.finish(),r.return(Promise.resolve(g)))):2!=r.nextAddress?r.return(r.yieldResult):r.return(Promise.resolve(g))})}},{key:"withAnimationDo",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=l.groupChangesWhile(!1,a);v=r.changes;return y.yield(Promise.all(Object.values(Lc.arr.groupBy(v,
function(A){return A.target.id})).map(function(A){var E=Object.assign({},g),F;A.forEach(function(G){F=G.target;G.reverseApply();E[G.prop]=G.value});return F.animate(E)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},{key:"scrollBounds",value:function(){var a=this.scroll,g=this.scrollExtent;return new Lc.Rectangle(a.x,
a.y,g.x,g.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},{key:"addStyleClass",value:function(a){this.styleClasses=Lc.arr.uniq(this.styleClasses.concat(a))}},
{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(g){return g!=a})}},{key:"adjustOrigin",value:function(a){var g=this.origin,l=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(v){return v.position=v.position.subPt(a.subPt(g))});var r=this.globalBounds().topLeft();l=l.subPt(r);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},
{key:"innerBounds",value:function(){var a=this.extent;return Lc.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var g=this.origin.negated().extent(this.extent);g=a?this.transformRectToMorph(a,g):this.getGlobalTransform().transformRectToRect(g);this.isClip()||this.submorphs.forEach(function(l){g=g.union(l.relativeBounds(a))});return g}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();
return this.submorphs.map(function(g){g=g.bounds();return Lc.rect(g.x/a.width,g.y/a.height,g.width/a.width,g.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=Lc.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(g){return g.bounds()}).reduce(function(g,l){return g.union(l)})}},{key:"fitToSubmorphs",value:function(a){a=void 0===a?Lc.Rectangle.inset(0):
a;var g=this.submorphs;if(g.length){g=g.reduce(function(v,y){return v.union(y.bounds())},g[0].bounds());var l=g.top()-a.top(),r=g.left()-a.left();this.moveBy(Lc.pt(r,l));Lc.arr.invoke(this.submorphs,"moveBy",Lc.pt(-r,-l));this.extent=Lc.pt(g.width+a.left()+a.right(),g.height+a.top()+a.bottom())}}},{key:"align",value:function(a,g){return this.moveBy(g.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},
{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,g,l){l=void 0===l?!0:l;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),a;var r=this.owner,v=this.submorphs,
y=this.getTransform().copy();g="number"===typeof g?g:r?r.submorphs.indexOf(this):-1;var A=a.owner,E=Lc.arr.without(a.submorphs,this),F=a.getTransform().copy(),G=A?A.submorphs.indexOf(a):-1;r&&this.remove();A&&a.remove();l&&(this.submorphs=[],a.submorphs=[]);r===a?(A&&A.addMorphAt(this,G),l&&(this.submorphs=E.slice(0,g).concat(a).concat(E.slice(g)),a.submorphs=v)):(r&&r.addMorphAt(a,g),A&&A.addMorphAt(this,G),l&&(a.submorphs=v,this.submorphs=E));a.setTransform(y);this.setTransform(F);return a}},{key:"addMorphAt",
value:function(a,g){var l=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=Lc.morph(a));var r=this.submorphs.indexOf(a);if(!(-1<r&&r===g))return this.addMethodCallChangeDoing({target:this,
selector:"addMorphAt",args:[a,g],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var v=a.owner,y=l.submorphs;if(v&&v!==l){var A=a.transformForNewOwner(l);a.remove()}a._env!==l._env&&(a._env=l._env);g=Math.min(y.length,Math.max(0,g));-1<r&&(y.splice(r,1),r<g&&g--);y.splice(g,0,a);a._owner=l;a._cachedPaths={};A&&a.setTransform(A);a.requestStyling();l._morphicState.submorphs=y;l._submorphOrderChanged=!0;l.makeDirty();a.resumeSteppingAll();a.withAllSubmorphsDo(function(E){return E.onOwnerChanged(l)});
l.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,g){var l=this.submorphs;g=g?l.indexOf(g):-1;return this.addMorphAt(a,-1===g?l.length:g)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var g=this.submorphs.indexOf(a);-1!==g&&((this.getProperty("submorphs")||[]).splice(g,1),this.addMethodCallChangeDoing({target:this,
selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,g]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=Lc.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(g){g._stylingVisitor&&g._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths={};this._pathDependants.forEach(function(g){return g._cachedPaths={}});this._pathDependants=
[];this.withAllSubmorphsDo(function(g){return g.onOwnerChanged(null)});return this}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:a,easing:Lc.easings.outQuad}),2);g.remove();g.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){g.opacity=
0;g.animate({opacity:1,duration:a});return l.return(g)})}},{key:"fadeIntoWorld",value:function(a,g){a=void 0===a?$world.visibleBounds().center():a;g=void 0===g?200:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return r=new Lc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:Lc.Color.transparent}),v=l.env.world,r.openInWorld(),r.addMorph(l),l.position=r.extent.scaleBy(.5),r.center=a,r.scale=.8,A.yield(r.animate({opacity:1,scale:1,
duration:g}),2);y=l.globalBounds();v.addMorph(l);l.top=y.top();l.left=y.left();r.remove();return A.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&Lc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var g=$jscomp.makeIterator(this.submorphs),l=g.next();!l.done;l=g.next())if(l=
l.value.withAllSubmorphsDetect(a))return l}},{key:"withAllSubmorphsDoExcluding",value:function(a,g){var l=[a(this)];if(g(this))return l;for(var r=$jscomp.makeIterator(this.submorphs),v=r.next();!v.done;v=r.next())Lc.arr.pushAll(l,v.value.withAllSubmorphsDoExcluding(a,g));return l}},{key:"withAllSubmorphsDo",value:function(a){for(var g=[a(this)],l=$jscomp.makeIterator(this.submorphs),r=l.next();!r.done;r=l.next())Lc.arr.pushAll(g,r.value.withAllSubmorphsDo(a));return g}},{key:"withAllSubmorphsSelect",
value:function(a){var g=[];this.withAllSubmorphsDo(function(l){return a(l)&&g.push(l)});return g}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return this;this.center=a;
this.setBounds(g.visibleBounds().insetBy(50).translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var g=a.firstHand?a.firstHand.position:Lc.pt(0,0);return a?this.openInWorldNear(g):void 0}},{key:"openInWorld",value:function(a,g){g=g||this.world()||this.env.world;if(!g)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=g.visibleBounds().center(),
this.snap());g.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=Lc.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,Lc.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",value:function(a,
g){g||(g=[]);if(!this.fullContainsWorldPoint(a))return g;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(a,g);this.innerBoundsContainsWorldPoint(a)&&g.push(this);return g}},{key:"morphBeneath",value:function(a){var g=this.world()||this.owner;if(!g)return null;a=g.morphsContainingPoint(a);g=a.indexOf(this);return a[g+1]}},{key:"transformTillMorph",value:function(a,g){if("down"==(void 0===g?"up":g))return a.transformTillMorph(this,"up").inverse();g=new Lc.Transform;
for(var l=this;l&&l!=a;l=l.owner){var r=l,v=r.origin;r=r.scroll;0===v.x&&0===v.y||g.preConcatenate(new Lc.Transform(l.origin));g.preConcatenate(l.getTransform());l!=this&&(0===r.x&&0===r.y||!l.owner||g.preConcatenate(new Lc.Transform(r.negated())));l.hasFixedPosition&&l.owner&&g.preConcatenate(new Lc.Transform(l.owner.scroll))}return g}},{key:"localize",value:function(a){var g=this.world(),l=a.x,r=a.y;return g?g.transformPointToMorph(this,Lc.pt(l,r)):a}},{key:"worldPoint",value:function(a){var g=
this.world(),l=a.x,r=a.y;return g?this.transformPointToMorph(g,Lc.pt(l,r)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var g=this.getGlobalTransform(),l=a.getGlobalTransform().inverse();g.preConcatenate(l);l=a.scroll;0===l.x&&0===l.y||!a.owner||g.preConcatenate(new Lc.Transform(l));return g}},{key:"transformPointToMorph",value:function(a,g){for(var l=this.hasFixedPosition,r=$jscomp.makeIterator(this.pathToMorph(a)),v=r.next();!v.done;v=r.next()){var y=$jscomp.makeIterator(v.value);
v=y.next().value;y=y.next().value;this!=y&&"up"==v&&(g.x-=y.scroll.x,g.y-=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x+=y.owner.scroll.x,g.y+=y.owner.scroll.y));this.applyTransform(v,y,g);this!=y&&"down"==v&&(g.x+=y.scroll.x,g.y+=y.scroll.y,y.hasFixedPosition&&(l=y.owner&&y.owner.isWorld),y.hasFixedPosition&&y.owner&&y.owner.owner&&(g.x-=y.owner.scroll.x,g.y-=y.owner.scroll.y))}l&&a.isWorld&&(g.x=g.x-a.position.x+a.scroll.x,g.y=g.y-a.position.y+
a.scroll.y);l&&this.isWorld&&(g.x=g.x+this.position.x-this.scroll.x,g.y=g.y+this.position.y-this.scroll.y);return g}},{key:"transformRectToMorph",value:function(a,g){var l=this,r,v,y;[r=g.topLeft(),v=g.topRight(),y=g.bottomRight(),g=g.bottomLeft()].forEach(function(A){return l.transformPointToMorph(a,A)});return Lc.Rectangle.unionPts([r,v,y,g])}},{key:"applyTransform",value:function(a,g,l){"up"==a?(l.x+=g.origin.x,l.y+=g.origin.y,l.matrixTransform(g.getTransform(),l)):(l.matrixTransform(g.getInverseTransform(),
l),l.x-=g.origin.x,l.y-=g.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var g;if(g=this._cachedPaths[a.id])return g;g=this.closestCommonAncestor(a)||this;var l=this,r=[],v=[];for(g._addPathDependant(this);l&&l!=g;)v.push(["up",l]),l._addPathDependant(this),l=l.owner;for(l=a;l&&l!=g;)r.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[a.id]=g=[].concat($jscomp.arrayFromIterable(v),
$jscomp.arrayFromIterable(r.reverse()))}},{key:"closestCommonAncestor",value:function(a){return Lc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new Lc.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,g){var l=a.x;a=a.y;try{return g.transformPointToMorph(this,Lc.pt(l,a))}catch(r){return console.warn("problem "+r+" in localizePointFrom"),
Lc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(Lc.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var g=this.globalBounds();a=a.innerBounds().translateForInclusion(g).topLeft().subPt(g.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||
this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var g=a.position,l=a.scale,r=a.origin,v=a.rotation;a=this._transform||new Lc.Transform;var y=this._invTransform||new Lc.Transform;g=g||this.position;r=r||this.origin;l=l||this.scale;v=v||this.rotation;a.a=l*Math.cos(v);a.b=l*Math.sin(v);a.c=l*-Math.sin(v);a.d=l*Math.cos(v);a.e=a.a*
-r.x+a.c*-r.y+g.x;a.f=a.b*-r.x+a.d*-r.y+g.y;g=a.a;l=a.b;r=a.c;v=a.d;var A=a.e,E=a.f,F=1/(g*v-r*l);y.a=v*F;y.b=-l*F;y.c=-r*F;y.d=g*F;y.e=(r*E-A*v)*F;y.f=-(g*E-l*A)*F;this._transform=a;this._invTransform=y}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=Lc.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},
{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(g){if(g.constructor==
RangeError&&"Maximum call stack size exceeded"==g.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+g.stack);throw g;}}},{key:"getNameTest",value:function(a,g){if(Lc.obj.isRegExp(g)){if(g.test(a.name)||g.test(String(a)))return!0}else if(a.name===
g||String(a)===g)return!0;return!1}},{key:"getAllNamed",value:function(a,g){g=void 0===g?[]:g;if(!this._morphicState||!this.submorphs.length)return g;for(var l=0;l<this.submorphs.length;l++){var r=this.submorphs[l];this.getNameTest(r,a)&&g.push(r)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(a,g);return g}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var g=0;g<this.submorphs.length;g++){var l=this.submorphs[g];if(this.getNameTest(l,
a))return l}for(g=0;g<this.submorphs.length;g++)if(l=this.submorphs[g].getSubmorphNamed(a))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(g){return g.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(g){return g.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var g=this.owner;if(!g)return null;if(g.name===a)return g;for(var l=0;l<g.submorphs.length;l++){var r=
g.submorphs[l];if(r!==this&&(this.getNameTest(r,a)||(r=r.getSubmorphNamed(a))))return r}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(g){return a===g.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){this===a.targetMorph&&(a.state.clickedMorph=this);this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",value:function(a){}},{key:"addKeyBindings",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){g._keybindings||
(g._keybindings=[]);g._cachedKeyhandlers=null;g._keybindings.unshift.apply(g._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[Lc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(g,
l){var r=Lc.findKeysForPlatform(l.keys,a),v=l.command,y="string"===typeof v?v:v.command||v.name;return"string"!==typeof r?g:r.split("|").reduce(function(A,E){var F={};return Object.assign(A,(F[E]={name:y,command:v,prettyKeys:Lc.KeyHandler.prettyCombo(E)},F))},g)},{})}},{key:"keysForCommand",value:function(a,g){g=void 0===g?!0:g;var l=this.keyCommandMap,r=Object.keys(l).find(function(v){return l[v].name===a});return r&&g?l[r].prettyKeys:r}},{key:"simulateKeys",value:function(a){return Lc.KeyHandler.simulateKeys(this,
a)}},{key:"onKeyDown",value:function(a){Lc.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var g=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems()).then(function(l){return g.openMenu(l,a)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(a,g){var l=this.world();return a&&a.length&&l?l.openWorldMenu(g,a):null}},{key:"menuItems",value:function(){return this.world().defaultMenuItems(this)}},
{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var g=a.state;this.position=g.dragStartMorphPosition.addPt(g.absDragDelta);$world.execCommand("show and snap to guides",
{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var g=this.copy();g.position=this.transformPointToMorph(a.hand,Lc.pt(0,0));a.hand.grab(g)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,
g){g.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",
value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return Lc.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var g=this;this._env=a.env||a._env||Lc.MorphicEnv.default();this._rev=0;this._owner=
null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||Lc.newMorphId(Lc.getClassName(this));this._animationQueue=new Lc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){g.initializeProperties();Lc.deserializeSpec(a,function(l){return Lc.morph(l)},g)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();Lc.tree.prewalk(a,function(g){return g._id=Lc.newMorphId(g.type)},
function(g){return g.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(g,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return Lc.morph({type:a.type}).initFromJSON(a)}},{key:"copy",value:function(){return Lc.copyMorph(this)}},{key:"interactivelyPublish",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return g=a.world()||a.env.world,A.setCatchFinallyBlocks(2),A.yield(System.import("lively.morphic/partsbin.js"),
4);case 4:return l=A.yieldResult,r=l.interactivelySavePart,A.yield(r(a,{notifications:!1,loadingIndicator:!0}),5);case 5:v=A.yieldResult;g.setStatusMessage(v?"Published "+a+" as "+v.name:"Failed to publish part "+a,v?Lc.Color.green:Lc.Color.red);A.leaveTryBlock(0);break;case 2:y=A.enterCatchBlock(),"canceled"!=y&&g.showError(y),A.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",
value:function(a){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();
this.layout&&!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(g){return a.master._capturedExtents.set(g,g.extent)})),this.master&&(this._requestMasterStyling=!0),this.makeDirty())}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var g=this;this.dontRecordChangesWhile(function(){g.applyLayoutIfNeeded()});return Lc.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,g){a=void 0===a?{}:a;g=void 0===g?this.env.renderer:g;return g.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),g="number"===typeof a[0]?a.shift():null,l=a.shift();a=new Lc.TargetScript(this,l,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(g);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){Lc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var g=this._tickingScripts.filter(function(l){return l.selector===a});this.stopScripts(g)}},{key:"stopScripts",value:function(a){Lc.arr.invoke(a,"stop");this._tickingScripts=Lc.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&Lc.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){Lc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return Lc.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(g){return g.equals(a)}))}},{key:"commands",get:function(){return this._commands||
[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return Lc.arr.flatmap([this].concat(this.ownerChain()),function(a){return Lc.arr.sortByKey(a.commands,"name").map(function(g){return{target:a,command:g}})})}},{key:"addCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){g.removeCommands(a);
g._commands=(g._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var g=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var l=a.map(function(v){return"string"===typeof v?v:v.name}),r=(g._commands||[]).filter(function(v){return!l.includes(v.name)});r.length?g._commands=r:delete g._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||Lc.defaultCommandHandler}},
{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,g,l,r){return this.commandHandler.exec(a,this,g,l,r)}}],[{key:"className",get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},defaultSetter:function(a,g){this.setProperty(a,g)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",
initialize:function(a){a||(a=Lc.getClassName(this),a=(Lc.string.startsWithVowel(a)?"an":"a")+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||(this.setProperty("master",a?Lc.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},
draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",
isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new Lc.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!Lc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Lc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Lc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Lc.pt(10,10),set:function(a){var g=this.extent;this.setProperty("extent",a);this.origin.equals(Lc.pt(0,
0))||(a=Lc.pt(a.x/g.x,a.y/g.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=Lc.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=Lc.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(Lc.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(Lc.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(Lc.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(Lc.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:Lc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var g=this,l=this.layout,r=l&&l.isEnabled();r&&l.disable();this.submorphs.forEach(function(v){return a.includes(v)||v.remove()});a.forEach(function(v,y){return g.submorphs[y]!==v&&g.addMorph(v,g.submorphs[y])});r&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=Lc.pt(0,0))}},scroll:{group:"geometry",defaultValue:Lc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var g=a.x;a=a.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),r=l.y;g=Math.max(0,Math.min(l.x,g));a=Math.max(0,Math.min(r,a));this.setProperty("scroll",Lc.pt(g,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:Lc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",Lc.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){Lc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},Lc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);Lc.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},Lc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Lc.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},Lc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:Lc.Color.white,left:Lc.Color.white,bottom:Lc.Color.white,right:Lc.Color.white,valueOf:function(){return Lc.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=Lc.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?Lc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Lc.obj.isArray(l)?Lc.Color.fromTuple(l):l}):a)}}},Lc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(g){a.borderStyle=g},get width(){return a.borderWidth},set width(g){a.borderWidth=g},get color(){return a.borderColor},set color(g){a.borderColor=g},get borderRadius(){return a.borderRadius},set borderRadius(g){a.borderRadius=g}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),g=a.properties,l=[];a=$jscomp.makeIterator(a.order);for(var r=a.next();!r.done;r=a.next())r=r.value,g[r].isStyleProp&&l.push(r);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,g={},l=0;l<a.length;l++){var r=a[l];g[r]=this[r]}return g}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var g=Lc.arr.without(Lc.obj.keys(this.installedFonts||
{}),"_rev"),l=Lc.arr.without(Lc.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(g,l)},get:function(){return this.getProperty("installedFonts")||{}}},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,g=[];a&&a!==Object;)g.push(a.className),a=a[Symbol.for("lively-instance-superclass")];return this._styleClasses=g}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1640,end:78680})}(void 0));Lc.Morph=Ol;Lc.Morph=Ol;Lc.Morph=Ol;var ZB=Ba("ak",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?d.Ellipse:d.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(m,b,void 0,[{key:"className",get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},
set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:78690,end:79439})}(Lc.Morph));Lc.Ellipse=ZB;Lc.Ellipse=ZB;Lc.Ellipse=ZB;var GE=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
m=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?d.Triangle:d.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||
"fill"==a.prop&&a.value)&&this.update();hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,g=a.x;a=a.y;g!=a&&(this.extent=Lc.pt(Math.max(g,a),Math.max(g,a)));this.origin=Lc.pt(g/2,a/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;g={width:g/2,style:"solid",color:l};a={width:a/2,style:"solid",color:Lc.Color.transparent};switch(this.direction){case "down":var r="borderLeft";var v="borderRight";var y="borderTop";
break;case "up":r="borderLeft";v="borderRight";y="borderBottom";break;case "left":r="borderBottom";v="borderTop";y="borderRight";break;case "right":r="borderBottom",v="borderTop",y="borderLeft"}l={};Object.assign(this,(l[r]=a,l[v]=a,l[y]=g,l))}}],[{key:"className",get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:79448,end:80863})}(Lc.Morph);Lc.Triangle=GE;Lc.Triangle=GE;Lc.Triangle=GE;var qz=Ba("I",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("Image")&&"function"===typeof d.Image?d.Image:d.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(m,b,[{key:"__deserialize__",value:function(a,g,l,r){this._isDeserializing=!0;hc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r)}},{key:"__after_deserialize__",value:function(a,g){delete this._isDeserializing;hc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=
a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,g){var l=this;g=void 0===g?this.autoResize:g;var r=this.autoResize;this.autoResize=g;this.imageUrl=a;return Lc.promise.finally(this.whenLoaded(),function(){return l.autoResize=r})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(g,l){var r=a.imageUrl;a.imageElement(function(v){a.imageUrl!==
r&&l(Error("url changed ("+r+" => "+a.imageUrl+")"));a.naturalExtent=Lc.pt(v.width,v.height);a.isLoaded=!0;g(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
!1)}},{key:"imageElement",value:function(a){var g=this;return new Promise(function(l,r){var v=g.env.domEnv.document.createElement("img");v.onload=function(){l(v);"function"===typeof a&&a(v)};v.src=g.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=a.env.domEnv.document,y.yield(a.imageElement(),2);l=y.yieldResult;r=g.createElement("canvas");v=r.getContext("2d");r.width=l.width;
r.height=l.height;v.drawImage(l,0,0,l.width,l.height);return y.return({canvas:r,ctx:v,image:l})})}},{key:"imageData",value:function(a){var g=this,l,r,v,y,A,E,F,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.canvasElementAndContext(),2);l=I.yieldResult;r=l.ctx;v=l.image;a||(a=Lc.rect(0,0,v.width,v.height));y=a;A=y.x;E=y.y;F=y.width;G=y.height;console.log(A,E);return I.return(r.getImageData(A,E,F,G))})}},{key:"pixelAt",value:function(a){var g=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(g.imageData(a.extent(Lc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(l=Lc.Color,r=l.fromTuple8Bit,v.yield(g.pixelAt(a),2)):v.return(r.call(l,v.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,g){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=
(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return g=a.imageUrl,l=g.slice(g.lastIndexOf(".")+1,g.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(l)||(l="gif"),g.startsWith("http")||(g=location.origin+"/"+g),F.yield(System.import("lively.ide/shell/shell-interface"),
2);if(3!=F.nextAddress)return r=F.yieldResult,v=r.runCommand,y='curl --silent "'+g+'" | openssl base64',F.yield(v(y).whenDone(),3);A=F.yieldResult;E=A.stdout;return F.return(a.loadUrl("data:image/"+l+";base64,"+E,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var g=this.name||"image-from-lively";var l=a.match(/image\/([^;]+)/);l&&l[1]&&(g+="."+l[1])}else g||(g=Lc.arr.last(a.split("/")));l=document.createElement("a");l.download=g;l.href=a;l.click()}},
{key:"convertTo",value:function(a,g){g||(g=1);var l=this.canvasElementAndContext(),r=l.ctx,v=l.canvas;l=l.image;var y=this.width,A=this.height;v.width=l.width;v.height=l.height;r.drawImage(l,0,0,y,A);return this.loadUrl(v.toDataURL(a,g),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,g,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return L.yield(a.canvasElementAndContext(),2);g=L.yieldResult;l=g.ctx;r=g.canvas;v=g.image;y=
a;A=y.width;E=y.height;F=v;G=F.width;I=F.height;r.width=G;r.height=I;l.drawImage(v,0,0,A,E);M=l.getImageData(0,0,G,I);r.width=A;r.height=E;l.putImageData(M,0,0);return L.return(a.loadUrl(r.toDataURL(),!1))})}},{key:"crop",value:function(a){var g=this.canvasElementAndContext(),l=g.ctx,r=g.canvas;g=g.image;var v=this.innerBounds(),y=g.width,A=g.height;a=v.intersection(a);a=new Lc.Rectangle(a.x/v.width,a.y/v.height,a.width/v.width,a.height/v.height);a=$jscomp.makeIterator((new Lc.Rectangle(0,0,y,A)).divide([a])).next().value;
r.width=y;r.height=A;l.drawImage(g,0,0,y,A);g=l.getImageData(a.x,a.y,a.width,a.height);r.width=a.width;r.height=a.height;l.putImageData(g,0,0);return this.loadUrl(r.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("Enter image url",{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);g=l.yieldResult;
"string"===typeof g&&(a.imageUrl=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=hc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){return a.extent=
a.naturalExtent}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return g}}],[{key:"className",get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var g=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var l=this.autoResize&&
!this._isDeserializing;this.whenLoaded().then(function(){g.imageUrl===a&&(g.isLoaded=!0,l&&(g.extent=g.naturalExtent))})}},fill:{defaultValue:Lc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:80872,end:90077})}(Lc.Morph));Lc.Image=qz;Lc.Image=qz;Lc.Image=qz;var hI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("PathPoint")&&"function"===typeof d.PathPoint?d.PathPoint:d.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){g=void 0===g?{}:g;this.path=
a;this._isSmooth=g.isSmooth||!1;this.x=g.position?g.position.x:g.x||0;this.y=g.position?g.position.y:g.y||0;this._controlPoints=g.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",
get:function(){return Lc.pt(this.x,this.y)}},{key:"position",set:function(a){var g=a.y;this.x=a.x;this.y=g;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);return this}},{key:"copy",value:function(){var a=new Lc.ExpressionSerializer;return new Lc.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+
this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:Lc.pt(0,0),previous:Lc.pt(0,0)}}},{key:"controlPoints",set:function(a){var g=a=void 0===a?{}:a;a=g.next;g=g.previous;this._controlPoints={next:a?Lc.Point.fromLiteral(a):
Lc.pt(0,0),previous:g?Lc.Point.fromLiteral(g):Lc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",a)}},{key:"moveControlPoint",value:function(a,g){var l=this.controlPoints[a];l=l?l.addPt(g):g;g="next"==a?"previous":"next";var r=this.controlPoints[g];this.isSmooth&&(r=l.negated().normalized().scaleBy(r.r()));var v={};this.controlPoints=(v[a]=l,v[g]=r,v);
this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,g,l,r){a=Lc.pt(a.x,a.y);g=Lc.pt(g.x,g.y);a=g.subPt(a);var v=a.scaleBy(1/a.r());l=g.subPt(l).dotProduct(v);return g.subPt(v.scaleBy(Math.max(1,Math.min(l,a.r())))).addXY(r,r)}},{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"adaptControlPoints",value:function(a){var g=this.nextVertex,l=this.previousVertex,r=this.position,v=this.path,
y=v.vertices,A=y.indexOf(this),E=0===A;y=A===y.length-1;l=l?l.position:r;g=g?g.position:r;a?(a=this.pointOnLine(l,g,r,v.borderWidth),this.controlPoints={previous:E?Lc.pt(0,0):a.subPt(g),next:a.subPt(l)}):this.controlPoints={previous:E?Lc.pt(0,0):l.subPt(r).scaleBy(.5),next:y?Lc.pt(0,0):g.subPt(r).scaleBy(.5)};v.onVertexChanged(this)}}],[{key:"className",get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:90086,end:93804})}(void 0);Lc.PathPoint=hI;Lc.PathPoint=hI;Lc.PathPoint=hI;var $B=Ba("aw",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("Path")&&"function"===typeof d.Path?d.Path:d.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},Lc.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,g){hc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g);this.updateBounds(this.vertices)}},
{key:"__additionally_serialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);g=this.getProperty("draggable");g!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:g});if(g=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:g.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",
Lc.getClassName(g)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var g=this.origin,l=this.extent,r=g.x/l.x;l=g.y/l.y;var v=[];a.forEach(function(A,
E){var F=A.isSmooth,G=A.position,I=A.controlPoints||{};A=I.next;I=I.previous;v.push(G);F&&0<E&&E<a.length-1&&v.push(G.addPt(A),G.addPt(I))});g=Lc.Rectangle.unionPts(v);r=Lc.pt(g.width*r,g.height*l);var y=g.topLeft();a.forEach(function(A){return A.moveBy(y.negated())});this.moveBy(this.getTransform().transformDirection(y));this.extent=g.extent().maxPt(Lc.pt(this.borderWidth,this.borderWidth));this.origin=r;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var g=a.prop,l=a.value,r=a.prevValue,
v=this._adjustingVertices,y=this._adjustingOrigin;"extent"==g&&l&&r&&!v&&this.adjustVertices(l.scaleByPt(r.inverted()));(!y&&"vertices"===g||"borderWidthLeft"===g)&&this.updateBounds("vertices"==g?l:this.vertices);v||"origin"!==g||this.updateBounds(this.vertices);hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+
1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var g=this,l=this.vertices;l&&l.forEach(function(r){var v=r.controlPoints,y=v.next;v=v.previous;y=y.scaleByPt(a);v=v.scaleByPt(a);r.position=r.position.addPt(g.origin).scaleByPt(a).subPt(g.origin);r.controlPoints={next:y,previous:v}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var g=this.origin;this.vertices.forEach(function(l){return l.position=g.subPt(a).addXY(l.x,l.y)});hc._get(Object.getPrototypeOf(m.prototype),
"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",value:function(a,g){g=void 0===g?null:g;var l=this.vertices;g="number"===typeof g?g:g&&g.isPathPoint?l.indexOf(g):void 0;"number"===typeof g&&-1<g?l.splice(g,0,a):l.push(a);this.vertices=l}},{key:"addVertexCloseTo",value:function(a){var g=this.verticesCloseTo(a),l=g.closest,r=l.length;l=l.vertex;g=g.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=r?l:g?g.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},
{key:"_pathNode",get:function(){var a=Lc.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+Lc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,g){g=void 0===g?!0:g;for(var l=this.vertices,r=Infinity,v=-1,y=0;y<l.length;y++){var A=l[y].position.dist(a);A>=r||(r=A,v=y)}a=0===v?null:{index:v-1,vertex:l[v-1]};r=v===l.length-1?null:{index:v+1,vertex:l[v+1]};l={index:v,vertex:l[v]};g&&(g=this._pathNode,a&&(v=this.findClosestPointOnPath(a.vertex.position,
6,3,g).length,a.length=v),r&&(v=this.findClosestPointOnPath(r.vertex.position,6,3,g).length,r.length=v),g=this.findClosestPointOnPath(l.vertex.position,20,3,g).length,l.length=g);return{previous:a,next:r,closest:l}}},{key:"findClosestPointOnPath",value:function(a,g,l,r){function v(y,A,E,F,G,I,M){E=void 0===E?10:E;F=void 0===F?3:F;G=void 0===G?0:G;I=void 0===I?y.getTotalLength():I;M=void 0===M?0:M;var L=I,S=E;I=[];var R=(G-L)/(S-1),aa=0;I.push([Lc.Point.ensure(y.getPointAtLength(L)),L,aa]);for(aa=
1;aa<S-1;aa++){var ra=L+aa*R;I.push([Lc.Point.ensure(y.getPointAtLength(ra)),ra,aa])}I.push([Lc.Point.ensure(y.getPointAtLength(G)),G,aa]);G=Infinity;L=-1;S=$jscomp.makeIterator(I);for(R=S.next();!R.done;R=S.next())aa=$jscomp.makeIterator(R.value),R=aa.next().value,aa.next(),aa=aa.next().value,R=A.dist(R),R>=G||(G=R,L=aa);if(M>=F)return A=$jscomp.makeIterator(I[L]),y=A.next().value,A=A.next().value,{point:y,length:A};G=I[Math.max(0,L-1)][1];I=I[Math.min(I.length-1,L+1)][1];return v(y,A,E,F,G,I,M+
1)}r||(r=(r=this.env.renderer.getNodeForMorph(this))&&r.querySelector("#svg"+Lc.string.regExpEscape(this.id)));return r?v(r,a,g,l):{length:0,point:a}}},{key:"onDragStart",value:function(a){var g=a.domEvt.target,l=(new Lc.PropertyPath("attributes.class.value")).get(g);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),a=l.next().value,l=l.next().value,this._controlPointDrag={marker:g,n:Number(a)},void 0!==l&&(this._controlPointDrag.ctrlN=
Number(l));else return hc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return hc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);var g=this._controlPointDrag,l=g.n,r=g.ctrlN,v=this.vertices;if(g=v[l])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===r?(g.moveBy(a),a=v[l-1],v=v[l+1],a&&10>a.position.dist(g.position)?this._controlPointDrag.maybeMerge=[l-1,l]:v&&10>v.position.dist(g.position)?
this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===r?g.movePreviousControlPoint(a):2===r&&g.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var g=this._controlPointDrag;if(g&&(g=g.maybeMerge,delete this._controlPointDrag,g)){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;a[g].controlPoints.next=a[l].controlPoints.next;a.splice(l,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),
"onMouseDown",this).call(this,a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,g=Lc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=Lc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";g[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?g:l),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
g:l),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(hc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return Lc.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||Lc.pt(0,0);return Lc.pt(a.x,a.y)}}],[{key:"className",get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,type:"ColorGradient",
foldable:["top","left","right","bottom"],set:function(a){a||(a=Lc.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",Lc.obj.extract(a,["top","left","right","bottom"],function(g,l){return Lc.obj.isArray(l)?Lc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var g=this,l=this.isSmooth;this._adjustingVertices=!0;a=a.map(function(r){return r.isPathPoint?
Object.assign(r,{path:g}):new Lc.PathPoint(g,Object.assign({isSmooth:l},r))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||
this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(g){return g.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:93813,end:107114})}(Lc.Morph));Lc.Path=$B;Lc.Path=$B;Lc.Path=$B;var HE=Ba("ax",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)hc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:"className",get:function(){return"Polygon"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107123,end:107377})}(Lc.Path));
Lc.Polygon=HE;Lc.Polygon=HE;Lc.Polygon=HE;var IE=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),m=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,g=this.height,
l=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,g,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:"className",get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},fill:{defaultValue:Lc.Color.black},height:{defaultValue:1},line:{defaultValue:Lc.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],
get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var g=a.subPt(this.start),l=this.rotation;this.line=new Lc.Line(a,this.end.addPt(g));this.rotation=l}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:107386,end:108827})}(Lc.Morph);Lc.LineMorph=IE;Lc.LineMorph=IE;Lc.LineMorph=IE;for(var rua=Object.freeze({__proto__:null,Morph:Ol,Ellipse:ZB,Triangle:GE,Image:qz,PathPoint:hI,Path:$B,Polygon:HE,LineMorph:IE}),Jba={},Kba=!1,SW="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ET={},u7=!1,Oka="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,x7={},w7=!1,GT={},y7=!1,FT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,HT={},z7=!1,Oy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,PL={},A7=!1,QL={},C7=!1,jo={},D7=!1,IT={},F7=!1,ko="undefined"!==typeof self?self:global,JT={},G7=!1,Wr="undefined"!==typeof self?self:global,KT={},I7=!1,Qi="undefined"!==typeof self?self:global,Py={},J7=!1,LT={},K7=!1,WG={},L7=!1,tf="undefined"!==typeof self?
self:global,MT={},M7=!1,Jj="undefined"!==typeof self?self:global,XG={},O7=!1,fv=[],ms=[],sua="undefined"!=typeof Uint8Array?Uint8Array:Array,JE=0;64>JE;++JE)fv[JE]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[JE],ms["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(JE)]=JE;ms[45]=62;ms[95]=63;var ZD=Ba("bk",{}),RT={byteLength:function(b){b=P7(b);var d=b[1];return 3*(b[0]+d)/4-d},toByteArray:function(b){var d=P7(b);var m=d[0];d=d[1];var a=new sua(3*
(m+d)/4-d),g=0,l=0<d?m-4:m;for(m=0;m<l;m+=4){var r=ms[b.charCodeAt(m)]<<18|ms[b.charCodeAt(m+1)]<<12|ms[b.charCodeAt(m+2)]<<6|ms[b.charCodeAt(m+3)];a[g++]=r>>16&255;a[g++]=r>>8&255;a[g++]=255&r}2===d&&(r=ms[b.charCodeAt(m)]<<2|ms[b.charCodeAt(m+1)]>>4,a[g++]=255&r);1===d&&(r=ms[b.charCodeAt(m)]<<10|ms[b.charCodeAt(m+1)]<<4|ms[b.charCodeAt(m+2)]>>2,a[g++]=r>>8&255,a[g++]=255&r);return a},fromByteArray:function(b){for(var d,m=b.length,a=m%3,g=[],l=0,r=m-a;l<r;l+=16383)g.push(Xka(b,l,l+16383>r?r:l+16383));
1===a?(d=b[m-1],g.push(fv[d>>2]+fv[d<<4&63]+"==")):2===a&&(d=(b[m-2]<<8)+b[m-1],g.push(fv[d>>10]+fv[d>>4&63]+fv[d<<2&63]+"="));return g.join("")}},YD={read:function(b,d,m,a,g){var l=8*g-a-1;var r=(1<<l)-1,v=r>>1,y=-7;g=m?g-1:0;var A=m?-1:1,E=b[d+g];g+=A;m=E&(1<<-y)-1;E>>=-y;for(y+=l;0<y;m=256*m+b[d+g],g+=A,y-=8);l=m&(1<<-y)-1;m>>=-y;for(y+=a;0<y;l=256*l+b[d+g],g+=A,y-=8);if(0===m)m=1-v;else{if(m===r)return l?NaN:1/0*(E?-1:1);l+=Math.pow(2,a);m-=v}return(E?-1:1)*l*Math.pow(2,m-a)},write:function(b,
d,m,a,g,l){var r,v,y,A=8*l-g-1,E=(1<<A)-1,F=E>>1,G=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=a?0:l-1;a=a?1:-1;var I=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);for(isNaN(d)||d===1/0?(v=isNaN(d)?1:0,r=E):(r=Math.floor(Math.log(d)/Math.LN2),1>d*(y=Math.pow(2,-r))&&(r--,y*=2),2<=(d+=1<=r+F?G/y:G*Math.pow(2,1-F))*y&&(r++,y/=2),r+F>=E?(v=0,r=E):1<=r+F?(v=(d*y-1)*Math.pow(2,g),r+=F):(v=d*Math.pow(2,F-1)*Math.pow(2,g),r=0));8<=g;b[m+l]=255&v,l+=a,v/=256,g-=8);r=r<<g|v;for(A+=g;0<A;b[m+l]=255&r,l+=a,r/=256,A-=8);
b[m+l-a]|=128*I}},Lba="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ZD.Buffer=kf;ZD.SlowBuffer=function(b){+b!=b&&(b=0);return kf.alloc(+b)};ZD.INSPECT_MAX_BYTES=50;ZD.kMaxLength=2147483647;kf.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(b,d),42===b.foo()}catch(m){return!1}}();kf.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||
"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(kf.prototype,"parent",{enumerable:!0,get:function(){if(kf.isBuffer(this))return this.buffer}});Object.defineProperty(kf.prototype,"offset",{enumerable:!0,get:function(){if(kf.isBuffer(this))return this.byteOffset}});kf.poolSize=8192;kf.from=function(b,d,m){return Q7(b,d,m)};Object.setPrototypeOf(kf.prototype,
Uint8Array.prototype);Object.setPrototypeOf(kf,Uint8Array);kf.alloc=function(b,d,m){return S7(b),0>=b?Ww(b):void 0!==d?"string"==typeof m?Ww(b).fill(d,m):Ww(b).fill(d):Ww(b)};kf.allocUnsafe=function(b){return NT(b)};kf.allocUnsafeSlow=function(b){return NT(b)};kf.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==kf.prototype};kf.compare=function(b,d){if(Xw(b,Uint8Array)&&(b=kf.from(b,b.offset,b.byteLength)),Xw(d,Uint8Array)&&(d=kf.from(d,d.offset,d.byteLength)),!kf.isBuffer(b)||!kf.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(b===d)return 0;for(var m=b.length,a=d.length,g=0,l=Math.min(m,a);g<l;++g)if(b[g]!==d[g]){m=b[g];a=d[g];break}return m<a?-1:a<m?1:0};kf.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};kf.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return kf.alloc(0);
var m;if(void 0===d)for(m=d=0;m<b.length;++m)d+=b[m].length;d=kf.allocUnsafe(d);var a=0;for(m=0;m<b.length;++m){var g=b[m];if(Xw(g,Uint8Array)&&(g=kf.from(g)),!kf.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,a);a+=g.length}return d};kf.byteLength=R7;kf.prototype._isBuffer=!0;kf.prototype.swap16=function(){var b=this.length;if(0!=b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<b;d+=2)kB(this,d,d+1);return this};kf.prototype.swap32=
function(){var b=this.length;if(0!=b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<b;d+=4)kB(this,d,d+3),kB(this,d+1,d+2);return this};kf.prototype.swap64=function(){var b=this.length;if(0!=b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<b;d+=8)kB(this,d,d+7),kB(this,d+1,d+6),kB(this,d+2,d+5),kB(this,d+3,d+4);return this};kf.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?U7(this,0,b):Zka.apply(this,
arguments)};kf.prototype.toLocaleString=kf.prototype.toString;kf.prototype.equals=function(b){if(!kf.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===kf.compare(this,b)};kf.prototype.inspect=function(){var b="",d=ZD.INSPECT_MAX_BYTES;return b=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(b+=" ... "),"<Buffer "+b+">"};Lba&&(kf.prototype[Lba]=kf.prototype.inspect);kf.prototype.compare=function(b,d,m,a,g){if(Xw(b,Uint8Array)&&(b=kf.from(b,b.offset,
b.byteLength)),!kf.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(void 0===d&&(d=0),void 0===m&&(m=b?b.length:0),void 0===a&&(a=0),void 0===g&&(g=this.length),0>d||m>b.length||0>a||g>this.length)throw new RangeError("out of range index");if(a>=g&&d>=m)return 0;if(a>=g)return-1;if(d>=m)return 1;if(this===b)return 0;var l=(g>>>=0)-(a>>>=0),r=(m>>>=0)-(d>>>=0),v=Math.min(l,r);a=this.slice(a,g);b=b.slice(d,m);for(d=0;d<v;++d)if(a[d]!==
b[d]){l=a[d];r=b[d];break}return l<r?-1:r<l?1:0};kf.prototype.includes=function(b,d,m){return-1!==this.indexOf(b,d,m)};kf.prototype.indexOf=function(b,d,m){return V7(this,b,d,m,!0)};kf.prototype.lastIndexOf=function(b,d,m){return V7(this,b,d,m,!1)};kf.prototype.write=function(b,d,m,a){if(void 0===d)a="utf8",m=this.length,d=0;else if(void 0===m&&"string"==typeof d)a=d,m=this.length,d=0;else{if(!isFinite(d))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");d>>>=
0;isFinite(m)?(m>>>=0,void 0===a&&(a="utf8")):(a=m,m=void 0)}var g=this.length-d;if((void 0===m||m>g)&&(m=g),0<b.length&&(0>m||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(g=!1;;)switch(a){case "hex":a:{d=Number(d)||0;a=this.length-d;m?(m=Number(m))>a&&(m=a):m=a;a=b.length;m>a/2&&(m=a/2);for(a=0;a<m;++a){g=parseInt(b.substr(2*a,2),16);if(g!=g){m=a;break a}this[d+a]=g}m=a}return m;case "utf8":case "utf-8":return RL(QT(b,this.length-d),this,d,
m);case "ascii":return X7(this,b,d,m);case "latin1":case "binary":return X7(this,b,d,m);case "base64":return RL(T7(b),this,d,m);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=m;g=this.length-d;for(var l=[],r=0;r<b.length&&!(0>(g-=2));++r){var v=b.charCodeAt(r);m=v>>8;v%=256;l.push(v);l.push(m)}return RL(l,this,d,a);default:if(g)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();g=!0}};kf.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||
this,0)}};kf.prototype.slice=function(b,d){var m=this.length;0>(b=~~b)?0>(b+=m)&&(b=0):b>m&&(b=m);0>(d=void 0===d?m:~~d)?0>(d+=m)&&(d=0):d>m&&(d=m);d<b&&(d=b);b=this.subarray(b,d);return Object.setPrototypeOf(b,kf.prototype),b};kf.prototype.readUIntLE=function(b,d,m){b>>>=0;d>>>=0;m||Qn(b,d,this.length);m=this[b];for(var a=1,g=0;++g<d&&(a*=256);)m+=this[b+g]*a;return m};kf.prototype.readUIntBE=function(b,d,m){b>>>=0;d>>>=0;m||Qn(b,d,this.length);m=this[b+--d];for(var a=1;0<d&&(a*=256);)m+=this[b+
--d]*a;return m};kf.prototype.readUInt8=function(b,d){return b>>>=0,d||Qn(b,1,this.length),this[b]};kf.prototype.readUInt16LE=function(b,d){return b>>>=0,d||Qn(b,2,this.length),this[b]|this[b+1]<<8};kf.prototype.readUInt16BE=function(b,d){return b>>>=0,d||Qn(b,2,this.length),this[b]<<8|this[b+1]};kf.prototype.readUInt32LE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};kf.prototype.readUInt32BE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),
16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};kf.prototype.readIntLE=function(b,d,m){b>>>=0;d>>>=0;m||Qn(b,d,this.length);m=this[b];for(var a=1,g=0;++g<d&&(a*=256);)m+=this[b+g]*a;return m>=128*a&&(m-=Math.pow(2,8*d)),m};kf.prototype.readIntBE=function(b,d,m){b>>>=0;d>>>=0;m||Qn(b,d,this.length);m=d;for(var a=1,g=this[b+--m];0<m&&(a*=256);)g+=this[b+--m]*a;return g>=128*a&&(g-=Math.pow(2,8*d)),g};kf.prototype.readInt8=function(b,d){return b>>>=0,d||Qn(b,1,this.length),128&this[b]?-1*(255-
this[b]+1):this[b]};kf.prototype.readInt16LE=function(b,d){b>>>=0;d||Qn(b,2,this.length);b=this[b]|this[b+1]<<8;return 32768&b?4294901760|b:b};kf.prototype.readInt16BE=function(b,d){b>>>=0;d||Qn(b,2,this.length);b=this[b+1]|this[b]<<8;return 32768&b?4294901760|b:b};kf.prototype.readInt32LE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};kf.prototype.readInt32BE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+
2]<<8|this[b+3]};kf.prototype.readFloatLE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),YD.read(this,b,!0,23,4)};kf.prototype.readFloatBE=function(b,d){return b>>>=0,d||Qn(b,4,this.length),YD.read(this,b,!1,23,4)};kf.prototype.readDoubleLE=function(b,d){return b>>>=0,d||Qn(b,8,this.length),YD.read(this,b,!0,52,8)};kf.prototype.readDoubleBE=function(b,d){return b>>>=0,d||Qn(b,8,this.length),YD.read(this,b,!1,52,8)};kf.prototype.writeUIntLE=function(b,d,m,a){(b=+b,d>>>=0,m>>>=0,a)||aq(this,b,d,
m,Math.pow(2,8*m)-1,0);a=1;var g=0;for(this[d]=255&b;++g<m&&(a*=256);)this[d+g]=b/a&255;return d+m};kf.prototype.writeUIntBE=function(b,d,m,a){(b=+b,d>>>=0,m>>>=0,a)||aq(this,b,d,m,Math.pow(2,8*m)-1,0);a=m-1;var g=1;for(this[d+a]=255&b;0<=--a&&(g*=256);)this[d+a]=b/g&255;return d+m};kf.prototype.writeUInt8=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,1,255,0),this[d]=255&b,d+1};kf.prototype.writeUInt16LE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,2,65535,0),this[d]=255&b,this[d+1]=b>>>
8,d+2};kf.prototype.writeUInt16BE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,2,65535,0),this[d]=b>>>8,this[d+1]=255&b,d+2};kf.prototype.writeUInt32LE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,4,4294967295,0),this[d+3]=b>>>24,this[d+2]=b>>>16,this[d+1]=b>>>8,this[d]=255&b,d+4};kf.prototype.writeUInt32BE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,4,4294967295,0),this[d]=b>>>24,this[d+1]=b>>>16,this[d+2]=b>>>8,this[d+3]=255&b,d+4};kf.prototype.writeIntLE=function(b,d,m,a){(b=+b,
d>>>=0,a)||(a=Math.pow(2,8*m-1),aq(this,b,d,m,a-1,-a));a=0;var g=1,l=0;for(this[d]=255&b;++a<m&&(g*=256);)0>b&&0===l&&0!==this[d+a-1]&&(l=1),this[d+a]=(b/g>>0)-l&255;return d+m};kf.prototype.writeIntBE=function(b,d,m,a){(b=+b,d>>>=0,a)||(a=Math.pow(2,8*m-1),aq(this,b,d,m,a-1,-a));a=m-1;var g=1,l=0;for(this[d+a]=255&b;0<=--a&&(g*=256);)0>b&&0===l&&0!==this[d+a+1]&&(l=1),this[d+a]=(b/g>>0)-l&255;return d+m};kf.prototype.writeInt8=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,1,127,-128),0>b&&(b=
255+b+1),this[d]=255&b,d+1};kf.prototype.writeInt16LE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,2,32767,-32768),this[d]=255&b,this[d+1]=b>>>8,d+2};kf.prototype.writeInt16BE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,2,32767,-32768),this[d]=b>>>8,this[d+1]=255&b,d+2};kf.prototype.writeInt32LE=function(b,d,m){return b=+b,d>>>=0,m||aq(this,b,d,4,2147483647,-2147483648),this[d]=255&b,this[d+1]=b>>>8,this[d+2]=b>>>16,this[d+3]=b>>>24,d+4};kf.prototype.writeInt32BE=function(b,d,m){return b=
+b,d>>>=0,m||aq(this,b,d,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),this[d]=b>>>24,this[d+1]=b>>>16,this[d+2]=b>>>8,this[d+3]=255&b,d+4};kf.prototype.writeFloatLE=function(b,d,m){return Z7(this,b,d,!0,m)};kf.prototype.writeFloatBE=function(b,d,m){return Z7(this,b,d,!1,m)};kf.prototype.writeDoubleLE=function(b,d,m){return $7(this,b,d,!0,m)};kf.prototype.writeDoubleBE=function(b,d,m){return $7(this,b,d,!1,m)};kf.prototype.copy=function(b,d,m,a){if(!kf.isBuffer(b))throw new TypeError("argument should be a Buffer");
if((m||(m=0),a||0===a||(a=this.length),d>=b.length&&(d=b.length),d||(d=0),0<a&&a<m&&(a=m),a===m)||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>m||m>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-d<a-m&&(a=b.length-d+m);var g=a-m;if(this===b&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(d,m,a);else if(this===b&&m<d&&d<
a)for(a=g-1;0<=a;--a)b[a+d]=this[a+m];else Uint8Array.prototype.set.call(b,this.subarray(m,a),d);return g};kf.prototype.fill=function(b,d,m,a){if("string"==typeof b){if("string"==typeof d?(a=d,d=0,m=this.length):"string"==typeof m&&(a=m,m=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!kf.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var g=b.charCodeAt(0);("utf8"===a&&128>g||"latin1"===a)&&(b=g)}}else"number"==
typeof b?b&=255:"boolean"==typeof b&&(b=Number(b));if(0>d||this.length<d||this.length<m)throw new RangeError("Out of range index");if(m<=d)return this;if(d>>>=0,m=void 0===m?this.length:m>>>0,b||(b=0),"number"==typeof b)for(a=d;a<m;++a)this[a]=b;else{g=kf.isBuffer(b)?b:kf.from(b,a);var l=g.length;if(0===l)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<m-d;++a)this[a+d]=g[a%l]}return this};var ala=/[^+/0-9A-Za-z-_]/g,$ka=function(){for(var b=Array(256),d=0;16>d;++d)for(var m=
16*d,a=0;16>a;++a)b[m+a]="0123456789abcdef"[d]+"0123456789abcdef"[a];return b}(),a8=!1,SL={exports:{}},tua=/^xn--/,uua=/[^\0-\x7E]/,dla=/[\x2E\u3002\uFF0E\uFF61]/g,cla={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Dv=Math.floor,TW=String.fromCharCode,Mba=function(b,d){return b+22+75*(26>b)-((0!=d)<<5)},Nba=function(b,d,m){var a=0;b=m?Dv(b/700):b>>1;for(b+=Dv(b/d);455<b;a+=36)b=Dv(b/35);return Dv(a+
36*b/(b+38))},Oba=function(b){var d=[],m=b.length,a=0,g=128,l=72,r=b.lastIndexOf("-");0>r&&(r=0);for(var v=0;v<r;++v)128<=b.charCodeAt(v)&&lB("not-basic"),d.push(b.charCodeAt(v));for(r=0<r?r+1:0;r<m;){v=a;for(var y=1,A=36;;A+=36){r>=m&&lB("invalid-input");var E=10>(G=b.charCodeAt(r++))-48?G-22:26>G-65?G-65:26>G-97?G-97:36;(36<=E||E>Dv((2147483647-a)/y))&&lB("overflow");a+=E*y;var F=A<=l?1:A>=l+26?26:A-l;if(E<F)break;E=36-F;y>Dv(2147483647/E)&&lB("overflow");y*=E}y=d.length+1;l=Nba(a-v,y,0==v);Dv(a/
y)>2147483647-g&&lB("overflow");g+=Dv(a/y);a%=y;d.splice(a++,0,g)}var G;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},Pba=function(b){for(var d=[],m=(b=c8(b)).length,a=128,g=0,l=72,r=$jscomp.makeIterator(b),v=r.next();!v.done;v=r.next()){var y=v.value;128>y&&d.push(TW(y))}for((y=r=d.length)&&d.push("-");y<m;){var A=2147483647,E=$jscomp.makeIterator(b);for(v=E.next();!v.done;v=E.next())v=v.value,v>=a&&v<A&&(A=v);v=y+1;A-a>Dv((2147483647-g)/v)&&lB("overflow");g+=(A-a)*v;a=
A;A=$jscomp.makeIterator(b);for(E=A.next();!E.done;E=A.next())if(E=E.value,E<a&&2147483647<++g&&lB("overflow"),E==a){var F=g;for(E=36;;E+=36){var G=E<=l?1:E>=l+26?26:E-l;if(F<G)break;F-=G;var I=36-G;d.push(TW(Mba(G+F%I,0)));F=Dv(F/I)}d.push(TW(Mba(F,0)));l=Nba(g,v,y==r);g=0;++y}++g;++a}return d.join("")},vua={version:"2.1.0",ucs2:{decode:c8,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},decode:Oba,encode:Pba,toASCII:function(b){return b8(b,function(d){return uua.test(d)?
"xn--"+Pba(d):d})},toUnicode:function(b){return b8(b,function(d){return tua.test(d)?Oba(d.slice(4).toLowerCase()):d})}},iI=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},aC={};aC.decode=aC.parse=function(b,d,m,a){m=m||"=";var g={};if("string"!=typeof b||0===b.length)return g;var l=/\+/g;b=b.split(d||"&");d=1E3;a&&"number"==typeof a.maxKeys&&(d=a.maxKeys);a=b.length;0<d&&a>d&&(a=d);for(d=0;d<a;++d){var r,
v;var y=b[d].replace(l,"%20");var A=y.indexOf(m);0<=A?(r=y.substr(0,A),v=y.substr(A+1)):(r=y,v="");y=decodeURIComponent(r);A=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(g,y)?Array.isArray(g[y])?g[y].push(A):g[y]=[g[y],A]:g[y]=A}return g};aC.encode=aC.stringify=function(b,d,m,a){return d=d||"&",m=m||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(g){var l=encodeURIComponent(iI(g))+m;return Array.isArray(b[g])?b[g].map(function(r){return l+encodeURIComponent(iI(r))}).join(d):
l+encodeURIComponent(iI(b[g]))}).join(d):a?encodeURIComponent(iI(a))+m+encodeURIComponent(iI(b)):""};var $D={},gv={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};$D.parse=YG;$D.resolve=function(b,d){return YG(b,!1,!0).resolve(d)};$D.resolveObject=function(b,d){return b?YG(b,!1,!0).resolveObject(d):d};$D.format=function(b){gv.isString(b)&&(b=YG(b));return b instanceof
Xr?b.format():Xr.prototype.format.call(b)};$D.Url=Xr;var wua=/^([a-z0-9.+-]+:)/i,xua=/:[0-9]*$/,yua=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,zua="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),UW=["'"].concat(zua),Qba=["%","/","?",";","#"].concat(UW),Rba=["/","?","#"],Sba=/^[+a-z0-9A-Z_-]{0,63}$/,Aua=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Bua={javascript:!0,"javascript:":!0},VW={javascript:!0,"javascript:":!0},KE={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};
Xr.prototype.parse=function(b,d,m){if(!gv.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!m&&1===b.split("#").length)if(b=yua.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=d?aC.parse(this.search.substr(1)):this.search.substr(1)):d&&(this.search="",this.query={}),this;if(b=wua.exec(a)){var g=(b=
b[0]).toLowerCase();this.protocol=g;a=a.substr(b.length)}if(m||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||b&&VW[b]||(a=a.substr(2),this.slashes=!0)}if(!VW[b]&&(l||b&&!KE[b])){var r,v;l=-1;for(m=0;m<Rba.length;m++)-1!==(y=a.indexOf(Rba[m]))&&(-1===l||y<l)&&(l=y);-1!==(v=-1===l?a.lastIndexOf("@"):a.lastIndexOf("@",l))&&(r=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(r));l=-1;for(m=0;m<Qba.length;m++){var y;-1!==(y=a.indexOf(Qba[m]))&&(-1===l||y<l)&&(l=y)}-1===l&&
(l=a.length);this.host=a.slice(0,l);a=a.slice(l);this.parseHost();this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(l=this.hostname.split(/\./),v=(m=0,l.length);m<v;m++)if((y=l[m])&&!y.match(Sba)){b="";for(var A=0,E=y.length;A<E;A++)127<y.charCodeAt(A)?b+="x":b+=y[A];if(!b.match(Sba)){v=l.slice(0,m);m=l.slice(m+1);(y=y.match(Aua))&&(v.push(y[1]),m.unshift(y[2]));m.length&&(a="/"+m.join(".")+a);this.hostname=v.join(".");break}}255<this.hostname.length?
this.hostname="":this.hostname=this.hostname.toLowerCase();r||(this.hostname=vua.toASCII(this.hostname));m=this.port?":"+this.port:"";this.host=(this.hostname||"")+m;this.href+=this.host;r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Bua[g])for(m=0,v=UW.length;m<v;m++)r=UW[m],-1!==a.indexOf(r)&&(y=encodeURIComponent(r),y===r&&(y=escape(r)),a=a.split(r).join(y));m=a.indexOf("#");-1!==m&&(this.hash=a.substr(m),a=a.slice(0,m));m=a.indexOf("?");if(-1!==m?(this.search=
a.substr(m),this.query=a.substr(m+1),d&&(this.query=aC.parse(this.query)),a=a.slice(0,m)):d&&(this.search="",this.query={}),a&&(this.pathname=a),KE[g]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)m=this.pathname||"",this.path=m+(this.search||"");return this.href=this.format(),this};Xr.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,":"),b+="@");var d=this.protocol||"",m=this.pathname||"",a=this.hash||"",g=!1,l="";this.host?
g=b+this.host:this.hostname&&(g=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(g+=":"+this.port));this.query&&gv.isObject(this.query)&&Object.keys(this.query).length&&(l=aC.stringify(this.query));b=this.search||l&&"?"+l||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||KE[d])&&!1!==g?(g="//"+(g||""),m&&"/"!==m.charAt(0)&&(m="/"+m)):g||(g=""),a&&"#"!==a.charAt(0)&&(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),d+g+(m=m.replace(/[?#]/g,function(r){return encodeURIComponent(r)}))+
(b=b.replace("#","%23"))+a};Xr.prototype.resolve=function(b){return this.resolveObject(YG(b,!1,!0)).format()};Xr.prototype.resolveObject=function(b){if(gv.isString(b)){var d=new Xr;d.parse(b,!1,!0);b=d}d=new Xr;for(var m=Object.keys(this),a=0;a<m.length;a++){var g=m[a];d[g]=this[g]}if(d.hash=b.hash,""===b.href)return d.href=d.format(),d;if(b.slashes&&!b.protocol){var l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],"protocol"!==a&&(d[a]=b[a]);return KE[d.protocol]&&d.hostname&&!d.pathname&&(d.path=
d.pathname="/"),d.href=d.format(),d}if(b.protocol&&b.protocol!==d.protocol){if(!KE[b.protocol]){l=Object.keys(b);for(m=0;m<l.length;m++)a=l[m],d[a]=b[a];return d.href=d.format(),d}if(d.protocol=b.protocol,b.host||VW[b.protocol])d.pathname=b.pathname;else{for(var r=(b.pathname||"").split("/");r.length&&!(b.host=r.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==r[0]&&r.unshift("");2>r.length&&r.unshift("");d.pathname=r.join("/")}if(d.search=b.search,d.query=b.query,d.host=b.host||"",
d.auth=b.auth,d.hostname=b.hostname||b.host,d.port=b.port,d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");return d.slashes=d.slashes||b.slashes,d.href=d.format(),d}m=d.pathname&&"/"===d.pathname.charAt(0);var v=b.host||b.pathname&&"/"===b.pathname.charAt(0),y=m=v||m||d.host&&b.pathname;a=d.pathname&&d.pathname.split("/")||[];g=(r=b.pathname&&b.pathname.split("/")||[],d.protocol&&!KE[d.protocol]);if(g&&(d.hostname="",d.port=null,d.host&&(""===a[0]?a[0]=d.host:a.unshift(d.host)),d.host=
"",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===r[0]?r[0]=b.host:r.unshift(b.host)),b.host=null),m=m&&(""===r[0]||""===a[0])),v)d.host=b.host||""===b.host?b.host:d.host,d.hostname=b.hostname||""===b.hostname?b.hostname:d.hostname,d.search=b.search,d.query=b.query,a=r;else if(r.length)a||(a=[]),a.pop(),a=a.concat(r),d.search=b.search,d.query=b.query;else if(!gv.isNullOrUndefined(b.search))return g&&(d.hostname=d.host=a.shift(),(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=
l.shift(),d.host=d.hostname=l.shift())),d.search=b.search,d.query=b.query,gv.isNull(d.pathname)&&gv.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!a.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;v=a.slice(-1)[0];r=(d.host||b.host||1<a.length)&&("."===v||".."===v)||""===v;for(var A=0,E=a.length;0<=E;E--)"."===(v=a[E])?a.splice(E,1):".."===v?(a.splice(E,1),A++):A&&(a.splice(E,1),A--);if(!m&&!y)for(;A--;A)a.unshift("..");
!m||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");r&&"/"!==a.join("/").substr(-1)&&a.push("");y=""===a[0]||a[0]&&"/"===a[0].charAt(0);g&&(d.hostname=d.host=y?"":a.length?a.shift():"",(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift()));return(m||d.host&&a.length)&&!y&&a.unshift(""),a.length?d.pathname=a.join("/"):(d.pathname=null,d.path=null),gv.isNull(d.pathname)&&gv.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:
"")),d.auth=b.auth||d.auth,d.slashes=d.slashes||b.slashes,d.href=d.format(),d};Xr.prototype.parseHost=function(){var b=this.host,d=xua.exec(b);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),b=b.substr(0,b.length-d.length));b&&(this.hostname=b)};var Cua=WY,jI={resolve:function(){for(var b,d="",m=!1,a=arguments.length-1;-1<=a&&!m;a--){var g;0<=a?g=arguments[a]:(void 0===b&&(b=Cua.cwd()),g=b);hv(g);0!==g.length&&(d=g+"/"+d,m=47===g.charCodeAt(0))}return d=d8(d,!m),m?0<d.length?"/"+d:"/":0<d.length?d:"."},
normalize:function(b){if(hv(b),0===b.length)return".";var d=47===b.charCodeAt(0),m=47===b.charCodeAt(b.length-1);return 0!==(b=d8(b,!d)).length||d||(b="."),0<b.length&&m&&(b+="/"),d?"/"+b:b},isAbsolute:function(b){return hv(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var b,d=0;d<arguments.length;++d){var m=arguments[d];hv(m);0<m.length&&(void 0===b?b=m:b+="/"+m)}return void 0===b?".":jI.normalize(b)},relative:function(b,d){if((hv(b),hv(d),b===d)||(b=
jI.resolve(b))===(d=jI.resolve(d)))return"";for(var m=1;m<b.length&&47===b.charCodeAt(m);++m);for(var a=b.length,g=a-m,l=1;l<d.length&&47===d.charCodeAt(l);++l);for(var r=d.length-l,v=g<r?g:r,y=-1,A=0;A<=v;++A){if(A===v){if(r>v){if(47===d.charCodeAt(l+A))return d.slice(l+A+1);if(0===A)return d.slice(l+A)}else g>v&&(47===b.charCodeAt(m+A)?y=A:0===A&&(y=0));break}var E=b.charCodeAt(m+A);if(E!==d.charCodeAt(l+A))break;47===E&&(y=A)}g="";for(A=m+y+1;A<=a;++A)A!==a&&47!==b.charCodeAt(A)||(0===g.length?
g+="..":g+="/..");return 0<g.length?g+d.slice(l+y):(l+=y,47===d.charCodeAt(l)&&++l,d.slice(l))},_makeLong:function(b){return b},dirname:function(b){if(hv(b),0===b.length)return".";for(var d=47===b.charCodeAt(0),m=-1,a=!0,g=b.length-1;1<=g;--g)if(47===b.charCodeAt(g)){if(!a){m=g;break}}else a=!1;return-1===m?d?"/":".":d&&1===m?"//":b.slice(0,m)},basename:function(b,d){if(void 0!==d&&"string"!=typeof d)throw new TypeError('"ext" argument must be a string');hv(b);var m,a=0,g=-1,l=!0;if(void 0!==d&&0<
d.length&&d.length<=b.length){if(d.length===b.length&&d===b)return"";var r=d.length-1,v=-1;for(m=b.length-1;0<=m;--m){var y=b.charCodeAt(m);if(47===y){if(!l){a=m+1;break}}else-1===v&&(l=!1,v=m+1),0<=r&&(y===d.charCodeAt(r)?-1==--r&&(g=m):(r=-1,g=v))}return a===g?g=v:-1===g&&(g=b.length),b.slice(a,g)}for(m=b.length-1;0<=m;--m)if(47===b.charCodeAt(m)){if(!l){a=m+1;break}}else-1===g&&(l=!1,g=m+1);return-1===g?"":b.slice(a,g)},extname:function(b){hv(b);for(var d=-1,m=0,a=-1,g=!0,l=0,r=b.length-1;0<=r;--r){var v=
b.charCodeAt(r);if(47!==v)-1===a&&(g=!1,a=r+1),46===v?-1===d?d=r:1!==l&&(l=1):-1!==d&&(l=-1);else if(!g){m=r+1;break}}return-1===d||-1===a||0===l||1===l&&d===a-1&&d===m+1?"":b.slice(d,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);var d=b.dir||b.root,m=b.base||(b.name||"")+(b.ext||"");return d?d===b.root?d+m:d+"/"+m:m},parse:function(b){hv(b);var d={root:"",dir:"",base:"",ext:"",name:""};if(0===
b.length)return d;var m,a=b.charCodeAt(0),g=47===a;g?(d.root="/",m=1):m=0;for(var l=-1,r=0,v=-1,y=!0,A=b.length-1,E=0;A>=m;--A)if(47!==(a=b.charCodeAt(A)))-1===v&&(y=!1,v=A+1),46===a?-1===l?l=A:1!==E&&(E=1):-1!==l&&(E=-1);else if(!y){r=A+1;break}return-1===l||-1===v||0===E||1===E&&l===v-1&&l===r+1?-1!==v&&(d.base=d.name=0===r&&g?b.slice(1,v):b.slice(r,v)):(0===r&&g?(d.name=b.slice(1,l),d.base=b.slice(1,v)):(d.name=b.slice(r,l),d.base=b.slice(r,v)),d.ext=b.slice(l,v)),0<r?d.dir=b.slice(0,r-1):g&&(d.dir=
"/"),d},sep:"/",delimiter:":",win32:null,posix:null},i8=jI.posix=jI,f8={},e8=!1,h8={},g8=!1,hla={appendFile:Ye,appendFileSync:Ye,access:Ye,accessSync:Ye,chown:Ye,chownSync:Ye,chmod:Ye,chmodSync:Ye,close:Ye,closeSync:Ye,copyFile:Ye,copyFileSync:Ye,createReadStream:Ye,createWriteStream:Ye,exists:Ye,existsSync:Ye,fchown:Ye,fchownSync:Ye,fchmod:Ye,fchmodSync:Ye,fdatasync:Ye,fdatasyncSync:Ye,fstat:Ye,fstatSync:Ye,fsync:Ye,fsyncSync:Ye,ftruncate:Ye,ftruncateSync:Ye,futimes:Ye,futimesSync:Ye,lchown:Ye,lchownSync:Ye,
lchmod:Ye,lchmodSync:Ye,link:Ye,linkSync:Ye,lstat:Ye,lstatSync:Ye,mkdir:Ye,mkdirSync:Ye,mkdtemp:Ye,mkdtempSync:Ye,open:Ye,openSync:Ye,opendir:Ye,opendirSync:Ye,readdir:Ye,readdirSync:Ye,read:Ye,readSync:Ye,readFile:Ye,readFileSync:Ye,readlink:Ye,readlinkSync:Ye,realpath:Ye,realpathSync:Ye,rename:Ye,renameSync:Ye,rmdir:Ye,rmdirSync:Ye,stat:Ye,statSync:Ye,symlink:Ye,symlinkSync:Ye,truncate:Ye,truncateSync:Ye,unwatchFile:Ye,unlink:Ye,unlinkSync:Ye,utimes:Ye,utimesSync:Ye,watch:Ye,watchFile:Ye,writeFile:Ye,
writeFileSync:Ye,write:Ye,writeSync:Ye,writev:Ye,writevSync:Ye,Dir:Ye,Dirent:Ye,Stats:Ye,ReadStream:Ye,WriteStream:Ye,FileReadStream:Ye,FileWriteStream:Ye,_toUnixTimestamp:Ye,F_OK:null,R_OK:null,W_OK:null,X_OK:null,constants:null,promises:{access:Ye,copyFile:Ye,open:Ye,opendir:Ye,rename:Ye,truncate:Ye,rmdir:Ye,mkdir:Ye,readdir:Ye,readlink:Ye,symlink:Ye,lstat:Ye,stat:Ye,link:Ye,unlink:Ye,chmod:Ye,lchmod:Ye,lchown:Ye,chown:Ye,utimes:Ye,realpath:Ye,mkdtemp:Ye,writeFile:Ye,appendFile:Ye,readFile:Ye}},
iv={},j8=!1,lp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tba={},Uba=!1,WW={},Vba=!1;Vba||(Vba=!0,WW.parse=function(){function b(a){return a?a.replace(/^\s+|\s+$/g,""):""}function d(a,g){var l=a&&"string"===typeof a.type,r=l?a:g,v;for(v in a){var y=a[v];Array.isArray(y)?y.forEach(function(A){d(A,r)}):y&&"object"===typeof y&&d(y,r)}l&&Object.defineProperty(a,"parent",{configurable:!0,writable:!0,enumerable:!1,value:g||null});return a}if(Kba)return Jba;Kba=!0;var m=
/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;return Jba=function(a,g){function l(gb){var ka=gb.match(/\n/g);ka&&(U+=ka.length);ka=gb.lastIndexOf("\n");V=~ka?gb.length-ka:V+gb.length}function r(){var gb={line:U,column:V};return function(ka){ka.position=new v(gb);G(/^\s*/);return ka}}function v(gb){(this||SW).start=gb;(this||SW).end={line:U,column:V};(this||SW).source=g.source}function y(gb){var ka=Error(g.source+":"+U+":"+V+": "+gb);ka.reason=gb;ka.filename=g.source;ka.line=U;ka.column=V;ka.source=a;if(g.silent)na.push(ka);
else throw ka;}function A(){return G(/^{\s*/)}function E(){return G(/^}/)}function F(){var gb,ka=[];G(/^\s*/);for(I(ka);a.length&&"}"!=a.charAt(0)&&(gb=K()||Z());)!1!==gb&&(ka.push(gb),I(ka));return ka}function G(gb){if(gb=gb.exec(a)){var ka=gb[0];l(ka);a=a.slice(ka.length);return gb}}function I(gb){var ka;for(gb=gb||[];ka=M();)!1!==ka&&gb.push(ka);return gb}function M(){var gb=r();if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var ka=2;""!=a.charAt(ka)&&("*"!=a.charAt(ka)||"/"!=a.charAt(ka+1));)++ka;
ka+=2;if(""===a.charAt(ka-1))return y("End of comment missing");var ia=a.slice(2,ka-2);V+=2;l(ia);a=a.slice(ka);V+=2;return gb({type:"comment",comment:ia})}}function L(){var gb=G(/^([^{]+)/);if(gb)return b(gb[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(ka){return ka.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(ka){return ka.replace(/\u200C/g,",")})}function S(){var gb=r(),ka=G(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);
if(ka){ka=b(ka[0]);if(!G(/^:\s*/))return y("property missing ':'");var ia=G(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);gb=gb({type:"declaration",property:ka.replace(m,""),value:ia?b(ia[0]).replace(m,""):""});G(/^[;\s]*/);return gb}}function R(){var gb=[];if(!A())return y("missing '{'");I(gb);for(var ka;ka=S();)!1!==ka&&(gb.push(ka),I(gb));return E()?gb:y("missing '}'")}function aa(){for(var gb,ka=[],ia=r();gb=G(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)ka.push(gb[1]),G(/^,\s*/);if(ka.length)return ia({type:"keyframe",
values:ka,declarations:R()})}function ra(){var gb=r(),ka=G(/^@([-\w]+)?keyframes\s*/);if(ka){var ia=ka[1];ka=G(/^([-\w]+)\s*/);if(!ka)return y("@keyframes missing name");ka=ka[1];if(!A())return y("@keyframes missing '{'");for(var qa,La=I();qa=aa();)La.push(qa),La=La.concat(I());return E()?gb({type:"keyframes",name:ka,vendor:ia,keyframes:La}):y("@keyframes missing '}'")}}function Ea(gb){var ka=new RegExp("^@"+gb+"\\s*([^;]+);");return function(){var ia=r(),qa=G(ka);if(qa){var La={type:gb};La[gb]=qa[1].trim();
return ia(La)}}}function K(){if("@"==a[0]){var gb;if(!(gb=ra())){gb=r();var ka=G(/^@media *([^{]+)/);if(ka)if(ka=b(ka[1]),A()){var ia=I().concat(F());gb=E()?gb({type:"media",media:ka,rules:ia}):y("@media missing '}'")}else gb=y("@media missing '{'");else gb=void 0}gb||(gb=r(),gb=(ka=G(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?gb({type:"custom-media",name:b(ka[1]),media:b(ka[2])}):void 0);gb||(gb=r(),(ka=G(/^@supports *([^{]+)/))?(ka=b(ka[1]),A()?(ia=I().concat(F()),gb=E()?gb({type:"supports",supports:ka,
rules:ia}):y("@supports missing '}'")):gb=y("@supports missing '{'")):gb=void 0);if(!(gb=gb||la()||ya()||jb()))if(gb=r(),ia=G(/^@([-\w]+)?document *([^{]+)/))if(ka=b(ia[1]),ia=b(ia[2]),A()){var qa=I().concat(F());gb=E()?gb({type:"document",document:ia,vendor:ka,rules:qa}):y("@document missing '}'")}else gb=y("@document missing '{'");else gb=void 0;if(!gb)if(gb=r(),G(/^@page */))if(ka=L()||[],A()){for(ia=I();qa=S();)ia.push(qa),ia=ia.concat(I());gb=E()?gb({type:"page",selectors:ka,declarations:ia}):
y("@page missing '}'")}else gb=y("@page missing '{'");else gb=void 0;gb||(gb=r(),G(/^@host\s*/)?A()?(ka=I().concat(F()),gb=E()?gb({type:"host",rules:ka}):y("@host missing '}'")):gb=y("@host missing '{'"):gb=void 0);if(!gb)if(gb=r(),G(/^@font-face\s*/))if(A()){for(ka=I();ia=S();)ka.push(ia),ka=ka.concat(I());gb=E()?gb({type:"font-face",declarations:ka}):y("@font-face missing '}'")}else gb=y("@font-face missing '{'");else gb=void 0;return gb}}function Z(){var gb=r(),ka=L();if(!ka)return y("selector missing");
I();return gb({type:"rule",selectors:ka,declarations:R()})}g=g||{};var U=1,V=1;v.prototype.content=a;var na=[],la=Ea("import"),ya=Ea("charset"),jb=Ea("namespace");return d(function(){var gb=F();return{type:"stylesheet",stylesheet:{source:g.source,rules:gb,parsingErrors:na}}}())}}(),WW.stringify=function(){if(Uba)return Tba;Uba=!0;var b=Pka(),d=Qka();return Tba=function(m,a){a=a||{};var g=a.compress?new b(a):new d(a);return a.sourcemap?(gla()(g),m=g.compile(m),g.applySourceMaps(),a="generator"===a.sourcemap?
g.map:g.map.toJSON(),{code:m,map:a}):m=g.compile(m)}}());var Fj=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Fj.obj=Ng;Fj.promise=xh;Fj.string=Li;Fj.pt=th;Fj.Morph=Ol;Fj.vdom=AH;Fj.addOrChangeCSSDeclaration=zj;Fj.css=WW;var sO=Fj.vdom;Fj.diff=sO.diff;Fj.patch=sO.patch;Fj.h=sO.h;Fj.createElement=sO.create;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=d.hasOwnProperty("CustomVNode")&&"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.morph=a;this.renderer=g;this.morphVtree=null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,g=this.morphVtree=this.renderer.renderMorph(a),l="customNode-key-"+a.id;g.children[0]&&g.children[0].key===l||g.children.unshift(Fj.h(a.domNodeTagName||
"div",{key:l},[]));return g}},{key:"init",value:function(){var a=Fj.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,g){a=a.morphVtree||this.renderMorph();var l=this.renderMorph();a=Fj.diff(a,l);Fj.patch(g,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&
a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:"className",get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:424,end:2280})})(void 0);var rz=Ba("au",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),
m=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:d.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var g=Fj.css.parse(this.cssDeclaration);this.whenRendered().then(function(){g.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(r){return"#"+
a.id+" "+r}))});Fj.addOrChangeCSSDeclaration("css-for-"+a.id,Fj.css.stringify(g))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){return new Fj.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,g=hc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",content:a.html,target:a})}],{isDivider:!0});return g}}],[{key:"className",get:function(){return"HTMLMorph"}},
{key:"properties",get:function(){return{extent:{defaultValue:Fj.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(a.includes("<script")){a=this.domNode.querySelectorAll("script");a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next()){var l=g.value;g=l.parentNode;l.remove();for(var r=document.createElement("script"),v=$jscomp.makeIterator(l.attributes),
y=v.next();!y.done;y=v.next())y=y.value,r.setAttribute(y.name,y.value);l=$jscomp.makeIterator(l.childNodes);for(v=l.next();!v.done;v=l.next())r.appendChild(v.value);g.appendChild(r)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));
return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return Fj.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);a?this.ensureCSSDeclaration():(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],
d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2605,end:6528})}(Fj.Morph));Fj.HTMLMorph=rz;Fj.HTMLMorph=rz;Fj.HTMLMorph=rz;var kI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),m=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?
d.IFrameMorph:d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,g){g=void 0===g?{}:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){r=g;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.srcDoc=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"loadURL",value:function(a,g){g=void 0===g?{}:g;var l=this,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){r=g;if(v=void 0===r.keepScroll?!0:r.keepScroll)y=l.iframeScroll;l.src=a;return A.yield(l.whenLoaded(),2)}v&&y&&(l.iframeScroll=y);return A.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:"className",get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return a=(new Fj.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",g.yield(a.loadURL("https://google.com"),2);a.iframe.src;a.iframe.srcDoc;
a.src="";a.srcDoc="fooo";return g.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var g=Fj.promise.deferred().resolve;this._whenLoaded=Fj.promise;
this.iframe.onload=function(l){return g(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Fj.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var a=this.iframe.contentWindow;return Fj.pt(a.scrollX,a.scrollY)}catch(g){return Fj.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(g){}}}}}}],
d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6538,end:9730})}(Fj.HTMLMorph);Fj.IFrameMorph=kI;Fj.IFrameMorph=kI;Fj.IFrameMorph=kI;var Dua=Object.freeze({__proto__:null,HTMLMorph:rz,IFrameMorph:kI}),sp=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");sp.pt=th;sp.Morph=
Ol;sp.morph=ab;sp.config=am;var LE=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip",
"currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var g=a.targetMorph;a=a.hand;this.currentMorph!==g&&this.invalidatesCurrentTooltip(g)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(g,a),this.currentMorph=g)}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();
this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,g){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,g):this.scheduleTooltipFor(a,g)}},{key:"hoverOutOfMorph",value:function(a){var g=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return g.currentTooltip==l&&(g.currentTooltip=null)})}},{key:"scheduleTooltipFor",value:function(a,g){var l=this;this.timer=setTimeout(function(){return l.showTooltipFor(a,g)},1E3*sp.config.showTooltipsAfter)}},
{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,g){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),g=g?g.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new sp.Tooltip({position:g,description:a.tooltip}),a.world().addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:"className",get:function(){return"TooltipViewer"}}],
d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:154,end:2059})}(void 0);sp.TooltipViewer=LE;sp.TooltipViewer=LE;sp.TooltipViewer=LE;var bC=Ba("ah",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),m=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?
d.Tooltip:d.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(sp.pt(0,7))}},{key:"softRemove",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(g.animate({opacity:0,duration:300}),2);a&&a(g);g.remove();l.jumpToEnd()})}}],
[{key:"className",get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(a){var g=$jscomp.makeIterator(this.submorphs).next().value;g.value=a;g.fit()}},submorphs:{initialize:function(){this.submorphs=
[new sp.morph({type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2068,end:3217})}(sp.Morph));sp.Tooltip=bC;sp.Tooltip=bC;sp.Tooltip=bC;var Eua=Object.freeze({__proto__:null,TooltipViewer:LE,Tooltip:bC}),Wba=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");
Wba.default=ix;Wba.MorphicDB=ix;var Fua=Object.freeze({__proto__:null,MorphicDB:ix}),qe=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");qe.pt=th;qe.Rectangle=Re;qe.rect=Gl;qe.arr=ng;qe.Closure=fk;qe.num=sm;qe.grid=Uz;qe.obj=Ng;qe.once=Cu;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("Layout")&&"function"===typeof d.Layout?d.Layout:d.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a;a=g.spacing;var l=g.padding,r=g.border,v=g.container,y=g.manualUpdate,A=g.autoResize,E=g.ignore,F=g.onScheduleApply,G=g.layoutOrder;g=g.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},r);this.ignore=E||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=v;this.manualUpdate=y;
this.reactToSubmorphAnimations=g||!1;this.autoResize=void 0!=A?A:!0;this.onScheduleApply=F||function(I,M,L){};G&&(this.layoutOrder=G,this.layoutOrderSource=JSON.stringify(String(G)));this.spacing=a||0;this._padding=l?"number"===typeof l?qe.Rectangle.inset(l):l:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},
{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=qe.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&
a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=qe.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return qe.arr.sortBy(this.container.submorphs.filter(function(g){return g.isLayoutable&&!a.ignore.includes(g.name)}),function(g){return a.layoutOrder(g)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},
{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,g=this.layoutableSubmorphBounds;if(!g||a.length!=g.length)return!0;for(var l=0;l<a.length;l++)if(!g[l].equals(a[l].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&
!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var g=
this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(l){return g.forceLayoutsOfMorph(l)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(g){return a.forceLayoutsOfMorph(g)})}},{key:"scheduleApply",value:function(a,g,l){l=void 0===l?{}:l;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,g,l);this.active||(g&&(this.lastAnim=g),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,g){this.scheduleApply(a,
this.reactToSubmorphAnimations&&g.meta.animation,g)}},{key:"onSubmorphAdded",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onSubmorphRemoved",value:function(a,g){this.submorphsChanged=!0;this.scheduleApply(a,g)}},{key:"onChange",value:function(a){var g=a.args,l=a.prop,r=a.value,v=a.prevValue,y=a.meta;y=this.reactToSubmorphAnimations&&y&&y.animation;g=g&&g[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(g,y);break;case "addMorphAt":this.onSubmorphAdded(g,
y)}"extent"===l&&r&&v&&(v.x!==r.x||v.y!==r.y)&&this.scheduleApply(g,y)}},{key:"affectsLayout",value:function(a,g){a=g.value;var l=g.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(g.prop)&&!qe.obj.equals(a,l)}},{key:"onSubmorphChange",value:function(a,g){if(g.meta&&g.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&g.meta.animation);if(this.affectsLayout(a,g))this.onSubmorphResized(a,g)}},{key:"changePropertyAnimated",value:function(a,
g,l,r){if(r){var v=r.duration;r=r.easing;var y={};this.animationPromise=a.animate((y[g]=l,y.duration=v,y.easing=r,y))}else a[g]=l}},{key:"attachAnimated",value:function(a,g,l){this.active||(this.container=g,this.active=!0,g.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:l})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:"className",get:function(){return"Layout"}}],
d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:157,end:6567})})(void 0);var lI=Ba("aY",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("CustomLayout")&&"function"===typeof d.CustomLayout?d.CustomLayout:d.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){hc._get(Object.getPrototypeOf(m.prototype),
"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=qe.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(g){console.error("Error in relayout() of a custom layout:",g)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1}}}],[{key:"className",get:function(){return"CustomLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6576,end:7523})}(qe.Layout));qe.CustomLayout=lI;qe.CustomLayout=lI;qe.CustomLayout=lI;var mI=Ba("be",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("SnapLayout")&&"function"===typeof d.SnapLayout?d.SnapLayout:d.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var g=this;a=void 0===a?!1:a;if(!this.active&&this.container){hc._get(Object.getPrototypeOf(m.prototype),
"apply",this).call(this,a);var l=this.container.submorphBounds().insetBy(-this.spacing),r=qe.pt(this.spacing,this.spacing).subPt(l.topLeft());r.r()&&this.container.submorphs.forEach(function(v){return g.changePropertyAnimated(v,"position",v.position.addPt(r),a)});this.changePropertyAnimated(this.container,"extent",l.extent(),a)}}}],[{key:"className",get:function(){return"SnapLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7532,end:8327})}(qe.Layout));qe.SnapLayout=mI;qe.SnapLayout=mI;qe.SnapLayout=mI;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("FloatLayout")&&"function"===typeof d.FloatLayout?d.FloatLayout:d.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):
a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},
{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,
align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(g.active||!g.container||!g.container.submorphs.length||!g.layoutableSubmorphs.length)return r.return();g.layoutableSubmorphBounds||g.refreshBoundsCache();hc._get(Object.getPrototypeOf(m.prototype),
"apply",g).call(g,a);g.active=!0;l=g.computeMinContainerExtent();g.layoutSubmorphs(l,a);l=g.computeMinContainerExtent();g.resizeContainer(l,a);g.lastBoundsExtent=g.container.bounds().extent();g.active=!1;g.layoutRequests=!1;return r.return(g.animationPromise)})}},{key:"resizeContainer",value:function(){}}],[{key:"className",get:function(){return"FloatLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8329,end:10714})})(qe.Layout);var sz=Ba("ai",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("VerticalLayout")&&"function"===typeof d.VerticalLayout?d.VerticalLayout:d.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=
void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return hc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",
get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+qe.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.spacing,A=this.autoResize,E=this.align,F=this.resizeSubmorphs,G=this.getStartY(a),I=[];a=F?r.width:
a.x;A=A&&!F;var M=function(L,S){v.reduce(function(R,aa){F&&l.changePropertyAnimated(aa,"width",r.width-2*y,g);l.forceLayoutsOfMorph(aa);l.changePropertyAnimated(aa,L,R,g);R=aa.bounds();I.push(R);return R[L]().addXY(0,R.height+y)},S)};this.layoutableSubmorphBounds=I;"left"===E?M("topLeft",qe.pt(y,G)):"right"===E?M("topRight",qe.pt(a+(A?y:-y),G)):M("topCenter",qe.pt((a+(A?2*y:0))/2,G))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphs,v=this.resizeSubmorphs,
y=this.spacing,A=this.container;this.autoResize&&("centered"===l?(l=r[0].top,r=qe.arr.last(r).bottom+l):r=qe.arr.last(r).bottom+y,a=qe.pt(v?A.width:a.x+2*y,Math.max(r,a.y)),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartY",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,r=this.direction;var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.height;return Math.max(0,"bottomToTop"===r?a.y-v-2*l:"centered"===r?a.y/2-v/2-l:0)+
l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphs,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A].bounds(),F=E.width;y+=E.height;v=Math.max(F,v)}g=qe.pt(v,y+r);l||(g=g.maxPt(a.extent));return g}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:"className",get:function(){return"VerticalLayout"}}],d,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10723,end:14636})}(qe.FloatLayout));qe.VerticalLayout=sz;qe.VerticalLayout=sz;qe.VerticalLayout=sz;var Ev=Ba("az",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("HorizontalLayout")&&"function"===typeof d.HorizontalLayout?d.HorizontalLayout:
d.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},
{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+qe.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return hc._get(Object.getPrototypeOf(m.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",
value:function(a,g){var l=this,r=this.container,v=this.layoutableSubmorphs,y=this.resizeSubmorphs,A=this.spacing,E=this.autoResize,F=this.align,G=this.getStartX(a),I=[];a=y?r.height:a.y;E=E&&!y;var M=function(L,S){v.reduce(function(R,aa){y&&l.changePropertyAnimated(aa,"height",r.height-2*A,g);l.forceLayoutsOfMorph(aa);l.changePropertyAnimated(aa,L,R,g);R=aa.bounds();I.push(R);return R[L]().addXY(R.width+A,0)},S)};this.layoutableSubmorphBounds=I;"top"===F?M("topLeft",qe.pt(G,A)):"bottom"===F?M("bottomLeft",
qe.pt(G,a+(E?A:-A))):M("leftCenter",qe.pt(G,(a+(E?2*A:0))/2))}},{key:"resizeContainer",value:function(a,g){var l=this.direction,r=this.layoutableSubmorphBounds,v=this.resizeSubmorphs,y=this.spacing,A=this.container;this.autoResize&&("centered"===l?(l=r[0].left(),r=qe.arr.last(r).right()+l):r=qe.arr.last(r).right()+y,a=qe.pt(Math.max(a.x,r),v?A.height:a.y+2*y),this.changePropertyAnimated(A,"extent",a,g))}},{key:"getStartX",value:function(a){var g=this.layoutableSubmorphBounds,l=this.spacing,r=this.direction;
var v=(g.length-1)*l;g=$jscomp.makeIterator(g);for(var y=g.next();!y.done;y=g.next())v+=y.value.width;return Math.max(0,"rightToLeft"===r?a.x-v-2*l:"centered"===r?a.x/2-v/2-l:0)+l}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,g=this.layoutableSubmorphBounds,l=this.autoResize,r=(g.length+1)*this.spacing,v=0,y=0,A=0;A<g.length;A++){var E=g[A],F=E.height;v+=E.width;y=Math.max(F,y)}g=qe.pt(v+r,y);l||(g=g.maxPt(a.extent));return g}}],[{key:"className",get:function(){return"HorizontalLayout"}}],
d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14645,end:18506})}(qe.FloatLayout));qe.HorizontalLayout=Ev;qe.HorizontalLayout=Ev;qe.HorizontalLayout=Ev;var nI=Ba("aA",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("ProportionalLayout")&&
"function"===typeof d.ProportionalLayout?d.ProportionalLayout:d.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"name",value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=qe.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+
qe.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(hc._get(Object.getPrototypeOf(m.prototype),"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,g){var l=this._submorphSettings;a=this.container;g=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=qe.pt(0,0);if(l&&a){l=$jscomp.makeIterator(l);for(var r=l.next();!r.done;r=
l.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;(r=$jscomp.makeIterator(this._morphsMatchingSelector(a,r)).next().value)&&g.set(r,v)}this.proportionalLayoutSettingsForMorphs=g}}},{key:"onSubmorphChange",value:function(a,g,l,r){"name"===g.prop&&(l=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,l,!0);return hc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||
{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,g,l){l=void 0===l?!1:l;"string"===typeof g&&(g={x:g,y:g});this.proportionalLayoutSettingsForMorphs.set(a,Object.assign({},this.settingsFor(a),{},g));l&&(g=this.submorphSettings.filter(function(r){return r[0]!==a.name}),g.push([a.name,this.settingsFor(a)]),this._submorphSettings=g)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=
a,this.changeSubmorphSettings(a);else qe.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},{key:"changeSubmorphSettings",value:function(a){var g=this,l={};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;l={$jscomp$loop$prop$setting$2249:l.$jscomp$loop$prop$setting$2249},r=a.next()){r=$jscomp.makeIterator(r.value);var v=r.next().value;l.$jscomp$loop$prop$setting$2249=r.next().value;this._morphsMatchingSelector(this.container,
v).forEach(function(y){return function(A){return g.changeSettingsFor(A,y.$jscomp$loop$prop$setting$2249)}}(l))}}},{key:"_morphsMatchingSelector",value:function(a,g){var l=this,r=[];if(!g)return r;g.isMorph?r=[g]:g instanceof RegExp?r=a.submorphs.filter(function(v){return v.name.match(g)}):"string"===typeof g?r=a.submorphs.filter(function(v){return v.name===g}):Array.isArray(g)&&(r=qe.arr.flatmap(g,function(v){return l._morphsMatchingSelector(a,v)}));return r}},{key:"refreshBoundsCache",value:function(){var a=
this.container.extent,g=this.lastExtent;g&&!a.eqPt(g)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(g)));this.lastExtent=a;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(l){return l.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.container,l=this.extentDelta,r=l.x;l=l.y;var v=(g||{}).extent;if(!this.active&&g&&(0!=r||0!=l)){this.extentDelta=qe.pt(0,0);this.active=!0;hc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var y=this.layoutableSubmorphs;
g=v.scaleByPt(v.addXY(-r,-l).invertedSafely());v=$jscomp.makeIterator(y);for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.settingsFor(y),E=A.x,F=A.y,G=A=0,I=0,M=0;"move"===E&&(A=r);"move"===F&&(G=l);"resize"===E&&(I=r);"resize"===F&&(M=l);if("scale"===E||"scale"===F)E=qe.pt("scale"===E?g.x:1,"scale"===F?g.y:1),this.changePropertyAnimated(y,"position",y.position.scaleByPt(E),a),this.changePropertyAnimated(y,"extent",y.extent.scaleByPt(E),a);(A||G)&&this.changePropertyAnimated(y,"position",y.position.addXY(A,
G),a);(I||M)&&this.changePropertyAnimated(y,"extent",y.extent.addXY(I,M),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}}],[{key:"className",get:function(){return"ProportionalLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:18516,end:24002})}(qe.Layout));qe.ProportionalLayout=nI;qe.ProportionalLayout=nI;qe.ProportionalLayout=nI;var oI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof d.CenteredTilingLayout?d.CenteredTilingLayout:d.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"name",
value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;hc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var g=this.spacing,l=this.layoutableSubmorphs,r=g+this.border.top;l=l.slice();for(var v={};l.length;){v.$jscomp$loop$prop$remainingWidth$2251=a;var y=qe.arr.takeWhile(l,
function(F){return function(G){G=F.$jscomp$loop$prop$remainingWidth$2251-(G.width+2*g);if(0>G)return!1;F.$jscomp$loop$prop$remainingWidth$2251=G;return!0}}(v));y.length?l=qe.arr.withoutAll(l,y):(y=[l.shift()],v.$jscomp$loop$prop$remainingWidth$2251=0);var A=qe.pt(v.$jscomp$loop$prop$remainingWidth$2251/2+g+this.border.left,r);y=$jscomp.makeIterator(y);for(var E=y.next();!E.done;E=y.next())E=E.value,E.position=A,A=A.addXY(2*g+E.width,0),r=Math.max(r,E.bottom);r+=2*g;v={$jscomp$loop$prop$remainingWidth$2251:v.$jscomp$loop$prop$remainingWidth$2251}}this.active=
!1}}}],[{key:"className",get:function(){return"CenteredTilingLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24011,end:25287})}(qe.TilingLayout);qe.CenteredTilingLayout=oI;qe.CenteredTilingLayout=oI;qe.CenteredTilingLayout=oI;var pI=Ba("aZ",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=d.hasOwnProperty("TilingLayout")&&"function"===typeof d.TilingLayout?d.TilingLayout:d.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=
a.verticalAlign||"top";this._orderByIndex=a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+qe.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;hc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a);var g=this.axis,l=this.align,r=this.border,v=this.spacing,
y=this.layoutableSubmorphs,A=this.getOptimalWidth(this.container),E=(g="row"==g)?"left":"top",F=g?"x":"y",G=g?"y":"x",I=0,M=v+r[g?"top":"left"],L="topLeft";switch(this._verticalAlign){case "top":L="topLeft";break;case "center":L="leftCenter";break;case "bottom":L="bottomLeft"}for(;y.length;){var S=A-v,R=qe.arr.takeWhile(y,function(Ea){Ea=Ea.bounds().extent();Ea=S-(Ea[F]+v);if(0>Ea)return!1;S=Ea;return!0});R.length?y.splice(0,R.length):(R=[y.shift()],S=0);I=qe.arr.max(R.map(function(Ea){return Ea.bounds().extent()[G]}));
if(g)switch(l){case "left":var aa=qe.pt(v,M);break;case "center":aa=qe.pt(S/2+v+r[E],M);break;case "right":aa=qe.pt(S-v,M)}else switch(l){case "left":aa=qe.pt(M,v);break;case "center":aa=qe.pt(M,S/2+v+r[E]);break;case "right":aa=qe.pt(M,S-v)}"bottomLeft"==L&&(aa=aa.addXY(0,I));R=$jscomp.makeIterator(R);for(var ra=R.next();!ra.done;ra=R.next())ra=ra.value,this.changePropertyAnimated(ra,L,aa,a),ra=ra.bounds().extent(),aa=g?aa.addXY(v+ra[F],0):aa.addXY(0,v+ra[F]);M+=v+I;I=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,g=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().width>l?r.bounds().width:l},0)+g+a}},{key:"getMinHeight",value:function(){var a=this.border,g=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(l,r){return r.bounds().height>l?r.bounds().height:l},0)+g+a}},{key:"getOptimalWidth",value:function(a){var g=this.axis,l=this.border,r=l.left,v=l.top,y=l.right;l=l.bottom;a="row"==g?a.width-r-y:a.height-v-l;g="row"==g?
this.getMinWidth():this.getMinHeight();return Math.max(a,g)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:"className",get:function(){return"TilingLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:25296,end:30811})}(qe.Layout));qe.TilingLayout=pI;qe.TilingLayout=pI;qe.TilingLayout=pI;var qI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("CellGroup")&&"function"===typeof d.CellGroup?d.CellGroup:d.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=
a.morph,l=a.layout;this.state={cells:[a.cell],layout:l,align:a.align,resize:l.fitToCell};l&&l.addGroup(this);this.morph=g}},{key:"morph",get:function(){var a=this.state,g=a.morph;a=a.layout;return g?g.isMorph?g:a.layoutableSubmorphs.find(function(l){return l.name==g}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||
"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var g=a&&this.layout.getCellGroupFor(a);g&&(g.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var g=this.morph;if(g){var l=this.bounds(),r=this.compensateOrigin?this.layout.container.origin.negated():qe.pt(0,0);if(a){var v=this.resize?l.extent():
g.extent,y=a;a=y.duration;y=y.easing;var A={};g.animate((A[this.alignedProperty||this.align]=l[this.align]().addPt(r),A.extent=v,A.duration=a,A.easing=y,A))}else this.resize&&(g.extent=l.extent()),g[this.alignedProperty||this.align]=l[this.align]().addPt(r);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,
g){return a.union(g)}):qe.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(g){return g==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,g){a.group=(void 0===g?null:g)||new qe.CellGroup({morph:null,layout:this.layout,cell:a});qe.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",
value:function(a){var g=this;a.cells.forEach(function(l){g.connect(l)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(g){return(null==g.left||g.left.group!=a)&&(null==g.top||g.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(g){return(null==g.right||g.right.group!=a)&&(null==g.bottom||g.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:"className",get:function(){return"CellGroup"}}],
d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30820,end:34026})}(void 0);qe.CellGroup=qI;qe.CellGroup=qI;qe.CellGroup=qI;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("LayoutAxis")&&"function"===typeof d.LayoutAxis?d.LayoutAxis:d.LayoutAxis=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,g=[];a=a.before;)g=[a].concat($jscomp.arrayFromIterable(g));return g}},{key:"axisAfter",get:function(){for(var a=
this,g=[];a=a.after;)g=[].concat($jscomp.arrayFromIterable(g),[a]);return g}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},
{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(g){return g.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var g=this;if(qe.obj.isNumber(a)){var l=a;a=!0}this.items.forEach(function(v){v.fixed[g.dimension]=a});var r=
this.containerLength;void 0!=l&&(this[this.dimension]=l);this.adjustOtherProportions(a);this.containerLength=r}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var g=this;this.items.forEach(function(l){l[g.dimension]=qe.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var g=this;this.items.forEach(function(l){l.proportion[g.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var g=this;this.items.forEach(function(l){l.min[g.dimension]=0>l.min[g.dimension]+a?0:l.min[g.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var g=this,l=this.axisBefore,r=this.axisAfter,v=qe.arr.sum([].concat($jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(r)).filter(function(E){return!E.fixed}).map(function(E){return E.proportion})),
y=function(E){return E.proportion/=v},A=function(E){return E.proportion*=g.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=v);l.forEach(a?y:A);r.forEach(a?y:A)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var g;0>this.length+a&&(a=
-this.length);(g=this.axisAfter.find(function(l){return!l.fixed}))?(a=Math.min(a,g.length),this.length+=a,g.length-=a,this.adjustProportion(),g.adjustProportion()):(g=this.axisBefore.reverse().find(function(l){return!l.fixed}))?(g.length-=a,this.length+=a,this.adjustProportion(),g.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(l){return l.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(l){return!l.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),g=(this.containerLength-this.staticLength)/a.length;a.map(function(l){l.fixed||(l.length=g);return l}).forEach(function(l){return l.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:"className",get:function(){return"LayoutAxis"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34666,end:40329})})(void 0);var rI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("LayoutColumn")&&
"function"===typeof d.LayoutColumn?d.LayoutColumn:d.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new qe.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new qe.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(g){g.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(g){g.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new qe.LayoutColumn(new qe.LayoutCell({column:qe.arr.withN(this.items.length,null),layout:this.layout}));qe.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.height=l.height;g.fixed.height=l.fixed.height;g.frozen.height=l.frozen.height;g.proportion.height=l.proportion.height;g.min.height=l.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;qe.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.right=l;l.left=g});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.left&&(l.left.right=l.right);l.right&&(l.right.left=l.left);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:"className",get:function(){return"LayoutColumn"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40338,end:42707})}(qe.LayoutAxis);qe.LayoutColumn=rI;qe.LayoutColumn=rI;qe.LayoutColumn=rI;var sI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
m=d.hasOwnProperty("LayoutRow")&&"function"===typeof d.LayoutRow?d.LayoutRow:d.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",
get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new qe.LayoutRow(new qe.LayoutCell({row:qe.arr.withN(this.items.length,null),layout:this.layout}));qe.arr.zip(a.items,this.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.width=l.width;g.fixed.width=l.fixed.width;g.frozen.width=l.frozen.width;g.proportion.width=l.proportion.width;g.min.width=l.min.width});return a}},{key:"paddingTop",set:function(a){this.items.forEach(function(g){g.padding.y=
a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(g){g.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new qe.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||(this._after=this.origin.bottom&&new qe.LayoutRow(this.origin.bottom))}},
{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;qe.arr.zip(this.items,a.items).forEach(function(g){var l=$jscomp.makeIterator(g);g=l.next().value;l=l.next().value;g.bottom=l;l.top=g});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},{key:"height",get:function(){return this.length}},
{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,g=this.before||this.after;this.items.forEach(function(l){l.top&&(l.top.bottom=l.bottom);l.bottom&&(l.bottom.top=l.top);l.group.disconnect(l);a.layout.removeGroup(l.group)});this.before&&(this.before._after=
null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());g.equalizeDynamicAxis()}}],[{key:"className",get:function(){return"LayoutRow"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:42716,end:45166})}(qe.LayoutAxis);qe.LayoutRow=sI;qe.LayoutRow=
sI;qe.LayoutRow=sI;var tI=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("LayoutCell")&&"function"===typeof d.LayoutCell?d.LayoutCell:d.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a.row,l=a.column,r=a.top,v=a.left,y=a.right,A=a.bottom;a=a.layout;var E;g=$jscomp.makeIterator(g||
[]);var F=g.next().value;g=$jscomp.arrayFromIterator(g);l=$jscomp.makeIterator(l||[]);var G=l.next().value;l=$jscomp.arrayFromIterator(l);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=r;this.left=v;this.bottom=A;this.right=y;this.padding=qe.rect(0,0,0,0);0<g.length?this.right=new qe.LayoutCell({row:g,left:this,layout:a}):0<l.length&&(this.bottom=new qe.LayoutCell({column:l,top:this,layout:a}));this.proportion={width:1/(1+this.before.length+
this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(E=a&&a.getCellGroupFor(F||G))?E.connect(this):this.group=new qe.CellGroup({cell:this,morph:F||G,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",get:function(){return this.collect({neighbor:"bottom",append:!0})}},
{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var g=a.neighbor,l=a.prepend;a=a.append;for(var r=[],v=this;v=v[g];)l&&(r=[v].concat($jscomp.arrayFromIterable(r))),a&&(r=[].concat($jscomp.arrayFromIterable(r),[v]));return r}},{key:"col",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.right,l--;if(!g)throw Error(a+" out of bounds! Last column was "+(a-l-
1));return new qe.LayoutColumn(g)}},{key:"row",value:function(a){for(var g=this,l=a;0<l&&g;)g=g.bottom,l--;if(!g)throw Error(a+" out of bounds! Last row was "+(a-l-1));return new qe.LayoutRow(g)}},{key:"extent",get:function(){return qe.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},{key:"totalStaticWidth",get:function(){return qe.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return qe.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return qe.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},
{key:"dynamicHeight",get:function(){return qe.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return qe.pt(qe.arr.sum(this.before.map(function(a){return a.width})),
qe.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:"className",get:function(){return"LayoutCell"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:45175,end:48921})}(void 0);qe.LayoutCell=tI;qe.LayoutCell=tI;qe.LayoutCell=tI;var tz=Ba("aj",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),m=d.hasOwnProperty("GridLayout")&&"function"===typeof d.GridLayout?d.GridLayout:d.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){for(var a=[],g=[],l=[],r={},v=$jscomp.makeIterator(qe.arr.range(0,this.rowCount-1)),y=v.next();!y.done;y=v.next())a.push(this.grid.row(y.value).items.map(function(E){return E.group.state.morph?E.group.state.morph.name||E.group.state.morph:null}));v=$jscomp.makeIterator(qe.arr.range(0,this.rowCount-1));for(y=v.next();!y.done;y=v.next()){y=y.value;var A=this.grid.row(y);g.push(y,Object.assign({},A.fixed?{fixed:A.length}:{height:A.height},{paddingTop:A.paddingTop,paddingBottom:A.paddingBottom}))}v=
$jscomp.makeIterator(qe.arr.range(0,this.columnCount-1));for(y=v.next();!y.done;y=v.next())y=y.value,A=this.grid.col(y),l.push(y,Object.assign({},A.fixed?{fixed:A.length}:{},{paddingLeft:A.paddingLeft,paddingRight:A.paddingRight}));v=$jscomp.makeIterator(this.cellGroups);for(y=v.next();!y.done;y=v.next())y=y.value,y.state.morph&&(r["string"==typeof y.state.morph?y.state.morph:y.morph.name]=qe.obj.select(y,["align","resize"]));return{autoAssign:!1,grid:a,rows:g,columns:l,groups:r}}},{key:"__serialize__",
value:function(){return{__expr__:"new GridLayout("+qe.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,g=this.ensureGrid(this.config).map(function(l){return new qe.LayoutRow(new qe.LayoutCell({row:l,layout:a}))});g.reduce(function(l,r){return l.attachTo(r)});this.config.autoAssign&&this.autoAssign(this.notInLayout);this.grid=g[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();
this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var g in a){var l=this.getCellGroupFor(this.container.getSubmorphNamed(g)),r=a[g],v=r.resize,y=void 0===r.align?"topLeft":r.align;r=void 0===r.alignedProperty?"topLeft":r.alignedProperty;l&&(void 0!=v&&(l.resize=v),l.align=y,l.alignedProperty=r)}}},{key:"initRowsAndColumns",value:function(){var a=this.config,g=void 0===a.columns?[]:a.columns,l=$jscomp.makeIterator(qe.arr.toTuples(void 0===a.rows?[]:a.rows,2));
for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Object.assign(this.row(a),r)}g=$jscomp.makeIterator(qe.arr.toTuples(g,2));for(a=g.next();!a.done;a=g.next())l=$jscomp.makeIterator(a.value),a=l.next().value,r=l.next().value,Object.assign(this.col(a),r)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},
{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(g){return g.resize=a});this.apply()}},{key:"notInLayout",get:function(){return qe.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},
{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){qe.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,g,l;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(r){r.prepareForResize(a.container.height);g=a.grid.totalStaticHeight;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.height-g))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(r){r.prepareForResize(a.container.width);
l=a.grid.totalStaticWidth;return r}).forEach(function(r){r.fixed||(r.length=r.proportion*Math.max(0,a.container.width-l))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,hc._get(Object.getPrototypeOf(m.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),this.container.extent=qe.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(g){g&&
g.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),g=a.next();!g.done;g=a.next())if(g=g.value,g.morph&&!g.bounds().equals(g.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",value:function(a){return a&&this.cellGroups.find(function(g){return g.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var g=this.getCellGroupFor(a);g&&(g.morph=null);hc._get(Object.getPrototypeOf(m.prototype),
"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var g=this,l=a.grid,r=a.rowCount,v=a.columnCount;l=l||[[]];r=r||l.length;v=v||qe.arr.max(l.map(function(y){return y.length}));l.length<r&&(l=l.concat(qe.arr.withN(r-l.length,[])));return l=l.map(function(y){y.length<v&&(y=y.concat(qe.arr.withN(v-y.length,null)));return y.map(function(A){return A&&A.isMorph?(A.owner!=g.container&&g.container.addMorph(A),A):A?g.container.getSubmorphNamed(A)||
A:A})})}},{key:"autoAssign",value:function(a){var g=this;a.forEach(function(l){var r,v=Infinity;g.cellGroups.forEach(function(y){y.morph||y.cells.forEach(function(A){A=A.position.dist(l.position);A<v&&(r=y,v=A)})});r&&(r.morph=l)})}}],[{key:"className",get:function(){return"GridLayout"}}],d,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:48930,end:55912})}(qe.Layout));qe.GridLayout=tz;qe.GridLayout=tz;qe.GridLayout=tz;var Xba=Object.freeze({__proto__:null,CustomLayout:lI,SnapLayout:mI,VerticalLayout:sz,HorizontalLayout:Ev,ProportionalLayout:nI,CenteredTilingLayout:oI,TilingLayout:pI,CellGroup:qI,LayoutColumn:rI,LayoutRow:sI,LayoutCell:tI,GridLayout:tz});Ba("bV",Xba);var zf=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");zf.getAllPartResources=ST;zf.loadPart=TL;zf.savePart=TT;zf.interactivelySavePart=
ZG;zf.interactivelyLoadObjectFromPartsBinFolder=UT;zf.interactivelySaveObjectToPartsBinFolder=VT;zf.saveObjectToPartsbinFolder=WT;zf.loadObjectFromPartsbinFolder=$G;zf.buildCommitEditor=XT;zf.resource=w;zf.Resource=gh;zf.registerExtension=D;zf.Path=Ti;zf.obj=Ng;zf.date=ju;zf.promise=xh;zf.HorizontalLayout=Ev;zf.VerticalLayout=sz;zf.morph=ab;zf.pt=th;zf.Color=Tg;zf.Rectangle=Re;zf.connect=yl;zf.emit=Vl;zf.SnapshotPackageHelper=qO;zf.ensureCommitInfo=UG;zf.MorphicDB=ix;zf.createMorphSnapshot=BA;zf.getAllPartResources=
ST;zf.getAllPartResources=ST;zf.loadPart=TL;zf.loadPart=TL;zf.savePart=TT;zf.savePart=TT;zf.interactivelySavePart=ZG;zf.interactivelySavePart=ZG;zf.interactivelyLoadObjectFromPartsBinFolder=UT;zf.interactivelyLoadObjectFromPartsBinFolder=UT;zf.interactivelySaveObjectToPartsBinFolder=VT;zf.interactivelySaveObjectToPartsBinFolder=VT;zf.saveObjectToPartsbinFolder=WT;zf.saveObjectToPartsbinFolder=WT;zf.loadObjectFromPartsbinFolder=$G;zf.loadObjectFromPartsbinFolder=$G;var XW=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),
m=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){this.commit=a;this.snapshot=g;this._db=l}},{key:"db",get:function(){return this._db||zf.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress){r=a;v=r._id;y=r.name;A=r.type;if(!v)throw Error("No id of commit, cannot save!");return E.yield(l.db.commit(A,y,g,a,void 0,v),2)}a=E.yieldResult;l.commit=a;l.snapshot=g;return E.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,g){var l=this,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){r=zf.promise.deferred();v=r.promise;y=r.resolve;A=r.reject;E=l;Object.assign(zf.buildCommitEditor(),{commit:Object.assign({},l.commit,{},a),cancel:function(){(this.getWindow()||
this).remove();A("canceled")},accept:function(){var G=this,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return L.setCatchFinallyBlocks(2),L.yield(E.saveModifiedSnapshot(G.commit,g),4);if(2!=L.nextAddress)return I=L.yieldResult,(G.getWindow()||G).remove(),y(G.commit=I),L.leaveTryBlock(0);M=L.enterCatchBlock();G.showError(M);A(M);L.jumpToEnd()})}}).openInWindow({title:"commit"});return F.return(v)})}},{key:"interactivelyEditMetadata",value:function(a){var g=
this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(g.interactivelySaveModifiedSnapshot(g.commit,g.snapshot),2);l=r.yieldResult;"function"===typeof a&&a({commit:l,snapshot:g.snapshot});return r.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var g=this,l,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return l=g,r=l.commit,v=l.snapshot,y=r,A=y._id,E=y.name,F=y.type,L.yield(System.import("lively.ide/text-editor.js"),
2);I=L.yieldResult;M=I.default;M.openURL("<"+F+"/"+E+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(S){var R,aa,ra,Ea,K,Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:if(R=v){U.jumpTo(2);break}return U.yield(g.db.fetchSnapshot(void 0,void 0,A),3);case 3:R=U.yieldResult;case 2:aa=R;ra=JSON.stringify(aa,null,2);if(ra===G){U.jumpTo(4);break}return U.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",
{fontWeight:"normal"}]),5);case 5:if(Ea=U.yieldResult,!Ea)return U.return({saved:!1,message:"canceled"});case 4:return K=JSON.parse(S.ui.contentText.textString),U.yield(g.interactivelySaveModifiedSnapshot(g.commit,K),6);case 6:return r=U.yieldResult,v=K,G=S.ui.contentText.textString,Z={saved:!0,snapshot:K,commit:r},"function"===typeof a&&a(Z),U.return(Z)}})},customLoadContentAction:function(S,R){var aa,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){if(1==Ea.nextAddress)return(aa=
v)?Ea.jumpTo(2):Ea.yield(g.db.fetchSnapshot(void 0,void 0,A),3);2!=Ea.nextAddress&&(aa=Ea.yieldResult);ra=aa;return Ea.return({content:G=JSON.stringify(ra,null,2),url:F+"/"+E+".json"})})}});L.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var g=this,l,r,v,y,A,E,F,G,I,M,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){switch(R.nextAddress){case 1:l=g;r=l.commit;v=l.snapshot;y=r;A=y._id;if(E=v){R.jumpTo(2);break}return R.yield(g.db.fetchSnapshot(void 0,void 0,
A),3);case 3:E=R.yieldResult;case 2:return F=E,G=(new zf.SnapshotPackageHelper(F)).filesInPackages(),I=G.map(function(aa){return{isListItem:!0,string:aa.url,value:aa}}),R.yield($world.filterableListPrompt("Select file to edit",I,{historyId:"object-serialization-debugger-hist"}),4);case 4:return M=R.yieldResult,L=$jscomp.makeIterator(M.selected),(S=L.next().value)?R.return(g.interactivelyEditFileInSnapshotPackage(S,a)):R.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,
g,l){var r=this,v,y,A,E,F,G,I,M,L,S,R,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:v=r;y=v.snapshot;A=v.commit;E=A._id;F=A.name;G=A.type;if(I=y){ra.jumpTo(2);break}return ra.yield(r.db.fetchSnapshot(void 0,void 0,E),3);case 3:I=ra.yieldResult;case 2:return M=I,L=a.get(M),ra.yield(System.import("lively.ide/text-editor.js"),4);case 4:return S=ra.yieldResult,R=S.default,aa=R.openURL("<"+G+"/"+F+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",
customSaveAction:function(Ea){var K,Z,U,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:K=a.get(M);if(K===L){na.jumpTo(2);break}return na.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(Z=na.yieldResult,!Z)return na.return({saved:!1,message:"canceled"});case 2:return a.set(M,Ea.ui.contentText.textString),U=r,na.yield(r.interactivelySaveModifiedSnapshot(r.commit,
M),4);case 4:return U.commit=na.yieldResult,V={commit:r.commit,snapshot:M,saved:!0},"function"===typeof g&&g(V),na.return(V)}})},customLoadContentAction:function(Ea,K){return{content:a.get(M),url:a.url}}}),l&&aa.whenRendered().then(function(){return aa.lineNumber=l.row}),ra.return(aa)}})}}],[{key:"className",get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9471,end:14581})}(void 0);zf.SnapshotEditor=XW;zf.SnapshotEditor=XW;zf.SnapshotEditor=XW;zf.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),m=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"dirList",value:function(a,g){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?r.yield(zf.resource(l.url.replace("part://","styleguide://")).dirList(a,g),2):r.return(r.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");
})}},{key:"read",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(zf.resource(a.url.replace("part://","styleguide://")).read(),2);g=r.yieldResult;l=g.copy();l.isComponent=!1;l.name="a"+l.constructor.className;l.withAllSubmorphsDoExcluding(function(v){v!=l&&v.master||delete v._parametrizedProps},function(v){return v.master&&v!=l});l.master=g;l.master.applyIfNeeded(!0);l.withAllSubmorphsDo(function(v){if("function"==typeof v.onLoad)v.onLoad()});
return r.return(l)})}}],[{key:"className",get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14631,end:15829})})(zf.Resource);var YW={name:"part",matches:function(b){return b.match(zf.partURLRe)},resourceClass:zf.PartResource};zf.resourceExtension=
YW;zf.resourceExtension=YW;zf.resourceExtension=YW;zf.registerExtension(zf.resourceExtension);zf.buildCommitEditor=XT;zf.buildCommitEditor=XT;var Pg=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");Pg.loadWorldFromURL=UL;Pg.loadWorldFromCommit=VL;Pg.loadWorldFromDB=WL;Pg.loadWorld=XL;Pg.loadLocalConfig=function(){var b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),m.setCatchFinallyBlocks(2),
m.yield(Pg.resource(b.id).exists(),4);case 4:if(!m.yieldResult){m.jumpTo(5);break}return m.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:m.leaveTryBlock(0);break;case 2:d=m.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),m.jumpToEnd()}})};Pg.setupLivelyShell=function(b){var d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return v.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=v.yieldResult,m=d.default,v.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=v.yieldResult,g=a.resourceExtension,l=b,r=l.l2lClient,m.installLively2LivelyServices(r),g.resourceClass.defaultL2lClient=r,Pg.registerResourceExension(g),console.log("[lively] lively.shell setup"),v.jumpToEnd()}})};Pg.setupLively2Lively=function(b){var d,m,a,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return d=
b.getCurrentUser(),m={world:b.name},d&&(m.userToken=d.token,m.userRealm=d.realm),r.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return r.yield(System.import("lively.2lively/client.js"),3);case 3:return a=r.yieldResult,g=a.default,r.yield(g.forLivelyInBrowser(m),4);case 4:return l=r.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?Pg.reportWorldLoad(b,d):(l._onUserChange=function(v){l.isOnline()&&v.user&&(v=v.user,l.info=Object.assign({},l.info,
{userToken:v.token,userRealm:v.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},Pg.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){Pg.reportWorldLoad(b,d)}),l.on("registered",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("connected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var v=b.get("user flap");
v&&v.updateNetworkIndicator(l)}),l.on("disconnected",function(){var v=b.get("user flap");v&&v.updateNetworkIndicator(l)})),r.return(l)}})};Pg.interactivelySaveWorld=aE;Pg.reportWorldLoad=function(b,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(m){return console.warn("report-world-load failed: "+m)})};Pg.resource=
w;Pg.registerResourceExension=D;Pg.Color=Tg;Pg.Path=Ti;Pg.obj=Ng;Pg.date=ju;Pg.promise=xh;Pg.MorphicEnv=Yr;Pg.loadWorldFromResource=tK;Pg.createMorphSnapshot=BA;Pg.MorphicDB=ix;Pg.loadObjectFromPartsbinFolder=$G;Pg.ensureCommitInfo=UG;Pg.pathForBrowserHistory=ua;Pg.subscribe=Ls;Pg.emit=Vl;Pg.loadWorldFromURL=UL;Pg.loadWorldFromURL=UL;Pg.loadWorldFromCommit=VL;Pg.loadWorldFromCommit=VL;Pg.loadWorldFromDB=WL;Pg.loadWorldFromDB=WL;Pg.loadWorld=XL;Pg.loadWorld=XL;Pg.interactivelySaveWorld=aE;Pg.interactivelySaveWorld=
aE;var Tk=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");Tk.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var d=b.next().value;b.next();return JSON.parse(atob(d))};Tk.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};Tk.makeRequest=function(b,d,m,a){a=void 0===a?{}:a;d={method:void 0===d?"GET":d,mode:"cors"};m&&(d.body=m);d.redirect="follow";d.headers=
Object.assign({},a);return fetch(b,d)};Tk.POST=function(b,d){var m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(Tk.makeRequest(b,"POST",d,{}),2);case 2:return m=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(m.text(),5);case 5:a=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(a&&"application/json"===m.headers.get("content-type"))try{g=JSON.parse(a)}catch(r){}if(!g)throw Error("Unexpected response: "+
a);return l.return(g)}})};var cC=Ba("bM",function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.realm=g;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",
value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,g,l){var r=this,v,y,A,E,F,G,I,M,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){if(1==R.nextAddress)return v=r,y=v.email,A=v.createdAt,E=v.roles,F=v.name,G="register"===a?{password:g,email:y,createdAt:A,roles:E,name:F}:{password:g,name:F},R.yield(Tk.POST(l+"/"+a,G),2);I=R.yieldResult;if(I.error)return R.return(I);M=I;L=M.token;S=Tk.jwtTokenDecode(L);E=S.roles;A=S.createdAt;y=S.email;Object.assign(r,{roles:E,
createdAt:A,email:y,token:L});return R.return({status:I.status})})}},{key:"verify",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(Tk.POST(a.realm+"/verify",{token:a.token}),2);g=r.yieldResult;l=g.error;return r.return(l?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",
value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){if(!g.isLoggedIn)throw Error("To check password, user needs to login.");return y.yield(Tk.POST(g.realm+"/check-password",{token:g.token,password:a}),2)}l=y.yieldResult;r=l.error;v=l.status;if(r)throw Error(r);return y.return(v)})}},{key:"modify",value:function(a){var g=this,l,r,v,y,A,E,F,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(Tk.POST(g.realm+
"/modify",{token:g.token,changes:a}),2);l=I.yieldResult;r=l.error;v=l.status;y=l.token;if(r)return I.return({error:r});y&&(A=Tk.jwtTokenDecode(y),E=A.roles,F=A.createdAt,G=A.email,Object.assign(g,{roles:E,createdAt:F,email:G,token:y}));return I.return({status:v})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:"className",get:function(){return"User"}},{key:"guest",get:function(){return Tk.guestUser}},{key:"named",
value:function(a,g){var l=a+"-"+g,r=Tk.userMap.get(l);r||(r=new this(a,g),Tk.userMap.set(l,r));return r}},{key:"fromToken",value:function(a,g){var l=Tk.jwtTokenDecode(a),r=l.roles,v=l.createdAt,y=l.email;return Object.assign(this.named(l.name,g),{roles:r,createdAt:v,email:y,token:a})}},{key:"clearCache",value:function(){Tk.userMap=new Map}}],d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));Tk.User=cC;Tk.User=cC;Tk.User=cC;var dC=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),m=d.hasOwnProperty("GuestUser")&&"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",
value:function(){return!1}},{key:"loginOrRegister",value:function(a,g,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){throw Error("Guest user cannot "+a+"!");})}}],[{key:"className",get:function(){return"GuestUser"}}],d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,
end:3702})}(Tk.User);Tk.GuestUser=dC;Tk.GuestUser=dC;Tk.GuestUser=dC;Tk.userMap=Tk.userMap||new Map;Tk.guestUser=Tk.guestUser||Tk.GuestUser.named("guest-"+Tk.guid(),null);var uz=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");uz.User=cC;uz.GuestUser=dC;var ZW=function(b){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),m=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a.isGuestUser?y.jumpTo(2):y.yield(a.login(g),3);if(2!=y.nextAddress&&(r=y.yieldResult,v=r.error))throw Error(v);
l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"logout",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{g.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(r){}a=a&&a.isGuestUser?a:uz.User.guest;lively.notifications&&lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);return l.return(a)})}},{key:"register",value:function(a,g){var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return y.yield(a.register(g),2)}r=y.yieldResult;if(v=r.error)throw Error(v);l.saveUserToLocalStorage(a);return y.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var g=localStorage["lively.user"]||sessionStorage["lively.user"];if(g)return g=JSON.parse(g),g.isGuest?uz.GuestUser.named(g.name,null):uz.User.fromToken(g.token,a)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?
!1:uz.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&!a.token)return!1;lively.notifications&&lively.notifications.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),
!0}catch(g){return console.warn("Could not save user into local/sessionStorage: "+g),!1}}}],[{key:"className",get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:81,
end:2583})}(void 0);ZW=uz.UserRegistry;var tO=Ba("bL",ZW);uz.default=ZW;var ME=lively.FreezerRuntime.recorderFor("lively.user/index.js");ME.User=cC;ME.ClientUser=cC;ME.GuestUser=dC;ME.GuestUser=dC;ME.default=tO;ME.UserRegistry=tO;var Gua=Object.freeze({__proto__:null,ClientUser:cC,GuestUser:dC,UserRegistry:tO}),Ug=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");Ug.bowser=qv;Ug.Rectangle=Re;Ug.Color=Tg;Ug.pt=th;Ug.arr=ng;Ug.promise=xh;Ug.Path=Ti;Ug.obj=Ng;Ug.signal=xf;Ug.config=am;Ug.MorphicEnv=
Yr;Ug.Morph=Ol;Ug.TooltipViewer=LE;Ug.Tooltip=bC;Ug.loadWorldFromURL=UL;Ug.loadWorldFromDB=WL;Ug.loadWorldFromCommit=VL;Ug.loadWorld=XL;Ug.touchInputDevice=Qq;Ug.UserRegistry=tO;Ug.loadMorphFromSnapshot=Pu;Ug.emit=Vl;var Qy=Ba("aB",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new Ug.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this._renderer=null;this._tooltipViewer=new Ug.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(a,
g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);if(a.props.submorphs)for(a=a.props.submorphs.value,g=a.length;g--;)l.refForId(a[g].id).realObj.isHand&&Ug.arr.removeAt(a,g)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(hc._get(Object.getPrototypeOf(m.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=
function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(A){return!A.isEpiMorph&&!A.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return A.return(!a.windowBounds().extent().equals(a.extent))})},r=0;case 2:if(!(v=5>r)){y.jumpTo(4);break}return y.yield(l(),5);case 5:v=y.yieldResult;case 4:if(!v){y.jumpTo(3);
break}r++;g();y.jumpTo(2);break;case 3:return a.relayout(),y.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(g){return g instanceof Ug.Hand&&g.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",
value:function(a,g){g=void 0===g?!1:g;var l=this.existingHandForPointerId(a);return l?l:!l&&this.firstHand&&g?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new Ug.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return Ug.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),
function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return Ug.UserRegistry.current.loadUserFromLocalStorage(Ug.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();
this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&Ug.config.altClickDefinesThat){var g=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=g},100);g.show();a.stop();console.log('Set global "that" to '+g)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},
{key:"onUnload",value:function(a){this.submorphs.forEach(function(g){if("function"===typeof g.onWorldUnload)g.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,
g=a.positionChangedTime,l=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var r=document.documentElement;500>Date.now()-g&&!Ug.bowser.firefox?(r.scrollLeft=l,r.scrollTop=a):(this.setProperty("scroll",Ug.pt(r.scrollLeft,r.scrollTop)),this._cachedWindowBounds=null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.whenRendered(),2);if(3!=y.nextAddress)return g._cachedWindowBounds=
null,"elastic"!==g.resizePolicy?y.jumpTo(3):y.yield(g.execCommand("resize to fit window"),3);g.updateVisibleWindowMorphs();l=$jscomp.makeIterator(g.submorphs);for(r=l.next();!r.done;r=l.next())if(v=r.value,"function"===typeof v.onWorldResize)v.onWorldResize(a);y.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var g=this.focusedMorph,l=Ug.arr.findAndGet(Ug.arr.without([g].concat($jscomp.arrayFromIterable(g.ownerChain())),this),function(r){return Ug.arr.findAndGet(r.keyhandlers,
function(v){return(v=v.eventCommandLookup(r,a))?{command:v,morph:r}:null})})||{};g=l.command;l=l.morph;return g?l.execCommand(g):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):this.innerBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var g=1/this.scale;return this._cachedWindowBounds=new Ug.Rectangle(a.scrollX*g,a.scrollY*g,(a.innerWidth||
this.width)*g,(a.innerHeight||this.height)*g)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}}],[{key:"className",get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",
a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var g=this;this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(l){return l.UserUI[a?"showUserFlap":"hideUserFlap"](g)})}}}}},{key:"defaultWorld",value:function(){return Ug.MorphicEnv.default().world}},
{key:"loadWorldFromURL",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Ug.loadWorldFromURL(a,g,l)}},{key:"loadWorld",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Ug.loadWorld(a,g,l)}},{key:"loadFromCommit",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;return Ug.loadWorldFromCommit(a,g,l)}},{key:"loadFromDB",value:function(a,g,l,r){l=void 0===l?this.defaultWorld():l;r=void 0===r?{}:r;return Ug.loadWorldFromDB(a,
g,l,r)}},{key:"loadFromResource",value:function(a,g,l){g=void 0===g?this.defaultWorld():g;l=void 0===l?{}:l;var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return r=Ug,v=r.loadWorld,y=Ug,A=y.loadMorphFromSnapshot,E.yield(a.readJson(),4);case 4:return E.yield(A.call(y,E.yieldResult),3);case 3:return E.yield(v.call(r,E.yieldResult,g,l),2);case 2:return E.return(E.yieldResult)}})}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:713,end:10827})}(Ug.Morph));Ug.World=Qy;Ug.World=Qy;Ug.World=Qy;var NE=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),m=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},
{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,g){return g}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},
{key:"cancelGrab",value:function(a,g){a=void 0===a?!0:a;var l=this,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(!l.grabbedMorphs.length)return L.return();l.env.eventDispatcher.cancelGrab(l,g);r=[];v=$jscomp.makeIterator(l.grabbedMorphs);for(y=v.next();!y.done;y=v.next())A=y.value,E=l._grabbedMorphProperties.get(A)||{},F=E.prevOwner,G=E.prevIndex,I=E.prevPosition,M=E.pointerAndShadow,Object.assign(A,M),F?(F.addMorphAt(A,G),a?r.push(A.animate({position:I})):A.position=
I):A.remove();return L.return(r.length?Promise.all(r):null)})}},{key:"grab",value:function(a){var g=this;if(Ug.obj.isArray(a))return a.forEach(function(l){return g.grab(l)});this.withMetaDo({metaInteraction:!0},function(){g._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:Ug.obj.select(a,["dropShadow","reactsToPointer"])});a.reactsToPointer=!1;a.dropShadow=!0;g.addMorph(a)});Ug.signal(this,"grab",a)}},{key:"dropMorphsOn",
value:function(a){var g=this;this.withMetaDo({metaInteraction:!0},function(){g.grabbedMorphs.forEach(function(l){try{var r=(g._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,r);Ug.signal(g,"drop",l);l.onBeingDroppedOn(g,a)}catch(v){console.error(v),g.world().showError("Error dropping "+l+" onto "+a+":\n"+v.stack),l.owner!==a&&g.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,g,l){var r=this;a=void 0===a?this.globalPosition:a;g=void 0===g?this.grabbedMorphs:g;
a=this.world().morphsContainingPoint(a);return Ug.arr.sortBy(a,function(v){return[v].concat($jscomp.arrayFromIterable(v.ownerChain())).find(function(y){return Ug.Path("owner.isWorld").get(y)&&y.hasFixedPosition})?0:1}).find("function"===typeof l?function(v,y){return!r.isAncestorOf(v)&&v.acceptsDrops&&!g.includes(v)&&g.every(function(A){return A.wantsToBeDroppedOn(v)})&&l(v,y)}:function(v){return!r.isAncestorOf(v)&&v.acceptsDrops&&g.every(function(y){return y.wantsToBeDroppedOn(v)})})}}],[{key:"className",
get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ug.touchInputDevice?Ug.Color.transparent:Ug.Color.orange},extent:{defaultValue:Ug.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10836,end:14799})}(Ug.Morph);Ug.Hand=NE;Ug.Hand=NE;Ug.Hand=NE;var Hua=Object.freeze({__proto__:null,World:Qy,Hand:NE}),Yl=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");Yl.comparePosition=YT;Yl.lessPosition=jv;Yl.lessEqPosition=bE;Yl.eqPosition=kv;Yl.minPosition=cE;Yl.maxPosition=dE;Yl.comparePosition=YT;Yl.comparePosition=YT;Yl.lessPosition=jv;Yl.lessPosition=jv;Yl.lessEqPosition=bE;Yl.lessEqPosition=
bE;Yl.eqPosition=kv;Yl.eqPosition=kv;Yl.minPosition=cE;Yl.minPosition=cE;Yl.maxPosition=dE;Yl.maxPosition=dE;var Ah=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");Ah.lessPosition=jv;Ah.lessEqPosition=bE;Ah.eqPosition=kv;Ah.minPosition=cE;Ah.maxPosition=dE;var vz=Ba("bm",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),m=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,l=g.start;a=l.row;l=l.column;var r=g.end;g=r.row;r=r.column;if(g<a||g===a&&r<l)l=$jscomp.makeIterator([a,l,g,r]),g=l.next().value,r=l.next().value,a=l.next().value,l=l.next().value;this.start={row:a,column:l};this.end={row:g,column:r}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",
value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?Ah.eqPosition(this.start,a.start)&&Ah.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new Ah.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new Ah.Range(a));return Ah.lessPosition(this.end,a.start)||Ah.lessPosition(a.end,this.start)?this:Ah.Range.fromPositions(Ah.minPosition(this.start,
a.start),Ah.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new Ah.Range(a));var g=Ah.Range.compare(this,a);return 0===g?Ah.Range.fromPositions(this.start,this.start):5<=Math.abs(g)?this:0>g?Ah.Range.fromPositions(this.start,a.start):Ah.Range.fromPositions(a.end,this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new Ah.Range(a));var g=Ah.Range.compare(this,a),l=0>g?this:a;a=0>g?a:this;switch(Math.abs(g)){case 0:case 1:return new Ah.Range(l);case 2:case 3:return new Ah.Range(a);
case 4:return Ah.Range.fromPositions(a.start,l.end);case 5:return Ah.Range.at(a.start);case 6:return Ah.Range.at(l.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new Ah.Range(a));switch(Ah.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new Ah.Range(this)];case -1:case 0:case 2:case 3:return[Ah.Range.at(this.start)];case 1:case 4:return[Ah.Range.fromPositions(a.end,this.end)];case -4:case -3:return[Ah.Range.fromPositions(this.start,a.start)];case -2:return[Ah.Range.fromPositions(this.start,
a.start),Ah.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return Ah.lessEqPosition(this.start,a)&&Ah.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,g=this.end;return"Range("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:"className",get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(Ah.Range.compare)}},{key:"compare",value:function(a,g){var l=a.start,r=a.end,v=g.start,y=g.end;return Ah.lessPosition(l,
v)?Ah.lessPosition(r,v)?-6:Ah.eqPosition(r,v)?-5:Ah.lessPosition(r,y)?-4:Ah.eqPosition(r,y)?-3:-2:Ah.eqPosition(l,v)?Ah.eqPosition(r,y)?0:Ah.lessPosition(r,y)?-1:1:-1*Ah.Range.compare(g,a)}},{key:"at",value:function(a){return new this({start:a,end:a})}},{key:"fromPositions",value:function(a,g){return new this({start:a,end:g})}},{key:"create",value:function(a,g,l,r){return new this({start:{row:a,column:g},end:{row:l,column:r}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&
a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5392})}(void 0));Ah.Range=vz;Ah.Range=vz;Ah.Range=vz;var uO=new Ah.Range;Ah.defaultRange=
uO;Ah.defaultRange=uO;Ah.defaultRange=uO;var Hk=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");Hk.lessPosition=jv;Hk.Range=vz;Hk.defaultRange=uO;Hk.config=am;Hk.string=Li;Hk.arr=ng;Hk.signal=xf;var vO=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:d.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.textMorph=a;this.initialize(g)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var g=Hk.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+g);this.endAnchor=this.textMorph.addAnchor("selection-end-"+g);this.range=Hk.Range.isValidLiteral(a)?a:Hk.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=
null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,g){var l=a.start,r=l.row;l=l.column;var v=a.end,y=v.row;v=v.column;var A=g.start,E=A.row;A=A.column;var F=g.end,G=F.row;F=F.column;return r<E||r===E&&l<A?y<E||y===E&&v<A?"separate":y===E&&v===A?E===G&&A===F?"overlapping":"bordering":"overlapping":r===E&&
l===A?y===G&&v===F?"equal":"overlapping":this.compareRangesForMerge(g,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var g=this.compareRangesForMerge(this.range,a.range);if("separate"===g||"bordering"===g)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var g=a,l=g.start;g=g.end;if(void 0!==l&&void 0!==g){var r=this.textMorph.document;
"number"===typeof l&&(a.start=l=r.indexToPosition(l));"number"===typeof g&&(a.end=g=r.indexToPosition(g));if(Hk.Range.isValidLiteral(a)){l=r.clipPositionToLines(l);g=r.clipPositionToLines(g);if(this._isReverse=Hk.lessPosition(g,l))g=$jscomp.makeIterator([g,l]),l=g.next().value,g=g.next().value;a.start=l;a.end=g;a.isRange||(a=new Hk.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=
this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),Hk.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=Hk.Range.fromPositions(a,
this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=Hk.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range=
{start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,g,l,r){var v=this.range,y=this.textMorph,A=this.isReverse();this.range=y.replace(v,a,g,l,r);A&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",
value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.end);a=Math.min(l,g.positionToIndex(this.start)-a);l=this.isReverse();this.start=g.indexToPosition(a);this._isReverse=
l;return this}},{key:"growRight",value:function(a){var g=this.textMorph.document,l=g.positionToIndex(this.start);a=Math.max(l,g.positionToIndex(this.end)+a);l=this.isReverse();this.end=g.indexToPosition(a);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(a,g){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===g?!1:g;this.range={start:{row:a,column:0},
end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},
{key:"selectUp",value:function(a,g){return this.goUp(void 0===a?1:a,g,!0)}},{key:"selectDown",value:function(a,g){return this.selectUp(-(void 0===a?1:a),g)}},{key:"goUp",value:function(a,g,l){a=void 0===a?1:a;l=void 0===l?!1:l;if(0===a)return this;var r=this._goalColumn,v=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===g?!1:g,r,v);l||(this.anchor=this.lead);this._goalColumn=r;this._goalX=v;return this}},{key:"goDown",value:function(a,g){return this.goUp(-(void 0===
a?1:a),g)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var g=Hk.config.text.cursorBlinkPeriod;if(g){var l=this.textMorph,
r=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){r||(r=l.env.renderer.getNodeForMorph(l));if(r){a._cursorVisible=!a._cursorVisible;var v=r.className.split(" "),y=v.indexOf("hidden-cursor");a._cursorVisible&&-1<y&&(v.splice(y,1),r.className=v.join(" "));a._cursorVisible||-1!==y||(r.className=[].concat($jscomp.arrayFromIterable(v),["hidden-cursor"]).join(" "))}},1E3*g)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);
this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var g=a.className.split(" "),l=g.indexOf("hidden-cursor");-1<l&&(g.splice(l,1),a.className=g.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,g=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+g.row+"/"+g.column+")"}}],[{key:"className",get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:223,end:9100})}(void 0);Hk.Selection=vO;Hk.Selection=vO;Hk.Selection=vO;var wO=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),m=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:"initialize",value:function(a){this._selections=[new Hk.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,g){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var g=this._selections?this._selections.filter(function(l){return!a.includes(l)}):[];this._selections=a;g.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},
{key:"defaultSelection",get:function(){return Hk.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(g){return g.uninstall()});this.selections=Hk.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){Hk.arr.without(this.selections,this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},
{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},
{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(g){return g.text=a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},
{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",
value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,g){this.includingLineEnd=g;this.defaultSelection.selectLine(a,g);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,g){this.defaultSelection.selectUp(a,
g);return this}},{key:"selectDown",value:function(a,g){this.defaultSelection.selectDown(a,g);return this}},{key:"goUp",value:function(a,g){return this.defaultSelection.goUp(a,g)}},{key:"goDown",value:function(a,g){return this.defaultSelection.goDown(a,g)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=
a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),g=a.length-1;0<=g;g--)for(var l=a.length-1;0<=l;l--)if(g!==l&&a[l].mergeWith(a[g])){a.splice(g,1);break}this.selections=a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var g=
0;g<a.length;g++){var l=this.selections[g];l?l.range=a[g]:this.addRange(a[g],!1)}this.removeSelections(g);this.mergeSelections()}},{key:"addRange",value:function(a,g){g=void 0===g?!0:g;this.selections.push(new Hk.Selection(this.textMorph,a));g&&this.mergeSelections();return Hk.arr.last(this.selections).range}}],[{key:"className",get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9109,end:13716})}(Hk.Selection);Hk.MultiSelection=wO;Hk.MultiSelection=wO;Hk.MultiSelection=wO;var di=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");di.shallowEquals=ZT;di.concatAttributePair=YL;di.joinTextAttributes=ZL;di.splitTextAndAttributesAt=$L;di.splitTextAndAttributesAtColumns=aM;di.concatTextAndAttributes=bM;di.modifyAttributesInRange=cM;di.textAndAttributesWithSubRanges=dM;di.textAndAttributesDo=
function(b,d){for(var m=0;m<b.length;m+=2)d(b[m],b[m+1])};di.splitTextAndAttributesIntoLines=aH;di.eqPosition=kv;di.lessPosition=jv;di.shallowEquals=ZT;di.shallowEquals=ZT;di.concatAttributePair=YL;di.concatAttributePair=YL;di.joinTextAttributes=ZL;di.joinTextAttributes=ZL;di.splitTextAndAttributesAt=$L;di.splitTextAndAttributesAt=$L;di.splitTextAndAttributesAtColumns=aM;di.splitTextAndAttributesAtColumns=aM;di.concatTextAndAttributes=bM;di.concatTextAndAttributes=bM;di.modifyAttributesInRange=cM;
di.modifyAttributesInRange=cM;di.textAndAttributesWithSubRanges=dM;di.textAndAttributesWithSubRanges=dM;di.splitTextAndAttributesIntoLines=aH;di.splitTextAndAttributesIntoLines=aH;var ze=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");ze.arr=ng;ze.num=sm;ze.string=Li;ze.lessEqPosition=bE;ze.minPosition=cE;ze.maxPosition=dE;ze.lessPosition=jv;ze.eqPosition=kv;ze.concatTextAndAttributes=bM;ze.splitTextAndAttributesAtColumns=aM;ze.splitTextAndAttributesIntoLines=aH;ze.joinTextAttributes=
ZL;ze.modifyAttributesInRange=cM;ze.concatAttributePair=YL;ze.splitTextAndAttributesAt=$L;ze.objectReplacementChar="\ufffd";ze.objectReplacementChar="\ufffd";ze.objectReplacementChar="\ufffd";ze.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?d.TreeNode:d.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,g=[];a;)g.push(a),a=a.parent;return g}},{key:"traverse",value:function(a){var g=[a.call(null,this)];if(this.isLeaf)return g;for(var l=0;l<this.children.length;l++)g.push.apply(g,
$jscomp.arrayFromIterable(this.children[l].traverse(a)));return g}},{key:"consistencyCheck",value:function(){var a=[],g=this.isRoot,l=this.isLeaf,r=this.children,v=this.size,y=this.stringSize,A=this.height,E=this.width,F=this.options,G=F.maxLeafSize,I=F.maxNodeSize,M=F.minLeafSize;F=F.minNodeSize;g||0!==v||a.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(r))return a.push({error:this+".children is not an array but "+r}),a;var L=ze.arr.sum(ze.arr.pluck(r,"size"));L!=v&&a.push({error:"Sum of child sizes is not size of "+
this+": "+L+" != "+v});v=ze.arr.sum(ze.arr.pluck(r,"stringSize"));v!=y&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+v+" != "+y});y=ze.arr.sum(ze.arr.pluck(r,"height"));Number.parseInt(y)!=Number.parseInt(A)&&a.push({error:"Sum of child Height is not Height of "+this+": "+y+" != "+A});A=r.length?Math.max.apply(null,ze.arr.pluck(r,"width")):0;(r.find(function(S){return S.isLine&&S.hasEstimatedExtent})?Number.parseInt(A)>Number.parseInt(E):Number.parseInt(A)!=Number.parseInt(E))&&
a.push({error:"max width of children of "+this+" is not node width: "+A+" != "+E});E=l?G:I;!g&&r.length>E&&a.push({error:"children count of "+this+" expected to be between "+(l?M:F)+" and "+E+" but is "+r.length});for(g=0;g<r.length;g++)(M=r[g])?(l&&!M.isLine?a.push({error:"child "+g+" of leaf "+this+" is not a line!"}):!l&&M.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==M.parent&&a.push({error:"child.parent is "+M.parent+" but should be "+this})):a.push({error:"child "+g+
" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(ze.arr.flatmap(r,function(S){return S.consistencyCheck()})));return a}}],[{key:"className",get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1416,end:4603})})(void 0);(function(b){var d=
lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=
a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,g,l){this.size+=a;this.height+=g;this.stringSize+=l;for(var r=0,v=0;v<this.children.length;v++){var y=this.children[v].width;y>r&&(r=y)}this.width=r;this.parent&&this.parent.resize(a,g,l)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),
a;for(var g=0;g<this.children.length;g++)this.children[g].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var g=0;g<this.children.length;g++){var l=this.children[g],r=l.size;if(a<r)return l.findRow(a);a-=r}return null}},{key:"findLineByVerticalOffset",value:function(a,g,l){g=void 0===g?0:g;l=void 0===l?0:l;if(0>a||a>this.height)return null;for(var r=0;r<this.children.length;r++){var v=this.children[r],y=v.height;if(a<=
y)return this.isLeaf?{line:v,offset:a,y:g,row:l}:v.findLineByVerticalOffset(a,g,l);a-=y;g+=y;l+=v.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,g){g=void 0===g?0:g;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),g;if(this.isLeaf){for(var l=0;l<Math.min(a,this.children.length);l++)g+=this.children[l].height;return g}for(l=0;l<this.children.length;l++){var r=this.children[l],v=r.size;if(a<v)return r.computeVerticalOffsetOf(a,g);a-=v;g+=r.height}return g}},
{key:"ensureLine",value:function(a){a||(a="");var g="string"===typeof a;return!g&&a.isLine?(a.parent=this,a):new ze.Line({parent:this,width:g?0:a.width||0,height:g?0:a.height||0,textAndAttributes:g?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,g){g=void 0===g?this.size:g;var l=this.children,r=this.options;if(this.isLeaf){var v=[],y=0,A=0;for(r=0;r<a.length;r++){var E=this.ensureLine(a[r]);v.push(E);y+=E.height;A+=E.stringSize;l.splice(g++,0,E)}this.resize(v.length,
y,A);this.balanceAfterGrowth();return v}0===l.length&&l.push(new ze.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:r}));for(r=0;r<l.length;r++){v=l[r];y=v.size;if(g<=y)return v.insert(a,g);g-=y}g=l[r-1];return g.insert(a,g.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(a,g,l){for(var r=this.withParents(),v,y=0;a;){if(r.includes(a)){v=a;break}g(a,y++);a=a.parent}g=r.indexOf(v);0>g&&(g=r.length);r=r.slice(0,g);for(g=0;g<r.length;g++)l(r[g],g)}},
{key:"findLineWithTextIndex",value:function(a,g){g=void 0===g?0:g;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var r=this.children[l],v=r.stringSize;if(a<v)return{line:r,column:a,row:g};a-=v;g++}a=ze.arr.last(this.children);return{line:a,row:g-1,column:a.stringSize-1}}for(r=l=0;r<this.children.length;r++){v=this.children[r];var y=v.stringSize;if(a<l+y)return v.findLineWithTextIndex(a-l,g);g+=v.size;l+=y}return ze.arr.last(this.children).findLineWithTextIndex(a-l)}},{key:"findLeafs",value:function(a,
g,l){l=void 0===l?0:l;if(a>l+this.size||g<l)return[];if(this.isLeaf){a=Math.max(0,a-l);var r=this.children.length-1;g=Math.min(r,g-l);l=!1;0===a&&g===r&&(l=!0,g=r);return[{node:this,firstLine:a,lastLine:g,full:l}]}r=[];for(var v=0;v<this.children.length;v++){var y=this.children[v];r.push.apply(r,$jscomp.arrayFromIterable(y.findLeafs(a,g,l)));l+=y.size}return r}},{key:"removeFromToInRoot",value:function(a,g,l){var r=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
a>g&&(g=$jscomp.makeIterator([g,a]),a=g.next().value,g=g.next().value);var v=this.size,y=this.options.minLeafSize,A=this.findLeafs(a,g),E=A.shift();g=A.pop();var F=[],G=!1,I=!1;if(!(a>=v)){g&&E.node===g.node&&(g=null);E.full?(l&&l.log("Removing complete first line "+E),A.push(E)):G=E.node.children.length-(E.lastLine-E.firstLine+1)<y;g&&(g.full?(l&&l.log("Removing complete last line "+g),A.push(g)):(I=g,I=I.node.children.length-(I.lastLine-I.firstLine+1)<y));if(G||I){var M=(M=E.node.children[0].prevLine())?
M.parent:null;var L=(L=ze.arr.last(g?g.node.children:E.node.children).nextLine())?L.parent:null}for(a=0;a<A.length;a++){y=A[a].node;v=y.children.length;for(var S=0,R=0,aa=0;aa<v;aa++){var ra=y.children[aa];S+=ra.height;R+=ra.stringSize;ra.parent=null}y.children.length=0;y.resize(-v,-S,-R);if(v=y.parent)y.parent=null,v.children.splice(v.children.indexOf(y),1),F.includes(v)||F.push(v)}if(!E.full){y=E.firstLine;A=E.node;a=E.lastLine-y+1;y=A.children.splice(y,a);for(R=S=v=0;R<y.length;R++)aa=y[R],v+=
aa.height,S+=aa.stringSize,aa.parent=null;A.resize(-a,-v,-S)}if(g&&!g.full){a=g;y=a.firstLine;A=a.node;a=a.lastLine-y+1;y=A.children.splice(y,a);for(R=S=v=0;R<y.length;R++)aa=y[R],v+=aa.height,S+=aa.stringSize,aa.parent=null;A.resize(-a,-v,-S)}l&&l.dump(""+this.print(!1));G&&E.node.balanceByMergeOrTheft(M,!g||g.full?L:g.node,l);g&&I&&g.node.root===this&&(I=!0,M=E.full||!E.node.parent?M:E.node,G&&(g.node.root!==this&&(I=!1),M&&M.root!==this&&(M=null),L&&L.root!==this&&(L=null)),I&&g.node.balanceByMergeOrTheft(M,
L,l));F.forEach(function(Ea){return Ea.root===r&&Ea.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(a,g,l){var r=this,v=this.children,y=this.options,A=this.isLeaf,E=A?y.maxLeafSize:y.maxNodeSize;y=A?y.minLeafSize:y.minNodeSize;A=a&&a.children.length+v.length<=E;E=!A&&g&&g.children.length+v.length<=E;var F=A?a:E?g:null;if(F){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(A?"left":"right")+" into "+F);var G=this.size,I=this.width,M=this.height,L=this.stringSize;v.forEach(function(U){return U.parent=
F});A?F.children.push.apply(F.children,$jscomp.arrayFromIterable(v)):F.children.unshift.apply(F.children,$jscomp.arrayFromIterable(v));this.width=v.length=0;this.withParentChainsUpToCommonParentDo(F,function(U){I>U.width&&(U.width=I);U.height+=M;U.size+=G;U.stringSize+=L},function(U){if(I===U.width)for(var V=0;V<U.children.length;V++){var na=U.children[V];na.width>U.width&&(U.width=na.width)}U.height-=M;U.size-=G;U.stringSize-=L})}else{A=a?Math.ceil((a.children.length-y)/2):0;var S=g?Math.ceil((g.children.length-
y)/2):0;if((E=0<A&&A>=S)||!E&&0<S){y=E?a.children.splice(a.children.length-A,A):g.children.splice(0,S);var R=E?a:g,aa=E?A:S,ra=0,Ea=0,K=0,Z=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(E?"left":"right")+" node "+R+" "+aa+" nodes");for(a=0;a<y.length;a++)ra+=y[a].height,Ea+=y[a].stringSize,K=Math.max(K,y[a].width);for(a=0;a<R.children.length;a++)Z=Math.max(Z,R.children[a].width);this.withParentChainsUpToCommonParentDo(R,function(U){if(Z<K&&Z<U.width){if(U===R)U.width=Z;else{for(var V=
!1,na=0;na<U.children.length;na++)if(U.children[na].width>Z){V=!0;break}V||(U.width=Z)}U.width=K}U.height-=ra;U.size-=aa;U.stringSize-=Ea},function(U){U.width<K&&(U.width=K);U.height+=ra;U.size+=aa;U.stringSize+=Ea});y.forEach(function(U){return U.parent=r});E?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(y)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(y))}}a=this.parent;0===v.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&
a.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,g=this.size,l=this.stringSize,r=this.parent,v=this.children,y=this.width,A=this.height,E=this.options,F=a?E.maxLeafSize:E.maxNodeSize;if(v.length>F){r||(r=this.parent=new ze.InnerTreeNode({parent:null,children:[this],size:g,width:y,height:A,stringSize:l,options:E}),r.isLeaf=!1);var G=Math.floor(v.length/2),I=0,M=0,L=g=0,S=l=0,R=y=0;for(A=0;I<G;I++)M+=v[I].size,L=Math.max(L,v[I].width),S+=v[I].height,R+=v[I].stringSize;
for(;I<v.length;I++)g+=v[I].size,l=Math.max(l,v[I].width),y+=v[I].height,A+=v[I].stringSize;this.children=v.slice(0,G);this.size=M;this.width=L;this.height=S;this.stringSize=R;I=r.children.indexOf(this);v=v.slice(G);var aa=new ze.InnerTreeNode({parent:r,children:v,size:g,height:y,width:l,stringSize:A,options:E});aa.isLeaf=a;v.forEach(function(ra){return ra.parent=aa});r.children.splice(I+1,0,aa);aa.children.length>F&&aa.balanceAfterGrowth();this.children.length>F&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},
{key:"balanceAfterShrink",value:function(a){var g=this,l=this.isLeaf,r=this.parent,v=this.children,y=this.options,A=y.maxLeafSize,E=y.maxNodeSize,F=y.minLeafSize,G=y.minNodeSize;y=l?A:E;F=l?F:G;G=!1;for(var I=v.length;I--;)0===v[I].size&&(v.splice(I,1),G=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+I+" b/c it is empty, remaining children: "+v.length+" (min: "+F+", max: "+y+")"));G&&a&&a.dump(""+this.root.print(!1));if(v.length>=F)r&&r.balanceAfterShrink(a);else if(0===v.length)r&&r.balanceAfterShrink(a);
else if(l)r&&(1===r.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,r.children.length=0,r.children.push.apply(r.children,$jscomp.arrayFromIterable(v)),v.forEach(function(L){return L.parent=r}),r.isLeaf=!0):(A=(A=v[0].prevLine())&&A.parent,v=ze.arr.last(v).nextLine(),this.balanceByMergeOrTheft(A,v&&v.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{l=[];y=G=
F=!1;for(I=0;I<v.length;I++){var M=v[I];!F&&M.isLeaf&&(F=!0);G||M.isLeaf||(G=!0);if(F&&G){y=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(M.children))}!y&&l.length<=(F?A:E)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),v.forEach(function(L){return L.parent=null}),l.forEach(function(L){return L.parent=g}),v.length=0,v.push.apply(v,$jscomp.arrayFromIterable(l)),this.isLeaf=F,a&&a.log("[balanceAfterShrink] "+
v.join("\n")),a&&a.dump(""+this.root.print(!1)));r&&r.balanceAfterShrink(a)}}},{key:"print",value:function(a,g,l,r){a=void 0===a?!0:a;g=void 0===g?0:g;l=void 0===l?0:l;var v=this.isLeaf,y=this.size,A=this.stringSize,E=this.width,F=this.height,G=this.children;r=r?r:v?"leaf":"node";A=""+" ".repeat(l)+r+" (size: "+y+" width: "+Math.round(E)+" height: "+Math.round(F)+" text length: "+A+")";if(G.length){E="";g+=y;for(y=G.length;y--;)F=G[y],g-=F.size,E="\n"+F.print(a,g,l+1)+E;A+=E}return A}},{key:"toString",
value:function(){var a=this.isLeaf,g=this.size,l=this.width,r=this.height,v=this.children;return"node ("+(a?"leaf, ":"")+(a&&v.length?"rows: "+v[0].row+"-"+ze.arr.last(v).row+" ":"")+("size: "+g+" "+l+"x"+r+")")}}],[{key:"className",get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4606,end:28692})})(ze.TreeNode);var $W=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a.parent);this.textAndAttributes=ze.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var a="",g=this.textAndAttributes,l=0;l<g.length;l+=2)a+="string"===typeof g[l]?g[l]:ze.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],g=this.textAndAttributes,l=0;l<g.length;l+=2){var r=g[l+1];r&&!a.includes(r)&&a.push(r)}return this._textAttributes=a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var g=0,l=a.length-
1;1<=l;l--)for(var r=a[l],v=r.children.indexOf(a[l-1]),y=0;y<v;y++)g+=r.children[y].size;return g}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(a,g,l){var r=this.height,v=this.width,y=this.parent;this.width=a;this.height=g;this.hasEstimatedExtent=
void 0===l?!1:l;if(v!==a||r!==g)for(g-=r;y;){y.height+=g;if(a>=y.width)y.width=a;else if(v===y.width){for(r=l=0;r<y.children.length;r++){var A=y.children[r].width;A>l&&(l=A)}y.width=l}y=y.parent}return this}},{key:"changeText",value:function(a,g){g=void 0===g?null:g;var l=this.parent,r=this.height,v=a.length+1-(this.text.length+1),y=0;this.modeState&&this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,y=-r);this._text=a;this._textAttributes=null;this.textAndAttributes=g||(g=[a,null]);if(0!==g.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<g.length;a+=2)if((r=g[a+1])&&Array.isArray(r))throw Error("invalid attr part of text/attr pair, its an array: "+r);for(;l;){l.stringSize+=v;l.height+=y;for(a=g=0;a<l.children.length;a++)r=l.children[a].width,r>g&&(g=r);l.width=g;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=
ze.joinTextAttributes(a);for(var g="",l=0;l<a.length;l+=2)g+="string"===typeof a[l]?a[l]:ze.objectReplacementChar;return this.changeText(g,a)}},{key:"print",value:function(a,g,l){a=void 0===a?!0:a;g=void 0===g?0:g;g=" ".repeat(void 0===l?0:l)+"line "+g+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=ze.arr.toTuples(this.textAndAttributes,2).map(function(r){var v=$jscomp.makeIterator(r);r=v.next().value;v=v.next().value;return("string"===
typeof r?'"'+r+'"':String(r))+(","+JSON.stringify(v))}).join(",");return g+(a?")":" content: ["+l+"])")}},{key:"toString",value:function(){var a=this.width,g=this.height;return'line ("'+ze.string.truncate(this._text,30)+'", '+a+"x"+g+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),a}}],[{key:"className",get:function(){return"Line"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:28702,end:35054})}(ze.TreeNode);ze.Line=$W;ze.Line=$W;ze.Line=$W;ze.documentFuzzier={makeString:function(b,d){b=void 0===b?5:b;d=void 0===d?50:d;var m=ze.arr.range(65,90).map(function(a){return String.fromCharCode(a)}).join("");m+=m.toLowerCase()+" \n";b=ze.num.random(b,d);return ze.arr.shuffle(Array.from(m.repeat(Math.ceil(b/m.length)))).slice(0,b).join("")},
randomDocPosition:function(b){var d=0===b.rowCount?0:ze.num.random(0,b.rowCount-1);b=ze.num.random(0,b.getLineString(d).length-1);return{row:d,column:b}},insertRandom:function(b,d,m,a){m=[this.makeString(m,a),null];a=this.randomDocPosition(b);d.push(["insertTextAndAttributes",m,a]);b.insertTextAndAttributes(m,a)},deleteRandom:function(b,d,m,a){m={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};d.push(["remove",m]);b.remove(m)},maybe:function(){return.5>Math.random()},replay:function(b,
d,m,a){m=void 0===m?!1:m;a=void 0===a?!1:a;m&&(b.debug=m,m=b.debugHelper(),m.reset());var g=new ze.Document([""]);d.forEach(function(l,r){var v=$jscomp.makeIterator(l);l=v.next().value;v=$jscomp.arrayFromIterator(v);if(a&&r==d.length-1)debugger;g[l].apply(g,[].concat($jscomp.arrayFromIterable(v),[m]))});b.changeDocument(g)},run:function(){var b=Date.now(),d=0,m=new ze.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>m.stringSize&&
1E4>d++;)this.maybe()?this.deleteRandom(m,a):this.insertRandom(m,a),m.consistencyCheck()}catch(l){var g=l}b=Date.now()-b;return{error:g,doc:m,actions:a,time:b}}};ze.newline="\n";ze.newlineLength=1;var Yba=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),m=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){this.options=Object.assign({},ze.defaultOptions,{},g);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new ze.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var g=a.row;
a=a.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>g?g=0:g>=l&&(g=l-1,a=Infinity);0>a?a=0:(l=this.getLineString(g).length,a>l&&(a=l));return{row:g,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?
a.text:""}},{key:"insertLine",value:function(a,g){g=void 0===g?this.root.rowCount:g;return this.insertLines([a],g)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,g,l){this.root.removeFromToInRoot(a,g,l)}},{key:"insertLines",value:function(a,g){a=this.root.insert(a,g);this.fixRoot();return a}},{key:"textString",get:function(){var a="",g=this.lines;if(!g.length)return a;for(var l=0;l<g.length-1;l++)a=a+g[l].text+ze.newline;return a+=
g[l].text}},{key:"textString",set:function(a){this.lines=a.split(ze.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var g=this.getLine(a);return{row:a,column:g.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var g=ze.newline,l=a.length-1,r=a[0].textAndAttributes.slice(),v=1;v<=l;v++){var y=a[v],A=r.pop()||null,E=r.pop()||"";y=y.textAndAttributes;r.push.apply(r,$jscomp.arrayFromIterable(ze.concatAttributePair(E,
A,y[0]||"",y[1]||null,g)));for(A=2;A<y.length;A+=2)r.push(y[A],y[A+1])}return r}},{key:"textAndAttributes",set:function(a){this.lines=ze.splitTextAndAttributesIntoLines(a,ze.newline).map(function(g){return new ze.Line({parent:null,width:0,height:0,textAndAttributes:g})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(a,g){this.getLine(a).changeTextAndAttributes(g);return g}},{key:"mixinTextAttribute",
value:function(a,g){ze.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return Object.assign({},r,a)})}},{key:"setTextAttribute",value:function(a,g){ze.modifyAttributesInRange(this,g,function(l,r){l._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,g){g=void 0===g?{start:{row:0,column:0},end:this.endPosition}:g;if(a){var l=Object.keys(a);ze.modifyAttributesInRange(this,g,function(r,v){if(!v)return v;r._textAttributes=null;r=0;var y={},A;for(A in v)l.includes(A)||
(y[A]=v[A],r++);return 0===r?null:y})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function g(I,M,L,S){S=void 0===S?0:S;var R=0,aa=M.length;if(0>=L.length-S)return{attributes:[M,null],index:S};for(var ra=[];S<L.length&&!(R>=aa);S+=2){var Ea=L[S],K=Ea.start;Ea=Ea.end;var Z=L[S+1];if(Ea.row<I)R=0;else{K.row===I&&R<K.column&&(ra.push(M.slice(R,K.column),null),R=K.column);if(Ea.row>I){ra.push(Z.embeddedMorph||M.slice(R,aa),Z);R=aa;break}R<Ea.column&&ra.push(Z.embeddedMorph||M.slice(R,
Ea.column),Z);R=Ea.column}}R<aa&&ra.push(M.slice(R,aa),null);return{attributes:ra,index:S}}if(!(2>a.length)){var l=a[0].start,r=a.slice(-2)[0].end,v=this.getLine(l.row);if(l.row===r.row){if(!(l.column>=r.column)){var y=g(l.row,v.text,a,0).attributes,A=$jscomp.makeIterator(ze.splitTextAndAttributesAtColumns(v.textAndAttributes,[l.column,r.column]));a=A.next().value;A.next();A=A.next().value;r=$jscomp.makeIterator(ze.splitTextAndAttributesAtColumns(y,[l.column,r.column]));r.next();l=r.next().value;
r.next();v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(A)))}}else{A=l.row;var E=l.column;l=g(A,v.text,a,0);var F=l.attributes;l=l.index;var G=$jscomp.makeIterator(ze.splitTextAndAttributesAt(v.textAndAttributes,E));y=G.next().value;G.next();E=$jscomp.makeIterator(ze.splitTextAndAttributesAt(F,E));E.next();E=E.next().value;for(v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(y),$jscomp.arrayFromIterable(E)));v=v.nextLine();){A++;
if(A===r.row)break;l=g(A,v.text,a,l);y=l.attributes;l=l.index;v.changeTextAndAttributes(y)}v&&(r=r.column,a=g(A,v.text,a,l).attributes,A=$jscomp.makeIterator(ze.splitTextAndAttributesAt(v.textAndAttributes,r)),A.next(),A=A.next().value,r=$jscomp.makeIterator(ze.splitTextAndAttributesAt(a,r)).next().value,v.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(r),$jscomp.arrayFromIterable(A))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},
{key:"textAttributeAt",value:function(a){var g=a.row;a=a.column;a=Math.max(0,a);var l=this.getLine(g);if(!l)return null;g=0;l=l.textAndAttributes;for(var r=0;r<l.length;r+=2){var v=l[r],y=l[r+1];g+="string"===typeof v?v.length:1;if(a<g)return y}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(a){var g=a.start,l=a.end;if(ze.eqPosition(g,l))return["",null];ze.lessPosition(l,g)&&(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);g=ze.maxPosition(g,{column:0,row:0});
l=ze.minPosition(l,this.endPosition);var r=this.getLine(g.row),v=r;if(l.row===g.row)return a=g.column,l=l.column,a===l&&l++,a=$jscomp.makeIterator(ze.splitTextAndAttributesAtColumns(v.textAndAttributes,[a,l])),a.next(),a.next().value;a=[r];for(var y=0;y<l.row-g.row;y++)a.push(r=r.nextLine());r=a[a.length-1];g=$jscomp.makeIterator(ze.splitTextAndAttributesAt(v.textAndAttributes,g.column));g.next();g=g.next().value;l=$jscomp.makeIterator(ze.splitTextAndAttributesAt(r.textAndAttributes,l.column)).next().value;
0===g.length&&(g=["",null]);if(1===a.length)return ze.concatTextAndAttributes(g,l,!0);for(v=1;v<a.length-1;v++)"string"===typeof g[g.length-2]&&(g[g.length-2]+=ze.newline),ze.concatTextAndAttributes(g,a[v].textAndAttributes,!0);"string"===typeof g[g.length-2]&&(g[g.length-2]+=ze.newline);ze.concatTextAndAttributes(g,l,!0);return ze.joinTextAttributes(g,"")}},{key:"textInRange",value:function(a){var g=a.start,l=a.end;g=this.clipPositionToLines(g);l=this.clipPositionToLines(l);ze.lessPosition(l,g)&&
(a=$jscomp.makeIterator([l,g]),g=a.next().value,l=a.next().value);a=g;g=a.row;a=a.column;var r=l;l=r.row;r=r.column;if(g===l)return a===r?"":this.getLineString(g).slice(a,r);var v=this.getLine(g);for(a=v.text.slice(a);(v=v.nextLine())&&++g<l;)a+=ze.newline+v.text;return a+ze.newline+this.getLineString(l).slice(0,r)}},{key:"setTextInRange",value:function(a,g){this.remove(g);return this.insertText(a,g.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,
0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var g=a.column,l=this.getLine(a.row);g=Math.max(0,Math.min(g,l.stringSize-1));for(a=l.parent;a;){l=a.children.indexOf(l);l=a.children.slice(0,l);for(var r=0;r<l.length;r++)g+=l[r].stringSize;l=a;a=a.parent}return g}},{key:"insertTextAndAttributes",value:function(a,g,l){l=void 0===l?!1:l;if(!a||!a.length||2===a.length&&!a[0])return{start:g,end:g};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var r=g.row;g=g.column;
0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);a=ze.splitTextAndAttributesIntoLines(a,ze.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!v)return r=this.insertLines(a.map(function(S){return new ze.Line({parent:null,width:0,height:0,textAndAttributes:S})})),l&&l.log("insert "+r.length+" lines into empty text"),{start:{row:0,column:0},end:{row:r.length,column:ze.arr.last(r).text.length}};if(r>=this.rowCount){var y=this.endPosition;l&&l.log("insertion after doc end, "+
r+"/"+g+", inserting "+(r-y.row)+" rows");for(g=0;g<r-y.row;g++)a.unshift(["",null]);r=y.row;g=y.column}if(1===a.length&&""===a[0][0])return l&&l.log("insert just newline at "+r+"/"+g),r=this.splitLineAt({row:r,column:g}),l&&l.dump(""+this.root.print(!1)),r;var A=a.shift(),E=a.length;y={row:r,column:g};var F=v.stringSize-1;g>F&&(l&&l.log("filling up insertion column at "+r+"/"+g+": "+(g-F)),F=" ".repeat(g-F),A.length?"string"==typeof A[0]?A[0]=F+A[0]:A.unshift(F,null):A.push(F,null));F=$jscomp.makeIterator(ze.splitTextAndAttributesAt(v.textAndAttributes,
g));var G=F.next().value;F=F.next().value;""===G[0]&&(G=[]);G=ze.concatTextAndAttributes(G,A,!0);if(0===E){for(var I=0,M=0;M<A.length;M+=2){var L=A[M];I+="string"===typeof L?L.length:1}y.column=g+I;ze.concatTextAndAttributes(G,F,!0)}v.changeTextAndAttributes(G);if(0===E)return l&&(l.log("single line inserted at "+r+"/"+g),l&&l.dump(""+this.root.print(!1))),{start:{row:r,column:g},end:y};v=a[E-1];for(G=A=0;G<v.length;G+=2)I=v[G],A+="string"===typeof I?I.length:1;y.row+=E;y.column=A;a=this.insertLines(a.map(function(S){return new ze.Line({parent:null,
width:0,height:0,textAndAttributes:S})}),r+1);E=ze.arr.last(a);E.changeTextAndAttributes(ze.concatTextAndAttributes(E.textAndAttributes,F,!0));l&&(l.log(a.length+" inserted at "+r+"/"+g),l&&l.dump(""+this.root.print(!1)));return{start:{row:r,column:g},end:y}}},{key:"insertText",value:function(a,g,l){l=void 0===l?!1:l;if(!a)return{start:g,end:g};var r=g.row;g=g.column;0>r&&(r=0);0>g&&(g=0);var v=this.getLine(r);if(!v)return r=this.insertLines(a.split(ze.newline)),{start:{row:0,column:0},end:{row:r.length,
column:ze.arr.last(r).text.length}};r>=this.rowCount&&(g=this.endPosition,a="\n".repeat(r-g.row)+a,r=g.row,g=g.column);var y=a.split(ze.newline),A=y.shift(),E=y.length;a={row:r,column:g};var F=v.stringSize-1;g>F&&(A=" ".repeat(g-F)+A);F=$jscomp.makeIterator(ze.splitTextAndAttributesAt(v.textAndAttributes,g));var G=F.next().value;F=F.next().value;""===G[0]&&(G=[]);l=ze.concatTextAndAttributes(G,[A,l&&G.length?G[G.length-1]:null],!0);0===E&&(a.column=g+A.length,ze.concatTextAndAttributes(l,F,!0));v.changeTextAndAttributes(l);
if(0===E)return{start:{row:r,column:g},end:a};a.row+=E;a.column=y[E-1].length;l=this.insertLines(y,r+1);l=ze.arr.last(l);l.changeTextAndAttributes(ze.concatTextAndAttributes(l.textAndAttributes,F,!0));return{start:{row:r,column:g},end:a}}},{key:"remove",value:function(a,g){g=void 0===g?!1:g;if(0!==this.rowCount){var l=a.start,r=a.end;if(l.row!==r.row||l.column!==r.column){ze.lessPosition(r,l)&&(r=$jscomp.makeIterator([r,l]),l=r.next().value,r=r.next().value);var v=this.endPosition;if(!ze.lessEqPosition(v,
l)){var y=ze.maxPosition(l,{column:0,row:0});l=y.row;y=y.column;v=ze.minPosition(r,v);r=v.row;var A=v.column;0>y&&(y=0);0>A&&(A=0);g&&!g.debugDocumentUpdate&&(g=!1);g&&(g.log||(g={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),g.group("document.remove "+JSON.stringify(a)),g.log("[text doc] removing "+l+"/"+y+" => "+r+"/"+A));var E=this.getLine(l);a=E;v=[E];for(var F=0;F<r-l;F++)v.push(E=E.nextLine());E=v[v.length-
1];y=$jscomp.makeIterator(ze.splitTextAndAttributesAt(a.textAndAttributes,y)).next().value;A=$jscomp.makeIterator(ze.splitTextAndAttributesAt(E.textAndAttributes,A));A.next();A=A.next().value;a.changeTextAndAttributes(ze.concatTextAndAttributes(y,A,!0));g&&g.log('[text doc removal] what remains of start/end line: "'+a.textAndAttributes+'"');1<v.length&&this.removeLines(l+1,r,g);g&&g.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var g=a.row;a=a.column;var l=this.getLine(g),
r=$jscomp.makeIterator(ze.splitTextAndAttributesAt(l.textAndAttributes,a)),v=r.next().value;r=r.next().value;l.changeTextAndAttributes(v);l=new ze.Line({parent:null,width:0,height:0,textAndAttributes:r});this.insertLines([l],g+1);return{start:{row:g,column:a},end:{row:g+1,column:0}}}},{key:"replace",value:function(a,g,l){var r=a.start;a=a.end;if(!g.length)return this.remove({start:r,end:a},l),{removed:{start:r,end:a},inserted:{start:r,end:r}};var v=this.clipPositionToLines(r),y=this.clipPositionToLines(a);
v.row===y.row&&this.remove({start:v,end:y},l);if(v.row===y.row||ze.lessEqPosition(this.endPosition,r)){var A;"string"===typeof g?g.length&&(A=g.length&&this.insertText(g,r)):g.length&&(2!==g.length||g[0])&&(A=this.insertTextAndAttributes(g,r,l));A||(A={start:v,end:v});return{removed:{start:r,end:a},inserted:A}}r=v;a=y;l=r;A=l.row;y=l.column;v=a.row;if("string"===typeof g){l=[];g=g.split(ze.newline);for(var E=0;E<g.length;E++)l.push([g[E],null])}else l=ze.splitTextAndAttributesIntoLines(g,ze.newline);
var F=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);F&&(l=[]);var G=g=this.getLine(A);E=this.getLine(v);y=$jscomp.makeIterator(ze.splitTextAndAttributesAt(G.textAndAttributes,y));var I=y.next().value;y.next();for(G.changeTextAndAttributes(F?I:ze.concatTextAndAttributes(I,l.shift(),!0));l.length;){g=g.nextLine();A++;if(g===E)break;g.changeTextAndAttributes(l.shift())}if(!l.length)return l=g.stringSize-1,this.remove({start:{row:A,column:g.stringSize},end:a}),{removed:{start:r,end:a},inserted:{start:r,
end:{row:A,column:l}}};console.assert(A==v,"not end row");console.assert(g.row==A,"row != last line.row");this.remove({start:{row:A,column:0},end:a});v=[];g=l.length;for(y=0;y<g-1;y++)E=l[y],E.length||(E=["",null]),"string"==typeof E[E.length-2]?E[E.length-2]+=ze.newline:E.push(ze.newline,null),v.push.apply(v,$jscomp.arrayFromIterable(E));v.push.apply(v,$jscomp.arrayFromIterable(l[g-1]));l=this.insertTextAndAttributes(v,{row:A,column:0}).end;return{removed:{start:r,end:a},inserted:{start:r,end:l}}}},
{key:"wordsOfLine",value:function(a){for(var g=this.getLineString(a),l=[],r,v=0;v<g.length;v++)/[^a-z0-9_]/i.test(g[v])?r&&(r.range.end.column=v,l.push(r),r=null):(r=r||{index:l.length,string:"",range:{start:{row:a,column:v},end:{row:a,column:v}}},r.string+=g[v]);r&&(r.range.end.column=v,l.push(r));return l}},{key:"wordAt",value:function(a,g){var l=a.row,r=a.column;g=void 0===g?this.wordsOfLine(l):g;return g.find(function(v){v=v.range;var y=v.end.column;return v.start.column<=r&&r<=y})||{range:{start:{column:r,
row:l},end:{column:r,row:l}},string:""}}},{key:"wordLeft",value:function(a){var g=a.row,l=a.column,r=this.wordsOfLine(g);if(!r.length||ze.lessEqPosition(a,r[0].range.start)){for(;0<=--g;)if(r=this.wordsOfLine(g),r.length)return ze.arr.last(r);return{range:{start:a,end:a},string:""}}g=this.wordAt(a);return g.string?ze.eqPosition(g.range.start,a)?r[g.index-1]:g:r.slice().reverse().find(function(v){return v.range.end.column<=l})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var g=
a.column,l=a.row,r=this.wordsOfLine(a.row);if(!r.length||ze.lessEqPosition(ze.arr.last(r).range.end,a)){for(;++l<this.lines.length;)if(r=this.wordsOfLine(l),r.length)return r[0];return{range:{start:a,end:a},string:""}}l=this.wordAt(a);return l.string?ze.eqPosition(l.range.end,a)?r[l.index+1]:l:r.find(function(v){return v.range.start.column>=g})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);for(var v=a.text;r<a.stringSize-1;r++){var y=
g(v[r],{row:l,column:r});if(y)return y}for(;a=a.nextLine();)for(l++,v=a.text,r=0;r<a.stringSize-1;r++)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"scanBackward",value:function(a,g){var l=a.row,r=a.column;a=this.getLine(l);var v=a.text;for(--r;0<=r;r--){var y=g(v[r],{row:l,column:r});if(y)return y}for(;a=a.prevLine();)for(l--,v=a.text,r=a.stringSize-2;0<=r;r--)if(y=g(v[r],{row:l,column:r}))return y;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],g=this.rowCount,l=this.stringSize,r=this.lines,v=this.textString,y=this.root;g!==r.length&&a.push({error:"document "+this+" row count: "+g+" !== "+r.length});v.length!==l&&a.push({error:"document "+this+" textString.length vs stringSize: "+v.length+" !== "+l});a.push.apply(a,$jscomp.arrayFromIterable(y.consistencyCheck()));g=0;for(l=r[0];l;)l!=r[g]&&a.push({error:"line iteration at "+
g+" is broken: nextLine() of "+r[g-1]+" is not "+r[g]+"!"}),g++,l=l.nextLine();r[g]&&a.push({error:"nextLine() of\n  "+r[g-1]+"\nis nullish but \n  "+r[g]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+" error"+(1<a.length?"s":"")+":\n"+a.map(function(A){return A.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),
g=(System.get(a)||{}).printTree;return g?g(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:"className",get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return ze.documentFuzzier.run()}},{key:"newline",get:function(){return ze.newline}},
{key:"fromString",value:function(a,g){return new this(a.split(ze.newline),g)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37263,end:70606})}(void 0),Iua=Yba=ze.Document;ze.default=Yba;var Uq=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Uq.lessPosition=
jv;Uq.lessEqPosition=bE;Uq.eqPosition=kv;var OE=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),m=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g,l){g=void 0===g?{column:0,row:0}:g;this.id=a||""+(this.constructor._id=(this.constructor._id||
0)+1);this.position=g;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(Uq.lessEqPosition(this.position,a.start))return!1;if(Uq.lessEqPosition(a.start,this.position)&&Uq.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var g=this.position,l=g.column,r=a.start,v=r.column,y=a.end;a=y.row;y=y.column;this.position={column:a!==this.position.row?l:v===y?l-(y-v):v+(l-y),row:g.row-(a-r.row)};return!0}},{key:"onInsert",
value:function(a){if(Uq.lessPosition(this.position,a.start)||Uq.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var g=this.position,l=a.start,r=l.row;l=l.column;a=a.end;var v=a.column;this.position={column:g.column+(r!==this.position.row?0:v-l),row:g.row+(a.row-r)};return!0}},{key:"equalsPosition",value:function(a){return a?a.isAnchor?Uq.eqPosition(this.position,a.position):Uq.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+
this.id+" "+a.row+"/"+a.column+")"}}],[{key:"className",get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3051})}(void 0);Uq.Anchor=OE;Uq.Anchor=OE;Uq.Anchor=OE;var Jua=Object.freeze({__proto__:null,Anchor:OE}),Lg=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");
Lg.pt=th;Lg.Color=Tg;Lg.connect=yl;Lg.once=Cu;Lg.disconnect=$o;Lg.Path=Ti;Lg.morph=ab;Lg.GridLayout=tz;Lg.config=am;Lg.Morph=Ol;Lg.lessPosition=jv;Lg.minPosition=cE;Lg.maxPosition=dE;Lg.Icon=op;var xO=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,g){var l=this.doc.positionToIndex(a);l=this.doc.indexToPosition(l+g.length);return{range:{start:a,end:l},match:g}}},{key:"stringSearch",value:function(a,g,l,r,v,y,A){if(v&&(Lg.lessPosition(A,v.start)||Lg.lessPosition(v.end,A)))return this.STOP;l||(y=y.toLowerCase());if(y!==g[0])return null;
v=A.row;A=A.column;y=a[v];a=1>=r?"":"\n"+a.slice(v+1,v+1+(r-1)).join("\n");a=y.slice(A)+a;return 0!==(l?a:a.toLowerCase()).indexOf(g)?null:this.processFind({row:v,column:A},a.slice(0,g.length))}},{key:"reSearch",value:function(a,g,l,r,v,y){if(r&&(Lg.lessPosition(y,r.start)||Lg.lessPosition(r.end,y)))return this.STOP;r=y.row;y=y.column;return(a=(a[r].slice(y)+(l?"\n"+a.slice(r+1).join("\n"):"")).match(g))?this.processFind({row:r,column:y},a[0]):null}},{key:"search",value:function(a){var g=Object.assign({start:this.morph.cursorPosition,
needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=g.start;var l=g.needle,r=g.backwards,v=g.caseSensitive;g=g.inRange;if(!l)return null;g&&(a=r?Lg.minPosition(g.end,a):Lg.maxPosition(g.start,a));if(l instanceof RegExp){var y=(l.flags||"").split(""),A=!!l.multiline;y.splice(y.indexOf("m"),1);v||y.includes("i")||y.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),y.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,l,A,g)}else l=String(l),v||(l=l.toLowerCase()),y=l.split(this.doc.constructor.newline).length,
l=this.stringSearch.bind(this,this.doc.lineStrings,l,v,y,g);a=this.doc[r?"scanBackward":"scanForward"](a,l);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var g=[],l=0;;){if(1E4<l++)throw Error("endless loop");var r=this.search(a);if(!r)return g;g.push(r);a=Object.assign({},a,{start:a.backwards?r.range.start:r.range.end})}}}],[{key:"className",get:function(){return"TextSearcher"}}],d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:535,end:3676})}(void 0);Lg.TextSearcher=xO;Lg.TextSearcher=xO;Lg.TextSearcher=xO;var aX=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),m=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?d.SearchWidget:d.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var r=this.getSubmorphNamed("searchInput"),v=
this.getSubmorphNamed("prevButton"),y=this.getSubmorphNamed("nextButton"),A=this.getSubmorphNamed("cancelButton"),E=this.getSubmorphNamed("acceptButton");Lg.connect(E,"fire",this,"execCommand",{converter:function(){return"accept search"}});Lg.connect(A,"fire",this,"execCommand",{converter:function(){return"cancel search"}});Lg.connect(y,"fire",this,"execCommand",{converter:function(){return"search next"}});Lg.connect(v,"fire",this,"execCommand",{converter:function(){return"search prev"}});Lg.connect(r,
"inputChanged",this,"search");Lg.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});Lg.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};r.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){g.target.execCommand("realign top-bottom-center");g.addSearchMarkersForPreview(g.state.inProgress&&
g.state.inProgress.found,!1);return F.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(a){var g=this,l=this.world();l&&setTimeout(function(){var r=l.focusedMorph;g.withAllSubmorphsDetect(function(v){return v.isFocused()})?g.get("searchInput")!=r&&g.get("replaceInput")!=r&&g.get("searchInput").focus():g.cancelSearch()})}},{key:"cleanup",
value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before){var a=this.state.before,g=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=g;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);
this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var g=this.target,l=g.selection,r=!!g.activeMark||!l.isEmpty(),v=a.found.range,y=v.start;v=v.end;y=a.backwards?y:v;r?l.lead=y:g.cursorPosition=y;g.isLineFullyVisible(y.row)||g.centerRow();
return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(g){g=g.id;return g.startsWith("search-highlight")&&a.target.removeMarker(g)})}},{key:"addSearchMarkers",value:function(a,g,l){l=void 0===l?!1:l;this.removeSearchMarkers();g=this.target;var r=this.textMap,v=g.whatsVisible,y=v.startRow;v=v.endRow;var A=g.document.lineStrings,E=0,F=Lg.config.codeEditor.search,G=F.maxCharsPerLine;F=F.fastHighlightLineCount;r&&3<=a.match.length&&A.length<F&&(y=
0,v=A.length-1);F=!1;for(var I=window.performance.now();y<=v&&!F;y++)for(var M=A[y]||"",L=0;L<Math.min(M.length,G);L++){if(300<window.performance.now()-I){F=!0;break}if(l?0===M.slice(L).indexOf(a.match):0===M.slice(L).toLowerCase().indexOf(a.match.toLowerCase()))g.addMarker({id:"search-highlight-"+E++,range:{start:{row:y,column:L},end:{row:y,column:L+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),
L+=a.match.length}this.state.backwards?(l=a.range.start,a=l.row,l=l.column,a={start:{row:a,column:l},end:{row:a,column:l+1}}):(l=a.range.end,a=l.row,l=l.column,a={start:{row:a,column:l-1},end:{row:a,column:l}});l={};g.addMarker({id:"search-highlight-cursor",range:a,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});r&&r.update()}},{key:"addSearchMarkersForPreview",value:function(a,g){g=void 0===g?!0:g;a&&(this.addSearchMarkers(a),
g&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,g=this.state,l=a.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())Lg.once(a.getWindow(),"remove",this,"remove");l=this.get("searchInput");var r=a.scroll;a=a.selection;g.position=a.lead;g.before={scroll:r,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};g.last&&g.last.found&&(Lg.disconnect(l,
"inputChanged",this,"search"),this.input=g.last.needle,Lg.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(g.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(a){var g=this.state.inProgress;if(g&&g.found){var l=g.found.range;g=l.start;l=l.end;this.state.position=a!==this.state.backwards?a?l:g:a?g:l}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},
{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,g=a.backwards,l={backwards:g,start:a.position};a=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:a});this.applySearchResult(l);a?this.addSearchMarkers(a,g):this.cleanup();return l}},{key:"showTextMap",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);g=a.textMap=Lg.morph({type:"textmap"});g.attachTo(a.target);g.isLayoutable=!1;a.addMorph(g);g.topRight=a.innerBounds().bottomRight().addXY(0,5);g.height=a.target.height-a.height-15;g.update();a.renderOnGPU=!0;return l.return(g)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"accept search or replace and go to next"},{keys:"Tab",command:"change focus"},
{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape|Ctrl-G",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return r.yield(System.import("lively.morphic/text/occur.js"),2);g=r.yieldResult;l=g.occurStartCommand;a.target.addCommands([l]);a.execCommand("accept search");return r.return(a.target.execCommand("occur",{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search",exec:function(){a.cancelSearch();return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"accept search or replace and go to next",
exec:function(g,l,r){return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"accept search",l,r)}},{name:"replace current search location with replace input",exec:function(){var g=Lg.Path("state.inProgress").get(a);if(g.found){var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();g.needle instanceof RegExp&&(l=g.found.match.replace(g.needle,l));a.target.replace(g.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){a.execCommand("replace current search location with replace input");
a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var g=Lg.Path("state.inProgress").get(a);if(g.found){g=Object.assign({},g,{start:{row:0,column:0}});var l=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var r=(new Lg.TextSearcher(a.target)).searchForAll(g);a.target.undoManager.group();r.forEach(function(v){var y=v.range;v=v.match;g.needle instanceof RegExp&&(l=v.replace(g.needle,l));a.target.replace(y,
l,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var g=a.target,l=g.wordRight(),r=a.get("searchInput");r.selection.isEmpty()||(r.selection.text="");g=g.textInRange({start:g.cursorPosition,end:l.range.end});r.textString+=g;return!0}}]}}],[{key:"className",get:function(){return"SearchWidget"}},
{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:Lg.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:Lg.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=this.get("searchInput").textString,g=a.match(/^\/(.*)\/([a-z]*)$/);return g?new RegExp(g[1],
g[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=new Lg.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},
acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[Lg.morph({type:"button",name:"acceptButton",label:Lg.Icon.textAttribute("check-circle")}).fit(),Lg.morph({type:"button",name:"cancelButton",label:Lg.Icon.textAttribute("times-circle")}).fit(),Lg.morph({type:"button",name:"nextButton",label:Lg.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),Lg.morph({type:"button",name:"prevButton",label:Lg.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),Lg.morph({type:"input",name:"searchInput",placeholder:"search input",
historyId:"lively.morphic-text search"}),Lg.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),Lg.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),Lg.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];Lg.connect(this.get("searchInput"),"onBlur",this,"onBlur");Lg.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3796,end:20987})}(Lg.Morph);Lg.SearchWidget=aX;Lg.SearchWidget=aX;Lg.SearchWidget=aX;var yO=[{name:"search in text",exec:function(b,d){d=void 0===d?{backwards:!1}:d;b=b._searchWidget||(b._searchWidget=new Lg.SearchWidget({target:b,extent:Lg.pt(300,20)}));b.state.backwards=d.backwards;
b.prepareForNewSearch();Lg.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];Lg.searchCommands=yO;Lg.searchCommands=yO;Lg.searchCommands=yO;var xm=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");xm.todo=function(b){throw Error("not yet implemented "+b);};xm.Rectangle=Re;xm.rect=Gl;xm.pt=th;xm.arr=ng;xm.Range=vz;var Zba=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),m=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?
d.TextLayout:d.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,g){var l=function(y){var A=0;return xm.arr.flatten(xm.arr.histogram(y,y.length/3).map(function(E){var F=$jscomp.makeIterator(E);E=F.next().value;var G=F.next().value;
F=F.next().value;for(var I=[],M=0;M<E;M++)I.push(xm.rect(A,0,G,F)),A+=G;return I}))};a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){var v=$jscomp.makeIterator(r.value);r=v.next().value;v=v.next().value;v=l(v);this.lineCharBoundsCache.set(g.document.getLine(r),v)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,
null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,g){var l=a.document;a._isDeserializing&&a._initializedByCachedBounds||l&&this.resetLineCharBoundsCacheOfLine(l.getLine(g))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,g){for(var l=g.start.row;l<=g.end.row;l++)this.resetLineCharBoundsCacheOfRow(a,l)}},{key:"estimateLineHeightsInRange",value:function(a,g){for(var l=a.document,r=a.getGlobalTransform(),v=g.start.row;v<=g.end.row;v++)this.resetLineCharBoundsCacheOfRow(a,l.getLine(v),
r)}},{key:"estimateExtentOfLine",value:function(a,g,l){l=void 0===l?a.getGlobalTransform():l;var r=a.fontMetric,v=a.lineWrapping,y=a.padding,A=a.textRenderer,E=a.debug,F=a.defaultTextStyle,G=a.getProperty("extent").x,I=y.left(),M=y.right(),L=y.top();y=y.bottom();A=A.directRenderTextLayerFn(a);var S=g.textAndAttributes,R=[],aa;G=G-I-M;if(S&&S.length)for(var ra=0,Ea=0;ra<S.length;ra+=2)(aa=S[ra])&&aa.isMorph?(aa.position=this.pixelPositionFor(a,{row:g.row,column:Ea}).subPt(a.origin),Ea++):aa&&(Ea+=
aa.length),R.push(Object.assign({},F,{},S[ra+1]));else R.push(F);S=R.length;for(ra=F=aa=0;ra<S;ra++){Ea=r.defaultCharExtent(a,{defaultTextStyle:R[ra],width:1E3,transform:l,paddingBottom:y,paddingTop:L,paddingRight:M,paddingLeft:I},A);var K=Ea.width;F=Math.max(Ea.height,F);aa+=K}a=F;l=g.text.length||1;r=Math.round(aa/S);I=l*r;I=v?Math.min(I,G):I;v&&(a=Math.round((Math.ceil(l/Math.max(3,G/r))||1)*F));E&&console.log(g.row+": "+g.height+" => "+a);g.changeExtent(I,a,!0)}},{key:"estimateLineHeights",value:function(a,
g){var l=a.fontMetric,r=a.textRenderer,v=a.document,y=a.defaultTextStyle,A=a.clipMode,E=a.textAlign,F=a.padding,G=a.lineWrapping,I=a.debug,M=a.getProperty("extent"),L=M.x,S=M.y;M=a.getGlobalTransform();var R=F.left(),aa=F.right(),ra=F.top();F=F.bottom();v=v.lines;var Ea=r.directRenderTextLayerFn(a);I&&(I=a.debugHelper(I),I.debugTextLayout||(I=!1));if(!I&&10>a.lineCount()&&3E3>a.document.stringSize&&!xm.arr.any(a.textAndAttributes,function(K){return K&&void 0!=K.fontFamily}))for(g=r.directRenderLineFn(a),
g=l.manuallyComputeBoundsOfLines(a,v,0,0,{defaultTextStyle:y,width:L,height:S,clipMode:A,lineWrapping:G,textAlign:E,transform:M,paddingLeft:R,paddingRight:aa,paddingTop:ra,paddingBottom:F},Ea,g),y=0;y<v.length;y++)I=g[y],v[y].changeExtent(I.width,I.height,!l.isFontSupported(a.fontFamily,a.fontWeight));else{for(y=l=0;y<v.length;y++)A=v[y],!g&&0<A.height||(l++,this.estimateExtentOfLine(a,A,M));a.viewState._textLayoutStale=!1;I&&I.log("estimateLineHeights, "+l+"/"+v.length+" updated, force: "+g)}}},
{key:"defaultCharExtent",value:function(a){var g=a.textRenderer,l=a.fontMetric,r=a.defaultTextStyle,v=a.getGlobalTransform();g=g.directRenderTextLayerFn(a);return l.defaultCharExtent(a,{transform:v,defaultTextStyle:r,width:1E3},g)}},{key:"textBounds",value:function(a){var g=a.document,l=a.padding,r=a.borderWidthLeft,v=a.borderWidthRight,y=a.borderWidthTop;a=a.borderWidthBottom;return new xm.Rectangle(l.left(),l.top(),Math.round(g.width+r+v),Math.round(g.height+y+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=
a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,g){return g>=a.viewState.firstVisibleRow&&g<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,g){return g>=a.viewState.firstFullyVisibleRow&&g<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var g=a.viewState.firstVisibleRow,l=a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(g,
l),startRow:g,endRow:l}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,g,l){var r=g.row,v=g.column;v=Math.max(0,v);r=Math.min(a.lineCount()-1,Math.max(0,r));var y=this.charBoundsOfRow(a,r);v>y.length-1&&(v=y.length-1);for(var A=y[v],E=g=v,F=v+1;F<y.length&&!(y[F].y>A.y+A.height);F++)E=F;E===y.length-1&&E++;for(F=v-1;0<=F&&!(y[F].y<
A.y+A.height);F--)g=F;l&&(a=a.getLine(r).slice(g,E).match(/^\s*/)[0].length,g+=a);return new xm.Range({start:{row:r,column:g},end:{row:r,column:E}})}},{key:"rangesOfWrappedLine",value:function(a,g){for(var l=a.getLine(g).length,r=0,v=[];;){var y=this.screenLineRange(a,{row:g,column:r},!1);v.push(y);if(y.end.column>=l)break;var A=y.end.column+1;if(A>=l)break;if(A<=r)throw Error("should not happen "+y.end.column+" vs "+r);r=A}return v}},{key:"chunkAtPos",value:function(a,g){xm.todo("chunkAtPos")}},
{key:"charBoundsOfRow",value:function(a,g){g=a.document.getLine(g);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var l=this.lineCharBoundsCache.get(g);if(l)return l;var r=a.getProperty("extent");l=r.x;r=r.y;var v=a.fontMetric,y=a.textRenderer,A=a.defaultTextStyle,E=a.clipMode,F=a.textAlign,G=a.padding,I=a.lineWrapping,M=a.getGlobalTransform(),L=G.left(),S=G.right(),R=G.top();G=G.bottom();var aa=y.directRenderLineFn(a);y=y.directRenderTextLayerFn(a);
a=v.manuallyComputeCharBoundsOfLine(a,g,0,0,{defaultTextStyle:A,width:l,height:r,clipMode:E,lineWrapping:I,textAlign:F,paddingLeft:L,paddingRight:S,paddingTop:R,paddingBottom:G,transform:M},y,aa);this.lineCharBoundsCache.set(g,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,g){var l=g.start,r=g.end,v=a.textLayout;r=a.lineWrapping?v.rangesOfWrappedLine(a,l.row).find(function(y){return y.containsPosition(l)}).intersect(g).end:r;r=r.row==l.row?r:{row:r.row,column:-1};g=v.charBoundsOfRow(a,
l.row);g=0>r.column?g.slice(l.column):g.slice(l.column,r.column+1);r=l.column+(g?g.indexOf(xm.arr.max(g,function(y){return y.height})):0);return v.boundsFor(a,{row:l.row,column:r})}},{key:"boundsFor",value:function(a,g){var l=g.row;g=g.column;g=Math.max(0,g);l=Math.min(a.lineCount()-1,Math.max(0,l));var r=this.charBoundsOfRow(a,l);if(0<r.length)if(g>=r.length){var v=r[r.length-1];v=new xm.Rectangle(v.x+v.width,v.y,0,v.height)}else v=xm.Rectangle.fromLiteral(r[g]);v||(console.warn("Cannot compute bounds for line "+
l+"/"+g),v=new xm.Rectangle(0,0,0,0));g=a.document;a=a.padding;v.x+=a.left();v.y=v.y+g.computeVerticalOffsetOf(l)+a.top();return v}},{key:"pixelPositionFor",value:function(a,g){return this.boundsFor(a,g).topLeft()}},{key:"textPositionFromPoint",value:function(a,g){var l=g.addPt(a.origin),r=l.x,v=l.y,y=a.document;l=a.padding;var A=l.left(),E=l.top();if(v>y.height+E)return y.endPosition;if(v<E)return{row:0,column:0};l=y.findLineByVerticalOffset(v-E);if(!l)return{row:0,column:0};var F=l.line.row;a=this.charBoundsOfRow(a,
F);var G=a.length,I=a[0],M=a[G-1];l={row:F,column:0};r-=A;v-=E+y.computeVerticalOffsetOf(F);if(0===G||r<=I.x+Math.round(I.width/2)&&v>=I.y&&v<=I.y+I.height)return l;if(r>M.x+Math.round(M.width/2)&&v>=M.y&&v<=M.y+M.height)return l.column=G,l;A=[];for(y=G-1;0<=y;y--)if(M=E=a[y],F=M.x,G=M.width,I=M.y,M=M.height,!(v<I||v>I+M)&&(A.push(E),r>=F+Math.round(G/2)))return l.column=1===A.length?y:y+1,l;if(A.length)return l.column=a.indexOf(xm.arr.last(A)),l;r=Infinity;v=-1;for(y=0;y<a.length;y++)A=a[y],A=g.distSquared(xm.pt(A.x+
A.width/2,A.y+A.height/2)),A>=r||(r=A,v=y);l.column=v;return l}}],[{key:"className",get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:239,end:16437})}(void 0),Kua=Zba=xm.TextLayout;xm.default=Zba;var Yf=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
Yf.printViewState=function(b){var d=b.viewState,m=d.scrollTop,a=d.scrollHeight,g=d.textHeight,l=d.firstVisibleRow;d=d.lastVisibleRow;var r=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+m+" + "+a+"\nlines: "+l+" - "+d+"\nvisible lines: "+(d-l)+"\nheight: "+g+", "+r.length+" lines")};Yf.installCSS=function(b){Yf.cssInstalled=!0;Yf.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Yf.extractHTMLFromTextMorph=eM;Yf.obj=Ng;Yf.arr=ng;Yf.num=sm;Yf.pt=th;Yf.Rectangle=Re;Yf.vdom=AH;Yf.defaultAttributes=ly;Yf.defaultStyle=ky;Yf.addOrChangeCSSDeclaration=zj;Yf.hyperscriptFnForDocument=ZM;Yf.objectReplacementChar="\ufffd";Yf.config=am;Yf.getSvgVertices=iy;var zO=Yf.vdom;Yf.h=zO.h;Yf.create=zO.create;Yf.patch=zO.patch;Yf.diff=zO.diff;Yf.cssInstalled=!1;Yf.debug=!!Yf.config.onloadURLQuery["debug-text"];Yf.nextTick=function(b,d,m,a,g,l){for(;!g&&m<d.length;)g=b[d[m++]+"equestAnimationFrame"];
return g&&g.bind(b)||b.setImmediate||function(r){b.setTimeout(r,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,g,l){if(0===g.height||g.hasEstimatedExtent){var r=a.getGlobalTransform().inverse();r.e=r.f=0;var v=1!=r.getScale()||0!=r.getRotation();v&&(l.style.transform=r.toString());var y=l.getBoundingClientRect();r=y.height;y=y.width;v&&(l.style.transform="");r&&y&&(g.height!==r||g.width!==y)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(g.changeExtent(y,r,!1),a.textLayout.resetLineCharBoundsCacheOfLine(g),
this.needsRerender=!0,a.viewState._needsFit=!0);if(g.textAndAttributes&&g.textAndAttributes.length)for(y=v=0;v<g.textAndAttributes.length;v+=2)(l=g.textAndAttributes[v])&&l.isMorph?(a._positioningSubmorph=l,l.position=a.textLayout.pixelPositionFor(a,{row:g.row,column:y}).subPt(a.origin),l._dirty=!1,a._positioningSubmorph=null,y++):l&&(y+=l.length);return r}return g.height}},{key:"updateExtentsOfLines",value:function(a){var g=this.morph,l=g.viewState,r=g.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=
0;l.textWidth=a.scrollWidth;a=a.children;for(var v=0,y;v<a.length&&"line"!=a[v].className;)v++;if(v<a.length){y=a[v];var A=y.dataset;A=Number(A?A.row:y.getAttribute("data-row"));if("number"===typeof A&&!isNaN(A)){l.dom_nodeFirstRow=A;y=0;A=g.document.getLine(A);for(var E;v<a.length;v++){var F=a[v];l.dom_nodes.push(F);A&&(E||(E=A.hasEstimatedExtent),A.hasEstimatedExtent=E,y+=this.updateLineHeightOfNode(g,A,F),A.hasEstimatedExtent=!r.isFontSupported(g.fontFamily,g.fontWeight),A=A.nextLine())}this.needsRerender?
(g.fitIfNeeded(),g.makeDirty()):g._dirty=!!g.submorphs.find(function(G){return G.needsRerender()})}}}},{key:"hook",value:function(a,g,l){a&&a.parentNode&&(g=this.morph.viewState,g.text_layer_node=a,g.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:"className",get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4953,end:9059})})(void 0);var $ba=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),m=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Yf.cssInstalled||Yf.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var g=this,l=a.viewState._renderLineFn;if(!l){var r=Yf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderLineFn=function(v){return g.renderLine(r,null,a,v)}}return l}},{key:"directRenderTextLayerFn",value:function(a){var g=this,l=a.viewState._renderTextLayerFn;if(!l){var r=
Yf.hyperscriptFnForDocument(this.domEnv.document);l=a.viewState._renderTextLayerFn=function(v){return g.renderJustTextLayerNode(r,a,v,[])}}return l}},{key:"renderMorph",value:function(a,g){var l=[],r=a.selection;if(a.inMultiSelectMode()){r=r.selections;for(var v=0;v<r.length-1;v++)l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!0,2)));l.push.apply(l,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,r[v],!1,4)))}else l=this.renderSelectionLayer(a,r,!1,1);r=this.renderTextLayer(a,
g);v=this.renderJustTextLayerNode(Yf.h,a,null,[]);var y=this.renderMarkerLayer(a,g),A=a.document.width>a.width?a.scrollbarOffset:Yf.pt(0,0);A=Yf.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Yf.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-A.y+"px"}})]);r.properties.className+=" actual";
r.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";v.properties.className+=" font-measure";var E=a.embeddedMorphMap,F=E?a.submorphs.filter(function(G){return!E.has(G)}):a.submorphs;l=[].concat($jscomp.arrayFromIterable(l),[y,v,r,g.renderSelectedSubmorphs(a,F)]);return Yf.h("div",Object.assign({},Yf.defaultAttributes(a,g),{style:Object.assign({},Yf.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===
a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[A].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Yf.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},l)]:l)))}},{key:"renderTextLayer",value:function(a,g){var l=this,r=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Yf.h,g,a))):this.renderLines(Yf.h,
g,a);r=this.renderJustTextLayerNode(Yf.h,a,null,r);r.properties.style.position="absolute";var v=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Yf.AfterTextRenderHook);v.reset(a);r.properties["after-text-render-hook"]=v;Yf.nextTick(function(){l.manuallyTriggerTextRenderHook(a,g)});return r}},{key:"manuallyTriggerTextRenderHook",value:function(a,g){var l=a.viewState.afterTextRenderHook;l&&!l.called&&((g=(g=g.getNodeForMorph(a))&&g.querySelector(".actual.newtext-text-layer"))&&
l.hook(g),a.ownerChain().every(function(r){return r.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,g,l,r){var v=g.padding,y=v.x,A=v.y,E=g.fixedWidth,F=g.fixedHeight,G=g.backgroundColor,I=g.fontColor,M=g.textAlign,L=g.fontSize,S=g.textDecoration,R=g.fontStyle,aa=g.fontWeight,ra=g.fontFamily,Ea=g.lineHeight,K=g.wordSpacing,Z=g.letterSpacing,U=g.tabWidth,V=y+v.width;v=A+v.height;var na=Math.max(g.document.height,g.height),la="newtext-text-layer";switch(g.lineWrapping){case !0:case "by-words":la+=
" wrap-by-words";break;case "only-by-words":la+=" only-wrap-by-words";break;case "by-chars":la+=" wrap-by-chars";break;case !1:la+=" no-wrapping"}E||(la+=" auto-width");F||(la+=" auto-height");g={height:na+"px"};0<y&&(g.paddingLeft=y+"px");0<V&&(g.paddingRight=V+"px");0<A&&(g.paddingTop=A+"px");0<v&&(g.paddingBottom=v+"px");Z&&(g.letterSpacing=Z);K&&(g.wordSpacing=K);Ea&&(g.lineHeight=Ea);ra&&(g.fontFamily=ra);aa&&(g.fontWeight=aa);R&&(g.fontStyle=R);S&&(g.textDecoration=S);L&&(g.fontSize=L+"px");
M&&(g.textAlign=M);I&&(g.color=String(I));G&&(g.backgroundColor=G);8!==U&&(g.tabSize=U);y={className:la,style:g};g.overflow="hidden";l&&(A=l.clipMode,G=l.height,l=l.width,"number"===typeof l&&(g.width=l+"px"),"number"===typeof G&&(g.height=G+"px"),A&&(g.overflow=A));return a("div",y,r)}},{key:"renderLines",value:function(a,g,l){var r=l.height,v=l.scroll,y=l.padding.y,A=l.document,E=l.clipMode;g.getNodeForMorph(l);v=v.y;var F=A.rowCount-1,G=A.height,I="visible"!==E,M=A.findLineByVerticalOffset(I?Math.max(0,
I?v-y:0):0)||{row:0,y:0,offset:0,line:A.getLine(0)},L=M.line,S=M.offset;E=M.y;M=M.row;y=A.findLineByVerticalOffset(I?Math.min(G,v-y+r):G)||{row:F,offset:0,y:0,line:A.getLine(F)};A=y.line;var R=y.offset,aa=y.row;y=I?M:0;S=0===S?M:M+1;F=I?aa+1:F;I=A&&R!==A.height?aa-1:aa;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,F-y+1);M=[];A=[];A.push(a("div.newtext-before-filler",{key:"filler",style:{height:E+"px"}}));for(R=0;R<this.maxVisibleLines&&(M.push(L),aa=this.renderLine(a,g,l,L),A.push(aa),aa.key=
L.row%this.maxVisibleLines,R++,L=L.nextLine(),L););Object.assign(l.viewState,{scrollTop:v,scrollHeight:r,scrollBottom:v+r,heightBefore:E,textHeight:G,firstVisibleRow:y,lastVisibleRow:F,firstFullyVisibleRow:S,lastFullyVisibleRow:I,visibleLines:M});l.debug&&Yf.printViewState(l);return A}},{key:"renderLine",value:function(a,g,l,r){var v=r.textAndAttributes,y=[],A=v.length,E=l.fontSize;if(0<A)for(var F=0;F<A;F+=2){var G=v[F]||"\u00a0";var I=v[F+1];if("string"!==typeof G)y.push(G.isMorph?this.renderEmbeddedSubmorph(a,
g,G,I):Yf.objectReplacementChar);else if(I){var M=I.fontSize&&(Yf.obj.isString(I.fontSize)?I.fontSize:I.fontSize+"px");var L=I.fontFamily;var S=I.fontWeight;var R=I.fontStyle;var aa=I.textDecoration;var ra=I.fontColor;var Ea=I.backgroundColor;var K=I.nativeCursor;var Z=I.textStyleClasses;var U=I.link;var V=I.lineHeight||V;var na=I.textAlign||na;var la=I.wordSpacing||la;var ya=I.letterSpacing||ya;var jb=I.paddingRight;var gb=I.paddingLeft;var ka=I.paddingTop;var ia=I.paddingBottom;var qa=I.verticalAlign;
var La=I.textStroke;var Lb=I.quote||Lb;var qc="span";var dc={};var oc={style:dc};M&&I.fontSize<E&&(E=I.fontSize);U&&(qc="a",(oc.href=U)&&U.startsWith("http")&&(oc.target="_blank"));if(U||K)dc.pointerEvents="auto";M&&(dc.fontSize=M);L&&(dc.fontFamily=L);S&&(dc.fontWeight=S);R&&(dc.fontStyle=R);aa&&(dc.textDecoration=aa);ra&&(dc.color=String(ra));Ea&&(dc.backgroundColor=String(Ea));K&&(dc.cursor=K);jb&&(dc.paddingRight=jb);gb&&(dc.paddingLeft=gb);ka&&(dc.paddingTop=ka);ia&&(dc.paddingBottom=ia);qa&&
(dc.verticalAlign=qa);La&&(dc["-webkit-text-stroke"]=La);I.doit&&(dc.pointerEvents="auto",dc.cursor="pointer");Z&&Z.length&&(oc.className=Z.join(" "));y.push(a(qc,oc,G))}else y.push(G)}else y.push(a("br"));g={};l.fontSize>E&&(g.fontSize=E+"px");V&&(g.lineHeight=V);na&&(g.textAlign=na);ya&&(g.letterSpacing=ya);la&&(g.wordSpacing=la);l=a("div",{className:"line",style:g,dataset:{row:r.row}},y);if(Lb)for("number"!==typeof Lb&&(Lb=1);Lb--;)l=a("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",
value:function(a,g,l,r){r=r||{};if(g)return a=g.render(l),a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",r.paddingTop&&(a.properties.style.marginTop=r.paddingTop),r.paddingLeft&&(a.properties.style.marginLeft=r.paddingLeft),r.paddingRight&&(a.properties.style.marginRight=r.paddingRight),r.paddingBottom&&(a.properties.style.marginBottom=r.paddingBottom),a;g=l.extent;r=g.x+"px";g=g.y+"px";return a("div",{className:l.styleClasses.join(" "),
style:{width:r,height:g}},[])}},{key:"renderSelectionLayer",value:function(a,g,l,r){l=void 0===l?!1:l;r=void 0===r?2:r;if(!g)return[];var v=a.textLayout,y=g.start,A=g.end,E=g.cursorVisible,F=g.selectionColor,G=a.document,I=a.cursorColor,M=g.isReverse();y=v.boundsFor(a,y);var L=v.computeMaxBoundsForLineSelection(a,g),S=v.boundsFor(a,A);Yf.pt(y.x,L.y);L=Yf.pt(S.x,S.y);A=y.height;S=S.height;y=M?Yf.pt(y.x,y.y):L;l=this.cursor(y,M?A:S,E,l,r,I);if(g.isEmpty())return[l];r=[];E=g.start.row;I=G.computeVerticalOffsetOf(E)+
a.padding.top();M=a.padding.left();for(var R,aa,ra;E<=g.end.row;){A=G.getLine(E);if(!(E<a.viewState.firstVisibleRow-50)){if(E>a.viewState.lastVisibleRow+50)break;y=v.charBoundsOfRow(a,E).map(Yf.Rectangle.fromLiteral);S=E==g.start.row;if(ra=y[0].bottom()<Yf.arr.last(y).top()){L=v.rangesOfWrappedLine(a,E).map(function(U){return U.intersect(g)});aa=S;var Ea=0,K=R=void 0,Z=$jscomp.makeIterator(L);for(L=Z.next();!L.done;L=Z.next())L=L.value,L.isEmpty()||(R=y.slice(L.start.column,L.end.column),Ea=aa?Yf.arr.min(R.map(function(U){return U.top()})):
Ea,K=Yf.arr.max(R.map(function(U){return U.bottom()})),aa=R[0],L=Yf.pt(M+aa.left(),I+Ea),aa=Yf.arr.last(R),R=Yf.pt(M+aa.right(),I+K),Ea=K,aa=!1,r.push(Yf.Rectangle.fromAny(L,R)))}ra||(ra=E==g.end.row,L=S?g.start.column:0,Ea=ra?g.end.column:y.length-1,S=S&&Yf.arr.min(y.slice(L,Ea+1).map(function(U){return U.top()}))||0,Z=L>=Ea?5:0,aa=y[L],L=Yf.pt(M+(aa?aa.left():Yf.arr.last(y).right()),I+S),aa=y[Ea],g.includingLineEnd?R=Yf.pt(a.width-a.padding.right(),I+S+A.height):(ra=ra&&g.end.column<=y.length-1,
R=Yf.pt(M+(aa?ra?aa.left():aa.right():Yf.arr.last(y).right())+Z,I+S+A.height)),r.push(Yf.Rectangle.fromAny(L,R)))}I+=A.height;E++}a=this.selectionLayerRounded(r,F,a);a.push(l);return a}},{key:"selectionLayerRounded",value:function(a,g,l){var r=[l={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var v=a.next();!v.done;v=a.next()){v=v.value;y&&(y.left()>v.right()||y.right()<v.left())&&r.push(l={left:[],right:[]});l.left.push(v.topLeft(),v.bottomLeft());l.right.push(v.topRight(),v.bottomRight());var y=
v}y=[];l={};r=$jscomp.makeIterator(r);for(a=r.next();!a.done;l={$jscomp$loop$prop$pos$2255:l.$jscomp$loop$prop$pos$2255},a=r.next())if(a=a.value,a.left.length){l.$jscomp$loop$prop$pos$2255=a.left.reduce(function(M,L){return M.minPt(L)});v=a.left.concat(a.right.reverse());a=[];for(var A=0;A<v.length;A++){var E=v[A-1]||Yf.arr.last(v),F=v[A],G=v[A+1]||Yf.arr.first(v),I=E.subPt(F).normalized().scaleBy(6);E=F.addPt(I);E._next=I.scaleBy(-1);G=G.subPt(F).normalized().scaleBy(6);F=F.addPt(G);F._prev=G.scaleBy(-1);
a.push(E,F)}a=a.map(function(M){return function(L){return{position:L.subPt(M.$jscomp$loop$prop$pos$2255),isSmooth:!0,controlPoints:{next:L._next||Yf.pt(0),previous:L._prev||Yf.pt(0)}}}}(l));v=Yf.getSvgVertices(a);F=a.map(function(M){return M.position}).reduce(function(M,L){return M.minPt(L)});A=F.y;F=F.x;a=a.map(function(M){return M.position}).reduce(function(M,L){return M.maxPt(L)});y.push(Yf.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2255.x+
"px",top:l.$jscomp$loop$prop$pos$2255.y+"px",width:a.x-F,height:a.y-A}},Yf.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:v,fill:g.toString()}})))}return y}},{key:"cursor",value:function(a,g,l,r,v,y){return Yf.h("div",{className:"newtext-cursor"+(r?" diminished":""),style:{left:a.x-Math.ceil(v/2)+"px",top:a.y+"px",width:v+"px",height:g+"px",display:l?"":"none",background:y||"black"}})}},{key:"renderMarkerLayer",value:function(a){var g=a.markers,l=a.textLayout,r=a.viewState,v=r.firstVisibleRow;
r=r.lastVisibleRow;var y=[];if(!g)return y;g=$jscomp.makeIterator(g);for(var A=g.next();!A.done;A=g.next()){var E=A.value;A=E.style;E=E.range;var F=E.start;E=E.end;if(!(E.row<v||F.row>r))if(F.row===E.row)y.push(this.renderMarkerPart(l,a,F,E,A));else{y.push(this.renderMarkerPart(l,a,F,a.lineRange(F.row).end,A));for(F=F.row+1;F<=E.row-1;F++){var G=a.lineRange(F);y.push(this.renderMarkerPart(l,a,G.start,G.end,A,!0))}y.push(this.renderMarkerPart(l,a,{row:E.row,column:0},E,A))}}return y}},{key:"renderMarkerPart",
value:function(a,g,l,r,v,y){y=void 0===y?!1:y;var A=g.document;var E=A.getLine(l.row);y?(a=g.padding,y=a.left(),l=a.top()+A.computeVerticalOffsetOf(l.row),a=y+E.width,E=E.height):(E=a.boundsFor(g,l),y=E.x,l=E.y,E=a.boundsFor(g,r),a=E.x,E=E.height);E=Math.ceil(E);return Yf.h("div.newtext-marker-layer",{style:Object.assign({},v,{left:y+"px",top:l+"px",height:E+"px",width:a-y+"px"})})}},{key:"renderDebugLayer",value:function(a){var g=[],l=a.viewState,r=l.heightBefore,v=l.firstVisibleRow,y=l.lastVisibleRow;
l=l.visibleLines;var A=a.padding,E=a.scroll,F=E.x,G=E.y;E=A.left();var I=A.right(),M=A.top();A.bottom();g.push(Yf.h("div.debug-info",{style:{left:F+E+"px",top:G+"px",width:a.width-I+"px"}},Yf.h("span","visible rows: "+v+" - "+y)));for(A=0;v<y;A++,v++){var L=l[A];G=a.textLayout.lineCharBoundsCache.get(L);L=L.height;g.push(Yf.h("div.debug-line",{style:{left:F+E+"px",top:M+r+"px",width:a.width-I+"px",height:L+"px"}},Yf.h("span",String(v))));if(G)for(var S=0;S<G.length;S++){var R=G[S];g.push(Yf.h("div.debug-char",
{style:{left:E+R.x+"px",top:M+r+R.y+"px",width:R.width+"px",height:R.height+"px"}}))}r+=L}return g}}],[{key:"className",get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9076,end:36350})}(void 0),Lua=$ba=Yf.TextRenderer;Yf.extractHTMLFromTextMorph=
eM;Yf.extractHTMLFromTextMorph=eM;Yf.default=$ba;var Vq=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Vq.arr=ng;Vq.eqPosition=kv;Vq.KeyHandler=wV;Vq.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,d){d=void 0===d?{backwards:!1}:d;Vq.IyGotoCharKeyHandler.installInto(b,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,d){b.saveMark();var m=b.selection,a=m.lead,g=a.row,l=a.column;a=!!b.activeMark||!m.isEmpty();var r={row:g,column:l-
1};b=b.document[d.backwards?"scanBackward":"scanForward"](r,function(v,y){return v!==d.needle||Vq.eqPosition(r,y)?null:y});if(!b)return!0;b.column++;m.lead=b;a||(m.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var AO=Vq.commands.activate;Vq.activate=AO;Vq.activate=AO;Vq.activate=AO;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),m=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:
d.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;
Vq.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,g){var l=g.keyCombo,r=l.startsWith("input-");if(g.onlyModifiers||l.startsWith("Shift-")||!r&&!g.isModified&&!g.isFunctionKey)return{command:"null",passEvent:!0};g=r&&l.slice(6);if(!this.charToFind)if(r)this.charToFind=g;else return this.uninstallFrom(a),null;return g!==this.charToFind?(this.uninstallFrom(a),null):{command:Vq.commands.moveTo,args:{backwards:this.backwards,needle:g}}}}],[{key:"className",get:function(){return"IyGotoCharKeyHandler"}},
{key:"installInto",value:function(a,g){g=void 0===g?!1:g;a.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(g))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1049,end:3032})})(Vq.KeyHandler);var Zi=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Zi.chain=hm;Zi.arr=ng;Zi.string=Li;Zi.date=ju;Zi.pt=th;Zi.Range=vz;Zi.eqPosition=kv;Zi.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",
exec:function(b,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var m=b.selection,a=m.text,g=d.hasOwnProperty("collapseSelection")?d.collapseSelection:!0;b.saveMark(m.anchor);b.activeMark=null;(m.isMultiSelection?m.selections.slice():[m]).forEach(function(l){var r=l.isEmpty()?b.lineRange():l.range,v=b.textInRange(r);b.env.eventDispatcher.killRing.add(v);d["delete"]?b.deleteText(r):!l.isEmpty()&&g&&l.collapse(l.lead)});d.dontTryNativeClipboard||b.env.eventDispatcher.doCopy(a);
return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,d){d=void 0===d?{killRingCycleBack:!1}:d;var m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a=
b.env.eventDispatcher.killRing;d.killRingCycleBack&&(Zi.arr.last(Zi.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(m=a.back());!m&&a.isCycling()&&(m=a.yank());m||(m=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(l,r){r=a.pointer-1-r;0>r&&(r=a.buffer.length-1);return{selection:l,pasted:a.buffer[r]||""}}).concat({selection:b.selection.defaultSelection,pasted:m}).forEach(function(l){return l.selection.text=
l.pasted}),b.undoManager.group()):m&&(b.undoManager.group(),b.selection.text=m,b.undoManager.group());return g.return(!0)})}},{name:"browse clipboard",exec:function(b){var d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=b.env.eventDispatcher.killRing,m=d.pointer,a=d.buffer,g=a.map(function(y){return{isListItem:!0,string:Zi.string.truncate(y,80).replace(/\n/g,""),value:y}}),v.yield(b.world().filterableListPrompt("select items to paste",g,{preselect:m,
multiSelect:!0}),2);l=v.yieldResult;r=l.selected;r.length&&(b.undoManager.group(),b.insertTextAndSelect(r.join("\n")),b.undoManager.group());return v.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var d=b.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var d=b.selection;
if(b.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,m){return b.insertText(b.tab,m.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(d,m){return d.startsWith(b.tab)&&b.deleteText({start:m.start,end:{row:m.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,d){d=void 0===d?{}:d;var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress){m=b.editorPlugin&&b.editorPlugin.mode;if(!m)return E.return(!0);l=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?(r=d,a=r.firstRow,g=r.lastRow):b.selection.isEmpty()?a=g=b.cursorPosition.row:(v=b.selection.selectedRows,a=v.first,
g=v.last);return E.yield(System.import("lively.ide/editor-modes.js"),2)}y=E.yieldResult;A=y.indentLines;l&&b.undoManager.group();A(b,m,a,g,"smart",!0,d);l&&b.undoManager.group();return E.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var d=b.snippets.find(function(m){return m.canExpand(b)});return d?(d.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=b.snippets.map(function(r){return{isListItem:!0,string:r.trigger+" - "+r.expansion,value:r}}),l.yield(b.world().filterableListPrompt("select snippet",d,{requester:b}),2);m=l.yieldResult;a=$jscomp.makeIterator(m.selected);(g=a.next().value)&&g.expandAtCursor(b);return l.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var d=
b.cursorPosition,m=d.row,a=d.column;d=Zi.Range.create(m,a-1,m,a+1);var g=b.getLine(m);m=g[a-1];a=g[a];m&&a&&b.replace(d,a+m,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var d=b.selection.selections;b.undoManager.group();
d.reduce(function(m,a){var g=a.text;a.text=m;return g},Zi.arr.last(d).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var d=b.selection,m=d.lead.row,a=b.lineRange(m,!1);d.range=d.range.equals(a)?b.lineRange(m,!0):a;return!0}},{name:"goto line start",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var m=b.selection,a=m.lead;
b=b.screenLineRange(a,!0);m.lead=Zi.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!d&&(m.anchor=m.lead);return!0}},{name:"goto line end",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var m=b.selection;b=b.screenLineRange(m.lead,!0);m.lead=b.end;!d&&(m.anchor=m.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;b.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var m=b.paragraphRangeAbove(b.cursorPosition.row);m.start.row--;b.selection.lead=m.start;d.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var m=b.paragraphRangeBelow(b.cursorPosition.row);m.end.row++;b.selection.lead=m.end;d.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,
m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<a)m.row=a;else if(m.row<l)m.row=l;else if(m.row<g)m.row=g;else return!0;b.selection.lead=m;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var d=!!b.activeMark,m=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),g=b.textLayout.lastFullVisibleLine(b),l=a+Math.floor((g-a)/2);if(m.row<=a)return!0;
m.row=m.row<=l?a:m.row<=g?l:g;b.selection.lead=m;d||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return d=!!b.activeMark,m=Number,g.yield(b.world().prompt("Enter line number"),2);a=m(g.yieldResult);isNaN(a)||(d?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return g.return(!0)})}},{name:"join line",exec:function(b,
d){d=void 0===d?{withLine:"before"}:d;var m=b.selection,a=m.start,g=m.end;m=m.lead;if(!b.selection.isEmpty()){if(a.row===g.row)return!0;d=b.undoManager.ensureNewGroup(b,"join line");g=Zi.arr.range(0,g.row-1-a.row).map(function(l){return b.joinLine(a.row)});b.undoManager.group(d);b.selection.isMultiSelection&&(b.cursorPosition=g[0],g.slice(1).forEach(function(l){return b.selection.addRange({start:l,end:l})}));return!0}g=m.row;if("before"===d.withLine&&0>=g||"after"===d.withLine&&g>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===d.withLine?g-1:g);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var d=b.cursorPosition,m=b.getLine(d.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(m),d);b.cursorPosition=d;return!0}},{name:"insert line",exec:function(b,d){d=void 0===d?{where:"above"}:d;var m=b.cursorPosition.row,a=b.getLine(m).match(/^\s*/)[0].length;"below"===d.where&&m++;b.insertText(" ".repeat(a)+"\n",{column:0,row:m});b.cursorPosition=
{column:a,row:m};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var d=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var m=b.selection.range;b.insertText(b.selection.text,d);b.selection=m}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var d=b.cursorPosition,m=b.getLine(d.row);if(Zi.eqPosition(b.document.endPosition,d))return!0;d=m.trim()?{start:d,end:{row:d.row,
column:m.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(d));b.undoManager.group();b.deleteText(d);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var d=b.lineRange(),m=b.cursorPosition;if(Zi.eqPosition({row:m.row,column:0},m))return!0;d={start:Zi.eqPosition(d.start,m)?{row:m.row,column:0}:d.start,end:m};
b.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var m=d.selections.map(function(l){return l.range});m.slice().sort(Zi.Range.compare).forEach(function(l){b.selection=l;b.execCommand("move lines up")});m.forEach(function(l){l.start.row--;l.end.row--});b.selection.ranges=m;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);m=d.start;d=d.end;var a=b.getLine(m.row-1),g=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:d.row+1,column:0});b.deleteText({start:{row:m.row-1,column:0},end:{row:m.row,column:0}});b.undoManager.group(g);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var d=b.selection;if(b.inMultiSelectMode()){var m=d.selections.map(function(l){return l.range});m.slice().sort(Zi.Range.compare).reverse().forEach(function(l){b.selection=l;b.execCommand("move lines down")});m.forEach(function(l){l.start.row++;l.end.row++});b.selection.ranges=m;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var a=d.range,g=a;m=g.start;g=g.end;d.isEmpty()?a={start:{row:m.row,column:0},end:{row:m.row+1,column:0}}:0!==g.column&&(a={start:m,end:{row:g.row+1,column:0}});d=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:m.row+1,column:0});b.undoManager.group(d);b.selection={start:Object.assign({},m,{row:m.row+1}),end:Object.assign({},g,{row:g.row+1})};return!0}},{name:"old select word",exec:function(b){var d=b.selection;d.range=b.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(b){var d=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(d.lead)))d.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var d=b.selection;d.anchor=b.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var m=b.wordLeft().range;b.selection.lead=m.start;d||(b.selection.anchor=m.start);return!0}},{name:"goto word right",
exec:function(b,d){d=void 0===d?{select:!1}:d;d=d.select||!!b.activeMark;var m=b.wordRight().range;b.selection.lead=m.end;d||(b.selection.anchor=m.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var d=b.wordRight().range.end;d={start:b.cursorPosition,end:d};b.env.eventDispatcher.doCopy(b.textInRange(d));b.deleteText(d);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var d={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(d);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var m=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(m=b.findMatchingForward(b.cursorPosition,"right",m)||b.findMatchingForward(b.cursorPosition,"left",m))b.selection.lead=m,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,d){d=void 0===d?{select:!!b.activeMark}:d;var m=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(m=b.findMatchingBackward(b.cursorPosition,"left",m)||b.findMatchingBackward(b.cursorPosition,"right",m))b.selection.lead=m,d.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var d=b.charBoundsFromTextPosition(b.cursorPosition),m=d.topLeft();d=b.height-d.height;var a=b.scroll,g=a.x;a=a.y;
a=2>Math.abs(m.y-a)?m.y-d:2>Math.abs(m.y-a-.5*d)?m.y:m.y-.5*d;b.scroll=Zi.pt(g,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var d=b.selection;if(d.isEmpty()){var m=b.popSavedMark();m&&(b.saveMark(b.cursorPosition),d.lead=m.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,m){var a=b.activeMark;d=b.selection;var g=!d.isEmpty();if(4===m){if(b=b.popSavedMark())d.lead=
b.position,g||(d.anchor=d.lead);return!0}if(!a&&!g)return b.activeMark=d.lead,!0;b.saveMark(a||d.anchor);b.activeMark=null;g&&(b.inMultiSelectMode()?d.selections:[d]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,d,m){function a(y,A,E){if(y.length<=g)return[A+y.trim()];E=y.slice(0,g);var F=Zi.arr.last(Zi.string.reMatches(E,r)),G=F&&0<F.start?F.start:g;F=E.slice(0,G);y=A+(E.slice(G)+y.slice(g)).trimLeft();
return[F].concat(a(y,A))}if(4===m)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();d=b.selection;var g=m||80,l=d.selectedRows;m=d.range;var r=/[ ]+/g,v=/^[\s\t]+/;d=Zi.string.paragraphs(Zi.arr.range(l.first,l.last).map(function(y){return b.getLine(y)}).join("\n"),{keepEmptyLines:!0});d=Zi.chain(d.map(function(y){if(!/^\s*$/.test(y)){y=y.split("\n").join(" ");if(""===y.trim())y=[""];else{var A=y.match(v);A=A?A[0]:"";y=a(A+y.trim(),A)}y=y.join("\n")+"\n"}return y})).flatten().value().join("\n");
b.undoManager.group();b.replace(m,d);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var d=0;b.withLinesDo(0,b.documentEndPosition.row,function(m,a){return m.match(/\s+$/)&&++d&&b.replace(a,m.trimRight())});b.world().setStatusMessage(d+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var d=b.cursorPosition,m=b.getLine(d.row),a=m.match(/^\s*/)[0].length;b.undoManager.group();!m.trim()&&a&&(b.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:a}}),d.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(d,m,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,d){var m=d=void 0===d?{string:null,undoGroup:!1}:d;d=m.string;m=m.undoGroup;var a="string"===typeof d&&d.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(d))return!0;
a=b.selection;var g=!a.isEmpty();g&&b.undoManager.group();var l=a.lead;a.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<l.column));a.collapseToEnd();g&&b.undoManager.group();m&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof m?b.undoManager.group():b.undoManager.groupLater(m));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,d,m,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];Zi.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,d,m){d=Zi.date.format(new Date,m?"mediumDate":"isoDate");b.undoManager.group();b.insertText(d);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var d=b.selection;d.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var m=/\[X\]/g,a=d.text;a=b.test(a)?a.replace(b,"[X]"):m.test(a)?a.replace(m,"[ ]"):"[ ] "+a.trimLeft();d.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var d=b.selection,m=d.start.row;d=d.end.row;var a=[];b.withLinesDo(m,d,function(g){var l=a.findIndex(function(r){return r>g});-1<l?a.splice(l,0,g):a.push(g)});b.undoManager.group();b.replace({start:{row:m,
column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var d=b.selection,m=d.start.row;d=d.end.row;var a=[];b.withLinesDo(m,d,function(g){return a.push(g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:d+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var d=b.selection,m=d.start.row;d=d.end.row;var a=[];b.withLinesDo(m,
d,function(g){return Zi.arr.pushIfNotIncluded(a,g)});b.undoManager.group();b.replace({start:{row:m,column:0},end:{row:d+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,d,m){function a(G,I){var M,L,S=g(G).trim();"uppercased"===S?M=/\s*[A-Z0-9]+/g:"dashed"===S?M=/-\w/g:"spaced"===S&&(M=/\s+.?/g);"uppercased"===I?L=function(R){return R.trim().replace(/^-/,"").toUpperCase()}:"dashed"===I?L=function(R){return"-"+
R.trim().replace(/^-/,"").toLowerCase()}:"spaced"===I&&(L=function(R){return" "+R.trim().replace(/^-/,"").toLowerCase()});return G.replace(M,L)}function g(G){return G.match(/[A-Z]/)?"uppercased":G.match(/-/)?"dashed":G.match(/\s/)?"spaced":"unknown"}var l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);l=b.selection.ranges;r=b.textInRange(l[0]);if(!r)return b.setStatusMessage("Please select some text"),
G.return(!0);v=g(r);y=Zi.arr.without(["uppercased","dashed","spaced"],v);return G.yield(b.world().listPrompt("Convert "+v+" into?",y,{}),2)}A=G.yieldResult;E=$jscomp.makeIterator(A.selected);F=E.next().value;if(!F)return G.return(!0);b.undoManager.group();l.forEach(function(I,M){M=b.textInRange(I);M=a(M,F);b.replace(I,M)});b.undoManager.group();b.focus();return G.return(!0)})}},{name:"spell check word",exec:function(b,d){var m,a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return m=
b.wordAt(),m.string?A.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),A.return(!0));case 2:return a=A.yieldResult,g=a.spellCheckWord,A.yield(g(m.string),3);case 3:return l=A.yieldResult,l.length?A.yield(b.world().filterableListPrompt("Choose replacement for "+m.string,l),4):(b.setStatusMessage("no suggestions for word "+m.string),A.return(!0));case 4:r=A.yieldResult;v=$jscomp.makeIterator(r.selected);if(y=v.next().value)b.undoManager.group(),
b.replace(m.range,y),b.undoManager.group();return A.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,d){var m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return a=(m=b.textInRange(b.selection))&&0!==m.length?{stdin:m}:{},E.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return g=E.yieldResult,E.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=E.yieldResult;r=l.runCommand;if(!g)return E.return(b.setStatusMessage("No command entered, aborting...!"));v=r(g,a);E.setCatchFinallyBlocks(4);return E.yield(v.whenDone(),6);case 6:y=v.output.trim();b.undoManager.group();b.selection.selections.forEach(function(F){return F.text=y});b.undoManager.group();E.leaveTryBlock(5);break;case 4:A=E.enterCatchBlock(),b.showError(A);case 5:return E.return(!0)}})}},{name:"open file at cursor",exec:function(b,d){var m,a,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return b.getLine(),m=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(G,I){return(0>=I.column||G.match(/\s/))&&I})||{row:0,column:0},g=b.document.scanForward(b.cursorPosition,function(G,I){return(I.row!=m||G.match(/\s/))&&I})||b.documentEndPosition,l=b.textInRange({start:a,end:g}).replace(/\s/g,""),r=l.split(":"),v=r[0].match(/^file|http/)?r.shift()+":"+r.shift():r.shift(),r[0].match(/^[0-9]+$/)&&(v+=":"+r.shift()),F.yield(System.import("lively.ide/text-editor.js"),
2);y=F.yieldResult;A=y.default;E=A.openInWindow();E.location=v;return F.return(E)})}},{name:"run code on text morph",doc:"...",exec:function(b,d){var m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return m={targetModule:"lively://code-on-text-morph",context:b},v.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:m,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
v.yieldResult,v.setCatchFinallyBlocks(3),b.undoManager.group(),v.yield(lively.vm.runEval(a,m),5);case 5:l=v.yieldResult;b.undoManager.group();g=l.isError?l.value:null;v.leaveTryBlock(4);break;case 3:g=r=v.enterCatchBlock();case 4:return g&&b.showError(g),v.return(void 0)}})}},{name:"change editor mode",exec:function(b){var d,m,a,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return d=function(F){return!F.endsWith("ide/editor-plugin.js")&&F.endsWith("editor-plugin.js")},
E.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return m=E.yieldResult,a=b.editorPlugin||{},g=a.shortName,l=0,r=["<no mode>"].concat(m.map(function(F,G){var I=F.url.match(/([^\/]+)\/editor-plugin.js/)[1];I===g&&(l=G);return{isListItem:!0,string:I,value:F}})),E.yield(b.world().filterableListPrompt("choose mode",r,{requester:b,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:v=E.yieldResult;y=$jscomp.makeIterator(v.selected);A=y.next().value;
if(!A)return E.return();if("<no mode>"!==A){E.jumpTo(4);break}return E.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),E.return();case 4:if(A.isLoaded){E.jumpTo(6);break}return E.yield(lively.modules.module(A.url).load(),6);case 6:return E.yield(b.changeEditorMode(A.url),0)}})}},{name:"report token at cursor",exec:function(b){var d,m,a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){d=b.tokenAt(b.cursorPosition)||{};m=d.token;a=d.start;g=d.end;b.setStatusMessage(m?
m+" "+a.column+" => "+g.column:"no token");return l.return(!0)})}}];Zi.commands.push.apply(Zi.commands,$jscomp.arrayFromIterable(Zi.usefulEditorCommands));Zi.iyGotoCharActivate=AO;Zi.commands.push(Zi.iyGotoCharActivate);Zi.searchCommands=yO;Zi.commands.push.apply(Zi.commands,$jscomp.arrayFromIterable(Zi.searchCommands));var aca=Zi.commands;Zi.default=aca;var Od=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Od.Rectangle=Re;Od.Point=Yg;Od.rect=Gl;Od.Color=Tg;Od.pt=th;Od.string=Li;
Od.num=sm;Od.obj=Ng;Od.fun=xn;Od.promise=xh;Od.arr=ng;Od.signal=xf;Od.noUpdate=vw;Od.connect=yl;Od.disconnect=$o;Od.bowser=qv;Od.morph=ab;Od.touchInputDevice=Qq;Od.config=am;Od.Morph=Ol;Od.Selection=vO;Od.MultiSelection=wO;Od.Document=Iua;Od.objectReplacementChar="\ufffd";Od.Anchor=OE;Od.Range=vz;Od.eqPosition=kv;Od.lessPosition=jv;Od.KeyHandler=wV;Od.UndoManager=FH;Od.TextSearcher=xO;Od.TextLayout=Kua;Od.Renderer=Lua;Od.extractHTMLFromTextMorph=eM;Od.commands=aca;Od.textAndAttributesWithSubRanges=
dM;Od.serializeMorph=WF;Od.deserializeMorph=XF;Od.getSvgVertices=iy;Od.renderSubTree=uA;Od.ShadowObject=ds;Od.getClassName=Jp;var Ct=Ba("a7",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),m=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=
a=void 0===a?{}:a,l=g.position,r=g.rightCenter,v=g.leftCenter,y=g.topCenter,A=g.bottom,E=g.top,F=g.right,G=g.left,I=g.bottomCenter,M=g.bottomLeft,L=g.bottomRight,S=g.topRight,R=g.topLeft;g=g.center;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==r&&(this.rightCenter=r);void 0!==v&&(this.leftCenter=v);void 0!==y&&(this.topCenter=y);void 0!==A&&(this.bottom=A);void 0!==E&&
(this.top=E);void 0!==F&&(this.right=F);void 0!==G&&(this.left=G);void 0!==I&&(this.bottomCenter=I);void 0!==M&&(this.bottomLeft=M);void 0!==L&&(this.bottomRight=L);void 0!==S&&(this.topRight=S);void 0!==R&&(this.topLeft=R);void 0!==g&&(this.center=g)}},{key:"__deserialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__deserialize__",this).call(this,a,g,l,r);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Od.Renderer(this.env.domEnv);this.textLayout=
new Od.TextLayout(this);this.changeDocument(Od.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,g){var l=this;hc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",this).call(this,a,g);this._isDeserializing=!1;this.whenRendered().then(function(){l.embeddedMorphs.forEach(function(r){return r.top=0})})}},{key:"__only_serialize__",get:function(){return Od.arr.withoutAll(hc._get(Object.getPrototypeOf(m.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(I){return Od.obj.select(I,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(I){return!I.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(I){if(!I)return I;if(I.isMorph)return l.ref(I).asRefForSerializedObjMap();if(Od.obj.isObject(I)){var M={};I=JSON.stringify(I,function(L,S){return S&&S.__serialize__?(S=S.__serialize__(),Object.assign(M,S.bindings),"->["+(S.__expr__+"]")):S});I=
I.replace(/"->\[.*\]"/g,function(L){return L.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+I+")",bindings:M})}return I})};g=[];r=$jscomp.makeIterator(this.document.lines);for(var v=r.next();!v.done;v=r.next()){v=v.value;var y=this.textLayout.lineCharBoundsCache.get(v);if(y){var A=[],E=void 0,F=0;if(y){y=$jscomp.makeIterator(y);for(var G=y.next();!G.done;G=y.next()){G=G.value;if(E){if(Od.num.roundTo(E.width,.001)==Od.num.roundTo(G.width||0,.001)&&G.height==E.height){F++;
continue}A.push([F,Od.num.roundTo(E.width||0,.001),E.height||0])}F=1;E=G}}E&&A.push([F,Od.num.roundTo(E.width||0,.001),E.height||0]);g.push([v.row,Od.arr.flatten(A)])}}a.cachedLineBounds=g}},{key:"spec",value:function(){var a=hc._get(Object.getPrototypeOf(m.prototype),"spec",this).call(this);a.textString=this.textString;return Od.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||hc._get(Object.getPrototypeOf(m.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var g=this,l=a.prop,r=a.selector,v=a.meta,y=this.lineWrapping,A=!1,E=!1,F=!1,G=!1,I=!1,M=!1;if(r)A="replace"===r,G="addTextAttribute"===r,this._displacementChange=!this._displacing&&A;else switch(l){case "scroll":I=E=!0;break;case "extent":E=!0;l=a.prevValue.subPt(a.value);M=(F=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":y&&(G=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":G=a.prevValue!=a.value;break;case "lineWrapping":G=!0;break;case "borderWidth":case "fixedHeight":F=a.prevValue!=a.value;break;case "padding":F=!0}hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);l=function(){g._textChange=
!0;I&&(g.viewState.wasScrolled=!0);(G||M||F&&!v.styleSheetChange)&&g.invalidateTextLayout(G,G);(F||G)&&g.document&&g.world()&&g.document.lines.forEach(function(L){return L.hasEstimatedExtent=!0});g._displacementChange&&(g._displacementChange=!1);A&&Od.signal(g,"textChange",a);E&&Od.signal(g,"viewChange",a);g._textChange=!1};v.animation?Od.promise.delay(v.animation.duration).then(l):l()}},{key:"onSubmorphChange",value:function(a,g){var l=this,r,v,y,A,E,F,G,I,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress){if(a.meta&&a.meta.styleSheetChange)return L.return();hc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",l).call(l,a,g);return a.meta.animation?L.yield(a.meta.animation.asPromise(),2):L.jumpTo(2)}if(l._textChange||l._positioningSubmorph===g)return L.return();r=a;v=r.prop;y="position"==v||"extent"==v||"scale"==v||"rotation"==v;l.displacingMorphMap.get(g)&&y&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(S){return S.top>=g.top}).forEach(function(S){l._intersectionShapeCache&&
l._intersectionShapeCache.delete(S);l.updateTextDisplacementFor(S)});A=l.embeddedMorphMap.get(g)||{};if((E=A.anchor)&&y){if("position"==v)return l._positioningSubmorph=g,g.position=a.prevValue,l._positioningSubmorph=null,L.return();F=g.bounds();G=g._lastBounds;I=E.position.row;M=l.document.getLine(I);G&&G.height==F.height&&G.bottom()==F.bottom()||(M.hasEstimatedExtent=!0,g._lastBounds=F)}L.jumpToEnd()})}},{key:"removeMorph",value:function(a,g){g=void 0===g?!0:g;var l=this.embeddedMorphMap,r=this.displacingMorphMap;
r&&r.has(a)&&this.toggleTextWrappingAround(a,!1);if(l&&l.has(a)){if(r=l.get(a).anchor){var v=r.position;r=v.row;v=v.column;this.replace({start:{row:r,column:v},end:{row:r,column:v+1}},[],!0,g);this.replace}l.delete(a)}return hc._get(Object.getPrototypeOf(m.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,g){var l=this;if(g)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));
else if(g=this.displacingMorphMap.get(a))this._displacing=!0,g.forEach(function(r){return l.removeMorph(r)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var g=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(a),r=this.computeDisplacementRectsFor(a).values(),v=[];l.forEach(function(G){return g.removeMorph(G,!1)});this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);r=$jscomp.makeIterator(r);
for(var y=r.next();!y.done;y=r.next()){y=y.value;var A=l.shift()||Od.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),E=this.textLayout.textPositionFromPoint(this,y.leftCenter());A.setBounds(y);this.insertText([A,{}],E);this.viewState._needsFit=!1;if(F==A.top)A.remove();else{var F=A.top;v.push(A)}}l.forEach(function(G){return g.removeMorph(G,!1)});this.displacingMorphMap.set(a,v);this._displacing=!1}}},{key:"computeDisplacementRectsFor",value:function(a){var g=this.textLayout,l=g.textPositionFromPoint(this,
a.topLeft),r=g.textPositionFromPoint(this,a.bottomLeft),v=[];a._displacementRange=Od.Range.fromPositions(l,r);for(l=l.row;l<r.row+1;l++)v.push.apply(v,$jscomp.arrayFromIterable(g.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(r=this._intersectionShapeCache.get(a))||(r=a.isPath?Shapes.path(Od.getSvgVertices(a.vertices)):"Ellipse"==Od.getClassName(a)?Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Shapes.rectangle(a.left,a.top,a.width,
a.height));this._intersectionShapeCache.set(a,r);a=this.width;l=new Map;v=$jscomp.makeIterator(v);for(var y=v.next();!y.done;y=v.next()){y=y.value;var A=g.computeMaxBoundsForLineSelection(this,y),E=A.height;A=A.y;var F=Shapes.rectangle(a,E,0,A);F=Intersection.intersect(F,r);1>F.points.length||(F=Od.Rectangle.unionPts(F.points.map(Od.Point.fromLiteral)),F.y=A,F.height=E,F.x-=15,F.width+=30,l.set(y,F))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===
typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var g=a,l=g.column,r=g.row;a=new Od.Anchor(g.id,"number"===typeof r&&"number"===typeof l?{row:r,column:l}:void 0,g.insertBehavior||"move")}if(g=a.id&&this.anchors.find(function(v){return v.id===a.id}))return Object.assign(g,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var g=this.anchors,l,r=g.length;r--;){var v=g[r];if(v.id==a||v===a)l=v,g.splice(r,1)}return l}},{key:"addMarker",value:function(a){this.removeMarker(a.id);
this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var g="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(l){return l.id!==g});this.makeDirty()}},{key:"saveMark",value:function(a,g){a=void 0===a?this.cursorPosition:a;var l=this.activeMark;l&&l!==a&&!l.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(l));g?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;
a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Od.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||Od.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var g=this.selection,l=this.savedMarks,r=this.multiSelect?this.multiSelect.getAllRanges().length:1;r=l.length-(r-(g.index||0));g=l[r]||g.anchor;
a&&"row"in a&&"column"in a&&(this.savedMarks=l.slice(0,r).concat(a).concat(l.slice(r+1)));return g}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=null;Od.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,g){g=
void 0===g?[]:g;this.plugins.forEach(function(l){return"function"===typeof l[a]&&(g=l[a](g))});return g}},{key:"pluginInvokeFirst",value:function(a,g){for(var l=[],r=1;r<arguments.length;++r)l[r-1]=arguments[r];return(r=this.pluginFind(function(v){return"function"===typeof v[a]}))?r[a].apply(r,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},
{key:"lookupEditorPluginNamed",value:function(a){var g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=Od.config.ide.modes.aliases[a]||a,l=(g=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",y.yield(lively.modules.doesModuleExist(l),2);if(3!=y.nextAddress)return y.yieldResult?y.yield(lively.modules.module(l).load(),3):y.return(null);r=y.yieldResult;v=r.default;return y.return(v)})}},{key:"changeEditorMode",value:function(a){var g=this,
l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return l=g.plugins.filter(function(y){return!y.isEditorPlugin}),a?"string"!==typeof a?v.jumpTo(2):v.yield(g.lookupEditorPluginNamed(a),3):(g.plugins=l,v.return(null));if(2!=v.nextAddress){r=v.yieldResult;if(!r)throw Error("Cannot find editor mode "+a);a=new r(Od.config.codeEditor.defaultTheme);g.evalEnvironment&&(a.evalEnvironment=g.evalEnvironment)}g.plugins=l.concat(a);return v.return(a)})}},{key:"invalidateTextLayout",
value:function(a,g){g=void 0===g?!1:g;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===a?0:a)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,g))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(hc._get(Object.getPrototypeOf(m.prototype),
"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Od.commands))}},{key:"execCommand",value:function(a,g,l,r){function v(R){(A.hasOwnProperty("scrollCursorIntoView")?A.scrollCursorIntoView:1)&&Od.fun.debounceNamed("execCommand-scrollCursorIntoView-"+R.id,100,function(){return R.scrollCursorIntoView()})()}var y=this,A=(this.lookupCommand(a)||{}).command;if(A){var E=this.inMultiSelectMode(),F=A.hasOwnProperty("multiSelectAction")?
A.multiSelectAction:"forEach";if(E&&"forEach"===F){var G=this.selection;E=this.selection.selections.slice().reverse();this.selection=E[0];this._multiSelection=G;try{var I=this.execCommand(a,g,l,r)}catch(R){throw this.selection=G,this._multiSelection=null,this.selection.mergeSelections(),R;}if(!I)return I;var M=[I];if("function"===typeof I.then&&"function"===typeof I.catch)return Od.promise.finally(Od.promise.chain([function(){return I}].concat(E.slice(1).map(function(R){return function(){y.selection=
R;return Promise.resolve(y.execCommand(a,g,l,r)).then(function(aa){return M.push(aa)})}}))).then(function(){return M}),function(){y.selection=G;y._multiSelection=null;y.selection.mergeSelections()});try{for(var L=$jscomp.makeIterator(E.slice(1)),S=L.next();!S.done;S=L.next())this.selection=S.value,M.push(this.execCommand(a,g,l,r))}finally{this.selection=G,this._multiSelection=null,this.selection.mergeSelections()}return M}(I=this.commandHandler.exec(a,this,g,l,r))&&("function"===typeof I.then&&"function"===
typeof I.catch?I.then(function(){return v(y)}):v(this));return I}}},{key:"changeDocument",value:function(a,g){g=void 0===g?!1:g;if(this.document)var l=this.defaultTextStyle;else g=!1;this.document=a;this.textLayout.reset();g&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g,g+1)}},{key:"charLeft",
value:function(a){a=void 0===a?this.cursorPosition:a;var g=a.column;return this.getLine(a.row).slice(g-1,g)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,
a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var g=this.getLine(a.row);return a.column===
g.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?!0:g;"number"!==typeof a&&this.cursorPosition.row;var l=this.getLine(a);a={start:{column:0,row:a},end:{column:l.length,row:a}};l=l.match(/^\s*/);l[0].length&&g&&(a.start.column+=l[0].length);return new Od.Range(a)}},{key:"screenLineRange",value:function(a,g){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===g?!0:g)}},{key:"insertTextAndSelect",value:function(a,g){g=void 0===g?null:g;a=String(a);g?this.selection.range=this.insertText(a,g):this.selection.text=
a}},{key:"append",value:function(a){var g=this;return this.saveExcursion(function(){return g.insertText(a,g.documentEndPosition)})}},{key:"insertText",value:function(a,g,l,r){g=void 0===g?this.cursorPosition:g;return this.replace({start:g,end:g},a,void 0===l?!0:l,void 0===r?!0:r)}},{key:"deleteText",value:function(a,g){g=void 0===g?!0:g;var l=this.textAndAttributesInRange(a);this.replace(a,[],!1,g);return l}},{key:"replace",value:function(a,g,l,r,v,y){var A=this;l=void 0===l?!0:l;r=void 0===r?!0:
r;v=void 0===v?!0:v;y=void 0===y?!0:y;a=a.isRange?a:new Od.Range(a);var E="string"===typeof g?[g,null]:Array.isArray(g)?g:[String(g||""),null];g=!E.length||2==E.length&&!E[0];var F=a.isEmpty();if(g&&F)return a;var G;l&&(G=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var I=[];for(l=0;l<E.length;l+=2)g=E[l],F=E[l+1],g.isMorph&&I.push(g),G&&(E[l+1]=Object.assign({},G,{},F));v&&this.undoManager.undoStart(this,"replace");var M=this.textAndAttributesInRange(a),L=
this.document.replace(a,E,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,E],undo:{target:this,selector:"replace",args:[L,M,!1]}},function(){r&&(A.invalidateTextLayout(!1,!1),A.textLayout.resetLineCharBoundsCacheOfRange(A,L));if(!Od.eqPosition(a.end,L.end)){if(Od.lessPosition(L.end,a.end)){var S=$jscomp.makeIterator((new Od.Range(a)).subtract(L)).next().value;A.anchors.forEach(function(aa){return aa.onDelete(S)})}else{var R=
$jscomp.makeIterator((new Od.Range(L)).subtract(a)).next().value;A.anchors.forEach(function(aa){return aa.onInsert(R)})}A._multiSelection?A._multiSelection.updateFromAnchors():A.selection.updateFromAnchors()}A._updateEmbeddedMorphsDuringReplace(I,L,E,M);A._isDeserializing&&A._initializedByCachedBounds||A.textLayout.estimateLineHeights(A,!1);y&&A.consistencyCheck()});v&&this.undoManager.undoStop();return L}},{key:"_updateEmbeddedMorphsDuringReplace",value:function(a,g,l,r){for(var v=this.embeddedMorphMap,
y=0;y<r.length;y+=2){var A=r[y];if(A.isMorph&&!a.includes(A)){if(v){var E=v.get(A);E&&E.anchor&&(this.removeAnchor(E.anchor),Od.disconnect(E.anchor,"position",A,"position"));v.set(A,Object.assign({},E,{anchor:null}))}A.remove()}}if(a.length)for(l=Od.textAndAttributesWithSubRanges(g.start,l),g=l.ranges,l=l.textAndAttributes,r=0;r<g.length;r++)y=l[2*r],y.isMorph&&(console.assert(a.includes(y),"????"),A=g[r].start,y.owner!==this&&this.addMorph(y),v&&(v.has(y)?v.get(y).anchor.position=A:(A=this.addAnchor(Object.assign({id:"embedded-"+
y.id},A)),Od.connect(A,"position",y,"position",{updater:function(F,G){var I=this.targetObj.owner,M=this.targetObj;G=I&&I.isText?I.charBoundsFromTextPosition(G).topLeft().subPt(I.origin):M.position;I&&(I._positioningSubmorph=M);F(G);I&&(I._positioningSubmorph=!1)}}).update(A.position),v.set(y,{anchor:A}))))}},{key:"applyJsDiffPatch",value:function(a){function g(F,G,I,M){var L=r.indexToPosition(F+I),S=r.indexToPosition(G+I);M.push(r.deleteText({start:L,end:S}));return I-(G-F)}function l(F,G,I,M){M.push(r.insertText(G,
r.indexToPosition(F+I)));return I}var r=this,v=[],y=0,A=0;a=$jscomp.makeIterator(a);for(var E=a.next();!E.done;E=a.next())E=E.value,E.removed?A=g(y,y+E.count,A,v):E.added&&(A=l(y,E.value,A,v)),y+=E.count;return v}},{key:"applyTextChanges",value:function(a,g,l,r){g=void 0===g?0:g;l=void 0===l?!0:l;var v=[];a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next()){var A=$jscomp.makeIterator(y.value);y=A.next().value;var E=A.next().value;A=A.next().value;g&&(E="number"===typeof E?E:this.positionToIndex(E),
A&&"string"!==typeof A&&!Array.isArray(A)&&(A=("number"===typeof A?A:this.positionToIndex(A))+g),E+=g);E="number"===typeof E?this.indexToPosition(E):E;switch(y){case "delete":case "remove":y="number"===typeof A?this.indexToPosition(A):A;v.push(this.deleteText({start:E,end:y},r));break;case "insert":v.push(this.insertText(A,E,l,r));break;default:console.warn("[applyTextChanges] unknown type: "+y)}}return v}},{key:"modifyLines",value:function(a,g,l){var r=this;l=Od.arr.range(a,g).map(function(v){return r.getLine(v)}).map(l).join("\n")+
"\n";this.deleteText({start:{row:a,column:0},end:{row:g+1,column:0}},!1);this.insertText(l,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var g=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(g.start.row,g.end.row,a)}},{key:"withLinesDo",value:function(a,g,l){var r=this;return Od.arr.range(a,g).map(function(v){var y=r.getLine(v);v=Od.Range.create(v,0,v,y.length);return l(y,v)})}},{key:"withSelectedLinesDo",value:function(a){var g=this.selection.isEmpty()?
this.lineRange(void 0,!1):this.selection.range,l=g.start.row;g=g.end;var r=g.row;return this.withLinesDo(l,0===g.column&&r>l?r-1:r,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var g=this.getLine(a),l=this.getLine(a+1);l=g+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,row:a},end:{column:0,row:a+2}},l,!0);return{row:a,column:g.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",
value:function(a,g){var l=this;a=void 0===a?this.selection.range:a;g=Object.assign({time:1E3,fill:Od.Color.orange},g);var r=g.id||"flash"+Od.string.newUUID();this.addMarker({id:r,range:a,style:{"background-color":g.fill.toCSSString(),"pointer-events":"none"}});Od.fun.debounceNamed("flash-"+r,g.time,function(){return l.removeMarker(r)})()}},{key:"addTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"addTextAttribute");
this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,r],undo:{target:this,selector:"removeTextAttribute",args:[a,r]}},function(){l.document.mixinTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,g){var l=this;g=void 0===g?this.selection:g;var r={start:g.start,end:g.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",
args:[a,r],undo:{target:this,selector:"addTextAttribute",args:[a,r]}},function(){l.document.mixoutTextAttribute(a,r);l.onAttributesChanged(r);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();for(var g=0;g<a.length;)this.onAttributesChanged(a[g]),g+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",
value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var g=this.textLayout;g&&g.resetLineCharBoundsCacheOfRange(this,
a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(g,l){return 0!=l%2}).reduce(function(g,l){for(var r in l){var v=l[r];if(!g.hasOwnProperty(r)||void 0!==v&&null!==v)g[r]=v}return g},{})}},{key:"setStyleInRange",value:function(a,g){var l=this;g=void 0===g?this.selection:g;for(var r=
this.textAndAttributesInRange(g),v={start:Object.assign({},g.start),end:Object.assign({},g.start)},y=[],A=0;A<r.length;A+=2){var E=r[A],F=r[A+1],G=-1;"string"!==typeof E&&(E=Od.objectReplacementChar);for(;-1<(G=E.indexOf("\n"));)0<G&&(v.end.column+=G,y.push(v,F)),v={row:v.end.row+1,column:0},v={start:v,end:Object.assign({},v)},E=E.slice(G+1);v.end.column+=E.length;y.push(v,F);v={start:Object.assign({},v.end),end:Object.assign({},v.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,
selector:"setStyleInRange",args:[a,g],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[y]}},function(){l.document.setTextAttribute(a,g);l.consistencyCheck();l.onAttributesChanged(g)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;for(var g=this.document.textAndAttributesInRange(a),l={},r=0;r<g.length;r+=2)Object.assign(l,g[r+1]);this.removeTextAttribute(l,a)}},{key:"changeStyleProperty",value:function(a,g,l){var r=this;l=
void 0===l?this.selection:l;l=this.getStyleInRange(l)[a];var v=g(l);this.selections.forEach(function(y){var A={};return r.addTextAttribute((A[a]=v,A),y)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=this;return this.selections.map(function(g){var l=a.charBoundsFromTextPosition(g.start),r=a.charBoundsFromTextPosition(g.end);return g.start.row===g.end.row?l.union(r):Od.rect(Od.pt(a.padding.left(),
l.top()),Od.pt(a.width-a.padding.left(),r.bottom()))}).reduce(function(g,l){return l.union(g)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Od.eqPosition(this.cursorPosition,this.documentEndPosition)}},{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",
value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,g,l,r,v){function y(G,I){G=G.slice();G.push({x:Od.arr.last(G).x+Od.arr.last(G).width});for(var M=0,L=Infinity,S=0;S<G.length;S++){var R=Math.abs(G[S].x-I);R<L&&(L=R,M=S)}return M}a=void 0===a?1:a;g=void 0===g?this.cursorPosition:
g;l=void 0===l?!1:l;if(0===a)return g;"number"===typeof v&&(v-=this.padding.left());var A=g.row,E=g.column;if(l&&this.lineWrapping){A=this.textLayout.rangesOfWrappedLine(this,g.row);if(!A.length)return g;E=A.length-1-A.slice().reverse().findIndex(function(G){return G.start.column<=g.column});if(1<=a){var F=0===E?0>=g.row?null:Od.arr.last(this.textLayout.rangesOfWrappedLine(this,g.row-1)):A[E-1];if(!F)return g}else if(-1>=a&&(F=(A.length-1===E?g.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,
g.row+1):A.slice(E+1))[0],!F))return g;A=F.start.row;E=this.textLayout.charBoundsOfRow(this,A).slice(F.start.column,F.end.column+1);E=F.start.column+y(E,v)}else A=Math.min(Math.max(0,g.row-a),this.lineCount()-1),"number"===typeof v&&(F=this.textLayout.charBoundsOfRow(this,A),E=y(F,v));F={row:A,column:E};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),F,l,r,v):F}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",
value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===g?!1:g);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,g=a.text;a=a.start;return g?g:this.getLine(a.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,g,l){a=void 0===a?this.selection.range:
a;g=void 0===g?Od.pt(0,0):g;l=void 0===l?!0:l;var r=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-r;this.scroll=a<this.height||!1===l?this.scroll.withY(r+a/2-this.height/2).addPt(g):this.scroll.withY(r).addPt(g)}},{key:"centerRow",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Od.pt(0,0):g;return this.alignRowAtTop(a,g.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,g){a=void 0===a?this.cursorPosition.row:
a;g=void 0===g?Od.pt(0,0):g;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(g)}},{key:"alignRowAtBottom",value:function(a,g){a=void 0===a?this.cursorPosition.row:a;g=void 0===g?Od.pt(0,0):g;var l=this.charBoundsFromTextPosition({row:a,column:0}).height;this.alignRowAtTop(a,g.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(a,g){g=void 0===g?Od.pt(0,0):g;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);
a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(Od.pt(-20,0)));var r=20<l.bottom()-a.bottom()?"bottomLeft":"topLeft";l=a[r]().subPt(l.translateForInclusion(a)[r]()).addPt(g);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(g),this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,g){var l=this;g=void 0===g?this.cursorPosition:g;var r=this.scroll;g=this.selection.lead;var v=this.charBoundsFromTextPosition(g).y-
r.y;r=!1;var y=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(g).y-v)};try{var A=a();r=A&&A instanceof Promise}finally{!r&&y()}r&&Od.promise.finally(A,y);return A}},{key:"saveExcursion",value:function(a,g){var l=this;g=Object.assign({useAnchors:!1},g);var r=this.selection.isMultiSelection?this.selection.selections.map(function(E){return E.directedRange}):[this.selection],v=g.useAnchors?r.map(function(E){var F=E.end;return[l.addAnchor(Object.assign({},E.start,{id:"save-excursion-"+
Od.string.newUUID()})),l.addAnchor(Object.assign({},F,{id:"save-excursion-"+Od.string.newUUID()}))]}):null,y=!1;g=g.useAnchors?function(){var E=v.map(function(F){var G=$jscomp.makeIterator(F);F=G.next().value.position;G=G.next().value.position;return{start:F,end:G}});l.selections=E;v.forEach(function(F){var G=$jscomp.makeIterator(F);F=G.next().value;G=G.next().value;l.removeAnchor(F);l.removeAnchor(G)})}:function(){return l.selections=r};try{var A=this.keepPosAtSameScrollOffsetWhile(a);y=A&&A instanceof
Promise}finally{!y&&g()}y&&Od.promise.finally(A,g);return A}},{key:"alignRow",value:function(a,g){g=void 0===g?"center":g;if(this.isClip()){var l=this.scroll,r=this.padding;l=this.innerBounds().insetByRect(r).translatedBy(l);a=this.charBoundsFromTextPosition({row:a,column:0});if(g="top"===g||"bottom"===g?l[g]()-a[g]():"center"===g?l[g]().y-a[g]().y:0)this.scroll=this.scroll.addXY(0,-g)}}},{key:"fit",value:function(){var a=this,g=this.viewState,l=this.fixedWidth,r=this.fixedHeight;g._needsFit=!1;if(r&&
l||!this.textLayout)return this;var v=this.textBounds().outsetByRect(this.padding),y=function(){r||a.height==v.height||(a.height=v.height);l||a.width==v.width||(a.width=v.width);a.embeddedMorphs.forEach(function(A){A=a.embeddedMorphMap.get(A).anchor;A.position=A.position})};g._needsFit=!1;this.document.lines.find(function(A){return A.hasEstimatedExtent})?this.whenRendered().then(y):y();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",
get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var g=this.screenLineRange(a,!0).start.column;return a.column-g}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",
value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();hc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return this.textRenderer.renderMorph(this,
a)}},{key:"directRender",value:function(){var a=this.env.renderer,g=this.textRenderer;a&&g&&!a._stopped&&(Od.renderSubTree(this,a),g.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&(this.activeMark=null);var g=a.state;if(g.clickedOnMorph===this){g=(g.clickCount-1)%3+1;var l=this.localize(a.position),r=this.textPositionFromPoint(l);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,
l);this.selectable&&(a.isShiftDown()?this.selection.lead=r:a.isAltDown()?this.selection.addRange(Od.Range.at(r)):(this.selection.disableMultiSelect(),1===g?a.isShiftDown()?this.selection.lead=r:this.selection={start:r,end:r}:2===g?this.execCommand("select word",null,1,a):3===g&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var g="lively://text-doit/"+this.id;lively.modules.module(g);return{context:a.context||
this,format:"esm",targetModule:g}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,g){var l=this;g=(g=this.textAttributeAtPoint(g)||[],g.doit);if(!g||!g.code)return!1;var r=this.evalEnvForDoit(g),v=lively.modules.module(r.targetModule);v.recorder.evt=a;lively.vm.runEval(g.code,r).catch(function(y){return l.world().logError(Error("Error in text doit: "+y.stack))}).then(function(){return v.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&
a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,g){function l(F){return"\t"===F||" "===F}function r(F,G,I,M,L){for(var S=1;(0>L?0<=M-1:M+1<F.length)&&(M+=L,F[M]==G&&G!=I&&S++,F[M]==I&&S--,0!=S););return M}function v(F,G,I,M){for(var L=G;0>I?0<=L-1:L+1<F.length;)if(L+=I,F[L]==M)return 0<I?[G,L]:[L+1,G];return 0<I?[G+1,F.length-1]:[0,G]}if(!a)return g;if(0==g||g==a.length)return[0,a.length-1];
var y=g-1;if(0<g){if("\n"==a[g-1]||"\r"==a[g-1])return v(a,g,1,a[g-1]);var A="*({[<'\"`".indexOf(a[g-1]);"*"==a[g-1]&&(0>g-2||"/"!=a[g-2])&&(A=-1);if(0<=A)return y=r(a,"*({[<'\"`"[A],"*)}]>'\"`"[A],g-1,1),[g,y-1]}if(g<a.length){if("\n"==a[g]||"\r"==a[g])return v(a,g,-1,a[g]);A="*)}]>'\"`".indexOf(a[g]);"*"==a[g]&&(g+1>=a.length||"/"!=a[g+1])&&(A=-1);if(0<=A)return g=r(a,"*)}]>'\"`"[A],"*({[<'\"`"[A],g,-1),[g+1,y]}if("/"===a[g-1]&&"/"===a[g-2]){for(;y+1<a.length&&"\n"!==a[y+1]&&"\r"!==a[y+1];)y++;
return[g,y]}A=g;for(var E=y;0<=A-1&&l(a[A-1]);)A--;for(;E<a.length&&l(a[E+1]);)E++;if(1<=E-A)return[A,E];for(A=g<a.length?a[g]:"";0<=g-1&&((a[g-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[g-1]?0:0<="0123456789".indexOf(A)));)A=a[g-1],g--;for(;y+1<a.length&&((a[y+1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[y+1]?0:0<="0123456789".indexOf(A)));)A=a[y+1],y++;return[g,y]}},{key:"onContextMenu",value:function(a){var g=this;if(a.targetMorph===this){a.stop();var l=this.textPositionFromPoint(this.localize(a.position)),
r=this.selection.selections||[this.selection];if(this.selection.isEmpty()||r.every(function(v){return!v.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(v){return g.openMenu(v,a)}).catch(function(v){return $world.logError(v)})}}},{key:"onDrop",value:function(a){var g=a.hand.grabbedMorphs.filter(function(r){return r.isLayoutable});hc._get(Object.getPrototypeOf(m.prototype),"onDrop",this).call(this,a);if(g[0]){var l=this.textPositionFromPoint(this.localize(a.hand.globalPosition));
this.insertText([g[0],null],l);g[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var g=this;if(a.simpleDrop)return null;var l=this.whatsVisible,r=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var v=this.document,y=this.padding.left(),A=this.padding.top();r=Od.arr.range(r,l).reduce(function(E,F){var G=g.textLayout.charBoundsOfRow(g,F).slice();1<=G.length&&0==Od.arr.last(G).width&&(Od.arr.last(G).width=12);if(1<G.length){var I=Od.arr.last(G);G.push({x:I.x+
I.width,y:I.y,height:I.height,width:I.width||12})}G=G.map(function(M,L){M=Od.Rectangle.fromLiteral(M).translatedBy(Od.pt(y,A+v.computeVerticalOffsetOf(F)));var S=g.getGlobalTransform().transformRectToRect(M);return{textPos:{row:F,column:L},bounds:M,globalBounds:S,morph:a.showDropGrid?Od.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:M,border:{width:1,color:Od.Color.green},fill:null}):null}});return E.concat(G)},[]);r.forEach(function(E){return E.morph&&g.addMorph(E.morph)});return r}},{key:"onDropHoverIn",
value:function(a){var g={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?window.useTextFlowPlaceholder:!1},l=a.hand.grabbedMorphs[0];l&&(a.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(g);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var r=a.get(this);r||(r={},a.set(this,r));r.config=g;r.dropGrid=l}},{key:"onDropHoverUpdate",
value:function(a){var g=a.hand.grabbedMorphs[0];if(g){var l=a.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var r=l.config;a=a.positionIn(this);for(var v,y,A=Infinity,E=$jscomp.makeIterator(l.dropGrid),F=E.next();!F.done;F=E.next()){F=F.value;if(F.bounds.containsPoint(a)){v=F;break}var G=F.bounds.closestPointToPt(a).dist(a);G<A&&(A=G,y=F)}v||(v=y);v&&(y=l.placeholder,y||(l.placeholder=y=Od.morph({fill:g.fill,extent:g.extent,reactsToPointer:!1,acceptsDrops:!1})),Od.obj.equals(y._textPos||{},
v.textPos)||(this!==y.owner&&this.addMorph(y),y.position=v.bounds.topLeft(),r&&r.useTextFlowPlaceholder&&(y.remove(),y._textPos=v.textPos,this.insertText([y,null],v.textPos))))}else g=this.textPositionFromPoint(a.positionIn(this)),this.focus(),this.cursorPosition=g}}},{key:"onDropHoverOut",value:function(a){var g=a.hand.grabbedMorphs[0];g&&(g.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(g=a.get(this))a.delete(this),g.dropGrid&&(g.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),
g.dropGrid=null),g.placeholder&&(g.placeholder.remove(),g.placeholder=null)}},{key:"menuItems",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return g=$jscomp,l=g.makeIterator,A.yield(Promise.all([hc._get(Object.getPrototypeOf(m.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);r=l.call(g,A.yieldResult);v=r.next().value;y=r.next().value;return A.return(v.concat({isDivider:!0}).concat(y))})}},{key:"menuItemsForContextMenu",
value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:g=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},
{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},["run command",function(){a.focus();a.world().execCommand("run command")}]],l=$jscomp.makeIterator(a.plugins),r=l.next();case 2:if(r.done){y.jumpTo(4);break}v=r.value;if("function"!==typeof v.getMenuItems){y.jumpTo(3);break}return y.yield(v.getMenuItems(g),6);case 6:g=y.yieldResult;case 3:r=
l.next();y.jumpTo(2);break;case 4:return y.return(g)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];a=hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat(a).concat(Od.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){hc._set(Object.getPrototypeOf(m.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;
var a=hc._get(Object.getPrototypeOf(m.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){Od.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||
(this.selection.cursorBlinkStart(),Od.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Od.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Od.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,g){g=void 0===g?!1:g;if(this.isFocused()){a.stop();var l=this.selection;try{for(var r=this.textAndAttributesInRange(this.selection.range),v=this.defaultTextStyle,y={},A=0;A<r.length;A+=2){var E=r[A];if(E.isMorph)if(E.isDisplacementMorph)r[A]=
"";else{var F=y[A]=Od.serializeMorph(r[A]);r[A]=Od.deserializeMorph(F,{reinitializeIds:!0})}}var G=Od.extractHTMLFromTextMorph(this,r);a.domEvt.clipboardData.setData("text/html",G);for(var I in y)r[I]=y[I];var M=JSON.stringify({textAndAttributes:r,defaultTextStyle:v});a.domEvt.clipboardData.setData("application/x-lively-text",M)}catch(L){$world.logError(L)}a.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:Od.config.codeEditor.collapseSelection||
!1,delete:g,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var g=this;if(!this.rejectsInput()){a.stop();var l="";try{l=a.domEvt.clipboardData.getData("text")}catch(A){console.warn(A)}if(!this.editorPlugin)try{var r=a.domEvt.clipboardData.getData("application/x-lively-text");var v=r&&JSON.parse(r);var y=v.textAndAttributes;for(a=0;a<y.length;a+=2)"string"!==typeof y[a]&&(y[a]=Od.deserializeMorph(y[a],{reinitializeIds:!0}))}catch(A){console.warn(A)}y=this.selection;y=y.isMultiSelection?
y.selections:[y];v&&this.undoManager.group();y.forEach(function(A){v?g.replace(A.range,v.textAndAttributes,!1,!0,!0):A.text=l;g.saveMark(A.start);A.collapseToEnd()});v&&this.undoManager.group()}}},{key:"onFocus",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();this._originalShadow||((a=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue)&&!a.equals&&(a=new Od.ShadowObject(a)),
a&&!a.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow),this.highlightWhenFocused&&this.animate({dropShadow:a,duration:200}))}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;hc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();
(a=this.env.renderer.getNodeForMorph(this))&&Od.signal(this,"viewChanged",{prop:"scroll",value:Od.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,g=this.borderWidthBottom,l=this.borderWidthTop;return this.height-a.top()-a.bottom()-g-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},
{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var g=a=void 0===a?{direction:"up",select:!1}:a;a=g.direction;g=g.select;var l=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),r=this.cursorPosition.column,v=this.padding;g?this.selection.lead={row:l,column:r}:this.cursorPosition={row:l,column:r};"down"===a?this.alignRowAtTop(l,Od.pt(0,-v.top()-v.bottom())):(this.alignRowAtBottom(l,Od.pt(0,0)),this.alignRowAtBottom(l,
Od.pt(0,v.top()+v.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var g=a-1;0<=g;g--)if(!this.isLineEmpty(g)){var l=g;break}if(void 0===
l)return{start:{row:a,column:0},end:{row:a,column:0}}}else l=a;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(a){var g=this.isLineEmpty(a),l=this.documentEndPosition;if(g){for(g=a+1;g<=l.row;g++)if(!this.isLineEmpty(g)){var r=g;break}if(void 0===r)return{start:{row:a,column:0},end:{row:a,column:0}}}else r=a;return this.paragraphRange(r)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,column:0},end:{row:a,column:0}};var g=this.documentEndPosition;
for(a+=1;a<=g.row;a++)if(this.isLineEmpty(a)){var l={row:a-1,column:this.getLine(a-1).length};break}l||(l=g);for(a=l.row-1;0<=a;a--)if(this.isLineEmpty(a)){var r={row:a+1,column:0};break}r||(r={row:0,column:0});return{start:r,end:l}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",value:function(a){function g(A,E){for(var F=
"",G=0;G<A.length;G+=2)F+="string"===typeof A[G]?A[G]:Od.objectReplacementChar;A=r.parseIntoLines(F);return 1===A.length?Od.Range.fromPositions(E,{row:E.row,column:E.column+A[0].length}):1<A.length?Od.Range.fromPositions(E,{row:E.row+A.length-1,column:Od.arr.last(A).length}):Od.Range.at(E)}var l=Od.Range.at(this.cursorPosition);if(!a.length)return l;var r=this,v=a[0];l="replace"===v.selector?g(v.args[1],v.args[0].start):l;for(v=1;v<a.length;v++){var y=a[v];l="replace"===y.selector?l.merge(g(y.args[1],
y.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Od.UndoManager(function(g){return a.includes(g.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(g){return g.undo}),this.selection=this.computeTextRangeForChanges(a))}},{key:"textRedo",value:function(){var a=
this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,g,l){g=void 0===g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="right"===g?-1:0;return this.document.scanForward(a,function(A,E){if(A===v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"findMatchingBackward",value:function(a,g,l){g=void 0===
g?"right":g;l=void 0===l?{}:l;var r=this["right"===g?"charRight":"charLeft"](a),v=l[r];if(!v)return null;var y="left"===g?-1:0;return this.document.scanBackward(a,function(A,E){if(A===v){if(0===y)return"right"===g?{row:E.row,column:E.column+1}:E;y--}else A===r&&y++;return null})}},{key:"search",value:function(a,g){g=void 0===g?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:g;return(new Od.TextSearcher(this)).search(Object.assign({needle:a},g))}},{key:"searchForAll",value:function(a,g){g=
void 0===g?{caseSensitive:!1}:g;return(new Od.TextSearcher(this)).searchForAll(Object.assign({needle:a},g))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var g=this.editorPlugin;g&&(g.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,g){g=void 0===g?{}:g;g=void 0===g.time?Date.now():g.time;if(!(12E4<a.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(r){}l||(l=[]);if(!l.some(function(r){return"string"===typeof r?r===a:r.source===a})){l.push({source:a,time:g});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(r){}}}}},{key:"doEval",
value:function(a,g,l){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;l=void 0===l?this.textInRange(a):l;a=this.pluginFind(function(r){return r.isEditorPlugin&&"function"===typeof r.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);g&&g.logDoit&&this.logDoit(l,g);return a.runEval(l,g)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,g=a.lead,l=g.row;g=g.column;var r=this.selectionOrLineString();if(a.isEmpty()){var v=
r.indexOf("//");-1===v||g<v||0<v&&0<=":\"'".indexOf(r[v-1])?this.selectLine(l):a.range={start:{row:l,column:v+2},end:{row:l,column:r.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(g){for(var l=[],r=0;r<arguments.length;++r)l[r-0]=arguments[r];
console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(g){console.log(g.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:g})},group:function(g){this.groups.push([]);this.logged=Od.arr.last(this.groups);console.group(g)},groupEnd:function(g){console.groupEnd(g)},steps:function(g){for(var l=[];g.length;){var r=Od.arr.takeWhile(g,function(y){return!y.dump});g=g.slice(r.length);var v=(g.shift()||{}).dump;l.push({actions:r,
dump:v})}return l},printToConsole:function(){var g=this;console.clear();this.groups.forEach(function(l){var r=g.steps(l);console.group(r.length);g.steps(l).forEach(function(v,y){v=v.actions;console.group("step "+(y+1));v.forEach(function(A){return console.log.apply(console,$jscomp.arrayFromIterable(A.args))});console.groupEnd("step "+(y+1))});console.groupEnd(r.length)})},report:function(){var g=this,l,r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return G.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=G.nextAddress)return l=G.yieldResult,G.yield(System.import("lively.ide/diff/editor-plugin.js"),3);r=G.yieldResult;v=r.default;y=0;A="";E=[];F=0;g.groups.forEach(function(I,M){A+=">>> group "+(M+1)+"\n";F++;y++;var L=g.steps(I);L.forEach(function(S,R){var aa=S.actions;S=S.dump;A+=Od.string.indent(">>> step "+(R+1)," ",y)+"\n";F++;y++;aa.forEach(function(ra){ra=Od.string.indent(Od.string.formatFromArray(ra.args.slice()).trim()," ",y);F+=ra.split("\n").length;
A+=ra+"\n"});1<=R&&S&&L[R-1].dump&&(aa=new v,S=l.createPatch(String(R),L[R-1].dump,S),aa.tokenize(S),E.push.apply(E,$jscomp.arrayFromIterable(aa.styledRanges(F,y))),A+=S,F+=S.split("\n").length-1);A+=Od.string.indent("<< step "+(R+1)," ",y)+"\n";F++;y--});A+="<<< group "+(M+1)+"\n";F++;y--});return G.return({report:A,reportStyles:E})})},openReport:function(){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(g.report(),2);l=y.yieldResult;
r=l.reportStyles;v=l.report;return y.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:v,rangesAndStyles:r}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(r){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var g=this.world()||$world;try{var l=new Od.Document([]);l.textAndAttributes=a.textAndAttributes;this.changeDocument(l)}catch(v){g?
g.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}g?g.logError(r):console.error(r)}}}],[{key:"className",get:function(){return"Text"}},{key:"makeLabel",value:function(a,g){return new Od.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Od.Color.almostBlack,fontSize:11},g))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,g=this.defaultTextStyleProps,l={},r=0;r<g.length;r++){var v=g[r];l[v]=a[v].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,g=[],l;for(l in a)a[l].isDefaultTextStyleProp&&
g.push(l);return this._defaultTextStyleProps=g}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new Od.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Od.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Od.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Od.config.text.useSoftTabs?Od.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Od.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,g=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&g&&this.owner&&(this._measuringTextBox=!0,Od.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",
type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Od.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Od.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Od.Color.rgb(52,152,219),distance:0,rotation:45})}},
cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Od.config.text.useMultiSelect?Od.MultiSelection:Od.Selection)(this);this.setProperty("selection",a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var g=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(l){return g.selection.addRange(l)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var g=$jscomp.makeIterator(a[0]),
l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Od.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},g=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,r=0;r<g.length;r++){var v=g[r],y=this[v];y!==l[v]&&(a[v]=y)}return a}},nativeCursor:{defaultValue:"",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Od.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Od.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},
cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Od.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Od.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal",
"italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var g=this,l=Od.arr.withoutAll(a,this.anchors);Od.arr.withoutAll(this.anchors,a).forEach(function(r){return g.removeAnchor(r)});l.forEach(function(r){return g.addAnchor(r)})}},markers:{group:"core",
defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var g=this;a=a.map(function(r){return r.isAnchor?r:g.addAnchor(Object.assign({},r,{id:"saved-mark-"+Od.string.newUUID()}))});var l=this.savedMarks.filter(function(r){return!a.includes(r)});a>Od.config.text.markStackSize&&l.push.apply(l,$jscomp.arrayFromIterable(a.splice(0,a.length-Od.config.text.markStackSize)));l.map(function(r){return g.removeAnchor(r)});return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",
after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Od.string.newUUID()}));else{var g=this.activeMark;this.savedMarks.includes(g)||this.removeAnchor(g)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var g=this,l=this.getProperty("plugins");Od.arr.withoutAll(l,a).forEach(function(r){return r&&
g.removePlugin(r)});a.forEach(function(r){return r&&g.addPlugin(r)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1301,end:112456})}(Od.Morph));Od.Text=Ct;Od.Text=Ct;Od.Text=Ct;var Mua=Object.freeze({__proto__:null,Text:Ct}),Bi=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Bi.obj=Ng;Bi.promise=xh;Bi.arr=ng;Bi.string=Li;Bi.properties=Uo;Bi.Rectangle=Re;Bi.Color=Tg;Bi.signal=xf;Bi.vdom=AH;Bi.Morph=Ol;Bi.config=am;Bi.defaultStyle=ky;Bi.defaultAttributes=ly;Bi.Icon=op;Bi.Icons=fN;Bi.splitTextAndAttributesIntoLines=aH;Bi.h=Bi.vdom.h;var Dt=Ba("av",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),
m=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var g=a=void 0===a?{}:a,l=g.fontMetric,r=g.position,v=g.rightCenter,y=g.leftCenter,A=g.topCenter,E=g.bottom,F=g.top,G=g.right,I=g.left,M=g.bottomCenter,L=g.bottomLeft,S=g.bottomRight,R=g.topRight,aa=g.topLeft,ra=g.center;
g=g.extent;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Bi.obj.dissoc(a,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==g&&(this.extent=g);void 0!==r&&(this.position=r);void 0!==v&&(this.rightCenter=v);void 0!==y&&(this.leftCenter=y);void 0!==A&&(this.topCenter=A);void 0!==E&&(this.bottom=E);void 0!==F&&(this.top=F);void 0!==G&&(this.right=G);void 0!==I&&(this.left=I);void 0!==M&&(this.bottomCenter=M);
void 0!==L&&(this.bottomLeft=L);void 0!==S&&(this.bottomRight=S);void 0!==R&&(this.topRight=R);void 0!==aa&&(this.topLeft=aa);void 0!==ra&&(this.center=ra)}},{key:"__additionally_serialize__",value:function(a,g,l,r){hc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);this.fit();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,g){hc._get(Object.getPrototypeOf(m.prototype),"__after_deserialize__",
this).call(this,a,g);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Bi.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Bi.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent();this.visible?this._needsFit=!1:this._cachedTextBounds=
null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Bi.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var a=this,g=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,r){if(r%2)return{fontFamily:l&&l.fontFamily||a.fontFamily,fontWeight:l&&l.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(l){return g.isFontSupported(l.fontFamily,
l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.return(Bi.promise.waitFor(5E3,function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,g=$jscomp.makeIterator(this.textAndAttributes),l=g.next().value;g=g.next().value;var r=Object.assign({},this.textStyle,{},g);g=this.padding;a.isProportional(r.fontFamily)?(a=a.sizeFor(r,l),l=a.width,
a=a.height):(r=a.sizeFor(r,"x"),a=r.height,l=l.length*r.width);return new Bi.Rectangle(0,0,Math.ceil(g.left()+g.right()+l),Math.ceil(g.top()+g.bottom()+a))}},{key:"textBoundsAllChunks",value:function(){for(var a=this._fontMetric||this.env.fontMetric,g=this.padding,l=this.textStyle,r=this.textAndAttributesOfLines,v=!a.isProportional(l.fontFamily),y=a.sizeFor(l,"x").height,A=0,E=0,F=0;F<r.length;F++){var G=r[F];if(G.length){for(var I=0,M=0,L=0;L<G.length;L+=2){var S=G[L],R=G[L+1]||{},aa=Object.assign({},
l,{},R);v&&!R.fontFamily||!a.isProportional(aa.fontFamily)?(R=a.sizeFor(aa,"x"),aa=R.height,M+=S.length*R.width,I=Math.max(I,aa)):(S=a.sizeFor(aa,S),R=S.height,M+=S.width,I=Math.max(I,R))}A+=I;E=Math.max(E,M)}else A+=y}return new Bi.Rectangle(0,0,Math.ceil(g.left()+g.right()+E),Math.ceil(g.top()+g.bottom()+A))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes,
g=this._cachedTextBounds;return g?g:this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():this.textBoundsAllChunks()}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();hc._get(Object.getPrototypeOf(m.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var g=
[],l=this.textAndAttributesOfLines.length,r=0;r<l;r++){for(var v=this.textAndAttributesOfLines[r],y=0;y<v.length;y+=2){var A=v[y+1];g.push(this.renderChunk(v[y],A))}r<l-1&&g.push(Bi.h("br"))}A=this.textStyle;var E=A.fontColor,F=A.fontSize;l=A.fontStyle;r=A.fontWeight;v=A.textShadow;y=A.textDecoration;var G=A.textStyleClasses,I=this.padding;A={fontFamily:A.fontFamily,fontSize:"number"===typeof F?F+"px":F,color:E?String(E):"transparent",position:"absolute",cursor:this.nativeCursor};E=Bi.defaultAttributes(this,
a);v&&(A.textShadow=v);"normal"!==r&&(A.fontWeight=r);"normal"!==l&&(A.fontStyle=l);"none"!==y&&(A.textDecoration=y);G&&G.length&&(E.className=(E.className||"")+" "+G.join(" "));E.style=Object.assign({},Bi.defaultStyle(this),{},A);return Bi.h("div",E,[Bi.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:I.left()+"px",paddingRight:I.right()+"px",paddingTop:I.top()+"px",paddingBottom:I.bottom()+"px",width:"calc(100% - "+I.left()+"px - "+I.right()+"px)"}},g),a.renderSubmorphs(this)])}},
{key:"renderChunk",value:function(a,g){var l=g=g||{},r=l.backgroundColor,v=l.fontColor,y=l.fontFamily,A=l.fontStyle,E=l.fontWeight,F=l.textShadow,G=l.textDecoration,I=l.textStyleClasses,M=l.textAlign,L=l.float,S=l.display,R=l.lineHeight,aa=l.opacity;l={};var ra={style:l};L&&(l.float=L);S&&(l.display=S);r&&(l.backgroundColor=String(r));y&&(l.fontFamily=y);v&&(l.color=String(v));F&&(l.textShadow=F);"normal"!==E&&(l.fontWeight=E);"normal"!==A&&(l.fontStyle=A);"none"!==G&&(l.textDecoration=G);M&&(l.textAlign=
M);R&&(l.lineHeight=R);aa&&(l.opacity=aa);I&&I.length&&(ra.className=I.join(" "));r="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(v=0;v<r.length;v++)y=r[v],g.hasOwnProperty(y)&&(A=g[y],l[y]="number"===typeof A?A+"px":A);return Bi.h("span",ra,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.textString=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=hc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:"className",get:function(){return"Label"}},{key:"properties",get:function(){return{fill:{defaultValue:Bi.Color.transparent},
draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Bi.properties.values(Bi.Icons).map(function(a){return a.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;if(!Object.keys(g||{}).length)return l||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=
a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,g){return 0==g%2?a:""}).join("")},set:function(a){this.textAndAttributes=[a,null]}},textAndAttributes:{get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Bi.signal(this,"value",
a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,g=null;if(2<a.length){var l=$jscomp.makeIterator(a.slice(-2)),r=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),g=[r,l])}return{value:a,annotation:g}},set:function(a){var g=a.value;a=a.annotation;g||(g="");"string"===typeof g&&(g=[g,null]);Array.isArray(g)||(g=[String(g),null]);g=g.slice();if(a){"string"===typeof a&&(a=[a,null]);
var l=a[1];l||(l=a[1]={});g.push.apply(g,$jscomp.arrayFromIterable(a));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=g}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Bi.Rectangle.inset(0),initialize:function(a){this.padding=a},set:function(a){a||(a=Bi.Rectangle.inset(0));var g=
this.padding;this.setProperty("padding","number"===typeof a?Bi.Rectangle.inset(a):a);this.autofit&&!g.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:Bi.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var g=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,set:function(a){var g=this.fontSize;this.setProperty("fontSize",
a);this.autofit&&a!=g&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Bi.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&g!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",set:function(a){var g=this.fontStyle;this.setProperty("fontStyle",
a);this.autofit&&g!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a,g){g=void 0===g?{prefix:"",suffix:""}:g;return Bi.Icon.makeLabel(a,g)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:490,end:17354})}(Bi.Morph));Bi.Label=Dt;Bi.Label=Dt;Bi.Label=Dt;var Nua=Object.freeze({__proto__:null,Label:Dt}),bm=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");bm.arr=ng;bm.obj=Ng;bm.rect=Gl;bm.ShadowObject=ds;bm.morph=ab;var Fv=Ba("aT",function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),m=d.hasOwnProperty("StyleSheet")&&
"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,g){bm.obj.isObject(a)&&!g&&(g=a,a=null);this.rules=g;for(var l in g)g[l]=this.unwrapFoldedProps(g[l]);this.name=a}},{key:"copy",value:function(){var a={},g;for(g in this.rules)a[g]=Object.assign({},this.rules[g]);return new bm.StyleSheet(this.name,
a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(g){if(g in a){var l=a[g];l||(l=0);a[g]=4==bm.arr.intersect(bm.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return a}},{key:"removeRule",
value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,g){this.rules[a]=this.unwrapFoldedProps(g);this.context.requestStyling()}},{key:"toggleRule",value:function(a,g){this.rules[a]._deactivated=!g;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a={},g;for(g in this.rules)a[g]={styleSheet:this,rule:g};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+bm.obj.inspect(this.rules,{customPrinter:function(a,g,
l){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&bm.arr.all([a.top,a.left,a.right,a.bottom],function(r){return r&&bm.obj.equals(r,a.top)})?l(a.top):a&&bm.obj.keys(a).includes("_rev")?l(bm.obj.dissoc(a,["_rev","_deactivated"])):g},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,g,l){var r=this.rules[a];if(r._deactivated)return{};r=bm.obj.dissoc(r,["_deactivated"]);return g.withMetaDo({styleSheetChange:!0},function(){if("layout"in r){var v=r.layout.copy();v.container=
g;r.layout=v}"dropShadow"in r&&(r.dropShadow=new bm.ShadowObject(r.dropShadow),r.dropShadow.morph=g);"padding"in r&&(r.padding=r.padding.isRect?r.padding:bm.rect(r.padding,r.padding));v=bm.obj.keys(r).filter(function(F){return!bm.obj.equals(g[F],r[F])});v=bm.obj.select(r,v);var y=g.propertiesAndPropertySettings().properties,A={},E;for(E in r)A[E]=y[E]&&y[E].defaultValue||g[E];l?g.animate(Object.assign({},v,{duration:l.duration,easing:l.easing})):Object.assign(g,v);return A})}}],[{key:"className",
get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,end:3669})}(void 0));bm.StyleSheet=Fv;bm.StyleSheet=Fv;bm.StyleSheet=Fv;var oh=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");oh.obj=Ng;oh.arr=ng;oh.num=sm;oh.Rectangle=
Re;oh.rect=Gl;oh.Color=Tg;oh.pt=th;oh.connect=yl;oh.noUpdate=vw;oh.signal=xf;oh.disconnect=$o;oh.Text=Ct;oh.Range=vz;oh.HTMLMorph=rz;oh.Icon=op;oh.morph=ab;var bX=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?d.InputLine:d.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);oh.connect(this,"textChange",this,"onInputChanged");oh.connect(this,"selectionChange",this,"fixCursor")}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&this.updatePlaceholder();return hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},
{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=
""}},{key:"focus",value:function(){this.fixCursor();hc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=
3,g.borderColor=oh.Color.red,g._errorIcon=g.addMorph(g._errorIcon||oh.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(oh.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:oh.Color.red,opacity:0,reactsToPointer:!1,fill:oh.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&
(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=oh.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var g=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?g.rightCenter().addXY(0,this.borderWidth):g.leftCenter().withX(0)}}},
{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();
oh.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){oh.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new oh.Range(a);if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],hc._get(Object.getPrototypeOf(m.prototype),
"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var g=this.inputHistory,l=g.items;if(oh.arr.last(l)!==a){l.push(a);l.length>g.max&&(g.items=l=l.slice(-g.max));g.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=g.items.length-1;l--;)g.items[l]===a&&(g.items.splice(l,1),g.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,g)}}},{key:"browseHistory",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return g=a.inputHistory.items.map(function(A,E){return{isListItem:!0,string:A,value:E}}).reverse(),y.yield(a.world().filterableListPrompt("Choose item:",g,{commands:[a.histEditCommandForHistBrowse()]}),2);l=y.yieldResult;r=$jscomp.makeIterator(l.selected);v=r.next().value;"number"===typeof v&&a.setAndShowHistItem(v);a.focus();y.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return l=a.inputHistory.items.slice().reverse(),A.yield(g.world().editListPrompt("edit history "+a.historyId,l),2);r=A.yieldResult;v=r.status;y=r.list;if("canceled"===v)return A.return(!0);l=l.filter(function(E){return E.isListItem?y.includes(E.value):y.includes(E)});a.inputHistory=Object.assign({},a.inputHistory,{items:l});g.get("list").items=l.map(function(E,F){return{isListItem:!0,string:E,value:F}}).reverse();return A.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var g=
this.inputHistory,l=g.items,r=l.length-1;oh.num.between(a,0,r+1)?g.index=a:g.index=a=r;this.input!==l[a]&&"undefined"!==typeof l[a]&&(this.input=l[a])}},{key:"showHistItem",value:function(a){a=a||"next";var g=this.inputHistory,l=g.items,r=l.length-1,v=g.index;oh.num.between(v,0,r+1)||(g.index=v=r);if(this.input!==l[v]&&"undefined"!==typeof l[v])this.input=l[v];else{if("next"===a){if(v>r)return;v=++g.index}else{if(0>=v)return;v=--g.index}this.input=l[v]||""}}},{key:"commands",get:function(){var a=
this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}},{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(g){var l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=g.inputHistory,r=l.items.map(function(E,
F){return{isListItem:!0,string:E,value:F}}).reverse(),A.yield(g.world().filterableListPrompt("Choose items to delete:",r,{multiSelect:!0}),2);v=A.yieldResult;y=v.selected;oh.arr.sort(y).reverse().forEach(function(E){E<l.index&&l.index--;l.items.splice(E,1)});g.inputHistory=l;return A.return(!0)})}}].concat(hc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},
{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var g=a.ownerDocument.createElement("input"),l=a.querySelector(".newtext-text-layer.actual");g.id=a.id;g.className=a.className;g.style=a.style.cssText;Object.assign(g.style,
oh.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));g.placeholder=this.placeholder;g.type="text";g.autocomplete=g.name=this.name.replace(/[\s"]/g,"-");return g}}],[{key:"className",get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var g=localStorage.getItem("lively.morphic-inputline-"+a);return g?JSON.parse(g):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",
value:function(a,g){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+a,JSON.stringify(g))}catch(l){console.error(l)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var g=this.histories.get(a);if(g)return g;g=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,g);return g}},{key:"setHistory",value:function(a,g){g=void 0===g?{items:[],max:50,
index:0}:g;this.histories.set(a,g);this.addHistoryToLocalStorage(a,g);return g}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},extent:{defaultValue:oh.pt(100,20)},padding:{defaultValue:oh.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var g=this;this.setProperty("label",
a);this.textString.startsWith(a)||oh.noUpdate(function(){g.textString=a+g.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var g=this.getSubmorphNamed("placeholder");a?g?(g.defaultTextStyle=
Object.assign({},this.defaultTextStyle,{fontColor:oh.Color.gray}),g.value=a):this.addMorph(oh.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,fontColor:oh.Color.gray}))):g&&g.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:461,end:14346})}(oh.Text);bX=oh.InputLine;var uI=Ba("a_",bX),wz=function(b){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),m=d.hasOwnProperty("PasswordInputLine")&&"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onChange",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),
"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.whenRendered(),2);a.ensureInputNode().then(function(l){a.updateHtml(a.input);l.onkeydown=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyDown")};l.onkeyup=function(r){return a.env.eventDispatcher.dispatchDOMEvent(r,a,"onKeyUp")}});g.jumpToEnd()})}},{key:"onMouseDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&
this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var g=a.domNode;g.parentNode&&"INPUT"==g.parentNode.tagName&&(g.parentNode.remove(),g=a.env.renderer.getNodeForMorph(a),g.insertBefore(a.domNode,g.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);
this.lastInput=this.input}},{key:"focus",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,
a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return g.borderWidth=3,g.borderColor=oh.Color.red,g._errorIcon=g.addMorph(g._errorIcon||oh.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(oh.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),
fontSize:20,fontColor:oh.Color.red,opacity:0,reactsToPointer:!1,fill:oh.Color.white.withA(.9)})),l.yield(g.whenRendered(),2);g._errorIcon.opacity=1;g._errorIcon.rightCenter=g.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=oh.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;oh.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",
value:function(a){this.clearError();oh.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var g=this,l,r,v,y,A,E,F,G,I,M,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){if(1==R.nextAddress)return l=g,r=l.fontSize,v=l.fontFamily,y=l.padding,A=l.placeholder,E=void 0===l.fill?Tg.white:l.fill,F=l.borderRadius,G=y.top(),I=y.right(),M=y.bottom(),L=y.left(),R.yield(g.ensureInputNode(),2);S=R.yieldResult;S.setAttribute("type","password");S.setAttribute("placeholder",A);
S.setAttribute("value",a);Object.assign(S.style,{position:"absolute",width:"calc(100% - "+L+"px - "+I+"px)","border-width":0,outline:"none","border-radius":F.valueOf()+"px",background:E.toString(),padding:G+"px "+I+"px "+M+"px "+L+"px","font-size":r+"px","font-family":""+v});R.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(hc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),
"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var g=a.ownerDocument,l=g.createElement("div"),r=a.querySelector("input");g=g.createElement("input");r.childNodes[0]&&"INPUT"===r.childNodes[0].tagName&&(r=r.childNodes[0]);g.id=a.id;g.className=a.className;l.style=a.style.cssText;Object.assign(g.style,oh.obj.select(r.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));
g.style.position="absolute";g.style.width=a.style.width;g.style.height=a.style.height;g.style["border-width"]=a.style["border-width"];g.placeholder=this.placeholder;g.type="password";g.autocomplete=g.name=this.name.replace(/[\s"]/g,"-");l.appendChild(g);l.appendChild(a.childNodes[1]);return l}}],[{key:"className",get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:oh.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},
highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],
set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:oh.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14421,end:21250})}(oh.HTMLMorph);oh.PasswordInputLine=wz;oh.PasswordInputLine=wz;oh.PasswordInputLine=wz;oh.default=bX;var yg=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");yg.default=am;yg.config=am;Object.assign(yg,rua);Object.assign(yg,Hua);Object.assign(yg,Mua);Object.assign(yg,Nua);Object.assign(yg,Jua);Object.assign(yg,Dua);Object.assign(yg,Zoa);Object.assign(yg,Xba);yg.StyleSheet=Fv;yg.StyleSheet=Fv;yg.ShadowObject=
ds;yg.ShadowObject=ds;yg.addOrChangeCSSDeclaration=zj;yg.addOrChangeCSSDeclaration=zj;yg.addOrChangeLinkedCSS=df;yg.addOrChangeLinkedCSS=df;yg.easings=Pq;yg.easings=Pq;yg.stringToEasing=Ij;yg.stringToEasing=Ij;Object.assign(yg,Eua);yg.Icon=op;yg.Icon=op;yg.loadMorphFromSnapshot=Pu;yg.loadMorphFromSnapshot=Pu;Object.assign(yg,Fua);yg.World=Qy;yg.Hand=NE;yg.Morph=Ol;yg.Image=qz;yg.Ellipse=ZB;yg.Triangle=GE;yg.Path=$B;yg.Polygon=HE;yg.LineMorph=IE;yg.Text=Ct;yg.Label=Dt;yg.HTMLMorph=rz;yg.InputLine=
uI;yg.PasswordInputLine=wz;yg.InputLine=uI;yg.InputLine=uI;yg.PasswordInputLine=wz;yg.PasswordInputLine=wz;yg.locateClass=Kp;yg.morph=ab;yg.addClassMappings=Oa;yg.inspect=FB;yg.touchInputDevice=Qq;yg.addClassMappings({"default":yg.Morph,world:yg.World,hand:yg.Hand,image:yg.Image,ellipse:yg.Ellipse,triangle:yg.Triangle,path:yg.Path,text:yg.Text,input:yg.InputLine,label:yg.Label,polygon:yg.Polygon,line:yg.LineMorph,html:yg.HTMLMorph});yg.morph=ab;yg.morph=ab;yg.inspect=FB;yg.inspect=FB;yg.touchInputDevice=
Qq;yg.touchInputDevice=Qq;var Oua=Object.freeze({__proto__:null,config:am,StyleSheet:Fv,ShadowObject:ds,addOrChangeCSSDeclaration:zj,addOrChangeLinkedCSS:df,easings:Pq,stringToEasing:Ij,Icon:op,loadMorphFromSnapshot:Pu,InputLine:uI,PasswordInputLine:wz,morph:ab,inspect:FB,touchInputDevice:Qq,Morph:Ol,Ellipse:ZB,Triangle:GE,Image:qz,PathPoint:hI,Path:$B,Polygon:HE,LineMorph:IE,World:Qy,Hand:NE,Text:Ct,Label:Dt,Anchor:OE,HTMLMorph:rz,IFrameMorph:kI,MorphicEnv:Yr,CustomLayout:lI,SnapLayout:mI,VerticalLayout:sz,
HorizontalLayout:Ev,ProportionalLayout:nI,CenteredTilingLayout:oI,TilingLayout:pI,CellGroup:qI,LayoutColumn:rI,LayoutRow:sI,LayoutCell:tI,GridLayout:tz,TooltipViewer:LE,Tooltip:bC,MorphicDB:ix}),Pl=lively.FreezerRuntime.recorderFor("lively.components/canvas.js");Pl.pt=th;Pl.rect=Gl;Pl.Color=Tg;Pl.Morph=Ol;Pl.Image=qz;Pl.connect=yl;var vI=Ba("aS",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/canvas.js"),m=d.hasOwnProperty("Canvas")&&"function"===typeof d.Canvas?d.Canvas:d.Canvas=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"context",get:function(){return this._canvas&&this._canvas.getContext(this.contextType)}},{key:"_canvas",set:function(a){var g=this.__canvas__;this.__canvas__=a;this.restoreContent(g,a)}},{key:"_canvas",get:function(){return this.__canvas__}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);Pl.connect(this,"extent",this,"onExtentChanged")}},{key:"afterRender",value:function(a,g){g?this._canvas=a:"function"===typeof this.__canvas_init__&&(this.__canvas_init__(),delete this.__canvas_init__)}},{key:"restoreContent",value:function(a,g){var l=this.contextType,r=this.preserveContents;"function"===typeof this.__canvas_init__?(this.__canvas_init__(),delete this.__canvas_init__):r&&"2d"==l&&a&&a!==g&&this.context.drawImage(a,0,0)}},
{key:"onExtentChanged",value:function(){var a=this;if(this._canvas&&this.preserveContents&&this.context.getImageData){var g=this._canvas,l=this.context.getImageData(0,0,g.width,g.height);this.__canvas_init__=function(){a.context.putImageData(l,0,0)}}}},{key:"clear",value:function(a){var g=this.context;if(g){var l=this._canvas,r=l.width;l=l.height;g.save();g.setTransform(1,0,0,1,0,0);a?(a.toCSSString&&(a=a.toCSSString()),g.fillStyle=a,g.fillRect(0,0,r,l)):g.clearRect(0,0,r,l);g.restore()}}},{key:"render",
value:function(a){return a.renderCanvas(this)}},{key:"withContextDo",value:function(a){var g=this;this._canvas?a(this.context):this.__canvas_init__=function(){return a(g.context)}}},{key:"toDataURI",value:function(){return this._canvas&&this._canvas.toDataURL()}},{key:"fromDataURI",value:function(a){var g=this,l=new Pl.Image;l.onload=function(){g._canvas.width=l.width;g._canvas.height=l.height;g.context.drawImage(l,0,0)};l.src=a}},{key:"imageData",value:function(a){a||(a=this.canvasBounds);return this.context.getImageData(a.x,
a.y,a.width,a.height)}},{key:"nonTransparentArea",value:function(){for(var a=this.imageData(),g=a.data,l=a.width,r=a.height,v=l,y=r,A=0;A<r;A++)for(var E=0;E<v;E++)0<g[4*(A*l+E)+3]&&(v=E,y>A&&(y=A));if(v===l)return Pl.rect(0,0,0,0);A=v;E=y;for(--r;r>y;r--)for(var F=l-1;F>A;F--)0<g[4*(r*l+F)+3]&&(A=F,E<r&&(E=r));return{imageData:a,bounds:Pl.rect(v,y,A-v+1,E-y+1)}}},{key:"trimNonTransparent",value:function(){var a=this.nonTransparentArea(),g=a.imageData;a=a.bounds;if(!a.topLeft().equals(Pl.pt(0,0))){var l=
a.x,r=a.y;this.context.putImageData(g,-l,-r,l,r,a.width,a.height);this.position=this.position.addPt(a.topLeft())}a.extent().equals(this.extent)||(this.extent=a.extent())}},{key:"finishDraw",value:function(a){a=void 0===a?{}:a;var g=this.context,l=a.color||"rgba(0,0,0,0.6)",r=a.width||4,v=a.fill;a=a.fillColor||l;l.toCSSString&&(l=l.toCSSString());g.strokeStyle=l;g.lineWidth=r;g.stroke();g.closePath();v&&(g.fillStyle=a,g.fill())}},{key:"line",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context;
r.beginPath();r.moveTo(a.x,a.y);r.lineTo(g.x,g.y);this.finishDraw(l)}},{key:"testLine",value:function(){this.line(Pl.pt(0,0),Pl.pt(20,20))}},{key:"arc",value:function(a,g,l,r,v,y){v=void 0===v?!1:v;y=void 0===y?{}:y;var A=this.context;A.beginPath();A.arc(a.x,a.y,g,l,r,v);this.finishDraw(y)}},{key:"polygon",value:function(a,g){g=void 0===g?{}:g;var l=this.context;l.beginPath();l.moveTo(a[0].x,a[0].y);for(var r=0;r<a.length;r++)l.lineTo(a[r].x,a[r].y);l.lineTo(a[0].x,a[0].y);this.finishDraw(g)}},{key:"testPolygon",
value:function(){this.polygon([Pl.pt(0,0),Pl.pt(20,20),Pl.pt(0,20)],{fill:!0,fillColor:Pl.Color.green})}},{key:"text",value:function(a,g,l){l=void 0===l?{}:l;var r=this.context,v=l.color||"black",y=l.font||"14px Arial",A=l.align||"start",E=l.baseline||"bottom";r.save();r.font=y;r.fillStyle=v;r.textAlign=A;r.textBaseline=E;l.angle&&!isNaN(l.angle)&&(r.translate(g.x,g.y),r.rotate(l.angle),r.translate(-g.x,-g.y));r.fillText(a,g.x,g.y);r.restore()}}],[{key:"className",get:function(){return"Canvas"}},
{key:"properties",get:function(){return{extent:{defaultValue:Pl.pt(200,200)},fill:{defaultValue:Pl.Color.transparent},contextType:{defaultValue:"2d"},preserveContents:{defaultValue:!0},canvasExtent:{get:function(){return this._canvas&&Pl.pt(this._canvas.width,this._canvas.height)}},canvasBounds:{readOnly:!0,get:function(){return this._canvas&&this.canvasExtent.extentAsRectangle()}},_serializedContents:{get:function(){return this.preserveContents&&this.toDataURI()},set:function(a){var g=this;this.withContextDo(function(){return g.fromDataURI(a)})}}}}}],
d,{pathInPackage:function(){return"canvas.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:227,end:7043})}(Pl.Morph));Pl.Canvas=vI;Pl.Canvas=vI;Pl.Canvas=vI;var jx=lively.FreezerRuntime.recorderFor("Globe/index.js");jx.Canvas=vI;jx.promise=xh;jx.easings=Pq;var bca=function(b){var d=lively.FreezerRuntime.recorderFor("Globe/index.js"),
m=d.hasOwnProperty("Globe")&&"function"===typeof d.Globe?d.Globe:d.Globe=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"fullyLoaded",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(g=a.get("webgl canvas"),l.yield(jx.promise.waitFor(5E3,function(){return g.firstFrameRendered}),2)):l.return(l.yieldResult)})}},{key:"onLoad",value:function(){var a=
this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return navigator.webdriver||!lively.FreezerRuntime?l.return():l.yield(a.whenRendered(),2);case 2:return g=a.get("webgl canvas"),g.renderGlobe(),l.yield(a.fullyLoaded(),3);case 3:return l.yield(jx.promise.delay(500),4);case 4:a.get("cover").animate({opacity:0,easing:jx.easings.inOutCubic}),g.relayout(),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){this.get("cover").opacity=1}},{key:"onExtentChanged",
value:function(){hc._get(Object.getPrototypeOf(m.prototype),"onExtentChanged",this).call(this);this.get("webgl canvas").extent=this.extent;this.get("cover").extent=this.extent}}],[{key:"className",get:function(){return"Globe"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"Globe",version:"0.1.1-26"}}},{start:169,end:918})}(jx.Canvas);
bca=jx.Globe;jx.default=bca;var wI={},cca=!1,p="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xva=function(){if(cca)return wI;cca=!0;(function(b,d){"object"===typeof wI?d(wI):"function"===typeof define&&define.amd?define(["exports"],d):(b="undefined"!==typeof globalThis?globalThis:b||self,d(b.THREE={}))})(wI,function(b){function d(){}function m(u,z){for(var t=0;t<z.length;t++){var x=z[t];x.enumerable=x.enumerable||!1;x.configurable=!0;"value"in x&&(x.writable=!0);
Object.defineProperty(u,x.key,x)}}function a(u,z,t){z&&m(u.prototype,z);t&&m(u,t);return u}function g(u,z){u.prototype=Object.create(z.prototype);u.prototype.constructor=u;u.__proto__=z}function l(u){if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function r(u,z,t,x,C,H,N,T,W,Y){Object.defineProperty(this||p,"id",{value:Pua++});(this||p).uuid=ti.generateUUID();(this||p).name="";(this||p).image=void 0!==u?u:r.DEFAULT_IMAGE;(this||p).mipmaps=
[];(this||p).mapping=void 0!==z?z:r.DEFAULT_MAPPING;(this||p).wrapS=void 0!==t?t:1001;(this||p).wrapT=void 0!==x?x:1001;(this||p).magFilter=void 0!==C?C:1006;(this||p).minFilter=void 0!==H?H:1008;(this||p).anisotropy=void 0!==W?W:1;(this||p).format=void 0!==N?N:1023;(this||p).internalFormat=null;(this||p).type=void 0!==T?T:1009;(this||p).offset=new cf(0,0);(this||p).repeat=new cf(1,1);(this||p).center=new cf(0,0);(this||p).rotation=0;(this||p).matrixAutoUpdate=!0;(this||p).matrix=new tp;(this||p).generateMipmaps=
!0;(this||p).premultiplyAlpha=!1;(this||p).flipY=!0;(this||p).unpackAlignment=4;(this||p).encoding=void 0!==Y?Y:3E3;(this||p).version=0;(this||p).onUpdate=null}function v(u,z,t){(this||p).width=u;(this||p).height=z;(this||p).scissor=new $k(0,0,u,z);(this||p).scissorTest=!1;(this||p).viewport=new $k(0,0,u,z);t=t||{};(this||p).texture=new r(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding);(this||p).texture.image={};(this||p).texture.image.width=u;(this||
p).texture.image.height=z;(this||p).texture.generateMipmaps=void 0!==t.generateMipmaps?t.generateMipmaps:!1;(this||p).texture.minFilter=void 0!==t.minFilter?t.minFilter:1006;(this||p).depthBuffer=void 0!==t.depthBuffer?t.depthBuffer:!0;(this||p).stencilBuffer=void 0!==t.stencilBuffer?t.stencilBuffer:!1;(this||p).depthTexture=void 0!==t.depthTexture?t.depthTexture:null}function y(u,z,t){v.call(this||p,u,z,t);(this||p).samples=4}function A(u,z,t,x,C){for(var H=0,N=u.length-3;H<=N;H+=3){eC.fromArray(u,
H);var T=C.x*Math.abs(eC.x)+C.y*Math.abs(eC.y)+C.z*Math.abs(eC.z),W=z.dot(eC),Y=t.dot(eC),ea=x.dot(eC);if(Math.max(-Math.max(W,Y,ea),Math.min(W,Y,ea))>T)return!1}return!0}function E(){Object.defineProperty(this||p,"id",{value:Qua++});(this||p).uuid=ti.generateUUID();(this||p).name="";(this||p).type="Object3D";(this||p).parent=null;(this||p).children=[];(this||p).up=E.DefaultUp.clone();var u=new wc,z=new BO,t=new Ko,x=new wc(1,1,1);z._onChange(function(){t.setFromEuler(z,!1)});t._onChange(function(){z.setFromQuaternion(t,
void 0,!1)});Object.defineProperties(this||p,{position:{configurable:!0,enumerable:!0,value:u},rotation:{configurable:!0,enumerable:!0,value:z},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:x},modelViewMatrix:{value:new uj},normalMatrix:{value:new tp}});(this||p).matrix=new uj;(this||p).matrixWorld=new uj;(this||p).matrixAutoUpdate=E.DefaultMatrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=!1;(this||p).layers=new cX;(this||p).visible=!0;(this||p).castShadow=
!1;(this||p).receiveShadow=!1;(this||p).frustumCulled=!0;(this||p).renderOrder=0;(this||p).userData={}}function F(u,z,t){0>t&&(t+=1);1<t&&--t;return t<1/6?u+6*(z-u)*t:.5>t?z:t<2/3?u+6*(z-u)*(2/3-t):u}function G(u){return.04045>u?.0773993808*u:Math.pow(.9478672986*u+.0521327014,2.4)}function I(u){return.0031308>u?12.92*u:1.055*Math.pow(u,.41666)-.055}function M(){Object.defineProperty(this||p,"id",{value:Rua++});(this||p).uuid=ti.generateUUID();(this||p).name="";(this||p).type="Material";(this||p).fog=
!0;(this||p).blending=1;(this||p).side=0;(this||p).flatShading=!1;(this||p).vertexColors=!1;(this||p).opacity=1;(this||p).transparent=!1;(this||p).blendSrc=204;(this||p).blendDst=205;(this||p).blendEquation=100;(this||p).blendSrcAlpha=null;(this||p).blendDstAlpha=null;(this||p).blendEquationAlpha=null;(this||p).depthFunc=3;(this||p).depthTest=!0;(this||p).depthWrite=!0;(this||p).stencilWriteMask=255;(this||p).stencilFunc=519;(this||p).stencilRef=0;(this||p).stencilFuncMask=255;(this||p).stencilFail=
7680;(this||p).stencilZFail=7680;(this||p).stencilZPass=7680;(this||p).stencilWrite=!1;(this||p).clippingPlanes=null;(this||p).clipIntersection=!1;(this||p).clipShadows=!1;(this||p).shadowSide=null;(this||p).colorWrite=!0;(this||p).precision=null;(this||p).polygonOffset=!1;(this||p).polygonOffsetFactor=0;(this||p).polygonOffsetUnits=0;(this||p).dithering=!1;(this||p).alphaTest=0;(this||p).premultipliedAlpha=!1;(this||p).visible=!0;(this||p).toneMapped=!0;(this||p).userData={};(this||p).version=0}
function L(u){M.call(this||p);(this||p).type="MeshBasicMaterial";(this||p).color=new Hg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=
!1;(this||p).morphTargets=!1;this.setValues(u)}function S(u,z,t){if(Array.isArray(u))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");(this||p).name="";(this||p).array=u;(this||p).itemSize=z;(this||p).count=void 0!==u?u.length/z:0;(this||p).normalized=!0===t;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0}function R(u,z,t){S.call(this||p,new Int8Array(u),z,t)}function aa(u,z,t){S.call(this||p,new Uint8Array(u),z,t)}function ra(u,z,t){S.call(this||
p,new Uint8ClampedArray(u),z,t)}function Ea(u,z,t){S.call(this||p,new Int16Array(u),z,t)}function K(u,z,t){S.call(this||p,new Uint16Array(u),z,t)}function Z(u,z,t){S.call(this||p,new Int32Array(u),z,t)}function U(u,z,t){S.call(this||p,new Uint32Array(u),z,t)}function V(u,z,t){S.call(this||p,new Float32Array(u),z,t)}function na(u,z,t){S.call(this||p,new Float64Array(u),z,t)}function la(u){if(0===u.length)return-Infinity;for(var z=u[0],t=1,x=u.length;t<x;++t)u[t]>z&&(z=u[t]);return z}function ya(){Object.defineProperty(this||
p,"id",{value:Sua+=2});(this||p).uuid=ti.generateUUID();(this||p).name="";(this||p).type="BufferGeometry";(this||p).index=null;(this||p).attributes={};(this||p).morphAttributes={};(this||p).morphTargetsRelative=!1;(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).drawRange={start:0,count:Infinity};(this||p).userData={}}function jb(u,z){E.call(this||p);(this||p).type="Mesh";(this||p).geometry=void 0!==u?u:new ya;(this||p).material=void 0!==z?z:new L;this.updateMorphTargets()}
function gb(u,z,t,x,C,H,N,T){if(null===(1===z.side?x.intersectTriangle(N,H,C,!0,T):x.intersectTriangle(C,H,N,2!==z.side,T)))return null;CO.copy(T);CO.applyMatrix4(u.matrixWorld);z=t.ray.origin.distanceTo(CO);return z<t.near||z>t.far?null:{distance:z,point:CO.clone(),object:u}}function ka(u,z,t,x,C,H,N,T,W,Y,ea,sa){xz.fromBufferAttribute(C,Y);yz.fromBufferAttribute(C,ea);zz.fromBufferAttribute(C,sa);C=u.morphTargetInfluences;if(z.morphTargets&&H&&C){DO.set(0,0,0);EO.set(0,0,0);FO.set(0,0,0);for(var Aa=
0,Xa=H.length;Aa<Xa;Aa++){var Va=C[Aa],vb=H[Aa];0!==Va&&(dX.fromBufferAttribute(vb,Y),eX.fromBufferAttribute(vb,ea),fX.fromBufferAttribute(vb,sa),N?(DO.addScaledVector(dX,Va),EO.addScaledVector(eX,Va),FO.addScaledVector(fX,Va)):(DO.addScaledVector(dX.sub(xz),Va),EO.addScaledVector(eX.sub(yz),Va),FO.addScaledVector(fX.sub(zz),Va)))}xz.add(DO);yz.add(EO);zz.add(FO)}u.isSkinnedMesh&&(u.boneTransform(Y,xz),u.boneTransform(ea,yz),u.boneTransform(sa,zz));if(u=gb(u,z,t,x,xz,yz,zz,xI))T&&(PE.fromBufferAttribute(T,
Y),QE.fromBufferAttribute(T,ea),RE.fromBufferAttribute(T,sa),u.uv=Et.getUV(xI,xz,yz,zz,PE,QE,RE,new cf)),W&&(PE.fromBufferAttribute(W,Y),QE.fromBufferAttribute(W,ea),RE.fromBufferAttribute(W,sa),u.uv2=Et.getUV(xI,xz,yz,zz,PE,QE,RE,new cf)),T=new yI(Y,ea,sa),Et.getNormal(xz,yz,zz,T.normal),u.face=T;return u}function ia(u){var z={},t;for(t in u){z[t]={};for(var x in u[t]){var C=u[t][x];C&&(C.isColor||C.isMatrix3||C.isMatrix4||C.isVector2||C.isVector3||C.isVector4||C.isTexture)?z[t][x]=C.clone():Array.isArray(C)?
z[t][x]=C.slice():z[t][x]=C}}return z}function qa(u){for(var z={},t=0;t<u.length;t++){var x=ia(u[t]),C;for(C in x)z[C]=x[C]}return z}function La(u){M.call(this||p);(this||p).type="ShaderMaterial";(this||p).defines={};(this||p).uniforms={};(this||p).vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";(this||p).fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";(this||p).linewidth=1;(this||p).wireframe=!1;(this||p).wireframeLinewidth=
1;(this||p).fog=!1;(this||p).lights=!1;(this||p).clipping=!1;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};(this||p).defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};(this||p).index0AttributeName=void 0;(this||p).uniformsNeedUpdate=!1;(this||p).glslVersion=null;void 0!==u&&(void 0!==u.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),
this.setValues(u))}function Lb(){E.call(this||p);(this||p).type="Camera";(this||p).matrixWorldInverse=new uj;(this||p).projectionMatrix=new uj;(this||p).projectionMatrixInverse=new uj}function qc(u,z,t,x){Lb.call(this||p);(this||p).type="PerspectiveCamera";(this||p).fov=void 0!==u?u:50;(this||p).zoom=1;(this||p).near=void 0!==t?t:.1;(this||p).far=void 0!==x?x:2E3;(this||p).focus=10;(this||p).aspect=void 0!==z?z:1;(this||p).view=null;(this||p).filmGauge=35;(this||p).filmOffset=0;this.updateProjectionMatrix()}
function dc(u,z,t){E.call(this||p);(this||p).type="CubeCamera";if(!0!==t.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");else{(this||p).renderTarget=t;var x=new qc(90,1,u,z);x.layers=(this||p).layers;x.up.set(0,-1,0);x.lookAt(new wc(1,0,0));this.add(x);var C=new qc(90,1,u,z);C.layers=(this||p).layers;C.up.set(0,-1,0);C.lookAt(new wc(-1,0,0));this.add(C);var H=new qc(90,1,u,z);H.layers=(this||p).layers;
H.up.set(0,0,1);H.lookAt(new wc(0,1,0));this.add(H);var N=new qc(90,1,u,z);N.layers=(this||p).layers;N.up.set(0,0,-1);N.lookAt(new wc(0,-1,0));this.add(N);var T=new qc(90,1,u,z);T.layers=(this||p).layers;T.up.set(0,-1,0);T.lookAt(new wc(0,0,1));this.add(T);var W=new qc(90,1,u,z);W.layers=(this||p).layers;W.up.set(0,-1,0);W.lookAt(new wc(0,0,-1));this.add(W);(this||p).update=function(Y,ea){null===(this||p).parent&&this.updateMatrixWorld();var sa=Y.xr.enabled,Aa=Y.getRenderTarget();Y.xr.enabled=!1;
var Xa=t.texture.generateMipmaps;t.texture.generateMipmaps=!1;Y.setRenderTarget(t,0);Y.render(ea,x);Y.setRenderTarget(t,1);Y.render(ea,C);Y.setRenderTarget(t,2);Y.render(ea,H);Y.setRenderTarget(t,3);Y.render(ea,N);Y.setRenderTarget(t,4);Y.render(ea,T);t.texture.generateMipmaps=Xa;Y.setRenderTarget(t,5);Y.render(ea,W);Y.setRenderTarget(Aa);Y.xr.enabled=sa};(this||p).clear=function(Y,ea,sa,Aa){for(var Xa=Y.getRenderTarget(),Va=0;6>Va;Va++)Y.setRenderTarget(t,Va),Y.clear(ea,sa,Aa);Y.setRenderTarget(Xa)}}}
function oc(u,z,t,x,C,H,N,T,W,Y){u=void 0!==u?u:[];r.call(this||p,u,void 0!==z?z:301,t,x,C,H,void 0!==N?N:1022,T,W,Y);(this||p).flipY=!1;(this||p)._needsFlipEnvMap=!0}function $c(u,z,t){Number.isInteger(z)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),z=t);v.call(this||p,u,u,z);z=z||{};(this||p).texture=new oc(void 0,z.mapping,z.wrapS,z.wrapT,z.magFilter,z.minFilter,z.format,z.type,z.anisotropy,z.encoding);(this||p).texture._needsFlipEnvMap=
!1}function Vb(u,z,t,x,C,H,N,T,W,Y,ea,sa){r.call(this||p,null,H,N,T,W,Y,x,C,ea,sa);(this||p).image={data:u||null,width:z||1,height:t||1};(this||p).magFilter=void 0!==W?W:1003;(this||p).minFilter=void 0!==Y?Y:1003;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).unpackAlignment=1;(this||p).needsUpdate=!0}function Hd(){function u(H,N){x(H,N);C=z.requestAnimationFrame(u)}var z=null,t=!1,x=null,C=null;return{start:function(){!0!==t&&null!==x&&(C=z.requestAnimationFrame(u),t=!0)},stop:function(){z.cancelAnimationFrame(C);
t=!1},setAnimationLoop:function(H){x=H},setContext:function(H){z=H}}}function be(u,z){function t(H,N){var T=H.array,W=H.usage,Y=u.createBuffer();u.bindBuffer(N,Y);u.bufferData(N,T,W);H.onUploadCallback();N=5126;T instanceof Float32Array?N=5126:T instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):T instanceof Uint16Array?N=5123:T instanceof Int16Array?N=5122:T instanceof Uint32Array?N=5125:T instanceof Int32Array?N=5124:T instanceof Int8Array?
N=5120:T instanceof Uint8Array&&(N=5121);return{buffer:Y,type:N,bytesPerElement:T.BYTES_PER_ELEMENT,version:H.version}}var x=z.isWebGL2,C=new WeakMap;return{get:function(H){H.isInterleavedBufferAttribute&&(H=H.data);return C.get(H)},remove:function(H){H.isInterleavedBufferAttribute&&(H=H.data);var N=C.get(H);N&&(u.deleteBuffer(N.buffer),C.delete(H))},update:function(H,N){if(H.isGLBufferAttribute)N=C.get(H),(!N||N.version<H.version)&&C.set(H,{buffer:H.buffer,type:H.type,bytesPerElement:H.elementSize,
version:H.version});else{H.isInterleavedBufferAttribute&&(H=H.data);var T=C.get(H);if(void 0===T)C.set(H,t(H,N));else if(T.version<H.version){var W=H.array,Y=H.updateRange;u.bindBuffer(N,T.buffer);-1===Y.count?u.bufferSubData(N,0,W):(x?u.bufferSubData(N,Y.offset*W.BYTES_PER_ELEMENT,W,Y.offset,Y.count):u.bufferSubData(N,Y.offset*W.BYTES_PER_ELEMENT,W.subarray(Y.offset,Y.offset+Y.count)),Y.count=-1);T.version=H.version}}}}}function ha(u,z,t,x,C){function H(Xa,Va){t.buffers.color.setClear(Xa.r,Xa.g,
Xa.b,Va,C)}var N=new Hg(0),T=0,W,Y,ea=null,sa=0,Aa=null;return{getClearColor:function(){return N},setClearColor:function(Xa,Va){N.set(Xa);T=void 0!==Va?Va:1;H(N,T)},getClearAlpha:function(){return T},setClearAlpha:function(Xa){T=Xa;H(N,T)},render:function(Xa,Va,vb,sb){(Va=!0===Va.isScene?Va.background:null)&&Va.isTexture&&(Va=z.get(Va));vb=u.xr;(vb=vb.getSession&&vb.getSession())&&"additive"===vb.environmentBlendMode&&(Va=null);null===Va?H(N,T):Va&&Va.isColor&&(H(Va,1),sb=!0);(u.autoClear||sb)&&u.clear(u.autoClearColor,
u.autoClearDepth,u.autoClearStencil);if(Va&&(Va.isCubeTexture||Va.isWebGLCubeRenderTarget||306===Va.mapping)){void 0===Y&&(Y=new jb(new zI(1,1,1),new La({name:"BackgroundCubeMaterial",uniforms:ia(Ft.cube.uniforms),vertexShader:Ft.cube.vertexShader,fragmentShader:Ft.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),Y.geometry.deleteAttribute("normal"),Y.geometry.deleteAttribute("uv"),Y.onBeforeRender=function(ad,Bc,rd){(this||p).matrixWorld.copyPosition(rd.matrixWorld)},Object.defineProperty(Y.material,
"envMap",{get:function(){return(this||p).uniforms.envMap.value}}),x.update(Y));Va.isWebGLCubeRenderTarget&&(Va=Va.texture);Y.material.uniforms.envMap.value=Va;Y.material.uniforms.flipEnvMap.value=Va.isCubeTexture&&Va._needsFlipEnvMap?-1:1;if(ea!==Va||sa!==Va.version||Aa!==u.toneMapping)Y.material.needsUpdate=!0,ea=Va,sa=Va.version,Aa=u.toneMapping;Xa.unshift(Y,Y.geometry,Y.material,0,0,null)}else if(Va&&Va.isTexture){void 0===W&&(W=new jb(new GO(2,2),new La({name:"BackgroundMaterial",uniforms:ia(Ft.background.uniforms),
vertexShader:Ft.background.vertexShader,fragmentShader:Ft.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),W.geometry.deleteAttribute("normal"),Object.defineProperty(W.material,"map",{get:function(){return(this||p).uniforms.t2D.value}}),x.update(W));W.material.uniforms.t2D.value=Va;!0===Va.matrixAutoUpdate&&Va.updateMatrix();W.material.uniforms.uvTransform.value.copy(Va.matrix);if(ea!==Va||sa!==Va.version||Aa!==u.toneMapping)W.material.needsUpdate=!0,ea=Va,sa=Va.version,Aa=u.toneMapping;
Xa.unshift(W,W.geometry,W.material,0,0,null)}}}}function Ca(u,z,t,x){function C(rd){return x.isWebGL2?u.bindVertexArray(rd):Va.bindVertexArrayOES(rd)}function H(rd){return x.isWebGL2?u.deleteVertexArray(rd):Va.deleteVertexArrayOES(rd)}function N(rd){for(var Jc=[],vd=[],Vc=[],Md=0;Md<Xa;Md++)Jc[Md]=0,vd[Md]=0,Vc[Md]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Jc,enabledAttributes:vd,attributeDivisors:Vc,object:rd,attributes:{},index:null}}function T(){for(var rd=Bc.newAttributes,
Jc=0,vd=rd.length;Jc<vd;Jc++)rd[Jc]=0}function W(rd){Y(rd,0)}function Y(rd,Jc){var vd=Bc.enabledAttributes,Vc=Bc.attributeDivisors;Bc.newAttributes[rd]=1;0===vd[rd]&&(u.enableVertexAttribArray(rd),vd[rd]=1);Vc[rd]!==Jc&&((x.isWebGL2?u:z.get("ANGLE_instanced_arrays"))[x.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](rd,Jc),Vc[rd]=Jc)}function ea(){for(var rd=Bc.newAttributes,Jc=Bc.enabledAttributes,vd=0,Vc=Jc.length;vd<Vc;vd++)Jc[vd]!==rd[vd]&&(u.disableVertexAttribArray(vd),Jc[vd]=0)}
function sa(){Aa();Bc!==ad&&(Bc=ad,C(Bc.object))}function Aa(){ad.geometry=null;ad.program=null;ad.wireframe=!1}var Xa=u.getParameter(34921),Va=x.isWebGL2?null:z.get("OES_vertex_array_object"),vb=x.isWebGL2||null!==Va,sb={},ad=N(null),Bc=ad;return{setup:function(rd,Jc,vd,Vc,Md){var de=!1;if(vb){de=!0===Jc.wireframe;var Id=sb[Vc.id];void 0===Id&&(Id={},sb[Vc.id]=Id);var Ld=Id[vd.id];void 0===Ld&&(Ld={},Id[vd.id]=Ld);Id=Ld[de];void 0===Id&&(Id=N(x.isWebGL2?u.createVertexArray():Va.createVertexArrayOES()),
Ld[de]=Id);de=Id;Bc!==de&&(Bc=de,C(Bc.object));a:if(de=Bc.attributes,Ld=Vc.attributes,Object.keys(de).length!==Object.keys(Ld).length)de=!0;else{for(var Le in Ld){Id=de[Le];var qf=Ld[Le];if(void 0===Id||Id.attribute!==qf||Id.data!==qf.data){de=!0;break a}}de=Bc.index!==Md?!0:!1}if(de){Le={};Ld=Vc.attributes;for(var zg in Ld)Id=Ld[zg],qf={},qf.attribute=Id,Id.data&&(qf.data=Id.data),Le[zg]=qf;Bc.attributes=Le;Bc.index=Md}}else if(zg=!0===Jc.wireframe,Bc.geometry!==Vc.id||Bc.program!==vd.id||Bc.wireframe!==
zg)Bc.geometry=Vc.id,Bc.program=vd.id,Bc.wireframe=zg,de=!0;!0===rd.isInstancedMesh&&(de=!0);null!==Md&&t.update(Md,34963);if(de){if(!1!==x.isWebGL2||!rd.isInstancedMesh&&!Vc.isInstancedBufferGeometry||null!==z.get("ANGLE_instanced_arrays")){T();zg=Vc.attributes;vd=vd.getAttributes();Jc=Jc.defaultAttributeValues;for(var Pf in vd)if(de=vd[Pf],0<=de){var kg=zg[Pf];if(void 0!==kg){if(Le=kg.normalized,qf=kg.itemSize,Id=t.get(kg),void 0!==Id){var Bh=Id.buffer;Ld=Id.type;Id=Id.bytesPerElement;if(kg.isInterleavedBufferAttribute){var bh=
kg.data,$i=bh.stride;kg=kg.offset;bh&&bh.isInstancedInterleavedBuffer?(Y(de,bh.meshPerAttribute),void 0===Vc._maxInstanceCount&&(Vc._maxInstanceCount=bh.meshPerAttribute*bh.count)):W(de);u.bindBuffer(34962,Bh);$i*=Id;Id*=kg;!0!==x.isWebGL2||5124!==Ld&&5125!==Ld?u.vertexAttribPointer(de,qf,Ld,Le,$i,Id):u.vertexAttribIPointer(de,qf,Ld,$i,Id)}else kg.isInstancedBufferAttribute?(Y(de,kg.meshPerAttribute),void 0===Vc._maxInstanceCount&&(Vc._maxInstanceCount=kg.meshPerAttribute*kg.count)):W(de),u.bindBuffer(34962,
Bh),Id=qf,!0!==x.isWebGL2||5124!==Ld&&5125!==Ld?u.vertexAttribPointer(de,Id,Ld,Le,0,0):u.vertexAttribIPointer(de,Id,Ld,0,0)}}else if("instanceMatrix"===Pf)Ld=t.get(rd.instanceMatrix),void 0!==Ld&&(Le=Ld.buffer,Ld=Ld.type,Y(de+0,1),Y(de+1,1),Y(de+2,1),Y(de+3,1),u.bindBuffer(34962,Le),u.vertexAttribPointer(de+0,4,Ld,!1,64,0),u.vertexAttribPointer(de+1,4,Ld,!1,64,16),u.vertexAttribPointer(de+2,4,Ld,!1,64,32),u.vertexAttribPointer(de+3,4,Ld,!1,64,48));else if("instanceColor"===Pf)Ld=t.get(rd.instanceColor),
void 0!==Ld&&(Le=Ld.buffer,Ld=Ld.type,Y(de,1),u.bindBuffer(34962,Le),u.vertexAttribPointer(de,3,Ld,!1,12,0));else if(void 0!==Jc&&(Le=Jc[Pf],void 0!==Le))switch(Le.length){case 2:u.vertexAttrib2fv(de,Le);break;case 3:u.vertexAttrib3fv(de,Le);break;case 4:u.vertexAttrib4fv(de,Le);break;default:u.vertexAttrib1fv(de,Le)}}ea()}null!==Md&&u.bindBuffer(34963,t.get(Md).buffer)}},reset:sa,resetDefaultState:Aa,dispose:function(){sa();for(var rd in sb){var Jc=sb[rd],vd;for(vd in Jc){var Vc=Jc[vd],Md;for(Md in Vc)H(Vc[Md].object),
delete Vc[Md];delete Jc[vd]}delete sb[rd]}},releaseStatesOfGeometry:function(rd){if(void 0!==sb[rd.id]){var Jc=sb[rd.id],vd;for(vd in Jc){var Vc=Jc[vd],Md;for(Md in Vc)H(Vc[Md].object),delete Vc[Md];delete Jc[vd]}delete sb[rd.id]}},releaseStatesOfProgram:function(rd){for(var Jc in sb){var vd=sb[Jc];if(void 0!==vd[rd.id]){var Vc=vd[rd.id],Md;for(Md in Vc)H(Vc[Md].object),delete Vc[Md];delete vd[rd.id]}}},initAttributes:T,enableAttribute:W,disableUnusedAttributes:ea}}function Na(u,z,t,x){var C=x.isWebGL2,
H;(this||p).setMode=function(N){H=N};(this||p).render=function(N,T){u.drawArrays(H,N,T);t.update(T,H,1)};(this||p).renderInstances=function(N,T,W){if(0!==W){if(C){var Y=u;var ea="drawArraysInstanced"}else if(Y=z.get("ANGLE_instanced_arrays"),ea="drawArraysInstancedANGLE",null===Y){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Y[ea](H,N,T,W);t.update(T,H,W)}}}function yb(u,z,t){function x(rd){if("highp"===
rd){if(0<u.getShaderPrecisionFormat(35633,36338).precision&&0<u.getShaderPrecisionFormat(35632,36338).precision)return"highp";rd="mediump"}return"mediump"===rd&&0<u.getShaderPrecisionFormat(35633,36337).precision&&0<u.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var C,H="undefined"!==typeof WebGL2RenderingContext&&u instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&u instanceof WebGL2ComputeRenderingContext,N=void 0!==t.precision?t.precision:
"highp",T=x(N);T!==N&&(console.warn("THREE.WebGLRenderer:",N,"not supported, using",T,"instead."),N=T);t=!0===t.logarithmicDepthBuffer;T=u.getParameter(34930);var W=u.getParameter(35660),Y=u.getParameter(3379),ea=u.getParameter(34076),sa=u.getParameter(34921),Aa=u.getParameter(36347),Xa=u.getParameter(36348),Va=u.getParameter(36349),vb=0<W,sb=H||!!z.get("OES_texture_float"),ad=vb&&sb,Bc=H?u.getParameter(36183):0;return{isWebGL2:H,getMaxAnisotropy:function(){if(void 0!==C)return C;var rd=z.get("EXT_texture_filter_anisotropic");
return C=null!==rd?u.getParameter(rd.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:x,precision:N,logarithmicDepthBuffer:t,maxTextures:T,maxVertexTextures:W,maxTextureSize:Y,maxCubemapSize:ea,maxAttributes:sa,maxVertexUniforms:Aa,maxVaryings:Xa,maxFragmentUniforms:Va,vertexTextures:vb,floatFragmentTextures:sb,floatVertexTextures:ad,maxSamples:Bc}}function gc(u){function z(){ea.value!==C&&(ea.value=C,ea.needsUpdate=0<H);x.numPlanes=H;x.numIntersection=0}function t(sa,Aa,Xa,Va){var vb=null!==sa?
sa.length:0,sb=null;if(0!==vb){sb=ea.value;if(!0!==Va||null===sb){Va=Xa+4*vb;Aa=Aa.matrixWorldInverse;Y.getNormalMatrix(Aa);if(null===sb||sb.length<Va)sb=new Float32Array(Va);for(Va=0;Va!==vb;++Va,Xa+=4)W.copy(sa[Va]).applyMatrix4(Aa,Y),W.normal.toArray(sb,Xa),sb[Xa+3]=W.constant}ea.value=sb;ea.needsUpdate=!0}x.numPlanes=vb;x.numIntersection=0;return sb}var x=this||p,C=null,H=0,N=!1,T=!1,W=new Gv,Y=new tp,ea={value:null,needsUpdate:!1};(this||p).uniform=ea;(this||p).numPlanes=0;(this||p).numIntersection=
0;(this||p).init=function(sa,Aa,Xa){var Va=0!==sa.length||Aa||0!==H||N;N=Aa;C=t(sa,Xa,0);H=sa.length;return Va};(this||p).beginShadows=function(){T=!0;t(null)};(this||p).endShadows=function(){T=!1;z()};(this||p).setState=function(sa,Aa,Xa){var Va=sa.clippingPlanes,vb=sa.clipIntersection,sb=sa.clipShadows;sa=u.get(sa);if(!N||null===Va||0===Va.length||T&&!sb)T?t(null):z();else{sb=T?0:H;var ad=4*sb,Bc=sa.clippingState||null;ea.value=Bc;Bc=t(Va,Aa,ad,Xa);for(Aa=0;Aa!==ad;++Aa)Bc[Aa]=C[Aa];sa.clippingState=
Bc;(this||p).numIntersection=vb?(this||p).numPlanes:0;(this||p).numPlanes+=sb}}}function Ud(u){function z(x,C){303===C?x.mapping=301:304===C&&(x.mapping=302);return x}var t=new WeakMap;return{get:function(x){if(x&&x.isTexture){var C=x.mapping;if(303===C||304===C){if(t.has(x))return C=t.get(x).texture,z(C,x.mapping);var H=x.image;if(H&&0<H.height){C=u.getRenderList();var N=u.getRenderTarget(),T=u.getRenderState();H=new $c(H.height/2);H.fromEquirectangularTexture(u,x);t.set(x,H);u.setRenderTarget(N);
u.setRenderList(C);u.setRenderState(T);return z(H.texture,x.mapping)}return null}}return x},dispose:function(){t=new WeakMap}}}function Td(u){var z={};return{has:function(t){if(void 0!==z[t])return null!==z[t];switch(t){case "WEBGL_depth_texture":var x=u.getExtension("WEBGL_depth_texture")||u.getExtension("MOZ_WEBGL_depth_texture")||u.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":x=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||
u.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":x=u.getExtension("WEBGL_compressed_texture_s3tc")||u.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":x=u.getExtension("WEBGL_compressed_texture_pvrtc")||u.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:x=u.getExtension(t)}z[t]=x;return null!==x},get:function(t){this.has(t)||console.warn("THREE.WebGLRenderer: "+
t+" extension not supported.");return z[t]}}}function cd(u,z,t,x){function C(W){W=W.target;var Y=N.get(W);null!==Y.index&&z.remove(Y.index);for(var ea in Y.attributes)z.remove(Y.attributes[ea]);W.removeEventListener("dispose",C);N.delete(W);if(ea=T.get(Y))z.remove(ea),T.delete(Y);x.releaseStatesOfGeometry(W);!0===W.isInstancedBufferGeometry&&delete W._maxInstanceCount;t.memory.geometries--}function H(W){var Y=[],ea=W.index,sa=W.attributes.position;if(null!==ea){sa=ea.array;ea=ea.version;for(var Aa=
0,Xa=sa.length;Aa<Xa;Aa+=3){var Va=sa[Aa+0],vb=sa[Aa+1],sb=sa[Aa+2];Y.push(Va,vb,vb,sb,sb,Va)}}else for(Aa=sa.array,ea=sa.version,sa=0,Aa=Aa.length/3-1;sa<Aa;sa+=3)Xa=sa+0,Va=sa+1,vb=sa+2,Y.push(Xa,Va,Va,vb,vb,Xa);Y=new (65535<la(Y)?U:K)(Y,1);Y.version=ea;(ea=T.get(W))&&z.remove(ea);T.set(W,Y)}var N=new WeakMap,T=new WeakMap;return{get:function(W,Y){var ea=N.get(Y);if(ea)return ea;Y.addEventListener("dispose",C);Y.isBufferGeometry?ea=Y:Y.isGeometry&&(void 0===Y._bufferGeometry&&(Y._bufferGeometry=
(new ya).setFromObject(W)),ea=Y._bufferGeometry);N.set(Y,ea);t.memory.geometries++;return ea},update:function(W){var Y=W.attributes;for(sa in Y)z.update(Y[sa],34962);W=W.morphAttributes;for(var ea in W){Y=W[ea];var sa=0;for(var Aa=Y.length;sa<Aa;sa++)z.update(Y[sa],34962)}},getWireframeAttribute:function(W){var Y=T.get(W);if(Y){var ea=W.index;null!==ea&&Y.version<ea.version&&H(W)}else H(W);return T.get(W)}}}function gf(u,z,t,x){var C=x.isWebGL2,H,N,T;(this||p).setMode=function(W){H=W};(this||p).setIndex=
function(W){N=W.type;T=W.bytesPerElement};(this||p).render=function(W,Y){u.drawElements(H,Y,N,W*T);t.update(Y,H,1)};(this||p).renderInstances=function(W,Y,ea){if(0!==ea){if(C){var sa=u;var Aa="drawElementsInstanced"}else if(sa=z.get("ANGLE_instanced_arrays"),Aa="drawElementsInstancedANGLE",null===sa){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}sa[Aa](H,Y,N,W*T,ea);t.update(Y,H,ea)}}}function Ze(u){var z=
{frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:z,programs:null,autoReset:!0,reset:function(){z.frame++;z.calls=0;z.triangles=0;z.points=0;z.lines=0},update:function(t,x,C){z.calls++;switch(x){case 4:z.triangles+=t/3*C;break;case 1:z.lines+=t/2*C;break;case 3:z.lines+=C*(t-1);break;case 2:z.lines+=C*t;break;case 0:z.points+=C*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",x)}}}}function ii(u,z){return u[0]-z[0]}function Gh(u,z){return Math.abs(z[1])-
Math.abs(u[1])}function Bj(u){for(var z={},t=new Float32Array(8),x=[],C=0;8>C;C++)x[C]=[C,0];return{update:function(H,N,T,W){var Y=H.morphTargetInfluences;H=void 0===Y?0:Y.length;var ea=z[N.id];if(void 0===ea){ea=[];for(var sa=0;sa<H;sa++)ea[sa]=[sa,0];z[N.id]=ea}for(sa=0;sa<H;sa++){var Aa=ea[sa];Aa[0]=sa;Aa[1]=Y[sa]}ea.sort(Gh);for(Y=0;8>Y;Y++)Y<H&&ea[Y][1]?(x[Y][0]=ea[Y][0],x[Y][1]=ea[Y][1]):(x[Y][0]=Number.MAX_SAFE_INTEGER,x[Y][1]=0);x.sort(ii);H=T.morphTargets&&N.morphAttributes.position;T=T.morphNormals&&
N.morphAttributes.normal;for(Y=ea=0;8>Y;Y++)Aa=x[Y],sa=Aa[0],Aa=Aa[1],sa!==Number.MAX_SAFE_INTEGER&&Aa?(H&&N.getAttribute("morphTarget"+Y)!==H[sa]&&N.setAttribute("morphTarget"+Y,H[sa]),T&&N.getAttribute("morphNormal"+Y)!==T[sa]&&N.setAttribute("morphNormal"+Y,T[sa]),t[Y]=Aa,ea+=Aa):(H&&void 0!==N.getAttribute("morphTarget"+Y)&&N.deleteAttribute("morphTarget"+Y),T&&void 0!==N.getAttribute("morphNormal"+Y)&&N.deleteAttribute("morphNormal"+Y),t[Y]=0);N=N.morphTargetsRelative?1:1-ea;W.getUniforms().setValue(u,
"morphTargetBaseInfluence",N);W.getUniforms().setValue(u,"morphTargetInfluences",t)}}}function rj(u,z,t,x){var C=new WeakMap;return{update:function(H){var N=x.render.frame,T=H.geometry,W=z.get(H,T);C.get(W)!==N&&(T.isGeometry&&W.updateFromObject(H),z.update(W),C.set(W,N));H.isInstancedMesh&&(t.update(H.instanceMatrix,34962),null!==H.instanceColor&&t.update(H.instanceColor,34962));return W},dispose:function(){C=new WeakMap}}}function Cj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||
1,height:t||1,depth:x||1};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function Tj(u,z,t,x){r.call(this||p,null);(this||p).image={data:u||null,width:z||1,height:t||1,depth:x||1};(this||p).magFilter=1003;(this||p).minFilter=1003;(this||p).wrapR=1001;(this||p).generateMipmaps=!1;(this||p).flipY=!1;(this||p).needsUpdate=!0}function bk(u,z,t){var x=u[0];if(0>=x||0<x)return u;var C=z*t,H=dca[C];void 0===
H&&(H=new Float32Array(C),dca[C]=H);if(0!==z)for(x.toArray(H,0),x=1,C=0;x!==z;++x)C+=t,u[x].toArray(H,C);return H}function jj(u,z){if(u.length!==z.length)return!1;for(var t=0,x=u.length;t<x;t++)if(u[t]!==z[t])return!1;return!0}function Kh(u,z){for(var t=0,x=z.length;t<x;t++)u[t]=z[t]}function ik(u,z){var t=eca[z];void 0===t&&(t=new Int32Array(z),eca[z]=t);for(var x=0;x!==z;++x)t[x]=u.allocateTextureUnit();return t}function Rk(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1f((this||p).addr,z),t[0]=
z)}function nk(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y)u.uniform2f((this||p).addr,z.x,z.y),t[0]=z.x,t[1]=z.y}else jj(t,z)||(u.uniform2fv((this||p).addr,z),Kh(t,z))}function Sk(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z)u.uniform3f((this||p).addr,z.x,z.y,z.z),t[0]=z.x,t[1]=z.y,t[2]=z.z}else if(void 0!==z.r){if(t[0]!==z.r||t[1]!==z.g||t[2]!==z.b)u.uniform3f((this||p).addr,z.r,z.g,z.b),t[0]=z.r,t[1]=z.g,t[2]=z.b}else jj(t,z)||(u.uniform3fv((this||
p).addr,z),Kh(t,z))}function cz(u,z){var t=(this||p).cache;if(void 0!==z.x){if(t[0]!==z.x||t[1]!==z.y||t[2]!==z.z||t[3]!==z.w)u.uniform4f((this||p).addr,z.x,z.y,z.z,z.w),t[0]=z.x,t[1]=z.y,t[2]=z.z,t[3]=z.w}else jj(t,z)||(u.uniform4fv((this||p).addr,z),Kh(t,z))}function Zd(u,z){var t=(this||p).cache,x=z.elements;void 0===x?jj(t,z)||(u.uniformMatrix2fv((this||p).addr,!1,z),Kh(t,z)):jj(t,x)||(fca.set(x),u.uniformMatrix2fv((this||p).addr,!1,fca),Kh(t,x))}function $d(u,z){var t=(this||p).cache,x=z.elements;
void 0===x?jj(t,z)||(u.uniformMatrix3fv((this||p).addr,!1,z),Kh(t,z)):jj(t,x)||(gca.set(x),u.uniformMatrix3fv((this||p).addr,!1,gca),Kh(t,x))}function bz(u,z){var t=(this||p).cache,x=z.elements;void 0===x?jj(t,z)||(u.uniformMatrix4fv((this||p).addr,!1,z),Kh(t,z)):jj(t,x)||(hca.set(x),u.uniformMatrix4fv((this||p).addr,!1,hca),Kh(t,x))}function bx(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTexture2D(z||ica,C)}function rv(u,z,t){var x=
(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.setTexture2DArray(z||Tua,C)}function wB(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.setTexture3D(z||Uua,C)}function AB(u,z,t){var x=(this||p).cache,C=t.allocateTextureUnit();x[0]!==C&&(u.uniform1i((this||p).addr,C),x[0]=C);t.safeSetTextureCube(z||jca,C)}function BB(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1i((this||p).addr,z),t[0]=z)}function CB(u,
z){var t=(this||p).cache;jj(t,z)||(u.uniform2iv((this||p).addr,z),Kh(t,z))}function DB(u,z){var t=(this||p).cache;jj(t,z)||(u.uniform3iv((this||p).addr,z),Kh(t,z))}function xB(u,z){var t=(this||p).cache;jj(t,z)||(u.uniform4iv((this||p).addr,z),Kh(t,z))}function hV(u,z){var t=(this||p).cache;t[0]!==z&&(u.uniform1ui((this||p).addr,z),t[0]=z)}function WM(u){switch(u){case 5126:return Rk;case 35664:return nk;case 35665:return Sk;case 35666:return cz;case 35674:return Zd;case 35675:return $d;case 35676:return bz;
case 5124:case 35670:return BB;case 35667:case 35671:return CB;case 35668:case 35672:return DB;case 35669:case 35673:return xB;case 5125:return hV;case 35678:case 36198:case 36298:case 36306:case 35682:return bx;case 35679:case 36299:case 36307:return wB;case 35680:case 36300:case 36308:case 36293:return AB;case 36289:case 36303:case 36311:case 36292:return rv}}function NM(u,z){u.uniform1fv((this||p).addr,z)}function CH(u,z){u.uniform1iv((this||p).addr,z)}function iV(u,z){u.uniform2iv((this||p).addr,
z)}function kV(u,z){u.uniform3iv((this||p).addr,z)}function jV(u,z){u.uniform4iv((this||p).addr,z)}function Oq(u,z){z=bk(z,(this||p).size,2);u.uniform2fv((this||p).addr,z)}function aV(u,z){z=bk(z,(this||p).size,3);u.uniform3fv((this||p).addr,z)}function bV(u,z){z=bk(z,(this||p).size,4);u.uniform4fv((this||p).addr,z)}function $U(u,z){z=bk(z,(this||p).size,4);u.uniformMatrix2fv((this||p).addr,!1,z)}function yB(u,z){z=bk(z,(this||p).size,9);u.uniformMatrix3fv((this||p).addr,!1,z)}function cV(u,z){z=
bk(z,(this||p).size,16);u.uniformMatrix4fv((this||p).addr,!1,z)}function XM(u,z,t){var x=z.length,C=ik(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTexture2D(z[u]||ica,C[u])}function st(u,z,t){var x=z.length,C=ik(t,x);u.uniform1iv((this||p).addr,C);for(u=0;u!==x;++u)t.safeSetTextureCube(z[u]||jca,C[u])}function dV(u){switch(u){case 5126:return NM;case 35664:return Oq;case 35665:return aV;case 35666:return bV;case 35674:return $U;case 35675:return yB;case 35676:return cV;case 5124:case 35670:return CH;
case 35667:case 35671:return iV;case 35668:case 35672:return kV;case 35669:case 35673:return jV;case 35678:case 36198:case 36298:case 36306:case 35682:return XM;case 35680:case 36300:case 36308:case 36293:return st}}function BH(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).setValue=WM(z.type)}function OM(u,z,t){(this||p).id=u;(this||p).addr=t;(this||p).cache=[];(this||p).size=z.size;(this||p).setValue=dV(z.type)}function UM(u){(this||p).id=u;(this||p).seq=[];(this||p).map={}}
function sv(u,z){(this||p).seq=[];(this||p).map={};for(var t=u.getProgramParameter(z,35718),x=0;x<t;++x){var C=u.getActiveUniform(z,x),H=u.getUniformLocation(z,C.name),N=this||p,T=C.name,W=T.length;for(gX.lastIndex=0;;){var Y=gX.exec(T),ea=gX.lastIndex,sa=Y[1],Aa=Y[3];"]"===Y[2]&&(sa|=0);if(void 0===Aa||"["===Aa&&ea+2===W){T=N;C=void 0===Aa?new BH(sa,C,H):new OM(sa,C,H);T.seq.push(C);T.map[C.id]=C;break}else Aa=N.map[sa],void 0===Aa&&(Aa=new UM(sa),sa=N,N=Aa,sa.seq.push(N),sa.map[N.id]=N),N=Aa}}}
function PM(u,z,t){z=u.createShader(z);u.shaderSource(z,t);u.compileShader(z);return z}function TM(u){switch(u){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",
u),["Linear","( value )"]}}function QM(u,z,t){var x=u.getShaderParameter(z,35713),C=u.getShaderInfoLog(z).trim();if(x&&""===C)return"";u=u.getShaderSource(z).split("\n");for(z=0;z<u.length;z++)u[z]=z+1+": "+u[z];u=u.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+"\n"+C+u}function dz(u,z){z=TM(z);return"vec4 "+u+"( vec4 value ) { return "+z[0]+"ToLinear"+z[1]+"; }"}function gV(u,z){z=TM(z);return"vec4 "+u+"( vec4 value ) { return LinearTo"+z[0]+z[1]+"; }"}function RM(u,z){switch(z){case 1:z=
"Linear";break;case 2:z="Reinhard";break;case 3:z="OptimizedCineon";break;case 4:z="ACESFilmic";break;case 5:z="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",z),z="Linear"}return"vec3 "+u+"( vec3 color ) { return "+z+"ToneMapping( color ); }"}function SM(u){var z=[],t;for(t in u){var x=u[t];!1!==x&&z.push("#define "+t+" "+x)}return z.join("\n")}function zB(u){return""!==u}function VM(u,z){return u.replace(/NUM_DIR_LIGHTS/g,z.numDirLights).replace(/NUM_SPOT_LIGHTS/g,
z.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,z.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,z.numPointLights).replace(/NUM_HEMI_LIGHTS/g,z.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,z.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,z.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,z.numPointLightShadows)}function ma(u,z){return u.replace(/NUM_CLIPPING_PLANES/g,z.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,z.numClippingPlanes-z.numClipIntersection)}function Ma(u,z){u=
vj[z];if(void 0===u)throw Error("Can not resolve #include <"+z+">");return u.replace(hX,Ma)}function Da(u,z,t,x){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return Ta(u,z,t,x)}function Ta(u,z,t,x){u="";for(z=parseInt(z);z<parseInt(t);z++)u+=x.replace(/\[\s*i\s*\]/g,"[ "+z+" ]").replace(/UNROLLED_LOOP_INDEX/g,z);return u}function kb(u){var z="precision "+u.precision+" float;\nprecision "+u.precision+" int;";"highp"===
u.precision?z+="\n#define HIGH_PRECISION":"mediump"===u.precision?z+="\n#define MEDIUM_PRECISION":"lowp"===u.precision&&(z+="\n#define LOW_PRECISION");return z}function fc(u){var z="SHADOWMAP_TYPE_BASIC";1===u.shadowMapType?z="SHADOWMAP_TYPE_PCF":2===u.shadowMapType?z="SHADOWMAP_TYPE_PCF_SOFT":3===u.shadowMapType&&(z="SHADOWMAP_TYPE_VSM");return z}function Ya(u){var z="ENVMAP_TYPE_CUBE";if(u.envMap)switch(u.envMapMode){case 301:case 302:z="ENVMAP_TYPE_CUBE";break;case 306:case 307:z="ENVMAP_TYPE_CUBE_UV"}return z}
function Yb(u){var z="ENVMAP_MODE_REFLECTION";if(u.envMap)switch(u.envMapMode){case 302:case 307:z="ENVMAP_MODE_REFRACTION"}return z}function Ib(u){var z="ENVMAP_BLENDING_NONE";if(u.envMap)switch(u.combine){case 0:z="ENVMAP_BLENDING_MULTIPLY";break;case 1:z="ENVMAP_BLENDING_MIX";break;case 2:z="ENVMAP_BLENDING_ADD"}return z}function md(u,z,t,x){var C=u.getContext(),H=t.defines,N=t.vertexShader,T=t.fragmentShader,W=fc(t),Y=Ya(t),ea=Yb(t),sa=Ib(t),Aa=0<u.gammaFactor?u.gammaFactor:1,Xa=t.isWebGL2?"":
[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":
""].filter(zB).join("\n"),Va=SM(H),vb=C.createProgram(),sb=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(H=[Va].filter(zB).join("\n"),0<H.length&&(H+="\n"),W=[Xa,Va].filter(zB).join("\n"),0<W.length&&(W+="\n")):(H=[kb(t),"#define SHADER_NAME "+t.shaderName,Va,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Aa,"#define MAX_BONES "+t.maxBones,t.useFog&&
t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+ea:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":
"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",
t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+W:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":
"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;",
"attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;",
"\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zB).join("\n"),W=[Xa,kb(t),"#define SHADER_NAME "+t.shaderName,Va,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+Aa,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",
t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+Y:"",t.envMap?"#define "+ea:"",t.envMap?"#define "+sa:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":
"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":
"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+W:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?
"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?vj.tonemapping_pars_fragment:"",0!==t.toneMapping?RM("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",vj.encodings_pars_fragment,t.map?dz("mapTexelToLinear",t.mapEncoding):"",t.matcap?dz("matcapTexelToLinear",
t.matcapEncoding):"",t.envMap?dz("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?dz("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?dz("lightMapTexelToLinear",t.lightMapEncoding):"",gV("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(zB).join("\n"));N=N.replace(hX,Ma);N=VM(N,t);N=ma(N,t);T=T.replace(hX,Ma);T=VM(T,t);T=ma(T,t);N=N.replace(kca,Ta).replace(lca,Da);T=T.replace(kca,Ta).replace(lca,Da);t.isWebGL2&&!0!==
t.isRawShaderMaterial&&(sb="#version 300 es\n",H="#define attribute in\n#define varying out\n#define texture2D texture\n"+H,W=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+W);T=sb+W+T;N=PM(C,35633,sb+H+N);T=PM(C,35632,T);C.attachShader(vb,N);C.attachShader(vb,T);void 0!==t.index0AttributeName?C.bindAttribLocation(vb,0,t.index0AttributeName):!0===t.morphTargets&&C.bindAttribLocation(vb,0,"position");C.linkProgram(vb);if(u.debug.checkShaderErrors){u=C.getProgramInfoLog(vb).trim();sb=C.getShaderInfoLog(N).trim();Y=C.getShaderInfoLog(T).trim();sa=ea=!0;if(!1===C.getProgramParameter(vb,35714))ea=!1,Aa=QM(C,N,"vertex"),Xa=QM(C,T,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
C.getError(),"35715",C.getProgramParameter(vb,35715),"gl.getProgramInfoLog",u,Aa,Xa);else if(""!==u)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",u);else if(""===sb||""===Y)sa=!1;sa&&((this||p).diagnostics={runnable:ea,programLog:u,vertexShader:{log:sb,prefix:H},fragmentShader:{log:Y,prefix:W}})}C.deleteShader(N);C.deleteShader(T);var ad;(this||p).getUniforms=function(){void 0===ad&&(ad=new sv(C,vb));return ad};var Bc;(this||p).getAttributes=function(){if(void 0===Bc){for(var rd={},Jc=
C.getProgramParameter(vb,35721),vd=0;vd<Jc;vd++){var Vc=C.getActiveAttrib(vb,vd).name;rd[Vc]=C.getAttribLocation(vb,Vc)}Bc=rd}return Bc};(this||p).destroy=function(){x.releaseStatesOfProgram(this||p);C.deleteProgram(vb);(this||p).program=void 0};(this||p).name=t.shaderName;(this||p).id=Vua++;(this||p).cacheKey=z;(this||p).usedTimes=1;(this||p).program=vb;(this||p).vertexShader=N;(this||p).fragmentShader=T;return this||p}function Ob(u,z,t,x,C,H){function N(sb){if(sb)sb.isTexture?ad=sb.encoding:sb.isWebGLRenderTarget&&
(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ad=sb.texture.encoding);else var ad=3E3;return ad}var T=[],W=x.isWebGL2,Y=x.logarithmicDepthBuffer,ea=x.floatVertexTextures,sa=x.maxVertexUniforms,Aa=x.vertexTextures,Xa=x.precision,Va={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},vb="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(sb,ad,Bc,rd,Jc){var vd=rd.fog;rd=sb.isMeshStandardMaterial?rd.environment:null;rd=z.get(sb.envMap||rd);var Vc=Va[sb.type];if(Jc.isSkinnedMesh){var Md=Jc.skeleton.bones;if(ea)Md=1024;else{var de=Math.min(Math.floor((sa-20)/4),Md.length);de<Md.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Md.length+" bones. This GPU supports "+de+"."),Md=0):Md=de}}else Md=0;null!==sb.precision&&(Xa=x.getMaxPrecision(sb.precision),Xa!==sb.precision&&console.warn("THREE.WebGLProgram.getParameters:",
sb.precision,"not supported, using",Xa,"instead."));if(Vc){var Id=Ft[Vc];de=Id.vertexShader;Id=Id.fragmentShader}else de=sb.vertexShader,Id=sb.fragmentShader;var Ld=u.getRenderTarget();return{isWebGL2:W,shaderID:Vc,shaderName:sb.type,vertexShader:de,fragmentShader:Id,defines:sb.defines,isRawShaderMaterial:!0===sb.isRawShaderMaterial,glslVersion:sb.glslVersion,precision:Xa,instancing:!0===Jc.isInstancedMesh,instancingColor:!0===Jc.isInstancedMesh&&null!==Jc.instanceColor,supportsVertexTextures:Aa,
outputEncoding:null!==Ld?N(Ld.texture):u.outputEncoding,map:!!sb.map,mapEncoding:N(sb.map),matcap:!!sb.matcap,matcapEncoding:N(sb.matcap),envMap:!!rd,envMapMode:rd&&rd.mapping,envMapEncoding:N(rd),envMapCubeUV:!!rd&&(306===rd.mapping||307===rd.mapping),lightMap:!!sb.lightMap,lightMapEncoding:N(sb.lightMap),aoMap:!!sb.aoMap,emissiveMap:!!sb.emissiveMap,emissiveMapEncoding:N(sb.emissiveMap),bumpMap:!!sb.bumpMap,normalMap:!!sb.normalMap,objectSpaceNormalMap:1===sb.normalMapType,tangentSpaceNormalMap:0===
sb.normalMapType,clearcoatMap:!!sb.clearcoatMap,clearcoatRoughnessMap:!!sb.clearcoatRoughnessMap,clearcoatNormalMap:!!sb.clearcoatNormalMap,displacementMap:!!sb.displacementMap,roughnessMap:!!sb.roughnessMap,metalnessMap:!!sb.metalnessMap,specularMap:!!sb.specularMap,alphaMap:!!sb.alphaMap,gradientMap:!!sb.gradientMap,sheen:!!sb.sheen,transmissionMap:!!sb.transmissionMap,combine:sb.combine,vertexTangents:sb.normalMap&&sb.vertexTangents,vertexColors:sb.vertexColors,vertexUvs:!!sb.map||!!sb.bumpMap||
!!sb.normalMap||!!sb.specularMap||!!sb.alphaMap||!!sb.emissiveMap||!!sb.roughnessMap||!!sb.metalnessMap||!!sb.clearcoatMap||!!sb.clearcoatRoughnessMap||!!sb.clearcoatNormalMap||!!sb.displacementMap||!!sb.transmissionMap,uvsVertexOnly:!(sb.map||sb.bumpMap||sb.normalMap||sb.specularMap||sb.alphaMap||sb.emissiveMap||sb.roughnessMap||sb.metalnessMap||sb.clearcoatNormalMap||sb.transmissionMap)&&!!sb.displacementMap,fog:!!vd,useFog:sb.fog,fogExp2:vd&&vd.isFogExp2,flatShading:sb.flatShading,sizeAttenuation:sb.sizeAttenuation,
logarithmicDepthBuffer:Y,skinning:sb.skinning&&0<Md,maxBones:Md,useVertexTexture:ea,morphTargets:sb.morphTargets,morphNormals:sb.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:ad.directional.length,numPointLights:ad.point.length,numSpotLights:ad.spot.length,numRectAreaLights:ad.rectArea.length,numHemiLights:ad.hemi.length,numDirLightShadows:ad.directionalShadowMap.length,numPointLightShadows:ad.pointShadowMap.length,numSpotLightShadows:ad.spotShadowMap.length,
numClippingPlanes:H.numPlanes,numClipIntersection:H.numIntersection,dithering:sb.dithering,shadowMapEnabled:u.shadowMap.enabled&&0<Bc.length,shadowMapType:u.shadowMap.type,toneMapping:sb.toneMapped?u.toneMapping:0,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:sb.premultipliedAlpha,alphaTest:sb.alphaTest,doubleSided:2===sb.side,flipSided:1===sb.side,depthPacking:void 0!==sb.depthPacking?sb.depthPacking:!1,index0AttributeName:sb.index0AttributeName,extensionDerivatives:sb.extensions&&
sb.extensions.derivatives,extensionFragDepth:sb.extensions&&sb.extensions.fragDepth,extensionDrawBuffers:sb.extensions&&sb.extensions.drawBuffers,extensionShaderTextureLOD:sb.extensions&&sb.extensions.shaderTextureLOD,rendererExtensionFragDepth:W||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:W||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:W||t.has("EXT_shader_texture_lod"),customProgramCacheKey:sb.customProgramCacheKey()}},getProgramCacheKey:function(sb){var ad=[];sb.shaderID?
ad.push(sb.shaderID):(ad.push(sb.fragmentShader),ad.push(sb.vertexShader));if(void 0!==sb.defines)for(var Bc in sb.defines)ad.push(Bc),ad.push(sb.defines[Bc]);if(!1===sb.isRawShaderMaterial){for(Bc=0;Bc<vb.length;Bc++)ad.push(sb[vb[Bc]]);ad.push(u.outputEncoding);ad.push(u.gammaFactor)}ad.push(sb.customProgramCacheKey);return ad.join()},getUniforms:function(sb){var ad=Va[sb.type];return ad?mca.clone(Ft[ad].uniforms):sb.uniforms},acquireProgram:function(sb,ad){for(var Bc,rd=0,Jc=T.length;rd<Jc;rd++){var vd=
T[rd];if(vd.cacheKey===ad){Bc=vd;++Bc.usedTimes;break}}void 0===Bc&&(Bc=new md(u,ad,sb,C),T.push(Bc));return Bc},releaseProgram:function(sb){if(0===--sb.usedTimes){var ad=T.indexOf(sb);T[ad]=T[T.length-1];T.pop();sb.destroy()}},programs:T}}function me(){var u=new WeakMap;return{get:function(z){var t=u.get(z);void 0===t&&(t={},u.set(z,t));return t},remove:function(z){u.delete(z)},update:function(z,t,x){u.get(z)[t]=x},dispose:function(){u=new WeakMap}}}function He(u,z){return u.groupOrder!==z.groupOrder?
u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.program!==z.program?u.program.id-z.program.id:u.material.id!==z.material.id?u.material.id-z.material.id:u.z!==z.z?u.z-z.z:u.id-z.id}function Zf(u,z){return u.groupOrder!==z.groupOrder?u.groupOrder-z.groupOrder:u.renderOrder!==z.renderOrder?u.renderOrder-z.renderOrder:u.z!==z.z?z.z-u.z:u.id-z.id}function Xf(u){function z(T,W,Y,ea,sa,Aa){var Xa=t[x],Va=u.get(Y);void 0===Xa?(Xa={id:T.id,object:T,geometry:W,material:Y,
program:Va.program||N,groupOrder:ea,renderOrder:T.renderOrder,z:sa,group:Aa},t[x]=Xa):(Xa.id=T.id,Xa.object=T,Xa.geometry=W,Xa.material=Y,Xa.program=Va.program||N,Xa.groupOrder=ea,Xa.renderOrder=T.renderOrder,Xa.z=sa,Xa.group=Aa);x++;return Xa}var t=[],x=0,C=[],H=[],N={id:-1};return{opaque:C,transparent:H,init:function(){x=0;C.length=0;H.length=0},push:function(T,W,Y,ea,sa,Aa){T=z(T,W,Y,ea,sa,Aa);(!0===Y.transparent?H:C).push(T)},unshift:function(T,W,Y,ea,sa,Aa){T=z(T,W,Y,ea,sa,Aa);(!0===Y.transparent?
H:C).unshift(T)},finish:function(){for(var T=x,W=t.length;T<W;T++){var Y=t[T];if(null===Y.id)break;Y.id=null;Y.object=null;Y.geometry=null;Y.material=null;Y.program=null;Y.group=null}},sort:function(T,W){1<C.length&&C.sort(T||He);1<H.length&&H.sort(W||Zf)}}}function bf(u){var z=new WeakMap;return{get:function(t,x){var C=z.get(t);if(void 0===C){var H=new Xf(u);z.set(t,new WeakMap);z.get(t).set(x,H)}else H=C.get(x),void 0===H&&(H=new Xf(u),C.set(x,H));return H},dispose:function(){z=new WeakMap}}}function $f(){var u=
{};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={direction:new wc,color:new Hg};break;case "SpotLight":t={position:new wc,direction:new wc,color:new Hg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":t={position:new wc,color:new Hg,distance:0,decay:0};break;case "HemisphereLight":t={direction:new wc,skyColor:new Hg,groundColor:new Hg};break;case "RectAreaLight":t={color:new Hg,position:new wc,halfWidth:new wc,halfHeight:new wc}}return u[z.id]=
t}}}function Jo(){var u={};return{get:function(z){if(void 0!==u[z.id])return u[z.id];switch(z.type){case "DirectionalLight":var t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cf};break;case "SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cf};break;case "PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cf,shadowCameraNear:1,shadowCameraFar:1E3}}return u[z.id]=t}}}function eV(u,z){return(z.castShadow?1:0)-(u.castShadow?
1:0)}function fV(){for(var u=new $f,z=Jo(),t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},x=0;9>
x;x++)t.probe.push(new wc);var C=new wc,H=new uj,N=new uj;return{setup:function(T,W,Y){for(var ea=W=0,sa=0,Aa=0;9>Aa;Aa++)t.probe[Aa].set(0,0,0);var Xa=Aa=0,Va=0,vb=0,sb=0,ad=0,Bc=0,rd=0;Y=Y.matrixWorldInverse;T.sort(eV);for(var Jc=0,vd=T.length;Jc<vd;Jc++){var Vc=T[Jc],Md=Vc.color,de=Vc.intensity,Id=Vc.distance,Ld=Vc.shadow&&Vc.shadow.map?Vc.shadow.map.texture:null;if(Vc.isAmbientLight)W+=Md.r*de,ea+=Md.g*de,sa+=Md.b*de;else if(Vc.isLightProbe)for(Ld=0;9>Ld;Ld++)t.probe[Ld].addScaledVector(Vc.sh.coefficients[Ld],
de);else if(Vc.isDirectionalLight){de=u.get(Vc);de.color.copy(Vc.color).multiplyScalar(Vc.intensity);de.direction.setFromMatrixPosition(Vc.matrixWorld);C.setFromMatrixPosition(Vc.target.matrixWorld);de.direction.sub(C);de.direction.transformDirection(Y);if(Vc.castShadow){var Le=Vc.shadow;Md=z.get(Vc);Md.shadowBias=Le.bias;Md.shadowNormalBias=Le.normalBias;Md.shadowRadius=Le.radius;Md.shadowMapSize=Le.mapSize;t.directionalShadow[Aa]=Md;t.directionalShadowMap[Aa]=Ld;t.directionalShadowMatrix[Aa]=Vc.shadow.matrix;
ad++}t.directional[Aa]=de;Aa++}else Vc.isSpotLight?(Le=u.get(Vc),Le.position.setFromMatrixPosition(Vc.matrixWorld),Le.position.applyMatrix4(Y),Le.color.copy(Md).multiplyScalar(de),Le.distance=Id,Le.direction.setFromMatrixPosition(Vc.matrixWorld),C.setFromMatrixPosition(Vc.target.matrixWorld),Le.direction.sub(C),Le.direction.transformDirection(Y),Le.coneCos=Math.cos(Vc.angle),Le.penumbraCos=Math.cos(Vc.angle*(1-Vc.penumbra)),Le.decay=Vc.decay,Vc.castShadow&&(de=Vc.shadow,Md=z.get(Vc),Md.shadowBias=
de.bias,Md.shadowNormalBias=de.normalBias,Md.shadowRadius=de.radius,Md.shadowMapSize=de.mapSize,t.spotShadow[Va]=Md,t.spotShadowMap[Va]=Ld,t.spotShadowMatrix[Va]=Vc.shadow.matrix,rd++),t.spot[Va]=Le,Va++):Vc.isRectAreaLight?(Ld=u.get(Vc),Ld.color.copy(Md).multiplyScalar(de),Ld.position.setFromMatrixPosition(Vc.matrixWorld),Ld.position.applyMatrix4(Y),N.identity(),H.copy(Vc.matrixWorld),H.premultiply(Y),N.extractRotation(H),Ld.halfWidth.set(.5*Vc.width,0,0),Ld.halfHeight.set(0,.5*Vc.height,0),Ld.halfWidth.applyMatrix4(N),
Ld.halfHeight.applyMatrix4(N),t.rectArea[vb]=Ld,vb++):Vc.isPointLight?(de=u.get(Vc),de.position.setFromMatrixPosition(Vc.matrixWorld),de.position.applyMatrix4(Y),de.color.copy(Vc.color).multiplyScalar(Vc.intensity),de.distance=Vc.distance,de.decay=Vc.decay,Vc.castShadow&&(Le=Vc.shadow,Md=z.get(Vc),Md.shadowBias=Le.bias,Md.shadowNormalBias=Le.normalBias,Md.shadowRadius=Le.radius,Md.shadowMapSize=Le.mapSize,Md.shadowCameraNear=Le.camera.near,Md.shadowCameraFar=Le.camera.far,t.pointShadow[Xa]=Md,t.pointShadowMap[Xa]=
Ld,t.pointShadowMatrix[Xa]=Vc.shadow.matrix,Bc++),t.point[Xa]=de,Xa++):Vc.isHemisphereLight&&(Ld=u.get(Vc),Ld.direction.setFromMatrixPosition(Vc.matrixWorld),Ld.direction.transformDirection(Y),Ld.direction.normalize(),Ld.skyColor.copy(Vc.color).multiplyScalar(de),Ld.groundColor.copy(Vc.groundColor).multiplyScalar(de),t.hemi[sb]=Ld,sb++)}0<vb&&(t.rectAreaLTC1=vg.LTC_1,t.rectAreaLTC2=vg.LTC_2);t.ambient[0]=W;t.ambient[1]=ea;t.ambient[2]=sa;T=t.hash;if(T.directionalLength!==Aa||T.pointLength!==Xa||T.spotLength!==
Va||T.rectAreaLength!==vb||T.hemiLength!==sb||T.numDirectionalShadows!==ad||T.numPointShadows!==Bc||T.numSpotShadows!==rd)t.directional.length=Aa,t.spot.length=Va,t.rectArea.length=vb,t.point.length=Xa,t.hemi.length=sb,t.directionalShadow.length=ad,t.directionalShadowMap.length=ad,t.pointShadow.length=Bc,t.pointShadowMap.length=Bc,t.spotShadow.length=rd,t.spotShadowMap.length=rd,t.directionalShadowMatrix.length=ad,t.pointShadowMatrix.length=Bc,t.spotShadowMatrix.length=rd,T.directionalLength=Aa,T.pointLength=
Xa,T.spotLength=Va,T.rectAreaLength=vb,T.hemiLength=sb,T.numDirectionalShadows=ad,T.numPointShadows=Bc,T.numSpotShadows=rd,t.version=Wua++},state:t}}function nca(){var u=new fV,z=[],t=[];return{init:function(){z.length=0;t.length=0},state:{lightsArray:z,shadowsArray:t,lights:u},setupLights:function(x){u.setup(z,t,x)},pushLight:function(x){z.push(x)},pushShadow:function(x){t.push(x)}}}function Xua(){var u=new WeakMap;return{get:function(z,t){if(!1===u.has(z)){var x=new nca;u.set(z,new WeakMap);u.get(z).set(t,
x)}else!1===u.get(z).has(t)?(x=new nca,u.get(z).set(t,x)):x=u.get(z).get(t);return x},dispose:function(){u=new WeakMap}}}function Az(u){M.call(this||p);(this||p).type="MeshDepthMaterial";(this||p).depthPacking=3200;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;this.setValues(u)}function Bz(u){M.call(this||
p);(this||p).type="MeshDistanceMaterial";(this||p).referencePosition=new wc;(this||p).nearDistance=1;(this||p).farDistance=1E3;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).map=null;(this||p).alphaMap=null;(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).fog=!1;this.setValues(u)}function oca(u,z,t){function x(Jc,vd,Vc){Vc=Jc<<0|vd<<1|Vc<<2;var Md=sa[Vc];void 0===Md&&(Md=new Az({depthPacking:3201,morphTargets:Jc,skinning:vd}),sa[Vc]=Md);
return Md}function C(Jc,vd,Vc){Vc=Jc<<0|vd<<1|Vc<<2;var Md=Aa[Vc];void 0===Md&&(Md=new Bz({morphTargets:Jc,skinning:vd}),Aa[Vc]=Md);return Md}function H(Jc,vd,Vc,Md,de,Id,Ld){var Le=x,qf=Jc.customDepthMaterial;!0===Md.isPointLight&&(Le=C,qf=Jc.customDistanceMaterial);void 0===qf?(qf=!1,!0===Vc.morphTargets&&(qf=vd.morphAttributes&&vd.morphAttributes.position&&0<vd.morphAttributes.position.length),vd=!1,!0===Jc.isSkinnedMesh&&(!0===Vc.skinning?vd=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",
Jc)),Jc=Le(qf,vd,!0===Jc.isInstancedMesh)):Jc=qf;u.localClippingEnabled&&!0===Vc.clipShadows&&0!==Vc.clippingPlanes.length&&(qf=Jc.uuid,Le=Vc.uuid,vd=Xa[qf],void 0===vd&&(vd={},Xa[qf]=vd),qf=vd[Le],void 0===qf&&(qf=Jc.clone(),vd[Le]=qf),Jc=qf);Jc.visible=Vc.visible;Jc.wireframe=Vc.wireframe;Jc.side=3===Ld?null!==Vc.shadowSide?Vc.shadowSide:Vc.side:null!==Vc.shadowSide?Vc.shadowSide:Va[Vc.side];Jc.clipShadows=Vc.clipShadows;Jc.clippingPlanes=Vc.clippingPlanes;Jc.clipIntersection=Vc.clipIntersection;
Jc.wireframeLinewidth=Vc.wireframeLinewidth;Jc.linewidth=Vc.linewidth;!0===Md.isPointLight&&!0===Jc.isMeshDistanceMaterial&&(Jc.referencePosition.setFromMatrixPosition(Md.matrixWorld),Jc.nearDistance=de,Jc.farDistance=Id);return Jc}function N(Jc,vd,Vc,Md,de){if(!1!==Jc.visible){if(Jc.layers.test(vd.layers)&&(Jc.isMesh||Jc.isLine||Jc.isPoints)&&(Jc.castShadow||Jc.receiveShadow&&3===de)&&(!Jc.frustumCulled||T.intersectsObject(Jc))){Jc.modelViewMatrix.multiplyMatrices(Vc.matrixWorldInverse,Jc.matrixWorld);
var Id=z.update(Jc),Ld=Jc.material;if(Array.isArray(Ld))for(var Le=Id.groups,qf=0,zg=Le.length;qf<zg;qf++){var Pf=Le[qf],kg=Ld[Pf.materialIndex];kg&&kg.visible&&(kg=H(Jc,Id,kg,Md,Vc.near,Vc.far,de),u.renderBufferDirect(Vc,null,Id,kg,Jc,Pf))}else Ld.visible&&(Ld=H(Jc,Id,Ld,Md,Vc.near,Vc.far,de),u.renderBufferDirect(Vc,null,Id,Ld,Jc,null))}Jc=Jc.children;Id=0;for(Ld=Jc.length;Id<Ld;Id++)N(Jc[Id],vd,Vc,Md,de)}}var T=new AI,W=new cf,Y=new cf,ea=new $k,sa=[],Aa=[],Xa={},Va={0:1,1:0,2:2},vb=new La({defines:{SAMPLE_RATE:.25,
HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new cf},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
sb=vb.clone();sb.defines.HORIZONAL_PASS=1;var ad=new ya;ad.setAttribute("position",new S(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Bc=new jb(ad,vb),rd=this||p;(this||p).enabled=!1;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p).type=1;(this||p).render=function(Jc,vd,Vc){if(!1!==rd.enabled&&(!1!==rd.autoUpdate||!1!==rd.needsUpdate)&&0!==Jc.length){var Md=u.getRenderTarget(),de=u.getActiveCubeFace(),Id=u.getActiveMipmapLevel(),Ld=u.state;Ld.setBlending(0);Ld.buffers.color.setClear(1,
1,1,1);Ld.buffers.depth.setTest(!0);Ld.setScissorTest(!1);for(var Le=0,qf=Jc.length;Le<qf;Le++){var zg=Jc[Le],Pf=zg.shadow;if(void 0===Pf)console.warn("THREE.WebGLShadowMap:",zg,"has no shadow.");else if(!1!==Pf.autoUpdate||!1!==Pf.needsUpdate){W.copy(Pf.mapSize);var kg=Pf.getFrameExtents();W.multiply(kg);Y.copy(Pf.mapSize);if(W.x>t||W.y>t)W.x>t&&(Y.x=Math.floor(t/kg.x),W.x=Y.x*kg.x,Pf.mapSize.x=Y.x),W.y>t&&(Y.y=Math.floor(t/kg.y),W.y=Y.y*kg.y,Pf.mapSize.y=Y.y);null!==Pf.map||Pf.isPointLightShadow||
3!==(this||p).type||(kg={minFilter:1006,magFilter:1006,format:1023},Pf.map=new v(W.x,W.y,kg),Pf.map.texture.name=zg.name+".shadowMap",Pf.mapPass=new v(W.x,W.y,kg),Pf.camera.updateProjectionMatrix());null===Pf.map&&(Pf.map=new v(W.x,W.y,{minFilter:1003,magFilter:1003,format:1023}),Pf.map.texture.name=zg.name+".shadowMap",Pf.camera.updateProjectionMatrix());u.setRenderTarget(Pf.map);u.clear();kg=Pf.getViewportCount();for(var Bh=0;Bh<kg;Bh++){var bh=Pf.getViewport(Bh);ea.set(Y.x*bh.x,Y.y*bh.y,Y.x*bh.z,
Y.y*bh.w);Ld.viewport(ea);Pf.updateMatrices(zg,Bh);T=Pf.getFrustum();N(vd,Vc,Pf.camera,zg,(this||p).type)}Pf.isPointLightShadow||3!==(this||p).type||(zg=Pf,kg=Vc,Bh=z.update(Bc),vb.uniforms.shadow_pass.value=zg.map.texture,vb.uniforms.resolution.value=zg.mapSize,vb.uniforms.radius.value=zg.radius,u.setRenderTarget(zg.mapPass),u.clear(),u.renderBufferDirect(kg,null,Bh,vb,Bc,null),sb.uniforms.shadow_pass.value=zg.mapPass.texture,sb.uniforms.resolution.value=zg.mapSize,sb.uniforms.radius.value=zg.radius,
u.setRenderTarget(zg.map),u.clear(),u.renderBufferDirect(kg,null,Bh,sb,Bc,null));Pf.needsUpdate=!1}}rd.needsUpdate=!1;u.setRenderTarget(Md,de,Id)}}}function Yua(u,z,t){function x(od,$e,vf){var Wg=new Uint8Array(4),ag=u.createTexture();u.bindTexture(od,ag);u.texParameteri(od,10241,9728);u.texParameteri(od,10240,9728);for(od=0;od<vf;od++)u.texImage2D($e+od,0,6408,1,1,0,6408,5121,Wg);return ag}function C(od){!0!==sb[od]&&(u.enable(od),sb[od]=!0)}function H(od){!1!==sb[od]&&(u.disable(od),sb[od]=!1)}
function N(od,$e,vf,Wg,ag,ji,ei,Ci){if(0===od)Bc&&(H(3042),Bc=!1);else if(Bc||(C(3042),Bc=!0),5!==od){if(od!==rd||Ci!==Ld){if(100!==Jc||100!==Md)u.blendEquation(32774),Md=Jc=100;if(Ci)switch(od){case 1:u.blendFuncSeparate(1,771,1,771);break;case 2:u.blendFunc(1,1);break;case 3:u.blendFuncSeparate(0,0,769,771);break;case 4:u.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",od)}else switch(od){case 1:u.blendFuncSeparate(770,771,1,771);break;case 2:u.blendFunc(770,
1);break;case 3:u.blendFunc(0,769);break;case 4:u.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",od)}Id=de=Vc=vd=null;rd=od;Ld=Ci}}else{ag=ag||$e;ji=ji||vf;ei=ei||Wg;if($e!==Jc||ag!==Md)u.blendEquationSeparate(fd[$e],fd[ag]),Jc=$e,Md=ag;if(vf!==vd||Wg!==Vc||ji!==de||ei!==Id)u.blendFuncSeparate(Me[vf],Me[Wg],Me[ji],Me[ei]),vd=vf,Vc=Wg,de=ji,Id=ei;rd=od;Ld=null}}function T(od){Le!==od&&(od?u.frontFace(2304):u.frontFace(2305),Le=od)}function W(od){0!==od?(C(2884),
od!==qf&&(1===od?u.cullFace(1029):2===od?u.cullFace(1028):u.cullFace(1032))):H(2884);qf=od}function Y(od,$e,vf){if(od){if(C(32823),Pf!==$e||kg!==vf)u.polygonOffset($e,vf),Pf=$e,kg=vf}else H(32823)}function ea(od){void 0===od&&(od=33984+Bh-1);Nh!==od&&(u.activeTexture(od),Nh=od)}var sa,Aa;t=t.isWebGL2;var Xa=new function(){var od=!1,$e=new $k,vf=null,Wg=new $k(0,0,0,0);return{setMask:function(ag){vf===ag||od||(u.colorMask(ag,ag,ag,ag),vf=ag)},setLocked:function(ag){od=ag},setClear:function(ag,ji,ei,
Ci,ui){!0===ui&&(ag*=Ci,ji*=Ci,ei*=Ci);$e.set(ag,ji,ei,Ci);!1===Wg.equals($e)&&(u.clearColor(ag,ji,ei,Ci),Wg.copy($e))},reset:function(){od=!1;vf=null;Wg.set(-1,0,0,0)}}},Va=new function(){var od=!1,$e=null,vf=null,Wg=null;return{setTest:function(ag){ag?C(2929):H(2929)},setMask:function(ag){$e===ag||od||(u.depthMask(ag),$e=ag)},setFunc:function(ag){if(vf!==ag){if(ag)switch(ag){case 0:u.depthFunc(512);break;case 1:u.depthFunc(519);break;case 2:u.depthFunc(513);break;case 3:u.depthFunc(515);break;case 4:u.depthFunc(514);
break;case 5:u.depthFunc(518);break;case 6:u.depthFunc(516);break;case 7:u.depthFunc(517);break;default:u.depthFunc(515)}else u.depthFunc(515);vf=ag}},setLocked:function(ag){od=ag},setClear:function(ag){Wg!==ag&&(u.clearDepth(ag),Wg=ag)},reset:function(){od=!1;Wg=vf=$e=null}}},vb=new function(){var od=!1,$e=null,vf=null,Wg=null,ag=null,ji=null,ei=null,Ci=null,ui=null;return{setTest:function(Ik){od||(Ik?C(2960):H(2960))},setMask:function(Ik){$e===Ik||od||(u.stencilMask(Ik),$e=Ik)},setFunc:function(Ik,
Ge,qg){if(vf!==Ik||Wg!==Ge||ag!==qg)u.stencilFunc(Ik,Ge,qg),vf=Ik,Wg=Ge,ag=qg},setOp:function(Ik,Ge,qg){if(ji!==Ik||ei!==Ge||Ci!==qg)u.stencilOp(Ik,Ge,qg),ji=Ik,ei=Ge,Ci=qg},setLocked:function(Ik){od=Ik},setClear:function(Ik){ui!==Ik&&(u.clearStencil(Ik),ui=Ik)},reset:function(){od=!1;ui=Ci=ei=ji=ag=Wg=vf=$e=null}}},sb={},ad=null,Bc=null,rd=null,Jc=null,vd=null,Vc=null,Md=null,de=null,Id=null,Ld=!1,Le=null,qf=null,zg=null,Pf=null,kg=null,Bh=u.getParameter(35661),bh=!1,$i=0;$i=u.getParameter(7938);
-1!==$i.indexOf("WebGL")?($i=parseFloat(/^WebGL ([0-9])/.exec($i)[1]),bh=1<=$i):-1!==$i.indexOf("OpenGL ES")&&($i=parseFloat(/^OpenGL ES ([0-9])/.exec($i)[1]),bh=2<=$i);var Nh=null,jk={},Jk=new $k,Ql=new $k,Fc={};Fc[3553]=x(3553,3553,1);Fc[34067]=x(34067,34069,6);Xa.setClear(0,0,0,1);Va.setClear(1);vb.setClear(0);C(2929);Va.setFunc(3);T(!1);W(1);C(2884);N(0);var fd=(sa={},sa[100]=32774,sa[101]=32778,sa[102]=32779,sa);t?(fd[103]=32775,fd[104]=32776):(z=z.get("EXT_blend_minmax"),null!==z&&(fd[103]=
z.MIN_EXT,fd[104]=z.MAX_EXT));var Me=(Aa={},Aa[200]=0,Aa[201]=1,Aa[202]=768,Aa[204]=770,Aa[210]=776,Aa[208]=774,Aa[206]=772,Aa[203]=769,Aa[205]=771,Aa[209]=775,Aa[207]=773,Aa);return{buffers:{color:Xa,depth:Va,stencil:vb},enable:C,disable:H,useProgram:function(od){return ad!==od?(u.useProgram(od),ad=od,!0):!1},setBlending:N,setMaterial:function(od,$e){2===od.side?H(2884):C(2884);var vf=1===od.side;$e&&(vf=!vf);T(vf);1===od.blending&&!1===od.transparent?N(0):N(od.blending,od.blendEquation,od.blendSrc,
od.blendDst,od.blendEquationAlpha,od.blendSrcAlpha,od.blendDstAlpha,od.premultipliedAlpha);Va.setFunc(od.depthFunc);Va.setTest(od.depthTest);Va.setMask(od.depthWrite);Xa.setMask(od.colorWrite);$e=od.stencilWrite;vb.setTest($e);$e&&(vb.setMask(od.stencilWriteMask),vb.setFunc(od.stencilFunc,od.stencilRef,od.stencilFuncMask),vb.setOp(od.stencilFail,od.stencilZFail,od.stencilZPass));Y(od.polygonOffset,od.polygonOffsetFactor,od.polygonOffsetUnits)},setFlipSided:T,setCullFace:W,setLineWidth:function(od){od!==
zg&&(bh&&u.lineWidth(od),zg=od)},setPolygonOffset:Y,setScissorTest:function(od){od?C(3089):H(3089)},activeTexture:ea,bindTexture:function(od,$e){null===Nh&&ea();var vf=jk[Nh];void 0===vf&&(vf={type:void 0,texture:void 0},jk[Nh]=vf);if(vf.type!==od||vf.texture!==$e)u.bindTexture(od,$e||Fc[od]),vf.type=od,vf.texture=$e},unbindTexture:function(){var od=jk[Nh];void 0!==od&&void 0!==od.type&&(u.bindTexture(od.type,null),od.type=void 0,od.texture=void 0)},compressedTexImage2D:function(){try{u.compressedTexImage2D.apply(u,
arguments)}catch(od){console.error("THREE.WebGLState:",od)}},texImage2D:function(){try{u.texImage2D.apply(u,arguments)}catch(od){console.error("THREE.WebGLState:",od)}},texImage3D:function(){try{u.texImage3D.apply(u,arguments)}catch(od){console.error("THREE.WebGLState:",od)}},scissor:function(od){!1===Jk.equals(od)&&(u.scissor(od.x,od.y,od.z,od.w),Jk.copy(od))},viewport:function(od){!1===Ql.equals(od)&&(u.viewport(od.x,od.y,od.z,od.w),Ql.copy(od))},reset:function(){sb={};Nh=null;jk={};qf=Le=rd=ad=
null;Xa.reset();Va.reset();vb.reset()}}}function Zua(u,z,t,x,C,H,N){function T(Fc,fd){return bh?new OffscreenCanvas(Fc,fd):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function W(Fc,fd,Me,od){var $e=1;if(Fc.width>od||Fc.height>od)$e=od/Math.max(Fc.width,Fc.height);if(1>$e||!0===fd){if("undefined"!==typeof HTMLImageElement&&Fc instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&Fc instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&Fc instanceof ImageBitmap)return od=
fd?ti.floorPowerOfTwo:Math.floor,fd=od($e*Fc.width),$e=od($e*Fc.height),void 0===Bh&&(Bh=T(fd,$e)),Me=Me?T(fd,$e):Bh,Me.width=fd,Me.height=$e,Me.getContext("2d").drawImage(Fc,0,0,fd,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fc.width+"x"+Fc.height+") to ("+fd+"x"+$e+")."),Me;"data"in Fc&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fc.width+"x"+Fc.height+").")}return Fc}function Y(Fc){return ti.isPowerOfTwo(Fc.width)&&ti.isPowerOfTwo(Fc.height)}
function ea(Fc,fd){return Fc.generateMipmaps&&fd&&1003!==Fc.minFilter&&1006!==Fc.minFilter}function sa(Fc,fd,Me,od){u.generateMipmap(Fc);x.get(fd).__maxMipLevel=Math.log(Math.max(Me,od))*Math.LOG2E}function Aa(Fc,fd,Me){if(!1===Ld)return fd;if(null!==Fc){if(void 0!==u[Fc])return u[Fc];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Fc+"'")}Fc=fd;6403===fd&&(5126===Me&&(Fc=33326),5131===Me&&(Fc=33325),5121===Me&&(Fc=33321));6407===fd&&(5126===Me&&(Fc=34837),
5131===Me&&(Fc=34843),5121===Me&&(Fc=32849));6408===fd&&(5126===Me&&(Fc=34836),5131===Me&&(Fc=34842),5121===Me&&(Fc=32856));33325!==Fc&&33326!==Fc&&34842!==Fc&&34836!==Fc||z.get("EXT_color_buffer_float");return Fc}function Xa(Fc){return 1003===Fc||1004===Fc||1005===Fc?9728:9729}function Va(Fc){Fc=Fc.target;Fc.removeEventListener("dispose",Va);var fd=x.get(Fc);void 0!==fd.__webglInit&&(u.deleteTexture(fd.__webglTexture),x.remove(Fc));Fc.isVideoTexture&&kg.delete(Fc);N.memory.textures--}function vb(Fc){Fc=
Fc.target;Fc.removeEventListener("dispose",vb);var fd=x.get(Fc),Me=x.get(Fc.texture);if(Fc){void 0!==Me.__webglTexture&&u.deleteTexture(Me.__webglTexture);Fc.depthTexture&&Fc.depthTexture.dispose();if(Fc.isWebGLCubeRenderTarget)for(Me=0;6>Me;Me++)u.deleteFramebuffer(fd.__webglFramebuffer[Me]),fd.__webglDepthbuffer&&u.deleteRenderbuffer(fd.__webglDepthbuffer[Me]);else u.deleteFramebuffer(fd.__webglFramebuffer),fd.__webglDepthbuffer&&u.deleteRenderbuffer(fd.__webglDepthbuffer),fd.__webglMultisampledFramebuffer&&
u.deleteFramebuffer(fd.__webglMultisampledFramebuffer),fd.__webglColorRenderbuffer&&u.deleteRenderbuffer(fd.__webglColorRenderbuffer),fd.__webglDepthRenderbuffer&&u.deleteRenderbuffer(fd.__webglDepthRenderbuffer);x.remove(Fc.texture);x.remove(Fc)}N.memory.textures--}function sb(Fc,fd){var Me=x.get(Fc);if(Fc.isVideoTexture){var od=N.render.frame;kg.get(Fc)!==od&&(kg.set(Fc,od),Fc.update())}if(0<Fc.version&&Me.__version!==Fc.version)if(od=Fc.image,void 0===od)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
else if(!1===od.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Jc(Me,Fc,fd);return}t.activeTexture(33984+fd);t.bindTexture(3553,Me.__webglTexture)}function ad(Fc,fd){var Me=x.get(Fc);if(0<Fc.version&&Me.__version!==Fc.version){if(6===Fc.image.length){rd(Me,Fc);t.activeTexture(33984+fd);t.bindTexture(34067,Me.__webglTexture);u.pixelStorei(37440,Fc.flipY);var od=Fc&&(Fc.isCompressedTexture||Fc.image[0].isCompressedTexture),$e=Fc.image[0]&&Fc.image[0].isDataTexture;
fd=[];for(var vf=0;6>vf;vf++)fd[vf]=od||$e?$e?Fc.image[vf].image:Fc.image[vf]:W(Fc.image[vf],!1,!0,qf);vf=fd[0];var Wg=Y(vf)||Ld,ag=H.convert(Fc.format),ji=H.convert(Fc.type),ei=Aa(Fc.internalFormat,ag,ji);Bc(34067,Fc,Wg);if(od){for($e=0;6>$e;$e++){var Ci=fd[$e].mipmaps;for(od=0;od<Ci.length;od++){var ui=Ci[od];1023!==Fc.format&&1022!==Fc.format?null!==ag?t.compressedTexImage2D(34069+$e,od,ei,ui.width,ui.height,0,ui.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
t.texImage2D(34069+$e,od,ei,ui.width,ui.height,0,ag,ji,ui.data)}}Me.__maxMipLevel=Ci.length-1}else{Ci=Fc.mipmaps;for(od=0;6>od;od++)if($e)for(t.texImage2D(34069+od,0,ei,fd[od].width,fd[od].height,0,ag,ji,fd[od].data),ui=0;ui<Ci.length;ui++){var Ik=Ci[ui].image[od].image;t.texImage2D(34069+od,ui+1,ei,Ik.width,Ik.height,0,ag,ji,Ik.data)}else for(t.texImage2D(34069+od,0,ei,ag,ji,fd[od]),ui=0;ui<Ci.length;ui++)t.texImage2D(34069+od,ui+1,ei,ag,ji,Ci[ui].image[od]);Me.__maxMipLevel=Ci.length}ea(Fc,Wg)&&
sa(34067,Fc,vf.width,vf.height);Me.__version=Fc.version;if(Fc.onUpdate)Fc.onUpdate(Fc)}}else t.activeTexture(33984+fd),t.bindTexture(34067,Me.__webglTexture)}function Bc(Fc,fd,Me){Me?(u.texParameteri(Fc,10242,Nh[fd.wrapS]),u.texParameteri(Fc,10243,Nh[fd.wrapT]),32879!==Fc&&35866!==Fc||u.texParameteri(Fc,32882,Nh[fd.wrapR]),u.texParameteri(Fc,10240,jk[fd.magFilter]),u.texParameteri(Fc,10241,jk[fd.minFilter])):(u.texParameteri(Fc,10242,33071),u.texParameteri(Fc,10243,33071),32879!==Fc&&35866!==Fc||
u.texParameteri(Fc,32882,33071),1001===fd.wrapS&&1001===fd.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),u.texParameteri(Fc,10240,Xa(fd.magFilter)),u.texParameteri(Fc,10241,Xa(fd.minFilter)),1003!==fd.minFilter&&1006!==fd.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(Me=z.get("EXT_texture_filter_anisotropic"))||
1015===fd.type&&null===z.get("OES_texture_float_linear")||1016===fd.type&&null===(Ld||z.get("OES_texture_half_float_linear"))||!(1<fd.anisotropy||x.get(fd).__currentAnisotropy)||(u.texParameterf(Fc,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fd.anisotropy,C.getMaxAnisotropy())),x.get(fd).__currentAnisotropy=fd.anisotropy)}function rd(Fc,fd){void 0===Fc.__webglInit&&(Fc.__webglInit=!0,fd.addEventListener("dispose",Va),Fc.__webglTexture=u.createTexture(),N.memory.textures++)}function Jc(Fc,fd,Me){var od=
3553;fd.isDataTexture2DArray&&(od=35866);fd.isDataTexture3D&&(od=32879);rd(Fc,fd);t.activeTexture(33984+Me);t.bindTexture(od,Fc.__webglTexture);u.pixelStorei(37440,fd.flipY);u.pixelStorei(37441,fd.premultiplyAlpha);u.pixelStorei(3317,fd.unpackAlignment);Me=Ld?!1:1001!==fd.wrapS||1001!==fd.wrapT||1003!==fd.minFilter&&1006!==fd.minFilter;Me=Me&&!1===Y(fd.image);Me=W(fd.image,Me,!1,zg);var $e=Y(Me)||Ld,vf=H.convert(fd.format),Wg=H.convert(fd.type),ag=Aa(fd.internalFormat,vf,Wg);Bc(od,fd,$e);var ji=fd.mipmaps;
if(fd.isDepthTexture)ag=6402,Ld?ag=1015===fd.type?36012:1014===fd.type?33190:1020===fd.type?35056:33189:1015===fd.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===fd.format&&6402===ag&&1012!==fd.type&&1014!==fd.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fd.type=1012,Wg=H.convert(fd.type)),1027===fd.format&&6402===ag&&(ag=34041,1020!==fd.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
fd.type=1020,Wg=H.convert(fd.type))),t.texImage2D(3553,0,ag,Me.width,Me.height,0,vf,Wg,null);else if(fd.isDataTexture)if(0<ji.length&&$e){for(var ei=0,Ci=ji.length;ei<Ci;ei++){var ui=ji[ei];t.texImage2D(3553,ei,ag,ui.width,ui.height,0,vf,Wg,ui.data)}fd.generateMipmaps=!1;Fc.__maxMipLevel=ji.length-1}else t.texImage2D(3553,0,ag,Me.width,Me.height,0,vf,Wg,Me.data),Fc.__maxMipLevel=0;else if(fd.isCompressedTexture){ei=0;for(Ci=ji.length;ei<Ci;ei++)ui=ji[ei],1023!==fd.format&&1022!==fd.format?null!==
vf?t.compressedTexImage2D(3553,ei,ag,ui.width,ui.height,0,ui.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ei,ag,ui.width,ui.height,0,vf,Wg,ui.data);Fc.__maxMipLevel=ji.length-1}else if(fd.isDataTexture2DArray)t.texImage3D(35866,0,ag,Me.width,Me.height,Me.depth,0,vf,Wg,Me.data),Fc.__maxMipLevel=0;else if(fd.isDataTexture3D)t.texImage3D(32879,0,ag,Me.width,Me.height,Me.depth,0,vf,Wg,Me.data),Fc.__maxMipLevel=0;
else if(0<ji.length&&$e){ei=0;for(Ci=ji.length;ei<Ci;ei++)ui=ji[ei],t.texImage2D(3553,ei,ag,vf,Wg,ui);fd.generateMipmaps=!1;Fc.__maxMipLevel=ji.length-1}else t.texImage2D(3553,0,ag,vf,Wg,Me),Fc.__maxMipLevel=0;ea(fd,$e)&&sa(od,fd,Me.width,Me.height);Fc.__version=fd.version;if(fd.onUpdate)fd.onUpdate(fd)}function vd(Fc,fd,Me,od){var $e=H.convert(fd.texture.format),vf=H.convert(fd.texture.type),Wg=Aa(fd.texture.internalFormat,$e,vf);t.texImage2D(od,0,Wg,fd.width,fd.height,0,$e,vf,null);u.bindFramebuffer(36160,
Fc);u.framebufferTexture2D(36160,Me,od,x.get(fd.texture).__webglTexture,0);u.bindFramebuffer(36160,null)}function Vc(Fc,fd,Me){u.bindRenderbuffer(36161,Fc);if(fd.depthBuffer&&!fd.stencilBuffer){var od=33189;Me?((Me=fd.depthTexture)&&Me.isDepthTexture&&(1015===Me.type?od=36012:1014===Me.type&&(od=33190)),Me=Md(fd),u.renderbufferStorageMultisample(36161,Me,od,fd.width,fd.height)):u.renderbufferStorage(36161,od,fd.width,fd.height);u.framebufferRenderbuffer(36160,36096,36161,Fc)}else fd.depthBuffer&&
fd.stencilBuffer?(Me?(Me=Md(fd),u.renderbufferStorageMultisample(36161,Me,35056,fd.width,fd.height)):u.renderbufferStorage(36161,34041,fd.width,fd.height),u.framebufferRenderbuffer(36160,33306,36161,Fc)):(Fc=H.convert(fd.texture.format),od=H.convert(fd.texture.type),Fc=Aa(fd.texture.internalFormat,Fc,od),Me?(Me=Md(fd),u.renderbufferStorageMultisample(36161,Me,Fc,fd.width,fd.height)):u.renderbufferStorage(36161,Fc,fd.width,fd.height));u.bindRenderbuffer(36161,null)}function Md(Fc){return Ld&&Fc.isWebGLMultisampleRenderTarget?
Math.min(Pf,Fc.samples):0}var de,Id,Ld=C.isWebGL2,Le=C.maxTextures,qf=C.maxCubemapSize,zg=C.maxTextureSize,Pf=C.maxSamples,kg=new WeakMap,Bh,bh=!1;try{bh="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(Fc){}var $i=0,Nh=(de={},de[1E3]=10497,de[1001]=33071,de[1002]=33648,de),jk=(Id={},Id[1003]=9728,Id[1004]=9984,Id[1005]=9986,Id[1006]=9729,Id[1007]=9985,Id[1008]=9987,Id),Jk=!1,Ql=!1;(this||p).allocateTextureUnit=function(){var Fc=$i;Fc>=Le&&console.warn("THREE.WebGLTextures: Trying to use "+
Fc+" texture units while this GPU supports only "+Le);$i+=1;return Fc};(this||p).resetTextureUnits=function(){$i=0};(this||p).setTexture2D=sb;(this||p).setTexture2DArray=function(Fc,fd){var Me=x.get(Fc);0<Fc.version&&Me.__version!==Fc.version?Jc(Me,Fc,fd):(t.activeTexture(33984+fd),t.bindTexture(35866,Me.__webglTexture))};(this||p).setTexture3D=function(Fc,fd){var Me=x.get(Fc);0<Fc.version&&Me.__version!==Fc.version?Jc(Me,Fc,fd):(t.activeTexture(33984+fd),t.bindTexture(32879,Me.__webglTexture))};
(this||p).setTextureCube=ad;(this||p).setupRenderTarget=function(Fc){var fd=x.get(Fc),Me=x.get(Fc.texture);Fc.addEventListener("dispose",vb);Me.__webglTexture=u.createTexture();N.memory.textures++;var od=!0===Fc.isWebGLCubeRenderTarget,$e=!0===Fc.isWebGLMultisampleRenderTarget,vf=Y(Fc)||Ld;!Ld||1022!==Fc.texture.format||1015!==Fc.texture.type&&1016!==Fc.texture.type||(Fc.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));
if(od)for(fd.__webglFramebuffer=[],$e=0;6>$e;$e++)fd.__webglFramebuffer[$e]=u.createFramebuffer();else if(fd.__webglFramebuffer=u.createFramebuffer(),$e)if(Ld){fd.__webglMultisampledFramebuffer=u.createFramebuffer();fd.__webglColorRenderbuffer=u.createRenderbuffer();u.bindRenderbuffer(36161,fd.__webglColorRenderbuffer);$e=H.convert(Fc.texture.format);var Wg=H.convert(Fc.texture.type);$e=Aa(Fc.texture.internalFormat,$e,Wg);Wg=Md(Fc);u.renderbufferStorageMultisample(36161,Wg,$e,Fc.width,Fc.height);
u.bindFramebuffer(36160,fd.__webglMultisampledFramebuffer);u.framebufferRenderbuffer(36160,36064,36161,fd.__webglColorRenderbuffer);u.bindRenderbuffer(36161,null);Fc.depthBuffer&&(fd.__webglDepthRenderbuffer=u.createRenderbuffer(),Vc(fd.__webglDepthRenderbuffer,Fc,!0));u.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(od){t.bindTexture(34067,Me.__webglTexture);Bc(34067,Fc.texture,vf);for(Me=0;6>Me;Me++)vd(fd.__webglFramebuffer[Me],
Fc,36064,34069+Me);ea(Fc.texture,vf)&&sa(34067,Fc.texture,Fc.width,Fc.height);t.bindTexture(34067,null)}else t.bindTexture(3553,Me.__webglTexture),Bc(3553,Fc.texture,vf),vd(fd.__webglFramebuffer,Fc,36064,3553),ea(Fc.texture,vf)&&sa(3553,Fc.texture,Fc.width,Fc.height),t.bindTexture(3553,null);if(Fc.depthBuffer){fd=x.get(Fc);vf=!0===Fc.isWebGLCubeRenderTarget;if(Fc.depthTexture){if(vf)throw Error("target.depthTexture not supported in Cube render targets");if(Fc&&Fc.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");
u.bindFramebuffer(36160,fd.__webglFramebuffer);if(!Fc.depthTexture||!Fc.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");x.get(Fc.depthTexture).__webglTexture&&Fc.depthTexture.image.width===Fc.width&&Fc.depthTexture.image.height===Fc.height||(Fc.depthTexture.image.width=Fc.width,Fc.depthTexture.image.height=Fc.height,Fc.depthTexture.needsUpdate=!0);sb(Fc.depthTexture,0);fd=x.get(Fc.depthTexture).__webglTexture;if(1026===Fc.depthTexture.format)u.framebufferTexture2D(36160,
36096,3553,fd,0);else if(1027===Fc.depthTexture.format)u.framebufferTexture2D(36160,33306,3553,fd,0);else throw Error("Unknown depthTexture format");}else if(vf)for(fd.__webglDepthbuffer=[],vf=0;6>vf;vf++)u.bindFramebuffer(36160,fd.__webglFramebuffer[vf]),fd.__webglDepthbuffer[vf]=u.createRenderbuffer(),Vc(fd.__webglDepthbuffer[vf],Fc,!1);else u.bindFramebuffer(36160,fd.__webglFramebuffer),fd.__webglDepthbuffer=u.createRenderbuffer(),Vc(fd.__webglDepthbuffer,Fc,!1);u.bindFramebuffer(36160,null)}};
(this||p).updateRenderTargetMipmap=function(Fc){var fd=Fc.texture,Me=Y(Fc)||Ld;if(ea(fd,Me)){Me=Fc.isWebGLCubeRenderTarget?34067:3553;var od=x.get(fd).__webglTexture;t.bindTexture(Me,od);sa(Me,fd,Fc.width,Fc.height);t.bindTexture(Me,null)}};(this||p).updateMultisampleRenderTarget=function(Fc){if(Fc.isWebGLMultisampleRenderTarget)if(Ld){var fd=x.get(Fc);u.bindFramebuffer(36008,fd.__webglMultisampledFramebuffer);u.bindFramebuffer(36009,fd.__webglFramebuffer);var Me=Fc.width,od=Fc.height,$e=16384;Fc.depthBuffer&&
($e|=256);Fc.stencilBuffer&&($e|=1024);u.blitFramebuffer(0,0,Me,od,0,0,Me,od,$e,9728);u.bindFramebuffer(36160,fd.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};(this||p).safeSetTexture2D=function(Fc,fd){Fc&&Fc.isWebGLRenderTarget&&(!1===Jk&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Jk=!0),Fc=Fc.texture);sb(Fc,fd)};(this||p).safeSetTextureCube=
function(Fc,fd){Fc&&Fc.isWebGLCubeRenderTarget&&(!1===Ql&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ql=!0),Fc=Fc.texture);ad(Fc,fd)}}function pca(u,z,t){var x=t.isWebGL2;return{convert:function(C){if(1009===C)return 5121;if(1017===C)return 32819;if(1018===C)return 32820;if(1019===C)return 33635;if(1010===C)return 5120;if(1011===C)return 5122;if(1012===C)return 5123;if(1013===C)return 5124;if(1014===C)return 5125;
if(1015===C)return 5126;if(1016===C){if(x)return 5131;var H=z.get("OES_texture_half_float");return null!==H?H.HALF_FLOAT_OES:null}if(1021===C)return 6406;if(1022===C)return 6407;if(1023===C)return 6408;if(1024===C)return 6409;if(1025===C)return 6410;if(1026===C)return 6402;if(1027===C)return 34041;if(1028===C)return 6403;if(1029===C)return 36244;if(1030===C)return 33319;if(1031===C)return 33320;if(1032===C)return 36248;if(1033===C)return 36249;if(33776===C||33777===C||33778===C||33779===C)if(H=z.get("WEBGL_compressed_texture_s3tc"),
null!==H){if(33776===C)return H.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===C)return H.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===C)return H.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===C)return H.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===C||35841===C||35842===C||35843===C)if(H=z.get("WEBGL_compressed_texture_pvrtc"),null!==H){if(35840===C)return H.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===C)return H.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===C)return H.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===
C)return H.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===C)return H=z.get("WEBGL_compressed_texture_etc1"),null!==H?H.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===C||37496===C)if(H=z.get("WEBGL_compressed_texture_etc"),null!==H){if(37492===C)return H.COMPRESSED_RGB8_ETC2;if(37496===C)return H.COMPRESSED_RGBA8_ETC2_EAC}if(37808===C||37809===C||37810===C||37811===C||37812===C||37813===C||37814===C||37815===C||37816===C||37817===C||37818===C||37819===C||37820===C||37821===C||37840===C||37841===
C||37842===C||37843===C||37844===C||37845===C||37846===C||37847===C||37848===C||37849===C||37850===C||37851===C||37852===C||37853===C)return H=z.get("WEBGL_compressed_texture_astc"),null!==H?C:null;if(36492===C)return H=z.get("EXT_texture_compression_bptc"),null!==H?C:null;if(1020===C){if(x)return 34042;H=z.get("WEBGL_depth_texture");return null!==H?H.UNSIGNED_INT_24_8_WEBGL:null}}}}function HO(u){qc.call(this||p);(this||p).cameras=u||[]}function Cz(){E.call(this||p);(this||p).type="Group"}function BI(){(this||
p)._targetRay=null;(this||p)._grip=null;(this||p)._hand=null}function qca(u,z){function t(Id){var Ld=Va.get(Id.inputSource);Ld&&Ld.dispatchEvent({type:Id.type,data:Id.inputSource})}function x(){Va.forEach(function(Id,Ld){Id.disconnect(Ld)});Va.clear();u.setFramebuffer(null);u.setRenderTarget(u.getRenderTarget());de.stop();T.isPresenting=!1;T.dispatchEvent({type:"sessionend"})}function C(Id){ea=Id;de.setContext(W);de.start();T.isPresenting=!0;T.dispatchEvent({type:"sessionstart"})}function H(Id){for(var Ld=
W.inputSources,Le=0;Le<Xa.length;Le++)Va.set(Ld[Le],Xa[Le]);for(Ld=0;Ld<Id.removed.length;Ld++){Le=Id.removed[Ld];var qf=Va.get(Le);qf&&(qf.dispatchEvent({type:"disconnected",data:Le}),Va.delete(Le))}for(Ld=0;Ld<Id.added.length;Ld++)Le=Id.added[Ld],(qf=Va.get(Le))&&qf.dispatchEvent({type:"connected",data:Le})}function N(Id,Ld){null===Ld?Id.matrixWorld.copy(Id.matrix):Id.matrixWorld.multiplyMatrices(Ld.matrixWorld,Id.matrix);Id.matrixWorldInverse.getInverse(Id.matrixWorld)}var T=this||p,W=null,Y=1,
ea=null,sa="local-floor",Aa=null,Xa=[],Va=new Map,vb=new qc;vb.layers.enable(1);vb.viewport=new $k;var sb=new qc;sb.layers.enable(2);sb.viewport=new $k;var ad=[vb,sb],Bc=new HO;Bc.layers.enable(1);Bc.layers.enable(2);var rd=null,Jc=null;(this||p).enabled=!1;(this||p).isPresenting=!1;(this||p).getController=function(Id){var Ld=Xa[Id];void 0===Ld&&(Ld=new BI,Xa[Id]=Ld);return Ld.getTargetRaySpace()};(this||p).getControllerGrip=function(Id){var Ld=Xa[Id];void 0===Ld&&(Ld=new BI,Xa[Id]=Ld);return Ld.getGripSpace()};
(this||p).getHand=function(Id){var Ld=Xa[Id];void 0===Ld&&(Ld=new BI,Xa[Id]=Ld);return Ld.getHandSpace()};(this||p).setFramebufferScaleFactor=function(Id){Y=Id;!0===T.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};(this||p).setReferenceSpaceType=function(Id){sa=Id;!0===T.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};(this||p).getReferenceSpace=function(){return ea};(this||p).getSession=
function(){return W};(this||p).setSession=function(Id){W=Id;null!==W&&(W.addEventListener("select",t),W.addEventListener("selectstart",t),W.addEventListener("selectend",t),W.addEventListener("squeeze",t),W.addEventListener("squeezestart",t),W.addEventListener("squeezeend",t),W.addEventListener("end",x),Id=z.getContextAttributes(),!0!==Id.xrCompatible&&z.makeXRCompatible(),Id=new XRWebGLLayer(W,z,{antialias:Id.antialias,alpha:Id.alpha,depth:Id.depth,stencil:Id.stencil,framebufferScaleFactor:Y}),W.updateRenderState({baseLayer:Id}),
W.requestReferenceSpace(sa).then(C),W.addEventListener("inputsourceschange",H))};var vd=new wc,Vc=new wc;(this||p).getCamera=function(Id){Bc.near=sb.near=vb.near=Id.near;Bc.far=sb.far=vb.far=Id.far;if(rd!==Bc.near||Jc!==Bc.far)W.updateRenderState({depthNear:Bc.near,depthFar:Bc.far}),rd=Bc.near,Jc=Bc.far;var Ld=Id.parent,Le=Bc.cameras;N(Bc,Ld);for(var qf=0;qf<Le.length;qf++)N(Le[qf],Ld);Id.matrixWorld.copy(Bc.matrixWorld);Id=Id.children;Ld=0;for(qf=Id.length;Ld<qf;Ld++)Id[Ld].updateMatrixWorld(!0);
if(2===Le.length){vd.setFromMatrixPosition(vb.matrixWorld);Vc.setFromMatrixPosition(sb.matrixWorld);Le=vd.distanceTo(Vc);var zg=vb.projectionMatrix.elements,Pf=sb.projectionMatrix.elements,kg=zg[14]/(zg[10]-1);Id=zg[14]/(zg[10]+1);Ld=(zg[9]+1)/zg[5];qf=(zg[9]-1)/zg[5];var Bh=(zg[8]-1)/zg[0],bh=(Pf[8]+1)/Pf[0];Pf=kg*Bh;zg=kg*bh;bh=Le/(-Bh+bh);Bh=bh*-Bh;vb.matrixWorld.decompose(Bc.position,Bc.quaternion,Bc.scale);Bc.translateX(Bh);Bc.translateZ(bh);Bc.matrixWorld.compose(Bc.position,Bc.quaternion,Bc.scale);
Bc.matrixWorldInverse.getInverse(Bc.matrixWorld);kg+=bh;bh=Id+bh;Bc.projectionMatrix.makePerspective(Pf-Bh,zg+(Le-Bh),Ld*Id/bh*kg,qf*Id/bh*kg,kg,bh)}else Bc.projectionMatrix.copy(vb.projectionMatrix);return Bc};var Md=null,de=new Hd;de.setAnimationLoop(function(Id,Ld){Aa=Ld.getViewerPose(ea);if(null!==Aa){var Le=Aa.views,qf=W.renderState.baseLayer;u.setFramebuffer(qf.framebuffer);var zg=!1;Le.length!==Bc.cameras.length&&(Bc.cameras.length=0,zg=!0);for(var Pf=0;Pf<Le.length;Pf++){var kg=Le[Pf],Bh=
qf.getViewport(kg),bh=ad[Pf];bh.matrix.fromArray(kg.transform.matrix);bh.projectionMatrix.fromArray(kg.projectionMatrix);bh.viewport.set(Bh.x,Bh.y,Bh.width,Bh.height);0===Pf&&Bc.matrix.copy(bh.matrix);!0===zg&&Bc.cameras.push(bh)}}Le=W.inputSources;for(qf=0;qf<Xa.length;qf++)Xa[qf].update(Le[qf],Ld,ea);Md&&Md(Id,Ld)});(this||p).setAnimationLoop=function(Id){Md=Id};(this||p).dispose=function(){}}function $ua(u){function z(x,C){x.opacity.value=C.opacity;C.color&&x.diffuse.value.copy(C.color);C.emissive&&
x.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity);C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);C.specularMap&&(x.specularMap.value=C.specularMap);var H=u.get(C).envMap;H&&(x.envMap.value=H,x.flipEnvMap.value=H.isCubeTexture&&H._needsFlipEnvMap?-1:1,x.reflectivity.value=C.reflectivity,x.refractionRatio.value=C.refractionRatio,H=u.get(H).__maxMipLevel,void 0!==H&&(x.maxMipLevel.value=H));C.lightMap&&(x.lightMap.value=C.lightMap,x.lightMapIntensity.value=C.lightMapIntensity);
C.aoMap&&(x.aoMap.value=C.aoMap,x.aoMapIntensity.value=C.aoMapIntensity);if(C.map)var N=C.map;else C.specularMap?N=C.specularMap:C.displacementMap?N=C.displacementMap:C.normalMap?N=C.normalMap:C.bumpMap?N=C.bumpMap:C.roughnessMap?N=C.roughnessMap:C.metalnessMap?N=C.metalnessMap:C.alphaMap?N=C.alphaMap:C.emissiveMap?N=C.emissiveMap:C.clearcoatMap?N=C.clearcoatMap:C.clearcoatNormalMap?N=C.clearcoatNormalMap:C.clearcoatRoughnessMap&&(N=C.clearcoatRoughnessMap);void 0!==N&&(N.isWebGLRenderTarget&&(N=
N.texture),!0===N.matrixAutoUpdate&&N.updateMatrix(),x.uvTransform.value.copy(N.matrix));if(C.aoMap)var T=C.aoMap;else C.lightMap&&(T=C.lightMap);void 0!==T&&(T.isWebGLRenderTarget&&(T=T.texture),!0===T.matrixAutoUpdate&&T.updateMatrix(),x.uv2Transform.value.copy(T.matrix))}function t(x,C){x.roughness.value=C.roughness;x.metalness.value=C.metalness;C.roughnessMap&&(x.roughnessMap.value=C.roughnessMap);C.metalnessMap&&(x.metalnessMap.value=C.metalnessMap);C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);
C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1));C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate());C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);u.get(C).envMap&&(x.envMapIntensity.value=C.envMapIntensity)}return{refreshFogUniforms:function(x,C){x.fogColor.value.copy(C.color);
C.isFog?(x.fogNear.value=C.near,x.fogFar.value=C.far):C.isFogExp2&&(x.fogDensity.value=C.density)},refreshMaterialUniforms:function(x,C,H,N){if(C.isMeshBasicMaterial)z(x,C);else if(C.isMeshLambertMaterial)z(x,C),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap);else if(C.isMeshToonMaterial)z(x,C),C.gradientMap&&(x.gradientMap.value=C.gradientMap),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=
-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshPhongMaterial)z(x,C),x.specular.value.copy(C.specular),x.shininess.value=Math.max(C.shininess,1E-4),C.emissiveMap&&(x.emissiveMap.value=C.emissiveMap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=
C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshStandardMaterial)z(x,C),C.isMeshPhysicalMaterial?(t(x,C),x.reflectivity.value=C.reflectivity,x.clearcoat.value=C.clearcoat,x.clearcoatRoughness.value=C.clearcoatRoughness,
C.sheen&&x.sheen.value.copy(C.sheen),C.clearcoatMap&&(x.clearcoatMap.value=C.clearcoatMap),C.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap),C.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),x.clearcoatNormalMap.value=C.clearcoatNormalMap,1===C.side&&x.clearcoatNormalScale.value.negate()),x.transmission.value=C.transmission,C.transmissionMap&&(x.transmissionMap.value=C.transmissionMap)):t(x,C);else if(C.isMeshMatcapMaterial)z(x,C),C.matcap&&
(x.matcap.value=C.matcap),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDepthMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,
x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isMeshDistanceMaterial)z(x,C),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias),x.referencePosition.value.copy(C.referencePosition),x.nearDistance.value=C.nearDistance,x.farDistance.value=C.farDistance;else if(C.isMeshNormalMaterial)z(x,C),C.bumpMap&&(x.bumpMap.value=C.bumpMap,x.bumpScale.value=C.bumpScale,
1===C.side&&(x.bumpScale.value*=-1)),C.normalMap&&(x.normalMap.value=C.normalMap,x.normalScale.value.copy(C.normalScale),1===C.side&&x.normalScale.value.negate()),C.displacementMap&&(x.displacementMap.value=C.displacementMap,x.displacementScale.value=C.displacementScale,x.displacementBias.value=C.displacementBias);else if(C.isLineBasicMaterial)x.diffuse.value.copy(C.color),x.opacity.value=C.opacity,C.isLineDashedMaterial&&(x.dashSize.value=C.dashSize,x.totalSize.value=C.dashSize+C.gapSize,x.scale.value=
C.scale);else if(C.isPointsMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.size.value=C.size*H;x.scale.value=.5*N;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=C.alphaMap);if(C.map)var T=C.map;else C.alphaMap&&(T=C.alphaMap);void 0!==T&&(!0===T.matrixAutoUpdate&&T.updateMatrix(),x.uvTransform.value.copy(T.matrix))}else if(C.isSpriteMaterial){x.diffuse.value.copy(C.color);x.opacity.value=C.opacity;x.rotation.value=C.rotation;C.map&&(x.map.value=C.map);C.alphaMap&&(x.alphaMap.value=
C.alphaMap);if(C.map)var W=C.map;else C.alphaMap&&(W=C.alphaMap);void 0!==W&&(!0===W.matrixAutoUpdate&&W.updateMatrix(),x.uvTransform.value.copy(W.matrix))}else C.isShadowMaterial?(x.color.value.copy(C.color),x.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}}}function CI(u){function z(sc,Ee){for(var Wd=0;Wd<sc.length;Wd++){var Ve=Xa.getContext(sc[Wd],Ee);if(null!==Ve)return Ve}return null}function t(){qg=new Td(Ge);Oh=new yb(Ge,qg,u);!1===Oh.isWebGL2&&(qg.get("WEBGL_depth_texture"),
qg.get("OES_texture_float"),qg.get("OES_texture_half_float"),qg.get("OES_texture_half_float_linear"),qg.get("OES_standard_derivatives"),qg.get("OES_element_index_uint"),qg.get("OES_vertex_array_object"),qg.get("ANGLE_instanced_arrays"));qg.get("OES_texture_float_linear");kx=new pca(Ge,qg,Oh);vh=new Yua(Ge,qg,Oh);vh.scissor(jk.copy(vf).multiplyScalar(fd).floor());vh.viewport(Nh.copy($e).multiplyScalar(fd).floor());Mj=new Ze(Ge);wj=new me;Rl=new Zua(Ge,qg,vh,wj,Oh,kx,Mj);Uk=new Ud(Id);fq=new be(Ge,
Oh);Wq=new Ca(Ge,qg,fq,Oh);lx=new cd(Ge,fq,Mj,Wq);Dz=new rj(Ge,lx,fq,Mj);rca=new Bj(Ge);Gt=new gc(wj);fC=new Ob(Id,Uk,qg,Oh,Wq,Gt);iX=new $ua(wj);IO=new bf(wj);SE=new Xua;Ez=new ha(Id,Uk,vh,Dz,rd);sca=new Na(Ge,qg,Mj,Oh);tca=new gf(Ge,qg,Mj,Oh);Mj.programs=fC.programs;Id.capabilities=Oh;Id.extensions=qg;Id.properties=wj;Id.renderLists=IO;Id.state=vh;Id.info=Mj}function x(sc){sc.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");Ld=!0}function C(){console.log("THREE.WebGLRenderer: Context Restored.");
Ld=!1;t()}function H(sc){sc=sc.target;sc.removeEventListener("dispose",H);N(sc);wj.remove(sc)}function N(sc){sc=wj.get(sc).program;void 0!==sc&&fC.releaseProgram(sc)}function T(sc,Ee){sc.render(function(Wd){Id.renderBufferImmediate(Wd,Ee)})}function W(sc,Ee,Wd,Ve){if(!1!==sc.visible){if(sc.layers.test(Ee.layers))if(sc.isGroup)Wd=sc.renderOrder;else if(sc.isLOD)!0===sc.autoUpdate&&sc.update(Ee);else if(sc.isLight)de.pushLight(sc),sc.castShadow&&de.pushShadow(sc);else if(sc.isSprite){if(!sc.frustumCulled||
ag.intersectsSprite(sc)){Ve&&ui.setFromMatrixPosition(sc.matrixWorld).applyMatrix4(Ci);var cg=Dz.update(sc),$g=sc.material;$g.visible&&Md.push(sc,cg,$g,Wd,ui.z,null)}}else if(sc.isImmediateRenderObject)Ve&&ui.setFromMatrixPosition(sc.matrixWorld).applyMatrix4(Ci),Md.push(sc,null,sc.material,Wd,ui.z,null);else if(sc.isMesh||sc.isLine||sc.isPoints)if(sc.isSkinnedMesh&&sc.skeleton.frame!==Mj.render.frame&&(sc.skeleton.update(),sc.skeleton.frame=Mj.render.frame),!sc.frustumCulled||ag.intersectsObject(sc))if(Ve&&
ui.setFromMatrixPosition(sc.matrixWorld).applyMatrix4(Ci),cg=Dz.update(sc),$g=sc.material,Array.isArray($g))for(var lh=cg.groups,Vj=0,Nj=lh.length;Vj<Nj;Vj++){var Vn=lh[Vj],kk=$g[Vn.materialIndex];kk&&kk.visible&&Md.push(sc,cg,kk,Wd,ui.z,Vn)}else $g.visible&&Md.push(sc,cg,$g,Wd,ui.z,null);sc=sc.children;cg=0;for($g=sc.length;cg<$g;cg++)W(sc[cg],Ee,Wd,Ve)}}function Y(sc,Ee,Wd){for(var Ve=!0===Ee.isScene?Ee.overrideMaterial:null,cg=0,$g=sc.length;cg<$g;cg++){var lh=sc[cg],Vj=lh.object,Nj=lh.geometry,
Vn=null===Ve?lh.material:Ve;lh=lh.group;if(Wd.isArrayCamera){$i=Wd;for(var kk=Wd.cameras,gC=0,jX=kk.length;gC<jX;gC++){var JO=kk[gC];Vj.layers.test(JO.layers)&&(vh.viewport(Nh.copy(JO.viewport)),de.setupLights(JO),ea(Vj,Ee,JO,Nj,Vn,lh))}}else $i=null,ea(Vj,Ee,Wd,Nj,Vn,lh)}}function ea(sc,Ee,Wd,Ve,cg,$g){sc.onBeforeRender(Id,Ee,Wd,Ve,cg,$g);de=SE.get(Ee,$i||Wd);sc.modelViewMatrix.multiplyMatrices(Wd.matrixWorldInverse,sc.matrixWorld);sc.normalMatrix.getNormalMatrix(sc.modelViewMatrix);if(sc.isImmediateRenderObject){var lh=
Aa(Wd,Ee,cg,sc);vh.setMaterial(cg);Wq.reset();T(sc,lh)}else Id.renderBufferDirect(Wd,Ee,Ve,cg,sc,$g);sc.onAfterRender(Id,Ee,Wd,Ve,cg,$g);de=SE.get(Ee,$i||Wd)}function sa(sc,Ee,Wd){!0!==Ee.isScene&&(Ee=Ik);var Ve=wj.get(sc),cg=de.state.lights,$g=cg.state.version;Wd=fC.getParameters(sc,cg.state,de.state.shadowsArray,Ee,Wd);var lh=fC.getProgramCacheKey(Wd),Vj=Ve.program,Nj=!0;if(void 0===Vj)sc.addEventListener("dispose",H);else if(Vj.cacheKey!==lh)N(sc);else{if(Ve.lightsStateVersion===$g&&void 0!==Wd.shaderID){Ee=
sc.isMeshStandardMaterial?Ee.environment:null;Ve.envMap=Uk.get(sc.envMap||Ee);return}Nj=!1}Nj&&(Wd.uniforms=fC.getUniforms(sc),sc.onBeforeCompile(Wd,Id),Vj=fC.acquireProgram(Wd,lh),Ve.program=Vj,Ve.uniforms=Wd.uniforms,Ve.outputEncoding=Wd.outputEncoding);Wd=Ve.uniforms;if(!sc.isShaderMaterial&&!sc.isRawShaderMaterial||!0===sc.clipping)Ve.numClippingPlanes=Gt.numPlanes,Ve.numIntersection=Gt.numIntersection,Wd.clippingPlanes=Gt.uniform;Ve.environment=sc.isMeshStandardMaterial?Ee.environment:null;Ve.fog=
Ee.fog;Ve.envMap=Uk.get(sc.envMap||Ve.environment);Ve.needsLights=sc.isMeshLambertMaterial||sc.isMeshToonMaterial||sc.isMeshPhongMaterial||sc.isMeshStandardMaterial||sc.isShadowMaterial||sc.isShaderMaterial&&!0===sc.lights;Ve.lightsStateVersion=$g;Ve.needsLights&&(Wd.ambientLightColor.value=cg.state.ambient,Wd.lightProbe.value=cg.state.probe,Wd.directionalLights.value=cg.state.directional,Wd.directionalLightShadows.value=cg.state.directionalShadow,Wd.spotLights.value=cg.state.spot,Wd.spotLightShadows.value=
cg.state.spotShadow,Wd.rectAreaLights.value=cg.state.rectArea,Wd.ltc_1.value=cg.state.rectAreaLTC1,Wd.ltc_2.value=cg.state.rectAreaLTC2,Wd.pointLights.value=cg.state.point,Wd.pointLightShadows.value=cg.state.pointShadow,Wd.hemisphereLights.value=cg.state.hemi,Wd.directionalShadowMap.value=cg.state.directionalShadowMap,Wd.directionalShadowMatrix.value=cg.state.directionalShadowMatrix,Wd.spotShadowMap.value=cg.state.spotShadowMap,Wd.spotShadowMatrix.value=cg.state.spotShadowMatrix,Wd.pointShadowMap.value=
cg.state.pointShadowMap,Wd.pointShadowMatrix.value=cg.state.pointShadowMatrix);sc=Ve.program.getUniforms();sc=sv.seqWithValue(sc.seq,Wd);Ve.uniformsList=sc}function Aa(sc,Ee,Wd,Ve){!0!==Ee.isScene&&(Ee=Ik);Rl.resetTextureUnits();var cg=Ee.fog,$g=Wd.isMeshStandardMaterial?Ee.environment:null,lh=null===Pf?Id.outputEncoding:Pf.texture.encoding,Vj=Uk.get(Wd.envMap||$g),Nj=wj.get(Wd),Vn=de.state.lights;!0!==ji||!0!==ei&&sc===bh||Gt.setState(Wd,sc,sc===bh&&Wd.id===Bh);Wd.version===Nj.__version?Wd.fog&&
Nj.fog!==cg?sa(Wd,Ee,Ve):Nj.environment!==$g?sa(Wd,Ee,Ve):Nj.needsLights&&Nj.lightsStateVersion!==Vn.state.version?sa(Wd,Ee,Ve):void 0===Nj.numClippingPlanes||Nj.numClippingPlanes===Gt.numPlanes&&Nj.numIntersection===Gt.numIntersection?Nj.outputEncoding!==lh?sa(Wd,Ee,Ve):Nj.envMap!==Vj&&sa(Wd,Ee,Ve):sa(Wd,Ee,Ve):(sa(Wd,Ee,Ve),Nj.__version=Wd.version);var kk=!1;Vn=Vj=!1;Ee=Nj.program;$g=Ee.getUniforms();lh=Nj.uniforms;vh.useProgram(Ee.program)&&(Vn=Vj=kk=!0);Wd.id!==Bh&&(Bh=Wd.id,Vj=!0);if(kk||bh!==
sc){$g.setValue(Ge,"projectionMatrix",sc.projectionMatrix);Oh.logarithmicDepthBuffer&&$g.setValue(Ge,"logDepthBufFC",2/(Math.log(sc.far+1)/Math.LN2));bh!==sc&&(bh=sc,Vn=Vj=!0);if(Wd.isShaderMaterial||Wd.isMeshPhongMaterial||Wd.isMeshToonMaterial||Wd.isMeshStandardMaterial||Wd.envMap)kk=$g.map.cameraPosition,void 0!==kk&&kk.setValue(Ge,ui.setFromMatrixPosition(sc.matrixWorld));(Wd.isMeshPhongMaterial||Wd.isMeshToonMaterial||Wd.isMeshLambertMaterial||Wd.isMeshBasicMaterial||Wd.isMeshStandardMaterial||
Wd.isShaderMaterial)&&$g.setValue(Ge,"isOrthographic",!0===sc.isOrthographicCamera);(Wd.isMeshPhongMaterial||Wd.isMeshToonMaterial||Wd.isMeshLambertMaterial||Wd.isMeshBasicMaterial||Wd.isMeshStandardMaterial||Wd.isShaderMaterial||Wd.isShadowMaterial||Wd.skinning)&&$g.setValue(Ge,"viewMatrix",sc.matrixWorldInverse)}if(Wd.skinning&&($g.setOptional(Ge,Ve,"bindMatrix"),$g.setOptional(Ge,Ve,"bindMatrixInverse"),sc=Ve.skeleton))if(kk=sc.bones,Oh.floatVertexTextures){if(void 0===sc.boneTexture){kk=Math.sqrt(4*
kk.length);kk=ti.ceilPowerOfTwo(kk);kk=Math.max(kk,4);var gC=new Float32Array(kk*kk*4);gC.set(sc.boneMatrices);var jX=new Vb(gC,kk,kk,1023,1015);sc.boneMatrices=gC;sc.boneTexture=jX;sc.boneTextureSize=kk}$g.setValue(Ge,"boneTexture",sc.boneTexture,Rl);$g.setValue(Ge,"boneTextureSize",sc.boneTextureSize)}else $g.setOptional(Ge,sc,"boneMatrices");if(Vj||Nj.receiveShadow!==Ve.receiveShadow)Nj.receiveShadow=Ve.receiveShadow,$g.setValue(Ge,"receiveShadow",Ve.receiveShadow);Vj&&($g.setValue(Ge,"toneMappingExposure",
Id.toneMappingExposure),Nj.needsLights&&(sc=Vn,lh.ambientLightColor.needsUpdate=sc,lh.lightProbe.needsUpdate=sc,lh.directionalLights.needsUpdate=sc,lh.directionalLightShadows.needsUpdate=sc,lh.pointLights.needsUpdate=sc,lh.pointLightShadows.needsUpdate=sc,lh.spotLights.needsUpdate=sc,lh.spotLightShadows.needsUpdate=sc,lh.rectAreaLights.needsUpdate=sc,lh.hemisphereLights.needsUpdate=sc),cg&&Wd.fog&&iX.refreshFogUniforms(lh,cg),iX.refreshMaterialUniforms(lh,Wd,fd,Fc),sv.upload(Ge,Nj.uniformsList,lh,
Rl));Wd.isShaderMaterial&&!0===Wd.uniformsNeedUpdate&&(sv.upload(Ge,Nj.uniformsList,lh,Rl),Wd.uniformsNeedUpdate=!1);Wd.isSpriteMaterial&&$g.setValue(Ge,"center",Ve.center);$g.setValue(Ge,"modelViewMatrix",Ve.modelViewMatrix);$g.setValue(Ge,"normalMatrix",Ve.normalMatrix);$g.setValue(Ge,"modelMatrix",Ve.matrixWorld);return Ee}u=u||{};var Xa=void 0!==u.canvas?u.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Va=void 0!==u.context?u.context:null,vb=void 0!==u.alpha?u.alpha:
!1,sb=void 0!==u.depth?u.depth:!0,ad=void 0!==u.stencil?u.stencil:!0,Bc=void 0!==u.antialias?u.antialias:!1,rd=void 0!==u.premultipliedAlpha?u.premultipliedAlpha:!0,Jc=void 0!==u.preserveDrawingBuffer?u.preserveDrawingBuffer:!1,vd=void 0!==u.powerPreference?u.powerPreference:"default",Vc=void 0!==u.failIfMajorPerformanceCaveat?u.failIfMajorPerformanceCaveat:!1,Md=null,de=null;(this||p).domElement=Xa;(this||p).debug={checkShaderErrors:!0};(this||p).autoClear=!0;(this||p).autoClearColor=!0;(this||p).autoClearDepth=
!0;(this||p).autoClearStencil=!0;(this||p).sortObjects=!0;(this||p).clippingPlanes=[];(this||p).localClippingEnabled=!1;(this||p).gammaFactor=2;(this||p).outputEncoding=3E3;(this||p).physicallyCorrectLights=!1;(this||p).toneMapping=0;(this||p).toneMappingExposure=1;(this||p).maxMorphTargets=8;(this||p).maxMorphNormals=4;var Id=this||p,Ld=!1,Le=null,qf=0,zg=0,Pf=null,kg=null,Bh=-1,bh=null,$i=null,Nh=new $k,jk=new $k,Jk=null,Ql=Xa.width,Fc=Xa.height,fd=1,Me=null,od=null,$e=new $k(0,0,Ql,Fc),vf=new $k(0,
0,Ql,Fc),Wg=!1,ag=new AI,ji=!1,ei=!1,Ci=new uj,ui=new wc,Ik={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Ge=Va;try{Va={alpha:vb,depth:sb,stencil:ad,antialias:Bc,premultipliedAlpha:rd,preserveDrawingBuffer:Jc,powerPreference:vd,failIfMajorPerformanceCaveat:Vc};Xa.addEventListener("webglcontextlost",x,!1);Xa.addEventListener("webglcontextrestored",C,!1);if(null===Ge&&(vb=["webgl2","webgl","experimental-webgl"],!0===Id.isWebGL1Renderer&&vb.shift(),Ge=z(vb,Va),null===Ge)){if(z(vb))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===Ge.getShaderPrecisionFormat&&(Ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(sc){throw console.error("THREE.WebGLRenderer: "+sc.message),sc;}var qg,Oh,vh,Mj,wj,Rl,Uk,fq,lx,Dz,fC,iX,IO,SE,Gt,Ez,rca,sca,tca,kx,Wq;t();var Fz=new qca(Id,Ge);(this||p).xr=Fz;var uca=new oca(Id,Dz,Oh.maxTextureSize);(this||p).shadowMap=uca;(this||p).getContext=function(){return Ge};(this||p).getContextAttributes=function(){return Ge.getContextAttributes()};
(this||p).forceContextLoss=function(){var sc=qg.get("WEBGL_lose_context");sc&&sc.loseContext()};(this||p).forceContextRestore=function(){var sc=qg.get("WEBGL_lose_context");sc&&sc.restoreContext()};(this||p).getPixelRatio=function(){return fd};(this||p).setPixelRatio=function(sc){void 0!==sc&&(fd=sc,this.setSize(Ql,Fc,!1))};(this||p).getSize=function(sc){void 0===sc&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),sc=new cf);return sc.set(Ql,Fc)};(this||p).setSize=
function(sc,Ee,Wd){Fz.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ql=sc,Fc=Ee,Xa.width=Math.floor(sc*fd),Xa.height=Math.floor(Ee*fd),!1!==Wd&&(Xa.style.width=sc+"px",Xa.style.height=Ee+"px"),this.setViewport(0,0,sc,Ee))};(this||p).getDrawingBufferSize=function(sc){void 0===sc&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),sc=new cf);return sc.set(Ql*fd,Fc*fd).floor()};(this||p).setDrawingBufferSize=
function(sc,Ee,Wd){Ql=sc;Fc=Ee;fd=Wd;Xa.width=Math.floor(sc*Wd);Xa.height=Math.floor(Ee*Wd);this.setViewport(0,0,sc,Ee)};(this||p).getCurrentViewport=function(sc){void 0===sc&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),sc=new $k);return sc.copy(Nh)};(this||p).getViewport=function(sc){return sc.copy($e)};(this||p).setViewport=function(sc,Ee,Wd,Ve){sc.isVector4?$e.set(sc.x,sc.y,sc.z,sc.w):$e.set(sc,Ee,Wd,Ve);vh.viewport(Nh.copy($e).multiplyScalar(fd).floor())};
(this||p).getScissor=function(sc){return sc.copy(vf)};(this||p).setScissor=function(sc,Ee,Wd,Ve){sc.isVector4?vf.set(sc.x,sc.y,sc.z,sc.w):vf.set(sc,Ee,Wd,Ve);vh.scissor(jk.copy(vf).multiplyScalar(fd).floor())};(this||p).getScissorTest=function(){return Wg};(this||p).setScissorTest=function(sc){vh.setScissorTest(Wg=sc)};(this||p).setOpaqueSort=function(sc){Me=sc};(this||p).setTransparentSort=function(sc){od=sc};(this||p).getClearColor=function(){return Ez.getClearColor()};(this||p).setClearColor=function(){Ez.setClearColor.apply(Ez,
arguments)};(this||p).getClearAlpha=function(){return Ez.getClearAlpha()};(this||p).setClearAlpha=function(){Ez.setClearAlpha.apply(Ez,arguments)};(this||p).clear=function(sc,Ee,Wd){var Ve=0;if(void 0===sc||sc)Ve|=16384;if(void 0===Ee||Ee)Ve|=256;if(void 0===Wd||Wd)Ve|=1024;Ge.clear(Ve)};(this||p).clearColor=function(){this.clear(!0,!1,!1)};(this||p).clearDepth=function(){this.clear(!1,!0,!1)};(this||p).clearStencil=function(){this.clear(!1,!1,!0)};(this||p).dispose=function(){Xa.removeEventListener("webglcontextlost",
x,!1);Xa.removeEventListener("webglcontextrestored",C,!1);IO.dispose();SE.dispose();wj.dispose();Uk.dispose();Dz.dispose();Wq.dispose();Fz.dispose();DI.stop()};(this||p).renderBufferImmediate=function(sc,Ee){Wq.initAttributes();var Wd=wj.get(sc);sc.hasPositions&&!Wd.position&&(Wd.position=Ge.createBuffer());sc.hasNormals&&!Wd.normal&&(Wd.normal=Ge.createBuffer());sc.hasUvs&&!Wd.uv&&(Wd.uv=Ge.createBuffer());sc.hasColors&&!Wd.color&&(Wd.color=Ge.createBuffer());Ee=Ee.getAttributes();sc.hasPositions&&
(Ge.bindBuffer(34962,Wd.position),Ge.bufferData(34962,sc.positionArray,35048),Wq.enableAttribute(Ee.position),Ge.vertexAttribPointer(Ee.position,3,5126,!1,0,0));sc.hasNormals&&(Ge.bindBuffer(34962,Wd.normal),Ge.bufferData(34962,sc.normalArray,35048),Wq.enableAttribute(Ee.normal),Ge.vertexAttribPointer(Ee.normal,3,5126,!1,0,0));sc.hasUvs&&(Ge.bindBuffer(34962,Wd.uv),Ge.bufferData(34962,sc.uvArray,35048),Wq.enableAttribute(Ee.uv),Ge.vertexAttribPointer(Ee.uv,2,5126,!1,0,0));sc.hasColors&&(Ge.bindBuffer(34962,
Wd.color),Ge.bufferData(34962,sc.colorArray,35048),Wq.enableAttribute(Ee.color),Ge.vertexAttribPointer(Ee.color,3,5126,!1,0,0));Wq.disableUnusedAttributes();Ge.drawArrays(4,0,sc.count);sc.count=0};(this||p).renderBufferDirect=function(sc,Ee,Wd,Ve,cg,$g){null===Ee&&(Ee=Ik);var lh=cg.isMesh&&0>cg.matrixWorld.determinant();sc=Aa(sc,Ee,Ve,cg);vh.setMaterial(Ve,lh);lh=Wd.index;Ee=Wd.attributes.position;if(null===lh){if(void 0===Ee||0===Ee.count)return}else if(0===lh.count)return;var Vj=1;!0===Ve.wireframe&&
(lh=lx.getWireframeAttribute(Wd),Vj=2);(Ve.morphTargets||Ve.morphNormals)&&rca.update(cg,Wd,Ve,sc);Wq.setup(cg,Ve,sc,Wd,lh);sc=sca;if(null!==lh){var Nj=fq.get(lh);sc=tca;sc.setIndex(Nj)}var Vn=Wd.drawRange.start*Vj,kk=null!==$g?$g.start*Vj:0;Nj=Math.max(Vn,kk);$g=Math.max(0,Math.min(null!==lh?lh.count:Ee.count,Vn+Wd.drawRange.count*Vj,kk+(null!==$g?$g.count*Vj:Infinity))-1-Nj+1);0!==$g&&(cg.isMesh?!0===Ve.wireframe?(vh.setLineWidth(Ve.wireframeLinewidth*(null===Pf?fd:1)),sc.setMode(1)):sc.setMode(4):
cg.isLine?(Ve=Ve.linewidth,void 0===Ve&&(Ve=1),vh.setLineWidth(Ve*(null===Pf?fd:1)),cg.isLineSegments?sc.setMode(1):cg.isLineLoop?sc.setMode(2):sc.setMode(3)):cg.isPoints?sc.setMode(0):cg.isSprite&&sc.setMode(4),cg.isInstancedMesh?sc.renderInstances(Nj,$g,cg.count):Wd.isInstancedBufferGeometry?sc.renderInstances(Nj,$g,Math.min(Wd.instanceCount,Wd._maxInstanceCount)):sc.render(Nj,$g))};(this||p).compile=function(sc,Ee){de=SE.get(sc,Ee);de.init();sc.traverse(function(Ve){Ve.isLight&&(de.pushLight(Ve),
Ve.castShadow&&de.pushShadow(Ve))});de.setupLights(Ee);var Wd=new WeakMap;sc.traverse(function(Ve){var cg=Ve.material;if(cg)if(Array.isArray(cg))for(var $g=0;$g<cg.length;$g++){var lh=cg[$g];!1===Wd.has(lh)&&(sa(lh,sc,Ve),Wd.set(lh))}else!1===Wd.has(cg)&&(sa(cg,sc,Ve),Wd.set(cg))})};var kX=null,DI=new Hd;DI.setAnimationLoop(function(sc){Fz.isPresenting||kX&&kX(sc)});"undefined"!==typeof window&&DI.setContext(window);(this||p).setAnimationLoop=function(sc){kX=sc;Fz.setAnimationLoop(sc);null===sc?DI.stop():
DI.start()};(this||p).render=function(sc,Ee,Wd,Ve){if(void 0!==Wd){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var cg=Wd}if(void 0!==Ve){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var $g=Ve}if(void 0!==Ee&&!0!==Ee.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==Ld){Wq.resetDefaultState();Bh=-1;
bh=null;!0===sc.autoUpdate&&sc.updateMatrixWorld();null===Ee.parent&&Ee.updateMatrixWorld();!0===Fz.enabled&&!0===Fz.isPresenting&&(Ee=Fz.getCamera(Ee));if(!0===sc.isScene)sc.onBeforeRender(Id,sc,Ee,cg||Pf);de=SE.get(sc,Ee);de.init();Ci.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse);ag.setFromProjectionMatrix(Ci);ei=(this||p).localClippingEnabled;ji=Gt.init((this||p).clippingPlanes,ei,Ee);Md=IO.get(sc,Ee);Md.init();W(sc,Ee,0,Id.sortObjects);Md.finish();!0===Id.sortObjects&&Md.sort(Me,
od);!0===ji&&Gt.beginShadows();uca.render(de.state.shadowsArray,sc,Ee);de.setupLights(Ee);!0===ji&&Gt.endShadows();!0===(this||p).info.autoReset&&(this||p).info.reset();void 0!==cg&&this.setRenderTarget(cg);Ez.render(Md,sc,Ee,$g);Wd=Md.opaque;Ve=Md.transparent;0<Wd.length&&Y(Wd,sc,Ee);0<Ve.length&&Y(Ve,sc,Ee);if(!0===sc.isScene)sc.onAfterRender(Id,sc,Ee);null!==Pf&&(Rl.updateRenderTargetMipmap(Pf),Rl.updateMultisampleRenderTarget(Pf));vh.buffers.depth.setTest(!0);vh.buffers.depth.setMask(!0);vh.buffers.color.setMask(!0);
vh.setPolygonOffset(!1);de=Md=null}};(this||p).setFramebuffer=function(sc){Le!==sc&&null===Pf&&Ge.bindFramebuffer(36160,sc);Le=sc};(this||p).getActiveCubeFace=function(){return qf};(this||p).getActiveMipmapLevel=function(){return zg};(this||p).getRenderList=function(){return Md};(this||p).setRenderList=function(sc){Md=sc};(this||p).getRenderState=function(){return de};(this||p).setRenderState=function(sc){de=sc};(this||p).getRenderTarget=function(){return Pf};(this||p).setRenderTarget=function(sc,
Ee,Wd){void 0===Ee&&(Ee=0);void 0===Wd&&(Wd=0);Pf=sc;qf=Ee;zg=Wd;sc&&void 0===wj.get(sc).__webglFramebuffer&&Rl.setupRenderTarget(sc);var Ve=Le,cg=!1;sc?(Ve=wj.get(sc).__webglFramebuffer,sc.isWebGLCubeRenderTarget?(Ve=Ve[Ee],cg=!0):Ve=sc.isWebGLMultisampleRenderTarget?wj.get(sc).__webglMultisampledFramebuffer:Ve,Nh.copy(sc.viewport),jk.copy(sc.scissor),Jk=sc.scissorTest):(Nh.copy($e).multiplyScalar(fd).floor(),jk.copy(vf).multiplyScalar(fd).floor(),Jk=Wg);kg!==Ve&&(Ge.bindFramebuffer(36160,Ve),kg=
Ve);vh.viewport(Nh);vh.scissor(jk);vh.setScissorTest(Jk);cg&&(sc=wj.get(sc.texture),Ge.framebufferTexture2D(36160,36064,34069+Ee,sc.__webglTexture,Wd))};(this||p).readRenderTargetPixels=function(sc,Ee,Wd,Ve,cg,$g,lh){if(sc&&sc.isWebGLRenderTarget){var Vj=wj.get(sc).__webglFramebuffer;sc.isWebGLCubeRenderTarget&&void 0!==lh&&(Vj=Vj[lh]);if(Vj){lh=!1;Vj!==kg&&(Ge.bindFramebuffer(36160,Vj),lh=!0);try{var Nj=sc.texture,Vn=Nj.format,kk=Nj.type;1023!==Vn&&kx.convert(Vn)!==Ge.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
1009===kk||kx.convert(kk)===Ge.getParameter(35738)||1015===kk&&(Oh.isWebGL2||qg.get("OES_texture_float")||qg.get("WEBGL_color_buffer_float"))||1016===kk&&(Oh.isWebGL2?qg.get("EXT_color_buffer_float"):qg.get("EXT_color_buffer_half_float"))?36053===Ge.checkFramebufferStatus(36160)?0<=Ee&&Ee<=sc.width-Ve&&0<=Wd&&Wd<=sc.height-cg&&Ge.readPixels(Ee,Wd,Ve,cg,kx.convert(Vn),kx.convert(kk),$g):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):
console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{lh&&Ge.bindFramebuffer(36160,kg)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};(this||p).copyFramebufferToTexture=function(sc,Ee,Wd){void 0===Wd&&(Wd=0);var Ve=Math.pow(2,-Wd),cg=Math.floor(Ee.image.width*Ve);Ve=Math.floor(Ee.image.height*Ve);var $g=kx.convert(Ee.format);Rl.setTexture2D(Ee,0);
Ge.copyTexImage2D(3553,Wd,$g,sc.x,sc.y,cg,Ve,0);vh.unbindTexture()};(this||p).copyTextureToTexture=function(sc,Ee,Wd,Ve){void 0===Ve&&(Ve=0);var cg=Ee.image.width,$g=Ee.image.height,lh=kx.convert(Wd.format),Vj=kx.convert(Wd.type);Rl.setTexture2D(Wd,0);Ge.pixelStorei(37440,Wd.flipY);Ge.pixelStorei(37441,Wd.premultiplyAlpha);Ge.pixelStorei(3317,Wd.unpackAlignment);Ee.isDataTexture?Ge.texSubImage2D(3553,Ve,sc.x,sc.y,cg,$g,lh,Vj,Ee.image.data):Ee.isCompressedTexture?Ge.compressedTexSubImage2D(3553,Ve,
sc.x,sc.y,Ee.mipmaps[0].width,Ee.mipmaps[0].height,lh,Ee.mipmaps[0].data):Ge.texSubImage2D(3553,Ve,sc.x,sc.y,lh,Vj,Ee.image);0===Ve&&Wd.generateMipmaps&&Ge.generateMipmap(3553);vh.unbindTexture()};(this||p).initTexture=function(sc){Rl.setTexture2D(sc,0);vh.unbindTexture()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this||p}))}function lX(u){CI.call(this||p,u)}function Xq(u,z){(this||p).array=u;(this||p).stride=z;(this||p).count=void 0!==
u?u.length/z:0;(this||p).usage=35044;(this||p).updateRange={offset:0,count:-1};(this||p).version=0;(this||p).uuid=ti.generateUUID()}function Gz(u,z,t,x){(this||p).name="";(this||p).data=u;(this||p).itemSize=z;(this||p).offset=t;(this||p).normalized=!0===x}function Hz(u){M.call(this||p);(this||p).type="SpriteMaterial";(this||p).color=new Hg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).rotation=0;(this||p).sizeAttenuation=!0;(this||p).transparent=!0;this.setValues(u)}function EI(u){E.call(this||
p);(this||p).type="Sprite";if(void 0===TE){TE=new ya;var z=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);z=new Xq(z,5);TE.setIndex([0,1,2,0,2,3]);TE.setAttribute("position",new Gz(z,3,0,!1));TE.setAttribute("uv",new Gz(z,2,3,!1))}(this||p).geometry=TE;(this||p).material=void 0!==u?u:new Hz;(this||p).center=new cf(.5,.5)}function KO(u,z,t,x,C,H){UE.subVectors(u,t).addScalar(.5).multiply(x);void 0!==C?(FI.x=H*UE.x-C*UE.y,FI.y=C*UE.x+H*UE.y):FI.copy(UE);u.copy(z);u.x+=FI.x;
u.y+=FI.y;u.applyMatrix4(vca)}function GI(){E.call(this||p);(this||p)._currentLevel=0;(this||p).type="LOD";Object.defineProperties(this||p,{levels:{enumerable:!0,value:[]}});(this||p).autoUpdate=!0}function LO(u,z){u&&u.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");jb.call(this||p,u,z);(this||p).type="SkinnedMesh";(this||p).bindMode="attached";(this||p).bindMatrix=new uj;(this||p).bindMatrixInverse=new uj}function MO(u,z){u=u||
[];(this||p).bones=u.slice(0);(this||p).boneMatrices=new Float32Array(16*(this||p).bones.length);(this||p).frame=-1;if(void 0===z)this.calculateInverses();else if((this||p).bones.length===z.length)(this||p).boneInverses=z.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),(this||p).boneInverses=[],u=0,z=(this||p).bones.length;u<z;u++)(this||p).boneInverses.push(new uj)}function mX(){E.call(this||p);(this||p).type="Bone"}function NO(u,z,t){jb.call(this||p,u,z);(this||
p).instanceMatrix=new S(new Float32Array(16*t),16);(this||p).instanceColor=null;(this||p).count=t;(this||p).frustumCulled=!1}function Sl(u){M.call(this||p);(this||p).type="LineBasicMaterial";(this||p).color=new Hg(16777215);(this||p).linewidth=1;(this||p).linecap="round";(this||p).linejoin="round";(this||p).morphTargets=!1;this.setValues(u)}function ns(u,z,t){1===t&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");E.call(this||p);(this||
p).type="Line";(this||p).geometry=void 0!==u?u:new ya;(this||p).material=void 0!==z?z:new Sl;this.updateMorphTargets()}function up(u,z){ns.call(this||p,u,z);(this||p).type="LineSegments"}function OO(u,z){ns.call(this||p,u,z);(this||p).type="LineLoop"}function Ht(u){M.call(this||p);(this||p).type="PointsMaterial";(this||p).color=new Hg(16777215);(this||p).map=null;(this||p).alphaMap=null;(this||p).size=1;(this||p).sizeAttenuation=!0;(this||p).morphTargets=!1;this.setValues(u)}function VE(u,z){E.call(this||
p);(this||p).type="Points";(this||p).geometry=void 0!==u?u:new ya;(this||p).material=void 0!==z?z:new Ht;this.updateMorphTargets()}function nX(u,z,t,x,C,H,N){var T=oX.distanceSqToPoint(u);T<t&&(t=new wc,oX.closestPointToPoint(u,t),t.applyMatrix4(x),u=C.ray.origin.distanceTo(t),u<C.near||u>C.far||H.push({distance:u,distanceToRay:Math.sqrt(T),point:t,index:z,face:null,object:N}))}function pX(u,z,t,x,C,H,N,T,W){function Y(){ea.needsUpdate=!0;u.requestVideoFrameCallback(Y)}r.call(this||p,u,z,t,x,C,H,
N,T,W);(this||p).format=void 0!==N?N:1022;(this||p).minFilter=void 0!==H?H:1006;(this||p).magFilter=void 0!==C?C:1006;(this||p).generateMipmaps=!1;var ea=this||p;"requestVideoFrameCallback"in u&&u.requestVideoFrameCallback(Y)}function WE(u,z,t,x,C,H,N,T,W,Y,ea,sa){r.call(this||p,null,H,N,T,W,Y,x,C,ea,sa);(this||p).image={width:z,height:t};(this||p).mipmaps=u;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function HI(u,z,t,x,C,H,N,T,W){r.call(this||p,u,z,t,x,C,H,N,T,W);(this||p).needsUpdate=!0}function II(u,
z,t,x,C,H,N,T,W,Y){Y=void 0!==Y?Y:1026;if(1026!==Y&&1027!==Y)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===t&&1026===Y&&(t=1012);void 0===t&&1027===Y&&(t=1020);r.call(this||p,null,x,C,H,N,T,Y,t,W);(this||p).image={width:u,height:z};(this||p).magFilter=void 0!==N?N:1003;(this||p).minFilter=void 0!==T?T:1003;(this||p).flipY=!1;(this||p).generateMipmaps=!1}function al(){Object.defineProperty(this||p,"id",{value:ava+=2});(this||p).uuid=ti.generateUUID();
(this||p).name="";(this||p).type="Geometry";(this||p).vertices=[];(this||p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).elementsNeedUpdate=!1;(this||p).verticesNeedUpdate=!1;(this||p).uvsNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=!1;(this||p).lineDistancesNeedUpdate=
!1;(this||p).groupsNeedUpdate=!1}function wca(u,z,t,x,C){for(var H,N=0,T=z,W=t-x;T<t;T+=x)N+=(u[W]-u[T])*(u[T+1]+u[W+1]),W=T;if(C===0<N)for(C=z;C<t;C+=x)H=xca(C,u[C],u[C+1],H);else for(C=t-x;C>=z;C-=x)H=xca(C,u[C],u[C+1],H);H&&PO(H,H.next)&&(JI(H),H=H.next);return H}function Iz(u,z){if(!u)return u;z||(z=u);do{var t=!1;if(u.steiner||!PO(u,u.next)&&0!==cm(u.prev,u,u.next))u=u.next;else{JI(u);u=z=u.prev;if(u===u.next)break;t=!0}}while(t||u!==z);return z}function KI(u,z,t,x,C,H,N){if(u){if(!N&&H){var T=
u,W=T;do null===W.z&&(W.z=qX(W.x,W.y,x,C,H)),W.prevZ=W.prev,W=W.nextZ=W.next;while(W!==T);W.prevZ.nextZ=null;W.prevZ=null;T=W;var Y,ea,sa,Aa,Xa=1;do{W=T;var Va=T=null;for(ea=0;W;){ea++;var vb=W;for(Y=sa=0;Y<Xa&&(sa++,vb=vb.nextZ,vb);Y++);for(Aa=Xa;0<sa||0<Aa&&vb;)0!==sa&&(0===Aa||!vb||W.z<=vb.z)?(Y=W,W=W.nextZ,sa--):(Y=vb,vb=vb.nextZ,Aa--),Va?Va.nextZ=Y:T=Y,Y.prevZ=Va,Va=Y;W=vb}Va.nextZ=null;Xa*=2}while(1<ea)}for(T=u;u.prev!==u.next;){W=u.prev;vb=u.next;if(H)Va=bva(u,x,C,H);else a:if(Va=u,ea=Va.prev,
sa=Va,Xa=Va.next,0<=cm(ea,sa,Xa))Va=!1;else{for(Y=Va.next.next;Y!==Va.prev;){if(XE(ea.x,ea.y,sa.x,sa.y,Xa.x,Xa.y,Y.x,Y.y)&&0<=cm(Y.prev,Y,Y.next)){Va=!1;break a}Y=Y.next}Va=!0}if(Va)z.push(W.i/t),z.push(u.i/t),z.push(vb.i/t),JI(u),T=u=vb.next;else if(u=vb,u===T){if(!N)KI(Iz(u),z,t,x,C,H,1);else if(1===N){u=Iz(u);N=z;T=t;W=u;do vb=W.prev,Va=W.next.next,!PO(vb,Va)&&yca(vb,W,W.next,Va)&&LI(vb,Va)&&LI(Va,vb)&&(N.push(vb.i/T),N.push(W.i/T),N.push(Va.i/T),JI(W),JI(W.next),W=u=Va),W=W.next;while(W!==u);
u=Iz(W);KI(u,z,t,x,C,H,2)}else if(2===N)a:{N=u;do{for(T=N.next.next;T!==N.prev;){if(W=N.i!==T.i){W=N;vb=T;if(Va=W.next.i!==vb.i&&W.prev.i!==vb.i){b:{Va=W;do{if(Va.i!==W.i&&Va.next.i!==W.i&&Va.i!==vb.i&&Va.next.i!==vb.i&&yca(Va,Va.next,W,vb)){Va=!0;break b}Va=Va.next}while(Va!==W);Va=!1}Va=!Va}if(Va){if(Va=LI(W,vb)&&LI(vb,W)){Va=W;ea=!1;sa=(W.x+vb.x)/2;Xa=(W.y+vb.y)/2;do Va.y>Xa!==Va.next.y>Xa&&Va.next.y!==Va.y&&sa<(Va.next.x-Va.x)*(Xa-Va.y)/(Va.next.y-Va.y)+Va.x&&(ea=!ea),Va=Va.next;while(Va!==W);
Va=ea}Va=Va&&(cm(W.prev,W,vb.prev)||cm(W,vb.prev,vb))||PO(W,vb)&&0<cm(W.prev,W,W.next)&&0<cm(vb.prev,vb,vb.next)}W=Va}if(W){u=zca(N,T);N=Iz(N,N.next);u=Iz(u,u.next);KI(N,z,t,x,C,H);KI(u,z,t,x,C,H);break a}T=T.next}N=N.next}while(N!==u)}break}}}}function bva(u,z,t,x){var C=u.prev,H=u.next;if(0<=cm(C,u,H))return!1;var N=C.x>u.x?C.x>H.x?C.x:H.x:u.x>H.x?u.x:H.x,T=C.y>u.y?C.y>H.y?C.y:H.y:u.y>H.y?u.y:H.y,W=qX(C.x<u.x?C.x<H.x?C.x:H.x:u.x<H.x?u.x:H.x,C.y<u.y?C.y<H.y?C.y:H.y:u.y<H.y?u.y:H.y,z,t,x);z=qX(N,
T,z,t,x);t=u.prevZ;for(x=u.nextZ;t&&t.z>=W&&x&&x.z<=z;){if(t!==u.prev&&t!==u.next&&XE(C.x,C.y,u.x,u.y,H.x,H.y,t.x,t.y)&&0<=cm(t.prev,t,t.next))return!1;t=t.prevZ;if(x!==u.prev&&x!==u.next&&XE(C.x,C.y,u.x,u.y,H.x,H.y,x.x,x.y)&&0<=cm(x.prev,x,x.next))return!1;x=x.nextZ}for(;t&&t.z>=W;){if(t!==u.prev&&t!==u.next&&XE(C.x,C.y,u.x,u.y,H.x,H.y,t.x,t.y)&&0<=cm(t.prev,t,t.next))return!1;t=t.prevZ}for(;x&&x.z<=z;){if(x!==u.prev&&x!==u.next&&XE(C.x,C.y,u.x,u.y,H.x,H.y,x.x,x.y)&&0<=cm(x.prev,x,x.next))return!1;
x=x.nextZ}return!0}function cva(u,z){return u.x-z.x}function dva(u,z){var t=z,x=u.x,C=u.y,H=-Infinity;do{if(C<=t.y&&C>=t.next.y&&t.next.y!==t.y){var N=t.x+(C-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(N<=x&&N>H){H=N;if(N===x){if(C===t.y)return t;if(C===t.next.y)return t.next}var T=t.x<t.next.x?t:t.next}}t=t.next}while(t!==z);if(!T)return null;if(x===H)return T;z=T;N=T.x;var W=T.y,Y=Infinity;t=T;do{if(x>=t.x&&t.x>=N&&x!==t.x&&XE(C<W?x:H,C,N,W,C<W?H:x,C,t.x,t.y)){var ea=Math.abs(C-t.y)/(x-t.x);var sa;if((sa=
LI(t,u))&&!(sa=ea<Y)&&(sa=ea===Y)&&!(sa=t.x>T.x)&&(sa=t.x===T.x)){sa=T;var Aa=t;sa=0>cm(sa.prev,sa,Aa.prev)&&0>cm(Aa.next,sa,sa.next)}sa&&(T=t,Y=ea)}t=t.next}while(t!==z);return T}function qX(u,z,t,x,C){u=32767*(u-t)*C;z=32767*(z-x)*C;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;return(u|u<<1)&1431655765|((z|z<<1)&1431655765)<<1}function eva(u){var z=u,t=u;do{if(z.x<t.x||z.x===t.x&&z.y<t.y)t=z;z=z.next}while(z!==u);return t}
function XE(u,z,t,x,C,H,N,T){return 0<=(C-N)*(z-T)-(u-N)*(H-T)&&0<=(u-N)*(x-T)-(t-N)*(z-T)&&0<=(t-N)*(H-T)-(C-N)*(x-T)}function cm(u,z,t){return(z.y-u.y)*(t.x-z.x)-(z.x-u.x)*(t.y-z.y)}function PO(u,z){return u.x===z.x&&u.y===z.y}function yca(u,z,t,x){var C=QO(cm(u,z,t)),H=QO(cm(u,z,x)),N=QO(cm(t,x,u)),T=QO(cm(t,x,z));return C!==H&&N!==T||0===C&&RO(u,t,z)||0===H&&RO(u,x,z)||0===N&&RO(t,u,x)||0===T&&RO(t,z,x)?!0:!1}function RO(u,z,t){return z.x<=Math.max(u.x,t.x)&&z.x>=Math.min(u.x,t.x)&&z.y<=Math.max(u.y,
t.y)&&z.y>=Math.min(u.y,t.y)}function QO(u){return 0<u?1:0>u?-1:0}function LI(u,z){return 0>cm(u.prev,u,u.next)?0<=cm(u,z,u.next)&&0<=cm(u,u.prev,z):0>cm(u,z,u.prev)||0>cm(u,u.next,z)}function zca(u,z){var t=new rX(u.i,u.x,u.y),x=new rX(z.i,z.x,z.y),C=u.next,H=z.prev;u.next=z;z.prev=u;t.next=C;C.prev=t;x.next=t;t.prev=x;H.next=x;x.prev=H;return x}function xca(u,z,t,x){u=new rX(u,z,t);x?(u.next=x.next,u.prev=x,x.next.prev=u,x.next=u):(u.prev=u,u.next=u);return u}function JI(u){u.next.prev=u.prev;u.prev.next=
u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function rX(u,z,t){(this||p).i=u;(this||p).x=z;(this||p).y=t;(this||p).prev=null;(this||p).next=null;(this||p).z=null;(this||p).prevZ=null;(this||p).nextZ=null;(this||p).steiner=!1}function Aca(u){var z=u.length;2<z&&u[z-1].equals(u[0])&&u.pop()}function Bca(u,z){for(var t=0;t<z.length;t++)u.push(z[t].x),u.push(z[t].y)}function YE(u,z,t){ya.call(this||p);(this||p).type="ParametricBufferGeometry";(this||p).parameters={func:u,
slices:z,stacks:t};var x=[],C=[],H=[],N=[],T=new wc,W=new wc,Y=new wc,ea=new wc,sa=new wc;3>u.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var Aa=z+1,Xa=0;Xa<=t;Xa++)for(var Va=Xa/t,vb=0;vb<=z;vb++){var sb=vb/z;u(sb,Va,W);C.push(W.x,W.y,W.z);0<=sb-1E-5?(u(sb-1E-5,Va,Y),ea.subVectors(W,Y)):(u(sb+1E-5,Va,Y),ea.subVectors(Y,W));0<=Va-1E-5?(u(sb,Va-1E-5,Y),sa.subVectors(W,Y)):(u(sb,Va+1E-5,Y),sa.subVectors(Y,W));T.crossVectors(ea,sa).normalize();
H.push(T.x,T.y,T.z);N.push(sb,Va)}for(u=0;u<t;u++)for(T=0;T<z;T++)W=u*Aa+T+1,Y=(u+1)*Aa+T+1,ea=(u+1)*Aa+T,x.push(u*Aa+T,W,ea),x.push(W,Y,ea);this.setIndex(x);this.setAttribute("position",new V(C,3));this.setAttribute("normal",new V(H,3));this.setAttribute("uv",new V(N,2))}function MI(u,z,t){al.call(this||p);(this||p).type="ParametricGeometry";(this||p).parameters={func:u,slices:z,stacks:t};this.fromBufferGeometry(new YE(u,z,t));this.mergeVertices()}function hC(u){M.call(this||p);(this||p).type="ShadowMaterial";
(this||p).color=new Hg(0);(this||p).transparent=!0;this.setValues(u)}function mx(u){La.call(this||p,u);(this||p).type="RawShaderMaterial"}function Hv(u){M.call(this||p);(this||p).defines={STANDARD:""};(this||p).type="MeshStandardMaterial";(this||p).color=new Hg(16777215);(this||p).roughness=1;(this||p).metalness=0;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new Hg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new cf(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).roughnessMap=null;(this||p).metalnessMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).envMapIntensity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin=
"round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;(this||p).vertexTangents=!1;this.setValues(u)}function Jz(u){Hv.call(this||p);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).type="MeshPhysicalMaterial";(this||p).clearcoat=0;(this||p).clearcoatMap=null;(this||p).clearcoatRoughness=0;(this||p).clearcoatRoughnessMap=null;(this||p).clearcoatNormalScale=new cf(1,1);(this||p).clearcoatNormalMap=null;(this||p).reflectivity=.5;Object.defineProperty(this||p,"ior",{get:function(){return(1+
.4*(this||p).reflectivity)/(1-.4*(this||p).reflectivity)},set:function(z){(this||p).reflectivity=ti.clamp(2.5*(z-1)/(z+1),0,1)}});(this||p).sheen=null;(this||p).transmission=0;(this||p).transmissionMap=null;this.setValues(u)}function Kz(u){M.call(this||p);(this||p).type="MeshPhongMaterial";(this||p).color=new Hg(16777215);(this||p).specular=new Hg(1118481);(this||p).shininess=30;(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=
1;(this||p).emissive=new Hg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new cf(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=
1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function iC(u){M.call(this||p);(this||p).defines={TOON:""};(this||p).type="MeshToonMaterial";(this||p).color=new Hg(16777215);(this||p).map=null;(this||p).gradientMap=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new Hg(0);(this||p).emissiveIntensity=1;(this||
p).emissiveMap=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new cf(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function jC(u){M.call(this||
p);(this||p).type="MeshNormalMaterial";(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new cf(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).fog=!1;(this||p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function kC(u){M.call(this||p);(this||p).type="MeshLambertMaterial";(this||p).color=
new Hg(16777215);(this||p).map=null;(this||p).lightMap=null;(this||p).lightMapIntensity=1;(this||p).aoMap=null;(this||p).aoMapIntensity=1;(this||p).emissive=new Hg(0);(this||p).emissiveIntensity=1;(this||p).emissiveMap=null;(this||p).specularMap=null;(this||p).alphaMap=null;(this||p).envMap=null;(this||p).combine=0;(this||p).reflectivity=1;(this||p).refractionRatio=.98;(this||p).wireframe=!1;(this||p).wireframeLinewidth=1;(this||p).wireframeLinecap="round";(this||p).wireframeLinejoin="round";(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function lC(u){M.call(this||p);(this||p).defines={MATCAP:""};(this||p).type="MeshMatcapMaterial";(this||p).color=new Hg(16777215);(this||p).matcap=null;(this||p).map=null;(this||p).bumpMap=null;(this||p).bumpScale=1;(this||p).normalMap=null;(this||p).normalMapType=0;(this||p).normalScale=new cf(1,1);(this||p).displacementMap=null;(this||p).displacementScale=1;(this||p).displacementBias=0;(this||p).alphaMap=null;(this||
p).skinning=!1;(this||p).morphTargets=!1;(this||p).morphNormals=!1;this.setValues(u)}function mC(u){Sl.call(this||p);(this||p).type="LineDashedMaterial";(this||p).scale=1;(this||p).dashSize=3;(this||p).gapSize=1;this.setValues(u)}function Yq(u,z,t,x){(this||p).parameterPositions=u;(this||p)._cachedIndex=0;(this||p).resultBuffer=void 0!==x?x:new z.constructor(t);(this||p).sampleValues=z;(this||p).valueSize=t}function SO(u,z,t,x){Yq.call(this||p,u,z,t,x);(this||p)._weightPrev=-0;(this||p)._offsetPrev=
-0;(this||p)._weightNext=-0;(this||p)._offsetNext=-0}function NI(u,z,t,x){Yq.call(this||p,u,z,t,x)}function TO(u,z,t,x){Yq.call(this||p,u,z,t,x)}function qo(u,z,t,x){if(void 0===u)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===z||0===z.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+u);(this||p).name=u;(this||p).times=Dl.convertArray(z,(this||p).TimeBufferType);(this||p).values=Dl.convertArray(t,(this||p).ValueBufferType);this.setInterpolation(x||(this||
p).DefaultInterpolation)}function UO(u,z,t){qo.call(this||p,u,z,t)}function VO(u,z,t,x){qo.call(this||p,u,z,t,x)}function ZE(u,z,t,x){qo.call(this||p,u,z,t,x)}function WO(u,z,t,x){Yq.call(this||p,u,z,t,x)}function OI(u,z,t,x){qo.call(this||p,u,z,t,x)}function XO(u,z,t,x){qo.call(this||p,u,z,t,x)}function $E(u,z,t,x){qo.call(this||p,u,z,t,x)}function os(u,z,t,x){(this||p).name=u;(this||p).tracks=t;(this||p).duration=void 0!==z?z:-1;(this||p).blendMode=void 0!==x?x:2500;(this||p).uuid=ti.generateUUID();
0>(this||p).duration&&this.resetDuration()}function fva(u){switch(u.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ZE;case "vector":case "vector2":case "vector3":case "vector4":return $E;case "color":return VO;case "quaternion":return OI;case "bool":case "boolean":return UO;case "string":return XO}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+u);}function gva(u){if(void 0===u.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");
var z=fva(u.type);if(void 0===u.times){var t=[],x=[];Dl.flattenJSON(u.keys,t,x,"value");u.times=t;u.values=x}return void 0!==z.parse?z.parse(u):new z(u.name,u.times,u.values,u.interpolation)}function sX(u,z,t){var x=this||p,C=!1,H=0,N=0,T=void 0,W=[];(this||p).onStart=void 0;(this||p).onLoad=u;(this||p).onProgress=z;(this||p).onError=t;(this||p).itemStart=function(Y){N++;if(!1===C&&void 0!==x.onStart)x.onStart(Y,H,N);C=!0};(this||p).itemEnd=function(Y){H++;if(void 0!==x.onProgress)x.onProgress(Y,
H,N);if(H===N&&(C=!1,void 0!==x.onLoad))x.onLoad()};(this||p).itemError=function(Y){if(void 0!==x.onError)x.onError(Y)};(this||p).resolveURL=function(Y){return T?T(Y):Y};(this||p).setURLModifier=function(Y){T=Y;return this||p};(this||p).addHandler=function(Y,ea){W.push(Y,ea);return this||p};(this||p).removeHandler=function(Y){Y=W.indexOf(Y);-1!==Y&&W.splice(Y,2);return this||p};(this||p).getHandler=function(Y){for(var ea=0,sa=W.length;ea<sa;ea+=2){var Aa=W[ea],Xa=W[ea+1];Aa.global&&(Aa.lastIndex=
0);if(Aa.test(Y))return Xa}return null}}function Vk(u){(this||p).manager=void 0!==u?u:Cca;(this||p).crossOrigin="anonymous";(this||p).withCredentials=!1;(this||p).path="";(this||p).resourcePath="";(this||p).requestHeader={}}function ps(u){Vk.call(this||p,u)}function tX(u){Vk.call(this||p,u)}function uX(u){Vk.call(this||p,u)}function aF(u){Vk.call(this||p,u)}function YO(u){Vk.call(this||p,u)}function ZO(u){Vk.call(this||p,u)}function $O(u){Vk.call(this||p,u)}function sh(){(this||p).type="Curve";(this||
p).arcLengthDivisions=200}function Zq(u,z,t,x,C,H,N,T){sh.call(this||p);(this||p).type="EllipseCurve";(this||p).aX=u||0;(this||p).aY=z||0;(this||p).xRadius=t||1;(this||p).yRadius=x||1;(this||p).aStartAngle=C||0;(this||p).aEndAngle=H||2*Math.PI;(this||p).aClockwise=N||!1;(this||p).aRotation=T||0}function bF(u,z,t,x,C,H){Zq.call(this||p,u,z,t,t,x,C,H);(this||p).type="ArcCurve"}function vX(){var u=0,z=0,t=0,x=0;return{initCatmullRom:function(C,H,N,T,W){C=W*(N-C);T=W*(T-H);u=H;z=C;t=-3*H+3*N-2*C-T;x=
2*H-2*N+C+T},initNonuniformCatmullRom:function(C,H,N,T,W,Y,ea){C=((H-C)/W-(N-C)/(W+Y)+(N-H)/Y)*Y;T=((N-H)/Y-(T-H)/(Y+ea)+(T-N)/ea)*Y;u=H;z=C;t=-3*H+3*N-2*C-T;x=2*H-2*N+C+T},calc:function(C){var H=C*C;return u+z*C+t*H+x*H*C}}}function Lo(u,z,t,x){sh.call(this||p);(this||p).type="CatmullRomCurve3";(this||p).points=u||[];(this||p).closed=z||!1;(this||p).curveType=t||"centripetal";(this||p).tension=void 0!==x?x:.5}function Dca(u,z,t,x,C){z=.5*(x-z);C=.5*(C-t);var H=u*u;return(2*t-2*x+z+C)*u*H+(-3*t+3*
x-2*z-C)*H+z*u+t}function PI(u,z,t,x){var C=1-u;return C*C*z+2*(1-u)*u*t+u*u*x}function QI(u,z,t,x,C){var H=1-u,N=1-u;return H*H*H*z+3*N*N*u*t+3*(1-u)*u*u*x+u*u*u*C}function It(u,z,t,x){sh.call(this||p);(this||p).type="CubicBezierCurve";(this||p).v0=u||new cf;(this||p).v1=z||new cf;(this||p).v2=t||new cf;(this||p).v3=x||new cf}function Iv(u,z,t,x){sh.call(this||p);(this||p).type="CubicBezierCurve3";(this||p).v0=u||new wc;(this||p).v1=z||new wc;(this||p).v2=t||new wc;(this||p).v3=x||new wc}function gq(u,
z){sh.call(this||p);(this||p).type="LineCurve";(this||p).v1=u||new cf;(this||p).v2=z||new cf}function Jt(u,z){sh.call(this||p);(this||p).type="LineCurve3";(this||p).v1=u||new wc;(this||p).v2=z||new wc}function Kt(u,z,t){sh.call(this||p);(this||p).type="QuadraticBezierCurve";(this||p).v0=u||new cf;(this||p).v1=z||new cf;(this||p).v2=t||new cf}function Jv(u,z,t){sh.call(this||p);(this||p).type="QuadraticBezierCurve3";(this||p).v0=u||new wc;(this||p).v1=z||new wc;(this||p).v2=t||new wc}function Lt(u){sh.call(this||
p);(this||p).type="SplineCurve";(this||p).points=u||[]}function nx(){sh.call(this||p);(this||p).type="CurvePath";(this||p).curves=[];(this||p).autoClose=!1}function Mt(u){nx.call(this||p);(this||p).type="Path";(this||p).currentPoint=new cf;u&&this.setFromPoints(u)}function Lz(u){Mt.call(this||p,u);(this||p).uuid=ti.generateUUID();(this||p).type="Shape";(this||p).holes=[]}function sl(u,z){E.call(this||p);(this||p).type="Light";(this||p).color=new Hg(u);(this||p).intensity=void 0!==z?z:1}function aP(u,
z,t){sl.call(this||p,u,t);(this||p).type="HemisphereLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).groundColor=new Hg(z)}function ox(u){(this||p).camera=u;(this||p).bias=0;(this||p).normalBias=0;(this||p).radius=1;(this||p).mapSize=new cf(512,512);(this||p).map=null;(this||p).mapPass=null;(this||p).matrix=new uj;(this||p).autoUpdate=!0;(this||p).needsUpdate=!1;(this||p)._frustum=new AI;(this||p)._frameExtents=new cf(1,1);(this||p)._viewportCount=1;(this||p)._viewports=[new $k(0,
0,1,1)]}function wX(){ox.call(this||p,new qc(50,1,.5,500));(this||p).focus=1}function bP(u,z,t,x,C,H){sl.call(this||p,u,z);(this||p).type="SpotLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;Object.defineProperty(this||p,"power",{get:function(){return(this||p).intensity*Math.PI},set:function(N){(this||p).intensity=N/Math.PI}});(this||p).distance=void 0!==t?t:0;(this||p).angle=void 0!==x?x:Math.PI/3;(this||p).penumbra=void 0!==C?C:0;(this||p).decay=void 0!==H?
H:1;(this||p).shadow=new wX}function xX(){ox.call(this||p,new qc(90,1,.5,500));(this||p)._frameExtents=new cf(4,2);(this||p)._viewportCount=6;(this||p)._viewports=[new $k(2,1,1,1),new $k(0,1,1,1),new $k(3,1,1,1),new $k(1,1,1,1),new $k(3,0,1,1),new $k(1,0,1,1)];(this||p)._cubeDirections=[new wc(1,0,0),new wc(-1,0,0),new wc(0,0,1),new wc(0,0,-1),new wc(0,1,0),new wc(0,-1,0)];(this||p)._cubeUps=[new wc(0,1,0),new wc(0,1,0),new wc(0,1,0),new wc(0,1,0),new wc(0,0,1),new wc(0,0,-1)]}function cP(u,z,t,x){sl.call(this||
p,u,z);(this||p).type="PointLight";Object.defineProperty(this||p,"power",{get:function(){return 4*(this||p).intensity*Math.PI},set:function(C){(this||p).intensity=C/(4*Math.PI)}});(this||p).distance=void 0!==t?t:0;(this||p).decay=void 0!==x?x:1;(this||p).shadow=new xX}function cF(u,z,t,x,C,H){Lb.call(this||p);(this||p).type="OrthographicCamera";(this||p).zoom=1;(this||p).view=null;(this||p).left=void 0!==u?u:-1;(this||p).right=void 0!==z?z:1;(this||p).top=void 0!==t?t:1;(this||p).bottom=void 0!==
x?x:-1;(this||p).near=void 0!==C?C:.1;(this||p).far=void 0!==H?H:2E3;this.updateProjectionMatrix()}function yX(){ox.call(this||p,new cF(-5,5,5,-5,.5,500))}function dP(u,z){sl.call(this||p,u,z);(this||p).type="DirectionalLight";(this||p).position.copy(E.DefaultUp);this.updateMatrix();(this||p).target=new E;(this||p).shadow=new yX}function eP(u,z){sl.call(this||p,u,z);(this||p).type="AmbientLight"}function fP(u,z,t,x){sl.call(this||p,u,z);(this||p).type="RectAreaLight";(this||p).width=void 0!==t?t:
10;(this||p).height=void 0!==x?x:10}function qs(u,z){sl.call(this||p,void 0,z);(this||p).type="LightProbe";(this||p).sh=void 0!==u?u:new Eca}function gP(u){Vk.call(this||p,u);(this||p).textures={}}function RI(){ya.call(this||p);(this||p).type="InstancedBufferGeometry";(this||p).instanceCount=Infinity}function hP(u,z,t,x){"number"===typeof t&&(x=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));S.call(this||p,u,z,t);(this||p).meshPerAttribute=
x||1}function iP(u){Vk.call(this||p,u)}function zX(u){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");Vk.call(this||p,u);(this||p).options={premultiplyAlpha:"none"}}function AX(){(this||p).type="ShapePath";(this||p).color=new Hg;(this||p).subPaths=[];(this||p).currentPath=null}function BX(u){(this||p).type="Font";(this||p).data=u}function CX(u){Vk.call(this||
p,u)}function jP(u){Vk.call(this||p,u)}function DX(u,z,t){qs.call(this||p,void 0,t);u=(new Hg).set(u);t=(new Hg).set(z);z=new wc(u.r,u.g,u.b);u=new wc(t.r,t.g,t.b);t=Math.sqrt(Math.PI);var x=t*Math.sqrt(.75);(this||p).sh.coefficients[0].copy(z).add(u).multiplyScalar(t);(this||p).sh.coefficients[1].copy(z).sub(u).multiplyScalar(x)}function EX(u,z){qs.call(this||p,void 0,z);u=(new Hg).set(u);(this||p).sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Fca(){(this||p).type=
"StereoCamera";(this||p).aspect=1;(this||p).eyeSep=.064;(this||p).cameraL=new qc;(this||p).cameraL.layers.enable(1);(this||p).cameraL.matrixAutoUpdate=!1;(this||p).cameraR=new qc;(this||p).cameraR.layers.enable(2);(this||p).cameraR.matrixAutoUpdate=!1;(this||p)._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function FX(u,z,t){(this||p).binding=u;(this||p).valueSize=t;switch(z){case "quaternion":u=(this||p)._slerp;z=(this||p)._slerpAdditive;var x=(this||p)._setAdditiveIdentityQuaternion;
(this||p).buffer=new Float64Array(6*t);(this||p)._workIndex=5;break;case "string":case "bool":u=(this||p)._select;z=(this||p)._select;x=(this||p)._setAdditiveIdentityOther;(this||p).buffer=Array(5*t);break;default:u=(this||p)._lerp,z=(this||p)._lerpAdditive,x=(this||p)._setAdditiveIdentityNumeric,(this||p).buffer=new Float64Array(5*t)}(this||p)._mixBufferRegion=u;(this||p)._mixBufferRegionAdditive=z;(this||p)._setIdentity=x;(this||p)._origIndex=3;(this||p)._addIndex=4;(this||p).cumulativeWeight=0;
(this||p).cumulativeWeightAdditive=0;(this||p).useCount=0;(this||p).referenceCount=0}function Gca(u,z,t){t=t||Mo.parseTrackName(z);(this||p)._targetGroup=u;(this||p)._bindings=u.subscribe_(z,t)}function Mo(u,z,t){(this||p).path=z;(this||p).parsedPath=t||Mo.parseTrackName(z);(this||p).node=Mo.findNode(u,(this||p).parsedPath.nodeName)||u;(this||p).rootNode=u}function Hca(){(this||p).uuid=ti.generateUUID();(this||p)._objects=Array.prototype.slice.call(arguments);(this||p).nCachedObjects_=0;var u={};
(this||p)._indicesByUUID=u;for(var z=0,t=arguments.length;z!==t;++z)u[arguments[z].uuid]=z;(this||p)._paths=[];(this||p)._parsedPaths=[];(this||p)._bindings=[];(this||p)._bindingsIndicesByPath={};var x=this||p;(this||p).stats={objects:{get total(){return x._objects.length},get inUse(){return(this||p).total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function GX(u){(this||p)._root=u;this._initMemoryManager();(this||p)._accuIndex=0;(this||p).time=0;(this||p).timeScale=1}
function HX(u,z,t){Xq.call(this||p,u,z);(this||p).meshPerAttribute=t||1}function IX(u,z,t,x,C){(this||p).buffer=u;(this||p).type=z;(this||p).itemSize=t;(this||p).elementSize=x;(this||p).count=C;(this||p).version=0}function JX(u,z,t,x){(this||p).ray=new dF(u,z);(this||p).near=t||0;(this||p).far=x||Infinity;(this||p).camera=null;(this||p).layers=new cX;(this||p).params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties((this||p).params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");
return(this||p).Points}}})}function Ica(u,z){return u.distance-z.distance}function KX(u,z,t,x){u.layers.test(z.layers)&&u.raycast(z,t);if(!0===x){u=u.children;x=0;for(var C=u.length;x<C;x++)KX(u[x],z,t,!0)}}function SI(u){E.call(this||p);(this||p).material=u;(this||p).render=function(){};(this||p).hasPositions=!1;(this||p).hasNormals=!1;(this||p).hasColors=!1;(this||p).hasUvs=!1;(this||p).positionArray=null;(this||p).normalArray=null;(this||p).colorArray=null;(this||p).uvArray=null;(this||p).count=
0}function Jca(u){var z=[];u&&u.isBone&&z.push(u);for(var t=0;t<u.children.length;t++)z.push.apply(z,Jca(u.children[t]));return z}function ym(u,z,t,x,C,H,N){kP.set(C,H,N).unproject(x);u=z[u];if(void 0!==u)for(t=t.getAttribute("position"),z=0,x=u.length;z<x;z++)t.setXYZ(u[z],kP.x,kP.y,kP.z)}function Kca(u){u=new v(3*Kv,3*Kv,u);u.texture.mapping=306;u.texture.name="PMREM.cubeUv";u.scissorTest=!0;return u}function lP(u,z,t,x,C){u.viewport.set(z,t,x,C);u.scissor.set(z,t,x,C)}function Lca(){var u=new cf(1,
1);return new mx({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:u},inputEncoding:{value:Lv[3E3]},outputEncoding:{value:Lv[3E3]}},vertexShader:LX(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+MX()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Mca(){return new mx({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Lv[3E3]},outputEncoding:{value:Lv[3E3]}},vertexShader:LX(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+MX()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function LX(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function MX(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
function Nca(u){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Lo.call(this||p,u);(this||p).type="catmullrom";(this||p).closed=!0}function Oca(u){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");Lo.call(this||p,u);(this||p).type="catmullrom"}function NX(u){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");Lo.call(this||p,u);(this||p).type="catmullrom"}void 0===Number.EPSILON&&
(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(u){return"number"===typeof u&&isFinite(u)&&Math.floor(u)===u});void 0===Math.sign&&(Math.sign=function(u){return 0>u?-1:0<u?1:+u});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(u){if(void 0===u||null===u)throw new TypeError("Cannot convert undefined or null to object");
for(var z=Object(u),t=1;t<arguments.length;t++){var x=arguments[t];if(void 0!==x&&null!==x)for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(z[C]=x[C])}return z});Object.assign(d.prototype,{addEventListener:function(u,z){void 0===(this||p)._listeners&&((this||p)._listeners={});var t=(this||p)._listeners;void 0===t[u]&&(t[u]=[]);-1===t[u].indexOf(z)&&t[u].push(z)},hasEventListener:function(u,z){if(void 0===(this||p)._listeners)return!1;var t=(this||p)._listeners;return void 0!==t[u]&&-1!==
t[u].indexOf(z)},removeEventListener:function(u,z){void 0!==(this||p)._listeners&&(u=(this||p)._listeners[u],void 0!==u&&(z=u.indexOf(z),-1!==z&&u.splice(z,1)))},dispatchEvent:function(u){if(void 0!==(this||p)._listeners){var z=(this||p)._listeners[u.type];if(void 0!==z){u.target=this||p;z=z.slice(0);for(var t=0,x=z.length;t<x;t++)z[t].call(this||p,u)}}}});for(var ro=[],TI=0;256>TI;TI++)ro[TI]=(16>TI?"0":"")+TI.toString(16);var mP=1234567,ti={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var u=
4294967295*Math.random()|0,z=4294967295*Math.random()|0,t=4294967295*Math.random()|0,x=4294967295*Math.random()|0;return(ro[u&255]+ro[u>>8&255]+ro[u>>16&255]+ro[u>>24&255]+"-"+ro[z&255]+ro[z>>8&255]+"-"+ro[z>>16&15|64]+ro[z>>24&255]+"-"+ro[t&63|128]+ro[t>>8&255]+"-"+ro[t>>16&255]+ro[t>>24&255]+ro[x&255]+ro[x>>8&255]+ro[x>>16&255]+ro[x>>24&255]).toUpperCase()},clamp:function(u,z,t){return Math.max(z,Math.min(t,u))},euclideanModulo:function(u,z){return(u%z+z)%z},mapLinear:function(u,z,t,x,C){return x+
(u-z)*(C-x)/(t-z)},lerp:function(u,z,t){return(1-t)*u+t*z},smoothstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*(3-2*u)},smootherstep:function(u,z,t){if(u<=z)return 0;if(u>=t)return 1;u=(u-z)/(t-z);return u*u*u*(u*(6*u-15)+10)},randInt:function(u,z){return u+Math.floor(Math.random()*(z-u+1))},randFloat:function(u,z){return u+Math.random()*(z-u)},randFloatSpread:function(u){return u*(.5-Math.random())},seededRandom:function(u){void 0!==u&&(mP=u%2147483647);mP=16807*
mP%2147483647;return(mP-1)/2147483646},degToRad:function(u){return u*ti.DEG2RAD},radToDeg:function(u){return u*ti.RAD2DEG},isPowerOfTwo:function(u){return 0===(u&u-1)&&0!==u},ceilPowerOfTwo:function(u){return Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},floorPowerOfTwo:function(u){return Math.pow(2,Math.floor(Math.log(u)/Math.LN2))},setQuaternionFromProperEuler:function(u,z,t,x,C){var H=Math.cos,N=Math.sin,T=H(t/2);t=N(t/2);var W=H((z+x)/2),Y=N((z+x)/2),ea=H((z-x)/2),sa=N((z-x)/2);H=H((x-z)/2);z=
N((x-z)/2);switch(C){case "XYX":u.set(T*Y,t*ea,t*sa,T*W);break;case "YZY":u.set(t*sa,T*Y,t*ea,T*W);break;case "ZXZ":u.set(t*ea,t*sa,T*Y,T*W);break;case "XZX":u.set(T*Y,t*z,t*H,T*W);break;case "YXY":u.set(t*H,T*Y,t*z,T*W);break;case "ZYZ":u.set(t*z,t*H,T*Y,T*W);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+C)}}},cf=function(){function u(t,x){void 0===t&&(t=0);void 0===x&&(x=0);Object.defineProperty(this||p,"isVector2",{value:!0});(this||
p).x=t;(this||p).y=x}var z=u.prototype;z.set=function(t,x){(this||p).x=t;(this||p).y=x;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||p).y=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||
p).y;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;return this||p};z.addVectors=function(t,
x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;return this||
p};z.multiply=function(t){(this||p).x*=t.x;(this||p).y*=t.y;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;return this||p};z.divide=function(t){(this||p).x/=t.x;(this||p).y/=t.y;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6];(this||p).y=t[1]*x+t[4]*C+t[7];return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||
p).y,t.y);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,
Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);
return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y};z.cross=function(t){return(this||p).x*t.y-(this||p).y*t.x};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)};z.normalize=function(){return this.divideScalar(this.length()||
1)};z.angle=function(){return Math.atan2(-(this||p).y,-(this||p).x)+Math.PI};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x;t=(this||p).y-t.y;return x*x+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");(this||p).x=
t.getX(x);(this||p).y=t.getY(x);return this||p};z.rotateAround=function(t,x){var C=Math.cos(x);x=Math.sin(x);var H=(this||p).x-t.x,N=(this||p).y-t.y;(this||p).x=H*C-N*x+t.x;(this||p).y=H*x+N*C+t.y;return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).x},set:function(t){(this||p).x=t}},{key:"height",get:function(){return(this||p).y},set:function(t){(this||p).y=t}}]);return u}(),tp=function(){function u(){Object.defineProperty(this||
p,"isMatrix3",{value:!0});(this||p).elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,H,N,T,W,Y,ea){var sa=(this||p).elements;sa[0]=t;sa[1]=H;sa[2]=W;sa[3]=x;sa[4]=N;sa[5]=Y;sa[6]=C;sa[7]=T;sa[8]=ea;return this||p};z.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this||p};z.clone=function(){return(new (this||p).constructor).fromArray((this||p).elements)};z.copy=
function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrix3Column(this||p,0);x.setFromMatrix3Column(this||p,1);C.setFromMatrix3Column(this||p,2);return this||p};z.setFromMatrix4=function(t){t=t.elements;this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]);return this||p};z.multiply=function(t){return this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,
this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,H=x.elements;x=(this||p).elements;t=C[0];var N=C[3],T=C[6],W=C[1],Y=C[4],ea=C[7],sa=C[2],Aa=C[5];C=C[8];var Xa=H[0],Va=H[3],vb=H[6],sb=H[1],ad=H[4],Bc=H[7],rd=H[2],Jc=H[5];H=H[8];x[0]=t*Xa+N*sb+T*rd;x[3]=t*Va+N*ad+T*Jc;x[6]=t*vb+N*Bc+T*H;x[1]=W*Xa+Y*sb+ea*rd;x[4]=W*Va+Y*ad+ea*Jc;x[7]=W*vb+Y*Bc+ea*H;x[2]=sa*Xa+Aa*sb+C*rd;x[5]=sa*Va+Aa*ad+C*Jc;x[8]=sa*vb+Aa*Bc+C*H;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=
t;x[3]*=t;x[6]*=t;x[1]*=t;x[4]*=t;x[7]*=t;x[2]*=t;x[5]*=t;x[8]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[1],H=t[2],N=t[3],T=t[4],W=t[5],Y=t[6],ea=t[7];t=t[8];return x*T*t-x*W*ea-C*N*t+C*W*Y+H*N*ea-H*T*Y};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var C=t.elements;t=(this||p).elements;x=C[0];var H=C[1],N=C[2],T=C[3],W=C[4],Y=C[5],ea=C[6],sa=C[7];C=C[8];var Aa=C*W-Y*sa,
Xa=Y*ea-C*T,Va=sa*T-W*ea,vb=x*Aa+H*Xa+N*Va;if(0===vb)return this.set(0,0,0,0,0,0,0,0,0);vb=1/vb;t[0]=Aa*vb;t[1]=(N*sa-C*H)*vb;t[2]=(Y*H-N*W)*vb;t[3]=Xa*vb;t[4]=(C*x-N*ea)*vb;t[5]=(N*T-Y*x)*vb;t[6]=Va*vb;t[7]=(H*ea-sa*x)*vb;t[8]=(W*x-H*T)*vb;return this||p};z.transpose=function(){var t=(this||p).elements;var x=t[1];t[1]=t[3];t[3]=x;x=t[2];t[2]=t[6];t[6]=x;x=t[5];t[5]=t[7];t[7]=x;return this||p};z.getNormalMatrix=function(t){return this.setFromMatrix4(t).getInverse(this||p).transpose()};z.transposeIntoArray=
function(t){var x=(this||p).elements;t[0]=x[0];t[1]=x[3];t[2]=x[6];t[3]=x[1];t[4]=x[4];t[5]=x[7];t[6]=x[2];t[7]=x[5];t[8]=x[8];return this||p};z.setUvTransform=function(t,x,C,H,N,T,W){var Y=Math.cos(N);N=Math.sin(N);this.set(C*Y,C*N,-C*(Y*T+N*W)+T+t,-H*N,H*Y,-H*(-N*T+Y*W)+W+x,0,0,1)};z.scale=function(t,x){var C=(this||p).elements;C[0]*=t;C[3]*=t;C[6]*=t;C[1]*=x;C[4]*=x;C[7]*=x;return this||p};z.rotate=function(t){var x=Math.cos(t);t=Math.sin(t);var C=(this||p).elements,H=C[0],N=C[3],T=C[6],W=C[1],
Y=C[4],ea=C[7];C[0]=x*H+t*W;C[3]=x*N+t*Y;C[6]=x*T+t*ea;C[1]=-t*H+x*W;C[4]=-t*N+x*Y;C[7]=-t*T+x*ea;return this||p};z.translate=function(t,x){var C=(this||p).elements;C[0]+=t*C[2];C[3]+=t*C[5];C[6]+=t*C[8];C[1]+=x*C[2];C[4]+=x*C[5];C[7]+=x*C[8];return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;9>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=0;9>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,
x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];return t};return u}(),eF,Mz={getDataURL:function(u){if(/^data:/i.test(u.src)||"undefined"==typeof HTMLCanvasElement)return u.src;if(!(u instanceof HTMLCanvasElement)){void 0===eF&&(eF=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));eF.width=u.width;eF.height=u.height;var z=eF.getContext("2d");u instanceof ImageData?
z.putImageData(u,0,0):z.drawImage(u,0,0,u.width,u.height);u=eF}return 2048<u.width||2048<u.height?u.toDataURL("image/jpeg",.6):u.toDataURL("image/png")}},Pua=0;r.DEFAULT_IMAGE=void 0;r.DEFAULT_MAPPING=300;r.prototype=Object.assign(Object.create(d.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){(this||p).matrix.setUvTransform((this||p).offset.x,(this||p).offset.y,(this||p).repeat.x,(this||p).repeat.y,(this||p).rotation,(this||p).center.x,(this||p).center.y)},clone:function(){return(new (this||
p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).image=u.image;(this||p).mipmaps=u.mipmaps.slice(0);(this||p).mapping=u.mapping;(this||p).wrapS=u.wrapS;(this||p).wrapT=u.wrapT;(this||p).magFilter=u.magFilter;(this||p).minFilter=u.minFilter;(this||p).anisotropy=u.anisotropy;(this||p).format=u.format;(this||p).internalFormat=u.internalFormat;(this||p).type=u.type;(this||p).offset.copy(u.offset);(this||p).repeat.copy(u.repeat);(this||p).center.copy(u.center);(this||p).rotation=
u.rotation;(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrix.copy(u.matrix);(this||p).generateMipmaps=u.generateMipmaps;(this||p).premultiplyAlpha=u.premultiplyAlpha;(this||p).flipY=u.flipY;(this||p).unpackAlignment=u.unpackAlignment;(this||p).encoding=u.encoding;return this||p},toJSON:function(u){var z=void 0===u||"string"===typeof u;if(!z&&void 0!==u.textures[(this||p).uuid])return u.textures[(this||p).uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:(this||
p).uuid,name:(this||p).name,mapping:(this||p).mapping,repeat:[(this||p).repeat.x,(this||p).repeat.y],offset:[(this||p).offset.x,(this||p).offset.y],center:[(this||p).center.x,(this||p).center.y],rotation:(this||p).rotation,wrap:[(this||p).wrapS,(this||p).wrapT],format:(this||p).format,type:(this||p).type,encoding:(this||p).encoding,minFilter:(this||p).minFilter,magFilter:(this||p).magFilter,anisotropy:(this||p).anisotropy,flipY:(this||p).flipY,premultiplyAlpha:(this||p).premultiplyAlpha,unpackAlignment:(this||
p).unpackAlignment};if(void 0!==(this||p).image){var x=(this||p).image;void 0===x.uuid&&(x.uuid=ti.generateUUID());if(!z&&void 0===u.images[x.uuid]){if(Array.isArray(x)){var C=[];for(var H=0,N=x.length;H<N;H++)C.push(Mz.getDataURL(x[H]))}else C=Mz.getDataURL(x);u.images[x.uuid]={uuid:x.uuid,url:C}}t.image=x.uuid}z||(u.textures[(this||p).uuid]=t);return t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(u){if(300!==(this||p).mapping)return u;u.applyMatrix3((this||p).matrix);
if(0>u.x||1<u.x)switch((this||p).wrapS){case 1E3:u.x-=Math.floor(u.x);break;case 1001:u.x=0>u.x?0:1;break;case 1002:u.x=1===Math.abs(Math.floor(u.x)%2)?Math.ceil(u.x)-u.x:u.x-Math.floor(u.x)}if(0>u.y||1<u.y)switch((this||p).wrapT){case 1E3:u.y-=Math.floor(u.y);break;case 1001:u.y=0>u.y?0:1;break;case 1002:u.y=1===Math.abs(Math.floor(u.y)%2)?Math.ceil(u.y)-u.y:u.y-Math.floor(u.y)}(this||p).flipY&&(u.y=1-u.y);return u}});Object.defineProperty(r.prototype,"needsUpdate",{set:function(u){!0===u&&(this||
p).version++}});var $k=function(){function u(t,x,C,H){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===H&&(H=1);Object.defineProperty(this||p,"isVector4",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=H}var z=u.prototype;z.set=function(t,x,C,H){(this||p).x=t;(this||p).y=x;(this||p).z=C;(this||p).w=H;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;(this||p).w=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=
function(t){(this||p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setW=function(t){(this||p).w=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;case 3:(this||p).w=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;case 3:return(this||p).w;default:throw Error("index is out of range: "+
t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||p).z,(this||p).w)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;(this||p).w=void 0!==t.w?t.w:1;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;(this||p).w+=t.w;return this||p};z.addScalar=function(t){(this||
p).x+=t;(this||p).y+=t;(this||p).z+=t;(this||p).w+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;(this||p).w=t.w+x.w;return this||p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;(this||p).w+=t.w*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||
p).y-=t.y;(this||p).z-=t.z;(this||p).w-=t.w;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;(this||p).w-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=t.z-x.z;(this||p).w=t.w-x.w;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;(this||p).w*=t;return this||p};z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,H=(this||p).z,N=(this||p).w;t=t.elements;(this||p).x=t[0]*
x+t[4]*C+t[8]*H+t[12]*N;(this||p).y=t[1]*x+t[5]*C+t[9]*H+t[13]*N;(this||p).z=t[2]*x+t[6]*C+t[10]*H+t[14]*N;(this||p).w=t[3]*x+t[7]*C+t[11]*H+t[15]*N;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.setAxisAngleFromQuaternion=function(t){(this||p).w=2*Math.acos(t.w);var x=Math.sqrt(1-t.w*t.w);1E-4>x?((this||p).x=1,(this||p).y=0,(this||p).z=0):((this||p).x=t.x/x,(this||p).y=t.y/x,(this||p).z=t.z/x);return this||p};z.setAxisAngleFromRotationMatrix=function(t){t=t.elements;
var x=t[0];var C=t[4];var H=t[8],N=t[1],T=t[5],W=t[9];var Y=t[2];var ea=t[6];var sa=t[10];if(.01>Math.abs(C-N)&&.01>Math.abs(H-Y)&&.01>Math.abs(W-ea)){if(.1>Math.abs(C+N)&&.1>Math.abs(H+Y)&&.1>Math.abs(W+ea)&&.1>Math.abs(x+T+sa-3))return this.set(1,0,0,0),this||p;t=Math.PI;x=(x+1)/2;T=(T+1)/2;sa=(sa+1)/2;C=(C+N)/4;H=(H+Y)/4;W=(W+ea)/4;x>T&&x>sa?.01>x?(ea=0,C=Y=.707106781):(ea=Math.sqrt(x),Y=C/ea,C=H/ea):T>sa?.01>T?(ea=.707106781,Y=0,C=.707106781):(Y=Math.sqrt(T),ea=C/Y,C=W/Y):.01>sa?(Y=ea=.707106781,
C=0):(C=Math.sqrt(sa),ea=H/C,Y=W/C);this.set(ea,Y,C,t);return this||p}t=Math.sqrt((ea-W)*(ea-W)+(H-Y)*(H-Y)+(N-C)*(N-C));.001>Math.abs(t)&&(t=1);(this||p).x=(ea-W)/t;(this||p).y=(H-Y)/t;(this||p).z=(N-C)/t;(this||p).w=Math.acos((x+T+sa-1)/2);return this||p};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);(this||p).w=Math.min((this||p).w,t.w);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||
p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);(this||p).w=Math.max((this||p).w,t.w);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));(this||p).w=Math.max(t.w,Math.min(x.w,(this||p).w));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=
Math.max(t,Math.min(x,(this||p).z));(this||p).w=Math.max(t,Math.min(x,(this||p).w));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||p).z=Math.floor((this||p).z);(this||p).w=Math.floor((this||p).w);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=
Math.ceil((this||p).z);(this||p).w=Math.ceil((this||p).w);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);(this||p).w=Math.round((this||p).w);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);(this||
p).w=0>(this||p).w?Math.ceil((this||p).w):Math.floor((this||p).w);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;(this||p).w=-(this||p).w;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z+(this||p).w*t.w};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*
(this||p).y+(this||p).z*(this||p).z+(this||p).w*(this||p).w)};z.manhattanLength=function(){return Math.abs((this||p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)+Math.abs((this||p).w)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;(this||p).w+=(t.w-(this||p).w)*x;return this||p};z.lerpVectors=
function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;(this||p).w=t.w+(x.w-t.w)*C;return this||p};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z&&t.w===(this||p).w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];(this||p).w=t[x+3];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;t[x+
3]=(this||p).w;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);(this||p).w=t.getW(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();(this||p).w=Math.random();return this||p};a(u,[{key:"width",get:function(){return(this||p).z},set:function(t){(this||p).z=t}},{key:"height",
get:function(){return(this||p).w},set:function(t){(this||p).w=t}}]);return u}();v.prototype=Object.assign(Object.create(d.prototype),{constructor:v,isWebGLRenderTarget:!0,setSize:function(u,z){if((this||p).width!==u||(this||p).height!==z)(this||p).width=u,(this||p).height=z,(this||p).texture.image.width=u,(this||p).texture.image.height=z,this.dispose();(this||p).viewport.set(0,0,u,z);(this||p).scissor.set(0,0,u,z)},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||
p).width=u.width;(this||p).height=u.height;(this||p).viewport.copy(u.viewport);(this||p).texture=u.texture.clone();(this||p).depthBuffer=u.depthBuffer;(this||p).stencilBuffer=u.stencilBuffer;(this||p).depthTexture=u.depthTexture;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});y.prototype=Object.assign(Object.create(v.prototype),{constructor:y,isWebGLMultisampleRenderTarget:!0,copy:function(u){v.prototype.copy.call(this||p,u);(this||p).samples=u.samples;return this||p}});
var Ko=function(){function u(t,x,C,H){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===H&&(H=1);Object.defineProperty(this||p,"isQuaternion",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=H}u.slerp=function(t,x,C,H){return C.copy(t).slerp(x,H)};u.slerpFlat=function(t,x,C,H,N,T,W){var Y=C[H+0],ea=C[H+1],sa=C[H+2];C=C[H+3];H=N[T+0];var Aa=N[T+1],Xa=N[T+2];N=N[T+3];if(C!==N||Y!==H||ea!==Aa||sa!==Xa){T=1-W;var Va=Y*H+ea*Aa+sa*Xa+C*N,vb=0<=Va?1:-1,sb=1-Va*Va;sb>Number.EPSILON&&
(sb=Math.sqrt(sb),Va=Math.atan2(sb,Va*vb),T=Math.sin(T*Va)/sb,W=Math.sin(W*Va)/sb);vb*=W;Y=Y*T+H*vb;ea=ea*T+Aa*vb;sa=sa*T+Xa*vb;C=C*T+N*vb;T===1-W&&(W=1/Math.sqrt(Y*Y+ea*ea+sa*sa+C*C),Y*=W,ea*=W,sa*=W,C*=W)}t[x]=Y;t[x+1]=ea;t[x+2]=sa;t[x+3]=C};u.multiplyQuaternionsFlat=function(t,x,C,H,N,T){var W=C[H],Y=C[H+1],ea=C[H+2];C=C[H+3];H=N[T];var sa=N[T+1],Aa=N[T+2];N=N[T+3];t[x]=W*N+C*H+Y*Aa-ea*sa;t[x+1]=Y*N+C*sa+ea*H-W*Aa;t[x+2]=ea*N+C*Aa+W*sa-Y*H;t[x+3]=C*N-W*H-Y*sa-ea*Aa;return t};var z=u.prototype;
z.set=function(t,x,C,H){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._w=H;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._w)};z.copy=function(t){(this||p)._x=t.x;(this||p)._y=t.y;(this||p)._z=t.z;(this||p)._w=t.w;this._onChangeCallback();return this||p};z.setFromEuler=function(t,x){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
var C=t._x,H=t._y,N=t._z;t=t._order;var T=Math.cos,W=Math.sin,Y=T(C/2),ea=T(H/2);T=T(N/2);C=W(C/2);H=W(H/2);N=W(N/2);switch(t){case "XYZ":(this||p)._x=C*ea*T+Y*H*N;(this||p)._y=Y*H*T-C*ea*N;(this||p)._z=Y*ea*N+C*H*T;(this||p)._w=Y*ea*T-C*H*N;break;case "YXZ":(this||p)._x=C*ea*T+Y*H*N;(this||p)._y=Y*H*T-C*ea*N;(this||p)._z=Y*ea*N-C*H*T;(this||p)._w=Y*ea*T+C*H*N;break;case "ZXY":(this||p)._x=C*ea*T-Y*H*N;(this||p)._y=Y*H*T+C*ea*N;(this||p)._z=Y*ea*N+C*H*T;(this||p)._w=Y*ea*T-C*H*N;break;case "ZYX":(this||
p)._x=C*ea*T-Y*H*N;(this||p)._y=Y*H*T+C*ea*N;(this||p)._z=Y*ea*N-C*H*T;(this||p)._w=Y*ea*T+C*H*N;break;case "YZX":(this||p)._x=C*ea*T+Y*H*N;(this||p)._y=Y*H*T+C*ea*N;(this||p)._z=Y*ea*N-C*H*T;(this||p)._w=Y*ea*T-C*H*N;break;case "XZY":(this||p)._x=C*ea*T-Y*H*N;(this||p)._y=Y*H*T-C*ea*N;(this||p)._z=Y*ea*N+C*H*T;(this||p)._w=Y*ea*T+C*H*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+t)}!1!==x&&this._onChangeCallback();return this||p};z.setFromAxisAngle=
function(t,x){x/=2;var C=Math.sin(x);(this||p)._x=t.x*C;(this||p)._y=t.y*C;(this||p)._z=t.z*C;(this||p)._w=Math.cos(x);this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t){var x=t.elements,C=x[0];t=x[4];var H=x[8],N=x[1],T=x[5],W=x[9],Y=x[2],ea=x[6];x=x[10];var sa=C+T+x;0<sa?(C=.5/Math.sqrt(sa+1),(this||p)._w=.25/C,(this||p)._x=(ea-W)*C,(this||p)._y=(H-Y)*C,(this||p)._z=(N-t)*C):C>T&&C>x?(C=2*Math.sqrt(1+C-T-x),(this||p)._w=(ea-W)/C,(this||p)._x=.25*C,(this||p)._y=(t+N)/C,
(this||p)._z=(H+Y)/C):T>x?(C=2*Math.sqrt(1+T-C-x),(this||p)._w=(H-Y)/C,(this||p)._x=(t+N)/C,(this||p)._y=.25*C,(this||p)._z=(W+ea)/C):(C=2*Math.sqrt(1+x-C-T),(this||p)._w=(N-t)/C,(this||p)._x=(H+Y)/C,(this||p)._y=(W+ea)/C,(this||p)._z=.25*C);this._onChangeCallback();return this||p};z.setFromUnitVectors=function(t,x){var C=t.dot(x)+1;1E-6>C?(C=0,Math.abs(t.x)>Math.abs(t.z)?((this||p)._x=-t.y,(this||p)._y=t.x,(this||p)._z=0):((this||p)._x=0,(this||p)._y=-t.z,(this||p)._z=t.y)):((this||p)._x=t.y*x.z-
t.z*x.y,(this||p)._y=t.z*x.x-t.x*x.z,(this||p)._z=t.x*x.y-t.y*x.x);(this||p)._w=C;return this.normalize()};z.angleTo=function(t){return 2*Math.acos(Math.abs(ti.clamp(this.dot(t),-1,1)))};z.rotateTowards=function(t,x){var C=this.angleTo(t);if(0===C)return this||p;this.slerp(t,Math.min(1,x/C));return this||p};z.identity=function(){return this.set(0,0,0,1)};z.inverse=function(){return this.conjugate()};z.conjugate=function(){(this||p)._x*=-1;(this||p)._y*=-1;(this||p)._z*=-1;this._onChangeCallback();
return this||p};z.dot=function(t){return(this||p)._x*t._x+(this||p)._y*t._y+(this||p)._z*t._z+(this||p)._w*t._w};z.lengthSq=function(){return(this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w};z.length=function(){return Math.sqrt((this||p)._x*(this||p)._x+(this||p)._y*(this||p)._y+(this||p)._z*(this||p)._z+(this||p)._w*(this||p)._w)};z.normalize=function(){var t=this.length();0===t?((this||p)._x=0,(this||p)._y=0,(this||p)._z=0,(this||p)._w=1):(t=
1/t,(this||p)._x*=t,(this||p)._y*=t,(this||p)._z*=t,(this||p)._w*=t);this._onChangeCallback();return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,x)):this.multiplyQuaternions(this||p,t)};z.premultiply=function(t){return this.multiplyQuaternions(t,this||p)};z.multiplyQuaternions=function(t,x){var C=t._x,H=t._y,N=t._z;t=t._w;var T=x._x,W=x._y,Y=x._z;
x=x._w;(this||p)._x=C*x+t*T+H*Y-N*W;(this||p)._y=H*x+t*W+N*T-C*Y;(this||p)._z=N*x+t*Y+C*W-H*T;(this||p)._w=t*x-C*T-H*W-N*Y;this._onChangeCallback();return this||p};z.slerp=function(t,x){if(0===x)return this||p;if(1===x)return this.copy(t);var C=(this||p)._x,H=(this||p)._y,N=(this||p)._z,T=(this||p)._w,W=T*t._w+C*t._x+H*t._y+N*t._z;0>W?((this||p)._w=-t._w,(this||p)._x=-t._x,(this||p)._y=-t._y,(this||p)._z=-t._z,W=-W):this.copy(t);if(1<=W)return(this||p)._w=T,(this||p)._x=C,(this||p)._y=H,(this||p)._z=
N,this||p;t=1-W*W;if(t<=Number.EPSILON)return W=1-x,(this||p)._w=W*T+x*(this||p)._w,(this||p)._x=W*C+x*(this||p)._x,(this||p)._y=W*H+x*(this||p)._y,(this||p)._z=W*N+x*(this||p)._z,this.normalize(),this._onChangeCallback(),this||p;t=Math.sqrt(t);var Y=Math.atan2(t,W);W=Math.sin((1-x)*Y)/t;x=Math.sin(x*Y)/t;(this||p)._w=T*W+(this||p)._w*x;(this||p)._x=C*W+(this||p)._x*x;(this||p)._y=H*W+(this||p)._y*x;(this||p)._z=N*W+(this||p)._z*x;this._onChangeCallback();return this||p};z.equals=function(t){return t._x===
(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._w===(this||p)._w};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p)._x=t[x];(this||p)._y=t[x+1];(this||p)._z=t[x+2];(this||p)._w=t[x+3];this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._w;return t};z.fromBufferAttribute=function(t,x){(this||p)._x=t.getX(x);(this||p)._y=t.getY(x);(this||p)._z=t.getZ(x);(this||
p)._w=t.getW(x);return this||p};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"w",get:function(){return(this||p)._w},set:function(t){(this||
p)._w=t;this._onChangeCallback()}}]);return u}(),wc=function(){function u(t,x,C){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);Object.defineProperty(this||p,"isVector3",{value:!0});(this||p).x=t;(this||p).y=x;(this||p).z=C}var z=u.prototype;z.set=function(t,x,C){void 0===C&&(C=(this||p).z);(this||p).x=t;(this||p).y=x;(this||p).z=C;return this||p};z.setScalar=function(t){(this||p).x=t;(this||p).y=t;(this||p).z=t;return this||p};z.setX=function(t){(this||p).x=t;return this||p};z.setY=function(t){(this||
p).y=t;return this||p};z.setZ=function(t){(this||p).z=t;return this||p};z.setComponent=function(t,x){switch(t){case 0:(this||p).x=x;break;case 1:(this||p).y=x;break;case 2:(this||p).z=x;break;default:throw Error("index is out of range: "+t);}return this||p};z.getComponent=function(t){switch(t){case 0:return(this||p).x;case 1:return(this||p).y;case 2:return(this||p).z;default:throw Error("index is out of range: "+t);}};z.clone=function(){return new (this||p).constructor((this||p).x,(this||p).y,(this||
p).z)};z.copy=function(t){(this||p).x=t.x;(this||p).y=t.y;(this||p).z=t.z;return this||p};z.add=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,x);(this||p).x+=t.x;(this||p).y+=t.y;(this||p).z+=t.z;return this||p};z.addScalar=function(t){(this||p).x+=t;(this||p).y+=t;(this||p).z+=t;return this||p};z.addVectors=function(t,x){(this||p).x=t.x+x.x;(this||p).y=t.y+x.y;(this||p).z=t.z+x.z;return this||
p};z.addScaledVector=function(t,x){(this||p).x+=t.x*x;(this||p).y+=t.y*x;(this||p).z+=t.z*x;return this||p};z.sub=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,x);(this||p).x-=t.x;(this||p).y-=t.y;(this||p).z-=t.z;return this||p};z.subScalar=function(t){(this||p).x-=t;(this||p).y-=t;(this||p).z-=t;return this||p};z.subVectors=function(t,x){(this||p).x=t.x-x.x;(this||p).y=t.y-x.y;(this||p).z=
t.z-x.z;return this||p};z.multiply=function(t,x){if(void 0!==x)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,x);(this||p).x*=t.x;(this||p).y*=t.y;(this||p).z*=t.z;return this||p};z.multiplyScalar=function(t){(this||p).x*=t;(this||p).y*=t;(this||p).z*=t;return this||p};z.multiplyVectors=function(t,x){(this||p).x=t.x*x.x;(this||p).y=t.y*x.y;(this||p).z=t.z*x.z;return this||p};z.applyEuler=function(t){t&&
t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(Pca.setFromEuler(t))};z.applyAxisAngle=function(t,x){return this.applyQuaternion(Pca.setFromAxisAngle(t,x))};z.applyMatrix3=function(t){var x=(this||p).x,C=(this||p).y,H=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[3]*C+t[6]*H;(this||p).y=t[1]*x+t[4]*C+t[7]*H;(this||p).z=t[2]*x+t[5]*C+t[8]*H;return this||p};z.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()};
z.applyMatrix4=function(t){var x=(this||p).x,C=(this||p).y,H=(this||p).z;t=t.elements;var N=1/(t[3]*x+t[7]*C+t[11]*H+t[15]);(this||p).x=(t[0]*x+t[4]*C+t[8]*H+t[12])*N;(this||p).y=(t[1]*x+t[5]*C+t[9]*H+t[13])*N;(this||p).z=(t[2]*x+t[6]*C+t[10]*H+t[14])*N;return this||p};z.applyQuaternion=function(t){var x=(this||p).x,C=(this||p).y,H=(this||p).z,N=t.x,T=t.y,W=t.z;t=t.w;var Y=t*x+T*H-W*C,ea=t*C+W*x-N*H,sa=t*H+N*C-T*x;x=-N*x-T*C-W*H;(this||p).x=Y*t+x*-N+ea*-W-sa*-T;(this||p).y=ea*t+x*-T+sa*-N-Y*-W;(this||
p).z=sa*t+x*-W+Y*-T-ea*-N;return this||p};z.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)};z.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)};z.transformDirection=function(t){var x=(this||p).x,C=(this||p).y,H=(this||p).z;t=t.elements;(this||p).x=t[0]*x+t[4]*C+t[8]*H;(this||p).y=t[1]*x+t[5]*C+t[9]*H;(this||p).z=t[2]*x+t[6]*C+t[10]*H;return this.normalize()};z.divide=function(t){(this||p).x/=
t.x;(this||p).y/=t.y;(this||p).z/=t.z;return this||p};z.divideScalar=function(t){return this.multiplyScalar(1/t)};z.min=function(t){(this||p).x=Math.min((this||p).x,t.x);(this||p).y=Math.min((this||p).y,t.y);(this||p).z=Math.min((this||p).z,t.z);return this||p};z.max=function(t){(this||p).x=Math.max((this||p).x,t.x);(this||p).y=Math.max((this||p).y,t.y);(this||p).z=Math.max((this||p).z,t.z);return this||p};z.clamp=function(t,x){(this||p).x=Math.max(t.x,Math.min(x.x,(this||p).x));(this||p).y=Math.max(t.y,
Math.min(x.y,(this||p).y));(this||p).z=Math.max(t.z,Math.min(x.z,(this||p).z));return this||p};z.clampScalar=function(t,x){(this||p).x=Math.max(t,Math.min(x,(this||p).x));(this||p).y=Math.max(t,Math.min(x,(this||p).y));(this||p).z=Math.max(t,Math.min(x,(this||p).z));return this||p};z.clampLength=function(t,x){var C=this.length();return this.divideScalar(C||1).multiplyScalar(Math.max(t,Math.min(x,C)))};z.floor=function(){(this||p).x=Math.floor((this||p).x);(this||p).y=Math.floor((this||p).y);(this||
p).z=Math.floor((this||p).z);return this||p};z.ceil=function(){(this||p).x=Math.ceil((this||p).x);(this||p).y=Math.ceil((this||p).y);(this||p).z=Math.ceil((this||p).z);return this||p};z.round=function(){(this||p).x=Math.round((this||p).x);(this||p).y=Math.round((this||p).y);(this||p).z=Math.round((this||p).z);return this||p};z.roundToZero=function(){(this||p).x=0>(this||p).x?Math.ceil((this||p).x):Math.floor((this||p).x);(this||p).y=0>(this||p).y?Math.ceil((this||p).y):Math.floor((this||p).y);(this||
p).z=0>(this||p).z?Math.ceil((this||p).z):Math.floor((this||p).z);return this||p};z.negate=function(){(this||p).x=-(this||p).x;(this||p).y=-(this||p).y;(this||p).z=-(this||p).z;return this||p};z.dot=function(t){return(this||p).x*t.x+(this||p).y*t.y+(this||p).z*t.z};z.lengthSq=function(){return(this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z};z.length=function(){return Math.sqrt((this||p).x*(this||p).x+(this||p).y*(this||p).y+(this||p).z*(this||p).z)};z.manhattanLength=function(){return Math.abs((this||
p).x)+Math.abs((this||p).y)+Math.abs((this||p).z)};z.normalize=function(){return this.divideScalar(this.length()||1)};z.setLength=function(t){return this.normalize().multiplyScalar(t)};z.lerp=function(t,x){(this||p).x+=(t.x-(this||p).x)*x;(this||p).y+=(t.y-(this||p).y)*x;(this||p).z+=(t.z-(this||p).z)*x;return this||p};z.lerpVectors=function(t,x,C){(this||p).x=t.x+(x.x-t.x)*C;(this||p).y=t.y+(x.y-t.y)*C;(this||p).z=t.z+(x.z-t.z)*C;return this||p};z.cross=function(t,x){return void 0!==x?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(t,x)):this.crossVectors(this||p,t)};z.crossVectors=function(t,x){var C=t.x,H=t.y;t=t.z;var N=x.x,T=x.y;x=x.z;(this||p).x=H*x-t*T;(this||p).y=t*N-C*x;(this||p).z=C*T-H*N;return this||p};z.projectOnVector=function(t){var x=t.lengthSq();if(0===x)return this.set(0,0,0);x=t.dot(this||p)/x;return this.copy(t).multiplyScalar(x)};z.projectOnPlane=function(t){OX.copy(this||p).projectOnVector(t);return this.sub(OX)};z.reflect=function(t){return this.sub(OX.copy(t).multiplyScalar(2*this.dot(t)))};
z.angleTo=function(t){var x=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===x)return Math.PI/2;t=this.dot(t)/x;return Math.acos(ti.clamp(t,-1,1))};z.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))};z.distanceToSquared=function(t){var x=(this||p).x-t.x,C=(this||p).y-t.y;t=(this||p).z-t.z;return x*x+C*C+t*t};z.manhattanDistanceTo=function(t){return Math.abs((this||p).x-t.x)+Math.abs((this||p).y-t.y)+Math.abs((this||p).z-t.z)};z.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,
t.phi,t.theta)};z.setFromSphericalCoords=function(t,x,C){var H=Math.sin(x)*t;(this||p).x=H*Math.sin(C);(this||p).y=Math.cos(x)*t;(this||p).z=H*Math.cos(C);return this||p};z.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)};z.setFromCylindricalCoords=function(t,x,C){(this||p).x=t*Math.sin(x);(this||p).y=C;(this||p).z=t*Math.cos(x);return this||p};z.setFromMatrixPosition=function(t){t=t.elements;(this||p).x=t[12];(this||p).y=t[13];(this||p).z=t[14];return this||
p};z.setFromMatrixScale=function(t){var x=this.setFromMatrixColumn(t,0).length(),C=this.setFromMatrixColumn(t,1).length();t=this.setFromMatrixColumn(t,2).length();(this||p).x=x;(this||p).y=C;(this||p).z=t;return this||p};z.setFromMatrixColumn=function(t,x){return this.fromArray(t.elements,4*x)};z.setFromMatrix3Column=function(t,x){return this.fromArray(t.elements,3*x)};z.equals=function(t){return t.x===(this||p).x&&t.y===(this||p).y&&t.z===(this||p).z};z.fromArray=function(t,x){void 0===x&&(x=0);
(this||p).x=t[x];(this||p).y=t[x+1];(this||p).z=t[x+2];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).x;t[x+1]=(this||p).y;t[x+2]=(this||p).z;return t};z.fromBufferAttribute=function(t,x,C){void 0!==C&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");(this||p).x=t.getX(x);(this||p).y=t.getY(x);(this||p).z=t.getZ(x);return this||p};z.random=function(){(this||p).x=Math.random();(this||p).y=Math.random();(this||p).z=Math.random();
return this||p};return u}(),OX=new wc,Pca=new Ko,Mv=function(){function u(t,x){Object.defineProperty(this||p,"isBox3",{value:!0});(this||p).min=void 0!==t?t:new wc(Infinity,Infinity,Infinity);(this||p).max=void 0!==x?x:new wc(-Infinity,-Infinity,-Infinity)}var z=u.prototype;z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromArray=function(t){for(var x=Infinity,C=Infinity,H=Infinity,N=-Infinity,T=-Infinity,W=-Infinity,Y=0,ea=t.length;Y<ea;Y+=3){var sa=t[Y],Aa=
t[Y+1],Xa=t[Y+2];sa<x&&(x=sa);Aa<C&&(C=Aa);Xa<H&&(H=Xa);sa>N&&(N=sa);Aa>T&&(T=Aa);Xa>W&&(W=Xa)}(this||p).min.set(x,C,H);(this||p).max.set(N,T,W);return this||p};z.setFromBufferAttribute=function(t){for(var x=Infinity,C=Infinity,H=Infinity,N=-Infinity,T=-Infinity,W=-Infinity,Y=0,ea=t.count;Y<ea;Y++){var sa=t.getX(Y),Aa=t.getY(Y),Xa=t.getZ(Y);sa<x&&(x=sa);Aa<C&&(C=Aa);Xa<H&&(H=Xa);sa>N&&(N=sa);Aa>T&&(T=Aa);Xa>W&&(W=Xa)}(this||p).min.set(x,C,H);(this||p).max.set(N,T,W);return this||p};z.setFromPoints=
function(t){this.makeEmpty();for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=UI.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.setFromObject=function(t){this.makeEmpty();return this.expandByObject(t)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=function(){(this||
p).min.x=(this||p).min.y=(this||p).min.z=Infinity;(this||p).max.x=(this||p).max.y=(this||p).max.z=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y||(this||p).max.z<(this||p).min.z};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new wc);return this.isEmpty()?t.set(0,0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),
t=new wc);return this.isEmpty()?t.set(0,0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var x=t.geometry;void 0!==x&&(null===x.boundingBox&&x.computeBoundingBox(),PX.copy(x.boundingBox),
PX.applyMatrix4(t.matrixWorld),this.union(PX));t=t.children;x=0;for(var C=t.length;x<C;x++)this.expandByObject(t[x]);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y||t.z<(this||p).min.z||t.z>(this||p).max.z?!1:!0};z.containsBox=function(t){return(this||p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y&&(this||p).min.z<=t.min.z&&t.max.z<=(this||p).max.z};z.getParameter=
function(t,x){void 0===x&&(console.warn("THREE.Box3: .getParameter() target is now required"),x=new wc);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y),(t.z-(this||p).min.z)/((this||p).max.z-(this||p).min.z))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y||t.max.z<(this||p).min.z||t.min.z>(this||p).max.z?!1:!0};z.intersectsSphere=function(t){this.clampPoint(t.center,
UI);return UI.distanceToSquared(t.center)<=t.radius*t.radius};z.intersectsPlane=function(t){if(0<t.normal.x){var x=t.normal.x*(this||p).min.x;var C=t.normal.x*(this||p).max.x}else x=t.normal.x*(this||p).max.x,C=t.normal.x*(this||p).min.x;0<t.normal.y?(x+=t.normal.y*(this||p).min.y,C+=t.normal.y*(this||p).max.y):(x+=t.normal.y*(this||p).max.y,C+=t.normal.y*(this||p).min.y);0<t.normal.z?(x+=t.normal.z*(this||p).min.z,C+=t.normal.z*(this||p).max.z):(x+=t.normal.z*(this||p).max.z,C+=t.normal.z*(this||
p).min.z);return x<=-t.constant&&C>=-t.constant};z.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(VI);nP.subVectors((this||p).max,VI);fF.subVectors(t.a,VI);gF.subVectors(t.b,VI);hF.subVectors(t.c,VI);Nz.subVectors(gF,fF);Oz.subVectors(hF,gF);nC.subVectors(fF,hF);t=[0,-Nz.z,Nz.y,0,-Oz.z,Oz.y,0,-nC.z,nC.y,Nz.z,0,-Nz.x,Oz.z,0,-Oz.x,nC.z,0,-nC.x,-Nz.y,Nz.x,0,-Oz.y,Oz.x,0,-nC.y,nC.x,0];if(!A(t,fF,gF,hF,nP))return!1;t=[1,0,0,0,1,0,0,0,1];if(!A(t,fF,gF,hF,nP))return!1;oP.crossVectors(Nz,
Oz);t=[oP.x,oP.y,oP.z];return A(t,fF,gF,hF,nP)};z.clampPoint=function(t,x){void 0===x&&(console.warn("THREE.Box3: .clampPoint() target is now required"),x=new wc);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return UI.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.getBoundingSphere=function(t){void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(t.center);t.radius=.5*this.getSize(UI).length();return t};
z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);this.isEmpty()&&this.makeEmpty();return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.applyMatrix4=function(t){if(this.isEmpty())return this||p;px[0].set((this||p).min.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);px[1].set((this||p).min.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);px[2].set((this||p).min.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);px[3].set((this||
p).min.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);px[4].set((this||p).max.x,(this||p).min.y,(this||p).min.z).applyMatrix4(t);px[5].set((this||p).max.x,(this||p).min.y,(this||p).max.z).applyMatrix4(t);px[6].set((this||p).max.x,(this||p).max.y,(this||p).min.z).applyMatrix4(t);px[7].set((this||p).max.x,(this||p).max.y,(this||p).max.z).applyMatrix4(t);this.setFromPoints(px);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};z.equals=function(t){return t.min.equals((this||
p).min)&&t.max.equals((this||p).max)};return u}(),px=[new wc,new wc,new wc,new wc,new wc,new wc,new wc,new wc],UI=new wc,PX=new Mv,fF=new wc,gF=new wc,hF=new wc,Nz=new wc,Oz=new wc,nC=new wc,VI=new wc,nP=new wc,oP=new wc,eC=new wc,hva=new Mv,qx=function(){function u(t,x){(this||p).center=void 0!==t?t:new wc;(this||p).radius=void 0!==x?x:-1}var z=u.prototype;z.set=function(t,x){(this||p).center.copy(t);(this||p).radius=x;return this||p};z.setFromPoints=function(t,x){var C=(this||p).center;void 0!==
x?C.copy(x):hva.setFromPoints(t).getCenter(C);for(var H=x=0,N=t.length;H<N;H++)x=Math.max(x,C.distanceToSquared(t[H]));(this||p).radius=Math.sqrt(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).center.copy(t.center);(this||p).radius=t.radius;return this||p};z.isEmpty=function(){return 0>(this||p).radius};z.makeEmpty=function(){(this||p).center.set(0,0,0);(this||p).radius=-1;return this||p};z.containsPoint=function(t){return t.distanceToSquared((this||
p).center)<=(this||p).radius*(this||p).radius};z.distanceToPoint=function(t){return t.distanceTo((this||p).center)-(this||p).radius};z.intersectsSphere=function(t){var x=(this||p).radius+t.radius;return t.center.distanceToSquared((this||p).center)<=x*x};z.intersectsBox=function(t){return t.intersectsSphere(this||p)};z.intersectsPlane=function(t){return Math.abs(t.distanceToPoint((this||p).center))<=(this||p).radius};z.clampPoint=function(t,x){var C=(this||p).center.distanceToSquared(t);void 0===x&&
(console.warn("THREE.Sphere: .clampPoint() target is now required"),x=new wc);x.copy(t);C>(this||p).radius*(this||p).radius&&(x.sub((this||p).center).normalize(),x.multiplyScalar((this||p).radius).add((this||p).center));return x};z.getBoundingBox=function(t){void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Mv);if(this.isEmpty())return t.makeEmpty(),t;t.set((this||p).center,(this||p).center);t.expandByScalar((this||p).radius);return t};z.applyMatrix4=function(t){(this||
p).center.applyMatrix4(t);(this||p).radius*=t.getMaxScaleOnAxis();return this||p};z.translate=function(t){(this||p).center.add(t);return this||p};z.equals=function(t){return t.center.equals((this||p).center)&&t.radius===(this||p).radius};return u}(),rx=new wc,QX=new wc,pP=new wc,Pz=new wc,RX=new wc,qP=new wc,SX=new wc,dF=function(){function u(t,x){(this||p).origin=void 0!==t?t:new wc;(this||p).direction=void 0!==x?x:new wc(0,0,-1)}var z=u.prototype;z.set=function(t,x){(this||p).origin.copy(t);(this||
p).direction.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).origin.copy(t.origin);(this||p).direction.copy(t.direction);return this||p};z.at=function(t,x){void 0===x&&(console.warn("THREE.Ray: .at() target is now required"),x=new wc);return x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.lookAt=function(t){(this||p).direction.copy(t).sub((this||p).origin).normalize();return this||p};z.recast=function(t){(this||
p).origin.copy(this.at(t,rx));return this||p};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),x=new wc);x.subVectors(t,(this||p).origin);t=x.dot((this||p).direction);return 0>t?x.copy((this||p).origin):x.copy((this||p).direction).multiplyScalar(t).add((this||p).origin)};z.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))};z.distanceSqToPoint=function(t){var x=rx.subVectors(t,(this||p).origin).dot((this||
p).direction);if(0>x)return(this||p).origin.distanceToSquared(t);rx.copy((this||p).direction).multiplyScalar(x).add((this||p).origin);return rx.distanceToSquared(t)};z.distanceSqToSegment=function(t,x,C,H){QX.copy(t).add(x).multiplyScalar(.5);pP.copy(x).sub(t).normalize();Pz.copy((this||p).origin).sub(QX);var N=.5*t.distanceTo(x),T=-(this||p).direction.dot(pP),W=Pz.dot((this||p).direction),Y=-Pz.dot(pP),ea=Pz.lengthSq(),sa=Math.abs(1-T*T);if(0<sa){t=T*Y-W;x=T*W-Y;var Aa=N*sa;0<=t?x>=-Aa?x<=Aa?(N=
1/sa,t*=N,x*=N,T=t*(t+T*x+2*W)+x*(T*t+x+2*Y)+ea):(x=N,t=Math.max(0,-(T*x+W)),T=-t*t+x*(x+2*Y)+ea):(x=-N,t=Math.max(0,-(T*x+W)),T=-t*t+x*(x+2*Y)+ea):x<=-Aa?(t=Math.max(0,-(-T*N+W)),x=0<t?-N:Math.min(Math.max(-N,-Y),N),T=-t*t+x*(x+2*Y)+ea):x<=Aa?(t=0,x=Math.min(Math.max(-N,-Y),N),T=x*(x+2*Y)+ea):(t=Math.max(0,-(T*N+W)),x=0<t?N:Math.min(Math.max(-N,-Y),N),T=-t*t+x*(x+2*Y)+ea)}else x=0<T?-N:N,t=Math.max(0,-(T*x+W)),T=-t*t+x*(x+2*Y)+ea;C&&C.copy((this||p).direction).multiplyScalar(t).add((this||p).origin);
H&&H.copy(pP).multiplyScalar(x).add(QX);return T};z.intersectSphere=function(t,x){rx.subVectors(t.center,(this||p).origin);var C=rx.dot((this||p).direction),H=rx.dot(rx)-C*C;t=t.radius*t.radius;if(H>t)return null;t=Math.sqrt(t-H);H=C-t;C+=t;return 0>H&&0>C?null:0>H?this.at(C,x):this.at(H,x)};z.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius};z.distanceToPlane=function(t){var x=t.normal.dot((this||p).direction);if(0===x)return 0===t.distanceToPoint((this||p).origin)?
0:null;t=-((this||p).origin.dot(t.normal)+t.constant)/x;return 0<=t?t:null};z.intersectPlane=function(t,x){t=this.distanceToPlane(t);return null===t?null:this.at(t,x)};z.intersectsPlane=function(t){var x=t.distanceToPoint((this||p).origin);return 0===x||0>t.normal.dot((this||p).direction)*x?!0:!1};z.intersectBox=function(t,x){var C=1/(this||p).direction.x;var H=1/(this||p).direction.y;var N=1/(this||p).direction.z,T=(this||p).origin;if(0<=C){var W=(t.min.x-T.x)*C;C*=t.max.x-T.x}else W=(t.max.x-T.x)*
C,C*=t.min.x-T.x;if(0<=H){var Y=(t.min.y-T.y)*H;H*=t.max.y-T.y}else Y=(t.max.y-T.y)*H,H*=t.min.y-T.y;if(W>H||Y>C)return null;if(Y>W||W!==W)W=Y;if(H<C||C!==C)C=H;0<=N?(Y=(t.min.z-T.z)*N,t=(t.max.z-T.z)*N):(Y=(t.max.z-T.z)*N,t=(t.min.z-T.z)*N);if(W>t||Y>C)return null;if(Y>W||W!==W)W=Y;if(t<C||C!==C)C=t;return 0>C?null:this.at(0<=W?W:C,x)};z.intersectsBox=function(t){return null!==this.intersectBox(t,rx)};z.intersectTriangle=function(t,x,C,H,N){RX.subVectors(x,t);qP.subVectors(C,t);SX.crossVectors(RX,
qP);x=(this||p).direction.dot(SX);if(0<x){if(H)return null;H=1}else if(0>x)H=-1,x=-x;else return null;Pz.subVectors((this||p).origin,t);t=H*(this||p).direction.dot(qP.crossVectors(Pz,qP));if(0>t)return null;C=H*(this||p).direction.dot(RX.cross(Pz));if(0>C||t+C>x)return null;t=-H*Pz.dot(SX);return 0>t?null:this.at(t/x,N)};z.applyMatrix4=function(t){(this||p).origin.applyMatrix4(t);(this||p).direction.transformDirection(t);return this||p};z.equals=function(t){return t.origin.equals((this||p).origin)&&
t.direction.equals((this||p).direction)};return u}(),uj=function(){function u(){Object.defineProperty(this||p,"isMatrix4",{value:!0});(this||p).elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var z=u.prototype;z.set=function(t,x,C,H,N,T,W,Y,ea,sa,Aa,Xa,Va,vb,sb,ad){var Bc=(this||p).elements;Bc[0]=t;Bc[4]=x;Bc[8]=C;Bc[12]=H;Bc[1]=N;Bc[5]=T;Bc[9]=W;Bc[13]=Y;Bc[2]=ea;Bc[6]=sa;Bc[10]=Aa;Bc[14]=
Xa;Bc[3]=Va;Bc[7]=vb;Bc[11]=sb;Bc[15]=ad;return this||p};z.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this||p};z.clone=function(){return(new u).fromArray((this||p).elements)};z.copy=function(t){var x=(this||p).elements;t=t.elements;x[0]=t[0];x[1]=t[1];x[2]=t[2];x[3]=t[3];x[4]=t[4];x[5]=t[5];x[6]=t[6];x[7]=t[7];x[8]=t[8];x[9]=t[9];x[10]=t[10];x[11]=t[11];x[12]=t[12];x[13]=t[13];x[14]=t[14];x[15]=t[15];return this||p};z.copyPosition=function(t){var x=(this||p).elements;t=t.elements;
x[12]=t[12];x[13]=t[13];x[14]=t[14];return this||p};z.extractBasis=function(t,x,C){t.setFromMatrixColumn(this||p,0);x.setFromMatrixColumn(this||p,1);C.setFromMatrixColumn(this||p,2);return this||p};z.makeBasis=function(t,x,C){this.set(t.x,x.x,C.x,0,t.y,x.y,C.y,0,t.z,x.z,C.z,0,0,0,0,1);return this||p};z.extractRotation=function(t){var x=(this||p).elements,C=t.elements,H=1/iF.setFromMatrixColumn(t,0).length(),N=1/iF.setFromMatrixColumn(t,1).length();t=1/iF.setFromMatrixColumn(t,2).length();x[0]=C[0]*
H;x[1]=C[1]*H;x[2]=C[2]*H;x[3]=0;x[4]=C[4]*N;x[5]=C[5]*N;x[6]=C[6]*N;x[7]=0;x[8]=C[8]*t;x[9]=C[9]*t;x[10]=C[10]*t;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var x=(this||p).elements,C=t.x,H=t.y,N=t.z,T=Math.cos(C);C=Math.sin(C);var W=Math.cos(H);H=Math.sin(H);var Y=Math.cos(N);N=Math.sin(N);if("XYZ"===t.order){t=T*Y;var ea=
T*N,sa=C*Y,Aa=C*N;x[0]=W*Y;x[4]=-W*N;x[8]=H;x[1]=ea+sa*H;x[5]=t-Aa*H;x[9]=-C*W;x[2]=Aa-t*H;x[6]=sa+ea*H;x[10]=T*W}else"YXZ"===t.order?(t=W*Y,ea=W*N,sa=H*Y,Aa=H*N,x[0]=t+Aa*C,x[4]=sa*C-ea,x[8]=T*H,x[1]=T*N,x[5]=T*Y,x[9]=-C,x[2]=ea*C-sa,x[6]=Aa+t*C,x[10]=T*W):"ZXY"===t.order?(t=W*Y,ea=W*N,sa=H*Y,Aa=H*N,x[0]=t-Aa*C,x[4]=-T*N,x[8]=sa+ea*C,x[1]=ea+sa*C,x[5]=T*Y,x[9]=Aa-t*C,x[2]=-T*H,x[6]=C,x[10]=T*W):"ZYX"===t.order?(t=T*Y,ea=T*N,sa=C*Y,Aa=C*N,x[0]=W*Y,x[4]=sa*H-ea,x[8]=t*H+Aa,x[1]=W*N,x[5]=Aa*H+t,x[9]=
ea*H-sa,x[2]=-H,x[6]=C*W,x[10]=T*W):"YZX"===t.order?(t=T*W,ea=T*H,sa=C*W,Aa=C*H,x[0]=W*Y,x[4]=Aa-t*N,x[8]=sa*N+ea,x[1]=N,x[5]=T*Y,x[9]=-C*Y,x[2]=-H*Y,x[6]=ea*N+sa,x[10]=t-Aa*N):"XZY"===t.order&&(t=T*W,ea=T*H,sa=C*W,Aa=C*H,x[0]=W*Y,x[4]=-N,x[8]=H*Y,x[1]=t*N+Aa,x[5]=T*Y,x[9]=ea*N-sa,x[2]=sa*N-ea,x[6]=C*Y,x[10]=Aa*N+t);x[3]=0;x[7]=0;x[11]=0;x[12]=0;x[13]=0;x[14]=0;x[15]=1;return this||p};z.makeRotationFromQuaternion=function(t){return this.compose(iva,t,jva)};z.lookAt=function(t,x,C){var H=(this||p).elements;
vp.subVectors(t,x);0===vp.lengthSq()&&(vp.z=1);vp.normalize();Qz.crossVectors(C,vp);0===Qz.lengthSq()&&(1===Math.abs(C.z)?vp.x+=1E-4:vp.z+=1E-4,vp.normalize(),Qz.crossVectors(C,vp));Qz.normalize();rP.crossVectors(vp,Qz);H[0]=Qz.x;H[4]=rP.x;H[8]=vp.x;H[1]=Qz.y;H[5]=rP.y;H[9]=vp.y;H[2]=Qz.z;H[6]=rP.z;H[10]=vp.z;return this||p};z.multiply=function(t,x){return void 0!==x?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,
x)):this.multiplyMatrices(this||p,t)};z.premultiply=function(t){return this.multiplyMatrices(t,this||p)};z.multiplyMatrices=function(t,x){var C=t.elements,H=x.elements;x=(this||p).elements;t=C[0];var N=C[4],T=C[8],W=C[12],Y=C[1],ea=C[5],sa=C[9],Aa=C[13],Xa=C[2],Va=C[6],vb=C[10],sb=C[14],ad=C[3],Bc=C[7],rd=C[11];C=C[15];var Jc=H[0],vd=H[4],Vc=H[8],Md=H[12],de=H[1],Id=H[5],Ld=H[9],Le=H[13],qf=H[2],zg=H[6],Pf=H[10],kg=H[14],Bh=H[3],bh=H[7],$i=H[11];H=H[15];x[0]=t*Jc+N*de+T*qf+W*Bh;x[4]=t*vd+N*Id+T*zg+
W*bh;x[8]=t*Vc+N*Ld+T*Pf+W*$i;x[12]=t*Md+N*Le+T*kg+W*H;x[1]=Y*Jc+ea*de+sa*qf+Aa*Bh;x[5]=Y*vd+ea*Id+sa*zg+Aa*bh;x[9]=Y*Vc+ea*Ld+sa*Pf+Aa*$i;x[13]=Y*Md+ea*Le+sa*kg+Aa*H;x[2]=Xa*Jc+Va*de+vb*qf+sb*Bh;x[6]=Xa*vd+Va*Id+vb*zg+sb*bh;x[10]=Xa*Vc+Va*Ld+vb*Pf+sb*$i;x[14]=Xa*Md+Va*Le+vb*kg+sb*H;x[3]=ad*Jc+Bc*de+rd*qf+C*Bh;x[7]=ad*vd+Bc*Id+rd*zg+C*bh;x[11]=ad*Vc+Bc*Ld+rd*Pf+C*$i;x[15]=ad*Md+Bc*Le+rd*kg+C*H;return this||p};z.multiplyScalar=function(t){var x=(this||p).elements;x[0]*=t;x[4]*=t;x[8]*=t;x[12]*=t;x[1]*=
t;x[5]*=t;x[9]*=t;x[13]*=t;x[2]*=t;x[6]*=t;x[10]*=t;x[14]*=t;x[3]*=t;x[7]*=t;x[11]*=t;x[15]*=t;return this||p};z.determinant=function(){var t=(this||p).elements,x=t[0],C=t[4],H=t[8],N=t[12],T=t[1],W=t[5],Y=t[9],ea=t[13],sa=t[2],Aa=t[6],Xa=t[10],Va=t[14];return t[3]*(+N*Y*Aa-H*ea*Aa-N*W*Xa+C*ea*Xa+H*W*Va-C*Y*Va)+t[7]*(+x*Y*Va-x*ea*Xa+N*T*Xa-H*T*Va+H*ea*sa-N*Y*sa)+t[11]*(+x*ea*Aa-x*W*Va-N*T*Aa+C*T*Va+N*W*sa-C*ea*sa)+t[15]*(-H*W*sa-x*Y*Aa+x*W*Xa+H*T*Aa-C*T*Xa+C*Y*sa)};z.transpose=function(){var t=(this||
p).elements;var x=t[1];t[1]=t[4];t[4]=x;x=t[2];t[2]=t[8];t[8]=x;x=t[6];t[6]=t[9];t[9]=x;x=t[3];t[3]=t[12];t[12]=x;x=t[7];t[7]=t[13];t[13]=x;x=t[11];t[11]=t[14];t[14]=x;return this||p};z.setPosition=function(t,x,C){var H=(this||p).elements;t.isVector3?(H[12]=t.x,H[13]=t.y,H[14]=t.z):(H[12]=t,H[13]=x,H[14]=C);return this||p};z.getInverse=function(t,x){void 0!==x&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");x=(this||p).elements;var C=t.elements;t=
C[0];var H=C[1],N=C[2],T=C[3],W=C[4],Y=C[5],ea=C[6],sa=C[7],Aa=C[8],Xa=C[9],Va=C[10],vb=C[11],sb=C[12],ad=C[13],Bc=C[14];C=C[15];var rd=Xa*Bc*sa-ad*Va*sa+ad*ea*vb-Y*Bc*vb-Xa*ea*C+Y*Va*C,Jc=sb*Va*sa-Aa*Bc*sa-sb*ea*vb+W*Bc*vb+Aa*ea*C-W*Va*C,vd=Aa*ad*sa-sb*Xa*sa+sb*Y*vb-W*ad*vb-Aa*Y*C+W*Xa*C,Vc=sb*Xa*ea-Aa*ad*ea-sb*Y*Va+W*ad*Va+Aa*Y*Bc-W*Xa*Bc,Md=t*rd+H*Jc+N*vd+T*Vc;if(0===Md)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);Md=1/Md;x[0]=rd*Md;x[1]=(ad*Va*T-Xa*Bc*T-ad*N*vb+H*Bc*vb+Xa*N*C-H*Va*C)*Md;x[2]=
(Y*Bc*T-ad*ea*T+ad*N*sa-H*Bc*sa-Y*N*C+H*ea*C)*Md;x[3]=(Xa*ea*T-Y*Va*T-Xa*N*sa+H*Va*sa+Y*N*vb-H*ea*vb)*Md;x[4]=Jc*Md;x[5]=(Aa*Bc*T-sb*Va*T+sb*N*vb-t*Bc*vb-Aa*N*C+t*Va*C)*Md;x[6]=(sb*ea*T-W*Bc*T-sb*N*sa+t*Bc*sa+W*N*C-t*ea*C)*Md;x[7]=(W*Va*T-Aa*ea*T+Aa*N*sa-t*Va*sa-W*N*vb+t*ea*vb)*Md;x[8]=vd*Md;x[9]=(sb*Xa*T-Aa*ad*T-sb*H*vb+t*ad*vb+Aa*H*C-t*Xa*C)*Md;x[10]=(W*ad*T-sb*Y*T+sb*H*sa-t*ad*sa-W*H*C+t*Y*C)*Md;x[11]=(Aa*Y*T-W*Xa*T-Aa*H*sa+t*Xa*sa+W*H*vb-t*Y*vb)*Md;x[12]=Vc*Md;x[13]=(Aa*ad*N-sb*Xa*N+sb*H*Va-t*
ad*Va-Aa*H*Bc+t*Xa*Bc)*Md;x[14]=(sb*Y*N-W*ad*N-sb*H*ea+t*ad*ea+W*H*Bc-t*Y*Bc)*Md;x[15]=(W*Xa*N-Aa*Y*N+Aa*H*ea-t*Xa*ea-W*H*Va+t*Y*Va)*Md;return this||p};z.scale=function(t){var x=(this||p).elements,C=t.x,H=t.y;t=t.z;x[0]*=C;x[4]*=H;x[8]*=t;x[1]*=C;x[5]*=H;x[9]*=t;x[2]*=C;x[6]*=H;x[10]*=t;x[3]*=C;x[7]*=H;x[11]*=t;return this||p};z.getMaxScaleOnAxis=function(){var t=(this||p).elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))};
z.makeTranslation=function(t,x,C){this.set(1,0,0,t,0,1,0,x,0,0,1,C,0,0,0,1);return this||p};z.makeRotationX=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(1,0,0,0,0,x,-t,0,0,t,x,0,0,0,0,1);return this||p};z.makeRotationY=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,0,t,0,0,1,0,0,-t,0,x,0,0,0,0,1);return this||p};z.makeRotationZ=function(t){var x=Math.cos(t);t=Math.sin(t);this.set(x,-t,0,0,t,x,0,0,0,0,1,0,0,0,0,1);return this||p};z.makeRotationAxis=function(t,x){var C=Math.cos(x);x=
Math.sin(x);var H=1-C,N=t.x,T=t.y;t=t.z;var W=H*N,Y=H*T;this.set(W*N+C,W*T-x*t,W*t+x*T,0,W*T+x*t,Y*T+C,Y*t-x*N,0,W*t-x*T,Y*t+x*N,H*t*t+C,0,0,0,0,1);return this||p};z.makeScale=function(t,x,C){this.set(t,0,0,0,0,x,0,0,0,0,C,0,0,0,0,1);return this||p};z.makeShear=function(t,x,C){this.set(1,x,C,0,t,1,C,0,t,x,1,0,0,0,0,1);return this||p};z.compose=function(t,x,C){var H=(this||p).elements,N=x._x,T=x._y,W=x._z,Y=x._w,ea=N+N,sa=T+T,Aa=W+W;x=N*ea;var Xa=N*sa;N*=Aa;var Va=T*sa;T*=Aa;W*=Aa;ea*=Y;sa*=Y;Y*=Aa;
Aa=C.x;var vb=C.y;C=C.z;H[0]=(1-(Va+W))*Aa;H[1]=(Xa+Y)*Aa;H[2]=(N-sa)*Aa;H[3]=0;H[4]=(Xa-Y)*vb;H[5]=(1-(x+W))*vb;H[6]=(T+ea)*vb;H[7]=0;H[8]=(N+sa)*C;H[9]=(T-ea)*C;H[10]=(1-(x+Va))*C;H[11]=0;H[12]=t.x;H[13]=t.y;H[14]=t.z;H[15]=1;return this||p};z.decompose=function(t,x,C){var H=(this||p).elements,N=iF.set(H[0],H[1],H[2]).length(),T=iF.set(H[4],H[5],H[6]).length(),W=iF.set(H[8],H[9],H[10]).length();0>this.determinant()&&(N=-N);t.x=H[12];t.y=H[13];t.z=H[14];Um.copy(this||p);t=1/N;H=1/T;var Y=1/W;Um.elements[0]*=
t;Um.elements[1]*=t;Um.elements[2]*=t;Um.elements[4]*=H;Um.elements[5]*=H;Um.elements[6]*=H;Um.elements[8]*=Y;Um.elements[9]*=Y;Um.elements[10]*=Y;x.setFromRotationMatrix(Um);C.x=N;C.y=T;C.z=W;return this||p};z.makePerspective=function(t,x,C,H,N,T){void 0===T&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var W=(this||p).elements;W[0]=2*N/(x-t);W[4]=0;W[8]=(x+t)/(x-t);W[12]=0;W[1]=0;W[5]=2*N/(C-H);W[9]=(C+H)/(C-H);W[13]=0;W[2]=
0;W[6]=0;W[10]=-(T+N)/(T-N);W[14]=-2*T*N/(T-N);W[3]=0;W[7]=0;W[11]=-1;W[15]=0;return this||p};z.makeOrthographic=function(t,x,C,H,N,T){var W=(this||p).elements,Y=1/(x-t),ea=1/(C-H),sa=1/(T-N);W[0]=2*Y;W[4]=0;W[8]=0;W[12]=-((x+t)*Y);W[1]=0;W[5]=2*ea;W[9]=0;W[13]=-((C+H)*ea);W[2]=0;W[6]=0;W[10]=-2*sa;W[14]=-((T+N)*sa);W[3]=0;W[7]=0;W[11]=0;W[15]=1;return this||p};z.equals=function(t){var x=(this||p).elements;t=t.elements;for(var C=0;16>C;C++)if(x[C]!==t[C])return!1;return!0};z.fromArray=function(t,
x){void 0===x&&(x=0);for(var C=0;16>C;C++)(this||p).elements[C]=t[C+x];return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);var C=(this||p).elements;t[x]=C[0];t[x+1]=C[1];t[x+2]=C[2];t[x+3]=C[3];t[x+4]=C[4];t[x+5]=C[5];t[x+6]=C[6];t[x+7]=C[7];t[x+8]=C[8];t[x+9]=C[9];t[x+10]=C[10];t[x+11]=C[11];t[x+12]=C[12];t[x+13]=C[13];t[x+14]=C[14];t[x+15]=C[15];return t};return u}(),iF=new wc,Um=new uj,iva=new wc(0,0,0),jva=new wc(1,1,1),Qz=new wc,rP=new wc,vp=new wc,BO=function(){function u(t,
x,C,H){void 0===t&&(t=0);void 0===x&&(x=0);void 0===C&&(C=0);void 0===H&&(H=u.DefaultOrder);Object.defineProperty(this||p,"isEuler",{value:!0});(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=H}var z=u.prototype;z.set=function(t,x,C,H){(this||p)._x=t;(this||p)._y=x;(this||p)._z=C;(this||p)._order=H||(this||p)._order;this._onChangeCallback();return this||p};z.clone=function(){return new (this||p).constructor((this||p)._x,(this||p)._y,(this||p)._z,(this||p)._order)};z.copy=function(t){(this||
p)._x=t._x;(this||p)._y=t._y;(this||p)._z=t._z;(this||p)._order=t._order;this._onChangeCallback();return this||p};z.setFromRotationMatrix=function(t,x,C){var H=ti.clamp,N=t.elements;t=N[0];var T=N[4],W=N[8],Y=N[1],ea=N[5],sa=N[9],Aa=N[2],Xa=N[6];N=N[10];x=x||(this||p)._order;switch(x){case "XYZ":(this||p)._y=Math.asin(H(W,-1,1));.9999999>Math.abs(W)?((this||p)._x=Math.atan2(-sa,N),(this||p)._z=Math.atan2(-T,t)):((this||p)._x=Math.atan2(Xa,ea),(this||p)._z=0);break;case "YXZ":(this||p)._x=Math.asin(-H(sa,
-1,1));.9999999>Math.abs(sa)?((this||p)._y=Math.atan2(W,N),(this||p)._z=Math.atan2(Y,ea)):((this||p)._y=Math.atan2(-Aa,t),(this||p)._z=0);break;case "ZXY":(this||p)._x=Math.asin(H(Xa,-1,1));.9999999>Math.abs(Xa)?((this||p)._y=Math.atan2(-Aa,N),(this||p)._z=Math.atan2(-T,ea)):((this||p)._y=0,(this||p)._z=Math.atan2(Y,t));break;case "ZYX":(this||p)._y=Math.asin(-H(Aa,-1,1));.9999999>Math.abs(Aa)?((this||p)._x=Math.atan2(Xa,N),(this||p)._z=Math.atan2(Y,t)):((this||p)._x=0,(this||p)._z=Math.atan2(-T,
ea));break;case "YZX":(this||p)._z=Math.asin(H(Y,-1,1));.9999999>Math.abs(Y)?((this||p)._x=Math.atan2(-sa,ea),(this||p)._y=Math.atan2(-Aa,t)):((this||p)._x=0,(this||p)._y=Math.atan2(W,N));break;case "XZY":(this||p)._z=Math.asin(-H(T,-1,1));.9999999>Math.abs(T)?((this||p)._x=Math.atan2(Xa,ea),(this||p)._y=Math.atan2(W,t)):((this||p)._x=Math.atan2(-sa,N),(this||p)._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+x)}(this||p)._order=x;!1!==C&&this._onChangeCallback();
return this||p};z.setFromQuaternion=function(t,x,C){Qca.makeRotationFromQuaternion(t);return this.setFromRotationMatrix(Qca,x,C)};z.setFromVector3=function(t,x){return this.set(t.x,t.y,t.z,x||(this||p)._order)};z.reorder=function(t){Rca.setFromEuler(this||p);return this.setFromQuaternion(Rca,t)};z.equals=function(t){return t._x===(this||p)._x&&t._y===(this||p)._y&&t._z===(this||p)._z&&t._order===(this||p)._order};z.fromArray=function(t){(this||p)._x=t[0];(this||p)._y=t[1];(this||p)._z=t[2];void 0!==
t[3]&&((this||p)._order=t[3]);this._onChangeCallback();return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p)._x;t[x+1]=(this||p)._y;t[x+2]=(this||p)._z;t[x+3]=(this||p)._order;return t};z.toVector3=function(t){return t?t.set((this||p)._x,(this||p)._y,(this||p)._z):new wc((this||p)._x,(this||p)._y,(this||p)._z)};z._onChange=function(t){(this||p)._onChangeCallback=t;return this||p};z._onChangeCallback=function(){};a(u,[{key:"x",get:function(){return(this||p)._x},
set:function(t){(this||p)._x=t;this._onChangeCallback()}},{key:"y",get:function(){return(this||p)._y},set:function(t){(this||p)._y=t;this._onChangeCallback()}},{key:"z",get:function(){return(this||p)._z},set:function(t){(this||p)._z=t;this._onChangeCallback()}},{key:"order",get:function(){return(this||p)._order},set:function(t){(this||p)._order=t;this._onChangeCallback()}}]);return u}();BO.DefaultOrder="XYZ";BO.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var Qca=new uj,Rca=new Ko,cX=function(){function u(){(this||
p).mask=1}var z=u.prototype;z.set=function(t){(this||p).mask=1<<t|0};z.enable=function(t){(this||p).mask=(this||p).mask|1<<t|0};z.enableAll=function(){(this||p).mask=-1};z.toggle=function(t){(this||p).mask^=1<<t|0};z.disable=function(t){(this||p).mask&=~(1<<t|0)};z.disableAll=function(){(this||p).mask=0};z.test=function(t){return 0!==((this||p).mask&t.mask)};return u}(),Qua=0,Sca=new wc,jF=new Ko,sx=new uj,sP=new wc,WI=new wc,kva=new wc,lva=new Ko,Tca=new wc(1,0,0),Uca=new wc(0,1,0),Vca=new wc(0,
0,1),mva={type:"added"},nva={type:"removed"};E.DefaultUp=new wc(0,1,0);E.DefaultMatrixAutoUpdate=!0;E.prototype=Object.assign(Object.create(d.prototype),{constructor:E,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();(this||p).matrix.premultiply(u);(this||p).matrix.decompose((this||p).position,(this||p).quaternion,(this||p).scale)},applyQuaternion:function(u){(this||p).quaternion.premultiply(u);return this||
p},setRotationFromAxisAngle:function(u,z){(this||p).quaternion.setFromAxisAngle(u,z)},setRotationFromEuler:function(u){(this||p).quaternion.setFromEuler(u,!0)},setRotationFromMatrix:function(u){(this||p).quaternion.setFromRotationMatrix(u)},setRotationFromQuaternion:function(u){(this||p).quaternion.copy(u)},rotateOnAxis:function(u,z){jF.setFromAxisAngle(u,z);(this||p).quaternion.multiply(jF);return this||p},rotateOnWorldAxis:function(u,z){jF.setFromAxisAngle(u,z);(this||p).quaternion.premultiply(jF);
return this||p},rotateX:function(u){return this.rotateOnAxis(Tca,u)},rotateY:function(u){return this.rotateOnAxis(Uca,u)},rotateZ:function(u){return this.rotateOnAxis(Vca,u)},translateOnAxis:function(u,z){Sca.copy(u).applyQuaternion((this||p).quaternion);(this||p).position.add(Sca.multiplyScalar(z));return this||p},translateX:function(u){return this.translateOnAxis(Tca,u)},translateY:function(u){return this.translateOnAxis(Uca,u)},translateZ:function(u){return this.translateOnAxis(Vca,u)},localToWorld:function(u){return u.applyMatrix4((this||
p).matrixWorld)},worldToLocal:function(u){return u.applyMatrix4(sx.getInverse((this||p).matrixWorld))},lookAt:function(u,z,t){u.isVector3?sP.copy(u):sP.set(u,z,t);u=(this||p).parent;this.updateWorldMatrix(!0,!1);WI.setFromMatrixPosition((this||p).matrixWorld);(this||p).isCamera||(this||p).isLight?sx.lookAt(WI,sP,(this||p).up):sx.lookAt(sP,WI,(this||p).up);(this||p).quaternion.setFromRotationMatrix(sx);u&&(sx.extractRotation(u.matrixWorld),jF.setFromRotationMatrix(sx),(this||p).quaternion.premultiply(jF.inverse()))},
add:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.add(arguments[z]);return this||p}if(u===(this||p))return console.error("THREE.Object3D.add: object can't be added as a child of itself.",u),this||p;u&&u.isObject3D?(null!==u.parent&&u.parent.remove(u),u.parent=this||p,(this||p).children.push(u),u.dispatchEvent(mva)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",u);return this||p},remove:function(u){if(1<arguments.length){for(var z=0;z<arguments.length;z++)this.remove(arguments[z]);
return this||p}z=(this||p).children.indexOf(u);-1!==z&&(u.parent=null,(this||p).children.splice(z,1),u.dispatchEvent(nva));return this||p},attach:function(u){this.updateWorldMatrix(!0,!1);sx.getInverse((this||p).matrixWorld);null!==u.parent&&(u.parent.updateWorldMatrix(!0,!1),sx.multiply(u.parent.matrixWorld));u.applyMatrix4(sx);u.updateWorldMatrix(!1,!1);this.add(u);return this||p},getObjectById:function(u){return this.getObjectByProperty("id",u)},getObjectByName:function(u){return this.getObjectByProperty("name",
u)},getObjectByProperty:function(u,z){if((this||p)[u]===z)return this||p;for(var t=0,x=(this||p).children.length;t<x;t++){var C=(this||p).children[t].getObjectByProperty(u,z);if(void 0!==C)return C}},getWorldPosition:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),u=new wc);this.updateWorldMatrix(!0,!1);return u.setFromMatrixPosition((this||p).matrixWorld)},getWorldQuaternion:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
u=new Ko);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(WI,u,kva);return u},getWorldScale:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),u=new wc);this.updateWorldMatrix(!0,!1);(this||p).matrixWorld.decompose(WI,lva,u);return u},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),u=new wc);this.updateWorldMatrix(!0,!1);var z=(this||p).matrixWorld.elements;return u.set(z[8],
z[9],z[10]).normalize()},raycast:function(){},traverse:function(u){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverse(u)},traverseVisible:function(u){if(!1!==(this||p).visible){u(this||p);for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].traverseVisible(u)}},traverseAncestors:function(u){var z=(this||p).parent;null!==z&&(u(z),z.traverseAncestors(u))},updateMatrix:function(){(this||p).matrix.compose((this||p).position,(this||p).quaternion,(this||p).scale);(this||p).matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(u){(this||p).matrixAutoUpdate&&this.updateMatrix();if((this||p).matrixWorldNeedsUpdate||u)null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix),(this||p).matrixWorldNeedsUpdate=!1,u=!0;for(var z=(this||p).children,t=0,x=z.length;t<x;t++)z[t].updateMatrixWorld(u)},updateWorldMatrix:function(u,z){var t=(this||p).parent;!0===u&&null!==t&&t.updateWorldMatrix(!0,!1);(this||
p).matrixAutoUpdate&&this.updateMatrix();null===(this||p).parent?(this||p).matrixWorld.copy((this||p).matrix):(this||p).matrixWorld.multiplyMatrices((this||p).parent.matrixWorld,(this||p).matrix);if(!0===z)for(u=(this||p).children,z=0,t=u.length;z<t;z++)u[z].updateWorldMatrix(!1,!0)},toJSON:function(u){function z(ea,sa){void 0===ea[sa.uuid]&&(ea[sa.uuid]=sa.toJSON(u));return sa.uuid}function t(ea){var sa=[],Aa;for(Aa in ea){var Xa=ea[Aa];delete Xa.metadata;sa.push(Xa)}return sa}var x=void 0===u||
"string"===typeof u,C={};x&&(u={geometries:{},materials:{},textures:{},images:{},shapes:{}},C.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var H={};H.uuid=(this||p).uuid;H.type=(this||p).type;""!==(this||p).name&&(H.name=(this||p).name);!0===(this||p).castShadow&&(H.castShadow=!0);!0===(this||p).receiveShadow&&(H.receiveShadow=!0);!1===(this||p).visible&&(H.visible=!1);!1===(this||p).frustumCulled&&(H.frustumCulled=!1);0!==(this||p).renderOrder&&(H.renderOrder=(this||p).renderOrder);
"{}"!==JSON.stringify((this||p).userData)&&(H.userData=(this||p).userData);H.layers=(this||p).layers.mask;H.matrix=(this||p).matrix.toArray();!1===(this||p).matrixAutoUpdate&&(H.matrixAutoUpdate=!1);(this||p).isInstancedMesh&&(H.type="InstancedMesh",H.count=(this||p).count,H.instanceMatrix=(this||p).instanceMatrix.toJSON());if((this||p).isMesh||(this||p).isLine||(this||p).isPoints){H.geometry=z(u.geometries,(this||p).geometry);var N=(this||p).geometry.parameters;if(void 0!==N&&void 0!==N.shapes)if(N=
N.shapes,Array.isArray(N))for(var T=0,W=N.length;T<W;T++)z(u.shapes,N[T]);else z(u.shapes,N)}if(void 0!==(this||p).material)if(Array.isArray((this||p).material)){N=[];T=0;for(W=(this||p).material.length;T<W;T++)N.push(z(u.materials,(this||p).material[T]));H.material=N}else H.material=z(u.materials,(this||p).material);if(0<(this||p).children.length)for(H.children=[],N=0;N<(this||p).children.length;N++)H.children.push((this||p).children[N].toJSON(u).object);if(x){x=t(u.geometries);N=t(u.materials);
T=t(u.textures);W=t(u.images);var Y=t(u.shapes);0<x.length&&(C.geometries=x);0<N.length&&(C.materials=N);0<T.length&&(C.textures=T);0<W.length&&(C.images=W);0<Y.length&&(C.shapes=Y)}C.object=H;return C},clone:function(u){return(new (this||p).constructor).copy(this||p,u)},copy:function(u,z){void 0===z&&(z=!0);(this||p).name=u.name;(this||p).up.copy(u.up);(this||p).position.copy(u.position);(this||p).rotation.order=u.rotation.order;(this||p).quaternion.copy(u.quaternion);(this||p).scale.copy(u.scale);
(this||p).matrix.copy(u.matrix);(this||p).matrixWorld.copy(u.matrixWorld);(this||p).matrixAutoUpdate=u.matrixAutoUpdate;(this||p).matrixWorldNeedsUpdate=u.matrixWorldNeedsUpdate;(this||p).layers.mask=u.layers.mask;(this||p).visible=u.visible;(this||p).castShadow=u.castShadow;(this||p).receiveShadow=u.receiveShadow;(this||p).frustumCulled=u.frustumCulled;(this||p).renderOrder=u.renderOrder;(this||p).userData=JSON.parse(JSON.stringify(u.userData));if(!0===z)for(z=0;z<u.children.length;z++)this.add(u.children[z].clone());
return this||p}});var TX=new wc,ova=new wc,pva=new tp,Gv=function(){function u(t,x){Object.defineProperty(this||p,"isPlane",{value:!0});(this||p).normal=void 0!==t?t:new wc(1,0,0);(this||p).constant=void 0!==x?x:0}var z=u.prototype;z.set=function(t,x){(this||p).normal.copy(t);(this||p).constant=x;return this||p};z.setComponents=function(t,x,C,H){(this||p).normal.set(t,x,C);(this||p).constant=H;return this||p};z.setFromNormalAndCoplanarPoint=function(t,x){(this||p).normal.copy(t);(this||p).constant=
-x.dot((this||p).normal);return this||p};z.setFromCoplanarPoints=function(t,x,C){x=TX.subVectors(C,x).cross(ova.subVectors(t,x)).normalize();this.setFromNormalAndCoplanarPoint(x,t);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).normal.copy(t.normal);(this||p).constant=t.constant;return this||p};z.normalize=function(){var t=1/(this||p).normal.length();(this||p).normal.multiplyScalar(t);(this||p).constant*=t;return this||p};z.negate=
function(){(this||p).constant*=-1;(this||p).normal.negate();return this||p};z.distanceToPoint=function(t){return(this||p).normal.dot(t)+(this||p).constant};z.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius};z.projectPoint=function(t,x){void 0===x&&(console.warn("THREE.Plane: .projectPoint() target is now required"),x=new wc);return x.copy((this||p).normal).multiplyScalar(-this.distanceToPoint(t)).add(t)};z.intersectLine=function(t,x){void 0===x&&(console.warn("THREE.Plane: .intersectLine() target is now required"),
x=new wc);var C=t.delta(TX),H=(this||p).normal.dot(C);if(0===H){if(0===this.distanceToPoint(t.start))return x.copy(t.start)}else if(H=-(t.start.dot((this||p).normal)+(this||p).constant)/H,!(0>H||1<H))return x.copy(C).multiplyScalar(H).add(t.start)};z.intersectsLine=function(t){var x=this.distanceToPoint(t.start);t=this.distanceToPoint(t.end);return 0>x&&0<t||0>t&&0<x};z.intersectsBox=function(t){return t.intersectsPlane(this||p)};z.intersectsSphere=function(t){return t.intersectsPlane(this||p)};z.coplanarPoint=
function(t){void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new wc);return t.copy((this||p).normal).multiplyScalar(-(this||p).constant)};z.applyMatrix4=function(t,x){x=x||pva.getNormalMatrix(t);t=this.coplanarPoint(TX).applyMatrix4(t);x=(this||p).normal.applyMatrix3(x).normalize();(this||p).constant=-t.dot(x);return this||p};z.translate=function(t){(this||p).constant-=t.dot((this||p).normal);return this||p};z.equals=function(t){return t.normal.equals((this||p).normal)&&
t.constant===(this||p).constant};return u}(),Nt=new wc,tx=new wc,UX=new wc,ux=new wc,kF=new wc,lF=new wc,Wca=new wc,VX=new wc,WX=new wc,XX=new wc,Et=function(){function u(t,x,C){(this||p).a=void 0!==t?t:new wc;(this||p).b=void 0!==x?x:new wc;(this||p).c=void 0!==C?C:new wc}u.getNormal=function(t,x,C,H){void 0===H&&(console.warn("THREE.Triangle: .getNormal() target is now required"),H=new wc);H.subVectors(C,x);Nt.subVectors(t,x);H.cross(Nt);t=H.lengthSq();return 0<t?H.multiplyScalar(1/Math.sqrt(t)):
H.set(0,0,0)};u.getBarycoord=function(t,x,C,H,N){Nt.subVectors(H,x);tx.subVectors(C,x);UX.subVectors(t,x);t=Nt.dot(Nt);x=Nt.dot(tx);C=Nt.dot(UX);var T=tx.dot(tx);H=tx.dot(UX);var W=t*T-x*x;void 0===N&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),N=new wc);if(0===W)return N.set(-2,-1,-1);W=1/W;T=(T*C-x*H)*W;t=(t*H-x*C)*W;return N.set(1-T-t,t,T)};u.containsPoint=function(t,x,C,H){this.getBarycoord(t,x,C,H,ux);return 0<=ux.x&&0<=ux.y&&1>=ux.x+ux.y};u.getUV=function(t,x,C,H,
N,T,W,Y){this.getBarycoord(t,x,C,H,ux);Y.set(0,0);Y.addScaledVector(N,ux.x);Y.addScaledVector(T,ux.y);Y.addScaledVector(W,ux.z);return Y};u.isFrontFacing=function(t,x,C,H){Nt.subVectors(C,x);tx.subVectors(t,x);return 0>Nt.cross(tx).dot(H)?!0:!1};var z=u.prototype;z.set=function(t,x,C){(this||p).a.copy(t);(this||p).b.copy(x);(this||p).c.copy(C);return this||p};z.setFromPointsAndIndices=function(t,x,C,H){(this||p).a.copy(t[x]);(this||p).b.copy(t[C]);(this||p).c.copy(t[H]);return this||p};z.clone=function(){return(new (this||
p).constructor).copy(this||p)};z.copy=function(t){(this||p).a.copy(t.a);(this||p).b.copy(t.b);(this||p).c.copy(t.c);return this||p};z.getArea=function(){Nt.subVectors((this||p).c,(this||p).b);tx.subVectors((this||p).a,(this||p).b);return.5*Nt.cross(tx).length()};z.getMidpoint=function(t){void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new wc);return t.addVectors((this||p).a,(this||p).b).add((this||p).c).multiplyScalar(1/3)};z.getNormal=function(t){return u.getNormal((this||
p).a,(this||p).b,(this||p).c,t)};z.getPlane=function(t){void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Gv);return t.setFromCoplanarPoints((this||p).a,(this||p).b,(this||p).c)};z.getBarycoord=function(t,x){return u.getBarycoord(t,(this||p).a,(this||p).b,(this||p).c,x)};z.getUV=function(t,x,C,H,N){return u.getUV(t,(this||p).a,(this||p).b,(this||p).c,x,C,H,N)};z.containsPoint=function(t){return u.containsPoint(t,(this||p).a,(this||p).b,(this||p).c)};z.isFrontFacing=
function(t){return u.isFrontFacing((this||p).a,(this||p).b,(this||p).c,t)};z.intersectsBox=function(t){return t.intersectsTriangle(this||p)};z.closestPointToPoint=function(t,x){void 0===x&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),x=new wc);var C=(this||p).a,H=(this||p).b,N=(this||p).c;kF.subVectors(H,C);lF.subVectors(N,C);VX.subVectors(t,C);var T=kF.dot(VX),W=lF.dot(VX);if(0>=T&&0>=W)return x.copy(C);WX.subVectors(t,H);var Y=kF.dot(WX),ea=lF.dot(WX);if(0<=Y&&
ea<=Y)return x.copy(H);var sa=T*ea-Y*W;if(0>=sa&&0<=T&&0>=Y)return H=T/(T-Y),x.copy(C).addScaledVector(kF,H);XX.subVectors(t,N);t=kF.dot(XX);var Aa=lF.dot(XX);if(0<=Aa&&t<=Aa)return x.copy(N);T=t*W-T*Aa;if(0>=T&&0<=W&&0>=Aa)return sa=W/(W-Aa),x.copy(C).addScaledVector(lF,sa);W=Y*Aa-t*ea;if(0>=W&&0<=ea-Y&&0<=t-Aa)return Wca.subVectors(N,H),sa=(ea-Y)/(ea-Y+(t-Aa)),x.copy(H).addScaledVector(Wca,sa);N=1/(W+T+sa);H=T*N;sa*=N;return x.copy(C).addScaledVector(kF,H).addScaledVector(lF,sa)};z.equals=function(t){return t.a.equals((this||
p).a)&&t.b.equals((this||p).b)&&t.c.equals((this||p).c)};return u}(),Xca={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,
darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,
gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,
lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,
orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},hq={h:0,s:0,l:0},tP={h:0,s:0,l:0},Hg=function(){function u(t,x,C){Object.defineProperty(this||p,"isColor",{value:!0});return void 0===x&&void 0===C?this.set(t):this.setRGB(t,x,C)}var z=u.prototype;z.set=function(t){t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t);
return this||p};z.setScalar=function(t){(this||p).r=t;(this||p).g=t;(this||p).b=t;return this||p};z.setHex=function(t){t=Math.floor(t);(this||p).r=(t>>16&255)/255;(this||p).g=(t>>8&255)/255;(this||p).b=(t&255)/255;return this||p};z.setRGB=function(t,x,C){(this||p).r=t;(this||p).g=x;(this||p).b=C;return this||p};z.setHSL=function(t,x,C){t=ti.euclideanModulo(t,1);x=ti.clamp(x,0,1);C=ti.clamp(C,0,1);0===x?(this||p).r=(this||p).g=(this||p).b=C:(x=.5>=C?C*(1+x):C+x-C*x,C=2*C-x,(this||p).r=F(C,x,t+1/3),
(this||p).g=F(C,x,t),(this||p).b=F(C,x,t-1/3));return this||p};z.setStyle=function(t){function x(W){void 0!==W&&1>parseFloat(W)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var C;if(C=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var H=C[2];switch(C[1]){case "rgb":case "rgba":if(C=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(H))return(this||p).r=Math.min(255,parseInt(C[1],10))/255,(this||p).g=Math.min(255,parseInt(C[2],10))/255,(this||p).b=Math.min(255,
parseInt(C[3],10))/255,x(C[5]),this||p;if(C=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(H))return(this||p).r=Math.min(100,parseInt(C[1],10))/100,(this||p).g=Math.min(100,parseInt(C[2],10))/100,(this||p).b=Math.min(100,parseInt(C[3],10))/100,x(C[5]),this||p;break;case "hsl":case "hsla":if(C=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(H)){H=parseFloat(C[1])/360;var N=parseInt(C[2],10)/100,T=parseInt(C[3],10)/100;x(C[5]);return this.setHSL(H,
N,T)}}}else if(C=/^#([A-Fa-f0-9]+)$/.exec(t)){C=C[1];H=C.length;if(3===H)return(this||p).r=parseInt(C.charAt(0)+C.charAt(0),16)/255,(this||p).g=parseInt(C.charAt(1)+C.charAt(1),16)/255,(this||p).b=parseInt(C.charAt(2)+C.charAt(2),16)/255,this||p;if(6===H)return(this||p).r=parseInt(C.charAt(0)+C.charAt(1),16)/255,(this||p).g=parseInt(C.charAt(2)+C.charAt(3),16)/255,(this||p).b=parseInt(C.charAt(4)+C.charAt(5),16)/255,this||p}return t&&0<t.length?this.setColorName(t):this||p};z.setColorName=function(t){var x=
Xca[t];void 0!==x?this.setHex(x):console.warn("THREE.Color: Unknown color "+t);return this||p};z.clone=function(){return new (this||p).constructor((this||p).r,(this||p).g,(this||p).b)};z.copy=function(t){(this||p).r=t.r;(this||p).g=t.g;(this||p).b=t.b;return this||p};z.copyGammaToLinear=function(t,x){void 0===x&&(x=2);(this||p).r=Math.pow(t.r,x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.copyLinearToGamma=function(t,x){void 0===x&&(x=2);x=0<x?1/x:1;(this||p).r=Math.pow(t.r,
x);(this||p).g=Math.pow(t.g,x);(this||p).b=Math.pow(t.b,x);return this||p};z.convertGammaToLinear=function(t){this.copyGammaToLinear(this||p,t);return this||p};z.convertLinearToGamma=function(t){this.copyLinearToGamma(this||p,t);return this||p};z.copySRGBToLinear=function(t){(this||p).r=G(t.r);(this||p).g=G(t.g);(this||p).b=G(t.b);return this||p};z.copyLinearToSRGB=function(t){(this||p).r=I(t.r);(this||p).g=I(t.g);(this||p).b=I(t.b);return this||p};z.convertSRGBToLinear=function(){this.copySRGBToLinear(this||
p);return this||p};z.convertLinearToSRGB=function(){this.copyLinearToSRGB(this||p);return this||p};z.getHex=function(){return 255*(this||p).r<<16^255*(this||p).g<<8^255*(this||p).b<<0};z.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};z.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var x=(this||p).r,C=(this||p).g,H=(this||p).b,N=Math.max(x,C,H),T=Math.min(x,C,H),W,Y=(T+N)/2;if(T===N)T=W=0;else{var ea=N-
T;T=.5>=Y?ea/(N+T):ea/(2-N-T);switch(N){case x:W=(C-H)/ea+(C<H?6:0);break;case C:W=(H-x)/ea+2;break;case H:W=(x-C)/ea+4}W/=6}t.h=W;t.s=T;t.l=Y;return t};z.getStyle=function(){return"rgb("+(255*(this||p).r|0)+","+(255*(this||p).g|0)+","+(255*(this||p).b|0)+")"};z.offsetHSL=function(t,x,C){this.getHSL(hq);hq.h+=t;hq.s+=x;hq.l+=C;this.setHSL(hq.h,hq.s,hq.l);return this||p};z.add=function(t){(this||p).r+=t.r;(this||p).g+=t.g;(this||p).b+=t.b;return this||p};z.addColors=function(t,x){(this||p).r=t.r+x.r;
(this||p).g=t.g+x.g;(this||p).b=t.b+x.b;return this||p};z.addScalar=function(t){(this||p).r+=t;(this||p).g+=t;(this||p).b+=t;return this||p};z.sub=function(t){(this||p).r=Math.max(0,(this||p).r-t.r);(this||p).g=Math.max(0,(this||p).g-t.g);(this||p).b=Math.max(0,(this||p).b-t.b);return this||p};z.multiply=function(t){(this||p).r*=t.r;(this||p).g*=t.g;(this||p).b*=t.b;return this||p};z.multiplyScalar=function(t){(this||p).r*=t;(this||p).g*=t;(this||p).b*=t;return this||p};z.lerp=function(t,x){(this||
p).r+=(t.r-(this||p).r)*x;(this||p).g+=(t.g-(this||p).g)*x;(this||p).b+=(t.b-(this||p).b)*x;return this||p};z.lerpHSL=function(t,x){this.getHSL(hq);t.getHSL(tP);t=ti.lerp(hq.h,tP.h,x);var C=ti.lerp(hq.s,tP.s,x);x=ti.lerp(hq.l,tP.l,x);this.setHSL(t,C,x);return this||p};z.equals=function(t){return t.r===(this||p).r&&t.g===(this||p).g&&t.b===(this||p).b};z.fromArray=function(t,x){void 0===x&&(x=0);(this||p).r=t[x];(this||p).g=t[x+1];(this||p).b=t[x+2];return this||p};z.toArray=function(t,x){void 0===
t&&(t=[]);void 0===x&&(x=0);t[x]=(this||p).r;t[x+1]=(this||p).g;t[x+2]=(this||p).b;return t};z.fromBufferAttribute=function(t,x){(this||p).r=t.getX(x);(this||p).g=t.getY(x);(this||p).b=t.getZ(x);!0===t.normalized&&((this||p).r/=255,(this||p).g/=255,(this||p).b/=255);return this||p};z.toJSON=function(){return this.getHex()};return u}();Hg.NAMES=Xca;Hg.prototype.r=1;Hg.prototype.g=1;Hg.prototype.b=1;var yI=function(){function u(t,x,C,H,N,T){(this||p).a=t;(this||p).b=x;(this||p).c=C;(this||p).normal=
H&&H.isVector3?H:new wc;(this||p).vertexNormals=Array.isArray(H)?H:[];(this||p).color=N&&N.isColor?N:new Hg;(this||p).vertexColors=Array.isArray(N)?N:[];(this||p).materialIndex=void 0!==T?T:0}var z=u.prototype;z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).a=t.a;(this||p).b=t.b;(this||p).c=t.c;(this||p).normal.copy(t.normal);(this||p).color.copy(t.color);(this||p).materialIndex=t.materialIndex;for(var x=0,C=t.vertexNormals.length;x<C;x++)(this||p).vertexNormals[x]=
t.vertexNormals[x].clone();x=0;for(C=t.vertexColors.length;x<C;x++)(this||p).vertexColors[x]=t.vertexColors[x].clone();return this||p};return u}(),Rua=0;M.prototype=Object.assign(Object.create(d.prototype),{constructor:M,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return(this||p).onBeforeCompile.toString()},setValues:function(u){if(void 0!==u)for(var z in u){var t=u[z];if(void 0===t)console.warn("THREE.Material: '"+z+"' parameter is undefined.");else if("shading"===
z)console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead."),(this||p).flatShading=1===t?!0:!1;else{var x=(this||p)[z];void 0===x?console.warn("THREE."+(this||p).type+": '"+z+"' is not a property of this material."):x&&x.isColor?x.set(t):x&&x.isVector3&&t&&t.isVector3?x.copy(t):(this||p)[z]=t}}},toJSON:function(u){function z(C){var H=[],N;for(N in C){var T=C[N];delete T.metadata;H.push(T)}return H}var t=void 0===u||"string"===typeof u;t&&(u={textures:{},
images:{}});var x={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};x.uuid=(this||p).uuid;x.type=(this||p).type;""!==(this||p).name&&(x.name=(this||p).name);(this||p).color&&(this||p).color.isColor&&(x.color=(this||p).color.getHex());void 0!==(this||p).roughness&&(x.roughness=(this||p).roughness);void 0!==(this||p).metalness&&(x.metalness=(this||p).metalness);(this||p).sheen&&(this||p).sheen.isColor&&(x.sheen=(this||p).sheen.getHex());(this||p).emissive&&(this||p).emissive.isColor&&
(x.emissive=(this||p).emissive.getHex());(this||p).emissiveIntensity&&1!==(this||p).emissiveIntensity&&(x.emissiveIntensity=(this||p).emissiveIntensity);(this||p).specular&&(this||p).specular.isColor&&(x.specular=(this||p).specular.getHex());void 0!==(this||p).shininess&&(x.shininess=(this||p).shininess);void 0!==(this||p).clearcoat&&(x.clearcoat=(this||p).clearcoat);void 0!==(this||p).clearcoatRoughness&&(x.clearcoatRoughness=(this||p).clearcoatRoughness);(this||p).clearcoatMap&&(this||p).clearcoatMap.isTexture&&
(x.clearcoatMap=(this||p).clearcoatMap.toJSON(u).uuid);(this||p).clearcoatRoughnessMap&&(this||p).clearcoatRoughnessMap.isTexture&&(x.clearcoatRoughnessMap=(this||p).clearcoatRoughnessMap.toJSON(u).uuid);(this||p).clearcoatNormalMap&&(this||p).clearcoatNormalMap.isTexture&&(x.clearcoatNormalMap=(this||p).clearcoatNormalMap.toJSON(u).uuid,x.clearcoatNormalScale=(this||p).clearcoatNormalScale.toArray());(this||p).map&&(this||p).map.isTexture&&(x.map=(this||p).map.toJSON(u).uuid);(this||p).matcap&&(this||
p).matcap.isTexture&&(x.matcap=(this||p).matcap.toJSON(u).uuid);(this||p).alphaMap&&(this||p).alphaMap.isTexture&&(x.alphaMap=(this||p).alphaMap.toJSON(u).uuid);(this||p).lightMap&&(this||p).lightMap.isTexture&&(x.lightMap=(this||p).lightMap.toJSON(u).uuid);(this||p).aoMap&&(this||p).aoMap.isTexture&&(x.aoMap=(this||p).aoMap.toJSON(u).uuid,x.aoMapIntensity=(this||p).aoMapIntensity);(this||p).bumpMap&&(this||p).bumpMap.isTexture&&(x.bumpMap=(this||p).bumpMap.toJSON(u).uuid,x.bumpScale=(this||p).bumpScale);
(this||p).normalMap&&(this||p).normalMap.isTexture&&(x.normalMap=(this||p).normalMap.toJSON(u).uuid,x.normalMapType=(this||p).normalMapType,x.normalScale=(this||p).normalScale.toArray());(this||p).displacementMap&&(this||p).displacementMap.isTexture&&(x.displacementMap=(this||p).displacementMap.toJSON(u).uuid,x.displacementScale=(this||p).displacementScale,x.displacementBias=(this||p).displacementBias);(this||p).roughnessMap&&(this||p).roughnessMap.isTexture&&(x.roughnessMap=(this||p).roughnessMap.toJSON(u).uuid);
(this||p).metalnessMap&&(this||p).metalnessMap.isTexture&&(x.metalnessMap=(this||p).metalnessMap.toJSON(u).uuid);(this||p).emissiveMap&&(this||p).emissiveMap.isTexture&&(x.emissiveMap=(this||p).emissiveMap.toJSON(u).uuid);(this||p).specularMap&&(this||p).specularMap.isTexture&&(x.specularMap=(this||p).specularMap.toJSON(u).uuid);(this||p).envMap&&(this||p).envMap.isTexture&&(x.envMap=(this||p).envMap.toJSON(u).uuid,x.reflectivity=(this||p).reflectivity,x.refractionRatio=(this||p).refractionRatio,
void 0!==(this||p).combine&&(x.combine=(this||p).combine),void 0!==(this||p).envMapIntensity&&(x.envMapIntensity=(this||p).envMapIntensity));(this||p).gradientMap&&(this||p).gradientMap.isTexture&&(x.gradientMap=(this||p).gradientMap.toJSON(u).uuid);void 0!==(this||p).size&&(x.size=(this||p).size);void 0!==(this||p).sizeAttenuation&&(x.sizeAttenuation=(this||p).sizeAttenuation);1!==(this||p).blending&&(x.blending=(this||p).blending);!0===(this||p).flatShading&&(x.flatShading=(this||p).flatShading);
0!==(this||p).side&&(x.side=(this||p).side);(this||p).vertexColors&&(x.vertexColors=!0);1>(this||p).opacity&&(x.opacity=(this||p).opacity);!0===(this||p).transparent&&(x.transparent=(this||p).transparent);x.depthFunc=(this||p).depthFunc;x.depthTest=(this||p).depthTest;x.depthWrite=(this||p).depthWrite;x.stencilWrite=(this||p).stencilWrite;x.stencilWriteMask=(this||p).stencilWriteMask;x.stencilFunc=(this||p).stencilFunc;x.stencilRef=(this||p).stencilRef;x.stencilFuncMask=(this||p).stencilFuncMask;
x.stencilFail=(this||p).stencilFail;x.stencilZFail=(this||p).stencilZFail;x.stencilZPass=(this||p).stencilZPass;(this||p).rotation&&0!==(this||p).rotation&&(x.rotation=(this||p).rotation);!0===(this||p).polygonOffset&&(x.polygonOffset=!0);0!==(this||p).polygonOffsetFactor&&(x.polygonOffsetFactor=(this||p).polygonOffsetFactor);0!==(this||p).polygonOffsetUnits&&(x.polygonOffsetUnits=(this||p).polygonOffsetUnits);(this||p).linewidth&&1!==(this||p).linewidth&&(x.linewidth=(this||p).linewidth);void 0!==
(this||p).dashSize&&(x.dashSize=(this||p).dashSize);void 0!==(this||p).gapSize&&(x.gapSize=(this||p).gapSize);void 0!==(this||p).scale&&(x.scale=(this||p).scale);!0===(this||p).dithering&&(x.dithering=!0);0<(this||p).alphaTest&&(x.alphaTest=(this||p).alphaTest);!0===(this||p).premultipliedAlpha&&(x.premultipliedAlpha=(this||p).premultipliedAlpha);!0===(this||p).wireframe&&(x.wireframe=(this||p).wireframe);1<(this||p).wireframeLinewidth&&(x.wireframeLinewidth=(this||p).wireframeLinewidth);"round"!==
(this||p).wireframeLinecap&&(x.wireframeLinecap=(this||p).wireframeLinecap);"round"!==(this||p).wireframeLinejoin&&(x.wireframeLinejoin=(this||p).wireframeLinejoin);!0===(this||p).morphTargets&&(x.morphTargets=!0);!0===(this||p).morphNormals&&(x.morphNormals=!0);!0===(this||p).skinning&&(x.skinning=!0);!1===(this||p).visible&&(x.visible=!1);!1===(this||p).toneMapped&&(x.toneMapped=!1);"{}"!==JSON.stringify((this||p).userData)&&(x.userData=(this||p).userData);t&&(t=z(u.textures),u=z(u.images),0<t.length&&
(x.textures=t),0<u.length&&(x.images=u));return x},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).name=u.name;(this||p).fog=u.fog;(this||p).blending=u.blending;(this||p).side=u.side;(this||p).flatShading=u.flatShading;(this||p).vertexColors=u.vertexColors;(this||p).opacity=u.opacity;(this||p).transparent=u.transparent;(this||p).blendSrc=u.blendSrc;(this||p).blendDst=u.blendDst;(this||p).blendEquation=u.blendEquation;(this||p).blendSrcAlpha=u.blendSrcAlpha;
(this||p).blendDstAlpha=u.blendDstAlpha;(this||p).blendEquationAlpha=u.blendEquationAlpha;(this||p).depthFunc=u.depthFunc;(this||p).depthTest=u.depthTest;(this||p).depthWrite=u.depthWrite;(this||p).stencilWriteMask=u.stencilWriteMask;(this||p).stencilFunc=u.stencilFunc;(this||p).stencilRef=u.stencilRef;(this||p).stencilFuncMask=u.stencilFuncMask;(this||p).stencilFail=u.stencilFail;(this||p).stencilZFail=u.stencilZFail;(this||p).stencilZPass=u.stencilZPass;(this||p).stencilWrite=u.stencilWrite;var z=
u.clippingPlanes,t=null;if(null!==z){var x=z.length;t=Array(x);for(var C=0;C!==x;++C)t[C]=z[C].clone()}(this||p).clippingPlanes=t;(this||p).clipIntersection=u.clipIntersection;(this||p).clipShadows=u.clipShadows;(this||p).shadowSide=u.shadowSide;(this||p).colorWrite=u.colorWrite;(this||p).precision=u.precision;(this||p).polygonOffset=u.polygonOffset;(this||p).polygonOffsetFactor=u.polygonOffsetFactor;(this||p).polygonOffsetUnits=u.polygonOffsetUnits;(this||p).dithering=u.dithering;(this||p).alphaTest=
u.alphaTest;(this||p).premultipliedAlpha=u.premultipliedAlpha;(this||p).visible=u.visible;(this||p).toneMapped=u.toneMapped;(this||p).userData=JSON.parse(JSON.stringify(u.userData));return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(M.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});L.prototype=Object.create(M.prototype);L.prototype.constructor=L;L.prototype.isMeshBasicMaterial=!0;L.prototype.copy=function(u){M.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=
u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;return this||p};var tl=new wc,uP=new cf;Object.defineProperty(S.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(S.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).name=u.name;(this||p).array=new u.array.constructor(u.array);(this||p).itemSize=
u.itemSize;(this||p).count=u.count;(this||p).normalized=u.normalized;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||p).itemSize;t*=z.itemSize;for(var x=0,C=(this||p).itemSize;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},copyArray:function(u){(this||p).array.set(u);return this||p},copyColorsArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var H=u[x];void 0===H&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
x),H=new Hg);z[t++]=H.r;z[t++]=H.g;z[t++]=H.b}return this||p},copyVector2sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var H=u[x];void 0===H&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",x),H=new cf);z[t++]=H.x;z[t++]=H.y}return this||p},copyVector3sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var H=u[x];void 0===H&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",x),H=new wc);z[t++]=
H.x;z[t++]=H.y;z[t++]=H.z}return this||p},copyVector4sArray:function(u){for(var z=(this||p).array,t=0,x=0,C=u.length;x<C;x++){var H=u[x];void 0===H&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",x),H=new $k);z[t++]=H.x;z[t++]=H.y;z[t++]=H.z;z[t++]=H.w}return this||p},applyMatrix3:function(u){if(2===(this||p).itemSize)for(var z=0,t=(this||p).count;z<t;z++)uP.fromBufferAttribute(this||p,z),uP.applyMatrix3(u),this.setXY(z,uP.x,uP.y);else if(3===(this||p).itemSize)for(z=
0,t=(this||p).count;z<t;z++)tl.fromBufferAttribute(this||p,z),tl.applyMatrix3(u),this.setXYZ(z,tl.x,tl.y,tl.z);return this||p},applyMatrix4:function(u){for(var z=0,t=(this||p).count;z<t;z++)tl.x=this.getX(z),tl.y=this.getY(z),tl.z=this.getZ(z),tl.applyMatrix4(u),this.setXYZ(z,tl.x,tl.y,tl.z);return this||p},applyNormalMatrix:function(u){for(var z=0,t=(this||p).count;z<t;z++)tl.x=this.getX(z),tl.y=this.getY(z),tl.z=this.getZ(z),tl.applyNormalMatrix(u),this.setXYZ(z,tl.x,tl.y,tl.z);return this||p},
transformDirection:function(u){for(var z=0,t=(this||p).count;z<t;z++)tl.x=this.getX(z),tl.y=this.getY(z),tl.z=this.getZ(z),tl.transformDirection(u),this.setXYZ(z,tl.x,tl.y,tl.z);return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},getX:function(u){return(this||p).array[u*(this||p).itemSize]},setX:function(u,z){(this||p).array[u*(this||p).itemSize]=z;return this||p},getY:function(u){return(this||p).array[u*(this||p).itemSize+1]},setY:function(u,z){(this||p).array[u*
(this||p).itemSize+1]=z;return this||p},getZ:function(u){return(this||p).array[u*(this||p).itemSize+2]},setZ:function(u,z){(this||p).array[u*(this||p).itemSize+2]=z;return this||p},getW:function(u){return(this||p).array[u*(this||p).itemSize+3]},setW:function(u,z){(this||p).array[u*(this||p).itemSize+3]=z;return this||p},setXY:function(u,z,t){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||
p).array[u+1]=t;(this||p).array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u*=(this||p).itemSize;(this||p).array[u+0]=z;(this||p).array[u+1]=t;(this||p).array[u+2]=x;(this||p).array[u+3]=C;return this||p},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},clone:function(){return(new (this||p).constructor((this||p).array,(this||p).itemSize)).copy(this||p)},toJSON:function(){return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:Array.prototype.slice.call((this||
p).array),normalized:(this||p).normalized}}});R.prototype=Object.create(S.prototype);R.prototype.constructor=R;aa.prototype=Object.create(S.prototype);aa.prototype.constructor=aa;ra.prototype=Object.create(S.prototype);ra.prototype.constructor=ra;Ea.prototype=Object.create(S.prototype);Ea.prototype.constructor=Ea;K.prototype=Object.create(S.prototype);K.prototype.constructor=K;Z.prototype=Object.create(S.prototype);Z.prototype.constructor=Z;U.prototype=Object.create(S.prototype);U.prototype.constructor=
U;V.prototype=Object.create(S.prototype);V.prototype.constructor=V;na.prototype=Object.create(S.prototype);na.prototype.constructor=na;var qva=function(){function u(){(this||p).vertices=[];(this||p).normals=[];(this||p).colors=[];(this||p).uvs=[];(this||p).uvs2=[];(this||p).groups=[];(this||p).morphTargets={};(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).verticesNeedUpdate=!1;(this||p).normalsNeedUpdate=!1;(this||p).colorsNeedUpdate=
!1;(this||p).uvsNeedUpdate=!1;(this||p).groupsNeedUpdate=!1}var z=u.prototype;z.computeGroups=function(t){var x=[],C=void 0,H=t.faces;for(t=0;t<H.length;t++){var N=H[t];if(N.materialIndex!==C){C=N.materialIndex;void 0!==T&&(T.count=3*t-T.start,x.push(T));var T={start:3*t,materialIndex:C}}}void 0!==T&&(T.count=3*t-T.start,x.push(T));(this||p).groups=x};z.fromGeometry=function(t){var x=t.faces,C=t.vertices,H=t.faceVertexUvs,N=H[0]&&0<H[0].length,T=H[1]&&0<H[1].length,W=t.morphTargets,Y=W.length;if(0<
Y){var ea=[];for(var sa=0;sa<Y;sa++)ea[sa]={name:W[sa].name,data:[]};(this||p).morphTargets.position=ea}sa=t.morphNormals;var Aa=sa.length;if(0<Aa){var Xa=[];for(var Va=0;Va<Aa;Va++)Xa[Va]={name:sa[Va].name,data:[]};(this||p).morphTargets.normal=Xa}Va=t.skinIndices;var vb=t.skinWeights,sb=Va.length===C.length,ad=vb.length===C.length;0<C.length&&0===x.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var Bc=0;Bc<x.length;Bc++){var rd=x[Bc];(this||p).vertices.push(C[rd.a],
C[rd.b],C[rd.c]);var Jc=rd.vertexNormals;3===Jc.length?(this||p).normals.push(Jc[0],Jc[1],Jc[2]):(Jc=rd.normal,(this||p).normals.push(Jc,Jc,Jc));Jc=rd.vertexColors;3===Jc.length?(this||p).colors.push(Jc[0],Jc[1],Jc[2]):(Jc=rd.color,(this||p).colors.push(Jc,Jc,Jc));!0===N&&(Jc=H[0][Bc],void 0!==Jc?(this||p).uvs.push(Jc[0],Jc[1],Jc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Bc),(this||p).uvs.push(new cf,new cf,new cf)));!0===T&&(Jc=H[1][Bc],void 0!==Jc?(this||p).uvs2.push(Jc[0],
Jc[1],Jc[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Bc),(this||p).uvs2.push(new cf,new cf,new cf)));for(Jc=0;Jc<Y;Jc++){var vd=W[Jc].vertices;ea[Jc].data.push(vd[rd.a],vd[rd.b],vd[rd.c])}for(Jc=0;Jc<Aa;Jc++)vd=sa[Jc].vertexNormals[Bc],Xa[Jc].data.push(vd.a,vd.b,vd.c);sb&&(this||p).skinIndices.push(Va[rd.a],Va[rd.b],Va[rd.c]);ad&&(this||p).skinWeights.push(vb[rd.a],vb[rd.b],vb[rd.c])}this.computeGroups(t);(this||p).verticesNeedUpdate=t.verticesNeedUpdate;(this||p).normalsNeedUpdate=
t.normalsNeedUpdate;(this||p).colorsNeedUpdate=t.colorsNeedUpdate;(this||p).uvsNeedUpdate=t.uvsNeedUpdate;(this||p).groupsNeedUpdate=t.groupsNeedUpdate;null!==t.boundingSphere&&((this||p).boundingSphere=t.boundingSphere.clone());null!==t.boundingBox&&((this||p).boundingBox=t.boundingBox.clone());return this||p};return u}(),Sua=1,Nv=new uj,YX=new E,mF=new wc,$q=new Mv,XI=new Mv,Wn=new wc;ya.prototype=Object.assign(Object.create(d.prototype),{constructor:ya,isBufferGeometry:!0,getIndex:function(){return(this||
p).index},setIndex:function(u){Array.isArray(u)?(this||p).index=new (65535<la(u)?U:K)(u,1):(this||p).index=u;return this||p},getAttribute:function(u){return(this||p).attributes[u]},setAttribute:function(u,z){(this||p).attributes[u]=z;return this||p},deleteAttribute:function(u){delete (this||p).attributes[u];return this||p},addGroup:function(u,z,t){(this||p).groups.push({start:u,count:z,materialIndex:void 0!==t?t:0})},clearGroups:function(){(this||p).groups=[]},setDrawRange:function(u,z){(this||p).drawRange.start=
u;(this||p).drawRange.count=z},applyMatrix4:function(u){var z=(this||p).attributes.position;void 0!==z&&(z.applyMatrix4(u),z.needsUpdate=!0);z=(this||p).attributes.normal;if(void 0!==z){var t=(new tp).getNormalMatrix(u);z.applyNormalMatrix(t);z.needsUpdate=!0}z=(this||p).attributes.tangent;void 0!==z&&(z.transformDirection(u),z.needsUpdate=!0);null!==(this||p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();return this||p},rotateX:function(u){Nv.makeRotationX(u);
this.applyMatrix4(Nv);return this||p},rotateY:function(u){Nv.makeRotationY(u);this.applyMatrix4(Nv);return this||p},rotateZ:function(u){Nv.makeRotationZ(u);this.applyMatrix4(Nv);return this||p},translate:function(u,z,t){Nv.makeTranslation(u,z,t);this.applyMatrix4(Nv);return this||p},scale:function(u,z,t){Nv.makeScale(u,z,t);this.applyMatrix4(Nv);return this||p},lookAt:function(u){YX.lookAt(u);YX.updateMatrix();this.applyMatrix4(YX.matrix);return this||p},center:function(){this.computeBoundingBox();
(this||p).boundingBox.getCenter(mF).negate();this.translate(mF.x,mF.y,mF.z);return this||p},setFromObject:function(u){var z=u.geometry;if(u.isPoints||u.isLine){u=new V(3*z.vertices.length,3);var t=new V(3*z.colors.length,3);this.setAttribute("position",u.copyVector3sArray(z.vertices));this.setAttribute("color",t.copyColorsArray(z.colors));z.lineDistances&&z.lineDistances.length===z.vertices.length&&(u=new V(z.lineDistances.length,1),this.setAttribute("lineDistance",u.copyArray(z.lineDistances)));
null!==z.boundingSphere&&((this||p).boundingSphere=z.boundingSphere.clone());null!==z.boundingBox&&((this||p).boundingBox=z.boundingBox.clone())}else u.isMesh&&z&&z.isGeometry&&this.fromGeometry(z);return this||p},setFromPoints:function(u){for(var z=[],t=0,x=u.length;t<x;t++){var C=u[t];z.push(C.x,C.y,C.z||0)}this.setAttribute("position",new V(z,3));return this||p},updateFromObject:function(u){var z=u.geometry;if(u.isMesh){var t=z.__directGeometry;!0===z.elementsNeedUpdate&&(t=void 0,z.elementsNeedUpdate=
!1);if(void 0===t)return this.fromGeometry(z);t.verticesNeedUpdate=z.verticesNeedUpdate;t.normalsNeedUpdate=z.normalsNeedUpdate;t.colorsNeedUpdate=z.colorsNeedUpdate;t.uvsNeedUpdate=z.uvsNeedUpdate;t.groupsNeedUpdate=z.groupsNeedUpdate;z.verticesNeedUpdate=!1;z.normalsNeedUpdate=!1;z.colorsNeedUpdate=!1;z.uvsNeedUpdate=!1;z.groupsNeedUpdate=!1;z=t}!0===z.verticesNeedUpdate&&(t=(this||p).attributes.position,void 0!==t&&(t.copyVector3sArray(z.vertices),t.needsUpdate=!0),z.verticesNeedUpdate=!1);!0===
z.normalsNeedUpdate&&(t=(this||p).attributes.normal,void 0!==t&&(t.copyVector3sArray(z.normals),t.needsUpdate=!0),z.normalsNeedUpdate=!1);!0===z.colorsNeedUpdate&&(t=(this||p).attributes.color,void 0!==t&&(t.copyColorsArray(z.colors),t.needsUpdate=!0),z.colorsNeedUpdate=!1);z.uvsNeedUpdate&&(t=(this||p).attributes.uv,void 0!==t&&(t.copyVector2sArray(z.uvs),t.needsUpdate=!0),z.uvsNeedUpdate=!1);z.lineDistancesNeedUpdate&&(t=(this||p).attributes.lineDistance,void 0!==t&&(t.copyArray(z.lineDistances),
t.needsUpdate=!0),z.lineDistancesNeedUpdate=!1);z.groupsNeedUpdate&&(z.computeGroups(u.geometry),(this||p).groups=z.groups,z.groupsNeedUpdate=!1);return this||p},fromGeometry:function(u){u.__directGeometry=(new qva).fromGeometry(u);return this.fromDirectGeometry(u.__directGeometry)},fromDirectGeometry:function(u){var z=new Float32Array(3*u.vertices.length);this.setAttribute("position",(new S(z,3)).copyVector3sArray(u.vertices));0<u.normals.length&&(z=new Float32Array(3*u.normals.length),this.setAttribute("normal",
(new S(z,3)).copyVector3sArray(u.normals)));0<u.colors.length&&(z=new Float32Array(3*u.colors.length),this.setAttribute("color",(new S(z,3)).copyColorsArray(u.colors)));0<u.uvs.length&&(z=new Float32Array(2*u.uvs.length),this.setAttribute("uv",(new S(z,2)).copyVector2sArray(u.uvs)));0<u.uvs2.length&&(z=new Float32Array(2*u.uvs2.length),this.setAttribute("uv2",(new S(z,2)).copyVector2sArray(u.uvs2)));(this||p).groups=u.groups;for(var t in u.morphTargets){z=[];for(var x=u.morphTargets[t],C=0,H=x.length;C<
H;C++){var N=x[C],T=new V(3*N.data.length,3);T.name=N.name;z.push(T.copyVector3sArray(N.data))}(this||p).morphAttributes[t]=z}0<u.skinIndices.length&&(t=new V(4*u.skinIndices.length,4),this.setAttribute("skinIndex",t.copyVector4sArray(u.skinIndices)));0<u.skinWeights.length&&(t=new V(4*u.skinWeights.length,4),this.setAttribute("skinWeight",t.copyVector4sArray(u.skinWeights)));null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());null!==u.boundingBox&&((this||p).boundingBox=
u.boundingBox.clone());return this||p},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Mv);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this||p),(this||p).boundingBox.set(new wc(-Infinity,-Infinity,-Infinity),new wc(Infinity,Infinity,Infinity));else{if(void 0!==
u){if((this||p).boundingBox.setFromBufferAttribute(u),z){u=0;for(var t=z.length;u<t;u++)$q.setFromBufferAttribute(z[u]),(this||p).morphTargetsRelative?(Wn.addVectors((this||p).boundingBox.min,$q.min),(this||p).boundingBox.expandByPoint(Wn),Wn.addVectors((this||p).boundingBox.max,$q.max),(this||p).boundingBox.expandByPoint(Wn)):((this||p).boundingBox.expandByPoint($q.min),(this||p).boundingBox.expandByPoint($q.max))}}else(this||p).boundingBox.makeEmpty();(isNaN((this||p).boundingBox.min.x)||isNaN((this||
p).boundingBox.min.y)||isNaN((this||p).boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this||p)}},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new qx);var u=(this||p).attributes.position,z=(this||p).morphAttributes.position;if(u&&u.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this||p),(this||p).boundingSphere.set(new wc,Infinity);else if(u){var t=(this||p).boundingSphere.center;$q.setFromBufferAttribute(u);if(z)for(var x=0,C=z.length;x<C;x++)XI.setFromBufferAttribute(z[x]),(this||p).morphTargetsRelative?(Wn.addVectors($q.min,XI.min),$q.expandByPoint(Wn),Wn.addVectors($q.max,XI.max),$q.expandByPoint(Wn)):($q.expandByPoint(XI.min),$q.expandByPoint(XI.max));$q.getCenter(t);C=x=0;for(var H=u.count;C<H;C++)Wn.fromBufferAttribute(u,C),x=Math.max(x,t.distanceToSquared(Wn));if(z)for(C=
0,H=z.length;C<H;C++)for(var N=z[C],T=(this||p).morphTargetsRelative,W=0,Y=N.count;W<Y;W++)Wn.fromBufferAttribute(N,W),T&&(mF.fromBufferAttribute(u,W),Wn.add(mF)),x=Math.max(x,t.distanceToSquared(Wn));(this||p).boundingSphere.radius=Math.sqrt(x);isNaN((this||p).boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this||p)}},computeFaceNormals:function(){},computeVertexNormals:function(){var u=
(this||p).index,z=this.getAttribute("position");if(void 0!==z){var t=this.getAttribute("normal");if(void 0===t)t=new S(new Float32Array(3*z.count),3),this.setAttribute("normal",t);else for(var x=0,C=t.count;x<C;x++)t.setXYZ(x,0,0,0);x=new wc;C=new wc;var H=new wc,N=new wc,T=new wc,W=new wc,Y=new wc,ea=new wc;if(u)for(var sa=0,Aa=u.count;sa<Aa;sa+=3){var Xa=u.getX(sa+0),Va=u.getX(sa+1),vb=u.getX(sa+2);x.fromBufferAttribute(z,Xa);C.fromBufferAttribute(z,Va);H.fromBufferAttribute(z,vb);Y.subVectors(H,
C);ea.subVectors(x,C);Y.cross(ea);N.fromBufferAttribute(t,Xa);T.fromBufferAttribute(t,Va);W.fromBufferAttribute(t,vb);N.add(Y);T.add(Y);W.add(Y);t.setXYZ(Xa,N.x,N.y,N.z);t.setXYZ(Va,T.x,T.y,T.z);t.setXYZ(vb,W.x,W.y,W.z)}else for(u=0,N=z.count;u<N;u+=3)x.fromBufferAttribute(z,u+0),C.fromBufferAttribute(z,u+1),H.fromBufferAttribute(z,u+2),Y.subVectors(H,C),ea.subVectors(x,C),Y.cross(ea),t.setXYZ(u+0,Y.x,Y.y,Y.z),t.setXYZ(u+1,Y.x,Y.y,Y.z),t.setXYZ(u+2,Y.x,Y.y,Y.z);this.normalizeNormals();t.needsUpdate=
!0}},merge:function(u,z){if(u&&u.isBufferGeometry){void 0===z&&(z=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var t=(this||p).attributes,x;for(x in t)if(void 0!==u.attributes[x]){var C=t[x].array,H=u.attributes[x],N=H.array,T=H.itemSize*z;H=Math.min(N.length,C.length-T);for(var W=0;W<H;W++,T++)C[T]=N[W]}return this||p}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
u)},normalizeNormals:function(){for(var u=(this||p).attributes.normal,z=0,t=u.count;z<t;z++)Wn.fromBufferAttribute(u,z),Wn.normalize(),u.setXYZ(z,Wn.x,Wn.y,Wn.z)},toNonIndexed:function(){function u(ea,sa){var Aa=ea.array,Xa=ea.itemSize;ea=ea.normalized;for(var Va=new Aa.constructor(sa.length*Xa),vb,sb=0,ad=0,Bc=sa.length;ad<Bc;ad++){vb=sa[ad]*Xa;for(var rd=0;rd<Xa;rd++)Va[sb++]=Aa[vb++]}return new S(Va,Xa,ea)}if(null===(this||p).index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this||p;var z=new ya,t=(this||p).index.array,x=(this||p).attributes;for(N in x){var C=u(x[N],t);z.setAttribute(N,C)}x=(this||p).morphAttributes;for(var H in x){var N=[];C=x[H];for(var T=0,W=C.length;T<W;T++){var Y=u(C[T],t);N.push(Y)}z.morphAttributes[H]=N}z.morphTargetsRelative=(this||p).morphTargetsRelative;t=(this||p).groups;H=0;for(x=t.length;H<x;H++)N=t[H],z.addGroup(N.start,N.count,N.materialIndex);return z},toJSON:function(){var u={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};
u.uuid=(this||p).uuid;u.type=(this||p).type;""!==(this||p).name&&(u.name=(this||p).name);0<Object.keys((this||p).userData).length&&(u.userData=(this||p).userData);if(void 0!==(this||p).parameters){var z=(this||p).parameters;for(t in z)void 0!==z[t]&&(u[t]=z[t]);return u}u.data={attributes:{}};var t=(this||p).index;null!==t&&(u.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});t=(this||p).attributes;for(var x in t){var C=t[x],H=C.toJSON(u.data);""!==C.name&&(H.name=
C.name);u.data.attributes[x]=H}x={};t=!1;for(z in(this||p).morphAttributes){C=(this||p).morphAttributes[z];H=[];for(var N=0,T=C.length;N<T;N++){var W=C[N],Y=W.toJSON(u.data);""!==W.name&&(Y.name=W.name);H.push(Y)}0<H.length&&(x[z]=H,t=!0)}t&&(u.data.morphAttributes=x,u.data.morphTargetsRelative=(this||p).morphTargetsRelative);z=(this||p).groups;0<z.length&&(u.data.groups=JSON.parse(JSON.stringify(z)));z=(this||p).boundingSphere;null!==z&&(u.data.boundingSphere={center:z.center.toArray(),radius:z.radius});
return u},clone:function(){return(new ya).copy(this||p)},copy:function(u){(this||p).index=null;(this||p).attributes={};(this||p).morphAttributes={};(this||p).groups=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;var z={};(this||p).name=u.name;var t=u.index;null!==t&&this.setIndex(t.clone(z));t=u.attributes;for(var x in t)this.setAttribute(x,t[x].clone(z));x=u.morphAttributes;for(var C in x){t=[];for(var H=x[C],N=0,T=H.length;N<T;N++)t.push(H[N].clone(z));(this||p).morphAttributes[C]=
t}(this||p).morphTargetsRelative=u.morphTargetsRelative;z=u.groups;C=0;for(x=z.length;C<x;C++)t=z[C],this.addGroup(t.start,t.count,t.materialIndex);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).drawRange.start=u.drawRange.start;(this||p).drawRange.count=u.drawRange.count;(this||p).userData=u.userData;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Yca=new uj,oC=new dF,ZX=new qx,
xz=new wc,yz=new wc,zz=new wc,dX=new wc,eX=new wc,fX=new wc,DO=new wc,EO=new wc,FO=new wc,PE=new cf,QE=new cf,RE=new cf,xI=new wc,CO=new wc;jb.prototype=Object.assign(Object.create(E.prototype),{constructor:jb,isMesh:!0,copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.morphTargetInfluences&&((this||p).morphTargetInfluences=u.morphTargetInfluences.slice());void 0!==u.morphTargetDictionary&&((this||p).morphTargetDictionary=Object.assign({},u.morphTargetDictionary));(this||p).material=u.material;
(this||p).geometry=u.geometry;return this||p},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(u,z){var t=(this||p).geometry,x=(this||p).material,C=(this||p).matrixWorld;if(void 0!==x&&(null===t.boundingSphere&&t.computeBoundingSphere(),ZX.copy(t.boundingSphere),ZX.applyMatrix4(C),!1!==u.ray.intersectsSphere(ZX)&&(Yca.getInverse(C),oC.copy(u.ray).applyMatrix4(Yca),null===t.boundingBox||!1!==oC.intersectsBox(t.boundingBox))))if(t.isBufferGeometry){var H=t.index,N=t.attributes.position;C=t.morphAttributes.position;var T=t.morphTargetsRelative,W=t.attributes.uv,Y=t.attributes.uv2,
ea=t.groups,sa=t.drawRange;if(null!==H)if(Array.isArray(x))for(var Aa=0,Xa=ea.length;Aa<Xa;Aa++)for(var Va=ea[Aa],vb=x[Va.materialIndex],sb=Math.max(Va.start,sa.start),ad=Math.min(Va.start+Va.count,sa.start+sa.count);sb<ad;sb+=3){t=H.getX(sb);var Bc=H.getX(sb+1),rd=H.getX(sb+2);if(t=ka(this||p,vb,u,oC,N,C,T,W,Y,t,Bc,rd))t.faceIndex=Math.floor(sb/3),t.face.materialIndex=Va.materialIndex,z.push(t)}else for(ea=Math.max(0,sa.start),sa=Math.min(H.count,sa.start+sa.count);ea<sa;ea+=3){if(t=H.getX(ea),Aa=
H.getX(ea+1),Xa=H.getX(ea+2),t=ka(this||p,x,u,oC,N,C,T,W,Y,t,Aa,Xa))t.faceIndex=Math.floor(ea/3),z.push(t)}else if(void 0!==N)if(Array.isArray(x))for(H=0,Aa=ea.length;H<Aa;H++)for(Xa=ea[H],Va=x[Xa.materialIndex],vb=Math.max(Xa.start,sa.start),sb=Math.min(Xa.start+Xa.count,sa.start+sa.count);vb<sb;vb+=3){if(t=ka(this||p,Va,u,oC,N,C,T,W,Y,vb,vb+1,vb+2))t.faceIndex=Math.floor(vb/3),t.face.materialIndex=Xa.materialIndex,z.push(t)}else for(ea=Math.max(0,sa.start),sa=Math.min(N.count,sa.start+sa.count);ea<
sa;ea+=3)if(t=ka(this||p,x,u,oC,N,C,T,W,Y,ea,ea+1,ea+2))t.faceIndex=Math.floor(ea/3),z.push(t)}else if(t.isGeometry)for(C=Array.isArray(x),T=t.vertices,W=t.faces,t=t.faceVertexUvs[0],0<t.length&&(N=t),Y=0,sa=W.length;Y<sa;Y++)if(ea=W[Y],t=C?x[ea.materialIndex]:x,void 0!==t&&(H=T[ea.a],Aa=T[ea.b],Xa=T[ea.c],t=gb(this||p,t,u,oC,H,Aa,Xa,xI)))N&&N[Y]&&(Va=N[Y],PE.copy(Va[0]),QE.copy(Va[1]),RE.copy(Va[2]),t.uv=Et.getUV(xI,H,Aa,Xa,PE,QE,RE,new cf)),t.face=ea,t.faceIndex=Y,z.push(t)}});var zI=function(u){function z(t,
x,C,H,N,T){function W(ad,Bc,rd,Jc,vd,Vc,Md,de,Id,Ld,Le){var qf=Vc/Id,zg=Md/Ld,Pf=Vc/2,kg=Md/2,Bh=de/2;Md=Id+1;for(var bh=Ld+1,$i=Vc=0,Nh=new wc,jk=0;jk<bh;jk++)for(var Jk=jk*zg-kg,Ql=0;Ql<Md;Ql++)Nh[ad]=(Ql*qf-Pf)*Jc,Nh[Bc]=Jk*vd,Nh[rd]=Bh,Aa.push(Nh.x,Nh.y,Nh.z),Nh[ad]=0,Nh[Bc]=0,Nh[rd]=0<de?1:-1,Xa.push(Nh.x,Nh.y,Nh.z),Va.push(Ql/Id),Va.push(1-jk/Ld),Vc+=1;for(ad=0;ad<Ld;ad++)for(Bc=0;Bc<Id;Bc++)rd=vb+Bc+Md*(ad+1),Jc=vb+(Bc+1)+Md*(ad+1),vd=vb+(Bc+1)+Md*ad,sa.push(vb+Bc+Md*ad,rd,vd),sa.push(rd,Jc,
vd),$i+=6;ea.addGroup(sb,$i,Le);sb+=$i;vb+=Vc}void 0===t&&(t=1);void 0===x&&(x=1);void 0===C&&(C=1);void 0===H&&(H=1);void 0===N&&(N=1);void 0===T&&(T=1);var Y=u.call(this||p)||this||p;Y.type="BoxBufferGeometry";Y.parameters={width:t,height:x,depth:C,widthSegments:H,heightSegments:N,depthSegments:T};var ea=l(Y);H=Math.floor(H);N=Math.floor(N);T=Math.floor(T);var sa=[],Aa=[],Xa=[],Va=[],vb=0,sb=0;W("z","y","x",-1,-1,C,x,t,T,N,0);W("z","y","x",1,-1,C,x,-t,T,N,1);W("x","z","y",1,1,t,C,x,H,T,2);W("x",
"z","y",1,-1,t,C,-x,H,T,3);W("x","y","z",1,-1,t,x,C,H,N,4);W("x","y","z",-1,-1,t,x,-C,H,N,5);Y.setIndex(sa);Y.setAttribute("position",new V(Aa,3));Y.setAttribute("normal",new V(Xa,3));Y.setAttribute("uv",new V(Va,2));return Y}g(z,u);return z}(ya),mca={clone:ia,merge:qa};La.prototype=Object.create(M.prototype);La.prototype.constructor=La;La.prototype.isShaderMaterial=!0;La.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).fragmentShader=u.fragmentShader;(this||p).vertexShader=u.vertexShader;
(this||p).uniforms=ia(u.uniforms);(this||p).defines=Object.assign({},u.defines);(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).lights=u.lights;(this||p).clipping=u.clipping;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).extensions=Object.assign({},u.extensions);(this||p).glslVersion=u.glslVersion;return this||p};La.prototype.toJSON=function(u){var z=M.prototype.toJSON.call(this||p,u);
z.glslVersion=(this||p).glslVersion;z.uniforms={};for(var t in(this||p).uniforms){var x=(this||p).uniforms[t].value;z.uniforms[t]=x&&x.isTexture?{type:"t",value:x.toJSON(u).uuid}:x&&x.isColor?{type:"c",value:x.getHex()}:x&&x.isVector2?{type:"v2",value:x.toArray()}:x&&x.isVector3?{type:"v3",value:x.toArray()}:x&&x.isVector4?{type:"v4",value:x.toArray()}:x&&x.isMatrix3?{type:"m3",value:x.toArray()}:x&&x.isMatrix4?{type:"m4",value:x.toArray()}:{value:x}}0<Object.keys((this||p).defines).length&&(z.defines=
(this||p).defines);z.vertexShader=(this||p).vertexShader;z.fragmentShader=(this||p).fragmentShader;u={};for(var C in(this||p).extensions)!0===(this||p).extensions[C]&&(u[C]=!0);0<Object.keys(u).length&&(z.extensions=u);return z};Lb.prototype=Object.assign(Object.create(E.prototype),{constructor:Lb,isCamera:!0,copy:function(u,z){E.prototype.copy.call(this||p,u,z);(this||p).matrixWorldInverse.copy(u.matrixWorldInverse);(this||p).projectionMatrix.copy(u.projectionMatrix);(this||p).projectionMatrixInverse.copy(u.projectionMatrixInverse);
return this||p},getWorldDirection:function(u){void 0===u&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),u=new wc);this.updateMatrixWorld(!0);var z=(this||p).matrixWorld.elements;return u.set(-z[8],-z[9],-z[10]).normalize()},updateMatrixWorld:function(u){E.prototype.updateMatrixWorld.call(this||p,u);(this||p).matrixWorldInverse.getInverse((this||p).matrixWorld)},updateWorldMatrix:function(u,z){E.prototype.updateWorldMatrix.call(this||p,u,z);(this||p).matrixWorldInverse.getInverse((this||
p).matrixWorld)},clone:function(){return(new (this||p).constructor).copy(this||p)}});qc.prototype=Object.assign(Object.create(Lb.prototype),{constructor:qc,isPerspectiveCamera:!0,copy:function(u,z){Lb.prototype.copy.call(this||p,u,z);(this||p).fov=u.fov;(this||p).zoom=u.zoom;(this||p).near=u.near;(this||p).far=u.far;(this||p).focus=u.focus;(this||p).aspect=u.aspect;(this||p).view=null===u.view?null:Object.assign({},u.view);(this||p).filmGauge=u.filmGauge;(this||p).filmOffset=u.filmOffset;return this||
p},setFocalLength:function(u){u=.5*this.getFilmHeight()/u;(this||p).fov=2*ti.RAD2DEG*Math.atan(u);this.updateProjectionMatrix()},getFocalLength:function(){var u=Math.tan(.5*ti.DEG2RAD*(this||p).fov);return.5*this.getFilmHeight()/u},getEffectiveFOV:function(){return 2*ti.RAD2DEG*Math.atan(Math.tan(.5*ti.DEG2RAD*(this||p).fov)/(this||p).zoom)},getFilmWidth:function(){return(this||p).filmGauge*Math.min((this||p).aspect,1)},getFilmHeight:function(){return(this||p).filmGauge/Math.max((this||p).aspect,
1)},setViewOffset:function(u,z,t,x,C,H){(this||p).aspect=u/z;null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=H;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=
(this||p).near,z=u*Math.tan(.5*ti.DEG2RAD*(this||p).fov)/(this||p).zoom,t=2*z,x=(this||p).aspect*t,C=-.5*x,H=(this||p).view;if(null!==(this||p).view&&(this||p).view.enabled){var N=H.fullWidth,T=H.fullHeight;C+=H.offsetX*x/N;z-=H.offsetY*t/T;x*=H.width/N;t*=H.height/T}H=(this||p).filmOffset;0!==H&&(C+=u*H/this.getFilmWidth());(this||p).projectionMatrix.makePerspective(C,C+x,z,z-t,u,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||
p,u);u.object.fov=(this||p).fov;u.object.zoom=(this||p).zoom;u.object.near=(this||p).near;u.object.far=(this||p).far;u.object.focus=(this||p).focus;u.object.aspect=(this||p).aspect;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));u.object.filmGauge=(this||p).filmGauge;u.object.filmOffset=(this||p).filmOffset;return u}});dc.prototype=Object.create(E.prototype);dc.prototype.constructor=dc;oc.prototype=Object.create(r.prototype);oc.prototype.constructor=oc;oc.prototype.isCubeTexture=
!0;Object.defineProperty(oc.prototype,"images",{get:function(){return(this||p).image},set:function(u){(this||p).image=u}});$c.prototype=Object.create(v.prototype);$c.prototype.constructor=$c;$c.prototype.isWebGLCubeRenderTarget=!0;$c.prototype.fromEquirectangularTexture=function(u,z){(this||p).texture.type=z.type;(this||p).texture.format=1023;(this||p).texture.encoding=z.encoding;(this||p).texture.generateMipmaps=z.generateMipmaps;(this||p).texture.minFilter=z.minFilter;(this||p).texture.magFilter=
z.magFilter;var t=new zI(5,5,5),x=new La({name:"CubemapFromEquirect",uniforms:ia({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",
side:1,blending:0});x.uniforms.tEquirect.value=z;t=new jb(t,x);x=z.minFilter;1008===z.minFilter&&(z.minFilter=1006);(new dc(1,10,this||p)).update(u,t);z.minFilter=x;t.geometry.dispose();t.material.dispose();return this||p};Vb.prototype=Object.create(r.prototype);Vb.prototype.constructor=Vb;Vb.prototype.isDataTexture=!0;var nF=new qx,vP=new wc,AI=function(){function u(t,x,C,H,N,T){(this||p).planes=[void 0!==t?t:new Gv,void 0!==x?x:new Gv,void 0!==C?C:new Gv,void 0!==H?H:new Gv,void 0!==N?N:new Gv,
void 0!==T?T:new Gv]}var z=u.prototype;z.set=function(t,x,C,H,N,T){var W=(this||p).planes;W[0].copy(t);W[1].copy(x);W[2].copy(C);W[3].copy(H);W[4].copy(N);W[5].copy(T);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){for(var x=(this||p).planes,C=0;6>C;C++)x[C].copy(t.planes[C]);return this||p};z.setFromProjectionMatrix=function(t){var x=(this||p).planes,C=t.elements;t=C[0];var H=C[1],N=C[2],T=C[3],W=C[4],Y=C[5],ea=C[6],sa=C[7],Aa=C[8],Xa=C[9],
Va=C[10],vb=C[11],sb=C[12],ad=C[13],Bc=C[14];C=C[15];x[0].setComponents(T-t,sa-W,vb-Aa,C-sb).normalize();x[1].setComponents(T+t,sa+W,vb+Aa,C+sb).normalize();x[2].setComponents(T+H,sa+Y,vb+Xa,C+ad).normalize();x[3].setComponents(T-H,sa-Y,vb-Xa,C-ad).normalize();x[4].setComponents(T-N,sa-ea,vb-Va,C-Bc).normalize();x[5].setComponents(T+N,sa+ea,vb+Va,C+Bc).normalize();return this||p};z.intersectsObject=function(t){var x=t.geometry;null===x.boundingSphere&&x.computeBoundingSphere();nF.copy(x.boundingSphere).applyMatrix4(t.matrixWorld);
return this.intersectsSphere(nF)};z.intersectsSprite=function(t){nF.center.set(0,0,0);nF.radius=.7071067811865476;nF.applyMatrix4(t.matrixWorld);return this.intersectsSphere(nF)};z.intersectsSphere=function(t){var x=(this||p).planes,C=t.center;t=-t.radius;for(var H=0;6>H;H++)if(x[H].distanceToPoint(C)<t)return!1;return!0};z.intersectsBox=function(t){for(var x=(this||p).planes,C=0;6>C;C++){var H=x[C];vP.x=0<H.normal.x?t.max.x:t.min.x;vP.y=0<H.normal.y?t.max.y:t.min.y;vP.z=0<H.normal.z?t.max.z:t.min.z;
if(0>H.distanceToPoint(vP))return!1}return!0};z.containsPoint=function(t){for(var x=(this||p).planes,C=0;6>C;C++)if(0>x[C].distanceToPoint(t))return!1;return!0};return u}(),GO=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="PlaneBufferGeometry";N.parameters={width:t,height:x,widthSegments:C,heightSegments:H};t=t||1;x=x||1;var T=t/2,W=x/2;C=Math.floor(C)||1;H=Math.floor(H)||1;var Y=C+1,ea=H+1,sa=t/C,Aa=x/H;x=[];t=[];for(var Xa=[],Va=[],vb=0;vb<ea;vb++)for(var sb=vb*Aa-W,ad=0;ad<
Y;ad++)t.push(ad*sa-T,-sb,0),Xa.push(0,0,1),Va.push(ad/C),Va.push(1-vb/H);for(T=0;T<H;T++)for(W=0;W<C;W++)ea=W+Y*(T+1),sa=W+1+Y*(T+1),Aa=W+1+Y*T,x.push(W+Y*T,ea,Aa),x.push(ea,sa,Aa);N.setIndex(x);N.setAttribute("position",new V(t,3));N.setAttribute("normal",new V(Xa,3));N.setAttribute("uv",new V(Va,2));return N}g(z,u);return z}(ya),vj={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
vg={common:{diffuse:{value:new Hg(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new tp},uv2Transform:{value:new tp},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new cf(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new Hg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],
properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],
properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Hg(15658734)},opacity:{value:1},
size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new tp}},sprite:{diffuse:{value:new Hg(15658734)},opacity:{value:1},center:{value:new cf(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new tp}}},Ft={basic:{uniforms:qa([vg.common,vg.specularmap,vg.envmap,vg.aomap,vg.lightmap,vg.fog]),vertexShader:vj.meshbasic_vert,fragmentShader:vj.meshbasic_frag},lambert:{uniforms:qa([vg.common,vg.specularmap,vg.envmap,vg.aomap,vg.lightmap,
vg.emissivemap,vg.fog,vg.lights,{emissive:{value:new Hg(0)}}]),vertexShader:vj.meshlambert_vert,fragmentShader:vj.meshlambert_frag},phong:{uniforms:qa([vg.common,vg.specularmap,vg.envmap,vg.aomap,vg.lightmap,vg.emissivemap,vg.bumpmap,vg.normalmap,vg.displacementmap,vg.fog,vg.lights,{emissive:{value:new Hg(0)},specular:{value:new Hg(1118481)},shininess:{value:30}}]),vertexShader:vj.meshphong_vert,fragmentShader:vj.meshphong_frag},standard:{uniforms:qa([vg.common,vg.envmap,vg.aomap,vg.lightmap,vg.emissivemap,
vg.bumpmap,vg.normalmap,vg.displacementmap,vg.roughnessmap,vg.metalnessmap,vg.fog,vg.lights,{emissive:{value:new Hg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vj.meshphysical_vert,fragmentShader:vj.meshphysical_frag},toon:{uniforms:qa([vg.common,vg.aomap,vg.lightmap,vg.emissivemap,vg.bumpmap,vg.normalmap,vg.displacementmap,vg.gradientmap,vg.fog,vg.lights,{emissive:{value:new Hg(0)}}]),vertexShader:vj.meshtoon_vert,fragmentShader:vj.meshtoon_frag},matcap:{uniforms:qa([vg.common,
vg.bumpmap,vg.normalmap,vg.displacementmap,vg.fog,{matcap:{value:null}}]),vertexShader:vj.meshmatcap_vert,fragmentShader:vj.meshmatcap_frag},points:{uniforms:qa([vg.points,vg.fog]),vertexShader:vj.points_vert,fragmentShader:vj.points_frag},dashed:{uniforms:qa([vg.common,vg.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vj.linedashed_vert,fragmentShader:vj.linedashed_frag},depth:{uniforms:qa([vg.common,vg.displacementmap]),vertexShader:vj.depth_vert,fragmentShader:vj.depth_frag},
normal:{uniforms:qa([vg.common,vg.bumpmap,vg.normalmap,vg.displacementmap,{opacity:{value:1}}]),vertexShader:vj.normal_vert,fragmentShader:vj.normal_frag},sprite:{uniforms:qa([vg.sprite,vg.fog]),vertexShader:vj.sprite_vert,fragmentShader:vj.sprite_frag},background:{uniforms:{uvTransform:{value:new tp},t2D:{value:null}},vertexShader:vj.background_vert,fragmentShader:vj.background_frag},cube:{uniforms:qa([vg.envmap,{opacity:{value:1}}]),vertexShader:vj.cube_vert,fragmentShader:vj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:vj.equirect_vert,fragmentShader:vj.equirect_frag},distanceRGBA:{uniforms:qa([vg.common,vg.displacementmap,{referencePosition:{value:new wc},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:vj.distanceRGBA_vert,fragmentShader:vj.distanceRGBA_frag},shadow:{uniforms:qa([vg.lights,vg.fog,{color:{value:new Hg(0)},opacity:{value:1}}]),vertexShader:vj.shadow_vert,fragmentShader:vj.shadow_frag}};Ft.physical={uniforms:qa([Ft.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new cf(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Hg(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:vj.meshphysical_vert,fragmentShader:vj.meshphysical_frag};Cj.prototype=Object.create(r.prototype);Cj.prototype.constructor=Cj;Cj.prototype.isDataTexture2DArray=!0;Tj.prototype=Object.create(r.prototype);Tj.prototype.constructor=Tj;Tj.prototype.isDataTexture3D=!0;var ica=new r,
Tua=new Cj,Uua=new Tj,jca=new oc,dca=[],eca=[],hca=new Float32Array(16),gca=new Float32Array(9),fca=new Float32Array(4);OM.prototype.updateCache=function(u){var z=(this||p).cache;u instanceof Float32Array&&z.length!==u.length&&((this||p).cache=new Float32Array(u.length));Kh(z,u)};UM.prototype.setValue=function(u,z,t){for(var x=(this||p).seq,C=0,H=x.length;C!==H;++C){var N=x[C];N.setValue(u,z[N.id],t)}};var gX=/([\w\d_]+)(\])?(\[|\.)?/g;sv.prototype.setValue=function(u,z,t,x){z=(this||p).map[z];void 0!==
z&&z.setValue(u,t,x)};sv.prototype.setOptional=function(u,z,t){z=z[t];void 0!==z&&this.setValue(u,t,z)};sv.upload=function(u,z,t,x){for(var C=0,H=z.length;C!==H;++C){var N=z[C],T=t[N.id];!1!==T.needsUpdate&&N.setValue(u,T.value,x)}};sv.seqWithValue=function(u,z){for(var t=[],x=0,C=u.length;x!==C;++x){var H=u[x];H.id in z&&t.push(H)}return t};var Vua=0,hX=/^[ \t]*#include +<([\w\d./]+)>/gm,lca=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,kca=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,
Wua=0;Az.prototype=Object.create(M.prototype);Az.prototype.constructor=Az;Az.prototype.isMeshDepthMaterial=!0;Az.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).depthPacking=u.depthPacking;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||
p).wireframeLinewidth=u.wireframeLinewidth;return this||p};Bz.prototype=Object.create(M.prototype);Bz.prototype.constructor=Bz;Bz.prototype.isMeshDistanceMaterial=!0;Bz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).referencePosition.copy(u.referencePosition);(this||p).nearDistance=u.nearDistance;(this||p).farDistance=u.farDistance;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).displacementMap=
u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;return this||p};HO.prototype=Object.assign(Object.create(qc.prototype),{constructor:HO,isArrayCamera:!0});Cz.prototype=Object.assign(Object.create(E.prototype),{constructor:Cz,isGroup:!0});Object.assign(BI.prototype,{constructor:BI,getHandSpace:function(){if(null===(this||p)._hand&&((this||p)._hand=new Cz,(this||p)._hand.matrixAutoUpdate=!1,(this||p)._hand.visible=!1,(this||p)._hand.joints=
[],(this||p)._hand.inputState={pinching:!1},window.XRHand))for(var u=0;u<=window.XRHand.LITTLE_PHALANX_TIP;u++){var z=new Cz;z.matrixAutoUpdate=!1;z.visible=!1;(this||p)._hand.joints.push(z);(this||p)._hand.add(z)}return(this||p)._hand},getTargetRaySpace:function(){null===(this||p)._targetRay&&((this||p)._targetRay=new Cz,(this||p)._targetRay.matrixAutoUpdate=!1,(this||p)._targetRay.visible=!1);return(this||p)._targetRay},getGripSpace:function(){null===(this||p)._grip&&((this||p)._grip=new Cz,(this||
p)._grip.matrixAutoUpdate=!1,(this||p)._grip.visible=!1);return(this||p)._grip},dispatchEvent:function(u){null!==(this||p)._targetRay&&(this||p)._targetRay.dispatchEvent(u);null!==(this||p)._grip&&(this||p)._grip.dispatchEvent(u);null!==(this||p)._hand&&(this||p)._hand.dispatchEvent(u);return this||p},disconnect:function(u){this.dispatchEvent({type:"disconnected",data:u});null!==(this||p)._targetRay&&((this||p)._targetRay.visible=!1);null!==(this||p)._grip&&((this||p)._grip.visible=!1);null!==(this||
p)._hand&&((this||p)._hand.visible=!1);return this||p},update:function(u,z,t){var x=null,C=null,H=null,N=(this||p)._targetRay,T=(this||p)._grip,W=(this||p)._hand;if(u)if(W&&u.hand){H=!0;for(var Y=0;Y<=window.XRHand.LITTLE_PHALANX_TIP;Y++)if(u.hand[Y]){var ea=z.getJointPose(u.hand[Y],t),sa=W.joints[Y];null!==ea&&(sa.matrix.fromArray(ea.transform.matrix),sa.matrix.decompose(sa.position,sa.rotation,sa.scale),sa.jointRadius=ea.radius);sa.visible=null!==ea;ea=W.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(W.joints[window.XRHand.THUMB_PHALANX_TIP].position);
W.inputState.pinching&&.025<ea?(W.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:u.handedness,target:this||p})):!W.inputState.pinching&&.015>=ea&&(W.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:u.handedness,target:this||p}))}}else null!==N&&(x=z.getPose(u.targetRaySpace,t),null!==x&&(N.matrix.fromArray(x.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale))),null!==T&&u.gripSpace&&(C=z.getPose(u.gripSpace,t),null!==C&&(T.matrix.fromArray(C.transform.matrix),
T.matrix.decompose(T.position,T.rotation,T.scale)));null!==N&&(N.visible=null!==x);null!==T&&(T.visible=null!==C);null!==W&&(W.visible=null!==H);return this||p}});Object.assign(qca.prototype,d.prototype);lX.prototype=Object.assign(Object.create(CI.prototype),{constructor:lX,isWebGL1Renderer:!0});var Zca=function(){function u(t,x){Object.defineProperty(this||p,"isFogExp2",{value:!0});(this||p).name="";(this||p).color=new Hg(t);(this||p).density=void 0!==x?x:2.5E-4}var z=u.prototype;z.clone=function(){return new u((this||
p).color,(this||p).density)};z.toJSON=function(){return{type:"FogExp2",color:(this||p).color.getHex(),density:(this||p).density}};return u}(),$ca=function(){function u(t,x,C){Object.defineProperty(this||p,"isFog",{value:!0});(this||p).name="";(this||p).color=new Hg(t);(this||p).near=void 0!==x?x:1;(this||p).far=void 0!==C?C:1E3}var z=u.prototype;z.clone=function(){return new u((this||p).color,(this||p).near,(this||p).far)};z.toJSON=function(){return{type:"Fog",color:(this||p).color.getHex(),near:(this||
p).near,far:(this||p).far}};return u}(),$X=function(u){function z(){var x=u.call(this||p)||this||p;Object.defineProperty(l(x),"isScene",{value:!0});x.type="Scene";x.background=null;x.environment=null;x.fog=null;x.overrideMaterial=null;x.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:l(x)}));return x}g(z,u);var t=z.prototype;t.copy=function(x,C){u.prototype.copy.call(this||p,x,C);null!==x.background&&((this||p).background=x.background.clone());
null!==x.environment&&((this||p).environment=x.environment.clone());null!==x.fog&&((this||p).fog=x.fog.clone());null!==x.overrideMaterial&&((this||p).overrideMaterial=x.overrideMaterial.clone());(this||p).autoUpdate=x.autoUpdate;(this||p).matrixAutoUpdate=x.matrixAutoUpdate;return this||p};t.toJSON=function(x){var C=u.prototype.toJSON.call(this||p,x);null!==(this||p).background&&(C.object.background=(this||p).background.toJSON(x));null!==(this||p).environment&&(C.object.environment=(this||p).environment.toJSON(x));
null!==(this||p).fog&&(C.object.fog=(this||p).fog.toJSON());return C};return z}(E);Object.defineProperty(Xq.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(Xq.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(u){(this||p).usage=u;return this||p},copy:function(u){(this||p).array=new u.array.constructor(u.array);(this||p).count=u.count;(this||p).stride=u.stride;(this||p).usage=u.usage;return this||p},copyAt:function(u,z,t){u*=(this||
p).stride;t*=z.stride;for(var x=0,C=(this||p).stride;x<C;x++)(this||p).array[u+x]=z.array[t+x];return this||p},set:function(u,z){void 0===z&&(z=0);(this||p).array.set(u,z);return this||p},clone:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=ti.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=(this||p).array.slice(0).buffer);u=new (this||p).array.constructor(u.arrayBuffers[(this||
p).array.buffer._uuid]);u=new Xq(u,(this||p).stride);u.setUsage((this||p).usage);return u},onUpload:function(u){(this||p).onUploadCallback=u;return this||p},toJSON:function(u){void 0===u.arrayBuffers&&(u.arrayBuffers={});void 0===(this||p).array.buffer._uuid&&((this||p).array.buffer._uuid=ti.generateUUID());void 0===u.arrayBuffers[(this||p).array.buffer._uuid]&&(u.arrayBuffers[(this||p).array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array((this||p).array.buffer)));return{uuid:(this||p).uuid,
buffer:(this||p).array.buffer._uuid,type:(this||p).array.constructor.name,stride:(this||p).stride}}});var pC=new wc;Object.defineProperties(Gz.prototype,{count:{get:function(){return(this||p).data.count}},array:{get:function(){return(this||p).data.array}},needsUpdate:{set:function(u){(this||p).data.needsUpdate=u}}});Object.assign(Gz.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(u){for(var z=0,t=(this||p).data.count;z<t;z++)pC.x=this.getX(z),pC.y=this.getY(z),pC.z=this.getZ(z),pC.applyMatrix4(u),
this.setXYZ(z,pC.x,pC.y,pC.z);return this||p},setX:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset]=z;return this||p},setY:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]=z;return this||p},setZ:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]=z;return this||p},setW:function(u,z){(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]=z;return this||p},getX:function(u){return(this||p).data.array[u*(this||
p).data.stride+(this||p).offset]},getY:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+1]},getZ:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+2]},getW:function(u){return(this||p).data.array[u*(this||p).data.stride+(this||p).offset+3]},setXY:function(u,z,t){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;return this||p},setXYZ:function(u,z,t,x){u=u*(this||p).data.stride+(this||p).offset;
(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;return this||p},setXYZW:function(u,z,t,x,C){u=u*(this||p).data.stride+(this||p).offset;(this||p).data.array[u+0]=z;(this||p).data.array[u+1]=t;(this||p).data.array[u+2]=x;(this||p).data.array[u+3]=C;return this||p},clone:function(u){if(void 0===u){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=
z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return new S(new (this||p).array.constructor(u),(this||p).itemSize,(this||p).normalized)}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.clone(u));return new Gz(u.interleavedBuffers[(this||p).data.uuid],(this||p).itemSize,(this||p).offset,(this||p).normalized)},toJSON:function(u){if(void 0===
u){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");u=[];for(var z=0;z<(this||p).count;z++)for(var t=z*(this||p).data.stride+(this||p).offset,x=0;x<(this||p).itemSize;x++)u.push((this||p).data.array[t+x]);return{itemSize:(this||p).itemSize,type:(this||p).array.constructor.name,array:u,normalized:(this||p).normalized}}void 0===u.interleavedBuffers&&(u.interleavedBuffers={});void 0===u.interleavedBuffers[(this||p).data.uuid]&&
(u.interleavedBuffers[(this||p).data.uuid]=(this||p).data.toJSON(u));return{isInterleavedBufferAttribute:!0,itemSize:(this||p).itemSize,data:(this||p).data.uuid,offset:(this||p).offset,normalized:(this||p).normalized}}});Hz.prototype=Object.create(M.prototype);Hz.prototype.constructor=Hz;Hz.prototype.isSpriteMaterial=!0;Hz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;(this||p).rotation=u.rotation;(this||
p).sizeAttenuation=u.sizeAttenuation;return this||p};var TE,YI=new wc,oF=new wc,pF=new wc,UE=new cf,FI=new cf,vca=new uj,wP=new wc,ZI=new wc,xP=new wc,ada=new cf,aY=new cf,bda=new cf;EI.prototype=Object.assign(Object.create(E.prototype),{constructor:EI,isSprite:!0,raycast:function(u,z){null===u.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');oF.setFromMatrixScale((this||p).matrixWorld);vca.copy(u.camera.matrixWorld);(this||p).modelViewMatrix.multiplyMatrices(u.camera.matrixWorldInverse,
(this||p).matrixWorld);pF.setFromMatrixPosition((this||p).modelViewMatrix);u.camera.isPerspectiveCamera&&!1===(this||p).material.sizeAttenuation&&oF.multiplyScalar(-pF.z);var t=(this||p).material.rotation;if(0!==t){var x=Math.cos(t);var C=Math.sin(t)}t=(this||p).center;KO(wP.set(-.5,-.5,0),pF,t,oF,C,x);KO(ZI.set(.5,-.5,0),pF,t,oF,C,x);KO(xP.set(.5,.5,0),pF,t,oF,C,x);ada.set(0,0);aY.set(1,0);bda.set(1,1);var H=u.ray.intersectTriangle(wP,ZI,xP,!1,YI);if(null===H&&(KO(ZI.set(-.5,.5,0),pF,t,oF,C,x),aY.set(0,
1),H=u.ray.intersectTriangle(wP,xP,ZI,!1,YI),null===H))return;C=u.ray.origin.distanceTo(YI);C<u.near||C>u.far||z.push({distance:C,point:YI.clone(),uv:Et.getUV(YI,wP,ZI,xP,ada,aY,bda,new cf),face:null,object:this||p})},copy:function(u){E.prototype.copy.call(this||p,u);void 0!==u.center&&(this||p).center.copy(u.center);(this||p).material=u.material;return this||p}});var yP=new wc,cda=new wc;GI.prototype=Object.assign(Object.create(E.prototype),{constructor:GI,isLOD:!0,copy:function(u){E.prototype.copy.call(this||
p,u,!1);for(var z=u.levels,t=0,x=z.length;t<x;t++){var C=z[t];this.addLevel(C.object.clone(),C.distance)}(this||p).autoUpdate=u.autoUpdate;return this||p},addLevel:function(u,z){void 0===z&&(z=0);z=Math.abs(z);var t=(this||p).levels,x;for(x=0;x<t.length&&!(z<t[x].distance);x++);t.splice(x,0,{distance:z,object:u});this.add(u);return this||p},getCurrentLevel:function(){return(this||p)._currentLevel},getObjectForDistance:function(u){var z=(this||p).levels;if(0<z.length){var t;var x=1;for(t=z.length;x<
t&&!(u<z[x].distance);x++);return z[x-1].object}return null},raycast:function(u,z){if(0<(this||p).levels.length){yP.setFromMatrixPosition((this||p).matrixWorld);var t=u.ray.origin.distanceTo(yP);this.getObjectForDistance(t).raycast(u,z)}},update:function(u){var z=(this||p).levels;if(1<z.length){yP.setFromMatrixPosition(u.matrixWorld);cda.setFromMatrixPosition((this||p).matrixWorld);u=yP.distanceTo(cda)/u.zoom;z[0].object.visible=!0;var t;var x=1;for(t=z.length;x<t;x++)if(u>=z[x].distance)z[x-1].object.visible=
!1,z[x].object.visible=!0;else break;for((this||p)._currentLevel=x-1;x<t;x++)z[x].object.visible=!1}},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);!1===(this||p).autoUpdate&&(u.object.autoUpdate=!1);u.object.levels=[];for(var z=(this||p).levels,t=0,x=z.length;t<x;t++){var C=z[t];u.object.levels.push({object:C.object.uuid,distance:C.distance})}return u}});LO.prototype=Object.assign(Object.create(jb.prototype),{constructor:LO,isSkinnedMesh:!0,copy:function(u){jb.prototype.copy.call(this||
p,u);(this||p).bindMode=u.bindMode;(this||p).bindMatrix.copy(u.bindMatrix);(this||p).bindMatrixInverse.copy(u.bindMatrixInverse);(this||p).skeleton=u.skeleton;return this||p},bind:function(u,z){(this||p).skeleton=u;void 0===z&&(this.updateMatrixWorld(!0),(this||p).skeleton.calculateInverses(),z=(this||p).matrixWorld);(this||p).bindMatrix.copy(z);(this||p).bindMatrixInverse.getInverse(z)},pose:function(){(this||p).skeleton.pose()},normalizeSkinWeights:function(){for(var u=new $k,z=(this||p).geometry.attributes.skinWeight,
t=0,x=z.count;t<x;t++){u.x=z.getX(t);u.y=z.getY(t);u.z=z.getZ(t);u.w=z.getW(t);var C=1/u.manhattanLength();Infinity!==C?u.multiplyScalar(C):u.set(1,0,0,0);z.setXYZW(t,u.x,u.y,u.z,u.w)}},updateMatrixWorld:function(u){jb.prototype.updateMatrixWorld.call(this||p,u);"attached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).matrixWorld):"detached"===(this||p).bindMode?(this||p).bindMatrixInverse.getInverse((this||p).bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+
(this||p).bindMode)},boneTransform:function(){var u=new wc,z=new $k,t=new $k,x=new wc,C=new uj;return function(H,N){var T=(this||p).skeleton,W=(this||p).geometry;z.fromBufferAttribute(W.attributes.skinIndex,H);t.fromBufferAttribute(W.attributes.skinWeight,H);u.fromBufferAttribute(W.attributes.position,H).applyMatrix4((this||p).bindMatrix);N.set(0,0,0);for(H=0;4>H;H++)if(W=t.getComponent(H),0!==W){var Y=z.getComponent(H);C.multiplyMatrices(T.bones[Y].matrixWorld,T.boneInverses[Y]);N.addScaledVector(x.copy(u).applyMatrix4(C),
W)}return N.applyMatrix4((this||p).bindMatrixInverse)}}()});var dda=new uj,rva=new uj;Object.assign(MO.prototype,{calculateInverses:function(){(this||p).boneInverses=[];for(var u=0,z=(this||p).bones.length;u<z;u++){var t=new uj;(this||p).bones[u]&&t.getInverse((this||p).bones[u].matrixWorld);(this||p).boneInverses.push(t)}},pose:function(){for(var u=0,z=(this||p).bones.length;u<z;u++){var t=(this||p).bones[u];t&&t.matrixWorld.getInverse((this||p).boneInverses[u])}u=0;for(z=(this||p).bones.length;u<
z;u++)if(t=(this||p).bones[u])t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale)},update:function(){for(var u=(this||p).bones,z=(this||p).boneInverses,t=(this||p).boneMatrices,x=(this||p).boneTexture,C=0,H=u.length;C<H;C++)dda.multiplyMatrices(u[C]?u[C].matrixWorld:rva,z[C]),dda.toArray(t,16*C);void 0!==x&&(x.needsUpdate=!0)},clone:function(){return new MO((this||p).bones,
(this||p).boneInverses)},getBoneByName:function(u){for(var z=0,t=(this||p).bones.length;z<t;z++){var x=(this||p).bones[z];if(x.name===u)return x}},dispose:function(){(this||p).boneTexture&&((this||p).boneTexture.dispose(),(this||p).boneTexture=void 0)}});mX.prototype=Object.assign(Object.create(E.prototype),{constructor:mX,isBone:!0});var eda=new uj,fda=new uj,zP=[],$I=new jb;NO.prototype=Object.assign(Object.create(jb.prototype),{constructor:NO,isInstancedMesh:!0,copy:function(u){jb.prototype.copy.call(this||
p,u);(this||p).instanceMatrix.copy(u.instanceMatrix);(this||p).count=u.count;return this||p},setColorAt:function(u,z){null===(this||p).instanceColor&&((this||p).instanceColor=new S(new Float32Array(3*(this||p).count),3));z.toArray((this||p).instanceColor.array,3*u)},getMatrixAt:function(u,z){z.fromArray((this||p).instanceMatrix.array,16*u)},raycast:function(u,z){var t=(this||p).matrixWorld,x=(this||p).count;$I.geometry=(this||p).geometry;$I.material=(this||p).material;if(void 0!==$I.material)for(var C=
0;C<x;C++){this.getMatrixAt(C,eda);fda.multiplyMatrices(t,eda);$I.matrixWorld=fda;$I.raycast(u,zP);for(var H=0,N=zP.length;H<N;H++){var T=zP[H];T.instanceId=C;T.object=this||p;z.push(T)}zP.length=0}},setMatrixAt:function(u,z){z.toArray((this||p).instanceMatrix.array,16*u)},updateMorphTargets:function(){}});Sl.prototype=Object.create(M.prototype);Sl.prototype.constructor=Sl;Sl.prototype.isLineBasicMaterial=!0;Sl.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);
(this||p).linewidth=u.linewidth;(this||p).linecap=u.linecap;(this||p).linejoin=u.linejoin;(this||p).morphTargets=u.morphTargets;return this||p};var gda=new wc,hda=new wc,ida=new uj,AP=new dF,aJ=new qx;ns.prototype=Object.assign(Object.create(E.prototype),{constructor:ns,isLine:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=
u.attributes.position,t=[0],x=1,C=z.count;x<C;x++)gda.fromBufferAttribute(z,x-1),hda.fromBufferAttribute(z,x),t[x]=t[x-1],t[x]+=gda.distanceTo(hda);u.setAttribute("lineDistance",new V(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,u[0]=0,t=1,x=z.length;t<x;t++)u[t]=u[t-1],u[t]+=z[t-1].distanceTo(z[t]);return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||
p).matrixWorld,C=u.params.Line.threshold;null===t.boundingSphere&&t.computeBoundingSphere();aJ.copy(t.boundingSphere);aJ.applyMatrix4(x);aJ.radius+=C;if(!1!==u.ray.intersectsSphere(aJ)){ida.getInverse(x);AP.copy(u.ray).applyMatrix4(ida);x=C/(((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3);x*=x;var H=new wc,N=new wc;C=new wc;var T=new wc,W=(this||p).isLineSegments?2:1;if(t.isBufferGeometry){var Y=t.index;t=t.attributes.position;if(null!==Y){Y=Y.array;for(var ea=0,sa=Y.length-1;ea<sa;ea+=
W){var Aa=Y[ea+1];H.fromBufferAttribute(t,Y[ea]);N.fromBufferAttribute(t,Aa);AP.distanceSqToSegment(H,N,T,C)>x||(T.applyMatrix4((this||p).matrixWorld),Aa=u.ray.origin.distanceTo(T),Aa<u.near||Aa>u.far||z.push({distance:Aa,point:C.clone().applyMatrix4((this||p).matrixWorld),index:ea,face:null,faceIndex:null,object:this||p}))}}else for(Y=0,ea=t.count-1;Y<ea;Y+=W)H.fromBufferAttribute(t,Y),N.fromBufferAttribute(t,Y+1),AP.distanceSqToSegment(H,N,T,C)>x||(T.applyMatrix4((this||p).matrixWorld),sa=u.ray.origin.distanceTo(T),
sa<u.near||sa>u.far||z.push({distance:sa,point:C.clone().applyMatrix4((this||p).matrixWorld),index:Y,face:null,faceIndex:null,object:this||p}))}else if(t.isGeometry)for(H=t.vertices,N=H.length,t=0;t<N-1;t+=W)AP.distanceSqToSegment(H[t],H[t+1],T,C)>x||(T.applyMatrix4((this||p).matrixWorld),Y=u.ray.origin.distanceTo(T),Y<u.near||Y>u.far||z.push({distance:Y,point:C.clone().applyMatrix4((this||p).matrixWorld),index:t,face:null,faceIndex:null,object:this||p}))}},updateMorphTargets:function(){var u=(this||
p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});var BP=new wc,
CP=new wc;up.prototype=Object.assign(Object.create(ns.prototype),{constructor:up,isLineSegments:!0,computeLineDistances:function(){var u=(this||p).geometry;if(u.isBufferGeometry)if(null===u.index){for(var z=u.attributes.position,t=[],x=0,C=z.count;x<C;x+=2)BP.fromBufferAttribute(z,x),CP.fromBufferAttribute(z,x+1),t[x]=0===x?0:t[x-1],t[x+1]=t[x]+BP.distanceTo(CP);u.setAttribute("lineDistance",new V(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(u.isGeometry)for(z=u.vertices,u=u.lineDistances,t=0,x=z.length;t<x;t+=2)BP.copy(z[t]),CP.copy(z[t+1]),u[t]=0===t?0:u[t-1],u[t+1]=u[t]+BP.distanceTo(CP);return this||p}});OO.prototype=Object.assign(Object.create(ns.prototype),{constructor:OO,isLineLoop:!0});Ht.prototype=Object.create(M.prototype);Ht.prototype.constructor=Ht;Ht.prototype.isPointsMaterial=!0;Ht.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).alphaMap=u.alphaMap;
(this||p).size=u.size;(this||p).sizeAttenuation=u.sizeAttenuation;(this||p).morphTargets=u.morphTargets;return this||p};var jda=new uj,oX=new dF,bJ=new qx,DP=new wc;VE.prototype=Object.assign(Object.create(E.prototype),{constructor:VE,isPoints:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).material=u.material;(this||p).geometry=u.geometry;return this||p},raycast:function(u,z){var t=(this||p).geometry,x=(this||p).matrixWorld,C=u.params.Points.threshold;null===t.boundingSphere&&t.computeBoundingSphere();
bJ.copy(t.boundingSphere);bJ.applyMatrix4(x);bJ.radius+=C;if(!1!==u.ray.intersectsSphere(bJ))if(jda.getInverse(x),oX.copy(u.ray).applyMatrix4(jda),C/=((this||p).scale.x+(this||p).scale.y+(this||p).scale.z)/3,C*=C,t.isBufferGeometry){var H=t.index;t=t.attributes.position;if(null!==H){H=H.array;for(var N=0,T=H.length;N<T;N++){var W=H[N];DP.fromBufferAttribute(t,W);nX(DP,W,C,x,u,z,this||p)}}else for(H=0,N=t.count;H<N;H++)DP.fromBufferAttribute(t,H),nX(DP,H,C,x,u,z,this||p)}else for(t=t.vertices,H=0,
N=t.length;H<N;H++)nX(t[H],H,C,x,u,z,this||p)},updateMorphTargets:function(){var u=(this||p).geometry;if(u.isBufferGeometry){u=u.morphAttributes;var z=Object.keys(u);if(0<z.length&&(u=u[z[0]],void 0!==u)){(this||p).morphTargetInfluences=[];(this||p).morphTargetDictionary={};z=0;for(var t=u.length;z<t;z++){var x=u[z].name||String(z);(this||p).morphTargetInfluences.push(0);(this||p).morphTargetDictionary[x]=z}}}else u=u.morphTargets,void 0!==u&&0<u.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
pX.prototype=Object.assign(Object.create(r.prototype),{constructor:pX,isVideoTexture:!0,update:function(){var u=(this||p).image;!1==="requestVideoFrameCallback"in u&&u.readyState>=u.HAVE_CURRENT_DATA&&((this||p).needsUpdate=!0)}});WE.prototype=Object.create(r.prototype);WE.prototype.constructor=WE;WE.prototype.isCompressedTexture=!0;HI.prototype=Object.create(r.prototype);HI.prototype.constructor=HI;HI.prototype.isCanvasTexture=!0;II.prototype=Object.create(r.prototype);II.prototype.constructor=II;
II.prototype.isDepthTexture=!0;var ava=0,Ov=new uj,bY=new E,EP=new wc;al.prototype=Object.assign(Object.create(d.prototype),{constructor:al,isGeometry:!0,applyMatrix4:function(u){for(var z=(new tp).getNormalMatrix(u),t=0,x=(this||p).vertices.length;t<x;t++)(this||p).vertices[t].applyMatrix4(u);u=0;for(t=(this||p).faces.length;u<t;u++){x=(this||p).faces[u];x.normal.applyMatrix3(z).normalize();for(var C=0,H=x.vertexNormals.length;C<H;C++)x.vertexNormals[C].applyMatrix3(z).normalize()}null!==(this||
p).boundingBox&&this.computeBoundingBox();null!==(this||p).boundingSphere&&this.computeBoundingSphere();(this||p).verticesNeedUpdate=!0;(this||p).normalsNeedUpdate=!0;return this||p},rotateX:function(u){Ov.makeRotationX(u);this.applyMatrix4(Ov);return this||p},rotateY:function(u){Ov.makeRotationY(u);this.applyMatrix4(Ov);return this||p},rotateZ:function(u){Ov.makeRotationZ(u);this.applyMatrix4(Ov);return this||p},translate:function(u,z,t){Ov.makeTranslation(u,z,t);this.applyMatrix4(Ov);return this||
p},scale:function(u,z,t){Ov.makeScale(u,z,t);this.applyMatrix4(Ov);return this||p},lookAt:function(u){bY.lookAt(u);bY.updateMatrix();this.applyMatrix4(bY.matrix);return this||p},fromBufferGeometry:function(u){function z(Xa,Va,vb,sb){var ad=void 0===T?[]:[t.colors[Xa].clone(),t.colors[Va].clone(),t.colors[vb].clone()],Bc=void 0===N?[]:[(new wc).fromBufferAttribute(N,Xa),(new wc).fromBufferAttribute(N,Va),(new wc).fromBufferAttribute(N,vb)];sb=new yI(Xa,Va,vb,Bc,ad,sb);t.faces.push(sb);void 0!==W&&
t.faceVertexUvs[0].push([(new cf).fromBufferAttribute(W,Xa),(new cf).fromBufferAttribute(W,Va),(new cf).fromBufferAttribute(W,vb)]);void 0!==Y&&t.faceVertexUvs[1].push([(new cf).fromBufferAttribute(Y,Xa),(new cf).fromBufferAttribute(Y,Va),(new cf).fromBufferAttribute(Y,vb)])}var t=this||p,x=null!==u.index?u.index:void 0,C=u.attributes;if(void 0===C.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this||p;var H=C.position,N=C.normal,
T=C.color,W=C.uv,Y=C.uv2;void 0!==Y&&((this||p).faceVertexUvs[1]=[]);for(C=0;C<H.count;C++)t.vertices.push((new wc).fromBufferAttribute(H,C)),void 0!==T&&t.colors.push((new Hg).fromBufferAttribute(T,C));C=u.groups;if(0<C.length)for(H=0;H<C.length;H++){var ea=C[H],sa=ea.start,Aa=sa;for(sa+=ea.count;Aa<sa;Aa+=3)void 0!==x?z(x.getX(Aa),x.getX(Aa+1),x.getX(Aa+2),ea.materialIndex):z(Aa,Aa+1,Aa+2,ea.materialIndex)}else if(void 0!==x)for(C=0;C<x.count;C+=3)z(x.getX(C),x.getX(C+1),x.getX(C+2));else for(x=
0;x<H.count;x+=3)z(x,x+1,x+2);this.computeFaceNormals();null!==u.boundingBox&&((this||p).boundingBox=u.boundingBox.clone());null!==u.boundingSphere&&((this||p).boundingSphere=u.boundingSphere.clone());return this||p},center:function(){this.computeBoundingBox();(this||p).boundingBox.getCenter(EP).negate();this.translate(EP.x,EP.y,EP.z);return this||p},normalize:function(){this.computeBoundingSphere();var u=(this||p).boundingSphere.center,z=(this||p).boundingSphere.radius;z=0===z?1:1/z;var t=new uj;
t.set(z,0,0,-z*u.x,0,z,0,-z*u.y,0,0,z,-z*u.z,0,0,0,1);this.applyMatrix4(t);return this||p},computeFaceNormals:function(){for(var u=new wc,z=new wc,t=0,x=(this||p).faces.length;t<x;t++){var C=(this||p).faces[t],H=(this||p).vertices[C.a],N=(this||p).vertices[C.b];u.subVectors((this||p).vertices[C.c],N);z.subVectors(H,N);u.cross(z);u.normalize();C.normal.copy(u)}},computeVertexNormals:function(u){void 0===u&&(u=!0);for(var z=Array((this||p).vertices.length),t=0,x=(this||p).vertices.length;t<x;t++)z[t]=
new wc;if(u){u=new wc;t=new wc;x=0;for(var C=(this||p).faces.length;x<C;x++){var H=(this||p).faces[x],N=(this||p).vertices[H.a],T=(this||p).vertices[H.b];u.subVectors((this||p).vertices[H.c],T);t.subVectors(N,T);u.cross(t);z[H.a].add(u);z[H.b].add(u);z[H.c].add(u)}}else for(this.computeFaceNormals(),u=0,t=(this||p).faces.length;u<t;u++)x=(this||p).faces[u],z[x.a].add(x.normal),z[x.b].add(x.normal),z[x.c].add(x.normal);u=0;for(t=(this||p).vertices.length;u<t;u++)z[u].normalize();u=0;for(t=(this||p).faces.length;u<
t;u++)x=(this||p).faces[u],C=x.vertexNormals,3===C.length?(C[0].copy(z[x.a]),C[1].copy(z[x.b]),C[2].copy(z[x.c])):(C[0]=z[x.a].clone(),C[1]=z[x.b].clone(),C[2]=z[x.c].clone());0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u],x=t.vertexNormals;3===x.length?(x[0].copy(t.normal),x[1].copy(t.normal),x[2].copy(t.normal)):(x[0]=t.normal.clone(),x[1]=t.normal.clone(),
x[2]=t.normal.clone())}0<(this||p).faces.length&&((this||p).normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var u=0,z=(this||p).faces.length;u<z;u++){var t=(this||p).faces[u];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone();t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(var x=0,C=t.vertexNormals.length;x<C;x++)t.__originalVertexNormals[x]?t.__originalVertexNormals[x].copy(t.vertexNormals[x]):t.__originalVertexNormals[x]=
t.vertexNormals[x].clone()}u=new al;u.faces=(this||p).faces;z=0;for(t=(this||p).morphTargets.length;z<t;z++){if(!(this||p).morphNormals[z]){(this||p).morphNormals[z]={};(this||p).morphNormals[z].faceNormals=[];(this||p).morphNormals[z].vertexNormals=[];x=(this||p).morphNormals[z].faceNormals;C=(this||p).morphNormals[z].vertexNormals;for(var H=0,N=(this||p).faces.length;H<N;H++){var T=new wc,W={a:new wc,b:new wc,c:new wc};x.push(T);C.push(W)}}x=(this||p).morphNormals[z];u.vertices=(this||p).morphTargets[z].vertices;
u.computeFaceNormals();u.computeVertexNormals();C=0;for(H=(this||p).faces.length;C<H;C++)N=(this||p).faces[C],T=x.vertexNormals[C],x.faceNormals[C].copy(N.normal),T.a.copy(N.vertexNormals[0]),T.b.copy(N.vertexNormals[1]),T.c.copy(N.vertexNormals[2])}u=0;for(z=(this||p).faces.length;u<z;u++)t=(this||p).faces[u],t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals},computeBoundingBox:function(){null===(this||p).boundingBox&&((this||p).boundingBox=new Mv);(this||p).boundingBox.setFromPoints((this||
p).vertices)},computeBoundingSphere:function(){null===(this||p).boundingSphere&&((this||p).boundingSphere=new qx);(this||p).boundingSphere.setFromPoints((this||p).vertices)},merge:function(u,z,t){if(u&&u.isGeometry){var x,C=(this||p).vertices.length,H=(this||p).vertices,N=u.vertices,T=(this||p).faces,W=u.faces,Y=(this||p).colors,ea=u.colors;void 0===t&&(t=0);void 0!==z&&(x=(new tp).getNormalMatrix(z));for(var sa=0,Aa=N.length;sa<Aa;sa++){var Xa=N[sa].clone();void 0!==z&&Xa.applyMatrix4(z);H.push(Xa)}z=
0;for(H=ea.length;z<H;z++)Y.push(ea[z].clone());Y=0;for(ea=W.length;Y<ea;Y++){z=W[Y];Aa=z.vertexNormals;H=z.vertexColors;N=new yI(z.a+C,z.b+C,z.c+C);N.normal.copy(z.normal);void 0!==x&&N.normal.applyMatrix3(x).normalize();Xa=0;for(var Va=Aa.length;Xa<Va;Xa++)sa=Aa[Xa].clone(),void 0!==x&&sa.applyMatrix3(x).normalize(),N.vertexNormals.push(sa);N.color.copy(z.color);Aa=0;for(Xa=H.length;Aa<Xa;Aa++)sa=H[Aa],N.vertexColors.push(sa.clone());N.materialIndex=z.materialIndex+t;T.push(N)}t=0;for(x=u.faceVertexUvs.length;t<
x;t++)for(C=u.faceVertexUvs[t],void 0===(this||p).faceVertexUvs[t]&&((this||p).faceVertexUvs[t]=[]),T=0,W=C.length;T<W;T++){Y=C[T];ea=[];z=0;for(H=Y.length;z<H;z++)ea.push(Y[z].clone());(this||p).faceVertexUvs[t].push(ea)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",u)},mergeMesh:function(u){u&&u.isMesh?(u.matrixAutoUpdate&&u.updateMatrix(),this.merge(u.geometry,u.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",
u)},mergeVertices:function(){for(var u={},z=[],t=[],x=Math.pow(10,4),C=0,H=(this||p).vertices.length;C<H;C++){var N=(this||p).vertices[C];N=Math.round(N.x*x)+"_"+Math.round(N.y*x)+"_"+Math.round(N.z*x);void 0===u[N]?(u[N]=C,z.push((this||p).vertices[C]),t[C]=z.length-1):t[C]=t[u[N]]}u=[];x=0;for(C=(this||p).faces.length;x<C;x++)for(H=(this||p).faces[x],H.a=t[H.a],H.b=t[H.b],H.c=t[H.c],H=[H.a,H.b,H.c],N=0;3>N;N++)if(H[N]===H[(N+1)%3]){u.push(x);break}for(t=u.length-1;0<=t;t--)for(x=u[t],(this||p).faces.splice(x,
1),C=0,H=(this||p).faceVertexUvs.length;C<H;C++)(this||p).faceVertexUvs[C].splice(x,1);t=(this||p).vertices.length-z.length;(this||p).vertices=z;return t},setFromPoints:function(u){(this||p).vertices=[];for(var z=0,t=u.length;z<t;z++){var x=u[z];(this||p).vertices.push(new wc(x.x,x.y,x.z||0))}return this||p},sortFacesByMaterialIndex:function(){for(var u=(this||p).faces,z=u.length,t=0;t<z;t++)u[t]._id=t;u.sort(function(W,Y){return W.materialIndex-Y.materialIndex});t=(this||p).faceVertexUvs[0];var x=
(this||p).faceVertexUvs[1],C,H;t&&t.length===z&&(C=[]);x&&x.length===z&&(H=[]);for(var N=0;N<z;N++){var T=u[N]._id;C&&C.push(t[T]);H&&H.push(x[T])}C&&((this||p).faceVertexUvs[0]=C);H&&((this||p).faceVertexUvs[1]=H)},toJSON:function(){function u(vd,Vc,Md){return Md?vd|1<<Vc:vd&~(1<<Vc)}function z(vd){var Vc=vd.x.toString()+vd.y.toString()+vd.z.toString();if(void 0!==Y[Vc])return Y[Vc];Y[Vc]=W.length/3;W.push(vd.x,vd.y,vd.z);return Y[Vc]}function t(vd){var Vc=vd.r.toString()+vd.g.toString()+vd.b.toString();
if(void 0!==sa[Vc])return sa[Vc];sa[Vc]=ea.length;ea.push(vd.getHex());return sa[Vc]}function x(vd){var Vc=vd.x.toString()+vd.y.toString();if(void 0!==Xa[Vc])return Xa[Vc];Xa[Vc]=Aa.length/2;Aa.push(vd.x,vd.y);return Xa[Vc]}var C={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};C.uuid=(this||p).uuid;C.type=(this||p).type;""!==(this||p).name&&(C.name=(this||p).name);if(void 0!==(this||p).parameters){var H=(this||p).parameters,N;for(N in H)void 0!==H[N]&&(C[N]=H[N]);return C}H=[];
for(N=0;N<(this||p).vertices.length;N++){var T=(this||p).vertices[N];H.push(T.x,T.y,T.z)}N=[];var W=[],Y={},ea=[],sa={},Aa=[],Xa={};for(T=0;T<(this||p).faces.length;T++){var Va=(this||p).faces[T],vb=void 0!==(this||p).faceVertexUvs[0][T],sb=0<Va.normal.length(),ad=0<Va.vertexNormals.length,Bc=1!==Va.color.r||1!==Va.color.g||1!==Va.color.b,rd=0<Va.vertexColors.length,Jc=0;Jc=u(Jc,0,0);Jc=u(Jc,1,!0);Jc=u(Jc,2,!1);Jc=u(Jc,3,vb);Jc=u(Jc,4,sb);Jc=u(Jc,5,ad);Jc=u(Jc,6,Bc);Jc=u(Jc,7,rd);N.push(Jc);N.push(Va.a,
Va.b,Va.c);N.push(Va.materialIndex);vb&&(vb=(this||p).faceVertexUvs[0][T],N.push(x(vb[0]),x(vb[1]),x(vb[2])));sb&&N.push(z(Va.normal));ad&&(sb=Va.vertexNormals,N.push(z(sb[0]),z(sb[1]),z(sb[2])));Bc&&N.push(t(Va.color));rd&&(Va=Va.vertexColors,N.push(t(Va[0]),t(Va[1]),t(Va[2])))}C.data={};C.data.vertices=H;C.data.normals=W;0<ea.length&&(C.data.colors=ea);0<Aa.length&&(C.data.uvs=[Aa]);C.data.faces=N;return C},clone:function(){return(new al).copy(this||p)},copy:function(u){(this||p).vertices=[];(this||
p).colors=[];(this||p).faces=[];(this||p).faceVertexUvs=[[]];(this||p).morphTargets=[];(this||p).morphNormals=[];(this||p).skinWeights=[];(this||p).skinIndices=[];(this||p).lineDistances=[];(this||p).boundingBox=null;(this||p).boundingSphere=null;(this||p).name=u.name;for(var z=u.vertices,t=0,x=z.length;t<x;t++)(this||p).vertices.push(z[t].clone());z=u.colors;t=0;for(x=z.length;t<x;t++)(this||p).colors.push(z[t].clone());z=u.faces;t=0;for(x=z.length;t<x;t++)(this||p).faces.push(z[t].clone());z=0;
for(t=u.faceVertexUvs.length;z<t;z++){x=u.faceVertexUvs[z];void 0===(this||p).faceVertexUvs[z]&&((this||p).faceVertexUvs[z]=[]);for(var C=0,H=x.length;C<H;C++){for(var N=x[C],T=[],W=0,Y=N.length;W<Y;W++)T.push(N[W].clone());(this||p).faceVertexUvs[z].push(T)}}z=u.morphTargets;t=0;for(x=z.length;t<x;t++){C={};C.name=z[t].name;if(void 0!==z[t].vertices)for(C.vertices=[],H=0,N=z[t].vertices.length;H<N;H++)C.vertices.push(z[t].vertices[H].clone());if(void 0!==z[t].normals)for(C.normals=[],H=0,N=z[t].normals.length;H<
N;H++)C.normals.push(z[t].normals[H].clone());(this||p).morphTargets.push(C)}z=u.morphNormals;t=0;for(x=z.length;t<x;t++){C={};if(void 0!==z[t].vertexNormals)for(C.vertexNormals=[],H=0,N=z[t].vertexNormals.length;H<N;H++)T=z[t].vertexNormals[H],W={},W.a=T.a.clone(),W.b=T.b.clone(),W.c=T.c.clone(),C.vertexNormals.push(W);if(void 0!==z[t].faceNormals)for(C.faceNormals=[],H=0,N=z[t].faceNormals.length;H<N;H++)C.faceNormals.push(z[t].faceNormals[H].clone());(this||p).morphNormals.push(C)}z=u.skinWeights;
t=0;for(x=z.length;t<x;t++)(this||p).skinWeights.push(z[t].clone());z=u.skinIndices;t=0;for(x=z.length;t<x;t++)(this||p).skinIndices.push(z[t].clone());z=u.lineDistances;t=0;for(x=z.length;t<x;t++)(this||p).lineDistances.push(z[t]);z=u.boundingBox;null!==z&&((this||p).boundingBox=z.clone());z=u.boundingSphere;null!==z&&((this||p).boundingSphere=z.clone());(this||p).elementsNeedUpdate=u.elementsNeedUpdate;(this||p).verticesNeedUpdate=u.verticesNeedUpdate;(this||p).uvsNeedUpdate=u.uvsNeedUpdate;(this||
p).normalsNeedUpdate=u.normalsNeedUpdate;(this||p).colorsNeedUpdate=u.colorsNeedUpdate;(this||p).lineDistancesNeedUpdate=u.lineDistancesNeedUpdate;(this||p).groupsNeedUpdate=u.groupsNeedUpdate;return this||p},dispose:function(){this.dispatchEvent({type:"dispose"})}});var cY=function(u){function z(t,x,C,H,N,T){var W=u.call(this||p)||this||p;W.type="BoxGeometry";W.parameters={width:t,height:x,depth:C,widthSegments:H,heightSegments:N,depthSegments:T};W.fromBufferGeometry(new zI(t,x,C,H,N,T));W.mergeVertices();
return W}g(z,u);return z}(al),dY=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="CircleBufferGeometry";N.parameters={radius:t,segments:x,thetaStart:C,thetaLength:H};t=t||1;x=void 0!==x?Math.max(3,x):8;C=void 0!==C?C:0;H=void 0!==H?H:2*Math.PI;var T=[],W=[],Y=[],ea=[],sa=new wc,Aa=new cf;W.push(0,0,0);Y.push(0,0,1);ea.push(.5,.5);for(var Xa=0,Va=3;Xa<=x;Xa++,Va+=3){var vb=C+Xa/x*H;sa.x=t*Math.cos(vb);sa.y=t*Math.sin(vb);W.push(sa.x,sa.y,sa.z);Y.push(0,0,1);Aa.x=(W[Va]/t+1)/2;
Aa.y=(W[Va+1]/t+1)/2;ea.push(Aa.x,Aa.y)}for(t=1;t<=x;t++)T.push(t,t+1,0);N.setIndex(T);N.setAttribute("position",new V(W,3));N.setAttribute("normal",new V(Y,3));N.setAttribute("uv",new V(ea,2));return N}g(z,u);return z}(ya),kda=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="CircleGeometry";N.parameters={radius:t,segments:x,thetaStart:C,thetaLength:H};N.fromBufferGeometry(new dY(t,x,C,H));N.mergeVertices();return N}g(z,u);return z}(al),cJ=function(u){function z(t,x,C,H,N,T,
W,Y){function ea(vd){for(var Vc=ad,Md=new cf,de=new wc,Id=0,Ld=!0===vd?t:x,Le=!0===vd?1:-1,qf=1;qf<=H;qf++)Va.push(0,rd*Le,0),vb.push(0,Le,0),sb.push(.5,.5),ad++;qf=ad;for(var zg=0;zg<=H;zg++){var Pf=zg/H*Y+W,kg=Math.cos(Pf);Pf=Math.sin(Pf);de.x=Ld*Pf;de.y=rd*Le;de.z=Ld*kg;Va.push(de.x,de.y,de.z);vb.push(0,Le,0);Md.x=.5*kg+.5;Md.y=.5*Pf*Le+.5;sb.push(Md.x,Md.y);ad++}for(Md=0;Md<H;Md++)de=Vc+Md,Ld=qf+Md,!0===vd?Xa.push(Ld,Ld+1,de):Xa.push(Ld+1,Ld,de),Id+=3;Aa.addGroup(Jc,Id,!0===vd?1:2);Jc+=Id}var sa=
u.call(this||p)||this||p;sa.type="CylinderBufferGeometry";sa.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:H,heightSegments:N,openEnded:T,thetaStart:W,thetaLength:Y};var Aa=l(sa);t=void 0!==t?t:1;x=void 0!==x?x:1;C=C||1;H=Math.floor(H)||8;N=Math.floor(N)||1;T=void 0!==T?T:!1;W=void 0!==W?W:0;Y=void 0!==Y?Y:2*Math.PI;var Xa=[],Va=[],vb=[],sb=[],ad=0,Bc=[],rd=C/2,Jc=0;(function(){for(var vd=new wc,Vc=new wc,Md=0,de=(x-t)/C,Id=0;Id<=N;Id++){for(var Ld=[],Le=Id/N,qf=Le*(x-t)+t,zg=0;zg<=
H;zg++){var Pf=zg/H,kg=Pf*Y+W,Bh=Math.sin(kg);kg=Math.cos(kg);Vc.x=qf*Bh;Vc.y=-Le*C+rd;Vc.z=qf*kg;Va.push(Vc.x,Vc.y,Vc.z);vd.set(Bh,de,kg).normalize();vb.push(vd.x,vd.y,vd.z);sb.push(Pf,1-Le);Ld.push(ad++)}Bc.push(Ld)}for(vd=0;vd<H;vd++)for(Vc=0;Vc<N;Vc++)de=Bc[Vc+1][vd],Id=Bc[Vc+1][vd+1],Ld=Bc[Vc][vd+1],Xa.push(Bc[Vc][vd],de,Ld),Xa.push(de,Id,Ld),Md+=6;Aa.addGroup(Jc,Md,0);Jc+=Md})();!1===T&&(0<t&&ea(!0),0<x&&ea(!1));sa.setIndex(Xa);sa.setAttribute("position",new V(Va,3));sa.setAttribute("normal",
new V(vb,3));sa.setAttribute("uv",new V(sb,2));return sa}g(z,u);return z}(ya),eY=function(u){function z(t,x,C,H,N,T,W,Y){var ea=u.call(this||p)||this||p;ea.type="CylinderGeometry";ea.parameters={radiusTop:t,radiusBottom:x,height:C,radialSegments:H,heightSegments:N,openEnded:T,thetaStart:W,thetaLength:Y};ea.fromBufferGeometry(new cJ(t,x,C,H,N,T,W,Y));ea.mergeVertices();return ea}g(z,u);return z}(al),lda=function(u){function z(t,x,C,H,N,T,W){var Y=u.call(this||p,0,t,x,C,H,N,T,W)||this||p;Y.type="ConeGeometry";
Y.parameters={radius:t,height:x,radialSegments:C,heightSegments:H,openEnded:N,thetaStart:T,thetaLength:W};return Y}g(z,u);return z}(eY),mda=function(u){function z(t,x,C,H,N,T,W){var Y=u.call(this||p,0,t,x,C,H,N,T,W)||this||p;Y.type="ConeBufferGeometry";Y.parameters={radius:t,height:x,radialSegments:C,heightSegments:H,openEnded:N,thetaStart:T,thetaLength:W};return Y}g(z,u);return z}(cJ),qC=function(u){function z(t,x,C,H){function N(Aa){ea.push(Aa.x,Aa.y,Aa.z)}function T(Aa,Xa){Aa*=3;Xa.x=t[Aa+0];Xa.y=
t[Aa+1];Xa.z=t[Aa+2]}function W(Aa,Xa,Va,vb){0>vb&&1===Aa.x&&(sa[Xa]=Aa.x-1);0===Va.x&&0===Va.z&&(sa[Xa]=vb/2/Math.PI+.5)}var Y=u.call(this||p)||this||p;Y.type="PolyhedronBufferGeometry";Y.parameters={vertices:t,indices:x,radius:C,detail:H};C=C||1;H=H||0;var ea=[],sa=[];(function(Aa){for(var Xa=new wc,Va=new wc,vb=new wc,sb=0;sb<x.length;sb+=3){T(x[sb+0],Xa);T(x[sb+1],Va);T(x[sb+2],vb);for(var ad=Xa,Bc=Va,rd=vb,Jc=Aa+1,vd=[],Vc=0;Vc<=Jc;Vc++){vd[Vc]=[];for(var Md=ad.clone().lerp(rd,Vc/Jc),de=Bc.clone().lerp(rd,
Vc/Jc),Id=Jc-Vc,Ld=0;Ld<=Id;Ld++)vd[Vc][Ld]=0===Ld&&Vc===Jc?Md:Md.clone().lerp(de,Ld/Id)}for(ad=0;ad<Jc;ad++)for(Bc=0;Bc<2*(Jc-ad)-1;Bc++)rd=Math.floor(Bc/2),0===Bc%2?(N(vd[ad][rd+1]),N(vd[ad+1][rd]),N(vd[ad][rd])):(N(vd[ad][rd+1]),N(vd[ad+1][rd+1]),N(vd[ad+1][rd]))}})(H);(function(Aa){for(var Xa=new wc,Va=0;Va<ea.length;Va+=3)Xa.x=ea[Va+0],Xa.y=ea[Va+1],Xa.z=ea[Va+2],Xa.normalize().multiplyScalar(Aa),ea[Va+0]=Xa.x,ea[Va+1]=Xa.y,ea[Va+2]=Xa.z})(C);(function(){for(var Aa=new wc,Xa=0;Xa<ea.length;Xa+=
3)Aa.x=ea[Xa+0],Aa.y=ea[Xa+1],Aa.z=ea[Xa+2],sa.push(Math.atan2(Aa.z,-Aa.x)/2/Math.PI+.5,1-(Math.atan2(-Aa.y,Math.sqrt(Aa.x*Aa.x+Aa.z*Aa.z))/Math.PI+.5));Aa=new wc;Xa=new wc;for(var Va=new wc,vb=new wc,sb=new cf,ad=new cf,Bc=new cf,rd=0,Jc=0;rd<ea.length;rd+=9,Jc+=6){Aa.set(ea[rd+0],ea[rd+1],ea[rd+2]);Xa.set(ea[rd+3],ea[rd+4],ea[rd+5]);Va.set(ea[rd+6],ea[rd+7],ea[rd+8]);sb.set(sa[Jc+0],sa[Jc+1]);ad.set(sa[Jc+2],sa[Jc+3]);Bc.set(sa[Jc+4],sa[Jc+5]);vb.copy(Aa).add(Xa).add(Va).divideScalar(3);var vd=
Math.atan2(vb.z,-vb.x);W(sb,Jc+0,Aa,vd);W(ad,Jc+2,Xa,vd);W(Bc,Jc+4,Va,vd)}for(Aa=0;Aa<sa.length;Aa+=6)Xa=sa[Aa+0],Va=sa[Aa+2],vb=sa[Aa+4],sb=Math.min(Xa,Va,vb),.9<Math.max(Xa,Va,vb)&&.1>sb&&(.2>Xa&&(sa[Aa+0]+=1),.2>Va&&(sa[Aa+2]+=1),.2>vb&&(sa[Aa+4]+=1))})();Y.setAttribute("position",new V(ea,3));Y.setAttribute("normal",new V(ea.slice(),3));Y.setAttribute("uv",new V(sa,2));0===H?Y.computeVertexNormals():Y.normalizeNormals();return Y}g(z,u);return z}(ya),fY=function(u){function z(t,x){var C=(1+Math.sqrt(5))/
2;var H=1/C;C=u.call(this||p,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-H,-C,0,-H,C,0,H,-C,0,H,C,-H,-C,0,-H,C,0,H,-C,0,H,C,0,-C,0,-H,C,0,-H,-C,0,H,C,0,H],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,x)||this||p;C.type="DodecahedronBufferGeometry";C.parameters=
{radius:t,detail:x};return C}g(z,u);return z}(qC),nda=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="DodecahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new fY(t,x));C.mergeVertices();return C}g(z,u);return z}(al),FP=new wc,GP=new wc,gY=new wc,qF=new Et,hY=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="EdgesGeometry";C.parameters={thresholdAngle:x};x=void 0!==x?x:1;t.isGeometry&&(t=(new ya).fromGeometry(t));var H=Math.pow(10,4),N=Math.cos(ti.DEG2RAD*
x),T=t.getIndex();t=t.getAttribute("position");var W=T?T.count:t.count,Y=[0,0,0],ea=["a","b","c"],sa=Array(3);x={};for(var Aa=[],Xa=0;Xa<W;Xa+=3){T?(Y[0]=T.getX(Xa),Y[1]=T.getX(Xa+1),Y[2]=T.getX(Xa+2)):(Y[0]=Xa,Y[1]=Xa+1,Y[2]=Xa+2);var Va=qF.a,vb=qF.b,sb=qF.c;Va.fromBufferAttribute(t,Y[0]);vb.fromBufferAttribute(t,Y[1]);sb.fromBufferAttribute(t,Y[2]);qF.getNormal(gY);sa[0]=Math.round(Va.x*H)+","+Math.round(Va.y*H)+","+Math.round(Va.z*H);sa[1]=Math.round(vb.x*H)+","+Math.round(vb.y*H)+","+Math.round(vb.z*
H);sa[2]=Math.round(sb.x*H)+","+Math.round(sb.y*H)+","+Math.round(sb.z*H);if(sa[0]!==sa[1]&&sa[1]!==sa[2]&&sa[2]!==sa[0])for(Va=0;3>Va;Va++){vb=(Va+1)%3;var ad=sa[Va],Bc=sa[vb];sb=qF[ea[Va]];var rd=qF[ea[vb]],Jc=ad+"_"+Bc;ad=Bc+"_"+ad;ad in x&&x[ad]?(gY.dot(x[ad].normal)<=N&&(Aa.push(sb.x,sb.y,sb.z),Aa.push(rd.x,rd.y,rd.z)),x[ad]=null):Jc in x||(x[Jc]={index0:Y[Va],index1:Y[vb],normal:gY.clone()})}}for(var vd in x)x[vd]&&(H=x[vd],N=H.index1,FP.fromBufferAttribute(t,H.index0),GP.fromBufferAttribute(t,
N),Aa.push(FP.x,FP.y,FP.z),Aa.push(GP.x,GP.y,GP.z));C.setAttribute("position",new V(Aa,3));return C}g(z,u);return z}(ya),sva={triangulate:function(u,z,t){t=t||2;var x=z&&z.length,C=x?z[0]*t:u.length,H=wca(u,0,C,t,!0),N=[];if(!H||H.next===H.prev)return N;var T;if(x){var W=t;x=[];var Y;var ea=0;for(Y=z.length;ea<Y;ea++){var sa=z[ea]*W;var Aa=ea<Y-1?z[ea+1]*W:u.length;sa=wca(u,sa,Aa,W,!1);sa===sa.next&&(sa.steiner=!0);x.push(eva(sa))}x.sort(cva);for(ea=0;ea<x.length;ea++){W=x[ea];z=H;if(z=dva(W,z))W=
zca(z,W),Iz(z,z.next),Iz(W,W.next);H=Iz(H,H.next)}}if(u.length>80*t){var Xa=T=u[0];var Va=x=u[1];for(W=t;W<C;W+=t)ea=u[W],z=u[W+1],ea<Xa&&(Xa=ea),z<Va&&(Va=z),ea>T&&(T=ea),z>x&&(x=z);T=Math.max(T-Xa,x-Va);T=0!==T?1/T:0}KI(H,N,t,Xa,Va,T);return N}},vx={area:function(u){for(var z=u.length,t=0,x=z-1,C=0;C<z;x=C++)t+=u[x].x*u[C].y-u[C].x*u[x].y;return.5*t},isClockWise:function(u){return 0>vx.area(u)},triangulateShape:function(u,z){var t=[],x=[],C=[];Aca(u);Bca(t,u);u=u.length;z.forEach(Aca);for(var H=
0;H<z.length;H++)x.push(u),u+=z[H].length,Bca(t,z[H]);z=sva.triangulate(t,x);for(t=0;t<z.length;t+=3)C.push(z.slice(t,t+3));return C}},dJ=function(u){function z(t,x){function C(sa){function Aa(Ge,qg,Oh){qg||console.error("THREE.ExtrudeGeometry: vec does not exist");return qg.clone().multiplyScalar(Oh).add(Ge)}function Xa(Ge,qg,Oh){var vh=Ge.x-qg.x;var Mj=Ge.y-qg.y;var wj=Oh.x-Ge.x;var Rl=Oh.y-Ge.y,Uk=vh*vh+Mj*Mj;if(Math.abs(vh*Rl-Mj*wj)>Number.EPSILON){var fq=Math.sqrt(Uk),lx=Math.sqrt(wj*wj+Rl*Rl);
Uk=qg.x-Mj/fq;qg=qg.y+vh/fq;Rl=((Oh.x-Rl/lx-Uk)*Rl-(Oh.y+wj/lx-qg)*wj)/(vh*Rl-Mj*wj);wj=Uk+vh*Rl-Ge.x;vh=qg+Mj*Rl-Ge.y;Mj=wj*wj+vh*vh;if(2>=Mj)return new cf(wj,vh);Mj=Math.sqrt(Mj/2)}else Ge=!1,vh>Number.EPSILON?wj>Number.EPSILON&&(Ge=!0):vh<-Number.EPSILON?wj<-Number.EPSILON&&(Ge=!0):Math.sign(Mj)===Math.sign(Rl)&&(Ge=!0),Ge?(wj=-Mj,Mj=Math.sqrt(Uk)):(wj=vh,vh=Mj,Mj=Math.sqrt(Uk/2));return new cf(wj/Mj,vh/Mj)}function Va(Ge,qg){for(var Oh=Ge.length;0<=--Oh;){var vh=Oh,Mj=Oh-1;0>Mj&&(Mj=Ge.length-
1);for(var wj=0,Rl=vd+2*Le;wj<Rl;wj++){var Uk=fd*wj,fq=fd*(wj+1),lx=qg+Mj+Uk,Dz=qg+Mj+fq;fq=qg+vh+fq;ad(qg+vh+Uk);ad(lx);ad(fq);ad(lx);ad(Dz);ad(fq);Uk=T.length/3;Uk=zg.generateSideWallUV(N,T,Uk-6,Uk-3,Uk-2,Uk-1);Bc(Uk[0]);Bc(Uk[1]);Bc(Uk[3]);Bc(Uk[1]);Bc(Uk[2]);Bc(Uk[3])}}}function vb(Ge,qg,Oh){rd.push(Ge);rd.push(qg);rd.push(Oh)}function sb(Ge,qg,Oh){ad(Ge);ad(qg);ad(Oh);Ge=T.length/3;Ge=zg.generateTopUV(N,T,Ge-3,Ge-2,Ge-1);Bc(Ge[0]);Bc(Ge[1]);Bc(Ge[2])}function ad(Ge){T.push(rd[3*Ge]);T.push(rd[3*
Ge+1]);T.push(rd[3*Ge+2])}function Bc(Ge){W.push(Ge.x);W.push(Ge.y)}var rd=[],Jc=void 0!==x.curveSegments?x.curveSegments:12,vd=void 0!==x.steps?x.steps:1,Vc=void 0!==x.depth?x.depth:100,Md=void 0!==x.bevelEnabled?x.bevelEnabled:!0,de=void 0!==x.bevelThickness?x.bevelThickness:6,Id=void 0!==x.bevelSize?x.bevelSize:de-2,Ld=void 0!==x.bevelOffset?x.bevelOffset:0,Le=void 0!==x.bevelSegments?x.bevelSegments:3,qf=x.extrudePath,zg=void 0!==x.UVGenerator?x.UVGenerator:tva;void 0!==x.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),
Vc=x.amount);var Pf=!1;if(qf){var kg=qf.getSpacedPoints(vd);Pf=!0;Md=!1;var Bh=qf.computeFrenetFrames(vd,!1);var bh=new wc;var $i=new wc;var Nh=new wc}Md||(Ld=Id=de=Le=0);sa=sa.extractPoints(Jc);qf=sa.shape;var jk=sa.holes;if(!vx.isClockWise(qf))for(qf=qf.reverse(),sa=0,Jc=jk.length;sa<Jc;sa++){var Jk=jk[sa];vx.isClockWise(Jk)&&(jk[sa]=Jk.reverse())}var Ql=vx.triangulateShape(qf,jk),Fc=qf;sa=0;for(Jc=jk.length;sa<Jc;sa++)qf=qf.concat(jk[sa]);var fd=qf.length,Me=Ql.length;sa=[];Jc=0;Jk=Fc.length;for(var od=
Jk-1,$e=Jc+1;Jc<Jk;Jc++,od++,$e++)od===Jk&&(od=0),$e===Jk&&($e=0),sa[Jc]=Xa(Fc[Jc],Fc[od],Fc[$e]);Jc=[];Jk=sa.concat();$e=0;for(var vf=jk.length;$e<vf;$e++){var Wg=jk[$e];od=[];for(var ag=0,ji=Wg.length,ei=ji-1,Ci=ag+1;ag<ji;ag++,ei++,Ci++)ei===ji&&(ei=0),Ci===ji&&(Ci=0),od[ag]=Xa(Wg[ag],Wg[ei],Wg[Ci]);Jc.push(od);Jk=Jk.concat(od)}for($e=0;$e<Le;$e++){od=$e/Le;vf=de*Math.cos(od*Math.PI/2);Wg=Id*Math.sin(od*Math.PI/2)+Ld;od=0;for(ag=Fc.length;od<ag;od++)ji=Aa(Fc[od],sa[od],Wg),vb(ji.x,ji.y,-vf);ag=
0;for(ji=jk.length;ag<ji;ag++){ei=jk[ag];od=Jc[ag];Ci=0;for(var ui=ei.length;Ci<ui;Ci++){var Ik=Aa(ei[Ci],od[Ci],Wg);vb(Ik.x,Ik.y,-vf)}}}od=Id+Ld;for($e=0;$e<fd;$e++)vf=Md?Aa(qf[$e],Jk[$e],od):qf[$e],Pf?($i.copy(Bh.normals[0]).multiplyScalar(vf.x),bh.copy(Bh.binormals[0]).multiplyScalar(vf.y),Nh.copy(kg[0]).add($i).add(bh),vb(Nh.x,Nh.y,Nh.z)):vb(vf.x,vf.y,0);for($e=1;$e<=vd;$e++)for(vf=0;vf<fd;vf++)Wg=Md?Aa(qf[vf],Jk[vf],od):qf[vf],Pf?($i.copy(Bh.normals[$e]).multiplyScalar(Wg.x),bh.copy(Bh.binormals[$e]).multiplyScalar(Wg.y),
Nh.copy(kg[$e]).add($i).add(bh),vb(Nh.x,Nh.y,Nh.z)):vb(Wg.x,Wg.y,Vc/vd*$e);for(Bh=Le-1;0<=Bh;Bh--){$i=Bh/Le;bh=de*Math.cos($i*Math.PI/2);$i=Id*Math.sin($i*Math.PI/2)+Ld;Nh=0;for(qf=Fc.length;Nh<qf;Nh++)Jk=Aa(Fc[Nh],sa[Nh],$i),vb(Jk.x,Jk.y,Vc+bh);Nh=0;for(qf=jk.length;Nh<qf;Nh++)for(Jk=jk[Nh],od=Jc[Nh],$e=0,vf=Jk.length;$e<vf;$e++)Wg=Aa(Jk[$e],od[$e],$i),Pf?vb(Wg.x,Wg.y+kg[vd-1].y,kg[vd-1].x+bh):vb(Wg.x,Wg.y,Vc+bh)}(function(){var Ge=T.length/3;if(Md){for(var qg=0*fd,Oh=0;Oh<Me;Oh++){var vh=Ql[Oh];
sb(vh[2]+qg,vh[1]+qg,vh[0]+qg)}qg=fd*(vd+2*Le);for(Oh=0;Oh<Me;Oh++)vh=Ql[Oh],sb(vh[0]+qg,vh[1]+qg,vh[2]+qg)}else{for(qg=0;qg<Me;qg++)Oh=Ql[qg],sb(Oh[2],Oh[1],Oh[0]);for(qg=0;qg<Me;qg++)Oh=Ql[qg],sb(Oh[0]+fd*vd,Oh[1]+fd*vd,Oh[2]+fd*vd)}N.addGroup(Ge,T.length/3-Ge,0)})();(function(){var Ge=T.length/3,qg=0;Va(Fc,qg);qg+=Fc.length;for(var Oh=0,vh=jk.length;Oh<vh;Oh++){var Mj=jk[Oh];Va(Mj,qg);qg+=Mj.length}N.addGroup(Ge,T.length/3-Ge,1)})()}var H=u.call(this||p)||this||p;H.type="ExtrudeBufferGeometry";
H.parameters={shapes:t,options:x};t=Array.isArray(t)?t:[t];for(var N=l(H),T=[],W=[],Y=0,ea=t.length;Y<ea;Y++)C(t[Y]);H.setAttribute("position",new V(T,3));H.setAttribute("uv",new V(W,2));H.computeVertexNormals();return H}g(z,u);z.prototype.toJSON=function(){var t=ya.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var H=0,N=x.length;H<N;H++)t.shapes.push(x[H].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=
C.extrudePath.toJSON());return t};return z}(ya),tva={generateTopUV:function(u,z,t,x,C){u=z[3*x];x=z[3*x+1];var H=z[3*C];C=z[3*C+1];return[new cf(z[3*t],z[3*t+1]),new cf(u,x),new cf(H,C)]},generateSideWallUV:function(u,z,t,x,C,H){u=z[3*t];var N=z[3*t+1];t=z[3*t+2];var T=z[3*x],W=z[3*x+1];x=z[3*x+2];var Y=z[3*C],ea=z[3*C+1];C=z[3*C+2];var sa=z[3*H],Aa=z[3*H+1];z=z[3*H+2];return.01>Math.abs(N-W)?[new cf(u,1-t),new cf(T,1-x),new cf(Y,1-C),new cf(sa,1-z)]:[new cf(N,1-t),new cf(W,1-x),new cf(ea,1-C),new cf(Aa,
1-z)]}},iY=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ExtrudeGeometry";C.parameters={shapes:t,options:x};C.fromBufferGeometry(new dJ(t,x));C.mergeVertices();return C}g(z,u);z.prototype.toJSON=function(){var t=u.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes,C=(this||p).parameters.options;t.shapes=[];if(Array.isArray(x))for(var H=0,N=x.length;H<N;H++)t.shapes.push(x[H].uuid);else t.shapes.push(x.uuid);void 0!==C.extrudePath&&(t.options.extrudePath=C.extrudePath.toJSON());
return t};return z}(al),jY=function(u){function z(t,x){var C=(1+Math.sqrt(5))/2;C=u.call(this||p,[-1,C,0,1,C,0,-1,-C,0,1,-C,0,0,-1,C,0,1,C,0,-1,-C,0,1,-C,C,0,-1,C,0,1,-C,0,-1,-C,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,x)||this||p;C.type="IcosahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(qC),oda=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="IcosahedronGeometry";
C.parameters={radius:t,detail:x};C.fromBufferGeometry(new jY(t,x));C.mergeVertices();return C}g(z,u);return z}(al),kY=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="LatheBufferGeometry";N.parameters={points:t,segments:x,phiStart:C,phiLength:H};x=Math.floor(x)||12;C=C||0;H=H||2*Math.PI;H=ti.clamp(H,0,2*Math.PI);for(var T=[],W=[],Y=[],ea=1/x,sa=new wc,Aa=new cf,Xa=0;Xa<=x;Xa++){var Va=C+Xa*ea*H,vb=Math.sin(Va);Va=Math.cos(Va);for(var sb=0;sb<=t.length-1;sb++)sa.x=t[sb].x*vb,
sa.y=t[sb].y,sa.z=t[sb].x*Va,W.push(sa.x,sa.y,sa.z),Aa.x=Xa/x,Aa.y=sb/(t.length-1),Y.push(Aa.x,Aa.y)}for(C=0;C<x;C++)for(ea=0;ea<t.length-1;ea++)sa=ea+C*t.length,Aa=sa+t.length,Xa=sa+t.length+1,vb=sa+1,T.push(sa,Aa,vb),T.push(Aa,Xa,vb);N.setIndex(T);N.setAttribute("position",new V(W,3));N.setAttribute("uv",new V(Y,2));N.computeVertexNormals();if(H===2*Math.PI)for(H=N.attributes.normal.array,T=new wc,W=new wc,Y=new wc,x=x*t.length*3,ea=C=0;C<t.length;C++,ea+=3)T.x=H[ea+0],T.y=H[ea+1],T.z=H[ea+2],W.x=
H[x+ea+0],W.y=H[x+ea+1],W.z=H[x+ea+2],Y.addVectors(T,W).normalize(),H[ea+0]=H[x+ea+0]=Y.x,H[ea+1]=H[x+ea+1]=Y.y,H[ea+2]=H[x+ea+2]=Y.z;return N}g(z,u);return z}(ya),pda=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="LatheGeometry";N.parameters={points:t,segments:x,phiStart:C,phiLength:H};N.fromBufferGeometry(new kY(t,x,C,H));N.mergeVertices();return N}g(z,u);return z}(al),HP=function(u){function z(t,x){var C=u.call(this||p,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,
3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,x)||this||p;C.type="OctahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(qC),qda=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="OctahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new HP(t,x));C.mergeVertices();return C}g(z,u);return z}(al);YE.prototype=Object.create(ya.prototype);YE.prototype.constructor=YE;MI.prototype=Object.create(al.prototype);MI.prototype.constructor=MI;var rda=
function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="PlaneGeometry";N.parameters={width:t,height:x,widthSegments:C,heightSegments:H};N.fromBufferGeometry(new GO(t,x,C,H));N.mergeVertices();return N}g(z,u);return z}(al),sda=function(u){function z(t,x,C,H){var N=u.call(this||p)||this||p;N.type="PolyhedronGeometry";N.parameters={vertices:t,indices:x,radius:C,detail:H};N.fromBufferGeometry(new qC(t,x,C,H));N.mergeVertices();return N}g(z,u);return z}(al),lY=function(u){function z(t,x,
C,H,N,T){var W=u.call(this||p)||this||p;W.type="RingBufferGeometry";W.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:H,thetaStart:N,thetaLength:T};t=t||.5;x=x||1;N=void 0!==N?N:0;T=void 0!==T?T:2*Math.PI;C=void 0!==C?Math.max(3,C):8;H=void 0!==H?Math.max(1,H):1;var Y=[],ea=[],sa=[],Aa=[],Xa=t;t=(x-t)/H;for(var Va=new wc,vb=new cf,sb=0;sb<=H;sb++){for(var ad=0;ad<=C;ad++){var Bc=N+ad/C*T;Va.x=Xa*Math.cos(Bc);Va.y=Xa*Math.sin(Bc);ea.push(Va.x,Va.y,Va.z);sa.push(0,0,1);vb.x=(Va.x/
x+1)/2;vb.y=(Va.y/x+1)/2;Aa.push(vb.x,vb.y)}Xa+=t}for(x=0;x<H;x++)for(N=x*(C+1),T=0;T<C;T++)Xa=T+N,t=Xa+C+1,Va=Xa+C+2,vb=Xa+1,Y.push(Xa,t,vb),Y.push(t,Va,vb);W.setIndex(Y);W.setAttribute("position",new V(ea,3));W.setAttribute("normal",new V(sa,3));W.setAttribute("uv",new V(Aa,2));return W}g(z,u);return z}(ya),tda=function(u){function z(t,x,C,H,N,T){var W=u.call(this||p)||this||p;W.type="RingGeometry";W.parameters={innerRadius:t,outerRadius:x,thetaSegments:C,phiSegments:H,thetaStart:N,thetaLength:T};
W.fromBufferGeometry(new lY(t,x,C,H,N,T));W.mergeVertices();return W}g(z,u);return z}(al),mY=function(u){function z(t,x){function C(Xa){var Va=T.length/3,vb=Xa.extractPoints(x);Xa=vb.shape;var sb=vb.holes;!1===vx.isClockWise(Xa)&&(Xa=Xa.reverse());vb=0;for(var ad=sb.length;vb<ad;vb++){var Bc=sb[vb];!0===vx.isClockWise(Bc)&&(sb[vb]=Bc.reverse())}vb=vx.triangulateShape(Xa,sb);ad=0;for(Bc=sb.length;ad<Bc;ad++)Xa=Xa.concat(sb[ad]);sb=0;for(ad=Xa.length;sb<ad;sb++)Bc=Xa[sb],T.push(Bc.x,Bc.y,0),W.push(0,
0,1),Y.push(Bc.x,Bc.y);Xa=0;for(sb=vb.length;Xa<sb;Xa++)ad=vb[Xa],N.push(ad[0]+Va,ad[1]+Va,ad[2]+Va),sa+=3}var H=u.call(this||p)||this||p;H.type="ShapeBufferGeometry";H.parameters={shapes:t,curveSegments:x};x=x||12;var N=[],T=[],W=[],Y=[],ea=0,sa=0;if(!1===Array.isArray(t))C(t);else for(var Aa=0;Aa<t.length;Aa++)C(t[Aa]),H.addGroup(ea,sa,Aa),ea+=sa,sa=0;H.setIndex(N);H.setAttribute("position",new V(T,3));H.setAttribute("normal",new V(W,3));H.setAttribute("uv",new V(Y,2));return H}g(z,u);z.prototype.toJSON=
function(){var t=ya.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,H=x.length;C<H;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(ya),nY=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="ShapeGeometry";"object"===typeof x&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),x=x.curveSegments);C.parameters={shapes:t,curveSegments:x};C.fromBufferGeometry(new mY(t,x));C.mergeVertices();
return C}g(z,u);z.prototype.toJSON=function(){var t=al.prototype.toJSON.call(this||p),x=(this||p).parameters.shapes;t.shapes=[];if(Array.isArray(x))for(var C=0,H=x.length;C<H;C++)t.shapes.push(x[C].uuid);else t.shapes.push(x.uuid);return t};return z}(al),IP=function(u){function z(t,x,C,H,N,T,W){var Y=u.call(this||p)||this||p;Y.type="SphereBufferGeometry";Y.parameters={radius:t,widthSegments:x,heightSegments:C,phiStart:H,phiLength:N,thetaStart:T,thetaLength:W};t=t||1;x=Math.max(3,Math.floor(x)||8);
C=Math.max(2,Math.floor(C)||6);H=void 0!==H?H:0;N=void 0!==N?N:2*Math.PI;T=void 0!==T?T:0;W=void 0!==W?W:Math.PI;for(var ea=Math.min(T+W,Math.PI),sa=0,Aa=[],Xa=new wc,Va=new wc,vb=[],sb=[],ad=[],Bc=[],rd=0;rd<=C;rd++){var Jc=[],vd=rd/C,Vc=0;0==rd&&0==T?Vc=.5/x:rd==C&&ea==Math.PI&&(Vc=-.5/x);for(var Md=0;Md<=x;Md++){var de=Md/x;Xa.x=-t*Math.cos(H+de*N)*Math.sin(T+vd*W);Xa.y=t*Math.cos(T+vd*W);Xa.z=t*Math.sin(H+de*N)*Math.sin(T+vd*W);sb.push(Xa.x,Xa.y,Xa.z);Va.copy(Xa).normalize();ad.push(Va.x,Va.y,
Va.z);Bc.push(de+Vc,1-vd);Jc.push(sa++)}Aa.push(Jc)}for(t=0;t<C;t++)for(H=0;H<x;H++)N=Aa[t][H+1],W=Aa[t][H],sa=Aa[t+1][H],Xa=Aa[t+1][H+1],(0!==t||0<T)&&vb.push(N,W,Xa),(t!==C-1||ea<Math.PI)&&vb.push(W,sa,Xa);Y.setIndex(vb);Y.setAttribute("position",new V(sb,3));Y.setAttribute("normal",new V(ad,3));Y.setAttribute("uv",new V(Bc,2));return Y}g(z,u);return z}(ya),uda=function(u){function z(t,x,C,H,N,T,W){var Y=u.call(this||p)||this||p;Y.type="SphereGeometry";Y.parameters={radius:t,widthSegments:x,heightSegments:C,
phiStart:H,phiLength:N,thetaStart:T,thetaLength:W};Y.fromBufferGeometry(new IP(t,x,C,H,N,T,W));Y.mergeVertices();return Y}g(z,u);return z}(al),oY=function(u){function z(t,x){var C=u.call(this||p,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,x)||this||p;C.type="TetrahedronBufferGeometry";C.parameters={radius:t,detail:x};return C}g(z,u);return z}(qC),vda=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TetrahedronGeometry";C.parameters={radius:t,detail:x};C.fromBufferGeometry(new oY(t,
x));C.mergeVertices();return C}g(z,u);return z}(al),pY=function(u){function z(t,x){x=x||{};var C=x.font;if(!C||!C.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ya;t=C.generateShapes(t,x.size);x.depth=void 0!==x.height?x.height:50;void 0===x.bevelThickness&&(x.bevelThickness=10);void 0===x.bevelSize&&(x.bevelSize=8);void 0===x.bevelEnabled&&(x.bevelEnabled=!1);x=u.call(this||p,t,x)||this||p;x.type="TextBufferGeometry";return x}g(z,u);return z}(dJ),
wda=function(u){function z(t,x){var C=u.call(this||p)||this||p;C.type="TextGeometry";C.parameters={text:t,parameters:x};C.fromBufferGeometry(new pY(t,x));C.mergeVertices();return C}g(z,u);return z}(al),qY=function(u){function z(t,x,C,H,N){var T=u.call(this||p)||this||p;T.type="TorusBufferGeometry";T.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:H,arc:N};t=t||1;x=x||.4;C=Math.floor(C)||8;H=Math.floor(H)||6;N=N||2*Math.PI;for(var W=[],Y=[],ea=[],sa=[],Aa=new wc,Xa=new wc,Va=new wc,vb=
0;vb<=C;vb++)for(var sb=0;sb<=H;sb++){var ad=sb/H*N,Bc=vb/C*Math.PI*2;Xa.x=(t+x*Math.cos(Bc))*Math.cos(ad);Xa.y=(t+x*Math.cos(Bc))*Math.sin(ad);Xa.z=x*Math.sin(Bc);Y.push(Xa.x,Xa.y,Xa.z);Aa.x=t*Math.cos(ad);Aa.y=t*Math.sin(ad);Va.subVectors(Xa,Aa).normalize();ea.push(Va.x,Va.y,Va.z);sa.push(sb/H);sa.push(vb/C)}for(t=1;t<=C;t++)for(x=1;x<=H;x++)N=(H+1)*(t-1)+x-1,Aa=(H+1)*(t-1)+x,Xa=(H+1)*t+x,W.push((H+1)*t+x-1,N,Xa),W.push(N,Aa,Xa);T.setIndex(W);T.setAttribute("position",new V(Y,3));T.setAttribute("normal",
new V(ea,3));T.setAttribute("uv",new V(sa,2));return T}g(z,u);return z}(ya),xda=function(u){function z(t,x,C,H,N){var T=u.call(this||p)||this||p;T.type="TorusGeometry";T.parameters={radius:t,tube:x,radialSegments:C,tubularSegments:H,arc:N};T.fromBufferGeometry(new qY(t,x,C,H,N));T.mergeVertices();return T}g(z,u);return z}(al),rY=function(u){function z(t,x,C,H,N,T){function W(Id,Ld,Le,qf,zg){var Pf=Math.sin(Id);Ld=Le/Ld*Id;Le=Math.cos(Ld);zg.x=qf*(2+Le)*.5*Math.cos(Id);zg.y=qf*(2+Le)*Pf*.5;zg.z=qf*
Math.sin(Ld)*.5}var Y=u.call(this||p)||this||p;Y.type="TorusKnotBufferGeometry";Y.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:H,p:N,q:T};t=t||1;x=x||.4;C=Math.floor(C)||64;H=Math.floor(H)||8;N=N||2;T=T||3;for(var ea=[],sa=[],Aa=[],Xa=[],Va=new wc,vb=new wc,sb=new wc,ad=new wc,Bc=new wc,rd=new wc,Jc=new wc,vd=0;vd<=C;++vd){var Vc=vd/C*N*Math.PI*2;W(Vc,N,T,t,sb);W(Vc+.01,N,T,t,ad);rd.subVectors(ad,sb);Jc.addVectors(ad,sb);Bc.crossVectors(rd,Jc);Jc.crossVectors(Bc,rd);Bc.normalize();
Jc.normalize();for(Vc=0;Vc<=H;++Vc){var Md=Vc/H*Math.PI*2,de=-x*Math.cos(Md);Md=x*Math.sin(Md);Va.x=sb.x+(de*Jc.x+Md*Bc.x);Va.y=sb.y+(de*Jc.y+Md*Bc.y);Va.z=sb.z+(de*Jc.z+Md*Bc.z);sa.push(Va.x,Va.y,Va.z);vb.subVectors(Va,sb).normalize();Aa.push(vb.x,vb.y,vb.z);Xa.push(vd/C);Xa.push(Vc/H)}}for(t=1;t<=C;t++)for(x=1;x<=H;x++)N=(H+1)*t+(x-1),T=(H+1)*t+x,Va=(H+1)*(t-1)+x,ea.push((H+1)*(t-1)+(x-1),N,Va),ea.push(N,T,Va);Y.setIndex(ea);Y.setAttribute("position",new V(sa,3));Y.setAttribute("normal",new V(Aa,
3));Y.setAttribute("uv",new V(Xa,2));return Y}g(z,u);return z}(ya),yda=function(u){function z(t,x,C,H,N,T,W){var Y=u.call(this||p)||this||p;Y.type="TorusKnotGeometry";Y.parameters={radius:t,tube:x,tubularSegments:C,radialSegments:H,p:N,q:T};void 0!==W&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");Y.fromBufferGeometry(new rY(t,x,C,H,N,T));Y.mergeVertices();return Y}g(z,u);return z}(al),sY=function(u){function z(t,x,C,H,N){function T(Bc){Xa=
t.getPointAt(Bc/x,Xa);var rd=Y.normals[Bc];Bc=Y.binormals[Bc];for(var Jc=0;Jc<=H;Jc++){var vd=Jc/H*Math.PI*2,Vc=Math.sin(vd);vd=-Math.cos(vd);sa.x=vd*rd.x+Vc*Bc.x;sa.y=vd*rd.y+Vc*Bc.y;sa.z=vd*rd.z+Vc*Bc.z;sa.normalize();vb.push(sa.x,sa.y,sa.z);ea.x=Xa.x+C*sa.x;ea.y=Xa.y+C*sa.y;ea.z=Xa.z+C*sa.z;Va.push(ea.x,ea.y,ea.z)}}var W=u.call(this||p)||this||p;W.type="TubeBufferGeometry";W.parameters={path:t,tubularSegments:x,radius:C,radialSegments:H,closed:N};x=x||64;C=C||1;H=H||8;N=N||!1;var Y=t.computeFrenetFrames(x,
N);W.tangents=Y.tangents;W.normals=Y.normals;W.binormals=Y.binormals;var ea=new wc,sa=new wc,Aa=new cf,Xa=new wc,Va=[],vb=[],sb=[],ad=[];(function(){for(var Bc=0;Bc<x;Bc++)T(Bc);T(!1===N?x:0);for(Bc=0;Bc<=x;Bc++)for(var rd=0;rd<=H;rd++)Aa.x=Bc/x,Aa.y=rd/H,sb.push(Aa.x,Aa.y);for(Bc=1;Bc<=x;Bc++)for(rd=1;rd<=H;rd++){var Jc=(H+1)*Bc+(rd-1),vd=(H+1)*Bc+rd,Vc=(H+1)*(Bc-1)+rd;ad.push((H+1)*(Bc-1)+(rd-1),Jc,Vc);ad.push(Jc,vd,Vc)}})();W.setIndex(ad);W.setAttribute("position",new V(Va,3));W.setAttribute("normal",
new V(vb,3));W.setAttribute("uv",new V(sb,2));return W}g(z,u);z.prototype.toJSON=function(){var t=ya.prototype.toJSON.call(this||p);t.path=(this||p).parameters.path.toJSON();return t};return z}(ya),zda=function(u){function z(t,x,C,H,N,T){var W=u.call(this||p)||this||p;W.type="TubeGeometry";W.parameters={path:t,tubularSegments:x,radius:C,radialSegments:H,closed:N};void 0!==T&&console.warn("THREE.TubeGeometry: taper has been removed.");t=new sY(t,x,C,H,N);W.tangents=t.tangents;W.normals=t.normals;W.binormals=
t.binormals;W.fromBufferGeometry(t);W.mergeVertices();return W}g(z,u);return z}(al),tY=function(u){function z(t){var x=u.call(this||p)||this||p;x.type="WireframeGeometry";var C=[],H=[0,0],N={},T=["a","b","c"];if(t&&t.isGeometry){for(var W=t.faces,Y=0,ea=W.length;Y<ea;Y++)for(var sa=W[Y],Aa=0;3>Aa;Aa++){var Xa=sa[T[Aa]],Va=sa[T[(Aa+1)%3]];H[0]=Math.min(Xa,Va);H[1]=Math.max(Xa,Va);Xa=H[0]+","+H[1];void 0===N[Xa]&&(N[Xa]={index1:H[0],index2:H[1]})}for(var vb in N)H=N[vb],W=t.vertices[H.index1],C.push(W.x,
W.y,W.z),W=t.vertices[H.index2],C.push(W.x,W.y,W.z)}else if(t&&t.isBufferGeometry)if(vb=new wc,null!==t.index){T=t.attributes.position;Y=t.index;t=t.groups;0===t.length&&(t=[{start:0,count:Y.count,materialIndex:0}]);ea=0;for(sa=t.length;ea<sa;++ea)for(Xa=t[ea],Aa=Va=Xa.start,Xa=Va+Xa.count;Aa<Xa;Aa+=3)for(Va=0;3>Va;Va++){var sb=Y.getX(Aa+Va),ad=Y.getX(Aa+(Va+1)%3);H[0]=Math.min(sb,ad);H[1]=Math.max(sb,ad);sb=H[0]+","+H[1];void 0===N[sb]&&(N[sb]={index1:H[0],index2:H[1]})}for(W in N)H=N[W],vb.fromBufferAttribute(T,
H.index1),C.push(vb.x,vb.y,vb.z),vb.fromBufferAttribute(T,H.index2),C.push(vb.x,vb.y,vb.z)}else for(N=t.attributes.position,H=0,W=N.count/3;H<W;H++)for(t=0;3>t;t++)vb.fromBufferAttribute(N,3*H+t),C.push(vb.x,vb.y,vb.z),vb.fromBufferAttribute(N,3*H+(t+1)%3),C.push(vb.x,vb.y,vb.z);x.setAttribute("position",new V(C,3));return x}g(z,u);return z}(ya),wp=Object.freeze({__proto__:null,BoxGeometry:cY,BoxBufferGeometry:zI,CircleGeometry:kda,CircleBufferGeometry:dY,ConeGeometry:lda,ConeBufferGeometry:mda,CylinderGeometry:eY,
CylinderBufferGeometry:cJ,DodecahedronGeometry:nda,DodecahedronBufferGeometry:fY,EdgesGeometry:hY,ExtrudeGeometry:iY,ExtrudeBufferGeometry:dJ,IcosahedronGeometry:oda,IcosahedronBufferGeometry:jY,LatheGeometry:pda,LatheBufferGeometry:kY,OctahedronGeometry:qda,OctahedronBufferGeometry:HP,ParametricGeometry:MI,ParametricBufferGeometry:YE,PlaneGeometry:rda,PlaneBufferGeometry:GO,PolyhedronGeometry:sda,PolyhedronBufferGeometry:qC,RingGeometry:tda,RingBufferGeometry:lY,ShapeGeometry:nY,ShapeBufferGeometry:mY,
SphereGeometry:uda,SphereBufferGeometry:IP,TetrahedronGeometry:vda,TetrahedronBufferGeometry:oY,TextGeometry:wda,TextBufferGeometry:pY,TorusGeometry:xda,TorusBufferGeometry:qY,TorusKnotGeometry:yda,TorusKnotBufferGeometry:rY,TubeGeometry:zda,TubeBufferGeometry:sY,WireframeGeometry:tY});hC.prototype=Object.create(M.prototype);hC.prototype.constructor=hC;hC.prototype.isShadowMaterial=!0;hC.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);return this||p};mx.prototype=
Object.create(La.prototype);mx.prototype.constructor=mx;mx.prototype.isRawShaderMaterial=!0;Hv.prototype=Object.create(M.prototype);Hv.prototype.constructor=Hv;Hv.prototype.isMeshStandardMaterial=!0;Hv.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:""};(this||p).color.copy(u.color);(this||p).roughness=u.roughness;(this||p).metalness=u.metalness;(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=
u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).roughnessMap=
u.roughnessMap;(this||p).metalnessMap=u.metalnessMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).envMapIntensity=u.envMapIntensity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;(this||p).vertexTangents=
u.vertexTangents;return this||p};Jz.prototype=Object.create(Hv.prototype);Jz.prototype.constructor=Jz;Jz.prototype.isMeshPhysicalMaterial=!0;Jz.prototype.copy=function(u){Hv.prototype.copy.call(this||p,u);(this||p).defines={STANDARD:"",PHYSICAL:""};(this||p).clearcoat=u.clearcoat;(this||p).clearcoatMap=u.clearcoatMap;(this||p).clearcoatRoughness=u.clearcoatRoughness;(this||p).clearcoatRoughnessMap=u.clearcoatRoughnessMap;(this||p).clearcoatNormalMap=u.clearcoatNormalMap;(this||p).clearcoatNormalScale.copy(u.clearcoatNormalScale);
(this||p).reflectivity=u.reflectivity;(this||p).sheen=u.sheen?((this||p).sheen||new Hg).copy(u.sheen):null;(this||p).transmission=u.transmission;(this||p).transmissionMap=u.transmissionMap;return this||p};Kz.prototype=Object.create(M.prototype);Kz.prototype.constructor=Kz;Kz.prototype.isMeshPhongMaterial=!0;Kz.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).specular.copy(u.specular);(this||p).shininess=u.shininess;(this||p).map=u.map;(this||p).lightMap=
u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;
(this||p).displacementBias=u.displacementBias;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=
u.morphNormals;return this||p};iC.prototype=Object.create(M.prototype);iC.prototype.constructor=iC;iC.prototype.isMeshToonMaterial=!0;iC.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).gradientMap=u.gradientMap;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||
p).emissiveIntensity=u.emissiveIntensity;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;
(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};jC.prototype=Object.create(M.prototype);jC.prototype.constructor=jC;jC.prototype.isMeshNormalMaterial=!0;jC.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);
(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};kC.prototype=Object.create(M.prototype);kC.prototype.constructor=kC;kC.prototype.isMeshLambertMaterial=!0;kC.prototype.copy=function(u){M.prototype.copy.call(this||
p,u);(this||p).color.copy(u.color);(this||p).map=u.map;(this||p).lightMap=u.lightMap;(this||p).lightMapIntensity=u.lightMapIntensity;(this||p).aoMap=u.aoMap;(this||p).aoMapIntensity=u.aoMapIntensity;(this||p).emissive.copy(u.emissive);(this||p).emissiveMap=u.emissiveMap;(this||p).emissiveIntensity=u.emissiveIntensity;(this||p).specularMap=u.specularMap;(this||p).alphaMap=u.alphaMap;(this||p).envMap=u.envMap;(this||p).combine=u.combine;(this||p).reflectivity=u.reflectivity;(this||p).refractionRatio=
u.refractionRatio;(this||p).wireframe=u.wireframe;(this||p).wireframeLinewidth=u.wireframeLinewidth;(this||p).wireframeLinecap=u.wireframeLinecap;(this||p).wireframeLinejoin=u.wireframeLinejoin;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||p).morphNormals=u.morphNormals;return this||p};lC.prototype=Object.create(M.prototype);lC.prototype.constructor=lC;lC.prototype.isMeshMatcapMaterial=!0;lC.prototype.copy=function(u){M.prototype.copy.call(this||p,u);(this||p).defines=
{MATCAP:""};(this||p).color.copy(u.color);(this||p).matcap=u.matcap;(this||p).map=u.map;(this||p).bumpMap=u.bumpMap;(this||p).bumpScale=u.bumpScale;(this||p).normalMap=u.normalMap;(this||p).normalMapType=u.normalMapType;(this||p).normalScale.copy(u.normalScale);(this||p).displacementMap=u.displacementMap;(this||p).displacementScale=u.displacementScale;(this||p).displacementBias=u.displacementBias;(this||p).alphaMap=u.alphaMap;(this||p).skinning=u.skinning;(this||p).morphTargets=u.morphTargets;(this||
p).morphNormals=u.morphNormals;return this||p};mC.prototype=Object.create(Sl.prototype);mC.prototype.constructor=mC;mC.prototype.isLineDashedMaterial=!0;mC.prototype.copy=function(u){Sl.prototype.copy.call(this||p,u);(this||p).scale=u.scale;(this||p).dashSize=u.dashSize;(this||p).gapSize=u.gapSize;return this||p};var uva=Object.freeze({__proto__:null,ShadowMaterial:hC,SpriteMaterial:Hz,RawShaderMaterial:mx,ShaderMaterial:La,PointsMaterial:Ht,MeshPhysicalMaterial:Jz,MeshStandardMaterial:Hv,MeshPhongMaterial:Kz,
MeshToonMaterial:iC,MeshNormalMaterial:jC,MeshLambertMaterial:kC,MeshDepthMaterial:Az,MeshDistanceMaterial:Bz,MeshBasicMaterial:L,MeshMatcapMaterial:lC,LineDashedMaterial:mC,LineBasicMaterial:Sl,Material:M}),Dl={arraySlice:function(u,z,t){return Dl.isTypedArray(u)?new u.constructor(u.subarray(z,void 0!==t?t:u.length)):u.slice(z,t)},convertArray:function(u,z,t){return!u||!t&&u.constructor===z?u:"number"===typeof z.BYTES_PER_ELEMENT?new z(u):Array.prototype.slice.call(u)},isTypedArray:function(u){return ArrayBuffer.isView(u)&&
!(u instanceof DataView)},getKeyframeOrder:function(u){for(var z=u.length,t=Array(z),x=0;x!==z;++x)t[x]=x;t.sort(function(C,H){return u[C]-u[H]});return t},sortedArray:function(u,z,t){for(var x=u.length,C=new u.constructor(x),H=0,N=0;N!==x;++H)for(var T=t[H]*z,W=0;W!==z;++W)C[N++]=u[T+W];return C},flattenJSON:function(u,z,t,x){for(var C=1,H=u[0];void 0!==H&&void 0===H[x];)H=u[C++];if(void 0!==H){var N=H[x];if(void 0!==N)if(Array.isArray(N)){do N=H[x],void 0!==N&&(z.push(H.time),t.push.apply(t,N)),
H=u[C++];while(void 0!==H)}else if(void 0!==N.toArray){do N=H[x],void 0!==N&&(z.push(H.time),N.toArray(t,t.length)),H=u[C++];while(void 0!==H)}else{do N=H[x],void 0!==N&&(z.push(H.time),t.push(N)),H=u[C++];while(void 0!==H)}}},subclip:function(u,z,t,x,C){C=C||30;u=u.clone();u.name=z;z=[];for(var H=0;H<u.tracks.length;++H){for(var N=u.tracks[H],T=N.getValueSize(),W=[],Y=[],ea=0;ea<N.times.length;++ea){var sa=N.times[ea]*C;if(!(sa<t||sa>=x))for(W.push(N.times[ea]),sa=0;sa<T;++sa)Y.push(N.values[ea*
T+sa])}0!==W.length&&(N.times=Dl.convertArray(W,N.times.constructor),N.values=Dl.convertArray(Y,N.values.constructor),z.push(N))}u.tracks=z;t=Infinity;for(x=0;x<u.tracks.length;++x)t>u.tracks[x].times[0]&&(t=u.tracks[x].times[0]);for(x=0;x<u.tracks.length;++x)u.tracks[x].shift(-1*t);u.resetDuration();return u},makeClipAdditive:function(u,z,t,x){void 0===z&&(z=0);void 0===t&&(t=u);if(void 0===x||0>=x)x=30;var C=t.tracks.length,H=z/x;z=function(N){var T=t.tracks[N],W=T.ValueTypeName;if("bool"===W||
"string"===W)return"continue";N=u.tracks.find(function(ad){return ad.name===T.name&&ad.ValueTypeName===W});if(void 0===N)return"continue";var Y=0,ea=T.getValueSize();T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Y=ea/3);var sa=0,Aa=N.getValueSize();N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(sa=Aa/3);var Xa=T.times.length-1,Va=void 0;H<=T.times[0]?Va=Dl.arraySlice(T.values,Y,ea-Y):H>=T.times[Xa]?(Va=Xa*ea+Y,Va=Dl.arraySlice(T.values,Va,Va+ea-Y)):(Va=T.createInterpolant(),
Xa=Y,Y=ea-Y,Va.evaluate(H),Va=Dl.arraySlice(Va.resultBuffer,Xa,Y));"quaternion"===W&&(new Ko).fromArray(Va).normalize().conjugate().toArray(Va);Y=N.times.length;for(ea=0;ea<Y;++ea)if(Xa=ea*Aa+sa,"quaternion"===W)Ko.multiplyQuaternionsFlat(N.values,Xa,Va,0,N.values,Xa);else for(var vb=Aa-2*sa,sb=0;sb<vb;++sb)N.values[Xa+sb]-=Va[sb]};for(x=0;x<C;++x)z(x);u.blendMode=2501;return u}};Object.assign(Yq.prototype,{evaluate:function(u){var z=(this||p).parameterPositions,t=(this||p)._cachedIndex,x=z[t],C=
z[t-1];a:{b:{c:{d:if(!(u<x)){for(var H=t+2;;){if(void 0===x){if(u<C)break d;t=z.length;(this||p)._cachedIndex=t;return this.afterEnd_(t-1,u,C)}if(t===H)break;C=x;x=z[++t];if(u<x)break b}x=z.length;break c}if(u>=C)break a;else{H=z[1];u<H&&(t=2,C=H);for(H=t-2;;){if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,u,x);if(t===H)break;x=C;C=z[--t-1];if(u>=C)break b}x=t;t=0}}for(;t<x;)C=t+x>>>1,u<z[C]?x=C:t=C+1;x=z[t];C=z[t-1];if(void 0===C)return(this||p)._cachedIndex=0,this.beforeStart_(0,
u,x);if(void 0===x)return t=z.length,(this||p)._cachedIndex=t,this.afterEnd_(t-1,C,u)}(this||p)._cachedIndex=t;this.intervalChanged_(t,C,x)}return this.interpolate_(t,C,u,x)},settings:null,DefaultSettings_:{},getSettings_:function(){return(this||p).settings||(this||p).DefaultSettings_},copySampleValue_:function(u){var z=(this||p).resultBuffer,t=(this||p).sampleValues,x=(this||p).valueSize;u*=x;for(var C=0;C!==x;++C)z[C]=t[u+C];return z},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}});Object.assign(Yq.prototype,{beforeStart_:Yq.prototype.copySampleValue_,afterEnd_:Yq.prototype.copySampleValue_});SO.prototype=Object.assign(Object.create(Yq.prototype),{constructor:SO,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(u,z,t){var x=(this||p).parameterPositions,C=u-2,H=u+1,N=x[C],T=x[H];if(void 0===N)switch(this.getSettings_().endingStart){case 2401:C=u;N=2*z-t;break;case 2402:C=x.length-2;N=z+x[C]-x[C+1];break;default:C=u,
N=t}if(void 0===T)switch(this.getSettings_().endingEnd){case 2401:H=u;T=2*t-z;break;case 2402:H=1;T=t+x[1]-x[0];break;default:H=u-1,T=z}u=.5*(t-z);x=(this||p).valueSize;(this||p)._weightPrev=u/(z-N);(this||p)._weightNext=u/(T-t);(this||p)._offsetPrev=C*x;(this||p)._offsetNext=H*x},interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,H=(this||p).sampleValues,N=(this||p).valueSize;u*=N;var T=u-N,W=(this||p)._offsetPrev,Y=(this||p)._offsetNext,ea=(this||p)._weightPrev,sa=(this||p)._weightNext,
Aa=(t-z)/(x-z);t=Aa*Aa;x=t*Aa;z=-ea*x+2*ea*t-ea*Aa;ea=(1+ea)*x+(-1.5-2*ea)*t+(-.5+ea)*Aa+1;Aa=(-1-sa)*x+(1.5+sa)*t+.5*Aa;sa=sa*x-sa*t;for(t=0;t!==N;++t)C[t]=z*H[W+t]+ea*H[T+t]+Aa*H[u+t]+sa*H[Y+t];return C}});NI.prototype=Object.assign(Object.create(Yq.prototype),{constructor:NI,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,H=(this||p).sampleValues,N=(this||p).valueSize;u*=N;var T=u-N;z=(t-z)/(x-z);t=1-z;for(x=0;x!==N;++x)C[x]=H[T+x]*t+H[u+x]*z;return C}});TO.prototype=Object.assign(Object.create(Yq.prototype),
{constructor:TO,interpolate_:function(u){return this.copySampleValue_(u-1)}});Object.assign(qo,{toJSON:function(u){var z=u.constructor;if(void 0!==z.toJSON)z=z.toJSON(u);else{z={name:u.name,times:Dl.convertArray(u.times,Array),values:Dl.convertArray(u.values,Array)};var t=u.getInterpolation();t!==u.DefaultInterpolation&&(z.interpolation=t)}z.type=u.ValueTypeName;return z}});Object.assign(qo.prototype,{constructor:qo,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,
InterpolantFactoryMethodDiscrete:function(u){return new TO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodLinear:function(u){return new NI((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:function(u){return new SO((this||p).times,(this||p).values,this.getValueSize(),u)},setInterpolation:function(u){switch(u){case 2300:var z=(this||p).InterpolantFactoryMethodDiscrete;break;case 2301:z=(this||p).InterpolantFactoryMethodLinear;
break;case 2302:z=(this||p).InterpolantFactoryMethodSmooth}if(void 0===z){z="unsupported interpolation for "+(this||p).ValueTypeName+" keyframe track named "+(this||p).name;if(void 0===(this||p).createInterpolant)if(u!==(this||p).DefaultInterpolation)this.setInterpolation((this||p).DefaultInterpolation);else throw Error(z);console.warn("THREE.KeyframeTrack:",z);return this||p}(this||p).createInterpolant=z;return this||p},getInterpolation:function(){switch((this||p).createInterpolant){case (this||
p).InterpolantFactoryMethodDiscrete:return 2300;case (this||p).InterpolantFactoryMethodLinear:return 2301;case (this||p).InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return(this||p).values.length/(this||p).times.length},shift:function(u){if(0!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]+=u;return this||p},scale:function(u){if(1!==u)for(var z=(this||p).times,t=0,x=z.length;t!==x;++t)z[t]*=u;return this||p},trim:function(u,z){for(var t=(this||p).times,x=t.length,
C=0,H=x-1;C!==x&&t[C]<u;)++C;for(;-1!==H&&t[H]>z;)--H;++H;if(0!==C||H!==x)C>=H&&(H=Math.max(H,1),C=H-1),u=this.getValueSize(),(this||p).times=Dl.arraySlice(t,C,H),(this||p).values=Dl.arraySlice((this||p).values,C*u,H*u);return this||p},validate:function(){var u=!0,z=this.getValueSize();0!==z-Math.floor(z)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this||p),u=!1);var t=(this||p).times;z=(this||p).values;var x=t.length;0===x&&(console.error("THREE.KeyframeTrack: Track is empty.",
this||p),u=!1);for(var C=null,H=0;H!==x;H++){var N=t[H];if("number"===typeof N&&isNaN(N)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this||p,H,N);u=!1;break}if(null!==C&&C>N){console.error("THREE.KeyframeTrack: Out of order keys.",this||p,H,N,C);u=!1;break}C=N}if(void 0!==z&&Dl.isTypedArray(z))for(t=0,x=z.length;t!==x;++t)if(C=z[t],isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this||p,t,C);u=!1;break}return u},optimize:function(){for(var u=Dl.arraySlice((this||
p).times),z=Dl.arraySlice((this||p).values),t=this.getValueSize(),x=2302===this.getInterpolation(),C=u.length-1,H=1,N=1;N<C;++N){var T=!1,W=u[N];if(W!==u[N+1]&&(1!==N||W!==W[0]))if(x)T=!0;else{W=N*t;for(var Y=W-t,ea=W+t,sa=0;sa!==t;++sa){var Aa=z[W+sa];if(Aa!==z[Y+sa]||Aa!==z[ea+sa]){T=!0;break}}}if(T){if(N!==H)for(u[H]=u[N],T=N*t,W=H*t,Y=0;Y!==t;++Y)z[W+Y]=z[T+Y];++H}}if(0<C){u[H]=u[C];x=C*t;C=H*t;for(N=0;N!==t;++N)z[C+N]=z[x+N];++H}H!==u.length?((this||p).times=Dl.arraySlice(u,0,H),(this||p).values=
Dl.arraySlice(z,0,H*t)):((this||p).times=u,(this||p).values=z);return this||p},clone:function(){var u=Dl.arraySlice((this||p).times,0),z=Dl.arraySlice((this||p).values,0);u=new (this||p).constructor((this||p).name,u,z);u.createInterpolant=(this||p).createInterpolant;return u}});UO.prototype=Object.assign(Object.create(qo.prototype),{constructor:UO,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});VO.prototype=
Object.assign(Object.create(qo.prototype),{constructor:VO,ValueTypeName:"color"});ZE.prototype=Object.assign(Object.create(qo.prototype),{constructor:ZE,ValueTypeName:"number"});WO.prototype=Object.assign(Object.create(Yq.prototype),{constructor:WO,interpolate_:function(u,z,t,x){var C=(this||p).resultBuffer,H=(this||p).sampleValues,N=(this||p).valueSize;z=(t-z)/(x-z);u*=N;for(t=u+N;u!==t;u+=4)Ko.slerpFlat(C,0,H,u-N,H,u,z);return C}});OI.prototype=Object.assign(Object.create(qo.prototype),{constructor:OI,
ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(u){return new WO((this||p).times,(this||p).values,this.getValueSize(),u)},InterpolantFactoryMethodSmooth:void 0});XO.prototype=Object.assign(Object.create(qo.prototype),{constructor:XO,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});$E.prototype=Object.assign(Object.create(qo.prototype),{constructor:$E,ValueTypeName:"vector"});
Object.assign(os,{parse:function(u){for(var z=[],t=u.tracks,x=1/(u.fps||1),C=0,H=t.length;C!==H;++C)z.push(gva(t[C]).scale(x));return new os(u.name,u.duration,z,u.blendMode)},toJSON:function(u){var z=[],t=u.tracks;u={name:u.name,duration:u.duration,tracks:z,uuid:u.uuid,blendMode:u.blendMode};for(var x=0,C=t.length;x!==C;++x)z.push(qo.toJSON(t[x]));return u},CreateFromMorphTargetSequence:function(u,z,t,x){for(var C=z.length,H=[],N=0;N<C;N++){var T=[],W=[];T.push((N+C-1)%C,N,(N+1)%C);W.push(0,1,0);
var Y=Dl.getKeyframeOrder(T);T=Dl.sortedArray(T,1,Y);W=Dl.sortedArray(W,1,Y);x||0!==T[0]||(T.push(C),W.push(W[0]));H.push((new ZE(".morphTargetInfluences["+z[N].name+"]",T,W)).scale(1/t))}return new os(u,-1,H)},findByName:function(u,z){var t=u;Array.isArray(u)||(t=u.geometry&&u.geometry.animations||u.animations);for(u=0;u<t.length;u++)if(t[u].name===z)return t[u];return null},CreateClipsFromMorphTargetSequences:function(u,z,t){for(var x={},C=/^([\w-]*?)([\d]+)$/,H=0,N=u.length;H<N;H++){var T=u[H],
W=T.name.match(C);if(W&&1<W.length){W=W[1];var Y=x[W];Y||(x[W]=Y=[]);Y.push(T)}}u=[];for(var ea in x)u.push(os.CreateFromMorphTargetSequence(ea,x[ea],z,t));return u},parseAnimation:function(u,z){if(!u)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var t=function(sb,ad,Bc,rd,Jc){if(0!==Bc.length){var vd=[],Vc=[];Dl.flattenJSON(Bc,vd,Vc,rd);0!==vd.length&&Jc.push(new sb(ad,vd,Vc))}},x=[],C=u.name||"default",H=u.fps||30,N=u.blendMode,T=u.length||-1;u=u.hierarchy||
[];for(var W=0;W<u.length;W++){var Y=u[W].keys;if(Y&&0!==Y.length)if(Y[0].morphTargets){T={};var ea=void 0;for(ea=0;ea<Y.length;ea++)if(Y[ea].morphTargets)for(var sa=0;sa<Y[ea].morphTargets.length;sa++)T[Y[ea].morphTargets[sa]]=-1;for(var Aa in T){sa=[];for(var Xa=[],Va=0;Va!==Y[ea].morphTargets.length;++Va){var vb=Y[ea];sa.push(vb.time);Xa.push(vb.morphTarget===Aa?1:0)}x.push(new ZE(".morphTargetInfluence["+Aa+"]",sa,Xa))}T=T.length*(H||1)}else ea=".bones["+z[W].name+"]",t($E,ea+".position",Y,"pos",
x),t(OI,ea+".quaternion",Y,"rot",x),t($E,ea+".scale",Y,"scl",x)}return 0===x.length?null:new os(C,T,x,N)}});Object.assign(os.prototype,{resetDuration:function(){for(var u=0,z=0,t=(this||p).tracks.length;z!==t;++z){var x=(this||p).tracks[z];u=Math.max(u,x.times[x.times.length-1])}(this||p).duration=u;return this||p},trim:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].trim(0,(this||p).duration);return this||p},validate:function(){for(var u=!0,z=0;z<(this||p).tracks.length;z++)u=
u&&(this||p).tracks[z].validate();return u},optimize:function(){for(var u=0;u<(this||p).tracks.length;u++)(this||p).tracks[u].optimize();return this||p},clone:function(){for(var u=[],z=0;z<(this||p).tracks.length;z++)u.push((this||p).tracks[z].clone());return new os((this||p).name,(this||p).duration,u,(this||p).blendMode)}});var rC={enabled:!1,files:{},add:function(u,z){!1!==(this||p).enabled&&((this||p).files[u]=z)},get:function(u){if(!1!==(this||p).enabled)return(this||p).files[u]},remove:function(u){delete (this||
p).files[u]},clear:function(){(this||p).files={}}},Cca=new sX;Object.assign(Vk.prototype,{load:function(){},loadAsync:function(u,z){var t=this||p;return new Promise(function(x,C){t.load(u,x,z,C)})},parse:function(){},setCrossOrigin:function(u){(this||p).crossOrigin=u;return this||p},setWithCredentials:function(u){(this||p).withCredentials=u;return this||p},setPath:function(u){(this||p).path=u;return this||p},setResourcePath:function(u){(this||p).resourcePath=u;return this||p},setRequestHeader:function(u){(this||
p).requestHeader=u;return this||p}});var Ot={};ps.prototype=Object.assign(Object.create(Vk.prototype),{constructor:ps,load:function(u,z,t,x){void 0===u&&(u="");void 0!==(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,H=rC.get(u);if(void 0!==H)return C.manager.itemStart(u),setTimeout(function(){z&&z(H);C.manager.itemEnd(u)},0),H;if(void 0!==Ot[u])Ot[u].push({onLoad:z,onProgress:t,onError:x});else{var N=u.match(/^data:(.*?)(;base64)?,(.*)$/);if(N){t=N[1];var T=!!N[2];
N=N[3];N=decodeURIComponent(N);T&&(N=atob(N));try{var W=((this||p).responseType||"").toLowerCase();switch(W){case "arraybuffer":case "blob":var Y=new Uint8Array(N.length);for(T=0;T<N.length;T++)Y[T]=N.charCodeAt(T);var ea="blob"===W?new Blob([Y.buffer],{type:t}):Y.buffer;break;case "document":ea=(new DOMParser).parseFromString(N,t);break;case "json":ea=JSON.parse(N);break;default:ea=N}setTimeout(function(){z&&z(ea);C.manager.itemEnd(u)},0)}catch(Aa){setTimeout(function(){x&&x(Aa);C.manager.itemError(u);
C.manager.itemEnd(u)},0)}}else{Ot[u]=[];Ot[u].push({onLoad:z,onProgress:t,onError:x});var sa=new XMLHttpRequest;sa.open("GET",u,!0);sa.addEventListener("load",function(Aa){var Xa=(this||p).response,Va=Ot[u];delete Ot[u];if(200===(this||p).status||0===(this||p).status){0===(this||p).status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");rC.add(u,Xa);Aa=0;for(var vb=Va.length;Aa<vb;Aa++){var sb=Va[Aa];if(sb.onLoad)sb.onLoad(Xa)}}else{Xa=0;for(vb=Va.length;Xa<vb;Xa++)if(sb=Va[Xa],sb.onError)sb.onError(Aa);
C.manager.itemError(u)}C.manager.itemEnd(u)},!1);sa.addEventListener("progress",function(Aa){for(var Xa=Ot[u],Va=0,vb=Xa.length;Va<vb;Va++){var sb=Xa[Va];if(sb.onProgress)sb.onProgress(Aa)}},!1);sa.addEventListener("error",function(Aa){var Xa=Ot[u];delete Ot[u];for(var Va=0,vb=Xa.length;Va<vb;Va++){var sb=Xa[Va];if(sb.onError)sb.onError(Aa)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);sa.addEventListener("abort",function(Aa){var Xa=Ot[u];delete Ot[u];for(var Va=0,vb=Xa.length;Va<vb;Va++){var sb=
Xa[Va];if(sb.onError)sb.onError(Aa)}C.manager.itemError(u);C.manager.itemEnd(u)},!1);void 0!==(this||p).responseType&&(sa.responseType=(this||p).responseType);void 0!==(this||p).withCredentials&&(sa.withCredentials=(this||p).withCredentials);sa.overrideMimeType&&sa.overrideMimeType(void 0!==(this||p).mimeType?(this||p).mimeType:"text/plain");for(T in(this||p).requestHeader)sa.setRequestHeader(T,(this||p).requestHeader[T]);sa.send(null)}C.manager.itemStart(u);return sa}},setResponseType:function(u){(this||
p).responseType=u;return this||p},setMimeType:function(u){(this||p).mimeType=u;return this||p}});tX.prototype=Object.assign(Object.create(Vk.prototype),{constructor:tX,load:function(u,z,t,x){var C=this||p,H=new ps(C.manager);H.setPath(C.path);H.setRequestHeader(C.requestHeader);H.setWithCredentials(C.withCredentials);H.load(u,function(N){try{z(C.parse(JSON.parse(N)))}catch(T){x?x(T):console.error(T),C.manager.itemError(u)}},t,x)},parse:function(u){for(var z=[],t=0;t<u.length;t++){var x=os.parse(u[t]);
z.push(x)}return z}});uX.prototype=Object.assign(Object.create(Vk.prototype),{constructor:uX,load:function(u,z,t,x){function C(Aa){W.load(u[Aa],function(Xa){Xa=H.parse(Xa,!0);N[Aa]={width:Xa.width,height:Xa.height,format:Xa.format,mipmaps:Xa.mipmaps};Y+=1;6===Y&&(1===Xa.mipmapCount&&(T.minFilter=1006),T.format=Xa.format,T.needsUpdate=!0,z&&z(T))},t,x)}var H=this||p,N=[],T=new WE;T.image=N;var W=new ps((this||p).manager);W.setPath((this||p).path);W.setResponseType("arraybuffer");W.setRequestHeader((this||
p).requestHeader);W.setWithCredentials(H.withCredentials);var Y=0;if(Array.isArray(u))for(var ea=0,sa=u.length;ea<sa;++ea)C(ea);else W.load(u,function(Aa){Aa=H.parse(Aa,!0);if(Aa.isCubemap)for(var Xa=Aa.mipmaps.length/Aa.mipmapCount,Va=0;Va<Xa;Va++){N[Va]={mipmaps:[]};for(var vb=0;vb<Aa.mipmapCount;vb++)N[Va].mipmaps.push(Aa.mipmaps[Va*Aa.mipmapCount+vb]),N[Va].format=Aa.format,N[Va].width=Aa.width,N[Va].height=Aa.height}else T.image.width=Aa.width,T.image.height=Aa.height,T.mipmaps=Aa.mipmaps;1===
Aa.mipmapCount&&(T.minFilter=1006);T.format=Aa.format;T.needsUpdate=!0;z&&z(T)},t,x);return T}});aF.prototype=Object.assign(Object.create(Vk.prototype),{constructor:aF,load:function(u,z,t,x){function C(){W.removeEventListener("load",C,!1);W.removeEventListener("error",H,!1);rC.add(u,this||p);z&&z(this||p);N.manager.itemEnd(u)}function H(Y){W.removeEventListener("load",C,!1);W.removeEventListener("error",H,!1);x&&x(Y);N.manager.itemError(u);N.manager.itemEnd(u)}void 0!==(this||p).path&&(u=(this||p).path+
u);u=(this||p).manager.resolveURL(u);var N=this||p,T=rC.get(u);if(void 0!==T)return N.manager.itemStart(u),setTimeout(function(){z&&z(T);N.manager.itemEnd(u)},0),T;var W=document.createElementNS("http://www.w3.org/1999/xhtml","img");W.addEventListener("load",C,!1);W.addEventListener("error",H,!1);"data:"!==u.substr(0,5)&&void 0!==(this||p).crossOrigin&&(W.crossOrigin=(this||p).crossOrigin);N.manager.itemStart(u);W.src=u;return W}});YO.prototype=Object.assign(Object.create(Vk.prototype),{constructor:YO,
load:function(u,z,t,x){function C(W){N.load(u[W],function(Y){H.images[W]=Y;T++;6===T&&(H.needsUpdate=!0,z&&z(H))},void 0,x)}var H=new oc,N=new aF((this||p).manager);N.setCrossOrigin((this||p).crossOrigin);N.setPath((this||p).path);var T=0;for(t=0;t<u.length;++t)C(t);return H}});ZO.prototype=Object.assign(Object.create(Vk.prototype),{constructor:ZO,load:function(u,z,t,x){var C=this||p,H=new Vb,N=new ps((this||p).manager);N.setResponseType("arraybuffer");N.setRequestHeader((this||p).requestHeader);
N.setPath((this||p).path);N.setWithCredentials(C.withCredentials);N.load(u,function(T){if(T=C.parse(T))void 0!==T.image?H.image=T.image:void 0!==T.data&&(H.image.width=T.width,H.image.height=T.height,H.image.data=T.data),H.wrapS=void 0!==T.wrapS?T.wrapS:1001,H.wrapT=void 0!==T.wrapT?T.wrapT:1001,H.magFilter=void 0!==T.magFilter?T.magFilter:1006,H.minFilter=void 0!==T.minFilter?T.minFilter:1006,H.anisotropy=void 0!==T.anisotropy?T.anisotropy:1,void 0!==T.format&&(H.format=T.format),void 0!==T.type&&
(H.type=T.type),void 0!==T.mipmaps&&(H.mipmaps=T.mipmaps,H.minFilter=1008),1===T.mipmapCount&&(H.minFilter=1006),H.needsUpdate=!0,z&&z(H,T)},t,x);return H}});$O.prototype=Object.assign(Object.create(Vk.prototype),{constructor:$O,load:function(u,z,t,x){var C=new r,H=new aF((this||p).manager);H.setCrossOrigin((this||p).crossOrigin);H.setPath((this||p).path);H.load(u,function(N){C.image=N;N=0<u.search(/\.jpe?g($|\?)/i)||0===u.search(/^data:image\/jpeg/);C.format=N?1022:1023;C.needsUpdate=!0;void 0!==
z&&z(C)},t,x);return C}});Object.assign(sh.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(u,z){u=this.getUtoTmapping(u);return this.getPoint(u,z)},getPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));return z},getSpacedPoints:function(u){void 0===u&&(u=5);for(var z=[],t=0;t<=u;t++)z.push(this.getPointAt(t/u));return z},getLength:function(){var u=this.getLengths();return u[u.length-1]},
getLengths:function(u){void 0===u&&(u=(this||p).arcLengthDivisions);if((this||p).cacheArcLengths&&(this||p).cacheArcLengths.length===u+1&&!(this||p).needsUpdate)return(this||p).cacheArcLengths;(this||p).needsUpdate=!1;var z=[],t=this.getPoint(0),x=0;z.push(0);for(var C=1;C<=u;C++){var H=this.getPoint(C/u);x+=H.distanceTo(t);z.push(x);t=H}return(this||p).cacheArcLengths=z},updateArcLengths:function(){(this||p).needsUpdate=!0;this.getLengths()},getUtoTmapping:function(u,z){var t=this.getLengths(),x=
t.length;z=z?z:u*t[x-1];for(var C=0,H=x-1,N;C<=H;)if(u=Math.floor(C+(H-C)/2),N=t[u]-z,0>N)C=u+1;else if(0<N)H=u-1;else{H=u;break}u=H;if(t[u]===z)return u/(x-1);C=t[u];return(u+(z-C)/(t[u+1]-C))/(x-1)},getTangent:function(u,z){var t=u-1E-4;u+=1E-4;0>t&&(t=0);1<u&&(u=1);t=this.getPoint(t);u=this.getPoint(u);z=z||(t.isVector2?new cf:new wc);z.copy(u).sub(t).normalize();return z},getTangentAt:function(u,z){u=this.getUtoTmapping(u);return this.getTangent(u,z)},computeFrenetFrames:function(u,z){for(var t=
new wc,x=[],C=[],H=[],N=new wc,T=new uj,W=0;W<=u;W++)x[W]=this.getTangentAt(W/u,new wc),x[W].normalize();C[0]=new wc;H[0]=new wc;W=Number.MAX_VALUE;var Y=Math.abs(x[0].x),ea=Math.abs(x[0].y),sa=Math.abs(x[0].z);Y<=W&&(W=Y,t.set(1,0,0));ea<=W&&(W=ea,t.set(0,1,0));sa<=W&&t.set(0,0,1);N.crossVectors(x[0],t).normalize();C[0].crossVectors(x[0],N);H[0].crossVectors(x[0],C[0]);for(t=1;t<=u;t++)C[t]=C[t-1].clone(),H[t]=H[t-1].clone(),N.crossVectors(x[t-1],x[t]),N.length()>Number.EPSILON&&(N.normalize(),W=
Math.acos(ti.clamp(x[t-1].dot(x[t]),-1,1)),C[t].applyMatrix4(T.makeRotationAxis(N,W))),H[t].crossVectors(x[t],C[t]);if(!0===z)for(z=Math.acos(ti.clamp(C[0].dot(C[u]),-1,1)),z/=u,0<x[0].dot(N.crossVectors(C[0],C[u]))&&(z=-z),N=1;N<=u;N++)C[N].applyMatrix4(T.makeRotationAxis(x[N],z*N)),H[N].crossVectors(x[N],C[N]);return{tangents:x,normals:C,binormals:H}},clone:function(){return(new (this||p).constructor).copy(this||p)},copy:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||
p},toJSON:function(){var u={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};u.arcLengthDivisions=(this||p).arcLengthDivisions;u.type=(this||p).type;return u},fromJSON:function(u){(this||p).arcLengthDivisions=u.arcLengthDivisions;return this||p}});Zq.prototype=Object.create(sh.prototype);Zq.prototype.constructor=Zq;Zq.prototype.isEllipseCurve=!0;Zq.prototype.getPoint=function(u,z){z=z||new cf;for(var t=2*Math.PI,x=(this||p).aEndAngle-(this||p).aStartAngle,C=Math.abs(x)<Number.EPSILON;0>
x;)x+=t;for(;x>t;)x-=t;x<Number.EPSILON&&(x=C?0:t);!0!==(this||p).aClockwise||C||(x=x===t?-t:x-t);t=(this||p).aStartAngle+u*x;u=(this||p).aX+(this||p).xRadius*Math.cos(t);var H=(this||p).aY+(this||p).yRadius*Math.sin(t);0!==(this||p).aRotation&&(t=Math.cos((this||p).aRotation),x=Math.sin((this||p).aRotation),C=u-(this||p).aX,H-=(this||p).aY,u=C*t-H*x+(this||p).aX,H=C*x+H*t+(this||p).aY);return z.set(u,H)};Zq.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=
u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};Zq.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.aX=(this||p).aX;u.aY=(this||p).aY;u.xRadius=(this||p).xRadius;u.yRadius=(this||p).yRadius;u.aStartAngle=(this||p).aStartAngle;u.aEndAngle=(this||p).aEndAngle;u.aClockwise=(this||p).aClockwise;u.aRotation=(this||p).aRotation;
return u};Zq.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).aX=u.aX;(this||p).aY=u.aY;(this||p).xRadius=u.xRadius;(this||p).yRadius=u.yRadius;(this||p).aStartAngle=u.aStartAngle;(this||p).aEndAngle=u.aEndAngle;(this||p).aClockwise=u.aClockwise;(this||p).aRotation=u.aRotation;return this||p};bF.prototype=Object.create(Zq.prototype);bF.prototype.constructor=bF;bF.prototype.isArcCurve=!0;var JP=new wc,uY=new vX,vY=new vX,wY=new vX;Lo.prototype=Object.create(sh.prototype);
Lo.prototype.constructor=Lo;Lo.prototype.isCatmullRomCurve3=!0;Lo.prototype.getPoint=function(u,z){z=z||new wc;var t=(this||p).points,x=t.length;u*=x-((this||p).closed?0:1);var C=Math.floor(u);u-=C;(this||p).closed?C+=0<C?0:(Math.floor(Math.abs(C)/x)+1)*x:0===u&&C===x-1&&(C=x-2,u=1);if((this||p).closed||0<C)var H=t[(C-1)%x];else JP.subVectors(t[0],t[1]).add(t[0]),H=JP;var N=t[C%x],T=t[(C+1)%x];(this||p).closed||C+2<x?t=t[(C+2)%x]:(JP.subVectors(t[x-1],t[x-2]).add(t[x-1]),t=JP);if("centripetal"===
(this||p).curveType||"chordal"===(this||p).curveType){var W="chordal"===(this||p).curveType?.5:.25;x=Math.pow(H.distanceToSquared(N),W);C=Math.pow(N.distanceToSquared(T),W);W=Math.pow(T.distanceToSquared(t),W);1E-4>C&&(C=1);1E-4>x&&(x=C);1E-4>W&&(W=C);uY.initNonuniformCatmullRom(H.x,N.x,T.x,t.x,x,C,W);vY.initNonuniformCatmullRom(H.y,N.y,T.y,t.y,x,C,W);wY.initNonuniformCatmullRom(H.z,N.z,T.z,t.z,x,C,W)}else"catmullrom"===(this||p).curveType&&(uY.initCatmullRom(H.x,N.x,T.x,t.x,(this||p).tension),vY.initCatmullRom(H.y,
N.y,T.y,t.y,(this||p).tension),wY.initCatmullRom(H.z,N.z,T.z,t.z,(this||p).tension));z.set(uY.calc(u),vY.calc(u),wY.calc(u));return z};Lo.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};Lo.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||
p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());u.closed=(this||p).closed;u.curveType=(this||p).curveType;u.tension=(this||p).tension;return u};Lo.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new wc).fromArray(x))}(this||p).closed=u.closed;(this||p).curveType=u.curveType;(this||p).tension=u.tension;return this||p};It.prototype=Object.create(sh.prototype);
It.prototype.constructor=It;It.prototype.isCubicBezierCurve=!0;It.prototype.getPoint=function(u,z){z=z||new cf;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,H=(this||p).v3;z.set(QI(u,t.x,x.x,C.x,H.x),QI(u,t.y,x.y,C.y,H.y));return z};It.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};It.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();
u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};It.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};Iv.prototype=Object.create(sh.prototype);Iv.prototype.constructor=Iv;Iv.prototype.isCubicBezierCurve3=!0;Iv.prototype.getPoint=function(u,z){z=z||new wc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2,H=
(this||p).v3;z.set(QI(u,t.x,x.x,C.x,H.x),QI(u,t.y,x.y,C.y,H.y),QI(u,t.z,x.z,C.z,H.z));return z};Iv.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);(this||p).v3.copy(u.v3);return this||p};Iv.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();u.v3=(this||p).v3.toArray();return u};Iv.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||
p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);(this||p).v3.fromArray(u.v3);return this||p};gq.prototype=Object.create(sh.prototype);gq.prototype.constructor=gq;gq.prototype.isLineCurve=!0;gq.prototype.getPoint=function(u,z){z=z||new cf;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};gq.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};gq.prototype.getTangent=function(u,z){u=
z||new cf;u.copy((this||p).v2).sub((this||p).v1).normalize();return u};gq.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};gq.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};gq.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Jt.prototype=Object.create(sh.prototype);
Jt.prototype.constructor=Jt;Jt.prototype.isLineCurve3=!0;Jt.prototype.getPoint=function(u,z){z=z||new wc;1===u?z.copy((this||p).v2):(z.copy((this||p).v2).sub((this||p).v1),z.multiplyScalar(u).add((this||p).v1));return z};Jt.prototype.getPointAt=function(u,z){return this.getPoint(u,z)};Jt.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Jt.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v1=(this||p).v1.toArray();
u.v2=(this||p).v2.toArray();return u};Jt.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Kt.prototype=Object.create(sh.prototype);Kt.prototype.constructor=Kt;Kt.prototype.isQuadraticBezierCurve=!0;Kt.prototype.getPoint=function(u,z){z=z||new cf;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(PI(u,t.x,x.x,C.x),PI(u,t.y,x.y,C.y));return z};Kt.prototype.copy=function(u){sh.prototype.copy.call(this||
p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Kt.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();return u};Kt.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Jv.prototype=Object.create(sh.prototype);Jv.prototype.constructor=Jv;
Jv.prototype.isQuadraticBezierCurve3=!0;Jv.prototype.getPoint=function(u,z){z=z||new wc;var t=(this||p).v0,x=(this||p).v1,C=(this||p).v2;z.set(PI(u,t.x,x.x,C.x),PI(u,t.y,x.y,C.y),PI(u,t.z,x.z,C.z));return z};Jv.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).v0.copy(u.v0);(this||p).v1.copy(u.v1);(this||p).v2.copy(u.v2);return this||p};Jv.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.v0=(this||p).v0.toArray();u.v1=(this||p).v1.toArray();u.v2=(this||p).v2.toArray();
return u};Jv.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).v0.fromArray(u.v0);(this||p).v1.fromArray(u.v1);(this||p).v2.fromArray(u.v2);return this||p};Lt.prototype=Object.create(sh.prototype);Lt.prototype.constructor=Lt;Lt.prototype.isSplineCurve=!0;Lt.prototype.getPoint=function(u,z){z=z||new cf;var t=(this||p).points,x=(t.length-1)*u;u=Math.floor(x);x-=u;var C=t[0===u?u:u-1],H=t[u],N=t[u>t.length-2?t.length-1:u+1];t=t[u>t.length-3?t.length-1:u+2];z.set(Dca(x,C.x,
H.x,N.x,t.x),Dca(x,C.y,H.y,N.y,t.y));return z};Lt.prototype.copy=function(u){sh.prototype.copy.call(this||p,u);(this||p).points=[];for(var z=0,t=u.points.length;z<t;z++)(this||p).points.push(u.points[z].clone());return this||p};Lt.prototype.toJSON=function(){var u=sh.prototype.toJSON.call(this||p);u.points=[];for(var z=0,t=(this||p).points.length;z<t;z++)u.points.push((this||p).points[z].toArray());return u};Lt.prototype.fromJSON=function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).points=
[];for(var z=0,t=u.points.length;z<t;z++){var x=u.points[z];(this||p).points.push((new cf).fromArray(x))}return this||p};var xY=Object.freeze({__proto__:null,ArcCurve:bF,CatmullRomCurve3:Lo,CubicBezierCurve:It,CubicBezierCurve3:Iv,EllipseCurve:Zq,LineCurve:gq,LineCurve3:Jt,QuadraticBezierCurve:Kt,QuadraticBezierCurve3:Jv,SplineCurve:Lt});nx.prototype=Object.assign(Object.create(sh.prototype),{constructor:nx,add:function(u){(this||p).curves.push(u)},closePath:function(){var u=(this||p).curves[0].getPoint(0),
z=(this||p).curves[(this||p).curves.length-1].getPoint(1);u.equals(z)||(this||p).curves.push(new gq(z,u))},getPoint:function(u){var z=u*this.getLength(),t=this.getCurveLengths();for(u=0;u<t.length;){if(t[u]>=z)return z=t[u]-z,u=(this||p).curves[u],t=u.getLength(),u.getPointAt(0===t?0:1-z/t);u++}return null},getLength:function(){var u=this.getCurveLengths();return u[u.length-1]},updateArcLengths:function(){(this||p).needsUpdate=!0;(this||p).cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if((this||
p).cacheLengths&&(this||p).cacheLengths.length===(this||p).curves.length)return(this||p).cacheLengths;for(var u=[],z=0,t=0,x=(this||p).curves.length;t<x;t++)z+=(this||p).curves[t].getLength(),u.push(z);return(this||p).cacheLengths=u},getSpacedPoints:function(u){void 0===u&&(u=40);for(var z=[],t=0;t<=u;t++)z.push(this.getPoint(t/u));(this||p).autoClose&&z.push(z[0]);return z},getPoints:function(u){u=u||12;for(var z=[],t,x=0,C=(this||p).curves;x<C.length;x++){var H=C[x];H=H.getPoints(H&&H.isEllipseCurve?
2*u:H&&(H.isLineCurve||H.isLineCurve3)?1:H&&H.isSplineCurve?u*H.points.length:u);for(var N=0;N<H.length;N++){var T=H[N];t&&t.equals(T)||(z.push(T),t=T)}}(this||p).autoClose&&1<z.length&&!z[z.length-1].equals(z[0])&&z.push(z[0]);return z},copy:function(u){sh.prototype.copy.call(this||p,u);(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++)(this||p).curves.push(u.curves[z].clone());(this||p).autoClose=u.autoClose;return this||p},toJSON:function(){var u=sh.prototype.toJSON.call(this||p);u.autoClose=
(this||p).autoClose;u.curves=[];for(var z=0,t=(this||p).curves.length;z<t;z++)u.curves.push((this||p).curves[z].toJSON());return u},fromJSON:function(u){sh.prototype.fromJSON.call(this||p,u);(this||p).autoClose=u.autoClose;(this||p).curves=[];for(var z=0,t=u.curves.length;z<t;z++){var x=u.curves[z];(this||p).curves.push((new xY[x.type]).fromJSON(x))}return this||p}});Mt.prototype=Object.assign(Object.create(nx.prototype),{constructor:Mt,setFromPoints:function(u){this.moveTo(u[0].x,u[0].y);for(var z=
1,t=u.length;z<t;z++)this.lineTo(u[z].x,u[z].y);return this||p},moveTo:function(u,z){(this||p).currentPoint.set(u,z);return this||p},lineTo:function(u,z){var t=new gq((this||p).currentPoint.clone(),new cf(u,z));(this||p).curves.push(t);(this||p).currentPoint.set(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){u=new Kt((this||p).currentPoint.clone(),new cf(u,z),new cf(t,x));(this||p).curves.push(u);(this||p).currentPoint.set(t,x);return this||p},bezierCurveTo:function(u,z,t,x,C,H){u=new It((this||
p).currentPoint.clone(),new cf(u,z),new cf(t,x),new cf(C,H));(this||p).curves.push(u);(this||p).currentPoint.set(C,H);return this||p},splineThru:function(u){var z=[(this||p).currentPoint.clone()].concat(u);z=new Lt(z);(this||p).curves.push(z);(this||p).currentPoint.copy(u[u.length-1]);return this||p},arc:function(u,z,t,x,C,H){this.absarc(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,H);return this||p},absarc:function(u,z,t,x,C,H){this.absellipse(u,z,t,t,x,C,H);return this||p},ellipse:function(u,
z,t,x,C,H,N,T){this.absellipse(u+(this||p).currentPoint.x,z+(this||p).currentPoint.y,t,x,C,H,N,T);return this||p},absellipse:function(u,z,t,x,C,H,N,T){u=new Zq(u,z,t,x,C,H,N,T);0<(this||p).curves.length&&(z=u.getPoint(0),z.equals((this||p).currentPoint)||this.lineTo(z.x,z.y));(this||p).curves.push(u);u=u.getPoint(1);(this||p).currentPoint.copy(u);return this||p},copy:function(u){nx.prototype.copy.call(this||p,u);(this||p).currentPoint.copy(u.currentPoint);return this||p},toJSON:function(){var u=nx.prototype.toJSON.call(this||
p);u.currentPoint=(this||p).currentPoint.toArray();return u},fromJSON:function(u){nx.prototype.fromJSON.call(this||p,u);(this||p).currentPoint.fromArray(u.currentPoint);return this||p}});Lz.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Lz,getPointsHoles:function(u){for(var z=[],t=0,x=(this||p).holes.length;t<x;t++)z[t]=(this||p).holes[t].getPoints(u);return z},extractPoints:function(u){return{shape:this.getPoints(u),holes:this.getPointsHoles(u)}},copy:function(u){Mt.prototype.copy.call(this||
p,u);(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++)(this||p).holes.push(u.holes[z].clone());return this||p},toJSON:function(){var u=Mt.prototype.toJSON.call(this||p);u.uuid=(this||p).uuid;u.holes=[];for(var z=0,t=(this||p).holes.length;z<t;z++)u.holes.push((this||p).holes[z].toJSON());return u},fromJSON:function(u){Mt.prototype.fromJSON.call(this||p,u);(this||p).uuid=u.uuid;(this||p).holes=[];for(var z=0,t=u.holes.length;z<t;z++){var x=u.holes[z];(this||p).holes.push((new Mt).fromJSON(x))}return this||
p}});sl.prototype=Object.assign(Object.create(E.prototype),{constructor:sl,isLight:!0,copy:function(u){E.prototype.copy.call(this||p,u);(this||p).color.copy(u.color);(this||p).intensity=u.intensity;return this||p},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.color=(this||p).color.getHex();u.object.intensity=(this||p).intensity;void 0!==(this||p).groundColor&&(u.object.groundColor=(this||p).groundColor.getHex());void 0!==(this||p).distance&&(u.object.distance=(this||p).distance);
void 0!==(this||p).angle&&(u.object.angle=(this||p).angle);void 0!==(this||p).decay&&(u.object.decay=(this||p).decay);void 0!==(this||p).penumbra&&(u.object.penumbra=(this||p).penumbra);void 0!==(this||p).shadow&&(u.object.shadow=(this||p).shadow.toJSON());return u}});aP.prototype=Object.assign(Object.create(sl.prototype),{constructor:aP,isHemisphereLight:!0,copy:function(u){sl.prototype.copy.call(this||p,u);(this||p).groundColor.copy(u.groundColor);return this||p}});Object.assign(ox.prototype,{_projScreenMatrix:new uj,
_lightPositionWorld:new wc,_lookTarget:new wc,getViewportCount:function(){return(this||p)._viewportCount},getFrustum:function(){return(this||p)._frustum},updateMatrices:function(u){var z=(this||p).camera,t=(this||p).matrix,x=(this||p)._projScreenMatrix,C=(this||p)._lookTarget,H=(this||p)._lightPositionWorld;H.setFromMatrixPosition(u.matrixWorld);z.position.copy(H);C.setFromMatrixPosition(u.target.matrixWorld);z.lookAt(C);z.updateMatrixWorld();x.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse);
(this||p)._frustum.setFromProjectionMatrix(x);t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);t.multiply(z.projectionMatrix);t.multiply(z.matrixWorldInverse)},getViewport:function(u){return(this||p)._viewports[u]},getFrameExtents:function(){return(this||p)._frameExtents},copy:function(u){(this||p).camera=u.camera.clone();(this||p).bias=u.bias;(this||p).radius=u.radius;(this||p).mapSize.copy(u.mapSize);return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=
{};0!==(this||p).bias&&(u.bias=(this||p).bias);0!==(this||p).normalBias&&(u.normalBias=(this||p).normalBias);1!==(this||p).radius&&(u.radius=(this||p).radius);if(512!==(this||p).mapSize.x||512!==(this||p).mapSize.y)u.mapSize=(this||p).mapSize.toArray();u.camera=(this||p).camera.toJSON(!1).object;delete u.camera.matrix;return u}});wX.prototype=Object.assign(Object.create(ox.prototype),{constructor:wX,isSpotLightShadow:!0,updateMatrices:function(u){var z=(this||p).camera,t=2*ti.RAD2DEG*u.angle*(this||
p).focus,x=(this||p).mapSize.width/(this||p).mapSize.height,C=u.distance||z.far;if(t!==z.fov||x!==z.aspect||C!==z.far)z.fov=t,z.aspect=x,z.far=C,z.updateProjectionMatrix();ox.prototype.updateMatrices.call(this||p,u)}});bP.prototype=Object.assign(Object.create(sl.prototype),{constructor:bP,isSpotLight:!0,copy:function(u){sl.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).angle=u.angle;(this||p).penumbra=u.penumbra;(this||p).decay=u.decay;(this||p).target=u.target.clone();(this||
p).shadow=u.shadow.clone();return this||p}});xX.prototype=Object.assign(Object.create(ox.prototype),{constructor:xX,isPointLightShadow:!0,updateMatrices:function(u,z){void 0===z&&(z=0);var t=(this||p).camera,x=(this||p).matrix,C=(this||p)._lightPositionWorld,H=(this||p)._lookTarget,N=(this||p)._projScreenMatrix;C.setFromMatrixPosition(u.matrixWorld);t.position.copy(C);H.copy(t.position);H.add((this||p)._cubeDirections[z]);t.up.copy((this||p)._cubeUps[z]);t.lookAt(H);t.updateMatrixWorld();x.makeTranslation(-C.x,
-C.y,-C.z);N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);(this||p)._frustum.setFromProjectionMatrix(N)}});cP.prototype=Object.assign(Object.create(sl.prototype),{constructor:cP,isPointLight:!0,copy:function(u){sl.prototype.copy.call(this||p,u);(this||p).distance=u.distance;(this||p).decay=u.decay;(this||p).shadow=u.shadow.clone();return this||p}});cF.prototype=Object.assign(Object.create(Lb.prototype),{constructor:cF,isOrthographicCamera:!0,copy:function(u,z){Lb.prototype.copy.call(this||
p,u,z);(this||p).left=u.left;(this||p).right=u.right;(this||p).top=u.top;(this||p).bottom=u.bottom;(this||p).near=u.near;(this||p).far=u.far;(this||p).zoom=u.zoom;(this||p).view=null===u.view?null:Object.assign({},u.view);return this||p},setViewOffset:function(u,z,t,x,C,H){null===(this||p).view&&((this||p).view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});(this||p).view.enabled=!0;(this||p).view.fullWidth=u;(this||p).view.fullHeight=z;(this||p).view.offsetX=t;(this||
p).view.offsetY=x;(this||p).view.width=C;(this||p).view.height=H;this.updateProjectionMatrix()},clearViewOffset:function(){null!==(this||p).view&&((this||p).view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var u=((this||p).right-(this||p).left)/(2*(this||p).zoom),z=((this||p).top-(this||p).bottom)/(2*(this||p).zoom),t=((this||p).right+(this||p).left)/2,x=((this||p).top+(this||p).bottom)/2,C=t-u;t+=u;u=x+z;z=x-z;null!==(this||p).view&&(this||p).view.enabled&&(x=((this||
p).right-(this||p).left)/(this||p).view.fullWidth/(this||p).zoom,z=((this||p).top-(this||p).bottom)/(this||p).view.fullHeight/(this||p).zoom,C+=x*(this||p).view.offsetX,t=C+x*(this||p).view.width,u-=z*(this||p).view.offsetY,z=u-z*(this||p).view.height);(this||p).projectionMatrix.makeOrthographic(C,t,u,z,(this||p).near,(this||p).far);(this||p).projectionMatrixInverse.getInverse((this||p).projectionMatrix)},toJSON:function(u){u=E.prototype.toJSON.call(this||p,u);u.object.zoom=(this||p).zoom;u.object.left=
(this||p).left;u.object.right=(this||p).right;u.object.top=(this||p).top;u.object.bottom=(this||p).bottom;u.object.near=(this||p).near;u.object.far=(this||p).far;null!==(this||p).view&&(u.object.view=Object.assign({},(this||p).view));return u}});yX.prototype=Object.assign(Object.create(ox.prototype),{constructor:yX,isDirectionalLightShadow:!0,updateMatrices:function(u){ox.prototype.updateMatrices.call(this||p,u)}});dP.prototype=Object.assign(Object.create(sl.prototype),{constructor:dP,isDirectionalLight:!0,
copy:function(u){sl.prototype.copy.call(this||p,u);(this||p).target=u.target.clone();(this||p).shadow=u.shadow.clone();return this||p}});eP.prototype=Object.assign(Object.create(sl.prototype),{constructor:eP,isAmbientLight:!0});fP.prototype=Object.assign(Object.create(sl.prototype),{constructor:fP,isRectAreaLight:!0,copy:function(u){sl.prototype.copy.call(this||p,u);(this||p).width=u.width;(this||p).height=u.height;return this||p},toJSON:function(u){u=sl.prototype.toJSON.call(this||p,u);u.object.width=
(this||p).width;u.object.height=(this||p).height;return u}});var Eca=function(){function u(){Object.defineProperty(this||p,"isSphericalHarmonics3",{value:!0});(this||p).coefficients=[];for(var t=0;9>t;t++)(this||p).coefficients.push(new wc)}var z=u.prototype;z.set=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].copy(t[x]);return this||p};z.zero=function(){for(var t=0;9>t;t++)(this||p).coefficients[t].set(0,0,0);return this||p};z.getAt=function(t,x){var C=t.x,H=t.y;t=t.z;var N=(this||p).coefficients;
x.copy(N[0]).multiplyScalar(.282095);x.addScaledVector(N[1],.488603*H);x.addScaledVector(N[2],.488603*t);x.addScaledVector(N[3],.488603*C);x.addScaledVector(N[4],1.092548*C*H);x.addScaledVector(N[5],1.092548*H*t);x.addScaledVector(N[6],.315392*(3*t*t-1));x.addScaledVector(N[7],1.092548*C*t);x.addScaledVector(N[8],.546274*(C*C-H*H));return x};z.getIrradianceAt=function(t,x){var C=t.x,H=t.y;t=t.z;var N=(this||p).coefficients;x.copy(N[0]).multiplyScalar(.886227);x.addScaledVector(N[1],1.023328*H);x.addScaledVector(N[2],
1.023328*t);x.addScaledVector(N[3],1.023328*C);x.addScaledVector(N[4],.858086*C*H);x.addScaledVector(N[5],.858086*H*t);x.addScaledVector(N[6],.743125*t*t-.247708);x.addScaledVector(N[7],.858086*C*t);x.addScaledVector(N[8],.429043*(C*C-H*H));return x};z.add=function(t){for(var x=0;9>x;x++)(this||p).coefficients[x].add(t.coefficients[x]);return this||p};z.addScaledSH=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].addScaledVector(t.coefficients[C],x);return this||p};z.scale=function(t){for(var x=
0;9>x;x++)(this||p).coefficients[x].multiplyScalar(t);return this||p};z.lerp=function(t,x){for(var C=0;9>C;C++)(this||p).coefficients[C].lerp(t.coefficients[C],x);return this||p};z.equals=function(t){for(var x=0;9>x;x++)if(!(this||p).coefficients[x].equals(t.coefficients[x]))return!1;return!0};z.copy=function(t){return this.set(t.coefficients)};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.fromArray=function(t,x){void 0===x&&(x=0);for(var C=(this||p).coefficients,H=0;9>H;H++)C[H].fromArray(t,
x+3*H);return this||p};z.toArray=function(t,x){void 0===t&&(t=[]);void 0===x&&(x=0);for(var C=(this||p).coefficients,H=0;9>H;H++)C[H].toArray(t,x+3*H);return t};u.getBasisAt=function(t,x){var C=t.x,H=t.y;t=t.z;x[0]=.282095;x[1]=.488603*H;x[2]=.488603*t;x[3]=.488603*C;x[4]=1.092548*C*H;x[5]=1.092548*H*t;x[6]=.315392*(3*t*t-1);x[7]=1.092548*C*t;x[8]=.546274*(C*C-H*H)};return u}();qs.prototype=Object.assign(Object.create(sl.prototype),{constructor:qs,isLightProbe:!0,copy:function(u){sl.prototype.copy.call(this||
p,u);(this||p).sh.copy(u.sh);return this||p},fromJSON:function(u){(this||p).intensity=u.intensity;(this||p).sh.fromArray(u.sh);return this||p},toJSON:function(u){u=sl.prototype.toJSON.call(this||p,u);u.object.sh=(this||p).sh.toArray();return u}});gP.prototype=Object.assign(Object.create(Vk.prototype),{constructor:gP,load:function(u,z,t,x){var C=this||p,H=new ps(C.manager);H.setPath(C.path);H.setRequestHeader(C.requestHeader);H.setWithCredentials(C.withCredentials);H.load(u,function(N){try{z(C.parse(JSON.parse(N)))}catch(T){x?
x(T):console.error(T),C.manager.itemError(u)}},t,x)},parse:function(u){function z(T){void 0===t[T]&&console.warn("THREE.MaterialLoader: Undefined texture",T);return t[T]}var t=(this||p).textures,x=new uva[u.type];void 0!==u.uuid&&(x.uuid=u.uuid);void 0!==u.name&&(x.name=u.name);void 0!==u.color&&x.color.setHex(u.color);void 0!==u.roughness&&(x.roughness=u.roughness);void 0!==u.metalness&&(x.metalness=u.metalness);void 0!==u.sheen&&(x.sheen=(new Hg).setHex(u.sheen));void 0!==u.emissive&&x.emissive.setHex(u.emissive);
void 0!==u.specular&&x.specular.setHex(u.specular);void 0!==u.shininess&&(x.shininess=u.shininess);void 0!==u.clearcoat&&(x.clearcoat=u.clearcoat);void 0!==u.clearcoatRoughness&&(x.clearcoatRoughness=u.clearcoatRoughness);void 0!==u.fog&&(x.fog=u.fog);void 0!==u.flatShading&&(x.flatShading=u.flatShading);void 0!==u.blending&&(x.blending=u.blending);void 0!==u.combine&&(x.combine=u.combine);void 0!==u.side&&(x.side=u.side);void 0!==u.opacity&&(x.opacity=u.opacity);void 0!==u.transparent&&(x.transparent=
u.transparent);void 0!==u.alphaTest&&(x.alphaTest=u.alphaTest);void 0!==u.depthTest&&(x.depthTest=u.depthTest);void 0!==u.depthWrite&&(x.depthWrite=u.depthWrite);void 0!==u.colorWrite&&(x.colorWrite=u.colorWrite);void 0!==u.stencilWrite&&(x.stencilWrite=u.stencilWrite);void 0!==u.stencilWriteMask&&(x.stencilWriteMask=u.stencilWriteMask);void 0!==u.stencilFunc&&(x.stencilFunc=u.stencilFunc);void 0!==u.stencilRef&&(x.stencilRef=u.stencilRef);void 0!==u.stencilFuncMask&&(x.stencilFuncMask=u.stencilFuncMask);
void 0!==u.stencilFail&&(x.stencilFail=u.stencilFail);void 0!==u.stencilZFail&&(x.stencilZFail=u.stencilZFail);void 0!==u.stencilZPass&&(x.stencilZPass=u.stencilZPass);void 0!==u.wireframe&&(x.wireframe=u.wireframe);void 0!==u.wireframeLinewidth&&(x.wireframeLinewidth=u.wireframeLinewidth);void 0!==u.wireframeLinecap&&(x.wireframeLinecap=u.wireframeLinecap);void 0!==u.wireframeLinejoin&&(x.wireframeLinejoin=u.wireframeLinejoin);void 0!==u.rotation&&(x.rotation=u.rotation);1!==u.linewidth&&(x.linewidth=
u.linewidth);void 0!==u.dashSize&&(x.dashSize=u.dashSize);void 0!==u.gapSize&&(x.gapSize=u.gapSize);void 0!==u.scale&&(x.scale=u.scale);void 0!==u.polygonOffset&&(x.polygonOffset=u.polygonOffset);void 0!==u.polygonOffsetFactor&&(x.polygonOffsetFactor=u.polygonOffsetFactor);void 0!==u.polygonOffsetUnits&&(x.polygonOffsetUnits=u.polygonOffsetUnits);void 0!==u.skinning&&(x.skinning=u.skinning);void 0!==u.morphTargets&&(x.morphTargets=u.morphTargets);void 0!==u.morphNormals&&(x.morphNormals=u.morphNormals);
void 0!==u.dithering&&(x.dithering=u.dithering);void 0!==u.vertexTangents&&(x.vertexTangents=u.vertexTangents);void 0!==u.visible&&(x.visible=u.visible);void 0!==u.toneMapped&&(x.toneMapped=u.toneMapped);void 0!==u.userData&&(x.userData=u.userData);void 0!==u.vertexColors&&(x.vertexColors="number"===typeof u.vertexColors?0<u.vertexColors?!0:!1:u.vertexColors);if(void 0!==u.uniforms)for(var C in u.uniforms){var H=u.uniforms[C];x.uniforms[C]={};switch(H.type){case "t":x.uniforms[C].value=z(H.value);
break;case "c":x.uniforms[C].value=(new Hg).setHex(H.value);break;case "v2":x.uniforms[C].value=(new cf).fromArray(H.value);break;case "v3":x.uniforms[C].value=(new wc).fromArray(H.value);break;case "v4":x.uniforms[C].value=(new $k).fromArray(H.value);break;case "m3":x.uniforms[C].value=(new tp).fromArray(H.value);break;case "m4":x.uniforms[C].value=(new uj).fromArray(H.value);break;default:x.uniforms[C].value=H.value}}void 0!==u.defines&&(x.defines=u.defines);void 0!==u.vertexShader&&(x.vertexShader=
u.vertexShader);void 0!==u.fragmentShader&&(x.fragmentShader=u.fragmentShader);if(void 0!==u.extensions)for(var N in u.extensions)x.extensions[N]=u.extensions[N];void 0!==u.shading&&(x.flatShading=1===u.shading);void 0!==u.size&&(x.size=u.size);void 0!==u.sizeAttenuation&&(x.sizeAttenuation=u.sizeAttenuation);void 0!==u.map&&(x.map=z(u.map));void 0!==u.matcap&&(x.matcap=z(u.matcap));void 0!==u.alphaMap&&(x.alphaMap=z(u.alphaMap));void 0!==u.bumpMap&&(x.bumpMap=z(u.bumpMap));void 0!==u.bumpScale&&
(x.bumpScale=u.bumpScale);void 0!==u.normalMap&&(x.normalMap=z(u.normalMap));void 0!==u.normalMapType&&(x.normalMapType=u.normalMapType);void 0!==u.normalScale&&(C=u.normalScale,!1===Array.isArray(C)&&(C=[C,C]),x.normalScale=(new cf).fromArray(C));void 0!==u.displacementMap&&(x.displacementMap=z(u.displacementMap));void 0!==u.displacementScale&&(x.displacementScale=u.displacementScale);void 0!==u.displacementBias&&(x.displacementBias=u.displacementBias);void 0!==u.roughnessMap&&(x.roughnessMap=z(u.roughnessMap));
void 0!==u.metalnessMap&&(x.metalnessMap=z(u.metalnessMap));void 0!==u.emissiveMap&&(x.emissiveMap=z(u.emissiveMap));void 0!==u.emissiveIntensity&&(x.emissiveIntensity=u.emissiveIntensity);void 0!==u.specularMap&&(x.specularMap=z(u.specularMap));void 0!==u.envMap&&(x.envMap=z(u.envMap));void 0!==u.envMapIntensity&&(x.envMapIntensity=u.envMapIntensity);void 0!==u.reflectivity&&(x.reflectivity=u.reflectivity);void 0!==u.refractionRatio&&(x.refractionRatio=u.refractionRatio);void 0!==u.lightMap&&(x.lightMap=
z(u.lightMap));void 0!==u.lightMapIntensity&&(x.lightMapIntensity=u.lightMapIntensity);void 0!==u.aoMap&&(x.aoMap=z(u.aoMap));void 0!==u.aoMapIntensity&&(x.aoMapIntensity=u.aoMapIntensity);void 0!==u.gradientMap&&(x.gradientMap=z(u.gradientMap));void 0!==u.clearcoatMap&&(x.clearcoatMap=z(u.clearcoatMap));void 0!==u.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap=z(u.clearcoatRoughnessMap));void 0!==u.clearcoatNormalMap&&(x.clearcoatNormalMap=z(u.clearcoatNormalMap));void 0!==u.clearcoatNormalScale&&
(x.clearcoatNormalScale=(new cf).fromArray(u.clearcoatNormalScale));void 0!==u.transmission&&(x.transmission=u.transmission);void 0!==u.transmissionMap&&(x.transmissionMap=z(u.transmissionMap));return x},setTextures:function(u){(this||p).textures=u;return this||p}});var yY={decodeText:function(u){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(u);for(var z="",t=0,x=u.length;t<x;t++)z+=String.fromCharCode(u[t]);try{return decodeURIComponent(escape(z))}catch(C){return z}},extractUrlBase:function(u){var z=
u.lastIndexOf("/");return-1===z?"./":u.substr(0,z+1)}};RI.prototype=Object.assign(Object.create(ya.prototype),{constructor:RI,isInstancedBufferGeometry:!0,copy:function(u){ya.prototype.copy.call(this||p,u);(this||p).instanceCount=u.instanceCount;return this||p},clone:function(){return(new (this||p).constructor).copy(this||p)},toJSON:function(){var u=ya.prototype.toJSON.call(this||p);u.instanceCount=(this||p).instanceCount;u.isInstancedBufferGeometry=!0;return u}});hP.prototype=Object.assign(Object.create(S.prototype),
{constructor:hP,isInstancedBufferAttribute:!0,copy:function(u){S.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},toJSON:function(){var u=S.prototype.toJSON.call(this||p);u.meshPerAttribute=(this||p).meshPerAttribute;u.isInstancedBufferAttribute=!0;return u}});iP.prototype=Object.assign(Object.create(Vk.prototype),{constructor:iP,load:function(u,z,t,x){var C=this||p,H=new ps(C.manager);H.setPath(C.path);H.setRequestHeader(C.requestHeader);H.setWithCredentials(C.withCredentials);
H.load(u,function(N){try{z(C.parse(JSON.parse(N)))}catch(T){x?x(T):console.error(T),C.manager.itemError(u)}},t,x)},parse:function(u){function z(Xa,Va){if(void 0!==t[Va])return t[Va];var vb=Xa.interleavedBuffers[Va];var sb=vb.buffer;void 0!==x[sb]?sb=x[sb]:(Xa=(new Uint32Array(Xa.arrayBuffers[sb])).buffer,sb=x[sb]=Xa);sb=new KP[vb.type](sb);sb=new Xq(sb,vb.stride);sb.uuid=vb.uuid;return t[Va]=sb}var t={},x={},C=u.isInstancedBufferGeometry?new RI:new ya,H=u.data.index;void 0!==H&&(H=new KP[H.type](H.array),
C.setIndex(new S(H,1)));H=u.data.attributes;for(var N in H){var T=H[N],W=void 0;T.isInterleavedBufferAttribute?(W=z(u.data,T.data),W=new Gz(W,T.itemSize,T.offset,T.normalized)):(W=new KP[T.type](T.array),W=new (T.isInstancedBufferAttribute?hP:S)(W,T.itemSize,T.normalized));void 0!==T.name&&(W.name=T.name);C.setAttribute(N,W)}if(N=u.data.morphAttributes)for(var Y in N){H=N[Y];T=[];W=0;for(var ea=H.length;W<ea;W++){var sa=H[W],Aa=void 0;sa.isInterleavedBufferAttribute?(Aa=z(u.data,sa.data),Aa=new Gz(Aa,
sa.itemSize,sa.offset,sa.normalized)):(Aa=new KP[sa.type](sa.array),Aa=new S(Aa,sa.itemSize,sa.normalized));void 0!==sa.name&&(Aa.name=sa.name);T.push(Aa)}C.morphAttributes[Y]=T}u.data.morphTargetsRelative&&(C.morphTargetsRelative=!0);Y=u.data.groups||u.data.drawcalls||u.data.offsets;if(void 0!==Y)for(N=0,H=Y.length;N!==H;++N)T=Y[N],C.addGroup(T.start,T.count,T.materialIndex);Y=u.data.boundingSphere;void 0!==Y&&(N=new wc,void 0!==Y.center&&N.fromArray(Y.center),C.boundingSphere=new qx(N,Y.radius));
u.name&&(C.name=u.name);u.userData&&(C.userData=u.userData);return C}});var KP={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},wva=function(u){function z(x){return u.call(this||p,x)||this||p}g(z,u);var t=z.prototype;t.load=function(x,C,H,N){var T=this||p,W=""===(this||p).path?
yY.extractUrlBase(x):(this||p).path;(this||p).resourcePath=(this||p).resourcePath||W;W=new ps((this||p).manager);W.setPath((this||p).path);W.setRequestHeader((this||p).requestHeader);W.setWithCredentials((this||p).withCredentials);W.load(x,function(Y){var ea=null;try{ea=JSON.parse(Y)}catch(sa){void 0!==N&&N(sa);console.error("THREE:ObjectLoader: Can't parse "+x+".",sa.message);return}Y=ea.metadata;void 0===Y||void 0===Y.type||"geometry"===Y.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+
x):T.parse(ea,C)},H,N)};t.parse=function(x,C){var H=this.parseShape(x.shapes);H=this.parseGeometries(x.geometries,H);var N=this.parseImages(x.images,function(){void 0!==C&&C(T)});N=this.parseTextures(x.textures,N);N=this.parseMaterials(x.materials,N);var T=this.parseObject(x.object,H,N);x.animations&&(T.animations=this.parseAnimations(x.animations));void 0!==x.images&&0!==x.images.length||void 0===C||C(T);return T};t.parseShape=function(x){var C={};if(void 0!==x)for(var H=0,N=x.length;H<N;H++){var T=
(new Lz).fromJSON(x[H]);C[T.uuid]=T}return C};t.parseGeometries=function(x,C){var H={};if(void 0!==x)for(var N=new iP,T=0,W=x.length;T<W;T++){var Y=void 0;var ea=x[T];switch(ea.type){case "PlaneGeometry":case "PlaneBufferGeometry":Y=new wp[ea.type](ea.width,ea.height,ea.widthSegments,ea.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":Y=new wp[ea.type](ea.width,ea.height,ea.depth,ea.widthSegments,ea.heightSegments,ea.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":Y=
new wp[ea.type](ea.radius,ea.segments,ea.thetaStart,ea.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":Y=new wp[ea.type](ea.radiusTop,ea.radiusBottom,ea.height,ea.radialSegments,ea.heightSegments,ea.openEnded,ea.thetaStart,ea.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":Y=new wp[ea.type](ea.radius,ea.height,ea.radialSegments,ea.heightSegments,ea.openEnded,ea.thetaStart,ea.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":Y=new wp[ea.type](ea.radius,
ea.widthSegments,ea.heightSegments,ea.phiStart,ea.phiLength,ea.thetaStart,ea.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":Y=new wp[ea.type](ea.radius,ea.detail);break;case "RingGeometry":case "RingBufferGeometry":Y=new wp[ea.type](ea.innerRadius,ea.outerRadius,ea.thetaSegments,ea.phiSegments,
ea.thetaStart,ea.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":Y=new wp[ea.type](ea.radius,ea.tube,ea.radialSegments,ea.tubularSegments,ea.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":Y=new wp[ea.type](ea.radius,ea.tube,ea.tubularSegments,ea.radialSegments,ea.p,ea.q);break;case "TubeGeometry":case "TubeBufferGeometry":Y=new wp[ea.type]((new xY[ea.path.type]).fromJSON(ea.path),ea.tubularSegments,ea.radius,ea.radialSegments,ea.closed);break;case "LatheGeometry":case "LatheBufferGeometry":Y=
new wp[ea.type](ea.points,ea.segments,ea.phiStart,ea.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":Y=new wp[ea.type](ea.vertices,ea.indices,ea.radius,ea.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":Y=[];for(var sa=0,Aa=ea.shapes.length;sa<Aa;sa++)Y.push(C[ea.shapes[sa]]);Y=new wp[ea.type](Y,ea.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":Y=[];sa=0;for(Aa=ea.shapes.length;sa<Aa;sa++)Y.push(C[ea.shapes[sa]]);sa=ea.options.extrudePath;
void 0!==sa&&(ea.options.extrudePath=(new xY[sa.type]).fromJSON(sa));Y=new wp[ea.type](Y,ea.options);break;case "BufferGeometry":case "InstancedBufferGeometry":Y=N.parse(ea);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+ea.type+'"');continue}Y.uuid=ea.uuid;void 0!==ea.name&&(Y.name=ea.name);!0===Y.isBufferGeometry&&void 0!==ea.userData&&(Y.userData=ea.userData);H[ea.uuid]=
Y}return H};t.parseMaterials=function(x,C){var H={},N={};if(void 0!==x){var T=new gP;T.setTextures(C);C=0;for(var W=x.length;C<W;C++){var Y=x[C];if("MultiMaterial"===Y.type){for(var ea=[],sa=0;sa<Y.materials.length;sa++){var Aa=Y.materials[sa];void 0===H[Aa.uuid]&&(H[Aa.uuid]=T.parse(Aa));ea.push(H[Aa.uuid])}N[Y.uuid]=ea}else void 0===H[Y.uuid]&&(H[Y.uuid]=T.parse(Y)),N[Y.uuid]=H[Y.uuid]}}return N};t.parseAnimations=function(x){for(var C=[],H=0;H<x.length;H++){var N=x[H],T=os.parse(N);void 0!==N.uuid&&
(T.uuid=N.uuid);C.push(T)}return C};t.parseImages=function(x,C){function H(vb){N.manager.itemStart(vb);return W.load(vb,function(){N.manager.itemEnd(vb)},void 0,function(){N.manager.itemError(vb);N.manager.itemEnd(vb)})}var N=this||p,T={};if(void 0!==x&&0<x.length){C=new sX(C);var W=new aF(C);W.setCrossOrigin((this||p).crossOrigin);C=0;for(var Y=x.length;C<Y;C++){var ea=x[C],sa=ea.url;if(Array.isArray(sa)){T[ea.uuid]=[];for(var Aa=0,Xa=sa.length;Aa<Xa;Aa++){var Va=sa[Aa];Va=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Va)?
Va:N.resourcePath+Va;T[ea.uuid].push(H(Va))}}else sa=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ea.url)?ea.url:N.resourcePath+ea.url,T[ea.uuid]=H(sa)}}return T};t.parseTextures=function(x,C){function H(sa,Aa){if("number"===typeof sa)return sa;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",sa);return Aa[sa]}var N={};if(void 0!==x)for(var T=0,W=x.length;T<W;T++){var Y=x[T];void 0===Y.image&&console.warn('THREE.ObjectLoader: No "image" specified for',Y.uuid);void 0===C[Y.image]&&
console.warn("THREE.ObjectLoader: Undefined image",Y.image);var ea=void 0;ea=Array.isArray(C[Y.image])?new oc(C[Y.image]):new r(C[Y.image]);ea.needsUpdate=!0;ea.uuid=Y.uuid;void 0!==Y.name&&(ea.name=Y.name);void 0!==Y.mapping&&(ea.mapping=H(Y.mapping,vva));void 0!==Y.offset&&ea.offset.fromArray(Y.offset);void 0!==Y.repeat&&ea.repeat.fromArray(Y.repeat);void 0!==Y.center&&ea.center.fromArray(Y.center);void 0!==Y.rotation&&(ea.rotation=Y.rotation);void 0!==Y.wrap&&(ea.wrapS=H(Y.wrap[0],Ada),ea.wrapT=
H(Y.wrap[1],Ada));void 0!==Y.format&&(ea.format=Y.format);void 0!==Y.type&&(ea.type=Y.type);void 0!==Y.encoding&&(ea.encoding=Y.encoding);void 0!==Y.minFilter&&(ea.minFilter=H(Y.minFilter,Bda));void 0!==Y.magFilter&&(ea.magFilter=H(Y.magFilter,Bda));void 0!==Y.anisotropy&&(ea.anisotropy=Y.anisotropy);void 0!==Y.flipY&&(ea.flipY=Y.flipY);void 0!==Y.premultiplyAlpha&&(ea.premultiplyAlpha=Y.premultiplyAlpha);void 0!==Y.unpackAlignment&&(ea.unpackAlignment=Y.unpackAlignment);N[Y.uuid]=ea}return N};t.parseObject=
function(x,C,H){function N(Aa){void 0===C[Aa]&&console.warn("THREE.ObjectLoader: Undefined geometry",Aa);return C[Aa]}function T(Aa){if(void 0!==Aa){if(Array.isArray(Aa)){for(var Xa=[],Va=0,vb=Aa.length;Va<vb;Va++){var sb=Aa[Va];void 0===H[sb]&&console.warn("THREE.ObjectLoader: Undefined material",sb);Xa.push(H[sb])}return Xa}void 0===H[Aa]&&console.warn("THREE.ObjectLoader: Undefined material",Aa);return H[Aa]}}switch(x.type){case "Scene":var W=new $X;void 0!==x.background&&Number.isInteger(x.background)&&
(W.background=new Hg(x.background));void 0!==x.fog&&("Fog"===x.fog.type?W.fog=new $ca(x.fog.color,x.fog.near,x.fog.far):"FogExp2"===x.fog.type&&(W.fog=new Zca(x.fog.color,x.fog.density)));break;case "PerspectiveCamera":W=new qc(x.fov,x.aspect,x.near,x.far);void 0!==x.focus&&(W.focus=x.focus);void 0!==x.zoom&&(W.zoom=x.zoom);void 0!==x.filmGauge&&(W.filmGauge=x.filmGauge);void 0!==x.filmOffset&&(W.filmOffset=x.filmOffset);void 0!==x.view&&(W.view=Object.assign({},x.view));break;case "OrthographicCamera":W=
new cF(x.left,x.right,x.top,x.bottom,x.near,x.far);void 0!==x.zoom&&(W.zoom=x.zoom);void 0!==x.view&&(W.view=Object.assign({},x.view));break;case "AmbientLight":W=new eP(x.color,x.intensity);break;case "DirectionalLight":W=new dP(x.color,x.intensity);break;case "PointLight":W=new cP(x.color,x.intensity,x.distance,x.decay);break;case "RectAreaLight":W=new fP(x.color,x.intensity,x.width,x.height);break;case "SpotLight":W=new bP(x.color,x.intensity,x.distance,x.angle,x.penumbra,x.decay);break;case "HemisphereLight":W=
new aP(x.color,x.groundColor,x.intensity);break;case "LightProbe":W=(new qs).fromJSON(x);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":W=N(x.geometry);var Y=T(x.material);W=new jb(W,Y);break;case "InstancedMesh":W=N(x.geometry);Y=T(x.material);var ea=x.instanceMatrix;W=new NO(W,Y,x.count);W.instanceMatrix=new S(new Float32Array(ea.array),16);break;case "LOD":W=new GI;break;case "Line":W=new ns(N(x.geometry),T(x.material),x.mode);
break;case "LineLoop":W=new OO(N(x.geometry),T(x.material));break;case "LineSegments":W=new up(N(x.geometry),T(x.material));break;case "PointCloud":case "Points":W=new VE(N(x.geometry),T(x.material));break;case "Sprite":W=new EI(T(x.material));break;case "Group":W=new Cz;break;default:W=new E}W.uuid=x.uuid;void 0!==x.name&&(W.name=x.name);void 0!==x.matrix?(W.matrix.fromArray(x.matrix),void 0!==x.matrixAutoUpdate&&(W.matrixAutoUpdate=x.matrixAutoUpdate),W.matrixAutoUpdate&&W.matrix.decompose(W.position,
W.quaternion,W.scale)):(void 0!==x.position&&W.position.fromArray(x.position),void 0!==x.rotation&&W.rotation.fromArray(x.rotation),void 0!==x.quaternion&&W.quaternion.fromArray(x.quaternion),void 0!==x.scale&&W.scale.fromArray(x.scale));void 0!==x.castShadow&&(W.castShadow=x.castShadow);void 0!==x.receiveShadow&&(W.receiveShadow=x.receiveShadow);x.shadow&&(void 0!==x.shadow.bias&&(W.shadow.bias=x.shadow.bias),void 0!==x.shadow.normalBias&&(W.shadow.normalBias=x.shadow.normalBias),void 0!==x.shadow.radius&&
(W.shadow.radius=x.shadow.radius),void 0!==x.shadow.mapSize&&W.shadow.mapSize.fromArray(x.shadow.mapSize),void 0!==x.shadow.camera&&(W.shadow.camera=this.parseObject(x.shadow.camera)));void 0!==x.visible&&(W.visible=x.visible);void 0!==x.frustumCulled&&(W.frustumCulled=x.frustumCulled);void 0!==x.renderOrder&&(W.renderOrder=x.renderOrder);void 0!==x.userData&&(W.userData=x.userData);void 0!==x.layers&&(W.layers.mask=x.layers);if(void 0!==x.children)for(ea=x.children,Y=0;Y<ea.length;Y++)W.add(this.parseObject(ea[Y],
C,H));if("LOD"===x.type)for(void 0!==x.autoUpdate&&(W.autoUpdate=x.autoUpdate),x=x.levels,ea=0;ea<x.length;ea++){Y=x[ea];var sa=W.getObjectByProperty("uuid",Y.object);void 0!==sa&&W.addLevel(sa,Y.distance)}return W};t.setTexturePath=function(x){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(x)};return z}(Vk),vva={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,
CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ada={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Bda={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};zX.prototype=Object.assign(Object.create(Vk.prototype),{constructor:zX,isImageBitmapLoader:!0,setOptions:function(u){(this||p).options=u;return this||p},load:function(u,z,t,x){void 0===u&&(u="");void 0!==
(this||p).path&&(u=(this||p).path+u);u=(this||p).manager.resolveURL(u);var C=this||p,H=rC.get(u);if(void 0!==H)return C.manager.itemStart(u),setTimeout(function(){z&&z(H);C.manager.itemEnd(u)},0),H;t={};t.credentials="anonymous"===(this||p).crossOrigin?"same-origin":"include";fetch(u,t).then(function(N){return N.blob()}).then(function(N){return createImageBitmap(N,C.options)}).then(function(N){rC.add(u,N);z&&z(N);C.manager.itemEnd(u)}).catch(function(N){x&&x(N);C.manager.itemError(u);C.manager.itemEnd(u)});
C.manager.itemStart(u)}});Object.assign(AX.prototype,{moveTo:function(u,z){(this||p).currentPath=new Mt;(this||p).subPaths.push((this||p).currentPath);(this||p).currentPath.moveTo(u,z);return this||p},lineTo:function(u,z){(this||p).currentPath.lineTo(u,z);return this||p},quadraticCurveTo:function(u,z,t,x){(this||p).currentPath.quadraticCurveTo(u,z,t,x);return this||p},bezierCurveTo:function(u,z,t,x,C,H){(this||p).currentPath.bezierCurveTo(u,z,t,x,C,H);return this||p},splineThru:function(u){(this||
p).currentPath.splineThru(u);return this||p},toShapes:function(u,z){function t(sb){for(var ad=[],Bc=0,rd=sb.length;Bc<rd;Bc++){var Jc=sb[Bc],vd=new Lz;vd.curves=Jc.curves;ad.push(vd)}return ad}function x(sb,ad){for(var Bc=ad.length,rd=!1,Jc=Bc-1,vd=0;vd<Bc;Jc=vd++){var Vc=ad[Jc],Md=ad[vd],de=Md.x-Vc.x,Id=Md.y-Vc.y;if(Math.abs(Id)>Number.EPSILON){if(0>Id&&(Vc=ad[vd],de=-de,Md=ad[Jc],Id=-Id),!(sb.y<Vc.y||sb.y>Md.y))if(sb.y===Vc.y){if(sb.x===Vc.x)return!0}else{Jc=Id*(sb.x-Vc.x)-de*(sb.y-Vc.y);if(0===
Jc)return!0;0>Jc||(rd=!rd)}}else if(sb.y===Vc.y&&(Md.x<=sb.x&&sb.x<=Vc.x||Vc.x<=sb.x&&sb.x<=Md.x))return!0}return rd}var C=vx.isClockWise,H=(this||p).subPaths;if(0===H.length)return[];if(!0===z)return t(H);z=[];if(1===H.length){var N=H[0];var T=new Lz;T.curves=N.curves;z.push(T);return z}var W=!C(H[0].getPoints());W=u?!W:W;T=[];var Y=[],ea=[],sa=0;Y[sa]=void 0;ea[sa]=[];for(var Aa=0,Xa=H.length;Aa<Xa;Aa++){N=H[Aa];var Va=N.getPoints();var vb=C(Va);(vb=u?!vb:vb)?(!W&&Y[sa]&&sa++,Y[sa]={s:new Lz,p:Va},
Y[sa].s.curves=N.curves,W&&sa++,ea[sa]=[]):ea[sa].push({h:N,p:Va[0]})}if(!Y[0])return t(H);if(1<Y.length){u=!1;C=[];H=0;for(N=Y.length;H<N;H++)T[H]=[];H=0;for(N=Y.length;H<N;H++)for(vb=ea[H],W=0;W<vb.length;W++){sa=vb[W];Va=!0;for(Aa=0;Aa<Y.length;Aa++)x(sa.p,Y[Aa].p)&&(H!==Aa&&C.push({froms:H,tos:Aa,hole:W}),Va?(Va=!1,T[Aa].push(sa)):u=!0);Va&&T[H].push(sa)}0<C.length&&(u||(ea=T))}C=0;for(H=Y.length;C<H;C++)for(T=Y[C].s,z.push(T),u=ea[C],N=0,vb=u.length;N<vb;N++)T.holes.push(u[N].h);return z}});
Object.assign(BX.prototype,{isFont:!0,generateShapes:function(u,z){void 0===z&&(z=100);var t=[],x=z;z=(this||p).data;var C=Array.from?Array.from(u):String(u).split("");x/=z.resolution;var H=(z.boundingBox.yMax-z.boundingBox.yMin+z.underlineThickness)*x;u=[];for(var N=0,T=0,W=0;W<C.length;W++){var Y=C[W];if("\n"===Y)N=0,T-=H;else{var ea=Y;Y=x;var sa=N,Aa=T,Xa=z,Va=Xa.glyphs[ea]||Xa.glyphs["?"];if(Va){ea=new AX;if(Va.o){Xa=Va._cachedOutline||(Va._cachedOutline=Va.o.split(" "));for(var vb=0,sb=Xa.length;vb<
sb;)switch(Xa[vb++]){case "m":var ad=Xa[vb++]*Y+sa;var Bc=Xa[vb++]*Y+Aa;ea.moveTo(ad,Bc);break;case "l":ad=Xa[vb++]*Y+sa;Bc=Xa[vb++]*Y+Aa;ea.lineTo(ad,Bc);break;case "q":var rd=Xa[vb++]*Y+sa;var Jc=Xa[vb++]*Y+Aa;var vd=Xa[vb++]*Y+sa;var Vc=Xa[vb++]*Y+Aa;ea.quadraticCurveTo(vd,Vc,rd,Jc);break;case "b":rd=Xa[vb++]*Y+sa,Jc=Xa[vb++]*Y+Aa,vd=Xa[vb++]*Y+sa,Vc=Xa[vb++]*Y+Aa,ad=Xa[vb++]*Y+sa,Bc=Xa[vb++]*Y+Aa,ea.bezierCurveTo(vd,Vc,ad,Bc,rd,Jc)}}Y={offsetX:Va.ha*Y,path:ea}}else console.error('THREE.Font: character "'+
ea+'" does not exists in font family '+Xa.familyName+"."),Y=void 0;N+=Y.offsetX;u.push(Y.path)}}z=0;for(C=u.length;z<C;z++)Array.prototype.push.apply(t,u[z].toShapes());return t}});CX.prototype=Object.assign(Object.create(Vk.prototype),{constructor:CX,load:function(u,z,t,x){var C=this||p,H=new ps((this||p).manager);H.setPath((this||p).path);H.setRequestHeader((this||p).requestHeader);H.setWithCredentials(C.withCredentials);H.load(u,function(N){try{var T=JSON.parse(N)}catch(W){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
T=JSON.parse(N.substring(65,N.length-2))}N=C.parse(T);z&&z(N)},t,x)},parse:function(u){return new BX(u)}});var LP,zY={getContext:function(){void 0===LP&&(LP=new (window.AudioContext||window.webkitAudioContext));return LP},setContext:function(u){LP=u}};jP.prototype=Object.assign(Object.create(Vk.prototype),{constructor:jP,load:function(u,z,t,x){var C=this||p,H=new ps(C.manager);H.setResponseType("arraybuffer");H.setPath(C.path);H.setRequestHeader(C.requestHeader);H.setWithCredentials(C.withCredentials);
H.load(u,function(N){try{var T=N.slice(0);zY.getContext().decodeAudioData(T,function(W){z(W)})}catch(W){x?x(W):console.error(W),C.manager.itemError(u)}},t,x)}});DX.prototype=Object.assign(Object.create(qs.prototype),{constructor:DX,isHemisphereLightProbe:!0,copy:function(u){qs.prototype.copy.call(this||p,u);return this||p},toJSON:function(u){return qs.prototype.toJSON.call(this||p,u)}});EX.prototype=Object.assign(Object.create(qs.prototype),{constructor:EX,isAmbientLightProbe:!0,copy:function(u){qs.prototype.copy.call(this||
p,u);return this||p},toJSON:function(u){return qs.prototype.toJSON.call(this||p,u)}});var Cda=new uj,Dda=new uj;Object.assign(Fca.prototype,{update:function(u){var z=(this||p)._cache;if(z.focus!==u.focus||z.fov!==u.fov||z.aspect!==u.aspect*(this||p).aspect||z.near!==u.near||z.far!==u.far||z.zoom!==u.zoom||z.eyeSep!==(this||p).eyeSep){z.focus=u.focus;z.fov=u.fov;z.aspect=u.aspect*(this||p).aspect;z.near=u.near;z.far=u.far;z.zoom=u.zoom;z.eyeSep=(this||p).eyeSep;var t=u.projectionMatrix.clone(),x=z.eyeSep/
2,C=x*z.near/z.focus,H=z.near*Math.tan(ti.DEG2RAD*z.fov*.5)/z.zoom;Dda.elements[12]=-x;Cda.elements[12]=x;x=-H*z.aspect+C;var N=H*z.aspect+C;t.elements[0]=2*z.near/(N-x);t.elements[8]=(N+x)/(N-x);(this||p).cameraL.projectionMatrix.copy(t);x=-H*z.aspect-C;N=H*z.aspect-C;t.elements[0]=2*z.near/(N-x);t.elements[8]=(N+x)/(N-x);(this||p).cameraR.projectionMatrix.copy(t)}(this||p).cameraL.matrixWorld.copy(u.matrixWorld).multiply(Dda);(this||p).cameraR.matrixWorld.copy(u.matrixWorld).multiply(Cda)}});var Eda=
function(){function u(t){(this||p).autoStart=void 0!==t?t:!0;(this||p).startTime=0;(this||p).oldTime=0;(this||p).elapsedTime=0;(this||p).running=!1}var z=u.prototype;z.start=function(){(this||p).startTime=("undefined"===typeof performance?Date:performance).now();(this||p).oldTime=(this||p).startTime;(this||p).elapsedTime=0;(this||p).running=!0};z.stop=function(){this.getElapsedTime();(this||p).running=!1;(this||p).autoStart=!1};z.getElapsedTime=function(){this.getDelta();return(this||p).elapsedTime};
z.getDelta=function(){var t=0;if((this||p).autoStart&&!(this||p).running)return this.start(),0;if((this||p).running){var x=("undefined"===typeof performance?Date:performance).now();t=(x-(this||p).oldTime)/1E3;(this||p).oldTime=x;(this||p).elapsedTime+=t}return t};return u}(),sC=new wc,Fda=new Ko,xva=new wc,tC=new wc,yva=function(u){function z(){var x=u.call(this||p)||this||p;x.type="AudioListener";x.context=zY.getContext();x.gain=x.context.createGain();x.gain.connect(x.context.destination);x.filter=
null;x.timeDelta=0;x._clock=new Eda;return x}g(z,u);var t=z.prototype;t.getInput=function(){return(this||p).gain};t.removeFilter=function(){null!==(this||p).filter&&((this||p).gain.disconnect((this||p).filter),(this||p).filter.disconnect((this||p).context.destination),(this||p).gain.connect((this||p).context.destination),(this||p).filter=null);return this||p};t.getFilter=function(){return(this||p).filter};t.setFilter=function(x){null!==(this||p).filter?((this||p).gain.disconnect((this||p).filter),
(this||p).filter.disconnect((this||p).context.destination)):(this||p).gain.disconnect((this||p).context.destination);(this||p).filter=x;(this||p).gain.connect((this||p).filter);(this||p).filter.connect((this||p).context.destination);return this||p};t.getMasterVolume=function(){return(this||p).gain.gain.value};t.setMasterVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||
p,x);x=(this||p).context.listener;var C=(this||p).up;(this||p).timeDelta=(this||p)._clock.getDelta();(this||p).matrixWorld.decompose(sC,Fda,xva);tC.set(0,0,-1).applyQuaternion(Fda);if(x.positionX){var H=(this||p).context.currentTime+(this||p).timeDelta;x.positionX.linearRampToValueAtTime(sC.x,H);x.positionY.linearRampToValueAtTime(sC.y,H);x.positionZ.linearRampToValueAtTime(sC.z,H);x.forwardX.linearRampToValueAtTime(tC.x,H);x.forwardY.linearRampToValueAtTime(tC.y,H);x.forwardZ.linearRampToValueAtTime(tC.z,
H);x.upX.linearRampToValueAtTime(C.x,H);x.upY.linearRampToValueAtTime(C.y,H);x.upZ.linearRampToValueAtTime(C.z,H)}else x.setPosition(sC.x,sC.y,sC.z),x.setOrientation(tC.x,tC.y,tC.z,C.x,C.y,C.z)};return z}(E),AY=function(u){function z(x){var C=u.call(this||p)||this||p;C.type="Audio";C.listener=x;C.context=x.context;C.gain=C.context.createGain();C.gain.connect(x.getInput());C.autoplay=!1;C.buffer=null;C.detune=0;C.loop=!1;C.loopStart=0;C.loopEnd=0;C.offset=0;C.duration=void 0;C.playbackRate=1;C.isPlaying=
!1;C.hasPlaybackControl=!0;C.source=null;C.sourceType="empty";C._startedAt=0;C._progress=0;C._connected=!1;C.filters=[];return C}g(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).gain};t.setNodeSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="audioNode";(this||p).source=x;this.connect();return this||p};t.setMediaElementSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaNode";(this||p).source=(this||p).context.createMediaElementSource(x);
this.connect();return this||p};t.setMediaStreamSource=function(x){(this||p).hasPlaybackControl=!1;(this||p).sourceType="mediaStreamNode";(this||p).source=(this||p).context.createMediaStreamSource(x);this.connect();return this||p};t.setBuffer=function(x){(this||p).buffer=x;(this||p).sourceType="buffer";(this||p).autoplay&&this.play();return this||p};t.play=function(x){void 0===x&&(x=0);if(!0===(this||p).isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p)._startedAt=(this||p).context.currentTime+x,x=(this||p).context.createBufferSource(),x.buffer=(this||p).buffer,x.loop=(this||p).loop,x.loopStart=(this||p).loopStart,x.loopEnd=(this||p).loopEnd,x.onended=(this||p).onEnded.bind(this||p),x.start((this||p)._startedAt,(this||p)._progress+(this||p).offset,(this||p).duration),(this||p).isPlaying=!0,(this||p).source=x,this.setDetune((this||p).detune),this.setPlaybackRate((this||p).playbackRate),this.connect()};t.pause=function(){if(!1===
(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===(this||p).isPlaying&&((this||p)._progress+=Math.max((this||p).context.currentTime-(this||p)._startedAt,0)*(this||p).playbackRate,!0===(this||p).loop&&((this||p)._progress%=(this||p).duration||(this||p).buffer.duration),(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1),this||p};t.stop=function(){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p)._progress=0,(this||p).source.stop(),(this||p).source.onended=null,(this||p).isPlaying=!1,this||p};t.connect=function(){if(0<(this||p).filters.length){(this||p).source.connect((this||p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].connect((this||p).filters[x]);(this||p).filters[(this||p).filters.length-1].connect(this.getOutput())}else(this||p).source.connect(this.getOutput());(this||p)._connected=!0;return this||p};t.disconnect=function(){if(0<
(this||p).filters.length){(this||p).source.disconnect((this||p).filters[0]);for(var x=1,C=(this||p).filters.length;x<C;x++)(this||p).filters[x-1].disconnect((this||p).filters[x]);(this||p).filters[(this||p).filters.length-1].disconnect(this.getOutput())}else(this||p).source.disconnect(this.getOutput());(this||p)._connected=!1;return this||p};t.getFilters=function(){return(this||p).filters};t.setFilters=function(x){x||(x=[]);!0===(this||p)._connected?(this.disconnect(),(this||p).filters=x,this.connect()):
(this||p).filters=x;return this||p};t.setDetune=function(x){(this||p).detune=x;if(void 0!==(this||p).source.detune)return!0===(this||p).isPlaying&&(this||p).source.detune.setTargetAtTime((this||p).detune,(this||p).context.currentTime,.01),this||p};t.getDetune=function(){return(this||p).detune};t.getFilter=function(){return this.getFilters()[0]};t.setFilter=function(x){return this.setFilters(x?[x]:[])};t.setPlaybackRate=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p).playbackRate=x,!0===(this||p).isPlaying&&(this||p).source.playbackRate.setTargetAtTime((this||p).playbackRate,(this||p).context.currentTime,.01),this||p};t.getPlaybackRate=function(){return(this||p).playbackRate};t.onEnded=function(){(this||p).isPlaying=!1};t.getLoop=function(){return!1===(this||p).hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):(this||p).loop};t.setLoop=function(x){if(!1===(this||p).hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return(this||p).loop=x,!0===(this||p).isPlaying&&((this||p).source.loop=(this||p).loop),this||p};t.setLoopStart=function(x){(this||p).loopStart=x;return this||p};t.setLoopEnd=function(x){(this||p).loopEnd=x;return this||p};t.getVolume=function(){return(this||p).gain.gain.value};t.setVolume=function(x){(this||p).gain.gain.setTargetAtTime(x,(this||p).context.currentTime,.01);return this||p};return z}(E),uC=new wc,Gda=new Ko,zva=new wc,vC=new wc,Ava=function(u){function z(x){x=u.call(this||p,x)||
this||p;x.panner=x.context.createPanner();x.panner.panningModel="HRTF";x.panner.connect(x.gain);return x}g(z,u);var t=z.prototype;t.getOutput=function(){return(this||p).panner};t.getRefDistance=function(){return(this||p).panner.refDistance};t.setRefDistance=function(x){(this||p).panner.refDistance=x;return this||p};t.getRolloffFactor=function(){return(this||p).panner.rolloffFactor};t.setRolloffFactor=function(x){(this||p).panner.rolloffFactor=x;return this||p};t.getDistanceModel=function(){return(this||
p).panner.distanceModel};t.setDistanceModel=function(x){(this||p).panner.distanceModel=x;return this||p};t.getMaxDistance=function(){return(this||p).panner.maxDistance};t.setMaxDistance=function(x){(this||p).panner.maxDistance=x;return this||p};t.setDirectionalCone=function(x,C,H){(this||p).panner.coneInnerAngle=x;(this||p).panner.coneOuterAngle=C;(this||p).panner.coneOuterGain=H;return this||p};t.updateMatrixWorld=function(x){u.prototype.updateMatrixWorld.call(this||p,x);if(!0!==(this||p).hasPlaybackControl||
!1!==(this||p).isPlaying)if((this||p).matrixWorld.decompose(uC,Gda,zva),vC.set(0,0,1).applyQuaternion(Gda),x=(this||p).panner,x.positionX){var C=(this||p).context.currentTime+(this||p).listener.timeDelta;x.positionX.linearRampToValueAtTime(uC.x,C);x.positionY.linearRampToValueAtTime(uC.y,C);x.positionZ.linearRampToValueAtTime(uC.z,C);x.orientationX.linearRampToValueAtTime(vC.x,C);x.orientationY.linearRampToValueAtTime(vC.y,C);x.orientationZ.linearRampToValueAtTime(vC.z,C)}else x.setPosition(uC.x,
uC.y,uC.z),x.setOrientation(vC.x,vC.y,vC.z)};return z}(AY),Hda=function(){function u(t,x){(this||p).analyser=t.context.createAnalyser();(this||p).analyser.fftSize=void 0!==x?x:2048;(this||p).data=new Uint8Array((this||p).analyser.frequencyBinCount);t.getOutput().connect((this||p).analyser)}var z=u.prototype;z.getFrequencyData=function(){(this||p).analyser.getByteFrequencyData((this||p).data);return(this||p).data};z.getAverageFrequency=function(){for(var t=0,x=this.getFrequencyData(),C=0;C<x.length;C++)t+=
x[C];return t/x.length};return u}();Object.assign(FX.prototype,{accumulate:function(u,z){var t=(this||p).buffer,x=(this||p).valueSize;u=u*x+x;var C=(this||p).cumulativeWeight;if(0===C){for(C=0;C!==x;++C)t[u+C]=t[C];C=z}else C+=z,this._mixBufferRegion(t,u,0,z/C,x);(this||p).cumulativeWeight=C},accumulateAdditive:function(u){var z=(this||p).buffer,t=(this||p).valueSize,x=t*(this||p)._addIndex;0===(this||p).cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(z,x,0,u,t);(this||
p).cumulativeWeightAdditive+=u},apply:function(u){var z=(this||p).valueSize,t=(this||p).buffer;u=u*z+z;var x=(this||p).cumulativeWeight,C=(this||p).cumulativeWeightAdditive,H=(this||p).binding;(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0;1>x&&this._mixBufferRegion(t,u,z*(this||p)._origIndex,1-x,z);0<C&&this._mixBufferRegionAdditive(t,u,(this||p)._addIndex*z,1,z);x=z;for(C=z+z;x!==C;++x)if(t[x]!==t[x+z]){H.setValue(t,u);break}},saveOriginalState:function(){var u=(this||p).buffer,
z=(this||p).valueSize,t=z*(this||p)._origIndex;(this||p).binding.getValue(u,t);for(var x=z;x!==t;++x)u[x]=u[t+x%z];this._setIdentity();(this||p).cumulativeWeight=0;(this||p).cumulativeWeightAdditive=0},restoreOriginalState:function(){(this||p).binding.setValue((this||p).buffer,3*(this||p).valueSize)},_setAdditiveIdentityNumeric:function(){for(var u=(this||p)._addIndex*(this||p).valueSize,z=u+(this||p).valueSize;u<z;u++)(this||p).buffer[u]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();
(this||p).buffer[(this||p)._addIndex*(this||p).valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var u=(this||p)._origIndex*(this||p).valueSize,z=(this||p)._addIndex*(this||p).valueSize,t=0;t<(this||p).valueSize;t++)(this||p).buffer[z+t]=(this||p).buffer[u+t]},_select:function(u,z,t,x,C){if(.5<=x)for(x=0;x!==C;++x)u[z+x]=u[t+x]},_slerp:function(u,z,t,x){Ko.slerpFlat(u,z,u,z,u,t,x)},_slerpAdditive:function(u,z,t,x,C){C*=(this||p)._workIndex;Ko.multiplyQuaternionsFlat(u,C,u,z,u,t);Ko.slerpFlat(u,
z,u,z,u,C,x)},_lerp:function(u,z,t,x,C){for(var H=1-x,N=0;N!==C;++N){var T=z+N;u[T]=u[T]*H+u[t+N]*x}},_lerpAdditive:function(u,z,t,x,C){for(var H=0;H!==C;++H){var N=z+H;u[N]+=u[t+H]*x}}});var Bva=/[\[\]\.:\/]/g,Cva="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Dva=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Eva=/(WCOD+)?/.source.replace("WCOD",Cva),Fva=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Gva=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),
Hva=new RegExp("^"+Dva+Eva+Fva+Gva+"$"),Iva=["material","materials","bones"];Object.assign(Gca.prototype,{getValue:function(u,z){this.bind();var t=(this||p)._bindings[(this||p)._targetGroup.nCachedObjects_];void 0!==t&&t.getValue(u,z)},setValue:function(u,z){for(var t=(this||p)._bindings,x=(this||p)._targetGroup.nCachedObjects_,C=t.length;x!==C;++x)t[x].setValue(u,z)},bind:function(){for(var u=(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].bind()},unbind:function(){for(var u=
(this||p)._bindings,z=(this||p)._targetGroup.nCachedObjects_,t=u.length;z!==t;++z)u[z].unbind()}});Object.assign(Mo,{Composite:Gca,create:function(u,z,t){return u&&u.isAnimationObjectGroup?new Mo.Composite(u,z,t):new Mo(u,z,t)},sanitizeNodeName:function(u){return u.replace(/\s/g,"_").replace(Bva,"")},parseTrackName:function(u){var z=Hva.exec(u);if(!z)throw Error("PropertyBinding: Cannot parse trackName: "+u);z={nodeName:z[2],objectName:z[3],objectIndex:z[4],propertyName:z[5],propertyIndex:z[6]};var t=
z.nodeName&&z.nodeName.lastIndexOf(".");if(void 0!==t&&-1!==t){var x=z.nodeName.substring(t+1);-1!==Iva.indexOf(x)&&(z.nodeName=z.nodeName.substring(0,t),z.objectName=x)}if(null===z.propertyName||0===z.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+u);return z},findNode:function(u,z){if(!z||""===z||"."===z||-1===z||z===u.name||z===u.uuid)return u;if(u.skeleton){var t=u.skeleton.getBoneByName(z);if(void 0!==t)return t}return u.children&&(u=function H(C){for(var N=
0;N<C.length;N++){var T=C[N];if(T.name===z||T.uuid===z||(T=H(T.children)))return T}return null}(u.children))?u:null}});Object.assign(Mo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(u,z){u[z]=(this||p).node[(this||p).propertyName]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)u[z++]=
t[x]},function(u,z){u[z]=(this||p).resolvedProperty[(this||p).propertyIndex]},function(u,z){(this||p).resolvedProperty.toArray(u,z)}],SetterByBindingTypeAndVersioning:[[function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z]},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).targetObject[(this||p).propertyName]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){for(var t=(this||p).resolvedProperty,
x=0,C=t.length;x!==C;++x)t[x]=u[z++]},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];(this||p).targetObject.needsUpdate=!0},function(u,z){for(var t=(this||p).resolvedProperty,x=0,C=t.length;x!==C;++x)t[x]=u[z++];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z]},function(u,z){(this||p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.needsUpdate=!0},function(u,z){(this||
p).resolvedProperty[(this||p).propertyIndex]=u[z];(this||p).targetObject.matrixWorldNeedsUpdate=!0}],[function(u,z){(this||p).resolvedProperty.fromArray(u,z)},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.needsUpdate=!0},function(u,z){(this||p).resolvedProperty.fromArray(u,z);(this||p).targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(u,z){this.bind();this.getValue(u,z)},setValue:function(u,z){this.bind();this.setValue(u,z)},bind:function(){var u=(this||
p).node,z=(this||p).parsedPath,t=z.objectName,x=z.propertyName,C=z.propertyIndex;u||(u=Mo.findNode((this||p).rootNode,z.nodeName)||(this||p).rootNode,(this||p).node=u);(this||p).getValue=(this||p)._getValue_unavailable;(this||p).setValue=(this||p)._setValue_unavailable;if(u){if(t){var H=z.objectIndex;switch(t){case "materials":if(!u.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this||p);return}if(!u.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this||p);return}u=u.material.materials;break;case "bones":if(!u.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this||p);return}u=u.skeleton.bones;for(t=0;t<u.length;t++)if(u[t].name===H){H=t;break}break;default:if(void 0===u[t]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this||p);return}u=u[t]}if(void 0!==H){if(void 0===u[H]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this||p,u);return}u=u[H]}}H=u[x];if(void 0===H)console.error("THREE.PropertyBinding: Trying to update property for track: "+z.nodeName+"."+x+" but it wasn't found.",u);else{z=(this||p).Versioning.None;(this||p).targetObject=u;void 0!==u.needsUpdate?z=(this||p).Versioning.NeedsUpdate:void 0!==u.matrixWorldNeedsUpdate&&(z=(this||p).Versioning.MatrixWorldNeedsUpdate);t=(this||p).BindingType.Direct;if(void 0!==C){if("morphTargetInfluences"===x){if(!u.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this||p);return}if(u.geometry.isBufferGeometry){if(!u.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this||p);return}void 0!==u.morphTargetDictionary[C]&&(C=u.morphTargetDictionary[C])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this||p);return}}t=(this||p).BindingType.ArrayElement;(this||p).resolvedProperty=
H;(this||p).propertyIndex=C}else void 0!==H.fromArray&&void 0!==H.toArray?(t=(this||p).BindingType.HasFromToArray,(this||p).resolvedProperty=H):Array.isArray(H)?(t=(this||p).BindingType.EntireArray,(this||p).resolvedProperty=H):(this||p).propertyName=x;(this||p).getValue=(this||p).GetterByBindingType[t];(this||p).setValue=(this||p).SetterByBindingTypeAndVersioning[t][z]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+(this||p).path+" but it wasn't found.")},unbind:function(){(this||
p).node=null;(this||p).getValue=(this||p)._getValue_unbound;(this||p).setValue=(this||p)._setValue_unbound}});Object.assign(Mo.prototype,{_getValue_unbound:Mo.prototype.getValue,_setValue_unbound:Mo.prototype.setValue});Object.assign(Hca.prototype,{isAnimationObjectGroup:!0,add:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._paths,x=(this||p)._parsedPaths,C=(this||p)._bindings,H=C.length,N=void 0,T=u.length,W=(this||p).nCachedObjects_,Y=0,ea=arguments.length;Y!==ea;++Y){var sa=
arguments[Y],Aa=sa.uuid,Xa=z[Aa];if(void 0===Xa){Xa=T++;z[Aa]=Xa;u.push(sa);Xa=0;for(var Va=H;Xa!==Va;++Xa)C[Xa].push(new Mo(sa,t[Xa],x[Xa]))}else if(Xa<W){N=u[Xa];Va=--W;var vb=u[Va];z[vb.uuid]=Xa;u[Xa]=vb;z[Aa]=Va;u[Va]=sa;Aa=0;for(vb=H;Aa!==vb;++Aa){var sb=C[Aa],ad=sb[Xa];sb[Xa]=sb[Va];void 0===ad&&(ad=new Mo(sa,t[Aa],x[Aa]));sb[Va]=ad}}else u[Xa]!==N&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}(this||
p).nCachedObjects_=W},remove:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=t.length,C=(this||p).nCachedObjects_,H=0,N=arguments.length;H!==N;++H){var T=arguments[H],W=T.uuid,Y=z[W];if(void 0!==Y&&Y>=C){var ea=C++,sa=u[ea];z[sa.uuid]=Y;u[Y]=sa;z[W]=ea;u[ea]=T;T=0;for(W=x;T!==W;++T){sa=t[T];var Aa=sa[Y];sa[Y]=sa[ea];sa[ea]=Aa}}}(this||p).nCachedObjects_=C},uncache:function(){for(var u=(this||p)._objects,z=(this||p)._indicesByUUID,t=(this||p)._bindings,x=
t.length,C=(this||p).nCachedObjects_,H=u.length,N=0,T=arguments.length;N!==T;++N){var W=arguments[N].uuid,Y=z[W];if(void 0!==Y)if(delete z[W],Y<C){W=--C;var ea=u[W],sa=--H,Aa=u[sa];z[ea.uuid]=Y;u[Y]=ea;z[Aa.uuid]=W;u[W]=Aa;u.pop();ea=0;for(Aa=x;ea!==Aa;++ea){var Xa=t[ea],Va=Xa[sa];Xa[Y]=Xa[W];Xa[W]=Va;Xa.pop()}}else for(W=--H,sa=u[W],z[sa.uuid]=Y,u[Y]=sa,u.pop(),sa=0,ea=x;sa!==ea;++sa)Aa=t[sa],Aa[Y]=Aa[W],Aa.pop()}(this||p).nCachedObjects_=C},subscribe_:function(u,z){var t=(this||p)._bindingsIndicesByPath,
x=t[u],C=(this||p)._bindings;if(void 0!==x)return C[x];var H=(this||p)._paths,N=(this||p)._parsedPaths,T=(this||p)._objects,W=(this||p).nCachedObjects_,Y=Array(T.length);x=C.length;t[u]=x;H.push(u);N.push(z);C.push(Y);t=W;for(x=T.length;t!==x;++t)Y[t]=new Mo(T[t],u,z);return Y},unsubscribe_:function(u){var z=(this||p)._bindingsIndicesByPath,t=z[u];if(void 0!==t){var x=(this||p)._paths,C=(this||p)._parsedPaths,H=(this||p)._bindings,N=H.length-1,T=H[N];z[u[N]]=t;H[t]=T;H.pop();C[t]=C[N];C.pop();x[t]=
x[N];x.pop()}}});var Jva=function(){function u(t,x,C,H){(this||p)._mixer=t;(this||p)._clip=x;(this||p)._localRoot=C||null;(this||p).blendMode=H||x.blendMode;t=x.tracks;x=t.length;C=Array(x);H={endingStart:2400,endingEnd:2400};for(var N=0;N!==x;++N){var T=t[N].createInterpolant(null);C[N]=T;T.settings=H}(this||p)._interpolantSettings=H;(this||p)._interpolants=C;(this||p)._propertyBindings=Array(x);(this||p)._cacheIndex=null;(this||p)._byClipCacheIndex=null;(this||p)._timeScaleInterpolant=null;(this||
p)._weightInterpolant=null;(this||p).loop=2201;(this||p)._loopCount=-1;(this||p)._startTime=null;(this||p).time=0;(this||p).timeScale=1;(this||p)._effectiveTimeScale=1;(this||p).weight=1;(this||p)._effectiveWeight=1;(this||p).repetitions=Infinity;(this||p).paused=!1;(this||p).enabled=!0;(this||p).clampWhenFinished=!1;(this||p).zeroSlopeAtStart=!0;(this||p).zeroSlopeAtEnd=!0}var z=u.prototype;z.play=function(){(this||p)._mixer._activateAction(this||p);return this||p};z.stop=function(){(this||p)._mixer._deactivateAction(this||
p);return this.reset()};z.reset=function(){(this||p).paused=!1;(this||p).enabled=!0;(this||p).time=0;(this||p)._loopCount=-1;(this||p)._startTime=null;return this.stopFading().stopWarping()};z.isRunning=function(){return(this||p).enabled&&!(this||p).paused&&0!==(this||p).timeScale&&null===(this||p)._startTime&&(this||p)._mixer._isActiveAction(this||p)};z.isScheduled=function(){return(this||p)._mixer._isActiveAction(this||p)};z.startAt=function(t){(this||p)._startTime=t;return this||p};z.setLoop=function(t,
x){(this||p).loop=t;(this||p).repetitions=x;return this||p};z.setEffectiveWeight=function(t){(this||p).weight=t;(this||p)._effectiveWeight=(this||p).enabled?t:0;return this.stopFading()};z.getEffectiveWeight=function(){return(this||p)._effectiveWeight};z.fadeIn=function(t){return this._scheduleFading(t,0,1)};z.fadeOut=function(t){return this._scheduleFading(t,1,0)};z.crossFadeFrom=function(t,x,C){t.fadeOut(x);this.fadeIn(x);if(C){C=(this||p)._clip.duration;var H=t._clip.duration,N=C/H;t.warp(1,H/
C,x);this.warp(N,1,x)}return this||p};z.crossFadeTo=function(t,x,C){return t.crossFadeFrom(this||p,x,C)};z.stopFading=function(){var t=(this||p)._weightInterpolant;null!==t&&((this||p)._weightInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.setEffectiveTimeScale=function(t){(this||p).timeScale=t;(this||p)._effectiveTimeScale=(this||p).paused?0:t;return this.stopWarping()};z.getEffectiveTimeScale=function(){return(this||p)._effectiveTimeScale};z.setDuration=function(t){(this||
p).timeScale=(this||p)._clip.duration/t;return this.stopWarping()};z.syncWith=function(t){(this||p).time=t.time;(this||p).timeScale=t.timeScale;return this.stopWarping()};z.halt=function(t){return this.warp((this||p)._effectiveTimeScale,0,t)};z.warp=function(t,x,C){var H=(this||p)._mixer,N=H.time,T=(this||p).timeScale,W=(this||p)._timeScaleInterpolant;null===W&&(W=H._lendControlInterpolant(),(this||p)._timeScaleInterpolant=W);H=W.parameterPositions;W=W.sampleValues;H[0]=N;H[1]=N+C;W[0]=t/T;W[1]=x/
T;return this||p};z.stopWarping=function(){var t=(this||p)._timeScaleInterpolant;null!==t&&((this||p)._timeScaleInterpolant=null,(this||p)._mixer._takeBackControlInterpolant(t));return this||p};z.getMixer=function(){return(this||p)._mixer};z.getClip=function(){return(this||p)._clip};z.getRoot=function(){return(this||p)._localRoot||(this||p)._mixer._root};z._update=function(t,x,C,H){if((this||p).enabled){var N=(this||p)._startTime;if(null!==N){x=(t-N)*C;if(0>x||0===C)return;(this||p)._startTime=null;
x*=C}x*=this._updateTimeScale(t);C=this._updateTime(x);t=this._updateWeight(t);if(0<t)switch(x=(this||p)._interpolants,N=(this||p)._propertyBindings,(this||p).blendMode){case 2501:H=0;for(var T=x.length;H!==T;++H)x[H].evaluate(C),N[H].accumulateAdditive(t);break;default:T=0;for(var W=x.length;T!==W;++T)x[T].evaluate(C),N[T].accumulate(H,t)}}else this._updateWeight(t)};z._updateWeight=function(t){var x=0;if((this||p).enabled){x=(this||p).weight;var C=(this||p)._weightInterpolant;if(null!==C){var H=
C.evaluate(t)[0];x*=H;t>C.parameterPositions[1]&&(this.stopFading(),0===H&&((this||p).enabled=!1))}}return(this||p)._effectiveWeight=x};z._updateTimeScale=function(t){var x=0;if(!(this||p).paused){x=(this||p).timeScale;var C=(this||p)._timeScaleInterpolant;if(null!==C){var H=C.evaluate(t)[0];x*=H;t>C.parameterPositions[1]&&(this.stopWarping(),0===x?(this||p).paused=!0:(this||p).timeScale=x)}}return(this||p)._effectiveTimeScale=x};z._updateTime=function(t){var x=(this||p)._clip.duration,C=(this||p).loop,
H=(this||p).time+t,N=(this||p)._loopCount,T=2202===C;if(0===t)return-1===N?H:T&&1===(N&1)?x-H:H;if(2200===C)a:{if(-1===N&&((this||p)._loopCount=0,this._setEndings(!0,!0,!1)),H>=x)H=x;else if(0>H)H=0;else{(this||p).time=H;break a}(this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1;(this||p).time=H;(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0>t?-1:1})}else{-1===N&&(0<=t?(N=0,this._setEndings(!0,0===(this||p).repetitions,T)):this._setEndings(0===(this||
p).repetitions,!0,T));if(H>=x||0>H){C=Math.floor(H/x);H-=x*C;N+=Math.abs(C);var W=(this||p).repetitions-N;0>=W?((this||p).clampWhenFinished?(this||p).paused=!0:(this||p).enabled=!1,H=0<t?x:0,(this||p).time=H,(this||p)._mixer.dispatchEvent({type:"finished",action:this||p,direction:0<t?1:-1})):(1===W?(t=0>t,this._setEndings(t,!t,T)):this._setEndings(!1,!1,T),(this||p)._loopCount=N,(this||p).time=H,(this||p)._mixer.dispatchEvent({type:"loop",action:this||p,loopDelta:C}))}else(this||p).time=H;if(T&&1===
(N&1))return x-H}return H};z._setEndings=function(t,x,C){var H=(this||p)._interpolantSettings;C?(H.endingStart=2401,H.endingEnd=2401):(H.endingStart=t?(this||p).zeroSlopeAtStart?2401:2400:2402,H.endingEnd=x?(this||p).zeroSlopeAtEnd?2401:2400:2402)};z._scheduleFading=function(t,x,C){var H=(this||p)._mixer,N=H.time,T=(this||p)._weightInterpolant;null===T&&(T=H._lendControlInterpolant(),(this||p)._weightInterpolant=T);H=T.parameterPositions;T=T.sampleValues;H[0]=N;T[0]=x;H[1]=N+t;T[1]=C;return this||
p};return u}();GX.prototype=Object.assign(Object.create(d.prototype),{constructor:GX,_bindAction:function(u,z){var t=u._localRoot||(this||p)._root,x=u._clip.tracks,C=x.length,H=u._propertyBindings;u=u._interpolants;var N=t.uuid,T=(this||p)._bindingsByRootAndName,W=T[N];void 0===W&&(W={},T[N]=W);for(T=0;T!==C;++T){var Y=x[T],ea=Y.name,sa=W[ea];if(void 0===sa){sa=H[T];if(void 0!==sa){null===sa._cacheIndex&&(++sa.referenceCount,this._addInactiveBinding(sa,N,ea));continue}sa=new FX(Mo.create(t,ea,z&&
z._propertyBindings[T].binding.parsedPath),Y.ValueTypeName,Y.getValueSize());++sa.referenceCount;this._addInactiveBinding(sa,N,ea)}H[T]=sa;u[T].resultBuffer=sa.buffer}},_activateAction:function(u){if(!this._isActiveAction(u)){if(null===u._cacheIndex){var z=(u._localRoot||(this||p)._root).uuid,t=u._clip.uuid,x=(this||p)._actionsByClip[t];this._bindAction(u,x&&x.knownActions[0]);this._addInactiveAction(u,t,z)}z=u._propertyBindings;t=0;for(x=z.length;t!==x;++t){var C=z[t];0===C.useCount++&&(this._lendBinding(C),
C.saveOriginalState())}this._lendAction(u)}},_deactivateAction:function(u){if(this._isActiveAction(u)){for(var z=u._propertyBindings,t=0,x=z.length;t!==x;++t){var C=z[t];0===--C.useCount&&(C.restoreOriginalState(),this._takeBackBinding(C))}this._takeBackAction(u)}},_initMemoryManager:function(){(this||p)._actions=[];(this||p)._nActiveActions=0;(this||p)._actionsByClip={};(this||p)._bindings=[];(this||p)._nActiveBindings=0;(this||p)._bindingsByRootAndName={};(this||p)._controlInterpolants=[];(this||
p)._nActiveControlInterpolants=0;var u=this||p;(this||p).stats={actions:{get total(){return u._actions.length},get inUse(){return u._nActiveActions}},bindings:{get total(){return u._bindings.length},get inUse(){return u._nActiveBindings}},controlInterpolants:{get total(){return u._controlInterpolants.length},get inUse(){return u._nActiveControlInterpolants}}}},_isActiveAction:function(u){u=u._cacheIndex;return null!==u&&u<(this||p)._nActiveActions},_addInactiveAction:function(u,z,t){var x=(this||
p)._actions,C=(this||p)._actionsByClip,H=C[z];void 0===H?(H={knownActions:[u],actionByRoot:{}},u._byClipCacheIndex=0,C[z]=H):(z=H.knownActions,u._byClipCacheIndex=z.length,z.push(u));u._cacheIndex=x.length;x.push(u);H.actionByRoot[t]=u},_removeInactiveAction:function(u){var z=(this||p)._actions,t=z[z.length-1],x=u._cacheIndex;t._cacheIndex=x;z[x]=t;z.pop();u._cacheIndex=null;z=u._clip.uuid;t=(this||p)._actionsByClip;x=t[z];var C=x.knownActions,H=C[C.length-1],N=u._byClipCacheIndex;H._byClipCacheIndex=
N;C[N]=H;C.pop();u._byClipCacheIndex=null;delete x.actionByRoot[(u._localRoot||(this||p)._root).uuid];0===C.length&&delete t[z];this._removeInactiveBindingsForAction(u)},_removeInactiveBindingsForAction:function(u){u=u._propertyBindings;for(var z=0,t=u.length;z!==t;++z){var x=u[z];0===--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(u){var z=(this||p)._actions,t=u._cacheIndex,x=(this||p)._nActiveActions++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackAction:function(u){var z=
(this||p)._actions,t=u._cacheIndex,x=--(this||p)._nActiveActions,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_addInactiveBinding:function(u,z,t){var x=(this||p)._bindingsByRootAndName,C=(this||p)._bindings,H=x[z];void 0===H&&(H={},x[z]=H);H[t]=u;u._cacheIndex=C.length;C.push(u)},_removeInactiveBinding:function(u){var z=(this||p)._bindings,t=u.binding,x=t.rootNode.uuid;t=t.path;var C=(this||p)._bindingsByRootAndName,H=C[x],N=z[z.length-1];u=u._cacheIndex;N._cacheIndex=u;z[u]=N;z.pop();delete H[t];
0===Object.keys(H).length&&delete C[x]},_lendBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=(this||p)._nActiveBindings++,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_takeBackBinding:function(u){var z=(this||p)._bindings,t=u._cacheIndex,x=--(this||p)._nActiveBindings,C=z[x];u._cacheIndex=x;z[x]=u;C._cacheIndex=t;z[t]=C},_lendControlInterpolant:function(){var u=(this||p)._controlInterpolants,z=(this||p)._nActiveControlInterpolants++,t=u[z];void 0===t&&(t=new NI(new Float32Array(2),
new Float32Array(2),1,(this||p)._controlInterpolantsResultBuffer),t.__cacheIndex=z,u[z]=t);return t},_takeBackControlInterpolant:function(u){var z=(this||p)._controlInterpolants,t=u.__cacheIndex,x=--(this||p)._nActiveControlInterpolants,C=z[x];u.__cacheIndex=x;z[x]=u;C.__cacheIndex=t;z[t]=C},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(u,z,t){var x=z||(this||p)._root,C=x.uuid;x="string"===typeof u?os.findByName(x,u):u;u=null!==x?x.uuid:u;var H=(this||p)._actionsByClip[u],
N=null;void 0===t&&(t=null!==x?x.blendMode:2500);if(void 0!==H){N=H.actionByRoot[C];if(void 0!==N&&N.blendMode===t)return N;N=H.knownActions[0];null===x&&(x=N._clip)}if(null===x)return null;z=new Jva(this||p,x,z,t);this._bindAction(z,N);this._addInactiveAction(z,u,C);return z},existingAction:function(u,z){var t=z||(this||p)._root;z=t.uuid;t="string"===typeof u?os.findByName(t,u):u;u=(this||p)._actionsByClip[t?t.uuid:u];return void 0!==u?u.actionByRoot[z]||null:null},stopAllAction:function(){for(var u=
(this||p)._actions,z=(this||p)._nActiveActions-1;0<=z;--z)u[z].stop();return this||p},update:function(u){u*=(this||p).timeScale;for(var z=(this||p)._actions,t=(this||p)._nActiveActions,x=(this||p).time+=u,C=Math.sign(u),H=(this||p)._accuIndex^=1,N=0;N!==t;++N)z[N]._update(x,u,C,H);u=(this||p)._bindings;z=(this||p)._nActiveBindings;for(t=0;t!==z;++t)u[t].apply(H);return this||p},setTime:function(u){for(var z=(this||p).time=0;z<(this||p)._actions.length;z++)(this||p)._actions[z].time=0;return this.update(u)},
getRoot:function(){return(this||p)._root},uncacheClip:function(u){var z=(this||p)._actions;u=u.uuid;var t=(this||p)._actionsByClip,x=t[u];if(void 0!==x){x=x.knownActions;for(var C=0,H=x.length;C!==H;++C){var N=x[C];this._deactivateAction(N);var T=N._cacheIndex,W=z[z.length-1];N._cacheIndex=null;N._byClipCacheIndex=null;W._cacheIndex=T;z[T]=W;z.pop();this._removeInactiveBindingsForAction(N)}delete t[u]}},uncacheRoot:function(u){u=u.uuid;var z=(this||p)._actionsByClip;for(x in z){var t=z[x].actionByRoot[u];
void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}var x=(this||p)._bindingsByRootAndName[u];if(void 0!==x)for(var C in x)u=x[C],u.restoreOriginalState(),this._removeInactiveBinding(u)},uncacheAction:function(u,z){u=this.existingAction(u,z);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}});var Ida=function(){function u(z,t){"string"===typeof z&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),z=t);(this||p).value=z}u.prototype.clone=function(){return new u(void 0===
(this||p).value.clone?(this||p).value:(this||p).value.clone())};return u}();HX.prototype=Object.assign(Object.create(Xq.prototype),{constructor:HX,isInstancedInterleavedBuffer:!0,copy:function(u){Xq.prototype.copy.call(this||p,u);(this||p).meshPerAttribute=u.meshPerAttribute;return this||p},clone:function(u){u=Xq.prototype.clone.call(this||p,u);u.meshPerAttribute=(this||p).meshPerAttribute;return u},toJSON:function(u){u=Xq.prototype.toJSON.call(this||p,u);u.isInstancedInterleavedBuffer=!0;u.meshPerAttribute=
(this||p).meshPerAttribute;return u}});Object.defineProperty(IX.prototype,"needsUpdate",{set:function(u){!0===u&&(this||p).version++}});Object.assign(IX.prototype,{isGLBufferAttribute:!0,setBuffer:function(u){(this||p).buffer=u;return this||p},setType:function(u,z){(this||p).type=u;(this||p).elementSize=z;return this||p},setItemSize:function(u){(this||p).itemSize=u;return this||p},setCount:function(u){(this||p).count=u;return this||p}});Object.assign(JX.prototype,{set:function(u,z){(this||p).ray.set(u,
z)},setFromCamera:function(u,z){z&&z.isPerspectiveCamera?((this||p).ray.origin.setFromMatrixPosition(z.matrixWorld),(this||p).ray.direction.set(u.x,u.y,.5).unproject(z).sub((this||p).ray.origin).normalize(),(this||p).camera=z):z&&z.isOrthographicCamera?((this||p).ray.origin.set(u.x,u.y,(z.near+z.far)/(z.near-z.far)).unproject(z),(this||p).ray.direction.set(0,0,-1).transformDirection(z.matrixWorld),(this||p).camera=z):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(u,
z,t){t=t||[];KX(u,this||p,t,z);t.sort(Ica);return t},intersectObjects:function(u,z,t){t=t||[];if(!1===Array.isArray(u))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),t;for(var x=0,C=u.length;x<C;x++)KX(u[x],this||p,t,z);t.sort(Ica);return t}});var Kva=function(){function u(t,x,C){void 0===t&&(t=1);void 0===x&&(x=0);void 0===C&&(C=0);(this||p).radius=t;(this||p).phi=x;(this||p).theta=C;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||
p).phi=x;(this||p).theta=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;(this||p).phi=t.phi;(this||p).theta=t.theta;return this||p};z.makeSafe=function(){(this||p).phi=Math.max(1E-6,Math.min(Math.PI-1E-6,(this||p).phi));return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+x*x+C*C);0===(this||p).radius?((this||
p).theta=0,(this||p).phi=0):((this||p).theta=Math.atan2(t,C),(this||p).phi=Math.acos(ti.clamp(x/(this||p).radius,-1,1)));return this||p};return u}(),Lva=function(){function u(t,x,C){(this||p).radius=void 0!==t?t:1;(this||p).theta=void 0!==x?x:0;(this||p).y=void 0!==C?C:0;return this||p}var z=u.prototype;z.set=function(t,x,C){(this||p).radius=t;(this||p).theta=x;(this||p).y=C;return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).radius=t.radius;
(this||p).theta=t.theta;(this||p).y=t.y;return this||p};z.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)};z.setFromCartesianCoords=function(t,x,C){(this||p).radius=Math.sqrt(t*t+C*C);(this||p).theta=Math.atan2(t,C);(this||p).y=x;return this||p};return u}(),Jda=new cf,Kda=function(){function u(t,x){Object.defineProperty(this||p,"isBox2",{value:!0});(this||p).min=void 0!==t?t:new cf(Infinity,Infinity);(this||p).max=void 0!==x?x:new cf(-Infinity,-Infinity)}var z=u.prototype;
z.set=function(t,x){(this||p).min.copy(t);(this||p).max.copy(x);return this||p};z.setFromPoints=function(t){this.makeEmpty();for(var x=0,C=t.length;x<C;x++)this.expandByPoint(t[x]);return this||p};z.setFromCenterAndSize=function(t,x){x=Jda.copy(x).multiplyScalar(.5);(this||p).min.copy(t).sub(x);(this||p).max.copy(t).add(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).min.copy(t.min);(this||p).max.copy(t.max);return this||p};z.makeEmpty=
function(){(this||p).min.x=(this||p).min.y=Infinity;(this||p).max.x=(this||p).max.y=-Infinity;return this||p};z.isEmpty=function(){return(this||p).max.x<(this||p).min.x||(this||p).max.y<(this||p).min.y};z.getCenter=function(t){void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new cf);return this.isEmpty()?t.set(0,0):t.addVectors((this||p).min,(this||p).max).multiplyScalar(.5)};z.getSize=function(t){void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),
t=new cf);return this.isEmpty()?t.set(0,0):t.subVectors((this||p).max,(this||p).min)};z.expandByPoint=function(t){(this||p).min.min(t);(this||p).max.max(t);return this||p};z.expandByVector=function(t){(this||p).min.sub(t);(this||p).max.add(t);return this||p};z.expandByScalar=function(t){(this||p).min.addScalar(-t);(this||p).max.addScalar(t);return this||p};z.containsPoint=function(t){return t.x<(this||p).min.x||t.x>(this||p).max.x||t.y<(this||p).min.y||t.y>(this||p).max.y?!1:!0};z.containsBox=function(t){return(this||
p).min.x<=t.min.x&&t.max.x<=(this||p).max.x&&(this||p).min.y<=t.min.y&&t.max.y<=(this||p).max.y};z.getParameter=function(t,x){void 0===x&&(console.warn("THREE.Box2: .getParameter() target is now required"),x=new cf);return x.set((t.x-(this||p).min.x)/((this||p).max.x-(this||p).min.x),(t.y-(this||p).min.y)/((this||p).max.y-(this||p).min.y))};z.intersectsBox=function(t){return t.max.x<(this||p).min.x||t.min.x>(this||p).max.x||t.max.y<(this||p).min.y||t.min.y>(this||p).max.y?!1:!0};z.clampPoint=function(t,
x){void 0===x&&(console.warn("THREE.Box2: .clampPoint() target is now required"),x=new cf);return x.copy(t).clamp((this||p).min,(this||p).max)};z.distanceToPoint=function(t){return Jda.copy(t).clamp((this||p).min,(this||p).max).sub(t).length()};z.intersect=function(t){(this||p).min.max(t.min);(this||p).max.min(t.max);return this||p};z.union=function(t){(this||p).min.min(t.min);(this||p).max.max(t.max);return this||p};z.translate=function(t){(this||p).min.add(t);(this||p).max.add(t);return this||p};
z.equals=function(t){return t.min.equals((this||p).min)&&t.max.equals((this||p).max)};return u}(),Lda=new wc,MP=new wc,Mda=function(){function u(t,x){(this||p).start=void 0!==t?t:new wc;(this||p).end=void 0!==x?x:new wc}var z=u.prototype;z.set=function(t,x){(this||p).start.copy(t);(this||p).end.copy(x);return this||p};z.clone=function(){return(new (this||p).constructor).copy(this||p)};z.copy=function(t){(this||p).start.copy(t.start);(this||p).end.copy(t.end);return this||p};z.getCenter=function(t){void 0===
t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new wc);return t.addVectors((this||p).start,(this||p).end).multiplyScalar(.5)};z.delta=function(t){void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new wc);return t.subVectors((this||p).end,(this||p).start)};z.distanceSq=function(){return(this||p).start.distanceToSquared((this||p).end)};z.distance=function(){return(this||p).start.distanceTo((this||p).end)};z.at=function(t,x){void 0===x&&(console.warn("THREE.Line3: .at() target is now required"),
x=new wc);return this.delta(x).multiplyScalar(t).add((this||p).start)};z.closestPointToPointParameter=function(t,x){Lda.subVectors(t,(this||p).start);MP.subVectors((this||p).end,(this||p).start);t=MP.dot(MP);t=MP.dot(Lda)/t;x&&(t=ti.clamp(t,0,1));return t};z.closestPointToPoint=function(t,x,C){t=this.closestPointToPointParameter(t,x);void 0===C&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),C=new wc);return this.delta(C).multiplyScalar(t).add((this||p).start)};z.applyMatrix4=
function(t){(this||p).start.applyMatrix4(t);(this||p).end.applyMatrix4(t);return this||p};z.equals=function(t){return t.start.equals((this||p).start)&&t.end.equals((this||p).end)};return u}();SI.prototype=Object.create(E.prototype);SI.prototype.constructor=SI;SI.prototype.isImmediateRenderObject=!0;var Nda=new wc,Mva=function(u){function z(x,C){var H=u.call(this||p)||this||p;H.light=x;H.light.updateMatrixWorld();H.matrix=x.matrixWorld;H.matrixAutoUpdate=!1;H.color=C;x=new ya;C=[0,0,0,0,0,1,0,0,0,
1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var N=0,T=1;32>N;N++,T++){var W=N/32*Math.PI*2,Y=T/32*Math.PI*2;C.push(Math.cos(W),Math.sin(W),1,Math.cos(Y),Math.sin(Y),1)}x.setAttribute("position",new V(C,3));C=new Sl({fog:!1,toneMapped:!1});H.cone=new up(x,C);H.add(H.cone);H.update();return H}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).cone.geometry.dispose();(this||p).cone.material.dispose()};t.update=function(){(this||p).light.updateMatrixWorld();var x=(this||p).light.distance?(this||
p).light.distance:1E3,C=x*Math.tan((this||p).light.angle);(this||p).cone.scale.set(C,C,x);Nda.setFromMatrixPosition((this||p).light.target.matrixWorld);(this||p).cone.lookAt(Nda);void 0!==(this||p).color?(this||p).cone.material.color.set((this||p).color):(this||p).cone.material.color.copy((this||p).light.color)};return z}(E),Rz=new wc,NP=new uj,BY=new uj,Oda=function(u){function z(t){var x=Jca(t);var C=new ya;for(var H=[],N=[],T=new Hg(0,0,1),W=new Hg(0,1,0),Y=0;Y<x.length;Y++){var ea=x[Y];ea.parent&&
ea.parent.isBone&&(H.push(0,0,0),H.push(0,0,0),N.push(T.r,T.g,T.b),N.push(W.r,W.g,W.b))}C.setAttribute("position",new V(H,3));C.setAttribute("color",new V(N,3));H=new Sl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});C=u.call(this||p,C,H)||this||p;C.type="SkeletonHelper";C.isSkeletonHelper=!0;C.root=t;C.bones=x;C.matrix=t.matrixWorld;C.matrixAutoUpdate=!1;return C}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).bones,C=(this||p).geometry,H=C.getAttribute("position");
BY.getInverse((this||p).root.matrixWorld);for(var N=0,T=0;N<x.length;N++){var W=x[N];W.parent&&W.parent.isBone&&(NP.multiplyMatrices(BY,W.matrixWorld),Rz.setFromMatrixPosition(NP),H.setXYZ(T,Rz.x,Rz.y,Rz.z),NP.multiplyMatrices(BY,W.parent.matrixWorld),Rz.setFromMatrixPosition(NP),H.setXYZ(T+1,Rz.x,Rz.y,Rz.z),T+=2)}C.getAttribute("position").needsUpdate=!0;u.prototype.updateMatrixWorld.call(this||p,t)};return z}(up),Nva=function(u){function z(x,C,H){C=new IP(C,4,2);var N=new L({wireframe:!0,fog:!1,
toneMapped:!1});C=u.call(this||p,C,N)||this||p;C.light=x;C.light.updateMatrixWorld();C.color=H;C.type="PointLightHelper";C.matrix=C.light.matrixWorld;C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).geometry.dispose();(this||p).material.dispose()};t.update=function(){void 0!==(this||p).color?(this||p).material.color.set((this||p).color):(this||p).material.color.copy((this||p).light.color)};return z}(jb),Ova=new wc,Pda=new Hg,Qda=new Hg,Pva=function(u){function z(x,
C,H){var N=u.call(this||p)||this||p;N.light=x;N.light.updateMatrixWorld();N.matrix=x.matrixWorld;N.matrixAutoUpdate=!1;N.color=H;x=new HP(C);x.rotateY(.5*Math.PI);N.material=new L({wireframe:!0,fog:!1,toneMapped:!1});void 0===N.color&&(N.material.vertexColors=!0);C=x.getAttribute("position");C=new Float32Array(3*C.count);x.setAttribute("color",new S(C,3));N.add(new jb(x,N.material));N.update();return N}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).children[0].geometry.dispose();(this||p).children[0].material.dispose()};
t.update=function(){var x=(this||p).children[0];if(void 0!==(this||p).color)(this||p).material.color.set((this||p).color);else{var C=x.geometry.getAttribute("color");Pda.copy((this||p).light.color);Qda.copy((this||p).light.groundColor);for(var H=0,N=C.count;H<N;H++){var T=H<N/2?Pda:Qda;C.setXYZ(H,T.r,T.g,T.b)}C.needsUpdate=!0}x.lookAt(Ova.setFromMatrixPosition((this||p).light.matrixWorld).negate())};return z}(E),Rda=function(u){function z(t,x,C,H){t=t||10;x=x||10;C=new Hg(void 0!==C?C:4473924);H=
new Hg(void 0!==H?H:8947848);var N=x/2,T=t/x,W=t/2;t=[];for(var Y=[],ea=0,sa=0,Aa=-W;ea<=x;ea++,Aa+=T){t.push(-W,0,Aa,W,0,Aa);t.push(Aa,0,-W,Aa,0,W);var Xa=ea===N?C:H;Xa.toArray(Y,sa);sa+=3;Xa.toArray(Y,sa);sa+=3;Xa.toArray(Y,sa);sa+=3;Xa.toArray(Y,sa);sa+=3}x=new ya;x.setAttribute("position",new V(t,3));x.setAttribute("color",new V(Y,3));C=new Sl({vertexColors:!0,toneMapped:!1});x=u.call(this||p,x,C)||this||p;x.type="GridHelper";return x}g(z,u);return z}(up),Qva=function(u){function z(t,x,C,H,N,
T){t=t||10;x=x||16;C=C||8;H=H||64;N=new Hg(void 0!==N?N:4473924);T=new Hg(void 0!==T?T:8947848);var W=[];for(var Y=[],ea=0;ea<=x;ea++){var sa=ea/x*2*Math.PI,Aa=Math.sin(sa)*t;sa=Math.cos(sa)*t;W.push(0,0,0);W.push(Aa,0,sa);Aa=ea&1?N:T;Y.push(Aa.r,Aa.g,Aa.b);Y.push(Aa.r,Aa.g,Aa.b)}for(x=0;x<=C;x++)for(ea=x&1?N:T,Aa=t-t/C*x,sa=0;sa<H;sa++){var Xa=sa/H*2*Math.PI,Va=Math.sin(Xa)*Aa;Xa=Math.cos(Xa)*Aa;W.push(Va,0,Xa);Y.push(ea.r,ea.g,ea.b);Xa=(sa+1)/H*2*Math.PI;Va=Math.sin(Xa)*Aa;Xa=Math.cos(Xa)*Aa;W.push(Va,
0,Xa);Y.push(ea.r,ea.g,ea.b)}t=new ya;t.setAttribute("position",new V(W,3));t.setAttribute("color",new V(Y,3));W=new Sl({vertexColors:!0,toneMapped:!1});W=u.call(this||p,t,W)||this||p;W.type="PolarGridHelper";return W}g(z,u);return z}(up),Sda=new wc,OP=new wc,Tda=new wc,Rva=function(u){function z(x,C,H){var N=u.call(this||p)||this||p;N.light=x;N.light.updateMatrixWorld();N.matrix=x.matrixWorld;N.matrixAutoUpdate=!1;N.color=H;void 0===C&&(C=1);x=new ya;x.setAttribute("position",new V([-C,C,0,C,C,0,
C,-C,0,-C,-C,0,-C,C,0],3));C=new Sl({fog:!1,toneMapped:!1});N.lightPlane=new ns(x,C);N.add(N.lightPlane);x=new ya;x.setAttribute("position",new V([0,0,0,0,0,1],3));N.targetLine=new ns(x,C);N.add(N.targetLine);N.update();return N}g(z,u);var t=z.prototype;t.dispose=function(){(this||p).lightPlane.geometry.dispose();(this||p).lightPlane.material.dispose();(this||p).targetLine.geometry.dispose();(this||p).targetLine.material.dispose()};t.update=function(){Sda.setFromMatrixPosition((this||p).light.matrixWorld);
OP.setFromMatrixPosition((this||p).light.target.matrixWorld);Tda.subVectors(OP,Sda);(this||p).lightPlane.lookAt(OP);void 0!==(this||p).color?((this||p).lightPlane.material.color.set((this||p).color),(this||p).targetLine.material.color.set((this||p).color)):((this||p).lightPlane.material.color.copy((this||p).light.color),(this||p).targetLine.material.color.copy((this||p).light.color));(this||p).targetLine.lookAt(OP);(this||p).targetLine.scale.z=Tda.length()};return z}(E),kP=new wc,qm=new Lb,Sva=function(u){function z(t){function x(vb,
sb,ad){C(vb,ad);C(sb,ad)}function C(vb,sb){T.push(0,0,0);W.push(sb.r,sb.g,sb.b);void 0===Y[vb]&&(Y[vb]=[]);Y[vb].push(T.length/3-1)}var H=new ya;var N=new Sl({color:16777215,vertexColors:!0,toneMapped:!1}),T=[],W=[],Y={},ea=new Hg(16755200),sa=new Hg(16711680),Aa=new Hg(43775),Xa=new Hg(16777215),Va=new Hg(3355443);x("n1","n2",ea);x("n2","n4",ea);x("n4","n3",ea);x("n3","n1",ea);x("f1","f2",ea);x("f2","f4",ea);x("f4","f3",ea);x("f3","f1",ea);x("n1","f1",ea);x("n2","f2",ea);x("n3","f3",ea);x("n4","f4",
ea);x("p","n1",sa);x("p","n2",sa);x("p","n3",sa);x("p","n4",sa);x("u1","u2",Aa);x("u2","u3",Aa);x("u3","u1",Aa);x("c","t",Xa);x("p","c",Va);x("cn1","cn2",Va);x("cn3","cn4",Va);x("cf1","cf2",Va);x("cf3","cf4",Va);H.setAttribute("position",new V(T,3));H.setAttribute("color",new V(W,3));H=u.call(this||p,H,N)||this||p;H.type="CameraHelper";H.camera=t;H.camera.updateProjectionMatrix&&H.camera.updateProjectionMatrix();H.matrix=t.matrixWorld;H.matrixAutoUpdate=!1;H.pointMap=Y;H.update();return H}g(z,u);
z.prototype.update=function(){var t=(this||p).geometry,x=(this||p).pointMap;qm.projectionMatrixInverse.copy((this||p).camera.projectionMatrixInverse);ym("c",x,t,qm,0,0,-1);ym("t",x,t,qm,0,0,1);ym("n1",x,t,qm,-1,-1,-1);ym("n2",x,t,qm,1,-1,-1);ym("n3",x,t,qm,-1,1,-1);ym("n4",x,t,qm,1,1,-1);ym("f1",x,t,qm,-1,-1,1);ym("f2",x,t,qm,1,-1,1);ym("f3",x,t,qm,-1,1,1);ym("f4",x,t,qm,1,1,1);ym("u1",x,t,qm,.7,1.1,-1);ym("u2",x,t,qm,-.7,1.1,-1);ym("u3",x,t,qm,0,2,-1);ym("cf1",x,t,qm,-1,0,1);ym("cf2",x,t,qm,1,0,
1);ym("cf3",x,t,qm,0,-1,1);ym("cf4",x,t,qm,0,1,1);ym("cn1",x,t,qm,-1,0,-1);ym("cn2",x,t,qm,1,0,-1);ym("cn3",x,t,qm,0,-1,-1);ym("cn4",x,t,qm,0,1,-1);t.getAttribute("position").needsUpdate=!0};return z}(up),PP=new Mv,Uda=function(u){function z(x,C){void 0===C&&(C=16776960);var H=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),N=new Float32Array(24),T=new ya;T.setIndex(new S(H,1));T.setAttribute("position",new S(N,3));C=u.call(this||p,T,new Sl({color:C,toneMapped:!1}))||this||p;C.object=
x;C.type="BoxHelper";C.matrixAutoUpdate=!1;C.update();return C}g(z,u);var t=z.prototype;t.update=function(x){void 0!==x&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==(this||p).object&&PP.setFromObject((this||p).object);if(!PP.isEmpty()){x=PP.min;var C=PP.max,H=(this||p).geometry.attributes.position,N=H.array;N[0]=C.x;N[1]=C.y;N[2]=C.z;N[3]=x.x;N[4]=C.y;N[5]=C.z;N[6]=x.x;N[7]=x.y;N[8]=C.z;N[9]=C.x;N[10]=x.y;N[11]=C.z;N[12]=C.x;N[13]=C.y;N[14]=x.z;N[15]=x.x;N[16]=C.y;
N[17]=x.z;N[18]=x.x;N[19]=x.y;N[20]=x.z;N[21]=C.x;N[22]=x.y;N[23]=x.z;H.needsUpdate=!0;(this||p).geometry.computeBoundingSphere()}};t.setFromObject=function(x){(this||p).object=x;this.update();return this||p};t.copy=function(x){up.prototype.copy.call(this||p,x);(this||p).object=x.object;return this||p};return z}(up),Tva=function(u){function z(t,x){void 0===x&&(x=16776960);var C=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),H=new ya;H.setIndex(new S(C,1));H.setAttribute("position",
new V([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));x=u.call(this||p,H,new Sl({color:x,toneMapped:!1}))||this||p;x.box=t;x.type="Box3Helper";x.geometry.computeBoundingSphere();return x}g(z,u);z.prototype.updateMatrixWorld=function(t){var x=(this||p).box;x.isEmpty()||(x.getCenter((this||p).position),x.getSize((this||p).scale),(this||p).scale.multiplyScalar(.5),u.prototype.updateMatrixWorld.call(this||p,t))};return z}(up),Uva=function(u){function z(t,x,C){C=void 0!==C?C:16776960;
var H=new ya;H.setAttribute("position",new V([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));H.computeBoundingSphere();H=u.call(this||p,H,new Sl({color:C,toneMapped:!1}))||this||p;H.type="PlaneHelper";H.plane=t;H.size=void 0===x?1:x;t=new ya;t.setAttribute("position",new V([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));t.computeBoundingSphere();H.add(new jb(t,new L({color:C,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})));return H}g(z,u);z.prototype.updateMatrixWorld=
function(t){var x=-(this||p).plane.constant;1E-8>Math.abs(x)&&(x=1E-8);(this||p).scale.set(.5*(this||p).size,.5*(this||p).size,x);(this||p).children[0].material.side=0>x?1:0;this.lookAt((this||p).plane.normal);u.prototype.updateMatrixWorld.call(this||p,t)};return z}(ns),Vda=new wc,QP,CY,Vva=function(u){function z(x,C,H,N,T,W){var Y=u.call(this||p)||this||p;Y.type="ArrowHelper";void 0===x&&(x=new wc(0,0,1));void 0===C&&(C=new wc(0,0,0));void 0===H&&(H=1);void 0===N&&(N=16776960);void 0===T&&(T=.2*
H);void 0===W&&(W=.2*T);void 0===QP&&(QP=new ya,QP.setAttribute("position",new V([0,0,0,0,1,0],3)),CY=new cJ(0,.5,1,5,1),CY.translate(0,-.5,0));Y.position.copy(C);Y.line=new ns(QP,new Sl({color:N,toneMapped:!1}));Y.line.matrixAutoUpdate=!1;Y.add(Y.line);Y.cone=new jb(CY,new L({color:N,toneMapped:!1}));Y.cone.matrixAutoUpdate=!1;Y.add(Y.cone);Y.setDirection(x);Y.setLength(H,T,W);return Y}g(z,u);var t=z.prototype;t.setDirection=function(x){.99999<x.y?(this||p).quaternion.set(0,0,0,1):-.99999>x.y?(this||
p).quaternion.set(1,0,0,0):(Vda.set(x.z,0,-x.x).normalize(),(this||p).quaternion.setFromAxisAngle(Vda,Math.acos(x.y)))};t.setLength=function(x,C,H){void 0===C&&(C=.2*x);void 0===H&&(H=.2*C);(this||p).line.scale.set(1,Math.max(1E-4,x-C),1);(this||p).line.updateMatrix();(this||p).cone.scale.set(H,C,H);(this||p).cone.position.y=x;(this||p).cone.updateMatrix()};t.setColor=function(x){(this||p).line.material.color.set(x);(this||p).cone.material.color.set(x)};t.copy=function(x){u.prototype.copy.call(this||
p,x,!1);(this||p).line.copy(x.line);(this||p).cone.copy(x.cone);return this||p};return z}(E),Wda=function(u){function z(t){void 0===t&&(t=1);var x=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];t=new ya;t.setAttribute("position",new V(x,3));t.setAttribute("color",new V([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));x=new Sl({vertexColors:!0,toneMapped:!1});t=u.call(this||p,t,x)||this||p;t.type="AxesHelper";return t}g(z,u);return z}(up),wx,Kv=Math.pow(2,8),Xda=[.125,.215,.35,.446,.526,.582],Yda=5+Xda.length,
Lv=(wx={},wx[3E3]=0,wx[3001]=1,wx[3002]=2,wx[3004]=3,wx[3005]=4,wx[3006]=5,wx[3007]=6,wx),DY=new cF,EY=function(){for(var u=[],z=[],t=[],x=8,C=0;C<Yda;C++){var H=Math.pow(2,x);z.push(H);var N=1/H;4<C?N=Xda[C-8+4-1]:0==C&&(N=0);t.push(N);N=1/(H-1);H=-N/2;N=1+N/2;var T=[H,H,N,H,N,N,H,H,N,N,H,N];H=new Float32Array(108);N=new Float32Array(72);for(var W=new Float32Array(36),Y=0;6>Y;Y++){var ea=Y%3*2/3-1,sa=2<Y?0:-1;H.set([ea,sa,0,ea+2/3,sa,0,ea+2/3,sa+1,0,ea,sa,0,ea+2/3,sa+1,0,ea,sa+1,0],18*Y);N.set(T,
12*Y);W.set([Y,Y,Y,Y,Y,Y],6*Y)}T=new ya;T.setAttribute("position",new S(H,3));T.setAttribute("uv",new S(N,2));T.setAttribute("faceIndex",new S(W,1));u.push(T);4<x&&x--}return{_lodPlanes:u,_sizeLods:z,_sigmas:t}}(),eJ=EY._lodPlanes,Zda=EY._sizeLods,RP=EY._sigmas,FY=null,wC=(1+Math.sqrt(5))/2,rF=1/wC,$da=[new wc(1,1,1),new wc(-1,1,1),new wc(1,1,-1),new wc(-1,1,-1),new wc(0,wC,rF),new wc(0,wC,-rF),new wc(rF,0,wC),new wc(-rF,0,wC),new wc(wC,rF,0),new wc(-wC,rF,0)],Wva=function(){function u(t){(this||
p)._renderer=t;(this||p)._pingPongRenderTarget=null;t=new Float32Array(20);var x=new wc(0,1,0);t=new mx({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:x},inputEncoding:{value:Lv[3E3]},outputEncoding:{value:Lv[3E3]}},vertexShader:LX(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
MX()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});(this||p)._blurMaterial=t;(this||p)._equirectShader=null;(this||p)._cubemapShader=null;this._compileMaterial((this||p)._blurMaterial)}var z=u.prototype;z.fromScene=function(t,x,C,H){void 0===x&&(x=0);void 0===C&&(C=.1);void 0===H&&(H=100);FY=(this||p)._renderer.getRenderTarget();var N=this._allocateTargets();this._sceneToCubeUV(t,C,H,N);0<x&&this._blur(N,0,0,x);this._applyPMREM(N);this._cleanup(N);return N};z.fromEquirectangular=function(t){return this._fromTexture(t)};
z.fromCubemap=function(t){return this._fromTexture(t)};z.compileCubemapShader=function(){null===(this||p)._cubemapShader&&((this||p)._cubemapShader=Mca(),this._compileMaterial((this||p)._cubemapShader))};z.compileEquirectangularShader=function(){null===(this||p)._equirectShader&&((this||p)._equirectShader=Lca(),this._compileMaterial((this||p)._equirectShader))};z.dispose=function(){(this||p)._blurMaterial.dispose();null!==(this||p)._cubemapShader&&(this||p)._cubemapShader.dispose();null!==(this||
p)._equirectShader&&(this||p)._equirectShader.dispose();for(var t=0;t<eJ.length;t++)eJ[t].dispose()};z._cleanup=function(t){(this||p)._pingPongRenderTarget.dispose();(this||p)._renderer.setRenderTarget(FY);t.scissorTest=!1;lP(t,0,0,t.width,t.height)};z._fromTexture=function(t){FY=(this||p)._renderer.getRenderTarget();var x=this._allocateTargets(t);this._textureToCubeUV(t,x);this._applyPMREM(x);this._cleanup(x);return x};z._allocateTargets=function(t){var x=void 0===t||1009!==t.type?!1:3E3===t.encoding||
3001===t.encoding||3007===t.encoding;x={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:x?t.encoding:3002,depthBuffer:!1};var C=Kca(x);C.depthBuffer=t?!1:!0;(this||p)._pingPongRenderTarget=Kca(x);return C};z._compileMaterial=function(t){t=new jb(eJ[0],t);(this||p)._renderer.compile(t,DY)};z._sceneToCubeUV=function(t,x,C,H){x=new qc(90,1,x,C);C=[1,-1,1,1,1,1];var N=[1,1,1,-1,-1,-1],T=(this||p)._renderer,W=T.outputEncoding,Y=T.toneMapping,ea=T.getClearColor(),sa=T.getClearAlpha();
T.toneMapping=0;T.outputEncoding=3E3;var Aa=t.background;if(Aa&&Aa.isColor){Aa.convertSRGBToLinear();var Xa=Math.min(Math.max(Math.ceil(Math.log2(Math.max(Aa.r,Aa.g,Aa.b))),-128),127);Aa=Aa.multiplyScalar(Math.pow(2,-Xa));T.setClearColor(Aa,(Xa+128)/255);t.background=null}for(Aa=0;6>Aa;Aa++)Xa=Aa%3,0==Xa?(x.up.set(0,C[Aa],0),x.lookAt(N[Aa],0,0)):1==Xa?(x.up.set(0,0,C[Aa]),x.lookAt(0,N[Aa],0)):(x.up.set(0,C[Aa],0),x.lookAt(0,0,N[Aa])),lP(H,Xa*Kv,2<Aa?Kv:0,Kv,Kv),T.setRenderTarget(H),T.render(t,x);
T.toneMapping=Y;T.outputEncoding=W;T.setClearColor(ea,sa)};z._textureToCubeUV=function(t,x){var C=(this||p)._renderer;t.isCubeTexture?null==(this||p)._cubemapShader&&((this||p)._cubemapShader=Mca()):null==(this||p)._equirectShader&&((this||p)._equirectShader=Lca());var H=t.isCubeTexture?(this||p)._cubemapShader:(this||p)._equirectShader,N=new jb(eJ[0],H);H=H.uniforms;H.envMap.value=t;t.isCubeTexture||H.texelSize.value.set(1/t.image.width,1/t.image.height);H.inputEncoding.value=Lv[t.encoding];H.outputEncoding.value=
Lv[x.texture.encoding];lP(x,0,0,3*Kv,2*Kv);C.setRenderTarget(x);C.render(N,DY)};z._applyPMREM=function(t){var x=(this||p)._renderer,C=x.autoClear;x.autoClear=!1;for(var H=1;H<Yda;H++)this._blur(t,H-1,H,Math.sqrt(RP[H]*RP[H]-RP[H-1]*RP[H-1]),$da[(H-1)%$da.length]);x.autoClear=C};z._blur=function(t,x,C,H,N){var T=(this||p)._pingPongRenderTarget;this._halfBlur(t,T,x,C,H,"latitudinal",N);this._halfBlur(T,t,C,C,H,"longitudinal",N)};z._halfBlur=function(t,x,C,H,N,T,W){var Y=(this||p)._renderer,ea=(this||
p)._blurMaterial;"latitudinal"!==T&&"longitudinal"!==T&&console.error("blur direction must be either latitudinal or longitudinal!");var sa=new jb(eJ[H],ea);ea=ea.uniforms;var Aa=Zda[C]-1;Aa=isFinite(N)?Math.PI/(2*Aa):2*Math.PI/39;var Xa=N/Aa,Va=isFinite(N)?1+Math.floor(3*Xa):20;20<Va&&console.warn("sigmaRadians, "+N+", is too large and will clip, as it requested "+Va+" samples when the maximum is set to 20");N=[];for(var vb=0,sb=0;20>sb;++sb){var ad=sb/Xa;ad=Math.exp(-ad*ad/2);N.push(ad);0==sb?vb+=
ad:sb<Va&&(vb+=2*ad)}for(Xa=0;Xa<N.length;Xa++)N[Xa]/=vb;ea.envMap.value=t.texture;ea.samples.value=Va;ea.weights.value=N;ea.latitudinal.value="latitudinal"===T;W&&(ea.poleAxis.value=W);ea.dTheta.value=Aa;ea.mipInt.value=8-C;ea.inputEncoding.value=Lv[t.texture.encoding];ea.outputEncoding.value=Lv[t.texture.encoding];t=Zda[H];lP(x,3*Math.max(0,Kv-2*t),(0===H?0:2*Kv)+2*t*(4<H?H-8+4:0),3*t,2*t);Y.setRenderTarget(x);Y.render(sa,DY)};return u}();sh.create=function(u,z){console.log("THREE.Curve.create() has been deprecated");
u.prototype=Object.create(sh.prototype);u.prototype.constructor=u;u.prototype.getPoint=z;return u};Object.assign(nx.prototype,{createPointsGeometry:function(u){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");u=this.getPoints(u);return this.createGeometry(u)},createSpacedPointsGeometry:function(u){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
u=this.getSpacedPoints(u);return this.createGeometry(u)},createGeometry:function(u){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var z=new al,t=0,x=u.length;t<x;t++){var C=u[t];z.vertices.push(new wc(C.x,C.y,C.z||0))}return z}});Object.assign(Mt.prototype,{fromPoints:function(u){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(u)}});Nca.prototype=Object.create(Lo.prototype);
Oca.prototype=Object.create(Lo.prototype);NX.prototype=Object.create(Lo.prototype);Object.assign(NX.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Rda.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
Oda.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Vk.prototype,{extractUrlBase:function(u){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return yY.extractUrlBase(u)}});Vk.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};
Object.assign(Kda.prototype,{center:function(u){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},size:function(u){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(u)}});
Object.assign(Mv.prototype,{center:function(u){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(u)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(u){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionSphere:function(u){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(u)},size:function(u){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(u)}});Object.assign(qx.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});AI.prototype.setFromMatrix=function(u){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(u)};Mda.prototype.center=function(u){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(u)};Object.assign(ti,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(u){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return ti.floorPowerOfTwo(u)},nextPowerOfTwo:function(u){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return ti.ceilPowerOfTwo(u)}});Object.assign(tp.prototype,{flattenToArrayOffset:function(u,
z){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},multiplyVector3:function(u){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return u.applyMatrix3(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");
return u.applyMatrix3(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(uj.prototype,{extractPosition:function(u){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(u)},flattenToArrayOffset:function(u,z){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(u,z)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
return(new wc).setFromMatrixColumn(this||p,3)},setRotationFromQuaternion:function(u){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(u)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(u){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||
p)},multiplyVector4:function(u){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return u.applyMatrix4(this||p)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(u){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");u.transformDirection(this||p)},crossVector:function(u){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(u){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");
return u.applyMatrix4(this||p)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(u,z,t,x,C,H){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(u,z,x,t,C,H)}});Gv.prototype.isIntersectionLine=function(u){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(u)};
Ko.prototype.multiplyVector3=function(u){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return u.applyQuaternion(this||p)};Object.assign(dF.prototype,{isIntersectionBox:function(u){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(u)},isIntersectionPlane:function(u){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(u)},
isIntersectionSphere:function(u){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(u)}});Object.assign(Et.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(u,z){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(u,z)},midpoint:function(u){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");
return this.getMidpoint(u)},normal:function(u){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return this.getNormal(u)},plane:function(u){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(u)}});Object.assign(Et,{barycoordFromPoint:function(u,z,t,x,C){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Et.getBarycoord(u,z,t,x,C)},normal:function(u,z,t,x){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return Et.getNormal(u,z,t,x)}});Object.assign(Lz.prototype,{extractAllPoints:function(u){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(u)},extrude:function(u){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new iY(this||p,u)},makeGeometry:function(u){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new nY(this||p,u)}});Object.assign(cf.prototype,
{fromAttribute:function(u,z,t){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(wc.prototype,
{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(u){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(u)},getScaleFromMatrix:function(u){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");
return this.setFromMatrixScale(u)},getColumnFromMatrix:function(u,z){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(z,u)},applyProjection:function(u){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(u)},fromAttribute:function(u,z,t){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},distanceToManhattan:function(u){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(u)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign($k.prototype,{fromAttribute:function(u,z,t){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(u,
z,t)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(al.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(u){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");
return this.applyMatrix4(u)}});Object.assign(E.prototype,{getChildByName:function(u){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(u)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(u,z){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(z,u)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},
applyMatrix:function(u){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(E.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return(this||p).rotation.order},set:function(u){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");(this||p).rotation.order=u}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(jb.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(jb.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");
return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(GI.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return(this||p).levels}}});Object.defineProperty(MO.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},
set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});LO.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(sh.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return(this||p).arcLengthDivisions},set:function(u){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");(this||p).arcLengthDivisions=u}});
qc.prototype.setLens=function(u,z){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==z&&((this||p).filmGauge=z);this.setFocalLength(u)};Object.defineProperties(sl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(u){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");(this||p).shadow.camera.fov=u}},shadowCameraLeft:{set:function(u){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");
(this||p).shadow.camera.left=u}},shadowCameraRight:{set:function(u){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");(this||p).shadow.camera.right=u}},shadowCameraTop:{set:function(u){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");(this||p).shadow.camera.top=u}},shadowCameraBottom:{set:function(u){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");(this||p).shadow.camera.bottom=u}},shadowCameraNear:{set:function(u){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");
(this||p).shadow.camera.near=u}},shadowCameraFar:{set:function(u){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");(this||p).shadow.camera.far=u}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(u){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");(this||p).shadow.bias=u}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},
shadowMapWidth:{set:function(u){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");(this||p).shadow.mapSize.width=u}},shadowMapHeight:{set:function(u){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");(this||p).shadow.mapSize.height=u}}});Object.defineProperties(S.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return(this||p).array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");
return 35048===(this||p).usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(S.prototype,{setDynamic:function(u){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});
Object.assign(ya.prototype,{addIndex:function(u){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(u)},addAttribute:function(u,z,t){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return z&&z.isBufferAttribute||z&&z.isInterleavedBufferAttribute?"index"===u?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(z),this||p):this.setAttribute(u,z):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
this.setAttribute(u,new S(z,t)))},addDrawCall:function(u,z,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(u,z)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},
removeAttribute:function(u){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(u)},applyMatrix:function(u){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(u)}});Object.defineProperties(ya.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return(this||p).groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return(this||p).groups}}});Object.defineProperties(RI.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return(this||p).instanceCount},set:function(u){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");(this||p).instanceCount=u}}});Object.defineProperties(JX.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");
return(this||p).params.Line.threshold},set:function(u){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");(this||p).params.Line.threshold=u}}});Object.defineProperties(Xq.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");return 35048===(this||p).usage},set:function(u){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(u)}}});
Object.assign(Xq.prototype,{setDynamic:function(u){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===u?35048:35044);return this||p},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(dJ.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},
addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign($X.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Ida.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this||
p}}});Object.defineProperties(M.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new Hg}},shading:{get:function(){console.error("THREE."+
(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(u){console.warn("THREE."+(this||p).type+": .shading has been removed. Use the boolean .flatShading instead.");(this||p).flatShading=1===u}},stencilMask:{get:function(){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return(this||p).stencilFuncMask},set:function(u){console.warn("THREE."+(this||p).type+": .stencilMask has been removed. Use .stencilFuncMask instead.");
(this||p).stencilFuncMask=u}}});Object.defineProperties(Kz.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Jz.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");return(this||
p).transmission},set:function(u){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");(this||p).transmission=u}}});Object.defineProperties(La.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return(this||p).extensions.derivatives},set:function(u){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");(this||p).extensions.derivatives=u}}});
Object.assign(CI.prototype,{clearTarget:function(u,z,t,x){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(u);this.clear(z,t,x)},animate:function(u){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(u)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");
return(this||p).capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return(this||p).capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return(this||p).state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return(this||p).extensions.get("OES_texture_float")},
supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return(this||p).extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return(this||p).extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return(this||p).extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return(this||p).extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return(this||p).extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return(this||p).capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return(this||p).extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(u){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(u)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},
setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(CI.prototype,{shadowMapEnabled:{get:function(){return(this||p).shadowMap.enabled},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");(this||p).shadowMap.enabled=u}},shadowMapType:{get:function(){return(this||
p).shadowMap.type},set:function(u){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");(this||p).shadowMap.type=u}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");
return this.getContext()}},vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return(this||p).xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");
return!1},set:function(u){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");(this||p).outputEncoding=!0===u?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(oca.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(v.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return(this||p).texture.wrapS},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");(this||p).texture.wrapS=u}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");
return(this||p).texture.wrapT},set:function(u){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");(this||p).texture.wrapT=u}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return(this||p).texture.magFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");(this||p).texture.magFilter=u}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");
return(this||p).texture.minFilter},set:function(u){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");(this||p).texture.minFilter=u}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return(this||p).texture.anisotropy},set:function(u){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");(this||p).texture.anisotropy=u}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");
return(this||p).texture.offset},set:function(u){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");(this||p).texture.offset=u}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return(this||p).texture.repeat},set:function(u){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");(this||p).texture.repeat=u}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return(this||
p).texture.format},set:function(u){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");(this||p).texture.format=u}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return(this||p).texture.type},set:function(u){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");(this||p).texture.type=u}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return(this||
p).texture.generateMipmaps},set:function(u){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");(this||p).texture.generateMipmaps=u}}});Object.defineProperties(AY.prototype,{load:{value:function(u){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var z=this||p;(new jP).load(u,function(t){z.setBuffer(t)});return this||p}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});Hda.prototype.getData=
function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};dc.prototype.updateCubeMap=function(u,z){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(u,z)};Mz.crossOrigin=void 0;Mz.loadTexture=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var C=new $O;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);
return u};Mz.loadTextureCube=function(u,z,t,x){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var C=new YO;C.setCrossOrigin((this||p).crossOrigin);u=C.load(u,t,void 0,x);z&&(u.mapping=z);return u};Mz.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Mz.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};
"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"121"}}));b.ACESFilmicToneMapping=4;b.AddEquation=100;b.AddOperation=2;b.AdditiveAnimationBlendMode=2501;b.AdditiveBlending=2;b.AlphaFormat=1021;b.AlwaysDepth=1;b.AlwaysStencilFunc=519;b.AmbientLight=eP;b.AmbientLightProbe=EX;b.AnimationClip=os;b.AnimationLoader=tX;b.AnimationMixer=GX;b.AnimationObjectGroup=Hca;b.AnimationUtils=Dl;b.ArcCurve=bF;b.ArrayCamera=HO;b.ArrowHelper=Vva;
b.Audio=AY;b.AudioAnalyser=Hda;b.AudioContext=zY;b.AudioListener=yva;b.AudioLoader=jP;b.AxesHelper=Wda;b.AxisHelper=function(u){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Wda(u)};b.BackSide=1;b.BasicDepthPacking=3200;b.BasicShadowMap=0;b.BinaryTextureLoader=function(u){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new ZO(u)};b.Bone=mX;b.BooleanKeyframeTrack=UO;b.BoundingBoxHelper=function(u,z){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");
return new Uda(u,z)};b.Box2=Kda;b.Box3=Mv;b.Box3Helper=Tva;b.BoxBufferGeometry=zI;b.BoxGeometry=cY;b.BoxHelper=Uda;b.BufferAttribute=S;b.BufferGeometry=ya;b.BufferGeometryLoader=iP;b.ByteType=1010;b.Cache=rC;b.Camera=Lb;b.CameraHelper=Sva;b.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};b.CanvasTexture=HI;b.CatmullRomCurve3=Lo;b.CineonToneMapping=3;b.CircleBufferGeometry=dY;b.CircleGeometry=kda;b.ClampToEdgeWrapping=1001;b.Clock=Eda;b.ClosedSplineCurve3=Nca;b.Color=
Hg;b.ColorKeyframeTrack=VO;b.CompressedTexture=WE;b.CompressedTextureLoader=uX;b.ConeBufferGeometry=mda;b.ConeGeometry=lda;b.CubeCamera=dc;b.CubeGeometry=cY;b.CubeReflectionMapping=301;b.CubeRefractionMapping=302;b.CubeTexture=oc;b.CubeTextureLoader=YO;b.CubeUVReflectionMapping=306;b.CubeUVRefractionMapping=307;b.CubicBezierCurve=It;b.CubicBezierCurve3=Iv;b.CubicInterpolant=SO;b.CullFaceBack=1;b.CullFaceFront=2;b.CullFaceFrontBack=3;b.CullFaceNone=0;b.Curve=sh;b.CurvePath=nx;b.CustomBlending=5;b.CustomToneMapping=
5;b.CylinderBufferGeometry=cJ;b.CylinderGeometry=eY;b.Cylindrical=Lva;b.DataTexture=Vb;b.DataTexture2DArray=Cj;b.DataTexture3D=Tj;b.DataTextureLoader=ZO;b.DecrementStencilOp=7683;b.DecrementWrapStencilOp=34056;b.DefaultLoadingManager=Cca;b.DepthFormat=1026;b.DepthStencilFormat=1027;b.DepthTexture=II;b.DirectionalLight=dP;b.DirectionalLightHelper=Rva;b.DiscreteInterpolant=TO;b.DodecahedronBufferGeometry=fY;b.DodecahedronGeometry=nda;b.DoubleSide=2;b.DstAlphaFactor=206;b.DstColorFactor=208;b.DynamicBufferAttribute=
function(u,z){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");return(new S(u,z)).setUsage(35048)};b.DynamicCopyUsage=35050;b.DynamicDrawUsage=35048;b.DynamicReadUsage=35049;b.EdgesGeometry=hY;b.EdgesHelper=function(u,z){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new up(new hY(u.geometry),new Sl({color:void 0!==z?z:16777215}))};b.EllipseCurve=Zq;b.EqualDepth=4;
b.EqualStencilFunc=514;b.EquirectangularReflectionMapping=303;b.EquirectangularRefractionMapping=304;b.Euler=BO;b.EventDispatcher=d;b.ExtrudeBufferGeometry=dJ;b.ExtrudeGeometry=iY;b.Face3=yI;b.Face4=function(u,z,t,x,C,H,N){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new yI(u,z,t,C,H,N)};b.FaceColors=1;b.FileLoader=ps;b.FlatShading=1;b.Float32Attribute=function(u,z){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");
return new V(u,z)};b.Float32BufferAttribute=V;b.Float64Attribute=function(u,z){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new na(u,z)};b.Float64BufferAttribute=na;b.FloatType=1015;b.Fog=$ca;b.FogExp2=Zca;b.Font=BX;b.FontLoader=CX;b.FrontSide=0;b.Frustum=AI;b.GLBufferAttribute=IX;b.GLSL1="100";b.GLSL3="300 es";b.GammaEncoding=3007;b.Geometry=al;b.GeometryUtils={merge:function(u,z,t){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
if(z.isMesh){z.matrixAutoUpdate&&z.updateMatrix();var x=z.matrix;z=z.geometry}u.merge(z,x,t)},center:function(u){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return u.center()}};b.GreaterDepth=6;b.GreaterEqualDepth=5;b.GreaterEqualStencilFunc=518;b.GreaterStencilFunc=516;b.GridHelper=Rda;b.Group=Cz;b.HalfFloatType=1016;b.HemisphereLight=aP;b.HemisphereLightHelper=Pva;b.HemisphereLightProbe=DX;b.IcosahedronBufferGeometry=jY;b.IcosahedronGeometry=
oda;b.ImageBitmapLoader=zX;b.ImageLoader=aF;b.ImageUtils=Mz;b.ImmediateRenderObject=SI;b.IncrementStencilOp=7682;b.IncrementWrapStencilOp=34055;b.InstancedBufferAttribute=hP;b.InstancedBufferGeometry=RI;b.InstancedInterleavedBuffer=HX;b.InstancedMesh=NO;b.Int16Attribute=function(u,z){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Ea(u,z)};b.Int16BufferAttribute=Ea;b.Int32Attribute=function(u,z){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");
return new Z(u,z)};b.Int32BufferAttribute=Z;b.Int8Attribute=function(u,z){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new R(u,z)};b.Int8BufferAttribute=R;b.IntType=1013;b.InterleavedBuffer=Xq;b.InterleavedBufferAttribute=Gz;b.Interpolant=Yq;b.InterpolateDiscrete=2300;b.InterpolateLinear=2301;b.InterpolateSmooth=2302;b.InvertStencilOp=5386;b.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};b.KeepStencilOp=7680;
b.KeyframeTrack=qo;b.LOD=GI;b.LatheBufferGeometry=kY;b.LatheGeometry=pda;b.Layers=cX;b.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};b.LessDepth=2;b.LessEqualDepth=3;b.LessEqualStencilFunc=515;b.LessStencilFunc=513;b.Light=sl;b.LightProbe=qs;b.Line=ns;b.Line3=Mda;b.LineBasicMaterial=Sl;b.LineCurve=gq;b.LineCurve3=Jt;b.LineDashedMaterial=mC;b.LineLoop=OO;b.LinePieces=1;b.LineSegments=up;b.LineStrip=0;b.LinearEncoding=3E3;b.LinearFilter=
1006;b.LinearInterpolant=NI;b.LinearMipMapLinearFilter=1008;b.LinearMipMapNearestFilter=1007;b.LinearMipmapLinearFilter=1008;b.LinearMipmapNearestFilter=1007;b.LinearToneMapping=1;b.Loader=Vk;b.LoaderUtils=yY;b.LoadingManager=sX;b.LogLuvEncoding=3003;b.LoopOnce=2200;b.LoopPingPong=2202;b.LoopRepeat=2201;b.LuminanceAlphaFormat=1025;b.LuminanceFormat=1024;b.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};b.Material=M;b.MaterialLoader=gP;b.Math=ti;b.MathUtils=ti;b.Matrix3=tp;b.Matrix4=uj;b.MaxEquation=
104;b.Mesh=jb;b.MeshBasicMaterial=L;b.MeshDepthMaterial=Az;b.MeshDistanceMaterial=Bz;b.MeshFaceMaterial=function(u){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return u};b.MeshLambertMaterial=kC;b.MeshMatcapMaterial=lC;b.MeshNormalMaterial=jC;b.MeshPhongMaterial=Kz;b.MeshPhysicalMaterial=Jz;b.MeshStandardMaterial=Hv;b.MeshToonMaterial=iC;b.MinEquation=103;b.MirroredRepeatWrapping=1002;b.MixOperation=1;b.MultiMaterial=function(u){void 0===u&&(u=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");
u.isMultiMaterial=!0;u.materials=u;u.clone=function(){return u.slice()};return u};b.MultiplyBlending=4;b.MultiplyOperation=0;b.NearestFilter=1003;b.NearestMipMapLinearFilter=1005;b.NearestMipMapNearestFilter=1004;b.NearestMipmapLinearFilter=1005;b.NearestMipmapNearestFilter=1004;b.NeverDepth=0;b.NeverStencilFunc=512;b.NoBlending=0;b.NoColors=0;b.NoToneMapping=0;b.NormalAnimationBlendMode=2500;b.NormalBlending=1;b.NotEqualDepth=7;b.NotEqualStencilFunc=517;b.NumberKeyframeTrack=ZE;b.Object3D=E;b.ObjectLoader=
wva;b.ObjectSpaceNormalMap=1;b.OctahedronBufferGeometry=HP;b.OctahedronGeometry=qda;b.OneFactor=201;b.OneMinusDstAlphaFactor=207;b.OneMinusDstColorFactor=209;b.OneMinusSrcAlphaFactor=205;b.OneMinusSrcColorFactor=203;b.OrthographicCamera=cF;b.PCFShadowMap=1;b.PCFSoftShadowMap=2;b.PMREMGenerator=Wva;b.ParametricBufferGeometry=YE;b.ParametricGeometry=MI;b.Particle=function(u){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new EI(u)};b.ParticleBasicMaterial=function(u){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");
return new Ht(u)};b.ParticleSystem=function(u,z){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new VE(u,z)};b.ParticleSystemMaterial=function(u){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Ht(u)};b.Path=Mt;b.PerspectiveCamera=qc;b.Plane=Gv;b.PlaneBufferGeometry=GO;b.PlaneGeometry=rda;b.PlaneHelper=Uva;b.PointCloud=function(u,z){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new VE(u,z)};
b.PointCloudMaterial=function(u){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Ht(u)};b.PointLight=cP;b.PointLightHelper=Nva;b.Points=VE;b.PointsMaterial=Ht;b.PolarGridHelper=Qva;b.PolyhedronBufferGeometry=qC;b.PolyhedronGeometry=sda;b.PositionalAudio=Ava;b.PropertyBinding=Mo;b.PropertyMixer=FX;b.QuadraticBezierCurve=Kt;b.QuadraticBezierCurve3=Jv;b.Quaternion=Ko;b.QuaternionKeyframeTrack=OI;b.QuaternionLinearInterpolant=WO;b.REVISION="121";b.RGBADepthPacking=
3201;b.RGBAFormat=1023;b.RGBAIntegerFormat=1033;b.RGBA_ASTC_10x10_Format=37819;b.RGBA_ASTC_10x5_Format=37816;b.RGBA_ASTC_10x6_Format=37817;b.RGBA_ASTC_10x8_Format=37818;b.RGBA_ASTC_12x10_Format=37820;b.RGBA_ASTC_12x12_Format=37821;b.RGBA_ASTC_4x4_Format=37808;b.RGBA_ASTC_5x4_Format=37809;b.RGBA_ASTC_5x5_Format=37810;b.RGBA_ASTC_6x5_Format=37811;b.RGBA_ASTC_6x6_Format=37812;b.RGBA_ASTC_8x5_Format=37813;b.RGBA_ASTC_8x6_Format=37814;b.RGBA_ASTC_8x8_Format=37815;b.RGBA_BPTC_Format=36492;b.RGBA_ETC2_EAC_Format=
37496;b.RGBA_PVRTC_2BPPV1_Format=35843;b.RGBA_PVRTC_4BPPV1_Format=35842;b.RGBA_S3TC_DXT1_Format=33777;b.RGBA_S3TC_DXT3_Format=33778;b.RGBA_S3TC_DXT5_Format=33779;b.RGBDEncoding=3006;b.RGBEEncoding=3002;b.RGBEFormat=1023;b.RGBFormat=1022;b.RGBIntegerFormat=1032;b.RGBM16Encoding=3005;b.RGBM7Encoding=3004;b.RGB_ETC1_Format=36196;b.RGB_ETC2_Format=37492;b.RGB_PVRTC_2BPPV1_Format=35841;b.RGB_PVRTC_4BPPV1_Format=35840;b.RGB_S3TC_DXT1_Format=33776;b.RGFormat=1030;b.RGIntegerFormat=1031;b.RawShaderMaterial=
mx;b.Ray=dF;b.Raycaster=JX;b.RectAreaLight=fP;b.RedFormat=1028;b.RedIntegerFormat=1029;b.ReinhardToneMapping=2;b.RepeatWrapping=1E3;b.ReplaceStencilOp=7681;b.ReverseSubtractEquation=102;b.RingBufferGeometry=lY;b.RingGeometry=tda;b.SRGB8_ALPHA8_ASTC_10x10_Format=37851;b.SRGB8_ALPHA8_ASTC_10x5_Format=37848;b.SRGB8_ALPHA8_ASTC_10x6_Format=37849;b.SRGB8_ALPHA8_ASTC_10x8_Format=37850;b.SRGB8_ALPHA8_ASTC_12x10_Format=37852;b.SRGB8_ALPHA8_ASTC_12x12_Format=37853;b.SRGB8_ALPHA8_ASTC_4x4_Format=37840;b.SRGB8_ALPHA8_ASTC_5x4_Format=
37841;b.SRGB8_ALPHA8_ASTC_5x5_Format=37842;b.SRGB8_ALPHA8_ASTC_6x5_Format=37843;b.SRGB8_ALPHA8_ASTC_6x6_Format=37844;b.SRGB8_ALPHA8_ASTC_8x5_Format=37845;b.SRGB8_ALPHA8_ASTC_8x6_Format=37846;b.SRGB8_ALPHA8_ASTC_8x8_Format=37847;b.Scene=$X;b.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};
b.ShaderChunk=vj;b.ShaderLib=Ft;b.ShaderMaterial=La;b.ShadowMaterial=hC;b.Shape=Lz;b.ShapeBufferGeometry=mY;b.ShapeGeometry=nY;b.ShapePath=AX;b.ShapeUtils=vx;b.ShortType=1011;b.Skeleton=MO;b.SkeletonHelper=Oda;b.SkinnedMesh=LO;b.SmoothShading=2;b.Sphere=qx;b.SphereBufferGeometry=IP;b.SphereGeometry=uda;b.Spherical=Kva;b.SphericalHarmonics3=Eca;b.Spline=NX;b.SplineCurve=Lt;b.SplineCurve3=Oca;b.SpotLight=bP;b.SpotLightHelper=Mva;b.Sprite=EI;b.SpriteMaterial=Hz;b.SrcAlphaFactor=204;b.SrcAlphaSaturateFactor=
210;b.SrcColorFactor=202;b.StaticCopyUsage=35046;b.StaticDrawUsage=35044;b.StaticReadUsage=35045;b.StereoCamera=Fca;b.StreamCopyUsage=35042;b.StreamDrawUsage=35040;b.StreamReadUsage=35041;b.StringKeyframeTrack=XO;b.SubtractEquation=101;b.SubtractiveBlending=3;b.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};b.TangentSpaceNormalMap=0;b.TetrahedronBufferGeometry=oY;b.TetrahedronGeometry=vda;b.TextBufferGeometry=pY;b.TextGeometry=wda;b.Texture=r;b.TextureLoader=$O;b.TorusBufferGeometry=qY;b.TorusGeometry=
xda;b.TorusKnotBufferGeometry=rY;b.TorusKnotGeometry=yda;b.Triangle=Et;b.TriangleFanDrawMode=2;b.TriangleStripDrawMode=1;b.TrianglesDrawMode=0;b.TubeBufferGeometry=sY;b.TubeGeometry=zda;b.UVMapping=300;b.Uint16Attribute=function(u,z){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new K(u,z)};b.Uint16BufferAttribute=K;b.Uint32Attribute=function(u,z){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");
return new U(u,z)};b.Uint32BufferAttribute=U;b.Uint8Attribute=function(u,z){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new aa(u,z)};b.Uint8BufferAttribute=aa;b.Uint8ClampedAttribute=function(u,z){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new ra(u,z)};b.Uint8ClampedBufferAttribute=ra;b.Uniform=Ida;b.UniformsLib=vg;b.UniformsUtils=mca;b.UnsignedByteType=1009;
b.UnsignedInt248Type=1020;b.UnsignedIntType=1014;b.UnsignedShort4444Type=1017;b.UnsignedShort5551Type=1018;b.UnsignedShort565Type=1019;b.UnsignedShortType=1012;b.VSMShadowMap=3;b.Vector2=cf;b.Vector3=wc;b.Vector4=$k;b.VectorKeyframeTrack=$E;b.Vertex=function(u,z,t){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new wc(u,z,t)};b.VertexColors=2;b.VideoTexture=pX;b.WebGL1Renderer=lX;b.WebGLCubeRenderTarget=$c;b.WebGLMultisampleRenderTarget=y;b.WebGLRenderTarget=v;b.WebGLRenderTargetCube=
function(u,z,t){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new $c(u,t)};b.WebGLRenderer=CI;b.WebGLUtils=pca;b.WireframeGeometry=tY;b.WireframeHelper=function(u,z){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new up(new tY(u.geometry),new Sl({color:void 0!==z?z:16777215}))};b.WrapAroundEnding=2402;b.XHRLoader=function(u){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");
return new ps(u)};b.ZeroCurvatureEnding=2400;b.ZeroFactor=200;b.ZeroSlopeEnding=2401;b.ZeroStencilOp=0;b.sRGBEncoding=3001;Object.defineProperty(b,"__esModule",{value:!0})});return wI}(),Ri=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js");Ri.Canvas=vI;Ri.THREE=Xva;var No=Ri.THREE;Ri.Scene=No.Scene;Ri.SpotLight=No.SpotLight;Ri.MeshBasicMaterial=No.MeshBasicMaterial;Ri.BackSide=No.BackSide;Ri.ImageUtils=No.ImageUtils;Ri.Color=No.Color;Ri.MeshPhongMaterial=No.MeshPhongMaterial;Ri.SphereGeometry=
No.SphereGeometry;Ri.Mesh=No.Mesh;Ri.DirectionalLight=No.DirectionalLight;Ri.AmbientLight=No.AmbientLight;Ri.WebGLRenderer=No.WebGLRenderer;Ri.PerspectiveCamera=No.PerspectiveCamera;Ri.TextureLoader=No.TextureLoader;Ri.BoxGeometry=No.BoxGeometry;Ri.MeshNormalMaterial=No.MeshNormalMaterial;Ri.easings=Pq;var aea=function(b){var d=lively.FreezerRuntime.recorderFor("WebGLCanvas/index.js"),m=d.hasOwnProperty("WebGLCanvas")&&"function"===typeof d.WebGLCanvas?d.WebGLCanvas:d.WebGLCanvas=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"context",get:function(){return navigator.webdriver?this._canvas&&this._canvas.getContext("2d"):this._canvas&&this._canvas.getContext(this.contextType,{preserveDrawingBuffer:!0})}},{key:"restoreContent",value:function(a,g){this.renderer&&a&&a!==g&&(this.owner.context.drawImage(this.renderer.getContext().canvas,0,0),this.renderer=new Ri.WebGLRenderer({context:this.context,antialiasing:!0}),this.renderer.setSize(this.width,
this.height))}},{key:"onExtentChanged",value:function(){}},{key:"relayout",value:function(){var a=this;this.renderLoop&&(setTimeout(function(){return a.owner.context.drawImage(a.renderer.getContext().canvas,0,0)}),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix())}},{key:"stopAnimation",value:function(){this.renderLoop&&(cancelAnimationFrame(this.renderLoop),this.renderer.dispose())}},{key:"renderGlobe",value:function(){var a=
this;this.stopAnimation();this.withContextDo(function(g){var l=a.width,r=a.height,v=new Ri.Scene,y=new Ri.PerspectiveCamera(45,l/r,.01,1E3);y.position.z=1;y.position.x=.4;y.position.y=.25;a.camera=y;v.add(new Ri.AmbientLight(3355443));var A=new Ri.SpotLight(16777215,1,200,Math.PI/2,1);A.position.set(1,1,0);A.castShadow=!0;A.shadow.mapSize.width=1024;A.shadow.mapSize.height=1024;A.shadow.camera.near=10;A.shadow.camera.far=100;A.shadow.bias=.01;v.add(A);var E=function(G,I){var M=new Ri.TextureLoader;
return new Ri.Mesh(new Ri.SphereGeometry(G,I,I),new Ri.MeshPhongMaterial({map:M.load("https://cdn.typeshift.io/assets/globe-textures/2_no_clouds_4k.jpg"),bumpMap:M.load("https://cdn.typeshift.io/assets/globe-textures/elev_bump_4k.jpg"),bumpScale:.005,shininess:5,specularMap:M.load("https://cdn.typeshift.io/assets/globe-textures/water_4k.png"),specular:new Ri.Color("grey")}))}(.5,32);E.rotation.y=5.2;v.add(E);var F=function(G,I){var M=new Ri.TextureLoader;return new Ri.Mesh(new Ri.SphereGeometry(G+
.003,I,I),new Ri.MeshPhongMaterial({map:M.load("https://cdn.typeshift.io/assets/globe-textures/fair_clouds_4k.png"),transparent:!0}))}(.5,32);F.rotation.y=5.2;v.add(F);A=function(G,I){var M=new Ri.TextureLoader;return new Ri.Mesh(new Ri.SphereGeometry(G,I,I),new Ri.MeshBasicMaterial({map:M.load("https://cdn.typeshift.io/assets/globe-textures//galaxy_starfield.png"),side:Ri.BackSide}))}(90,64);v.add(A);a.renderer=new Ri.WebGLRenderer({context:g,antialias:!0});a.renderer.setSize(l,r);a.limitLoop(function(){if(!document.body.contains(a.renderer.getContext().canvas)){if(a.removeScheduled)return;
a.removeScheduled=setTimeout(function(){document.body.contains(a.renderer.getContext().canvas)||a.stopAnimation()},5E3)}E.rotation.y+=5E-4;F.rotation.y+=5E-4;a.renderer.render(v,y)});a.camera.position.z=1;a.camera.position.x=.4;a.camera.position.y=.25})}},{key:"limitLoop",value:function(a,g){var l=this,r=(new Date).getTime(),v=this,y;return(y=function(A){v.renderLoop=requestAnimationFrame(y);A=(new Date).getTime();var E=A-r,F=1E3/(g||l.fps);E>F&&(r=A-E%F,a(),v.firstFrameRendered=!0)})(0)}}],[{key:"className",
get:function(){return"WebGLCanvas"}},{key:"properties",get:function(){return{fps:{}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WebGLCanvas",version:"0.1.1-53"}}},{start:407,end:6018})}(Ri.Canvas);aea=Ri.WebGLCanvas;Ri.default=aea;var Ki=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");Ki.Morph=Ol;Ki.morph=
ab;Ki.Icon=op;Ki.touchInputDevice=Qq;Ki.Rectangle=Re;Ki.LinearGradient=qn;Ki.Color=Tg;Ki.pt=th;Ki.signal=xf;Ki.connect=yl;Ki.arr=ng;Ki.obj=Ng;Ki.Closure=fk;var sF=Ba("b2",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=!0}},{key:"onChange",value:function(a){var g=a.prop;if(this.label)switch(g){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,
a)}},{key:"onSubmorphChange",value:function(a,g){g===this.labelMorph&&"extent"===a.prop&&this.relayout();return hc._get(Object.getPrototypeOf(m.prototype),"onSubmorphChange",this).call(this,a,g)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var g=this.padding,l=g.top(),r=g.bottom(),
v=g.left(),y=g.right(),A=a.height+l+r,E=a.width+v+y;A>this.height&&(this.height=A);E>this.width&&(this.width=E);var F=this.innerBounds().insetByRect(g);a.center=F.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,g=this.labelMorph;g.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(g.extent);this.relayout();return this}},{key:"trigger",value:function(){try{Ki.signal(this,"fire"),"function"==typeof this.action&&this.action()}catch(g){var a=
this.world();a?a.logError(g):console.error(g)}}},{key:"considerPress",value:function(a){return Ki.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed={originalFill:this.fill})}},{key:"onMouseUp",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&
this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){Ki.touchInputDevice?(this.draggable=!0,this.pressed=null):hc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){!Ki.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){Ki.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},
{key:"interactivelyChangeLabel",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.world().prompt("edit button label",{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);g=l.yieldResult;"string"===typeof g&&(a.label=g);l.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,g=hc._get(Object.getPrototypeOf(m.prototype),"menuItems",this).call(this);g.unshift({isDivider:!0});g.unshift(["change label",
function(){return a.interactivelyChangeLabel()}]);return g}}],[{key:"className",get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,defaultValue:Ki.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:Ki.pt(100,20)},borderColor:{defaultValue:Ki.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new Ki.LinearGradient({stops:[{offset:0,color:Ki.Color.white},{offset:1,
color:Ki.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a;this.labelMorph._parametrizedProps&&
(this.labelMorph._parametrizedProps.fontSize=a)},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},
set:function(a){var g=this.labelMorph;g&&g.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=
a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8297})}(Ki.Morph));Ki.Button=sF;Ki.Button=
sF;Ki.Button=sF;var fJ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},
{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=Ki.Color.gray;this.selected=!1;Ki.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(g){return g!==a})}},{key:"morph",set:function(a){var g=this.indicator;this.submorphs.forEach(function(l){l!==g&&l.remove()});a.position=Ki.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(g){a=
this.valueFunctionString}this.valueFn=Ki.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:"className",get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},
selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var g=this;this.whenRendered().then(function(l){g.master={auto:g.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8306,end:10657})}(Ki.Morph);Ki.RadioButton=fJ;Ki.RadioButton=fJ;Ki.RadioButton=fJ;var gJ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),m=d.hasOwnProperty("RadioButtonGroup")&&"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,g){var l=new Ki.RadioButton;l.reset();l.morph=a;void 0!=g&&(l.internalValue=g,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");
this.addMorph(l);return l}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(g){g!==a&&(g.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}],[{key:"className",get:function(){return"RadioButtonGroup"}},
{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var g=this;this.removeAllButtons();Ki.obj.isArray(a)?a.forEach(function(l){g.addButton(Ki.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))}):[].concat($jscomp.arrayFromIterable(a.entries())).forEach(function(l){var r=$jscomp.makeIterator(l);l=r.next().value;r=r.next().value;g.addButton(Ki.morph({name:"label",type:"label",value:l,
reactsToPointer:!1}),r)});this.submorphs[0]&&this.setSelection(this.submorphs[0])},value:{derived:!0,after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var g=this.submorphs.find(function(l){try{return l.value===a}catch(r){return!1}});g?g.select():this.setSelection(null)}}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10666,end:13321})}(Ki.Morph);Ki.RadioButtonGroup=gJ;Ki.RadioButtonGroup=gJ;Ki.RadioButtonGroup=gJ;var Yva=Object.freeze({__proto__:null,Button:sF,RadioButton:fJ,RadioButtonGroup:gJ}),SP={},bea=!1,Zva="undefined"!==typeof self?self:global,cea=function(){if(bea)return SP;bea=!0;!function(b,d){SP?SP=d():"function"==typeof define&&define.amd?define(d):(this||Zva)[b]=d()}("bowser",function(){function b(l){function r(la){return(la=
l.match(la))&&1<la.length&&la[1]||""}function v(la){return(la=l.match(la))&&1<la.length&&la[2]||""}var y=r(/(ipod|iphone|ipad)/i).toLowerCase(),A=!/like android/i.test(l)&&/android/i.test(l),E=/nexus\s*[0-6]\s*/i.test(l),F=!E&&/nexus\s*[0-9]+/i.test(l),G=/CrOS/.test(l),I=/silk/i.test(l),M=/sailfish/i.test(l),L=/tizen/i.test(l),S=/(web|hpw)os/i.test(l),R=/windows phone/i.test(l),aa=!R&&/windows/i.test(l),ra=!y&&!I&&/macintosh/i.test(l),Ea=!A&&!M&&!L&&!S&&/linux/i.test(l),K=r(/edge\/(\d+(\.\d+)?)/i),
Z=r(/version\/(\d+(\.\d+)?)/i),U=/tablet/i.test(l),V=!U&&/[^-]mobi/i.test(l),na=/xbox/i.test(l);/opera|opr|opios/i.test(l)?G={name:"Opera",opera:!0,version:Z||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(l)?G={name:"Opera Coast",coast:!0,version:Z||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(l)?G={name:"Yandex Browser",yandexbrowser:!0,version:Z||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(l)?G={name:"UC Browser",ucbrowser:!0,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:
/mxios/i.test(l)?G={name:"Maxthon",maxthon:!0,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(l)?G={name:"Epiphany",epiphany:!0,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(l)?G={name:"Puffin",puffin:!0,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(l)?G={name:"Sleipnir",sleipnir:!0,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(l)?G={name:"K-Meleon",kMeleon:!0,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:R?(G={name:"Windows Phone",
windowsphone:!0},K?(G.msedge=!0,G.version=K):(G.msie=!0,G.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(l)?G={name:"Internet Explorer",msie:!0,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:G?G={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(l)?G={name:"Microsoft Edge",msedge:!0,version:K}:/vivaldi/i.test(l)?G={name:"Vivaldi",vivaldi:!0,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||Z}:M?G={name:"Sailfish",sailfish:!0,
version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(l)?G={name:"SeaMonkey",seamonkey:!0,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(l)?(G={name:"Firefox",firefox:!0,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(l)&&(G.firefoxos=!0)):I?G={name:"Amazon Silk",silk:!0,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(l)?G={name:"PhantomJS",phantom:!0,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(l)?
G={name:"SlimerJS",slimer:!0,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(l)||/rim\stablet/i.test(l)?G={name:"BlackBerry",blackberry:!0,version:Z||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:S?(G={name:"WebOS",webos:!0,version:Z||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(l)&&(G.touchpad=!0)):/bada/i.test(l)?G={name:"Bada",bada:!0,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:L?G={name:"Tizen",tizen:!0,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||Z}:/qupzilla/i.test(l)?
G={name:"QupZilla",qupzilla:!0,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||Z}:/chromium/i.test(l)?G={name:"Chromium",chromium:!0,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||Z}:/chrome|crios|crmo/i.test(l)?G={name:"Chrome",chrome:!0,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:A?G={name:"Android",version:Z}:/safari|applewebkit/i.test(l)?(G={name:"Safari",safari:!0},Z&&(G.version=Z)):y?(G={name:"iphone"==y?"iPhone":"ipad"==y?"iPad":"iPod"},Z&&(G.version=Z)):G=/googlebot/i.test(l)?{name:"Googlebot",
googlebot:!0,version:r(/googlebot\/(\d+(\.\d+))/i)||Z}:{name:r(/^(.*)\/(.*) /),version:v(/^(.*)\/(.*) /)};!G.msedge&&/(apple)?webkit/i.test(l)?(/(apple)?webkit\/537\.36/i.test(l)?(G.name=G.name||"Blink",G.blink=!0):(G.name=G.name||"Webkit",G.webkit=!0),!G.version&&Z&&(G.version=Z)):!G.opera&&/gecko\//i.test(l)&&(G.name=G.name||"Gecko",G.gecko=!0,G.version=G.version||r(/gecko\/(\d+(\.\d+)?)/i));G.msedge||!A&&!G.silk?y?(G[y]=!0,G.ios=!0):ra?G.mac=!0:na?G.xbox=!0:aa?G.windows=!0:Ea&&(G.linux=!0):G.android=
!0;aa="";G.windowsphone?aa=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):y?(aa=r(/os (\d+([_\s]\d+)*) like mac os x/i),aa=aa.replace(/[_\s]/g,".")):A?aa=r(/android[ \/-](\d+(\.\d+)*)/i):G.webos?aa=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):G.blackberry?aa=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):G.bada?aa=r(/bada\/(\d+(\.\d+)*)/i):G.tizen&&(aa=r(/tizen[\/\s](\d+(\.\d+)*)/i));aa&&(G.osversion=aa);aa=aa.split(".")[0];if(U||F||"ipad"==y||A&&(3==aa||4<=aa&&!V)||G.silk)G.tablet=!0;else if(V||"iphone"==y||"ipod"==y||
A||E||G.blackberry||G.webos||G.bada)G.mobile=!0;G.msedge||G.msie&&10<=G.version||G.yandexbrowser&&15<=G.version||G.vivaldi&&1<=G.version||G.chrome&&20<=G.version||G.firefox&&20<=G.version||G.safari&&6<=G.version||G.opera&&10<=G.version||G.ios&&G.osversion&&6<=G.osversion.split(".")[0]||G.blackberry&&10.1<=G.version||G.chromium&&20<=G.version?G.a=!0:G.msie&&10>G.version||G.chrome&&20>G.version||G.firefox&&20>G.version||G.safari&&6>G.version||G.opera&&10>G.version||G.ios&&G.osversion&&6>G.osversion.split(".")[0]||
G.chromium&&20>G.version?G.c=!0:G.x=!0;return G}function d(l,r){var v=[],y;if(Array.prototype.map)return Array.prototype.map.call(l,r);for(y=0;y<l.length;y++)v=r(l[y]);return v}function m(l){var r=Math.max(l[0].split(".").length,l[1].split(".").length);for(l=d(l,function(v){var y=r-v.split(".").length;v+=Array(y+1).join(".0");return d(v.split("."),function(A){return Array(20-A.length).join("0")+A}).reverse()});0<=--r;){if(l[0][r]>l[1][r])return 1;if(l[0][r]===l[1][r]){if(0===r)return 0}else return-1}}
function a(l,r,v){var y=g;"string"===typeof r&&(v=r,r=void 0);void 0===r&&(r=!1);v&&(y=b(v));v=""+y.version;for(var A in l)if(l.hasOwnProperty(A)&&y[A])return 0>m([v,l[A]]);return r}var g=b("undefined"!==typeof navigator?navigator.userAgent:"");g.test=function(l){for(var r=0;r<l.length;++r){var v=l[r];if("string"===typeof v&&v in g)return!0}return!1};g.isUnsupportedBrowser=a;g.compareVersions=m;g.check=function(l,r,v){return!a(l,r,v)};g._detect=b;return g});return SP}(),ce=lively.FreezerRuntime.recorderFor("lively.components/list.js");
ce.asItem=bH;ce.Morph=Ol;ce.Text=Ct;ce.StyleSheet=Fv;ce.Label=Dt;ce.Icon=op;ce.morph=ab;ce.touchInputDevice=Qq;ce.pt=th;ce.LinearGradient=qn;ce.Color=Tg;ce.Rectangle=Re;ce.rect=Gl;ce.arr=ng;ce.Path=Ti;ce.string=Li;ce.signal=xf;ce.once=Cu;ce.Button=sF;ce.bowser=cea;ce.asItem=bH;ce.asItem=bH;var TP=Ba("bP",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===y?!1:y;var E=a.morph,F=E?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation={value:F,annotation:a.annotation}:"string"===typeof F?this.textString=F:this.value=F;this.tooltip=this.tooltip||this.textString;this.itemIndex=g;this.position=v;if(A){g=A.fontFamily;v=A.selectionColor;F=A.selectionFontColor;
var G=A.nonSelectionFontColor,I=A.borderRadius,M=A.fontSize;A=A.padding;F&&this.selectionFontColor!==F&&(this.selectionFontColor=F);G&&this.nonSelectionFontColor!==G&&(this.nonSelectionFontColor=G);v&&this.selectionColor!==v&&(this.selectionColor=v);I&&I!=this.borderRadius&&(this.borderRadius=I);M&&this.fontSize!==M&&(this.fontSize=M);g&&this.fontFamily!==g&&(this.fontFamily=g);A&&!this.padding.equals(A)&&(this.padding=A)}a.autoFit&&(E.width=l);this.extent=ce.pt(E?Math.max(E.width,l):l,r);E?(a=E.getTransform().copy(),
this.submorphs=[E],E.setTransform(a),E.position=ce.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=y}},{key:"onDragStart",value:function(a){var g=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!g.multiSelect||!g.multiSelectViaDrag)g.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var g=
this.owner.owner;if(g.multiSelect&&g.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var l=g.selectedIndexes,r=g.itemMorphs;a!==this&&r.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(ce.arr.pushIfNotIncluded(l,a.itemIndex),g.selectedIndexes=l):!this._dragState.sourceIsSelected&&a.isSelected&&(ce.arr.remove(l,a.itemIndex),g.selectedIndexes=l))}}}],[{key:"className",get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},
autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!ce.touchInputDevice},fill:{derived:!0,get:function(){return ce.touchInputDevice&&this.pressed?ce.Color.gray.withA(.5):this.isSelected?this.selectionColor:ce.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:ce.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:ce.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:ce.Color.rgbHex("333")},
fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:900,end:5139})}(ce.Label));ce.ListItemMorph=TP;ce.ListItemMorph=TP;ce.ListItemMorph=TP;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),
m=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var g=this,l=this.scroll.y;if(ce.touchInputDevice){var r=this.owner.itemForClick(a);r&&(r.pressed=!0,r.makeDirty(),setTimeout(function(){r.pressed=!1;if(0==l-
g.scroll.y)return g.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:"className",get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:ce.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,end:6080})})(ce.Morph);ce.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));
return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var d=b.selectedIndexes;if(!b.multiSelect||!d.length)return b.execCommand("arrow up");var m=d[0];if("number"!==typeof m)b.selectedIndexes=[m];else{var a=b.indexUp(m);
d.includes(m)&&d.includes(a)?b.selectedIndexes=d.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(d.filter(function(g){return g!==a}))}return!0}},{name:"select down",exec:function(b){var d=b.selectedIndexes;if(!b.multiSelect||!d.length)return b.execCommand("arrow down");var m=d[0],a=b.indexDown(m);d.includes(m)&&d.includes(a)?b.selectedIndexes=d.filter(function(g){return g!==m}):b.selectedIndexes=[a].concat(d.filter(function(g){return g!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=
ce.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var d,m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return d=b.selectedIndex||0,g.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:d,requester:b.getWindow()||b,itemPadding:ce.Rectangle.inset(0,2),multiSelect:!0}),2);m=g.yieldResult;a=m.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),
b.update());return g.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var d=b.padding,m=b.itemHeight,a=b.scroll,g=a.x;a=a.y;var l=ce.pt(0,b.selectedIndex*m);d=b.height-m-d.top()-d.bottom();a=2>Math.abs(l.y-a)?l.y-d:2>Math.abs(l.y-a-.5*d)?l.y:l.y-.5*d;b.scroll=ce.pt(g,a);return!0}}},{name:"print contents in text window",exec:function(b){var d="items of "+b.name,m=b.items.map(function(a){if("string"===typeof a)return a;var g=a.string,l=a.label;a=a.annotation;var r="";
l?r="string"===typeof l?r+l:r+l.map(function(v,y){return 0==y%2?v:""}).join(""):g&&(r+=g);a&&(r+=" ",r="string"===typeof a?r+a:r+a[0]);return r}).join("\n");return b.world().execCommand("open text window",{title:d,content:m,name:d,fontFamily:"Monaco, monospace"})}}];var tF=Ba("aM",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=ce.pt(400,360));hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"__additionally_serialize__",value:function(a,g,l,r){var v=this;hc._get(Object.getPrototypeOf(m.prototype),"__additionally_serialize__",this).call(this,a,g,l,r);this.whenRendered().then(function(){return v.update()})}},{key:"onLoad",
value:function(){this.scroller.visible=ce.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var g=0;g<a.length;g++)switch(a[g].name){case "listItemContainer":var l=a[g];continue;case "scroller":var r=a[g]}r||(r=this.addMorph(new ce.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",fill:ce.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,
draggable:!1});(l||r)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(g){return g.isListItem})||
a[0]}},{key:"clickOnItem",value:function(a){var g=this.itemForClick(a);this[2===a.state.clickCount?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,g)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(a){return this.items.find(function(g){return g===a||g.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(g){return g===
a||g.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,g){var l=this;g=void 0===g?this.items.length:g;var r=this.items;g=Math.min(r.length,Math.max(0,g));r.splice(g,0,ce.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,g],undo:{target:this,selector:"removeItem",args:[a]}},function(){return l.update()})}},{key:"removeItem",value:function(a){var g=this;a=this.find(a);var l=this.items,r=l.indexOf(a);-1!==r&&(l.splice(r,
1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,r]}},function(){return g.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:
a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,g=this.items;g&&this.scroller&&this.dontRecordChangesWhile(function(){var l=a.itemHeight,r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,G=a.fontColor,I=a.padding,M=a.itemPadding,L=a.selectionColor,S=a.selectionFontColor,R=a.nonSelectionFontColor,aa=a.itemBorderRadius,ra=a.scrollBar,Ea=a.scroller,K=a.scrollable,Z=Ea.scroll.y;I=I||ce.Rectangle.inset(0);
var U=I.top(),V=I.left(),na=I.bottom();I=I.right();var la=Math.max(0,Math.floor(Z/l)),ya=Math.min(g.length,la+A/l+2);A=0;I=a.width-(V+I);r=ce.arr.sortBy(r,function(La){return La.itemIndex});var jb=$jscomp.makeIterator(ce.arr.partition(r,function(La){return La.itemIndex<la}));r=jb.next().value;var gb=jb.next().value;gb=$jscomp.makeIterator(ce.arr.partition(gb,function(La){return La.itemIndex>ya-1}));jb=gb.next().value;gb=gb.next().value;r=[].concat($jscomp.arrayFromIterable(jb),$jscomp.arrayFromIterable(gb),
$jscomp.arrayFromIterable(r));for(jb=0;jb<ya-la;jb++){gb=la+jb;var ka=g[gb];if(!ka){r.slice(jb).forEach(function(La){La.remove()});break}var ia={fontSize:E,fontFamily:F,fontColor:R||G,padding:M,borderRadius:aa||0,selectionFontColor:S,nonSelectionFontColor:R,selectionColor:L},qa=r[jb];qa||(qa=r[jb]=v.addMorph(new ce.ListItemMorph(ia)));qa.reactsToPointer=!K;qa.displayItem(ka,gb,I,l,ce.pt(0,l*gb),y.includes(gb),ia);A=Math.max(A,qa.width)}r.slice(ya-la).forEach(function(La){return La.remove()});l=Math.max(U+
na+l*g.length,a.height);v.setBounds(ce.pt(V,U).subXY(0,Z).extent(ce.pt(a.width,l)));Ea.extent=a.extent;ra.left=A-1;Ea.position=ce.pt(0,0);ra.extent=ce.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var g=this.itemHeight,l=this.itemScroll;a=new ce.Rectangle(0,a*g,this.width,g);g=this.innerBounds().insetByRect(this.padding).translatedBy(l);var r=0;a.bottom()>g.bottom()&&(r=a.bottom()-
g.bottom());a.top()<g.top()&&(r=a.top()-g.top());this.itemScroll=l.addXY(0,r);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,g){}},{key:"onItemMorphClicked",value:function(a,g){var l=g.itemIndex;g=this.selectedIndexes;var r=g.includes(l),v=[];if(this.multiSelect)if(a.isShiftDown())if(r)v=g.filter(function(A){return A!=l});else{a=g[0];var y="number"===typeof a?ce.arr.range(l,a):[l];v=y.concat(g.filter(function(A){return!y.includes(A)}))}else v=this.multiSelectWithSimpleClick||a.isCommandKey()?
r?g.filter(function(A){return A!=l}):[l].concat(g.filter(function(A){return A!=l})):[l];else v=[l];this.selectedIndexes=v}},{key:"onItemMorphDragged",value:function(a,g){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){ce.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",
command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},
{key:"commands",get:function(){return ce.listCommands}}],[{key:"className",get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:ce.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:ce.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:ce.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:ce.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:ce.Color.rgbHex("333")},
styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:ce.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",
a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:ce.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:ce.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],
after:["submorphs"],set:function(a){this.setProperty("items",a.map(ce.asItem));this.update();this.attributeConnections&&ce.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},
selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var g=this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(l){return 0<=l&&l<g}));this.update();ce.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},
set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]&&a.items[g].value})},set:function(a){var g=this;this.selectedIndexes=a.map(function(l){return g.findIndex(l)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(g){return a.items[g]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],
readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},
itemHeight:{after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a},get:function(){var a=this.getProperty("itemHeight");if(a)return a;a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var g=this.itemPadding;g&&(a+=g.top()+g.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.addStyleClass(a);this.setProperty("theme",a)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10477,end:26899})}(ce.Morph));ce.List=tF;ce.List=tF;ce.List=tF;ce.connect=yl;var hJ=Ba("aN",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=d.hasOwnProperty("FilterableList")&&
"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=ce.pt(400,360));hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);ce.connect(this.inputMorph,"inputChanged",this,"updateFilter");
ce.connect(this.listMorph,"selection",this,"selectionChanged");ce.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();ce.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var a=this,g=this.attributeConnections;if(g){var l=["accepted","canceled","remove"];g.filter(function(r){return l.includes(r.sourceAttrName)&&r.targetObj!==a}).forEach(function(r){return r.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",
value:function(){var a=this.listMorph,g=this.inputMorph,l=this.paddingMorph,r=this.borderWidth;g.topLeft=ce.pt(r,r);g.width=a.width=this.width-2*r;l&&(l.topLeft=g.bottomLeft);a.position=l?l.bottomLeft:g.bottomLeft;a.height=this.height-a.top-r}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){ce.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=
this.get("input").textString,g=Array.from(a).reduce(function(r,v){if("\\"===v&&!r.escaped)return r.escaped=!0,r;" "!==v||r.escaped?(r.spaceSeen=!1,r.current+=v):(!r.spaceSeen&&r.current&&(r.tokens.push(r.current),r.current=""),r.spaceSeen=!0);r.escaped=!1;return r},{tokens:[],current:"",escaped:!1,spaceSeen:!1});g.current&&g.tokens.push(g.current);var l=g.tokens.map(function(r){return r.toLowerCase()});return{tokens:g.tokens,lowercasedTokens:l,input:a}}},{key:"updateFilter",value:function(){var a=
this,g=this.parseInput(),l=this.filterFunction,r=this.sortFunction,v=this.items.filter(function(E){return l.call(a,g,E)});r&&(v=ce.arr.sortBy(v,function(E){return r.call(a,g,E)}));var y=this.listMorph,A=this.updateSelectionsAfterFilter?y.selectedIndexes.map(function(E){return v.indexOf(y.items[E])}).filter(function(E){return-1!==E}):y.selectedIndexes;y.items=v;y.selectedIndexes=A.length?A:v.length?[0]:[];this.scrollSelectionIntoView();ce.signal(this,"filterChanged",{parsedInput:g,items:y.items})}},
{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};ce.signal(this,"accepted",a);return a}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},
{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(ce.arr.range(0,8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return hc._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"accept input",exec:function(g){a.acceptInput();return!0}},{name:"cancel",exec:function(g){ce.signal(g,"canceled");return!0}},{name:"choose action and accept input",exec:function(g,l){l=void 0===l?{}:l;g.selectedAction=(g.actions||[])[void 0===l.actionNo?0:l.actionNo];return g.execCommand("accept input")}},{name:"choose action",exec:function(g){var l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(!g.actions)return y.return(!0);l=Object.assign({},
g.style,{extent:g.extent});r=new ce.FilterableList(l);r.openInWorld(g.globalPosition);r.items=g.actions;v=g.actions.indexOf(g.selectedAction);-1===v&&(v=0);r.selectedIndex=v;ce.connect(r,"accepted",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return A.selected[0]}});ce.connect(r,"canceled",g,"selectedAction",{converter:function(A){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});r.focus();
return y.return(!0)})}}].concat($jscomp.arrayFromIterable(ce.listCommands.map(function(g){return Object.assign({},g,{exec:function(l,r,v){return g.exec(a.listMorph,r,v)}})}))))}}],[{key:"className",get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:ce.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);
this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[ce.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new ce.morph({name:"padding",fill:ce.Color.transparent,height:5}),new ce.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,
derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,
after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},
set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(ce.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},
set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,
after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;
"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(g,l){var r=String(ce.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?
v-=10:r.includes(y)&&(v-=5)});return ce.arr.sum(g.lowercasedTokens.map(function(y){return ce.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(ce.Path(r).get(l)).toLowerCase();return 3>=ce.arr.sum(g.lowercasedTokens.map(function(y){return ce.string.levenshtein(v,
y)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27012,end:41362})}(ce.Morph));ce.FilterableList=hJ;ce.FilterableList=hJ;ce.FilterableList=hJ;var iJ=Ba("br",function(b){var d=
lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);ce.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var g=this;setTimeout(function(){var l=g.listMorph,r=g.world()&&g.world().focusedMorph;if(l!==r&&r!==g&&l.world()&&!l.withAllSubmorphsDetect(function(v){return v==r}))l.fadeOut(200);else ce.once(ce.touchInputDevice?l.scroller:l,
"onBlur",g,"removeWhenFocusLost")},100)}},{key:"toggleList",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){g=a.listMorph;if(a.isListVisible())return ce.signal(a,"deactivated"),a.selection=g.selection,g.epiMorph=!1,g.remove(),v.jumpTo(0);ce.signal(a,"activated");a.openListInWorld?(g.openInWorld(),g.epiMorph=!0,g.hasFixedPosition=!0,g.setTransform(a.getGlobalTransform()),l=a.globalBounds()):(l=a.innerBounds(),a.addMorph(g));r=g.items.length*
g.itemHeight+g.padding.top()+g.padding.bottom();g.extent=ce.pt(a.width,Math.min(a.listHeight,r));"top"===a.listAlign?g.bottomLeft=l.topLeft():g.topLeft=l.bottomLeft();ce.once(g,"onItemMorphClicked",a,"toggleList");ce.once(ce.touchInputDevice?g.scroller:g,"onBlur",a,"removeWhenFocusLost");return v.yield(g.whenRendered(),3)}if(4!=v.nextAddress)return v.yield(g.whenRendered(),4);ce.touchInputDevice?g.scroller.focus():g.focus();g.scrollSelectionIntoView();v.jumpToEnd()})}},{key:"commands",get:function(){var a=
this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(hc._get(Object.getPrototypeOf(m.prototype),"commands",this))}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}])}}],[{key:"className",get:function(){return"DropDownList"}},{key:"properties",
get:function(){return{padding:{defaultValue:ce.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new ce.List({name:"dropDownList"});this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){this.listMorph.items=a}},
selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var g=this.listAlign,l=this.listMorph;if(a){var r=l.items,v=l.find(a);v||"string"!==typeof a||(v=r.find(function(A){return A.string===a}));if(!v)return;var y=v.label||[v.string,null];y=[].concat($jscomp.arrayFromIterable(y),[" ",null],$jscomp.arrayFromIterable(ce.Icon.textAttribute("caret-"+("bottom"===g?"down":"up"))));y[5]&&(y[5].textStyleClasses=["fa","annotation"]);this.label=y;this.relayout();
l.selectedIndex=r.indexOf(v)}else l.selection=null,this.label="";ce.signal(this,"selection",l.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41372,end:45893})}(ce.Button));ce.DropDownList=iJ;ce.DropDownList=iJ;ce.DropDownList=iJ;var UP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),
m=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!g.item.isPreview)return r.jumpTo(0);
l=a.hand.grabbedMorphs[0];hc._get(Object.getPrototypeOf(m.prototype),"onDrop",g).call(g,a);return r.yield(g.list.whenRendered(),3)}g.list.addItemAt({morph:l,isListItem:!0},g.itemIndex);g.list.clearPreviews();r.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){ce.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){ce.touchInputDevice&&500>Date.now()-this._touchDown&&
this.select()}},{key:"displayItem",value:function(a,g,l,r,v,y,A){y=void 0===y?!1:y;hc._get(Object.getPrototypeOf(m.prototype),"displayItem",this).call(this,a,g,l,r,v,y,A);a.morph&&(a.morph.selected=y)}},{key:"onGrab",value:function(a){var g=this.list,l=a.halo&&a.halo.target===this;l&&a.halo.detachFromTarget();var r=this.submorphs.length?this.submorphs[0]:ce.morph({type:"label",value:this.value});a.hand.grab(r);r.position=a.hand.localize(this.globalPosition);l&&a.halo.refocus(r);g.removeItem(this.list.items[this.itemIndex]);
g.itemMorphs.forEach(function(v){return v.remove()});g.update()}}],[{key:"className",get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:ce.touchInputDevice?!1:!0},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:45902,end:48176})}(ce.ListItemMorph);ce.InteractiveItem=UP;ce.InteractiveItem=UP;ce.InteractiveItem=UP;var VP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),m=d.hasOwnProperty("MorphList")&&"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:"onLoad",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,g){a=a.itemIndex;this.items[a].isPreview&&g||(this.clearPreviews(),g&&this.addItemAt({isListItem:!0,isPreview:!0,morph:ce.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:ce.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=
this;this.items.filter(function(g){return g.morph&&g.morph.owner&&!ce.Path("morph.owner.isListItem").get(g)}).map(function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(a.removeItem(g))})});this.items.filter(function(g){return g.isPreview}).map(function(g){return a.removeItem(g)})}},{key:"update",value:function(){var a=this,g=this.items;g&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=a.itemHeight,
r=a.itemMorphs,v=a.listItemContainer,y=a.selectedIndexes,A=a.extent.y,E=a.fontSize,F=a.fontFamily,G=a.fontColor,I=a.padding,M=a.itemPadding,L=a.selectionColor,S=a.selectionFontColor,R=a.nonSelectionFontColor,aa=a.itemBorderRadius,ra=a.scrollBar,Ea=a.scroll.y;I=I||ce.Rectangle.inset(0);var K=I.top(),Z=I.left(),U=I.bottom();I=I.right();var V=Math.max(0,Math.floor(Ea/l)),na=Math.min(g.length,Math.ceil((Ea+A)/l));A=0;Ea=a.width-(Z+I);r=ce.arr.sortBy(r,function(jb){return jb.itemIndex});var la=$jscomp.makeIterator(ce.arr.partition(r,
function(jb){return jb.itemIndex<V}));r=la.next().value;var ya=la.next().value;ya=$jscomp.makeIterator(ce.arr.partition(ya,function(jb){return jb.itemIndex>na}));la=ya.next().value;ya=ya.next().value;r=[].concat($jscomp.arrayFromIterable(la),$jscomp.arrayFromIterable(ya),$jscomp.arrayFromIterable(r));E={fontSize:E,fontFamily:F,fontColor:R||G,padding:M,borderRadius:aa||0,selectionFontColor:S,nonSelectionFontColor:R,selectionColor:L};r.length&&na-V>r.length&&(V!=r[0].itemIndex?ce.arr.pushAt(r,v.addMorph(new ce.InteractiveItem(E)),
0):na!=ce.arr.last(r).itemIndex&&r.push(v.addMorph(new ce.InteractiveItem(E))));for(F=0;F<na-V;F++){G=V+F;M=g[G];if(!M){r.slice(F).forEach(function(jb){return jb.remove()});break}L=r[F];L||(L=r[F]=v.addMorph(new ce.InteractiveItem(E)),L.clipMode="visible");L.displayItem(M,G,Ea,l,ce.pt(0,l*G),y.includes(G),E);A=Math.max(A,L.width)}l=Math.max(K+U+l*g.length,a.height);y=ce.pt(a.width,l).subPt(ce.pt(Z+I,0));v.setBounds(ce.pt(Z,K).extent(y));ra.left=A-10;ra.fill=null;ra.top=0;ra.extent=ce.pt(1,l)}))}},
{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:"className",get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return ce.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(ce.asItem));this.itemMorphs.forEach(function(g){return g.remove()});
this.update();this.attributeConnections&&ce.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48185,end:53412})}(ce.List);ce.MorphList=VP;ce.MorphList=VP;ce.MorphList=VP;var $va=Object.freeze({__proto__:null,asItem:bH,ListItemMorph:TP,List:tF,FilterableList:hJ,
DropDownList:iJ,InteractiveItem:UP,MorphList:VP}),Ch=lively.FreezerRuntime.recorderFor("lively.components/menus.js");Ch.Label=Dt;Ch.config=am;Ch.Morph=Ol;Ch.obj=Ng;Ch.promise=xh;Ch.fun=xn;Ch.pt=th;Ch.Color=Tg;Ch.Rectangle=Re;var WP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=d.hasOwnProperty("MenuDivider")&&"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,void 0,[{key:"className",get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:Ch.Color.gray.lighter()},extent:{defaultValue:Ch.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:168,end:437})}(Ch.Morph);Ch.MenuDivider=WP;Ch.MenuDivider=WP;Ch.MenuDivider=WP;var XP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:d.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onHoverIn",value:function(a){var g=this;this.owner.itemMorphs.forEach(function(l){return l!==
g&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var g=this,l=a.hand;setTimeout(function(){(g.owner?g.owner.submenus:[]).some(function(r){return r.fullContainsWorldPoint(l.globalPosition)})||(g.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(g.submenu)return v.return();
v.setCatchFinallyBlocks(2);g.owner.startFinish();if("function"!==typeof g.action)throw Error("Menu item "+g.textString+" has no executable action!");return v.yield(g.action(),4)}if(2!=v.nextAddress)return g.owner.completeFinish(),v.leaveTryBlock(0);l=v.enterCatchBlock();(r=g.world())?r.logError(l):console.error(l);v.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},
fill:{defaultValue:Ch.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",a),a?(this.fontColor=Ch.Color.white,this.fill=Ch.Color.rgb(21,101,192)):(this.fill=Ch.Color.transparent,this.fontColor=Ch.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,
g){return 0===g%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,annotation:a}}},action:{},submenu:{}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:446,end:2937})}(Ch.Label);Ch.MenuItem=XP;Ch.MenuItem=XP;Ch.MenuItem=XP;Ch.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var YP=Ba("aO",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),m=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,
b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,
a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();hc._get(Object.getPrototypeOf(m.prototype),"remove",a).call(a);g.jumpToEnd()})}},{key:"ensureItem",value:function(a){if(!a)return Ch.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return Ch.obj.select(a,
["string","action","annotation"]);if(Array.isArray(a)){var g=$jscomp.makeIterator(a),l=g.next().value;g=g.next().value;return"string"===typeof l||Array.isArray(l)?g&&"function"!==typeof g?"object"===typeof g&&g.getItems?{label:l,submenu:g.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(g)?{label:l,submenu:g,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Ch.invalidItem:{label:l,action:g||function(){return $world.setStatusMessage(l)}}:Ch.invalidItem}if(a.command){var r=
a.command,v=a.showKeyShortcuts,y=a.target;g=a.alias;var A=a.args;if(!r||!y)return Ch.invalidItem;void 0===v&&(v=!0);a=v?"string"===typeof v?v:y.keysForCommand(r):null;return{string:g||r,annotation:a?["\t"+a,{fontSize:"70%"}]:["",{}],action:function(){return y.execCommand(r,A)}}}return Ch.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var g=this.padding.left(),l=this.padding.right(),r=this.padding.top(),v=this.padding.bottom(),y=0,A=Ch.pt(g,r),E={};this.fontFamily&&
(E.fontFamily=this.fontFamily);this.fontSize&&(E.fontSize=this.fontSize);this.itemPadding&&(E.padding=this.itemPadding);this.title&&(r=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:A,fontWeight:"bold"},E)),A=r.bottomLeft,y=Math.max(r.width,y));this.items.forEach(function(F){var G=F.label,I=F.string,M=F.annotation,L=F.action,S=F.submenu;F=a.addMorph(F.isDivider?new Ch.MenuDivider({position:A}):new Ch.MenuItem(Object.assign({label:G||I,annotation:M,action:L,submenu:S,
position:A},E)));A=F.bottomLeft;y=Math.max(F.width,y)});this.submorphs.forEach(function(F){F.isLabel&&(F.fit(),F.autofit=!1,F.fixedWidth=!0,F.fixedHeight=!0);F.width=y});this.extent=Ch.pt(y+l+g,A.y+v)}},{key:"openSubMenuDelayed",value:function(a,g,l){var r=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{r.openSubMenu(a,g,l)}catch(y){var v=r.world();v?v.logError(y):console.error(y)}},200)}},{key:"openSubMenu",value:function(a,
g,l){if(g.selected){var r=this.submenu;if(r){if(r.ownerItemMorph===g||this.morphsContainingPoint(a.position).includes(r))return;this.removeSubMenu()}"function"===typeof l&&(l=l());a=this.submenu=this.addMorph(new Ch.Menu({items:l,ownerItemMorph:g,ownerMenu:this}));a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var a=this;Ch.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var g=a.world();if(g){var l=a.submenu,r=a.selectedItemMorph;g=g&&l&&l.fullContainsWorldPoint(g.firstHand.position);
l&&l.ownerItemMorph!==r&&!l.ownerItemMorph.selected&&(g?(r&&(r.selected=!1),l.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",value:function(a,g){var l=0,r=0;a.right()>g.right()&&(l=-1*(a.right()-g.right()));var v=a.left()+l;0>v&&(l+=-v);a.bottom()>g.bottom()&&(r=-1*(a.bottom()-g.bottom()),l+=1);g=a.top()+r;0>g&&(r+=
-g);return a.translatedBy(Ch.pt(l,r))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,g,l,r){r||(r=g.right()+a.width>l.right()?"left":"right");a=a.extent();a="left"===r?g.topLeft().addXY(-a.x,0).extent(a):g.topRight().extent(a);a.bottom()>l.bottom()&&(g=-1*(a.bottom()-l.bottom()),a=a.translatedBy(Ch.pt(0,g)));a.top()<l.top()&&(l=l.top()-a.top(),a=a.translatedBy(Ch.pt(0,l)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,g=this.world().visibleBounds(),l=a.getGlobalTransform().inverse().transformRectToRect(g);
a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),l),g);this.setBounds(a)}},{key:"clipForVisibility",value:function(a,g){a=void 0===a?this.bounds():a;g=void 0===g?this.world().visibleBounds():g;var l=this.transformRectToMorph(this.world(),a.withX(0).withY(0));g.containsRect(l.insetBy(10))||(a=a.withExtent(Ch.pt(5+a.width,Math.min(l.height,g.height))));return a}},{key:"offsetForWorld",value:function(a){a=
this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var g=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,g),g)}this.setBounds(a)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:"className",get:function(){return"Menu"}},{key:"forItems",value:function(a,g){g=void 0===g?{title:""}:g;return new this(Object.assign({},g,{items:a}))}},{key:"openAt",value:function(a,g,l){l=void 0===l?{title:""}:l;g=this.forItems(g,l).openInWorldNear(a);
g.offsetForWorld(a);return g}},{key:"openAtHand",value:function(a,g){g=void 0===g?{title:""}:g;var l=g.hand;a=this.forItems(a,Ch.obj.dissoc(g,["hand"]));l=l?l.position:Ch.pt(0,0);a.titleMorph&&(l=l.addXY(0,-a.titleMorph.height));a.openInWorld(l);a.offsetForWorld(l);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(Ch.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:Ch.Rectangle.inset(0,2)},itemPadding:{defaultValue:Ch.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},fill:{defaultValue:Ch.Color.white},borderColor:{defaultValue:Ch.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",
a)}},finishedPromise:{initialize:function(){this.finishedPromise=Ch.promise.deferred()}},ownerMenu:{},submenu:{},submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3047,end:15736})}(Ch.Morph));Ch.Menu=YP;Ch.Menu=YP;
Ch.Menu=YP;var awa=Object.freeze({__proto__:null,MenuDivider:WP,MenuItem:XP,Menu:YP}),bl=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");bl.arr=ng;bl.pt=th;bl.Color=Tg;bl.Morph=Ol;var ZP=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),m=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.x-this.extent.x;if(!(0>g)){var l=this.getRelativeDivide();this.movedHorizontallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.left();g=this.owner.extent.x-g.width;return 0>g?NaN:a/g}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&
(this.fixed.concat(this.scalingRight).forEach(function(g){var l=g.position;g.position=bl.pt(l.x+a,l.y)}),this.scalingLeft.forEach(function(g){var l=g.extent;g.extent=bl.pt(l.x+a,l.y)}),this.scalingRight.forEach(function(g){var l=g.extent;g.extent=bl.pt(l.x-a,l.y)}),this.position=this.position.addPt(bl.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingLeft.every(function(l){return l.extent.x+a>=g.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-a>=g.minWidth})}},
{key:"addFixed",value:function(a){bl.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){bl.arr.pushIfNotIncluded(this.scalingLeft,a)}},{key:"addScalingRight",value:function(a){bl.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:"className",get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:bl.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},
minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(bl.Morph);bl.VerticalResizer=ZP;bl.VerticalResizer=ZP;bl.VerticalResizer=ZP;var $P=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),
m=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var g=this.owner.extent.y-this.extent.y;if(!(0>
g)){var l=this.getRelativeDivide();this.movedVerticallyBy(g*(a-l))}}}},{key:"getRelativeDivide",value:function(a){var g=this.bounds();a=g.top();g=this.owner.extent.y-g.height;return 0>g?NaN:a/g}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(g){var l=g.position;g.position=bl.pt(l.x,l.y+a)}),this.scalingAbove.forEach(function(g){var l=g.extent;g.extent=bl.pt(l.x,l.y+a)}),this.scalingBelow.forEach(function(g){var l=g.extent;g.extent=
bl.pt(l.x,l.y-a)}),this.position=this.position.addPt(bl.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var g=this;return this.scalingAbove.every(function(l){return l.extent.y+a>=g.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-a>=g.minHeight})}},{key:"addFixed",value:function(a){bl.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){bl.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){bl.arr.pushIfNotIncluded(this.scalingBelow,
a)}}],[{key:"className",get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:bl.Color.gray.lighter()},nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(bl.Morph);bl.HorizontalResizer=$P;bl.HorizontalResizer=$P;bl.HorizontalResizer=$P;var bwa=Object.freeze({__proto__:null,VerticalResizer:ZP,HorizontalResizer:$P}),Sg=lively.FreezerRuntime.recorderFor("lively.components/tree.js");Sg.arr=ng;Sg.fun=xn;Sg.obj=Ng;Sg.tree=hu;Sg.string=Li;Sg.promise=xh;Sg.pt=th;Sg.Rectangle=Re;Sg.Color=Tg;Sg.Morph=Ol;Sg.Text=Ct;Sg.config=am;Sg.touchInputDevice=Qq;Sg.Label=Dt;Sg.connect=
yl;Sg.signal=xf;Sg.bowser=cea;var aQ=Ba("bq",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),m=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");hc._get(Object.getPrototypeOf(m.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,
fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var g=this.textLayout.charBoundsOfRow(this,a);a=Sg.Rectangle.fromLiteral(Sg.arr.first(g)).topLeft();g=Sg.Rectangle.fromLiteral(Sg.arr.last(g)).bottomRight();return Sg.Rectangle.fromAny(a,g)}},{key:"recoverOriginalLine",value:function(a){for(var g=this.document.getTextAndAttributesOfLine(a),l=0;l<g.length;l++){var r=this._originalColor[l];r&&!Sg.obj.isString(g[l])&&(g[l]?g[l].fontColor=
r:g[l]={fontColor:r})}this.document.setTextAndAttributesOfLine(a,g)}},{key:"renderSelectedLine",value:function(a){var g=this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(g.length);for(var l=0;l<g.length;l++)0===l%2?g[l]&&g[l].isMorph&&(this._originalColor[l]=g[l]?g[l].fontColor||this.nonSelectionFontColor:null,g[l].fontColor=this.selectionFontColor,g[l].isSelected=!0):(this._originalColor[l]=(g[l]?g[l].fontColor:null)||this.nonSelectionFontColor,g[l]?g[l].fontColor=this.selectionFontColor:
g[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,g);this.selectLine(a,!0);this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var g=Sg.arr.genN(8*(a.length-1),function(){return null}),l=1,r,v,y=this.disableIndent?0:1.3*this.fontSize;l<a.length;l++){r=8*(l-1);v=this.selectedIndex==l;a[l].node.isSelected=v;g[r]=" ";g[r+1]={fontSize:y,fontColor:Sg.Color.transparent,textStyleClasses:["fas"],paddingRight:y*
(a[l].depth-1)+"px"};g[r+3]={fontColor:Sg.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[l].node)?g[r+2]=this.disableIndent?"":"    ":(g[r+2]=this.treeData.isCollapsed(a[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(g[r+3],{paddingRight:this.treeData.isCollapsed(a[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var A=this.treeData.safeDisplay(a[l].node);A.isMorph&&
(A._capturedProps&&Object.assign(A,A._capturedProps),v&&(A._capturedProps=Sg.obj.select(A,["fontColor"])),A.fontColor=this.nonSelectionFontColor);g[r+4]=A;Sg.arr.isArray(A)?g[r+5]=[]:g[r+5]={fontColor:this.fontColor};g[r+6]="\n";g[r+7]={}}g.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?Sg.arr.flatten(g):[]}},{key:"update",value:function(a){var g=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},
function(){var l=g.treeData.asListWithIndexAndDepth();g.treeData!==g.lastTreeData||g.lastNumberOfNodes!==l.length||a?(g.replace({start:{row:0,column:0},end:g.documentEndPosition},g.computeTreeAttributes(l),!1,!1),g.invalidateTextLayout(!0,!1),g.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g.makeDirty();r.jumpToEnd()})})):g._lastSelectedIndex&&g.recoverOriginalLine(g._lastSelectedIndex-1);g.lastTreeData=g.treeData;g.lastNumberOfNodes=l.length;g.cursorPosition=
{row:0,column:0};0<g.selectedIndex&&g.renderSelectedLine(g.selectedIndex-1)})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(a){var g=this;"function"!==typeof a&&(a=function(v){return v});var l=this.selectedNode?a(this.selectedNode):null,r=new Map;Sg.tree.prewalk(this.treeData.root,function(v){return r.set(a(v),g.treeData.isCollapsed(v))},function(v){return g.treeData.getChildrenIfUncollapsed(v)});return{selectionId:l,collapsedMap:r,scroll:this.scroll}}},{key:"applyViewState",
value:function(a,g){var l=this,r,v,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:"function"!==typeof g&&(g=function(L){return L}),r=a,v=r.selectionId,y=r.collapsedMap,A=r.scroll,E=0,F=-1;case 2:G=l.nodes;if(E>=G.length){M.jumpTo(3);break}I=g(G[E]);v===I&&(F=E);if(!y.has(I)||y.get(I)){M.jumpTo(4);break}return M.yield(l.treeData.collapse(G[E],!1),4);case 4:E++;M.jumpTo(2);break;case 3:return l.selectedIndex=F,l.update(),l.scroll=A,l.scrollSelectionIntoView(),
M.yield(Sg.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,g){var l=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=l.buildViewState(g),v.yield(a(),2)):v.yield(l.applyViewState(r,g),0)})}},{key:"onNodeCollapseChanged",value:function(a){var g=a.node,l=a.isCollapsed,r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r.resetCache(),y.setCatchFinallyBlocks(2),y.yield(r.treeData.collapse(g,
l),4);if(2!=y.nextAddress)return Sg.signal(r,"nodeCollapseChanged",{node:g,isCollapsed:l}),r.update(),y.leaveTryBlock(0);v=y.enterCatchBlock();r.showError(v);y.jumpToEnd()})}},{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?a&&g.treeData.isCollapsed(a)?l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):l.return():l.return(a)})}},{key:"collapse",value:function(a){a=void 0===
a?this.selectedNode:a;var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!a||g.treeData.isCollapsed(a)?l.return():l.yield(g.onNodeCollapseChanged({node:a,isCollapsed:!0}),2):l.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(l=g,r.yield(g.treeData.followPath(a),2)):
r.return(l.selectedNode=r.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-
1,column:0})}},{key:"contextMenuForNode",value:function(a,g){Sg.signal(this,"contextMenuRequested",{node:a,evt:g})}},{key:"onKeyDown",value:function(a){var g=this.world().focusedMorph;if(!g.isText||g.readOnly)return hc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);var g=this.textAttributeAtPoint(a.positionIn(this))||{},l=g.onDragStart,r=g.onDrag;g=g.onDragEnd;
r&&(this._onDragHandler=r);g&&(this._onDragEndHandler=g);l&&l(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):hc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a)}},{key:"onDragEnd",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return l=g.textPositionFromPoint(a.positionIn(g)),r=l.row,v=l.column,y=g.nodes[r+1],y?!g.treeData.isLeaf(y)&&4>v?F.yield(y.isCollapsed,3):(g.selectedIndex!=r+1&&(g.selectedIndex=r+1),F.jumpTo(2)):F.return();2!=F.nextAddress&&(F.yieldResult?g.uncollapse(y):g.collapse(y));A=g.textAttributeAt({row:r,column:v})||{};(E=A.onMouseDown)&&E(a);F.jumpToEnd()})}},{key:"onMouseUp",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onMouseUp",this).call(this,a);var g=(this.textAttributeAtPoint(a.positionIn(this))||
{}).onMouseUp;g&&g(a)}},{key:"onHoverIn",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onHoverIn",this).call(this,a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onHoverOut",this).call(this,a);!Sg.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var g=this.textPositionFromPoint(a.positionIn(this));(g=this.nodes[g.row+
1])&&this.contextMenuForNode(g,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",
command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Sg.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(g){g=
$jscomp.makeIterator(g);var l=g.next().value;g.next();return l.renderedNode&&l.renderedNode.highlight()})}}],[{key:"className",get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Sg.Color.rgb(21,101,192)},fontFamily:{defaultValue:Sg.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:Sg.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,
after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},hc._get(Object.getPrototypeOf(m),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,
derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Sg.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Sg.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,
readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(Sg.Text));Sg.Tree=aQ;Sg.Tree=aQ;Sg.Tree=aQ;var bQ=Ba("bo",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
m=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");
}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");}},{key:"collapse",value:function(a,g){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(g){return"[TreeData] Error when trying to display node: "+
g}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(g,l){return 0===l%2?g:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var g=this;return this.parentMap.get(a)||Sg.tree.detect(this.root,function(l){return!g.isLeaf(l)&&g.getChildrenIfUncollapsed(l).includes(a)},function(l){return g.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):
[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},{key:"asListWithIndexAndDepth",value:function(a){var g=this;a=void 0===a?!1:a;var l=[];Sg.tree.prewalk(this.root,function(r,v,y){return l.push({node:r,depth:y,i:v})},function(r){return g.getChildrenIfUncollapsed(r)});return a?Sg.arr.filter(l,a):l}},{key:"pathOf",value:function(a){for(var g=[];a;)g.unshift(a),a=this.parentNode(a);return g}},{key:"followPath",value:function(a,g,l){l=void 0===
l?this.root:l;var r=this,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:g||(g=function(G,I){return G===I});v=a.findIndex(function(G){return g(G,l)});a=a.slice(v+1);if(!a.length)return F.return(null);y=l;case 2:if(!a.length){F.jumpTo(3);break}if(!r.isCollapsed(y)){F.jumpTo(4);break}return F.yield(r.collapse(y,!1),4);case 4:A=a.shift();E=r.getChildrenIfUncollapsed(y).find(function(G){return g(A,G)});if(!E)throw Error("Cannot descend into tree, next node of "+
a.join(".")+" not found at "+r.safeDisplay(y));y=E;F.jumpTo(2);break;case 3:return F.return(y)}})}},{key:"diff",value:function(a){var g=[],l=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(l.length!=a.length)return[];l=$jscomp.makeIterator(Sg.arr.zip(l,a));for(a=l.next();!a.done;a=l.next()){var r=$jscomp.makeIterator(a.value);a=r.next().value;r=r.next().value;Sg.obj.equals(a.node.value,r&&r.node.value)||g.push([a.node,r.node])}return g}},{key:"patch",value:function(a){var g=this.diff(a);
if(0<g.length){a=$jscomp.makeIterator(g);for(g=a.next();!g.done;g=a.next()){var l=$jscomp.makeIterator(g.value);g=l.next().value;l=l.next().value;g.value=l.value}return this}return a}},{key:"uncollapseAll",value:function(a,g,l){g=void 0===g?0:g;var r=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(l){A.jumpTo(2);break}return A.yield(r.uncollapseAll(a,g,r.root),3);case 3:return A.return(A.yieldResult);case 2:if(!a(l,g)){A.jumpTo(0);break}if(!l.isCollapsed){A.jumpTo(5);
break}return A.yield(r.collapse(l,!1),6);case 6:case 5:y=A.forIn(l.children);case 7:if(null==(v=y.getNext()))A.jumpTo(0);else return A.yield(r.uncollapseAll(a,g+1,l.children[v]),7)}})}}],[{key:"className",get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,
end:22466})}(void 0));Sg.TreeData=bQ;Sg.TreeData=bQ;Sg.TreeData=bQ;Sg.treeCommands=[{name:"select via filter",exec:function(b){var d,m,a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return d=b.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(y){return Object.assign(y,{string:d.nodeToString(y.node)})}),m=Sg.string.lines(Sg.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),a=d.asList().map(function(y,
A){return{isListItem:!0,string:m[A],value:y}}),v.yield(b.world().filterableListPrompt("Select item",a),2);g=v.yieldResult;l=$jscomp.makeIterator(g.selected);if(r=l.next().value)b.selectedNode=r,b.scrollSelectionIntoView();return v.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var d=b.scroll,m=b.padding.top(),a=d.y;d=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});d--;b.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var d=b.scroll,
m=b.padding.top(),a=d.y+b.height;d=b.lineHeightCache.findIndex(function(g){return a<=(m+=g)});d--;b.gotoIndex(Math.min(d,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var d=b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)+1])b.selectedNode=d,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var d=
b.selectedNodeAndSiblings;if(d=d[d.indexOf(b.selectedNode)-1])b.selectedNode=d,b.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(d=b.selectedNode,d?b.treeData.isCollapsed(d)?(b.selectedNode=b.treeData.parentNode(d),b.scrollSelectionIntoView(),
m.jumpTo(2)):m.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):m.return(!0)):m.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?b.selectedNode?d.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,d){function m(F){return Sg.arr.filter(l.getChildrenIfUncollapsed(F),function(G){return!l.isLeaf(G)})}
function a(F,G){return Promise.all(F.map(function(I){return b.onNodeCollapseChanged({node:I,isCollapsed:G})}))}d=void 0===d?{what:"collapse"}:d;var g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){g="collapse"===d.what;l=b.treeData;if(g){if(l.isCollapsed(b.selectedNode))return F.return(!0);v=l.parentNode(b.selectedNode);y=-1;Sg.tree.prewalk(v,function(G,I,M){M<y||(M>y&&(y=M,r=[]),M===y&&Sg.arr.pushIfNotIncluded(r,l.parentNode(G)))},l.getChildrenIfUncollapsed.bind(l))}else for(A=
Sg.arr.compact([l.parentNode(b.selectedNode)]);A.length;){r=Sg.arr.flatmap(A,function(G){return m(G)});E=r.every(function(G){return l.isCollapsed(G)===g});if(!E)break;A=r}return F.yield(a(r,g),2)}b.scrollSelectionIntoView();return F.return(!0)})}},{name:"select node above",exec:function(b){var d=b.nodes,m=b.selectedIndex;1>=m&&(m=d.length);b.selectedNode=d[m-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var d=b.nodes,m=b.selectedIndex;if(-1>=m||m>=d.length-1)m=
0;b.selectedNode=d[m+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(b){if(b.selectedNode){var d=b.scroll,m=d.x;d=d.y;var a=b.lineBounds(b.selectedIndex),g=a.topLeft();a=b.height-a.height;d=2>Math.abs(g.y-d)?g.y-a:2>Math.abs(g.y-d-.5*a)?g.y:g.y-.5*a;b.scroll=Sg.pt(m,d);return!0}}},{name:"print contents in text window",exec:function(b){var d=b.treeData;d=Sg.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));var m=b.getWindow()?
"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:m,content:d,name:m,fontFamily:Sg.config.codeEditor.defaultStyle.fontFamily})}}];var cwa=Object.freeze({__proto__:null,Tree:aQ,TreeData:bQ}),Sz=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");Sz.promise=xh;Sz.HTMLMorph=rz;var cQ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),m=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:
d.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,g){var l=this,r=this.iframe,v=this._loadPromise;v&&!v.loaded&&v.reject();this._loadPromise=
Sz.promise.deferred();this._loadPromise.loaded=!1;r.onload=function(y){l._loadPromise.loaded=!0;l._loadPromise.resolve(y)};g=a||g;v=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(v,g);r.removeAttribute(a);r.setAttribute(v,g);this._loadPromise[v]=g}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:"className",
get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(a.whenRendered(),2);if(3!=A.nextAddress)return g=a.env.renderer.getNodeForMorph(a),l=Sz.IFrameMorph.open({srcdoc:g.outerHTML}),A.yield(l.whenLoaded(),3);r=l.innerWindow.document;r.body.style.whiteSpace="normal";r.body.style.margin="0.5cm";r.querySelector(".Text").style.width="100%";r.querySelector(".Text").style.overflow=
"visible";r.querySelectorAll(".marker-layer-part").forEach(function(E){return E.parentNode.removeChild(E)});v=r.querySelector(".text-layer");v.style.whiteSpace="pre-wrap";y=Array.from(v.querySelectorAll("div"));y.forEach(function(E){E.childNodes[0]&&(Array.from(E.childNodes).forEach(function(F){return v.insertBefore(F,E)}),v.insertBefore(r.createElement("br"),E),v.removeChild(E))});l.innerWindow.print();l.getWindow().remove();A.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||
"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=
this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,
end:6160})}(Sz.HTMLMorph);Sz.IFrameMorph=cQ;Sz.IFrameMorph=cQ;Sz.IFrameMorph=cQ;var dwa=Object.freeze({__proto__:null,IFrameMorph:cQ}),Bg=lively.FreezerRuntime.recorderFor("lively.components/window.js");Bg.arr=ng;Bg.promise=xh;Bg.pt=th;Bg.LinearGradient=qn;Bg.Color=Tg;Bg.Rectangle=Re;Bg.Label=Dt;Bg.morph=ab;Bg.Morph=Ol;Bg.HorizontalLayout=Ev;Bg.StyleSheet=Fv;Bg.connect=yl;Bg.signal=xf;Bg.easings=Pq;var GY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),m=d.hasOwnProperty("Window")&&
"function"===typeof d.Window?d.Window:d.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,g,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){return 1==F.nextAddress?(g=a.world()||a.env.world,l=a.targetMorph.world(),r=l.openMenu,v=[["Change Window Title",
function(){var G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(g.prompt("Enter New Name",{input:a.title}),2);if(G=I.yieldResult)a.title=G;I.jumpToEnd()})}],["Align and resize",[{alias:"left",target:g,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:g,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:g,command:"resize active window",args:{window:a,how:"right"}},{alias:"reset",target:g,
command:"resize active window",args:{window:a,how:"reset"}}]],{isDivider:!0}],y=v.concat,A=$jscomp,E=A.arrayFromIterable,F.yield(a.targetMorph.menuItems(),2)):F.return(r.call(l,y.call(v,E.call(A,F.yieldResult))))})}},{key:"toggleFader",value:function(a){var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:l=g.getSubmorphNamed("fader")||g.addMorph({name:"fader",fill:Bg.Color.black.withA(.5),opacity:0,extent:g.extent});if(a){r=g.world().visibleBounds().translateForInclusion(g.bounds());
g._originalBounds=g.bounds();g.animate({bounds:r,duration:300});g.borderColor=Bg.Color.gray.darker();g._faderTriggered=!0;l.opacity=1;v.jumpTo(0);break}g._originalBounds&&(g.animate({bounds:g._originalBounds,duration:300}),g._originalBounds=null);g._faderTriggered=!1;return v.yield(g.whenRendered(),3);case 3:return v.yield(Bg.promise.delay(100),4);case 4:return g.borderColor=Bg.Color.gray,g._faderTriggered?v.return():v.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),v.jumpToEnd()}})}},
{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new Bg.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var a=this.innerBounds(),g=this.ui.windowTitle,l=this.ui.resizer,r=a.withHeight(25),v=this.ui.header,y=this.ui.windowControls.bounds().right()+3,A=r.withLeftCenter(Bg.pt(y,r.height/2));l.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());
g.textBounds().width<r.width-2*y?g.center=r.center():g.leftCenter=A.leftCenter();v.width=this.width}},{key:"ensureNotOverTheTop",value:function(){var a=this.world();if(a){var g=this.globalBounds();g.top()<a.innerBounds().top()&&this.moveBy(Bg.pt(0,a.innerBounds().top()-g.top()))}}},{key:"buildHeader",value:function(){return Bg.morph({name:"header",extent:Bg.pt(this.width,50),submorphs:[Bg.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},
{key:"buildButtons",value:function(){var a=this.getSubmorphNamed("close")||Bg.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[Bg.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Bg.connect(a,"onMouseDown",this,"close");var g=this.getSubmorphNamed("minimize")||Bg.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[Bg.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});Bg.connect(g,"onMouseDown",this,"minimized",{updater:function(r){r(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||Bg.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[Bg.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Bg.connect(l,"onMouseDown",this,"openWindowMenu")}return Bg.arr.compact([a,g,l])}},{key:"buildTitleLabel",value:function(){return this.addMorph({padding:Bg.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",reactsToPointer:!1,value:""})}},{key:"resizeBy",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){var g=$jscomp.makeIterator(a);a=g.next().value;g=g.next().value;switch(a){case "right":this.resizeBy(g.withY(0));break;case "bottom right":this.resizeBy(g);break;case "bottom":this.resizeBy(g.withX(0));break;case "left":a=
this.right;this.resizeBy(g.withY(0).negated());this.right=a;break;case "bottom left":a=this.right,this.resizeBy(g.scaleByPt(Bg.pt(-1,1))),this.right=a}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),g=$jscomp.makeIterator(a.submorphs),l=g.next().value,r=g.next().value,v=g.next().value,y=g.next().value;g=g.next().value;l.height=this.height;l.bottomRight=this.extent;r.bottomRight=this.extent;v.height=this.height;v.bottomLeft=Bg.pt(0,this.height);
y.bottomLeft=Bg.pt(0,this.height);g.width=this.width;g.bottomLeft=Bg.pt(0,this.height);a.position=Bg.pt(0,0)}},{key:"buildResizer",value:function(){var a,g,l,r;var v=Bg.Color.transparent;var y=Bg.morph({name:"resizer",fill:Bg.Color.transparent,position:Bg.pt(0,0),submorphs:[a=Bg.morph({name:"right resizer",fill:v,width:5,draggable:!0,nativeCursor:"ew-resize"}),g=Bg.morph({name:"bottom right resizer",fill:v,extent:Bg.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=Bg.morph({name:"right resizer",
fill:v,width:5,draggable:!0,nativeCursor:"ew-resize"}),r=Bg.morph({name:"bottom left resizer",draggable:!0,fill:v,extent:Bg.pt(10,10),nativeCursor:"nesw-resize"}),v=Bg.morph({name:"bottom resizer",draggable:!0,fill:v,height:5,nativeCursor:"ns-resize"})]});Bg.connect(g,"onDrag",this,"resizeAt",{converter:function(A){return["bottom right",A.state.dragDelta]}});Bg.connect(a,"onDrag",this,"resizeAt",{converter:function(A){return["right",A.state.dragDelta]}});Bg.connect(v,"onDrag",this,"resizeAt",{converter:function(A){return["bottom",
A.state.dragDelta]}});Bg.connect(l,"onDrag",this,"resizeAt",{converter:function(A){return["left",A.state.dragDelta]}});Bg.connect(r,"onDrag",this,"resizeAt",{converter:function(A){return["bottom left",A.state.dragDelta]}});this.addMorph(y);this.relayoutResizer();return y}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.minimized=!a.minimized;g.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,g,l,r,v,y,A,E,F,G,I,M,
L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(R){if(1==R.nextAddress){if(!a.targetMorph)return R.return();g=a;l=g.nonMinizedBounds;r=g.minimized;v=g.width;y=a.ui;A=y.windowTitle;E=y.resizer;F=a.bounds();G=a.getSubmorphNamed("minimize");I=Bg.easings.outQuad;if(!r)return a.minimizedBounds=F,a.targetMorph&&(a.targetMorph.visible=!0),l=a.world().bounds().translateForInclusion(l||F),a.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(Bg.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:I}),G.tooltip="collapse window",R.jumpTo(2);a.nonMinizedBounds=F;M=(a.minimizedBounds||F).withExtent(Bg.pt(v,28));L=A.textBounds();S=a.get("window controls").bounds().right()+3;L.width+2*S<M.width&&(M=M.withWidth(L.width+S+5));a.minimizedBounds=M;G.tooltip="uncollapse window";return R.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(Bg.arr.without(a.styleClasses,"neutral"))),bounds:M,duration:100,easing:I}),3)}2!=R.nextAddress&&
a.targetMorph&&(a.targetMorph.visible=!1);E.visible=!a.minimized;a.relayoutWindowControls();R.jumpToEnd()})}},{key:"close",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?v.yield(a.targetMorph.onWindowClose(),3):v.jumpTo(2);2!=v.nextAddress&&(g=v.yieldResult);if(!1===g)return v.return();l=a.world();a.deactivate();a.remove();(r=l.activeWindow()||Bg.arr.last(l.getWindows()))&&
r.activate();Bg.signal(a,"windowClosed",a);v.jumpToEnd()})}},{key:"onMouseDown",value:function(a){this.activate(a)}},{key:"onDragStart",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.targetMorph.reactsToPointer=!1)}},{key:"onDragEnd",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&(this.targetMorph.reactsToPointer=
a.state.origReactsToPointer)}},{key:"onDrag",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var a=this.world(),g=this.targetMorph;a&&g&&(!a.focusedMorph||a.focusedMorph!==g&&!g.isAncestorOf(a.focusedMorph))&&g.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?Bg.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var g=
this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master={auto:"styleguide://System/window/light/active"};this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;Bg.arr.without(l.getWindows(),this).forEach(function(r){return r.deactivate()});this.focus(a);Bg.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return g.relayoutWindowControls()});
return this}},{key:"deactivate",value:function(){this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master={auto:"styleguide://System/window/light/inactive"},this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),
"commands",this).concat([{name:"[window] change title",exec:function(a,g){g=void 0===g?{}:g;var l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return(l=g.title)?v.jumpTo(2):v.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=v.nextAddress&&(l=v.yieldResult);if(r=l)a.title=r;return v.return(!0)})}}])}}],[{key:"className",get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress){l="string"===typeof a?[a,{}]:a;r=[];for(v=0;v<l.length;v+=2)y=l[v],A=l[v+1],y=y.replace(/\n/g,""),E=y.length+0-100,0<E&&(y=y.slice(0,-E)),r.push(y,A||{});g.ui.windowTitle.value=r;return F.yield(g.whenRendered(),2)}g.relayoutWindowControls();F.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return Bg.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var g=[this.get("header"),this.get("resizer")];Bg.arr.withoutAll(this.submorphs,
g).forEach(function(l){return l.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:343,end:15977})}(Bg.Morph);GY=Bg.Window;var HY=Ba("aL",GY);Bg.default=GY;var ff=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");ff.Rectangle=Re;ff.rect=Gl;ff.Color=Tg;ff.pt=th;ff.morph=ab;ff.VerticalLayout=sz;ff.Morph=Ol;ff.StyleSheet=Fv;ff.Text=Ct;ff.GridLayout=tz;ff.Icon=op;ff.HorizontalLayout=Ev;ff.InputLine=uI;ff.PasswordInputLine=wz;ff.arr=ng;ff.obj=Ng;ff.promise=xh;ff.connect=yl;ff.List=tF;ff.FilterableList=hJ;ff.RadioButtonGroup=gJ;ff.RadioButton=
fJ;var dQ=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:d.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ff.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){a.focus();a.answer=ff.promise.deferred();a._isActive=
!0;ff.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&ff.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return g.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",
this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return hc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"resolve",exec:function(g,l){a.resolve(l);return!0}},{name:"reject",exec:function(g,l){a.reject(l);return!0}}])}},{key:"transitionTo",value:function(a,g){g=void 0===g?300:g;var l=this,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){r=ff.morph({fill:l.fill,
borderRadius:l.borderRadius});v=ff.morph({fill:null,origin:ff.pt(5,5)});a.opacity=0;a.fill=ff.Color.transparent;a.openInWorld();l.fill=ff.Color.transparent;$world.addMorph(r,l);r.setBounds(l.bounds());v.openInWorld();v.addMorph(a);a.center=v.origin;v.center=r.center=l.center;v.scale=a.width/l.width;r.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l.animate({scale:l.width/a.width,opacity:0,duration:g}),a.animate({opacity:1,duration:g}),
v.animate({scale:1,duration:g}),A.yield(r.animate({bounds:v.bounds(),duration:g}),2);a.fill=r.fill;$world.addMorph(a);r.remove();l.remove();v.remove();A.jumpToEnd()})});y.jumpToEnd()})}},{key:"addNamed",value:function(a,g){var l=this.getSubmorphNamed(a)||this.addMorph(g.isMorph?g:ff.morph(Object.assign({},g,{name:a})));g.label&&(l.label=g.label);g.isMorph&&(l.name=a);return l}}],[{key:"className",get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:ff.Color.black.withA(.6)},
extent:{defaultValue:ff.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=a}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:442,end:3898})}(ff.Morph);ff.AbstractPrompt=dQ;ff.AbstractPrompt=dQ;ff.AbstractPrompt=dQ;var eQ=Ba("aD",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("InformPrompt")&&"function"===typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return hc(m,b,[{key:"build",value:function(a){var g=this,l=a=void 0===a?{}:a,r=l.label,v=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});v.textString=r;ff.connect(l,"fire",this,"resolve");a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(v.document){var y=g.center;g.width=Math.max(g.width,v.document.width+100);g.align(g.center,y)}g.opacity=
1}))}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:"className",get:function(){return"InformPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3907,end:5141})}(ff.AbstractPrompt));ff.InformPrompt=eQ;ff.InformPrompt=eQ;ff.InformPrompt=eQ;var fQ=Ba("aE",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"build",value:function(a){var g=this,l=this.addNamed("promptTitle",{type:"text"});l.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var r=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[a,r]});ff.connect(a,"fire",this,"resolve");ff.connect(r,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=g.lineWrapping;var v=g.center;g.width=Math.max(g.width,l.document.width+100);g.center=v;g.opacity=1}))}},{key:"resolve",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,!1)}}],[{key:"className",get:function(){return"ConfirmPrompt"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5188,end:6560})}(ff.AbstractPrompt));ff.ConfirmPrompt=fQ;ff.ConfirmPrompt=
fQ;ff.ConfirmPrompt=fQ;var gQ=Ba("aF",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"resolve",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,a||
this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var g=a=void 0===a?{choices:["No choice"]}:a;a=g.label;g=g.choices;var l=this.addNamed("ok button",{type:"button"}),r=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);this.addNamed("choices",{name:"choices",type:ff.RadioButtonGroup,choices:g});this.addNamed("button wrapper",{submorphs:[l,r]});l&&ff.connect(l,"fire",this,"resolve");r&&ff.connect(r,"fire",this,"reject")}},{key:"onKeyDown",
value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var g=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(g)return g.trigger(),a.stop()}return hc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a)}}],[{key:"className",get:function(){return"MultipleChoicePrompt"}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var g;if(g=this.getSubmorphNamed("choices"))g.choices=
a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6649,end:8777})}(ff.AbstractPrompt));ff.MultipleChoicePrompt=gQ;ff.MultipleChoicePrompt=gQ;ff.MultipleChoicePrompt=gQ;var hQ=
Ba("aG",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("TextPrompt")&&"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=this,l=a.label,r=a.input,v=a.historyId;a=a.useLastInput;
var y=this.addNamed("promptTitle",{type:"text"});y.value=l;l=this.addNamed("input",ff.Text.makeInputLine({historyId:v,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=r||"";v&&a&&(r=ff.arr.last(l.inputHistory.items))&&(l.textString=r);this.width=Math.max(this.width,y.textBounds().width+50);r=this.addNamed("ok button",{type:"button",label:"OK"});v=this.addNamed("cancel button",{type:"button",label:"CANCEL"});this.addNamed("button wrapper",{submorphs:[r,v]});ff.connect(r,"fire",this,
"resolve");ff.connect(v,"fire",this,"reject");y.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var A=g.center;g.width=Math.max(350,y.document.width+100);g.opacity=1;g.center=A}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"resolve",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.getSubmorphNamed("input").acceptInput())}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var g=this.getSubmorphNamed("promptTitle"),
l=this.getSubmorphNamed("input");g.fit();this.whenRendered().then(function(){var r=Math.max(l.textBounds().width,g.textBounds().width)+20;a.width=Math.min(a.maxWidth,r);a.opacity=1});this.layout=new ff.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:g.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:"className",get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8786,end:11839})}(ff.AbstractPrompt));ff.TextPrompt=hQ;ff.TextPrompt=hQ;ff.TextPrompt=hQ;var iQ=Ba("aH",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
m=d.hasOwnProperty("EditPrompt")&&"function"===typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var g=a.input,l=a.mode,r=a.textStyle,v=a.evalEnvironment;this.addNamed("promptTitle",{type:"text",textString:a.label});r||(r={});l&&!r.fontFamily&&(r.fontFamily=
"Monaco, monospace");var y=this.addNamed("editor",{type:"text"});y.textString=g||"";Object.assign(y,r);y.changeEditorMode(l).then(function(){v&&y.editorPlugin&&Object.assign(y.editorPlugin.evalEnvironment,v)});a=y.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});ff.connect(a,"fire",this,"resolve");ff.connect(g,"fire",this,
"reject");y.gotoDocumentEnd();y.scrollCursorIntoView()}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=ff.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(l){return l!==g});for(a.items.push(g);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;ff.InputLine.setHistory(this.historyId,a)}return hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,g)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",
win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return hc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"history back",exec:function(g,l){if(a.historyId){g=ff.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=--r;0>r&&(g.index=r=l.length-1);a.get("editor").undoManager.group();
a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(g,l){var r,v,y,A,E,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress){if(!a.historyId)return G.jumpTo(2);r=ff.InputLine.getHistory(a.historyId);return G.yield(a.world().editListPrompt("input history "+a.historyId,r.items,{requester:a}),3)}2!=G.nextAddress&&(v=G.yieldResult,y=v.status,A=v.list,E=$jscomp.makeIterator(v.selections),F=E.next().value,"canceled"!==
y&&(r.items=A,ff.InputLine.setHistory(a.historyId,r),F&&(r.index=r.items.indexOf(F),a.get("editor").textString=F)));return G.return(!0)})}},{name:"history forward",exec:function(g,l){if(a.historyId){g=ff.InputLine.getHistory(a.historyId);l=g.items;var r=g.index;g.index=++r;r>=l.length&&(g.index=r=0);a.get("editor").undoManager.group();a.get("editor").textString=l[r];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:"className",
get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;g.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:ff.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:11848,end:16304})}(ff.AbstractPrompt));ff.EditPrompt=iQ;ff.EditPrompt=iQ;ff.EditPrompt=iQ;var jQ=Ba("aI",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"build",value:function(a){var g=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:ff.PasswordInputLine,name:"input",placeholder:g||""});a=this.addNamed("ok button",{type:"button",label:"OK"});g=this.addNamed("cancel button",{type:"button",label:"CANCEL"});ff.connect(a,"fire",this,"resolve");
ff.connect(g,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[a,g]})}},{key:"resolve",value:function(){hc._get(Object.getPrototypeOf(m.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:"className",get:function(){return"PasswordPrompt"}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16313,end:17551})}(ff.AbstractPrompt));ff.PasswordPrompt=jQ;ff.PasswordPrompt=jQ;ff.PasswordPrompt=jQ;var kQ=Ba("aJ",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
m=d.hasOwnProperty("ListPrompt")&&"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onChange",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?
"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var g=a.label,l=a.filterable,r=a.multiSelect,v=a.historyId,y=a.useLastInput,A=a.fuzzy,E=a.filterFunction,F=a.sortFunction,G=a.actions,I=a.selectedAction,M=a.items,L=a.onSelection;this.extent=a.extent||ff.pt(500,400);this.addNamed("promptTitle",{type:"text"}).textString=g;var S=this.addNamed("prompt list",{type:l?ff.FilterableList:ff.List,
multiSelect:r,historyId:v,useLastInput:y});l?this.get("list").master=!1:this.get("prompt list").master=!1;S.items=M;l&&A&&(S.fuzzy=A);l&&"function"===typeof E&&(S.filterFunction=E);l&&"function"===typeof F&&(S.sortFunction=F);L&&"function"===typeof L&&(this.onSelection=L);l&&G&&(S.actions=G);l&&I&&(S.selectedAction=I);a=this.addNamed("ok button",{type:"button"});g=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,g]});ff.connect(a,"fire",this,"resolve");ff.connect(g,
"fire",this,"reject");l&&(ff.connect(S,"accepted",this,"resolve"),ff.connect(S,"canceled",this,"reject"),S.whenRendered().then(function(){return S.relayout()}))}},{key:"resolve",value:function(a){var g=this.getSubmorphNamed("prompt list");a=a||g instanceof ff.FilterableList?g.acceptInput():{selected:g.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",
value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:"className",get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],
initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var g=this.getSubmorphNamed("prompt list");g&&(g.selectedIndex=a,g.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(a){var g=this,l=this.getSubmorphNamed("prompt list");l&&ff.connect(l,"selection",function(r){return a(r,g)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17649,end:21747})}(ff.AbstractPrompt));ff.ListPrompt=kQ;ff.ListPrompt=kQ;ff.ListPrompt=kQ;var lQ=Ba("aK",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),m=d.hasOwnProperty("EditListPrompt")&&"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"build",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",{type:"button",label:ff.Icon.makeLabel("plus")});var g=this.addNamed("remove item button",{type:"button",label:ff.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(g);
ff.connect(a,"fire",this,"addItemToList");ff.connect(g,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,g,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){g=a.get("prompt list");l=1!=g.selectedItems.length?-1:0===g.selectedIndex?0:g.selectedIndex-1;g.items=ff.arr.withoutAll(g.items,g.selectedItems);0>l?g.selection=null:g.selectedIndex=l;g.focus();r.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return g=a.get("prompt list"),l=g.selection?g.items[g.selectedIndex].string:"",y.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",input:l}),2);r=y.yieldResult;if(!r)return y.return();g=a.get("list");v=g.selection?g.selectedIndex+1:g.items.length;g.addItemAt(r,v);g.focus();g.selectedIndex=v;y.jumpToEnd()})}},{key:"keybindings",get:function(){return hc._get(Object.getPrototypeOf(m.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",
win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var a=this;return hc._get(Object.getPrototypeOf(m.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();
return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:"className",get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",
get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:21756,end:24611})}(ff.ListPrompt));ff.EditListPrompt=lQ;ff.EditListPrompt=lQ;ff.EditListPrompt=lQ;var IY=Object.freeze({__proto__:null,
AbstractPrompt:dQ,InformPrompt:eQ,ConfirmPrompt:fQ,MultipleChoicePrompt:gQ,TextPrompt:hQ,EditPrompt:iQ,PasswordPrompt:jQ,ListPrompt:kQ,EditListPrompt:lQ}),Rd=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");Rd.obj=Ng;Rd.PropertyPath=Ti;Rd.string=Li;Rd.num=sm;Rd.arr=ng;Rd.properties=Uo;Rd.pt=th;Rd.Color=Tg;Rd.Rectangle=Re;Rd.rect=Gl;Rd.signal=xf;Rd.connect=yl;Rd.disconnect=$o;Rd.Morph=Ol;Rd.ShadowObject=ds;Rd.morph=ab;Rd.Text=Ct;Rd.GridLayout=tz;Rd.HorizontalLayout=Ev;Rd.Path=$B;Rd.Ellipse=
ZB;Rd.Label=Dt;Rd.Tooltip=bC;Rd.Icon=op;Rd.kld=Sb;var dea=Rd.kld;Rd.Shapes=dea.Shapes;Rd.Intersection=dea.Intersection;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("LeashEndpoint")&&"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?
20:0}},{key:"onDragStart",value:function(a){var g=a.state;a.state.dragDelta=g.lastDragPosition.subPt(g.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(g){return g.isHaloItem})}},{key:"onDrag",value:function(a){var g=this;if(this.connectedMorph)this.clearConnection();else{var l=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,
this.leash.endPoint,this.leash.startPoint],function(r){return g.canConnectTo(r)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Rd.obj.keys(Rd.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),"MorphContainer"==this.possibleTarget.constructor.className&&(this.highlighter.get("name tag").value=
this.possibleTarget.target.name)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,g=a.isPath,l=a.isPolygon,r=a.vertices,v=a.origin;a=this.connectedMorph.globalBounds();if((g||l)&&"center"!=this.attachedSide){g=r.map(function(A){return Rd.pt(A.x,A.y).addPt(v)});l=Rd.Rectangle.unionPts(g);
var y=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(y));l=Rd.Shapes.line(y.x,y.y,l.x,l.y);g=Rd.Shapes.polyline(Rd.arr.flatten(g.map(function(A){return[A.x,A.y]})));g=Rd.arr.min(Rd.Intersection.intersect(g,l).points,function(A){return Rd.pt(A.x,A.y).dist(y)});return Rd.pt(g.x,g.y).addPt(a.topLeft())}return a[this.attachedSide]()}},{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),
a=this.leash.localize(a),this.hasFixedPosition&&(a=a.subPt($world.scroll)),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Rd.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var g=this.vertex.position,l=g.x;g=g.y;var r=this.leash.borderWidth;a&&a.meta&&a.meta.animation?this.animate({center:Rd.pt(l+r,g+r),duration:a.duration}):this.center=Rd.pt(l+r,g+r)}},{key:"attachTo",value:function(a,
g){this.clearConnection();this.leash.openInWorld(this.leash.position);this.connectedMorph=a;this.attachedSide=g;this.vertex.controlPoints=this.leash.controlPointsFor(g,this);this.update();Rd.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:"className",get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},
set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4584})})(Rd.Ellipse);var mQ=Ba("bS",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("Leash")&&
"function"===typeof d.Leash?d.Leash:d.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){hc._get(Object.getPrototypeOf(m.prototype),
"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var g=this.vertices[a];return new Rd.LeashEndpoint({index:a,leash:this,position:Rd.pt(g.x,
g.y)})}},{key:"controlPointsFor",value:function(a,g){a=Rd.Leash.connectionPoints[a];a=g==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],[{key:"className",get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Rd.pt(0,-1),topLeft:Rd.pt(-1,-1),rightCenter:Rd.pt(1,0),bottomRight:Rd.pt(1,
1),bottomCenter:Rd.pt(0,1),bottomLeft:Rd.pt(-1,1),leftCenter:Rd.pt(-1,0),topRight:Rd.pt(1,-1),center:Rd.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Rd.pt(0,0)},end:{defaultValue:Rd.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Rd.Color.black,
origin:Rd.pt(3.5,3.5),extent:Rd.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Rd.Color.black},fill:{defaultValue:Rd.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Rd.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4593,end:7383})}(Rd.Path));Rd.Leash=mQ;Rd.Leash=mQ;Rd.Leash=mQ;var nQ=Ba("bd",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=Rd.pt(a+7.5,10)}},{key:"onSlide",value:function(a,g){a=Rd.num.roundTo(this.value+g.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:"className",get:function(){return"Slider"}},
{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Rd.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var a=new Rd.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Rd.Path({borderColor:Rd.Color.gray.darker(),borderWidth:2,vertices:[Rd.pt(0,0),Rd.pt(this.width,0)],position:Rd.pt(0,this.height/2)}),a];Rd.connect(this,"extent",this,"update");this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7392,end:8677})}(Rd.Morph));Rd.Slider=nQ;Rd.Slider=nQ;Rd.Slider=nQ;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?d.SliderHandle:d.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"onDragStart",value:function(a){this.valueView=(new Rd.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:"className",get:function(){return"SliderHandle"}},
{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Rd.Color.gray},borderColor:{defaultValue:Rd.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Rd.ShadowObject({blur:5})},extent:{defaultValue:Rd.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8679,end:9535})})(Rd.Ellipse);var oQ=Ba("a$",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"relayout",value:function(){this.scaleToBounds&&
(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var g=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=g.next().value;g.next();"string"==typeof l&&(this.value=parseFloat(l),Rd.signal(this,"scrub",this.scrubbedValue));a.stop()}}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=
(new Rd.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10))}},{key:"getScaleAndOffset",value:function(a){var g=a.position.subPt(this.initPos);a=g.x;g=Rd.num.roundTo(Math.exp(-g.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:g}}},{key:"onDrag",value:function(a){var g=this.getScaleAndOffset(a),l=g.scale;g=this.getCurrentValue(g.offset,l);Rd.signal(this,"scrub",g);g=this.floatingPoint?g.toFixed(3):Rd.obj.safeToString(g);this.unit&&(g+=" "+this.unit);this.replace(this.documentRange,
g,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);this.relayout()}},{key:"getCurrentValue",value:function(a,g){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*g:Math.round(a*g))))}},{key:"onDragEnd",value:function(a){a=this.getScaleAndOffset(a);this.value=this.getCurrentValue(a.offset,a.scale);this.factorLabel.softRemove()}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,
Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):Rd.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:"className",get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},value:{defaultValue:0},fill:{defaultValue:Rd.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9544,end:12254})}(Rd.Text));Rd.ValueScrubber=oQ;Rd.ValueScrubber=oQ;Rd.ValueScrubber=oQ;var jJ=Ba("bh",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
m=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,Rd.signal(this,"toggle",this.checked)}catch(g){var a=this.world();a?a.logError(g):console.error(g)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],
[{key:"className",get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Rd.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Rd.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12263,end:12989})}(Rd.Morph));Rd.CheckBox=jJ;Rd.CheckBox=jJ;Rd.CheckBox=jJ;var pQ=Ba("b0",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("LabeledCheckBox")&&"function"===typeof d.LabeledCheckBox?d.LabeledCheckBox:d.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,
b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:"className",get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Rd.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},
alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new Rd.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new Rd.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],
derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;Rd.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=
[new Rd.CheckBox({name:"checkbox"}),new Rd.Label({nativeCursor:"pointer",name:"label",padding:Rd.Rectangle.inset(5,3)})];Rd.connect(this,"alignCheckBox",this,"extent");Rd.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12998,
end:15531})}(Rd.Morph));Rd.LabeledCheckBox=pQ;Rd.LabeledCheckBox=pQ;Rd.LabeledCheckBox=pQ;var qQ=Ba("bc",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"createLabels",value:function(a,g,l){var r=this;l=void 0===l?{}:
l;return Rd.arr.zip(a,g).map(function(v){v=$jscomp.makeIterator(v);var y=v.next().value,A=v.next().value;v=l[y];v=Rd.morph(Object.assign({name:y+"Label",master:{auto:"styleguide://SystemWidgets/mode label"},type:"label",value:y},v&&{tooltip:v}));Rd.connect(v,"onMouseDown",r,"update",{updater:function(E){E(y,A)},varMapping:{name:y,value:A}});return v})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var g=this,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g.layout.forceLayout(),
l=g.get("typeMarker"),r=g.currentLabel.bounds(),a?v.yield(l.animate({bounds:r,duration:200}),3):(l.setBounds(r),v.jumpTo(2));v.jumpToEnd()})}},{key:"animateFontColor",value:function(a,g,l){var r=a.fontColor;a.animate({customTween:function(v){return a.fontColor=r.interpolate(v,g)},duration:l})}},{key:"update",value:function(a,g,l){l=void 0===l?!1:l;var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){v=r.get(a+"Label");if(v==r.currentLabel)return y.return();r.getSubmorphsByStyleClassName("Label").forEach(function(A){A!=
v&&r.animateFontColor(A,r.fontColor,200)});r.currentLabel=v;!l&&Rd.signal(r,a,g);!l&&Rd.signal(r,"switchLabel",g);r.relayout(!l);return y.yield(r.animateFontColor(v,r.selectionFontColor,200),0)})}}],[{key:"className",get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Rd.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(a){Rd.obj.isArray(a)?this.keys=this.values=a:(this.keys=Rd.obj.keys(a),
this.values=Rd.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Rd.Color.black},selectionFontColor:{defaultValue:Rd.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new Rd.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Rd.arr.interpose(this.keys.map(function(a){return a+
"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Rd.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:15540,end:19173})}(Rd.Morph));Rd.ModeSelector=qQ;Rd.ModeSelector=qQ;Rd.ModeSelector=qQ;var rQ=Ba("b1",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("DropDownSelector")&&"function"===typeof d.DropDownSelector?d.DropDownSelector:
d.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"build",value:function(){this.dropDownLabel=Rd.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,g=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?
[{command:g,target:this}]:[]),$jscomp.arrayFromIterable(Rd.arr.compact(this.commands.map(function(l){return l.name!=g&&{command:l.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return Rd.obj.isArray(this.values)?this.values.map(function(g){return{name:String(g),exec:function(){Rd.signal(a,"update",g);a.selectedValue=g}}}):Rd.properties.forEachOwn(this.values,function(g,l){return{name:g,exec:function(){Rd.signal(a,"update",l);a.selectedValue=l}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?
this.getCurrentValue():Rd.obj.isArray(this.values)?Rd.obj.safeToString(a):Rd.obj.safeToString(Rd.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),g=this.get("currentValue");"undefined"==a?(g.value="Not set",g.fontColor=Rd.Color.gray):(g.value=a,g.fontColor=Rd.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},
{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:"className",get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Rd.Color.black},
fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Rd.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(a){this.setProperty("isSelected",a);this.fontColor=a?Rd.Color.white:Rd.Color.black}},layout:{initialize:function(){this.layout=new Rd.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19182,end:22419})}(Rd.Morph));Rd.DropDownSelector=rQ;Rd.DropDownSelector=rQ;Rd.DropDownSelector=rQ;var sQ=Ba("bg",function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),m=d.hasOwnProperty("SearchField")&&"function"===typeof d.SearchField?d.SearchField:d.SearchField=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(l,r){if("\\"===r&&!l.escaped)return l.escaped=!0,l;" "!==r||l.escaped?(l.spaceSeen=!1,l.current+=r):(!l.spaceSeen&&l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);
var g=a.tokens.map(function(l){return l.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:g}}},{key:"clearInput",value:function(){this.textString="";Rd.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&
(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&Rd.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){hc._get(Object.getPrototypeOf(m.prototype),
"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:"className",get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Rd.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Rd.Color.gray},borderColor:{defaultValue:Rd.Color.gray},
layout:{initialize:function(){this.layout=new Rd.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=
this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,g){return a.lowercasedTokens.every(function(l){return g.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||
(this._fuzzySortFunction=function(g,l){var r=String(Rd.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(l)).toLowerCase(),v=0;g.lowercasedTokens.forEach(function(y){r.startsWith(y)?v-=10:r.includes(y)&&(v-=5)});return Rd.arr.sum(g.lowercasedTokens.map(function(y){return Rd.string.levenshtein(r.toLowerCase(),y)}))+v})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(g,l){var r="string"===typeof a.fuzzy?a.fuzzy:"string";
if(g.lowercasedTokens.every(function(y){return l.string.toLowerCase().includes(y)}))return!0;var v=String(Rd.PropertyPath(r).get(l)).toLowerCase();return 3>=Rd.arr.sum(g.lowercasedTokens.map(function(y){return Rd.string.levenshtein(v,y)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Rd.Icon.makeLabel("times-circle",{padding:Rd.rect(2,4,3,0),
fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Rd.pt(20,22),name:"placeholder icon",fontColor:Rd.Color.gray,nativeCursor:"pointer"})];Rd.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22462,end:29049})}(Rd.Text));
Rd.SearchField=sQ;Rd.SearchField=sQ;Rd.SearchField=sQ;var JY=Object.freeze({__proto__:null,Leash:mQ,Slider:nQ,ValueScrubber:oQ,CheckBox:jJ,LabeledCheckBox:pQ,ModeSelector:qQ,DropDownSelector:rQ,SearchField:sQ}),Ph=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");Ph.promise=xh;Ph.fun=xn;Ph.num=sm;Ph.Icon=op;Ph.stringToEasing=Ij;Ph.easings=Pq;Ph.VerticalLayout=sz;Ph.ShadowObject=ds;Ph.HorizontalLayout=Ev;Ph.morph=ab;Ph.Morph=Ol;Ph.StyleSheet=Fv;Ph.Image=qz;Ph.pt=th;Ph.RadialGradient=
mp;Ph.rect=Gl;Ph.Rectangle=Re;Ph.Color=Tg;Ph.connect=yl;(function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){1==g.nextAddress&&
(a.progress=0);if(!(1>a.progress))return g.jumpTo(0);a.progress+=.1;return g.yield(Ph.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;if(this._lastWidth){var g=this.get("progress path"),l=Ph.stringToEasing(Ph.easings.inOutExpo)(Ph.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),r=this._targetWidth;g.topLeft=Ph.pt(0,0);g.height=this.height;g.width=this._lastWidth>r?r:Ph.num.interpolate(l,this._lastWidth,r);setTimeout(function(){a.world()||a.stopStepping()},1E3)}}}],[{key:"className",
get:function(){return"ProgressBar"}},{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var g=this.get("progress path");this._lastWidth=Math.max(g.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:Ph.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=
[{name:"progress path",fill:Ph.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1929})})(Ph.Morph);var KY=function(b){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),m=d.hasOwnProperty("LoadingIndicator")&&
"function"===typeof d.LoadingIndicator?d.LoadingIndicator:d.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;hc._get(Object.getPrototypeOf(m.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var g=this.ui;a=g.label;var l=g.closeButton;if(g=g.progressBar)g.opacity=0,g.isLayoutable=!1;Ph.connect(this,
"extent",this,"relayout");Ph.connect(a,"extent",this,"relayout");Ph.connect(a,"value",this,"updateLabel");Ph.connect(a,"fontSize",this,"updateLabel");Ph.connect(a,"fontFamily",this,"updateLabel");Ph.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(a){var g=this,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return l=g.ui,(r=l.progressBar)||(r=g.addMorph(new Ph.ProgressBar({name:"progress bar"}))),v=g.center,0==
a?(r.isLayoutable=!1,r.opacity=0):(r.isLayoutable=!0,r.opacity=1),r.progress=a,y.yield(g.whenRendered(),2);g.center=v;y.jumpToEnd()})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",value:function(){Ph.Rectangle.inset(20,12);var a=this.ui,g=a.label,l=a.progressBar,r=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();l.extent=Ph.pt(g.owner.bounds().width,5);r[r.visible?"top":"bottom"]=
g.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:"className",get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,g){var l=Ph.morph(Object.assign({type:Ph.LoadingIndicator},g,{label:a}));if(g&&g.animated)return Ph.promise.delay(g.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner.visible=!0;l.top+=25;l.animate({top:l.top-25,easing:Ph.easings.outExpo});
l.animate({opacity:1,easing:Ph.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner.visible=!0;l.ui.label.fit()});return l}},{key:"forPromise",value:function(a,g,l){var r=this.open(g,l);Ph.promise.finally(Promise.resolve(a),function(){return r.remove()});return r}},{key:"runFn",value:function(a,g,l){var r=this,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return v=r.open(g,l),y.yield(v.whenRendered(),2);case 2:return y.setFinallyBlock(3),
y.yield(a(v),5);case 5:return y.return(y.yieldResult);case 3:y.enterFinallyBlock(),v.remove(),y.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},
progress:{derived:!0,set:function(a){this.animateProgress(Ph.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var g=this.ui.status;a?(g.visible=!0,g.value=a):(g.visible=!1,g.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},
set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:Ph.pt(86.2,70.2)},
{type:"label",name:"ld label",extent:Ph.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:Ph.Icon.textAttribute("times")},{type:Ph.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2085,end:7909})}(Ph.Morph);
KY=Ph.LoadingIndicator;var kJ=Ba("L",KY);Ph.default=KY;var Wk=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Wk,$va);Object.assign(Wk,Yva);Object.assign(Wk,awa);Object.assign(Wk,bwa);Object.assign(Wk,cwa);Object.assign(Wk,dwa);Wk.Window=HY;Wk.prompts=IY;Wk.widgets=JY;Wk.LoadingIndicator=kJ;Wk.addClassMappings=Oa;Wk.List=tF;Wk.DropDownList=iJ;Wk.Button=sF;Wk.CheckBox=jJ;Wk.addClassMappings({list:Wk.List,dropdownlist:Wk.DropDownList,button:Wk.Button,checkbox:Wk.CheckBox,
labeledcheckbox:Wk.widgets.LabeledCheckBox});Wk.Window=HY;Wk.Window=HY;Wk.LoadingIndicator=kJ;Wk.LoadingIndicator=kJ;Wk.prompts=IY;Wk.prompts=IY;Wk.widgets=JY;Wk.widgets=JY;var ar=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");ar.Morph=Ol;ar.MorphicDB=ix;ar.LoadingIndicator=kJ;ar.resource=w;var uF=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),m=d.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof d.WorldLoadingScreen?d.WorldLoadingScreen:
d.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!lively.FreezerRuntime)return v.jumpTo(0);g=a.get("package loading indicator");g.startStepping("updateProgressBar");document.body.style.backgroundColor="black";l=a.getWorldName();(r=a.getFilePath())&&a.get("json target indicator").animate({opacity:1,duration:300});return v.yield(a.transitionToLivelyWorld({worldName:l,filePath:r},g),3)}g.stopStepping();v.jumpToEnd()})}},
{key:"transitionToLivelyWorld",value:function(a,g){var l=a.worldName,r=a.filePath,v=this,y,A,E,F,G,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return y=v.get("package loading indicator"),M.yield(Promise.resolve().then(function(){return eea}),2);case 2:A=M.yieldResult;E=A.bootstrap;if(!(F=l&&"__newWorld__"!=l)){M.jumpTo(3);break}return M.yield(ar.MorphicDB.default.exists("world",l),4);case 4:F=!M.yieldResult.exists;case 3:if(F)return M.return(v.indicateMissingWorld(!0));
if(!(G=r)){M.jumpTo(5);break}return M.yield(ar.resource(document.location.origin).join(r).exists(),6);case 6:G=!M.yieldResult;case 5:if(G)return M.return(v.indicateMissingWorld(!0));I=ar.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});g.opacity=1;return M.yield(E({worldName:l,filePath:r,loadingIndicator:I,progress:y}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":ar.resource(document.location.href).query().name||
!1}},{key:"getFilePath",value:function(){return ar.resource(document.location.href).query().file||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:"className",get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:158,end:2907})}(ar.Morph);ar.WorldLoadingScreen=uF;ar.WorldLoadingScreen=uF;ar.WorldLoadingScreen=uF;var aj=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");aj.Morph=Ol;aj.MorphicDB=ix;aj.World=Qy;aj.easings=Pq;aj.morph=ab;aj.promise=xh;aj.string=Li;aj.date=ju;
aj.Color=Tg;aj.pt=th;aj.LoadingIndicator=kJ;aj.resource=w;var vF=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=
!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){return g.yield(a.initWithCommit(a._commit),0)})}},{key:"initWithCommit",value:function(a){var g=this,l,r,v,y,A,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return l=g.ui,r=l.preview,v=l.timestamp,y=l.title,A=l.description,E=l.previewContainer,g.opacity=.5,E.opacity=0,F.yield(g.whenRendered(),2);if(3!=F.nextAddress)return g._commit=a,r.imageUrl=
a.preview,v.value=[a.author.name,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},aj.date.format(a.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],y.value=aj.string.truncate(a.name,18,"..."),A.value=a.description,F.yield(g.whenRendered(),3);E.opacity=1;g.animate({opacity:1,duration:300});F.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var g=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l=
aj.morph(Object.assign({},g.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[g.ui.spinner.spec()]})).openInWorld(),l.hasFixedPosition=!0,l.globalPosition=g.globalPosition,l.opacity=0,r.yield(l.whenRendered(),2);case 2:return r.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:a,borderRadius:0,duration:500,easing:aj.easings.inOutQuint}),l.respondsToVisibleWindow=!0,r.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:aj.easings.inOutQuint}),
4);case 4:return r.yield(aj.promise.delay(1E3),5);case 5:return r.return(l)}})}},{key:"openWorld",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.yield(a.openAnimated(),2);a.loadWorld();g.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){g=a._commit;l=g._id;r=g.name;if(lively.FreezerRuntime)return v=aj.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,v),A.return();y=aj.LoadingIndicator.open("loading "+r);return A.yield(aj.World.loadFromCommit(l,void 0,{morphicDB:aj.MorphicDB.default}),3)}y.remove();A.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,g,l){var r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(Cb.import("./package loading progress indicator-bf5f2297.js"),3);case 3:if(!(r=
E.yieldResult)){E.jumpTo(4);break}return E.yield(aj.resource("part://partial freezing/package loading progress indicator"),5);case 5:r=E.yieldResult;case 4:return E.yield(r.read(),2);case 2:return v=E.yieldResult,E.yield(Promise.resolve().then(function(){return eea}),6);case 6:return y=E.yieldResult,A=y.bootstrap,E.yield(A({commit:g,loadingIndicator:l,progress:v}),0)}})}},{key:"showVersions",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=
aj.easings.inOutExpo,l=a.ui,r=l.previewContainer,v=a.versionContainer,a.addMorph(v),v.reactsToPointer=v.visible=!0,v.initializeFromStartCommit(a._commit),a.animate({width:515,duration:200,easing:g}),r.animate({opacity:0,duration:200}),y.yield(v.animate({opacity:1,duration:200}),2);r.reactsToPointer=r.visible=!1;y.jumpToEnd()})}},{key:"hideVersions",value:function(){var a=this,g,l,r,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return g=aj.easings.inOutExpo,l=
a.ui,r=l.previewContainer,v=a.versionContainer,r.reactsToPointer=r.visible=!0,a.animate({width:245,duration:200,easing:g}),r.animate({opacity:1,duration:200}),y.yield(v.animate({opacity:0,duration:200}),2);v.reset();v.remove();y.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this.ui.previewContainer,
g=this.deleteWorldPrompt;this.addMorph(g);g.visible=!0;g.animate({top:0,left:0,opacity:1,duration:100});a.animate({opacity:.3,duration:100})}},{key:"confirmDelete",value:function(){}},{key:"cancelDelete",value:function(){var a=this,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return g=a.ui,l=g.previewContainer,r=a.deleteWorldPrompt,l.animate({opacity:1,duration:300}),v.yield(r.animate({opacity:0,duration:300}),2);r.remove();v.jumpToEnd()})}},{key:"onMouseUp",
value:function(a){var g=this.ui,l=g.openButton,r=g.versionButton,v=g.deleteButton,y=g.closeVersionsButton,A=g.cancelDeleteButton;g=g.confirmDeleteButton;switch(a.targetMorph){case l:this.openWorld();break;case r:this.showVersions();break;case v:this.tryToDelete();break;case y:this.hideVersions();break;case g:this.confirmDelete();break;case A:this.cancelDelete()}}}],[{key:"className",get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{deleteWorldPrompt:{set:function(a){a.isMorph||
(a=aj.morph(a));this.setProperty("deleteWorldPrompt",a)}},versionContainer:{set:function(a){a.isMorph||(a=aj.morph(a));this.setProperty("versionContainer",a)}},ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),
versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:279,end:7598})}(aj.Morph);aj.WorldPreview=vF;aj.WorldPreview=vF;aj.WorldPreview=vF;var wF=function(b){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),m=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return hc(m,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var g=a.getSubmorphNamed("a project browser");g&&(g.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return $world.get("user flap")?
l.return():l.yield(Cb.import("./dark-5dde8e0e.js"),3);case 3:if(!(a=l.yieldResult)){l.jumpTo(4);break}return l.yield(aj.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=l.yieldResult;case 4:return l.yield(a.read(),2);case 2:return g=l.yieldResult,g.showMorphControls=!1,g.visible=!1,g.openInWorld(),g.hasFixedPosition=!0,g.get("fast load toggler").refresh(),l.yield(aj.promise.delay(1E3),6);case 6:g.animate({visible:!0}),l.jumpToEnd()}})}},{key:"beforePublish",value:function(){var a=this.getSubmorphNamed("a project browser");
a&&a.remove()}},{key:"onLoad",value:function(){var a=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=aj.Color.black;document.documentElement.style.background=aj.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();(g=document.getElementById("loading screen"))&&g.remove();l.jumpToEnd()})}},
{key:"showWorldList",value:function(){var a=this,g,l,r,v,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:if(g=a.getSubmorphNamed("a poject browser")){E.jumpTo(2);break}l=a;r=l.addMorph;v=l;return E.yield(Cb.import("./project browser-ceb53dc5.js"),4);case 4:if(!(y=E.yieldResult)){E.jumpTo(5);break}return E.yield(aj.resource("part://partial freezing/project browser"),6);case 6:y=E.yieldResult;case 5:return E.yield(y.read(),3);case 3:g=r.call(v,E.yieldResult);
case 2:A=g,A.name="a project browser",a.reset(),A.showCloseButton=!1,A.extent=aj.pt(1110,800).minPt(a.extent.subPt(aj.pt(50,150))),A.animate({opacity:1,duration:300}),A.animate({center:a.innerBounds().center(),duration:500}),A.displayWorlds(),A.hasFixedPosition=!1,E.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:"className",get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,
get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-28"}}},{start:7607,end:10915})}(aj.Morph);aj.WorldLandingPage=wF;aj.WorldLandingPage=wF;aj.WorldLandingPage=wF;var xx=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");
xx.WorldLoadingScreen=uF;xx.WorldLandingPage=wF;xx.WorldPreview=vF;xx.WorldLoadingScreen=uF;xx.WorldLoadingScreen=uF;xx.WorldLandingPage=wF;xx.WorldLandingPage=wF;xx.WorldPreview=vF;xx.WorldPreview=vF;var af=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");af.bootstrap=fM;af.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return af.resource(document.location.origin).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return af.loadViaScript("/lively.user/dist/lively.user-client.js")})};af.installFetchHook=function(b){lively.modules.installHook("fetch",function(d,m){af.loads++;b.status="loading "+af.string.truncateLeft(m.name.replace(window.System.baseURL,""),25,"...");b.progress=af.loads/(800-4*Object.keys(af.extractedModules).length);b.center=$world.innerBounds().center();return d(m)})};af.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(b)}).forEach(function(d){af.extractedModules[window.origin+
"/"+d]=Object.assign({},lively.FreezerRuntime.registry[d].exports)})};af.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(Cb.import("./world-d0943ebf.js"),2);case 2:return b.yield(Cb.import("./editor-plugin-3ec0f555.js").then(function(d){return d.e}),3);case 3:return b.yield(Cb.import("./editor-plugin-ec239461.js"),4);case 4:return b.yield(Cb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Cb.import("./client-command-da2eead4.js"),
6);case 6:return b.yield(Cb.import("./client-resource-d1709d00.js"),7);case 7:return b.yield(Promise.resolve().then(function(){return Sna}),8);case 8:af.extractModules("lively.bindings"),af.extractModules("lively.shell"),af.extractModules("lively.ide"),af.extractModules("lively.components"),b.jumpToEnd()}})};af.bootstrapLivelySystem=function(b,d,m){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,g,l,r,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return A.yield(d.whenRendered(),
2);case 2:if("frozen"!=m["lively.lang"]&&!af.fastLoad){A.jumpTo(3);break}return A.yield(Promise.resolve().then(function(){return l8}),4);case 4:a=A.yieldResult,af.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=m["lively.ast"]&&!af.fastLoad){A.jumpTo(5);break}g=lively;return A.yield(Promise.resolve().then(function(){return x8}),6);case 6:g.ast=A.yieldResult,af.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=m["lively.source-transform"]&&!af.fastLoad){A.jumpTo(7);break}l=lively;return A.yield(Promise.resolve().then(function(){return Pna}),8);case 8:l.sourceTransform=A.yieldResult,af.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=m["lively.classes"]&&!af.fastLoad){A.jumpTo(9);break}return A.yield(Cb.import("./object-classes-21867cb8.js"),10);case 10:return r=lively,A.yield(Promise.resolve().then(function(){return apa}),
11);case 11:r.classes=A.yieldResult,af.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=m["lively.vm"]&&!af.fastLoad){A.jumpTo(12);break}v=lively;return A.yield(Promise.resolve().then(function(){return q9}),13);case 13:v.vm=A.yieldResult,af.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=m["lively.modules"]&&!af.fastLoad){A.jumpTo(14);break}return A.yield(Promise.resolve().then(function(){return tN}),
15);case 15:af.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=m["lively.user"]&&!af.fastLoad){A.jumpTo(16);break}return A.yield(Promise.resolve().then(function(){return Gua}),17);case 17:return A.yield(Cb.import("./user-ui-a91f8c15.js"),18);case 18:af.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=m["lively.storage"]&&!af.fastLoad){A.jumpTo(19);break}return A.yield(Promise.resolve().then(function(){return qua}),
20);case 20:af.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=m["lively.morphic"]&&!af.fastLoad){A.jumpTo(0);break}return A.yield(Promise.resolve().then(function(){return Toa}),22);case 22:return af.extractModules("lively.resources"),A.yield(Cb.import("./client-9aaecd32.js"),23);case 23:return A.yield(Cb.import("./index-792c91c7.js"),24);case 24:return af.extractModules("lively.2lively"),A.yield(Promise.resolve().then(function(){return Vna}),
25);case 25:return af.extractModules("lively.serializer2"),A.yield(af.loadComponents(),26);case 26:return A.yield(Cb.import("./index-48386cb3.js").then(function(E){return E.i}),27);case 27:return af.extractModules("lively.halos"),A.yield(Cb.import("./index-c9990055.js"),28);case 28:return af.extractModules("lively-system-interface"),A.yield(Promise.resolve().then(function(){return Tna}),29);case 29:return af.extractModules("lively.graphics"),y=lively,A.yield(Promise.resolve().then(function(){return Oua}),
30);case 30:y.morphic=A.yieldResult,af.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),A.jumpToEnd()}})}).then(function(){var a,g,l,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(af.resource(document.location.origin).join("package-registry.json").readJson(),2);case 2:return a=v.yieldResult,v.yield(af.loadViaScript("/lively.next-node_modules/babel-standalone/babel.js"),3);case 3:return v.yield(af.loadViaScript("/lively.next-node_modules/systemjs/dist/system.src.js"),
4);case 4:return window.System.config({baseURL:document.location.origin}),v.yield(af.loadViaScript("/lively.modules/systemjs-init.js"),5);case 5:g=lively.modules.getSystem("bootstrapped",{baseURL:document.location.origin});lively.modules.changeSystem(g,!0);g["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(g,a);for(l in af.extractedModules)g.set(l,g.newModule(af.extractedModules[l])),r=lively.modules.module(l),r._recorder=af.extractedModules[l],r._frozenModule=!0;af.installFetchHook(b);
v.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.lang"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.lang",function(g){d.finishPackage({packageName:"lively.lang",loaded:!0});delete g._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){d.animate({opacity:1,easing:af.easings.outExpo,duration:300});if("dynamic"==m["lively.ast"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.ast",
function(g){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.source-transform"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.source-transform",function(g){d.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.classes"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.classes",function(g){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.vm"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.vm",function(g){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=g},b));a.jumpToEnd()})}).then(function(){function a(g){lively.modules=
g;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();af.installFetchHook(b);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];g=System["__lively.modules__packageRegistry"]=g.PackageRegistry.ofSystem(System);Object.assign(g,af.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));g.resetByURL();l=g.allPackages();var r=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){af.adoptObject(y,r)});l=Object.values(System["__lively.modules__loadedModules"]);var v=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(y){return!y.constructor[Symbol.for("lively-module-meta")]}).forEach(function(y){af.adoptObject(y,v)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return"frozen"==m["lively.modules"]||
af.fastLoad?(System._scripting=lively.modules.scripting,g.jumpTo(2)):g.yield(af.importPackageAndDo("lively.modules",a,b),2);d.finishPackage({packageName:"lively.modules",loaded:!0});g.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==m["lively.user"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.user",function(g){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=g},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
m["lively.storage"]&&!af.fastLoad)return a.return(af.importPackageAndDo("lively.storage",function(g){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=g},b));a.jumpToEnd()})})};af.importPackageAndDo=function(b,d,m){var a=b.split("/").slice(-1)[0];m.label="loading "+a;return lively.modules.importPackage(b).then(d||function(){})};af.polyfills=function(){var b=[];"PointerEvent"in window||b.push(af.loadViaScript(document.location.origin+"/lively.next-node_modules/pepjs/dist/pep.js"));
"fetch"in window||b.push(af.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};af.resource=w;af.loadViaScript=da;af.promise=xh;af.string=Li;af.obj=Ng;af.modulePackage=tN;af.easings=Pq;af.adoptObject=yq;af.Color=Tg;lively.modules=af.modulePackage;af.loginDone=!0;af.doBootstrap=!0;af.askBeforeQuit=!0;af.worldLoaded=!1;af.loc=document.location;af.query=af.resource(af.loc.href).query();af.fastLoad=1==af.query.fastLoad;af.bootstrap=fM;af.bootstrap=fM;af.loads=
0;af.extractedModules={};var eea=Object.freeze({__proto__:null,bootstrap:fM});am.users.authServerURL="https://auth.typeshift.io";am.css.fontAwesome="/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";am.css.inconsolata="/lively.morphic/assets/inconsolata/inconsolata.css";var k8=JSON.parse('{"id":"WorldLandingPage_F8DCC249_09C1_4AD5_8F0B_9A2EF76C7A92","snapshot":{"WorldLandingPage_F8DCC249_09C1_4AD5_8F0B_9A2EF76C7A92":{"rev":865683,"props":{"name":{"value":"world landing page"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(65.60078124999927,36.453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1003.0232101304723,594.571136205233)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"Globe_AE53F796_CF69_4080_BD62_440B210FB9D9","rev":785}]},"clipMode":{"value":"hidden"},"styleClasses":{"value":["WorldLandingPage","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"5027979D-C1E7-4323-91C6-10E5EED559EC","rev":0}},"metadata":{"value":{"__ref__":true,"id":"6B2BB5F3-349D-4747-B86A-901E3A92EDB8","rev":0}},"loadingScreen":{"value":{"__ref__":true,"id":"HTMLMorph_573CBB5D_A373_4710_8F09_55E49519BCCB","rev":728}}},"lively.serializer-class-info":{"className":"WorldLandingPage","module":{"package":{"name":"PartialFreezing","version":"0.1.1-27"},"pathInPackage":"landing-page.js"}}},"Globe_AE53F796_CF69_4080_BD62_440B210FB9D9":{"rev":785,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"7CB4B253-07DC-4824-A474-EA1F8961F663","rev":0}]},"name":{"value":"globe"},"reactsToPointer":{"value":false},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-1.2699218750001364,0.14453125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"submorphs":{"value":[{"__ref__":true,"id":"WebGLCanvas_3BBF6CD0_70D9_44A2_88C8_C3686CCAF503","rev":769},{"__ref__":true,"id":"Morph_40CC2A72_0E4D_4013_98F9_6E246402766A","rev":783}]},"styleClasses":{"value":["Globe","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"33E9ED0E-590F-479F-9404-D9E93E69B304","rev":0}},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="}},"lively.serializer-class-info":{"className":"Globe","module":{"package":{"name":"Globe","version":"0.1.1-26"},"pathInPackage":"index.js"}}},"7CB4B253-07DC-4824-A474-EA1F8961F663":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"Globe_AE53F796_CF69_4080_BD62_440B210FB9D9","rev":785}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"Globe_AE53F796_CF69_4080_BD62_440B210FB9D9","rev":785}},"targetMethodName":{"value":"onExtentChanged"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"WebGLCanvas_3BBF6CD0_70D9_44A2_88C8_C3686CCAF503":{"rev":769,"props":{"attributeConnections":{"value":[{"__ref__":true,"id":"0D7557AE-95E6-4705-8313-1A68553C0FA9","rev":0}]},"name":{"value":"webgl canvas"},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"styleClasses":{"value":["WebGLCanvas","Canvas","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"right":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"bottom":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1],"left":[0.9058823529411765,0.2980392156862745,0.23529411764705882,1]}},"metadata":{"value":{"__ref__":true,"id":"06334CC5-0AE7-4DB2-A2A2-73BCFEF5650A","rev":0}},"contextType":{"value":"webgl"},"canvasExtent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508,971)"},"_serializedContents":{"value":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABeQAAAPLCAYAAAA+EomxAAAgAElEQVR4XuzYMQ0AAAgEMfBvGhXcVAx80jDdjiNAgAABAgQIECBAgAABAgQIECBAgAABAgTeBfZ9wQABAgQIECBAgAABAgQIECBAgAABAgQIECAwgrwnIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBG+p6dkAACAASURBVAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwf8D/nSQAAIABJREFUIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIECAAAECBAgQIECAAAECgYAgHyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwfIECAAAECBAgQIHDt2DEJAAAAwzD/ruuiVxQMwq4SIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBBYNmpRAAAMNUlEQVQgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAgyA/IJggQIECAAAECBAgQIECAAAECBAgQIECAgCDvAwQIECBAgAABAgQIECBAgAABAgQIECBAYBAQ5AdkEwQIECBAgAABAgQIECBAgAABAgQIECBAQJD3AQIECBAgQIAAAQIECBAgQIAAAQIECBAgMAgI8gOyCQIECBAgQIAAAQIECBAgQIAAAQIECBAgIMj7AAECBAgQIECAAAECBAgQIECAAAECBAgQGAQE+QHZBAECBAgQIECAAAECBAgQIECAAAECBAgQEOR9gAABAgQIECBAgAABAgQIECBAgAABAgQIDAKC/IBsggABAgQIECBAgAABAgQIECBAgAABAgQICPI+QIAAAQIECBAgQIAAAQIECBAgQIAAAQIEBgFBfkA2QYAAAQIECBAgQIAAAQIECBAgQIAAAQIEBHkfIECAAAECBAgQIECAAAECBAgQIECAAAECg4AgPyCbIECAAAECBAgQIECAAAECBAgQIECAAAECgrwPECBAgAABAgQIECBAgAABAgQIECBAgACBQUCQH5BNECBAgAABAgQIECBAgAABAgQIECBAgAABQd4HCBAgQIAAAQIECBAgQIAAAQIECBAgQIDAICDID8gmCBAgQIAAAQIECBAgQIAAAQIECBAgQICAIO8DBAgQIECAAAECBAgQIECAAAECBAgQIEBgEBDkB2QTBAgQIECAAAECBAgQIECAAAECBAgQIEBAkPcBAgQIECBAgAABAgQIECBAgAABAgQIECAwCAjyA7IJAgQIECBAgAABAgQIECBAgAABAgQIECAgyPsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAYBAT5AdkEAQIECBAgQIAAAQIECBAgQIAAAQIECBAQ5H2AAAECBAgQIECAAAECBAgQIECAAAECBAgMAoL8gGyCAAECBAgQIECAAAECBAgQIECAAAECBAgI8j5AgAABAgQIECBAgAABAgQIECBAgAABAgQGAUF+QDZBgAABAgQIECBAgAABAgQIECBAgAABAgQEeR8gQIAAAQIECBAgQIAAAQIECBAgQIAAAQKDgCA/IJsgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKCvA8QIECAAAECBAgQIECAAAECBAgQIECAAIFBQJAfkE0QIECAAAECBAgQIECAAAECBAgQIECAAAFB3gcIECBAgAABAgQIECBAgAABAgQIECBAgMAgIMgPyCYIECBAgAABAgQIECBAgAABAgQIECBAgIAg7wMECBAgQIAAAQIECBAgQIAAAQIECBAgQGAQEOQHZBMECBAgQIAAAQIECBAgQIAAAQIECBAgQECQ9wECBAgQIECAAAECBAgQIECAAAECBAgQIDAICPIDsgkCBAgQIECAAAECBAgQIECAAAECBAgQICDI+wABAgQIECBAgAABAgQIECBAgAABAgQIEBgEBPkB2QQBAgQIECBAgAABAgQIECBAgAABAgQIEBDkfYAAAQIECBAgQIAAAQIECBAgQIAAAQIECAwCgvyAbIIAAQIECBAgQIAAAQIECBAgQIAAAQIECAjyPkCAAAECBAgQIECAAAECBAgQIECAAAECBAYBQX5ANkGAAAECBAgQIECAAAECBAgQIECAAAECBAR5HyBAgAABAgQIECBAgAABAgQIECBAgAABAoOAID8gmyBAgAABAgQIECBAgAABAgQIECBAgAABAoK8DxAgQIAAAQIECBAgQIAAAQIECBAgQIAAgUFAkB+QTRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAUHeBwgQIECAAAECBAgQIECAAAECBAgQIECAwCAQQrgDzJoZi3wAAAAASUVORK5CYII="},"fps":{"value":15}},"lively.serializer-class-info":{"className":"WebGLCanvas","module":{"package":{"name":"WebGLCanvas","version":"0.1.1-53"},"pathInPackage":"index.js"}}},"0D7557AE-95E6-4705-8313-1A68553C0FA9":{"rev":0,"props":{"_rev":{"value":0},"doNotSerialize":{"value":["isActive","converter","updater"]},"sourceObj":{"value":{"__ref__":true,"id":"WebGLCanvas_3BBF6CD0_70D9_44A2_88C8_C3686CCAF503","rev":769}},"sourceAttrName":{"value":"extent"},"targetObj":{"value":{"__ref__":true,"id":"WebGLCanvas_3BBF6CD0_70D9_44A2_88C8_C3686CCAF503","rev":769}},"targetMethodName":{"value":"relayout"},"garbageCollect":{"value":true},"signalOnAssignment":{"value":true}},"lively.serializer-class-info":{"className":"AttributeConnection","module":{"package":{"name":"lively.bindings","version":"0.1.2"},"pathInPackage":"index.js"}}},"06334CC5-0AE7-4DB2-A2A2-73BCFEF5650A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"5543f15ce9adfccb56c979db92d7b0d38398d6a8\\"})"}}},"Morph_40CC2A72_0E4D_4013_98F9_6E246402766A":{"rev":783,"props":{"name":{"value":"cover"},"draggable":{"value":true},"grabbable":{"value":true},"reactsToPointer":{"value":false},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1508.8984375,971.6171875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,0,0)"},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0BE5A9F0-4F81-42CD-A8DA-66E3BA091C62","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"0BE5A9F0-4F81-42CD-A8DA-66E3BA091C62":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"44c59c7e6812baaed95b7a3660abcb246296e490\\"})"}}},"33E9ED0E-590F-479F-9404-D9E93E69B304":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"globe\\", _id: \\"f71e0d7aa02c9c874eba979fe444380bf583f9f2\\"})"}}},"5027979D-C1E7-4323-91C6-10E5EED559EC":{"rev":0,"props":{"_rev":{"value":0},"Nunito":{"value":"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap"}}},"6B2BB5F3-349D-4747-B86A-901E3A92EDB8":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"world landing page\\", _id: \\"32298ca0ee3f234f9baca22b5b5759595d486064\\"})"},"publishedAlias":{"value":"dashboard"},"excludedPackages":{"value":["kld-intersections"]},"publishedLocation":{"value":"/lively.freezer/dashboard/"}}},"HTMLMorph_573CBB5D_A373_4710_8F09_55E49519BCCB":{"rev":728,"props":{"name":{"value":"loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(0,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(485.34375,274.29296875)"},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"47A4D2C1-63B7-4DFD-A571-36FD3A6927F2","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: black\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"47A4D2C1-63B7-4DFD-A571-36FD3A6927F2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packages":{"local://lively-object-modules/":{"Globe":{"package.json":"{\\n  \\"name\\": \\"Globe\\",\\n  \\"version\\": \\"0.1.1-26\\",\\n  \\"lively\\": {\\n    \\"isObjectPackage\\": true\\n  },\\n  \\"dependencies\\": {},\\n  \\"devDependencies\\": {},\\n  \\"main\\": \\"index.js\\"\\n}","index.js":"import { Canvas } from \\"lively.components/canvas.js\\";\\nimport { promise } from \\"lively.lang/index.js\\";\\nimport { easings } from \\"lively.morphic/index.js\\";\\n\\nexport default class Globe extends Canvas {\\n\\n  async fullyLoaded() {\\n    let canvas = this.get(\'webgl canvas\');\\n    return await promise.waitFor(5000, () => canvas.firstFrameRendered);\\n  }\\n  \\n  async onLoad() {\\n    if (navigator.webdriver || !lively.FreezerRuntime) return;\\n    await this.whenRendered();\\n    let canvas = this.get(\'webgl canvas\');\\n    canvas.renderGlobe();\\n    await this.fullyLoaded();\\n    await promise.delay(500);\\n    this.get(\'cover\').animate({\\n      opacity: 0,\\n      easing: easings.inOutCubic\\n    });\\n    canvas.relayout();\\n  }\\n\\n  beforePublish() {\\n    this.get(\'cover\').opacity = 1;\\n  }\\n\\n  onExtentChanged() {\\n    super.onExtentChanged();\\n    this.get(\'webgl canvas\').extent = this.extent;\\n    this.get(\'cover\').extent = this.extent;\\n  }\\n}\\n\\n"},"WebGLCanvas":{"package.json":"{\\n  \\"name\\": \\"WebGLCanvas\\",\\n  \\"version\\": \\"0.1.1-53\\",\\n  \\"lively\\": {\\n    \\"isObjectPackage\\": true\\n  },\\n  \\"dependencies\\": {},\\n  \\"devDependencies\\": {},\\n  \\"main\\": \\"index.js\\"\\n}","index.js":"import { Canvas } from \\"lively.components/canvas.js\\";\\nimport THREE from \\"https://dev.jspm.io/three\\";\\nconst { Scene, SpotLight, MeshBasicMaterial, BackSide, ImageUtils, Color, MeshPhongMaterial, SphereGeometry, Mesh, DirectionalLight, AmbientLight, WebGLRenderer, PerspectiveCamera, TextureLoader, BoxGeometry, MeshNormalMaterial } = THREE;\\nimport { easings } from \\"lively.morphic/index.js\\";\\n\\nexport default class WebGLCanvas extends Canvas {\\n\\n  static get properties() {\\n    return {\\n      fps: {},\\n    }\\n  }\\n  \\n  get context() { \\n    if (navigator.webdriver) {\\n      return this._canvas && this._canvas.getContext(\'2d\');\\n    }\\n    return this._canvas && this._canvas.getContext(this.contextType, {\\n      preserveDrawingBuffer: true\\n    }); \\n  }\\n\\n  restoreContent(old_canvas, new_canvas) {\\n    let {contextType, preserveContents} = this;\\n    if (this.renderer && old_canvas && old_canvas !== new_canvas) {\\n      this.owner.context.drawImage(this.renderer.getContext().canvas, 0, 0)\\n      this.renderer = new WebGLRenderer({ context: this.context, antialiasing: true });\\n      this.renderer.setSize(this.width, this.height);\\n    }\\n  }\\n\\n  onExtentChanged() {}\\n\\n  relayout() {\\n    if (this.renderLoop) {\\n      setTimeout(() => this.owner.context.drawImage(this.renderer.getContext().canvas, 0, 0));\\n      this.renderer.setSize(this.width, this.height);\\n      this.camera.aspect = this.width / this.height;\\n      this.camera.updateProjectionMatrix();\\n    }\\n  }\\n\\n  stopAnimation() {\\n    if (this.renderLoop)  {\\n      cancelAnimationFrame(this.renderLoop);\\n      this.renderer.dispose();\\n    }\\n  }\\n\\n  //this.renderGlobe()\\n\\n  renderGlobe() {\\n    this.stopAnimation();\\n    this.withContextDo(webglEl => {\\n    \\tvar width  = this.width,\\n    \\t\\t height = this.height,\\n         textureDir = \'https://cdn.typeshift.io/assets/globe-textures/\';\\n    \\n    \\t// Earth params\\n    \\tvar radius   = 0.5,\\n    \\t\\t   segments = 32,\\n    \\t\\t   rotation = 5.2;  \\n\\n    \\tvar scene = new Scene();\\n    \\n    \\tvar camera = new PerspectiveCamera(45, width / height, 0.01, 1000);\\n    \\tcamera.position.z = 1;\\n      camera.position.x = .4;\\n      camera.position.y = .25;\\n      this.camera = camera;\\n    \\n    \\tscene.add(new AmbientLight(0x333333));\\n    \\n    \\tvar light = new SpotLight(0xffffff, 1, 200, Math.PI/2, 1);\\n    \\tlight.position.set(1,1,0);\\n      light.castShadow = true;\\n      light.shadow.mapSize.width = 1024;  // default 512\\n      light.shadow.mapSize.height = 1024; // default 512\\n      light.shadow.camera.near = 10;       // default 0.5\\n      light.shadow.camera.far = 100;\\n      light.shadow.bias = 0.01\\n    \\tscene.add(light);\\n    \\n      var sphere = createSphere(radius, segments);\\n    \\tsphere.rotation.y = rotation; \\n    \\tscene.add(sphere)\\n     \\n      var clouds = createClouds(radius, segments);\\n    \\tclouds.rotation.y = rotation;\\n    \\tscene.add(clouds)\\n     \\n    \\tvar stars = createStars(90, 64);\\n    \\tscene.add(stars);\\n\\n      this.renderer = new WebGLRenderer({ context: webglEl, antialias: true});\\n    \\tthis.renderer.setSize(width, height);\\n    \\tconst render = () => {\\n        if (!document.body.contains(this.renderer.getContext().canvas)) {\\n          if (this.removeScheduled) return;\\n          this.removeScheduled = setTimeout(() => {\\n            if (document.body.contains(this.renderer.getContext().canvas)) return;\\n            this.stopAnimation();\\n          }, 5000);\\n        }\\n    \\t\\tsphere.rotation.y += 0.0005;\\n    \\t\\tclouds.rotation.y += 0.0005;\\t\\t\\n    \\t\\tthis.renderer.render(scene, camera);\\n    \\t};\\n      \\n      this.limitLoop(render);\\n\\n      // this.animate({\\n      //   height: this.height,\\n      //   easing: easings.outQuint,\\n      //   customTween: (p) => {\\n      //     this.camera.position.z = 1 - (1 - p) * .9\\n      //     this.camera.position.x = .4 + (1 - p) * 0.2\\n      //     this.camera.position.y = .25 + (1 - p) * 0.2\\n      //   },\\n      //   duration: 15000\\n      // });\\n\\n      this.camera.position.z = 1;\\n      this.camera.position.x = .4;\\n      this.camera.position.y = .25;\\n    \\n    \\tfunction createSphere(radius, segments) {\\n        let loader = new TextureLoader();\\n    \\t\\treturn new Mesh(\\n    \\t\\t\\tnew SphereGeometry(radius, segments, segments),\\n    \\t\\t\\tnew MeshPhongMaterial({\\n    \\t\\t\\t\\tmap:         loader.load(textureDir + \'2_no_clouds_4k.jpg\'),\\n    \\t\\t\\t\\tbumpMap:     loader.load(textureDir + \'elev_bump_4k.jpg\'),\\n    \\t\\t\\t\\tbumpScale:   0.005,\\n        shininess: 5,\\n    \\t\\t\\t\\tspecularMap: loader.load(textureDir + \'water_4k.png\'),\\n    \\t\\t\\t\\tspecular:    new Color(\'grey\')\\t\\t\\t\\t\\t\\t\\t\\t\\n    \\t\\t\\t})\\n    \\t\\t);\\n    \\t}\\n    \\n    \\tfunction createClouds(radius, segments) {\\n        let loader = new TextureLoader();\\n    \\t\\treturn new Mesh(\\n    \\t\\t\\tnew SphereGeometry(radius + 0.003, segments, segments),\\t\\t\\t\\n    \\t\\t\\tnew MeshPhongMaterial({\\n    \\t\\t\\t\\tmap:         loader.load(textureDir + \'fair_clouds_4k.png\'),\\n    \\t\\t\\t\\ttransparent: true\\n    \\t\\t\\t})\\n    \\t\\t);\\t\\t\\n    \\t}\\n    \\n    \\tfunction createStars(radius, segments) {\\n        let loader = new TextureLoader();\\n    \\t\\treturn new Mesh(\\n    \\t\\t\\tnew SphereGeometry(radius, segments, segments), \\n    \\t\\t\\tnew MeshBasicMaterial({\\n    \\t\\t\\t\\tmap:  loader.load(textureDir + \'/galaxy_starfield.png\'), \\n    \\t\\t\\t\\tside: BackSide\\n    \\t\\t\\t})\\n    \\t\\t);\\n    \\t}\\n    });\\n  }\\n\\n  limitLoop(fn, fps) {\\n \\n    // Use var then = Date.now(); if you\\n    // don\'t care about targetting < IE9\\n    var then = new Date().getTime(), globe = this;\\n\\n    // custom fps, otherwise fallback to 60\\n    var loop;\\n \\n    return (loop = (time) => {\\n\\n        globe.renderLoop = requestAnimationFrame(loop);\\n \\n        // again, Date.now() if it\'s available\\n        var now = new Date().getTime();\\n        var delta = now - then;\\n        let interval = (1000 / (fps || this.fps));\\n \\n        if (delta > interval) {\\n            // Update time\\n            // now - (delta % interval) is an improvement over just \\n            // using then = now, which can end up lowering overall fps\\n            then = now - (delta % interval);\\n \\n            // call the fn\\n            fn();\\n            globe.firstFrameRendered = true;\\n        }\\n    })(0);\\n};\\n}\\n\\n"},"PartialFreezing":{"package.json":"{\\n  \\"name\\": \\"PartialFreezing\\",\\n  \\"version\\": \\"0.1.1-28\\",\\n  \\"lively\\": {\\n    \\"isObjectPackage\\": true\\n  },\\n  \\"dependencies\\": {},\\n  \\"devDependencies\\": {},\\n  \\"main\\": \\"index.js\\"\\n}","index.js":"import { WorldLoadingScreen } from \\"./loading-page.js\\";\\nimport { WorldLandingPage, WorldPreview } from \\"./landing-page.js\\";\\n\\nexport {\\n  WorldLoadingScreen,\\n  WorldLandingPage,\\n  WorldPreview,\\n}","bootstrap.js":"/*global System*/\\nimport { resource, loadViaScript } from \'lively.resources\';\\nimport { promise, string, obj } from \'lively.lang\';\\nimport * as modulePackage from \'lively.modules\';\\nimport { easings } from \\"lively.morphic\\";\\nimport { adoptObject } from \\"lively.classes/runtime.js\\";\\nimport { Color } from \\"lively.graphics\\";\\n\\nlively.modules = modulePackage; // temporary modules package used for bootstrapping\\n\\nvar loginDone = true, doBootstrap = true, askBeforeQuit = true, worldLoaded = false;\\n\\nconst loc = document.location,\\n      query = resource(loc.href).query(),\\n      fastLoad = query.fastLoad == true;\\n\\nexport async function bootstrap({filePath, worldName, commit, loadingIndicator: li, progress, logError= (err) => console.log(err)}) {\\n  try {\\n    let loadConfig = JSON.parse(localStorage.getItem(\'lively.load-config\') || `{\\"lively.lang\\":\\"dynamic\\",\\"lively.ast\\":\\"dynamic\\",\\"lively.source-transform\\":\\"dynamic\\",\\"lively.classes\\":\\"dynamic\\",\\"lively.vm\\":\\"dynamic\\",\\"lively.modules\\":\\"dynamic\\",\\"lively.user\\":\\"dynamic\\",\\"lively.storage\\":\\"dynamic\\",\\"lively.morphic\\":\\"dynamic\\"}`);\\n    progress.opacity = 0;\\n    progress.hasFixedPosition = true;\\n    progress.openInWorld();\\n    progress.bottomCenter = li.topCenter;\\n    await polyfills();\\n    let loads = 0;\\n    let oldEnv = $world.env;\\n    doBootstrap ? await bootstrapLivelySystem(li, progress, loadConfig) : await fastPrepLivelySystem(li);\\n    li.label = \\"Loading lively.2lively...\\";\\n    await lively.modules.registerPackage(\'lively.2lively\');\\n    if (askBeforeQuit) {\\n      window.addEventListener(\'beforeunload\', function(evt) {\\n        var msg = \\"Really?\\";\\n        evt.returnValue = msg;\\n        return msg;\\n      }, true);\\n    }\\n\\n    let morphic;\\n    if (loadConfig[\'lively.morphic\'] == \'dynamic\' && !fastLoad) {\\n      li.label = \\"Loading lively.morphic...\\";\\n      morphic = await lively.modules.importPackage(\'lively.morphic\');\\n      progress.finishPackage({packageName: \'lively.morphic\', loaded: true })\\n    } else {\\n      morphic = lively.morphic;\\n    }\\n    \\n    li.label = \\"Loading world...\\";\\n    window.onresize = null;\\n    window.loadCompiledFrozenPart = lively.modules.module(\\"lively.morphic/partsbin.js\\")._recorder.loadPart\\n    lively.FreezerRuntime = false;\\n    const landingPageUrl = document.location;\\n    try {\\n      const opts = {\\n        verbose: true,\\n        localconfig: true,\\n        l2l: true,\\n        shell: true,\\n      };\\n      if (commit) {\\n        await morphic.World.loadFromCommit(commit, undefined, {\\n          ...opts,\\n          browserURL: \\"/worlds/load?name=\\" + commit.name\\n        });\\n      } else if (worldName) {\\n\\n        if (worldName == \'__newWorld__\') {\\n          let LivelyWorld, loadWorld; \\n          if (Object.values(loadConfig).every(v => v == \'frozen\') || fastLoad) {\\n            ({ LivelyWorld } = await lively.modules.module(\'lively.ide/world.js\').recorder);\\n            ({ loadWorld } = await lively.modules.module(\'lively.morphic/world-loading.js\').recorder);\\n          } else {\\n            ({ LivelyWorld } = await lively.modules.System.import(\'lively.ide/world.js\'));\\n            ({ loadWorld } = await lively.modules.System.import(\'lively.morphic/world-loading.js\'));\\n          }\\n          await loadWorld(new LivelyWorld({ openNewProjectPrompt: true }));\\n        } else {\\n          await morphic.World.loadFromDB(worldName, undefined, undefined, {\\n            ...opts,\\n            browserURL: \\"/worlds/load?name=\\" + worldName.replace(/\\\\.json($|\\\\?)/, \\"\\")\\n          }); \\n        }\\n      } else if (filePath) {\\n        await morphic.World.loadFromResource(\\n          resource(System.baseURL).join(filePath), \\n          undefined, {\\n            ...opts,\\n            browserURL: \\"/worlds/load?file=\\" + filePath\\n          }\\n        );\\n      }\\n      \\n    } catch(err) {\\n      window.__loadError__ = err;\\n    }\\n    window.addEventListener(\'popstate\', (event) => {\\n      if (document.location == landingPageUrl)\\n         document.location.reload();\\n    });\\n    li.remove();\\n    worldLoaded = true;\\n    lively.modules.removeHook(\'fetch\', \'logFetch\');\\n    await oldEnv.renderer.worldMorph.whenRendered();\\n    if (loadConfig[\'lively.morphic\'] == \'dynamic\' && !fastLoad) {\\n      oldEnv.renderer.clear();\\n      oldEnv.fontMetric.uninstall();\\n      oldEnv.eventDispatcher.uninstall(); \\n    }\\n  } catch(err) {\\n    if (err.originalErr) err = err.originalErr;  // do not hide vital information!\\n    var printed = err.message;\\n    if (err.stack !== err.message) {\\n      printed += err.stack.includes(err.message) ? err.stack.replace(err.message, \\"\\\\n\\") : err.stack;\\n    }\\n    logError(printed);\\n    throw err;\\n  }\\n}\\n\\nfunction fastPrepLivelySystem(li) {\\n  return Promise.resolve()\\n    .then(function() { li.status = \\"starting fast system preparation...\\"; })\\n    .then(function() { return resource(document.location.origin).join(\\"package-registry.json\\").readJson(); })\\n    .then(function (packageCached) {\\n      System[\\"__lively.modules__packageRegistry\\"] = lively.modules.PackageRegistry.fromJSON(System, packageCached);\\n      return System;\\n    })\\n    .then(function() { return loadViaScript(\\"/lively.user/dist/lively.user-client.js\\"); });\\n}\\n\\nlet loads = 0;\\nfunction installFetchHook(li) {\\n  lively.modules.installHook(\'fetch\', function logFetch(proceed, load) {\\n    loads++;\\n    li.status = `loading ${string.truncateLeft(load.name.replace(window.System.baseURL, \'\'), 25, \'...\')}`;\\n    li.progress = loads / (800 - 4 * Object.keys(extractedModules).length);\\n    li.center = $world.innerBounds().center();\\n    return proceed(load);\\n  });\\n}\\n\\nconst extractedModules = {};\\n\\nfunction extractModules(packageName) {\\n  Object.keys(lively.FreezerRuntime.registry)\\n        .filter(k => k.startsWith(packageName))\\n        .forEach(id => {\\n          extractedModules[window.origin + \\"/\\" + id] = {\\n              ...lively.FreezerRuntime.registry[id].exports\\n            };\\n        });\\n}\\n\\nasync function loadComponents() {\\n  await System.import(\\"lively.ide/world.js\\");\\n  await System.import(\\"lively.ide/editor-plugin.js\\");\\n  await System.import(\\"lively.ide/js/editor-plugin.js\\");\\n  await System.import(\\"lively.shell/index.js\\");\\n  await System.import(\\"lively.shell/client-command.js\\");\\n  await System.import(\\"lively.shell/client-resource.js\\");\\n  await System.import(\\"lively.bindings\\");\\n  extractModules(\\"lively.bindings\\");\\n  extractModules(\\"lively.shell\\");\\n  extractModules(\\"lively.ide\\");\\n  extractModules(\\"lively.components\\");\\n}\\n\\nfunction bootstrapLivelySystem(li, progress, loadConfig) {\\n  // for loading an instrumented version of the packages comprising the lively.system\\n  return Promise.resolve()\\n    .then(function() { li.status = \\"starting bootstrap process...\\"; })\\n    .then(async function() {\\n       // fixme: still expensive fetching of index.js files when registering each package on deserialization\\n       // fixme: freeze halos, components and lively.ide stuff to further speed up performance\\n    \\n       await progress.whenRendered();\\n       // before resetting systemjs, load all frozen modules\\n       if (loadConfig[\\"lively.lang\\"] == \'frozen\' || fastLoad) {\\n          let m = await System.import(\'lively.lang\');\\n          extractModules(\\"lively.lang\\");\\n          progress.finishPackage({packageName: \'lively.lang\', frozen: true });\\n          delete m._prevLivelyGlobal;\\n       }\\n       if (loadConfig[\'lively.ast\'] == \'frozen\' || fastLoad) {\\n         lively.ast = await System.import(\'lively.ast\'); \\n         extractModules(\\"lively.ast\\");\\n         progress.finishPackage({packageName: \'lively.ast\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.source-transform\'] == \'frozen\' || fastLoad) {\\n         lively.sourceTransform = await System.import(\'lively.source-transform\');\\n         extractModules(\\"lively.source-transform\\");\\n         progress.finishPackage({packageName: \'lively.source-transform\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.classes\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.classes/object-classes.js\'); \\n         lively.classes = await System.import(\'lively.classes\'); \\n         extractModules(\\"lively.class\\");\\n         progress.finishPackage({packageName: \'lively.classes\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.vm\'] == \'frozen\' || fastLoad) {\\n         lively.vm = await System.import(\'lively.vm\');\\n         extractModules(\\"lively.vm\\");\\n         progress.finishPackage({packageName: \'lively.vm\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.modules\'] == \'frozen\' || fastLoad) {\\n         // lively.modules is already fully imported due to the bootstrap, so no need to do that here\\n         await System.import(\\"lively.modules\\");\\n         extractModules(\\"lively.modules\\");\\n         progress.finishPackage({packageName: \'lively.modules\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.user\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.user\');\\n         await System.import(\'lively.user/morphic/user-ui.js\');\\n         extractModules(\\"lively.user\\");\\n         progress.finishPackage({packageName: \'lively.user\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.storage\'] == \'frozen\' || fastLoad) {\\n         await System.import(\'lively.storage\'); \\n         extractModules(\\"lively.storage\\");\\n         progress.finishPackage({packageName: \'lively.storage\', frozen: true });\\n       }\\n       if (loadConfig[\'lively.morphic\'] == \'frozen\' || fastLoad) {\\n         await System.import(\\"lively.resources\\");\\n         extractModules(\\"lively.resources\\");\\n         await System.import(\\"lively.2lively/client.js\\");\\n         await System.import(\\"lively.2lively/index.js\\");\\n         extractModules(\\"lively.2lively\\");\\n         await System.import(\\"lively.serializer2\\");\\n         extractModules(\\"lively.serializer2\\");\\n         await loadComponents();\\n         await System.import(\\"lively.halos\\");\\n         extractModules(\\"lively.halos\\");\\n         await System.import(\\"lively-system-interface\\");\\n         extractModules(\\"lively-system-interface\\");\\n         await System.import(\\"lively.graphics/index.js\\");\\n         extractModules(\\"lively.graphics\\");\\n         lively.morphic = await System.import(\\"lively.morphic/index.js\\");\\n         extractModules(\\"lively.morphic\\");\\n         progress.finishPackage({packageName: \'lively.morphic\', frozen: true });\\n       }\\n    })\\n    .then(async function () {\\n      let packageCached = await resource(document.location.origin).join(\\"package-registry.json\\").readJson();\\n      await loadViaScript(\'/lively.next-node_modules/babel-standalone/babel.js\');\\n      await loadViaScript(\'/lively.next-node_modules/systemjs/dist/system.src.js\');\\n      window.System.config({baseURL: document.location.origin});\\n      await loadViaScript(\'/lively.modules/systemjs-init.js\');\\n      var System = lively.modules.getSystem(\\"bootstrapped\\", {baseURL: document.location.origin});\\n      // System.debug = true;\\n      lively.modules.changeSystem(System, true);\\n      System[\\"__lively.modules__packageRegistry\\"] = lively.modules.PackageRegistry.fromJSON(System, packageCached);\\n      for (let mod in extractedModules) {\\n        System.set(mod, System.newModule(extractedModules[mod]));\\n        let m = lively.modules.module(mod);\\n        m._recorder = extractedModules[mod];\\n        m._frozenModule = true;\\n      }\\n      installFetchHook(li);\\n    })\\n    .then(async function() {\\n      if (loadConfig[\'lively.lang\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.lang\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.lang\', loaded: true });\\n            delete m._prevLivelyGlobal;\\n          },\\n          li\\n        );\\n      }\\n     }).then(async function() {\\n      progress.animate({ opacity: 1, easing: easings.outExpo, duration: 300 });\\n      if (loadConfig[\'lively.ast\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.ast\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.ast\', loaded: true });\\n            lively.ast = m;\\n          },\\n        li);\\n      }\\n    }).then(async function() {\\n      if (loadConfig[\'lively.source-transform\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.source-transform\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.source-transform\', loaded: true });\\n            lively.sourceTransform = m;\\n          }, li);\\n       }\\n     }).then(async function() {\\n      if (loadConfig[\'lively.classes\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.classes\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.classes\', loaded: true });\\n            lively.classes = m;\\n          }, li);\\n      }\\n    }).then(async function() {\\n      if (loadConfig[\'lively.vm\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n          \\"lively.vm\\",\\n          function(m) {\\n            progress.finishPackage({packageName: \'lively.vm\', loaded: true })\\n            lively.vm = m;\\n          }, li); \\n      }\\n    }).then(async function() {\\n      function afterImport(m) {\\n        lively.modules = m;\\n        lively.modules.unwrapModuleLoad();\\n        lively.modules.unwrapModuleResolution();\\n        lively.modules.wrapModuleLoad();\\n        lively.modules.wrapModuleResolution();\\n        installFetchHook(li);\\n        let oldRegistry = System[\\"__lively.modules__packageRegistry\\"];\\n        delete System[\\"__lively.modules__packageRegistry\\"];\\n        let newRegistry = System[\\"__lively.modules__packageRegistry\\"] = m.PackageRegistry.ofSystem(System);\\n        Object.assign(newRegistry, obj.select(oldRegistry, [\\"packageMap\\", \\"individualPackageDirs\\", \\"devPackageDirs\\", \\"packageBaseDirs\\"]))\\n        newRegistry.resetByURL();\\n\\n        // All Module and Package objects that were instantiated\\n        // during bootstrapping still have the non instrumented\\n        // prototypes.\\n        // Since re-importing all of these affected packages with the\\n        // now fully instrumented module system would be too time consuming\\n        // it is faster to just walk through all module and package objects\\n        // and adopt each to use the instrumented version of the module and package class.\\n        \\n        // Note, that although the module and packacke classes themselves require the adjustemnt\\n        // the objects and classes of the packages *themselves* do not need that update. They\\n        // already went through the instrumentation, since that has also happened in the\\n        // static version of lively.modules that these came from.\\n        const loadedPackages = newRegistry.allPackages();\\n        const instrumentedPackageClass = lively.modules.module(\\"lively.modules/src/packages/package.js\\").recorder.Package\\n        loadedPackages\\n          .filter(pkg => !pkg.constructor[Symbol.for(\\"lively-module-meta\\")])\\n          .forEach(pkg => {\\n          adoptObject(pkg, instrumentedPackageClass);\\n        });\\n\\n        const loadedModules = Object.values(System[\\"__lively.modules__loadedModules\\"]);\\n        const instrumentedModuleInterface = lively.modules.module(\\"lively.modules/src/module.js\\").recorder.ModuleInterface;\\n        loadedModules\\n          .filter(mod => !mod.constructor[Symbol.for(\\"lively-module-meta\\")])\\n          .forEach(mod => {\\n          adoptObject(mod, instrumentedModuleInterface);\\n        });\\n      }\\n      if (loadConfig[\'lively.modules\'] == \'frozen\' || fastLoad) {\\n        System._scripting = lively.modules.scripting;\\n      } else {\\n        await importPackageAndDo(\\"lively.modules\\", afterImport, li);\\n      }\\n      progress.finishPackage({packageName: \'lively.modules\', loaded: true });  \\n    })\\n    .then(async function() {\\n       if (loadConfig[\'lively.user\'] == \'dynamic\' && !fastLoad) {\\n         return importPackageAndDo(\\n           \\"lively.user\\",\\n           function(m) {\\n             progress.finishPackage({packageName: \'lively.user\', loaded: true })\\n             lively.user = m;\\n           },\\n         li);\\n       } \\n     }).then(async function() {\\n      if (loadConfig[\'lively.storage\'] == \'dynamic\' && !fastLoad) {\\n        return importPackageAndDo(\\n            \\"lively.storage\\",\\n            function(m) {\\n              progress.finishPackage({packageName: \'lively.storage\', loaded: true })\\n              lively.storage = m;\\n            }, \\n        li);\\n      }\\n    })\\n}\\n\\nfunction importPackageAndDo(packageURL, doFunc, li) {\\n  var name = packageURL.split(\\"/\\").slice(-1)[0];\\n  li.label = `loading ${name}`;\\n  return lively.modules.importPackage(packageURL)\\n    .then(doFunc || function() {});\\n}\\n\\nfunction polyfills() {\\n  var loads = [];\\n  if (!(\\"PointerEvent\\" in window))\\n    loads.push(loadViaScript(`${document.location.origin}/lively.next-node_modules/pepjs/dist/pep.js`));\\n  if (!(\\"fetch\\" in window))\\n    loads.push(loadViaScript(`//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js`));\\n  return Promise.all(loads);\\n}","landing-page.js":"import { Morph, MorphicDB, World, easings, morph } from \\"lively.morphic\\";\\nimport { promise, string, date } from \\"lively.lang\\";\\nimport { Color, pt } from \\"lively.graphics\\";\\nimport { LoadingIndicator } from \\"lively.components\\";\\nimport { resource } from \\"lively.resources\\";\\n\\nexport class WorldPreview extends Morph {\\n\\n  static get properties() {\\n    return {\\n      deleteWorldPrompt: {\\n        set(spec) {\\n          if (!spec.isMorph) spec = morph(spec);\\n          this.setProperty(\'deleteWorldPrompt\', spec)\\n        }\\n      },\\n      versionContainer: {\\n        set(spec) {\\n          if (!spec.isMorph) spec = morph(spec);\\n          this.setProperty(\'versionContainer\', spec)\\n        }\\n      },\\n      ui: {\\n        readOnly: true,\\n        get() {\\n          return {\\n            previewContainer: this.getSubmorphNamed(\'preview container\'),\\n            versionContainer: this.getSubmorphNamed(\'version container\'),\\n            preview: this.getSubmorphNamed(\'preview\'),\\n            timestamp: this.getSubmorphNamed(\'timestamp\'),\\n            title: this.getSubmorphNamed(\'title\'),\\n            description: this.getSubmorphNamed(\'description\'),\\n            openButton: this.getSubmorphNamed(\'open button\'),\\n            versionButton: this.getSubmorphNamed(\'version button\'),\\n            spinner: this.getSubmorphNamed(\'spinner\'),\\n            deleteButton: this.getSubmorphNamed(\'delete button\'),\\n            closeVersionsButton: this.getSubmorphNamed(\'close versions button\'),\\n            versionList: this.getSubmorphNamed(\'version list\'),\\n            deleteWorldPrompt: this.getSubmorphNamed(\'delete world prompt\'),\\n            cancelDeleteButton: this.getSubmorphNamed(\'cancel delete button\'),\\n            confirmDeleteButton: this.getSubmorphNamed(\'confirm delete button\')\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n  \\n  relayout() {\\n     // fit to world\\n    this.setBounds(this.world().visibleBounds());\\n  }\\n\\n  onLoad() {\\n    this.ui.spinner.visible = false; // this causes the fan to spin\\n  }\\n\\n  async displayPreview() {\\n    await this.initWithCommit(this._commit);\\n  }\\n  \\n  async initWithCommit(commit) {\\n    let { preview, timestamp, title, description,\\n          previewContainer } = this.ui;\\n    this.opacity = .5;\\n    previewContainer.opacity = 0;\\n    await this.whenRendered();\\n    this._commit = commit;\\n    preview.imageUrl = commit.preview;\\n    timestamp.value = [commit.author.name, {fontSize: 13, fontWeight: \'bold\', paddingTop: \'1px\'}, date.format(commit.timestamp, \' - d.m.yy HH:MM\'), {\\n      fontWeight: \'bold\', fontSize: 12, paddingTop: \'2px\'\\n    }];\\n    title.value = string.truncate(commit.name, 18, \'...\')\\n    description.value = commit.description;\\n    await this.whenRendered();\\n    previewContainer.opacity = 1;\\n    this.animate({ opacity: 1, duration: 300 });\\n  }\\n\\n  async openAnimated(targetBounds = $world.visibleBounds()) {\\n    let copy = morph({\\n       ...this.spec(), \\n       reactsToPointer: false,\\n       renderOnGPU: true,\\n       submorphs: [this.ui.spinner.spec()]\\n    }).openInWorld();\\n    copy.hasFixedPosition = true;\\n    copy.globalPosition = this.globalPosition;\\n    copy.opacity = 0;\\n    await copy.whenRendered();\\n    await copy.animate({ opacity: 1, duration: 300 });\\n    let duration = 500;\\n    copy.dropShadow = false;\\n    copy.animate({\\n      bounds: targetBounds,\\n      borderRadius: 0,\\n      duration,\\n      easing: easings.inOutQuint\\n    });\\n    copy.respondsToVisibleWindow = true;\\n    await copy.ui.spinner.animate({\\n      center: copy.innerBounds().center(),\\n      duration,\\n      easing: easings.inOutQuint\\n    });\\n    await promise.delay(1000);\\n    return copy;\\n  }\\n\\n  async openWorld() {\\n    await this.openAnimated();\\n    this.loadWorld();\\n  }\\n\\n  async loadWorld() {\\n    let { _id, name } = this._commit;\\n    let dbQuery = \'\'; // fixme\\n    if (lively.FreezerRuntime) {\\n      // open the world via url redirect\\n      // rms: instead of redirect load within world\\n      //window.location = `/worlds/${name}${dbQuery}`;\\n      let li = LoadingIndicator.open(\'...starting bootstrap process...\', {\\n        animated: true, delay: 1000,\\n      });\\n      this.transitionToLivelyWorld(\\n        document.location.origin,\\n        this._commit,\\n        li\\n      );\\n      return;\\n    } else {\\n      let li = LoadingIndicator.open(\'loading \' + name);\\n      await World.loadFromCommit(_id, undefined, {morphicDB: MorphicDB.default});\\n      li.remove();\\n    }\\n  }\\n  \\n  async transitionToLivelyWorld(baseURL, commit, loadingIndicator) {\\n    let progress = await resource(\'part://partial freezing/package loading progress indicator\').read();\\n    let { bootstrap } = await System.import(\'local://lively-object-modules/PartialFreezing/bootstrap.js\');\\n    await bootstrap({ commit, loadingIndicator, progress });\\n  }\\n\\n  async showVersions() {\\n    let duration = 200, easing = easings.inOutExpo;\\n    let { previewContainer } = this.ui;\\n    let versionContainer = this.versionContainer;\\n    this.addMorph(versionContainer);\\n    versionContainer.reactsToPointer = versionContainer.visible = true;\\n    versionContainer.initializeFromStartCommit(this._commit);\\n    this.animate({\\n      width: 515, duration, easing\\n    });\\n    previewContainer.animate({\\n      opacity: 0, duration\\n    });\\n    await versionContainer.animate({\\n      opacity: 1, duration\\n    });\\n    previewContainer.reactsToPointer = previewContainer.visible = false;\\n  }\\n\\n  async hideVersions() {\\n    let duration = 200, easing = easings.inOutExpo;\\n    let { previewContainer } = this.ui;\\n    let versionContainer = this.versionContainer;\\n    previewContainer.reactsToPointer = previewContainer.visible = true;\\n    this.animate({\\n      width: 245, duration, easing\\n    });\\n    previewContainer.animate({\\n      opacity: 1, duration\\n    });\\n    await versionContainer.animate({\\n      opacity: 0, duration\\n    });\\n    versionContainer.reset();\\n    versionContainer.remove();\\n  }\\n\\n  toggleDeleteButton(active) {\\n    this.ui.deleteButton.visible = active;\\n  }\\n\\n  onHoverIn(evt) {\\n    this.toggleDeleteButton(true);\\n  }\\n\\n  onHoverOut(evt) {\\n    this.toggleDeleteButton(false);\\n  }\\n\\n  tryToDelete() {\\n    let duration = 100;\\n    let { previewContainer } = this.ui;\\n    let deleteWorldPrompt = this.deleteWorldPrompt;\\n    this.addMorph(deleteWorldPrompt);\\n    deleteWorldPrompt.visible = true;\\n    deleteWorldPrompt.animate({\\n      top: 0, left: 0,\\n      opacity: 1, duration\\n    });\\n    previewContainer.animate({\\n      opacity: .3, duration\\n    })\\n  }\\n\\n  confirmDelete() {\\n    \\n  }\\n\\n  async cancelDelete() {\\n    let duration = 300;\\n    let { previewContainer } = this.ui;\\n    let deleteWorldPrompt = this.deleteWorldPrompt;\\n    previewContainer.animate({\\n      opacity: 1, duration\\n    })\\n    await deleteWorldPrompt.animate({\\n      opacity: 0, duration\\n    });\\n    deleteWorldPrompt.remove();\\n  }\\n\\n  onMouseUp(evt) {\\n    let { openButton, versionButton, deleteButton, \\n          closeVersionsButton, cancelDeleteButton,\\n          confirmDeleteButton } = this.ui;\\n    // we want to initialize this from the spec, so we dont use connections\\n    switch (evt.targetMorph) {\\n      case openButton:\\n        this.openWorld();\\n        break;\\n      case versionButton:\\n        this.showVersions();        \\n        break;\\n      case deleteButton:\\n        this.tryToDelete();\\n        break;\\n      case closeVersionsButton:\\n        this.hideVersions();\\n        break;\\n      case confirmDeleteButton:\\n        this.confirmDelete();\\n        break;\\n      case cancelDeleteButton:\\n        this.cancelDelete();\\n        break;\\n    }\\n  }\\n  \\n}\\n\\nexport class WorldLandingPage extends Morph {\\n\\n  static get properties() {\\n    return {\\n      title: {\\n        derived: true,\\n        get() {\\n          return `lively.next (${document.location.hostname})`;\\n        }\\n      },\\n      loadingScreen: {}\\n    }\\n  }\\n\\n  get __loading_html__() {\\n    return `\\n      <style>\\n        ${this.loadingScreen.cssDeclaration}\\n      </style>\\n      ${this.loadingScreen.html}\\n    `;\\n  }\\n\\n  get __head_html__() {\\n    return `\\n<link type=\\"text/css\\" rel=\\"stylesheet\\" id=\\"lively-font-awesome\\" href=\\"/lively.morphic/assets/font-awesome/css/font-awesome.css\\">\\n<link type=\\"text/css\\" rel=\\"stylesheet\\" id=\\"lively-font-inconsolata\\" href=\\"/lively.morphic/assets/inconsolata/inconsolata.css\\">\\n<style type=\\"text/css\\" id=\\"WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito\\">@import url(\\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap\\");</style>`;\\n  }\\n\\n  get commands() {\\n    return [\\n       {\\n         name: \'resize on client\',\\n         exec: () => {\\n           $world._cachedWindowBounds = null;\\n           document.body.style.overflowY = \'hidden\';\\n           this.setBounds($world.windowBounds());\\n           this.getSubmorphNamed(\'globe\').extent = this.extent;\\n           this.ensureUserFlap();\\n           let worldList = this.getSubmorphNamed(\'a project browser\');\\n           if (worldList) worldList.center = this.extent.scaleBy(.5);\\n         }\\n       }\\n    ]\\n  }\\n\\n  async ensureUserFlap() {\\n    if ($world.get(\'user flap\')) return;\\n    let flap = await resource(\'part://SystemIDE/user flap master/dark\').read();\\n    flap.showMorphControls = false;\\n    flap.visible = false;\\n    flap.openInWorld();\\n    flap.hasFixedPosition = true;\\n    flap.get(\'fast load toggler\').refresh()\\n    await promise.delay(1000);\\n    flap.animate({ visible: true });\\n  }\\n\\n  beforePublish() {\\n    let worldList = this.getSubmorphNamed(\'a project browser\');\\n    if (worldList) worldList.remove();\\n  }\\n\\n  async onLoad() {\\n    await this.whenRendered();\\n    if (!lively.FreezerRuntime) return;\\n    $world.fill = Color.black;\\n    document.documentElement.style.background = Color.black;\\n    this.showWorldList().then(() => document.getElementById(\'loading-screen\').remove())\\n    this.getSubmorphNamed(\'globe\').fullyLoaded();\\n    let ld = document.getElementById(\'loading screen\');\\n    if (ld) ld.remove();\\n  }\\n  \\n  async showWorldList() {\\n    let dashboard = this.getSubmorphNamed(\'a poject browser\') || this.addMorph(await resource(\'part://partial freezing/project browser\').read());\\n    dashboard.name = \'a project browser\';\\n    this.reset();\\n    dashboard.showCloseButton = false;\\n    dashboard.extent = pt(1110,800).minPt(this.extent.subPt(pt(50,150)));\\n    dashboard.animate({\\n      opacity: 1, duration: 300\\n    });\\n    dashboard.animate({\\n      center: this.innerBounds().center(), duration: 500\\n    })\\n    dashboard.displayWorlds();\\n    dashboard.hasFixedPosition = false;\\n  }\\n\\n  reset() {\\n    let dashboard = this.getSubmorphNamed(\'a project browser\');\\n    dashboard.opacity = 0;\\n    //dashboard.scale = 1.2;\\n    dashboard.center = this.innerBounds().center();\\n  }\\n}","loading-page.js":"import { Morph, MorphicDB } from \\"lively.morphic\\";\\nimport { LoadingIndicator } from \\"lively.components\\";\\nimport { resource } from \\"lively.resources\\";\\n\\nexport class WorldLoadingScreen extends Morph {\\n\\n  static get properties() {\\n    return {\\n      title: {\\n        derived: true,\\n        get() {\\n          return `lively.next (${document.location.hostname})`;\\n        }\\n      },\\n    }\\n  }\\n\\n  get commands() {\\n    return [\\n       {\\n         name: \'resize on client\',\\n         exec: () => {\\n           $world._cachedWindowBounds = null;\\n           this.setBounds($world.windowBounds());\\n           this.get(\'json target indicator\').topRight = this.innerBounds().insetBy(25).topRight();\\n         }\\n       }\\n    ]\\n  }\\n\\n  get __head_html__() {\\n    return `<style type=\\"text/css\\">@import url(\\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap\\");</style>`;\\n  }\\n  \\n  async onLoad() {\\n    if (lively.FreezerRuntime) {\\n      const progressBar = this.get(\'package loading indicator\');\\n      progressBar.startStepping(\'updateProgressBar\');\\n      document.body.style.backgroundColor = \'black\';\\n      const worldName = this.getWorldName();\\n      const filePath = this.getFilePath();\\n      if (filePath) {\\n        this.get(\'json target indicator\').animate({\\n          opacity: 1, duration: 300\\n        });\\n      }\\n      await this.transitionToLivelyWorld({ worldName, filePath }, progressBar);\\n      progressBar.stopStepping();\\n    }\\n  }\\n\\n  async transitionToLivelyWorld({ worldName, filePath }, progressBar) {\\n    let progress = this.get(\'package loading indicator\');\\n    let { bootstrap } = await System.import(\'local://lively-object-modules/PartialFreezing/bootstrap.js\');\\n\\n    if (worldName && worldName != \\"__newWorld__\\" && !(await MorphicDB.default.exists(\'world\', worldName)).exists)\\n      return this.indicateMissingWorld(true);\\n\\n    if (filePath && !await resource(document.location.origin).join(filePath).exists())\\n      return this.indicateMissingWorld(true);\\n\\n    const loadingIndicator = LoadingIndicator.open(\'...starting bootstrap process...\', {\\n      animated: true, delay: 1000,\\n    });\\n    progressBar.opacity = 1;\\n    \\n    await bootstrap({worldName, filePath, loadingIndicator, progress});\\n  }\\n\\n  getWorldName() {\\n    if (document.location.href.endsWith(\'worlds/new\')) return \'__newWorld__\';\\n    var loc = document.location,\\n        query = resource(loc.href).query(),\\n        worldNameMatch = query.name,\\n        worldName = worldNameMatch || false;\\n     return worldName;\\n  }\\n\\n  getFilePath() {\\n    var loc = document.location,\\n        query = resource(loc.href).query();\\n     return query.file || false;\\n  }\\n\\n  // this.indicateMissingWorld(false)\\n\\n  indicateMissingWorld(active) {\\n    this.get(\'package loading indicator\').visible = !active;\\n    this.get(\'broken heart\').visible = this.get(\'broken heart\').isLayoutable = active;\\n  }\\n}"}}},"packageDepMap":{"local://lively-object-modules/Globe":[],"local://lively-object-modules/WebGLCanvas":[],"local://lively-object-modules/PartialFreezing":[]},"preview":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAABcklEQVR4Xu3c0QkAIRDFQO2/40NQrouBjRXExPfrXh3KwKZoglkFwR5BQQqCGcBwWkhBMAMYTgspCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCwCAfxjQa51/IHW0Au3xBCoIZwHBaSEEwAxhOCykIZgDDaSEFwQxgOC2kIJgBDKeFFAQzgOG0kIJgBjCcFlIQzACG00IKghnAcFpIQTADGE4LKQhmAMNpIQXBDGA4LaQgmAEMp4UUBDOA4bSQgmAGMJwWUhDMAIbTQgqCGcBwWkhBMAMYTgspCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCCoIZwHBaSEEwAxhOCykIZgDDaSEFwQxgOC0EDHIwptE4fcaP5S9IQTADGE4LKQhmAMNpIQXBDGA4LaQgmAEMp4UUBDOA4bSQgmAGMJwWUhDMAIbTQgqCGcBwWkhBMAMYTgvBgjyBRTwho1gETQAAAABJRU5ErkJggg=="}');
lively.resources={resource:w,loadViaScript:da};lively.morphic={loadMorphFromSnapshot:Pu}}}});