System.register(["./__root_module__-aa47e4cd.js","./index-f9b193f7.js","./color-picker-698f55da.js"],function(){var Ca,ub,Tb,lc,mc,Zd,id,ce,kd,$c,Cd,Fd,pe,Xd,nd,eb,Hb,Cc,qc,ld,wd,Xc,gd,bc,ad,ed,Id,hc;return{setters:[function(Qb){Ca=Qb.ar;ub=Qb.s;Tb=Qb.a5;lc=Qb.aU;mc=Qb.a4;Zd=Qb.a7;id=Qb.a8;ce=Qb.az;kd=Qb.ai;$c=Qb.al;Cd=Qb.ag;Fd=Qb.am;pe=Qb.a1;Xd=Qb.$;nd=Qb.C;eb=Qb.ao;Hb=Qb.as;Cc=Qb.bV;qc=Qb.br;ld=Qb.aa;wd=Qb.aq;Xc=Qb.bg;gd=Qb.bq;bc=Qb.bo;ad=Qb.bW},function(Qb){ed=Qb.N;Id=Qb.I},function(Qb){hc=
Qb.a}],execute:function(){var Qb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Qb.fun=Ca;Qb.string=ub;Qb.obj=Tb;Qb.properties=lc;Qb.arr=mc;Qb.Text=Zd;Qb.config=id;Qb.HorizontalLayout=ce;Qb.VerticalLayout=kd;Qb.morph=$c;Qb.Morph=Cd;Qb.Icon=Fd;Qb.pt=pe;Qb.Rectangle=Xd;Qb.Color=nd;Qb.connect=eb;Qb.once=Hb;Qb.noUpdate=Cc;Qb.ColorPicker=hc;Qb.DropDownList=qc;Qb.loadObjectFromPartsbinFolder=ld;Qb.cachedControls=new WeakMap;var xb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
jc=vc.hasOwnProperty("RichTextControl")&&"function"===typeof vc.RichTextControl?vc.RichTextControl:vc.RichTextControl=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(jc,Rb,[{key:"toggleButton",value:function(qb,rb){var cc=this.ui.fontSelection;rb?(qb.fontColor=Qb.Color.white,qb.fill=this.toggleColor):(qb.fontColor=cc.fontColor,qb.fill=cc.fill)}},{key:"reset",value:function(){var qb=this.ui.fontSelection;qb.items=
Qb.RichTextControl.basicFontItems();qb.selection=qb.items[0].value;Qb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(qb){qb=void 0===qb?!!this.world():qb;var rb=this.target,cc=rb.world()||$world,Vc=this.globalBounds();rb=(rb.selection.isEmpty()?rb.globalBounds():rb.getGlobalTransform().transformRectToRect(rb.selectionBounds().translatedBy(rb.scroll.negated()))).bottomCenter().subPt(Vc.topCenter());cc=cc.visibleBounds().translateForInclusion(Vc.translatedBy(rb)).topLeft().subPt(Vc.topLeft());
cc=this.position.addPt(cc);qb?this.animate({duration:300,position:cc}):this.position=cc}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(qb,rb){rb=void 0===rb?!0:rb;var cc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vc){if(1==Vc.nextAddress)return cc.target=qb,cc.update(),Vc.yield(cc.whenRendered(),2);cc.ui.fontSizeField.relayout();rb&&cc.alignAtTarget();Vc.jumpToEnd()})}},{key:"update",value:function(){var qb=
this,rb=this.target,cc=this.updateSpec,Vc=rb.selection;Vc=Vc?Vc.isEmpty()?rb.textAttributeAt(Vc.start):rb.getStyleInRange(Vc):{};var Bc=this.managedProps,xc=Qb.obj.select(rb,Bc);rb=$jscomp.makeIterator(Object.entries(Qb.obj.select(Vc||{},Bc)));for(Vc=rb.next();!Vc.done;Vc=rb.next())Bc=$jscomp.makeIterator(Vc.value),Vc=Bc.next().value,Bc=Bc.next().value,"undefined"!==typeof Bc&&(xc[Vc]=Bc);Qb.noUpdate(function(){for(var kc=$jscomp.makeIterator(Object.entries(qb.ui)),Q=kc.next();!Q.done;Q=kc.next()){var ea=
$jscomp.makeIterator(Q.value);Q=ea.next().value;ea=ea.next().value;if(cc[Q])cc[Q](xc,ea)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(qb,rb){var cc=this.target,Vc=cc.selection;cc.isLabel||Vc.isEmpty()?cc[qb]="function"===typeof rb?rb(cc[qb]):rb:(cc.undoManager.group(),cc.changeStyleProperty(qb,function(Bc){return"function"===typeof rb?rb(Bc):rb}),cc.undoManager.group())}},{key:"changeFont",value:function(qb){var rb=this,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vc){if(1==
Vc.nextAddress)return rb._last=qb,(cc="custom..."===qb)?Vc.yield($world.prompt("Enter font family name",{requester:rb.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Vc.jumpTo(2);if(2!=Vc.nextAddress&&(qb=Vc.yieldResult,!qb))return Vc.return();rb.changeAttributeInSelectionOrMorph("fontFamily",qb);Vc.jumpToEnd()})}},{key:"setPadding",value:function(qb){this.target.padding=Qb.Rectangle.inset(qb)}},{key:"setPaddingTop",value:function(qb){var rb=this.target.padding;this.target.padding=
Qb.Rectangle.inset(rb.left(),qb,rb.right(),rb.bottom())}},{key:"setPaddingLeft",value:function(qb){var rb=this.target.padding;this.target.padding=Qb.Rectangle.inset(qb,rb.top(),rb.right(),rb.bottom())}},{key:"setPaddingRight",value:function(qb){var rb=this.target.padding;this.target.padding=Qb.Rectangle.inset(rb.left(),rb.top(),qb,rb.bottom())}},{key:"setPaddingBottom",value:function(qb){var rb=this.target.padding;this.target.padding=Qb.Rectangle.inset(rb.left(),rb.top(),rb.right(),qb)}},{key:"setLineWrapping",
value:function(qb){this.target.lineWrapping=qb}},{key:"changeFontWeight",value:function(qb){this.changeAttributeInSelectionOrMorph("fontWeight",qb)}},{key:"changeTextAlign",value:function(qb){this.changeAttributeInSelectionOrMorph("textAlign",qb)}},{key:"changeFontColor",value:function(qb){this.changeAttributeInSelectionOrMorph("fontColor",qb)}},{key:"changeFontSize",value:function(qb){this.changeAttributeInSelectionOrMorph("fontSize",qb)}},{key:"changeFixedWidth",value:function(qb){this.target.fixedWidth=
qb}},{key:"changeFixedHeight",value:function(qb){this.target.fixedHeight=qb}},{key:"changeLink",value:function(){var qb=this,rb,cc,Vc,Bc,xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kc){if(1==kc.nextAddress)return rb=qb.target,cc=rb.selection,Vc=rb.getStyleInRange(cc),Bc=Vc.link,kc.yield(qb.world().prompt("Set link",{input:Bc||"https://"}),2);xc=kc.yieldResult;rb.undoManager.group();rb.setStyleInRange({link:xc||void 0},cc);rb.undoManager.group();qb.autoRemove&&qb.remove();kc.jumpToEnd()})}},
{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(qb){return"underline"===qb?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(qb){return"italic"===qb?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(qb){return"bold"===qb||"700"===qb?"normal":"bold"})}},{key:"copyStyle",value:function(){var qb=this,rb=this.target,
cc=this.ui.applyStyleButton;rb=rb.selection.isEmpty()?rb.defaultTextStyle:rb.getStyleInRange(rb.selection);var Vc=JSON.stringify(rb,null,2);this.constructor.copiedStyle=rb;cc.tooltip="paste style\n"+Vc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Vc},{type:"application/morphic-text-style",styleString:Vc}]).then(function(){return qb.setStatusMessage("Copied style\n"+Vc)}).catch(function(Bc){return qb.showError(Bc)})}},{key:"pasteStyle",value:function(){var qb=this,rb=this.target,
cc=this.constructor.copiedStyle;rb.selection.isEmpty()?Object.assign(rb,cc):rb.selections.forEach(function(Vc){return rb.addTextAttribute(qb.constructor.copiedStyle,Vc)});this.update()}},{key:"clearStyle",value:function(){var qb=this.target;qb.selections.forEach(function(rb){return qb.resetStyleInRange(rb)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var qb=this.defaultSpec,rb=this.uiSpec;qb=
this.addMorph({name:"config panel",layout:new Qb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(qb).map(function(cc){var Vc=rb.rows.some(function(Bc){return Bc.some(function(xc){return xc===cc})});return{type:"labeledcheckbox",label:cc,name:cc,checked:Vc}})),[{layout:new Qb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});qb.center=this.innerBounds().center();
Qb.connect(qb.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");Qb.connect(qb.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var qb=this.getSubmorphNamed("config panel");qb&&(qb.remove(),qb.submorphs.filter(function(rb){return"LabeledCheckBox"===rb.constructor.name}))}},{key:"configureCanceled",value:function(){var qb=this.getSubmorphNamed("config panel");qb&&qb.remove()}},{key:"close",value:function(){var qb=this;this.target&&
this.target.attributeConnections&&this.target.attributeConnections.forEach(function(rb){return rb.targetObj===qb&&rb.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var qb=this.world();qb&&(qb=qb.focusedMorph)&&(qb.isLabel||qb.isText)&&!this.isAncestorOf(qb)&&this.target!==qb&&this.focusOn(qb,!1)}},{key:"onMouseUp",value:function(qb){var rb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){if(1==
cc.nextAddress)return cc.yield(rb.whenRendered(),2);rb.update();cc.jumpToEnd()})}},{key:"attachToWorld",value:function(){Qb.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:"className",get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},
updateSpec:{get:function(){var qb=this;return Object.assign({fontSelection:function(rb,cc){var Vc=rb.fontFamily;(rb=Vc&&cc.items.find(function(Bc){return Bc.value.toLowerCase()===Vc.toLowerCase()}))?cc.selection=rb.value:Vc&&(cc.items=cc.items.concat({isListItem:!0,label:[Vc,{fontFamily:Vc}],value:Vc}),cc.selection=Qb.arr.last(cc.items));cc.fit();cc.width=Math.max(cc.width,170)},fontWeightSelection:function(rb,cc){cc.selection="normal"==rb.fontWeight?"Medium":rb.fontWeight?Qb.string.capitalize(rb.fontWeight):
"Medium"},boldButton:function(rb,cc){qb.toggleButton(cc,"bold"===rb.fontWeight)},italicButton:function(rb,cc){qb.toggleButton(cc,"italic"===rb.fontStyle)},underlineButton:function(rb,cc){qb.toggleButton(cc,"underline"===rb.textDecoration)},linkButton:function(rb,cc){qb.toggleButton(cc,!!rb.link)},colorPicker:function(rb,cc){cc.colorValue=rb.fontColor},fontSizeField:function(rb,cc){cc.number=rb.fontSize},fixedWidthControl:function(rb,cc){rb.isText?cc.enable():cc.disable();cc.checked=rb.fixedWidth},
fixedHeightControl:function(rb,cc){rb.isText?cc.enable():cc.disable();cc.checked=rb.fixedHeight},lineWrappingControl:function(rb,cc){var Vc=$jscomp.makeIterator(cc.submorphs);cc=Vc.next().value;Vc=Vc.next().value;cc.checked=!!rb.lineWrapping;Vc.deactivated=!rb.lineWrapping;Vc.deactivated?Vc.opacity=.5:(Vc.opacity=1,Vc.selection=rb.lineWrapping)},paddingControl:function(rb,cc){var Vc=rb.padding,Bc=Vc.left();rb=Vc.top();var xc=Vc.right();Vc=Vc.bottom();var kc=!Qb.arr.every([Bc,rb,xc,Vc],function(Q){return Q==
Bc});cc.get("multi value indicator").visible=kc;Qb.connect(cc.get("multi value indicator"),"onMouseDown",cc.get("padding field"),"number",{converter:"() => left",varMapping:{left:Bc}});cc.get("padding field").number=Bc;cc.get("padding field").visible=!kc;cc.get("padding field top").number=rb;cc.get("padding field left").number=Bc;cc.get("padding field right").number=xc;cc.get("padding field bottom").number=Vc}},["left","center","right","block"].reduce(function(rb,cc){rb[cc+"Align"]=function(Vc,Bc){qb.toggleButton(Bc,
Vc.textAlign==cc)};return rb},{}))}},ui:{get:function(){var qb=this,rb={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",
fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control"};return Qb.obj.extract(rb,Qb.obj.keys(rb),function(cc,Vc){return qb.getSubmorphNamed(Vc)})}}}}},{key:"openDebouncedFor",value:function(qb){var rb=qb.selection;if(rb.isEmpty()){var cc=Qb.cachedControls.get(qb);cc&&(cc.update(),cc.alignAtTarget(),cc.world()||qb.world().addMorph(cc))}else Qb.fun.debounceNamed(qb.id+"openRichTextControl",600,function(){var Vc=
Qb.cachedControls.get(qb);rb.isEmpty()?Vc&&Vc.removeFocus():(Vc&&Vc.world()||(Vc=new Qb.RichTextControl,Qb.cachedControls.set(qb,Vc)),qb.world().addMorph(Vc),Vc.focusOn(qb,!0),Vc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(qb){var rb=Qb.cachedControls.get(qb);rb?rb.update():(rb=new Qb.RichTextControl,Qb.cachedControls.set(qb,rb),rb.focusOn(qb,!0),rb.alwaysTargetFocusedMorph());rb.alignAtTarget();rb.world()||qb.world().addMorph(rb);return rb}}],vc,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16332})}(Qb.Morph);Qb.RichTextControl=xb;Qb.RichTextControl=xb;Qb.RichTextControl=xb;xb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");xb.SearchField=Xc;var Nb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),jc=vc.hasOwnProperty("ProtoSearchField")&&
"function"===typeof vc.ProtoSearchField?vc.ProtoSearchField:vc.ProtoSearchField=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(jc,Rb,void 0,[{key:"className",get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(xb.SearchField);Nb=xb.ProtoSearchField;xb.default=Nb;var kb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");kb.Tree=gd;kb.TreeData=bc;xb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),jc=vc.hasOwnProperty("TestTreeData")&&"function"===typeof vc.TestTreeData?vc.TestTreeData:vc.TestTreeData=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd(jc,Rb,[{key:"display",value:function(qb){return qb.name}},{key:"isCollapsed",value:function(qb){return qb.isCollapsed}},{key:"collapse",value:function(qb,rb){qb.isCollapsed=rb}},{key:"getChildren",value:function(qb){return qb.isLeaf?null:qb.isCollapsed?[]:qb.children}},{key:"isLeaf",value:function(qb){return qb.isLeaf}}],[{key:"className",get:function(){return"TestTreeData"}}],vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(kb.TreeData);kb.TestTreeData=xb;kb.TestTreeData=xb;kb.TestTreeData=xb;xb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),jc=vc.hasOwnProperty("ProtoTree")&&"function"===typeof vc.ProtoTree?vc.ProtoTree:vc.ProtoTree=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd(jc,Rb,void 0,[{key:"className",get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new kb.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],
vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(kb.Tree);xb=kb.ProtoTree;kb.default=xb;xb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");xb.NumberWidget=ed;Nb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),jc=vc.hasOwnProperty("ProtoNumberWidget")&&
"function"===typeof vc.ProtoNumberWidget?vc.ProtoNumberWidget:vc.ProtoNumberWidget=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(jc,Rb,void 0,[{key:"className",get:function(){return"ProtoNumberWidget"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(xb.NumberWidget);Nb=xb.ProtoNumberWidget;xb.default=Nb;xb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");xb.Morph=Cd;Nb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),jc=vc.hasOwnProperty("FrameResizer")&&"function"===typeof vc.FrameResizer?vc.FrameResizer:vc.FrameResizer=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return wd(jc,Rb,[{key:"onDrag",value:function(qb){var rb=this.owner.left;qb=qb.positionIn(this).x;qb*="left"==this.direction?-1:1;this.owner.width+=qb;350>this.owner.width&&(qb+=350-this.owner.width,this.owner.width=350);this.owner.left="left"==this.direction?rb-qb:rb}}],[{key:"className",get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(xb.Morph);Nb=xb.FrameResizer;xb.default=Nb;var Db=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Db.Morph=Cd;Db.morph=$c;Db.layouts=ad;Db.string=ub;Db.connect=eb;Db.noUpdate=Cc;Db.InteractiveMorphSelector=Id;Db.Color=nd;Db.pt=pe;xb=function(Rb){var vc=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),jc=vc.hasOwnProperty("ShapeLayoutControl")&&
"function"===typeof vc.ShapeLayoutControl?vc.ShapeLayoutControl:vc.ShapeLayoutControl=function(qb){qb&&qb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(jc,Rb,[{key:"focusOn",value:function(qb){this.target=qb;this.update(!1)}},{key:"setupConnections",value:function(){var qb=this.ui;Db.connect(qb.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Db.connect(qb.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");
Db.connect(qb.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Db.connect(qb.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var rb={},cc=$jscomp.makeIterator(this.managedProps),
Vc=cc.next();!Vc.done;rb={$jscomp$loop$prop$prop$2290:rb.$jscomp$loop$prop$prop$2290},Vc=cc.next()){var Bc=$jscomp.makeIterator(Vc.value),xc=Bc.next().value;Vc=Bc.next().value;Bc.next().value||(rb.$jscomp$loop$prop$prop$2290=this.join(xc),Bc=qb[this.join(xc,"control")],Db.connect(Bc,Vc,this,"updateLayout",{updater:function(kc){return function(Q,ea){Q(kc.$jscomp$loop$prop$prop$2290,ea)}}(rb),varMapping:{prop:rb.$jscomp$loop$prop$prop$2290}}))}}},{key:"lower",value:function(qb){return qb.charAt(0).toLowerCase()+
qb.slice(1)}},{key:"join",value:function(qb,rb){return this.lower(Db.string.camelCaseString(qb+(rb?" "+rb:"")))}},{key:"updateLayoutOfTarget",value:function(qb){qb=Db.layouts[Db.string.camelCaseString(qb)];this.target.layout=qb?new qb({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(qb,rb){this.target.layout[qb]=rb}},{key:"update",value:function(qb){var rb=this;this.target&&Db.noUpdate(function(){for(var cc=rb.ui,Vc=rb.target.layout||{name:function(){return"No"}},Bc=$jscomp.makeIterator(rb.managedProps),
xc=Bc.next();!xc.done;xc=Bc.next()){var kc=$jscomp.makeIterator(xc.value);xc=kc.next().value;var Q=kc.next().value;kc.next();kc=cc[rb.join(xc,"control")];var ea=cc[rb.join(xc,"label")];if(Q)if("type"===xc)kc.selection=Vc.name()+" Layout";else{var Ga=Vc[rb.join(xc)],Ua="undefined"!==typeof Ga;if(Ua){switch(xc){case "align":kc.items=Vc.possibleAlignValues;break;case "direction":kc.items=Vc.possibleDirectionValues;break;case "axis":kc.items=Vc.possibleAxisValues}kc[Q]=Ga}ea.isLayoutable=ea.visible=Ua}}rb.showGridLayoutControl("Grid"===
Vc.name());rb.showProportionalControl("Proportional"===Vc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(qb){var rb={};this.target.layout.changeSettingsFor(qb.submorph,(rb[qb.axis]=qb.policy,rb),!0)}},{key:"onSubmorphSettingsDragStart",value:function(qb){var rb=this;qb.stop();var cc=this.target.layout,Vc=cc.settingsFor(this.selectedSubmorph),Bc=[],xc;for(xc in Vc)Bc=[].concat($jscomp.arrayFromIterable(Bc),[xc+": ",{fontWeight:"bold"},Vc[xc]+" ",{}]);var kc=Db.morph({type:"label",
fontColor:Db.Color.white,value:Bc,fill:Db.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});kc.wantsToBeDroppedOn=function(Q){return cc.layoutableSubmorphs.includes(Q)};kc.onBeingDroppedOn=function(Q,ea){kc.remove();if(Q=cc.layoutableSubmorphs.includes(ea)?ea:qb.world.morphsContainingPoint(qb.hand.position).find(function(Ga){return cc.layoutableSubmorphs.includes(Ga)}))rb.updateSubmorphProportionalLayoutSettings({policy:Vc.x,axis:"x",submorph:Q}),rb.updateSubmorphProportionalLayoutSettings({policy:Vc.y,
axis:"y",submorph:Q}),Q.show(),$world.setStatusMessage("layout settings applied")};qb.hand.grab(kc);kc.moveBy(Db.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var qb=this,rb,cc,Vc,Bc,xc,kc,Q,ea,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){switch(Ua.nextAddress){case 1:return rb=qb.target.layout.layoutableSubmorphs,qb.manageFocus=!0,qb.env.eventDispatcher.isKeyPressed("Shift")?(Vc=rb.map(function(fc){return{isListItem:!0,string:String(fc),value:fc}}),
Ua.yield($world.listPrompt("Select morph",Vc,{onSelection:function(fc){return fc.show()}}),5)):Ua.yield(Db.InteractiveMorphSelector.selectMorph(qb.world(),qb,function(fc){return rb.includes(fc)}),4);case 4:cc=Ua.yieldResult;Ua.jumpTo(3);break;case 5:Bc=Ua.yieldResult,xc=$jscomp.makeIterator(Bc.selected),cc=xc.next().value;case 3:qb.manageFocus=!1;qb.selectedSubmorph=cc;if(!cc)return Ua.return();kc=qb.ui;Q=kc.xAxisPolicyControl;ea=kc.yAxisPolicyControl;Ga=qb.target.layout.settingsFor(cc);Db.noUpdate(function(){Q.selection=
Ga.x;ea.selection=Ga.y});Ua.jumpToEnd()}})}},{key:"showProportionalControl",value:function(qb){var rb=this.ui;[rb.submorphSettingsControl,rb.dragmeControl,rb.xAxisPolicyControl,rb.xAxisPolicyLabel,rb.yAxisPolicyControl,rb.yAxisPolicyLabel].forEach(function(cc){cc.isLayoutable=qb;cc.visible=qb})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(qb){var rb=this.ui.configureGridLayoutControl;rb.visible=rb.isLayoutable=qb}}],
[{key:"className",get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",
!1,!0]]}},ui:{readOnly:!0,get:function(){for(var qb={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},rb=$jscomp.makeIterator(this.managedProps),cc=rb.next();!cc.done;cc=rb.next()){var Vc=$jscomp.makeIterator(cc.value).next().value;cc=Vc+" label";Vc+=" control";qb[this.join(cc)]=this.getSubmorphNamed(cc);qb[this.join(Vc)]=this.getSubmorphNamed(Vc)}return qb}}}}}],vc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Db.Morph);xb=Db.ShapeLayoutControl;Db.default=xb}}});