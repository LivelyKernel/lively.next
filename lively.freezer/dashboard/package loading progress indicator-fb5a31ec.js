System.register(["./__root_module__-aefa9179.js","kld-intersections"],function(){var Da,Bb,Qb,hc,ac,be,bd,Sd,ed;return{setters:[function(Mc){Da=Mc.ai;Bb=Mc.bP;Qb=Mc.av;hc=Mc.a3;ac=Mc.ap;be=Mc.P;bd=Mc.$;Sd=Mc.at;ed=Mc.as},function(){}],execute:function(){var Mc=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Mc.Morph=Da;Mc.stringToEasing=Bb;Mc.easings=Qb;Mc.pt=hc;Mc.num=ac;Mc.Path=be;Mc.promise=bd;Mc.fun=Sd;var pd=function(Dd){var ke=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Kd=ke.hasOwnProperty("ModuleProgress")&&"function"===typeof ke.ModuleProgress?ke.ModuleProgress:ke.ModuleProgress=function(jd){jd&&jd[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(Kd,Dd,[{key:"relayout",value:function(){!this.isComponent&&Mc.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var jd=this.getAllNamed(/stage/);this.stages=new Map(jd.map(function(cb){return[cb,
"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(cb){cb._cachedTextBounds=null;cb.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var jd=this.get("progress path"),cb=Mc.stringToEasing(Mc.easings.inOutExpo)(Mc.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);jd.width=Mc.num.interpolate(cb,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var jd=this,cb,Ab,Yb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dd){1==
dd.nextAddress&&(jd.reset(),cb="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),Ab=$jscomp.makeIterator(cb),Yb=Ab.next());if(3!=dd.nextAddress){if(Yb.done)return dd.jumpTo(0);gc=Yb.value;jd.finishPackage({packageName:gc,loaded:!0});return dd.yield(Mc.promise.delay(200),3)}Yb=Ab.next();return dd.jumpTo(2)})}},{key:"finishPackage",value:function(jd){var cb=this,Ab=jd.frozen,Yb=jd.loaded;jd="stage "+jd.packageName.replace("lively.",
"");jd=this.get(jd);Ab&&this.stages.set(jd,"frozen");Yb&&this.stages.set(jd,"loaded");Mc.fun.debounceNamed("update progress",200,function(){cb.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var jd=this,cb=this.getSubmorphNamed("progress path"),Ab=this.getAllNamed(/stage/),Yb=Ab[0];Ab.forEach(function(gc){var dd=gc.get("checkmark"),Zd=gc.get("frozen indicator"),Wb=gc.get("icon");gc=jd.stages.get(gc);if("not loaded"!=gc){Yb=dd;if("loaded"==gc){if(dd.visible)return;
dd.animate({duration:300,visible:!0})}if("frozen"==gc){if(Zd.visible)return;Zd.animate({duration:300,visible:!0})}Wb.opacity=1}else dd.visible=!1,Zd.visible=!1,Wb.opacity=.2});Ab=this.localizePointFrom(Mc.pt(-20,0),Yb).x;Ab=Math.max(20,Ab-cb.left);cb.visible=20==Ab?!1:!0;this._lastWidth=cb.width;this._timeStamp=Date.now();this._currentProgress=Ab}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],
initialize:function(){var jd=this;this.whenRendered().then(function(){jd.reset()})}}}}}],ke,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-108"}}},{start:192,end:3478})}(Mc.Morph);pd=Mc.ModuleProgress;Mc.default=pd}}});