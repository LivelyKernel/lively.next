System.register(["./__root_module__-37c88ebd.js","kld-intersections"],function(){var Wa,Ib,Sb,xc,ac,Cd,nd,Ud,bd;return{setters:[function(Ic){Wa=Ic.M;Ib=Ic.s;Sb=Ic.e;xc=Ic.p;ac=Ic.n;Cd=Ic.P;nd=Ic.a;Ud=Ic.f;bd=Ic.i},function(){}],execute:function(){var Ic=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Ic.Morph=Wa;Ic.stringToEasing=Ib;Ic.easings=Sb;Ic.pt=xc;Ic.num=ac;Ic.Path=Cd;Ic.promise=nd;Ic.fun=Ud;var pd=function(yd){var Ne=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),
Pe=Ne.hasOwnProperty("ModuleProgress")&&"function"===typeof Ne.ModuleProgress?Ne.ModuleProgress:Ne.ModuleProgress=function(Ie){Ie&&Ie[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return bd(Pe,yd,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&Ic.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var Ie=
this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(Ie.map(function(fd){return[fd,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(fd){fd._cachedTextBounds=null;fd.fit()})}},{key:"updateProgressBar",value:function(){if(this._lastWidth){this.relayout();var Ie=this.get("progress path"),fd=Ic.stringToEasing(Ic.easings.inOutExpo)(Ic.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);Ie.width=Ic.num.interpolate(fd,this._lastWidth,this._currentProgress)}}},
{key:"fastLoadTest",value:function(){var Ie=this,fd,me,Yb,Yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nd){1==Nd.nextAddress&&(Ie.reset(),fd="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),me=$jscomp.makeIterator(fd),Yb=me.next());if(3!=Nd.nextAddress){if(Yb.done)return Nd.jumpTo(0);Yc=Yb.value;Ie.finishPackage({packageName:Yc,loaded:!0});return Nd.yield(Ic.promise.delay(200),3)}Yb=me.next();
return Nd.jumpTo(2)})}},{key:"finishPackage",value:function(Ie){var fd=this,me=Ie.frozen,Yb=Ie.loaded;Ie="stage "+Ie.packageName.replace("lively.","");Ie=this.get(Ie);me&&this.stages.set(Ie,"frozen");Yb&&this.stages.set(Ie,"loaded");Ic.fun.debounceNamed("update progress",200,function(){fd.updateProgressVisualization()})()}},{key:"updateProgressVisualization",value:function(){var Ie=this,fd=this.getSubmorphNamed("progress path"),me=this.getAllNamed(/stage/),Yb=me[0];me.forEach(function(Yc){var Nd=
Yc.get("checkmark"),gd=Yc.get("frozen indicator"),ae=Yc.get("icon");Yc=Ie.stages.get(Yc);if("not loaded"!=Yc){Yb=Nd;if("loaded"==Yc){if(Nd.visible)return;Nd.animate({duration:300,visible:!0})}if("frozen"==Yc){if(gd.visible)return;gd.animate({duration:300,visible:!0})}ae.opacity=1}else Nd.visible=!1,gd.visible=!1,ae.opacity=.2});me=this.localizePointFrom(Ic.pt(-20,0),Yb).x;me=Math.max(20,me-fd.left);fd.visible=20==me?!1:!0;this._lastWidth=fd.width;this._timeStamp=Date.now();this._currentProgress=me}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var Ie=this;this.whenRendered().then(function(){Ie.reset()})}}}}}],Ne,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},
{start:192,end:3586})}(Ic.Morph);pd=Ic.ModuleProgress;Ic.default=pd}}});System.register("3",["./__root_module__-37c88ebd.js","kld-intersections","./index-d9e4dc7e.js","./index-53f40a2c.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});