System.register(["./__root_module__-f418f9fd.js"],function(Ha){var tb,Ab,kc,ac,Ld,Tc,$d,Uc,Pc,Jd,pe,Ze,Ff,te,Bc,sd,le,jc,je,Ae,Dc,Mc,bc,Gc,Zc,Rd,Kd,rb,ob,Bb,Va,Ta,xa,wa,Qa,Eb,rc,qb,sb,kb,ha,Pa,T;return{setters:[function(ia){tb=ia.aO;Ab=ia.a3;kc=ia.C;ac=ia.ab;Ld=ia.a8;Tc=ia.$;$d=ia.a7;Uc=ia.a1;Pc=ia.a2;Jd=ia.aa;pe=ia.aY;Ze=ia.aK;Ff=ia.av;te=ia.bh;Bc=ia.aF;sd=ia.ak;le=ia.bi;jc=ia.aJ;je=ia.aX;Ae=ia.ay;Dc=ia.ac;Mc=ia.aN;bc=ia.g;Gc=ia.aS;Zc=ia.P;Rd=ia.bj;Kd=ia.aH;rb=ia.a6;ob=ia.aG;Bb=ia.bk;Va=ia.aj;
Ta=ia.ax;xa=ia.aB;wa=ia.aw;Qa=ia.az;Eb=ia.bl;rc=ia.ad;qb=ia.bm;sb=ia.aA;kb=ia.bn;ha=ia.aC;Pa=ia.bo;T=ia.bb}],execute:function(){function ia(tc){(tc=Ba.cachedGuideLines.get(tc))&&tc.forEach(function(wb){return wb.remove()})}function Fa(tc,wb,uc,Q,Da){wb=void 0===wb?!0:wb;uc=void 0===uc?!0:uc;Q=void 0===Q?10:Q;Da=void 0===Da?100:Da;if(wb||uc){var ib=tc.owner,Kb=ib.world();ib=ib.getGlobalTransform();var pc=tc.owner.submorphs.filter(function(lb){return lb!==tc&&!lb.isEpiMorph&&lb.visible&&lb.reactsToPointer}),
Wb=Ba.findAlignedMorphs(tc,pc,Q,Da,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));Da=[];var rd=0,id=0,oe=0,Tf=0;ib.e-=Kb.scroll.x;ib.f-=Kb.scroll.y;if(Wb){Wb=$jscomp.makeIterator(Wb);for(var Ce=Wb.next();!Ce.done;Ce=Wb.next()){Ce=$jscomp.makeIterator(Ce.value);Ce.next();var $e=Ce.next().value;Ce=$e.vertical;$e=$jscomp.makeIterator($e.horizontal);for(var af=$e.next();!af.done;af=$e.next()){af=af.value;var of=af.edgeAVal,pd=af.refPointsA,gg=af.refPointsB,
Sf=af.edgeBVal,Nf=Math.ceil(Q-af.delta),Ag=Math.min(pd.top,gg.top);pd=Math.max(pd.bottom,gg.bottom);af.maxDist>Q&&(Nf-=Q/2);rd<Nf&&(rd=Nf,oe=Sf-of);Da.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ba.guideWidth,start:ib.transformPoint(Ba.pt(Sf,Ag)),end:ib.transformPoint(Ba.pt(Sf,pd)),fill:Ba.guideColor,guideType:"h",priority:Nf})}Ce=$jscomp.makeIterator(Ce);for($e=Ce.next();!$e.done;$e=Ce.next())$e=$e.value,af=$e.edgeAVal,Ag=$e.refPointsA,pd=$e.refPointsB,of=$e.edgeBVal,Sf=Math.ceil(Q-
$e.delta),Nf=Math.min(Ag.left,pd.left),Ag=Math.max(Ag.right,pd.right),$e.maxDist>Q&&(Sf-=Q/2),id<Sf&&Math.abs(of-af)<=Q&&(id=Sf,Tf=of-af),Da.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ba.guideWidth,start:ib.transformPoint(Ba.pt(Nf,of)),end:ib.transformPoint(Ba.pt(Ag,of)),fill:Ba.guideColor,guideType:"v",priority:Sf})}}if(!rd||!id){pc=[tc].concat($jscomp.arrayFromIterable(pc));af=Ba.computeClosestMorphs(pc);$e=af[0];pc=$e.l;Wb=$e.r;Ce=$e.t;$e=$e.b;var Ig;if(pc||Wb||Ce||$e){var xc=(pc||
Wb||Ce||$e).refPointsA;for(of=1;of<af.length&&(pd=af[of],Sf=pd.l,Nf=pd.r,Ag=pd.t,pd=pd.b,rd||(pc&&Sf&&pc.index!==Sf.index&&Math.abs(Sf.dist-pc.dist)<=Q?Ig=Object.assign({neighbor:of,direction:"left"},Sf):Wb&&Nf&&Wb!==Nf.index&&Math.abs(Nf.dist-Wb.dist)<=Q&&(Ig=Object.assign({neighbor:of,direction:"right"},Nf))),id||(Ce&&Ag&&Ce.index!==Ag.index&&Math.abs(Ag.dist-Ce.dist)<=Q?Ig=Object.assign({neighbor:of,direction:"top"},Ag):$e&&pd&&$e.index!==pd.index&&Math.abs(pd.dist-$e.dist)<=Q&&(Ig=Object.assign({neighbor:of,
direction:"bottom"},pd))),!Ig);of++);}if(Ig){var Wh=Ig;Q=Wh.direction;Ag=Wh.dist;var Di=xc.left;gg=xc.top;var Bh=xc.bottom,If=xc.right,Oa=xc.width,db=xc.height;pd=Wh.refPointsA;xc=pd.left;af=pd.top;of=pd.bottom;Sf=pd.right;Nf=pd.width;pd=pd.height;var Fb=Wh.refPointsB,ea=Fb.left;Wh=Fb.top;var Ma=Fb.bottom;Fb=Fb.right;If="left"===Q?Di:"right"===Q?If:Di+Oa/2;Bh="bottom"===Q?Bh:"top"===Q?gg:gg+db/2;Di="left"===Q?If-Ag:"right"===Q?If+Ag:Di+Oa/2;Ag="bottom"===Q?Bh+Ag:"top"===Q?Bh-Ag:gg+db/2;gg="left"===
Q?Fb:"right"===Q?ea:xc+Nf/2;Oa="bottom"===Q?Wh:"top"===Q?Ma:af+pd/2;!uc||rd||"right"!==Q&&"left"!==Q||(rd=10,oe=(Ig.dist-(Wb||pc).dist)*("right"===Q?-1:1),If+=oe,Di+=oe);!uc||id||"top"!==Q&&"bottom"!==Q||(id=10,Tf=((Ce||$e).dist-Ig.dist)*("top"===Q?-1:1),Bh+=Tf,Ag+=Tf);Da.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:ib.transformPoint(Ba.pt("left"===Q?xc:"right"===Q?Sf:xc+Nf/2,"bottom"===Q?of:"top"===Q?af:af+pd/2)),end:ib.transformPoint(Ba.pt(gg,Oa)),fill:Ba.Color.orange,height:Ba.guideWidth,
guideType:Q,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:ib.transformPoint(Ba.pt(If,Bh)),end:ib.transformPoint(Ba.pt(Di,Ag)),fill:Ba.Color.orange,height:Ba.guideWidth,guideType:Q,priority:10})}}uc&&(oe||Tf)&&tc.moveBy(Ba.pt(oe,Tf));if(wb){Da=Da.filter(function(lb){var xb=lb.guideType;lb=lb.priority;return"h"===xb?lb===rd:"v"===xb?lb===id:!0});(wb=Ba.cachedGuideLines.get(tc))||Ba.cachedGuideLines.set(tc,wb=[]);for(uc=0;uc<Da.length;uc++)Ig=void 0,wb[uc]?Ig=Object.assign(wb[uc],Da[uc]):
(Ig=Ba.morph(Da[uc]),wb.push(Ig)),Ig.owner||Kb.addMorph(Ig);wb.slice(uc).forEach(function(lb){return lb.remove()});Ba.fun.debounceNamed(tc.id+"-drag-guides-cleanup",1300,function(){var lb=Ba.cachedGuideLines.get(tc);lb&&lb.forEach(function(xb){return xb.remove()})})()}}}function $a(tc,wb,uc,Q,Da,ib){uc=void 0===uc?!0:uc;Q=void 0===Q?!0:Q;Da=void 0===Da?5:Da;ib=void 0===ib?100:ib;if(uc||Q){var Kb=tc.owner,pc=Kb.world(),Wb=Kb.getGlobalTransform(),rd=tc.owner.submorphs.filter(function(Bh){return Bh!==
tc&&!Bh.isEpiMorph&&Bh.visible&&Bh.reactsToPointer});Kb=(wb.includes("left")||wb.includes("right")?"x":"")+(wb.includes("top")||wb.includes("bottom")?"y":"");var id=Ba.findMorphsWithSimilarWidthOrHeight(tc,Kb,rd,Da,ib),oe=-Infinity,Tf=-Infinity,Ce=0,$e=0,af=0,of=0,pd=0,gg=0;Kb=[];Wb.e-=pc.scroll.x;Wb.f-=pc.scroll.y;if(id){id=$jscomp.makeIterator(id);for(var Sf=id.next();!Sf.done;Sf=id.next()){Sf=$jscomp.makeIterator(Sf.value);Sf.next();var Nf=Sf.next().value;Sf=Nf.similarIn;var Ag=Nf.delta,Ig=Nf.refPointsA,
xc=Nf.refPointsB;Nf=Da-Ag+(ib-Nf.minDist);"width"===Sf?oe<Nf&&(oe=Nf,wb.includes("left")&&($e=-Ag),wb.includes("right")&&(Ce=Ag)):Tf<Nf&&(Tf=Nf,wb.includes("top")&&(af=-Ag),wb.includes("bottom")&&(of=Ag));Ag={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ba.guideWidth,fill:Ba.guideColor,guideType:Sf,priority:Nf,start:Wb.transformPoint("width"===Sf?Ba.pt(Ig.left,Ig.top+Ig.height/2):Ba.pt(Ig.left+Ig.width/2,Ig.top)),end:Wb.transformPoint("width"===Sf?Ba.pt(Ig.right,Ig.top+Ig.height/2):Ba.pt(Ig.left+
Ig.width/2,Ig.bottom))};Sf=Object.assign({},Ag,{start:Wb.transformPoint("width"===Sf?Ba.pt(xc.left,xc.top+xc.height/2):Ba.pt(xc.left+xc.width/2,xc.top)),end:Wb.transformPoint("width"===Sf?Ba.pt(xc.right,xc.top+xc.height/2):Ba.pt(xc.left+xc.width/2,xc.bottom))});Kb.push(Ag,Sf)}}if(ib=Ba.findAlignedMorphs(tc,rd,Da,ib,wb,void 0))for(ib=$jscomp.makeIterator(ib),rd=ib.next();!rd.done;rd=ib.next()){rd=$jscomp.makeIterator(rd.value);rd.next();id=rd.next().value;rd=id.vertical;id=$jscomp.makeIterator(id.horizontal);
for(Sf=id.next();!Sf.done;Sf=id.next()){Sf=Sf.value;xc=Sf.edgeAVal;var Wh=Sf.refPointsA,Di=Sf.refPointsB;Ag=Sf.edgeBVal;Ig=Math.ceil(Da-Sf.delta);Nf=Math.min(Wh.top,Di.top);Wh=Math.max(Wh.bottom,Di.bottom);Sf.maxDist>Da&&(Ig-=Da/2);pd<Ig&&(pd=Ig,wb.includes("left")&&($e=-(Ag-xc)),wb.includes("right")&&(Ce=+(Ag-xc)));Kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ba.guideWidth,start:Wb.transformPoint(Ba.pt(Ag,Nf)),end:Wb.transformPoint(Ba.pt(Ag,Wh)),fill:Ba.guideColor,guideType:"h",priority:Ig})}rd=
$jscomp.makeIterator(rd);for(id=rd.next();!id.done;id=rd.next())id=id.value,Sf=id.edgeAVal,Nf=id.refPointsA,Wh=id.refPointsB,xc=id.edgeBVal,Ag=Math.ceil(Da-id.delta),Ig=Math.min(Nf.left,Wh.left),Nf=Math.max(Nf.right,Wh.right),id.maxDist>Da&&(Ag-=Da/2),gg<Ag&&Math.abs(xc-Sf)<=Da&&(gg=Ag,wb.includes("top")&&(af=xc-Sf),wb.includes("bottom")&&(of=xc-Sf)),Kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ba.guideWidth,start:Wb.transformPoint(Ba.pt(Ig,xc)),end:Wb.transformPoint(Ba.pt(Nf,xc)),
fill:Ba.guideColor,guideType:"v",priority:Ag})}Q&&($e&&(tc.left+=$e,tc.right-=$e),af&&(tc.top+=af,tc.bottom-=af),Ce&&(tc.width+=Ce),of&&(tc.height+=of));if(uc){Kb=Kb.filter(function(Bh){var If=Bh.guideType;Bh=Bh.priority;return"width"===If?Bh===oe:"height"===If?Bh===Tf:"v"===If?Bh===gg:"h"===If?Bh===pd:!1});(wb=Ba.cachedGuideLines.get(tc))||Ba.cachedGuideLines.set(tc,wb=[]);for(uc=0;uc<Kb.length;uc++)Q=void 0,wb[uc]?Q=Object.assign(wb[uc],Kb[uc]):(Q=Ba.morph(Kb[uc]),wb.push(Q)),Q.owner||pc.addMorph(Q);
wb.slice(uc).forEach(function(Bh){return Bh.remove()});Ba.fun.debounceNamed(tc.id+"-drag-guides-cleanup",1300,function(){var Bh=Ba.cachedGuideLines.get(tc);Bh&&Bh.forEach(function(If){return If.remove()})})()}}}function zb(tc,wb){wb=void 0===wb?!1:wb;var uc=Ca.MorphicEnv.default().world;if(null===tc||void 0===tc)tc=String(tc);if(tc.isMorph)return Ca.showRect(tc.world(),tc.globalBounds().translatedBy(uc.scroll.negated()),wb);if(tc.isPoint)return Ca.showRect(uc,new Ca.Rectangle(tc.x-5,tc.y-5,10,10));
if(tc.isLine)return Ca.showLine(uc,tc);if(tc.isRectangle)return Ca.showRect(uc,tc);if("undefined"!==typeof Ca.Element&&tc instanceof Ca.Element)return Ca.showRect(uc,Ca.Rectangle.fromElement(tc));if("number"===typeof tc||"symbol"===typeof tc||"boolean"===typeof tc||"undefined"!==typeof Ca.Node&&tc instanceof Ca.Node||tc instanceof RegExp)tc=String(tc);"object"===typeof tc&&(tc=Ca.obj.inspect(tc,{maxDepth:1}));return"string"===typeof tc&&1===arguments.length?uc.setStatusMessage(tc):uc.setStatusMessage(Ca.string.formatFromArray(Array.from(arguments)))}
function Cc(tc,wb,uc){uc=void 0===uc?3E3:uc;var Q,Da,ib,Kb,pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress){if(!(tc&&tc.world()&&wb&&wb.world()))return Wb.return(null);Q=tc.owner.worldPoint(tc.center);Da=wb.owner.worldPoint(wb.center);ib=Q.lineTo(Da).sampleN(2)[1];Kb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ca.Color.red,fill:Ca.Color.red,cx:5,cy:5,r:4}]};pc=$world.addMorph(new Ca.Path({position:ib,
renderOnGPU:!0,vertices:[Ca.pt(0),Ca.pt(0)],borderWidth:2,startMarker:Kb,endMarker:Kb,borderColor:Ca.Color.red}));return Wb.yield(pc.whenRendered(),2)}if(3!=Wb.nextAddress)return Wb.yield(pc.animate({opacity:1,customTween:function(rd){var id=pc.center;pc.vertices=[Ca.pt(0).interpolate(rd,Q.subPt(ib)),Ca.pt(0).interpolate(rd,Da.subPt(ib))];pc.center=id},duration:400}),3);uc&&setTimeout(function(){return pc.fadeOut()},uc);return Wb.return(pc)})}Ha({a:Fa,d:Cc,r:ia,s:zb});var Ba=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Ba.removeSnapToGuidesOf=ia;Ba.showAndSnapToGuides=Fa;Ba.showAndSnapToResizeGuides=$a;Ba.computeRefPoints=function(tc){var wb=tc.x,uc=tc.y,Q=tc.width;tc=tc.height;return{left:wb,top:uc,hCenter:wb+Q/2,vCenter:uc+tc/2,right:wb+Q,bottom:uc+tc,width:Q,height:tc}};Ba.findEdgesInAlignment=function(tc,wb,uc,Q,Da,ib,Kb,pc,Wb,rd){uc=void 0===uc?15:uc;ib=void 0===ib?0:ib;Kb=void 0===Kb?0:Kb;pc=void 0===pc?0:pc;Wb=void 0===Wb?0:Wb;rd=void 0===rd?0:rd;for(var id=[],oe=[],Tf=0;Tf<Ba.edges.length;Tf++){var Ce=$jscomp.makeIterator(Ba.edges[Tf]),
$e=Ce.next().value,af=Ce.next().value;Ce=Ce.next().value;var of=tc[af],pd=wb[Ce],gg=Math.max(of,pd)-Math.min(of,pd);gg>uc||!(Q&&!Q.includes(af)||Da&&!Da.includes(Ce))&&("vertical"===$e?id:oe).push({delta:gg,edgeA:af,edgeB:Ce,edgeAVal:of,edgeBVal:pd,refPointsA:tc,refPointsB:wb,distLeft:ib,distTop:Kb,distRight:pc,distBottom:Wb,maxDist:rd})}return id.length||oe.length?{vertical:id,horizontal:oe}:null};Ba.findAlignedMorphs=function(tc,wb,uc,Q,Da,ib){uc=void 0===uc?15:uc;Q=void 0===Q?Infinity:Q;for(var Kb,
pc=Ba.computeRefPoints(tc.bounds()),Wb=0;Wb<wb.length;Wb++){var rd=wb[Wb];if(rd!==tc){var id=Ba.computeRefPoints(rd.bounds()),oe=Math.max(0,pc.left-id.right),Tf=Math.max(0,id.left-pc.right),Ce=Math.max(0,pc.top-id.bottom),$e=Math.max(0,id.top-pc.bottom);Math.max($e,Ce,Tf,oe)>Q||!(id=Ba.findEdgesInAlignment(pc,id,uc,Da,ib,oe,Ce,Tf,$e,Math.max($e,Ce,Tf,oe)))||(Kb||(Kb=new Map),Kb.set(rd,id))}}tc=tc.owner;wb=Ba.computeRefPoints(tc.innerBounds());if(uc=Ba.findEdgesInAlignment(pc,wb,uc))Kb||(Kb=new Map),
Kb.set(tc,uc);return Kb};Ba.findMorphsWithSimilarWidthOrHeight=function(tc,wb,uc,Q,Da){Q=void 0===Q?15:Q;Da=void 0===Da?Infinity:Da;for(var ib,Kb=Ba.computeRefPoints(tc.bounds()),pc=0;pc<uc.length;pc++){var Wb=uc[pc];if(Wb!==tc){var rd=Ba.computeRefPoints(Wb.bounds()),id=Math.max(0,Kb.left-rd.right),oe=Math.max(0,rd.left-Kb.right),Tf=Math.max(0,Kb.top-rd.bottom),Ce=Math.max(0,rd.top-Kb.bottom),$e=Math.min(Ce,Tf,oe,id),af=Math.max(Ce,Tf,oe,id);if(!(Math.max(Ce,Tf,oe,id)>Da)){oe=Kb;id=oe.width;oe=oe.height;
Ce=rd;Tf=Ce.width;Ce=Ce.height;var of=Tf-id,pd=Ce-oe;("x"===wb||"xy"===wb)&&Math.abs(of)<=Q&&(ib||(ib=new Map),ib.set(Wb,{similarIn:"width",minDist:$e,maxDist:af,refPointsA:Kb,refPointsB:rd,valA:id,valB:Tf,delta:of}));("y"===wb||"xy"===wb)&&Math.abs(pd)<=Q&&(ib||(ib=new Map),ib.set(Wb,{similarIn:"height",minDist:$e,maxDist:af,refPointsA:Kb,refPointsB:rd,valA:oe,valB:Ce,delta:pd}))}}}return ib};Ba.closest=function(tc,wb,uc,Q,Da,ib,Kb,pc){pc=void 0===pc?!0:pc;var Wb=Q[tc],rd=Da[tc],id=ib[tc];wb=Kb[tc];
for(var oe,Tf,Ce,$e,af=0;af<Da.length;af++)tc===af||Wb<Da[af]||oe&&Da[oe.index]>=Da[af]||pc&&Kb[tc]<ib[af]||ib[tc]>Kb[af]||(oe={index:af,dist:Wb-Da[af],refPointsA:uc[tc],refPointsB:uc[af]});for(Wb=0;Wb<Q.length;Wb++)tc===Wb||rd>Q[Wb]||Tf&&Q[Tf.index]<=Q[Wb]||pc&&Kb[tc]<ib[Wb]||ib[tc]>Kb[Wb]||(Tf={index:Wb,dist:Q[Wb]-rd,refPointsA:uc[tc],refPointsB:uc[Wb]});for(rd=0;rd<Kb.length;rd++)tc===rd||id<Kb[rd]||Ce&&Kb[Ce.index]>=Kb[rd]||pc&&Q[tc]>Da[rd]||Da[tc]<Q[rd]||(Ce={index:rd,dist:id-Kb[rd],refPointsA:uc[tc],
refPointsB:uc[rd]});for(Kb=0;Kb<ib.length;Kb++)tc===Kb||wb>ib[Kb]||$e&&ib[$e.index]<=ib[Kb]||pc&&Q[tc]>Da[Kb]||Da[tc]<Q[Kb]||($e={index:Kb,dist:ib[Kb]-wb,refPointsA:uc[tc],refPointsB:uc[Kb]});return{l:oe,r:Tf,t:Ce,b:$e}};Ba.computeClosestMorphs=function(tc){for(var wb=[],uc=[],Q=[],Da=[],ib=[],Kb=[],pc=0;pc<tc.length;pc++){var Wb=Ba.computeRefPoints(tc[pc].bounds());ib.push(Wb);var rd=Wb.right,id=Wb.top,oe=Wb.bottom;wb.push(Wb.left);uc.push(rd);Q.push(id);Da.push(oe)}for(pc=0;pc<tc.length;pc++)Kb.push(Ba.closest(pc,
tc,ib,wb,uc,Q,Da));return Kb};Ba.fun=tb;Ba.pt=Ab;Ba.Color=kc;Ba.morph=ac;Ba.cachedGuideLines=new WeakMap;Ba.guideWidth=1;Ba.guideColor=Ba.Color.orange.lighter();Ba.removeSnapToGuidesOf=ia;Ba.removeSnapToGuidesOf=ia;Ba.showAndSnapToGuides=Fa;Ba.showAndSnapToGuides=Fa;Ba.showAndSnapToResizeGuides=$a;Ba.showAndSnapToResizeGuides=$a;Ba.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ca=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ca.show=zb;Ca.showRect=function(tc,wb,uc){var Q=
Ca.BoundsMarker.highlightBounds(wb);return uc?Ca.showInLoop(tc,Q,wb):Ca.showThenHide(tc,Q)};Ca.showInLoop=function(tc,wb,uc){var Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){switch(Da.nextAddress){case 1:return Ca.showThenHide(tc,wb,!1),Da.yield(Ca.promise.delay(300),2);case 2:Q=!1,Ca.once(tc,"onMouseDown",function(){return Q=!0}),Ca.once(tc,"hideMarkers",function(){return Q=!0});case 3:if(Q){Da.jumpTo(4);break}return Da.yield(wb.retract(uc),3);case 4:wb.fadeOut(2E3),Da.jumpToEnd()}})};
Ca.showThenHide=function(tc,wb,uc){uc=void 0===uc?3:uc;if(tc){var Q=Array.isArray(wb)?wb:[wb];Q.forEach(function(Da){return tc.addMorph(Da)});uc&&setTimeout(function(){return Q.forEach(function(Da){return Da.fadeOut(2E3)})},1E3*uc);return wb}};Ca.showLine=function(tc,wb,uc){uc=void 0===uc?3E3:uc;var Q=wb.start;wb=wb.end.subPt(Q);var Da=tc.addMorph({position:Q,rotation:wb.theta(),border:{width:1,color:Ca.Color.red},width:wb.fastR(),height:0});uc&&setTimeout(function(){return Da.fadeOut()},uc);return Da};
Ca.showConnector=Cc;Ca.obj=Ld;Ca.promise=Tc;Ca.string=$d;Ca.pt=Ab;Ca.Color=kc;Ca.Rectangle=Uc;Ca.rect=Pc;Ca.morph=ac;Ca.easings=Jd;Ca.Path=pe;Ca.Icon=Ze;Ca.Morph=Ff;Ca.MorphicEnv=te;Ca.connect=Bc;Ca.once=sd;Ca.disconnect=le;Ca.show=zb;Ca.show=zb;(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),uc=wb.hasOwnProperty("BoundsMarker")&&"function"===typeof wb.BoundsMarker?wb.BoundsMarker:wb.BoundsMarker=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(){jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Ca.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(Q){Q=Q.insetBy(-2);Q=Math.min(Q.width,Q.height);return Math.max(4,Math.floor(10>Q/10?Q/2-5:Q/10))}},{key:"createMarkerEdge",value:function(){return Ca.morph({fill:Ca.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var Q=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),Da=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),ib=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Kb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),pc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Wb=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),rd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),id=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[Q,Da,ib,Kb,pc,Wb,rd,id]}},{key:"alignWithMorph",value:function(Q){return this.alignWithBounds(Q.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(Q){this.alignWithRect(Q.insetBy(-20));return this.alignWithRect(Q,!0)}},{key:"alignWithRect",value:function(Q,
Da){var ib=this.ensureMarkerCorners(),Kb=this.markerLength(Q),pc=[Q.topLeft().addXY(0,0).extent(Ca.pt(Kb,5)),Q.topLeft().addXY(0,0).extent(Ca.pt(5,Kb)),Q.topRight().addXY(-Kb,0).extent(Ca.pt(Kb,5)),Q.topRight().addXY(-5,0).extent(Ca.pt(5,Kb)),Q.bottomRight().addXY(-5,-Kb).extent(Ca.pt(5,Kb)),Q.bottomRight().addXY(-Kb,-5).extent(Ca.pt(Kb,5)),Q.bottomLeft().addXY(0,-5).extent(Ca.pt(Kb,5)),Q.bottomLeft().addXY(0,-Kb).extent(Ca.pt(5,Kb))];ib.forEach(function(Wb,rd){return Wb.setBounds(pc[rd])});Da&&(this.adjustOrigin(Q.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(Q){var Da=this,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return Kb.yield(Da.animate({scale:Math.max(30/Q.width,1.05)}),2);ib=Da.center;return Kb.yield(Da.animate({center:ib,scale:1,duration:300,easing:Ca.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(Q){return(new this).alignWithMorph(Q)}},
{key:"highlightBounds",value:function(Q){return(new this).alignWithBounds(Q)}}],wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(Ca.Morph);var Nb=Ha("S",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),uc=wb.hasOwnProperty("StatusMessage")&&
"function"===typeof wb.StatusMessage?wb.StatusMessage:wb.StatusMessage=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"relayout",value:function(){this.title=Ca.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(Q,Da){this.message=Q;this.color=Da}},{key:"slideTo",
value:function(Q){var Da=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da.sliding=Da.animate({position:Q,duration:500}),ib.yield(Da.sliding,2);Da.sliding=!1;ib.jumpToEnd()})}},{key:"expand",value:function(){var Q=this,Da,ib,Kb,pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return Q.expandable?Q.sliding?Wb.yield(Q.sliding,2):Wb.jumpTo(2):Wb.return();Da=Q.world();if(!Da||Q.isMaximized)return Wb.return();Q.isMaximized=
!0;Q.stayOpen=!0;ib=Q.getSubmorphNamed("message text");ib.lineWrapping=!1;Object.assign(ib,{clipMode:"auto",fixedWidth:!0,selectable:!0});Q.expandedContent&&(ib.value=Q.expandedContent);ib.fit();Kb=ib.textBounds().extent();pc=Da.visibleBounds();Kb.y>pc.extent().y&&(Kb.y=pc.extent().y-20);Kb.x>pc.extent().x&&(Kb.x=pc.extent().x-20);Kb=Q.extent.maxPt(Kb);Q.animate({extent:Kb,center:pc.center(),duration:200});Q.relayout();Q.focus();Wb.jumpToEnd()})}},{key:"fit",value:function(){var Q=this.getSubmorphNamed("message text");
Q&&(this.extent=Ca.pt(100,35).maxPt(Q.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var Q=this.getSubmorphNamed("message text");Q&&Q.focus()}},{key:"onMouseUp",value:function(Q){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ca.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=
!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(Q){this.setProperty("message",Q);var Da=this.getSubmorphNamed("message text");if(Da){Da.value=Q;var ib=Da.documentEndPosition;ib.row>this.maxLines&&(Da.replace({start:{row:this.maxLines,column:0},end:ib},"...\n"),this.expandedContent||(this.expandedContent=Q));ib=Da.documentEndPosition;0!==ib.column&&
Da.insertText("\n",ib)}}},title:{isStyleProp:!0,derived:!0,set:function(Q){this.getSubmorphNamed("message title").value=Q},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(Q){this.get("message icon").fontColor=Q;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=Q)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[{name:"message icon",type:"label",value:Ca.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Ca.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ca.connect(this,"extent",this,"relayout")}}}}}],wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:6044,end:10373})}(Ca.Morph));Ca.StatusMessage=Nb;Ca.StatusMessage=Nb;Ca.StatusMessage=Nb;var Ec=Ha("b",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),uc=wb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof wb.StatusMessageForMorph?wb.StatusMessageForMorph:wb.StatusMessageForMorph=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"alignAtBottomOf",
value:function(Q){var Da=this.world();Da&&(this.bringToFront(),this.fit(),this.width=Q.bounds().width,this.relayout(),Q.world()&&(this.position=Q.owner.worldPoint(Q.bounds().bottomLeft())),Q=Da.visibleBounds(),Q=this.bounds().top()+this.height-Q.bottom(),0<Q&&this.moveBy(Ca.pt(0,-Q)))}},{key:"onMouseUp",value:function(Q){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},
removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var Q=this.getProperty("targetMorph");return Q&&$world.getMorphWithId(Q)},set:function(Q){this.setProperty("targetMorph",Q?Q.id:null);this.alignAtBottomOf(Q)}},expandable:{after:["submorphs"],set:function(Q){this.setProperty("expandable",Q);if(Q){var Da=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Ca.connect(Da,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Ca.disconnect(Da,"fire",this,"expand"))}}}}}],wb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(Ca.StatusMessage));Ca.StatusMessageForMorph=Ec;Ca.StatusMessageForMorph=Ec;Ca.StatusMessageForMorph=Ec;Ca.showConnector=Cc;Ca.showConnector=
Cc;var fb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");fb.Morph=Ff;fb.Label=je;fb.HorizontalLayout=Ae;fb.Path=pe;fb.Text=Dc;fb.GridLayout=Mc;fb.morph=ac;fb.Icon=Ze;fb.createMorphSnapshot=bc;fb.Color=kc;fb.pt=Ab;fb.rect=Pc;fb.Rectangle=Uc;fb.LinearGradient=Gc;fb.obj=Ld;fb.PropertyPath=Zc;fb.promise=Tc;fb.properties=Rd;fb.num=Kd;fb.arr=rb;fb.connect=Bc;fb.signal=ob;fb.disconnect=le;fb.disconnectAll=Bb;fb.once=sd;fb.showAndSnapToGuides=Fa;fb.showAndSnapToResizeGuides=$a;fb.removeSnapToGuidesOf=
ia;fb.CommentBrowser=Va;fb.show=zb;fb.haloBlue=fb.Color.rgb(23,160,251);fb.componentAccent=fb.Color.magenta;fb.derivedAccent=fb.Color.purple;var td=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("Halo")&&"function"===typeof wb.Halo?wb.Halo:wb.Halo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(Q){Q.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var Q=this;setTimeout(function(){Q.target.owner||Q.remove()})}},{key:"initLayout",value:function(){var Q=this.layout=new fb.GridLayout({autoAssign:!1,fitToCell:!1,
columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name",
"name","name","name","name",null]]});Q.col(1).row(7).group.align="center";Q.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(fb.morph({name:"border-box",fill:fb.Color.transparent,borderColor:this.target.isComponent?fb.componentAccent:fb.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(Q){this.state||(this.state={});this.state.pointerId=Q}},{key:"prepareTarget",
value:function(Q){if(!fb.obj.isArray(Q))return Q;if(1>=Q.length)return Q[0];Q=Q[0].world().addMorph(new fb.MultiSelectionTarget({selectedMorphs:Q}));Q.alignWithSelection();Q.modifiesSelectedMorphs=!0;return Q}},{key:"refocus",value:function(Q){this.target=Q;this.alignWithTarget()}},{key:"alignWithTarget",value:function(Q){if((!Q||["extent","position","scale","rotation"].includes(Q.prop))&&!this.active&&this.target){Q=this.target.world()||$world;var Da=Q.visibleBounds(),ib=this.target.globalBounds(),
Kb=ib.insetBy(-36).intersection(Da);Da=ib.intersection(Da);this.layout&&this.layout.disable();this.setBounds(Kb.translatedBy(Q.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,Da));this.state.activeButton?(this.buttonControls.forEach(function(pc){return pc.visible=!1}),this.ensureResizeHandles().forEach(function(pc){return pc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),
this.ensureResizeHandles().forEach(function(pc){return pc.visible=!0}),this.buttonControls.forEach(function(pc){pc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(pc){return pc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var Q=this.target;Q&&(fb.disconnect(Q,"onChange",this,"alignWithTarget"),fb.disconnect(Q,"onOwnerChanged",
this,"removeIfDetached"),Q instanceof fb.MultiSelectionTarget?(Q.modifiesSelectedMorphs=!1,Q.remove()):"function"===typeof Q.detachedHalo&&Q.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();jc._get(Object.getPrototypeOf(uc.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",value:function(Q){return Q}},{key:"propertyDisplay",get:function(){return fb.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return fb.NameHaloItem.for(this)}},{key:"closeHalo",
value:function(){return fb.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return fb.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return fb.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return fb.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return fb.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return fb.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return fb.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return fb.CopyHaloItem.for(this)}},
{key:"originHalo",value:function(){return fb.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return fb.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(Q){return Q.isHaloItem&&!Q.isResizeHandle})}},{key:"addMorphToSelection",value:function(Q){var Da=this,ib,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pc){if(1==pc.nextAddress){ib=Da.world();Kb=Da.target.isMorphSelection?Da.target.selectedMorphs:[Da.target];
if(Kb.includes(Q))return pc.return();Da.remove();return pc.yield(ib.showHaloForSelection([].concat($jscomp.arrayFromIterable(Kb),[Q]),Da.state.pointerId),2)}return pc.return(pc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(Q){var Da=this,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress){ib=Da.world();Da.remove();if(!Da.target.isMorphSelection)return Kb.jumpTo(0);fb.arr.remove(Da.target.selectedMorphs,Q);return Kb.yield(ib.showHaloForSelection(Da.target.selectedMorphs,
Da.state.pointerId),3)}return Kb.return(Kb.yieldResult)})}},{key:"isAlreadySelected",value:function(Q){return this.target==Q||this.target.isMorphSelection&&this.target.selectsMorph(Q)}},{key:"updateBoundsFor",value:function(Q,Da,ib,Kb,pc){var Wb={topLeft:fb.rect(-1,-1,1,1),topCenter:Da?fb.rect(1,-1,0,1):fb.rect(0,-1,0,1),topRight:fb.rect(0,-1,1,1),rightCenter:Da?fb.rect(0,1,1,1):fb.rect(0,0,1,0),bottomRight:fb.rect(0,0,1,1),bottomCenter:Da?fb.rect(1,0,0,1):fb.rect(0,0,0,1),bottomLeft:fb.rect(-1,0,
1,1),leftCenter:Da?fb.rect(-1,1,1,0):fb.rect(-1,0,1,0)}[Q];pc=Wb.x;var rd=Wb.y,id=Wb.width;Wb=Wb.height;ib=Da?this.proportionalDelta(Q,ib,Kb):ib;Q=fb.rect(ib.x*pc,ib.y*rd,ib.x*id,ib.y*Wb);this.active=!0;this.target.setBounds(Kb.insetByRect(Q));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(oe){if(oe.activeSideBars.includes("Styling Palette"))oe.stylingPalette.onHierarchyChange()})}},
{key:"proportionalDelta",value:function(Q,Da,ib){var Kb=ib.width,pc=ib.height;ib={topLeft:fb.pt(-1,-1),topCenter:fb.pt(0,-1),topRight:fb.pt(1,-1),leftCenter:fb.pt(-1,0),rightCenter:fb.pt(1,0),bottomLeft:fb.pt(-1,1),bottomCenter:fb.pt(0,1),bottomRight:fb.pt(1,1)};var Wb=Kb/Math.max(Kb,pc),rd=pc/Math.max(pc,Kb);Kb={topLeft:fb.pt(-Wb,-rd),topCenter:fb.pt(1/(2*pc/Kb),-1),topRight:fb.pt(Wb,-rd),leftCenter:fb.pt(-1,pc/(2*Kb)),rightCenter:fb.pt(1,pc/(3*Kb)),bottomLeft:fb.pt(-Wb,rd),bottomCenter:fb.pt(1/
(2*pc/Kb),1),bottomRight:fb.pt(Wb,rd)};ib=ib[Q];return Kb[Q].scaleBy(ib.dotProduct(Da)/ib.dotProduct(ib))}},{key:"ensureResizeHandles",value:function(){return fb.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(Q){Q=Q.valueForPropertyDisplay();"undefined"!==typeof Q?this.propertyDisplay.displayProperty(Q):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(Q,Da){if(!fb.rect(0).sides.includes(Da)){var ib=this.getSubmorphNamed("diagonal");if(Q){Q=this.target.globalBounds();
var Kb=Q.width,pc=Q.height;Q=this.localize(fb.pt(Q.x,Q.y)).extent(fb.pt(Kb,pc)).scaleRectTo(this.innerBounds());Kb={topLeft:[fb.pt(Kb,pc),fb.pt(0,0)],topRight:[fb.pt(0,pc),fb.pt(Kb,0)],bottomRight:[fb.pt(0,0),fb.pt(Kb,pc)],bottomLeft:[fb.pt(Kb,0),fb.pt(0,pc)]};ib?ib.setBounds(Q):(ib=$jscomp.makeIterator(Kb[Da]),Da=ib.next().value,ib=ib.next().value,Kb=new fb.LinearGradient({stops:[{offset:0,color:fb.Color.orange.withA(0)},{offset:.2,color:fb.Color.orange},{offset:.8,color:fb.Color.orange},{offset:1,
color:fb.Color.orange.withA(0)}]}),ib=this.addMorphBack(new fb.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:Q,borderColor:Kb,vertices:[Da,ib]})),ib.setBounds(Q),ib.animate({opacity:1,duration:500}))}else ib&&ib.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(Q,Da){var ib=this.getSubmorphNamed("rotationIndicator");Q&&Da?(Q=this.getSubmorphNamed("origin").center,ib=ib||this.addMorphBack(new fb.Path({name:"rotationIndicator",borderColor:fb.haloBlue,borderWidth:1,
vertices:[]})),ib.setBounds(Da.bounds().union(this.innerBounds())),ib.vertices=[ib.localizePointFrom(Q,this),ib.localizePointFrom(Da.center,this)]):ib&&ib.remove()}},{key:"toggleMorphHighlighter",value:function(Q,Da,ib){ib=void 0===ib?!1:ib;if(Da)if(Da.onHaloGrabover)Da.onHaloGrabover(Q);else ib=fb.MorphHighlighter.for(this,Da,ib),Q&&Da&&Da!=this.world()?ib&&ib.show(Da):ib&&ib.deactivate()}},{key:"onMouseDown",value:function(Q){var Da=Q.state.clickedOnMorph;if(!Q.isCommandKey()&&Da==this.borderBox)return this.remove();
if(Q.isShiftDown()&&Q.isCommandKey())Q=this.target.isMorphSelection?this.target.morphBeneath(Q.position):this.morphBeneath(Q.position),this.isAlreadySelected(Q)?this.removeMorphFromSelection(Q):this.addMorphToSelection(Q);else{if(Da==this.borderBox&&Q.isCommandKey()){var ib=Q.world.morphsContainingPoint(Q.position).filter(function(Kb){return Kb.halosEnabled});(ib=ib.slice(ib.indexOf(this.target)+1)[0]||ib[0]||Q.world)&&Q.world.showHaloFor(ib,Q.domEvt.pointerId);this.remove()}Da==this&&Q.isCommandKey()&&
(ib=this.morphBeneath(Q.position),Q.world.showHaloFor(ib,Q.domEvt.pointerId));Da==this&&this.remove()}}},{key:"onContextMenu",value:function(Q){var Da=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(ib){return Da.target.openMenu(ib,Q)}).catch(function(ib){return $world.logError(ib)})}},{key:"onKeyUp",value:function(Q){this.changingName||this.buttonControls.map(function(Da){return Da.onKeyUp(Q)})}},{key:"getMesh",value:function(Q,Da){var ib=Q.x;Q=Q.y;Da=void 0===Da?fb.pt(0,
0):Da;var Kb=this.world().visibleBounds(),pc=Kb.height;Kb=Kb.width;var Wb={borderStyle:"dotted",borderWidth:2,borderColor:fb.Color.orange};Wb=this.get("mesh")||this.addMorph(new fb.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:fb.pt(Kb,pc),fill:null,submorphs:[new fb.Path(Object.assign({name:"vertical"},Wb)),new fb.Path(Object.assign({name:"horizontal"},Wb))]}));Wb.globalPosition=Da;Wb.getSubmorphNamed("vertical").vertices=[fb.pt(ib,0).subPt(Da),fb.pt(ib,pc).subPt(Da)];Wb.getSubmorphNamed("horizontal").vertices=
[fb.pt(0,Q).subPt(Da),fb.pt(Kb,Q).subPt(Da)];return Wb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:fb.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(fb.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(Q){this.state||(this.state={});var Da=!!this.state.target;this.detachFromTarget();Q=this.prepareTarget(Q);this.state.target=Q;Da&&this.alignWithTarget();fb.connect(Q,"onChange",this,"alignWithTarget");fb.connect(Q,"onOwnerChanged",this,"removeIfDetached")}}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:17519})}(fb.Morph);td=fb.Halo;var Xd=Ha("H",td);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof wb.HaloPropertyDisplay?wb.HaloPropertyDisplay:wb.HaloPropertyDisplay=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(Q){var Da=this.halo.state.activeButton;Q=String(Q);this.visible=!0;this.textString=Q;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(Da.bounds())&&(this.position=fb.pt(Da.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=
this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return fb.pt(25,0)}},{key:"for",value:function(Q){return Q.getSubmorphNamed(this.morphName)||Q.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:fb.Color.black.withA(.7)},borderRadius:{defaultValue:7},
padding:{defaultValue:fb.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:fb.Color.white},position:{defaultValue:this.defaultPosition}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17709,end:19047})})(fb.Label);
(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof wb.MultiSelectionTarget?wb.MultiSelectionTarget:wb.MultiSelectionTarget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(Q){return this.selectedMorphs.includes(Q)}},
{key:"alignWithSelection",value:function(){var Q=this.selectedMorphs.map(function(Da){return Da.globalBounds()}).reduce(function(Da,ib){return Da.union(ib)});this.setBounds(Q)}},{key:"onGrab",value:function(Q){this.grabbingHand=Q.hand;this.selectionGrabbed=!0;Q.hand.grab(this.selectedMorphs);fb.once(Q.hand,"dropMorphsOn",this,"onGrabEnd");fb.connect(Q.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;fb.disconnectAll(this.grabbingHand)}},{key:"updateExtent",
value:function(Q){var Da=Q.value.subPt(Q.prevValue);this.selectedMorphs.forEach(function(ib){return ib.resizeBy(Da)})}},{key:"updatePosition",value:function(Q){if(!this.selectionGrabbed){var Da=Q.value.subPt(Q.prevValue);this.selectedMorphs.forEach(function(ib){return ib.moveBy(Da)})}}},{key:"updateRotation",value:function(Q){var Da=this,ib=Q.value-Q.prevValue;this.selectedMorphs.forEach(function(Kb){var pc=Kb.origin;Kb.adjustOrigin(Kb.localize(Da.worldPoint(fb.pt(0,0))));Kb.rotation+=ib;Kb.adjustOrigin(pc)})}},
{key:"updateScale",value:function(Q){var Da=this,ib=Q.value-Q.prevValue;this.selectedMorphs.forEach(function(Kb){var pc=Kb.origin;Kb.adjustOrigin(Kb.localize(Da.worldPoint(fb.pt(0,0))));Kb.scale+=ib;Kb.adjustOrigin(pc)})}},{key:"onChange",value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),"onChange",this).call(this,Q);if(this.modifiesSelectedMorphs){switch(Q.prop){case "extent":this.updateExtent(Q);break;case "scale":this.updateScale(Q);break;case "position":this.updatePosition(Q);break;
case "rotation":this.updateRotation(Q)}return Q}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19115,end:21386})})(fb.Morph);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("HaloItem")&&"function"===typeof wb.HaloItem?wb.HaloItem:wb.HaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:fb.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:fb.pt(24,24)},halo:{}}}},{key:"for",
value:function(Q){return Q.getSubmorphNamed(this.morphName)||Q.addMorph(new this({halo:Q,name:this.morphName}))}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21550,end:22223})})(fb.Morph);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("NameHolder")&&
"function"===typeof wb.NameHolder?wb.NameHolder:wb.NameHolder=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onHoverIn",value:function(Q){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=fb.Color.orange)}},{key:"onHoverOut",value:function(Q){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
fb.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(Q){"Enter"==Q.keyCombo?(this.accept(),this.halo.focus(),Q.stop()):jc._get(Object.getPrototypeOf(uc.prototype),"onKeyDown",this).call(this,Q)}},{key:"onMouseUp",value:function(){fb.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(Q){this.nameHolder.fontColor=fb.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(Q){Q=this.nameHolder.textString;var Da=this.target.owner;this.validName=!Da||!Da.getSubmorphNamed(Q)||this.target.name==Q;fb.signal(this,"valid",[this.validName,Q])}},{key:"update",value:function(){var Q=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return Q.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(Q){if(!this.forceUniqueName||this.validName)this.target.name=Q,fb.signal(this,"active",[!1,this]),fb.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},
fill:{defaultValue:fb.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new fb.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new fb.Text({fill:fb.Color.transparent,fontColor:fb.Color.white,fontWeight:"bold",active:!0}));fb.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22258,end:24896})})(fb.Morph);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("NameHaloItem")&&"function"===typeof wb.NameHaloItem?wb.NameHaloItem:wb.NameHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,
[{key:Symbol.for("lively-instance-initialize"),value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Q);this.initComponentLink();this.initNameHolders();this.validityIndicator=fb.Icon.makeLabel("check",{fontColor:fb.Color.green,fontSize:15,padding:fb.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?fb.componentAccent:fb.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var Q=this,Da=this.halo.target;if(Da&&
!Da.isMorphSelection&&Da.master){var ib=Da.master.determineMaster(Da),Kb=ib&&!!ib.world(),pc=ib?Da.master.getWorldUrlFor(ib):"this project";Da=this.addMorph(fb.Icon.makeLabel(pc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:fb.Color.white,padding:fb.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+pc}));pc&&fb.connect(Da,"onMouseDown",function(){Kb?Q.showLocalMaster(ib):window.open(pc)})}}},{key:"showLocalMaster",value:function(Q){var Da;if(Da=Q.getWindow())Da.activate(),
Da.minimized&&(Da.minimized=!1);Q.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(Q){return{target:Q,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var Q=this;this.nameHolders=this.targets().map(function(Da){Da=new fb.NameHolder({halo:Q.halo,highlightOnHover:Da.highlightOnHover,target:Da.target});fb.connect(Da,"active",Q,"toggleActive");
fb.connect(Da,"valid",Q,"toggleNameValid");return Da});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(fb.arr.interpose(this.nameHolders,{extent:fb.pt(1,28),fill:fb.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(Q){var Da=$jscomp.makeIterator(Q);Q=Da.next().value;var ib=Da.next().value;if(this.halo.changingName!==Q){this.halo.changingName=Q;if(Da=this.get("master link"))Da.visible=Da.isLayoutable=!Q;Q?(this.nameHolders.forEach(function(Kb){return Kb!=
ib&&Kb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=fb.Color.darkGray,setTimeout(function(){return ib.nameHolder.selectAll()})):(this.fill=fb.haloBlue,this.nameHolders.forEach(function(Kb){return Kb!=ib&&Kb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(Q){var Da=$jscomp.makeIterator(Q);Q=Da.next().value;Da=Da.next().value;(this.validName=Q)?(this.conflictingMorph=null,this.borderColor=
fb.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=fb.Color.green,fb.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(Da),this.borderColor=fb.Color.red,this.validityIndicator.fontColor=fb.Color.red,this.validityIndicator.nativeCursor="pointer",fb.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){fb.arr.zip(this.targets(),this.nameHolders).map(function(Da){var ib=$jscomp.makeIterator(Da);
Da=ib.next().value.target;ib=ib.next().value;ib.target=Da;ib.update()});var Q=this.halo.innerBounds().bottomCenter().addPt(fb.pt(0,2));this.topCenter=fb.pt(Math.max(Q.x,30),Math.max(Q.y,80))}},{key:"onMouseDown",value:function(Q){var Da=this,ib=this.conflictingMorph;ib&&(this.halo.toggleMorphHighlighter(!0,ib),setTimeout(function(){return Da.halo.toggleMorphHighlighter(!1,ib)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:fb.haloBlue},borderColor:{defaultValue:fb.Color.green},layout:{initialize:function(){this.layout=new fb.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24898,end:29365})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("CloseHaloItem")&&"function"===typeof wb.CloseHaloItem?wb.CloseHaloItem:wb.CloseHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"update",value:function(){var Q=this.halo,Da=Q.target.owner;Da.undoStart("close-halo");Q.target.selectedMorphs?
Q.target.selectedMorphs.forEach(function(ib){return ib.abandon()}):Q.target.abandon();Da.undoStop("close-halo");Q.remove()}},{key:"onMouseDown",value:function(Q){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],wb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29367,end:29994})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("GrabHaloItem")&&"function"===typeof wb.GrabHaloItem?wb.GrabHaloItem:wb.GrabHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:"adjustTarget",value:function(Q,Da){fb.PropertyPath("owner.layout.autoResize").get(Q)&&!Q.globalBounds().insetBy(10).containsPoint(Da)&&(Q=Q.owner);return Q}},{key:"valueForPropertyDisplay",value:function(){var Q=this.hand,Da=this.halo,ib=this.prevDropTarget,Kb=Q.world(),pc=Q.findDropTarget(Q.globalPosition,[Da.target],function(Wb){return!Wb.isHaloItem&&!Wb.ownerChain().some(function(rd){return rd.isHaloItem||!rd.visible||0==rd.opacity})});if(pc)return pc=this.adjustTarget(pc,
Q.globalPosition),Da.toggleMorphHighlighter(pc&&pc!=Kb,pc,!0),ib&&ib!=pc&&Da.toggleMorphHighlighter(!1,ib),(this.prevDropTarget=pc)&&pc.name}},{key:"init",value:function(Q){var Da=this.halo,ib=Da.target.undoStart("grab-halo");ib&&ib.addTarget(Da.target.owner);this.hand=Q;Da.target.onGrab({halo:Da,hand:Q,isShiftDown:function(){return!1}});Da.state.activeButton=this;this.opacity=.3;var Kb=fb.connect(Q,"update",this,"update");fb.once(Da.target,"remove",function(){return Kb.disconnect()})}},{key:"stop",
value:function(Q){var Da=this.halo,ib=this.prevDropTarget,Kb=Da.target.undoInProgress,pc=Q.hand.findDropTarget(Q.hand.globalPosition,[Da.target],function(Wb){return!Wb.isHaloItem&&!Wb.ownerChain().some(function(rd){return rd.isHaloItem})});pc=this.adjustTarget(pc,Q.hand.globalPosition);fb.disconnect(Q.hand,"update",this,"update");fb.MorphHighlighter.interceptDrop(Da,pc,Da.target);Kb.addTarget(pc);pc.onDrop(Q);Da.state.activeButton=null;Da.alignWithTarget();Da.toggleMorphHighlighter(!1,ib);fb.MorphHighlighter.removeHighlighters(Da);
Da.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(Q){this.init(Q.hand)}},{key:"onDragEnd",value:function(Q){this.stop(Q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29996,end:32524})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("DragHaloItem")&&"function"===typeof wb.DragHaloItem?wb.DragHaloItem:wb.DragHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(Q){var Da=this.halo.getSubmorphNamed("mesh");if(Q)return Da=this.halo.getMesh(this.halo.target.worldPoint(fb.pt(0,0))),this.focus(),Da;Da&&Da.remove()}},{key:"init",value:function(){var Q=this.halo.target;Q.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=Q.position;
this.targetTransform=Q.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);fb.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(Q,Da,ib){Da=void 0===Da?!1:Da;ib=void 0===ib?!1:ib;this.actualPos=Q=this.actualPos.addPt(this.targetTransform.transformDirection(Q));Da&&(Q=Q.griddedBy(fb.pt(10,10)));this.halo.target.position=Q;this.updateAlignmentGuide(Da);
this.world().withTopBarDo(function(Kb){if(Kb.activeSideBars.includes("Styling Palette"))Kb.stylingPalette.onHierarchyChange()});Da||fb.showAndSnapToGuides(this.halo.target,!0,ib,5,500)}},{key:"onDragStart",value:function(Q){this.init()}},{key:"onDrag",value:function(Q){this.update(Q.state.dragDelta,Q.isAltDown(),Q.isCtrlDown())}},{key:"onDragEnd",value:function(Q){this.stop()}},{key:"onKeyUp",value:function(Q){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},
{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:32526,end:34524})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("InspectHaloItem")&&"function"===typeof wb.InspectHaloItem?wb.InspectHaloItem:wb.InspectHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){var Da=this;(function(){var ib,Kb,pc,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rd){if(1==
rd.nextAddress)return rd.yield(System.import("lively.ide/js/inspector.js"),2);ib=rd.yieldResult;Kb=ib.default;(pc=Da.world().getSubmorphsByStyleClassName("Inspector").find(function(id){return id.targetObject==Da.halo.target}))&&(Wb=pc.getWindow())?(Wb.minimized=!1,Wb.activate(),Wb.animate({center:Da.world().visibleBounds().center(),duration:200})):Kb.openInWindow({targetObject:Da.halo.target});Da.halo.remove();rd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},
{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34526,end:35443})})(fb.HaloItem);
(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("EditHaloItem")&&"function"===typeof wb.EditHaloItem?wb.EditHaloItem:wb.EditHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){var Da=this;(Q=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(ib){return ib.target==Da.halo.target}))?(Q=Q.getWindow(),
Q.bringToFront(),Q.minimized=!1,Q.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],wb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35445,end:36225})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("RotateHaloItem")&&"function"===typeof wb.RotateHaloItem?wb.RotateHaloItem:wb.RotateHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Q);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(Q){this.setProperty("angle",Q)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(Q){this.setProperty("scaleGauge",Q)}},{key:"initRotation",
get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(Q){this.setProperty("initRotation",Q)}},{key:"valueForPropertyDisplay",value:function(){var Q=this.halo.target;return this.scaleGauge?Q.scale.toFixed(4).toString():fb.num.toDegrees(Q.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(Q){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=Q;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,
this)}},{key:"initScale",value:function(Q){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=Q.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(Q){this.scaleGauge=null;Q=this.initRotation+(Q-this.angle);Q=fb.num.toRadians(fb.num.detent(fb.num.toDegrees(Q),10,45));this.halo.target.rotation=Q;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(Q){var Da=this.scaleGauge,ib=this.halo;Da||(Da=
this.scaleGauge=Q.scaleBy(1/ib.target.scale));this.angle=Q.theta();this.initRotation=ib.target.rotation;ib.target.scale=fb.num.detent(Q.dist(fb.pt(0,0))/Da.dist(fb.pt(0,0)),.1,.5);ib.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(Q){this.styleClasses=
["fas",Q?"fa-search-plus":"fa-redo"];this.tooltip=Q?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(Q){this.adaptAppearance(Q.isShiftDown());Q.isShiftDown()?this.initScale(Q.position.subPt(this.halo.target.globalPosition)):this.init(Q.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(Q){this.globalPosition=
Q.position.addPt(fb.pt(-10,-10));this.adaptAppearance(Q.isShiftDown());Q.isShiftDown()?this.updateScale(Q.position.subPt(this.halo.target.globalPosition)):this.update(Q.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(Q){this.adaptAppearance(Q.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(Q){this.adaptAppearance(Q.isShiftDown())}},{key:"onKeyUp",value:function(Q){this.adaptAppearance(Q.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:36227,end:39704})})(fb.HaloItem);fb.nameNumberRe=/(.+)([0-9]+)$/;(function(tc){var wb=
lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof wb.ComponentHaloItem?wb.ComponentHaloItem:wb.ComponentHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"updateComponentIndicator",value:function(){var Q=this.world(),Da=this.halo.target;this.halo.remove();Q.showHaloFor(Da)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var Q=
this,Da,ib,Kb,pc,Wb,rd,id,oe,Tf,Ce,$e,af;return $jscomp.asyncExecutePromiseGeneratorProgram(function(of){switch(of.nextAddress){case 1:Da=Q.halo.target;ib=Q.world();Kb=[];Da.withAllSubmorphsDoExcluding(function(pd){pd!=Da&&Kb.push(pd)},function(pd){return pd.master&&pd!=Da});pc=fb.arr.groupBy(Kb,function(pd){return pd.name});Wb={fontWeight:"normal",fontSize:16};if(!Object.values(pc).find(function(pd){return 1<pd.length})){of.jumpTo(2);break}rd=fb.arr.sum(Object.values(pc).filter(function(pd){return 1<
pd.length}).map(function(pd){return pd.length}));return of.yield(ib.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(fb.Icon.textAttribute("exclamation-triangle",{fontColor:fb.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+rd+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",
Object.assign({},Wb,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",Object.assign({},Wb,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Wb,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Wb,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(id=of.yieldResult,!id)return of.return();case 2:Tf=of.forIn(pc);case 4:if(null==(oe=Tf.getNext())){of.jumpTo(6);break}if(2>pc[oe].length){of.jumpTo(4);break}Ce=pc[oe];case 7:if(!(1<Ce.length)){of.jumpTo(4);break}$e=Ce[0];fb.show($e,!0);return of.yield(ib.prompt(["Name Collision\n",{},"The name of\n",Wb,$e.toString(),Object.assign({},Wb,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Wb),Da.name,Object.assign({},Wb,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Ce.length?"are "+(Ce.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Wb," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Wb],{input:$e.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(pd){return!Object.keys(pc).includes(pd)}}),9);case 9:af=of.yieldResult;fb.signal(ib,"hideMarkers");af&&($e.name=af);if(af in pc){of.jumpTo(7);break}else if(!af){Ce=fb.arr.rotate(Ce);of.jumpTo(7);break}fb.arr.remove(Ce,$e);of.jumpTo(7);break;case 6:return of.return(!0)}})}},{key:"onMouseDown",value:function(){var Q=this,Da,ib,Kb,pc,Wb,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(id){switch(id.nextAddress){case 1:Da=
Q.halo.target;ib=!Da.isComponent;Kb=$world.getAllNamed(Da.name).length;if(!(ib&&1<Kb)){id.jumpTo(2);break}return id.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Kb-1)+" other morph"+(2<Kb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Da.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(oe){return 0==$world.getAllNamed(oe).length}}),3);case 3:pc=id.yieldResult;if(!pc)return id.return();Da.name=pc;case 2:Wb=Da;if(!(rd=ib)){id.jumpTo(4);break}return id.yield(Q.checkForDuplicateNamesInHierarchy(),5);case 5:rd=id.yieldResult;case 4:Wb.isComponent=rd,ib?fb.arr.pushIfNotIncluded(Da.world().localComponents,Da):fb.arr.remove(Da.world().localComponents,Da),Q.world()?Q.updateComponentIndicator():Da.world().showHaloFor(Da),id.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:39745,end:45814})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("CopyHaloItem")&&"function"===typeof wb.CopyHaloItem?wb.CopyHaloItem:wb.CopyHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"init",value:function(Q){function Da(oe,Tf){return Tf.match(fb.nameNumberRe)?
Tf.replace(fb.nameNumberRe,function(Ce,$e,af){af||(af="0");for(Ce=Number(af);oe.get($e+ ++Ce););return $e+Ce}):Tf+"1"}var ib=this.halo,Kb=ib.target,pc=ib.world(),Wb=Kb instanceof fb.MultiSelectionTarget;ib.remove();fb.connect(Q,"update",this,"update");if(Wb){var rd=fb.arr.compact(Kb.selectedMorphs.map(function(oe){if(oe.canBeCopied())return oe=oe.copy(!0),pc.addMorph(oe),oe}));Wb=rd.map(function(oe){oe.name=Da(Kb,oe.name);return oe.position});rd[0].undoStart("copy-halo");pc.addMorph(ib);ib.refocus(rd);
Q.grab(ib.target);ib.target.onGrab({halo:ib,hand:Q,isShiftDown:function(){return!1}});Wb.forEach(function(oe,Tf){return rd[Tf].globalPosition=oe});ib.alignWithTarget()}else{Wb=Kb.globalPosition;var id=Kb.copy(!0);Kb.isComponent&&(id.isComponent=!1,id.withAllSubmorphsDoExcluding(function(oe){oe!=id&&oe.master||delete oe._parametrizedProps},function(oe){return oe.master&&oe!=id}),id.master=Kb);id.name=Da(Kb,Kb.name);pc.addMorph(id);id.globalPosition=Wb;id.undoStart("copy-halo");Q.grab(id);pc.addMorph(ib);
ib.visible=!1}}},{key:"stop",value:function(Q){var Da=this.halo,ib=$jscomp.makeIterator(Q.grabbedMorphs).next().value,Kb=Q.findDropTarget(Q.globalPosition,[Da.target],function(Wb){return!Wb.isHaloItem&&!Wb.ownerChain().some(function(rd){return rd.isHaloItem})}),pc=Da.target.undoInProgress;fb.disconnect(Q,"update",this,"update");pc.addTarget(Kb);Q.dropMorphsOn(Kb);Da.target.undoStop("copy-halo");Da.remove();Q.world().showHaloFor(ib)}},{key:"onDragStart",value:function(Q){this.init(Q.hand)}},{key:"onDragEnd",
value:function(Q){this.stop(Q.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var Q=this,Da,ib,Kb,pc,Wb,rd,id,oe,Tf,Ce,$e,af,of,pd,gg,Sf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nf){switch(Nf.nextAddress){case 1:Da=Q;ib=Da.halo;if(ib.nameHalo().nameHolders.find(function(Ag){return Ag.nameHolder===$world.focusedMorph}))return Nf.return();Kb=ib.target;pc=ib.world();Wb=Kb instanceof fb.MultiSelectionTarget;rd=Kb.globalBounds().topLeft();
id=Wb?Kb.selectedMorphs:[Kb];oe=id.filter(function(Ag){return!Ag.isCommentIndicator}).map(function(Ag){return Ag.copy(!0)});Tf=[];Ce='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";ib.remove();Nf.setCatchFinallyBlocks(2);$e=$jscomp.makeIterator(oe);af=$e.next();case 4:if(af.done)return Ce+="</body></html>",gg=JSON.stringify(Tf),Nf.yield(Q.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",
data:Ce},{type:"application/morphic",data:gg}]),8);of=af.value;return Nf.yield(fb.createMorphSnapshot(of,{addPreview:!1,testLoad:!1}),7);case 7:pd=Nf.yieldResult;pd.copyMeta={offset:of.worldPoint(fb.pt(0,0)).subPt(rd)};Tf.push(pd);Ce+=of.renderPreview();af=$e.next();Nf.jumpTo(4);break;case 8:Nf.leaveTryBlock(3);break;case 2:return Sf=Nf.enterCatchBlock(),pc.logError(Sf),Nf.return();case 3:pc.addMorph(ib),ib.refocus(id),ib.setStatusMessage("copied"),Nf.jumpToEnd()}})}},{key:"onMouseUp",value:function(Q){var Da=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){Q.stop();return ib.yield(Da.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:45816,end:50201})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("OriginHaloItem")&&"function"===typeof wb.OriginHaloItem?wb.OriginHaloItem:wb.OriginHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,
tc,[{key:"fill",get:function(){return fb.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return fb.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},
{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(Q){var Da=this.halo,ib=Da.target.origin,Kb=Da.target.worldPoint(ib);Q=Da.target.localize(Kb.addPt(Q)).subPt(Da.target.scroll).subPt(ib);Da.target.adjustOrigin(Da.target.origin.addPt(Q))}},{key:"onDragStart",value:function(Q){this.init()}},
{key:"onDragEnd",value:function(Q){this.stop()}},{key:"onDrag",value:function(Q){this.update(Q.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?fb.componentAccent:fb.haloBlue}}}}}],
wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:50203,end:51864})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("ResizeHandle")&&"function"===typeof wb.ResizeHandle?wb.ResizeHandle:wb.ResizeHandle=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"valueForPropertyDisplay",value:function(){var Q=this.halo.target.extent,Da=Q.y;return Q.x.toFixed(1)+"x"+Da.toFixed(1)}},{key:"positionInHalo",value:function(){var Q=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(fb.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),Q=Q.insetBy(-4));return Q.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();
return this}},{key:"onKeyUp",value:function(Q){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(Q.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(Q){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(Q.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(Q){this.init(Q.position,Q.isShiftDown())}},{key:"onDragEnd",value:function(Q){this.stop(Q.isShiftDown())}},{key:"onDrag",value:function(Q){this.update(Q.position,Q.isShiftDown(),Q.isAltDown(),Q.isCtrlDown());
this.focus()}},{key:"init",value:function(Q,Da){Da=void 0===Da?!1:Da;var ib=this.halo.target,Kb=ib.origin,pc=ib.position;ib=ib.extent;this.startPos=Q;this.startBounds=pc.subPt(Kb).extent(ib);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();Q=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=fb.num.toRadians(Q%45);this.halo.toggleDiagonal(Da,
this.corner)}},{key:"update",value:function(Q,Da,ib,Kb){Da=void 0===Da?!1:Da;ib=void 0===ib?!1:ib;Kb=void 0===Kb?!1:Kb;var pc=this.corner,Wb=this.tfm;Q=this.startPos.subPt(Q);Wb=Wb.transformDirection(fb.pt(Q.x,Q.y));ib&&(Wb=Wb.griddedBy(fb.pt(10,10)));this.halo.updateBoundsFor(pc,Da,Wb,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Da,pc);this.updateAlignmentGuide(ib);Da=[];pc=pc.toLowerCase();pc.includes("left")&&Da.push("left");pc.includes("top")&&Da.push("top");pc.includes("bottom")&&
Da.push("bottom");pc.includes("right")&&Da.push("right");fb.showAndSnapToResizeGuides(this.halo.target,Da,!0,Kb,5,200)}},{key:"stop",value:function(Q){Q=this.halo;Q.layout=this.savedLayout;Q.state.activeButton=null;Q.alignWithTarget();Q.toggleDiagonal(!1);this.updateAlignmentGuide(!1);fb.removeSnapToGuidesOf(Q.target)}},{key:"updateAlignmentGuide",value:function(Q){var Da=this.halo.getSubmorphNamed("mesh");if(Q)return Q=this.halo.target.extent,Q=fb.pt(Q.x%10,Q.y%10),Da=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),
Q),this.focus(),Da;Da&&Da.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(Q){0<Q&&(Q-=360);Q=-8-(Q/45).toFixed();0==Q&&(Q=8);return fb.arr.zip(fb.arr.rotate([["topLeft",function(Da){return Da.negated()}],["topCenter",function(Da){return Da.withX(0).negated()}],["topRight",function(Da){return Da.withX(0).negated()}],
["rightCenter",function(Da){return fb.pt(0,0)}],["bottomRight",function(Da){return fb.pt(0,0)}],["bottomCenter",function(Da){return fb.pt(0,0)}],["bottomLeft",function(Da){return Da.withY(0).negated()}],["leftCenter",function(Da){return Da.withY(0).negated()}]],Q),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",
value:function(Q){var Da=this;if(!Q.target)return[];var ib=Q.target.getGlobalTransform().getRotation();return fb.arr.compact(this.getResizeParts(ib).map(function(Kb){var pc=$jscomp.makeIterator(Kb),Wb=$jscomp.makeIterator(pc.next().value);Kb=Wb.next().value;Wb.next();Wb.next();Wb=$jscomp.makeIterator(pc.next().value);pc=Wb.next().value;Wb=Wb.next().value;return Da.for(Q,Kb,Wb,pc)})).map(function(Kb){return Kb.alignInHalo()})}},{key:"for",value:function(Q,Da,ib,Kb){var pc="Resize "+Da;Q=Q.getSubmorphNamed(pc)||
new this({name:pc,halo:Q,corner:Da,tooltip:"Resize "+Da,extent:fb.pt(10,10),borderWidth:1,borderRadius:0,borderColor:Q.target.isComponent?fb.componentAccent:fb.haloBlue,fill:fb.Color.white});return Object.assign(Q,{nativeCursor:Kb,location:ib})}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:51923,end:57221})})(fb.HaloItem);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("MenuHaloItem")&&"function"===typeof wb.MenuHaloItem?wb.MenuHaloItem:wb.MenuHaloItem=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){var Da=this,ib,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pc){if(1==pc.nextAddress)return ib=
Da.halo.target,Da.halo.remove(),pc.yield(ib.menuItems(),2);Kb=pc.yieldResult;ib.world().openMenu(Kb).hasFixedPosition=Da.halo.hasFixedPosition;pc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:57223,end:57745})})(fb.HaloItem);var ae=Ha("M",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("MorphHighlighter")&&"function"===typeof wb.MorphHighlighter?wb.MorphHighlighter:wb.MorphHighlighter=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(Q){this.layoutHalo&&this.layoutHalo.handleDrop(Q)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:fb.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:fb.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
highlightedSides:{defaultValue:[],set:function(Q){var Da=this;this.setProperty("highlightedSides",Q);this.submorphs=Q.map(function(ib){return{type:"ellipse",isHaloItem:!0,fill:fb.Color.orange,center:Da.innerBounds()[ib]()}});this.addMorph({type:"label",name:"name tag",padding:fb.Rectangle.inset(5,5,5,5),fontColor:fb.Color.white,fill:fb.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},
{key:"removeHighlighters",value:function(Q){Q=void 0===Q?$world:Q;var Da=Q._morphHighlighters,ib;for(ib in Da)Da[ib].remove();delete Q._morphHighlighters}},{key:"for",value:function(Q,Da,ib,Kb){ib=void 0===ib?!1:ib;Kb=void 0===Kb?[]:Kb;var pc=Q._morphHighlighters=Q._morphHighlighters||{};fb.properties.forEachOwn(pc,function(Wb,rd){return rd.alignWithHalo()});if(!Da||Da.ownerChain().find(function(Wb){return Wb.isHaloItem}))return null;pc[Da.id]=pc[Da.id]||new this({targetId:Da.id,halo:Q,showLayout:ib});
Q.addMorph(pc[Da.id]);pc[Da.id].highlightedSides=Kb;return pc[Da.id]}},{key:"interceptDrop",value:function(Q,Da,ib){(Q=Q._morphHighlighters=Q._morphHighlighters||{},Q[Da.id])&&Q[Da.id].handleDrop(ib)}}],wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:57934,end:61635})}(fb.Morph));fb.MorphHighlighter=
ae;fb.MorphHighlighter=ae;fb.MorphHighlighter=ae;var Bf=Ha("I",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),uc=wb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof wb.InteractiveMorphSelector?wb.InteractiveMorphSelector:wb.InteractiveMorphSelector=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q,
Da,ib){Q=void 0===Q?$world:Q;this.controllingMorph=void 0===Da?null:Da;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=Q;this.filterFn=ib;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var Q=fb.promise.deferred();Q.promise.resolve=Q.resolve;this.whenDone=Q.promise;this.selectorMorph=fb.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();fb.connect(this.world.firstHand,"position",this,"scanForTargetAt");
fb.once(this.selectorMorph,"onMouseDown",this,"selectTarget");fb.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var Q=this.world.firstHand.globalPosition;this.selectorMorph.center=Q;this.selectorMorph.focus();var Da=this.selectorMorph.morphBeneath(Q),ib,Kb=this.possibleTarget,pc=this.controllingMorph,Wb=this.filterFn,rd=this.world,id=this.morphHighlighter;for(id==Da?Da=
id.morphBeneath(Q):Da&&Da.isEpiMorph&&(Da=Da.morphBeneath(Q));Da&&(ib=[Da].concat($jscomp.arrayFromIterable(Da.ownerChain())).find(function(oe){return!oe.visible}));)Da=ib=ib.morphBeneath(Q);if(Da&&Wb&&!Wb(Da))for(;Da&&![Da].concat($jscomp.arrayFromIterable(Da.ownerChain())).find(Wb);)Da=Da.morphBeneath(Q);!Da||Da==Kb||pc&&Da.ownerChain().includes(pc.getWindow())||(id&&id.deactivate(),(this.possibleTarget=Kb=Da)&&!Kb.isWorld&&(Q=this.morphHighlighter=fb.MorphHighlighter.for(rd,Da))&&Q.show())}},{key:"selectTarget",
value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){fb.MorphHighlighter.removeHighlighters(this.world);fb.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(Q,Da,ib){Q=new this(Q,Da,ib);Q.selectNewTarget();return Q.whenDone}}],
wb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:61644,end:64399})}(void 0));fb.InteractiveMorphSelector=Bf;fb.InteractiveMorphSelector=Bf;fb.InteractiveMorphSelector=Bf;fb.default=td;var ie=lively.FreezerRuntime.recorderFor("lively.ide/index.js");ie.info="import via sub modules";ie.info=
"import via sub modules";ie.info="import via sub modules";td=Ha("v",{});ie.valueWidgets=td;ie.valueWidgets=td;ie.valueWidgets=td;var Zf=Ha("p",{});ie.popovers=Zf;ie.popovers=Zf;ie.popovers=Zf;var Hg=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Hg.Morph=Ff;Hg.VerticalLayout=Ta;Hg.StyleSheet=xa;Hg.Icon=Ze;Hg.CustomLayout=wa;Hg.Color=kc;Hg.rect=Pc;Hg.pt=Ab;Hg.connect=Bc;Hg.Path=Zc;Hg.duration=300;ie=Ha("P",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),
uc=wb.hasOwnProperty("Popover")&&"function"===typeof wb.Popover?wb.Popover:wb.Popover=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"relayout",value:function(Q){var Da=this.get("body"),ib=this.get("arrow"),Kb=this.get("close button");ib=ib.height;Q?(Da.animate({topCenter:Hg.pt(0,ib),duration:200}),Kb.animate({topRight:Da.topRight.addXY(8,-8),duration:200})):(Da.topCenter=Hg.pt(0,ib),Kb.topRight=
Da.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Hg.pt(200,200),fill:Hg.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},
get:function(){return this.get("body").submorphs[0]},set:function(Q){var Da=this;this.get("body").addMorph(Q);this.whenRendered().then(function(){return Da.relayout()})}},submorphs:{initialize:function(){var Q=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Hg.pt(0,0),borderColor:Hg.Color.transparent,vertices:[Hg.pt(-10,0),Hg.pt(0,-15),Hg.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Hg.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,
extent:Hg.pt(16,16),borderColor:Hg.Color.transparent}];var Da=$jscomp.makeIterator(this.submorphs);Da.next();var ib=Da.next().value;Da=Da.next().value;Hg.connect(Da,"fire",this,"close");Hg.connect(ib,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return Q.animated=!0},1E3)}}}}}],wb,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Hg.Morph));Hg.Popover=ie;Hg.Popover=ie;Hg.Popover=ie;var Wc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Wc.Morph=Ff;Wc.TilingLayout=Qa;Wc.morph=ac;Wc.Label=je;Wc.HorizontalLayout=Ae;Wc.Icon=Ze;Wc.InputLine=Eb;Wc.config=rc;Wc.connect=Bc;Wc.signal=ob;Wc.Color=kc;Wc.LinearGradient=Gc;Wc.pt=Ab;Wc.rect=Pc;Wc.num=Kd;Wc.obj=Ld;Wc.popovers=Zf;Wc.ValueScrubber=qb;Wc.Popover=ie;(function(tc){var wb=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof wb.ContextSensitiveWidget?wb.ContextSensitiveWidget:wb.ContextSensitiveWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Wc.Color.transparent},
isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?Wc.Color.white:Wc.Color.black}},layout:{initialize:function(){this.layout=new Wc.HorizontalLayout}},context:{serialize:!1}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(Wc.Morph);
(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("ShortcutWidget")&&"function"===typeof wb.ShortcutWidget?wb.ShortcutWidget:wb.ShortcutWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){Q.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(Q){this.setProperty("title",Q);this.getSubmorphNamed("valueString").value=Q}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(Q){this.submorphs.forEach(function(Da){return Da.fontColor=Q})}},submorphs:{initialize:function(){this.submorphs=[Wc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],
fontSize:15,padding:Wc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Wc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:2443,end:3793})})(Wc.ContextSensitiveWidget);Zf=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("LayoutWidget")&&"function"===typeof wb.LayoutWidget?wb.LayoutWidget:wb.LayoutWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":
"No Layout"}},{key:"openPopover",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=new Wc.popovers.LayoutPopover({hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),container:Q.context}),ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"layoutChanged",Q,"layoutChanged");Wc.signal(Q,"openWidget",Da);ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},
{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(Wc.ShortcutWidget);
Wc.LayoutWidget=Zf;Wc.LayoutWidget=Zf;Wc.LayoutWidget=Zf;Zf=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("ColorWidget")&&"function"===typeof wb.ColorWidget?wb.ColorWidget:wb.ColorWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"relayout",value:function(Q){Q?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():
this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var Q=this.color;if(2*Q.stops.length==this.submorphs.length-3){var Da;for(Da in this.color.stops){var ib=Q.stops[Da];var Kb=ib.color,pc=ib.offset,Wb=$jscomp.makeIterator(this.submorphs[2+2*Da].submorphs).next().value;ib=this.submorphs[3+2*Da];Wb.fill=Kb;ib.value=(100*pc).toFixed()+"%"+(Da<Q.stops.length-1?",":"")}}else this.submorphs=
this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Wc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Wc.pt(15,
15),fill:Wc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Wc.pt(5,7.5),fill:Wc.Color.white,borderColor:Wc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Wc.pt(0,0),Wc.pt(10,10)],borderColor:Wc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Wc.pt(15,15),fill:Wc.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Wc.pt(5,7.5),fill:this.color,borderColor:Wc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Wc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var Q=this.color,Da=[{type:"label",padding:Wc.rect(0,0,5,0),value:"linearGradient"==Q.type?Wc.num.toDegrees(Q.vectorAsAngle()).toFixed()+"\u00b0,":""}],ib;for(ib in Q.stops){var Kb=Q.stops[ib],pc=Kb.color;Kb=Kb.offset;Da.push({extent:Wc.pt(this.fontSize,
this.fontSize),fill:Wc.Color.transparent,layout:new Wc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:pc}]});Da.push({type:"label",padding:Wc.rect(0,0,5,0),value:(100*Kb).toFixed()+"%"+(ib<Q.stops.length-1?",":"")})}return Da}},{key:"onMouseDown",value:function(Q){this.openFillEditor()}},{key:"update",value:function(Q){this.color=Q}},{key:"openFillEditor",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=
new Wc.popovers.FillPopover({hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),handleMorph:Q.context,fillValue:Q.color,title:"Fill Control",gradientEnabled:Q.gradientEnabled}),ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"fillValue",Q,"update");Wc.signal(Q,"openWidget",Da);ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=
new Wc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Wc.Color.white},nonSelectionFontColor:{defaultValue:Wc.Color.black},color:{defaultValue:Wc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(Q){this.getProperty("isSelected")!=Q&&(this.getSubmorphNamed("valueString").fontColor=Q?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",Q))}},submorphs:{after:["nonSelectionFontColor",
"selectionFontColor"],initialize:function(){Wc.connect(this,"color",this,"relayout",{converter:function(Q,Da){return(Da&&Da.isColor)!=(Q&&Q.isColor)}});this.relayout(!0)}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4687,end:10140})}(Wc.ContextSensitiveWidget);Wc.ColorWidget=
Zf;Wc.ColorWidget=Zf;Wc.ColorWidget=Zf;Zf=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("BooleanWidget")&&"function"===typeof wb.BooleanWidget?wb.BooleanWidget:wb.BooleanWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},
{key:"properties",get:function(){return{fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(Q){this.setProperty("boolean",Q);this.value=Wc.obj.safeToString(Q);this.fontColor=this.boolean?Wc.Color.green:Wc.Color.red}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10149,end:10634})}(Wc.Label);Wc.BooleanWidget=Zf;Wc.BooleanWidget=Zf;Wc.BooleanWidget=Zf;Zf=Ha("N",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("NumberWidget")&&"function"===typeof wb.NumberWidget?wb.NumberWidget:wb.NumberWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),
"onMouseDown",this).call(this,Q);"up"==Q.targetMorph.name&&this.increment();"down"==Q.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Wc.obj.dissoc(jc._get(Object.getPrototypeOf(uc.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(Q,Da){Da=void 0===Da?!0:Da;this.setProperty("number",Da?Q/this.scaleFactor:Q);Wc.signal(this,"number",this.number);this.relayout(Da)}},{key:"relayoutButtons",value:function(){var Q=this.getSubmorphNamed("up"),Da=this.getSubmorphNamed("down");
this.getSubmorphNamed("value");Q.height=Da.height=(this.height-2)/2;Q.width=Da.width=20}},{key:"onChange",value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),"onChange",this).call(this,Q);"extent"!=Q.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(Q){var Da=this.getSubmorphNamed("value");Da&&(this.autofit?(Q||(Da.value=this.number*this.scaleFactor),Da.fit(),this.height=Da.height,this.width=Da.width+20):Q||(Da.width=this.width-20),this.relayoutButtons(),Q||(Da.value=
Wc.num.roundTo(this.number*this.scaleFactor,1),Da.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Da.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Da.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},
{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(Q){this.setProperty("autofit",Q);this.getSubmorphNamed("value").scaleToBounds=!Q}},number:{defaultValue:0,after:["unit","autofit"],set:function(Q){this.setProperty("number",Q);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(Q){this.setProperty("floatingPoint",
Q);this.get("value").floatingPoint=Q},get:function(){var Q=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&Q&&!!Q[1]}},padding:{isStyleProp:!0,defaultValue:Wc.rect(5,3,0,0),after:["submorphs"],set:function(Q){this.setProperty("padding",Q);this.getSubmorphNamed("value").padding=Q}},extent:{defaultValue:Wc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,
get:function(){return this.get("value").baseFactor},set:function(Q){this.get("value").baseFactor=Q}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:Wc.Color.rgbHex("#0086b3"),set:function(Q){this.setProperty("fontColor",Q)}},isSelected:{set:function(Q){this.getProperty("isSelected")!=Q&&(Q?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),
this.addStyleClass("unselected")),this.setProperty("isSelected",Q))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(Q){this.setProperty("fontFamily",Q)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(Q){this.setProperty("fontSize",Q)}},layout:{initialize:function(){this.layout=new Wc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var Q=this;this.submorphs=[new Wc.ValueScrubber({name:"value",unit:this.unit,
floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),Wc.Icon.makeLabel("sort-up",{name:"up"}),Wc.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Wc.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return Q.relayout()})}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10643,end:16590})}(Wc.Morph));Wc.NumberWidget=Zf;Wc.NumberWidget=Zf;Wc.NumberWidget=Zf;ie=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("ShadowWidget")&&"function"===typeof wb.ShadowWidget?wb.ShadowWidget:wb.ShadowWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.openPopover()}},
{key:"openPopover",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=new Wc.popovers.ShadowPopover({hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),shadowValue:Q.shadowValue}),ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"shadowValue",Q,"shadowValue");Wc.connect(Q,"shadowValue",Q,"update");Wc.signal(Q,"openWidget",Da);ib.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var Q=this.shadowValue,Da=Q.blur,ib=Q.spread,Kb=Q.distance;Q=Q.color;var pc=$jscomp.makeIterator(this.submorphs),Wb=pc.next().value,rd=pc.next().value;rd=$jscomp.makeIterator(rd.submorphs).next().value;
pc=pc.next().value;Wb.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";rd.fill=Q;pc.value=", "+Da+"px, "+Kb+"px, "+ib+"px)"}},{key:"initShadowDisplay",value:function(){var Q=this.shadowValue,Da=Q.blur,ib=Q.spread,Kb=Q.distance;Q=Q.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Wc.morph({fill:Wc.Color.transparent,extent:Wc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Wc.pt(this.fontSize,
this.fontSize),position:Wc.pt(2,2),fill:Q,borderColor:Wc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Da+"px, "+Kb+"px, "+ib+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(Q){this.setProperty("shadowValue",Q);this.renderShadowDisplay()}},fill:{defaultValue:Wc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(Q){this.submorphs.forEach(function(Da){return Da.fontColor=Q})}},isSelected:{defaultValue:!1,set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?Wc.Color.white:Wc.Color.black}},layout:{initialize:function(){this.layout=new Wc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(Wc.Morph);Wc.ShadowWidget=ie;Wc.ShadowWidget=ie;Wc.ShadowWidget=ie;ie=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("PointWidget")&&"function"===typeof wb.PointWidget?wb.PointWidget:wb.PointWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=new Wc.popovers.PointPopover({pointValue:Q.pointValue,hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition})}),ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"pointValue",Q,"pointValue");Wc.signal(Q,"openWidget",Da);ib.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Wc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Wc.Color.black},fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(Q){var Da=Wc.Color.rgbHex("#0086b3");this.setProperty("pointValue",Q);this.textAndAttributes=["pt(",null,Q.x.toFixed(),{fontColor:Da},",",{},Q.y.toFixed(),{fontColor:Da},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(Wc.Label);Wc.PointWidget=ie;Wc.PointWidget=ie;Wc.PointWidget=ie;ie=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("PaddingWidget")&&"function"===typeof wb.PaddingWidget?wb.PaddingWidget:wb.PaddingWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=new Wc.popovers.RectanglePopover({hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition}),rectangle:Q.rectangle}),Da.relayout(),ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"rectangle",Q,"rectangle");Wc.signal(Q,"openWidget",
Da);ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Wc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?Wc.Color.white:Wc.Color.black}},rectangle:{defaultValue:Wc.rect(0),set:function(Q){this.setProperty("rectangle",
Q);this.value=Wc.obj.safeToString(Q)}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(Wc.Label);Wc.PaddingWidget=ie;Wc.PaddingWidget=ie;Wc.PaddingWidget=ie;ie=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("IconWidget")&&
"function"===typeof wb.IconWidget?wb.IconWidget:wb.IconWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"onMouseDown",value:function(Q){this.openPopover()}},{key:"openPopover",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=new Wc.popovers.IconPopover({hasFixedPosition:!!Q.ownerChain().find(function(Kb){return Kb.hasFixedPosition})}),
ib.yield(Da.fadeIntoWorld(Q.globalBounds().center()),2);Wc.connect(Da,"select",Q,"iconValue",{converter:function(Kb){return Kb&&Wc.Icon.makeLabel(Kb).value},varMapping:{Icon:Wc.Icon}});Wc.signal(Q,"openWidget",Da);ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Wc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(Q){this.value=Q||"No Icon"}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(Wc.Label);Wc.IconWidget=ie;Wc.IconWidget=ie;Wc.IconWidget=ie;ie=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),uc=wb.hasOwnProperty("StringWidget")&&
"function"===typeof wb.StringWidget?wb.StringWidget:wb.StringWidget=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"truncate",value:function(Q){return 200<Q.length?Q.slice(0,20)+"...":Q}},{key:"onFocus",value:function(Q){var Da=this,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return jc._get(Object.getPrototypeOf(uc.prototype),"onFocus",Da).call(Da,Q),Da.readOnly?
Kb.return():Da.stringTooLong?Kb.yield(Da.world().editPrompt("edit string",{requester:Da,input:Da.stringValue}),2):(Da.borderColor=Wc.Color.white.withA(.9),Da.textString=Da.stringValue,Kb.return());ib=Kb.yieldResult;if("string"===typeof ib)Da.onInput(ib);Kb.jumpToEnd()})}},{key:"onBlur",value:function(Q){jc._get(Object.getPrototypeOf(uc.prototype),"onBlur",this).call(this,Q);this.readOnly||(this.borderColor=Wc.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(Q){this.owner.focus();
Wc.signal(this,"inputAccepted",Q);this.stringValue=Q}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Wc.Color.transparent},fontColor:{defaultValue:Wc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Wc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Wc.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(Q){this.setProperty("stringValue",Q);this.textString=this.truncate(Q);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(Q){this.setProperty("isSelected",Q);this.fontColor=Q?Wc.Color.white:Wc.Color.blue}}}}}],wb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(Wc.InputLine);Wc.StringWidget=ie;Wc.StringWidget=ie;Wc.StringWidget=ie;Wc.valueWidgets=td;Object.assign(Wc.valueWidgets,{NumberWidget:Wc.NumberWidget,StringWidget:Wc.StringWidget,IconWidget:Wc.IconWidget,PaddingWidget:Wc.PaddingWidget,ShadowWidget:Wc.ShadowWidget,PointWidget:Wc.PointWidget,BooleanWidget:Wc.BooleanWidget,LayoutWidget:Wc.LayoutWidget,
ColorWidget:Wc.ColorWidget});var vc=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");vc.Ellipse=sb;vc.Icon=Ze;vc.Morph=Ff;vc.Path=pe;vc.Text=Dc;vc.HorizontalLayout=Ae;vc.VerticalLayout=Ta;vc.morph=ac;vc.Color=kc;vc.pt=Ab;vc.rect=Pc;vc.Rectangle=Uc;vc.arr=rb;vc.connect=Bc;vc.disconnect=le;vc.LabeledCheckBox=kb;vc.DropDownSelector=ha;vc.Button=Pa;vc.Menu=T;vc.NumberWidget=Zf;vc.InteractiveMorphSelector=Bf;vc.easings=Jd;(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
uc=wb.hasOwnProperty("AxisHalo")&&"function"===typeof wb.AxisHalo?wb.AxisHalo:wb.AxisHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){var Da=Q.halo;Q=Q.targetAxis;jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:vc.Color.transparent,halo:Da,targetAxis:Q,container:Da.container});
this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(Q){this._forceMenuHidden=Q;this.axisMenu.visible=!Q}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},
{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(Q){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},
{key:"proportionSlider",value:function(){var Q=this,Da=this,ib=this.proportionViewer();return this.halo.addGuide(new vc.Morph({nativeCursor:this.getResizeCursor(),fill:vc.Color.transparent,submorphs:[this.devider(),ib],alignWithTarget:function(){this.setBounds(Da.getProportionSliderBounds(this))},onDragStart:function(){ib.visible=!0},onDrag:function(Kb){Q.adjustStretch(Q.getDelta(Kb));Q.halo.alignWithTarget()},onDragEnd:function(){ib.visible=!1}}))}},{key:"devider",value:function(){return new vc.Morph({visible:!this.lastAxis,
fill:vc.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var Q=this,Da=this,ib=this.minSpaceVisualizer(),Kb=this.minViewer();return this.halo.addGuide(new vc.Ellipse({nativeCursor:this.getResizeCursor(),fill:vc.Color.green,extent:vc.pt(10,10),visible:!1,submorphs:[ib,Kb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=Da.getMinSliderPosition()},requestToShow:function(){this.visible=!Da.targetAxis.fixed},requestToHide:function(){this.active?
this.shouldHide=!0:this.visible=!1},onDragStart:function(){Da.forceMenuHidden=!0;Kb.visible=!0;this.active=ib.visible=!0},onDrag:function(pc){Q.targetAxis.min+=-Q.getDelta(pc);Q.halo.alignWithTarget()},onDragEnd:function(){Da.forceMenuHidden=!1;Kb.visible=!1;this.active=ib.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var Q=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+Q.targetAxis.min.toFixed()+
"px !"}})}},{key:"minSpaceBorder",value:function(){return new vc.Path(Object.assign({position:vc.pt(-1,-1),borderStyle:"dashed",borderColor:vc.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var Q=this,Da=this.minSpaceBorder();return this.halo.addGuide(new vc.Morph({fill:vc.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Da],alignWithTarget:function(){this.extent=Q.getMinSpaceExtent();this.topLeft=vc.pt(5,5)}}))}},{key:"axisMenu",value:function(){var Q=
this.lockButton(),Da=this.menuButton(),ib=this;return new vc.Morph({layout:this.getMenuLayout(),submorphs:[Q,Da],fill:vc.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(ib.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var Q=this;return this.halo.addGuide(new vc.Morph({fill:vc.Color.transparent,extent:vc.pt(25,25),submorphs:[{center:vc.pt(12.5,12.5),fill:vc.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){Q.targetAxis.fixed?
(this.fontColor=vc.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=vc.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){Q.targetAxis.fixed=!Q.targetAxis.fixed;Q.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var Q=this,Da=this;return new vc.Morph({fill:vc.Color.transparent,extent:vc.pt(25,25),submorphs:[{fill:vc.Color.transparent,styleClasses:["fa","fa-cog"],center:vc.pt(12.5,
12.5)}],onMouseDown:function(ib){Da.forceMenuVisible=!0;this.addMorph(ib.state.menu=new vc.Menu({position:vc.pt(15,15),items:[["Remove "+Da.subject,function(){Q.targetAxis.remove();Q.halo.initGuides();Q.halo.alignWithTarget()}],["Insert "+Da.subject+" before",function(){Q.targetAxis.addBefore();Q.halo.initGuides();Q.halo.alignWithTarget()}],["Insert "+Da.subject+" after",function(){Q.targetAxis.addAfter();Q.halo.initGuides();Q.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(Q){var Da=
Q.position;Q=Q.alignWithTarget;return this.halo.addGuide(new vc.Text({styleClasses:["Halo"],padding:vc.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:vc.Color.white,fill:vc.Color.black.withA(.5),position:Da,alignWithTarget:Q,readOnly:!0}))}},{key:"proportionViewer",value:function(){var Q=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=Q.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],
wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(vc.Morph);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("RowHalo")&&"function"===typeof wb.RowHalo?wb.RowHalo:wb.RowHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){var Da=Q.row;Q=Q.halo;jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:Q.target.row(Da),halo:Q})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(Q){this.targetAxis.height+=Q}},{key:"getDelta",value:function(Q){return Q.state.dragDelta.y}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return vc.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return vc.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(Q){return this.targetAxis.length>Q.height?vc.pt(2,5):vc.pt(26,10)}},{key:"getMenuLayout",value:function(){return new vc.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return vc.pt(50,
20)}},{key:"getMinSliderPosition",value:function(){return vc.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return vc.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:vc.pt(this.container.width+50,2),vertices:[vc.pt(0,1),vc.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return vc.pt(40,20)}},{key:"getProportionSliderBounds",value:function(Q){return vc.pt(0,Q.owner.height-5).extent(vc.pt(40,
10))}},{key:"getDeviderBounds",value:function(){return vc.pt(15,4).extent(vc.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(vc.AxisHalo);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
uc=wb.hasOwnProperty("ColumnHalo")&&"function"===typeof wb.ColumnHalo?wb.ColumnHalo:wb.ColumnHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:Symbol.for("lively-instance-initialize"),value:function(Q){var Da=Q.col;Q=Q.halo;jc._get(Object.getPrototypeOf(uc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:Q.target.col(Da),halo:Q})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(Q){this.targetAxis.width+=Q}},{key:"getDelta",value:function(Q){return Q.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return vc.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return vc.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(Q){return this.targetAxis.length>Q.width?vc.pt(5,3):vc.pt(8,26)}},{key:"getMenuLayout",value:function(){return new vc.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return vc.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return vc.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return vc.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:vc.pt(2,this.container.height+50),vertices:[vc.pt(1,0),vc.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return vc.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(Q){return vc.pt(Q.owner.width-5,0).extent(vc.pt(10,40))}},{key:"getDeviderBounds",value:function(){return vc.pt(4,15).extent(vc.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9210,end:10442})})(vc.AxisHalo);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("CellGuide")&&"function"===typeof wb.CellGuide?wb.CellGuide:wb.CellGuide=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"menuItems",value:function(){var Q=this,Da=vc.Icon.textAttribute("check-square-o"),ib=vc.Icon.textAttribute("square-o");
Da[1].textStyleClasses.push("annotation");ib[1].textStyleClasses.push("annotation");ib[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ib:Da)),function(){Q.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Da:ib)),function(){Q.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new vc.Rectangle).sides),$jscomp.arrayFromIterable((new vc.Rectangle).corners)).map(function(Kb){return[[Kb,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(Q.cellGroup.align==Kb?Da:ib),["  ",null]),function(){return Q.cellGroup.align=Kb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Kb=Q.cellGroup.morph;Kb&&(Q.world().firstHand.grab(Kb),Q.world().firstHand.longClickGrab=!0,Kb.position=vc.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],wb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(vc.Morph);(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("LayoutHalo")&&"function"===typeof wb.LayoutHalo?wb.LayoutHalo:wb.LayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(uc,tc,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:vc.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(vc.Morph);td=Ha("G",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof wb.GridLayoutHalo?wb.GridLayoutHalo:wb.GridLayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return jc(uc,tc,[{key:"previewDrop",value:function(Q){1>Q.length||(Q=this.cellGuides.find(function(Da){return Da.fullContainsWorldPoint($world.firstHand.position)}),Q!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=Q)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(Q){var Da=this;this.currentCell&&Q.whenRendered().then(function(){return Da.currentCell.cellGroup.morph=Q})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var Q=this.target,Da=new vc.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:vc.Color.transparent,checked:Q.compensateOrigin}),ib=new vc.LabeledCheckBox({label:"Resize Submorphs",fill:vc.Color.transparent,name:"fitToCell",checked:Q.fitToCell});vc.connect(Da,"checked",Q,"compensateOrigin");vc.connect(ib,"checked",Q,"fitToCell");vc.connect(Da,"checked",this,"alignWithTarget");return[Da,ib]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();vc.arr.reverse(this.guides).forEach(function(Q){return Q.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var Q=this;vc.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Da){return Da.cellGroup})).forEach(function(Da){return Q.addMorph(Q.cellGuide(Da))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var Q=this,Da=this.addMorph({fill:vc.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(ib){Da.addMorph(Q.cellGuide(ib))});this.cellGuides=Da.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(Q){Q.isHaloItem=!0;this.guides.push(Q);return Q}},{key:"initRowGuides",
value:function(){var Q=this,Da=this;this.addGuide(this.addMorph(new vc.Morph({width:25,fill:vc.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:vc.pt(-5,0),alignWithTarget:function(){this.height=Da.container.height}})));vc.arr.range(0,this.target.rowCount-1).forEach(function(ib){Q.addMorph(new vc.RowHalo({row:ib,halo:Q}))})}},{key:"initColumnGuides",value:function(){var Q=this,Da=this;this.addGuide(this.addMorph(new vc.Morph({height:25,fill:vc.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:vc.pt(0,-5),alignWithTarget:function(){this.width=Da.container.width}})));vc.arr.range(0,this.target.columnCount-1).forEach(function(ib){Q.addMorph(new vc.ColumnHalo({col:ib,halo:Q}))})}},{key:"resizer",value:function(){var Q=this;return this.addGuide(new vc.Morph({fill:vc.Color.transparent,extent:vc.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Da){Q.container.resizeBy(Da.state.dragDelta);Q.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
Q.extent}}))}},{key:"cellResizer",value:function(Q,Da){var ib=this,Kb="topLeft"==Da?"bottomRight":"topLeft";return new vc.Ellipse({borderWidth:1,visible:!1,borderColor:vc.Color.black,nativeCursor:"nwse-resize",removeCell:function(pc){Q.disconnect(pc);ib.alignWithTarget()},addCell:function(pc){Q.connect(pc);ib.alignWithTarget()},start:function(){this.fixpointCell=Q[Kb];this.draggedDelta=Q.bounds().partNamed(Da);this.debugMorph=ib.addMorph(new vc.Morph({fill:vc.Color.orange.withA(.5)}))},update:function(pc){var Wb=
this;this.draggedDelta=this.draggedDelta.addPt(pc);var rd=vc.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(rd);ib.cells.forEach(function(id){var oe=rd.intersection(id.bounds()).area()/id.bounds().area();Q.includes(id)&&.1>oe&&Wb.removeCell(id);!Q.includes(id)&&oe>1/3&&Wb.addCell(id)})},onDragEnd:function(pc){this.debugMorph.remove()},onDragStart:function(pc){this.start(pc.position)},onDrag:function(pc){this.update(pc.state.dragDelta)}})}},{key:"cellGuide",
value:function(Q){var Da=this,ib=this.cellResizer(Q,"topLeft"),Kb=this.cellResizer(Q,"bottomRight");return this.addGuide(new vc.CellGuide({cellGroup:Q,bounds:Q.bounds(),fill:vc.Color.transparent,borderColor:vc.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[ib,Kb],onMouseDown:function(pc){this.becomeActive()},deactivate:function(){this.borderColor=vc.Color.orange;this.fill=vc.Color.transparent;this.submorphs.forEach(function(pc){pc.visible=!1})},becomeActive:function(){Da.guides.forEach(function(pc){pc.isCell&&
pc.deactivate()});this.borderColor=vc.Color.rgbHex("#1565C0");this.fill=vc.Color.rgbHex("#1565C0").withA(.3);Da.addMorph(this.remove());this.submorphs.forEach(function(pc){pc.visible=!0})},startPreview:function(pc){this.fill=vc.Color.orange.withA(.7)},stopPreview:function(pc){this.fill=vc.Color.transparent},onDrop:function(pc){var Wb=$jscomp.makeIterator(pc.hand.grabbedMorphs).next().value;pc.hand.dropMorphsOn(Da.container);Q.morph=Wb},alignWithTarget:function(){Q.bounds().isNonEmpty()?(this.setBounds(Q.bounds()),
ib.center=this.innerBounds().topLeft(),Kb.center=this.innerBounds().bottomRight()):(vc.arr.remove(Da.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:vc.Color.transparent},cells:{derived:!0,get:function(){return vc.arr.flatten(this.target.col(0).items.map(function(Q){return Q.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],wb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(vc.LayoutHalo));vc.GridLayoutHalo=td;vc.GridLayoutHalo=td;vc.GridLayoutHalo=td;Zf=function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof wb.TilingLayoutHalo?wb.TilingLayoutHalo:wb.TilingLayoutHalo=
function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"remove",value:function(){jc._get(Object.getPrototypeOf(uc.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(Q){}},{key:"removePreviews",value:function(){this.previews.forEach(function(Q){return Q.clear()})}},
{key:"previewDrop",value:function(Q){var Da=this;0<this.previews.length||(this.previews=Q.map(function(ib){return Da.container.addMorph({type:vc.DropPreview,bounds:ib.bounds()})}),this.previews.forEach(function(ib){ib.step()}))}},{key:"updateSpacing",value:function(Q){this.target.spacing=Q}},{key:"updateAxis",value:function(Q){this.target.axis=Q}},{key:"updateAlign",value:function(Q){this.target.align=Q}},{key:"optionControls",value:function(){var Q=this.target,Da=new vc.DropDownSelector({borderRadius:2,
padding:3,selectedValue:Q.axis,values:["row","column"]}),ib=new vc.DropDownSelector({borderRadius:2,padding:3,selectedValue:Q.align,values:["left","center"]});Q=new vc.NumberWidget({min:0,number:Q.spacing,padding:vc.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:vc.Color.gray,unit:"px"});vc.connect(Q,"update",this,"updateSpacing");vc.connect(ib,"update",this,"updateAlign");vc.connect(Da,"update",this,"updateAxis");var Kb={type:"label",padding:vc.rect(0,5,5,5),fill:vc.Color.transparent,fontColor:vc.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},Kb,{textString:"Submorph Spacing"}),Q],[Object.assign({},Kb,{textString:"Tiling Align"}),ib],[Object.assign({},Kb,{textString:"Tiling Axis"}),Da]].map(function(pc){return{submorphs:pc,fill:null,layout:new vc.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:vc.Color.transparent},previews:{defaultValue:[]}}}}],wb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(vc.LayoutHalo);vc.TilingLayoutHalo=Zf;vc.TilingLayoutHalo=Zf;vc.TilingLayoutHalo=Zf;(function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("DropPreview")&&"function"===typeof wb.DropPreview?wb.DropPreview:wb.DropPreview=function(Q){Q&&
Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var Q=this,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return Da=vc.easings.inOutQuad,ib.yield(Q.animate({opacity:.5,duration:(Q.pulseDuration-10)/2,easing:Da}),2);if(3!=ib.nextAddress)return ib.yield(Q.animate({opacity:1,duration:(Q.pulseDuration-
10)/2,easing:Da}),3);Q.stopped||Q.step();ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:vc.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:vc.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(vc.Morph);Zf=Ha("F",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof wb.FlexLayoutHalo?wb.FlexLayoutHalo:wb.FlexLayoutHalo=function(Q){Q&&
Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"handleDrop",value:function(Q){}},{key:"previewDrop",value:function(Q){var Da=this;0<this.previews.length||(this.previews=Q.map(function(ib){return Da.container.addMorph({type:vc.DropPreview,position:Da.container.localize(Da.world().firstHand.position),extent:ib.bounds().extent()})}),this.previews.forEach(function(ib){ib.step()}))}},{key:"remove",value:function(){jc._get(Object.getPrototypeOf(uc.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(Q){return Q.clear()})}},{key:"onDrop",value:function(Q){this.removePreviews();Q.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(Q){Q&&(this.originalExtent=this.container.extent);this.target.autoResize=Q;Q||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(Q){this.target.resizeSubmorphs=Q;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(Q){this.target.align=Q}},{key:"updateDirectionPolicy",value:function(Q){this.target.direction=Q}},{key:"updateSpacing",value:function(Q){this.target.spacing=Q}},{key:"optionControls",value:function(){var Q=this.target,Da=Q.possibleAlignValues?{fill:vc.Color.transparent,layout:new vc.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new vc.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:Q.align,values:Q.possibleAlignValues})]}:null,ib=Q.possibleDirectionValues?{fill:vc.Color.transparent,layout:new vc.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new vc.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:Q.direction,values:Q.possibleDirectionValues})]}:
null,Kb=new vc.NumberWidget({fill:vc.Color.white,borderWidth:1,borderRadius:4,padding:vc.rect(5,4,0,0),borderColor:vc.Color.gray,min:0,number:Q.spacing,unit:"px"}),pc=new vc.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:vc.Color.transparent,checked:Q.autoResize});Q=new vc.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:vc.Color.transparent,checked:Q.resizeSubmorphs});vc.connect(Kb,"update",this,"updateSpacing");vc.connect(pc,
"checked",this,"updateAutoResizePolicy");vc.connect(Q,"checked",this,"updateResizeSubmorphsPolicy");Da&&vc.connect(Da.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");ib&&vc.connect(ib.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[pc,Q].concat($jscomp.arrayFromIterable([Da,ib].filter(Boolean)),[{fill:vc.Color.transparent,layout:new vc.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:vc.Color.gray.darker(),padding:vc.rect(0,5,5,5)},Kb]}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:vc.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:22543,end:26761})}(vc.LayoutHalo));vc.FlexLayoutHalo=Zf;vc.FlexLayoutHalo=Zf;vc.FlexLayoutHalo=Zf;ie=Ha("c",function(tc){var wb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),uc=wb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof wb.ProportionalLayoutHalo?wb.ProportionalLayoutHalo:wb.ProportionalLayoutHalo=function(Q){Q&&Q[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(uc,tc,[{key:"handleDrop",
value:function(Q){}},{key:"onDrop",value:function(Q){Q.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Q){var Da={};this.target.changeSettingsFor(Q.submorph,(Da[Q.axis]=Q.policy,Da),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Q,Da){var ib=this;Q.stop();var Kb=this.target.settingsFor(Da);Da="";for(var pc in Kb)Da+=pc+":"+Kb[pc]+" ";var Wb=vc.morph({type:"label",
value:Da,isLayoutable:!1});Wb.wantsToBeDroppedOn=function(rd){return ib.target.layoutableSubmorphs.includes(rd)};Wb.onBeingDroppedOn=function(rd,id){Wb.remove();if(rd=ib.target.layoutableSubmorphs.includes(id)?id:Q.world.morphsContainingPoint(Q.hand.position).find(function(oe){return ib.target.layoutableSubmorphs.includes(oe)}))ib.updateSubmorphProportionalLayoutSettings({policy:Kb.x,axis:"x",submorph:rd}),ib.updateSubmorphProportionalLayoutSettings({policy:Kb.y,axis:"y",submorph:rd}),rd.show(),$world.setStatusMessage("layout settings applied")};
Q.hand.grab(Wb)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Q=this,Da,ib,Kb,pc,Wb,rd,id,oe,Tf,Ce,$e,af;return $jscomp.asyncExecutePromiseGeneratorProgram(function(of){switch(of.nextAddress){case 1:return Da=Q.target.layoutableSubmorphs,Q.env.eventDispatcher.isKeyPressed("Shift")?(Kb=Da.map(function(pd){return{isListItem:!0,string:String(pd),value:pd}}),of.yield($world.listPrompt("Select morph",Kb,{requester:Q,onSelection:function(pd){return pd.show()}}),5)):of.yield(vc.InteractiveMorphSelector.selectMorph(Q.world(),
Q,function(pd){return Da.includes(pd)}),4);case 4:ib=of.yieldResult;of.jumpTo(3);break;case 5:pc=of.yieldResult,Wb=$jscomp.makeIterator(pc.selected),ib=Wb.next().value;case 3:if(!ib)return of.return();rd=Q.state.popover.get("controlContainer");id=rd.getAllNamed(/submorph config/);oe=["move","resize","scale","fixed"];Tf=Q.target.settingsFor(ib);id.length||(rd.submorphs=[].concat($jscomp.arrayFromIterable(rd.submorphs),[{name:"submorph config X-Axis policy",position:vc.pt(0,Q.height),fill:vc.Color.transparent,
layout:new vc.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new vc.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Tf.x,values:oe})]},{name:"submorph config Y-Axis policy",position:vc.pt(0,Q.height),fill:vc.Color.transparent,layout:new vc.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new vc.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:Tf.y,values:oe})]},vc.morph({position:vc.pt(0,Q.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Ce=rd.getSubmorphNamed("x-axis policy selector");$e=rd.getSubmorphNamed("y-axis policy selector");af=rd.getSubmorphNamed("dragme");vc.disconnect(Ce,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings");vc.disconnect($e,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings");Ce.selectedValue=Tf.x;$e.selectedValue=Tf.y;vc.connect(af,
"onDragStart",Q,"onSubmorphSettingsDragStart",{updater:function(pd,gg){return pd(gg,ib)},varMapping:{submorph:ib}});vc.connect(Ce,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings",{converter:function(pd){return{policy:pd,axis:"x",submorph:ib}},varMapping:{submorph:ib}});vc.connect($e,"selectedValue",Q,"updateSubmorphProportionalLayoutSettings",{converter:function(pd){return{policy:pd,axis:"y",submorph:ib}},varMapping:{submorph:ib}});of.jumpToEnd()}})}},{key:"optionControls",value:function(Q){this.state.popover=
Q;var Da=this.target;Q=new vc.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:vc.Color.transparent,checked:Da.xAxisEnabled});Da=new vc.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:vc.Color.transparent,checked:Da.yAxisEnabled});var ib=new vc.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(vc.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});vc.connect(Q,"checked",this,"updateXAxisEnabled");
vc.connect(Da,"checked",this,"updateYAxisEnabled");vc.connect(ib,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[ib]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:vc.Color.transparent}}}}],wb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(vc.LayoutHalo));vc.ProportionalLayoutHalo=ie;vc.ProportionalLayoutHalo=ie;vc.ProportionalLayoutHalo=ie;var yf=lively.FreezerRuntime.recorderFor("lively.halos/index.js");yf.Halo=Xd;yf.MorphHighlighter=ae;yf.InteractiveMorphSelector=Bf;yf.StatusMessage=Nb;yf.StatusMessageForMorph=Ec;yf.show=zb;yf.showConnector=Cc;yf.ProportionalLayoutHalo=ie;yf.GridLayoutHalo=td;yf.FlexLayoutHalo=Zf;yf.showAndSnapToGuides=Fa;
yf.removeSnapToGuidesOf=ia;yf.StatusMessage=Nb;yf.StatusMessage=Nb;yf.StatusMessageForMorph=Ec;yf.StatusMessageForMorph=Ec;yf.show=zb;yf.show=zb;yf.showConnector=Cc;yf.showConnector=Cc;yf.Halo=Xd;yf.Halo=Xd;yf.MorphHighlighter=ae;yf.MorphHighlighter=ae;yf.InteractiveMorphSelector=Bf;yf.InteractiveMorphSelector=Bf;yf.ProportionalLayoutHalo=ie;yf.ProportionalLayoutHalo=ie;yf.GridLayoutHalo=td;yf.GridLayoutHalo=td;yf.FlexLayoutHalo=Zf;yf.FlexLayoutHalo=Zf;yf.showAndSnapToGuides=Fa;yf.showAndSnapToGuides=
Fa;yf.removeSnapToGuidesOf=ia;yf.removeSnapToGuidesOf=ia;Nb=Object.freeze({__proto__:null,StatusMessage:Nb,StatusMessageForMorph:Ec,show:zb,showConnector:Cc,Halo:Xd,MorphHighlighter:ae,InteractiveMorphSelector:Bf,ProportionalLayoutHalo:ie,GridLayoutHalo:td,FlexLayoutHalo:Zf,showAndSnapToGuides:Fa,removeSnapToGuidesOf:ia,SvgStyleHalo:void 0});Ha("i",Nb);Ha("_",void 0)}}});