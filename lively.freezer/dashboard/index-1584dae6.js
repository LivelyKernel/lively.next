System.register(["./__root_module__-5a58cfed.js","./index-ce89c89c.js","./color-picker-91804b43.js"],function(){var Ca,Cb,Vb,lc,gc,fe,fd,Zd,id,Uc,Ad,Nd,ee,Ud,kd,cb,Fb,vc,pc,sd,pd,tc,bd,Xb,Tb,Oc,td,Ob;return{setters:[function(sb){Ca=sb.ar;Cb=sb.s;Vb=sb.a5;lc=sb.aU;gc=sb.a4;fe=sb.a7;fd=sb.a8;Zd=sb.az;id=sb.ai;Uc=sb.al;Ad=sb.ag;Nd=sb.am;ee=sb.a1;Ud=sb.$;kd=sb.C;cb=sb.ao;Fb=sb.as;vc=sb.bU;pc=sb.br;sd=sb.aa;pd=sb.aq;tc=sb.bg;bd=sb.bq;Xb=sb.bo;Tb=sb.bV},function(sb){Oc=sb.N;td=sb.I},function(sb){Ob=
sb.a}],execute:function(){var sb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");sb.fun=Ca;sb.string=Cb;sb.obj=Vb;sb.properties=lc;sb.arr=gc;sb.Text=fe;sb.config=fd;sb.HorizontalLayout=Zd;sb.VerticalLayout=id;sb.morph=Uc;sb.Morph=Ad;sb.Icon=Nd;sb.pt=ee;sb.Rectangle=Ud;sb.Color=kd;sb.connect=cb;sb.once=Fb;sb.noUpdate=vc;sb.ColorPicker=Ob;sb.DropDownList=pc;sb.loadObjectFromPartsbinFolder=sd;sb.cachedControls=new WeakMap;var hb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
Qb=Hb.hasOwnProperty("RichTextControl")&&"function"===typeof Hb.RichTextControl?Hb.RichTextControl:Hb.RichTextControl=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Qb,wb,[{key:"toggleButton",value:function(lb,mb){var Rb=this.ui.fontSelection;mb?(lb.fontColor=sb.Color.white,lb.fill=this.toggleColor):(lb.fontColor=Rb.fontColor,lb.fill=Rb.fill)}},{key:"reset",value:function(){var lb=this.ui.fontSelection;lb.items=
sb.RichTextControl.basicFontItems();lb.selection=lb.items[0].value;sb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(lb){lb=void 0===lb?!!this.world():lb;var mb=this.target,Rb=mb.world()||$world,Gc=this.globalBounds();mb=(mb.selection.isEmpty()?mb.globalBounds():mb.getGlobalTransform().transformRectToRect(mb.selectionBounds().translatedBy(mb.scroll.negated()))).bottomCenter().subPt(Gc.topCenter());Rb=Rb.visibleBounds().translateForInclusion(Gc.translatedBy(mb)).topLeft().subPt(Gc.topLeft());
Rb=this.position.addPt(Rb);lb?this.animate({duration:300,position:Rb}):this.position=Rb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(lb,mb){mb=void 0===mb?!0:mb;var Rb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return Rb.target=lb,Rb.update(),Gc.yield(Rb.whenRendered(),2);Rb.ui.fontSizeField.relayout();mb&&Rb.alignAtTarget();Gc.jumpToEnd()})}},{key:"update",value:function(){var lb=
this,mb=this.target,Rb=this.updateSpec,Gc=mb.selection;Gc=Gc?Gc.isEmpty()?mb.textAttributeAt(Gc.start):mb.getStyleInRange(Gc):{};var mc=this.managedProps,Pc=sb.obj.select(mb,mc);mb=$jscomp.makeIterator(Object.entries(sb.obj.select(Gc||{},mc)));for(Gc=mb.next();!Gc.done;Gc=mb.next())mc=$jscomp.makeIterator(Gc.value),Gc=mc.next().value,mc=mc.next().value,"undefined"!==typeof mc&&(Pc[Gc]=mc);sb.noUpdate(function(){for(var Xc=$jscomp.makeIterator(Object.entries(lb.ui)),Q=Xc.next();!Q.done;Q=Xc.next()){var fa=
$jscomp.makeIterator(Q.value);Q=fa.next().value;fa=fa.next().value;if(Rb[Q])Rb[Q](Pc,fa)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(lb,mb){var Rb=this.target,Gc=Rb.selection;Rb.isLabel||Gc.isEmpty()?Rb[lb]="function"===typeof mb?mb(Rb[lb]):mb:(Rb.undoManager.group(),Rb.changeStyleProperty(lb,function(mc){return"function"===typeof mb?mb(mc):mb}),Rb.undoManager.group())}},{key:"changeFont",value:function(lb){var mb=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==
Gc.nextAddress)return mb._last=lb,(Rb="custom..."===lb)?Gc.yield($world.prompt("Enter font family name",{requester:mb.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Gc.jumpTo(2);if(2!=Gc.nextAddress&&(lb=Gc.yieldResult,!lb))return Gc.return();mb.changeAttributeInSelectionOrMorph("fontFamily",lb);Gc.jumpToEnd()})}},{key:"setPadding",value:function(lb){this.target.padding=sb.Rectangle.inset(lb)}},{key:"setPaddingTop",value:function(lb){var mb=this.target.padding;this.target.padding=
sb.Rectangle.inset(mb.left(),lb,mb.right(),mb.bottom())}},{key:"setPaddingLeft",value:function(lb){var mb=this.target.padding;this.target.padding=sb.Rectangle.inset(lb,mb.top(),mb.right(),mb.bottom())}},{key:"setPaddingRight",value:function(lb){var mb=this.target.padding;this.target.padding=sb.Rectangle.inset(mb.left(),mb.top(),lb,mb.bottom())}},{key:"setPaddingBottom",value:function(lb){var mb=this.target.padding;this.target.padding=sb.Rectangle.inset(mb.left(),mb.top(),mb.right(),lb)}},{key:"setLineWrapping",
value:function(lb){this.target.lineWrapping=lb}},{key:"changeFontWeight",value:function(lb){this.changeAttributeInSelectionOrMorph("fontWeight",lb)}},{key:"changeTextAlign",value:function(lb){this.changeAttributeInSelectionOrMorph("textAlign",lb)}},{key:"changeFontColor",value:function(lb){this.changeAttributeInSelectionOrMorph("fontColor",lb)}},{key:"changeFontSize",value:function(lb){this.changeAttributeInSelectionOrMorph("fontSize",lb)}},{key:"changeFixedWidth",value:function(lb){this.target.fixedWidth=
lb}},{key:"changeFixedHeight",value:function(lb){this.target.fixedHeight=lb}},{key:"changeLink",value:function(){var lb=this,mb,Rb,Gc,mc,Pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xc){if(1==Xc.nextAddress)return mb=lb.target,Rb=mb.selection,Gc=mb.getStyleInRange(Rb),mc=Gc.link,Xc.yield(lb.world().prompt("Set link",{input:mc||"https://"}),2);Pc=Xc.yieldResult;mb.undoManager.group();mb.setStyleInRange({link:Pc||void 0},Rb);mb.undoManager.group();lb.autoRemove&&lb.remove();Xc.jumpToEnd()})}},
{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(lb){return"underline"===lb?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(lb){return"italic"===lb?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(lb){return"bold"===lb||"700"===lb?"normal":"bold"})}},{key:"copyStyle",value:function(){var lb=this,mb=this.target,
Rb=this.ui.applyStyleButton;mb=mb.selection.isEmpty()?mb.defaultTextStyle:mb.getStyleInRange(mb.selection);var Gc=JSON.stringify(mb,null,2);this.constructor.copiedStyle=mb;Rb.tooltip="paste style\n"+Gc;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Gc},{type:"application/morphic-text-style",styleString:Gc}]).then(function(){return lb.setStatusMessage("Copied style\n"+Gc)}).catch(function(mc){return lb.showError(mc)})}},{key:"pasteStyle",value:function(){var lb=this,mb=this.target,
Rb=this.constructor.copiedStyle;mb.selection.isEmpty()?Object.assign(mb,Rb):mb.selections.forEach(function(Gc){return mb.addTextAttribute(lb.constructor.copiedStyle,Gc)});this.update()}},{key:"clearStyle",value:function(){var lb=this.target;lb.selections.forEach(function(mb){return lb.resetStyleInRange(mb)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var lb=this.defaultSpec,mb=this.uiSpec;lb=
this.addMorph({name:"config panel",layout:new sb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(lb).map(function(Rb){var Gc=mb.rows.some(function(mc){return mc.some(function(Pc){return Pc===Rb})});return{type:"labeledcheckbox",label:Rb,name:Rb,checked:Gc}})),[{layout:new sb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});lb.center=this.innerBounds().center();
sb.connect(lb.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");sb.connect(lb.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var lb=this.getSubmorphNamed("config panel");lb&&(lb.remove(),lb.submorphs.filter(function(mb){return"LabeledCheckBox"===mb.constructor.name}))}},{key:"configureCanceled",value:function(){var lb=this.getSubmorphNamed("config panel");lb&&lb.remove()}},{key:"close",value:function(){var lb=this;this.target&&
this.target.attributeConnections&&this.target.attributeConnections.forEach(function(mb){return mb.targetObj===lb&&mb.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var lb=this.world();lb&&(lb=lb.focusedMorph)&&(lb.isLabel||lb.isText)&&!this.isAncestorOf(lb)&&this.target!==lb&&this.focusOn(lb,!1)}},{key:"onMouseUp",value:function(lb){var mb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return Rb.yield(mb.whenRendered(),2);mb.update();Rb.jumpToEnd()})}},{key:"attachToWorld",value:function(){sb.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:"className",get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},
updateSpec:{get:function(){var lb=this;return Object.assign({fontSelection:function(mb,Rb){var Gc=mb.fontFamily;(mb=Gc&&Rb.items.find(function(mc){return mc.value.toLowerCase()===Gc.toLowerCase()}))?Rb.selection=mb.value:Gc&&(Rb.items=Rb.items.concat({isListItem:!0,label:[Gc,{fontFamily:Gc}],value:Gc}),Rb.selection=sb.arr.last(Rb.items));Rb.fit();Rb.width=Math.max(Rb.width,170)},fontWeightSelection:function(mb,Rb){Rb.selection="normal"==mb.fontWeight?"Medium":mb.fontWeight?sb.string.capitalize(mb.fontWeight):
"Medium"},boldButton:function(mb,Rb){lb.toggleButton(Rb,"bold"===mb.fontWeight)},italicButton:function(mb,Rb){lb.toggleButton(Rb,"italic"===mb.fontStyle)},underlineButton:function(mb,Rb){lb.toggleButton(Rb,"underline"===mb.textDecoration)},linkButton:function(mb,Rb){lb.toggleButton(Rb,!!mb.link)},colorPicker:function(mb,Rb){Rb.colorValue=mb.fontColor},fontSizeField:function(mb,Rb){Rb.number=mb.fontSize},fixedWidthControl:function(mb,Rb){mb.isText?Rb.enable():Rb.disable();Rb.checked=mb.fixedWidth},
fixedHeightControl:function(mb,Rb){mb.isText?Rb.enable():Rb.disable();Rb.checked=mb.fixedHeight},lineWrappingControl:function(mb,Rb){var Gc=$jscomp.makeIterator(Rb.submorphs);Rb=Gc.next().value;Gc=Gc.next().value;Rb.checked=!!mb.lineWrapping;Gc.deactivated=!mb.lineWrapping;Gc.deactivated?Gc.opacity=.5:(Gc.opacity=1,Gc.selection=mb.lineWrapping)},paddingControl:function(mb,Rb){var Gc=mb.padding,mc=Gc.left();mb=Gc.top();var Pc=Gc.right();Gc=Gc.bottom();var Xc=!sb.arr.every([mc,mb,Pc,Gc],function(Q){return Q==
mc});Rb.get("multi value indicator").visible=Xc;sb.connect(Rb.get("multi value indicator"),"onMouseDown",Rb.get("padding field"),"number",{converter:"() => left",varMapping:{left:mc}});Rb.get("padding field").number=mc;Rb.get("padding field").visible=!Xc;Rb.get("padding field top").number=mb;Rb.get("padding field left").number=mc;Rb.get("padding field right").number=Pc;Rb.get("padding field bottom").number=Gc}},["left","center","right","block"].reduce(function(mb,Rb){mb[Rb+"Align"]=function(Gc,mc){lb.toggleButton(mc,
Gc.textAlign==Rb)};return mb},{}))}},ui:{get:function(){var lb=this,mb={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",
fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control"};return sb.obj.extract(mb,sb.obj.keys(mb),function(Rb,Gc){return lb.getSubmorphNamed(Gc)})}}}}},{key:"openDebouncedFor",value:function(lb){var mb=lb.selection;if(mb.isEmpty()){var Rb=sb.cachedControls.get(lb);Rb&&(Rb.update(),Rb.alignAtTarget(),Rb.world()||lb.world().addMorph(Rb))}else sb.fun.debounceNamed(lb.id+"openRichTextControl",600,function(){var Gc=
sb.cachedControls.get(lb);mb.isEmpty()?Gc&&Gc.removeFocus():(Gc&&Gc.world()||(Gc=new sb.RichTextControl,sb.cachedControls.set(lb,Gc)),lb.world().addMorph(Gc),Gc.focusOn(lb,!0),Gc.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(lb){var mb=sb.cachedControls.get(lb);mb?mb.update():(mb=new sb.RichTextControl,sb.cachedControls.set(lb,mb),mb.focusOn(lb,!0),mb.alwaysTargetFocusedMorph());mb.alignAtTarget();mb.world()||lb.world().addMorph(mb);return mb}}],Hb,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16332})}(sb.Morph);sb.RichTextControl=hb;sb.RichTextControl=hb;sb.RichTextControl=hb;hb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");hb.SearchField=tc;var qb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),Qb=Hb.hasOwnProperty("ProtoSearchField")&&
"function"===typeof Hb.ProtoSearchField?Hb.ProtoSearchField:Hb.ProtoSearchField=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Qb,wb,void 0,[{key:"className",get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(hb.SearchField);qb=hb.ProtoSearchField;hb.default=qb;var Aa=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");Aa.Tree=bd;Aa.TreeData=Xb;hb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Qb=Hb.hasOwnProperty("TestTreeData")&&"function"===typeof Hb.TestTreeData?Hb.TestTreeData:Hb.TestTreeData=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return pd(Qb,wb,[{key:"display",value:function(lb){return lb.name}},{key:"isCollapsed",value:function(lb){return lb.isCollapsed}},{key:"collapse",value:function(lb,mb){lb.isCollapsed=mb}},{key:"getChildren",value:function(lb){return lb.isLeaf?null:lb.isCollapsed?[]:lb.children}},{key:"isLeaf",value:function(lb){return lb.isLeaf}}],[{key:"className",get:function(){return"TestTreeData"}}],Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(Aa.TreeData);Aa.TestTreeData=hb;Aa.TestTreeData=hb;Aa.TestTreeData=hb;hb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),Qb=Hb.hasOwnProperty("ProtoTree")&&"function"===typeof Hb.ProtoTree?Hb.ProtoTree:Hb.ProtoTree=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return pd(Qb,wb,void 0,[{key:"className",get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new Aa.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],
Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(Aa.Tree);hb=Aa.ProtoTree;Aa.default=hb;hb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");hb.NumberWidget=Oc;qb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),Qb=Hb.hasOwnProperty("ProtoNumberWidget")&&
"function"===typeof Hb.ProtoNumberWidget?Hb.ProtoNumberWidget:Hb.ProtoNumberWidget=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Qb,wb,void 0,[{key:"className",get:function(){return"ProtoNumberWidget"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(hb.NumberWidget);qb=hb.ProtoNumberWidget;hb.default=qb;hb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");hb.Morph=Ad;qb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),Qb=Hb.hasOwnProperty("FrameResizer")&&"function"===typeof Hb.FrameResizer?Hb.FrameResizer:Hb.FrameResizer=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return pd(Qb,wb,[{key:"onDrag",value:function(lb){var mb=this.owner.left;lb=lb.positionIn(this).x;lb*="left"==this.direction?-1:1;this.owner.width+=lb;350>this.owner.width&&(lb+=350-this.owner.width,this.owner.width=350);this.owner.left="left"==this.direction?mb-lb:mb}}],[{key:"className",get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(hb.Morph);qb=hb.FrameResizer;hb.default=qb;var bb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");bb.Morph=Ad;bb.morph=Uc;bb.layouts=Tb;bb.string=Cb;bb.connect=cb;bb.noUpdate=vc;bb.InteractiveMorphSelector=td;bb.Color=kd;bb.pt=ee;hb=function(wb){var Hb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Qb=Hb.hasOwnProperty("ShapeLayoutControl")&&
"function"===typeof Hb.ShapeLayoutControl?Hb.ShapeLayoutControl:Hb.ShapeLayoutControl=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return pd(Qb,wb,[{key:"focusOn",value:function(lb){this.target=lb;this.update(!1)}},{key:"setupConnections",value:function(){var lb=this.ui;bb.connect(lb.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");bb.connect(lb.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");
bb.connect(lb.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});bb.connect(lb.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var mb={},Rb=$jscomp.makeIterator(this.managedProps),
Gc=Rb.next();!Gc.done;mb={$jscomp$loop$prop$prop$2291:mb.$jscomp$loop$prop$prop$2291},Gc=Rb.next()){var mc=$jscomp.makeIterator(Gc.value),Pc=mc.next().value;Gc=mc.next().value;mc.next().value||(mb.$jscomp$loop$prop$prop$2291=this.join(Pc),mc=lb[this.join(Pc,"control")],bb.connect(mc,Gc,this,"updateLayout",{updater:function(Xc){return function(Q,fa){Q(Xc.$jscomp$loop$prop$prop$2291,fa)}}(mb),varMapping:{prop:mb.$jscomp$loop$prop$prop$2291}}))}}},{key:"lower",value:function(lb){return lb.charAt(0).toLowerCase()+
lb.slice(1)}},{key:"join",value:function(lb,mb){return this.lower(bb.string.camelCaseString(lb+(mb?" "+mb:"")))}},{key:"updateLayoutOfTarget",value:function(lb){lb=bb.layouts[bb.string.camelCaseString(lb)];this.target.layout=lb?new lb({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(lb,mb){this.target.layout[lb]=mb}},{key:"update",value:function(lb){var mb=this;this.target&&bb.noUpdate(function(){for(var Rb=mb.ui,Gc=mb.target.layout||{name:function(){return"No"}},mc=$jscomp.makeIterator(mb.managedProps),
Pc=mc.next();!Pc.done;Pc=mc.next()){var Xc=$jscomp.makeIterator(Pc.value);Pc=Xc.next().value;var Q=Xc.next().value;Xc.next();Xc=Rb[mb.join(Pc,"control")];var fa=Rb[mb.join(Pc,"label")];if(Q)if("type"===Pc)Xc.selection=Gc.name()+" Layout";else{var Ia=Gc[mb.join(Pc)],Qa="undefined"!==typeof Ia;if(Qa){switch(Pc){case "align":Xc.items=Gc.possibleAlignValues;break;case "direction":Xc.items=Gc.possibleDirectionValues;break;case "axis":Xc.items=Gc.possibleAxisValues}Xc[Q]=Ia}fa.isLayoutable=fa.visible=Qa}}mb.showGridLayoutControl("Grid"===
Gc.name());mb.showProportionalControl("Proportional"===Gc.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(lb){var mb={};this.target.layout.changeSettingsFor(lb.submorph,(mb[lb.axis]=lb.policy,mb),!0)}},{key:"onSubmorphSettingsDragStart",value:function(lb){var mb=this;lb.stop();var Rb=this.target.layout,Gc=Rb.settingsFor(this.selectedSubmorph),mc=[],Pc;for(Pc in Gc)mc=[].concat($jscomp.arrayFromIterable(mc),[Pc+": ",{fontWeight:"bold"},Gc[Pc]+" ",{}]);var Xc=bb.morph({type:"label",
fontColor:bb.Color.white,value:mc,fill:bb.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Xc.wantsToBeDroppedOn=function(Q){return Rb.layoutableSubmorphs.includes(Q)};Xc.onBeingDroppedOn=function(Q,fa){Xc.remove();if(Q=Rb.layoutableSubmorphs.includes(fa)?fa:lb.world.morphsContainingPoint(lb.hand.position).find(function(Ia){return Rb.layoutableSubmorphs.includes(Ia)}))mb.updateSubmorphProportionalLayoutSettings({policy:Gc.x,axis:"x",submorph:Q}),mb.updateSubmorphProportionalLayoutSettings({policy:Gc.y,
axis:"y",submorph:Q}),Q.show(),$world.setStatusMessage("layout settings applied")};lb.hand.grab(Xc);Xc.moveBy(bb.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var lb=this,mb,Rb,Gc,mc,Pc,Xc,Q,fa,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qa){switch(Qa.nextAddress){case 1:return mb=lb.target.layout.layoutableSubmorphs,lb.manageFocus=!0,lb.env.eventDispatcher.isKeyPressed("Shift")?(Gc=mb.map(function(ec){return{isListItem:!0,string:String(ec),value:ec}}),
Qa.yield($world.listPrompt("Select morph",Gc,{onSelection:function(ec){return ec.show()}}),5)):Qa.yield(bb.InteractiveMorphSelector.selectMorph(lb.world(),lb,function(ec){return mb.includes(ec)}),4);case 4:Rb=Qa.yieldResult;Qa.jumpTo(3);break;case 5:mc=Qa.yieldResult,Pc=$jscomp.makeIterator(mc.selected),Rb=Pc.next().value;case 3:lb.manageFocus=!1;lb.selectedSubmorph=Rb;if(!Rb)return Qa.return();Xc=lb.ui;Q=Xc.xAxisPolicyControl;fa=Xc.yAxisPolicyControl;Ia=lb.target.layout.settingsFor(Rb);bb.noUpdate(function(){Q.selection=
Ia.x;fa.selection=Ia.y});Qa.jumpToEnd()}})}},{key:"showProportionalControl",value:function(lb){var mb=this.ui;[mb.submorphSettingsControl,mb.dragmeControl,mb.xAxisPolicyControl,mb.xAxisPolicyLabel,mb.yAxisPolicyControl,mb.yAxisPolicyLabel].forEach(function(Rb){Rb.isLayoutable=lb;Rb.visible=lb})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(lb){var mb=this.ui.configureGridLayoutControl;mb.visible=mb.isLayoutable=lb}}],
[{key:"className",get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",
!1,!0]]}},ui:{readOnly:!0,get:function(){for(var lb={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},mb=$jscomp.makeIterator(this.managedProps),Rb=mb.next();!Rb.done;Rb=mb.next()){var Gc=$jscomp.makeIterator(Rb.value).next().value;Rb=Gc+" label";Gc+=" control";lb[this.join(Rb)]=this.getSubmorphNamed(Rb);lb[this.join(Gc)]=this.getSubmorphNamed(Gc)}return lb}}}}}],Hb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(bb.Morph);hb=bb.ShapeLayoutControl;bb.default=hb}}});