System.register("./__root_module__-64e296ea.js kld-intersections ./index-997f10f9.js ./index-2a6f00a9.js ./index-1222f918.js ./color-picker-9739352b.js ./editor-plugin-c8470ec8.js ./index-9c46491a.js ./editor-plugin-87697cac.js ./index-8a05b158.js".split(" "),function(){var Ba,Ab,Qb,dc,Xb,Xd,ad,Nd,dd,Lc,rd,Gd,ke,Kd,Hc,fb,Db,mc,hc,Tc,Ld,oc,pc,Nb,Dc,Vc,Hd,Id,rb,Hb,Mc,qb,tb,eb,ob,wb,cb,Oa,Gb,sc,vc,fc;return{setters:[function(rc){Ba=rc.at;Ab=rc.aj;Qb=rc.aB;dc=rc.aw;Xb=rc.a3;Xd=rc.au;ad=rc.ar;Nd=
rc.av;dd=rc.C;Lc=rc.a2;rd=rc.a6;Gd=rc.$;ke=rc.aX;Kd=rc.P;Hc=rc.a7;fb=rc.aC;Db=rc.al;mc=rc.aW;hc=rc.ap;Tc=rc.am;Ld=rc.ao;oc=rc.br;pc=rc.bt;Nb=rc.bT;Dc=rc.b3;Vc=rc.bj;Hd=rc.aO;Id=rc.n;rb=rc.a1;Hb=rc.bU;Mc=rc.aY;qb=rc.aZ;tb=rc.aq;eb=rc.a4;ob=rc.aU;wb=rc.as;cb=rc.bV},function(){},function(){},function(){},function(rc){Oa=rc.d;Gb=rc.s;sc=rc.I;vc=rc.M},function(){},function(rc){fc=rc.I},function(){},function(){},function(){}],execute:function(){function rc(pb){var bd=pb.sourceObj,od=pb.targetObj;bd.isMorph&&
od.isMorph?(bd.show(),od.show(),ed.showConnector&&ed.showConnector(bd,od)):ed.show(String(pb))}function Q(pb){var bd=pb.sourceObj,od=pb.sourceAttrName,lb=pb.targetObj,Sa=pb.targetMethodName,qc=pb.getConverter();pb=pb.getUpdater();return ed.printConnectionElements(bd,od,lb,Sa,qc,pb)}function ha(pb,bd,od,lb,Sa,qc){pb="/* global connect, source, target */\nconnect(source, '"+bd+"', target, '"+lb+"'";if(Sa||qc)pb+=", {\n";Sa&&(pb+="  converter: "+Sa);Sa&&qc&&(pb+=",");Sa&&(pb+="\n");qc&&(pb+="  updater: "+
qc+"\n");if(Sa||qc)pb+="}";return pb+");"}function Ga(pb,bd){var od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return lb.yield(ed.InteractiveMorphSelector.selectMorph(),2);od=lb.yieldResult;return lb.return(od?ed.interactiveConnectGivenSourceAndTarget(pb,bd,od):null)})}function La(pb,bd,od,lb){var Sa,qc,le,Zd,Fe;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:Sa=od&&od.world().targetDataBindings(od);qc=pb.world();
if(!Sa||!Sa.length)return qc.setStatusMessage("connect canceled"),Oc.return();if(bd){Oc.jumpTo(2);break}le=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(ed.arr.flatten(pb.world().targetDataBindings(pb)).map(function(te){return{isListItem:!0,string:te.signature||te.name,value:te}})));return Oc.yield(qc.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],le,{filterable:!0}),3);case 3:bd=Oc.yieldResult;if("canceled"==bd.status)return Oc.return();bd=bd.selected[0];bd=bd.custom?"sourceAttribute":bd.name;case 2:return Zd=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(ed.arr.flatten(Sa).map(function(te){return{isListItem:!0,value:te,string:te.signature||te.name}}))),Oc.yield(qc.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Zd,{filterable:!0}),4);case 4:Fe=Oc.yieldResult;if("canceled"==Fe.status)return Oc.return();Fe=Fe.selected[0];return Oc.yield(ed.interactivelyEvaluateConnection({sourceObj:pb,sourceAttr:bd,targetObj:od,targetAttr:Fe.custom?"targetAttribute":Fe.name,onConnect:lb,prompt:"Edit and confirm connection:"}),0)}})}function Yb(pb,bd,od,lb){bd=void 0===bd?"confirm connection":bd;var Sa,qc,le,Zd,Fe,Oc,te;return $jscomp.asyncExecutePromiseGeneratorProgram(function(md){Sa=
pb;qc=Sa.sourceObj;le=Sa.sourceAttrName;Zd=Sa.targetObj;Fe=Sa.targetMethodName;Oc=pb.getConverter();te=pb.getUpdater();return md.return(ed.interactivelyEvaluateConnection({sourceObj:qc,sourceAttr:le,targetObj:Zd,targetAttr:Fe,converter:Oc,updater:te,prompt:bd,highlight:od,onConnect:lb}))})}function kc(pb,bd,od,lb,Sa){lb=void 0===lb?{}:lb;Sa=ed.rect(0).sides.concat(ed.rect(0).corners);od=od||new ed.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ed.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ed.Color.transparent,
nativeCursor:"auto"},end:{fill:ed.Color.orange}}},lb,{hasFixedPosition:!0}));od.startPoint.attachTo(pb,"rightCenter");bd.isMorph?(lb=bd.globalBounds().partNameNearest(Sa,pb.globalPosition),pb.globalPosition.equals(bd.globalBounds().partNamed(lb))&&bd.globalBounds().partNameNearest(ed.arr.without(Sa,lb),pb.globalPosition),od.endPoint.attachTo(bd,"leftCenter")):(Sa=pb.globalBounds().topRight().addPt(ed.pt(100,0)),bd=ed.morph({type:"label",value:bd.toString(),styleClasses:["Tooltip"],padding:ed.rect(8,
4)}).openInWorld(Sa),bd.position=pb.world().bounds().translateForInclusion(bd.bounds()).topLeft(),ed.once(od,"remove",bd,"remove"),od.endPoint.attachTo(bd,"leftCenter"));return od}function Ua(pb){var bd,od,lb,Sa,qc,le,Zd,Fe,Oc,te,md,Eb,xa,Ca,Mb,P,za,Ta,Fb,Cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Uc){switch(Uc.nextAddress){case 1:bd=pb;od=bd.sourceObj;lb=bd.sourceAttr;Sa=bd.targetObj;qc=bd.targetAttr;le=bd.converter;Zd=bd.updater;Fe=bd.prompt;Oc=void 0===bd.highlight?!0:bd.highlight;
te=bd.onConnect;md="lively://lively.bindings-interactive-connect/x"+od.id;Eb={context:window,format:"esm",targetModule:md,classTransform:ed.classToFunctionTransform};xa=ed.printConnectionElements(od,lb,Sa,qc,le,Zd);Sa.isMorph&&od.isMorph&&(Ca=Sa.propertiesAndPropertySettings().properties[qc]||{type:typeof Sa[qc]},Mb=Ca.type,P=od.propertiesAndPropertySettings().properties[lb]||{type:typeof od[lb]},za=P.type,za!==Mb&&(Fe="Edit and confirm connection:"));Ta={};Object.assign(lively.modules.module(md).recorder,
(Ta.source=od,Ta.target=Sa,Ta.connect=ad,Ta.once=Nd,Ta[lb]=od[lb],Ta));if(!Fe){Fb=xa;Uc.jumpTo(2);break}return Uc.yield($world.editPrompt(Fe,{input:xa,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Eb,animated:!1}),3);case 3:if(Fb=Uc.yieldResult,!Fb)return $world.setStatusMessage("connect canceled"),Uc.return();case 2:return Uc.yield(lively.vm.runEval(Fb,Eb),4);case 4:Cc=Uc.yieldResult;if(Cc.isError)return $world.logError(Cc.value),Uc.return(Ua({sourceObj:od,
sourceAttr:lb,targetObj:Sa,targetAttr:qc,converter:le,updater:Zd,prompt:"confirm connection",highlight:Oc,onConnect:te}));Oc&&($world.setStatusMessage("connected!",ed.Color.green),ed.interactivelyShowConnection(Cc.value));"function"===typeof te&&te(Cc);Uc.jumpToEnd()}})}var ec=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");ec.Inspector=fc;var ge=function(pb){var bd=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),od=bd.hasOwnProperty("ProtoInspector")&&"function"===typeof bd.ProtoInspector?
bd.ProtoInspector:bd.ProtoInspector=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(ec.Inspector);ge=ec.ProtoInspector;ec.default=ge;var ee=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");ee.Morph=Ab;ee.touchInputDevice=Qb;ee.easings=dc;ee.pt=Xb;ee.fun=Xd;ee.connect=ad;ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),od=bd.hasOwnProperty("MorphicSideBar")&&"function"===typeof bd.MorphicSideBar?bd.MorphicSideBar:bd.MorphicSideBar=function(lb){lb&&
lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(lb){lb=void 0===lb?!0:lb;if(this.respondsToVisibleWindow){var Sa=$world.visibleBounds(),qc=navigator.standalone&&ee.touchInputDevice?25:0;this.height=Sa.height-qc;this.top=qc+Sa.top();qc=this.get("horizontal resizer");qc.height=this.height;qc.top=0;lb&&(this.visible?this.topLeft=
Sa.topLeft():this.topRight=Sa.topLeft())}}},{key:"switchMode",value:function(lb){"inspector"==lb&&this.showInspector();"connections"==lb&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(lb){var Sa=this,qc,le;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){switch(Zd.nextAddress){case 1:qc=
$world.visibleBounds();le=navigator.standalone&&ee.touchInputDevice?25:0;Sa.height=qc.height-le;Sa.top=le+qc.top();if(lb)return $world.addMorph(Sa,$world.get("lively top bar")),Sa.topRight=qc.topLeft(),Sa.attachToWorld($world),Sa.visible=!0,Zd.yield(Sa.whenRendered(),5);Sa.detachFromWorld($world);return Zd.yield(Sa.animate({opacity:0,topRight:qc.topLeft(),duration:300}),4);case 4:Sa.visible=!1;Sa.remove();Zd.jumpTo(0);break;case 5:return Sa.onWorldResize(!1),Sa.get("scene graph").adjustProportions(),
Zd.yield(Sa.animate({opacity:1,easing:ee.easings.outCirc,topLeft:qc.topLeft(),duration:300}),6);case 6:Sa.get("scene graph").refresh(),Zd.jumpToEnd()}})}},{key:"attachToWorld",value:function(lb){ee.connect(lb,"onChange",this,"onHierarchyChange",{garbageCollect:!0});ee.connect(lb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});ee.connect(lb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(lb){var Sa=this;lb.attributeConnections.forEach(function(qc){qc.targetObj===
Sa&&qc.disconnect()})}},{key:"selectNode",value:function(lb){this.getSubmorphNamed("scene graph").selectMorphInTarget(lb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(lb)}},{key:"onHierarchyChange",value:function(lb){var Sa=this,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if("addMorphAt"===lb.selector||"removeMorph"===lb.selector||"name"===lb.prop){qc=Sa._sceneGraph||(Sa._sceneGraph=Sa.getSubmorphNamed("scene graph"));if(!qc||!qc.owner.visible||lb.target&&
lb.target.isHand||lb.target&&qc.ignoreMorph(lb.target)||lb.args&&!lb.args[0].isHalo&&qc.ignoreMorph(lb.args[0])||lb.target.ownerChain().find(function(Zd){return qc.ignoreMorph(Zd)}))return le.return();ee.fun.debounceNamed("scene-graph-update",50,function(){return qc.refresh()})()}le.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],bd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-72"}}},{start:226,end:3667})}(ee.Morph);ec=ee.MorphicSideBar;ee.default=ec;var ed=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");ed.interactivelyShowConnection=rc;ed.printConnection=Q;ed.printConnectionElements=ha;ed.interactiveConnectGivenSource=Ga;ed.interactiveConnectGivenSourceAndTarget=
La;ed.interactivelyReEvaluateConnection=Yb;ed.visualizeConnection=kc;ed.interactivelyEvaluateConnection=Ua;ed.connect=ad;ed.once=Nd;ed.Color=dd;ed.rect=Lc;ed.pt=Xb;ed.arr=rd;ed.promise=Gd;ed.properties=ke;ed.Path=Kd;ed.obj=Hc;ed.HorizontalLayout=fb;ed.Morph=Ab;ed.VerticalLayout=Db;ed.StyleSheet=mc;ed.Icon=hc;ed.GridLayout=Tc;ed.morph=Ld;ed.TreeData=oc;ed.Tree=pc;ed.Leash=Nb;ed.LabeledCheckBox=Dc;ed.SearchField=Vc;ed.showConnector=Oa;ed.show=Gb;ed.InteractiveMorphSelector=sc;ed.MorphHighlighter=vc;
ed.Window=Hd;ed.classToFunctionTransform=Id;ed.interactivelyShowConnection=rc;ed.interactivelyShowConnection=rc;ed.printConnection=Q;ed.printConnection=Q;ed.printConnectionElements=ha;ed.printConnectionElements=ha;ed.interactiveConnectGivenSource=Ga;ed.interactiveConnectGivenSource=Ga;ed.interactiveConnectGivenSourceAndTarget=La;ed.interactiveConnectGivenSourceAndTarget=La;ed.interactivelyReEvaluateConnection=Yb;ed.interactivelyReEvaluateConnection=Yb;ed.visualizeConnection=kc;ed.visualizeConnection=
kc;ed.interactivelyEvaluateConnection=Ua;ed.interactivelyEvaluateConnection=Ua;var ab=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");ab.Tree=pc;ab.TreeData=oc;ab.morph=Ld;ab.Icon=hc;ab.HorizontalLayout=fb;ab.easings=dc;ab.Morph=Ab;ab.Color=dd;ab.Rectangle=rb;ab.rect=Lc;ab.pt=Xb;ab.connect=ad;ab.noUpdate=Hb;ab.disconnect=Mc;ab.disconnectAll=qb;ab.once=Nd;ab.arr=rd;ab.num=tb;ab.fun=Xd;ab.tree=eb;ab.promise=Gd;ab.ConnectionHalo=_missingExportShim;ab.getClassName=ob;ec=function(pb){var bd=
lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),od=bd.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof bd.InteractiveTreeContainer?bd.InteractiveTreeContainer:bd.InteractiveTreeContainer=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"onChildRemoved",value:function(lb){}},{key:"onChildAdded",value:function(lb){}},{key:"toggleSelected",value:function(lb){if(this.tree){var Sa=
this.tree,qc=Sa.selectionFontColor,le=Sa.nonSelectionFontColor;this.submorphs.filter(function(Zd){return!Zd._isControlElement&&Zd.styleClasses.includes("Label")}).forEach(function(Zd){Zd.fontColor=lb?qc:le})}}},{key:"onGrab",value:function(lb){var Sa=this.tree,qc=this.node;this.fill=ab.Color.gray.withA(.5);this.fontColor=Sa.selectionFontColor;this.opacity=.8;Ba._get(Object.getPrototypeOf(od.prototype),"onGrab",this).call(this,lb);qc&&(this.toggleSelected(!1),Sa.collapse(qc),Sa.treeData.parentNode(qc).container.onChildRemoved(this),
this._data=Sa.treeData.remove(qc),qc.container.target.remove(),Sa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(lb){this.showPreviewOn(lb);return!0}},{key:"showPreviewOn",value:function(lb){if(lb.isContainer)var Sa=lb.tree;lb.isTree&&(Sa=lb);Sa&&Sa.showDropPreviewFor&&Sa.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(lb){var Sa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return Sa.tree.treeData.add(lb._data,Sa.node,Sa.node.children[0]),
Sa.tree.uncollapse(Sa.node),Sa.tree.treeData.remove(Sa.tree._previewNode),qc.yield(Sa.tree.whenRendered(),2);Sa.tree.update(!0);Sa.onChildAdded(lb);qc.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(lb,Sa){var qc=this;debugger;this.tree._dropInProgress=!0;Ba._get(Object.getPrototypeOf(od.prototype),"onBeingDroppedOn",this).call(this,lb,Sa);lb=function(){qc.fill=ab.Color.gray.withA(.5);qc.opacity=1;qc.tree._dropInProgress=!1;qc.tree.refresh()};Sa.isTree?Sa.insertAtPlaceholder(this).then(lb):
Sa.isContainer?Sa.insertAsChild(this).then(lb):lb()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:ab.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var lb=this,Sa=this.tree.treeData;return Sa&&Sa.asList().find(function(qc){return qc.container===lb})}}}}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:498,end:2975})}(ab.Morph);ab.InteractiveTreeContainer=ec;ab.InteractiveTreeContainer=ec;ab.InteractiveTreeContainer=ec;ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),od=bd.hasOwnProperty("InteractiveTreeData")&&"function"===typeof bd.InteractiveTreeData?bd.InteractiveTreeData:bd.InteractiveTreeData=function(lb){lb&&
lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"display",value:function(lb){return[lb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(lb){return lb.isCollapsed}},{key:"collapse",value:function(lb,Sa){lb.isCollapsed=Sa}},{key:"getChildren",value:function(lb){var Sa=this;return lb.isLeaf?null:lb.children.filter(function(qc){return qc&&(Sa.filterActive?qc.visible:!0)})}},{key:"isLeaf",value:function(lb){var Sa=
this;return!lb.children||0==lb.children.filter(function(qc){return qc&&(Sa.filterActive?qc.visible:!0)}).length}},{key:"add",value:function(lb,Sa,qc){Sa=void 0===Sa?this.root:Sa;Sa.children||(Sa.children=[]);qc?ab.arr.pushAt(Sa.children,lb,Sa.children.indexOf(qc)):Sa.children.push(lb);Sa.isLeaf=!1}},{key:"replace",value:function(lb,Sa){var qc=this.parentNode(lb);lb=qc.children.indexOf(lb);qc.children[lb]=Sa}},{key:"next",value:function(lb){var Sa=this.parentNode(lb);return Sa&&Sa.children[Sa.children.indexOf(lb)+
1]}},{key:"isBefore",value:function(lb,Sa){this.next(lb)===Sa}},{key:"isAfter",value:function(lb,Sa){this.next(Sa)===lb}},{key:"addBefore",value:function(lb,Sa){this.add(lb,this.parentNode(Sa),Sa)}},{key:"addAfter",value:function(lb,Sa){var qc=this.parentNode(Sa);Sa=qc.children.indexOf(Sa)+1;this.add(lb,qc,qc.children[Sa])}},{key:"remove",value:function(lb){var Sa=this.parentNode(lb);if(Sa)return ab.arr.remove(Sa.children,lb),Sa.children==[]&&(Sa.children=null),lb}},{key:"filter",value:function(lb,
Sa){Sa=void 0===Sa?1:Sa;var qc=this,le;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==Zd.nextAddress)return Zd.yield(qc.uncollapseAll(function(Fe,Oc){return Oc<Sa+1}),2);le=qc.filterActive;qc.filterActive=!1;qc.asListWithIndexAndDepth(!1).reverse().forEach(function(Fe){var Oc=Fe.node;if(0==Fe.depth)return Oc.visible=!0;Oc.visible=lb(Oc);Oc.visible||Oc.isCollapsed||!Oc.children.find(function(te){return te.visible})?Oc.container.opacity=1:(Oc.visible=!0,Oc.container.opacity=.5);
return Oc.visible});qc.filterActive=le;Zd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2984,end:5441})}(ab.TreeData);ab.InteractiveTreeData=ec;ab.InteractiveTreeData=ec;ab.InteractiveTreeData=
ec;ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),od=bd.hasOwnProperty("InteractiveTree")&&"function"===typeof bd.InteractiveTree?bd.InteractiveTree:bd.InteractiveTree=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"update",value:function(lb){var Sa=this;Ba._get(Object.getPrototypeOf(od.prototype),"update",this).call(this,lb);this.treeData&&this.relayoutContainers();
lb&&this.embeddedMorphs.forEach(function(qc){qc.isContainer&&(qc.fill=ab.Color.transparent,qc.fontFamily=Sa.fontFamily,qc.fontSize=Sa.fontSize)})}},{key:"onDrop",value:function(lb){Ba._get(Object.getPrototypeOf(od.prototype),"onDrop",this).call(this,lb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(lb){}},{key:"onDropHoverUpdate",value:function(lb){}},{key:"onDropHoverOut",value:function(lb){}},{key:"onHoverOut",value:function(lb){var Sa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){Ba._get(Object.getPrototypeOf(od.prototype),
"onHoverOut",Sa).call(Sa,lb);Sa._previewNode&&Sa._previewNode.container.world()&&Sa.treeData.remove(Sa._previewNode);Sa.resetContainerSelection();Sa.update(!0);qc.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(lb){var Sa=this,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return qc=Sa.treeData.parentNode(Sa._previewNode),Sa.treeData.replace(Sa._previewNode,lb._data),Sa.treeData.remove(Sa._previewNode),le.yield(Sa.whenRendered(),2);Sa.update(!0);
qc.container.onChildAdded(lb);le.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var lb=this;if(!this._scrollingUp){this._scrollingUp=!0;var Sa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return lb._scrollingUp&&0<lb.scroll.y?qc.yield(lb.animate({scroll:lb.scroll.subXY(0,30),duration:300,easing:ab.easings.linear}),3):(lb._scrollingUp=!1,qc.jumpTo(0));Sa();qc.jumpToEnd()})};Sa()}}},{key:"scrollDownSlowly",value:function(){var lb=this;if(!this._scrollingDown){this._scrollingDown=
!0;var Sa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return lb._scrollingDown&&lb.scroll.y<lb.scrollExtent.y-lb.height?qc.yield(lb.animate({scroll:lb.scroll.addXY(0,30),duration:300,easing:ab.easings.linear}),3):(lb._scrollingDown=!1,qc.jumpTo(0));Sa();qc.jumpToEnd()})};Sa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(lb){lb.isContainer&&
(lb.fill=ab.Color.transparent)})}},{key:"showDropPreviewFor",value:function(lb){var Sa=this;lb=this.localize(lb.globalBounds().center());var qc=this.textPositionFromPoint(lb),le=this.treeData.asListWithIndexAndDepth(function(Eb){Eb=Eb.node;return Eb!=Sa._previewNode&&Eb.container.world()}),Zd=(le.find(function(Eb){return Eb.i-1===qc.row})||{}).node,Fe=Zd&&Zd.container,Oc=this.ensurePlaceholder(),te=!!Oc.container.world(),md=lb.subPt(this.scroll).subPt(this.scrollbarOffset);10>md.y?this.scrollUpSlowly():
md.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Fe){if(le.length>qc.row||ab.arr.last(this.treeData.root.children)===Oc)return;this.treeData.remove(Oc);this.treeData.add(Oc);this.update(!0)}if(Fe){le=this.textLayout.boundsFor(this,qc);if(4>Math.abs(le.top()-lb.y)){if(this.treeData.isBefore(Oc,Zd))return;this.treeData.remove(Oc);this.treeData.addBefore(Oc,Zd)}else if(4>Math.abs(le.bottom()-lb.y)&&(Zd.isCollapsed||this.treeData.isLeaf(Zd))){if(this.treeData.isAfter(Oc,
Zd))return;this.treeData.remove(Oc);this.treeData.addAfter(Oc,Zd)}else{Fe.fill=ab.Color.gray;if(!te)return;this.treeData.remove(Oc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var lb=ab.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:ab.morph({acceptsDrops:!1,reactsToPointer:!1,fill:ab.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=lb;return this._previewNode}},{key:"relayoutContainers",
value:function(){var lb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Sa){return Sa.height});this.treeData.asListWithIndexAndDepth().forEach(function(Sa){var qc=Sa.node;Sa=Sa.i;qc.container.nativeCursor="grab";qc.container.width=lb.width-25-qc.container.left;qc.container.toggleSelected&&qc.container.toggleSelected(Sa==lb.selectedIndex)});this.anchors.forEach(function(Sa){return Sa.position=Sa.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5450,end:10824})}(ab.Tree);ab.InteractiveTree=ec;ab.InteractiveTree=ec;ab.InteractiveTree=ec;ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),od=bd.hasOwnProperty("SceneGraphTree")&&
"function"===typeof bd.SceneGraphTree?bd.SceneGraphTree:bd.SceneGraphTree=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(lb){var Sa=this.treeData.asList().find(function(qc){return qc.container.target===lb});Sa&&this.selectedNode!=Sa&&this.selectPath(this.treeData.pathOf(Sa))}},{key:"onLoad",
value:function(){var lb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return lb.submorphs=[],Sa.yield(lb.whenRendered(),2);lb.get("inspector").makeEditorVisible(!0);lb.get("inspector").makeEditorVisible(!1);lb.setTarget($world);Sa.jumpToEnd()})}},{key:"adjustProportions",value:function(lb){lb=(lb?lb.state.dragDelta:{y:0}).y;var Sa=this.get("inspector"),qc=this.get("scene graph resizer"),le=this.get("mode selector"),Zd=this.get("connections tree");this.height+=
lb;Sa.height-=lb;Zd.height-=lb;qc.top=this.bottom;qc.left=0;le.top=qc.bottom;Zd.top=Sa.top=le.bottom+5}},{key:"reset",value:function(){var lb=this;this.treeData=new ab.InteractiveTreeData({children:[],container:ab.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Sa){return null==Sa.id}).forEach(function(Sa){return lb.removeAnchor(Sa)})}},{key:"setTarget",value:function(lb){this.target=lb;this.treeData=this.getTreeFromSubmorphHierarchy(lb);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(lb){var Sa=this;if(lb===this._previewNode)return!1;if(lb.container.nameNeedsUpdate)return!0;var qc=lb.container.target.submorphs.filter(function(le){return!Sa.ignoreMorph(le)});return qc.length!=lb.children.length||qc.map(function(le){return le.name}).join("")!=lb.children.map(function(le){return le.target?le.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(lb){var Sa=this,qc=lb.container.target.submorphs.map(function(te){return te.__scene_graph_target__?
te.__scene_graph_target__():te}).filter(function(te){return!Sa.ignoreMorph(te)}),le=[],Zd={},Fe;for(Fe in qc){Zd.$jscomp$loop$prop$m$2423=qc[Fe];var Oc=ab.arr.without(lb.children,this._previewNode).find(function(te){return function(md){return md.container.target.id==te.$jscomp$loop$prop$m$2423.id}}(Zd));le[Fe]=Oc?Oc:this.readMorphHierarchy(Zd.$jscomp$loop$prop$m$2423);Zd={$jscomp$loop$prop$m$2423:Zd.$jscomp$loop$prop$m$2423}}return le}},{key:"refresh",value:function(){var lb=this;if(!this._updating&&
!this._dropInProgress){var Sa=!1;ab.tree.prewalk(this.treeData.root,function(qc){lb.isNodeOutOfSync(qc)&&(Sa=!0,qc.name=qc.container.target.name,qc.container.refresh(),qc.children=lb.getNewChildren(qc))},function(qc){return qc.children});this.update(Sa)}}},{key:"ignoreMorph",value:function(lb){return lb.isMorph?lb.isContainer||lb.isWindow||lb.getWindow()||lb.isEpiMorph||lb.isHand||["lively.halos"].includes(lb.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(lb.constructor.name):!1}},{key:"onDropHoverOut",value:function(lb){var Sa=lb.hand.grabbedMorphs[0];lb=lb.hand.findDropTarget();if(!(lb===this||lb&&lb.ownerChain().includes(this))&&Sa&&Sa.isContainer)Sa.onDragOutside()}},{key:"onDropHoverIn",value:function(lb){var Sa=lb.hand.grabbedMorphs[0];Sa&&!Sa.isContainer&&($world.halos().forEach(function(qc){return qc.remove()}),Sa.remove(),Object.assign(Sa,lb.hand._grabbedMorphProperties.get(Sa).pointerAndShadow),Sa=this.renderContainerFor(Sa,
!1),lb.hand.grab(Sa),Sa.leftCenter=ab.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(lb){return new ab.InteractiveTreeData(this.readMorphHierarchy(lb))}},{key:"readMorphHierarchy",value:function(lb){var Sa=this;return ab.tree.mapTree(lb,function(qc,le){return{name:qc.name,isCollapsed:!0,container:Sa.renderContainerFor(qc),visible:!0,children:le}},function(qc){return qc.submorphs.filter(function(le){return qc.isWorld?!Sa.ignoreMorph(le):!0})})}},{key:"renderContainerFor",value:function(lb,
Sa){lb=void 0===lb?ab.morph({name:"root"}):lb;Sa=new ab.MorphContainer({tree:this,fill:void 0===Sa||Sa?ab.Color.transparent:ab.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:lb,opacity:lb.visible?1:.5});lb._data?(Sa._data=lb._data,lb._data.container=Sa):Sa._data={name:lb.name,isCollapsed:!0,container:Sa,children:[]};return Sa}},{key:"collapseAll",value:function(){var lb=this;this.treeData.asList().forEach(function(Sa){return Sa!=lb.treeData.root?Sa.isCollapsed=
!0:Sa.isCollapsed=!1})}},{key:"filterMorphs",value:function(lb){var Sa=this,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return qc=lb.tokens[0],Sa.treeData.filterActive||(Sa._collapseState=new WeakMap(Sa.treeData.asList().map(function(Zd){return[Zd,Zd.isCollapsed]}))),Sa.treeData.filterActive=!!qc,le.yield(Sa.treeData.filter(function(Zd){var Fe=!qc||Zd.container.target.name.includes(qc);Zd.container.highlightTerm(qc);return Fe},3),2);Sa.treeData.filterActive||
Sa.treeData.asList().forEach(function(Zd){return Zd.isCollapsed=Sa._collapseState.has(Zd)?Sa._collapseState.get(Zd):!0});Sa.refresh();le.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10833,end:17350})}(ab.InteractiveTree);ab.SceneGraphTree=ec;ab.SceneGraphTree=ec;ab.SceneGraphTree=ec;ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),od=bd.hasOwnProperty("MorphContainer")&&"function"===typeof bd.MorphContainer?bd.MorphContainer:bd.MorphContainer=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"refresh",value:function(){var lb=
this,Sa,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){Sa=lb.target;if(!Sa)return le.return();lb.reactsToPointer=!0;lb.dropShadow=!1;lb.submorphs=[lb.getLabel(),Sa.layout&&lb.getLayoutControls(),lb.getConnectionControls()].filter(Boolean).map(function(Zd,Fe){Zd.fitIfNeeded();Zd.left=qc?qc.right+5:0;Zd.top=2;return qc=Zd});lb.height=20;lb.opacity=Sa.visible?1:.5;le.jumpToEnd()})}},{key:"getLabel",value:function(){var lb=this.getSubmorphNamed("name label")||ab.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:ab.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Sa=lb.textString.slice(2,-1);Sa&&Sa==this.target.name||(lb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return lb}},{key:"getIcon",value:function(lb){return ab.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[ab.getClassName(lb)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var lb=this.getSubmorphNamed("layout label")||ab.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:ab.Rectangle.inset(4,2,4,2),fill:ab.Color.orange,fontColor:ab.Color.white});lb._isControlElement=!0;lb.textString!=this.target.layout.name()&&(lb.value=this.target.layout.name());return lb}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(qc){return!qc.targetObj.isHalo}).length:0;var lb=this.getSubmorphNamed("connections label")||ab.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:ab.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:ab.Color.red,fontColor:ab.Color.white});lb._isControlElement=!0;lb.visible=!this.connectionHalo&&!!this.connectionCount;var Sa=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";lb.textString!=Sa&&(lb.value=Sa);return lb}},{key:"highlightTerm",value:function(lb){var Sa=this.submorphs[0],qc=Sa.textAndAttributes.slice(0,2),le=Sa.textString.slice(1).split(lb);Sa.textAndAttributes=1===le.length?[].concat($jscomp.arrayFromIterable(qc),[le[0]]):[].concat($jscomp.arrayFromIterable(qc),$jscomp.arrayFromIterable(ab.arr.flatten(ab.arr.interpose(le.map(function(Zd){return[Zd,{}]}),[lb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(lb){var Sa=Ba._get(Object.getPrototypeOf(od.prototype),"wantsToBeDroppedOn",this).call(this,lb);if(![lb].concat($jscomp.arrayFromIterable(lb.ownerChain())).includes(this.tree))this.onDragOutside();return Sa}},{key:"onGrab",value:function(lb){var Sa=this,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){if(1==le.nextAddress)return Sa.tree._dropInProgress=!0,qc=Sa.target.globalPosition,Ba._get(Object.getPrototypeOf(od.prototype),
"onGrab",Sa).call(Sa,lb),Sa._data.globalTargetPosition=qc,le.yield(Sa.whenRendered(),2);if(Sa.tree.fullContainsWorldPoint(Sa.globalPosition))Sa.leftCenter=ab.pt(-20,0);else Sa.onDragOutside();Sa.tree._dropInProgress=!1;le.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=ab.fun.createQueue("container-hover-queue",function(lb,Sa){var qc,le,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){if(1==Fe.nextAddress)return qc=
lb.target,le=qc.opacity,Zd=qc.scale,lb.target.opacity=0,lb.target.scale=.5,$world.halos().forEach(function(Oc){return Oc.remove()}),$world.firstHand.grab(lb.target),lb.target._data=lb._data,lb.remove(),lb.target.position=ab.pt(0,0),Fe.yield(lb.target.animate({opacity:le,scale:Zd,duration:200}),2);Sa();Fe.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(lb){var Sa=this.node.children.indexOf(lb.node||lb._data)+1;Sa=this.node.children[Sa];lb.target.remove();Sa?(Sa=this.target.submorphs.indexOf(Sa.container.target),
this.target.addMorphAt(lb.target,Sa)):this.target.addMorph(lb.target);lb._data.globalTargetPosition&&(lb.target.position=this.target.localize(lb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(lb){}},{key:"toggleConnectionControl",value:function(lb){this.getSubmorphNamed("connections label").visible=lb}},{key:"toggleSelected",value:function(lb){var Sa=this,qc,le,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){if(1==Fe.nextAddress)return Ba._get(Object.getPrototypeOf(od.prototype),
"toggleSelected",Sa).call(Sa,lb),Sa._active===lb?Fe.return():(Sa._active=lb)&&Sa.target&&Sa.target.isMorph&&Sa.world()?Fe.yield(Sa.target.whenRendered(),3):Fe.jumpTo(0);Sa.get("inspector").targetObject=Sa.target;Sa.get("connections tree").inspectConnectionsOf(Sa.target);if(Sa.connectionHalo)return Fe.return();qc=$jscomp.makeIterator(Sa.world().halos());for(le=qc.next();!le.done;le=qc.next()){Zd=le.value;if(Zd.target===Sa.target)return Fe.return();Zd.remove()}ab.noUpdate({sourceObj:Sa.world(),targetObj:Sa.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Sa.world().showHaloFor(Sa.target)});Fe.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(lb){this.submorphs[0].fontFamily=lb}},fontColor:{after:["submorphs"],derived:!0,set:function(lb){this.submorphs[0].fontColor=lb}},fontSize:{derived:!0,set:function(lb){this.submorphs[0].fontSize=
lb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],bd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17359,end:25031})}(ab.InteractiveTreeContainer);ab.MorphContainer=ec;ab.MorphContainer=ec;ab.MorphContainer=ec;var Rc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Rc.visualizeConnection=function(pb,bd,od,lb,Sa){lb=void 0===lb?{}:lb;Sa=Rc.rect(0).sides.concat(Rc.rect(0).corners);
od=od||new Rc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Rc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Rc.Color.transparent,nativeCursor:"auto"},end:{fill:Rc.Color.orange}}},lb,{hasFixedPosition:!0}));od.startPoint.attachTo(pb,"rightCenter");bd.isMorph?(lb=bd.globalBounds().partNameNearest(Sa,pb.globalPosition),pb.globalPosition.equals(bd.globalBounds().partNamed(lb))&&bd.globalBounds().partNameNearest(Rc.arr.without(Sa,lb),pb.globalPosition),od.endPoint.attachTo(bd,
"leftCenter")):(Sa=pb.globalBounds().topRight().addPt(Rc.pt(100,0)),bd=Rc.morph({type:"label",value:bd.toString(),styleClasses:["Tooltip"],padding:Rc.rect(8,4)}).openInWorld(Sa),bd.position=pb.world().bounds().translateForInclusion(bd.bounds()).topLeft(),Rc.once(od,"remove",bd,"remove"),od.endPoint.attachTo(bd,"leftCenter"));return od};Rc.startConnecting=function(pb,bd){pb.animate({opacity:.8,duration:300});pb.startPoint.attachTo(bd,"center");pb.vertices[0].position=Rc.pt(2,2)};Rc.stopConnecting=
function(pb,bd,od,lb){function Sa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){if(1==Fe.nextAddress)return Fe.yield(pb.animate({opacity:0,duration:300}),2);pb.startPoint.clearConnection();pb.endPoint.clearConnection();pb.remove();Fe.jumpToEnd()})}lb=void 0===lb?!1:lb;var qc,le,Zd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){return 1==Fe.nextAddress?(qc=pb,le=qc.endPoint,(Zd=le.connectedMorph)&&"MorphContainer"==Zd.constructor.className&&(Zd=Zd.target),Zd?Fe.yield(Rc.interactiveConnectGivenSourceAndTarget(od,
lb,Zd),2):Fe.jumpTo(2)):Fe.yield(Sa(),0)})};Rc.editConnection=function(pb){var bd=pb.connection,od=pb.connectionPoint,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return lb=Rc.visualizeConnection(od,bd.targetObj,!1,{borderColor:Rc.Color.gray.darker(),endpointStyle:{start:{fill:Rc.Color.transparent,nativeCursor:"auto"},end:{fill:Rc.Color.gray.darker()}}}),Sa.yield(Rc.interactivelyReEvaluateConnection(bd,"Edit Connection",!1),2);lb.remove();Sa.jumpToEnd()})};
Rc.Tree=pc;Rc.TreeData=oc;Rc.Icon=hc;Rc.morph=Ld;Rc.pt=Xb;Rc.Rectangle=rb;Rc.rect=Lc;Rc.Color=dd;Rc.arr=rd;Rc.connect=ad;Rc.signal=wb;Rc.Leash=Nb;Rc.once=cb;Rc.interactivelyReEvaluateConnection=Yb;Rc.interactiveConnectGivenSource=Ga;Rc.interactiveConnectGivenSourceAndTarget=La;(function(pb){var bd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),od=bd.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof bd.ConnectionsTreeData?bd.ConnectionsTreeData:bd.ConnectionsTreeData=function(lb){lb&&
lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ba(od,pb,[{key:"parseMorphConnections",value:function(lb){for(var Sa={},qc=$jscomp.makeIterator(void 0===lb.attributeConnections?[]:lb.attributeConnections),le=qc.next();!le.done;le=qc.next())le=le.value,le.targetObj.isHalo||(Sa[le.sourceAttrName]=Sa[le.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Rc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(lb,le.sourceAttrName),
{}]}],Rc.arr.pushAt(Sa[le.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(le)))},0));return{children:Object.entries(Sa).map(function(Zd){var Fe=$jscomp.makeIterator(Zd);Zd=Fe.next().value;Fe=Fe.next().value;return{name:[Zd,{fontWeight:"bold"}," ",{},Rc.morph({fill:Rc.Color.white,opacity:.7,value:""+(Fe.length-1),borderRadius:15,fontWeight:"bold",padding:Rc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Fe}}).concat([{name:["New Connection  ",
{fontColor:Rc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(lb),{}]}])}}},{key:"renderExistingConnection",value:function(lb){var Sa=this,qc=Rc.morph({type:"label",fontColor:Rc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Rc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},lb.targetMethodName,{}])}),le=this.renderDeadPin(),Zd=le.submorphs[0];Rc.connect(qc,"onHoverIn",function(){qc.fontColor=Rc.Color.orange;qc._leash=Rc.visualizeConnection(Zd,
lb.targetObj,qc._leash);Zd.fill=Rc.Color.orange;Zd.border={color:Rc.Color.orange,width:3}});Rc.connect(qc,"onMouseDown",function(Fe){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return Fe.stop(),Oc.yield(Rc.interactivelyReEvaluateConnection(lb),2);Rc.signal(Sa,"refresh");Oc.jumpToEnd()})});Rc.connect(qc,"onHoverOut",function(){qc.fontColor=Rc.Color.gray;Zd.fill=Rc.Color.gray;Zd.border={color:Rc.Color.white,width:1};qc._leash.remove();qc._leash=void 0});return[qc,
{},"  ",{}].concat($jscomp.arrayFromIterable(Rc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){lb.disconnect();Rc.signal(Sa,"refresh")}})),["  ",{},le,{}])}},{key:"renderDeadPin",value:function(){var lb=Rc.morph({type:"ellipse",fill:Rc.Color.gray,extent:Rc.pt(10,10),center:Rc.pt(8,12),borderWidth:1});return Rc.morph({extent:Rc.pt(20,20),fill:Rc.Color.transparent,reactsToPointer:!1,submorphs:[lb]})}},{key:"renderPin",value:function(lb,Sa){var qc=this,le=Rc.morph({type:"ellipse",
fill:Rc.Color.gray.withA(.5),extent:Rc.pt(10,10),center:Rc.pt(8,12),draggable:!1,borderWidth:1}),Zd=new Rc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Rc.Color.gray.darker(),endpointStyle:{fill:Rc.Color.gray.darker()},position:Rc.pt(1,1),vertices:[Rc.pt(0,0),Rc.pt(0,0)],canConnectTo:function(Fe){return"MorphContainer"==Fe.constructor.className||2>Rc.arr.intersect([Fe].concat($jscomp.arrayFromIterable(Fe.ownerChain())),[le].concat($jscomp.arrayFromIterable(le.ownerChain()))).length}});
le.addMorph(Zd);Rc.connect(Zd.endPoint,"onDragStart",function(){Rc.startConnecting(Zd,le)});Rc.connect(Zd.endPoint,"onDragEnd",function(Fe){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return le.center=Rc.pt(8,12),Oc.yield(Rc.stopConnecting(Zd,le,lb,Sa),2);Rc.signal(qc,"refresh");Oc.jumpToEnd()})});return Rc.morph({extent:Rc.pt(20,20),fill:Rc.Color.transparent,reactsToPointer:!1,submorphs:[le]})}},{key:"display",value:function(lb){return lb.name}},{key:"collapse",
value:function(lb,Sa){lb.isCollapsed=Sa}},{key:"isCollapsed",value:function(lb){return lb.isCollapsed}},{key:"isLeaf",value:function(lb){return!lb.children}},{key:"getChildren",value:function(lb){return lb.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(lb){var Sa=new this;Sa.root=Sa.parseMorphConnections(lb);return Sa}}],bd,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3524,end:8076})})(Rc.TreeData);ec=function(pb){var bd=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),od=bd.hasOwnProperty("ConnectionsTree")&&"function"===typeof bd.ConnectionsTree?bd.ConnectionsTree:bd.ConnectionsTree=function(lb){lb&&lb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Ba(od,pb,[{key:"inspectConnectionsOf",value:function(lb){if(this.targetMorph=lb)this.treeData=Rc.ConnectionsTreeData.for(lb),Rc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Rc.ConnectionsTreeData.for(this.targetMorph),Rc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],bd,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8093,end:8646})}(Rc.Tree);ec=Rc.ConnectionsTree;Rc.default=ec}}});