System.register("./__root_module__-073d42f8.js kld-intersections ./index-ae6defdd.js ./index-88d60c6b.js ./editor-plugin-4637c93d.js ./editor-plugin-31b338b4.js ./index-b2fd99ec.js ./index-019f6ab8.js ./index-88f79cd5.js".split(" "),function(){var $a,Vb,jc,Wc,wc,Ud,Kd,he,xd,gd,Ld,Pd,af,bf,Ve,Ad,xe,qc,td,be,Bd,pe,Se,nc,$c,ge,ad,ie,Yb,zb,Rc,Mc,tc;return{setters:[function(Tc){$a=Tc.i;Vb=Tc.M;jc=Tc.t;Wc=Tc.e;wc=Tc.p;Ud=Tc.f;Kd=Tc.d;he=Tc.o;xd=Tc.C;gd=Tc.a2;Ld=Tc.b;Pd=Tc.m;af=Tc.bH;bf=Tc.N;Ve=Tc.bE;
Ad=Tc.bB;xe=Tc.I;qc=Tc.ah;td=Tc.R;be=Tc.bD;Bd=Tc.a1;pe=Tc.az;Se=Tc._;nc=Tc.n;$c=Tc.a3;ge=Tc.a;ad=Tc.a0;ie=Tc.bI;Yb=Tc.g},function(){},function(Tc){zb=Tc.e;Rc=Tc.s;Mc=Tc.I},function(){},function(Tc){tc=Tc.I},function(){},function(){},function(){},function(){}],execute:function(){function Tc(La){var Ua=La.sourceObj,Sb=La.targetObj;Ua.isMorph&&Sb.isMorph?(Ua.show(),Sb.show(),bb.showConnector&&bb.showConnector(Ua,Sb)):bb.show(String(La))}function fb(La){var Ua=La.sourceObj,Sb=La.sourceAttrName,Ca=La.targetObj,
Va=La.targetMethodName,dc=La.getConverter();La=La.getUpdater();return bb.printConnectionElements(Ua,Sb,Ca,Va,dc,La)}function uc(La,Ua,Sb,Ca,Va,dc){La="/* global connect, source, target */\nconnect(source, '"+Ua+"', target, '"+Ca+"'";if(Va||dc)La+=", {\n";Va&&(La+="  converter: "+Va);Va&&dc&&(La+=",");Va&&(La+="\n");dc&&(La+="  updater: "+dc+"\n");if(Va||dc)La+="}";return La+");"}function Rb(La,Ua){var Sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return Ca.yield(bb.InteractiveMorphSelector.selectMorph(),
2);Sb=Ca.yieldResult;return Ca.return(Sb?bb.interactiveConnectGivenSourceAndTarget(La,Ua,Sb):null)})}function Fc(La,Ua,Sb,Ca){var Va,dc,sb,od,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){switch(Td.nextAddress){case 1:Va=Sb&&Sb.world().targetDataBindings(Sb);dc=La.world();if(!Va||!Va.length)return dc.setStatusMessage("connect canceled"),Td.return();if(Ua){Td.jumpTo(2);break}sb=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(bb.arr.flatten(La.world().targetDataBindings(La)).map(function(rd){return{isListItem:!0,
string:rd.signature||rd.name,value:rd}})));return Td.yield(dc.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],sb,{filterable:!0}),3);case 3:Ua=Td.yieldResult;if("canceled"==Ua.status)return Td.return();Ua=Ua.selected[0];Ua=Ua.custom?"sourceAttribute":Ua.name;case 2:return od=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(bb.arr.flatten(Va).map(function(rd){return{isListItem:!0,value:rd,string:rd.signature||rd.name}}))),Td.yield(dc.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],od,{filterable:!0}),4);case 4:bc=Td.yieldResult;if("canceled"==bc.status)return Td.return();bc=bc.selected[0];return Td.yield(bb.interactivelyEvaluateConnection({sourceObj:La,sourceAttr:Ua,targetObj:Sb,targetAttr:bc.custom?"targetAttribute":bc.name,onConnect:Ca,prompt:"Edit and confirm connection:"}),0)}})}function Uc(La,Ua,Sb,Ca){Ua=void 0===Ua?"confirm connection":Ua;var Va,dc,sb,od,bc,Td,rd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dd){Va=
La;dc=Va.sourceObj;sb=Va.sourceAttrName;od=Va.targetObj;bc=Va.targetMethodName;Td=La.getConverter();rd=La.getUpdater();return dd.return(bb.interactivelyEvaluateConnection({sourceObj:dc,sourceAttr:sb,targetObj:od,targetAttr:bc,converter:Td,updater:rd,prompt:Ua,highlight:Sb,onConnect:Ca}))})}function vd(La,Ua,Sb,Ca,Va){Ca=void 0===Ca?{}:Ca;Va=bb.rect(0).sides.concat(bb.rect(0).corners);Sb=Sb||new bb.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:bb.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:bb.Color.transparent,
nativeCursor:"auto"},end:{fill:bb.Color.orange}}},Ca,{hasFixedPosition:!0}));Sb.startPoint.attachTo(La,"rightCenter");Ua.isMorph?(Ca=Ua.globalBounds().partNameNearest(Va,La.globalPosition),La.globalPosition.equals(Ua.globalBounds().partNamed(Ca))&&Ua.globalBounds().partNameNearest(bb.arr.without(Va,Ca),La.globalPosition),Sb.endPoint.attachTo(Ua,"leftCenter")):(Va=La.globalBounds().topRight().addPt(bb.pt(100,0)),Ua=bb.morph({type:"label",value:Ua.toString(),styleClasses:["Tooltip"],padding:bb.rect(8,
4)}).openInWorld(Va),Ua.position=La.world().bounds().translateForInclusion(Ua.bounds()).topLeft(),bb.once(Sb,"remove",Ua,"remove"),Sb.endPoint.attachTo(Ua,"leftCenter"));return Sb}function Xd(La){var Ua,Sb,Ca,Va,dc,sb,od,bc,Td,rd,dd,Ub,Ne,gc,Tb,Ya,ha,Pa,nb,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lc){switch(Lc.nextAddress){case 1:Ua=La;Sb=Ua.sourceObj;Ca=Ua.sourceAttr;Va=Ua.targetObj;dc=Ua.targetAttr;sb=Ua.converter;od=Ua.updater;bc=Ua.prompt;Td=void 0===Ua.highlight?!0:Ua.highlight;
rd=Ua.onConnect;dd="lively://lively.bindings-interactive-connect/x"+Sb.id;Ub={context:window,format:"esm",targetModule:dd,classTransform:bb.classToFunctionTransform};Ne=bb.printConnectionElements(Sb,Ca,Va,dc,sb,od);Va.isMorph&&Sb.isMorph&&(gc=Va.propertiesAndPropertySettings().properties[dc]||{type:typeof Va[dc]},Tb=gc.type,Ya=Sb.propertiesAndPropertySettings().properties[Ca]||{type:typeof Sb[Ca]},ha=Ya.type,ha!==Tb&&(bc=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Sb.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Va.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Pa={};Object.assign(lively.modules.module(dd).recorder,(Pa.source=Sb,Pa.target=Va,Pa.connect=bb.connect,Pa.once=bb.once,Pa[Ca]=Sb[Ca],Pa));if(!bc){nb=Ne;Lc.jumpTo(2);break}return Lc.yield($world.editPrompt(bc,{input:Ne,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Ub,
animated:!1}),3);case 3:if(nb=Lc.yieldResult,!nb)return $world.setStatusMessage("connect canceled"),Lc.return();case 2:return Lc.yield(lively.vm.runEval(nb,Ub),4);case 4:cc=Lc.yieldResult;if(cc.isError)return $world.logError(cc.value),Lc.return(Xd({sourceObj:Sb,sourceAttr:Ca,targetObj:Va,targetAttr:dc,converter:sb,updater:od,prompt:"confirm connection",highlight:Td,onConnect:rd}));Td&&($world.setStatusMessage("connected!",bb.Color.green),bb.interactivelyShowConnection(cc.value));"function"===typeof rd&&
rd(cc);Lc.jumpToEnd()}})}var vc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");vc.Inspector=tc;var Oc=function(La){var Ua=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Sb=Ua.hasOwnProperty("ProtoInspector")&&"function"===typeof Ua.ProtoInspector?Ua.ProtoInspector:Ua.ProtoInspector=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(vc.Inspector);Oc=vc.ProtoInspector;vc.default=Oc;var pc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
pc.Morph=Vb;pc.touchInputDevice=jc;pc.easings=Wc;pc.pt=wc;pc.fun=Ud;pc.connect=Kd;vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Sb=Ua.hasOwnProperty("MorphicSideBar")&&"function"===typeof Ua.MorphicSideBar?Ua.MorphicSideBar:Ua.MorphicSideBar=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(Ca){Ca=void 0===Ca?!0:Ca;if(this.respondsToVisibleWindow){var Va=$world.visibleBounds(),dc=navigator.standalone&&pc.touchInputDevice?25:0;this.height=Va.height-dc;this.top=dc+Va.top();dc=this.get("horizontal resizer");dc.height=this.height;dc.top=0;Ca&&(this.visible?this.topLeft=Va.topLeft():this.topRight=Va.topLeft())}}},{key:"switchMode",value:function(Ca){"inspector"==Ca&&this.showInspector();"connections"==Ca&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Ca){var Va=this,dc,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(od){switch(od.nextAddress){case 1:dc=$world.visibleBounds();sb=navigator.standalone&&pc.touchInputDevice?25:0;Va.height=dc.height-sb;Va.top=sb+dc.top();if(Ca)return $world.addMorph(Va,$world.get("lively top bar")),Va.topRight=dc.topLeft(),
Va.attachToWorld($world),Va.visible=!0,od.yield(Va.whenRendered(),5);Va.detachFromWorld($world);return od.yield(Va.animate({opacity:0,topRight:dc.topLeft(),duration:300}),4);case 4:Va.visible=!1;Va.remove();od.jumpTo(0);break;case 5:return Va.onWorldResize(!1),Va.get("scene graph").adjustProportions(),od.yield(Va.animate({opacity:1,easing:pc.easings.outCirc,topLeft:dc.topLeft(),duration:300}),6);case 6:Va.get("scene graph").refresh(),od.jumpToEnd()}})}},{key:"attachToWorld",value:function(Ca){pc.connect(Ca,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});pc.connect(Ca,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});pc.connect(Ca,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ca){var Va=this;Ca.attributeConnections.forEach(function(dc){dc.targetObj===Va&&dc.disconnect()})}},{key:"selectNode",value:function(Ca){this.getSubmorphNamed("scene graph").selectMorphInTarget(Ca);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Ca)}},
{key:"onHierarchyChange",value:function(Ca){var Va=this,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if("addMorphAt"===Ca.selector||"removeMorph"===Ca.selector||"name"===Ca.prop){dc=Va._sceneGraph||(Va._sceneGraph=Va.getSubmorphNamed("scene graph"));if(!dc||!dc.owner.visible||Ca.target&&Ca.target.isHand||Ca.target&&dc.ignoreMorph(Ca.target)||Ca.args&&!Ca.args[0].isHalo&&dc.ignoreMorph(Ca.args[0])||Ca.target.ownerChain().find(function(od){return dc.ignoreMorph(od)}))return sb.return();
pc.fun.debounceNamed("scene-graph-update",50,function(){return dc.refresh()})()}sb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(pc.Morph);vc=pc.MorphicSideBar;pc.default=vc;var bb=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");bb.interactivelyShowConnection=Tc;bb.printConnection=fb;bb.printConnectionElements=uc;bb.interactiveConnectGivenSource=Rb;bb.interactiveConnectGivenSourceAndTarget=Fc;bb.interactivelyReEvaluateConnection=Uc;bb.visualizeConnection=vd;bb.interactivelyEvaluateConnection=Xd;bb.connect=Kd;bb.once=he;bb.Color=xd;bb.rect=gd;bb.pt=wc;bb.arr=Ld;bb.morph=Pd;bb.Leash=af;bb.showConnector=
zb;bb.show=Rc;bb.InteractiveMorphSelector=Mc;bb.classToFunctionTransform=bf;bb.interactivelyShowConnection=Tc;bb.interactivelyShowConnection=Tc;bb.printConnection=fb;bb.printConnection=fb;bb.printConnectionElements=uc;bb.printConnectionElements=uc;bb.interactiveConnectGivenSource=Rb;bb.interactiveConnectGivenSource=Rb;bb.interactiveConnectGivenSourceAndTarget=Fc;bb.interactiveConnectGivenSourceAndTarget=Fc;bb.interactivelyReEvaluateConnection=Uc;bb.interactivelyReEvaluateConnection=Uc;bb.visualizeConnection=
vd;bb.visualizeConnection=vd;bb.interactivelyEvaluateConnection=Xd;bb.interactivelyEvaluateConnection=Xd;var Ma=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Ma.Tree=Ve;Ma.TreeData=Ad;Ma.morph=Pd;Ma.Icon=xe;Ma.HorizontalLayout=qc;Ma.easings=Wc;Ma.Morph=Vb;Ma.Color=xd;Ma.Rectangle=td;Ma.rect=gd;Ma.pt=wc;Ma.connect=Kd;Ma.noUpdate=be;Ma.disconnect=Bd;Ma.disconnectAll=pe;Ma.once=he;Ma.arr=Ld;Ma.obj=Se;Ma.num=nc;Ma.fun=Ud;Ma.tree=$c;Ma.promise=ge;Ma.ConnectionHalo=_missingExportShim;Ma.getClassName=
ad;Ma.TextLayout=ie;vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Ua.InteractiveTreeContainer?Ua.InteractiveTreeContainer:Ua.InteractiveTreeContainer=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"onChildRemoved",value:function(Ca){}},{key:"onChildAdded",value:function(Ca){}},{key:"toggleSelected",
value:function(Ca){if(this.tree){var Va=this.tree,dc=Va.selectionFontColor,sb=Va.nonSelectionFontColor;this.submorphs.filter(function(od){return!od._isControlElement&&od.styleClasses.includes("Label")}).forEach(function(od){od.fontColor=Ca?dc:sb})}}},{key:"onGrab",value:function(Ca){var Va=this.tree,dc=this.node;this.fill=Ma.Color.gray.withA(.5);this.fontColor=Va.selectionFontColor;this.opacity=.8;$a._get(Object.getPrototypeOf(Sb.prototype),"onGrab",this).call(this,Ca);dc&&(this.toggleSelected(!1),
Va.collapse(dc),Va.treeData.parentNode(dc).container.onChildRemoved(this),this._data=Va.treeData.remove(dc),dc.container.target.remove(),Va.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Ca){this.showPreviewOn(Ca);return!0}},{key:"showPreviewOn",value:function(Ca){if(Ca.isContainer)var Va=Ca.tree;Ca.isTree&&(Va=Ca);Va&&Va.showDropPreviewFor&&Va.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Ca){var Va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){if(1==
dc.nextAddress)return Va.tree.treeData.add(Ca._data,Va.node,Va.node.children[0]),Va.tree.uncollapse(Va.node),Va.tree.treeData.remove(Va.tree._previewNode),dc.yield(Va.tree.whenRendered(),2);Va.tree.update(!0);Va.onChildAdded(Ca);dc.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Ca,Va){var dc=this;this.tree._dropInProgress=!0;$a._get(Object.getPrototypeOf(Sb.prototype),"onBeingDroppedOn",this).call(this,Ca,Va);Ca=function(){dc.fill=Ma.Color.gray.withA(.5);dc.opacity=1;dc.tree._dropInProgress=
!1;dc.tree.refresh()};Va.isTree?Va.insertAtPlaceholder(this).then(Ca):Va.isContainer?Va.insertAsChild(this).then(Ca):Ca()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ma.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Ca=this,Va=this.tree.treeData;return Va&&Va.asList().find(function(dc){return dc.container===Ca})}}}}}],Ua,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:559,end:3022})}(Ma.Morph);Ma.InteractiveTreeContainer=vc;Ma.InteractiveTreeContainer=vc;Ma.InteractiveTreeContainer=vc;vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Ua.InteractiveTreeData?
Ua.InteractiveTreeData:Ua.InteractiveTreeData=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"display",value:function(Ca){Ca.container||(Ca.container=Ca.getContainer());return[Ca.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Ca){return Ca.isCollapsed}},{key:"collapse",value:function(Ca,Va){Ca.isCollapsed=Va}},{key:"getChildren",value:function(Ca){return Ca.isLeaf?null:this.filterActive?
Ca.children.filter(function(Va){return Va&&Va.visible}):Ca.children}},{key:"isLeaf",value:function(Ca){return 0==(this.getChildren(Ca)||[]).length}},{key:"add",value:function(Ca,Va,dc){Va=void 0===Va?this.root:Va;Va.children||(Va.children=[]);dc?Ma.arr.pushAt(Va.children,Ca,Va.children.indexOf(dc)):Va.children.push(Ca);Va.isLeaf=!1}},{key:"replace",value:function(Ca,Va){var dc=this.parentNode(Ca);Ca=dc.children.indexOf(Ca);dc.children[Ca]=Va}},{key:"next",value:function(Ca){var Va=this.parentNode(Ca);
return Va&&Va.children[Va.children.indexOf(Ca)+1]}},{key:"isBefore",value:function(Ca,Va){this.next(Ca)===Va}},{key:"isAfter",value:function(Ca,Va){this.next(Va)===Ca}},{key:"addBefore",value:function(Ca,Va){this.add(Ca,this.parentNode(Va),Va)}},{key:"addAfter",value:function(Ca,Va){var dc=this.parentNode(Va);Va=dc.children.indexOf(Va)+1;this.add(Ca,dc,dc.children[Va])}},{key:"remove",value:function(Ca){var Va=this.parentNode(Ca);if(Va)return Ma.arr.remove(Va.children,Ca),Va.children==[]&&(Va.children=
null),Ca}},{key:"filter",value:function(Ca,Va){Va=void 0===Va?1:Va;var dc=this,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(od){if(1==od.nextAddress)return od.yield(dc.uncollapseAll(function(bc,Td){return Td<Va+1}),2);sb=dc.filterActive;dc.filterActive=!1;dc.asListWithIndexAndDepth(!1).reverse().forEach(function(bc){var Td=bc.node;if(0==bc.depth)return Td.visible=!0;Td.visible=Ca(Td);!Td.isCollapsed&&Td.children.find(function(rd){return rd.visible})?(Td.visible=!0,Td.container.opacity=
.5):Td.container.opacity=1;return Td.visible});dc.filterActive=sb;od.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:3031,end:5513})}(Ma.TreeData);Ma.InteractiveTreeData=vc;Ma.InteractiveTreeData=
vc;Ma.InteractiveTreeData=vc;vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("InteractiveTree")&&"function"===typeof Ua.InteractiveTree?Ua.InteractiveTree:Ua.InteractiveTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"update",value:function(Ca){var Va=this;$a._get(Object.getPrototypeOf(Sb.prototype),"update",this).call(this,Ca);this.treeData&&
this.relayoutContainers();Ca&&this.embeddedMorphs.forEach(function(dc){dc.isContainer&&(Ma.obj.equals(dc.fill,Ma.Color.transparent)||(dc.fill=Ma.Color.transparent),dc.fontFamily!=Va.fontFamily&&(dc.fontFamily=Va.fontFamily),dc.fontSize!=Va.fontSize&&(dc.fontSize=Va.fontSize))})}},{key:"onDrop",value:function(Ca){$a._get(Object.getPrototypeOf(Sb.prototype),"onDrop",this).call(this,Ca);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Ca){}},{key:"onDropHoverUpdate",
value:function(Ca){}},{key:"onDropHoverOut",value:function(Ca){}},{key:"onHoverOut",value:function(Ca){var Va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){$a._get(Object.getPrototypeOf(Sb.prototype),"onHoverOut",Va).call(Va,Ca);Va._previewNode&&Va._previewNode.container.world()&&Va.treeData.remove(Va._previewNode);Va.resetContainerSelection();Va.update(!0);dc.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Ca){var Va=this,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==
sb.nextAddress)return dc=Va.treeData.parentNode(Va._previewNode),Va.treeData.replace(Va._previewNode,Ca._data),Va.treeData.remove(Va._previewNode),sb.yield(Va.whenRendered(),2);Va.update(!0);dc.container.onChildAdded(Ca);sb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Ca=this;if(!this._scrollingUp){this._scrollingUp=!0;var Va=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){if(1==dc.nextAddress)return Ca._scrollingUp&&0<Ca.scroll.y?dc.yield(Ca.animate({scroll:Ca.scroll.subXY(0,
30),duration:300,easing:Ma.easings.linear}),3):(Ca._scrollingUp=!1,dc.jumpTo(0));Va();dc.jumpToEnd()})};Va()}}},{key:"scrollDownSlowly",value:function(){var Ca=this;if(!this._scrollingDown){this._scrollingDown=!0;var Va=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(dc){if(1==dc.nextAddress)return Ca._scrollingDown&&Ca.scroll.y<Ca.scrollExtent.y-Ca.height?dc.yield(Ca.animate({scroll:Ca.scroll.addXY(0,30),duration:300,easing:Ma.easings.linear}),3):(Ca._scrollingDown=!1,dc.jumpTo(0));
Va();dc.jumpToEnd()})};Va()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Ca){Ca.isContainer&&(Ca.fill=Ma.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Ca){var Va=this;Ca=this.localize(Ca.globalBounds().center());var dc=this.textPositionFromPoint(Ca),sb=this.treeData.asListWithIndexAndDepth(function(Ub){Ub=Ub.node;return Ub!=Va._previewNode&&Ub.container&&
Ub.container.world()}),od=(sb.find(function(Ub){return Ub.i-1===dc.row})||{}).node,bc=od&&od.container,Td=this.ensurePlaceholder(),rd=!!Td.container.world(),dd=Ca.subPt(this.scroll).subPt(this.scrollbarOffset);10>dd.y?this.scrollUpSlowly():dd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!bc){if(sb.length>dc.row||Ma.arr.last(this.treeData.root.children)===Td)return;this.treeData.remove(Td);this.treeData.add(Td);this.update(!0)}if(bc){sb=this.textLayout.boundsFor(this,
dc);if(4>Math.abs(sb.top()-Ca.y)){if(this.treeData.isBefore(Td,od))return;this.treeData.remove(Td);this.treeData.addBefore(Td,od)}else if(4>Math.abs(sb.bottom()-Ca.y)&&(od.isCollapsed||this.treeData.isLeaf(od))){if(this.treeData.isAfter(Td,od))return;this.treeData.remove(Td);this.treeData.addAfter(Td,od)}else{bc.fill=Ma.Color.gray;if(!rd)return;this.treeData.remove(Td)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Ca=Ma.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Ma.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Ma.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Ca;return this._previewNode}},{key:"relayoutContainers",value:function(){for(var Ca=this.selectedIndex,Va=$jscomp.makeIterator(this.treeData.asListWithIndexAndDepth()),dc=Va.next();!dc.done;dc=Va.next()){var sb=dc.value;dc=sb.node;sb=sb.i;if(dc.container&&this.isLineVisible(sb)){dc.container.nativeCursor="grab";var od=this.width-
25-dc.container.left;dc.container.width!=od&&(dc.container.width=od);dc.container.toggleSelected&&dc.container.toggleSelected(sb==Ca);dc.container.isContainer&&dc.container.getLabel().fitIfNeeded()}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1107"}}},{start:5522,end:11115})}(Ma.Tree);Ma.InteractiveTree=vc;Ma.InteractiveTree=vc;Ma.InteractiveTree=vc;(function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof Ua.SceneGraphTreeLayout?Ua.SceneGraphTreeLayout:Ua.SceneGraphTreeLayout=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"estimateExtentOfLine",
value:function(Ca,Va,dc){dc=void 0===dc?Ca.getGlobalTransform():dc;(dc=Va.textAndAttributes.find(function(sb){return sb.isMorph}))&&Va.changeExtent(Ca.width,dc.height)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},
{start:11117,end:11389})})(Ma.TextLayout);vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("SceneGraphTree")&&"function"===typeof Ua.SceneGraphTree?Ua.SceneGraphTree:Ua.SceneGraphTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Ca){var Va=
this.treeData.asList().find(function(dc){return dc.container&&dc.container.target===Ca});Va&&this.selectedNode!=Va&&this.selectPath(this.treeData.pathOf(Va))}},{key:"onLoad",value:function(){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return Ca.textLayout=new Ma.SceneGraphTreeLayout(Ca),Va.yield(Ca.whenRendered(),2);if(3!=Va.nextAddress){if(Ca.ownerChain().find(function(dc){return dc.isComponent}))return Va.return();Ca.submorphs=[];return Va.yield(Ca.whenRendered(),
3)}Ca.get("inspector").makeEditorVisible(!0);Ca.get("inspector").makeEditorVisible(!1);Ca.setTarget($world);Va.jumpToEnd()})}},{key:"adjustProportions",value:function(Ca){Ca=(Ca?Ca.state.dragDelta:{y:0}).y;var Va=this.get("inspector"),dc=this.get("scene graph resizer"),sb=this.get("mode selector"),od=this.get("connections tree");this.height+=Ca;Va.height-=Ca;od.height-=Ca;dc.top=this.bottom;dc.left=0;sb.top=dc.bottom;od.top=Va.top=sb.bottom+5}},{key:"reset",value:function(){var Ca=this;this.treeData=
new Ma.InteractiveTreeData({children:[],container:Ma.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Va){return null==Va.id}).forEach(function(Va){return Ca.removeAnchor(Va)})}},{key:"setTarget",value:function(Ca){this.target=Ca;this.treeData=this.getTreeFromSubmorphHierarchy(Ca);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Ca){var Va=this;if(Ca===this._previewNode)return!1;if(Ca.container.nameNeedsUpdate)return!0;
var dc=Ca.container.target.submorphs.filter(function(sb){return!Va.ignoreMorph(sb)});return dc.length!=Ca.children.length||dc.map(function(sb){return sb.name}).join("")!=Ca.children.map(function(sb){return sb.target?sb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Ca){var Va=this,dc=Ca.container.target.submorphs.map(function(rd){return rd.__scene_graph_target__?rd.__scene_graph_target__():rd}).filter(function(rd){return!Va.ignoreMorph(rd)}),sb=[],od={},bc;for(bc in dc){od.$jscomp$loop$prop$m$2992=
dc[bc];var Td=Ma.arr.without(Ca.children,this._previewNode).find(function(rd){return function(dd){return dd.container&&dd.container.target.id==rd.$jscomp$loop$prop$m$2992.id}}(od));sb[bc]=Td?Td:this.readMorphHierarchy(od.$jscomp$loop$prop$m$2992);od={$jscomp$loop$prop$m$2992:od.$jscomp$loop$prop$m$2992}}return sb}},{key:"refresh",value:function(){var Ca=this;if(!this._updating&&!this._dropInProgress){var Va=!1;Ma.tree.prewalk(this.treeData.root,function(dc){dc.container&&Ca.isNodeOutOfSync(dc)&&(console.log("change node",
dc),Va=!0,dc.name=dc.container.target.name,dc.container.refresh(),dc.children=Ca.getNewChildren(dc))},function(dc){return dc.children});this.update(Va)}}},{key:"ignoreMorph",value:function(Ca){return Ca.isMorph?Ca.isContainer||Ca.isWindow||Ca.getWindow()||Ca.isEpiMorph||Ca.isHand||["lively.halos"].includes(Ca.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(Ca.constructor.name):!1}},{key:"onDropHoverOut",
value:function(Ca){var Va=Ca.hand.grabbedMorphs[0];Ca=Ca.hand.findDropTarget();if(!(Ca===this||Ca&&Ca.ownerChain().includes(this))&&Va&&Va.isContainer)Va.onDragOutside()}},{key:"onDropHoverIn",value:function(Ca){var Va=Ca.hand.grabbedMorphs[0];Va&&!Va.isContainer&&($world.halos().forEach(function(dc){return dc.remove()}),Va.remove(),Object.assign(Va,Ca.hand._grabbedMorphProperties.get(Va).pointerAndShadow),Va=this.renderContainerFor(Va,!1),Ca.hand.grab(Va),Va.leftCenter=Ma.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(Ca){return new Ma.InteractiveTreeData(this.readMorphHierarchy(Ca))}},{key:"readMorphHierarchy",value:function(Ca){var Va=this;return Ma.tree.mapTree(Ca,function(dc,sb){return{name:dc.name,isCollapsed:!0,getContainer:function(){return Va.renderContainerFor(dc)},visible:!0,children:sb}},function(dc){return dc.submorphs.filter(function(sb){return dc.isWorld?!Va.ignoreMorph(sb):!0})})}},{key:"renderContainerFor",value:function(Ca,Va){Ca=void 0===Ca?Ma.morph({name:"root"}):Ca;Va=void 0===
Va?!0:Va;var dc=new Ma.MorphContainer({tree:this,fill:Va?Ma.Color.transparent:Ma.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Ca,opacity:Ca.visible?1:.5});Va||(dc.layout=new Ma.HorizontalLayout({spacing:2,align:"center"}));Ca._data?(dc._data=Ca._data,Ca._data.container=dc):dc._data={name:Ca.name,isCollapsed:!0,container:dc,children:[]};dc.whenRendered().then(function(){return dc.refresh()});return dc}},{key:"collapseAll",value:function(){var Ca=this;
this.treeData.asList().forEach(function(Va){return Va!=Ca.treeData.root?Va.isCollapsed=!0:Va.isCollapsed=!1})}},{key:"filterMorphs",value:function(Ca){var Va=this,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress)return dc=Ca.tokens[0],Va.treeData.filterActive||Va._collapseState||(Va._collapseState=new WeakMap(Va.treeData.asList().map(function(od){return[od,od.isCollapsed]}))),Va.treeData.filterActive=!!dc,sb.yield(Va.treeData.filter(function(od){var bc=!!dc&&
od.name.includes(dc);od.container||(od.container=od.getContainer());bc?od.container.highlightTerm(dc):od.container.highlightTerm();return bc},3),2);Va.treeData.filterActive||(Va.treeData.asList().forEach(function(od){od.container&&od.container.highlightTerm();od.visible=!0;od.isCollapsed=Va._collapseState.has(od)?Va._collapseState.get(od):!0}),Va._collapseState=null);Va.refresh();sb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",
get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new Ma.SceneGraphTreeLayout(this)}}}}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:11398,end:18901})}(Ma.InteractiveTree);Ma.SceneGraphTree=vc;Ma.SceneGraphTree=vc;Ma.SceneGraphTree=
vc;vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Sb=Ua.hasOwnProperty("MorphContainer")&&"function"===typeof Ua.MorphContainer?Ua.MorphContainer:Ua.MorphContainer=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"refresh",value:function(){var Ca=this,Va,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){Va=Ca.target;if(!Va)return sb.return();
Ca.reactsToPointer=!0;Ca.dropShadow=!1;Ca.submorphs=[Ca.getLabel(),0<Va.comments.length&&Ca.getCommentControls(),Va.layout&&Ca.getLayoutControls(),Ca.getConnectionControls()].filter(Boolean).map(function(od,bc){od.fitIfNeeded();od.left=dc?dc.right+5:0;od.top=2;return dc=od});Ca.height=20;Ca.opacity=Va.visible?1:.5;sb.jumpToEnd()})}},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var Ca=this.getSubmorphNamed("name label")||Ma.morph({type:"label",name:"name label",reactsToPointer:!1,
padding:Ma.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Va=Ca.textString.slice(2,-1);Va&&Va==this.target.name||(Ca.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Ca}},{key:"getIcon",value:function(Ca){return Ma.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Ma.getClassName(Ca)]||"codepen",{paddingTop:"4px",
fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Ca=this.getSubmorphNamed("layout label")||Ma.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Ma.Rectangle.inset(4,2,4,2),fill:Ma.Color.orange,fontColor:Ma.Color.white});Ca._isControlElement=!0;Ca.textString!=this.target.layout.name()&&(Ca.value=this.target.layout.name());return Ca}},{key:"getCommentControls",value:function(){var Ca=this.getSubmorphNamed("comment label")||Ma.morph({type:"label",
name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Ma.Rectangle.inset(4,2,4,2),fill:Ma.Color.rgb(241,196,15),fontColor:Ma.Color.black});Ca._isControlElement=!0;var Va=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");Ca.textString!=Va&&(Ca.value=Va);return Ca}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(dc){return!dc.targetObj.isHalo}).length:
0;var Ca=this.getSubmorphNamed("connections label")||Ma.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Ma.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Ma.Color.red,fontColor:Ma.Color.white});Ca._isControlElement=!0;Ca.visible=!this.connectionHalo&&!!this.connectionCount;var Va=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";Ca.textString!=Va&&(Ca.value=Va);return Ca}},{key:"highlightTerm",value:function(Ca){var Va=
this.submorphs[0],dc=Va.textAndAttributes.slice(0,2),sb=Va.textString.slice(1).split(Ca);1===sb.length?Va.textAndAttributes=[].concat($jscomp.arrayFromIterable(dc),[sb[0]]):(Va.textAndAttributes=[].concat($jscomp.arrayFromIterable(dc),$jscomp.arrayFromIterable(Ma.arr.flatten(Ma.arr.interpose(sb.map(function(od){return[od,{}]}),[Ca,{fontWeight:"900"}])))),Va.whenRendered().then(function(){Va.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(Ca){var Va=
$a._get(Object.getPrototypeOf(Sb.prototype),"wantsToBeDroppedOn",this).call(this,Ca);if(![Ca].concat($jscomp.arrayFromIterable(Ca.ownerChain())).includes(this.tree))this.onDragOutside();return Va}},{key:"onGrab",value:function(Ca){var Va=this,dc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress)return Va.tree._dropInProgress=!0,dc=Va.target.globalPosition,$a._get(Object.getPrototypeOf(Sb.prototype),"onGrab",Va).call(Va,Ca),Va._data.globalTargetPosition=dc,sb.yield(Va.whenRendered(),
2);if(Va.tree.fullContainsWorldPoint(Va.globalPosition))Va.leftCenter=Ma.pt(-20,0);else Va.onDragOutside();Va.tree._dropInProgress=!1;sb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Ma.fun.createQueue("container-hover-queue",function(Ca,Va){var dc,sb,od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress)return dc=Ca.target,sb=dc.opacity,od=dc.scale,Ca.target.opacity=0,Ca.target.scale=
.5,$world.halos().forEach(function(Td){return Td.remove()}),$world.firstHand.grab(Ca.target),Ca.target._data=Ca._data,Ca.remove(),Ca.target.position=Ma.pt(0,0),bc.yield(Ca.target.animate({opacity:sb,scale:od,duration:200}),2);Va();bc.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Ca){var Va=this.node.children.indexOf(Ca.node||Ca._data)+1;Va=this.node.children[Va];Ca.target.remove();Va?(Va=this.target.submorphs.indexOf(Va.container.target),this.target.addMorphAt(Ca.target,
Va)):this.target.addMorph(Ca.target);Ca._data.globalTargetPosition&&(Ca.target.position=this.target.localize(Ca._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Ca){}},{key:"toggleConnectionControl",value:function(Ca){this.getSubmorphNamed("connections label").visible=Ca}},{key:"toggleSelected",value:function(Ca){var Va=this,dc,sb,od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress){if(Va._active===Ca)return bc.return();Va._active=Ca;$a._get(Object.getPrototypeOf(Sb.prototype),
"toggleSelected",Va).call(Va,Ca);return Ca&&Va.target&&Va.target.isMorph&&Va.world()?bc.yield(Va.target.whenRendered(),3):bc.jumpTo(0)}Va.get("inspector").targetObject=Va.target;Va.get("connections tree").inspectConnectionsOf(Va.target);if(Va.connectionHalo)return bc.return();dc=$jscomp.makeIterator(Va.world().halos());for(sb=dc.next();!sb.done;sb=dc.next()){od=sb.value;if(od.target===Va.target)return bc.return();od.remove()}Ma.noUpdate({sourceObj:Va.world(),targetObj:Va.sideBar,sourceAttribute:"showHaloFor",
targetAttribute:"selectNode"},function(){return Va.world().showHaloFor(Va.target)});bc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Ca){this.submorphs[0].fontFamily=Ca}},fontColor:{after:["submorphs"],derived:!0,set:function(Ca){this.submorphs[0].fontColor=Ca}},fontSize:{derived:!0,set:function(Ca){this.submorphs[0].fontSize=Ca}},target:{serialize:!1},
dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Ua,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:18910,end:27456})}(Ma.InteractiveTreeContainer);Ma.MorphContainer=vc;Ma.MorphContainer=vc;Ma.MorphContainer=vc;var oa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");oa.visualizeConnection=function(La,Ua,Sb,Ca,Va){Ca=void 0===Ca?{}:Ca;Va=oa.rect(0).sides.concat(oa.rect(0).corners);
Sb=Sb||new oa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:oa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:oa.Color.transparent,nativeCursor:"auto"},end:{fill:oa.Color.orange}}},Ca,{hasFixedPosition:!0}));Sb.startPoint.attachTo(La,"rightCenter");Ua.isMorph?(Ca=Ua.globalBounds().partNameNearest(Va,La.globalPosition),La.globalPosition.equals(Ua.globalBounds().partNamed(Ca))&&Ua.globalBounds().partNameNearest(oa.arr.without(Va,Ca),La.globalPosition),Sb.endPoint.attachTo(Ua,
"leftCenter")):(Va=La.globalBounds().topRight().addPt(oa.pt(100,0)),Ua=oa.morph({type:"label",value:Ua.toString(),styleClasses:["Tooltip"],padding:oa.rect(8,4)}).openInWorld(Va),Ua.position=La.world().bounds().translateForInclusion(Ua.bounds()).topLeft(),oa.once(Sb,"remove",Ua,"remove"),Sb.endPoint.attachTo(Ua,"leftCenter"));return Sb};oa.startConnecting=function(La,Ua){La.animate({opacity:.8,duration:300});La.startPoint.attachTo(Ua,"center");La.vertices[0].position=oa.pt(2,2)};oa.stopConnecting=
function(La,Ua,Sb,Ca){function Va(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress)return bc.yield(La.animate({opacity:0,duration:300}),2);La.startPoint.clearConnection();La.endPoint.clearConnection();La.remove();bc.jumpToEnd()})}Ca=void 0===Ca?!1:Ca;var dc,sb,od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){return 1==bc.nextAddress?(dc=La,sb=dc.endPoint,(od=sb.connectedMorph)&&"MorphContainer"==oa.getClassName(od)&&(od=od.target),od?bc.yield(oa.interactiveConnectGivenSourceAndTarget(Sb,
Ca,od),2):bc.jumpTo(2)):bc.yield(Va(),0)})};oa.editConnection=function(La){var Ua=La.connection,Sb=La.connectionPoint,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){if(1==Va.nextAddress)return Ca=oa.visualizeConnection(Sb,Ua.targetObj,!1,{borderColor:oa.Color.gray.darker(),endpointStyle:{start:{fill:oa.Color.transparent,nativeCursor:"auto"},end:{fill:oa.Color.gray.darker()}}}),Va.yield(oa.interactivelyReEvaluateConnection(Ua,"Edit Connection",!1),2);Ca.remove();Va.jumpToEnd()})};
oa.Tree=Ve;oa.TreeData=Ad;oa.Icon=xe;oa.morph=Pd;oa.pt=wc;oa.Rectangle=td;oa.rect=gd;oa.Color=xd;oa.arr=Ld;oa.connect=Kd;oa.signal=Yb;oa.Leash=af;oa.once=he;oa.interactivelyReEvaluateConnection=Uc;oa.interactiveConnectGivenSource=Rb;oa.interactiveConnectGivenSourceAndTarget=Fc;oa.getClassName=ad;(function(La){var Ua=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Sb=Ua.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Ua.ConnectionsTreeData?Ua.ConnectionsTreeData:Ua.ConnectionsTreeData=
function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"parseMorphConnections",value:function(Ca){for(var Va={},dc=$jscomp.makeIterator(void 0===Ca.attributeConnections?[]:Ca.attributeConnections),sb=dc.next();!sb.done;sb=dc.next())sb=sb.value,sb.targetObj.isHalo||(Va[sb.sourceAttrName]=Va[sb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:oa.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ca,
sb.sourceAttrName),{}]}],oa.arr.pushAt(Va[sb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(sb)))},0));return{children:Object.entries(Va).map(function(od){var bc=$jscomp.makeIterator(od);od=bc.next().value;bc=bc.next().value;return{name:[od,{fontWeight:"bold"}," ",{},oa.morph({fill:oa.Color.white,opacity:.7,value:""+(bc.length-1),borderRadius:15,fontWeight:"bold",padding:oa.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:bc}}).concat([{name:["New Connection  ",
{fontColor:oa.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ca),{}]}])}}},{key:"renderExistingConnection",value:function(Ca){var Va=this,dc=oa.morph({type:"label",fontColor:oa.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(oa.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Ca.targetMethodName,{}])}),sb=this.renderDeadPin(),od=sb.submorphs[0];oa.connect(dc,"onHoverIn",function(){dc.fontColor=oa.Color.orange;dc._leash=oa.visualizeConnection(od,
Ca.targetObj,dc._leash);od.fill=oa.Color.orange;od.border={color:oa.Color.orange,width:3}});oa.connect(dc,"onMouseDown",function(bc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return bc.stop(),Td.yield(oa.interactivelyReEvaluateConnection(Ca),2);oa.signal(Va,"refresh");Td.jumpToEnd()})});oa.connect(dc,"onHoverOut",function(){dc.fontColor=oa.Color.gray;od.fill=oa.Color.gray;od.border={color:oa.Color.white,width:1};dc._leash.remove();dc._leash=void 0});return[dc,
{},"  ",{}].concat($jscomp.arrayFromIterable(oa.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Ca.disconnect();oa.signal(Va,"refresh")}})),["  ",{},sb,{}])}},{key:"renderDeadPin",value:function(){var Ca=oa.morph({type:"ellipse",fill:oa.Color.gray,extent:oa.pt(10,10),center:oa.pt(8,12),borderWidth:1});return oa.morph({extent:oa.pt(20,20),fill:oa.Color.transparent,reactsToPointer:!1,submorphs:[Ca]})}},{key:"renderPin",value:function(Ca,Va){var dc=this,sb=oa.morph({type:"ellipse",
fill:oa.Color.gray.withA(.5),extent:oa.pt(10,10),center:oa.pt(8,12),draggable:!1,borderWidth:1}),od=new oa.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:oa.Color.gray.darker(),endpointStyle:{fill:oa.Color.gray.darker()},position:oa.pt(1,1),vertices:[oa.pt(0,0),oa.pt(0,0)],getLabelFor:function(bc){return"MorphContainer"==oa.getClassName(bc)?bc.target.name:bc.name},canConnectTo:function(bc){return"MorphContainer"==oa.getClassName(bc)||2>oa.arr.intersect([bc].concat($jscomp.arrayFromIterable(bc.ownerChain())),
[sb].concat($jscomp.arrayFromIterable(sb.ownerChain()))).length}});sb.addMorph(od);oa.connect(od.endPoint,"onDragStart",function(){oa.startConnecting(od,sb)});oa.connect(od.endPoint,"onDragEnd",function(bc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Td){if(1==Td.nextAddress)return sb.center=oa.pt(8,12),Td.yield(oa.stopConnecting(od,sb,Ca,Va),2);oa.signal(dc,"refresh");Td.jumpToEnd()})});return oa.morph({extent:oa.pt(20,20),fill:oa.Color.transparent,reactsToPointer:!1,submorphs:[sb]})}},
{key:"display",value:function(Ca){return Ca.name}},{key:"collapse",value:function(Ca,Va){Ca.isCollapsed=Va}},{key:"isCollapsed",value:function(Ca){return Ca.isCollapsed}},{key:"isLeaf",value:function(Ca){return!Ca.children}},{key:"getChildren",value:function(Ca){return Ca.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Ca){var Va=new this;Va.root=Va.parseMorphConnections(Ca);return Va}}],Ua,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3534,end:8251})})(oa.TreeData);vc=function(La){var Ua=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Sb=Ua.hasOwnProperty("ConnectionsTree")&&"function"===typeof Ua.ConnectionsTree?Ua.ConnectionsTree:Ua.ConnectionsTree=function(Ca){Ca&&Ca[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(Sb,La,[{key:"inspectConnectionsOf",value:function(Ca){if(this.targetMorph=Ca)this.treeData=oa.ConnectionsTreeData.for(Ca),oa.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=oa.ConnectionsTreeData.for(this.targetMorph),oa.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Ua,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8268,end:8821})}(oa.Tree);vc=oa.ConnectionsTree;oa.default=vc}}});