System.register("./__root_module__-5a58cfed.js kld-intersections ./editor-plugin-cfb50052.js ./index-ce89c89c.js ./index-dcbaecb9.js ./index-0f8ae983.js ./index-0e8213f8.js ./color-picker-91804b43.js ./editor-plugin-499e2236.js ./index-1584dae6.js".split(" "),function(){var Ca,Cb,Vb,lc,gc,fe,fd,Zd,id,Uc,Ad,Nd,ee,Ud,kd,cb,Fb,vc,pc,sd,pd,tc,bd,Xb,Tb,Oc,td,Ob,sb,hb,qb,Aa,bb,wb,Hb,Qb,lb,mb,Rb,Gc;return{setters:[function(mc){Ca=mc.aq;Cb=mc.ag;Vb=mc.ay;lc=mc.at;gc=mc.a1;fe=mc.ar;fd=mc.ao;Zd=mc.as;
id=mc.C;Uc=mc.a0;Ad=mc.a4;Nd=mc._;ee=mc.aU;Ud=mc.P;kd=mc.a5;cb=mc.az;Fb=mc.ai;vc=mc.aT;pc=mc.am;sd=mc.aj;pd=mc.al;tc=mc.bo;bd=mc.bq;Xb=mc.bS;Tb=mc.b0;Oc=mc.bg;td=mc.aL;Ob=mc.n;sb=mc.$;hb=mc.aV;qb=mc.aW;Aa=mc.an;bb=mc.a2;wb=mc.ap;Hb=mc.bT},function(){},function(mc){Qb=mc.I},function(mc){lb=mc.d;mb=mc.s;Rb=mc.I;Gc=mc.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function mc(Ua){var Mc=Ua.sourceObj,pb=Ua.targetObj;Mc.isMorph&&pb.isMorph?(Mc.show(),
pb.show(),ld.showConnector&&ld.showConnector(Mc,pb)):ld.show(String(Ua))}function Pc(Ua){var Mc=Ua.sourceObj,pb=Ua.sourceAttrName,fb=Ua.targetObj,eb=Ua.targetMethodName,bc=Ua.getConverter();Ua=Ua.getUpdater();return ld.printConnectionElements(Mc,pb,fb,eb,bc,Ua)}function Xc(Ua,Mc,pb,fb,eb,bc){Ua="/* global connect, source, target */\nconnect(source, '"+Mc+"', target, '"+fb+"'";if(eb||bc)Ua+=", {\n";eb&&(Ua+="  converter: "+eb);eb&&bc&&(Ua+=",");eb&&(Ua+="\n");bc&&(Ua+="  updater: "+bc+"\n");if(eb||
bc)Ua+="}";return Ua+");"}function Q(Ua,Mc){var pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fb){if(1==fb.nextAddress)return fb.yield(ld.InteractiveMorphSelector.selectMorph(),2);pb=fb.yieldResult;return fb.return(pb?ld.interactiveConnectGivenSourceAndTarget(Ua,Mc,pb):null)})}function fa(Ua,Mc,pb,fb){var eb,bc,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ed){eb=pb&&pb.world().targetDataBindings(pb);bc=Ua.world();if(!eb||!eb.length)return bc.setStatusMessage("connect canceled"),
Ed.return();ac=eb.map(function(we){return[we[0].group||"uncategorized",we.map(function(Je){return[Je.signature||Je.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lf){return 1==Lf.nextAddress?Lf.yield(ld.interactivelyEvaluateConnection({sourceObj:Ua,sourceAttr:Mc,targetObj:pb,targetAttr:Je.name,onConnect:fb}),2):Lf.return(Lf.yieldResult)})}]})]});ac.push(["custom...",function(){var we;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){return 1==Je.nextAddress?
Je.yield(bc.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(we=Je.yieldResult)?Je.yield(ld.interactivelyEvaluateConnection({sourceObj:Ua,sourceAttr:Mc,targetObj:pb,targetAttr:we,onConnect:fb}),0):Je.jumpTo(0)})}]);return Ed.yield(pb.openMenu(ac).whenFinished(),0)})}function Ia(Ua,Mc,pb,fb){Mc=void 0===Mc?"confirm connection":Mc;var eb,bc,ac,Ed,we,Je,Lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ud){eb=
Ua;bc=eb.sourceObj;ac=eb.sourceAttrName;Ed=eb.targetObj;we=eb.targetMethodName;Je=Ua.getConverter();Lf=Ua.getUpdater();return ud.return(ld.interactivelyEvaluateConnection({sourceObj:bc,sourceAttr:ac,targetObj:Ed,targetAttr:we,converter:Je,updater:Lf,prompt:Mc,highlight:pb,onConnect:fb}))})}function Qa(Ua,Mc,pb,fb,eb){fb=void 0===fb?{}:fb;eb=ld.rect(0).sides.concat(ld.rect(0).corners);pb=pb||new ld.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ld.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ld.Color.transparent,
nativeCursor:"auto"},end:{fill:ld.Color.orange}}},fb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Ua,"rightCenter");Mc.isMorph?(fb=Mc.globalBounds().partNameNearest(eb,Ua.globalPosition),Ua.globalPosition.equals(Mc.globalBounds().partNamed(fb))&&Mc.globalBounds().partNameNearest(ld.arr.without(eb,fb),Ua.globalPosition),pb.endPoint.attachTo(Mc,"leftCenter")):(eb=Ua.globalBounds().topRight().addPt(ld.pt(100,0)),Mc=ld.morph({type:"label",value:Mc.toString(),styleClasses:["Tooltip"],padding:ld.rect(8,
4)}).openInWorld(eb),Mc.position=Ua.world().bounds().translateForInclusion(Mc.bounds()).topLeft(),ld.once(pb,"remove",Mc,"remove"),pb.endPoint.attachTo(Mc,"leftCenter"));return pb}function ec(Ua){var Mc,pb,fb,eb,bc,ac,Ed,we,Je,Lf,ud,Fe,Pd,Sb,oa,Ha,Mb,P,ta,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){switch(Jb.nextAddress){case 1:Mc=Ua;pb=Mc.sourceObj;fb=Mc.sourceAttr;eb=Mc.targetObj;bc=Mc.targetAttr;ac=Mc.converter;Ed=Mc.updater;we=Mc.prompt;Je=void 0===Mc.highlight?!0:Mc.highlight;
Lf=Mc.onConnect;ud="lively://lively.bindings-interactive-connect/x"+pb.id;Fe={context:window,format:"esm",targetModule:ud,classTransform:ld.classToFunctionTransform};Pd=ld.printConnectionElements(pb,fb,eb,bc,ac,Ed);eb.isMorph&&pb.isMorph&&(Sb=eb.propertiesAndPropertySettings().properties[bc]||{type:typeof eb[bc]},oa=Sb.type,Ha=pb.propertiesAndPropertySettings().properties[fb]||{type:typeof pb[fb]},Mb=Ha.type,Mb!==oa&&(we=!0));P={};Object.assign(lively.modules.module(ud).recorder,(P.source=pb,P.target=
eb,P.connect=fd,P.once=Zd,P[fb]=pb[fb],P));if(!we){ta=Pd;Jb.jumpTo(2);break}return Jb.yield($world.editPrompt(we,{input:Pd,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Fe,animated:!1}),3);case 3:if(ta=Jb.yieldResult,!ta)return $world.setStatusMessage("connect canceled"),Jb.return();case 2:return Jb.yield(lively.vm.runEval(ta,Fe),4);case 4:Pa=Jb.yieldResult;if(Pa.isError)return $world.logError(Pa.value),Jb.return(ec({sourceObj:pb,sourceAttr:fb,targetObj:eb,
targetAttr:bc,converter:ac,updater:Ed,prompt:"confirm connection",highlight:Je,onConnect:Lf}));Je&&($world.setStatusMessage("connected!",ld.Color.green),ld.interactivelyShowConnection(Pa.value));"function"===typeof Lf&&Lf(Pa);Jb.jumpToEnd()}})}var Nb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Nb.Inspector=Qb;var Za=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),pb=Mc.hasOwnProperty("ProtoInspector")&&"function"===typeof Mc.ProtoInspector?Mc.ProtoInspector:
Mc.ProtoInspector=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(Nb.Inspector);Za=Nb.ProtoInspector;Nb.default=Za;var jc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");jc.Morph=Cb;jc.touchInputDevice=Vb;jc.easings=lc;jc.pt=gc;jc.fun=fe;jc.connect=fd;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),pb=Mc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Mc.MorphicSideBar?Mc.MorphicSideBar:Mc.MorphicSideBar=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Ca(pb,Ua,[{key:"onWorldResize",value:function(fb){fb=void 0===fb?!0:fb;if(this.respondsToVisibleWindow){var eb=$world.visibleBounds(),bc=navigator.standalone&&jc.touchInputDevice?25:0;this.height=eb.height-bc;this.top=bc+eb.top();bc=this.get("horizontal resizer");bc.height=this.height;bc.top=0;fb&&(this.visible?this.topLeft=eb.topLeft():this.topRight=eb.topLeft())}}},{key:"switchMode",value:function(fb){"inspector"==fb&&this.showInspector();"connections"==fb&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(fb){var eb=this,bc,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ed){switch(Ed.nextAddress){case 1:bc=$world.visibleBounds();ac=navigator.standalone&&jc.touchInputDevice?25:0;eb.height=bc.height-ac;eb.top=ac+bc.top();if(fb)return $world.addMorph(eb,
$world.get("lively top bar")),eb.right=0,eb.attachToWorld($world),eb.visible=!0,Ed.yield(eb.whenRendered(),5);eb.detachFromWorld($world);return Ed.yield(eb.animate({opacity:0,right:0,duration:300}),4);case 4:eb.visible=!1;eb.remove();Ed.jumpTo(0);break;case 5:return eb.onWorldResize(!1),eb.get("scene graph").adjustProportions(),Ed.yield(eb.animate({opacity:1,easing:jc.easings.outCirc,left:1,duration:300}),6);case 6:eb.get("scene graph").refresh(),Ed.jumpToEnd()}})}},{key:"attachToWorld",value:function(fb){jc.connect(fb,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});jc.connect(fb,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});jc.connect(fb,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(fb){var eb=this;fb.attributeConnections.forEach(function(bc){bc.targetObj===eb&&bc.disconnect()})}},{key:"selectNode",value:function(fb){this.getSubmorphNamed("scene graph").selectMorphInTarget(fb);this.getSubmorphNamed("connections tree").inspectConnectionsOf(fb)}},
{key:"onHierarchyChange",value:function(fb){var eb=this,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if("addMorphAt"===fb.selector||"removeMorph"===fb.selector||"name"===fb.prop){bc=eb._sceneGraph||(eb._sceneGraph=eb.getSubmorphNamed("scene graph"));if(!bc||!bc.owner.visible||fb.target&&fb.target.isHand||fb.target&&bc.ignoreMorph(fb.target)||fb.args&&!fb.args[0].isHalo&&bc.ignoreMorph(fb.args[0])||fb.target.ownerChain().find(function(Ed){return bc.ignoreMorph(Ed)}))return ac.return();
jc.fun.debounceNamed("scene-graph-update",50,function(){return bc.refresh()})()}ac.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(jc.Morph);Nb=jc.MorphicSideBar;jc.default=Nb;var ld=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");ld.interactivelyShowConnection=mc;ld.printConnection=Pc;ld.printConnectionElements=Xc;ld.interactiveConnectGivenSource=Q;ld.interactiveConnectGivenSourceAndTarget=fa;ld.interactivelyReEvaluateConnection=Ia;ld.visualizeConnection=Qa;ld.interactivelyEvaluateConnection=ec;ld.connect=fd;ld.once=Zd;ld.Color=id;ld.rect=Uc;ld.pt=gc;ld.arr=Ad;ld.promise=Nd;ld.properties=ee;ld.Path=Ud;
ld.obj=kd;ld.HorizontalLayout=cb;ld.Morph=Cb;ld.VerticalLayout=Fb;ld.StyleSheet=vc;ld.Icon=pc;ld.GridLayout=sd;ld.morph=pd;ld.TreeData=tc;ld.Tree=bd;ld.Leash=Xb;ld.LabeledCheckBox=Tb;ld.SearchField=Oc;ld.showConnector=lb;ld.show=mb;ld.InteractiveMorphSelector=Rb;ld.MorphHighlighter=Gc;ld.Window=td;ld.classToFunctionTransform=Ob;ld.interactivelyShowConnection=mc;ld.interactivelyShowConnection=mc;ld.printConnection=Pc;ld.printConnection=Pc;ld.printConnectionElements=Xc;ld.printConnectionElements=Xc;
ld.interactiveConnectGivenSource=Q;ld.interactiveConnectGivenSource=Q;ld.interactiveConnectGivenSourceAndTarget=fa;ld.interactiveConnectGivenSourceAndTarget=fa;ld.interactivelyReEvaluateConnection=Ia;ld.interactivelyReEvaluateConnection=Ia;ld.visualizeConnection=Qa;ld.visualizeConnection=Qa;ld.interactivelyEvaluateConnection=ec;ld.interactivelyEvaluateConnection=ec;var xd=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");xd.Tree=bd;xd.TreeData=tc;xd.morph=pd;xd.Icon=pc;xd.HorizontalLayout=
cb;xd.easings=lc;xd.Morph=Cb;xd.Color=id;xd.Rectangle=sb;xd.rect=Uc;xd.pt=gc;xd.connect=fd;xd.disconnect=hb;xd.disconnectAll=qb;xd.once=Zd;xd.arr=Ad;xd.num=Aa;xd.fun=fe;xd.tree=bb;xd.promise=Nd;xd.ConnectionHalo=_missingExportShim;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Mc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Mc.InteractiveTreeContainer?Mc.InteractiveTreeContainer:Mc.InteractiveTreeContainer=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"onChildRemoved",value:function(fb){}},{key:"onChildAdded",value:function(fb){}},{key:"toggleSelected",value:function(fb){if(this.tree){var eb=this.tree,bc=eb.selectionFontColor,ac=eb.nonSelectionFontColor;this.submorphs.filter(function(Ed){return!Ed._isControlElement&&Ed.styleClasses.includes("Label")}).forEach(function(Ed){Ed.fontColor=fb?bc:ac})}}},{key:"onGrab",value:function(fb){var eb=this.tree,bc=this.node;
this.fill=xd.Color.gray.withA(.5);this.fontColor=eb.selectionFontColor;this.opacity=.8;Ca._get(Object.getPrototypeOf(pb.prototype),"onGrab",this).call(this,fb);bc&&(this.toggleSelected(!1),eb.collapse(bc),eb.treeData.parentNode(bc).container.onChildRemoved(this),this._data=eb.treeData.remove(bc),bc.container.target.remove(),eb.update(!0))}},{key:"wantsToBeDroppedOn",value:function(fb){this.showPreviewOn(fb);return!0}},{key:"showPreviewOn",value:function(fb){if(fb.isContainer)var eb=fb.tree;fb.isTree&&
(eb=fb);eb&&eb.showDropPreviewFor&&eb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(fb){var eb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress)return eb.tree.treeData.add(fb._data,eb.node,eb.node.children[0]),eb.tree.uncollapse(eb.node),eb.tree.treeData.remove(eb.tree._previewNode),bc.yield(eb.tree.whenRendered(),2);eb.tree.update(!0);eb.onChildAdded(fb);bc.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(fb,eb){var bc=this;debugger;
this.tree._dropInProgress=!0;Ca._get(Object.getPrototypeOf(pb.prototype),"onBeingDroppedOn",this).call(this,fb,eb);fb=function(){bc.fill=xd.Color.gray.withA(.5);bc.opacity=1;bc.tree._dropInProgress=!1;bc.tree.refresh()};eb.isTree?eb.insertAtPlaceholder(this).then(fb):eb.isContainer?eb.insertAsChild(this).then(fb):fb()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:xd.Color.transparent},isContainer:{get:function(){return!0}},
tree:{},node:{readOnly:!0,get:function(){var fb=this,eb=this.tree.treeData;return eb&&eb.asList().find(function(bc){return bc.container===fb})}}}}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(xd.Morph);xd.InteractiveTreeContainer=Nb;xd.InteractiveTreeContainer=
Nb;xd.InteractiveTreeContainer=Nb;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Mc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Mc.InteractiveTreeData?Mc.InteractiveTreeData:Mc.InteractiveTreeData=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"display",value:function(fb){return[fb.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(fb){return fb.isCollapsed}},
{key:"collapse",value:function(fb,eb){fb.isCollapsed=eb}},{key:"getChildren",value:function(fb){var eb=this;return fb.isLeaf?null:fb.children.filter(function(bc){return bc&&(eb.filterActive?bc.visible:!0)})}},{key:"isLeaf",value:function(fb){var eb=this;return!fb.children||0==fb.children.filter(function(bc){return bc&&(eb.filterActive?bc.visible:!0)}).length}},{key:"add",value:function(fb,eb,bc){eb=void 0===eb?this.root:eb;eb.children||(eb.children=[]);bc?xd.arr.pushAt(eb.children,fb,eb.children.indexOf(bc)):
eb.children.push(fb);eb.isLeaf=!1}},{key:"replace",value:function(fb,eb){var bc=this.parentNode(fb);fb=bc.children.indexOf(fb);bc.children[fb]=eb}},{key:"next",value:function(fb){var eb=this.parentNode(fb);return eb&&eb.children[eb.children.indexOf(fb)+1]}},{key:"isBefore",value:function(fb,eb){this.next(fb)===eb}},{key:"isAfter",value:function(fb,eb){this.next(eb)===fb}},{key:"addBefore",value:function(fb,eb){this.add(fb,this.parentNode(eb),eb)}},{key:"addAfter",value:function(fb,eb){var bc=this.parentNode(eb);
eb=bc.children.indexOf(eb)+1;this.add(fb,bc,bc.children[eb])}},{key:"remove",value:function(fb){var eb=this.parentNode(fb);if(eb)return xd.arr.remove(eb.children,fb),eb.children==[]&&(eb.children=null),fb}},{key:"filter",value:function(fb,eb){eb=void 0===eb?1:eb;var bc=this,ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ed){if(1==Ed.nextAddress)return Ed.yield(bc.uncollapseAll(function(we,Je){return Je<eb+1}),2);ac=bc.filterActive;bc.filterActive=!1;bc.asListWithIndexAndDepth(!1).reverse().forEach(function(we){var Je=
we.node;if(0==we.depth)return Je.visible=!0;Je.visible=fb(Je);Je.visible||Je.isCollapsed||!Je.children.find(function(Lf){return Lf.visible})?Je.container.opacity=1:(Je.visible=!0,Je.container.opacity=.5);return Je.visible});bc.filterActive=ac;Ed.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2926,end:5365})}(xd.TreeData);xd.InteractiveTreeData=Nb;xd.InteractiveTreeData=Nb;xd.InteractiveTreeData=Nb;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Mc.hasOwnProperty("InteractiveTree")&&"function"===typeof Mc.InteractiveTree?Mc.InteractiveTree:Mc.InteractiveTree=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Ca(pb,Ua,[{key:"update",value:function(fb){var eb=this;Ca._get(Object.getPrototypeOf(pb.prototype),"update",this).call(this,fb);this.treeData&&this.relayoutContainers();fb&&this.embeddedMorphs.forEach(function(bc){bc.isContainer&&(bc.fill=xd.Color.transparent,bc.fontFamily=eb.fontFamily,bc.fontSize=eb.fontSize)})}},{key:"onDrop",value:function(fb){Ca._get(Object.getPrototypeOf(pb.prototype),"onDrop",this).call(this,fb);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",
value:function(fb){}},{key:"onDropHoverUpdate",value:function(fb){}},{key:"onDropHoverOut",value:function(fb){}},{key:"onHoverOut",value:function(fb){var eb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){Ca._get(Object.getPrototypeOf(pb.prototype),"onHoverOut",eb).call(eb,fb);eb._previewNode&&eb._previewNode.container.world()&&eb.treeData.remove(eb._previewNode);eb.resetContainerSelection();eb.update(!0);bc.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(fb){var eb=
this,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==ac.nextAddress)return bc=eb.treeData.parentNode(eb._previewNode),eb.treeData.replace(eb._previewNode,fb._data),eb.treeData.remove(eb._previewNode),ac.yield(eb.whenRendered(),2);eb.update(!0);bc.container.onChildAdded(fb);ac.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var fb=this;if(!this._scrollingUp){this._scrollingUp=!0;var eb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==
bc.nextAddress)return fb._scrollingUp&&0<fb.scroll.y?bc.yield(fb.animate({scroll:fb.scroll.subXY(0,30),duration:300,easing:xd.easings.linear}),3):(fb._scrollingUp=!1,bc.jumpTo(0));eb();bc.jumpToEnd()})};eb()}}},{key:"scrollDownSlowly",value:function(){var fb=this;if(!this._scrollingDown){this._scrollingDown=!0;var eb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(bc){if(1==bc.nextAddress)return fb._scrollingDown&&fb.scroll.y<fb.scrollExtent.y-fb.height?bc.yield(fb.animate({scroll:fb.scroll.addXY(0,
30),duration:300,easing:xd.easings.linear}),3):(fb._scrollingDown=!1,bc.jumpTo(0));eb();bc.jumpToEnd()})};eb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(fb){fb.isContainer&&(fb.fill=xd.Color.transparent)})}},{key:"showDropPreviewFor",value:function(fb){var eb=this;fb=this.localize(fb.globalBounds().center());var bc=this.textPositionFromPoint(fb),ac=this.treeData.asListWithIndexAndDepth(function(Fe){Fe=
Fe.node;return Fe!=eb._previewNode&&Fe.container.world()}),Ed=(ac.find(function(Fe){return Fe.i-1===bc.row})||{}).node,we=Ed&&Ed.container,Je=this.ensurePlaceholder(),Lf=!!Je.container.world(),ud=fb.subPt(this.scroll).subPt(this.scrollbarOffset);10>ud.y?this.scrollUpSlowly():ud.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!we){if(ac.length>bc.row||xd.arr.last(this.treeData.root.children)===Je)return;this.treeData.remove(Je);this.treeData.add(Je);
this.update(!0)}if(we){ac=this.textLayout.boundsFor(this,bc);if(4>Math.abs(ac.top()-fb.y)){if(this.treeData.isBefore(Je,Ed))return;this.treeData.remove(Je);this.treeData.addBefore(Je,Ed)}else if(4>Math.abs(ac.bottom()-fb.y)&&(Ed.isCollapsed||this.treeData.isLeaf(Ed))){if(this.treeData.isAfter(Je,Ed))return;this.treeData.remove(Je);this.treeData.addAfter(Je,Ed)}else{we.fill=xd.Color.gray;if(!Lf)return;this.treeData.remove(Je)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var fb=xd.pt(this.width-
100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:xd.morph({acceptsDrops:!1,reactsToPointer:!1,fill:xd.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=fb;return this._previewNode}},{key:"relayoutContainers",value:function(){var fb=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(eb){return eb.height});this.treeData.asListWithIndexAndDepth().forEach(function(eb){var bc=
eb.node;eb=eb.i;bc.container.nativeCursor="grab";bc.container.width=fb.width-25-bc.container.left;bc.container.toggleSelected&&bc.container.toggleSelected(eb==fb.selectedIndex)});this.anchors.forEach(function(eb){return eb.position=eb.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:5374,end:10711})}(xd.Tree);xd.InteractiveTree=Nb;xd.InteractiveTree=Nb;xd.InteractiveTree=Nb;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Mc.hasOwnProperty("SceneGraphTree")&&"function"===typeof Mc.SceneGraphTree?Mc.SceneGraphTree:Mc.SceneGraphTree=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"beforePublish",value:function(){this.submorphs=
[];this.reset()}},{key:"selectMorphInTarget",value:function(fb){var eb=this.treeData.asList().find(function(bc){return bc.container.target===fb});eb&&this.selectedNode!=eb&&this.selectPath(this.treeData.pathOf(eb))}},{key:"onLoad",value:function(){var fb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return fb.submorphs=[],eb.yield(fb.whenRendered(),2);fb.get("inspector").makeEditorVisible(!0);fb.get("inspector").makeEditorVisible(!1);fb.setTarget($world);
eb.jumpToEnd()})}},{key:"adjustProportions",value:function(fb){fb=(fb?fb.state.dragDelta:{y:0}).y;var eb=this.get("inspector"),bc=this.get("scene graph resizer"),ac=this.get("mode selector"),Ed=this.get("connections tree");this.height+=fb;eb.height-=fb;Ed.height-=fb;bc.top=this.bottom;bc.left=0;ac.top=bc.bottom;Ed.top=eb.top=ac.bottom+5}},{key:"reset",value:function(){var fb=this;this.treeData=new xd.InteractiveTreeData({children:[],container:xd.morph()});this.get("inspector").targetObject={};this.selectedNode=
null;this.anchors.filter(function(eb){return null==eb.id}).forEach(function(eb){return fb.removeAnchor(eb)})}},{key:"setTarget",value:function(fb){this.target=fb;this.treeData=this.getTreeFromSubmorphHierarchy(fb);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(fb){var eb=this;if(fb===this._previewNode)return!1;if(fb.container.nameNeedsUpdate)return!0;var bc=fb.container.target.submorphs.filter(function(ac){return!eb.ignoreMorph(ac)});return bc.length!=fb.children.length||
bc.map(function(ac){return ac.name}).join("")!=fb.children.map(function(ac){return ac.target?ac.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(fb){var eb=this,bc=fb.container.target.submorphs.map(function(Lf){return Lf.__scene_graph_target__?Lf.__scene_graph_target__():Lf}).filter(function(Lf){return!eb.ignoreMorph(Lf)}),ac=[],Ed={},we;for(we in bc){Ed.$jscomp$loop$prop$m$2289=bc[we];var Je=xd.arr.without(fb.children,this._previewNode).find(function(Lf){return function(ud){return ud.container.target.id==
Lf.$jscomp$loop$prop$m$2289.id}}(Ed));ac[we]=Je?Je:this.readMorphHierarchy(Ed.$jscomp$loop$prop$m$2289);Ed={$jscomp$loop$prop$m$2289:Ed.$jscomp$loop$prop$m$2289}}return ac}},{key:"refresh",value:function(){var fb=this;if(!this._updating&&!this._dropInProgress){var eb=!1;xd.tree.prewalk(this.treeData.root,function(bc){fb.isNodeOutOfSync(bc)&&(eb=!0,bc.name=bc.container.target.name,bc.container.refresh(),bc.children=fb.getNewChildren(bc))},function(bc){return bc.children});this.update(eb)}}},{key:"ignoreMorph",
value:function(fb){return fb.isMorph?fb.isContainer||fb.isWindow||fb.getWindow()||fb.isEpiMorph||fb.isHand||["lively.halos"].includes(fb.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(fb.constructor.name):!1}},{key:"onDropHoverOut",value:function(fb){var eb=fb.hand.grabbedMorphs[0];fb=fb.hand.findDropTarget();if(!(fb===this||fb&&fb.ownerChain().includes(this))&&eb&&eb.isContainer)eb.onDragOutside()}},{key:"onDropHoverIn",
value:function(fb){var eb=fb.hand.grabbedMorphs[0];eb&&!eb.isContainer&&($world.halos().forEach(function(bc){return bc.remove()}),eb.remove(),Object.assign(eb,fb.hand._grabbedMorphProperties.get(eb).pointerAndShadow),eb=this.renderContainerFor(eb,!1),fb.hand.grab(eb),eb.leftCenter=xd.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(fb){return new xd.InteractiveTreeData(this.readMorphHierarchy(fb))}},{key:"readMorphHierarchy",value:function(fb){var eb=this;return xd.tree.mapTree(fb,
function(bc,ac){return{name:bc.name,isCollapsed:!0,container:eb.renderContainerFor(bc),visible:!0,children:ac}},function(bc){return bc.submorphs.filter(function(ac){return bc.isWorld?!eb.ignoreMorph(ac):!0})})}},{key:"renderContainerFor",value:function(fb,eb){fb=void 0===fb?xd.morph({name:"root"}):fb;eb=new xd.MorphContainer({tree:this,fill:void 0===eb||eb?xd.Color.transparent:xd.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:fb,opacity:fb.visible?1:.5});
fb._data?(eb._data=fb._data,fb._data.container=eb):eb._data={name:fb.name,isCollapsed:!0,container:eb,children:[]};return eb}},{key:"collapseAll",value:function(){var fb=this;this.treeData.asList().forEach(function(eb){return eb!=fb.treeData.root?eb.isCollapsed=!0:eb.isCollapsed=!1})}},{key:"filterMorphs",value:function(fb){var eb=this,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==ac.nextAddress)return bc=fb.tokens[0],eb.treeData.filterActive||(eb._collapseState=new WeakMap(eb.treeData.asList().map(function(Ed){return[Ed,
Ed.isCollapsed]}))),eb.treeData.filterActive=!!bc,ac.yield(eb.treeData.filter(function(Ed){var we=!bc||Ed.container.target.name.includes(bc);Ed.container.highlightTerm(bc);return we},3),2);eb.treeData.filterActive||eb.treeData.asList().forEach(function(Ed){return Ed.isCollapsed=eb._collapseState.has(Ed)?eb._collapseState.get(Ed):!0});eb.refresh();ac.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Mc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(xd.InteractiveTree);xd.SceneGraphTree=Nb;xd.SceneGraphTree=Nb;xd.SceneGraphTree=Nb;Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),pb=Mc.hasOwnProperty("MorphContainer")&&"function"===typeof Mc.MorphContainer?Mc.MorphContainer:
Mc.MorphContainer=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"refresh",value:function(){var fb=this,eb,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){eb=fb.target;if(!eb)return ac.return();fb.reactsToPointer=!0;fb.dropShadow=!1;fb.submorphs=[fb.getLabel(),eb.layout&&fb.getLayoutControls(),fb.getConnectionControls()].filter(Boolean).map(function(Ed,we){Ed.fitIfNeeded();
Ed.left=bc?bc.right+5:0;Ed.top=2;return bc=Ed});fb.height=20;fb.opacity=eb.visible?1:.5;ac.jumpToEnd()})}},{key:"getLabel",value:function(){var fb=this.getSubmorphNamed("name label")||xd.morph({type:"label",name:"name label",reactsToPointer:!1,padding:xd.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),eb=fb.textString.slice(2,-1);eb&&eb==this.target.name||(fb.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return fb}},{key:"getIcon",value:function(fb){return xd.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[fb.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var fb=this.getSubmorphNamed("layout label")||xd.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:xd.Rectangle.inset(4,2,4,2),fill:xd.Color.orange,fontColor:xd.Color.white});fb._isControlElement=
!0;fb.textString!=this.target.layout.name()&&(fb.value=this.target.layout.name());return fb}},{key:"onMouseDown",value:function(fb){var eb=this,bc,ac,Ed,we,Je,Lf,ud,Fe,Pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sb){if(1==Sb.nextAddress)return Ca._get(Object.getPrototypeOf(pb.prototype),"onMouseDown",eb).call(eb,fb),fb.targetMorph!=eb.get("connections label")?Sb.jumpTo(0):Sb.yield(eb.whenRendered(),3);bc=$jscomp.makeIterator(eb.world().halos());for(ac=bc.next();!ac.done;ac=bc.next())Ed=
ac.value,Ed.remove();we=$jscomp.makeIterator(eb.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(ac=we.next();!ac.done;ac=we.next())Je=ac.value,Je.remove();eb.owner.animate({opacity:.5,duration:300});Lf=new xd.ConnectionHalo({target:eb.target});Lf.openInWorld();Lf.topLeft=eb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);xd.connect(eb,"position",function(){Lf.topLeft=eb.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});ud=eb;Fe=eb.owner;Pd=eb.get("side bar");
xd.once(Lf,"remove",eb,"toggleConnectionControl",{varMapping:{self:ud,disconnectAll:qb,disconnect:hb,connectionHalo:Lf,tree:Fe,sideBar:Pd},updater:function(oa){ud.connectionHalo=null;Fe.animate({opacity:1,duration:300});xd.disconnect(Pd,"toggle",Lf,"remove");xd.disconnectAll(ud);oa(!0)}});xd.once(eb,"remove",Lf,"remove");xd.once(eb.get("side bar"),"toggle",Lf,"remove");eb.toggleConnectionControl(!1);eb.connectionHalo=Lf;Sb.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(bc){return!bc.targetObj.isHalo}).length:0;var fb=this.getSubmorphNamed("connections label")||xd.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:xd.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:xd.Color.red,fontColor:xd.Color.white});fb._isControlElement=!0;fb.visible=!this.connectionHalo&&!!this.connectionCount;var eb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";fb.textString!=eb&&(fb.value=eb);return fb}},{key:"highlightTerm",value:function(fb){var eb=this.submorphs[0],bc=eb.textAndAttributes.slice(0,2),ac=eb.textString.slice(1).split(fb);eb.textAndAttributes=1===ac.length?[].concat($jscomp.arrayFromIterable(bc),[ac[0]]):[].concat($jscomp.arrayFromIterable(bc),$jscomp.arrayFromIterable(xd.arr.flatten(xd.arr.interpose(ac.map(function(Ed){return[Ed,{}]}),[fb,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(fb){var eb=Ca._get(Object.getPrototypeOf(pb.prototype),"wantsToBeDroppedOn",this).call(this,fb);if(![fb].concat($jscomp.arrayFromIterable(fb.ownerChain())).includes(this.tree))this.onDragOutside();return eb}},{key:"onGrab",value:function(fb){var eb=this,bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){if(1==ac.nextAddress)return eb.tree._dropInProgress=!0,bc=eb.target.globalPosition,Ca._get(Object.getPrototypeOf(pb.prototype),
"onGrab",eb).call(eb,fb),eb._data.globalTargetPosition=bc,ac.yield(eb.whenRendered(),2);if(eb.tree.fullContainsWorldPoint(eb.globalPosition))eb.leftCenter=xd.pt(-20,0);else eb.onDragOutside();eb.tree._dropInProgress=!1;ac.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=xd.fun.createQueue("container-hover-queue",function(fb,eb){var bc,ac,Ed;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){if(1==we.nextAddress)return bc=
fb.target,ac=bc.opacity,Ed=bc.scale,fb.target.opacity=0,fb.target.scale=.5,$world.halos().forEach(function(Je){return Je.remove()}),$world.firstHand.grab(fb.target),fb.target._data=fb._data,fb.remove(),fb.target.position=xd.pt(0,0),we.yield(fb.target.animate({opacity:ac,scale:Ed,duration:200}),2);eb();we.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(fb){var eb=this.node.children.indexOf(fb.node||fb._data)+1;eb=this.node.children[eb];fb.target.remove();eb?(eb=this.target.submorphs.indexOf(eb.container.target),
this.target.addMorphAt(fb.target,eb)):this.target.addMorph(fb.target);fb._data.globalTargetPosition&&(fb.target.position=this.target.localize(fb._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(fb){}},{key:"toggleConnectionControl",value:function(fb){this.getSubmorphNamed("connections label").visible=fb}},{key:"toggleSelected",value:function(fb){var eb=this,bc,ac,Ed;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){if(1==we.nextAddress)return Ca._get(Object.getPrototypeOf(pb.prototype),
"toggleSelected",eb).call(eb,fb),eb._active===fb?we.return():(eb._active=fb)&&eb.target&&eb.target.isMorph&&eb.world()?we.yield(eb.target.whenRendered(),3):we.jumpTo(0);eb.get("inspector").targetObject=eb.target;if(eb.connectionHalo)return we.return();bc=$jscomp.makeIterator(eb.world().halos());for(ac=bc.next();!ac.done;ac=bc.next()){Ed=ac.value;if(Ed.target===eb.target)return we.return();Ed.remove()}eb.world().showHaloFor(eb.target);we.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(fb){this.submorphs[0].fontFamily=fb}},fontColor:{after:["submorphs"],derived:!0,set:function(fb){this.submorphs[0].fontColor=fb}},fontSize:{derived:!0,set:function(fb){this.submorphs[0].fontSize=fb}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(xd.InteractiveTreeContainer);
xd.MorphContainer=Nb;xd.MorphContainer=Nb;xd.MorphContainer=Nb;var Yc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Yc.visualizeConnection=function(Ua,Mc,pb,fb,eb){fb=void 0===fb?{}:fb;eb=Yc.rect(0).sides.concat(Yc.rect(0).corners);pb=pb||new Yc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Yc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Yc.Color.transparent,nativeCursor:"auto"},end:{fill:Yc.Color.orange}}},fb,{hasFixedPosition:!0}));pb.startPoint.attachTo(Ua,
"rightCenter");Mc.isMorph?(fb=Mc.globalBounds().partNameNearest(eb,Ua.globalPosition),Ua.globalPosition.equals(Mc.globalBounds().partNamed(fb))&&Mc.globalBounds().partNameNearest(Yc.arr.without(eb,fb),Ua.globalPosition),pb.endPoint.attachTo(Mc,"leftCenter")):(eb=Ua.globalBounds().topRight().addPt(Yc.pt(100,0)),Mc=Yc.morph({type:"label",value:Mc.toString(),styleClasses:["Tooltip"],padding:Yc.rect(8,4)}).openInWorld(eb),Mc.position=Ua.world().bounds().translateForInclusion(Mc.bounds()).topLeft(),Yc.once(pb,
"remove",Mc,"remove"),pb.endPoint.attachTo(Mc,"leftCenter"));return pb};Yc.startConnecting=function(Ua,Mc){Ua.animate({opacity:.8,duration:300});Ua.startPoint.attachTo(Mc,"center");Ua.vertices[0].position=Yc.pt(2,2)};Yc.stopConnecting=function(Ua,Mc,pb,fb){function eb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){if(1==we.nextAddress)return we.yield(Ua.animate({opacity:0,duration:300}),2);Ua.startPoint.clearConnection();Ua.endPoint.clearConnection();Ua.remove();we.jumpToEnd()})}
fb=void 0===fb?"sourceAttrName":fb;var bc,ac,Ed;return $jscomp.asyncExecutePromiseGeneratorProgram(function(we){return 1==we.nextAddress?(bc=Ua,ac=bc.endPoint,(Ed=ac.connectedMorph)&&"MorphContainer"==Ed.constructor.className&&(Ed=Ed.target),Ed?we.yield(Yc.interactiveConnectGivenSourceAndTarget(pb,fb,Ed),2):we.jumpTo(2)):we.yield(eb(),0)})};Yc.editConnection=function(Ua){var Mc=Ua.connection,pb=Ua.connectionPoint,fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return fb=
Yc.visualizeConnection(pb,Mc.targetObj,!1,{borderColor:Yc.Color.gray.darker(),endpointStyle:{start:{fill:Yc.Color.transparent,nativeCursor:"auto"},end:{fill:Yc.Color.gray.darker()}}}),eb.yield(Yc.interactivelyReEvaluateConnection(Mc,"Edit Connection",!1),2);fb.remove();eb.jumpToEnd()})};Yc.Tree=bd;Yc.TreeData=tc;Yc.Icon=pc;Yc.morph=pd;Yc.pt=gc;Yc.Rectangle=sb;Yc.rect=Uc;Yc.Color=id;Yc.arr=Ad;Yc.connect=fd;Yc.signal=wb;Yc.Leash=Xb;Yc.once=Hb;Yc.interactivelyReEvaluateConnection=Ia;Yc.interactiveConnectGivenSource=
Q;Yc.interactiveConnectGivenSourceAndTarget=fa;(function(Ua){var Mc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),pb=Mc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Mc.ConnectionsTreeData?Mc.ConnectionsTreeData:Mc.ConnectionsTreeData=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"parseMorphConnections",value:function(fb){for(var eb={},bc=$jscomp.makeIterator(void 0===
fb.attributeConnections?[]:fb.attributeConnections),ac=bc.next();!ac.done;ac=bc.next())ac=ac.value,ac.targetObj.isHalo||(eb[ac.sourceAttrName]=eb[ac.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Yc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(fb,ac.sourceAttrName),{}]}],Yc.arr.pushAt(eb[ac.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(ac)))},0));return{children:Object.entries(eb).map(function(Ed){var we=$jscomp.makeIterator(Ed);
Ed=we.next().value;we=we.next().value;return{name:[Ed,{fontWeight:"bold"}," ",{},Yc.morph({fill:Yc.Color.white,opacity:.7,value:""+(we.length-1),borderRadius:15,fontWeight:"bold",padding:Yc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:we}}).concat([{name:["New Connection  ",{fontColor:Yc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(fb),{}]}])}}},{key:"renderExistingConnection",value:function(fb){var eb=this,bc=Yc.morph({type:"label",fontColor:Yc.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Yc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},fb.targetMethodName,{}])}),ac=this.renderDeadPin(),Ed=ac.submorphs[0];Yc.connect(bc,"onHoverIn",function(){bc.fontColor=Yc.Color.orange;bc._leash=Yc.visualizeConnection(Ed,fb.targetObj,bc._leash);Ed.fill=Yc.Color.orange;Ed.border={color:Yc.Color.orange,width:3}});Yc.connect(bc,"onMouseDown",function(we){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){if(1==
Je.nextAddress)return we.stop(),Je.yield(Yc.interactivelyReEvaluateConnection(fb),2);Yc.signal(eb,"refresh");Je.jumpToEnd()})});Yc.connect(bc,"onHoverOut",function(){bc.fontColor=Yc.Color.gray;Ed.fill=Yc.Color.gray;Ed.border={color:Yc.Color.white,width:1};bc._leash.remove();bc._leash=void 0});return[bc,{},"  ",{}].concat($jscomp.arrayFromIterable(Yc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){fb.disconnect();Yc.signal(eb,"refresh")}})),["  ",{},ac,{}])}},{key:"renderDeadPin",
value:function(){var fb=Yc.morph({type:"ellipse",fill:Yc.Color.gray,extent:Yc.pt(10,10),center:Yc.pt(8,12),borderWidth:1});return Yc.morph({extent:Yc.pt(20,20),fill:Yc.Color.transparent,reactsToPointer:!1,submorphs:[fb]})}},{key:"renderPin",value:function(fb,eb){var bc=this,ac=Yc.morph({type:"ellipse",fill:Yc.Color.gray.withA(.5),extent:Yc.pt(10,10),center:Yc.pt(8,12),draggable:!1,borderWidth:1}),Ed=new Yc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Yc.Color.gray.darker(),
endpointStyle:{fill:Yc.Color.gray.darker()},position:Yc.pt(1,1),vertices:[Yc.pt(0,0),Yc.pt(0,0)],canConnectTo:function(we){return"MorphContainer"==we.constructor.className||2>Yc.arr.intersect([we].concat($jscomp.arrayFromIterable(we.ownerChain())),[ac].concat($jscomp.arrayFromIterable(ac.ownerChain()))).length}});ac.addMorph(Ed);Yc.connect(Ed.endPoint,"onDragStart",function(){Yc.startConnecting(Ed,ac)});Yc.connect(Ed.endPoint,"onDragEnd",function(we){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Je){if(1==
Je.nextAddress)return ac.center=Yc.pt(8,12),Je.yield(Yc.stopConnecting(Ed,ac,fb,eb),2);Yc.signal(bc,"refresh");Je.jumpToEnd()})});return Yc.morph({extent:Yc.pt(20,20),fill:Yc.Color.transparent,reactsToPointer:!1,submorphs:[ac]})}},{key:"display",value:function(fb){return fb.name}},{key:"collapse",value:function(fb,eb){fb.isCollapsed=eb}},{key:"isCollapsed",value:function(fb){return fb.isCollapsed}},{key:"isLeaf",value:function(fb){return!fb.children}},{key:"getChildren",value:function(fb){return fb.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(fb){var eb=new this;eb.root=eb.parseMorphConnections(fb);return eb}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Yc.TreeData);Nb=function(Ua){var Mc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
pb=Mc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Mc.ConnectionsTree?Mc.ConnectionsTree:Mc.ConnectionsTree=function(fb){fb&&fb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ca(pb,Ua,[{key:"inspectConnectionsOf",value:function(fb){if(this.targetMorph=fb)this.treeData=Yc.ConnectionsTreeData.for(fb),Yc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Yc.ConnectionsTreeData.for(this.targetMorph),
Yc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Mc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Yc.Tree);Nb=Yc.ConnectionsTree;Yc.default=Nb}}});