System.register(["./__root_module__-28353364.js","./index-2245b428.js","./index-4fd2821f.js"],function(Ia){var mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab,qc,Xc,zc,ed,wd,xb,hc,Cc,ic,Qc,jb,fb,Ob,Cb,ob,bc,Ma,Db,gb,zb,ec,rc,Qb,Lb,Kb,za,bb,P;return{setters:[function(X){mb=X.C;vb=X.i;Vb=X.a;Eb=X.R;Jc=X.b;Bc=X.m;Uc=X.br;tc=X.ay;oc=X.c;sc=X.s;Tc=X.ar;Fd=X.bz;Rd=X.bA;ee=X.Y;Dc=X.o;rd=X.ac;Ab=X.d;qc=X.bB;Xc=X.bC;zc=X.$;ed=X.P;wd=X.p;xb=X._;hc=X.M;Cc=X.T;ic=X.aa;Qc=X.ab;jb=X.af;fb=X.az;Ob=X.O;Cb=
X.I;ob=X.g;bc=X.bD;Ma=X.q;Db=X.bE;gb=X.aE;zb=X.bs;ec=X.aD;rc=X.bF;Qb=X.f},function(X){Lb=X.M;Kb=X.I;za=X.v;bb=X.p},function(X){P=X.localInterface}],execute:function(){function X(Oa,Xa){if(!0===Xa)return Xa;if(Oa.copyState)return Oa.copyState(Xa);Oa={};for(var Sa in Xa){var O=Xa[Sa];O instanceof Array&&(O=O.concat([]));Oa[Sa]=O}return Oa}function ya(Oa,Xa,Sa){return Oa.startState?Oa.startState(Xa,Sa):!0}function Ga(Oa,Xa){return Zb.modes[Oa]=Xa}function wa(Oa){if("string"===typeof Oa&&Zb.mimeModes.hasOwnProperty(Oa))Oa=
Zb.mimeModes[Oa];else if(Oa&&"string"===typeof Oa.name&&Zb.mimeModes.hasOwnProperty(Oa.name)){var Xa=Zb.mimeModes[Oa.name];"string"===typeof Xa&&(Xa={name:Xa});Oa=Object.assign({},Xa,Oa);Oa.name=Xa.name}else{if("string"===typeof Oa&&/^[\w\-]+\/[\w\-]+\+xml$/.test(Oa))return wa("application/xml");if("string"===typeof Oa&&/^[\w\-]+\/[\w\-]+\+json$/.test(Oa))return wa("application/json")}return"string"===typeof Oa?{name:Oa}:Oa||{name:"null"}}function ja(Oa,Xa){Xa=Zb.resolveMode(Xa);"string"===typeof Xa&&
(Xa={name:Xa});if(!Xa.name)throw Error("parserConfig does not have a name of the mode to get");var Sa=Zb.modes[Xa.name];if(!Sa)return ja(Oa,"text/plain");Oa=Object.assign({indentUnit:2},Oa);return Object.assign(Sa(Oa,Xa),{name:Xa.name})}function lb(Oa,Xa){for(var Sa;Oa.innerMode;){Sa=Oa.innerMode(Xa);if(!Sa||Sa.mode==Oa)break;Xa=Sa.state;Oa=Sa.mode}return Sa||{mode:Oa,state:Xa}}function Ja(Oa,Xa){Zb.mimeModes[Oa]=Xa}function Xb(Oa,Xa,Sa){}function Kc(Oa,Xa,Sa,O,G,Ea,N){var oa=Oa.editorPlugin._tokenizerValidBefore;
oa&&oa.row>=Sa&&(oa.row=Sa-1);var Ca=Zb.linesToTokenize(Oa.document,Sa,O,oa);oa=Ca.lines;Ca=Ca.state;if(!oa.length)return!1;Ca=Ca?Zb.copyState(Xa,Ca):Zb.startState(Xa);for(var cb=0;cb<oa.length;cb++){var pb=oa[cb],yb=pb.row;yb>=Sa&&yb<=O&&Zb.indentLine(Oa,Xa,pb,Ca,G,Ea,N);Ca=Zb.tokenizeLine(Xa,oa[cb],Ca,function(){})}return!0}function Hb(Oa,Xa,Sa,O,G,Ea,N){Xa=Zb.linesToTokenize(Xa,Sa,O,G);Sa=Xa.lines;Zb.tokenizeLines(Oa,Sa,Xa.state,Ea,N);return Sa}function Oc(Oa,Xa,Sa,O,G){var Ea=[],N,oa=function(pb){return Ea.push(N=
[])},Ca=function(pb,yb,Yb,cc,Ec,od,Dd){return N.push(Yb,cc,pb,Ec.current(),yb.localMode||Dd)};try{var cb=Zb.visitDocumentTokens(Oa,Xa,Sa,O,G,oa,Ca)}catch(pb){Ea.length=0,cb=Zb.visitDocumentTokens(Oa,Xa,Sa,O,null,oa,Ca)}return{tokens:Ea,lines:cb}}function qb(Oa,Xa,Sa,O,G){null==Xa&&(Xa=Oa.search(/[^\s\u00a0]/),-1==Xa&&(Xa=Oa.length));O=O||0;for(G=G||0;;){var Ea=Oa.indexOf("\t",O);if(0>Ea||Ea>=Xa)return G+(Xa-O);G+=Ea-O;G+=Sa-G%Sa;O=Ea+1}}function xd(Oa){Oa=Oa.toLowerCase();for(var Xa=0;Xa<Zb.modeInfo.length;Xa++){var Sa=
Zb.modeInfo[Xa];if(Sa.mime==Oa)return Sa;if(Sa.mimes)for(var O=0;O<Sa.mimes.length;O++)if(Sa.mimes[O]==Oa)return Sa}if(/\+xml$/.test(Oa))return xd("application/xml");if(/\+json$/.test(Oa))return xd("application/json")}function he(Oa){for(var Xa=0;Xa<Zb.modeInfo.length;Xa++){var Sa=Zb.modeInfo[Xa];if(Sa.ext)for(var O=0;O<Sa.ext.length;O++)if(Sa.ext[O]==Oa)return Sa}}function xc(Oa){for(var Xa=0;Xa<Zb.modeInfo.length;Xa++){var Sa=Zb.modeInfo[Xa];if(Sa.file&&Sa.file.test(Oa))return Sa}Xa=Oa.lastIndexOf(".");
if(Oa=-1<Xa&&Oa.substring(Xa+1,Oa.length))return Zb.findModeByExtension(Oa)}function rb(Oa){Oa=Oa.toLowerCase();for(var Xa=0;Xa<Zb.modeInfo.length;Xa++){var Sa=Zb.modeInfo[Xa];if(Sa.name.toLowerCase()==Oa)return Sa;if(Sa.alias)for(var O=0;O<Sa.alias.length;O++)if(Sa.alias[O].toLowerCase()==Oa)return Sa}}function Ld(Oa){if(!Oa)return String(Oa);if(Array.isArray(Oa))return"["+Oa.map(Ld).join(",")+"]";if("symbol"===typeof Oa)return yd.printSymbol(Oa);try{return String(Oa)}catch(Xa){return"Cannot print object: "+
Xa}}function sb(Oa,Xa){return!yd.arr.every(Xa.map(function(Sa){return Oa[Sa]}),function(Sa){return yd.obj.equals(Sa,Oa&&Oa.valueOf())})}function hb(Oa){if(yd.obj.isPrimitive(Oa))var Xa=yd.string.print(Oa);else Array.isArray(Oa)?((Xa=3<Oa.length)&&(Oa=Oa.slice(0,3)),Oa=yd.string.print(Oa),Xa&&(Oa=Oa.slice(0,-1)+", ...]"),Xa=Oa):Xa=yd.string.print(Oa);Xa=Xa.replace(/\n/g,"");500<Xa.length&&(Xa=Xa.slice(0,20)+("...["+(Xa.length-20)+' CHARS]"'));return Xa}function Ba(Oa){return lc.Inspector.openInWindow({targetObject:Oa})}
function J(Oa,Xa){return lc.Inspector.openInWindow({remoteTarget:{code:Oa,evalEnvironment:Xa}})}function ta(Oa,Xa){function Sa(oa){var Ca=oa.name,cb=oa.ownerChain(),pb=oa.owner,yb=oa.world(),Yb;oa===Ea&&(Yb=[N]);yb===oa&&(Yb=["$world"]);if(!Yb&&Ca&&pb){pb===yb&&1===lc.arr.count(lc.arr.pluck(yb.submorphs,"name"),Ca)&&(Yb=['$world.get("'+Ca+'")']);if(!Yb&&pb!=yb)for(yb=cb.length-1;yb--;)if(1===cb[yb].getAllNamed(Ca).length){Yb=[].concat($jscomp.arrayFromIterable(Sa(cb[yb])),['get("'+Ca+'")']);break}Yb||
(Ca=[].concat($jscomp.arrayFromIterable(Sa(pb)),['get("'+Ca+'")']),lc.syncEval(Ca.join("."),{context:Ea}).value===oa&&(Yb=Ca))}Yb||(Yb=[N+'.getMorphById("'+oa.id+'")']);return Yb}Xa=void 0===Xa?{}:Xa;var O=Oa.world(),G=Xa;Xa=void 0===G.maxLength?10:G.maxLength;var Ea=void 0===G.fromMorph?O:G.fromMorph;if(Ea===Oa)return"this";var N=O===Ea?"$world":"this";if(!(O||Oa.name&&Ea.get(Oa.name)===Oa))return"morph";O=Sa(Oa);return O.length>Xa?'$world.getMorphWithId("'+Oa.id+'")':O.join(".")}function Ta(Oa,
Xa,Sa){var O=(Xa=void 0===Xa?"":Xa)&&qe.arr.last(Xa.split(".")).toLowerCase(),G="",Ea=0,N=Math.pow(2,19);if("string"===typeof Oa){if(Oa.length>N)return null}else if(Oa.document.stringSize>N)return null;if("string"===typeof Oa)G=Oa.slice(0,1E3);else for(Oa=$jscomp.makeIterator(Oa.document.lines),N=Oa.next();!N.done;N=Oa.next()){var oa=N.value;N=oa.stringSize;oa=oa.text;var Ca=!0;1E3<Ea+N&&(Ca=!1,N=1E3-Ea);G+=oa.slice(0,N)+(Ca?"\n":"");Ea+=N;if(1E3<=Ea)break}Ea=$jscomp.makeIterator(qe.modeInfo);for(Oa=
Ea.next();!Oa.done;Oa=Ea.next()){Ca=Oa.value;N=Ca.contentTest;Oa=Ca.mode;oa=Ca.ext;Ca=Ca.file;if("function"===typeof N)try{if(N(G))return Oa}catch(cb){}if(Ca&&Ca instanceof RegExp&&Ca.test(Xa))return Oa;if(oa)for(N=$jscomp.makeIterator(oa),oa=N.next();!oa.done;oa=N.next())if(oa.value===O)return Oa}return Sa}Ia({a:Ja,d:Ga,r:Xb});var tb=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js");tb.Color=mb;var Rb=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js"),
Sa=Xa.hasOwnProperty("DefaultTheme")&&"function"===typeof Xa.DefaultTheme?Xa.DefaultTheme:Xa.DefaultTheme=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"background",get:function(){return tb.Color.white}},{key:"default",get:function(){return{fontColor:"#333"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},
{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",
get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:"#708"}}},{key:"atom",get:function(){return{fontColor:"#219"}}},{key:"number",get:function(){return{fontColor:"#174"}}},{key:"def",get:function(){return{fontColor:"#22c"}}},{key:"variable",
get:function(){return{fontColor:"#05a"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:"#222"}}},{key:"operator",get:function(){return{fontColor:"#05a"}}},{key:"variable-2",get:function(){return{fontColor:"#05a"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#666"}}},{key:"string",get:function(){return{fontColor:"#181"}}},{key:"string-2",get:function(){return{fontColor:"#0B2"}}},
{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#555"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#997"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#333"}}},{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:tb.Color.white,
fontWeight:"bold",backgroundColor:tb.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:tb.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:tb.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DefaultTheme"}},
{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],Xa,{pathInPackage:function(){return"themes/default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:2826})}(void 0),mc=Rb=tb.DefaultTheme;tb.default=Rb;var Zb=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js");Zb.copyState=X;Zb.startState=
ya;Zb.defineMode=Ga;Zb.resolveMode=wa;Zb.getMode=ja;Zb.innerMode=lb;Zb.defineMIME=Ja;Zb.registerHelper=Xb;Zb.indentLines=Kc;Zb.indentLine=function(Oa,Xa,Sa,O,G,Ea,N){N=Object.assign({indentWithTabs:!Oa.useSoftTabs,indentUnit:Oa.tabWidth,tabSize:4,ignoreFollowingText:!1},N);null==G&&(G="add");"smart"==G&&(Xa.indent||(G="prev"));var oa=N.tabSize,Ca=Sa.text,cb=Zb.countColumn(Ca,null,oa);Sa.modeState&&(Sa.modeState=null);var pb=Ca.match(/^\s*/)[0];if(!Ea&&!/\S/.test(Ca)){var yb=0;G="not"}else if("smart"==
G&&(yb=Xa.indent(O,N.ignoreFollowingText?"":Ca.slice(pb.length),Ca),yb==Zb.passIndent||150<yb)){if(!Ea)return;G="prev"}"prev"==G?yb=0<Sa.row?Zb.countColumn(Sa.prevLine().text,null,oa):0:"add"==G?yb=cb+N.indentUnit:"subtract"==G?yb=cb-N.indentUnit:"number"===typeof G&&(yb=cb+G);yb=Math.max(0,yb);Xa="";O=0;if(N.indentWithTabs)for(N=Math.floor(yb/oa);N;--N)O+=oa,Xa+="\t";O<yb&&(Xa+=" ".repeat(yb-O));if(Xa!=pb)return Oa.replace({start:{row:Sa.row,column:0},end:{row:Sa.row,column:pb.length}},Xa),!0};Zb.tokenizeLines=
function(Oa,Xa,Sa,O,G){if(Xa.length){Sa=Sa?Zb.copyState(Oa,Sa):Zb.startState(Oa);for(var Ea=0;Ea<Xa.length;Ea++){var N=Xa[Ea];O(N);Sa=Zb.tokenizeLine(Oa,N,Sa,G)}}};Zb.tokenizeLine=function(Oa,Xa,Sa,O){var G=Xa.text;if(!G)return Sa;var Ea=new Zb.StringStream(G,2);Sa=Xa.modeState="function"===typeof Oa.copyState?Oa.copyState(Sa):Zb.copyState(Oa,Sa);Xa.prevLine();for(Sa._string=G;!Ea.eol();)G=Oa.token(Ea,Sa),O(G,Sa,Ea.start,Ea.pos,Ea,Xa,Oa),Ea.start=Ea.pos;return Sa};Zb.printTokens=function(Oa){for(var Xa=
"",Sa=0;Sa<Oa.length;Sa+=5)Xa+=Oa[Sa+0]+" => "+Oa[Sa+1]+" "+Oa[Sa+2]+" "+Oa[Sa+3]+" "+Oa[Sa+4].name+"\n";return Xa};Zb.visitDocumentTokens=Hb;Zb.tokenizeDocument=Oc;Zb.linesToTokenize=function(Oa,Xa,Sa,O){if(O&&O.row>=Sa)return{lines:[],state:null};Xa=O?Math.max(0,O.row-1):Xa;var G=Oa.getLine(Xa),Ea=G.text;Oa=[G];O=null;for(var N=0,oa;(oa=G.prevLine())&&50>N++;){G=oa;if(G.modeState){O=G.modeState;break}Oa.unshift(G)}if(!O){for(var Ca=G,cb=Infinity;(oa=G.prevLine())&&100>N++;){G=oa;if(G.modeState){O=
G.modeState;break}Oa.unshift(G);oa=Ea.match(/^\s*/)[0].length;if(0===oa)break;oa<cb&&(cb=oa,Ca=G)}!O&&0<cb&&(Oa=Oa.slice(Oa.indexOf(Ca)))}if(Sa>Xa)for(G=Zb.arr.last(Oa);Xa<=Sa;Xa++){G=G.nextLine();if(!G)break;Oa.push(G)}return{lines:Oa,state:O}};Zb.countColumn=qb;Zb.findModeByMIME=xd;Zb.findModeByExtension=he;Zb.findModeByFileName=xc;Zb.findModeByName=rb;Zb.arr=Vb;Rb=Zb.modes||{};Zb.modes=Rb;Zb.modes=Rb;Zb.modes=Rb;Rb=Ia("p",{});Zb.passIndent=Rb;Zb.passIndent=Rb;Zb.passIndent=Rb;Zb.copyState=X;Zb.copyState=
X;Zb.startState=ya;Zb.startState=ya;Zb.defineMode=Ga;Zb.defineMode=Ga;Zb.resolveMode=wa;Zb.resolveMode=wa;Zb.getMode=ja;Zb.getMode=ja;Zb.innerMode=lb;Zb.innerMode=lb;Rb={};Zb.mimeModes=Rb;Zb.mimeModes=Rb;Zb.mimeModes=Rb;Zb.defineMIME=Ja;Zb.defineMIME=Ja;Zb.registerHelper=Xb;Zb.registerHelper=Xb;Zb.indentLines=Kc;Zb.indentLines=Kc;Zb.visitDocumentTokens=Hb;Zb.visitDocumentTokens=Hb;Zb.tokenizeDocument=Oc;Zb.tokenizeDocument=Oc;Zb.countColumn=qb;Zb.countColumn=qb;(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js"),
Sa=Xa.hasOwnProperty("StringStream")&&"function"===typeof Xa.StringStream?Xa.StringStream:Xa.StringStream=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O,G){this.reset(O,G)}},{key:"reset",value:function(O,G){this.pos=this.start=0;this.string=void 0===O?"":O;this.tabSize=void 0===G?2:G;this.lineStart=this.lastColumnPos=this.lastColumnValue=
0}},{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return this.pos==this.lineStart}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void 0}},{key:"next",value:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(O){var G=this.string.charAt(this.pos);if("string"===typeof O?G==O:G&&(O.test?O.test(G):O(G)))return++this.pos,G}},{key:"eatWhile",value:function(O){for(var G=this.pos;this.eat(O););
return this.pos>G}},{key:"eatSpace",value:function(){for(var O=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>O}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},{key:"skipTo",value:function(O){O=this.string.indexOf(O,this.pos);if(-1<O)return this.pos=O,!0}},{key:"backUp",value:function(O){this.pos-=O}},{key:"column",value:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=Zb.countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,
this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Zb.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"indentation",value:function(){return Zb.countColumn(this.string,null,this.tabSize)-(this.lineStart?Zb.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"match",value:function(O,G,Ea){if("string"===typeof O){var N=function(Ca){return Ea?Ca.toLowerCase():Ca},oa=this.string.substr(this.pos,O.length);if(N(oa)==N(O))return!1!==
G&&(this.pos+=O.length),!0}else{if((O=this.string.slice(this.pos).match(O))&&0<O.index)return null;O&&!1!==G&&(this.pos+=O[0].length);return O}}},{key:"current",value:function(){return this.string.slice(this.start,this.pos)}},{key:"hideFirstChars",value:function(O,G){this.lineStart+=O;try{return G()}finally{this.lineStart-=O}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringStream"}}],Xa,{pathInPackage:function(){return"editor-modes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10526,end:13053})})(void 0);Rb=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},
{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",
mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},
{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"],contentTest:function(Oa){return Oa.match(/^diff --.* a\//m)}},
{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",
mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",
ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",
mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",
mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},
{name:"JSON",mimes:["application/json","application/x-json"],mode:"json",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",
mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",
mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},
{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:"php php3 php4 php5 php7 phtml".split(" ")},{name:"Pig",mime:"text/x-pig",
mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",
mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],
alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD|\.bash(rc|_profile)|\.profile$/,
contentTest:function(Oa){return Oa.match(/#!\//m)}},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",
mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",
mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",
mode:"troff",ext:"123456789".split("")},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",
mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml",
"xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",
mode:"mscgen",ext:["msgenny"]}];Zb.modeInfo=Rb;Zb.modeInfo=Rb;Zb.modeInfo=Rb;for(var Rc=0;Rc<Zb.modeInfo.length;Rc++)Zb.info=Zb.modeInfo[Rc],Zb.info.mimes&&(Zb.info.mime=Zb.info.mimes[0]);Zb.defineMode("null",function(){return{token:function(Oa){return Oa.skipToEnd()}}});Zb.defineMIME("text/plain","null");Zb.findModeByMIME=xd;Zb.findModeByMIME=xd;Zb.findModeByExtension=he;Zb.findModeByExtension=he;Zb.findModeByFileName=xc;Zb.findModeByFileName=xc;Zb.findModeByName=rb;Zb.findModeByName=rb;var Sc=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js");
Sc.Color=mb;Sc.Rectangle=Eb;Sc.pt=Jc;Sc.morph=Bc;Sc.ShadowObject=Uc;Sc.StyleSheet=tc;Sc.connect=oc;Sc.arr=Vb;Sc.string=sc;Sc.FilterableList=Tc;Sc.Range=Fd;Rc=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),Sa=Xa.hasOwnProperty("Completer")&&"function"===typeof Xa.Completer?Xa.Completer:Xa.Completer=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"compute",value:function(){return[]}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Completer"}}],Xa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:347,end:394})}(void 0);Sc.Completer=Rc;Sc.Completer=Rc;Sc.Completer=Rc;Rc=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),
Sa=Xa.hasOwnProperty("WordCompleter")&&"function"===typeof Xa.WordCompleter?Xa.WordCompleter:Xa.WordCompleter=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"compute",value:function(O,G){var Ea=[],N=[],oa=O.document.lineStrings;O=O.cursorPosition.row;for(var Ca=O-1;0<=Ca;Ca--)for(var cb=$jscomp.makeIterator(oa[Ca].split(/[^0-9a-z@_]+/i)),pb=cb.next();!pb.done;pb=cb.next())(pb=pb.value)&&!Ea.includes(pb)&&
pb!==G&&(Ea.push(pb),N.push({priority:1E3-(O-Ca),completion:pb}));for(Ca=O+1;Ca<oa.length;Ca++)for(cb=$jscomp.makeIterator(oa[Ca].split(/[^0-9a-z_@]+/i)),pb=cb.next();!pb.done;pb=cb.next())(pb=pb.value)&&!Ea.includes(pb)&&pb!==G&&(Ea.push(pb),N.push({priority:1E3-(Ca-O),completion:pb}));return N}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WordCompleter"}}],Xa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:403,end:1274})}(void 0);Sc.WordCompleter=Rc;Sc.WordCompleter=Rc;Sc.WordCompleter=Rc;Rc=[new Sc.WordCompleter];Sc.defaultCompleters=Rc;Sc.defaultCompleters=Rc;Sc.defaultCompleters=Rc;Rc=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),Sa=Xa.hasOwnProperty("CompletionController")&&"function"===typeof Xa.CompletionController?
Xa.CompletionController:Xa.CompletionController=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O,G){G=void 0===G?[]:G;this.textMorph=O;this.completers=G=O.pluginCollect("getCompleters",G)}},{key:"computeCompletions",value:function(O){var G=this,Ea,N,oa,Ca,cb,pb,yb,Yb,cc,Ec,od,Dd,ad,Vd,Td,Gd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cd){switch(Cd.nextAddress){case 1:Ea=
[],N=$jscomp.makeIterator(G.completers),oa=N.next();case 2:if(oa.done){Cd.jumpTo(4);break}Ca=oa.value;Cd.setCatchFinallyBlocks(5);cb=Ea;pb=cb.concat;return Cd.yield(Ca.compute(G.textMorph,O),7);case 7:Ea=pb.call(cb,Cd.yieldResult);Cd.leaveTryBlock(3);break;case 5:yb=Cd.enterCatchBlock(),console.warn("Error in completer "+Ca+": "+(yb.stack||yb));case 3:oa=N.next();Cd.jumpTo(2);break;case 4:Yb=new Map;Ea.forEach(function(ve){var Ge=Yb.get(ve.completion);Ge||(Ge=[],Yb.set(ve.completion,Ge));Ge.push(ve)});
cc=[];Ec=$jscomp.makeIterator(Yb.values());for(od=Ec.next();!od.done;od=Ec.next())Dd=od.value,cc.push(Sc.arr.last(Sc.arr.sortByKey(Dd,"priority")));ad=0;Vd=Sc.arr.sortByKey(cc,"priority").reverse();Td=Vd.length&&Vd[0].priority||0;Gd=Vd.map(function(ve){ve.highestPriority=Td;var Ge=ve.completion.replace(/\n/g,""),ng=String((ve.info||"").replace(/\n/g,""));ad=Math.max(ad,Ge.length+ng.length);return{isListItem:!0,string:Ge,annotation:ng,value:ve}});return Cd.return({items:Gd,maxCol:ad})}})}},{key:"computeSortedCompletions",
value:function(O,G){G=void 0===G?!1:G;var Ea=this,N,oa,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return N={tokens:[O],lowercasedTokens:[O],input:O},cb.yield(Ea.computeCompletions(O),2);oa=cb.yieldResult;Ca=Sc.arr.sortBy(oa.items.filter(function(pb){return Ea.filterFunction(N,pb,G)}),function(pb){return Ea.sortFunction(N,pb)});return cb.return(Ca)})}},{key:"_printCompletions",value:function(O){var G=this,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==
N.nextAddress)return N.yield(G.computeSortedCompletions(O),2);Ea=N.yieldResult.map(function(oa){return{completion:oa.value.completion,priority:oa.value.priority,maxP:oa.value.highestPriority,sortVal:oa._cache[O].sortVal,lev:JSON.stringify(oa._cache[O].levenshtein)}});return N.return(Sc.string.printTable(lively.lang.grid.tableFromObjects(Ea)))})}},{key:"prefix",value:function(){var O=this.textMorph,G=O.selection;return(G.isEmpty()?O.getLine(G.lead.row).slice(0,G.lead.column):G.text).match(/[a-z0-9@_]*$/i)[0]}},
{key:"filterFunction",value:function(O,G,Ea){Ea=void 0===Ea?!1:Ea;G._cache||(G._cache={});var N=O.tokens,oa=O.lowercasedTokens,Ca=O.input;Ca=G._cache[Ca]||(G._cache[Ca]={});if(Ca.hasOwnProperty("filtered"))return Ca.filtered;G=G.value.completion.replace(/\([^\)]*\)$/,"");var cb=G.toLowerCase();if(Ea&&N[0]&&!G.startsWith(N[0]))return Ca.filtered=!1;if(oa.every(function(yb){return cb.includes(yb)}))return!0;var pb=Ca.levenshtein||(Ca.levenshtein={});O=Ea||3>=Sc.arr.sum(O.lowercasedTokens.map(function(yb){return pb[yb]||
(pb[yb]=Sc.string.levenshtein(cb,yb))}));return Ca.filtered=O}},{key:"sortFunction",value:function(O,G){G._cache||(G._cache={});var Ea=G._cache[O.input]||(G._cache[O.input]={});if(Ea.hasOwnProperty("sortVal"))return Ea.sortVal;Ea=G._cache[O.input]={};var N=G.value;G=N.highestPriority;var oa=N.completion;N=N.priority;oa=oa.replace(/\([^\)]*\)$/,"").toLowerCase();var Ca=0;O.lowercasedTokens.forEach(function(pb){oa.startsWith(pb)?Ca+=12:3<=pb.length&&oa.includes(pb)&&(Ca+=5)});G=-((N||(Ca?G:0))/Math.pow(10,
String(G).length-2))-Ca;var cb=Ea.levenshtein||(Ea.levenshtein={});O=Sc.arr.sum(O.lowercasedTokens.map(function(pb){return cb[pb]||(cb[pb]=Sc.string.levenshtein(oa,pb))}));Ca&&(O/=2);return Ea.sortVal=O+G}},{key:"positionForMenu",value:function(){var O=this.textMorph,G=O.charBoundsFromTextPosition(O.cursorPosition);return O.getGlobalTransform().transformRectToRect(G).topLeft().addXY(-O.scroll.x,-O.scroll.y).addPt(Sc.pt(O.borderWidth+4,O.borderWidth+4))}},{key:"completionListSpec",value:function(){var O=
this,G,Ea,N,oa,Ca,cb,pb,yb,Yb,cc,Ec,od,Dd,ad,Vd,Td,Gd,Cd,ve,Ge;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ng){if(1==ng.nextAddress)return Ea=G=O.textMorph,N=Ea.fontSize,oa=Ea.fontFamily,Ca=O.positionForMenu(),cb=O.prefix(),ng.yield(O.computeCompletions(cb),2);pb=ng.yieldResult;yb=pb.items;Yb=pb.maxCol;cc=G.env.fontMetric.sizeFor(oa,N,"M");Ec=cc.width*Yb;od=G.document.getLine(0).height;Dd=Math.max(120,Ec<G.width?Ec:G.width);ad=od*yb.length+od+10;Vd=Math.max(70,Math.min(700,ad));Td=
Ca.extent(Sc.pt(Dd,Vd));if(Gd=G.world())Cd=Gd.visibleBounds().insetBy(5),Td.bottom()>Cd.bottom()&&(ve=Td.bottom()-Cd.bottom(),ve>Td.height-50&&(ve=Td.height-50),Td.height-=ve),Td.right()>Cd.right()&&(Ge=Td.right()-Cd.right(),Td.width=120>Td.width-Ge?120:Td.width-Ge),Cd.containsRect(Td)||(Td=Td.withTopLeft(Cd.translateForInclusion(Td).topLeft())),Td=Td.translatedBy(Cd.insetBy(0).topLeft().negated());return ng.return({master:{auto:"styleguide://SystemWidgets/autocomplete list"},hasFixedPosition:!0,
epiMorph:!0,fontSize:N,position:Td.topLeft(),extent:Td.extent(),items:yb,input:cb,name:"text completion menu",historyId:"lively.morphic-text completion",filterFunction:O.filterFunction,sortFunction:O.sortFunction})})}},{key:"removeMenuOnBlur",value:function(O){var G=O.menu;setTimeout(function(){G.withAllSubmorphsDetect(function(Ea){return Ea.isFocused()})?G.inputMorph.focus():G.remove()})}},{key:"openCompletionList",value:function(){var O=this,G,Ea,N,oa,Ca,cb,pb,yb,Yb,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ec){if(1==
Ec.nextAddress)return G=O.textMorph.selection.start,Ec.yield(O.completionListSpec(),2);if(3!=Ec.nextAddress)return Ea=Ec.yieldResult,O.textMorph.pluginFind(function(od){return od.theme}),N=new Sc.FilterableList(Ea),oa=new Sc.Range({start:G,end:O.textMorph.selection.start}),Ca=O.textMorph.textInRange(oa),cb=N.inputMorph,pb=N.listMorph,yb=Ea.input,Yb=N.addMorph({name:"prefix mask",fill:Sc.Color.transparent,bounds:cb.textBounds()},cb),pb.master=null,oa.isEmpty()||(O.textMorph.deleteText(oa),cb.input=
Ca,cb.gotoDocumentEnd()),cb.fontColor=O.textMorph.fontColor,Sc.connect(cb,"textString",Yb,"setBounds",{converter:"() => input.textBounds()",varMapping:{input:cb}}),Sc.connect(N,"accepted",O,"insertCompletion",{updater:"function($upd) {\n        let textToInsert, customInsertionFn = null, completion = this.sourceObj.selection;\n        if (completion) {\n          if (completion.prefix) prefix = completion.prefix;\n          textToInsert = completion.completion;\n          customInsertionFn = completion.customInsertionFn;\n        } else {\n          textToInsert = this.sourceObj.inputMorph.textString;\n        }\n        $upd(textToInsert, prefix, customInsertionFn);\n      }",
varMapping:{prefix:yb}}),Sc.connect(N,"accepted",N,"remove"),Sc.connect(N,"canceled",N,"remove"),Sc.connect(N,"remove",O.textMorph,"focus"),Sc.connect(N.inputMorph,"onBlur",O,"removeMenuOnBlur",{converter:"evt => ({menu, evt})",varMapping:{menu:N}}),cc=O.textMorph.world(),pb.addStyleClass("hiddenScrollbar"),N.paddingMorph.height=2,cb.height=pb.itemHeight,cb.clipMode="visible",cb.fill=O.textMorph.fill,cb.fixedHeight=!0,cb.fixedWidth=!1,cb.fontSize=pb.fontSize,N.relayout(),N.selectedIndex=0,N.master.applyIfNeeded(!0),
cb.focus(),Ec.yield(N.master.whenApplied(),3);yb.length&&(cb.gotoDocumentEnd(),N.moveBy(Sc.pt(-cb.textBounds().width,0)));cc.addMorph(N);N.inputPadding=Sc.Rectangle.inset(0,0,0,0);return Ec.return(N)})}},{key:"autoInsertBestMatchingCompletion",value:function(O,G,Ea){G=void 0===G?!0:G;var N=this,oa,Ca,cb,pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){if(1==yb.nextAddress)return oa=$jscomp,Ca=oa.makeIterator,yb.yield(N.computeSortedCompletions(O,G),2);cb=Ca.call(oa,yb.yieldResult);
(pb=cb.next().value)&&N.insertCompletion(pb.value.completion,O,Ea);yb.jumpToEnd()})}},{key:"insertCompletion",value:function(O,G,Ea){var N=this.textMorph,oa=N.document,Ca=N.selection.isMultiSelection?N.selection.selections:[N.selection];N.undoManager.group();Ca.forEach(function(cb){cb.collapseToEnd();var pb=cb.lead,yb=G?oa.indexToPosition(oa.positionToIndex(pb)-G.length):pb;"function"===typeof Ea?Ea(O,G,N,{start:yb,end:pb},cb):N.replace({start:yb,end:pb},O)});N.undoManager.group()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"CompletionController"}}],Xa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1402,end:13006})}(void 0);Sc.CompletionController=Rc;Sc.CompletionController=Rc;Sc.CompletionController=Rc;Rc=[{name:"text completion",handlesCount:!0,multiSelectAction:"single",exec:function(Oa,
Xa,Sa){var O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){return 1==G.nextAddress?(O=new Sc.CompletionController(Oa,Sc.defaultCompleters),G.yield(O.openCompletionList(),2)):G.return(!0)})}},{name:"text completion first match",handlesCount:!0,multiSelectAction:"single",exec:function(Oa,Xa,Sa){var O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){return 1==G.nextAddress?(O=new Sc.CompletionController(Oa,Sc.defaultCompleters),G.yield(O.autoInsertBestMatchingCompletion(O.prefix()),
2)):G.return(!0)})}}];Sc.completionCommands=Rc;Sc.completionCommands=Rc;Sc.completionCommands=Rc;var $d=lively.FreezerRuntime.recorderFor("lively.ide/text/multi-select-commands.js");$d.chain=Rd;$d.arr=Vb;$d.obj=ee;$d.string=sc;var r=[{name:"[multi select] add cursor above",multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.start;0<Xa.row&&(Xa=Oa.getPositionAboveOrBelow(1,Xa,!0,0,Oa.charBoundsFromTextPosition(Xa).x),Oa.selection.addRange({start:Xa,end:Xa}));return!0}},{name:"[multi select] add cursor below",
multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.start;Xa.row<Oa.documentEndPosition.row&&(Xa=Oa.getPositionAboveOrBelow(-1,Xa,!0,0,Oa.charBoundsFromTextPosition(Xa).x),Oa.selection.addRange({start:Xa,end:Xa}));return!0}},{name:"[multi select] all like this",multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.selections[Oa.selection.selections.length-1];if(Xa.isEmpty())return!0;Oa.searchForAll(Xa.text,{start:{column:0,row:0}}).forEach(function(Sa){return Oa.selection.addRange(Sa.range,
!1)});Oa.selection.mergeSelections();$d.arr.remove(Oa.selection.selections,Xa);Oa.selection.selections.push(Xa);return!0}},{name:"[multi select] more like this forward",multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.selections.length-1,Sa=Oa.selection.selections[Xa];if(Sa.isEmpty())return!0;var O=Oa.search(Sa.text,{start:Sa.end,backwards:!1});O&&(Sa=Oa.selection.selections.findIndex(function(G){return G.range.equals(O.range)}),-1<Sa?$d.arr.swap(Oa.selection.selections,Sa,Xa):Oa.selection.addRange(O.range));
return!0}},{name:"[multi select] more like this backward",multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.selections.length-1,Sa=Oa.selection.selections[Xa];if(Sa.isEmpty())return!0;var O=Sa.start,G=Oa.search(Sa.text,{start:{row:O.row,column:O.column-(Sa.text.length-1)},backwards:!0});G&&(Sa=Oa.selection.selections.findIndex(function(Ea){return Ea.range.equals(G.range)}),-1<Sa?$d.arr.swap(Oa.selection.selections,Sa,Xa):Oa.selection.addRange(G.range));return!0}},{name:"[multi select] remove focused cursor",
multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.selections.length;1<Xa&&Oa.selection.removeSelections(Xa-1);return!0}},{name:"[multi select] goto previous focused cursor",multiSelectAction:"single",exec:function(Oa){Oa.selection.selections=lively.lang.arr.rotate(Oa.selection.selections,-1);return!0}},{name:"[multi select] goto next focused cursor",multiSelectAction:"single",exec:function(Oa){Oa.selection.selections=lively.lang.arr.rotate(Oa.selection.selections,1);return!0}},{name:"[multi select] align cursors",
multiSelectAction:"single",exec:function(Oa){var Xa=Oa.selection.selections;if(1>=Xa.length)return!0;var Sa=$d.arr.groupBy(Xa,function(G){return G.range.start.row});Xa=Sa.keys().map(function(G){G=Sa[G];var Ea=$d.arr.max(G,function(N){return N.range.start.column});$d.arr.without(G,Ea).forEach(function(N){return N.range=Ea.range});return Ea});var O=$d.arr.max(Xa,function(G){return G.range.start.column}).range.start.column;Xa.forEach(function(G){var Ea=G.range.start;G=Ea.row;Ea=Ea.column;Oa.insertText(" ".repeat(O-
Ea),{row:G,column:Ea})});return!0}},{name:"[multi select] create rectangular selection",multiSelectAction:"single",exec:function(Oa){Oa.selection.disableMultiSelect();if(Oa.selection.isEmpty())var Xa=Oa.lastSavedMark&&Oa.lastSavedMark.position||(void 0).lineRange().start,Sa=Oa.cursorPosition;else Xa=Oa.selection,Sa=Xa.lead,Xa=Xa.anchor;Oa.selection.collapse();var O=Xa.column,G=Sa.column;$d.arr.range(Xa.row,Sa.row).forEach(function(Ea){return Oa.getLine(Ea).length>Math.min(G,O)&&Oa.selection.addRange({end:{row:Ea,
column:G},start:{row:Ea,column:O}},!1)});Oa.selection.mergeSelections();return!0}},{name:"[multi select] count",multiSelectAction:"single",handlesCount:!0,exec:function(Oa,Xa,Sa){Sa=void 0===Sa?1:Sa;Oa.undoManager.group();Oa.selection.selections.forEach(function(O,G){return O.text=String(G+Sa)});Oa.undoManager.group();return!0}}];$d.multiSelectCommands=r;$d.multiSelectCommands=r;$d.multiSelectCommands=r;var Ud=lively.FreezerRuntime.recorderFor("lively.ide/text/code-navigation-commands.js");Ud.pToI=
function(Oa,Xa){return Oa.positionToIndex(Xa)};Ud.iToP=function(Oa,Xa){return Oa.indexToPosition(Xa)};Ud.execCodeNavigator=function(Oa){return function(Xa,Sa,O){var G=Xa.pluginInvokeFirst("getNavigator");if(!G)return!0;Xa.saveMark();O=O||1;for(var Ea=0;Ea<O;Ea++)G[Oa](Xa,Sa);return!0}};Ud.once=Dc;var ke=[{name:"forwardSexp",bindKey:"Ctrl-Alt-f|Ctrl-Alt-Right",exec:Ud.execCodeNavigator("forwardSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"backwardSexp",bindKey:"Ctrl-Alt-b|Ctrl-Alt-Left",exec:Ud.execCodeNavigator("backwardSexp"),
multiSelectAction:"forEach",readOnly:!0},{name:"backwardUpSexp",bindKey:"Ctrl-Alt-u|Ctrl-Alt-Up",exec:Ud.execCodeNavigator("backwardUpSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"forwardDownSexp",bindKey:"Ctrl-Alt-d|Ctrl-Alt-Down",exec:Ud.execCodeNavigator("forwardDownSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"markDefun",bindKey:"Ctrl-Alt-h",exec:Ud.execCodeNavigator("markDefun"),multiSelectAction:"forEach",readOnly:!0},{name:"expandRegion",bindKey:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",
mac:"Shift-Command-Space|Ctrl-Shift-Space"},exec:function(Oa,Xa){function Sa(){var Ea=Oa.$expandRegionState,N=Ud.pToI(Oa,Oa.cursorPosition);if(Ea&&(Ea.range[0]===N||Ea.range[1]===N))return Ea;Ea=Oa.selection.range;return Oa.$expandRegionState={range:[Ud.pToI(Oa,Ea.start),Ud.pToI(Oa,Ea.end)]}}Xa=Xa||{};var O=Oa.pluginInvokeFirst("getNavigator");if(!O)return!0;var G=Xa.start;Xa=Xa.end;if("number"===typeof G&&"number"===typeof Xa)Sa(),O={range:[G,Xa],prev:Sa()};else{G=O.ensureAST(Oa);if(!G)return;O=
O.expandRegion(Oa,Oa.textString,G,Sa())}O&&O.range&&(Oa.selection={start:Ud.iToP(Oa,O.range[0]),end:Ud.iToP(Oa,O.range[1])},Oa.$expandRegionState=O);Ud.once(Oa,"selectionChange",function(){return Oa.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",readOnly:!0},{name:"contractRegion",bindKey:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},exec:function(Oa){if(Oa.selection.isEmpty())return!0;var Xa=Oa.pluginInvokeFirst("getNavigator");if(!Xa)return!0;
var Sa=Xa.ensureAST(Oa);if(!Sa)return!0;var O=Oa.$expandRegionState;if(!O)return!0;(Xa=Xa.contractRegion(Oa,Oa.textString,Sa,O))&&Xa.range&&(Oa.selection={start:Ud.iToP(Oa,Xa.range[0]),end:Ud.iToP(Oa,Xa.range[1])},Oa.$expandRegionState=Xa);Ud.once(Oa,"selectionChange",function(){return Oa.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",readOnly:!0}];Ud.commands=ke;Ud.commands=ke;Ud.commands=ke;var le=lively.FreezerRuntime.recorderFor("lively.ide/text/generic-code-commands.js");
le.arr=Vb;le.chain=Rd;le.string=sc;var ie=[{name:"toggle comment",exec:function(Oa){var Xa=Oa.pluginInvokeFirst("getComment");if(!Xa)return!0;if(!Xa.lineCommentStart)return Xa.blockCommentStart?Oa.execCommand("toggle block comment"):!0;var Sa=Xa.lineCommentStart,O=new RegExp("^(\\s*)("+Sa+"\\s?)(.*)");Xa=Oa.document;var G=Oa.selection;G.isEmpty()||0!==G.end.column||G.growRight(-1);var Ea=G.start.row;Xa=Xa.lineStrings.slice(G.start.row,G.end.row+1);Xa=Xa.some(function(Ca){return!!Ca.trim()})?le.arr.dropWhile(Xa,
function(Ca){return Ca.trim()?!1:++Ea&&!0}):Xa;var N=Xa.every(function(Ca){return Ca.trim()&&Ca.match(O)});Oa.undoManager.group();if(N)Xa.forEach(function(Ca,cb){if(Ca=Ca.match(O)){Ca=$jscomp.makeIterator(Ca);Ca.next();var pb=Ca.next().value,yb=Ca.next().value;Ca.next();Oa.deleteText({start:{row:Ea+cb,column:pb.length},end:{row:Ea+cb,column:pb.length+yb.length}})}});else{var oa=Xa.reduce(function(Ca,cb,pb){return cb.trim()||G.isEmpty()&&G.start.row===G.end.row?Math.min(Ca,cb.match(/^\s*/)[0].length):
Ca},Infinity);oa=Infinity===oa?0:oa;Xa.forEach(function(Ca,cb){Ca=$jscomp.makeIterator(Ca.match(/^(\s*)(.*)/));Ca.next();Ca.next();Ca.next();Oa.insertText(Sa+" ",{row:Ea+cb,column:oa})})}Oa.undoManager.group();return!0}},{name:"toggle block comment",exec:function(Oa){var Xa=Oa.pluginInvokeFirst("getComment");if(!Xa)return!0;if(!Xa.blockCommentStart)return Xa.lineCommentStart?Oa.execCommand("toggle comment"):!0;if(!Xa||!Xa.blockCommentStart)return!0;var Sa=Xa.blockCommentStart;Xa=Xa.blockCommentEnd;
var O=new RegExp("^"+Sa.replace(/\*/g,"\\*")),G=new RegExp(Xa.replace(/\*/g,"\\*")+"$"),Ea=Oa.tokenAt(Oa.cursorPosition);if(Ea&&"comment"===Ea.token){var N=Oa.textInRange(Ea);if(N.match(O)&&N.match(G))return Oa.undoManager.group(),Oa.replace(Ea,N.slice(Sa.length,-Xa.length)),Oa.undoManager.group(),!0}Oa.undoManager.group();Oa.insertText(Sa,Oa.selection.start);Oa.insertText(Xa,Oa.selection.end);Oa.undoManager.group();Sa=!Oa.selection.isEmpty();Oa.selection.growLeft(Xa.length);Sa||Oa.selection.collapse();
return!0}},{name:"comment box",exec:function(Oa,Xa,Sa){Xa=Oa.undoManager.ensureNewGroup(Oa,"comment box");if(Oa.selection.isEmpty())return Oa.insertText("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-"),Oa.execCommand("toggle comment"),Oa.undoManager.group(Xa),!0;var O=Oa.selection.range,G=Oa.withSelectedLinesDo(function(N){return N}),Ea=le.arr.min([O.start.column].concat(le.chain(G).map(function(N){return N.match(/^\s*/)}).flatten().compact().pluck("length").value()));G=le.arr.max(G.map(function(N){return N.length}))-
Ea;G=Array(Math.ceil(G/2)+1).join("-=")+"-";Oa.execCommand("toggle comment");Oa.collapseSelection();Oa.cursorPosition={row:O.start.row,column:0};Sa?Oa.insertText(le.string.indent("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n"," ",Ea)):Oa.insertText(le.string.indent(G+"\n"," ",Ea));Oa.selection.goUp();Oa.execCommand("toggle comment");Oa.cursorPosition={row:O.end.row+2,column:0};Oa.insertText(le.string.indent(G+"\n"," ",Ea));Oa.selection.goUp();Oa.execCommand("toggle comment");Oa.selection.range=
{start:{row:O.start.row,column:0},end:Oa.cursorPosition};Oa.undoManager.group(Xa);return!0},multiSelectAction:"forEach",handlesCount:!0}];le.commands=ie;le.commands=ie;le.commands=ie;var yd=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js");yd.printSymbol=function(Oa){if(Symbol.keyFor(Oa))return'Symbol.for("'+Symbol.keyFor(Oa)+'")';if(yd.knownSymbols.get(Oa))return yd.knownSymbols.get(Oa);String(Oa).match(yd.symMatcher);return String(Oa)};yd.defaultSort=function(Oa,Xa){if(Oa.hasOwnProperty("priority")||
Xa.hasOwnProperty("priority")){var Sa=Oa.priority||0,O=Xa.priority||0;if(Sa<O)return-1;if(Sa>O)return 1}Oa=(Oa.keyString||Oa.key).toLowerCase();Xa=(Xa.keyString||Xa.key).toLowerCase();return Oa<Xa?-1:Oa===Xa?0:1};yd.safeToString=Ld;yd.propertyNamesOf=function(Oa,Xa){if(!Oa)return[];if(Array.isArray(Oa)){var Sa=Xa?Xa.offset:0;return yd.arr.range(Sa,Sa+(Xa?Xa.partitionSize:Oa.length-1))}return yd.arr.sortBy(Object.keys(Oa),function(O){return O.toLowerCase()})};yd.isMultiValue=sb;yd.printValue=hb;yd.partitionedChildren=
function(Oa,Xa){var Sa=void 0===Xa?{}:Xa;Xa=void 0===Sa.originalValue?Oa:Sa.originalValue;var O=void 0===Sa.offset?0:Sa.offset;Sa=void 0===Sa.partitionSize?Oa.length||Object.values(Oa).length:Sa.partitionSize;if(yd.obj.isArray(Oa)){Oa=yd.num.roundTo(Math.max(yd.MIN_PARTITION_SIZE,Sa/50),.1);Sa/=Oa;for(var G=[],Ea=0;Ea<Sa;Ea++){var N="["+(O+Ea*Oa)+"-"+(O+(Ea+1)*Oa)+"]";G.push({partition:{originalValue:Xa,offset:O+Ea*Oa,partitionSize:Oa},value:[],key:N,keyString:N,valueString:"...",isCollapsed:!0})}return G}Oa=
yd.num.roundTo(Math.max(yd.MIN_PARTITION_SIZE,Sa/50),.1);Sa/=Oa;G=[];Ea=yd.obj.keys(Xa).sort();for(N=0;N<Sa;N++){var oa=O+N*Oa,Ca=O+(N+1)*Oa,cb=yd.obj.select(Xa,Ea.slice(oa,Ca));oa="["+Ea[oa].slice(0,4)+"-"+(Ea[Ca]||yd.arr.last(Ea)).slice(0,4)+"]";G.push({partition:{originalValue:cb,offset:O+N*Oa,partitionSize:Oa},value:[],key:oa,keyString:oa,valueString:"...",isCollapsed:!0})}return G};yd.propertiesOf=function(Oa){var Xa=Oa.partition?Oa.target:Oa.value;if(!Xa)return[];var Sa={_rev:!0},O=[],G="function"===
typeof Xa.livelyCustomInspect?Xa.livelyCustomInspect():{},Ea=Object.assign({},yd.defaultPropertyOptions,{},G);if(G.properties){G=$jscomp.makeIterator(G.properties);for(var N=G.next();!N.done;N=G.next()){var oa=N.value;N=oa.key;var Ca=oa.hidden,cb=oa.priority,pb=oa.keyString,yb=oa.value;oa=oa.valueString;Sa[N]=!0;Ca||O.push(Oa.getSubNode({priority:cb,key:N,keyString:pb||yd.safeToString(N),value:yb,valueString:oa,isCollapsed:!0}))}}if(Ea.includeDefault){G=yd.propertyNamesOf(Xa,Oa.partition);if(G.length>
yd.MAX_NODE_THRESHOLD)for(Sa=$jscomp.makeIterator(yd.partitionedChildren(Xa,Oa.partition)),G=Sa.next();!G.done;G=Sa.next())O.push(Oa.getSubNode(G.value));else for(Ca=$jscomp.makeIterator(G),G=Ca.next();!G.done;G=Ca.next())cb=G.value,cb in Sa||(G=Xa[cb],N=yd.printValue(G),G={keyString:cb,key:cb,value:G,valueString:N,isCollapsed:!0},O.push(Oa.getSubNode(G)));if(Ea.includeSymbols)for(Sa=$jscomp.makeIterator(Object.getOwnPropertySymbols(Xa)),G=Sa.next();!G.done;G=Sa.next())Ca=G.value,cb=yd.safeToString(Ca),
G=Xa[Ca],N=yd.printValue(G),G={key:Ca,keyString:cb,value:G,valueString:N,isCollapsed:!0},O.push(Oa.getSubNode(G))}Ea.sort&&(O=Ea.sortFunction(Xa,O));return O};yd.obj=ee;yd.num=rd;yd.arr=Vb;yd.string=sc;yd.connect=oc;yd.signal=Ab;yd.TreeData=qc;yd.newUUID=Xc;yd.localInterface=P;yd.MAX_NODE_THRESHOLD=1E3;yd.MIN_PARTITION_SIZE=250;yd.defaultPropertyOptions={includeDefault:!0,includeSymbols:!0,sort:!0,sortFunction:function(Oa,Xa){return Array.isArray(Oa)?Xa:Xa.sort(yd.defaultSort)}};yd.symMatcher=/^Symbol\((.*)\)$/;
yd.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(Oa){return"symbol"===typeof Symbol[Oa]}).reduce(function(Oa,Xa){return Oa.set(Symbol[Xa],"Symbol."+Xa)},new Map)}();yd.isMultiValue=sb;yd.isMultiValue=sb;yd.printValue=hb;yd.printValue=hb;var Wd=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("InspectionTree")&&"function"===typeof Xa.InspectionTree?Xa.InspectionTree:Xa.InspectionTree=function(O){O&&
O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O){vb._get(Object.getPrototypeOf(Sa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);this.inspector=O.inspector;this.root.isInspectionNode||(this.root=yd.InspectionNode.for(this.root,this))}},{key:"__only_serialize__",get:function(){return["root"]}},{key:"asListWithIndexAndDepth",value:function(O){O=
void 0===O?!0:O;return vb._get(Object.getPrototypeOf(Sa.prototype),"asListWithIndexAndDepth",this).call(this,function(G){G=G.node;return O?G.visible:!0})}},{key:"getContextFor",value:function(O){return O==this.root?this.root.value.inspectee:O.value}},{key:"dispose",value:function(){}},{key:"filter",value:function(O){var G=void 0===O.maxDepth?1:O.maxDepth,Ea=O.iterator,N=O.showUnknown,oa=O.showInternal,Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return cb.yield(Ca.uncollapseAll(function(pb,
yb){return G>yb&&(pb==Ca.root||pb.value.submorphs)}),2);Ca.asListWithIndexAndDepth(!1).forEach(function(pb){var yb=pb.node;return 0==pb.depth?yb.visible=!0:!N&&yb.keyString&&yb.keyString.includes("UNKNOWN PROPERTY")||!oa&&yb.keyString&&yb.keyString.includes("internal")?yb.visible=!1:yb.value&&yb.value.submorphs?yb.visible=!0:yb.visible=Ea(yb)});cb.jumpToEnd()})}},{key:"getChildren",value:function(O){return O.children}},{key:"display",value:function(O){return O.display(this.inspector)}},{key:"isCollapsed",
value:function(O){return O.isCollapsed}},{key:"isLeaf",value:function(O){return yd.obj.isPrimitive(O.value)}},{key:"collapse",value:function(O,G){var Ea=this;O.isCollapsed=G;G||this.isLeaf(O)||O.children.length||(O.children=yd.propertiesOf(O).map(function(N){Ea.parentMap.set(N,O);return N}))}},{key:"retrieveForRemoteProxy",value:function(O){O.uuid||(O.uuid=yd.newUUID(),this.idToNodeMap[O.uuid]=O);return{uuid:O.uuid,value:this.isLeaf(O)?O.value:{},keyString:O.keyString,key:O.keyString,valueString:yd.safeToString(O.value),
isCollapsed:!0,children:[]}}},{key:"systemInterface",get:function(){return yd.localInterface}},{key:"getNodeViaId",value:function(O){return this.idToNodeMap[O]}},{key:"asRemoteDelegate",value:function(O){this.idToNodeMap={};this.isRemoteDelegate=!0;System.get("@lively-env").remoteInspectionContext||(System.get("@lively-env").remoteInspectionContext={});System.get("@lively-env").remoteInspectionContext[O]=this;return this.retrieveForRemoteProxy(this.root)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InspectionTree"}},{key:"forObject",value:function(O,G){return new this({key:"inspectee",value:{inspectee:O},isCollapsed:!0,inspector:G})}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5969,end:8683})}(yd.TreeData);yd.InspectionTree=Wd;yd.InspectionTree=
Wd;yd.InspectionTree=Wd;var De=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("RemoteInspectionTree")&&"function"===typeof Xa.RemoteInspectionTree?Xa.RemoteInspectionTree:Xa.RemoteInspectionTree=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"systemInterface",get:function(){return this.evalEnvironment.systemInterface}},{key:Symbol.for("lively-instance-initialize"),
value:function(O){this.parentMap=new WeakMap;this.root=O.proxy;this.evalEnvironment=O.evalEnvironment;this.inspector=O.inspector;this.delegateId=O.delegateId}},{key:"getContextFor",value:function(O){return"System.get('@lively-env').remoteInspectionContext[\""+this.delegateId+'"].getNodeViaId("'+O.uuid+'").value'}},{key:"dispose",value:function(){var O=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){return G.yield(O.evalEnvironment.systemInterface.runEval("\n      delete System.get('@lively-env').remoteInspectionContext['"+
O.delegateId+"']\n    ",O.evalEnvironment),0)})}},{key:"display",value:function(O){return O.keyString+": "+O.valueString}},{key:"collapse",value:function(O,G){var Ea=this,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){if(1==oa.nextAddress)return(O.isCollapsed=G)||Ea.isLeaf(O)?oa.return():O.children.length?oa.jumpTo(0):oa.yield(Ea.evalEnvironment.systemInterface.runEval('\n         const node = this.getNodeViaId("'+O.uuid+'");\n         try {\n           this.collapse(node, false);\n         } catch (e) {\n\n         }\n         node.children.map(n => this.retrieveForRemoteProxy(n));\n      ',
{targetModule:"/lively.ide/js/inspector/context.js",context:"System.get('@lively-env').remoteInspectionContext[\""+Ea.delegateId+'"]'}),3);N=oa.yieldResult;O.children=N.isError?[]:N.value;oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RemoteInspectionTree"}},{key:"forObject",value:function(O,G){var Ea=this,N,oa,Ca,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return pb.yield(Ea.createRemoteContext(O,G),2);N=pb.yieldResult;
oa=N.proxy;Ca=N.delegateId;cb=N.evalEnvironment;return pb.return(new Ea({key:"inspectee",proxy:oa,delegateId:Ca,evalEnvironment:cb,inspector:G}))})}},{key:"createRemoteContext",value:function(O,G){var Ea=O.code,N=O.evalEnvironment,oa=O.delegateId,Ca,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return oa="lively://inspector-"+G.id,pb.yield(N.systemInterface.runEval('\n       const { InspectionTree } = await System.import("lively.ide/js/inspector/context.js");\n       const t = (() => '+
Ea+')();\n       const tree = InspectionTree.forObject(t);\n       tree.asRemoteDelegate("'+oa+'");\n    ',N),2);Ca=pb.yieldResult;cb=Ca.value;return pb.return({delegateId:oa,evalEnvironment:N,proxy:cb})})}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8692,end:11045})}(yd.InspectionTree);
yd.RemoteInspectionTree=De;yd.RemoteInspectionTree=De;yd.RemoteInspectionTree=De;(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("InspectionNode")&&"function"===typeof Xa.InspectionNode?Xa.InspectionNode:Xa.InspectionNode=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O){var G=
O.root,Ea=O.priority,N=O.key,oa=O.keyString,Ca=O.value,cb=O.valueString,pb=O.isCollapsed,yb=void 0===O.children?[]:O.children,Yb=void 0===O.isSelected?!1:O.isSelected,cc=void 0===O.visible?!0:O.visible;this.partition=O.partition;this.priority=Ea;this.key=N;this.keyString=String(oa||N);this.value=Ca;this.valueString=cb||yd.printValue(Ca);this.isCollapsed=pb;this.children=yb;this.isSelected=Yb;this.visible=cc;this.root=G}},{key:"__only_serialize__",get:function(){return[]}},{key:"isInspectionNode",
get:function(){return!0}},{key:"getSubNode",value:function(O){if(O.value&&O.value.isMorph)return new yd.MorphNode(Object.assign({root:this.root},O));var G=O.key,Ea=O.keyString,N=this.value,oa=O.partition;oa&&(N=oa.originalValue,Ea=G);return new yd.PropertyNode(Object.assign({},O,{keyString:Ea,key:G,target:N,partition:oa,root:this.root,spec:{}}))}},{key:"display",value:function(O){var G=this.keyString,Ea=this.valueString;if(!this.interactive)return G+": "+Ea;this._propertyWidget||(this._propertyWidget=
O.renderDraggableTreeLabel({value:G+": "+Ea}));this._propertyWidget.isSelected=this.isSelected;return this._propertyWidget}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectionNode"}},{key:"for",value:function(O,G){G=void 0===G?null:G;return O.value&&O.value.isMorph?new yd.MorphNode(Object.assign({root:G},O)):new yd.InspectionNode(Object.assign({root:G},O))}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11047,end:13612})})(void 0);(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("MorphNode")&&"function"===typeof Xa.MorphNode?Xa.MorphNode:Xa.MorphNode=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),
value:function(O){vb._get(Object.getPrototypeOf(Sa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);this.target=this.value;this.propertyInfo=this.target.propertiesAndPropertySettings().properties}},{key:"getSubNode",value:function(O){var G=this.propertyInfo[O.key]||{};return O.value&&O.value.isMorph?new yd.MorphNode(Object.assign({},O,{root:this.root})):new yd.PropertyNode(Object.assign({},O,{root:this.root,target:this.target,spec:G}))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MorphNode"}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:13614,end:14763})})(yd.InspectionNode);(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("PropertyNode")&&"function"===typeof Xa.PropertyNode?
Xa.PropertyNode:Xa.PropertyNode=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O){vb._get(Object.getPrototypeOf(Sa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);var G=O.spec,Ea=O.target;this.partition=O.partition;this.target=Ea;this.spec=G;this.foldedNodes={}}},{key:"__deserialize__",value:function(O,G){this.spec={}}},
{key:"interactive",get:function(){return this._interactive}},{key:"interactive",set:function(O){this._interactive=O}},{key:"isFoldable",get:function(){return!!this.spec.foldable}},{key:"isInternalProperty",get:function(){return"id"==this.keyString||this.keyString.includes("internal")}},{key:"getSubNode",value:function(O){return this.isFoldable?this.getFoldedContext(O):vb._get(Object.getPrototypeOf(Sa.prototype),"getSubNode",this).call(this,O)}},{key:"getFoldedContext",value:function(O){return this.foldedNodes[O.key]=
new yd.FoldedNode(Object.assign({},O,{root:this.root,target:this.target,foldableNode:this,spec:yd.obj.dissoc(this.spec,["foldable"])}))}},{key:"rerender",value:function(){this.root.inspector.refreshSelectedLine()}},{key:"refreshProperty",value:function(O,G){(G=void 0===G?!1:G)&&(this.target[this.key]=O);this.value=this.target[this.key];this.valueString=yd.printValue(this.value);this.interactive&&(G||this._propertyWidget.highlight());if(this.isFoldable)for(var Ea in this.foldedNodes)this.foldedNodes[Ea].value=
this.value[Ea],this.foldedNodes[Ea].valueString=yd.printValue(this.value[Ea]),this.foldedNodes[Ea]._propertyWidget&&yd.signal(this.foldedNodes[Ea]._propertyWidget,"update",this.value[Ea])}},{key:"display",value:function(O){var G=this,Ea=this._propertyWidget,N=this.keyString,oa=this.valueString,Ca=this.target,cb=this.value,pb=this.spec;if(!(this.interactive||pb.foldable&&yd.isMultiValue(cb,pb.foldable)))return O.renderPropertyControl({target:Ca,keyString:N,valueString:oa,tree:O.ui.propertyTree,value:cb,
spec:pb,node:this,fastRender:!0});if(Ea)return Ea.keyString=N,Ea.valueString=oa,Ea.isSelected=this.isSelected,Ea.control&&(Ea.control.isSelected=this.isSelected),Ea;Ea=this._propertyWidget=O.renderPropertyControl({target:Ca,keyString:N,valueString:oa,value:cb,spec:pb,node:this,isSelected:this.isSelected,fontColor:O.ui.propertyTree.fontColor});this.isInternalProperty||pb.readOnly||(yd.connect(Ea,"propertyValue",this,"refreshProperty",{updater:function(yb,Yb){return yb(Yb,!0)}}),yd.connect(Ea,"openWidget",
this.root,"onWidgetOpened",{converter:function(yb){return{widget:yb,node:G.sourceObj}}}));return Ea}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyNode"}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14765,end:18244})})(yd.InspectionNode);(function(Oa){var Xa=
lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Sa=Xa.hasOwnProperty("FoldedNode")&&"function"===typeof Xa.FoldedNode?Xa.FoldedNode:Xa.FoldedNode=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(O){vb._get(Object.getPrototypeOf(Sa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,O);this.foldableNode=
O=O.foldableNode;this.foldedProp=O.key+yd.string.capitalize(this.key)}},{key:"refreshProperty",value:function(O,G){G=void 0===G?!1:G;var Ea={};this.foldableNode.refreshProperty(Object.assign({},this.target[this.foldableNode.key],(Ea[this.key]=O,Ea)),G)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FoldedNode"}}],Xa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18246,end:18928})})(yd.PropertyNode);var Fe=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js");Fe.Color=mb;var md=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js"),Sa=Xa.hasOwnProperty("DarkTheme")&&"function"===typeof Xa.DarkTheme?Xa.DarkTheme:Xa.DarkTheme=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return vb(Sa,Oa,[{key:"background",get:function(){return Fe.Color.rgb(44,62,80)}},{key:"cursorColor",get:function(){return Fe.Color.gray}},{key:"default",get:function(){return{fontColor:"#abb2bf"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},
{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",
fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:Fe.Color.rgb(204,109,243)}}},{key:"atom",get:function(){return{fontColor:"#d19a66"}}},{key:"number",get:function(){return{fontColor:Fe.Color.orange}}},{key:"def",get:function(){return{fontColor:"#e5c07b"}}},{key:"variable",get:function(){return{fontColor:"#d19a66"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:Fe.Color.rgb(33,
150,243)}}},{key:"operator",get:function(){return{fontColor:"#abb2bf"}}},{key:"variable-2",get:function(){return{fontColor:"#e06c75"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#7F848E"}}},{key:"string",get:function(){return{fontColor:"#98c378"}}},{key:"string-2",get:function(){return{fontColor:"#98c378"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#d19a66"}}},{key:"builtin",
get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#515a6b"}}},{key:"brace",get:function(){return{fontColor:"#abb2bf"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#d19a66"}}},{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:Fe.Color.white,fontWeight:"bold",backgroundColor:Fe.Color.rgba(136,
136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:Fe.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:Fe.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DarkTheme"}},{key:"instance",get:function(){return this._instance||
(this._instance=new this)}}],Xa,{pathInPackage:function(){return"themes/dark.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3009})}(void 0),tf=md=Fe.DarkTheme;Fe.default=md;var lc=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js");lc.inspect=Ba;lc.remoteInspect=J;lc.generateReferenceExpression=ta;lc.onNumberDragStart=
function(Oa,Xa){Xa.initPos=Oa.position;Xa.factorLabel=(new lc.Tooltip({description:"1x"})).openInWorld(Oa.hand.position.addXY(10,10))};lc.onNumberDrag=function(Oa,Xa){var Sa=lc.getScaleAndOffset(Oa,Xa),O=Sa.scale;Sa=Sa.offset;Xa.factorLabel.position=Oa.hand.position.addXY(10,10);Xa.factorLabel.description=O+"x";return lc.getCurrentValue(Sa,O,Xa)};lc.onNumberDragEnd=function(Oa,Xa){var Sa=lc.getScaleAndOffset(Oa,Xa);Oa=Sa.offset;Sa=Sa.scale;Xa.factorLabel.softRemove();return lc.getCurrentValue(Oa,
Sa,Xa)};lc.getScaleAndOffset=function(Oa,Xa){var Sa=Oa.position.subPt(Xa.initPos);Oa=Sa.x;Xa=lc.num.roundTo(Math.exp(-Sa.y/$world.height*6),.01)*Xa.baseFactor;return{offset:Oa,scale:Xa}};lc.getCurrentValue=function(Oa,Xa,Sa){return Math.max(Sa.min,Math.min(Sa.max,Sa.scrubbedValue+(Sa.floatingPoint?Oa*Xa:Math.round(Oa*Xa))))};lc.Color=mb;lc.Rectangle=Eb;lc.rect=zc;lc.pt=Jc;lc.obj=ee;lc.num=rd;lc.Path=ed;lc.arr=Vb;lc.promise=wd;lc.connect=oc;lc.disconnect=xb;lc.once=Dc;lc.Morph=hc;lc.Tooltip=Cc;lc.VerticalLayout=
ic;lc.GridLayout=Qc;lc.HorizontalLayout=jb;lc.morph=Bc;lc.CustomLayout=fb;lc.Label=Ob;lc.Icon=Cb;lc.StyleSheet=tc;lc.config=ob;lc.Tree=bc;lc.LoadingIndicator=Ma;lc.DropDownList=Db;lc.DropDownSelector=gb;lc.SearchField=zb;lc.LabeledCheckBox=ec;lc.MorphHighlighter=Lb;lc.InteractiveMorphSelector=Kb;lc.printValue=hb;lc.RemoteInspectionTree=De;lc.InspectionTree=Wd;lc.isMultiValue=sb;lc.valueWidgets=za;lc.popovers=bb;lc.DarkTheme=tf;lc.DefaultTheme=mc;lc.syncEval=rc;lc.inspectorCommands=[{name:"focus codeEditor",
exec:function(Oa){Oa.get("codeEditor").show();Oa.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(Oa){Oa.get("propertyTree").show();Oa.get("propertyTree").focus();return!0}}];(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("DraggedProp")&&"function"===typeof Xa.DraggedProp?Xa.DraggedProp:Xa.DraggedProp=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return vb(Sa,Oa,[{key:"applyToTarget",value:function(O){var G=this.currentTarget,Ea=this.control;this.remove();lc.MorphHighlighter.removeHighlighters(O.world);if(G)if(G.isText&&"js"===G.editorModeName){var N=G.evalEnvironment.context;O=G.textPositionFromPoint(G.localize(O.position));N=lc.generateReferenceExpression(this.sourceObject,{fromMorph:N});Ea.keyString&&(N+="."+Ea.keyString);G.insertTextAndSelect(N,O);G.focus()}else"propertyValue"in Ea&&(G[Ea.keyString]=Ea.propertyValue)}},{key:"update",
value:function(O){O=O.hand.globalPosition;var G=this.morphBeneath(O);if(G){for(G==this.morphHighlighter&&(G=G.morphBeneath(O));[G].concat($jscomp.arrayFromIterable(G.ownerChain())).find(function(Ea){return!Ea.visible});)G=G.morphBeneath(O);if(G!=this.currentTarget){this.currentTarget=G;this.morphHighlighter&&this.morphHighlighter.deactivate();if(G.isWorld)return;this.morphHighlighter=lc.MorphHighlighter.for($world,G);this.morphHighlighter.show()}this.position=O}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:lc.Color.rgb(169,204,227)},fill:{defaultValue:lc.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},submorphs:{after:["control"],initialize:function(){var O=this.control;if(!O)return this.submorphs=[];this.height=22;this.submorphs=[O];O.top=0;O.fontSize=14;"function"===typeof O.relayout&&O.relayout();this.width=O.width+20;this.adjustOrigin(lc.pt(10,
10))}}}}}],Xa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1272,end:3714})})(lc.Morph);(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof Xa.DraggableTreeLabel?Xa.DraggableTreeLabel:Xa.DraggableTreeLabel=
function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"inspector",get:function(){return this.owner.owner}},{key:"onDragStart",value:function(O){this.draggedProp=new lc.DraggedProp({sourceObject:this.inspector.targetObject,control:this.copy()});this.draggedProp.openInWorld();lc.connect(O.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(O){}},{key:"onDragEnd",value:function(O){lc.disconnect(O.hand,
"update",this.draggedProp,"update");this.draggedProp.applyToTarget(O)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DraggableTreeLabel"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},keyString:{},valueString:{},fontFamily:{defaultValue:lc.config.codeEditor.defaultStyle.fontFamily},fill:{defaultValue:lc.Color.transparent},padding:{defaultValue:lc.rect(0,1,10,-1)},isSelected:{after:["submorphs"],
set:function(O){this.setProperty("isSelected",O);O?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),this.removeStyleClass("selected"));this.control&&(this.control.isSelected=O)}}}}}],Xa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3716,
end:5055})})(lc.Label);Wd=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("PropertyControl")&&"function"===typeof Xa.PropertyControl?Xa.PropertyControl:Xa.PropertyControl=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"menuItems",value:function(){return this._targetMenuItems||[]}},{key:"renderValueSelector",value:function(O,G,Ea){O.control=
new lc.DropDownSelector({opacity:.8,fill:lc.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:G,padding:0,values:Ea});lc.connect(O.control,"update",O,"propertyValue",{updater:function(N,oa){this.targetObj.propertyValue!=oa&&N(oa)}});lc.connect(O,"update",O.control,"selectedValue",{updater:function(N,oa){oa=oa&&oa.valueOf?oa.valueOf():oa;this.targetObj.propertyValue!=oa&&N(oa)}});return O}},{key:"toggleMultiValuePlaceholder",value:function(O){this.multiValuePlaceholder=
this.multiValuePlaceholder||this.addMorph({fill:lc.Color.transparent,layout:new lc.HorizontalLayout({spacing:3}),name:"multi value placeholder",nativeCursor:"pointer",submorphs:lc.arr.range(0,2).map(function(G){return{type:"ellipse",fill:lc.Color.gray.withA(.5),reactsToPointer:!1,extent:lc.pt(7,7)}})});O?(lc.connect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=0,this.multiValuePlaceholder.visible=
!0):(lc.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=!1)}},{key:"toggleFoldableValue",value:function(O){this.foldableProperties&&this.toggleMultiValuePlaceholder(lc.isMultiValue(O,this.foldableProperties))}},{key:"asFoldable",value:function(O){this.foldableProperties=O;lc.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&(this.control.topLeft=this.textBounds().topRight().addXY(-2,
1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},{key:"toString",value:function(){return this.keyString+": "+this.valueString}},{key:"highlight",value:function(){this.highlighter&&this.highlighter.remove();var O=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});O.isLayoutable=!1;O.fontWeight="bold";O.fontColor=lc.Color.orange;O.reactsToPointer=
!1;O.fadeOut(2E3)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyControl"}},{key:"properties",get:function(){return{root:{},keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(O){this.submorphs=[O]}},layout:{initialize:function(){this.layout=new lc.CustomLayout({relayout:function(O){O.relayout()}})}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[]}}}}},
{key:"inferType",value:function(O){return(O=O.value)&&(O.isColor||O.isGradient)?"Color":O&&O.isPoint?"Point":lc.obj.isBoolean(O)?"Boolean":lc.obj.isNumber(O)?"Number":lc.obj.isString(O)?"String":O&&O.isRectangle?"Rectangle":!1}},{key:"render",value:function(O){O.spec.type||(O.spec=Object.assign({},O.spec,{isFloat:!Number.isInteger(O.value),type:this.inferType(O)}));switch(O.spec.type){case "Color":var G=this.renderColorControl(O);break;case "ColorGradient":G=this.renderColorControl(Object.assign({},
O,{gradientEnabled:!0}));break;case "Number":G=this.renderNumberControl(O);break;case "String":G=this.renderStringControl(O);break;case "RichText":G=this.renderStringControl(O);break;case "Layout":G=this.renderLayoutControl(O);break;case "Enum":G=this.renderEnumControl(O);break;case "Shadow":G=this.renderShadowControl(O);break;case "Point":G=this.renderPointControl(O);break;case "Rectangle":G=this.renderRectangleControl(O);break;case "Boolean":G=this.renderBooleanControl(O);break;default:G=this.renderItSomehow(O)}G.control&&
(lc.connect(G.control,"openWidget",G,"openWidget"),G.toggleFoldableValue(O.value));return G}},{key:"baseControl",value:function(O){var G=O.spec;O=new this({keyString:O.keyString,valueString:O.valueString,isSelected:!1,propertyValue:O.value});G.foldable&&O.asFoldable(G.foldable);return O}},{key:"renderGrabbableKey",value:function(O){var G=this,Ea=O.target;return[O.keyString+":",{nativeCursor:"-webkit-grab",onDragStart:function(N){N.state.draggedProp=new lc.DraggedProp({sourceObject:Ea,control:G.baseControl(O)});
N.state.draggedProp.openInWorld();lc.connect(N.hand,"update",N.state.draggedProp,"update")},onDrag:function(N){},onDragEnd:function(N){lc.disconnect(N.hand,"update",N.state.draggedProp,"update");N.state.draggedProp.applyToTarget(N)}}]}},{key:"renderEnumControl",value:function(O){var G=O.value,Ea=O.spec.values,N=O.keyString,oa=O.target,Ca=O.node,cb=function(pb,yb){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){oa.world().openWorldMenu(pb,Ea.map(function(cc){return{string:cc.toString(),
action:function(){oa[N]=cc;Ca.rerender()}}}));Yb.jumpToEnd()})};return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+(G?G.valueOf?G.valueOf():G:"Not set"),{nativeCursor:"pointer",onMouseDown:cb}],$jscomp.arrayFromIterable(lc.Icon.textAttribute("angle-down",{paddingTop:"4px",paddingLeft:"4px",opacity:.7,onMouseDown:cb})))}},{key:"renderStringControl",value:function(O){var G=O.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+(200<G.length?G.slice(0,
20)+"...":G),{fontColor:lc.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(O){var G=O.value,Ea=O.keyString,N=O.valueString,oa=O.target,Ca=O.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+N,{fontColor:lc.Color.black,nativeCursor:"pointer",onMouseDown:function(cb){var pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){if(1==yb.nextAddress)return pb=new lc.popovers.RectanglePopover({hasFixedPosition:!0,rectangle:G}),pb.relayout(),
yb.yield(pb.fadeIntoWorld(cb.positionIn(oa.world())),2);lc.connect(pb,"rectangle",function(Yb){oa[Ea]=Yb;Ca.rerender()});yb.jumpToEnd()})}}])}},{key:"renderBooleanControl",value:function(O){var G=O.value,Ea=O.keyString,N=O.valueString,oa=O.target,Ca=O.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+N,{nativeCursor:"pointer",fontColor:G?lc.Color.green:lc.Color.red,onMouseDown:function(cb){oa[Ea]=!oa[Ea];Ca.rerender()}}])}},{key:"renderNumberControl",value:function(O){var G=
O.value,Ea=O.spec,N=O.keyString,oa=O.valueString,Ca=O.node,cb=O.target,pb=O.tree,yb=void 0===Ca._numberControls?new kd:Ca._numberControls,Yb=$jscomp.makeIterator(yb.submorphs),cc=Yb.next().value,Ec=Yb.next().value;yb.fontColor=pb.fontColor;var od=Ca._numberControls=yb;"max"in Ea&&"min"in Ea&&-Infinity!=Ea.min&&Infinity!=Ea.max?(od.baseFactor=(Ea.max-Ea.min)/100,od.floatingPoint=Ea.isFloat,od.max=Ea.max,od.min=Ea.min):(od.floatingPoint=Ea.isFloat,od.baseFactor=.5,od.min=void 0!=Ea.min?Ea.min:-Infinity,
od.max=void 0!=Ea.max?Ea.max:Infinity);var Dd=lc.valueWidgets.NumberWidget.properties.fontColor.defaultValue;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),$jscomp.arrayFromIterable(Ca._inputMorph?[Ca._inputMorph,{}]:[" "+(void 0!=G&&(G.valueOf?G.valueOf():G).toFixed(Ea.isFloat?Math.max(4,lc.num.precision(G)):0))+" ",{fontColor:Dd,onMouseUp:function(ad){Ca._inputMorph=lc.morph({type:"input",fill:null,fontColor:Dd,fontFamily:"IBM Plex Mono",fontSize:14,padding:lc.rect(8,2,-6,
2),height:23,cursorColor:lc.Color.white,value:G.valueOf?G.valueOf():oa});cb[N]=G;Ca._inputMorph.focus();lc.once(Ca._inputMorph,"inputAccepted",function(Vd){delete Ca._inputMorph;cb[N]=Ea.isFloat?Number.parseFloat(Vd):Number.parseInt(Vd);Ca.rerender()});lc.once(Ca._inputMorph,"onBlur",function(Vd){Ca._inputMorph&&(delete Ca._inputMorph,cb[N]=G,Ca.rerender())});Ca.rerender()},onDragStart:function(ad){od.scrubbedValue=G;lc.onNumberDragStart(ad,od)},onDrag:function(ad){cb[N]=lc.onNumberDrag(ad,od);Ca.rerender()},
onDragEnd:function(ad){return lc.onNumberDragEnd(ad,od)}},yb,{onMouseUp:function(){cc.fill=Ec.fill=null},onMouseDown:function(ad){if(ad.targetMorph===cc){cc.fill=lc.Color.white.withA(.2);if("max"in Ea&&cb[N]>=Ea.max)return;cb[N]+=1}if(ad.targetMorph===Ec){Ec.fill=lc.Color.white.withA(.2);if("min"in Ea&&cb[N]<=Ea.min)return;--cb[N]}Ca.rerender()}}]))}},{key:"renderShadowControl",value:function(O){var G=O.keyString,Ea=O.value,N=O.target,oa=O.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),
[""+(Ea?Ea.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:function(Ca){var cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return cb=new lc.popovers.ShadowPopover({shadowValue:N[G],hasFixedPosition:!0}),pb.yield(cb.fadeIntoWorld(Ca.positionIn(N.world())),2);lc.connect(cb,"shadowValue",function(yb){N[G]=yb;oa.rerender()});pb.jumpToEnd()})}}])}},{key:"renderPointControl",value:function(O){var G=O.keyString,Ea=O.value,N=O.target,oa=O.node,Ca=lc.valueWidgets.NumberWidget.properties.fontColor.defaultValue,
cb={nativeCursor:"pointer",onMouseDown:function(pb){var yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return yb=new lc.popovers.PointPopover({pointValue:N[G],hasFixedPosition:!0}),Yb.yield(yb.fadeIntoWorld(pb.positionIn(N.world())),2);lc.connect(yb,"pointValue",function(cc){N[G]=cc;oa.rerender()});Yb.jumpToEnd()})}};return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" pt(",Object.assign({},cb),""+Ea.x.toFixed(),Object.assign({fontColor:Ca},
cb),",",Object.assign({},cb),""+Ea.y.toFixed(),Object.assign({fontColor:Ca},cb),")",Object.assign({},cb)])}},{key:"renderLayoutControl",value:function(O){var G=O.valueString,Ea=O.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+(Ea?G:"No Layout"),{onMouseDown:function(N){}}])}},{key:"renderColorControl",value:function(O){var G=O.node,Ea=O.gradientEnabled,N=O.valueString,oa=O.keyString,Ca=O.value,cb=O.target;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),
[lc.morph({fill:Ca.valueOf?Ca.valueOf():Ca,extent:lc.pt(15,15),borderColor:lc.Color.gray,borderWidth:1}),{paddingLeft:"5px",paddingTop:"4px",paddingRight:"5px"},""+(Ca?Ca.valueOf?Ca.valueOf():N:"No Color"),{nativeCursor:"pointer",onMouseDown:function(pb){var yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return yb=new lc.popovers.FillPopover({hasFixedPosition:!0,handleMorph:cb,fillValue:Ca,title:"Fill Control",gradientEnabled:Ea}),Yb.yield(yb.fadeIntoWorld(pb.positionIn(cb.world())),
2);lc.connect(yb,"fillValue",function(cc){cb[oa]=cc;G.rerender()});Yb.jumpToEnd()})}}])}},{key:"renderItSomehow",value:function(O){var G=O.valueString;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(O)),[" "+G,{}])}}],Xa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5064,
end:20451})}(lc.DraggableTreeLabel);lc.PropertyControl=Wd;lc.PropertyControl=Wd;lc.PropertyControl=Wd;lc.inspect=Ba;lc.inspect=Ba;lc.remoteInspect=J;lc.remoteInspect=J;lc.generateReferenceExpression=ta;lc.generateReferenceExpression=ta;var kd=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("NumberControls")&&"function"===typeof Xa.NumberControls?Xa.NumberControls:Xa.NumberControls=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return vb(Sa,Oa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberControls"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new lc.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:lc.Color.transparent},width:{defaultValue:15},fontColor:{derived:!0,set:function(O){this.submorphs.map(function(G){return G.fontColor=O})}},submorphs:{initialize:function(){this.submorphs=[lc.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,
nativeCursor:"pointer",padding:lc.rect(5,2,0,-6),fontSize:12}),lc.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,padding:lc.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],Xa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23124,end:24169})}(lc.Morph);
(function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("PropertyTree")&&"function"===typeof Xa.PropertyTree?Xa.PropertyTree:Xa.PropertyTree=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:"onDrag",value:function(O){this._onDragHandler&&this._onDragHandler(O)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyTree"}}],Xa,{pathInPackage:function(){return"js/inspector.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25334,end:25445})})(lc.Tree);Wd=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),Sa=Xa.hasOwnProperty("Inspector")&&"function"===typeof Xa.Inspector?Xa.Inspector:Xa.Inspector=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return vb(Sa,Oa,[{key:"onWindowClose",value:function(){this.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"onMouseMove",value:function(O){}},{key:"__after_deserialize__",value:function(O,G,Ea){var N=this,oa=new lc.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:lc.InspectionTree.forObject(null,this)}));this.addMorph(oa,this.getSubmorphNamed("terminal toggler"));vb._get(Object.getPrototypeOf(Sa.prototype),
"__after_deserialize__",this).call(this,O,G,Ea);!this.isComponent&&this.master.whenApplied().then(function(){N.layout.col(0).row(1).group.morph=oa;N.targetObject&&(N.targetObject=N.targetObject)})}},{key:"__additionally_serialize__",value:function(O,G,Ea,N){O=O.props.submorphs.value;for(G=O.length;G--;)Ea.refForId(O[G].id).realObj==this.ui.propertyTree&&lc.arr.removeAt(O,G)}},{key:"renderDraggableTreeLabel",value:function(O){return new lc.DraggableTreeLabel(O)}},{key:"renderPropertyControl",value:function(O){return lc.PropertyControl.render(O)}},
{key:"onLoad",value:function(){var O=this.ui,G=O.codeEditor,Ea=O.thisBindingSelector,N=O.propertyTree;G.changeEditorMode("js").then(function(){return G.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==Ea.selection?G.owner.selectedContext:G.owner.targetObject},get systemInterface(){return lc.Path("treeData.systemInterface").get(N)},format:"esm"}}).catch(function(oa){return $world.logError(oa)})}},{key:Symbol.for("lively-instance-initialize"),value:function(O){vb._get(Object.getPrototypeOf(Sa.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,O);O=this.ui;var G=O.targetPicker,Ea=O.propertyTree,N=O.resizer,oa=O.terminalToggler,Ca=O.unknowns,cb=O.internals,pb=O.searchField,yb=O.codeEditor,Yb=O.fixImportButton,cc=O.thisBindingSelector;yb.changeEditorMode("js").then(function(){return yb.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==cc.selection?yb.owner.selectedContext:yb.owner.targetObject},get systemInterface(){return Ea.treeData.systemInterface},
format:"esm"}}).catch(function(Ec){return $world.logError(Ec)});lc.connect(G,"onMouseUp",this,"selectTarget");lc.connect(Ea,"onScroll",this,"repositionOpenWidget");lc.connect(N,"onDrag",this,"adjustProportions");lc.connect(oa,"onMouseDown",this,"toggleCodeEditor");lc.connect(Ca,"trigger",this,"filterProperties");lc.connect(cb,"trigger",this,"filterProperties");lc.connect(pb,"searchInput",this,"filterProperties");lc.connect(Ea,"nodeCollapseChanged",this,"filterProperties");lc.connect(this,"extent",
this,"relayout");lc.connect(cc,"selection",this,"bindCodeEditorThis");lc.connect(Yb,"fire",yb,"execCommand",{updater:function(Ec){return Ec("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}})}},{key:"refreshSelectedLine",value:function(){var O=this.ui.propertyTree.selectedIndex-1,G=this.ui.propertyTree.selectedNode;this.ui.propertyTree.selectedNode.refreshProperty();G=this.ui.propertyTree.document.getLine(O).textAndAttributes.slice(0,4).concat(G.display(this));O=this.ui.propertyTree.lineRange(O,
!1);this.ui.propertyTree.replace(O,G,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!=this.lastStyleSheetProps)this.refreshTreeView(),this.lastStyleSheetProps=this.targetObject._styleSheetProps;else{var O=lc.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));if(O!=this.lastChange||
this.lastSubmorphs!=lc.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString==O.prop&&this.repositionOpenWidget(),this.lastChange=O,this.lastSubmorphs=lc.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",value:function(){var O;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(G){G=G.node;G.target&&(O=G.foldableNode?G.target[G.foldableNode.key][G.key]:
G.target[G.key],!lc.obj.equals(O,G.value)&&G.refreshProperty&&G.refreshProperty(O))});this.ui.propertyTree.update(!0);this.ui.propertyTree.doNotAcceptDropsForThisAndSubmorphs()}},{key:"isInspector",get:function(){return!0}},{key:"prepareForNewTargetObject",value:function(O,G){G=void 0===G?!1:G;var Ea=this,N,oa,Ca,cb,pb,yb,Yb,cc,Ec,od,Dd,ad,Vd,Td,Gd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cd){switch(Cd.nextAddress){case 1:if(!Ea.isUpdating()){Cd.jumpTo(2);break}return Cd.yield(Ea.whenUpdated(),
2);case 2:N=lc.promise.deferred();oa=N.promise;Ca=!!Ea.target;Ea.updateInProgress=oa;Cd.setCatchFinallyBlocks(4);G&&(cb=lc.LoadingIndicator.open("connecting to remote..."));if(!G){pb=lc.InspectionTree.forObject(O,Ea);Cd.jumpTo(6);break}return Cd.yield(lc.RemoteInspectionTree.forObject(O,Ea),7);case 7:pb=Cd.yieldResult;case 6:return yb=pb,Yb=Ea.ui.propertyTree,Cd.yield(yb.collapse(yb.root,!1),8);case 8:if(!yb.root.children){Cd.jumpTo(9);break}return Cd.yield(yb.collapse(yb.root.children[0],!1),9);
case 9:if(cc=Ea.originalTreeData&&Ea.originalTreeData.diff(yb)){Ec=$jscomp.makeIterator(cc);for(od=Ec.next();!od.done;od=Ec.next())Dd=od.value,ad=$jscomp.makeIterator(Dd),Vd=ad.next().value,Td=ad.next().value,Vd.refreshProperty(Td.value);Cd.jumpTo(11);break}Yb.treeData=yb;return Cd.yield(Ea.filterProperties(),12);case 12:if(!Yb.treeData.root.isCollapsed){Cd.jumpTo(13);break}return Cd.yield(Yb.onNodeCollapseChanged({node:yb.root,isCollapsed:!1}),14);case 14:Yb.selectedIndex=1;case 13:return Cd.yield(Yb.execCommand("uncollapse selected node"),
11);case 11:Ea.toggleWindowStyle(Ca);cb&&cb.remove();Cd.leaveTryBlock(5);break;case 4:Gd=Cd.enterCatchBlock(),Ea.showError(Gd);case 5:Ea.startStepping(1E3,"refreshAllProperties"),Ea.updateInProgress=null,Cd.jumpToEnd()}})}},{key:"toggleWindowStyle",value:function(O){O=void 0===O?!0:O;var G=this,Ea,N,oa,Ca,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){if(1==pb.nextAddress)return Ea=300,Ca=G.ui.codeEditor.pluginFind(function(yb){return yb.runEval}),cb=G.getWindow(),pb.yield(Ca.runEval("System.get('@system-env').node"),
2);pb.yieldResult.value?(oa=[].concat($jscomp.arrayFromIterable(lc.arr.without(cb.styleClasses,"local")),["node"]),N=lc.DarkTheme.instance):(oa=["local"].concat($jscomp.arrayFromIterable(cb?lc.arr.without(cb.styleClasses,"node"):[])),N=lc.DefaultTheme.instance);Ca.theme=N;O?(cb&&cb.animate({duration:Ea,styleClasses:oa}),G.ui.codeEditor.animate({fill:N.background,duration:Ea})):cb&&(cb.styleClasses=oa);G.ui.codeEditor.textString=G.ui.codeEditor.textString;Ca.highlight();pb.jumpToEnd()})}},{key:"isUpdating",
value:function(){return!!this.updateInProgress}},{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"build",value:function(){var O=this,G=Object.assign({type:"text",borderWidth:1,borderColor:lc.Color.gray,lineWrapping:"by-chars"},lc.config.codeEditor.defaultStyle,{textString:""}),Ea=lc.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"]});lc.rect(0,0,this.width,30);var N=new lc.SearchField({styleClasses:["idle"],
name:"searchField"});Ea[1].paddingTop="2px";this.submorphs=[{name:"searchBar",submorphs:[N,{type:"button",name:"targetPicker",padding:lc.rect(2,2,0,0),borderRadius:15,master:{auto:"styleguide://System/buttons/light"},tooltip:"Change Inspection Target",label:lc.Icon.textAttribute("crosshairs")},new lc.LabeledCheckBox({label:"Internals",name:"internals"}),new lc.LabeledCheckBox({label:"Unknowns",name:"unknowns"})]},new lc.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:lc.InspectionTree.forObject(null,
this)})),lc.Icon.makeLabel("keyboard",{name:"terminal toggler"}),{name:"resizer"},Object.assign({name:"codeEditor"},G),{name:"fix import button",type:"button",visible:!1,label:"fix undeclared vars"},{name:"this binding selector",type:lc.DropDownList,visible:!1,listAlign:"top",items:[{isListItem:!0,value:"target",label:["this ",null].concat($jscomp.arrayFromIterable(Ea),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat($jscomp.arrayFromIterable(Ea),[" selection",null])}]}];
this.ui.thisBindingSelector.listMorph.dropShadow=!0;this.ui.thisBindingSelector.listMorph.borderRadius=3;this.ui.thisBindingSelector.whenRendered().then(function(){O.ui.thisBindingSelector.selection="target"})}},{key:"selectTarget",value:function(){var O=this,G,Ea,N,oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){switch(Ca.nextAddress){case 1:if(O.env.eventDispatcher.isKeyPressed("Shift"))return Ea=$jscomp,N=Ea.makeIterator,Ca.yield($world.execCommand("select morph",{justReturn:!0}),
5);O.toggleSelectionInstructions(!0);return Ca.yield(lc.InteractiveMorphSelector.selectMorph(),4);case 4:G=Ca.yieldResult;O.toggleSelectionInstructions(!1);Ca.jumpTo(3);break;case 5:oa=N.call(Ea,Ca.yieldResult),G=oa.next().value;case 3:G&&(O.targetObject=G),Ca.jumpToEnd()}})}},{key:"toggleSelectionInstructions",value:function(O){if(O&&!this.instructionWidget){var G=lc.morph({type:"label",name:"escapeKey",value:"esc"});G.whenRendered().then(function(){return G.fit()});this.instructionWidget=this.addMorph({type:"text",
opacity:0,center:this.extent.scaleBy(.5),width:120,fixedWidth:!0,lineWrapping:!0,name:"selectionInstruction",textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",{},G,{}]});this.instructionWidget.animate({opacity:1,duration:200})}else this.instructionWidget.fadeOut(200),this.instructionWidget=null}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",value:function(O){O=O.widget;this.openWidget&&
this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;O.epiMorph=!0;this.openWidget=O;lc.once(O,"close",this,"closeOpenWidget");lc.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",value:function(){var O=this.ui.propertyTree,G=O.textLayout.boundsFor(O,{column:0,row:O.selectedIndex-1});G=O.worldPoint(lc.pt(G.x,G.y+G.height/2)).addPt(O.scroll.negated());O=O.globalBounds();G.x=this.globalBounds().center().x;G.y<O.top()?G=O.topCenter():O.bottom()-
20<G.y&&(G=O.bottomCenter().addXY(0,-20));return G}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(O){this.layout.row(1).height+=O.state.dragDelta.y;this.relayout()}},{key:"isEditorVisible",value:function(){return 10<this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(O){if(O!==this.isEditorVisible()){var G=this.extent,Ea=this.layout,N=this.ui,oa=N.terminalToggler,
Ca=N.codeEditor,cb=N.thisBindingSelector;N=N.fixImportButton;Ea.disable();O?(oa.fontColor=lc.Color.rgbHex("00e0ff"),Ea.row(3).height=this.codeEditorHeight||180,Ea.row(2).height=5,N.animate({visible:!0,duration:200}),cb.animate({visible:!0,duration:200})):(this.codeEditorHeight=Ea.row(3).height,oa.fontColor=lc.Color.white,Ea.row(3).height=Ea.row(2).height=0,N.animate({visible:!1,duration:200}),cb.animate({visible:!1,duration:200}));this.extent=G;Ea.enable({duration:200});this.relayout({duration:200});
Ca.focus();Ca.animate({opacity:O?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var O=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){O.makeEditorVisible(!O.isEditorVisible());G.jumpToEnd()})}},{key:"filterProperties",value:function(){var O=this,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return G=O.ui.searchField,Ea=O.ui.propertyTree,O.originalTreeData||(O.originalTreeData=Ea.treeData),lc.disconnect(Ea.treeData,"onWidgetOpened",
O,"onWidgetOpened"),N.yield(Ea.treeData.filter({maxDepth:2,showUnknown:O.ui.unknowns.checked,showInternal:O.ui.internals.checked,iterator:function(oa){return G.matches(oa.key)}}),2);Ea.update();lc.connect(Ea.treeData,"onWidgetOpened",O,"onWidgetOpened");N.jumpToEnd()})}},{key:"relayout",value:function(O){O=void 0===O?{}:O;var G=this,Ea,N,oa,Ca,cb,pb,yb,Yb,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ec){G.layout&&G.layout.forceLayout();Ea=G;N=Ea.ui;oa=N.fixImportButton;Ca=N.terminalToggler;
cb=N.propertyTree;pb=N.thisBindingSelector;yb=cb.bounds().insetBy(5).bottomLeft();Yb=cb.bounds().insetBy(5).bottomRight();cc=Yb.subXY(oa.width+10,0);pb.width=115;pb.listMorph.itemHeight=20;O.duration?(Ca.animate(Object.assign({bottomLeft:yb},O)),oa.animate(Object.assign({bottomRight:Yb},O)),pb.animate(Object.assign({bottomRight:cc},O))):(Ca.bottomLeft=yb,oa.bottomRight=Yb,pb.bottomRight=cc);Ec.jumpToEnd()})}},{key:"keybindings",get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},{keys:"Alt-Down",
command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}].concat(vb._get(Object.getPrototypeOf(Sa.prototype),"keybindings",this))}},{key:"commands",get:function(){return lc.inspectorCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Inspector"}},{key:"openInWindow",value:function(O){if(System._testsRunning)return console.log(O.targetObject);O=new this(O);O.openInWindow().doNotAcceptDropsForThisAndSubmorphs();return O}},{key:"properties",
get:function(){return{extent:{defaultValue:lc.pt(400,500)},fill:{defaultValue:lc.Color.transparent},name:{defaultValue:"inspector"},_serializableTarget:{defaultValue:null},remoteTarget:{after:["submorphs"],set:function(O){this.setProperty("remoteTarget",O);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(O,!0))}},targetObject:{after:["submorphs"],set:function(O){this._serializableTarget=O&&O.isMorph?O.id:O;this.setProperty("targetObject",O);this.ui.propertyTree&&(this.originalTreeData=
null,this.prepareForNewTargetObject(O))}},originalTreeData:{serialize:!1},selectedContext:{readOnly:!0,derived:!0,get:function(){var O=this.ui.propertyTree,G=O.treeData;return G.getContextFor(O.selectedNode||G.root)}},submorphs:{initialize:function(){this.build()}},ui:{readOnly:!0,derived:!0,after:["submorphs"],get:function(){return{codeEditor:this.getSubmorphNamed("codeEditor"),terminalToggler:this.getSubmorphNamed("terminal toggler"),fixImportButton:this.getSubmorphNamed("fix import button"),thisBindingSelector:this.getSubmorphNamed("this binding selector"),
propertyTree:this.getSubmorphNamed("propertyTree"),unknowns:this.getSubmorphNamed("unknowns"),internals:this.getSubmorphNamed("internals"),targetPicker:this.getSubmorphNamed("targetPicker"),searchBar:this.getSubmorphNamed("searchBar"),searchField:this.getSubmorphNamed("searchField"),resizer:this.getSubmorphNamed("resizer")}}},updateInProgress:{defaultValue:!1,serialize:!1},treeStyle:{defaultValue:{draggable:!0,borderWidth:1,borderColor:lc.Color.gray,fontSize:14,fontFamily:lc.config.codeEditor.defaultStyle.fontFamily}},
master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/inspector/light"}}}}}}],Xa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25462,end:46018})}(lc.Morph);Wd=lc.Inspector;De=Ia("I",Wd);lc.default=Wd;var ge=lively.FreezerRuntime.recorderFor("lively.ide/text/code-evaluation-commands.js");
ge.Inspector=De;ge.string=sc;ge.Morph=hc;ge.pt=Jc;ge.Color=mb;Wd=[{name:"doit",doc:"Evaluates the selecte code or the current line and report the result",exec:function(Oa,Xa,Sa){Sa=void 0===Sa?1:Sa;var O,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return Oa.maybeSelectCommentOrLine(),N.setCatchFinallyBlocks(2),Xa=Object.assign({},Xa,{logDoit:!0,inspect:!0,inspectDepth:Sa}),N.yield(Oa.doEval(void 0,Xa),4);case 4:O=N.yieldResult;G=O.error?O.error:
O.isError?O.value:null;N.leaveTryBlock(3);break;case 2:G=Ea=N.enterCatchBlock();case 3:return G?Oa.showError(G):Oa.setStatusMessage(ge.string.truncate(O.value,1E3)),N.return(O)}})}},{name:"eval all",doc:"Evaluates the entire text contents",scrollCursorIntoView:!1,exec:function(Oa,Xa){var Sa,O,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:return Ea.setCatchFinallyBlocks(2),Ea.yield(Oa.doEval({start:{row:0,column:0},end:Oa.documentEndPosition},Object.assign({},
Xa,{logDoit:!0})),4);case 4:Sa=Ea.yieldResult;O=Sa.error?Sa.error:Sa.isError?Sa.value:null;Ea.leaveTryBlock(3);break;case 2:O=G=Ea.enterCatchBlock();case 3:return O?Oa.showError(O):Oa.setStatusMessage(String(Sa.value)),Ea.return(Sa)}})}},{name:"printit",doc:"Evaluates selected code or the current line and inserts the result in a printed representation",exec:function(Oa,Xa){var Sa,O,G,Ea,N,oa,Ca,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pb){switch(pb.nextAddress){case 1:return Oa.maybeSelectCommentOrLine(),
pb.setCatchFinallyBlocks(2),Xa=Object.assign({},Xa,{asString:!1,logDoit:!0}),pb.yield(Oa.doEval(void 0,Xa),4);case 4:Sa=pb.yieldResult;O=Sa.error?Sa.error:Sa.isError?Sa.value:null;pb.leaveTryBlock(3);break;case 2:O=G=pb.enterCatchBlock();case 3:Oa.selection.collapseToEnd();if(Ea=Sa.value&&Sa.value.isColor)return Oa.selection.text=String(Sa.value),N=new ge.Morph({fill:ge.Color.transparent,extent:ge.pt(Oa.fontSize+2,Oa.fontSize+2),submorphs:[{fill:Sa.value,center:ge.pt(Oa.fontSize+2,Oa.fontSize+2).scaleBy(.5)}]}),
oa=Oa.selection.start,Ca=oa.column,cb=oa.row,Oa.insertText([N,{}],Oa.selection.start),Oa.selection.start={column:Ca,row:cb},Oa.focus(),pb.return(Sa);Oa.insertTextAndSelect(O?String(O)+(O.stack?"\n"+O.stack:""):String(Sa.value));Oa.focus();return pb.return(Sa)}})}},{name:"editit",doc:"Evaluates the expression and opens an object editor on the resulting object.",exec:function(Oa,Xa){var Sa,O,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:Oa.maybeSelectCommentOrLine();
O=Oa.textInRange(Oa.selection);G=Oa.evalEnvironment||{};Ea=Oa.pluginFind(function(oa){return oa.isEditorPlugin&&"function"===typeof oa.runEval});G.systemInterface||(G.systemInterface=Ea.systemInterface(Xa));if("local"!==G.systemInterface.name){N.jumpTo(2);break}N.setCatchFinallyBlocks(3);return N.yield(Oa.doEval(void 0,Xa),5);case 5:Sa=N.yieldResult;O=Sa.value;N.leaveTryBlock(2);break;case 3:N.enterCatchBlock();case 2:return Oa.world().execCommand("open object editor",{target:O,evalEnvironment:G}),
N.return(Sa)}})}},{name:"inspectit",doc:"Evaluates the expression and opens an inspector widget on the resulting object.",exec:function(Oa,Xa){var Sa,O,G,Ea,N,oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){switch(Ca.nextAddress){case 1:Oa.maybeSelectCommentOrLine();G=Oa.textInRange(Oa.selection);Ea=Oa.evalEnvironment||{};N=Oa.pluginFind(function(cb){return cb.isEditorPlugin&&"function"===typeof cb.runEval});Ea.systemInterface||(Ea.systemInterface=N.systemInterface(Xa));if("local"!==
Ea.systemInterface.name){ge.Inspector.openInWindow({remoteTarget:{code:G,evalEnvironment:Ea}});Ca.jumpTo(2);break}Ca.setCatchFinallyBlocks(3);return Ca.yield(Oa.doEval(void 0,Xa),5);case 5:Sa=Ca.yieldResult;O=Sa.error?Sa.error:Sa.isError?Sa.value:null;G=Sa.value;Ca.leaveTryBlock(4);break;case 3:O=oa=Ca.enterCatchBlock();case 4:ge.Inspector.openInWindow({targetObject:O||G});case 2:return Ca.return(Sa)}})}},{name:"print inspectit",doc:"Prints a representation of the object showing it's properties. The count argument defines how deep (recursively) objects will be printed.",
handlesCount:!0,exec:function(Oa,Xa,Sa){Sa=void 0===Sa?1:Sa;var O;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return Oa.maybeSelectCommentOrLine(),G.setCatchFinallyBlocks(2),Xa=Object.assign({},Xa,{inspect:!0,inspectDepth:Sa,logDoit:!0}),G.yield(Oa.doEval(void 0,Xa),4);case 4:O=G.yieldResult;G.leaveTryBlock(3);break;case 2:G.enterCatchBlock();case 3:return Oa.selection.collapseToEnd(),Oa.insertTextAndSelect(O.value),G.return(O)}})}}];ge.codeEvaluationCommands=
Wd;ge.codeEvaluationCommands=Wd;ge.codeEvaluationCommands=Wd;var Ic=lively.FreezerRuntime.recorderFor("lively.ide/text/rich-text-commands.js");Ic.changeAttributeInSelectionOrMorph=function(Oa,Xa,Sa){var O=Oa.selection;Oa.keepPosAtSameScrollOffsetWhile(function(){O.isEmpty()?Oa[Xa]="function"===typeof Sa?Sa(Oa[Xa]):Sa:(Oa.undoManager.group(),Oa.changeStyleProperty(Xa,function(G){return"function"===typeof Sa?Sa(G):Sa}),Oa.undoManager.group())})};De=[{name:"increase font size",scrollCursorIntoView:!1,
exec:function(Oa){var Xa=Oa.fontSize;Ic.changeAttributeInSelectionOrMorph(Oa,"fontSize",function(Sa){Sa=Sa||Xa;return Sa+(18<=Sa?2:1)});return!0}},{name:"decrease font size",scrollCursorIntoView:!1,exec:function(Oa){var Xa=Oa.fontSize;Ic.changeAttributeInSelectionOrMorph(Oa,"fontSize",function(Sa){Sa=Sa||Xa;return Sa-(18>=Sa?1:2)});return!0}},{name:"change font",scrollCursorIntoView:!1,exec:function(Oa){var Xa,Sa,O,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress){Xa=
["serif","sans-serif","monospace"];if(Sa=localStorage["lively.morpic/text-change-font-additional-fonts"])Sa=JSON.parse(Sa),Xa.push.apply(Xa,$jscomp.arrayFromIterable(Sa));Xa.map(function(oa){return oa.toLowerCase()}).includes(Oa.fontFamily.toLowerCase())||(Xa.push(Oa.fontFamily),Sa=[].concat($jscomp.arrayFromIterable(Sa||[]),[Oa.fontFamily]),localStorage["lively.morpic/text-change-font-additional-fonts"]=JSON.stringify(Sa));return N.yield($world.editListPrompt("choose font",Xa,{requester:Oa,preselect:Xa.indexOf(Oa.fontFamily),
historyId:"lively.morpic/text-change-font-hist"}),2)}O=N.yieldResult;G=$jscomp.makeIterator(O.selections);if(Ea=G.next().value)Oa.fontFamily=Ea;return N.return(!0)})}},{name:"set link of selection",scrollCursorIntoView:!1,exec:function(Oa,Xa){Xa=void 0===Xa?{}:Xa;var Sa,O,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress){if(Xa.hasOwnProperty("link"))return N.jumpTo(2);O=Oa.selection;G=Oa.getStyleInRange(O);Ea=G.link;return N.yield(Oa.world().prompt("Set link",
{input:Ea||"https://",historyId:"lively.morphic-rich-text-link-hist"}),3)}if(2!=N.nextAddress&&(Sa=N.yieldResult,!Sa))return N.return();Oa.undoManager.group();Oa.setStyleInRange({link:Sa||void 0},O);Oa.undoManager.group();N.jumpToEnd()})}},{name:"set doit of selection",scrollCursorIntoView:!1,exec:function(Oa,Xa){var Sa,O,G,Ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){if(1==N.nextAddress)return Sa=Oa.selection,O=Oa.getStyleInRange(Sa),G=O.doit,N.yield(Oa.world().editPrompt("Enter doit code (runs on clicking the text)",
{requester:Oa,input:G?G.code:"// empty doit",historyId:"lively.morphic-rich-text-doit-hist",mode:"js",evalEnvironment:Oa.evalEnvForDoit(G||{})}),2);Ea=N.yieldResult;Oa.undoManager.group();Ea?Oa.addTextAttribute({doit:{code:Ea},nativeCursor:"pointer",textDecoration:"underline"},Sa):Oa.removeTextAttribute({doit:null,nativeCursor:"",textDecoration:""},Sa);Oa.undoManager.group();N.jumpToEnd()})}},{name:"reset text style",scrollCursorIntoView:!1,exec:function(Oa,Xa){Xa=void 0===Xa?{}:Xa;Oa.undoManager.group();
Xa=!Xa.onlySelection&&Oa.selection.isEmpty()?Oa.documentRange:Oa.selection.range;Oa.setStyleInRange(null,Xa);Oa.undoManager.group();return!0}},{name:"open text attribute controls",exec:function(Oa){var Xa,Sa,O,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){if(1==Ea.nextAddress)return Ea.yield(System.import("lively.modules"),2);if(3!=Ea.nextAddress)return Xa=Ea.yieldResult,Sa=Xa.module,Ea.yield(Sa("lively.ide/text/ui.js").load(),3);O=Ea.yieldResult;G=O.RichTextControl;return Ea.return(G.openFor(Oa))})}}];
Ic.commands=De;Ic.commands=De;Ic.commands=De;var qe=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js");qe.guessTextModeName=Ta;qe.rangedToken=function(Oa,Xa,Sa,O,G){return{start:{row:Oa,column:Xa},end:{row:Oa,column:Sa},token:O,mode:G}};qe.fun=Qb;qe.arr=Vb;qe.connect=oc;qe.disconnect=xb;qe.DefaultTheme=mc;qe.tokenizeDocument=Oc;qe.modeInfo=Rb;qe.visitDocumentTokens=Hb;qe.getMode=ja;qe.completionCommands=Rc;qe.multiSelectCommands=r;qe.navCommands=ke;qe.codeCommands=ie;qe.codeEvaluationCommands=
Wd;qe.richTextCommands=De;qe.Color=mb;qe.Range=Fd;qe.guessTextModeName=Ta;qe.guessTextModeName=Ta;mc=function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),Sa=Xa.hasOwnProperty("EditorPlugin")&&"function"===typeof Xa.EditorPlugin?Xa.EditorPlugin:Xa.EditorPlugin=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.theme=
qe.DefaultTheme.instance;this._ast=this.checker=null;this._tokens=[];this._tokenizerValidBefore=null;this.__dont_serialize__=["mode","_ast","_tokens","_tokenizerValidBefore"]}},{key:"isEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return null}},{key:"longName",get:function(){return this.shortName}},{key:"attach",value:function(O){var G=this;this.textMorph=O;qe.connect(O,"textChange",this,"onTextChange");qe.connect(O,"viewChange",this,"onViewChange");this.textMorph.whenRendered().then(function(){return G.highlight()})}},
{key:"detach",value:function(O){qe.disconnect(O,"textChange",this,"onTextChange");qe.disconnect(O,"viewChange",this,"onViewChange");this.textMorph=null}},{key:"onViewChange",value:function(){this.requestHighlight()}},{key:"onTextChange",value:function(O){this._ast=null;if(O){var G=this._tokenizerValidBefore;if("replace"===O.selector){var Ea=O.args[0].start;O=Ea.row;Ea=Ea.column}else Ea=O=0;if(!G||O<G.row||O===G.row&&Ea<G.column)O=Math.max(0,O),this._tokenizerValidBefore={row:O,column:Ea}}this.requestHighlight()}},
{key:"requestHighlight",value:function(O){var G=this;(void 0===O?0:O)?this.highlight():qe.fun.debounceNamed(this.id+"-requestHighlight",300,function(){return G.highlight()})()}},{key:"highlight",value:function(){var O=this.textMorph,G=this.theme,Ea=this.mode,N=this._tokenizerValidBefore;if(G&&O&&O.document&&Ea){O.fill=G.background;O.cursorColor=G.cursorColor||qe.Color.black;var oa=O.viewState,Ca={};N=qe.tokenizeDocument(Ea,O.document,oa.firstVisibleRow,oa.lastVisibleRow,N);Ea=N.lines;N=N.tokens;if(Ea.length){oa=
Ea[0].row;for(var cb=[],pb=0;pb<N.length;oa++,pb++)for(var yb=N[pb],Yb=0;Yb<yb.length;Yb+=5){var cc=yb[Yb],Ec=yb[Yb+1],od=G[yb[Yb+2]]||G.default;od&&cb.push({start:{row:oa,column:cc},end:{row:oa,column:Ec}},od)}O.embeddedMorphs.forEach(function(Dd){var ad=O.embeddedMorphMap.get(Dd).anchor;Ca[Dd.id]=O.textAttributeAt(ad.position)});O.setTextAttributesWithSortedRanges(cb);O.embeddedMorphs.forEach(function(Dd){var ad=O.embeddedMorphMap.get(Dd).anchor;ad=qe.Range.at(ad.position);ad.end.column+=1;O.replace(ad,
[Dd,Ca[Dd.id]],!1)});this._tokenizerValidBefore={row:qe.arr.last(Ea).row+1,column:0}}if(this.checker)this.checker.onDocumentChange({},O,this)}}},{key:"visitTokensInRange",value:function(O,G){var Ea=O.start,N=O.end,oa=Ea.row-1;qe.visitDocumentTokens(this.mode,this.textMorph.document,Ea.row,N.row,null,function(Ca){return oa++},function(Ca,cb,pb,yb,Yb,cc,Ec){if(oa===Ea.row&&0<Ea.column){if(Ea.column>=yb)return;pb<Ea.column&&Ea.column<yb&&(pb=Ea.column)}if(oa===N.row){if(N.column<=pb)return;pb<N.column&&
N.column<yb&&(yb=N.column)}G(Ca,cb,oa,pb,yb,Yb,cc,Ec)})}},{key:"tokensInRange",value:function(O){var G=[];this.visitTokensInRange(O,function(Ea,N,oa,Ca,cb,pb,yb,Yb){return G.push(qe.rangedToken(oa,Ca,cb,Ea,Yb))});return G}},{key:"tokensOfRow",value:function(O){var G=this.textMorph.getLine(O).length;return this.tokensInRange({start:{row:O,column:0},end:{row:O,column:G}})}},{key:"tokenAt",value:function(O){for(var G=this.tokensOfRow(O.row),Ea=G.length;Ea--;){var N=G[Ea];if(N.token&&N.start.column<=
O.column&&O.column<=N.end.column)return N}return null}},{key:"getCommands",value:function(O){return[].concat($jscomp.arrayFromIterable(O),$jscomp.arrayFromIterable(qe.completionCommands),$jscomp.arrayFromIterable(qe.multiSelectCommands),$jscomp.arrayFromIterable(qe.navCommands),$jscomp.arrayFromIterable(qe.codeCommands),$jscomp.arrayFromIterable(qe.codeEvaluationCommands),$jscomp.arrayFromIterable(qe.richTextCommands))}},{key:"getComment",value:function(){if(!this.mode)return null;var O=this.mode,
G=O.lineComment,Ea=O.blockCommentStart;O=O.blockCommentEnd;var N={};G&&(N.lineCommentStart=G);Ea&&(N.blockCommentStart=Ea);O&&(N.blockCommentEnd=O);return N}},{key:"toString",value:function(){return this.constructor.name+"("+this.textMorph+")"}},{key:"cmd_newline",value:function(O,G,Ea){var N=this.textMorph,oa=O.row,Ca=O.column;O=G[Ca-1];G=G[Ca];N.selection.text="\n";N.selection.collapseToEnd();"{"===O&&"}"===G&&(N.selection.text="\n"+" ".repeat(Ea),N.selection.collapse());N.execCommand("indent according to mode",
{undo:!1,ignoreFollowingText:!1,firstRow:oa+1,lastRow:oa+1});return!0}},{key:"openPairs",get:function(){return{"{":"}","[":"]","(":")",'"':'"',"'":"'","`":"`"}}},{key:"closePairs",get:function(){return{"}":"{","]":"[",")":"(",'"':'"',"'":"'","`":"`"}}},{key:"cmd_delete_backwards",value:function(){var O=this.textMorph,G=this.openPairs,Ea=O.selection,N=O.getLine(Ea.end.row),oa=N[Ea.end.column-1];N=N[Ea.end.column];O.autoInsertPairs&&Ea.isEmpty()&&oa in G&&N===G[oa]&&(Ea.growRight(1),Ea.growLeft(1));
return!1}},{key:"cmd_insertstring",value:function(O){var G=this.openPairs,Ea=this.closePairs,N=this.textMorph,oa=N.selection,Ca=N.autoInsertPairs&&O in G,cb=N.autoInsertPairs&&O in Ea;if(!Ca&&!cb)return!1;var pb=N.getLine(oa.end.row)[oa.end.column];if(!oa.isEmpty()){if(!Ca)return!1;Ea=N.undoManager.ensureNewGroup(N);N.insertText(G[O],oa.end);N.insertText(O,oa.start);N.undoManager.group(Ea);oa.growRight(-1);return!0}if(pb in Ea&&O===pb)return oa.goRight(1),!0;if(cb&&!Ca)return!1;Ea=N.undoManager.ensureNewGroup(N);
N.insertText(O+G[O]);N.undoManager.group(Ea);oa.goLeft(1);return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditorPlugin"}}],Xa,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3148,end:11979})}(void 0);Rb=mc=qe.EditorPlugin;Rc=Ia("C",function(Oa){var Xa=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),
Sa=Xa.hasOwnProperty("CodeMirrorEnabledEditorPlugin")&&"function"===typeof Xa.CodeMirrorEnabledEditorPlugin?Xa.CodeMirrorEnabledEditorPlugin:Xa.CodeMirrorEnabledEditorPlugin=function(O){O&&O[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return vb(Sa,Oa,[{key:Symbol.for("lively-instance-initialize"),value:function(){vb._get(Object.getPrototypeOf(Sa.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.mode=null}},
{key:"attach",value:function(O){this.mode=this.codeMirrorMode(O);return vb._get(Object.getPrototypeOf(Sa.prototype),"attach",this).call(this,O)}},{key:"__deserialize__",value:function(){this.mode=this.textMorph?this.codeMirrorMode(this.textMorph):null}},{key:"defaultCodeMirrorModeConfig",value:function(O){return{indentWithTabs:!O.useSoftTabs,indentUnit:O.tabWidth,tabSize:4}}},{key:"codeMirrorMode",value:function(O){O=this.defaultCodeMirrorModeConfig(O);return qe.getMode(O,{name:this.longName})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CodeMirrorEnabledEditorPlugin"}}],Xa,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11988,end:12682})}(qe.EditorPlugin));qe.CodeMirrorEnabledEditorPlugin=Rc;qe.CodeMirrorEnabledEditorPlugin=Rc;qe.CodeMirrorEnabledEditorPlugin=
Rc;qe.default=mc;mc=Object.freeze({__proto__:null,guessTextModeName:Ta,"default":Rb,CodeMirrorEnabledEditorPlugin:Rc});Ia("e",mc)}}});