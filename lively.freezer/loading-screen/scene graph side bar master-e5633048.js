System.register("./__root_module__-28353364.js ./index-2245b428.js ./index-4fd2821f.js ./editor-plugin-85896541.js ./editor-plugin-d2926468.js ./index-d97c8020.js ./index-0def8bbc.js ./index-1b8f3abf.js".split(" "),function(){var Ia,mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab,qc,Xc,zc,ed,wd,xb,hc,Cc,ic,Qc,jb,fb,Ob,Cb;return{setters:[function(ob){Ia=ob.i;mb=ob.M;vb=ob.t;Vb=ob.e;Eb=ob.b;Jc=ob.f;Bc=ob.c;Uc=ob.o;tc=ob.C;oc=ob.$;sc=ob.a;Tc=ob.m;Fd=ob.bG;Rd=ob.J;ee=ob.bD;Dc=ob.bB;rd=ob.I;Ab=
ob.af;qc=ob.R;Xc=ob.bH;zc=ob._;ed=ob.ax;wd=ob.ac;xb=ob.a0;hc=ob.p;Cc=ob.Z;ic=ob.d;Qc=ob.bI},function(ob){jb=ob.e;fb=ob.s;Ob=ob.I},function(){},function(ob){Cb=ob.I},function(){},function(){},function(){},function(){}],execute:function(){function ob(X){var ya=X.sourceObj,Ga=X.targetObj;ya.isMorph&&Ga.isMorph?(ya.show(),Ga.show(),za.showConnector&&za.showConnector(ya,Ga)):za.show(String(X))}function bc(X){var ya=X.sourceObj,Ga=X.sourceAttrName,wa=X.targetObj,ja=X.targetMethodName,lb=X.getConverter();
X=X.getUpdater();return za.printConnectionElements(ya,Ga,wa,ja,lb,X)}function Ma(X,ya,Ga,wa,ja,lb){X="/* global connect, source, target */\nconnect(source, '"+ya+"', target, '"+wa+"'";if(ja||lb)X+=", {\n";ja&&(X+="  converter: "+ja);ja&&lb&&(X+=",");ja&&(X+="\n");lb&&(X+="  updater: "+lb+"\n");if(ja||lb)X+="}";return X+");"}function Db(X,ya){var Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){if(1==wa.nextAddress)return wa.yield(za.InteractiveMorphSelector.selectMorph(),2);Ga=wa.yieldResult;
return wa.return(Ga?za.interactiveConnectGivenSourceAndTarget(X,ya,Ga):null)})}function gb(X,ya,Ga,wa){var ja,lb,Ja,Xb,Kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){switch(Hb.nextAddress){case 1:ja=Ga&&Ga.world().targetDataBindings(Ga);lb=X.world();if(!ja||!ja.length)return lb.setStatusMessage("connect canceled"),Hb.return();if(ya){Hb.jumpTo(2);break}Ja=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(za.arr.flatten(X.world().targetDataBindings(X)).map(function(Oc){return{isListItem:!0,
string:Oc.signature||Oc.name,value:Oc}})));return Hb.yield(lb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Ja,{filterable:!0}),3);case 3:ya=Hb.yieldResult;if("canceled"==ya.status)return Hb.return();ya=ya.selected[0];ya=ya.custom?"sourceAttribute":ya.name;case 2:return Xb=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(za.arr.flatten(ja).map(function(Oc){return{isListItem:!0,value:Oc,string:Oc.signature||Oc.name}}))),Hb.yield(lb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Xb,{filterable:!0}),4);case 4:Kc=Hb.yieldResult;if("canceled"==Kc.status)return Hb.return();Kc=Kc.selected[0];return Hb.yield(za.interactivelyEvaluateConnection({sourceObj:X,sourceAttr:ya,targetObj:Ga,targetAttr:Kc.custom?"targetAttribute":Kc.name,onConnect:wa,prompt:"Edit and confirm connection:"}),0)}})}function zb(X,ya,Ga,wa){ya=void 0===ya?"confirm connection":ya;var ja,lb,Ja,Xb,Kc,Hb,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){ja=
X;lb=ja.sourceObj;Ja=ja.sourceAttrName;Xb=ja.targetObj;Kc=ja.targetMethodName;Hb=X.getConverter();Oc=X.getUpdater();return qb.return(za.interactivelyEvaluateConnection({sourceObj:lb,sourceAttr:Ja,targetObj:Xb,targetAttr:Kc,converter:Hb,updater:Oc,prompt:ya,highlight:Ga,onConnect:wa}))})}function ec(X,ya,Ga,wa,ja){wa=void 0===wa?{}:wa;ja=za.rect(0).sides.concat(za.rect(0).corners);Ga=Ga||new za.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:za.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:za.Color.transparent,
nativeCursor:"auto"},end:{fill:za.Color.orange}}},wa,{hasFixedPosition:!0}));Ga.startPoint.attachTo(X,"rightCenter");ya.isMorph?(wa=ya.globalBounds().partNameNearest(ja,X.globalPosition),X.globalPosition.equals(ya.globalBounds().partNamed(wa))&&ya.globalBounds().partNameNearest(za.arr.without(ja,wa),X.globalPosition),Ga.endPoint.attachTo(ya,"leftCenter")):(ja=X.globalBounds().topRight().addPt(za.pt(100,0)),ya=za.morph({type:"label",value:ya.toString(),styleClasses:["Tooltip"],padding:za.rect(8,4)}).openInWorld(ja),
ya.position=X.world().bounds().translateForInclusion(ya.bounds()).topLeft(),za.once(Ga,"remove",ya,"remove"),Ga.endPoint.attachTo(ya,"leftCenter"));return Ga}function rc(X){var ya,Ga,wa,ja,lb,Ja,Xb,Kc,Hb,Oc,qb,xd,he,xc,rb,Ld,sb,hb,Ba,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){switch(ta.nextAddress){case 1:ya=X;Ga=ya.sourceObj;wa=ya.sourceAttr;ja=ya.targetObj;lb=ya.targetAttr;Ja=ya.converter;Xb=ya.updater;Kc=ya.prompt;Hb=void 0===ya.highlight?!0:ya.highlight;Oc=ya.onConnect;
qb="lively://lively.bindings-interactive-connect/x"+Ga.id;xd={context:window,format:"esm",targetModule:qb,classTransform:za.classToFunctionTransform};he=za.printConnectionElements(Ga,wa,ja,lb,Ja,Xb);ja.isMorph&&Ga.isMorph&&(xc=ja.propertiesAndPropertySettings().properties[lb]||{type:typeof ja[lb]},rb=xc.type,Ld=Ga.propertiesAndPropertySettings().properties[wa]||{type:typeof Ga[wa]},sb=Ld.type,sb!==rb&&(Kc=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},Ga.toString(),
{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},ja.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));hb={};Object.assign(lively.modules.module(qb).recorder,(hb.source=Ga,hb.target=ja,hb.connect=za.connect,hb.once=za.once,hb[wa]=Ga[wa],hb));if(!Kc){Ba=he;ta.jumpTo(2);break}return ta.yield($world.editPrompt(Kc,{input:he,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:xd,animated:!1}),
3);case 3:if(Ba=ta.yieldResult,!Ba)return $world.setStatusMessage("connect canceled"),ta.return();case 2:return ta.yield(lively.vm.runEval(Ba,xd),4);case 4:J=ta.yieldResult;if(J.isError)return $world.logError(J.value),ta.return(rc({sourceObj:Ga,sourceAttr:wa,targetObj:ja,targetAttr:lb,converter:Ja,updater:Xb,prompt:"confirm connection",highlight:Hb,onConnect:Oc}));Hb&&($world.setStatusMessage("connected!",za.Color.green),za.interactivelyShowConnection(J.value));"function"===typeof Oc&&Oc(J);ta.jumpToEnd()}})}
var Qb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Qb.Inspector=Cb;var Lb=function(X){var ya=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Ga=ya.hasOwnProperty("ProtoInspector")&&"function"===typeof ya.ProtoInspector?ya.ProtoInspector:ya.ProtoInspector=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},
{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Qb.Inspector);Lb=Qb.ProtoInspector;Qb.default=Lb;var Kb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Kb.Morph=mb;Kb.touchInputDevice=
vb;Kb.easings=Vb;Kb.pt=Eb;Kb.fun=Jc;Kb.connect=Bc;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Ga=ya.hasOwnProperty("MorphicSideBar")&&"function"===typeof ya.MorphicSideBar?ya.MorphicSideBar:ya.MorphicSideBar=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(wa){wa=void 0===
wa?!0:wa;if(this.respondsToVisibleWindow){var ja=$world.visibleBounds(),lb=navigator.standalone&&Kb.touchInputDevice?25:0;this.height=ja.height-lb;this.top=lb+ja.top();lb=this.get("horizontal resizer");lb.height=this.height;lb.top=0;wa&&(this.visible?this.topLeft=ja.topLeft():this.topRight=ja.topLeft())}}},{key:"switchMode",value:function(wa){"inspector"==wa&&this.showInspector();"connections"==wa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=
!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(wa){var ja=this,lb,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){switch(Xb.nextAddress){case 1:lb=$world.visibleBounds();Ja=navigator.standalone&&Kb.touchInputDevice?25:0;ja.height=lb.height-Ja;ja.top=Ja+lb.top();if(wa)return $world.addMorph(ja,$world.get("lively top bar")),ja.topRight=lb.topLeft(),ja.attachToWorld($world),ja.visible=
!0,Xb.yield(ja.whenRendered(),5);ja.detachFromWorld($world);return Xb.yield(ja.animate({opacity:0,topRight:lb.topLeft(),duration:300}),4);case 4:ja.visible=!1;ja.remove();Xb.jumpTo(0);break;case 5:return ja.onWorldResize(!1),ja.get("scene graph").adjustProportions(),Xb.yield(ja.animate({opacity:1,easing:Kb.easings.outCirc,topLeft:lb.topLeft(),duration:300}),6);case 6:ja.get("scene graph").refresh(),Xb.jumpToEnd()}})}},{key:"attachToWorld",value:function(wa){Kb.connect(wa,"onChange",this,"onHierarchyChange",
{garbageCollect:!0});Kb.connect(wa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Kb.connect(wa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(wa){var ja=this;wa.attributeConnections.forEach(function(lb){lb.targetObj===ja&&lb.disconnect()})}},{key:"selectNode",value:function(wa){this.getSubmorphNamed("scene graph").selectMorphInTarget(wa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(wa)}},{key:"onHierarchyChange",value:function(wa){var ja=
this,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if("addMorphAt"===wa.selector||"removeMorph"===wa.selector||"name"===wa.prop){lb=ja._sceneGraph||(ja._sceneGraph=ja.getSubmorphNamed("scene graph"));if(!lb||!lb.owner.visible||wa.target&&wa.target.isHand||wa.target&&lb.ignoreMorph(wa.target)||wa.args&&!wa.args[0].isHalo&&lb.ignoreMorph(wa.args[0])||wa.target.ownerChain().find(function(Xb){return lb.ignoreMorph(Xb)}))return Ja.return();Kb.fun.debounceNamed("scene-graph-update",
50,function(){return lb.refresh()})()}Ja.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Kb.Morph);
Qb=Kb.MorphicSideBar;Kb.default=Qb;var za=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");za.interactivelyShowConnection=ob;za.printConnection=bc;za.printConnectionElements=Ma;za.interactiveConnectGivenSource=Db;za.interactiveConnectGivenSourceAndTarget=gb;za.interactivelyReEvaluateConnection=zb;za.visualizeConnection=ec;za.interactivelyEvaluateConnection=rc;za.connect=Bc;za.once=Uc;za.Color=tc;za.rect=oc;za.pt=Eb;za.arr=sc;za.morph=Tc;za.Leash=Fd;za.showConnector=jb;za.show=fb;za.InteractiveMorphSelector=
Ob;za.classToFunctionTransform=Rd;za.interactivelyShowConnection=ob;za.interactivelyShowConnection=ob;za.printConnection=bc;za.printConnection=bc;za.printConnectionElements=Ma;za.printConnectionElements=Ma;za.interactiveConnectGivenSource=Db;za.interactiveConnectGivenSource=Db;za.interactiveConnectGivenSourceAndTarget=gb;za.interactiveConnectGivenSourceAndTarget=gb;za.interactivelyReEvaluateConnection=zb;za.interactivelyReEvaluateConnection=zb;za.visualizeConnection=ec;za.visualizeConnection=ec;za.interactivelyEvaluateConnection=
rc;za.interactivelyEvaluateConnection=rc;var bb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");bb.Tree=ee;bb.TreeData=Dc;bb.morph=Tc;bb.Icon=rd;bb.HorizontalLayout=Ab;bb.easings=Vb;bb.Morph=mb;bb.Color=tc;bb.Rectangle=qc;bb.rect=oc;bb.pt=Eb;bb.connect=Bc;bb.noUpdate=Xc;bb.disconnect=zc;bb.disconnectAll=ed;bb.once=Uc;bb.arr=sc;bb.num=wd;bb.fun=Jc;bb.tree=xb;bb.promise=hc;bb.ConnectionHalo=_missingExportShim;bb.getClassName=Cc;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),
Ga=ya.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof ya.InteractiveTreeContainer?ya.InteractiveTreeContainer:ya.InteractiveTreeContainer=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"onChildRemoved",value:function(wa){}},{key:"onChildAdded",value:function(wa){}},{key:"toggleSelected",value:function(wa){if(this.tree){var ja=this.tree,lb=ja.selectionFontColor,Ja=ja.nonSelectionFontColor;
this.submorphs.filter(function(Xb){return!Xb._isControlElement&&Xb.styleClasses.includes("Label")}).forEach(function(Xb){Xb.fontColor=wa?lb:Ja})}}},{key:"onGrab",value:function(wa){var ja=this.tree,lb=this.node;this.fill=bb.Color.gray.withA(.5);this.fontColor=ja.selectionFontColor;this.opacity=.8;Ia._get(Object.getPrototypeOf(Ga.prototype),"onGrab",this).call(this,wa);lb&&(this.toggleSelected(!1),ja.collapse(lb),ja.treeData.parentNode(lb).container.onChildRemoved(this),this._data=ja.treeData.remove(lb),
lb.container.target.remove(),ja.update(!0))}},{key:"wantsToBeDroppedOn",value:function(wa){this.showPreviewOn(wa);return!0}},{key:"showPreviewOn",value:function(wa){if(wa.isContainer)var ja=wa.tree;wa.isTree&&(ja=wa);ja&&ja.showDropPreviewFor&&ja.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(wa){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return ja.tree.treeData.add(wa._data,ja.node,ja.node.children[0]),ja.tree.uncollapse(ja.node),
ja.tree.treeData.remove(ja.tree._previewNode),lb.yield(ja.tree.whenRendered(),2);ja.tree.update(!0);ja.onChildAdded(wa);lb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(wa,ja){var lb=this;debugger;this.tree._dropInProgress=!0;Ia._get(Object.getPrototypeOf(Ga.prototype),"onBeingDroppedOn",this).call(this,wa,ja);wa=function(){lb.fill=bb.Color.gray.withA(.5);lb.opacity=1;lb.tree._dropInProgress=!1;lb.tree.refresh()};ja.isTree?ja.insertAtPlaceholder(this).then(wa):ja.isContainer?ja.insertAsChild(this).then(wa):
wa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:bb.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var wa=this,ja=this.tree.treeData;return ja&&ja.asList().find(function(lb){return lb.container===wa})}}}}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:498,end:2975})}(bb.Morph);bb.InteractiveTreeContainer=Qb;bb.InteractiveTreeContainer=Qb;bb.InteractiveTreeContainer=Qb;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ga=ya.hasOwnProperty("InteractiveTreeData")&&"function"===typeof ya.InteractiveTreeData?ya.InteractiveTreeData:ya.InteractiveTreeData=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Ia(Ga,X,[{key:"display",value:function(wa){return[wa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(wa){return wa.isCollapsed}},{key:"collapse",value:function(wa,ja){wa.isCollapsed=ja}},{key:"getChildren",value:function(wa){var ja=this;return wa.isLeaf?null:wa.children.filter(function(lb){return lb&&(ja.filterActive?lb.visible:!0)})}},{key:"isLeaf",value:function(wa){var ja=this;return!wa.children||0==wa.children.filter(function(lb){return lb&&(ja.filterActive?
lb.visible:!0)}).length}},{key:"add",value:function(wa,ja,lb){ja=void 0===ja?this.root:ja;ja.children||(ja.children=[]);lb?bb.arr.pushAt(ja.children,wa,ja.children.indexOf(lb)):ja.children.push(wa);ja.isLeaf=!1}},{key:"replace",value:function(wa,ja){var lb=this.parentNode(wa);wa=lb.children.indexOf(wa);lb.children[wa]=ja}},{key:"next",value:function(wa){var ja=this.parentNode(wa);return ja&&ja.children[ja.children.indexOf(wa)+1]}},{key:"isBefore",value:function(wa,ja){this.next(wa)===ja}},{key:"isAfter",
value:function(wa,ja){this.next(ja)===wa}},{key:"addBefore",value:function(wa,ja){this.add(wa,this.parentNode(ja),ja)}},{key:"addAfter",value:function(wa,ja){var lb=this.parentNode(ja);ja=lb.children.indexOf(ja)+1;this.add(wa,lb,lb.children[ja])}},{key:"remove",value:function(wa){var ja=this.parentNode(wa);if(ja)return bb.arr.remove(ja.children,wa),ja.children==[]&&(ja.children=null),wa}},{key:"filter",value:function(wa,ja){ja=void 0===ja?1:ja;var lb=this,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==
Xb.nextAddress)return Xb.yield(lb.uncollapseAll(function(Kc,Hb){return Hb<ja+1}),2);Ja=lb.filterActive;lb.filterActive=!1;lb.asListWithIndexAndDepth(!1).reverse().forEach(function(Kc){var Hb=Kc.node;if(0==Kc.depth)return Hb.visible=!0;Hb.visible=wa(Hb);Hb.visible||Hb.isCollapsed||!Hb.children.find(function(Oc){return Oc.visible})?Hb.container.opacity=1:(Hb.visible=!0,Hb.container.opacity=.5);return Hb.visible});lb.filterActive=Ja;Xb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:2984,end:5447})}(bb.TreeData);bb.InteractiveTreeData=Qb;bb.InteractiveTreeData=Qb;bb.InteractiveTreeData=Qb;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ga=ya.hasOwnProperty("InteractiveTree")&&
"function"===typeof ya.InteractiveTree?ya.InteractiveTree:ya.InteractiveTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"update",value:function(wa){var ja=this;Ia._get(Object.getPrototypeOf(Ga.prototype),"update",this).call(this,wa);this.treeData&&this.relayoutContainers();wa&&this.embeddedMorphs.forEach(function(lb){lb.isContainer&&(lb.fill=bb.Color.transparent,lb.fontFamily=ja.fontFamily,
lb.fontSize=ja.fontSize)})}},{key:"onDrop",value:function(wa){Ia._get(Object.getPrototypeOf(Ga.prototype),"onDrop",this).call(this,wa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(wa){}},{key:"onDropHoverUpdate",value:function(wa){}},{key:"onDropHoverOut",value:function(wa){}},{key:"onHoverOut",value:function(wa){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){Ia._get(Object.getPrototypeOf(Ga.prototype),"onHoverOut",ja).call(ja,
wa);ja._previewNode&&ja._previewNode.container.world()&&ja.treeData.remove(ja._previewNode);ja.resetContainerSelection();ja.update(!0);lb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(wa){var ja=this,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return lb=ja.treeData.parentNode(ja._previewNode),ja.treeData.replace(ja._previewNode,wa._data),ja.treeData.remove(ja._previewNode),Ja.yield(ja.whenRendered(),2);ja.update(!0);lb.container.onChildAdded(wa);
Ja.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var wa=this;if(!this._scrollingUp){this._scrollingUp=!0;var ja=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return wa._scrollingUp&&0<wa.scroll.y?lb.yield(wa.animate({scroll:wa.scroll.subXY(0,30),duration:300,easing:bb.easings.linear}),3):(wa._scrollingUp=!1,lb.jumpTo(0));ja();lb.jumpToEnd()})};ja()}}},{key:"scrollDownSlowly",value:function(){var wa=this;if(!this._scrollingDown){this._scrollingDown=
!0;var ja=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return wa._scrollingDown&&wa.scroll.y<wa.scrollExtent.y-wa.height?lb.yield(wa.animate({scroll:wa.scroll.addXY(0,30),duration:300,easing:bb.easings.linear}),3):(wa._scrollingDown=!1,lb.jumpTo(0));ja();lb.jumpToEnd()})};ja()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(wa){wa.isContainer&&
(wa.fill=bb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(wa){var ja=this;wa=this.localize(wa.globalBounds().center());var lb=this.textPositionFromPoint(wa),Ja=this.treeData.asListWithIndexAndDepth(function(xd){xd=xd.node;return xd!=ja._previewNode&&xd.container.world()}),Xb=(Ja.find(function(xd){return xd.i-1===lb.row})||{}).node,Kc=Xb&&Xb.container,Hb=this.ensurePlaceholder(),Oc=!!Hb.container.world(),qb=wa.subPt(this.scroll).subPt(this.scrollbarOffset);10>qb.y?this.scrollUpSlowly():
qb.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Kc){if(Ja.length>lb.row||bb.arr.last(this.treeData.root.children)===Hb)return;this.treeData.remove(Hb);this.treeData.add(Hb);this.update(!0)}if(Kc){Ja=this.textLayout.boundsFor(this,lb);if(4>Math.abs(Ja.top()-wa.y)){if(this.treeData.isBefore(Hb,Xb))return;this.treeData.remove(Hb);this.treeData.addBefore(Hb,Xb)}else if(4>Math.abs(Ja.bottom()-wa.y)&&(Xb.isCollapsed||this.treeData.isLeaf(Xb))){if(this.treeData.isAfter(Hb,
Xb))return;this.treeData.remove(Hb);this.treeData.addAfter(Hb,Xb)}else{Kc.fill=bb.Color.gray;if(!Oc)return;this.treeData.remove(Hb)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var wa=bb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:bb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:bb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=wa;return this._previewNode}},{key:"relayoutContainers",
value:function(){var wa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(ja){return ja.height});this.treeData.asListWithIndexAndDepth().forEach(function(ja){var lb=ja.node;ja=ja.i;lb.container.nativeCursor="grab";lb.container.width=wa.width-25-lb.container.left;lb.container.toggleSelected&&lb.container.toggleSelected(ja==wa.selectedIndex)});this.anchors.forEach(function(ja){return ja.position=ja.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:5456,end:10830})}(bb.Tree);bb.InteractiveTree=Qb;bb.InteractiveTree=Qb;bb.InteractiveTree=Qb;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ga=ya.hasOwnProperty("SceneGraphTree")&&
"function"===typeof ya.SceneGraphTree?ya.SceneGraphTree:ya.SceneGraphTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(wa){var ja=this.treeData.asList().find(function(lb){return lb.container.target===wa});ja&&this.selectedNode!=ja&&this.selectPath(this.treeData.pathOf(ja))}},{key:"onLoad",
value:function(){var wa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==ja.nextAddress)return ja.yield(wa.whenRendered(),2);if(3!=ja.nextAddress){if(wa.ownerChain().find(function(lb){return lb.isComponent}))return ja.return();wa.submorphs=[];return ja.yield(wa.whenRendered(),3)}wa.get("inspector").makeEditorVisible(!0);wa.get("inspector").makeEditorVisible(!1);wa.setTarget($world);ja.jumpToEnd()})}},{key:"adjustProportions",value:function(wa){wa=(wa?wa.state.dragDelta:{y:0}).y;
var ja=this.get("inspector"),lb=this.get("scene graph resizer"),Ja=this.get("mode selector"),Xb=this.get("connections tree");this.height+=wa;ja.height-=wa;Xb.height-=wa;lb.top=this.bottom;lb.left=0;Ja.top=lb.bottom;Xb.top=ja.top=Ja.bottom+5}},{key:"reset",value:function(){var wa=this;this.treeData=new bb.InteractiveTreeData({children:[],container:bb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(ja){return null==ja.id}).forEach(function(ja){return wa.removeAnchor(ja)})}},
{key:"setTarget",value:function(wa){this.target=wa;this.treeData=this.getTreeFromSubmorphHierarchy(wa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(wa){var ja=this;if(wa===this._previewNode)return!1;if(wa.container.nameNeedsUpdate)return!0;var lb=wa.container.target.submorphs.filter(function(Ja){return!ja.ignoreMorph(Ja)});return lb.length!=wa.children.length||lb.map(function(Ja){return Ja.name}).join("")!=wa.children.map(function(Ja){return Ja.target?Ja.target.name:
""}).join("")?!0:!1}},{key:"getNewChildren",value:function(wa){var ja=this,lb=wa.container.target.submorphs.map(function(Oc){return Oc.__scene_graph_target__?Oc.__scene_graph_target__():Oc}).filter(function(Oc){return!ja.ignoreMorph(Oc)}),Ja=[],Xb={},Kc;for(Kc in lb){Xb.$jscomp$loop$prop$m$2752=lb[Kc];var Hb=bb.arr.without(wa.children,this._previewNode).find(function(Oc){return function(qb){return qb.container.target.id==Oc.$jscomp$loop$prop$m$2752.id}}(Xb));Ja[Kc]=Hb?Hb:this.readMorphHierarchy(Xb.$jscomp$loop$prop$m$2752);
Xb={$jscomp$loop$prop$m$2752:Xb.$jscomp$loop$prop$m$2752}}return Ja}},{key:"refresh",value:function(){var wa=this;if(!this._updating&&!this._dropInProgress){var ja=!1;bb.tree.prewalk(this.treeData.root,function(lb){wa.isNodeOutOfSync(lb)&&(ja=!0,lb.name=lb.container.target.name,lb.container.refresh(),lb.children=wa.getNewChildren(lb))},function(lb){return lb.children});this.update(ja)}}},{key:"ignoreMorph",value:function(wa){return wa.isMorph?wa.isContainer||wa.isWindow||wa.getWindow()||wa.isEpiMorph||
wa.isHand||["lively.halos"].includes(wa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(wa.constructor.name):!1}},{key:"onDropHoverOut",value:function(wa){var ja=wa.hand.grabbedMorphs[0];wa=wa.hand.findDropTarget();if(!(wa===this||wa&&wa.ownerChain().includes(this))&&ja&&ja.isContainer)ja.onDragOutside()}},{key:"onDropHoverIn",value:function(wa){var ja=wa.hand.grabbedMorphs[0];ja&&!ja.isContainer&&($world.halos().forEach(function(lb){return lb.remove()}),
ja.remove(),Object.assign(ja,wa.hand._grabbedMorphProperties.get(ja).pointerAndShadow),ja=this.renderContainerFor(ja,!1),wa.hand.grab(ja),ja.leftCenter=bb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(wa){return new bb.InteractiveTreeData(this.readMorphHierarchy(wa))}},{key:"readMorphHierarchy",value:function(wa){var ja=this;return bb.tree.mapTree(wa,function(lb,Ja){return{name:lb.name,isCollapsed:!0,container:ja.renderContainerFor(lb),visible:!0,children:Ja}},function(lb){return lb.submorphs.filter(function(Ja){return lb.isWorld?
!ja.ignoreMorph(Ja):!0})})}},{key:"renderContainerFor",value:function(wa,ja){wa=void 0===wa?bb.morph({name:"root"}):wa;ja=void 0===ja?!0:ja;var lb=new bb.MorphContainer({tree:this,fill:ja?bb.Color.transparent:bb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:wa,opacity:wa.visible?1:.5});ja||(lb.layout=new bb.HorizontalLayout({spacing:2,align:"center"}));wa._data?(lb._data=wa._data,wa._data.container=lb):lb._data={name:wa.name,isCollapsed:!0,container:lb,
children:[]};return lb}},{key:"collapseAll",value:function(){var wa=this;this.treeData.asList().forEach(function(ja){return ja!=wa.treeData.root?ja.isCollapsed=!0:ja.isCollapsed=!1})}},{key:"filterMorphs",value:function(wa){var ja=this,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return lb=wa.tokens[0],ja.treeData.filterActive||(ja._collapseState=new WeakMap(ja.treeData.asList().map(function(Xb){return[Xb,Xb.isCollapsed]}))),ja.treeData.filterActive=!!lb,
Ja.yield(ja.treeData.filter(function(Xb){var Kc=!lb||Xb.container.target.name.includes(lb);Xb.container.highlightTerm(lb);return Kc},3),2);ja.treeData.filterActive||ja.treeData.asList().forEach(function(Xb){return Xb.isCollapsed=ja._collapseState.has(Xb)?ja._collapseState.get(Xb):!0});ja.refresh();Ja.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],ya,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:10839,end:17488})}(bb.InteractiveTree);bb.SceneGraphTree=Qb;bb.SceneGraphTree=Qb;bb.SceneGraphTree=Qb;Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Ga=ya.hasOwnProperty("MorphContainer")&&"function"===typeof ya.MorphContainer?ya.MorphContainer:
ya.MorphContainer=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"refresh",value:function(){var wa=this,ja,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){ja=wa.target;if(!ja)return Ja.return();wa.reactsToPointer=!0;wa.dropShadow=!1;wa.submorphs=[wa.getLabel(),0<ja.comments.length&&wa.getCommentControls(),ja.layout&&wa.getLayoutControls(),wa.getConnectionControls()].filter(Boolean).map(function(Xb,
Kc){Xb.fitIfNeeded();Xb.left=lb?lb.right+5:0;Xb.top=2;return lb=Xb});wa.height=20;wa.opacity=ja.visible?1:.5;Ja.jumpToEnd()})}},{key:"getLabel",value:function(){var wa=this.getSubmorphNamed("name label")||bb.morph({type:"label",name:"name label",reactsToPointer:!1,padding:bb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),ja=wa.textString.slice(2,-1);ja&&ja==this.target.name||(wa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return wa}},
{key:"getIcon",value:function(wa){return bb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[bb.getClassName(wa)]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var wa=this.getSubmorphNamed("layout label")||bb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:bb.Rectangle.inset(4,
2,4,2),fill:bb.Color.orange,fontColor:bb.Color.white});wa._isControlElement=!0;wa.textString!=this.target.layout.name()&&(wa.value=this.target.layout.name());return wa}},{key:"getCommentControls",value:function(){var wa=this.getSubmorphNamed("comment label")||bb.morph({type:"label",name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:bb.Rectangle.inset(4,2,4,2),fill:bb.Color.rgb(241,196,15),fontColor:bb.Color.black});wa._isControlElement=
!0;var ja=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");wa.textString!=ja&&(wa.value=ja);return wa}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(lb){return!lb.targetObj.isHalo}).length:0;var wa=this.getSubmorphNamed("connections label")||bb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:bb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",
fill:bb.Color.red,fontColor:bb.Color.white});wa._isControlElement=!0;wa.visible=!this.connectionHalo&&!!this.connectionCount;var ja=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";wa.textString!=ja&&(wa.value=ja);return wa}},{key:"highlightTerm",value:function(wa){var ja=this.submorphs[0],lb=ja.textAndAttributes.slice(0,2),Ja=ja.textString.slice(1).split(wa);ja.textAndAttributes=1===Ja.length?[].concat($jscomp.arrayFromIterable(lb),[Ja[0]]):
[].concat($jscomp.arrayFromIterable(lb),$jscomp.arrayFromIterable(bb.arr.flatten(bb.arr.interpose(Ja.map(function(Xb){return[Xb,{}]}),[wa,{fontWeight:"900"}]))))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(wa){var ja=Ia._get(Object.getPrototypeOf(Ga.prototype),"wantsToBeDroppedOn",this).call(this,wa);if(![wa].concat($jscomp.arrayFromIterable(wa.ownerChain())).includes(this.tree))this.onDragOutside();return ja}},{key:"onGrab",value:function(wa){var ja=this,
lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return ja.tree._dropInProgress=!0,lb=ja.target.globalPosition,Ia._get(Object.getPrototypeOf(Ga.prototype),"onGrab",ja).call(ja,wa),ja._data.globalTargetPosition=lb,Ja.yield(ja.whenRendered(),2);if(ja.tree.fullContainsWorldPoint(ja.globalPosition))ja.leftCenter=bb.pt(-20,0);else ja.onDragOutside();ja.tree._dropInProgress=!1;Ja.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=
!0,this.queue||(this.queue=bb.fun.createQueue("container-hover-queue",function(wa,ja){var lb,Ja,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){if(1==Kc.nextAddress)return lb=wa.target,Ja=lb.opacity,Xb=lb.scale,wa.target.opacity=0,wa.target.scale=.5,$world.halos().forEach(function(Hb){return Hb.remove()}),$world.firstHand.grab(wa.target),wa.target._data=wa._data,wa.remove(),wa.target.position=bb.pt(0,0),Kc.yield(wa.target.animate({opacity:Ja,scale:Xb,duration:200}),2);ja();Kc.jumpToEnd()})})),
this.queue.push(this))}},{key:"onChildAdded",value:function(wa){var ja=this.node.children.indexOf(wa.node||wa._data)+1;ja=this.node.children[ja];wa.target.remove();ja?(ja=this.target.submorphs.indexOf(ja.container.target),this.target.addMorphAt(wa.target,ja)):this.target.addMorph(wa.target);wa._data.globalTargetPosition&&(wa.target.position=this.target.localize(wa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(wa){}},{key:"toggleConnectionControl",value:function(wa){this.getSubmorphNamed("connections label").visible=
wa}},{key:"toggleSelected",value:function(wa){var ja=this,lb,Ja,Xb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){if(1==Kc.nextAddress)return Ia._get(Object.getPrototypeOf(Ga.prototype),"toggleSelected",ja).call(ja,wa),ja._active===wa?Kc.return():(ja._active=wa)&&ja.target&&ja.target.isMorph&&ja.world()?Kc.yield(ja.target.whenRendered(),3):Kc.jumpTo(0);ja.get("inspector").targetObject=ja.target;ja.get("connections tree").inspectConnectionsOf(ja.target);if(ja.connectionHalo)return Kc.return();
lb=$jscomp.makeIterator(ja.world().halos());for(Ja=lb.next();!Ja.done;Ja=lb.next()){Xb=Ja.value;if(Xb.target===ja.target)return Kc.return();Xb.remove()}bb.noUpdate({sourceObj:ja.world(),targetObj:ja.sideBar,sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return ja.world().showHaloFor(ja.target)});Kc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,
set:function(wa){this.submorphs[0].fontFamily=wa}},fontColor:{after:["submorphs"],derived:!0,set:function(wa){this.submorphs[0].fontColor=wa}},fontSize:{derived:!0,set:function(wa){this.submorphs[0].fontSize=wa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},
grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1105"}}},{start:17498,end:25916})}(bb.InteractiveTreeContainer);
bb.MorphContainer=Qb;bb.MorphContainer=Qb;bb.MorphContainer=Qb;var P=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");P.visualizeConnection=function(X,ya,Ga,wa,ja){wa=void 0===wa?{}:wa;ja=P.rect(0).sides.concat(P.rect(0).corners);Ga=Ga||new P.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:P.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:P.Color.transparent,nativeCursor:"auto"},end:{fill:P.Color.orange}}},wa,{hasFixedPosition:!0}));Ga.startPoint.attachTo(X,"rightCenter");
ya.isMorph?(wa=ya.globalBounds().partNameNearest(ja,X.globalPosition),X.globalPosition.equals(ya.globalBounds().partNamed(wa))&&ya.globalBounds().partNameNearest(P.arr.without(ja,wa),X.globalPosition),Ga.endPoint.attachTo(ya,"leftCenter")):(ja=X.globalBounds().topRight().addPt(P.pt(100,0)),ya=P.morph({type:"label",value:ya.toString(),styleClasses:["Tooltip"],padding:P.rect(8,4)}).openInWorld(ja),ya.position=X.world().bounds().translateForInclusion(ya.bounds()).topLeft(),P.once(Ga,"remove",ya,"remove"),
Ga.endPoint.attachTo(ya,"leftCenter"));return Ga};P.startConnecting=function(X,ya){X.animate({opacity:.8,duration:300});X.startPoint.attachTo(ya,"center");X.vertices[0].position=P.pt(2,2)};P.stopConnecting=function(X,ya,Ga,wa){function ja(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){if(1==Kc.nextAddress)return Kc.yield(X.animate({opacity:0,duration:300}),2);X.startPoint.clearConnection();X.endPoint.clearConnection();X.remove();Kc.jumpToEnd()})}wa=void 0===wa?!1:wa;var lb,Ja,Xb;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){return 1==Kc.nextAddress?(lb=X,Ja=lb.endPoint,(Xb=Ja.connectedMorph)&&"MorphContainer"==P.getClassName(Xb)&&(Xb=Xb.target),Xb?Kc.yield(P.interactiveConnectGivenSourceAndTarget(Ga,wa,Xb),2):Kc.jumpTo(2)):Kc.yield(ja(),0)})};P.editConnection=function(X){var ya=X.connection,Ga=X.connectionPoint,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==ja.nextAddress)return wa=P.visualizeConnection(Ga,ya.targetObj,!1,{borderColor:P.Color.gray.darker(),
endpointStyle:{start:{fill:P.Color.transparent,nativeCursor:"auto"},end:{fill:P.Color.gray.darker()}}}),ja.yield(P.interactivelyReEvaluateConnection(ya,"Edit Connection",!1),2);wa.remove();ja.jumpToEnd()})};P.Tree=ee;P.TreeData=Dc;P.Icon=rd;P.morph=Tc;P.pt=Eb;P.Rectangle=qc;P.rect=oc;P.Color=tc;P.arr=sc;P.connect=Bc;P.signal=ic;P.Leash=Fd;P.once=Qc;P.interactivelyReEvaluateConnection=zb;P.interactiveConnectGivenSource=Db;P.interactiveConnectGivenSourceAndTarget=gb;P.getClassName=Cc;(function(X){var ya=
lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Ga=ya.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof ya.ConnectionsTreeData?ya.ConnectionsTreeData:ya.ConnectionsTreeData=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"parseMorphConnections",value:function(wa){for(var ja={},lb=$jscomp.makeIterator(void 0===wa.attributeConnections?[]:wa.attributeConnections),Ja=lb.next();!Ja.done;Ja=
lb.next())Ja=Ja.value,Ja.targetObj.isHalo||(ja[Ja.sourceAttrName]=ja[Ja.sourceAttrName]||[{name:["      New Connection  ",{fontColor:P.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(wa,Ja.sourceAttrName),{}]}],P.arr.pushAt(ja[Ja.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Ja)))},0));return{children:Object.entries(ja).map(function(Xb){var Kc=$jscomp.makeIterator(Xb);Xb=Kc.next().value;Kc=Kc.next().value;return{name:[Xb,{fontWeight:"bold"}," ",{},
P.morph({fill:P.Color.white,opacity:.7,value:""+(Kc.length-1),borderRadius:15,fontWeight:"bold",padding:P.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Kc}}).concat([{name:["New Connection  ",{fontColor:P.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(wa),{}]}])}}},{key:"renderExistingConnection",value:function(wa){var ja=this,lb=P.morph({type:"label",fontColor:P.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(P.Icon.textAttribute("long-arrow-alt-right",
{paddingTop:"4px"})),["  ",{},wa.targetMethodName,{}])}),Ja=this.renderDeadPin(),Xb=Ja.submorphs[0];P.connect(lb,"onHoverIn",function(){lb.fontColor=P.Color.orange;lb._leash=P.visualizeConnection(Xb,wa.targetObj,lb._leash);Xb.fill=P.Color.orange;Xb.border={color:P.Color.orange,width:3}});P.connect(lb,"onMouseDown",function(Kc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){if(1==Hb.nextAddress)return Kc.stop(),Hb.yield(P.interactivelyReEvaluateConnection(wa),2);P.signal(ja,"refresh");
Hb.jumpToEnd()})});P.connect(lb,"onHoverOut",function(){lb.fontColor=P.Color.gray;Xb.fill=P.Color.gray;Xb.border={color:P.Color.white,width:1};lb._leash.remove();lb._leash=void 0});return[lb,{},"  ",{}].concat($jscomp.arrayFromIterable(P.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){wa.disconnect();P.signal(ja,"refresh")}})),["  ",{},Ja,{}])}},{key:"renderDeadPin",value:function(){var wa=P.morph({type:"ellipse",fill:P.Color.gray,extent:P.pt(10,10),center:P.pt(8,12),borderWidth:1});
return P.morph({extent:P.pt(20,20),fill:P.Color.transparent,reactsToPointer:!1,submorphs:[wa]})}},{key:"renderPin",value:function(wa,ja){var lb=this,Ja=P.morph({type:"ellipse",fill:P.Color.gray.withA(.5),extent:P.pt(10,10),center:P.pt(8,12),draggable:!1,borderWidth:1}),Xb=new P.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:P.Color.gray.darker(),endpointStyle:{fill:P.Color.gray.darker()},position:P.pt(1,1),vertices:[P.pt(0,0),P.pt(0,0)],getLabelFor:function(Kc){return"MorphContainer"==
P.getClassName(Kc)?Kc.target.name:Kc.name},canConnectTo:function(Kc){return"MorphContainer"==P.getClassName(Kc)||2>P.arr.intersect([Kc].concat($jscomp.arrayFromIterable(Kc.ownerChain())),[Ja].concat($jscomp.arrayFromIterable(Ja.ownerChain()))).length}});Ja.addMorph(Xb);P.connect(Xb.endPoint,"onDragStart",function(){P.startConnecting(Xb,Ja)});P.connect(Xb.endPoint,"onDragEnd",function(Kc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){if(1==Hb.nextAddress)return Ja.center=P.pt(8,12),
Hb.yield(P.stopConnecting(Xb,Ja,wa,ja),2);P.signal(lb,"refresh");Hb.jumpToEnd()})});return P.morph({extent:P.pt(20,20),fill:P.Color.transparent,reactsToPointer:!1,submorphs:[Ja]})}},{key:"display",value:function(wa){return wa.name}},{key:"collapse",value:function(wa,ja){wa.isCollapsed=ja}},{key:"isCollapsed",value:function(wa){return wa.isCollapsed}},{key:"isLeaf",value:function(wa){return!wa.children}},{key:"getChildren",value:function(wa){return wa.children}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(wa){var ja=new this;ja.root=ja.parseMorphConnections(wa);return ja}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8259})})(P.TreeData);Qb=function(X){var ya=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
Ga=ya.hasOwnProperty("ConnectionsTree")&&"function"===typeof ya.ConnectionsTree?ya.ConnectionsTree:ya.ConnectionsTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Ia(Ga,X,[{key:"inspectConnectionsOf",value:function(wa){if(this.targetMorph=wa)this.treeData=P.ConnectionsTreeData.for(wa),P.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=P.ConnectionsTreeData.for(this.targetMorph),
P.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],ya,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8276,end:8829})}(P.Tree);Qb=P.ConnectionsTree;P.default=
Qb}}});