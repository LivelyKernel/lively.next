System.register(["./__rootModule___commonjs-entry-71573ff5.js","./interface-dc23a2c8.js","./index-ca98f65e.js","@babel/plugin-syntax-import-meta"],function(Lc,pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb;return{setters:[function(cb){Nd=cb.j;Tc=cb.g;Jc=cb._;$d=cb.x;Bb=cb.y;rd=cb.G;Id=cb.B;Ac=cb.d;Pc=cb.k;gd=cb.aU;nd=cb.aV;Fd=cb.aW;ic=cb.i;vd=cb.aX},function(cb){sb=cb.p;Xb=cb.A;Nb=cb.R},function(cb){bc=cb.m;hb=cb.c},function(){}],execute:function(){function cb(){cb=Jc(regeneratorRuntime.mark(function pa(va,
Wa){var tb;return regeneratorRuntime.wrap(function(ab){for(;;)switch(ab.prev=ab.next){case 0:return ab.next=2,va.importPackage(Wa.address+"/");case 2:if(!Wa.main){ab.next=5;break}ab.next=5;return va.importModule(Wa.main.toString());case 5:if(!Wa.test){ab.next=19;break}ab.prev=6;ab.next=9;return va.importPackage("mocha-es6");case 9:return tb=ab.sent,ab.next=12,tb.installSystemInstantiateHook();case 12:return ab.next=14,va.importModule(Wa.test.toString());case 14:ab.next=19;break;case 16:ab.prev=16,
ab.t0=ab["catch"](6),console.warn("Cannot load test of new package: ".concat(ab.t0));case 19:return ab.abrupt("return",va.getPackage(Wa.address));case 20:case "end":return ab.stop()}},pa,null,[[6,16]])}));return cb.apply(this,arguments)}function Hb(N,va){return ec.apply(this,arguments)}function ec(){ec=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob,yc,Ta,Bd,Eb,fe,Od;return regeneratorRuntime.wrap(function(Hd){for(;;)switch(Hd.prev=Hd.next){case 0:return tb=Wa.world(),Hd.next=3,tb.prompt("Enter package name",
{requester:Wa,input:"",historyId:"lively.vm-editor-add-package-name",useLastInput:!0});case 3:if(ab=Hd.sent){Hd.next=6;break}throw"Canceled";case 6:Hd.prev=6;yc=Oc.resource(ab);ab=yc.name();Ob=yc.url;Hd.next=21;break;case 12:return Hd.prev=12,Hd.t0=Hd["catch"](6),Hd.next=16,va.getConfig();case 16:return Ta=Hd.sent.baseURL,Bd=Oc.resource(Ta).join(ab).asDirectory().url,Hd.next=20,va.normalize(Bd);case 20:Ob=Hd.sent.replace(/\/\.js$/,"/");case 21:return Hd.next=23,tb.prompt("Confirm or change package location",
{requester:Wa,input:Ob,historyId:"lively.vm-editor-add-package-address"});case 23:if(Eb=Hd.sent){Hd.next=26;break}throw"Canceled";case 26:return fe=Oc.resource(Eb).asDirectory(),Od=fe.asFile().url,Hd.next=30,va.removePackage(Od);case 30:return Hd.next=32,va.resourceCreateFiles(Od,{"index.js":"'format esm';\n","package.json":'{\n  "name": "'.concat(ab,'",\n  "version": "0.1.0"\n}'),".gitignore":"node_modules/","README.md":"# ".concat(ab,"\n\nNo description for package ").concat(ab," yet.\n"),tests:{"test.js":'import { expect } from "mocha-es6";\ndescribe("'.concat(ab,
'", () => {\n  it("works", () => {\n    expect(1 + 2).equals(3);\n  });\n});')}});case 32:return Hd.abrupt("return",Oc.loadPackage(va,{name:ab,address:Od,configFile:fe.join("package.json").url,main:fe.join("index.js").url,test:fe.join("tests/test.js").url,type:"package"}));case 33:case "end":return Hd.stop()}},pa,null,[[6,12]])}));return ec.apply(this,arguments)}function ub(N,va){return yb.apply(this,arguments)}function yb(){yb=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob,yc,Ta,Bd,Eb,
fe=arguments;return regeneratorRuntime.wrap(function(Od){for(;;)switch(Od.prev=Od.next){case 0:return tb=2<fe.length&&void 0!==fe[2]?fe[2]:null,ab={name:"",address:"",type:"package"},Od.next=4,va.getConfig();case 4:Ob=Od.sent;if(!tb){Od.next=14;break}Od.next=8;return va.getPackage(tb);case 8:Od.t0=Od.sent;if(Od.t0){Od.next=13;break}Od.next=12;return va.getPackageForModule(tb);case 12:Od.t0=Od.sent;case 13:yc=Od.t0;case 14:return Od.next=16,Oc.resource(Ob.baseURL).dirList(2,{exclude:function(Hd){return Hd.isFile()&&
!Hd.name().endsWith("package.json")}});case 16:return Ta=Od.sent,Ta=Ta.filter(function(Hd){return Hd.name().endsWith("package.json")}).map(function(Hd){return Hd.parent()}),Od.t1=$d,Od.next=21,Wa.world().filterableListPrompt("Select package directory",[{isListItem:!0,label:"Enter custom package...",value:"custom"}].concat(Bb(Ta.map(function(Hd){return Hd.url}))),{multiSelect:!1});case 21:Od.t2=Od.sent.selected;Bd=(0,Od.t1)(Od.t2,1);Eb=Bd[0];if("custom"!=Eb){Od.next=28;break}Od.next=27;return Wa.world().prompt("What is the package directory?",
{requester:Wa,input:yc?yc.address:Ob.baseURL,historyId:"lively.vm-editor-package-load-history",useLastInput:!1});case 27:Eb=Od.sent;case 28:if(Eb){Od.next=30;break}throw"Canceled";case 30:return ab.address=Eb.replace(/\/$/,""),ab.url=new URL(ab.address+"/"),ab.configFile=Oc.resource(ab.url).join("package.json").url,Od.prev=33,Od.t3=JSON,Od.next=37,va.moduleRead(ab.configFile);case 37:Od.t4=Od.sent;Od.t3.parse.call(Od.t3,Od.t4).name;Od.next=45;break;case 41:Od.prev=41,Od.t5=Od["catch"](33),ab.name=
String(ab.url).replace(/\/$/,""),va.resourceEnsureExistance(ab.configFile,'{\n  "name": "'.concat(ab.name,'",\n  "version": "0.1.0"\n}'));case 45:return Od.abrupt("return",Oc.loadPackage(va,ab));case 46:case "end":return Od.stop()}},pa,null,[[33,41]])}));return yb.apply(this,arguments)}function ba(N,va,Wa){return wb.apply(this,arguments)}function wb(){wb=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return ab=
Oc.resource(pa).asFile().url,yc.next=3,va.getPackage(ab);case 3:yc.t0=yc.sent;if(yc.t0){yc.next=8;break}yc.next=7;return va.getPackageForModule(ab);case 7:yc.t0=yc.sent;case 8:if(Ob=yc.t0){yc.next=11;break}throw Error("Cannot find package for "+ab);case 11:return yc.next=13,va.reloadPackage(ab);case 13:if(!Wa){yc.next=19;break}yc.next=16;return Wa.updateModuleList();case 16:return yc.next=18,Wa.uiSelect(ab,!1);case 18:return yc.abrupt("return",yc.sent);case 19:case "end":return yc.stop()}},tb)}));
return wb.apply(this,arguments)}function Xa(N,va,Wa,pa){return Za.apply(this,arguments)}function Za(){Za=Jc(regeneratorRuntime.mark(function ab(va,Wa,pa,tb){var Ob,yc;return regeneratorRuntime.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return Ta.next=2,va.getPackage(pa);case 2:return Ob=Ta.sent,Ta.next=5,(tb||$world).confirm("Unload package ".concat(Ob.name,"?"),{requester:Wa});case 5:if(yc=Ta.sent){Ta.next=8;break}throw"Canceled";case 8:return Ta.next=10,va.removePackage(pa);case 10:if(!Wa){Ta.next=
15;break}Ta.next=13;return Wa.updateModuleList();case 13:return Ta.next=15,Wa.uiSelect(null);case 15:case "end":return Ta.stop()}},ab)}));return Za.apply(this,arguments)}function Sb(N,va,Wa){return Cb.apply(this,arguments)}function Cb(){Cb=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob,yc,Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=Eb.next){case 0:return ab=Wa.world(),Eb.next=3,va.getPackage(pa);case 3:if(Ob=Eb.sent){Eb.next=7;break}$world.inform('No package "'.concat(pa,
'" found!'),{requester:Wa});return Eb.abrupt("return");case 7:return Eb.next=9,ab.confirm("Really remove package ".concat(Ob.name,"?"),{requester:Wa});case 9:if(yc=Eb.sent){Eb.next=12;break}throw"Canceled";case 12:return va.removePackage(pa),Eb.next=15,ab.confirm("Also remove directory ".concat(Ob.name," including ").concat(Ob.modules.length," modules?"));case 15:Ta=Eb.sent;if(!Ta){Eb.next=23;break}Eb.next=19;return ab.confirm("REALLY *remove* directory ".concat(Ob.name,"? No undo possible..."));
case 19:Bd=Eb.sent;if(!Bd){Eb.next=23;break}Eb.next=23;return va.resourceRemove(Ob.address);case 23:case "end":return Eb.stop()}},tb)}));return Cb.apply(this,arguments)}function Da(N,va){return zb.apply(this,arguments)}function zb(){zb=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob,yc,Ta,Bd,Eb,fe,Od=arguments;return regeneratorRuntime.wrap(function(Hd){for(;;)switch(Hd.prev=Hd.next){case 0:return tb=2<Od.length&&void 0!==Od[2]?Od[2]:$world,Hd.next=3,va.getPackage(Wa);case 3:if(ab=Hd.sent){Hd.next=
6;break}throw Error("Cannot find package "+Wa);case 6:Ob=[],yc=rd(ab.modules),Hd.prev=8,yc.s();case 10:if((Ta=yc.n()).done){Hd.next=38;break}Bd=Ta.value;if(Bd.name.match(/\.js$/)){Hd.next=14;break}return Hd.abrupt("continue",36);case 14:return Hd.prev=14,Hd.t0=va,Hd.t1=Bd.name,Hd.next=19,va.moduleRead(Bd.name);case 19:return Hd.t2=Hd.sent,Hd.next=22,Hd.t0.importsAndExportsOf.call(Hd.t0,Hd.t1,Hd.t2);case 22:Eb=Hd.sent;Hd.next=29;break;case 25:return Hd.prev=25,Hd.t3=Hd["catch"](14),tb.logError(Error("Error when getting imports/exports from module ".concat(Bd.name,
":\n").concat(Hd.t3.stack))),Hd.abrupt("continue",36);case 29:fe="".concat(Bd.name);if(Eb.imports.length||Eb.exports.length){Hd.next=33;break}fe+="\n  does not import / export anything";return Hd.abrupt("continue",36);case 33:Eb.imports.length&&(fe+="\n  imports:\n",fe+=Oc.arr.groupByKey(Eb.imports,"fromModule").mapGroups(function(Qc,Xd){return"from ".concat(Qc,": ")+Xd.map(function(oc){return oc.local||oc.imported?oc.imported&&oc.imported!==oc.local?"".concat(oc.imported," as ").concat(oc.local):
oc.local:"nothing imported"}).join(", ")}).toArray().join("\n").split("\n").map(function(Qc){return"    "+Qc}).join("\n")),Eb.exports.length&&(fe+="\n  exports:\n",fe+=Eb.exports.map(function(Qc){return Qc.local?Qc.local&&Qc.local!==Qc.exported?"".concat(Qc.local," as ").concat(Qc.exported):Qc.exported:"".concat(Qc.exported," from ").concat(Qc.fromModule)}).join(", ").split("\n").map(function(Qc){return"    "+Qc}).join("\n")),Ob.push(fe);case 36:Hd.next=10;break;case 38:Hd.next=43;break;case 40:Hd.prev=
40,Hd.t4=Hd["catch"](8),yc.e(Hd.t4);case 43:return Hd.prev=43,yc.f(),Hd.finish(43);case 46:return Hd.next=48,tb.execCommand("open text window",{title:"imports and exports of "+Wa,content:Ob.join("\n\n")});case 48:case "end":return Hd.stop()}},pa,null,[[8,40,43,46],[14,25]])}));return zb.apply(this,arguments)}function db(N){return N.match(/import.*['"]mocha(-es6)?['"]/)&&N.match(/it\(['"]/)}function ib(N,va,Wa){Wa=Wa&&Wa.address;if(Wa&&0===va.indexOf(Wa))var pa=va.slice(Wa.length).replace(/^\//,"");
else a:{Wa=N.getConfig();if(!Wa||Wa.constructor!==Promise)try{pa=String((new URL(va)).relativePathFrom(new URL(N.getConfig().baseURL)));break a}catch(tb){}pa=va}return pa}function Ea(N,va,Wa,pa){return W.apply(this,arguments)}function W(){W=Jc(regeneratorRuntime.mark(function ab(va,Wa,pa,tb){return regeneratorRuntime.wrap(function(Ob){for(;;)switch(Ob.prev=Ob.next){case 0:return tb=Object.assign({targetModule:Wa},tb),Ob.next=3,va.normalize(Wa);case 3:return Wa=Ob.sent,Ob.next=6,va.moduleSourceChange(Wa,
pa,tb);case 6:return Ob.abrupt("return",Wa);case 7:case "end":return Ob.stop()}},ab)}));return W.apply(this,arguments)}function T(N,va,Wa){return ia.apply(this,arguments)}function ia(){ia=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob,yc=arguments;return regeneratorRuntime.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return ab=3<yc.length&&void 0!==yc[3]?yc[3]:!1,Ob=4<yc.length&&void 0!==yc[4]?yc[4]:!1,Wa&&Wa.setStatusMessage("Reloading "+pa),Ta.prev=3,Ta.next=6,va.reloadModule(pa,
{reloadDeps:ab,resetEnv:Ob});case 6:Ta.t0=Wa;if(!Ta.t0){Ta.next=10;break}Ta.next=10;return Wa.updateModuleList();case 10:Wa&&Wa.setStatusMessage("Reloded "+pa);Ta.next=26;break;case 13:Ta.prev=13;Ta.t1=Ta["catch"](3);Ta.prev=15;Ta.t2=Wa;if(!Ta.t2){Ta.next=20;break}Ta.next=20;return Wa.updateEditorWithSourceOf(pa);case 20:Ta.next=24;break;case 22:Ta.prev=22,Ta.t3=Ta["catch"](15);case 24:throw Wa&&Wa.showError(Ta.t1),Ta.t1;case 26:case "end":return Ta.stop()}},tb,null,[[3,13],[15,22]])}));return ia.apply(this,
arguments)}function ka(N,va,Wa){return K.apply(this,arguments)}function K(){K=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){return regeneratorRuntime.wrap(function(ab){for(;;)switch(ab.prev=ab.next){case 0:return ab.next=2,va.forgetModule(pa,{forgetEnv:!0,forgetDeps:!0});case 2:ab.t0=Wa;if(!ab.t0){ab.next=6;break}ab.next=6;return Wa.updateModuleList();case 6:case "end":return ab.stop()}},tb)}));return K.apply(this,arguments)}function ya(N,va,Wa){return pb.apply(this,arguments)}function pb(){pb=
Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob,yc;return regeneratorRuntime.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return Ta.next=2,va.normalize(pa);case 2:return ab=Ta.sent,Ta.next=5,Wa.world().confirm(["Really remove file:\n",{},ab,{fontStyle:"italic",fontWeight:"bold"}," ?",{}],{requester:Wa,lineWrapping:!1});case 5:if(Ob=Ta.sent){Ta.next=8;break}throw"Canceled";case 8:return Ta.next=10,va.forgetModule(ab);case 10:return Ta.next=12,va.resourceRemove(ab);case 12:return Ta.next=
14,va.getPackageForModule(ab);case 14:return yc=Ta.sent,Ta.abrupt("return",yc);case 16:case "end":return Ta.stop()}},tb)}));return pb.apply(this,arguments)}function La(N,va){return eb.apply(this,arguments)}function eb(){eb=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return yc.next=2,aa._createAndLoadModules(va,[Wa]);case 2:return tb=yc.sent,ab=aa.arr.compact(tb.map(function(Ta){return Ta.error})),Ob=!!ab.length,
yc.abrupt("return",Ob);case 6:case "end":return yc.stop()}},pa)}));return eb.apply(this,arguments)}function jb(N,va,Wa){return E.apply(this,arguments)}function E(){E=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob,yc,Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=Eb.next){case 0:return Eb.t0=URL,Eb.next=3,va.getConfig();case 3:Eb.t1=Eb.sent.baseURL;ab=new Eb.t0(Eb.t1);Ob=Wa.world();if(!pa){Eb.next=16;break}Eb.next=9;return va.getPackage(pa);case 9:Eb.t2=Eb.sent;
if(Eb.t2){Eb.next=14;break}Eb.next=13;return va.getPackageForModule(pa);case 13:Eb.t2=Eb.sent;case 14:(yc=Eb.t2)&&(ab=new URL(yc.address));case 16:return Eb.next=18,aa._searchForExistingFiles(Wa,String(ab),yc);case 18:Ta=Eb.sent;if(!Ta.includes("[create new module]")){Eb.next=24;break}Eb.next=22;return aa._askForModuleName(va,pa||String(ab),Ob);case 22:Bd=Eb.sent,Ta=[Bd];case 24:return Eb.next=26,aa._createAndLoadModules(va,Ta);case 26:return Eb.abrupt("return",Eb.sent);case 27:case "end":return Eb.stop()}},
tb)}));return E.apply(this,arguments)}function Wb(){Wb=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return yc.next=2,pa.prompt("Enter module name",{input:Wa,historyId:"lively.vm-editor-add-module-name"});case 2:if(Wa=yc.sent){yc.next=5;break}throw"Canceled";case 5:return yc.next=7,va.normalize(Wa);case 7:return ab=yc.sent,yc.next=10,pa.confirm(["Create module \n",{},ab,{fontStyle:"italic"}," ?",{}],{lineWrapping:!1});
case 10:if(Ob=yc.sent){yc.next=13;break}throw"Canceled";case 13:return yc.abrupt("return",ab);case 14:case "end":return yc.stop()}},tb)}));return Wb.apply(this,arguments)}function R(){R=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){return regeneratorRuntime.wrap(function(ab){for(;;)switch(ab.prev=ab.next){case 0:if(!String(Wa).match(/^http/)){ab.next=4;break}return ab.abrupt("return",aa._searchForExistingFilesWeb(va,Wa,pa));case 4:return ab.abrupt("return",aa._searchForExistingFilesManually(va,
Wa,pa));case 5:case "end":return ab.stop()}},tb)}));return R.apply(this,arguments)}function xb(){xb=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return yc.next=2,va.world().multipleChoicePrompt("Add Module",{requester:va,choices:["Create New Module","Load Existing Module"]});case 2:ab=yc.sent;if("Create New Module"!==ab){yc.next=5;break}return yc.abrupt("return","[create new module]");case 5:if("Load Existing Module"!==
ab){yc.next=11;break}yc.next=8;return va.world().prompt("URL of module?",{input:Wa,requester:va,historyId:"lively.vm._searchForExistingFilesManually.url-of-module"});case 8:Ob=yc.sent;if(!Ob){yc.next=11;break}return yc.abrupt("return",[Ob]);case 11:throw"Canceled";case 12:case "end":return yc.stop()}},tb)}));return xb.apply(this,arguments)}function Ja(){Ja=Jc(regeneratorRuntime.mark(function tb(va,Wa,pa){var ab,Ob,yc,Ta,Bd,Eb,fe;return regeneratorRuntime.wrap(function(Od){for(;;)switch(Od.prev=Od.next){case 0:return yc=
function(Hd){Hd.name();return[".git","node_modules",".optimized-loading-cache",".module_cache"].includes(Hd.name())||pa&&aa.arr.pluck(pa.modules,"name").includes(Hd.url)?!0:!1},(ab=va.world())&&(Ob=ab.showLoadingIndicatorFor(va,"Loading existing modules...")),Od.next=5,aa.resource(Wa).dirList(5,{exclude:yc});case 5:return Od.t0=function(Hd){return Hd.url},Od.next=8,Od.sent.map(Od.t0);case 8:return Ta=Od.sent,Bd=[{isListItem:!0,string:"[create new module]",value:"[create new module]"}].concat(Ta.filter(function(Hd){return Hd.endsWith(".js")}).map(function(Hd){return{isListItem:!0,
string:pa&&0==Hd.indexOf(pa.address)?pa.name+Hd.slice(pa.address.length):Hd,value:Hd}})),Od.next=12,Promise.resolve(Ob&&Ob.remove()).then(function(){return va.world().filterableListPrompt("What module to load?",Bd,Object.assign({filterLabel:"filter: ",multiselect:!0,requester:va},va?{extent:va.bounds().extent().withY(400).subXY(50,0)}:{}))});case 12:if((Eb=Od.sent)&&"canceled"!==Eb.status&&Eb.selected.length){Od.next=15;break}throw"Canceled";case 15:return fe=Eb.selected||Eb,Array.isArray(fe)||(fe=
[fe]),Od.abrupt("return",fe);case 18:case "end":return Od.stop()}},tb)}));return Ja.apply(this,arguments)}function Ga(){Ga=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob,yc,Ta;return regeneratorRuntime.wrap(function(Bd){for(;;)switch(Bd.prev=Bd.next){case 0:Array.isArray(Wa)||(Wa=[Wa]),tb=[],ab=rd(Wa),Bd.prev=3,ab.s();case 5:if((Ob=ab.n()).done){Bd.next=34;break}yc=Ob.value;Bd.next=9;return va.forgetModule(yc,{forgetDeps:!1,forgetEnv:!1});case 9:return Bd.next=11,va.resourceEnsureExistance(yc,
'"format esm";\n');case 11:return Ta=Bd.sent,Bd.t0=aa,Bd.next=16,Ta.read();case 16:Bd.t1=Bd.sent;if(!Bd.t0.isTestModule.call(Bd.t0,Bd.t1)){Bd.next=23;break}if(System.global.Mocha&&System.global.chai){Bd.next=23;break}Bd.next=21;return pd.import("mocha-es6");case 21:return Bd.next=23,aa.promise.waitFor(function(){return!!System.global.Mocha&&!!System.global.chai});case 23:return Bd.prev=23,Bd.next=26,va.importModule(yc);case 26:tb.push({name:yc});Bd.next=32;break;case 29:Bd.prev=29,Bd.t2=Bd["catch"](23),
tb.push({name:yc,error:Bd.t2});case 32:Bd.next=5;break;case 34:Bd.next=39;break;case 36:Bd.prev=36,Bd.t3=Bd["catch"](3),ab.e(Bd.t3);case 39:return Bd.prev=39,ab.f(),Bd.finish(39);case 42:return Bd.abrupt("return",tb);case 43:case "end":return Bd.stop()}},pa,null,[[3,36,39,42],[23,29]])}));return Ga.apply(this,arguments)}function sa(N,va){return Ub.apply(this,arguments)}function Ub(){Ub=Jc(regeneratorRuntime.mark(function pa(va,Wa){var tb,ab,Ob,yc,Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=
Eb.next){case 0:return Eb.next=2,va.getPackage(Wa);case 2:if((tb=Eb.sent)&&tb.address.match(/^http/)){Eb.next=5;break}throw Error("Cannot load package ".concat(Wa));case 5:return ab=aa.resource(tb.address),Ob=[],Eb.t0=rd,Eb.next=10,ab.dirList(5,{exclude:aa.modulesInPackage_defaultExclude});case 10:Eb.t1=Eb.sent;yc=(0,Eb.t0)(Eb.t1);try{for(yc.s();!(Ta=yc.n()).done;)Bd=Ta.value.url,Bd.match(/\.js$/)&&va.isModuleLoaded(Bd,!0)&&Ob.push(va.getModule(Bd))}catch(fe){yc.e(fe)}finally{yc.f()}return Eb.abrupt("return",
Ob);case 14:case "end":return Eb.stop()}},pa)}));return Ub.apply(this,arguments)}function vc(N){N||(N="local");if(N.isSystemInterface)var va=N;else"string"===typeof N&&N.startsWith("l2l ")&&(N={type:"l2l",id:N.split(" ")[1]}),"string"!==typeof N&&"l2l"===N.type&&(va=Ra.l2lInterfaceFor(N.id,N.info)),"string"!==typeof N&&($world.setStatusMessage("Unknown system interface ".concat(N)),N="local"),va||(va=N&&"local"!==N?Ra.serverInterfaceFor(N):Ra.localInterface);return va}Lc("systemInterfaceNamed",vc);
var Oc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/packages.js");Oc.loadPackage=function(N,va){return cb.apply(this,arguments)};Oc.interactivelyCreatePackage=Hb;Oc.interactivelyLoadPackage=ub;Oc.interactivelyReloadPackage=ba;Oc.interactivelyUnloadPackage=Xa;Oc.interactivelyRemovePackage=Sb;Oc.showExportsAndImportsOf=Da;Oc.parseJsonLikeObj=sb;Oc.arr=Nd;Oc.resource=Tc;Oc.interactivelyCreatePackage=Hb;Oc.interactivelyLoadPackage=ub;Oc.interactivelyReloadPackage=ba;Oc.interactivelyUnloadPackage=
Xa;Oc.interactivelyRemovePackage=Sb;Oc.showExportsAndImportsOf=Da;var aa=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/modules.js");aa.isTestModule=db;aa.shortModuleName=ib;aa.interactivelyChangeModule=Ea;aa.interactivelyReloadModule=T;aa.interactivelyUnloadModule=ka;aa.interactivelyRemoveModule=ya;aa.addModule=La;aa.interactivelyAddModule=jb;aa._askForModuleName=function(N,va,Wa){return Wb.apply(this,arguments)};aa._searchForExistingFiles=function(N,va,Wa){return R.apply(this,
arguments)};aa._searchForExistingFilesManually=function(N,va,Wa){return xb.apply(this,arguments)};aa._searchForExistingFilesWeb=function(N,va,Wa){return Ja.apply(this,arguments)};aa._createAndLoadModules=function(N,va){return Ga.apply(this,arguments)};aa.modulesInPackage_defaultExclude=function(N){return[".git","node_modules",".optimized-loading-cache",".module_cache"].includes(N.name())?!0:!1};aa.modulesInPackage=sa;aa.obj=Id;aa.promise=Ac;aa.arr=Nd;aa.resource=Tc;aa.isTestModule=db;aa.shortModuleName=
ib;aa.interactivelyChangeModule=Ea;aa.interactivelyReloadModule=T;aa.interactivelyUnloadModule=ka;aa.interactivelyRemoveModule=ya;aa.addModule=La;aa.interactivelyAddModule=jb;aa.modulesInPackage=sa;var Ma=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/local-system.js");Ma.obj=Id;Ma.string=Pc;Ma.arr=Nd;Ma.resource=Tc;Ma.createFiles=gd;Ma.ast=nd;Ma.modules=bc;Ma.vm=Fd;Ma.parseJsonLikeObj=sb;Ma.AbstractCoreInterface=Xb;Ma.classToFunctionTransform=hb;var qb=function(N){var va=
window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/local-system.js"),Wa=va.hasOwnProperty("LocalCoreInterface")&&"function"===typeof va.LocalCoreInterface?va.LocalCoreInterface:va.LocalCoreInterface=function(pa){if(!pa||!pa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(Wa,N,[{key:"name",get:function(){return"local"}},{key:"dynamicCompletionsForPrefix",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ta(ab,
Ob,yc){var Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=Eb.next){case 0:return Eb.next=2,Ma.vm.completions.getCompletions(function(fe){return Ma.vm.runEval(fe.replace("return ",""),Object.assign({targetModule:ab,classTransform:Ma.classToFunctionTransform},yc))},Ob);case 2:Bd=Eb.sent;if(!Bd.isError){Eb.next=5;break}throw Bd.value;case 5:return Eb.abrupt("return",{completions:Bd.completions,prefix:Bd.startLetters});case 6:case "end":return Eb.stop()}},Ta)}));return function(ab,
Ob,yc){return pa.apply(this,arguments)}}()},{key:"runEval",value:function(pa,tb){return Ma.vm.runEval(pa,Object.assign({classTransform:Ma.classToFunctionTransform},tb))}},{key:"resourceExists",value:function(pa){return Ma.resource(pa).exists()}},{key:"resourceEnsureExistance",value:function(pa,tb){return Ma.resource(pa).ensureExistance(tb)}},{key:"resourceMkdir",value:function(pa){return Ma.resource(pa).mkdir()}},{key:"resourceRead",value:function(pa){return Ma.resource(pa).read()}},{key:"resourceRemove",
value:function(pa){return Ma.resource(pa).remove()}},{key:"resourceWrite",value:function(pa,tb){return Ma.resource(pa).write(tb)}},{key:"resourceCreateFiles",value:function(pa,tb){return Ma.createFiles(pa,tb)}},{key:"resourceDirList",value:function(pa,tb,ab){return Ma.resource(pa).dirList(tb,ab)}},{key:"normalizeSync",value:function(pa,tb,ab){return System.decanonicalize(pa,tb,ab)}},{key:"normalize",value:function(pa,tb,ab){return System.normalize(pa,tb,ab)}},{key:"printSystemConfig",value:function(){return Ma.modules.printSystemConfig()}},
{key:"getConfig",value:function(){return System.getConfig()}},{key:"setConfig",value:function(pa){Ma.modules.System.config(pa)}},{key:"getPackages",value:function(pa){pa=Object.assign({},pa).excluded;pa=void 0===pa?[]:pa;var tb=pa.filter(function(Ob){return"string"===typeof Ob}),ab=pa.filter(function(Ob){return"function"===typeof Ob});tb=tb.concat(tb.map(function(Ob){return System.decanonicalize(Ob.replace(/\/?$/,"/")).replace(/\/$/,"")}));return Ma.modules.getPackages().filter(function(Ob){return!tb.includes(Ob.url)&&
!ab.some(function(yc){return yc(Ob.url)})})}},{key:"registerPackage",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ob(ab){return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return yc.abrupt("return",Ma.modules.registerPackage(ab));case 1:case "end":return yc.stop()}},Ob)}));return function(ab){return pa.apply(this,arguments)}}()},{key:"importPackage",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ob(ab){return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=
yc.next){case 0:return yc.abrupt("return",Ma.modules.importPackage(ab));case 1:case "end":return yc.stop()}},Ob)}));return function(ab){return pa.apply(this,arguments)}}()},{key:"removePackage",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ob(ab){return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:return yc.abrupt("return",Ma.modules.removePackage(ab));case 1:case "end":return yc.stop()}},Ob)}));return function(ab){return pa.apply(this,arguments)}}()},{key:"reloadPackage",
value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){return regeneratorRuntime.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return Ta.abrupt("return",Ma.modules.reloadPackage(ab,Ob));case 1:case "end":return Ta.stop()}},yc)}));return function(ab,Ob){return pa.apply(this,arguments)}}()},{key:"packageConfChange",value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){var Ta,Bd,Eb,fe;return regeneratorRuntime.wrap(function(Od){for(;;)switch(Od.prev=Od.next){case 0:return Ta=
Ma.modules.System,Bd=Ma.parseJsonLikeObj(ab),Eb=JSON.stringify(Bd,null,2),Od.next=5,Ma.modules.module(Ob).changeSource(Eb,{doEval:!1});case 5:return Ta.set(Ob,Ta.newModule(Bd)),Od.next=8,this.getPackageForModule(Ob);case 8:(fe=Od.sent)&&Ma.modules.applyPackageConfig(Bd,fe.address);case 10:case "end":return Od.stop()}},yc,this)}));return function(ab,Ob){return pa.apply(this,arguments)}}()},{key:"resourcesOfPackage",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ob(ab){var yc,Ta,Bd,Eb=
arguments;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return yc=1<Eb.length&&void 0!==Eb[1]?Eb[1]:[".git","node_modules",".module_cache"],fe.prev=1,Ta=ab.address?ab.address:ab,Bd=Ma.modules.getPackage(Ta),fe.next=6,Bd.resources(void 0,yc);case 6:return fe.t0=function(Od){return Object.assign(Od,{"package":Od["package"].url})},fe.abrupt("return",fe.sent.map(fe.t0));case 10:return fe.prev=10,fe.t1=fe["catch"](1),console.warn("resourcesOfPackage error for ".concat(ab,
": ").concat(fe.t1)),fe.abrupt("return",[]);case 14:case "end":return fe.stop()}},Ob,null,[[1,10]])}));return function(ab){return pa.apply(this,arguments)}}()},{key:"getPackageForModule",value:function(pa){return(pa=Ma.modules.getPackageOfModule(pa))?pa.asSpec():pa}},{key:"isModuleLoaded",value:function(pa,tb){return Ma.modules.isModuleLoaded(pa,tb)}},{key:"doesModuleExist",value:function(pa,tb){return Ma.modules.isModuleLoaded(pa,tb)}},{key:"getModule",value:function(pa){return Ma.modules.module(pa)}},
{key:"importModule",value:function(pa){return Ma.modules.System["import"](pa)}},{key:"forgetModule",value:function(pa,tb){return Ma.modules.module(pa).unload(tb)}},{key:"reloadModule",value:function(pa,tb){return Ma.modules.module(pa).reload(tb)}},{key:"moduleFormat",value:function(pa){return Ma.modules.module(pa).format()}},{key:"moduleRead",value:function(pa){return Ma.modules.module(pa).source()}},{key:"moduleSourceChange",value:function(pa,tb,ab){return Ma.modules.module(pa).changeSource(tb,ab)}},
{key:"keyValueListOfVariablesInModule",value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){var Ta,Bd,Eb,fe,Od,Hd,Qc,Xd;return regeneratorRuntime.wrap(function(oc){for(;;)switch(oc.prev=oc.next){case 0:if(Ob){oc.next=4;break}oc.next=3;return this.resourceRead(ab);case 3:Ob=oc.sent;case 4:return Ta="string"===typeof Ob?Ma.ast.parse(Ob):Ob,Bd=this.normalizeSync(ab),this.moduleFormat(Bd),Eb=Ma.modules.module(Bd).env().recorder,oc.next=10,this.importsAndExportsOf(Bd,Ta);case 10:return fe=
oc.sent,Od=Ma.ast.query.topLevelDeclsAndRefs(Ta),Hd=Ma.arr.sortByKey(Ma.ast.query.declarationsOfScope(Od.scope,!0),"start"),Qc=Ma.arr.pluck(Od.scope.importSpecifiers,"name"),Xd=0,oc.abrupt("return",Hd.map(function(rf){var Dd=rf.name.length,ld=fe.exports.find(function(gb){return gb.local===rf.name}),Td=Qc.includes(rf.name);ld&&(Dd+=9);Td&&(Dd+=9);Xd=Math.max(Xd,Dd);return{isExport:ld,isImport:Td,name:rf.name,value:Eb[rf.name],node:rf,printedName:rf.name+(ld?" [export]":"")+(Td?" [import]":""),printedValue:Ma.obj.inspect(Eb[rf.name],
{maxDepth:1}).replace(/\n/g,"")}}).map(function(rf){return{isListItem:!0,value:rf,string:rf.printedName+Ma.string.indent(" = "+rf.printedValue," ",Xd-rf.printedName.length)}}));case 16:case "end":return oc.stop()}},yc,this)}));return function(ab,Ob){return pa.apply(this,arguments)}}()},{key:"importsAndExportsOf",value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){return regeneratorRuntime.wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:return Ta.next=2,Ma.modules.module(ab).imports(Ob);
case 2:return Ta.t0=Ta.sent,Ta.next=5,Ma.modules.module(ab).exports(Ob);case 5:return Ta.t1=Ta.sent,Ta.abrupt("return",{imports:Ta.t0,exports:Ta.t1});case 7:case "end":return Ta.stop()}},yc)}));return function(ab,Ob){return pa.apply(this,arguments)}}()},{key:"exportsOfModules",value:function(pa){return Ma.modules.ExportLookup.run(System,pa)}},{key:"searchInPackage",value:function(pa,tb,ab){return Ma.modules.getPackage(pa).search(tb,ab)}},{key:"runMochaTests",value:function(){var pa=Jc(regeneratorRuntime.mark(function Bd(ab,
Ob,yc,Ta){var Eb,fe;return regeneratorRuntime.wrap(function(Od){for(;;)switch(Od.prev=Od.next){case 0:return Od.next=2,pd.import("./mocha-tests-ea2fe3de.js");case 2:return Eb=Od.sent,fe=Eb.runMochaTests,Od.abrupt("return",fe(ab,Ob,yc,Ta));case 5:case "end":return Od.stop()}},Bd)}));return function(ab,Ob,yc,Ta){return pa.apply(this,arguments)}}()},{key:"loadMochaTestFile",value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){var Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=
Eb.next){case 0:return Eb.next=2,pd.import("./mocha-tests-ea2fe3de.js");case 2:return Ta=Eb.sent,Bd=Ta.loadMochaTestFile,Eb.abrupt("return",Bd(ab,Ob));case 5:case "end":return Eb.stop()}},yc)}));return function(ab,Ob){return pa.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LocalCoreInterface"}}],va,{pathInPackage:function(){return"./interfaces/local-system.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:409,end:8258})}(Ma.AbstractCoreInterface);Ma.LocalCoreInterface=qb;Ma.LocalCoreInterface=qb;var Vb=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/http-interface.js");Vb.evalStrategies=vd;Vb.RemoteCoreInterface=Nb;var Lb=function(N){var va=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/http-interface.js"),Wa=va.hasOwnProperty("HTTPCoreInterface")&&"function"===
typeof va.HTTPCoreInterface?va.HTTPCoreInterface:va.HTTPCoreInterface=function(pa){if(!pa||!pa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(Wa,N,[{key:Symbol["for"]("lively-instance-initialize"),value:function(pa){ic._get(Object.getPrototypeOf(Wa.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.currentEval=null;this.url=pa;this.server=new Vb.evalStrategies.HttpEvalStrategy(pa)}},{key:"name",
get:function(){return this.url}},{key:"description",get:function(){return this.url.replace(/^https?:\/\//,"")}},{key:"runEval",value:function(pa,tb){return this.server.runEval(pa,tb)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HTTPCoreInterface"}}],va,{pathInPackage:function(){return"./interfaces/http-interface.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",
version:"0.2.1"}}},{start:105,end:508})}(Vb.RemoteCoreInterface);Vb.HTTPCoreInterface=Lb;Vb.HTTPCoreInterface=Lb;var Kb=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/l2l-interface.js");Kb.evalStrategies=vd;Kb.RemoteCoreInterface=Nb;var Db=function(N){var va=window.lively.FreezerRuntime.recorderFor("lively-system-interface/interfaces/l2l-interface.js"),Wa=va.hasOwnProperty("L2LCoreInterface")&&"function"===typeof va.L2LCoreInterface?va.L2LCoreInterface:va.L2LCoreInterface=
function(pa){if(!pa||!pa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(Wa,N,[{key:Symbol["for"]("lively-instance-initialize"),value:function(pa,tb){ic._get(Object.getPrototypeOf(Wa.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.targetId=pa;this.peer=tb}},{key:"name",get:function(){return"l2l ".concat(this.targetId)}},{key:"description",get:function(){var pa=this.peer,tb=this.targetId.slice(0,
5);tb="l2l ".concat(tb);if(pa){var ab=pa.location,Ob=pa.type,yc=pa.user;pa=pa.world;Ob&&(tb+=", ".concat(Ob));ab&&(tb+=", ".concat(ab.replace(/^https?:\/\//,"")).concat(pa?"/"+pa:""));yc&&(tb+=", ".concat(yc.name))}return tb}},{key:"client",get:function(){return(lively.modules.module("lively.2lively/client.js").get()||{"default":lively.l2l.L2LClient})["default"]["default"]()}},{key:"isConnected",value:function(){var pa=Jc(regeneratorRuntime.mark(function ab(){var Ob,yc,Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=
Eb.next){case 0:return Ob=this.client,yc=this.targetId,Eb.next=3,Ob.sendToAndWait(Ob.trackerId,"getClients",{});case 3:return Ta=Eb.sent,Bd=Ta.data,Eb.abrupt("return",Bd.some(function(fe){fe=$d(fe,1)[0];return yc===fe}));case 6:case "end":return Eb.stop()}},ab,this)}));return function(){return pa.apply(this,arguments)}}()},{key:"runEval",value:function(){var pa=Jc(regeneratorRuntime.mark(function yc(ab,Ob){var Ta,Bd;return regeneratorRuntime.wrap(function(Eb){for(;;)switch(Eb.prev=Eb.next){case 0:if(Ta=
this.client){Eb.next=3;break}throw Error("No lively.2lively default client available!");case 3:return Bd=new Kb.evalStrategies.L2LEvalStrategy(Ta,this.targetId),Eb.abrupt("return",Bd.runEval(ab,Ob));case 5:case "end":return Eb.stop()}},yc,this)}));return function(ab,Ob){return pa.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"L2LCoreInterface"}}],va,{pathInPackage:function(){return"./interfaces/l2l-interface.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:105,end:1520})}(Kb.RemoteCoreInterface);Kb.L2LCoreInterface=Db;Kb.L2LCoreInterface=Db;var Ra=window.lively.FreezerRuntime.recorderFor("lively-system-interface/index.js");Ra.systemInterfaceNamed=vc;Ra.interactivelyCreatePackage=Hb;Ra.interactivelyLoadPackage=ub;Ra.interactivelyReloadPackage=ba;Ra.interactivelyUnloadPackage=Xa;Ra.interactivelyRemovePackage=
Sb;Ra.showExportsAndImportsOf=Da;Ra.shortModuleName=ib;Ra.addModule=La;Ra.interactivelyChangeModule=Ea;Ra.interactivelyReloadModule=T;Ra.interactivelyUnloadModule=ka;Ra.interactivelyRemoveModule=ya;Ra.interactivelyAddModule=jb;Ra.modulesInPackage=sa;Ra.LocalCoreInterface=qb;Ra.HTTPCoreInterface=Lb;Ra.L2LCoreInterface=Db;qb=Lc("Interface",function(N){var va=window.lively.FreezerRuntime.recorderFor("lively-system-interface/index.js"),Wa=va.hasOwnProperty("Interface")&&"function"===typeof va.Interface?
va.Interface:va.Interface=function(pa){if(!pa||!pa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(Wa,N,[{key:Symbol["for"]("lively-instance-initialize"),value:function(pa){this.coreInterface=pa}},{key:"isSystemInterface",get:function(){return!0}},{key:"name",get:function(){return this.coreInterface.name}},{key:"dynamicCompletionsForPrefix",value:function(pa,tb,ab){return this.coreInterface.dynamicCompletionsForPrefix(pa,
tb,ab)}},{key:"runEval",value:function(pa,tb){return this.coreInterface.runEval(pa,tb)}},{key:"printSystemConfig",value:function(pa,tb,ab){return this.coreInterface.printSystemConfig(pa,tb,ab)}},{key:"getConfig",value:function(pa,tb,ab){return this.coreInterface.getConfig(pa,tb,ab)}},{key:"getPackages",value:function(pa){return this.coreInterface.getPackages(pa)}},{key:"getModules",value:function(pa,tb,ab){return this.coreInterface.getModules(pa,tb,ab)}},{key:"getModule",value:function(pa,tb,ab){return this.coreInterface.getModule(pa,
tb,ab)}},{key:"getPackage",value:function(pa,tb,ab){return this.coreInterface.getPackage(pa,tb,ab)}},{key:"getPackageForModule",value:function(pa,tb,ab){return this.coreInterface.getPackageForModule(pa,tb,ab)}},{key:"resourcesOfPackage",value:function(pa,tb){return this.coreInterface.resourcesOfPackage(pa,tb)}},{key:"systemConfChange",value:function(pa,tb,ab){return this.coreInterface.systemConfChange(pa,tb,ab)}},{key:"registerPackage",value:function(pa){return this.coreInterface.registerPackage(pa)}},
{key:"importPackage",value:function(pa){return this.coreInterface.importPackage(pa)}},{key:"removePackage",value:function(pa){return this.coreInterface.removePackage(pa)}},{key:"reloadPackage",value:function(pa){return this.coreInterface.reloadPackage(pa)}},{key:"packageConfChange",value:function(pa,tb){return this.coreInterface.packageConfChange(pa,tb)}},{key:"keyValueListOfVariablesInModule",value:function(pa,tb){return this.coreInterface.keyValueListOfVariablesInModule(pa,tb)}},{key:"interactivelyCreatePackage",
value:function(pa){return Ra.interactivelyCreatePackage(this.coreInterface,pa)}},{key:"interactivelyLoadPackage",value:function(pa,tb){return Ra.interactivelyLoadPackage(this.coreInterface,pa,tb)}},{key:"interactivelyReloadPackage",value:function(pa,tb){return Ra.interactivelyReloadPackage(this.coreInterface,pa,tb)}},{key:"interactivelyUnloadPackage",value:function(pa,tb,ab){return Ra.interactivelyUnloadPackage(this.coreInterface,pa,tb,ab)}},{key:"interactivelyRemovePackage",value:function(pa,tb){return Ra.interactivelyRemovePackage(this.coreInterface,
pa,tb)}},{key:"isModuleLoaded",value:function(pa,tb){return this.coreInterface.isModuleLoaded(pa,tb)}},{key:"doesModuleExist",value:function(pa,tb){return this.coreInterface.doesModuleExist(pa,tb)}},{key:"createModule",value:function(pa){return Ra.addModule(this.coreInterface,pa)}},{key:"importModule",value:function(pa){return this.coreInterface.importModule(pa)}},{key:"forgetModule",value:function(pa,tb){return this.coreInterface.forgetModule(pa,tb)}},{key:"reloadModule",value:function(pa,tb){return this.coreInterface.reloadModule(pa,
tb)}},{key:"moduleFormat",value:function(pa){return this.coreInterface.moduleFormat(pa)}},{key:"moduleRead",value:function(pa){return this.coreInterface.moduleRead(pa)}},{key:"moduleWrite",value:function(pa,tb){return this.coreInterface.moduleWrite(pa,tb)}},{key:"getModulesInPackage",value:function(pa){return Ra.modulesInPackage(this.coreInterface,pa)}},{key:"shortModuleName",value:function(pa,tb){return Ra.shortModuleName(this.coreInterface,pa,tb)}},{key:"interactivelyChangeModule",value:function(pa,
tb,ab){return Ra.interactivelyChangeModule(this.coreInterface,pa,tb,ab)}},{key:"interactivelyReloadModule",value:function(pa,tb){return Ra.interactivelyReloadModule(this.coreInterface,pa,tb)}},{key:"interactivelyUnloadModule",value:function(pa,tb){return Ra.interactivelyUnloadModule(this.coreInterface,pa,tb)}},{key:"interactivelyRemoveModule",value:function(pa,tb){return Ra.interactivelyRemoveModule(this.coreInterface,pa,tb)}},{key:"interactivelyAddModule",value:function(pa,tb){return Ra.interactivelyAddModule(this.coreInterface,
pa,tb)}},{key:"showExportsAndImportsOf",value:function(pa,tb){return Ra.showExportsAndImportsOf(this.coreInterface,pa,tb)}},{key:"exportsOfModules",value:function(pa){return this.coreInterface.exportsOfModules(pa)}},{key:"searchInPackage",value:function(pa,tb,ab){return this.coreInterface.searchInPackage(pa,tb,ab)}},{key:"searchInAllPackages",value:function(){var pa=Jc(regeneratorRuntime.mark(function Ob(ab){var yc,Ta,Bd,Eb,fe,Od,Hd,Qc=arguments;return regeneratorRuntime.wrap(function(Xd){for(;;)switch(Xd.prev=
Xd.next){case 0:return yc=1<Qc.length&&void 0!==Qc[1]?Qc[1]:{},(Ta=yc.progress)&&Ta.step("Fetching Packages...",0),Xd.next=5,this.coreInterface.getPackages({excluded:yc.excludedPackages});case 5:Bd=Xd.sent,Eb=[],Ta&&Ta.step("Fetching Packages...",.1),fe=0;case 9:if(!(fe<Bd.length)){Xd.next=27;break}if((Od=Bd[fe].url)&&"no group"!==Od){Xd.next=13;break}return Xd.abrupt("continue",24);case 13:return Ta&&Ta.step(Od.replace(System.baseURL,"").slice(0,20),.1+fe/Bd.length*.9),Xd.prev=14,Xd.next=17,this.coreInterface.searchInPackage(Od,
ab,yc);case 17:Hd=Xd.sent;Eb=Eb.concat(Hd);Xd.next=24;break;case 21:Xd.prev=21,Xd.t0=Xd["catch"](14),console.error("Error searching in package ".concat(Od,":\n").concat(Xd.t0.stack));case 24:fe++;Xd.next=9;break;case 27:return Xd.abrupt("return",Eb);case 28:case "end":return Xd.stop()}},Ob,this,[[14,21]])}));return function(ab){return pa.apply(this,arguments)}}()},{key:"loadMochaTestFile",value:function(pa,tb){return this.coreInterface.loadMochaTestFile(pa,tb)}},{key:"runMochaTests",value:function(pa,
tb,ab,Ob){return this.coreInterface.runMochaTests(pa,tb,ab,Ob)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Interface"}}],va,{pathInPackage:function(){return"./index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively-system-interface",version:"0.2.1"}}},{start:650,end:6450})}(void 0));Ra.Interface=qb;Ra.Interface=qb;Ra.systemInterfaceNamed=
vc;qb=Lc("localInterface",new Ra.Interface(new Ra.LocalCoreInterface));Ra.localInterface=qb;Ra.localInterface=qb;Ra.httpInterfaces={};qb=Lc("serverInterfaceFor",function(N){return Ra.httpInterfaces[N]||(Ra.httpInterfaces[N]=new Ra.Interface(new Ra.HTTPCoreInterface(N)))});Ra.serverInterfaceFor=qb;Ra.serverInterfaceFor=qb;Ra.l2lInterfaces={};qb=Lc("l2lInterfaceFor",function(N,va){return Ra.l2lInterfaces[N]||(Ra.l2lInterfaces[N]=new Ra.Interface(new Ra.L2LCoreInterface(N,va)))});Ra.l2lInterfaceFor=
qb;Ra.l2lInterfaceFor=qb}}});