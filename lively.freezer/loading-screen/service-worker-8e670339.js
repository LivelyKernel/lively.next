System.register(["./__rootModule___commonjs-entry-71573ff5.js","./index-ca98f65e.js"],function(Lc,pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc;return{setters:[function(hb){Nd=hb.a0;Tc=hb.bD;Jc=hb.be;$d=hb.bE;Bb=hb.B;rd=hb.k;Id=hb.U;Ac=hb.bF;Pc=hb.d;gd=hb.ar;nd=hb.A;Fd=hb.bC;ic=hb.i;vd=hb.aI;sb=hb._;Xb=hb.y;Nb=hb.G},function(hb){bc=hb.a}],execute:function(){function hb(){hb=sb(regeneratorRuntime.mark(function Xa(){var Za,Sb,Cb;return regeneratorRuntime.wrap(function(Da){for(;;)switch(Da.prev=
Da.next){case 0:System.set("@lively-worker",System.newModule(ec.initWorker()));case 1:return Da.next=3,ec.promise.delay(1E3);case 3:Sb={};for(Cb in System._loader.modules)if(Cb.includes("local://")||Cb.includes("lively://"))Sb[Cb]=ec.module(Cb)._source;Da.next=7;return ec.callService("ensureModules",{loadedModules:Object.keys(System._loader.modules).filter(function(zb){return!zb.includes("@")}),sources:Sb},!1);case 7:Za=Da.sent;case 8:if(Za.error){Da.next=1;break}case 9:case "end":return Da.stop()}},
Xa)}));return hb.apply(this,arguments)}function cb(wb,Xa){return Hb.apply(this,arguments)}function Hb(){Hb=sb(regeneratorRuntime.mark(function Sb(Xa,Za){var Cb,Da,zb,db=arguments;return regeneratorRuntime.wrap(function(ib){for(;;)switch(ib.prev=ib.next){case 0:return Da=(Cb=2<db.length&&void 0!==db[2]?db[2]:!0)?ec.prepareArguments(Za):Za,zb=ec.detectProgressMonitor(Za),ib.abrupt("return",new Promise(function(Ea,W){return System.get("@lively-worker").sendTo("@lively-worker",Xa,Da,function(T,ia){zb&&
ia.expectMoreResponses?zb.step(ia.data.stepName,ia.data.progress):Ea(ia.data)})}));case 4:case "end":return ib.stop()}},Sb)}));return Hb.apply(this,arguments)}Lc("c",cb);var ec=window.lively.FreezerRuntime.recorderFor("lively.ide/service-worker.js");ec.startWorker=function(){return hb.apply(this,arguments)};ec.initWorker=function(){var wb=ec.worker.create({workerId:"@lively-worker",scriptsToLoad:["lively.next-node_modules/babel-standalone/babel.js","lively.next-node_modules/systemjs/dist/system.src.js",
"lively.modules/dist/lively.modules.js","lively.ide/jsdom.worker.js"].map(function(Xa){return System.baseURL+Xa})});wb.eval("("+ec.stringifyFunctionWithoutToplevelRecorder(sb(regeneratorRuntime.mark(function Za(){var Sb,Cb,Da,zb,db,ib,Ea;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return Ea=function(){Ea=sb(regeneratorRuntime.mark(function K(ia,ka){var ya;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:return ya=Cb(ia),pb.next=3,
ya.exists();case 3:pb.t0=!pb.sent;if(!pb.t0){pb.next=6;break}pb.t0=ya.localBackend;case 6:if(!pb.t0){pb.next=20;break}if(ka){pb.next=14;break}pb.next=10;return System._livelyModulesTranslationCache.fetchStoredModuleSource(ia);case 10:pb.t1=pb.sent;if(pb.t1){pb.next=13;break}pb.t1={};case 13:ka=pb.t1.source;case 14:if(!ka){pb.next=19;break}pb.next=17;return ya.write(ka);case 17:pb.next=20;break;case 19:console.log("No source available for ",ia);case 20:return pb.prev=20,ia.includes("/package.json")&&
db(ia.replace("/package.json","")),pb.next=24,zb(ia).source();case 24:pb.next=28;break;case 26:pb.prev=26,pb.t2=pb["catch"](20);case 28:case "end":return pb.stop()}},K,null,[[20,26]])}));return Ea.apply(this,arguments)},ib=function(T,ia){return Ea.apply(this,arguments)},W.next=4,lively.lang.promise.waitFor(5E3,function(){return self.initialized});case 4:return W.next=6,pd.import("./index-1c08552a.js");case 6:return W.next=8,Promise.resolve().then(function(){return ba});case 8:return W.next=10,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(T){return T.cc});
case 10:return Sb=W.sent,Cb=Sb.resource,W.next=14,pd.import("./index-ca98f65e.js").then(function(T){return T.m});case 14:Da=W.sent,zb=Da.module,db=Da.registerPackage,self.messenger.addServices({ensureModules:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,K){var pb,La,eb,jb,E,Wb,R;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:pb=ka.data,La=pb.loadedModules,eb=pb.sources,jb=void 0===eb?{}:eb,E=Nb(La),xb.prev=2,E.s();case 4:if((Wb=E.n()).done){xb.next=
11;break}R=Wb.value;if(System._loader.modules[R]){xb.next=9;break}xb.next=9;return ib(R,jb[R]);case 9:xb.next=4;break;case 11:xb.next=16;break;case 13:xb.prev=13,xb.t0=xb["catch"](2),E.e(xb.t0);case 16:return xb.prev=16,E.f(),xb.finish(16);case 19:K.answer(ka,!0);case 20:case "end":return xb.stop()}},ya,null,[[2,13,16,19]])}));return function(ka,K){return T.apply(this,arguments)}}(),updateModule:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,K){var pb,La,eb,jb,E;return regeneratorRuntime.wrap(function(Wb){for(;;)switch(Wb.prev=
Wb.next){case 0:return Wb.next=2,pd.import("./index-ca98f65e.js").then(function(R){return R.m});case 2:pb=Wb.sent;La=pb.module;eb=ka.data;jb=eb.module;E=eb.newSource;if(System._loader.modules[jb]){Wb.next=11;break}Wb.next=8;return ib(jb,E);case 8:K.answer(ka,!0);Wb.next=14;break;case 11:return Wb.next=13,La(jb).changeSource(E);case 13:K.answer(ka,!0);case 14:case "end":return Wb.stop()}},ya)}));return function(ka,K){return T.apply(this,arguments)}}(),loadModule:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,
K){var pb,La,eb;return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:pb=ka.data;La=pb.module;eb=pb.source;if(System._loader.modules[La]){jb.next=4;break}jb.next=4;return ib(La,eb);case 4:K.answer(ka,!0);case 5:case "end":return jb.stop()}},ya)}));return function(ka,K){return T.apply(this,arguments)}}(),freezeSnapshot:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,K){return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:case "end":return pb.stop()}},
ya)}));return function(ka,K){return T.apply(this,arguments)}}(),exportsOfModules:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,K){var pb,La,eb,jb,E,Wb,R,xb,Ja,Ga;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:return sa.next=2,pd.import("./index-1c08552a.js");case 2:return pb=sa.sent,La=pb.localInterface,sa.next=6,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(Ub){return Ub.cb});case 6:return eb=sa.sent,jb=eb.deserialize,E=jb(ka.data),
Wb=E.livelySystem,R=void 0===Wb?La:Wb,xb=E.excludedPackages,Ja=void 0===xb?[]:xb,Ga=E.progress,sa.next=11,lively.lang.promise.waitFor(5E3,function(){return!self.loadingModules});case 11:return sa.t0=K,sa.t1=ka,sa.next=15,R.exportsOfModules({excludedPackages:Ja,progress:Ga&&Ga.asWorkerEndpoint(ka)});case 15:sa.t2=sa.sent,sa.t0.answer.call(sa.t0,sa.t1,sa.t2);case 17:case "end":return sa.stop()}},ya)}));return function(ka,K){return T.apply(this,arguments)}}(),doSearch:function(){var T=sb(regeneratorRuntime.mark(function ya(ka,
K){var pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc;return regeneratorRuntime.wrap(function(Oc){for(;;)switch(Oc.prev=Oc.next){case 0:return Oc.next=2,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(aa){return aa.cb});case 2:return pb=Oc.sent,La=pb.deserialize,Oc.next=6,pd.import("./code-search.cp-0ec09b89.js").then(function(aa){return aa.c});case 6:return eb=Oc.sent,jb=eb.doSearch,E=La(ka.data),Wb=E.excludedModules,R=E.excludedPackages,xb=E.livelySystem,Ja=E.searchTerm,Ga=E.includeUnloaded,
sa=E.caseSensitive,Ub=E.progress,Oc.next=11,jb(xb,Ja,Wb,R,Ga,sa,Ub&&Ub.asWorkerEndpoint(ka));case 11:vc=Oc.sent,K.answer(ka,vc);case 13:case "end":return Oc.stop()}},ya)}));return function(ka,K){return T.apply(this,arguments)}}()});case 18:case "end":return W.stop()}},Za)})))+")()",function(){});ec.subscribe("lively.modules/moduleloaded",function(){var Za=sb(regeneratorRuntime.mark(function Da(Cb){return regeneratorRuntime.wrap(function(zb){for(;;)switch(zb.prev=zb.next){case 0:return zb.t0=ec,zb.t1=
Cb.module,zb.next=4,ec.module(Cb.module).source();case 4:zb.t2=zb.sent,zb.t3={module:zb.t1,source:zb.t2},zb.t0.callService.call(zb.t0,"loadModule",zb.t3,!1);case 7:case "end":return zb.stop()}},Da)}));return function(Cb){return Za.apply(this,arguments)}}());ec.subscribe("lively.modules/modulechanged",function(Za){return ec.callService("updateModule",Za,!1)});return wb};ec.callService=cb;ec.detectProgressMonitor=function(wb){if(wb&&wb.isProgressMonitor)return wb;if(ec.obj.isObject(wb))return ec.obj.values(wb).find(function(Xa){return Xa&&
Xa.isProgressMonitor})};ec.prepareArguments=function(wb){return ec.serialize(wb,{plugins:[{serializeObject:function(Xa,Za,Sb,Cb,Da){if(ec.obj.isRegExp(Xa))return Sb.expressionSerializer.exprStringEncode({__expr__:String(Xa)});if(ec.obj.isFunction(Xa))return Sb.expressionSerializer.exprStringEncode({__expr__:String(Xa).replace("function ","function _lambda_")})}}].concat(Xb(ec.allPlugins))})};ec.commonjsHelpers=Nd;ec.allPlugins=Tc;ec.serialize=Jc;ec.deserialize=$d;ec.obj=Bb;ec.string=rd;ec.properties=
Id;ec.worker=Ac;ec.promise=Pc;ec.subscribe=gd;ec.module=bc;ec.config=nd;ec.stringifyFunctionWithoutToplevelRecorder=Fd;!System.get("@system-env").worker&&ec.config.ide.workerEnabled&&!System.get("@lively-worker")&&ec.startWorker();ec.callService=cb;var ub=Lc("P",function(wb){var Xa=window.lively.FreezerRuntime.recorderFor("lively.ide/service-worker.js"),Za=Xa.hasOwnProperty("ProgressMonitor")&&"function"===typeof Xa.ProgressMonitor?Xa.ProgressMonitor:Xa.ProgressMonitor=function(Sb){if(!Sb||!Sb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return ic(Za,wb,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var Sb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Cb=Sb.id;Cb=void 0===Cb?vd():Cb;Sb=Sb.handlers;Sb=void 0===Sb?{}:Sb;this.id=Cb;this.handlers=Sb}},{key:"isProgressMonitor",get:function(){return!0}},{key:"step",value:function(Sb,Cb){for(var Da in this.handlers)this.handlers[Da](Sb,Cb)}},{key:"disconnectFromWorker",value:function(){System.get("@lively-worker").removeAllListeners(this.id)}},
{key:"asWorkerEndpoint",value:function(Sb){var Cb=new ec.WorkerProgressMonitor({id:this.id});Cb.workerMessageObj=Sb;return Cb}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ProgressMonitor"}}],Xa,{pathInPackage:function(){return"./service-worker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6713,end:7358})}(void 0));
ec.ProgressMonitor=ub;ec.ProgressMonitor=ub;var yb=function(wb){var Xa=window.lively.FreezerRuntime.recorderFor("lively.ide/service-worker.js"),Za=Xa.hasOwnProperty("WorkerProgressMonitor")&&"function"===typeof Xa.WorkerProgressMonitor?Xa.WorkerProgressMonitor:Xa.WorkerProgressMonitor=function(Sb){if(!Sb||!Sb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return ic(Za,wb,[{key:"isWorkerEndpoint",get:function(){return!0}},
{key:"step",value:function(Sb,Cb){self.messenger.answer(this.workerMessageObj,{stepName:Sb,progress:Cb},!0)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"WorkerProgressMonitor"}}],Xa,{pathInPackage:function(){return"./service-worker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7425,end:7659})}(ec.ProgressMonitor);
ec.WorkerProgressMonitor=yb;ec.WorkerProgressMonitor=yb;var ba=Object.freeze({__proto__:null,callService:cb,ProgressMonitor:ub,WorkerProgressMonitor:yb})}}});