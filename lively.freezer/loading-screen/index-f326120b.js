System.register(["./__root_module__-3c9a1ccb.js"],function(sa){var lb,Eb,Wb,Qb,Bd,Fc,wd,Kc,Gc,Yc,jd,Dd,od,Zc,Ra,tb,dc,bc,Xc,Oc,$b,zc,Fb,Cb,pc,Pc,wb,db,Ta,cb,ma,La,fb,pb,xb,Wa,Xa,Ab,kc,Ub,qc,wc;return{setters:[function(I){lb=I.ar;Eb=I.a1;Wb=I.C;Qb=I.al;Bd=I.ag;Fc=I.av;wd=I.aS;Kc=I.az;Gc=I.aw;Yc=I.a7;jd=I.aj;Dd=I.am;od=I.h;Zc=I.a0;Ra=I.$;tb=I.af;dc=I.a5;bc=I.P;Xc=I._;Oc=I.aT;$b=I.an;zc=I.a4;Fb=I.ao;Cb=I.ap;pc=I.aU;Pc=I.aV;wb=I.as;db=I.aq;Ta=I.s;cb=I.at;ma=I.aW;La=I.ai;fb=I.aX;pb=I.aY;xb=I.aZ;Wa=
I.a8;Xa=I.a_;Ab=I.ak;kc=I.a$;Ub=I.b0;qc=I.b1;wc=I.aO}],execute:function(){function I(da){(da=vb.cachedGuideLines.get(da))&&da.forEach(function(ra){return ra.remove()})}function T(da,ra,ub,H,ia){ra=void 0===ra?!0:ra;ub=void 0===ub?!0:ub;H=void 0===H?10:H;ia=void 0===ia?100:ia;if(ra||ub){var Ba=da.owner,rb=Ba.world();Ba=Ba.getGlobalTransform();var sc=da.owner.submorphs.filter(function(Tc){return Tc!==da&&!Tc.isEpiMorph&&Tc.visible&&Tc.reactsToPointer}),yc=vb.findAlignedMorphs(da,sc,H,ia,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));ia=[];var Gd=0,Ld=0,Ke=0,hd=0;Ba.e-=rb.scroll.x;Ba.f-=rb.scroll.y;if(yc){yc=$jscomp.makeIterator(yc);for(var Md=yc.next();!Md.done;Md=yc.next()){Md=$jscomp.makeIterator(Md.value);Md.next();var ze=Md.next().value;Md=ze.vertical;ze=$jscomp.makeIterator(ze.horizontal);for(var Ne=ze.next();!Ne.done;Ne=ze.next()){Ne=Ne.value;var yf=Ne.edgeAVal,tf=Ne.refPointsA,vc=Ne.refPointsB,Fe=Ne.edgeBVal,mf=Math.ceil(H-Ne.delta),Jf=Math.min(tf.top,vc.top);tf=Math.max(tf.bottom,
vc.bottom);Ne.maxDist>H&&(mf-=H/2);Gd<mf&&(Gd=mf,Ke=Fe-yf);ia.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:vb.guideWidth,start:Ba.transformPoint(vb.pt(Fe,Jf)),end:Ba.transformPoint(vb.pt(Fe,tf)),fill:vb.guideColor,guideType:"h",priority:mf})}Md=$jscomp.makeIterator(Md);for(ze=Md.next();!ze.done;ze=Md.next())ze=ze.value,Ne=ze.edgeAVal,Jf=ze.refPointsA,tf=ze.refPointsB,yf=ze.edgeBVal,Fe=Math.ceil(H-ze.delta),mf=Math.min(Jf.left,tf.left),Jf=Math.max(Jf.right,tf.right),ze.maxDist>H&&(Fe-=
H/2),Ld<Fe&&Math.abs(yf-Ne)<=H&&(Ld=Fe,hd=yf-Ne),ia.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:vb.guideWidth,start:Ba.transformPoint(vb.pt(mf,yf)),end:Ba.transformPoint(vb.pt(Jf,yf)),fill:vb.guideColor,guideType:"v",priority:Fe})}}if(!Gd||!Ld){sc=[da].concat($jscomp.arrayFromIterable(sc));Ne=vb.computeClosestMorphs(sc);ze=Ne[0];sc=ze.l;yc=ze.r;Md=ze.t;ze=ze.b;var ye;if(sc||yc||Md||ze){var va=(sc||yc||Md||ze).refPointsA;for(yf=1;yf<Ne.length&&(tf=Ne[yf],Fe=tf.l,mf=tf.r,Jf=tf.t,tf=tf.b,
Gd||(sc&&Fe&&sc.index!==Fe.index&&Math.abs(Fe.dist-sc.dist)<=H?ye=Object.assign({neighbor:yf,direction:"left"},Fe):yc&&mf&&yc!==mf.index&&Math.abs(mf.dist-yc.dist)<=H&&(ye=Object.assign({neighbor:yf,direction:"right"},mf))),Ld||(Md&&Jf&&Md.index!==Jf.index&&Math.abs(Jf.dist-Md.dist)<=H?ye=Object.assign({neighbor:yf,direction:"top"},Jf):ze&&tf&&ze.index!==tf.index&&Math.abs(tf.dist-ze.dist)<=H&&(ye=Object.assign({neighbor:yf,direction:"bottom"},tf))),!ye);yf++);}if(ye){var Ka=ye;H=Ka.direction;Jf=
Ka.dist;var sb=va.left;vc=va.top;var Q=va.bottom,ua=va.right,Za=va.width,ib=va.height;tf=Ka.refPointsA;va=tf.left;Ne=tf.top;yf=tf.bottom;Fe=tf.right;mf=tf.width;tf=tf.height;var oc=Ka.refPointsB,cc=oc.left;Ka=oc.top;var ad=oc.bottom;oc=oc.right;ua="left"===H?sb:"right"===H?ua:sb+Za/2;Q="bottom"===H?Q:"top"===H?vc:vc+ib/2;sb="left"===H?ua-Jf:"right"===H?ua+Jf:sb+Za/2;Jf="bottom"===H?Q+Jf:"top"===H?Q-Jf:vc+ib/2;vc="left"===H?oc:"right"===H?cc:va+mf/2;Za="bottom"===H?Ka:"top"===H?ad:Ne+tf/2;!ub||Gd||
"right"!==H&&"left"!==H||(Gd=10,Ke=(ye.dist-(yc||sc).dist)*("right"===H?-1:1),ua+=Ke,sb+=Ke);!ub||Ld||"top"!==H&&"bottom"!==H||(Ld=10,hd=((Md||ze).dist-ye.dist)*("top"===H?-1:1),Q+=hd,Jf+=hd);ia.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ba.transformPoint(vb.pt("left"===H?va:"right"===H?Fe:va+mf/2,"bottom"===H?yf:"top"===H?Ne:Ne+tf/2)),end:Ba.transformPoint(vb.pt(vc,Za)),fill:vb.Color.orange,height:vb.guideWidth,guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ba.transformPoint(vb.pt(ua,
Q)),end:Ba.transformPoint(vb.pt(sb,Jf)),fill:vb.Color.orange,height:vb.guideWidth,guideType:H,priority:10})}}ub&&(Ke||hd)&&da.moveBy(vb.pt(Ke,hd));if(ra){ia=ia.filter(function(Tc){var Vc=Tc.guideType;Tc=Tc.priority;return"h"===Vc?Tc===Gd:"v"===Vc?Tc===Ld:!0});(ra=vb.cachedGuideLines.get(da))||vb.cachedGuideLines.set(da,ra=[]);for(ub=0;ub<ia.length;ub++)ye=void 0,ra[ub]?ye=Object.assign(ra[ub],ia[ub]):(ye=vb.morph(ia[ub]),ra.push(ye)),ye.owner||rb.addMorph(ye);ra.slice(ub).forEach(function(Tc){return Tc.remove()});
vb.fun.debounceNamed(da.id+"-drag-guides-cleanup",1300,function(){var Tc=vb.cachedGuideLines.get(da);Tc&&Tc.forEach(function(Vc){return Vc.remove()})})()}}}function ta(da,ra,ub,H,ia,Ba){ub=void 0===ub?!0:ub;H=void 0===H?!0:H;ia=void 0===ia?5:ia;Ba=void 0===Ba?100:Ba;if(ub||H){var rb=da.owner,sc=rb.world(),yc=rb.getGlobalTransform(),Gd=da.owner.submorphs.filter(function(Q){return Q!==da&&!Q.isEpiMorph&&Q.visible&&Q.reactsToPointer});rb=(ra.includes("left")||ra.includes("right")?"x":"")+(ra.includes("top")||
ra.includes("bottom")?"y":"");var Ld=vb.findMorphsWithSimilarWidthOrHeight(da,rb,Gd,ia,Ba),Ke=-Infinity,hd=-Infinity,Md=0,ze=0,Ne=0,yf=0,tf=0,vc=0;rb=[];yc.e-=sc.scroll.x;yc.f-=sc.scroll.y;if(Ld){Ld=$jscomp.makeIterator(Ld);for(var Fe=Ld.next();!Fe.done;Fe=Ld.next()){Fe=$jscomp.makeIterator(Fe.value);Fe.next();var mf=Fe.next().value;Fe=mf.similarIn;var Jf=mf.delta,ye=mf.refPointsA,va=mf.refPointsB;mf=ia-Jf+(Ba-mf.minDist);"width"===Fe?Ke<mf&&(Ke=mf,ra.includes("left")&&(ze=-Jf),ra.includes("right")&&
(Md=Jf)):hd<mf&&(hd=mf,ra.includes("top")&&(Ne=-Jf),ra.includes("bottom")&&(yf=Jf));Jf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:vb.guideWidth,fill:vb.guideColor,guideType:Fe,priority:mf,start:yc.transformPoint("width"===Fe?vb.pt(ye.left,ye.top+ye.height/2):vb.pt(ye.left+ye.width/2,ye.top)),end:yc.transformPoint("width"===Fe?vb.pt(ye.right,ye.top+ye.height/2):vb.pt(ye.left+ye.width/2,ye.bottom))};Fe=Object.assign({},Jf,{start:yc.transformPoint("width"===Fe?vb.pt(va.left,va.top+va.height/
2):vb.pt(va.left+va.width/2,va.top)),end:yc.transformPoint("width"===Fe?vb.pt(va.right,va.top+va.height/2):vb.pt(va.left+va.width/2,va.bottom))});rb.push(Jf,Fe)}}if(Ba=vb.findAlignedMorphs(da,Gd,ia,Ba,ra,void 0))for(Ba=$jscomp.makeIterator(Ba),Gd=Ba.next();!Gd.done;Gd=Ba.next()){Gd=$jscomp.makeIterator(Gd.value);Gd.next();Ld=Gd.next().value;Gd=Ld.vertical;Ld=$jscomp.makeIterator(Ld.horizontal);for(Fe=Ld.next();!Fe.done;Fe=Ld.next()){Fe=Fe.value;va=Fe.edgeAVal;var Ka=Fe.refPointsA,sb=Fe.refPointsB;
Jf=Fe.edgeBVal;ye=Math.ceil(ia-Fe.delta);mf=Math.min(Ka.top,sb.top);Ka=Math.max(Ka.bottom,sb.bottom);Fe.maxDist>ia&&(ye-=ia/2);tf<ye&&(tf=ye,ra.includes("left")&&(ze=-(Jf-va)),ra.includes("right")&&(Md=+(Jf-va)));rb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:vb.guideWidth,start:yc.transformPoint(vb.pt(Jf,mf)),end:yc.transformPoint(vb.pt(Jf,Ka)),fill:vb.guideColor,guideType:"h",priority:ye})}Gd=$jscomp.makeIterator(Gd);for(Ld=Gd.next();!Ld.done;Ld=Gd.next())Ld=Ld.value,Fe=Ld.edgeAVal,
mf=Ld.refPointsA,Ka=Ld.refPointsB,va=Ld.edgeBVal,Jf=Math.ceil(ia-Ld.delta),ye=Math.min(mf.left,Ka.left),mf=Math.max(mf.right,Ka.right),Ld.maxDist>ia&&(Jf-=ia/2),vc<Jf&&Math.abs(va-Fe)<=ia&&(vc=Jf,ra.includes("top")&&(Ne=va-Fe),ra.includes("bottom")&&(yf=va-Fe)),rb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:vb.guideWidth,start:yc.transformPoint(vb.pt(ye,va)),end:yc.transformPoint(vb.pt(mf,va)),fill:vb.guideColor,guideType:"v",priority:Jf})}H&&(ze&&(da.left+=ze,da.right-=ze),Ne&&(da.top+=
Ne,da.bottom-=Ne),Md&&(da.width+=Md),yf&&(da.height+=yf));if(ub){rb=rb.filter(function(Q){var ua=Q.guideType;Q=Q.priority;return"width"===ua?Q===Ke:"height"===ua?Q===hd:"v"===ua?Q===vc:"h"===ua?Q===tf:!1});(ra=vb.cachedGuideLines.get(da))||vb.cachedGuideLines.set(da,ra=[]);for(ub=0;ub<rb.length;ub++)H=void 0,ra[ub]?H=Object.assign(ra[ub],rb[ub]):(H=vb.morph(rb[ub]),ra.push(H)),H.owner||sc.addMorph(H);ra.slice(ub).forEach(function(Q){return Q.remove()});vb.fun.debounceNamed(da.id+"-drag-guides-cleanup",
1300,function(){var Q=vb.cachedGuideLines.get(da);Q&&Q.forEach(function(ua){return ua.remove()})})()}}}function Ca(da,ra){ra=void 0===ra?!1:ra;var ub=Fa.MorphicEnv.default().world;if(null===da||void 0===da)da=String(da);if(da.isMorph)return Fa.showRect(da.world(),da.globalBounds().translatedBy(da.world().scroll.negated()),ra);if(da.isPoint)return Fa.showRect(ub,new Fa.Rectangle(da.x-5,da.y-5,10,10));if(da.isLine)return Fa.showLine(ub,da);if(da.isRectangle)return Fa.showRect(ub,da);if("undefined"!==
typeof Fa.Element&&da instanceof Fa.Element)return Fa.showRect(ub,Fa.Rectangle.fromElement(da));if("number"===typeof da||"symbol"===typeof da||"boolean"===typeof da||"undefined"!==typeof Fa.Node&&da instanceof Fa.Node||da instanceof RegExp)da=String(da);"object"===typeof da&&(da=Fa.obj.inspect(da,{maxDepth:1}));return"string"===typeof da&&1===arguments.length?ub.setStatusMessage(da):ub.setStatusMessage(Fa.string.formatFromArray(Array.from(arguments)))}function Mb(da,ra,ub){ub=void 0===ub?3E3:ub;var H,
ia,Ba,rb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yc){if(1==yc.nextAddress){if(!(da&&da.world()&&ra&&ra.world()))return yc.return(null);H=da.owner.worldPoint(da.center);ia=ra.owner.worldPoint(ra.center);Ba=H.lineTo(ia).sampleN(2)[1];rb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Fa.Color.red,fill:Fa.Color.red,cx:5,cy:5,r:4}]};sc=$world.addMorph(new Fa.Path({position:Ba,renderOnGPU:!0,vertices:[Fa.pt(0),
Fa.pt(0)],borderWidth:2,startMarker:rb,endMarker:rb,borderColor:Fa.Color.red}));return yc.yield(sc.whenRendered(),2)}if(3!=yc.nextAddress)return yc.yield(sc.animate({opacity:1,customTween:function(Gd){var Ld=sc.center;sc.vertices=[Fa.pt(0).interpolate(Gd,H.subPt(Ba)),Fa.pt(0).interpolate(Gd,ia.subPt(Ba))];sc.center=Ld},duration:400}),3);ub&&setTimeout(function(){return sc.fadeOut()},ub);return yc.return(sc)})}sa({a:T,d:Mb,r:I,s:Ca});var vb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
vb.removeSnapToGuidesOf=I;vb.showAndSnapToGuides=T;vb.showAndSnapToResizeGuides=ta;vb.computeRefPoints=function(da){var ra=da.x,ub=da.y,H=da.width;da=da.height;return{left:ra,top:ub,hCenter:ra+H/2,vCenter:ub+da/2,right:ra+H,bottom:ub+da,width:H,height:da}};vb.findEdgesInAlignment=function(da,ra,ub,H,ia,Ba,rb,sc,yc,Gd){ub=void 0===ub?15:ub;Ba=void 0===Ba?0:Ba;rb=void 0===rb?0:rb;sc=void 0===sc?0:sc;yc=void 0===yc?0:yc;Gd=void 0===Gd?0:Gd;for(var Ld=[],Ke=[],hd=0;hd<vb.edges.length;hd++){var Md=$jscomp.makeIterator(vb.edges[hd]),
ze=Md.next().value,Ne=Md.next().value;Md=Md.next().value;var yf=da[Ne],tf=ra[Md],vc=Math.max(yf,tf)-Math.min(yf,tf);vc>ub||!(H&&!H.includes(Ne)||ia&&!ia.includes(Md))&&("vertical"===ze?Ld:Ke).push({delta:vc,edgeA:Ne,edgeB:Md,edgeAVal:yf,edgeBVal:tf,refPointsA:da,refPointsB:ra,distLeft:Ba,distTop:rb,distRight:sc,distBottom:yc,maxDist:Gd})}return Ld.length||Ke.length?{vertical:Ld,horizontal:Ke}:null};vb.findAlignedMorphs=function(da,ra,ub,H,ia,Ba){ub=void 0===ub?15:ub;H=void 0===H?Infinity:H;for(var rb,
sc=vb.computeRefPoints(da.bounds()),yc=0;yc<ra.length;yc++){var Gd=ra[yc];if(Gd!==da){var Ld=vb.computeRefPoints(Gd.bounds()),Ke=Math.max(0,sc.left-Ld.right),hd=Math.max(0,Ld.left-sc.right),Md=Math.max(0,sc.top-Ld.bottom),ze=Math.max(0,Ld.top-sc.bottom);Math.max(ze,Md,hd,Ke)>H||!(Ld=vb.findEdgesInAlignment(sc,Ld,ub,ia,Ba,Ke,Md,hd,ze,Math.max(ze,Md,hd,Ke)))||(rb||(rb=new Map),rb.set(Gd,Ld))}}da=da.owner;ra=vb.computeRefPoints(da.innerBounds());if(ub=vb.findEdgesInAlignment(sc,ra,ub))rb||(rb=new Map),
rb.set(da,ub);return rb};vb.findMorphsWithSimilarWidthOrHeight=function(da,ra,ub,H,ia){H=void 0===H?15:H;ia=void 0===ia?Infinity:ia;for(var Ba,rb=vb.computeRefPoints(da.bounds()),sc=0;sc<ub.length;sc++){var yc=ub[sc];if(yc!==da){var Gd=vb.computeRefPoints(yc.bounds()),Ld=Math.max(0,rb.left-Gd.right),Ke=Math.max(0,Gd.left-rb.right),hd=Math.max(0,rb.top-Gd.bottom),Md=Math.max(0,Gd.top-rb.bottom),ze=Math.min(Md,hd,Ke,Ld),Ne=Math.max(Md,hd,Ke,Ld);if(!(Math.max(Md,hd,Ke,Ld)>ia)){Ke=rb;Ld=Ke.width;Ke=Ke.height;
Md=Gd;hd=Md.width;Md=Md.height;var yf=hd-Ld,tf=Md-Ke;("x"===ra||"xy"===ra)&&Math.abs(yf)<=H&&(Ba||(Ba=new Map),Ba.set(yc,{similarIn:"width",minDist:ze,maxDist:Ne,refPointsA:rb,refPointsB:Gd,valA:Ld,valB:hd,delta:yf}));("y"===ra||"xy"===ra)&&Math.abs(tf)<=H&&(Ba||(Ba=new Map),Ba.set(yc,{similarIn:"height",minDist:ze,maxDist:Ne,refPointsA:rb,refPointsB:Gd,valA:Ke,valB:Md,delta:tf}))}}}return Ba};vb.closest=function(da,ra,ub,H,ia,Ba,rb,sc){sc=void 0===sc?!0:sc;var yc=H[da],Gd=ia[da],Ld=Ba[da];ra=rb[da];
for(var Ke,hd,Md,ze,Ne=0;Ne<ia.length;Ne++)da===Ne||yc<ia[Ne]||Ke&&ia[Ke.index]>=ia[Ne]||sc&&rb[da]<Ba[Ne]||Ba[da]>rb[Ne]||(Ke={index:Ne,dist:yc-ia[Ne],refPointsA:ub[da],refPointsB:ub[Ne]});for(yc=0;yc<H.length;yc++)da===yc||Gd>H[yc]||hd&&H[hd.index]<=H[yc]||sc&&rb[da]<Ba[yc]||Ba[da]>rb[yc]||(hd={index:yc,dist:H[yc]-Gd,refPointsA:ub[da],refPointsB:ub[yc]});for(Gd=0;Gd<rb.length;Gd++)da===Gd||Ld<rb[Gd]||Md&&rb[Md.index]>=rb[Gd]||sc&&H[da]>ia[Gd]||ia[da]<H[Gd]||(Md={index:Gd,dist:Ld-rb[Gd],refPointsA:ub[da],
refPointsB:ub[Gd]});for(rb=0;rb<Ba.length;rb++)da===rb||ra>Ba[rb]||ze&&Ba[ze.index]<=Ba[rb]||sc&&H[da]>ia[rb]||ia[da]<H[rb]||(ze={index:rb,dist:Ba[rb]-ra,refPointsA:ub[da],refPointsB:ub[rb]});return{l:Ke,r:hd,t:Md,b:ze}};vb.computeClosestMorphs=function(da){for(var ra=[],ub=[],H=[],ia=[],Ba=[],rb=[],sc=0;sc<da.length;sc++){var yc=vb.computeRefPoints(da[sc].bounds());Ba.push(yc);var Gd=yc.right,Ld=yc.top,Ke=yc.bottom;ra.push(yc.left);ub.push(Gd);H.push(Ld);ia.push(Ke)}for(sc=0;sc<da.length;sc++)rb.push(vb.closest(sc,
da,Ba,ra,ub,H,ia));return rb};vb.fun=lb;vb.pt=Eb;vb.Color=Wb;vb.morph=Qb;vb.cachedGuideLines=new WeakMap;vb.guideWidth=1;vb.guideColor=vb.Color.orange.lighter();vb.removeSnapToGuidesOf=I;vb.removeSnapToGuidesOf=I;vb.showAndSnapToGuides=T;vb.showAndSnapToGuides=T;vb.showAndSnapToResizeGuides=ta;vb.showAndSnapToResizeGuides=ta;vb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ia=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ia.Morph=Bd;Ia.Label=Fc;Ia.StyleSheet=wd;Ia.HorizontalLayout=
Kc;Ia.Path=Gc;Ia.Text=Yc;Ia.GridLayout=jd;Ia.morph=Qb;Ia.Icon=Dd;Ia.createMorphSnapshot=od;Ia.Color=Wb;Ia.pt=Eb;Ia.rect=Zc;Ia.Rectangle=Ra;Ia.LinearGradient=tb;Ia.obj=dc;Ia.PropertyPath=bc;Ia.promise=Xc;Ia.properties=Oc;Ia.num=$b;Ia.arr=zc;Ia.connect=Fb;Ia.signal=Cb;Ia.disconnect=pc;Ia.disconnectAll=Pc;Ia.once=wb;Ia.showAndSnapToGuides=T;Ia.showAndSnapToResizeGuides=ta;Ia.removeSnapToGuidesOf=I;Ia.haloBlue=Ia.Color.rgb(23,160,251);Ia.componentAccent=Ia.Color.magenta;Ia.derivedAccent=Ia.Color.purple;
var Rb=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("Halo")&&"function"===typeof ra.Halo?ra.Halo:ra.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ia.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Ia.morph({name:"border-box",fill:Ia.Color.transparent,borderColor:this.target.isComponent?Ia.componentAccent:Ia.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",value:function(H){if(!Ia.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ia.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();
H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,ia=H.visibleBounds(),Ba=this.target.globalBounds(),rb=Ba.insetBy(-36).intersection(ia);ia=Ba.intersection(ia);this.layout&&this.layout.disable();this.setBounds(rb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ia));this.state.activeButton?(this.buttonControls.forEach(function(sc){return sc.visible=
!1}),this.ensureResizeHandles().forEach(function(sc){return sc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(sc){return sc.visible=!0}),this.buttonControls.forEach(function(sc){sc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(sc){return sc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ia.disconnect(H,"onChange",this,"alignWithTarget"),Ia.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Ia.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();db._get(Object.getPrototypeOf(ub.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ia.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ia.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ia.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ia.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ia.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ia.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ia.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Ia.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ia.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ia.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ia.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ia.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",
value:function(H){var ia=this,Ba,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){return 1==sc.nextAddress?(Ba=ia.world(),rb=ia.target.isMorphSelection?ia.target.selectedMorphs:[ia.target],ia.remove(),sc.yield(Ba.showHaloForSelection([].concat($jscomp.arrayFromIterable(rb),[H]),ia.state.pointerId),2)):sc.return(sc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var ia=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress){Ba=
ia.world();ia.remove();if(!ia.target.isMorphSelection)return rb.jumpTo(0);Ia.arr.remove(ia.target.selectedMorphs,H);return rb.yield(Ba.showHaloForSelection(ia.target.selectedMorphs,ia.state.pointerId),3)}return rb.return(rb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,ia,Ba,rb,sc){var yc={topLeft:Ia.rect(-1,-1,1,1),topCenter:ia?Ia.rect(1,-1,0,1):Ia.rect(0,-1,0,
1),topRight:Ia.rect(0,-1,1,1),rightCenter:ia?Ia.rect(0,1,1,1):Ia.rect(0,0,1,0),bottomRight:Ia.rect(0,0,1,1),bottomCenter:ia?Ia.rect(1,0,0,1):Ia.rect(0,0,0,1),bottomLeft:Ia.rect(-1,0,1,1),leftCenter:ia?Ia.rect(-1,1,1,0):Ia.rect(-1,0,1,0)}[H];sc=yc.x;var Gd=yc.y,Ld=yc.width;yc=yc.height;Ba=ia?this.proportionalDelta(H,Ba,rb):Ba;H=Ia.rect(Ba.x*sc,Ba.y*Gd,Ba.x*Ld,Ba.y*yc);this.active=!0;this.target.setBounds(rb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,ia,Ba){var rb=Ba.width,sc=Ba.height;Ba={topLeft:Ia.pt(-1,-1),topCenter:Ia.pt(0,-1),topRight:Ia.pt(1,-1),leftCenter:Ia.pt(-1,0),rightCenter:Ia.pt(1,0),bottomLeft:Ia.pt(-1,1),bottomCenter:Ia.pt(0,1),bottomRight:Ia.pt(1,1)};var yc=rb/Math.max(rb,sc),Gd=sc/Math.max(sc,rb);rb={topLeft:Ia.pt(-yc,-Gd),topCenter:Ia.pt(1/(2*sc/rb),-1),topRight:Ia.pt(yc,-Gd),leftCenter:Ia.pt(-1,sc/(2*rb)),rightCenter:Ia.pt(1,sc/(3*rb)),bottomLeft:Ia.pt(-yc,
Gd),bottomCenter:Ia.pt(1/(2*sc/rb),1),bottomRight:Ia.pt(yc,Gd)};Ba=Ba[H];return rb[H].scaleBy(Ba.dotProduct(ia)/Ba.dotProduct(Ba))}},{key:"ensureResizeHandles",value:function(){return Ia.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,ia){if(!Ia.rect(0).sides.includes(ia)){var Ba=this.getSubmorphNamed("diagonal");
if(H){H=this.target.globalBounds();var rb=H.width,sc=H.height;H=this.localize(Ia.pt(H.x,H.y)).extent(Ia.pt(rb,sc)).scaleRectTo(this.innerBounds());rb={topLeft:[Ia.pt(rb,sc),Ia.pt(0,0)],topRight:[Ia.pt(0,sc),Ia.pt(rb,0)],bottomRight:[Ia.pt(0,0),Ia.pt(rb,sc)],bottomLeft:[Ia.pt(rb,0),Ia.pt(0,sc)]};Ba?Ba.setBounds(H):(Ba=$jscomp.makeIterator(rb[ia]),ia=Ba.next().value,Ba=Ba.next().value,rb=new Ia.LinearGradient({stops:[{offset:0,color:Ia.Color.orange.withA(0)},{offset:.2,color:Ia.Color.orange},{offset:.8,
color:Ia.Color.orange},{offset:1,color:Ia.Color.orange.withA(0)}]}),Ba=this.addMorphBack(new Ia.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:rb,vertices:[ia,Ba]})),Ba.setBounds(H),Ba.animate({opacity:1,duration:500}))}else Ba&&Ba.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,ia){var Ba=this.getSubmorphNamed("rotationIndicator");H&&ia?(H=this.getSubmorphNamed("origin").center,Ba=Ba||this.addMorphBack(new Ia.Path({name:"rotationIndicator",
borderColor:Ia.haloBlue,borderWidth:1,vertices:[]})),Ba.setBounds(ia.bounds().union(this.innerBounds())),Ba.vertices=[Ba.localizePointFrom(H,this),Ba.localizePointFrom(ia.center,this)]):Ba&&Ba.remove()}},{key:"toggleMorphHighlighter",value:function(H,ia,Ba){Ba=void 0===Ba?!1:Ba;if(ia.onHaloGrabover)ia.onHaloGrabover(H);else Ba=Ia.MorphHighlighter.for(this,ia,Ba),H&&ia&&ia!=this.world()?Ba&&Ba.show(ia):Ba&&Ba.deactivate()}},{key:"onMouseDown",value:function(H){var ia=H.state.clickedOnMorph;if(!H.isCommandKey()&&
ia==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(ia==this.borderBox&&H.isCommandKey()){var Ba=H.world.morphsContainingPoint(H.position).filter(function(rb){return rb.halosEnabled});(Ba=Ba.slice(Ba.indexOf(this.target)+1)[0]||Ba[0]||H.world)&&H.world.showHaloFor(Ba,H.domEvt.pointerId);
this.remove()}ia==this&&H.isCommandKey()&&(Ba=this.morphBeneath(H.position),H.world.showHaloFor(Ba,H.domEvt.pointerId));ia==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(ia){return ia.onKeyUp(H)})}},{key:"getMesh",value:function(H,ia){var Ba=H.x;H=H.y;ia=void 0===ia?Ia.pt(0,0):ia;var rb=this.world().visibleBounds(),sc=rb.height;rb=rb.width;var yc={borderStyle:"dotted",borderWidth:2,borderColor:Ia.Color.orange};yc=this.get("mesh")||this.addMorph(new Ia.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ia.pt(rb,sc),fill:null,submorphs:[new Ia.Path(Object.assign({name:"vertical"},yc)),new Ia.Path(Object.assign({name:"horizontal"},yc))]}));yc.globalPosition=ia;yc.getSubmorphNamed("vertical").vertices=[Ia.pt(Ba,0).subPt(ia),Ia.pt(Ba,sc).subPt(ia)];yc.getSubmorphNamed("horizontal").vertices=[Ia.pt(0,H).subPt(ia),Ia.pt(rb,H).subPt(ia)];return yc}}],[{key:"className",get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ia.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ia.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var ia=!!this.state.target;
this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;ia&&this.alignWithTarget();Ia.connect(H,"onChange",this,"alignWithTarget");Ia.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:16994})}(Ia.Morph);Rb=Ia.Halo;
var Jc=sa("H",Rb);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof ra.HaloPropertyDisplay?ra.HaloPropertyDisplay:ra.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(H){var ia=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ia.bounds())&&(this.position=Ia.pt(ia.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:"className",get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",
get:function(){return Ia.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ia.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ia.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ia.Color.white},position:{defaultValue:this.defaultPosition}}}}],
ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17185,end:18532})})(Ia.Label);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof ra.MultiSelectionTarget?ra.MultiSelectionTarget:ra.MultiSelectionTarget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(ia){return ia.globalBounds()}).reduce(function(ia,Ba){return ia.union(Ba)});this.setBounds(H)}},{key:"onGrab",
value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ia.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ia.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ia.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var ia=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ba){return Ba.resizeBy(ia)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var ia=
H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ba){return Ba.moveBy(ia)})}}},{key:"updateRotation",value:function(H){var ia=this,Ba=H.value-H.prevValue;this.selectedMorphs.forEach(function(rb){var sc=rb.origin;rb.adjustOrigin(rb.localize(ia.worldPoint(Ia.pt(0,0))));rb.rotation+=Ba;rb.adjustOrigin(sc)})}},{key:"updateScale",value:function(H){var ia=this,Ba=H.value-H.prevValue;this.selectedMorphs.forEach(function(rb){var sc=rb.origin;rb.adjustOrigin(rb.localize(ia.worldPoint(Ia.pt(0,
0))));rb.scale+=Ba;rb.adjustOrigin(sc)})}},{key:"onChange",value:function(H){db._get(Object.getPrototypeOf(ub.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:"className",get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18600,end:20818})})(Ia.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("HaloItem")&&"function"===typeof ra.HaloItem?
ra.HaloItem:ra.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:"className",get:function(){return"HaloItem"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ia.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ia.pt(24,24)},halo:{}}}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20984,end:21661})})(Ia.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("NameHolder")&&"function"===typeof ra.NameHolder?ra.NameHolder:ra.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&
(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ia.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ia.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),H.stop()):db._get(Object.getPrototypeOf(ub.prototype),"onKeyDown",
this).call(this,H)}},{key:"onMouseUp",value:function(){Ia.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ia.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var ia=this.target.owner;this.validName=!ia||!ia.getSubmorphNamed(H)||this.target.name==H;Ia.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&
(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Ia.signal(this,"active",[!1,this])}}],
[{key:"className",get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ia.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ia.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ia.Text({fill:Ia.Color.transparent,
fontColor:Ia.Color.white,fontWeight:"bold",active:!0}));Ia.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21698,end:24232})})(Ia.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("NameHaloItem")&&
"function"===typeof ra.NameHaloItem?ra.NameHaloItem:ra.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){db._get(Object.getPrototypeOf(ub.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initNameHolders();this.validityIndicator=Ia.Icon.makeLabel("check",{fontColor:Ia.Color.green,fontSize:15,padding:Ia.rect(4,
6,4,0)});this.fill=this.halo.target.isComponent?Ia.componentAccent:Ia.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(ia){ia=new Ia.NameHolder({halo:H.halo,highlightOnHover:ia.highlightOnHover,
target:ia.target});Ia.connect(ia,"active",H,"toggleActive");Ia.connect(ia,"valid",H,"toggleNameValid");return ia});this.submorphs=Ia.arr.interpose(this.nameHolders,{extent:Ia.pt(1,28),fill:Ia.Color.black.withA(.4)})}},{key:"toggleActive",value:function(H){H=$jscomp.makeIterator(H);var ia=H.next().value,Ba=H.next().value;this.halo.changingName!==ia&&((this.halo.changingName=ia)?(this.nameHolders.forEach(function(rb){return rb!=Ba&&rb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ia.Color.darkGray,setTimeout(function(){return Ba.nameHolder.selectAll()})):(this.fill=Ia.haloBlue,this.nameHolders.forEach(function(rb){return rb!=Ba&&rb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(H){var ia=$jscomp.makeIterator(H);H=ia.next().value;ia=ia.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=Ia.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Ia.Color.green,Ia.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ia),this.borderColor=Ia.Color.red,this.validityIndicator.fontColor=Ia.Color.red,this.validityIndicator.nativeCursor="pointer",Ia.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ia.arr.zip(this.targets(),this.nameHolders).map(function(ia){var Ba=$jscomp.makeIterator(ia);ia=Ba.next().value.target;Ba=Ba.next().value;Ba.target=
ia;Ba.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ia.pt(0,2));this.topCenter=Ia.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var ia=this,Ba=this.conflictingMorph;Ba&&(this.halo.toggleMorphHighlighter(!0,Ba),setTimeout(function(){return ia.halo.toggleMorphHighlighter(!1,Ba)},1E3))}}],[{key:"className",get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Ia.haloBlue},borderColor:{defaultValue:Ia.Color.green},layout:{initialize:function(){this.layout=new Ia.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24234,end:27401})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
ub=ra.hasOwnProperty("CloseHaloItem")&&"function"===typeof ra.CloseHaloItem?ra.CloseHaloItem:ra.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"update",value:function(){var H=this.halo,ia=H.target.owner;ia.undoStart("close-halo");H.target.selectedMorphs?H.target.selectedMorphs.forEach(function(Ba){return Ba.remove()}):H.target.remove();ia.undoStop("close-halo");H.remove()}},{key:"onMouseDown",
value:function(H){this.update()}}],[{key:"className",get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27404,end:28010})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("GrabHaloItem")&&"function"===typeof ra.GrabHaloItem?ra.GrabHaloItem:ra.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"adjustTarget",value:function(H,ia){Ia.PropertyPath("owner.layout.autoResize").get(H)&&
!H.globalBounds().insetBy(10).containsPoint(ia)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,ia=this.halo,Ba=this.prevDropTarget,rb=H.world(),sc=H.findDropTarget(H.globalPosition,[ia.target],function(yc){return!yc.isHaloItem&&!yc.ownerChain().some(function(Gd){return Gd.isHaloItem||!Gd.visible||0==Gd.opacity})});sc=this.adjustTarget(sc,H.globalPosition);ia.toggleMorphHighlighter(sc&&sc!=rb,sc,!0);Ba&&Ba!=sc&&ia.toggleMorphHighlighter(!1,Ba);return(this.prevDropTarget=
sc)&&sc.name}},{key:"init",value:function(H){var ia=this.halo,Ba=ia.target.undoStart("grab-halo");Ba&&Ba.addTarget(ia.target.owner);this.hand=H;ia.target.onGrab({halo:ia,hand:H,isShiftDown:function(){return!1}});ia.state.activeButton=this;this.opacity=.3;var rb=Ia.connect(H,"update",this,"update");Ia.once(ia.target,"remove",function(){return rb.disconnect()})}},{key:"stop",value:function(H){var ia=this.halo,Ba=this.prevDropTarget,rb=ia.target.undoInProgress,sc=H.hand.findDropTarget(H.hand.globalPosition,
[ia.target],function(yc){return!yc.isHaloItem&&!yc.ownerChain().some(function(Gd){return Gd.isHaloItem})});sc=this.adjustTarget(sc,H.hand.globalPosition);Ia.disconnect(H.hand,"update",this,"update");Ia.MorphHighlighter.interceptDrop(ia,sc,ia.target);rb.addTarget(sc);sc.onDrop(H);ia.state.activeButton=null;ia.alignWithTarget();ia.toggleMorphHighlighter(!1,Ba);Ia.MorphHighlighter.removeHighlighters(ia);ia.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:"className",get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28013,end:30518})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("DragHaloItem")&&"function"===typeof ra.DragHaloItem?ra.DragHaloItem:ra.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(H){var ia=this.halo.getSubmorphNamed("mesh");if(H)return ia=this.halo.getMesh(this.halo.target.worldPoint(Ia.pt(0,0))),this.focus(),ia;ia&&ia.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);Ia.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,ia,Ba){ia=void 0===ia?!1:ia;Ba=void 0===Ba?!1:Ba;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));ia&&(H=H.griddedBy(Ia.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(ia);ia||Ia.showAndSnapToGuides(this.halo.target,!0,Ba,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta,H.isAltDown(),
H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:"className",get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],ra,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30521,end:32332})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("InspectHaloItem")&&"function"===typeof ra.InspectHaloItem?ra.InspectHaloItem:ra.InspectHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){var ia=this;(function(){var Ba,rb,sc,yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gd){if(1==Gd.nextAddress)return Gd.yield(System.import("lively.ide/js/inspector.js"),2);Ba=Gd.yieldResult;rb=Ba.default;(sc=ia.world().getSubmorphsByStyleClassName("Inspector").find(function(Ld){return Ld.targetObject==ia.halo.target}))&&(yc=sc.getWindow())?(yc.minimized=!1,yc.animate({center:ia.world().visibleBounds().center(),
duration:200})):rb.openInWindow({targetObject:ia.halo.target});ia.halo.remove();Gd.jumpToEnd()})})()}}],[{key:"className",get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32335,end:33237})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("EditHaloItem")&&"function"===typeof ra.EditHaloItem?ra.EditHaloItem:ra.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,
da,[{key:"onMouseDown",value:function(H){var ia=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ba){return Ba.target==ia.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:"className",get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33240,end:34022})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("RotateHaloItem")&&"function"===
typeof ra.RotateHaloItem?ra.RotateHaloItem:ra.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){db._get(Object.getPrototypeOf(ub.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",
H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ia.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();
this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ia.num.toRadians(Ia.num.detent(Ia.num.toDegrees(H),
10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var ia=this.scaleGauge,Ba=this.halo;ia||(ia=this.scaleGauge=H.scaleBy(1/Ba.target.scale));this.angle=H.theta();this.initRotation=Ba.target.rotation;Ba.target.scale=Ia.num.detent(H.dist(Ia.pt(0,0))/ia.dist(Ia.pt(0,0)),.1,.5);Ba.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());
H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Ia.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());
this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:"className",get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34024,end:37468})})(Ia.HaloItem);Ia.nameNumberRe=/(.+)([0-9]+)$/;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("ComponentHaloItem")&&"function"===typeof ra.ComponentHaloItem?ra.ComponentHaloItem:ra.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"updateComponentIndicator",
value:function(){var H=this.world(),ia=this.halo.target;this.halo.remove();H.showHaloFor(ia)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:"className",get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=
this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37510,end:38256})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("CopyHaloItem")&&"function"===typeof ra.CopyHaloItem?
ra.CopyHaloItem:ra.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"init",value:function(H){function ia(Ke,hd){return hd.match(Ia.nameNumberRe)?hd.replace(Ia.nameNumberRe,function(Md,ze,Ne){Ne||(Ne="0");for(Md=Number(Ne);Ke.get(ze+ ++Md););return ze+Md}):hd+"1"}var Ba=this.halo,rb=Ba.target,sc=Ba.world(),yc=rb instanceof Ia.MultiSelectionTarget;Ba.remove();Ia.connect(H,"update",this,
"update");if(yc){var Gd=rb.selectedMorphs.map(function(Ke){return sc.addMorph(Ke.copy())});yc=Gd.map(function(Ke){Ke.name=ia(rb,Ke.name);return Ke.position});Gd[0].undoStart("copy-halo");sc.addMorph(Ba);Ba.refocus(Gd);H.grab(Ba.target);Ba.target.onGrab({halo:Ba,hand:H,isShiftDown:function(){return!1}});yc.forEach(function(Ke,hd){return Gd[hd].globalPosition=Ke});Ba.alignWithTarget()}else{yc=rb.globalPosition;var Ld=rb.copy();rb.isComponent&&(Ld.isComponent=!1,Ld.withAllSubmorphsDoExcluding(function(Ke){Ke!=
Ld&&Ke.master||delete Ke._parametrizedProps},function(Ke){return Ke.master&&Ke!=Ld}),Ld.master=rb);Ld.name=ia(rb,rb.name);sc.addMorph(Ld);Ld.globalPosition=yc;Ld.undoStart("copy-halo");H.grab(Ld);sc.addMorph(Ba);Ba.visible=!1}}},{key:"stop",value:function(H){var ia=this.halo,Ba=$jscomp.makeIterator(H.grabbedMorphs).next().value,rb=H.findDropTarget(H.globalPosition,[ia.target],function(yc){return!yc.isHaloItem&&!yc.ownerChain().some(function(Gd){return Gd.isHaloItem})}),sc=ia.target.undoInProgress;
Ia.disconnect(H,"update",this,"update");sc.addTarget(rb);H.dropMorphsOn(rb);ia.target.undoStop("copy-halo");ia.remove();H.world().showHaloFor(Ba)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,ia,Ba,rb,sc,yc,Gd,Ld,Ke,hd,Md,ze,Ne,yf,tf,vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:ia=
H;Ba=ia.halo;if(Ba.nameHalo().nameHolders.find(function(mf){return mf.nameHolder===$world.focusedMorph}))return Fe.return();rb=Ba.target;sc=Ba.world();yc=rb instanceof Ia.MultiSelectionTarget;Gd=rb.globalBounds().topLeft();Ld=yc?rb.selectedMorphs:[rb];Ke=[];hd='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Ba.remove();Fe.setCatchFinallyBlocks(2);
Md=$jscomp.makeIterator(Ld);ze=Md.next();case 4:if(ze.done)return hd+="</body></html>",tf=JSON.stringify(Ke),Fe.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:hd},{type:"application/morphic",data:tf}]),8);Ne=ze.value;return Fe.yield(Ia.createMorphSnapshot(Ne,{addPreview:!1,testLoad:!1}),7);case 7:yf=Fe.yieldResult;yf.copyMeta={offset:Ne.worldPoint(Ia.pt(0,0)).subPt(Gd)};Ke.push(yf);hd+=Ne.renderPreview();ze=Md.next();Fe.jumpTo(4);break;case 8:Fe.leaveTryBlock(3);break;case 2:return vc=
Fe.enterCatchBlock(),sc.logError(vc),Fe.return();case 3:sc.addMorph(Ba),Ba.refocus(Ld),Ba.setStatusMessage("copied"),Fe.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var ia=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){H.stop();return Ba.yield(ia.copyToClipBoard(),0)})}}],[{key:"className",get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},
styleClasses:{defaultValue:["far","fa-clone"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38258,end:42247})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("OriginHaloItem")&&"function"===typeof ra.OriginHaloItem?
ra.OriginHaloItem:ra.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"fill",get:function(){return Ia.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ia.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",
value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var ia=this.halo,Ba=ia.target.origin,rb=ia.target.worldPoint(Ba);
H=ia.target.localize(rb.addPt(H)).subPt(ia.target.scroll).subPt(Ba);ia.target.adjustOrigin(ia.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:"className",get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ia.componentAccent:Ia.haloBlue}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42250,end:43881})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
ub=ra.hasOwnProperty("ResizeHandle")&&"function"===typeof ra.ResizeHandle?ra.ResizeHandle:ra.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,ia=H.y;return H.x.toFixed(1)+"x"+ia.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ia.Rectangle.prototype.sides.includes(this.location)&&
(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",
value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,ia){ia=void 0===ia?!1:ia;var Ba=this.halo.target,rb=Ba.origin,sc=Ba.position;Ba=Ba.extent;this.startPos=H;this.startBounds=sc.subPt(rb).extent(Ba);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();
H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ia.num.toRadians(H%45);this.halo.toggleDiagonal(ia,this.corner)}},{key:"update",value:function(H,ia,Ba,rb){ia=void 0===ia?!1:ia;Ba=void 0===Ba?!1:Ba;rb=void 0===rb?!1:rb;var sc=this.corner,yc=this.tfm;H=this.startPos.subPt(H);yc=yc.transformDirection(Ia.pt(H.x,H.y));Ba&&(yc=yc.griddedBy(Ia.pt(10,10)));this.halo.updateBoundsFor(sc,ia,yc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ia,sc);this.updateAlignmentGuide(Ba);
ia=[];sc=sc.toLowerCase();sc.includes("left")&&ia.push("left");sc.includes("top")&&ia.push("top");sc.includes("bottom")&&ia.push("bottom");sc.includes("right")&&ia.push("right");Ia.showAndSnapToResizeGuides(this.halo.target,ia,!0,rb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ia.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var ia=this.halo.getSubmorphNamed("mesh");
if(H)return H=this.halo.target.extent,H=Ia.pt(H.x%10,H.y%10),ia=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),ia;ia&&ia.remove()}}],[{key:"className",get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ia.arr.zip(Ia.arr.rotate([["topLeft",
function(ia){return ia.negated()}],["topCenter",function(ia){return ia.withX(0).negated()}],["topRight",function(ia){return ia.withX(0).negated()}],["rightCenter",function(ia){return Ia.pt(0,0)}],["bottomRight",function(ia){return Ia.pt(0,0)}],["bottomCenter",function(ia){return Ia.pt(0,0)}],["bottomLeft",function(ia){return ia.withY(0).negated()}],["leftCenter",function(ia){return ia.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize",
"rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var ia=this;if(!H.target)return[];var Ba=H.target.getGlobalTransform().getRotation();return Ia.arr.compact(this.getResizeParts(Ba).map(function(rb){var sc=$jscomp.makeIterator(rb),yc=$jscomp.makeIterator(sc.next().value);rb=yc.next().value;yc.next();yc.next();yc=$jscomp.makeIterator(sc.next().value);sc=yc.next().value;yc=yc.next().value;
return ia.for(H,rb,yc,sc)})).map(function(rb){return rb.alignInHalo()})}},{key:"for",value:function(H,ia,Ba,rb){var sc="Resize "+ia;H=H.getSubmorphNamed(sc)||new this({name:sc,halo:H,corner:ia,tooltip:"Resize "+ia,extent:Ia.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ia.componentAccent:Ia.haloBlue,fill:Ia.Color.white});return Object.assign(H,{nativeCursor:rb,location:Ba})}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43941,end:49204})})(Ia.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("MenuHaloItem")&&"function"===typeof ra.MenuHaloItem?ra.MenuHaloItem:ra.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,
da,[{key:"onMouseDown",value:function(H){var ia=this,Ba,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){if(1==sc.nextAddress)return Ba=ia.halo.target,ia.halo.remove(),sc.yield(Ba.menuItems(),2);rb=sc.yieldResult;Ba.world().openMenu(rb).hasFixedPosition=ia.halo.hasFixedPosition;sc.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},
styleClasses:{defaultValue:["fas","fa-bars"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49207,end:49718})})(Ia.HaloItem);var Rc=sa("M",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("MorphHighlighter")&&"function"===typeof ra.MorphHighlighter?
ra.MorphHighlighter:ra.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=
this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&
this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:"className",get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ia.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Ia.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var ia=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Ba){return{type:"ellipse",isHaloItem:!0,fill:Ia.Color.orange,center:ia.innerBounds()[Ba]()}});this.addMorph({type:"label",name:"name tag",padding:Ia.Rectangle.inset(5,5,5,5),fontColor:Ia.Color.white,fill:Ia.Color.orange,
borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var ia=H._morphHighlighters,Ba;for(Ba in ia)ia[Ba].remove();delete H._morphHighlighters}},{key:"for",value:function(H,ia,Ba,rb){Ba=void 0===Ba?!1:Ba;rb=void 0===rb?[]:rb;var sc=H._morphHighlighters=H._morphHighlighters||{};Ia.properties.forEachOwn(sc,
function(yc,Gd){return Gd.alignWithHalo()});if(!ia||ia.ownerChain().find(function(yc){return yc.isHaloItem}))return null;sc[ia.id]=sc[ia.id]||new this({targetId:ia.id,halo:H,showLayout:Ba});H.addMorph(sc[ia.id]);sc[ia.id].highlightedSides=rb;return sc[ia.id]}},{key:"interceptDrop",value:function(H,ia,Ba){(H=H._morphHighlighters=H._morphHighlighters||{},H[ia.id])&&H[ia.id].handleDrop(Ba)}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49908,end:53420})}(Ia.Morph));Ia.MorphHighlighter=Rc;Ia.MorphHighlighter=Rc;Ia.MorphHighlighter=Rc;var xc=sa("I",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ub=ra.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof ra.InteractiveMorphSelector?ra.InteractiveMorphSelector:ra.InteractiveMorphSelector=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H,ia,Ba){H=void 0===H?$world:H;this.controllingMorph=void 0===ia?null:ia;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=H;this.filterFn=Ba;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ia.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=
H.promise;this.selectorMorph=Ia.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ia.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ia.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ia.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();
var ia=this.selectorMorph.morphBeneath(H),Ba,rb=this.possibleTarget,sc=this.controllingMorph,yc=this.filterFn,Gd=this.world,Ld=this.morphHighlighter;for(Ld==ia?ia=Ld.morphBeneath(H):ia&&ia.isEpiMorph&&(ia=ia.morphBeneath(H));ia&&(Ba=[ia].concat($jscomp.arrayFromIterable(ia.ownerChain())).find(function(Ke){return!Ke.visible}));)ia=Ba=Ba.morphBeneath(H);if(ia&&yc&&!yc(ia))for(;ia&&![ia].concat($jscomp.arrayFromIterable(ia.ownerChain())).find(yc);)ia=ia.morphBeneath(H);!ia||ia==rb||sc&&ia.ownerChain().includes(sc.getWindow())||
(Ld&&Ld.deactivate(),(this.possibleTarget=rb=ia)&&!rb.isWorld&&(H=this.morphHighlighter=Ia.MorphHighlighter.for(Gd,ia))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ia.MorphHighlighter.removeHighlighters(this.world);Ia.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:"className",get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(H,ia,Ba){H=new this(H,ia,Ba);H.selectNewTarget();return H.whenDone}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53429,end:56174})}(void 0));Ia.InteractiveMorphSelector=xc;Ia.InteractiveMorphSelector=xc;Ia.InteractiveMorphSelector=xc;Ia.default=Rb;var Fa=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Fa.show=Ca;Fa.showRect=function(da,ra,ub){var H=Fa.BoundsMarker.highlightBounds(ra);return ub?Fa.showInLoop(da,H,ra):Fa.showThenHide(da,H)};Fa.showInLoop=function(da,ra,ub){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:return Fa.showThenHide(da,ra,!1),ia.yield(Fa.promise.delay(300),2);case 2:H=!1,Fa.once(da,"onMouseDown",function(){return H=!0});case 3:if(H){ia.jumpTo(4);break}return ia.yield(ra.retract(ub),
3);case 4:ra.fadeOut(2E3),ia.jumpToEnd()}})};Fa.showThenHide=function(da,ra,ub){ub=void 0===ub?3:ub;if(da){var H=Array.isArray(ra)?ra:[ra];H.forEach(function(ia){return da.addMorph(ia)});ub&&setTimeout(function(){return H.forEach(function(ia){return ia.fadeOut(2E3)})},1E3*ub);return ra}};Fa.showLine=function(da,ra,ub){ub=void 0===ub?3E3:ub;var H=ra.start;ra=ra.end.subPt(H);var ia=da.addMorph({position:H,rotation:ra.theta(),border:{width:1,color:Fa.Color.red},width:ra.fastR(),height:0});ub&&setTimeout(function(){return ia.fadeOut()},
ub);return ia};Fa.showConnector=Mb;Fa.obj=dc;Fa.promise=Xc;Fa.string=Ta;Fa.pt=Eb;Fa.Color=Wb;Fa.Rectangle=Ra;Fa.rect=Zc;Fa.morph=Qb;Fa.easings=cb;Fa.Path=Gc;Fa.Icon=Dd;Fa.Morph=Bd;Fa.MorphicEnv=ma;Fa.connect=Fb;Fa.once=wb;Fa.disconnect=pc;Fa.show=Ca;Fa.show=Ca;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ub=ra.hasOwnProperty("BoundsMarker")&&"function"===typeof ra.BoundsMarker?ra.BoundsMarker:ra.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(){db._get(Object.getPrototypeOf(ub.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Fa.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/
2-5:H/10))}},{key:"createMarkerEdge",value:function(){return Fa.morph({fill:Fa.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ia=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ba=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),rb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),sc=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),yc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Gd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Ld=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,ia,Ba,rb,sc,yc,Gd,Ld]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));
return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,ia){var Ba=this.ensureMarkerCorners(),rb=this.markerLength(H),sc=[H.topLeft().addXY(0,0).extent(Fa.pt(rb,5)),H.topLeft().addXY(0,0).extent(Fa.pt(5,rb)),H.topRight().addXY(-rb,0).extent(Fa.pt(rb,5)),H.topRight().addXY(-5,0).extent(Fa.pt(5,rb)),H.bottomRight().addXY(-5,-rb).extent(Fa.pt(5,rb)),H.bottomRight().addXY(-rb,-5).extent(Fa.pt(rb,5)),H.bottomLeft().addXY(0,-5).extent(Fa.pt(rb,5)),H.bottomLeft().addXY(0,-rb).extent(Fa.pt(5,
rb))];Ba.forEach(function(yc,Gd){return yc.setBounds(sc[Gd])});ia&&(this.adjustOrigin(H.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var ia=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return rb.yield(ia.animate({scale:Math.max(30/H.width,1.05)}),2);Ba=ia.center;return rb.yield(ia.animate({center:Ba,scale:1,duration:300,easing:Fa.easings.inOutExpo}),0)})}}],[{key:"className",
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2261,end:5920})})(Fa.Morph);Rb=sa("S",function(da){var ra=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ub=ra.hasOwnProperty("StatusMessage")&&"function"===typeof ra.StatusMessage?ra.StatusMessage:ra.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"relayout",value:function(){this.title=Fa.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(H,ia){this.message=H;this.color=ia}},{key:"slideTo",value:function(H){var ia=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia.sliding=ia.animate({position:H,duration:500}),Ba.yield(ia.sliding,2);ia.sliding=!1;Ba.jumpToEnd()})}},{key:"expand",value:function(){var H=this,ia,Ba,rb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yc){if(1==yc.nextAddress)return H.expandable?H.sliding?yc.yield(H.sliding,2):
yc.jumpTo(2):yc.return();ia=H.world();if(!ia||H.isMaximized)return yc.return();H.isMaximized=!0;H.stayOpen=!0;Ba=H.getSubmorphNamed("message text");Ba.lineWrapping=!1;Object.assign(Ba,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Ba.value=H.expandedContent);Ba.fit();rb=Ba.textBounds().extent();sc=ia.visibleBounds();rb.y>sc.extent().y&&(rb.y=sc.extent().y-20);rb.x>sc.extent().x&&(rb.x=sc.extent().x-20);rb=H.extent.maxPt(rb);H.animate({extent:rb,center:sc.center(),duration:200});
H.relayout();H.focus();yc.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");H&&(this.extent=Fa.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:"className",get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Fa.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},
isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var ia=this.getSubmorphNamed("message text");if(ia){ia.value=H;var Ba=ia.documentEndPosition;Ba.row>this.maxLines&&(ia.replace({start:{row:this.maxLines,column:0},end:Ba},"...\n"),this.expandedContent||
(this.expandedContent=H));Ba=ia.documentEndPosition;0!==Ba.column&&ia.insertText("\n",Ba)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Fa.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Fa.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Fa.connect(this,"extent",this,"relayout")}}}}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Fa.Morph));Fa.StatusMessage=Rb;Fa.StatusMessage=Rb;Fa.StatusMessage=Rb;var nc=sa("b",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ub=ra.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof ra.StatusMessageForMorph?ra.StatusMessageForMorph:ra.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return db(ub,da,[{key:"alignAtBottomOf",value:function(H){var ia=this.world();ia&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=ia.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(Fa.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:"className",get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var ia=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Fa.connect(ia,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Fa.disconnect(ia,"fire",this,"expand"))}}}}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Fa.StatusMessage));Fa.StatusMessageForMorph=nc;Fa.StatusMessageForMorph=nc;Fa.StatusMessageForMorph=nc;Fa.showConnector=Mb;Fa.showConnector=
Mb;var $a=lively.FreezerRuntime.recorderFor("lively.ide/index.js");$a.info="import via sub modules";$a.info="import via sub modules";$a.info="import via sub modules";var Pa=sa("v",{});$a.valueWidgets=Pa;$a.valueWidgets=Pa;$a.valueWidgets=Pa;var Oa=sa("p",{});$a.popovers=Oa;$a.popovers=Oa;$a.popovers=Oa;var Kb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Kb.Morph=Bd;Kb.VerticalLayout=La;Kb.StyleSheet=wd;Kb.Icon=Dd;Kb.CustomLayout=fb;Kb.Color=Wb;Kb.rect=Zc;Kb.pt=Eb;Kb.connect=Fb;
Kb.Path=bc;Kb.duration=300;$a=sa("P",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),ub=ra.hasOwnProperty("Popover")&&"function"===typeof ra.Popover?ra.Popover:ra.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"relayout",value:function(H){var ia=this.get("body"),Ba=this.get("arrow"),rb=this.get("close button");Ba=Ba.height;H?(ia.animate({topCenter:Kb.pt(0,
Ba),duration:200}),rb.animate({topRight:ia.topRight.addXY(8,-8),duration:200})):(ia.topCenter=Kb.pt(0,Ba),rb.topRight=ia.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:"className",get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Kb.pt(200,
200),fill:Kb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var ia=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return ia.relayout()})}},submorphs:{initialize:function(){var H=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Kb.pt(0,0),borderColor:Kb.Color.transparent,vertices:[Kb.pt(-10,0),Kb.pt(0,-15),Kb.pt(10,0)]},{name:"body"},{name:"close button",
type:"button",label:Object.assign(Kb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Kb.pt(16,16),borderColor:Kb.Color.transparent}];var ia=$jscomp.makeIterator(this.submorphs);ia.next();var Ba=ia.next().value;ia=ia.next().value;Kb.connect(ia,"fire",this,"close");Kb.connect(Ba,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=!0},1E3)}}}}}],ra,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Kb.Morph));Kb.Popover=$a;Kb.Popover=$a;Kb.Popover=$a;var Ib=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Ib.Morph=Bd;Ib.TilingLayout=pb;Ib.morph=Qb;Ib.Label=Fc;Ib.HorizontalLayout=Kc;Ib.Icon=Dd;Ib.InputLine=xb;Ib.config=Wa;Ib.connect=Fb;Ib.signal=Cb;Ib.Color=Wb;Ib.LinearGradient=tb;Ib.pt=Eb;Ib.rect=Zc;Ib.num=$b;Ib.obj=
dc;Ib.popovers=Oa;Ib.ValueScrubber=Xa;Ib.Popover=$a;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof ra.ContextSensitiveWidget?ra.ContextSensitiveWidget:ra.ContextSensitiveWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,void 0,[{key:"className",get:function(){return"ContextSensitiveWidget"}},
{key:"properties",get:function(){return{fill:{defaultValue:Ib.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ib.Color.white:Ib.Color.black}},layout:{initialize:function(){this.layout=new Ib.HorizontalLayout}},context:{serialize:!1}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(Ib.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("ShortcutWidget")&&"function"===typeof ra.ShortcutWidget?ra.ShortcutWidget:ra.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},
{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:"className",get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ia){return ia.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=
[Ib.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Ib.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Ib.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:2441,end:3667})})(Ib.ContextSensitiveWidget);Oa=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("LayoutWidget")&&"function"===typeof ra.LayoutWidget?ra.LayoutWidget:ra.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=new Ib.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),container:H.context}),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"layoutChanged",H,"layoutChanged");Ib.signal(H,"openWidget",ia);Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"LayoutWidget"}},
{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(Ib.ShortcutWidget);
Ib.LayoutWidget=Oa;Ib.LayoutWidget=Oa;Ib.LayoutWidget=Oa;$a=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("ColorWidget")&&"function"===typeof ra.ColorWidget?ra.ColorWidget:ra.ColorWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"relayout",value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():
this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var ia;for(ia in this.color.stops){var Ba=H.stops[ia];var rb=Ba.color,sc=Ba.offset,yc=$jscomp.makeIterator(this.submorphs[2+2*ia].submorphs).next().value;Ba=this.submorphs[3+2*ia];yc.fill=rb;Ba.value=(100*sc).toFixed()+"%"+(ia<H.stops.length-1?",":"")}}else this.submorphs=
this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Ib.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Ib.pt(15,
15),fill:Ib.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Ib.pt(5,7.5),fill:Ib.Color.white,borderColor:Ib.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Ib.pt(0,0),Ib.pt(10,10)],borderColor:Ib.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Ib.pt(15,15),fill:Ib.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Ib.pt(5,7.5),fill:this.color,borderColor:Ib.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Ib.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=this.color,ia=[{type:"label",padding:Ib.rect(0,0,5,0),value:"linearGradient"==H.type?Ib.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ba;for(Ba in H.stops){var rb=H.stops[Ba],sc=rb.color;rb=rb.offset;ia.push({extent:Ib.pt(this.fontSize,
this.fontSize),fill:Ib.Color.transparent,layout:new Ib.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:sc}]});ia.push({type:"label",padding:Ib.rect(0,0,5,0),value:(100*rb).toFixed()+"%"+(Ba<H.stops.length-1?",":"")})}return ia}},{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=
new Ib.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"fillValue",H,"update");Ib.signal(H,"openWidget",ia);Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Ib.HorizontalLayout({direction:"centered"})}},
selectionFontColor:{defaultValue:Ib.Color.white},nonSelectionFontColor:{defaultValue:Ib.Color.black},color:{defaultValue:Ib.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Ib.connect(this,
"color",this,"relayout",{converter:function(H,ia){return(ia&&ia.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4557,end:9992})}(Ib.ContextSensitiveWidget);Ib.ColorWidget=$a;Ib.ColorWidget=$a;Ib.ColorWidget=$a;var bd=function(da){var ra=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("BooleanWidget")&&"function"===typeof ra.BooleanWidget?ra.BooleanWidget:ra.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){this.boolean=!this.boolean}}],[{key:"className",get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Ib.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=Ib.obj.safeToString(H);this.fontColor=this.boolean?Ib.Color.green:Ib.Color.red}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(Ib.Label);Ib.BooleanWidget=
bd;Ib.BooleanWidget=bd;Ib.BooleanWidget=bd;var Od=sa("N",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("NumberWidget")&&"function"===typeof ra.NumberWidget?ra.NumberWidget:ra.NumberWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){db._get(Object.getPrototypeOf(ub.prototype),"onMouseDown",this).call(this,
H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Ib.obj.dissoc(db._get(Object.getPrototypeOf(ub.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,ia){ia=void 0===ia?!0:ia;this.setProperty("number",ia?H/this.scaleFactor:H);Ib.signal(this,"number",this.number);this.relayout(ia)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),ia=this.getSubmorphNamed("down");this.getSubmorphNamed("value");
H.height=ia.height=(this.height-2)/2;H.width=ia.width=20}},{key:"onChange",value:function(H){db._get(Object.getPrototypeOf(ub.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(H){var ia=this.getSubmorphNamed("value");ia&&(this.autofit?(H||(ia.value=this.number*this.scaleFactor),ia.fit(),this.height=ia.height,this.width=ia.width+20):H||(ia.width=this.width-20),this.relayoutButtons(),H||(ia.value=Ib.num.roundTo(this.number*this.scaleFactor,
1),ia.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ia.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ia.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:"className",get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{},
autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);
return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:Ib.rect(5,3,0,0),after:["submorphs"],set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:Ib.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},
styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:Ib.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",
isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",H)}},layout:{initialize:function(){this.layout=new Ib.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var H=this;this.submorphs=[new Ib.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),Ib.Icon.makeLabel("sort-up",
{name:"up"}),Ib.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Ib.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16340})}(Ib.Morph));Ib.NumberWidget=
Od;Ib.NumberWidget=Od;Ib.NumberWidget=Od;var Zd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("ShadowWidget")&&"function"===typeof ra.ShadowWidget?ra.ShadowWidget:ra.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==
Ba.nextAddress)return ia=new Ib.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),shadowValue:H.shadowValue}),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"shadowValue",H,"shadowValue");Ib.connect(H,"shadowValue",H,"update");Ib.signal(H,"openWidget",ia);Ba.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():
this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,ia=H.blur,Ba=H.spread,rb=H.distance;H=H.color;var sc=$jscomp.makeIterator(this.submorphs),yc=sc.next().value,Gd=sc.next().value;Gd=$jscomp.makeIterator(Gd.submorphs).next().value;sc=sc.next().value;yc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Gd.fill=H;sc.value=", "+
ia+"px, "+rb+"px, "+Ba+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,ia=H.blur,Ba=H.spread,rb=H.distance;H=H.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Ib.morph({fill:Ib.Color.transparent,extent:Ib.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Ib.pt(this.fontSize,this.fontSize),position:Ib.pt(2,2),fill:H,borderColor:Ib.Color.black,borderWidth:1}]}),{name:"valueString",
type:"label",opacity:.7,reactsToPointer:!1,value:", "+ia+"px, "+rb+"px, "+Ba+"px)"}]}}],[{key:"className",get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",H);this.renderShadowDisplay()}},fill:{defaultValue:Ib.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ia){return ia.fontColor=
H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ib.Color.white:Ib.Color.black}},layout:{initialize:function(){this.layout=new Ib.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:16349,end:19359})}(Ib.Morph);Ib.ShadowWidget=Zd;Ib.ShadowWidget=Zd;Ib.ShadowWidget=Zd;var Te=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("PointWidget")&&"function"===typeof ra.PointWidget?ra.PointWidget:ra.PointWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",
value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=new Ib.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition})}),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"pointValue",H,"pointValue");Ib.signal(H,"openWidget",ia);Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",
set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Ib.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ib.Color.black},fontFamily:{defaultValue:Ib.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var ia=Ib.Color.rgbHex("#0086b3");this.setProperty("pointValue",
H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:ia},",",{},H.y.toFixed(),{fontColor:ia},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19368,end:20996})}(Ib.Label);
Ib.PointWidget=Te;Ib.PointWidget=Te;Ib.PointWidget=Te;var Qc=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("PaddingWidget")&&"function"===typeof ra.PaddingWidget?ra.PaddingWidget:ra.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=
this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=new Ib.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),rectangle:H.rectangle}),ia.relayout(),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"rectangle",H,"rectangle");Ib.signal(H,"openWidget",ia);Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Ib.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ib.Color.white:Ib.Color.black}},rectangle:{defaultValue:Ib.rect(0),set:function(H){this.setProperty("rectangle",H);this.value=Ib.obj.safeToString(H)}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21005,end:22054})}(Ib.Label);Ib.PaddingWidget=Qc;Ib.PaddingWidget=Qc;Ib.PaddingWidget=Qc;var Xd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("IconWidget")&&"function"===typeof ra.IconWidget?ra.IconWidget:ra.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"onMouseDown",
value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=new Ib.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition})}),Ba.yield(ia.fadeIntoWorld(H.globalBounds().center()),2);Ib.connect(ia,"select",H,"iconValue",{converter:function(rb){return rb&&Ib.Icon.makeLabel(rb).value},varMapping:{Icon:Dd}});Ib.signal(H,"openWidget",
ia);Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Ib.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(H){this.value=H||"No Icon"}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22063,end:22959})}(Ib.Label);Ib.IconWidget=Xd;Ib.IconWidget=Xd;Ib.IconWidget=Xd;var kd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ub=ra.hasOwnProperty("StringWidget")&&"function"===typeof ra.StringWidget?ra.StringWidget:ra.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"truncate",
value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var ia=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return db._get(Object.getPrototypeOf(ub.prototype),"onFocus",ia).call(ia,H),ia.readOnly?rb.return():ia.stringTooLong?rb.yield(ia.world().editPrompt("edit string",{requester:ia,input:ia.stringValue}),2):(ia.borderColor=Ib.Color.white.withA(.9),ia.textString=ia.stringValue,rb.return());Ba=rb.yieldResult;if("string"===
typeof Ba)ia.onInput(Ba);rb.jumpToEnd()})}},{key:"onBlur",value:function(H){db._get(Object.getPrototypeOf(ub.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=Ib.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();Ib.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:"className",get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Ib.Color.transparent},fontColor:{defaultValue:Ib.Color.blue},
nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Ib.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Ib.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},
isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ib.Color.white:Ib.Color.blue}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22968,end:24888})}(Ib.InputLine);Ib.StringWidget=kd;Ib.StringWidget=kd;Ib.StringWidget=kd;Ib.valueWidgets=
Pa;Object.assign(Ib.valueWidgets,{NumberWidget:Od,StringWidget:kd,IconWidget:Xd,PaddingWidget:Qc,ShadowWidget:Zd,PointWidget:Te,BooleanWidget:bd,LayoutWidget:Oa,ColorWidget:$a});var Bb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Bb.Ellipse=Ab;Bb.Icon=Dd;Bb.Morph=Bd;Bb.Path=Gc;Bb.Text=Yc;Bb.HorizontalLayout=Kc;Bb.VerticalLayout=La;Bb.morph=Qb;Bb.Color=Wb;Bb.pt=Eb;Bb.rect=Zc;Bb.Rectangle=Ra;Bb.arr=zc;Bb.connect=Fb;Bb.disconnect=pc;Bb.LabeledCheckBox=kc;Bb.DropDownSelector=Ub;Bb.Button=
qc;Bb.Menu=wc;Bb.NumberWidget=Od;Bb.InteractiveMorphSelector=xc;Bb.easings=cb;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("AxisHalo")&&"function"===typeof ra.AxisHalo?ra.AxisHalo:ra.AxisHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ia=H.halo;H=H.targetAxis;db._get(Object.getPrototypeOf(ub.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,{fill:Bb.Color.transparent,halo:ia,targetAxis:H,container:ia.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=
H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=
!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,ia=this,Ba=this.proportionViewer();return this.halo.addGuide(new Bb.Morph({nativeCursor:this.getResizeCursor(),fill:Bb.Color.transparent,submorphs:[this.devider(),Ba],alignWithTarget:function(){this.setBounds(ia.getProportionSliderBounds(this))},onDragStart:function(){Ba.visible=!0},onDrag:function(rb){H.adjustStretch(H.getDelta(rb));
H.halo.alignWithTarget()},onDragEnd:function(){Ba.visible=!1}}))}},{key:"devider",value:function(){return new Bb.Morph({visible:!this.lastAxis,fill:Bb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=this,ia=this,Ba=this.minSpaceVisualizer(),rb=this.minViewer();return this.halo.addGuide(new Bb.Ellipse({nativeCursor:this.getResizeCursor(),fill:Bb.Color.green,extent:Bb.pt(10,10),visible:!1,submorphs:[Ba,rb],becomesActiveOnHover:!0,
alignWithTarget:function(){this.position=ia.getMinSliderPosition()},requestToShow:function(){this.visible=!ia.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ia.forceMenuHidden=!0;rb.visible=!0;this.active=Ba.visible=!0},onDrag:function(sc){H.targetAxis.min+=-H.getDelta(sc);H.halo.alignWithTarget()},onDragEnd:function(){ia.forceMenuHidden=!1;rb.visible=!1;this.active=Ba.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},
{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Bb.Path(Object.assign({position:Bb.pt(-1,-1),borderStyle:"dashed",borderColor:Bb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var H=this,ia=this.minSpaceBorder();return this.halo.addGuide(new Bb.Morph({fill:Bb.Color.green.withA(.1),
visible:!1,isHaloItem:!0,submorphs:[ia],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=Bb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),ia=this.menuButton(),Ba=this;return new Bb.Morph({layout:this.getMenuLayout(),submorphs:[H,ia],fill:Bb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ba.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new Bb.Morph({fill:Bb.Color.transparent,
extent:Bb.pt(25,25),submorphs:[{center:Bb.pt(12.5,12.5),fill:Bb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=Bb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Bb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,
ia=this;return new Bb.Morph({fill:Bb.Color.transparent,extent:Bb.pt(25,25),submorphs:[{fill:Bb.Color.transparent,styleClasses:["fa","fa-cog"],center:Bb.pt(12.5,12.5)}],onMouseDown:function(Ba){ia.forceMenuVisible=!0;this.addMorph(Ba.state.menu=new Bb.Menu({position:Bb.pt(15,15),items:[["Remove "+ia.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ia.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],
["Insert "+ia.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var ia=H.position;H=H.alignWithTarget;return this.halo.addGuide(new Bb.Text({styleClasses:["Halo"],padding:Bb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Bb.Color.white,fill:Bb.Color.black.withA(.5),position:ia,alignWithTarget:H,readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),
alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:"className",get:function(){return"AxisHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(Bb.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
ub=ra.hasOwnProperty("RowHalo")&&"function"===typeof ra.RowHalo?ra.RowHalo:ra.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ia=H.row;H=H.halo;db._get(Object.getPrototypeOf(ub.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.row(ia),halo:H})}},{key:"subject",get:function(){return"row"}},
{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Bb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Bb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.height?Bb.pt(2,5):Bb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Bb.VerticalLayout}},
{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Bb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Bb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Bb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Bb.pt(this.container.width+50,2),vertices:[Bb.pt(0,1),Bb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Bb.pt(40,
20)}},{key:"getProportionSliderBounds",value:function(H){return Bb.pt(0,H.owner.height-5).extent(Bb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Bb.pt(15,4).extent(Bb.pt(25,2))}}],[{key:"className",get:function(){return"RowHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:7981,end:9208})})(Bb.AxisHalo);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("ColumnHalo")&&"function"===typeof ra.ColumnHalo?ra.ColumnHalo:ra.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ia=H.col;H=H.halo;db._get(Object.getPrototypeOf(ub.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:H.target.col(ia),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Bb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Bb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>
H.width?Bb.pt(5,3):Bb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Bb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Bb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Bb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Bb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Bb.pt(2,this.container.height+
50),vertices:[Bb.pt(1,0),Bb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Bb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return Bb.pt(H.owner.width-5,0).extent(Bb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Bb.pt(4,15).extent(Bb.pt(2,25))}}],[{key:"className",get:function(){return"ColumnHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Bb.AxisHalo);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("CellGuide")&&"function"===typeof ra.CellGuide?ra.CellGuide:ra.CellGuide=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"menuItems",
value:function(){var H=this,ia=Bb.Icon.textAttribute("check-square-o"),Ba=Bb.Icon.textAttribute("square-o");ia[1].textStyleClasses.push("annotation");Ba[1].textStyleClasses.push("annotation");Ba[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ba:ia)),function(){H.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ia:Ba)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Bb.Rectangle).sides),
$jscomp.arrayFromIterable((new Bb.Rectangle).corners)).map(function(rb){return[[rb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==rb?ia:Ba),["  ",null]),function(){return H.cellGroup.align=rb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var rb=H.cellGroup.morph;rb&&(H.world().firstHand.grab(rb),H.world().firstHand.longClickGrab=!0,rb.position=Bb.pt(0))}]]:[])}}],[{key:"className",get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],
ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Bb.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("LayoutHalo")&&"function"===typeof ra.LayoutHalo?ra.LayoutHalo:ra.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,void 0,[{key:"className",get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Bb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(Bb.Morph);Pa=sa("G",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("GridLayoutHalo")&&"function"===typeof ra.GridLayoutHalo?ra.GridLayoutHalo:ra.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return db(ub,da,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(ia){return ia.fullContainsWorldPoint($world.firstHand.position)}),H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var ia=this;this.currentCell&&H.whenRendered().then(function(){return ia.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var H=this.target,ia=new Bb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Bb.Color.transparent,checked:H.compensateOrigin}),Ba=new Bb.LabeledCheckBox({label:"Resize Submorphs",fill:Bb.Color.transparent,name:"fitToCell",checked:H.fitToCell});Bb.connect(ia,"checked",H,"compensateOrigin");Bb.connect(Ba,"checked",H,"fitToCell");Bb.connect(ia,"checked",this,"alignWithTarget");return[ia,Ba]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Bb.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var H=this;Bb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ia){return ia.cellGroup})).forEach(function(ia){return H.addMorph(H.cellGuide(ia))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var H=this,ia=this.addMorph({fill:Bb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ba){ia.addMorph(H.cellGuide(Ba))});this.cellGuides=ia.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",
value:function(){var H=this,ia=this;this.addGuide(this.addMorph(new Bb.Morph({width:25,fill:Bb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Bb.pt(-5,0),alignWithTarget:function(){this.height=ia.container.height}})));Bb.arr.range(0,this.target.rowCount-1).forEach(function(Ba){H.addMorph(new Bb.RowHalo({row:Ba,halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,ia=this;this.addGuide(this.addMorph(new Bb.Morph({height:25,fill:Bb.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:Bb.pt(0,-5),alignWithTarget:function(){this.width=ia.container.width}})));Bb.arr.range(0,this.target.columnCount-1).forEach(function(Ba){H.addMorph(new Bb.ColumnHalo({col:Ba,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new Bb.Morph({fill:Bb.Color.transparent,extent:Bb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ia){H.container.resizeBy(ia.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
H.extent}}))}},{key:"cellResizer",value:function(H,ia){var Ba=this,rb="topLeft"==ia?"bottomRight":"topLeft";return new Bb.Ellipse({borderWidth:1,visible:!1,borderColor:Bb.Color.black,nativeCursor:"nwse-resize",removeCell:function(sc){H.disconnect(sc);Ba.alignWithTarget()},addCell:function(sc){H.connect(sc);Ba.alignWithTarget()},start:function(){this.fixpointCell=H[rb];this.draggedDelta=H.bounds().partNamed(ia);this.debugMorph=Ba.addMorph(new Bb.Morph({fill:Bb.Color.orange.withA(.5)}))},update:function(sc){var yc=
this;this.draggedDelta=this.draggedDelta.addPt(sc);var Gd=Bb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Gd);Ba.cells.forEach(function(Ld){var Ke=Gd.intersection(Ld.bounds()).area()/Ld.bounds().area();H.includes(Ld)&&.1>Ke&&yc.removeCell(Ld);!H.includes(Ld)&&Ke>1/3&&yc.addCell(Ld)})},onDragEnd:function(sc){this.debugMorph.remove()},onDragStart:function(sc){this.start(sc.position)},onDrag:function(sc){this.update(sc.state.dragDelta)}})}},{key:"cellGuide",
value:function(H){var ia=this,Ba=this.cellResizer(H,"topLeft"),rb=this.cellResizer(H,"bottomRight");return this.addGuide(new Bb.CellGuide({cellGroup:H,bounds:H.bounds(),fill:Bb.Color.transparent,borderColor:Bb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ba,rb],onMouseDown:function(sc){this.becomeActive()},deactivate:function(){this.borderColor=Bb.Color.orange;this.fill=Bb.Color.transparent;this.submorphs.forEach(function(sc){sc.visible=!1})},becomeActive:function(){ia.guides.forEach(function(sc){sc.isCell&&
sc.deactivate()});this.borderColor=Bb.Color.rgbHex("#1565C0");this.fill=Bb.Color.rgbHex("#1565C0").withA(.3);ia.addMorph(this.remove());this.submorphs.forEach(function(sc){sc.visible=!0})},startPreview:function(sc){this.fill=Bb.Color.orange.withA(.7)},stopPreview:function(sc){this.fill=Bb.Color.transparent},onDrop:function(sc){var yc=$jscomp.makeIterator(sc.hand.grabbedMorphs).next().value;sc.hand.dropMorphsOn(ia.container);H.morph=yc},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),
Ba.center=this.innerBounds().topLeft(),rb.center=this.innerBounds().bottomRight()):(Bb.arr.remove(ia.guides,this),this.remove())}}))}}],[{key:"className",get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Bb.Color.transparent},cells:{derived:!0,get:function(){return Bb.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Bb.LayoutHalo));Bb.GridLayoutHalo=Pa;Bb.GridLayoutHalo=Pa;Bb.GridLayoutHalo=Pa;Oa=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof ra.TilingLayoutHalo?ra.TilingLayoutHalo:ra.TilingLayoutHalo=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"remove",value:function(){db._get(Object.getPrototypeOf(ub.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},
{key:"previewDrop",value:function(H){var ia=this;0<this.previews.length||(this.previews=H.map(function(Ba){return ia.container.addMorph({type:Bb.DropPreview,bounds:Ba.bounds()})}),this.previews.forEach(function(Ba){Ba.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,ia=new Bb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:H.axis,values:["row","column"]}),Ba=new Bb.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});H=new Bb.NumberWidget({min:0,number:H.spacing,padding:Bb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Bb.Color.gray,unit:"px"});Bb.connect(H,"update",this,"updateSpacing");Bb.connect(Ba,"update",this,"updateAlign");Bb.connect(ia,"update",this,"updateAxis");var rb={type:"label",padding:Bb.rect(0,5,5,5),fill:Bb.Color.transparent,fontColor:Bb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},rb,{textString:"Submorph Spacing"}),H],[Object.assign({},rb,{textString:"Tiling Align"}),Ba],[Object.assign({},rb,{textString:"Tiling Axis"}),ia]].map(function(sc){return{submorphs:sc,fill:null,layout:new Bb.HorizontalLayout({spacing:3})}})}}],[{key:"className",get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Bb.Color.transparent},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Bb.LayoutHalo);Bb.TilingLayoutHalo=Oa;Bb.TilingLayoutHalo=Oa;Bb.TilingLayoutHalo=Oa;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("DropPreview")&&"function"===typeof ra.DropPreview?ra.DropPreview:ra.DropPreview=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ia=Bb.easings.inOutQuad,Ba.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:ia}),2);if(3!=Ba.nextAddress)return Ba.yield(H.animate({opacity:1,duration:(H.pulseDuration-
10)/2,easing:ia}),3);H.stopped||H.step();Ba.jumpToEnd()})}}],[{key:"className",get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Bb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Bb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Bb.Morph);Oa=sa("F",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof ra.FlexLayoutHalo?ra.FlexLayoutHalo:ra.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",value:function(H){var ia=this;0<this.previews.length||(this.previews=H.map(function(Ba){return ia.container.addMorph({type:Bb.DropPreview,position:ia.container.localize(ia.world().firstHand.position),extent:Ba.bounds().extent()})}),this.previews.forEach(function(Ba){Ba.step()}))}},{key:"remove",value:function(){db._get(Object.getPrototypeOf(ub.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"optionControls",value:function(){var H=this.target,ia=H.possibleAlignValues?{fill:Bb.Color.transparent,layout:new Bb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Bb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:H.align,values:H.possibleAlignValues})]}:null,Ba=H.possibleDirectionValues?{fill:Bb.Color.transparent,layout:new Bb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Bb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:
null,rb=new Bb.NumberWidget({fill:Bb.Color.white,borderWidth:1,borderRadius:4,padding:Bb.rect(5,4,0,0),borderColor:Bb.Color.gray,min:0,number:H.spacing,unit:"px"}),sc=new Bb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Bb.Color.transparent,checked:H.autoResize});H=new Bb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Bb.Color.transparent,checked:H.resizeSubmorphs});Bb.connect(rb,"update",this,"updateSpacing");Bb.connect(sc,
"checked",this,"updateAutoResizePolicy");Bb.connect(H,"checked",this,"updateResizeSubmorphsPolicy");ia&&Bb.connect(ia.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Ba&&Bb.connect(Ba.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[sc,H].concat($jscomp.arrayFromIterable([ia,Ba].filter(Boolean)),[{fill:Bb.Color.transparent,layout:new Bb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Bb.Color.gray.darker(),padding:Bb.rect(0,5,5,5)},rb]}])}}],
[{key:"className",get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Bb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,
end:26761})}(Bb.LayoutHalo));Bb.FlexLayoutHalo=Oa;Bb.FlexLayoutHalo=Oa;Bb.FlexLayoutHalo=Oa;$a=sa("c",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ub=ra.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof ra.ProportionalLayoutHalo?ra.ProportionalLayoutHalo:ra.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return db(ub,da,[{key:"handleDrop",value:function(H){}},
{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(H){var ia={};this.target.changeSettingsFor(H.submorph,(ia[H.axis]=H.policy,ia),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,ia){var Ba=this;H.stop();var rb=this.target.settingsFor(ia);ia="";for(var sc in rb)ia+=sc+":"+rb[sc]+" ";var yc=Bb.morph({type:"label",value:ia,
isLayoutable:!1});yc.wantsToBeDroppedOn=function(Gd){return Ba.target.layoutableSubmorphs.includes(Gd)};yc.onBeingDroppedOn=function(Gd,Ld){yc.remove();if(Gd=Ba.target.layoutableSubmorphs.includes(Ld)?Ld:H.world.morphsContainingPoint(H.hand.position).find(function(Ke){return Ba.target.layoutableSubmorphs.includes(Ke)}))Ba.updateSubmorphProportionalLayoutSettings({policy:rb.x,axis:"x",submorph:Gd}),Ba.updateSubmorphProportionalLayoutSettings({policy:rb.y,axis:"y",submorph:Gd}),Gd.show(),$world.setStatusMessage("layout settings applied")};
H.hand.grab(yc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,ia,Ba,rb,sc,yc,Gd,Ld,Ke,hd,Md,ze,Ne;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yf){switch(yf.nextAddress){case 1:return ia=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(rb=ia.map(function(tf){return{isListItem:!0,string:String(tf),value:tf}}),yf.yield($world.listPrompt("Select morph",rb,{requester:H,onSelection:function(tf){return tf.show()}}),5)):yf.yield(Bb.InteractiveMorphSelector.selectMorph(H.world(),
H,function(tf){return ia.includes(tf)}),4);case 4:Ba=yf.yieldResult;yf.jumpTo(3);break;case 5:sc=yf.yieldResult,yc=$jscomp.makeIterator(sc.selected),Ba=yc.next().value;case 3:if(!Ba)return yf.return();Gd=H.state.popover.get("controlContainer");Ld=Gd.getAllNamed(/submorph config/);Ke=["move","resize","scale","fixed"];hd=H.target.settingsFor(Ba);Ld.length||(Gd.submorphs=[].concat($jscomp.arrayFromIterable(Gd.submorphs),[{name:"submorph config X-Axis policy",position:Bb.pt(0,H.height),fill:Bb.Color.transparent,
layout:new Bb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Bb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:hd.x,values:Ke})]},{name:"submorph config Y-Axis policy",position:Bb.pt(0,H.height),fill:Bb.Color.transparent,layout:new Bb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Bb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:hd.y,values:Ke})]},Bb.morph({position:Bb.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Md=Gd.getSubmorphNamed("x-axis policy selector");ze=Gd.getSubmorphNamed("y-axis policy selector");Ne=Gd.getSubmorphNamed("dragme");Bb.disconnect(Md,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Bb.disconnect(ze,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Md.selectedValue=hd.x;ze.selectedValue=hd.y;Bb.connect(Ne,
"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(tf,vc){return tf(vc,Ba)},varMapping:{submorph:Ba}});Bb.connect(Md,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(tf){return{policy:tf,axis:"x",submorph:Ba}},varMapping:{submorph:Ba}});Bb.connect(ze,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(tf){return{policy:tf,axis:"y",submorph:Ba}},varMapping:{submorph:Ba}});yf.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=
H;var ia=this.target;H=new Bb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Bb.Color.transparent,checked:ia.xAxisEnabled});ia=new Bb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Bb.Color.transparent,checked:ia.yAxisEnabled});var Ba=new Bb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Bb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Bb.connect(H,"checked",this,"updateXAxisEnabled");
Bb.connect(ia,"checked",this,"updateYAxisEnabled");Bb.connect(Ba,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ba]}}],[{key:"className",get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Bb.Color.transparent}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Bb.LayoutHalo));Bb.ProportionalLayoutHalo=$a;Bb.ProportionalLayoutHalo=$a;Bb.ProportionalLayoutHalo=$a;bd=lively.FreezerRuntime.recorderFor("lively.halos/index.js");bd.Halo=Jc;bd.MorphHighlighter=Rc;bd.InteractiveMorphSelector=xc;bd.StatusMessage=Rb;bd.StatusMessageForMorph=nc;bd.show=Ca;bd.showConnector=Mb;bd.ProportionalLayoutHalo=$a;bd.GridLayoutHalo=Pa;bd.FlexLayoutHalo=Oa;bd.showAndSnapToGuides=T;bd.removeSnapToGuidesOf=
I;bd.StatusMessage=Rb;bd.StatusMessage=Rb;bd.StatusMessageForMorph=nc;bd.StatusMessageForMorph=nc;bd.show=Ca;bd.show=Ca;bd.showConnector=Mb;bd.showConnector=Mb;bd.Halo=Jc;bd.Halo=Jc;bd.MorphHighlighter=Rc;bd.MorphHighlighter=Rc;bd.InteractiveMorphSelector=xc;bd.InteractiveMorphSelector=xc;bd.ProportionalLayoutHalo=$a;bd.ProportionalLayoutHalo=$a;bd.GridLayoutHalo=Pa;bd.GridLayoutHalo=Pa;bd.FlexLayoutHalo=Oa;bd.FlexLayoutHalo=Oa;bd.showAndSnapToGuides=T;bd.showAndSnapToGuides=T;bd.removeSnapToGuidesOf=
I;bd.removeSnapToGuidesOf=I;Jc=Object.freeze({__proto__:null,StatusMessage:Rb,StatusMessageForMorph:nc,show:Ca,showConnector:Mb,Halo:Jc,MorphHighlighter:Rc,InteractiveMorphSelector:xc,ProportionalLayoutHalo:$a,GridLayoutHalo:Pa,FlexLayoutHalo:Oa,showAndSnapToGuides:T,removeSnapToGuidesOf:I,SvgStyleHalo:void 0});sa("i",Jc);sa("_",void 0)}}});