System.register(["./__root_module__-590131e3.js"],function(Sa){var Lb,Vb,Fc,jc,sd,kd,Cd,ed,Zc,bd,yd,ke,ue,He,ld,Wd,gc,cd,Bd,hd,Jd,de,Zb,Ic,Ad,Jc,zd,Mb,mb,Bc,xc,ec,Dc,Ta,hc,Eb,tc,Ec,ad,td;return{setters:[function(fc){Lb=fc.f;Vb=fc.b;Fc=fc.C;jc=fc.m;sd=fc.Y;kd=fc.p;Cd=fc.s;ed=fc.R;Zc=fc.$;bd=fc.e;yd=fc.Q;ke=fc.I;ue=fc.M;He=fc.av;ld=fc.c;Wd=fc.o;gc=fc._;cd=fc.i;Bd=fc.O;hd=fc.af;Jd=fc.K;de=fc.ab;Zb=fc.j;Ic=fc.a9;Ad=fc.P;Jc=fc.aw;zd=fc.ac;Mb=fc.a;mb=fc.d;Bc=fc.ax;xc=fc.ay;ec=fc.az;Dc=fc.g;Ta=fc.aA;
hc=fc.W;Eb=fc.aa;tc=fc.aB;Ec=fc.aC;ad=fc.B;td=fc.h}],execute:function(){function fc(Tb){(Tb=ka.cachedGuideLines.get(Tb))&&Tb.forEach(function(Gb){return Gb.remove()})}function zc(Tb,Gb,Pa,ca,Ha){Gb=void 0===Gb?!0:Gb;Pa=void 0===Pa?!0:Pa;ca=void 0===ca?10:ca;Ha=void 0===Ha?100:Ha;if(Gb||Pa){var cb=Tb.owner,Pb=cb.world();cb=cb.getGlobalTransform();var sc=Tb.owner.submorphs.filter(function(Fa){return Fa!==Tb&&!Fa.isEpiMorph&&Fa.visible&&Fa.reactsToPointer}),Xc=ka.findAlignedMorphs(Tb,sc,ca,Ha,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));Ha=[];var Nc=0,Ed=0,Ld=0,Ye=0;cb.e-=Pb.scroll.x;cb.f-=Pb.scroll.y;if(Xc){Xc=$jscomp.makeIterator(Xc);for(var Fe=Xc.next();!Fe.done;Fe=Xc.next()){Fe=$jscomp.makeIterator(Fe.value);Fe.next();var ye=Fe.next().value;Fe=ye.vertical;ye=$jscomp.makeIterator(ye.horizontal);for(var z=ye.next();!z.done;z=ye.next()){z=z.value;var Ke=z.edgeAVal,Ie=z.refPointsA,$d=z.refPointsB,Ze=z.edgeBVal,hf=Math.ceil(ca-z.delta),kf=Math.min(Ie.top,$d.top);Ie=Math.max(Ie.bottom,
$d.bottom);z.maxDist>ca&&(hf-=ca/2);Nc<hf&&(Nc=hf,Ld=Ze-Ke);Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ka.guideWidth,start:cb.transformPoint(ka.pt(Ze,kf)),end:cb.transformPoint(ka.pt(Ze,Ie)),fill:ka.guideColor,guideType:"h",priority:hf})}Fe=$jscomp.makeIterator(Fe);for(ye=Fe.next();!ye.done;ye=Fe.next())ye=ye.value,z=ye.edgeAVal,kf=ye.refPointsA,Ie=ye.refPointsB,Ke=ye.edgeBVal,Ze=Math.ceil(ca-ye.delta),hf=Math.min(kf.left,Ie.left),kf=Math.max(kf.right,Ie.right),ye.maxDist>ca&&(Ze-=
ca/2),Ed<Ze&&Math.abs(Ke-z)<=ca&&(Ed=Ze,Ye=Ke-z),Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ka.guideWidth,start:cb.transformPoint(ka.pt(hf,Ke)),end:cb.transformPoint(ka.pt(kf,Ke)),fill:ka.guideColor,guideType:"v",priority:Ze})}}if(!Nc||!Ed){sc=[Tb].concat($jscomp.arrayFromIterable(sc));z=ka.computeClosestMorphs(sc);ye=z[0];sc=ye.l;Xc=ye.r;Fe=ye.t;ye=ye.b;var yf;if(sc||Xc||Fe||ye){var hg=(sc||Xc||Fe||ye).refPointsA;for(Ke=1;Ke<z.length&&(Ie=z[Ke],Ze=Ie.l,hf=Ie.r,kf=Ie.t,Ie=Ie.b,Nc||
(sc&&Ze&&sc.index!==Ze.index&&Math.abs(Ze.dist-sc.dist)<=ca?yf=Object.assign({neighbor:Ke,direction:"left"},Ze):Xc&&hf&&Xc!==hf.index&&Math.abs(hf.dist-Xc.dist)<=ca&&(yf=Object.assign({neighbor:Ke,direction:"right"},hf))),Ed||(Fe&&kf&&Fe.index!==kf.index&&Math.abs(kf.dist-Fe.dist)<=ca?yf=Object.assign({neighbor:Ke,direction:"top"},kf):ye&&Ie&&ye.index!==Ie.index&&Math.abs(Ie.dist-ye.dist)<=ca&&(yf=Object.assign({neighbor:Ke,direction:"bottom"},Ie))),!yf);Ke++);}if(yf){var qc=yf;ca=qc.direction;kf=
qc.dist;var ji=hg.left;$d=hg.top;var qf=hg.bottom,Sd=hg.right,oe=hg.width,Ma=hg.height;Ie=qc.refPointsA;hg=Ie.left;z=Ie.top;Ke=Ie.bottom;Ze=Ie.right;hf=Ie.width;Ie=Ie.height;var fb=qc.refPointsB,dc=fb.left;qc=fb.top;var za=fb.bottom;fb=fb.right;Sd="left"===ca?ji:"right"===ca?Sd:ji+oe/2;qf="bottom"===ca?qf:"top"===ca?$d:$d+Ma/2;ji="left"===ca?Sd-kf:"right"===ca?Sd+kf:ji+oe/2;kf="bottom"===ca?qf+kf:"top"===ca?qf-kf:$d+Ma/2;$d="left"===ca?fb:"right"===ca?dc:hg+hf/2;oe="bottom"===ca?qc:"top"===ca?za:
z+Ie/2;!Pa||Nc||"right"!==ca&&"left"!==ca||(Nc=10,Ld=(yf.dist-(Xc||sc).dist)*("right"===ca?-1:1),Sd+=Ld,ji+=Ld);!Pa||Ed||"top"!==ca&&"bottom"!==ca||(Ed=10,Ye=((Fe||ye).dist-yf.dist)*("top"===ca?-1:1),qf+=Ye,kf+=Ye);Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:cb.transformPoint(ka.pt("left"===ca?hg:"right"===ca?Ze:hg+hf/2,"bottom"===ca?Ke:"top"===ca?z:z+Ie/2)),end:cb.transformPoint(ka.pt($d,oe)),fill:ka.Color.orange,height:ka.guideWidth,guideType:ca,priority:10},{type:"line",epiMorph:!0,
hasFixedPosition:!0,start:cb.transformPoint(ka.pt(Sd,qf)),end:cb.transformPoint(ka.pt(ji,kf)),fill:ka.Color.orange,height:ka.guideWidth,guideType:ca,priority:10})}}Pa&&(Ld||Ye)&&Tb.moveBy(ka.pt(Ld,Ye));if(Gb){Ha=Ha.filter(function(Fa){var Na=Fa.guideType;Fa=Fa.priority;return"h"===Na?Fa===Nc:"v"===Na?Fa===Ed:!0});(Gb=ka.cachedGuideLines.get(Tb))||ka.cachedGuideLines.set(Tb,Gb=[]);for(Pa=0;Pa<Ha.length;Pa++)yf=void 0,Gb[Pa]?yf=Object.assign(Gb[Pa],Ha[Pa]):(yf=ka.morph(Ha[Pa]),Gb.push(yf)),yf.owner||
Pb.addMorph(yf);Gb.slice(Pa).forEach(function(Fa){return Fa.remove()});ka.fun.debounceNamed(Tb.id+"-drag-guides-cleanup",1300,function(){var Fa=ka.cachedGuideLines.get(Tb);Fa&&Fa.forEach(function(Na){return Na.remove()})})()}}}function ac(Tb,Gb,Pa,ca,Ha,cb){Pa=void 0===Pa?!0:Pa;ca=void 0===ca?!0:ca;Ha=void 0===Ha?5:Ha;cb=void 0===cb?100:cb;if(Pa||ca){var Pb=Tb.owner,sc=Pb.world(),Xc=Pb.getGlobalTransform(),Nc=Tb.owner.submorphs.filter(function(qf){return qf!==Tb&&!qf.isEpiMorph&&qf.visible&&qf.reactsToPointer});
Pb=(Gb.includes("left")||Gb.includes("right")?"x":"")+(Gb.includes("top")||Gb.includes("bottom")?"y":"");var Ed=ka.findMorphsWithSimilarWidthOrHeight(Tb,Pb,Nc,Ha,cb),Ld=-Infinity,Ye=-Infinity,Fe=0,ye=0,z=0,Ke=0,Ie=0,$d=0;Pb=[];Xc.e-=sc.scroll.x;Xc.f-=sc.scroll.y;if(Ed){Ed=$jscomp.makeIterator(Ed);for(var Ze=Ed.next();!Ze.done;Ze=Ed.next()){Ze=$jscomp.makeIterator(Ze.value);Ze.next();var hf=Ze.next().value;Ze=hf.similarIn;var kf=hf.delta,yf=hf.refPointsA,hg=hf.refPointsB;hf=Ha-kf+(cb-hf.minDist);"width"===
Ze?Ld<hf&&(Ld=hf,Gb.includes("left")&&(ye=-kf),Gb.includes("right")&&(Fe=kf)):Ye<hf&&(Ye=hf,Gb.includes("top")&&(z=-kf),Gb.includes("bottom")&&(Ke=kf));kf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:ka.guideWidth,fill:ka.guideColor,guideType:Ze,priority:hf,start:Xc.transformPoint("width"===Ze?ka.pt(yf.left,yf.top+yf.height/2):ka.pt(yf.left+yf.width/2,yf.top)),end:Xc.transformPoint("width"===Ze?ka.pt(yf.right,yf.top+yf.height/2):ka.pt(yf.left+yf.width/2,yf.bottom))};Ze=Object.assign({},kf,
{start:Xc.transformPoint("width"===Ze?ka.pt(hg.left,hg.top+hg.height/2):ka.pt(hg.left+hg.width/2,hg.top)),end:Xc.transformPoint("width"===Ze?ka.pt(hg.right,hg.top+hg.height/2):ka.pt(hg.left+hg.width/2,hg.bottom))});Pb.push(kf,Ze)}}if(cb=ka.findAlignedMorphs(Tb,Nc,Ha,cb,Gb,void 0))for(cb=$jscomp.makeIterator(cb),Nc=cb.next();!Nc.done;Nc=cb.next()){Nc=$jscomp.makeIterator(Nc.value);Nc.next();Ed=Nc.next().value;Nc=Ed.vertical;Ed=$jscomp.makeIterator(Ed.horizontal);for(Ze=Ed.next();!Ze.done;Ze=Ed.next()){Ze=
Ze.value;hg=Ze.edgeAVal;var qc=Ze.refPointsA,ji=Ze.refPointsB;kf=Ze.edgeBVal;yf=Math.ceil(Ha-Ze.delta);hf=Math.min(qc.top,ji.top);qc=Math.max(qc.bottom,ji.bottom);Ze.maxDist>Ha&&(yf-=Ha/2);Ie<yf&&(Ie=yf,Gb.includes("left")&&(ye=-(kf-hg)),Gb.includes("right")&&(Fe=+(kf-hg)));Pb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ka.guideWidth,start:Xc.transformPoint(ka.pt(kf,hf)),end:Xc.transformPoint(ka.pt(kf,qc)),fill:ka.guideColor,guideType:"h",priority:yf})}Nc=$jscomp.makeIterator(Nc);for(Ed=
Nc.next();!Ed.done;Ed=Nc.next())Ed=Ed.value,Ze=Ed.edgeAVal,hf=Ed.refPointsA,qc=Ed.refPointsB,hg=Ed.edgeBVal,kf=Math.ceil(Ha-Ed.delta),yf=Math.min(hf.left,qc.left),hf=Math.max(hf.right,qc.right),Ed.maxDist>Ha&&(kf-=Ha/2),$d<kf&&Math.abs(hg-Ze)<=Ha&&($d=kf,Gb.includes("top")&&(z=hg-Ze),Gb.includes("bottom")&&(Ke=hg-Ze)),Pb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ka.guideWidth,start:Xc.transformPoint(ka.pt(yf,hg)),end:Xc.transformPoint(ka.pt(hf,hg)),fill:ka.guideColor,guideType:"v",
priority:kf})}ca&&(ye&&(Tb.left+=ye,Tb.right-=ye),z&&(Tb.top+=z,Tb.bottom-=z),Fe&&(Tb.width+=Fe),Ke&&(Tb.height+=Ke));if(Pa){Pb=Pb.filter(function(qf){var Sd=qf.guideType;qf=qf.priority;return"width"===Sd?qf===Ld:"height"===Sd?qf===Ye:"v"===Sd?qf===$d:"h"===Sd?qf===Ie:!1});(Gb=ka.cachedGuideLines.get(Tb))||ka.cachedGuideLines.set(Tb,Gb=[]);for(Pa=0;Pa<Pb.length;Pa++)ca=void 0,Gb[Pa]?ca=Object.assign(Gb[Pa],Pb[Pa]):(ca=ka.morph(Pb[Pa]),Gb.push(ca)),ca.owner||sc.addMorph(ca);Gb.slice(Pa).forEach(function(qf){return qf.remove()});
ka.fun.debounceNamed(Tb.id+"-drag-guides-cleanup",1300,function(){var qf=ka.cachedGuideLines.get(Tb);qf&&qf.forEach(function(Sd){return Sd.remove()})})()}}}function Oa(Tb,Gb){Gb=void 0===Gb?!1:Gb;var Pa=Ja.MorphicEnv.default().world;if(null===Tb||void 0===Tb)Tb=String(Tb);if(Tb.isMorph)return Ja.showRect(Tb.world(),Tb.globalBounds().translatedBy(Pa.scroll.negated()),Gb);if(Tb.isPoint)return Ja.showRect(Pa,new Ja.Rectangle(Tb.x-5,Tb.y-5,10,10));if(Tb.isLine)return Ja.showLine(Pa,Tb);if(Tb.isRectangle)return Ja.showRect(Pa,
Tb);if("undefined"!==typeof Ja.Element&&Tb instanceof Ja.Element)return Ja.showRect(Pa,Ja.Rectangle.fromElement(Tb));if("number"===typeof Tb||"symbol"===typeof Tb||"boolean"===typeof Tb||"undefined"!==typeof Ja.Node&&Tb instanceof Ja.Node||Tb instanceof RegExp)Tb=String(Tb);"object"===typeof Tb&&(Tb=Ja.obj.inspect(Tb,{maxDepth:1}));return"string"===typeof Tb&&1===arguments.length?Pa.setStatusMessage(Tb):Pa.setStatusMessage(Ja.string.formatFromArray(Array.from(arguments)))}function Da(Tb,Gb,Pa){Pa=
void 0===Pa?3E3:Pa;var ca,Ha,cb,Pb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xc){if(1==Xc.nextAddress){if(!(Tb&&Tb.world()&&Gb&&Gb.world()))return Xc.return(null);ca=Tb.owner.worldPoint(Tb.center);Ha=Gb.owner.worldPoint(Gb.center);cb=ca.lineTo(Ha).sampleN(2)[1];Pb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ja.Color.red,fill:Ja.Color.red,cx:5,cy:5,r:4}]};sc=$world.addMorph(new Ja.Path({position:cb,
renderOnGPU:!0,vertices:[Ja.pt(0),Ja.pt(0)],borderWidth:2,startMarker:Pb,endMarker:Pb,borderColor:Ja.Color.red}));return Xc.yield(sc.whenRendered(),2)}if(3!=Xc.nextAddress)return Xc.yield(sc.animate({opacity:1,customTween:function(Nc){var Ed=sc.center;sc.vertices=[Ja.pt(0).interpolate(Nc,ca.subPt(cb)),Ja.pt(0).interpolate(Nc,Ha.subPt(cb))];sc.center=Ed},duration:400}),3);Pa&&setTimeout(function(){return sc.fadeOut()},Pa);return Xc.return(sc)})}Sa({a:zc,e:Da,r:fc,s:Oa});var ka=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
ka.removeSnapToGuidesOf=fc;ka.showAndSnapToGuides=zc;ka.showAndSnapToResizeGuides=ac;ka.computeRefPoints=function(Tb){var Gb=Tb.x,Pa=Tb.y,ca=Tb.width;Tb=Tb.height;return{left:Gb,top:Pa,hCenter:Gb+ca/2,vCenter:Pa+Tb/2,right:Gb+ca,bottom:Pa+Tb,width:ca,height:Tb}};ka.findEdgesInAlignment=function(Tb,Gb,Pa,ca,Ha,cb,Pb,sc,Xc,Nc){Pa=void 0===Pa?15:Pa;cb=void 0===cb?0:cb;Pb=void 0===Pb?0:Pb;sc=void 0===sc?0:sc;Xc=void 0===Xc?0:Xc;Nc=void 0===Nc?0:Nc;for(var Ed=[],Ld=[],Ye=0;Ye<ka.edges.length;Ye++){var Fe=
$jscomp.makeIterator(ka.edges[Ye]),ye=Fe.next().value,z=Fe.next().value;Fe=Fe.next().value;var Ke=Tb[z],Ie=Gb[Fe],$d=Math.max(Ke,Ie)-Math.min(Ke,Ie);$d>Pa||!(ca&&!ca.includes(z)||Ha&&!Ha.includes(Fe))&&("vertical"===ye?Ed:Ld).push({delta:$d,edgeA:z,edgeB:Fe,edgeAVal:Ke,edgeBVal:Ie,refPointsA:Tb,refPointsB:Gb,distLeft:cb,distTop:Pb,distRight:sc,distBottom:Xc,maxDist:Nc})}return Ed.length||Ld.length?{vertical:Ed,horizontal:Ld}:null};ka.findAlignedMorphs=function(Tb,Gb,Pa,ca,Ha,cb){Pa=void 0===Pa?15:
Pa;ca=void 0===ca?Infinity:ca;for(var Pb,sc=ka.computeRefPoints(Tb.bounds()),Xc=0;Xc<Gb.length;Xc++){var Nc=Gb[Xc];if(Nc!==Tb){var Ed=ka.computeRefPoints(Nc.bounds()),Ld=Math.max(0,sc.left-Ed.right),Ye=Math.max(0,Ed.left-sc.right),Fe=Math.max(0,sc.top-Ed.bottom),ye=Math.max(0,Ed.top-sc.bottom);Math.max(ye,Fe,Ye,Ld)>ca||!(Ed=ka.findEdgesInAlignment(sc,Ed,Pa,Ha,cb,Ld,Fe,Ye,ye,Math.max(ye,Fe,Ye,Ld)))||(Pb||(Pb=new Map),Pb.set(Nc,Ed))}}Tb=Tb.owner;Gb=ka.computeRefPoints(Tb.innerBounds());if(Pa=ka.findEdgesInAlignment(sc,
Gb,Pa))Pb||(Pb=new Map),Pb.set(Tb,Pa);return Pb};ka.findMorphsWithSimilarWidthOrHeight=function(Tb,Gb,Pa,ca,Ha){ca=void 0===ca?15:ca;Ha=void 0===Ha?Infinity:Ha;for(var cb,Pb=ka.computeRefPoints(Tb.bounds()),sc=0;sc<Pa.length;sc++){var Xc=Pa[sc];if(Xc!==Tb){var Nc=ka.computeRefPoints(Xc.bounds()),Ed=Math.max(0,Pb.left-Nc.right),Ld=Math.max(0,Nc.left-Pb.right),Ye=Math.max(0,Pb.top-Nc.bottom),Fe=Math.max(0,Nc.top-Pb.bottom),ye=Math.min(Fe,Ye,Ld,Ed),z=Math.max(Fe,Ye,Ld,Ed);if(!(Math.max(Fe,Ye,Ld,Ed)>
Ha)){Ld=Pb;Ed=Ld.width;Ld=Ld.height;Fe=Nc;Ye=Fe.width;Fe=Fe.height;var Ke=Ye-Ed,Ie=Fe-Ld;("x"===Gb||"xy"===Gb)&&Math.abs(Ke)<=ca&&(cb||(cb=new Map),cb.set(Xc,{similarIn:"width",minDist:ye,maxDist:z,refPointsA:Pb,refPointsB:Nc,valA:Ed,valB:Ye,delta:Ke}));("y"===Gb||"xy"===Gb)&&Math.abs(Ie)<=ca&&(cb||(cb=new Map),cb.set(Xc,{similarIn:"height",minDist:ye,maxDist:z,refPointsA:Pb,refPointsB:Nc,valA:Ld,valB:Fe,delta:Ie}))}}}return cb};ka.closest=function(Tb,Gb,Pa,ca,Ha,cb,Pb,sc){sc=void 0===sc?!0:sc;var Xc=
ca[Tb],Nc=Ha[Tb],Ed=cb[Tb];Gb=Pb[Tb];for(var Ld,Ye,Fe,ye,z=0;z<Ha.length;z++)Tb===z||Xc<Ha[z]||Ld&&Ha[Ld.index]>=Ha[z]||sc&&Pb[Tb]<cb[z]||cb[Tb]>Pb[z]||(Ld={index:z,dist:Xc-Ha[z],refPointsA:Pa[Tb],refPointsB:Pa[z]});for(Xc=0;Xc<ca.length;Xc++)Tb===Xc||Nc>ca[Xc]||Ye&&ca[Ye.index]<=ca[Xc]||sc&&Pb[Tb]<cb[Xc]||cb[Tb]>Pb[Xc]||(Ye={index:Xc,dist:ca[Xc]-Nc,refPointsA:Pa[Tb],refPointsB:Pa[Xc]});for(Nc=0;Nc<Pb.length;Nc++)Tb===Nc||Ed<Pb[Nc]||Fe&&Pb[Fe.index]>=Pb[Nc]||sc&&ca[Tb]>Ha[Nc]||Ha[Tb]<ca[Nc]||(Fe=
{index:Nc,dist:Ed-Pb[Nc],refPointsA:Pa[Tb],refPointsB:Pa[Nc]});for(Pb=0;Pb<cb.length;Pb++)Tb===Pb||Gb>cb[Pb]||ye&&cb[ye.index]<=cb[Pb]||sc&&ca[Tb]>Ha[Pb]||Ha[Tb]<ca[Pb]||(ye={index:Pb,dist:cb[Pb]-Gb,refPointsA:Pa[Tb],refPointsB:Pa[Pb]});return{l:Ld,r:Ye,t:Fe,b:ye}};ka.computeClosestMorphs=function(Tb){for(var Gb=[],Pa=[],ca=[],Ha=[],cb=[],Pb=[],sc=0;sc<Tb.length;sc++){var Xc=ka.computeRefPoints(Tb[sc].bounds());cb.push(Xc);var Nc=Xc.right,Ed=Xc.top,Ld=Xc.bottom;Gb.push(Xc.left);Pa.push(Nc);ca.push(Ed);
Ha.push(Ld)}for(sc=0;sc<Tb.length;sc++)Pb.push(ka.closest(sc,Tb,cb,Gb,Pa,ca,Ha));return Pb};ka.fun=Lb;ka.pt=Vb;ka.Color=Fc;ka.morph=jc;ka.cachedGuideLines=new WeakMap;ka.guideWidth=1;ka.guideColor=ka.Color.orange.lighter();ka.removeSnapToGuidesOf=fc;ka.removeSnapToGuidesOf=fc;ka.showAndSnapToGuides=zc;ka.showAndSnapToGuides=zc;ka.showAndSnapToResizeGuides=ac;ka.showAndSnapToResizeGuides=ac;ka.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top",
"vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var Ba=lively.FreezerRuntime.recorderFor("lively.collab/index.js");Ba.CommentGroupMorph=void 0;Ba.CommentGroupMorph=void 0;Ba.CommentMorph=void 0;Ba.CommentMorph=void 0;Ba.CommentIndicator=void 0;Ba.CommentIndicator=
void 0;Ba.CommentBrowser=void 0;Ba.CommentBrowser=void 0;Ba.Comment=void 0;Ba.Comment=void 0;Ba.Badge=void 0;Ba.Badge=void 0;var Ja=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ja.show=Oa;Ja.showRect=function(Tb,Gb,Pa){var ca=Ja.BoundsMarker.highlightBounds(Gb);return Pa?Ja.showInLoop(Tb,ca,Gb):Ja.showThenHide(Tb,ca)};Ja.showInLoop=function(Tb,Gb,Pa){var ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){switch(Ha.nextAddress){case 1:return Ja.showThenHide(Tb,Gb,!1),
Ha.yield(Ja.promise.delay(300),2);case 2:ca=!1,Ja.once(Tb,"onMouseDown",function(){return ca=!0}),Ja.once(Tb,"hideMarkers",function(){return ca=!0});case 3:if(ca){Ha.jumpTo(4);break}return Ha.yield(Gb.retract(Pa),3);case 4:Gb.fadeOut(2E3),Ha.jumpToEnd()}})};Ja.showThenHide=function(Tb,Gb,Pa){Pa=void 0===Pa?3:Pa;if(Tb){var ca=Array.isArray(Gb)?Gb:[Gb];ca.forEach(function(Ha){return Tb.addMorph(Ha)});Pa&&setTimeout(function(){return ca.forEach(function(Ha){return Ha.fadeOut(2E3)})},1E3*Pa);return Gb}};
Ja.showLine=function(Tb,Gb,Pa){Pa=void 0===Pa?3E3:Pa;var ca=Gb.start;Gb=Gb.end.subPt(ca);var Ha=Tb.addMorph({position:ca,rotation:Gb.theta(),border:{width:1,color:Ja.Color.red},width:Gb.fastR(),height:0});Pa&&setTimeout(function(){return Ha.fadeOut()},Pa);return Ha};Ja.showConnector=Da;Ja.obj=sd;Ja.promise=kd;Ja.string=Cd;Ja.pt=Vb;Ja.Color=Fc;Ja.Rectangle=ed;Ja.rect=Zc;Ja.morph=jc;Ja.easings=bd;Ja.Path=yd;Ja.Icon=ke;Ja.Morph=ue;Ja.MorphicEnv=He;Ja.connect=ld;Ja.once=Wd;Ja.disconnect=gc;Ja.show=Oa;
Ja.show=Oa;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Pa=Gb.hasOwnProperty("BoundsMarker")&&"function"===typeof Gb.BoundsMarker?Gb.BoundsMarker:Gb.BoundsMarker=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(){cd._get(Object.getPrototypeOf(Pa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
{borderWidth:0,fill:Ja.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(ca){ca=ca.insetBy(-2);ca=Math.min(ca.width,ca.height);return Math.max(4,Math.floor(10>ca/10?ca/2-5:ca/10))}},{key:"createMarkerEdge",value:function(){return Ja.morph({fill:Ja.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var ca=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),
Ha=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),cb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Pb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),sc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Xc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Nc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Ed=this.bottomLeftV||(this.bottomLeftV=
this.addMorph(this.createMarkerEdge()));return[ca,Ha,cb,Pb,sc,Xc,Nc,Ed]}},{key:"alignWithMorph",value:function(ca){return this.alignWithBounds(ca.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(ca){this.alignWithRect(ca.insetBy(-20));return this.alignWithRect(ca,!0)}},{key:"alignWithRect",value:function(ca,Ha){var cb=this.ensureMarkerCorners(),Pb=this.markerLength(ca),sc=[ca.topLeft().addXY(0,0).extent(Ja.pt(Pb,5)),ca.topLeft().addXY(0,0).extent(Ja.pt(5,
Pb)),ca.topRight().addXY(-Pb,0).extent(Ja.pt(Pb,5)),ca.topRight().addXY(-5,0).extent(Ja.pt(5,Pb)),ca.bottomRight().addXY(-5,-Pb).extent(Ja.pt(5,Pb)),ca.bottomRight().addXY(-Pb,-5).extent(Ja.pt(Pb,5)),ca.bottomLeft().addXY(0,-5).extent(Ja.pt(Pb,5)),ca.bottomLeft().addXY(0,-Pb).extent(Ja.pt(5,Pb))];cb.forEach(function(Xc,Nc){return Xc.setBounds(sc[Nc])});Ha&&(this.adjustOrigin(ca.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(ca){var Ha=
this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pb){if(1==Pb.nextAddress)return Pb.yield(Ha.animate({scale:Math.max(30/ca.width,1.05)}),2);cb=Ha.center;return Pb.yield(Ha.animate({center:cb,scale:1,duration:300,easing:Ja.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(ca){return(new this).alignWithMorph(ca)}},{key:"highlightBounds",value:function(ca){return(new this).alignWithBounds(ca)}}],
Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(Ja.Morph);Ba=Sa("S",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Pa=Gb.hasOwnProperty("StatusMessage")&&"function"===typeof Gb.StatusMessage?Gb.StatusMessage:Gb.StatusMessage=function(ca){ca&&
ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"relayout",value:function(){this.title=Ja.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(ca,Ha){this.message=ca;this.color=Ha}},{key:"slideTo",value:function(ca){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==
cb.nextAddress)return Ha.sliding=Ha.animate({position:ca,duration:500}),cb.yield(Ha.sliding,2);Ha.sliding=!1;cb.jumpToEnd()})}},{key:"expand",value:function(){var ca=this,Ha,cb,Pb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xc){if(1==Xc.nextAddress)return ca.expandable?ca.sliding?Xc.yield(ca.sliding,2):Xc.jumpTo(2):Xc.return();Ha=ca.world();if(!Ha||ca.isMaximized)return Xc.return();ca.isMaximized=!0;ca.stayOpen=!0;cb=ca.getSubmorphNamed("message text");cb.lineWrapping=!1;Object.assign(cb,
{clipMode:"auto",fixedWidth:!0,selectable:!0});ca.expandedContent&&(cb.value=ca.expandedContent);cb.fit();Pb=cb.textBounds().extent();sc=Ha.visibleBounds();Pb.y>sc.extent().y&&(Pb.y=sc.extent().y-20);Pb.x>sc.extent().x&&(Pb.x=sc.extent().x-20);Pb=ca.extent.maxPt(Pb);ca.animate({extent:Pb,center:sc.center(),duration:200});ca.relayout();ca.focus();Xc.jumpToEnd()})}},{key:"fit",value:function(){var ca=this.getSubmorphNamed("message text");ca&&(this.extent=Ja.pt(100,35).maxPt(ca.textBounds().extent()),
this.relayout())}},{key:"focus",value:function(){var ca=this.getSubmorphNamed("message text");ca&&ca.focus()}},{key:"onMouseUp",value:function(ca){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ja.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},
master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(ca){this.setProperty("message",ca);var Ha=this.getSubmorphNamed("message text");if(Ha){Ha.value=ca;var cb=Ha.documentEndPosition;cb.row>this.maxLines&&(Ha.replace({start:{row:this.maxLines,column:0},end:cb},"...\n"),this.expandedContent||(this.expandedContent=ca));cb=Ha.documentEndPosition;0!==cb.column&&Ha.insertText("\n",cb)}}},title:{isStyleProp:!0,derived:!0,set:function(ca){this.getSubmorphNamed("message title").value=
ca},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(ca){this.get("message icon").fontColor=ca;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=ca)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ja.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},
{name:"message title",type:"label"},{name:"close button",type:"button"}];Ja.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ja.connect(this,"extent",this,"relayout")}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(Ja.Morph));Ja.StatusMessage=
Ba;Ja.StatusMessage=Ba;Ja.StatusMessage=Ba;var Fb=Sa("b",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Pa=Gb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Gb.StatusMessageForMorph?Gb.StatusMessageForMorph:Gb.StatusMessageForMorph=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"alignAtBottomOf",value:function(ca){var Ha=this.world();Ha&&(this.bringToFront(),
this.fit(),this.width=ca.bounds().width,this.relayout(),ca.world()&&(this.position=ca.owner.worldPoint(ca.bounds().bottomLeft())),ca=Ha.visibleBounds(),ca=this.bounds().top()+this.height-ca.bottom(),0<ca&&this.moveBy(Ja.pt(0,-ca)))}},{key:"onMouseUp",value:function(ca){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},
targetMorph:{defaultValue:null,get:function(){var ca=this.getProperty("targetMorph");return ca&&$world.getMorphWithId(ca)},set:function(ca){this.setProperty("targetMorph",ca?ca.id:null);this.alignAtBottomOf(ca)}},expandable:{after:["submorphs"],set:function(ca){this.setProperty("expandable",ca);if(ca){var Ha=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Ja.connect(Ha,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),
Ja.disconnect(Ha,"fire",this,"expand"))}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(Ja.StatusMessage));Ja.StatusMessageForMorph=Fb;Ja.StatusMessageForMorph=Fb;Ja.StatusMessageForMorph=Fb;Ja.showConnector=Da;Ja.showConnector=Da;var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");
va.Morph=ue;va.Label=Bd;va.HorizontalLayout=hd;va.Path=yd;va.Text=Jd;va.GridLayout=de;va.morph=jc;va.Icon=ke;va.createMorphSnapshot=Zb;va.Color=Fc;va.pt=Vb;va.rect=Zc;va.Rectangle=ed;va.LinearGradient=Ic;va.obj=sd;va.PropertyPath=Ad;va.promise=kd;va.properties=Jc;va.num=zd;va.arr=Mb;va.connect=ld;va.signal=mb;va.disconnect=gc;va.disconnectAll=Bc;va.once=Wd;va.showAndSnapToGuides=zc;va.showAndSnapToResizeGuides=ac;va.removeSnapToGuidesOf=fc;va.CommentBrowser=void 0;va.show=Oa;va.haloBlue=va.Color.rgb(23,
160,251);va.componentAccent=va.Color.magenta;va.derivedAccent=va.Color.purple;var Ka=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("Halo")&&"function"===typeof Gb.Halo?Gb.Halo:Gb.Halo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",
win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(ca){ca.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var ca=this;setTimeout(function(){ca.target.owner||ca.remove()})}},{key:"initLayout",value:function(){var ca=this.layout=new va.GridLayout({autoAssign:!1,fitToCell:!1,renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},
2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});
ca.col(1).row(7).group.align="topCenter";ca.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(va.morph({name:"border-box",halosEnabled:!1,fill:va.Color.transparent,borderColor:this.target.isComponent?va.componentAccent:va.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(ca){this.state||(this.state={});this.state.pointerId=ca}},{key:"prepareTarget",value:function(ca){if(!va.obj.isArray(ca))return ca;
if(1>=ca.length)return ca[0];ca=ca[0].world().addMorph(new va.MultiSelectionTarget({selectedMorphs:ca}));ca.alignWithSelection();ca.modifiesSelectedMorphs=!0;return ca}},{key:"refocus",value:function(ca){this.target=ca;this.alignWithTarget()}},{key:"alignWithTarget",value:function(ca){var Ha=this;if((!ca||["extent","position","scale","rotation"].includes(ca.prop))&&!this.active&&this.target){ca=this.target.world()||$world;var cb=this.maskBounds,Pb=this.target.globalBounds(),sc=Pb.insetBy(-36).intersection(cb);
cb=Pb.intersection(cb);this.state.activeButton?(this.buttonControls.forEach(function(Xc){return Xc.visible=!1}),this.ensureResizeHandles().forEach(function(Xc){return Xc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Xc){return Xc.visible=!0}),this.buttonControls.filter(function(Xc){return Ha.activeItems.includes("*")?!0:Ha.activeItems.includes(Xc.name)}).forEach(function(Xc){Xc.visible=
!0}),this.propertyDisplay.disable());this.setBounds(sc.translatedBy(ca.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,cb));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Xc){return Xc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var ca=this.target;ca&&(va.disconnect(ca,"onChange",this,"alignWithTarget"),va.disconnect(ca,"onOwnerChanged",this,"removeIfDetached"),ca instanceof
va.MultiSelectionTarget?(ca.modifiesSelectedMorphs=!1,ca.remove()):"function"===typeof ca.detachedHalo&&ca.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();cd._get(Object.getPrototypeOf(Pa.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return va.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return va.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return va.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return va.GrabHaloItem.for(this)}},
{key:"dragHalo",value:function(){return va.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return va.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return va.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return va.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return va.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return va.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return va.OriginHaloItem.for(this)}},{key:"componentHalo",
value:function(){return va.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(ca){return ca.isHaloItem&&!ca.isResizeHandle})}},{key:"addMorphToSelection",value:function(ca){var Ha=this,cb,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){if(1==sc.nextAddress){cb=Ha.world();Pb=Ha.target.isMorphSelection?Ha.target.selectedMorphs:[Ha.target];if(Pb.includes(ca))return sc.return();Ha.remove();return sc.yield(cb.showHaloForSelection([].concat($jscomp.arrayFromIterable(Pb),
[ca]),Ha.state.pointerId),2)}return sc.return(sc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(ca){var Ha=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pb){if(1==Pb.nextAddress){cb=Ha.world();Ha.remove();if(!Ha.target.isMorphSelection)return Pb.jumpTo(0);va.arr.remove(Ha.target.selectedMorphs,ca);return Pb.yield(cb.showHaloForSelection(Ha.target.selectedMorphs,Ha.state.pointerId),3)}return Pb.return(Pb.yieldResult)})}},{key:"isAlreadySelected",value:function(ca){return this.target==
ca||this.target.isMorphSelection&&this.target.selectsMorph(ca)}},{key:"updateBoundsFor",value:function(ca,Ha,cb,Pb,sc){var Xc={topLeft:va.rect(-1,-1,1,1),topCenter:Ha?va.rect(1,-1,0,1):va.rect(0,-1,0,1),topRight:va.rect(0,-1,1,1),rightCenter:Ha?va.rect(0,1,1,1):va.rect(0,0,1,0),bottomRight:va.rect(0,0,1,1),bottomCenter:Ha?va.rect(1,0,0,1):va.rect(0,0,0,1),bottomLeft:va.rect(-1,0,1,1),leftCenter:Ha?va.rect(-1,1,1,0):va.rect(-1,0,1,0)}[ca];sc=Xc.x;var Nc=Xc.y,Ed=Xc.width;Xc=Xc.height;cb=Ha?this.proportionalDelta(ca,
cb,Pb):cb;ca=va.rect(cb.x*sc,cb.y*Nc,cb.x*Ed,cb.y*Xc);this.active=!0;this.target.setBounds(Pb.insetByRect(ca));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Ld){if(Ld.activeSideBars.includes("Styling Palette"))Ld.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",value:function(ca,Ha,cb){var Pb=cb.width,sc=cb.height;cb={topLeft:va.pt(-1,-1),topCenter:va.pt(0,-1),topRight:va.pt(1,
-1),leftCenter:va.pt(-1,0),rightCenter:va.pt(1,0),bottomLeft:va.pt(-1,1),bottomCenter:va.pt(0,1),bottomRight:va.pt(1,1)};var Xc=Pb/Math.max(Pb,sc),Nc=sc/Math.max(sc,Pb);Pb={topLeft:va.pt(-Xc,-Nc),topCenter:va.pt(1/(2*sc/Pb),-1),topRight:va.pt(Xc,-Nc),leftCenter:va.pt(-1,sc/(2*Pb)),rightCenter:va.pt(1,sc/(3*Pb)),bottomLeft:va.pt(-Xc,Nc),bottomCenter:va.pt(1/(2*sc/Pb),1),bottomRight:va.pt(Xc,Nc)};cb=cb[ca];return Pb[ca].scaleBy(cb.dotProduct(Ha)/cb.dotProduct(cb))}},{key:"ensureResizeHandles",value:function(){return va.ResizeHandle.resizersFor(this)}},
{key:"updatePropertyDisplay",value:function(ca){ca=ca.valueForPropertyDisplay();"undefined"!==typeof ca?this.propertyDisplay.displayProperty(ca):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(ca,Ha){if(!va.rect(0).sides.includes(Ha)){var cb=this.getSubmorphNamed("diagonal");if(ca){ca=this.target.globalBounds();var Pb=ca.width,sc=ca.height;ca=this.localize(va.pt(ca.x,ca.y)).extent(va.pt(Pb,sc)).scaleRectTo(this.innerBounds());Pb={topLeft:[va.pt(Pb,sc),va.pt(0,0)],topRight:[va.pt(0,
sc),va.pt(Pb,0)],bottomRight:[va.pt(0,0),va.pt(Pb,sc)],bottomLeft:[va.pt(Pb,0),va.pt(0,sc)]};cb?cb.setBounds(ca):(cb=$jscomp.makeIterator(Pb[Ha]),Ha=cb.next().value,cb=cb.next().value,Pb=new va.LinearGradient({stops:[{offset:0,color:va.Color.orange.withA(0)},{offset:.2,color:va.Color.orange},{offset:.8,color:va.Color.orange},{offset:1,color:va.Color.orange.withA(0)}]}),cb=this.addMorphBack(new va.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:ca,borderColor:Pb,vertices:[Ha,
cb]})),cb.setBounds(ca),cb.animate({opacity:1,duration:500}))}else cb&&cb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(ca,Ha){var cb=this.getSubmorphNamed("rotationIndicator");ca&&Ha?(ca=this.getSubmorphNamed("origin").center,cb=cb||this.addMorphBack(new va.Path({name:"rotationIndicator",borderColor:va.haloBlue,borderWidth:1,vertices:[]})),cb.setBounds(Ha.bounds().union(this.innerBounds())),cb.vertices=[cb.localizePointFrom(ca,this),cb.localizePointFrom(Ha.center,this)]):cb&&cb.remove()}},
{key:"toggleMorphHighlighter",value:function(ca,Ha,cb){cb=void 0===cb?!1:cb;if(Ha)if(Ha.onHaloGrabover)Ha.onHaloGrabover(ca);else cb=va.MorphHighlighter.for(this,Ha,cb),ca&&Ha&&Ha!=this.world()?cb&&cb.show(Ha):cb&&cb.deactivate()}},{key:"temporaryEditTextMorph",value:function(ca){if(this.target.isText){var Ha=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(ca.positionIn(this.target));var cb=this.world(),Pb=this.target,sc=
this.topBar,Xc=function(Nc){sc.stylingPalette&&sc.stylingPalette.fullContainsWorldPoint(cb.firstHand.position)?(Pb.whenRendered().then(function(){va.once(Pb,"onBlur",Xc)}),va.once(Pb,"onBlur",Xc)):(sc.setEditMode("Halo",!0),Pb.readOnly=Ha,Pb.collapseSelection(),sc.showHaloFor(Pb))};this.target.whenRendered().then(function(){va.once(Pb,"onBlur",Xc)});sc.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(ca){var Ha=this,cb=ca.state.clickedOnMorph;if(!ca.isCommandKey()&&cb==this.borderBox){if(2==
ca.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(ca);return}return va.promise.delay(200).then(function(){2!=ca.state.clickCount&&Ha.remove()})}if(ca.isShiftDown()&&ca.isCommandKey())cb=this.target.isMorphSelection?this.target.morphBeneath(ca.position):this.morphBeneath(ca.position),this.isAlreadySelected(cb)?this.removeMorphFromSelection(cb):this.addMorphToSelection(cb);else{if(cb==this.borderBox&&ca.isCommandKey()){var Pb=ca.world.morphsContainingPoint(ca.position).filter(function(sc){return sc.halosEnabled});
(Pb=Pb.slice(Pb.indexOf(this.target)+1)[0]||Pb[0]||ca.world)&&ca.world.showHaloFor(Pb,ca.domEvt.pointerId);this.remove()}cb==this&&ca.isCommandKey()&&(Pb=this.morphBeneath(ca.position),ca.world.showHaloFor(Pb,ca.domEvt.pointerId));cb==this&&va.promise.delay(500).then(function(){Ha.remove()})}}},{key:"onContextMenu",value:function(ca){var Ha=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(cb){return Ha.target.openMenu(cb,ca)}).catch(function(cb){return $world.logError(cb)})}},
{key:"onKeyUp",value:function(ca){this.changingName||this.buttonControls.map(function(Ha){return Ha.onKeyUp(ca)})}},{key:"getMesh",value:function(ca,Ha){var cb=ca.x;ca=ca.y;Ha=void 0===Ha?va.pt(0,0):Ha;var Pb=this.world().visibleBounds(),sc=Pb.height;Pb=Pb.width;var Xc={borderStyle:"dotted",borderWidth:2,borderColor:va.Color.orange};Xc=this.get("mesh")||this.addMorph(new va.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:va.pt(Pb,sc),fill:null,submorphs:[new va.Path(Object.assign({name:"vertical"},
Xc)),new va.Path(Object.assign({name:"horizontal"},Xc))]}));Xc.globalPosition=Ha;Xc.getSubmorphNamed("vertical").vertices=[va.pt(cb,0).subPt(Ha),va.pt(cb,sc).subPt(Ha)];Xc.getSubmorphNamed("horizontal").vertices=[va.pt(0,ca).subPt(Ha),va.pt(Pb,ca).subPt(Ha)];return Xc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:va.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(ca){this.setProperty("maskBounds",ca);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(ca){this.setProperty("activeItems",ca);this.buttonControls.forEach(function(Ha){return Ha.visible=ca.includes(Ha.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},
hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(va.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(ca){this.state||(this.state={});var Ha=!!this.state.target;this.detachFromTarget();ca=this.prepareTarget(ca);this.state.target=ca;Ha&&this.alignWithTarget();va.connect(ca,"onChange",this,"alignWithTarget");va.connect(ca,"onOwnerChanged",
this,"removeIfDetached")}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19551})}(va.Morph);Ka=va.Halo;var Rb=Sa("H",Ka);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Gb.HaloPropertyDisplay?
Gb.HaloPropertyDisplay:Gb.HaloPropertyDisplay=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(ca){var Ha=this.halo.state.activeButton;ca=String(ca);this.visible=!0;this.textString=ca;this.position=this.constructor.defaultPosition;
this.bounds().insetBy(10).intersects(Ha.bounds())&&(this.position=va.pt(Ha.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return va.pt(25,0)}},{key:"for",value:function(ca){return ca.getSubmorphNamed(this.morphName)||ca.addMorph(new this({name:this.morphName}))}},
{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:va.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:va.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:va.Color.white},position:{defaultValue:this.defaultPosition}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19741,end:21079})})(va.Label);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Gb.MultiSelectionTarget?Gb.MultiSelectionTarget:Gb.MultiSelectionTarget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"isHaloItem",get:function(){return!0}},
{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(ca){return this.selectedMorphs.includes(ca)}},{key:"alignWithSelection",value:function(){var ca=this.selectedMorphs.map(function(Ha){return Ha.globalBounds()}).reduce(function(Ha,cb){return Ha.union(cb)});this.setBounds(ca)}},{key:"onGrab",value:function(ca){this.grabbingHand=ca.hand;this.selectionGrabbed=!0;ca.hand.grab(this.selectedMorphs);va.once(ca.hand,"dropMorphsOn",this,"onGrabEnd");va.connect(ca.hand,"position",
this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;va.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(ca){var Ha=ca.value.subPt(ca.prevValue);this.selectedMorphs.forEach(function(cb){return cb.resizeBy(Ha)})}},{key:"updatePosition",value:function(ca){if(!this.selectionGrabbed){var Ha=ca.value.subPt(ca.prevValue);this.selectedMorphs.forEach(function(cb){return cb.moveBy(Ha)})}}},{key:"updateRotation",value:function(ca){var Ha=this,cb=ca.value-
ca.prevValue;this.selectedMorphs.forEach(function(Pb){var sc=Pb.origin;Pb.adjustOrigin(Pb.localize(Ha.worldPoint(va.pt(0,0))));Pb.rotation+=cb;Pb.adjustOrigin(sc)})}},{key:"updateScale",value:function(ca){var Ha=this,cb=ca.value-ca.prevValue;this.selectedMorphs.forEach(function(Pb){var sc=Pb.origin;Pb.adjustOrigin(Pb.localize(Ha.worldPoint(va.pt(0,0))));Pb.scale+=cb;Pb.adjustOrigin(sc)})}},{key:"onChange",value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),"onChange",this).call(this,ca);
if(this.modifiesSelectedMorphs){switch(ca.prop){case "extent":this.updateExtent(ca);break;case "scale":this.updateScale(ca);break;case "position":this.updatePosition(ca);break;case "rotation":this.updateRotation(ca)}return ca}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Gb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21147,end:23418})})(va.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("HaloItem")&&"function"===typeof Gb.HaloItem?Gb.HaloItem:Gb.HaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:va.Color.gray.withA(.7)},
grabbable:{defaultValue:!1},extent:{defaultValue:va.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},{key:"for",value:function(ca){return ca.getSubmorphNamed(this.morphName)||ca.addMorph(new this({halo:ca,name:this.morphName}))}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23582,
end:24300})})(va.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("NameHolder")&&"function"===typeof Gb.NameHolder?Gb.NameHolder:Gb.NameHolder=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onHoverIn",value:function(ca){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=
va.Color.orange)}},{key:"onHoverOut",value:function(ca){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=va.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(ca){"Enter"==ca.keyCombo?(this.accept(),this.halo.focus(),ca.stop()):cd._get(Object.getPrototypeOf(Pa.prototype),"onKeyDown",this).call(this,ca)}},{key:"onMouseUp",value:function(){va.signal(this,
"active",[!0,this])}},{key:"onMouseDown",value:function(ca){this.nameHolder.fontColor=va.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(ca){ca=this.nameHolder.textString;var Ha=this.target.owner;this.validName=!Ha||!Ha.getSubmorphNamed(ca)||this.target.name==ca;va.signal(this,"valid",[this.validName,ca])}},{key:"update",value:function(){var ca=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return ca.nameHolder.fit()}))}},
{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(ca){if(!this.forceUniqueName||this.validName)this.target.name=ca,va.signal(this,"active",[!1,this]),va.CommentBrowser.instance&&va.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:va.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new va.HorizontalLayout({renderViaCSS:!0,resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new va.Text({fill:va.Color.transparent,
fontColor:va.Color.white,fontWeight:"bold",active:!0}));va.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24335,end:27086})})(va.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("NameHaloItem")&&
"function"===typeof Gb.NameHaloItem?Gb.NameHaloItem:Gb.NameHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ca);this.initComponentLink();this.initNameHolders();this.validityIndicator=va.Icon.makeLabel("check",{fontColor:va.Color.green,
fontSize:15,padding:va.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?va.componentAccent:va.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var ca=this,Ha=this.halo.target;if(Ha&&!Ha.isMorphSelection&&Ha.master){var cb=Ha.master.determineMaster(Ha),Pb=cb&&!!Ha.world().localComponents.includes(cb),sc=cb?Ha.master.getWorldUrlFor(cb):"this project";Ha=this.addMorph(va.Icon.makeLabel(sc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:va.Color.white,
padding:va.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+sc}));sc&&va.connect(Ha,"onMouseDown",function(){Pb?ca.showLocalMaster(cb):window.open(sc)})}}},{key:"showLocalMaster",value:function(ca){var Ha;if(Ha=ca.getWindow())Ha.activate(),Ha.minimized&&(Ha.minimized=!1);ca.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(ca){return{target:ca,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:
[]}},{key:"initNameHolders",value:function(){var ca=this;this.nameHolders=this.targets().map(function(Ha){Ha=new va.NameHolder({halo:ca.halo,highlightOnHover:Ha.highlightOnHover,target:Ha.target});va.connect(Ha,"active",ca,"toggleActive");va.connect(Ha,"valid",ca,"toggleNameValid");return Ha});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(va.arr.interpose(this.nameHolders,{extent:va.pt(1,28),fill:va.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(ca){var Ha=
$jscomp.makeIterator(ca);ca=Ha.next().value;var cb=Ha.next().value;if(this.halo.changingName!==ca){this.halo.changingName=ca;if(Ha=this.get("master link"))Ha.visible=Ha.isLayoutable=!ca;ca?(this.nameHolders.forEach(function(Pb){return Pb!=cb&&Pb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=va.Color.darkGray,setTimeout(function(){return cb.nameHolder.selectAll()})):(this.fill=va.haloBlue,this.nameHolders.forEach(function(Pb){return Pb!=cb&&Pb.activate()}),this.borderWidth=
0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(ca){var Ha=$jscomp.makeIterator(ca);ca=Ha.next().value;Ha=Ha.next().value;(this.validName=ca)?(this.conflictingMorph=null,this.borderColor=va.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=va.Color.green,va.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(Ha),this.borderColor=va.Color.red,this.validityIndicator.fontColor=va.Color.red,
this.validityIndicator.nativeCursor="pointer",va.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){va.arr.zip(this.targets(),this.nameHolders).map(function(Ha){var cb=$jscomp.makeIterator(Ha);Ha=cb.next().value.target;cb=cb.next().value;cb.target=Ha;cb.update()});var ca=this.halo.innerBounds().bottomCenter().addPt(va.pt(0,2));this.topCenter=va.pt(Math.max(ca.x,30),Math.max(ca.y,80))}},{key:"onMouseDown",value:function(ca){var Ha=this,cb=this.conflictingMorph;
cb&&(this.halo.toggleMorphHighlighter(!0,cb),setTimeout(function(){return Ha.halo.toggleMorphHighlighter(!1,cb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:va.haloBlue},borderColor:{defaultValue:va.Color.green},layout:{initialize:function(){this.layout=new va.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",
orderByIndex:!0})}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27088,end:31588})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("CloseHaloItem")&&"function"===typeof Gb.CloseHaloItem?Gb.CloseHaloItem:Gb.CloseHaloItem=
function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"update",value:function(){var ca=this.halo,Ha=ca.target.owner;Ha.undoStart("close-halo");ca.target.selectedMorphs?ca.target.selectedMorphs.forEach(function(cb){return cb.abandon()}):ca.target.abandon();Ha.undoStop("close-halo");ca.remove()}},{key:"onMouseDown",value:function(ca){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},
{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],Gb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31590,end:32600})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("GrabHaloItem")&&"function"===typeof Gb.GrabHaloItem?Gb.GrabHaloItem:Gb.GrabHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"adjustTarget",value:function(ca,Ha){va.PropertyPath("owner.layout.autoResize").get(ca)&&!ca.globalBounds().insetBy(10).containsPoint(Ha)&&(ca=ca.owner);return ca}},{key:"valueForPropertyDisplay",value:function(){var ca=this.hand,Ha=this.halo,cb=this.prevDropTarget,Pb=ca.world(),sc=ca.findDropTarget(ca.globalPosition,[Ha.target],function(Xc){return!Xc.isHaloItem&&!Xc.ownerChain().some(function(Nc){return Nc.isHaloItem||!Nc.visible||0==Nc.opacity})});if(sc)return sc=
this.adjustTarget(sc,ca.globalPosition),Ha.toggleMorphHighlighter(sc&&sc!=Pb,sc,!0),cb&&cb!=sc&&Ha.toggleMorphHighlighter(!1,cb),(this.prevDropTarget=sc)&&sc.name}},{key:"init",value:function(ca){var Ha=this.halo,cb=Ha.target.undoStart("grab-halo");cb&&cb.addTarget(Ha.target.owner);this.hand=ca;Ha.target.onGrab({halo:Ha,hand:ca,isShiftDown:function(){return!1}});Ha.state.activeButton=this;this.opacity=.3;var Pb=va.connect(ca,"update",this,"update");va.once(Ha.target,"remove",function(){return Pb.disconnect()})}},
{key:"stop",value:function(ca){var Ha=this.halo,cb=this.prevDropTarget,Pb=Ha.target.undoInProgress,sc=ca.hand.findDropTarget(ca.hand.globalPosition,[Ha.target],function(Xc){return!Xc.isHaloItem&&!Xc.ownerChain().some(function(Nc){return Nc.isHaloItem})});sc=this.adjustTarget(sc,ca.hand.globalPosition);va.disconnect(ca.hand,"update",this,"update");va.MorphHighlighter.interceptDrop(Ha,sc,Ha.target);Pb.addTarget(sc);sc.onDrop(ca);Ha.state.activeButton=null;Ha.alignWithTarget();Ha.toggleMorphHighlighter(!1,
cb);va.MorphHighlighter.removeHighlighters(Ha);Ha.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(ca){this.init(ca.hand)}},{key:"onDragEnd",value:function(ca){this.stop(ca)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},
draggable:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32664,end:35192})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("DragHaloItem")&&"function"===typeof Gb.DragHaloItem?Gb.DragHaloItem:Gb.DragHaloItem=
function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(ca){var Ha=this.halo.getSubmorphNamed("mesh");if(ca)return Ha=this.halo.getMesh(this.halo.target.worldPoint(va.pt(0,0))),this.focus(),Ha;Ha&&Ha.remove()}},{key:"init",value:function(){var ca=this.halo.target;ca.undoStart("drag-halo");
this.halo.state.activeButton=this;this.actualPos=ca.position;this.targetTransform=ca.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);va.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(ca,Ha,cb){Ha=void 0===Ha?!1:Ha;cb=void 0===cb?!1:cb;this.actualPos=ca=this.actualPos.addPt(this.targetTransform.transformDirection(ca));Ha&&(ca=
ca.griddedBy(va.pt(10,10)));this.halo.target.position=ca;this.updateAlignmentGuide(Ha);this.world().withTopBarDo(function(Pb){if(Pb.activeSideBars.includes("Styling Palette"))Pb.stylingPalette.onHierarchyChange()});Ha||va.showAndSnapToGuides(this.halo.target,!0,cb,5,500)}},{key:"onDragStart",value:function(ca){this.init()}},{key:"onDrag",value:function(ca){this.update(ca.state.dragDelta,ca.isAltDown(),ca.isCtrlDown())}},{key:"onDragEnd",value:function(ca){this.stop()}},{key:"onKeyUp",value:function(ca){this.updateAlignmentGuide(!1)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35194,end:37192})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("InspectHaloItem")&&"function"===typeof Gb.InspectHaloItem?Gb.InspectHaloItem:Gb.InspectHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){var Ha=this;
(function(){var cb,Pb,sc,Xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nc){if(1==Nc.nextAddress)return Nc.yield(System.import("lively.ide/js/inspector.js"),2);cb=Nc.yieldResult;Pb=cb.default;(sc=Ha.world().getSubmorphsByStyleClassName("Inspector").find(function(Ed){return Ed.targetObject==Ha.halo.target}))&&(Xc=sc.getWindow())?(Xc.minimized=!1,Xc.activate(),Xc.animate({center:Ha.world().visibleBounds().center(),duration:200})):Pb.openInWindow({targetObject:Ha.halo.target});Ha.halo.remove();
Nc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37194,end:38111})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("EditHaloItem")&&"function"===typeof Gb.EditHaloItem?Gb.EditHaloItem:Gb.EditHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){var Ha=this;(ca=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(cb){return cb.target==
Ha.halo.target}))?(ca=ca.getWindow(),ca.bringToFront(),ca.minimized=!1,ca.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas",
"fa-wrench"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38113,end:38893})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("RotateHaloItem")&&"function"===typeof Gb.RotateHaloItem?Gb.RotateHaloItem:Gb.RotateHaloItem=
function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ca);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(ca){this.setProperty("angle",ca)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||
null}},{key:"scaleGauge",set:function(ca){this.setProperty("scaleGauge",ca)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(ca){this.setProperty("initRotation",ca)}},{key:"valueForPropertyDisplay",value:function(){var ca=this.halo.target;return this.scaleGauge?ca.scale.toFixed(4).toString():va.num.toDegrees(ca.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(ca){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");
this.halo.state.activeButton=this;this.angle=ca;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(ca){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=ca.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(ca){this.scaleGauge=null;ca=this.initRotation+(ca-this.angle);ca=va.num.toRadians(va.num.detent(va.num.toDegrees(ca),10,45));this.halo.target.rotation=
ca;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(ca){var Ha=this.scaleGauge,cb=this.halo;Ha||(Ha=this.scaleGauge=ca.scaleBy(1/cb.target.scale));this.angle=ca.theta();this.initRotation=cb.target.rotation;cb.target.scale=va.num.detent(ca.dist(va.pt(0,0))/Ha.dist(va.pt(0,0)),.1,.5);cb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,
this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(ca){this.styleClasses=["fas",ca?"fa-search-plus":"fa-redo"];this.tooltip=ca?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(ca){this.adaptAppearance(ca.isShiftDown());ca.isShiftDown()?this.initScale(ca.position.subPt(this.halo.target.globalPosition)):this.init(ca.position.subPt(this.halo.target.globalPosition).theta())}},
{key:"onDrag",value:function(ca){this.globalPosition=ca.position.addPt(va.pt(-10,-10));this.adaptAppearance(ca.isShiftDown());ca.isShiftDown()?this.updateScale(ca.position.subPt(this.halo.target.globalPosition)):this.update(ca.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(ca){this.adaptAppearance(ca.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(ca){this.adaptAppearance(ca.isShiftDown())}},{key:"onKeyUp",value:function(ca){this.adaptAppearance(ca.isShiftDown())}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38895,end:42263})})(va.HaloItem);va.nameNumberRe=
/(.+)([0-9]+)$/;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Gb.ComponentHaloItem?Gb.ComponentHaloItem:Gb.ComponentHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"updateComponentIndicator",value:function(){var ca=this.world(),Ha=this.halo.target;this.halo.remove();ca.showHaloFor(Ha)}},{key:"checkForDuplicateNamesInHierarchy",
value:function(){var ca=this,Ha,cb,Pb,sc,Xc,Nc,Ed,Ld,Ye,Fe,ye,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ke){switch(Ke.nextAddress){case 1:Ha=ca.halo.target;cb=ca.world();Pb=[];Ha.withAllSubmorphsDoExcluding(function(Ie){Ie!=Ha&&Pb.push(Ie)},function(Ie){return Ie.master&&Ie!=Ha});sc=va.arr.groupBy(Pb,function(Ie){return Ie.name});Xc={fontWeight:"normal",fontSize:16};if(!Object.values(sc).find(function(Ie){return 1<Ie.length})){Ke.jumpTo(2);break}Nc=va.arr.sum(Object.values(sc).filter(function(Ie){return 1<
Ie.length}).map(function(Ie){return Ie.length}));return Ke.yield(cb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(va.Icon.textAttribute("exclamation-triangle",{fontColor:va.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+Nc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",
Object.assign({},Xc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",Object.assign({},Xc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Xc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Xc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Ed=Ke.yieldResult,!Ed)return Ke.return();case 2:Ye=Ke.forIn(sc);case 4:if(null==(Ld=Ye.getNext())){Ke.jumpTo(6);break}if(2>sc[Ld].length){Ke.jumpTo(4);break}Fe=sc[Ld];case 7:if(!(1<Fe.length)){Ke.jumpTo(4);break}ye=Fe[0];va.show(ye,!0);return Ke.yield(cb.prompt(["Name Collision\n",{},"The name of\n",Xc,ye.toString(),Object.assign({},Xc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Xc),Ha.name,Object.assign({},Xc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Fe.length?"are "+(Fe.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Xc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Xc],{input:ye.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Ie){return!Object.keys(sc).includes(Ie)}}),9);case 9:z=Ke.yieldResult;va.signal(cb,"hideMarkers");z&&(ye.name=z);if(z in sc){Ke.jumpTo(7);break}else if(!z){Fe=va.arr.rotate(Fe);Ke.jumpTo(7);break}va.arr.remove(Fe,ye);Ke.jumpTo(7);break;case 6:return Ke.return(!0)}})}},{key:"onMouseDown",value:function(){var ca=this,Ha,cb,Pb,sc,Xc,Nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ed){switch(Ed.nextAddress){case 1:Ha=
ca.halo.target;cb=!Ha.isComponent;Pb=$world.getAllNamed(Ha.name).length;if(!(cb&&1<Pb)){Ed.jumpTo(2);break}return Ed.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Pb-1)+" other morph"+(2<Pb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Ha.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Ld){return 0==$world.getAllNamed(Ld).length}}),3);case 3:sc=Ed.yieldResult;if(!sc)return Ed.return();Ha.name=sc;case 2:Xc=Ha;if(!(Nc=cb)){Ed.jumpTo(4);break}return Ed.yield(ca.checkForDuplicateNamesInHierarchy(),5);case 5:Nc=Ed.yieldResult;case 4:Xc.isComponent=Nc,cb?(va.arr.pushIfNotIncluded(Ha.world().localComponents,Ha),va.arr.pushIfNotIncluded(Ha.world().hiddenComponents,Ha.name)):va.arr.remove(Ha.world().localComponents,Ha),ca.world()?ca.updateComponentIndicator():Ha.world().showHaloFor(Ha),
Ed.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42304,end:48458})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("CopyHaloItem")&&"function"===typeof Gb.CopyHaloItem?Gb.CopyHaloItem:Gb.CopyHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,
Tb,[{key:"init",value:function(ca){function Ha(Ld,Ye){return Ye.match(va.nameNumberRe)?Ye.replace(va.nameNumberRe,function(Fe,ye,z){z||(z="0");for(Fe=Number(z);Ld.get(ye+ ++Fe););return ye+Fe}):Ye+"1"}var cb=this.halo,Pb=cb.target,sc=cb.world(),Xc=Pb instanceof va.MultiSelectionTarget;cb.remove();va.connect(ca,"update",this,"update");if(Xc){var Nc=va.arr.compact(Pb.selectedMorphs.map(function(Ld){if(Ld.canBeCopied())return Ld=Ld.copy(!0),sc.addMorph(Ld),Ld}));Xc=Nc.map(function(Ld){Ld.name=Ha(Pb,
Ld.name);return Ld.position});Nc[0].undoStart("copy-halo");sc.addMorph(cb);cb.refocus(Nc);ca.grab(cb.target);cb.target.onGrab({halo:cb,hand:ca,isShiftDown:function(){return!1}});Xc.forEach(function(Ld,Ye){return Nc[Ye].globalPosition=Ld});cb.alignWithTarget()}else{Xc=Pb.globalPosition;var Ed=Pb.copy(!0);Pb.isComponent&&(Ed.isComponent=!1,Ed.withAllSubmorphsDoExcluding(function(Ld){Ld!=Ed&&Ld.master||delete Ld._parametrizedProps},function(Ld){return Ld.master&&Ld!=Ed}),Ed.master=Pb);Ed.name=Ha(Pb,
Pb.name);sc.addMorph(Ed);Ed.globalPosition=Xc;Ed.undoStart("copy-halo");ca.grab(Ed);sc.addMorph(cb);cb.visible=!1}}},{key:"stop",value:function(ca){var Ha=this.halo,cb=$jscomp.makeIterator(ca.grabbedMorphs).next().value,Pb=ca.findDropTarget(ca.globalPosition,[Ha.target],function(Xc){return!Xc.isHaloItem&&!Xc.ownerChain().some(function(Nc){return Nc.isHaloItem})}),sc=Ha.target.undoInProgress;va.disconnect(ca,"update",this,"update");sc.addTarget(Pb);ca.dropMorphsOn(Pb);Ha.target.undoStop("copy-halo");
Ha.remove();ca.world().showHaloFor(cb)}},{key:"onDragStart",value:function(ca){this.init(ca.hand)}},{key:"onDragEnd",value:function(ca){this.stop(ca.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var ca=this,Ha,cb,Pb,sc,Xc,Nc,Ed,Ld,Ye,Fe,ye,z,Ke,Ie,$d,Ze;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hf){switch(hf.nextAddress){case 1:Ha=ca;cb=Ha.halo;if(cb.nameHalo().nameHolders.find(function(kf){return kf.nameHolder===$world.focusedMorph}))return hf.return();
Pb=cb.target;sc=cb.world();Xc=Pb instanceof va.MultiSelectionTarget;Nc=Pb.globalBounds().topLeft();Ed=Xc?Pb.selectedMorphs:[Pb];return hf.yield(Promise.all(Ed.filter(function(kf){return!kf.isCommentIndicator}).map(function(kf){var yf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hg){return 1==hg.nextAddress?(yf=kf.copy(!0),hg.yield(Promise.all(yf.withAllSubmorphsDo(function(qc){if(qc.master)return qc.master.applyIfNeeded(),qc.master.whenApplied()})),2)):hg.return(yf)})})),2);case 2:Ld=
hf.yieldResult,Ye=[],Fe='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",cb.remove(),hf.setCatchFinallyBlocks(3),ye=$jscomp.makeIterator(Ld),z=ye.next();case 5:if(z.done)return Fe+="</body></html>",$d=JSON.stringify(Ye),hf.yield(ca.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Fe},{type:"application/morphic",data:$d}]),9);
Ke=z.value;return hf.yield(va.createMorphSnapshot(Ke,{addPreview:!1,testLoad:!1}),8);case 8:Ie=hf.yieldResult;Ie.copyMeta={offset:Ke.worldPoint(va.pt(0,0)).subPt(Nc)};Ye.push(Ie);Fe+=Ke.renderPreview();z=ye.next();hf.jumpTo(5);break;case 9:hf.leaveTryBlock(4);break;case 3:return Ze=hf.enterCatchBlock(),sc.logError(Ze),hf.return();case 4:sc.addMorph(cb),cb.refocus(Ed),cb.setStatusMessage("copied"),hf.jumpToEnd()}})}},{key:"onMouseUp",value:function(ca){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){ca.stop();
return cb.yield(Ha.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48460,end:53088})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("OriginHaloItem")&&"function"===typeof Gb.OriginHaloItem?Gb.OriginHaloItem:Gb.OriginHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"fill",get:function(){return va.Color.white.interpolate(.2,
this.borderColorTop)}},{key:"extent",get:function(){return va.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");
this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(ca){var Ha=this.halo,cb=Ha.target.origin,Pb=Ha.target.worldPoint(cb);ca=Ha.target.localize(Pb.addPt(ca)).subPt(Ha.target.scroll).subPt(cb);Ha.target.adjustOrigin(Ha.target.origin.addPt(ca))}},{key:"onDragStart",value:function(ca){this.init()}},{key:"onDragEnd",value:function(ca){this.stop()}},{key:"onDrag",
value:function(ca){this.update(ca.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?va.componentAccent:va.haloBlue}}}}}],Gb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53090,end:54751})})(va.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("ResizeHandle")&&"function"===typeof Gb.ResizeHandle?Gb.ResizeHandle:Gb.ResizeHandle=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"valueForPropertyDisplay",value:function(){var ca=this.halo.target.extent,Ha=ca.y;return ca.x.toFixed(1)+"x"+Ha.toFixed(1)}},{key:"positionInHalo",value:function(){var ca=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(va.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),ca=ca.insetBy(-4));return ca.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(ca){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(ca.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(ca){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(ca.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(ca){this.init(ca.position,ca.isShiftDown())}},{key:"onDragEnd",value:function(ca){this.stop(ca.isShiftDown())}},{key:"onDrag",value:function(ca){this.update(ca.position,ca.isShiftDown(),ca.isAltDown(),ca.isCtrlDown());this.focus()}},{key:"init",value:function(ca,Ha){Ha=void 0===
Ha?!1:Ha;var cb=this.halo.target,Pb=cb.origin,sc=cb.position;cb=cb.extent;this.startPos=ca;this.startBounds=sc.subPt(Pb).extent(cb);this.startOrigin=this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();ca=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=va.num.toRadians(ca%45);this.halo.toggleDiagonal(Ha,this.corner)}},{key:"update",value:function(ca,Ha,cb,Pb){Ha=void 0===Ha?!1:Ha;cb=void 0===cb?!1:cb;Pb=void 0===
Pb?!1:Pb;var sc=this.corner,Xc=this.tfm;ca=this.startPos.subPt(ca);Xc=Xc.transformDirection(va.pt(ca.x,ca.y));cb&&(Xc=Xc.griddedBy(va.pt(10,10)));this.halo.updateBoundsFor(sc,Ha,Xc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Ha,sc);this.updateAlignmentGuide(cb);Ha=[];sc=sc.toLowerCase();sc.includes("left")&&Ha.push("left");sc.includes("top")&&Ha.push("top");sc.includes("bottom")&&Ha.push("bottom");sc.includes("right")&&Ha.push("right");va.showAndSnapToResizeGuides(this.halo.target,
Ha,!0,Pb,5,200)}},{key:"stop",value:function(ca){ca=this.halo;ca.state.activeButton=null;ca.alignWithTarget();ca.toggleDiagonal(!1);this.updateAlignmentGuide(!1);va.removeSnapToGuidesOf(ca.target)}},{key:"updateAlignmentGuide",value:function(ca){var Ha=this.halo.getSubmorphNamed("mesh");if(ca)return ca=this.halo.target.extent,ca=va.pt(ca.x%10,ca.y%10),Ha=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),ca),this.focus(),Ha;Ha&&Ha.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(ca){0<ca&&(ca-=360);ca=-8-(ca/45).toFixed();0==ca&&(ca=8);return va.arr.zip(va.arr.rotate([["topLeft",function(Ha){return Ha.negated()}],["topCenter",function(Ha){return Ha.withX(0).negated()}],["topRight",function(Ha){return Ha.withX(0).negated()}],["rightCenter",function(Ha){return va.pt(0,
0)}],["bottomRight",function(Ha){return va.pt(0,0)}],["bottomCenter",function(Ha){return va.pt(0,0)}],["bottomLeft",function(Ha){return Ha.withY(0).negated()}],["leftCenter",function(Ha){return Ha.withY(0).negated()}]],ca),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(ca){var Ha=this;if(!ca.target)return[];
var cb=ca.target.getGlobalTransform().getRotation();return va.arr.compact(this.getResizeParts(cb).map(function(Pb){var sc=$jscomp.makeIterator(Pb),Xc=$jscomp.makeIterator(sc.next().value);Pb=Xc.next().value;Xc.next();Xc.next();Xc=$jscomp.makeIterator(sc.next().value);sc=Xc.next().value;Xc=Xc.next().value;return Ha.for(ca,Pb,Xc,sc)})).map(function(Pb){return Pb.alignInHalo()})}},{key:"for",value:function(ca,Ha,cb,Pb){var sc="Resize "+Ha;ca=ca.getSubmorphNamed(sc)||new this({name:sc,halo:ca,corner:Ha,
tooltip:"Resize "+Ha,extent:va.pt(10,10),borderWidth:1,borderRadius:0,borderColor:ca.target.isComponent?va.componentAccent:va.haloBlue,fill:va.Color.white});return Object.assign(ca,{nativeCursor:Pb,location:cb})}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54810,end:60003})})(va.HaloItem);
(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("MenuHaloItem")&&"function"===typeof Gb.MenuHaloItem?Gb.MenuHaloItem:Gb.MenuHaloItem=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){var Ha=this,cb,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){if(1==sc.nextAddress)return cb=Ha.halo.target,Ha.halo.remove(),
sc.yield(cb.menuItems(ca),2);Pb=sc.yieldResult;cb.world().openMenu(Pb).hasFixedPosition=Ha.halo.hasFixedPosition;sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60005,end:60530})})(va.HaloItem);var eb=Sa("M",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("MorphHighlighter")&&"function"===typeof Gb.MorphHighlighter?Gb.MorphHighlighter:Gb.MorphHighlighter=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(ca){this.layoutHalo&&this.layoutHalo.handleDrop(ca)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:va.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:va.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(ca){var Ha=this;this.setProperty("highlightedSides",ca);this.submorphs=ca.map(function(cb){return{type:"ellipse",isHaloItem:!0,fill:va.Color.orange,center:Ha.innerBounds()[cb]()}});this.addMorph({type:"label",name:"name tag",padding:va.Rectangle.inset(5,5,5,5),fontColor:va.Color.white,fill:va.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,
derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(ca){ca=void 0===ca?$world:ca;var Ha=ca._morphHighlighters,cb;for(cb in Ha)Ha[cb].remove();delete ca._morphHighlighters}},{key:"for",value:function(ca,Ha,cb,Pb){cb=void 0===cb?!1:cb;Pb=void 0===Pb?[]:Pb;var sc=ca._morphHighlighters=ca._morphHighlighters||{};va.properties.forEachOwn(sc,function(Xc,Nc){return Nc.alignWithHalo()});if(!Ha||Ha.ownerChain().find(function(Xc){return Xc.isHaloItem}))return null;
sc[Ha.id]=sc[Ha.id]||new this({targetId:Ha.id,halo:ca,showLayout:cb});ca.addMorph(sc[Ha.id]);sc[Ha.id].highlightedSides=Pb;return sc[Ha.id]}},{key:"interceptDrop",value:function(ca,Ha,cb){(ca=ca._morphHighlighters=ca._morphHighlighters||{},ca[Ha.id])&&ca[Ha.id].handleDrop(cb)}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:60719,end:64514})}(va.Morph));va.MorphHighlighter=eb;va.MorphHighlighter=eb;va.MorphHighlighter=eb;var Vc=Sa("I",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Pa=Gb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Gb.InteractiveMorphSelector?Gb.InteractiveMorphSelector:Gb.InteractiveMorphSelector=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return cd(Pa,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(ca,Ha,cb){ca=void 0===ca?$world:ca;this.controllingMorph=void 0===Ha?null:Ha;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=ca;this.filterFn=cb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var ca=va.promise.deferred();ca.promise.resolve=ca.resolve;this.whenDone=ca.promise;this.selectorMorph=va.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,
epiMorph:!0}).openInWorld();va.connect(this.world.firstHand,"position",this,"scanForTargetAt");va.once(this.selectorMorph,"onMouseUp",this,"selectTarget");va.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var ca=this.world.firstHand.globalPosition;this.selectorMorph.center=ca;this.selectorMorph.focus();var Ha=this.selectorMorph.morphBeneath(ca),cb,Pb=this.possibleTarget,
sc=this.controllingMorph,Xc=this.filterFn,Nc=this.world,Ed=this.morphHighlighter;for(Ed==Ha?Ha=Ed.morphBeneath(ca):Ha&&Ha.isEpiMorph&&(Ha=Ha.morphBeneath(ca));Ha&&(cb=[Ha].concat($jscomp.arrayFromIterable(Ha.ownerChain())).find(function(Ld){return!Ld.visible}));)Ha=cb=cb.morphBeneath(ca);if(Ha&&Xc&&!Xc(Ha))for(;Ha&&![Ha].concat($jscomp.arrayFromIterable(Ha.ownerChain())).find(Xc);)Ha=Ha.morphBeneath(ca);!Ha||Ha==Pb||sc&&Ha.ownerChain().includes(sc.getWindow())||(Ed&&Ed.deactivate(),(this.possibleTarget=
Pb=Ha)&&!Pb.isWorld&&(ca=this.morphHighlighter=va.MorphHighlighter.for(Nc,Ha))&&ca.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){va.MorphHighlighter.removeHighlighters(this.world);va.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(ca,Ha,cb){ca=new this(ca,Ha,cb);ca.selectNewTarget();return ca.whenDone}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64523,end:67276})}(void 0));va.InteractiveMorphSelector=Vc;va.InteractiveMorphSelector=Vc;va.InteractiveMorphSelector=Vc;va.default=
Ka;var Qb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Qb.info="import via sub modules";Qb.info="import via sub modules";Qb.info="import via sub modules";Ka=Sa("v",{});Qb.valueWidgets=Ka;Qb.valueWidgets=Ka;Qb.valueWidgets=Ka;var qd=Sa("p",{});Qb.popovers=qd;Qb.popovers=qd;Qb.popovers=qd;var Wc=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Wc.Morph=ue;Wc.Icon=ke;Wc.Color=Fc;Wc.pt=Vb;Wc.connect=ld;Wc.duration=300;Qb=Sa("P",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),
Pa=Gb.hasOwnProperty("Popover")&&"function"===typeof Gb.Popover?Gb.Popover:Gb.Popover=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"relayout",value:function(ca){var Ha=this.get("body"),cb=this.get("arrow"),Pb=this.get("close button");cb=cb.height;ca?(Ha.animate({topCenter:Wc.pt(0,cb),duration:200}),Pb.animate({topRight:Ha.topRight.addXY(8,-8),duration:200})):(Ha.topCenter=Wc.pt(0,cb),Pb.topRight=
Ha.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Wc.pt(200,200),fill:Wc.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},
get:function(){return this.get("body").submorphs[0]},set:function(ca){var Ha=this;this.get("body").addMorph(ca);this.whenRendered().then(function(){return Ha.relayout()})}},submorphs:{initialize:function(){var ca=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Wc.pt(0,0),borderColor:Wc.Color.transparent,vertices:[Wc.pt(-10,0),Wc.pt(0,-15),Wc.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Wc.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",
fill:null,extent:Wc.pt(16,16),borderColor:Wc.Color.transparent}];var Ha=$jscomp.makeIterator(this.submorphs);Ha.next();var cb=Ha.next().value;Ha=Ha.next().value;Wc.connect(Ha,"fire",this,"close");Wc.connect(cb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return ca.animated=!0},1E3)}}}}}],Gb,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(Wc.Morph));Wc.Popover=Qb;Wc.Popover=Qb;Wc.Popover=Qb;var Mc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Mc.Morph=ue;Mc.TilingLayout=xc;Mc.morph=jc;Mc.Label=Bd;Mc.HorizontalLayout=hd;Mc.Icon=ke;Mc.InputLine=ec;Mc.config=Dc;Mc.connect=ld;Mc.signal=mb;Mc.Color=Fc;Mc.LinearGradient=Ic;Mc.pt=Vb;Mc.rect=Zc;Mc.num=zd;Mc.obj=sd;Mc.popovers=qd;Mc.ValueScrubber=Ta;Mc.Popover=Qb;(function(Tb){var Gb=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Gb.ContextSensitiveWidget?Gb.ContextSensitiveWidget:Gb.ContextSensitiveWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Mc.Color.transparent},
isSelected:{defaultValue:"false",set:function(ca){this.setProperty("isSelected",ca);this.fontColor=ca?Mc.Color.white:Mc.Color.black}},layout:{initialize:function(){this.layout=new Mc.HorizontalLayout}},context:{serialize:!1}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,
end:2441})})(Mc.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("ShortcutWidget")&&"function"===typeof Gb.ShortcutWidget?Gb.ShortcutWidget:Gb.ShortcutWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ca){ca.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(ca){this.setProperty("title",ca);this.getSubmorphNamed("valueString").value=ca}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(ca){this.submorphs.forEach(function(Ha){return Ha.fontColor=ca})}},submorphs:{initialize:function(){this.submorphs=[Mc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],
fontSize:15,padding:Mc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Mc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:2443,end:3793})})(Mc.ContextSensitiveWidget);qd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("LayoutWidget")&&"function"===typeof Gb.LayoutWidget?Gb.LayoutWidget:Gb.LayoutWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=new Mc.popovers.LayoutPopover({hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition}),container:ca.context}),cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"layoutChanged",ca,"layoutChanged");Mc.signal(ca,"openWidget",Ha);cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,
end:4641})}(Mc.ShortcutWidget);Mc.LayoutWidget=qd;Mc.LayoutWidget=qd;Mc.LayoutWidget=qd;qd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("ColorWidget")&&"function"===typeof Gb.ColorWidget?Gb.ColorWidget:Gb.ColorWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"relayout",value:function(ca){ca?this.submorphs=this.color?this.color.isGradient?
this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var ca=this.color;if(2*ca.stops.length==this.submorphs.length-3){var Ha;for(Ha in this.color.stops){var cb=ca.stops[Ha];var Pb=cb.color,sc=cb.offset,Xc=$jscomp.makeIterator(this.submorphs[2+2*Ha].submorphs).next().value;cb=this.submorphs[3+2*Ha];Xc.fill=Pb;cb.value=(100*sc).toFixed()+"%"+(Ha<ca.stops.length-
1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Mc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Mc.pt(15,
15),fill:Mc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Mc.pt(5,7.5),fill:Mc.Color.white,borderColor:Mc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Mc.pt(0,0),Mc.pt(10,10)],borderColor:Mc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Mc.pt(15,15),fill:Mc.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Mc.pt(5,7.5),fill:this.color,borderColor:Mc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Mc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var ca=this.color,Ha=[{type:"label",padding:Mc.rect(0,0,5,0),value:"linearGradient"==ca.type?Mc.num.toDegrees(ca.vectorAsAngle()).toFixed()+"\u00b0,":""}],cb;for(cb in ca.stops){var Pb=ca.stops[cb],sc=Pb.color;Pb=Pb.offset;
Ha.push({extent:Mc.pt(this.fontSize,this.fontSize),fill:Mc.Color.transparent,layout:new Mc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:sc}]});Ha.push({type:"label",padding:Mc.rect(0,0,5,0),value:(100*Pb).toFixed()+"%"+(cb<ca.stops.length-1?",":"")})}return Ha}},{key:"onMouseDown",value:function(ca){this.openFillEditor()}},{key:"update",value:function(ca){this.color=ca}},{key:"openFillEditor",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==
cb.nextAddress)return Ha=new Mc.popovers.FillPopover({hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition}),handleMorph:ca.context,fillValue:ca.color,title:"Fill Control",gradientEnabled:ca.gradientEnabled}),cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"fillValue",ca,"update");Mc.signal(ca,"openWidget",Ha);cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=
new Mc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Mc.Color.white},nonSelectionFontColor:{defaultValue:Mc.Color.black},color:{defaultValue:Mc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(ca){this.getProperty("isSelected")!=ca&&(this.getSubmorphNamed("valueString").fontColor=ca?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",ca))}},submorphs:{after:["nonSelectionFontColor",
"selectionFontColor"],initialize:function(){Mc.connect(this,"color",this,"relayout",{converter:function(ca,Ha){return(Ha&&Ha.isColor)!=(ca&&ca.isColor)}});this.relayout(!0)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4705,end:10188})}(Mc.ContextSensitiveWidget);Mc.ColorWidget=
qd;Mc.ColorWidget=qd;Mc.ColorWidget=qd;qd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("BooleanWidget")&&"function"===typeof Gb.BooleanWidget?Gb.BooleanWidget:Gb.BooleanWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},
{key:"properties",get:function(){return{fontFamily:{defaultValue:Mc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(ca){this.setProperty("boolean",ca);this.value=Mc.obj.safeToString(ca);this.fontColor=this.boolean?Mc.Color.green:Mc.Color.red}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10197,end:10682})}(Mc.Label);Mc.BooleanWidget=qd;Mc.BooleanWidget=qd;Mc.BooleanWidget=qd;qd=Sa("N",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("NumberWidget")&&"function"===typeof Gb.NumberWidget?Gb.NumberWidget:Gb.NumberWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),
"onMouseDown",this).call(this,ca);"up"==ca.targetMorph.name&&this.increment();"down"==ca.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Mc.obj.dissoc(cd._get(Object.getPrototypeOf(Pa.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(ca,Ha){Ha=void 0===Ha?!0:Ha;this.setProperty("number",Ha?ca/this.scaleFactor:ca);Mc.signal(this,"number",this.number);this.relayout(Ha)}},{key:"relayoutButtons",value:function(){var ca=this.getSubmorphNamed("up"),
Ha=this.getSubmorphNamed("down");this.getSubmorphNamed("value");ca.height=Ha.height=Math.floor(this.height/2);ca.width=Ha.width=20}},{key:"onChange",value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),"onChange",this).call(this,ca);"extent"!=ca.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(ca){var Ha=this.getSubmorphNamed("value"),cb=this.showStepControls?20:0;Ha&&(this.autofit?(ca||(Ha.value=this.number*this.scaleFactor),Ha.fit(),this.height=Ha.height,this.width=
Ha.width+cb):ca||(Ha.width=this.width-cb),this.relayoutButtons(),ca||(Ha.value=Mc.num.roundTo(this.number*this.scaleFactor,1),Ha.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Ha.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Ha.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,
!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(ca){this.setProperty("autofit",ca);this.getSubmorphNamed("value").scaleToBounds=!ca}},number:{defaultValue:0,after:["unit","autofit"],set:function(ca){this.setProperty("number",ca);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
floatingPoint:{after:["number","submorphs"],set:function(ca){this.setProperty("floatingPoint",ca);this.get("value").floatingPoint=ca},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var ca=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&ca&&!!ca[1]}},padding:{isStyleProp:!0,defaultValue:Mc.rect(5,3,0,0),after:["submorphs"],set:function(ca){this.setProperty("padding",ca);this.getSubmorphNamed("value").padding=
ca}},extent:{defaultValue:Mc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(ca){this.get("value").baseFactor=ca}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var ca=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){ca.relayout()})}},fontColor:{isStyleProp:!0,
defaultValue:Mc.Color.rgbHex("#0086b3"),set:function(ca){this.setProperty("fontColor",ca)}},isSelected:{set:function(ca){this.getProperty("isSelected")!=ca&&(ca?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",ca))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(ca){this.setProperty("fontFamily",ca)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(ca){this.setProperty("fontSize",
ca)}},layout:{initialize:function(){this.layout=new Mc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(ca){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=ca)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(ca){0<ca.length||(this.submorphs=[new Mc.ValueScrubber({name:"value",unit:this.unit,
floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[Mc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[Mc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(Mc.Morph));Mc.NumberWidget=qd;Mc.NumberWidget=qd;Mc.NumberWidget=qd;Qb=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("ShadowWidget")&&"function"===typeof Gb.ShadowWidget?Gb.ShadowWidget:Gb.ShadowWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.openPopover()}},
{key:"openPopover",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=new Mc.popovers.ShadowPopover({hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition}),shadowValue:ca.shadowValue}),cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"shadowValue",ca,"shadowValue");Mc.connect(ca,"shadowValue",ca,"update");Mc.signal(ca,"openWidget",Ha);cb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var ca=this.shadowValue,Ha=ca.blur,cb=ca.spread,Pb=ca.distance;ca=ca.color;var sc=$jscomp.makeIterator(this.submorphs),Xc=sc.next().value,Nc=sc.next().value;Nc=$jscomp.makeIterator(Nc.submorphs).next().value;
sc=sc.next().value;Xc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Nc.fill=ca;sc.value=", "+Ha+"px, "+Pb+"px, "+cb+"px)"}},{key:"initShadowDisplay",value:function(){var ca=this.shadowValue,Ha=ca.blur,cb=ca.spread,Pb=ca.distance;ca=ca.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Mc.morph({fill:Mc.Color.transparent,extent:Mc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Mc.pt(this.fontSize,
this.fontSize),position:Mc.pt(2,2),fill:ca,borderColor:Mc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Ha+"px, "+Pb+"px, "+cb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(ca){this.setProperty("shadowValue",ca);this.renderShadowDisplay()}},fill:{defaultValue:Mc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(ca){this.submorphs.forEach(function(Ha){return Ha.fontColor=ca})}},isSelected:{defaultValue:!1,set:function(ca){this.setProperty("isSelected",ca);this.fontColor=ca?Mc.Color.white:Mc.Color.black}},layout:{initialize:function(){this.layout=new Mc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(Mc.Morph);Mc.ShadowWidget=Qb;Mc.ShadowWidget=Qb;Mc.ShadowWidget=Qb;Qb=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("PointWidget")&&"function"===typeof Gb.PointWidget?Gb.PointWidget:Gb.PointWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.openPopover()}},{key:"openPopover",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=new Mc.popovers.PointPopover({pointValue:ca.pointValue,hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition})}),cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"pointValue",ca,"pointValue");Mc.signal(ca,"openWidget",Ha);
cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(ca){this.setProperty("isSelected",ca);this.fontColor=ca?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Mc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Mc.Color.black},fontFamily:{defaultValue:Mc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(ca){var Ha=Mc.Color.rgbHex("#0086b3");this.setProperty("pointValue",ca);this.textAndAttributes=["pt(",null,ca.x.toFixed(),{fontColor:Ha},",",{},ca.y.toFixed(),{fontColor:Ha},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(Mc.Label);Mc.PointWidget=Qb;Mc.PointWidget=Qb;Mc.PointWidget=Qb;Qb=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("PaddingWidget")&&"function"===typeof Gb.PaddingWidget?Gb.PaddingWidget:Gb.PaddingWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.openPopover()}},{key:"openPopover",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=new Mc.popovers.RectanglePopover({hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition}),rectangle:ca.rectangle}),Ha.relayout(),cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"rectangle",ca,"rectangle");Mc.signal(ca,
"openWidget",Ha);cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Mc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(ca){this.setProperty("isSelected",ca);this.fontColor=ca?Mc.Color.white:Mc.Color.black}},rectangle:{defaultValue:Mc.rect(0),set:function(ca){this.setProperty("rectangle",
ca);this.value=Mc.obj.safeToString(ca)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(Mc.Label);Mc.PaddingWidget=Qb;Mc.PaddingWidget=Qb;Mc.PaddingWidget=Qb;Qb=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Pa=Gb.hasOwnProperty("IconWidget")&&
"function"===typeof Gb.IconWidget?Gb.IconWidget:Gb.IconWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"onMouseDown",value:function(ca){this.openPopover()}},{key:"openPopover",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=new Mc.popovers.IconPopover({hasFixedPosition:!!ca.ownerChain().find(function(Pb){return Pb.hasFixedPosition})}),
cb.yield(Ha.fadeIntoWorld(ca.globalBounds().center()),2);Mc.connect(Ha,"select",ca,"iconValue",{converter:function(Pb){return Pb&&Mc.Icon.makeLabel(Pb).value},varMapping:{Icon:Mc.Icon}});Mc.signal(ca,"openWidget",Ha);cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Mc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,
get:function(){return this.value},set:function(ca){this.value=ca||"No Icon"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(Mc.Label);Mc.IconWidget=Qb;Mc.IconWidget=Qb;Mc.IconWidget=Qb;Qb=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
Pa=Gb.hasOwnProperty("StringWidget")&&"function"===typeof Gb.StringWidget?Gb.StringWidget:Gb.StringWidget=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"truncate",value:function(ca){return 200<ca.length?ca.slice(0,20)+"...":ca}},{key:"onFocus",value:function(ca){var Ha=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pb){if(1==Pb.nextAddress)return cd._get(Object.getPrototypeOf(Pa.prototype),
"onFocus",Ha).call(Ha,ca),Ha.readOnly?Pb.return():Ha.stringTooLong?Pb.yield(Ha.world().editPrompt("edit string",{requester:Ha,input:Ha.stringValue}),2):(Ha.borderColor=Mc.Color.white.withA(.9),Ha.textString=Ha.stringValue,Pb.return());cb=Pb.yieldResult;if("string"===typeof cb)Ha.onInput(cb);Pb.jumpToEnd()})}},{key:"onBlur",value:function(ca){cd._get(Object.getPrototypeOf(Pa.prototype),"onBlur",this).call(this,ca);this.readOnly||(this.borderColor=Mc.Color.transparent,this.onInput(this.textString))}},
{key:"onInput",value:function(ca){this.owner.focus();Mc.signal(this,"inputAccepted",ca);this.stringValue=ca}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Mc.Color.transparent},fontColor:{defaultValue:Mc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Mc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Mc.rect(0,
0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(ca){this.setProperty("stringValue",ca);this.textString=this.truncate(ca);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(ca){this.setProperty("isSelected",ca);this.fontColor=ca?Mc.Color.white:Mc.Color.blue}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(Mc.InputLine);Mc.StringWidget=Qb;Mc.StringWidget=Qb;Mc.StringWidget=Qb;Mc.valueWidgets=Ka;Object.assign(Mc.valueWidgets,{NumberWidget:Mc.NumberWidget,StringWidget:Mc.StringWidget,IconWidget:Mc.IconWidget,PaddingWidget:Mc.PaddingWidget,ShadowWidget:Mc.ShadowWidget,PointWidget:Mc.PointWidget,
BooleanWidget:Mc.BooleanWidget,LayoutWidget:Mc.LayoutWidget,ColorWidget:Mc.ColorWidget});var Hb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Hb.Ellipse=hc;Hb.Icon=ke;Hb.Morph=ue;Hb.Path=yd;Hb.Text=Jd;Hb.HorizontalLayout=hd;Hb.VerticalLayout=Eb;Hb.morph=jc;Hb.Color=Fc;Hb.pt=Vb;Hb.rect=Zc;Hb.Rectangle=ed;Hb.arr=Mb;Hb.connect=ld;Hb.disconnect=gc;Hb.LabeledCheckBox=tc;Hb.DropDownSelector=Ec;Hb.Button=ad;Hb.Menu=td;Hb.NumberWidget=qd;Hb.InteractiveMorphSelector=Vc;Hb.easings=bd;(function(Tb){var Gb=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("ProportionSlider")&&"function"===typeof Gb.ProportionSlider?Gb.ProportionSlider:Gb.ProportionSlider=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",
value:function(ca){this.axis.adjustStretch(this.axis.getDelta(ca));this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:1139})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("MinViewer")&&"function"===typeof Gb.MinViewer?Gb.MinViewer:Gb.MinViewer=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+
"px !"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Pa=Gb.hasOwnProperty("MinSlider")&&"function"===typeof Gb.MinSlider?Gb.MinSlider:Gb.MinSlider=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",
value:function(){var ca=$jscomp.makeIterator(this.submorphs),Ha=ca.next().value;ca=ca.next().value;this.axis.forceMenuHidden=!0;Ha.visible=!0;this.active=ca.visible=!0}},{key:"onDrag",value:function(ca){this.axis.targetAxis.min+=-this.getDelta(ca);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var ca=$jscomp.makeIterator(this.submorphs),Ha=ca.next().value;ca=ca.next().value;this.axis.forceMenuHidden=!1;Ha.visible=!1;this.active=ca.visible=!1;this.shouldHide&&(this.shouldHide=
this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Hb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:1363,end:2515})})(Hb.Ellipse);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("AxisHalo")&&"function"===typeof Gb.AxisHalo?Gb.AxisHalo:Gb.AxisHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var ca=this.minSlider(),Ha=this.axisMenu(),cb=this.proportionSlider();cb.addMorph(ca);
this.submorphs=[cb,Ha];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(ca){this._forceMenuHidden=ca;this.axisMenu.visible=!ca}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();
this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(ca){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var ca=this.proportionViewer();return this.halo.addGuide(new Hb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:ca,submorphs:[this.devider(),ca]}))}},{key:"devider",value:function(){return new Hb.Morph({visible:!this.lastAxis,
fill:Hb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var ca=this.minSpaceVisualizer(),Ha=this.minViewer();return this.halo.addGuide(new Hb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[ca,Ha]}))}},{key:"minViewer",value:function(){return this.viewer(new Hb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Hb.Path(Object.assign({position:Hb.pt(-1,
-1),borderStyle:"dashed",borderColor:Hb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var ca=this,Ha=this.minSpaceBorder();return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Ha],alignWithTarget:function(){this.extent=ca.getMinSpaceExtent();this.topLeft=Hb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var ca=this.lockButton(),Ha=this.menuButton(),cb=this;return new Hb.Morph({layout:this.getMenuLayout(),
submorphs:[ca,Ha],fill:Hb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(cb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var ca=this;return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{center:Hb.pt(12.5,12.5),fill:Hb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){ca.targetAxis.fixed?(this.fontColor=Hb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Hb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){ca.targetAxis.fixed=!ca.targetAxis.fixed;ca.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var ca=this,Ha=this;return new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{fill:Hb.Color.transparent,styleClasses:["fa","fa-cog"],center:Hb.pt(12.5,12.5)}],onMouseDown:function(cb){Ha.forceMenuVisible=!0;
this.addMorph(cb.state.menu=new Hb.Menu({position:Hb.pt(15,15),items:[["Remove "+Ha.subject,function(){ca.targetAxis.remove();ca.halo.initGuides();ca.halo.alignWithTarget()}],["Insert "+Ha.subject+" before",function(){ca.targetAxis.addBefore();ca.halo.initGuides();ca.halo.alignWithTarget()}],["Insert "+Ha.subject+" after",function(){ca.targetAxis.addAfter();ca.halo.initGuides();ca.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(ca){var Ha=ca.position;ca=ca.alignWithTarget;return this.halo.addGuide(new Hb.Text({styleClasses:["Halo"],
padding:Hb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Hb.Color.white,fill:Hb.Color.black.withA(.5),position:Ha,alignWithTarget:ca,readOnly:!0}))}},{key:"proportionViewer",value:function(){var ca=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=ca.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},
fill:{defaultValue:Hb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("RowHalo")&&
"function"===typeof Gb.RowHalo?Gb.RowHalo:Gb.RowHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(ca){this.targetAxis.height+=ca}},{key:"getDelta",value:function(ca){return ca.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Hb.pt(-45,
this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Hb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(ca){return this.targetAxis.length>ca.height?Hb.pt(2,5):Hb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Hb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",
value:function(){return Hb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(this.container.width+50,2),vertices:[Hb.pt(0,1),Hb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(ca){return Hb.pt(0,ca.owner.height-5).extent(Hb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Hb.pt(15,4).extent(Hb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(Hb.AxisHalo);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
Pa=Gb.hasOwnProperty("ColumnHalo")&&"function"===typeof Gb.ColumnHalo?Gb.ColumnHalo:Gb.ColumnHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(ca){var Ha=ca.col;ca=ca.halo;cd._get(Object.getPrototypeOf(Pa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:ca.target.col(Ha),halo:ca})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(ca){this.targetAxis.width+=ca}},{key:"getDelta",value:function(ca){return ca.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Hb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Hb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(ca){return this.targetAxis.length>ca.width?Hb.pt(5,3):Hb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Hb.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Hb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(2,this.container.height+50),vertices:[Hb.pt(1,0),Hb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(ca){return Hb.pt(ca.owner.width-5,0).extent(Hb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Hb.pt(4,15).extent(Hb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9801,end:11056})})(Hb.AxisHalo);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("CellGuide")&&"function"===typeof Gb.CellGuide?Gb.CellGuide:Gb.CellGuide=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"menuItems",value:function(){var ca=this,Ha=Hb.Icon.textAttribute("check-square-o"),cb=Hb.Icon.textAttribute("square-o");
Ha[1].textStyleClasses.push("annotation");cb[1].textStyleClasses.push("annotation");cb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?cb:Ha)),function(){ca.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ha:cb)),function(){ca.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Hb.Rectangle).sides),$jscomp.arrayFromIterable((new Hb.Rectangle).corners)).map(function(Pb){return[[Pb,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(ca.cellGroup.align==Pb?Ha:cb),["  ",null]),function(){return ca.cellGroup.align=Pb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Pb=ca.cellGroup.morph;Pb&&(ca.world().firstHand.grab(Pb),ca.world().firstHand.longClickGrab=!0,Pb.position=Hb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("LayoutHalo")&&"function"===typeof Gb.LayoutHalo?Gb.LayoutHalo:Gb.LayoutHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return cd(Pa,Tb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(Hb.Morph);Ka=Sa("G",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Gb.GridLayoutHalo?Gb.GridLayoutHalo:Gb.GridLayoutHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return cd(Pa,Tb,[{key:"previewDrop",value:function(ca){1>ca.length||(ca=this.cellGuides.find(function(Ha){return Ha.fullContainsWorldPoint($world.firstHand.position)}),ca!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=ca)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(ca){var Ha=this;this.currentCell&&ca.whenRendered().then(function(){return Ha.currentCell.cellGroup.morph=ca})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var ca=this.target,Ha=new Hb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Hb.Color.transparent,checked:ca.compensateOrigin}),cb=new Hb.LabeledCheckBox({label:"Resize Submorphs",fill:Hb.Color.transparent,name:"fitToCell",checked:ca.fitToCell});Hb.connect(Ha,"checked",ca,"compensateOrigin");Hb.connect(cb,"checked",ca,"fitToCell");Hb.connect(Ha,"checked",this,"alignWithTarget");return[Ha,cb]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Hb.arr.reverse(this.guides).forEach(function(ca){return ca.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var ca=this;Hb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Ha){return Ha.cellGroup})).forEach(function(Ha){return ca.addMorph(ca.cellGuide(Ha))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var ca=this,Ha=this.addMorph({fill:Hb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(cb){Ha.addMorph(ca.cellGuide(cb))});this.cellGuides=Ha.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(ca){ca.isHaloItem=!0;this.guides.push(ca);return ca}},
{key:"initRowGuides",value:function(){var ca=this,Ha=this;this.addGuide(this.addMorph(new Hb.Morph({width:25,fill:Hb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Hb.pt(-5,0),alignWithTarget:function(){this.height=Ha.container.height}})));Hb.arr.range(0,this.target.rowCount-1).forEach(function(cb){ca.addMorph(new Hb.RowHalo({row:cb,halo:ca}))})}},{key:"initColumnGuides",value:function(){var ca=this,Ha=this;this.addGuide(this.addMorph(new Hb.Morph({height:25,fill:Hb.Color.gray.withA(.7),
borderRadius:15,width:this.container.width,bottomLeft:Hb.pt(0,-5),alignWithTarget:function(){this.width=Ha.container.width}})));Hb.arr.range(0,this.target.columnCount-1).forEach(function(cb){ca.addMorph(new Hb.ColumnHalo({col:cb,halo:ca}))})}},{key:"resizer",value:function(){var ca=this;return this.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Ha){ca.container.resizeBy(Ha.state.dragDelta);ca.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
ca.extent}}))}},{key:"cellResizer",value:function(ca,Ha){var cb=this,Pb="topLeft"==Ha?"bottomRight":"topLeft";return new Hb.Ellipse({borderWidth:1,visible:!1,borderColor:Hb.Color.black,nativeCursor:"nwse-resize",removeCell:function(sc){ca.disconnect(sc);cb.alignWithTarget()},addCell:function(sc){ca.connect(sc);cb.alignWithTarget()},start:function(){this.fixpointCell=ca[Pb];this.draggedDelta=ca.bounds().partNamed(Ha);this.debugMorph=cb.addMorph(new Hb.Morph({fill:Hb.Color.orange.withA(.5)}))},update:function(sc){var Xc=
this;this.draggedDelta=this.draggedDelta.addPt(sc);var Nc=Hb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Nc);cb.cells.forEach(function(Ed){var Ld=Nc.intersection(Ed.bounds()).area()/Ed.bounds().area();ca.includes(Ed)&&.1>Ld&&Xc.removeCell(Ed);!ca.includes(Ed)&&Ld>1/3&&Xc.addCell(Ed)})},onDragEnd:function(sc){this.debugMorph.remove()},onDragStart:function(sc){this.start(sc.position)},onDrag:function(sc){this.update(sc.state.dragDelta)}})}},{key:"cellGuide",
value:function(ca){var Ha=this,cb=this.cellResizer(ca,"topLeft"),Pb=this.cellResizer(ca,"bottomRight");return this.addGuide(new Hb.CellGuide({cellGroup:ca,bounds:ca.bounds(),fill:Hb.Color.transparent,borderColor:Hb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[cb,Pb],onMouseDown:function(sc){this.becomeActive()},deactivate:function(){this.borderColor=Hb.Color.orange;this.fill=Hb.Color.transparent;this.submorphs.forEach(function(sc){sc.visible=!1})},becomeActive:function(){Ha.guides.forEach(function(sc){sc.isCell&&
sc.deactivate()});this.borderColor=Hb.Color.rgbHex("#1565C0");this.fill=Hb.Color.rgbHex("#1565C0").withA(.3);Ha.addMorph(this.remove());this.submorphs.forEach(function(sc){sc.visible=!0})},startPreview:function(sc){this.fill=Hb.Color.orange.withA(.7)},stopPreview:function(sc){this.fill=Hb.Color.transparent},onDrop:function(sc){var Xc=$jscomp.makeIterator(sc.hand.grabbedMorphs).next().value;sc.hand.dropMorphsOn(Ha.container);ca.morph=Xc},alignWithTarget:function(){ca.bounds().isNonEmpty()?(this.setBounds(ca.bounds()),
cb.center=this.innerBounds().topLeft(),Pb.center=this.innerBounds().bottomRight()):(Hb.arr.remove(Ha.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},cells:{derived:!0,get:function(){return Hb.arr.flatten(this.target.col(0).items.map(function(ca){return ca.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(Hb.LayoutHalo));Hb.GridLayoutHalo=Ka;Hb.GridLayoutHalo=Ka;Hb.GridLayoutHalo=Ka;qd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Gb.TilingLayoutHalo?Gb.TilingLayoutHalo:Gb.TilingLayoutHalo=
function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"remove",value:function(){cd._get(Object.getPrototypeOf(Pa.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(ca){}},{key:"removePreviews",value:function(){this.previews.forEach(function(ca){return ca.clear()})}},
{key:"previewDrop",value:function(ca){var Ha=this;0<this.previews.length||(this.previews=ca.map(function(cb){return Ha.container.addMorph({type:Hb.DropPreview,bounds:cb.bounds()})}),this.previews.forEach(function(cb){cb.step()}))}},{key:"updateSpacing",value:function(ca){this.target.spacing=ca}},{key:"updateAxis",value:function(ca){this.target.axis=ca}},{key:"updateAlign",value:function(ca){this.target.align=ca}},{key:"optionControls",value:function(){var ca=this.target,Ha=new Hb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:ca.axis,values:["row","column"]}),cb=new Hb.DropDownSelector({borderRadius:2,padding:3,selectedValue:ca.align,values:["left","center"]});ca=new Hb.NumberWidget({min:0,number:ca.spacing,padding:Hb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Hb.Color.gray,unit:"px"});Hb.connect(ca,"update",this,"updateSpacing");Hb.connect(cb,"update",this,"updateAlign");Hb.connect(Ha,"update",this,"updateAxis");var Pb={type:"label",padding:Hb.rect(0,5,5,5),fill:Hb.Color.transparent,
fontColor:Hb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},Pb,{textString:"Submorph Spacing"}),ca],[Object.assign({},Pb,{textString:"Tiling Align"}),cb],[Object.assign({},Pb,{textString:"Tiling Axis"}),Ha]].map(function(sc){return{submorphs:sc,fill:null,layout:new Hb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},previews:{defaultValue:[]}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(Hb.LayoutHalo);Hb.TilingLayoutHalo=qd;Hb.TilingLayoutHalo=qd;Hb.TilingLayoutHalo=qd;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("DropPreview")&&"function"===typeof Gb.DropPreview?
Gb.DropPreview:Gb.DropPreview=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var ca=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Ha=Hb.easings.inOutQuad,cb.yield(ca.animate({opacity:.5,duration:(ca.pulseDuration-10)/2,easing:Ha}),2);if(3!=cb.nextAddress)return cb.yield(ca.animate({opacity:1,
duration:(ca.pulseDuration-10)/2,easing:Ha}),3);ca.stopped||ca.step();cb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Hb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(Hb.Morph);qd=Sa("F",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Gb.FlexLayoutHalo?Gb.FlexLayoutHalo:Gb.FlexLayoutHalo=function(ca){ca&&
ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,Tb,[{key:"handleDrop",value:function(ca){}},{key:"previewDrop",value:function(ca){var Ha=this;0<this.previews.length||(this.previews=ca.map(function(cb){return Ha.container.addMorph({type:Hb.DropPreview,position:Ha.container.localize(Ha.world().firstHand.position),extent:cb.bounds().extent()})}),this.previews.forEach(function(cb){cb.step()}))}},{key:"remove",value:function(){cd._get(Object.getPrototypeOf(Pa.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(ca){return ca.clear()})}},{key:"onDrop",value:function(ca){this.removePreviews();ca.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(ca){ca&&(this.originalExtent=this.container.extent);this.target.autoResize=ca;ca||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(ca){this.target.resizeSubmorphs=ca;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(ca){this.target.align=ca}},{key:"updateDirectionPolicy",value:function(ca){this.target.direction=ca}},{key:"updateSpacing",value:function(ca){this.target.spacing=ca}},{key:"optionControls",value:function(){var ca=this.target,Ha=ca.possibleAlignValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Hb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:ca.align,values:ca.possibleAlignValues})]}:null,cb=ca.possibleDirectionValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Hb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:ca.direction,values:ca.possibleDirectionValues})]}:
null,Pb=new Hb.NumberWidget({fill:Hb.Color.white,borderWidth:1,borderRadius:4,padding:Hb.rect(5,4,0,0),borderColor:Hb.Color.gray,min:0,number:ca.spacing,unit:"px"}),sc=new Hb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Hb.Color.transparent,checked:ca.autoResize});ca=new Hb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Hb.Color.transparent,checked:ca.resizeSubmorphs});Hb.connect(Pb,"update",this,"updateSpacing");
Hb.connect(sc,"checked",this,"updateAutoResizePolicy");Hb.connect(ca,"checked",this,"updateResizeSubmorphsPolicy");Ha&&Hb.connect(Ha.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");cb&&Hb.connect(cb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[sc,ca].concat($jscomp.arrayFromIterable([Ha,cb].filter(Boolean)),[{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Hb.Color.gray.darker(),padding:Hb.rect(0,
5,5,5)},Pb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:23254,end:27441})}(Hb.LayoutHalo));Hb.FlexLayoutHalo=qd;Hb.FlexLayoutHalo=qd;Hb.FlexLayoutHalo=qd;Qb=Sa("c",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Pa=Gb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Gb.ProportionalLayoutHalo?Gb.ProportionalLayoutHalo:Gb.ProportionalLayoutHalo=function(ca){ca&&ca[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return cd(Pa,
Tb,[{key:"handleDrop",value:function(ca){}},{key:"onDrop",value:function(ca){ca.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(ca){var Ha={};this.target.changeSettingsFor(ca.submorph,(Ha[ca.axis]=ca.policy,Ha),!0)}},{key:"onSubmorphSettingsDragStart",value:function(ca,Ha){var cb=this;ca.stop();var Pb=this.target.settingsFor(Ha);Ha="";for(var sc in Pb)Ha+=sc+":"+
Pb[sc]+" ";var Xc=Hb.morph({type:"label",value:Ha,isLayoutable:!1});Xc.wantsToBeDroppedOn=function(Nc){return cb.target.layoutableSubmorphs.includes(Nc)};Xc.onBeingDroppedOn=function(Nc,Ed){Xc.remove();if(Nc=cb.target.layoutableSubmorphs.includes(Ed)?Ed:ca.world.morphsContainingPoint(ca.hand.position).find(function(Ld){return cb.target.layoutableSubmorphs.includes(Ld)}))cb.updateSubmorphProportionalLayoutSettings({policy:Pb.x,axis:"x",submorph:Nc}),cb.updateSubmorphProportionalLayoutSettings({policy:Pb.y,
axis:"y",submorph:Nc}),Nc.show(),$world.setStatusMessage("layout settings applied")};ca.hand.grab(Xc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var ca=this,Ha,cb,Pb,sc,Xc,Nc,Ed,Ld,Ye,Fe,ye,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ke){switch(Ke.nextAddress){case 1:return Ha=ca.target.layoutableSubmorphs,ca.env.eventDispatcher.isKeyPressed("Shift")?(Pb=Ha.map(function(Ie){return{isListItem:!0,string:String(Ie),value:Ie}}),Ke.yield($world.listPrompt("Select morph",
Pb,{requester:ca,onSelection:function(Ie){return Ie.show()}}),5)):Ke.yield(Hb.InteractiveMorphSelector.selectMorph(ca.world(),ca,function(Ie){return Ha.includes(Ie)}),4);case 4:cb=Ke.yieldResult;Ke.jumpTo(3);break;case 5:sc=Ke.yieldResult,Xc=$jscomp.makeIterator(sc.selected),cb=Xc.next().value;case 3:if(!cb)return Ke.return();Nc=ca.state.popover.get("controlContainer");Ed=Nc.getAllNamed(/submorph config/);Ld=["move","resize","scale","fixed"];Ye=ca.target.settingsFor(cb);Ed.length||(Nc.submorphs=[].concat($jscomp.arrayFromIterable(Nc.submorphs),
[{name:"submorph config X-Axis policy",position:Hb.pt(0,ca.height),fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Hb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Ye.x,values:Ld})]},{name:"submorph config Y-Axis policy",position:Hb.pt(0,ca.height),fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),
submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Hb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Ye.y,values:Ld})]},Hb.morph({position:Hb.pt(0,ca.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Fe=Nc.getSubmorphNamed("x-axis policy selector");ye=Nc.getSubmorphNamed("y-axis policy selector");z=Nc.getSubmorphNamed("dragme");Hb.disconnect(Fe,"selectedValue",ca,"updateSubmorphProportionalLayoutSettings");Hb.disconnect(ye,
"selectedValue",ca,"updateSubmorphProportionalLayoutSettings");Fe.selectedValue=Ye.x;ye.selectedValue=Ye.y;Hb.connect(z,"onDragStart",ca,"onSubmorphSettingsDragStart",{updater:function(Ie,$d){return Ie($d,cb)},varMapping:{submorph:cb}});Hb.connect(Fe,"selectedValue",ca,"updateSubmorphProportionalLayoutSettings",{converter:function(Ie){return{policy:Ie,axis:"x",submorph:cb}},varMapping:{submorph:cb}});Hb.connect(ye,"selectedValue",ca,"updateSubmorphProportionalLayoutSettings",{converter:function(Ie){return{policy:Ie,
axis:"y",submorph:cb}},varMapping:{submorph:cb}});Ke.jumpToEnd()}})}},{key:"optionControls",value:function(ca){this.state.popover=ca;var Ha=this.target;ca=new Hb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ha.xAxisEnabled});Ha=new Hb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ha.yAxisEnabled});var cb=new Hb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Hb.Icon.textAttribute("crosshairs")),
["\u00a0Change submorph settings"])});Hb.connect(ca,"checked",this,"updateXAxisEnabled");Hb.connect(Ha,"checked",this,"updateYAxisEnabled");Hb.connect(cb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[cb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(Hb.LayoutHalo));Hb.ProportionalLayoutHalo=Qb;Hb.ProportionalLayoutHalo=Qb;Hb.ProportionalLayoutHalo=Qb;var Xd=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Xd.Halo=Rb;Xd.MorphHighlighter=eb;Xd.InteractiveMorphSelector=Vc;Xd.StatusMessage=Ba;Xd.StatusMessageForMorph=Fb;Xd.show=Oa;Xd.showConnector=Da;Xd.ProportionalLayoutHalo=Qb;
Xd.GridLayoutHalo=Ka;Xd.FlexLayoutHalo=qd;Xd.showAndSnapToGuides=zc;Xd.removeSnapToGuidesOf=fc;Xd.StatusMessage=Ba;Xd.StatusMessage=Ba;Xd.StatusMessageForMorph=Fb;Xd.StatusMessageForMorph=Fb;Xd.show=Oa;Xd.show=Oa;Xd.showConnector=Da;Xd.showConnector=Da;Xd.Halo=Rb;Xd.Halo=Rb;Xd.MorphHighlighter=eb;Xd.MorphHighlighter=eb;Xd.InteractiveMorphSelector=Vc;Xd.InteractiveMorphSelector=Vc;Xd.ProportionalLayoutHalo=Qb;Xd.ProportionalLayoutHalo=Qb;Xd.GridLayoutHalo=Ka;Xd.GridLayoutHalo=Ka;Xd.FlexLayoutHalo=
qd;Xd.FlexLayoutHalo=qd;Xd.showAndSnapToGuides=zc;Xd.showAndSnapToGuides=zc;Xd.removeSnapToGuidesOf=fc;Xd.removeSnapToGuidesOf=fc;Ba=Object.freeze({__proto__:null,StatusMessage:Ba,StatusMessageForMorph:Fb,show:Oa,showConnector:Da,Halo:Rb,MorphHighlighter:eb,InteractiveMorphSelector:Vc,ProportionalLayoutHalo:Qb,GridLayoutHalo:Ka,FlexLayoutHalo:qd,showAndSnapToGuides:zc,removeSnapToGuidesOf:fc,SvgStyleHalo:void 0});Sa("i",Ba);Sa({_:void 0,d:void 0})}}});