System.register("./__root_module__-3c9a1ccb.js kld-intersections ./editor-plugin-d3ce2fd0.js ./index-f326120b.js ./index-d6506ab5.js ./index-443b373b.js ./index-b3480c85.js ./color-picker-075382cf.js ./editor-plugin-1e8a957c.js ./index-bedb66bb.js".split(" "),function(){var sa,lb,Eb,Wb,Qb,Bd,Fc,wd,Kc,Gc,Yc,jd,Dd,od,Zc,Ra,tb,dc,bc,Xc,Oc,$b,zc,Fb,Cb,pc,Pc,wb,db,Ta,cb,ma,La,fb,pb,xb,Wa,Xa,Ab,kc;return{setters:[function(Ub){sa=Ub.aq;lb=Ub.ag;Eb=Ub.ay;Wb=Ub.at;Qb=Ub.a1;Bd=Ub.ar;Fc=Ub.ao;wd=Ub.as;
Kc=Ub.C;Gc=Ub.a0;Yc=Ub.a4;jd=Ub._;Dd=Ub.aT;od=Ub.P;Zc=Ub.a5;Ra=Ub.az;tb=Ub.ai;dc=Ub.aS;bc=Ub.am;Xc=Ub.aj;Oc=Ub.al;$b=Ub.bn;zc=Ub.bp;Fb=Ub.bQ;Cb=Ub.a$;pc=Ub.bf;Pc=Ub.aL;wb=Ub.n;db=Ub.$;Ta=Ub.aU;cb=Ub.aV;ma=Ub.an;La=Ub.a2;fb=Ub.ap;pb=Ub.bR},function(){},function(Ub){xb=Ub.I},function(Ub){Wa=Ub.d;Xa=Ub.s;Ab=Ub.I;kc=Ub.M},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function Ub(Fa){var nc=Fa.sourceObj,$a=Fa.targetObj;nc.isMorph&&$a.isMorph?(nc.show(),
$a.show(),Jc.showConnector&&Jc.showConnector(nc,$a)):Jc.show(String(Fa))}function qc(Fa){var nc=Fa.sourceObj,$a=Fa.sourceAttrName,Pa=Fa.targetObj,Oa=Fa.targetMethodName,Kb=Fa.getConverter();Fa=Fa.getUpdater();return Jc.printConnectionElements(nc,$a,Pa,Oa,Kb,Fa)}function wc(Fa,nc,$a,Pa,Oa,Kb){Fa="/* global connect, source, target */\nconnect(source, '"+nc+"', target, '"+Pa+"'";if(Oa||Kb)Fa+=", {\n";Oa&&(Fa+="  converter: "+Oa);Oa&&Kb&&(Fa+=",");Oa&&(Fa+="\n");Kb&&(Fa+="  updater: "+Kb+"\n");if(Oa||
Kb)Fa+="}";return Fa+");"}function I(Fa,nc){var $a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){if(1==Pa.nextAddress)return Pa.yield(Jc.InteractiveMorphSelector.selectMorph(),2);$a=Pa.yieldResult;return Pa.return($a?Jc.interactiveConnectGivenSourceAndTarget(Fa,nc,$a):null)})}function T(Fa,nc,$a,Pa){var Oa,Kb,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bd){Oa=$a&&$a.world().targetDataBindings($a);Kb=Fa.world();if(!Oa||!Oa.length)return Kb.setStatusMessage("connect canceled"),
bd.return();Ib=Oa.map(function(Od){return[Od[0].group||"uncategorized",Od.map(function(Zd){return[Zd.signature||Zd.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Te){return 1==Te.nextAddress?Te.yield(Jc.interactivelyEvaluateConnection({sourceObj:Fa,sourceAttr:nc,targetObj:$a,targetAttr:Zd.name,onConnect:Pa}),2):Te.return(Te.yieldResult)})}]})]});Ib.push(["custom...",function(){var Od;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){return 1==Zd.nextAddress?
Zd.yield(Kb.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Od=Zd.yieldResult)?Zd.yield(Jc.interactivelyEvaluateConnection({sourceObj:Fa,sourceAttr:nc,targetObj:$a,targetAttr:Od,onConnect:Pa}),0):Zd.jumpTo(0)})}]);return bd.yield($a.openMenu(Ib).whenFinished(),0)})}function ta(Fa,nc,$a,Pa){nc=void 0===nc?"confirm connection":nc;var Oa,Kb,Ib,bd,Od,Zd,Te;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qc){Oa=
Fa;Kb=Oa.sourceObj;Ib=Oa.sourceAttrName;bd=Oa.targetObj;Od=Oa.targetMethodName;Zd=Fa.getConverter();Te=Fa.getUpdater();return Qc.return(Jc.interactivelyEvaluateConnection({sourceObj:Kb,sourceAttr:Ib,targetObj:bd,targetAttr:Od,converter:Zd,updater:Te,prompt:nc,highlight:$a,onConnect:Pa}))})}function Ca(Fa,nc,$a,Pa,Oa){Pa=void 0===Pa?{}:Pa;Oa=Jc.rect(0).sides.concat(Jc.rect(0).corners);$a=$a||new Jc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Jc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Jc.Color.transparent,
nativeCursor:"auto"},end:{fill:Jc.Color.orange}}},Pa,{hasFixedPosition:!0}));$a.startPoint.attachTo(Fa,"rightCenter");nc.isMorph?(Pa=nc.globalBounds().partNameNearest(Oa,Fa.globalPosition),Fa.globalPosition.equals(nc.globalBounds().partNamed(Pa))&&nc.globalBounds().partNameNearest(Jc.arr.without(Oa,Pa),Fa.globalPosition),$a.endPoint.attachTo(nc,"leftCenter")):(Oa=Fa.globalBounds().topRight().addPt(Jc.pt(100,0)),nc=Jc.morph({type:"label",value:nc.toString(),styleClasses:["Tooltip"],padding:Jc.rect(8,
4)}).openInWorld(Oa),nc.position=Fa.world().bounds().translateForInclusion(nc.bounds()).topLeft(),Jc.once($a,"remove",nc,"remove"),$a.endPoint.attachTo(nc,"leftCenter"));return $a}function Mb(Fa){var nc,$a,Pa,Oa,Kb,Ib,bd,Od,Zd,Te,Qc,Xd,kd,Bb,da,ra,ub,H,ia,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){switch(rb.nextAddress){case 1:nc=Fa;$a=nc.sourceObj;Pa=nc.sourceAttr;Oa=nc.targetObj;Kb=nc.targetAttr;Ib=nc.converter;bd=nc.updater;Od=nc.prompt;Zd=void 0===nc.highlight?!0:nc.highlight;
Te=nc.onConnect;Qc="lively://lively.bindings-interactive-connect/x"+$a.id;Xd={context:window,format:"esm",targetModule:Qc,classTransform:Jc.classToFunctionTransform};kd=Jc.printConnectionElements($a,Pa,Oa,Kb,Ib,bd);Oa.isMorph&&$a.isMorph&&(Bb=Oa.propertiesAndPropertySettings().properties[Kb]||{type:typeof Oa[Kb]},da=Bb.type,ra=$a.propertiesAndPropertySettings().properties[Pa]||{type:typeof $a[Pa]},ub=ra.type,ub!==da&&(Od=!0));H={};Object.assign(lively.modules.module(Qc).recorder,(H.source=$a,H.target=
Oa,H.connect=Fc,H.once=wd,H[Pa]=$a[Pa],H));if(!Od){ia=kd;rb.jumpTo(2);break}return rb.yield($world.editPrompt(Od,{input:kd,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Xd,animated:!1}),3);case 3:if(ia=rb.yieldResult,!ia)return $world.setStatusMessage("connect canceled"),rb.return();case 2:return rb.yield(lively.vm.runEval(ia,Xd),4);case 4:Ba=rb.yieldResult;if(Ba.isError)return $world.logError(Ba.value),rb.return(Mb({sourceObj:$a,sourceAttr:Pa,targetObj:Oa,
targetAttr:Kb,converter:Ib,updater:bd,prompt:"confirm connection",highlight:Zd,onConnect:Te}));Zd&&($world.setStatusMessage("connected!",Jc.Color.green),Jc.interactivelyShowConnection(Ba.value));"function"===typeof Te&&Te(Ba);rb.jumpToEnd()}})}var vb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");vb.Inspector=xb;var Ia=function(Fa){var nc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),$a=nc.hasOwnProperty("ProtoInspector")&&"function"===typeof nc.ProtoInspector?nc.ProtoInspector:
nc.ProtoInspector=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,void 0,[{key:"className",get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",
version:"0.1.1-0"}}},{start:68,end:210})}(vb.Inspector);Ia=vb.ProtoInspector;vb.default=Ia;var Rb=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Rb.Morph=lb;Rb.touchInputDevice=Eb;Rb.easings=Wb;Rb.pt=Qb;Rb.fun=Bd;Rb.connect=Fc;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),$a=nc.hasOwnProperty("MorphicSideBar")&&"function"===typeof nc.MorphicSideBar?nc.MorphicSideBar:nc.MorphicSideBar=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sa($a,Fa,[{key:"onWorldResize",value:function(Pa){Pa=void 0===Pa?!0:Pa;if(this.respondsToVisibleWindow){var Oa=$world.visibleBounds(),Kb=navigator.standalone&&Rb.touchInputDevice?25:0;this.height=Oa.height-Kb;this.top=Kb+Oa.top();Kb=this.get("horizontal resizer");Kb.height=this.height;Kb.top=0;Pa&&(this.visible?this.topLeft=Oa.topLeft():this.topRight=Oa.topLeft())}}},{key:"switchMode",value:function(Pa){"inspector"==Pa&&this.showInspector();"connections"==Pa&&this.showConnections()}},
{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Pa){var Oa=this,Kb,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bd){switch(bd.nextAddress){case 1:Kb=$world.visibleBounds();Ib=navigator.standalone&&Rb.touchInputDevice?25:0;Oa.height=Kb.height-Ib;Oa.top=Ib+Kb.top();if(Pa)return $world.addMorph(Oa,
$world.get("lively top bar")),Oa.right=0,Oa.attachToWorld($world),Oa.visible=!0,bd.yield(Oa.whenRendered(),5);Oa.detachFromWorld($world);return bd.yield(Oa.animate({opacity:0,right:0,duration:300}),4);case 4:Oa.visible=!1;Oa.remove();bd.jumpTo(0);break;case 5:return Oa.onWorldResize(!1),Oa.get("scene graph").adjustProportions(),bd.yield(Oa.animate({opacity:1,easing:Rb.easings.outCirc,left:1,duration:300}),6);case 6:Oa.get("scene graph").refresh(),bd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Pa){Rb.connect(Pa,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});Rb.connect(Pa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Rb.connect(Pa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Pa){var Oa=this;Pa.attributeConnections.forEach(function(Kb){Kb.targetObj===Oa&&Kb.disconnect()})}},{key:"selectNode",value:function(Pa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Pa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Pa)}},
{key:"onHierarchyChange",value:function(Pa){var Oa=this,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if("addMorphAt"===Pa.selector||"removeMorph"===Pa.selector||"name"===Pa.prop){Kb=Oa._sceneGraph||(Oa._sceneGraph=Oa.getSubmorphNamed("scene graph"));if(!Kb||!Kb.owner.visible||Pa.target&&Pa.target.isHand||Pa.target&&Kb.ignoreMorph(Pa.target)||Pa.args&&!Pa.args[0].isHalo&&Kb.ignoreMorph(Pa.args[0])||Pa.target.ownerChain().find(function(bd){return Kb.ignoreMorph(bd)}))return Ib.return();
Rb.fun.debounceNamed("scene-graph-update",50,function(){return Kb.refresh()})()}Ib.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-69"}}},{start:226,
end:3566})}(Rb.Morph);vb=Rb.MorphicSideBar;Rb.default=vb;var Jc=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Jc.interactivelyShowConnection=Ub;Jc.printConnection=qc;Jc.printConnectionElements=wc;Jc.interactiveConnectGivenSource=I;Jc.interactiveConnectGivenSourceAndTarget=T;Jc.interactivelyReEvaluateConnection=ta;Jc.visualizeConnection=Ca;Jc.interactivelyEvaluateConnection=Mb;Jc.connect=Fc;Jc.once=wd;Jc.Color=Kc;Jc.rect=Gc;Jc.pt=Qb;Jc.arr=Yc;Jc.promise=jd;Jc.properties=Dd;Jc.Path=od;Jc.obj=
Zc;Jc.HorizontalLayout=Ra;Jc.Morph=lb;Jc.VerticalLayout=tb;Jc.StyleSheet=dc;Jc.Icon=bc;Jc.GridLayout=Xc;Jc.morph=Oc;Jc.TreeData=$b;Jc.Tree=zc;Jc.Leash=Fb;Jc.LabeledCheckBox=Cb;Jc.SearchField=pc;Jc.showConnector=Wa;Jc.show=Xa;Jc.InteractiveMorphSelector=Ab;Jc.MorphHighlighter=kc;Jc.Window=Pc;Jc.classToFunctionTransform=wb;Jc.interactivelyShowConnection=Ub;Jc.interactivelyShowConnection=Ub;Jc.printConnection=qc;Jc.printConnection=qc;Jc.printConnectionElements=wc;Jc.printConnectionElements=wc;Jc.interactiveConnectGivenSource=
I;Jc.interactiveConnectGivenSource=I;Jc.interactiveConnectGivenSourceAndTarget=T;Jc.interactiveConnectGivenSourceAndTarget=T;Jc.interactivelyReEvaluateConnection=ta;Jc.interactivelyReEvaluateConnection=ta;Jc.visualizeConnection=Ca;Jc.visualizeConnection=Ca;Jc.interactivelyEvaluateConnection=Mb;Jc.interactivelyEvaluateConnection=Mb;var Rc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Rc.Tree=zc;Rc.TreeData=$b;Rc.morph=Oc;Rc.Icon=bc;Rc.HorizontalLayout=Ra;Rc.easings=Wb;Rc.Morph=lb;Rc.Color=
Kc;Rc.Rectangle=db;Rc.rect=Gc;Rc.pt=Qb;Rc.connect=Fc;Rc.disconnect=Ta;Rc.disconnectAll=cb;Rc.once=wd;Rc.arr=Yc;Rc.num=ma;Rc.fun=Bd;Rc.tree=La;Rc.promise=jd;Rc.ConnectionHalo=_missingExportShim;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),$a=nc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof nc.InteractiveTreeContainer?nc.InteractiveTreeContainer:nc.InteractiveTreeContainer=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return sa($a,Fa,[{key:"onChildRemoved",value:function(Pa){}},{key:"onChildAdded",value:function(Pa){}},{key:"toggleSelected",value:function(Pa){if(this.tree){var Oa=this.tree,Kb=Oa.selectionFontColor,Ib=Oa.nonSelectionFontColor;this.submorphs.filter(function(bd){return!bd._isControlElement&&bd.styleClasses.includes("Label")}).forEach(function(bd){bd.fontColor=Pa?Kb:Ib})}}},{key:"onGrab",value:function(Pa){var Oa=this.tree,Kb=this.node;this.fill=Rc.Color.gray.withA(.5);this.fontColor=Oa.selectionFontColor;
this.opacity=.8;sa._get(Object.getPrototypeOf($a.prototype),"onGrab",this).call(this,Pa);Kb&&(this.toggleSelected(!1),Oa.collapse(Kb),Oa.treeData.parentNode(Kb).container.onChildRemoved(this),this._data=Oa.treeData.remove(Kb),Kb.container.target.remove(),Oa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Pa){this.showPreviewOn(Pa);return!0}},{key:"showPreviewOn",value:function(Pa){if(Pa.isContainer)var Oa=Pa.tree;Pa.isTree&&(Oa=Pa);Oa&&Oa.showDropPreviewFor&&Oa.showDropPreviewFor(this)}},{key:"insertAsChild",
value:function(Pa){var Oa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return Oa.tree.treeData.add(Pa._data,Oa.node,Oa.node.children[0]),Oa.tree.uncollapse(Oa.node),Oa.tree.treeData.remove(Oa.tree._previewNode),Kb.yield(Oa.tree.whenRendered(),2);Oa.tree.update(!0);Oa.onChildAdded(Pa);Kb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Pa,Oa){var Kb=this;debugger;this.tree._dropInProgress=!0;sa._get(Object.getPrototypeOf($a.prototype),"onBeingDroppedOn",
this).call(this,Pa,Oa);Pa=function(){Kb.fill=Rc.Color.gray.withA(.5);Kb.opacity=1;Kb.tree._dropInProgress=!1;Kb.tree.refresh()};Oa.isTree?Oa.insertAtPlaceholder(this).then(Pa):Oa.isContainer?Oa.insertAsChild(this).then(Pa):Pa()}}],[{key:"className",get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Rc.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Pa=this,Oa=this.tree.treeData;return Oa&&
Oa.asList().find(function(Kb){return Kb.container===Pa})}}}}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:437,end:2917})}(Rc.Morph);Rc.InteractiveTreeContainer=vb;Rc.InteractiveTreeContainer=vb;Rc.InteractiveTreeContainer=vb;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),
$a=nc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof nc.InteractiveTreeData?nc.InteractiveTreeData:nc.InteractiveTreeData=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"display",value:function(Pa){return[Pa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Pa){return Pa.isCollapsed}},{key:"collapse",value:function(Pa,Oa){Pa.isCollapsed=Oa}},{key:"getChildren",value:function(Pa){var Oa=
this;return Pa.isLeaf?null:Pa.children.filter(function(Kb){return Kb&&(Oa.filterActive?Kb.visible:!0)})}},{key:"isLeaf",value:function(Pa){var Oa=this;return!Pa.children||0==Pa.children.filter(function(Kb){return Kb&&(Oa.filterActive?Kb.visible:!0)}).length}},{key:"add",value:function(Pa,Oa,Kb){Oa=void 0===Oa?this.root:Oa;Oa.children||(Oa.children=[]);Kb?Rc.arr.pushAt(Oa.children,Pa,Oa.children.indexOf(Kb)):Oa.children.push(Pa);Oa.isLeaf=!1}},{key:"replace",value:function(Pa,Oa){var Kb=this.parentNode(Pa);
Pa=Kb.children.indexOf(Pa);Kb.children[Pa]=Oa}},{key:"next",value:function(Pa){var Oa=this.parentNode(Pa);return Oa&&Oa.children[Oa.children.indexOf(Pa)+1]}},{key:"isBefore",value:function(Pa,Oa){this.next(Pa)===Oa}},{key:"isAfter",value:function(Pa,Oa){this.next(Oa)===Pa}},{key:"addBefore",value:function(Pa,Oa){this.add(Pa,this.parentNode(Oa),Oa)}},{key:"addAfter",value:function(Pa,Oa){var Kb=this.parentNode(Oa);Oa=Kb.children.indexOf(Oa)+1;this.add(Pa,Kb,Kb.children[Oa])}},{key:"remove",value:function(Pa){var Oa=
this.parentNode(Pa);if(Oa)return Rc.arr.remove(Oa.children,Pa),Oa.children==[]&&(Oa.children=null),Pa}},{key:"filter",value:function(Pa,Oa){Oa=void 0===Oa?1:Oa;var Kb=this,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bd){if(1==bd.nextAddress)return bd.yield(Kb.uncollapseAll(function(Od,Zd){return Zd<Oa+1}),2);Ib=Kb.filterActive;Kb.filterActive=!1;Kb.asListWithIndexAndDepth(!1).reverse().forEach(function(Od){var Zd=Od.node;if(0==Od.depth)return Zd.visible=!0;Zd.visible=Pa(Zd);Zd.visible||
Zd.isCollapsed||!Zd.children.find(function(Te){return Te.visible})?Zd.container.opacity=1:(Zd.visible=!0,Zd.container.opacity=.5);return Zd.visible});Kb.filterActive=Ib;bd.jumpToEnd()})}}],[{key:"className",get:function(){return"InteractiveTreeData"}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:2926,end:5365})}(Rc.TreeData);Rc.InteractiveTreeData=vb;Rc.InteractiveTreeData=vb;Rc.InteractiveTreeData=vb;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),$a=nc.hasOwnProperty("InteractiveTree")&&"function"===typeof nc.InteractiveTree?nc.InteractiveTree:nc.InteractiveTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"update",value:function(Pa){var Oa=
this;sa._get(Object.getPrototypeOf($a.prototype),"update",this).call(this,Pa);this.treeData&&this.relayoutContainers();Pa&&this.embeddedMorphs.forEach(function(Kb){Kb.isContainer&&(Kb.fill=Rc.Color.transparent,Kb.fontFamily=Oa.fontFamily,Kb.fontSize=Oa.fontSize)})}},{key:"onDrop",value:function(Pa){sa._get(Object.getPrototypeOf($a.prototype),"onDrop",this).call(this,Pa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Pa){}},{key:"onDropHoverUpdate",value:function(Pa){}},
{key:"onDropHoverOut",value:function(Pa){}},{key:"onHoverOut",value:function(Pa){var Oa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){sa._get(Object.getPrototypeOf($a.prototype),"onHoverOut",Oa).call(Oa,Pa);Oa._previewNode&&Oa._previewNode.container.world()&&Oa.treeData.remove(Oa._previewNode);Oa.resetContainerSelection();Oa.update(!0);Kb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Pa){var Oa=this,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==
Ib.nextAddress)return Kb=Oa.treeData.parentNode(Oa._previewNode),Oa.treeData.replace(Oa._previewNode,Pa._data),Oa.treeData.remove(Oa._previewNode),Ib.yield(Oa.whenRendered(),2);Oa.update(!0);Kb.container.onChildAdded(Pa);Ib.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Pa=this;if(!this._scrollingUp){this._scrollingUp=!0;var Oa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return Pa._scrollingUp&&0<Pa.scroll.y?Kb.yield(Pa.animate({scroll:Pa.scroll.subXY(0,
30),duration:300,easing:Rc.easings.linear}),3):(Pa._scrollingUp=!1,Kb.jumpTo(0));Oa();Kb.jumpToEnd()})};Oa()}}},{key:"scrollDownSlowly",value:function(){var Pa=this;if(!this._scrollingDown){this._scrollingDown=!0;var Oa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kb){if(1==Kb.nextAddress)return Pa._scrollingDown&&Pa.scroll.y<Pa.scrollExtent.y-Pa.height?Kb.yield(Pa.animate({scroll:Pa.scroll.addXY(0,30),duration:300,easing:Rc.easings.linear}),3):(Pa._scrollingDown=!1,Kb.jumpTo(0));
Oa();Kb.jumpToEnd()})};Oa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Pa){Pa.isContainer&&(Pa.fill=Rc.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Pa){var Oa=this;Pa=this.localize(Pa.globalBounds().center());var Kb=this.textPositionFromPoint(Pa),Ib=this.treeData.asListWithIndexAndDepth(function(Xd){Xd=Xd.node;return Xd!=Oa._previewNode&&Xd.container.world()}),
bd=(Ib.find(function(Xd){return Xd.i-1===Kb.row})||{}).node,Od=bd&&bd.container,Zd=this.ensurePlaceholder(),Te=!!Zd.container.world(),Qc=Pa.subPt(this.scroll).subPt(this.scrollbarOffset);10>Qc.y?this.scrollUpSlowly():Qc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Od){if(Ib.length>Kb.row||Rc.arr.last(this.treeData.root.children)===Zd)return;this.treeData.remove(Zd);this.treeData.add(Zd);this.update(!0)}if(Od){Ib=this.textLayout.boundsFor(this,
Kb);if(4>Math.abs(Ib.top()-Pa.y)){if(this.treeData.isBefore(Zd,bd))return;this.treeData.remove(Zd);this.treeData.addBefore(Zd,bd)}else if(4>Math.abs(Ib.bottom()-Pa.y)&&(bd.isCollapsed||this.treeData.isLeaf(bd))){if(this.treeData.isAfter(Zd,bd))return;this.treeData.remove(Zd);this.treeData.addAfter(Zd,bd)}else{Od.fill=Rc.Color.gray;if(!Te)return;this.treeData.remove(Zd)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Pa=Rc.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Rc.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Rc.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Pa;return this._previewNode}},{key:"relayoutContainers",value:function(){var Pa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Oa){return Oa.height});this.treeData.asListWithIndexAndDepth().forEach(function(Oa){var Kb=Oa.node;Oa=Oa.i;Kb.container.nativeCursor="grab";
Kb.container.width=Pa.width-25-Kb.container.left;Kb.container.toggleSelected&&Kb.container.toggleSelected(Oa==Pa.selectedIndex)});this.anchors.forEach(function(Oa){return Oa.position=Oa.position})}}],[{key:"className",get:function(){return"InteractiveTree"}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},
{start:5374,end:10711})}(Rc.Tree);Rc.InteractiveTree=vb;Rc.InteractiveTree=vb;Rc.InteractiveTree=vb;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),$a=nc.hasOwnProperty("SceneGraphTree")&&"function"===typeof nc.SceneGraphTree?nc.SceneGraphTree:nc.SceneGraphTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"beforePublish",value:function(){this.submorphs=[];
this.reset()}},{key:"selectMorphInTarget",value:function(Pa){var Oa=this.treeData.asList().find(function(Kb){return Kb.container.target===Pa});Oa&&this.selectedNode!=Oa&&this.selectPath(this.treeData.pathOf(Oa))}},{key:"onLoad",value:function(){var Pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return Pa.submorphs=[],Oa.yield(Pa.whenRendered(),2);Pa.get("inspector").makeEditorVisible(!0);Pa.get("inspector").makeEditorVisible(!1);Pa.setTarget($world);Oa.jumpToEnd()})}},
{key:"adjustProportions",value:function(Pa){Pa=(Pa?Pa.state.dragDelta:{y:0}).y;var Oa=this.get("inspector"),Kb=this.get("scene graph resizer"),Ib=this.get("mode selector"),bd=this.get("connections tree");this.height+=Pa;Oa.height-=Pa;bd.height-=Pa;Kb.top=this.bottom;Kb.left=0;Ib.top=Kb.bottom;bd.top=Oa.top=Ib.bottom+5}},{key:"reset",value:function(){var Pa=this;this.treeData=new Rc.InteractiveTreeData({children:[],container:Rc.morph()});this.get("inspector").targetObject={};this.selectedNode=null;
this.anchors.filter(function(Oa){return null==Oa.id}).forEach(function(Oa){return Pa.removeAnchor(Oa)})}},{key:"setTarget",value:function(Pa){this.target=Pa;this.treeData=this.getTreeFromSubmorphHierarchy(Pa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Pa){var Oa=this;if(Pa===this._previewNode)return!1;if(Pa.container.nameNeedsUpdate)return!0;var Kb=Pa.container.target.submorphs.filter(function(Ib){return!Oa.ignoreMorph(Ib)});return Kb.length!=Pa.children.length||Kb.map(function(Ib){return Ib.name}).join("")!=
Pa.children.map(function(Ib){return Ib.target?Ib.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Pa){var Oa=this,Kb=Pa.container.target.submorphs.map(function(Te){return Te.__scene_graph_target__?Te.__scene_graph_target__():Te}).filter(function(Te){return!Oa.ignoreMorph(Te)}),Ib=[],bd={},Od;for(Od in Kb){bd.$jscomp$loop$prop$m$2283=Kb[Od];var Zd=Rc.arr.without(Pa.children,this._previewNode).find(function(Te){return function(Qc){return Qc.container.target.id==Te.$jscomp$loop$prop$m$2283.id}}(bd));
Ib[Od]=Zd?Zd:this.readMorphHierarchy(bd.$jscomp$loop$prop$m$2283);bd={$jscomp$loop$prop$m$2283:bd.$jscomp$loop$prop$m$2283}}return Ib}},{key:"refresh",value:function(){var Pa=this;if(!this._updating&&!this._dropInProgress){var Oa=!1;Rc.tree.prewalk(this.treeData.root,function(Kb){Pa.isNodeOutOfSync(Kb)&&(Oa=!0,Kb.name=Kb.container.target.name,Kb.container.refresh(),Kb.children=Pa.getNewChildren(Kb))},function(Kb){return Kb.children});this.update(Oa)}}},{key:"ignoreMorph",value:function(Pa){return Pa.isMorph?
Pa.isContainer||Pa.isWindow||Pa.getWindow()||Pa.isEpiMorph||Pa.isHand||["lively.halos"].includes(Pa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(Pa.constructor.name):!1}},{key:"onDropHoverOut",value:function(Pa){var Oa=Pa.hand.grabbedMorphs[0];Pa=Pa.hand.findDropTarget();if(!(Pa===this||Pa&&Pa.ownerChain().includes(this))&&Oa&&Oa.isContainer)Oa.onDragOutside()}},{key:"onDropHoverIn",value:function(Pa){var Oa=Pa.hand.grabbedMorphs[0];
Oa&&!Oa.isContainer&&($world.halos().forEach(function(Kb){return Kb.remove()}),Oa.remove(),Object.assign(Oa,Pa.hand._grabbedMorphProperties.get(Oa).pointerAndShadow),Oa=this.renderContainerFor(Oa,!1),Pa.hand.grab(Oa),Oa.leftCenter=Rc.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Pa){return new Rc.InteractiveTreeData(this.readMorphHierarchy(Pa))}},{key:"readMorphHierarchy",value:function(Pa){var Oa=this;return Rc.tree.mapTree(Pa,function(Kb,Ib){return{name:Kb.name,isCollapsed:!0,
container:Oa.renderContainerFor(Kb),visible:!0,children:Ib}},function(Kb){return Kb.submorphs.filter(function(Ib){return Kb.isWorld?!Oa.ignoreMorph(Ib):!0})})}},{key:"renderContainerFor",value:function(Pa,Oa){Pa=void 0===Pa?Rc.morph({name:"root"}):Pa;Oa=new Rc.MorphContainer({tree:this,fill:void 0===Oa||Oa?Rc.Color.transparent:Rc.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Pa,opacity:Pa.visible?1:.5});Pa._data?(Oa._data=Pa._data,Pa._data.container=Oa):
Oa._data={name:Pa.name,isCollapsed:!0,container:Oa,children:[]};return Oa}},{key:"collapseAll",value:function(){var Pa=this;this.treeData.asList().forEach(function(Oa){return Oa!=Pa.treeData.root?Oa.isCollapsed=!0:Oa.isCollapsed=!1})}},{key:"filterMorphs",value:function(Pa){var Oa=this,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==Ib.nextAddress)return Kb=Pa.tokens[0],Oa.treeData.filterActive||(Oa._collapseState=new WeakMap(Oa.treeData.asList().map(function(bd){return[bd,
bd.isCollapsed]}))),Oa.treeData.filterActive=!!Kb,Ib.yield(Oa.treeData.filter(function(bd){var Od=!Kb||bd.container.target.name.includes(Kb);bd.container.highlightTerm(Kb);return Od},3),2);Oa.treeData.filterActive||Oa.treeData.asList().forEach(function(bd){return bd.isCollapsed=Oa._collapseState.has(bd)?Oa._collapseState.get(bd):!0});Oa.refresh();Ib.jumpToEnd()})}}],[{key:"className",get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],nc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:10720,end:17193})}(Rc.InteractiveTree);Rc.SceneGraphTree=vb;Rc.SceneGraphTree=vb;Rc.SceneGraphTree=vb;vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),$a=nc.hasOwnProperty("MorphContainer")&&"function"===typeof nc.MorphContainer?nc.MorphContainer:
nc.MorphContainer=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"refresh",value:function(){var Pa=this,Oa,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){Oa=Pa.target;if(!Oa)return Ib.return();Pa.reactsToPointer=!0;Pa.dropShadow=!1;Pa.submorphs=[Pa.getLabel(),Oa.layout&&Pa.getLayoutControls(),Pa.getConnectionControls()].filter(Boolean).map(function(bd,Od){bd.fitIfNeeded();
bd.left=Kb?Kb.right+5:0;bd.top=2;return Kb=bd});Pa.height=20;Pa.opacity=Oa.visible?1:.5;Ib.jumpToEnd()})}},{key:"getLabel",value:function(){var Pa=this.getSubmorphNamed("name label")||Rc.morph({type:"label",name:"name label",reactsToPointer:!1,padding:Rc.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Oa=Pa.textString.slice(2,-1);Oa&&Oa==this.target.name||(Pa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Pa}},{key:"getIcon",value:function(Pa){return Rc.Icon.textAttribute({Morph:"square",
Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Pa.constructor.className]||"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Pa=this.getSubmorphNamed("layout label")||Rc.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Rc.Rectangle.inset(4,2,4,2),fill:Rc.Color.orange,fontColor:Rc.Color.white});Pa._isControlElement=
!0;Pa.textString!=this.target.layout.name()&&(Pa.value=this.target.layout.name());return Pa}},{key:"onMouseDown",value:function(Pa){var Oa=this,Kb,Ib,bd,Od,Zd,Te,Qc,Xd,kd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bb){if(1==Bb.nextAddress)return sa._get(Object.getPrototypeOf($a.prototype),"onMouseDown",Oa).call(Oa,Pa),Pa.targetMorph!=Oa.get("connections label")?Bb.jumpTo(0):Bb.yield(Oa.whenRendered(),3);Kb=$jscomp.makeIterator(Oa.world().halos());for(Ib=Kb.next();!Ib.done;Ib=Kb.next())bd=
Ib.value,bd.remove();Od=$jscomp.makeIterator(Oa.world().getSubmorphsByStyleClassName("ConnectionHalo"));for(Ib=Od.next();!Ib.done;Ib=Od.next())Zd=Ib.value,Zd.remove();Oa.owner.animate({opacity:.5,duration:300});Te=new Rc.ConnectionHalo({target:Oa.target});Te.openInWorld();Te.topLeft=Oa.getSubmorphNamed("connections label").globalPosition.addXY(0,-2);Rc.connect(Oa,"position",function(){Te.topLeft=Oa.getSubmorphNamed("connections label").globalPosition.addXY(0,-2)});Qc=Oa;Xd=Oa.owner;kd=Oa.get("side bar");
Rc.once(Te,"remove",Oa,"toggleConnectionControl",{varMapping:{self:Qc,disconnectAll:cb,disconnect:Ta,connectionHalo:Te,tree:Xd,sideBar:kd},updater:function(da){Qc.connectionHalo=null;Xd.animate({opacity:1,duration:300});Rc.disconnect(kd,"toggle",Te,"remove");Rc.disconnectAll(Qc);da(!0)}});Rc.once(Oa,"remove",Te,"remove");Rc.once(Oa.get("side bar"),"toggle",Te,"remove");Oa.toggleConnectionControl(!1);Oa.connectionHalo=Te;Bb.jumpToEnd()})}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(Kb){return!Kb.targetObj.isHalo}).length:0;var Pa=this.getSubmorphNamed("connections label")||Rc.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Rc.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Rc.Color.red,fontColor:Rc.Color.white});Pa._isControlElement=!0;Pa.visible=!this.connectionHalo&&!!this.connectionCount;var Oa=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Pa.textString!=Oa&&(Pa.value=Oa);return Pa}},{key:"highlightTerm",value:function(Pa){var Oa=this.submorphs[0],Kb=Oa.textAndAttributes.slice(0,2),Ib=Oa.textString.slice(1).split(Pa);Oa.textAndAttributes=1===Ib.length?[].concat($jscomp.arrayFromIterable(Kb),[Ib[0]]):[].concat($jscomp.arrayFromIterable(Kb),$jscomp.arrayFromIterable(Rc.arr.flatten(Rc.arr.interpose(Ib.map(function(bd){return[bd,{}]}),[Pa,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Pa){var Oa=sa._get(Object.getPrototypeOf($a.prototype),"wantsToBeDroppedOn",this).call(this,Pa);if(![Pa].concat($jscomp.arrayFromIterable(Pa.ownerChain())).includes(this.tree))this.onDragOutside();return Oa}},{key:"onGrab",value:function(Pa){var Oa=this,Kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==Ib.nextAddress)return Oa.tree._dropInProgress=!0,Kb=Oa.target.globalPosition,sa._get(Object.getPrototypeOf($a.prototype),
"onGrab",Oa).call(Oa,Pa),Oa._data.globalTargetPosition=Kb,Ib.yield(Oa.whenRendered(),2);if(Oa.tree.fullContainsWorldPoint(Oa.globalPosition))Oa.leftCenter=Rc.pt(-20,0);else Oa.onDragOutside();Oa.tree._dropInProgress=!1;Ib.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Rc.fun.createQueue("container-hover-queue",function(Pa,Oa){var Kb,Ib,bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Od){if(1==Od.nextAddress)return Kb=
Pa.target,Ib=Kb.opacity,bd=Kb.scale,Pa.target.opacity=0,Pa.target.scale=.5,$world.halos().forEach(function(Zd){return Zd.remove()}),$world.firstHand.grab(Pa.target),Pa.target._data=Pa._data,Pa.remove(),Pa.target.position=Rc.pt(0,0),Od.yield(Pa.target.animate({opacity:Ib,scale:bd,duration:200}),2);Oa();Od.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Pa){var Oa=this.node.children.indexOf(Pa.node||Pa._data)+1;Oa=this.node.children[Oa];Pa.target.remove();Oa?(Oa=this.target.submorphs.indexOf(Oa.container.target),
this.target.addMorphAt(Pa.target,Oa)):this.target.addMorph(Pa.target);Pa._data.globalTargetPosition&&(Pa.target.position=this.target.localize(Pa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Pa){}},{key:"toggleConnectionControl",value:function(Pa){this.getSubmorphNamed("connections label").visible=Pa}},{key:"toggleSelected",value:function(Pa){var Oa=this,Kb,Ib,bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Od){if(1==Od.nextAddress)return sa._get(Object.getPrototypeOf($a.prototype),
"toggleSelected",Oa).call(Oa,Pa),Oa._active===Pa?Od.return():(Oa._active=Pa)&&Oa.target&&Oa.target.isMorph&&Oa.world()?Od.yield(Oa.target.whenRendered(),3):Od.jumpTo(0);Oa.get("inspector").targetObject=Oa.target;if(Oa.connectionHalo)return Od.return();Kb=$jscomp.makeIterator(Oa.world().halos());for(Ib=Kb.next();!Ib.done;Ib=Kb.next()){bd=Ib.value;if(bd.target===Oa.target)return Od.return();bd.remove()}Oa.world().showHaloFor(Oa.target);Od.jumpToEnd()})}}],[{key:"className",get:function(){return"MorphContainer"}},
{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Pa){this.submorphs[0].fontFamily=Pa}},fontColor:{after:["submorphs"],derived:!0,set:function(Pa){this.submorphs[0].fontColor=Pa}},fontSize:{derived:!0,set:function(Pa){this.submorphs[0].fontSize=Pa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&
this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}}}}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17202,end:25985})}(Rc.InteractiveTreeContainer);
Rc.MorphContainer=vb;Rc.MorphContainer=vb;Rc.MorphContainer=vb;var xc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");xc.visualizeConnection=function(Fa,nc,$a,Pa,Oa){Pa=void 0===Pa?{}:Pa;Oa=xc.rect(0).sides.concat(xc.rect(0).corners);$a=$a||new xc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:xc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.orange}}},Pa,{hasFixedPosition:!0}));$a.startPoint.attachTo(Fa,
"rightCenter");nc.isMorph?(Pa=nc.globalBounds().partNameNearest(Oa,Fa.globalPosition),Fa.globalPosition.equals(nc.globalBounds().partNamed(Pa))&&nc.globalBounds().partNameNearest(xc.arr.without(Oa,Pa),Fa.globalPosition),$a.endPoint.attachTo(nc,"leftCenter")):(Oa=Fa.globalBounds().topRight().addPt(xc.pt(100,0)),nc=xc.morph({type:"label",value:nc.toString(),styleClasses:["Tooltip"],padding:xc.rect(8,4)}).openInWorld(Oa),nc.position=Fa.world().bounds().translateForInclusion(nc.bounds()).topLeft(),xc.once($a,
"remove",nc,"remove"),$a.endPoint.attachTo(nc,"leftCenter"));return $a};xc.startConnecting=function(Fa,nc){Fa.animate({opacity:.8,duration:300});Fa.startPoint.attachTo(nc,"center");Fa.vertices[0].position=xc.pt(2,2)};xc.stopConnecting=function(Fa,nc,$a,Pa){function Oa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Od){if(1==Od.nextAddress)return Od.yield(Fa.animate({opacity:0,duration:300}),2);Fa.startPoint.clearConnection();Fa.endPoint.clearConnection();Fa.remove();Od.jumpToEnd()})}
Pa=void 0===Pa?"sourceAttrName":Pa;var Kb,Ib,bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Od){return 1==Od.nextAddress?(Kb=Fa,Ib=Kb.endPoint,(bd=Ib.connectedMorph)&&"MorphContainer"==bd.constructor.className&&(bd=bd.target),bd?Od.yield(xc.interactiveConnectGivenSourceAndTarget($a,Pa,bd),2):Od.jumpTo(2)):Od.yield(Oa(),0)})};xc.editConnection=function(Fa){var nc=Fa.connection,$a=Fa.connectionPoint,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return Pa=
xc.visualizeConnection($a,nc.targetObj,!1,{borderColor:xc.Color.gray.darker(),endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.gray.darker()}}}),Oa.yield(xc.interactivelyReEvaluateConnection(nc,"Edit Connection",!1),2);Pa.remove();Oa.jumpToEnd()})};xc.Tree=zc;xc.TreeData=$b;xc.Icon=bc;xc.morph=Oc;xc.pt=Qb;xc.Rectangle=db;xc.rect=Gc;xc.Color=Kc;xc.arr=Yc;xc.connect=Fc;xc.signal=fb;xc.Leash=Fb;xc.once=pb;xc.interactivelyReEvaluateConnection=ta;xc.interactiveConnectGivenSource=
I;xc.interactiveConnectGivenSourceAndTarget=T;(function(Fa){var nc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),$a=nc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof nc.ConnectionsTreeData?nc.ConnectionsTreeData:nc.ConnectionsTreeData=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"parseMorphConnections",value:function(Pa){for(var Oa={},Kb=$jscomp.makeIterator(void 0===
Pa.attributeConnections?[]:Pa.attributeConnections),Ib=Kb.next();!Ib.done;Ib=Kb.next())Ib=Ib.value,Ib.targetObj.isHalo||(Oa[Ib.sourceAttrName]=Oa[Ib.sourceAttrName]||[{name:["      New Connection  ",{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Pa,Ib.sourceAttrName),{}]}],xc.arr.pushAt(Oa[Ib.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Ib)))},0));return{children:Object.entries(Oa).map(function(bd){var Od=$jscomp.makeIterator(bd);
bd=Od.next().value;Od=Od.next().value;return{name:[bd,{fontWeight:"bold"}," ",{},xc.morph({fill:xc.Color.white,opacity:.7,value:""+(Od.length-1),borderRadius:15,fontWeight:"bold",padding:xc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Od}}).concat([{name:["New Connection  ",{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Pa),{}]}])}}},{key:"renderExistingConnection",value:function(Pa){var Oa=this,Kb=xc.morph({type:"label",fontColor:xc.Color.gray,fontSize:16,
nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Pa.targetMethodName,{}])}),Ib=this.renderDeadPin(),bd=Ib.submorphs[0];xc.connect(Kb,"onHoverIn",function(){Kb.fontColor=xc.Color.orange;Kb._leash=xc.visualizeConnection(bd,Pa.targetObj,Kb._leash);bd.fill=xc.Color.orange;bd.border={color:xc.Color.orange,width:3}});xc.connect(Kb,"onMouseDown",function(Od){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==
Zd.nextAddress)return Od.stop(),Zd.yield(xc.interactivelyReEvaluateConnection(Pa),2);xc.signal(Oa,"refresh");Zd.jumpToEnd()})});xc.connect(Kb,"onHoverOut",function(){Kb.fontColor=xc.Color.gray;bd.fill=xc.Color.gray;bd.border={color:xc.Color.white,width:1};Kb._leash.remove();Kb._leash=void 0});return[Kb,{},"  ",{}].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Pa.disconnect();xc.signal(Oa,"refresh")}})),["  ",{},Ib,{}])}},{key:"renderDeadPin",
value:function(){var Pa=xc.morph({type:"ellipse",fill:xc.Color.gray,extent:xc.pt(10,10),center:xc.pt(8,12),borderWidth:1});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Pa]})}},{key:"renderPin",value:function(Pa,Oa){var Kb=this,Ib=xc.morph({type:"ellipse",fill:xc.Color.gray.withA(.5),extent:xc.pt(10,10),center:xc.pt(8,12),draggable:!1,borderWidth:1}),bd=new xc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:xc.Color.gray.darker(),
endpointStyle:{fill:xc.Color.gray.darker()},position:xc.pt(1,1),vertices:[xc.pt(0,0),xc.pt(0,0)],canConnectTo:function(Od){return"MorphContainer"==Od.constructor.className||2>xc.arr.intersect([Od].concat($jscomp.arrayFromIterable(Od.ownerChain())),[Ib].concat($jscomp.arrayFromIterable(Ib.ownerChain()))).length}});Ib.addMorph(bd);xc.connect(bd.endPoint,"onDragStart",function(){xc.startConnecting(bd,Ib)});xc.connect(bd.endPoint,"onDragEnd",function(Od){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zd){if(1==
Zd.nextAddress)return Ib.center=xc.pt(8,12),Zd.yield(xc.stopConnecting(bd,Ib,Pa,Oa),2);xc.signal(Kb,"refresh");Zd.jumpToEnd()})});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Ib]})}},{key:"display",value:function(Pa){return Pa.name}},{key:"collapse",value:function(Pa,Oa){Pa.isCollapsed=Oa}},{key:"isCollapsed",value:function(Pa){return Pa.isCollapsed}},{key:"isLeaf",value:function(Pa){return!Pa.children}},{key:"getChildren",value:function(Pa){return Pa.children}}],
[{key:"className",get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Pa){var Oa=new this;Oa.root=Oa.parseMorphConnections(Pa);return Oa}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(xc.TreeData);vb=function(Fa){var nc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),
$a=nc.hasOwnProperty("ConnectionsTree")&&"function"===typeof nc.ConnectionsTree?nc.ConnectionsTree:nc.ConnectionsTree=function(Pa){Pa&&Pa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return sa($a,Fa,[{key:"inspectConnectionsOf",value:function(Pa){if(this.targetMorph=Pa)this.treeData=xc.ConnectionsTreeData.for(Pa),xc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=xc.ConnectionsTreeData.for(this.targetMorph),
xc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:"className",get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],nc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(xc.Tree);vb=xc.ConnectionsTree;xc.default=vb}}});