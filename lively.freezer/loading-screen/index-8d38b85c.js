System.register(["./__root_module__-19078926.js"],function(ya){var wb,Ab,ac,Ob,kd,Cc,qd,Dc,Ic,Qc,Bd,ne,ve,Wd,Ub,wc,od,Tb,xd,Fd,ic,rc,Gb,oc,Hc,ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa,Xa,Ib,jc,lb,tb,nb,Y,Ba,P;return{setters:[function(na){wb=na.ax;Ab=na.a3;ac=na.C;Ob=na.ab;kd=na.a8;Cc=na.$;qd=na.a7;Dc=na.a1;Ic=na.a2;Qc=na.aa;Bd=na.aA;ne=na.as;ve=na.an;Wd=na.aX;Ub=na.au;wc=na.aj;od=na.aY;Tb=na.aw;xd=na.az;Fd=na.aZ;ic=na.aD;rc=na.ac;Gb=na.aq;oc=na.g;Hc=na.am;ad=na.P;dd=na.a_;ec=na.at;jb=na.a6;yb=na.av;Ja=na.a$;
Ta=na.r;Ka=na.ap;Fa=na.b0;Xa=na.b1;Ib=na.b2;jc=na.ad;lb=na.b3;tb=na.ar;nb=na.b4;Y=na.b5;Ba=na.b6;P=na.aS}],execute:function(){function na(ia){(ia=Xb.cachedGuideLines.get(ia))&&ia.forEach(function(va){return va.remove()})}function Sa(ia,va,qb,I,pa){va=void 0===va?!0:va;qb=void 0===qb?!0:qb;I=void 0===I?10:I;pa=void 0===pa?100:pa;if(va||qb){var Oa=ia.owner,ub=Oa.world();Oa=Oa.getGlobalTransform();var Wb=ia.owner.submorphs.filter(function(fb){return fb!==ia&&!fb.isEpiMorph&&fb.visible&&fb.reactsToPointer}),
Jb=Xb.findAlignedMorphs(ia,Wb,I,pa,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));pa=[];var yc=0,Jc=0,Hd=0,Ge=0;Oa.e-=ub.scroll.x;Oa.f-=ub.scroll.y;if(Jb){Jb=$jscomp.makeIterator(Jb);for(var Dd=Jb.next();!Dd.done;Dd=Jb.next()){Dd=$jscomp.makeIterator(Dd.value);Dd.next();var ae=Dd.next().value;Dd=ae.vertical;ae=$jscomp.makeIterator(ae.horizontal);for(var ie=ae.next();!ie.done;ie=ae.next()){ie=ie.value;var Fe=ie.edgeAVal,Tc=ie.refPointsA,ee=ie.refPointsB,
he=ie.edgeBVal,gf=Math.ceil(I-ie.delta),jf=Math.min(Tc.top,ee.top);Tc=Math.max(Tc.bottom,ee.bottom);ie.maxDist>I&&(gf-=I/2);yc<gf&&(yc=gf,Hd=he-Fe);pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Xb.guideWidth,start:Oa.transformPoint(Xb.pt(he,jf)),end:Oa.transformPoint(Xb.pt(he,Tc)),fill:Xb.guideColor,guideType:"h",priority:gf})}Dd=$jscomp.makeIterator(Dd);for(ae=Dd.next();!ae.done;ae=Dd.next())ae=ae.value,ie=ae.edgeAVal,jf=ae.refPointsA,Tc=ae.refPointsB,Fe=ae.edgeBVal,he=Math.ceil(I-
ae.delta),gf=Math.min(jf.left,Tc.left),jf=Math.max(jf.right,Tc.right),ae.maxDist>I&&(he-=I/2),Jc<he&&Math.abs(Fe-ie)<=I&&(Jc=he,Ge=Fe-ie),pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Xb.guideWidth,start:Oa.transformPoint(Xb.pt(gf,Fe)),end:Oa.transformPoint(Xb.pt(jf,Fe)),fill:Xb.guideColor,guideType:"v",priority:he})}}if(!yc||!Jc){Wb=[ia].concat($jscomp.arrayFromIterable(Wb));ie=Xb.computeClosestMorphs(Wb);ae=ie[0];Wb=ae.l;Jb=ae.r;Dd=ae.t;ae=ae.b;var Rf;if(Wb||Jb||Dd||ae){var Zb=(Wb||
Jb||Dd||ae).refPointsA;for(Fe=1;Fe<ie.length&&(Tc=ie[Fe],he=Tc.l,gf=Tc.r,jf=Tc.t,Tc=Tc.b,yc||(Wb&&he&&Wb.index!==he.index&&Math.abs(he.dist-Wb.dist)<=I?Rf=Object.assign({neighbor:Fe,direction:"left"},he):Jb&&gf&&Jb!==gf.index&&Math.abs(gf.dist-Jb.dist)<=I&&(Rf=Object.assign({neighbor:Fe,direction:"right"},gf))),Jc||(Dd&&jf&&Dd.index!==jf.index&&Math.abs(jf.dist-Dd.dist)<=I?Rf=Object.assign({neighbor:Fe,direction:"top"},jf):ae&&Tc&&ae.index!==Tc.index&&Math.abs(Tc.dist-ae.dist)<=I&&(Rf=Object.assign({neighbor:Fe,
direction:"bottom"},Tc))),!Rf);Fe++);}if(Rf){var pg=Rf;I=pg.direction;jf=pg.dist;var lg=Zb.left;ee=Zb.top;var qg=Zb.bottom,Re=Zb.right,Ha=Zb.width,Ya=Zb.height;Tc=pg.refPointsA;Zb=Tc.left;ie=Tc.top;Fe=Tc.bottom;he=Tc.right;gf=Tc.width;Tc=Tc.height;var Bb=pg.refPointsB,V=Bb.left;pg=Bb.top;var Da=Bb.bottom;Bb=Bb.right;Re="left"===I?lg:"right"===I?Re:lg+Ha/2;qg="bottom"===I?qg:"top"===I?ee:ee+Ya/2;lg="left"===I?Re-jf:"right"===I?Re+jf:lg+Ha/2;jf="bottom"===I?qg+jf:"top"===I?qg-jf:ee+Ya/2;ee="left"===
I?Bb:"right"===I?V:Zb+gf/2;Ha="bottom"===I?pg:"top"===I?Da:ie+Tc/2;!qb||yc||"right"!==I&&"left"!==I||(yc=10,Hd=(Rf.dist-(Jb||Wb).dist)*("right"===I?-1:1),Re+=Hd,lg+=Hd);!qb||Jc||"top"!==I&&"bottom"!==I||(Jc=10,Ge=((Dd||ae).dist-Rf.dist)*("top"===I?-1:1),qg+=Ge,jf+=Ge);pa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Oa.transformPoint(Xb.pt("left"===I?Zb:"right"===I?he:Zb+gf/2,"bottom"===I?Fe:"top"===I?ie:ie+Tc/2)),end:Oa.transformPoint(Xb.pt(ee,Ha)),fill:Xb.Color.orange,height:Xb.guideWidth,
guideType:I,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Oa.transformPoint(Xb.pt(Re,qg)),end:Oa.transformPoint(Xb.pt(lg,jf)),fill:Xb.Color.orange,height:Xb.guideWidth,guideType:I,priority:10})}}qb&&(Hd||Ge)&&ia.moveBy(Xb.pt(Hd,Ge));if(va){pa=pa.filter(function(fb){var rb=fb.guideType;fb=fb.priority;return"h"===rb?fb===yc:"v"===rb?fb===Jc:!0});(va=Xb.cachedGuideLines.get(ia))||Xb.cachedGuideLines.set(ia,va=[]);for(qb=0;qb<pa.length;qb++)Rf=void 0,va[qb]?Rf=Object.assign(va[qb],pa[qb]):
(Rf=Xb.morph(pa[qb]),va.push(Rf)),Rf.owner||ub.addMorph(Rf);va.slice(qb).forEach(function(fb){return fb.remove()});Xb.fun.debounceNamed(ia.id+"-drag-guides-cleanup",1300,function(){var fb=Xb.cachedGuideLines.get(ia);fb&&fb.forEach(function(rb){return rb.remove()})})()}}}function hb(ia,va,qb,I,pa,Oa){qb=void 0===qb?!0:qb;I=void 0===I?!0:I;pa=void 0===pa?5:pa;Oa=void 0===Oa?100:Oa;if(qb||I){var ub=ia.owner,Wb=ub.world(),Jb=ub.getGlobalTransform(),yc=ia.owner.submorphs.filter(function(qg){return qg!==
ia&&!qg.isEpiMorph&&qg.visible&&qg.reactsToPointer});ub=(va.includes("left")||va.includes("right")?"x":"")+(va.includes("top")||va.includes("bottom")?"y":"");var Jc=Xb.findMorphsWithSimilarWidthOrHeight(ia,ub,yc,pa,Oa),Hd=-Infinity,Ge=-Infinity,Dd=0,ae=0,ie=0,Fe=0,Tc=0,ee=0;ub=[];Jb.e-=Wb.scroll.x;Jb.f-=Wb.scroll.y;if(Jc){Jc=$jscomp.makeIterator(Jc);for(var he=Jc.next();!he.done;he=Jc.next()){he=$jscomp.makeIterator(he.value);he.next();var gf=he.next().value;he=gf.similarIn;var jf=gf.delta,Rf=gf.refPointsA,
Zb=gf.refPointsB;gf=pa-jf+(Oa-gf.minDist);"width"===he?Hd<gf&&(Hd=gf,va.includes("left")&&(ae=-jf),va.includes("right")&&(Dd=jf)):Ge<gf&&(Ge=gf,va.includes("top")&&(ie=-jf),va.includes("bottom")&&(Fe=jf));jf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Xb.guideWidth,fill:Xb.guideColor,guideType:he,priority:gf,start:Jb.transformPoint("width"===he?Xb.pt(Rf.left,Rf.top+Rf.height/2):Xb.pt(Rf.left+Rf.width/2,Rf.top)),end:Jb.transformPoint("width"===he?Xb.pt(Rf.right,Rf.top+Rf.height/2):Xb.pt(Rf.left+
Rf.width/2,Rf.bottom))};he=Object.assign({},jf,{start:Jb.transformPoint("width"===he?Xb.pt(Zb.left,Zb.top+Zb.height/2):Xb.pt(Zb.left+Zb.width/2,Zb.top)),end:Jb.transformPoint("width"===he?Xb.pt(Zb.right,Zb.top+Zb.height/2):Xb.pt(Zb.left+Zb.width/2,Zb.bottom))});ub.push(jf,he)}}if(Oa=Xb.findAlignedMorphs(ia,yc,pa,Oa,va,void 0))for(Oa=$jscomp.makeIterator(Oa),yc=Oa.next();!yc.done;yc=Oa.next()){yc=$jscomp.makeIterator(yc.value);yc.next();Jc=yc.next().value;yc=Jc.vertical;Jc=$jscomp.makeIterator(Jc.horizontal);
for(he=Jc.next();!he.done;he=Jc.next()){he=he.value;Zb=he.edgeAVal;var pg=he.refPointsA,lg=he.refPointsB;jf=he.edgeBVal;Rf=Math.ceil(pa-he.delta);gf=Math.min(pg.top,lg.top);pg=Math.max(pg.bottom,lg.bottom);he.maxDist>pa&&(Rf-=pa/2);Tc<Rf&&(Tc=Rf,va.includes("left")&&(ae=-(jf-Zb)),va.includes("right")&&(Dd=+(jf-Zb)));ub.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Xb.guideWidth,start:Jb.transformPoint(Xb.pt(jf,gf)),end:Jb.transformPoint(Xb.pt(jf,pg)),fill:Xb.guideColor,guideType:"h",priority:Rf})}yc=
$jscomp.makeIterator(yc);for(Jc=yc.next();!Jc.done;Jc=yc.next())Jc=Jc.value,he=Jc.edgeAVal,gf=Jc.refPointsA,pg=Jc.refPointsB,Zb=Jc.edgeBVal,jf=Math.ceil(pa-Jc.delta),Rf=Math.min(gf.left,pg.left),gf=Math.max(gf.right,pg.right),Jc.maxDist>pa&&(jf-=pa/2),ee<jf&&Math.abs(Zb-he)<=pa&&(ee=jf,va.includes("top")&&(ie=Zb-he),va.includes("bottom")&&(Fe=Zb-he)),ub.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Xb.guideWidth,start:Jb.transformPoint(Xb.pt(Rf,Zb)),end:Jb.transformPoint(Xb.pt(gf,Zb)),
fill:Xb.guideColor,guideType:"v",priority:jf})}I&&(ae&&(ia.left+=ae,ia.right-=ae),ie&&(ia.top+=ie,ia.bottom-=ie),Dd&&(ia.width+=Dd),Fe&&(ia.height+=Fe));if(qb){ub=ub.filter(function(qg){var Re=qg.guideType;qg=qg.priority;return"width"===Re?qg===Hd:"height"===Re?qg===Ge:"v"===Re?qg===ee:"h"===Re?qg===Tc:!1});(va=Xb.cachedGuideLines.get(ia))||Xb.cachedGuideLines.set(ia,va=[]);for(qb=0;qb<ub.length;qb++)I=void 0,va[qb]?I=Object.assign(va[qb],ub[qb]):(I=Xb.morph(ub[qb]),va.push(I)),I.owner||Wb.addMorph(I);
va.slice(qb).forEach(function(qg){return qg.remove()});Xb.fun.debounceNamed(ia.id+"-drag-guides-cleanup",1300,function(){var qg=Xb.cachedGuideLines.get(ia);qg&&qg.forEach(function(Re){return Re.remove()})})()}}}function cc(ia,va){va=void 0===va?!1:va;var qb=Db.MorphicEnv.default().world;if(null===ia||void 0===ia)ia=String(ia);if(ia.isMorph)return Db.showRect(ia.world(),ia.globalBounds().translatedBy(ia.world().scroll.negated()),va);if(ia.isPoint)return Db.showRect(qb,new Db.Rectangle(ia.x-5,ia.y-
5,10,10));if(ia.isLine)return Db.showLine(qb,ia);if(ia.isRectangle)return Db.showRect(qb,ia);if("undefined"!==typeof Db.Element&&ia instanceof Db.Element)return Db.showRect(qb,Db.Rectangle.fromElement(ia));if("number"===typeof ia||"symbol"===typeof ia||"boolean"===typeof ia||"undefined"!==typeof Db.Node&&ia instanceof Db.Node||ia instanceof RegExp)ia=String(ia);"object"===typeof ia&&(ia=Db.obj.inspect(ia,{maxDepth:1}));return"string"===typeof ia&&1===arguments.length?qb.setStatusMessage(ia):qb.setStatusMessage(Db.string.formatFromArray(Array.from(arguments)))}
function Uc(ia,va,qb){qb=void 0===qb?3E3:qb;var I,pa,Oa,ub,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){if(1==Jb.nextAddress){if(!(ia&&ia.world()&&va&&va.world()))return Jb.return(null);I=ia.owner.worldPoint(ia.center);pa=va.owner.worldPoint(va.center);Oa=I.lineTo(pa).sampleN(2)[1];ub={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Db.Color.red,fill:Db.Color.red,cx:5,cy:5,r:4}]};Wb=$world.addMorph(new Db.Path({position:Oa,
renderOnGPU:!0,vertices:[Db.pt(0),Db.pt(0)],borderWidth:2,startMarker:ub,endMarker:ub,borderColor:Db.Color.red}));return Jb.yield(Wb.whenRendered(),2)}if(3!=Jb.nextAddress)return Jb.yield(Wb.animate({opacity:1,customTween:function(yc){var Jc=Wb.center;Wb.vertices=[Db.pt(0).interpolate(yc,I.subPt(Oa)),Db.pt(0).interpolate(yc,pa.subPt(Oa))];Wb.center=Jc},duration:400}),3);qb&&setTimeout(function(){return Wb.fadeOut()},qb);return Jb.return(Wb)})}ya({a:Sa,d:Uc,r:na,s:cc});var Xb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Xb.removeSnapToGuidesOf=na;Xb.showAndSnapToGuides=Sa;Xb.showAndSnapToResizeGuides=hb;Xb.computeRefPoints=function(ia){var va=ia.x,qb=ia.y,I=ia.width;ia=ia.height;return{left:va,top:qb,hCenter:va+I/2,vCenter:qb+ia/2,right:va+I,bottom:qb+ia,width:I,height:ia}};Xb.findEdgesInAlignment=function(ia,va,qb,I,pa,Oa,ub,Wb,Jb,yc){qb=void 0===qb?15:qb;Oa=void 0===Oa?0:Oa;ub=void 0===ub?0:ub;Wb=void 0===Wb?0:Wb;Jb=void 0===Jb?0:Jb;yc=void 0===yc?0:yc;for(var Jc=[],Hd=[],Ge=0;Ge<Xb.edges.length;Ge++){var Dd=$jscomp.makeIterator(Xb.edges[Ge]),
ae=Dd.next().value,ie=Dd.next().value;Dd=Dd.next().value;var Fe=ia[ie],Tc=va[Dd],ee=Math.max(Fe,Tc)-Math.min(Fe,Tc);ee>qb||!(I&&!I.includes(ie)||pa&&!pa.includes(Dd))&&("vertical"===ae?Jc:Hd).push({delta:ee,edgeA:ie,edgeB:Dd,edgeAVal:Fe,edgeBVal:Tc,refPointsA:ia,refPointsB:va,distLeft:Oa,distTop:ub,distRight:Wb,distBottom:Jb,maxDist:yc})}return Jc.length||Hd.length?{vertical:Jc,horizontal:Hd}:null};Xb.findAlignedMorphs=function(ia,va,qb,I,pa,Oa){qb=void 0===qb?15:qb;I=void 0===I?Infinity:I;for(var ub,
Wb=Xb.computeRefPoints(ia.bounds()),Jb=0;Jb<va.length;Jb++){var yc=va[Jb];if(yc!==ia){var Jc=Xb.computeRefPoints(yc.bounds()),Hd=Math.max(0,Wb.left-Jc.right),Ge=Math.max(0,Jc.left-Wb.right),Dd=Math.max(0,Wb.top-Jc.bottom),ae=Math.max(0,Jc.top-Wb.bottom);Math.max(ae,Dd,Ge,Hd)>I||!(Jc=Xb.findEdgesInAlignment(Wb,Jc,qb,pa,Oa,Hd,Dd,Ge,ae,Math.max(ae,Dd,Ge,Hd)))||(ub||(ub=new Map),ub.set(yc,Jc))}}ia=ia.owner;va=Xb.computeRefPoints(ia.innerBounds());if(qb=Xb.findEdgesInAlignment(Wb,va,qb))ub||(ub=new Map),
ub.set(ia,qb);return ub};Xb.findMorphsWithSimilarWidthOrHeight=function(ia,va,qb,I,pa){I=void 0===I?15:I;pa=void 0===pa?Infinity:pa;for(var Oa,ub=Xb.computeRefPoints(ia.bounds()),Wb=0;Wb<qb.length;Wb++){var Jb=qb[Wb];if(Jb!==ia){var yc=Xb.computeRefPoints(Jb.bounds()),Jc=Math.max(0,ub.left-yc.right),Hd=Math.max(0,yc.left-ub.right),Ge=Math.max(0,ub.top-yc.bottom),Dd=Math.max(0,yc.top-ub.bottom),ae=Math.min(Dd,Ge,Hd,Jc),ie=Math.max(Dd,Ge,Hd,Jc);if(!(Math.max(Dd,Ge,Hd,Jc)>pa)){Hd=ub;Jc=Hd.width;Hd=Hd.height;
Dd=yc;Ge=Dd.width;Dd=Dd.height;var Fe=Ge-Jc,Tc=Dd-Hd;("x"===va||"xy"===va)&&Math.abs(Fe)<=I&&(Oa||(Oa=new Map),Oa.set(Jb,{similarIn:"width",minDist:ae,maxDist:ie,refPointsA:ub,refPointsB:yc,valA:Jc,valB:Ge,delta:Fe}));("y"===va||"xy"===va)&&Math.abs(Tc)<=I&&(Oa||(Oa=new Map),Oa.set(Jb,{similarIn:"height",minDist:ae,maxDist:ie,refPointsA:ub,refPointsB:yc,valA:Hd,valB:Dd,delta:Tc}))}}}return Oa};Xb.closest=function(ia,va,qb,I,pa,Oa,ub,Wb){Wb=void 0===Wb?!0:Wb;var Jb=I[ia],yc=pa[ia],Jc=Oa[ia];va=ub[ia];
for(var Hd,Ge,Dd,ae,ie=0;ie<pa.length;ie++)ia===ie||Jb<pa[ie]||Hd&&pa[Hd.index]>=pa[ie]||Wb&&ub[ia]<Oa[ie]||Oa[ia]>ub[ie]||(Hd={index:ie,dist:Jb-pa[ie],refPointsA:qb[ia],refPointsB:qb[ie]});for(Jb=0;Jb<I.length;Jb++)ia===Jb||yc>I[Jb]||Ge&&I[Ge.index]<=I[Jb]||Wb&&ub[ia]<Oa[Jb]||Oa[ia]>ub[Jb]||(Ge={index:Jb,dist:I[Jb]-yc,refPointsA:qb[ia],refPointsB:qb[Jb]});for(yc=0;yc<ub.length;yc++)ia===yc||Jc<ub[yc]||Dd&&ub[Dd.index]>=ub[yc]||Wb&&I[ia]>pa[yc]||pa[ia]<I[yc]||(Dd={index:yc,dist:Jc-ub[yc],refPointsA:qb[ia],
refPointsB:qb[yc]});for(ub=0;ub<Oa.length;ub++)ia===ub||va>Oa[ub]||ae&&Oa[ae.index]<=Oa[ub]||Wb&&I[ia]>pa[ub]||pa[ia]<I[ub]||(ae={index:ub,dist:Oa[ub]-va,refPointsA:qb[ia],refPointsB:qb[ub]});return{l:Hd,r:Ge,t:Dd,b:ae}};Xb.computeClosestMorphs=function(ia){for(var va=[],qb=[],I=[],pa=[],Oa=[],ub=[],Wb=0;Wb<ia.length;Wb++){var Jb=Xb.computeRefPoints(ia[Wb].bounds());Oa.push(Jb);var yc=Jb.right,Jc=Jb.top,Hd=Jb.bottom;va.push(Jb.left);qb.push(yc);I.push(Jc);pa.push(Hd)}for(Wb=0;Wb<ia.length;Wb++)ub.push(Xb.closest(Wb,
ia,Oa,va,qb,I,pa));return ub};Xb.fun=wb;Xb.pt=Ab;Xb.Color=ac;Xb.morph=Ob;Xb.cachedGuideLines=new WeakMap;Xb.guideWidth=1;Xb.guideColor=Xb.Color.orange.lighter();Xb.removeSnapToGuidesOf=na;Xb.removeSnapToGuidesOf=na;Xb.showAndSnapToGuides=Sa;Xb.showAndSnapToGuides=Sa;Xb.showAndSnapToResizeGuides=hb;Xb.showAndSnapToResizeGuides=hb;Xb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Db=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Db.show=cc;Db.showRect=function(ia,va,qb){var I=
Db.BoundsMarker.highlightBounds(va);return qb?Db.showInLoop(ia,I,va):Db.showThenHide(ia,I)};Db.showInLoop=function(ia,va,qb){var I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pa){switch(pa.nextAddress){case 1:return Db.showThenHide(ia,va,!1),pa.yield(Db.promise.delay(300),2);case 2:I=!1,Db.once(ia,"onMouseDown",function(){return I=!0}),Db.once(ia,"hideMarkers",function(){return I=!0});case 3:if(I){pa.jumpTo(4);break}return pa.yield(va.retract(qb),3);case 4:va.fadeOut(2E3),pa.jumpToEnd()}})};
Db.showThenHide=function(ia,va,qb){qb=void 0===qb?3:qb;if(ia){var I=Array.isArray(va)?va:[va];I.forEach(function(pa){return ia.addMorph(pa)});qb&&setTimeout(function(){return I.forEach(function(pa){return pa.fadeOut(2E3)})},1E3*qb);return va}};Db.showLine=function(ia,va,qb){qb=void 0===qb?3E3:qb;var I=va.start;va=va.end.subPt(I);var pa=ia.addMorph({position:I,rotation:va.theta(),border:{width:1,color:Db.Color.red},width:va.fastR(),height:0});qb&&setTimeout(function(){return pa.fadeOut()},qb);return pa};
Db.showConnector=Uc;Db.obj=kd;Db.promise=Cc;Db.string=qd;Db.pt=Ab;Db.Color=ac;Db.Rectangle=Dc;Db.rect=Ic;Db.morph=Ob;Db.easings=Qc;Db.Path=Bd;Db.Icon=ne;Db.Morph=ve;Db.MorphicEnv=Wd;Db.connect=Ub;Db.once=wc;Db.disconnect=od;Db.show=cc;Db.show=cc;(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=va.hasOwnProperty("BoundsMarker")&&"function"===typeof va.BoundsMarker?va.BoundsMarker:va.BoundsMarker=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(){Tb._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Db.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(I){I=I.insetBy(-2);I=Math.min(I.width,I.height);return Math.max(4,Math.floor(10>I/10?I/2-5:I/10))}},{key:"createMarkerEdge",value:function(){return Db.morph({fill:Db.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var I=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),pa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Oa=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),ub=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Wb=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Jb=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),yc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Jc=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[I,pa,Oa,ub,Wb,Jb,yc,Jc]}},{key:"alignWithMorph",value:function(I){return this.alignWithBounds(I.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(I){this.alignWithRect(I.insetBy(-20));return this.alignWithRect(I,!0)}},{key:"alignWithRect",value:function(I,
pa){var Oa=this.ensureMarkerCorners(),ub=this.markerLength(I),Wb=[I.topLeft().addXY(0,0).extent(Db.pt(ub,5)),I.topLeft().addXY(0,0).extent(Db.pt(5,ub)),I.topRight().addXY(-ub,0).extent(Db.pt(ub,5)),I.topRight().addXY(-5,0).extent(Db.pt(5,ub)),I.bottomRight().addXY(-5,-ub).extent(Db.pt(5,ub)),I.bottomRight().addXY(-ub,-5).extent(Db.pt(ub,5)),I.bottomLeft().addXY(0,-5).extent(Db.pt(ub,5)),I.bottomLeft().addXY(0,-ub).extent(Db.pt(5,ub))];Oa.forEach(function(Jb,yc){return Jb.setBounds(Wb[yc])});pa&&(this.adjustOrigin(I.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(I){var pa=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return ub.yield(pa.animate({scale:Math.max(30/I.width,1.05)}),2);Oa=pa.center;return ub.yield(pa.animate({center:Oa,scale:1,duration:300,easing:Db.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(I){return(new this).alignWithMorph(I)}},
{key:"highlightBounds",value:function(I){return(new this).alignWithBounds(I)}}],va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2332,end:6009})})(Db.Morph);var vd=ya("S",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=va.hasOwnProperty("StatusMessage")&&
"function"===typeof va.StatusMessage?va.StatusMessage:va.StatusMessage=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"relayout",value:function(){this.title=Db.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(I,pa){this.message=I;this.color=pa}},{key:"slideTo",
value:function(I){var pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa.sliding=pa.animate({position:I,duration:500}),Oa.yield(pa.sliding,2);pa.sliding=!1;Oa.jumpToEnd()})}},{key:"expand",value:function(){var I=this,pa,Oa,ub,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jb){if(1==Jb.nextAddress)return I.expandable?I.sliding?Jb.yield(I.sliding,2):Jb.jumpTo(2):Jb.return();pa=I.world();if(!pa||I.isMaximized)return Jb.return();I.isMaximized=
!0;I.stayOpen=!0;Oa=I.getSubmorphNamed("message text");Oa.lineWrapping=!1;Object.assign(Oa,{clipMode:"auto",fixedWidth:!0,selectable:!0});I.expandedContent&&(Oa.value=I.expandedContent);Oa.fit();ub=Oa.textBounds().extent();Wb=pa.visibleBounds();ub.y>Wb.extent().y&&(ub.y=Wb.extent().y-20);ub.x>Wb.extent().x&&(ub.x=Wb.extent().x-20);ub=I.extent.maxPt(ub);I.animate({extent:ub,center:Wb.center(),duration:200});I.relayout();I.focus();Jb.jumpToEnd()})}},{key:"fit",value:function(){var I=this.getSubmorphNamed("message text");
I&&(this.extent=Db.pt(100,35).maxPt(I.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var I=this.getSubmorphNamed("message text");I&&I.focus()}},{key:"onMouseUp",value:function(I){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Db.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=
!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(I){this.setProperty("message",I);var pa=this.getSubmorphNamed("message text");if(pa){pa.value=I;var Oa=pa.documentEndPosition;Oa.row>this.maxLines&&(pa.replace({start:{row:this.maxLines,column:0},end:Oa},"...\n"),this.expandedContent||(this.expandedContent=I));Oa=pa.documentEndPosition;0!==Oa.column&&
pa.insertText("\n",Oa)}}},title:{isStyleProp:!0,derived:!0,set:function(I){this.getSubmorphNamed("message title").value=I},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(I){this.get("message icon").fontColor=I;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=I)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[{name:"message icon",type:"label",value:Db.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Db.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Db.connect(this,"extent",this,"relayout")}}}}}],va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:6053,end:10382})}(Db.Morph));Db.StatusMessage=vd;Db.StatusMessage=vd;Db.StatusMessage=vd;var bd=ya("b",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),qb=va.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof va.StatusMessageForMorph?va.StatusMessageForMorph:va.StatusMessageForMorph=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"alignAtBottomOf",
value:function(I){var pa=this.world();pa&&(this.bringToFront(),this.fit(),this.width=I.bounds().width,this.relayout(),I.world()&&(this.position=I.owner.worldPoint(I.bounds().bottomLeft())),I=pa.visibleBounds(),I=this.bounds().top()+this.height-I.bottom(),0<I&&this.moveBy(Db.pt(0,-I)))}},{key:"onMouseUp",value:function(I){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},
removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var I=this.getProperty("targetMorph");return I&&$world.getMorphWithId(I)},set:function(I){this.setProperty("targetMorph",I?I.id:null);this.alignAtBottomOf(I)}},expandable:{after:["submorphs"],set:function(I){this.setProperty("expandable",I);if(I){var pa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Db.connect(pa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Db.disconnect(pa,"fire",this,"expand"))}}}}}],va,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10607,end:12475})}(Db.StatusMessage));Db.StatusMessageForMorph=bd;Db.StatusMessageForMorph=bd;Db.StatusMessageForMorph=bd;Db.showConnector=Uc;Db.showConnector=
Uc;var cb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");cb.Morph=ve;cb.Label=xd;cb.StyleSheet=Fd;cb.HorizontalLayout=ic;cb.Path=Bd;cb.Text=rc;cb.GridLayout=Gb;cb.morph=Ob;cb.Icon=ne;cb.createMorphSnapshot=oc;cb.Color=ac;cb.pt=Ab;cb.rect=Ic;cb.Rectangle=Dc;cb.LinearGradient=Hc;cb.obj=kd;cb.PropertyPath=ad;cb.promise=Cc;cb.properties=dd;cb.num=ec;cb.arr=jb;cb.connect=Ub;cb.signal=yb;cb.disconnect=od;cb.disconnectAll=Ja;cb.once=wc;cb.showAndSnapToGuides=Sa;cb.showAndSnapToResizeGuides=hb;
cb.removeSnapToGuidesOf=na;cb.resource=Ta;cb.show=cc;cb.haloBlue=cb.Color.rgb(23,160,251);cb.componentAccent=cb.Color.magenta;cb.derivedAccent=cb.Color.purple;var xb=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("Halo")&&"function"===typeof va.Halo?va.Halo:va.Halo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(I){I.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var I=this;setTimeout(function(){I.target.owner||I.remove()})}},{key:"initLayout",value:function(){var I=this.layout=new cb.GridLayout({autoAssign:!1,fitToCell:!1,
columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name",
"name","name","name","name",null]]});I.col(1).row(7).group.align="center";I.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(cb.morph({name:"border-box",fill:cb.Color.transparent,borderColor:this.target.isComponent?cb.componentAccent:cb.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(I){this.state||(this.state={});this.state.pointerId=I}},{key:"prepareTarget",
value:function(I){if(!cb.obj.isArray(I))return I;if(1>=I.length)return I[0];I=I[0].world().addMorph(new cb.MultiSelectionTarget({selectedMorphs:I}));I.alignWithSelection();I.modifiesSelectedMorphs=!0;return I}},{key:"refocus",value:function(I){this.target=I;this.alignWithTarget()}},{key:"alignWithTarget",value:function(I){if((!I||["extent","position","scale","rotation"].includes(I.prop))&&!this.active&&this.target){I=this.target.world()||$world;var pa=I.visibleBounds(),Oa=this.target.globalBounds(),
ub=Oa.insetBy(-36).intersection(pa);pa=Oa.intersection(pa);this.layout&&this.layout.disable();this.setBounds(ub.translatedBy(I.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,pa));this.state.activeButton?(this.buttonControls.forEach(function(Wb){return Wb.visible=!1}),this.ensureResizeHandles().forEach(function(Wb){return Wb.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),
this.ensureResizeHandles().forEach(function(Wb){return Wb.visible=!0}),this.buttonControls.forEach(function(Wb){Wb.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Wb){return Wb.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var I=this.target;I&&(cb.disconnect(I,"onChange",this,"alignWithTarget"),cb.disconnect(I,"onOwnerChanged",
this,"removeIfDetached"),I instanceof cb.MultiSelectionTarget?(I.modifiesSelectedMorphs=!1,I.remove()):"function"===typeof I.detachedHalo&&I.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Tb._get(Object.getPrototypeOf(qb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",value:function(I){return I}},{key:"propertyDisplay",get:function(){return cb.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return cb.NameHaloItem.for(this)}},{key:"closeHalo",
value:function(){return cb.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return cb.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return cb.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return cb.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return cb.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return cb.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return cb.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return cb.CopyHaloItem.for(this)}},
{key:"originHalo",value:function(){return cb.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return cb.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(I){return I.isHaloItem&&!I.isResizeHandle})}},{key:"addMorphToSelection",value:function(I){var pa=this,Oa,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress){Oa=pa.world();ub=pa.target.isMorphSelection?pa.target.selectedMorphs:[pa.target];
if(ub.includes(I))return Wb.return();pa.remove();return Wb.yield(Oa.showHaloForSelection([].concat($jscomp.arrayFromIterable(ub),[I]),pa.state.pointerId),2)}return Wb.return(Wb.yieldResult)})}},{key:"removeMorphFromSelection",value:function(I){var pa=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress){Oa=pa.world();pa.remove();if(!pa.target.isMorphSelection)return ub.jumpTo(0);cb.arr.remove(pa.target.selectedMorphs,I);return ub.yield(Oa.showHaloForSelection(pa.target.selectedMorphs,
pa.state.pointerId),3)}return ub.return(ub.yieldResult)})}},{key:"isAlreadySelected",value:function(I){return this.target==I||this.target.isMorphSelection&&this.target.selectsMorph(I)}},{key:"updateBoundsFor",value:function(I,pa,Oa,ub,Wb){var Jb={topLeft:cb.rect(-1,-1,1,1),topCenter:pa?cb.rect(1,-1,0,1):cb.rect(0,-1,0,1),topRight:cb.rect(0,-1,1,1),rightCenter:pa?cb.rect(0,1,1,1):cb.rect(0,0,1,0),bottomRight:cb.rect(0,0,1,1),bottomCenter:pa?cb.rect(1,0,0,1):cb.rect(0,0,0,1),bottomLeft:cb.rect(-1,0,
1,1),leftCenter:pa?cb.rect(-1,1,1,0):cb.rect(-1,0,1,0)}[I];Wb=Jb.x;var yc=Jb.y,Jc=Jb.width;Jb=Jb.height;Oa=pa?this.proportionalDelta(I,Oa,ub):Oa;I=cb.rect(Oa.x*Wb,Oa.y*yc,Oa.x*Jc,Oa.y*Jb);this.active=!0;this.target.setBounds(ub.insetByRect(I));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Hd){if(Hd.activeSideBars.includes("Styling Palette"))Hd.stylingPalette.onHierarchyChange()})}},
{key:"proportionalDelta",value:function(I,pa,Oa){var ub=Oa.width,Wb=Oa.height;Oa={topLeft:cb.pt(-1,-1),topCenter:cb.pt(0,-1),topRight:cb.pt(1,-1),leftCenter:cb.pt(-1,0),rightCenter:cb.pt(1,0),bottomLeft:cb.pt(-1,1),bottomCenter:cb.pt(0,1),bottomRight:cb.pt(1,1)};var Jb=ub/Math.max(ub,Wb),yc=Wb/Math.max(Wb,ub);ub={topLeft:cb.pt(-Jb,-yc),topCenter:cb.pt(1/(2*Wb/ub),-1),topRight:cb.pt(Jb,-yc),leftCenter:cb.pt(-1,Wb/(2*ub)),rightCenter:cb.pt(1,Wb/(3*ub)),bottomLeft:cb.pt(-Jb,yc),bottomCenter:cb.pt(1/
(2*Wb/ub),1),bottomRight:cb.pt(Jb,yc)};Oa=Oa[I];return ub[I].scaleBy(Oa.dotProduct(pa)/Oa.dotProduct(Oa))}},{key:"ensureResizeHandles",value:function(){return cb.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(I){I=I.valueForPropertyDisplay();"undefined"!==typeof I?this.propertyDisplay.displayProperty(I):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(I,pa){if(!cb.rect(0).sides.includes(pa)){var Oa=this.getSubmorphNamed("diagonal");if(I){I=this.target.globalBounds();
var ub=I.width,Wb=I.height;I=this.localize(cb.pt(I.x,I.y)).extent(cb.pt(ub,Wb)).scaleRectTo(this.innerBounds());ub={topLeft:[cb.pt(ub,Wb),cb.pt(0,0)],topRight:[cb.pt(0,Wb),cb.pt(ub,0)],bottomRight:[cb.pt(0,0),cb.pt(ub,Wb)],bottomLeft:[cb.pt(ub,0),cb.pt(0,Wb)]};Oa?Oa.setBounds(I):(Oa=$jscomp.makeIterator(ub[pa]),pa=Oa.next().value,Oa=Oa.next().value,ub=new cb.LinearGradient({stops:[{offset:0,color:cb.Color.orange.withA(0)},{offset:.2,color:cb.Color.orange},{offset:.8,color:cb.Color.orange},{offset:1,
color:cb.Color.orange.withA(0)}]}),Oa=this.addMorphBack(new cb.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:I,borderColor:ub,vertices:[pa,Oa]})),Oa.setBounds(I),Oa.animate({opacity:1,duration:500}))}else Oa&&Oa.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(I,pa){var Oa=this.getSubmorphNamed("rotationIndicator");I&&pa?(I=this.getSubmorphNamed("origin").center,Oa=Oa||this.addMorphBack(new cb.Path({name:"rotationIndicator",borderColor:cb.haloBlue,borderWidth:1,
vertices:[]})),Oa.setBounds(pa.bounds().union(this.innerBounds())),Oa.vertices=[Oa.localizePointFrom(I,this),Oa.localizePointFrom(pa.center,this)]):Oa&&Oa.remove()}},{key:"toggleMorphHighlighter",value:function(I,pa,Oa){Oa=void 0===Oa?!1:Oa;if(pa)if(pa.onHaloGrabover)pa.onHaloGrabover(I);else Oa=cb.MorphHighlighter.for(this,pa,Oa),I&&pa&&pa!=this.world()?Oa&&Oa.show(pa):Oa&&Oa.deactivate()}},{key:"onMouseDown",value:function(I){var pa=I.state.clickedOnMorph;if(!I.isCommandKey()&&pa==this.borderBox)return this.remove();
if(I.isShiftDown()&&I.isCommandKey())I=this.target.isMorphSelection?this.target.morphBeneath(I.position):this.morphBeneath(I.position),this.isAlreadySelected(I)?this.removeMorphFromSelection(I):this.addMorphToSelection(I);else{if(pa==this.borderBox&&I.isCommandKey()){var Oa=I.world.morphsContainingPoint(I.position).filter(function(ub){return ub.halosEnabled});(Oa=Oa.slice(Oa.indexOf(this.target)+1)[0]||Oa[0]||I.world)&&I.world.showHaloFor(Oa,I.domEvt.pointerId);this.remove()}pa==this&&I.isCommandKey()&&
(Oa=this.morphBeneath(I.position),I.world.showHaloFor(Oa,I.domEvt.pointerId));pa==this&&this.remove()}}},{key:"onContextMenu",value:function(I){var pa=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(Oa){return pa.target.openMenu(Oa,I)}).catch(function(Oa){return $world.logError(Oa)})}},{key:"onKeyUp",value:function(I){this.changingName||this.buttonControls.map(function(pa){return pa.onKeyUp(I)})}},{key:"getMesh",value:function(I,pa){var Oa=I.x;I=I.y;pa=void 0===pa?cb.pt(0,
0):pa;var ub=this.world().visibleBounds(),Wb=ub.height;ub=ub.width;var Jb={borderStyle:"dotted",borderWidth:2,borderColor:cb.Color.orange};Jb=this.get("mesh")||this.addMorph(new cb.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:cb.pt(ub,Wb),fill:null,submorphs:[new cb.Path(Object.assign({name:"vertical"},Jb)),new cb.Path(Object.assign({name:"horizontal"},Jb))]}));Jb.globalPosition=pa;Jb.getSubmorphNamed("vertical").vertices=[cb.pt(Oa,0).subPt(pa),cb.pt(Oa,Wb).subPt(pa)];Jb.getSubmorphNamed("horizontal").vertices=
[cb.pt(0,I).subPt(pa),cb.pt(ub,I).subPt(pa)];return Jb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:cb.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(cb.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(I){this.state||(this.state={});var pa=!!this.state.target;this.detachFromTarget();I=this.prepareTarget(I);this.state.target=I;pa&&this.alignWithTarget();cb.connect(I,"onChange",this,"alignWithTarget");cb.connect(I,"onOwnerChanged",this,"removeIfDetached")}}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:979,end:17523})}(cb.Morph);xb=cb.Halo;var Bc=ya("H",xb);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof va.HaloPropertyDisplay?va.HaloPropertyDisplay:va.HaloPropertyDisplay=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(I){var pa=this.halo.state.activeButton;I=String(I);this.visible=!0;this.textString=I;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(pa.bounds())&&(this.position=cb.pt(pa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=
this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return cb.pt(25,0)}},{key:"for",value:function(I){return I.getSubmorphNamed(this.morphName)||I.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:cb.Color.black.withA(.7)},borderRadius:{defaultValue:7},
padding:{defaultValue:cb.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:cb.Color.white},position:{defaultValue:this.defaultPosition}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17713,end:19051})})(cb.Label);
(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof va.MultiSelectionTarget?va.MultiSelectionTarget:va.MultiSelectionTarget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(I){return this.selectedMorphs.includes(I)}},
{key:"alignWithSelection",value:function(){var I=this.selectedMorphs.map(function(pa){return pa.globalBounds()}).reduce(function(pa,Oa){return pa.union(Oa)});this.setBounds(I)}},{key:"onGrab",value:function(I){this.grabbingHand=I.hand;this.selectionGrabbed=!0;I.hand.grab(this.selectedMorphs);cb.once(I.hand,"dropMorphsOn",this,"onGrabEnd");cb.connect(I.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;cb.disconnectAll(this.grabbingHand)}},{key:"updateExtent",
value:function(I){var pa=I.value.subPt(I.prevValue);this.selectedMorphs.forEach(function(Oa){return Oa.resizeBy(pa)})}},{key:"updatePosition",value:function(I){if(!this.selectionGrabbed){var pa=I.value.subPt(I.prevValue);this.selectedMorphs.forEach(function(Oa){return Oa.moveBy(pa)})}}},{key:"updateRotation",value:function(I){var pa=this,Oa=I.value-I.prevValue;this.selectedMorphs.forEach(function(ub){var Wb=ub.origin;ub.adjustOrigin(ub.localize(pa.worldPoint(cb.pt(0,0))));ub.rotation+=Oa;ub.adjustOrigin(Wb)})}},
{key:"updateScale",value:function(I){var pa=this,Oa=I.value-I.prevValue;this.selectedMorphs.forEach(function(ub){var Wb=ub.origin;ub.adjustOrigin(ub.localize(pa.worldPoint(cb.pt(0,0))));ub.scale+=Oa;ub.adjustOrigin(Wb)})}},{key:"onChange",value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),"onChange",this).call(this,I);if(this.modifiesSelectedMorphs){switch(I.prop){case "extent":this.updateExtent(I);break;case "scale":this.updateScale(I);break;case "position":this.updatePosition(I);break;
case "rotation":this.updateRotation(I)}return I}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19119,end:21390})})(cb.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("HaloItem")&&"function"===typeof va.HaloItem?va.HaloItem:va.HaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:cb.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:cb.pt(24,24)},halo:{}}}},{key:"for",
value:function(I){return I.getSubmorphNamed(this.morphName)||I.addMorph(new this({halo:I,name:this.morphName}))}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21554,end:22227})})(cb.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("NameHolder")&&
"function"===typeof va.NameHolder?va.NameHolder:va.NameHolder=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onHoverIn",value:function(I){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=cb.Color.orange)}},{key:"onHoverOut",value:function(I){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
cb.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(I){"Enter"==I.keyCombo?(this.accept(),this.halo.focus(),I.stop()):Tb._get(Object.getPrototypeOf(qb.prototype),"onKeyDown",this).call(this,I)}},{key:"onMouseUp",value:function(){cb.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(I){this.nameHolder.fontColor=cb.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(I){I=this.nameHolder.textString;var pa=this.target.owner;this.validName=!pa||!pa.getSubmorphNamed(I)||this.target.name==I;cb.signal(this,"valid",[this.validName,I])}},{key:"update",value:function(){var I=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return I.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(I){if(!this.forceUniqueName||this.validName)this.target.name=I,cb.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:cb.Color.transparent},
forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new cb.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new cb.Text({fill:cb.Color.transparent,fontColor:cb.Color.white,fontWeight:"bold",active:!0}));cb.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22262,end:24844})})(cb.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("NameHaloItem")&&"function"===typeof va.NameHaloItem?va.NameHaloItem:va.NameHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,
[{key:Symbol.for("lively-instance-initialize"),value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,I);this.initComponentLink();this.initNameHolders();this.validityIndicator=cb.Icon.makeLabel("check",{fontColor:cb.Color.green,fontSize:15,padding:cb.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?cb.componentAccent:cb.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var I=this,pa=this.halo.target;if(pa&&
!pa.isMorphSelection&&pa.master){var Oa=pa.master.determineMaster(pa),ub=Oa&&!!Oa.world(),Wb=Oa?pa.master.getWorldUrlFor(Oa):"this project";pa=this.addMorph(cb.Icon.makeLabel(Wb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:cb.Color.white,padding:cb.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Wb}));Wb&&cb.connect(pa,"onMouseDown",function(){ub?I.showLocalMaster(Oa):window.open(Wb)})}}},{key:"showLocalMaster",value:function(I){var pa;if(pa=I.getWindow())pa.activate(),
pa.minimized&&(pa.minimized=!1);I.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(I){return{target:I,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var I=this;this.nameHolders=this.targets().map(function(pa){pa=new cb.NameHolder({halo:I.halo,highlightOnHover:pa.highlightOnHover,target:pa.target});cb.connect(pa,"active",I,"toggleActive");
cb.connect(pa,"valid",I,"toggleNameValid");return pa});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(cb.arr.interpose(this.nameHolders,{extent:cb.pt(1,28),fill:cb.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(I){var pa=$jscomp.makeIterator(I);I=pa.next().value;var Oa=pa.next().value;if(this.halo.changingName!==I){this.halo.changingName=I;if(pa=this.get("master link"))pa.visible=pa.isLayoutable=!I;I?(this.nameHolders.forEach(function(ub){return ub!=
Oa&&ub.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=cb.Color.darkGray,setTimeout(function(){return Oa.nameHolder.selectAll()})):(this.fill=cb.haloBlue,this.nameHolders.forEach(function(ub){return ub!=Oa&&ub.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(I){var pa=$jscomp.makeIterator(I);I=pa.next().value;pa=pa.next().value;(this.validName=I)?(this.conflictingMorph=null,this.borderColor=
cb.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=cb.Color.green,cb.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(pa),this.borderColor=cb.Color.red,this.validityIndicator.fontColor=cb.Color.red,this.validityIndicator.nativeCursor="pointer",cb.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){cb.arr.zip(this.targets(),this.nameHolders).map(function(pa){var Oa=$jscomp.makeIterator(pa);
pa=Oa.next().value.target;Oa=Oa.next().value;Oa.target=pa;Oa.update()});var I=this.halo.innerBounds().bottomCenter().addPt(cb.pt(0,2));this.topCenter=cb.pt(Math.max(I.x,30),Math.max(I.y,80))}},{key:"onMouseDown",value:function(I){var pa=this,Oa=this.conflictingMorph;Oa&&(this.halo.toggleMorphHighlighter(!0,Oa),setTimeout(function(){return pa.halo.toggleMorphHighlighter(!1,Oa)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:cb.haloBlue},borderColor:{defaultValue:cb.Color.green},layout:{initialize:function(){this.layout=new cb.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24846,end:29317})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("CloseHaloItem")&&"function"===typeof va.CloseHaloItem?va.CloseHaloItem:va.CloseHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"update",value:function(){var I=this.halo,pa=I.target.owner;pa.undoStart("close-halo");I.target.selectedMorphs?
I.target.selectedMorphs.forEach(function(Oa){return Oa.remove()}):I.target.remove();pa.undoStop("close-halo");I.remove()}},{key:"onMouseDown",value:function(I){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],va,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29319,end:29944})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("GrabHaloItem")&&"function"===typeof va.GrabHaloItem?va.GrabHaloItem:va.GrabHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:"adjustTarget",value:function(I,pa){cb.PropertyPath("owner.layout.autoResize").get(I)&&!I.globalBounds().insetBy(10).containsPoint(pa)&&(I=I.owner);return I}},{key:"valueForPropertyDisplay",value:function(){var I=this.hand,pa=this.halo,Oa=this.prevDropTarget,ub=I.world(),Wb=I.findDropTarget(I.globalPosition,[pa.target],function(Jb){return!Jb.isHaloItem&&!Jb.ownerChain().some(function(yc){return yc.isHaloItem||!yc.visible||0==yc.opacity})});if(Wb)return Wb=this.adjustTarget(Wb,
I.globalPosition),pa.toggleMorphHighlighter(Wb&&Wb!=ub,Wb,!0),Oa&&Oa!=Wb&&pa.toggleMorphHighlighter(!1,Oa),(this.prevDropTarget=Wb)&&Wb.name}},{key:"init",value:function(I){var pa=this.halo,Oa=pa.target.undoStart("grab-halo");Oa&&Oa.addTarget(pa.target.owner);this.hand=I;pa.target.onGrab({halo:pa,hand:I,isShiftDown:function(){return!1}});pa.state.activeButton=this;this.opacity=.3;var ub=cb.connect(I,"update",this,"update");cb.once(pa.target,"remove",function(){return ub.disconnect()})}},{key:"stop",
value:function(I){var pa=this.halo,Oa=this.prevDropTarget,ub=pa.target.undoInProgress,Wb=I.hand.findDropTarget(I.hand.globalPosition,[pa.target],function(Jb){return!Jb.isHaloItem&&!Jb.ownerChain().some(function(yc){return yc.isHaloItem})});Wb=this.adjustTarget(Wb,I.hand.globalPosition);cb.disconnect(I.hand,"update",this,"update");cb.MorphHighlighter.interceptDrop(pa,Wb,pa.target);ub.addTarget(Wb);Wb.onDrop(I);pa.state.activeButton=null;pa.alignWithTarget();pa.toggleMorphHighlighter(!1,Oa);cb.MorphHighlighter.removeHighlighters(pa);
pa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(I){this.init(I.hand)}},{key:"onDragEnd",value:function(I){this.stop(I)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29946,end:32474})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("DragHaloItem")&&"function"===typeof va.DragHaloItem?va.DragHaloItem:va.DragHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(I){var pa=this.halo.getSubmorphNamed("mesh");if(I)return pa=this.halo.getMesh(this.halo.target.worldPoint(cb.pt(0,0))),this.focus(),pa;pa&&pa.remove()}},{key:"init",value:function(){var I=this.halo.target;I.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=I.position;
this.targetTransform=I.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);cb.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(I,pa,Oa){pa=void 0===pa?!1:pa;Oa=void 0===Oa?!1:Oa;this.actualPos=I=this.actualPos.addPt(this.targetTransform.transformDirection(I));pa&&(I=I.griddedBy(cb.pt(10,10)));this.halo.target.position=I;this.updateAlignmentGuide(pa);
this.world().withTopBarDo(function(ub){if(ub.activeSideBars.includes("Styling Palette"))ub.stylingPalette.onHierarchyChange()});pa||cb.showAndSnapToGuides(this.halo.target,!0,Oa,5,500)}},{key:"onDragStart",value:function(I){this.init()}},{key:"onDrag",value:function(I){this.update(I.state.dragDelta,I.isAltDown(),I.isCtrlDown())}},{key:"onDragEnd",value:function(I){this.stop()}},{key:"onKeyUp",value:function(I){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},
{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:32476,end:34474})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("InspectHaloItem")&&"function"===typeof va.InspectHaloItem?va.InspectHaloItem:va.InspectHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){var pa=this;(function(){var Oa,ub,Wb,Jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yc){if(1==
yc.nextAddress)return yc.yield(System.import("lively.ide/js/inspector.js"),2);Oa=yc.yieldResult;ub=Oa.default;(Wb=pa.world().getSubmorphsByStyleClassName("Inspector").find(function(Jc){return Jc.targetObject==pa.halo.target}))&&(Jb=Wb.getWindow())?(Jb.minimized=!1,Jb.activate(),Jb.animate({center:pa.world().visibleBounds().center(),duration:200})):ub.openInWindow({targetObject:pa.halo.target});pa.halo.remove();yc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},
{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34476,end:35393})})(cb.HaloItem);
(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("EditHaloItem")&&"function"===typeof va.EditHaloItem?va.EditHaloItem:va.EditHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){var pa=this;(I=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Oa){return Oa.target==pa.halo.target}))?(I=I.getWindow(),
I.bringToFront(),I.minimized=!1,I.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],va,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35395,end:36175})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("RotateHaloItem")&&"function"===typeof va.RotateHaloItem?va.RotateHaloItem:va.RotateHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,I);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(I){this.setProperty("angle",I)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(I){this.setProperty("scaleGauge",I)}},{key:"initRotation",
get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(I){this.setProperty("initRotation",I)}},{key:"valueForPropertyDisplay",value:function(){var I=this.halo.target;return this.scaleGauge?I.scale.toFixed(4).toString():cb.num.toDegrees(I.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(I){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=I;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,
this)}},{key:"initScale",value:function(I){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=I.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(I){this.scaleGauge=null;I=this.initRotation+(I-this.angle);I=cb.num.toRadians(cb.num.detent(cb.num.toDegrees(I),10,45));this.halo.target.rotation=I;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(I){var pa=this.scaleGauge,Oa=this.halo;pa||(pa=
this.scaleGauge=I.scaleBy(1/Oa.target.scale));this.angle=I.theta();this.initRotation=Oa.target.rotation;Oa.target.scale=cb.num.detent(I.dist(cb.pt(0,0))/pa.dist(cb.pt(0,0)),.1,.5);Oa.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(I){this.styleClasses=
["fas",I?"fa-search-plus":"fa-redo"];this.tooltip=I?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(I){this.adaptAppearance(I.isShiftDown());I.isShiftDown()?this.initScale(I.position.subPt(this.halo.target.globalPosition)):this.init(I.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(I){this.globalPosition=
I.position.addPt(cb.pt(-10,-10));this.adaptAppearance(I.isShiftDown());I.isShiftDown()?this.updateScale(I.position.subPt(this.halo.target.globalPosition)):this.update(I.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(I){this.adaptAppearance(I.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(I){this.adaptAppearance(I.isShiftDown())}},{key:"onKeyUp",value:function(I){this.adaptAppearance(I.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:36177,end:39654})})(cb.HaloItem);cb.nameNumberRe=/(.+)([0-9]+)$/;(function(ia){var va=
lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("ComponentHaloItem")&&"function"===typeof va.ComponentHaloItem?va.ComponentHaloItem:va.ComponentHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"updateComponentIndicator",value:function(){var I=this.world(),pa=this.halo.target;this.halo.remove();I.showHaloFor(pa)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var I=
this,pa,Oa,ub,Wb,Jb,yc,Jc,Hd,Ge,Dd,ae,ie;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:pa=I.halo.target;Oa=I.world();ub=[];pa.withAllSubmorphsDoExcluding(function(Tc){Tc!=pa&&ub.push(Tc)},function(Tc){return Tc.master});Wb=cb.arr.groupBy(ub,function(Tc){return Tc.name});Jb={fontWeight:"normal",fontSize:16};if(!Object.values(Wb).find(function(Tc){return 1<Tc.length})){Fe.jumpTo(2);break}yc=cb.arr.sum(Object.values(Wb).filter(function(Tc){return 1<Tc.length}).map(function(Tc){return Tc.length}));
return Fe.yield(Oa.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(cb.Icon.textAttribute("exclamation-triangle",{fontColor:cb.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+yc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Jb,{textAlign:"left"}),
"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",Object.assign({},Jb,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Jb,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Jb,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Jc=Fe.yieldResult,!Jc)return Fe.return();case 2:Ge=Fe.forIn(Wb);case 4:if(null==(Hd=Ge.getNext())){Fe.jumpTo(6);break}if(2>Wb[Hd].length){Fe.jumpTo(4);break}Dd=Wb[Hd];case 7:if(!(1<Dd.length)){Fe.jumpTo(4);break}ae=Dd[0];cb.show(ae,!0);return Fe.yield(Oa.prompt(["Name Collision\n",{},"The name of\n",Jb,ae.toString(),Object.assign({},Jb,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Jb),pa.name,Object.assign({},Jb,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Dd.length?"are "+(Dd.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Jb," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Jb],{input:ae.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Tc){return!Object.keys(Wb).includes(Tc)}}),9);case 9:ie=Fe.yieldResult;cb.signal(Oa,"hideMarkers");ie&&(ae.name=ie);if(ie in Wb){Fe.jumpTo(7);break}else if(!ie){Dd=cb.arr.rotate(Dd);Fe.jumpTo(7);break}cb.arr.remove(Dd,ae);Fe.jumpTo(7);break;case 6:return Fe.return(!0)}})}},{key:"onMouseDown",value:function(){var I=this,pa,Oa,ub,Wb,Jb,yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){switch(Jc.nextAddress){case 1:pa=
I.halo.target;Oa=!pa.isComponent;ub=$world.getAllNamed(pa.name).length;if(!(Oa&&1<ub)){Jc.jumpTo(2);break}return Jc.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(ub-1)+" other morph"+(2<ub?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:pa.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Hd){return 0==$world.getAllNamed(Hd).length}}),3);case 3:Wb=Jc.yieldResult;if(!Wb)return Jc.return();pa.name=Wb;case 2:Jb=pa;if(!(yc=Oa)){Jc.jumpTo(4);break}return Jc.yield(I.checkForDuplicateNamesInHierarchy(),5);case 5:yc=Jc.yieldResult;case 4:Jb.isComponent=yc,Oa?cb.arr.pushIfNotIncluded(pa.world().localComponents,pa):cb.arr.remove(pa.world().localComponents,pa),I.world()?I.updateComponentIndicator():pa.world().showHaloFor(pa),Jc.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:39695,end:45749})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("CopyHaloItem")&&"function"===typeof va.CopyHaloItem?va.CopyHaloItem:va.CopyHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"init",value:function(I){function pa(Hd,Ge){return Ge.match(cb.nameNumberRe)?
Ge.replace(cb.nameNumberRe,function(Dd,ae,ie){ie||(ie="0");for(Dd=Number(ie);Hd.get(ae+ ++Dd););return ae+Dd}):Ge+"1"}var Oa=this.halo,ub=Oa.target,Wb=Oa.world(),Jb=ub instanceof cb.MultiSelectionTarget;Oa.remove();cb.connect(I,"update",this,"update");if(Jb){var yc=ub.selectedMorphs.map(function(Hd){return Wb.addMorph(Hd.copy())});Jb=yc.map(function(Hd){Hd.name=pa(ub,Hd.name);return Hd.position});yc[0].undoStart("copy-halo");Wb.addMorph(Oa);Oa.refocus(yc);I.grab(Oa.target);Oa.target.onGrab({halo:Oa,
hand:I,isShiftDown:function(){return!1}});Jb.forEach(function(Hd,Ge){return yc[Ge].globalPosition=Hd});Oa.alignWithTarget()}else{Jb=ub.globalPosition;var Jc=ub.copy();ub.isComponent&&(Jc.isComponent=!1,Jc.withAllSubmorphsDoExcluding(function(Hd){Hd!=Jc&&Hd.master||delete Hd._parametrizedProps},function(Hd){return Hd.master&&Hd!=Jc}),Jc.master=ub);Jc.name=pa(ub,ub.name);Wb.addMorph(Jc);Jc.globalPosition=Jb;Jc.undoStart("copy-halo");I.grab(Jc);Wb.addMorph(Oa);Oa.visible=!1}}},{key:"stop",value:function(I){var pa=
this.halo,Oa=$jscomp.makeIterator(I.grabbedMorphs).next().value,ub=I.findDropTarget(I.globalPosition,[pa.target],function(Jb){return!Jb.isHaloItem&&!Jb.ownerChain().some(function(yc){return yc.isHaloItem})}),Wb=pa.target.undoInProgress;cb.disconnect(I,"update",this,"update");Wb.addTarget(ub);I.dropMorphsOn(ub);pa.target.undoStop("copy-halo");pa.remove();I.world().showHaloFor(Oa)}},{key:"onDragStart",value:function(I){this.init(I.hand)}},{key:"onDragEnd",value:function(I){this.stop(I.hand)}},{key:"update",
value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var I=this,pa,Oa,ub,Wb,Jb,yc,Jc,Hd,Ge,Dd,ae,ie,Fe,Tc,ee;return $jscomp.asyncExecutePromiseGeneratorProgram(function(he){switch(he.nextAddress){case 1:pa=I;Oa=pa.halo;if(Oa.nameHalo().nameHolders.find(function(gf){return gf.nameHolder===$world.focusedMorph}))return he.return();ub=Oa.target;Wb=Oa.world();Jb=ub instanceof cb.MultiSelectionTarget;yc=ub.globalBounds().topLeft();Jc=Jb?ub.selectedMorphs:[ub];Hd=[];Ge=
'<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Oa.remove();he.setCatchFinallyBlocks(2);Dd=$jscomp.makeIterator(Jc);ae=Dd.next();case 4:if(ae.done)return Ge+="</body></html>",Tc=JSON.stringify(Hd),he.yield(I.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Ge},{type:"application/morphic",data:Tc}]),8);ie=ae.value;return he.yield(cb.createMorphSnapshot(ie,
{addPreview:!1,testLoad:!1}),7);case 7:Fe=he.yieldResult;Fe.copyMeta={offset:ie.worldPoint(cb.pt(0,0)).subPt(yc)};Hd.push(Fe);Ge+=ie.renderPreview();ae=Dd.next();he.jumpTo(4);break;case 8:he.leaveTryBlock(3);break;case 2:return ee=he.enterCatchBlock(),Wb.logError(ee),he.return();case 3:Wb.addMorph(Oa),Oa.refocus(Jc),Oa.setStatusMessage("copied"),he.jumpToEnd()}})}},{key:"onMouseUp",value:function(I){var pa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){I.stop();return Oa.yield(pa.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:45751,end:49785})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("OriginHaloItem")&&"function"===typeof va.OriginHaloItem?va.OriginHaloItem:va.OriginHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"fill",get:function(){return cb.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return cb.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(I){var pa=this.halo,Oa=pa.target.origin,ub=pa.target.worldPoint(Oa);I=pa.target.localize(ub.addPt(I)).subPt(pa.target.scroll).subPt(Oa);pa.target.adjustOrigin(pa.target.origin.addPt(I))}},{key:"onDragStart",value:function(I){this.init()}},{key:"onDragEnd",value:function(I){this.stop()}},{key:"onDrag",value:function(I){this.update(I.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?cb.componentAccent:cb.haloBlue}}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49787,end:51448})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("ResizeHandle")&&"function"===typeof va.ResizeHandle?va.ResizeHandle:va.ResizeHandle=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"valueForPropertyDisplay",value:function(){var I=this.halo.target.extent,
pa=I.y;return I.x.toFixed(1)+"x"+pa.toFixed(1)}},{key:"positionInHalo",value:function(){var I=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(cb.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),I=I.insetBy(-4));return I.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(I){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(I.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(I){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(I.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(I){this.init(I.position,I.isShiftDown())}},{key:"onDragEnd",value:function(I){this.stop(I.isShiftDown())}},{key:"onDrag",value:function(I){this.update(I.position,I.isShiftDown(),I.isAltDown(),I.isCtrlDown());this.focus()}},{key:"init",value:function(I,pa){pa=void 0===pa?!1:pa;var Oa=this.halo.target,ub=Oa.origin,Wb=Oa.position;Oa=Oa.extent;this.startPos=I;this.startBounds=Wb.subPt(ub).extent(Oa);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();I=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=cb.num.toRadians(I%45);this.halo.toggleDiagonal(pa,this.corner)}},{key:"update",value:function(I,pa,Oa,ub){pa=void 0===pa?!1:pa;Oa=void 0===Oa?!1:Oa;ub=void 0===ub?!1:ub;var Wb=this.corner,Jb=this.tfm;I=this.startPos.subPt(I);Jb=Jb.transformDirection(cb.pt(I.x,
I.y));Oa&&(Jb=Jb.griddedBy(cb.pt(10,10)));this.halo.updateBoundsFor(Wb,pa,Jb,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(pa,Wb);this.updateAlignmentGuide(Oa);pa=[];Wb=Wb.toLowerCase();Wb.includes("left")&&pa.push("left");Wb.includes("top")&&pa.push("top");Wb.includes("bottom")&&pa.push("bottom");Wb.includes("right")&&pa.push("right");cb.showAndSnapToResizeGuides(this.halo.target,pa,!0,ub,5,200)}},{key:"stop",value:function(I){I=this.halo;I.layout=this.savedLayout;I.state.activeButton=
null;I.alignWithTarget();I.toggleDiagonal(!1);this.updateAlignmentGuide(!1);cb.removeSnapToGuidesOf(I.target)}},{key:"updateAlignmentGuide",value:function(I){var pa=this.halo.getSubmorphNamed("mesh");if(I)return I=this.halo.target.extent,I=cb.pt(I.x%10,I.y%10),pa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),I),this.focus(),pa;pa&&pa.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(I){0<I&&(I-=360);I=-8-(I/45).toFixed();0==I&&(I=8);return cb.arr.zip(cb.arr.rotate([["topLeft",function(pa){return pa.negated()}],["topCenter",function(pa){return pa.withX(0).negated()}],["topRight",function(pa){return pa.withX(0).negated()}],["rightCenter",function(pa){return cb.pt(0,0)}],["bottomRight",function(pa){return cb.pt(0,0)}],["bottomCenter",function(pa){return cb.pt(0,
0)}],["bottomLeft",function(pa){return pa.withY(0).negated()}],["leftCenter",function(pa){return pa.withY(0).negated()}]],I),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(I){var pa=this;if(!I.target)return[];var Oa=I.target.getGlobalTransform().getRotation();return cb.arr.compact(this.getResizeParts(Oa).map(function(ub){var Wb=
$jscomp.makeIterator(ub),Jb=$jscomp.makeIterator(Wb.next().value);ub=Jb.next().value;Jb.next();Jb.next();Jb=$jscomp.makeIterator(Wb.next().value);Wb=Jb.next().value;Jb=Jb.next().value;return pa.for(I,ub,Jb,Wb)})).map(function(ub){return ub.alignInHalo()})}},{key:"for",value:function(I,pa,Oa,ub){var Wb="Resize "+pa;I=I.getSubmorphNamed(Wb)||new this({name:Wb,halo:I,corner:pa,tooltip:"Resize "+pa,extent:cb.pt(10,10),borderWidth:1,borderRadius:0,borderColor:I.target.isComponent?cb.componentAccent:cb.haloBlue,
fill:cb.Color.white});return Object.assign(I,{nativeCursor:ub,location:Oa})}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:51507,end:56805})})(cb.HaloItem);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("MenuHaloItem")&&"function"===
typeof va.MenuHaloItem?va.MenuHaloItem:va.MenuHaloItem=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){var pa=this,Oa,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return Oa=pa.halo.target,pa.halo.remove(),Wb.yield(Oa.menuItems(),2);ub=Wb.yieldResult;Oa.world().openMenu(ub).hasFixedPosition=pa.halo.hasFixedPosition;Wb.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:56807,end:57329})})(cb.HaloItem);var mb=ya("M",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),qb=va.hasOwnProperty("MorphHighlighter")&&"function"===typeof va.MorphHighlighter?va.MorphHighlighter:va.MorphHighlighter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(I){this.layoutHalo&&this.layoutHalo.handleDrop(I)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:cb.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:cb.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(I){var pa=this;this.setProperty("highlightedSides",I);this.submorphs=I.map(function(Oa){return{type:"ellipse",
isHaloItem:!0,fill:cb.Color.orange,center:pa.innerBounds()[Oa]()}});this.addMorph({type:"label",name:"name tag",padding:cb.Rectangle.inset(5,5,5,5),fontColor:cb.Color.white,fill:cb.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(I){I=void 0===I?$world:I;var pa=I._morphHighlighters,Oa;for(Oa in pa)pa[Oa].remove();
delete I._morphHighlighters}},{key:"for",value:function(I,pa,Oa,ub){Oa=void 0===Oa?!1:Oa;ub=void 0===ub?[]:ub;var Wb=I._morphHighlighters=I._morphHighlighters||{};cb.properties.forEachOwn(Wb,function(Jb,yc){return yc.alignWithHalo()});if(!pa||pa.ownerChain().find(function(Jb){return Jb.isHaloItem}))return null;Wb[pa.id]=Wb[pa.id]||new this({targetId:pa.id,halo:I,showLayout:Oa});I.addMorph(Wb[pa.id]);Wb[pa.id].highlightedSides=ub;return Wb[pa.id]}},{key:"interceptDrop",value:function(I,pa,Oa){(I=I._morphHighlighters=
I._morphHighlighters||{},I[pa.id])&&I[pa.id].handleDrop(Oa)}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:57518,end:61129})}(cb.Morph));cb.MorphHighlighter=mb;cb.MorphHighlighter=mb;cb.MorphHighlighter=mb;var Ec=ya("I",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
qb=va.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof va.InteractiveMorphSelector?va.InteractiveMorphSelector:va.InteractiveMorphSelector=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(I,pa,Oa){I=void 0===I?$world:I;this.controllingMorph=void 0===pa?null:pa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
I;this.filterFn=Oa;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var I=cb.promise.deferred();I.promise.resolve=I.resolve;this.whenDone=I.promise;this.selectorMorph=cb.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();cb.connect(this.world.firstHand,"position",this,"scanForTargetAt");cb.once(this.selectorMorph,"onMouseDown",this,"selectTarget");cb.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var I=this.world.firstHand.globalPosition;this.selectorMorph.center=I;this.selectorMorph.focus();var pa=this.selectorMorph.morphBeneath(I),Oa,ub=this.possibleTarget,Wb=this.controllingMorph,Jb=this.filterFn,yc=this.world,Jc=this.morphHighlighter;for(Jc==pa?pa=Jc.morphBeneath(I):pa&&pa.isEpiMorph&&(pa=pa.morphBeneath(I));pa&&(Oa=[pa].concat($jscomp.arrayFromIterable(pa.ownerChain())).find(function(Hd){return!Hd.visible}));)pa=
Oa=Oa.morphBeneath(I);if(pa&&Jb&&!Jb(pa))for(;pa&&![pa].concat($jscomp.arrayFromIterable(pa.ownerChain())).find(Jb);)pa=pa.morphBeneath(I);!pa||pa==ub||Wb&&pa.ownerChain().includes(Wb.getWindow())||(Jc&&Jc.deactivate(),(this.possibleTarget=ub=pa)&&!ub.isWorld&&(I=this.morphHighlighter=cb.MorphHighlighter.for(yc,pa))&&I.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){cb.MorphHighlighter.removeHighlighters(this.world);
cb.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(I,pa,Oa){I=new this(I,pa,Oa);I.selectNewTarget();return I.whenDone}}],va,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:61138,end:63893})}(void 0));cb.InteractiveMorphSelector=Ec;cb.InteractiveMorphSelector=Ec;cb.InteractiveMorphSelector=Ec;cb.default=xb;var Ac=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Ac.info="import via sub modules";Ac.info="import via sub modules";Ac.info="import via sub modules";xb=ya("v",{});Ac.valueWidgets=xb;Ac.valueWidgets=xb;Ac.valueWidgets=xb;var ab=ya("p",{});Ac.popovers=ab;Ac.popovers=ab;Ac.popovers=
ab;var La=lively.FreezerRuntime.recorderFor("lively.components/popup.js");La.Morph=ve;La.VerticalLayout=Ka;La.StyleSheet=Fd;La.Icon=ne;La.CustomLayout=Fa;La.Color=ac;La.rect=Ic;La.pt=Ab;La.connect=Ub;La.Path=ad;La.duration=300;Ac=ya("P",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),qb=va.hasOwnProperty("Popover")&&"function"===typeof va.Popover?va.Popover:va.Popover=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:"relayout",value:function(I){var pa=this.get("body"),Oa=this.get("arrow"),ub=this.get("close button");Oa=Oa.height;I?(pa.animate({topCenter:La.pt(0,Oa),duration:200}),ub.animate({topRight:pa.topRight.addXY(8,-8),duration:200})):(pa.topCenter=La.pt(0,Oa),ub.topRight=pa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},
hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:La.pt(200,200),fill:La.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(I){var pa=this;this.get("body").addMorph(I);this.whenRendered().then(function(){return pa.relayout()})}},submorphs:{initialize:function(){var I=
this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:La.pt(0,0),borderColor:La.Color.transparent,vertices:[La.pt(-10,0),La.pt(0,-15),La.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(La.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:La.pt(16,16),borderColor:La.Color.transparent}];var pa=$jscomp.makeIterator(this.submorphs);pa.next();var Oa=pa.next().value;pa=pa.next().value;La.connect(pa,"fire",this,"close");La.connect(Oa,"extent",
this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return I.animated=!0},1E3)}}}}}],va,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(La.Morph));La.Popover=Ac;La.Popover=Ac;La.Popover=Ac;var gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");
gb.Morph=ve;gb.TilingLayout=Xa;gb.morph=Ob;gb.Label=xd;gb.HorizontalLayout=ic;gb.Icon=ne;gb.InputLine=Ib;gb.config=jc;gb.connect=Ub;gb.signal=yb;gb.Color=ac;gb.LinearGradient=Hc;gb.pt=Ab;gb.rect=Ic;gb.num=ec;gb.obj=kd;gb.popovers=ab;gb.ValueScrubber=lb;gb.Popover=Ac;(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof va.ContextSensitiveWidget?va.ContextSensitiveWidget:va.ContextSensitiveWidget=function(I){I&&
I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:gb.Color.transparent},isSelected:{defaultValue:"false",set:function(I){this.setProperty("isSelected",I);this.fontColor=I?gb.Color.white:gb.Color.black}},layout:{initialize:function(){this.layout=new gb.HorizontalLayout}},
context:{serialize:!1}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(gb.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("ShortcutWidget")&&"function"===typeof va.ShortcutWidget?va.ShortcutWidget:
va.ShortcutWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){I.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],
set:function(I){this.setProperty("title",I);this.getSubmorphNamed("valueString").value=I}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(I){this.submorphs.forEach(function(pa){return pa.fontColor=I})}},submorphs:{initialize:function(){this.submorphs=[gb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:gb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:gb.rect(0,
0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(gb.ContextSensitiveWidget);ab=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("LayoutWidget")&&
"function"===typeof va.LayoutWidget?va.LayoutWidget:va.LayoutWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa=new gb.popovers.LayoutPopover({hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition}),
container:I.context}),Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),2);gb.connect(pa,"layoutChanged",I,"layoutChanged");gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(gb.ShortcutWidget);gb.LayoutWidget=ab;gb.LayoutWidget=ab;gb.LayoutWidget=ab;ab=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("ColorWidget")&&"function"===typeof va.ColorWidget?va.ColorWidget:va.ColorWidget=function(I){I&&
I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"relayout",value:function(I){I?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var I=this.color;if(2*I.stops.length==this.submorphs.length-3){var pa;for(pa in this.color.stops){var Oa=
I.stops[pa];var ub=Oa.color,Wb=Oa.offset,Jb=$jscomp.makeIterator(this.submorphs[2+2*pa].submorphs).next().value;Oa=this.submorphs[3+2*pa];Jb.fill=ub;Oa.value=(100*Wb).toFixed()+"%"+(pa<I.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},
{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=gb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:gb.pt(15,15),fill:gb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:gb.pt(5,7.5),fill:gb.Color.white,borderColor:gb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[gb.pt(0,0),gb.pt(10,10)],borderColor:gb.Color.red}]}]},
{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:gb.pt(15,15),fill:gb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:gb.pt(5,7.5),fill:this.color,borderColor:gb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:gb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var I=
this.color,pa=[{type:"label",padding:gb.rect(0,0,5,0),value:"linearGradient"==I.type?gb.num.toDegrees(I.vectorAsAngle()).toFixed()+"\u00b0,":""}],Oa;for(Oa in I.stops){var ub=I.stops[Oa],Wb=ub.color;ub=ub.offset;pa.push({extent:gb.pt(this.fontSize,this.fontSize),fill:gb.Color.transparent,layout:new gb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Wb}]});pa.push({type:"label",padding:gb.rect(0,0,5,0),value:(100*ub).toFixed()+"%"+(Oa<I.stops.length-1?",":"")})}return pa}},
{key:"onMouseDown",value:function(I){this.openFillEditor()}},{key:"update",value:function(I){this.color=I}},{key:"openFillEditor",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa=new gb.popovers.FillPopover({hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition}),handleMorph:I.context,fillValue:I.color,title:"Fill Control",gradientEnabled:I.gradientEnabled}),Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),
2);gb.connect(pa,"fillValue",I,"update");gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new gb.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:gb.Color.white},nonSelectionFontColor:{defaultValue:gb.Color.black},color:{defaultValue:gb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],
set:function(I){this.getProperty("isSelected")!=I&&(this.getSubmorphNamed("valueString").fontColor=I?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",I))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){gb.connect(this,"color",this,"relayout",{converter:function(I,pa){return(pa&&pa.isColor)!=(I&&I.isColor)}});this.relayout(!0)}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4687,end:10140})}(gb.ContextSensitiveWidget);gb.ColorWidget=ab;gb.ColorWidget=ab;gb.ColorWidget=ab;ab=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("BooleanWidget")&&"function"===typeof va.BooleanWidget?va.BooleanWidget:va.BooleanWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:gb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(I){this.setProperty("boolean",I);this.value=gb.obj.safeToString(I);this.fontColor=this.boolean?gb.Color.green:gb.Color.red}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(gb.Label);gb.BooleanWidget=ab;gb.BooleanWidget=ab;gb.BooleanWidget=ab;ab=ya("N",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("NumberWidget")&&"function"===typeof va.NumberWidget?va.NumberWidget:va.NumberWidget=
function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),"onMouseDown",this).call(this,I);"up"==I.targetMorph.name&&this.increment();"down"==I.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return gb.obj.dissoc(Tb._get(Object.getPrototypeOf(qb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(I,
pa){pa=void 0===pa?!0:pa;this.setProperty("number",pa?I/this.scaleFactor:I);gb.signal(this,"number",this.number);this.relayout(pa)}},{key:"relayoutButtons",value:function(){var I=this.getSubmorphNamed("up"),pa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");I.height=pa.height=(this.height-2)/2;I.width=pa.width=20}},{key:"onChange",value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),"onChange",this).call(this,I);"extent"!=I.prop||this.autofit||this.relayout()}},{key:"relayout",
value:function(I){var pa=this.getSubmorphNamed("value");pa&&(this.autofit?(I||(pa.value=this.number*this.scaleFactor),pa.fit(),this.height=pa.height,this.width=pa.width+20):I||(pa.width=this.width-20),this.relayoutButtons(),I||(pa.value=gb.num.roundTo(this.number*this.scaleFactor,1),pa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,pa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,pa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||
this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(I){this.setProperty("autofit",I);this.getSubmorphNamed("value").scaleToBounds=!I}},
number:{defaultValue:0,after:["unit","autofit"],set:function(I){this.setProperty("number",I);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(I){this.setProperty("floatingPoint",I);this.get("value").floatingPoint=I},get:function(){var I=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&I&&!!I[1]}},padding:{isStyleProp:!0,defaultValue:gb.rect(5,3,0,0),after:["submorphs"],
set:function(I){this.setProperty("padding",I);this.getSubmorphNamed("value").padding=I}},extent:{defaultValue:gb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(I){this.get("value").baseFactor=I}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,
defaultValue:gb.Color.rgbHex("#0086b3"),set:function(I){this.setProperty("fontColor",I)}},isSelected:{set:function(I){this.getProperty("isSelected")!=I&&(I?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",I))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(I){this.setProperty("fontFamily",I)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(I){this.setProperty("fontSize",
I)}},layout:{initialize:function(){this.layout=new gb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var I=this;this.submorphs=[new gb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),gb.Icon.makeLabel("sort-up",{name:"up"}),gb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];gb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return I.relayout()})}}}}}],
va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(gb.Morph));gb.NumberWidget=ab;gb.NumberWidget=ab;gb.NumberWidget=ab;Ac=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("ShadowWidget")&&"function"===typeof va.ShadowWidget?
va.ShadowWidget:va.ShadowWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.openPopover()}},{key:"openPopover",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa=new gb.popovers.ShadowPopover({hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition}),shadowValue:I.shadowValue}),
Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),2);gb.connect(pa,"shadowValue",I,"shadowValue");gb.connect(I,"shadowValue",I,"update");gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},
{key:"updateShadowDisplay",value:function(){var I=this.shadowValue,pa=I.blur,Oa=I.spread,ub=I.distance;I=I.color;var Wb=$jscomp.makeIterator(this.submorphs),Jb=Wb.next().value,yc=Wb.next().value;yc=$jscomp.makeIterator(yc.submorphs).next().value;Wb=Wb.next().value;Jb.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";yc.fill=I;Wb.value=", "+pa+"px, "+ub+"px, "+Oa+"px)"}},{key:"initShadowDisplay",value:function(){var I=this.shadowValue,pa=I.blur,Oa=I.spread,ub=I.distance;I=I.color;this.submorphs=
[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},gb.morph({fill:gb.Color.transparent,extent:gb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:gb.pt(this.fontSize,this.fontSize),position:gb.pt(2,2),fill:I,borderColor:gb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+pa+"px, "+ub+"px, "+Oa+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},
{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(I){this.setProperty("shadowValue",I);this.renderShadowDisplay()}},fill:{defaultValue:gb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(I){this.submorphs.forEach(function(pa){return pa.fontColor=I})}},isSelected:{defaultValue:!1,set:function(I){this.setProperty("isSelected",I);this.fontColor=I?gb.Color.white:gb.Color.black}},
layout:{initialize:function(){this.layout=new gb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(gb.Morph);gb.ShadowWidget=Ac;gb.ShadowWidget=Ac;gb.ShadowWidget=Ac;Ac=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
qb=va.hasOwnProperty("PointWidget")&&"function"===typeof va.PointWidget?va.PointWidget:va.PointWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.openPopover()}},{key:"openPopover",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa=new gb.popovers.PointPopover({pointValue:I.pointValue,
hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition})}),Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),2);gb.connect(pa,"pointValue",I,"pointValue");gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(I){this.setProperty("isSelected",I);this.fontColor=I?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,
defaultValue:gb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:gb.Color.black},fontFamily:{defaultValue:gb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(I){var pa=gb.Color.rgbHex("#0086b3");this.setProperty("pointValue",I);this.textAndAttributes=["pt(",null,I.x.toFixed(),{fontColor:pa},",",{},I.y.toFixed(),{fontColor:pa},")",null];this.fixedHeight=this.fixedWidth=
!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(gb.Label);gb.PointWidget=Ac;gb.PointWidget=Ac;gb.PointWidget=Ac;Ac=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
qb=va.hasOwnProperty("PaddingWidget")&&"function"===typeof va.PaddingWidget?va.PaddingWidget:va.PaddingWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.openPopover()}},{key:"openPopover",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return pa=new gb.popovers.RectanglePopover({hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition}),
rectangle:I.rectangle}),pa.relayout(),Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),2);gb.connect(pa,"rectangle",I,"rectangle");gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:gb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(I){this.setProperty("isSelected",
I);this.fontColor=I?gb.Color.white:gb.Color.black}},rectangle:{defaultValue:gb.rect(0),set:function(I){this.setProperty("rectangle",I);this.value=gb.obj.safeToString(I)}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(gb.Label);gb.PaddingWidget=Ac;gb.PaddingWidget=
Ac;gb.PaddingWidget=Ac;Ac=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("IconWidget")&&"function"===typeof va.IconWidget?va.IconWidget:va.IconWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"onMouseDown",value:function(I){this.openPopover()}},{key:"openPopover",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==
Oa.nextAddress)return pa=new gb.popovers.IconPopover({hasFixedPosition:!!I.ownerChain().find(function(ub){return ub.hasFixedPosition})}),Oa.yield(pa.fadeIntoWorld(I.globalBounds().center()),2);gb.connect(pa,"select",I,"iconValue",{converter:function(ub){return ub&&gb.Icon.makeLabel(ub).value},varMapping:{Icon:gb.Icon}});gb.signal(I,"openWidget",pa);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:gb.Color.gray.darker()},
fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(I){this.value=I||"No Icon"}}}}}],va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(gb.Label);gb.IconWidget=Ac;gb.IconWidget=
Ac;gb.IconWidget=Ac;Ac=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),qb=va.hasOwnProperty("StringWidget")&&"function"===typeof va.StringWidget?va.StringWidget:va.StringWidget=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"truncate",value:function(I){return 200<I.length?I.slice(0,20)+"...":I}},{key:"onFocus",value:function(I){var pa=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==
ub.nextAddress)return Tb._get(Object.getPrototypeOf(qb.prototype),"onFocus",pa).call(pa,I),pa.readOnly?ub.return():pa.stringTooLong?ub.yield(pa.world().editPrompt("edit string",{requester:pa,input:pa.stringValue}),2):(pa.borderColor=gb.Color.white.withA(.9),pa.textString=pa.stringValue,ub.return());Oa=ub.yieldResult;if("string"===typeof Oa)pa.onInput(Oa);ub.jumpToEnd()})}},{key:"onBlur",value:function(I){Tb._get(Object.getPrototypeOf(qb.prototype),"onBlur",this).call(this,I);this.readOnly||(this.borderColor=
gb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(I){this.owner.focus();gb.signal(this,"inputAccepted",I);this.stringValue=I}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:gb.Color.transparent},fontColor:{defaultValue:gb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:gb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},
borderWidth:{defaultValue:1},padding:{defaultValue:gb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(I){this.setProperty("stringValue",I);this.textString=this.truncate(I);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(I){this.setProperty("isSelected",I);this.fontColor=I?gb.Color.white:gb.Color.blue}}}}}],
va,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(gb.InputLine);gb.StringWidget=Ac;gb.StringWidget=Ac;gb.StringWidget=Ac;gb.valueWidgets=xb;Object.assign(gb.valueWidgets,{NumberWidget:gb.NumberWidget,StringWidget:gb.StringWidget,IconWidget:gb.IconWidget,PaddingWidget:gb.PaddingWidget,
ShadowWidget:gb.ShadowWidget,PointWidget:gb.PointWidget,BooleanWidget:gb.BooleanWidget,LayoutWidget:gb.LayoutWidget,ColorWidget:gb.ColorWidget});var Va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Va.Ellipse=tb;Va.Icon=ne;Va.Morph=ve;Va.Path=Bd;Va.Text=rc;Va.HorizontalLayout=ic;Va.VerticalLayout=Ka;Va.morph=Ob;Va.Color=ac;Va.pt=Ab;Va.rect=Ic;Va.Rectangle=Dc;Va.arr=jb;Va.connect=Ub;Va.disconnect=od;Va.LabeledCheckBox=nb;Va.DropDownSelector=Y;Va.Button=Ba;Va.Menu=P;Va.NumberWidget=ab;
Va.InteractiveMorphSelector=Ec;Va.easings=Qc;(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("AxisHalo")&&"function"===typeof va.AxisHalo?va.AxisHalo:va.AxisHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(I){var pa=I.halo;I=I.targetAxis;Tb._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{fill:Va.Color.transparent,halo:pa,targetAxis:I,container:pa.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(I){this._forceMenuHidden=I;this.axisMenu.visible=!I}},
{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&
!0}},{key:"onHoverOut",value:function(I){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var I=this,pa=this,Oa=this.proportionViewer();return this.halo.addGuide(new Va.Morph({nativeCursor:this.getResizeCursor(),fill:Va.Color.transparent,submorphs:[this.devider(),Oa],alignWithTarget:function(){this.setBounds(pa.getProportionSliderBounds(this))},onDragStart:function(){Oa.visible=!0},onDrag:function(ub){I.adjustStretch(I.getDelta(ub));
I.halo.alignWithTarget()},onDragEnd:function(){Oa.visible=!1}}))}},{key:"devider",value:function(){return new Va.Morph({visible:!this.lastAxis,fill:Va.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var I=this,pa=this,Oa=this.minSpaceVisualizer(),ub=this.minViewer();return this.halo.addGuide(new Va.Ellipse({nativeCursor:this.getResizeCursor(),fill:Va.Color.green,extent:Va.pt(10,10),visible:!1,submorphs:[Oa,ub],becomesActiveOnHover:!0,
alignWithTarget:function(){this.position=pa.getMinSliderPosition()},requestToShow:function(){this.visible=!pa.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){pa.forceMenuHidden=!0;ub.visible=!0;this.active=Oa.visible=!0},onDrag:function(Wb){I.targetAxis.min+=-I.getDelta(Wb);I.halo.alignWithTarget()},onDragEnd:function(){pa.forceMenuHidden=!1;ub.visible=!1;this.active=Oa.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},
{key:"minViewer",value:function(){var I=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+I.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Va.Path(Object.assign({position:Va.pt(-1,-1),borderStyle:"dashed",borderColor:Va.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var I=this,pa=this.minSpaceBorder();return this.halo.addGuide(new Va.Morph({fill:Va.Color.green.withA(.1),
visible:!1,isHaloItem:!0,submorphs:[pa],alignWithTarget:function(){this.extent=I.getMinSpaceExtent();this.topLeft=Va.pt(5,5)}}))}},{key:"axisMenu",value:function(){var I=this.lockButton(),pa=this.menuButton(),Oa=this;return new Va.Morph({layout:this.getMenuLayout(),submorphs:[I,pa],fill:Va.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Oa.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var I=this;return this.halo.addGuide(new Va.Morph({fill:Va.Color.transparent,
extent:Va.pt(25,25),submorphs:[{center:Va.pt(12.5,12.5),fill:Va.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){I.targetAxis.fixed?(this.fontColor=Va.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Va.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){I.targetAxis.fixed=!I.targetAxis.fixed;I.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var I=this,
pa=this;return new Va.Morph({fill:Va.Color.transparent,extent:Va.pt(25,25),submorphs:[{fill:Va.Color.transparent,styleClasses:["fa","fa-cog"],center:Va.pt(12.5,12.5)}],onMouseDown:function(Oa){pa.forceMenuVisible=!0;this.addMorph(Oa.state.menu=new Va.Menu({position:Va.pt(15,15),items:[["Remove "+pa.subject,function(){I.targetAxis.remove();I.halo.initGuides();I.halo.alignWithTarget()}],["Insert "+pa.subject+" before",function(){I.targetAxis.addBefore();I.halo.initGuides();I.halo.alignWithTarget()}],
["Insert "+pa.subject+" after",function(){I.targetAxis.addAfter();I.halo.initGuides();I.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(I){var pa=I.position;I=I.alignWithTarget;return this.halo.addGuide(new Va.Text({styleClasses:["Halo"],padding:Va.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Va.Color.white,fill:Va.Color.black.withA(.5),position:pa,alignWithTarget:I,readOnly:!0}))}},{key:"proportionViewer",value:function(){var I=this;return this.viewer({position:this.getProportionViewerPosition(),
alignWithTarget:function(){this.textString=I.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(Va.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
qb=va.hasOwnProperty("RowHalo")&&"function"===typeof va.RowHalo?va.RowHalo:va.RowHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(I){var pa=I.row;I=I.halo;Tb._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:I.target.row(pa),halo:I})}},{key:"subject",get:function(){return"row"}},
{key:"adjustStretch",value:function(I){this.targetAxis.height+=I}},{key:"getDelta",value:function(I){return I.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Va.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Va.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(I){return this.targetAxis.length>I.height?Va.pt(2,5):Va.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Va.VerticalLayout}},
{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Va.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Va.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Va.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Va.pt(this.container.width+50,2),vertices:[Va.pt(0,1),Va.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Va.pt(40,
20)}},{key:"getProportionSliderBounds",value:function(I){return Va.pt(0,I.owner.height-5).extent(Va.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Va.pt(15,4).extent(Va.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:7981,end:9208})})(Va.AxisHalo);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("ColumnHalo")&&"function"===typeof va.ColumnHalo?va.ColumnHalo:va.ColumnHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:Symbol.for("lively-instance-initialize"),value:function(I){var pa=I.col;I=I.halo;Tb._get(Object.getPrototypeOf(qb.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:I.target.col(pa),halo:I})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(I){this.targetAxis.width+=I}},{key:"getDelta",value:function(I){return I.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Va.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Va.pt(this.targetAxis.length-
10,40)}},{key:"getMenuOffset",value:function(I){return this.targetAxis.length>I.width?Va.pt(5,3):Va.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Va.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Va.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Va.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Va.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",
value:function(){return{extent:Va.pt(2,this.container.height+50),vertices:[Va.pt(1,0),Va.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Va.pt(20,40)}},{key:"getProportionSliderBounds",value:function(I){return Va.pt(I.owner.width-5,0).extent(Va.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Va.pt(4,15).extent(Va.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],va,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Va.AxisHalo);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("CellGuide")&&"function"===typeof va.CellGuide?va.CellGuide:va.CellGuide=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(qb,ia,[{key:"menuItems",value:function(){var I=this,pa=Va.Icon.textAttribute("check-square-o"),Oa=Va.Icon.textAttribute("square-o");pa[1].textStyleClasses.push("annotation");Oa[1].textStyleClasses.push("annotation");Oa[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Oa:pa)),function(){I.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?pa:Oa)),function(){I.cellGroup.resize=
!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Va.Rectangle).sides),$jscomp.arrayFromIterable((new Va.Rectangle).corners)).map(function(ub){return[[ub,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(I.cellGroup.align==ub?pa:Oa),["  ",null]),function(){return I.cellGroup.align=ub}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var ub=I.cellGroup.morph;ub&&(I.world().firstHand.grab(ub),I.world().firstHand.longClickGrab=!0,ub.position=Va.pt(0))}]]:
[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Va.Morph);(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
qb=va.hasOwnProperty("LayoutHalo")&&"function"===typeof va.LayoutHalo?va.LayoutHalo:va.LayoutHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Va.Color.orange},
borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(Va.Morph);xb=ya("G",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("GridLayoutHalo")&&"function"===
typeof va.GridLayoutHalo?va.GridLayoutHalo:va.GridLayoutHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"previewDrop",value:function(I){1>I.length||(I=this.cellGuides.find(function(pa){return pa.fullContainsWorldPoint($world.firstHand.position)}),I!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=I)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(I){var pa=
this;this.currentCell&&I.whenRendered().then(function(){return pa.currentCell.cellGroup.morph=I})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var I=this.target,pa=new Va.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Va.Color.transparent,checked:I.compensateOrigin}),Oa=new Va.LabeledCheckBox({label:"Resize Submorphs",fill:Va.Color.transparent,name:"fitToCell",checked:I.fitToCell});Va.connect(pa,
"checked",I,"compensateOrigin");Va.connect(Oa,"checked",I,"fitToCell");Va.connect(pa,"checked",this,"alignWithTarget");return[pa,Oa]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Va.arr.reverse(this.guides).forEach(function(I){return I.alignWithTarget()})}},{key:"addMissingGuides",
value:function(){var I=this;Va.arr.withoutAll(this.target.cellGroups,this.guides.map(function(pa){return pa.cellGroup})).forEach(function(pa){return I.addMorph(I.cellGuide(pa))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var I=this,pa=this.addMorph({fill:Va.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Oa){pa.addMorph(I.cellGuide(Oa))});
this.cellGuides=pa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(I){I.isHaloItem=!0;this.guides.push(I);return I}},{key:"initRowGuides",value:function(){var I=this,pa=this;this.addGuide(this.addMorph(new Va.Morph({width:25,fill:Va.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Va.pt(-5,0),alignWithTarget:function(){this.height=pa.container.height}})));Va.arr.range(0,this.target.rowCount-1).forEach(function(Oa){I.addMorph(new Va.RowHalo({row:Oa,
halo:I}))})}},{key:"initColumnGuides",value:function(){var I=this,pa=this;this.addGuide(this.addMorph(new Va.Morph({height:25,fill:Va.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:Va.pt(0,-5),alignWithTarget:function(){this.width=pa.container.width}})));Va.arr.range(0,this.target.columnCount-1).forEach(function(Oa){I.addMorph(new Va.ColumnHalo({col:Oa,halo:I}))})}},{key:"resizer",value:function(){var I=this;return this.addGuide(new Va.Morph({fill:Va.Color.transparent,
extent:Va.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(pa){I.container.resizeBy(pa.state.dragDelta);I.alignWithTarget()},alignWithTarget:function(){this.bottomRight=I.extent}}))}},{key:"cellResizer",value:function(I,pa){var Oa=this,ub="topLeft"==pa?"bottomRight":"topLeft";return new Va.Ellipse({borderWidth:1,visible:!1,borderColor:Va.Color.black,nativeCursor:"nwse-resize",removeCell:function(Wb){I.disconnect(Wb);Oa.alignWithTarget()},addCell:function(Wb){I.connect(Wb);Oa.alignWithTarget()},
start:function(){this.fixpointCell=I[ub];this.draggedDelta=I.bounds().partNamed(pa);this.debugMorph=Oa.addMorph(new Va.Morph({fill:Va.Color.orange.withA(.5)}))},update:function(Wb){var Jb=this;this.draggedDelta=this.draggedDelta.addPt(Wb);var yc=Va.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(yc);Oa.cells.forEach(function(Jc){var Hd=yc.intersection(Jc.bounds()).area()/Jc.bounds().area();I.includes(Jc)&&.1>Hd&&Jb.removeCell(Jc);!I.includes(Jc)&&
Hd>1/3&&Jb.addCell(Jc)})},onDragEnd:function(Wb){this.debugMorph.remove()},onDragStart:function(Wb){this.start(Wb.position)},onDrag:function(Wb){this.update(Wb.state.dragDelta)}})}},{key:"cellGuide",value:function(I){var pa=this,Oa=this.cellResizer(I,"topLeft"),ub=this.cellResizer(I,"bottomRight");return this.addGuide(new Va.CellGuide({cellGroup:I,bounds:I.bounds(),fill:Va.Color.transparent,borderColor:Va.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Oa,ub],onMouseDown:function(Wb){this.becomeActive()},
deactivate:function(){this.borderColor=Va.Color.orange;this.fill=Va.Color.transparent;this.submorphs.forEach(function(Wb){Wb.visible=!1})},becomeActive:function(){pa.guides.forEach(function(Wb){Wb.isCell&&Wb.deactivate()});this.borderColor=Va.Color.rgbHex("#1565C0");this.fill=Va.Color.rgbHex("#1565C0").withA(.3);pa.addMorph(this.remove());this.submorphs.forEach(function(Wb){Wb.visible=!0})},startPreview:function(Wb){this.fill=Va.Color.orange.withA(.7)},stopPreview:function(Wb){this.fill=Va.Color.transparent},
onDrop:function(Wb){var Jb=$jscomp.makeIterator(Wb.hand.grabbedMorphs).next().value;Wb.hand.dropMorphsOn(pa.container);I.morph=Jb},alignWithTarget:function(){I.bounds().isNonEmpty()?(this.setBounds(I.bounds()),Oa.center=this.innerBounds().topLeft(),ub.center=this.innerBounds().bottomRight()):(Va.arr.remove(pa.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Va.Color.transparent},
cells:{derived:!0,get:function(){return Va.arr.flatten(this.target.col(0).items.map(function(I){return I.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Va.LayoutHalo));Va.GridLayoutHalo=xb;Va.GridLayoutHalo=
xb;Va.GridLayoutHalo=xb;ab=function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof va.TilingLayoutHalo?va.TilingLayoutHalo:va.TilingLayoutHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"remove",value:function(){Tb._get(Object.getPrototypeOf(qb.prototype),"remove",this).call(this);this.removePreviews();return this}},
{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(I){}},{key:"removePreviews",value:function(){this.previews.forEach(function(I){return I.clear()})}},{key:"previewDrop",value:function(I){var pa=this;0<this.previews.length||(this.previews=I.map(function(Oa){return pa.container.addMorph({type:Va.DropPreview,bounds:Oa.bounds()})}),this.previews.forEach(function(Oa){Oa.step()}))}},{key:"updateSpacing",value:function(I){this.target.spacing=
I}},{key:"updateAxis",value:function(I){this.target.axis=I}},{key:"updateAlign",value:function(I){this.target.align=I}},{key:"optionControls",value:function(){var I=this.target,pa=new Va.DropDownSelector({borderRadius:2,padding:3,selectedValue:I.axis,values:["row","column"]}),Oa=new Va.DropDownSelector({borderRadius:2,padding:3,selectedValue:I.align,values:["left","center"]});I=new Va.NumberWidget({min:0,number:I.spacing,padding:Va.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Va.Color.gray,
unit:"px"});Va.connect(I,"update",this,"updateSpacing");Va.connect(Oa,"update",this,"updateAlign");Va.connect(pa,"update",this,"updateAxis");var ub={type:"label",padding:Va.rect(0,5,5,5),fill:Va.Color.transparent,fontColor:Va.Color.gray.darker(),readOnly:!0};return[[Object.assign({},ub,{textString:"Submorph Spacing"}),I],[Object.assign({},ub,{textString:"Tiling Align"}),Oa],[Object.assign({},ub,{textString:"Tiling Axis"}),pa]].map(function(Wb){return{submorphs:Wb,fill:null,layout:new Va.HorizontalLayout({spacing:3})}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Va.Color.transparent},previews:{defaultValue:[]}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Va.LayoutHalo);Va.TilingLayoutHalo=
ab;Va.TilingLayoutHalo=ab;Va.TilingLayoutHalo=ab;(function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("DropPreview")&&"function"===typeof va.DropPreview?va.DropPreview:va.DropPreview=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var I=this,pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==
Oa.nextAddress)return pa=Va.easings.inOutQuad,Oa.yield(I.animate({opacity:.5,duration:(I.pulseDuration-10)/2,easing:pa}),2);if(3!=Oa.nextAddress)return Oa.yield(I.animate({opacity:1,duration:(I.pulseDuration-10)/2,easing:pa}),3);I.stopped||I.step();Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Va.Color.orange.withA(.3)},
hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Va.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Va.Morph);ab=ya("F",function(ia){var va=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof va.FlexLayoutHalo?va.FlexLayoutHalo:va.FlexLayoutHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"handleDrop",value:function(I){}},{key:"previewDrop",value:function(I){var pa=this;0<this.previews.length||(this.previews=I.map(function(Oa){return pa.container.addMorph({type:Va.DropPreview,
position:pa.container.localize(pa.world().firstHand.position),extent:Oa.bounds().extent()})}),this.previews.forEach(function(Oa){Oa.step()}))}},{key:"remove",value:function(){Tb._get(Object.getPrototypeOf(qb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(I){return I.clear()})}},{key:"onDrop",value:function(I){this.removePreviews();I.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},
{key:"updateAutoResizePolicy",value:function(I){I&&(this.originalExtent=this.container.extent);this.target.autoResize=I;I||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(I){this.target.resizeSubmorphs=I;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(I){this.target.align=I}},{key:"updateDirectionPolicy",value:function(I){this.target.direction=I}},{key:"updateSpacing",value:function(I){this.target.spacing=
I}},{key:"optionControls",value:function(){var I=this.target,pa=I.possibleAlignValues?{fill:Va.Color.transparent,layout:new Va.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Va.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:I.align,values:I.possibleAlignValues})]}:null,Oa=I.possibleDirectionValues?{fill:Va.Color.transparent,layout:new Va.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",
value:"direction: "},new Va.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:I.direction,values:I.possibleDirectionValues})]}:null,ub=new Va.NumberWidget({fill:Va.Color.white,borderWidth:1,borderRadius:4,padding:Va.rect(5,4,0,0),borderColor:Va.Color.gray,min:0,number:I.spacing,unit:"px"}),Wb=new Va.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Va.Color.transparent,checked:I.autoResize});I=new Va.LabeledCheckBox({label:"Resize Submorphs",
name:"resizeSubmorphs",alignCheckBox:"right",fill:Va.Color.transparent,checked:I.resizeSubmorphs});Va.connect(ub,"update",this,"updateSpacing");Va.connect(Wb,"checked",this,"updateAutoResizePolicy");Va.connect(I,"checked",this,"updateResizeSubmorphsPolicy");pa&&Va.connect(pa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Oa&&Va.connect(Oa.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Wb,I].concat($jscomp.arrayFromIterable([pa,Oa].filter(Boolean)),[{fill:Va.Color.transparent,
layout:new Va.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Va.Color.gray.darker(),padding:Va.rect(0,5,5,5)},ub]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Va.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(Va.LayoutHalo));Va.FlexLayoutHalo=ab;Va.FlexLayoutHalo=ab;Va.FlexLayoutHalo=ab;Ac=ya("c",function(ia){var va=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),qb=va.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof va.ProportionalLayoutHalo?va.ProportionalLayoutHalo:va.ProportionalLayoutHalo=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(qb,ia,[{key:"handleDrop",value:function(I){}},{key:"onDrop",value:function(I){I.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(I){var pa={};this.target.changeSettingsFor(I.submorph,(pa[I.axis]=I.policy,pa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(I,pa){var Oa=this;I.stop();
var ub=this.target.settingsFor(pa);pa="";for(var Wb in ub)pa+=Wb+":"+ub[Wb]+" ";var Jb=Va.morph({type:"label",value:pa,isLayoutable:!1});Jb.wantsToBeDroppedOn=function(yc){return Oa.target.layoutableSubmorphs.includes(yc)};Jb.onBeingDroppedOn=function(yc,Jc){Jb.remove();if(yc=Oa.target.layoutableSubmorphs.includes(Jc)?Jc:I.world.morphsContainingPoint(I.hand.position).find(function(Hd){return Oa.target.layoutableSubmorphs.includes(Hd)}))Oa.updateSubmorphProportionalLayoutSettings({policy:ub.x,axis:"x",
submorph:yc}),Oa.updateSubmorphProportionalLayoutSettings({policy:ub.y,axis:"y",submorph:yc}),yc.show(),$world.setStatusMessage("layout settings applied")};I.hand.grab(Jb)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var I=this,pa,Oa,ub,Wb,Jb,yc,Jc,Hd,Ge,Dd,ae,ie;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:return pa=I.target.layoutableSubmorphs,I.env.eventDispatcher.isKeyPressed("Shift")?(ub=pa.map(function(Tc){return{isListItem:!0,
string:String(Tc),value:Tc}}),Fe.yield($world.listPrompt("Select morph",ub,{requester:I,onSelection:function(Tc){return Tc.show()}}),5)):Fe.yield(Va.InteractiveMorphSelector.selectMorph(I.world(),I,function(Tc){return pa.includes(Tc)}),4);case 4:Oa=Fe.yieldResult;Fe.jumpTo(3);break;case 5:Wb=Fe.yieldResult,Jb=$jscomp.makeIterator(Wb.selected),Oa=Jb.next().value;case 3:if(!Oa)return Fe.return();yc=I.state.popover.get("controlContainer");Jc=yc.getAllNamed(/submorph config/);Hd=["move","resize","scale",
"fixed"];Ge=I.target.settingsFor(Oa);Jc.length||(yc.submorphs=[].concat($jscomp.arrayFromIterable(yc.submorphs),[{name:"submorph config X-Axis policy",position:Va.pt(0,I.height),fill:Va.Color.transparent,layout:new Va.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Va.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Ge.x,values:Hd})]},{name:"submorph config Y-Axis policy",position:Va.pt(0,
I.height),fill:Va.Color.transparent,layout:new Va.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Va.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Ge.y,values:Hd})]},Va.morph({position:Va.pt(0,I.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Dd=yc.getSubmorphNamed("x-axis policy selector");ae=yc.getSubmorphNamed("y-axis policy selector");ie=yc.getSubmorphNamed("dragme");
Va.disconnect(Dd,"selectedValue",I,"updateSubmorphProportionalLayoutSettings");Va.disconnect(ae,"selectedValue",I,"updateSubmorphProportionalLayoutSettings");Dd.selectedValue=Ge.x;ae.selectedValue=Ge.y;Va.connect(ie,"onDragStart",I,"onSubmorphSettingsDragStart",{updater:function(Tc,ee){return Tc(ee,Oa)},varMapping:{submorph:Oa}});Va.connect(Dd,"selectedValue",I,"updateSubmorphProportionalLayoutSettings",{converter:function(Tc){return{policy:Tc,axis:"x",submorph:Oa}},varMapping:{submorph:Oa}});Va.connect(ae,
"selectedValue",I,"updateSubmorphProportionalLayoutSettings",{converter:function(Tc){return{policy:Tc,axis:"y",submorph:Oa}},varMapping:{submorph:Oa}});Fe.jumpToEnd()}})}},{key:"optionControls",value:function(I){this.state.popover=I;var pa=this.target;I=new Va.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Va.Color.transparent,checked:pa.xAxisEnabled});pa=new Va.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Va.Color.transparent,checked:pa.yAxisEnabled});
var Oa=new Va.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Va.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Va.connect(I,"checked",this,"updateXAxisEnabled");Va.connect(pa,"checked",this,"updateYAxisEnabled");Va.connect(Oa,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Oa]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:Va.Color.transparent}}}}],va,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Va.LayoutHalo));Va.ProportionalLayoutHalo=Ac;Va.ProportionalLayoutHalo=Ac;Va.ProportionalLayoutHalo=Ac;var tc=lively.FreezerRuntime.recorderFor("lively.halos/index.js");tc.Halo=
Bc;tc.MorphHighlighter=mb;tc.InteractiveMorphSelector=Ec;tc.StatusMessage=vd;tc.StatusMessageForMorph=bd;tc.show=cc;tc.showConnector=Uc;tc.ProportionalLayoutHalo=Ac;tc.GridLayoutHalo=xb;tc.FlexLayoutHalo=ab;tc.showAndSnapToGuides=Sa;tc.removeSnapToGuidesOf=na;tc.StatusMessage=vd;tc.StatusMessage=vd;tc.StatusMessageForMorph=bd;tc.StatusMessageForMorph=bd;tc.show=cc;tc.show=cc;tc.showConnector=Uc;tc.showConnector=Uc;tc.Halo=Bc;tc.Halo=Bc;tc.MorphHighlighter=mb;tc.MorphHighlighter=mb;tc.InteractiveMorphSelector=
Ec;tc.InteractiveMorphSelector=Ec;tc.ProportionalLayoutHalo=Ac;tc.ProportionalLayoutHalo=Ac;tc.GridLayoutHalo=xb;tc.GridLayoutHalo=xb;tc.FlexLayoutHalo=ab;tc.FlexLayoutHalo=ab;tc.showAndSnapToGuides=Sa;tc.showAndSnapToGuides=Sa;tc.removeSnapToGuidesOf=na;tc.removeSnapToGuidesOf=na;vd=Object.freeze({__proto__:null,StatusMessage:vd,StatusMessageForMorph:bd,show:cc,showConnector:Uc,Halo:Bc,MorphHighlighter:mb,InteractiveMorphSelector:Ec,ProportionalLayoutHalo:Ac,GridLayoutHalo:xb,FlexLayoutHalo:ab,showAndSnapToGuides:Sa,
removeSnapToGuidesOf:na,SvgStyleHalo:void 0});ya("i",vd);ya("_",void 0)}}});