System.register("./__rootModule___commonjs-entry-71573ff5.js ./loading-indicator.cp-b18e3b89.js ./index-d18accbd.js ./index-1c08552a.js ./index-c79abca0.js ./value-widgets-6cb12552.js ./tooltips.cp-6a2406c0.js ./index-ca98f65e.js ./list.cp-8569fe93.js ./popups.cp-68dc8a4a.js".split(" "),function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da,zb,db,ib,Ea,W,T,ia,ka,K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa;return{setters:[function(Ma){pd=
Ma.B;Nd=Ma.n;Tc=Ma.j;Jc=Ma.k;$d=Ma.w;Bb=Ma.h;rd=Ma.aI;Id=Ma.D;Ac=Ma.i;Pc=Ma.G;gd=Ma.z;nd=Ma._;Fd=Ma.C;ic=Ma.a0;vd=Ma.Y;sb=Ma.A;Xb=Ma.aJ;Nb=Ma.y;bc=Ma.d;hb=Ma.l;cb=Ma.b;Hb=Ma.r;ec=Ma.H;ub=Ma.L;yb=Ma.O;ba=Ma.M;wb=Ma.q;Xa=Ma.I;Za=Ma.V;Sb=Ma.p;Cb=Ma.X;Da=Ma.v;zb=Ma.x;db=Ma.aG;ib=Ma.m;Ea=Ma.c},function(Ma){W=Ma.L;T=Ma.b;ia=Ma.D;ka=Ma.S},function(Ma){K=Ma.T;ya=Ma.b;pb=Ma.D;La=Ma.c;eb=Ma.S;jb=Ma.d},function(Ma){E=Ma.localInterface},function(Ma){Wb=Ma.I;R=Ma.M},function(Ma){xb=Ma.v},function(Ma){Ja=Ma.SystemTooltip},
function(Ma){Ga=Ma.a},function(Ma){sa=Ma.D},function(Ma){Ub=Ma.C;vc=Ma.S;Oc=Ma.P;aa=Ma.a}],execute:function(){function Ma(Dd){if(!Dd)return String(Dd);if(Array.isArray(Dd))return"[".concat(Dd.map(Ma).join(","),"]");if("symbol"===Id(Dd))return ab.printSymbol(Dd);try{return String(Dd)}catch(ld){return"Cannot print object: ".concat(ld)}}function qb(Dd,ld){return!ld.map(function(Td){return Dd[Td]}).every(function(Td){return ab.obj.equals(Td,Dd&&Dd.valueOf())})}function Vb(Dd){if(ab.obj.isPrimitive(Dd))var ld=
ab.string.print(Dd);else Array.isArray(Dd)?((ld=3<Dd.length)&&(Dd=Dd.slice(0,3)),Dd=ab.string.print(Dd),ld&&(Dd=Dd.slice(0,-1)+", ...]"),ld=Dd):ld=ab.string.print(Dd);ld=ld.replace(/\n/g,"");500<ld.length&&(ld=ld.slice(0,20)+"...[".concat(ld.length-20,' CHARS]"'));return ld}function Lb(){return Kb.apply(this,arguments)}function Kb(){Kb=nd(regeneratorRuntime.mark(function ld(){var Td,gb,Vc,vb,cc;return regeneratorRuntime.wrap(function(ob){for(;;)switch(ob.prev=ob.next){case 0:if("undefined"!==typeof Hd.module){ob.next=
2;break}return ob.abrupt("return");case 2:Td=Hd.module("lively://lively.morphic/inspector"),gb=Hd.config.ide.js.defaultInspectorImports,Vc=regeneratorRuntime.mark(function qe(ae){var lc;return regeneratorRuntime.wrap(function(nc){for(;;)switch(nc.prev=nc.next){case 0:return lc=void 0,nc.prev=1,nc.next=4,System["import"](ae);case 4:lc=nc.sent;nc.next=11;break;case 7:return nc.prev=7,nc.t0=nc["catch"](1),console.log("Failed to load inspector workspace default import: "+ae),nc.abrupt("return","continue");
case 11:gb[ae].forEach(function(Yc){Td.define(Yc,lc[Yc],!1)});case 12:case "end":return nc.stop()}},qe,null,[[1,7]])}),ob.t0=regeneratorRuntime.keys(gb);case 6:if((ob.t1=ob.t0()).done){ob.next=14;break}vb=ob.t1.value;return ob.delegateYield(Vc(vb),"t2",9);case 9:cc=ob.t2;if("continue"!==cc){ob.next=12;break}return ob.abrupt("continue",6);case 12:ob.next=6;break;case 14:case "end":return ob.stop()}},ld)}));return Kb.apply(this,arguments)}function Db(Dd,ld){ld.initPos=Dd.position;ld.factorLabel=(new Hd.Tooltip({master:Hd.SystemTooltip,
description:"1x"})).openInWorld(Dd.hand.position.addXY(10,10))}function Ra(Dd,ld){var Td=Dd.position.subPt(ld.initPos);Dd=Td.x;ld=Hd.num.roundTo(Math.exp(-Td.y/$world.height*6),.01)*ld.baseFactor;return{offset:Dd,scale:ld}}function N(Dd,ld,Td){return Math.max(Td.min,Math.min(Td.max,Td.scrubbedValue+(Td.floatingPoint?Dd*ld:Math.round(Dd*ld))))}function va(Dd,ld){var Td=Hd.getScaleAndOffset(Dd,ld);Dd=Td.offset;Td=Td.scale;ld.factorLabel.softRemove();return Hd.getCurrentValue(Dd,Td,ld)}function Wa(Dd,
ld){var Td=Hd.getScaleAndOffset(Dd,ld),gb=Td.scale;Td=Td.offset;ld.factorLabel.position=Dd.hand.position.addXY(10,10);ld.factorLabel.description="".concat(gb,"x");return Hd.getCurrentValue(Td,gb,ld)}function pa(Dd){function ld(ob){var ac=ob.name,ae=ob.ownerChain(),qe=ob.owner,lc=ob.world(),nc;ob===vb&&(nc=[cc]);lc===ob&&(nc=["$world"]);if(!nc&&ac&&qe){qe===lc&&1===Hd.arr.count(Hd.arr.pluck(lc.submorphs,"name"),ac)&&(nc=['$world.get("'.concat(ac,'")')]);if(!nc&&qe!==lc)for(lc=ae.length-1;lc--;)if(1===
ae[lc].getAllNamed(ac).length){nc=[].concat(Nb(ld(ae[lc])),['get("'.concat(ac,'")')]);break}nc||(ac=[].concat(Nb(ld(qe)),['get("'.concat(ac,'")')]),Hd.syncEval(ac.join("."),{context:vb}).value===ob&&(nc=ac))}nc||(nc=["".concat(cc,'.getMorphById("').concat(ob.id,'")')]);return nc}var Td=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},gb=Dd.world(),Vc=Td.maxLength;Vc=void 0===Vc?10:Vc;Td=Td.fromMorph;var vb=void 0===Td?gb:Td;if(vb===Dd)return"this";var cc=gb===vb?"$world":"this";if(!(gb||
Dd.name&&vb.get(Dd.name)===Dd))return"morph";gb=ld(Dd);return gb.length>Vc?'$world.getMorphWithId("'.concat(Dd.id,'")'):gb.join(".")}function tb(Dd){return oc.part(oc.SystemInspector,{viewModel:Dd}).openInWindow()}Lc({i:qb,p:Vb});var ab=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js");ab.printSymbol=function(Dd){if(Symbol.keyFor(Dd))return'Symbol.for("'.concat(Symbol.keyFor(Dd),'")');if(ab.knownSymbols.get(Dd))return ab.knownSymbols.get(Dd);String(Dd).match(ab.symMatcher);
return String(Dd)};ab.defaultSort=function(Dd,ld){if(Dd.hasOwnProperty("priority")||ld.hasOwnProperty("priority")){var Td=Dd.priority||0,gb=ld.priority||0;if(Td<gb)return-1;if(Td>gb)return 1}Dd=(Dd.keyString||Dd.key).toLowerCase();ld=(ld.keyString||ld.key).toLowerCase();return Dd<ld?-1:Dd===ld?0:1};ab.safeToString=Ma;ab.propertyNamesOf=function(Dd,ld){if(!Dd)return[];if(Array.isArray(Dd)){var Td=ld?ld.offset:0;return ab.arr.range(Td,Td+(ld?ld.partitionSize:Dd.length-1))}return ab.arr.sortBy(Object.keys(Dd),
function(gb){return gb.toLowerCase()})};ab.isMultiValue=qb;ab.printValue=Vb;ab.partitionedChildren=function(Dd){var ld=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Td=ld.originalValue;Td=void 0===Td?Dd:Td;var gb=ld.offset;gb=void 0===gb?0:gb;ld=ld.partitionSize;var Vc=void 0===ld?Dd.length||Object.values(Dd).length:ld;if(ab.obj.isArray(Dd)){ld=ab.num.roundTo(Math.max(ab.MIN_PARTITION_SIZE,Vc/50),.1);Vc/=ld;for(var vb=[],cc=0;cc<Vc;cc++){var ob="[".concat(gb+cc*ld,"-").concat(gb+(cc+1)*
ld,"]");vb.push({partition:{originalValue:Td,offset:gb+cc*ld,partitionSize:ld},value:[],key:ob,keyString:ob,valueString:"...",isCollapsed:!0})}return vb}ld=ab.num.roundTo(Math.max(ab.MIN_PARTITION_SIZE,Vc/50),.1);Vc/=ld;vb=[];cc=ab.obj.keys(Td).sort();for(ob=0;ob<Vc;ob++){var ac=gb+ob*ld,ae=gb+(ob+1)*ld,qe=ab.obj.select(Td,cc.slice(ac,ae));ac="[".concat(cc[ac].slice(0,4),"-").concat((cc[ae]||ab.arr.last(cc)).slice(0,4),"]");vb.push({partition:{originalValue:qe,offset:gb+ob*ld,partitionSize:ld},value:[],
key:ac,keyString:ac,valueString:"...",isCollapsed:!0})}return vb};ab.propertiesOf=function(Dd){var ld=Dd.partition?Dd.target:Dd.value;if(!ld)return[];var Td={_rev:!0},gb=[],Vc="function"===typeof ld.livelyCustomInspect?ld.livelyCustomInspect():{},vb=Object.assign({},ab.defaultPropertyOptions,{},Vc);if(Vc.properties){Vc=Pc(Vc.properties);var cc;try{for(Vc.s();!(cc=Vc.n()).done;){var ob=cc.value,ac=ob.key,ae=ob.hidden,qe=ob.priority,lc=ob.keyString,nc=ob.value,Yc=ob.valueString;Td[ac]=!0;ae||gb.push(Dd.getSubNode({priority:qe,
key:ac,keyString:lc||ab.safeToString(ac),value:nc,valueString:Yc,isCollapsed:!0}))}}catch(da){Vc.e(da)}finally{Vc.f()}}if(vb.includeDefault){cc=ab.propertyNamesOf(ld,Dd.partition);if(cc.length>ab.MAX_NODE_THRESHOLD){Td=Pc(ab.partitionedChildren(ld,Dd.partition));var fd;try{for(Td.s();!(fd=Td.n()).done;)gb.push(Dd.getSubNode(fd.value))}catch(da){Td.e(da)}finally{Td.f()}}else{fd=Pc(cc);var ua;try{for(fd.s();!(ua=fd.n()).done;){var Ab=ua.value;if(!(Ab in Td)){var Fa=ld[Ab],za=ab.printValue(Fa),Ka={keyString:Ab,
key:Ab,value:Fa,valueString:za,isCollapsed:!0};gb.push(Dd.getSubNode(Ka))}}}catch(da){fd.e(da)}finally{fd.f()}}if(vb.includeSymbols){Td=Pc(Object.getOwnPropertySymbols(ld));var Ib;try{for(Td.s();!(Ib=Td.n()).done;){var C=Ib.value,Pb=ab.safeToString(C);Fa=ld[C];za=ab.printValue(Fa);Ka={key:C,keyString:Pb,value:Fa,valueString:za,isCollapsed:!0};gb.push(Dd.getSubNode(Ka))}}catch(da){Td.e(da)}finally{Td.f()}}}vb.sort&&(gb=vb.sortFunction(ld,gb));return gb};ab.obj=pd;ab.num=Nd;ab.arr=Tc;ab.string=Jc;ab.connect=
$d;ab.signal=Bb;ab.TreeData=K;ab.Tree=ya;ab.newUUID=rd;ab.localInterface=E;ab.MAX_NODE_THRESHOLD=1E3;ab.MIN_PARTITION_SIZE=250;ab.defaultPropertyOptions={includeDefault:!0,includeSymbols:!0,sort:!0,sortFunction:function(Dd,ld){return Array.isArray(Dd)?ld:ld.sort(ab.defaultSort)}};ab.symMatcher=/^Symbol\((.*)\)$/;ab.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(Dd){return"symbol"===Id(Symbol[Dd])}).reduce(function(Dd,ld){return Dd.set(Symbol[ld],"Symbol."+ld)},new Map)}();
ab.isMultiValue=qb;ab.printValue=Vb;var Ob=Lc("b",function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("InspectionTree")&&"function"===typeof ld.InspectionTree?ld.InspectionTree:ld.InspectionTree=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,gb);this.inspector=gb.inspector;this.root.isInspectionNode||(this.root=ab.InspectionNode["for"](this.root,this))}},{key:"__only_serialize__",get:function(){return["root"]}},{key:"asListWithIndexAndDepth",value:function(){var gb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;return Ac._get(Object.getPrototypeOf(Td.prototype),"asListWithIndexAndDepth",this).call(this,function(Vc){Vc=Vc.node;return gb?Vc.visible:!0})}},{key:"getContextFor",
value:function(gb){return gb==this.root?this.root.value.inspectee:gb.value}},{key:"dispose",value:function(){}},{key:"filter",value:function(){var gb=nd(regeneratorRuntime.mark(function cc(vb){var ob=this,ac,ae,qe,lc,nc;return regeneratorRuntime.wrap(function(Yc){for(;;)switch(Yc.prev=Yc.next){case 0:return ac=vb.maxDepth,ae=void 0===ac?1:ac,qe=vb.iterator,lc=vb.showUnknown,nc=vb.showInternal,Yc.next=3,this.uncollapseAll(function(fd,ua){return ae>ua&&(fd==ob.root||fd.value.submorphs)});case 3:this.asListWithIndexAndDepth(!1).forEach(function(fd){var ua=
fd.node;return 0==fd.depth?ua.visible=!0:!lc&&ua.keyString&&ua.keyString.includes("UNKNOWN PROPERTY")||!nc&&ua.keyString&&ua.keyString.includes("internal")?ua.visible=!1:ua.value&&ua.value.submorphs?ua.visible=!0:ua.visible=qe(ua)});case 4:case "end":return Yc.stop()}},cc,this)}));return function(vb){return gb.apply(this,arguments)}}()},{key:"getChildren",value:function(gb){return gb.children}},{key:"display",value:function(gb){return gb.display(this.inspector)}},{key:"isCollapsed",value:function(gb){return gb.isCollapsed}},
{key:"isLeaf",value:function(gb){return ab.obj.isPrimitive(gb.value)}},{key:"collapse",value:function(gb,Vc){var vb=this;gb.isCollapsed=Vc;Vc||this.isLeaf(gb)||gb.children.length||(gb.children=ab.propertiesOf(gb).map(function(cc){vb.parentMap.set(cc,gb);return cc}))}},{key:"retrieveForRemoteProxy",value:function(gb){gb.uuid||(gb.uuid=ab.newUUID(),this.idToNodeMap[gb.uuid]=gb);return{uuid:gb.uuid,value:this.isLeaf(gb)?gb.value:{},keyString:gb.keyString,key:gb.keyString,valueString:ab.safeToString(gb.value),
isCollapsed:!0,children:[]}}},{key:"systemInterface",get:function(){return ab.localInterface}},{key:"getNodeViaId",value:function(gb){return this.idToNodeMap[gb]}},{key:"asRemoteDelegate",value:function(gb){this.idToNodeMap={};this.isRemoteDelegate=!0;System.get("@lively-env").remoteInspectionContext||(System.get("@lively-env").remoteInspectionContext={});System.get("@lively-env").remoteInspectionContext[gb]=this;return this.retrieveForRemoteProxy(this.root)}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"InspectionTree"}},{key:"forObject",value:function(gb,Vc){return new this({key:"inspectee",value:{inspectee:gb},isCollapsed:!0,inspector:Vc})}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5960,end:8759})}(ab.TreeData));ab.InspectionTree=Ob;ab.InspectionTree=
Ob;var yc=Lc("R",function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("RemoteInspectionTree")&&"function"===typeof ld.RemoteInspectionTree?ld.RemoteInspectionTree:ld.RemoteInspectionTree=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"systemInterface",get:function(){return this.evalEnvironment.systemInterface}},
{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,gb);this.parentMap=new WeakMap;this.root=gb.proxy;this.evalEnvironment=gb.evalEnvironment;this.inspector=gb.inspector;this.delegateId=gb.delegateId}},{key:"getContextFor",value:function(gb){return"System.get('@lively-env').remoteInspectionContext[\"".concat(this.delegateId,'"].getNodeViaId("').concat(gb.uuid,'").value')}},{key:"dispose",
value:function(){var gb=nd(regeneratorRuntime.mark(function vb(){return regeneratorRuntime.wrap(function(cc){for(;;)switch(cc.prev=cc.next){case 0:return cc.next=2,this.evalEnvironment.systemInterface.runEval("\n      delete System.get('@lively-env').remoteInspectionContext['".concat(this.delegateId,"']\n    "),this.evalEnvironment);case 2:case "end":return cc.stop()}},vb,this)}));return function(){return gb.apply(this,arguments)}}()},{key:"display",value:function(gb){return"".concat(gb.keyString,
": ").concat(gb.valueString)}},{key:"collapse",value:function(){var gb=nd(regeneratorRuntime.mark(function ob(vb,cc){var ac;return regeneratorRuntime.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:vb.isCollapsed=cc;if(!cc&&!this.isLeaf(vb)){ae.next=3;break}return ae.abrupt("return");case 3:if(vb.children.length){ae.next=8;break}ae.next=6;return this.evalEnvironment.systemInterface.runEval('\n         const node = this.getNodeViaId("'.concat(vb.uuid,'");\n         try {\n           this.collapse(node, false);\n         } catch (e) {\n\n         }\n         node.children.map(n => this.retrieveForRemoteProxy(n));\n      '),
{targetModule:"/lively.ide/js/inspector/context.js",context:"System.get('@lively-env').remoteInspectionContext[\"".concat(this.delegateId,'"]')});case 6:ac=ae.sent,vb.children=ac.isError?[]:ac.value;case 8:case "end":return ae.stop()}},ob,this)}));return function(vb,cc){return gb.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"RemoteInspectionTree"}},{key:"forObject",value:function(){var gb=nd(regeneratorRuntime.mark(function ob(vb,cc){var ac,ae,qe,lc;
return regeneratorRuntime.wrap(function(nc){for(;;)switch(nc.prev=nc.next){case 0:return nc.next=2,this.createRemoteContext(vb,cc);case 2:return ac=nc.sent,ae=ac.proxy,qe=ac.delegateId,lc=ac.evalEnvironment,nc.abrupt("return",new this({key:"inspectee",proxy:ae,delegateId:qe,evalEnvironment:lc,inspector:cc}));case 7:case "end":return nc.stop()}},ob,this)}));return function(vb,cc){return gb.apply(this,arguments)}}()},{key:"createRemoteContext",value:function(){var gb=nd(regeneratorRuntime.mark(function ob(vb,
cc){var ac,ae,qe,lc,nc;return regeneratorRuntime.wrap(function(Yc){for(;;)switch(Yc.prev=Yc.next){case 0:return ac=vb.code,ae=vb.evalEnvironment,qe=vb.delegateId,qe="lively://inspector-".concat(cc.id),Yc.next=5,ae.systemInterface.runEval('\n       const { InspectionTree } = await System.import("lively.ide/js/inspector/context.js");\n       const t = (() => '.concat(ac,')();\n       const tree = InspectionTree.forObject(t);\n       tree.asRemoteDelegate("').concat(qe,'");\n    '),ae);case 5:return lc=
Yc.sent,nc=lc.value,Yc.abrupt("return",{delegateId:qe,evalEnvironment:ae,proxy:nc});case 8:case "end":return Yc.stop()}},ob)}));return function(vb,cc){return gb.apply(this,arguments)}}()}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8767,end:11228})}(ab.InspectionTree));
ab.RemoteInspectionTree=yc;ab.RemoteInspectionTree=yc;(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("InspectionNode")&&"function"===typeof ld.InspectionNode?ld.InspectionNode:ld.InspectionNode=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){var Vc=
gb.root,vb=gb.priority,cc=gb.key,ob=gb.keyString,ac=gb.value,ae=gb.valueString,qe=gb.isCollapsed,lc=gb.children;lc=void 0===lc?[]:lc;var nc=gb.isSelected;nc=void 0===nc?!1:nc;var Yc=gb.visible;Yc=void 0===Yc?!0:Yc;gb.draggable;this.partition=gb.partition;this.priority=vb;this.key=cc;this.keyString=String(ob||cc);this.value=ac;this.valueString=ae||ab.printValue(ac);this.isCollapsed=qe;this.children=lc;this.isSelected=nc;this.visible=Yc;this.root=Vc}},{key:"__only_serialize__",get:function(){return[]}},
{key:"isInspectionNode",get:function(){return!0}},{key:"getSubNode",value:function(gb){if(gb.value&&gb.value.isMorph)return new ab.MorphNode(Object.assign({root:this.root},gb));var Vc=gb.key,vb=gb.keyString,cc=this.value,ob=gb.partition;ob&&(cc=ob.originalValue,vb=Vc);return new ab.PropertyNode(Object.assign({},gb,{keyString:vb,key:Vc,target:cc,partition:ob,root:this.root,spec:{}}))}},{key:"display",value:function(gb){var Vc=this.keyString,vb=this.valueString;if(!this.interactive)return"".concat(Vc,
": ").concat(vb);this._propertyWidget||(this._propertyWidget=gb.renderDraggableTreeLabel({value:"".concat(Vc,": ").concat(vb)}));this._propertyWidget.isSelected=this.isSelected;return this._propertyWidget}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InspectionNode"}},{key:"for",value:function(gb){var Vc=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return gb.value&&gb.value.isMorph?new ab.MorphNode(Object.assign({root:Vc},gb)):new ab.InspectionNode(Object.assign({root:Vc},
gb))}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11230,end:13927})})(void 0);(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("MorphNode")&&"function"===typeof ld.MorphNode?ld.MorphNode:ld.MorphNode=
function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,gb);this.target=this.value;this.propertyInfo=this.target.propertiesAndPropertySettings().properties}},{key:"getSubNode",value:function(gb){var Vc=this.propertyInfo[gb.key]||
{};return gb.value&&gb.value.isMorph?new ab.MorphNode(Object.assign({},gb,{root:this.root})):new ab.PropertyNode(Object.assign({},gb,{root:this.root,target:this.target,spec:Vc}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphNode"}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:13929,end:15097})})(ab.InspectionNode);(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("PropertyNode")&&"function"===typeof ld.PropertyNode?ld.PropertyNode:ld.PropertyNode=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),
Symbol["for"]("lively-instance-initialize"),this).call(this,gb);var Vc=gb.spec,vb=gb.target;this.partition=gb.partition;this.target=vb;this.spec=Vc;this.foldedNodes={}}},{key:"__deserialize__",value:function(gb,Vc){this.spec={}}},{key:"interactive",get:function(){return this._interactive}},{key:"interactive",set:function(gb){this._interactive=gb}},{key:"isFoldable",get:function(){return!!this.spec.foldable}},{key:"isInternalProperty",get:function(){return"id"==this.keyString||this.keyString.includes("internal")}},
{key:"getSubNode",value:function(gb){return this.isFoldable?this.getFoldedContext(gb):Ac._get(Object.getPrototypeOf(Td.prototype),"getSubNode",this).call(this,gb)}},{key:"getFoldedContext",value:function(gb){return this.foldedNodes[gb.key]=new ab.FoldedNode(Object.assign({},gb,{root:this.root,target:this.target,foldableNode:this,spec:ab.obj.dissoc(this.spec,["foldable"])}))}},{key:"rerender",value:function(){this.root.inspector.refreshSelectedLine()}},{key:"refreshProperty",value:function(gb){var Vc=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;Vc&&(this.target[this.key]=gb);this.value=this.target[this.key];this.valueString=ab.printValue(this.value);this.interactive&&(Vc||this._propertyWidget.highlight());if(this.isFoldable)for(var vb in this.foldedNodes)this.foldedNodes[vb].value=this.value[vb],this.foldedNodes[vb].valueString=ab.printValue(this.value[vb]),this.foldedNodes[vb]._propertyWidget&&ab.signal(this.foldedNodes[vb]._propertyWidget,"update",this.value[vb])}},{key:"display",
value:function(gb){var Vc=this,vb=this._propertyWidget,cc=this.keyString,ob=this.valueString,ac=this.target,ae=this.value,qe=this.spec;if(!(this.interactive||qe.foldable&&ab.isMultiValue(ae,qe.foldable)))return gb.renderPropertyControl({target:ac,keyString:cc,valueString:ob,tree:gb.ui.propertyTree,value:ae,spec:qe,node:this,fastRender:!0});if(vb)return vb.keyString=cc,vb.valueString=ob,vb.isSelected=this.isSelected,vb.control&&(vb.control.isSelected=this.isSelected),vb;vb=this._propertyWidget=gb.renderPropertyControl({target:ac,
keyString:cc,valueString:ob,value:ae,spec:qe,node:this,isSelected:this.isSelected,fontColor:gb.ui.propertyTree.fontColor});this.isInternalProperty||qe.readOnly||(ab.connect(vb,"propertyValue",this,"refreshProperty",{updater:function(lc,nc){return lc(nc,!0)}}),ab.connect(vb,"openWidget",this.root,"onWidgetOpened",{converter:function(lc){return{widget:lc,node:Vc.sourceObj}}}));return vb}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyNode"}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:15099,end:18667})})(ab.InspectionNode);(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),Td=ld.hasOwnProperty("FoldedNode")&&"function"===typeof ld.FoldedNode?ld.FoldedNode:ld.FoldedNode=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(Td,Dd,[{key:Symbol["for"]("lively-instance-initialize"),value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,gb);this.foldableNode=gb=gb.foldableNode;this.foldedProp=gb.key+ab.string.capitalize(this.key)}},{key:"refreshProperty",value:function(gb){var Vc=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.foldableNode.refreshProperty(Object.assign({},this.target[this.foldableNode.key],gd({},this.key,
gb)),Vc)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FoldedNode"}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18669,end:19371})})(ab.PropertyNode);var Ta=function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),
Td=ld.hasOwnProperty("PropertyTree")&&"function"===typeof ld.PropertyTree?ld.PropertyTree:ld.PropertyTree=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"onDrag",value:function(gb){this._onDragHandler&&this._onDragHandler(gb)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyTree"}}],ld,{pathInPackage:function(){return"./js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21333,end:21444})}(ab.Tree);ab.PropertyTree=Ta;ab.PropertyTree=Ta;var Bd=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js");Bd.Color=Fd;var Eb=Lc("a",function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js"),Td=ld.hasOwnProperty("DarkTheme")&&"function"===typeof ld.DarkTheme?ld.DarkTheme:ld.DarkTheme=function(gb){if(!gb||
!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"background",get:function(){return Bd.Color.rgb(44,62,80)}},{key:"cursorColor",get:function(){return Bd.Color.gray}},{key:"default",get:function(){return{fontColor:"#abb2bf"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",
fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},
{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:Bd.Color.rgb(204,109,243)}}},{key:"atom",get:function(){return{fontColor:"#d19a66"}}},{key:"number",get:function(){return{fontColor:Bd.Color.orange}}},{key:"def",get:function(){return{fontColor:"#e5c07b"}}},{key:"variable",get:function(){return{fontColor:"#d19a66"}}},{key:"punctuation",
get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:Bd.Color.rgb(33,150,243)}}},{key:"operator",get:function(){return{fontColor:"#abb2bf"}}},{key:"variable-2",get:function(){return{fontColor:"#e06c75"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#7F848E"}}},{key:"commentHighlight",get:function(){return{backgroundColor:"#FFFF00",fontColor:"#7F848E"}}},{key:"string",get:function(){return{fontColor:"#98c378"}}},
{key:"string-2",get:function(){return{fontColor:"#98c378"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#d19a66"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#515a6b"}}},{key:"brace",get:function(){return{fontColor:"#abb2bf"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#d19a66"}}},{key:"error",get:function(){return{backgroundColor:Bd.Color.rgba(255,
76,76,.8)}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"warning",get:function(){return{"border-bottom":"2px dotted orange"}}},{key:"diff-file-header",get:function(){return{fontColor:Bd.Color.white,fontWeight:"bold",backgroundColor:Bd.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:Bd.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:Bd.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},
{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DarkTheme"}},{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],ld,{pathInPackage:function(){return"./themes/dark.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3846})}(void 0));Bd["default"]=Eb;var fe=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js");fe.Color=Fd;var Od=Lc("D",function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js"),Td=ld.hasOwnProperty("DefaultTheme")&&"function"===typeof ld.DefaultTheme?ld.DefaultTheme:ld.DefaultTheme=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(Td,Dd,[{key:"background",get:function(){return fe.Color.white}},{key:"default",get:function(){return{fontColor:"#333"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},
{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},
{key:"keyword",get:function(){return{fontColor:"#708"}}},{key:"atom",get:function(){return{fontColor:"#219"}}},{key:"number",get:function(){return{fontColor:"#174"}}},{key:"def",get:function(){return{fontColor:"#22c"}}},{key:"variable",get:function(){return{fontColor:"#05a"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:"#222"}}},{key:"operator",get:function(){return{fontColor:"#05a"}}},{key:"variable-2",get:function(){return{fontColor:"#05a"}}},
{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#666"}}},{key:"commentHighlight",get:function(){return{backgroundColor:"#FFFF00",fontColor:"#666"}}},{key:"string",get:function(){return{fontColor:"#181"}}},{key:"string-2",get:function(){return{fontColor:"#0B2"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#555"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",
get:function(){return{fontColor:"#997"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#333"}}},{key:"error",get:function(){return{backgroundColor:fe.Color.rgba(255,76,76,.53)}}},{key:"invalidchar",get:function(){return{backgroundColor:fe.Color.rgba(255,76,76,.53)}}},{key:"warning",get:function(){return{"border-bottom":"2px dotted orange"}}},{key:"diff-file-header",get:function(){return{fontColor:fe.Color.white,fontWeight:"bold",backgroundColor:fe.Color.rgba(136,
136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:fe.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:fe.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DefaultTheme"}},{key:"instance",get:function(){return this._instance||
(this._instance=new this)}}],ld,{pathInPackage:function(){return"./themes/default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3662})}(void 0));fe["default"]=Od;var Hd=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/helpers.js");Hd.ensureDefaultImports=Lb;Hd.onNumberDragStart=Db;Hd.getScaleAndOffset=Ra;
Hd.getCurrentValue=N;Hd.onNumberDragEnd=va;Hd.onNumberDrag=Wa;Hd.generateReferenceExpression=pa;Hd.commonjsHelpers=ic;Hd.Tooltip=vd;Hd.config=sb;Hd.SystemTooltip=Ja;Hd.num=Nd;Hd.arr=Tc;Hd.syncEval=Xb;Hd.module=Ga;Hd.ensureDefaultImports=Lb;Hd.onNumberDragStart=Db;Hd.getScaleAndOffset=Ra;Hd.getCurrentValue=N;Hd.onNumberDragEnd=va;Hd.onNumberDrag=Wa;Hd.generateReferenceExpression=pa;var Qc=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js");Qc.InspectionTree=Ob;Qc.isMultiValue=
qb;Qc.RemoteInspectionTree=yc;Qc.printValue=Vb;Qc.arr=Tc;Qc.num=Nd;Qc.promise=bc;Qc.obj=pd;Qc.Path=hb;Qc.pt=cb;Qc.rect=Hb;Qc.Color=Fd;Qc.config=sb;Qc.HorizontalLayout=ec;Qc.Label=ub;Qc.VerticalLayout=yb;Qc.Morph=ba;Qc.morph=wb;Qc.Icon=Xa;Qc.ViewModel=Za;Qc.part=Sb;Qc.connect=$d;Qc.disconnect=Cb;Qc.once=Da;Qc.LoadingIndicator=W;Qc.DarkTheme=Eb;Qc.DefaultTheme=Od;Qc.DropDownSelector=pb;Qc.InteractiveMorphSelector=Wb;Qc.MorphHighlighter=R;Qc.valueWidgets=xb;Qc.onNumberDragStart=Db;Qc.ensureDefaultImports=
Lb;Qc.generateReferenceExpression=pa;Qc.onNumberDragEnd=va;Qc.onNumberDrag=Wa;Qc.InstructionWidget=rf;Qc.ColorPicker=Ub;Qc.ShadowPopup=vc;Qc.PositionPopupLight=Oc;Qc.PaddingPopup=aa;Qc.ensureDefaultImports();Qc.inspectorCommands=[{name:"focus codeEditor",exec:function(Dd){Dd.get("codeEditor").show();Dd.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(Dd){Dd.get("propertyTree").show();Dd.get("propertyTree").focus();return!0}}];(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),
Td=ld.hasOwnProperty("DraggedProp")&&"function"===typeof ld.DraggedProp?ld.DraggedProp:ld.DraggedProp=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"applyToTarget",value:function(gb){var Vc=this.currentTarget,vb=this.control;this.remove();Qc.MorphHighlighter.removeHighlighters(gb.world);if(Vc)if(Vc.isText&&"js"===Vc.editorModeName){var cc=Vc.evalEnvironment.context;gb=Vc.textPositionFromPoint(Vc.localize(gb.position));
cc=Qc.generateReferenceExpression(this.sourceObject,{fromMorph:cc});vb.keyString&&(cc+="."+vb.keyString);Vc.insertTextAndSelect(cc,gb);Vc.focus()}else"propertyValue"in vb&&(Vc[vb.keyString]=vb.propertyValue)}},{key:"update",value:function(gb){gb=gb.hand.globalPosition;var Vc=this.morphBeneath(gb);if(Vc){for(Vc===this.morphHighlighter&&(Vc=Vc.morphBeneath(gb));[Vc].concat(Nb(Vc.ownerChain())).find(function(vb){return!vb.visible});)Vc=Vc.morphBeneath(gb);if(Vc!==this.currentTarget){this.currentTarget=
Vc;this.morphHighlighter&&this.morphHighlighter.deactivate();if(Vc.isWorld)return;this.morphHighlighter=Qc.MorphHighlighter["for"]($world,Vc);this.morphHighlighter.show()}this.position=gb}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:Qc.Color.rgb(169,204,227)},fill:{defaultValue:Qc.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},
submorphs:{after:["control"],initialize:function(){var gb=this.control;if(!gb)return this.submorphs=[];this.height=22;this.submorphs=[gb];gb.top=0;gb.fontSize=14;"function"===typeof gb.relayout&&gb.relayout();this.width=gb.width+20;this.adjustOrigin(Qc.pt(10,10))}}}}}],ld,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:1440,end:3982})})(Qc.Morph);(function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),Td=ld.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof ld.DraggableTreeLabel?ld.DraggableTreeLabel:ld.DraggableTreeLabel=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"inspector",get:function(){return this.owner.owner}},
{key:"onDragStart",value:function(gb){this.draggedProp=new Qc.DraggedProp({sourceObject:this.inspector.targetObject,control:this.copy()});this.draggedProp.openInWorld();Qc.connect(gb.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(gb){}},{key:"onDragEnd",value:function(gb){Qc.disconnect(gb.hand,"update",this.draggedProp,"update");this.draggedProp.applyToTarget(gb)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DraggableTreeLabel"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},
draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},keyString:{},valueString:{},fontFamily:{defaultValue:Qc.config.codeEditor.defaultStyle.fontFamily},fill:{defaultValue:Qc.Color.transparent},padding:{defaultValue:Qc.rect(0,1,10,-1)},isSelected:{after:["submorphs"],set:function(gb){this.setProperty("isSelected",gb);gb?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),this.removeStyleClass("selected"));this.control&&(this.control.isSelected=
gb)}}}}}],ld,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3984,end:5412})})(Qc.Label);rf=function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),Td=ld.hasOwnProperty("PropertyControl")&&"function"===typeof ld.PropertyControl?ld.PropertyControl:
ld.PropertyControl=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"menuItems",value:function(){return this._targetMenuItems||[]}},{key:"renderValueSelector",value:function(gb,Vc,vb){gb.control=new Qc.DropDownSelector({opacity:.8,fill:Qc.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:Vc,padding:0,values:vb});Qc.connect(gb.control,"update",gb,
"propertyValue",{updater:function(cc,ob){this.targetObj.propertyValue!==ob&&cc(ob)}});Qc.connect(gb,"update",gb.control,"selectedValue",{updater:function(cc,ob){ob=ob&&ob.valueOf?ob.valueOf():ob;this.targetObj.propertyValue!==ob&&cc(ob)}});return gb}},{key:"toggleMultiValuePlaceholder",value:function(gb){this.multiValuePlaceholder=this.multiValuePlaceholder||this.addMorph({fill:Qc.Color.transparent,layout:new Qc.HorizontalLayout({spacing:3}),name:"multi value placeholder",nativeCursor:"pointer",submorphs:Qc.arr.range(0,
2).map(function(Vc){return{type:"ellipse",fill:Qc.Color.gray.withA(.5),reactsToPointer:!1,extent:Qc.pt(7,7)}})});gb?(Qc.connect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=0,this.multiValuePlaceholder.visible=!0):(Qc.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=!1)}},{key:"toggleFoldableValue",value:function(gb){this.foldableProperties&&
this.toggleMultiValuePlaceholder(Qc.isMultiValue(gb,this.foldableProperties))}},{key:"asFoldable",value:function(gb){this.foldableProperties=gb;Qc.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&(this.control.topLeft=this.textBounds().topRight().addXY(-2,1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},
{key:"toString",value:function(){return"".concat(this.keyString,": ").concat(this.valueString)}},{key:"highlight",value:function(){this.highlighter&&this.highlighter.remove();var gb=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});gb.isLayoutable=!1;gb.fontWeight="bold";gb.fontColor=Qc.Color.orange;gb.reactsToPointer=!1;gb.fadeOut(2E3)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PropertyControl"}},{key:"properties",get:function(){return{root:{},
keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(gb){this.submorphs=[gb]}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[];Qc.connect(this,"extent",this,"relayout")}}}}},{key:"inferType",value:function(gb){gb.keyString;return(gb=gb.value)&&(gb.isColor||gb.isGradient)?"Color":gb&&gb.isPoint?"Point":Qc.obj.isBoolean(gb)?"Boolean":Qc.obj.isNumber(gb)?"Number":Qc.obj.isString(gb)?
"String":gb&&gb.isRectangle?"Rectangle":!1}},{key:"render",value:function(gb){gb.spec.type||(gb.spec=Object.assign({},gb.spec,{isFloat:!Number.isInteger(gb.value),type:this.inferType(gb)}));switch(gb.spec.type){case "Color":var Vc=this.renderColorControl(gb);break;case "ColorGradient":Vc=this.renderColorControl(Object.assign({},gb,{gradientEnabled:!0}));break;case "Number":Vc=this.renderNumberControl(gb);break;case "String":Vc=this.renderStringControl(gb);break;case "RichText":Vc=this.renderStringControl(gb);
break;case "Layout":Vc=this.renderLayoutControl(gb);break;case "Enum":Vc=this.renderEnumControl(gb);break;case "Shadow":Vc=this.renderShadowControl(gb);break;case "Point":Vc=this.renderPointControl(gb);break;case "Rectangle":Vc=this.renderRectangleControl(gb);break;case "Boolean":Vc=this.renderBooleanControl(gb);break;default:Vc=this.renderItSomehow(gb)}Vc.control&&(Qc.connect(Vc.control,"openWidget",Vc,"openWidget"),Vc.toggleFoldableValue(gb.value));return Vc}},{key:"baseControl",value:function(gb){var Vc=
gb.spec;gb=new this({keyString:gb.keyString,valueString:gb.valueString,isSelected:!1,propertyValue:gb.value});Vc.foldable&&gb.asFoldable(Vc.foldable);return gb}},{key:"renderGrabbableKey",value:function(gb){var Vc=this,vb=gb.target;return["".concat(gb.keyString,":"),{nativeCursor:"-webkit-grab",onDragStart:function(cc){cc.state.draggedProp=new Qc.DraggedProp({sourceObject:vb,control:Vc.baseControl(gb)});cc.state.draggedProp.openInWorld();Qc.connect(cc.hand,"update",cc.state.draggedProp,"update")},
onDrag:function(cc){},onDragEnd:function(cc){Qc.disconnect(cc.hand,"update",cc.state.draggedProp,"update");cc.state.draggedProp.applyToTarget(cc)}}]}},{key:"renderEnumControl",value:function(gb){var Vc=gb.value,vb=gb.spec.values;gb.valueString;var cc=gb.keyString,ob=gb.target,ac=gb.node;gb.tree;var ae=function(){var qe=nd(regeneratorRuntime.mark(function fd(nc,Yc){return regeneratorRuntime.wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:ob.world().openWorldMenu(nc,vb.map(function(Ab){return{string:Ab.toString(),
action:function(){ob[cc]=Ab;ac.rerender()}}}));case 1:case "end":return ua.stop()}},fd)}));return function(nc,Yc){return qe.apply(this,arguments)}}();return[].concat(Nb(this.renderGrabbableKey(gb)),[" ".concat(Vc?Vc.valueOf?Vc.valueOf():Vc:"Not set"),{nativeCursor:"pointer",onMouseDown:ae}],Nb(Qc.Icon.textAttribute("angle-down",{paddingTop:"4px",paddingLeft:"4px",opacity:.7,onMouseDown:ae})))}},{key:"renderStringControl",value:function(gb){var Vc=gb.value;gb.fastRender;gb.keyString;gb.valueString;
gb.node;return[].concat(Nb(this.renderGrabbableKey(gb)),[" ".concat(200<Vc.length?Vc.slice(0,20)+"...":Vc),{fontColor:Qc.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(gb){gb.value;var Vc=gb.keyString,vb=gb.valueString,cc=gb.target,ob=gb.node,ac=function(){var ae=nd(regeneratorRuntime.mark(function nc(lc){var Yc;return regeneratorRuntime.wrap(function(fd){for(;;)switch(fd.prev=fd.next){case 0:return Yc=Qc.part(Qc.PaddingPopup,{hasFixedPosition:!0}),Yc.viewModel.startPadding(cc[Vc]),
fd.next=4,Yc.fadeIntoWorld(lc.positionIn(cc.world()));case 4:Qc.connect(Yc.viewModel,"paddingChanged",function(ua){cc[Vc]=ua;ob.rerender()});case 5:case "end":return fd.stop()}},nc)}));return function(lc){return ae.apply(this,arguments)}}();return[].concat(Nb(this.renderGrabbableKey(gb)),[" ".concat(vb),{fontColor:Qc.Color.black,nativeCursor:"pointer",onMouseDown:ac}])}},{key:"renderBooleanControl",value:function(gb){var Vc=gb.value,vb=gb.keyString,cc=gb.valueString,ob=gb.target,ac=gb.node;return[].concat(Nb(this.renderGrabbableKey(gb)),
[" ".concat(cc),{nativeCursor:"pointer",fontColor:Vc?Qc.Color.green:Qc.Color.red,onMouseDown:function(ae){ob[vb]=!ob[vb];ac.rerender()}}])}},{key:"renderNumberControl",value:function(gb){var Vc=gb.value,vb=gb.spec,cc=gb.keyString,ob=gb.valueString;gb.fastRender;var ac=gb.node,ae=gb.target,qe=gb.tree,lc=ac._numberControls;lc=void 0===lc?new Xd:lc;var nc=zb(lc.submorphs,2),Yc=nc[0],fd=nc[1];lc.fontColor=qe.fontColor;var ua=ac._numberControls=lc;"max"in vb&&"min"in vb&&-Infinity!==vb.min&&Infinity!==
vb.max?(ua.baseFactor=(vb.max-vb.min)/100,ua.floatingPoint=vb.isFloat,ua.max=vb.max,ua.min=vb.min):(ua.floatingPoint=vb.isFloat,ua.baseFactor=.5,ua.min=void 0!==vb.min?vb.min:-Infinity,ua.max=void 0!==vb.max?vb.max:Infinity);var Ab=Qc.valueWidgets.NumberWidget.properties.fontColor.defaultValue;return[].concat(Nb(this.renderGrabbableKey(gb)),Nb(ac._inputMorph?[ac._inputMorph,{}]:[" ".concat(void 0!==Vc&&(Vc.valueOf?Vc.valueOf():Vc).toFixed(vb.isFloat?Math.max(4,Qc.num.precision(Vc)):0)," "),{fontColor:Ab,
onMouseUp:function(Fa){ac._inputMorph=Qc.morph({type:"input",fill:null,fontColor:Ab,fontFamily:"IBM Plex Mono",fontSize:14,padding:Qc.rect(8,2,-6,2),height:23,cursorColor:Qc.Color.white,value:Vc.valueOf?Vc.valueOf():ob});ae[cc]=Vc;ac._inputMorph.focus();Qc.once(ac._inputMorph,"inputAccepted",function(za){delete ac._inputMorph;ae[cc]=vb.isFloat?Number.parseFloat(za):Number.parseInt(za);ac.rerender()});Qc.once(ac._inputMorph,"onBlur",function(za){ac._inputMorph&&(delete ac._inputMorph,ae[cc]=Vc,ac.rerender())});
ac.rerender()},onDragStart:function(Fa){ua.scrubbedValue=Vc;Qc.onNumberDragStart(Fa,ua)},onDrag:function(Fa){ae[cc]=Qc.onNumberDrag(Fa,ua);ac.rerender()},onDragEnd:function(Fa){return Qc.onNumberDragEnd(Fa,ua)}},lc,{onMouseUp:function(){Yc.fill=fd.fill=null},onMouseDown:function(Fa){if(Fa.targetMorph===Yc){Yc.fill=Qc.Color.white.withA(.2);if("max"in vb&&ae[cc]>=vb.max)return;ae[cc]+=1}if(Fa.targetMorph===fd){fd.fill=Qc.Color.white.withA(.2);if("min"in vb&&ae[cc]<=vb.min)return;--ae[cc]}ac.rerender()}}]))}},
{key:"renderShadowControl",value:function(gb){var Vc=gb.keyString;gb.valueString;var vb=gb.value,cc=gb.target,ob=gb.node,ac=function(){var ae=nd(regeneratorRuntime.mark(function nc(lc){var Yc;return regeneratorRuntime.wrap(function(fd){for(;;)switch(fd.prev=fd.next){case 0:return Yc=Qc.part(Qc.ShadowPopup,{hasFixedPosition:!0}),Yc.viewModel.shadowValue=cc[Vc],fd.next=4,Yc.fadeIntoWorld(lc.positionIn(cc.world()));case 4:Qc.connect(Yc.viewModel,"value",function(ua){cc[Vc]=ua;ob.rerender()});case 5:case "end":return fd.stop()}},
nc)}));return function(lc){return ae.apply(this,arguments)}}();return[].concat(Nb(this.renderGrabbableKey(gb)),["".concat(vb?vb.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:ac}])}},{key:"renderPointControl",value:function(gb){var Vc=gb.keyString;gb.valueString;var vb=gb.value;gb.fontColor;var cc=gb.target,ob=gb.node,ac=Qc.valueWidgets.NumberWidget.properties.fontColor.defaultValue,ae={nativeCursor:"pointer",onMouseDown:function(){var qe=nd(regeneratorRuntime.mark(function Yc(nc){var fd;
return regeneratorRuntime.wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:return fd=Qc.part(Qc.PositionPopupLight,{hasFixedPosition:!0}),fd.setPoint(cc[Vc]),ua.next=4,fd.fadeIntoWorld(nc.positionIn(cc.world()));case 4:Qc.connect(fd.viewModel,"value",function(Ab){cc[Vc]=Ab;ob.rerender()});case 5:case "end":return ua.stop()}},Yc)}));return function(nc){return qe.apply(this,arguments)}}()};return[].concat(Nb(this.renderGrabbableKey(gb)),[" pt(",Object.assign({},ae),"".concat(vb.x.toFixed()),
Object.assign({fontColor:ac},ae),",",Object.assign({},ae),"".concat(vb.y.toFixed()),Object.assign({fontColor:ac},ae),")",Object.assign({},ae)])}},{key:"renderLayoutControl",value:function(gb){gb.target;gb.fastRender;var Vc=gb.valueString;gb.keyString;var vb=gb.value;return[].concat(Nb(this.renderGrabbableKey(gb)),[" ".concat(vb?Vc:"No Layout"),{onMouseDown:function(cc){}}])}},{key:"renderColorControl",value:function(gb){var Vc=gb.node,vb=gb.gradientEnabled;gb.fastRender;var cc=gb.valueString,ob=gb.keyString,
ac=gb.value,ae=gb.target,qe=function(){var lc=nd(regeneratorRuntime.mark(function fd(Yc){var ua;return regeneratorRuntime.wrap(function(Ab){for(;;)switch(Ab.prev=Ab.next){case 0:return ua=Qc.part(Qc.ColorPicker,{hasFixedPosition:!0}),ua.solidOnly=!vb,ua.focusOnMorph(ae,ac),Ab.next=5,ua.fadeIntoWorld(Yc.positionIn(ae.world()));case 5:Qc.connect(ua.viewModel,"value",function(Fa){ae[ob]=Fa;Vc.rerender()});case 6:case "end":return Ab.stop()}},fd)}));return function(Yc){return lc.apply(this,arguments)}}();
return[].concat(Nb(this.renderGrabbableKey(gb)),[Qc.morph({fill:ac.valueOf?ac.valueOf():ac,extent:Qc.pt(15,15),borderColor:Qc.Color.gray,borderWidth:1}),{paddingLeft:"5px",paddingTop:"4px",paddingRight:"5px"},"".concat(ac?ac.valueOf?ac.valueOf():cc:"No Color"),{nativeCursor:"pointer",onMouseDown:qe}])}},{key:"renderItSomehow",value:function(gb){gb.fastRender;gb.keyString;var Vc=gb.valueString;gb.value;return[].concat(Nb(this.renderGrabbableKey(gb)),[" ".concat(Vc),{}])}}],ld,{pathInPackage:function(){return"./js/inspector/index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5421,end:20828})}(Qc.DraggableTreeLabel);Qc.PropertyControl=rf;Qc.PropertyControl=rf;var Xd=function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),Td=ld.hasOwnProperty("NumberControls")&&"function"===typeof ld.NumberControls?ld.NumberControls:ld.NumberControls=
function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"NumberControls"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Qc.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:Qc.Color.transparent},width:{defaultValue:15},fontColor:{derived:!0,set:function(gb){this.submorphs.map(function(Vc){return Vc.fontColor=
gb})}},submorphs:{initialize:function(){this.submorphs=[Qc.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,nativeCursor:"pointer",padding:Qc.rect(5,2,0,-6),fontSize:12}),Qc.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,padding:Qc.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],ld,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20830,end:21874})}(Qc.Morph);rf=function(Dd){var ld=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/index.js"),Td=ld.hasOwnProperty("Inspector")&&"function"===typeof ld.Inspector?ld.Inspector:ld.Inspector=function(gb){if(!gb||!gb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(Td,Dd,[{key:"attach",value:function(gb){Ac._get(Object.getPrototypeOf(Td.prototype),
"attach",this).call(this,gb);var Vc=this;gb=this.ui;var vb=gb.codeEditor,cc=gb.thisBindingSelector,ob=gb.propertyTree;gb=Qc.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"],paddingTop:"2px"});cc.items=[{isListItem:!0,value:"target",label:["this ",null].concat(Nb(gb),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat(Nb(gb),[" selection",null])}];vb.changeEditorMode("js").then(function(){return vb.evalEnvironment={targetModule:"lively://lively.morphic/inspector",
get context(){return"selection"===cc.selection?Vc.selectedContext:Vc.targetObject},get systemInterface(){return Qc.Path("treeData.systemInterface").get(ob)},format:"esm"}})["catch"](function(ac){return $world.logError(ac)})}},{key:"viewDidLoad",value:function(){this.prepareForNewTargetObject(this.targetObject)}},{key:"fixUndeclaredVariables",value:function(){this.ui.codeEditor.execCommand("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}},{key:"renderDraggableTreeLabel",value:function(gb){return new Qc.DraggableTreeLabel(gb)}},
{key:"renderPropertyControl",value:function(gb){return Qc.PropertyControl.render(gb)}},{key:"onWindowClose",value:function(){this.view.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"refreshSelectedLine",value:function(){var gb=this.ui.propertyTree.selectedIndex-1,Vc=this.ui.propertyTree.selectedNode;this.ui.propertyTree.selectedNode.refreshProperty();Vc=this.ui.propertyTree.document.getLine(gb).textAndAttributes.slice(0,4).concat(Vc.display(this));
gb=this.ui.propertyTree.lineRange(gb,!1);this.ui.propertyTree.replace(gb,Vc,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!==this.lastStyleSheetProps)this.refreshTreeView(),this.lastStyleSheetProps=this.targetObject._styleSheetProps;else{var gb=Qc.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));
if(gb!==this.lastChange||this.lastSubmorphs!==Qc.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString===gb.prop&&this.repositionOpenWidget(),this.lastChange=gb,this.lastSubmorphs=Qc.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",value:function(){var gb;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(Vc){Vc=Vc.node;Vc.target&&
(gb=Vc.foldableNode?Vc.target[Vc.foldableNode.key][Vc.key]:Vc.target[Vc.key],!Qc.obj.equals(gb,Vc.value)&&Vc.refreshProperty&&Vc.refreshProperty(gb))});this.ui.propertyTree.update(!0);this.ui.propertyTree.doNotAcceptDropsForThisAndSubmorphs()}},{key:"prepareForNewTargetObject",value:function(){var gb=nd(regeneratorRuntime.mark(function cc(vb){var ob,ac,ae,qe,lc,nc,Yc,fd,ua,Ab,Fa,za,Ka,Ib=arguments;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:ob=1<Ib.length&&void 0!==
Ib[1]?Ib[1]:!1;if(!this.isUpdating()){C.next=4;break}C.next=4;return this.whenUpdated();case 4:ac=Qc.promise.deferred();ae=ac.promise;qe=!!this.target;this.updateInProgress=ae;C.prev=7;ob&&(lc=Qc.LoadingIndicator.open("connecting to remote..."));if(!ob){C.next=15;break}C.next=12;return Qc.RemoteInspectionTree.forObject(vb,this);case 12:C.t0=C.sent;C.next=16;break;case 15:C.t0=Qc.InspectionTree.forObject(vb,this);case 16:return nc=C.t0,Yc=this.ui.propertyTree,C.next=21,nc.collapse(nc.root,!1);case 21:if(!nc.root.children){C.next=
24;break}C.next=24;return nc.collapse(nc.root.children[0],!1);case 24:fd=this.originalTreeData&&this.originalTreeData.diff(nc);if(!fd){C.next=30;break}ua=Pc(fd);try{for(ua.s();!(Ab=ua.n()).done;)Fa=zb(Ab.value,2),za=Fa[0],Ka=Fa[1],za.refreshProperty(Ka.value)}catch(Pb){ua.e(Pb)}finally{ua.f()}C.next=39;break;case 30:return Yc.treeData=nc,C.next=33,this.filterProperties();case 33:if(!Yc.treeData.root.isCollapsed){C.next=37;break}C.next=36;return Yc.onNodeCollapseChanged({node:nc.root,isCollapsed:!1});
case 36:Yc.selectedIndex=1;case 37:return C.next=39,Yc.execCommand("uncollapse selected node");case 39:this.toggleWindowStyle(qe);lc&&lc.remove();C.next=46;break;case 43:C.prev=43,C.t1=C["catch"](7),this.view.showError(C.t1);case 46:this.view.startStepping(1E3,"refreshAllProperties"),this.updateInProgress=null;case 48:case "end":return C.stop()}},cc,this,[[7,43]])}));return function(vb){return gb.apply(this,arguments)}}()},{key:"toggleWindowStyle",value:function(){var gb=nd(regeneratorRuntime.mark(function vb(){var cc,
ob,ac,ae,qe,lc,nc,Yc=arguments;return regeneratorRuntime.wrap(function(fd){for(;;)switch(fd.prev=fd.next){case 0:return cc=0<Yc.length&&void 0!==Yc[0]?Yc[0]:!0,ob=300,qe=this.ui.codeEditor,lc=qe.pluginFind(function(ua){return ua.runEval}),nc=this.view.getWindow(),fd.next=7,lc.runEval("System.get('@system-env').node");case 7:if(!fd.sent.value){fd.next=12;break}ae=[].concat(Nb(Qc.arr.without(nc.styleClasses,"local")),["node"]);ac=Qc.DarkTheme.instance;fd.next=14;break;case 12:ae=["local"].concat(Nb(nc?
Qc.arr.without(nc.styleClasses,"node"):[])),ac=Qc.DefaultTheme.instance;case 14:lc.theme=ac,cc?(nc&&nc.animate({duration:ob,styleClasses:ae}),qe.animate({fill:ac.background,duration:ob})):nc&&(nc.styleClasses=ae),qe.textString=qe.textString,lc.highlight();case 18:case "end":return fd.stop()}},vb,this)}));return function(){return gb.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return!!this.updateInProgress}},{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},
{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"selectTarget",value:function(){var gb=nd(regeneratorRuntime.mark(function vb(){var cc,ob,ac;return regeneratorRuntime.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this.view.env.eventDispatcher.isKeyPressed("Shift")){ae.next=8;break}ae.next=3;return $world.execCommand("select morph",{justReturn:!0});case 3:ob=ae.sent;ac=zb(ob,1);cc=ac[0];ae.next=13;break;case 8:return this.toggleSelectionInstructions(!0),ae.next=11,Qc.InteractiveMorphSelector.selectMorph();
case 11:cc=ae.sent,this.toggleSelectionInstructions(!1);case 13:cc&&(this.targetObject=cc);case 14:case "end":return ae.stop()}},vb,this)}));return function(){return gb.apply(this,arguments)}}()},{key:"toggleSelectionInstructions",value:function(gb){gb&&!this.instructionWidget?(this.instructionWidget=this.view.addMorph(Qc.part(Qc.InstructionWidget,{isLayoutable:!1,opacity:0,clipMode:"hidden",center:this.view.extent.scaleBy(.5)})),this.instructionWidget.animate({opacity:1,duration:200})):(this.instructionWidget.fadeOut(200),
this.instructionWidget=null)}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",value:function(gb){gb=gb.widget;this.openWidget&&this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;gb.epiMorph=!0;this.openWidget=gb;Qc.once(gb,"close",this,"closeOpenWidget");Qc.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",value:function(){var gb=this.ui.propertyTree,Vc=gb.textLayout.boundsFor(gb,{column:0,
row:gb.selectedIndex-1});Vc=gb.worldPoint(Qc.pt(Vc.x,Vc.y+Vc.height/2)).addPt(gb.scroll.negated());gb=gb.globalBounds();Vc.x=this.globalBounds().center().x;Vc.y<gb.top()?Vc=gb.topCenter():gb.bottom()-20<Vc.y&&(Vc=gb.bottomCenter().addXY(0,-20));return Vc}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(gb){this.view.layout.row(1).height+=gb.state.dragDelta.y;this.relayout()}},
{key:"isEditorVisible",value:function(){return 10<this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(gb){if(gb!==this.isEditorVisible()){var Vc=this.view,vb=Vc.extent;Vc=Vc.layout;var cc=this.ui,ob=cc.terminalToggler,ac=cc.codeEditor,ae=cc.thisBindingSelector;cc=cc.fixImportButton;Vc.disable();gb?(ob.fontColor=Qc.Color.rgbHex("00e0ff"),Vc.row(3).height=this.codeEditorHeight||180,Vc.row(2).height=5,cc.animate({visible:!0,duration:200}),ae.animate({visible:!0,duration:200})):(this.codeEditorHeight=
Vc.row(3).height,ob.fontColor=Qc.Color.white,Vc.row(3).height=Vc.row(2).height=0,cc.animate({visible:!1,duration:200}),ae.animate({visible:!1,duration:200}));this.view.extent=vb;Vc.enable({duration:200});this.relayout({duration:200});ac.focus();ac.animate({opacity:gb?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var gb=nd(regeneratorRuntime.mark(function vb(){return regeneratorRuntime.wrap(function(cc){for(;;)switch(cc.prev=cc.next){case 0:this.makeEditorVisible(!this.isEditorVisible());
case 1:case "end":return cc.stop()}},vb,this)}));return function(){return gb.apply(this,arguments)}}()},{key:"filterProperties",value:function(){var gb=nd(regeneratorRuntime.mark(function vb(){var cc,ob;return regeneratorRuntime.wrap(function(ac){for(;;)switch(ac.prev=ac.next){case 0:return console.log("filter props"),cc=this.ui.searchField,ob=this.ui.propertyTree,this.originalTreeData||(this.originalTreeData=ob.treeData),Qc.disconnect(ob.treeData,"onWidgetOpened",this,"onWidgetOpened"),ac.next=7,
ob.treeData.filter({maxDepth:2,showUnknown:this.ui.unknowns.checked,showInternal:this.ui.internals.checked,iterator:function(ae){return cc.matches(ae.key)}});case 7:ob.update(),Qc.connect(ob.treeData,"onWidgetOpened",this,"onWidgetOpened");case 9:case "end":return ac.stop()}},vb,this)}));return function(){return gb.apply(this,arguments)}}()},{key:"onViewResized",value:function(gb){this._lastExtent&&this._lastExtent.equals(gb)||this.relayout();this.world()&&(this._lastExtent=gb)}},{key:"relayout",
value:function(){var gb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Vc=this.ui,vb=Vc.fixImportButton,cc=Vc.terminalToggler,ob=Vc.propertyTree,ac=Vc.thisBindingSelector;Vc.codeEditor;(Vc=this.view.layout)&&Vc.forceLayout();Vc=ob.bounds().insetBy(5).bottomLeft();ob=ob.bounds().insetBy(5).bottomRight();var ae=ob.subXY(vb.width+10,0);cc.visible=!!this.world();gb.duration?(cc.animate(Object.assign({bottomLeft:Vc},gb)),vb.animate(Object.assign({bottomRight:ob},gb)),ac.animate(Object.assign({bottomRight:ae},
gb))):(cc.bottomLeft=Vc,vb.bottomRight=ob,ac.bottomRight=ae)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Inspector"}},{key:"properties",get:function(){return{_serializableTarget:{defaultValue:null},remoteTarget:{set:function(gb){this.setProperty("remoteTarget",gb);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(gb,!0))}},targetObject:{set:function(gb){this._serializableTarget=gb&&gb.isMorph?gb.id:gb;this.setProperty("targetObject",gb);this.ui.propertyTree&&
(this.originalTreeData=null,this.prepareForNewTargetObject(gb))}},selectedContext:{readOnly:!0,derived:!0,get:function(){var gb=this.ui.propertyTree,Vc=gb.treeData;return Vc.getContextFor(gb.selectedNode||Vc.root)}},originalTreeData:{serialize:!1},updateInProgress:{defaultValue:!1,serialize:!1},expose:{get:function(){return["isInspector","onWindowClose","commands","keybindings"]}},isInspector:{get:function(){return!0}},keybindings:{get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},
{keys:"Alt-Down",command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}]}},commands:{get:function(){return Qc.inspectorCommands}},bindings:{get:function(){return[{target:"target picker",signal:"onMouseUp",handler:"selectTarget",override:!1},{target:"property tree",signal:"onScroll",handler:"repositionOpenWidget",override:!1},{target:"resizer",signal:"onDrag",handler:"adjustProportions",override:!1},{target:"terminal toggler",signal:"onMouseDown",
handler:"toggleCodeEditor",override:!1},{model:"unknowns",signal:"trigger",handler:"filterProperties",override:!1},{model:"internals",signal:"trigger",handler:"filterProperties",override:!1},{model:"search field",signal:"searchInput",handler:"filterProperties",override:!1},{model:"property tree",signal:"nodeCollapseChanged",handler:"filterProperties",override:!1},{model:"fix import button",signal:"fire",handler:"fixUndeclaredVariables",override:!1},{signal:"extent",handler:"onViewResized",override:!1}]}}}}}],
ld,{pathInPackage:function(){return"./js/inspector/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22129,end:37731})}(Qc.ViewModel);Qc.Inspector=rf;Qc.Inspector=rf;var oc=window.lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/ui.cp.js");oc.openInWindow=tb;oc.GridLayout=db;oc.morph=wb;oc.Text=ib;oc.Icon=Xa;oc.Label=
ub;oc.component=Ea;oc.part=Sb;oc.pt=cb;oc.rect=Hb;oc.Color=Fd;oc.ButtonDefault=T;oc.DarkButton=ia;oc.SystemButton=ka;oc.LabeledCheckBox=La;oc.SearchField=eb;oc.Inspector=rf;oc.DropDownListModel=jb;oc.DarkList=sa;oc.PropertyTree=Ta;oc.InstructionWidget=oc.component["for"](function(){return oc.component({type:oc.Text,fixedWidth:!0,fixedHeight:!0,lineWrapping:!0,name:"instruction widget",fontSize:13,borderRadius:3,padding:oc.rect(10,10,0,0),fill:oc.Color.rgba(0,0,0,.75),fontColor:oc.Color.rgb(255,255,
255),fontFamily:'"IBM Plex Sans",Sans-Serif',extent:oc.pt(140,135),textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",{},oc.morph({type:"label",name:"escapeKey",borderRadius:5,borderWidth:1,padding:oc.rect(5,0,0,2),fontWeight:"bold",fontColor:oc.Color.rgb(255,255,255),position:oc.pt(62.5,100.9),value:"esc"}),{}]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"InstructionWidget",range:{start:556,end:1284}},oc.InstructionWidget);
oc.SmallList=oc.component["for"](function(){return oc.component(oc.DarkList,{fontSize:10})},{module:"lively.ide/js/inspector/ui.cp.js","export":"SmallList",range:{start:1292,end:1343}},oc.SmallList);oc.DarkDropDownList=oc.component["for"](function(){return oc.component(oc.DarkButton,{defaultViewModel:oc.DropDownListModel,name:"dark drop down list",submorphs:[{name:"label",fontSize:12}]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"DarkDropDownList",range:{start:1432,end:1604}},oc.DarkDropDownList);
oc.SystemInspector=oc.component["for"](function(){return oc.component({defaultViewModel:oc.Inspector,name:"system inspector",extent:oc.pt(365.9,502.7),fill:oc.Color.transparent,layout:new oc.GridLayout({autoAssign:!1,grid:[["search bar"],["property tree"],["resizer"],["code editor"]],groups:{"search bar":{align:"topLeft",resize:!0},"property tree":{align:"topLeft",resize:!0},resizer:{align:"topLeft",resize:!0},"code editor":{align:"topLeft",resize:!0}},rows:[0,{fixed:30},1,{height:375},2,{fixed:0},
3,{height:0}]}),submorphs:[{name:"search bar",fill:oc.Color.rgba(0,0,0,0),layout:new oc.GridLayout({autoAssign:!1,grid:[["search field","target picker","internals","unknowns"]],groups:{"search field":{align:"topLeft",resize:!0},"target picker":{align:"topLeft",resize:!0},internals:{align:"topLeft",resize:!0},unknowns:{align:"topLeft",resize:!0}},columns:[0,{paddingLeft:5,paddingRight:2,width:100},1,{fixed:22},2,{fixed:80},3,{fixed:90,paddingRight:5}],rows:[0,{height:30,paddingBottom:3,paddingTop:3}]}),
submorphs:[oc.part(oc.SearchField,{viewModel:{placeholder:"Search"},name:"search field"}),oc.part(oc.SystemButton,{viewModel:{label:{value:oc.Icon.textAttribute("crosshairs")}},name:"target picker",borderRadius:20,padding:oc.rect(2,2,0,0),tooltip:"Change Inspection Target"}),oc.part(oc.LabeledCheckBox,{viewModel:{label:"internals"},name:"internals"}),oc.part(oc.LabeledCheckBox,{viewModel:{label:"unknowns"},name:"unknowns"})]},{type:oc.PropertyTree,name:"property tree",readOnly:!0,borderColor:oc.Color.rgb(204,
204,204),borderWidth:1,clipMode:"hidden",draggable:!0,selectable:!0,fontFamily:'"IBM Plex Mono"',fontSize:14,treeData:{}},{type:oc.Label,name:"terminal toggler",position:oc.pt(7.3,572.6),isLayoutable:!1,extent:oc.pt(27,19),borderRadius:5,fill:oc.Color.rgba(0,0,0,.5),fontColor:oc.Color.rgb(255,255,255),fontSize:15,nativeCursor:"pointer",padding:oc.rect(5,2,0,0),textAndAttributes:oc.Icon.textAttribute("keyboard")},{name:"resizer",draggable:!0,fill:oc.Color.rgb(230,230,230),nativeCursor:"ns-resize"},
{type:oc.Text,name:"code editor",borderColor:oc.Color.rgb(204,204,204),borderWidth:1,clipMode:"auto",fixedHeight:!0,fixedWidth:!0,fontFamily:"IBM Plex Mono",lineWrapping:"by-chars",padding:oc.rect(4,2,0,0)},oc.part(oc.DarkButton,{viewModel:{label:{value:"fix undeclared vars",fontSize:12}},name:"fix import button",position:oc.pt(221.4,570.8),isLayoutable:!1,extent:oc.pt(136,22),visible:!1}),oc.part(oc.DarkDropDownList,{viewModel:{listAlign:"top",label:"this -> target",listMaster:oc.SmallList,listOffset:oc.pt(0,
-5)},name:"this binding selector",position:oc.pt(92.2,571.2),extent:oc.pt(120,22),isLayoutable:!1,visible:!1})]})},{module:"lively.ide/js/inspector/ui.cp.js","export":"SystemInspector",range:{start:1842,end:5675}},oc.SystemInspector);Ta=oc.DarkDropDownList;Ob=oc.SystemInspector;var rf=oc.InstructionWidget;oc.DarkButton=ia;oc.DarkDropDownList=Ta;oc.SystemInspector=Ob;oc.InstructionWidget=rf;oc.openInWindow=tb;Ta=Object.freeze({__proto__:null,DarkButton:ia,DarkDropDownList:Ta,SystemInspector:Ob,InstructionWidget:rf,
openInWindow:tb});Lc("I",Ta)}}});