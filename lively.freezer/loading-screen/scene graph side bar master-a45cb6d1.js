System.register("./__root_module__-590131e3.js ./index-2bc8c0f4.js ./index-1bb77cad.js ./editor-plugin-956fead1.js ./editor-plugin-402eded4.js ./index-10a530fb.js ./index-9f5d09ef.js ./index-115582dd.js".split(" "),function(){var Sa,Lb,Vb,Fc,jc,sd,kd,Cd,ed,Zc,bd,yd,ke,ue,He,ld,Wd,gc,cd,Bd,hd,Jd,de,Zb,Ic,Ad,Jc,zd,Mb,mb,Bc,xc,ec;return{setters:[function(Dc){Sa=Dc.i;Lb=Dc.M;Vb=Dc.t;Fc=Dc.e;jc=Dc.b;sd=Dc.f;kd=Dc.c;Cd=Dc.o;ed=Dc.C;Zc=Dc.$;bd=Dc.a;yd=Dc.m;ke=Dc.bE;ue=Dc.J;He=Dc.bB;ld=Dc.bz;Wd=Dc.I;
gc=Dc.af;cd=Dc.R;Bd=Dc.bF;hd=Dc._;Jd=Dc.ax;de=Dc.Y;Zb=Dc.ac;Ic=Dc.a0;Ad=Dc.p;Jc=Dc.Z;zd=Dc.bG;Mb=Dc.d},function(Dc){mb=Dc.e;Bc=Dc.s;xc=Dc.I},function(){},function(Dc){ec=Dc.I},function(){},function(){},function(){},function(){}],execute:function(){function Dc(Ba){var Ja=Ba.sourceObj,Fb=Ba.targetObj;Ja.isMorph&&Fb.isMorph?(Ja.show(),Fb.show(),Oa.showConnector&&Oa.showConnector(Ja,Fb)):Oa.show(String(Ba))}function Ta(Ba){var Ja=Ba.sourceObj,Fb=Ba.sourceAttrName,va=Ba.targetObj,Ka=Ba.targetMethodName,
Rb=Ba.getConverter();Ba=Ba.getUpdater();return Oa.printConnectionElements(Ja,Fb,va,Ka,Rb,Ba)}function hc(Ba,Ja,Fb,va,Ka,Rb){Ba="/* global connect, source, target */\nconnect(source, '"+Ja+"', target, '"+va+"'";if(Ka||Rb)Ba+=", {\n";Ka&&(Ba+="  converter: "+Ka);Ka&&Rb&&(Ba+=",");Ka&&(Ba+="\n");Rb&&(Ba+="  updater: "+Rb+"\n");if(Ka||Rb)Ba+="}";return Ba+");"}function Eb(Ba,Ja){var Fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(va){if(1==va.nextAddress)return va.yield(Oa.InteractiveMorphSelector.selectMorph(),
2);Fb=va.yieldResult;return va.return(Fb?Oa.interactiveConnectGivenSourceAndTarget(Ba,Ja,Fb):null)})}function tc(Ba,Ja,Fb,va){var Ka,Rb,eb,Vc,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){switch(qd.nextAddress){case 1:Ka=Fb&&Fb.world().targetDataBindings(Fb);Rb=Ba.world();if(!Ka||!Ka.length)return Rb.setStatusMessage("connect canceled"),qd.return();if(Ja){qd.jumpTo(2);break}eb=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Oa.arr.flatten(Ba.world().targetDataBindings(Ba)).map(function(Wc){return{isListItem:!0,
string:Wc.signature||Wc.name,value:Wc}})));return qd.yield(Rb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],eb,{filterable:!0}),3);case 3:Ja=qd.yieldResult;if("canceled"==Ja.status)return qd.return();Ja=Ja.selected[0];Ja=Ja.custom?"sourceAttribute":Ja.name;case 2:return Vc=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Oa.arr.flatten(Ka).map(function(Wc){return{isListItem:!0,value:Wc,string:Wc.signature||Wc.name}}))),qd.yield(Rb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Vc,{filterable:!0}),4);case 4:Qb=qd.yieldResult;if("canceled"==Qb.status)return qd.return();Qb=Qb.selected[0];return qd.yield(Oa.interactivelyEvaluateConnection({sourceObj:Ba,sourceAttr:Ja,targetObj:Fb,targetAttr:Qb.custom?"targetAttribute":Qb.name,onConnect:va,prompt:"Edit and confirm connection:"}),0)}})}function Ec(Ba,Ja,Fb,va){Ja=void 0===Ja?"confirm connection":Ja;var Ka,Rb,eb,Vc,Qb,qd,Wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mc){Ka=
Ba;Rb=Ka.sourceObj;eb=Ka.sourceAttrName;Vc=Ka.targetObj;Qb=Ka.targetMethodName;qd=Ba.getConverter();Wc=Ba.getUpdater();return Mc.return(Oa.interactivelyEvaluateConnection({sourceObj:Rb,sourceAttr:eb,targetObj:Vc,targetAttr:Qb,converter:qd,updater:Wc,prompt:Ja,highlight:Fb,onConnect:va}))})}function ad(Ba,Ja,Fb,va,Ka){va=void 0===va?{}:va;Ka=Oa.rect(0).sides.concat(Oa.rect(0).corners);Fb=Fb||new Oa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Oa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Oa.Color.transparent,
nativeCursor:"auto"},end:{fill:Oa.Color.orange}}},va,{hasFixedPosition:!0}));Fb.startPoint.attachTo(Ba,"rightCenter");Ja.isMorph?(va=Ja.globalBounds().partNameNearest(Ka,Ba.globalPosition),Ba.globalPosition.equals(Ja.globalBounds().partNamed(va))&&Ja.globalBounds().partNameNearest(Oa.arr.without(Ka,va),Ba.globalPosition),Fb.endPoint.attachTo(Ja,"leftCenter")):(Ka=Ba.globalBounds().topRight().addPt(Oa.pt(100,0)),Ja=Oa.morph({type:"label",value:Ja.toString(),styleClasses:["Tooltip"],padding:Oa.rect(8,
4)}).openInWorld(Ka),Ja.position=Ba.world().bounds().translateForInclusion(Ja.bounds()).topLeft(),Oa.once(Fb,"remove",Ja,"remove"),Fb.endPoint.attachTo(Ja,"leftCenter"));return Fb}function td(Ba){var Ja,Fb,va,Ka,Rb,eb,Vc,Qb,qd,Wc,Mc,Hb,Xd,Tb,Gb,Pa,ca,Ha,cb,Pb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){switch(sc.nextAddress){case 1:Ja=Ba;Fb=Ja.sourceObj;va=Ja.sourceAttr;Ka=Ja.targetObj;Rb=Ja.targetAttr;eb=Ja.converter;Vc=Ja.updater;Qb=Ja.prompt;qd=void 0===Ja.highlight?!0:Ja.highlight;
Wc=Ja.onConnect;Mc="lively://lively.bindings-interactive-connect/x"+Fb.id;Hb={context:window,format:"esm",targetModule:Mc,classTransform:Oa.classToFunctionTransform};Xd=Oa.printConnectionElements(Fb,va,Ka,Rb,eb,Vc);Ka.isMorph&&Fb.isMorph&&(Tb=Ka.propertiesAndPropertySettings().properties[Rb]||{type:typeof Ka[Rb]},Gb=Tb.type,Pa=Fb.propertiesAndPropertySettings().properties[va]||{type:typeof Fb[va]},ca=Pa.type,ca!==Gb&&(Qb=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Fb.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Ka.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Ha={};Object.assign(lively.modules.module(Mc).recorder,(Ha.source=Fb,Ha.target=Ka,Ha.connect=Oa.connect,Ha.once=Oa.once,Ha[va]=Fb[va],Ha));if(!Qb){cb=Xd;sc.jumpTo(2);break}return sc.yield($world.editPrompt(Qb,{input:Xd,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Hb,
animated:!1}),3);case 3:if(cb=sc.yieldResult,!cb)return $world.setStatusMessage("connect canceled"),sc.return();case 2:return sc.yield(lively.vm.runEval(cb,Hb),4);case 4:Pb=sc.yieldResult;if(Pb.isError)return $world.logError(Pb.value),sc.return(td({sourceObj:Fb,sourceAttr:va,targetObj:Ka,targetAttr:Rb,converter:eb,updater:Vc,prompt:"confirm connection",highlight:qd,onConnect:Wc}));qd&&($world.setStatusMessage("connected!",Oa.Color.green),Oa.interactivelyShowConnection(Pb.value));"function"===typeof Wc&&
Wc(Pb);sc.jumpToEnd()}})}var fc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");fc.Inspector=ec;var zc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Fb=Ja.hasOwnProperty("ProtoInspector")&&"function"===typeof Ja.ProtoInspector?Ja.ProtoInspector:Ja.ProtoInspector=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(fc.Inspector);zc=fc.ProtoInspector;fc.default=zc;var ac=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
ac.Morph=Lb;ac.touchInputDevice=Vb;ac.easings=Fc;ac.pt=jc;ac.fun=sd;ac.connect=kd;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Fb=Ja.hasOwnProperty("MorphicSideBar")&&"function"===typeof Ja.MorphicSideBar?Ja.MorphicSideBar:Ja.MorphicSideBar=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(va){va=void 0===va?!0:va;if(this.respondsToVisibleWindow){var Ka=$world.visibleBounds(),Rb=navigator.standalone&&ac.touchInputDevice?25:0;this.height=Ka.height-Rb;this.top=Rb+Ka.top();Rb=this.get("horizontal resizer");Rb.height=this.height;Rb.top=0;va&&(this.visible?this.topLeft=Ka.topLeft():this.topRight=Ka.topLeft())}}},{key:"switchMode",value:function(va){"inspector"==va&&this.showInspector();"connections"==va&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(va){var Ka=this,Rb,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vc){switch(Vc.nextAddress){case 1:Rb=$world.visibleBounds();eb=navigator.standalone&&ac.touchInputDevice?25:0;Ka.height=Rb.height-eb;Ka.top=eb+Rb.top();if(va)return $world.addMorph(Ka,$world.get("lively top bar")),Ka.topRight=Rb.topLeft(),
Ka.attachToWorld($world),Ka.visible=!0,Vc.yield(Ka.whenRendered(),5);Ka.detachFromWorld($world);return Vc.yield(Ka.animate({opacity:0,topRight:Rb.topLeft(),duration:300}),4);case 4:Ka.visible=!1;Ka.remove();Vc.jumpTo(0);break;case 5:return Ka.onWorldResize(!1),Ka.get("scene graph").adjustProportions(),Vc.yield(Ka.animate({opacity:1,easing:ac.easings.outCirc,topLeft:Rb.topLeft(),duration:300}),6);case 6:Ka.get("scene graph").refresh(),Vc.jumpToEnd()}})}},{key:"attachToWorld",value:function(va){ac.connect(va,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});ac.connect(va,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});ac.connect(va,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(va){var Ka=this;va.attributeConnections.forEach(function(Rb){Rb.targetObj===Ka&&Rb.disconnect()})}},{key:"selectNode",value:function(va){this.getSubmorphNamed("scene graph").selectMorphInTarget(va);this.getSubmorphNamed("connections tree").inspectConnectionsOf(va)}},
{key:"onHierarchyChange",value:function(va){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if("addMorphAt"===va.selector||"removeMorph"===va.selector||"name"===va.prop){Rb=Ka._sceneGraph||(Ka._sceneGraph=Ka.getSubmorphNamed("scene graph"));if(!Rb||!Rb.owner.visible||va.target&&va.target.isHand||va.target&&Rb.ignoreMorph(va.target)||va.args&&!va.args[0].isHalo&&Rb.ignoreMorph(va.args[0])||va.target.ownerChain().find(function(Vc){return Rb.ignoreMorph(Vc)}))return eb.return();
ac.fun.debounceNamed("scene-graph-update",50,function(){return Rb.refresh()})()}eb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(ac.Morph);fc=ac.MorphicSideBar;ac.default=fc;var Oa=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Oa.interactivelyShowConnection=Dc;Oa.printConnection=Ta;Oa.printConnectionElements=hc;Oa.interactiveConnectGivenSource=Eb;Oa.interactiveConnectGivenSourceAndTarget=tc;Oa.interactivelyReEvaluateConnection=Ec;Oa.visualizeConnection=ad;Oa.interactivelyEvaluateConnection=td;Oa.connect=kd;Oa.once=Cd;Oa.Color=ed;Oa.rect=Zc;Oa.pt=jc;Oa.arr=bd;Oa.morph=yd;Oa.Leash=ke;Oa.showConnector=
mb;Oa.show=Bc;Oa.InteractiveMorphSelector=xc;Oa.classToFunctionTransform=ue;Oa.interactivelyShowConnection=Dc;Oa.interactivelyShowConnection=Dc;Oa.printConnection=Ta;Oa.printConnection=Ta;Oa.printConnectionElements=hc;Oa.printConnectionElements=hc;Oa.interactiveConnectGivenSource=Eb;Oa.interactiveConnectGivenSource=Eb;Oa.interactiveConnectGivenSourceAndTarget=tc;Oa.interactiveConnectGivenSourceAndTarget=tc;Oa.interactivelyReEvaluateConnection=Ec;Oa.interactivelyReEvaluateConnection=Ec;Oa.visualizeConnection=
ad;Oa.visualizeConnection=ad;Oa.interactivelyEvaluateConnection=td;Oa.interactivelyEvaluateConnection=td;var Da=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Da.Tree=He;Da.TreeData=ld;Da.morph=yd;Da.Icon=Wd;Da.HorizontalLayout=gc;Da.easings=Fc;Da.Morph=Lb;Da.Color=ed;Da.Rectangle=cd;Da.rect=Zc;Da.pt=jc;Da.connect=kd;Da.noUpdate=Bd;Da.disconnect=hd;Da.disconnectAll=Jd;Da.once=Cd;Da.arr=bd;Da.obj=de;Da.num=Zb;Da.fun=sd;Da.tree=Ic;Da.promise=Ad;Da.ConnectionHalo=_missingExportShim;Da.getClassName=
Jc;Da.TextLayout=zd;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Ja.InteractiveTreeContainer?Ja.InteractiveTreeContainer:Ja.InteractiveTreeContainer=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"onChildRemoved",value:function(va){}},{key:"onChildAdded",value:function(va){}},{key:"toggleSelected",
value:function(va){if(this.tree){var Ka=this.tree,Rb=Ka.selectionFontColor,eb=Ka.nonSelectionFontColor;this.submorphs.filter(function(Vc){return!Vc._isControlElement&&Vc.styleClasses.includes("Label")}).forEach(function(Vc){Vc.fontColor=va?Rb:eb})}}},{key:"onGrab",value:function(va){var Ka=this.tree,Rb=this.node;this.fill=Da.Color.gray.withA(.5);this.fontColor=Ka.selectionFontColor;this.opacity=.8;Sa._get(Object.getPrototypeOf(Fb.prototype),"onGrab",this).call(this,va);Rb&&(this.toggleSelected(!1),
Ka.collapse(Rb),Ka.treeData.parentNode(Rb).container.onChildRemoved(this),this._data=Ka.treeData.remove(Rb),Rb.container.target.remove(),Ka.update(!0))}},{key:"wantsToBeDroppedOn",value:function(va){this.showPreviewOn(va);return!0}},{key:"showPreviewOn",value:function(va){if(va.isContainer)var Ka=va.tree;va.isTree&&(Ka=va);Ka&&Ka.showDropPreviewFor&&Ka.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(va){var Ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return Ka.tree.treeData.add(va._data,Ka.node,Ka.node.children[0]),Ka.tree.uncollapse(Ka.node),Ka.tree.treeData.remove(Ka.tree._previewNode),Rb.yield(Ka.tree.whenRendered(),2);Ka.tree.update(!0);Ka.onChildAdded(va);Rb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(va,Ka){var Rb=this;this.tree._dropInProgress=!0;Sa._get(Object.getPrototypeOf(Fb.prototype),"onBeingDroppedOn",this).call(this,va,Ka);va=function(){Rb.fill=Da.Color.gray.withA(.5);Rb.opacity=1;Rb.tree._dropInProgress=
!1;Rb.tree.refresh()};Ka.isTree?Ka.insertAtPlaceholder(this).then(va):Ka.isContainer?Ka.insertAsChild(this).then(va):va()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Da.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var va=this,Ka=this.tree.treeData;return Ka&&Ka.asList().find(function(Rb){return Rb.container===va})}}}}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:559,end:3022})}(Da.Morph);Da.InteractiveTreeContainer=fc;Da.InteractiveTreeContainer=fc;Da.InteractiveTreeContainer=fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Ja.InteractiveTreeData?
Ja.InteractiveTreeData:Ja.InteractiveTreeData=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"display",value:function(va){va.container||(va.container=va.getContainer());return[va.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(va){return va.isCollapsed}},{key:"collapse",value:function(va,Ka){va.isCollapsed=Ka}},{key:"getChildren",value:function(va){return va.isLeaf?null:this.filterActive?
va.children.filter(function(Ka){return Ka&&Ka.visible}):va.children}},{key:"isLeaf",value:function(va){return 0==(this.getChildren(va)||[]).length}},{key:"add",value:function(va,Ka,Rb){Ka=void 0===Ka?this.root:Ka;Ka.children||(Ka.children=[]);Rb?Da.arr.pushAt(Ka.children,va,Ka.children.indexOf(Rb)):Ka.children.push(va);Ka.isLeaf=!1}},{key:"replace",value:function(va,Ka){var Rb=this.parentNode(va);va=Rb.children.indexOf(va);Rb.children[va]=Ka}},{key:"next",value:function(va){var Ka=this.parentNode(va);
return Ka&&Ka.children[Ka.children.indexOf(va)+1]}},{key:"isBefore",value:function(va,Ka){this.next(va)===Ka}},{key:"isAfter",value:function(va,Ka){this.next(Ka)===va}},{key:"addBefore",value:function(va,Ka){this.add(va,this.parentNode(Ka),Ka)}},{key:"addAfter",value:function(va,Ka){var Rb=this.parentNode(Ka);Ka=Rb.children.indexOf(Ka)+1;this.add(va,Rb,Rb.children[Ka])}},{key:"remove",value:function(va){var Ka=this.parentNode(va);if(Ka)return Da.arr.remove(Ka.children,va),Ka.children==[]&&(Ka.children=
null),va}},{key:"filter",value:function(va,Ka){Ka=void 0===Ka?1:Ka;var Rb=this,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vc){if(1==Vc.nextAddress)return Vc.yield(Rb.uncollapseAll(function(Qb,qd){return qd<Ka+1}),2);eb=Rb.filterActive;Rb.filterActive=!1;Rb.asListWithIndexAndDepth(!1).reverse().forEach(function(Qb){var qd=Qb.node;if(0==Qb.depth)return qd.visible=!0;qd.visible=va(qd);!qd.isCollapsed&&qd.children.find(function(Wc){return Wc.visible})?(qd.visible=!0,qd.container.opacity=
.5):qd.container.opacity=1;return qd.visible});Rb.filterActive=eb;Vc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:3031,end:5513})}(Da.TreeData);Da.InteractiveTreeData=fc;Da.InteractiveTreeData=
fc;Da.InteractiveTreeData=fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTree")&&"function"===typeof Ja.InteractiveTree?Ja.InteractiveTree:Ja.InteractiveTree=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"update",value:function(va){var Ka=this;Sa._get(Object.getPrototypeOf(Fb.prototype),"update",this).call(this,va);this.treeData&&
this.relayoutContainers();va&&this.embeddedMorphs.forEach(function(Rb){Rb.isContainer&&(Da.obj.equals(Rb.fill,Da.Color.transparent)||(Rb.fill=Da.Color.transparent),Rb.fontFamily!=Ka.fontFamily&&(Rb.fontFamily=Ka.fontFamily),Rb.fontSize!=Ka.fontSize&&(Rb.fontSize=Ka.fontSize))})}},{key:"onDrop",value:function(va){Sa._get(Object.getPrototypeOf(Fb.prototype),"onDrop",this).call(this,va);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(va){}},{key:"onDropHoverUpdate",
value:function(va){}},{key:"onDropHoverOut",value:function(va){}},{key:"onHoverOut",value:function(va){var Ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){Sa._get(Object.getPrototypeOf(Fb.prototype),"onHoverOut",Ka).call(Ka,va);Ka._previewNode&&Ka._previewNode.container.world()&&Ka.treeData.remove(Ka._previewNode);Ka.resetContainerSelection();Ka.update(!0);Rb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(va){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==
eb.nextAddress)return Rb=Ka.treeData.parentNode(Ka._previewNode),Ka.treeData.replace(Ka._previewNode,va._data),Ka.treeData.remove(Ka._previewNode),eb.yield(Ka.whenRendered(),2);Ka.update(!0);Rb.container.onChildAdded(va);eb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var va=this;if(!this._scrollingUp){this._scrollingUp=!0;var Ka=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==Rb.nextAddress)return va._scrollingUp&&0<va.scroll.y?Rb.yield(va.animate({scroll:va.scroll.subXY(0,
30),duration:300,easing:Da.easings.linear}),3):(va._scrollingUp=!1,Rb.jumpTo(0));Ka();Rb.jumpToEnd()})};Ka()}}},{key:"scrollDownSlowly",value:function(){var va=this;if(!this._scrollingDown){this._scrollingDown=!0;var Ka=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==Rb.nextAddress)return va._scrollingDown&&va.scroll.y<va.scrollExtent.y-va.height?Rb.yield(va.animate({scroll:va.scroll.addXY(0,30),duration:300,easing:Da.easings.linear}),3):(va._scrollingDown=!1,Rb.jumpTo(0));
Ka();Rb.jumpToEnd()})};Ka()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(va){va.isContainer&&(va.fill=Da.Color.transparent)})}},{key:"showDropPreviewFor",value:function(va){var Ka=this;va=this.localize(va.globalBounds().center());var Rb=this.textPositionFromPoint(va),eb=this.treeData.asListWithIndexAndDepth(function(Hb){Hb=Hb.node;return Hb!=Ka._previewNode&&Hb.container.world()}),
Vc=(eb.find(function(Hb){return Hb.i-1===Rb.row})||{}).node,Qb=Vc&&Vc.container,qd=this.ensurePlaceholder(),Wc=!!qd.container.world(),Mc=va.subPt(this.scroll).subPt(this.scrollbarOffset);10>Mc.y?this.scrollUpSlowly():Mc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Qb){if(eb.length>Rb.row||Da.arr.last(this.treeData.root.children)===qd)return;this.treeData.remove(qd);this.treeData.add(qd);this.update(!0)}if(Qb){eb=this.textLayout.boundsFor(this,
Rb);if(4>Math.abs(eb.top()-va.y)){if(this.treeData.isBefore(qd,Vc))return;this.treeData.remove(qd);this.treeData.addBefore(qd,Vc)}else if(4>Math.abs(eb.bottom()-va.y)&&(Vc.isCollapsed||this.treeData.isLeaf(Vc))){if(this.treeData.isAfter(qd,Vc))return;this.treeData.remove(qd);this.treeData.addAfter(qd,Vc)}else{Qb.fill=Da.Color.gray;if(!Wc)return;this.treeData.remove(qd)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var va=Da.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Da.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Da.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=va;return this._previewNode}},{key:"relayoutContainers",value:function(){for(var va=this.selectedIndex,Ka=$jscomp.makeIterator(this.treeData.asListWithIndexAndDepth()),Rb=Ka.next();!Rb.done;Rb=Ka.next()){var eb=Rb.value;Rb=eb.node;eb=eb.i;if(Rb.container&&this.isLineVisible(eb)){Rb.container.nativeCursor="grab";var Vc=this.width-
25-Rb.container.left;Rb.container.width!=Vc&&(Rb.container.width=Vc);Rb.container.toggleSelected&&Rb.container.toggleSelected(eb==va);Rb.container.isContainer&&Rb.container.getLabel().fitIfNeeded()}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1107"}}},{start:5522,end:11097})}(Da.Tree);Da.InteractiveTree=fc;Da.InteractiveTree=fc;Da.InteractiveTree=fc;(function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof Ja.SceneGraphTreeLayout?Ja.SceneGraphTreeLayout:Ja.SceneGraphTreeLayout=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"estimateExtentOfLine",
value:function(va,Ka,Rb){Rb=void 0===Rb?va.getGlobalTransform():Rb;(Rb=Ka.textAndAttributes.find(function(eb){return eb.isMorph}))&&Ka.changeExtent(va.width,Rb.height)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},
{start:11099,end:11371})})(Da.TextLayout);fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("SceneGraphTree")&&"function"===typeof Ja.SceneGraphTree?Ja.SceneGraphTree:Ja.SceneGraphTree=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(va){var Ka=
this.treeData.asList().find(function(Rb){return Rb.container&&Rb.container.target===va});Ka&&this.selectedNode!=Ka&&this.selectPath(this.treeData.pathOf(Ka))}},{key:"onLoad",value:function(){var va=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return va.textLayout=new Da.SceneGraphTreeLayout(va),Ka.yield(va.whenRendered(),2);if(3!=Ka.nextAddress){if(va.ownerChain().find(function(Rb){return Rb.isComponent}))return Ka.return();va.submorphs=[];return Ka.yield(va.whenRendered(),
3)}va.get("inspector").makeEditorVisible(!0);va.get("inspector").makeEditorVisible(!1);va.setTarget($world);Ka.jumpToEnd()})}},{key:"adjustProportions",value:function(va){va=(va?va.state.dragDelta:{y:0}).y;var Ka=this.get("inspector"),Rb=this.get("scene graph resizer"),eb=this.get("mode selector"),Vc=this.get("connections tree");this.height+=va;Ka.height-=va;Vc.height-=va;Rb.top=this.bottom;Rb.left=0;eb.top=Rb.bottom;Vc.top=Ka.top=eb.bottom+5}},{key:"reset",value:function(){var va=this;this.treeData=
new Da.InteractiveTreeData({children:[],container:Da.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Ka){return null==Ka.id}).forEach(function(Ka){return va.removeAnchor(Ka)})}},{key:"setTarget",value:function(va){this.target=va;this.treeData=this.getTreeFromSubmorphHierarchy(va);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(va){var Ka=this;if(va===this._previewNode)return!1;if(va.container.nameNeedsUpdate)return!0;
var Rb=va.container.target.submorphs.filter(function(eb){return!Ka.ignoreMorph(eb)});return Rb.length!=va.children.length||Rb.map(function(eb){return eb.name}).join("")!=va.children.map(function(eb){return eb.target?eb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(va){var Ka=this,Rb=va.container.target.submorphs.map(function(Wc){return Wc.__scene_graph_target__?Wc.__scene_graph_target__():Wc}).filter(function(Wc){return!Ka.ignoreMorph(Wc)}),eb=[],Vc={},Qb;for(Qb in Rb){Vc.$jscomp$loop$prop$m$2980=
Rb[Qb];var qd=Da.arr.without(va.children,this._previewNode).find(function(Wc){return function(Mc){return Mc.container.target.id==Wc.$jscomp$loop$prop$m$2980.id}}(Vc));eb[Qb]=qd?qd:this.readMorphHierarchy(Vc.$jscomp$loop$prop$m$2980);Vc={$jscomp$loop$prop$m$2980:Vc.$jscomp$loop$prop$m$2980}}return eb}},{key:"refresh",value:function(){var va=this;if(!this._updating&&!this._dropInProgress){var Ka=!1;Da.tree.prewalk(this.treeData.root,function(Rb){Rb.container&&va.isNodeOutOfSync(Rb)&&(console.log("change node",
Rb),Ka=!0,Rb.name=Rb.container.target.name,Rb.container.refresh(),Rb.children=va.getNewChildren(Rb))},function(Rb){return Rb.children});this.update(Ka)}}},{key:"ignoreMorph",value:function(va){return va.isMorph?va.isContainer||va.isWindow||va.getWindow()||va.isEpiMorph||va.isHand||["lively.halos"].includes(va.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(va.constructor.name):!1}},{key:"onDropHoverOut",
value:function(va){var Ka=va.hand.grabbedMorphs[0];va=va.hand.findDropTarget();if(!(va===this||va&&va.ownerChain().includes(this))&&Ka&&Ka.isContainer)Ka.onDragOutside()}},{key:"onDropHoverIn",value:function(va){var Ka=va.hand.grabbedMorphs[0];Ka&&!Ka.isContainer&&($world.halos().forEach(function(Rb){return Rb.remove()}),Ka.remove(),Object.assign(Ka,va.hand._grabbedMorphProperties.get(Ka).pointerAndShadow),Ka=this.renderContainerFor(Ka,!1),va.hand.grab(Ka),Ka.leftCenter=Da.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(va){return new Da.InteractiveTreeData(this.readMorphHierarchy(va))}},{key:"readMorphHierarchy",value:function(va){var Ka=this;return Da.tree.mapTree(va,function(Rb,eb){return{name:Rb.name,isCollapsed:!0,getContainer:function(){return Ka.renderContainerFor(Rb)},visible:!0,children:eb}},function(Rb){return Rb.submorphs.filter(function(eb){return Rb.isWorld?!Ka.ignoreMorph(eb):!0})})}},{key:"renderContainerFor",value:function(va,Ka){va=void 0===va?Da.morph({name:"root"}):va;Ka=void 0===
Ka?!0:Ka;var Rb=new Da.MorphContainer({tree:this,fill:Ka?Da.Color.transparent:Da.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:va,opacity:va.visible?1:.5});Ka||(Rb.layout=new Da.HorizontalLayout({spacing:2,align:"center"}));va._data?(Rb._data=va._data,va._data.container=Rb):Rb._data={name:va.name,isCollapsed:!0,container:Rb,children:[]};Rb.whenRendered().then(function(){return Rb.refresh()});return Rb}},{key:"collapseAll",value:function(){var va=this;
this.treeData.asList().forEach(function(Ka){return Ka!=va.treeData.root?Ka.isCollapsed=!0:Ka.isCollapsed=!1})}},{key:"filterMorphs",value:function(va){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Rb=va.tokens[0],Ka.treeData.filterActive||Ka._collapseState||(Ka._collapseState=new WeakMap(Ka.treeData.asList().map(function(Vc){return[Vc,Vc.isCollapsed]}))),Ka.treeData.filterActive=!!Rb,eb.yield(Ka.treeData.filter(function(Vc){var Qb=!!Rb&&
Vc.name.includes(Rb);Vc.container||(Vc.container=Vc.getContainer());Qb?Vc.container.highlightTerm(Rb):Vc.container.highlightTerm();return Qb},3),2);Ka.treeData.filterActive||(Ka.treeData.asList().forEach(function(Vc){Vc.container&&Vc.container.highlightTerm();Vc.visible=!0;Vc.isCollapsed=Ka._collapseState.has(Vc)?Ka._collapseState.get(Vc):!0}),Ka._collapseState=null);Ka.refresh();eb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",
get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new Da.SceneGraphTreeLayout(this)}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:11380,end:18868})}(Da.InteractiveTree);Da.SceneGraphTree=fc;Da.SceneGraphTree=fc;Da.SceneGraphTree=
fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("MorphContainer")&&"function"===typeof Ja.MorphContainer?Ja.MorphContainer:Ja.MorphContainer=function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"refresh",value:function(){var va=this,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){Ka=va.target;if(!Ka)return eb.return();
va.reactsToPointer=!0;va.dropShadow=!1;va.submorphs=[va.getLabel(),0<Ka.comments.length&&va.getCommentControls(),Ka.layout&&va.getLayoutControls(),va.getConnectionControls()].filter(Boolean).map(function(Vc,Qb){Vc.fitIfNeeded();Vc.left=Rb?Rb.right+5:0;Vc.top=2;return Rb=Vc});va.height=20;va.opacity=Ka.visible?1:.5;eb.jumpToEnd()})}},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var va=this.getSubmorphNamed("name label")||Da.morph({type:"label",name:"name label",reactsToPointer:!1,
padding:Da.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Ka=va.textString.slice(2,-1);Ka&&Ka==this.target.name||(va.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return va}},{key:"getIcon",value:function(va){return Da.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Da.getClassName(va)]||"codepen",{paddingTop:"4px",
fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var va=this.getSubmorphNamed("layout label")||Da.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Da.Rectangle.inset(4,2,4,2),fill:Da.Color.orange,fontColor:Da.Color.white});va._isControlElement=!0;va.textString!=this.target.layout.name()&&(va.value=this.target.layout.name());return va}},{key:"getCommentControls",value:function(){var va=this.getSubmorphNamed("comment label")||Da.morph({type:"label",
name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Da.Rectangle.inset(4,2,4,2),fill:Da.Color.rgb(241,196,15),fontColor:Da.Color.black});va._isControlElement=!0;var Ka=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");va.textString!=Ka&&(va.value=Ka);return va}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(Rb){return!Rb.targetObj.isHalo}).length:
0;var va=this.getSubmorphNamed("connections label")||Da.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Da.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Da.Color.red,fontColor:Da.Color.white});va._isControlElement=!0;va.visible=!this.connectionHalo&&!!this.connectionCount;var Ka=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";va.textString!=Ka&&(va.value=Ka);return va}},{key:"highlightTerm",value:function(va){var Ka=
this.submorphs[0],Rb=Ka.textAndAttributes.slice(0,2),eb=Ka.textString.slice(1).split(va);1===eb.length?Ka.textAndAttributes=[].concat($jscomp.arrayFromIterable(Rb),[eb[0]]):(Ka.textAndAttributes=[].concat($jscomp.arrayFromIterable(Rb),$jscomp.arrayFromIterable(Da.arr.flatten(Da.arr.interpose(eb.map(function(Vc){return[Vc,{}]}),[va,{fontWeight:"900"}])))),Ka.whenRendered().then(function(){Ka.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(va){var Ka=
Sa._get(Object.getPrototypeOf(Fb.prototype),"wantsToBeDroppedOn",this).call(this,va);if(![va].concat($jscomp.arrayFromIterable(va.ownerChain())).includes(this.tree))this.onDragOutside();return Ka}},{key:"onGrab",value:function(va){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Ka.tree._dropInProgress=!0,Rb=Ka.target.globalPosition,Sa._get(Object.getPrototypeOf(Fb.prototype),"onGrab",Ka).call(Ka,va),Ka._data.globalTargetPosition=Rb,eb.yield(Ka.whenRendered(),
2);if(Ka.tree.fullContainsWorldPoint(Ka.globalPosition))Ka.leftCenter=Da.pt(-20,0);else Ka.onDragOutside();Ka.tree._dropInProgress=!1;eb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Da.fun.createQueue("container-hover-queue",function(va,Ka){var Rb,eb,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress)return Rb=va.target,eb=Rb.opacity,Vc=Rb.scale,va.target.opacity=0,va.target.scale=
.5,$world.halos().forEach(function(qd){return qd.remove()}),$world.firstHand.grab(va.target),va.target._data=va._data,va.remove(),va.target.position=Da.pt(0,0),Qb.yield(va.target.animate({opacity:eb,scale:Vc,duration:200}),2);Ka();Qb.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(va){var Ka=this.node.children.indexOf(va.node||va._data)+1;Ka=this.node.children[Ka];va.target.remove();Ka?(Ka=this.target.submorphs.indexOf(Ka.container.target),this.target.addMorphAt(va.target,
Ka)):this.target.addMorph(va.target);va._data.globalTargetPosition&&(va.target.position=this.target.localize(va._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(va){}},{key:"toggleConnectionControl",value:function(va){this.getSubmorphNamed("connections label").visible=va}},{key:"toggleSelected",value:function(va){var Ka=this,Rb,eb,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress){if(Ka._active===va)return Qb.return();Ka._active=va;Sa._get(Object.getPrototypeOf(Fb.prototype),
"toggleSelected",Ka).call(Ka,va);return va&&Ka.target&&Ka.target.isMorph&&Ka.world()?Qb.yield(Ka.target.whenRendered(),3):Qb.jumpTo(0)}Ka.get("inspector").targetObject=Ka.target;Ka.get("connections tree").inspectConnectionsOf(Ka.target);if(Ka.connectionHalo)return Qb.return();Rb=$jscomp.makeIterator(Ka.world().halos());for(eb=Rb.next();!eb.done;eb=Rb.next()){Vc=eb.value;if(Vc.target===Ka.target)return Qb.return();Vc.remove()}Da.noUpdate({sourceObj:Ka.world(),targetObj:Ka.sideBar,sourceAttribute:"showHaloFor",
targetAttribute:"selectNode"},function(){return Ka.world().showHaloFor(Ka.target)});Qb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(va){this.submorphs[0].fontFamily=va}},fontColor:{after:["submorphs"],derived:!0,set:function(va){this.submorphs[0].fontColor=va}},fontSize:{derived:!0,set:function(va){this.submorphs[0].fontSize=va}},target:{serialize:!1},
dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:18877,end:27423})}(Da.InteractiveTreeContainer);Da.MorphContainer=fc;Da.MorphContainer=fc;Da.MorphContainer=fc;var ka=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");ka.visualizeConnection=function(Ba,Ja,Fb,va,Ka){va=void 0===va?{}:va;Ka=ka.rect(0).sides.concat(ka.rect(0).corners);
Fb=Fb||new ka.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ka.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ka.Color.transparent,nativeCursor:"auto"},end:{fill:ka.Color.orange}}},va,{hasFixedPosition:!0}));Fb.startPoint.attachTo(Ba,"rightCenter");Ja.isMorph?(va=Ja.globalBounds().partNameNearest(Ka,Ba.globalPosition),Ba.globalPosition.equals(Ja.globalBounds().partNamed(va))&&Ja.globalBounds().partNameNearest(ka.arr.without(Ka,va),Ba.globalPosition),Fb.endPoint.attachTo(Ja,
"leftCenter")):(Ka=Ba.globalBounds().topRight().addPt(ka.pt(100,0)),Ja=ka.morph({type:"label",value:Ja.toString(),styleClasses:["Tooltip"],padding:ka.rect(8,4)}).openInWorld(Ka),Ja.position=Ba.world().bounds().translateForInclusion(Ja.bounds()).topLeft(),ka.once(Fb,"remove",Ja,"remove"),Fb.endPoint.attachTo(Ja,"leftCenter"));return Fb};ka.startConnecting=function(Ba,Ja){Ba.animate({opacity:.8,duration:300});Ba.startPoint.attachTo(Ja,"center");Ba.vertices[0].position=ka.pt(2,2)};ka.stopConnecting=
function(Ba,Ja,Fb,va){function Ka(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress)return Qb.yield(Ba.animate({opacity:0,duration:300}),2);Ba.startPoint.clearConnection();Ba.endPoint.clearConnection();Ba.remove();Qb.jumpToEnd()})}va=void 0===va?!1:va;var Rb,eb,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){return 1==Qb.nextAddress?(Rb=Ba,eb=Rb.endPoint,(Vc=eb.connectedMorph)&&"MorphContainer"==ka.getClassName(Vc)&&(Vc=Vc.target),Vc?Qb.yield(ka.interactiveConnectGivenSourceAndTarget(Fb,
va,Vc),2):Qb.jumpTo(2)):Qb.yield(Ka(),0)})};ka.editConnection=function(Ba){var Ja=Ba.connection,Fb=Ba.connectionPoint,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return va=ka.visualizeConnection(Fb,Ja.targetObj,!1,{borderColor:ka.Color.gray.darker(),endpointStyle:{start:{fill:ka.Color.transparent,nativeCursor:"auto"},end:{fill:ka.Color.gray.darker()}}}),Ka.yield(ka.interactivelyReEvaluateConnection(Ja,"Edit Connection",!1),2);va.remove();Ka.jumpToEnd()})};
ka.Tree=He;ka.TreeData=ld;ka.Icon=Wd;ka.morph=yd;ka.pt=jc;ka.Rectangle=cd;ka.rect=Zc;ka.Color=ed;ka.arr=bd;ka.connect=kd;ka.signal=Mb;ka.Leash=ke;ka.once=Cd;ka.interactivelyReEvaluateConnection=Ec;ka.interactiveConnectGivenSource=Eb;ka.interactiveConnectGivenSourceAndTarget=tc;ka.getClassName=Jc;(function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fb=Ja.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Ja.ConnectionsTreeData?Ja.ConnectionsTreeData:Ja.ConnectionsTreeData=
function(va){va&&va[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"parseMorphConnections",value:function(va){for(var Ka={},Rb=$jscomp.makeIterator(void 0===va.attributeConnections?[]:va.attributeConnections),eb=Rb.next();!eb.done;eb=Rb.next())eb=eb.value,eb.targetObj.isHalo||(Ka[eb.sourceAttrName]=Ka[eb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:ka.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(va,
eb.sourceAttrName),{}]}],ka.arr.pushAt(Ka[eb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(eb)))},0));return{children:Object.entries(Ka).map(function(Vc){var Qb=$jscomp.makeIterator(Vc);Vc=Qb.next().value;Qb=Qb.next().value;return{name:[Vc,{fontWeight:"bold"}," ",{},ka.morph({fill:ka.Color.white,opacity:.7,value:""+(Qb.length-1),borderRadius:15,fontWeight:"bold",padding:ka.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Qb}}).concat([{name:["New Connection  ",
{fontColor:ka.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(va),{}]}])}}},{key:"renderExistingConnection",value:function(va){var Ka=this,Rb=ka.morph({type:"label",fontColor:ka.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(ka.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},va.targetMethodName,{}])}),eb=this.renderDeadPin(),Vc=eb.submorphs[0];ka.connect(Rb,"onHoverIn",function(){Rb.fontColor=ka.Color.orange;Rb._leash=ka.visualizeConnection(Vc,
va.targetObj,Rb._leash);Vc.fill=ka.Color.orange;Vc.border={color:ka.Color.orange,width:3}});ka.connect(Rb,"onMouseDown",function(Qb){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){if(1==qd.nextAddress)return Qb.stop(),qd.yield(ka.interactivelyReEvaluateConnection(va),2);ka.signal(Ka,"refresh");qd.jumpToEnd()})});ka.connect(Rb,"onHoverOut",function(){Rb.fontColor=ka.Color.gray;Vc.fill=ka.Color.gray;Vc.border={color:ka.Color.white,width:1};Rb._leash.remove();Rb._leash=void 0});return[Rb,
{},"  ",{}].concat($jscomp.arrayFromIterable(ka.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){va.disconnect();ka.signal(Ka,"refresh")}})),["  ",{},eb,{}])}},{key:"renderDeadPin",value:function(){var va=ka.morph({type:"ellipse",fill:ka.Color.gray,extent:ka.pt(10,10),center:ka.pt(8,12),borderWidth:1});return ka.morph({extent:ka.pt(20,20),fill:ka.Color.transparent,reactsToPointer:!1,submorphs:[va]})}},{key:"renderPin",value:function(va,Ka){var Rb=this,eb=ka.morph({type:"ellipse",
fill:ka.Color.gray.withA(.5),extent:ka.pt(10,10),center:ka.pt(8,12),draggable:!1,borderWidth:1}),Vc=new ka.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:ka.Color.gray.darker(),endpointStyle:{fill:ka.Color.gray.darker()},position:ka.pt(1,1),vertices:[ka.pt(0,0),ka.pt(0,0)],getLabelFor:function(Qb){return"MorphContainer"==ka.getClassName(Qb)?Qb.target.name:Qb.name},canConnectTo:function(Qb){return"MorphContainer"==ka.getClassName(Qb)||2>ka.arr.intersect([Qb].concat($jscomp.arrayFromIterable(Qb.ownerChain())),
[eb].concat($jscomp.arrayFromIterable(eb.ownerChain()))).length}});eb.addMorph(Vc);ka.connect(Vc.endPoint,"onDragStart",function(){ka.startConnecting(Vc,eb)});ka.connect(Vc.endPoint,"onDragEnd",function(Qb){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qd){if(1==qd.nextAddress)return eb.center=ka.pt(8,12),qd.yield(ka.stopConnecting(Vc,eb,va,Ka),2);ka.signal(Rb,"refresh");qd.jumpToEnd()})});return ka.morph({extent:ka.pt(20,20),fill:ka.Color.transparent,reactsToPointer:!1,submorphs:[eb]})}},
{key:"display",value:function(va){return va.name}},{key:"collapse",value:function(va,Ka){va.isCollapsed=Ka}},{key:"isCollapsed",value:function(va){return va.isCollapsed}},{key:"isLeaf",value:function(va){return!va.children}},{key:"getChildren",value:function(va){return va.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(va){var Ka=new this;Ka.root=Ka.parseMorphConnections(va);return Ka}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3534,end:8251})})(ka.TreeData);fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fb=Ja.hasOwnProperty("ConnectionsTree")&&"function"===typeof Ja.ConnectionsTree?Ja.ConnectionsTree:Ja.ConnectionsTree=function(va){va&&va[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sa(Fb,Ba,[{key:"inspectConnectionsOf",value:function(va){if(this.targetMorph=va)this.treeData=ka.ConnectionsTreeData.for(va),ka.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=ka.ConnectionsTreeData.for(this.targetMorph),ka.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8268,end:8821})}(ka.Tree);fc=ka.ConnectionsTree;ka.default=fc}}});