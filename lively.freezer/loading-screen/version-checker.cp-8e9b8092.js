System.register(["./__rootModule___commonjs-entry-71573ff5.js","./helpers-ae531c72.js","@babel/plugin-syntax-import-meta","./index-ca98f65e.js"],function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd;return{setters:[function(ic){pd=ic.c;Nd=ic.M;Tc=ic.I;Jc=ic.J;$d=ic.L;Bb=ic.H;rd=ic.g;Id=ic.C;Ac=ic.b;Pc=ic.aC;gd=ic.i;nd=ic._},function(ic){Fd=ic.e},function(){},function(){}],execute:function(){var ic=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/version-checker.cp.js");ic.component=pd;
ic.Morph=Nd;ic.Icon=Tc;ic.HTMLMorph=Jc;ic.Label=$d;ic.HorizontalLayout=Bb;ic.evalOnServer=Fd;ic.resource=rd;ic.Color=Id;ic.pt=Ac;ic.runCommand=Pc;var vd=Lc("VersionChecker",function(Xb){var Nb=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/version-checker.cp.js"),bc=Nb.hasOwnProperty("VersionChecker")&&"function"===typeof Nb.VersionChecker?Nb.VersionChecker:Nb.VersionChecker=function(hb){if(!hb||!hb[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return gd(bc,Xb,[{key:"onLoad",value:function(){this.isComponent||this.withAllSubmorphsDo(function(hb){return hb.halosEnabled=!1})}},{key:"checkVersion",value:function(){this.reset();this.checkIfUpToDate()}},{key:"onMouseDown",value:function(hb){gd._get(Object.getPrototypeOf(bc.prototype),"onMouseDown",this).call(this,hb);this.isComponent||this.checkVersion()}},{key:"relayout",value:function(){var hb=this;this.world().withTopBarDo(function(cb){hb.bottomLeft=cb.sideBar&&cb.sideBar.owner?
hb.world().visibleBounds().bottomLeft().withX(cb.sideBar.right).addXY(10,-10):hb.world().visibleBounds().insetBy(10).bottomLeft()})}},{key:"checkIfUpToDate",value:function(){var hb=nd(regeneratorRuntime.mark(function Hb(){var ec,ub,yb,ba,wb,Xa;return regeneratorRuntime.wrap(function(Za){for(;;)switch(Za.prev=Za.next){case 0:return ec="git rev-parse main",Za.next=3,ic.evalOnServer("System.baseURL").then(function(Sb){return Sb.replace("file://","")});case 3:return ub=Za.sent,Za.prev=4,Za.next=7,ic.runCommand("git fetch",
{cwd:ub}).whenDone();case 7:return Za.next=9,ic.runCommand(ec,{cwd:ub}).whenDone();case 9:ic.__inter0__=Za.sent;yb=ic.__inter0__.stdout;Za.next=17;break;case 13:return Za.prev=13,Za.t0=Za["catch"](4),this.showError(),Za.abrupt("return");case 17:return ba=yb.split("\n")[0],Za.next=20,ic.resource("https://api.github.com/repos/LivelyKernel/lively.next/commits/main").readJson();case 20:wb=Za.sent;Xa=wb.sha;if(ba===Xa){Za.next=24;break}return Za.abrupt("return",this.showOutdated(ba.slice(0,6)));case 24:return Za.abrupt("return",
this.showUpToDate(ba.slice(0,6)));case 25:case "end":return Za.stop()}},Hb,this,[[4,13]])}));return function(){return hb.apply(this,arguments)}}()},{key:"showOutdated",value:function(hb){var cb=this.ui,Hb=cb.checking,ec=cb.outdated;cb.status.value=["Version: ",{},"[".concat(hb,"]"),{fontWeight:"bold"}," (Please update!)"];Hb.visible=Hb.isLayoutable=!1;ec.visible=ec.isLayoutable=!0}},{key:"showError",value:function(){var hb=this.ui,cb=hb.checking,Hb=hb.outdated;hb.status.value="Error while checking";
cb.visible=cb.isLayoutable=!1;Hb.visible=Hb.isLayoutable=!0}},{key:"showUpToDate",value:function(hb){var cb=this.ui,Hb=cb.checking,ec=cb.latest;cb.status.value=["Version: ",{},"[".concat(hb,"]"),{fontWeight:"bold"}];Hb.visible=Hb.isLayoutable=!1;ec.visible=ec.isLayoutable=!0}},{key:"reset",value:function(){var hb=this.ui,cb=hb.checking,Hb=hb.outdated,ec=hb.latest;hb.status.value="Checking version...";cb.visible=cb.isLayoutable=!0;Hb.visible=ec.visible=Hb.isLayoutable=ec.isLayoutable=!1}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"VersionChecker"}},{key:"properties",get:function(){return{isEpiMorph:{derived:!0,get:function(){return!this.isComponent}},respondsToVisibleWindow:{derived:!0,get:function(){return!this.isComponent}},ui:{derived:!0,get:function(){return{status:this.get("version status label"),checking:this.get("loading indicator"),outdated:this.get("icon outdated"),latest:this.get("icon latest")}}}}}}],Nb,{pathInPackage:function(){return"./studio/version-checker.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:306,end:3450})}(ic.Morph));ic.LivelyVersionChecker=ic.component["for"](function(){return ic.component({type:ic.VersionChecker,name:"lively version checker",borderColor:ic.Color.rgb(23,160,251),borderRadius:5,extent:ic.pt(135.5,25.1),fill:ic.Color.rgba(0,0,0,.6),hasFixedPosition:!0,layout:new ic.HorizontalLayout({align:"center",autoResize:!0,direction:"leftToRight",
orderByIndex:!0,padding:{height:0,width:0,x:5,y:5},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:5}),nativeCursor:"pointer",position:ic.pt(535,438.4),submorphs:[{type:ic.Label,name:"version status label",fontColor:ic.Color.rgb(253,254,254),reactsToPointer:!1,textAndAttributes:["Checking version...",null]},{type:ic.HTMLMorph,name:"loading indicator",cssDeclaration:'\n .lds-spinner {\n  color: official;\n  display: inline-block;\n  position: relative;\n  width: 64px;\n  height: 64px;\n}\n.lds-spinner div {\n  transform-origin: 32px 32px;\n  animation: lds-spinner .6s linear infinite;\n}\n.white-spinner div:after {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 3px;\n  left: 29px;\n  width: 5px;\n  height: 14px;\n  border-radius: 20%;\n  background: white;\n}\n.lds-spinner div:nth-child(1) {\n  transform: rotate(0deg);\n  animation-delay: -.55s;\n}\n.lds-spinner div:nth-child(2) {\n  transform: rotate(30deg);\n  animation-delay: -.5s;\n}\n.lds-spinner div:nth-child(3) {\n  transform: rotate(60deg);\n  animation-delay: -0.45s;\n}\n.lds-spinner div:nth-child(4) {\n  transform: rotate(90deg);\n  animation-delay: -0.4s;\n}\n.lds-spinner div:nth-child(5) {\n  transform: rotate(120deg);\n  animation-delay: -0.35s;\n}\n.lds-spinner div:nth-child(6) {\n  transform: rotate(150deg);\n  animation-delay: -0.3s;\n}\n.lds-spinner div:nth-child(7) {\n  transform: rotate(180deg);\n  animation-delay: -0.25s;\n}\n.lds-spinner div:nth-child(8) {\n  transform: rotate(210deg);\n  animation-delay: -0.2s;\n}\n.lds-spinner div:nth-child(9) {\n  transform: rotate(240deg);\n  animation-delay: -0.15s;\n}\n.lds-spinner div:nth-child(10) {\n  transform: rotate(270deg);\n  animation-delay: -0.1s;\n}\n.lds-spinner div:nth-child(11) {\n  transform: rotate(300deg);\n  animation-delay: -0.05s;\n}\n.lds-spinner div:nth-child(12) {\n  transform: rotate(330deg);\n  animation-delay: 0s;\n}\n@keyframes lds-spinner {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}',
extent:ic.pt(83.7,68.1),fill:ic.Color.rgba(255,255,255,0),html:'<div class="white-spinner lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>',scale:.2214986798373248},{type:ic.Label,name:"icon outdated",fontColor:ic.Color.rgb(231,76,60),isLayoutable:!1,textAndAttributes:ic.Icon.textAttribute("exclamation-triangle"),visible:!1},{type:ic.Label,name:"icon latest",fontColor:ic.Color.rgb(40,180,99),isLayoutable:!1,
textAndAttributes:ic.Icon.textAttribute("check-circle"),visible:!1}]})},{module:"lively.ide/studio/version-checker.cp.js","export":"LivelyVersionChecker",range:{start:3497,end:6851}},ic.LivelyVersionChecker);var sb=Lc("LivelyVersionChecker",ic.LivelyVersionChecker);ic.LivelyVersionChecker=sb;ic.VersionChecker=vd}}});