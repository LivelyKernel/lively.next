System.register("./__root_module__-89b08ab2.js kld-intersections ./index-08f1886d.js ./index-4f78f9ac.js ./index-1502344e.js ./color-picker-5aa8abd6.js ./editor-plugin-a483404a.js ./index-b806b9af.js ./editor-plugin-8dc06432.js ./index-2d2ce42c.js".split(" "),function(){var ta,nb,xb,Ob,Hb,qd,Dc,hd,Hc,Fc,Sc,ad,Jd,ed,sc,Sa,ob,$b,Sb,Bc,id,Xb,Ub,ub,hc,wc,bd,cd,bb,pb,pc,ab,cb,Pa,Za,eb,Na,Da,mb,Zb,dc,Mb;return{setters:[function(Yb){ta=Yb.at;nb=Yb.aj;xb=Yb.aB;Ob=Yb.aw;Hb=Yb.a3;qd=Yb.au;Dc=Yb.ar;hd=
Yb.av;Hc=Yb.C;Fc=Yb.a2;Sc=Yb.a6;ad=Yb.$;Jd=Yb.aW;ed=Yb.P;sc=Yb.a7;Sa=Yb.aC;ob=Yb.al;$b=Yb.aV;Sb=Yb.ap;Bc=Yb.am;id=Yb.ao;Xb=Yb.bq;Ub=Yb.bs;ub=Yb.bR;hc=Yb.b2;wc=Yb.bi;bd=Yb.aO;cd=Yb.n;bb=Yb.a1;pb=Yb.bS;pc=Yb.aX;ab=Yb.aY;cb=Yb.aq;Pa=Yb.a4;Za=Yb.aU;eb=Yb.as;Na=Yb.bT},function(){},function(){},function(){},function(Yb){Da=Yb.d;mb=Yb.s;Zb=Yb.I;dc=Yb.M},function(){},function(Yb){Mb=Yb.I},function(){},function(){},function(){}],execute:function(){function Yb($a){var Cc=$a.sourceObj,Mc=$a.targetObj;Cc.isMorph&&
Mc.isMorph?(Cc.show(),Mc.show(),Gc.showConnector&&Gc.showConnector(Cc,Mc)):Gc.show(String($a))}function I($a){var Cc=$a.sourceObj,Mc=$a.sourceAttrName,Ua=$a.targetObj,Fa=$a.targetMethodName,Wb=$a.getConverter();$a=$a.getUpdater();return Gc.printConnectionElements(Cc,Mc,Ua,Fa,Wb,$a)}function W($a,Cc,Mc,Ua,Fa,Wb){$a="/* global connect, source, target */\nconnect(source, '"+Cc+"', target, '"+Ua+"'";if(Fa||Wb)$a+=", {\n";Fa&&($a+="  converter: "+Fa);Fa&&Wb&&($a+=",");Fa&&($a+="\n");Wb&&($a+="  updater: "+
Wb+"\n");if(Fa||Wb)$a+="}";return $a+");"}function sa($a,Cc){var Mc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ua){if(1==Ua.nextAddress)return Ua.yield(Gc.InteractiveMorphSelector.selectMorph(),2);Mc=Ua.yieldResult;return Ua.return(Mc?Gc.interactiveConnectGivenSourceAndTarget($a,Cc,Mc):null)})}function xa($a,Cc,Mc,Ua){var Fa,Wb,Bd,pd,Vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:Fa=Mc&&Mc.world().targetDataBindings(Mc);Wb=$a.world();
if(!Fa||!Fa.length)return Wb.setStatusMessage("connect canceled"),qc.return();if(Cc){qc.jumpTo(2);break}Bd=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Gc.arr.flatten($a.world().targetDataBindings($a)).map(function(Ld){return{isListItem:!0,string:Ld.signature||Ld.name,value:Ld}})));return qc.yield(Wb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Bd,{filterable:!0}),3);case 3:Cc=qc.yieldResult;if("canceled"==Cc.status)return qc.return();Cc=Cc.selected[0];Cc=Cc.custom?"sourceAttribute":Cc.name;case 2:return pd=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Gc.arr.flatten(Fa).map(function(Ld){return{isListItem:!0,value:Ld,string:Ld.signature||Ld.name}}))),qc.yield(Wb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],pd,{filterable:!0}),4);case 4:Vd=qc.yieldResult;if("canceled"==Vd.status)return qc.return();Vd=Vd.selected[0];return qc.yield(Gc.interactivelyEvaluateConnection({sourceObj:$a,sourceAttr:Cc,targetObj:Mc,targetAttr:Vd.custom?"targetAttribute":Vd.name,onConnect:Ua,prompt:"Edit and confirm connection:"}),0)}})}function Eb($a,Cc,Mc,Ua){Cc=void 0===Cc?"confirm connection":Cc;var Fa,Wb,Bd,pd,Vd,qc,Ld;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lc){Fa=
$a;Wb=Fa.sourceObj;Bd=Fa.sourceAttrName;pd=Fa.targetObj;Vd=Fa.targetMethodName;qc=$a.getConverter();Ld=$a.getUpdater();return Lc.return(Gc.interactivelyEvaluateConnection({sourceObj:Wb,sourceAttr:Bd,targetObj:pd,targetAttr:Vd,converter:qc,updater:Ld,prompt:Cc,highlight:Mc,onConnect:Ua}))})}function Pb($a,Cc,Mc,Ua,Fa){Ua=void 0===Ua?{}:Ua;Fa=Gc.rect(0).sides.concat(Gc.rect(0).corners);Mc=Mc||new Gc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Gc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Gc.Color.transparent,
nativeCursor:"auto"},end:{fill:Gc.Color.orange}}},Ua,{hasFixedPosition:!0}));Mc.startPoint.attachTo($a,"rightCenter");Cc.isMorph?(Ua=Cc.globalBounds().partNameNearest(Fa,$a.globalPosition),$a.globalPosition.equals(Cc.globalBounds().partNamed(Ua))&&Cc.globalBounds().partNameNearest(Gc.arr.without(Fa,Ua),$a.globalPosition),Mc.endPoint.attachTo(Cc,"leftCenter")):(Fa=$a.globalBounds().topRight().addPt(Gc.pt(100,0)),Cc=Gc.morph({type:"label",value:Cc.toString(),styleClasses:["Tooltip"],padding:Gc.rect(8,
4)}).openInWorld(Fa),Cc.position=$a.world().bounds().translateForInclusion(Cc.bounds()).topLeft(),Gc.once(Mc,"remove",Cc,"remove"),Mc.endPoint.attachTo(Cc,"leftCenter"));return Mc}function Ha($a){var Cc,Mc,Ua,Fa,Wb,Bd,pd,Vd,qc,Ld,Lc,kb,ja,oa,tb,G,ma,Ga,lb,gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){switch(uc.nextAddress){case 1:Cc=$a;Mc=Cc.sourceObj;Ua=Cc.sourceAttr;Fa=Cc.targetObj;Wb=Cc.targetAttr;Bd=Cc.converter;pd=Cc.updater;Vd=Cc.prompt;qc=void 0===Cc.highlight?!0:Cc.highlight;
Ld=Cc.onConnect;Lc="lively://lively.bindings-interactive-connect/x"+Mc.id;kb={context:window,format:"esm",targetModule:Lc,classTransform:Gc.classToFunctionTransform};ja=Gc.printConnectionElements(Mc,Ua,Fa,Wb,Bd,pd);Fa.isMorph&&Mc.isMorph&&(oa=Fa.propertiesAndPropertySettings().properties[Wb]||{type:typeof Fa[Wb]},tb=oa.type,G=Mc.propertiesAndPropertySettings().properties[Ua]||{type:typeof Mc[Ua]},ma=G.type,ma!==tb&&(Vd="Edit and confirm connection:"));Ga={};Object.assign(lively.modules.module(Lc).recorder,
(Ga.source=Mc,Ga.target=Fa,Ga.connect=Dc,Ga.once=hd,Ga[Ua]=Mc[Ua],Ga));if(!Vd){lb=ja;uc.jumpTo(2);break}return uc.yield($world.editPrompt(Vd,{input:ja,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:kb,animated:!1}),3);case 3:if(lb=uc.yieldResult,!lb)return $world.setStatusMessage("connect canceled"),uc.return();case 2:return uc.yield(lively.vm.runEval(lb,kb),4);case 4:gc=uc.yieldResult;if(gc.isError)return $world.logError(gc.value),uc.return(Ha({sourceObj:Mc,
sourceAttr:Ua,targetObj:Fa,targetAttr:Wb,converter:Bd,updater:pd,prompt:"confirm connection",highlight:qc,onConnect:Ld}));qc&&($world.setStatusMessage("connected!",Gc.Color.green),Gc.interactivelyShowConnection(gc.value));"function"===typeof Ld&&Ld(gc);uc.jumpToEnd()}})}var Lb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Lb.Inspector=Mb;var xd=function($a){var Cc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Mc=Cc.hasOwnProperty("ProtoInspector")&&"function"===typeof Cc.ProtoInspector?
Cc.ProtoInspector:Cc.ProtoInspector=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Lb.Inspector);xd=Lb.ProtoInspector;Lb.default=xd;var vd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");vd.Morph=nb;vd.touchInputDevice=xb;vd.easings=Ob;vd.pt=Hb;vd.fun=qd;vd.connect=Dc;Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Mc=Cc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Cc.MorphicSideBar?Cc.MorphicSideBar:Cc.MorphicSideBar=function(Ua){Ua&&
Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(Ua){Ua=void 0===Ua?!0:Ua;if(this.respondsToVisibleWindow){var Fa=$world.visibleBounds(),Wb=navigator.standalone&&vd.touchInputDevice?25:0;this.height=Fa.height-Wb;this.top=Wb+Fa.top();Wb=this.get("horizontal resizer");Wb.height=this.height;Wb.top=0;Ua&&(this.visible?this.topLeft=
Fa.topLeft():this.topRight=Fa.topLeft())}}},{key:"switchMode",value:function(Ua){"inspector"==Ua&&this.showInspector();"connections"==Ua&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Ua){var Fa=this,Wb,Bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){switch(pd.nextAddress){case 1:Wb=
$world.visibleBounds();Bd=navigator.standalone&&vd.touchInputDevice?25:0;Fa.height=Wb.height-Bd;Fa.top=Bd+Wb.top();if(Ua)return $world.addMorph(Fa,$world.get("lively top bar")),Fa.topRight=Wb.topLeft(),Fa.attachToWorld($world),Fa.visible=!0,pd.yield(Fa.whenRendered(),5);Fa.detachFromWorld($world);return pd.yield(Fa.animate({opacity:0,topRight:Wb.topLeft(),duration:300}),4);case 4:Fa.visible=!1;Fa.remove();pd.jumpTo(0);break;case 5:return Fa.onWorldResize(!1),Fa.get("scene graph").adjustProportions(),
pd.yield(Fa.animate({opacity:1,easing:vd.easings.outCirc,topLeft:Wb.topLeft(),duration:300}),6);case 6:Fa.get("scene graph").refresh(),pd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Ua){vd.connect(Ua,"onChange",this,"onHierarchyChange",{garbageCollect:!0});vd.connect(Ua,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});vd.connect(Ua,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Ua){var Fa=this;Ua.attributeConnections.forEach(function(Wb){Wb.targetObj===
Fa&&Wb.disconnect()})}},{key:"selectNode",value:function(Ua){this.getSubmorphNamed("scene graph").selectMorphInTarget(Ua);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Ua)}},{key:"onHierarchyChange",value:function(Ua){var Fa=this,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if("addMorphAt"===Ua.selector||"removeMorph"===Ua.selector||"name"===Ua.prop){Wb=Fa._sceneGraph||(Fa._sceneGraph=Fa.getSubmorphNamed("scene graph"));if(!Wb||!Wb.owner.visible||Ua.target&&
Ua.target.isHand||Ua.target&&Wb.ignoreMorph(Ua.target)||Ua.args&&!Ua.args[0].isHalo&&Wb.ignoreMorph(Ua.args[0])||Ua.target.ownerChain().find(function(pd){return Wb.ignoreMorph(pd)}))return Bd.return();vd.fun.debounceNamed("scene-graph-update",50,function(){return Wb.refresh()})()}Bd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Cc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-72"}}},{start:226,end:3667})}(vd.Morph);Lb=vd.MorphicSideBar;vd.default=Lb;var Gc=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Gc.interactivelyShowConnection=Yb;Gc.printConnection=I;Gc.printConnectionElements=W;Gc.interactiveConnectGivenSource=sa;Gc.interactiveConnectGivenSourceAndTarget=
xa;Gc.interactivelyReEvaluateConnection=Eb;Gc.visualizeConnection=Pb;Gc.interactivelyEvaluateConnection=Ha;Gc.connect=Dc;Gc.once=hd;Gc.Color=Hc;Gc.rect=Fc;Gc.pt=Hb;Gc.arr=Sc;Gc.promise=ad;Gc.properties=Jd;Gc.Path=ed;Gc.obj=sc;Gc.HorizontalLayout=Sa;Gc.Morph=nb;Gc.VerticalLayout=ob;Gc.StyleSheet=$b;Gc.Icon=Sb;Gc.GridLayout=Bc;Gc.morph=id;Gc.TreeData=Xb;Gc.Tree=Ub;Gc.Leash=ub;Gc.LabeledCheckBox=hc;Gc.SearchField=wc;Gc.showConnector=Da;Gc.show=mb;Gc.InteractiveMorphSelector=Zb;Gc.MorphHighlighter=dc;
Gc.Window=bd;Gc.classToFunctionTransform=cd;Gc.interactivelyShowConnection=Yb;Gc.interactivelyShowConnection=Yb;Gc.printConnection=I;Gc.printConnection=I;Gc.printConnectionElements=W;Gc.printConnectionElements=W;Gc.interactiveConnectGivenSource=sa;Gc.interactiveConnectGivenSource=sa;Gc.interactiveConnectGivenSourceAndTarget=xa;Gc.interactiveConnectGivenSourceAndTarget=xa;Gc.interactivelyReEvaluateConnection=Eb;Gc.interactivelyReEvaluateConnection=Eb;Gc.visualizeConnection=Pb;Gc.visualizeConnection=
Pb;Gc.interactivelyEvaluateConnection=Ha;Gc.interactivelyEvaluateConnection=Ha;var Ma=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Ma.Tree=Ub;Ma.TreeData=Xb;Ma.morph=id;Ma.Icon=Sb;Ma.HorizontalLayout=Sa;Ma.easings=Ob;Ma.Morph=nb;Ma.Color=Hc;Ma.Rectangle=bb;Ma.rect=Fc;Ma.pt=Hb;Ma.connect=Dc;Ma.noUpdate=pb;Ma.disconnect=pc;Ma.disconnectAll=ab;Ma.once=hd;Ma.arr=Sc;Ma.num=cb;Ma.fun=qd;Ma.tree=Pa;Ma.promise=ad;Ma.ConnectionHalo=_missingExportShim;Ma.getClassName=Za;Lb=function($a){var Cc=
lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Mc=Cc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Cc.InteractiveTreeContainer?Cc.InteractiveTreeContainer:Cc.InteractiveTreeContainer=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"onChildRemoved",value:function(Ua){}},{key:"onChildAdded",value:function(Ua){}},{key:"toggleSelected",value:function(Ua){if(this.tree){var Fa=
this.tree,Wb=Fa.selectionFontColor,Bd=Fa.nonSelectionFontColor;this.submorphs.filter(function(pd){return!pd._isControlElement&&pd.styleClasses.includes("Label")}).forEach(function(pd){pd.fontColor=Ua?Wb:Bd})}}},{key:"onGrab",value:function(Ua){var Fa=this.tree,Wb=this.node;this.fill=Ma.Color.gray.withA(.5);this.fontColor=Fa.selectionFontColor;this.opacity=.8;ta._get(Object.getPrototypeOf(Mc.prototype),"onGrab",this).call(this,Ua);Wb&&(this.toggleSelected(!1),Fa.collapse(Wb),Fa.treeData.parentNode(Wb).container.onChildRemoved(this),
this._data=Fa.treeData.remove(Wb),Wb.container.target.remove(),Fa.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Ua){this.showPreviewOn(Ua);return!0}},{key:"showPreviewOn",value:function(Ua){if(Ua.isContainer)var Fa=Ua.tree;Ua.isTree&&(Fa=Ua);Fa&&Fa.showDropPreviewFor&&Fa.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Ua){var Fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return Fa.tree.treeData.add(Ua._data,Fa.node,Fa.node.children[0]),
Fa.tree.uncollapse(Fa.node),Fa.tree.treeData.remove(Fa.tree._previewNode),Wb.yield(Fa.tree.whenRendered(),2);Fa.tree.update(!0);Fa.onChildAdded(Ua);Wb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Ua,Fa){var Wb=this;debugger;this.tree._dropInProgress=!0;ta._get(Object.getPrototypeOf(Mc.prototype),"onBeingDroppedOn",this).call(this,Ua,Fa);Ua=function(){Wb.fill=Ma.Color.gray.withA(.5);Wb.opacity=1;Wb.tree._dropInProgress=!1;Wb.tree.refresh()};Fa.isTree?Fa.insertAtPlaceholder(this).then(Ua):
Fa.isContainer?Fa.insertAsChild(this).then(Ua):Ua()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ma.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Ua=this,Fa=this.tree.treeData;return Fa&&Fa.asList().find(function(Wb){return Wb.container===Ua})}}}}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:498,end:2975})}(Ma.Morph);Ma.InteractiveTreeContainer=Lb;Ma.InteractiveTreeContainer=Lb;Ma.InteractiveTreeContainer=Lb;Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Mc=Cc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Cc.InteractiveTreeData?Cc.InteractiveTreeData:Cc.InteractiveTreeData=function(Ua){Ua&&
Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"display",value:function(Ua){return[Ua.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Ua){return Ua.isCollapsed}},{key:"collapse",value:function(Ua,Fa){Ua.isCollapsed=Fa}},{key:"getChildren",value:function(Ua){var Fa=this;return Ua.isLeaf?null:Ua.children.filter(function(Wb){return Wb&&(Fa.filterActive?Wb.visible:!0)})}},{key:"isLeaf",value:function(Ua){var Fa=
this;return!Ua.children||0==Ua.children.filter(function(Wb){return Wb&&(Fa.filterActive?Wb.visible:!0)}).length}},{key:"add",value:function(Ua,Fa,Wb){Fa=void 0===Fa?this.root:Fa;Fa.children||(Fa.children=[]);Wb?Ma.arr.pushAt(Fa.children,Ua,Fa.children.indexOf(Wb)):Fa.children.push(Ua);Fa.isLeaf=!1}},{key:"replace",value:function(Ua,Fa){var Wb=this.parentNode(Ua);Ua=Wb.children.indexOf(Ua);Wb.children[Ua]=Fa}},{key:"next",value:function(Ua){var Fa=this.parentNode(Ua);return Fa&&Fa.children[Fa.children.indexOf(Ua)+
1]}},{key:"isBefore",value:function(Ua,Fa){this.next(Ua)===Fa}},{key:"isAfter",value:function(Ua,Fa){this.next(Fa)===Ua}},{key:"addBefore",value:function(Ua,Fa){this.add(Ua,this.parentNode(Fa),Fa)}},{key:"addAfter",value:function(Ua,Fa){var Wb=this.parentNode(Fa);Fa=Wb.children.indexOf(Fa)+1;this.add(Ua,Wb,Wb.children[Fa])}},{key:"remove",value:function(Ua){var Fa=this.parentNode(Ua);if(Fa)return Ma.arr.remove(Fa.children,Ua),Fa.children==[]&&(Fa.children=null),Ua}},{key:"filter",value:function(Ua,
Fa){Fa=void 0===Fa?1:Fa;var Wb=this,Bd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress)return pd.yield(Wb.uncollapseAll(function(Vd,qc){return qc<Fa+1}),2);Bd=Wb.filterActive;Wb.filterActive=!1;Wb.asListWithIndexAndDepth(!1).reverse().forEach(function(Vd){var qc=Vd.node;if(0==Vd.depth)return qc.visible=!0;qc.visible=Ua(qc);qc.visible||qc.isCollapsed||!qc.children.find(function(Ld){return Ld.visible})?qc.container.opacity=1:(qc.visible=!0,qc.container.opacity=.5);
return qc.visible});Wb.filterActive=Bd;pd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2984,end:5441})}(Ma.TreeData);Ma.InteractiveTreeData=Lb;Ma.InteractiveTreeData=Lb;Ma.InteractiveTreeData=
Lb;Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Mc=Cc.hasOwnProperty("InteractiveTree")&&"function"===typeof Cc.InteractiveTree?Cc.InteractiveTree:Cc.InteractiveTree=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"update",value:function(Ua){var Fa=this;ta._get(Object.getPrototypeOf(Mc.prototype),"update",this).call(this,Ua);this.treeData&&this.relayoutContainers();
Ua&&this.embeddedMorphs.forEach(function(Wb){Wb.isContainer&&(Wb.fill=Ma.Color.transparent,Wb.fontFamily=Fa.fontFamily,Wb.fontSize=Fa.fontSize)})}},{key:"onDrop",value:function(Ua){ta._get(Object.getPrototypeOf(Mc.prototype),"onDrop",this).call(this,Ua);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Ua){}},{key:"onDropHoverUpdate",value:function(Ua){}},{key:"onDropHoverOut",value:function(Ua){}},{key:"onHoverOut",value:function(Ua){var Fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){ta._get(Object.getPrototypeOf(Mc.prototype),
"onHoverOut",Fa).call(Fa,Ua);Fa._previewNode&&Fa._previewNode.container.world()&&Fa.treeData.remove(Fa._previewNode);Fa.resetContainerSelection();Fa.update(!0);Wb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Ua){var Fa=this,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return Wb=Fa.treeData.parentNode(Fa._previewNode),Fa.treeData.replace(Fa._previewNode,Ua._data),Fa.treeData.remove(Fa._previewNode),Bd.yield(Fa.whenRendered(),2);Fa.update(!0);
Wb.container.onChildAdded(Ua);Bd.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Ua=this;if(!this._scrollingUp){this._scrollingUp=!0;var Fa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return Ua._scrollingUp&&0<Ua.scroll.y?Wb.yield(Ua.animate({scroll:Ua.scroll.subXY(0,30),duration:300,easing:Ma.easings.linear}),3):(Ua._scrollingUp=!1,Wb.jumpTo(0));Fa();Wb.jumpToEnd()})};Fa()}}},{key:"scrollDownSlowly",value:function(){var Ua=this;if(!this._scrollingDown){this._scrollingDown=
!0;var Fa=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wb){if(1==Wb.nextAddress)return Ua._scrollingDown&&Ua.scroll.y<Ua.scrollExtent.y-Ua.height?Wb.yield(Ua.animate({scroll:Ua.scroll.addXY(0,30),duration:300,easing:Ma.easings.linear}),3):(Ua._scrollingDown=!1,Wb.jumpTo(0));Fa();Wb.jumpToEnd()})};Fa()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Ua){Ua.isContainer&&
(Ua.fill=Ma.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Ua){var Fa=this;Ua=this.localize(Ua.globalBounds().center());var Wb=this.textPositionFromPoint(Ua),Bd=this.treeData.asListWithIndexAndDepth(function(kb){kb=kb.node;return kb!=Fa._previewNode&&kb.container.world()}),pd=(Bd.find(function(kb){return kb.i-1===Wb.row})||{}).node,Vd=pd&&pd.container,qc=this.ensurePlaceholder(),Ld=!!qc.container.world(),Lc=Ua.subPt(this.scroll).subPt(this.scrollbarOffset);10>Lc.y?this.scrollUpSlowly():
Lc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Vd){if(Bd.length>Wb.row||Ma.arr.last(this.treeData.root.children)===qc)return;this.treeData.remove(qc);this.treeData.add(qc);this.update(!0)}if(Vd){Bd=this.textLayout.boundsFor(this,Wb);if(4>Math.abs(Bd.top()-Ua.y)){if(this.treeData.isBefore(qc,pd))return;this.treeData.remove(qc);this.treeData.addBefore(qc,pd)}else if(4>Math.abs(Bd.bottom()-Ua.y)&&(pd.isCollapsed||this.treeData.isLeaf(pd))){if(this.treeData.isAfter(qc,
pd))return;this.treeData.remove(qc);this.treeData.addAfter(qc,pd)}else{Vd.fill=Ma.Color.gray;if(!Ld)return;this.treeData.remove(qc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Ua=Ma.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:Ma.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Ma.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Ua;return this._previewNode}},{key:"relayoutContainers",
value:function(){var Ua=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Fa){return Fa.height});this.treeData.asListWithIndexAndDepth().forEach(function(Fa){var Wb=Fa.node;Fa=Fa.i;Wb.container.nativeCursor="grab";Wb.container.width=Ua.width-25-Wb.container.left;Wb.container.toggleSelected&&Wb.container.toggleSelected(Fa==Ua.selectedIndex)});this.anchors.forEach(function(Fa){return Fa.position=Fa.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5450,end:10824})}(Ma.Tree);Ma.InteractiveTree=Lb;Ma.InteractiveTree=Lb;Ma.InteractiveTree=Lb;Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Mc=Cc.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Cc.SceneGraphTree?Cc.SceneGraphTree:Cc.SceneGraphTree=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Ua){var Fa=this.treeData.asList().find(function(Wb){return Wb.container.target===Ua});Fa&&this.selectedNode!=Fa&&this.selectPath(this.treeData.pathOf(Fa))}},{key:"onLoad",
value:function(){var Ua=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return Ua.submorphs=[],Fa.yield(Ua.whenRendered(),2);Ua.get("inspector").makeEditorVisible(!0);Ua.get("inspector").makeEditorVisible(!1);Ua.setTarget($world);Fa.jumpToEnd()})}},{key:"adjustProportions",value:function(Ua){Ua=(Ua?Ua.state.dragDelta:{y:0}).y;var Fa=this.get("inspector"),Wb=this.get("scene graph resizer"),Bd=this.get("mode selector"),pd=this.get("connections tree");this.height+=
Ua;Fa.height-=Ua;pd.height-=Ua;Wb.top=this.bottom;Wb.left=0;Bd.top=Wb.bottom;pd.top=Fa.top=Bd.bottom+5}},{key:"reset",value:function(){var Ua=this;this.treeData=new Ma.InteractiveTreeData({children:[],container:Ma.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Fa){return null==Fa.id}).forEach(function(Fa){return Ua.removeAnchor(Fa)})}},{key:"setTarget",value:function(Ua){this.target=Ua;this.treeData=this.getTreeFromSubmorphHierarchy(Ua);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(Ua){var Fa=this;if(Ua===this._previewNode)return!1;if(Ua.container.nameNeedsUpdate)return!0;var Wb=Ua.container.target.submorphs.filter(function(Bd){return!Fa.ignoreMorph(Bd)});return Wb.length!=Ua.children.length||Wb.map(function(Bd){return Bd.name}).join("")!=Ua.children.map(function(Bd){return Bd.target?Bd.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Ua){var Fa=this,Wb=Ua.container.target.submorphs.map(function(Ld){return Ld.__scene_graph_target__?
Ld.__scene_graph_target__():Ld}).filter(function(Ld){return!Fa.ignoreMorph(Ld)}),Bd=[],pd={},Vd;for(Vd in Wb){pd.$jscomp$loop$prop$m$2417=Wb[Vd];var qc=Ma.arr.without(Ua.children,this._previewNode).find(function(Ld){return function(Lc){return Lc.container.target.id==Ld.$jscomp$loop$prop$m$2417.id}}(pd));Bd[Vd]=qc?qc:this.readMorphHierarchy(pd.$jscomp$loop$prop$m$2417);pd={$jscomp$loop$prop$m$2417:pd.$jscomp$loop$prop$m$2417}}return Bd}},{key:"refresh",value:function(){var Ua=this;if(!this._updating&&
!this._dropInProgress){var Fa=!1;Ma.tree.prewalk(this.treeData.root,function(Wb){Ua.isNodeOutOfSync(Wb)&&(Fa=!0,Wb.name=Wb.container.target.name,Wb.container.refresh(),Wb.children=Ua.getNewChildren(Wb))},function(Wb){return Wb.children});this.update(Fa)}}},{key:"ignoreMorph",value:function(Ua){return Ua.isMorph?Ua.isContainer||Ua.isWindow||Ua.getWindow()||Ua.isEpiMorph||Ua.isHand||["lively.halos"].includes(Ua.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(Ua.constructor.name):!1}},{key:"onDropHoverOut",value:function(Ua){var Fa=Ua.hand.grabbedMorphs[0];Ua=Ua.hand.findDropTarget();if(!(Ua===this||Ua&&Ua.ownerChain().includes(this))&&Fa&&Fa.isContainer)Fa.onDragOutside()}},{key:"onDropHoverIn",value:function(Ua){var Fa=Ua.hand.grabbedMorphs[0];Fa&&!Fa.isContainer&&($world.halos().forEach(function(Wb){return Wb.remove()}),Fa.remove(),Object.assign(Fa,Ua.hand._grabbedMorphProperties.get(Fa).pointerAndShadow),Fa=this.renderContainerFor(Fa,
!1),Ua.hand.grab(Fa),Fa.leftCenter=Ma.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Ua){return new Ma.InteractiveTreeData(this.readMorphHierarchy(Ua))}},{key:"readMorphHierarchy",value:function(Ua){var Fa=this;return Ma.tree.mapTree(Ua,function(Wb,Bd){return{name:Wb.name,isCollapsed:!0,container:Fa.renderContainerFor(Wb),visible:!0,children:Bd}},function(Wb){return Wb.submorphs.filter(function(Bd){return Wb.isWorld?!Fa.ignoreMorph(Bd):!0})})}},{key:"renderContainerFor",value:function(Ua,
Fa){Ua=void 0===Ua?Ma.morph({name:"root"}):Ua;Fa=new Ma.MorphContainer({tree:this,fill:void 0===Fa||Fa?Ma.Color.transparent:Ma.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Ua,opacity:Ua.visible?1:.5});Ua._data?(Fa._data=Ua._data,Ua._data.container=Fa):Fa._data={name:Ua.name,isCollapsed:!0,container:Fa,children:[]};return Fa}},{key:"collapseAll",value:function(){var Ua=this;this.treeData.asList().forEach(function(Fa){return Fa!=Ua.treeData.root?Fa.isCollapsed=
!0:Fa.isCollapsed=!1})}},{key:"filterMorphs",value:function(Ua){var Fa=this,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return Wb=Ua.tokens[0],Fa.treeData.filterActive||(Fa._collapseState=new WeakMap(Fa.treeData.asList().map(function(pd){return[pd,pd.isCollapsed]}))),Fa.treeData.filterActive=!!Wb,Bd.yield(Fa.treeData.filter(function(pd){var Vd=!Wb||pd.container.target.name.includes(Wb);pd.container.highlightTerm(Wb);return Vd},3),2);Fa.treeData.filterActive||
Fa.treeData.asList().forEach(function(pd){return pd.isCollapsed=Fa._collapseState.has(pd)?Fa._collapseState.get(pd):!0});Fa.refresh();Bd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10833,end:17350})}(Ma.InteractiveTree);Ma.SceneGraphTree=Lb;Ma.SceneGraphTree=Lb;Ma.SceneGraphTree=Lb;Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Mc=Cc.hasOwnProperty("MorphContainer")&&"function"===typeof Cc.MorphContainer?Cc.MorphContainer:Cc.MorphContainer=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"refresh",value:function(){var Ua=
this,Fa,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){Fa=Ua.target;if(!Fa)return Bd.return();Ua.reactsToPointer=!0;Ua.dropShadow=!1;Ua.submorphs=[Ua.getLabel(),Fa.layout&&Ua.getLayoutControls(),Ua.getConnectionControls()].filter(Boolean).map(function(pd,Vd){pd.fitIfNeeded();pd.left=Wb?Wb.right+5:0;pd.top=2;return Wb=pd});Ua.height=20;Ua.opacity=Fa.visible?1:.5;Bd.jumpToEnd()})}},{key:"getLabel",value:function(){var Ua=this.getSubmorphNamed("name label")||Ma.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:Ma.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Fa=Ua.textString.slice(2,-1);Fa&&Fa==this.target.name||(Ua.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Ua}},{key:"getIcon",value:function(Ua){return Ma.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Ma.getClassName(Ua)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Ua=this.getSubmorphNamed("layout label")||Ma.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Ma.Rectangle.inset(4,2,4,2),fill:Ma.Color.orange,fontColor:Ma.Color.white});Ua._isControlElement=!0;Ua.textString!=this.target.layout.name()&&(Ua.value=this.target.layout.name());return Ua}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(Wb){return!Wb.targetObj.isHalo}).length:0;var Ua=this.getSubmorphNamed("connections label")||Ma.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Ma.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Ma.Color.red,fontColor:Ma.Color.white});Ua._isControlElement=!0;Ua.visible=!this.connectionHalo&&!!this.connectionCount;var Fa=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Ua.textString!=Fa&&(Ua.value=Fa);return Ua}},{key:"highlightTerm",value:function(Ua){var Fa=this.submorphs[0],Wb=Fa.textAndAttributes.slice(0,2),Bd=Fa.textString.slice(1).split(Ua);Fa.textAndAttributes=1===Bd.length?[].concat($jscomp.arrayFromIterable(Wb),[Bd[0]]):[].concat($jscomp.arrayFromIterable(Wb),$jscomp.arrayFromIterable(Ma.arr.flatten(Ma.arr.interpose(Bd.map(function(pd){return[pd,{}]}),[Ua,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Ua){var Fa=ta._get(Object.getPrototypeOf(Mc.prototype),"wantsToBeDroppedOn",this).call(this,Ua);if(![Ua].concat($jscomp.arrayFromIterable(Ua.ownerChain())).includes(this.tree))this.onDragOutside();return Fa}},{key:"onGrab",value:function(Ua){var Fa=this,Wb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return Fa.tree._dropInProgress=!0,Wb=Fa.target.globalPosition,ta._get(Object.getPrototypeOf(Mc.prototype),
"onGrab",Fa).call(Fa,Ua),Fa._data.globalTargetPosition=Wb,Bd.yield(Fa.whenRendered(),2);if(Fa.tree.fullContainsWorldPoint(Fa.globalPosition))Fa.leftCenter=Ma.pt(-20,0);else Fa.onDragOutside();Fa.tree._dropInProgress=!1;Bd.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Ma.fun.createQueue("container-hover-queue",function(Ua,Fa){var Wb,Bd,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vd){if(1==Vd.nextAddress)return Wb=
Ua.target,Bd=Wb.opacity,pd=Wb.scale,Ua.target.opacity=0,Ua.target.scale=.5,$world.halos().forEach(function(qc){return qc.remove()}),$world.firstHand.grab(Ua.target),Ua.target._data=Ua._data,Ua.remove(),Ua.target.position=Ma.pt(0,0),Vd.yield(Ua.target.animate({opacity:Bd,scale:pd,duration:200}),2);Fa();Vd.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Ua){var Fa=this.node.children.indexOf(Ua.node||Ua._data)+1;Fa=this.node.children[Fa];Ua.target.remove();Fa?(Fa=this.target.submorphs.indexOf(Fa.container.target),
this.target.addMorphAt(Ua.target,Fa)):this.target.addMorph(Ua.target);Ua._data.globalTargetPosition&&(Ua.target.position=this.target.localize(Ua._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Ua){}},{key:"toggleConnectionControl",value:function(Ua){this.getSubmorphNamed("connections label").visible=Ua}},{key:"toggleSelected",value:function(Ua){var Fa=this,Wb,Bd,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vd){if(1==Vd.nextAddress)return ta._get(Object.getPrototypeOf(Mc.prototype),
"toggleSelected",Fa).call(Fa,Ua),Fa._active===Ua?Vd.return():(Fa._active=Ua)&&Fa.target&&Fa.target.isMorph&&Fa.world()?Vd.yield(Fa.target.whenRendered(),3):Vd.jumpTo(0);Fa.get("inspector").targetObject=Fa.target;Fa.get("connections tree").inspectConnectionsOf(Fa.target);if(Fa.connectionHalo)return Vd.return();Wb=$jscomp.makeIterator(Fa.world().halos());for(Bd=Wb.next();!Bd.done;Bd=Wb.next()){pd=Bd.value;if(pd.target===Fa.target)return Vd.return();pd.remove()}Ma.noUpdate({sourceObj:Fa.world(),targetObj:Fa.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Fa.world().showHaloFor(Fa.target)});Vd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Ua){this.submorphs[0].fontFamily=Ua}},fontColor:{after:["submorphs"],derived:!0,set:function(Ua){this.submorphs[0].fontColor=Ua}},fontSize:{derived:!0,set:function(Ua){this.submorphs[0].fontSize=
Ua}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Cc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17359,end:25031})}(Ma.InteractiveTreeContainer);Ma.MorphContainer=Lb;Ma.MorphContainer=Lb;Ma.MorphContainer=Lb;var tc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");tc.visualizeConnection=function($a,Cc,Mc,Ua,Fa){Ua=void 0===Ua?{}:Ua;Fa=tc.rect(0).sides.concat(tc.rect(0).corners);
Mc=Mc||new tc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:tc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:tc.Color.transparent,nativeCursor:"auto"},end:{fill:tc.Color.orange}}},Ua,{hasFixedPosition:!0}));Mc.startPoint.attachTo($a,"rightCenter");Cc.isMorph?(Ua=Cc.globalBounds().partNameNearest(Fa,$a.globalPosition),$a.globalPosition.equals(Cc.globalBounds().partNamed(Ua))&&Cc.globalBounds().partNameNearest(tc.arr.without(Fa,Ua),$a.globalPosition),Mc.endPoint.attachTo(Cc,
"leftCenter")):(Fa=$a.globalBounds().topRight().addPt(tc.pt(100,0)),Cc=tc.morph({type:"label",value:Cc.toString(),styleClasses:["Tooltip"],padding:tc.rect(8,4)}).openInWorld(Fa),Cc.position=$a.world().bounds().translateForInclusion(Cc.bounds()).topLeft(),tc.once(Mc,"remove",Cc,"remove"),Mc.endPoint.attachTo(Cc,"leftCenter"));return Mc};tc.startConnecting=function($a,Cc){$a.animate({opacity:.8,duration:300});$a.startPoint.attachTo(Cc,"center");$a.vertices[0].position=tc.pt(2,2)};tc.stopConnecting=
function($a,Cc,Mc,Ua){function Fa(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vd){if(1==Vd.nextAddress)return Vd.yield($a.animate({opacity:0,duration:300}),2);$a.startPoint.clearConnection();$a.endPoint.clearConnection();$a.remove();Vd.jumpToEnd()})}Ua=void 0===Ua?!1:Ua;var Wb,Bd,pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vd){return 1==Vd.nextAddress?(Wb=$a,Bd=Wb.endPoint,(pd=Bd.connectedMorph)&&"MorphContainer"==pd.constructor.className&&(pd=pd.target),pd?Vd.yield(tc.interactiveConnectGivenSourceAndTarget(Mc,
Ua,pd),2):Vd.jumpTo(2)):Vd.yield(Fa(),0)})};tc.editConnection=function($a){var Cc=$a.connection,Mc=$a.connectionPoint,Ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return Ua=tc.visualizeConnection(Mc,Cc.targetObj,!1,{borderColor:tc.Color.gray.darker(),endpointStyle:{start:{fill:tc.Color.transparent,nativeCursor:"auto"},end:{fill:tc.Color.gray.darker()}}}),Fa.yield(tc.interactivelyReEvaluateConnection(Cc,"Edit Connection",!1),2);Ua.remove();Fa.jumpToEnd()})};
tc.Tree=Ub;tc.TreeData=Xb;tc.Icon=Sb;tc.morph=id;tc.pt=Hb;tc.Rectangle=bb;tc.rect=Fc;tc.Color=Hc;tc.arr=Sc;tc.connect=Dc;tc.signal=eb;tc.Leash=ub;tc.once=Na;tc.interactivelyReEvaluateConnection=Eb;tc.interactiveConnectGivenSource=sa;tc.interactiveConnectGivenSourceAndTarget=xa;(function($a){var Cc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Mc=Cc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Cc.ConnectionsTreeData?Cc.ConnectionsTreeData:Cc.ConnectionsTreeData=function(Ua){Ua&&
Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(Mc,$a,[{key:"parseMorphConnections",value:function(Ua){for(var Fa={},Wb=$jscomp.makeIterator(void 0===Ua.attributeConnections?[]:Ua.attributeConnections),Bd=Wb.next();!Bd.done;Bd=Wb.next())Bd=Bd.value,Bd.targetObj.isHalo||(Fa[Bd.sourceAttrName]=Fa[Bd.sourceAttrName]||[{name:["      New Connection  ",{fontColor:tc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ua,Bd.sourceAttrName),
{}]}],tc.arr.pushAt(Fa[Bd.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Bd)))},0));return{children:Object.entries(Fa).map(function(pd){var Vd=$jscomp.makeIterator(pd);pd=Vd.next().value;Vd=Vd.next().value;return{name:[pd,{fontWeight:"bold"}," ",{},tc.morph({fill:tc.Color.white,opacity:.7,value:""+(Vd.length-1),borderRadius:15,fontWeight:"bold",padding:tc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Vd}}).concat([{name:["New Connection  ",
{fontColor:tc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Ua),{}]}])}}},{key:"renderExistingConnection",value:function(Ua){var Fa=this,Wb=tc.morph({type:"label",fontColor:tc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(tc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Ua.targetMethodName,{}])}),Bd=this.renderDeadPin(),pd=Bd.submorphs[0];tc.connect(Wb,"onHoverIn",function(){Wb.fontColor=tc.Color.orange;Wb._leash=tc.visualizeConnection(pd,
Ua.targetObj,Wb._leash);pd.fill=tc.Color.orange;pd.border={color:tc.Color.orange,width:3}});tc.connect(Wb,"onMouseDown",function(Vd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return Vd.stop(),qc.yield(tc.interactivelyReEvaluateConnection(Ua),2);tc.signal(Fa,"refresh");qc.jumpToEnd()})});tc.connect(Wb,"onHoverOut",function(){Wb.fontColor=tc.Color.gray;pd.fill=tc.Color.gray;pd.border={color:tc.Color.white,width:1};Wb._leash.remove();Wb._leash=void 0});return[Wb,
{},"  ",{}].concat($jscomp.arrayFromIterable(tc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Ua.disconnect();tc.signal(Fa,"refresh")}})),["  ",{},Bd,{}])}},{key:"renderDeadPin",value:function(){var Ua=tc.morph({type:"ellipse",fill:tc.Color.gray,extent:tc.pt(10,10),center:tc.pt(8,12),borderWidth:1});return tc.morph({extent:tc.pt(20,20),fill:tc.Color.transparent,reactsToPointer:!1,submorphs:[Ua]})}},{key:"renderPin",value:function(Ua,Fa){var Wb=this,Bd=tc.morph({type:"ellipse",
fill:tc.Color.gray.withA(.5),extent:tc.pt(10,10),center:tc.pt(8,12),draggable:!1,borderWidth:1}),pd=new tc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:tc.Color.gray.darker(),endpointStyle:{fill:tc.Color.gray.darker()},position:tc.pt(1,1),vertices:[tc.pt(0,0),tc.pt(0,0)],canConnectTo:function(Vd){return"MorphContainer"==Vd.constructor.className||2>tc.arr.intersect([Vd].concat($jscomp.arrayFromIterable(Vd.ownerChain())),[Bd].concat($jscomp.arrayFromIterable(Bd.ownerChain()))).length}});
Bd.addMorph(pd);tc.connect(pd.endPoint,"onDragStart",function(){tc.startConnecting(pd,Bd)});tc.connect(pd.endPoint,"onDragEnd",function(Vd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){if(1==qc.nextAddress)return Bd.center=tc.pt(8,12),qc.yield(tc.stopConnecting(pd,Bd,Ua,Fa),2);tc.signal(Wb,"refresh");qc.jumpToEnd()})});return tc.morph({extent:tc.pt(20,20),fill:tc.Color.transparent,reactsToPointer:!1,submorphs:[Bd]})}},{key:"display",value:function(Ua){return Ua.name}},{key:"collapse",
value:function(Ua,Fa){Ua.isCollapsed=Fa}},{key:"isCollapsed",value:function(Ua){return Ua.isCollapsed}},{key:"isLeaf",value:function(Ua){return!Ua.children}},{key:"getChildren",value:function(Ua){return Ua.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Ua){var Fa=new this;Fa.root=Fa.parseMorphConnections(Ua);return Fa}}],Cc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3524,end:8076})})(tc.TreeData);Lb=function($a){var Cc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Mc=Cc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Cc.ConnectionsTree?Cc.ConnectionsTree:Cc.ConnectionsTree=function(Ua){Ua&&Ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ta(Mc,$a,[{key:"inspectConnectionsOf",value:function(Ua){if(this.targetMorph=Ua)this.treeData=tc.ConnectionsTreeData.for(Ua),tc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=tc.ConnectionsTreeData.for(this.targetMorph),tc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Cc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8093,end:8646})}(tc.Tree);Lb=tc.ConnectionsTree;tc.default=Lb}}});