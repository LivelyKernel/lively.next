System.register("./__root_module__-590131e3.js ./index-2bc8c0f4.js ./color-picker-88b3ebcc.js ./index-10a530fb.js ./index-9f5d09ef.js ./index-115582dd.js".split(" "),function(){var Sa,Lb,Vb,Fc,jc,sd,kd,Cd,ed,Zc,bd,yd,ke,ue,He,ld,Wd,gc,cd,Bd,hd,Jd,de,Zb,Ic,Ad,Jc,zd,Mb,mb,Bc,xc,ec,Dc;return{setters:[function(Ta){Sa=Ta.f;Lb=Ta.s;Vb=Ta.Y;Fc=Ta.aw;jc=Ta.a;sd=Ta.K;kd=Ta.g;Cd=Ta.af;ed=Ta.aa;Zc=Ta.m;bd=Ta.M;yd=Ta.I;ke=Ta.b;ue=Ta.R;He=Ta.C;ld=Ta.c;Wd=Ta._;gc=Ta.o;cd=Ta.bF;Bd=Ta.bC;hd=Ta.a4;Jd=Ta.i;de=
Ta.t;Zb=Ta.e;Ic=Ta.bz;Ad=Ta.d;Jc=Ta.bN;zd=Ta.r;Mb=Ta.P;mb=Ta.bO;Bc=Ta.bP},function(Ta){xc=Ta.I},function(Ta){ec=Ta.a;Dc=Ta.S},function(){},function(){},function(){}],execute:function(){var Ta=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Ta.fun=Sa;Ta.string=Lb;Ta.obj=Vb;Ta.properties=Fc;Ta.arr=jc;Ta.Text=sd;Ta.config=kd;Ta.HorizontalLayout=Cd;Ta.VerticalLayout=ed;Ta.morph=Zc;Ta.Morph=bd;Ta.Icon=yd;Ta.pt=ke;Ta.Rectangle=ue;Ta.Color=He;Ta.connect=ld;Ta.disconnect=Wd;Ta.once=gc;Ta.noUpdate=
cd;Ta.ColorPicker=ec;Ta.DropDownList=Bd;Ta.loadObjectFromPartsbinFolder=hd;Ta.cachedControls=new WeakMap;var hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Oa=ac.hasOwnProperty("RichTextControl")&&"function"===typeof ac.RichTextControl?ac.RichTextControl:ac.RichTextControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"toggleButton",value:function(Da,ka){Da.master=
ka?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var Da=this.ui.fontSelection;Da.items=Ta.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Ta.config.text.basicFontItems)));this.target&&(Da.selection=this.target.fontFamily||Da.items[0].value,Ta.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(Da){Da=
void 0===Da?!!this.world():Da;var ka=this.target,Ba=ka.world()||$world,Ja=this.globalBounds();ka=(ka.selection.isEmpty()?ka.globalBounds():ka.getGlobalTransform().transformRectToRect(ka.selectionBounds().translatedBy(ka.scroll.negated()))).bottomCenter().subPt(Ja.topCenter());Ba=Ba.visibleBounds().translateForInclusion(Ja.translatedBy(ka)).topLeft().subPt(Ja.topLeft());Ba=this.position.addPt(Ba);Da?this.animate({duration:300,position:Ba}):this.position=Ba}},{key:"removeFocus",value:function(){var Da=
this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ka){return ka.targetObj===Da&&ka.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Da,ka){ka=void 0===ka?!0:ka;var Ba=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return Ba.target&&Ta.disconnect(Ba.target,"selectionChange",Ba,"update"),Ba.target=Da,Ba.reset(),Ba.update(),Ja.yield(Ba.whenRendered(),
2);Ba.ui.fontSizeField.relayout();ka&&Ba.alignAtTarget();Ja.jumpToEnd()})}},{key:"setupConnections",value:function(){Ta.connect(this.ui.paddingField,"number",this,"setPadding");Ta.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Ta.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Ta.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Ta.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Da=this,ka=
this.target,Ba=this.updateSpec,Ja=ka.selection;Ja=!ka.readOnly&&Ja?Ja.isEmpty()?ka.textAttributeAt(Ja.start):ka.getStyleInRange(Ja):{};var Fb=this.managedProps,va=Ta.obj.select(ka,Fb);ka=$jscomp.makeIterator(Object.entries(Ta.obj.select(Ja||{},Fb)));for(Ja=ka.next();!Ja.done;Ja=ka.next())Fb=$jscomp.makeIterator(Ja.value),Ja=Fb.next().value,Fb=Fb.next().value,"undefined"!==typeof Fb&&(va[Ja]=Fb);Ta.noUpdate(function(){for(var Ka=$jscomp.makeIterator(Object.entries(Da.ui)),Rb=Ka.next();!Rb.done;Rb=
Ka.next()){var eb=$jscomp.makeIterator(Rb.value);Rb=eb.next().value;eb=eb.next().value;if(Ba[Rb])Ba[Rb](va,eb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(Da,ka){var Ba=this.target,Ja=Ba.selection;Ba.isLabel||Ja&&Ja.isEmpty()?Ba[Da]="function"===typeof ka?ka(Ba[Da]):ka:(Ba.undoManager.group(),Ba.changeStyleProperty(Da,function(Fb){return"function"===typeof ka?ka(Fb):ka}),Ba.undoManager.group())}},{key:"changeFont",value:function(Da){var ka=this,
Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return ka._last=Da,(Ba="custom..."===Da)?Ja.yield($world.prompt("Enter font family name",{requester:ka.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Ja.jumpTo(2);if(2!=Ja.nextAddress&&(Da=Ja.yieldResult,!Da))return Ja.return();ka.changeAttributeInSelectionOrMorph("fontFamily",Da);Ja.jumpToEnd()})}},{key:"setPadding",value:function(Da){this.target.padding=Ta.Rectangle.inset(Da)}},{key:"setPaddingTop",
value:function(Da){var ka=this.target.padding;this.target.padding=Ta.Rectangle.inset(ka.left(),Da,ka.right(),ka.bottom())}},{key:"setPaddingLeft",value:function(Da){var ka=this.target.padding;this.target.padding=Ta.Rectangle.inset(Da,ka.top(),ka.right(),ka.bottom())}},{key:"setPaddingRight",value:function(Da){var ka=this.target.padding;this.target.padding=Ta.Rectangle.inset(ka.left(),ka.top(),Da,ka.bottom())}},{key:"setPaddingBottom",value:function(Da){var ka=this.target.padding;this.target.padding=
Ta.Rectangle.inset(ka.left(),ka.top(),ka.right(),Da)}},{key:"setLineWrapping",value:function(Da){this.target.lineWrapping=Da}},{key:"changeFontWeight",value:function(Da){this.changeAttributeInSelectionOrMorph("fontWeight",Da)}},{key:"changeTextAlign",value:function(Da){this.changeAttributeInSelectionOrMorph("textAlign",Da)}},{key:"changeFontColor",value:function(Da){this.changeAttributeInSelectionOrMorph("fontColor",Da)}},{key:"changeFontSize",value:function(Da){this.changeAttributeInSelectionOrMorph("fontSize",
Da)}},{key:"changeFixedWidth",value:function(Da){this.target.fixedWidth=Da}},{key:"changeFixedHeight",value:function(Da){this.target.fixedHeight=Da}},{key:"changeLink",value:function(){var Da=this,ka,Ba,Ja,Fb,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return ka=Da.target,Ba=ka.selection,Ja=ka.getStyleInRange(Ba),Fb=Ja.link,Ka.yield(Da.world().prompt("Set link",{input:Fb||"https://"}),2);va=Ka.yieldResult;ka.undoManager.group();ka.setStyleInRange({link:va||
void 0},Ba);ka.undoManager.group();Da.autoRemove&&Da.remove();Ka.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Da){return"underline"===Da?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Da){return"italic"===Da?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Da){return"bold"===Da||"700"===
Da?"normal":"bold"})}},{key:"copyStyle",value:function(){var Da=this,ka=this.target,Ba=this.ui.applyStyleButton;ka=ka.selection.isEmpty()?ka.defaultTextStyle:ka.getStyleInRange(ka.selection);var Ja=JSON.stringify(ka,null,2);this.constructor.copiedStyle=ka;Ba.tooltip="paste style\n"+Ja;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Ja},{type:"application/morphic-text-style",styleString:Ja}]).then(function(){return Da.setStatusMessage("Copied style\n"+Ja)}).catch(function(Fb){return Da.showError(Fb)})}},
{key:"pasteStyle",value:function(){var Da=this,ka=this.target,Ba=this.constructor.copiedStyle;ka.selection.isEmpty()?Object.assign(ka,Ba):ka.selections.forEach(function(Ja){return ka.addTextAttribute(Da.constructor.copiedStyle,Ja)});this.update()}},{key:"clearStyle",value:function(){var Da=this.target;Da.selections.forEach(function(ka){return Da.resetStyleInRange(ka)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();
var Da=this.defaultSpec,ka=this.uiSpec;Da=this.addMorph({name:"config panel",layout:new Ta.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Da).map(function(Ba){var Ja=ka.rows.some(function(Fb){return Fb.some(function(va){return va===Ba})});return{type:"labeledcheckbox",label:Ba,name:Ba,checked:Ja}})),[{layout:new Ta.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});
Da.center=this.innerBounds().center();Ta.connect(Da.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");Ta.connect(Da.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var Da=this.getSubmorphNamed("config panel");Da&&(Da.remove(),Da.submorphs.filter(function(ka){return"LabeledCheckBox"===ka.constructor.name}))}},{key:"configureCanceled",value:function(){var Da=this.getSubmorphNamed("config panel");Da&&Da.remove()}},{key:"close",
value:function(){var Da=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ka){return ka.targetObj===Da&&ka.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Da=this.world();Da&&(Da=Da.focusedMorph)&&(Da.isLabel||Da.isText)&&!this.isAncestorOf(Da)&&this.target!==Da&&this.focusOn(Da,!1)}},{key:"onMouseUp",value:function(Da){var ka=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return Ba.yield(ka.whenRendered(),2);ka.update();Ba.jumpToEnd()})}},{key:"attachToWorld",value:function(){Ta.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},
selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Da=this;return Object.assign({fontSelection:function(ka,Ba){var Ja=ka.fontFamily;(ka=Ja&&Ba.items.find(function(Fb){return Fb.value.toLowerCase()===Ja.toLowerCase()}))?Ba.selection=ka.value:Ja&&(Ba.items=
Ba.items.concat({isListItem:!0,label:[Ja,{fontFamily:Ja}],value:Ja}),Ba.selection=Ta.arr.last(Ba.items))},fontWeightSelection:function(ka,Ba){Ba.selection="normal"==ka.fontWeight?"Medium":ka.fontWeight?Ta.string.capitalize(ka.fontWeight):"Medium"},boldButton:function(ka,Ba){Da.toggleButton(Ba,"bold"===ka.fontWeight)},italicButton:function(ka,Ba){Da.toggleButton(Ba,"italic"===ka.fontStyle)},underlineButton:function(ka,Ba){Da.toggleButton(Ba,"underline"===ka.textDecoration)},linkButton:function(ka,
Ba){Da.toggleButton(Ba,!!ka.link)},colorPicker:function(ka,Ba){Ba.colorValue=ka.fontColor},fontSizeField:function(ka,Ba){Ba.number=ka.fontSize},fixedWidthControl:function(ka,Ba){ka.isText?Ba.enable():Ba.disable();Ba.checked=ka.fixedWidth},fixedHeightControl:function(ka,Ba){ka.isText?Ba.enable():Ba.disable();Ba.checked=ka.fixedHeight},lineWrappingControl:function(ka,Ba){var Ja=$jscomp.makeIterator(Ba.submorphs);Ba=Ja.next().value;Ja=Ja.next().value;Ba.checked=!!ka.lineWrapping;ka.isText?Ba.enable():
Ba.disable();Ja.deactivated=!ka.lineWrapping;Ja.deactivated?Ja.opacity=.5:(Ja.opacity=1,Ja.selection=ka.lineWrapping)},paddingControl:function(ka,Ba){var Ja=ka.padding,Fb=Ja.left();ka=Ja.top();var va=Ja.right();Ja=Ja.bottom();var Ka=!Ta.arr.every([Fb,ka,va,Ja],function(Rb){return Rb==Fb});Ba.get("multi value indicator").visible=Ka;Ta.connect(Ba.get("multi value indicator"),"onMouseDown",Ba.get("padding field"),"number",{converter:"() => left",varMapping:{left:Fb}});try{Ba.get("padding field").number=
Fb,Ba.get("padding field").visible=!Ka,Ba.get("padding field top").number=ka,Ba.get("padding field left").number=Fb,Ba.get("padding field right").number=va,Ba.get("padding field bottom").number=Ja}catch(Rb){}}},["left","center","right","block"].reduce(function(ka,Ba){ka[Ba+"Align"]=function(Ja,Fb){Fb.deactivated=!Ja.isText;Da.toggleButton(Fb,Ja.textAlign==Ba)};return ka},{}))}},ui:{get:function(){var Da=this,ka={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",
italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",
paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Ta.obj.extract(ka,Ta.obj.keys(ka),function(Ba,Ja){return Da.getSubmorphNamed(Ja)})}}}}},{key:"openDebouncedFor",value:function(Da){var ka=Da.selection;if(ka.isEmpty()){var Ba=Ta.cachedControls.get(Da);Ba&&(Ba.update(),Ba.alignAtTarget(),Ba.world()||Da.world().addMorph(Ba))}else Ta.fun.debounceNamed(Da.id+"openRichTextControl",600,function(){var Ja=
Ta.cachedControls.get(Da);ka.isEmpty()?Ja&&Ja.removeFocus():(Ja&&Ja.world()||(Ja=new Ta.RichTextControl,Ta.cachedControls.set(Da,Ja)),Da.world().addMorph(Ja),Ja.focusOn(Da,!0),Ja.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Da){var ka=Ta.cachedControls.get(Da);ka?ka.update():(ka=new Ta.RichTextControl,Ta.cachedControls.set(Da,ka),ka.focusOn(Da,!0),ka.alwaysTargetFocusedMorph());ka.alignAtTarget();ka.world()||Da.world().addMorph(ka);return ka}}],ac,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17716})}(Ta.Morph);Ta.RichTextControl=hc;Ta.RichTextControl=hc;Ta.RichTextControl=hc;var Eb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Eb.Morph=bd;Eb.touchInputDevice=de;Eb.morph=Zc;Eb.Icon=yd;Eb.easings=Zb;Eb.pt=ke;Eb.Color=He;Eb.fun=Sa;Eb.connect=ld;Eb.TreeData=
Ic;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Oa=ac.hasOwnProperty("SettingsTree")&&"function"===typeof ac.SettingsTree?ac.SettingsTree:ac.SettingsTree=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"display",value:function(Da){return Da.panel?[Da.panel,{}]:Da.name}},{key:"collapse",value:function(Da,ka){Da.isCollapsed=ka}},{key:"isCollapsed",value:function(Da){return Da.isCollapsed}},
{key:"isLeaf",value:function(Da){return!Da.children}},{key:"getChildren",value:function(Da){var ka=this;return Da===this.root?Da.children.filter(function(Ba){return ka.target&&Ba.applicabilityCheck?eval(Ba.applicabilityCheck)(ka.target):!0}):Da.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("font")),
[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("grip-vertical")),
[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Eb.morph({height:20}),
{}],children:[{panel:Eb.morph({})}]}]})}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(Eb.TreeData);Eb.SettingsTree=hc;Eb.SettingsTree=hc;Eb.SettingsTree=hc;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Oa=ac.hasOwnProperty("StylingSideBar")&&
"function"===typeof ac.StylingSideBar?ac.StylingSideBar:ac.StylingSideBar=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Da){Da.nodes.forEach(function(ka){return Da.treeData.root==ka?Da.uncollapse(ka):Da.collapse(ka)})})}},{key:"onWorldResize",value:function(Da){Da=
void 0===Da?!0:Da;if(this.respondsToVisibleWindow){var ka=$world.visibleBounds(),Ba=navigator.standalone&&Eb.touchInputDevice?25:0,Ja=this.getSubmorphNamed("horizontal resizer");this.height=ka.height-Ba;this.top=Ba+ka.top();Ja.height=this.height;Ja.left=0;Ja.top=0;Da&&(this.visible?this.topRight=ka.topRight():this.topLeft=ka.topRight())}}},{key:"toggle",value:function(Da){var ka=this,Ba,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fb){switch(Fb.nextAddress){case 1:Ba=$world.visibleBounds();
Ja=navigator.standalone&&Eb.touchInputDevice?25:0;ka.height=Ba.height-Ja;ka.top=Ja+Ba.top();if(Da)return $world.addMorph(ka,$world.get("lively top bar")),ka.topLeft=Ba.topRight(),ka.visible=!0,Fb.yield(ka.whenRendered(),5);ka.detachFromWorld($world);return Fb.yield(ka.animate({opacity:0,topLeft:Ba.topRight(),duration:300}),4);case 4:ka.visible=!1;ka.remove();Fb.jumpTo(0);break;case 5:return ka.onWorldResize(!1),Fb.yield(ka.animate({opacity:1,easing:Eb.easings.outCirc,topRight:Ba.topRight(),duration:300}),
6);case 6:ka.attachToWorld($world),Fb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Da=this.withAllSubmorphsSelect(function(Fb){return Fb.anchors&&Fb.anchors.filter(function(va){return!va.id}).length}),ka={},Ba=$jscomp.makeIterator(Da),Ja=Ba.next();!Ja.done;ka={$jscomp$loop$prop$m$2985:ka.$jscomp$loop$prop$m$2985},Ja=Ba.next())ka.$jscomp$loop$prop$m$2985=Ja.value,ka.$jscomp$loop$prop$m$2985.anchors.forEach(function(Fb){return function(va){return!va.id&&Fb.$jscomp$loop$prop$m$2985.removeAnchor(va)}}(ka));
return Da.length}},{key:"attachToWorld",value:function(Da){Eb.connect(Da,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Da){var ka=this;Da.attributeConnections.forEach(function(Ba){Ba.targetObj===ka&&Ba.disconnect()})}},{key:"focusMorph",value:function(Da){if(!Da.isMorph||!Da.ownerChain().includes(this)){(Da.isLabel||Da.isText||Da.isButton)&&this.richTextControl.focusOn(Da,!1);var ka=this.getSubmorphNamed("style settings tree");ka.treeData.target=Da;ka.update(!0);
Object.values(this.controls).forEach(function(Ba){return Ba&&Ba.focusOn(Da)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Da){return Da&&Da.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(Eb.Morph);hc=Eb.StylingSideBar;Eb.default=hc;var tc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");tc.Morph=bd;tc.obj=Vb;tc.string=Lb;tc.connect=ld;tc.noUpdate=cd;tc.once=gc;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Oa=ac.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof ac.ShapeFormatStyler?
ac.ShapeFormatStyler:ac.ShapeFormatStyler=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:Symbol.for("lively-instance-initialize"),value:function(Da){Jd._get(Object.getPrototypeOf(Oa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Da);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Da=this.ui,ka={},Ba=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Ja=Ba.next();!Ja.done;ka={$jscomp$loop$prop$control$2987:ka.$jscomp$loop$prop$control$2987,$jscomp$loop$prop$prop$2988:ka.$jscomp$loop$prop$prop$2988},Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value);Ja=Fb.next().value;Fb=$jscomp.makeIterator(Fb.next().value);Fb.next();var va=Fb.next().value;ka.$jscomp$loop$prop$prop$2988=Fb.next().value;ka.$jscomp$loop$prop$control$2987=Da[Ja];tc.connect(ka.$jscomp$loop$prop$control$2987,va,this,"updateTarget",{updater:function(Ka){return function(Rb,eb){Ka.$jscomp$loop$prop$control$2987._updating=
!0;Rb(Ka.$jscomp$loop$prop$prop$2988,eb);Ka.$jscomp$loop$prop$control$2987._updating=!1}}(ka),varMapping:{prop:ka.$jscomp$loop$prop$prop$2988,control:ka.$jscomp$loop$prop$control$2987}})}}},{key:"update",value:function(){var Da=this,ka=this.target,Ba=ka.top,Ja=ka.left,Fb=ka.isImage,va=ka.isLabel,Ka=ka.imageUrl,Rb=ka.textString,eb=ka.clipMode,Vc=ka.fill,Qb=ka.dropShadow,qd=ka.opacity,Wc=ka.height,Mc=ka.width;ka=this.ui;var Hb=ka.clipModeSelector,Xd=ka.fillPicker,Tb=ka.opacityField,Gb=ka.shadowPicker,
Pa=ka.heightField,ca=ka.widthField,Ha=ka.posXField,cb=ka.posYField,Pb=ka.imageUrlInput,sc=ka.labelContentInput;tc.noUpdate(function(){Da.updateControl(Gb,"shadowValue",Qb);Da.updateControl(Hb,"selection",eb);Da.updateControl(Xd,"colorValue",Vc);Da.updateControl(Tb,"number",qd);Da.updateControl(Pa,"number",Wc);Da.updateControl(ca,"number",Mc);Da.updateControl(Ha,"number",Ja);Da.updateControl(cb,"number",Ba);Xd.context=Da.target;Fb&&Da.updateControl(Pb,"input",Ka);Pb.owner.isLayoutable=Pb.owner.visible=
!!Fb;va&&Da.updateControl(sc,"input",Rb);sc.owner.isLayoutable=sc.owner.visible=!!va;var Xc=Da.getSubmorphNamed("special controls");(Xc.visible=!!va||!!Fb)?Da.height=Xc.bottom:Da.height=Xc.top})}},{key:"updateTarget",value:function(Da,ka){this.target[Da]=ka;this.update()}},{key:"updateControl",value:function(Da,ka,Ba){Da._updating||tc.obj.equals(Da[ka],Ba)||(Da[ka]=Ba)}},{key:"updateMultiValue",value:function(Da,ka,Ba){var Ja=this.ui,Fb=Ja[this.join(Da)],va=Fb.get("multi value indicator"),Ka=tc.obj.values(ka).some(function(Rb){return!tc.obj.isFunction(Rb)&&
!tc.obj.equals(Rb,ka.valueOf())});va.left=0;Fb.visible=Fb.isLayoutable=!Ka;if(Ka&&va.visible!=Ka)tc.once(va,"onMouseDown",Fb,Ba,{converter:function(){return ka.valueOf()},varMapping:{value:ka}});va.visible=va.isLayoutable=Ka;va.left=Ka?200:0;this.updateControl(Fb,Ba,ka.valueOf());Fb=$jscomp.makeIterator(["top","left","bottom","right"]);for(va=Fb.next();!va.done;va=Fb.next())va=va.value,Ka=Ja[this.join(Da,va)],this.updateControl(Ka,Ba,ka[va])}},{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+
Da.slice(1)}},{key:"join",value:function(Da,ka){return this.lower(tc.string.camelCaseString(Da+(ka?" "+ka:"")))}},{key:"unwrap",value:function(Da,ka,Ba){var Ja={};Ja=(Ja[this.lower(tc.string.camelCaseString(Da))]=[Da,ka,Ba],Ja);for(var Fb=$jscomp.makeIterator(["top","left","bottom","right"]),va=Fb.next();!va.done;va=Fb.next()){va=va.value;var Ka=Da+" "+va;Ja[this.lower(tc.string.camelCaseString(Ka))]=[Ka,ka,this.join(Ba,va)]}return Ja}},{key:"focusOn",value:function(Da){var ka=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==
Ja.nextAddress)return!Da||ka.isAncestorOf(Da)||ka.target===Da||tc.obj.isArray(Da)||(ka.target=Da),Ba=ka.visible,ka.visible=!0,Ja.yield(ka.whenRendered(),2);if(3!=Ja.nextAddress)return ka.update(),Ja.yield(ka.whenRendered(),3);ka.getSubmorphsByStyleClassName("NumberWidget").map(function(Fb){return Fb.relayout()});ka.visible=Ba;Ja.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(Da){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Da){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var Da=this,ka=this.uiSpec;return this._ui||(this._ui=tc.obj.extract(ka,tc.obj.keys(ka),function(Ba,Ja){Ba=$jscomp.makeIterator(Ja).next().value;return Da.getSubmorphNamed(Ba)}))}}}}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(tc.Morph);hc=tc.ShapeFormatStyler;tc.default=hc;var Ec=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Ec.Morph=bd;Ec.ShadowPopover=Dc;Ec.connect=ld;Ec.signal=Ad;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Oa=ac.hasOwnProperty("ShadowWidget")&&"function"===typeof ac.ShadowWidget?ac.ShadowWidget:
ac.ShadowWidget=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Da){this.openPopover()}},{key:"update",value:function(Da){var ka=this.submorphs[0];
ka&&(ka.dropShadow=Da)}},{key:"openPopover",value:function(){var Da=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ka=new Ec.ShadowPopover({hasFixedPosition:!!Da.ownerChain().find(function(Ja){return Ja.hasFixedPosition}),shadowValue:Da.shadowValue}),Ba.yield(ka.fadeIntoWorld(Da.globalBounds().center()),2);Ec.connect(ka,"shadowValue",Da,"shadowValue");Ec.connect(Da,"shadowValue",Da,"update");Ec.signal(Da,"openWidget",ka);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Da){this.setProperty("shadowValue",Da);this.update(Da)}}}}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Ec.Morph);hc=Ec.ShadowWidget;Ec.default=hc;var ad=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
ad.Morph=bd;ad.obj=Vb;ad.string=Lb;ad.connect=ld;ad.noUpdate=cd;ad.once=gc;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Oa=ac.hasOwnProperty("BorderFormatStyler")&&"function"===typeof ac.BorderFormatStyler?ac.BorderFormatStyler:ac.BorderFormatStyler=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"setupUI",value:function(){var Da=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(ka){var Ba=
ad.string.camelCaseString(ka.name);Ba=Ba[0].toLowerCase()+Ba.slice(1);Da.ui[Ba]=ka})}},{key:"cleanupAnchors",value:function(){var Da=this.withAllSubmorphsSelect(function(Ja){return Ja.anchors&&Ja.anchors.filter(function(Fb){return!Fb.id})}),ka={};Da=$jscomp.makeIterator(Da);for(var Ba=Da.next();!Ba.done;ka={$jscomp$loop$prop$m$2990:ka.$jscomp$loop$prop$m$2990},Ba=Da.next())ka.$jscomp$loop$prop$m$2990=Ba.value,ka.$jscomp$loop$prop$m$2990.anchors.forEach(function(Ja){return function(Fb){return!Fb.id&&
Ja.$jscomp$loop$prop$m$2990.removeAnchor(Fb)}}(ka))}},{key:Symbol.for("lively-instance-initialize"),value:function(Da){Jd._get(Object.getPrototypeOf(Oa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Da);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Da=this.ui,ka={},Ba=$jscomp.makeIterator(Object.entries(this.uiSpec)),Ja=Ba.next();!Ja.done;ka={$jscomp$loop$prop$control$2992:ka.$jscomp$loop$prop$control$2992,$jscomp$loop$prop$prop$2993:ka.$jscomp$loop$prop$prop$2993},
Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value);Ja=Fb.next().value;Fb=$jscomp.makeIterator(Fb.next().value);Fb.next();var va=Fb.next().value;ka.$jscomp$loop$prop$prop$2993=Fb.next().value;ka.$jscomp$loop$prop$control$2992=Da[Ja];ad.connect(ka.$jscomp$loop$prop$control$2992,va,this,"updateTarget",{updater:function(Ka){return function(Rb,eb){Ka.$jscomp$loop$prop$control$2992._updating=!0;Rb(Ka.$jscomp$loop$prop$prop$2993,eb);Ka.$jscomp$loop$prop$control$2992._updating=!1}}(ka),varMapping:{prop:ka.$jscomp$loop$prop$prop$2993,
control:ka.$jscomp$loop$prop$control$2992}})}}},{key:"update",value:function(){var Da=this,ka=this.target,Ba=ka.borderStyle,Ja=ka.borderColor,Fb=ka.borderRadius,va=ka.borderWidth;ad.noUpdate(function(){Da.updateMultiValue("border style selector",Ba,"selection");Da.updateMultiValue("border color picker",Ja,"colorValue");Da.updateMultiValue("border radius field",Fb,"number");Da.updateMultiValue("border width field",va,"number")})}},{key:"updateTarget",value:function(Da,ka){this.target[Da]=ka;this.update()}},
{key:"updateControl",value:function(Da,ka,Ba){Da._updating||ad.obj.equals(Da[ka],Ba)||(Da[ka]=Ba)}},{key:"updateMultiValue",value:function(Da,ka,Ba){var Ja=this.ui,Fb=Ja[this.join(Da)],va=Fb.get("multi value indicator"),Ka=ad.obj.values(ka).some(function(Rb){return!ad.obj.isFunction(Rb)&&!ad.obj.equals(Rb,ka.valueOf())});Fb.visible=Fb.isLayoutable=!Ka;if(Ka&&va.visible!=Ka)ad.once(va,"onMouseDown",Fb,Ba,{converter:function(){return ka.valueOf()},varMapping:{value:ka}});va.visible=va.isLayoutable=
Ka;this.updateControl(Fb,Ba,ka.valueOf());Fb=$jscomp.makeIterator(["top","left","bottom","right"]);for(va=Fb.next();!va.done;va=Fb.next())va=va.value,Ka=Ja[this.join(Da,va)],this.updateControl(Ka,Ba,ka[va])}},{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+Da.slice(1)}},{key:"join",value:function(Da,ka){return this.lower(ad.string.camelCaseString(Da+(ka?" "+ka:"")))}},{key:"unwrap",value:function(Da,ka,Ba){var Ja={};Ja=(Ja[this.lower(ad.string.camelCaseString(Da))]=[Da,ka,Ba],Ja);
for(var Fb=$jscomp.makeIterator(["top","left","bottom","right"]),va=Fb.next();!va.done;va=Fb.next()){va=va.value;var Ka=Da+" "+va;Ja[this.lower(ad.string.camelCaseString(Ka))]=[Ka,ka,this.join(Ba,va)]}return Ja}},{key:"attachToWorld",value:function(){ad.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Da){var ka=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return!Da||ka.isAncestorOf(Da)||ka.target===Da||
ad.obj.isArray(Da)||(ka.target=Da),Ba=ka.visible,ka.visible=!0,Ja.yield(ka.whenRendered(),2);if(3!=Ja.nextAddress)return ka.update(),Ja.yield(ka.whenRendered(),3);ka.getSubmorphsByStyleClassName("NumberWidget").map(function(Fb){return Fb.relayout()});ka.visible=Ba;Ja.jumpToEnd()})}},{key:"onHoverIn",value:function(Da){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Da){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",
get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(ad.Morph);hc=ad.BorderFormatStyler;ad.default=hc;var td=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");td.Morph=bd;td.morph=Zc;td.layouts=Jc;td.string=Lb;td.connect=ld;td.noUpdate=cd;td.InteractiveMorphSelector=xc;td.Color=He;td.pt=ke;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),
Oa=ac.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof ac.ShapeLayoutControl?ac.ShapeLayoutControl:ac.ShapeLayoutControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"focusOn",value:function(Da){this.target=Da;this.update(!1)}},{key:"setupConnections",value:function(){var Da=this.ui;td.connect(Da.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");td.connect(Da.dragmeControl,
"onDragStart",this,"onSubmorphSettingsDragStart");td.connect(Da.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});td.connect(Da.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});
for(var ka={},Ba=$jscomp.makeIterator(this.managedProps),Ja=Ba.next();!Ja.done;ka={$jscomp$loop$prop$prop$2995:ka.$jscomp$loop$prop$prop$2995},Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value),va=Fb.next().value;Ja=Fb.next().value;Fb.next().value||(ka.$jscomp$loop$prop$prop$2995=this.join(va),Fb=Da[this.join(va,"control")],td.connect(Fb,Ja,this,"updateLayout",{updater:function(Ka){return function(Rb,eb){Rb(Ka.$jscomp$loop$prop$prop$2995,eb)}}(ka),varMapping:{prop:ka.$jscomp$loop$prop$prop$2995}}))}}},
{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+Da.slice(1)}},{key:"join",value:function(Da,ka){return this.lower(td.string.camelCaseString(Da+(ka?" "+ka:"")))}},{key:"updateLayoutOfTarget",value:function(Da){Da=td.layouts[td.string.camelCaseString(Da)];this.target.layout=Da?new Da({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Da,ka){this.target.layout[Da]=ka}},{key:"update",value:function(Da){var ka=this;this.target&&td.noUpdate(function(){for(var Ba=
ka.ui,Ja=ka.target.layout||{name:function(){return"No"}},Fb=$jscomp.makeIterator(ka.managedProps),va=Fb.next();!va.done;va=Fb.next()){var Ka=$jscomp.makeIterator(va.value);va=Ka.next().value;var Rb=Ka.next().value;Ka.next();Ka=Ba[ka.join(va,"control")];var eb=Ba[ka.join(va,"label")];if(Rb)if("type"===va)Ka.selection=Ja.name()+" Layout";else{var Vc=Ja[ka.join(va)],Qb="undefined"!==typeof Vc;if(Qb){switch(va){case "align":Ka.items=Ja.possibleAlignValues;break;case "direction":Ka.items=Ja.possibleDirectionValues;
break;case "axis":Ka.items=Ja.possibleAxisValues}Ka[Rb]=Vc}eb.isLayoutable=eb.visible=Qb}}ka.showGridLayoutControl("Grid"===Ja.name());ka.showProportionalControl("Proportional"===Ja.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Da){var ka={};this.target.layout.changeSettingsFor(Da.submorph,(ka[Da.axis]=Da.policy,ka),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Da){var ka=this;Da.stop();var Ba=this.target.layout,Ja=Ba.settingsFor(this.selectedSubmorph),Fb=[],
va;for(va in Ja)Fb=[].concat($jscomp.arrayFromIterable(Fb),[va+": ",{fontWeight:"bold"},Ja[va]+" ",{}]);var Ka=td.morph({type:"label",fontColor:td.Color.white,value:Fb,fill:td.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Ka.wantsToBeDroppedOn=function(Rb){return Ba.layoutableSubmorphs.includes(Rb)};Ka.onBeingDroppedOn=function(Rb,eb){Ka.remove();if(Rb=Ba.layoutableSubmorphs.includes(eb)?eb:Da.world.morphsContainingPoint(Da.hand.position).find(function(Vc){return Ba.layoutableSubmorphs.includes(Vc)}))ka.updateSubmorphProportionalLayoutSettings({policy:Ja.x,
axis:"x",submorph:Rb}),ka.updateSubmorphProportionalLayoutSettings({policy:Ja.y,axis:"y",submorph:Rb}),Rb.show(),$world.setStatusMessage("layout settings applied")};Da.hand.grab(Ka);Ka.moveBy(td.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Da=this,ka,Ba,Ja,Fb,va,Ka,Rb,eb,Vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){switch(Qb.nextAddress){case 1:return ka=Da.target.layout.layoutableSubmorphs,Da.manageFocus=!0,Da.env.eventDispatcher.isKeyPressed("Shift")?
(Ja=ka.map(function(qd){return{isListItem:!0,string:String(qd),value:qd}}),Qb.yield($world.listPrompt("Select morph",Ja,{onSelection:function(qd){return qd.show()}}),5)):Qb.yield(td.InteractiveMorphSelector.selectMorph(Da.world(),Da,function(qd){return ka.includes(qd)}),4);case 4:Ba=Qb.yieldResult;Qb.jumpTo(3);break;case 5:Fb=Qb.yieldResult,va=$jscomp.makeIterator(Fb.selected),Ba=va.next().value;case 3:Da.manageFocus=!1;Da.selectedSubmorph=Ba;if(!Ba)return Qb.return();Ka=Da.ui;Rb=Ka.xAxisPolicyControl;
eb=Ka.yAxisPolicyControl;Vc=Da.target.layout.settingsFor(Ba);td.noUpdate(function(){Rb.selection=Vc.x;eb.selection=Vc.y});Qb.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Da){var ka=this.ui;[ka.submorphSettingsControl,ka.dragmeControl,ka.xAxisPolicyControl,ka.xAxisPolicyLabel,ka.yAxisPolicyControl,ka.yAxisPolicyLabel].forEach(function(Ba){Ba.isLayoutable=Da;Ba.visible=Da})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",
value:function(Da){var ka=this.ui.configureGridLayoutControl;ka.visible=ka.isLayoutable=Da}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations",
"checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Da={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ka=$jscomp.makeIterator(this.managedProps),Ba=ka.next();!Ba.done;Ba=ka.next()){var Ja=$jscomp.makeIterator(Ba.value).next().value;Ba=Ja+" label";Ja+=" control";Da[this.join(Ba)]=this.getSubmorphNamed(Ba);Da[this.join(Ja)]=
this.getSubmorphNamed(Ja)}return Da}}}}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(td.Morph);hc=td.ShapeLayoutControl;td.default=hc;var fc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");fc.Morph=bd;fc.resource=zd;fc.arr=jc;fc.obj=Vb;
fc.string=Lb;fc.Path=Mb;fc.connect=ld;fc.getMastersMenu=mb;fc.resolvedMasters=Bc;hc=function(zc){var ac=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),Oa=ac.hasOwnProperty("MasterComponentControl")&&"function"===typeof ac.MasterComponentControl?ac.MasterComponentControl:ac.MasterComponentControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Oa,zc,[{key:"focusOn",value:function(Da){this.target=
Da;this.update()}},{key:"onMouseUp",value:function(Da){var ka=this,Ba,Ja,Fb,va,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress){"auto master selection"==Da.targetMorph.name&&(Ba="auto");"hover master selection"==Da.targetMorph.name&&(Ba="hover");"click master selection"==Da.targetMorph.name&&(Ba="click");ka.refreshButtons();if(!ka.target)return eb.return();Ja=$jscomp.makeIterator(["auto","hover","click"]);for(Fb=Ja.next();!Fb.done;Fb=Ja.next())va=Fb.value,
ka.target.master&&ka.target.master[va]&&!ka.get(va+" master checkbox").checked&&ka.adjustMasterComponent(va,null);if(!Ba)return eb.jumpTo(0);Ka=ka;Rb=Ka.openMenu;return eb.yield(ka.getMastersMenu(Ba),3)}Rb.call(Ka,eb.yieldResult,Da);eb.jumpToEnd()})}},{key:"getMastersMenu",value:function(Da){var ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){return 1==Ba.nextAddress?Ba.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(fc.resolvedMasters)),[ka.world().name]).map(function(Ja){var Fb,
va,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){return 1==eb.nextAddress?(va=(Fb=Ja==ka.world().name)?"This World":Ja,Ka=ka,Rb=Ka.componentsToMenu,eb.yield(fc.resource("styleguide://"+Ja+"/").dirList(),2)):eb.return([va,Rb.call(Ka,eb.yieldResult,Da)])})})),2):Ba.return(Ba.yieldResult)})}},{key:"componentsToMenu",value:function(Da,ka,Ba,Ja){var Fb=this;Ba=void 0===Ba?null:Ba;Ja=void 0===Ja?1:Ja;Ba||(Ba=Da.map(function(Ka){return{name:fc.arr.last(Ka.name.split("/")),path:Ka.name.split("/"),
value:Ka}}));if(0==Ba.length||100<Ja)return[];var va=this;return fc.arr.flatten(Object.entries(fc.arr.groupBy(Ba,function(Ka){return Ka.path[Ja-1]})).map(function(Ka){var Rb=$jscomp.makeIterator(Ka);Ka=Rb.next().value;Rb=Rb.next().value;var eb=$jscomp.makeIterator(fc.arr.partition(Rb,function(Vc){return Vc.path.length<=Ja}));Rb=eb.next().value;eb=eb.next().value;Ka=[Ka,Fb.componentsToMenu(null,ka,eb,Ja+1)];return[].concat($jscomp.arrayFromIterable(Rb.map(function(Vc){return[Vc.name,function(){va.adjustMasterComponent(ka,
Vc.value)}]})),$jscomp.arrayFromIterable(Ka[1].length?[Ka]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Da){var ka=this,Ba,Ja,Fb,va,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Ba=ka.world().metadata.commit.name,Ja=fc.resource("styleguide://"+Ba+"/"),eb.yield(Ja.dirList(),2);if(3!=eb.nextAddress)return Fb=eb.yieldResult,eb.yield(fc.resource("styleguide://System/").dirList(),3);va=eb.yieldResult;Ka=ka.componentsToMenu(Fb,Da);Rb=ka.componentsToMenu(va,
Da);return eb.return([].concat($jscomp.arrayFromIterable(0<Ka.length?[].concat($jscomp.arrayFromIterable(Ka),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Rb)))})}},{key:"adjustMasterComponent",value:function(Da,ka){if(this.target.master)this.target.master[Da]=ka;else if(ka){var Ba={};this.target.master=(Ba[Da]=ka,Ba)}Da=this.target.master;ka=Da.hover;Ba=Da.click;Da.auto||ka||Ba||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Ja){return delete Ja._parametrizedProps});
this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Da,ka,Ba,Ja){var Fb=this;Ba=void 0===Ba?null:Ba;Ja=void 0===Ja?1:Ja;Ba||(Ba=Da.map(function(Ka){return{name:fc.arr.last(Ka.name.split("/")),path:Ka.name.split("/"),value:Ka}}));if(0==Ba.length||100<Ja)return[];var va=this;return fc.arr.flatten(Object.entries(fc.arr.groupBy(Ba,function(Ka){return Ka.path[Ja-1]})).map(function(Ka){var Rb=$jscomp.makeIterator(Ka);Ka=Rb.next().value;Rb=Rb.next().value;var eb=$jscomp.makeIterator(fc.arr.partition(Rb,
function(Vc){return Vc.path.length<=Ja}));Rb=eb.next().value;eb=eb.next().value;Ka=[Ka,Fb.componentsToMenu(null,ka,eb,Ja+1)];return[].concat($jscomp.arrayFromIterable(Rb.map(function(Vc){return[Vc.name,function(){va.adjustMasterComponent(ka,Vc.value)}]})),$jscomp.arrayFromIterable(Ka[1].length?[Ka]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Da=$jscomp.makeIterator(["auto","hover","click"]),ka=Da.next();!ka.done;ka=Da.next()){ka=ka.value;var Ba=this.getSubmorphNamed(ka+" master selection"),
Ja=this.getSubmorphNamed(ka+" master checkbox");fc.Path(["master",ka]).get(this.target)?Ja.checked=!0:Ja.checked=!1;Ba.label=fc.string.truncateLeft(fc.Path(["master",ka,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Da=$jscomp.makeIterator(["auto","hover","click"]),ka=Da.next();!ka.done;ka=Da.next()){ka=ka.value;var Ba=this.getSubmorphNamed(ka+" master selection"),Ja=this.getSubmorphNamed(ka+" master checkbox");Ba=Ba.deactivated=
!Ja.checked;this.getSubmorphNamed(ka+" master selection").opacity=Ba?.5:1}Da=this.getSubmorphNamed("overridden props list");Da.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Da.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Da){return Da.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var Da=this.getSubmorphNamed("overridden props list").selection;
this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Da]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Da=this.getMasterForTarget();return Da&&Da._overriddenProps?(Da=Da._overriddenProps.get(this.target))?Object.keys(Da):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],ac,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(fc.Morph);hc=fc.MasterComponentControl;fc.default=hc}}});