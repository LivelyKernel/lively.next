System.register(["./__root_module__-1334cd4d.js","./index-491c4e03.js","./index-18afa973.js"],function(ta){var ob,ub,Tb,Jb,rd,yc,vd,zc,Ec,Mc,zd,ne,De,Xd,Qb,qc,ld,Pb,ud,Ed,vc,ac,Eb,ec,wc,fd,cd,pc,cb,fb,ya,Ea,Ba,xa,Qa,wb,fc,$a,ib,ab,U,ua,M,ea,Ka;return{setters:[function(Za){ob=Za.C;ub=Za.aw;Tb=Za.a6;Jb=Za.a1;rd=Za.a3;yc=Za.ab;vd=Za.bj;zc=Za.aZ;Ec=Za.au;Mc=Za.a7;zd=Za.aR;ne=Za.bn;De=Za.bo;Xd=Za.a8;Qb=Za.aj;qc=Za.at;ld=Za.av;Pb=Za.bp;ud=Za.bq;Ed=Za.a2;vc=Za.P;ac=Za.$;Eb=Za.aY;ec=Za.an;wc=Za.ao;fd=
Za.ap;cd=Za.aq;pc=Za.aD;cb=Za.b0;fb=Za.az;ya=Za.as;Ea=Za.ad;Ba=Za.br;xa=Za.L;Qa=Za.bs;wb=Za.b5;fc=Za.bk;$a=Za.b4;ib=Za.bt;ab=Za.ax},function(Za){U=Za.M;ua=Za.I;M=Za.v;ea=Za.p},function(Za){Ka=Za.localInterface}],execute:function(){function Za(za,Pa){if(!0===Pa)return Pa;if(za.copyState)return za.copyState(Pa);za={};for(var qb in Pa){var R=Pa[qb];R instanceof Array&&(R=R.concat([]));za[qb]=R}return za}function $b(za,Pa,qb){return za.startState?za.startState(Pa,qb):!0}function Qc(za,Pa){return Ab.modes[za]=
Pa}function Ub(za){if("string"==typeof za&&Ab.mimeModes.hasOwnProperty(za))za=Ab.mimeModes[za];else if(za&&"string"==typeof za.name&&Ab.mimeModes.hasOwnProperty(za.name)){var Pa=Ab.mimeModes[za.name];"string"==typeof Pa&&(Pa={name:Pa});za=Object.assign({},Pa,za);za.name=Pa.name}else{if("string"==typeof za&&/^[\w\-]+\/[\w\-]+\+xml$/.test(za))return Ub("application/xml");if("string"==typeof za&&/^[\w\-]+\/[\w\-]+\+json$/.test(za))return Ub("application/json")}return"string"==typeof za?{name:za}:za||
{name:"null"}}function vb(za,Pa){Pa=Ab.resolveMode(Pa);"string"===typeof Pa&&(Pa={name:Pa});if(!Pa.name)throw Error("parserConfig does not have a name of the mode to get");var qb=Ab.modes[Pa.name];if(!qb)return vb(za,"text/plain");za=Object.assign({indentUnit:2},za);return Object.assign(qb(za,Pa),{name:Pa.name})}function pd(za,Pa){for(var qb;za.innerMode;){qb=za.innerMode(Pa);if(!qb||qb.mode==za)break;Pa=qb.state;za=qb.mode}return qb||{mode:za,state:Pa}}function $c(za,Pa){Ab.mimeModes[za]=Pa}function Ta(za,
Pa,qb){}function mb(za,Pa,qb,R,wa,Wa,hb){var hc=za.editorPlugin._tokenizerValidBefore;hc&&hc.row>=qb&&(hc.row=qb-1);var cc=Ab.linesToTokenize(za.document,qb,R,hc);hc=cc.lines;cc=cc.state;if(!hc.length)return!1;cc=cc?Ab.copyState(Pa,cc):Ab.startState(Pa);for(var Gc=0;Gc<hc.length;Gc++){var Oc=hc[Gc],Hc=Oc.row;Hc>=qb&&Hc<=R&&Ab.indentLine(za,Pa,Oc,cc,wa,Wa,hb);cc=Ab.tokenizeLine(Pa,hc[Gc],cc,function(){})}return!0}function xc(za,Pa,qb,R,wa,Wa,hb){Pa=Ab.linesToTokenize(Pa,qb,R,wa);qb=Pa.lines;Ab.tokenizeLines(za,
qb,Pa.state,Wa,hb);return qb}function bb(za,Pa,qb,R,wa){var Wa=[],hb,hc=function(Oc){return Wa.push(hb=[])},cc=function(Oc,Hc,ye,lf,Ye,zg,Ie){return hb.push(ye,lf,Oc,Ye.current(),Hc.localMode||Ie)};try{var Gc=Ab.visitDocumentTokens(za,Pa,qb,R,wa,hc,cc)}catch(Oc){Wa.length=0,Gc=Ab.visitDocumentTokens(za,Pa,qb,R,null,hc,cc)}return{tokens:Wa,lines:Gc}}function Bc(za,Pa,qb,R,wa){null==Pa&&(Pa=za.search(/[^\s\u00a0]/),-1==Pa&&(Pa=za.length));R=R||0;for(wa=wa||0;;){var Wa=za.indexOf("\t",R);if(0>Wa||Wa>=
Pa)return wa+(Pa-R);wa+=Wa-R;wa+=qb-wa%qb;R=Wa+1}}function uc(za){za=za.toLowerCase();for(var Pa=0;Pa<Ab.modeInfo.length;Pa++){var qb=Ab.modeInfo[Pa];if(qb.mime==za)return qb;if(qb.mimes)for(var R=0;R<qb.mimes.length;R++)if(qb.mimes[R]==za)return qb}if(/\+xml$/.test(za))return uc("application/xml");if(/\+json$/.test(za))return uc("application/json")}function Sa(za){for(var Pa=0;Pa<Ab.modeInfo.length;Pa++){var qb=Ab.modeInfo[Pa];if(qb.ext)for(var R=0;R<qb.ext.length;R++)if(qb.ext[R]==za)return qb}}
function Da(za){for(var Pa=0;Pa<Ab.modeInfo.length;Pa++){var qb=Ab.modeInfo[Pa];if(qb.file&&qb.file.test(za))return qb}Pa=za.lastIndexOf(".");if(za=-1<Pa&&za.substring(Pa+1,za.length))return Ab.findModeByExtension(za)}function Ya(za){za=za.toLowerCase();for(var Pa=0;Pa<Ab.modeInfo.length;Pa++){var qb=Ab.modeInfo[Pa];if(qb.name.toLowerCase()==za)return qb;if(qb.alias)for(var R=0;R<qb.alias.length;R++)if(qb.alias[R].toLowerCase()==za)return qb}}function Na(za){if(!za)return String(za);if(Array.isArray(za))return"["+
za.map(Na).join(",")+"]";if("symbol"===typeof za)return Pc.printSymbol(za);try{return String(za)}catch(Pa){return"Cannot print object: "+Pa}}function oc(za,Pa){return!Pc.arr.every(Pa.map(function(qb){return za[qb]}),function(qb){return Pc.obj.equals(qb,za&&za.valueOf())})}function aa(za){if(Pc.obj.isPrimitive(za))var Pa=Pc.string.print(za);else Array.isArray(za)?((Pa=3<za.length)&&(za=za.slice(0,3)),za=Pc.string.print(za),Pa&&(za=za.slice(0,-1)+", ...]"),Pa=za):Pa=Pc.string.print(za);Pa=Pa.replace(/\n/g,
"");500<Pa.length&&(Pa=Pa.slice(0,20)+("...["+(Pa.length-20)+' CHARS]"'));return Pa}function na(za){return Vb.Inspector.openInWindow({targetObject:za})}function gb(za,Pa){return Vb.Inspector.openInWindow({remoteTarget:{code:za,evalEnvironment:Pa}})}function H(za,Pa){function qb(hc){var cc=hc.name,Gc=hc.ownerChain(),Oc=hc.owner,Hc=hc.world(),ye;hc===Wa&&(ye=[hb]);Hc===hc&&(ye=["$world"]);if(!ye&&cc&&Oc){Oc===Hc&&1===Vb.arr.count(Vb.arr.pluck(Hc.submorphs,"name"),cc)&&(ye=['$world.get("'+cc+'")']);
if(!ye&&Oc!=Hc)for(Hc=Gc.length-1;Hc--;)if(1===Gc[Hc].getAllNamed(cc).length){ye=[].concat($jscomp.arrayFromIterable(qb(Gc[Hc])),['get("'+cc+'")']);break}ye||(cc=[].concat($jscomp.arrayFromIterable(qb(Oc)),['get("'+cc+'")']),Vb.syncEval(cc.join("."),{context:Wa}).value===hc&&(ye=cc))}ye||(ye=[hb+'.getMorphById("'+hc.id+'")']);return ye}Pa=void 0===Pa?{}:Pa;var R=za.world(),wa=Pa;Pa=void 0===wa.maxLength?10:wa.maxLength;var Wa=void 0===wa.fromMorph?R:wa.fromMorph;if(Wa===za)return"this";var hb=R===
Wa?"$world":"this";if(!(R||za.name&&Wa.get(za.name)===za))return"morph";R=qb(za);return R.length>Pa?'$world.getMorphWithId("'+za.id+'")':R.join(".")}function ha(za,Pa,qb){var R=(Pa=void 0===Pa?"":Pa)&&Re.arr.last(Pa.split(".")).toLowerCase(),wa="",Wa=0,hb=Math.pow(2,19);if("string"===typeof za){if(za.length>hb)return null}else if(za.document.stringSize>hb)return null;if("string"===typeof za)wa=za.slice(0,1E3);else for(za=$jscomp.makeIterator(za.document.lines),hb=za.next();!hb.done;hb=za.next()){var hc=
hb.value;hb=hc.stringSize;hc=hc.text;var cc=!0;1E3<Wa+hb&&(cc=!1,hb=1E3-Wa);wa+=hc.slice(0,hb)+(cc?"\n":"");Wa+=hb;if(1E3<=Wa)break}Wa=$jscomp.makeIterator(Re.modeInfo);for(za=Wa.next();!za.done;za=Wa.next()){cc=za.value;hb=cc.contentTest;za=cc.mode;hc=cc.ext;cc=cc.file;if("function"===typeof hb)try{if(hb(wa))return za}catch(Gc){}if(cc&&cc instanceof RegExp&&cc.test(Pa))return za;if(hc)for(hb=$jscomp.makeIterator(hc),hc=hb.next();!hc.done;hc=hb.next())if(hc.value===R)return za}return qb}ta({a:$c,
d:Qc,r:Ta});var Ga=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js");Ga.Color=ob;var lb=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/themes/default.js"),qb=Pa.hasOwnProperty("DefaultTheme")&&"function"===typeof Pa.DefaultTheme?Pa.DefaultTheme:Pa.DefaultTheme=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"background",get:function(){return Ga.Color.white}},{key:"default",
get:function(){return{fontColor:"#333"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},
{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:"#708"}}},
{key:"atom",get:function(){return{fontColor:"#219"}}},{key:"number",get:function(){return{fontColor:"#174"}}},{key:"def",get:function(){return{fontColor:"#22c"}}},{key:"variable",get:function(){return{fontColor:"#05a"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:"#222"}}},{key:"operator",get:function(){return{fontColor:"#05a"}}},{key:"variable-2",get:function(){return{fontColor:"#05a"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},
{key:"comment",get:function(){return{fontColor:"#666"}}},{key:"string",get:function(){return{fontColor:"#181"}}},{key:"string-2",get:function(){return{fontColor:"#0B2"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#555"}}},{key:"builtin",get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#997"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#333"}}},
{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:Ga.Color.white,fontWeight:"bold",backgroundColor:Ga.Color.rgba(136,136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:Ga.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:Ga.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",
get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DefaultTheme"}},{key:"instance",get:function(){return this._instance||(this._instance=new this)}}],Pa,{pathInPackage:function(){return"themes/default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:2826})}(void 0),Sb=lb=Ga.DefaultTheme;Ga.default=lb;var Ab=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js");Ab.copyState=Za;Ab.startState=$b;Ab.defineMode=Qc;Ab.resolveMode=Ub;Ab.getMode=vb;Ab.innerMode=pd;Ab.defineMIME=$c;Ab.registerHelper=Ta;Ab.indentLines=mb;Ab.indentLine=function(za,Pa,qb,R,wa,Wa,hb){hb=Object.assign({indentWithTabs:!za.useSoftTabs,indentUnit:za.tabWidth,tabSize:4,ignoreFollowingText:!1},
hb);null==wa&&(wa="add");"smart"==wa&&(Pa.indent||(wa="prev"));var hc=hb.tabSize,cc=qb.text,Gc=Ab.countColumn(cc,null,hc);qb.modeState&&(qb.modeState=null);var Oc=cc.match(/^\s*/)[0];if(!Wa&&!/\S/.test(cc)){var Hc=0;wa="not"}else if("smart"==wa&&(Hc=Pa.indent(R,hb.ignoreFollowingText?"":cc.slice(Oc.length),cc),Hc==Ab.passIndent||150<Hc)){if(!Wa)return;wa="prev"}"prev"==wa?Hc=0<qb.row?Ab.countColumn(qb.prevLine().text,null,hc):0:"add"==wa?Hc=Gc+hb.indentUnit:"subtract"==wa?Hc=Gc-hb.indentUnit:"number"==
typeof wa&&(Hc=Gc+wa);Hc=Math.max(0,Hc);Pa="";R=0;if(hb.indentWithTabs)for(hb=Math.floor(Hc/hc);hb;--hb)R+=hc,Pa+="\t";R<Hc&&(Pa+=" ".repeat(Hc-R));if(Pa!=Oc)return za.replace({start:{row:qb.row,column:0},end:{row:qb.row,column:Oc.length}},Pa),!0};Ab.tokenizeLines=function(za,Pa,qb,R,wa){if(Pa.length){qb=qb?Ab.copyState(za,qb):Ab.startState(za);for(var Wa=0;Wa<Pa.length;Wa++){var hb=Pa[Wa];R(hb);qb=Ab.tokenizeLine(za,hb,qb,wa)}}};Ab.tokenizeLine=function(za,Pa,qb,R){var wa=Pa.text;if(!wa)return qb;
var Wa=new Ab.StringStream(wa,2);qb=Pa.modeState="function"===typeof za.copyState?za.copyState(qb):Ab.copyState(za,qb);Pa.prevLine();for(qb._string=wa;!Wa.eol();)wa=za.token(Wa,qb),R(wa,qb,Wa.start,Wa.pos,Wa,Pa,za),Wa.start=Wa.pos;return qb};Ab.printTokens=function(za){for(var Pa="",qb=0;qb<za.length;qb+=5)Pa+=za[qb+0]+" => "+za[qb+1]+" "+za[qb+2]+" "+za[qb+3]+" "+za[qb+4].name+"\n";return Pa};Ab.visitDocumentTokens=xc;Ab.tokenizeDocument=bb;Ab.linesToTokenize=function(za,Pa,qb,R){if(R&&R.row>=qb)return{lines:[],
state:null};Pa=R?Math.max(0,R.row-1):Pa;var wa=za.getLine(Pa),Wa=wa.text;za=[wa];R=null;for(var hb=0,hc;(hc=wa.prevLine())&&50>hb++;){wa=hc;if(wa.modeState){R=wa.modeState;break}za.unshift(wa)}if(!R){for(var cc=wa,Gc=Infinity;(hc=wa.prevLine())&&100>hb++;){wa=hc;if(wa.modeState){R=wa.modeState;break}za.unshift(wa);hc=Wa.match(/^\s*/)[0].length;if(0===hc)break;hc<Gc&&(Gc=hc,cc=wa)}!R&&0<Gc&&(za=za.slice(za.indexOf(cc)))}if(qb>Pa)for(wa=Ab.arr.last(za);Pa<=qb;Pa++){wa=wa.nextLine();if(!wa)break;za.push(wa)}return{lines:za,
state:R}};Ab.countColumn=Bc;Ab.findModeByMIME=uc;Ab.findModeByExtension=Sa;Ab.findModeByFileName=Da;Ab.findModeByName=Ya;Ab.arr=Tb;lb=Ab.modes||{};Ab.modes=lb;Ab.modes=lb;Ab.modes=lb;lb=ta("p",{});Ab.passIndent=lb;Ab.passIndent=lb;Ab.passIndent=lb;Ab.copyState=Za;Ab.copyState=Za;Ab.startState=$b;Ab.startState=$b;Ab.defineMode=Qc;Ab.defineMode=Qc;Ab.resolveMode=Ub;Ab.resolveMode=Ub;Ab.getMode=vb;Ab.getMode=vb;Ab.innerMode=pd;Ab.innerMode=pd;lb={};Ab.mimeModes=lb;Ab.mimeModes=lb;Ab.mimeModes=lb;Ab.defineMIME=
$c;Ab.defineMIME=$c;Ab.registerHelper=Ta;Ab.registerHelper=Ta;Ab.indentLines=mb;Ab.indentLines=mb;Ab.visitDocumentTokens=xc;Ab.visitDocumentTokens=xc;Ab.tokenizeDocument=bb;Ab.tokenizeDocument=bb;Ab.countColumn=Bc;Ab.countColumn=Bc;(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/editor-modes.js"),qb=Pa.hasOwnProperty("StringStream")&&"function"===typeof Pa.StringStream?Pa.StringStream:Pa.StringStream=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(R,wa){this.reset(R,wa)}},{key:"reset",value:function(R,wa){this.pos=this.start=0;this.string=void 0===R?"":R;this.tabSize=void 0===wa?2:wa;this.lineStart=this.lastColumnPos=this.lastColumnValue=0}},{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return this.pos==this.lineStart}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void 0}},{key:"next",
value:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(R){var wa=this.string.charAt(this.pos);if("string"==typeof R?wa==R:wa&&(R.test?R.test(wa):R(wa)))return++this.pos,wa}},{key:"eatWhile",value:function(R){for(var wa=this.pos;this.eat(R););return this.pos>wa}},{key:"eatSpace",value:function(){for(var R=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>R}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},
{key:"skipTo",value:function(R){R=this.string.indexOf(R,this.pos);if(-1<R)return this.pos=R,!0}},{key:"backUp",value:function(R){this.pos-=R}},{key:"column",value:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=Ab.countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Ab.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"indentation",value:function(){return Ab.countColumn(this.string,
null,this.tabSize)-(this.lineStart?Ab.countColumn(this.string,this.lineStart,this.tabSize):0)}},{key:"match",value:function(R,wa,Wa){if("string"==typeof R){var hb=function(cc){return Wa?cc.toLowerCase():cc},hc=this.string.substr(this.pos,R.length);if(hb(hc)==hb(R))return!1!==wa&&(this.pos+=R.length),!0}else{if((R=this.string.slice(this.pos).match(R))&&0<R.index)return null;R&&!1!==wa&&(this.pos+=R[0].length);return R}}},{key:"current",value:function(){return this.string.slice(this.start,this.pos)}},
{key:"hideFirstChars",value:function(R,wa){this.lineStart+=R;try{return wa()}finally{this.lineStart-=R}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringStream"}}],Pa,{pathInPackage:function(){return"editor-modes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10431,end:12920})})(void 0);lb=[{name:"APL",mime:"text/apl",
mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),
alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",
mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",
mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"],contentTest:function(za){return za.match(/^diff --.* a\//m)}},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",
mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",
mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",
mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",
mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",
mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"json",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},
{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",
mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",
mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p",
"pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:"php php3 php4 php5 php7 phtml".split(" ")},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",
ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},
{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",
mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD|\.bash(rc|_profile)|\.profile$/,contentTest:function(za){return za.match(/#!\//m)}},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},
{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},
{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",
mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:"123456789".split("")},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",
mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",
ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml",
"text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];Ab.modeInfo=lb;Ab.modeInfo=lb;Ab.modeInfo=lb;for(var sc=0;sc<Ab.modeInfo.length;sc++)Ab.info=Ab.modeInfo[sc],Ab.info.mimes&&(Ab.info.mime=Ab.info.mimes[0]);Ab.defineMode("null",function(){return{token:function(za){return za.skipToEnd()}}});
Ab.defineMIME("text/plain","null");Ab.findModeByMIME=uc;Ab.findModeByMIME=uc;Ab.findModeByExtension=Sa;Ab.findModeByExtension=Sa;Ab.findModeByFileName=Da;Ab.findModeByFileName=Da;Ab.findModeByName=Ya;Ab.findModeByName=Ya;var Fc=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js");Fc.Color=ob;Fc.Rectangle=Jb;Fc.pt=rd;Fc.morph=yc;Fc.ShadowObject=vd;Fc.StyleSheet=zc;Fc.connect=Ec;Fc.arr=Tb;Fc.string=Mc;Fc.FilterableList=zd;Fc.Range=ne;sc=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),
qb=Pa.hasOwnProperty("Completer")&&"function"===typeof Pa.Completer?Pa.Completer:Pa.Completer=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"compute",value:function(){return[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Completer"}}],Pa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:347,end:394})}(void 0);Fc.Completer=sc;Fc.Completer=sc;Fc.Completer=sc;sc=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),qb=Pa.hasOwnProperty("WordCompleter")&&"function"===typeof Pa.WordCompleter?Pa.WordCompleter:Pa.WordCompleter=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"compute",
value:function(R,wa){var Wa=[],hb=[],hc=R.document.lineStrings;R=R.cursorPosition.row;for(var cc=R-1;0<=cc;cc--)for(var Gc=$jscomp.makeIterator(hc[cc].split(/[^0-9a-z@_]+/i)),Oc=Gc.next();!Oc.done;Oc=Gc.next())(Oc=Oc.value)&&!Wa.includes(Oc)&&Oc!==wa&&(Wa.push(Oc),hb.push({priority:1E3-(R-cc),completion:Oc}));for(cc=R+1;cc<hc.length;cc++)for(Gc=$jscomp.makeIterator(hc[cc].split(/[^0-9a-z_@]+/i)),Oc=Gc.next();!Oc.done;Oc=Gc.next())(Oc=Oc.value)&&!Wa.includes(Oc)&&Oc!==wa&&(Wa.push(Oc),hb.push({priority:1E3-
(cc-R),completion:Oc}));return hb}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WordCompleter"}}],Pa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:403,end:1274})}(void 0);Fc.WordCompleter=sc;Fc.WordCompleter=sc;Fc.WordCompleter=sc;sc=[new Fc.WordCompleter];Fc.defaultCompleters=
sc;Fc.defaultCompleters=sc;Fc.defaultCompleters=sc;sc=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/text/completion.js"),qb=Pa.hasOwnProperty("CompletionController")&&"function"===typeof Pa.CompletionController?Pa.CompletionController:Pa.CompletionController=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(R,wa){wa=void 0===
wa?[]:wa;this.textMorph=R;this.completers=wa=R.pluginCollect("getCompleters",wa)}},{key:"computeCompletions",value:function(R){var wa=this,Wa,hb,hc,cc,Gc,Oc,Hc,ye,lf,Ye,zg,Ie,sg,Gi,Tg,Zj;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xf){switch(xf.nextAddress){case 1:Wa=[],hb=$jscomp.makeIterator(wa.completers),hc=hb.next();case 2:if(hc.done){xf.jumpTo(4);break}cc=hc.value;xf.setCatchFinallyBlocks(5);Gc=Wa;Oc=Gc.concat;return xf.yield(cc.compute(wa.textMorph,R),7);case 7:Wa=Oc.call(Gc,
xf.yieldResult);xf.leaveTryBlock(3);break;case 5:Hc=xf.enterCatchBlock(),console.warn("Error in completer "+cc+": "+(Hc.stack||Hc));case 3:hc=hb.next();xf.jumpTo(2);break;case 4:ye=new Map;Wa.forEach(function(zi){var Ah=ye.get(zi.completion);Ah||(Ah=[],ye.set(zi.completion,Ah));Ah.push(zi)});lf=[];Ye=$jscomp.makeIterator(ye.values());for(zg=Ye.next();!zg.done;zg=Ye.next())Ie=zg.value,lf.push(Fc.arr.last(Fc.arr.sortByKey(Ie,"priority")));sg=0;Gi=Fc.arr.sortByKey(lf,"priority").reverse();Tg=Gi.length&&
Gi[0].priority||0;Zj=Gi.map(function(zi){zi.highestPriority=Tg;var Ah=zi.completion.replace(/\n/g,""),lj=String((zi.info||"").replace(/\n/g,""));sg=Math.max(sg,Ah.length+lj.length);return{isListItem:!0,string:Ah,annotation:lj,value:zi}});return xf.return({items:Zj,maxCol:sg})}})}},{key:"computeSortedCompletions",value:function(R,wa){wa=void 0===wa?!1:wa;var Wa=this,hb,hc,cc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return hb={tokens:[R],lowercasedTokens:[R],
input:R},Gc.yield(Wa.computeCompletions(R),2);hc=Gc.yieldResult;cc=Fc.arr.sortBy(hc.items.filter(function(Oc){return Wa.filterFunction(hb,Oc,wa)}),function(Oc){return Wa.sortFunction(hb,Oc)});return Gc.return(cc)})}},{key:"_printCompletions",value:function(R){var wa=this,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return hb.yield(wa.computeSortedCompletions(R),2);Wa=hb.yieldResult.map(function(hc){return{completion:hc.value.completion,priority:hc.value.priority,
maxP:hc.value.highestPriority,sortVal:hc._cache[R].sortVal,lev:JSON.stringify(hc._cache[R].levenshtein)}});return hb.return(Fc.string.printTable(lively.lang.grid.tableFromObjects(Wa)))})}},{key:"prefix",value:function(){var R=this.textMorph,wa=R.selection;return(wa.isEmpty()?R.getLine(wa.lead.row).slice(0,wa.lead.column):wa.text).match(/[a-z0-9@_]*$/i)[0]}},{key:"filterFunction",value:function(R,wa,Wa){Wa=void 0===Wa?!1:Wa;wa._cache||(wa._cache={});var hb=R.tokens,hc=R.lowercasedTokens,cc=R.input;
cc=wa._cache[cc]||(wa._cache[cc]={});if(cc.hasOwnProperty("filtered"))return cc.filtered;wa=wa.value.completion.replace(/\([^\)]*\)$/,"");var Gc=wa.toLowerCase();if(Wa&&hb[0]&&!wa.startsWith(hb[0]))return cc.filtered=!1;if(hc.every(function(Hc){return Gc.includes(Hc)}))return!0;var Oc=cc.levenshtein||(cc.levenshtein={});R=Wa||3>=Fc.arr.sum(R.lowercasedTokens.map(function(Hc){return Oc[Hc]||(Oc[Hc]=Fc.string.levenshtein(Gc,Hc))}));return cc.filtered=R}},{key:"sortFunction",value:function(R,wa){wa._cache||
(wa._cache={});var Wa=wa._cache[R.input]||(wa._cache[R.input]={});if(Wa.hasOwnProperty("sortVal"))return Wa.sortVal;Wa=wa._cache[R.input]={};var hb=wa.value;wa=hb.highestPriority;var hc=hb.completion;hb=hb.priority;hc=hc.replace(/\([^\)]*\)$/,"").toLowerCase();var cc=0;R.lowercasedTokens.forEach(function(Oc){hc.startsWith(Oc)?cc+=12:3<=Oc.length&&hc.includes(Oc)&&(cc+=5)});wa=-((hb||(cc?wa:0))/Math.pow(10,String(wa).length-2))-cc;var Gc=Wa.levenshtein||(Wa.levenshtein={});R=Fc.arr.sum(R.lowercasedTokens.map(function(Oc){return Gc[Oc]||
(Gc[Oc]=Fc.string.levenshtein(hc,Oc))}));cc&&(R/=2);return Wa.sortVal=R+wa}},{key:"positionForMenu",value:function(){var R=this.textMorph,wa=R.charBoundsFromTextPosition(R.cursorPosition);return R.getGlobalTransform().transformRectToRect(wa).topLeft().addXY(-R.scroll.x,-R.scroll.y).addPt(Fc.pt(R.borderWidth+4,R.borderWidth+4))}},{key:"completionListSpec",value:function(){var R=this,wa,Wa,hb,hc,cc,Gc,Oc,Hc,ye,lf,Ye,zg,Ie,sg,Gi,Tg,Zj,xf,zi,Ah;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lj){if(1==
lj.nextAddress)return Wa=wa=R.textMorph,hb=Wa.fontSize,hc=Wa.fontFamily,cc=R.positionForMenu(),Gc=R.prefix(),lj.yield(R.computeCompletions(Gc),2);Oc=lj.yieldResult;Hc=Oc.items;ye=Oc.maxCol;lf=wa.env.fontMetric.sizeFor(hc,hb,"M");Ye=lf.width*ye;zg=wa.document.getLine(0).height;Ie=Math.max(120,Ye<wa.width?Ye:wa.width);sg=zg*Hc.length+zg+10;Gi=Math.max(70,Math.min(700,sg));Tg=cc.extent(Fc.pt(Ie,Gi));if(Zj=wa.world())xf=Zj.visibleBounds().insetBy(5),Tg.bottom()>xf.bottom()&&(zi=Tg.bottom()-xf.bottom(),
zi>Tg.height-50&&(zi=Tg.height-50),Tg.height-=zi),Tg.right()>xf.right()&&(Ah=Tg.right()-xf.right(),Tg.width=120>Tg.width-Ah?120:Tg.width-Ah),xf.containsRect(Tg)||(Tg=Tg.withTopLeft(xf.translateForInclusion(Tg).topLeft())),Tg=Tg.translatedBy(xf.insetBy(0).topLeft().negated());return lj.return({master:{auto:"styleguide://SystemWidgets/autocomplete list"},hasFixedPosition:!0,epiMorph:!0,fontSize:hb,position:Tg.topLeft(),extent:Tg.extent(),items:Hc,input:Gc,name:"text completion menu",historyId:"lively.morphic-text completion",
filterFunction:R.filterFunction,sortFunction:R.sortFunction})})}},{key:"removeMenuOnBlur",value:function(R){var wa=R.menu;setTimeout(function(){wa.withAllSubmorphsDetect(function(Wa){return Wa.isFocused()})?wa.inputMorph.focus():wa.remove()})}},{key:"openCompletionList",value:function(){var R=this,wa,Wa,hb,hc,cc,Gc,Oc,Hc,ye,lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ye){if(1==Ye.nextAddress)return wa=R.textMorph.selection.start,Ye.yield(R.completionListSpec(),2);if(3!=Ye.nextAddress)return Wa=
Ye.yieldResult,R.textMorph.pluginFind(function(zg){return zg.theme}),hb=new Fc.FilterableList(Wa),hc=new Fc.Range({start:wa,end:R.textMorph.selection.start}),cc=R.textMorph.textInRange(hc),Gc=hb.inputMorph,Oc=hb.listMorph,Hc=Wa.input,ye=hb.addMorph({name:"prefix mask",fill:Fc.Color.transparent,bounds:Gc.textBounds()},Gc),Oc.master=null,hc.isEmpty()||(R.textMorph.deleteText(hc),Gc.input=cc,Gc.gotoDocumentEnd()),Gc.fontColor=R.textMorph.fontColor,Fc.connect(Gc,"textString",ye,"setBounds",{converter:"() => input.textBounds()",
varMapping:{input:Gc}}),Fc.connect(hb,"accepted",R,"insertCompletion",{updater:"function($upd) {\n        let textToInsert, customInsertionFn = null, completion = this.sourceObj.selection;\n        if (completion) {\n          if (completion.prefix) prefix = completion.prefix;\n          textToInsert = completion.completion;\n          customInsertionFn = completion.customInsertionFn;\n        } else {\n          textToInsert = this.sourceObj.inputMorph.textString;\n        }\n        $upd(textToInsert, prefix, customInsertionFn);\n      }",
varMapping:{prefix:Hc}}),Fc.connect(hb,"accepted",hb,"remove"),Fc.connect(hb,"canceled",hb,"remove"),Fc.connect(hb,"remove",R.textMorph,"focus"),Fc.connect(hb.inputMorph,"onBlur",R,"removeMenuOnBlur",{converter:"evt => ({menu, evt})",varMapping:{menu:hb}}),lf=R.textMorph.world(),Oc.addStyleClass("hiddenScrollbar"),hb.paddingMorph.height=2,Gc.height=Oc.itemHeight,Gc.clipMode="visible",Gc.fill=R.textMorph.fill,Gc.fixedHeight=!0,Gc.fixedWidth=!1,Gc.fontSize=Oc.fontSize,hb.relayout(),hb.selectedIndex=
0,hb.master.applyIfNeeded(!0),Gc.focus(),Ye.yield(hb.master.whenApplied(),3);Hc.length&&(Gc.gotoDocumentEnd(),hb.moveBy(Fc.pt(-Gc.textBounds().width,0)));lf.addMorph(hb);hb.inputPadding=Fc.Rectangle.inset(0,0,0,0);return Ye.return(hb)})}},{key:"autoInsertBestMatchingCompletion",value:function(R,wa,Wa){wa=void 0===wa?!0:wa;var hb=this,hc,cc,Gc,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hc){if(1==Hc.nextAddress)return hc=$jscomp,cc=hc.makeIterator,Hc.yield(hb.computeSortedCompletions(R,
wa),2);Gc=cc.call(hc,Hc.yieldResult);(Oc=Gc.next().value)&&hb.insertCompletion(Oc.value.completion,R,Wa);Hc.jumpToEnd()})}},{key:"insertCompletion",value:function(R,wa,Wa){var hb=this.textMorph,hc=hb.document,cc=hb.selection.isMultiSelection?hb.selection.selections:[hb.selection];hb.undoManager.group();cc.forEach(function(Gc){Gc.collapseToEnd();var Oc=Gc.lead,Hc=wa?hc.indexToPosition(hc.positionToIndex(Oc)-wa.length):Oc;"function"===typeof Wa?Wa(R,wa,hb,{start:Hc,end:Oc},Gc):hb.replace({start:Hc,
end:Oc},R)});hb.undoManager.group()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CompletionController"}}],Pa,{pathInPackage:function(){return"text/completion.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1402,end:13006})}(void 0);Fc.CompletionController=sc;Fc.CompletionController=sc;Fc.CompletionController=sc;
sc=[{name:"text completion",handlesCount:!0,multiSelectAction:"single",exec:function(za,Pa,qb){var R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){return 1==wa.nextAddress?(R=new Fc.CompletionController(za,Fc.defaultCompleters),wa.yield(R.openCompletionList(),2)):wa.return(!0)})}},{name:"text completion first match",handlesCount:!0,multiSelectAction:"single",exec:function(za,Pa,qb){var R;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){return 1==wa.nextAddress?(R=
new Fc.CompletionController(za,Fc.defaultCompleters),wa.yield(R.autoInsertBestMatchingCompletion(R.prefix()),2)):wa.return(!0)})}}];Fc.completionCommands=sc;Fc.completionCommands=sc;Fc.completionCommands=sc;var Fd=lively.FreezerRuntime.recorderFor("lively.ide/text/multi-select-commands.js");Fd.chain=De;Fd.arr=Tb;Fd.obj=Xd;Fd.string=Mc;var Ee=[{name:"[multi select] add cursor above",multiSelectAction:"single",exec:function(za){var Pa=za.selection.start;0<Pa.row&&(Pa=za.getPositionAboveOrBelow(1,Pa,
!0,0,za.charBoundsFromTextPosition(Pa).x),za.selection.addRange({start:Pa,end:Pa}));return!0}},{name:"[multi select] add cursor below",multiSelectAction:"single",exec:function(za){var Pa=za.selection.start;Pa.row<za.documentEndPosition.row&&(Pa=za.getPositionAboveOrBelow(-1,Pa,!0,0,za.charBoundsFromTextPosition(Pa).x),za.selection.addRange({start:Pa,end:Pa}));return!0}},{name:"[multi select] all like this",multiSelectAction:"single",exec:function(za){var Pa=za.selection.selections[za.selection.selections.length-
1];if(Pa.isEmpty())return!0;za.searchForAll(Pa.text,{start:{column:0,row:0}}).forEach(function(qb){return za.selection.addRange(qb.range,!1)});za.selection.mergeSelections();Fd.arr.remove(za.selection.selections,Pa);za.selection.selections.push(Pa);return!0}},{name:"[multi select] more like this forward",multiSelectAction:"single",exec:function(za){var Pa=za.selection.selections.length-1,qb=za.selection.selections[Pa];if(qb.isEmpty())return!0;var R=za.search(qb.text,{start:qb.end,backwards:!1});R&&
(qb=za.selection.selections.findIndex(function(wa){return wa.range.equals(R.range)}),-1<qb?Fd.arr.swap(za.selection.selections,qb,Pa):za.selection.addRange(R.range));return!0}},{name:"[multi select] more like this backward",multiSelectAction:"single",exec:function(za){var Pa=za.selection.selections.length-1,qb=za.selection.selections[Pa];if(qb.isEmpty())return!0;var R=qb.start,wa=za.search(qb.text,{start:{row:R.row,column:R.column-(qb.text.length-1)},backwards:!0});wa&&(qb=za.selection.selections.findIndex(function(Wa){return Wa.range.equals(wa.range)}),
-1<qb?Fd.arr.swap(za.selection.selections,qb,Pa):za.selection.addRange(wa.range));return!0}},{name:"[multi select] remove focused cursor",multiSelectAction:"single",exec:function(za){var Pa=za.selection.selections.length;1<Pa&&za.selection.removeSelections(Pa-1);return!0}},{name:"[multi select] goto previous focused cursor",multiSelectAction:"single",exec:function(za){za.selection.selections=lively.lang.arr.rotate(za.selection.selections,-1);return!0}},{name:"[multi select] goto next focused cursor",
multiSelectAction:"single",exec:function(za){za.selection.selections=lively.lang.arr.rotate(za.selection.selections,1);return!0}},{name:"[multi select] align cursors",multiSelectAction:"single",exec:function(za){var Pa=za.selection.selections;if(1>=Pa.length)return!0;var qb=Fd.arr.groupBy(Pa,function(wa){return wa.range.start.row});Pa=qb.keys().map(function(wa){wa=qb[wa];var Wa=Fd.arr.max(wa,function(hb){return hb.range.start.column});Fd.arr.without(wa,Wa).forEach(function(hb){return hb.range=Wa.range});
return Wa});var R=Fd.arr.max(Pa,function(wa){return wa.range.start.column}).range.start.column;Pa.forEach(function(wa){var Wa=wa.range.start;wa=Wa.row;Wa=Wa.column;za.insertText(" ".repeat(R-Wa),{row:wa,column:Wa})});return!0}},{name:"[multi select] create rectangular selection",multiSelectAction:"single",exec:function(za){za.selection.disableMultiSelect();if(za.selection.isEmpty())var Pa=za.lastSavedMark&&za.lastSavedMark.position||(void 0).lineRange().start,qb=za.cursorPosition;else Pa=za.selection,
qb=Pa.lead,Pa=Pa.anchor;za.selection.collapse();var R=Pa.column,wa=qb.column;Fd.arr.range(Pa.row,qb.row).forEach(function(Wa){return za.getLine(Wa).length>Math.min(wa,R)&&za.selection.addRange({end:{row:Wa,column:wa},start:{row:Wa,column:R}},!1)});za.selection.mergeSelections();return!0}},{name:"[multi select] count",multiSelectAction:"single",handlesCount:!0,exec:function(za,Pa,qb){qb=void 0===qb?1:qb;za.undoManager.group();za.selection.selections.forEach(function(R,wa){return R.text=String(wa+qb)});
za.undoManager.group();return!0}}];Fd.multiSelectCommands=Ee;Fd.multiSelectCommands=Ee;Fd.multiSelectCommands=Ee;var Cd=lively.FreezerRuntime.recorderFor("lively.ide/text/code-navigation-commands.js");Cd.pToI=function(za,Pa){return za.positionToIndex(Pa)};Cd.iToP=function(za,Pa){return za.indexToPosition(Pa)};Cd.execCodeNavigator=function(za){return function(Pa,qb,R){var wa=Pa.pluginInvokeFirst("getNavigator");if(!wa)return!0;Pa.saveMark();R=R||1;for(var Wa=0;Wa<R;Wa++)wa[za](Pa,qb);return!0}};Cd.once=
Qb;var ce=[{name:"forwardSexp",bindKey:"Ctrl-Alt-f|Ctrl-Alt-Right",exec:Cd.execCodeNavigator("forwardSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"backwardSexp",bindKey:"Ctrl-Alt-b|Ctrl-Alt-Left",exec:Cd.execCodeNavigator("backwardSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"backwardUpSexp",bindKey:"Ctrl-Alt-u|Ctrl-Alt-Up",exec:Cd.execCodeNavigator("backwardUpSexp"),multiSelectAction:"forEach",readOnly:!0},{name:"forwardDownSexp",bindKey:"Ctrl-Alt-d|Ctrl-Alt-Down",exec:Cd.execCodeNavigator("forwardDownSexp"),
multiSelectAction:"forEach",readOnly:!0},{name:"markDefun",bindKey:"Ctrl-Alt-h",exec:Cd.execCodeNavigator("markDefun"),multiSelectAction:"forEach",readOnly:!0},{name:"expandRegion",bindKey:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},exec:function(za,Pa){function qb(){var Wa=za.$expandRegionState,hb=Cd.pToI(za,za.cursorPosition);if(Wa&&(Wa.range[0]===hb||Wa.range[1]===hb))return Wa;Wa=za.selection.range;return za.$expandRegionState={range:[Cd.pToI(za,Wa.start),
Cd.pToI(za,Wa.end)]}}Pa=Pa||{};var R=za.pluginInvokeFirst("getNavigator");if(!R)return!0;var wa=Pa.start;Pa=Pa.end;if("number"===typeof wa&&"number"===typeof Pa)qb(),R={range:[wa,Pa],prev:qb()};else{wa=R.ensureAST(za);if(!wa)return;R=R.expandRegion(za,za.textString,wa,qb())}R&&R.range&&(za.selection={start:Cd.iToP(za,R.range[0]),end:Cd.iToP(za,R.range[1])},za.$expandRegionState=R);Cd.once(za,"selectionChange",function(){return za.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",
readOnly:!0},{name:"contractRegion",bindKey:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},exec:function(za){if(za.selection.isEmpty())return!0;var Pa=za.pluginInvokeFirst("getNavigator");if(!Pa)return!0;var qb=Pa.ensureAST(za);if(!qb)return!0;var R=za.$expandRegionState;if(!R)return!0;(Pa=Pa.contractRegion(za,za.textString,qb,R))&&Pa.range&&(za.selection={start:Cd.iToP(za,Pa.range[0]),end:Cd.iToP(za,Pa.range[1])},za.$expandRegionState=Pa);Cd.once(za,"selectionChange",
function(){return za.$expandRegionState=null},"call");return!0},multiSelectAction:"forEach",readOnly:!0}];Cd.commands=ce;Cd.commands=ce;Cd.commands=ce;var je=lively.FreezerRuntime.recorderFor("lively.ide/text/generic-code-commands.js");je.arr=Tb;je.chain=De;je.string=Mc;var Fe=[{name:"toggle comment",exec:function(za){var Pa=za.pluginInvokeFirst("getComment");if(!Pa)return!0;if(!Pa.lineCommentStart)return Pa.blockCommentStart?za.execCommand("toggle block comment"):!0;var qb=Pa.lineCommentStart,R=
new RegExp("^(\\s*)("+qb+"\\s?)(.*)");Pa=za.document;var wa=za.selection;wa.isEmpty()||0!==wa.end.column||wa.growRight(-1);var Wa=wa.start.row;Pa=Pa.lineStrings.slice(wa.start.row,wa.end.row+1);Pa=Pa.some(function(cc){return!!cc.trim()})?je.arr.dropWhile(Pa,function(cc){return cc.trim()?!1:++Wa&&!0}):Pa;var hb=Pa.every(function(cc){return cc.trim()&&cc.match(R)});za.undoManager.group();if(hb)Pa.forEach(function(cc,Gc){if(cc=cc.match(R)){cc=$jscomp.makeIterator(cc);cc.next();var Oc=cc.next().value,
Hc=cc.next().value;cc.next();za.deleteText({start:{row:Wa+Gc,column:Oc.length},end:{row:Wa+Gc,column:Oc.length+Hc.length}})}});else{var hc=Pa.reduce(function(cc,Gc,Oc){return Gc.trim()||wa.isEmpty()&&wa.start.row===wa.end.row?Math.min(cc,Gc.match(/^\s*/)[0].length):cc},Infinity);hc=Infinity===hc?0:hc;Pa.forEach(function(cc,Gc){cc=$jscomp.makeIterator(cc.match(/^(\s*)(.*)/));cc.next();cc.next();cc.next();za.insertText(qb+" ",{row:Wa+Gc,column:hc})})}za.undoManager.group();return!0}},{name:"toggle block comment",
exec:function(za){var Pa=za.pluginInvokeFirst("getComment");if(!Pa)return!0;if(!Pa.blockCommentStart)return Pa.lineCommentStart?za.execCommand("toggle comment"):!0;if(!Pa||!Pa.blockCommentStart)return!0;var qb=Pa.blockCommentStart;Pa=Pa.blockCommentEnd;var R=new RegExp("^"+qb.replace(/\*/g,"\\*")),wa=new RegExp(Pa.replace(/\*/g,"\\*")+"$"),Wa=za.tokenAt(za.cursorPosition);if(Wa&&"comment"===Wa.token){var hb=za.textInRange(Wa);if(hb.match(R)&&hb.match(wa))return za.undoManager.group(),za.replace(Wa,
hb.slice(qb.length,-Pa.length)),za.undoManager.group(),!0}za.undoManager.group();za.insertText(qb,za.selection.start);za.insertText(Pa,za.selection.end);za.undoManager.group();qb=!za.selection.isEmpty();za.selection.growLeft(Pa.length);qb||za.selection.collapse();return!0}},{name:"comment box",exec:function(za,Pa,qb){Pa=za.undoManager.ensureNewGroup(za,"comment box");if(za.selection.isEmpty())return za.insertText("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-"),za.execCommand("toggle comment"),
za.undoManager.group(Pa),!0;var R=za.selection.range,wa=za.withSelectedLinesDo(function(hb){return hb}),Wa=je.arr.min([R.start.column].concat(je.chain(wa).map(function(hb){return hb.match(/^\s*/)}).flatten().compact().pluck("length").value()));wa=je.arr.max(wa.map(function(hb){return hb.length}))-Wa;wa=Array(Math.ceil(wa/2)+1).join("-=")+"-";za.execCommand("toggle comment");za.collapseSelection();za.cursorPosition={row:R.start.row,column:0};qb?za.insertText(je.string.indent("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n",
" ",Wa)):za.insertText(je.string.indent(wa+"\n"," ",Wa));za.selection.goUp();za.execCommand("toggle comment");za.cursorPosition={row:R.end.row+2,column:0};za.insertText(je.string.indent(wa+"\n"," ",Wa));za.selection.goUp();za.execCommand("toggle comment");za.selection.range={start:{row:R.start.row,column:0},end:za.cursorPosition};za.undoManager.group(Pa);return!0},multiSelectAction:"forEach",handlesCount:!0}];je.commands=Fe;je.commands=Fe;je.commands=Fe;var Pc=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js");
Pc.printSymbol=function(za){if(Symbol.keyFor(za))return'Symbol.for("'+Symbol.keyFor(za)+'")';if(Pc.knownSymbols.get(za))return Pc.knownSymbols.get(za);String(za).match(Pc.symMatcher);return String(za)};Pc.defaultSort=function(za,Pa){if(za.hasOwnProperty("priority")||Pa.hasOwnProperty("priority")){var qb=za.priority||0,R=Pa.priority||0;if(qb<R)return-1;if(qb>R)return 1}za=(za.keyString||za.key).toLowerCase();Pa=(Pa.keyString||Pa.key).toLowerCase();return za<Pa?-1:za===Pa?0:1};Pc.safeToString=Na;Pc.propertyNamesOf=
function(za,Pa){if(!za)return[];if(Array.isArray(za)){var qb=Pa?Pa.offset:0;return Pc.arr.range(qb,qb+(Pa?Pa.partitionSize:za.length-1))}return Pc.arr.sortBy(Object.keys(za),function(R){return R.toLowerCase()})};Pc.isMultiValue=oc;Pc.printValue=aa;Pc.partitionedChildren=function(za,Pa){var qb=void 0===Pa?{}:Pa;Pa=void 0===qb.originalValue?za:qb.originalValue;var R=void 0===qb.offset?0:qb.offset;qb=void 0===qb.partitionSize?za.length||Object.values(za).length:qb.partitionSize;if(Pc.obj.isArray(za)){za=
Pc.num.roundTo(Math.max(Pc.MIN_PARTITION_SIZE,qb/50),.1);qb/=za;for(var wa=[],Wa=0;Wa<qb;Wa++){var hb="["+(R+Wa*za)+"-"+(R+(Wa+1)*za)+"]";wa.push({partition:{originalValue:Pa,offset:R+Wa*za,partitionSize:za},value:[],key:hb,keyString:hb,valueString:"...",isCollapsed:!0})}return wa}za=Pc.num.roundTo(Math.max(Pc.MIN_PARTITION_SIZE,qb/50),.1);qb/=za;wa=[];Wa=Pc.obj.keys(Pa).sort();for(hb=0;hb<qb;hb++){var hc=R+hb*za,cc=R+(hb+1)*za,Gc=Pc.obj.select(Pa,Wa.slice(hc,cc));hc="["+Wa[hc].slice(0,4)+"-"+(Wa[cc]||
Pc.arr.last(Wa)).slice(0,4)+"]";wa.push({partition:{originalValue:Gc,offset:R+hb*za,partitionSize:za},value:[],key:hc,keyString:hc,valueString:"...",isCollapsed:!0})}return wa};Pc.propertiesOf=function(za){var Pa=za.partition?za.target:za.value;if(!Pa)return[];var qb={_rev:!0},R=[],wa="function"===typeof Pa.livelyCustomInspect?Pa.livelyCustomInspect():{},Wa=Object.assign({},Pc.defaultPropertyOptions,{},wa);if(wa.properties){wa=$jscomp.makeIterator(wa.properties);for(var hb=wa.next();!hb.done;hb=wa.next()){var hc=
hb.value;hb=hc.key;var cc=hc.hidden,Gc=hc.priority,Oc=hc.keyString,Hc=hc.value;hc=hc.valueString;qb[hb]=!0;cc||R.push(za.getSubNode({priority:Gc,key:hb,keyString:Oc||Pc.safeToString(hb),value:Hc,valueString:hc,isCollapsed:!0}))}}if(Wa.includeDefault){wa=Pc.propertyNamesOf(Pa,za.partition);if(wa.length>Pc.MAX_NODE_THRESHOLD)for(qb=$jscomp.makeIterator(Pc.partitionedChildren(Pa,za.partition)),wa=qb.next();!wa.done;wa=qb.next())R.push(za.getSubNode(wa.value));else for(cc=$jscomp.makeIterator(wa),wa=
cc.next();!wa.done;wa=cc.next())Gc=wa.value,Gc in qb||(wa=Pa[Gc],hb=Pc.printValue(wa),wa={keyString:Gc,key:Gc,value:wa,valueString:hb,isCollapsed:!0},R.push(za.getSubNode(wa)));if(Wa.includeSymbols)for(qb=$jscomp.makeIterator(Object.getOwnPropertySymbols(Pa)),wa=qb.next();!wa.done;wa=qb.next())cc=wa.value,Gc=Pc.safeToString(cc),wa=Pa[cc],hb=Pc.printValue(wa),wa={key:cc,keyString:Gc,value:wa,valueString:hb,isCollapsed:!0},R.push(za.getSubNode(wa))}Wa.sort&&(R=Wa.sortFunction(Pa,R));return R};Pc.obj=
Xd;Pc.num=qc;Pc.arr=Tb;Pc.string=Mc;Pc.connect=Ec;Pc.signal=ld;Pc.TreeData=Pb;Pc.newUUID=ud;Pc.localInterface=Ka;Pc.MAX_NODE_THRESHOLD=1E3;Pc.MIN_PARTITION_SIZE=250;Pc.defaultPropertyOptions={includeDefault:!0,includeSymbols:!0,sort:!0,sortFunction:function(za,Pa){return Array.isArray(za)?Pa:Pa.sort(Pc.defaultSort)}};Pc.symMatcher=/^Symbol\((.*)\)$/;Pc.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(za){return"symbol"===typeof Symbol[za]}).reduce(function(za,Pa){return za.set(Symbol[Pa],
"Symbol."+Pa)},new Map)}();Pc.isMultiValue=oc;Pc.isMultiValue=oc;Pc.printValue=aa;Pc.printValue=aa;var fe=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),qb=Pa.hasOwnProperty("InspectionTree")&&"function"===typeof Pa.InspectionTree?Pa.InspectionTree:Pa.InspectionTree=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),
value:function(R){ub._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,R);this.inspector=R.inspector;this.root.isInspectionNode||(this.root=Pc.InspectionNode.for(this.root,this))}},{key:"__only_serialize__",get:function(){return["root"]}},{key:"asListWithIndexAndDepth",value:function(R){R=void 0===R?!0:R;return ub._get(Object.getPrototypeOf(qb.prototype),"asListWithIndexAndDepth",this).call(this,function(wa){wa=wa.node;return R?wa.visible:!0})}},{key:"getContextFor",
value:function(R){return R==this.root?this.root.value.inspectee:R.value}},{key:"dispose",value:function(){}},{key:"filter",value:function(R){var wa=void 0===R.maxDepth?1:R.maxDepth,Wa=R.iterator,hb=R.showUnknown,hc=R.showInternal,cc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){if(1==Gc.nextAddress)return Gc.yield(cc.uncollapseAll(function(Oc,Hc){return wa>Hc&&(Oc==cc.root||Oc.value.submorphs)}),2);cc.asListWithIndexAndDepth(!1).forEach(function(Oc){var Hc=Oc.node;return 0==
Oc.depth?Hc.visible=!0:!hb&&Hc.keyString&&Hc.keyString.includes("UNKNOWN PROPERTY")||!hc&&Hc.keyString&&Hc.keyString.includes("internal")?Hc.visible=!1:Hc.value&&Hc.value.submorphs?Hc.visible=!0:Hc.visible=Wa(Hc)});Gc.jumpToEnd()})}},{key:"getChildren",value:function(R){return R.children}},{key:"display",value:function(R){return R.display(this.inspector)}},{key:"isCollapsed",value:function(R){return R.isCollapsed}},{key:"isLeaf",value:function(R){return Pc.obj.isPrimitive(R.value)}},{key:"collapse",
value:function(R,wa){var Wa=this;R.isCollapsed=wa;wa||this.isLeaf(R)||R.children.length||(R.children=Pc.propertiesOf(R).map(function(hb){Wa.parentMap.set(hb,R);return hb}))}},{key:"retrieveForRemoteProxy",value:function(R){R.uuid||(R.uuid=Pc.newUUID(),this.idToNodeMap[R.uuid]=R);return{uuid:R.uuid,value:this.isLeaf(R)?R.value:{},keyString:R.keyString,key:R.keyString,valueString:Pc.safeToString(R.value),isCollapsed:!0,children:[]}}},{key:"systemInterface",get:function(){return Pc.localInterface}},
{key:"getNodeViaId",value:function(R){return this.idToNodeMap[R]}},{key:"asRemoteDelegate",value:function(R){this.idToNodeMap={};this.isRemoteDelegate=!0;System.get("@lively-env").remoteInspectionContext||(System.get("@lively-env").remoteInspectionContext={});System.get("@lively-env").remoteInspectionContext[R]=this;return this.retrieveForRemoteProxy(this.root)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectionTree"}},{key:"forObject",value:function(R,wa){return new this({key:"inspectee",
value:{inspectee:R},isCollapsed:!0,inspector:wa})}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5969,end:8683})}(Pc.TreeData);Pc.InspectionTree=fe;Pc.InspectionTree=fe;Pc.InspectionTree=fe;var ie=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),
qb=Pa.hasOwnProperty("RemoteInspectionTree")&&"function"===typeof Pa.RemoteInspectionTree?Pa.RemoteInspectionTree:Pa.RemoteInspectionTree=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"systemInterface",get:function(){return this.evalEnvironment.systemInterface}},{key:Symbol.for("lively-instance-initialize"),value:function(R){this.parentMap=new WeakMap;this.root=R.proxy;this.evalEnvironment=R.evalEnvironment;
this.inspector=R.inspector;this.delegateId=R.delegateId}},{key:"getContextFor",value:function(R){return"System.get('@lively-env').remoteInspectionContext[\""+this.delegateId+'"].getNodeViaId("'+R.uuid+'").value'}},{key:"dispose",value:function(){var R=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){return wa.yield(R.evalEnvironment.systemInterface.runEval("\n      delete System.get('@lively-env').remoteInspectionContext['"+R.delegateId+"']\n    ",R.evalEnvironment),0)})}},{key:"display",
value:function(R){return R.keyString+": "+R.valueString}},{key:"collapse",value:function(R,wa){var Wa=this,hb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return(R.isCollapsed=wa)||Wa.isLeaf(R)?hc.return():R.children.length?hc.jumpTo(0):hc.yield(Wa.evalEnvironment.systemInterface.runEval('\n         const node = this.getNodeViaId("'+R.uuid+'");\n         try {\n           this.collapse(node, false);\n         } catch (e) {\n\n         }\n         node.children.map(n => this.retrieveForRemoteProxy(n));\n      ',
{targetModule:"/lively.ide/js/inspector/context.js",context:"System.get('@lively-env').remoteInspectionContext[\""+Wa.delegateId+'"]'}),3);hb=hc.yieldResult;R.children=hb.isError?[]:hb.value;hc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RemoteInspectionTree"}},{key:"forObject",value:function(R,wa){var Wa=this,hb,hc,cc,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return Oc.yield(Wa.createRemoteContext(R,wa),2);hb=Oc.yieldResult;
hc=hb.proxy;cc=hb.delegateId;Gc=hb.evalEnvironment;return Oc.return(new Wa({key:"inspectee",proxy:hc,delegateId:cc,evalEnvironment:Gc,inspector:wa}))})}},{key:"createRemoteContext",value:function(R,wa){var Wa=R.code,hb=R.evalEnvironment,hc=R.delegateId,cc,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return hc="lively://inspector-"+wa.id,Oc.yield(hb.systemInterface.runEval('\n       const { InspectionTree } = await System.import("lively.ide/js/inspector/context.js");\n       const t = (() => '+
Wa+')();\n       const tree = InspectionTree.forObject(t);\n       tree.asRemoteDelegate("'+hc+'");\n    ',hb),2);cc=Oc.yieldResult;Gc=cc.value;return Oc.return({delegateId:hc,evalEnvironment:hb,proxy:Gc})})}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:8692,end:11045})}(Pc.InspectionTree);
Pc.RemoteInspectionTree=ie;Pc.RemoteInspectionTree=ie;Pc.RemoteInspectionTree=ie;(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),qb=Pa.hasOwnProperty("InspectionNode")&&"function"===typeof Pa.InspectionNode?Pa.InspectionNode:Pa.InspectionNode=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(R){var wa=
R.root,Wa=R.priority,hb=R.key,hc=R.keyString,cc=R.value,Gc=R.valueString,Oc=R.isCollapsed,Hc=void 0===R.children?[]:R.children,ye=void 0===R.isSelected?!1:R.isSelected,lf=void 0===R.visible?!0:R.visible;this.partition=R.partition;this.priority=Wa;this.key=hb;this.keyString=String(hc||hb);this.value=cc;this.valueString=Gc||Pc.printValue(cc);this.isCollapsed=Oc;this.children=Hc;this.isSelected=ye;this.visible=lf;this.root=wa}},{key:"__only_serialize__",get:function(){return[]}},{key:"isInspectionNode",
get:function(){return!0}},{key:"getSubNode",value:function(R){if(R.value&&R.value.isMorph)return new Pc.MorphNode(Object.assign({root:this.root},R));var wa=R.key,Wa=R.keyString,hb=this.value,hc=R.partition;hc&&(hb=hc.originalValue,Wa=wa);return new Pc.PropertyNode(Object.assign({},R,{keyString:Wa,key:wa,target:hb,partition:hc,root:this.root,spec:{}}))}},{key:"display",value:function(R){var wa=this.keyString,Wa=this.valueString;if(!this.interactive)return wa+": "+Wa;this._propertyWidget||(this._propertyWidget=
R.renderDraggableTreeLabel({value:wa+": "+Wa}));this._propertyWidget.isSelected=this.isSelected;return this._propertyWidget}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectionNode"}},{key:"for",value:function(R,wa){wa=void 0===wa?null:wa;return R.value&&R.value.isMorph?new Pc.MorphNode(Object.assign({root:wa},R)):new Pc.InspectionNode(Object.assign({root:wa},R))}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11047,end:13612})})(void 0);(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),qb=Pa.hasOwnProperty("MorphNode")&&"function"===typeof Pa.MorphNode?Pa.MorphNode:Pa.MorphNode=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),
value:function(R){ub._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,R);this.target=this.value;this.propertyInfo=this.target.propertiesAndPropertySettings().properties}},{key:"getSubNode",value:function(R){var wa=this.propertyInfo[R.key]||{};return R.value&&R.value.isMorph?new Pc.MorphNode(Object.assign({},R,{root:this.root})):new Pc.PropertyNode(Object.assign({},R,{root:this.root,target:this.target,spec:wa}))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MorphNode"}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:13614,end:14763})})(Pc.InspectionNode);(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),qb=Pa.hasOwnProperty("PropertyNode")&&"function"===typeof Pa.PropertyNode?
Pa.PropertyNode:Pa.PropertyNode=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(R){ub._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,R);var wa=R.spec,Wa=R.target;this.partition=R.partition;this.target=Wa;this.spec=wa;this.foldedNodes={}}},{key:"__deserialize__",value:function(R,wa){this.spec=
{}}},{key:"interactive",get:function(){return this._interactive}},{key:"interactive",set:function(R){this._interactive=R}},{key:"isFoldable",get:function(){return!!this.spec.foldable}},{key:"isInternalProperty",get:function(){return"id"==this.keyString||this.keyString.includes("internal")}},{key:"getSubNode",value:function(R){return this.isFoldable?this.getFoldedContext(R):ub._get(Object.getPrototypeOf(qb.prototype),"getSubNode",this).call(this,R)}},{key:"getFoldedContext",value:function(R){return this.foldedNodes[R.key]=
new Pc.FoldedNode(Object.assign({},R,{root:this.root,target:this.target,foldableNode:this,spec:Pc.obj.dissoc(this.spec,["foldable"])}))}},{key:"rerender",value:function(){this.root.inspector.refreshSelectedLine()}},{key:"refreshProperty",value:function(R,wa){(wa=void 0===wa?!1:wa)&&(this.target[this.key]=R);this.value=this.target[this.key];this.valueString=Pc.printValue(this.value);this.interactive&&(wa||this._propertyWidget.highlight());if(this.isFoldable)for(var Wa in this.foldedNodes)this.foldedNodes[Wa].value=
this.value[Wa],this.foldedNodes[Wa].valueString=Pc.printValue(this.value[Wa]),this.foldedNodes[Wa]._propertyWidget&&Pc.signal(this.foldedNodes[Wa]._propertyWidget,"update",this.value[Wa])}},{key:"display",value:function(R){var wa=this,Wa=this._propertyWidget,hb=this.keyString,hc=this.valueString,cc=this.target,Gc=this.value,Oc=this.spec;if(!(this.interactive||Oc.foldable&&Pc.isMultiValue(Gc,Oc.foldable)))return R.renderPropertyControl({target:cc,keyString:hb,valueString:hc,tree:R.ui.propertyTree,
value:Gc,spec:Oc,node:this,fastRender:!0});if(Wa)return Wa.keyString=hb,Wa.valueString=hc,Wa.isSelected=this.isSelected,Wa.control&&(Wa.control.isSelected=this.isSelected),Wa;Wa=this._propertyWidget=R.renderPropertyControl({target:cc,keyString:hb,valueString:hc,value:Gc,spec:Oc,node:this,isSelected:this.isSelected,fontColor:R.ui.propertyTree.fontColor});this.isInternalProperty||Oc.readOnly||(Pc.connect(Wa,"propertyValue",this,"refreshProperty",{updater:function(Hc,ye){return Hc(ye,!0)}}),Pc.connect(Wa,
"openWidget",this.root,"onWidgetOpened",{converter:function(Hc){return{widget:Hc,node:wa.sourceObj}}}));return Wa}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyNode"}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14765,end:18244})})(Pc.InspectionNode);
(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector/context.js"),qb=Pa.hasOwnProperty("FoldedNode")&&"function"===typeof Pa.FoldedNode?Pa.FoldedNode:Pa.FoldedNode=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(R){ub._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
R);this.foldableNode=R=R.foldableNode;this.foldedProp=R.key+Pc.string.capitalize(this.key)}},{key:"refreshProperty",value:function(R,wa){wa=void 0===wa?!1:wa;var Wa={};this.foldableNode.refreshProperty(Object.assign({},this.target[this.foldableNode.key],(Wa[this.key]=R,Wa)),wa)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FoldedNode"}}],Pa,{pathInPackage:function(){return"js/inspector/context.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:18246,end:18928})})(Pc.PropertyNode);var ef=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js");ef.Color=ob;var ff=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/themes/dark.js"),qb=Pa.hasOwnProperty("DarkTheme")&&"function"===typeof Pa.DarkTheme?Pa.DarkTheme:Pa.DarkTheme=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ub(qb,za,[{key:"background",get:function(){return ef.Color.rgb(44,62,80)}},{key:"cursorColor",get:function(){return ef.Color.gray}},{key:"default",get:function(){return{fontColor:"#abb2bf"}}},{key:"header",get:function(){return{fontSize:"110%",fontColor:"#6b94ee"}}},{key:"header-1",get:function(){return{fontSize:"135%",fontColor:"#6b94ee"}}},{key:"header-2",get:function(){return{fontSize:"125%",fontColor:"#6b94be"}}},{key:"header-3",get:function(){return{fontSize:"120%",fontColor:"#6b94be"}}},
{key:"quote",get:function(){return{fontColor:"#090"}}},{key:"negative",get:function(){return{fontColor:"#d44"}}},{key:"positive",get:function(){return{fontColor:"#292"}}},{key:"strong",get:function(){return{fontWeight:"bold"}}},{key:"em",get:function(){return{fontStyle:"italic"}}},{key:"link",get:function(){return{textDecoration:"underline"}}},{key:"strikethrough",get:function(){return{textDecoration:"line-through"}}},{key:"hr",get:function(){return{fontColor:"#999"}}},{key:"link",get:function(){return{textDecoration:"underline",
fontColor:"#2c2cff"}}},{key:"url",get:function(){return{textDecoration:"underline",fontColor:"#2c2cff"}}},{key:"keyword",get:function(){return{fontColor:ef.Color.rgb(204,109,243)}}},{key:"atom",get:function(){return{fontColor:"#d19a66"}}},{key:"number",get:function(){return{fontColor:ef.Color.orange}}},{key:"def",get:function(){return{fontColor:"#e5c07b"}}},{key:"variable",get:function(){return{fontColor:"#d19a66"}}},{key:"punctuation",get:function(){return{fontColor:"#05a"}}},{key:"property",get:function(){return{fontColor:ef.Color.rgb(33,
150,243)}}},{key:"operator",get:function(){return{fontColor:"#abb2bf"}}},{key:"variable-2",get:function(){return{fontColor:"#e06c75"}}},{key:"variable-3",get:function(){return{fontColor:"#085"}}},{key:"comment",get:function(){return{fontColor:"#7F848E"}}},{key:"string",get:function(){return{fontColor:"#98c378"}}},{key:"string-2",get:function(){return{fontColor:"#98c378"}}},{key:"meta",get:function(){return{fontColor:"#555"}}},{key:"qualifier",get:function(){return{fontColor:"#d19a66"}}},{key:"builtin",
get:function(){return{fontColor:"#30a"}}},{key:"bracket",get:function(){return{fontColor:"#515a6b"}}},{key:"brace",get:function(){return{fontColor:"#abb2bf"}}},{key:"tag",get:function(){return{fontColor:"#170"}}},{key:"attribute",get:function(){return{fontColor:"#d19a66"}}},{key:"error",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"invalidchar",get:function(){return{backgroundColor:"#ff4c4c"}}},{key:"diff-file-header",get:function(){return{fontColor:ef.Color.white,fontWeight:"bold",backgroundColor:ef.Color.rgba(136,
136,136,.7)}}},{key:"diff-hunk-header",get:function(){return{backgroundColor:ef.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"coord",get:function(){return{backgroundColor:ef.Color.rgba(204,204,204,.4),fontWeight:"bold"}}},{key:"inserted",get:function(){return{backgroundColor:"rgba(108,255,108, .3)"}}},{key:"deleted",get:function(){return{backgroundColor:"rgba(255,108,108, .3)"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DarkTheme"}},{key:"instance",get:function(){return this._instance||
(this._instance=new this)}}],Pa,{pathInPackage:function(){return"themes/dark.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:42,end:3009})}(void 0),Nf=ff=ef.DarkTheme;ef.default=ff;var Vb=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js");Vb.inspect=na;Vb.remoteInspect=gb;Vb.generateReferenceExpression=H;Vb.onNumberDragStart=
function(za,Pa){Pa.initPos=za.position;Pa.factorLabel=(new Vb.Tooltip({description:"1x"})).openInWorld(za.hand.position.addXY(10,10))};Vb.onNumberDrag=function(za,Pa){var qb=Vb.getScaleAndOffset(za,Pa),R=qb.scale;qb=qb.offset;Pa.factorLabel.position=za.hand.position.addXY(10,10);Pa.factorLabel.description=R+"x";return Vb.getCurrentValue(qb,R,Pa)};Vb.onNumberDragEnd=function(za,Pa){var qb=Vb.getScaleAndOffset(za,Pa);za=qb.offset;qb=qb.scale;Pa.factorLabel.softRemove();return Vb.getCurrentValue(za,
qb,Pa)};Vb.getScaleAndOffset=function(za,Pa){var qb=za.position.subPt(Pa.initPos);za=qb.x;Pa=Vb.num.roundTo(Math.exp(-qb.y/$world.height*6),.01)*Pa.baseFactor;return{offset:za,scale:Pa}};Vb.getCurrentValue=function(za,Pa,qb){return Math.max(qb.min,Math.min(qb.max,qb.scrubbedValue+(qb.floatingPoint?za*Pa:Math.round(za*Pa))))};Vb.Color=ob;Vb.Rectangle=Jb;Vb.rect=Ed;Vb.pt=rd;Vb.obj=Xd;Vb.num=qc;Vb.Path=vc;Vb.arr=Tb;Vb.promise=ac;Vb.connect=Ec;Vb.disconnect=Eb;Vb.once=Qb;Vb.Morph=ec;Vb.Tooltip=wc;Vb.VerticalLayout=
fd;Vb.GridLayout=cd;Vb.HorizontalLayout=pc;Vb.morph=yc;Vb.CustomLayout=cb;Vb.Label=fb;Vb.Icon=ya;Vb.StyleSheet=zc;Vb.config=Ea;Vb.Tree=Ba;Vb.LoadingIndicator=xa;Vb.DropDownList=Qa;Vb.DropDownSelector=wb;Vb.SearchField=fc;Vb.LabeledCheckBox=$a;Vb.MorphHighlighter=U;Vb.InteractiveMorphSelector=ua;Vb.printValue=aa;Vb.RemoteInspectionTree=ie;Vb.InspectionTree=fe;Vb.isMultiValue=oc;Vb.valueWidgets=M;Vb.popovers=ea;Vb.DarkTheme=Nf;Vb.DefaultTheme=Sb;Vb.syncEval=ib;Vb.inspectorCommands=[{name:"focus codeEditor",
exec:function(za){za.get("codeEditor").show();za.get("codeEditor").focus();return!0}},{name:"focus propertyTree",exec:function(za){za.get("propertyTree").show();za.get("propertyTree").focus();return!0}}];(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("DraggedProp")&&"function"===typeof Pa.DraggedProp?Pa.DraggedProp:Pa.DraggedProp=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ub(qb,za,[{key:"applyToTarget",value:function(R){var wa=this.currentTarget,Wa=this.control;this.remove();Vb.MorphHighlighter.removeHighlighters(R.world);if(wa)if(wa.isText&&"js"===wa.editorModeName){var hb=wa.evalEnvironment.context;R=wa.textPositionFromPoint(wa.localize(R.position));hb=Vb.generateReferenceExpression(this.sourceObject,{fromMorph:hb});Wa.keyString&&(hb+="."+Wa.keyString);wa.insertTextAndSelect(hb,R);wa.focus()}else"propertyValue"in Wa&&(wa[Wa.keyString]=Wa.propertyValue)}},
{key:"update",value:function(R){R=R.hand.globalPosition;var wa=this.morphBeneath(R);if(wa){for(wa==this.morphHighlighter&&(wa=wa.morphBeneath(R));[wa].concat($jscomp.arrayFromIterable(wa.ownerChain())).find(function(Wa){return!Wa.visible});)wa=wa.morphBeneath(R);if(wa!=this.currentTarget){this.currentTarget=wa;this.morphHighlighter&&this.morphHighlighter.deactivate();if(wa.isWorld)return;this.morphHighlighter=Vb.MorphHighlighter.for($world,wa);this.morphHighlighter.show()}this.position=R}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"DraggedProp"}},{key:"properties",get:function(){return{control:{},sourceObject:{},borderColor:{defaultValue:Vb.Color.rgb(169,204,227)},fill:{defaultValue:Vb.Color.rgb(235,245,251).withA(.8)},borderWidth:{defaultValue:2},borderRadius:{defaultValue:4},submorphs:{after:["control"],initialize:function(){var R=this.control;if(!R)return this.submorphs=[];this.height=22;this.submorphs=[R];R.top=0;R.fontSize=14;"function"===typeof R.relayout&&R.relayout();this.width=R.width+20;this.adjustOrigin(Vb.pt(10,
10))}}}}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1272,end:3714})})(Vb.Morph);(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("DraggableTreeLabel")&&"function"===typeof Pa.DraggableTreeLabel?Pa.DraggableTreeLabel:Pa.DraggableTreeLabel=
function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"inspector",get:function(){return this.owner.owner}},{key:"onDragStart",value:function(R){this.draggedProp=new Vb.DraggedProp({sourceObject:this.inspector.targetObject,control:this.copy()});this.draggedProp.openInWorld();Vb.connect(R.hand,"update",this.draggedProp,"update")}},{key:"onDrag",value:function(R){}},{key:"onDragEnd",value:function(R){Vb.disconnect(R.hand,
"update",this.draggedProp,"update");this.draggedProp.applyToTarget(R)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DraggableTreeLabel"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["TreeLabel"]},draggable:{defaultValue:!0},nativeCursor:{defaultValue:"-webkit-grab"},keyString:{},valueString:{},fontFamily:{defaultValue:Vb.config.codeEditor.defaultStyle.fontFamily},fill:{defaultValue:Vb.Color.transparent},padding:{defaultValue:Vb.rect(0,1,10,-1)},isSelected:{after:["submorphs"],
set:function(R){this.setProperty("isSelected",R);R?(this.removeStyleClass("deselected"),this.addStyleClass("selected")):(this.addStyleClass("deselected"),this.removeStyleClass("selected"));this.control&&(this.control.isSelected=R)}}}}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3716,
end:5055})})(Vb.Label);fe=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("PropertyControl")&&"function"===typeof Pa.PropertyControl?Pa.PropertyControl:Pa.PropertyControl=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"menuItems",value:function(){return this._targetMenuItems||[]}},{key:"renderValueSelector",value:function(R,wa,Wa){R.control=
new Vb.DropDownSelector({opacity:.8,fill:Vb.Color.white.withA(.5),name:"valueString",styleClasses:["TreeLabel"],selectedValue:wa,padding:0,values:Wa});Vb.connect(R.control,"update",R,"propertyValue",{updater:function(hb,hc){this.targetObj.propertyValue!=hc&&hb(hc)}});Vb.connect(R,"update",R.control,"selectedValue",{updater:function(hb,hc){hc=hc&&hc.valueOf?hc.valueOf():hc;this.targetObj.propertyValue!=hc&&hb(hc)}});return R}},{key:"toggleMultiValuePlaceholder",value:function(R){this.multiValuePlaceholder=
this.multiValuePlaceholder||this.addMorph({fill:Vb.Color.transparent,layout:new Vb.HorizontalLayout({spacing:3}),name:"multi value placeholder",nativeCursor:"pointer",submorphs:Vb.arr.range(0,2).map(function(wa){return{type:"ellipse",fill:Vb.Color.gray.withA(.5),reactsToPointer:!1,extent:Vb.pt(7,7)}})});R?(Vb.connect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue",{converter:function(){return this.targetObj.propertyValue.valueOf()}}),this.control.opacity=0,this.multiValuePlaceholder.visible=
!0):(Vb.disconnect(this.multiValuePlaceholder,"onMouseDown",this,"propertyValue"),this.control.opacity=1,this.multiValuePlaceholder.visible=!1)}},{key:"toggleFoldableValue",value:function(R){this.foldableProperties&&this.toggleMultiValuePlaceholder(Vb.isMultiValue(R,this.foldableProperties))}},{key:"asFoldable",value:function(R){this.foldableProperties=R;Vb.connect(this,"update",this,"toggleFoldableValue")}},{key:"relayout",value:function(){this.fit();this.control&&(this.control.topLeft=this.textBounds().topRight().addXY(-2,
1),this.width=this.textBounds().width+this.control.bounds().width);this.height=18;this.multiValuePlaceholder&&(this.multiValuePlaceholder.leftCenter=this.textBounds().rightCenter())}},{key:"toString",value:function(){return this.keyString+": "+this.valueString}},{key:"highlight",value:function(){this.highlighter&&this.highlighter.remove();var R=this.highlighter=this.addMorph({type:"label",name:"valueString",value:this.keyString});R.isLayoutable=!1;R.fontWeight="bold";R.fontColor=Vb.Color.orange;R.reactsToPointer=
!1;R.fadeOut(2E3)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyControl"}},{key:"properties",get:function(){return{root:{},keyString:{},valueString:{},propertyValue:{},control:{after:["submorphs"],derived:!0,get:function(){return this.submorphs[0]||!1},set:function(R){this.submorphs=[R]}},layout:{initialize:function(){this.layout=new Vb.CustomLayout({relayout:function(R){R.relayout()}})}},submorphs:{initialize:function(){this.value=this.keyString+":";this.submorphs=[]}}}}},
{key:"inferType",value:function(R){return(R=R.value)&&(R.isColor||R.isGradient)?"Color":R&&R.isPoint?"Point":Vb.obj.isBoolean(R)?"Boolean":Vb.obj.isNumber(R)?"Number":Vb.obj.isString(R)?"String":R&&R.isRectangle?"Rectangle":!1}},{key:"render",value:function(R){R.spec.type||(R.spec=Object.assign({},R.spec,{isFloat:!Number.isInteger(R.value),type:this.inferType(R)}));switch(R.spec.type){case "Color":var wa=this.renderColorControl(R);break;case "ColorGradient":wa=this.renderColorControl(Object.assign({},
R,{gradientEnabled:!0}));break;case "Number":wa=this.renderNumberControl(R);break;case "String":wa=this.renderStringControl(R);break;case "RichText":wa=this.renderStringControl(R);break;case "Layout":wa=this.renderLayoutControl(R);break;case "Enum":wa=this.renderEnumControl(R);break;case "Shadow":wa=this.renderShadowControl(R);break;case "Point":wa=this.renderPointControl(R);break;case "Rectangle":wa=this.renderRectangleControl(R);break;case "Boolean":wa=this.renderBooleanControl(R);break;default:wa=
this.renderItSomehow(R)}wa.control&&(Vb.connect(wa.control,"openWidget",wa,"openWidget"),wa.toggleFoldableValue(R.value));return wa}},{key:"baseControl",value:function(R){var wa=R.spec;R=new this({keyString:R.keyString,valueString:R.valueString,isSelected:!1,propertyValue:R.value});wa.foldable&&R.asFoldable(wa.foldable);return R}},{key:"renderGrabbableKey",value:function(R){var wa=this,Wa=R.target;return[R.keyString+":",{nativeCursor:"-webkit-grab",onDragStart:function(hb){hb.state.draggedProp=new Vb.DraggedProp({sourceObject:Wa,
control:wa.baseControl(R)});hb.state.draggedProp.openInWorld();Vb.connect(hb.hand,"update",hb.state.draggedProp,"update")},onDrag:function(hb){},onDragEnd:function(hb){Vb.disconnect(hb.hand,"update",hb.state.draggedProp,"update");hb.state.draggedProp.applyToTarget(hb)}}]}},{key:"renderEnumControl",value:function(R){var wa=R.value,Wa=R.spec.values,hb=R.keyString,hc=R.target,cc=R.node,Gc=function(Oc,Hc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){hc.world().openWorldMenu(Oc,Wa.map(function(lf){return{string:lf.toString(),
action:function(){hc[hb]=lf;cc.rerender()}}}));ye.jumpToEnd()})};return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+(wa?wa.valueOf?wa.valueOf():wa:"Not set"),{nativeCursor:"pointer",onMouseDown:Gc}],$jscomp.arrayFromIterable(Vb.Icon.textAttribute("angle-down",{paddingTop:"4px",paddingLeft:"4px",opacity:.7,onMouseDown:Gc})))}},{key:"renderStringControl",value:function(R){var wa=R.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+(200<wa.length?
wa.slice(0,20)+"...":wa),{fontColor:Vb.Color.blue,paddingTop:"0px"}])}},{key:"renderRectangleControl",value:function(R){var wa=R.value,Wa=R.keyString,hb=R.valueString,hc=R.target,cc=R.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+hb,{fontColor:Vb.Color.black,nativeCursor:"pointer",onMouseDown:function(Gc){var Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hc){if(1==Hc.nextAddress)return Oc=new Vb.popovers.RectanglePopover({hasFixedPosition:!0,rectangle:wa}),
Oc.relayout(),Hc.yield(Oc.fadeIntoWorld(Gc.positionIn(hc.world())),2);Vb.connect(Oc,"rectangle",function(ye){hc[Wa]=ye;cc.rerender()});Hc.jumpToEnd()})}}])}},{key:"renderBooleanControl",value:function(R){var wa=R.value,Wa=R.keyString,hb=R.valueString,hc=R.target,cc=R.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+hb,{nativeCursor:"pointer",fontColor:wa?Vb.Color.green:Vb.Color.red,onMouseDown:function(Gc){hc[Wa]=!hc[Wa];cc.rerender()}}])}},{key:"renderNumberControl",
value:function(R){var wa=R.value,Wa=R.spec,hb=R.keyString,hc=R.valueString,cc=R.node,Gc=R.target,Oc=R.tree,Hc=void 0===cc._numberControls?new ng:cc._numberControls,ye=$jscomp.makeIterator(Hc.submorphs),lf=ye.next().value,Ye=ye.next().value;Hc.fontColor=Oc.fontColor;var zg=cc._numberControls=Hc;"max"in Wa&&"min"in Wa&&-Infinity!=Wa.min&&Infinity!=Wa.max?(zg.baseFactor=(Wa.max-Wa.min)/100,zg.floatingPoint=Wa.isFloat,zg.max=Wa.max,zg.min=Wa.min):(zg.floatingPoint=Wa.isFloat,zg.baseFactor=.5,zg.min=void 0!=
Wa.min?Wa.min:-Infinity,zg.max=void 0!=Wa.max?Wa.max:Infinity);var Ie=Vb.valueWidgets.NumberWidget.properties.fontColor.defaultValue;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),$jscomp.arrayFromIterable(cc._inputMorph?[cc._inputMorph,{}]:[" "+(void 0!=wa&&(wa.valueOf?wa.valueOf():wa).toFixed(Wa.isFloat?Math.max(4,Vb.num.precision(wa)):0))+" ",{fontColor:Ie,onMouseUp:function(sg){cc._inputMorph=Vb.morph({type:"input",fill:null,fontColor:Ie,fontFamily:"IBM Plex Mono",fontSize:14,
padding:Vb.rect(8,2,-6,2),height:23,cursorColor:Vb.Color.white,value:wa.valueOf?wa.valueOf():hc});Gc[hb]=wa;cc._inputMorph.focus();Vb.once(cc._inputMorph,"inputAccepted",function(Gi){delete cc._inputMorph;Gc[hb]=Wa.isFloat?Number.parseFloat(Gi):Number.parseInt(Gi);cc.rerender()});Vb.once(cc._inputMorph,"onBlur",function(Gi){cc._inputMorph&&(delete cc._inputMorph,Gc[hb]=wa,cc.rerender())});cc.rerender()},onDragStart:function(sg){zg.scrubbedValue=wa;Vb.onNumberDragStart(sg,zg)},onDrag:function(sg){Gc[hb]=
Vb.onNumberDrag(sg,zg);cc.rerender()},onDragEnd:function(sg){return Vb.onNumberDragEnd(sg,zg)}},Hc,{onMouseUp:function(){lf.fill=Ye.fill=null},onMouseDown:function(sg){if(sg.targetMorph===lf){lf.fill=Vb.Color.white.withA(.2);if("max"in Wa&&Gc[hb]>=Wa.max)return;Gc[hb]+=1}if(sg.targetMorph===Ye){Ye.fill=Vb.Color.white.withA(.2);if("min"in Wa&&Gc[hb]<=Wa.min)return;--Gc[hb]}cc.rerender()}}]))}},{key:"renderShadowControl",value:function(R){var wa=R.keyString,Wa=R.value,hb=R.target,hc=R.node;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),
[""+(Wa?Wa.toFilterCss():"No Shadow"),{nativeCursor:"pointer",onMouseDown:function(cc){var Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return Gc=new Vb.popovers.ShadowPopover({shadowValue:hb[wa],hasFixedPosition:!0}),Oc.yield(Gc.fadeIntoWorld(cc.positionIn(hb.world())),2);Vb.connect(Gc,"shadowValue",function(Hc){hb[wa]=Hc;hc.rerender()});Oc.jumpToEnd()})}}])}},{key:"renderPointControl",value:function(R){var wa=R.keyString,Wa=R.value,hb=R.target,hc=R.node,
cc=Vb.valueWidgets.NumberWidget.properties.fontColor.defaultValue,Gc={nativeCursor:"pointer",onMouseDown:function(Oc){var Hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){if(1==ye.nextAddress)return Hc=new Vb.popovers.PointPopover({pointValue:hb[wa],hasFixedPosition:!0}),ye.yield(Hc.fadeIntoWorld(Oc.positionIn(hb.world())),2);Vb.connect(Hc,"pointValue",function(lf){hb[wa]=lf;hc.rerender()});ye.jumpToEnd()})}};return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),
[" pt(",Object.assign({},Gc),""+Wa.x.toFixed(),Object.assign({fontColor:cc},Gc),",",Object.assign({},Gc),""+Wa.y.toFixed(),Object.assign({fontColor:cc},Gc),")",Object.assign({},Gc)])}},{key:"renderLayoutControl",value:function(R){var wa=R.valueString,Wa=R.value;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+(Wa?wa:"No Layout"),{onMouseDown:function(hb){}}])}},{key:"renderColorControl",value:function(R){var wa=R.node,Wa=R.gradientEnabled,hb=R.valueString,hc=R.keyString,
cc=R.value,Gc=R.target;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[Vb.morph({fill:cc.valueOf?cc.valueOf():cc,extent:Vb.pt(15,15),borderColor:Vb.Color.gray,borderWidth:1}),{paddingLeft:"5px",paddingTop:"4px",paddingRight:"5px"},""+(cc?cc.valueOf?cc.valueOf():hb:"No Color"),{nativeCursor:"pointer",onMouseDown:function(Oc){var Hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ye){if(1==ye.nextAddress)return Hc=new Vb.popovers.FillPopover({hasFixedPosition:!0,handleMorph:Gc,
fillValue:cc,title:"Fill Control",gradientEnabled:Wa}),ye.yield(Hc.fadeIntoWorld(Oc.positionIn(Gc.world())),2);Vb.connect(Hc,"fillValue",function(lf){Gc[hc]=lf;wa.rerender()});ye.jumpToEnd()})}}])}},{key:"renderItSomehow",value:function(R){var wa=R.valueString;return[].concat($jscomp.arrayFromIterable(this.renderGrabbableKey(R)),[" "+wa,{}])}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5064,end:20451})}(Vb.DraggableTreeLabel);Vb.PropertyControl=fe;Vb.PropertyControl=fe;Vb.PropertyControl=fe;Vb.inspect=na;Vb.inspect=na;Vb.remoteInspect=gb;Vb.remoteInspect=gb;Vb.generateReferenceExpression=H;Vb.generateReferenceExpression=H;var ng=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("NumberControls")&&"function"===typeof Pa.NumberControls?Pa.NumberControls:Pa.NumberControls=
function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberControls"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Vb.VerticalLayout({spacing:0,orderByIndex:!0})}},fill:{defaultValue:Vb.Color.transparent},width:{defaultValue:15},fontColor:{derived:!0,set:function(R){this.submorphs.map(function(wa){return wa.fontColor=
R})}},submorphs:{initialize:function(){this.submorphs=[Vb.Icon.makeLabel("sort-up",{autofit:!0,opacity:.6,nativeCursor:"pointer",padding:Vb.rect(5,2,0,-6),fontSize:12}),Vb.Icon.makeLabel("sort-up",{top:10,rotation:Math.PI,autofit:!0,padding:Vb.rect(5,4,0,-9),opacity:.6,nativeCursor:"pointer",fontSize:12})]}}}}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23124,end:24169})}(Vb.Morph);(function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("PropertyTree")&&"function"===typeof Pa.PropertyTree?Pa.PropertyTree:Pa.PropertyTree=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"onDrag",value:function(R){this._onDragHandler&&this._onDragHandler(R)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyTree"}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25334,end:25445})})(Vb.Tree);fe=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/js/inspector.js"),qb=Pa.hasOwnProperty("Inspector")&&"function"===
typeof Pa.Inspector?Pa.Inspector:Pa.Inspector=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:"onWindowClose",value:function(){this.stopStepping();this.ui.propertyTree.treeData.dispose();this.openWidget&&this.closeOpenWidget()}},{key:"onMouseMove",value:function(R){}},{key:"__after_deserialize__",value:function(R,wa,Wa){var hb=this,hc=new Vb.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,
{treeData:Vb.InspectionTree.forObject(null,this)}));this.addMorph(hc,this.getSubmorphNamed("terminal toggler"));ub._get(Object.getPrototypeOf(qb.prototype),"__after_deserialize__",this).call(this,R,wa,Wa);!this.isComponent&&this.master.whenApplied().then(function(){hb.layout.col(0).row(1).group.morph=hc;hb.targetObject&&(hb.targetObject=hb.targetObject)})}},{key:"__additionally_serialize__",value:function(R,wa,Wa,hb){R=R.props.submorphs.value;for(wa=R.length;wa--;)Wa.refForId(R[wa].id).realObj==this.ui.propertyTree&&
Vb.arr.removeAt(R,wa)}},{key:"renderDraggableTreeLabel",value:function(R){return new Vb.DraggableTreeLabel(R)}},{key:"renderPropertyControl",value:function(R){return Vb.PropertyControl.render(R)}},{key:"onLoad",value:function(){var R=this.ui,wa=R.codeEditor,Wa=R.thisBindingSelector,hb=R.propertyTree;wa.changeEditorMode("js").then(function(){return wa.evalEnvironment={targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==Wa.selection?wa.owner.selectedContext:wa.owner.targetObject},
get systemInterface(){return Vb.Path("treeData.systemInterface").get(hb)},format:"esm"}}).catch(function(hc){return $world.logError(hc)})}},{key:Symbol.for("lively-instance-initialize"),value:function(R){ub._get(Object.getPrototypeOf(qb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,R);R=this.ui;var wa=R.targetPicker,Wa=R.propertyTree,hb=R.resizer,hc=R.terminalToggler,cc=R.unknowns,Gc=R.internals,Oc=R.searchField,Hc=R.codeEditor,ye=R.fixImportButton,lf=R.thisBindingSelector;Hc.changeEditorMode("js").then(function(){return Hc.evalEnvironment=
{targetModule:"lively://lively.morphic/inspector",get context(){return"selection"==lf.selection?Hc.owner.selectedContext:Hc.owner.targetObject},get systemInterface(){return Wa.treeData.systemInterface},format:"esm"}}).catch(function(Ye){return $world.logError(Ye)});Vb.connect(wa,"onMouseDown",this,"selectTarget");Vb.connect(Wa,"onScroll",this,"repositionOpenWidget");Vb.connect(hb,"onDrag",this,"adjustProportions");Vb.connect(hc,"onMouseDown",this,"toggleCodeEditor");Vb.connect(cc,"trigger",this,"filterProperties");
Vb.connect(Gc,"trigger",this,"filterProperties");Vb.connect(Oc,"searchInput",this,"filterProperties");Vb.connect(Wa,"nodeCollapseChanged",this,"filterProperties");Vb.connect(this,"extent",this,"relayout");Vb.connect(lf,"selection",this,"bindCodeEditorThis");Vb.connect(ye,"fire",Hc,"execCommand",{updater:function(Ye){return Ye("[javascript] fix undeclared variables",{autoApplyIfSingleChoice:!0})}})}},{key:"refreshSelectedLine",value:function(){var R=this.ui.propertyTree.selectedIndex-1,wa=this.ui.propertyTree.selectedNode;
this.ui.propertyTree.selectedNode.refreshProperty();wa=this.ui.propertyTree.document.getLine(R).textAndAttributes.slice(0,4).concat(wa.display(this));R=this.ui.propertyTree.lineRange(R,!1);this.ui.propertyTree.replace(R,wa,!1,!1,!1);this.ui.propertyTree.selectedNode=this.ui.propertyTree.selectedNode}},{key:"refreshAllProperties",value:function(){this.world()||this.stopStepping();if(this.targetObject&&this.targetObject.isMorph)if(this.targetObject._styleSheetProps!=this.lastStyleSheetProps)this.refreshTreeView(),
this.lastStyleSheetProps=this.targetObject._styleSheetProps;else{var R=Vb.arr.last(this.targetObject.env.changeManager.changesFor(this.targetObject));if(R!=this.lastChange||this.lastSubmorphs!=Vb.printValue(this.targetObject&&this.targetObject.submorphs))this.focusedNode&&this.focusedNode.keyString==R.prop&&this.repositionOpenWidget(),this.lastChange=R,this.lastSubmorphs=Vb.printValue(this.targetObject&&this.targetObject.submorphs),this.refreshTreeView()}else this.stopStepping()}},{key:"refreshTreeView",
value:function(){var R;this.originalTreeData&&this.originalTreeData.asListWithIndexAndDepth(!1).forEach(function(wa){wa=wa.node;wa.target&&(R=wa.foldableNode?wa.target[wa.foldableNode.key][wa.key]:wa.target[wa.key],!Vb.obj.equals(R,wa.value)&&wa.refreshProperty&&wa.refreshProperty(R))});this.ui.propertyTree.update(!0);this.ui.propertyTree.doNotAcceptDropsForThisAndSubmorphs()}},{key:"isInspector",get:function(){return!0}},{key:"prepareForNewTargetObject",value:function(R,wa){wa=void 0===wa?!1:wa;
var Wa=this,hb,hc,cc,Gc,Oc,Hc,ye,lf,Ye,zg,Ie,sg,Gi,Tg,Zj;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xf){switch(xf.nextAddress){case 1:if(!Wa.isUpdating()){xf.jumpTo(2);break}return xf.yield(Wa.whenUpdated(),2);case 2:hb=Vb.promise.deferred();hc=hb.promise;cc=!!Wa.target;Wa.updateInProgress=hc;xf.setCatchFinallyBlocks(4);wa&&(Gc=Vb.LoadingIndicator.open("connecting to remote..."));if(!wa){Oc=Vb.InspectionTree.forObject(R,Wa);xf.jumpTo(6);break}return xf.yield(Vb.RemoteInspectionTree.forObject(R,
Wa),7);case 7:Oc=xf.yieldResult;case 6:return Hc=Oc,ye=Wa.ui.propertyTree,xf.yield(Hc.collapse(Hc.root,!1),8);case 8:if(!Hc.root.children){xf.jumpTo(9);break}return xf.yield(Hc.collapse(Hc.root.children[0],!1),9);case 9:if(lf=Wa.originalTreeData&&Wa.originalTreeData.diff(Hc)){Ye=$jscomp.makeIterator(lf);for(zg=Ye.next();!zg.done;zg=Ye.next())Ie=zg.value,sg=$jscomp.makeIterator(Ie),Gi=sg.next().value,Tg=sg.next().value,Gi.refreshProperty(Tg.value);xf.jumpTo(11);break}ye.treeData=Hc;return xf.yield(Wa.filterProperties(),
12);case 12:if(!ye.treeData.root.isCollapsed){xf.jumpTo(13);break}return xf.yield(ye.onNodeCollapseChanged({node:Hc.root,isCollapsed:!1}),14);case 14:ye.selectedIndex=1;case 13:return xf.yield(ye.execCommand("uncollapse selected node"),11);case 11:Wa.toggleWindowStyle(cc);Gc&&Gc.remove();xf.leaveTryBlock(5);break;case 4:Zj=xf.enterCatchBlock(),Wa.showError(Zj);case 5:Wa.startStepping(1E3,"refreshAllProperties"),Wa.updateInProgress=null,xf.jumpToEnd()}})}},{key:"toggleWindowStyle",value:function(R){R=
void 0===R?!0:R;var wa=this,Wa,hb,hc,cc,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){if(1==Oc.nextAddress)return Wa=300,cc=wa.ui.codeEditor.pluginFind(function(Hc){return Hc.runEval}),Gc=wa.getWindow(),Oc.yield(cc.runEval("System.get('@system-env').node"),2);Oc.yieldResult.value?(hc=[].concat($jscomp.arrayFromIterable(Vb.arr.without(Gc.styleClasses,"local")),["node"]),hb=Vb.DarkTheme.instance):(hc=["local"].concat($jscomp.arrayFromIterable(Gc?Vb.arr.without(Gc.styleClasses,"node"):
[])),hb=Vb.DefaultTheme.instance);cc.theme=hb;R?(Gc&&Gc.animate({duration:Wa,styleClasses:hc}),wa.ui.codeEditor.animate({fill:hb.background,duration:Wa})):Gc&&(Gc.styleClasses=hc);wa.ui.codeEditor.textString=wa.ui.codeEditor.textString;cc.highlight();Oc.jumpToEnd()})}},{key:"isUpdating",value:function(){return!!this.updateInProgress}},{key:"whenUpdated",value:function(){return this.updateInProgress||Promise.resolve()}},{key:"focus",value:function(){this.ui.codeEditor.focus()}},{key:"build",value:function(){var R=
this,wa=Object.assign({type:"text",borderWidth:1,borderColor:Vb.Color.gray,lineWrapping:"by-chars"},Vb.config.codeEditor.defaultStyle,{textString:""}),Wa=Vb.Icon.textAttribute("long-arrow-alt-right",{textStyleClasses:["fas"]});Vb.rect(0,0,this.width,30);var hb=new Vb.SearchField({styleClasses:["idle"],name:"searchField"});Wa[1].paddingTop="2px";this.submorphs=[{name:"searchBar",submorphs:[hb,{type:"button",name:"targetPicker",padding:Vb.rect(2,2,0,0),borderRadius:15,master:{auto:"styleguide://System/buttons/light"},
tooltip:"Change Inspection Target",label:Vb.Icon.textAttribute("crosshairs")},new Vb.LabeledCheckBox({label:"Internals",name:"internals"}),new Vb.LabeledCheckBox({label:"Unknowns",name:"unknowns"})]},new Vb.PropertyTree(Object.assign({name:"propertyTree"},this.treeStyle,{treeData:Vb.InspectionTree.forObject(null,this)})),Vb.Icon.makeLabel("keyboard",{name:"terminal toggler"}),{name:"resizer"},Object.assign({name:"codeEditor"},wa),{name:"fix import button",type:"button",visible:!1,label:"fix undeclared vars"},
{name:"this binding selector",type:Vb.DropDownList,visible:!1,listAlign:"top",items:[{isListItem:!0,value:"target",label:["this ",null].concat($jscomp.arrayFromIterable(Wa),[" target",null])},{isListItem:!0,value:"selection",label:["this ",null].concat($jscomp.arrayFromIterable(Wa),[" selection",null])}]}];this.ui.thisBindingSelector.listMorph.dropShadow=!0;this.ui.thisBindingSelector.listMorph.borderRadius=3;this.ui.thisBindingSelector.whenRendered().then(function(){R.ui.thisBindingSelector.selection=
"target"})}},{key:"selectTarget",value:function(){var R=this,wa,Wa,hb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){switch(cc.nextAddress){case 1:if(R.env.eventDispatcher.isKeyPressed("Shift"))return Wa=$jscomp,hb=Wa.makeIterator,cc.yield($world.execCommand("select morph",{justReturn:!0}),5);R.toggleSelectionInstructions(!0);return cc.yield(Vb.InteractiveMorphSelector.selectMorph(),4);case 4:wa=cc.yieldResult;R.toggleSelectionInstructions(!1);cc.jumpTo(3);break;case 5:hc=hb.call(Wa,
cc.yieldResult),wa=hc.next().value;case 3:wa&&(R.targetObject=wa),cc.jumpToEnd()}})}},{key:"toggleSelectionInstructions",value:function(R){if(R&&!this.instructionWidget){var wa=Vb.morph({type:"label",name:"escapeKey",value:"esc"});wa.whenRendered().then(function(){return wa.fit()});this.instructionWidget=this.addMorph({type:"text",opacity:0,center:this.extent.scaleBy(.5),width:120,fixedWidth:!0,lineWrapping:!0,name:"selectionInstruction",textAndAttributes:["Select a new morph to inspect by hovering over it and clicking left. You can exit this mode by pressing ",
{},wa,{}]});this.instructionWidget.animate({opacity:1,duration:200})}else this.instructionWidget.fadeOut(200),this.instructionWidget=null}},{key:"closeOpenWidget",value:function(){this.openWidget.close()}},{key:"onWidgetOpened",value:function(R){R=R.widget;this.openWidget&&this.openWidget.fadeOut();this.focusedNode=this.ui.propertyTree.selectedNode;R.epiMorph=!0;this.openWidget=R;Vb.once(R,"close",this,"closeOpenWidget");Vb.once(this.ui.propertyTree,"onMouseDown",this,"closeOpenWidget")}},{key:"getWidgetPosition",
value:function(){var R=this.ui.propertyTree,wa=R.textLayout.boundsFor(R,{column:0,row:R.selectedIndex-1});wa=R.worldPoint(Vb.pt(wa.x,wa.y+wa.height/2)).addPt(R.scroll.negated());R=R.globalBounds();wa.x=this.globalBounds().center().x;wa.y<R.top()?wa=R.topCenter():R.bottom()-20<wa.y&&(wa=R.bottomCenter().addXY(0,-20));return wa}},{key:"repositionOpenWidget",value:function(){this.openWidget&&this.focusedNode&&(this.openWidget.topCenter=this.getWidgetPosition())}},{key:"adjustProportions",value:function(R){this.layout.row(1).height+=
R.state.dragDelta.y;this.relayout()}},{key:"isEditorVisible",value:function(){return 10<this.ui.codeEditor.height}},{key:"makeEditorVisible",value:function(R){if(R!==this.isEditorVisible()){var wa=this.extent,Wa=this.layout,hb=this.ui,hc=hb.terminalToggler,cc=hb.codeEditor,Gc=hb.thisBindingSelector;hb=hb.fixImportButton;Wa.disable();R?(hc.fontColor=Vb.Color.rgbHex("00e0ff"),Wa.row(3).height=this.codeEditorHeight||180,Wa.row(2).height=5,hb.animate({visible:!0,duration:200}),Gc.animate({visible:!0,
duration:200})):(this.codeEditorHeight=Wa.row(3).height,hc.fontColor=Vb.Color.white,Wa.row(3).height=Wa.row(2).height=0,hb.animate({visible:!1,duration:200}),Gc.animate({visible:!1,duration:200}));this.extent=wa;Wa.enable({duration:200});this.relayout({duration:200});cc.focus();cc.animate({opacity:R?1:0,duration:200})}}},{key:"toggleCodeEditor",value:function(){var R=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){R.makeEditorVisible(!R.isEditorVisible());wa.jumpToEnd()})}},{key:"filterProperties",
value:function(){var R=this,wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return wa=R.ui.searchField,Wa=R.ui.propertyTree,R.originalTreeData||(R.originalTreeData=Wa.treeData),Vb.disconnect(Wa.treeData,"onWidgetOpened",R,"onWidgetOpened"),hb.yield(Wa.treeData.filter({maxDepth:2,showUnknown:R.ui.unknowns.checked,showInternal:R.ui.internals.checked,iterator:function(hc){return wa.matches(hc.key)}}),2);Wa.update();Vb.connect(Wa.treeData,"onWidgetOpened",R,
"onWidgetOpened");hb.jumpToEnd()})}},{key:"relayout",value:function(R){R=void 0===R?{}:R;var wa=this,Wa,hb,hc,cc,Gc,Oc,Hc,ye,lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ye){wa.layout&&wa.layout.forceLayout();Wa=wa;hb=Wa.ui;hc=hb.fixImportButton;cc=hb.terminalToggler;Gc=hb.propertyTree;Oc=hb.thisBindingSelector;Hc=Gc.bounds().insetBy(5).bottomLeft();ye=Gc.bounds().insetBy(5).bottomRight();lf=ye.subXY(hc.width+10,0);Oc.width=115;Oc.listMorph.itemHeight=20;R.duration?(cc.animate(Object.assign({bottomLeft:Hc},
R)),hc.animate(Object.assign({bottomRight:ye},R)),Oc.animate(Object.assign({bottomRight:lf},R))):(cc.bottomLeft=Hc,hc.bottomRight=ye,Oc.bottomRight=lf);Ye.jumpToEnd()})}},{key:"keybindings",get:function(){return[{keys:"Alt-Up",command:"focus propertyTree"},{keys:"Alt-Down",command:"focus codeEditor"},{keys:"F1",command:"focus propertyTree"},{keys:"F2",command:"focus codeEditor"}].concat(ub._get(Object.getPrototypeOf(qb.prototype),"keybindings",this))}},{key:"commands",get:function(){return Vb.inspectorCommands}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Inspector"}},{key:"openInWindow",value:function(R){if(System._testsRunning)return console.log(R.targetObject);R=new this(R);R.openInWindow().doNotAcceptDropsForThisAndSubmorphs();return R}},{key:"properties",get:function(){return{extent:{defaultValue:Vb.pt(400,500)},fill:{defaultValue:Vb.Color.transparent},name:{defaultValue:"inspector"},_serializableTarget:{defaultValue:null},remoteTarget:{after:["submorphs"],set:function(R){this.setProperty("remoteTarget",
R);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(R,!0))}},targetObject:{after:["submorphs"],set:function(R){this._serializableTarget=R&&R.isMorph?R.id:R;this.setProperty("targetObject",R);this.ui.propertyTree&&(this.originalTreeData=null,this.prepareForNewTargetObject(R))}},originalTreeData:{serialize:!1},selectedContext:{readOnly:!0,derived:!0,get:function(){var R=this.ui.propertyTree,wa=R.treeData;return wa.getContextFor(R.selectedNode||wa.root)}},submorphs:{initialize:function(){this.build()}},
ui:{readOnly:!0,derived:!0,after:["submorphs"],get:function(){return{codeEditor:this.getSubmorphNamed("codeEditor"),terminalToggler:this.getSubmorphNamed("terminal toggler"),fixImportButton:this.getSubmorphNamed("fix import button"),thisBindingSelector:this.getSubmorphNamed("this binding selector"),propertyTree:this.getSubmorphNamed("propertyTree"),unknowns:this.getSubmorphNamed("unknowns"),internals:this.getSubmorphNamed("internals"),targetPicker:this.getSubmorphNamed("targetPicker"),searchBar:this.getSubmorphNamed("searchBar"),
searchField:this.getSubmorphNamed("searchField"),resizer:this.getSubmorphNamed("resizer")}}},updateInProgress:{defaultValue:!1,serialize:!1},treeStyle:{defaultValue:{draggable:!0,borderWidth:1,borderColor:Vb.Color.gray,fontSize:14,fontFamily:Vb.config.codeEditor.defaultStyle.fontFamily}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/inspector/light"}}}}}}],Pa,{pathInPackage:function(){return"js/inspector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:25462,end:45996})}(Vb.Morph);fe=Vb.Inspector;ie=ta("I",fe);Vb.default=fe;var og=lively.FreezerRuntime.recorderFor("lively.ide/text/code-evaluation-commands.js");og.Inspector=ie;og.string=Mc;og.Morph=ec;og.pt=rd;og.Color=ob;fe=[{name:"doit",doc:"Evaluates the selecte code or the current line and report the result",exec:function(za,Pa,qb){qb=void 0===qb?1:qb;var R,
wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){switch(hb.nextAddress){case 1:return za.maybeSelectCommentOrLine(),hb.setCatchFinallyBlocks(2),Pa=Object.assign({},Pa,{logDoit:!0,inspect:!0,inspectDepth:qb}),hb.yield(za.doEval(void 0,Pa),4);case 4:R=hb.yieldResult;wa=R.error?R.error:R.isError?R.value:null;hb.leaveTryBlock(3);break;case 2:wa=Wa=hb.enterCatchBlock();case 3:return wa?za.showError(wa):za.setStatusMessage(og.string.truncate(R.value,1E3)),hb.return(R)}})}},{name:"eval all",
doc:"Evaluates the entire text contents",scrollCursorIntoView:!1,exec:function(za,Pa){var qb,R,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){switch(Wa.nextAddress){case 1:return Wa.setCatchFinallyBlocks(2),Wa.yield(za.doEval({start:{row:0,column:0},end:za.documentEndPosition},Object.assign({},Pa,{logDoit:!0})),4);case 4:qb=Wa.yieldResult;R=qb.error?qb.error:qb.isError?qb.value:null;Wa.leaveTryBlock(3);break;case 2:R=wa=Wa.enterCatchBlock();case 3:return R?za.showError(R):za.setStatusMessage(String(qb.value)),
Wa.return(qb)}})}},{name:"printit",doc:"Evaluates selected code or the current line and inserts the result in a printed representation",exec:function(za,Pa){var qb,R,wa,Wa,hb,hc,cc,Gc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:return za.maybeSelectCommentOrLine(),Oc.setCatchFinallyBlocks(2),Pa=Object.assign({},Pa,{asString:!1,logDoit:!0}),Oc.yield(za.doEval(void 0,Pa),4);case 4:qb=Oc.yieldResult;R=qb.error?qb.error:qb.isError?qb.value:null;Oc.leaveTryBlock(3);
break;case 2:R=wa=Oc.enterCatchBlock();case 3:za.selection.collapseToEnd();if(Wa=qb.value&&qb.value.isColor)return za.selection.text=String(qb.value),hb=new og.Morph({fill:og.Color.transparent,extent:og.pt(za.fontSize+2,za.fontSize+2),submorphs:[{fill:qb.value,center:og.pt(za.fontSize+2,za.fontSize+2).scaleBy(.5)}]}),hc=za.selection.start,cc=hc.column,Gc=hc.row,za.insertText([hb,{}],za.selection.start),za.selection.start={column:cc,row:Gc},za.focus(),Oc.return(qb);za.insertTextAndSelect(R?String(R)+
(R.stack?"\n"+R.stack:""):String(qb.value));za.focus();return Oc.return(qb)}})}},{name:"editit",doc:"Evaluates the expression and opens an object editor on the resulting object.",exec:function(za,Pa){var qb,R,wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){switch(hb.nextAddress){case 1:za.maybeSelectCommentOrLine();R=za.textInRange(za.selection);wa=za.evalEnvironment||{};Wa=za.pluginFind(function(hc){return hc.isEditorPlugin&&"function"===typeof hc.runEval});wa.systemInterface||
(wa.systemInterface=Wa.systemInterface(Pa));if("local"!==wa.systemInterface.name){hb.jumpTo(2);break}hb.setCatchFinallyBlocks(3);return hb.yield(za.doEval(void 0,Pa),5);case 5:qb=hb.yieldResult;R=qb.value;hb.leaveTryBlock(2);break;case 3:hb.enterCatchBlock();case 2:return za.world().execCommand("open object editor",{target:R,evalEnvironment:wa}),hb.return(qb)}})}},{name:"inspectit",doc:"Evaluates the expression and opens an inspector widget on the resulting object.",exec:function(za,Pa){var qb,R,
wa,Wa,hb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cc){switch(cc.nextAddress){case 1:za.maybeSelectCommentOrLine();wa=za.textInRange(za.selection);Wa=za.evalEnvironment||{};hb=za.pluginFind(function(Gc){return Gc.isEditorPlugin&&"function"===typeof Gc.runEval});Wa.systemInterface||(Wa.systemInterface=hb.systemInterface(Pa));if("local"!==Wa.systemInterface.name){og.Inspector.openInWindow({remoteTarget:{code:wa,evalEnvironment:Wa}});cc.jumpTo(2);break}cc.setCatchFinallyBlocks(3);
return cc.yield(za.doEval(void 0,Pa),5);case 5:qb=cc.yieldResult;R=qb.error?qb.error:qb.isError?qb.value:null;wa=qb.value;cc.leaveTryBlock(4);break;case 3:R=hc=cc.enterCatchBlock();case 4:og.Inspector.openInWindow({targetObject:R||wa});case 2:return cc.return(qb)}})}},{name:"print inspectit",doc:"Prints a representation of the object showing it's properties. The count argument defines how deep (recursively) objects will be printed.",handlesCount:!0,exec:function(za,Pa,qb){qb=void 0===qb?1:qb;var R;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:return za.maybeSelectCommentOrLine(),wa.setCatchFinallyBlocks(2),Pa=Object.assign({},Pa,{inspect:!0,inspectDepth:qb,logDoit:!0}),wa.yield(za.doEval(void 0,Pa),4);case 4:R=wa.yieldResult;wa.leaveTryBlock(3);break;case 2:wa.enterCatchBlock();case 3:return za.selection.collapseToEnd(),za.insertTextAndSelect(R.value),wa.return(R)}})}}];og.codeEvaluationCommands=fe;og.codeEvaluationCommands=fe;og.codeEvaluationCommands=
fe;var hg=lively.FreezerRuntime.recorderFor("lively.ide/text/rich-text-commands.js");hg.changeAttributeInSelectionOrMorph=function(za,Pa,qb){var R=za.selection;za.keepPosAtSameScrollOffsetWhile(function(){R.isEmpty()?za[Pa]="function"===typeof qb?qb(za[Pa]):qb:(za.undoManager.group(),za.changeStyleProperty(Pa,function(wa){return"function"===typeof qb?qb(wa):qb}),za.undoManager.group())})};ie=[{name:"increase font size",scrollCursorIntoView:!1,exec:function(za){var Pa=za.fontSize;hg.changeAttributeInSelectionOrMorph(za,
"fontSize",function(qb){qb=qb||Pa;return qb+(18<=qb?2:1)});return!0}},{name:"decrease font size",scrollCursorIntoView:!1,exec:function(za){var Pa=za.fontSize;hg.changeAttributeInSelectionOrMorph(za,"fontSize",function(qb){qb=qb||Pa;return qb-(18>=qb?1:2)});return!0}},{name:"change font",scrollCursorIntoView:!1,exec:function(za){var Pa,qb,R,wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress){Pa=["serif","sans-serif","monospace"];if(qb=localStorage["lively.morpic/text-change-font-additional-fonts"])qb=
JSON.parse(qb),Pa.push.apply(Pa,$jscomp.arrayFromIterable(qb));Pa.map(function(hc){return hc.toLowerCase()}).includes(za.fontFamily.toLowerCase())||(Pa.push(za.fontFamily),qb=[].concat($jscomp.arrayFromIterable(qb||[]),[za.fontFamily]),localStorage["lively.morpic/text-change-font-additional-fonts"]=JSON.stringify(qb));return hb.yield($world.editListPrompt("choose font",Pa,{requester:za,preselect:Pa.indexOf(za.fontFamily),historyId:"lively.morpic/text-change-font-hist"}),2)}R=hb.yieldResult;wa=$jscomp.makeIterator(R.selections);
if(Wa=wa.next().value)za.fontFamily=Wa;return hb.return(!0)})}},{name:"set link of selection",scrollCursorIntoView:!1,exec:function(za,Pa){Pa=void 0===Pa?{}:Pa;var qb,R,wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress){if(Pa.hasOwnProperty("link"))return hb.jumpTo(2);R=za.selection;wa=za.getStyleInRange(R);Wa=wa.link;return hb.yield(za.world().prompt("Set link",{input:Wa||"https://",historyId:"lively.morphic-rich-text-link-hist"}),3)}if(2!=hb.nextAddress&&
(qb=hb.yieldResult,!qb))return hb.return();za.undoManager.group();za.setStyleInRange({link:qb||void 0},R);za.undoManager.group();hb.jumpToEnd()})}},{name:"set doit of selection",scrollCursorIntoView:!1,exec:function(za,Pa){var qb,R,wa,Wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hb){if(1==hb.nextAddress)return qb=za.selection,R=za.getStyleInRange(qb),wa=R.doit,hb.yield(za.world().editPrompt("Enter doit code (runs on clicking the text)",{requester:za,input:wa?wa.code:"// empty doit",
historyId:"lively.morphic-rich-text-doit-hist",mode:"js",evalEnvironment:za.evalEnvForDoit(wa||{})}),2);Wa=hb.yieldResult;za.undoManager.group();Wa?za.addTextAttribute({doit:{code:Wa},nativeCursor:"pointer",textDecoration:"underline"},qb):za.removeTextAttribute({doit:null,nativeCursor:"",textDecoration:""},qb);za.undoManager.group();hb.jumpToEnd()})}},{name:"reset text style",scrollCursorIntoView:!1,exec:function(za,Pa){Pa=void 0===Pa?{}:Pa;za.undoManager.group();Pa=!Pa.onlySelection&&za.selection.isEmpty()?
za.documentRange:za.selection.range;za.setStyleInRange(null,Pa);za.undoManager.group();return!0}},{name:"open text attribute controls",exec:function(za){var Pa,qb,R,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress)return Wa.yield(System.import("lively.modules"),2);if(3!=Wa.nextAddress)return Pa=Wa.yieldResult,qb=Pa.module,Wa.yield(qb("lively.ide/text/ui.js").load(),3);R=Wa.yieldResult;wa=R.RichTextControl;return Wa.return(wa.openFor(za))})}}];hg.commands=ie;
hg.commands=ie;hg.commands=ie;var Re=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js");Re.guessTextModeName=ha;Re.rangedToken=function(za,Pa,qb,R,wa){return{start:{row:za,column:Pa},end:{row:za,column:qb},token:R,mode:wa}};Re.fun=ab;Re.arr=Tb;Re.connect=Ec;Re.disconnect=Eb;Re.DefaultTheme=Sb;Re.tokenizeDocument=bb;Re.modeInfo=lb;Re.visitDocumentTokens=xc;Re.getMode=vb;Re.completionCommands=sc;Re.multiSelectCommands=Ee;Re.navCommands=ce;Re.codeCommands=Fe;Re.codeEvaluationCommands=fe;
Re.richTextCommands=ie;Re.Color=ob;Re.Range=ne;Re.guessTextModeName=ha;Re.guessTextModeName=ha;Sb=function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),qb=Pa.hasOwnProperty("EditorPlugin")&&"function"===typeof Pa.EditorPlugin?Pa.EditorPlugin:Pa.EditorPlugin=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.theme=
Re.DefaultTheme.instance;this._ast=this.checker=null;this._tokens=[];this._tokenizerValidBefore=null;this.__dont_serialize__=["mode","_ast","_tokens","_tokenizerValidBefore"]}},{key:"isEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return null}},{key:"longName",get:function(){return this.shortName}},{key:"attach",value:function(R){var wa=this;this.textMorph=R;Re.connect(R,"textChange",this,"onTextChange");Re.connect(R,"viewChange",this,"onViewChange");this.textMorph.whenRendered().then(function(){return wa.highlight()})}},
{key:"detach",value:function(R){Re.disconnect(R,"textChange",this,"onTextChange");Re.disconnect(R,"viewChange",this,"onViewChange");this.textMorph=null}},{key:"onViewChange",value:function(){this.requestHighlight()}},{key:"onTextChange",value:function(R){this._ast=null;if(R){var wa=this._tokenizerValidBefore;if("replace"===R.selector){var Wa=R.args[0].start;R=Wa.row;Wa=Wa.column}else Wa=R=0;if(!wa||R<wa.row||R===wa.row&&Wa<wa.column)R=Math.max(0,R),this._tokenizerValidBefore={row:R,column:Wa}}this.requestHighlight()}},
{key:"requestHighlight",value:function(R){var wa=this;(void 0===R?0:R)?this.highlight():Re.fun.debounceNamed(this.id+"-requestHighlight",300,function(){return wa.highlight()})()}},{key:"highlight",value:function(){var R=this.textMorph,wa=this.theme,Wa=this.mode,hb=this._tokenizerValidBefore;if(wa&&R&&R.document&&Wa){R.fill=wa.background;R.cursorColor=wa.cursorColor||Re.Color.black;var hc=R.viewState,cc={};hb=Re.tokenizeDocument(Wa,R.document,hc.firstVisibleRow,hc.lastVisibleRow,hb);Wa=hb.lines;hb=
hb.tokens;if(Wa.length){hc=Wa[0].row;for(var Gc=[],Oc=0;Oc<hb.length;hc++,Oc++)for(var Hc=hb[Oc],ye=0;ye<Hc.length;ye+=5){var lf=Hc[ye],Ye=Hc[ye+1],zg=wa[Hc[ye+2]]||wa.default;zg&&Gc.push({start:{row:hc,column:lf},end:{row:hc,column:Ye}},zg)}R.embeddedMorphs.forEach(function(Ie){var sg=R.embeddedMorphMap.get(Ie).anchor;cc[Ie.id]=R.textAttributeAt(sg.position)});R.setTextAttributesWithSortedRanges(Gc);R.embeddedMorphs.forEach(function(Ie){var sg=R.embeddedMorphMap.get(Ie).anchor;sg=Re.Range.at(sg.position);
sg.end.column+=1;R.replace(sg,[Ie,cc[Ie.id]],!1)});this._tokenizerValidBefore={row:Re.arr.last(Wa).row+1,column:0}}if(this.checker)this.checker.onDocumentChange({},R,this)}}},{key:"visitTokensInRange",value:function(R,wa){var Wa=R.start,hb=R.end,hc=Wa.row-1;Re.visitDocumentTokens(this.mode,this.textMorph.document,Wa.row,hb.row,null,function(cc){return hc++},function(cc,Gc,Oc,Hc,ye,lf,Ye){if(hc===Wa.row&&0<Wa.column){if(Wa.column>=Hc)return;Oc<Wa.column&&Wa.column<Hc&&(Oc=Wa.column)}if(hc===hb.row){if(hb.column<=
Oc)return;Oc<hb.column&&hb.column<Hc&&(Hc=hb.column)}wa(cc,Gc,hc,Oc,Hc,ye,lf,Ye)})}},{key:"tokensInRange",value:function(R){var wa=[];this.visitTokensInRange(R,function(Wa,hb,hc,cc,Gc,Oc,Hc,ye){return wa.push(Re.rangedToken(hc,cc,Gc,Wa,ye))});return wa}},{key:"tokensOfRow",value:function(R){var wa=this.textMorph.getLine(R).length;return this.tokensInRange({start:{row:R,column:0},end:{row:R,column:wa}})}},{key:"tokenAt",value:function(R){for(var wa=this.tokensOfRow(R.row),Wa=wa.length;Wa--;){var hb=
wa[Wa];if(hb.token&&hb.start.column<=R.column&&R.column<=hb.end.column)return hb}return null}},{key:"getCommands",value:function(R){return[].concat($jscomp.arrayFromIterable(R),$jscomp.arrayFromIterable(Re.completionCommands),$jscomp.arrayFromIterable(Re.multiSelectCommands),$jscomp.arrayFromIterable(Re.navCommands),$jscomp.arrayFromIterable(Re.codeCommands),$jscomp.arrayFromIterable(Re.codeEvaluationCommands),$jscomp.arrayFromIterable(Re.richTextCommands))}},{key:"getComment",value:function(){if(!this.mode)return null;
var R=this.mode,wa=R.lineComment,Wa=R.blockCommentStart;R=R.blockCommentEnd;var hb={};wa&&(hb.lineCommentStart=wa);Wa&&(hb.blockCommentStart=Wa);R&&(hb.blockCommentEnd=R);return hb}},{key:"toString",value:function(){return this.constructor.name+"("+this.textMorph+")"}},{key:"cmd_newline",value:function(R,wa,Wa){var hb=this.textMorph,hc=R.row,cc=R.column;R=wa[cc-1];wa=wa[cc];hb.selection.text="\n";hb.selection.collapseToEnd();"{"===R&&"}"===wa&&(hb.selection.text="\n"+" ".repeat(Wa),hb.selection.collapse());
hb.execCommand("indent according to mode",{undo:!1,ignoreFollowingText:!1,firstRow:hc+1,lastRow:hc+1});return!0}},{key:"openPairs",get:function(){return{"{":"}","[":"]","(":")",'"':'"',"'":"'","`":"`"}}},{key:"closePairs",get:function(){return{"}":"{","]":"[",")":"(",'"':'"',"'":"'","`":"`"}}},{key:"cmd_delete_backwards",value:function(){var R=this.textMorph,wa=this.openPairs,Wa=R.selection,hb=R.getLine(Wa.end.row),hc=hb[Wa.end.column-1];hb=hb[Wa.end.column];R.autoInsertPairs&&Wa.isEmpty()&&hc in
wa&&hb===wa[hc]&&(Wa.growRight(1),Wa.growLeft(1));return!1}},{key:"cmd_insertstring",value:function(R){var wa=this.openPairs,Wa=this.closePairs,hb=this.textMorph,hc=hb.selection,cc=hb.autoInsertPairs&&R in wa,Gc=hb.autoInsertPairs&&R in Wa;if(!cc&&!Gc)return!1;var Oc=hb.getLine(hc.end.row)[hc.end.column];if(!hc.isEmpty()){if(!cc)return!1;Wa=hb.undoManager.ensureNewGroup(hb);hb.insertText(wa[R],hc.end);hb.insertText(R,hc.start);hb.undoManager.group(Wa);hc.growRight(-1);return!0}if(Oc in Wa&&R===Oc)return hc.goRight(1),
!0;if(Gc&&!cc)return!1;Wa=hb.undoManager.ensureNewGroup(hb);hb.insertText(R+wa[R]);hb.undoManager.group(Wa);hc.goLeft(1);return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditorPlugin"}}],Pa,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3088,end:11936})}(void 0);
lb=Sb=Re.EditorPlugin;sc=ta("C",function(za){var Pa=lively.FreezerRuntime.recorderFor("lively.ide/editor-plugin.js"),qb=Pa.hasOwnProperty("CodeMirrorEnabledEditorPlugin")&&"function"===typeof Pa.CodeMirrorEnabledEditorPlugin?Pa.CodeMirrorEnabledEditorPlugin:Pa.CodeMirrorEnabledEditorPlugin=function(R){R&&R[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ub(qb,za,[{key:Symbol.for("lively-instance-initialize"),value:function(){ub._get(Object.getPrototypeOf(qb.prototype),
Symbol.for("lively-instance-initialize"),this).call(this);this.mode=null}},{key:"attach",value:function(R){this.mode=this.codeMirrorMode(R);return ub._get(Object.getPrototypeOf(qb.prototype),"attach",this).call(this,R)}},{key:"__deserialize__",value:function(){this.mode=this.textMorph?this.codeMirrorMode(this.textMorph):null}},{key:"defaultCodeMirrorModeConfig",value:function(R){return{indentWithTabs:!R.useSoftTabs,indentUnit:R.tabWidth,tabSize:4}}},{key:"codeMirrorMode",value:function(R){R=this.defaultCodeMirrorModeConfig(R);
return Re.getMode(R,{name:this.longName})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CodeMirrorEnabledEditorPlugin"}}],Pa,{pathInPackage:function(){return"editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11945,end:12633})}(Re.EditorPlugin));Re.CodeMirrorEnabledEditorPlugin=sc;Re.CodeMirrorEnabledEditorPlugin=
sc;Re.CodeMirrorEnabledEditorPlugin=sc;Re.default=Sb;Sb=Object.freeze({__proto__:null,guessTextModeName:ha,"default":lb,CodeMirrorEnabledEditorPlugin:sc});ta("e",Sb)}}});