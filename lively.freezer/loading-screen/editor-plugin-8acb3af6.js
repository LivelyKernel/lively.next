System.register("./__rootModule___commonjs-entry-71573ff5.js ./index-c79abca0.js ./editor-plugin-0a8dd45b.js @babel/plugin-syntax-import-meta ./index-ca98f65e.js ./index-d18accbd.js ./loading-indicator.cp-b18e3b89.js ./tooltips.cp-6a2406c0.js ./value-widgets-6cb12552.js ./ui.cp-6289a670.js ./index-1c08552a.js ./interface-dc23a2c8.js ./list.cp-8569fe93.js ./popups.cp-68dc8a4a.js ./editor-modes-5e094c88.js".split(" "),function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb;return{setters:[function(Xb){pd=
Xb.j;Nd=Xb.k;Tc=Xb.i;Jc=Xb.x;$d=Xb.G;Bb=Xb.az;rd=Xb.aA;Id=Xb.B;Ac=Xb.f;Pc=Xb.aB;gd=Xb.aC;nd=Xb._;Fd=Xb.b;ic=Xb.A},function(Xb){vd=Xb.s},function(Xb){sb=Xb["default"]},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function Xb(){Xb=nd(regeneratorRuntime.mark(function pb(ya){var La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa;return regeneratorRuntime.wrap(function(Ma){for(;;)switch(Ma.prev=
Ma.next){case 0:La={},eb="lively.shell-default-command-group-"+T.string.newUUID(),jb=0,E=$d(ya),Ma.prev=4,E.s();case 6:if((Wb=E.n()).done){Ma.next=22;break}R=Wb.value;xb=R.name;Ja=R.command;Ga=R.options;sa=R.transform;Ub=R.readFile;vc=R.writeFile;Oc=R.content;Ga=Ga||{};eb||(Ga.group=eb);Ub?(T.runCommand=readFileFn,Ja=Ub):vc&&(T.runCommand=writeFileFn,Ja=vc,Ga=Ga||{},Oc&&(Ga.content=Oc));Ub||vc||(Ja=Ja.replace(/\$\{([^\}]+)\}/g,function(qb,Vb){return La[Vb]&&La[Vb].isShellCommand?La[Vb].output:La[Vb]||
""}));console.log("Running ".concat(Ja," with options"),Ga);Ma.next=15;return T.runCommand(Ja,Ga);case 15:return aa=Ma.sent,Ma.next=18,aa.whenDone();case 18:xb=xb||String(jb++),La[xb]="function"===typeof sa?sa(aa):aa;case 20:Ma.next=6;break;case 22:Ma.next=27;break;case 24:Ma.prev=24,Ma.t0=Ma["catch"](4),E.e(Ma.t0);case 27:return Ma.prev=27,E.f(),Ma.finish(27);case 30:return Ma.abrupt("return",La);case 31:case "end":return Ma.stop()}},pb,null,[[4,24,27,30]])}));return Xb.apply(this,arguments)}function Nb(K){return bc.apply(this,
arguments)}function bc(){bc=nd(regeneratorRuntime.mark(function pb(ya){var La,eb,jb,E,Wb=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:La=1<Wb.length&&void 0!==Wb[1]?Wb[1]:{cwd:null};eb=["--no-pager"];if(!La.cwd){R.next=6;break}R.t0=La.cwd;R.next=9;break;case 6:return R.next=8,T.defaultDirectory();case 8:R.t0=R.sent;case 9:jb=R.t0;ya.map(function(xb){xb.gitCommand&&(Array.isArray(xb.gitCommand)&&(xb.gitCommand=xb.gitCommand.join(" ")),xb.command=["git"].concat(eb).concat([xb.gitCommand]).join(" "));
xb.options=Object.assign({cwd:jb,group:"lively-git-interface"},xb.options);return xb}).filter(Boolean);if(La.dryRun){R.next=16;break}R.next=14;return T.runCommands(ya);case 14:E=R.sent,E=Object.keys(E||{}).reduce(function(xb,Ja){var Ga=xb[Ja];if(!Ga||!Ga.isShellCommand)return xb;xb["cmd"+T.string.capitalize(Ja)]=Ga;xb[Ja]=Ga.output;return xb},E);case 16:return R.abrupt("return",E);case 17:case "end":return R.stop()}},pb)}));return bc.apply(this,arguments)}function hb(K){return cb.apply(this,arguments)}
function cb(){cb=nd(regeneratorRuntime.mark(function pb(ya){var La,eb,jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:Wb=function(xb){var Ja=xb.statusString,Ga=xb.status,sa="",Ub=Ja.slice(3);Ja=Ja.slice(0,2);var vc=Ja[0],Oc=Ja[1];Ga="unstaged"===Ga?Oc:vc;"DD"===Ja?sa="unmerged, deleted locally and remotely":"AU"===Ja?sa="unmerged, added locally and modified remotely":"UD"===Ja?sa="unmerged, modified locally and deleted remotely":"UA"===Ja?sa="unmerged, modified locally and added remotely":
"DU"===Ja?sa="unmerged, deleted locally and modified remotely":"AA"===Ja?sa="unmerged, added locally and remotely":"UU"===Ja?sa="unmerged, modified locally and remotely":"M"===Ga?sa="modfied":"R"===Ga?sa="renamed":"C"===Ga?sa="copied":"A"===Ga?sa="added":"D"===Ga&&(sa="deleted");if("renamed"===sa||"copied"===sa)Ub=Ub.split("->").last().trim();xb.change=sa;xb.fileName=Ub;return xb};R.t0=ya;if(R.t0){R.next=7;break}R.next=6;return T.defaultDirectory();case 6:R.t0=R.sent;case 7:return ya=R.t0,La=[{name:"status",
gitCommand:"status --porcelain",transform:function(xb){return xb.output}}],R.prev=9,R.next=12,T.runGitCommands(La,{cwd:ya});case 12:jb=(eb=R.sent)&&eb.status.split("\n");E=(jb||[]).flatMap(function(xb){if(!xb)return[];var Ja,Ga=[];(Ja=xb.match(/^(\s[A-Z]|[A-Z]{2})(.*)/))&&Ga.push({status:"unstaged",statusString:Ja[0]});(Ja=xb.match(/^[A-Z]{1,2}(.*)/))&&Ga.push({status:"staged",statusString:Ja[0]});(Ja=xb.match(/^\s*\?\?(.*)/))&&Ga.push({status:"untracked",statusString:Ja[0]});return Ga}).filter(Boolean);
R.next=20;break;case 17:R.prev=17,R.t1=R["catch"](9),Error("failed to run git status on "+ya+"\n"+R.t1);case 20:return R.abrupt("return",E.map(Wb));case 21:case "end":return R.stop()}},pb,null,[[9,17]])}));return cb.apply(this,arguments)}function Hb(K,ya){return ec.apply(this,arguments)}function ec(){ec=nd(regeneratorRuntime.mark(function La(ya,pb){var eb,jb,E,Wb,R,xb,Ja,Ga,sa=arguments;return regeneratorRuntime.wrap(function(Ub){for(;;)switch(Ub.prev=Ub.next){case 0:eb=2<sa.length&&void 0!==sa[2]?
sa[2]:{};if(jb=pb.pluginFind(function(vc){return vc.isDiffEditorPlugin})){Ub.next=4;break}throw Error("Editor ".concat(pb," has no diff mode"));case 4:if(E=!pb.selection.isEmpty())Wb=jb.getPatchesFromSelection(pb),Wb[0].createPatchString();else{xb=(R=jb.getPatchAtCursor(pb))||{};Ja=xb.patch;if(Ga=xb.hunk)Ja=Ja.copy(),Ja.hunks=[Ga];Wb=Ja?[Ja]:null}if(Wb){Ub.next=8;break}throw Error("Could not read patches");case 8:return Ub.next=10,T.applyPatches(ya,Wb,eb);case 10:return Ub.abrupt("return",Ub.sent);
case 11:case "end":return Ub.stop()}},La)}));return ec.apply(this,arguments)}function ub(K,ya){return yb.apply(this,arguments)}function yb(){yb=nd(regeneratorRuntime.mark(function La(ya,pb){var eb,jb,E,Wb,R=arguments;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:return eb=2<R.length&&void 0!==R[2]?R[2]:{},console.assert("stage"===ya||"unstage"===ya||"discard"===ya||"apply"===ya||"reverseApply"===ya,ya+" is not expected action"),console.assert(pb,"gitApply needs patches"),
jb=[],"unstage"!==ya&&"discard"!==ya&&"reverseApply"!==ya||jb.push("--reverse"),"stage"!==ya&&"unstage"!==ya&&"discard"!==ya||jb.push("--cached"),E=[{name:"gitApply",options:{stdin:T.arr.invoke(pb,"createPatchString").join("\n")},command:"git apply "+jb.join(" ")+" -"}],"discard"===ya&&E.push({name:"gitApply",options:{stdin:T.arr.invoke(pb,"createPatchString").join("\n")},command:"git apply --reverse -"}),xb.next=10,T.runGitCommands(E,eb);case 10:Wb=xb.sent;if(!(Wb.hasOwnProperty("gitApply")&&0<Wb.cmdGitApply.exitCode)){xb.next=
13;break}throw Error("Could not apply patch:\n"+Wb.cmdGitApply.stderr);case 13:return xb.abrupt("return",{commands:Wb,patches:pb});case 14:case "end":return xb.stop()}},La)}));return yb.apply(this,arguments)}function ba(K,ya){return wb.apply(this,arguments)}function wb(){wb=nd(regeneratorRuntime.mark(function La(ya,pb){var eb,jb,E,Wb,R,xb=arguments;return regeneratorRuntime.wrap(function(Ja){for(;;)switch(Ja.prev=Ja.next){case 0:return eb=2<xb.length&&void 0!==xb[2]?xb[2]:{},console.assert("stage"===
ya||"unstage"===ya||"discard"===ya,ya+" is not expected action"),console.assert(pb,"stageOrUnstage needs file status objects"),"stage"===ya&&(jb=function(Ga){return"unstaged"===Ga.status}),"unstage"===ya&&(jb=function(Ga){return"staged"===Ga.status}),"discard"===ya&&(jb=function(Ga){return!0}),E=pb.reduce(function(Ga,sa){if(!jb(sa))return Ga;var Ub=[];"unstage"!==ya&&"discard"!==ya||Ub.push(Ga.reset);"discard"===ya&&Ub.push(Ga.checkout);"unstage"!==ya&&"discard"!==ya||"staged"!==sa.status||"added"!==
sa.change||Ub.push(Ga.rmCached);"stage"===ya&&"unstaged"===sa.status&&"deleted"===sa.change?Ub.push(Ga.rm):"stage"===ya&&Ub.push(Ga.add);T.arr.invoke(Ub,"push",sa.fileName);return Ga},{checkout:[],reset:[],rmCached:[],rm:[],add:[]}),Wb=[],E.rm.length&&Wb.push({name:"rm",gitCommand:"rm -- "+E.rm.join(" ")}),E.rmCached.length&&Wb.push({name:"rm",gitCommand:"rm --cached -- "+E.rmCached.join(" ")}),E.add.length&&Wb.push({name:"add",gitCommand:"add -- "+E.add.join(" ")}),E.reset.length&&Wb.push({name:"reset",
gitCommand:"reset -- "+E.reset.join(" ")}),E.checkout.length&&Wb.push({name:"checkout",gitCommand:"checkout -- "+E.checkout.join(" ")}),Ja.next=15,T.runGitCommands(Wb,eb);case 15:return R=Ja.sent,Ja.abrupt("return",{commands:R,fileObjects:pb});case 17:case "end":return Ja.stop()}},La)}));return wb.apply(this,arguments)}function Xa(K){return Za.apply(this,arguments)}function Za(){Za=nd(regeneratorRuntime.mark(function pb(ya){var La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa;return regeneratorRuntime.wrap(function(Ma){for(;;)switch(Ma.prev=
Ma.next){case 0:return aa=function(){aa=nd(regeneratorRuntime.mark(function Lb(Vb){var Kb,Db,Ra,N,va,Wa,pa,tb,ab,Ob;return regeneratorRuntime.wrap(function(yc){for(;;)switch(yc.prev=yc.next){case 0:Ob=function(Ta,Bd,Eb){return T.runGitCommands([{name:"set username",gitCommand:'config user.name "'+Ta+'"',options:Eb},{name:"set email",gitCommand:'config user.email "'+Bd+'"',options:Eb}])};ab=function(){ab=nd(regeneratorRuntime.mark(function Eb(Bd){var fe;return regeneratorRuntime.wrap(function(Od){for(;;)switch(Od.prev=
Od.next){case 0:return Od.next=2,La.prompt("Please also enter your email:",{input:localStorage.getItem("GitUserEmail")||""});case 2:if((fe=Od.sent)&&fe.length){Od.next=5;break}throw Error("Missing email");case 5:return localStorage.setItem("GitUserEmail",fe),Od.abrupt("return",fe);case 7:case "end":return Od.stop()}},Eb)}));return ab.apply(this,arguments)};tb=function(Ta){return ab.apply(this,arguments)};pa=function(){pa=nd(regeneratorRuntime.mark(function Bd(){var Eb;return regeneratorRuntime.wrap(function(fe){for(;;)switch(fe.prev=
fe.next){case 0:return fe.next=2,La.prompt("Git does not yet know your name. Please enter it here:",{input:localStorage.getItem("GitUserName")||""});case 2:if((Eb=fe.sent)&&Eb.length){fe.next=5;break}throw Error("Missing username");case 5:return localStorage.setItem("GitUserName",Eb),fe.abrupt("return",Eb);case 7:case "end":return fe.stop()}},Bd)}));return pa.apply(this,arguments)};Wa=function(){return pa.apply(this,arguments)};va=function(){va=nd(regeneratorRuntime.mark(function Eb(Bd){var fe,Od,
Hd,Qc;return regeneratorRuntime.wrap(function(Xd){for(;;)switch(Xd.prev=Xd.next){case 0:return fe=[{name:"get username",gitCommand:"config --get user.name",options:Bd},{name:"get email",gitCommand:"config --get user.email",options:Bd}],Xd.next=3,T.runGitCommands(fe);case 3:return Hd=(Od=Xd.sent)?Od["get email"].trim():"",Qc=Od?Od["get username"].trim():"",Xd.abrupt("return",{user:Qc,email:Hd});case 7:case "end":return Xd.stop()}},Eb)}));return va.apply(this,arguments)};N=function(Ta){return va.apply(this,
arguments)};Kb=Vb.user;Db=Vb.email;if(!Kb||!Db){yc.next=10;break}return yc.abrupt("return",{user:Kb,email:Db});case 10:if(T.isPublicServer){yc.next=16;break}yc.next=13;return N(Vb);case 13:Ra=yc.sent,Kb=Ra.user,Db=Ra.email;case 16:if(Kb){yc.next=20;break}yc.next=19;return Wa();case 19:Kb=yc.sent;case 20:if(Db){yc.next=24;break}yc.next=23;return tb();case 23:Db=yc.sent;case 24:if(T.isPublicServer){yc.next=27;break}yc.next=27;return Ob(Kb,Db,Vb);case 27:return yc.abrupt("return",{user:Kb,email:Db});
case 28:case "end":return yc.stop()}},Lb)}));return aa.apply(this,arguments)},Oc=function(qb){return aa.apply(this,arguments)},vc=function(){vc=nd(regeneratorRuntime.mark(function Db(Vb,Lb,Kb){var Ra,N;return regeneratorRuntime.wrap(function(va){for(;;)switch(va.prev=va.next){case 0:if(!ya.askForCommitInLively){va.next=10;break}va.next=3;return La.prompt("Please enter a commit message:",{textMode:"text",historyId:"lively.git.commit",input:"empty commit message"});case 3:if(Ra=va.sent){va.next=6;break}throw Error("No commit message, commit aborted.");
case 6:return N=[{name:"commit",gitCommand:sa(Ra,Lb,Kb),options:Vb}],va.abrupt("return",T.runGitCommands(N));case 10:return N=[{name:"commit",gitCommand:sa(null,Lb,Kb),options:Vb}],va.abrupt("return",T.runGitCommands(N));case 12:case "end":return va.stop()}},Db)}));return vc.apply(this,arguments)},Ub=function(qb,Vb,Lb){return vc.apply(this,arguments)},sa=function(qb,Vb,Lb){var Kb="commit";T.isPublicServer&&(Vb=Vb||"unknown-author",Lb=Lb||Vb+"@"+document.location.hostname,Kb+=T.string.format(" --author='%s <%s>'",
Vb,Lb));qb&&(Kb+=' -m "'+qb.replace(/"/g,'\\"')+'"');return Kb},ya=Object.assign({askForCommitInLively:!1},ya),La=$world,Ma.next=9,Oc(ya);case 9:return eb=Ma.sent,jb=eb.user,E=eb.email,Ma.next=14,Ub(ya,jb,E);case 14:Wb=Ma.sent;R=Wb.cmdCommit;xb=R.exitCode;Ja=R.stderr;Ga=R.output;if(!xb){Ma.next=21;break}throw Error("Commit failed: "+Ja);case 21:return Ma.abrupt("return",Ga);case 22:case "end":return Ma.stop()}},pb)}));return Za.apply(this,arguments)}function Sb(){Sb=nd(regeneratorRuntime.mark(function eb(ya,
pb,La){var jb,E,Wb,R,xb,Ja,Ga;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:return La=Object.assign({dryRun:!1},La),jb=ya.pluginFind(function(Ub){return Ub.isDiffEditorPlugin}),E=ka.arr.pluck(jb.patches,"fileNameA"),sa.next=5,ka.git.fileStatus(La.cwd,La);case 5:return Wb=sa.sent,R=Wb.filter(function(Ub){return E.includes(Ub.fileName)}),sa.next=9,ka.git.stageOrUnstageOrDiscardFiles(pb,R,La);case 9:return xb=sa.sent,Ja=xb.commands,Ga=xb.fileObjects,ya.setStatusMessage(ka.string.capitalize(pb)+
"\n"+ka.arr.pluck(Ga,"fileName").join("\n")),sa.abrupt("return",{commands:Ja,fileObjects:Ga});case 14:case "end":return sa.stop()}},eb)}));return Sb.apply(this,arguments)}function Cb(){Cb=nd(regeneratorRuntime.mark(function eb(ya,pb,La){var jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return La=Object.assign({dryRun:!1},La),R.next=3,ka.git.applyPatchesFromEditor(pb,ya,La);case 3:return jb=R.sent,E=jb.commands,Wb=jb.patches,ya.setStatusMessage(ka.string.capitalize(pb)+
"\n"+ka.arr.invoke(Wb,"createPatchString").join("\n")),R.abrupt("return",{commands:E,patches:Wb});case 8:case "end":return R.stop()}},eb)}));return Cb.apply(this,arguments)}var Da=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/file-patch.js");Da.arr=pd;Da.string=Nd;var zb=function(K){var ya=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/file-patch.js"),pb=ya.hasOwnProperty("FilePatch")&&"function"===typeof ya.FilePatch?ya.FilePatch:ya.FilePatch=function(La){if(!La||!La[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Tc(pb,K,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.lines=[];this.headerLines=[];this.hunks=[];this.command=this.fileNameB=this.fileNameA=this.pathChanged=this.pathOriginal=""}},{key:"copy",value:function(){return Object.assign(new this.constructor,this)}},{key:"isFilePatch",get:function(){return!0}},{key:"read",value:function(La){this.lines=Array.isArray(La)?La:Da.string.lines(La);La=this.lines.slice();var eb=this.hunks;""===La[La.length-1]&&La.pop();
var jb=this.headerLines=Da.arr.takeWhile(La,function(Ga){return!Ga.startsWith("---")});jb.length&&!jb[0].match(/^index/i)&&(this.command=jb[0]);La=La.slice(jb.length);var E=Jc(La,2),Wb=E[0];E=E[1];if(Wb&&Wb.startsWith("---")){var R=Wb.match(/^---\s*([^\s]+)/);R=Jc(R,2);R[0];this.pathOriginal=R=R[1];this.fileNameA=R.replace(/^a\//,"");jb.push(Wb)}E&&E.startsWith("+++")&&(Wb=E.match(/^\+\+\+\s*([^\s]+)/),Wb=Jc(Wb,2),Wb[0],this.pathChanged=R=Wb[1],this.fileNameB=R.replace(/^b\//,""),jb.push(E));for(;0<
La.length;){jb=Da.FilePatchHunk.read(La,xb,Ja);var xb=jb.pathOriginal;var Ja=jb.pathChanged;jb.patch=this;eb.push(jb)}return this}},{key:"reverse",value:function(){return Da.FilePatch.read(this.createPatchString(!0))}},{key:"createPatchStringHeader",value:function(La){return Da.arr.takeWhile(this.headerLines,function(eb){return!eb.startsWith("---")}).join("\n")}},{key:"createPatchString",value:function(La){return this.createPatchStringHeader(La)+"\n"+this.hunks.map(function(eb,jb){return eb.createPatchString(La,
0===jb)}).join("\n")+"\n"}},{key:"createPatchStringFromRows",value:function(La,eb,jb){var E=this.hunks,Wb=this.headerLines.length,R=[];La=Math.max(La,Wb)-Wb;eb-=Wb;var xb=!1;R=E.map(function(Ja,Ga){Ga=Ja.createPatchStringFromRows(La,eb,jb,!xb);xb=xb||!!Ga;La-=Ja.length;eb-=Ja.length;return Ga}).filter(Boolean);return 0===R.length?null:this.createPatchStringHeader()+"\n"+R.join("\n")+"\n"}},{key:"changesByLines",value:function(){return Da.arr.invoke(this.hunks,"changesByLines").flat()}},{key:"length",
value:function(){return this.lines.length}},{key:"patch",value:function(La){return this.changesByLines().reduce(function(eb,jb,E){var Wb=jb.lineNoAdded-1,R=jb.removed.replace(/\n$/,""),xb=R?Da.string.lines(R).length:0,Ja=eb.slice(Wb,Wb+xb).join("\n");if(R!==Ja)throw eb=Da.string.format('Change %s not matching: Expected "%s", got "%s"',E+1,R,Ja),Error(eb);jb=jb.added?jb.added:"";xb=Wb+xb;return eb.slice(0,Wb).concat(jb?Da.string.lines(jb.replace(/\n$/,"")):[]).concat(eb.slice(xb))},Da.string.lines(La)).join("\n")}},
{key:"hunkForRow",value:function(La){La-=this.headerLines.length;return 0>La?null:this.hunks.find(function(eb){La-=(eb.header?1:0)+eb.lines.length;if(0>La)return!0})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FilePatch"}},{key:"read",value:function(La){return(new this).read(La)}},{key:"readAll",value:function(La){return Da.string.lines(La).reduce(function(eb,jb){var E=Da.arr.last(eb);E?jb.match(/^(---|\+\+\+|@@|-|\+|\\| )/)?E.push(jb):1===E.length?E.push(jb):""!==jb&&eb.push([jb]):
eb.push([jb]);return eb},[]).map(function(eb){return Da.FilePatch.read(eb)})}},{key:"hunkOrPatchForRow",value:function(La){var eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,jb=0,E=0,Wb=$d(La),R;try{for(Wb.s();!(R=Wb.n()).done;){var xb=R.value;E+=xb.length();if(eb<E)break;jb=E}}catch(Ja){Wb.e(Ja)}finally{Wb.f()}return xb?xb.hunkForRow(eb-jb)||xb:null}}],ya,{pathInPackage:function(){return"./diff/file-patch.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:50,end:5858})}(void 0);Da.FilePatch=zb;Da.FilePatch=zb;var db=function(K){var ya=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/file-patch.js"),pb=ya.hasOwnProperty("FilePatchHunk")&&"function"===typeof ya.FilePatchHunk?ya.FilePatchHunk:ya.FilePatchHunk=function(La){if(!La||!La[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Tc(pb,K,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){this.patch=null;this.header=this.fileNameB=this.fileNameA=this.pathChanged=this.pathOriginal="";this.changedLength=this.changedLine=this.originalLength=this.originalLine=-1;this.lines=[]}},{key:"isFilePatchHunk",get:function(){return!0}},{key:"read",value:function(La,eb,jb){this.pathOriginal=eb||"";this.pathChanged=jb||"";for(eb=La.shift();!eb.startsWith("---")&&!eb.startsWith("@@");)eb=La.shift();eb.startsWith("---")&&
(this.pathOriginal=eb.split(" ")[1]||this.pathOriginal,eb=La.shift());this.fileNameA=this.pathOriginal.replace(/^a\//,"");eb.startsWith("+++")&&(this.pathChanged=eb.split(" ")[1]||this.pathChanged,eb=La.shift());this.fileNameB=this.pathChanged.replace(/^b\//,"");jb=eb.match(/^@@\s*-([0-9]+),?([0-9]*)\s*\+([0-9]+),?([0-9]*)\s*@@/);console.assert(jb,"hunk header "+eb);this.header=jb[0];this.originalLine=Number(jb[1]);this.originalLength=Number(jb[2]);this.changedLine=Number(jb[3]);for(this.changedLength=
Number(jb[4]);La[0]&&La[0].match(/^[\+\-\s\\]/);)this.lines.push(La.shift());this.length=this.lines.length+1;return this}},{key:"createPatchString",value:function(La,eb){return this.printHeader(La,eb)+"\n"+this.printLines(La)}},{key:"createPatchStringFromRows",value:function(La,eb,jb,E){if(1>eb||La>=this.lines.length)return null;var Wb=this.originalLine,R=this.changedLine,xb=0,Ja=0,Ga=this.lines.reduce(function(Ub,vc,Oc){if(Ub.atEnd)return Ub;Oc++;if(Oc<La)switch(vc[0]){case "+":case "-":return Wb+=
Ub.lines.length,R+=Ub.lines.length,xb=Ja=0,Ub.lines=[],Ub;case " ":Ja++,xb++}else if(Oc>eb)switch(vc[0]){case " ":Ja++;xb++;break;default:return Ub.atEnd=!0,Ub}else switch(vc[0]){case " ":Ja++;xb++;break;case "-":xb++;break;case "+":Ja++}if(jb)switch(vc[0]){case "-":vc="+"+vc.slice(1);break;case "+":vc="-"+vc.slice(1)}Ub.lines.push(vc);return Ub},{atEnd:!1,lines:[]}).lines;if(0===Ga.length)return null;var sa="";E&&(sa="--- "+(jb?this.pathChanged:this.pathOriginal)+"\n+++ "+(jb?this.pathOriginal:this.pathChanged)+
"\n");return[Da.string.format("%s@@ -%s,%s +%s,%s @@",sa,Wb,xb,R,Ja)].concat(Ga).join("\n")}},{key:"changesByLines",value:function(){var La=this.changedLine,eb=this.originalLine,jb=0,E=this.lines.reduce(function(Wb,R,xb){if(" "===R[0])return Wb.current&&(Wb.changes.push(Wb.current),Wb.current=null),Wb;xb=Wb.current||(Wb.current={lineNoAdded:La+xb+jb,lineNoRemoved:eb+xb+jb,added:"",removed:""});"+"===R[0]?(xb.added+=R.slice(1)+"\n",jb++):"-"===R[0]&&(xb.removed+=R.slice(1)+"\n",jb--);return Wb},{changes:[],
current:null});E.current&&E.changes.push(E.current);return E.changes}},{key:"relativeOffsetToFileLine",value:function(La){return 0>=La?this.changedLine-1:this.lines.slice(0,La).reduce(function(eb,jb){jb=jb[0];return"+"===jb||" "===jb?eb+1:eb},this.changedLine-2)}},{key:"printHeader",value:function(La,eb){var jb="";eb&&(jb="--- "+(La?this.pathChanged:this.pathOriginal)+"\n+++ "+(La?this.pathOriginal:this.pathChanged)+"\n");return Da.string.format("%s@@ -%s +%s @@",jb,La?this.changedLine+","+this.changedLength:
this.originalLine+","+this.originalLength,La?this.originalLine+","+this.originalLength:this.changedLine+","+this.changedLength)}},{key:"printLines",value:function(La){return(La?this.lines.map(function(eb){switch(eb[0]){case " ":return eb;case "+":return"-"+eb.slice(1);case "-":return"+"+eb.slice(1)}}):this.lines).join("\n")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FilePatchHunk"}},{key:"read",value:function(La,eb,jb){return(new this).read(La,eb,jb)}}],ya,{pathInPackage:function(){return"./diff/file-patch.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:5866,end:13932})}(void 0);Da.FilePatchHunk=db;Da.FilePatchHunk=db;var ib=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/tokenizer.js");ib.FilePatch=zb;db=function(K){var ya=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/tokenizer.js"),pb=ya.hasOwnProperty("DiffTokenizer")&&
"function"===typeof ya.DiffTokenizer?ya.DiffTokenizer:ya.DiffTokenizer=function(La){if(!La||!La[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Tc(pb,K,[{key:"tokenize",value:function(La){La=ib.FilePatch.readAll(La);var eb={row:0,column:0},jb=[],E=0,Wb=$d(La),R;try{for(Wb.s();!(R=Wb.n()).done;){var xb=R.value,Ja={column:0,row:eb.row+xb.headerLines.length},Ga={patch:E,string:xb.headerLines.join("\n")+"\n",type:"diff-file-header",
start:eb,end:Ja};jb.push(Ga);xb.tokens=[Ga];eb=Ja;var sa=0,Ub=$d(xb.hunks),vc;try{for(Ub.s();!(vc=Ub.n()).done;){var Oc=vc.value;Ja={column:0,row:eb.row+1};Ga={patch:E,hunk:sa,string:Oc.header+"\n",type:"diff-hunk-header",start:eb,end:Ja};jb.push(Ga);xb.tokens.push(Ga);Oc.tokens=[Ga];eb=Ja;var aa=$d(Oc.lines),Ma;try{for(aa.s();!(Ma=aa.n()).done;){var qb=Ma.value;Ja={column:0,row:eb.row+1};var Vb=qb.startsWith("+")?"inserted":qb.startsWith("-")?"deleted":"default";Ga={patch:E,hunk:sa,string:qb+"\n",
type:Vb,start:eb,end:Ja};jb.push(Ga);xb.tokens.push(Ga);Oc.tokens.push(Ga);eb=Ja}}catch(Lb){aa.e(Lb)}finally{aa.f()}sa++}}catch(Lb){Ub.e(Lb)}finally{Ub.f()}E++}}catch(Lb){Wb.e(Lb)}finally{Wb.f()}return{tokens:jb,patches:La}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DiffTokenizer"}}],ya,{pathInPackage:function(){return"./diff/tokenizer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:60,end:1744})}(void 0);ib["default"]=db;var Ea=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/navigator.js");Ea.lessEqPosition=Bb;Ea.lessPosition=rd;Ea.obj=Id;Ea.arr=pd;Ea.DiffTokenizer=db;Ea.show=vd;var W=function(K){var ya=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/navigator.js"),pb=ya.hasOwnProperty("DiffNavigator")&&"function"===typeof ya.DiffNavigator?ya.DiffNavigator:ya.DiffNavigator=function(La){if(!La||
!La[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Tc(pb,K,[{key:"ensureAST",value:function(La){return(new Ea.DiffTokenizer).tokenize(La.textString).tokens}},{key:"tokenStateAt",value:function(La){var eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:La.cursorPosition,jb=La.pluginFind(function(R){return R.isDiffEditorPlugin});if(!jb)return null;var E=jb.tokens;jb=jb.patches;var Wb=E.findIndex(function(R){var xb=
R.end;return Ea.lessEqPosition(R.start,eb)&&Ea.lessPosition(eb,xb)});return{token:E[Wb],tokenIndex:Wb,tokens:E,patches:jb}}},{key:"findPatchAt",value:function(La){var eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:La.cursorPosition;return(eb=this.findContainingHunkOrPatch(La,{start:eb,end:eb}))?eb.isFilePatchHunk?eb.patch:eb:null}},{key:"findHunkAt",value:function(La){var eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:La.cursorPosition;return(eb=this.findContainingHunkOrPatch(La,
{start:eb,end:eb}))?eb.isFilePatchHunk?eb:null:null}},{key:"findPatchStart",value:function(La,eb){return(La=this.findPatchAt(La,eb))?La.tokens[0].start:eb}},{key:"findPatchEnd",value:function(La,eb){return(La=this.findPatchAt(La,eb))?Ea.arr.last(La.tokens).end:eb}},{key:"findHunkStart",value:function(La,eb){return(La=this.findHunkAt(La,eb))?La.tokens[0].start:eb}},{key:"findHunkEnd",value:function(La){var eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:La.cursorPosition,jb=this.findHunkAt(La,
eb);return jb?Ea.arr.last(jb.tokens).end:eb}},{key:"backwardSexp",value:function(La){var eb=this,jb=La.cursorPosition,E=this.findHunkStart(La),Wb=this.findPatchStart(La);Ea.obj.equals(jb,E)&&(La.saveExcursion(function(){La.selection.goLeft();E=eb.findHunkStart(La)}),Ea.obj.equals(jb,E)&&(E=null));Ea.obj.equals(jb,Wb)&&(La.saveExcursion(function(){La.selection.goLeft();Wb=eb.findPatchStart(La)}),Ea.obj.equals(jb,Wb)&&(Wb=null));if(E||Wb)La.cursorPosition=E?Wb?E.row>Wb.row?E:Wb:E:Wb,La.scrollCursorIntoView()}},
{key:"forwardSexp",value:function(La){var eb=this,jb=La.cursorPosition,E=eb.findHunkEnd(La);Ea.obj.equals(jb,E)&&(La.saveExcursion(function(){La.selection.goRight();E=eb.findHunkEnd(La)}),Ea.obj.equals(jb,E)&&(E=null));E&&(La.cursorPosition=E,La.scrollCursorIntoView())}},{key:"backwardUpSexp",value:function(La){La.cursorPosition;var eb=this.findPatchStart(La);eb&&(La.cursorPosition=eb,La.scrollCursorIntoView())}},{key:"forwardDownSexp",value:function(La){Ea.show("Not yet implemented")}},{key:"findContainingHunkOrPatch",
value:function(La,eb){var jb=this.tokenStateAt(La,eb.start);jb.tokens;var E=jb.patches;jb=jb.token;La=this.tokenStateAt(La,eb.end).token;return jb.patch!=La.patch?null:jb.hasOwnProperty("hunk")&&La.hasOwnProperty("hunk")&&jb.hunk===La.hunk?E[jb.patch].hunks[jb.hunk]:E[jb.patch]}},{key:"findContainingHunkOrPatchRange",value:function(La,eb){La=this.findContainingHunkOrPatch(La,eb);if(!La)return null;eb=La.tokens;La=eb[0].start;eb=Ea.arr.last(eb).end;return{start:La,end:eb}}},{key:"expandRegion",value:function(La,
eb,jb,E){return(eb=this.findContainingHunkOrPatchRange(La,La.selection.range))?{range:[La.positionToIndex(eb.start),La.positionToIndex(eb.end)],prev:E}:E}},{key:"contractRegion",value:function(La,eb,jb,E){return E.prev||E}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DiffNavigator"}}],ya,{pathInPackage:function(){return"./diff/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:484,end:4994})}(void 0);Ea["default"]=W;var T=window.lively.FreezerRuntime.recorderFor("lively.ide/shell/git.js");T.runCommands=function(K){return Xb.apply(this,arguments)};T.runGitCommands=Nb;T.fileStatus=hb;T.applyPatchesFromEditor=Hb;T.applyPatches=ub;T.stageOrUnstageOrDiscardFiles=ba;T.commit=Xa;T.fun=Ac;T.arr=pd;T.string=Nd;T.obj=Id;T.defaultDirectory=Pc;T.runCommand=gd;T.isPublicServer=!1;T.runGitCommands=Nb;T.fileStatus=
hb;T.applyPatchesFromEditor=Hb;T.applyPatches=ub;T.stageOrUnstageOrDiscardFiles=ba;T.commit=Xa;var ia=Object.freeze({__proto__:null,runGitCommands:Nb,fileStatus:hb,applyPatchesFromEditor:Hb,applyPatches:ub,stageOrUnstageOrDiscardFiles:ba,commit:Xa}),ka=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/editor-plugin.js");ka.stageOrUnstagedOrDiscardAll=function(K,ya,pb){return Sb.apply(this,arguments)};ka.patchApplySelection=function(K,ya,pb){return Cb.apply(this,arguments)};ka.arr=pd;ka.string=
Nd;ka.pt=Fd;ka.config=ic;ka.lessEqPosition=Bb;ka.DiffNavigator=W;ka.DiffTokenizer=db;ka.FilePatch=zb;ka.EditorPlugin=sb;ka.runCommand=gd;ka.git=ia;zb=Lc("default",function(K){var ya=window.lively.FreezerRuntime.recorderFor("lively.ide/diff/editor-plugin.js"),pb=ya.hasOwnProperty("DiffEditorPlugin")&&"function"===typeof ya.DiffEditorPlugin?ya.DiffEditorPlugin:ya.DiffEditorPlugin=function(La){if(!La||!La[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Tc(pb,K,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){Tc._get(Object.getPrototypeOf(pb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.tokenizer=new ka.DiffTokenizer;this.tokens=[];this.patches=[]}},{key:"isDiffEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"diff"}},{key:"cwd",get:function(){var La=this.textMorph.owner;return La&&"Terminal"===La.constructor.name?La.cwd:null}},{key:"highlight",value:function(){var La=
this.textMorph;this.theme&&La&&La.document&&(this.tokenize(La.textString),La.setTextAttributesWithSortedRanges(this.styledRanges()))}},{key:"tokenize",value:function(La){var eb=[],jb=[];if(La)try{ka.__inter0__=this.tokenizer.tokenize(La),eb=ka.__inter0__.tokens,jb=ka.__inter0__.patches}catch(E){}this.tokens=eb;this.patches=jb}},{key:"styledRanges",value:function(){var La=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,eb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,jb=[],E=this.tokens,
Wb=$d(E),R;try{for(Wb.s();!(R=Wb.n()).done;){var xb=R.value,Ja=xb.type,Ga=xb.start,sa=xb.end;if(La||eb){var Ub=Ga,vc=Ub.row,Oc=Ub.column;vc+=La;Ga={row:vc,column:Oc};Ub=sa;var aa=Ub.row,Ma=Ub.column;aa+=La;sa={row:aa,column:Ma}}"default"!==E.type&&this.theme[Ja]&&jb.push({start:Ga,end:sa},this.theme[Ja])}}catch(qb){Wb.e(qb)}finally{Wb.f()}return jb}},{key:"getCommands",value:function(La){return La.concat(ka.commands)}},{key:"getKeyBindings",value:function(La){return La.concat([{command:"[patch] open file at cursor",
keys:"Alt-O"},{command:"[patch] show selected patch",keys:"Alt-P"},{command:"[git] stage selection",keys:"Alt-S"},{command:"[git] stage all",keys:"Alt-Shift-S"},{command:"[git] unstage selection",keys:"Alt-U"},{command:"[git] unstage all",keys:"Alt-Shift-U"},{command:"[git] discard selection",keys:"Alt-K"},{command:"[git] discard all",keys:"Alt-Shift-K"},{command:"[git] apply selection",keys:"Alt-A"},{command:"[git] reverse apply selection",keys:"Alt-R"},{command:"[git] commit",keys:"Alt-C"},{command:"[git] update",
keys:"Alt-G"}])}},{key:"tokenAt",value:function(La){return this.tokens.find(function(eb){var jb=eb.end;return ka.lessEqPosition(eb.start,La)&&ka.lessEqPosition(La,jb)})}},{key:"getNavigator",value:function(){return new ka.DiffNavigator}},{key:"getPatchesFromSelection",value:function(La){var eb=this.patches;if(!eb||!eb.length)return[];var jb=this.getNavigator(),E=La.selection.range,Wb=jb.findPatchAt(La,E.start);jb=jb.findPatchAt(La,E.end);La=eb.indexOf(Wb);jb=jb?eb.indexOf(jb):eb.length;var R=E.start.row,
xb=E.end.row,Ja=Wb?Wb.tokens[0].start.row:0;return eb.slice(La,jb+1).map(function(Ga,sa){sa=Ga.createPatchStringFromRows(R-Ja,xb-Ja);Ja+=Ga.length();return sa?ka.FilePatch.read(sa):null}).filter(Boolean)}},{key:"getPatchAtCursor",value:function(La){La=La.cursorPosition;var eb=this.tokenAt(La);if(!eb||!eb.hasOwnProperty("patch"))return null;var jb=this.patches[eb.patch];eb=eb.hasOwnProperty("hunk")?jb.hunks[eb.hunk]:null;return{patch:jb,hunk:eb,cursorOffsetInHunk:eb?La.row-eb.tokens[0].start.row:0}}},
{key:"getMenuItems",value:function(La){var eb=this.textMorph,jb=!eb.selection.isEmpty();La.push.apply(La,[{isDivider:!0},{target:eb,command:"[patch] open file at cursor"},{target:eb,command:"[patch] show selected patch"},{target:eb,command:"[git] apply selection"},{target:eb,command:"[git] reverse apply selection"},{target:eb,command:"[git] stage "+(jb?"selection":"all")},{target:eb,command:"[git] unstage "+(jb?"selection":"all")},{target:eb,command:"[git] discard "+(jb?"selection":"all")},{target:eb,
command:"[git] update"},{target:eb,command:"[git] commit"}]);return La}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DiffEditorPlugin"}}],ya,{pathInPackage:function(){return"./diff/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:526,end:5581})}(ka.EditorPlugin));ka.commands=[{name:"[patch] show selected patch",
exec:function(K){var ya=K.pluginFind(function(La){return La.isDiffEditorPlugin});K.selection.isEmpty()?(ya=ya.getPatchAtCursor(K),ya=ya.patch?[ya.patch]:null):ya=ya.getPatchesFromSelection(K);if(ya&&ya.length)var pb=ka.arr.invoke(ya,"createPatchString").join("\n");else K.setStatusMessage("Cannot read patch");K.world().execCommand("open text window",Object.assign({lineWrapping:!1,plugins:[new ka.DiffEditorPlugin]},ka.config.codeEditor.defaultStyle,{title:"patches for "+ka.arr.pluck(ya,"fileNameA").join(", "),
content:pb,extent:ka.pt(700,400)}));return!0}},{name:"[patch] open file at cursor",exec:function(){var K=nd(regeneratorRuntime.mark(function La(pb){var eb,jb,E,Wb,R;return regeneratorRuntime.wrap(function(xb){for(;;)switch(xb.prev=xb.next){case 0:eb=pb.pluginFind(function(Ja){return Ja.isDiffEditorPlugin});if((jb=eb.getPatchAtCursor(pb))&&jb.hunk){xb.next=5;break}pb.setStatusMessage("Cannot read patch");return xb.abrupt("return",!0);case 5:E=jb.hunk.relativeOffsetToFileLine(jb.cursorOffsetInHunk);
Wb=jb.hunk.fileNameB;if(Wb.match(/^(\/|[a-z]:\\)/i)){xb.next=15;break}xb.t0=eb.cwd;if(xb.t0){xb.next=13;break}xb.next=12;return pb.world().prompt("Enter base directory for file",{historyId:"lively.morphic-ide/diff-directory-for-file",useLastInput:!0,input:document.location.origin});case 12:xb.t0=xb.sent;case 13:(R=xb.t0)&&(Wb=ka.string.joinPath(R,Wb));case 15:return E&&(Wb+=":"+E),xb.abrupt("return",pb.world().execCommand("open file",{url:Wb}));case 17:case "end":return xb.stop()}},La)}));return function(pb){return K.apply(this,
arguments)}}()},{name:"[git] commit",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.prev=1,E.next=4,ka.git.commit({cwd:jb.cwd});case 4:pb.setStatusMessage("Commit successful");E.next=10;break;case 7:E.prev=7,E.t0=E["catch"](1),pb.showError(E.t0);case 10:return E.abrupt("return",!0);case 11:case "end":return E.stop()}},eb,null,
[[1,7]])}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] update",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb,E,Wb;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,pb.world().prompt("git diff command",{useLastInput:!0,input:"git diff",historyId:"codeeditor.modes.Diff.git-update"});case 2:if(jb=R.sent){R.next=6;break}pb.setStatusMessage("command canceled");return R.abrupt("return",!0);case 6:return E=
pb.pluginFind(function(xb){return xb.isDiffEditorPlugin}),R.next=9,ka.runCommand(jb,{cwd:E.cwd});case 9:return Wb=R.sent,R.next=12,Wb.whenDone();case 12:return pb.saveExcursion(function(){return pb.textString=Wb.stdout}),R.abrupt("return",!0);case 14:case "end":return R.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] stage selection",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=
E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.patchApplySelection(pb,"stage",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] unstage selection",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),
E.next=3,ka.patchApplySelection(pb,"unstage",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] discard selection",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.patchApplySelection(pb,
"discard",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] reverse apply selection",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.patchApplySelection(pb,"reverseApply",Object.assign({cwd:jb.cwd},
La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] apply selection",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.patchApplySelection(pb,"apply",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",
E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] stage all",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.stageOrUnstagedOrDiscardAll(pb,"stage",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},
eb)}));return function(pb,La){return K.apply(this,arguments)}}()},{name:"[git] unstage all",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.stageOrUnstagedOrDiscardAll(pb,"unstage",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,
La){return K.apply(this,arguments)}}()},{name:"[git] discard all",exec:function(){var K=nd(regeneratorRuntime.mark(function eb(pb,La){var jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return jb=pb.pluginFind(function(Wb){return Wb.isDiffEditorPlugin}),E.next=3,ka.stageOrUnstagedOrDiscardAll(pb,"discard",Object.assign({cwd:jb.cwd},La));case 3:return E.abrupt("return",E.sent);case 4:case "end":return E.stop()}},eb)}));return function(pb,La){return K.apply(this,arguments)}}()}];
ka["default"]=zb}}});