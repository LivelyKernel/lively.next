System.register(["./__root_module__-c4f77fb9.js"],function(ra){var jb,pb,Ub,Jb,jd,uc,nd,wc,Cc,Mc,Bd,re,Ce,be,Sb,qc,od,Tb,wd,Fd,fc,ic,Ab,jc,Bc,ad,bd,ob,kb,tb,Aa,Fa,Ba,wa,Na,La,Wa,Gb,Rb,Bb,ba,xa,M;return{setters:[function(ha){jb=ha.ax;pb=ha.a3;Ub=ha.C;Jb=ha.ab;jd=ha.a8;uc=ha.$;nd=ha.a7;wc=ha.a1;Cc=ha.a2;Mc=ha.aa;Bd=ha.aA;re=ha.as;Ce=ha.an;be=ha.aX;Sb=ha.au;qc=ha.aj;od=ha.aY;Tb=ha.aw;wd=ha.az;Fd=ha.aZ;fc=ha.aD;ic=ha.ac;Ab=ha.aq;jc=ha.g;Bc=ha.am;ad=ha.P;bd=ha.a_;ob=ha.at;kb=ha.a6;tb=ha.av;Aa=ha.a$;
Fa=ha.r;Ba=ha.ap;wa=ha.b0;Na=ha.b1;La=ha.b2;Wa=ha.ad;Gb=ha.b3;Rb=ha.ar;Bb=ha.b4;ba=ha.b5;xa=ha.b6;M=ha.aS}],execute:function(){function ha(Ra){(Ra=Yb.cachedGuideLines.get(Ra))&&Ra.forEach(function(Ha){return Ha.remove()})}function Ka(Ra,Ha,Ya,H,ea){Ha=void 0===Ha?!0:Ha;Ya=void 0===Ya?!0:Ya;H=void 0===H?10:H;ea=void 0===ea?100:ea;if(Ha||Ya){var Oa=Ra.owner,sb=Oa.world();Oa=Oa.getGlobalTransform();var Lb=Ra.owner.submorphs.filter(function(yc){return yc!==Ra&&!yc.isEpiMorph&&yc.visible&&yc.reactsToPointer}),
vc=Yb.findAlignedMorphs(Ra,Lb,H,ea,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));ea=[];var gd=0,xd=0,sc=0,Zd=0;Oa.e-=sb.scroll.x;Oa.f-=sb.scroll.y;if(vc){vc=$jscomp.makeIterator(vc);for(var he=vc.next();!he.done;he=vc.next()){he=$jscomp.makeIterator(he.value);he.next();var Wd=he.next().value;he=Wd.vertical;Wd=$jscomp.makeIterator(Wd.horizontal);for(var Ie=Wd.next();!Ie.done;Ie=Wd.next()){Ie=Ie.value;var Ke=Ie.edgeAVal,Db=Ie.refPointsA,Lf=Ie.refPointsB,
xe=Ie.edgeBVal,tf=Math.ceil(H-Ie.delta),ie=Math.min(Db.top,Lf.top);Db=Math.max(Db.bottom,Lf.bottom);Ie.maxDist>H&&(tf-=H/2);gd<tf&&(gd=tf,sc=xe-Ke);ea.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Yb.guideWidth,start:Oa.transformPoint(Yb.pt(xe,ie)),end:Oa.transformPoint(Yb.pt(xe,Db)),fill:Yb.guideColor,guideType:"h",priority:tf})}he=$jscomp.makeIterator(he);for(Wd=he.next();!Wd.done;Wd=he.next())Wd=Wd.value,Ie=Wd.edgeAVal,ie=Wd.refPointsA,Db=Wd.refPointsB,Ke=Wd.edgeBVal,xe=Math.ceil(H-
Wd.delta),tf=Math.min(ie.left,Db.left),ie=Math.max(ie.right,Db.right),Wd.maxDist>H&&(xe-=H/2),xd<xe&&Math.abs(Ke-Ie)<=H&&(xd=xe,Zd=Ke-Ie),ea.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Yb.guideWidth,start:Oa.transformPoint(Yb.pt(tf,Ke)),end:Oa.transformPoint(Yb.pt(ie,Ke)),fill:Yb.guideColor,guideType:"v",priority:xe})}}if(!gd||!xd){Lb=[Ra].concat($jscomp.arrayFromIterable(Lb));Ie=Yb.computeClosestMorphs(Lb);Wd=Ie[0];Lb=Wd.l;vc=Wd.r;he=Wd.t;Wd=Wd.b;var ua;if(Lb||vc||he||Wd){var Ga=(Lb||
vc||he||Wd).refPointsA;for(Ke=1;Ke<Ie.length&&(Db=Ie[Ke],xe=Db.l,tf=Db.r,ie=Db.t,Db=Db.b,gd||(Lb&&xe&&Lb.index!==xe.index&&Math.abs(xe.dist-Lb.dist)<=H?ua=Object.assign({neighbor:Ke,direction:"left"},xe):vc&&tf&&vc!==tf.index&&Math.abs(tf.dist-vc.dist)<=H&&(ua=Object.assign({neighbor:Ke,direction:"right"},tf))),xd||(he&&ie&&he.index!==ie.index&&Math.abs(ie.dist-he.dist)<=H?ua=Object.assign({neighbor:Ke,direction:"top"},ie):Wd&&Db&&Wd.index!==Db.index&&Math.abs(Db.dist-Wd.dist)<=H&&(ua=Object.assign({neighbor:Ke,
direction:"bottom"},Db))),!ua);Ke++);}if(ua){var mb=ua;H=mb.direction;ie=mb.dist;var R=Ga.left;Lf=Ga.top;var qa=Ga.bottom,Va=Ga.right,eb=Ga.width,dc=Ga.height;Db=mb.refPointsA;Ga=Db.left;Ie=Db.top;Ke=Db.bottom;xe=Db.right;tf=Db.width;Db=Db.height;var bc=mb.refPointsB,Ec=bc.left;mb=bc.top;var Nc=bc.bottom;bc=bc.right;Va="left"===H?R:"right"===H?Va:R+eb/2;qa="bottom"===H?qa:"top"===H?Lf:Lf+dc/2;R="left"===H?Va-ie:"right"===H?Va+ie:R+eb/2;ie="bottom"===H?qa+ie:"top"===H?qa-ie:Lf+dc/2;Lf="left"===H?bc:
"right"===H?Ec:Ga+tf/2;eb="bottom"===H?mb:"top"===H?Nc:Ie+Db/2;!Ya||gd||"right"!==H&&"left"!==H||(gd=10,sc=(ua.dist-(vc||Lb).dist)*("right"===H?-1:1),Va+=sc,R+=sc);!Ya||xd||"top"!==H&&"bottom"!==H||(xd=10,Zd=((he||Wd).dist-ua.dist)*("top"===H?-1:1),qa+=Zd,ie+=Zd);ea.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Oa.transformPoint(Yb.pt("left"===H?Ga:"right"===H?xe:Ga+tf/2,"bottom"===H?Ke:"top"===H?Ie:Ie+Db/2)),end:Oa.transformPoint(Yb.pt(Lf,eb)),fill:Yb.Color.orange,height:Yb.guideWidth,
guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Oa.transformPoint(Yb.pt(Va,qa)),end:Oa.transformPoint(Yb.pt(R,ie)),fill:Yb.Color.orange,height:Yb.guideWidth,guideType:H,priority:10})}}Ya&&(sc||Zd)&&Ra.moveBy(Yb.pt(sc,Zd));if(Ha){ea=ea.filter(function(yc){var ve=yc.guideType;yc=yc.priority;return"h"===ve?yc===gd:"v"===ve?yc===xd:!0});(Ha=Yb.cachedGuideLines.get(Ra))||Yb.cachedGuideLines.set(Ra,Ha=[]);for(Ya=0;Ya<ea.length;Ya++)ua=void 0,Ha[Ya]?ua=Object.assign(Ha[Ya],ea[Ya]):
(ua=Yb.morph(ea[Ya]),Ha.push(ua)),ua.owner||sb.addMorph(ua);Ha.slice(Ya).forEach(function(yc){return yc.remove()});Yb.fun.debounceNamed(Ra.id+"-drag-guides-cleanup",1300,function(){var yc=Yb.cachedGuideLines.get(Ra);yc&&yc.forEach(function(ve){return ve.remove()})})()}}}function $a(Ra,Ha,Ya,H,ea,Oa){Ya=void 0===Ya?!0:Ya;H=void 0===H?!0:H;ea=void 0===ea?5:ea;Oa=void 0===Oa?100:Oa;if(Ya||H){var sb=Ra.owner,Lb=sb.world(),vc=sb.getGlobalTransform(),gd=Ra.owner.submorphs.filter(function(qa){return qa!==
Ra&&!qa.isEpiMorph&&qa.visible&&qa.reactsToPointer});sb=(Ha.includes("left")||Ha.includes("right")?"x":"")+(Ha.includes("top")||Ha.includes("bottom")?"y":"");var xd=Yb.findMorphsWithSimilarWidthOrHeight(Ra,sb,gd,ea,Oa),sc=-Infinity,Zd=-Infinity,he=0,Wd=0,Ie=0,Ke=0,Db=0,Lf=0;sb=[];vc.e-=Lb.scroll.x;vc.f-=Lb.scroll.y;if(xd){xd=$jscomp.makeIterator(xd);for(var xe=xd.next();!xe.done;xe=xd.next()){xe=$jscomp.makeIterator(xe.value);xe.next();var tf=xe.next().value;xe=tf.similarIn;var ie=tf.delta,ua=tf.refPointsA,
Ga=tf.refPointsB;tf=ea-ie+(Oa-tf.minDist);"width"===xe?sc<tf&&(sc=tf,Ha.includes("left")&&(Wd=-ie),Ha.includes("right")&&(he=ie)):Zd<tf&&(Zd=tf,Ha.includes("top")&&(Ie=-ie),Ha.includes("bottom")&&(Ke=ie));ie={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Yb.guideWidth,fill:Yb.guideColor,guideType:xe,priority:tf,start:vc.transformPoint("width"===xe?Yb.pt(ua.left,ua.top+ua.height/2):Yb.pt(ua.left+ua.width/2,ua.top)),end:vc.transformPoint("width"===xe?Yb.pt(ua.right,ua.top+ua.height/2):Yb.pt(ua.left+
ua.width/2,ua.bottom))};xe=Object.assign({},ie,{start:vc.transformPoint("width"===xe?Yb.pt(Ga.left,Ga.top+Ga.height/2):Yb.pt(Ga.left+Ga.width/2,Ga.top)),end:vc.transformPoint("width"===xe?Yb.pt(Ga.right,Ga.top+Ga.height/2):Yb.pt(Ga.left+Ga.width/2,Ga.bottom))});sb.push(ie,xe)}}if(Oa=Yb.findAlignedMorphs(Ra,gd,ea,Oa,Ha,void 0))for(Oa=$jscomp.makeIterator(Oa),gd=Oa.next();!gd.done;gd=Oa.next()){gd=$jscomp.makeIterator(gd.value);gd.next();xd=gd.next().value;gd=xd.vertical;xd=$jscomp.makeIterator(xd.horizontal);
for(xe=xd.next();!xe.done;xe=xd.next()){xe=xe.value;Ga=xe.edgeAVal;var mb=xe.refPointsA,R=xe.refPointsB;ie=xe.edgeBVal;ua=Math.ceil(ea-xe.delta);tf=Math.min(mb.top,R.top);mb=Math.max(mb.bottom,R.bottom);xe.maxDist>ea&&(ua-=ea/2);Db<ua&&(Db=ua,Ha.includes("left")&&(Wd=-(ie-Ga)),Ha.includes("right")&&(he=+(ie-Ga)));sb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Yb.guideWidth,start:vc.transformPoint(Yb.pt(ie,tf)),end:vc.transformPoint(Yb.pt(ie,mb)),fill:Yb.guideColor,guideType:"h",priority:ua})}gd=
$jscomp.makeIterator(gd);for(xd=gd.next();!xd.done;xd=gd.next())xd=xd.value,xe=xd.edgeAVal,tf=xd.refPointsA,mb=xd.refPointsB,Ga=xd.edgeBVal,ie=Math.ceil(ea-xd.delta),ua=Math.min(tf.left,mb.left),tf=Math.max(tf.right,mb.right),xd.maxDist>ea&&(ie-=ea/2),Lf<ie&&Math.abs(Ga-xe)<=ea&&(Lf=ie,Ha.includes("top")&&(Ie=Ga-xe),Ha.includes("bottom")&&(Ke=Ga-xe)),sb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Yb.guideWidth,start:vc.transformPoint(Yb.pt(ua,Ga)),end:vc.transformPoint(Yb.pt(tf,Ga)),
fill:Yb.guideColor,guideType:"v",priority:ie})}H&&(Wd&&(Ra.left+=Wd,Ra.right-=Wd),Ie&&(Ra.top+=Ie,Ra.bottom-=Ie),he&&(Ra.width+=he),Ke&&(Ra.height+=Ke));if(Ya){sb=sb.filter(function(qa){var Va=qa.guideType;qa=qa.priority;return"width"===Va?qa===sc:"height"===Va?qa===Zd:"v"===Va?qa===Lf:"h"===Va?qa===Db:!1});(Ha=Yb.cachedGuideLines.get(Ra))||Yb.cachedGuideLines.set(Ra,Ha=[]);for(Ya=0;Ya<sb.length;Ya++)H=void 0,Ha[Ya]?H=Object.assign(Ha[Ya],sb[Ya]):(H=Yb.morph(sb[Ya]),Ha.push(H)),H.owner||Lb.addMorph(H);
Ha.slice(Ya).forEach(function(qa){return qa.remove()});Yb.fun.debounceNamed(Ra.id+"-drag-guides-cleanup",1300,function(){var qa=Yb.cachedGuideLines.get(Ra);qa&&qa.forEach(function(Va){return Va.remove()})})()}}}function $b(Ra,Ha){Ha=void 0===Ha?!1:Ha;var Ya=ub.MorphicEnv.default().world;if(null===Ra||void 0===Ra)Ra=String(Ra);if(Ra.isMorph)return ub.showRect(Ra.world(),Ra.globalBounds().translatedBy(Ra.world().scroll.negated()),Ha);if(Ra.isPoint)return ub.showRect(Ya,new ub.Rectangle(Ra.x-5,Ra.y-
5,10,10));if(Ra.isLine)return ub.showLine(Ya,Ra);if(Ra.isRectangle)return ub.showRect(Ya,Ra);if("undefined"!==typeof ub.Element&&Ra instanceof ub.Element)return ub.showRect(Ya,ub.Rectangle.fromElement(Ra));if("number"===typeof Ra||"symbol"===typeof Ra||"boolean"===typeof Ra||"undefined"!==typeof ub.Node&&Ra instanceof ub.Node||Ra instanceof RegExp)Ra=String(Ra);"object"===typeof Ra&&(Ra=ub.obj.inspect(Ra,{maxDepth:1}));return"string"===typeof Ra&&1===arguments.length?Ya.setStatusMessage(Ra):Ya.setStatusMessage(ub.string.formatFromArray(Array.from(arguments)))}
function Tc(Ra,Ha,Ya){Ya=void 0===Ya?3E3:Ya;var H,ea,Oa,sb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress){if(!(Ra&&Ra.world()&&Ha&&Ha.world()))return vc.return(null);H=Ra.owner.worldPoint(Ra.center);ea=Ha.owner.worldPoint(Ha.center);Oa=H.lineTo(ea).sampleN(2)[1];sb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:ub.Color.red,fill:ub.Color.red,cx:5,cy:5,r:4}]};Lb=$world.addMorph(new ub.Path({position:Oa,
renderOnGPU:!0,vertices:[ub.pt(0),ub.pt(0)],borderWidth:2,startMarker:sb,endMarker:sb,borderColor:ub.Color.red}));return vc.yield(Lb.whenRendered(),2)}if(3!=vc.nextAddress)return vc.yield(Lb.animate({opacity:1,customTween:function(gd){var xd=Lb.center;Lb.vertices=[ub.pt(0).interpolate(gd,H.subPt(Oa)),ub.pt(0).interpolate(gd,ea.subPt(Oa))];Lb.center=xd},duration:400}),3);Ya&&setTimeout(function(){return Lb.fadeOut()},Ya);return vc.return(Lb)})}ra({a:Ka,d:Tc,r:ha,s:$b});var Yb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Yb.removeSnapToGuidesOf=ha;Yb.showAndSnapToGuides=Ka;Yb.showAndSnapToResizeGuides=$a;Yb.computeRefPoints=function(Ra){var Ha=Ra.x,Ya=Ra.y,H=Ra.width;Ra=Ra.height;return{left:Ha,top:Ya,hCenter:Ha+H/2,vCenter:Ya+Ra/2,right:Ha+H,bottom:Ya+Ra,width:H,height:Ra}};Yb.findEdgesInAlignment=function(Ra,Ha,Ya,H,ea,Oa,sb,Lb,vc,gd){Ya=void 0===Ya?15:Ya;Oa=void 0===Oa?0:Oa;sb=void 0===sb?0:sb;Lb=void 0===Lb?0:Lb;vc=void 0===vc?0:vc;gd=void 0===gd?0:gd;for(var xd=[],sc=[],Zd=0;Zd<Yb.edges.length;Zd++){var he=$jscomp.makeIterator(Yb.edges[Zd]),
Wd=he.next().value,Ie=he.next().value;he=he.next().value;var Ke=Ra[Ie],Db=Ha[he],Lf=Math.max(Ke,Db)-Math.min(Ke,Db);Lf>Ya||!(H&&!H.includes(Ie)||ea&&!ea.includes(he))&&("vertical"===Wd?xd:sc).push({delta:Lf,edgeA:Ie,edgeB:he,edgeAVal:Ke,edgeBVal:Db,refPointsA:Ra,refPointsB:Ha,distLeft:Oa,distTop:sb,distRight:Lb,distBottom:vc,maxDist:gd})}return xd.length||sc.length?{vertical:xd,horizontal:sc}:null};Yb.findAlignedMorphs=function(Ra,Ha,Ya,H,ea,Oa){Ya=void 0===Ya?15:Ya;H=void 0===H?Infinity:H;for(var sb,
Lb=Yb.computeRefPoints(Ra.bounds()),vc=0;vc<Ha.length;vc++){var gd=Ha[vc];if(gd!==Ra){var xd=Yb.computeRefPoints(gd.bounds()),sc=Math.max(0,Lb.left-xd.right),Zd=Math.max(0,xd.left-Lb.right),he=Math.max(0,Lb.top-xd.bottom),Wd=Math.max(0,xd.top-Lb.bottom);Math.max(Wd,he,Zd,sc)>H||!(xd=Yb.findEdgesInAlignment(Lb,xd,Ya,ea,Oa,sc,he,Zd,Wd,Math.max(Wd,he,Zd,sc)))||(sb||(sb=new Map),sb.set(gd,xd))}}Ra=Ra.owner;Ha=Yb.computeRefPoints(Ra.innerBounds());if(Ya=Yb.findEdgesInAlignment(Lb,Ha,Ya))sb||(sb=new Map),
sb.set(Ra,Ya);return sb};Yb.findMorphsWithSimilarWidthOrHeight=function(Ra,Ha,Ya,H,ea){H=void 0===H?15:H;ea=void 0===ea?Infinity:ea;for(var Oa,sb=Yb.computeRefPoints(Ra.bounds()),Lb=0;Lb<Ya.length;Lb++){var vc=Ya[Lb];if(vc!==Ra){var gd=Yb.computeRefPoints(vc.bounds()),xd=Math.max(0,sb.left-gd.right),sc=Math.max(0,gd.left-sb.right),Zd=Math.max(0,sb.top-gd.bottom),he=Math.max(0,gd.top-sb.bottom),Wd=Math.min(he,Zd,sc,xd),Ie=Math.max(he,Zd,sc,xd);if(!(Math.max(he,Zd,sc,xd)>ea)){sc=sb;xd=sc.width;sc=sc.height;
he=gd;Zd=he.width;he=he.height;var Ke=Zd-xd,Db=he-sc;("x"===Ha||"xy"===Ha)&&Math.abs(Ke)<=H&&(Oa||(Oa=new Map),Oa.set(vc,{similarIn:"width",minDist:Wd,maxDist:Ie,refPointsA:sb,refPointsB:gd,valA:xd,valB:Zd,delta:Ke}));("y"===Ha||"xy"===Ha)&&Math.abs(Db)<=H&&(Oa||(Oa=new Map),Oa.set(vc,{similarIn:"height",minDist:Wd,maxDist:Ie,refPointsA:sb,refPointsB:gd,valA:sc,valB:he,delta:Db}))}}}return Oa};Yb.closest=function(Ra,Ha,Ya,H,ea,Oa,sb,Lb){Lb=void 0===Lb?!0:Lb;var vc=H[Ra],gd=ea[Ra],xd=Oa[Ra];Ha=sb[Ra];
for(var sc,Zd,he,Wd,Ie=0;Ie<ea.length;Ie++)Ra===Ie||vc<ea[Ie]||sc&&ea[sc.index]>=ea[Ie]||Lb&&sb[Ra]<Oa[Ie]||Oa[Ra]>sb[Ie]||(sc={index:Ie,dist:vc-ea[Ie],refPointsA:Ya[Ra],refPointsB:Ya[Ie]});for(vc=0;vc<H.length;vc++)Ra===vc||gd>H[vc]||Zd&&H[Zd.index]<=H[vc]||Lb&&sb[Ra]<Oa[vc]||Oa[Ra]>sb[vc]||(Zd={index:vc,dist:H[vc]-gd,refPointsA:Ya[Ra],refPointsB:Ya[vc]});for(gd=0;gd<sb.length;gd++)Ra===gd||xd<sb[gd]||he&&sb[he.index]>=sb[gd]||Lb&&H[Ra]>ea[gd]||ea[Ra]<H[gd]||(he={index:gd,dist:xd-sb[gd],refPointsA:Ya[Ra],
refPointsB:Ya[gd]});for(sb=0;sb<Oa.length;sb++)Ra===sb||Ha>Oa[sb]||Wd&&Oa[Wd.index]<=Oa[sb]||Lb&&H[Ra]>ea[sb]||ea[Ra]<H[sb]||(Wd={index:sb,dist:Oa[sb]-Ha,refPointsA:Ya[Ra],refPointsB:Ya[sb]});return{l:sc,r:Zd,t:he,b:Wd}};Yb.computeClosestMorphs=function(Ra){for(var Ha=[],Ya=[],H=[],ea=[],Oa=[],sb=[],Lb=0;Lb<Ra.length;Lb++){var vc=Yb.computeRefPoints(Ra[Lb].bounds());Oa.push(vc);var gd=vc.right,xd=vc.top,sc=vc.bottom;Ha.push(vc.left);Ya.push(gd);H.push(xd);ea.push(sc)}for(Lb=0;Lb<Ra.length;Lb++)sb.push(Yb.closest(Lb,
Ra,Oa,Ha,Ya,H,ea));return sb};Yb.fun=jb;Yb.pt=pb;Yb.Color=Ub;Yb.morph=Jb;Yb.cachedGuideLines=new WeakMap;Yb.guideWidth=1;Yb.guideColor=Yb.Color.orange.lighter();Yb.removeSnapToGuidesOf=ha;Yb.removeSnapToGuidesOf=ha;Yb.showAndSnapToGuides=Ka;Yb.showAndSnapToGuides=Ka;Yb.showAndSnapToResizeGuides=$a;Yb.showAndSnapToResizeGuides=$a;Yb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var ub=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");ub.show=$b;ub.showRect=function(Ra,Ha,Ya){var H=
ub.BoundsMarker.highlightBounds(Ha);return Ya?ub.showInLoop(Ra,H,Ha):ub.showThenHide(Ra,H)};ub.showInLoop=function(Ra,Ha,Ya){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return ub.showThenHide(Ra,Ha,!1),ea.yield(ub.promise.delay(300),2);case 2:H=!1,ub.once(Ra,"onMouseDown",function(){return H=!0}),ub.once(Ra,"hideMarkers",function(){return H=!0});case 3:if(H){ea.jumpTo(4);break}return ea.yield(Ha.retract(Ya),3);case 4:Ha.fadeOut(2E3),ea.jumpToEnd()}})};
ub.showThenHide=function(Ra,Ha,Ya){Ya=void 0===Ya?3:Ya;if(Ra){var H=Array.isArray(Ha)?Ha:[Ha];H.forEach(function(ea){return Ra.addMorph(ea)});Ya&&setTimeout(function(){return H.forEach(function(ea){return ea.fadeOut(2E3)})},1E3*Ya);return Ha}};ub.showLine=function(Ra,Ha,Ya){Ya=void 0===Ya?3E3:Ya;var H=Ha.start;Ha=Ha.end.subPt(H);var ea=Ra.addMorph({position:H,rotation:Ha.theta(),border:{width:1,color:ub.Color.red},width:Ha.fastR(),height:0});Ya&&setTimeout(function(){return ea.fadeOut()},Ya);return ea};
ub.showConnector=Tc;ub.obj=jd;ub.promise=uc;ub.string=nd;ub.pt=pb;ub.Color=Ub;ub.Rectangle=wc;ub.rect=Cc;ub.morph=Jb;ub.easings=Mc;ub.Path=Bd;ub.Icon=re;ub.Morph=Ce;ub.MorphicEnv=be;ub.connect=Sb;ub.once=qc;ub.disconnect=od;ub.show=$b;ub.show=$b;(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Ha.hasOwnProperty("BoundsMarker")&&"function"===typeof Ha.BoundsMarker?Ha.BoundsMarker:Ha.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),value:function(){Tb._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:ub.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/2-5:H/10))}},{key:"createMarkerEdge",value:function(){return ub.morph({fill:ub.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ea=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Oa=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),sb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Lb=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),vc=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),gd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),xd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,ea,Oa,sb,Lb,vc,gd,xd]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,
ea){var Oa=this.ensureMarkerCorners(),sb=this.markerLength(H),Lb=[H.topLeft().addXY(0,0).extent(ub.pt(sb,5)),H.topLeft().addXY(0,0).extent(ub.pt(5,sb)),H.topRight().addXY(-sb,0).extent(ub.pt(sb,5)),H.topRight().addXY(-5,0).extent(ub.pt(5,sb)),H.bottomRight().addXY(-5,-sb).extent(ub.pt(5,sb)),H.bottomRight().addXY(-sb,-5).extent(ub.pt(sb,5)),H.bottomLeft().addXY(0,-5).extent(ub.pt(sb,5)),H.bottomLeft().addXY(0,-sb).extent(ub.pt(5,sb))];Oa.forEach(function(vc,gd){return vc.setBounds(Lb[gd])});ea&&(this.adjustOrigin(H.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var ea=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress)return sb.yield(ea.animate({scale:Math.max(30/H.width,1.05)}),2);Oa=ea.center;return sb.yield(ea.animate({center:Oa,scale:1,duration:300,easing:ub.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},
{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],Ha,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2332,end:6009})})(ub.Morph);var qd=ra("S",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Ha.hasOwnProperty("StatusMessage")&&
"function"===typeof Ha.StatusMessage?Ha.StatusMessage:Ha.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"relayout",value:function(){this.title=ub.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(H,ea){this.message=H;this.color=ea}},{key:"slideTo",
value:function(H){var ea=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea.sliding=ea.animate({position:H,duration:500}),Oa.yield(ea.sliding,2);ea.sliding=!1;Oa.jumpToEnd()})}},{key:"expand",value:function(){var H=this,ea,Oa,sb,Lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress)return H.expandable?H.sliding?vc.yield(H.sliding,2):vc.jumpTo(2):vc.return();ea=H.world();if(!ea||H.isMaximized)return vc.return();H.isMaximized=
!0;H.stayOpen=!0;Oa=H.getSubmorphNamed("message text");Oa.lineWrapping=!1;Object.assign(Oa,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Oa.value=H.expandedContent);Oa.fit();sb=Oa.textBounds().extent();Lb=ea.visibleBounds();sb.y>Lb.extent().y&&(sb.y=Lb.extent().y-20);sb.x>Lb.extent().x&&(sb.x=Lb.extent().x-20);sb=H.extent.maxPt(sb);H.animate({extent:sb,center:Lb.center(),duration:200});H.relayout();H.focus();vc.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");
H&&(this.extent=ub.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:ub.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=
!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var ea=this.getSubmorphNamed("message text");if(ea){ea.value=H;var Oa=ea.documentEndPosition;Oa.row>this.maxLines&&(ea.replace({start:{row:this.maxLines,column:0},end:Oa},"...\n"),this.expandedContent||(this.expandedContent=H));Oa=ea.documentEndPosition;0!==Oa.column&&
ea.insertText("\n",Oa)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[{name:"message icon",type:"label",value:ub.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];ub.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");ub.connect(this,"extent",this,"relayout")}}}}}],Ha,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:6053,end:10382})}(ub.Morph));ub.StatusMessage=qd;ub.StatusMessage=qd;ub.StatusMessage=qd;var Uc=ra("b",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),Ya=Ha.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Ha.StatusMessageForMorph?Ha.StatusMessageForMorph:Ha.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"alignAtBottomOf",
value:function(H){var ea=this.world();ea&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=ea.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(ub.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},
removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var ea=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});ub.connect(ea,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),ub.disconnect(ea,"fire",this,"expand"))}}}}}],Ha,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10607,end:12475})}(ub.StatusMessage));ub.StatusMessageForMorph=Uc;ub.StatusMessageForMorph=Uc;ub.StatusMessageForMorph=Uc;ub.showConnector=Tc;ub.showConnector=
Tc;var Ua=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ua.Morph=Ce;Ua.Label=wd;Ua.StyleSheet=Fd;Ua.HorizontalLayout=fc;Ua.Path=Bd;Ua.Text=ic;Ua.GridLayout=Ab;Ua.morph=Jb;Ua.Icon=re;Ua.createMorphSnapshot=jc;Ua.Color=Ub;Ua.pt=pb;Ua.rect=Cc;Ua.Rectangle=wc;Ua.LinearGradient=Bc;Ua.obj=jd;Ua.PropertyPath=ad;Ua.promise=uc;Ua.properties=bd;Ua.num=ob;Ua.arr=kb;Ua.connect=Sb;Ua.signal=tb;Ua.disconnect=od;Ua.disconnectAll=Aa;Ua.once=qc;Ua.showAndSnapToGuides=Ka;Ua.showAndSnapToResizeGuides=$a;
Ua.removeSnapToGuidesOf=ha;Ua.resource=Fa;Ua.show=$b;Ua.haloBlue=Ua.Color.rgb(23,160,251);Ua.componentAccent=Ua.Color.magenta;Ua.derivedAccent=Ua.Color.purple;var lb=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("Halo")&&"function"===typeof Ha.Halo?Ha.Halo:Ha.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ua.GridLayout({autoAssign:!1,fitToCell:!1,
columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name",
"name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Ua.morph({name:"border-box",fill:Ua.Color.transparent,borderColor:this.target.isComponent?Ua.componentAccent:Ua.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",
value:function(H){if(!Ua.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ua.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,ea=H.visibleBounds(),Oa=this.target.globalBounds(),sb=Oa.insetBy(-36).intersection(ea);ea=Oa.intersection(ea);this.layout&&
this.layout.disable();this.setBounds(sb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ea));this.state.activeButton?(this.buttonControls.forEach(function(Lb){return Lb.visible=!1}),this.ensureResizeHandles().forEach(function(Lb){return Lb.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Lb){return Lb.visible=
!0}),this.buttonControls.forEach(function(Lb){Lb.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Lb){return Lb.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ua.disconnect(H,"onChange",this,"alignWithTarget"),Ua.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Ua.MultiSelectionTarget?
(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Tb._get(Object.getPrototypeOf(Ya.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ua.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ua.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ua.CloseHaloItem.for(this)}},
{key:"grabHalo",value:function(){return Ua.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ua.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ua.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ua.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Ua.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ua.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ua.CopyHaloItem.for(this)}},{key:"originHalo",
value:function(){return Ua.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ua.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",value:function(H){var ea=this,Oa,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress){Oa=ea.world();sb=ea.target.isMorphSelection?ea.target.selectedMorphs:[ea.target];if(sb.includes(H))return Lb.return();
ea.remove();return Lb.yield(Oa.showHaloForSelection([].concat($jscomp.arrayFromIterable(sb),[H]),ea.state.pointerId),2)}return Lb.return(Lb.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var ea=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress){Oa=ea.world();ea.remove();if(!ea.target.isMorphSelection)return sb.jumpTo(0);Ua.arr.remove(ea.target.selectedMorphs,H);return sb.yield(Oa.showHaloForSelection(ea.target.selectedMorphs,ea.state.pointerId),
3)}return sb.return(sb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,ea,Oa,sb,Lb){var vc={topLeft:Ua.rect(-1,-1,1,1),topCenter:ea?Ua.rect(1,-1,0,1):Ua.rect(0,-1,0,1),topRight:Ua.rect(0,-1,1,1),rightCenter:ea?Ua.rect(0,1,1,1):Ua.rect(0,0,1,0),bottomRight:Ua.rect(0,0,1,1),bottomCenter:ea?Ua.rect(1,0,0,1):Ua.rect(0,0,0,1),bottomLeft:Ua.rect(-1,0,1,1),leftCenter:ea?
Ua.rect(-1,1,1,0):Ua.rect(-1,0,1,0)}[H];Lb=vc.x;var gd=vc.y,xd=vc.width;vc=vc.height;Oa=ea?this.proportionalDelta(H,Oa,sb):Oa;H=Ua.rect(Oa.x*Lb,Oa.y*gd,Oa.x*xd,Oa.y*vc);this.active=!0;this.target.setBounds(sb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,ea,Oa){var sb=Oa.width,Lb=Oa.height;Oa={topLeft:Ua.pt(-1,-1),topCenter:Ua.pt(0,-1),topRight:Ua.pt(1,
-1),leftCenter:Ua.pt(-1,0),rightCenter:Ua.pt(1,0),bottomLeft:Ua.pt(-1,1),bottomCenter:Ua.pt(0,1),bottomRight:Ua.pt(1,1)};var vc=sb/Math.max(sb,Lb),gd=Lb/Math.max(Lb,sb);sb={topLeft:Ua.pt(-vc,-gd),topCenter:Ua.pt(1/(2*Lb/sb),-1),topRight:Ua.pt(vc,-gd),leftCenter:Ua.pt(-1,Lb/(2*sb)),rightCenter:Ua.pt(1,Lb/(3*sb)),bottomLeft:Ua.pt(-vc,gd),bottomCenter:Ua.pt(1/(2*Lb/sb),1),bottomRight:Ua.pt(vc,gd)};Oa=Oa[H];return sb[H].scaleBy(Oa.dotProduct(ea)/Oa.dotProduct(Oa))}},{key:"ensureResizeHandles",value:function(){return Ua.ResizeHandle.resizersFor(this)}},
{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,ea){if(!Ua.rect(0).sides.includes(ea)){var Oa=this.getSubmorphNamed("diagonal");if(H){H=this.target.globalBounds();var sb=H.width,Lb=H.height;H=this.localize(Ua.pt(H.x,H.y)).extent(Ua.pt(sb,Lb)).scaleRectTo(this.innerBounds());sb={topLeft:[Ua.pt(sb,Lb),Ua.pt(0,0)],topRight:[Ua.pt(0,Lb),Ua.pt(sb,
0)],bottomRight:[Ua.pt(0,0),Ua.pt(sb,Lb)],bottomLeft:[Ua.pt(sb,0),Ua.pt(0,Lb)]};Oa?Oa.setBounds(H):(Oa=$jscomp.makeIterator(sb[ea]),ea=Oa.next().value,Oa=Oa.next().value,sb=new Ua.LinearGradient({stops:[{offset:0,color:Ua.Color.orange.withA(0)},{offset:.2,color:Ua.Color.orange},{offset:.8,color:Ua.Color.orange},{offset:1,color:Ua.Color.orange.withA(0)}]}),Oa=this.addMorphBack(new Ua.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:sb,vertices:[ea,Oa]})),Oa.setBounds(H),
Oa.animate({opacity:1,duration:500}))}else Oa&&Oa.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,ea){var Oa=this.getSubmorphNamed("rotationIndicator");H&&ea?(H=this.getSubmorphNamed("origin").center,Oa=Oa||this.addMorphBack(new Ua.Path({name:"rotationIndicator",borderColor:Ua.haloBlue,borderWidth:1,vertices:[]})),Oa.setBounds(ea.bounds().union(this.innerBounds())),Oa.vertices=[Oa.localizePointFrom(H,this),Oa.localizePointFrom(ea.center,this)]):Oa&&Oa.remove()}},{key:"toggleMorphHighlighter",
value:function(H,ea,Oa){Oa=void 0===Oa?!1:Oa;if(ea)if(ea.onHaloGrabover)ea.onHaloGrabover(H);else Oa=Ua.MorphHighlighter.for(this,ea,Oa),H&&ea&&ea!=this.world()?Oa&&Oa.show(ea):Oa&&Oa.deactivate()}},{key:"onMouseDown",value:function(H){var ea=H.state.clickedOnMorph;if(!H.isCommandKey()&&ea==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):
this.addMorphToSelection(H);else{if(ea==this.borderBox&&H.isCommandKey()){var Oa=H.world.morphsContainingPoint(H.position).filter(function(sb){return sb.halosEnabled});(Oa=Oa.slice(Oa.indexOf(this.target)+1)[0]||Oa[0]||H.world)&&H.world.showHaloFor(Oa,H.domEvt.pointerId);this.remove()}ea==this&&H.isCommandKey()&&(Oa=this.morphBeneath(H.position),H.world.showHaloFor(Oa,H.domEvt.pointerId));ea==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(ea){return ea.onKeyUp(H)})}},
{key:"getMesh",value:function(H,ea){var Oa=H.x;H=H.y;ea=void 0===ea?Ua.pt(0,0):ea;var sb=this.world().visibleBounds(),Lb=sb.height;sb=sb.width;var vc={borderStyle:"dotted",borderWidth:2,borderColor:Ua.Color.orange};vc=this.get("mesh")||this.addMorph(new Ua.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Ua.pt(sb,Lb),fill:null,submorphs:[new Ua.Path(Object.assign({name:"vertical"},vc)),new Ua.Path(Object.assign({name:"horizontal"},vc))]}));vc.globalPosition=ea;vc.getSubmorphNamed("vertical").vertices=
[Ua.pt(Oa,0).subPt(ea),Ua.pt(Oa,Lb).subPt(ea)];vc.getSubmorphNamed("horizontal").vertices=[Ua.pt(0,H).subPt(ea),Ua.pt(sb,H).subPt(ea)];return vc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ua.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},
layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ua.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var ea=!!this.state.target;this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;ea&&this.alignWithTarget();Ua.connect(H,"onChange",this,"alignWithTarget");Ua.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],
Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:979,end:16996})}(Ua.Morph);lb=Ua.Halo;var xc=ra("H",lb);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Ha.HaloPropertyDisplay?Ha.HaloPropertyDisplay:
Ha.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(H){var ea=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ea.bounds())&&
(this.position=Ua.pt(ea.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Ua.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:Ua.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ua.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ua.Color.white},position:{defaultValue:this.defaultPosition}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:17186,end:18524})})(Ua.Label);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Ha.MultiSelectionTarget?Ha.MultiSelectionTarget:Ha.MultiSelectionTarget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(ea){return ea.globalBounds()}).reduce(function(ea,Oa){return ea.union(Oa)});this.setBounds(H)}},{key:"onGrab",value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ua.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ua.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;Ua.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var ea=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Oa){return Oa.resizeBy(ea)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var ea=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Oa){return Oa.moveBy(ea)})}}},{key:"updateRotation",value:function(H){var ea=this,Oa=H.value-H.prevValue;this.selectedMorphs.forEach(function(sb){var Lb=sb.origin;sb.adjustOrigin(sb.localize(ea.worldPoint(Ua.pt(0,
0))));sb.rotation+=Oa;sb.adjustOrigin(Lb)})}},{key:"updateScale",value:function(H){var ea=this,Oa=H.value-H.prevValue;this.selectedMorphs.forEach(function(sb){var Lb=sb.origin;sb.adjustOrigin(sb.localize(ea.worldPoint(Ua.pt(0,0))));sb.scale+=Oa;sb.adjustOrigin(Lb)})}},{key:"onChange",value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;
case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18592,end:20863})})(Ua.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("HaloItem")&&"function"===typeof Ha.HaloItem?Ha.HaloItem:Ha.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ua.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ua.pt(24,24)},halo:{}}}},{key:"for",
value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21027,end:21700})})(Ua.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("NameHolder")&&
"function"===typeof Ha.NameHolder?Ha.NameHolder:Ha.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ua.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Ua.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),H.stop()):Tb._get(Object.getPrototypeOf(Ya.prototype),"onKeyDown",this).call(this,H)}},{key:"onMouseUp",value:function(){Ua.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ua.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},
{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var ea=this.target.owner;this.validName=!ea||!ea.getSubmorphNamed(H)||this.target.name==H;Ua.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Ua.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ua.Color.transparent},
forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ua.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ua.Text({fill:Ua.Color.transparent,fontColor:Ua.Color.white,fontWeight:"bold",active:!0}));Ua.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21735,end:24286})})(Ua.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("NameHaloItem")&&"function"===typeof Ha.NameHaloItem?Ha.NameHaloItem:Ha.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,
[{key:Symbol.for("lively-instance-initialize"),value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initComponentLink();this.initNameHolders();this.validityIndicator=Ua.Icon.makeLabel("check",{fontColor:Ua.Color.green,fontSize:15,padding:Ua.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ua.componentAccent:Ua.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var H=this,ea=this.halo.target;if(ea&&
!ea.isMorphSelection&&ea.master){var Oa=ea.master.determineMaster(ea),sb=ea.master.getWorldUrlFor(Oa)||"this project",Lb=!!Oa.world();ea=this.addMorph(Ua.Icon.makeLabel(sb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Ua.Color.white,padding:Ua.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+sb}));sb&&Ua.connect(ea,"onMouseDown",function(){Lb?H.showLocalMaster(Oa):window.open(sb)})}}},{key:"showLocalMaster",value:function(H){var ea;if(ea=H.getWindow())ea.activate(),
ea.minimized&&(ea.minimized=!1);H.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(ea){ea=new Ua.NameHolder({halo:H.halo,highlightOnHover:ea.highlightOnHover,target:ea.target});Ua.connect(ea,"active",H,"toggleActive");
Ua.connect(ea,"valid",H,"toggleNameValid");return ea});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Ua.arr.interpose(this.nameHolders,{extent:Ua.pt(1,28),fill:Ua.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(H){var ea=$jscomp.makeIterator(H);H=ea.next().value;var Oa=ea.next().value;if(this.halo.changingName!==H){this.halo.changingName=H;if(ea=this.get("master link"))ea.visible=ea.isLayoutable=!H;H?(this.nameHolders.forEach(function(sb){return sb!=
Oa&&sb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Ua.Color.darkGray,setTimeout(function(){return Oa.nameHolder.selectAll()})):(this.fill=Ua.haloBlue,this.nameHolders.forEach(function(sb){return sb!=Oa&&sb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus());this.alignInHalo()}}},{key:"toggleNameValid",value:function(H){var ea=$jscomp.makeIterator(H);H=ea.next().value;ea=ea.next().value;(this.validName=H)?(this.conflictingMorph=null,
this.borderColor=Ua.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Ua.Color.green,Ua.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ea),this.borderColor=Ua.Color.red,this.validityIndicator.fontColor=Ua.Color.red,this.validityIndicator.nativeCursor="pointer",Ua.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ua.arr.zip(this.targets(),this.nameHolders).map(function(ea){var Oa=$jscomp.makeIterator(ea);
ea=Oa.next().value.target;Oa=Oa.next().value;Oa.target=ea;Oa.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ua.pt(0,2));this.topCenter=Ua.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var ea=this,Oa=this.conflictingMorph;Oa&&(this.halo.toggleMorphHighlighter(!0,Oa),setTimeout(function(){return ea.halo.toggleMorphHighlighter(!1,Oa)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Ua.haloBlue},borderColor:{defaultValue:Ua.Color.green},layout:{initialize:function(){this.layout=new Ua.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24288,end:28718})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("CloseHaloItem")&&"function"===typeof Ha.CloseHaloItem?Ha.CloseHaloItem:Ha.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"update",value:function(){var H=this.halo,ea=H.target.owner;ea.undoStart("close-halo");H.target.selectedMorphs?
H.target.selectedMorphs.forEach(function(Oa){return Oa.remove()}):H.target.remove();ea.undoStop("close-halo");H.remove()}},{key:"onMouseDown",value:function(H){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],Ha,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28720,end:29345})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("GrabHaloItem")&&"function"===typeof Ha.GrabHaloItem?Ha.GrabHaloItem:Ha.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(Ya,Ra,[{key:"adjustTarget",value:function(H,ea){Ua.PropertyPath("owner.layout.autoResize").get(H)&&!H.globalBounds().insetBy(10).containsPoint(ea)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,ea=this.halo,Oa=this.prevDropTarget,sb=H.world(),Lb=H.findDropTarget(H.globalPosition,[ea.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(gd){return gd.isHaloItem||!gd.visible||0==gd.opacity})});if(Lb)return Lb=this.adjustTarget(Lb,
H.globalPosition),ea.toggleMorphHighlighter(Lb&&Lb!=sb,Lb,!0),Oa&&Oa!=Lb&&ea.toggleMorphHighlighter(!1,Oa),(this.prevDropTarget=Lb)&&Lb.name}},{key:"init",value:function(H){var ea=this.halo,Oa=ea.target.undoStart("grab-halo");Oa&&Oa.addTarget(ea.target.owner);this.hand=H;ea.target.onGrab({halo:ea,hand:H,isShiftDown:function(){return!1}});ea.state.activeButton=this;this.opacity=.3;var sb=Ua.connect(H,"update",this,"update");Ua.once(ea.target,"remove",function(){return sb.disconnect()})}},{key:"stop",
value:function(H){var ea=this.halo,Oa=this.prevDropTarget,sb=ea.target.undoInProgress,Lb=H.hand.findDropTarget(H.hand.globalPosition,[ea.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(gd){return gd.isHaloItem})});Lb=this.adjustTarget(Lb,H.hand.globalPosition);Ua.disconnect(H.hand,"update",this,"update");Ua.MorphHighlighter.interceptDrop(ea,Lb,ea.target);sb.addTarget(Lb);Lb.onDrop(H);ea.state.activeButton=null;ea.alignWithTarget();ea.toggleMorphHighlighter(!1,Oa);Ua.MorphHighlighter.removeHighlighters(ea);
ea.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29347,end:31875})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("DragHaloItem")&&"function"===typeof Ha.DragHaloItem?Ha.DragHaloItem:Ha.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(H){var ea=this.halo.getSubmorphNamed("mesh");if(H)return ea=this.halo.getMesh(this.halo.target.worldPoint(Ua.pt(0,0))),this.focus(),ea;ea&&ea.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;
this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Ua.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,ea,Oa){ea=void 0===ea?!1:ea;Oa=void 0===Oa?!1:Oa;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));ea&&(H=H.griddedBy(Ua.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(ea);
ea||Ua.showAndSnapToGuides(this.halo.target,!0,Oa,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta,H.isAltDown(),H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},
styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31877,end:33715})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ya=Ha.hasOwnProperty("InspectHaloItem")&&"function"===typeof Ha.InspectHaloItem?Ha.InspectHaloItem:Ha.InspectHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){var ea=this;(function(){var Oa,sb,Lb,vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gd){if(1==gd.nextAddress)return gd.yield(System.import("lively.ide/js/inspector.js"),2);Oa=gd.yieldResult;
sb=Oa.default;(Lb=ea.world().getSubmorphsByStyleClassName("Inspector").find(function(xd){return xd.targetObject==ea.halo.target}))&&(vc=Lb.getWindow())?(vc.minimized=!1,vc.activate(),vc.animate({center:ea.world().visibleBounds().center(),duration:200})):sb.openInWindow({targetObject:ea.halo.target});ea.halo.remove();gd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33717,end:34634})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("EditHaloItem")&&"function"===
typeof Ha.EditHaloItem?Ha.EditHaloItem:Ha.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){var ea=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Oa){return Oa.target==ea.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",
{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34636,end:35416})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("RotateHaloItem")&&"function"===typeof Ha.RotateHaloItem?Ha.RotateHaloItem:Ha.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",
H)}},{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ua.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;
this.scaleGauge=H.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ua.num.toRadians(Ua.num.detent(Ua.num.toDegrees(H),10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var ea=this.scaleGauge,Oa=this.halo;ea||(ea=this.scaleGauge=H.scaleBy(1/Oa.target.scale));this.angle=H.theta();this.initRotation=Oa.target.rotation;
Oa.target.scale=Ua.num.detent(H.dist(Ua.pt(0,0))/ea.dist(Ua.pt(0,0)),.1,.5);Oa.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},
{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Ua.pt(-10,-10));this.adaptAppearance(H.isShiftDown());
H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},
{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35418,end:38895})})(Ua.HaloItem);Ua.nameNumberRe=/(.+)([0-9]+)$/;(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("ComponentHaloItem")&&
"function"===typeof Ha.ComponentHaloItem?Ha.ComponentHaloItem:Ha.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"updateComponentIndicator",value:function(){var H=this.world(),ea=this.halo.target;this.halo.remove();H.showHaloFor(ea)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var H=this,ea,Oa,sb,Lb,vc,gd,xd,sc,Zd,he,Wd,Ie;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ke){switch(Ke.nextAddress){case 1:ea=
H.halo.target;Oa=H.world();sb=[];ea.withAllSubmorphsDoExcluding(function(Db){Db!=ea&&sb.push(Db)},function(Db){return ea.master});Lb=Ua.arr.groupBy(sb,function(Db){return Db.name});vc={fontWeight:"normal",fontSize:16};if(!Object.values(Lb).find(function(Db){return 1<Db.length})){Ke.jumpTo(2);break}gd=Ua.arr.sum(Object.values(Lb).filter(function(Db){return 1<Db.length}).map(function(Db){return Db.length}));return Ke.yield(Oa.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Ua.Icon.textAttribute("exclamation-triangle",
{fontColor:Ua.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+gd+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},vc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},vc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},vc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},vc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(xd=Ke.yieldResult,!xd)return Ke.return();case 2:Zd=Ke.forIn(Lb);case 4:if(null==(sc=Zd.getNext())){Ke.jumpTo(6);break}if(2>Lb[sc].length){Ke.jumpTo(4);break}he=Lb[sc];case 7:if(!(1<he.length)){Ke.jumpTo(4);break}Wd=he[0];Ua.show(Wd,!0);return Ke.yield(Oa.prompt(["Name Collision\n",{},"The name of\n",vc,Wd.toString(),Object.assign({},vc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},vc),ea.name,Object.assign({},vc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<he.length?"are "+(he.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",vc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
vc],{input:Wd.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Db){return!Object.keys(Lb).includes(Db)}}),9);case 9:Ie=Ke.yieldResult;Ua.signal(Oa,"hideMarkers");Ie&&(Wd.name=Ie);if(Ie in Lb){Ke.jumpTo(7);break}else if(!Ie){he=Ua.arr.rotate(he);Ke.jumpTo(7);break}Ua.arr.remove(he,Wd);Ke.jumpTo(7);break;case 6:return Ke.return(!0)}})}},{key:"onMouseDown",value:function(){var H=this,ea,Oa,sb,Lb,vc,gd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){switch(xd.nextAddress){case 1:ea=
H.halo.target;Oa=!ea.isComponent;sb=$world.getAllNamed(ea.name).length;if(!(Oa&&1<sb)){xd.jumpTo(2);break}return xd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(sb-1)+" other morph"+(2<sb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:ea.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(sc){return 0==$world.getAllNamed(sc).length}}),3);case 3:Lb=xd.yieldResult;if(!Lb)return xd.return();ea.name=Lb;case 2:vc=ea;if(!(gd=Oa)){xd.jumpTo(4);break}return xd.yield(H.checkForDuplicateNamesInHierarchy(),5);case 5:gd=xd.yieldResult;case 4:vc.isComponent=gd,H.world()?H.updateComponentIndicator():ea.world().showHaloFor(ea),xd.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},
{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:38936,end:44848})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("CopyHaloItem")&&"function"===typeof Ha.CopyHaloItem?Ha.CopyHaloItem:Ha.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"init",value:function(H){function ea(sc,Zd){return Zd.match(Ua.nameNumberRe)?Zd.replace(Ua.nameNumberRe,function(he,
Wd,Ie){Ie||(Ie="0");for(he=Number(Ie);sc.get(Wd+ ++he););return Wd+he}):Zd+"1"}var Oa=this.halo,sb=Oa.target,Lb=Oa.world(),vc=sb instanceof Ua.MultiSelectionTarget;Oa.remove();Ua.connect(H,"update",this,"update");if(vc){var gd=sb.selectedMorphs.map(function(sc){return Lb.addMorph(sc.copy())});vc=gd.map(function(sc){sc.name=ea(sb,sc.name);return sc.position});gd[0].undoStart("copy-halo");Lb.addMorph(Oa);Oa.refocus(gd);H.grab(Oa.target);Oa.target.onGrab({halo:Oa,hand:H,isShiftDown:function(){return!1}});
vc.forEach(function(sc,Zd){return gd[Zd].globalPosition=sc});Oa.alignWithTarget()}else{vc=sb.globalPosition;var xd=sb.copy();sb.isComponent&&(xd.isComponent=!1,xd.withAllSubmorphsDoExcluding(function(sc){sc!=xd&&sc.master||delete sc._parametrizedProps},function(sc){return sc.master&&sc!=xd}),xd.master=sb);xd.name=ea(sb,sb.name);Lb.addMorph(xd);xd.globalPosition=vc;xd.undoStart("copy-halo");H.grab(xd);Lb.addMorph(Oa);Oa.visible=!1}}},{key:"stop",value:function(H){var ea=this.halo,Oa=$jscomp.makeIterator(H.grabbedMorphs).next().value,
sb=H.findDropTarget(H.globalPosition,[ea.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(gd){return gd.isHaloItem})}),Lb=ea.target.undoInProgress;Ua.disconnect(H,"update",this,"update");Lb.addTarget(sb);H.dropMorphsOn(sb);ea.target.undoStop("copy-halo");ea.remove();H.world().showHaloFor(Oa)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",
value:function(){var H=this,ea,Oa,sb,Lb,vc,gd,xd,sc,Zd,he,Wd,Ie,Ke,Db,Lf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xe){switch(xe.nextAddress){case 1:ea=H;Oa=ea.halo;if(Oa.nameHalo().nameHolders.find(function(tf){return tf.nameHolder===$world.focusedMorph}))return xe.return();sb=Oa.target;Lb=Oa.world();vc=sb instanceof Ua.MultiSelectionTarget;gd=sb.globalBounds().topLeft();xd=vc?sb.selectedMorphs:[sb];sc=[];Zd='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+
document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Oa.remove();xe.setCatchFinallyBlocks(2);he=$jscomp.makeIterator(xd);Wd=he.next();case 4:if(Wd.done)return Zd+="</body></html>",Db=JSON.stringify(sc),xe.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Zd},{type:"application/morphic",data:Db}]),8);Ie=Wd.value;return xe.yield(Ua.createMorphSnapshot(Ie,{addPreview:!1,testLoad:!1}),7);case 7:Ke=xe.yieldResult;Ke.copyMeta={offset:Ie.worldPoint(Ua.pt(0,
0)).subPt(gd)};sc.push(Ke);Zd+=Ie.renderPreview();Wd=he.next();xe.jumpTo(4);break;case 8:xe.leaveTryBlock(3);break;case 2:return Lf=xe.enterCatchBlock(),Lb.logError(Lf),xe.return();case 3:Lb.addMorph(Oa),Oa.refocus(xd),Oa.setStatusMessage("copied"),xe.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var ea=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){H.stop();return Oa.yield(ea.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},
{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:44850,end:48884})})(Ua.HaloItem);(function(Ra){var Ha=
lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("OriginHaloItem")&&"function"===typeof Ha.OriginHaloItem?Ha.OriginHaloItem:Ha.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"fill",get:function(){return Ua.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ua.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},
{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=
null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var ea=this.halo,Oa=ea.target.origin,sb=ea.target.worldPoint(Oa);H=ea.target.localize(sb.addPt(H)).subPt(ea.target.scroll).subPt(Oa);ea.target.adjustOrigin(ea.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",
get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ua.componentAccent:Ua.haloBlue}}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:48886,end:50547})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("ResizeHandle")&&"function"===typeof Ha.ResizeHandle?Ha.ResizeHandle:Ha.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,ea=H.y;return H.x.toFixed(1)+"x"+
ea.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ua.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,ea){ea=void 0===ea?!1:ea;var Oa=this.halo.target,sb=Oa.origin,Lb=Oa.position;Oa=Oa.extent;this.startPos=H;this.startBounds=Lb.subPt(sb).extent(Oa);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ua.num.toRadians(H%45);this.halo.toggleDiagonal(ea,this.corner)}},{key:"update",value:function(H,ea,Oa,sb){ea=void 0===ea?!1:ea;Oa=void 0===Oa?!1:Oa;sb=void 0===sb?!1:sb;var Lb=this.corner,vc=this.tfm;H=this.startPos.subPt(H);vc=vc.transformDirection(Ua.pt(H.x,
H.y));Oa&&(vc=vc.griddedBy(Ua.pt(10,10)));this.halo.updateBoundsFor(Lb,ea,vc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ea,Lb);this.updateAlignmentGuide(Oa);ea=[];Lb=Lb.toLowerCase();Lb.includes("left")&&ea.push("left");Lb.includes("top")&&ea.push("top");Lb.includes("bottom")&&ea.push("bottom");Lb.includes("right")&&ea.push("right");Ua.showAndSnapToResizeGuides(this.halo.target,ea,!0,sb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=
null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ua.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var ea=this.halo.getSubmorphNamed("mesh");if(H)return H=this.halo.target.extent,H=Ua.pt(H.x%10,H.y%10),ea=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),ea;ea&&ea.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ua.arr.zip(Ua.arr.rotate([["topLeft",function(ea){return ea.negated()}],["topCenter",function(ea){return ea.withX(0).negated()}],["topRight",function(ea){return ea.withX(0).negated()}],["rightCenter",function(ea){return Ua.pt(0,0)}],["bottomRight",function(ea){return Ua.pt(0,0)}],["bottomCenter",function(ea){return Ua.pt(0,
0)}],["bottomLeft",function(ea){return ea.withY(0).negated()}],["leftCenter",function(ea){return ea.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var ea=this;if(!H.target)return[];var Oa=H.target.getGlobalTransform().getRotation();return Ua.arr.compact(this.getResizeParts(Oa).map(function(sb){var Lb=
$jscomp.makeIterator(sb),vc=$jscomp.makeIterator(Lb.next().value);sb=vc.next().value;vc.next();vc.next();vc=$jscomp.makeIterator(Lb.next().value);Lb=vc.next().value;vc=vc.next().value;return ea.for(H,sb,vc,Lb)})).map(function(sb){return sb.alignInHalo()})}},{key:"for",value:function(H,ea,Oa,sb){var Lb="Resize "+ea;H=H.getSubmorphNamed(Lb)||new this({name:Lb,halo:H,corner:ea,tooltip:"Resize "+ea,extent:Ua.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ua.componentAccent:Ua.haloBlue,
fill:Ua.Color.white});return Object.assign(H,{nativeCursor:sb,location:Oa})}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:50606,end:55904})})(Ua.HaloItem);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("MenuHaloItem")&&"function"===
typeof Ha.MenuHaloItem?Ha.MenuHaloItem:Ha.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){var ea=this,Oa,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){if(1==Lb.nextAddress)return Oa=ea.halo.target,ea.halo.remove(),Lb.yield(Oa.menuItems(),2);sb=Lb.yieldResult;Oa.world().openMenu(sb).hasFixedPosition=ea.halo.hasFixedPosition;Lb.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:55906,end:56428})})(Ua.HaloItem);var ab=ra("M",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),Ya=Ha.hasOwnProperty("MorphHighlighter")&&"function"===typeof Ha.MorphHighlighter?Ha.MorphHighlighter:Ha.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ua.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ua.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var ea=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Oa){return{type:"ellipse",
isHaloItem:!0,fill:Ua.Color.orange,center:ea.innerBounds()[Oa]()}});this.addMorph({type:"label",name:"name tag",padding:Ua.Rectangle.inset(5,5,5,5),fontColor:Ua.Color.white,fill:Ua.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var ea=H._morphHighlighters,Oa;for(Oa in ea)ea[Oa].remove();
delete H._morphHighlighters}},{key:"for",value:function(H,ea,Oa,sb){Oa=void 0===Oa?!1:Oa;sb=void 0===sb?[]:sb;var Lb=H._morphHighlighters=H._morphHighlighters||{};Ua.properties.forEachOwn(Lb,function(vc,gd){return gd.alignWithHalo()});if(!ea||ea.ownerChain().find(function(vc){return vc.isHaloItem}))return null;Lb[ea.id]=Lb[ea.id]||new this({targetId:ea.id,halo:H,showLayout:Oa});H.addMorph(Lb[ea.id]);Lb[ea.id].highlightedSides=sb;return Lb[ea.id]}},{key:"interceptDrop",value:function(H,ea,Oa){(H=H._morphHighlighters=
H._morphHighlighters||{},H[ea.id])&&H[ea.id].handleDrop(Oa)}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:56617,end:60228})}(Ua.Morph));Ua.MorphHighlighter=ab;Ua.MorphHighlighter=ab;Ua.MorphHighlighter=ab;var Dc=ra("I",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
Ya=Ha.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Ha.InteractiveMorphSelector?Ha.InteractiveMorphSelector:Ha.InteractiveMorphSelector=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),value:function(H,ea,Oa){H=void 0===H?$world:H;this.controllingMorph=void 0===ea?null:ea;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
H;this.filterFn=Oa;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ua.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=H.promise;this.selectorMorph=Ua.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ua.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ua.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ua.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();var ea=this.selectorMorph.morphBeneath(H),Oa,sb=this.possibleTarget,Lb=this.controllingMorph,vc=this.filterFn,gd=this.world,xd=this.morphHighlighter;for(xd==ea?ea=xd.morphBeneath(H):ea&&ea.isEpiMorph&&(ea=ea.morphBeneath(H));ea&&(Oa=[ea].concat($jscomp.arrayFromIterable(ea.ownerChain())).find(function(sc){return!sc.visible}));)ea=
Oa=Oa.morphBeneath(H);if(ea&&vc&&!vc(ea))for(;ea&&![ea].concat($jscomp.arrayFromIterable(ea.ownerChain())).find(vc);)ea=ea.morphBeneath(H);!ea||ea==sb||Lb&&ea.ownerChain().includes(Lb.getWindow())||(xd&&xd.deactivate(),(this.possibleTarget=sb=ea)&&!sb.isWorld&&(H=this.morphHighlighter=Ua.MorphHighlighter.for(gd,ea))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ua.MorphHighlighter.removeHighlighters(this.world);
Ua.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(H,ea,Oa){H=new this(H,ea,Oa);H.selectNewTarget();return H.whenDone}}],Ha,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60237,end:62992})}(void 0));Ua.InteractiveMorphSelector=Dc;Ua.InteractiveMorphSelector=Dc;Ua.InteractiveMorphSelector=Dc;Ua.default=lb;var Hc=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Hc.info="import via sub modules";Hc.info="import via sub modules";Hc.info="import via sub modules";lb=ra("v",{});Hc.valueWidgets=lb;Hc.valueWidgets=lb;Hc.valueWidgets=lb;var Xa=ra("p",{});Hc.popovers=Xa;Hc.popovers=Xa;Hc.popovers=
Xa;var bb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");bb.Morph=Ce;bb.VerticalLayout=Ba;bb.StyleSheet=Fd;bb.Icon=re;bb.CustomLayout=wa;bb.Color=Ub;bb.rect=Cc;bb.pt=pb;bb.connect=Sb;bb.Path=ad;bb.duration=300;Hc=ra("P",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),Ya=Ha.hasOwnProperty("Popover")&&"function"===typeof Ha.Popover?Ha.Popover:Ha.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(Ya,Ra,[{key:"relayout",value:function(H){var ea=this.get("body"),Oa=this.get("arrow"),sb=this.get("close button");Oa=Oa.height;H?(ea.animate({topCenter:bb.pt(0,Oa),duration:200}),sb.animate({topRight:ea.topRight.addXY(8,-8),duration:200})):(ea.topCenter=bb.pt(0,Oa),sb.topRight=ea.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},
hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:bb.pt(200,200),fill:bb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var ea=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return ea.relayout()})}},submorphs:{initialize:function(){var H=
this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:bb.pt(0,0),borderColor:bb.Color.transparent,vertices:[bb.pt(-10,0),bb.pt(0,-15),bb.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(bb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:bb.pt(16,16),borderColor:bb.Color.transparent}];var ea=$jscomp.makeIterator(this.submorphs);ea.next();var Oa=ea.next().value;ea=ea.next().value;bb.connect(ea,"fire",this,"close");bb.connect(Oa,"extent",
this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=!0},1E3)}}}}}],Ha,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(bb.Morph));bb.Popover=Hc;bb.Popover=Hc;bb.Popover=Hc;var cb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");
cb.Morph=Ce;cb.TilingLayout=Na;cb.morph=Jb;cb.Label=wd;cb.HorizontalLayout=fc;cb.Icon=re;cb.InputLine=La;cb.config=Wa;cb.connect=Sb;cb.signal=tb;cb.Color=Ub;cb.LinearGradient=Bc;cb.pt=pb;cb.rect=Cc;cb.num=ob;cb.obj=jd;cb.popovers=Xa;cb.ValueScrubber=Gb;cb.Popover=Hc;(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Ha.ContextSensitiveWidget?Ha.ContextSensitiveWidget:Ha.ContextSensitiveWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:cb.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?cb.Color.white:cb.Color.black}},layout:{initialize:function(){this.layout=new cb.HorizontalLayout}},
context:{serialize:!1}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(cb.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("ShortcutWidget")&&"function"===typeof Ha.ShortcutWidget?Ha.ShortcutWidget:
Ha.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],
set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ea){return ea.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=[cb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:cb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:cb.rect(0,
0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(cb.ContextSensitiveWidget);Xa=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("LayoutWidget")&&
"function"===typeof Ha.LayoutWidget?Ha.LayoutWidget:Ha.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=new cb.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition}),
container:H.context}),Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),2);cb.connect(ea,"layoutChanged",H,"layoutChanged");cb.signal(H,"openWidget",ea);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(cb.ShortcutWidget);cb.LayoutWidget=Xa;cb.LayoutWidget=Xa;cb.LayoutWidget=Xa;Hc=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("ColorWidget")&&"function"===typeof Ha.ColorWidget?Ha.ColorWidget:Ha.ColorWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"relayout",value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var ea;for(ea in this.color.stops){var Oa=
H.stops[ea];var sb=Oa.color,Lb=Oa.offset,vc=$jscomp.makeIterator(this.submorphs[2+2*ea].submorphs).next().value;Oa=this.submorphs[3+2*ea];vc.fill=sb;Oa.value=(100*Lb).toFixed()+"%"+(ea<H.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},
{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=cb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:cb.pt(15,15),fill:cb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:cb.pt(5,7.5),fill:cb.Color.white,borderColor:cb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[cb.pt(0,0),cb.pt(10,10)],borderColor:cb.Color.red}]}]},
{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:cb.pt(15,15),fill:cb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:cb.pt(5,7.5),fill:this.color,borderColor:cb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:cb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=
this.color,ea=[{type:"label",padding:cb.rect(0,0,5,0),value:"linearGradient"==H.type?cb.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Oa;for(Oa in H.stops){var sb=H.stops[Oa],Lb=sb.color;sb=sb.offset;ea.push({extent:cb.pt(this.fontSize,this.fontSize),fill:cb.Color.transparent,layout:new cb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Lb}]});ea.push({type:"label",padding:cb.rect(0,0,5,0),value:(100*sb).toFixed()+"%"+(Oa<H.stops.length-1?",":"")})}return ea}},
{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=new cb.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),
2);cb.connect(ea,"fillValue",H,"update");cb.signal(H,"openWidget",ea);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new cb.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:cb.Color.white},nonSelectionFontColor:{defaultValue:cb.Color.black},color:{defaultValue:cb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],
set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){cb.connect(this,"color",this,"relayout",{converter:function(H,ea){return(ea&&ea.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4687,end:10140})}(cb.ContextSensitiveWidget);cb.ColorWidget=Hc;cb.ColorWidget=Hc;cb.ColorWidget=Hc;var Sc=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("BooleanWidget")&&"function"===typeof Ha.BooleanWidget?Ha.BooleanWidget:Ha.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:cb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=cb.obj.safeToString(H);this.fontColor=this.boolean?cb.Color.green:cb.Color.red}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(cb.Label);cb.BooleanWidget=Sc;cb.BooleanWidget=Sc;cb.BooleanWidget=Sc;var sd=ra("N",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("NumberWidget")&&"function"===typeof Ha.NumberWidget?Ha.NumberWidget:Ha.NumberWidget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),"onMouseDown",this).call(this,H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return cb.obj.dissoc(Tb._get(Object.getPrototypeOf(Ya.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,
ea){ea=void 0===ea?!0:ea;this.setProperty("number",ea?H/this.scaleFactor:H);cb.signal(this,"number",this.number);this.relayout(ea)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),ea=this.getSubmorphNamed("down");this.getSubmorphNamed("value");H.height=ea.height=(this.height-2)/2;H.width=ea.width=20}},{key:"onChange",value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",
value:function(H){var ea=this.getSubmorphNamed("value");ea&&(this.autofit?(H||(ea.value=this.number*this.scaleFactor),ea.fit(),this.height=ea.height,this.width=ea.width+20):H||(ea.width=this.width-20),this.relayoutButtons(),H||(ea.value=cb.num.roundTo(this.number*this.scaleFactor,1),ea.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ea.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ea.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||
this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},
number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:cb.rect(5,3,0,0),after:["submorphs"],
set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:cb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,
defaultValue:cb.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",
H)}},layout:{initialize:function(){this.layout=new cb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var H=this;this.submorphs=[new cb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),cb.Icon.makeLabel("sort-up",{name:"up"}),cb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];cb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],
Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(cb.Morph));cb.NumberWidget=sd;cb.NumberWidget=sd;cb.NumberWidget=sd;var Ud=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("ShadowWidget")&&"function"===typeof Ha.ShadowWidget?
Ha.ShadowWidget:Ha.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=new cb.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition}),shadowValue:H.shadowValue}),
Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),2);cb.connect(ea,"shadowValue",H,"shadowValue");cb.connect(H,"shadowValue",H,"update");cb.signal(H,"openWidget",ea);Oa.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},
{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,ea=H.blur,Oa=H.spread,sb=H.distance;H=H.color;var Lb=$jscomp.makeIterator(this.submorphs),vc=Lb.next().value,gd=Lb.next().value;gd=$jscomp.makeIterator(gd.submorphs).next().value;Lb=Lb.next().value;vc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";gd.fill=H;Lb.value=", "+ea+"px, "+sb+"px, "+Oa+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,ea=H.blur,Oa=H.spread,sb=H.distance;H=H.color;this.submorphs=
[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},cb.morph({fill:cb.Color.transparent,extent:cb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:cb.pt(this.fontSize,this.fontSize),position:cb.pt(2,2),fill:H,borderColor:cb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ea+"px, "+sb+"px, "+Oa+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},
{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",H);this.renderShadowDisplay()}},fill:{defaultValue:cb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ea){return ea.fontColor=H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?cb.Color.white:cb.Color.black}},
layout:{initialize:function(){this.layout=new cb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(cb.Morph);cb.ShadowWidget=Ud;cb.ShadowWidget=Ud;cb.ShadowWidget=Ud;var hc=function(Ra){var Ha=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("PointWidget")&&"function"===typeof Ha.PointWidget?Ha.PointWidget:Ha.PointWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=
new cb.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition})}),Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),2);cb.connect(ea,"pointValue",H,"pointValue");cb.signal(H,"openWidget",ea);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?
this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:cb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:cb.Color.black},fontFamily:{defaultValue:cb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var ea=cb.Color.rgbHex("#0086b3");this.setProperty("pointValue",H);this.textAndAttributes=["pt(",null,H.x.toFixed(),
{fontColor:ea},",",{},H.y.toFixed(),{fontColor:ea},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(cb.Label);cb.PointWidget=hc;cb.PointWidget=hc;cb.PointWidget=
hc;var Ed=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("PaddingWidget")&&"function"===typeof Ha.PaddingWidget?Ha.PaddingWidget:Ha.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==
Oa.nextAddress)return ea=new cb.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition}),rectangle:H.rectangle}),ea.relayout(),Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),2);cb.connect(ea,"rectangle",H,"rectangle");cb.signal(H,"openWidget",ea);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},
fontFamily:{defaultValue:cb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?cb.Color.white:cb.Color.black}},rectangle:{defaultValue:cb.rect(0),set:function(H){this.setProperty("rectangle",H);this.value=cb.obj.safeToString(H)}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(cb.Label);cb.PaddingWidget=Ed;cb.PaddingWidget=Ed;cb.PaddingWidget=Ed;var Ac=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("IconWidget")&&"function"===typeof Ha.IconWidget?Ha.IconWidget:Ha.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"onMouseDown",
value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=new cb.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(sb){return sb.hasFixedPosition})}),Oa.yield(ea.fadeIntoWorld(H.globalBounds().center()),2);cb.connect(ea,"select",H,"iconValue",{converter:function(sb){return sb&&cb.Icon.makeLabel(sb).value},varMapping:{Icon:re}});cb.signal(H,"openWidget",
ea);Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:cb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(H){this.value=H||"No Icon"}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(cb.Label);cb.IconWidget=Ac;cb.IconWidget=Ac;cb.IconWidget=Ac;var Jd=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),Ya=Ha.hasOwnProperty("StringWidget")&&"function"===typeof Ha.StringWidget?Ha.StringWidget:Ha.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"truncate",
value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var ea=this,Oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){if(1==sb.nextAddress)return Tb._get(Object.getPrototypeOf(Ya.prototype),"onFocus",ea).call(ea,H),ea.readOnly?sb.return():ea.stringTooLong?sb.yield(ea.world().editPrompt("edit string",{requester:ea,input:ea.stringValue}),2):(ea.borderColor=cb.Color.white.withA(.9),ea.textString=ea.stringValue,sb.return());Oa=sb.yieldResult;if("string"===
typeof Oa)ea.onInput(Oa);sb.jumpToEnd()})}},{key:"onBlur",value:function(H){Tb._get(Object.getPrototypeOf(Ya.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=cb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();cb.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:cb.Color.transparent},
fontColor:{defaultValue:cb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:cb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:cb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,
get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?cb.Color.white:cb.Color.blue}}}}}],Ha,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(cb.InputLine);cb.StringWidget=
Jd;cb.StringWidget=Jd;cb.StringWidget=Jd;cb.valueWidgets=lb;Object.assign(cb.valueWidgets,{NumberWidget:sd,StringWidget:Jd,IconWidget:Ac,PaddingWidget:Ed,ShadowWidget:Ud,PointWidget:hc,BooleanWidget:Sc,LayoutWidget:Xa,ColorWidget:Hc});var ka=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");ka.Ellipse=Rb;ka.Icon=re;ka.Morph=Ce;ka.Path=Bd;ka.Text=ic;ka.HorizontalLayout=fc;ka.VerticalLayout=Ba;ka.morph=Jb;ka.Color=Ub;ka.pt=pb;ka.rect=Cc;ka.Rectangle=wc;ka.arr=kb;ka.connect=Sb;ka.disconnect=
od;ka.LabeledCheckBox=Bb;ka.DropDownSelector=ba;ka.Button=xa;ka.Menu=M;ka.NumberWidget=sd;ka.InteractiveMorphSelector=Dc;ka.easings=Mc;(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("AxisHalo")&&"function"===typeof Ha.AxisHalo?Ha.AxisHalo:Ha.AxisHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ea=
H.halo;H=H.targetAxis;Tb._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:ka.Color.transparent,halo:ea,targetAxis:H,container:ea.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},
{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",
value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,ea=this,Oa=this.proportionViewer();return this.halo.addGuide(new ka.Morph({nativeCursor:this.getResizeCursor(),fill:ka.Color.transparent,submorphs:[this.devider(),Oa],alignWithTarget:function(){this.setBounds(ea.getProportionSliderBounds(this))},
onDragStart:function(){Oa.visible=!0},onDrag:function(sb){H.adjustStretch(H.getDelta(sb));H.halo.alignWithTarget()},onDragEnd:function(){Oa.visible=!1}}))}},{key:"devider",value:function(){return new ka.Morph({visible:!this.lastAxis,fill:ka.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=this,ea=this,Oa=this.minSpaceVisualizer(),sb=this.minViewer();return this.halo.addGuide(new ka.Ellipse({nativeCursor:this.getResizeCursor(),
fill:ka.Color.green,extent:ka.pt(10,10),visible:!1,submorphs:[Oa,sb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=ea.getMinSliderPosition()},requestToShow:function(){this.visible=!ea.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ea.forceMenuHidden=!0;sb.visible=!0;this.active=Oa.visible=!0},onDrag:function(Lb){H.targetAxis.min+=-H.getDelta(Lb);H.halo.alignWithTarget()},onDragEnd:function(){ea.forceMenuHidden=!1;
sb.visible=!1;this.active=Oa.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new ka.Path(Object.assign({position:ka.pt(-1,-1),borderStyle:"dashed",borderColor:ka.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",
value:function(){var H=this,ea=this.minSpaceBorder();return this.halo.addGuide(new ka.Morph({fill:ka.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[ea],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=ka.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),ea=this.menuButton(),Oa=this;return new ka.Morph({layout:this.getMenuLayout(),submorphs:[H,ea],fill:ka.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=
this.owner.extent.subPt(Oa.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new ka.Morph({fill:ka.Color.transparent,extent:ka.pt(25,25),submorphs:[{center:ka.pt(12.5,12.5),fill:ka.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=ka.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=ka.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},
toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,ea=this;return new ka.Morph({fill:ka.Color.transparent,extent:ka.pt(25,25),submorphs:[{fill:ka.Color.transparent,styleClasses:["fa","fa-cog"],center:ka.pt(12.5,12.5)}],onMouseDown:function(Oa){ea.forceMenuVisible=!0;this.addMorph(Oa.state.menu=new ka.Menu({position:ka.pt(15,15),items:[["Remove "+ea.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],
["Insert "+ea.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ea.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var ea=H.position;H=H.alignWithTarget;return this.halo.addGuide(new ka.Text({styleClasses:["Halo"],padding:ka.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:ka.Color.white,fill:ka.Color.black.withA(.5),position:ea,alignWithTarget:H,
readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:660,end:7979})})(ka.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("RowHalo")&&"function"===typeof Ha.RowHalo?Ha.RowHalo:Ha.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ea=H.row;H=H.halo;Tb._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:H.target.row(ea),halo:H})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return ka.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return ka.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>
H.height?ka.pt(2,5):ka.pt(26,10)}},{key:"getMenuLayout",value:function(){return new ka.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return ka.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return ka.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return ka.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:ka.pt(this.container.width+
50,2),vertices:[ka.pt(0,1),ka.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return ka.pt(40,20)}},{key:"getProportionSliderBounds",value:function(H){return ka.pt(0,H.owner.height-5).extent(ka.pt(40,10))}},{key:"getDeviderBounds",value:function(){return ka.pt(15,4).extent(ka.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(ka.AxisHalo);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("ColumnHalo")&&"function"===typeof Ha.ColumnHalo?Ha.ColumnHalo:Ha.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:Symbol.for("lively-instance-initialize"),
value:function(H){var ea=H.col;H=H.halo;Tb._get(Object.getPrototypeOf(Ya.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.col(ea),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return ka.pt(this.axisOffset()+
10,-45)}},{key:"fetchExtent",value:function(){return ka.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.width?ka.pt(5,3):ka.pt(8,26)}},{key:"getMenuLayout",value:function(){return new ka.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return ka.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return ka.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",
value:function(){return ka.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:ka.pt(2,this.container.height+50),vertices:[ka.pt(1,0),ka.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return ka.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return ka.pt(H.owner.width-5,0).extent(ka.pt(10,40))}},{key:"getDeviderBounds",value:function(){return ka.pt(4,15).extent(ka.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColumnHalo"}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(ka.AxisHalo);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("CellGuide")&&"function"===typeof Ha.CellGuide?Ha.CellGuide:Ha.CellGuide=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"menuItems",value:function(){var H=this,ea=ka.Icon.textAttribute("check-square-o"),Oa=ka.Icon.textAttribute("square-o");ea[1].textStyleClasses.push("annotation");Oa[1].textStyleClasses.push("annotation");Oa[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Oa:ea)),function(){H.cellGroup.resize=
!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ea:Oa)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new ka.Rectangle).sides),$jscomp.arrayFromIterable((new ka.Rectangle).corners)).map(function(sb){return[[sb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==sb?ea:Oa),["  ",null]),function(){return H.cellGroup.align=sb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var sb=
H.cellGroup.morph;sb&&(H.world().firstHand.grab(sb),H.world().firstHand.longClickGrab=!0,sb.position=ka.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:10444,end:11722})})(ka.Morph);(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("LayoutHalo")&&"function"===typeof Ha.LayoutHalo?Ha.LayoutHalo:Ha.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},
pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:ka.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(ka.Morph);
lb=ra("G",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Ha.GridLayoutHalo?Ha.GridLayoutHalo:Ha.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(ea){return ea.fullContainsWorldPoint($world.firstHand.position)}),H!=this.currentCell&&
this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var ea=this;this.currentCell&&H.whenRendered().then(function(){return ea.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var H=this.target,ea=new ka.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:ka.Color.transparent,checked:H.compensateOrigin}),
Oa=new ka.LabeledCheckBox({label:"Resize Submorphs",fill:ka.Color.transparent,name:"fitToCell",checked:H.fitToCell});ka.connect(ea,"checked",H,"compensateOrigin");ka.connect(Oa,"checked",H,"fitToCell");ka.connect(ea,"checked",this,"alignWithTarget");return[ea,Oa]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=
this.container.extent;this.addMissingGuides();ka.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var H=this;ka.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ea){return ea.cellGroup})).forEach(function(ea){return H.addMorph(H.cellGuide(ea))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var H=
this,ea=this.addMorph({fill:ka.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Oa){ea.addMorph(H.cellGuide(Oa))});this.cellGuides=ea.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",value:function(){var H=this,ea=this;this.addGuide(this.addMorph(new ka.Morph({width:25,fill:ka.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:ka.pt(-5,
0),alignWithTarget:function(){this.height=ea.container.height}})));ka.arr.range(0,this.target.rowCount-1).forEach(function(Oa){H.addMorph(new ka.RowHalo({row:Oa,halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,ea=this;this.addGuide(this.addMorph(new ka.Morph({height:25,fill:ka.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:ka.pt(0,-5),alignWithTarget:function(){this.width=ea.container.width}})));ka.arr.range(0,this.target.columnCount-1).forEach(function(Oa){H.addMorph(new ka.ColumnHalo({col:Oa,
halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new ka.Morph({fill:ka.Color.transparent,extent:ka.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ea){H.container.resizeBy(ea.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=H.extent}}))}},{key:"cellResizer",value:function(H,ea){var Oa=this,sb="topLeft"==ea?"bottomRight":"topLeft";return new ka.Ellipse({borderWidth:1,visible:!1,borderColor:ka.Color.black,nativeCursor:"nwse-resize",
removeCell:function(Lb){H.disconnect(Lb);Oa.alignWithTarget()},addCell:function(Lb){H.connect(Lb);Oa.alignWithTarget()},start:function(){this.fixpointCell=H[sb];this.draggedDelta=H.bounds().partNamed(ea);this.debugMorph=Oa.addMorph(new ka.Morph({fill:ka.Color.orange.withA(.5)}))},update:function(Lb){var vc=this;this.draggedDelta=this.draggedDelta.addPt(Lb);var gd=ka.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(gd);Oa.cells.forEach(function(xd){var sc=
gd.intersection(xd.bounds()).area()/xd.bounds().area();H.includes(xd)&&.1>sc&&vc.removeCell(xd);!H.includes(xd)&&sc>1/3&&vc.addCell(xd)})},onDragEnd:function(Lb){this.debugMorph.remove()},onDragStart:function(Lb){this.start(Lb.position)},onDrag:function(Lb){this.update(Lb.state.dragDelta)}})}},{key:"cellGuide",value:function(H){var ea=this,Oa=this.cellResizer(H,"topLeft"),sb=this.cellResizer(H,"bottomRight");return this.addGuide(new ka.CellGuide({cellGroup:H,bounds:H.bounds(),fill:ka.Color.transparent,
borderColor:ka.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Oa,sb],onMouseDown:function(Lb){this.becomeActive()},deactivate:function(){this.borderColor=ka.Color.orange;this.fill=ka.Color.transparent;this.submorphs.forEach(function(Lb){Lb.visible=!1})},becomeActive:function(){ea.guides.forEach(function(Lb){Lb.isCell&&Lb.deactivate()});this.borderColor=ka.Color.rgbHex("#1565C0");this.fill=ka.Color.rgbHex("#1565C0").withA(.3);ea.addMorph(this.remove());this.submorphs.forEach(function(Lb){Lb.visible=
!0})},startPreview:function(Lb){this.fill=ka.Color.orange.withA(.7)},stopPreview:function(Lb){this.fill=ka.Color.transparent},onDrop:function(Lb){var vc=$jscomp.makeIterator(Lb.hand.grabbedMorphs).next().value;Lb.hand.dropMorphsOn(ea.container);H.morph=vc},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),Oa.center=this.innerBounds().topLeft(),sb.center=this.innerBounds().bottomRight()):(ka.arr.remove(ea.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:ka.Color.transparent},cells:{derived:!0,get:function(){return ka.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:12146,end:19501})}(ka.LayoutHalo));ka.GridLayoutHalo=lb;ka.GridLayoutHalo=lb;ka.GridLayoutHalo=lb;Xa=function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Ha.TilingLayoutHalo?Ha.TilingLayoutHalo:Ha.TilingLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"remove",value:function(){Tb._get(Object.getPrototypeOf(Ya.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"previewDrop",value:function(H){var ea=this;0<this.previews.length||(this.previews=H.map(function(Oa){return ea.container.addMorph({type:ka.DropPreview,bounds:Oa.bounds()})}),this.previews.forEach(function(Oa){Oa.step()}))}},
{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,ea=new ka.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.axis,values:["row","column"]}),Oa=new ka.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});H=new ka.NumberWidget({min:0,number:H.spacing,padding:ka.rect(5,
3,0,0),borderRadius:3,borderWidth:1,borderColor:ka.Color.gray,unit:"px"});ka.connect(H,"update",this,"updateSpacing");ka.connect(Oa,"update",this,"updateAlign");ka.connect(ea,"update",this,"updateAxis");var sb={type:"label",padding:ka.rect(0,5,5,5),fill:ka.Color.transparent,fontColor:ka.Color.gray.darker(),readOnly:!0};return[[Object.assign({},sb,{textString:"Submorph Spacing"}),H],[Object.assign({},sb,{textString:"Tiling Align"}),Oa],[Object.assign({},sb,{textString:"Tiling Axis"}),ea]].map(function(Lb){return{submorphs:Lb,
fill:null,layout:new ka.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:ka.Color.transparent},previews:{defaultValue:[]}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:19510,end:21708})}(ka.LayoutHalo);ka.TilingLayoutHalo=Xa;ka.TilingLayoutHalo=Xa;ka.TilingLayoutHalo=Xa;(function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("DropPreview")&&"function"===typeof Ha.DropPreview?Ha.DropPreview:Ha.DropPreview=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",
value:function(){var H=this,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oa){if(1==Oa.nextAddress)return ea=ka.easings.inOutQuad,Oa.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:ea}),2);if(3!=Oa.nextAddress)return Oa.yield(H.animate({opacity:1,duration:(H.pulseDuration-10)/2,easing:ea}),3);H.stopped||H.step();Oa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,
get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:ka.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:ka.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:21710,end:22534})})(ka.Morph);Xa=ra("F",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Ha.FlexLayoutHalo?Ha.FlexLayoutHalo:Ha.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",value:function(H){var ea=this;0<this.previews.length||
(this.previews=H.map(function(Oa){return ea.container.addMorph({type:ka.DropPreview,position:ea.container.localize(ea.world().firstHand.position),extent:Oa.bounds().extent()})}),this.previews.forEach(function(Oa){Oa.step()}))}},{key:"remove",value:function(){Tb._get(Object.getPrototypeOf(Ya.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"onDrop",value:function(H){this.removePreviews();
H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(H){this.target.align=
H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"optionControls",value:function(){var H=this.target,ea=H.possibleAlignValues?{fill:ka.Color.transparent,layout:new ka.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new ka.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:H.align,values:H.possibleAlignValues})]}:null,Oa=
H.possibleDirectionValues?{fill:ka.Color.transparent,layout:new ka.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new ka.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:null,sb=new ka.NumberWidget({fill:ka.Color.white,borderWidth:1,borderRadius:4,padding:ka.rect(5,4,0,0),borderColor:ka.Color.gray,min:0,number:H.spacing,unit:"px"}),Lb=new ka.LabeledCheckBox({name:"autoResize",
label:"Resize Container",alignCheckBox:"right",fill:ka.Color.transparent,checked:H.autoResize});H=new ka.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:ka.Color.transparent,checked:H.resizeSubmorphs});ka.connect(sb,"update",this,"updateSpacing");ka.connect(Lb,"checked",this,"updateAutoResizePolicy");ka.connect(H,"checked",this,"updateResizeSubmorphsPolicy");ea&&ka.connect(ea.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Oa&&ka.connect(Oa.submorphs[1],
"selectedValue",this,"updateDirectionPolicy");return[Lb,H].concat($jscomp.arrayFromIterable([ea,Oa].filter(Boolean)),[{fill:ka.Color.transparent,layout:new ka.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:ka.Color.gray.darker(),padding:ka.rect(0,5,5,5)},sb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:ka.Color.transparent},halosEnabled:{defaultValue:!1},
previews:{defaultValue:[]}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(ka.LayoutHalo));ka.FlexLayoutHalo=Xa;ka.FlexLayoutHalo=Xa;ka.FlexLayoutHalo=Xa;Hc=ra("c",function(Ra){var Ha=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),Ya=Ha.hasOwnProperty("ProportionalLayoutHalo")&&
"function"===typeof Ha.ProportionalLayoutHalo?Ha.ProportionalLayoutHalo:Ha.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Tb(Ya,Ra,[{key:"handleDrop",value:function(H){}},{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(H){var ea=
{};this.target.changeSettingsFor(H.submorph,(ea[H.axis]=H.policy,ea),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,ea){var Oa=this;H.stop();var sb=this.target.settingsFor(ea);ea="";for(var Lb in sb)ea+=Lb+":"+sb[Lb]+" ";var vc=ka.morph({type:"label",value:ea,isLayoutable:!1});vc.wantsToBeDroppedOn=function(gd){return Oa.target.layoutableSubmorphs.includes(gd)};vc.onBeingDroppedOn=function(gd,xd){vc.remove();if(gd=Oa.target.layoutableSubmorphs.includes(xd)?xd:H.world.morphsContainingPoint(H.hand.position).find(function(sc){return Oa.target.layoutableSubmorphs.includes(sc)}))Oa.updateSubmorphProportionalLayoutSettings({policy:sb.x,
axis:"x",submorph:gd}),Oa.updateSubmorphProportionalLayoutSettings({policy:sb.y,axis:"y",submorph:gd}),gd.show(),$world.setStatusMessage("layout settings applied")};H.hand.grab(vc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,ea,Oa,sb,Lb,vc,gd,xd,sc,Zd,he,Wd,Ie;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ke){switch(Ke.nextAddress){case 1:return ea=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(sb=ea.map(function(Db){return{isListItem:!0,
string:String(Db),value:Db}}),Ke.yield($world.listPrompt("Select morph",sb,{requester:H,onSelection:function(Db){return Db.show()}}),5)):Ke.yield(ka.InteractiveMorphSelector.selectMorph(H.world(),H,function(Db){return ea.includes(Db)}),4);case 4:Oa=Ke.yieldResult;Ke.jumpTo(3);break;case 5:Lb=Ke.yieldResult,vc=$jscomp.makeIterator(Lb.selected),Oa=vc.next().value;case 3:if(!Oa)return Ke.return();gd=H.state.popover.get("controlContainer");xd=gd.getAllNamed(/submorph config/);sc=["move","resize","scale",
"fixed"];Zd=H.target.settingsFor(Oa);xd.length||(gd.submorphs=[].concat($jscomp.arrayFromIterable(gd.submorphs),[{name:"submorph config X-Axis policy",position:ka.pt(0,H.height),fill:ka.Color.transparent,layout:new ka.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new ka.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Zd.x,values:sc})]},{name:"submorph config Y-Axis policy",position:ka.pt(0,
H.height),fill:ka.Color.transparent,layout:new ka.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new ka.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Zd.y,values:sc})]},ka.morph({position:ka.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));he=gd.getSubmorphNamed("x-axis policy selector");Wd=gd.getSubmorphNamed("y-axis policy selector");Ie=gd.getSubmorphNamed("dragme");
ka.disconnect(he,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");ka.disconnect(Wd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");he.selectedValue=Zd.x;Wd.selectedValue=Zd.y;ka.connect(Ie,"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(Db,Lf){return Db(Lf,Oa)},varMapping:{submorph:Oa}});ka.connect(he,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Db){return{policy:Db,axis:"x",submorph:Oa}},varMapping:{submorph:Oa}});ka.connect(Wd,
"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Db){return{policy:Db,axis:"y",submorph:Oa}},varMapping:{submorph:Oa}});Ke.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=H;var ea=this.target;H=new ka.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:ka.Color.transparent,checked:ea.xAxisEnabled});ea=new ka.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:ka.Color.transparent,checked:ea.yAxisEnabled});
var Oa=new ka.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(ka.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});ka.connect(H,"checked",this,"updateXAxisEnabled");ka.connect(ea,"checked",this,"updateYAxisEnabled");ka.connect(Oa,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Oa]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:ka.Color.transparent}}}}],Ha,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(ka.LayoutHalo));ka.ProportionalLayoutHalo=Hc;ka.ProportionalLayoutHalo=Hc;ka.ProportionalLayoutHalo=Hc;Sc=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Sc.Halo=xc;
Sc.MorphHighlighter=ab;Sc.InteractiveMorphSelector=Dc;Sc.StatusMessage=qd;Sc.StatusMessageForMorph=Uc;Sc.show=$b;Sc.showConnector=Tc;Sc.ProportionalLayoutHalo=Hc;Sc.GridLayoutHalo=lb;Sc.FlexLayoutHalo=Xa;Sc.showAndSnapToGuides=Ka;Sc.removeSnapToGuidesOf=ha;Sc.StatusMessage=qd;Sc.StatusMessage=qd;Sc.StatusMessageForMorph=Uc;Sc.StatusMessageForMorph=Uc;Sc.show=$b;Sc.show=$b;Sc.showConnector=Tc;Sc.showConnector=Tc;Sc.Halo=xc;Sc.Halo=xc;Sc.MorphHighlighter=ab;Sc.MorphHighlighter=ab;Sc.InteractiveMorphSelector=
Dc;Sc.InteractiveMorphSelector=Dc;Sc.ProportionalLayoutHalo=Hc;Sc.ProportionalLayoutHalo=Hc;Sc.GridLayoutHalo=lb;Sc.GridLayoutHalo=lb;Sc.FlexLayoutHalo=Xa;Sc.FlexLayoutHalo=Xa;Sc.showAndSnapToGuides=Ka;Sc.showAndSnapToGuides=Ka;Sc.removeSnapToGuidesOf=ha;Sc.removeSnapToGuidesOf=ha;qd=Object.freeze({__proto__:null,StatusMessage:qd,StatusMessageForMorph:Uc,show:$b,showConnector:Tc,Halo:xc,MorphHighlighter:ab,InteractiveMorphSelector:Dc,ProportionalLayoutHalo:Hc,GridLayoutHalo:lb,FlexLayoutHalo:Xa,showAndSnapToGuides:Ka,
removeSnapToGuidesOf:ha,SvgStyleHalo:void 0});ra("i",qd);ra("_",void 0)}}});