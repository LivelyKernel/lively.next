System.register(["./__root_module__-590131e3.js"],function(Sa){var Lb,Vb,Fc,jc,sd,kd,Cd,ed,Zc,bd,yd,ke,ue,He,ld,Wd;return{setters:[function(gc){Lb=gc.s;Vb=gc.P;Fc=gc.a;jc=gc.v;sd=gc.w;kd=gc.x;Cd=gc.y;ed=gc.r;Zc=gc.z;bd=gc.A;yd=gc.E;ke=gc.D;ue=gc.F;He=gc.G;ld=gc.H;Wd=gc.J}],execute:function(){function gc(Zb,Ic,Ad,Jc){Jc=void 0===Jc?{}:Jc;Jc=Jc.package||hd.ObjectPackage.lookupModuleForClass(Zb.constructor,Jc);if(!Jc)throw Error("Object is not part of an object package: "+Zb);return Jc.addScript(Zb,
Ic,Ad)}function cd(Zb,Ic){Ic=hd.normalizeOptions(Ic).System;Zb=(Zb=Zb[Symbol.for("lively-module-meta")])?Zb.package.name:null;return(Ic=(Zb?hd.lookupPackage(Ic,Zb):{}).pkg)?!!hd.ObjectPackage.forSystemPackage(Ic):!1}function Bd(Zb,Ic){var Ad,Jc,zd,Mb,mb,Bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xc){return 1==xc.nextAddress?(Ad=Zb.constructor,hd.withSuperclasses(Ad),Symbol.for("lively-module-meta"),zd=Jc=hd.ObjectPackage.lookupPackageForObject(Zb),Mb=zd.baseURL,mb=zd.System,xc.yield(Jc.fork(Ic,
{baseURL:Mb,System:mb}),2)):3!=xc.nextAddress?(Bc=xc.yieldResult,xc.yield(hd.adoptObject(Zb,Bc.objectClass),3)):xc.return(Bc.objectClass[Symbol.for("__LivelyClassName__")])})}Sa({addScript:gc,interactivelyForkPackage:Bd,isObjectClass:cd});var hd=lively.FreezerRuntime.recorderFor("lively.classes/object-classes.js");hd.normalizeOptions=function(Zb){Zb=Object.assign({baseURL:hd.defaultBaseURL,System:System},Zb);Zb.baseURL=Zb.baseURL.replace(/\/$/,"");return Zb};hd.addScript=gc;hd.isObjectClass=cd;hd.interactivelyForkPackage=
Bd;hd.string=Lb;hd.Path=Vb;hd.arr=Fc;hd.parse=jc;hd.isValidIdentifier=sd;hd.stringify=kd;hd.parseFunction=Cd;hd.resource=ed;hd.runEval=Zc;hd.scripting=bd;hd.ExportLookup=yd;var Jd=hd.scripting;hd.ensurePackage=Jd.ensurePackage;hd.registerPackage=Jd.registerPackage;hd.importPackage=Jd.importPackage;hd.lookupPackage=Jd.lookupPackage;hd.module=Jd.module;hd.ImportInjector=Jd.ImportInjector;hd.RuntimeSourceDescriptor=ke;hd.toJsIdentifier=ue;hd.withSuperclasses=He;hd.adoptObject=ld;hd.classToFunctionTransform=
Wd;hd.objectPackageSym=Symbol.for("lively-object-package-data");hd.defaultBaseURL="local://lively-object-modules";hd.globalClasses=Object.keys(System.global).map(function(Zb){Zb=System.global[Zb];return"function"===typeof Zb&&Zb.name&&Zb}).filter(Boolean);hd.addScript=gc;hd.addScript=gc;hd.isObjectClass=cd;hd.isObjectClass=cd;hd._packageStore=hd._packageStore||{};hd.interactivelyForkPackage=Bd;hd.interactivelyForkPackage=Bd;Jd=function(Zb,Ic){this._id=Zb;this.options=hd.normalizeOptions(Ic)};Jd.lookupPackageForObject=
function(Zb,Ic){return this.lookupPackageForClass(Zb.constructor,Ic)};Jd.lookupPackageForClass=function(Zb,Ic){Ic=hd.normalizeOptions(Ic).System;Zb=(Zb=Zb[Symbol.for("lively-module-meta")])?Zb.package.name:null;return(Ic=(Zb?hd.lookupPackage(Ic,Zb):{}).pkg)?hd.ObjectPackage.forSystemPackage(Ic):null};Jd.lookupModuleForClass=function(Zb,Ic){hd.normalizeOptions(Ic);Ic=this.lookupPackageForClass(Zb,Ic);Zb=Zb[Symbol.for("lively-module-meta")];return new hd.ObjectModule(Zb.pathInPackage,Ic)};Jd.forSystemPackage=
function(Zb){return this.packageStore[Zb.name]};Jd.withId=function(Zb,Ic){return this.packageStore[Zb]||(this.packageStore[Zb]=new this(Zb,Ic))};Jd.prototype.ensureSubModule=function(Zb){Zb=void 0===Zb?"index":Zb;var Ic=this,Ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){return 1==Jc.nextAddress?(Ad=new hd.ObjectModule(Zb,Ic),Jc.yield(Ad.ensureExistance(),2)):Jc.return(Ad)})};Jd.prototype.resource=function(Zb){Zb=void 0===Zb?"":Zb;return hd.resource(this.packageURL).join(Zb)};
Jd.prototype.load=function(){return hd.importPackage(this.System,this.packageURL)};Jd.prototype.ensureExistance=function(){var Zb=this,Ic,Ad,Jc,zd,Mb,mb,Bc,xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ec){switch(ec.nextAddress){case 1:return Ic=Zb.resource("/"),ec.yield(Ic.exists(),2);case 2:if(ec.yieldResult)return ec.return();Ad=[{resource:Ic}];Jc=[{resource:Zb.resource("package.json"),content:JSON.stringify(Zb.config,null,2)}];return ec.yield(Promise.all(Ad.map(function(Dc){return Dc.resource.mkdir()})),
3);case 3:return ec.yield(Promise.all(Jc.map(function(Dc){var Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){switch(hc.nextAddress){case 1:return hc.yield(Dc.resource.exists(),2);case 2:if(!(Ta=!hc.yieldResult)){hc.jumpTo(3);break}return hc.yield(Dc.resource.write(Dc.content),4);case 4:Ta=hc.yieldResult;case 3:return hc.return(Ta)}})})),4);case 4:return ec.yield(Zb.objectModule.ensureExistance(),5);case 5:return zd=Zb,Mb=zd.System,mb=zd.packageURL,Bc=zd.config,ec.yield(hd.ensurePackage(Mb,
mb),6);case 6:return xc=ec.yieldResult,xc.registerWithConfig(Bc),console.log(Zb.packageURL+" REGISTERED"),ec.return(Zb)}})};Jd.prototype.ensureObjectClass=function(Zb){var Ic=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ad){return 1==Ad.nextAddress?Ad.yield(Ic.ensureExistance(),2):Ad.return(Ic.objectModule.ensureObjectClass(Zb))})};Jd.prototype.adoptObject=function(Zb){var Ic=this,Ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){if(1==Jc.nextAddress)return Ic.objectClass===
Zb.constructor?Jc.return():Jc.yield(Ic.ensureObjectClass(Zb.constructor),2);Ad=Jc.yieldResult;hd.adoptObject(Zb,Ad);Jc.jumpToEnd()})};Jd.prototype.addScript=function(Zb,Ic,Ad){return this.objectModule.addScript(Zb,Ic,Ad)};Jd.prototype.remove=function(){this.systemPackage.remove();delete hd.ObjectPackage.packageStore[this.id];return this.resource().remove()};Jd.prototype.renameObjectClass=function(Zb,Ic){Ic=void 0===Ic?[]:Ic;var Ad=this,Jc,zd,Mb,mb,Bc,xc,ec,Dc,Ta,hc,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){if(1==
tc.nextAddress){Jc=Ad;zd=Jc.objectClass;Mb=Jc.System;if(!zd||zd[Symbol.for("__LivelyClassName__")]===Zb)return tc.return(zd);if(!hd.isValidIdentifier(Zb))throw Error(Zb+" is not a valid name for a class");Bc=mb=hd.RuntimeSourceDescriptor.for(zd,Mb);xc=Bc.source;ec=Bc.ast;Dc=ec.id;Ta=Dc.start;hc=Dc.end;return tc.yield(mb.changeSource(xc.slice(0,Ta)+Zb+xc.slice(hc)),2)}Eb=Ad.objectClass;Ic.forEach(function(Ec){Ec.constructor=Eb;Ec.__proto__=Eb.prototype});return tc.return(Eb)})};Jd.prototype.fork=function(Zb,
Ic){var Ad=this,Jc,zd,Mb,mb,Bc,xc,ec,Dc,Ta,hc,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){switch(tc.nextAddress){case 1:return Jc=Ad,zd=Jc.System,Mb=Jc.baseURL,mb=Jc.objectClass,Ic=Object.assign({System:zd,baseURL:Mb},Ic),Bc=hd.RuntimeSourceDescriptor.for(mb),xc=Bc._renamedSource(Zb),ec=xc.moduleSource,Dc=hd.ObjectPackage.withId(Zb,Ic),tc.yield(Dc.ensureExistance(),2);case 2:return Ta=Dc,hc=Ta.objectModule,Eb=hc.systemModule,tc.yield(Eb.load({format:"esm"}),3);case 3:return tc.yield(Eb.changeSource(ec),
4);case 4:return tc.return(Dc)}})};$jscomp.global.Object.defineProperties(Jd.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this._id}},name:{configurable:!0,enumerable:!0,get:function(){return this.id}},System:{configurable:!0,enumerable:!0,get:function(){return this.options.System}},baseURL:{configurable:!0,enumerable:!0,get:function(){return this.options.baseURL}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.baseURL+("/"+this.id)}},config:{configurable:!0,
enumerable:!0,get:function(){return{name:this.name,version:"0.1.0",lively:{isObjectPackage:!0}}}},systemPackage:{configurable:!0,enumerable:!0,get:function(){return hd.lookupPackage(this.System,this.packageURL,!0).pkg}},objectModule:{configurable:!0,enumerable:!0,get:function(){return this._objectModule||(this._objectModule=new hd.ObjectModule("index.js",this))}},objectClass:{configurable:!0,enumerable:!0,get:function(){return this.objectModule.objectClass}}});$jscomp.global.Object.defineProperties(Jd,
{packageStore:{configurable:!0,enumerable:!0,get:function(){return this._packageStore||(this._packageStore=hd._packageStore)}}});Sa("default",Jd);hd.ObjectPackage=Jd;var de=function(Zb,Ic){if(!Zb)throw Error("ObjectModule needs package!");if(!Ic)throw Error("ObjectModule needs package!");this._moduleName=Zb;this._objectPackage=Ic};de.prototype.read=function(){return this.resource.read()};de.prototype.write=function(Zb){return this.resource.write(Zb)};de.prototype.ensureExistance=function(){var Zb=
this,Ic,Ad;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jc){switch(Jc.nextAddress){case 1:return Ic=Zb.resource,Jc.yield(Ic.exists(),2);case 2:if(Jc.yieldResult){Jc.jumpTo(3);break}return Jc.yield(Ic.write("'format esm';\n"),4);case 4:Ad={},Zb.System.config({meta:(Ad[Zb.url]={format:"esm"},Ad)});case 3:return Jc.return(Zb)}})};de.prototype.adoptObject=function(Zb,Ic){var Ad=this,Jc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zd){if(1==zd.nextAddress)return Ad.objectClass===
Zb.constructor?zd.return():zd.yield(Ad.ensureObjectClass(Zb.constructor,Ic),2);Jc=zd.yieldResult;hd.adoptObject(Zb,Jc);zd.jumpToEnd()})};de.prototype.ensureObjectClass=function(Zb,Ic){var Ad=this,Jc=this.objectClass;return Jc&&Jc.prototype.__proto__===Zb.prototype?Jc:Promise.resolve(this.ensureObjectClassSource(Zb,Ic)).then(function(zd){var Mb=zd.source,mb=zd.moduleId,Bc=zd.className,xc=zd.bindings,ec=Ad.System;zd=hd.module(ec,mb);if(xc)for(var Dc in xc)zd.define(Dc,xc[Dc]);Mb=hd.runEval(Mb,{classTransform:hd.classToFunctionTransform,
sync:!0,targetModule:mb,System:ec});if(Mb.isError)throw Mb.value;Mb=zd.recorder[Bc];if(!Mb)throw Error("Failed to define class "+Bc+" in "+mb);return Mb})};de.prototype.ensureObjectClassSource=function(Zb,Ic){return this.createDefaultClassDeclaration(Zb,Ic)};de.prototype.createDefaultClassDeclaration=function(Zb,Ic){Zb=void 0===Zb?Object:Zb;Ic=void 0===Ic?!1:Ic;var Ad=this,Jc,zd,Mb,mb,Bc,xc,ec,Dc,Ta,hc,Eb,tc,Ec,ad,td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){switch(fc.nextAddress){case 1:Jc=
Ad;zd=Jc.System;Mb=Jc.systemModule;mb=Jc.objectPackage;Ic=Ic||hd.string.capitalize(hd.toJsIdentifier(mb.id));Bc=Zb[Symbol.for("__LivelyClassName__")];xc=!Bc;ec=hd.globalClasses.includes(Zb);Dc="";Ta=null;if(xc){Bc="__anonymous_superclass__";hc={};Ta=(hc[Bc]=Zb,hc);fc.jumpTo(2);break}if(ec){fc.jumpTo(2);break}return fc.yield(hd.ExportLookup.findExportOfValue(Zb,zd),4);case 4:(Eb=fc.yieldResult)?(tc=hd.ImportInjector.run(zd,Mb.id,Mb.package(),"",Eb),Ec=tc.standaloneImport,Dc+=Ec+"\n\n"):(ad={},Ta=(ad[Bc]=
Zb,ad));case 2:return Ic===Bc&&(Ic="Object"+Ic),td="Object"===Bc?"class "+Ic+" {}\n":"class "+Ic+" extends "+Bc+" {}\n",Dc+="export default "+td+"\n",fc.yield(Mb.changeSource(Dc),5);case 5:return fc.yield(Mb.load(),6);case 6:return fc.return({source:Dc,className:Ic,moduleId:Ad.url,bindings:Ta})}})};de.prototype.addScript=function(Zb,Ic,Ad){var Jc=this,zd,Mb,mb,Bc,xc,ec,Dc,Ta,hc,Eb,tc,Ec,ad,td,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zc){switch(zc.nextAddress){case 1:if(Zb.constructor===
Jc.objectClass){zd=Zb.constructor;zc.jumpTo(2);break}return zc.yield(Jc.ensureObjectClass(Zb.constructor),3);case 3:zd=zc.yieldResult;case 2:Mb=zd;mb="function"===typeof Ic?String(Ic):Ic;Bc=hd.parseFunction(mb);xc=hd.RuntimeSourceDescriptor.for(Mb,Jc.System);Ad||(Ad=hd.Path("id.name").get(Bc));if(!Ad)throw Error("No name, cannot add "+hd.string.truncate(mb,30).replace(/\n/g,"")+"!");ec=hd.toJsIdentifier(Ad);console.assert("FunctionExpression"===Bc.type||"ArrowFunctionExpression"===Bc.type,"not a function expression but: "+
Bc.type);Dc=Bc.params.map(function(ac){return mb.slice(ac.start,ac.end)});Ta="BlockStatement"===Bc.body.type?mb.slice(Bc.body.start,Bc.body.end):"{ return "+mb.slice(Bc.body.start,Bc.body.end)+" }";hc=ec+"("+Dc.join(",")+") "+Ta;"ArrowFunctionExpression"===Bc.type&&(Bc.type="FunctionExpression");Eb=xc.source;tc=xc.ast;if(!tc)throw Error("cannot find class decl of "+xc.module.id);(Ec=tc.body.body.find(function(ac){return ac.key.name===ec&&!ac.static}))?Eb=Eb.slice(0,Ec.start)+hc+Eb.slice(Ec.end):(ad=
Eb.lastIndexOf("}"),td=Eb.slice(0,ad),fc=Eb.slice(ad),/\n\s*$/m.test(td)||(td+="\n"),hc=hd.string.changeIndent(hc,"  ",1),/^[ ]*\n/m.test(fc)||(fc="\n"+fc),Eb=td+hc+fc);return zc.yield(xc.changeSource(Eb),4);case 4:return zc.return({script:Mb.prototype[ec],klass:Mb,module:xc.module.id,methodName:ec})}})};$jscomp.global.Object.defineProperties(de.prototype,{objectPackage:{configurable:!0,enumerable:!0,get:function(){return this._objectPackage}},objectClass:{configurable:!0,enumerable:!0,get:function(){var Zb=
this.systemModule;return Zb.isLoaded()?Zb.System.get(Zb.id).default:null}},moduleName:{configurable:!0,enumerable:!0,get:function(){return this._moduleName}},systemModule:{configurable:!0,enumerable:!0,get:function(){return hd.module(this.System,this.url)}},System:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.System}},resource:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.resource(this.moduleName)}},url:{configurable:!0,enumerable:!0,get:function(){return this.resource.url}}});
hd.ObjectModule=de;hd.default=Jd}}});