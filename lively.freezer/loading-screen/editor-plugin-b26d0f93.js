System.register(["./__root_module__-11543d52.js","kld-intersections","./editor-plugin-96b552ff.js","./index-82fd0049.js","./index-80650824.js"],function(sa){var lb,Eb,Vb,Wb,qd,Ec,vd,Ic,Jc,Zc,$c,Fd,md,Vc,Ra,tb,dc,bc,Yc,Oc,$b,zc,Fb,Bb;return{setters:[function(pc){lb=pc.aq;Eb=pc.by;Vb=pc.bz;Wb=pc.bA;qd=pc.E;Ec=pc.ao;vd=pc.aU;Ic=pc.s;Jc=pc.a9;Zc=pc.bl;$c=pc.a4;Fd=pc._;md=pc.bB;Vc=pc.bs},function(){},function(pc){Ra=pc.p;tb=pc.d;dc=pc.a;bc=pc.r;Yc=pc.C},function(pc){Oc=pc.s},function(pc){$b=pc.localInterface;
zc=pc.systemInterfaceNamed;Fb=pc.serverInterfaceFor;Bb=pc.l2lInterfaceFor}],execute:function(){var pc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");pc.warnStyle={"border-bottom":"2px dotted orange"};pc.errorStyle={"background-color":"red"};var Pc=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),wc=qc.hasOwnProperty("JavaScriptChecker")&&"function"===typeof qc.JavaScriptChecker?qc.JavaScriptChecker:qc.JavaScriptChecker=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:"uninstall",value:function(I){var T=I.text||I;(T.markers||[]).forEach(function(ta){return ta.id.startsWith("js-checker-")&&T.removeMarker(ta)});T.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(I,T){return[].concat($jscomp.arrayFromIterable(I.embeddedMorphMap.values())).find(function(ta){return T.containsPosition(ta.anchor.position)})}},{key:"onDocumentChange",value:function(I,
T,ta){var Ca=T.document;try{var Mb=ta.parse()}catch(vb){Mb=vb}Mb&&(I=(T.markers||[]).filter(function(vb){return vb.id.startsWith("js-checker-")}),ta=ta.undeclaredVariables().map(function(vb,Ia){var Qb=vb.start;vb=vb.end;Qb=Ca.indexToPosition(Qb);vb=Ca.indexToPosition(vb);return T.addMarker({id:"js-checker-"+Ia,style:pc.warnStyle,range:{start:Qb,end:vb},type:"js-undeclared-var"})}),I.slice(ta.length).forEach(function(vb){return T.removeMarker(vb)}),Mb.parseError?(I=Mb.parseError.loc,ta=I.column,I=
I.line-1,Mb=Ca.indexToPosition(Mb.parseError.pos),ta=Mb.column,I=Mb.row,Mb={start:{column:ta-1,row:I},end:{column:ta+1,row:I}},this.hasEmbeddedMorphInRange(T,Mb)||T.addMarker({id:"js-syntax-error",range:Mb,style:pc.errorStyle,type:"js-syntax-error"})):T.removeMarker("js-syntax-error"))}}],[{key:"className",get:function(){return"JavaScriptChecker"}}],qc,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),xb=Pc=pc.JavaScriptChecker;pc.default=Pc;var db=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");db.query=Eb;db.fuzzyParse=Vb;db.acorn=Wb;db.custom=qd;var Ta=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),wc=qc.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof qc.JavaScriptNavigator?qc.JavaScriptNavigator:qc.JavaScriptNavigator=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:"ensureAST",value:function(I){return this.parse(I.textString)}},{key:"parse",value:function(I){return db.fuzzyParse(I)}},{key:"move",value:function(I,T){var ta=!!T.activeMark||!T.selection.isEmpty(),Ca=T.selection,Mb=T.positionToIndex(Ca.lead);I=this[I](T.textString,Mb);I=T.indexToPosition(I);Ca.lead=I;ta||(Ca.anchor=I);T.scrollCursorIntoView()}},{key:"forwardSexp",value:function(I){this.move("_forwardSexp",
I)}},{key:"backwardSexp",value:function(I){this.move("_backwardSexp",I)}},{key:"backwardUpSexp",value:function(I){this.move("_backwardUpSexp",I)}},{key:"forwardDownSexp",value:function(I){this.move("_forwardDownSexp",I)}},{key:"_forwardSexp",value:function(I,T){I=this.parse(I);I=db.custom.findNodesIncluding(I,T).reverse().find(function(Ca){return Ca.end!==T});if(!I)return T;if("BlockStatement"===I.type){var ta=I.body.find(function(Ca){return Ca.start>T});if(ta)return ta.start}return I.end}},{key:"_backwardSexp",
value:function(I,T){I=this.parse(I);I=db.custom.findNodesIncluding(I,T).reverse().find(function(Ca){return Ca.start!==T});if(!I)return T;if("BlockStatement"===I.type){var ta=I.body.slice().reverse().find(function(Ca){return Ca.end<T});if(ta)return ta.end}return I?I.start:T}},{key:"_backwardUpSexp",value:function(I,T){I=this.parse(I);return(I=db.custom.findNodesIncluding(I,T).reverse().find(function(ta){return ta.start!==T}))?I.start:T}},{key:"_forwardDownSexp",value:function(I,T){I=this.parse(I);
return(I=db.custom.findNodeAfter(I,T,function(ta,Ca){return Ca.start>T}))?I.node.start:T}},{key:"markDefun",value:function(I){var T=this.rangeForFunctionOrDefinition(I.textString,[I.positionToIndex(I.selection.range.start),I.positionToIndex(I.selection.range.end)]);T&&I.execCommand("expandRegion",{start:T[0],end:T[1]})}},{key:"rangeForNodesMatching",value:function(I,T,ta){I=this.parse(I);return(T=db.custom.findNodesIncluding(I,T).reverse().find(ta))?[T.start,T.end]:null}},{key:"rangeForFunctionOrDefinition",
value:function(I,T){var ta=T[0]===T[1];return this.rangeForNodesMatching(I,T[1],function(Ca){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(Ca.type)&&(ta&&Ca.end!==T[1]||!ta&&Ca.start<T[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(I,T){"number"!==typeof T&&(T=I.positionToIndex(T));I=this.ensureAST(I);var ta=db.query.nodesAt(T,I).reverse(),Ca=ta.find(function(vb){return"Identifier"===vb.type});if(!Ca&&((ta=ta[0])&&ta.type.includes("Specifier")&&
ta.local&&"Identifier"===ta.local.type&&(Ca=ta.local),!Ca))return;T=(ta=db.query.findDeclarationClosestToIndex(I,Ca.name,T))?db.query.scopeAtIndex(I,ta.start):db.query.scopeAtIndex(I,T);var Mb=db.query.findReferencesAndDeclsInScope(T,Ca.name).refs;return{parsed:I,scope:T,id:Ca,name:Ca.name,decl:ta,refs:Mb}}},{key:"expandRegion",value:function(I,T,ta,Ca){function Mb(Kc){Kc=I.positionToIndex({column:0,row:Ia.row});return{range:[Kc+Qb.start,Kc+Qb.start+Qb.value.length],prev:Ca}}var vb=Ca.range[0]!==
Ca.range[1],Ia=I.indexToPosition(Ca.range[0]),Qb=I.tokenAt(Ia);if(!vb&&Qb&&["keyword","identifier"].includes(Qb.type))return Mb();ta=ta||this.parse(T);T=db.query.nodesAtIndex(ta,Ca.range[0]).reverse().find(function(Kc){return Kc.start<Ca.range[0]||Kc.end>Ca.range[1]});if(!T)return Ca;ta=T.start;vb=T.end;return"Literal"===T.type&&(T.raw||"").match(/^['"`]/)&&Ca.range[0]!==T.start&&Ca.range[1]!==T.end&&(T.start+1<Ca.range[0]||T.end-1>Ca.range[1])?{range:[ta+1,vb-1],prev:Ca}:{range:[ta,vb],prev:Ca}}},
{key:"contractRegion",value:function(I,T,ta,Ca){return Ca.prev||Ca}}],[{key:"className",get:function(){return"JavaScriptNavigator"}}],qc,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);Pc=Ta=db.JavaScriptNavigator;db.default=Ta;var cb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");
cb.addIndexToTextPos=function(Tb,qc,wc){return Tb.indexToPosition(Tb.positionToIndex(qc)+wc)};cb.connect=Ec;cb.disconnect=vd;cb.string=Ic;cb.KeyHandler=Jc;cb.Range=Zc;Ta=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),wc=qc.hasOwnProperty("Snippet")&&"function"===typeof qc.Snippet?qc.Snippet:qc.Snippet=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:Symbol.for("lively-instance-initialize"),
value:function(I){I=void 0===I?{trigger:null,expansion:""}:I;var T=I.expansion;this.trigger=I.trigger;this.expansion=T;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(I){this.isExpanding&&(this.textMorph=I,cb.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(I){this.isExpanding&&(cb.disconnect(I,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var I=
this.expansionState,T=I.startAnchor,ta=I.endAnchor;I.isExpanding?cb.Range.fromPositions(T.position,ta.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var I=this.textMorph;if(I){var T=this.expansionState||{},ta=T.marker,Ca=T.startAnchor,Mb=T.endAnchor;T=T.steps;Ca&&I.removeAnchor(Ca);Mb&&I.removeAnchor(Mb);ta&&I.removeMarker(ta);T.forEach(function(vb){return I.removeAnchor(vb.anchor)})}this.expansionState=
{stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};I&&I.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(I){var T=[],ta=0;cb.string.reMatches(I,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(Ca){var Mb=Ca.start,vb=Ca.end;Ca=Ca.match;var Ia="";Ca.startsWith("${")?(Ia=$jscomp.makeIterator(Ca.match(/^\$\{([0-9]+):([^\}]*)\}/)),Ia.next(),Ca=Ia.next().value,Ia=Ia.next().value,Ca=Number(Ca)):
Ca=Number(Ca.replace(/^\$/,""));I=I.slice(0,Mb-ta)+Ia+I.slice(vb-ta);T[Ca]={index:Mb-ta,prefill:Ia,anchor:null};ta+=vb-Mb-Ia.length});return{steps:T,expansion:I}}},{key:"expandAtCursor",value:function(I){var T=I.selection,ta=I.cursorPosition.column,Ca=this.expansion;this.trigger&&(ta-=this.trigger.length);if(ta=Math.max(0,ta))Ca=cb.string.lines(Ca),Ca=[Ca[0]].concat($jscomp.arrayFromIterable(Ca.slice(1).map(function(Rc){return cb.string.indent(Rc," ",ta)}))),Ca=Ca.join("\n");var Mb=this.createExpansionSteps(Ca);
Ca=Mb.expansion;Mb=Mb.steps;this.trigger&&T.growLeft(this.trigger.length);T.text=Ca;var vb=T.start;Ca=T.end;T.collapseToEnd();if(Mb.length){var Ia=cb.string.newUUID();Mb.forEach(function(Rc,xc){return Rc.anchor=I.addAnchor(Object.assign({id:"snippet-step-"+xc+"-"+Ia},cb.addIndexToTextPos(I,vb,Rc.index)))});var Qb=I.addAnchor(Object.assign({id:"snippet-start-"+Ia},vb,{insertBehavior:"stay"})),Kc=I.addAnchor(Object.assign({id:"snippet-end-"+Ia},Ca));this.expansionState={marker:I.addMarker({id:"snippet-marker-"+
Ia,get range(){return{start:Qb.position,end:Kc.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Qb,endAnchor:Kc,stepIndex:0,steps:Mb,isExpanding:!0};I.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var I=this.expansionState,T=I.steps,ta=this.textMorph;if(I.isExpanding&&ta){ta=ta.selection;I=T[I.stepIndex];var Ca=I.prefill;ta.lead=ta.anchor=
I.anchor.position;ta.growRight(Ca.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=T.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(I,T){T=I.positionToIndex(I.cursorPosition);return I.textString.slice(T-this.trigger.length,T)===this.trigger}},{key:"tryTrigger",value:function(I,T){if(!this.canExpand(I,I.cursorPosition))return!1;this.expandAtCursor(I);return!0}},{key:"getCommands",value:function(I){var T=
this;return I.concat([{name:"[snippet] next expansion step",exec:function(ta){T.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(ta){T.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(I){return I.concat(cb.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:"className",get:function(){return"Snippet"}}],qc,{pathInPackage:function(){return"text/snippets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);cb.Snippet=Ta;cb.Snippet=Ta;cb.Snippet=Ta;var la=[{name:"get snippets",exec:function(Tb){return Tb.pluginCollect("getSnippets",[])}}];cb.snippetCommands=la;cb.snippetCommands=la;cb.snippetCommands=la;var La=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");La.buildEvalOpts=function(Tb,qc){return Tb.plugins.find(function(wc){return wc.isJSEditorPlugin}).sanatizedJsEnv(qc)};
La.Snippet=Ta;la=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=qc.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof qc.ModuleTopLevelVarCompleter?qc.ModuleTopLevelVarCompleter:qc.ModuleTopLevelVarCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:"compute",value:function(I,T){var ta,Ca,Mb,vb,Ia,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){if(1==
Kc.nextAddress){Ca=(ta=I.pluginFind(function(Rc){return Rc.isJSEditorPlugin}))&&ta.systemInterface();if(!Ca)return Kc.return([]);Mb=La.buildEvalOpts(I);vb=Mb.targetModule;return"local"===Ca.name?(Ia=Object.getOwnPropertyNames(Ca.getModule(vb).recorder),Kc.jumpTo(2)):Kc.yield(Ca.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
vb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=Kc.nextAddress){Qb=Kc.yieldResult;if(Qb.isError)return Kc.return([]);Ia=JSON.parse(Qb.value)}Ia=Ia.filter(function(Rc){return!Rc.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Rc)});return Kc.return(Ia.map(function(Rc){return{priority:1100,completion:Rc}}))})}}],[{key:"className",get:function(){return"ModuleTopLevelVarCompleter"}}],qc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:222,
end:1678})}(void 0);La.ModuleTopLevelVarCompleter=la;La.ModuleTopLevelVarCompleter=la;La.ModuleTopLevelVarCompleter=la;la=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=qc.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof qc.DynamicJavaScriptCompleter?qc.DynamicJavaScriptCompleter:qc.DynamicJavaScriptCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,
Tb,[{key:"isValidPrefix",value:function(I){return/\.[a-z0-9_]*$/i.test(I)}},{key:"isMethodCallCompletion",value:function(I){return I.endsWith(")")&&0<I.indexOf("(")}},{key:"isValidIdentifier",value:function(I){if("string"!==typeof I)return!1;this.isMethodCallCompletion(I)&&(I=I.slice(0,I.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(I)?!0:!1}},{key:"wrapInBrackets",value:function(I){if(!isNaN(Number(I))||I.startsWith("Symbol."))return"["+I+"]";var T="";this.isMethodCallCompletion(I)&&(T=I.slice(I.indexOf("(")),
I=I.slice(0,I.indexOf("(")));return'["'+I.replace(/"/g,'\\"')+'"]'+T}},{key:"compute",value:function(I){var T=this,ta,Ca,Mb,vb,Ia,Qb,Kc,Rc,xc,Fa,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){if(1==$a.nextAddress){ta=I.selection;ta.isEmpty()?(Ca=I.getLine(ta.lead.row),Ca=Ca.slice(Ca.lastIndexOf(":")+1,ta.lead.column)):Ca=ta.text.slice(Math.max(0,ta.text.indexOf(":")),0);if(!T.isValidPrefix(Ca))return $a.return([]);vb=(Mb=I.pluginFind(function(Pa){return Pa.isJSEditorPlugin}))&&
Mb.systemInterface();if(!vb)return $a.return([]);Ia=La.buildEvalOpts(I);return $a.yield(vb.dynamicCompletionsForPrefix(Ia.targetModule,Ca,Ia),2)}Qb=$a.yieldResult;Kc=Qb.isError;Rc=Qb.value;xc=Qb.completions;Fa=Qb.prefix;if(Kc)return console.warn("javascript completer encountered error: "+(Rc.stack||Rc)),$a.return([]);xc.reduce(function(Pa,Oa){Oa=$jscomp.makeIterator(Oa);Oa.next();Oa=Oa.next().value;return Pa+Oa.length},0);nc=xc.reduce(function(Pa,Oa,Kb){Oa=$jscomp.makeIterator(Oa);var Ib=Oa.next().value;
Oa=Oa.next().value;return Pa.concat(Oa.map(function(cd){var Od=T.isValidIdentifier(cd);return{info:Ib,completion:cd,prefix:Od?Fa:"."+Fa,customInsertionFn:Od?T.isMethodCallCompletion(cd)?function(Zd,Te,Qc,Xd){Te=Xd.start;Xd=Xd.end;Zd=Zd.replace(/\((.*)\)/,function(kd){return"("+kd.slice(1,-1).split(", ").map(function(Ab,da){return"${"+da+":"+Ab+"}"}).join(", ")+")"});Zd=new La.Snippet({expansion:Zd});Qc.replace({start:Te,end:Xd},"");Zd.expandAtCursor(Qc)}:null:function(Zd,Te,Qc,Xd){Zd=Xd.start;Xd=
Xd.end;Te={row:Zd.row,column:Zd.column-1};Xd="."===Qc.textInRange({start:Te,end:Zd})?{start:Te,end:Xd}:{start:Zd,end:Xd};Qc.replace(Xd,T.wrapInBrackets(cd))}}}))},[]);nc.forEach(function(Pa,Oa){return Object.assign(Pa,{priority:2E3+nc.length-Oa})});return $a.return(nc)})}}],[{key:"className",get:function(){return"DynamicJavaScriptCompleter"}}],qc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);La.DynamicJavaScriptCompleter=la;La.DynamicJavaScriptCompleter=la;La.DynamicJavaScriptCompleter=la;La.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
la=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),wc=qc.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof qc.JavaScriptKeywordCompleter?qc.JavaScriptKeywordCompleter:qc.JavaScriptKeywordCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:"compute",value:function(I,T){return La.keywords.map(function(ta){return{completion:ta,priority:0}})}}],
[{key:"className",get:function(){return"JavaScriptKeywordCompleter"}}],qc,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);La.JavaScriptKeywordCompleter=la;La.JavaScriptKeywordCompleter=la;La.JavaScriptKeywordCompleter=la;la=[new La.DynamicJavaScriptCompleter,new La.JavaScriptKeywordCompleter,
new La.ModuleTopLevelVarCompleter];La.completers=la;La.completers=la;La.completers=la;var fb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");fb.Snippet=Ta;var pb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],
["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["fun","function ${0:functionName}($1) {$2}"],
["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];fb.snippets=pb;fb.snippets=pb;fb.snippets=pb;var Cb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");Cb.getEvalEnv=function(Tb){return(Tb=Tb.pluginFind(function(qc){return qc.isJSEditorPlugin}))?Tb.evalEnvironment:null};Cb.setEvalEnv=function(Tb,qc){(Tb=Tb.pluginFind(function(wc){return wc.isJSEditorPlugin}))&&Object.assign(Tb.evalEnvironment,qc);return Tb.evalEnvironment};Cb.pToI=function(Tb,qc){return Tb.positionToIndex(qc)};
Cb.iToP=function(Tb,qc){return Tb.indexToPosition(qc)};Cb.arr=$c;Cb.promise=Fd;Cb.string=Ic;Cb.show=Oc;Cb.Range=Zc;Cb.query=Eb;Cb.BaseVisitor=md;fb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(Tb,qc){qc=void 0===qc?{varName:null,position:null}:qc;var wc,I,T,ta,Ca,Mb,vb,Ia,Qb,Kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rc){switch(Rc.nextAddress){case 1:wc=qc;I=wc.varName;T=
wc.position;if(!I){T||(T=Tb.cursorPosition);ta=Tb.pluginInvokeFirst("getNavigator");Ca=ta.ensureAST(Tb);Mb=Cb.query.nodesAt(Tb.positionToIndex(T),Ca).reverse().find(function(xc){return"Identifier"===xc.type});if(!Mb)return Tb.showError(Error("no identifier found!")),Rc.return(!0);I=Mb.name}qc=Tb.pluginFind(function(xc){return xc.isJSEditorPlugin}).sanatizedJsEnv();vb='lively.modules.module("'+qc.targetModule+'").undefine("'+I+'")';Rc.setCatchFinallyBlocks(2);return Rc.yield(Tb.doEval(null,qc,vb),
4);case 4:Ia=Rc.yieldResult;Qb=Ia.error?Ia.error:Ia.isError?Ia.value:null;Rc.leaveTryBlock(3);break;case 2:Qb=Kc=Rc.enterCatchBlock();case 3:return Qb?Tb.showError(Qb):Tb.setStatusMessage(I+" undefined"),Rc.return(!0)}})}},{name:"change doitContext",exec:function(Tb){var qc,wc,I,T,ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return qc=$jscomp,wc=qc.makeIterator,Ca.yield(Tb.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(Mb){return!Mb.isUsedAsEpiMorph()}}),2);I=wc.call(qc,Ca.yieldResult);if(T=I.next().value)ta="reset"===T,Tb.doitContext=ta?null:T,Tb.setStatusMessage(ta?"doitContext is now\n"+T:"doitContext reset");return Ca.return(!0)})}},{name:"change eval backend",exec:function(Tb,qc){qc=void 0===qc?{backend:void 0}:qc;var wc,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return wc=qc,I=wc.backend,void 0!==I?T.jumpTo(2):T.yield(Tb.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=T.nextAddress&&(I=T.yieldResult,!I))return Tb.setStatusMessage("Canceled"),T.return(!0);"local"===I&&(I=null);Tb.setStatusMessage("Eval backend is now "+(I||"local"));return T.return(Cb.setEvalEnv(Tb,{remote:I}))})}},{name:"copy current module name to clipboard",exec:function(Tb){var qc=Tb.evalEnvironment.targetModule;Tb.setStatusMessage(qc?qc:"Cannot find module name");Tb.env.eventDispatcher.killRing.add(Tb);Tb.env.eventDispatcher.doCopy(qc);return!0}}];
Cb.jsEditorCommands=fb;Cb.jsEditorCommands=fb;Cb.jsEditorCommands=fb;var Wa=[{name:"[javascript] list errors and warnings",exec:function(Tb){var qc,wc,I,T,ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress){qc=(Tb.markers||[]).filter(function(Mb){Mb=Mb.type;return"js-undeclared-var"===Mb||"js-syntax-error"===Mb});if(!qc.length)return Cb.show("no warnings or errors"),Ca.return(!0);wc=qc.map(function(Mb){var vb=Mb.range;return{isListItem:!0,string:"["+Mb.type.split("-").slice(1).join(" ")+
"] "+Tb.textInRange(vb),value:vb}});return Ca.yield(Tb.world().filterableListPrompt("jump to warning or error",wc),2)}I=Ca.yieldResult;T=$jscomp.makeIterator(I.selected);if(ta=T.next().value)Tb.saveMark(),Tb.selection=ta,Tb.centerRow(ta.start.row);return Ca.return(!0)})}},{name:"[javascript] inject import",exec:function(Tb,qc){qc=void 0===qc?{gotoImport:!1,insertImportAtCursor:!0}:qc;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){switch(ta.nextAddress){case 1:return ta.yield(Cb.promise.delay(0),
2);case 2:return ta.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return wc=ta.yieldResult,I=wc.interactivelyInjectImportIntoText,ta.yield(I(Tb,qc),4);case 4:return(T=ta.yieldResult)||Tb.setStatusMessage("canceled"),ta.return(T)}})}},{name:"[javascript] fix undeclared variables",exec:function(Tb,qc){qc=void 0===qc?{ignore:[],autoApplyIfSingleChoice:!1,requester:Tb}:qc;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==ta.nextAddress)return ta.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=ta.nextAddress)return wc=ta.yieldResult,I=wc.interactivlyFixUndeclaredVariables,ta.yield(I(Tb,qc),3);T=ta.yieldResult;Tb.focus();return ta.return(T)})}},{name:"[javascript] remove unused imports",exec:function(Tb,qc){qc=void 0===qc?{query:!0}:qc;var wc,I,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ta){if(1==ta.nextAddress)return ta.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=ta.nextAddress)return wc=ta.yieldResult,I=wc.cleanupUnusedImports,ta.yield(I(Tb,
qc),3);T=ta.yieldResult;Tb.setStatusMessage(T);return ta.return(!0)})}},{name:"[javascript] eslint report",exec:function(Tb){var qc,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);qc=I.yieldResult;wc=qc.default;try{return I.return(wc.reportOnMorph(Tb))}catch(T){Tb.showError(T)}I.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(Tb){var qc,wc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);qc=I.yieldResult;wc=qc.default;try{return I.return(wc.previewFixesOnMorph(Tb))}catch(T){Tb.showError(T)}I.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(Tb,qc,wc){function I($a,Pa){Pa||(Pa=Ia($a,{allowReturnOutsideFunction:!0}));var Oa=Cb.string.lineRanges($a),Kb=$a.split("\n"),Ib=[],cd=new Cb.BaseVisitor,Od=cd.visitVariableDeclaration;cd.visitVariableDeclaration=function(Xd,
kd,Ab){if(1<Xd.declarations.length)for(var da=Cb.string.findLineWithIndexInLineRanges(Oa,Xd.start),qa=Xd.declarations[0].start-Oa[da][0],ub={},H=1;H<Xd.declarations.length;ub={$jscomp$loop$prop$actionType$2276:ub.$jscomp$loop$prop$actionType$2276,$jscomp$loop$prop$arg$2277:ub.$jscomp$loop$prop$arg$2277},H++){var ia=Xd.declarations[H],Ba=Cb.string.findLineWithIndexInLineRanges(Oa,ia.start);if(da!==Ba){var rb=Kb[Ba].match(/\s*/)[0].length;rb=qa-rb;0!==rb&&(ia=Cb.string.findLineWithIndexInLineRanges(Oa,
ia.end),ub.$jscomp$loop$prop$actionType$2276=0<rb?"insert":"delete",ub.$jscomp$loop$prop$arg$2277=0<rb?" ".repeat(rb):-rb,Ib.push.apply(Ib,$jscomp.arrayFromIterable(Cb.arr.range(Ba,ia).map(function(sc){return function(yc){return[sc.$jscomp$loop$prop$actionType$2276,Oa[yc][0],sc.$jscomp$loop$prop$arg$2277]}}(ub)))))}}return Od.call(cd,Xd,kd,Ab)};cd.accept(Pa,{},[]);for(Pa=Ib.length;Pa--;){var Zd=$jscomp.makeIterator(Ib[Pa]),Te=Zd.next().value,Qc=Zd.next().value;Zd=Zd.next().value;"insert"===Te?$a=
$a.slice(0,Qc)+Zd+$a.slice(Qc):"delete"===Te&&($a=$a.slice(0,Qc)+$a.slice(Qc+Zd))}return $a}var T,ta,Ca,Mb,vb,Ia,Qb,Kc,Rc,xc,Fa,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function($a){switch($a.nextAddress){case 1:return T=wc?wc:Math.floor(Tb.width/Tb.defaultCharExtent().width),qc=Object.assign({printWidth:T,tabWidth:2,useTabs:!1,bracketSpacing:!1},qc),ta=lively.modules.module,Ca=System.normalizeSync("prettier/standalone.js"),$a.yield(ta(Ca).load({format:"global",instrument:!1}),2);case 2:return Mb=
$a.yieldResult,$a.yield(ta("lively.ast/lib/acorn-extension.js").load(),3);case 3:return $a.yield(ta("lively.ast").load(),4);case 4:return vb=$a.yieldResult,Ia=vb.parse,$a.yield(ta("lively.ast/lib/query.js").load(),5);case 5:return $a.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Qb=$a.yieldResult,Kc=Tb.selection.isEmpty()?Tb.documentRange:Tb.selection.range,Rc=Tb.positionToIndex(Kc.start),xc=Tb.positionToIndex(Kc.end),Fa=Mb.format(Tb.textString,Object.assign({},
qc,{rangeStart:Rc,rangeEnd:xc,parser:function(Pa,Oa,Kb){return Ia(Pa,{allowReturnOutsideFunction:!0})}})),Tb.undoManager.group(),nc=Qb.diffChars(Tb.textString,Fa),Tb.applyJsDiffPatch(nc),Tb.selection.text=I(Tb.selection.text),Tb.undoManager.group(),$a.return(!0)}})}}];Cb.jsIdeCommands=Wa;Cb.jsIdeCommands=Wa;Cb.jsIdeCommands=Wa;var Xa=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(Tb,qc){qc=Tb.pluginInvokeFirst("getNavigator");if(!qc)return!0;qc=qc.resolveIdentifierAt(Tb,Tb.cursorPosition);
if(!qc||!qc.id)return Cb.show("No symbol identifier selected"),!0;if(!qc.decl)return Cb.show("Cannot find declaration of "+qc.name),!0;Tb.saveMark();Tb.selection={start:Tb.indexToPosition(qc.decl.start),end:Tb.indexToPosition(qc.decl.end)};Tb.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(Tb){Tb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(Tb){Tb.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(Tb,qc){qc=void 0===qc?{direction:null}:qc;var wc=Tb.pluginInvokeFirst("getNavigator");if(!wc)return!0;wc=wc.resolveIdentifierAt(Tb,
Tb.cursorPosition);if(!wc||!wc.refs)return Cb.show("No symbol identifier selected"),!0;var I=Tb.selection;wc=wc.refs.map(function(ta){var Ca=ta.end;return Cb.Range.fromPositions(Cb.iToP(Tb,ta.start),Cb.iToP(Tb,Ca))}).concat(wc.decl?Cb.Range.fromPositions(Cb.iToP(Tb,wc.decl.start),Cb.iToP(Tb,wc.decl.end)):[]).sort(Cb.Range.compare);if(!wc.length)return!0;var T=wc.map(String).indexOf(String(I.range));if("next"===qc.direction||"prev"===qc.direction)-1===T&&wc.length?wc=[wc[0]]:(qc=T+("next"===qc.direction?
1:-1),0>qc?qc=wc.length-1:qc>=wc.length&&(qc=0),wc=[wc[qc]]);wc.forEach(function(ta){var Ca=I.selections.findIndex(function(vb){return vb.range.equals(ta)}),Mb=I.selections.length-1;-1<Ca?Cb.arr.swap(I.selections,Ca,Mb):I.addRange(ta,!1)});I.mergeSelections();return!0}}];Cb.astEditorCommands=Xa;Cb.astEditorCommands=Xa;Cb.astEditorCommands=Xa;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var zb=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
zb.expressionAllowed=function(Tb,qc,wc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(qc.lastType)||"quasi"==qc.lastType&&/\{\s*$/.test(Tb.string.slice(0,Tb.pos-(wc||0)))};zb.passIndent=Ra;zb.defineMode=tb;zb.defineMIME=dc;zb.registerHelper=bc;zb.defaultConfig={indentUnit:2};zb.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};zb.defineMode("javascript",
function(Tb,qc){function wc(Sa,Xc,Wd){Bj=Sa;Bh=Wd;return Xc}function I(Sa,Xc){var Wd=Sa.next();if('"'==Wd||"'"==Wd)return Xc.tokenize=T(Wd),Xc.tokenize(Sa,Xc);if("."==Wd&&Sa.match(/^\d+(?:[eE][+\-]?\d+)?/))return wc("number","number");if("."==Wd&&Sa.match(".."))return wc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(Wd))return wc(Wd);if("="==Wd&&Sa.eat(">"))return wc("=>","operator");if("0"==Wd&&Sa.eat(/x/i))return Sa.eatWhile(/[\da-f]/i),wc("number","number");if("0"==Wd&&Sa.eat(/o/i))return Sa.eatWhile(/[0-7]/i),
wc("number","number");if("0"==Wd&&Sa.eat(/b/i))return Sa.eatWhile(/[01]/i),wc("number","number");if(/\d/.test(Wd))return Sa.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),wc("number","number");if("/"==Wd){if(Sa.eat("*"))return Xc.tokenize=ta,ta(Sa,Xc);if(Sa.eat("/"))return Sa.skipToEnd(),wc("comment","comment");if(zb.expressionAllowed(Sa,Xc,1)){a:for(var Td=Xc=!1;null!=(Wd=Sa.next());){if(!Xc){if("/"==Wd&&!Td)break a;"["==Wd?Td=!0:Td&&"]"==Wd&&(Td=!1)}Xc=!Xc&&"\\"==Wd}Sa.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return wc("regexp","string-2")}Sa.eatWhile(yk);return wc("operator","operator",Sa.current())}if("`"==Wd)return Xc.tokenize=Ca,Ca(Sa,Xc);if("#"==Wd)return Sa.skipToEnd(),wc("error","error");if(yk.test(Wd))return">"==Wd&&Xc.lexical&&">"==Xc.lexical.type||Sa.eatWhile(yk),wc("operator","operator",Sa.current());if(Mj.test(Wd))return Sa.eatWhile(Mj),Sa=Sa.current(),(Wd=lg.propertyIsEnumerable(Sa)&&lg[Sa])&&"."!=Xc.lastType?wc(Wd.type,Wd.style,Sa):wc("variable","variable",Sa)}function T(Sa){return function(Xc,
Wd){var Td=!1,Hc;if(Kh&&"@"==Xc.peek()&&Xc.match(Tj))return Wd.tokenize=I,wc("jsonld-keyword","meta");for(;null!=(Hc=Xc.next())&&(Hc!=Sa||Td);)Td=!Td&&"\\"==Hc;Td||(Wd.tokenize=I);return wc("string","string")}}function ta(Sa,Xc){for(var Wd=!1,Td;Td=Sa.next();){if("/"==Td&&Wd){Xc.tokenize=I;break}Wd="*"==Td}return wc("comment","comment")}function Ca(Sa,Xc){for(var Wd=!1,Td;null!=(Td=Sa.next());){if(!Wd&&("`"==Td||"$"==Td&&Sa.eat("{"))){Xc.tokenize=I;break}Wd=!Wd&&"\\"==Td}return wc("quasi","string-2",
Sa.current())}function Mb(Sa,Xc){Xc.fatArrowAt&&(Xc.fatArrowAt=null);var Wd=Sa.string.indexOf("=>",Sa.start);if(!(0>Wd)){if(gj){var Td=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Sa.string.slice(Sa.start,Wd));Td&&(Wd=Td.index)}Td=0;var Hc=!1;for(--Wd;0<=Wd;--Wd){var dg=Sa.string.charAt(Wd),ji="([{}])".indexOf(dg);if(0<=ji&&3>ji){if(!Td){++Wd;break}if(0==--Td){"("==dg&&(Hc=!0);break}}else if(3<=ji&&6>ji)++Td;else if(Mj.test(dg))Hc=!0;else{if(/["'\/]/.test(dg))return;if(Hc&&!Td){++Wd;break}}}Hc&&
!Td&&(Xc.fatArrowAt=Wd)}}function vb(Sa,Xc,Wd,Td,Hc,dg){this.indented=Sa;this.column=Xc;this.type=Wd;this.prev=Hc;this.info=dg;null!=Td&&(this.align=Td)}function Ia(){for(var Sa=arguments.length-1;0<=Sa;Sa--)$e.cc.push(arguments[Sa])}function Qb(){Ia.apply(null,arguments);return!0}function Kc(Sa){function Xc(Td){for(;Td;Td=Td.next)if(Td.name==Sa)return!0;return!1}var Wd=$e.state;$e.marked="def";Wd.context?Xc(Wd.localVars)||(Wd.localVars={name:Sa,next:Wd.localVars}):!Xc(Wd.globalVars)&&qc.globalVars&&
(Wd.globalVars={name:Sa,next:Wd.globalVars})}function Rc(){$e.state.context={prev:$e.state.context,vars:$e.state.localVars};$e.state.localVars=ll}function xc(){$e.state.localVars=$e.state.context.vars;$e.state.context=$e.state.context.prev}function Fa(Sa,Xc){var Wd=function(){var Td=$e.state,Hc=Td.indented;if("stat"==Td.lexical.type)Hc=Td.lexical.indented;else for(var dg=Td.lexical;dg&&")"==dg.type&&dg.align;dg=dg.prev)Hc=dg.indented;Td.lexical=new vb(Hc,$e.stream.column(),Sa,null,Td.lexical,Xc)};
Wd.lex=!0;return Wd}function nc(){var Sa=$e.state;Sa.lexical.prev&&(")"==Sa.lexical.type&&(Sa.indented=Sa.lexical.indented),Sa.lexical=Sa.lexical.prev)}function $a(Sa){function Xc(Wd){return Wd==Sa?Qb():";"==Sa?Ia():Qb(Xc)}return Xc}function Pa(Sa,Xc){return"var"==Sa?Qb(Fa("vardef",Xc.length),vc,$a(";"),nc):"keyword a"==Sa?Qb(Fa("form"),Ib,Pa,nc):"keyword b"==Sa?Qb(Fa("form"),Pa,nc):"{"==Sa?Qb(Fa("}"),Ke,nc):";"==Sa?Qb():"if"==Sa?("else"==$e.state.lexical.info&&$e.state.cc[$e.state.cc.length-1]==
nc&&$e.state.cc.pop()(),Qb(Fa("form"),Ib,Pa,nc,va)):"function"==Sa?Qb(ib):"for"==Sa?Qb(Fa("form"),Ka,Pa,nc):"variable"==Sa?gj&&"type"==Xc?($e.marked="keyword",Qb(Md,$a("operator"),Md,$a(";"))):Qb(Fa("stat"),ia):"switch"==Sa?Qb(Fa("form"),Ib,$a("{"),Fa("}","switch"),Ke,nc,nc):"case"==Sa?Qb(Oa,$a(":")):"default"==Sa?Qb($a(":")):"catch"==Sa?Qb(Fa("form"),Rc,$a("("),oc,$a(")"),Pa,nc,xc):"class"==Sa?Qb(Fa("form"),bd,nc):"export"==Sa?Qb(Fa("stat"),Mf,nc):"import"==Sa?Qb(Fa("stat"),Hg,nc):"module"==Sa?Qb(Fa("form"),
Fe,$a("{"),Fa("}"),Ke,nc,nc):"async"==Sa?Qb(Pa):"@"==Xc?Qb(Oa,Pa):Ia(Fa("stat"),Oa,$a(";"),nc)}function Oa(Sa){return cd(Sa,!1)}function Kb(Sa){return cd(Sa,!0)}function Ib(Sa){return"("!=Sa?Ia():Qb(Fa(")"),Oa,$a(")"),nc)}function cd(Sa,Xc){if($e.state.fatArrowAt==$e.stream.start){var Wd=Xc?da:Ab;if("("==Sa)return Qb(Rc,Fa(")"),Gd(Fe,")"),nc,$a("=>"),Wd,xc);if("variable"==Sa)return Ia(Rc,Fe,$a("=>"),Wd,xc)}Wd=Xc?Qc:Te;return zf.hasOwnProperty(Sa)?Qb(Wd):"function"==Sa?Qb(ib,Wd):"class"==Sa?Qb(Fa("form"),
cc,nc):"keyword c"==Sa||"async"==Sa?Qb(Xc?Zd:Od):"("==Sa?Qb(Fa(")"),Od,$a(")"),nc,Wd):"operator"==Sa||"spread"==Sa?Qb(Xc?Kb:Oa):"["==Sa?Qb(Fa("]"),Nj,nc,Wd):"{"==Sa?Ld(rb,"}",null,Wd):"quasi"==Sa?Ia(Xd,Wd):"new"==Sa?Qb(qa(Xc)):Qb()}function Od(Sa){return Sa.match(/[;\}\)\],]/)?Ia():Ia(Oa)}function Zd(Sa){return Sa.match(/[;\}\)\],]/)?Ia():Ia(Kb)}function Te(Sa,Xc){return","==Sa?Qb(Oa):Qc(Sa,Xc,!1)}function Qc(Sa,Xc,Wd){var Td=0==Wd?Te:Qc,Hc=0==Wd?Oa:Kb;if("=>"==Sa)return Qb(Rc,Wd?da:Ab,xc);if("operator"==
Sa)return/\+\+|--/.test(Xc)?Qb(Td):"?"==Xc?Qb(Oa,$a(":"),Hc):Qb(Hc);if("quasi"==Sa)return Ia(Xd,Td);if(";"!=Sa){if("("==Sa)return Ld(Kb,")","call",Td);if("."==Sa)return Qb(Ba,Td);if("["==Sa)return Qb(Fa("]"),Od,$a("]"),nc,Td)}}function Xd(Sa,Xc){return"quasi"!=Sa?Ia():"${"!=Xc.slice(Xc.length-2)?Qb(Xd):Qb(Oa,kd)}function kd(Sa){if("}"==Sa)return $e.marked="string-2",$e.state.tokenize=Ca,Qb(Xd)}function Ab(Sa){Mb($e.stream,$e.state);return Ia("{"==Sa?Pa:Oa)}function da(Sa){Mb($e.stream,$e.state);return Ia("{"==
Sa?Pa:Kb)}function qa(Sa){return function(Xc){return"."==Xc?Qb(Sa?H:ub):Ia(Sa?Kb:Oa)}}function ub(Sa,Xc){if("target"==Xc)return $e.marked="keyword",Qb(Te)}function H(Sa,Xc){if("target"==Xc)return $e.marked="keyword",Qb(Qc)}function ia(Sa){return":"==Sa?Qb(nc,Pa):Ia(Te,$a(";"),nc)}function Ba(Sa){if("variable"==Sa)return $e.marked="property",Qb()}function rb(Sa,Xc){if("async"==Sa)return $e.marked="property",Qb(rb);if("variable"==Sa||"keyword"==$e.style)return $e.marked="property","get"==Xc||"set"==
Xc?Qb(sc):Qb(yc);if("number"==Sa||"string"==Sa)return $e.marked=Kh?"property":$e.style+" property",Qb(yc);if("jsonld-keyword"==Sa)return Qb(yc);if("modifier"==Sa)return Qb(rb);if("["==Sa)return Qb(Oa,$a("]"),yc);if("spread"==Sa)return Qb(Oa);if(":"==Sa)return Ia(yc)}function sc(Sa){if("variable"!=Sa)return Ia(yc);$e.marked="property";return Qb(ib)}function yc(Sa){if(":"==Sa)return Qb(Kb);if("("==Sa)return Ia(ib)}function Gd(Sa,Xc,Wd){function Td(Hc,dg){return(Wd?-1<Wd.indexOf(Hc):","==Hc)?(Hc=$e.state.lexical,
"call"==Hc.info&&(Hc.pos=(Hc.pos||0)+1),Qb(function(ji,Rk){return ji==Xc||Rk==Xc?Ia():Ia(Sa)},Td)):Hc==Xc||dg==Xc?Qb():Qb($a(Xc))}return function(Hc,dg){return Hc==Xc||dg==Xc?Qb():Ia(Sa,Td)}}function Ld(Sa,Xc,Wd){for(var Td=3;Td<arguments.length;Td++)$e.cc.push(arguments[Td]);return Qb(Fa(Xc,Wd),Gd(Sa,Xc),nc)}function Ke(Sa){return"}"==Sa?Qb():Ia(Pa,Ke)}function id(Sa,Xc){if(gj){if(":"==Sa)return Qb(Md);if("?"==Xc)return Qb(id)}}function Md(Sa){if("variable"==Sa)return $e.marked="variable-3",Qb(tf);
if("string"==Sa||"number"==Sa||"atom"==Sa)return Qb(tf);if("{"==Sa)return Qb(Fa("}"),Gd(Ne,"}",",;"),nc);if("("==Sa)return Qb(Gd(yf,")"),ze)}function ze(Sa){if("=>"==Sa)return Qb(Md)}function Ne(Sa,Xc){if("variable"==Sa||"keyword"==$e.style)return $e.marked="property",Qb(Ne);if("?"==Xc)return Qb(Ne);if(":"==Sa)return Qb(Md)}function yf(Sa){if("variable"==Sa)return Qb(yf);if(":"==Sa)return Qb(Md)}function tf(Sa,Xc){if("<"==Xc)return Qb(Fa(">"),Gd(Md,">"),nc,tf);if("|"==Xc||"."==Sa)return Qb(Md);if("["==
Sa)return Qb($a("]"),tf);if("extends"==Xc)return Qb(Md)}function vc(){return Ia(Fe,id,Jf,ye)}function Fe(Sa,Xc){if("modifier"==Sa)return Qb(Fe);if("variable"==Sa)return Kc(Xc),Qb();if("spread"==Sa)return Qb(Fe);if("["==Sa)return Ld(Fe,"]");if("{"==Sa)return Ld(mf,"}")}function mf(Sa,Xc){if("variable"==Sa&&!$e.stream.match(/^\s*:/,!1))return Kc(Xc),Qb(Jf);"variable"==Sa&&($e.marked="property");return"spread"==Sa?Qb(Fe):"}"==Sa?Ia():Qb($a(":"),Fe,Jf)}function Jf(Sa,Xc){if("="==Xc)return Qb(Kb)}function ye(Sa){if(","==
Sa)return Qb(vc)}function va(Sa,Xc){if("keyword b"==Sa&&"else"==Xc)return Qb(Fa("form","else"),Pa,nc)}function Ka(Sa){if("("==Sa)return Qb(Fa(")"),sb,$a(")"),nc)}function sb(Sa){return"var"==Sa?Qb(vc,$a(";"),ua):";"==Sa?Qb(ua):"variable"==Sa?Qb(Q):Ia(Oa,$a(";"),ua)}function Q(Sa,Xc){return"in"==Xc||"of"==Xc?($e.marked="keyword",Qb(Oa)):Qb(Te,ua)}function ua(Sa,Xc){return";"==Sa?Qb(Za):"in"==Xc||"of"==Xc?($e.marked="keyword",Qb(Oa)):Ia(Oa,$a(";"),Za)}function Za(Sa){")"!=Sa&&Qb(Oa)}function ib(Sa,
Xc){if("*"==Xc)return $e.marked="keyword",Qb(ib);if("variable"==Sa)return Kc(Xc),Qb(ib);if("("==Sa)return Qb(Rc,Fa(")"),Gd(oc,")"),nc,id,Pa,xc);if(gj&&"<"==Xc)return Qb(Fa(">"),Gd(Md,">"),nc,ib)}function oc(Sa){return"spread"==Sa?Qb(oc):Ia(Fe,id,Jf)}function cc(Sa,Xc){return"variable"==Sa?bd(Sa,Xc):Tc(Sa,Xc)}function bd(Sa,Xc){if("variable"==Sa)return Kc(Xc),Qb(Tc)}function Tc(Sa,Xc){if("<"==Xc)return Qb(Fa(">"),Gd(Md,">"),nc,Tc);if("extends"==Xc||"implements"==Xc||gj&&","==Sa)return Qb(gj?Md:Oa,
Tc);if("{"==Sa)return Qb(Fa("}"),Wc,nc)}function Wc(Sa,Xc){if("variable"==Sa||"keyword"==$e.style){if(("async"==Xc||"static"==Xc||"get"==Xc||"set"==Xc||gj&&("public"==Xc||"private"==Xc||"protected"==Xc||"readonly"==Xc||"abstract"==Xc))&&$e.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return $e.marked="keyword",Qb(Wc);$e.marked="property";return Qb(gj?Yd:ib,Wc)}if("["==Sa)return Qb(Oa,$a("]"),gj?Yd:ib,Wc);if("*"==Xc)return $e.marked="keyword",Qb(Wc);if(";"==Sa)return Qb(Wc);if("}"==Sa)return Qb();if("@"==
Xc)return Qb(Oa,Wc)}function Yd(Sa,Xc){return"?"==Xc?Qb(Yd):":"==Sa?Qb(Md,Jf):"="==Xc?Qb(Kb):Ia(ib)}function Mf(Sa,Xc){return"*"==Xc?($e.marked="keyword",Qb(Pg,$a(";"))):"default"==Xc?($e.marked="keyword",Qb(Oa,$a(";"))):"{"==Sa?Qb(Gd(Bf,"}"),Pg,$a(";")):Ia(Pa)}function Bf(Sa,Xc){if("as"==Xc)return $e.marked="keyword",Qb($a("variable"));if("variable"==Sa)return Ia(Kb,Bf)}function Hg(Sa){return"string"==Sa?Qb():Ia(df,Bg,Pg)}function df(Sa,Xc){if("{"==Sa)return Ld(df,"}");"variable"==Sa&&Kc(Xc);"*"==
Xc&&($e.marked="keyword");return Qb(Di)}function Bg(Sa){if(","==Sa)return Qb(df,Bg)}function Di(Sa,Xc){if("as"==Xc)return $e.marked="keyword",Qb(df)}function Pg(Sa,Xc){if("from"==Xc)return $e.marked="keyword",Qb(Oa)}function Nj(Sa){return"]"==Sa?Qb():Ia(Gd(Kb,"]"))}Tb=Object.assign({},zb.defaultConfig,{},Tb);qc=Object.assign({},zb.defaultParserConfig,{},qc);var Oe=Tb.indentUnit,ki=qc.statementIndent,Kh=qc.jsonld,be=qc.json||Kh,gj=qc.typescript,Mj=qc.wordCharacters||/[\w$\xa1-\uffff]/,lg=function(){function Sa(Rk){return{type:Rk,
style:"keyword"}}var Xc=Sa("keyword a"),Wd=Sa("keyword b"),Td=Sa("keyword c"),Hc=Sa("operator"),dg={type:"atom",style:"atom"};Xc={"if":Sa("if"),"while":Xc,"with":Xc,"else":Wd,"do":Wd,"try":Wd,"finally":Wd,"return":Td,"break":Td,"continue":Td,"new":Sa("new"),"delete":Td,"throw":Td,"debugger":Td,"var":Sa("var"),"const":Sa("var"),let:Sa("var"),"function":Sa("function"),"catch":Sa("catch"),"for":Sa("for"),"switch":Sa("switch"),"case":Sa("case"),"default":Sa("default"),"in":Hc,"typeof":Hc,"instanceof":Hc,
"true":dg,"false":dg,"null":dg,undefined:dg,NaN:dg,Infinity:dg,"this":Sa("this"),"class":Sa("class"),"super":Sa("atom"),yield:Td,"export":Sa("export"),"import":Sa("import"),"extends":Td,await:Td,async:Sa("async")};if(gj){Wd={type:"variable",style:"variable-3"};Td={"interface":Sa("class"),"implements":Td,namespace:Td,module:Sa("module"),"enum":Sa("module"),"public":Sa("modifier"),"private":Sa("modifier"),"protected":Sa("modifier"),"abstract":Sa("modifier"),as:Hc,string:Wd,number:Wd,"boolean":Wd,any:Wd};
for(var ji in Td)Xc[ji]=Td[ji]}return Xc}(),yk=/[+\-*&%=<>!?|~^@]/,Tj=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Bj,Bh,zf={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},$e={state:null,column:null,marked:null,cc:null},ll={name:"this",next:{name:"arguments"}};nc.lex=!0;return{startState:function(Sa){Sa={tokenize:I,lastType:"sof",cc:[],lexical:new vb((Sa||0)-Oe,0,"block",!1),localVars:qc.localVars,context:qc.localVars&&{vars:qc.localVars},
indented:Sa||0};qc.globalVars&&"object"==typeof qc.globalVars&&(Sa.globalVars=qc.globalVars);return Sa},token:function(Sa,Xc){Sa.sol()&&(Xc.lexical.hasOwnProperty("align")||(Xc.lexical.align=!1),Xc.indented=Sa.indentation(),Mb(Sa,Xc));if(Xc.tokenize!=ta&&Sa.eatSpace())return null;var Wd=Xc.tokenize(Sa,Xc);if("comment"==Bj)return Wd;Xc.lastType="operator"!=Bj||"++"!=Bh&&"--"!=Bh?Bj:"incdec";a:{var Td=Bj,Hc=Bh,dg=Xc.cc;$e.state=Xc;$e.stream=Sa;$e.marked=null;$e.cc=dg;$e.style=Wd;Xc.lexical.hasOwnProperty("align")||
(Xc.lexical.align=!0);for(Sa=0;;){if(1E5<Sa++)throw Error("endless");if((dg.length?dg.pop():be?Oa:Pa)(Td,Hc)){for(;dg.length&&dg[dg.length-1].lex;)dg.pop()();if($e.marked){Wd=$e.marked;break a}if(Td="variable"==Td)b:{for(Td=Xc.localVars;Td;Td=Td.next)if(Td.name==Hc){Td=!0;break b}for(Xc=Xc.context;Xc;Xc=Xc.prev)for(Td=Xc.vars;Td;Td=Td.next)if(Td.name==Hc){Td=!0;break b}Td=void 0}if(Td){Wd="variable-2";break a}break a}}}return Wd},indent:function(Sa,Xc){if(Sa.tokenize==ta)return zb.passIndent;if(Sa.tokenize!=
I)return 0;var Wd=Xc&&Xc.charAt(0),Td=Sa.lexical,Hc;if(!/^\s*else\b/.test(Xc))for(var dg=Sa.cc.length-1;0<=dg;--dg){var ji=Sa.cc[dg];if(ji==nc)Td=Td.prev;else if(ji!=va)break}for(;!("stat"!=Td.type&&"form"!=Td.type||"}"!=Wd&&(!(Hc=Sa.cc[Sa.cc.length-1])||Hc!=Te&&Hc!=Qc||/^[,\.=+\-*:?[\(]/.test(Xc)));)Td=Td.prev;ki&&")"==Td.type&&"stat"==Td.prev.type&&(Td=Td.prev);Hc=Td.type;dg=Wd==Hc;return(ji=Sa._string)&&ji.trimLeft().startsWith("?")&&":"===Wd?ji.indexOf("?"):ji&&":"===Sa.lastType&&"}"!==Td.type?
ji.match(/^\s*/)[0].length:"vardef"==Hc?(Xc=Td.indented+Td.info+2+Sa.localVars.name.length,"?"===Wd||":"===Wd||"|"===Wd||"&"===Wd?Xc:","==Sa.lastType?Td.indented+Td.info+1:"operator"==Sa.lastType?Xc+3:Td.indented):"form"==Hc&&"{"==Wd?Td.indented:"form"==Hc?Td.indented+Oe:"stat"==Hc?(Wd=Td.indented,Sa="operator"==Sa.lastType||","==Sa.lastType||yk.test(Xc.charAt(0))||/[,.]/.test(Xc.charAt(0)),Wd+(Sa?ki||Oe:0)):"switch"!=Td.info||dg||0==qc.doubleIndentSwitch?Td.align?Td.column+(dg?0:1):Td.indented+(dg?
0:Oe):Td.indented+(/^(?:case|default)\b/.test(Xc)?Oe:2*Oe)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:be?null:"/*",blockCommentEnd:be?null:"*/",lineComment:be?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:be?"json":"javascript",jsonldMode:Kh,jsonMode:be,expressionAllowed:zb.expressionAllowed,skipExpression:function(Sa){var Xc=Sa.cc[Sa.cc.length-1];Xc!=Oa&&Xc!=Kb||Sa.cc.pop()}}});zb.registerHelper("wordChars","javascript",/[\w$]/);zb.defineMIME("text/javascript",
"javascript");zb.defineMIME("text/ecmascript","javascript");zb.defineMIME("application/javascript","javascript");zb.defineMIME("application/x-javascript","javascript");zb.defineMIME("application/ecmascript","javascript");zb.defineMIME("application/json",{name:"javascript",json:!0});zb.defineMIME("application/x-json",{name:"javascript",json:!0});zb.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});zb.defineMIME("text/typescript",{name:"javascript",typescript:!0});zb.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var kc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");kc.string=Ic;kc.JavaScriptChecker=xb;kc.JavaScriptNavigator=Pc;kc.completers=la;kc.jsSnippets=pb;kc.jsIdeCommands=Wa;kc.jsEditorCommands=fb;kc.astEditorCommands=Xa;kc.CodeMirrorEnabledEditorPlugin=Yc;kc.Snippet=Ta;kc.parser=Vc;kc.localInterface=$b;kc.systemInterfaceNamed=zc;kc.serverInterfaceFor=Fb;kc.l2lInterfaceFor=Bb;xb=function(Tb){var qc=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
wc=qc.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof qc.JavaScriptEditorPlugin?qc.JavaScriptEditorPlugin:qc.JavaScriptEditorPlugin=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(wc,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(){lb._get(Object.getPrototypeOf(wc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new kc.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(I){lb._get(Object.getPrototypeOf(wc.prototype),"attach",this).call(this,I);this.evalEnvironment.context=I}},{key:"detach",value:function(I){this.checker.uninstall(this.textMorph);lb._get(Object.getPrototypeOf(wc.prototype),"detach",this).call(this,I)}},{key:"getNavigator",value:function(){return new kc.JavaScriptNavigator}},
{key:"getCompleters",value:function(I){return kc.completers.concat(I)}},{key:"getCommands",value:function(I){return[].concat($jscomp.arrayFromIterable(lb._get(Object.getPrototypeOf(wc.prototype),"getCommands",this).call(this,I)),$jscomp.arrayFromIterable(kc.jsIdeCommands),$jscomp.arrayFromIterable(kc.jsEditorCommands),$jscomp.arrayFromIterable(kc.astEditorCommands))}},{key:"getKeyBindings",value:function(I){return[].concat($jscomp.arrayFromIterable(I),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},
{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},
{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(I){var T=this,ta,Ca,Mb,vb,Ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){ta=T.textMorph;Ca=[{command:"doit",target:ta,showKeyShortcuts:!0},{command:"inspectit",target:ta,showKeyShortcuts:!0},{command:"printit",target:ta,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:ta,showKeyShortcuts:!0},{command:"eval all",target:ta,showKeyShortcuts:!0},{command:"text completion",
alias:"code completion",target:ta,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:ta,showKeyShortcuts:!0},{isDivider:!0}];T.evalEnvironment.targetModule&&Ca.push({command:"[javascript] inject import",alias:"add import",target:ta},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:ta},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:ta});Mb=T.getNavigator();(vb=Mb.resolveIdentifierAt(ta,
ta.cursorPosition))&&Ca.push({command:"selectDefinition",alias:'jump to definition of "'+vb.name+'"',target:ta},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+vb.name+'"',target:ta});(Ia=ta.selection.text.trim())&&Ca.push({command:"open code search",alias:'code search for "'+kc.string.truncate(Ia,30)+'"',target:ta.world(),args:{input:Ia,backend:T.backend()}});Ca.push({isDivider:!0});return Qb.return(Ca.concat(I))})}},{key:"getSnippets",value:function(){return kc.jsSnippets.map(function(I){var T=
$jscomp.makeIterator(I);I=T.next().value;T=T.next().value;return new kc.Snippet({trigger:I,expansion:T})})}},{key:"sanatizedJsEnv",value:function(I){I=Object.assign({},this.evalEnvironment,{},I);I.format||(I.formatd="esm");I.context||(I.context=this.textMorph);I.sourceURL||(I.sourceURL=I.targetModule+"_doit_"+Date.now());I.systemInterface||(I.systemInterface=kc.localInterface);return I}},{key:"backend",value:function(I){I=this.sanatizedJsEnv(I);return I.remote?I.remote:"local"}},{key:"systemInterface",
value:function(I){return this.sanatizedJsEnv(I).systemInterface||kc.localInterface}},{key:"setSystemInterface",value:function(I){return this.evalEnvironment.systemInterface=I}},{key:"setSystemInterfaceNamed",value:function(I){return this.setSystemInterface(kc.systemInterfaceNamed(I))}},{key:"runEval",value:function(I,T){T=this.sanatizedJsEnv(T);return this.systemInterface(T).runEval(I,T)}},{key:"parser",get:function(){return kc.parser}},{key:"parse",value:function(I){I=void 0===I?null:I;if(this._ast&&
this._ast._astType===I)return this._ast;var T=this.parser,ta=this.textMorph.textString;if(!T)return null;var Ca={withComments:!0,allowReturnOutsideFunction:!0};I&&(Ca.type=I);if(ta.startsWith("#!")){var Mb=ta.indexOf("\n");ta=" ".repeat(Mb)+ta.slice(Mb)}T=T.fuzzyParse(ta,Ca);T._astType=I;return this._ast=T}},{key:"undeclaredVariables",value:function(I){var T=this.parser,ta=this.evalEnvironment.knownGlobals||[];I=this.parse(void 0===I?null:I);return T&&I?T.query.findGlobalVarRefs(I,{jslintGlobalComment:!0}).filter(function(Ca){return!ta.includes(Ca.name)}):
[]}}],[{key:"className",get:function(){return"JavaScriptEditorPlugin"}}],qc,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:662,end:6664})}(kc.CodeMirrorEnabledEditorPlugin);xb=kc.JavaScriptEditorPlugin;sa("default",xb);kc.default=xb}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});