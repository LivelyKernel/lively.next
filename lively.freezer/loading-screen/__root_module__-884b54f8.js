System.register(["kld-intersections"],function(za,cb){var mb;return{setters:[function(Pb){mb=Pb.default}],execute:function(){function Pb(g,c){return Array.isArray(g)?g.reduce(function(h,f){return Pb(f,h)},c):"string"===typeof g?c.filter(function(h){return h.path()!==g&&h.name()!==g}):g instanceof RegExp?c.filter(function(h){return!g.test(h.path())&&!g.test(h.name())}):"function"===typeof g?c.filter(function(h){return!g(h)}):c}function tb(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=
g.next().value;g={};if(!c)return g;if(c=c.split("&"))for(var h=0;h<c.length;h++){var f=c[h].split("="),m=f[0],n=!0;if(1<f.length)if(n=decodeURIComponent(f.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(a){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[m]=n}return g}function Fc(g){return Object.keys(g).map(function(c){return c+"="+encodeURIComponent(String(g[c]))}).join("&")}function vc(g){var c=g.replace(Ie.pathDoubleSlashRe,"$1/");
c=c.replace(Ie.pathDotRe,"/");do g=c,c=g.replace(Ie.pathDoubleDotRe,"");while(c!=g);return c}function Qc(g,c){var h=g.match(Ie.urlRe),f=c.match(Ie.urlRe),m=!0;if(h&&!f||!h&&f)m=!1;if(h&&f){var n=h[1];var a=h[2];var d=f[1];var k=f[2];n!==d?m=!1:a!==k?m=!1:(g=h[3],c=f[3])}if(!m)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Ie.withRelativePartsResolved(g);c=Ie.withRelativePartsResolved(c);if(g==c)return"";h=Ie._relativePathBetween_checkPathes(c,g);if(!h)throw Error("pathname differs in relativePathFrom "+
g+" vs "+c);return h}function mc(g,c){return Ie.withRelativePartsResolved(g.replace(Ie.slashEndRe,"")+"/"+c.replace(Ie.slashStartRe,""))}function ic(g){return g.startsWith("/")?g.replace(Ie.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function zc(g){var c=[];for(g=Ie.parent(g);g&&(c.unshift(g),g=Ie.parent(g),"/"!==g););return c}function Dc(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var h=0;h<Ie.extensions.length;h++)if(Ie.extensions[h].matches(g))return new Ie.extensions[h].resourceClass(g,
c);throw Error("Cannot find resource type for url "+g);}function Gd(g,c,h){var f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return f=Dc(g,h).asDirectory(),d.yield(f.ensureExistance(),2);case 2:n=d.forIn(c);case 3:if(null==(m=n.getNext())){d.jumpTo(5);break}if(!c.hasOwnProperty(m)){d.jumpTo(3);break}a=f.join(m);return"object"===typeof c[m]?d.yield(Gd(a,c[m],h),9):d.yield(a.write(c[m]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;
case 5:return d.return(f)}})}function Hd(g){var c=g.name;Ie.extensions=Ie.extensions.filter(function(h){return h.name!==c}).concat(g)}function Zd(g){var c="string"===typeof g?g:g.name;Ie.extensions=Ie.extensions.filter(function(h){return h.name!==c})}function xc(g,c,h){h=h||0;var f=[];if(g<=c)for(0>=h&&(h=-h||1);g<=c;g+=h)f.push(g);else for(0<=h&&(h=-h||-1);g>=c;g+=h)f.push(g);return f}function od(g,c){for(var h=Array(g);0<g;)h[--g]=c;return h}function qb(g,c){for(var h=Array(g);0<g;)h[--g]=c(g);
return h}function kc(g,c,h){for(var f=[],m=0;m<g.length;m++){var n=g[m];c.call(h,n)&&f.push(n)}return f}function Uc(g,c,h,f){f=void 0===f?!1:f;if(g&&yb.isArray(g)){for(var m=0,n=g.length-1;m<=n;){var a=m+Math.floor((n-m)/2),d=h?h(g[a]):g[a];if(d===c)return g[a];d>c?n=a-1:m=a+1}if(f){if(!g[m])return g[n];if(!g[n])return g[m];f=h?h(g[m]):g[m];h=h?h(g[n]):g[n];return 0>Math.abs(f-c)-Math.abs(h-c)?g[m]:g[n]}}}function tc(g,c){var h;g.find(function(f,m){return h=c(f,m)});return h}function cd(g,c){return g.filter(function(h){return!!h[c]})}
function td(g,c,h){"string"===typeof c&&(c=new RegExp(c,"i"));return yb.filter(g,yb.filter.test.bind(c))}function nb(g,c){return yb.filter(g,function(h,f){return!!c[f]})}function cc(g,c,h){return yb.filter(g,function(f,m){return!c.call(h,f,m)})}function wc(g,c){return yb.filter(g,function(h){return!h[c]})}function dc(g,c){return yb.filter(g,function(h){return h!==c})}function Nc(g,c){return yb.filter(g,function(h){return-1===c.indexOf(h)})}function $a(g,c){if(!g.length)return g;var h=[g[0]];if(c)for(c=
1;c<g.length;c++){var f=g[c];f!==h[h.length]&&h.push(f)}else for(c=1;c<g.length;c++)f=g[c],-1===h.indexOf(f)&&h.push(f);return h}function Xa(g,c,h){for(var f=g.slice(),m=f.length;m--;)for(var n=g[m],a=m+1;a<f.length;a++)c.call(h,n,f[a])&&f.splice(a--,1);return f}function Gb(g,c){for(var h={},f=[],m=0;m<g.length;m++){var n=g[m];h[n[c]]||(h[n[c]]=!0,f.push(n))}return f}function ub(g){return yb.filter(g,Boolean)}function db(g){for(var c=0,h=0,f=g.length;c<f;)g.hasOwnProperty(c)&&(g[h++]=g[c]),c++;for(;h++<
f;)g.pop();return g}function Xb(g,c,h){return g.forEach(c,h)}function Fa(){var g=Array.from(arguments),c=g.shift(),h="function"===typeof yb.last(g)?g.pop():function(m){return m},f=[c].concat(g).map(function(m){return Array.from(m)});return c.map(function(m,n){return h(yb.pluck(f,n),n)})}function sb(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(h,f){return h.concat(Array.isArray(f)?sb(f,c):[f])},[])}function Ya(g,c,h){for(var f=[],m=0;m<g.length;m++)f.push.apply(f,c.call(h,
g[m],m));return f}function pb(g,c){return g.reduce(function(h,f){0<h.length&&h.push(c);h.push(f);return h},[])}function $b(g,c){return yb.interpose(g,c)}function lc(g,c,h){return g.map(c,h)}function Jb(g,c,h,f,m,n,a,d){return g.map(function(k){return k[c](h,f,m,n,a,d)})}function Cb(g,c){return g.map(function(h){return h[c]})}function Bb(g,c,h,f){return g.reduce(c,h,f)}function sa(g,c,h,f){return g.reduceRight(c,h,f)}function Ta(g,c,h){return g.some(c,h)}function O(g,c,h){return g.every(c,h)}function U(g,
c){var h=g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++){if(g[f]&&c[f]&&g[f].equals&&c[f].equals)if(g[f].equals(c[f]))continue;else return!1;if(g[f]!=c[f])return!1}return!0}function ra(g,c){var h=g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++)if(!yb.objectEquals(g[f],c[f]))return!1;return!0}function xa(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function pa(g,c){return g.sort(c)}function ea(g,c,h){return yb.pluck(g.map(function(f,
m){return{value:f,criteria:c.call(h,f,m)}}).sort(function(f,m){f=f.criteria;m=m.criteria;return f<m?-1:f>m?1:0}),"value")}function bb(g,c){return yb.sortBy(g,function(h){return h[c]})}function Aa(g){return g.reverse()}function Rb(g){return g.slice().reverse()}function Gc(g,c,h){h=h||String;return g.map(function(f){return h(f).match(c)})}function Ab(g){return g[0]}function Hc(g){return g[g.length-1]}function fb(g,c){return yb.filter(yb.uniq(g),function(h){return-1<c.indexOf(h)})}function ud(g,c){g=
g.slice();for(var h=0;h<c.length;h++){var f=c[h];-1===g.indexOf(f)&&g.push(f)}return g}function je(g,c,h){g.splice(h,0,c)}function rc(g,c){g.splice(c,1)}function gb(g,c){var h=g.indexOf(c);0<=h&&yb.removeAt(g,h);return c}function Id(g,c){g.push.apply(g,c);return g}function hb(g,c,h){g.splice.apply(g,[h,0].concat(c))}function Za(g,c){g.includes(c)||g.push(c)}function ua(g,c,h){g.splice(h,1,c)}function J(g){g.length=0;return g}function la(g,c){for(var h=0;h<g.length;h++)if(!c.includes(g[h]))return!1;
return!0}function La(g,c,h,f){h=h||yb.NullFunction;f=f||yb.GLOBAL;c=c||function(m,n,a){n.call(f,m,a)};return g.reduceRight(function(m,n,a){return function(){c.call(f,m,n,a)}},h)()}function ib(g,c,h,f,m,n){f=f||function(){};return g.clone().reverse().reduce(function(a,d,k){return function(){c.call(m||yb.GLOBAL,d,k);n&&0!==k%n?a():a.delay(h)}},f)()}function Ib(){var g=Array.from(arguments),c=g.shift(),h=c.length,f=!1;if(1===g.length){var m=g[0].progressBar;var n=g[0].iterator;var a=g[0].labelFunction;
var d=g[0].whenDone;var k=g[0].context}else m=g[0],n=g[1],a=g[2],d=g[3],k=g[4];k||(k="undefined"!==typeof window?window:global);a||(a=function(b){return b});m||(f=!0,m=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});m.value=0;c.reduceRight(function(b,e,l){return function(){try{m.value=l/h,a&&(m.label=a.call(k,e,l)),n.call(k,e,l)}catch(p){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
l,e,p,p.stack)}yb.delay(b,0)}},function(){m.value=1;f&&function(){m.remove()}.delay(0);d&&d.call(k)})();return c}function hc(g,c,h){0>c&&(c=g.length+c);0>h&&(h=g.length+h);var f=g[c];g[c]=g[h];g[h]=f;return g}function Vb(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function Oc(g,c,h){return yb.Group.fromArray(g,c,h)}function Pc(g,c){return yb.groupBy(g,function(h){return h[c]})}function Yd(g,c,h){c=c||function(n){return n};var f=[],m=[];g.forEach(function(n,a){(c.call(h,n,a)?f:m).push(n)});
return[f,m]}function r(g,c,h){function f(n,a){if(!a.length)return[n,[]];var d=a[0];a=a.slice(1);var k=n.concat([d]);if(c.call(h,k))return f(k,a);n=f(n,a);return[n[0],[d].concat(n[1])]}function m(n,a){if(!a.length)return n;a=f([],a);if(!a[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return m(n.concat([a[0]]),a[1])}return m([],g)}function Rd(g,c){c=c||1;return yb.range(0,Math.ceil(g.length/c)-1).map(function(h){return g.slice(h*c,h*c+c)},
g)}function ke(g,c){for(var h=g.map(function(a,d){return a[c[d]]}),f=c.slice(),m=g.length;m--;0<=m){var n=f[m]+1;if(g[m][n]){f[m]=n;break}else if(0===m){f=void 0;break}else f[m]=0}return[h,f]}function le(g){for(var c=g.reduce(function(n,a){return n*a.length},1),h=g.map(function(n){return 0}),f=Array(c),m=0;m<c;m++)h=yb.combinationsPick(g,h),f[m]=h[0],h=h[1];return f}function ge(g,c){return g.slice(0,c)}function vd(g,c){return g.slice(c)}function Td(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);
return g.slice(0,f)}function Ce(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);return g.slice(f)}function Ae(g){for(var c=yb.range(0,g.length-1),h=Array(g.length),f=0;f<g.length;f++){var m=c.splice(Math.round(Math.random()*(c.length-1)),1);h[m]=g[f]}return h}function ld(g,c,h){c=c||function(m){return m};var f;g.reduce(function(m,n,a){a=c.call(h,n,a);if("number"!==typeof a||a<=m)return m;f=n;return a},-Infinity);return f}function nf(g,c,h){c=c||function(f){return f};return yb.max(g,function(f,
m){return-c.call(h,f,m)})}function gc(g){for(var c=0,h=0;h<g.length;h++)c+=g[h];return c}function id(g,c){return g.reduce(function(h,f){return f===c?h+1:h},0)}function fe(g){return g.length}function Ec(g,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),f=Math.ceil(Math.round(g.length/h));return yb.range(0,h-1).map(function(m){return g.slice(m*f,(m+1)*f)})}if(c instanceof Array)return g.reduce(function(m,n){if(n<c[1])return m[0].push(n),m;for(var a=
1;a<c.length;a++)if(n>=c[a]&&(!c[a+1]||n<=c[a+1]))return m[a].push(n),m;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},yb.range(1,c.length).map(function(){return[]}))}function pe(g){return[].concat(g)}function Ga(g){return yb.from(g)}function Oa(g,c,h){return g.forEach(c,h)}function Ka(g,c,h){return g.every(c,h)}function N(g,c,h){return g.some(c,h)}function G(g,c,h){return g.map(c,h)}function wa(g,c,h){return yb.filter(g,c,h)}function M(g,c,h,f){f&&(h=h.bind(f));return g.reduce(h,
c)}function ha(g,c,h){function f(a,d){if(!n&&(a||d)){n=!0;try{h(a,m)}catch(k){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(k.stack||k))}}}var m=[],n=!1;return g.reduceRight(function(a,d,k){if(!n)return function(b,e){if(b)return f(b);0<k&&m.push(e);try{c(d,k,yb.once(a))}catch(l){f(l)}}},function(a,d){m.push(d);f(a,!0)})()}function va(g,c,h,f){function m(){for(;e<c.parallel&&b<g.length;)l[b++]()}function n(p,q){if(!(-1<d.indexOf(p)||(d.push(p),e--,k)))if(!q&&d.length<g.length)m();
else{k=!0;try{f&&f(q,a)}catch(u){console.error("Error in mapAsync - main callback invocation error:\n"+(u.stack||u))}}}"function"===typeof c&&(f=h,h=c,c=null);c=c||{};if(!g.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var a=[],d=[],k=!1,b=0,e=0,l=g.map(function(p,q){return function(){e++;try{h(p,q,yb.once(function(u,w){a[q]=u||w;n(q,u)}))}catch(u){n(q,u)}}});return m()}function Ua(){return function(){}}function eb(){return function(g){return g}}function ob(){return function(){return null}}
function Tb(){return function(){return!1}}function Yb(){return function(){return!0}}function yc(){return function(){throw Error("Not yet implemented");}}function md(g){var c=[],h;for(h in g)g.__lookupGetter__(h)||"function"!==typeof g[h]||c.push(h);return c}function Bd(g){var c=[],h;for(h in g)!g.__lookupGetter__(h)&&g.hasOwnProperty(h)&&"function"===typeof g[h]&&c.push(h);return c}function Wc(g){if(g.superclass)return[];var c=g.toString();g="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
h?g=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function Sd(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function Qd(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),h,f=0;f<c.length;f++){var m=c[f].match(/^(\s+)[^\s]/);m&&(void 0===h||m[1].length<h.length)&&(h=m[1])}return h?g.replace(new RegExp("^"+h,"gm"),""):g}function Ed(g){var c=Date.now();g();return Date.now()-c}function yd(g,c){for(var h=Date.now(),f=0;f<c;f++)g();return(Date.now()-h)/c}function ue(g,c){var h=Array.prototype.slice.call(arguments),f=h.shift();c=1E3*h.shift();return setTimeout(function(){return f.apply(f,h)},c)}function De(g,c){var h,f,m,n,a,d,k=Ic.debounce(c,function(){a=
n=!1});return function(){h=this;f=arguments;m||(m=setTimeout(function(){m=null;a&&g.apply(h,f);k()},c));n?a=!0:d=g.apply(h,f);k();n=!0;return d}}function gg(g,c,h){var f;return function(){var m=this,n=arguments;h&&!f&&c.apply(m,n);clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(m,n)},g)}}function pg(g,c,h){var f=Ic._throttledByName;return f[g]?f[g]:f[g]=Ic.throttle(function(){Ic.debounceNamed(g,c,function(){delete f[g]})();return h.apply(this,arguments)},c)}function Tf(g,c,h,f){var m=Ic._debouncedByName;
return m[g]?m[g]:m[g]=Ic.debounce(c,function(){delete m[g];return h.apply(this,arguments)},f)}function Le(g,c){var h=Ic._queues,f=h[g]||(h[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(m){f.tasks.push(m);f._workerActive||f.activateWorker()},pushAll:function(m){m.forEach(function(n){f.tasks.push(n)});f._workerActive||f.activateWorker()},pushNoActivate:function(m){f.tasks.push(m)},handleError:function(m){m&&console.error("Error in queue: "+m)},activateWorker:function(){function m(d){f.handleError(d);
f.activateWorker()}var n=f.tasks,a=f._workerActive;if(0===n.length)a&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete h[g];else{a||(f._workerActive=!0);try{f.worker(n.shift(),m)}catch(d){m(d)}}}});return f}function Pg(g,c,h){function f(){b&&clearTimeout(b);d=!0;delete n[g]}function m(e){d||(f(),a.callbacks.forEach(function(l){try{l.apply(null,e)}catch(p){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(p.stack||p))}}))}var n=Ic._queueUntilCallbacks,
a=n[g];if(a)return a;var d=!1,k=!1;if(h)var b=setTimeout(function(){d||m([Error("timeout")])},h);a=n[g]={callbacks:[],cancel:function(){k=!0;f()},whenDone:function(e){a.callbacks.push(e);return a}};setTimeout(function(){if(!k)try{c(function(){m(arguments)})}catch(e){m([e])}},0);return a}function tg(){var g=Array.prototype.slice,c=g.call(arguments),h=Ic._composeAsyncDefaultEndCallback,f=h,m,n,a=new Promise(function(d,k){m=d;n=k});return c.reverse().reduce(function(d,k,b){var e=!1;return function(){function l(){e=
!0;var u=g.call(arguments),w=u.shift();w?(f(w),n(w)):d.apply(null,u)}var p=g.call(arguments);if(f===h&&b===c.length-1){for(;p.length&&"function"!==typeof p[p.length-1];)p.pop();"function"===typeof p[p.length-1]&&(f=p.pop())}if("function"===typeof k)try{var q=k.apply(this,p.concat([l]));q&&"function"===typeof q.then&&"function"===typeof q.catch&&q.then(function(u){return l(null,u)}).catch(function(u){return l(u)})}catch(u){console.error("composeAsync: ",u.stack||u),e||(f(u),n(u))}else k&&"function"===
typeof k.then&&"function"===typeof k.catch?k.then(function(u){l(null,u)}).catch(function(u){l(u)}):(p=Error("Invalid argument to composeAsync: "+k),f(p),n(p));return a}},function(){var d=g.call(arguments);f.apply(null,[null].concat(d));m(d[0])})}function Xg(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function uf(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function Hf(g){g=g||function(){};return function(){var c=Ic.arr.from(arguments);g.apply(null,[null].concat(c))}}function Wd(g,c,h){var f=Date.now(),m=50;h||(h=c,c=g,g=void 0);(function a(){if(c())return h();if(g){var d=Date.now()-f;d=g-d;if(0>=d)return h(Error("timeout"));d<m&&(m=d)}setTimeout(a,m)})()}function wh(g,c,h){function f(a,d,k,b){if(n.length){var e=null;a=n.indexOf(a);-1<a&&n.splice(a,1);k?(n.length=0,e=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+
(k.stack||String(k)))):b&&(m[d]=b);n.length||setTimeout(function(){h(e,m)},0)}}h||(h=c,c=g,g=null);g=g||{};var m=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(a,d){try{a(function(){var k=Array.prototype.slice.call(arguments),b=k.shift();f(a,d,b,k)})}catch(k){f(a,d,k,null)}});g.timeout&&setTimeout(function(){if(n.length){var a=m.map(function(d,k){return null===d&&k}).filter(function(d){return"number"===typeof d}).join(", ");f(null,null,Error("waitForAll timed out, functions at "+
a+" not done"),null)}},g.timeout)}else h(null,m)}function vb(g,c,h,f){function m(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();m.isWrapper=!0;m.originalFunction=g;return m}function nc(g,c){var h=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[g.bind(this)].concat(f);return c.apply(this,f)};h.isWrapper=!0;h.originalFunction=g;return h}function qd(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function rd(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function Pe(g,c,h){h.originalFunction=g[c];var f=g.hasOwnProperty(c);g[c]=function(){f?g[c]=h.originalFunction:delete g[c];return h.apply(this,arguments)};return g}function hf(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=g.apply(this,arguments)}}}function Qg(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function qg(g,c){var h=Array.prototype.slice.call(arguments),f=Ic._eitherNameRegistry;g=h.shift();var m=f[g]||(f[g]={wasCalled:!1,callsLeft:0});m.callsLeft++;return function(){m.callsLeft--;0>=m.callsLeft&&delete f[g];if(!m.wasCalled)return m.wasCalled=!0,c.apply(this,arguments)}}function Wi(g){return eval(g)}function hl(g){return Ic.evalJS("("+g.toString()+");")}function il(g,c){return Ic.Closure.fromFunction(g,c).recreateFunc()}function Sk(g,c,h,f){var m=h||g.name;
if(!m)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={this:c};f&&(n=Ic.objectMerge([n,f]));h&&h[m]&&(n.$super=Ic.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[m].apply(c,arguments)}catch(a){return"undefined"!==typeof $world?$world.logError(a,"Error in $super call"):console.error("Error in $super call: "+a+"\n"+a.stack),null}},{obj:c,name:m}).recreateFunc());return Ic.addToObject(Ic.asScript(g,n),c,m)}function pj(g,c,h){g.displayName=
h;var f=c.attributeConnections?c.attributeConnections.filter(function(m){return"update"===m.getSourceAttrName()}):[];f&&f.forEach(function(m){m.disconnect()});c[h]=g;typeof c&&(g.declaredObject=Ic.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:Ic.safeToString(c)});f&&f.forEach(function(m){m.connect()});return g}function Tk(g,c){return Ic.Closure.fromFunction(g,c||{}).recreateFunc()}function qj(g,
c,h){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function sk(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function Yj(g,c,h){g[c]=h;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function Eh(g){for(var c=[],h=g.prototype;h;)c=Object.keys(h).reduce(function(f,m){"function"===typeof h[m]&&-1===f.indexOf(m)&&f.push(m);return f},c),h=Object.getPrototypeOf(h);return c}function Zj(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function Ze(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{return f.apply(g,m)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,m,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=Ic.wrap(g,h);h.originalFunction=g;h.methodName="$logErrorsWrapper";
return h}function Th(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{var n=f.apply(g,m)}catch(a){throw console.warn("failed to load "+c+": "+a),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),a;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+c;h=Ic.wrap(g,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=g;return h}function Xi(g,c){var h=function(m){var n=Array.prototype.slice.call(arguments);
n.shift();f=m.apply(g,n);c?console.warn("%s(%s) -> %s",Ic.qualifiedMethodName(g),n,f):console.log("%s(%s) -> %s",Ic.qualifiedMethodName(g),n,f);return f};h.methodName="$logCallsAdvice::"+Ic.qualifiedMethodName(g);var f=Ic.wrap(g,h);f.originalFunction=g;f.methodName="$logCallsWrapper::"+Ic.qualifiedMethodName(g);return f}function tk(g,c){return Ic.wrap(g,function(h){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=h.apply(g,f);c.pop();return f})}function kl(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function uk(g){if(g&&Array.isArray(g))return"["+g.map(uk)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Gj(g){return Array.isArray(g)}function Kn(g){return g&&1==g.nodeType}function wf(g){return g instanceof Function}function Uk(g){return"boolean"===typeof g}function mm(g){return"string"===typeof g}function fj(g){return"number"===typeof g}function jl(g){return"undefined"===typeof g}function yl(g){return g instanceof
RegExp}function Al(g){return"object"===typeof g}function zl(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function Qm(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function Tl(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return wd.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var h=[],f;for(f in g)if(h.push(f),"function"!==typeof g[f]&&!Tl(g[f],c[f]))return!1;for(f in c)if(-1===h.indexOf(f)&&"function"!==typeof c[f]&&!Tl(c[f],g[f]))return!1;return!0}function ll(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function nm(g,c){for(var h={},f=0;f<c.length;f++)h[c[f]]=g[c[f]];return h}function Ob(g,c){g=g||{};g=wd.getOwnPropertyDescriptors(g);for(var h=0;h<c.length;h++)c[h]in g&&delete g[c[h]];return Object.defineProperties({},g)}function vh(g,c,h,f){c=wd.functionFromString(c);
return wd.asScriptOf(c,g,h,f)}function ca(g,c){for(var h=null,f=1;f<arguments.length;f++)if("string"===typeof arguments[f])h=arguments[f],g.categories||(g.categories={}),g.categories[h]||(g.categories[h]=[]),h=g.categories[h];else{c=arguments[f];for(var m in c){var n=c.__lookupGetter__(m),a=c.__lookupSetter__(m);n&&g.__defineGetter__(m,n);a&&g.__defineSetter__(m,a);n||a||(n=c[m],g[m]=n,h&&h.push(m),"function"===typeof n&&(n.displayName||(n.displayName=m),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function t(g){if(wd.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=g[h]);c.__proto__=g.__proto__;return c}function x(g,c,h){for(var f={},m=0;m<c.length;m++)c[m]in g&&(f[c[m]]=h?h(c[m],g[c[m]]):g[c[m]]);return f}function z(g,c,h){c=c||{};h=h||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),m=c.customPrinter(g,f,function(p){return z(p,
c,h+1)});if(m!==f)return m}if(!g)return wd.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+wd.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return wd.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);f=n?"[":"{";m=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return f+"/*...*/"+m;var a=[];if(n)a=g.map(function(p){return z(p,c,h+
1)});else for(var d=Object.keys(g).sort(function(p,q){var u="function"===typeof g[p];return u===("function"===typeof g[q])?p<q?-1:p>q?1:0:u?1:-1}),k=0;k<d.length;k++){if(k>(c.maxNumberOfKeys||Infinity)){d=d.length-k;a.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var b=d[k];n&&z(g[b],c,h+1);var e=z(g[b],c,h+1);a.push((c.escapeKeys?JSON.stringify(b):b)+": "+e)}if(0===a.length)return f+m;d=a.join(", ");k=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||d.length>=c.minLengthForNewLine);
var l=wd.indent("",c.indent||"  ",h);b=wd.indent("",c.indent||"  ",h+1);e=k&&!n?"\n"+b:"";n=k&&!n?"\n"+l:"";k&&(d=a.join(","+(k?"\n"+b:"")));return f+e+d+n+m}function v(g){return 1<arguments.length?v(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f]);return c},{})}function B(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var h=g.map(function(f,m){return B(f,
c[m])});c.length>g.length&&(h=h.concat(c.slice(g.length)));return h}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(f,m){f[m]=g[m]?c[m]?"object"!==typeof g[m]||"object"!==typeof c[m]?c[m]:B(g[m],c[m]):g[m]:c[m];return f},{})}function D(g,c){c=[];for(var h in g){var f=g[h],m=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var n=m.length;n--;){var a=m[n],d=g[a];d?(d.hasOwnProperty("after")||(d.after=
[]),d.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+a+" but that property cannot be found.")),m.splice(n,1))}for(m=f.length;m--;)n=f[m],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),f.splice(m,1));c.push(h)}h=[];f=[];for(m=c.length+1;c.length;){if(m===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(k){var b=g[k].before,e=g[k].after;if(!(b&&b.length||e&&e.length))return"";k+="\n";b&&b.length&&(k+="  - before "+b.join(",")+"\n");e&&e.length&&(k+="  - after "+e.join(",")+"\n");return k}).join(""));m=c.length;n=[];for(a=c.length;a--;)d=c[a],wd.isSubset(g[d].after,f)&&(c.splice(a,1),f.push(d),n.push(d));h.push(n)}return wd.flatten(h,1)}function H(g){return Object.create(g)}function R(g,c){for(var h=[];g;)g.hasOwnProperty(c)&&h.unshift(g[c]),g=Object.getPrototypeOf(g);return h}function da(g,
c){return wd.merge(wd.valuesInPropertyHierarchy(g,c))}function K(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=K(g[h]));return c}function Q(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function ba(g){function c(f,m,n,a){if(f.constructor.name===m){h+=n;if(f.length||Object.keys(f).length)h+="...";h+=a}}if(!wd.isMutableType(g))return wd.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var h="";c(g,"Object","{","}");c(g,"Array","[","]");return h}function Z(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(wd.typeStringOf(g))}function ya(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Ja(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function Qa(g,c){c=void 0===c?"_":c;var h=1;do var f=c+"-"+h++;while(f in g);return f}function Pa(){return jc.formatFromArray(Array.prototype.slice.call(arguments))}function xb(g){function c(p,q){return""+p}function h(p,q){return p.toString()}function f(p,q){return jc.inspectObject(p)}var m=g.shift();m||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(p,q,u){return-1<u?p.toFixed(u):p.toString()},
o:f},a=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;m=function(p){for(var q=[],u=a.exec(p);u;u=a.exec(p)){var w=u[8]||u[5];w=w in n?n[w]:f;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;q.push(p.substr(0,"%"==u[0][0]?u.index:u.index+1));q.push({appender:w,precision:y});p=p.substr(u.index+u[0].length)}p&&q.push(p.toString());return q}(m);for(var d="",k=0,b=0;b<m.length;++b){var e=m[b];if(e&&"object"===typeof e){var l=g[k++];d+=(e.appender||c)(l,d,e.precision)}else d+=""+e}return d}function ec(g,
c,h){if(!h||0>=h)return g;for(var f="";0<h;)h--,f+=c;return jc.lines(g).map(function(m){return f+m}).join("\n")}function sc(g,c){c||(c="  ");return jc.min(g.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function oc(g,c,h){c||(c="  ");h||(h=0);var f=jc.minIndent(g,c);if(f===h)return g;if(f<h)return jc.indent(g,c,h-f);var m=c.repeat(f-h);return jc.lines(g).map(function(n){return n.slice(m.length)}).join("\n")}function Bc(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function ad(g){return jc.articles.articlize(g)}function pd(g){return jc.articles.find(g)}function Db(g){if(g&&Array.isArray(g))return"["+g.map(Db)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Pd(g,c){c=c||0;return g.reduce(function(h,f){return h+(Array.isArray(f)?Pd(f,c+1):jc.indent(f+"\n","  ",c))},"")}function Oe(g,c,h){return h?" ".repeat(c)+g:g+" ".repeat(c)}function Cc(g,c){function h(d){return n?
!1:a?!0:c&&Array.isArray(c.align)&&"right"===c.align[d]}var f=[],m=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,a=c&&"right"===c.align;g.forEach(function(d){d.forEach(function(k,b){void 0===f[b]&&(f[b]=0);f[b]=Math.max(f[b],String(k).length)})});return g.map(function(d){return d.map(function(k,b){k=String(k);return jc.pad(k,f[b]-k.length,h(b))}).join(m)}).join("\n")}function bf(g,c,h,f){function m(a,d,k){n[d]=f.repeat(a)+c(k,a);k=h(k,a);var b=d+1;if(!k||!k.length)return b;var e=b,l=k.length-
1;k.forEach(function(p,q){b=m(a+1,b,p);p=l===q;var u=n[e].split(""),w=a*f.length+f.length;for(q=a*f.length+1;q<w;q++)u[q]="-";p&&(u[a*f.length]="\\");n[e]=u.join("");p||n.slice(e,b).forEach(function(y,A){y=y.split("");y[a*f.length]="|";n[e+A]=y.join("")});e=b});return b}var n=[];f=f||"  ";m(0,0,g);return n.join("\n")}function cg(g){return g.split("")}function We(g){return g.split(/\n\r?/)}function Be(g,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(f,m){var n=
f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(m)?f+="\n"+m:(f.length&&n.push(f),f=m);return[n,f]},[[],""])[0]:g.split(new RegExp(h+"+"))}function Ld(g){return jc.lines(g).compact()}function Df(g,c){return g.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}function Mf(g,c){c=c||{};var h=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=jc.lines(g);for(var m=[],n=0;n<g.length;n++){var a=jc.tokens(g[n],h);c&&(a=a.map(function(d){if(d.match(f))return d;var k=
Number(d);if(!isNaN(k))return k;k=new Date(d);return isNaN(+k)?d.trim():k}));0<a.length&&m.push(a)}return m}function jf(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function vk(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(h,f){if((f=f.split("="))[0]){var m=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));
m in h?(Array.isArray(h[m])||(h[m]=[h[m]]),h[m].push(f)):h[m]=f}return h}):{}}function Vk(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function ji(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function Kd(g){var c=g.match(jc.urlStartRe),h=(c=c?c[0]:null)?g.slice(c.length):g;do g=h,h=g.replace(jc.pathDoubleDotRe,"");while(h!=g);h=h.replace(jc.pathDoubleSlashRe,
"$1/");h=h.replace(jc.pathDotRe,"/");c&&(h=c+h);return h}function Uf(){return jc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function Uh(){return jc.newUUIDTemplate.replace(jc.newUUIDRe,jc.newUUIDReplacer).toUpperCase()}function vi(g,c){return"data:"+(c||"text/plain")+";base64,"+jc.base64EncodeUnicode(g)}function Rm(g){var c=0,h=g.length;if(0==h)return c;for(var f=0;f<h;f++){var m=g.charCodeAt(f);
c=(c<<5)-c+m;c&=c}return c}function Ul(g){function c(k,b,e,l,p,q){b=a(a(b,k),a(l,q));return a(b<<p|b>>>32-p,e)}function h(k,b,e,l,p,q,u){return c(b&e|~b&l,k,b,p,q,u)}function f(k,b,e,l,p,q,u){return c(b&l|e&~l,k,b,p,q,u)}function m(k,b,e,l,p,q,u){return c(e^(b|~l),k,b,p,q,u)}function n(k,b){var e=k[0],l=k[1],p=k[2],q=k[3];e=h(e,l,p,q,b[0],7,-680876936);q=h(q,e,l,p,b[1],12,-389564586);p=h(p,q,e,l,b[2],17,606105819);l=h(l,p,q,e,b[3],22,-1044525330);e=h(e,l,p,q,b[4],7,-176418897);q=h(q,e,l,p,b[5],12,
1200080426);p=h(p,q,e,l,b[6],17,-1473231341);l=h(l,p,q,e,b[7],22,-45705983);e=h(e,l,p,q,b[8],7,1770035416);q=h(q,e,l,p,b[9],12,-1958414417);p=h(p,q,e,l,b[10],17,-42063);l=h(l,p,q,e,b[11],22,-1990404162);e=h(e,l,p,q,b[12],7,1804603682);q=h(q,e,l,p,b[13],12,-40341101);p=h(p,q,e,l,b[14],17,-1502002290);l=h(l,p,q,e,b[15],22,1236535329);e=f(e,l,p,q,b[1],5,-165796510);q=f(q,e,l,p,b[6],9,-1069501632);p=f(p,q,e,l,b[11],14,643717713);l=f(l,p,q,e,b[0],20,-373897302);e=f(e,l,p,q,b[5],5,-701558691);q=f(q,e,l,
p,b[10],9,38016083);p=f(p,q,e,l,b[15],14,-660478335);l=f(l,p,q,e,b[4],20,-405537848);e=f(e,l,p,q,b[9],5,568446438);q=f(q,e,l,p,b[14],9,-1019803690);p=f(p,q,e,l,b[3],14,-187363961);l=f(l,p,q,e,b[8],20,1163531501);e=f(e,l,p,q,b[13],5,-1444681467);q=f(q,e,l,p,b[2],9,-51403784);p=f(p,q,e,l,b[7],14,1735328473);l=f(l,p,q,e,b[12],20,-1926607734);e=c(l^p^q,e,l,b[5],4,-378558);q=c(e^l^p,q,e,b[8],11,-2022574463);p=c(q^e^l,p,q,b[11],16,1839030562);l=c(p^q^e,l,p,b[14],23,-35309556);e=c(l^p^q,e,l,b[1],4,-1530992060);
q=c(e^l^p,q,e,b[4],11,1272893353);p=c(q^e^l,p,q,b[7],16,-155497632);l=c(p^q^e,l,p,b[10],23,-1094730640);e=c(l^p^q,e,l,b[13],4,681279174);q=c(e^l^p,q,e,b[0],11,-358537222);p=c(q^e^l,p,q,b[3],16,-722521979);l=c(p^q^e,l,p,b[6],23,76029189);e=c(l^p^q,e,l,b[9],4,-640364487);q=c(e^l^p,q,e,b[12],11,-421815835);p=c(q^e^l,p,q,b[15],16,530742520);l=c(p^q^e,l,p,b[2],23,-995338651);e=m(e,l,p,q,b[0],6,-198630844);q=m(q,e,l,p,b[7],10,1126891415);p=m(p,q,e,l,b[14],15,-1416354905);l=m(l,p,q,e,b[5],21,-57434055);
e=m(e,l,p,q,b[12],6,1700485571);q=m(q,e,l,p,b[3],10,-1894986606);p=m(p,q,e,l,b[10],15,-1051523);l=m(l,p,q,e,b[1],21,-2054922799);e=m(e,l,p,q,b[8],6,1873313359);q=m(q,e,l,p,b[15],10,-30611744);p=m(p,q,e,l,b[6],15,-1560198380);l=m(l,p,q,e,b[13],21,1309151649);e=m(e,l,p,q,b[4],6,-145523070);q=m(q,e,l,p,b[11],10,-1120210379);p=m(p,q,e,l,b[2],15,718787259);l=m(l,p,q,e,b[9],21,-343485551);k[0]=a(e,k[0]);k[1]=a(l,k[1]);k[2]=a(p,k[2]);k[3]=a(q,k[3])}var a=function(k,b){var e=(k&65535)+(b&65535);return(k>>
16)+(b>>16)+(e>>16)<<16|e&65535},d="0123456789abcdef".split("");return function(k){for(var b=k.length,e=0;e<b;e++){for(var l=e,p=k[e],q="",u=0;4>u;u++)q+=d[p>>8*u+4&15]+d[p>>8*u&15];k[l]=q}return k.join("")}(function(k){var b=k.length,e=[1732584193,-271733879,-1732584194,271733878],l;for(l=64;l<=b;l+=64){var p,q=k.substring(l-64,l),u=[];for(p=0;64>p;p+=4)u[p>>2]=q.charCodeAt(p)+(q.charCodeAt(p+1)<<8)+(q.charCodeAt(p+2)<<16)+(q.charCodeAt(p+3)<<24);n(e,u)}k=k.substring(l-64);p=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];q=k.length;for(l=0;l<q;l++)p[l>>2]|=k.charCodeAt(l)<<(l%4<<3);p[l>>2]|=128<<(l%4<<3);if(55<l)for(n(e,p),l=16;l--;)p[l]=0;p[14]=8*b;n(e,p);return e}(g))}function Me(g,c){var h=[];g.replace(c,function(f,m){h.push({match:f,start:m,end:m+f.length})});return h}function Ci(g,c,h){function f(a,d){if(d.constructor!==RegExp){if(0===a.indexOf(d))return{match:d,rest:a.slice(d.length)};for(var k=0;k<d.length;k++)if(d[k]!=a[k])return{match:null,pos:k};return{match:null}}return(d=jc.reMatches(a,d))&&
d.length&&0===d[0].start?{match:d[0].match,rest:a.slice(d[0].end)}:{match:null}}function m(a){var d=jc.reMatches(a,/__\//g),k=jc.reMatches(a,/\/__/g);if(d.length!==k.length)throw Error("pattern invalid: "+a+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(k));var b=0;return d.reduce(function(e,l,p){var q=k[p];p=e.pop();l=l.start-b;q=q.end-b;var u;var w=u=3;p=[p.slice(0,l),p.slice(l+u,q-w),p.slice(q)];p[0].length&&(e.push(p[0]),b+=p[0].length);
try{p[1].length&&(e.push(new RegExp(p[1])),b+=p[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+jc.inspectObject(p));}p[2].length&&e.push(p[2]);return e},[a])}function n(a,d){d=m(d);a:{for(var k=a,b=0,e=0;e<d.length;e++){var l=d[e];k=f(k,l);if(!k.match){d={matched:!1,pos:b+(k.pos||0),pattern:l};break a}b+=k.match.length;k=k.rest}d=k.length?{matched:!1,pos:b}:{matched:!0}}if(d.matched)return d;d.error=a.slice(0,d.pos)+"<--UNMATCHED--\x3e"+a.slice(d.pos);return d}h=h||{};h.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));h.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:n(g,c)}function cf(g,c,h){g=g.slice(c);return"string"===typeof h?(g=g.indexOf(h),-1===g?null:g+c):h.constructor===RegExp?(c=jc.reMatches(g,h),c[0]?c[0].start:null):null}function jg(g,c,h){g=g.slice(0,c);return"string"===typeof h?(g=g.lastIndexOf(h),-1===g?null:g):h.constructor===RegExp?(g=jc.reMatches(g,h),jc.last(g)?jc.last(g).start:null):null}function Fh(g){var c=jc.lineRanges(g);
return function(h){for(var f=0;f<c.length;f++){var m=c[f];if(h>=m[0]&&h<m[1])return f}return-1}}function Wk(g){return function(c){return jc.lineRanges(g)[c]}}function vs(g){for(var c=0,h=jc.lines(g),f=[],m=0;m<h.length;m++)g=c+h[m].length+1,f.push([c,g]),c=g;return f}function ws(g,c){var h=g.length;if(0===h)return-1;for(var f=0;;){var m=f+Math.floor((h-f)/2),n=$jscomp.makeIterator(g[m]),a=n.next().value;n=n.next().value;if(c<a){if(0===m)break;h=m}else if(c>n)f=m;else return m}return-1}function Mp(g,
c,h){h=void 0===h?0:h;g=this.substring(h||0).search(c);return 0<=g?g+(h||0):g}function Ln(g,c,h){h=void 0===h?g.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,h+1);h=-1;for(var f=0,m;null!=(m=c.exec(g));)h=m.index,c.lastIndex=++f;return h}function Mn(g,c){return"undefined"===typeof jc.JsDiff?"diff not supported":jc.JsDiff.convertChangesToXML(jc.JsDiff.diffWordsWithSpace(g,c))}function om(g){return""==g}function Vl(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Np(g,c){var h=parseFloat(g);return isNaN(h)?g:h.toFixed(c)}function xs(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function ys(g){return g.split(" ").map(jc.capitalize).join("")}function zs(g){var c=g.split("-"),h=c.length;if(1==h)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<h;f++)g+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return g}
function av(g,c,h){c=c||30;h=void 0===h?"...":h;return g.length>c?g.slice(0,c-h.length)+h:String(g)}function As(g,c,h){c=c||30;return g.length>c?(void 0===h?"...":h)+g.slice(-c):String(g)}function Nn(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function bv(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function cv(g){return g.charCodeAt(0)-48}function dv(g,c){for(var h=[],f=0;f<g.length;f++){h[f]=[];for(var m=0;m<c.length;m++)h[f][m]=
0}for(f=0;f<g.length;f++)h[f][0]=0;for(f=1;f<g.length;f++)for(m=1;m<c.length;m++)h[f][m]=g[f-1]==c[m-1]?h[f-1][m-1]+1:0;for(var n=m=f=-1,a=0;a<g.length;a++)for(var d=0;d<c.length;d++){var k=h[a][d];f<k&&(f=k,m=a-k,n=d-k)}return{length:f,indexA:m,indexB:n,string:0<f?g.slice(m,m+f):""}}function ev(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function fv(g,c){return c.reduce(function(h,f){return jc.applyChange(g,
f)},g)}function gv(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var h;if(g.length>c.length){var f=g;g=c;c=f}var m=Array(g.length+1);for(f=0;f<=g.length;f++)m[f]=f;for(f=1;f<=c.length;f++){var n=f;for(h=1;h<=g.length;h++){var a=c[f-1]===g[h-1]?m[h-1]:Math.min(m[h-1]+1,Math.min(n+1,m[h]+1));m[h-1]=n;n=a}m[g.length]=n}return m[g.length]}function hv(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function iv(g){return Math.floor(Math.random()*g)}function jv(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function kv(g){return g.reduce(function(c,h){return c+h},0)/g.length}function lv(g,c,h){return(g-c)/h+c}function mv(g){var c=g.sort(function(h,f){return f-h});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function nv(g,c,h,f){f=f||0;if(c<h)var m=h;else m=c,c=h;return 0<=m-g+f&&0>=c-g-f}function ov(g,c,h){return Math.max(c,Math.min(h,g))}function pv(g){return g.sort(function(c,
h){return c-h})}function qv(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var h=parseFloat(g[1]);return qf.convertLength(h,g[2],c)}}function rv(g){if(!isFinite(g))return 0;for(var c=1,h=0;Math.round(g*c)/c!==g;)c*=10,h++;return h}function sv(g,c){c=1/c;return Math.round(g*c)/c}function Bs(g,c,h,f){var m=qf.roundTo(g,h);return Math.abs(g-m)<c/2?m:f?g:m+(g-(g<m?m-c/2:m+c/2))*h/(h-c)}function Cs(g){return 180*g/Math.PI%360}function Ds(g){return g/180*Math.PI}function tv(g,c,h){c=void 0===
c?5:c;h=void 0===h?3E4:h;g=Math.min(h,c*Math.pow(2,g));return Math.min(h,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function uv(g,c,h){return c+g*(h-c)}function Io(g,c){var h=[],f;for(f in g)(g.__lookupGetter__(f)||"function"!==typeof g[f])&&(c?c(f,g):1)&&h.push(f);return h}function Op(g,c){return Object.getOwnPropertyNames(g).reduce(function(h,f){(c?c(g,f):1)&&h.push(f);return h},[])}function Es(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&(g.__lookupGetter__(h)||"function"!==g[h])&&
c.push(h);return c}function Tq(g,c,h){var f=[],m;for(m in g)if(g.hasOwnProperty(m)){var n=g[m];"function"!==n&&f.push(c.call(h||this,m,n))}return f}function Fs(g,c){for(var h in g)if(g[h]===c)return h}function Pp(g){var c=[],h;for(h in g)c.push(g[h]);return c}function vv(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&c.push(g[h]);return c}function Uq(g,c){for(var h in g)if(c(g,h))return!0;return!1}function Vq(g,c){var h=[],f;for(f in g)(c?c(g,f):1)&&h.push(f);return h}function Qp(g){return Object.keys(g).sort().join("").hashCode()}
function Gs(g,c,h){return Wl.dateFormat(g,c,h)}function Hs(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function Is(g,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var f="min",m="sec",n="hour",a="day",d=Math.round((c-g)/1E3);g=d%60;c=Math.floor(d/60)%60;var k=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var b=[];0<d&&(b.push(d),1<d&&(a+="s"),b.push(a));if(h.forceHours||0<k&&2>d)b.push(k),1<k&&(n+="s"),b.push(n);if(h.forceMinutes||0<c&&3>k&&0===
d)b.push(c),1<c&&(f+="s"),b.push(f);if(h.forceSeconds||0<g&&3>c&&0===k&&0===d)b.push(g),1<g&&(m+="s"),b.push(m);return b.join(" ")}function Vf(g){return"function"===typeof g?Vf.convertCallbackFun(g):Promise.resolve(g)}function dy(g,c){return new Promise(function(h){return setTimeout(h,g,c)})}function ey(g,c){return new Promise(function(h,f){return setTimeout(f,g,c)})}function fy(g,c){return new Promise(function(h,f){var m=!1;setTimeout(function(){return!m&&(m=!0)&&f(Error("Promise timed out"))},g);
c.then(function(n){return!m&&(m=!0)&&h(n)},function(n){return!m&&(m=!0)&&f(n)})})}function gy(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function Js(g,c,h){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(f,m){var n=!1,a=!1,d,k,b=setInterval(function(){if(n)clearInterval(b),delete sf.waitForClosures[b];else{try{k=c()}catch(e){d=e}if(k||d||a)return n=!0,clearInterval(b),delete sf.waitForClosures[b],d?m(d):a?"undefined"===typeof h?m(Error("timeout")):
f(h):f(k)}},10);sf.waitForClosures[b]=b;"number"===typeof g&&setTimeout(function(){return a=!0},g)})}function hy(){var g,c,h=new Promise(function(f,m){g=f;c=m});return{resolve:g,reject:c,promise:h}}function Ks(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(n,a){return n?m(n):f(a)});g.apply(h,c)})}}function iy(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(){var n=Array.from(arguments),
a=n.shift();return a?m(a):f(n)});g.apply(h,c)})}}function jy(g,c,h,f,m){var n=g.shift();if(n)try{Promise.resolve(n(c,h)).then(function(a){return jy(g,a,h,f,m)}).catch(function(a){m(a)})}catch(a){m(a)}else f(c)}function Ls(g){return new Promise(function(c,h){return sf._chainResolveNext(g.slice(),void 0,{},c,h)})}function ky(g,c){return Promise.resolve(g).then(function(h){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return h}).catch(function(h){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw h;})}function ly(g,c){function h(){c--;try{var e=a++;g[e]().then(function(l){c++;m[e]=l;0===--d?k():f()}).catch(function(l){return b(l)})}catch(l){b(l)}}function f(){for(;!n&&0<d&&a<g.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var m=[],n=null,a=0,d=g.length,k,b;return new Promise(function(e,l){k=function(){return e(m)};b=function(p){return l(n=p)};f()})}function Ag(g,c){if(g instanceof Ag)return g;if(!(this instanceof Ag))return new Ag(g,c);
this.setSplitter(c||".");this.fromPath(g)}function Wq(g){var c={},h;for(h in g)c[h]=g[h].slice();return c}function Xq(g,c){var h={},f;for(f in g)if(!c.includes(f)){h[f]=[];for(var m=g[f],n=0;n<m.length;n++){var a=m[n];c.includes(a)||h[f].push(a)}}return h}function wv(g,c,h,f){h=void 0===h?[]:h;f=void 0===f?Infinity:f;if(!Array.isArray(g[c]))return[];for(var m=[],n={},a={},d=0;d<h.length;d++)a[h[d]]=!0;c=g[c].slice();d={};for(var k=c.length;k--;){var b=c[k];b in a?c.splice(k,1):d[b]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(b=c.shift(),!(b in n||b in a)&&(k=d[b]||0,!(k>f)&&(m.push(b),n[b]=!0,b=g[b])))for(var e=0;e<b.length;e++){var l=b[e];l in n||l in d||(d[l]=k+1,c.push(l))}return m}function xv(g,c,h,f){f=void 0===f?Infinity:f;h&&(g=Oh.without(g,h));c=[c];h=0;for(var m={};c.length&&h++<f;){var n=c.shift();if(!m[n]){var a=g[n]||[];m[n]=a;c.push.apply(c,$jscomp.arrayFromIterable(a))}}return m}function yv(g){var c={},h;for(h in g)for(var f=g[h],m=0;m<f.length;m++){var n=f[m];c[n]?c[n].push(h):
c[n]=[h]}return c}function Ms(g,c){c=[];var h={},f={},m={};for(e in g){h.hasOwnProperty(e)||(h[e]=!0,c.push(e));var n=g[e],a={};if(n){f[e]=[];n=$jscomp.makeIterator(n);for(var d=n.next();!d.done;d=n.next())if(d=d.value,!a.hasOwnProperty(d)&&e!==d){var k=m[d]||(m[d]=[]);k.includes(e)||k.push(e);a[d]=!0;f[e].push(d);h.hasOwnProperty(d)||(h[d]=!0,c.push(d))}}}for(g=[];c.length;){h=Infinity;var b=[];a=[];n=[];for(d=0;d<c.length;d++){var e=c[d];k=f[e]||[];k.length>h||(k.length!==h||k.some(function(l){return b.includes(l)})?
(h=k.length,b=[e],a=[d],n=(m[e]||[]).slice()):(b.push(e),a.push(d),n.push.apply(n,$jscomp.arrayFromIterable(m[e]||[]))))}for(d=a.length;d--;)e=c[a[d]],m[e]=[],c.splice(a[d],1);h=$jscomp.makeIterator(n);for(e=h.next();!e.done;e=h.next())e=e.value,f[e]=f[e].filter(function(l){return!b.includes(l)});g.push(b)}return g}function Ns(g,c,h,f,m,n){function a(b){-1<d.indexOf(b)||(f=g.call(n,f,b,k++),d=d.concat([b]),Oh.withoutAll(c[b]||[],d).forEach(function(e){return a(e)}))}var d=m||[],k=0;a(h);return f}
function zv(g){g=void 0===g?10:g;for(var c={},h=Oh.range(1,g).map(String),f=0;f<h.length;f++){var m=Math.floor(Math.random()*g);c[h[f]]=Oh.shuffle(h).slice(0,m)}return c}function Os(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Ps(g){return g.sort(Jg.compare)}function Qs(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*Qs(c,g)}function Av(g,c,h){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return h&&h(g,c,g),g;case 2:case 1:var f=
g;g=c;c=f;case -2:case -1:return f=[g[0],Math.max(g[1],c[1])],h&&h(g,c,f),f;default:throw Error("Interval compare failed");}}function Bv(g,c){for(var h=[],f=g.length;0<f;){var m=g.shift();f--;for(var n=0;n<f;n++){var a=Jg.coalesce(m,g[n],c);a&&(m=a,g.splice(n,1),f--,n--)}h.push(m)}return this.sort(h)}function Rp(g,c,h){for(var f=[];0<g.length;){var m=g.shift(),n=c.map(function(a){a=Jg.compare(m,a);return-1===a||0===a||1===a});f.push(h(m,n[0]));f.push(m)}return f}function Sp(g,c,h,f,m,n){n=n||Jg.GLOBAL;
h=this.sort(h);for(var a,d=[];a=h.shift();)if(!(a[1]<g)){a[0]<g&&(a=Array.prototype.slice.call(a),a[0]=g);var k=c<a[0]?c:a[0];g<k&&d.push(f.call(n,[g,k],!0));c<a[1]&&(a=Array.prototype.slice.call(a),a[1]=c);if(a[0]===a[1]){var b;m&&(b=d.slice(-1)[0])&&m.call(n,b,a,b)}else d.push(f.call(n,a,!1));g=a[1];if(g>=c)break}g<c&&d.push(f.call(n,[g,c],!0));return d}function Jo(g,c,h){return Jg.intervalsInRangeDo(g,c,Jg.coalesceOverlapping(Array.prototype.slice.call(h)),function(f,m){return m?f:null}).filter(Boolean)}
function Yq(g,c){var h=0,f,m;return c.map(function(n){for(;m=g[h];)if(m[0]<n[0])h++;else break;if(m&&m[0]===n[0]){for(f=h;m=g[f];)if(m[1]<n[1])f++;else break;if(m&&m[1]===n[1])return Jg.range(h,f)}return[]})}function Rs(g,c,h){h=h||0;h+c>g.length&&(h-=h+c-g.length);return{array:g,from:h,to:h+c}}function Ss(g){return g.array.slice(g.from,g.to)}function Ts(g,c){return c<g.from||c>=g.to?null:c-g.from}function Cv(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function Dv(g,c){if(!(c in g.array))return null;
var h=0;c<g.from&&(h=-g.from+c);c>=g.to&&(h=c-g.to+1);return 0===h?g:ml.create(g.array,g.to-g.from,g.from+h)}function Ev(g,c,h){return(g=g[c])?g[h]:void 0}function Fv(g,c,h,f){(g=g[c])&&(g[h]=f);return f}function Zq(g,c){return g[c]}function Us(g,c,h){return g[c]=h}function $q(g,c){return g.reduce(function(h,f){h.push(f[c]);return h},[])}function Vs(g,c,h){return g.map(function(f,m){return f[c]?f[c]=h[m]:void 0})}function Gv(g,c,h){for(var f=Array(g);0<g;)f[--g]=kg.arrayWithN(c,h);return f}function Ws(g,
c,h,f){for(var m=Array(g),n=0;n<g;n++){m[n]=Array(c);for(var a=0;a<c;a++)m[n][a]=h.call(f||this,n,a)}return m}function Xs(g,c,h){g.forEach(function(f,m){f.forEach(function(n,a){c.call(h||this,n,m,a)})})}function ar(g,c,h){var f=Array(g.length);g.forEach(function(m,n){f[n]=Array(m.length);m.forEach(function(a,d){f[n][d]=c.call(h||this,a,n,d)})});return f}function Ys(g){for(var c=g[0],h=Array(g.length-1),f=1;f<g.length;f++)for(var m=h[f-1]={},n=0;n<c.length;n++)m[c[n]]=g[f][n];return h}function Hv(g,
c){Array.isArray(g)||(g=[g]);var h=[[]],f=h[0],m=g.reduce(function(n,a){return n.concat([Object.keys(a).reduce(function(d,k){var b=f.indexOf(k);-1===b&&(b=f.length,f.push(k));d[b]=a[k];return d},[])])},[]);c=1===arguments.length?null:c;m.forEach(function(n){for(var a=0;a<f.length;a++)n[a]||(n[a]=c)});return h.concat(m)}function Zs(g,c,h,f,m){f=void 0===f?{i:0}:f;m=void 0===m?0:m;var n=f.i++;c(g,n,m);(h(g,n,m)||[]).forEach(function(a){return Zs(a,c,h,f,m+1)})}function br(g,c,h,f,m){f=void 0===f?{i:0}:
f;m=void 0===m?0:m;var n=f.i++;(h(g,n,m)||[]).forEach(function(a){return br(a,c,h,f,m)});c(g,n,m)}function $s(g,c,h){if(c(g))return g;if((g=h(g))&&g.length)for(var f=0;f<g.length;f++){var m=$s(g[f],c,h);if(m)return m}}function at(g,c,h){var f=[];c(g)&&f.push(g);return f.concat(Si.flatten((h(g)||[]).map(function(m){return at(m,c,h)})))}function bt(g,c,h,f){f=void 0===f?0:f;return[c(g,f)].concat(Si.flatten((h(g)||[]).map(function(m){return bt(m,c,h,f+1)})))}function On(g,c,h,f){f=void 0===f?0:f;var m=
(h(g)||[]).map(function(n){return On(n,c,h,f+1)});return c(g,m,f)}function ct(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(a){return a.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(a){if(!g[a.name])throw a="message implementation needs function "+a.name+"("+a.args.join(",")+
")",Error(a);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var f=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,m={_outgoing:[],_inflight:[],_id:g.id||rj.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:rj.OFFLINE,_runWhenOnlineCallbacks:function(){var a=m._whenOnlineCallbacks.slice();m._whenOnlineCallbacks=
[];a.forEach(function(d){try{d.call(null,null,m)}catch(k){console.error("error in _runWhenOnlineCallbacks: %s",k)}})},_ensureStatusWatcher:function(){m._statusWatcherProc||(m._statusWatcherProc=setInterval(function(){m.isOnline()&&m._whenOnlineCallbacks.length&&m._runWhenOnlineCallbacks();var a=m._status;m._status=m.isOnline()?rj.ONLINE:rj.OFFLINE;m._status!==rj.ONLINE&&m._statusWatcherProc&&m.reconnect();if(m._status!==a&&m.onStatusChange)m.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw Error("Message needs target!");
if(!a.action)throw Error("Message needs action!");a.data||(a.data=null);a.messageId||(a.messageId=rj.newUUID());a.sender=m.id();a.messageIndex=m._messageCounter++;return a},_queueSend:function(a,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);m._outgoing.push([a,d])},_deliverMessageQueue:function(){function a(b){if(-1!==m._inflight.indexOf(b)){var e=b[0],l=b[1];l&&(m._messageResponseCallbacks[e.messageId]=l);g.send.call(m,e,function(p){rj.remove(m._inflight,b);
p&&d(p,b);m._deliverMessageQueue()})}}function d(b,e){var l=e[1];delete m._messageResponseCallbacks[e[0].messageId];console.error(b);l&&l(b)}if(g.allowConcurrentSends||!m._inflight.length){var k=m._outgoing.shift();k&&(m._inflight.push(k),m.isOnline()?a(k):m.whenOnline(function(){a(k)}),function(b){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==m._inflight.indexOf(b)&&(rj.remove(m._inflight,b),d(Error("Timeout sending message"),b),m._deliverMessageQueue())},g.sendTimeout)}(k),g.allowConcurrentSends&&
m._outgoing.length&&m._deliverMessageQueue())}},_startHeartbeatProcess:function(){m._startHeartbeatProcessProc||(m._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(m,function(a,d){m._startHeartbeatProcessProc=null;m._startHeartbeatProcess()})},m._heartbeatInterval))},id:function(){return m._id},isOnline:function(){return g.isOnline.call(m)},heartbeatEnabled:function(){return"number"===typeof m._heartbeatInterval},listen:function(a){if(!m._listenInProgress)return m._listenInProgress=
!0,m._ensureStatusWatcher(),g.listen.call(m,function(d){m._listenInProgress=null;a&&a(d);m.heartbeatEnabled()&&m._startHeartbeatProcess()})},reconnect:function(){if(m._status!==rj.ONLINE)return m.listen(),m},send:function(a,d){m._addMissingData(a);m._queueSend(a,d);m._deliverMessageQueue();return a},sendTo:function(a,d,k,b){return m.send({target:a,action:d,data:k},b)},onMessage:function(a){m.emit("message",a);if(a.inResponseTo){var d=m._messageResponseCallbacks[a.inResponseTo];d&&!a.expectMoreResponses&&
delete m._messageResponseCallbacks[a.inResponseTo];d&&d(null,a)}else if(d=m._services[a.action])try{d.call(null,a,m)}catch(k){d=String(k.stack||k),console.error("Error invoking service: "+d),m.answer(a,{error:d})}else m._ignoreUnknownMessages||m.answer(a,{error:String(Error("messageNotUnderstood: "+a.action))})},answer:function(a,d,k,b){"function"===typeof k&&(b=k,k=!1);a={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:d};k&&(a.expectMoreResponses=!0);return m.send(a,b)},close:function(a){clearInterval(m._statusWatcherProc);
m._statusWatcherProc=null;g.close.call(m,function(d){m._status=rj.OFFLINE;a&&a(d)});return m},whenOnline:function(a){m._whenOnlineCallbacks.push(a);m.isOnline()&&m._runWhenOnlineCallbacks();return m},outgoingMessages:function(){return rj.pluck(m._inflight.concat(m._outgoing),0)},addServices:function(a){Object.assign(m._services,a);return m}};g.services&&m.addServices(g.services);rj.makeEmitter(m);for(var n in g)-1===h.indexOf(n)&&g.hasOwnProperty(n)&&(m[n]=g[n]);return m}function Iv(g,c,h){h||(h=
c,c=g,g=null);g=g||{};var f=g.args||[];g=lg.create(g);g.run.apply(g,[c].concat(f).concat(h));return g}function Ko(g){g=g||{};g.useMessenger=!0;var c=g.workerId||lg.newUUID(),h=lg.messengerCreate({sendTimeout:5E3,send:function(f,m){h.worker.postMessage(f);m()},listen:function(f){var m=h.worker=lg.isNodejs?lg.NodejsWorker.create(g):lg.BrowserWorker.create(g);m.on("message",function(n){h.onMessage(n)});m.on("ready",function(){lg.NodejsWorker.debug&&console.log("WORKER READY!!!")});m.on("close",function(){lg.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});m.once("ready",f)},close:function(f){return h.worker.ready?h.sendTo(c,"close",{},function(m,n){(m=m||n.data.error)&&console.error("Error in worker messenger close: "+m.stack||m);if(m)f(m);else{var a=!1;h.worker.once("close",function(){a=!0});lg.waitFor(1E3,function(){return!!a},f)}}):f(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(f,m){h.sendTo(c,"remoteEval",{expr:f},function(n,a){m(n,a?a.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),m=f.shift(),n=f.pop();if("function"!==typeof m)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(m),args:f},function(a,d){n(a||d.data.error,d?d.data.result:null)})}});h.listen();return h}function Sm(){if(!bd.isNode||bd.GLOBAL.lively||bd.GLOBAL.lively)if(bd.livelyLang._prevLivelyGlobal=bd.GLOBAL.lively,bd.GLOBAL.lively||(bd.GLOBAL.lively={}),bd.GLOBAL.lively.lang)for(var g in bd.livelyLang)bd.GLOBAL.lively.lang[g]=
bd.livelyLang[g];else bd.GLOBAL.lively.lang=bd.livelyLang}function pm(g){if(!g)return g;if(Array.isArray(g))return bd.createChain(bd.arr,g);if("Date"===g.constructor.name)return bd.createChain(bd.date,g);switch(typeof g){case "string":return bd.createChain(bd.string,g);case "object":return bd.createChain(bd.obj,g);case "function":return bd.createChain(bd.fun,g);case "number":return bd.createChain(bd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function dt(){bd.isNode||
(bd.livelyLang._prevLivelyGlobal?delete bd.GLOBAL.lively.lang:delete bd.GLOBAL.lively);return bd.livelyLang}function et(){Object.assign(bd.livelyLang,{worker:bd.worker,messenger:bd.messenger,events:bd.events,tree:bd.tree,grid:bd.grid,arrayProjection:bd.arrayProjection,interval:bd.interval,graph:bd.graph,date:bd.date,properties:bd.properties,obj:bd.obj,arr:bd.arr,fun:bd.fun,num:bd.num,string:bd.string,Closure:bd.Closure,promise:bd.promise,Path:bd.Path,Group:bd.Group});bd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=bd.Path(g.target);c.isIn(bd.GLOBAL)||c.set(bd.GLOBAL,{},!0);var h=bd.Path(g.sources[0]);g.methods.forEach(function(f){bd.installProperty(h.concat([f]),c.concat([f]))});g.alias&&g.alias.forEach(function(f){bd.installProperty(h.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===g.action)c=bd.Path(g.target),g=bd.Path(g.source).get(bd.livelyLang),c.set(bd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function Jv(){bd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=bd.Path(g.target),h=bd.Path(g.source).get(bd.livelyLang),f=c.get(bd.GLOBAL);f&&(g.methods.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m]}),g.alias&&g.alias.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m[0]]}))}else if("installObject"===g.action)c=bd.Path(g.target),c.del(bd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function ft(g,c){var h=void 0===g.useProxy?!0:g.useProxy,f=void 0===g.useCors?!0:g.useCors,
m=g.url,n=g.onLoad,a=g.headers,d=g.onProgress,k=new vf.XMLHttpRequest,b=vf.promise.deferred();k.open("PUT",m);h&&(Object.assign(a,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||vf.defaultOrigin());for(var e in a)k.setRequestHeader(e,a[e]);k.upload.addEventListener("progress",d);k.responseType="json";k.onload=function(){n(k.response);b.resolve(k)};f&&(k.withCredentials=!0);k.send(c);return b.promise}function Kv(g,c,h){c=void 0===c?"infinity":c;var f,m,n,
a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(g.dirList(c,h),2);case 2:f=w.yieldResult,m={},n=$jscomp.makeIterator(f),a=n.next();case 3:if(a.done){w.jumpTo(5);break}d=a.value;if(d.isDirectory()){k={};w.jumpTo(6);break}return w.yield(d.read(),7);case 7:k=w.yieldResult;case 6:b=k;e=d.asFile().relativePathFrom(g).split("/");l=m;p=$jscomp.makeIterator(e.slice(0,-1));for(q=p.next();!q.done;q=p.next())u=q.value,l[u]||(l[u]={}),
l=l[u];l[e[e.length-1]]=b;a=n.next();w.jumpTo(3);break;case 5:return w.return(m)}})}function gt(g){var c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c=document.head,h=c.namespaceURI,f=Bg.newUUID(),m=document.createElementNS(h,"script"),m.setAttribute("type","module"),c.appendChild(m),m.innerText="import m from '"+g+"'; window['"+f+"'] = m;",m.setAttributeNS(null,"async",!0),a.yield(Bg.waitFor(3E4,function(){return window[f]}),2);n=a.yieldResult;
delete window[f];m.remove();return a.return(n)})}function Tp(g,c){var h=document.head,f=h.namespaceURI;return new Promise(function(m,n){var a=document.createElementNS(f,"script");a.setAttribute("type","text/ecmascript");h.appendChild(a);a.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttributeNS("http://www.w3.org/1999/xlink","href",g):a.setAttribute("src",g);a.onload=m;a.onerror=n;a.setAttributeNS(null,"async",!0)})}function cr(){var g,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return m.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){m.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");m.leaveTryBlock(3);break}return m.yield(System.import("fetch-ponyfill",g),4);case 4:c=m.yieldResult;m.jumpTo(3);break;case 5:return m.enterCatchBlock(),m.yield(System.normalize("fetch-ponyfill",g),7);case 7:return h=m.yieldResult.replace("file://",""),m.yield(System.import(h),8);
case 8:f=m.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),m.jumpToEnd()}})}function ht(g){return(g=g.match(bS))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function X(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function ma(g){var c=g,h=ht(g);if(h){if(!h.path)return g;c=h.path}g=ak.isAbsolute(c);c=c.split(/\/+/);for(var f,m=0,n=c.length-1;0<=n;n--)f=c[n],"."===f?c.splice(n,
1):".."===f?m++:0<m&&(""===f?(c.splice(n+1,m),m=0):(c.splice(n,2),m--));c=c.join("/");""===c&&(c=g?"/":".");return h?(h.path=c,X(h)):c}function Sa(g,c){""===g&&(g=".");""===c&&(c=".");var h=ht(c),f=ht(g);f&&(g=f.path||"/");if(h&&!h.scheme)return f&&(h.scheme=f.scheme),X(h);if(h||c.match(C6))return c;if(f&&!f.host&&!f.path)return f.host=c,X(f);g="/"===c.charAt(0)?c:ma(g.replace(/\/+$/,"")+"/"+c);return f?(f.path=g,X(f)):g}function kb(g){return g}function Qb(g){return Xc(g)?"$"+g:g}function bc(g){return Xc(g)?
g.slice(1):g}function Xc(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function ee(g,c){return g===c?0:null===g?1:null===c?-1:g>c?1:-1}function he(){(this||Xk)._array=[];(this||Xk)._set=it?new Map:Object.create(null)}
function af(){(this||Tm)._array=[];(this||Tm)._sorted=!0;(this||Tm)._last={generatedLine:-1,generatedColumn:0}}function $e(g){g||(g={});(this||Kg)._file=Hj.getArg(g,"file",null);(this||Kg)._sourceRoot=Hj.getArg(g,"sourceRoot",null);(this||Kg)._skipValidation=Hj.getArg(g,"skipValidation",!1);(this||Kg)._sources=new VB;(this||Kg)._names=new VB;(this||Kg)._mappings=new D6;(this||Kg)._sourcesContents=null}function xh(g,c,h,f,m,n){var a=Math.floor((c-g)/2)+g,d=m(h,f[a],!0);return 0===d?a:0<d?1<c-a?xh(a,
c,h,f,m,n):n==WB.LEAST_UPPER_BOUND?c<f.length?c:-1:a:1<a-g?xh(g,a,h,f,m,n):n==WB.LEAST_UPPER_BOUND?a:0>g?-1:g}function ki(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function Lg(g,c,h,f){if(h<f){var m=h-1;ki(g,Math.round(h+Math.random()*(f-h)),f);for(var n=g[f],a=h;a<f;a++)0>=c(g[a],n)&&(m+=1,ki(g,m,a));ki(g,m+1,a);m+=1;Lg(g,c,h,m-1);Lg(g,c,m+1,f)}}function yh(g,c){var h=g;"string"===typeof g&&(h=kf.parseSourceMapInput(g));return null!=h.sections?new Ij(h,c):new mh(h,c)}function mh(g,c){var h=g;"string"===
typeof g&&(h=kf.parseSourceMapInput(g));g=kf.getArg(h,"version");var f=kf.getArg(h,"sources"),m=kf.getArg(h,"names",[]),n=kf.getArg(h,"sourceRoot",null),a=kf.getArg(h,"sourcesContent",null),d=kf.getArg(h,"mappings");h=kf.getArg(h,"file",null);if(g!=(this||ie)._version)throw Error("Unsupported version: "+g);n&&(n=kf.normalize(n));f=f.map(String).map(kf.normalize).map(function(k){return n&&kf.isAbsolute(n)&&kf.isAbsolute(k)?kf.relative(n,k):k});(this||ie)._names=Lv.fromArray(m.map(String),!0);(this||
ie)._sources=Lv.fromArray(f,!0);(this||ie)._absoluteSources=(this||ie)._sources.toArray().map(function(k){return kf.computeSourceURL(n,k,c)});(this||ie).sourceRoot=n;(this||ie).sourcesContent=a;(this||ie)._mappings=d;(this||ie)._sourceMapURL=c;(this||ie).file=h}function Di(){(this||ie).generatedLine=0;(this||ie).generatedColumn=0;(this||ie).source=null;(this||ie).originalLine=null;(this||ie).originalColumn=null;(this||ie).name=null}function Ij(g,c){var h=g;"string"===typeof g&&(h=kf.parseSourceMapInput(g));
g=kf.getArg(h,"version");h=kf.getArg(h,"sections");if(g!=(this||ie)._version)throw Error("Unsupported version: "+g);(this||ie)._sources=new Lv;(this||ie)._names=new Lv;var f={line:-1,column:0};(this||ie)._sections=h.map(function(m){if(m.url)throw Error("Support for url field in sections not implemented.");var n=kf.getArg(m,"offset"),a=kf.getArg(n,"line"),d=kf.getArg(n,"column");if(a<f.line||a===f.line&&d<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=n;return{generatedOffset:{generatedLine:a+
1,generatedColumn:d+1},consumer:new yh(kf.getArg(m,"map"),c)}})}function Yk(g,c,h,f,m){(this||zh).children=[];(this||zh).sourceContents={};(this||zh).line=null==g?null:g;(this||zh).column=null==c?null:c;(this||zh).source=null==h?null:h;(this||zh).name=null==m?null:m;(this||zh).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function Yi(g,c){c=void 0===c?{}:c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},qm.obj.dissoc(c&&
c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},qm.obj.dissoc(c,["format"]));return qm.es.generate(g,c)}function Up(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function Bl(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&E6.test(String.fromCharCode(g)):!1===c?!1:Up(g,cS)}function Um(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&F6.test(String.fromCharCode(g)):!1===c?!1:Up(g,
cS)||Up(g,G6)}function Vm(g,c){return new Vh(g,{beforeExpr:!0,binop:c})}function Gh(g,c){void 0===c&&(c={});c.keyword=g;return XB[g]=new Vh(g,c)}function Mv(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function jt(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function dK(g,c){for(var h=1,f=0;;){Nv.lastIndex=f;var m=Nv.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new Ov(h,c-f)}}function H6(g){var c={},h;for(h in YB)c[h]=g&&ZB.call(g,h)?g[h]:YB[h];"latest"===c.ecmaVersion?
c.ecmaVersion=1E8:null==c.ecmaVersion?(!dS&&"object"===typeof console&&console.warn&&(dS=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(eS(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}eS(c.onComment)&&(c.onComment=I6(c,c.onComment));return c}function I6(g,c){return function(h,
f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,end:n};g.locations&&(h.loc=new my(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function $B(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function fS(g,c,h,f){g.type=c;g.end=h;this.options.locations&&(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function aC(g){g=gS[g]={binary:jt(J6[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:jt("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:jt(K6[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function bC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function hS(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function iS(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function L6(g){return iS(g)||cC(g)}function cC(g){return 48<=
g&&57>=g}function jS(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function kS(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function lS(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function eK(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function dC(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function mS(g,c){c=Object.create(c||te);for(var h in g)c[h]=
g[h];return c}function fK(g,c,h){h(g,c)}function kt(g,c,h){}function gK(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function Vp(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&M6.test(String.fromCharCode(g)):!1===c?!1:gK(g,nS)}function Pv(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&N6.test(String.fromCharCode(g)):!1===c?!1:gK(g,nS)||gK(g,O6)}function Wm(g,c){return new Wh(g,{beforeExpr:!0,
binop:c})}function Hh(g,c){void 0===c&&(c={});c.keyword=g;return hK[g]=new Wh(g,c)}function dr(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function lt(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function ny(g,c){for(var h=1,f=0;;){mt.lastIndex=f;var m=mt.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new oy(h,c-f)}}function P6(g){var c={},h;for(h in eC)c[h]=g&&py.call(g,h)?g[h]:eC[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!oS&&"object"===
typeof console&&console.warn&&(oS=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(pS(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}pS(c.onComment)&&(c.onComment=Q6(c,c.onComment));return c}function Q6(g,c){return function(h,f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,
end:n};g.locations&&(h.loc=new Qv(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function fC(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function gC(g,c){var h=g.key;return!g.computed&&("Identifier"===h.type&&h.name===c||"Literal"===h.type&&h.value===c)}function qS(g){return"MemberExpression"===g.type&&"PrivateIdentifier"===g.property.type||"ChainExpression"===g.type&&qS(g.expression)}function rS(g,c,h,f){g.type=c;g.end=h;this.options.locations&&
(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function hC(g){g=sS[g]={binary:lt(R6[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:lt("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:lt(S6[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function iC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function tS(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function uS(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function T6(g){return uS(g)||jC(g)}function jC(g){return 48<=
g&&57>=g}function vS(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function wS(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function xS(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function kC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Lo(g){return"\u2716"===g.name}function yS(){}function U6(g){return 14>g&&8<g||32===g||160===g||dr(g)}function lC(g,c,h,f){var m=[];f=f||re.walk.make(re.custom.withMemberExpression);
Object.keys(re.walk.base).forEach(function(n){var a=f[n];f[n]=function(d,k,b){re.arr.pushIfNotIncluded(m,d);return a(d,k,b)}});f.Property=function(n,a,d){re.arr.pushIfNotIncluded(m,n);d(n.key,a,"Expression");d(n.value,a,"Expression")};f.LabeledStatement=function(n,a,d){n.label&&d(n.label,a,"Expression");d(n.body,a,"Statement")};re.walk.findNodeAround(g,c,h,f);return m}function iK(g,c){function h(m){return null===m?null:f[m.type](m,h)}var f=re.obj.extend({Program:function(m,n){return{start:m.start,
end:m.end,type:"Program",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},FunctionDeclaration:function(m,n){return{start:m.start,end:m.end,type:"FunctionDeclaration",id:n(m.id),params:m.params.map(n),body:n(m.body),source:m.source,astIndex:m.astIndex}},BlockStatement:function(m,n){return{start:m.start,end:m.end,type:"BlockStatement",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},ExpressionStatement:function(m,n){return{start:m.start,end:m.end,type:"ExpressionStatement",expression:n(m.expression),
source:m.source,astIndex:m.astIndex}},CallExpression:function(m,n){return{start:m.start,end:m.end,type:"CallExpression",callee:n(m.callee),arguments:m.arguments.map(n),source:m.source,astIndex:m.astIndex}},MemberExpression:function(m,n){return{start:m.start,end:m.end,type:"MemberExpression",object:n(m.object),property:n(m.property),computed:m.computed,source:m.source,astIndex:m.astIndex}},NewExpression:function(m,n){return{start:m.start,end:m.end,type:"NewExpression",callee:n(m.callee),arguments:m.arguments.map(n),
source:m.source,astIndex:m.astIndex}},VariableDeclaration:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclaration",declarations:m.declarations.map(n),kind:m.kind,source:m.source,astIndex:m.astIndex}},VariableDeclarator:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclarator",id:n(m.id),init:n(m.init),source:m.source,astIndex:m.astIndex}},FunctionExpression:function(m,n){return{start:m.start,end:m.end,type:"FunctionExpression",id:n(m.id),params:m.params.map(n),body:n(m.body),
source:m.source,astIndex:m.astIndex}},IfStatement:function(m,n){return{start:m.start,end:m.end,type:"IfStatement",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},ConditionalExpression:function(m,n){return{start:m.start,end:m.end,type:"ConditionalExpression",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},SwitchStatement:function(m,n){return{start:m.start,end:m.end,type:"SwitchStatement",
discriminant:n(m.discriminant),cases:m.cases.map(n),source:m.source,astIndex:m.astIndex}},SwitchCase:function(m,n){return{start:m.start,end:m.end,type:"SwitchCase",test:n(m.test),consequent:m.consequent.map(n),source:m.source,astIndex:m.astIndex}},BreakStatement:function(m,n){return{start:m.start,end:m.end,type:"BreakStatement",label:m.label,source:m.source,astIndex:m.astIndex}},ContinueStatement:function(m,n){return{start:m.start,end:m.end,type:"ContinueStatement",label:m.label,source:m.source,astIndex:m.astIndex}},
TryStatement:function(m,n){return{start:m.start,end:m.end,type:"TryStatement",block:n(m.block),handler:n(m.handler),finalizer:n(m.finalizer),guardedHandlers:m.guardedHandlers.map(n),source:m.source,astIndex:m.astIndex}},CatchClause:function(m,n){return{start:m.start,end:m.end,type:"CatchClause",param:n(m.param),guard:n(m.guard),body:n(m.body),source:m.source,astIndex:m.astIndex}},ThrowStatement:function(m,n){return{start:m.start,end:m.end,type:"ThrowStatement",argument:n(m.argument),source:m.source,
astIndex:m.astIndex}},ForStatement:function(m,n){return{start:m.start,end:m.end,type:"ForStatement",init:n(m.init),test:n(m.test),update:n(m.update),body:n(m.body),source:m.source,astIndex:m.astIndex}},ForInStatement:function(m,n){return{start:m.start,end:m.end,type:"ForInStatement",left:n(m.left),right:n(m.right),body:n(m.body),source:m.source,astIndex:m.astIndex}},WhileStatement:function(m,n){return{start:m.start,end:m.end,type:"WhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},
DoWhileStatement:function(m,n){return{start:m.start,end:m.end,type:"DoWhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},WithStatement:function(m,n){return{start:m.start,end:m.end,type:"WithStatement",object:n(m.object),body:n(m.body),source:m.source,astIndex:m.astIndex}},UnaryExpression:function(m,n){return{start:m.start,end:m.end,type:"UnaryExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},BinaryExpression:function(m,
n){return{start:m.start,end:m.end,type:"BinaryExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},LogicalExpression:function(m,n){return{start:m.start,end:m.end,type:"LogicalExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},AssignmentExpression:function(m,n){return{start:m.start,end:m.end,type:"AssignmentExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},
UpdateExpression:function(m,n){return{start:m.start,end:m.end,type:"UpdateExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},ReturnStatement:function(m,n){return{start:m.start,end:m.end,type:"ReturnStatement",argument:n(m.argument),source:m.source,astIndex:m.astIndex}},Identifier:function(m,n){return{start:m.start,end:m.end,type:"Identifier",name:m.name,source:m.source,astIndex:m.astIndex}},Literal:function(m,n){return{start:m.start,end:m.end,
type:"Literal",value:m.value,raw:m.raw,source:m.source,astIndex:m.astIndex}},ObjectExpression:function(m,n){return{start:m.start,end:m.end,type:"ObjectExpression",properties:m.properties.map(function(a){return{key:n(a.key),value:n(a.value),kind:a.kind}}),source:m.source,astIndex:m.astIndex}},ArrayExpression:function(m,n){return{start:m.start,end:m.end,type:"ArrayExpression",elements:m.elements.map(n),source:m.source,astIndex:m.astIndex}},SequenceExpression:function(m,n){return{start:m.start,end:m.end,
type:"SequenceExpression",expressions:m.expressions.map(n),source:m.source,astIndex:m.astIndex}},EmptyStatement:function(m,n){return{start:m.start,end:m.end,type:"EmptyStatement",source:m.source,astIndex:m.astIndex}},ThisExpression:function(m,n){return{start:m.start,end:m.end,type:"ThisExpression",source:m.source,astIndex:m.astIndex}},DebuggerStatement:function(m,n){return{start:m.start,end:m.end,type:"DebuggerStatement",source:m.source,astIndex:m.astIndex}},LabeledStatement:function(m,n){return{start:m.start,
end:m.end,type:"LabeledStatement",label:m.label,body:n(m.body),source:m.source,astIndex:m.astIndex}}},c||{});return h(g)}function jK(g,c,h){if(!c)return[];g=re.findNodesIncluding(g,c.start);var f=g.indexOf(c);g=g.slice(0,f);g=re.arr.detect(g.reverse(),function(m){return Array.isArray(m.body)}).body;if(!h)return re.arr.without(g,c);c=g.indexOf(c);return"before"===h?g.slice(0,c):g.slice(c+1)}function kK(g,c,h){g.astIndex||null!=h&&!h||re.addAstIndex(g);var f=null;re.withMozillaAstDo(g,null,function(m,
n,a){f||n.astIndex<c||(n.astIndex===c?f=n:m())});return f}function lK(g,c,h){h||(h=c,c=g,g=null);g||(g={});c.astIndex||re.addAstIndex(c);var f,m=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");re.withMozillaAstDo(c,
{},function(a,d,k,b){if(!(m||d.astIndex<h.astIndex)){if(d===h||d.astIndex===h.astIndex)if(m=!0,g.asPath)f=b;else{d=re.Path(b);do f=d.get(c),d=d.slice(0,d.size()-1);while(-1==n.indexOf(f.type)&&0<d.size())}!m&&a()}});return f}function qy(g){re.withMozillaAstDo(g,{index:0},function(c,h,f){c();h.astIndex=f.index++});return g}function mC(g,c){"string"===typeof g&&(c=g,g=mg.parse(g));c&&mg.AllNodesVisitor.run(g,function(h,f,m){return!h.source&&(h.source=c.slice(h.start,h.end))});return g}function er(g,
c){c=void 0===c?{}:c;var h=mg.parse("("+g+")",c);mg.AllNodesVisitor.run(h,function(f,m,n){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=g.slice(f.start,f.end))}});return h.body[0].expression}function Wp(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+g+"}");try{var f=mg.parse(h||g,c);h?f=null:c.addSource&&mg.addSource(f,g)}catch(n){var m=n}m&&void 0!==m.raisedAt?(h&&(m.pos-=3,m.raisedAt-=3,m.loc.column-=3),h=""+g.slice(m.raisedAt-20,m.raisedAt),h=h+"<-error->"+g.slice(m.raisedAt,m.raisedAt+20),c.verbose&&console.log("parse error: "+h),m.parseErrorSource=h):m&&c.verbose&&
console.log(""+m+m.stack);f||(f=mg.loose.parse(g,c),c.addSource&&mg.addSource(f,g),f.isFuzzy=!0,f.parseError=m);return f}function Bj(g,c){function h(l){l=m(f(l));a.allComments=l.comments}function f(l){n.forEach(function(p){var q=mg.arr.detect(mg.nodesAt(p.start,a).reverse(),function(u){return"BlockStatement"===u.type||"Program"===u.type});q||(q=a);q.comments||(q.comments=[]);q.comments.push(p);l.nodesWithComments.push(q)});return l}function m(l){l.nodesWithComments.forEach(function(p){mg.arr.clone(p.comments).reduce(function(q,
u){if(u.isBlock)return q.lastComment=null,q;if(!q.lastComment)return q.lastComment=u,q;var w=q.lastComment;if(mg.arr.detect(p.body,function(A){return A.start>=w.end&&A.end<=u.start}))return q.lastComment=u,q;var y=g.slice(w.end,u.start);if(/[\n\r][\n\r]+/.test(y))return q.lastComment=u,q;w.text+="\n"+u.text;w.end=u.end;mg.arr.remove(p.comments,u);mg.arr.remove(l.comments,u);return q},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,p,q,u,w,y){n.push({isBlock:l,text:p,node:null,
start:q,end:u,line:w,column:y})}}try{var a=mg.acorn.parse(g,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var d=g.split("\n"),k=l,b=k.loc;c=b.line;b=b.column;var e=k.pos;d=d[c-1];k="Syntax error at line "+c+" column "+b+" (index "+e+') "'+k.message+'"\nsource: '+d.slice(0,b)+"<--SyntaxError--\x3e"+d.slice(b);k=new SyntaxError(k);k.loc={line:c,column:b};k.pos=e;throw k;}throw l;}c.addSource&&mg.addSource(a,g);c.addAstIndex&&!a.hasOwnProperty("astIndex")&&mg.addAstIndex(a);
a&&n&&h({ast:a,comments:n,nodesWithComments:[]});return a}function nC(g){return ne.identifierRe.test(g)&&-1===g.indexOf("-")}function ry(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function oC(g){return{type:"Literal",value:g}}function sy(g){return{type:"ExpressionStatement",expression:g}}function ty(g){return{type:"ReturnStatement",argument:g}}function pC(){return{type:"EmptyStatement"}}function qC(g,c,h){return{left:g,right:h,operator:c,type:"BinaryExpression"}}
function uy(g,c,h){for(var f=[],m=2;m<arguments.length;++m)f[m-2]=arguments[m];m=g.arrow;var n=g.id,a=g.expression,d=g.generator;c=void 0===c?[]:c;c=c.map(function(k){return"string"===typeof k?ne.id(k):k});return{type:(m?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?ne.id(n):n:void 0,params:c,body:a&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:a||!1,generator:d||!1}}function Rv(g,c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];"string"===typeof g&&(g=ne.id(g));
return{type:"CallExpression",callee:g,arguments:h}}function vy(g,c,h){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function wy(g,c,h){"string"===typeof g&&(g=ne.id(g));"string"===typeof c?(h||ne.isIdentifier(c)||(h=!0),c=h?ne.literal(c):ne.id(c)):"number"===typeof c?(c=ne.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:g,property:c}}function xy(g,
c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];return h.reduce(function(m,n){return ne.member(m,n)},"object"===typeof g?g:ne.id(g))}function rC(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?ne.id(c):c:ne.id("undefined"),left:"string"===typeof g?ne.id(g):g}}function yy(g){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function zy(g){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(ne.block.apply(ne,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Ay(g,c,h,f){for(var m=[],n=3;n<arguments.length;++n)m[n-3]=arguments[n];Array.isArray(h)||(m.unshift(h),h=null);return{block:ne.block(m),finalizer:h?ne.block(h):null,handler:{body:ne.block(c),param:ne.id(g),type:"CatchClause"},type:"TryStatement"}}function sC(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function tC(g){for(var c=
[],h=0;h<g.length;h+=2){var f=g[h];"string"===typeof f&&(f=ne.id(f));c.push(ne.prop(f,g[h+1]))}return{properties:c,type:"ObjectExpression"}}function uC(g,c,h){c=void 0===c?ne.block():c;h=void 0===h?ne.block():h;return{consequent:c,alternate:h,test:g,type:"IfStatement"}}function vC(g,c,h){return{type:"ForInStatement",left:"string"===typeof g?ne.varDecl(g):g,right:"string"===typeof c?ne.id(c):c,body:h}}function wC(g,c,h){c=void 0===c?ne.id("undefined"):c;h=void 0===h?ne.id("undefined"):h;return{consequent:c,
alternate:h,test:g,type:"ConditionalExpression"}}function xC(g,c,h){return{operator:g,left:c,right:h,type:"LogicalExpression"}}function By(g){var c=new gd.ScopeVisitor,h=c.newScope(g,null);c.accept(g,h,[]);return h}function yC(g,c){return gd.withMozillaAstDo(g,[],function(h,f,m){f.start<=c&&c<=f.end&&(m.push(f),h());return m})}function zC(g,c){return gd.tree.filter(gd.scopes(g),function(h){h=h.node;var f=h.start,m=h.end;"FunctionDeclaration"===h.type&&(f=h.params.length?h.params[0].start:h.body.start,
m=h.body.end);return f<=c&&c<=m},function(h){return h.subScopes})}function AC(g,c){return gd.arr.last(gd.scopesAtIndex(g,c))}function BC(g,c){return gd.arr.filter(gd.nodesAt(g,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function CC(g){return gd.withMozillaAstDo(g,{root:g,result:[]},function(c,h,f){f.result.push(h);if(h!==f.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return f;c();return f}).result}
function DC(g,c,h){h=void 0===h?[]:h;c&&g.node.id&&g.node.id.name&&h.push(g.node.id);gd.helpers.declIds(g.params,h);for(c=0;c<g.funcDecls.length;c++){var f=g.funcDecls[c].id;f&&h.push(f)}gd.helpers.varDeclIds(g,h);h.push.apply(h,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(f=g.classDecls[c].id)&&h.push(f);h.push.apply(h,$jscomp.arrayFromIterable(g.importSpecifiers));return gd.arr.compact(h)}function EC(g,c){for(var h=[],f=$jscomp.makeIterator(gd.declarationsOfScope(g,!0)),
m=f.next();!m.done;m=f.next())h.push(m.value.name);c&&gd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,h);return h}function FC(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var h=g.next();!h.done;h=g.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace(gd.globalDeclRe,"").split(","));for(var f=h.next();!f.done;f=h.next())c.push(f.value.trim())}return c}function Cy(g){return gd.FindToplevelFuncDeclVisitor.run(g)}
function zS(g,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var f=c.decls||gd.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(m){m=$jscomp.makeIterator(m);m.next();return m.next().value.name==g})||zS(g,h)}function GC(g){function c(f,m){var n=[f].concat(m);f.refs.forEach(function(a){var d=$jscomp.makeIterator(gd.resolveReference(a.name,n)),k=d.next().value;d=d.next().value;h.set(a,{decl:k,declId:d,ref:a})});f.subScopes.forEach(function(a){return c(a,
n)})}if(g.referencesResolvedSafely)return g;var h=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function HC(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var f=h.ref,m=f.end;if(f.start<=g&&g<=m)return h}}function Dy(g,c){function h(a){var d=gd._declaredVarNames(a,f);return gd.arr.filter(a.subScopes.map(h).reduce(function(k,b){return k.concat(b)},a.refs),function(k){return-1===d.indexOf(k.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=gd.parse(g,c));g=gd.scopes(g);var f=!!c.jslintGlobalComment;c=gd._declaredVarNames(g,f);var m=g.refs.concat(gd.arr.flatten(g.subScopes.map(h))),n=gd.arr.withoutAll(m.map(function(a){return a.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:gd.arr.filter(g.funcDecls,function(a){return a.id}),classDecls:gd.arr.filter(g.classDecls,function(a){return a.id}),declaredNames:c,undeclaredNames:n,refs:m,thisRefs:g.thisRefs}}function IC(g,c){g=gd.topLevelDeclsAndRefs(g,
c);var h=g.declaredNames.concat(gd.knownGlobals);return gd.arr.filter(g.refs,function(f){return-1===h.indexOf(f.name)})}function JC(g,c,h,f){if(!c&&!g)throw Error("Need at least ast or code");c=c||gd.stringify(g);g=g&&g.loc?g:gd.parse(c,{locations:!0});return gd.withMozillaAstDo(g,[],function(m,n,a){h.every(function(d){return gd.num.between(d,n.loc.start.line,n.loc.end.line)})&&(gd.arr.pushIfNotIncluded(a,n),m());return a})}function Ey(g,c,h,f){h=void 0===h?!0:h;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(g.thisRefs)),f;var m=gd.__varDeclIdsFor(g,c);if(!h&&m.length)return f;h=$jscomp.makeIterator(g.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&f.refs.push(n);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(m));g=$jscomp.makeIterator(g.subScopes);for(m=g.next();!m.done;m=g.next())Ey(m.value,c,!1,f);return f}function KC(g,c,h){var f=null;gd.arr.detect(gd.scopesAtIndex(g,h).reverse(),function(m){m=gd.declarationsOfScope(m,
!0);var n=gd.arr.pluck(m,"name").indexOf(c);if(-1===n)return!1;f=m[n];return!0});return f}function LC(g,c){c="string"===typeof c?gd.parse(c):c;return gd.custom.findNodesIncluding(c,g)}function Fy(g,c,h){var f=gd.nodesAt(c.start,g).reverse().find(function(n){return gd.arr.include(gd._stmtTypes,n.type)});if(h&&h.asPath){c=new gd.BaseVisitor;var m;c.accept=gd.fun.wrap(c.accept,function(n,a,d,k){if(a===f)throw m=k,Error("stop search");return n(a,d,k)});try{c.accept(g,{},[])}catch(n){}return m}return f}
function MC(g){var c=[];g=g.node.body||[];for(var h=0;h<g.length;h++){var f=g[h];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var m=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:m,node:f}})))}}return c}function NC(g,c){(void 0===c?0:c)&&gd.resolveReferences(g);c=[];for(var h={},f=$jscomp.makeIterator(g.exportDecls),m=f.next();!m.done;h={$jscomp$loop$prop$node$2675:h.$jscomp$loop$prop$node$2675},m=f.next()){h.$jscomp$loop$prop$node$2675=m.value;var n=gd.statementOf(g.node,h.$jscomp$loop$prop$node$2675);if(n){var a=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:a,node:h.$jscomp$loop$prop$node$2675,
type:"all"}):"ExportDefaultDeclaration"===n.type?gd.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2675,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(m=g.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2675,type:"id",decl:m.decl,declId:m.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2675,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(d){return function(k){if(a){var b=d.$jscomp$loop$prop$node$2675;var e=k.exported}else k.local&&(b=(e=g.resolvedRefMap.get(k.local))?e.decl:null,e=e?e.declId:null);return{local:!a&&
k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:a&&k.local?k.local.name:null,fromModule:a||null,type:"id",node:d.$jscomp$loop$prop$node$2675,decl:b,declId:e}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(d){return function(k){return{local:k.id?k.id.name:"default",exported:k.id?k.id.name:"default",type:n.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2675,decl:k,declId:k.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2675,decl:n.declaration,declId:n.declaration.id})}}return gd.arr.uniqBy(c,function(d,k){return d.local==k.local&&d.exported==k.exported&&d.fromModule==k.fromModule})}function Sv(g){return(new rm.ObjectSpreadTransformer).accept(g,
{},[])}function OC(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function PC(g,c,h){h="object"===typeof h?h:{changes:[],source:h};var f=!1,m=h.changes.reduce(function(a,d){if(a.end<d.pos)return a;var k=d.pos<a.start;f=f||d.pos>=a.start&&d.pos<=a.end;if("add"===d.type)return{start:k?a.start+d.string.length:a.start,end:a.end+d.string.length};
if("del"===d.type)return{start:k?a.start-d.length:a.start,end:a.end-d.length};throw Error("Cannot deal with change "+zd.obj.inspect(d));},{start:g.start,end:g.end}),n=h.source;g=c(g,n.slice(m.start,m.end),f);g="string"===typeof g?g:Array.isArray(g)?g.map(zd._node2string).join("\n"+zd._findIndentAt(n,m.start)):g=zd._node2string(g);m=[{type:"del",pos:m.start,length:m.end-m.start},{type:"add",pos:m.start,string:g}];return{changes:h.changes.concat(m),source:zd._applyChanges(m,n)}}function QC(g,c){g=g.sort(function(m,
n){return zd._compareNodesForReplacement(m.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<g.length;h++){var f=g[h];c=zd.replaceNode(f.target,f.replacementFunc,c)}return c}function RC(g,c,h,f){f="object"===typeof g?g:null;g="string"===typeof g?g:f.source||zd._node2string(f);return zd.replaceNode(c,h,g)}function AS(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var h=g.next();!h.done;h=g.next())AS(h.value,
c);return c}function SC(g){var c="object"===typeof g?g:zd.parse(g);g="string"===typeof g?g:c.source||zd._node2string(c);c=zd.scopes(c);var h=zd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=zd.parse(n).body[0]);return m.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return zd.replaceNodes(c,g)}function TC(g){var c="object"===typeof g?g:zd.parse(g);
g="string"===typeof g?g:c.source||zd._node2string(c);c=zd.scopes(c);var h=zd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=zd.parse(n).body[0]);n=[];m=$jscomp.makeIterator(m.declarations);for(a=m.next();!a.done;a=m.next()){var d=a.value;a={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:a,init:d.init}]});d=$jscomp.makeIterator(zd.helpers.objPropertiesAsList(d.id,
[],!1));for(var k=d.next();!k.done;k=d.next())k=k.value.key,n.push(zd.varDecl(k[k.length-2],zd.memberChain.apply(zd,[a.name].concat($jscomp.arrayFromIterable(k))),"var"))}return n}});return zd.replaceNodes(c,g)}function UC(g,c){c=c||{};var h=zd.parse(g,c),f=zd.arr.last(h.body);if("ExpressionStatement"!==f.type)return c.asAST?h:g;h.body.splice(h.body.length-1,1,zd.returnStmt(f.expression));return c.asAST?h:zd.stringify(h)}function VC(g,c){c=c||{};g=zd.returnLastStatement(g,c);return c.asAST?zd.program(zd.funcExpr.apply(zd,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function WC(g,c){"string"===typeof g&&(g=zd.parse(g));c=c||{};var h="Program"===g.type,f=c.startFuncNode||zd.id("__start_execution");c=c.endFuncNode||zd.id("__end_execution");var m=zd.topLevelFuncDecls(g),n=g.body,a=[];m.forEach(function(d){var k=d.node;zd.Path(d.path).set(g,zd.exprStmt(k.id));a.push(k)});n.unshift(zd.exprStmt(zd.funcCall(f)));f=zd.arr.last(n);"ExpressionStatement"===
f.type?(n.pop(),n.push(zd.exprStmt(zd.funcCall(c,zd.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===zd.arr.last(f.declarations).id.type?n.push(zd.exprStmt(zd.funcCall(c,zd.id("null"),zd.arr.last(f.declarations).id))):n.push(zd.exprStmt(zd.funcCall(c,zd.id("null"),zd.id("undefined"))));a.push(zd.tryStmt.apply(zd,["err",[zd.exprStmt(zd.funcCall(c,zd.id("err"),zd.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?zd.program.apply(zd,$jscomp.arrayFromIterable(a)):
zd.block.apply(zd,$jscomp.arrayFromIterable(a))}function XC(g){if(!zd.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=zd.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return g}function YC(g,c){var h=Xe.statementOf(g,
c,{asPath:!0}).slice(0,-2);h=Xe.Path(h).get(g);return h.comments&&h.comments.length?Xe.chain(Xe.extractComments(g)).reversed().detect(function(f){return f.followingNode===c}).value():null}function ZC(g,c){function h(q){return Xe.arr.detect(q.node.body,function(u){return u.start>q.comment.end})}function f(q){return{type:"unknown",comment:q.comment.text}}function m(q){q=Xe.Path(q.path.slice(0,-1)).get(e);return{name:q.id?q.id.name:"<error: no name for function>",args:Xe.arr.pluck(q.params,"name")}}
function n(q){for(var u=Xe.Path(q.path.slice(0,-2)).get(e),w=u.key?u.key.name:"<error: no name for method>",y=q.path.slice(),A="<error: no object found for method>";y.length&&"init"!==Xe.arr.last(y);)y.pop();y.length&&(A=Xe.Path(y.slice(0,-1).concat(["id","name"])).get(e));if(Xe.string.startsWith(A,"<error")){for(y=q.path.slice();y.length&&"right"!==Xe.arr.last(y);)y.pop();y.length&&(A=Xe.Path(y.slice(0,-1).concat(["left"])).get(e),A=l.slice(A.start,A.end))}Xe.string.startsWith(A,"<error")&&(y=q.path.slice(),
(q=(q=Xe.Path(y.slice(0,-6)).get(e))&&"CallExpression"===q.type&&q.arguments[0])&&(A=l.slice(q.start,q.end)));return{name:w,args:Xe.arr.pluck(u.value.params,"name"),objectName:A}}function a(q){q=Xe.Path(q.path.slice(0,-1)).get(e);if("FunctionExpression"!==q.type&&"FunctionDeclaration"!==q.type)return{};var u=Xe.statementOf(e,q);if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var w=l.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:l.slice(u.expression.left.property.start,
u.expression.left.property.end),objectName:w,args:Xe.arr.pluck(q.params,"name")}}function d(q){var u=q.path.slice(0,-3);var w=Xe.Path(u).get(e);if(w&&"Property"===w.type){var y=Xe.arr.pluck(w.value.callee.params,"name");var A=w.key?w.key.name:"<error: no name for method>"}A||(u=q.path.slice(0,-2),(w=Xe.Path(u).get(e))&&"Property"===w.type&&(y=Xe.arr.pluck(w.value.params,"name"),A=w.key?w.key.name:"<error: no name for method>"));A||(A="<error: no name for method>",y=[],u=q.path);w=Xe.arr.clone(u);
for(q="<error: no object found for method>";w.length&&"init"!==Xe.arr.last(w);)w.pop();w.length&&(q=Xe.Path(w.slice(0,-1).concat(["id","name"])).get(e));if(Xe.string.startsWith(q,"<error")){for(w=Xe.arr.clone(u);w.length&&"right"!==Xe.arr.last(w);)w.pop();w.length&&(q=Xe.Path(w.slice(0,-1).concat(["left"])).get(e),q=l.slice(q.start,q.end))}Xe.string.startsWith(q,"<error")&&(w=Xe.arr.clone(u),(u=(u=Xe.Path(w.slice(0,-4)).get(e))&&"CallExpression"===u.type&&u.arguments[0])&&(q=l.slice(u.start,u.end)));
return{name:A,args:y,objectName:q}}function k(q){return q&&"VariableDeclaration"===q.type&&1===q.declarations.length}function b(q){return"AssignmentExpression"!==q.type?!1:"ObjectExpression"===q.right.type?!0:"AssignmentExpression"===q.right.type?b(q.right):!1}var e="string"===typeof g?Xe.parse(g,{withComments:!0}):g,l=c||("string"===typeof g?g:Xe.stringify(g)),p=Xe.arr.sortBy(function(q){var u=[],w=new Xe.Visitor;w.accept=Xe.fun.wrap(w.accept,function(y,A,C,E){A.comments&&Xe.arr.pushAll(u,A.comments.map(function(L){return{path:E,
comment:L,node:A}}));return y(A,C,E)});w.accept(q,u,[]);return u}(e),function(q){return q.comment.start});return p.map(function(q,u){if(Xe.arr.equals(q.path.slice(-2),["value","body"]))return Xe.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},n(q)]);var w=q.path.slice(-5);Xe.arr.removeAt(w,1);if(Xe.arr.equals(w,["properties","value","callee","body"]))return Xe.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},d(q)]);if((w=Xe.Path(q.path.slice(0,-1)).get(e))&&"FunctionDeclaration"===
w.type)return Xe.obj.merge([q,q.comment,{type:"function",comment:q.comment.text},m(q)]);if(Xe.arr.equals(q.path.slice(-2),["right","body"]))return Xe.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},a(q)]);w=h(q);return w?(u=p[u+1])&&u.comment.start<=w.start?Xe.obj.merge([q,q.comment,{followingNode:w},f(q)]):k(w)&&("ObjectExpression"===w.declarations[0].init.type||b(w.declarations[0].init))?Xe.obj.merge([q,q.comment,{followingNode:w},{type:"object",comment:q.comment.text},{name:w.declarations[0].id.name}]):
k(w)?Xe.obj.merge([q,q.comment,{followingNode:w},{type:"var",comment:q.comment.text},{name:w.declarations[0].id.name}]):Xe.obj.merge([q,q.comment,{followingNode:w},f(q)]):Xe.obj.merge([q,q.comment,{followingNode:w},f(q)])})}function $C(g,c){c=c||Wf.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=Wf.parse(g,{addSource:!0}));for(var h=[],f=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),m=f.next();!m.done;m=f.next()){m=m.value;m=Wf.unwrapExport(m);var n=Wf.functionWrapper(m,c)||
Wf.varDefs(m)||Wf.funcDef(m)||Wf.es6ClassDef(m)||Wf.someObjectExpressionCall(m);if(n){if(c.hideOneLiners)if(g.loc)n=Wf.arr.filter(n,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(g.source){m=[];n=$jscomp.makeIterator(n);for(var a=n.next();!a.done;a=n.next())a=a.value,(a.parent&&m.includes(a.parent)||(a.node.source||"").includes("\n"))&&m.push(a);n=m}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function mK(g){return Wf.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?mK(Wf.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?mK(c.elements):[]:[]})}function Tv(g){return lf.isValidIdentifierRe.test(g)}function fr(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Xf.Global?Xf.Global:"undefined"!==typeof self?self:function(){return this}()}function aD(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function nK(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function bD(g,c){return g.map(function(h){return h[c]})}function cD(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(Xf.knownSymbols.get(g))return Xf.knownSymbols.get(g);String(g).match(Xf.symMatcher);return String(g)}function Gy(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Gy).join(",")+"]";if("symbol"===typeof g)return Xf.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function Hy(g,c){c=void 0===c?{}:c;var h=g.value,f=g.isPromise,m=g.promisedValue,n=g.promiseStatus;return g.isError||h instanceof Error?(c=String(h),(m=h.stack||"")&&h.message!==h.stack&&(m=String(m),0===m.indexOf(c)&&(m=m.slice(c.length)),c+="\n"+m),c):f?(g=Xf.string.print(n),c="pending"===n?void 0:Hy({value:m},c),"Promise({status: "+
g+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?Xf.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function dD(g,c){var h="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(h=c.slice(f+1),c=c.slice(0,f)):(h=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(f){return{evalResult:f,startLetters:h,code:c}})}function eD(g,c,h){g=ah.getObjectForCompletion(g,c).then(function(f){var m=f.evalResult;
f={completions:ah.descriptorsOfObjAndProtoProperties(m&&m.isEvalResult?m.value:m),startLetters:f.startLetters,code:f.code};m&&m.isPromise&&("fulfilled"===m.promiseStatus?f.promiseResolvedCompletions=ah.descriptorsOfObjAndProtoProperties(m.promisedValue):"rejected"===m.promiseStatus&&(f.promiseRejectedCompletions=ah.descriptorsOfObjAndProtoProperties(m.promisedValue)));return f});"function"===typeof h&&g.then(function(f){return h(null,f)}).catch(function(f){return h(f)});return g}function Iy(g,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(m){return m}},h);c=g;if(h.ignoreUndeclaredExcept){var f=
Wb.topLevelDeclsAndRefs(g);h.excludeRefs=Wb.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=Wb.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&Wb.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(Wb.additionalIgnoredRefs(g,h));h.excludeDecls=h.excludeDecls.concat(Wb.additionalIgnoredDecls(g,
h));c=Wb.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=Wb.es6ModuleTransforms(c,h));c=Wb.replaceRefs(c,h);c=Wb.replaceVarDecls(c,h);c=Wb.clearEmptyExports(c,h);c=Wb.replaceClassDecls(c,h);c=Wb.splitExportDeclarations(c,h);c=Wb.insertCapturesForExportDeclarations(c,h);c=Wb.insertCapturesForImportDeclarations(c,h);c=Wb.insertDeclarationsForExports(c,h);c=Wb.putFunctionDeclsInFront(c,h);return c=Wb.transformImportMeta(c,
h)}function fD(g,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=Wb.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Wb.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Wb.stringify(g).slice(0,
300)+"...");c=Wb.Path("arguments.1.body.body").get(c);var f=Wb.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+Wb.stringify(g).slice(0,300)+"...");var m=f.argument.properties.find(function(n){return"setters"===n.key.name});if(!m)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+Wb.stringify(g).slice(0,300)+
"...");f=f.argument.properties.find(function(n){return"execute"===n.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+Wb.stringify(g).slice(0,300)+"...");m.value.elements.forEach(function(n){n.params[0]=Wb.assign(n.params[0],Wb.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(a){if("ExpressionStatement"!==a.type||"AssignmentExpression"!==a.expression.type||"Identifier"!==a.expression.left.type||
Wb.arr.include(h.exclude,a.expression.left.name))return a;var d=a.expression.left;a=h.declarationWrapper?Wb.declarationWrapperCall(h.declarationWrapper,null,Wb.literal(d.name),Wb.literal("var"),a.expression,h.captureObj,h):a.expression;return Wb.exprStmt(Wb.assign(Wb.member(h.captureObj,d),a))})});(m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));m&&(Wb.arr.remove(f.value.body.body,m),Wb.arr.pushAt(c,m,c.length-1));h.sourceAccessorName&&((m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),m&&(Wb.arr.remove(f.value.body.body,
m),Wb.arr.pushAt(c,m,c.length-1)));return g}function Jy(g,c){var h=Wb.stringify(c.captureObj),f=0;g.body=g.body.reduce(function(m,n){var a=[n],d="",k=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var b=n.specifiers.map(function(e){return[e.local.name,e.exported.name]});d="import { "+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return e===l?l:e+" as "+l}).join(",")+" } from "+n.source.raw+";\n";k="export { "+b.map(function(e){e=$jscomp.makeIterator(e);e.next();
return e.next().value}).join(",")+" };\n"}else n.declaration?(b=n.declaration.declarations||[],b=b.map(function(e){return[e.id.name,e.id.name]})):b=n.specifiers.map(function(e){return[e.exported.name,e.local.name]});k&&(a=[],d+=k);a=a.concat(Wb.parse(d+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return h+"."+e+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(f++,a=a.concat(Wb.parse("\n       import * as __captured"+f+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+f+"__);\n      ")));return m.concat(a)},[]);return g}function oK(g){(this||nt).__wrapped__=g;(this||nt).__actions__=[];(this||nt).__dir__=1;(this||nt).__filtered__=!1;(this||nt).__iteratees__=[];(this||nt).__takeCount__=4294967295;(this||nt).__views__=[]}function pK(g,c){(this||Ky).__wrapped__=g;(this||Ky).__actions__=[];(this||Ky).__chain__=!!c;(this||Ky).__index__=0;(this||Ky).__values__=void 0}function qK(g){if(V6(g)&&!W6(g)&&!(g instanceof
X6)){if(g instanceof BS)return g;if(Y6.call(g,"__wrapped__"))return Z6(g)}return new BS(g)}function CS(g,c,h,f,m,n,a,d,k,b){function e(){for(var A=arguments.length,C=Array(A),E=A;E--;)C[E]=arguments[E];if(u)var L=$6(e),I=a7(C,L);f&&(C=b7(C,f,m,u));n&&(C=c7(C,n,a,u));A-=I;if(u&&A<b)return E=d7(C,L),e7(g,c,CS,e.placeholder,h,C,E,d,k,b-A);E=p?h:this||gD;L=q?E[g]:g;A=C.length;d?C=f7(C,d):w&&1<A&&C.reverse();l&&k<A&&(C.length=k);(this||gD)&&(this||gD)!==g7&&(this||gD)instanceof e&&(L=y||DS(L));return L.apply(E,
C)}var l=c&128,p=c&1,q=c&2,u=c&24,w=c&512,y=q?void 0:DS(g);return e}function hD(g){return g&&g.__esModule?g:{default:g}}function ES(g){if(Array.isArray(g)){for(var c=0,h=Array(g.length);c<g.length;c++)h[c]=g[c];return h}return Array.from(g)}function Uv(g,c){c=void 0===c?"__lvVarRecorder":c;Rg.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");"string"===typeof g&&g.endsWith(";")&&(g=g.slice(0,-1));g="string"===typeof g?Rg.parseFunction(g):
g;g=Rg.ReplaceVisitor.run(g,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return Rg.stringify(g)}function Vv(g){if("undefined"===typeof Rg.babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;Rg.ensureJSXPlugin();Rg.ensureOptionalCatchBinding();Rg.ensureImportMeta();g=Rg.babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator",
"transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function gr(g,c){g=xf.transform.transformSingleExpression(g);g=xf.parse(g,{withComments:!0});c=xf.processInlineCodeTransformOptions(g,c);var h=xf.query.topLevelDeclsAndRefs(g),f=h.classDecls,m=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=
c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(m)).forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},n,{start:k.start,end:k.end})});h.forEach(function(k){return k.declarations.forEach(function(b){return b["x-lively-object-meta"]=Object.assign({},n,{start:b.start,end:b.end})})});g=xf.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=xf.getGlobal(),
c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?xf.getGlobal():xf.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);m=c.recordGlobals?null:xf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);h=xf.id(c.varRecorderName||"__lvVarRecorder");if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var a=c.declarationWrapperName||xf.defaultDeclarationWrapperName;c.declarationWrapper=xf.member(xf.id(c.varRecorderName||
"__lvVarRecorder"),xf.literal(a),!0);c.declarationCallback&&(c.topLevelVarRecorder[a]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)var d={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:xf.member(h,xf.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=xf.capturing.rewriteToCaptureTopLevelVariables(g,h,{es6ImportFuncId:c.es6ImportFuncId,
es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:m,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:d,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=xf.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));d=xf.stringify(g);c.jsx&&(d=xf.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function ot(g,c){c=
void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||xf.defaultDeclarationWrapperName;c.declarationWrapper=xf.member(xf.id(c.varRecorderName),xf.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}g=xf.parse(g);h=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||xf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=xf.capturing.rewriteToRegisterModuleToCaptureSetters(g,
xf.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return xf.stringify(c)}function Ly(g,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var f=new Nf.EvalResult,m=!1,n=!1;c=Nf._normalizeEvalOptions(c);var a=Nf.promise.deferred(),d=c.topLevelVarRecorder||Nf.getGlobal(),k=g;c.wrapInStartEndCall&&(d[Nf.startEvalFunctionName]&&console.warn(f.addWarning("startEvalFunctionName "+Nf.startEvalFunctionName+" already exists in recorder!")),d[Nf.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+
Nf.endEvalFunctionName+" already exists in recorder!")),d[Nf.startEvalFunctionName]=function(){if(m)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(m=!0,"function"===typeof c.onStartEval)c.onStartEval()},d[Nf.endEvalFunctionName]=function(l,p){n?console.warn(f.addWarning("onEvalEndCalled multiple times!")):(n=!0,Nf.finishEval(l,p,f,c,d,a,h))});try{g=Nf.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(l){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+
l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var b=Nf._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||k)}catch(l){var e=l}if(c.wrapInStartEndCall){if(e&&!n)d[Nf.endEvalFunctionName](e,void 0)}else Nf.finishEval(e,e||b,f,c,d,a,h);return c.sync?f:a.promise}function iD(g,c){c=Object.assign(c||{},{sync:!0});return Nf.runEval(g,c)}function jD(g){if(void 0===g){if("undefined"===typeof System)return null;g=System}var c=g.get("@lively-env");c||g.set("@lively-env",
g.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:g["__lively.notifications_emitter"]||(g["__lively.notifications_emitter"]=Wv({},{maxListenerLimit:1E4})),notifications:g["__lively.notifications_notifications"]||(g["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function My(g,c,h){jD(h).emitter.on(g,c);return c}function Xp(g,c,h,f){c=void 0===c?{}:c;h=void 0===h?Date.now():
h;c=Object.assign({type:g,time:h},c);h=jD(f);f=h.emitter;h=h.notifications;f.emit(g,c);f.isLogging&&(g=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(g+" "+z(c,{maxDepth:2})));f.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function rK(g,c,h){jD(h).emitter.removeListener(g,c);return c}function pt(g,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);g.debug&&console.log("[lively.module] runEval: "+
c.slice(0,100).replace(/\n/mg," ")+"...");var f=h,m=f.format,n=f.targetModule;n=g.decanonicalize(n||"*scratch*",f.parentModule);h.targetModule=n;m&&((f=g.getConfig().meta[n])||(f={}),f[n]||(f[n]={}),f[n].format||(f[n].format=m,g.config(f)));m=g.get("@lively-env").moduleEnv(n);f=m.recorder;var a=m.recorderName,d=m.dontTransform,k=Mg.getEs6Transpiler(g,h,m),b="var _moduleExport = "+a+"._moduleExport,\n    _moduleImport = "+(a+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||
m.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:b,recordGlobals:!0,dontTransform:d,varRecorderName:a,topLevelVarRecorder:f,sourceURL:h.sourceURL||h.targetModule,context:h.context||f,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:k,declarationWrapperName:m.varDefinitionCallbackName,currentModuleAccessor:Mg.funcCall(Mg.member(Mg.funcCall(Mg.member(Mg.member("__lvVarRecorder",
"System"),"get"),Mg.literal("@lively-env")),"moduleEnv"),Mg.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&Mg.hasUnimportedImports(g,c,n))return Mg.ensureImportsAreImported(g,c,n).catch(function(e){return null}).then(function(e){return pt(g,e,Object.assign({},h,{importsEnsured:!0}))});if(!m.record()){if(!h.sync&&!h._moduleImported)return g.import(n).catch(function(e){return null}).then(function(){return pt(g,c,Object.assign({},h,{_moduleImported:!0}))});m.ensureRecord()}if(h.es6Transpile&&
h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(e){return console.error(e)}).then(function(e){return pt(g,c,Object.assign({},h,{transpiler:e,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");Mg.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,
targetModule:h.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=Mg.vmRunEval(c,h);return h.sync?Mg.evalEnd(g,c,h,n):Promise.resolve(n).then(function(e){return Mg.evalEnd(g,c,h,e)})}function Xv(g,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=h.format,m=h.System;h=h.targetModule;m||"undefined"===typeof System||(m=System);return!m&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(f)?
Zi.esmEval.runEval(m,g,c):Zi.globalEval.runEval(g,c)}function Ny(g,c){return Zi.globalEval.syncEval(g,c)}function sK(g){return ve.withSuperclasses(g).slice(1)}function kD(g){var c=[];do c.push(g),g=g[ve.superclassSymbol];while(g&&g.name);return c.map(function(h){return h.name}).join("->")}function lD(g){for(var c=[];g;)c.push(g),g=g[ve.superclassSymbol];return c}function tK(g,c){do if(g===c)return!0;while(g=g[ve.superclassSymbol]);return!1}function uK(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;
g.constructor=c;g.__proto__=c.prototype;return g}function vK(g){return g&&"function"===typeof g}function wK(g){var c=ve.RuntimeSourceDescriptor.for(g),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return ve.Path("body.body").get(h).map(function(f){var m=f.static,n=f.kind;f=f.key;var a=f.value;f=f.name||a;a=ve.isOverridden(g,f);var d=m?g:g.prototype;d="get"===n?d.__lookupGetter__(f):"set"===n?d.__lookupSetter__(f):d[f];return{static:m,name:f,value:d,kind:n,owner:g,
overridden:a}})}function xK(g){return ve.runtimeNonStaticMembers(g).concat(ve.runtimeNonStaticMembers(g))}function yK(g){var c=ve.obj.getOwnPropertyDescriptors(g);return ve.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var f=c[h],m="function"===typeof f.value?"method":"get"in f?"get":"set"in f?"set":"unknown";return{static:!0,name:h,value:"method"===m?f.value:"get"===m?f.get:"set"===m?f.set:null,kind:m,owner:g}})}function zK(g){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(g),
Object),function(c){return ve.runtimeStaticClassMembers(c)}))}function mD(g){var c=nh.propertiesAndSettingsInHierarchyOf(g),h=c.properties;c=c.propertySettings;g[nh.propertiesAndSettingsCacheSym]={properties:h,order:nh.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,classHierarchy:nh.getClassHierarchy(g)};h&&"object"===typeof h?nh.prepareClassForProperties(g,c,h):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(nh.defaultPropertiesKey+
") does not return a valid property descriptor map"))}function Yv(g,c){c!==g.constructor&&(g.constructor=c,Ye.setPrototypeOf(g,c.prototype))}function nD(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=g&&g[Ye.superclassSymbol];h&&h===c||(Ye.ensureInitializeStub(c),g[Ye.superclassSymbol]=c,Ye.setPrototypeOf(g.prototype,c.prototype),c!==Object&&Ye.setPrototypeOf(g,c));return c}function Kb(g,c,h,f,m,n,a){h=void 0===h?[]:h;f=void 0===f?[]:f;m=void 0===m?{}:m;var d=g.name,k=d&&m.hasOwnProperty(d)&&
m[d];m=k&&k[Ye.superclassSymbol];k&&"function"===typeof k&&m||(k=g);Ye.setSuperclass(k,c);Ye.installMethods(k,h,f);k[Ye.objMetaSymbol]=a;n&&(g=n.package(),a=k[Ye.moduleMetaSymbol],m=Date.now(),k[Ye.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:a&&a.lastChange&&m<=a.lastChange?a.lastChange+1:m,lastSuperclassChange:0},c&&c.referencedAs&&(k.hasOwnProperty(Ye.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(k[Ye.moduleSubscribeToToplevelChangesSym]),
k[Ye.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(b,e){if(b===c.referencedAs){b=e&&e[Ye.moduleMetaSymbol];var l=k[Ye.moduleMetaSymbol];if(b){if(b.lastChange===l.lastSuperclassChange)return;l.lastSuperclassChange=b.lastChange}Ye.setSuperclass(k,e);Ye.installMethods(k,h,f);Ye.prepareClassForManagedPropertiesAfterCreation(k)}})));k.toString=function(){var b=String(this.prototype[Ye.initializeSymbol]).match(Ye.constructorArgMatcher),e=this[Ye.superclassSymbol];
return"class "+this.name+" "+(e?"extends "+e.name:"")+" {\n  constructor"+((b?b[0]:"()")+" { /*...*/ }\n}")};Ye.prepareClassForManagedPropertiesAfterCreation(k);return k}function oD(g){g=new Yc.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function AK(g){return function(c,h,f,m){null==f&&(f=g);null==m&&(m=f);null==h&&(h=fh.unit(c));var n=fh.unit(c);if(n===h)return c;var a=fh.unitLess(c);"px"!==fh.unit(f)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==fh.unit(m)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)a=fh.unitLess(c)*fh.unitLess(f);else if("rem"===n)a=fh.unitLess(c)*fh.unitLess(g);else if("ex"===n)a=fh.unitLess(c)*fh.unitLess(f)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),c;f=a;if("px"!==h)if("em"===h)f=
a/fh.unitLess(m);else if("rem"===h)f=a/fh.unitLess(g);else if("ex"===h)f=a/fh.unitLess(m)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+h}}function pD(g){return Number(fh.parseCssLength(g,"px").slice(0,-2))}function wk(g,c,h,f){if("number"===typeof g){var m=g;g=c;c=f}else m=g.x,g=g.y,h=c.x-m,
c=c.y-g;return new jd.Rectangle(m,g,h,c)}function bh(g,c){return new jd.Point(g,c)}function Pn(g){return g.constructor[Ph.classNameProp]||g.constructor.name}function hr(g){if(g&&g.constructor){var c=Ph.getClassName(g);if(c){if(g=g.constructor[Ph.moduleMetaInClassProp],"Object"!==c||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Mo(g){var c=g.module;if(c){var h=c.pathInPackage;
if(c.package&&c.package.name&&"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=Ph.string.joinPath(f,h)}f=System.get("@lively-env");if(c=f.moduleEnv(h)||f.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+h+" is not yet loaded")}return System.global[g.className]}function Qn(g,c,h){c=void 0===c?function(b){return b}:c;h=void 0===h?{}:h;var f=new Yg.ExpressionSerializer,
m=h,n=h.isMorph?h.propertiesAndPropertySettings().order:[];n=n.length?n:Yg.obj.keys(g);for(var a=$jscomp.makeIterator(n),d=a.next();!d.done;d=a.next()){d=d.value;var k=g[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;Yg.obj.isString(k)&&f.isSerializedExpression(k)&&(k=f.deserializeExpr(k));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(k=Qn(k,c));k&&k._id&&(k=c(Qn(k,c)));m[d]=k}g.submorphs&&(m.submorphs=g.submorphs.map(function(b){return Qn(b,c)}));
if(h)for(f=$jscomp.makeIterator(n.filter(function(b){return!!g[b]})),d=f.next();!d.done;d=f.next())n=d.value,h[n]=m[n];if(g.__refs__)for(h=$jscomp.makeIterator(g.__refs__),f=h.next();!f.done;f=h.next())n=$jscomp.makeIterator(f.value),f=n.next().value,n=n.next().value,Yg.Path(f).set(m,Yg.Path(n).get(m));if(g.__connections__)for(h=$jscomp.makeIterator(g.__connections__),f=h.next();!f.done;f=h.next())f=f.value,Yg.connect(Yg.Path(f.pathToSource).get(m),f.sourceAttrName,Yg.Path(f.pathToTarget).get(m),
f.targetMethodName,Object.assign({},Yg.obj.select(f,["garbageCollect","converterString","updaterString","varMapping"])));return m}function sm(g,c){var h=c=void 0===c?{}:c,f=void 0===h.keepFunctions?!0:h.keepFunctions,m=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,a=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var d=void 0===h.path?"":h.path,k=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,b=void 0===h.nestedExpressions?
{}:h.nestedExpressions,e=void 0===h.objToPath?new WeakMap:h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var p={skipAttributes:m,skipUnchangedFromDefault:k,root:!1,keepFunctions:f,asExpression:a,nestedExpressions:b,connections:h,objRefs:l,objToPath:e,keepConnections:n};if(e.has(g))return l.push([d,e.get(g)]),null;e.set(g,d);a&&(f=!1);var q=new Yg.ExpressionSerializer,u=function(Ba,F){try{if(F=F.__serialize__(),a){var W=Yg.string.newUUID();b[W]=F;F=W}else F=
F.__expr__?q.exprStringEncode(F):F}catch(P){console.log("[export to JSON] failed converting "+Ba+" to serialized expression")}return F},w={};e.set(g,d);n&&g.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(w.textAndAttributes=g.textAndAttributes.map(function(Ba,F){return Ba&&Ba.isMorph?sm(Ba,Object.assign({},p,{path:d?d+".textAndAttributes."+F:"textAndAttributes."+F})):Ba}));g.submorphs&&0<g.submorphs.length&&(w.submorphs=g.submorphs.map(function(Ba,
F){return sm(Ba,Object.assign({},p,{path:d?d+".submorphs."+F:"submorphs."+F}))}).filter(Boolean));var y={};for(T in g.spec(k)){y.$jscomp$loop$prop$name$2681=T;k=g[y.$jscomp$loop$prop$name$2681];!k||"object"!==typeof k||Array.isArray(k)||k.isMorph||e.set(k,d?d+"."+y.$jscomp$loop$prop$name$2681:y.$jscomp$loop$prop$name$2681);if("submorphs"!==y.$jscomp$loop$prop$name$2681&&!m.includes(y.$jscomp$loop$prop$name$2681))if("metadata"===y.$jscomp$loop$prop$name$2681&&Yg.Path("commit.__serialize__").get(k))w[y.$jscomp$loop$prop$name$2681]=
Object.assign({},k,{commit:u(y.$jscomp$loop$prop$name$2681+".commit",k.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(y.$jscomp$loop$prop$name$2681)){for(var A={},C=$jscomp.makeIterator(["top","left","right","bottom"]),E=C.next();!E.done;E=C.next()){E=E.value;var L=k[E];if(L&&L.__serialize__&&(L=L.__serialize__())&&L.__expr__)if(a){var I=Yg.string.newUUID();b[I]=L;L=I}else L=q.exprStringEncode(L);A[E]=L}w[y.$jscomp$loop$prop$name$2681]=A}else if(k&&k.isMorph)w[y.$jscomp$loop$prop$name$2681]=
sm(k,Object.assign({},p,{path:d?d+"."+y.$jscomp$loop$prop$name$2681:y.$jscomp$loop$prop$name$2681}));else if(k&&k.__serialize__)w[y.$jscomp$loop$prop$name$2681]=u(y.$jscomp$loop$prop$name$2681,k);else if(Array.isArray(k))w[y.$jscomp$loop$prop$name$2681]=k.map(function(Ba){return function(F,W){return F&&F.isMorph?sm(F,Object.assign({},p,{path:d?d+"."+Ba.$jscomp$loop$prop$name$2681+"."+W:Ba.$jscomp$loop$prop$name$2681+"."+W})):F&&F.__serialize__?u(Ba.$jscomp$loop$prop$name$2681+"."+W,F):F}}(y));else{if(k&&
!Yg.obj.isString(k)&&!Yg.obj.isNumber(k)&&0<Yg.properties.allOwnPropertiesOrFunctions(k).length)for(var V in k)k[V]&&k[V].isMorph&&(k[V]=sm(k[V],Object.assign({},p,{path:d?d+"."+y.$jscomp$loop$prop$name$2681+"."+V:y.$jscomp$loop$prop$name$2681+"."+V})));w[y.$jscomp$loop$prop$name$2681]=k}y={$jscomp$loop$prop$name$2681:y.$jscomp$loop$prop$name$2681}}g.isText&&delete w.textString;a||(w._id=g._id);f?(w.type=g.constructor,Object.keys(g).forEach(function(Ba){return"function"===typeof g[Ba]&&(w[Ba]=g[Ba])})):
(w.styleSheets&&(w.styleSheets=[]),w.type=Yg.getSerializableClassMeta(g));if(n&&c){var T=[];V=$jscomp.makeIterator(h);for(f=V.next();!f.done;f=V.next())C=f=f.value,m=C.sourceAttrName,n=C.targetMethodName,A=C.targetObj,h=C.updaterString,y=C.converterString,k=C.garbageCollect,C=e.get(C.sourceObj),A=e.get(A),"string"===typeof C&&"string"===typeof A?T.push({pathToSource:C,pathToTarget:A,garbageCollect:k,updaterString:h,converterString:y,sourceAttrName:m,targetMethodName:n,varMapping:{properties:Yg.properties}}):
console.log("skipping:",f);a||(w.__connections__=T)}if(a&&c){c="morph("+Yg.obj.inspect(w)+")";var Y={"lively.morphic":["morph"]},na;for(na in b)c=c.replace('"'+na+'"',b[na].__expr__),Object.entries(b[na].bindings||{}).forEach(function(Ba){var F=$jscomp.makeIterator(Ba);Ba=F.next().value;F=F.next().value;Y[Ba]=Y[Ba]?Yg.arr.uniq([].concat($jscomp.arrayFromIterable(Y[Ba]),$jscomp.arrayFromIterable(F))):F});return{__expr__:c,bindings:Y}}c&&(w.__refs__=l);return w}function Jj(g,c,h,f,m){"function"!==typeof h||
"undefined"!==typeof f&&"object"!==typeof f||(m=f,f="call",m||(m={}),m.updater||(m.updater=function(k,b){return k(null,b)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,a=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||If.AttributeConnection;"function"===typeof m&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),m={converter:m});
n&&(m=If.obj.merge(n,m));a=new a(g,c,h,f,m);var d=a.getExistingConnection();if(d)return d.resetSpec(),d.init(g,c,h,f,m),d;m=a.connect();if("function"===typeof g.onConnect)g.onConnect(c,h,f);n&&n.updateOnConnect&&a.update(g[c]);return m}function No(g,c,h,f){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(g.attributeConnections){for(var m=$jscomp.makeIterator(g.attributeConnections.slice()),n=m.next();!n.done;n=m.next())n=n.value,n.getSourceAttrName()==c&&n.getTargetObj()===
h&&n.getTargetMethodName()==f&&n.disconnect();if("function"===typeof g.onDisconnect)g.onDisconnect(c,h,f)}}function Zv(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function Yp(g,c,h,f,m){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f?m=m||{}:(m=f,f="call",m=m||{},m.updater||(m.updater=function(n,a){return n(null,a)}));m=m||{};m.removeAfterUpdate=!0;return If.connect(g,c,h,f,m)}function xk(g,c,h){var f=g.attributeConnections;if(f){g=g[c];for(var m=
0,n=f.length;m<n;m++){var a=f[m];a.getSourceAttrName()==c&&a.update(h,g)}}}function qD(g,c,h,f){if(null!=g[c])h[f](g[c]);else If.connect(g,c,h,f,{removeAfterUpdate:!0})}function rD(g,c,h,f){for(var m={key:c.pop(),whenDefined:function(n){If.callWhenNotNull(n,this.key,h,f)}};0<c.length;)m={key:c.pop(),next:m,whenDefined:function(n){If.callWhenNotNull(n,this.key,this.next,"whenDefined")}};m.whenDefined(g)}function ir(g,c){var h=!1;c||"function"!==typeof g||(c=g,h=!0);if(h){g=If.AttributeConnection.prototype;
g.isActive||(g.isActive=0);g.isActive++;try{var f=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{h=g.sourceObj;var m=g.sourceAttribute,n=g.targetObj,a=g.targetAttribute;g=n&&a?function(d){return d.getSourceAttrName()===m&&n===d.getTargetObj()&&a===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===m};(g=h.attributeConnections&&h.attributeConnections.filter(g))&&If.arr.invoke(g,"activate");try{f=c()}finally{g&&If.arr.invoke(g,"deactivate")}}return f}function sD(g){if(null==
g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function BK(g){var c={},h;for(h in g)c[h]=Je.referencesOfId(g,h);return c}function tD(g){return g&&g.__ref__}function CK(g,c){var h={};return Je.referencesOfId((h[g.id]=g.currentSnapshot,h),g.id,c)}function uD(g,c,h){g=g[c];c=[];for(var f in g.props){var m=g.props[f]||{},n=m.value;m=m.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Je.referencesInArray(n,h&&f))):!m&&n&&Je.isReference(n)&&c.push(h?{key:f,
id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(f=0;f<g.entries.length;f++)n=g.entries[f],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Je.referencesInArray(n,h&&n))):n&&Je.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function FS(g,c){for(var h=[],f=0;f<g.length;f++){var m=g[f];Array.isArray(m)?h.push.apply(h,$jscomp.arrayFromIterable(FS(m,c?c+"["+f+"]":void 0))):m&&Je.isReference(m)&&h.push(c?{key:c+"["+f+"]",id:m.id}:m.id)}return h}function vD(g,c){return(g[c][Je.ClassHelper.classMetaForSerializationProp]||
{}).module||{}}function DK(g,c){return Je.referencesOfId(g,c).map(function(h){return h+":"+Je.classNameOfId(g,h)})}function wD(g,c){return(g[c][Je.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function EK(g,c,h,f){function m(u,w,y){if(!e)if(50<y)alert(""+k);else if(u===w)k.push(u),e=k.slice();else if(!b[u]){b[u]=!0;k.push(u);u=Je.referencesOfId(g,u);for(var A=0;A<u.length;A++)m(u[A],w,y+1);k.pop()}}f=void 0===f?{}:f;var n=void 0===f.showPath?!0:f.showPath,a=f.hasOwnProperty("showClassNames")?
f.showClassNames:!n,d=f.hasOwnProperty("showPropNames")?f.showPropNames:n;f=f.hasOwnProperty("hideId")?f.hideId:n;var k=[],b={},e;m(c,h,0);if(!e)return null;if(!a&&!d)return e;c=[];for(h=0;h<e.length-1;h++){var l=e[h],p=e[h+1],q=[];f||q.push(l);a&&q.push((g[l][Je.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(l=Je.referencesOfId(g,l,!0).find(function(u){return u.id===p})||{key:"????"},q.push(l.key));c.push(q.join(":"))}n&&(c="."+c.join("."));return c}function FK(g,c,h){h=
h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Je.Path(h).parts();var f=g[c];for(c=0;;){if(1E3<c++)throw"stop";var m=h.shift();if(!m)break;if(!f.props||!f.props[m])throw Error("Property "+m+" not found for ref "+JSON.stringify(f));f=f.props[m].value;if(!f)throw Error("Property "+m+" has no value");for(;Array.isArray(f);)f=f[h.shift()];if(!f||!f.__ref__)return f;f=g[f.id]}return f}function GK(g,c,h,f){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Je.Path(h).parts();g=g[c];c=
h.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(g));var m=(g.props[c]||{}).value;if(!m)throw Error("Property "+c+" has no value");if(h.length){var n=Je.Path(h).get(m);Je.Path(h).set(m,f(g,c,n))}else g.props[c].value=f(g,c,m)}function Zp(g,c){var h=Je.arr.withoutAll(Object.keys(c),g),f=h.filter(function(n){if("AttributeConnection"===Je.classNameOfId(c,n))return c[n].props.garbageCollect.value}),m=Je.referenceGraph(Je.obj.dissoc(Object.assign({},c),
f));g.forEach(function(n){n=Je.graph.subgraphReachableBy(m,n);for(var a=h.length;a--;)h[a]in n&&h.splice(a,1)});h.forEach(function(n){return delete c[n]});return h}function xD(g){var c={},h;for(h in g){c.$jscomp$loop$prop$id$1008$2687=h;if("AttributeConnection"===Je.classNameOfId(g,c.$jscomp$loop$prop$id$1008$2687)){var f=g[c.$jscomp$loop$prop$id$1008$2687];if(!g[Je.Path("props.targetObj.value.id").get(f)]){if(f=g[Je.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(m){return function(n){return n.id!=
m.$jscomp$loop$prop$id$1008$2687}}(c));delete g[c.$jscomp$loop$prop$id$1008$2687]}}c={$jscomp$loop$prop$id$1008$2687:c.$jscomp$loop$prop$id$1008$2687}}}function $p(g,c){c=void 0===c?Je.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var h=[],f=0,m=Object.keys(g);f<m.length;f++){var n=g[m[f]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var a=Je.ClassHelper.sourceModulesInObjRef(n);a&&a.length&&h.push.apply(h,$jscomp.arrayFromIterable(a.map(function(b){return(b.package&&
b.package.name||"")+"/"+b.pathInPackage})));if(n.props)for(var d in n.props){a=n.props[d].value;if("string"===typeof a){var k=c.requiredModulesOf__expr__(a);k&&h.push.apply(h,$jscomp.arrayFromIterable(k))}Je.obj.isArray(a)&&a.forEach(function(b){"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&h.push.apply(h,$jscomp.arrayFromIterable(b))})}}}return h=Je.arr.uniq(h)}function HK(){throw Error("setTimeout has not been defined");}function IK(){throw Error("clearTimeout has not been defined");
}function GS(g){if(jr===setTimeout)return setTimeout(g,0);if((jr===HK||!jr)&&setTimeout)return jr=setTimeout,setTimeout(g,0);try{return jr(g,0)}catch(c){try{return jr.call(null,g,0)}catch(h){return jr.call(this||$v,g,0)}}}function h7(){aw&&qt&&(aw=!1,qt.length?aq=qt.concat(aq):yD=-1,aq.length&&HS())}function HS(){if(!aw){var g=GS(h7);aw=!0;for(var c=aq.length;c;){qt=aq;for(aq=[];++yD<c;)qt&&qt[yD].run();yD=-1;c=aq.length}qt=null;aw=!1;(function(h){if(kr===clearTimeout)return clearTimeout(h);if((kr===
IK||!kr)&&clearTimeout)return kr=clearTimeout,clearTimeout(h);try{kr(h)}catch(f){try{return kr.call(null,h)}catch(m){return kr.call(this||$v,h)}}})(g)}}function IS(g,c){(this||$v).fun=g;(this||$v).array=c}function bq(){}function zD(){if(JS)return KS;JS=!0;return KS={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function AD(){if(LS)return MS;LS=!0;var g=oh;return MS="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function bw(){if(NS)return Oo;NS=!0;var g=zD().MAX_SAFE_COMPONENT_LENGTH,c=AD();Oo=Oo={};var h=Oo.re=[],f=Oo.src=[],m=Oo.t={},n=0,a=function(d,k,b){var e=n++;c(e,k);m[d]=e;f[e]=k;h[e]=new RegExp(k,b?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*");a("NUMERICIDENTIFIERLOOSE","[0-9]+");a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
a("MAINVERSION","("+f[m.NUMERICIDENTIFIER]+")\\.("+(f[m.NUMERICIDENTIFIER]+")\\.(")+(f[m.NUMERICIDENTIFIER]+")"));a("MAINVERSIONLOOSE","("+f[m.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[m.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[m.NUMERICIDENTIFIERLOOSE]+")"));a("PRERELEASEIDENTIFIER","(?:"+f[m.NUMERICIDENTIFIER]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASEIDENTIFIERLOOSE","(?:"+f[m.NUMERICIDENTIFIERLOOSE]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASE","(?:-("+f[m.PRERELEASEIDENTIFIER]+"(?:\\."+f[m.PRERELEASEIDENTIFIER]+
")*))");a("PRERELEASELOOSE","(?:-?("+f[m.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[m.PRERELEASEIDENTIFIERLOOSE]+")*))");a("BUILDIDENTIFIER","[0-9A-Za-z-]+");a("BUILD","(?:\\+("+f[m.BUILDIDENTIFIER]+"(?:\\."+f[m.BUILDIDENTIFIER]+")*))");a("FULLPLAIN","v?"+f[m.MAINVERSION]+f[m.PRERELEASE]+"?"+f[m.BUILD]+"?");a("FULL","^"+f[m.FULLPLAIN]+"$");a("LOOSEPLAIN","[v=\\s]*"+f[m.MAINVERSIONLOOSE]+f[m.PRERELEASELOOSE]+"?"+f[m.BUILD]+"?");a("LOOSE","^"+f[m.LOOSEPLAIN]+"$");a("GTLT","((?:<|>)?=?)");a("XRANGEIDENTIFIERLOOSE",
f[m.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");a("XRANGEIDENTIFIER",f[m.NUMERICIDENTIFIER]+"|x|X|\\*");a("XRANGEPLAIN","[v=\\s]*("+f[m.XRANGEIDENTIFIER]+")(?:\\.("+(f[m.XRANGEIDENTIFIER]+")(?:\\.(")+(f[m.XRANGEIDENTIFIER]+")(?:")+(f[m.PRERELEASE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGEPLAINLOOSE","[v=\\s]*("+f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[m.PRERELEASELOOSE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAIN]+
"$");a("XRANGELOOSE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAINLOOSE]+"$");a("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));a("COERCERTL",f[m.COERCE],!0);a("LONETILDE","(?:~>?)");a("TILDETRIM","(\\s*)"+f[m.LONETILDE]+"\\s+",!0);Oo.tildeTrimReplace="$1~";a("TILDE","^"+f[m.LONETILDE]+f[m.XRANGEPLAIN]+"$");a("TILDELOOSE","^"+f[m.LONETILDE]+f[m.XRANGEPLAINLOOSE]+"$");a("LONECARET","(?:\\^)");a("CARETTRIM","(\\s*)"+f[m.LONECARET]+"\\s+",!0);Oo.caretTrimReplace=
"$1^";a("CARET","^"+f[m.LONECARET]+f[m.XRANGEPLAIN]+"$");a("CARETLOOSE","^"+f[m.LONECARET]+f[m.XRANGEPLAINLOOSE]+"$");a("COMPARATORLOOSE","^"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+")$|^$");a("COMPARATOR","^"+f[m.GTLT]+"\\s*("+f[m.FULLPLAIN]+")$|^$");a("COMPARATORTRIM","(\\s*)"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+"|"+f[m.XRANGEPLAIN]+")",!0);Oo.comparatorTrimReplace="$1$2$3";a("HYPHENRANGE","^\\s*("+f[m.XRANGEPLAIN]+")\\s+-\\s+("+(f[m.XRANGEPLAIN]+")\\s*$"));a("HYPHENRANGELOOSE","^\\s*("+f[m.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(f[m.XRANGEPLAINLOOSE]+")\\s*$"));a("STAR","(<|>)?=?\\s*\\*");a("GTE0","^\\s*>=\\s*0.0.0\\s*$");a("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Oo}function BD(){if(OS)return PS;OS=!0;var g=["includePrerelease","loose","rtl"];return PS=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(h){return c[h]}).reduce(function(h,f){h[f]=!0;return h},{}):{}}}function JK(){if(QS)return RS;QS=!0;var g=/^[0-9]+$/,c=function(h,f){var m=g.test(h),n=g.test(f);m&&n&&(h=+h,f=+f);return h===
f?0:m&&!n?-1:n&&!m?1:h<f?-1:1};return RS={compareIdentifiers:c,rcompareIdentifiers:function(h,f){return c(f,h)}}}function Cl(){if(SS)return TS;SS=!0;var g=AD(),c=zD(),h=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=bw();var m=c.re,n=c.t,a=BD(),d=JK().compareIdentifiers,k=function(b,e){e=a(e);if(b instanceof k){if(b.loose===!!e.loose&&b.includePrerelease===!!e.includePrerelease)return b;b=b.version}else if("string"!==typeof b)throw new TypeError("Invalid Version: "+b);if(b.length>h)throw new TypeError("version is longer than "+
h+" characters");g("SemVer",b,e);this.options=e;this.loose=!!e.loose;this.includePrerelease=!!e.includePrerelease;e=b.trim().match(e.loose?m[n.LOOSE]:m[n.FULL]);if(!e)throw new TypeError("Invalid Version: "+b);this.raw=b;this.major=+e[1];this.minor=+e[2];this.patch=+e[3];if(this.major>f||0>this.major)throw new TypeError("Invalid major version");if(this.minor>f||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>f||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
e[4]?e[4].split(".").map(function(l){if(/^[0-9]+$/.test(l)){var p=+l;if(0<=p&&p<f)return p}return l}):[];this.build=e[5]?e[5].split("."):[];this.format()};k.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};k.prototype.toString=function(){return this.version};k.prototype.compare=function(b){g("SemVer.compare",this.version,this.options,b);if(!(b instanceof k)){if("string"===typeof b&&
b===this.version)return 0;b=new k(b,this.options)}return b.version===this.version?0:this.compareMain(b)||this.comparePre(b)};k.prototype.compareMain=function(b){b instanceof k||(b=new k(b,this.options));return d(this.major,b.major)||d(this.minor,b.minor)||d(this.patch,b.patch)};k.prototype.comparePre=function(b){b instanceof k||(b=new k(b,this.options));if(this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;
var e=0;do{var l=this.prerelease[e],p=b.prerelease[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.compareBuild=function(b){b instanceof k||(b=new k(b,this.options));var e=0;do{var l=this.build[e],p=b.build[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.inc=function(b,e){switch(b){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",e);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",e);break;case "prepatch":this.prerelease.length=0;this.inc("patch",e);this.inc("pre",e);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",e);this.inc("pre",e);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(b=this.prerelease.length;0<=--b;)"number"===typeof this.prerelease[b]&&(this.prerelease[b]++,b=-2);-1===b&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw Error("invalid increment argument: "+
b);}this.format();this.raw=this.version;return this};return TS=k}function cw(){if(US)return VS;US=!0;var g=zD().MAX_LENGTH,c=bw(),h=c.re,f=c.t,m=Cl(),n=BD();return VS=function(a,d){d=n(d);if(a instanceof m)return a;if("string"!==typeof a||a.length>g||!(d.loose?h[f.LOOSE]:h[f.FULL]).test(a))return null;try{return new m(a,d)}catch(k){return null}}}function i7(){if(WS)return XS;WS=!0;var g=cw();return XS=function(c,h){return(c=g(c,h))?c.version:null}}function j7(){if(YS)return ZS;YS=!0;var g=Cl();return ZS=
function(c,h,f,m){"string"===typeof f&&(m=f,f=void 0);try{return(new g(c,f)).inc(h,m).version}catch(n){return null}}}function Rn(){if($S)return aT;$S=!0;var g=Cl();return aT=function(c,h,f){return(new g(c,f)).compare(new g(h,f))}}function KK(){if(bT)return cT;bT=!0;var g=Rn();return cT=function(c,h,f){return 0===g(c,h,f)}}function k7(){if(dT)return eT;dT=!0;var g=Cl();return eT=function(c,h){return(new g(c,h)).major}}function l7(){if(fT)return gT;fT=!0;var g=cw();return gT=function(c,h){return(c=
g(c,h))&&c.prerelease.length?c.prerelease:null}}function m7(){if(hT)return iT;hT=!0;var g=Rn();return iT=function(c,h,f){return g(h,c,f)}}function LK(){if(jT)return kT;jT=!0;var g=Cl();return kT=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.compare(h)||c.compareBuild(h)}}function n7(){if(lT)return mT;lT=!0;var g=LK();return mT=function(c,h){return c.sort(function(f,m){return g(m,f,h)})}}function CD(){if(nT)return oT;nT=!0;var g=Rn();return oT=function(c,h,f){return 0<g(c,h,f)}}function MK(){if(pT)return qT;
pT=!0;var g=Rn();return qT=function(c,h,f){return 0>g(c,h,f)}}function NK(){if(rT)return sT;rT=!0;var g=Rn();return sT=function(c,h,f){return 0<=g(c,h,f)}}function tT(){if(uT)return vT;uT=!0;var g=Rn();return vT=function(c,h,f){return 0!==g(c,h,f)}}function OK(){if(wT)return xT;wT=!0;var g=Rn();return xT=function(c,h,f){return 0>=g(c,h,f)}}function yT(){if(zT)return AT;zT=!0;var g=KK(),c=tT(),h=CD(),f=NK(),m=MK(),n=OK();return AT=function(a,d,k,b){switch(d){case "===":return"object"===typeof a&&(a=
a.version),"object"===typeof k&&(k=k.version),a===k;case "!==":return"object"===typeof a&&(a=a.version),"object"===typeof k&&(k=k.version),a!==k;case "":case "=":case "==":return g(a,k,b);case "!=":return c(a,k,b);case ">":return h(a,k,b);case ">=":return f(a,k,b);case "<":return m(a,k,b);case "<=":return n(a,k,b);default:throw new TypeError("Invalid operator: "+d);}}}function o7(){if(BT)return CT;BT=!0;var g=Cl(),c=cw(),h=bw(),f=h.re,m=h.t;return CT=function(n,a){if(n instanceof g)return n;"number"===
typeof n&&(n=String(n));if("string"!==typeof n)return null;a=a||{};var d=null;if(a.rtl){for(var k;(k=f[m.COERCERTL].exec(n))&&(!d||d.index+d[0].length!==n.length);)d&&k.index+k[0].length===d.index+d[0].length||(d=k),f[m.COERCERTL].lastIndex=k.index+k[1].length+k[2].length;f[m.COERCERTL].lastIndex=-1}else d=n.match(f[m.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),a)}}function $h(g){var c=this;c instanceof $h||(c=new $h);c.tail=null;c.head=null;c.length=0;if(g&&"function"===
typeof g.forEach)g.forEach(function(m){c.push(m)});else if(0<arguments.length)for(var h=0,f=arguments.length;h<f;h++)c.push(arguments[h]);return c}function rt(g,c,h,f){if(!(this instanceof rt))return new rt(g,c,h,f);this.list=f;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;h?(h.prev=this,this.next=h):this.next=null}function Sn(){if(DT)return PK;DT=!0;var g=function(I,V){var T=this;V=h(V);if(I instanceof g)return I.loose===!!V.loose&&I.includePrerelease===!!V.includePrerelease?I:new g(I.raw,
V);if(I instanceof f)return this.raw=I.value,this.set=[[I]],this.format(),this;this.options=V;this.loose=!!V.loose;this.includePrerelease=!!V.includePrerelease;this.raw=I;this.set=I.split(/\s*\|\|\s*/).map(function(Y){return T.parseRange(Y.trim())}).filter(function(Y){return Y.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+I);if(1<this.set.length)if(I=this.set[0],this.set=this.set.filter(function(Y){return"<0.0.0-0"!==Y[0].value}),0===this.set.length)this.set=[I];else if(1<
this.set.length)for(I=$jscomp.makeIterator(this.set),V=I.next();!V.done;V=I.next())if(V=V.value,1===V.length&&""===V[0].value){this.set=[V];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(I){return I.join(" ").trim()}).join("||").trim()};g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(I){var V=this;I=I.trim();var T="parseRange:"+Object.keys(this.options).join(",")+":"+I,Y=c.get(T);if(Y)return Y;Y=this.options.loose;I=I.replace(Y?
d[k.HYPHENRANGELOOSE]:d[k.HYPHENRANGE],L(this.options.includePrerelease));m("hyphen replace",I);I=I.replace(d[k.COMPARATORTRIM],b);m("comparator trim",I,d[k.COMPARATORTRIM]);I=I.replace(d[k.TILDETRIM],e);I=I.replace(d[k.CARETTRIM],l);I=I.split(/\s+/).join(" ");var na=Y?d[k.COMPARATORLOOSE]:d[k.COMPARATOR];Y=I.split(" ").map(function(F){var W=F;F=V.options;m("comp",W,F);W=y(W,F);m("caret",W);W=u(W,F);m("tildes",W);W=C(W,F);m("xrange",W);m("replaceStars",W,F);W=W.trim().replace(d[k.STAR],"");m("stars",
W);return W}).join(" ").split(/\s+/).map(function(F){var W=V.options;m("replaceGTE0",F,W);return F.trim().replace(d[W.includePrerelease?k.GTE0PRE:k.GTE0],"")}).filter(this.options.loose?function(F){return!!F.match(na)}:function(){return!0}).map(function(F){return new f(F,V.options)});I=new Map;Y=$jscomp.makeIterator(Y);for(var Ba=Y.next();!Ba.done;Ba=Y.next()){Ba=Ba.value;if("<0.0.0-0"===Ba.value)return[Ba];I.set(Ba.value,Ba)}1<I.size&&I.has("")&&I.delete("");I=[].concat($jscomp.arrayFromIterable(I.values()));
c.set(T,I);return I};g.prototype.intersects=function(I,V){if(!(I instanceof g))throw new TypeError("a Range is required");return this.set.some(function(T){return p(T,V)&&I.set.some(function(Y){return p(Y,V)&&T.every(function(na){return Y.every(function(Ba){return na.intersects(Ba,V)})})})})};g.prototype.test=function(I){if(!I)return!1;if("string"===typeof I)try{I=new n(I,this.options)}catch(F){return!1}for(var V=0;V<this.set.length;V++){a:{var T=this.set[V];for(var Y=I,na=this.options,Ba=0;Ba<T.length;Ba++)if(!T[Ba].test(Y)){T=
!1;break a}if(Y.prerelease.length&&!na.includePrerelease){for(na=0;na<T.length;na++)if(m(T[na].semver),T[na].semver!==f.ANY&&0<T[na].semver.prerelease.length&&(Ba=T[na].semver,Ba.major===Y.major&&Ba.minor===Y.minor&&Ba.patch===Y.patch)){T=!0;break a}T=!1}else T=!0}if(T)return!0}return!1};PK=g;var c=new p7({max:1E3}),h=BD(),f=DD(),m=AD(),n=Cl(),a=bw(),d=a.re,k=a.t,b=a.comparatorTrimReplace,e=a.tildeTrimReplace,l=a.caretTrimReplace,p=function(I,V){var T=!0;I=I.slice();for(var Y=I.pop();T&&I.length;)T=
I.every(function(na){return Y.intersects(na,V)}),Y=I.pop();return T},q=function(I){return!I||"x"===I.toLowerCase()||"*"===I},u=function(I,V){return I.trim().split(/\s+/).map(function(T){return w(T,V)}).join(" ")},w=function(I,V){return I.replace(V.loose?d[k.TILDELOOSE]:d[k.TILDE],function(T,Y,na,Ba,F){m("tilde",I,T,Y,na,Ba,F);q(Y)?T="":q(na)?T=">="+Y+".0.0 <"+(+Y+1)+".0.0-0":q(Ba)?T=">="+Y+"."+na+".0 <"+Y+"."+(+na+1)+".0-0":F?(m("replaceTilde pr",F),T=">="+Y+"."+na+"."+Ba+"-"+F+" <"+Y+"."+(+na+1)+
".0-0"):T=">="+Y+"."+na+"."+Ba+" <"+Y+"."+(+na+1)+".0-0";m("tilde return",T);return T})},y=function(I,V){return I.trim().split(/\s+/).map(function(T){return A(T,V)}).join(" ")},A=function(I,V){m("caret",I,V);var T=V.includePrerelease?"-0":"";return I.replace(V.loose?d[k.CARETLOOSE]:d[k.CARET],function(Y,na,Ba,F,W){m("caret",I,Y,na,Ba,F,W);q(na)?Y="":q(Ba)?Y=">="+na+".0.0"+T+" <"+(+na+1)+".0.0-0":q(F)?Y="0"===na?">="+na+"."+Ba+".0"+T+" <"+na+"."+(+Ba+1)+".0-0":">="+na+"."+Ba+".0"+T+" <"+(+na+1)+".0.0-0":
W?(m("replaceCaret pr",W),Y="0"===na?"0"===Ba?">="+na+"."+Ba+"."+F+"-"+W+" <"+na+"."+Ba+"."+(+F+1)+"-0":">="+na+"."+Ba+"."+F+"-"+W+" <"+na+"."+(+Ba+1)+".0-0":">="+na+"."+Ba+"."+F+"-"+W+" <"+(+na+1)+".0.0-0"):(m("no pr"),Y="0"===na?"0"===Ba?">="+na+"."+Ba+"."+F+T+" <"+na+"."+Ba+"."+(+F+1)+"-0":">="+na+"."+Ba+"."+F+T+" <"+na+"."+(+Ba+1)+".0-0":">="+na+"."+Ba+"."+F+" <"+(+na+1)+".0.0-0");m("caret return",Y);return Y})},C=function(I,V){m("replaceXRanges",I,V);return I.split(/\s+/).map(function(T){return E(T,
V)}).join(" ")},E=function(I,V){I=I.trim();return I.replace(V.loose?d[k.XRANGELOOSE]:d[k.XRANGE],function(T,Y,na,Ba,F,W){m("xRange",I,T,Y,na,Ba,F,W);var P=q(na),S=P||q(Ba);F=S||q(F);"="===Y&&F&&(Y="");W=V.includePrerelease?"-0":"";P?T=">"===Y||"<"===Y?"<0.0.0-0":"*":Y&&F?(S&&(Ba=0),F=0,">"===Y?(Y=">=",S?(na=+na+1,Ba=0):Ba=+Ba+1,F=0):"<="===Y&&(Y="<",S?na=+na+1:Ba=+Ba+1),"<"===Y&&(W="-0"),T=Y+na+"."+Ba+"."+F+W):S?T=">="+na+".0.0"+W+" <"+(+na+1)+".0.0-0":F&&(T=">="+na+"."+Ba+".0"+W+" <"+na+"."+(+Ba+
1)+".0-0");m("xRange return",T);return T})},L=function(I){return function(V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va){T=q(Y)?"":q(na)?">="+Y+".0.0"+(I?"-0":""):q(Ba)?">="+Y+"."+na+".0"+(I?"-0":""):F?">="+T:">="+T+(I?"-0":"");P=q(S)?"":q(fa)?"<"+(+S+1)+".0.0-0":q(aa)?"<"+S+"."+(+fa+1)+".0-0":oa?"<="+S+"."+fa+"."+aa+"-"+oa:I?"<"+S+"."+fa+"."+(+aa+1)+"-0":"<="+P;return(T+" "+P).trim()}};return PK}function DD(){if(ET)return QK;ET=!0;var g=Symbol("SemVer ANY"),c=function(e,l){l=h(l);if(e instanceof c){if(e.loose===
!!l.loose)return e;e=e.value}d("comparator",e,l);this.options=l;this.loose=!!l.loose;this.parse(e);this.value=this.semver===g?"":this.operator+this.semver.version;d("comp",this)};c.prototype.parse=function(e){var l=e.match(this.options.loose?m[n.COMPARATORLOOSE]:m[n.COMPARATOR]);if(!l)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==l[1]?l[1]:"";"="===this.operator&&(this.operator="");this.semver=l[2]?new k(l[2],this.options.loose):g};c.prototype.toString=function(){return this.value};
c.prototype.test=function(e){d("Comparator.test",e,this.options.loose);if(this.semver===g||e===g)return!0;if("string"===typeof e)try{e=new k(e,this.options)}catch(l){return!1}return a(e,this.operator,this.semver,this.options)};c.prototype.intersects=function(e,l){if(!(e instanceof c))throw new TypeError("a Comparator is required");l&&"object"===typeof l||(l={loose:!!l,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new b(e.value,l)).test(this.value);if(""===e.operator)return""===
e.value?!0:(new b(this.value,l)).test(e.semver);var p=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),q=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),u=this.semver.version===e.semver.version,w=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),y=a(this.semver,"<",e.semver,l)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator);e=a(this.semver,">",e.semver,l)&&("<="===
this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return p||q||u&&w||y||e};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});QK=c;var h=BD(),f=bw(),m=f.re,n=f.t,a=yT(),d=AD(),k=Cl(),b=Sn();return QK}function ED(){if(FT)return GT;FT=!0;var g=Sn();return GT=function(c,h,f){try{h=new g(h,f)}catch(m){return!1}return h.test(c)}}function q7(){if(HT)return IT;HT=!0;var g=Cl(),c=Sn();return IT=function(h,f,m){var n=null,a=null,
d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||n&&-1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function r7(){if(JT)return KT;JT=!0;var g=Sn();return KT=function(c,h){try{return(new g(c,h)).range||"*"}catch(f){return null}}}function s7(){if(LT)return MT;LT=!0;var g=Sn();return MT=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.intersects(h)}}function t7(){if(NT)return OT;NT=!0;var g=cw();return OT=function(c,h){return(c=g(c.trim().replace(/^[=v]+/,""),h))?c.version:
null}}function u7(){if(PT)return QT;PT=!0;var g=cw(),c=KK();return QT=function(h,f){if(c(h,f))return null;h=g(h);f=g(f);var m=h.prerelease.length||f.prerelease.length,n=m?"pre":"",a;for(a in h)if(("major"===a||"minor"===a||"patch"===a)&&h[a]!==f[a])return n+a;return m?"prerelease":""}}function v7(){if(RT)return ST;RT=!0;var g=Cl();return ST=function(c,h){return(new g(c,h)).minor}}function w7(){if(TT)return UT;TT=!0;var g=Cl();return UT=function(c,h){return(new g(c,h)).patch}}function x7(){if(VT)return WT;
VT=!0;var g=Rn();return WT=function(c,h){return g(c,h,!0)}}function y7(){if(XT)return YT;XT=!0;var g=LK();return YT=function(c,h){return c.sort(function(f,m){return g(f,m,h)})}}function z7(){if(ZT)return $T;ZT=!0;var g=Sn();return $T=function(c,h){return(new g(c,h)).set.map(function(f){return f.map(function(m){return m.value}).join(" ").trim().split(" ")})}}function A7(){if(aU)return bU;aU=!0;var g=Cl(),c=Sn();return bU=function(h,f,m){var n=null,a=null,d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||
n&&1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function B7(){if(cU)return dU;cU=!0;var g=Cl(),c=Sn(),h=CD();return dU=function(f,m){f=new c(f,m);m=new g("0.0.0");if(f.test(m))return m;m=new g("0.0.0-0");if(f.test(m))return m;m=null;for(var n={},a=0;a<f.set.length;n={$jscomp$loop$prop$setMin$2689:n.$jscomp$loop$prop$setMin$2689},++a){var d=f.set[a];n.$jscomp$loop$prop$setMin$2689=null;d.forEach(function(k){return function(b){var e=new g(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?
e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!k.$jscomp$loop$prop$setMin$2689||h(e,k.$jscomp$loop$prop$setMin$2689))k.$jscomp$loop$prop$setMin$2689=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2689||m&&!h(m,n.$jscomp$loop$prop$setMin$2689)||(m=n.$jscomp$loop$prop$setMin$2689)}return m&&f.test(m)?m:null}}function RK(){if(eU)return fU;eU=!0;var g=Cl(),c=DD(),h=c.ANY,f=Sn(),m=ED(),n=CD(),a=MK(),d=
OK(),k=NK();return fU=function(b,e,l,p){b=new g(b,p);e=new f(e,p);switch(l){case ">":var q=n;l=d;var u=a;var w=">";var y=">=";break;case "<":q=a;l=k;u=n;w="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(m(b,e,p))return!1;for(var A={},C=0;C<e.set.length;A={$jscomp$loop$prop$high$2691:A.$jscomp$loop$prop$high$2691,$jscomp$loop$prop$low$2692:A.$jscomp$loop$prop$low$2692},++C){var E=e.set[C];A.$jscomp$loop$prop$high$2691=null;A.$jscomp$loop$prop$low$2692=null;
E.forEach(function(L){return function(I){I.semver===h&&(I=new c(">=0.0.0"));L.$jscomp$loop$prop$high$2691=L.$jscomp$loop$prop$high$2691||I;L.$jscomp$loop$prop$low$2692=L.$jscomp$loop$prop$low$2692||I;q(I.semver,L.$jscomp$loop$prop$high$2691.semver,p)?L.$jscomp$loop$prop$high$2691=I:u(I.semver,L.$jscomp$loop$prop$low$2692.semver,p)&&(L.$jscomp$loop$prop$low$2692=I)}}(A));if(A.$jscomp$loop$prop$high$2691.operator===w||A.$jscomp$loop$prop$high$2691.operator===y||(!A.$jscomp$loop$prop$low$2692.operator||
A.$jscomp$loop$prop$low$2692.operator===w)&&l(b,A.$jscomp$loop$prop$low$2692.semver)||A.$jscomp$loop$prop$low$2692.operator===y&&u(b,A.$jscomp$loop$prop$low$2692.semver))return!1}return!0}}function C7(){if(gU)return hU;gU=!0;var g=RK();return hU=function(c,h,f){return g(c,h,">",f)}}function D7(){if(iU)return jU;iU=!0;var g=RK();return jU=function(c,h,f){return g(c,h,"<",f)}}function E7(){if(kU)return lU;kU=!0;var g=ED(),c=Rn();return lU=function(h,f,m){var n=[],a=null,d=null;h=h.sort(function(e,l){return c(e,
l,m)});for(var k=$jscomp.makeIterator(h),b=k.next();!b.done;b=k.next())b=b.value,g(b,f,m)?(d=b,a||(a=b)):(d&&n.push([a,d]),a=d=null);a&&n.push([a,null]);a=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())k=$jscomp.makeIterator(d.value),d=k.next().value,k=k.next().value,d===k?a.push(d):k||d!==h[0]?k?d===h[0]?a.push("<="+k):a.push(d+" - "+k):a.push(">="+d):a.push("*");h=a.join(" || ");return h.length<("string"===typeof f.raw?f.raw:String(f)).length?h:f}}function F7(){if(mU)return nU;mU=
!0;var g=Sn(),c=DD(),h=c.ANY,f=ED(),m=Rn(),n=function(k,b,e){if(k===b)return!0;if(1===k.length&&k[0].semver===h){if(1===b.length&&b[0].semver===h)return!0;k=e.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===b.length&&b[0].semver===h){if(e.includePrerelease)return!0;b=[new c(">=0.0.0")]}var l=new Set,p,q,u=$jscomp.makeIterator(k);for(k=u.next();!k.done;k=u.next())k=k.value,">"===k.operator||">="===k.operator?p=a(p,k,e):"<"===k.operator||"<="===k.operator?q=d(q,k,e):l.add(k.semver);
if(1<l.size)return null;if(p&&q){var w=m(p.semver,q.semver,e);if(0<w||0===w&&(">="!==p.operator||"<="!==q.operator))return null}for(k=$jscomp.makeIterator(l).next();!k.done;){w=k.value;if(p&&!f(w,String(p),e)||q&&!f(w,String(q),e))return null;p=$jscomp.makeIterator(b);for(k=p.next();!k.done;k=p.next())if(!f(w,String(k.value),e))return!1;return!0}l=q&&!e.includePrerelease&&q.semver.prerelease.length?q.semver:!1;u=p&&!e.includePrerelease&&p.semver.prerelease.length?p.semver:!1;l&&1===l.prerelease.length&&
"<"===q.operator&&0===l.prerelease[0]&&(l=!1);b=$jscomp.makeIterator(b);for(k=b.next();!k.done;k=b.next()){k=k.value;var y=y||">"===k.operator||">="===k.operator;var A=A||"<"===k.operator||"<="===k.operator;if(p)if(u&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===u.major&&k.semver.minor===u.minor&&k.semver.patch===u.patch&&(u=!1),">"===k.operator||">="===k.operator){var C=a(p,k,e);if(C===k&&C!==p)return!1}else if(">="===p.operator&&!f(p.semver,String(k),e))return!1;if(q)if(l&&
k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===l.major&&k.semver.minor===l.minor&&k.semver.patch===l.patch&&(l=!1),"<"===k.operator||"<="===k.operator){if(C=d(q,k,e),C===k&&C!==q)return!1}else if("<="===q.operator&&!f(q.semver,String(k),e))return!1;if(!k.operator&&(q||p)&&0!==w)return!1}return p&&A&&!q&&0!==w||q&&y&&!p&&0!==w||u||l?!1:!0},a=function(k,b,e){if(!k)return b;e=m(k.semver,b.semver,e);return 0<e?k:0>e?b:">"===b.operator&&">="===k.operator?b:k},d=function(k,b,e){if(!k)return b;
e=m(k.semver,b.semver,e);return 0>e?k:0<e?b:"<"===b.operator&&"<="===k.operator?b:k};return nU=function(k,b,e){e=void 0===e?{}:e;if(k===b)return!0;k=new g(k,e);b=new g(b,e);var l=!1;k=$jscomp.makeIterator(k.set);var p=k.next();a:for(;!p.done;p=k.next()){p=p.value;for(var q=$jscomp.makeIterator(b.set),u=q.next();!u.done;u=q.next())if(u=n(p,u.value,e),l=l||null!==u,u)continue a;if(l)return!1}return!0}}function Oy(g){g=Object.assign({plugins:Qe.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&
"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function dw(g,c){c=Qe.normalizeOptions(c);var h=c.objPool||new Qe.ObjectPool(c);c=">="+Qe.serializerVersion.replace(Qe.majorAndMinorVersionRe,"");g=h.snapshotObject(g);Qe.removeUnreachableObjects([g.id],g.snapshot);Qe.clearDanglingConnections(g.snapshot);g.requiredVersion=c;return g}function Py(g,c){c=Qe.normalizeOptions(c);var h=g.requiredVersion;h&&!Qe.semver.satisfies(Qe.serializerVersion,
h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(Qe.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new Qe.ObjectPool(c)).resolveFromSnapshotAndId(g)}function Qy(g,c,h){function f(){var d=Qe.deserialize(g,h);Qe.runMigrations(n,"objectConverter",g,m);return d}h=Qe.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var m=h.objPool||(h.objPool=new Qe.ObjectPool(h));c=Qe.normalizeMigrations(c);
var n=c.after,a;Qe.runMigrations(c.before,"snapshotConverter",g,m);"function"===typeof h.onDeserializationStart&&(a=h.onDeserializationStart(g,h));return a instanceof Promise?a.then(f):f()}function Ry(g,c){return Qe.deserialize(Qe.serialize(g,c),c)}function Sy(g){return g&&g.split(",").map(function(c){c=c.split(" ").filter(function(h){return""!=h}).join(" ");c.includes(" ")&&(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));
return c}).join(",")}function ew(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?Sg.parseQuery(c):{};g.endsWith(".json")?(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+Sg.stringifyQuery(c)}function Ty(g){Object.assign(Sg.nameToClassMapping,g)}function $i(g,c){g=void 0===g?{}:g;c=void 0===c?{restore:!1}:c;var h=Sg.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(h=g.type),"object"===typeof g.type?h=Sg.locateClass(g.type):
"string"===typeof g.type&&(h=Sg.nameToClassMapping[g.type.toLowerCase()]||h));var f={};return c.restore?(new h((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(g):new h(g)}function Uy(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+Sg.string.newUUID().replace(/-/g,"_")}function G7(g){return"[object Array]"===H7.call(g)}function Xm(g,c,h){(this||SK).type=Number(g);(this||SK).vNode=c;(this||SK).patch=h}function oU(g,c){var h=
g.vnode;h||(h=g.vnode=g.render(c));if(!(I7(h)||J7(h)||K7(h)))throw Error("thunk did not return a valid node");return h}function pU(g,c){var h;for(h in g){if(!(h in c)){var f=f||{};f[h]=void 0}var m=g[h],n=c[h];if(m!==n)if(qU(m)&&qU(n))if(rU(n)!==rU(m))f=f||{},f[h]=n;else if(L7(n))f=f||{},f[h]=n;else{if(m=pU(m,n))f=f||{},f[h]=m}else f=f||{},f[h]=n}for(var a in c)a in g||(f=f||{},f[a]=c[a]);return f}function rU(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;
if(g.constructor)return g.constructor.prototype}function sU(g,c){var h={a:g};tU(g,c,h,0);return h}function tU(g,c,h,f){if(g!==c){var m=h[f],n=!1;if(FD(g)||FD(c))TK(g,c,h,f);else if(null==c)GD(g)||(UK(g,h,f),VK(g,h,f),m=h[f]),m=Tn(m,new gj(gj.REMOVE,g,c));else if(st(c))if(st(g))if(g.tagName===c.tagName&&g.namespace===c.namespace&&g.key===c.key){var a=M7(g.properties,c.properties);a&&(m=Tn(m,new gj(gj.PROPS,g,a)));a=f;var d=g.children;c=c.children;var k=uU(c),b=k.keys,e=k.free;if(e.length===c.length)c=
{children:c,moves:null};else{k=uU(d);var l=k.keys;if(k.free.length===d.length)c={children:c,moves:null};else{k=[];for(var p=0,q=e.length,u=0,w=0;w<d.length;w++){var y=d[w];y.key?b.hasOwnProperty(y.key)?(y=b[y.key],k.push(c[y])):(u++,k.push(null)):p<q?(y=e[p++],k.push(c[y])):(u++,k.push(null))}e=p>=e.length?c.length:e[p];for(p=0;p<c.length;p++)q=c[p],q.key?l.hasOwnProperty(q.key)||k.push(q):p>=e&&k.push(q);l=k.slice();e=0;p=[];q=[];for(y=0;y<c.length;){var A=c[y];for(w=l[e];null===w&&l.length;)p.push(HD(l,
e,null)),w=l[e];w&&w.key===A.key?(e++,y++):A.key?(w&&w.key?b[w.key]!==y+1?(p.push(HD(l,e,w.key)),(w=l[e])&&w.key===A.key?e++:q.push({key:A.key,to:y})):q.push({key:A.key,to:y}):q.push({key:A.key,to:y}),y++):w&&w.key&&p.push(HD(l,e,w.key))}for(;e<l.length;)w=l[e],p.push(HD(l,e,w&&w.key));c=p.length!==u||q.length?{children:k,moves:{removes:p,inserts:q}}:{children:k,moves:null}}}b=c.children;k=d.length;u=b.length;k=k>u?k:u;for(u=0;u<k;u++)l=d[u],e=b[u],a+=1,l?tU(l,e,h,a):e&&(m=Tn(m,new gj(gj.INSERT,null,
e))),st(l)&&l.count&&(a+=l.count);c.moves&&(m=Tn(m,new gj(gj.ORDER,g,c.moves)))}else m=Tn(m,new gj(gj.VNODE,g,c)),n=!0;else m=Tn(m,new gj(gj.VNODE,g,c)),n=!0;else vU(c)?vU(g)?g.text!==c.text&&(m=Tn(m,new gj(gj.VTEXT,g,c))):(m=Tn(m,new gj(gj.VTEXT,g,c)),n=!0):GD(c)&&(GD(g)||(n=!0),m=Tn(m,new gj(gj.WIDGET,g,c)));m&&(h[f]=m);n&&(UK(g,h,f),VK(g,h,f))}}function VK(g,c,h){if(GD(g))"function"===typeof g.destroy&&(c[h]=Tn(c[h],new gj(gj.REMOVE,g,null)));else if(st(g)&&(g.hasWidgets||g.hasThunks)){g=g.children;
for(var f=g.length,m=0;m<f;m++){var n=g[m];h+=1;VK(n,c,h);st(n)&&n.count&&(h+=n.count)}}else FD(g)&&TK(g,null,c,h)}function TK(g,c,h,f){g=N7(g,c);g=sU(g.a,g.b);a:{for(m in g)if("a"!==m){var m=!0;break a}m=!1}m&&(h[f]=new gj(gj.THUNK,null,g))}function UK(g,c,h){if(st(g)){if(g.hooks){var f=c[h],m=gj.PROPS,n=g.hooks,a={},d;for(d in n)a[d]=void 0;c[h]=Tn(f,new gj(m,g,a))}if(g.descendantHooks||g.hasThunks)for(g=g.children,f=g.length,m=0;m<f;m++)n=g[m],h+=1,UK(n,c,h),st(n)&&n.count&&(h+=n.count)}else FD(g)&&
TK(g,null,c,h)}function HD(g,c,h){g.splice(c,1);return{from:c,key:h}}function uU(g){for(var c={},h=[],f=g.length,m=0;m<f;m++){var n=g[m];n.key?c[n.key]=m:h.push(m)}return{keys:c,free:h}}function Tn(g,c){return g?(O7(g)?g.push(c):g=[g,c],g):c}function wU(g,c,h,f){if(f)if(f=f[c],xU(f))f.unhook&&f.unhook(g,c,h);else if("attributes"===c)for(var m in f)g.removeAttribute(m);else if("style"===c)for(var n in f)g.style[n]="";else g[c]="string"===typeof f?"":null}function yU(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);
if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function zU(g,c){var h=c?c.document||AU:AU,f=c?c.warn:null;g=P7(g).a;if(Q7(g))return g.init();if(R7(g))return h.createTextNode(g.text);if(!S7(g))return f&&f("Item is not a valid virtual dom node",g),null;h=null===g.namespace?h.createElement(g.tagName):h.createElementNS(g.namespace,g.tagName);T7(h,g.properties);g=g.children;for(f=0;f<g.length;f++){var m=zU(g[f],c);m&&h.appendChild(m)}return h}function BU(g,c,h,f,m){f=
f||{};if(g){CU(h,m,m)&&(f[m]=g);var n=c.children;if(n){g=g.childNodes;for(var a=0;a<c.children.length;a++){m+=1;var d=n[a]||U7,k=m+(d.count||0);CU(h,m,k)&&BU(g[a],d,h,f,m);m=k}}}return f}function CU(g,c,h){if(0===g.length)return!1;for(var f=0,m=g.length-1,n,a;f<=m;){n=(m+f)/2>>0;a=g[n];if(f===m)return a>=c&&a<=h;if(a<c)f=n+1;else if(a>h)m=n-1;else return!0}return!1}function V7(g,c){return g>c?1:-1}function DU(g,c){"function"===typeof c.destroy&&W7(c)&&c.destroy(g)}function EU(g,c,h){h=h||{};h.patch=
h.patch&&h.patch!==EU?h.patch:X7;h.render=h.render||Y7;return h.patch(g,c,h)}function X7(g,c,h){var f=[];for(m in c)"a"!==m&&f.push(Number(m));if(0===f.length)return g;var m=Z7(g,c.a,f);var n=g.ownerDocument;h.document||n===$7||(h.document=n);for(n=0;n<f.length;n++){var a=f[n];var d=m[a],k=c[a],b=h;if(d)if(a8(k))for(var e=0;e<k.length;e++)a=FU(k[e],d,b),d===g&&(g=a);else a=FU(k,d,b),d===g&&(g=a)}return g}function WK(g,c,h,f,m){(this||Po).tagName=g;(this||Po).properties=c||b8;(this||Po).children=h||
c8;(this||Po).key=null!=f?String(f):void 0;(this||Po).namespace="string"===typeof m?m:null;g=h&&h.length||0;f=0;var n=m=!1,a=!1,d;for(b in c)if(c.hasOwnProperty(b)){var k=c[b];d8(k)&&k.unhook&&(d||(d={}),d[b]=k)}for(c=0;c<g;c++){var b=h[c];e8(b)?(f+=b.count||0,!m&&b.hasWidgets&&(m=!0),!n&&b.hasThunks&&(n=!0),a||!b.hooks&&!b.descendantHooks||(a=!0)):!m&&f8(b)?"function"===typeof b.destroy&&(m=!0):!n&&g8(b)&&(n=!0)}(this||Po).count=g+f;(this||Po).hasWidgets=m;(this||Po).hasThunks=n;(this||Po).hooks=
d;(this||Po).descendantHooks=a}function XK(g){(this||h8).text=String(g)}function ID(g){if(!(this instanceof ID))return new ID(g);this.value=g}function Vy(g){if(!(this instanceof Vy))return new Vy(g);this.value=g}function GU(g,c,h,f){if("string"===typeof g)c.push(new HU(g));else if("number"===typeof g)c.push(new HU(String(g)));else if(IU(g))c.push(g);else if(JU(g))for(var m=0;m<g.length;m++)GU(g[m],c,h,f);else if(null!==g&&void 0!==g)throw c={tagName:h,properties:f},h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",
h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+KU(g)+".\nThe parent vnode is:\n"+KU(c),h.foreignObject=g,h.parentVnode=c,h;}function IU(g){return i8(g)||j8(g)||k8(g)||l8(g)}function KU(g){try{return JSON.stringify(g,null,"    ")}catch(c){return String(g)}}function YK(g,c){if(3===g.nodeType)return new LU(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var h="http://www.w3.org/1999/xhtml"!==g.namespaceURI?g.namespaceURI:null,f=c&&g.getAttribute(c)?
g.getAttribute(c):null,m=g.tagName;var n,a={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var d=g.namespaceURI;for(var k=0;k<g.attributes.length;k++){if("style"==g.attributes[k].name){var b=g.style;var e={};for(n=0;n<b.length;++n){var l=b.item(n);e[l]=String(b[l]);-1<e[l].indexOf("url")&&(e[l]=e[l].replace(/"/g,""))}b="style";l=n=void 0}else d?(n=g.attributes[k],b=n.name,e=n.value,n=m8[n.name]||"",l=void 0):(n=void 0,e=g.attributes[k],b=MU[e.name]?MU[e.name]:
e.name,0===b.indexOf("data-")||0===b.indexOf("aria-")?(e=e.value,n=!0):e=e.value,l=n||!1,n=void 0);n?a[b]={namespace:n,value:e}:l?(a.attributes||(a.attributes={}),a.attributes[b]=e):a[b]=e}}d=[];for(k=0;k<g.childNodes.length;k++)d.push(YK(g.childNodes[k],c));return new n8(m,a,d,f,h)}return new LU("")}function Wy(g){var c={};Cg.addFill(g,c);Cg.addTransform(g,c);Cg.addTransformOrigin(g,c);Cg.addDisplay(g,c);Cg.addExtentStyle(g,c);Cg.addBorder(g,c);Cg.addBorderRadius(g,c);Cg.addShadowStyle(g,c);g.grayscale&&
(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function JD(g){return g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale}function ZK(g,c){var h=g.position,f=g.origin,m=g.scale,n=g.rotation,a=g.flipped,d=g.tilted,k=g.perspective,b=g.owner,e=Math.round(h.x-f.x-(g._skipWrapping&&b?b.borderWidthLeft:0));h=Math.round(h.y-f.y-
(g._skipWrapping&&b?b.borderWidthTop:0));if(g=Cg.canBePromotedToCompositionLayer(g))c.willChange="transform";b&&b.isText||g?c.transform="translate("+e+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=e+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+m.toFixed(5)+","+m.toFixed(5)+")";k&&(c.perspective=k+"px");a&&(c.transform+=" rotateY("+180*a+"deg)");d&&(c.transform+=" rotateX("+180*d+"deg)")}function Xy(g,c){var h=g.width;g=g.height;c.width=h||1;c.height=g||1;c.viewBox=[0,0,h||1,g||1].join(" ");
return c}function fw(g){var c="";if(0<g.length){var h=g[0];var f=h.position;var m=f.y;f=f.x;c+="M "+f+" "+m+" "}for(var n=1;n<g.length-1;n++){var a=g[n],d=a.position,k=d.x;d=d.y;var b=a,e=b.controlPoints.previous;c=b.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(m+h.controlPoints.next.y)+" "+(k+e.x)+" "+(d+e.y)+" "+k+" "+d+" "):c+("L "+k+" "+d+" ");h=a;f=k;m=d}0<g.length&&(a=g[g.length-1].position,n=a.x,a=a.y,g=g[g.length-1],k=g.controlPoints.previous,c=g.isSmooth?c+("C "+(f+h.controlPoints.next.x)+
" "+(m+h.controlPoints.next.y)+" "+(n+k.x)+" "+(a+k.y)+" "+n+" "+a):c+("L "+n+" "+a));return c}function Yy(g,c){var h=g.id,f=g.vertices,m=g.fill,n=g.borderColor,a=g.borderWidth;f.length&&(c.d=Cg.getSvgVertices(f));Cg.addSvgBorderStyle(g,c);c["stroke-width"]=a.valueOf();c.fill=m?m.isGradient?"url(#gradient-fill"+h+")":m.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function gw(g){var c=g.reactsToPointer,h=g.nativeCursor,f=
g.clipMode,m=ae.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete m.background;"visible"!==f&&(m.overflow=f,m["-webkit-overflow-scrolling"]="touch",m["overflow-anchor"]="none");Object.assign(m,g);m.position="absolute";m["pointer-events"]=c?"auto":"none";m.cursor=h;return m}function $K(g,c){this.morph=g;this.type=c}function hw(g,c){c={animation:new ae.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),
draggable:!1,"morph-after-render-hook":new ae.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=ae.bowser.ios&&g.draggable&&!g.isWorld?"none":ae.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function KD(g){var c=new ae.SvgAnimation(g,"svg"),h={};ae.addSvgAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function LD(g){var c=new ae.SvgAnimation(g,"path"),h={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};
ae.addPathAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function MD(g,c,h){var f=h=h.valueOf(),m=f.bounds,n=f.focus,a=f.vector;f=f.stops;var d=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};a&&(g.attributes.gradientTransform="rotate("+ae.num.toDegrees(a.extent().theta())+", "+d/2+", "+c/2+")");n&&m&&(a=m.width,m=m.height,g.attributes.gradientTransform="matrix(\n"+a/
d+", 0, 0, "+m/c+",\n"+(d/2-a/d*(d/2)+n.x*d-d/2)+",\n"+(c/2-m/c*(c/2)+n.y*c-c/2)+")");return ae.h(h.type,g,f.map(function(k){return ae.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}function ND(g,c){c=void 0===c?g.env.renderer:c;return ae.createNode(g.render(c),c.domEnvironment)}function OD(g,c){var h=c.renderMap.get(g),f=c.getNodeForMorph(g);if(f&&h){var m=c.render(g),n=ae.diff(h,m);if(g=
c.renderMap.get(g.owner))g=g.children[0].children,h=g.indexOf(h),g[h]=m,ae.patch(f,n)}}function PD(g,c){if(g.needsRerender()){var h=!1,f=c.domNode,m=c.renderMap.get(g)||f&&(h=!0)&&ae.parser(f)||c.render(g),n=c.render(g);h&&(m.key=n.key);h=ae.diff(m,n);f=f||(c.domNode=ae.createNode(m,c.domEnvironment));f.parentNode||ae.initDOMState(c,g);ae.patch(f,h);c.renderFixedMorphs(n.fixedMorphs,g)}}function QD(g,c,h){return(((1-3*h+3*c)*g+(3*h-6*c))*g+3*c)*g}function o8(g){return g}function lr(g){return Ee.obj.isFunction(g)?
g:Ee.Bezier.apply(Ee,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function iw(g){var c=0,h=0;do c+=g.offsetTop||0,h+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:h}}function aL(){return System.get("@system-env").browser?dg.createDOMEnvironment_browser():dg.createDOMEnvironment_node()}function RD(){return dg._defaultEnv||(dg._defaultEnv=System.get("@system-env").browser?new dg.DomEnvironment(window,document,function(){}):dg.createDOMEnvironment())}function Qo(g,
c,h){g=void 0===g?"lively-css":g;h=void 0===h?document:h;var f=h.getElementById(g);return f?dg.setCSSDef(f,c,h):dg.addCSSDef(g,c,h)}function tt(g,c,h,f){h=void 0===h?document:h;f=void 0===f?!0:f;var m=h.getElementById(g),n=!1;return m?f&&m.getAttribute("href")!==c?(m.setAttribute("href",c),m.onload=function(){return n=!0},dg.promise.waitFor(3E4,function(){return!!n&&m})):Promise.resolve():(m=document.createElement("link"),m.type="text/css",m.rel="stylesheet",m.setAttribute("id",g),m.setAttribute("href",
c),m.onload=function(){return n=!0},(h.head||h).appendChild(m),dg.promise.waitFor(3E4,function(){return!!n&&m}))}function SD(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;
default:return g.linux||g.win||g.windows}}function TD(){bL=!0;for(var g,c,h=Zy.length;h;){c=Zy;Zy=[];for(g=-1;++g<h;)c[g]();h=Zy.length}bL=!1}function jw(g,c,h){var f=h[h.length-1];g===f.element&&(h.pop(),f=h[h.length-1]);h=f.element;f=f.index;Array.isArray(h)?h.push(g):f===c.length-2?(c=c.pop(),h[c]=g):c.push(g)}function wi(){wi.init.call(this)}function UD(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function NU(g,c,
h,f){var m,n,a;if(UD(h),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",c,h.listener?h.listener:h),n=g._events),a=n[c]),void 0===a)n[c]=h,++g._eventsCount;else if("function"==typeof a?a=n[c]=f?[h,a]:[a,h]:f?a.unshift(h):a.push(h),0<(m=void 0===g._maxListeners?wi.defaultMaxListeners:g._maxListeners)&&a.length>m&&!a.warned)a.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),
h.name="MaxListenersExceededWarning",h.emitter=g,h.type=c,h.count=a.length,console&&console.warn&&console.warn(h);return g}function p8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function OU(g,c,h){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:h};c=p8.bind(g);return c.listener=h,g.wrapFn=c,c}function PU(g,c,h){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===
c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),g=0;g<h.length;++g)h[g]=c[g].listener||c[g];else h=QU(c,c.length);return h}function RU(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function QU(g,c){for(var h=Array(c),f=0;f<c;++f)h[f]=g[f];return h}function kw(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function mr(){this._store={}}function $y(g){this._store=new mr;if(g&&
Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function bk(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var f=0;for(c=g.length;f<c;f++)h[f]=bk(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),
h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&SU.call(h)==q8);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=bk(g[f]),"undefined"!==typeof c&&(h[f]=c));return h}function TU(g){var c=!1;return lw(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function UU(g){return lw(function(c){c=bk(c);
var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=TU(function(b,e){b?a(b):n(e)});c.push(k);(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function r8(g,c,h){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],m=0;m<h.length-1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",
a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function Kj(g,c){return UU(lw(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var f=this;r8(f,g,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(m,n){f.taskqueue.addTask(function(a){a?n(a):m(f[g].apply(f,h))})})}))}function az(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}function VU(g){return g}
function s8(g){return[{ok:g}]}function WU(g,c,h){function f(){var q=[];e.forEach(function(u){u.docs.forEach(function(w){q.push({id:u.id,docs:[w]})})});h(null,{results:q})}function m(){if(!(p>=l.length)){var q=l.slice(p,Math.min(p+6,l.length));n(q,p);p+=q.length}}function n(q,u){q.forEach(function(w,y){var A=u+y;y=d.get(w);var C=az(y[0],["atts_since","attachments"]);C.open_revs=y.map(function(L){return L.rev});C.open_revs=C.open_revs.filter(VU);var E=VU;0===C.open_revs.length&&(delete C.open_revs,
E=s8);["revs","attachments","binary","ajax","latest"].forEach(function(L){L in c&&(C[L]=c[L])});g.get(w,C,function(L,I){L=L?[{error:L}]:E(I);e[A]={id:w,docs:L};++b===k&&f();m()})})}var a=c.docs,d=new tm;a.forEach(function(q){d.has(q.id)?d.get(q.id).push(q):d.set(q.id,[q])});var k=d.size,b=0,e=Array(k),l=[];d.forEach(function(q,u){l.push(u)});var p=0;m()}function t8(g){bz&&addEventListener("storage",function(c){g.emit(c.key)})}function mw(){Xl.EventEmitter.call(this);this._listeners={};t8(this)}function Ym(g){if("undefined"!==
typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function u8(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function cL(g,c){Ym("info","The above "+g+" is totally normal. "+c)}function Hi(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function ch(g,c){function h(f){for(var m in g)"function"!==typeof g[m]&&
(this[m]=g[m]);void 0!==f&&(this.reason=f)}h.prototype=Hi.prototype;return new h(c)}function nw(g){if("object"!==typeof g){var c=g;g=XU;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function dL(g){var c={},h=g.filter&&"function"===typeof g.filter;c.query=g.query_params;return function(f){f.doc||(f.doc={});var m;if(m=h)try{m=!(0,g.filter)(f.doc,
c)}catch(a){m=ch(VD,"Filter function threw: "+a.toString())}if("object"===typeof m)return m;if(m)return!1;if(!g.include_docs)delete f.doc;else if(!g.attachments)for(var n in f.doc._attachments)f.doc._attachments.hasOwnProperty(n)&&(f.doc._attachments[n].stub=!0);return!0}}function WD(g){for(var c=[],h=0,f=g.length;h<f;h++)c=c.concat(g[h]);return c}function YU(g){var c;g?"string"!==typeof g?c=ch(ZU):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=ch(v8)):c=ch(w8);if(c)throw c;}function Ro(g){return"boolean"===
typeof g._remote?g._remote:"function"===typeof g.type?(Ym("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function eL(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function $U(g){return(g=eL(g))?g.join("/"):null}function aV(g){g=x8.exec(g);for(var c={},h=14;h--;){var f=bV[h],m=g[h]||"",n=-1!==["user","password"].indexOf(f);c[f]=n?decodeURIComponent(m):m}c.queryKey={};c[bV[12]].replace(y8,function(a,
d,k){d&&(c.queryKey[d]=k)});return c}function fL(g,c){var h=[],f=[],m;for(m in c)c.hasOwnProperty(m)&&(h.push(m),f.push(c[m]));h.push(g);return Function.apply(null,h).apply(null,f)}function XD(g,c,h){return new Promise(function(f,m){g.get(c,function(n,a){if(n){if(404!==n.status)return m(n);a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(z8(g,a,h))})})}function z8(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;
return XD(g,c._id,h)})}function gL(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function hL(g,c){for(var h=g.length,f=new ArrayBuffer(h),m=new Uint8Array(f),n=0;n<h;n++)m[n]=g.charCodeAt(n);return gL([f],{type:c})}function iL(g,
c){return hL(atob(g),c)}function cV(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function dV(g,c){cV(g,function(h){c(h)})}function jL(g,c){dV(g,function(h){c(btoa(h))})}function A8(g,c){var h=new FileReader;h.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);
c(f)};h.readAsArrayBuffer(g)}function B8(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function C8(g,c,h,f,m){if(0<h||f<c.size)c=B8(c,h,f);A8(c,function(n){g.append(n);m()})}function D8(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function kL(g,c){function h(){E8(m)}function f(){var p=e.end(!0);p=btoa(p);c(p);e.destroy()}function m(){var p=b*d,q=p+d;b++;b<k?l(e,g,p,q,h):l(e,g,p,q,f)}var n="string"===typeof g,a=n?g.length:g.size,d=Math.min(32768,a),k=Math.ceil(a/
d),b=0,e=n?new YD:new YD.ArrayBuffer,l=n?D8:C8;m()}function eV(g,c){g=bk(g);if(!c)return fV.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return YD.hash(JSON.stringify(g))}function ut(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;var a=c;var d=f}}return a+"-"+n}function vt(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,
m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function F8(g,c){return g.pos-c.pos}function lL(g){var c=[];vt(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(F8).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function mL(g){var c=ut(g);g=lL(g.rev_tree);for(var h=[],f=0,m=g.length;f<m;f++){var n=g[f];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function G8(g){var c=[];vt(g.rev_tree,function(h,
f,m,n,a){"available"!==a.status||h||(c.push(f+"-"+m),a.status="missing")});return c}function gV(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function H8(g,c){return g.pos-c.pos}function hV(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),
f=n):h=f=n}return h}function I8(g,c){return g[0]<c[0]?-1:1}function iV(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=I8,p=0,q=b.length;p<q;)k=
p+q>>>1,0>l(b[k],e)?p=k+1:q=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function jV(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=iV(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var q=
p.pop();if(0===q.diff)q.ids[0]===e.ids[0]&&l.push(q);else for(var u=q.ids[2],w=0,y=u.length;w<y;w++)p.push({ids:u[w],diff:q.diff-1,parent:q.ids,parentIdx:w})}(l=l[0])?(n=iV(l.ids,e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||f.push(c);f.sort(H8);return{tree:f,conflicts:m||"internal_node"}}function J8(g,c){g=gV(g);for(var h,f,m=0,n=g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+
k,ids:hV(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:hV(d,0)};f=f?jV(f,b,!0).tree:[b]}h&&vt(f,function(l,p,q){delete h[p+"-"+q]});return{tree:f,revs:h?Object.keys(h):[]}}function kV(g,c,h){g=jV(g,c);h=J8(g.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:g.conflicts}}function K8(g){return g.ids}function cq(g,c){c||(c=ut(g));c=c.substring(c.indexOf("-")+1);g=g.rev_tree.map(K8);for(var h;h=g.pop();){if(h[0]===c)return!!h[1].deleted;g=g.concat(h[2])}}function wt(g){return/^_local/.test(g)}
function L8(g,c){for(var h=c.rev_tree.slice(),f;f=h.pop();){var m=f.pos,n=f.ids,a=n[0],d=n[1];n=n[2];var k=0===n.length;f=f.history?f.history.slice():[];f.push({id:a,pos:m,opts:d});if(k)for(d=0,k=f.length;d<k;d++){var b=f[d];if(b.pos+"-"+b.id===g)return m+"-"+a}a=0;for(d=n.length;a<d;a++)h.push({pos:m+1,ids:n[a],history:f})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+g);}function cz(g,c,h){function f(){m.cancel()}Xl.EventEmitter.call(this);var m=this;this.db=g;c=c?bk(c):
{};var n=c.complete=TU(function(d,k){d?(k=m,0<("listenerCount"in k?k.listenerCount("error"):Xl.EventEmitter.listenerCount(k,"error"))&&m.emit("error",d)):m.emit("complete",k);m.removeAllListeners();g.removeListener("destroyed",f)});h&&(m.on("complete",function(d){h(null,d)}),m.on("error",h));g.once("destroyed",f);c.onChange=function(d,k,b){if(!m.isCancelled)try{m.emit("change",d,k,b)}catch(e){Ym("error",'Error in .on("change", function):',e)}};var a=new Promise(function(d,k){c.complete=function(b,
e){b?k(b):d(e)}});m.once("cancel",function(){g.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=a.then.bind(a);this["catch"]=a["catch"].bind(a);this.then(function(d){n(null,d)},n);g.taskqueue.isReady?m.validateChanges(c):g.taskqueue.addTask(function(d){d?c.complete(d):m.isCancelled?m.emit("cancel"):m.validateChanges(c)})}function M8(g,c,h){var f=[{rev:g._rev}];"all_docs"===h.style&&(f=lL(c.rev_tree).map(function(m){return{rev:m.rev}}));f={id:c.id,changes:f,doc:g};cq(c,
g._rev)&&(f.deleted=!0);h.conflicts&&(f.doc._conflicts=mL(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function nL(g,c){return function(h,f){h||f[0]&&f[0].error?(h=h||f[0],h.docId=c,g(h)):g(null,f.length?f[0]:f)}}function N8(g){for(var c=0;c<g.length;c++){var h=g[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var f=Object.keys(h._attachments),m=0;m<f.length;m++){var n=f[m];h._attachments[n]=az(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}
function O8(g,c){var h=g._id;var f=c._id;h=h<f?-1:h>f?1:0;if(0!==h)return h;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:0;return g<c?-1:g>c?1:0}function P8(g){var c={},h=[];vt(g,function(f,m,n,a){m=m+"-"+n;f&&(c[m]=0);void 0!==a&&h.push({from:a,to:m});return m});h.reverse();h.forEach(function(f){c[f.from]=void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}function Q8(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):
g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function lV(g){var c=g._compactionQueue[0],h=c.opts,f=c.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(m){m&&m.last_seq&&(h.last_seq=m.last_seq);g._compact(h,function(n,a){n?f(n):f(null,a);So(function(){g._compactionQueue.shift();g._compactionQueue.length&&lV(g)})})})}function aj(){Xl.EventEmitter.call(this);for(var g in aj.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}
function dz(){this.failed=this.isReady=!1;this.queue=[]}function R8(g,c){var h=g.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var f=Zg.adapters,m=Zg.preferredAdapters;h=Zg.prefix;c=c.adapter;if(!c)for(var n=0;n<m.length;++n)if(c=m[n],"idb"===c&&"websql"in f&&bz&&localStorage["_pouch__websqldb_"+h+g])Ym("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;f=f[c];return{name:(f&&
"use_prefix"in f?f.use_prefix:1)?h+g:g,adapter:c}}function S8(g){function c(f){g.removeListener("closed",h);f||g.constructor.emit("destroyed",g.name)}function h(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",h);g.constructor.emit("ref",g)}function Zg(g,c){if(!(this instanceof Zg))return new Zg(g,c);var h=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=bk(c);
h.auto_compaction=c.auto_compaction;h.prefix=Zg.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var f=R8((c.prefix||"")+g,c);c.name=f.name;c.adapter=c.adapter||f.adapter;h.name=g;h._adapter=c.adapter;Zg.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!Zg.adapters[c.adapter]||!Zg.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);aj.call(h);h.taskqueue=new dz;h.adapter=c.adapter;Zg.adapters[c.adapter].call(h,c,function(m){if(m)return h.taskqueue.fail(m);
S8(h);h.emit("created",h);Zg.emit("created",h.name);h.taskqueue.ready(h)})}function mV(g,c){for(var h=0,f=c.length;h<f&&(g=g[c[h]],g);h++);return g}function nV(g){for(var c=[],h="",f=0,m=g.length;f<m;f++){var n=g[f];"."===n?0<f&&"\\"===g[f-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function T8(g){return g[Object.keys(g)[0]]}function ez(g){var c={};g.forEach(function(h){Object.keys(h).forEach(function(f){var m=h[f];"object"!==typeof m&&(m={$eq:m});if(-1<oV.indexOf(f))c[f]=
m instanceof Array?m.map(function(a){return ez([a])}):ez([m]);else{var n=c[f]=c[f]||{};Object.keys(m).forEach(function(a){var d=m[a];"$gt"===a||"$gte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===a?d>n.$gte&&(n.$gte=d):d>=n.$gte&&(delete n.$gte,n.$gt=d):"undefined"!==typeof n.$gt?"$gte"===a?d>n.$gt&&(delete n.$gt,n.$gte=d):d>n.$gt&&(n.$gt=d):n[a]=d):"$lt"===a||"$lte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===a?d<n.$lte&&(n.$lte=d):d<=n.$lte&&(delete n.$lte,
n.$lt=d):"undefined"!==typeof n.$lt?"$lte"===a?d<n.$lt&&(delete n.$lt,n.$lte=d):d<n.$lt&&(n.$lt=d):n[a]=d):"$ne"===a?"$ne"in n?n.$ne.push(d):n.$ne=[d]:"$eq"===a?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=d):n[a]=d})}})});return c}function pV(g){for(var c in g){if(Array.isArray(g))for(var h in g)g[h].$and&&(g[h]=ez(g[h].$and));var f=g[c];"object"===typeof f&&pV(f)}return g}function qV(g,c){for(var h in g){"$and"===h&&(c=!0);var f=g[h];"object"===typeof f&&(c=qV(f,c))}return c}
function U8(g){var c=bk(g);g=!1;qV(c,!1)&&(c=pV(c),"$and"in c&&(c=ez(c.$and)),g=!0);["$or","$nor"].forEach(function(a){a in c&&c[a].forEach(function(d){for(var k=Object.keys(d),b=0;b<k.length;b++){var e=k[b],l=d[e];if("object"!==typeof l||null===l)d[e]={$eq:l}}})});"$not"in c&&(c.$not=ez([c.$not]));for(var h=Object.keys(c),f=0;f<h.length;f++){var m=h[f],n=c[m];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);c[m]=n}return c}function yk(g,c){if(g===c)return 0;g=xt(g);c=xt(c);
var h=oL(g),f=oL(c);if(0!==h-f)return h-f;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===c?0:g>c?1:-1}if(Array.isArray(g))a:{h=Math.min(g.length,c.length);for(f=0;f<h;f++){var m=yk(g[f],c[f]);if(0!==m){g=m;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{h=Object.keys(g);f=Object.keys(c);m=Math.min(h.length,f.length);for(var n=0;n<m;n++){var a=yk(h[n],f[n]);if(0!==a){g=a;break a}a=yk(g[h[n]],c[f[n]]);if(0!==a){g=a;break a}}g=h.length===
f.length?0:h.length>f.length?1:-1}return g}function xt(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var h=g.length;g=Array(h);for(var f=0;f<h;f++)g[f]=xt(c[f])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(h in g={},c)c.hasOwnProperty(h)&&(f=c[h],"undefined"!==typeof f&&(g[h]=xt(f)))}}return g}function V8(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;
case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),h=parseInt(c[1],10);g=0>g;h=((g?-h:h)- -324).toString();for(var f="",m=3-h.length;f.length<m;)f+="0";h=(g?"0":"2")+(""+(f+h));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=h+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);c=n?g:Object.keys(g);h=-1;f=c.length;m="";
if(n)for(;++h<f;)m+=Un(c[h]);else for(;++h<f;)n=c[h],m+=Un(n)+Un(g[n]);return m}return""}function Un(g){g=xt(g);return oL(g)+""+V8(g)+"\x00"}function oL(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function W8(g){function c(h){return g.map(function(f){f=Object.keys(f)[0];f=nV(f);return mV(h,f)})}return function(h,f){var m=c(h.doc),n=c(f.doc);m=yk(m,n);if(0!==m)return m;h=h.doc._id;f=f.doc._id;
return h<f?-1:h>f?1:0}}function X8(g,c,h){g=g.filter(function(m){return ow(m.doc,c.selector,h)});if(c.sort){var f=W8(c.sort);g=g.sort(f);"string"!==typeof c.sort[0]&&"desc"===T8(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)f=c.skip||0,g=g.slice(f,("limit"in c?c.limit:g.length)+f);return g}function ow(g,c,h){return h.every(function(f){var m=c[f],n=nV(f),a=mV(g,n);return-1<oV.indexOf(f)?Y8(f,m,g):pL(m,g,n,a)})}function pL(g,c,h,f){return g?"object"===typeof g?Object.keys(g).every(function(m){var n=
g[m];if(!rV[m])throw Error('unknown operator "'+m+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return rV[m](c,n,h,f)}):g===f:!0}function Y8(g,c,h){return"$or"===g?c.some(function(f){return ow(h,f,Object.keys(f))}):"$not"===g?!ow(h,c,Object.keys(c)):!c.find(function(f){return ow(h,f,Object.keys(f))})}function fz(g){return"undefined"!==typeof g&&null!==g}function yt(g){return"undefined"!==typeof g}function sV(g,
c){return c.some(function(h){return g instanceof Array?-1<g.indexOf(h):g===h})}function Z8(g,c){return c.every(function(h){return-1<g.indexOf(h)})}function $8(g,c){switch(c){case "null":return null===g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");
}function a9(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}function b9(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=$U(g.view):g.filter=$U(g.filter))}function c9(g,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Ro(g.db)}function d9(g,c){var h=c.complete;if("_view"===
c.filter){if(!c.view||"string"!==typeof c.view){var f=ch(VD,"`view` filter parameter not found or invalid.");return h(f)}var m=eL(c.view);g.db.get("_design/"+m[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(nw(a));a=d&&d.views&&d.views[m[1]]&&d.views[m[1]].map;if(!a)return h(ch(Vn,d.views?"missing json key: "+m[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',
"  var view = "+a+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=fL(d,{});c.filter=d;g.doChanges(c)})}else if(c.selector)c.filter=function(a){var d=c.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=U8(d);return(a=X8([{doc:a}],{selector:d},Object.keys(d)))&&1===a.length},g.doChanges(c);else{var n=eL(c.filter);g.db.get("_design/"+n[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(nw(a));a=d&&d.filters&&
d.filters[n[1]];if(!a)return h(ch(Vn,d&&d.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=fL('"use strict";\nreturn '+a+";",{});g.doChanges(c)})}}function tV(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function uV(g){if(!/^\d+-/.test(g))return ch(vV);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function wV(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=
ZD());var m=eV(g,h.deterministic_revs);if(g._rev){c=uV(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=uV(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=
[{pos:n,ids:[m,f,[]]}]}}YU(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!e9[d])throw g=ch(xV,d),g.message=xV.message+": "+d,g;n&&!f9[d]?f.metadata[d.slice(1)]=g[d]:f.data[d]=g[d]}return f}function g9(g,c,h){try{var f=atob(g.data)}catch(m){f={error:ch(yV,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);g.length=f.length;g.data="blob"===c?hL(f,g.content_type):"base64"===c?btoa(f):f;kL(f,function(m){g.digest=
"md5-"+m;h()})}function h9(g,c,h){kL(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?dV(g.data,function(m){g.data=m;h()}):"base64"===c?jL(g.data,function(m){g.data=m;h()}):h()})}function i9(g,c,h){if(g.stub)return h();"string"===typeof g.data?g9(g,c,h):h9(g,c,h)}function j9(g,c,h){function f(){m++;g.length===m&&(n?h(n):h())}if(!g.length)return h();var m=0,n;g.forEach(function(a){function d(l){n=l;b++;b===k.length&&f()}var k=a.data&&a.data._attachments?Object.keys(a.data._attachments):
[],b=0;if(!k.length)return f();for(var e in a.data._attachments)a.data._attachments.hasOwnProperty(e)&&i9(a.data._attachments[e],c,d)})}function k9(g,c,h,f,m,n,a,d,k){g=g||1E3;var b=d.new_edits,e=new tm,l=0,p=c.length;c.forEach(function(q,u){if(q._id&&wt(q._id))h[q._deleted?"_removeLocal":"_putLocal"](q,{ctx:m},function(y,A){n[u]=y||A;++l===p&&k&&k()});else{var w=q.metadata.id;e.has(w)?(p--,e.get(w).push([q,u])):e.set(w,[[q,u]])}});e.forEach(function(q,u){function w(){++A<q.length?y():++l===p&&k&&
k()}function y(){var C=q[A],E=C[0];C=C[1];if(f.has(u)){var L=g,I=f.get(u);b:{var V=E.metadata.rev;var T=I.rev_tree.slice();var Y=V.split("-");V=parseInt(Y[0],10);Y=Y[1];for(var na;na=T.pop();){if(na.pos===V&&na.ids[0]===Y){T=!0;break b}for(var Ba=na.ids[2],F=0,W=Ba.length;F<W;F++)T.push({pos:na.pos+1,ids:Ba[F]})}T=!1}T&&!b?(n[C]=E,w()):(Y=I.winningRev||ut(I),T="deleted"in I?I.deleted:cq(I,Y),V="deleted"in E.metadata?E.metadata.deleted:cq(E.metadata),na=/^1-/.test(E.metadata.rev),T&&!V&&b&&na&&(na=
E.data,na._rev=Y,na._id=E.metadata.id,E=wV(na,b)),Y=kV(I.rev_tree,E.metadata.rev_tree[0],L),b&&(T&&V&&"new_leaf"!==Y.conflicts||!T&&"new_leaf"!==Y.conflicts||T&&!V&&"new_branch"===Y.conflicts)?(E=ch(pw),n[C]=E,w()):(L=E.metadata.rev,E.metadata.rev_tree=Y.tree,E.stemmedRevs=Y.stemmedRevs||[],I.rev_map&&(E.metadata.rev_map=I.rev_map),I=ut(E.metadata),V=cq(E.metadata,I),T=T===V?0:T<V?-1:1,L=L===I?V:cq(E.metadata,L),a(E,I,V,L,!0,T,C,w)))}else I=kV([],E.metadata.rev_tree[0],g),E.metadata.rev_tree=I.tree,
E.stemmedRevs=I.stemmedRevs||[],I=ut(E.metadata),L=cq(E.metadata,I),"was_delete"in d&&L?(n[C]=ch(Vn,"deleted"),w()):b&&"missing"===E.metadata.rev_tree[0].ids[1].status?(E=ch(pw),n[C]=E,w()):a(E,I,L,L,!1,L?0:1,C,w)}var A=0;y()})}function To(g){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);g(ch(qL,h,c.type))}}function rL(g,c,h){try{var f=JSON.stringify(g)}catch(m){f=zV.stringify(g)}return{data:f,winningRev:c,deletedOrLocal:h?"1":"0",
seq:g.seq,id:g.id}}function zt(g){if(!g)return null;var c=g.data;try{var h=JSON.parse(c)}catch(f){h=zV.parse(c)}h.winningRev=g.winningRev;h.deleted="1"===g.deletedOrLocal;h.seq=g.seq;return h}function $D(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}function AV(g,c,h,f){h?g?"string"!==typeof g?f(g):f(iL(g,c)):f(gL([""],{type:c})):g?"string"!==typeof g?cV(g,function(m){f(btoa(m))}):f(g):
f("")}function BV(g,c,h,f){function m(d,k){var b=d._attachments[k];d=b.digest;h.objectStore("attach-store").get(d).onsuccess=function(e){b.body=e.target.result.body;++a===n.length&&f&&f()}}var n=Object.keys(g._attachments||{});if(!n.length)return f&&f();var a=0;n.forEach(function(d){c.attachments&&c.include_docs?m(g,d):(g._attachments[d].stub=!0,++a===n.length&&f&&f())})}function sL(g,c){return Promise.all(g.map(function(h){if(h.doc&&h.doc._attachments){var f=Object.keys(h.doc._attachments);return Promise.all(f.map(function(m){var n=
h.doc._attachments[m];if("body"in n){var a=n.body,d=n.content_type;return new Promise(function(k){AV(a,d,c,function(b){h.doc._attachments[m]=qw(az(n,["digest","content_type"]),{data:b});k()})})}}))}}))}function CV(g,c,h){function f(){m.length&&m.forEach(function(b){d.index("digestSeq").count(IDBKeyRange.bound(b+"::",b+"::\uffff",!1,!1)).onsuccess=function(e){e.target.result||a.delete(b)}})}var m=[],n=h.objectStore("by-sequence"),a=h.objectStore("attach-store"),d=h.objectStore("attach-seq-store"),
k=g.length;g.forEach(function(b){n.index("_doc_id_rev").getKey(c+"::"+b).onsuccess=function(e){e=e.target.result;"number"!==typeof e?(k--,k||f()):(n.delete(e),d.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(l){if(l=l.target.result){var p=l.value.digestSeq.split("::")[0];m.push(p);d.delete(l.primaryKey);l.continue()}else k--,k||f()})}})}function Wn(g,c,h){try{return{txn:g.transaction(c,h)}}catch(f){return{error:f}}}function l9(g,c,h,f,m,n){function a(){var lb=Wn(m,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),
"readwrite");if(lb.error)return n(lb.error);L=lb.txn;L.onabort=To(n);L.ontimeout=To(n);L.oncomplete=l;I=L.objectStore("document-store");V=L.objectStore("by-sequence");T=L.objectStore("attach-store");Y=L.objectStore("attach-seq-store");na=L.objectStore("meta-store");na.get("meta-store").onsuccess=function(qa){F=qa.target.result;b()};q(function(qa){if(qa)return Va=!0,n(qa);e()})}function d(){S=!0;b()}function k(){k9(g.revs_limit,E,f,oa,L,aa,u,h,d)}function b(){F&&S&&(F.docCount+=fa,na.put(F))}function e(){function lb(zb){(zb=
zt(zb.target.result))&&oa.set(zb.id,zb);++qa===E.length&&k()}if(E.length)for(var qa=0,ja=0,ta=E.length;ja<ta;ja++){var Ha=E[ja];Ha._id&&wt(Ha._id)?++qa===E.length&&k():I.get(Ha.metadata.id).onsuccess=lb}}function l(){Va||(gz.notify(f._meta.name),n(null,aa))}function p(lb,qa){T.get(lb).onsuccess=function(ja){ja.target.result?qa():(ja=ch(m9,"unknown stub attachment with digest "+lb),ja.status=412,qa(ja))}}function q(lb){var qa=[];E.forEach(function(Ha){Ha.data&&Ha.data._attachments&&Object.keys(Ha.data._attachments).forEach(function(zb){zb=
Ha.data._attachments[zb];zb.stub&&qa.push(zb.digest)})});if(!qa.length)return lb();var ja=0,ta;qa.forEach(function(Ha){p(Ha,function(zb){zb&&!ta&&(ta=zb);++ja===qa.length&&lb(ta)})})}function u(lb,qa,ja,ta,Ha,zb,Ub,Nb){lb.metadata.winningRev=qa;lb.metadata.deleted=ja;var Sb=lb.data;Sb._id=lb.metadata.id;Sb._rev=lb.metadata.rev;ta&&(Sb._deleted=!0);if(Sb._attachments&&Object.keys(Sb._attachments).length)return y(lb,qa,ja,Ha,Ub,Nb);fa+=zb;b();w(lb,qa,ja,Ha,Ub,Nb)}function w(lb,qa,ja,ta,Ha,zb){function Ub(Lc){var dd=
lb.stemmedRevs||[];ta&&f.auto_compaction&&(dd=dd.concat(G8(lb.metadata)));dd&&dd.length&&CV(dd,lb.metadata.id,L);pc.seq=Lc.target.result;Lc=rL(pc,qa,ja);I.put(Lc).onsuccess=Nb}function Nb(){aa[Ha]={ok:!0,id:pc.id,rev:pc.rev};oa.set(lb.metadata.id,lb.metadata);A(lb,pc.seq,zb)}var Sb=lb.data,pc=lb.metadata;Sb._doc_id_rev=pc.id+"::"+pc.rev;delete Sb._id;delete Sb._rev;var Eb=V.put(Sb);Eb.onsuccess=Ub;Eb.onerror=function(Lc){Lc.preventDefault();Lc.stopPropagation();V.index("_doc_id_rev").getKey(Sb._doc_id_rev).onsuccess=
function(dd){V.put(Sb,dd.target.result).onsuccess=Ub}}}function y(lb,qa,ja,ta,Ha,zb){function Ub(){Sb===pc.length&&w(lb,qa,ja,ta,Ha,zb)}function Nb(){Sb++;Ub()}var Sb=0,pc=Object.keys(lb.data._attachments);pc.forEach(function(Eb){Eb=lb.data._attachments[Eb];if(Eb.stub)Sb++,Ub();else{var Lc=Eb.data;delete Eb.data;Eb.revpos=parseInt(qa,10);C(Eb.digest,Lc,Nb)}})}function A(lb,qa,ja){function ta(){++zb===Ub.length&&ja()}function Ha(Sb){Sb=Y.put({seq:qa,digestSeq:lb.data._attachments[Sb].digest+"::"+qa});
Sb.onsuccess=ta;Sb.onerror=function(pc){pc.preventDefault();pc.stopPropagation();ta()}}var zb=0,Ub=Object.keys(lb.data._attachments||{});if(!Ub.length)return ja();for(var Nb=0;Nb<Ub.length;Nb++)Ha(Ub[Nb])}function C(lb,qa,ja){T.count(lb).onsuccess=function(ta){if(ta.target.result)return ja();T.put({digest:lb,body:qa}).onsuccess=ja}}var E=c.docs,L,I,V,T,Y,na,Ba,F;c=0;for(var W=E.length;c<W;c++){var P=E[c];P._id&&wt(P._id)||(P=E[c]=wV(P,h.new_edits,g),P.error&&!Ba&&(Ba=P))}if(Ba)return n(Ba);var S=
!1,fa=0,aa=Array(E.length),oa=new tm,Va=!1;j9(E,f._meta.blobSupport?"blob":"base64",function(lb){if(lb)return n(lb);a()})}function DV(g,c,h,f,m){function n(p){e=p.target.result;b&&m(b,e,l)}function a(p){b=p.target.result;e&&m(b,e,l)}function d(){if(!b.length)return m();var p=b[b.length-1];if(c&&c.upper)try{var q=IDBKeyRange.bound(p,c.upper,!0,c.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return m()}else q=IDBKeyRange.lowerBound(p,!0);c=q;e=b=null;g.getAll(c,f).onsuccess=n;g.getAllKeys(c,
f).onsuccess=a}function k(p){p=p.target.result;if(!p)return m();m([p.key],[p.value],p)}-1===f&&(f=1E3);var b,e;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<f&&!h){var l={"continue":d};g.getAll(c,f).onsuccess=n;g.getAllKeys(c,f).onsuccess=a}else h?g.openCursor(c,"prev").onsuccess=k:g.openCursor(c).onsuccess=k}function n9(g,c,h){if("function"===typeof g.getAll)g.getAll(c).onsuccess=h;else{var f=[];g.openCursor(c).onsuccess=function(m){(m=m.target.result)?(f.push(m.value),m.continue()):
h({target:{result:f}})}}}function o9(g,c,h){var f=Array(g.length),m=0;g.forEach(function(n,a){c.get(n).onsuccess=function(d){f[a]=d.target.result?d.target.result:{key:n,error:"not_found"};m++;m===g.length&&h(g,f,{})}})}function p9(g,c,h,f,m){try{if(g&&c)return m?IDBKeyRange.bound(c,g,!h,!1):IDBKeyRange.bound(g,c,!1,!h);if(g)return m?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return m?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(f)return IDBKeyRange.only(f)}catch(n){return{error:n}}return null}
function q9(g,c,h){function f(T,Y){T.openCursor(null,"prev").onsuccess=function(na){na=na.target.result;var Ba=void 0;na&&na.key&&(Ba=na.key);return Y({target:{result:[Ba]}})}}function m(T,Y,na){E.get(T.id+"::"+na).onsuccess=function(Ba){Y.doc=$D(Ba.target.result)||{};g.conflicts&&(Ba=mL(T),Ba.length&&(Y.doc._conflicts=Ba));BV(Y.doc,g,C)}}function n(T){for(var Y=0,na=T.length;Y<na&&L.length!==u;Y++){var Ba=T[Y];if(Ba.error&&p)L.push(Ba);else{var F=zt(Ba);Ba=F.winningRev;var W={id:F.id,key:F.id,value:{rev:Ba}};
F.deleted?p&&(L.push(W),W.value.deleted=!0,W.doc=null):0>=q--&&(L.push(W),g.include_docs&&m(F,W,Ba))}}}function a(T,Y,na){na&&(n(Y),L.length<u&&na.continue())}function d(T){T=T.target.result;g.descending&&(T=T.reverse());n(T)}function k(){var T={total_rows:I,offset:g.skip,rows:L};g.update_seq&&void 0!==V&&(T.update_seq=V);h(null,T)}var b="startkey"in g?g.startkey:!1,e="endkey"in g?g.endkey:!1,l="key"in g?g.key:!1,p="keys"in g?g.keys:!1,q=g.skip||0,u="number"===typeof g.limit?g.limit:-1,w=!1!==g.inclusive_end,
y,A;if(!p&&(A=(y=p9(b,e,w,l,g.descending))&&y.error)&&("DataError"!==A.name||0!==A.code))return h(ch(qL,A.name,A.message));b=["document-store","by-sequence","meta-store"];g.attachments&&b.push("attach-store");c=Wn(c,b,"readonly");if(c.error)return h(c.error);var C=c.txn;C.oncomplete=function(){g.attachments?sL(L,g.binary).then(k):k()};C.onabort=To(h);c=C.objectStore("document-store");b=C.objectStore("by-sequence");e=C.objectStore("meta-store");var E=b.index("_doc_id_rev"),L=[],I,V;e.get("meta-store").onsuccess=
function(T){I=T.target.result.docCount};g.update_seq&&f(b,function(T){T.target.result&&0<T.target.result.length&&(V=T.target.result[0])});if(!A&&0!==u){if(p)return o9(g.keys,c,a);if(-1===u)return n9(c,y,d);DV(c,y,g.descending,u+q,a)}}function r9(g){return(new Promise(function(c){var h=gL([""]);h=g.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);c(m||!f||43<=parseInt(f[1],10))};h.onerror=g.onabort=
function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function s9(g,c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function t9(g,c,h,f){try{g(c,h)}catch(m){f.emit("error",m)}}function EV(){!tL&&uL.length&&(tL=!0,uL.shift()())}function u9(g,c,h){uL.push(function(){g(function(f,m){t9(c,f,m,h);tL=!1;So(function(){EV()})})});EV()}function v9(g,c,h,f){function m(C,E,L,I){if(L.seq!==E)return I();
if(L.winningRev===C._rev)return I(L,C);A.get(C._id+"::"+L.winningRev).onsuccess=function(V){I(L,$D(V.target.result))}}function n(C,E,L){if(k&&!k.has(C._id))return L();var I=u.get(C._id);if(I)return m(C,E,I,L);y.get(C._id).onsuccess=function(V){I=zt(V.target.result);u.set(C._id,I);m(C,E,I,L)}}function a(){g.complete(null,{results:l,last_seq:b})}g=bk(g);if(g.continuous){var d=h+":"+ZD();gz.addListener(h,d,c,g);gz.notify(h);return{cancel:function(){gz.removeListener(h,d)}}}var k=g.doc_ids&&new hz(g.doc_ids);
g.since=g.since||0;var b=g.since,e="limit"in g?g.limit:-1;0===e&&(e=1);var l=[],p=0,q=dL(g),u=new tm;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");f=Wn(f,c,"readonly");if(f.error)return g.complete(f.error);var w=f.txn;w.onabort=To(g.complete);w.oncomplete=function(){!g.continuous&&g.attachments?sL(l).then(a):a()};f=w.objectStore("by-sequence");var y=w.objectStore("document-store");var A=f.index("_doc_id_rev");c=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;
DV(f,c,g.descending,e,function(C,E,L){function I(Ba,F){var W=g.processChange(F,Ba,g);b=W.seq=Ba.seq;Ba=q(W);if("object"===typeof Ba)return Promise.reject(Ba);if(!Ba)return Promise.resolve();p++;g.return_docs&&l.push(W);return g.attachments&&g.include_docs?new Promise(function(P){BV(F,g,w,function(){sL([W],g.binary).then(function(){P(W)})})}):Promise.resolve(W)}function V(){for(var Ba=[],F=0,W=T.length;F<W&&p!==e;F++){var P=T[F];P&&Ba.push(I(Y[F],P))}Promise.all(Ba).then(function(S){for(var fa=0,aa=
S.length;fa<aa;fa++)if(S[fa])g.onChange(S[fa])}).catch(g.complete);p!==e&&L.continue()}if(L&&C.length){var T=Array(C.length),Y=Array(C.length),na=0;E.forEach(function(Ba,F){Ba=$D(Ba);n(Ba,C[F],function(W,P){Y[F]=W;T[F]=P;++na===C.length&&V()})})}})}function FV(g,c){var h=this;u9(function(f){w9(h,g,f)},c,h.constructor)}function w9(g,c,h){function f(p){var q=p.createObjectStore("document-store",{keyPath:"id"});p.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",
{unique:!0});p.createObjectStore("attach-store",{keyPath:"digest"});p.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});p.createObjectStore("detect-blob-support");q.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});p.createObjectStore("local-store",{keyPath:"_id"});p=p.createObjectStore("attach-seq-store",{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",{unique:!0})}function m(p,q){var u=p.objectStore("document-store");u.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(w){if(w=w.target.result){var y=w.value,A=cq(y);y.deletedOrLocal=A?"1":"0";u.put(y);w.continue()}else q()}}function n(p,q){var u=p.objectStore("local-store"),w=p.objectStore("document-store"),y=p.objectStore("by-sequence");w.openCursor().onsuccess=function(A){var C=A.target.result;if(C){var E=C.value;A=E.id;var L=wt(A);E=ut(E);if(L){var I=A+"::"+E;L=A+"::";E=A+"::~";A=y.index("_doc_id_rev");L=IDBKeyRange.bound(L,E,!1,!1);var V=A.openCursor(L);
V.onsuccess=function(T){(V=T.target.result)?(T=V.value,T._doc_id_rev===I&&u.put(T),y.delete(V.primaryKey),V.continue()):(w.delete(C.primaryKey),C.continue())}}else C.continue()}else q&&q()}}function a(p){p=p.createObjectStore("attach-seq-store",{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",{unique:!0})}function d(p,q){var u=p.objectStore("by-sequence"),w=p.objectStore("attach-store"),y=p.objectStore("attach-seq-store");w.count().onsuccess=function(A){if(!A.target.result)return q();
u.openCursor().onsuccess=function(C){C=C.target.result;if(!C)return q();for(var E=C.value,L=C.primaryKey,I=Object.keys(E._attachments||{}),V={},T=0;T<I.length;T++)V[E._attachments[I[T]].digest]=!0;E=Object.keys(V);for(T=0;T<E.length;T++)y.put({seq:L,digestSeq:E[T]+"::"+L});C.continue()}}}function k(p){function q(y){return y.data?zt(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=p.objectStore("by-sequence"),w=p.objectStore("document-store");w.openCursor().onsuccess=function(y){function A(){var L=rL(E,
E.winningRev,E.deleted);w.put(L).onsuccess=function(){C.continue()}}var C=y.target.result;if(C){var E=q(C.value);E.winningRev=E.winningRev||ut(E);if(E.seq)return A();(function(){var L=E.id+"::",I=E.id+"::\uffff",V=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(L,I)).onsuccess=function(T){T=T.target.result;if(!T)return E.seq=V,A();var Y=T.primaryKey;Y>V&&(V=Y);T.continue()}})()}}}var b=c.name,e=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=UU(function(p){p(null,g._meta.instanceId)});
g._bulkDocs=function(p,q,u){l9(c,p,q,g,e,u)};g._get=function(p,q,u){function w(){u(C,{doc:y,metadata:A,ctx:E})}var y,A,C,E=q.ctx;if(!E){var L=Wn(e,["document-store","by-sequence","attach-store"],"readonly");if(L.error)return u(L.error);E=L.txn}E.objectStore("document-store").get(p).onsuccess=function(I){A=zt(I.target.result);if(!A)return C=ch(Vn,"missing"),w();if(q.rev)var V=q.latest?L8(q.rev,A):q.rev;else if(V=A.winningRev,cq(A))return C=ch(Vn,"deleted"),w();I=E.objectStore("by-sequence");V=A.id+
"::"+V;I.index("_doc_id_rev").get(V).onsuccess=function(T){(y=T.target.result)&&(y=$D(y));if(!y)return C=ch(Vn,"missing"),w();w()}}};g._getAttachment=function(p,q,u,w,y){if(w.ctx)p=w.ctx;else{p=Wn(e,["document-store","by-sequence","attach-store"],"readonly");if(p.error)return y(p.error);p=p.txn}q=u.digest;var A=u.content_type;p.objectStore("attach-store").get(q).onsuccess=function(C){AV(C.target.result.body,A,w.binary,function(E){y(null,E)})}};g._info=function(p){var q,u,w=Wn(e,["meta-store","by-sequence"],
"readonly");if(w.error)return p(w.error);w=w.txn;w.objectStore("meta-store").get("meta-store").onsuccess=function(y){u=y.target.result.docCount};w.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){q=(y=y.target.result)?y.key:0};w.oncomplete=function(){p(null,{doc_count:u,update_seq:q,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(p,q){q9(p,e,q)};g._changes=function(p){return v9(p,g,b,e)};g._close=function(p){e.close();rw.delete(b);p()};g._getRevisionTree=
function(p,q){var u=Wn(e,["document-store"],"readonly");if(u.error)return q(u.error);u.txn.objectStore("document-store").get(p).onsuccess=function(w){(w=zt(w.target.result))?q(null,w.rev_tree):q(ch(Vn))}};g._doCompaction=function(p,q,u){var w=Wn(e,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(w.error)return u(w.error);var y=w.txn;y.objectStore("document-store").get(p).onsuccess=function(A){A=zt(A.target.result);vt(A.rev_tree,function(L,I,V,T,Y){-1!==q.indexOf(I+
"-"+V)&&(Y.status="missing")});CV(q,p,y);var C=A.winningRev,E=A.deleted;y.objectStore("document-store").put(rL(A,C,E))};y.onabort=To(u);y.oncomplete=function(){u()}};g._getLocal=function(p,q){var u=Wn(e,["local-store"],"readonly");if(u.error)return q(u.error);p=u.txn.objectStore("local-store").get(p);p.onerror=To(q);p.onsuccess=function(w){(w=w.target.result)?(delete w._doc_id_rev,q(null,w)):q(ch(Vn))}};g._putLocal=function(p,q,u){"function"===typeof q&&(u=q,q={});delete p._revisions;var w=p._rev,
y=p._id;p._rev=w?"0-"+(parseInt(w.split("-")[1],10)+1):"0-1";var A=q.ctx,C;if(!A){A=Wn(e,["local-store"],"readwrite");if(A.error)return u(A.error);A=A.txn;A.onerror=To(u);A.oncomplete=function(){C&&u(null,C)}}var E=A.objectStore("local-store");w?(y=E.get(y),y.onsuccess=function(L){(L=L.target.result)&&L._rev===w?E.put(p).onsuccess=function(){C={ok:!0,id:p._id,rev:p._rev};q.ctx&&u(null,C)}:u(ch(pw))}):(y=E.add(p),y.onerror=function(L){u(ch(pw));L.preventDefault();L.stopPropagation()},y.onsuccess=function(){C=
{ok:!0,id:p._id,rev:p._rev};q.ctx&&u(null,C)})};g._removeLocal=function(p,q,u){"function"===typeof q&&(u=q,q={});var w=q.ctx;if(!w){w=Wn(e,["local-store"],"readwrite");if(w.error)return u(w.error);w=w.txn;w.oncomplete=function(){y&&u(null,y)}}var y,A=p._id,C=w.objectStore("local-store");w=C.get(A);w.onerror=To(u);w.onsuccess=function(E){(E=E.target.result)&&E._rev===p._rev?(C.delete(A),y={ok:!0,id:A,rev:"0-0"},q.ctx&&u(null,y)):u(ch(Vn))}};g._destroy=function(p,q){gz.removeAllListeners(b);(p=vL.get(b))&&
p.result&&(p.result.close(),rw.delete(b));p=indexedDB.deleteDatabase(b);p.onsuccess=function(){vL.delete(b);bz&&b in localStorage&&delete localStorage[b];q(null,{ok:!0})};p.onerror=To(q)};var l=rw.get(b);if(l)return e=l.idb,g._meta=l.global,So(function(){h(null,g)});l=indexedDB.open(b,5);vL.set(b,l);l.onupgradeneeded=function(p){function q(){var C=y[A-1];A++;C&&C(w,q)}var u=p.target.result;if(1>p.oldVersion)return f(u);var w=p.currentTarget.transaction;3>p.oldVersion&&u.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>p.oldVersion&&a(u);var y=[m,n,d,k],A=p.oldVersion;q()};l.onsuccess=function(p){function q(){"undefined"!==typeof E&&y&&(g._meta={name:b,instanceId:L,blobSupport:E},rw.set(b,{idb:e,global:g._meta}),h(null,g))}function u(){if("undefined"!==typeof C&&"undefined"!==typeof A){var I=b+"_id";I in A?L=A[I]:A[I]=L=ZD();A.docCount=C;w.objectStore("meta-store").put(A)}}e=p.target.result;e.onversionchange=function(){e.close();rw.delete(b)};
e.onabort=function(I){Ym("error","Database has a global failure",I.target.error);e.close();rw.delete(b)};var w=e.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),y=!1,A,C,E,L;w.objectStore("meta-store").get("meta-store").onsuccess=function(I){A=I.target.result||{id:"meta-store"};u()};s9(w,function(I){C=I;u()});wL||(wL=r9(w));wL.then(function(I){E=I;q()});w.oncomplete=function(){y=!0;q()};w.onabort=To(h)};l.onerror=function(p){(p=p.target.error&&p.target.error.message)?
-1!==p.indexOf("stored database is a higher version")&&(p=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):p="Failed to open indexedDB, are you in private browsing mode?";Ym("error",p);h(ch(qL,p))}}function x9(g,c){return new Promise(function(h,f){function m(){k++;g[b++]().then(a,d)}function n(){if(++e===l)p?f(p):h();else for(;k<c&&b<l;)m()}function a(){k--;n()}function d(q){k--;p=p||q;n()}for(var k=0,b=0,e=0,l=g.length,p;k<
c&&b<l;)m()})}function xL(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=iL(h.data,h.content_type)})}function At(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function GV(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(c){var h=g._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(f){jL(h.data,
f)})).then(function(f){h.data=f})})):Promise.resolve()}function y9(g,c){if(c.prefix){var h=aV(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=aV(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=g.join("/");return c}function ck(g,c){return aE(g,g.db+"/"+c)}function aE(g,
c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function bE(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function z9(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),f=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(h||f||c)&&g}function yL(g,c){function h(l,p){return Kj(l,lw(function(q){m().then(function(){return p.apply(this,
q)}).catch(function(u){q.pop()(u)})})).bind(a)}function f(l,p,q){var u={};p=p||{};p.headers=p.headers||new sw;p.headers.get("Content-Type")||p.headers.set("Content-Type","application/json");p.headers.get("Accept")||p.headers.set("Accept","application/json");return b(l,p).then(function(w){u.ok=w.ok;u.status=w.status;return w.json()}).then(function(w){u.data=w;if(!u.ok){u.data.status=u.status;w=nw(u.data);if(q)return q(w);throw w;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||
y.missing?nw(y):y}));if(q)q(null,u.data);else return u})}function m(){if(g.skip_setup)return Promise.resolve();if(e)return e;e=f(k).catch(function(l){return l&&l.status&&404===l.status?(cL(404,"PouchDB is just detecting if the remote exists."),f(k,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&l.status&&412===l.status?!0:Promise.reject(l)});e.catch(function(){e=null});return e}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var a=this,d=y9(g.name,g),k=ck(d,"");
g=bk(g);var b=function(l,p){p=p||{};p.headers=p.headers||new sw;p.credentials="include";if(g.auth||d.auth){var q=g.auth||d.auth;q=btoa(unescape(encodeURIComponent(q.username+":"+q.password)));p.headers.set("Authorization","Basic "+q)}var u=g.headers||{};Object.keys(u).forEach(function(w){p.headers.append(w,u[w])});z9(p)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||HV)(l,p)},e;So(function(){c(null,a)});a._remote=!0;a.type=function(){return"http"};a.id=h("id",function(l){b(aE(d,
"")).then(function(p){return p.json()}).catch(function(){return{}}).then(function(p){p=p&&p.uuid?p.uuid+d.db:ck(d,"");l(null,p)})});a.compact=h("compact",function(l,p){"function"===typeof l&&(p=l,l={});l=bk(l);f(ck(d,"_compact"),{method:"POST"}).then(function(){function q(){a.info(function(u,w){w&&!w.compact_running?p(null,{ok:!0}):setTimeout(q,l.interval||200)})}q()})});a.bulkGet=Kj("bulkGet",function(l,p){function q(C){var E={};l.revs&&(E.revs=!0);l.attachments&&(E.attachments=!0);l.latest&&(E.latest=
!0);f(ck(d,"_bulk_get"+bE(E)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(L){l.attachments&&l.binary&&L.data.results.forEach(function(I){I.docs.forEach(xL)});C(null,L.data)}).catch(C)}function u(){function C(Y){return function(na,Ba){I[Y]=Ba.results;++L===E&&p(null,{results:WD(I)})}}for(var E=Math.ceil(l.docs.length/50),L=0,I=Array(E),V=0;V<E;V++){var T=az(l,["revs","attachments","binary","latest"]);T.docs=l.docs.slice(50*V,Math.min(l.docs.length,50*(V+1)));WU(w,T,C(V))}}var w=
this,y=aE(d,""),A=zL[y];"boolean"!==typeof A?q(function(C,E){C?(zL[y]=!1,cL(C.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(zL[y]=!0,p(null,E))}):A?q(p):u()});a._info=function(l){m().then(function(){return b(ck(d,""))}).then(function(p){return p.json()}).then(function(p){p.host=ck(d,"");l(null,p)}).catch(l)};a.fetch=function(l,p){return m().then(function(){var q="/"===l.substring(0,1)?aE(d,l.substring(1)):ck(d,l);return b(q,p)})};a.get=h("get",function(l,p,q){function u(A){function C(I){var V=
E[I];I=At(A._id)+"/"+n(I)+"?rev="+A._rev;return b(ck(d,I)).then(function(T){return"buffer"in T?T.buffer():T.blob()}).then(function(T){if(p.binary){var Y=Object.getOwnPropertyDescriptor(T.__proto__,"type");if(!Y||Y.set)T.type=V.content_type;return T}return new Promise(function(na){jL(T,na)})}).then(function(T){delete V.stub;delete V.length;V.data=T})}var E=A._attachments,L=E&&Object.keys(E);if(E&&L.length)return L=L.map(function(I){return function(){return C(I)}}),x9(L,5)}function w(A){return Array.isArray(A)?
Promise.all(A.map(function(C){if(C.ok)return u(C.ok)})):u(A)}"function"===typeof p&&(q=p,p={});p=bk(p);var y={};p.revs&&(y.revs=!0);p.revs_info&&(y.revs_info=!0);p.latest&&(y.latest=!0);p.open_revs&&("all"!==p.open_revs&&(p.open_revs=JSON.stringify(p.open_revs)),y.open_revs=p.open_revs);p.rev&&(y.rev=p.rev);p.conflicts&&(y.conflicts=p.conflicts);p.update_seq&&(y.update_seq=p.update_seq);l=At(l);y=ck(d,l+bE(y));f(y).then(function(A){return Promise.resolve().then(function(){if(p.attachments)return w(A.data)}).then(function(){q(null,
A.data)})}).catch(function(A){A.docId=l;q(A)})});a.remove=h("remove",function(l,p,q,u){"string"===typeof p?(l={_id:l,_rev:p},"function"===typeof q&&(u=q,q={})):"function"===typeof p?(u=p,q={}):(u=q,q=p);p=l._rev||q.rev;p=ck(d,At(l._id))+"?rev="+p;f(p,{method:"DELETE"},u).catch(u)});a.getAttachment=h("getAttachment",function(l,p,q,u){"function"===typeof q&&(u=q,q={});q=q.rev?"?rev="+q.rev:"";l=ck(d,At(l))+"/"+n(p)+q;var w;b(l,{method:"GET"}).then(function(y){w=y.headers.get("content-type");if(y.ok)return"undefined"===
typeof cE||cE.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===typeof cE||cE.browser||(y.type=w);u(null,y)}).catch(function(y){u(y)})});a.removeAttachment=h("removeAttachment",function(l,p,q,u){l=ck(d,At(l)+"/"+n(p))+"?rev="+q;f(l,{method:"DELETE"},u).catch(u)});a.putAttachment=h("putAttachment",function(l,p,q,u,w,y){"function"===typeof w&&(y=w,w=u,u=q,q=null);l=At(l)+"/"+n(p);l=ck(d,l);q&&(l+="?rev="+q);if("string"===typeof u){try{var A=atob(u)}catch(C){return y(ch(yV,
"Attachment is not a valid base64 string"))}u=A?hL(A,w):""}f(l,{headers:new sw({"Content-Type":w}),method:"PUT",body:u},y).catch(y)});a._bulkDocs=function(l,p,q){l.new_edits=p.new_edits;m().then(function(){return Promise.all(l.docs.map(GV))}).then(function(){return f(ck(d,"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},q)}).catch(q)};a._put=function(l,p,q){m().then(function(){return GV(l)}).then(function(){return f(ck(d,At(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(u){q(null,
u.data)}).catch(function(u){u.docId=l&&l._id;q(u)})};a.allDocs=h("allDocs",function(l,p){"function"===typeof l&&(p=l,l={});l=bk(l);var q={},u="GET";l.conflicts&&(q.conflicts=!0);l.update_seq&&(q.update_seq=!0);l.descending&&(q.descending=!0);l.include_docs&&(q.include_docs=!0);l.attachments&&(q.attachments=!0);l.key&&(q.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(q.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(q.endkey=JSON.stringify(l.endkey));
"undefined"!==typeof l.inclusive_end&&(q.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(q.limit=l.limit);"undefined"!==typeof l.skip&&(q.skip=l.skip);q=bE(q);if("undefined"!==typeof l.keys){u="POST";var w={keys:l.keys}}f(ck(d,"_all_docs"+q),{method:u,body:JSON.stringify(w)}).then(function(y){l.include_docs&&l.attachments&&l.binary&&y.data.rows.forEach(xL);p(null,y.data)}).catch(p)});a._changes=function(l){var p="batch_size"in l?l.batch_size:25;l=bk(l);!l.continuous||"heartbeat"in
l||(l.heartbeat=1E4);var q="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>q-l.timeout&&(q=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>q-l.heartbeat&&(q=l.heartbeat+5E3);var u={};"timeout"in l&&l.timeout&&(u.timeout=l.timeout);var w="undefined"!==typeof l.limit?l.limit:!1,y=w;l.style&&(u.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)u.include_docs=!0;l.attachments&&(u.attachments=!0);l.continuous&&(u.feed="longpoll");l.seq_interval&&(u.seq_interval=l.seq_interval);
l.conflicts&&(u.conflicts=!0);l.descending&&(u.descending=!0);l.update_seq&&(u.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(u.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(u.filter=l.filter);l.view&&"string"===typeof l.view&&(u.filter="_view",u.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var A in l.query_params)l.query_params.hasOwnProperty(A)&&(u[A]=l.query_params[A]);var C="GET";if(l.doc_ids){u.filter="_doc_ids";C="POST";var E={doc_ids:l.doc_ids}}else l.selector&&
(u.filter="_selector",C="POST",E={selector:l.selector});var L=new A9,I,V=function(na,Ba){if(!l.aborted){u.since=na;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));l.descending?w&&(u.limit=y):u.limit=!w||y>p?p:y;var F=ck(d,"_changes"+bE(u)),W={signal:L.signal,method:C,body:JSON.stringify(E)};I=na;l.aborted||m().then(function(){return f(F,W,Ba)}).catch(Ba)}},T={results:[]},Y=function(na,Ba){if(!l.aborted){var F=0;if(Ba&&Ba.results){F=Ba.results.length;T.last_seq=Ba.last_seq;var W=null,
P=null;"number"===typeof Ba.pending&&(W=Ba.pending);if("string"===typeof T.last_seq||"number"===typeof T.last_seq)P=T.last_seq;Ba.results=Ba.results.filter(function(S){y--;var fa=dL(l)(S);fa&&(l.include_docs&&l.attachments&&l.binary&&xL(S),l.return_docs&&T.results.push(S),l.onChange(S,W,P));return fa})}else if(na){l.aborted=!0;l.complete(na);return}Ba&&Ba.last_seq&&(I=Ba.last_seq);na=w&&0>=y||Ba&&F<p||l.descending;(!l.continuous||w&&0>=y)&&na?l.complete(null,T):So(function(){V(I,Y)})}};V(l.since||
0,Y);return{cancel:function(){l.aborted=!0;L.abort()}}};a.revsDiff=h("revsDiff",function(l,p,q){"function"===typeof p&&(q=p);f(ck(d,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},q).catch(q)});a._close=function(l){l()};a._destroy=function(l,p){f(ck(d,""),{method:"DELETE"}).then(function(q){p(null,q)}).catch(function(q){404===q.status?p(null,{ok:!0}):p(q)})}}function Bt(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,Bt)}catch(c){}}
function dE(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,dE)}catch(c){}}function eE(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,eE)}catch(c){}}function IV(g,c){c&&g.then(function(h){So(function(){c(null,h)})},function(h){So(function(){c(h)})});return g}function B9(g){return lw(function(c){var h=c.pop();c=g.apply(this,c);"function"===typeof h&&IV(c,h);return c})}function C9(g,c){return g.then(function(h){return c().then(function(){return h})},
function(h){return c().then(function(){throw h;})})}function AL(g,c){return function(){var h=arguments,f=this;return g.add(function(){return c.apply(f,h)})}}function JV(g){g=new hz(g);var c=Array(g.size),h=-1;g.forEach(function(f){c[++h]=f});return c}function BL(g){var c=Array(g.size),h=-1;g.forEach(function(f,m){c[++h]=m});return c}function KV(g){return new eE("builtin "+g+" function requires map values to be numbers or number arrays")}function CL(g){for(var c=0,h=0,f=g.length;h<f;h++){var m=g[h];
if("number"!==typeof m)if(Array.isArray(m)){c="number"===typeof c?[c]:c;for(var n=0,a=m.length;n<a;n++){var d=m[n];if("number"!==typeof d)throw KV("_sum");"undefined"===typeof c[n]?c.push(d):c[n]+=d}}else throw KV("_sum");else"number"===typeof c?c+=m:c[0]+=m}return c}function LV(g,c){return fL("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:CL,log:D9,isArray:E9,toJSON:F9})}function iz(){this.promise=new Promise(function(g){g()})}function MV(g){if(!g)return"undefined";switch(typeof g){case "function":return g.toString();
case "string":return g.toString();default:return JSON.stringify(g)}}function G9(g,c){return MV(g)+MV(c)+"undefined"}function NV(g,c,h,f,m,n){var a=G9(h,f);if(!m){var d=g._cachedViews=g._cachedViews||{};if(d[a])return d[a]}var k=g.info().then(function(b){var e=b.db_name+"-mrview-"+(m?"temp":YD.hash(a));return XD(g,"_local/"+n,function(l){l.views=l.views||{};var p=c;-1===p.indexOf("/")&&(p=c+"/"+c);p=l.views[p]=l.views[p]||{};if(!p[e])return p[e]=!0,l}).then(function(){return g.registerDependentDatabase(e).then(function(l){l=
l.db;l.auto_compaction=!0;var p={name:e,db:l,sourceDB:g,adapter:g.adapter,mapFun:h,reduceFun:f};return p.db.get("_local/lastSeq").catch(function(q){if(404!==q.status)throw q;}).then(function(q){p.seq=q?q.seq:0;if(d)p.db.once("destroyed",function(){delete d[a]});return p})})})});d&&(d[a]=k);return k}function DL(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function H9(g){return 1===g.length&&/^1-/.test(g[0].rev)}function OV(g,c){try{g.emit("error",c)}catch(h){Ym("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),
Ym("error",c)}}function PV(g,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(f){return g.getAttachment(c._id,f,{rev:c._rev})}))}function I9(g,c,h){var f=Ro(c)&&!Ro(g),m=Object.keys(h._attachments);return f?g.get(h._id).then(function(n){return Promise.all(m.map(function(a){return n._attachments&&n._attachments[a]&&n._attachments[a].digest===h._attachments[a].digest?g.getAttachment(n._id,a):c.getAttachment(h._id,a)}))}).catch(function(n){if(404!==n.status)throw n;return PV(c,
h)}):PV(c,h)}function J9(g){var c=[];Object.keys(g).forEach(function(h){g[h].missing.forEach(function(f){c.push({id:h,rev:f})})});return{docs:c,revs:!0,latest:!0}}function K9(g,c,h,f){function m(d){return g.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(k){if(f.cancelled)throw Error("cancelled");k.rows.forEach(function(b){var e;(e=b.deleted||!b.doc||!/^1-/.test(b.value.rev))||(e=b.doc,e=e._attachments&&0<Object.keys(e._attachments).length);e||(e=b.doc,e=e._conflicts&&0<e._conflicts.length);
e||(b.doc._conflicts&&delete b.doc._conflicts,n.push(b.doc),delete h[b.id])})})}h=bk(h);var n=[],a=!0;return Promise.resolve().then(function(){var d=Object.keys(h).filter(function(k){k=h[k].missing;return 1===k.length&&/^1-/.test(k[0])});if(0<d.length)return m(d)}).then(function(){var d=J9(h);if(d.docs.length)return g.bulkGet(d).then(function(k){if(f.cancelled)throw Error("cancelled");return Promise.all(k.results.map(function(b){return Promise.all(b.docs.map(function(e){var l=e.ok;e.error&&(a=!1);
return l&&l._attachments?I9(c,g,l).then(function(p){var q=Object.keys(l._attachments);p.forEach(function(u,w){w=l._attachments[q[w]];delete w.stub;delete w.length;w.data=u});return l}):l}))})).then(function(b){n=n.concat(WD(b).filter(Boolean))})})}).then(function(){return{ok:a,docs:n}})}function EL(g,c,h,f,m){return g.get(c).catch(function(n){if(404===n.status)return"http"!==g.adapter&&"https"!==g.adapter||cL(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],
replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!m.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(a){return a.session_id!==f}),n.history.unshift({last_seq:h,session_id:f}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=f,n.last_seq=h,g.put(n).catch(function(a){if(409===a.status)return EL(g,c,h,f,m);throw a;})})}function jz(g,c,h,f,m){this.src=g;this.target=c;this.id=h;this.returnValue=f;this.opts=m||{}}function QV(g,c){var h=
g[0],f=g.slice(1),m=c[0],n=c.slice(1);return h&&0!==c.length?FL(h.session_id,c)?{last_seq:h.last_seq,history:g}:FL(m.session_id,f)?{last_seq:m.last_seq,history:n}:QV(f,n):{last_seq:0,history:[]}}function FL(g,c){var h=c[0],f=c.slice(1);return g&&0!==c.length?g===h.session_id?!0:FL(g,f):!1}function RV(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function L9(g,c,h,f){if(!1===g.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=
u8);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var m=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",m)});c.once("active",m)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(f,g.current_back_off)}}function M9(g){return Object.keys(g).sort(yk).reduce(function(c,h){c[h]=g[h];return c},{})}function N9(g,c,h){var f=h.doc_ids?h.doc_ids.sort(yk):
"",m=h.filter?h.filter.toString():"",n="",a="",d="";h.selector&&(d=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(M9(h.query_params)));h.filter&&"_view"===h.filter&&(a=h.view.toString());return Promise.all([g.id(),c.id()]).then(function(k){var b=k[0]+k[1]+m+a+n+f+d;return new Promise(function(e){kL(b,e)})}).then(function(k){k=k.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+k})}function SV(g,c,h,f,m){function n(){return Va?Promise.resolve():N9(g,c,h).then(function(ta){oa=
ta;Va=new jz(g,c,oa,f,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function a(){lb=[];if(0!==I.docs.length){var ta=I.docs;return c.bulkDocs({docs:ta,new_edits:!1},{timeout:h.timeout}).then(function(Ha){if(f.cancelled)throw q(),Error("cancelled");var zb=Object.create(null);
Ha.forEach(function(Ub){Ub.error&&(zb[Ub.id]=Ub)});Ha=Object.keys(zb).length;m.doc_write_failures+=Ha;m.docs_written+=ta.length-Ha;ta.forEach(function(Ub){var Nb=zb[Ub._id];if(Nb)if(m.errors.push(Nb),Ub=(Nb.name||"").toLowerCase(),"unauthorized"===Ub||"forbidden"===Ub)f.emit("denied",bk(Nb));else throw Nb;else lb.push(Ub)})},function(Ha){m.doc_write_failures+=ta.length;throw Ha;})}}function d(){if(I.error)throw Error("There was a problem getting docs.");m.last_seq=Ba=I.seq;var ta=bk(m);lb.length&&
(ta.docs=lb,"number"===typeof I.pending&&(ta.pending=I.pending,delete I.pending),f.emit("change",ta));T=!0;return Va.writeCheckpoint(I.seq,qa).then(function(){T=!1;if(f.cancelled)throw q(),Error("cancelled");I=void 0;A()}).catch(function(Ha){E(Ha);throw Ha;})}function k(){var ta={};I.changes.forEach(function(Ha){"_user/"!==Ha.id&&(ta[Ha.id]=Ha.changes.map(function(zb){return zb.rev}))});return c.revsDiff(ta).then(function(Ha){if(f.cancelled)throw q(),Error("cancelled");I.diffs=Ha})}function b(){return K9(g,
c,I.diffs,f).then(function(ta){I.error=!ta.ok;ta.docs.forEach(function(Ha){delete I.diffs[Ha._id];m.docs_read++;I.docs.push(Ha)})})}function e(){f.cancelled||I||(0===L.length?l(!0):(I=L.shift(),k().then(b).then(a).then(d).then(e).catch(function(ta){p("batch processing terminated with error",ta)})))}function l(ta){if(0===V.changes.length){if(0===L.length&&!I){if(F&&ja.live||Y)f.state="pending",f.emit("paused");Y&&q()}}else if(ta||Y||V.changes.length>=W){L.push(V);V={seq:0,changes:[],docs:[]};if("pending"===
f.state||"stopped"===f.state)f.state="active",f.emit("active");e()}}function p(ta,Ha){na||(Ha.message||(Ha.message=ta),m.ok=!1,m.status="aborting",L=[],V={seq:0,changes:[],docs:[]},q(Ha))}function q(ta){if(!na){if(f.cancelled&&(m.status="cancelled",T))return;m.status=m.status||"complete";m.end_time=(new Date).toISOString();m.last_seq=Ba;na=!0;if(ta){ta=ch(ta);ta.result=m;var Ha=(ta.name||"").toLowerCase();"unauthorized"===Ha||"forbidden"===Ha?(f.emit("error",ta),f.removeAllListeners()):L9(h,f,ta,
function(){SV(g,c,h,f)})}else f.emit("complete",m),f.removeAllListeners()}}function u(ta,Ha,zb){if(f.cancelled)return q();"number"===typeof Ha&&(V.pending=Ha);dL(h)(ta)&&(V.seq=ta.seq||zb,V.changes.push(ta),So(function(){l(0===L.length&&ja.live)}))}function w(ta){S=!1;if(f.cancelled)return q();if(0<ta.results.length)ja.since=ta.results[ta.results.length-1].seq,A(),l(!0);else{var Ha=function(){F?(ja.live=!0,A()):Y=!0;l(!0)};I||0!==ta.results.length?Ha():(T=!0,Va.writeCheckpoint(ta.last_seq,qa).then(function(){T=
!1;m.last_seq=Ba=ta.last_seq;Ha()}).catch(E))}}function y(ta){S=!1;if(f.cancelled)return q();p("changes rejected",ta)}function A(){function ta(){zb.cancel()}function Ha(){f.removeListener("cancel",ta)}if(!S&&!Y&&L.length<P){S=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),f._changes.cancel());f.once("cancel",ta);var zb=g.changes(ja).on("change",u);zb.then(Ha,Ha);zb.then(w).catch(y);h.retry&&(f._changes=zb,f._abortChanges=ta)}}function C(){n().then(function(){if(f.cancelled)q();else return Va.getCheckpoint().then(function(ta){Ba=
ta;ja={since:Ba,limit:W,batch_size:W,style:"all_docs",doc_ids:fa,selector:aa,return_docs:!0};h.filter&&("string"!==typeof h.filter?ja.include_docs=!0:ja.filter=h.filter);"heartbeat"in h&&(ja.heartbeat=h.heartbeat);"timeout"in h&&(ja.timeout=h.timeout);h.query_params&&(ja.query_params=h.query_params);h.view&&(ja.view=h.view);A()})}).catch(function(ta){p("getCheckpoint rejected with ",ta)})}function E(ta){T=!1;p("writeCheckpoint completed with error",ta)}var L=[],I,V={seq:0,changes:[],docs:[]},T=!1,
Y=!1,na=!1,Ba=0,F=h.continuous||h.live||!1,W=h.batch_size||100,P=h.batches_limit||10,S=!1,fa=h.doc_ids,aa=h.selector,oa,Va,lb=[],qa=ZD();m=m||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var ja={};f.ready(g,c);f.cancelled?q():(f._addedListeners||(f.once("cancel",q),"function"===typeof h.complete&&(f.once("error",h.complete),f.once("complete",function(ta){h.complete(null,ta)})),f._addedListeners=!0),"undefined"===typeof h.since?C():n().then(function(){T=
!0;return Va.writeCheckpoint(h.since,qa)}).then(function(){T=!1;f.cancelled?q():(Ba=h.since,C())}).catch(E))}function fE(){Xl.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(h,f){g.once("complete",h);g.once("error",f)});g.then=function(h,f){return c.then(h,f)};g.catch=function(h){return c.catch(h)};g.catch(function(){})}function gE(g,c){var h=c.PouchConstructor;return"string"===typeof g?new h(g,c):g}function GL(g,c,h,f){"function"===typeof h&&(f=h,
h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw ch(VD,"`doc_ids` filter parameter is not a list.");h.complete=f;h=bk(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;f=new fE(h);g=gE(g,h);c=gE(c,h);SV(g,c,h,f);return f}function O9(g,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});h=bk(h);h.PouchConstructor=h.PouchConstructor||this;g=gE(g,h);c=gE(c,h);return new HL(g,c,h,f)}function HL(g,
c,h,f){function m(E){u.emit("change",{direction:"pull",change:E})}function n(E){u.emit("change",{direction:"push",change:E})}function a(E){u.emit("denied",{direction:"push",doc:E})}function d(E){u.emit("denied",{direction:"pull",doc:E})}function k(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function b(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function e(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function l(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}
function p(E){return function(L,I){var V="denied"===L&&(I===d||I===a),T="paused"===L&&(I===b||I===k),Y="active"===L&&(I===l||I===e);if("change"===L&&(I===m||I===n)||V||T||Y)L in A||(A[L]={}),A[L][E]=!0,2===Object.keys(A[L]).length&&u.removeAllListeners(L)}}function q(E,L,I){if(-1==E.listeners(L).indexOf(I))E.on(L,I)}var u=this;this.canceled=!1;var w=h.push?qw({},h,h.push):h,y=h.pull?qw({},h,h.pull):h;this.push=GL(g,c,w);this.pull=GL(c,g,y);this.pullPaused=this.pushPaused=!0;var A={};h.live&&(this.push.on("complete",
u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",function(E){"change"===E?(q(u.pull,"change",m),q(u.push,"change",n)):"denied"===E?(q(u.pull,"denied",d),q(u.push,"denied",a)):"active"===E?(q(u.pull,"active",l),q(u.push,"active",e)):"paused"===E&&(q(u.pull,"paused",b),q(u.push,"paused",k))});this.on("removeListener",function(E){"change"===E?(u.pull.removeListener("change",m),u.push.removeListener("change",n)):"denied"===E?(u.pull.removeListener("denied",
d),u.push.removeListener("denied",a)):"active"===E?(u.pull.removeListener("active",l),u.push.removeListener("active",e)):"paused"===E&&(u.pull.removeListener("paused",b),u.push.removeListener("paused",k))});this.pull.on("removeListener",p("pull"));this.push.on("removeListener",p("push"));var C=Promise.all([this.push,this.pull]).then(function(E){E={push:E[0],pull:E[1]};u.emit("complete",E);f&&f(null,E);u.removeAllListeners();return E},function(E){u.cancel();f?f(E):u.emit("error",E);u.removeAllListeners();
if(f)throw E;});this.then=function(E,L){return C.then(E,L)};this.catch=function(E){return C.catch(E)}}function nr(){this._store={}}function kz(g){this._store=new nr;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function P9(){tw&&Ct&&(tw=!1,Ct.length?or=Ct.concat(or):lz=-1,or.length&&TV())}function TV(){if(!tw){IL=!1;tw=!0;for(var g=or.length,c=setTimeout(P9);g;){Ct=or;for(or=[];Ct&&++lz<g;)Ct[lz].run();lz=-1;g=or.length}Ct=null;lz=-1;tw=!1;clearTimeout(c)}}function UV(g,c){this.fun=
g;this.array=c}function Ii(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function Dt(g){return g.call.bind(g)}function mz(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(h){return!1}}function VV(g){return Yl&&um?void 0!==Zm(g):WV(g)||XV(g)||YV(g)||ZV(g)||$V(g)||aW(g)||bW(g)||cW(g)||dW(g)||eW(g)||fW(g)}function WV(g){return Yl&&um?"Uint8Array"===Zm(g):"[object Uint8Array]"===lj(g)||Q9(g)&&void 0!==g.buffer}function XV(g){return Yl&&um?"Uint8ClampedArray"===
Zm(g):"[object Uint8ClampedArray]"===lj(g)}function YV(g){return Yl&&um?"Uint16Array"===Zm(g):"[object Uint16Array]"===lj(g)}function ZV(g){return Yl&&um?"Uint32Array"===Zm(g):"[object Uint32Array]"===lj(g)}function $V(g){return Yl&&um?"Int8Array"===Zm(g):"[object Int8Array]"===lj(g)}function aW(g){return Yl&&um?"Int16Array"===Zm(g):"[object Int16Array]"===lj(g)}function bW(g){return Yl&&um?"Int32Array"===Zm(g):"[object Int32Array]"===lj(g)}function cW(g){return Yl&&um?"Float32Array"===Zm(g):"[object Float32Array]"===
lj(g)}function dW(g){return Yl&&um?"Float64Array"===Zm(g):"[object Float64Array]"===lj(g)}function eW(g){return Yl&&um?"BigInt64Array"===Zm(g):"[object BigInt64Array]"===lj(g)}function fW(g){return Yl&&um?"BigUint64Array"===Zm(g):"[object BigUint64Array]"===lj(g)}function hE(g){return"[object Map]"===lj(g)}function iE(g){return"[object Set]"===lj(g)}function jE(g){return"[object WeakMap]"===lj(g)}function JL(g){return"[object WeakSet]"===lj(g)}function kE(g){return"[object ArrayBuffer]"===lj(g)}function gW(g){return"undefined"!=
typeof ArrayBuffer&&(kE.working?kE(g):g instanceof ArrayBuffer)}function lE(g){return"[object DataView]"===lj(g)}function hW(g){return"undefined"!=typeof DataView&&(lE.working?lE(g):g instanceof DataView)}function mE(g){return"[object SharedArrayBuffer]"===lj(g)}function iW(g){return"undefined"!=typeof SharedArrayBuffer&&(mE.working?mE(g):g instanceof SharedArrayBuffer)}function jW(g){return mz(g,R9)}function kW(g){return mz(g,S9)}function lW(g){return mz(g,T9)}function mW(g){return nW&&mz(g,U9)}
function oW(g){return KL&&mz(g,V9)}function pr(g,c){var h={seen:[],stylize:W9};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),LL(c)?h.showHidden=c:c&&ug._extend(h,c),Et(h.showHidden)&&(h.showHidden=!1),Et(h.depth)&&(h.depth=2),Et(h.colors)&&(h.colors=!1),Et(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=X9),nE(h,g,h.depth)}function X9(g,c){return(c=pr.styles[c])?"\u001b["+pr.colors[c][0]+"m"+g+"\u001b["+pr.colors[c][1]+"m":g}function W9(g,
c){return g}function nE(g,c,h){if(g.customInspect&&c&&oE(c.inspect)&&c.inspect!==ug.inspect&&(!c.constructor||c.constructor.prototype!==c)){var f=c.inspect(h,g);return pE(f)||(f=nE(g,f,h)),f}var m=function(b,e){if(Et(e))return b.stylize("undefined","undefined");if(pE(e))return e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",b.stylize(e,"string");if(pW(e))return b.stylize(""+e,"number");if(LL(e))return b.stylize(""+e,"boolean");if(null===e)return b.stylize("null",
"null")}(g,c);if(m)return m;m=Object.keys(c);var n=function(b){var e={};return b.forEach(function(l,p){e[l]=!0}),e}(m);if(g.showHidden&&(m=Object.getOwnPropertyNames(c)),nz(c)&&(0<=m.indexOf("message")||0<=m.indexOf("description")))return ML(c);if(0===m.length){if(oE(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(oz(c))return g.stylize(RegExp.prototype.toString.call(c),"regexp");if(qE(c))return g.stylize(Date.prototype.toString.call(c),"date");if(nz(c))return ML(c)}var a=
"",d=!1,k=["{","}"];(qW(c)&&(d=!0,k=["[","]"]),oE(c))&&(a=" [Function"+(c.name?": "+c.name:"")+"]");return oz(c)&&(a=" "+RegExp.prototype.toString.call(c)),qE(c)&&(a=" "+Date.prototype.toUTCString.call(c)),nz(c)&&(a=" "+ML(c)),0!==m.length||d&&0!=c.length?0>h?oz(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),f=d?function(b,e,l,p,q){for(var u=[],w=0,y=e.length;w<y;++w)Object.prototype.hasOwnProperty.call(e,String(w))?u.push(NL(b,e,l,p,String(w),
!0)):u.push("");return q.forEach(function(A){A.match(/^\d+$/)||u.push(NL(b,e,l,p,A,!0))}),u}(g,c,h,n,m):m.map(function(b){return NL(g,c,h,n,b,d)}),g.seen.pop(),function(b,e,l){var p=0;return 60<b.reduce(function(q,u){return p++,0<=u.indexOf("\n")&&p++,q+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===e?"":e+"\n ")+" "+b.join(",\n  ")+" "+l[1]:l[0]+e+" "+b.join(", ")+" "+l[1]}(f,a,k)):k[0]+a+k[1]}function ML(g){return"["+Error.prototype.toString.call(g)+"]"}function NL(g,c,h,f,m,n){var a,d,
k;if((k=Object.getOwnPropertyDescriptor(c,m)||{value:c[m]}).get?d=k.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):k.set&&(d=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,m)||(a="["+m+"]"),d||(0>g.seen.indexOf(k.value)?-1<(d=null===h?nE(g,k.value,null):nE(g,k.value,h-1)).indexOf("\n")&&(d=n?d.split("\n").map(function(b){return"  "+b}).join("\n").substr(2):"\n"+d.split("\n").map(function(b){return"   "+b}).join("\n")):d=g.stylize("[Circular]","special")),
Et(a)){if(n&&m.match(/^\d+$/))return d;(a=JSON.stringify(""+m)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=g.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=g.stylize(a,"string"))}return a+": "+d}function qW(g){return Array.isArray(g)}function LL(g){return"boolean"==typeof g}function pW(g){return"number"==typeof g}function pE(g){return"string"==typeof g}function Et(g){return void 0===g}function oz(g){return uw(g)&&"[object RegExp]"===
Object.prototype.toString.call(g)}function uw(g){return"object"==typeof g&&null!==g}function qE(g){return uw(g)&&"[object Date]"===Object.prototype.toString.call(g)}function nz(g){return uw(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function oE(g){return"function"==typeof g}function OL(g){return 10>g?"0"+g.toString(10):g.toString(10)}function Y9(){var g=new Date,c=[OL(g.getHours()),OL(g.getMinutes()),OL(g.getSeconds())].join(":");return[g.getDate(),Z9[g.getMonth()],
c].join(" ")}function $9(g,c){if(!g){var h=Error("Promise was rejected with a falsy value");h.reason=g;g=h}return c(g)}function rW(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=c),[g,g===c?0:4-g%4]}function a$(g,c,h){for(var f,m=[],n=c;n<h;n+=3)c=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),m.push(Uo[(f=c)>>18&63]+Uo[f>>12&63]+Uo[f>>6&63]+Uo[63&f]);return m.join("")}function dq(g){if(2147483647<g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,be.prototype),g}function be(g,c,h){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return PL(g)}return sW(g,c,h)}function sW(g,c,h){if("string"==typeof g)return function(m,n){"string"==typeof n&&""!==n||(n="utf8");if(!be.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var a=0|tW(m,n),d=dq(a);m=d.write(m,n);m!==a&&(d=
d.slice(0,m));return d}(g,c);if(ArrayBuffer.isView(g))return QL(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(eq(g,ArrayBuffer)||g&&eq(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(eq(g,SharedArrayBuffer)||g&&eq(g.buffer,SharedArrayBuffer)))return b$(g,c,h);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return be.from(f,c,h);if(f=function(m){if(be.isBuffer(m)){var n=0|RL(m.length),a=dq(n);return 0===a.length||m.copy(a,0,0,n),a}if(void 0!==m.length)return(n="number"!=typeof m.length)||(n=m.length,n=n!=n),n?dq(0):QL(m);if("Buffer"===m.type&&Array.isArray(m.data))return QL(m.data)}(g))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return be.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function uW(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function PL(g){return uW(g),dq(0>g?0:0|RL(g))}function QL(g){for(var c=0>g.length?0:0|RL(g.length),h=dq(c),f=0;f<c;f+=1)h[f]=255&g[f];return h}function b$(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var f;return f=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h),Object.setPrototypeOf(f,be.prototype),f}function RL(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function tW(g,c){if(be.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||eq(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return SL(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return vW(g).length;default:if(m)return f?-1:SL(g).length;c=(""+c).toLowerCase();m=!0}}function c$(g,c,h){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>g)&&(h=g);for(g="";c<h;++c)g+=d$[this[c]];return g;case "utf8":case "utf-8":return wW(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&h===this.length?TL.fromByteArray(this):
TL.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();f=!0}}function Ft(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function xW(g,c,h,f,m){if(0===g.length)return-1;"string"==typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=m?0:g.length-1),0>h&&(h=g.length+
h),h>=g.length){if(m)return-1;h=g.length-1}else if(0>h){if(!m)return-1;h=0}if("string"==typeof c&&(c=be.from(c,f)),be.isBuffer(c))return 0===c.length?-1:yW(g,c,h,f,m);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):yW(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function yW(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,
d=g.length,k=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function zW(g,c,h,f){for(var m=[],n=0;n<c.length;++n)m.push(255&c.charCodeAt(n));return rE(m,g,h,f)}
function wW(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m,n,a=g[c],d=null,k=239<a?4:223<a?3:191<a?2:1;if(c+k<=h)switch(k){case 1:128>a&&(d=a);break;case 2:128==(192&(m=g[c+1]))&&127<(n=(31&a)<<6|63&m)&&(d=n);break;case 3:m=g[c+1];var b=g[c+2];128==(192&m)&&128==(192&b)&&2047<(n=(15&a)<<12|(63&m)<<6|63&b)&&(55296>n||57343<n)&&(d=n);break;case 4:m=g[c+1];b=g[c+2];var e=g[c+3];128==(192&m)&&128==(192&b)&&128==(192&e)&&65535<(n=(15&a)<<18|(63&m)<<12|(63&b)<<6|63&e)&&1114112>n&&(d=n)}null===d?
(d=65533,k=1):65535<d&&(d-=65536,f.push(d>>>10&1023|55296),d=56320|1023&d);f.push(d);c+=k}g=f.length;if(4096>=g)f=String.fromCharCode.apply(String,f);else{h="";for(m=0;m<g;)h+=String.fromCharCode.apply(String,f.slice(m,m+=4096));f=h}return f}function zk(g,c,h){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function Zl(g,c,h,f,m,n){if(!be.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function AW(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function BW(g,c,h,f,m){return c=+c,h>>>=0,m||AW(g,0,h,4),vw.write(g,c,h,f,23,4),h+4}function CW(g,c,h,f,m){return c=+c,h>>>=0,m||AW(g,0,h,8),vw.write(g,c,h,f,52,8),h+8}function SL(g,c){var h;c=c||1/0;for(var f=g.length,m=null,n=[],a=0;a<
f;++a){if(55295<(h=g.charCodeAt(a))&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=65536+(m-55296<<10|h-56320)}else m&&-1<(c-=3)&&n.push(239,191,189);if(m=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function vW(g){return TL.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(e$,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function rE(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function eq(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function DW(g,c){for(var h in g)c[h]=g[h]}function Gt(g,
c,h){return Vo(g,c,h)}function pz(g){switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var m;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(m)return;f=(""+f).toLowerCase();m=!0}}(c);if("string"!=typeof h&&(UL.isEncoding===EW||!EW(c)))throw Error("Unknown encoding: "+c);return h||c}(g),this.encoding){case "utf16le":this.text=
f$;this.end=g$;g=4;break;case "utf8":this.fillLast=h$;g=4;break;case "base64":this.text=i$;this.end=j$;g=3;break;default:return this.write=k$,this.end=l$,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=UL.allocUnsafe(g)}function VL(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function h$(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=g.length?(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function f$(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",c,g.length-1)}function g$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function i$(g,c){var h=(g.length-c)%3;return 0===h?g.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
c,g.length-h))}function j$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function k$(g){return g.toString(this.encoding)}function l$(g){return g&&g.length?this.write(g):""}function $m(g,c,h){h||(h=Error);var f=function(m,n,a){return a.call(this,"string"==typeof c?c:c(m,n,a))||this};$jscomp.inherits(f,h);f.prototype.name=h.name;f.prototype.code=g;FW[g]=f}function GW(g,c){if(Array.isArray(g)){var h=g.length;return g=g.map(function(f){return String(f)}),
2<h?"one of "+c+" "+g.slice(0,h-1).join(", ")+", or "+g[h-1]:2===h?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function WL(g){try{if(!XL.localStorage)return!1}catch(c){return!1}g=XL.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function HW(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}));h.push.apply(h,f)}return h}
function m$(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function IW(g,c){YL(g,c);sE(g)}function sE(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function YL(g,c){g.emit("error",c)}function n$(){}function qr(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function rr(g,
c){return{value:g,done:c}}function o$(g){var c=g[sr];if(null!==c){var h=g[Ht].read();null!==h&&(g[It]=null,g[sr]=null,g[Jt]=null,c(rr(h,!1)))}}function p$(g){JW.nextTick(o$,g)}function KW(){function g(qa,ja,ta){A=A||qz();qa=qa||{};"boolean"!=typeof ta&&(ta=ja instanceof A);this.objectMode=!!qa.objectMode;ta&&(this.objectMode=this.objectMode||!!qa.readableObjectMode);this.highWaterMark=W(this,qa,"readableHighWaterMark",ta);this.buffer=new F;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==qa.emitClose;this.autoDestroy=!!qa.autoDestroy;this.destroyed=!1;this.defaultEncoding=qa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;qa.encoding&&(Y||(Y=ww.StringDecoder),this.decoder=new Y(qa.encoding),this.encoding=qa.encoding)}function c(qa){if(A=A||qz(),!(this instanceof
c))return new c(qa);this._readableState=new g(qa,this,this instanceof A);this.readable=!0;qa&&("function"==typeof qa.read&&(this._read=qa.read),"function"==typeof qa.destroy&&(this._destroy=qa.destroy));E.call(this)}function h(qa,ja,ta,Ha,zb){T("readableAddChunk",ja);var Ub,Nb=qa._readableState;if(null===ja)Nb.reading=!1,function(Sb,pc){if(T("onEofChunk"),!pc.ended){if(pc.decoder){var Eb=pc.decoder.end();Eb&&Eb.length&&(pc.buffer.push(Eb),pc.length+=pc.objectMode?1:Eb.length)}pc.ended=!0;pc.sync?
n(Sb):(pc.needReadable=!1,pc.emittedReadable||(pc.emittedReadable=!0,a(Sb)))}}(qa,Nb);else if(zb||(Ub=function(Sb,pc){var Eb;var Lc=pc;L.isBuffer(Lc)||Lc instanceof I||"string"==typeof pc||void 0===pc||Sb.objectMode||(Eb=new S("chunk",["string","Buffer","Uint8Array"],pc));return Eb}(Nb,ja)),Ub)Va(qa,Ub);else if(Nb.objectMode||ja&&0<ja.length)if("string"==typeof ja||Nb.objectMode||Object.getPrototypeOf(ja)===L.prototype||(ja=L.from(ja)),Ha)Nb.endEmitted?Va(qa,new oa):f(qa,Nb,ja,!0);else if(Nb.ended)Va(qa,
new fa);else{if(Nb.destroyed)return!1;Nb.reading=!1;Nb.decoder&&!ta?(ja=Nb.decoder.write(ja),Nb.objectMode||0!==ja.length?f(qa,Nb,ja,!1):d(qa,Nb)):f(qa,Nb,ja,!1)}else Ha||(Nb.reading=!1,d(qa,Nb));return!Nb.ended&&(Nb.length<Nb.highWaterMark||0===Nb.length)}function f(qa,ja,ta,Ha){ja.flowing&&0===ja.length&&!ja.sync?(ja.awaitDrain=0,qa.emit("data",ta)):(ja.length+=ja.objectMode?1:ta.length,Ha?ja.buffer.unshift(ta):ja.buffer.push(ta),ja.needReadable&&n(qa));d(qa,ja)}function m(qa,ja){if(0>=qa||0===
ja.length&&ja.ended)qa=0;else if(ja.objectMode)qa=1;else if(qa!=qa)qa=ja.flowing&&ja.length?ja.buffer.head.data.length:ja.length;else{if(qa>ja.highWaterMark){var ta=qa;var Ha=(1073741824<=ta?ta=1073741824:(ta--,ta|=ta>>>1,ta|=ta>>>2,ta|=ta>>>4,ta|=ta>>>8,ta|=ta>>>16,ta++),ta);ja.highWaterMark=Ha}qa=qa<=ja.length?qa:ja.ended?ja.length:(ja.needReadable=!0,0)}return qa}function n(qa){var ja=qa._readableState;T("emitReadable",ja.needReadable,ja.emittedReadable);ja.needReadable=!1;ja.emittedReadable||
(T("emitReadable",ja.flowing),ja.emittedReadable=!0,C.nextTick(a,qa))}function a(qa){var ja=qa._readableState;T("emitReadable_",ja.destroyed,ja.length,ja.ended);ja.destroyed||!ja.length&&!ja.ended||(qa.emit("readable"),ja.emittedReadable=!1);ja.needReadable=!ja.flowing&&!ja.ended&&ja.length<=ja.highWaterMark;p(qa)}function d(qa,ja){ja.readingMore||(ja.readingMore=!0,C.nextTick(k,qa,ja))}function k(qa,ja){for(;!ja.reading&&!ja.ended&&(ja.length<ja.highWaterMark||ja.flowing&&0===ja.length);){var ta=
ja.length;if(T("maybeReadMore read 0"),qa.read(0),ta===ja.length)break}ja.readingMore=!1}function b(qa){var ja=qa._readableState;ja.readableListening=0<qa.listenerCount("readable");ja.resumeScheduled&&!ja.paused?ja.flowing=!0:0<qa.listenerCount("data")&&qa.resume()}function e(qa){T("readable nexttick read 0");qa.read(0)}function l(qa,ja){T("resume",ja.reading);ja.reading||qa.read(0);ja.resumeScheduled=!1;qa.emit("resume");p(qa);ja.flowing&&!ja.reading&&qa.read(0)}function p(qa){var ja=qa._readableState;
for(T("flow",ja.flowing);ja.flowing&&null!==qa.read(););}function q(qa,ja){return 0===ja.length?null:(ja.objectMode?ta=ja.buffer.shift():!qa||qa>=ja.length?(ta=ja.decoder?ja.buffer.join(""):1===ja.buffer.length?ja.buffer.first():ja.buffer.concat(ja.length),ja.buffer.clear()):ta=ja.buffer.consume(qa,ja.decoder),ta);var ta}function u(qa){var ja=qa._readableState;T("endReadable",ja.endEmitted);ja.endEmitted||(ja.ended=!0,C.nextTick(w,ja,qa))}function w(qa,ja){if(T("endReadableNT",qa.endEmitted,qa.length),
!qa.endEmitted&&0===qa.length&&(qa.endEmitted=!0,ja.readable=!1,ja.emit("end"),qa.autoDestroy))qa=ja._writableState,(!qa||qa.autoDestroy&&qa.finished)&&ja.destroy()}function y(qa,ja){for(var ta=0,Ha=qa.length;ta<Ha;ta++)if(qa[ta]===ja)return ta;return-1}if(LW)return ZL;LW=!0;var A,C=oh;ZL=c;c.ReadableState=g;Wo.EventEmitter;var E=tE,L=Eg.Buffer,I=q$.Uint8Array||function(){},V=ug;var T=V&&V.debuglog?V.debuglog("stream"):function(){};var Y,na,Ba,F=r$;V=MW;var W=NW.getHighWaterMark,P=Xn.codes,S=P.ERR_INVALID_ARG_TYPE,
fa=P.ERR_STREAM_PUSH_AFTER_EOF,aa=P.ERR_METHOD_NOT_IMPLEMENTED,oa=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Ng(c,E);var Va=V.errorOrDestroy,lb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(qa){this._readableState&&(this._readableState.destroyed=qa)}});c.prototype.destroy=V.destroy;c.prototype._undestroy=V.undestroy;c.prototype._destroy=function(qa,
ja){ja(qa)};c.prototype.push=function(qa,ja){var ta,Ha=this._readableState;return Ha.objectMode?ta=!0:"string"==typeof qa&&((ja=ja||Ha.defaultEncoding)!==Ha.encoding&&(qa=L.from(qa,ja),ja=""),ta=!0),h(this,qa,ja,!1,ta)};c.prototype.unshift=function(qa){return h(this,qa,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(qa){Y||(Y=ww.StringDecoder);qa=new Y(qa);this._readableState.decoder=qa;this._readableState.encoding=this._readableState.decoder.encoding;
for(var ja=this._readableState.buffer.head,ta="";null!==ja;)ta+=qa.write(ja.data),ja=ja.next;return this._readableState.buffer.clear(),""!==ta&&this._readableState.buffer.push(ta),this._readableState.length=ta.length,this};return c.prototype.read=function(qa){T("read",qa);qa=parseInt(qa,10);var ja=this._readableState,ta=qa;if(0!==qa&&(ja.emittedReadable=!1),0===qa&&ja.needReadable&&((0!==ja.highWaterMark?ja.length>=ja.highWaterMark:0<ja.length)||ja.ended))return T("read: emitReadable",ja.length,ja.ended),
0===ja.length&&ja.ended?u(this):n(this),null;if(0===(qa=m(qa,ja))&&ja.ended)return 0===ja.length&&u(this),null;var Ha,zb=ja.needReadable;return T("need readable",zb),(0===ja.length||ja.length-qa<ja.highWaterMark)&&T("length less than watermark",zb=!0),ja.ended||ja.reading?T("reading or ended",!1):zb&&(T("do read"),ja.reading=!0,ja.sync=!0,0===ja.length&&(ja.needReadable=!0),this._read(ja.highWaterMark),ja.sync=!1,ja.reading||(qa=m(ta,ja))),null===(Ha=0<qa?q(qa,ja):null)?(ja.needReadable=ja.length<=
ja.highWaterMark,qa=0):(ja.length-=qa,ja.awaitDrain=0),0===ja.length&&(ja.ended||(ja.needReadable=!0),ta!==qa&&ja.ended&&u(this)),null!==Ha&&this.emit("data",Ha),Ha},c.prototype._read=function(qa){Va(this,new aa("_read()"))},c.prototype.pipe=function(qa,ja){function ta(Ca,Ea){T("onunpipe");Ca===Eb&&Ea&&!1===Ea.hasUnpiped&&(Ea.hasUnpiped=!0,T("cleanup"),qa.removeListener("close",Nb),qa.removeListener("finish",Sb),qa.removeListener("drain",dd),qa.removeListener("error",Ub),qa.removeListener("unpipe",
ta),Eb.removeListener("end",Ha),Eb.removeListener("end",pc),Eb.removeListener("data",zb),ia=!0,!Lc.awaitDrain||qa._writableState&&!qa._writableState.needDrain||dd())}function Ha(){T("onend");qa.end()}function zb(Ca){T("ondata");Ca=qa.write(Ca);T("dest.write",Ca);!1===Ca&&((1===Lc.pipesCount&&Lc.pipes===qa||1<Lc.pipesCount&&-1!==y(Lc.pipes,qa))&&!ia&&(T("false write response, pause",Lc.awaitDrain),Lc.awaitDrain++),Eb.pause())}function Ub(Ca){T("onerror",Ca);pc();qa.removeListener("error",Ub);0===qa.listeners("error").length&&
Va(qa,Ca)}function Nb(){qa.removeListener("finish",Sb);pc()}function Sb(){T("onfinish");qa.removeListener("close",Nb);pc()}function pc(){T("unpipe");Eb.unpipe(qa)}var Eb=this,Lc=this._readableState;switch(Lc.pipesCount){case 0:Lc.pipes=qa;break;case 1:Lc.pipes=[Lc.pipes,qa];break;default:Lc.pipes.push(qa)}Lc.pipesCount+=1;T("pipe count=%d opts=%j",Lc.pipesCount,ja);ja=ja&&!1===ja.end||qa===C.stdout||qa===C.stderr?pc:Ha;Lc.endEmitted?C.nextTick(ja):Eb.once("end",ja);qa.on("unpipe",ta);var dd=function(Ca){return function(){var Ea=
Ca._readableState;T("pipeOnDrain",Ea.awaitDrain);Ea.awaitDrain&&Ea.awaitDrain--;0===Ea.awaitDrain&&Ca.listeners("data").length&&(Ea.flowing=!0,p(Ca))}}(Eb);qa.on("drain",dd);var ia=!1;return Eb.on("data",zb),function(Ca,Ea,jb){if("function"==typeof Ca.prependListener)return Ca.prependListener(Ea,jb);Ca._events&&Ca._events[Ea]?Array.isArray(Ca._events[Ea])?Ca._events[Ea].unshift(jb):Ca._events[Ea]=[jb,Ca._events[Ea]]:Ca.on(Ea,jb)}(qa,"error",Ub),qa.once("close",Nb),qa.once("finish",Sb),qa.emit("pipe",
Eb),Lc.flowing||(T("pipe resume"),Eb.resume()),qa},c.prototype.unpipe=function(qa){var ja=this._readableState,ta={hasUnpiped:!1};if(0===ja.pipesCount)return this;if(1===ja.pipesCount)return qa&&qa!==ja.pipes||(qa||(qa=ja.pipes),ja.pipes=null,ja.pipesCount=0,ja.flowing=!1,qa&&qa.emit("unpipe",this,ta)),this;if(!qa){qa=ja.pipes;ta=ja.pipesCount;ja.pipes=null;ja.pipesCount=0;ja.flowing=!1;for(ja=0;ja<ta;ja++)qa[ja].emit("unpipe",this,{hasUnpiped:!1});return this}var Ha=y(ja.pipes,qa);return-1===Ha||
(ja.pipes.splice(Ha,1),--ja.pipesCount,1===ja.pipesCount&&(ja.pipes=ja.pipes[0]),qa.emit("unpipe",this,ta)),this},c.prototype.on=function(qa,ja){ja=E.prototype.on.call(this,qa,ja);var ta=this._readableState;return"data"===qa?(ta.readableListening=0<this.listenerCount("readable"),!1!==ta.flowing&&this.resume()):"readable"===qa&&(ta.endEmitted||ta.readableListening||(ta.readableListening=ta.needReadable=!0,ta.flowing=!1,ta.emittedReadable=!1,T("on readable",ta.length,ta.reading),ta.length?n(this):ta.reading||
C.nextTick(e,this))),ja},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(qa,ja){ja=E.prototype.removeListener.call(this,qa,ja);return"readable"===qa&&C.nextTick(b,this),ja},c.prototype.removeAllListeners=function(qa){var ja=E.prototype.removeAllListeners.apply(this,arguments);return"readable"!==qa&&void 0!==qa||C.nextTick(b,this),ja},c.prototype.resume=function(){var qa=this._readableState;qa.flowing||(T("resume"),qa.flowing=!qa.readableListening,qa.resumeScheduled||(qa.resumeScheduled=
!0,C.nextTick(l,this,qa)));return qa.paused=!1,this},c.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(qa){var ja=this,ta=this._readableState,Ha=!1,zb;for(zb in qa.on("end",function(){if(T("wrapped end"),ta.decoder&&!ta.ended){var Ub=ta.decoder.end();Ub&&Ub.length&&ja.push(Ub)}ja.push(null)}),qa.on("data",
function(Ub){(T("wrapped data"),ta.decoder&&(Ub=ta.decoder.write(Ub)),ta.objectMode&&null==Ub)||(ta.objectMode||Ub&&Ub.length)&&(ja.push(Ub)||(Ha=!0,qa.pause()))}),qa)void 0===this[zb]&&"function"==typeof qa[zb]&&(this[zb]=function(Ub){return function(){return qa[Ub].apply(qa,arguments)}}(zb));for(zb=0;zb<lb.length;zb++)qa.on(lb[zb],this.emit.bind(this,lb[zb]));return this._read=function(Ub){T("wrapped _read",Ub);Ha&&(Ha=!1,qa.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===na&&(na=s$),na(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(qa){this._readableState&&(this._readableState.flowing=
qa)}}),c._fromList=q,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(qa,ja){return void 0===Ba&&(Ba=OW),Ba(c,qa,ja)}),ZL}function t$(){function g(P){var S=this;this.entry=this.next=null;this.finish=function(){var fa=S.entry;for(S.entry=null;fa;){var aa=fa.callback;P.pendingcb--;aa(void 0);fa=fa.next}P.corkedRequestsFree.next=S;!0}}function c(){}function h(P,S,fa){e=e||qz();P=P||{};"boolean"!=
typeof fa&&(fa=S instanceof e);this.objectMode=!!P.objectMode;fa&&(this.objectMode=this.objectMode||!!P.writableObjectMode);this.highWaterMark=C(this,P,"writableHighWaterMark",fa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==P.decodeStrings;this.defaultEncoding=P.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){!function(oa,Va){var lb=oa._writableState,
qa=lb.sync,ja=lb.writecb;if("function"!=typeof ja)throw new V;(function(ta){ta.writing=!1;ta.writecb=null;ta.length-=ta.writelen;ta.writelen=0}(lb),Va)?!function(ta,Ha,zb,Ub,Nb){--Ha.pendingcb;zb?(l.nextTick(Nb,Ub),l.nextTick(b,ta,Ha),ta._writableState.errorEmitted=!0,W(ta,Ub)):(Nb(Ub),ta._writableState.errorEmitted=!0,W(ta,Ub),b(ta,Ha))}(oa,lb,qa,Va,ja):((Va=d(lb)||oa.destroyed)||lb.corked||lb.bufferProcessing||!lb.bufferedRequest||a(oa,lb),qa?l.nextTick(n,oa,lb,Va,ja):n(oa,lb,Va,ja))}(S,aa)};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==P.emitClose;this.autoDestroy=!!P.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(P){var S=this instanceof(e=e||qz());if(!S&&!y.call(f,this))return new f(P);this._writableState=new h(P,this,S);this.writable=!0;P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),
"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final));q.call(this)}function m(P,S,fa,aa,oa,Va,lb){S.writelen=aa;S.writecb=lb;S.writing=!0;S.sync=!0;S.destroyed?S.onwrite(new Y("write")):fa?P._writev(oa,S.onwrite):P._write(oa,Va,S.onwrite);S.sync=!1}function n(P,S,fa,aa){fa||(0===S.length&&S.needDrain&&(S.needDrain=!1,P.emit("drain")),!0);S.pendingcb--;aa();b(P,S)}function a(P,S){S.bufferProcessing=!0;var fa=S.bufferedRequest;if(P._writev&&fa&&fa.next){var aa=
Array(S.bufferedRequestCount),oa=S.corkedRequestsFree;oa.entry=fa;for(var Va=0,lb=!0;fa;)aa[Va]=fa,fa.isBuf||(lb=!1),fa=fa.next,Va+=1;aa.allBuffers=lb;m(P,S,!0,S.length,aa,"",oa.finish);S.pendingcb++;S.lastBufferedRequest=null;oa.next?(S.corkedRequestsFree=oa.next,oa.next=null):S.corkedRequestsFree=new g(S);S.bufferedRequestCount=0}else{for(;fa&&(aa=fa.chunk,m(P,S,!1,S.objectMode?1:aa.length,aa,fa.encoding,fa.callback),fa=fa.next,S.bufferedRequestCount--,!S.writing););null===fa&&(S.lastBufferedRequest=
null)}S.bufferedRequest=fa;S.bufferProcessing=!1}function d(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function k(P,S){P._final(function(fa){S.pendingcb--;fa&&W(P,fa);S.prefinished=!0;P.emit("prefinish");b(P,S)})}function b(P,S){var fa=d(S),aa;if(aa=fa)S.prefinished||S.finalCalled||("function"!=typeof P._final||S.destroyed?(S.prefinished=!0,P.emit("prefinish")):(S.pendingcb++,S.finalCalled=!0,l.nextTick(k,P,S))),aa=(!0,0===S.pendingcb&&(S.finished=!0,P.emit("finish"),
S.autoDestroy));aa&&(S=P._readableState,(!S||S.autoDestroy&&S.endEmitted)&&P.destroy());return fa}if(PW)return $L;PW=!0;var e,l=oh;$L=f;f.WritableState=h;var p={deprecate:QW},q=tE,u=Eg.Buffer,w=u$.Uint8Array||function(){},y,A=MW,C=NW.getHighWaterMark,E=Xn.codes,L=E.ERR_INVALID_ARG_TYPE,I=E.ERR_METHOD_NOT_IMPLEMENTED,V=E.ERR_MULTIPLE_CALLBACK,T=E.ERR_STREAM_CANNOT_PIPE,Y=E.ERR_STREAM_DESTROYED,na=E.ERR_STREAM_NULL_VALUES,Ba=E.ERR_STREAM_WRITE_AFTER_END,F=E.ERR_UNKNOWN_ENCODING,W=A.errorOrDestroy;return Ng(f,
q),h.prototype.getBuffer=function(){for(var P=this.bufferedRequest,S=[];P;)S.push(P),P=P.next;return S},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(P){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,
{value:function(P){return!!y.call(this,P)||this===f&&P&&P._writableState instanceof h}})):y=function(P){return P instanceof this},f.prototype.pipe=function(){W(this,new T)},f.prototype.write=function(P,S,fa){var aa,oa=this._writableState,Va=!1,lb=!oa.objectMode&&(aa=P,u.isBuffer(aa)||aa instanceof w);return lb&&!u.isBuffer(P)&&(P=u.from(P)),"function"==typeof S&&(fa=S,S=null),lb?S="buffer":S||(S=oa.defaultEncoding),"function"!=typeof fa&&(fa=c),oa.ending?function(qa,ja){var ta=new Ba;W(qa,ta);l.nextTick(ja,
ta)}(this,fa):(lb||function(qa,ja,ta,Ha){var zb;return null===ta?zb=new na:"string"==typeof ta||ja.objectMode||(zb=new L("chunk",["string","Buffer"],ta)),!zb||(W(qa,zb),l.nextTick(Ha,zb),!1)}(this,oa,P,fa))&&(oa.pendingcb++,Va=function(qa,ja,ta,Ha,zb,Ub){if(!ta){var Nb=Ha;ja.objectMode||!1===ja.decodeStrings||"string"!=typeof Nb||(Nb=u.from(Nb,zb));Ha!==Nb&&(ta=!0,zb="buffer",Ha=Nb)}var Sb=ja.objectMode?1:Ha.length;ja.length+=Sb;(Nb=ja.length<ja.highWaterMark)||(ja.needDrain=!0);ja.writing||ja.corked?
(qa=ja.lastBufferedRequest,ja.lastBufferedRequest={chunk:Ha,encoding:zb,isBuf:ta,callback:Ub,next:null},qa?qa.next=ja.lastBufferedRequest:ja.bufferedRequest=ja.lastBufferedRequest,ja.bufferedRequestCount+=1):m(qa,ja,!1,Sb,Ha,zb,Ub);return Nb}(this,oa,lb,P,S,fa)),Va},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||a(this,P))},f.prototype.setDefaultEncoding=
function(P){if("string"==typeof P&&(P=P.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((P+"").toLowerCase())))throw new F(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
f.prototype._write=function(P,S,fa){fa(new I("_write()"))},f.prototype._writev=null,f.prototype.end=function(P,S,fa){var aa=this._writableState;"function"==typeof P?(fa=P,P=null,S=null):"function"==typeof S&&(fa=S,S=null);null!=P&&this.write(P,S);aa.corked&&(aa.corked=1,this.uncork());aa.ending||(P=fa,aa.ending=!0,b(this,aa),P&&(aa.finished?l.nextTick(P):this.once("finish",P)),aa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),
Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),f.prototype.destroy=A.destroy,f.prototype._undestroy=A.undestroy,f.prototype._destroy=function(P,S){S(P)},$L}function qz(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&
(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(RW)return aM;RW=!0;var f=oh,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};aM=g;var n=KW(),a=t$();Ng(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),aM}function v$(){}function SW(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}));h.push.apply(h,f)}return h}function w$(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,
f)}}function TW(g,c){bM(g,c);uE(g)}function uE(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function bM(g,c){g.emit("error",c)}function tr(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function ur(g,c){return{value:g,done:c}}function x$(g){var c=g[vr];if(null!==c){var h=g[Kt].read();null!==h&&(g[Lt]=null,g[vr]=null,g[Mt]=null,c(ur(h,!1)))}}function y$(g){UW.nextTick(x$,
g)}function z$(){function g(qa,ja,ta){A=A||vE();qa=qa||{};"boolean"!=typeof ta&&(ta=ja instanceof A);this.objectMode=!!qa.objectMode;ta&&(this.objectMode=this.objectMode||!!qa.readableObjectMode);this.highWaterMark=W(this,qa,"readableHighWaterMark",ta);this.buffer=new F;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=
!1!==qa.emitClose;this.autoDestroy=!!qa.autoDestroy;this.destroyed=!1;this.defaultEncoding=qa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;qa.encoding&&(Y||(Y=ww.StringDecoder),this.decoder=new Y(qa.encoding),this.encoding=qa.encoding)}function c(qa){if(A=A||vE(),!(this instanceof c))return new c(qa);this._readableState=new g(qa,this,this instanceof A);this.readable=!0;qa&&("function"==typeof qa.read&&(this._read=qa.read),"function"==typeof qa.destroy&&
(this._destroy=qa.destroy));E.call(this)}function h(qa,ja,ta,Ha,zb){T("readableAddChunk",ja);var Ub,Nb=qa._readableState;if(null===ja)Nb.reading=!1,function(Sb,pc){if(T("onEofChunk"),!pc.ended){if(pc.decoder){var Eb=pc.decoder.end();Eb&&Eb.length&&(pc.buffer.push(Eb),pc.length+=pc.objectMode?1:Eb.length)}pc.ended=!0;pc.sync?n(Sb):(pc.needReadable=!1,pc.emittedReadable||(pc.emittedReadable=!0,a(Sb)))}}(qa,Nb);else if(zb||(Ub=function(Sb,pc){var Eb;var Lc=pc;L.isBuffer(Lc)||Lc instanceof I||"string"==
typeof pc||void 0===pc||Sb.objectMode||(Eb=new S("chunk",["string","Buffer","Uint8Array"],pc));return Eb}(Nb,ja)),Ub)Va(qa,Ub);else if(Nb.objectMode||ja&&0<ja.length)if("string"==typeof ja||Nb.objectMode||Object.getPrototypeOf(ja)===L.prototype||(ja=L.from(ja)),Ha)Nb.endEmitted?Va(qa,new oa):f(qa,Nb,ja,!0);else if(Nb.ended)Va(qa,new fa);else{if(Nb.destroyed)return!1;Nb.reading=!1;Nb.decoder&&!ta?(ja=Nb.decoder.write(ja),Nb.objectMode||0!==ja.length?f(qa,Nb,ja,!1):d(qa,Nb)):f(qa,Nb,ja,!1)}else Ha||
(Nb.reading=!1,d(qa,Nb));return!Nb.ended&&(Nb.length<Nb.highWaterMark||0===Nb.length)}function f(qa,ja,ta,Ha){ja.flowing&&0===ja.length&&!ja.sync?(ja.awaitDrain=0,qa.emit("data",ta)):(ja.length+=ja.objectMode?1:ta.length,Ha?ja.buffer.unshift(ta):ja.buffer.push(ta),ja.needReadable&&n(qa));d(qa,ja)}function m(qa,ja){if(0>=qa||0===ja.length&&ja.ended)qa=0;else if(ja.objectMode)qa=1;else if(qa!=qa)qa=ja.flowing&&ja.length?ja.buffer.head.data.length:ja.length;else{if(qa>ja.highWaterMark){var ta=qa;var Ha=
(1073741824<=ta?ta=1073741824:(ta--,ta|=ta>>>1,ta|=ta>>>2,ta|=ta>>>4,ta|=ta>>>8,ta|=ta>>>16,ta++),ta);ja.highWaterMark=Ha}qa=qa<=ja.length?qa:ja.ended?ja.length:(ja.needReadable=!0,0)}return qa}function n(qa){var ja=qa._readableState;T("emitReadable",ja.needReadable,ja.emittedReadable);ja.needReadable=!1;ja.emittedReadable||(T("emitReadable",ja.flowing),ja.emittedReadable=!0,C.nextTick(a,qa))}function a(qa){var ja=qa._readableState;T("emitReadable_",ja.destroyed,ja.length,ja.ended);ja.destroyed||
!ja.length&&!ja.ended||(qa.emit("readable"),ja.emittedReadable=!1);ja.needReadable=!ja.flowing&&!ja.ended&&ja.length<=ja.highWaterMark;p(qa)}function d(qa,ja){ja.readingMore||(ja.readingMore=!0,C.nextTick(k,qa,ja))}function k(qa,ja){for(;!ja.reading&&!ja.ended&&(ja.length<ja.highWaterMark||ja.flowing&&0===ja.length);){var ta=ja.length;if(T("maybeReadMore read 0"),qa.read(0),ta===ja.length)break}ja.readingMore=!1}function b(qa){var ja=qa._readableState;ja.readableListening=0<qa.listenerCount("readable");
ja.resumeScheduled&&!ja.paused?ja.flowing=!0:0<qa.listenerCount("data")&&qa.resume()}function e(qa){T("readable nexttick read 0");qa.read(0)}function l(qa,ja){T("resume",ja.reading);ja.reading||qa.read(0);ja.resumeScheduled=!1;qa.emit("resume");p(qa);ja.flowing&&!ja.reading&&qa.read(0)}function p(qa){var ja=qa._readableState;for(T("flow",ja.flowing);ja.flowing&&null!==qa.read(););}function q(qa,ja){return 0===ja.length?null:(ja.objectMode?ta=ja.buffer.shift():!qa||qa>=ja.length?(ta=ja.decoder?ja.buffer.join(""):
1===ja.buffer.length?ja.buffer.first():ja.buffer.concat(ja.length),ja.buffer.clear()):ta=ja.buffer.consume(qa,ja.decoder),ta);var ta}function u(qa){var ja=qa._readableState;T("endReadable",ja.endEmitted);ja.endEmitted||(ja.ended=!0,C.nextTick(w,ja,qa))}function w(qa,ja){if(T("endReadableNT",qa.endEmitted,qa.length),!qa.endEmitted&&0===qa.length&&(qa.endEmitted=!0,ja.readable=!1,ja.emit("end"),qa.autoDestroy))qa=ja._writableState,(!qa||qa.autoDestroy&&qa.finished)&&ja.destroy()}function y(qa,ja){for(var ta=
0,Ha=qa.length;ta<Ha;ta++)if(qa[ta]===ja)return ta;return-1}if(VW)return cM;VW=!0;var A,C=oh;cM=c;c.ReadableState=g;Wo.EventEmitter;var E=tE,L=Eg.Buffer,I=A$.Uint8Array||function(){},V=ug;var T=V&&V.debuglog?V.debuglog("stream"):function(){};var Y,na,Ba,F=B$;V=WW;var W=XW.getHighWaterMark,P=Xn.codes,S=P.ERR_INVALID_ARG_TYPE,fa=P.ERR_STREAM_PUSH_AFTER_EOF,aa=P.ERR_METHOD_NOT_IMPLEMENTED,oa=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Ng(c,E);var Va=V.errorOrDestroy,lb=["error","close","destroy","pause","resume"];
Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(qa){this._readableState&&(this._readableState.destroyed=qa)}});c.prototype.destroy=V.destroy;c.prototype._undestroy=V.undestroy;c.prototype._destroy=function(qa,ja){ja(qa)};c.prototype.push=function(qa,ja){var ta,Ha=this._readableState;return Ha.objectMode?ta=!0:"string"==typeof qa&&((ja=ja||Ha.defaultEncoding)!==Ha.encoding&&(qa=L.from(qa,ja),
ja=""),ta=!0),h(this,qa,ja,!1,ta)};c.prototype.unshift=function(qa){return h(this,qa,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(qa){Y||(Y=ww.StringDecoder);qa=new Y(qa);this._readableState.decoder=qa;this._readableState.encoding=this._readableState.decoder.encoding;for(var ja=this._readableState.buffer.head,ta="";null!==ja;)ta+=qa.write(ja.data),ja=ja.next;return this._readableState.buffer.clear(),""!==ta&&this._readableState.buffer.push(ta),
this._readableState.length=ta.length,this};return c.prototype.read=function(qa){T("read",qa);qa=parseInt(qa,10);var ja=this._readableState,ta=qa;if(0!==qa&&(ja.emittedReadable=!1),0===qa&&ja.needReadable&&((0!==ja.highWaterMark?ja.length>=ja.highWaterMark:0<ja.length)||ja.ended))return T("read: emitReadable",ja.length,ja.ended),0===ja.length&&ja.ended?u(this):n(this),null;if(0===(qa=m(qa,ja))&&ja.ended)return 0===ja.length&&u(this),null;var Ha,zb=ja.needReadable;return T("need readable",zb),(0===
ja.length||ja.length-qa<ja.highWaterMark)&&T("length less than watermark",zb=!0),ja.ended||ja.reading?T("reading or ended",!1):zb&&(T("do read"),ja.reading=!0,ja.sync=!0,0===ja.length&&(ja.needReadable=!0),this._read(ja.highWaterMark),ja.sync=!1,ja.reading||(qa=m(ta,ja))),null===(Ha=0<qa?q(qa,ja):null)?(ja.needReadable=ja.length<=ja.highWaterMark,qa=0):(ja.length-=qa,ja.awaitDrain=0),0===ja.length&&(ja.ended||(ja.needReadable=!0),ta!==qa&&ja.ended&&u(this)),null!==Ha&&this.emit("data",Ha),Ha},c.prototype._read=
function(qa){Va(this,new aa("_read()"))},c.prototype.pipe=function(qa,ja){function ta(Ca,Ea){T("onunpipe");Ca===Eb&&Ea&&!1===Ea.hasUnpiped&&(Ea.hasUnpiped=!0,T("cleanup"),qa.removeListener("close",Nb),qa.removeListener("finish",Sb),qa.removeListener("drain",dd),qa.removeListener("error",Ub),qa.removeListener("unpipe",ta),Eb.removeListener("end",Ha),Eb.removeListener("end",pc),Eb.removeListener("data",zb),ia=!0,!Lc.awaitDrain||qa._writableState&&!qa._writableState.needDrain||dd())}function Ha(){T("onend");
qa.end()}function zb(Ca){T("ondata");Ca=qa.write(Ca);T("dest.write",Ca);!1===Ca&&((1===Lc.pipesCount&&Lc.pipes===qa||1<Lc.pipesCount&&-1!==y(Lc.pipes,qa))&&!ia&&(T("false write response, pause",Lc.awaitDrain),Lc.awaitDrain++),Eb.pause())}function Ub(Ca){T("onerror",Ca);pc();qa.removeListener("error",Ub);0===qa.listeners("error").length&&Va(qa,Ca)}function Nb(){qa.removeListener("finish",Sb);pc()}function Sb(){T("onfinish");qa.removeListener("close",Nb);pc()}function pc(){T("unpipe");Eb.unpipe(qa)}
var Eb=this,Lc=this._readableState;switch(Lc.pipesCount){case 0:Lc.pipes=qa;break;case 1:Lc.pipes=[Lc.pipes,qa];break;default:Lc.pipes.push(qa)}Lc.pipesCount+=1;T("pipe count=%d opts=%j",Lc.pipesCount,ja);ja=ja&&!1===ja.end||qa===C.stdout||qa===C.stderr?pc:Ha;Lc.endEmitted?C.nextTick(ja):Eb.once("end",ja);qa.on("unpipe",ta);var dd=function(Ca){return function(){var Ea=Ca._readableState;T("pipeOnDrain",Ea.awaitDrain);Ea.awaitDrain&&Ea.awaitDrain--;0===Ea.awaitDrain&&Ca.listeners("data").length&&(Ea.flowing=
!0,p(Ca))}}(Eb);qa.on("drain",dd);var ia=!1;return Eb.on("data",zb),function(Ca,Ea,jb){if("function"==typeof Ca.prependListener)return Ca.prependListener(Ea,jb);Ca._events&&Ca._events[Ea]?Array.isArray(Ca._events[Ea])?Ca._events[Ea].unshift(jb):Ca._events[Ea]=[jb,Ca._events[Ea]]:Ca.on(Ea,jb)}(qa,"error",Ub),qa.once("close",Nb),qa.once("finish",Sb),qa.emit("pipe",Eb),Lc.flowing||(T("pipe resume"),Eb.resume()),qa},c.prototype.unpipe=function(qa){var ja=this._readableState,ta={hasUnpiped:!1};if(0===
ja.pipesCount)return this;if(1===ja.pipesCount)return qa&&qa!==ja.pipes||(qa||(qa=ja.pipes),ja.pipes=null,ja.pipesCount=0,ja.flowing=!1,qa&&qa.emit("unpipe",this,ta)),this;if(!qa){qa=ja.pipes;ta=ja.pipesCount;ja.pipes=null;ja.pipesCount=0;ja.flowing=!1;for(ja=0;ja<ta;ja++)qa[ja].emit("unpipe",this,{hasUnpiped:!1});return this}var Ha=y(ja.pipes,qa);return-1===Ha||(ja.pipes.splice(Ha,1),--ja.pipesCount,1===ja.pipesCount&&(ja.pipes=ja.pipes[0]),qa.emit("unpipe",this,ta)),this},c.prototype.on=function(qa,
ja){ja=E.prototype.on.call(this,qa,ja);var ta=this._readableState;return"data"===qa?(ta.readableListening=0<this.listenerCount("readable"),!1!==ta.flowing&&this.resume()):"readable"===qa&&(ta.endEmitted||ta.readableListening||(ta.readableListening=ta.needReadable=!0,ta.flowing=!1,ta.emittedReadable=!1,T("on readable",ta.length,ta.reading),ta.length?n(this):ta.reading||C.nextTick(e,this))),ja},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(qa,ja){ja=E.prototype.removeListener.call(this,
qa,ja);return"readable"===qa&&C.nextTick(b,this),ja},c.prototype.removeAllListeners=function(qa){var ja=E.prototype.removeAllListeners.apply(this,arguments);return"readable"!==qa&&void 0!==qa||C.nextTick(b,this),ja},c.prototype.resume=function(){var qa=this._readableState;qa.flowing||(T("resume"),qa.flowing=!qa.readableListening,qa.resumeScheduled||(qa.resumeScheduled=!0,C.nextTick(l,this,qa)));return qa.paused=!1,this},c.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),
!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(qa){var ja=this,ta=this._readableState,Ha=!1,zb;for(zb in qa.on("end",function(){if(T("wrapped end"),ta.decoder&&!ta.ended){var Ub=ta.decoder.end();Ub&&Ub.length&&ja.push(Ub)}ja.push(null)}),qa.on("data",function(Ub){(T("wrapped data"),ta.decoder&&(Ub=ta.decoder.write(Ub)),ta.objectMode&&null==Ub)||(ta.objectMode||Ub&&Ub.length)&&(ja.push(Ub)||
(Ha=!0,qa.pause()))}),qa)void 0===this[zb]&&"function"==typeof qa[zb]&&(this[zb]=function(Ub){return function(){return qa[Ub].apply(qa,arguments)}}(zb));for(zb=0;zb<lb.length;zb++)qa.on(lb[zb],this.emit.bind(this,lb[zb]));return this._read=function(Ub){T("wrapped _read",Ub);Ha&&(Ha=!1,qa.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===na&&(na=C$),na(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),
Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(qa){this._readableState&&(this._readableState.flowing=qa)}}),c._fromList=q,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(qa,
ja){return void 0===Ba&&(Ba=OW),Ba(c,qa,ja)}),cM}function YW(){function g(P){var S=this;this.entry=this.next=null;this.finish=function(){var fa=S.entry;for(S.entry=null;fa;){var aa=fa.callback;P.pendingcb--;aa(void 0);fa=fa.next}P.corkedRequestsFree.next=S;!0}}function c(){}function h(P,S,fa){e=e||vE();P=P||{};"boolean"!=typeof fa&&(fa=S instanceof e);this.objectMode=!!P.objectMode;fa&&(this.objectMode=this.objectMode||!!P.writableObjectMode);this.highWaterMark=C(this,P,"writableHighWaterMark",fa);
this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==P.decodeStrings;this.defaultEncoding=P.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){!function(oa,Va){var lb=oa._writableState,qa=lb.sync,ja=lb.writecb;if("function"!=typeof ja)throw new V;(function(ta){ta.writing=!1;ta.writecb=null;ta.length-=ta.writelen;ta.writelen=0}(lb),Va)?!function(ta,Ha,zb,Ub,Nb){--Ha.pendingcb;
zb?(l.nextTick(Nb,Ub),l.nextTick(b,ta,Ha),ta._writableState.errorEmitted=!0,W(ta,Ub)):(Nb(Ub),ta._writableState.errorEmitted=!0,W(ta,Ub),b(ta,Ha))}(oa,lb,qa,Va,ja):((Va=d(lb)||oa.destroyed)||lb.corked||lb.bufferProcessing||!lb.bufferedRequest||a(oa,lb),qa?l.nextTick(n,oa,lb,Va,ja):n(oa,lb,Va,ja))}(S,aa)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==P.emitClose;this.autoDestroy=!!P.autoDestroy;
this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(P){var S=this instanceof(e=e||vE());if(!S&&!y.call(f,this))return new f(P);this._writableState=new h(P,this,S);this.writable=!0;P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final));q.call(this)}function m(P,S,fa,aa,oa,Va,lb){S.writelen=aa;S.writecb=lb;S.writing=!0;
S.sync=!0;S.destroyed?S.onwrite(new Y("write")):fa?P._writev(oa,S.onwrite):P._write(oa,Va,S.onwrite);S.sync=!1}function n(P,S,fa,aa){fa||(0===S.length&&S.needDrain&&(S.needDrain=!1,P.emit("drain")),!0);S.pendingcb--;aa();b(P,S)}function a(P,S){S.bufferProcessing=!0;var fa=S.bufferedRequest;if(P._writev&&fa&&fa.next){var aa=Array(S.bufferedRequestCount),oa=S.corkedRequestsFree;oa.entry=fa;for(var Va=0,lb=!0;fa;)aa[Va]=fa,fa.isBuf||(lb=!1),fa=fa.next,Va+=1;aa.allBuffers=lb;m(P,S,!0,S.length,aa,"",oa.finish);
S.pendingcb++;S.lastBufferedRequest=null;oa.next?(S.corkedRequestsFree=oa.next,oa.next=null):S.corkedRequestsFree=new g(S);S.bufferedRequestCount=0}else{for(;fa&&(aa=fa.chunk,m(P,S,!1,S.objectMode?1:aa.length,aa,fa.encoding,fa.callback),fa=fa.next,S.bufferedRequestCount--,!S.writing););null===fa&&(S.lastBufferedRequest=null)}S.bufferedRequest=fa;S.bufferProcessing=!1}function d(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function k(P,S){P._final(function(fa){S.pendingcb--;
fa&&W(P,fa);S.prefinished=!0;P.emit("prefinish");b(P,S)})}function b(P,S){var fa=d(S),aa;if(aa=fa)S.prefinished||S.finalCalled||("function"!=typeof P._final||S.destroyed?(S.prefinished=!0,P.emit("prefinish")):(S.pendingcb++,S.finalCalled=!0,l.nextTick(k,P,S))),aa=(!0,0===S.pendingcb&&(S.finished=!0,P.emit("finish"),S.autoDestroy));aa&&(S=P._readableState,(!S||S.autoDestroy&&S.endEmitted)&&P.destroy());return fa}if(ZW)return dM;ZW=!0;var e,l=oh;dM=f;f.WritableState=h;var p={deprecate:QW},q=tE,u=Eg.Buffer,
w=D$.Uint8Array||function(){},y,A=WW,C=XW.getHighWaterMark,E=Xn.codes,L=E.ERR_INVALID_ARG_TYPE,I=E.ERR_METHOD_NOT_IMPLEMENTED,V=E.ERR_MULTIPLE_CALLBACK,T=E.ERR_STREAM_CANNOT_PIPE,Y=E.ERR_STREAM_DESTROYED,na=E.ERR_STREAM_NULL_VALUES,Ba=E.ERR_STREAM_WRITE_AFTER_END,F=E.ERR_UNKNOWN_ENCODING,W=A.errorOrDestroy;return Ng(f,q),h.prototype.getBuffer=function(){for(var P=this.bufferedRequest,S=[];P;)S.push(P),P=P.next;return S},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(P){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(P){return!!y.call(this,P)||this===f&&P&&P._writableState instanceof h}})):y=function(P){return P instanceof this},f.prototype.pipe=function(){W(this,new T)},f.prototype.write=function(P,S,fa){var aa,
oa=this._writableState,Va=!1,lb=!oa.objectMode&&(aa=P,u.isBuffer(aa)||aa instanceof w);return lb&&!u.isBuffer(P)&&(P=u.from(P)),"function"==typeof S&&(fa=S,S=null),lb?S="buffer":S||(S=oa.defaultEncoding),"function"!=typeof fa&&(fa=c),oa.ending?function(qa,ja){var ta=new Ba;W(qa,ta);l.nextTick(ja,ta)}(this,fa):(lb||function(qa,ja,ta,Ha){var zb;return null===ta?zb=new na:"string"==typeof ta||ja.objectMode||(zb=new L("chunk",["string","Buffer"],ta)),!zb||(W(qa,zb),l.nextTick(Ha,zb),!1)}(this,oa,P,fa))&&
(oa.pendingcb++,Va=function(qa,ja,ta,Ha,zb,Ub){if(!ta){var Nb=Ha;ja.objectMode||!1===ja.decodeStrings||"string"!=typeof Nb||(Nb=u.from(Nb,zb));Ha!==Nb&&(ta=!0,zb="buffer",Ha=Nb)}var Sb=ja.objectMode?1:Ha.length;ja.length+=Sb;(Nb=ja.length<ja.highWaterMark)||(ja.needDrain=!0);ja.writing||ja.corked?(qa=ja.lastBufferedRequest,ja.lastBufferedRequest={chunk:Ha,encoding:zb,isBuf:ta,callback:Ub,next:null},qa?qa.next=ja.lastBufferedRequest:ja.bufferedRequest=ja.lastBufferedRequest,ja.bufferedRequestCount+=
1):m(qa,ja,!1,Sb,Ha,zb,Ub);return Nb}(this,oa,lb,P,S,fa)),Va},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||a(this,P))},f.prototype.setDefaultEncoding=function(P){if("string"==typeof P&&(P=P.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((P+"").toLowerCase())))throw new F(P);return this._writableState.defaultEncoding=
P,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(P,S,fa){fa(new I("_write()"))},f.prototype._writev=null,f.prototype.end=function(P,S,fa){var aa=this._writableState;"function"==typeof P?(fa=P,P=null,S=null):"function"==typeof S&&(fa=S,S=null);
null!=P&&this.write(P,S);aa.corked&&(aa.corked=1,this.uncork());aa.ending||(P=fa,aa.ending=!0,b(this,aa),P&&(aa.finished?l.nextTick(P):this.once("finish",P)),aa.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=
P)}}),f.prototype.destroy=A.destroy,f.prototype._undestroy=A.undestroy,f.prototype._destroy=function(P,S){S(P)},dM}function vE(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if($W)return eM;$W=!0;var f=oh,m=Object.keys||
function(b){var e=[],l;for(l in b)e.push(l);return e};eM=g;var n=z$(),a=YW();Ng(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),eM}function E$(g,c){var h=this._transformState;h.transforming=!1;var f=
h.writecb;if(null===f)return this.emit("error",new F$);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);f(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function Xo(g){if(!(this instanceof Xo))return new Xo(g);wE.call(this,g);this._transformState={afterTransform:E$.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==
typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",G$)}function G$(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?aX(this,null,null):this._flush(function(c,h){aX(g,c,h)})}function aX(g,c,h){if(c)return g.emit("error",c);if(null!=h&&g.push(h),g._writableState.length)throw new H$;if(g._transformState.transforming)throw new I$;return g.push(null)}function rz(g){if(!(this instanceof rz))return new rz(g);
bX.call(this,g)}function cX(g){if(g)throw g;}function J$(g,c,h,f){f=function(a){var d=!1;return function(){d||(d=!0,a.apply(void 0,arguments))}}(f);var m=!1;g.on("close",function(){m=!0});void 0===fM&&(fM=gM);fM(g,{readable:c,writable:h},function(a){if(a)return f(a);m=!0;f()});var n=!1;return function(a){if(!m&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(f(a||new K$("pipe")),void 0)}}function dX(g){g()}function L$(g,c){return g.pipe(c)}
function an(){hM.call(this||iM)}function xE(){}function fq(g){eX.call(this);this._block=yE.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function xw(){fX.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function zE(g,c){return g<<c|g>>>32-c}function nl(g,c,h,f,m,n,a){return zE(g+(c&h|~c&f)+m+n|0,a)+c|0}function ol(g,c,h,f,m,n,a){return zE(g+(c&f|h&~f)+m+n|0,a)+c|0}function pl(g,c,h,f,m,n,a){return zE(g+(c^h^f)+
m+n|0,a)+c|0}function ql(g,c,h,f,m,n,a){return zE(g+(h^(c|~f))+m+n|0,a)+c|0}function yw(){gX.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function bn(g,c){return g<<c|g>>>32-c}function gq(g,c){(this||bj)._block=hX.alloc(g);(this||bj)._finalSize=c;(this||bj)._blockSize=g;(this||bj)._len=0}function zw(){this.init();(this||Fg)._w=M$;iX.call(this||Fg,64,56)}function sz(){this.init();(this||xi)._w=N$;jX.call(this||xi,64,56)}function tz(){this.init();
(this||yi)._w=O$;kX.call(this||yi,64,56)}function AE(){this.init();(this||Ak)._w=P$;Q$.call(this||Ak,64,56)}function Aw(){this.init();(this||qe)._w=R$;lX.call(this||qe,128,112)}function Bk(g,c){return g>>>0<c>>>0?1:0}function BE(){this.init();(this||di)._w=S$;T$.call(this||di,128,112)}function Ck(g){mX.call(this||sj);(this||sj).hashMode="string"==typeof g;(this||sj).hashMode?(this||sj)[g]=(this||sj)._finalOrDigest:(this||sj).final=(this||sj)._finalOrDigest;(this||sj)._final&&((this||sj).__final=(this||
sj)._final,(this||sj)._final=null);(this||sj)._decoder=null;(this||sj)._encoding=null}function CE(g){nX.call(this,"digest");this._hash=g}function DE(g,c){oX.call(this,"digest");"string"==typeof c&&(c=Nt.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=Nt.concat([c,U$],64));g=this._ipad=Nt.allocUnsafe(64);for(var h=this._opad=Nt.allocUnsafe(64),f=0;64>f;f++)g[f]=54^c[f],h[f]=92^c[f];this._hash=[g]}function uz(g,c){pX.call(this,"digest");"string"==typeof c&&(c=vz.from(c));var h="sha512"===
g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>h)?c=("rmd160"===g?new jM:kM(g)).update(c).digest():c.length<h&&(c=vz.concat([c,V$],h));for(var f=this._ipad=vz.allocUnsafe(h),m=this._opad=vz.allocUnsafe(h),n=0;n<h;n++)f[n]=54^c[n],m[n]=92^c[n];this._hash="rmd160"===g?new jM:kM(g);this._hash.update(f)}function qX(g,c){if("string"!=typeof g&&!W$.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function rX(g,c,h){var f=function(k){function b(e){return X$(k).update(e).digest()}
return"rmd160"===k||"ripemd160"===k?function(e){return(new Y$).update(e).digest()}:"md5"===k?Z$:b}(g),m="sha512"===g||"sha384"===g?128:64;c.length>m?c=f(c):c.length<m&&(c=Yn.concat([c,$$],m));for(var n=Yn.allocUnsafe(m+EE[g]),a=Yn.allocUnsafe(m+EE[g]),d=0;d<m;d++)n[d]=54^c[d],a[d]=92^c[d];c=Yn.allocUnsafe(m+h+4);n.copy(c,0,0,m);(this||Zn).ipad1=c;(this||Zn).ipad2=n;(this||Zn).opad=a;(this||Zn).alg=g;(this||Zn).blocksize=m;(this||Zn).hash=f;(this||Zn).size=EE[g]}function sX(g,c,h,f,m){return wz.importKey("raw",
g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return wz.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:m}},n,f<<3)}).then(function(n){return Bw.from(n)})}function tX(g,c){if(!g)throw Error(c||"Assertion failed");}function vm(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function aaa(){this.tmp=Array(2);this.keys=null}function cn(g){uX.call(this,g);var c=new aaa;this._desState=c;this.deriveKeys(c,g.key)}
function baa(g){caa.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=g[c]}function daa(g,c){eaa.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[wr.create({type:"encrypt",key:h}),wr.create({type:"decrypt",key:f}),wr.create({type:"encrypt",key:c})]:[wr.create({type:"decrypt",key:c}),wr.create({type:"encrypt",key:f}),wr.create({type:"decrypt",key:h})]}function Yo(g){vX.call(this,
g);this._edeState=new daa(this.type,this.options.key)}function FE(g){wX.call(this||GE);var c=g.mode.toLowerCase(),h=xz[c];var f=g.decrypt?"decrypt":"encrypt";var m=g.key;Ot.isBuffer(m)||(m=Ot.from(m));"des-ede"!==c&&"des-ede-cbc"!==c||(m=Ot.concat([m,m.slice(0,8)]));g=g.iv;Ot.isBuffer(g)||(g=Ot.from(g));(this||GE)._des=h.create({key:m,iv:g,type:f})}function xX(g,c,h){var f=c.length,m=faa(c,g._cache);return g._cache=g._cache.slice(f),g._prev=yz.concat([g._prev,h?c:m]),m}function gaa(g){return g._prev=
g._cipher.encryptBlock(g._prev),g._prev}function lM(g){HE.isBuffer(g)||(g=HE.from(g));for(var c=g.length/4|0,h=Array(c),f=0;f<c;f++)h[f]=g.readUInt32BE(4*f);return h}function mM(g){for(;0<g.length;g++)g[0]=0}function yX(g,c,h,f,m){var n=h[0],a=h[1],d=h[2];h=h[3];var k=g[0]^c[0],b=g[1]^c[1],e=g[2]^c[2];g=g[3]^c[3];for(var l=4,p=1;p<m;p++){var q=n[k>>>24]^a[b>>>16&255]^d[e>>>8&255]^h[255&g]^c[l++];var u=n[b>>>24]^a[e>>>16&255]^d[g>>>8&255]^h[255&k]^c[l++];var w=n[e>>>24]^a[g>>>16&255]^d[k>>>8&255]^
h[255&b]^c[l++];var y=n[g>>>24]^a[k>>>16&255]^d[b>>>8&255]^h[255&e]^c[l++];k=q;b=u;e=w;g=y}return q=(f[k>>>24]<<24|f[b>>>16&255]<<16|f[e>>>8&255]<<8|f[255&g])^c[l++],u=(f[b>>>24]<<24|f[e>>>16&255]<<16|f[g>>>8&255]<<8|f[255&k])^c[l++],w=(f[e>>>24]<<24|f[g>>>16&255]<<16|f[k>>>8&255]<<8|f[255&b])^c[l++],y=(f[g>>>24]<<24|f[k>>>16&255]<<16|f[b>>>8&255]<<8|f[255&e])^c[l++],[q>>>0,u>>>0,w>>>0,y>>>0]}function dn(g){(this||en)._key=lM(g);this._reset()}function zX(g){var c=Cw.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>
0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>0,12),c}function zz(g){(this||Zk).h=g;(this||Zk).state=Cw.alloc(16,0);(this||Zk).cache=Cw.allocUnsafe(0)}function xr(g,c,h,f){AX.call(this||vg);var m=$l.alloc(4,0);(this||vg)._cipher=new haa.AES(c);var n=(this||vg)._cipher.encryptBlock(m);(this||vg)._ghash=new BX(n);c=this||vg;m=h;if(12===m.length)c=(c._finID=$l.concat([m,$l.from([0,0,0,1])]),$l.concat([m,$l.from([0,0,0,2])]));else{h=new BX(n);n=m.length;var a=n%16;
h.update(m);a&&(a=16-a,h.update($l.alloc(a,0)));h.update($l.alloc(8,0));m=8*n;n=$l.alloc(8);n.writeUIntBE(m,0,8);h.update(n);c._finID=h.state;c=$l.from(c._finID);c=(iaa(c),c)}(this||vg)._prev=$l.from(c);(this||vg)._cache=$l.allocUnsafe(0);(this||vg)._secCache=$l.allocUnsafe(0);(this||vg)._decrypt=f;(this||vg)._alen=0;(this||vg)._len=0;(this||vg)._mode=g;(this||vg)._authTag=null;(this||vg)._called=!1}function Az(g,c,h,f){CX.call(this||$n);(this||$n)._cipher=new jaa.AES(c);(this||$n)._prev=nM.from(h);
(this||$n)._cache=nM.allocUnsafe(0);(this||$n)._secCache=nM.allocUnsafe(0);(this||$n)._decrypt=f;(this||$n)._mode=g}function Bz(g,c,h){DX.call(this||ei);(this||ei)._cache=new IE;(this||ei)._last=void 0;(this||ei)._cipher=new kaa.AES(c);(this||ei)._prev=Dw.from(h);(this||ei)._mode=g;(this||ei)._autopadding=!0}function IE(){(this||ei).cache=Dw.allocUnsafe(0)}function EX(g,c,h){g=FX[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=Dw.from(h)),"GCM"!==g.mode&&
h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=Dw.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===g.type?new laa(g.module,c,h,!0):"auth"===g.type?new maa(g.module,c,h,!0):new Bz(g.module,c,h)}function Cz(g,c,h){GX.call(this||Ji);(this||Ji)._cache=new JE;(this||Ji)._cipher=new naa.AES(c);(this||Ji)._prev=hq.from(h);(this||Ji)._mode=g;(this||Ji)._autopadding=!0}function JE(){(this||Ji).cache=hq.allocUnsafe(0)}
function HX(g,c,h){g=IX[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=hq.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=hq.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===g.type?new oaa(g.module,c,h):"auth"===g.type?new paa(g.module,c,h):new Cz(g.module,c,h)}function oM(g,c,h){if(g=g.toLowerCase(),yr[g])return pM.createCipheriv(g,c,h);
if(iq[g])return new JX({key:c,iv:h,mode:g});throw new TypeError("invalid suite type");}function qM(g,c,h){if(g=g.toLowerCase(),yr[g])return pM.createDecipheriv(g,c,h);if(iq[g])return new JX({key:c,iv:h,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function zr(g){(this||KE).rand=g}function Ar(g){(this||KX).rand=g||new qaa.Rand}function rM(g){if(null!==sM)var c=sM;else{c=[2];for(var h=1,f=3;1048576>f;f+=2){for(var m=Math.ceil(Math.sqrt(f)),n=0;n<h&&c[n]<=m&&0!=f%c[n];n++);h!==n&&c[n]<=
m||(c[h++]=f)}c=(sM=c,c)}for(h=0;h<c.length;h++)if(0===g.modn(c[h]))return 0===g.cmpn(c[h]);return!0}function tM(g){var c=rl.mont(g);return 0===uM.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function Dz(g,c){if(16>g)return new rl(2===c||5===c?[140,123]:[140,39]);var h,f;for(c=new rl(c);;){for(h=new rl(raa(Math.ceil(g/8)));h.bitLength()>g;)h.ishrn(1);if(h.isEven()&&h.iadd(saa),h.testn(1)||h.iadd(uM),c.cmp(uM)){if(!c.cmp(taa))for(;h.mod(uaa).cmp(vaa);)h.iadd(LX)}else for(;h.mod(waa).cmp(xaa);)h.iadd(LX);
if(rM(f=h.shrn(1))&&rM(h)&&tM(f)&&tM(h)&&MX.test(f)&&MX.test(h))return h}}function yaa(g,c){return c=c||"utf8",Zo.isBuffer(g)||(g=new Zo(g,c)),(this||Ih)._pub=new fn(g),this||Ih}function zaa(g,c){return c=c||"utf8",Zo.isBuffer(g)||(g=new Zo(g,c)),(this||Ih)._priv=new fn(g),this||Ih}function ao(g,c,h){this.setGenerator(c);(this||Ih).__prime=new fn(g);(this||Ih)._prime=fn.mont((this||Ih).__prime);(this||Ih)._primeLen=g.length;(this||Ih)._pub=void 0;(this||Ih)._priv=void 0;(this||Ih)._primeCode=void 0;
h?((this||Ih).setPublicKey=yaa,(this||Ih).setPrivateKey=zaa):(this||Ih)._primeCode=8}function LE(g,c){g=new Zo(g.toArray());return c?g.toString(c):g}function ME(g,c){var h=NX(c);var f=h.toRed(Br.mont(c.modulus)).redPow(new Br(c.publicExponent)).fromRed();h=h.invm(c.modulus);var m=c.modulus.byteLength();g=(Br.mont(c.modulus),(new Br(g)).mul(f).umod(c.modulus));var n=g.toRed(Br.mont(c.prime1)),a=g.toRed(Br.mont(c.prime2));f=c.coefficient;var d=c.prime1;g=c.prime2;n=n.redPow(c.exponent1);a=a.redPow(c.exponent2);
n=n.fromRed();a=a.fromRed();f=n.isub(a).imul(f).umod(d);return f.imul(g),a.iadd(f),new Aaa(a.imul(h).umod(c.modulus).toArray(!1,m))}function NX(g){for(var c=g.modulus.byteLength(),h=new Br(OX(c));0<=h.cmp(g.modulus)||!h.umod(g.prime1)||!h.umod(g.prime2);)h=new Br(OX(c));return h}function PX(g){return 1===g.length?"0"+g:g}function QX(g){for(var c="",h=0;h<g.length;h++)c+=PX(g[h].toString(16));return c}function Pt(g,c){if(g instanceof Pt)return g;this._importDER(g,c)||(Baa(g.r&&g.s,"Signature without r or s"),
this.r=new NE(g.r,16),this.s=new NE(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function Caa(){this.place=0}function vM(g,c){var h=g[c.place++];if(!(128&h))return h;h&=15;for(var f=0,m=0,n=c.place;m<h;m++,n++)f<<=8,f|=g[n];return c.place=n,f}function RX(g){for(var c=0,h=g.length-1;!(g[c]||128&g[c+1])&&c<h;)c++;return 0===c?g:g.slice(c)}function wM(g,c){if(128>c)return g.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|h);--h;)g.push(c>>>
(h<<3)&255);g.push(c)}function SX(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function TX(g){return 1===g.length?"0"+g:g}function UX(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function OE(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function gn(){if(!(this instanceof gn))return new gn;VX.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=Daa;this.W=Array(160)}function bo(){if(!(this instanceof bo))return new bo;WX.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=Eaa;this.W=Array(64)}function $o(){if(!(this instanceof $o))return new $o;XX.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function jq(){if(!(this instanceof jq))return new jq;YX.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function kq(){if(!(this instanceof kq))return new kq;ZX.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function ap(){if(!(this instanceof ap))return new ap;$X.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function aY(g,c,h,f){return 15>=g?c^h^f:31>=g?c&h|~c&f:47>=g?(c|~h)^f:63>=g?c&f|h&~f:c^(h|~f)}function Ew(g,c,h){if(!(this instanceof Ew))return new Ew(g,c,h);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=
this.inner=null;this._init(Faa.toArray(c,h))}function lq(g){if(!(this instanceof lq))return new lq(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=Qt.toArray(g.entropy,g.entropyEnc||"hex"),h=Qt.toArray(g.nonce,g.nonceEnc||"hex");g=Qt.toArray(g.pers,g.persEnc||"hex");bY(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,h,g)}function co(g,c){this.type=g;this.p=new Rt(c.p,16);this.red=c.prime?Rt.red(c.prime):Rt.mont(this.p);this.zero=(new Rt(0)).toRed(this.red);this.one=(new Rt(1)).toRed(this.red);this.two=(new Rt(2)).toRed(this.red);this.n=c.n&&new Rt(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function hn(g,c){this.curve=g;this.type=c;this.precomputed=null}function jn(g){Fw.call(this,"short",g);this.a=(new tj(g.a,16)).toRed(this.red);this.b=(new tj(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Dk(g,c,h,f){Fw.BasePoint.call(this,g,"affine");null===c&&null===
h?(this.x=null,this.y=null,this.inf=!0):(this.x=new tj(c,16),this.y=new tj(h,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function $k(g,c,h,f){Fw.BasePoint.call(this,g,"jacobian");null===c&&null===h&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new tj(0)):(this.x=new tj(c,16),this.y=new tj(h,16),this.z=new tj(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function Gw(g){PE.call(this,"mont",g);this.a=(new Hw(g.a,16)).toRed(this.red);this.b=(new Hw(g.b,16)).toRed(this.red);this.i4=(new Hw(4)).toRed(this.red).redInvm();this.two=(new Hw(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Ek(g,c,h){PE.BasePoint.call(this,g,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new Hw(c,16),this.z=new Hw(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function bp(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);QE.call(this,"edwards",g);this.a=(new mq(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new mq(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new mq(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Gaa(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|g.c)}function Ti(g,c,h,f,m){QE.BasePoint.call(this,g,"projective");null===c&&null===h&&null===f?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new mq(c,16),this.y=new mq(h,16),this.z=f?new mq(f,16):this.curve.one,this.t=m&&new mq(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function cY(g){"short"===g.type?this.curve=new xM.short(g):"edwards"===g.type?this.curve=new xM.edwards(g):this.curve=new xM.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;dY(this.g.validate(),"Invalid curve");dY(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function Cr(g,c){Object.defineProperty(yM,g,{configurable:!0,enumerable:!0,
get:function(){var h=new cY(c);return Object.defineProperty(yM,g,{configurable:!0,enumerable:!0,value:h}),h}})}function Fk(g,c){this.ec=g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function kn(g){if(!(this instanceof kn))return new kn(g);"string"==typeof g&&(eY(zM.hasOwnProperty(g),"Unknown curve "+g),g=zM[g]);g instanceof zM.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function dk(g,c){this.eddsa=g;this._secret=fY(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=fY(c.pub)}function Dr(g,c){this.eddsa=g;"object"!=typeof c&&(c=Haa(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Iaa(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Jaa&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function am(g){if(Kaa("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof am))return new am(g);this.curve=g=Laa[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Maa.sha512}function ln(g){(this||ek)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function Iw(g,c){(this||ek).path=g;this.rethrow(c)}function gY(){function g(n,
a){if(f.call(this||hg,a),!m.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||hg).base=n;(this||hg).offset=0;(this||hg).length=n.length}function c(n,a){if(Array.isArray(n))(this||hg).length=0,(this||hg).value=n.map(function(d){return d instanceof c||(d=new c(d,a)),(this||hg).length+=d.length,d},this||hg);else if("number"==typeof n){if(!(0<=n&&255>=n))return a.error("non-byte EncoderBuffer value");(this||hg).value=n;(this||hg).length=1}else if("string"==typeof n)(this||hg).value=n,(this||
hg).length=m.byteLength(n);else{if(!m.isBuffer(n))return a.error("Unsupported type: "+typeof n);(this||hg).value=n;(this||hg).length=n.length}}if(hY)return RE;hY=!0;var h=Ng,f=Ez().Reporter,m=Eg.Buffer;return h(g,f),RE.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||hg).offset,reporter:f.prototype.save.call(this||hg)}},g.prototype.restore=function(n){var a=new g((this||hg).base);return a.offset=n.offset,a.length=(this||hg).offset,(this||hg).offset=n.offset,f.prototype.restore.call(this||
hg,n.reporter),a},g.prototype.isEmpty=function(){return(this||hg).offset===(this||hg).length},g.prototype.readUInt8=function(n){return(this||hg).offset+1<=(this||hg).length?(this||hg).base.readUInt8((this||hg).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=function(n,a){if(!((this||hg).offset+n<=(this||hg).length))return this.error(a||"DecoderBuffer overrun");a=new g((this||hg).base);return a._reporterState=(this||hg)._reporterState,a.offset=(this||hg).offset,a.length=(this||
hg).offset+n,(this||hg).offset+=n,a},g.prototype.raw=function(n){return(this||hg).base.slice(n?n.offset:(this||hg).offset,(this||hg).length)},RE.EncoderBuffer=c,c.prototype.join=function(n,a){return n||(n=new m((this||hg).length)),a||(a=0),0===(this||hg).length||(Array.isArray((this||hg).value)?(this||hg).value.forEach(function(d){d.join(n,a);a+=d.length}):("number"==typeof(this||hg).value?n[a]=(this||hg).value:"string"==typeof(this||hg).value?n.write((this||hg).value,a):m.isBuffer((this||hg).value)&&
(this||hg).value.copy(n,a),a+=(this||hg).length)),n},RE}function Ez(){if(iY)return AM;iY=!0;var g=AM;return g.Reporter=jY.Reporter,g.DecoderBuffer=gY().DecoderBuffer,g.EncoderBuffer=gY().EncoderBuffer,g.Node=function(){function c(b,e){var l={};(this||Ef)._baseState=l;l.enc=b;l.parent=e||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(kY)return BM;kY=!0;var h=Ez().Reporter,f=Ez().EncoderBuffer,m=Ez().DecoderBuffer,n=mn,a="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),d="key obj use optional explicit implicit def choice any contains".split(" ").concat(a);BM=c;var k="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var b=(this||Ef)._baseState,e={};k.forEach(function(p){e[p]=b[p]});var l=new (this||Ef).constructor(e.parent);return l._baseState=e,l},c.prototype._wrap=function(){var b=(this||Ef)._baseState;d.forEach(function(e){(this||Ef)[e]=function(){var l=new (this||Ef).constructor(this||Ef);return b.children.push(l),l[e].apply(l,arguments)}},this||Ef)},c.prototype._init=function(b){var e=(this||Ef)._baseState;n(null===e.parent);b.call(this||Ef);e.children=e.children.filter(function(l){return l._baseState.parent===
(this||Ef)},this||Ef);n.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(b){var e=(this||Ef)._baseState,l=b.filter(function(p){return p instanceof(this||Ef).constructor},this||Ef);b=b.filter(function(p){return!(p instanceof(this||Ef).constructor)},this||Ef);0!==l.length&&(n(null===e.children),e.children=l,l.forEach(function(p){p._baseState.parent=this||Ef},this||Ef));0!==b.length&&(n(null===e.args),e.args=b,e.reverseArgs=b.map(function(p){if("object"!=
typeof p||p.constructor!==Object)return p;var q={};return Object.keys(p).forEach(function(u){u==(0|u)&&(u|=0);q[p[u]]=u}),q}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(b){c.prototype[b]=function(){throw Error(b+" not implemented for encoding: "+(this||Ef)._baseState.enc);}}),a.forEach(function(b){c.prototype[b]=function(){var e=
(this||Ef)._baseState,l=Array.prototype.slice.call(arguments);return n(null===e.tag),e.tag=b,this._useArgs(l),this||Ef}}),c.prototype.use=function(b){n(b);var e=(this||Ef)._baseState;return n(null===e.use),e.use=b,this||Ef},c.prototype.optional=function(){return(this||Ef)._baseState.optional=!0,this||Ef},c.prototype.def=function(b){var e=(this||Ef)._baseState;return n(null===e.default),e.default=b,e.optional=!0,this||Ef},c.prototype.explicit=function(b){var e=(this||Ef)._baseState;return n(null===
e.explicit&&null===e.implicit),e.explicit=b,this||Ef},c.prototype.implicit=function(b){var e=(this||Ef)._baseState;return n(null===e.explicit&&null===e.implicit),e.implicit=b,this||Ef},c.prototype.obj=function(){var b=(this||Ef)._baseState,e=Array.prototype.slice.call(arguments);return b.obj=!0,0!==e.length&&this._useArgs(e),this||Ef},c.prototype.key=function(b){var e=(this||Ef)._baseState;return n(null===e.key),e.key=b,this||Ef},c.prototype.any=function(){return(this||Ef)._baseState.any=!0,this||
Ef},c.prototype.choice=function(b){var e=(this||Ef)._baseState;return n(null===e.choice),e.choice=b,this._useArgs(Object.keys(b).map(function(l){return b[l]})),this||Ef},c.prototype.contains=function(b){var e=(this||Ef)._baseState;return n(null===e.use),e.contains=b,this||Ef},c.prototype._decode=function(b,e){var l=(this||Ef)._baseState;if(null===l.parent)return b.wrapResult(l.children[0]._decode(b,e));var p,q=l.default,u=!0,w=null;if(null!==l.key&&(w=b.enterKey(l.key)),l.optional){var y=null;if(null!==
l.explicit?y=l.explicit:null!==l.implicit?y=l.implicit:null!==l.tag&&(y=l.tag),null!==y||l.any){if(u=this._peekTag(b,y,l.any),b.isError(u))return u}else{var A=b.save();try{null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),u=!0}catch(E){u=!1}b.restore(A)}}if(l.obj&&u&&(p=b.enterObject()),u){if(null!==l.explicit){y=this._decodeTag(b,l.explicit);if(b.isError(y))return y;b=y}y=b.offset;if(null===l.use&&null===l.choice){l.any&&(A=b.save());var C=this._decodeTag(b,null!==l.implicit?
l.implicit:l.tag,l.any);if(b.isError(C))return C;l.any?q=b.raw(A):b=C}if(e&&e.track&&null!==l.tag&&e.track(b.path(),y,b.length,"tagged"),e&&e.track&&null!==l.tag&&e.track(b.path(),b.offset,b.length,"content"),q=l.any?q:null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),b.isError(q))return q;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(E){E._decode(b,e)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(q=new m(q),q=this._getUse(l.contains,b._reporterState.obj)._decode(q,
e))}return l.obj&&u&&(q=b.leaveObject(p)),null===l.key||null===q&&!0!==u?null!==w&&b.exitKey(w):b.leaveKey(w,l.key,q),q},c.prototype._decodeGeneric=function(b,e,l){var p=(this||Ef)._baseState;return"seq"===b||"set"===b?null:"seqof"===b||"setof"===b?this._decodeList(e,b,p.args[0],l):/str$/.test(b)?this._decodeStr(e,b,l):"objid"===b&&p.args?this._decodeObjid(e,p.args[0],p.args[1],l):"objid"===b?this._decodeObjid(e,null,null,l):"gentime"===b||"utctime"===b?this._decodeTime(e,b,l):"null_"===b?this._decodeNull(e,
l):"bool"===b?this._decodeBool(e,l):"objDesc"===b?this._decodeStr(e,b,l):"int"===b||"enum"===b?this._decodeInt(e,p.args&&p.args[0],l):null!==p.use?this._getUse(p.use,e._reporterState.obj)._decode(e,l):e.error("unknown tag: "+b)},c.prototype._getUse=function(b,e){var l=(this||Ef)._baseState;return l.useDecoder=this._use(b,e),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},c.prototype._decodeChoice=function(b,e){var l=(this||Ef)._baseState,p=null,q=!1;return Object.keys(l.choice).some(function(u){var w=b.save(),y=l.choice[u];try{var A=y._decode(b,e);if(b.isError(A))return!1;p={type:u,value:A};q=!0}catch(C){return b.restore(w),!1}return!0},this||Ef),q?p:b.error("Choice not matched")},c.prototype._createEncoderBuffer=function(b){return new f(b,(this||Ef).reporter)},c.prototype._encode=function(b,e,l){var p=(this||Ef)._baseState;if(null===p.default||
p.default!==b)if(b=this._encodeValue(b,e,l),void 0!==b&&!this._skipDefault(b,e,l))return b},c.prototype._encodeValue=function(b,e,l){var p=(this||Ef)._baseState;if(null===p.parent)return p.children[0]._encode(b,e||new h);var q=null;if((this||Ef).reporter=e,p.optional&&void 0===b){if(null===p.default)return;b=p.default}var u=null,w=!1;if(p.any)q=this._createEncoderBuffer(b);else if(p.choice)q=this._encodeChoice(b,e);else if(p.contains)u=this._getUse(p.contains,l)._encode(b,e),w=!0;else if(p.children)u=
p.children.map(function(A){if("null_"===A._baseState.tag)return A._encode(null,e,b);if(null===A._baseState.key)return e.error("Child should have a key");var C=e.enterKey(A._baseState.key);if("object"!=typeof b)return e.error("Child expected, but input is not object");A=A._encode(b[A._baseState.key],e,b);return e.leaveKey(C),A},this||Ef).filter(function(A){return A}),u=this._createEncoderBuffer(u);else if("seqof"===p.tag||"setof"===p.tag){if(!p.args||1!==p.args.length)return e.error("Too many args for : "+
p.tag);if(!Array.isArray(b))return e.error("seqof/setof, but data is not Array");u=this.clone();u._baseState.implicit=null;u=this._createEncoderBuffer(b.map(function(A){return this._getUse((this||Ef)._baseState.args[0],b)._encode(A,e)},u))}else null!==p.use?q=this._getUse(p.use,l)._encode(b,e):(u=this._encodePrimitive(p.tag,b),w=!0);if(!p.any&&null===p.choice){l=null!==p.implicit?p.implicit:p.tag;var y=null===p.implicit?"universal":"context";null===l?null===p.use&&e.error("Tag could be omitted only for .use()"):
null===p.use&&(q=this._encodeComposite(l,w,y,u))}return null!==p.explicit&&(q=this._encodeComposite(p.explicit,!1,"context",q)),q},c.prototype._encodeChoice=function(b,e){var l=(this||Ef)._baseState,p=l.choice[b.type];return p||n(!1,b.type+" not found in "+JSON.stringify(Object.keys(l.choice))),p._encode(b.value,e)},c.prototype._encodePrimitive=function(b,e){var l=(this||Ef)._baseState;if(/str$/.test(b))return this._encodeStr(e,b);if("objid"===b&&l.args)return this._encodeObjid(e,l.reverseArgs[0],
l.args[1]);if("objid"===b)return this._encodeObjid(e,null,null);if("gentime"===b||"utctime"===b)return this._encodeTime(e,b);if("null_"===b)return this._encodeNull();if("int"===b||"enum"===b)return this._encodeInt(e,l.args&&l.reverseArgs[0]);if("bool"===b)return this._encodeBool(e);if("objDesc"===b)return this._encodeStr(e,b);throw Error("Unsupported tag: "+b);},c.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},c.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(b)},
BM}(),AM}function lY(){if(mY)return CM;mY=!0;var g=CM;return g._reverse=function(c){var h={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);h[c[f]]=f}),h},g.der=function(){if(nY)return Er;nY=!0;var c=lY();return Er.tagClass={0:"universal",1:"application",2:"context",3:"private"},Er.tagClassByName=c._reverse(Er.tagClass),Er.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},Er.tagByName=c._reverse(Er.tag),Er}(),CM}function oY(){function g(b){(this||Fr).enc="der";(this||Fr).name=b.name;(this||Fr).entity=b;(this||Fr).tree=new c;(this||Fr).tree._init(b.body)}function c(b){a.Node.call(this||Fr,"der",b)}function h(b,e){var l=b.readUInt8(e);if(b.isError(l))return l;var p=k.tagClass[l>>6],q=0==(32&
l);if(31==(31&l)){var u=l;for(l=0;128==(128&u);){if(u=b.readUInt8(e),b.isError(u))return u;l<<=7;l|=127&u}}else l&=31;return{cls:p,primitive:q,tag:l,tagStr:k.tag[l]}}function f(b,e,l){var p=b.readUInt8(l);if(b.isError(p))return p;if(!e&&128===p)return null;if(0==(128&p))return p;e=127&p;if(4<e)return b.error("length octect is too long");for(var q=p=0;q<e;q++){p<<=8;var u=b.readUInt8(l);if(b.isError(u))return u;p|=u}return p}if(pY)return DM;pY=!0;var m=Ng,n=SE(),a=n.base,d=n.bignum,k=n.constants.der;
return DM=g,g.prototype.decode=function(b,e){return b instanceof a.DecoderBuffer||(b=new a.DecoderBuffer(b,e)),(this||Fr).tree._decode(b,e)},m(c,a.Node),c.prototype._peekTag=function(b,e,l){if(b.isEmpty())return!1;var p=b.save(),q=h(b,'Failed to peek tag: "'+e+'"');return b.isError(q)?q:(b.restore(p),q.tag===e||q.tagStr===e||q.tagStr+"of"===e||l)},c.prototype._decodeTag=function(b,e,l){var p=h(b,'Failed to decode tag of "'+e+'"');if(b.isError(p))return p;var q=f(b,p.primitive,'Failed to get length of "'+
e+'"');if(b.isError(q))return q;if(!l&&p.tag!==e&&p.tagStr!==e&&p.tagStr+"of"!==e)return b.error('Failed to match tag: "'+e+'"');if(p.primitive||null!==q)return b.skip(q,'Failed to match body of: "'+e+'"');l=b.save();p=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+(this||Fr).tag+'"');return b.isError(p)?p:(q=b.offset-l.offset,b.restore(l),b.skip(q,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(b,e){for(;;){var l=h(b,e);if(b.isError(l))return l;var p,q=f(b,
l.primitive,e);if(b.isError(q))return q;if(p=l.primitive||null!==q?b.skip(q):this._skipUntilEnd(b,e),b.isError(p))return p;if("end"===l.tagStr)break}},c.prototype._decodeList=function(b,e,l,p){for(e=[];!b.isEmpty();){var q=this._peekTag(b,"end");if(b.isError(q))return q;var u=l.decode(b,"der",p);if(b.isError(u)&&q)break;e.push(u)}return e},c.prototype._decodeStr=function(b,e){if("bitstr"===e)return e=b.readUInt8(),b.isError(e)?e:{unused:e,data:b.raw()};if("bmpstr"===e){e=b.raw();if(1==e.length%2)return b.error("Decoding of string type: bmpstr length mismatch");
b="";for(var l=0;l<e.length/2;l++)b+=String.fromCharCode(e.readUInt16BE(2*l));return b}return"numstr"===e?(e=b.raw().toString("ascii"),this._isNumstr(e)?e:b.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?b.raw():"printstr"===e?(e=b.raw().toString("ascii"),this._isPrintstr(e)?e:b.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?b.raw().toString():b.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=
function(b,e,l){for(var p=[],q=0;!b.isEmpty();){var u=b.readUInt8();q<<=7;q|=127&u;0==(128&u)&&(p.push(q),q=0)}128&u&&p.push(q);b=p[0]/40|0;q=p[0]%40;if(l=l?p:[b,q].concat(p.slice(1)),e)p=e[l.join(" ")],void 0===p&&(p=e[l.join(".")]),void 0!==p&&(l=p);return l},c.prototype._decodeTime=function(b,e){var l=b.raw().toString();if("gentime"===e){b=0|l.slice(0,4);e=0|l.slice(4,6);var p=0|l.slice(6,8),q=0|l.slice(8,10),u=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==e)return b.error("Decoding "+
e+" time is not supported yet");b=0|l.slice(0,2);e=0|l.slice(2,4);p=0|l.slice(4,6);q=0|l.slice(6,8);u=0|l.slice(8,10);l=0|l.slice(10,12);b=70>b?2E3+b:1900+b}return Date.UTC(b,e-1,p,q,u,l,0)},c.prototype._decodeNull=function(b){return null},c.prototype._decodeBool=function(b){var e=b.readUInt8();return b.isError(e)?e:0!==e},c.prototype._decodeInt=function(b,e){b=b.raw();b=new d(b);return e&&(b=e[b.toString(10)]||b),b},c.prototype._use=function(b,e){return"function"==typeof b&&(b=b(e)),b._getDecoder("der").tree},
DM}function Naa(){if(qY)return EM;qY=!0;var g=EM;return g.der=oY(),g.pem=function(){function c(n){m.call(this||FM,n);(this||FM).enc="pem"}if(rY)return GM;rY=!0;var h=Ng,f=Eg.Buffer,m=oY();return h(c,m),GM=c,c.prototype.decode=function(n,a){n=n.toString().split(/[\r\n]+/g);for(var d=a.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/,b=-1,e=-1,l=0;l<n.length;l++){var p=n[l].match(k);if(null!==p&&p[2]===d){if(-1!==b){if("END"!==p[1])break;e=l;break}if("BEGIN"!==p[1])break;b=l}}if(-1===b||-1===
e)throw Error("PEM section not found for: "+d);n=n.slice(b+1,e).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new f(n,"base64");return m.prototype.decode.call(this||FM,n,a)},GM}(),EM}function sY(){function g(k){(this||fk).enc="der";(this||fk).name=k.name;(this||fk).entity=k;(this||fk).tree=new c;(this||fk).tree._init(k.body)}function c(k){a.Node.call(this||fk,"der",k)}function h(k){return 10>k?"0"+k:k}if(tY)return HM;tY=!0;var f=Ng,m=Eg.Buffer,n=SE(),a=n.base,d=n.constants.der;return HM=g,g.prototype.encode=
function(k,b){return(this||fk).tree._encode(k,b).join()},f(c,a.Node),c.prototype._encodeComposite=function(k,b,e,l){var p;a:{var q=k;k=(this||fk).reporter;"seqof"===q?q="seq":"setof"===q&&(q="set");if(d.tagByName.hasOwnProperty(q))q=d.tagByName[q];else if("number"!=typeof q||(0|q)!==q){e=k.error("Unknown tag: "+q);break a}31<=q?e=k.error("Multi-octet tag encoding unsupported"):(b||(q|=32),e=q|d.tagClassByName[e||"universal"]<<6)}if(128>l.length)return(p=new m(2))[0]=e,p[1]=l.length,this._createEncoderBuffer([p,
l]);k=1;for(b=l.length;256<=b;b>>=8)k++;(p=new m(2+k))[0]=e;p[1]=128|k;b=1+k;for(e=l.length;0<e;b--,e>>=8)p[b]=255&e;return this._createEncoderBuffer([p,l])},c.prototype._encodeStr=function(k,b){if("bitstr"===b)return this._createEncoderBuffer([0|k.unused,k.data]);if("bmpstr"===b){b=new m(2*k.length);for(var e=0;e<k.length;e++)b.writeUInt16BE(k.charCodeAt(e),2*e);return this._createEncoderBuffer(b)}return"numstr"===b?this._isNumstr(k)?this._createEncoderBuffer(k):(this||fk).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===b?this._isPrintstr(k)?this._createEncoderBuffer(k):(this||fk).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(b)||"objDesc"===b?this._createEncoderBuffer(k):(this||fk).reporter.error("Encoding of string type: "+b+" unsupported")},c.prototype._encodeObjid=function(k,b,e){if("string"==typeof k){if(!b)return(this||
fk).reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(k))return(this||fk).reporter.error("objid not found in values map");k=b[k].split(/[\s\.]+/g);for(b=0;b<k.length;b++)k[b]|=0}else if(Array.isArray(k))for(k=k.slice(),b=0;b<k.length;b++)k[b]|=0;if(!Array.isArray(k))return(this||fk).reporter.error("objid() should be either array or string, got: "+JSON.stringify(k));if(!e){if(40<=k[1])return(this||fk).reporter.error("Second objid identifier OOB");k.splice(0,2,40*k[0]+
k[1])}var l=0;for(b=0;b<k.length;b++)for(e=k[b],l++;128<=e;e>>=7)l++;l=new m(l);var p=l.length-1;for(b=k.length-1;0<=b;b--)for(e=k[b],l[p--]=127&e;0<(e>>=7);)l[p--]=128|127&e;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(k,b){var e;k=new Date(k);return"gentime"===b?e=[h(k.getFullYear()),h(k.getUTCMonth()+1),h(k.getUTCDate()),h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):"utctime"===b?e=[h(k.getFullYear()%100),h(k.getUTCMonth()+1),h(k.getUTCDate()),
h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):(this||fk).reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(e,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(k,b){if("string"==typeof k){if(!b)return(this||fk).reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(k))return(this||fk).reporter.error("Values map doesn't contain: "+JSON.stringify(k));k=b[k]}"number"==
typeof k||m.isBuffer(k)||(b=k.toArray(),!k.sign&&128&b[0]&&b.unshift(0),k=new m(b));if(m.isBuffer(k)){var e=k.length;0===k.length&&e++;e=new m(e);return k.copy(e),0===k.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>k)return this._createEncoderBuffer(k);if(256>k)return this._createEncoderBuffer([0,k]);e=1;for(b=k;256<=b;b>>=8)e++;for(b=(e=Array(e)).length-1;0<=b;b--)e[b]=255&k,k>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new m(e))},c.prototype._encodeBool=function(k){return this._createEncoderBuffer(k?
255:0)},c.prototype._use=function(k,b){return"function"==typeof k&&(k=k(b)),k._getEncoder("der").tree},c.prototype._skipDefault=function(k,b,e){var l=(this||fk)._baseState;if(null===l.default)return!1;k=k.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,b,e).join()),k.length!==l.defaultBuffer.length)return!1;for(b=0;b<k.length;b++)if(k[b]!==l.defaultBuffer[b])return!1;return!0},HM}function Oaa(){if(uY)return IM;uY=!0;var g=IM;return g.der=sY(),g.pem=function(){function c(m){f.call(this||
JM,m);(this||JM).enc="pem"}if(vY)return KM;vY=!0;var h=Ng,f=sY();return h(c,f),KM=c,c.prototype.encode=function(m,n){m=f.prototype.encode.call(this||JM,m).toString("base64");for(var a=["-----BEGIN "+n.label+"-----"],d=0;d<m.length;d+=64)a.push(m.slice(d,d+64));return a.push("-----END "+n.label+"-----"),a.join("\n")},KM}(),IM}function SE(){if(wY)return LM;wY=!0;var g=LM;return g.bignum=Lj,g.define=function(){function c(m,n){(this||wm).name=m;(this||wm).body=n;(this||wm).decoders={};(this||wm).encoders=
{}}if(xY)return MM;xY=!0;var h=SE(),f=Ng;return MM.define=function(m,n){return new c(m,n)},c.prototype._createNamed=function(m){try{var n=St.runInThisContext("(function "+(this||wm).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(a){n=function(d){this._initNamed(d)}}return f(n,m),n.prototype._initNamed=function(a){m.call(this||wm,a)},new n(this||wm)},c.prototype._getDecoder=function(m){return m=m||"der",(this||wm).decoders.hasOwnProperty(m)||((this||wm).decoders[m]=this._createNamed(h.decoders[m])),
(this||wm).decoders[m]},c.prototype.decode=function(m,n,a){return this._getDecoder(n).decode(m,a)},c.prototype._getEncoder=function(m){return m=m||"der",(this||wm).encoders.hasOwnProperty(m)||((this||wm).encoders[m]=this._createNamed(h.encoders[m])),(this||wm).encoders[m]},c.prototype.encode=function(m,n,a){return this._getEncoder(n).encode(m,a)},MM}().define,g.base=Ez(),g.constants=lY(),g.decoders=Naa(),g.encoders=Oaa(),LM}function Jw(g){var c;"object"!=typeof g||NM.isBuffer(g)||(c=g.passphrase,
g=g.key);"string"==typeof g&&(g=NM.from(g));var h=c;g=g.toString();var f=g.match(Paa);if(f){var m="aes"+f[1],n=TE.from(f[2],"hex");var a=TE.from(f[3].replace(/[\r\n]/g,""),"base64");f=Fz(h,n.slice(0,8),parseInt(f[1],10)).key;h=[];m=xm.createDecipheriv(m,f,n);h.push(m.update(a));h.push(m.final());a=TE.concat(h)}else a=g.match(Qaa),a=new TE(a[2].replace(/[\r\n]/g,""),"base64");g=g.match(Raa)[1];switch(g){case "CERTIFICATE":var d=bm.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||
(d=bm.PublicKey.decode(a,"der")),c=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return bm.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=bm.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=bm.EncryptedPrivateKey.decode(a,"der"),
a=c,m=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=Saa[h.algorithm.decrypt.cipher.algo.join(".")],g=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(d.split("-")[1],10)/8,a=Taa.pbkdf2Sync(a,m,n,h,"sha1"),d=Uaa.createDecipheriv(d,a,g),g=[],a=(g.push(d.update(c)),g.push(d.final()),NM.concat(g));case "PRIVATE KEY":switch(c=(d=bm.PrivateKey.decode(a,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return bm.RSAPrivateKey.decode(d.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:bm.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=bm.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return bm.RSAPublicKey.decode(a,"der");case "RSA PRIVATE KEY":return bm.RSAPrivateKey.decode(a,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:bm.DSAPrivateKey.decode(a,
"der")};case "EC PRIVATE KEY":return{curve:(a=bm.ECPrivateKey.decode(a,"der")).parameters.value,privateKey:a.privateKey};default:throw Error("unknown key type "+g);}}function yY(g,c,h,f){if((g=new sl(g.toArray())).length<c.byteLength()){var m=new sl(c.byteLength()-g.length);m.fill(0);g=sl.concat([m,g])}m=h.length;h=(h=OM(h,c)).mod(c);h=new sl(h.toArray());h.length<c.byteLength()&&(c=new sl(c.byteLength()-h.length),c.fill(0),h=sl.concat([c,h]));c=h;h=new sl(m);h.fill(1);m=new sl(m);return m.fill(0),
m=Tt(f,m).update(h).update(new sl([0])).update(g).update(c).digest(),h=Tt(f,m).update(h).digest(),{k:m=Tt(f,m).update(h).update(new sl([1])).update(g).update(c).digest(),v:Tt(f,m).update(h).digest()}}function OM(g,c){var h=new UE(g);g=(g.length<<3)-c.bitLength();return 0<g&&h.ishrn(g),h}function zY(g,c,h){var f;do{for(f=new sl(0);8*f.length<g.bitLength();)c.v=Tt(h,c.k).update(c.v).digest(),f=sl.concat([f,c.v]);f=OM(f,g);c.k=Tt(h,c.k).update(c.v).update(new sl([0])).digest();c.v=Tt(h,c.k).update(c.v).digest()}while(-1!==
f.cmp(g));return f}function AY(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function Gz(g){VE.Writable.call(this||uj);g=Ut[g];if(!g)throw Error("Unknown message digest");(this||uj)._hashType=g.hash;(this||uj)._hash=BY(g.hash);(this||uj)._tag=g.id;(this||uj)._signType=g.sign}function Hz(g){VE.Writable.call(this||uj);g=Ut[g];if(!g)throw Error("Unknown message digest");(this||uj)._hash=BY(g.hash);(this||uj)._tag=g.id;(this||uj)._signType=g.sign}function CY(g){return new Gz(g)}
function DY(g){return new Hz(g)}function Vt(g){(this||gk).curveType=ym[g];(this||gk).curveType||((this||gk).curveType={name:g});(this||gk).curve=new Vaa.ec((this||gk).curveType.name);(this||gk).keys=void 0}function PM(g,c,h){Array.isArray(g)||(g=g.toArray());g=new nq(g);h&&g.length<h&&(h=new nq(h-g.length),h.fill(0),g=nq.concat([h,g]));return c?g.toString(c):g}function EY(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function FY(g,
c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>GY||0>g)throw new TypeError("offset must be a uint32");if(g>HY||g>c)throw new RangeError("offset out of range");}function IY(g,c,h){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>GY||0>g)throw new TypeError("size must be a uint32");if(g+c>h||g>HY)throw new RangeError("buffer too small");}function JY(g,c,h,f){return QM.browser?(h=new Uint8Array(g.buffer,c,h),RM.getRandomValues(h),f?(QM.nextTick(function(){f(null,
g)}),void 0):g):f?(KY(h,function(m,n){if(m)return f(m);n.copy(g,c);f(null,g)}),void 0):(KY(h).copy(g,c),g)}function Waa(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,16))});return c}function WE(g){return g&&g.__esModule?g:{default:g}}function LY(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function MY(g){for(var c=g.length,h=new ArrayBuffer(c),f=new Uint8Array(h),m=0;m<c;m++)f[m]=g.charCodeAt(m);return h}function NY(g,c){return LY([MY(g)],{type:c})}function OY(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?
h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function PY(g,c){OY(g,function(h){c(h)})}function Xaa(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function Yaa(g,c,h,f,m){if(0<h||f<c.size)c=Xaa(c,h,f);QY.readAsArrayBuffer(c,function(n){g.append(n);m()})}function Zaa(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function XE(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Iz(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=
[];var f=0;for(c=g.length;f<c;f++)h[f]=Iz(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=
h.constructor,h="function"==typeof h&&h instanceof h&&RY.call(h)==$aa);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=Iz(g[f]),"undefined"!==typeof c&&(h[f]=c));return h}function SY(g){var c=!1;return SM(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function TY(g){return SM(function(c){c=Iz(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=SY(function(b,e){b?a(b):n(e)});c.push(k);
(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function aba(g,c,h){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],m=0;m<h.length-1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function TM(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}
function UY(g){return g}function bba(g){return[{ok:g}]}function cba(g){YE&&addEventListener("storage",function(c){g.emit(c.key)})}function Kw(){ZE.call(this);this._listeners={};cba(this)}function UM(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function VY(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function WY(g,c,h){return new Promise(function(f,m){g.get(c,function(n,
a){if(n){if(404!==n.status)return m(n);a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(dba(g,a,h))})})}function dba(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return WY(g,c._id,h)})}function XY(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function eba(g,c,h){for(var f=[],m=c;m<h;m+=3)c=(g[m]<<16&16711680)+(g[m+
1]<<8&65280)+(g[m+2]&255),f.push(cp[c>>18&63]+cp[c>>12&63]+cp[c>>6&63]+cp[c&63]);return f.join("")}function oq(g){if(g>VM)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);Object.setPrototypeOf(g,Md.prototype);return g}function Md(g,c,h){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return WM(g)}return YY(g,c,h)}function YY(g,c,h){if("string"===typeof g){var f=c;if("string"!==
typeof f||""===f)f="utf8";if(!Md.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=ZY(g,f)|0;h=oq(c);g=h.write(g,f);g!==c&&(h=h.slice(0,g));return h}if(ArrayBuffer.isView(g))return dp(g,Uint8Array)?(g=new Uint8Array(g),g=$Y(g.buffer,g.byteOffset,g.byteLength)):g=XM(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(dp(g,ArrayBuffer)||g&&dp(g.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(dp(g,SharedArrayBuffer)||g&&dp(g.buffer,SharedArrayBuffer)))return $Y(g,c,h);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return Md.from(f,c,h);if(f=fba(g))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return Md.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function aZ(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function WM(g){aZ(g);return oq(0>g?0:YM(g)|0)}function XM(g){for(var c=0>g.length?0:YM(g.length)|0,h=oq(c),f=0;f<c;f+=1)h[f]=g[f]&255;return h}function $Y(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h);Object.setPrototypeOf(g,Md.prototype);return g}function fba(g){if(Md.isBuffer(g)){var c=YM(g.length)|0,h=oq(c);if(0===h.length)return h;g.copy(h,0,0,c);return h}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?oq(0):XM(g);if("Buffer"===g.type&&Array.isArray(g.data))return XM(g.data)}function YM(g){if(g>=VM)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
VM.toString(16)+" bytes");return g|0}function ZY(g,c){if(Md.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||dp(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return ZM(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
h;case "hex":return h>>>1;case "base64":return $E.toByteArray(bZ(g)).length;default:if(m)return f?-1:ZM(g).length;c=(""+c).toLowerCase();m=!0}}function gba(g,c,h){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!h||0>h||h>g)h=g;for(g="";c<h;++c)g+=hba[this[c]];return g;case "utf8":case "utf-8":return cZ(this,c,h);case "ascii":g=
"";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]&127);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&h===this.length?$E.fromByteArray(this):$E.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length-1;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+
g);g=(g+"").toLowerCase();f=!0}}function Wt(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function dZ(g,c,h,f,m){if(0===g.length)return-1;"string"===typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=m?0:g.length-1);0>h&&(h=g.length+h);if(h>=g.length){if(m)return-1;h=g.length-1}else if(0>h)if(m)h=0;else return-1;"string"===typeof c&&(c=Md.from(c,f));if(Md.isBuffer(c))return 0===c.length?-1:eZ(g,c,h,f,m);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):eZ(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function eZ(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,d=g.length,k=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===
k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function cZ(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m=g[c],n=null,a=239<m?4:223<m?3:191<m?2:1;if(c+a<=h)switch(a){case 1:128>m&&(n=m);break;case 2:var d=g[c+1];128===(d&192)&&(m=(m&31)<<6|d&63,127<m&&(n=m));break;case 3:d=g[c+1];var k=g[c+2];128===(d&192)&&128===(k&192)&&(m=(m&15)<<12|(d&63)<<6|k&63,2047<m&&(55296>m||57343<m)&&(n=m));break;
case 4:d=g[c+1];k=g[c+2];var b=g[c+3];128===(d&192)&&128===(k&192)&&128===(b&192)&&(m=(m&15)<<18|(d&63)<<12|(k&63)<<6|b&63,65535<m&&1114112>m&&(n=m))}null===n?(n=65533,a=1):65535<n&&(n-=65536,f.push(n>>>10&1023|55296),n=56320|n&1023);f.push(n);c+=a}g=f.length;if(g<=fZ)f=String.fromCharCode.apply(String,f);else{h="";for(c=0;c<g;)h+=String.fromCharCode.apply(String,f.slice(c,c+=fZ));f=h}return f}function Gk(g,c,h){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");
}function cm(g,c,h,f,m,n){if(!Md.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function gZ(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function hZ(g,c,h,f,m){c=+c;h>>>=0;m||gZ(g,c,h,4);Lw.write(g,c,h,f,23,4);return h+4}function iZ(g,c,h,f,m){c=+c;h>>>=0;m||gZ(g,
c,h,8);Lw.write(g,c,h,f,52,8);return h+8}function bZ(g){g=g.split("=")[0];g=g.trim().replace(iba,"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function ZM(g,c){c=c||Infinity;for(var h,f=g.length,m=null,n=[],a=0;a<f;++a){h=g.charCodeAt(a);if(55295<h&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=(m-55296<<10|h-56320)+65536}else m&&-1<
(c-=3)&&n.push(239,191,189);m=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function aF(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function dp(g,c){return g instanceof c||null!=g&&null!=g.constructor&&
null!=g.constructor.name&&g.constructor.name===c.name}function Gr(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||pq).db=g;(this||pq)._ended=!1;(this||pq)._nexting=!1}function eo(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||hk).db=g;(this||hk)._operations=[];(this||hk)._written=!1}function hj(g){(this||zm).status="new";(this||zm).supports=
jba(g,{status:!0})}function jZ(g,c){var h={},f;for(f in c)if(kba.call(c,f)){var m=c[f];-1!==lba.indexOf(f)&&(m=g._serializeKey(m));h[f]=m}return h}function Mw(g,c){kZ.call(this||fo,g);(this||fo)._options=c;(this||fo)._iterator=null;(this||fo)._operations=[]}function Xt(g){lZ.call(this||Hk,g.supports||{});mba.forEach(function(c){"function"!==typeof g[c]||(this||Hk).supports.additionalMethods[c]||((this||Hk).supports.additionalMethods[c]=!0)},this||Hk);(this||Hk)._db=g;(this||Hk)._operations=[];mZ(this||
Hk)}function nba(g){nZ.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||Hk)._db[c].apply((this||Hk)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){return(this||Hk)._db[c].apply((this||Hk)._db,arguments)}})}function mZ(g){nZ.forEach(function(c){g["_"+c]=function(){(this||Hk)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||Hk)._operations.push({method:c,
args:arguments})}});g._iterator=function(c){c=new oZ(g,c);(this||Hk)._operations.push({iterator:c});return c}}function pZ(){if(qZ)return rZ;qZ=!0;return rZ=Wo.EventEmitter}function Nw(){function g(f,m,n){n||(n=Error);var a=function(d,k,b){return n.call(this,"string"===typeof m?m:m(d,k,b))||this};$jscomp.inherits(a,n);a.prototype.name=n.name;a.prototype.code=f;h[f]=a}function c(f,m){if(Array.isArray(f)){var n=f.length;f=f.map(function(a){return String(a)});return 2<n?"one of "+m+" "+f.slice(0,n-1).join(", ")+
", or "+f[n-1]:2===n?"one of "+m+" "+f[0]+" or "+f[1]:"of "+m+" "+f[0]}return"of "+m+" "+String(f)}if(sZ)return $M;sZ=!0;var h={};g("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+m+'" is invalid for option "'+f+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;if(a="string"===typeof m)a="not "===m.substr(0,4);a?(a="must not be",m=m.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>f.length)d=f.length;" argument"===f.substring(d-9,d)?f="The "+f+" "+a+" "+c(m,"type"):
(d=void 0,"number"!==typeof d&&(d=0),d=d+1>f.length?!1:-1!==f.indexOf(".",d),f='The "'+f+'" '+(d?"property":"argument")+" "+a+" "+c(m,"type"));return f+(". Received type "+typeof n)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");$M.codes=h;return $M}function aN(g){try{if(!bN.localStorage)return!1}catch(c){return!1}g=bN.localStorage[g];return null==g?!1:"true"===
String(g).toLowerCase()}function tZ(g,c){for(var h in g)c[h]=g[h]}function Yt(g,c,h){return ep(g,c,h)}function oba(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function Jz(g){var c=oba(g);if("string"!==typeof c&&(cN.isEncoding===uZ||!uZ(g)))throw Error("Unknown encoding: "+
g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=pba;this.end=qba;g=4;break;case "utf8":this.fillLast=rba;g=4;break;case "base64":this.text=sba;this.end=tba;g=3;break;default:this.write=uba;this.end=vba;return}this.lastTotal=this.lastNeed=0;this.lastChar=cN.allocUnsafe(g)}function dN(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function wba(g,c,h){var f=c.length-1;if(f<h)return 0;var m=dN(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-1),m;if(--f<h||-2===m)return 0;
m=dN(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-2),m;if(--f<h||-2===m)return 0;m=dN(c[f]);return 0<=m?(0<m&&(2===m?m=0:g.lastNeed=m-3),m):0}function rba(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==h)return h;if(this.lastNeed<=g.length)return g.copy(this.lastChar,
c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function pba(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function qba(g){g=
g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function sba(g,c){var h=(g.length-c)%3;if(0===h)return g.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-h)}function tba(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function uba(g){return g.toString(this.encoding)}
function vba(g){return g&&g.length?this.write(g):""}function eN(){function g(m){var n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];m.apply(this,d)}}}function c(){}function h(m,n,a){if("function"===typeof n)return h(m,null,n);n||(n={});a=g(a||c);var d=n.readable||!1!==n.readable&&m.readable,k=n.writable||!1!==n.writable&&m.writable,b=function(){m.writable||l()},e=m._writableState&&m._writableState.finished,l=function(){k=!1;e=!0;d||a.call(m)},
p=m._readableState&&m._readableState.endEmitted,q=function(){d=!1;p=!0;k||a.call(m)},u=function(A){a.call(m,A)},w=function(){var A;if(d&&!p)return m._readableState&&m._readableState.ended||(A=new f),a.call(m,A);if(k&&!e)return m._writableState&&m._writableState.ended||(A=new f),a.call(m,A)},y=function(){m.req.on("finish",l)};if(m.setHeader&&"function"===typeof m.abort)if(m.on("complete",l),m.on("abort",w),m.req)y();else m.on("request",y);else k&&!m._writableState&&(m.on("end",b),m.on("close",b));
m.on("end",q);m.on("finish",l);if(!1!==n.error)m.on("error",u);m.on("close",w);return function(){m.removeListener("complete",l);m.removeListener("abort",w);m.removeListener("request",y);m.req&&m.req.removeListener("finish",l);m.removeListener("end",b);m.removeListener("close",b);m.removeListener("finish",l);m.removeListener("end",q);m.removeListener("error",u);m.removeListener("close",w)}}if(vZ)return wZ;vZ=!0;var f=Nw().codes.ERR_STREAM_PREMATURE_CLOSE;return wZ=h}function xba(){if(xZ)return yZ;
xZ=!0;return yZ=function(){throw Error("Readable.from is not available in the browser");}}function yba(){function g(d,k){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);k&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable}));b.push.apply(b,e)}return b}function c(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?g(Object(b),!0).forEach(function(e){var l=b[e];e in d?Object.defineProperty(d,e,{value:l,
enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):g(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}function h(d,k){for(var b=0;b<k.length;b++){var e=k[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function f(d,k,b){k&&h(d.prototype,k);b&&h(d,b);return d}if(zZ)return AZ;zZ=!0;
var m=Eg.Buffer,n=BZ.inspect,a=n&&n.custom||"inspect";return AZ=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(d,[{key:"push",value:function(k){k={data:k,next:null};0<this.length?this.tail.next=k:this.head=k;this.tail=k;++this.length}},{key:"unshift",value:function(k){k={data:k,next:this.head};0===this.length&&(this.tail=k);this.head=k;++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return k}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=k+b.data;return e}},{key:"concat",value:function(k){if(0===this.length)return m.alloc(0);k=m.allocUnsafe(k>>>0);for(var b=this.head,e=0;b;)m.prototype.copy.call(b.data,k,e),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(k,
b){k<this.head.data.length?(b=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):b=k===this.head.data.length?this.shift():b?this._getString(k):this._getBuffer(k);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var b=this.head,e=1,l=b.data;for(k-=l.length;b=b.next;){var p=b.data,q=k>p.length?p.length:k;l=q===p.length?l+p:l+p.slice(0,k);k-=q;if(0===k){q===p.length?(++e,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=p.slice(q));
break}++e}this.length-=e;return l}},{key:"_getBuffer",value:function(k){var b=m.allocUnsafe(k),e=this.head,l=1;e.data.copy(b);for(k-=e.data.length;e=e.next;){var p=e.data,q=k>p.length?p.length:k;p.copy(b,b.length-k,0,q);k-=q;if(0===k){q===p.length?(++l,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=p.slice(q));break}++l}this.length-=l;return b}},{key:a,value:function(k,b){return n(this,c({},b,{depth:0,customInspect:!1}))}}]);return d}()}function CZ(){function g(m,n){h(m,n);c(m)}function c(m){m._writableState&&
!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function h(m,n){m.emit("error",n)}if(DZ)return EZ;DZ=!0;var f=oh;return EZ={destroy:function(m,n){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return n?n(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(h,this,m)):f.nextTick(h,this,m)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(m||null,function(k){!n&&k?a._writableState?a._writableState.errorEmitted?f.nextTick(c,a):(a._writableState.errorEmitted=!0,f.nextTick(g,a,k)):f.nextTick(g,a,k):n?(f.nextTick(c,a),n(k)):f.nextTick(c,a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(m,n){var a=m._readableState,d=m._writableState;a&&a.autoDestroy||d&&d.autoDestroy?m.destroy(n):m.emit("error",n)}}}function FZ(){if(GZ)return HZ;GZ=!0;var g=Nw().codes.ERR_INVALID_OPT_VALUE;return HZ={getHighWaterMark:function(c,h,f,m){h=null!=h.highWaterMark?h.highWaterMark:
m?h[f]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new g(m?f:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function IZ(){function g(P){var S=this;this.entry=this.next=null;this.finish=function(){var fa=S.entry;for(S.entry=null;fa;){var aa=fa.callback;P.pendingcb--;aa(void 0);fa=fa.next}P.corkedRequestsFree.next=S}}function c(){}function h(P,S,fa){l=l||Ow();P=P||{};"boolean"!==typeof fa&&(fa=S instanceof l);this.objectMode=!!P.objectMode;fa&&(this.objectMode=
this.objectMode||!!P.writableObjectMode);this.highWaterMark=A(this,P,"writableHighWaterMark",fa);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==P.decodeStrings;this.defaultEncoding=P.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(aa){var oa=S._writableState,Va=oa.sync,lb=oa.writecb;if("function"!==typeof lb)throw new I;oa.writing=!1;oa.writecb=null;oa.length-=
oa.writelen;oa.writelen=0;aa?(--oa.pendingcb,Va?(e.nextTick(lb,aa),e.nextTick(b,S,oa),S._writableState.errorEmitted=!0,F(S,aa)):(lb(aa),S._writableState.errorEmitted=!0,F(S,aa),b(S,oa))):((aa=d(oa)||S.destroyed)||oa.corked||oa.bufferProcessing||!oa.bufferedRequest||a(S,oa),Va?e.nextTick(n,S,oa,aa,lb):n(S,oa,aa,lb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==P.emitClose;this.autoDestroy=
!!P.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(P){l=l||Ow();var S=this instanceof l;if(!S&&!W.call(f,this))return new f(P);this._writableState=new h(P,this,S);this.writable=!0;P&&("function"===typeof P.write&&(this._write=P.write),"function"===typeof P.writev&&(this._writev=P.writev),"function"===typeof P.destroy&&(this._destroy=P.destroy),"function"===typeof P.final&&(this._final=P.final));q.call(this)}function m(P,S,fa,aa,oa,Va,lb){S.writelen=aa;S.writecb=
lb;S.writing=!0;S.sync=!0;if(S.destroyed)S.onwrite(new T("write"));else fa?P._writev(oa,S.onwrite):P._write(oa,Va,S.onwrite);S.sync=!1}function n(P,S,fa,aa){!fa&&0===S.length&&S.needDrain&&(S.needDrain=!1,P.emit("drain"));S.pendingcb--;aa();b(P,S)}function a(P,S){S.bufferProcessing=!0;var fa=S.bufferedRequest;if(P._writev&&fa&&fa.next){var aa=Array(S.bufferedRequestCount),oa=S.corkedRequestsFree;oa.entry=fa;for(var Va=0,lb=!0;fa;)aa[Va]=fa,fa.isBuf||(lb=!1),fa=fa.next,Va+=1;aa.allBuffers=lb;m(P,S,
!0,S.length,aa,"",oa.finish);S.pendingcb++;S.lastBufferedRequest=null;oa.next?(S.corkedRequestsFree=oa.next,oa.next=null):S.corkedRequestsFree=new g(S);S.bufferedRequestCount=0}else{for(;fa&&(aa=fa.chunk,m(P,S,!1,S.objectMode?1:aa.length,aa,fa.encoding,fa.callback),fa=fa.next,S.bufferedRequestCount--,!S.writing););null===fa&&(S.lastBufferedRequest=null)}S.bufferedRequest=fa;S.bufferProcessing=!1}function d(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function k(P,
S){P._final(function(fa){S.pendingcb--;fa&&F(P,fa);S.prefinished=!0;P.emit("prefinish");b(P,S)})}function b(P,S){var fa=d(S);fa&&(S.prefinished||S.finalCalled||("function"!==typeof P._final||S.destroyed?(S.prefinished=!0,P.emit("prefinish")):(S.pendingcb++,S.finalCalled=!0,e.nextTick(k,P,S))),0===S.pendingcb&&(S.finished=!0,P.emit("finish"),S.autoDestroy&&(S=P._readableState,(!S||S.autoDestroy&&S.endEmitted)&&P.destroy())));return fa}if(JZ)return fN;JZ=!0;var e=oh;fN=f;var l;f.WritableState=h;var p=
{deprecate:zba},q=pZ(),u=Eg.Buffer,w=Aba.Uint8Array||function(){},y=CZ(),A=FZ().getHighWaterMark,C=Nw().codes,E=C.ERR_INVALID_ARG_TYPE,L=C.ERR_METHOD_NOT_IMPLEMENTED,I=C.ERR_MULTIPLE_CALLBACK,V=C.ERR_STREAM_CANNOT_PIPE,T=C.ERR_STREAM_DESTROYED,Y=C.ERR_STREAM_NULL_VALUES,na=C.ERR_STREAM_WRITE_AFTER_END,Ba=C.ERR_UNKNOWN_ENCODING,F=y.errorOrDestroy;cj(f,q);h.prototype.getBuffer=function(){for(var P=this.bufferedRequest,S=[];P;)S.push(P),P=P.next;return S};(function(){try{Object.defineProperty(h.prototype,
"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(P){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var W=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(P){return W.call(this,P)?!0:this!==f?!1:P&&P._writableState instanceof h}})}else W=function(P){return P instanceof this};
f.prototype.pipe=function(){F(this,new V)};f.prototype.write=function(P,S,fa){var aa=this._writableState,oa=!1,Va;if(Va=!aa.objectMode)Va=P,Va=u.isBuffer(Va)||Va instanceof w;Va&&!u.isBuffer(P)&&(P=u.from(P));"function"===typeof S&&(fa=S,S=null);Va?S="buffer":S||(S=aa.defaultEncoding);"function"!==typeof fa&&(fa=c);if(aa.ending)aa=fa,fa=new na,F(this,fa),e.nextTick(aa,fa);else{var lb;if(!(lb=Va)){lb=P;var qa=fa,ja;null===lb?ja=new Y:"string"===typeof lb||aa.objectMode||(ja=new E("chunk",["string",
"Buffer"],lb));ja?(F(this,ja),e.nextTick(qa,ja),lb=!1):lb=!0}lb&&(aa.pendingcb++,oa=Va,oa||(ja=P,aa.objectMode||!1===aa.decodeStrings||"string"!==typeof ja||(ja=u.from(ja,S)),P!==ja&&(oa=!0,S="buffer",P=ja)),Va=aa.objectMode?1:P.length,aa.length+=Va,ja=aa.length<aa.highWaterMark,ja||(aa.needDrain=!0),aa.writing||aa.corked?(Va=aa.lastBufferedRequest,aa.lastBufferedRequest={chunk:P,encoding:S,isBuf:oa,callback:fa,next:null},Va?Va.next=aa.lastBufferedRequest:aa.bufferedRequest=aa.lastBufferedRequest,
aa.bufferedRequestCount+=1):m(this,aa,!1,Va,P,S,fa),oa=ja)}return oa};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||a(this,P))};f.prototype.setDefaultEncoding=function(P){"string"===typeof P&&(P=P.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((P+"").toLowerCase())))throw new Ba(P);this._writableState.defaultEncoding=
P;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(P,S,fa){fa(new L("_write()"))};f.prototype._writev=null;f.prototype.end=function(P,S,fa){var aa=this._writableState;"function"===typeof P?(fa=P,S=P=null):"function"===typeof S&&(fa=S,
S=null);null!==P&&void 0!==P&&this.write(P,S);aa.corked&&(aa.corked=1,this.uncork());if(!aa.ending){P=fa;aa.ending=!0;b(this,aa);if(P)if(aa.finished)e.nextTick(P);else this.once("finish",P);aa.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(P){this._writableState&&
(this._writableState.destroyed=P)}});f.prototype.destroy=y.destroy;f.prototype._undestroy=y.undestroy;f.prototype._destroy=function(P,S){S(P)};return fN}function Ow(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(KZ)return gN;
KZ=!0;var f=oh,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};gN=g;var n=LZ(),a=IZ();cj(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}});return gN}function Bba(){function g(A,C,E){C in A?Object.defineProperty(A,
C,{value:E,enumerable:!0,configurable:!0,writable:!0}):A[C]=E;return A}function c(A,C){return{value:A,done:C}}function h(A){var C=A[k];if(null!==C){var E=A[u].read();null!==E&&(A[p]=null,A[k]=null,A[b]=null,C(c(E,!1)))}}function f(A){n.nextTick(h,A)}function m(A,C){return function(E,L){A.then(function(){if(C[l])E(c(void 0,!0));else C[q](E,L)},L)}}if(MZ)return NZ;MZ=!0;var n=oh,a,d=eN(),k=Symbol("lastResolve"),b=Symbol("lastReject"),e=Symbol("error"),l=Symbol("ended"),p=Symbol("lastPromise"),q=Symbol("handlePromise"),
u=Symbol("stream"),w=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[u]},next:function(){var A=this,C=this[e];if(null!==C)return Promise.reject(C);if(this[l])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise(function(E,L){n.nextTick(function(){A[e]?L(A[e]):E(c(void 0,!0))})});if(C=this[p])C=new Promise(m(C,this));else{C=this[u].read();if(null!==C)return Promise.resolve(c(C,!1));C=new Promise(this[q])}return this[p]=C}},g(a,Symbol.asyncIterator,
function(){return this}),g(a,"return",function(){var A=this;return new Promise(function(C,E){A[u].destroy(null,function(L){L?E(L):C(c(void 0,!0))})})}),a),w);return NZ=function(A){var C,E=Object.create(y,(C={},g(C,u,{value:A,writable:!0}),g(C,k,{value:null,writable:!0}),g(C,b,{value:null,writable:!0}),g(C,e,{value:null,writable:!0}),g(C,l,{value:A._readableState.endEmitted,writable:!0}),g(C,q,{value:function(L,I){var V=E[u].read();V?(E[p]=null,E[k]=null,E[b]=null,L(c(V,!1))):(E[k]=L,E[b]=I)},writable:!0}),
C));E[p]=null;d(A,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var I=E[b];null!==I&&(E[p]=null,E[k]=null,E[b]=null,I(L));E[e]=L}else L=E[k],null!==L&&(E[p]=null,E[k]=null,E[b]=null,L(c(void 0,!0))),E[l]=!0});A.on("readable",f.bind(null,E));return E}}function LZ(){function g(ta,Ha,zb){if("function"===typeof ta.prependListener)return ta.prependListener(Ha,zb);if(ta._events&&ta._events[Ha])Array.isArray(ta._events[Ha])?ta._events[Ha].unshift(zb):ta._events[Ha]=[zb,ta._events[Ha]];else ta.on(Ha,
zb)}function c(ta,Ha,zb){L=L||Ow();ta=ta||{};"boolean"!==typeof zb&&(zb=Ha instanceof L);this.objectMode=!!ta.objectMode;zb&&(this.objectMode=this.objectMode||!!ta.readableObjectMode);this.highWaterMark=F(this,ta,"readableHighWaterMark",zb);this.buffer=new Ba;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==
ta.emitClose;this.autoDestroy=!!ta.autoDestroy;this.destroyed=!1;this.defaultEncoding=ta.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ta.encoding&&(oa||(oa=hN.StringDecoder),this.decoder=new oa(ta.encoding),this.encoding=ta.encoding)}function h(ta){L=L||Ow();if(!(this instanceof h))return new h(ta);this._readableState=new c(ta,this,this instanceof L);this.readable=!0;ta&&("function"===typeof ta.read&&(this._read=ta.read),"function"===typeof ta.destroy&&
(this._destroy=ta.destroy));I.call(this)}function f(ta,Ha,zb,Ub,Nb){na("readableAddChunk",Ha);var Sb=ta._readableState;if(null===Ha)Sb.reading=!1,na("onEofChunk"),Sb.ended||(Sb.decoder&&(Ha=Sb.decoder.end())&&Ha.length&&(Sb.buffer.push(Ha),Sb.length+=Sb.objectMode?1:Ha.length),Sb.ended=!0,Sb.sync?a(ta):(Sb.needReadable=!1,Sb.emittedReadable||(Sb.emittedReadable=!0,d(ta))));else{if(!Nb){Nb=Ha;var pc;V.isBuffer(Nb)||Nb instanceof T||"string"===typeof Nb||void 0===Nb||Sb.objectMode||(pc=new P("chunk",
["string","Buffer","Uint8Array"],Nb));var Eb=pc}if(Eb)qa(ta,Eb);else if(Sb.objectMode||Ha&&0<Ha.length)if("string"===typeof Ha||Sb.objectMode||Object.getPrototypeOf(Ha)===V.prototype||(Ha=V.from(Ha)),Ub)Sb.endEmitted?qa(ta,new aa):m(ta,Sb,Ha,!0);else if(Sb.ended)qa(ta,new S);else{if(Sb.destroyed)return!1;Sb.reading=!1;Sb.decoder&&!zb?(Ha=Sb.decoder.write(Ha),Sb.objectMode||0!==Ha.length?m(ta,Sb,Ha,!1):k(ta,Sb)):m(ta,Sb,Ha,!1)}else Ub||(Sb.reading=!1,k(ta,Sb))}return!Sb.ended&&(Sb.length<Sb.highWaterMark||
0===Sb.length)}function m(ta,Ha,zb,Ub){Ha.flowing&&0===Ha.length&&!Ha.sync?(Ha.awaitDrain=0,ta.emit("data",zb)):(Ha.length+=Ha.objectMode?1:zb.length,Ub?Ha.buffer.unshift(zb):Ha.buffer.push(zb),Ha.needReadable&&a(ta));k(ta,Ha)}function n(ta,Ha){if(0>=ta||0===Ha.length&&Ha.ended)return 0;if(Ha.objectMode)return 1;if(ta!==ta)return Ha.flowing&&Ha.length?Ha.buffer.head.data.length:Ha.length;if(ta>Ha.highWaterMark){var zb=ta;1073741824<=zb?zb=1073741824:(zb--,zb|=zb>>>1,zb|=zb>>>2,zb|=zb>>>4,zb|=zb>>>
8,zb|=zb>>>16,zb++);Ha.highWaterMark=zb}return ta<=Ha.length?ta:Ha.ended?Ha.length:(Ha.needReadable=!0,0)}function a(ta){var Ha=ta._readableState;na("emitReadable",Ha.needReadable,Ha.emittedReadable);Ha.needReadable=!1;Ha.emittedReadable||(na("emitReadable",Ha.flowing),Ha.emittedReadable=!0,E.nextTick(d,ta))}function d(ta){var Ha=ta._readableState;na("emitReadable_",Ha.destroyed,Ha.length,Ha.ended);Ha.destroyed||!Ha.length&&!Ha.ended||(ta.emit("readable"),Ha.emittedReadable=!1);Ha.needReadable=!Ha.flowing&&
!Ha.ended&&Ha.length<=Ha.highWaterMark;u(ta)}function k(ta,Ha){Ha.readingMore||(Ha.readingMore=!0,E.nextTick(b,ta,Ha))}function b(ta,Ha){for(;!Ha.reading&&!Ha.ended&&(Ha.length<Ha.highWaterMark||Ha.flowing&&0===Ha.length);){var zb=Ha.length;na("maybeReadMore read 0");ta.read(0);if(zb===Ha.length)break}Ha.readingMore=!1}function e(ta){return function(){var Ha=ta._readableState;na("pipeOnDrain",Ha.awaitDrain);Ha.awaitDrain&&Ha.awaitDrain--;0===Ha.awaitDrain&&ta.listeners("data").length&&(Ha.flowing=
!0,u(ta))}}function l(ta){var Ha=ta._readableState;Ha.readableListening=0<ta.listenerCount("readable");Ha.resumeScheduled&&!Ha.paused?Ha.flowing=!0:0<ta.listenerCount("data")&&ta.resume()}function p(ta){na("readable nexttick read 0");ta.read(0)}function q(ta,Ha){na("resume",Ha.reading);Ha.reading||ta.read(0);Ha.resumeScheduled=!1;ta.emit("resume");u(ta);Ha.flowing&&!Ha.reading&&ta.read(0)}function u(ta){var Ha=ta._readableState;for(na("flow",Ha.flowing);Ha.flowing&&null!==ta.read(););}function w(ta,
Ha){if(0===Ha.length)return null;Ha.objectMode?ta=Ha.buffer.shift():!ta||ta>=Ha.length?(ta=Ha.decoder?Ha.buffer.join(""):1===Ha.buffer.length?Ha.buffer.first():Ha.buffer.concat(Ha.length),Ha.buffer.clear()):ta=Ha.buffer.consume(ta,Ha.decoder);return ta}function y(ta){var Ha=ta._readableState;na("endReadable",Ha.endEmitted);Ha.endEmitted||(Ha.ended=!0,E.nextTick(A,Ha,ta))}function A(ta,Ha){na("endReadableNT",ta.endEmitted,ta.length);ta.endEmitted||0!==ta.length||(ta.endEmitted=!0,Ha.readable=!1,Ha.emit("end"),
ta.autoDestroy&&(ta=Ha._writableState,(!ta||ta.autoDestroy&&ta.finished)&&Ha.destroy()))}function C(ta,Ha){for(var zb=0,Ub=ta.length;zb<Ub;zb++)if(ta[zb]===Ha)return zb;return-1}if(OZ)return iN;OZ=!0;var E=oh;iN=h;var L;h.ReadableState=c;var I=pZ(),V=Eg.Buffer,T=Cba.Uint8Array||function(){},Y=BZ;var na=Y&&Y.debuglog?Y.debuglog("stream"):function(){};var Ba=yba();Y=CZ();var F=FZ().getHighWaterMark,W=Nw().codes,P=W.ERR_INVALID_ARG_TYPE,S=W.ERR_STREAM_PUSH_AFTER_EOF,fa=W.ERR_METHOD_NOT_IMPLEMENTED,aa=
W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,oa,Va,lb;cj(h,I);var qa=Y.errorOrDestroy,ja=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ta){this._readableState&&(this._readableState.destroyed=ta)}});h.prototype.destroy=Y.destroy;h.prototype._undestroy=Y.undestroy;h.prototype._destroy=function(ta,Ha){Ha(ta)};h.prototype.push=function(ta,Ha){var zb=this._readableState;
if(zb.objectMode)var Ub=!0;else"string"===typeof ta&&(Ha=Ha||zb.defaultEncoding,Ha!==zb.encoding&&(ta=V.from(ta,Ha),Ha=""),Ub=!0);return f(this,ta,Ha,!1,Ub)};h.prototype.unshift=function(ta){return f(this,ta,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(ta){oa||(oa=hN.StringDecoder);ta=new oa(ta);this._readableState.decoder=ta;this._readableState.encoding=this._readableState.decoder.encoding;for(var Ha=this._readableState.buffer.head,
zb="";null!==Ha;)zb+=ta.write(Ha.data),Ha=Ha.next;this._readableState.buffer.clear();""!==zb&&this._readableState.buffer.push(zb);this._readableState.length=zb.length;return this};h.prototype.read=function(ta){na("read",ta);ta=parseInt(ta,10);var Ha=this._readableState,zb=ta;0!==ta&&(Ha.emittedReadable=!1);if(0===ta&&Ha.needReadable&&((0!==Ha.highWaterMark?Ha.length>=Ha.highWaterMark:0<Ha.length)||Ha.ended))return na("read: emitReadable",Ha.length,Ha.ended),0===Ha.length&&Ha.ended?y(this):a(this),
null;ta=n(ta,Ha);if(0===ta&&Ha.ended)return 0===Ha.length&&y(this),null;var Ub=Ha.needReadable;na("need readable",Ub);if(0===Ha.length||Ha.length-ta<Ha.highWaterMark)Ub=!0,na("length less than watermark",Ub);Ha.ended||Ha.reading?na("reading or ended",!1):Ub&&(na("do read"),Ha.reading=!0,Ha.sync=!0,0===Ha.length&&(Ha.needReadable=!0),this._read(Ha.highWaterMark),Ha.sync=!1,Ha.reading||(ta=n(zb,Ha)));Ub=0<ta?w(ta,Ha):null;null===Ub?(Ha.needReadable=Ha.length<=Ha.highWaterMark,ta=0):(Ha.length-=ta,Ha.awaitDrain=
0);0===Ha.length&&(Ha.ended||(Ha.needReadable=!0),zb!==ta&&Ha.ended&&y(this));null!==Ub&&this.emit("data",Ub);return Ub};h.prototype._read=function(ta){qa(this,new fa("_read()"))};h.prototype.pipe=function(ta,Ha){function zb(jb,Mb){na("onunpipe");jb===dd&&Mb&&!1===Mb.hasUnpiped&&(Mb.hasUnpiped=!0,na("cleanup"),ta.removeListener("close",pc),ta.removeListener("finish",Eb),ta.removeListener("drain",Ca),ta.removeListener("error",Sb),ta.removeListener("unpipe",zb),dd.removeListener("end",Ub),dd.removeListener("end",
Lc),dd.removeListener("data",Nb),Ea=!0,!ia.awaitDrain||ta._writableState&&!ta._writableState.needDrain||Ca())}function Ub(){na("onend");ta.end()}function Nb(jb){na("ondata");jb=ta.write(jb);na("dest.write",jb);!1===jb&&((1===ia.pipesCount&&ia.pipes===ta||1<ia.pipesCount&&-1!==C(ia.pipes,ta))&&!Ea&&(na("false write response, pause",ia.awaitDrain),ia.awaitDrain++),dd.pause())}function Sb(jb){na("onerror",jb);Lc();ta.removeListener("error",Sb);0===ta.listeners("error").length&&qa(ta,jb)}function pc(){ta.removeListener("finish",
Eb);Lc()}function Eb(){na("onfinish");ta.removeListener("close",pc);Lc()}function Lc(){na("unpipe");dd.unpipe(ta)}var dd=this,ia=this._readableState;switch(ia.pipesCount){case 0:ia.pipes=ta;break;case 1:ia.pipes=[ia.pipes,ta];break;default:ia.pipes.push(ta)}ia.pipesCount+=1;na("pipe count=%d opts=%j",ia.pipesCount,Ha);Ha=Ha&&!1===Ha.end||ta===E.stdout||ta===E.stderr?Lc:Ub;if(ia.endEmitted)E.nextTick(Ha);else dd.once("end",Ha);ta.on("unpipe",zb);var Ca=e(dd);ta.on("drain",Ca);var Ea=!1;dd.on("data",
Nb);g(ta,"error",Sb);ta.once("close",pc);ta.once("finish",Eb);ta.emit("pipe",dd);ia.flowing||(na("pipe resume"),dd.resume());return ta};h.prototype.unpipe=function(ta){var Ha=this._readableState,zb={hasUnpiped:!1};if(0===Ha.pipesCount)return this;if(1===Ha.pipesCount){if(ta&&ta!==Ha.pipes)return this;ta||(ta=Ha.pipes);Ha.pipes=null;Ha.pipesCount=0;Ha.flowing=!1;ta&&ta.emit("unpipe",this,zb);return this}if(!ta){ta=Ha.pipes;zb=Ha.pipesCount;Ha.pipes=null;Ha.pipesCount=0;Ha.flowing=!1;for(Ha=0;Ha<zb;Ha++)ta[Ha].emit("unpipe",
this,{hasUnpiped:!1});return this}var Ub=C(Ha.pipes,ta);if(-1===Ub)return this;Ha.pipes.splice(Ub,1);--Ha.pipesCount;1===Ha.pipesCount&&(Ha.pipes=Ha.pipes[0]);ta.emit("unpipe",this,zb);return this};h.prototype.on=function(ta,Ha){Ha=I.prototype.on.call(this,ta,Ha);var zb=this._readableState;"data"===ta?(zb.readableListening=0<this.listenerCount("readable"),!1!==zb.flowing&&this.resume()):"readable"!==ta||zb.endEmitted||zb.readableListening||(zb.readableListening=zb.needReadable=!0,zb.flowing=!1,zb.emittedReadable=
!1,na("on readable",zb.length,zb.reading),zb.length?a(this):zb.reading||E.nextTick(p,this));return Ha};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(ta,Ha){Ha=I.prototype.removeListener.call(this,ta,Ha);"readable"===ta&&E.nextTick(l,this);return Ha};h.prototype.removeAllListeners=function(ta){var Ha=I.prototype.removeAllListeners.apply(this,arguments);"readable"!==ta&&void 0!==ta||E.nextTick(l,this);return Ha};h.prototype.resume=function(){var ta=this._readableState;ta.flowing||
(na("resume"),ta.flowing=!ta.readableListening,ta.resumeScheduled||(ta.resumeScheduled=!0,E.nextTick(q,this,ta)));ta.paused=!1;return this};h.prototype.pause=function(){na("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(na("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(ta){var Ha=this,zb=this._readableState,Ub=!1;ta.on("end",function(){na("wrapped end");if(zb.decoder&&!zb.ended){var Sb=
zb.decoder.end();Sb&&Sb.length&&Ha.push(Sb)}Ha.push(null)});ta.on("data",function(Sb){na("wrapped data");zb.decoder&&(Sb=zb.decoder.write(Sb));zb.objectMode&&(null===Sb||void 0===Sb)||!(zb.objectMode||Sb&&Sb.length)||Ha.push(Sb)||(Ub=!0,ta.pause())});for(var Nb in ta)void 0===this[Nb]&&"function"===typeof ta[Nb]&&(this[Nb]=function(Sb){return function(){return ta[Sb].apply(ta,arguments)}}(Nb));for(Nb=0;Nb<ja.length;Nb++)ta.on(ja[Nb],this.emit.bind(this,ja[Nb]));this._read=function(Sb){na("wrapped _read",
Sb);Ub&&(Ub=!1,ta.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===Va&&(Va=Bba());return Va(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(ta){this._readableState&&(this._readableState.flowing=ta)}});h._fromList=w;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(ta,Ha){void 0===lb&&(lb=xba());return lb(h,ta,Ha)});return iN}function PZ(){function g(e,l){var p=this._transformState;p.transforming=!1;var q=p.writecb;if(null===q)return this.emit("error",new a);p.writechunk=null;p.writecb=null;null!=l&&this.push(l);
q(e);e=this._readableState;e.reading=!1;(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);b.call(this,e);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",
h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(l,p){f(e,l,p)})}function f(e,l,p){if(l)return e.emit("error",l);null!=p&&e.push(p);if(e._writableState.length)throw new k;if(e._transformState.transforming)throw new d;return e.push(null)}if(QZ)return jN;QZ=!0;jN=c;var m=Nw().codes,n=m.ERR_METHOD_NOT_IMPLEMENTED,a=m.ERR_MULTIPLE_CALLBACK,d=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=m.ERR_TRANSFORM_WITH_LENGTH_0,b=Ow();cj(c,
b);c.prototype.push=function(e,l){this._transformState.needTransform=!1;return b.prototype.push.call(this,e,l)};c.prototype._transform=function(e,l,p){p(new n("_transform()"))};c.prototype._write=function(e,l,p){var q=this._transformState;q.writecb=p;q.writechunk=e;q.writeencoding=l;q.transforming||(e=this._readableState,(q.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))};c.prototype._read=function(e){e=this._transformState;null===e.writechunk||e.transforming?
e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))};c.prototype._destroy=function(e,l){b.prototype._destroy.call(this,e,function(p){l(p)})};return jN}function Pw(g,c){if(!((this||go)instanceof Pw))return new Pw(g,c);c=c||{};RZ.call(this||go,Dba(c,{objectMode:!0}));(this||go)._iterator=g;(this||go)._options=c;this.on("end",(this||go).destroy.bind(this||go,null,null))}function SZ(g,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);Eba(this||Mj,{type:g,
name:g,cause:"string"!=typeof c?c:h,message:c},"ewr")}function kN(g,c){Error.call(this||Mj);Error.captureStackTrace&&Error.captureStackTrace(this||Mj,(this||Mj).constructor);SZ.call(this||Mj,"CustomError",g,c)}function Fba(g,c,h){var f=function(m,n){SZ.call(this||Mj,c,m,n);"FilesystemError"==c&&((this||Mj).code=(this||Mj).cause.code,(this||Mj).path=(this||Mj).cause.path,(this||Mj).errno=(this||Mj).cause.errno,(this||Mj).message=(g.errno[(this||Mj).cause.errno]?g.errno[(this||Mj).cause.errno].description:
(this||Mj).cause.message)+((this||Mj).cause.path?" ["+(this||Mj).cause.path+"]":""));Error.call(this||Mj);Error.captureStackTrace&&Error.captureStackTrace(this||Mj,f)};f.prototype=h?new h:new kN;return f}function Kz(g){(this||Nj).db=(this||Nj)._levelup=g;(this||Nj).batch=g.db.batch();(this||Nj).ops=[];(this||Nj).length=0}function TZ(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var h=Object(g),f=1;f<arguments.length;f++){var m=arguments[f];if(null!=m)for(var n=
Object.keys(Object(m)),a=0,d=n.length;a<d;a++){var k=n[a],b=Object.getOwnPropertyDescriptor(m,k);void 0!==b&&b.enumerable&&(h[k]=m[k])}}return h}function UZ(){function g(k){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(k)}function c(k){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(k)}
function h(k,b){return(h=Object.setPrototypeOf||function(e,l){return e.__proto__=l,e})(k,b)}function f(k,b,e){e||(e=Error);e=function(l){function p(q,u,w){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0;q=c(p).call(this,"string"==typeof b?b:b(q,u,w));if(!q||"object"!==g(q)&&"function"!=typeof q){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=this}return q.code=k,q}return!function(q,u){if("function"!=typeof u&&
null!==u)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(u&&u.prototype,{constructor:{value:q,writable:!0,configurable:!0}});u&&h(q,u)}(p,l),p}(e);d[k]=e}function m(k,b){if(Array.isArray(k)){var e=k.length;return k=k.map(function(l){return String(l)}),2<e?"one of ".concat(b," ").concat(k.slice(0,e-1).join(", "),", or ")+k[e-1]:2===e?"one of ".concat(b," ").concat(k[0]," or ").concat(k[1]):"of ".concat(b," ").concat(k[0])}return"of ".concat(b," ").concat(String(k))}
if(VZ)return lN;VZ=!0;var n,a,d={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(k,b,e){var l;if(void 0===n&&(n=mN()),n("string"==typeof k,"'name' must be a string"),"string"==typeof b&&"not "===b.substr(0,4)?(l="must not be",b=b.replace(/^not /,"")):l="must be",function(q,u,w){return(void 0===w||w>q.length)&&(w=q.length),q.substring(w-u.length,w)===u}(k," argument"))k="The ".concat(k," ").concat(l," ").concat(m(b,"type"));else{var p=
function(q,u,w){return"number"!=typeof w&&(w=0),!(w+u.length>q.length)&&-1!==q.indexOf(u,w)}(k,".")?"property":"argument";k='The "'.concat(k,'" ').concat(p," ").concat(l," ").concat(m(b,"type"))}return k+=". Received type ".concat(g(e))},TypeError),f("ERR_INVALID_ARG_VALUE",function(k,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=ug);var l=a.inspect(b);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(k,"' ").concat(e,". Received ").concat(l)},
TypeError),f("ERR_INVALID_RETURN_VALUE",function(k,b,e){var l;return l=e&&e.constructor&&e.constructor.name?"instance of ".concat(e.constructor.name):"type ".concat(g(e)),"Expected ".concat(k,' to be returned from the "').concat(b,'"')+" function but got ".concat(l,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var k=arguments.length,b=Array(k),e=0;e<k;e++)b[e]=arguments[e];void 0===n&&(n=mN());n(0<b.length,"At least one arg needs to be specified");k="The ";e=b.length;switch(b=b.map(function(l){return'"'.concat(l,
'"')}),e){case 1:k+="".concat(b[0]," argument");break;case 2:k+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:k+=b.slice(0,e-1).join(", "),k+=", and ".concat(b[e-1]," arguments")}return"".concat(k," must be specified")},TypeError),lN.codes=d,lN}function Gba(){function g(I,V){for(var T=0;T<V.length;T++){var Y=V[T];Y.enumerable=Y.enumerable||!1;Y.configurable=!0;"value"in Y&&(Y.writable=!0);Object.defineProperty(I,Y.key,Y)}}function c(I,V){return!V||"object"!==k(V)&&"function"!=typeof V?
h(I):V}function h(I){if(void 0===I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function f(I){var V="function"==typeof Map?new Map:void 0;return(f=function(T){function Y(){return n(T,arguments,d(this).constructor)}if(null===T||(na=T,-1===Function.toString.call(na).indexOf("[native code]")))return T;var na;if("function"!=typeof T)throw new TypeError("Super expression must either be null or a function");if(void 0!==V){if(V.has(T))return V.get(T);V.set(T,
Y)}return Y.prototype=Object.create(T.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),a(Y,T)})(I)}function m(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(I){return!1}}function n(I,V,T){return(n=m()?Reflect.construct:function(Y,na,Ba){var F=[null];F.push.apply(F,na);Y=new (Function.bind.apply(Y,F));return Ba&&
a(Y,Ba.prototype),Y}).apply(null,arguments)}function a(I,V){return(a=Object.setPrototypeOf||function(T,Y){return T.__proto__=Y,T})(I,V)}function d(I){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)})(I)}function k(I){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(I)}function b(I,
V,T){return(void 0===T||T>I.length)&&(T=I.length),I.substring(T-V.length,T)===V}function e(I){var V=Object.keys(I),T=Object.create(Object.getPrototypeOf(I));return V.forEach(function(Y){T[Y]=I[Y]}),Object.defineProperty(T,"message",{value:I.message}),T}function l(I){return u(I,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function p(I,V,T){var Y="",na="",Ba=0,F="",W=!1,P=l(I),S=P.split("\n"),fa=l(V).split("\n"),aa=0,oa=
"";if("strictEqual"===T&&"object"===k(I)&&"object"===k(V)&&null!==I&&null!==V&&(T="strictEqualObject"),1===S.length&&1===fa.length&&S[0]!==fa[0]){var Va=S[0].length+fa[0].length;if(10>=Va){if(!("object"===k(I)&&null!==I||"object"===k(V)&&null!==V||0===I&&0===V))return"".concat(L[T],"\n\n")+"".concat(S[0]," !== ").concat(fa[0],"\n")}else if("strictEqualObject"!==T&&Va<(q.stderr&&q.stderr.isTTY?q.stderr.columns:80)){for(;S[0][aa]===fa[0][aa];)aa++;2<aa&&(oa="\n  ".concat(function(ta,Ha){if(Ha=Math.floor(Ha),
0==ta.length||0==Ha)return"";var zb=ta.length*Ha;for(Ha=Math.floor(Math.log(Ha)/Math.log(2));Ha;)ta+=ta,Ha--;return ta+ta.substring(0,zb-ta.length)}(" ",aa),"^"),aa=0)}}I=S[S.length-1];for(V=fa[fa.length-1];I===V&&(2>aa++?F="\n  ".concat(I).concat(F):Y=I,S.pop(),fa.pop(),0!==S.length&&0!==fa.length);)I=S[S.length-1],V=fa[fa.length-1];I=Math.max(S.length,fa.length);if(0===I){Y=P.split("\n");if(30<Y.length)for(Y[26]="".concat(y,"...").concat(E);27<Y.length;)Y.pop();return"".concat(L.notIdentical,"\n\n").concat(Y.join("\n"),
"\n")}3<aa&&(F="\n".concat(y,"...").concat(E).concat(F),W=!0);""!==Y&&(F="\n  ".concat(Y).concat(F),Y="");P=0;T=L[T]+"\n".concat(A,"+ actual").concat(E," ").concat(C,"- expected").concat(E);V=" ".concat(y,"...").concat(E," Lines skipped");for(aa=0;aa<I;aa++){Va=aa-Ba;if(S.length<aa+1)1<Va&&2<aa&&(4<Va?(na+="\n".concat(y,"...").concat(E),W=!0):3<Va&&(na+="\n  ".concat(fa[aa-2]),P++),na+="\n  ".concat(fa[aa-1]),P++),Ba=aa,Y+="\n".concat(C,"-").concat(E," ").concat(fa[aa]),P++;else if(fa.length<aa+1)1<
Va&&2<aa&&(4<Va?(na+="\n".concat(y,"...").concat(E),W=!0):3<Va&&(na+="\n  ".concat(S[aa-2]),P++),na+="\n  ".concat(S[aa-1]),P++),Ba=aa,na+="\n".concat(A,"+").concat(E," ").concat(S[aa]),P++;else{var lb=fa[aa],qa=S[aa],ja=qa!==lb&&(!b(qa,",")||qa.slice(0,-1)!==lb);ja&&b(lb,",")&&lb.slice(0,-1)===qa&&(ja=!1,qa+=",");ja?(1<Va&&2<aa&&(4<Va?(na+="\n".concat(y,"...").concat(E),W=!0):3<Va&&(na+="\n  ".concat(S[aa-2]),P++),na+="\n  ".concat(S[aa-1]),P++),Ba=aa,na+="\n".concat(A,"+").concat(E," ").concat(qa),
Y+="\n".concat(C,"-").concat(E," ").concat(lb),P+=2):(na+=Y,Y="",1!==Va&&0!==aa||(na+="\n  ".concat(qa),P++))}if(20<P&&aa<I-2)return"".concat(T).concat(V,"\n").concat(na,"\n").concat(y,"...").concat(E).concat(Y,"\n")+"".concat(y,"...").concat(E)}return"".concat(T).concat(W?V:"","\n").concat(na).concat(Y).concat(F).concat(oa)}if(WZ)return XZ;WZ=!0;var q=oh,u=ug.inspect,w=UZ().codes.ERR_INVALID_ARG_TYPE,y="",A="",C="",E="",L={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",
strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',
notIdentical:"Values identical but not reference-equal:"};return XZ=function(I){function V(Y){if(!(this instanceof V))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==k(Y)||null===Y)throw new w("options","Object",Y);var na=Y.message,Ba=Y.operator,F=Y.stackStartFn,W=Y.actual;Y=Y.expected;var P=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=na)var S=c(this,d(V).call(this,String(na)));else if(q.stderr&&q.stderr.isTTY&&(q.stderr&&q.stderr.getColorDepth&&1!==q.stderr.getColorDepth()?
(y="\u001b[34m",A="\u001b[32m",E="\u001b[39m",C="\u001b[31m"):(y="",A="",E="",C="")),"object"===k(W)&&null!==W&&"object"===k(Y)&&null!==Y&&"stack"in W&&W instanceof Error&&"stack"in Y&&Y instanceof Error&&(W=e(W),Y=e(Y)),"deepStrictEqual"===Ba||"strictEqual"===Ba)S=c(this,d(V).call(this,p(W,Y,Ba)));else if("notDeepStrictEqual"===Ba||"notStrictEqual"===Ba){S=L[Ba];var fa=l(W).split("\n");if("notStrictEqual"===Ba&&"object"===k(W)&&null!==W&&(S=L.notStrictEqualObject),30<fa.length)for(fa[26]="".concat(y,
"...").concat(E);27<fa.length;)fa.pop();S=1===fa.length?c(this,d(V).call(this,"".concat(S," ").concat(fa[0]))):c(this,d(V).call(this,"".concat(S,"\n\n").concat(fa.join("\n"),"\n")))}else{S=l(W);fa="";var aa=L[Ba];"notDeepEqual"===Ba||"notEqual"===Ba?1024<(S="".concat(L[Ba],"\n\n").concat(S)).length&&(S="".concat(S.slice(0,1021),"...")):(fa="".concat(l(Y)),512<S.length&&(S="".concat(S.slice(0,509),"...")),512<fa.length&&(fa="".concat(fa.slice(0,509),"...")),"deepEqual"===Ba||"equal"===Ba?S="".concat(aa,
"\n\n").concat(S,"\n\nshould equal\n\n"):fa=" ".concat(Ba," ").concat(fa));S=c(this,d(V).call(this,"".concat(S).concat(fa)))}return Error.stackTraceLimit=P,S.generatedMessage=!na,Object.defineProperty(h(S),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),S.code="ERR_ASSERTION",S.actual=W,S.expected=Y,S.operator=Ba,Error.captureStackTrace&&Error.captureStackTrace(h(S),F),S.stack,S.name="AssertionError",c(S)}var T;return!function(Y,na){if("function"!=typeof na&&
null!==na)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(na&&na.prototype,{constructor:{value:Y,writable:!0,configurable:!0}});na&&a(Y,na)}(V,I),T=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(Y,na){return u(this,function(Ba){for(var F=1;F<arguments.length;F++){var W=null!=arguments[F]?arguments[F]:{},P=Object.keys(W);"function"==typeof Object.getOwnPropertySymbols&&
(P=P.concat(Object.getOwnPropertySymbols(W).filter(function(S){return Object.getOwnPropertyDescriptor(W,S).enumerable})));P.forEach(function(S){var fa=W[S];S in Ba?Object.defineProperty(Ba,S,{value:fa,enumerable:!0,configurable:!0,writable:!0}):Ba[S]=fa})}return Ba}({},na,{customInspect:!1,depth:0}))}}],g(V.prototype,T),V}(f(Error))}function YZ(g,c){if(!(g=function(h){if(Array.isArray(h))return h}(g)||function(h,f){var m=[],n=!0,a=!1,d=void 0;try{for(var k,b=h[Symbol.iterator]();!(n=(k=b.next()).done)&&
(m.push(k.value),!f||m.length!==f);n=!0);}catch(e){a=!0,d=e}finally{try{n||null==b.return||b.return()}finally{if(a)throw d;}}return m}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function ho(g){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function nN(g){return g.call.bind(g)}function Hba(g){if(0===
g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var h=g.charCodeAt(c);if(48>h||57<h)return!0}return 10===g.length&&g>=Math.pow(2,32)}function bF(g){return Object.keys(g).filter(Hba).concat(cF(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function ZZ(g,c){if(g===c)return 0;for(var h=g.length,f=c.length,m=0,n=Math.min(h,f);m<n;++m)if(g[m]!==c[m]){h=g[m];f=c[m];break}return h<f?-1:f<h?1:0}function nn(g,c,h,f){if(g===c)return 0!==g||!h||$Z(g,c);if(h){if("object"!==ho(g))return"number"==
typeof g&&oN(g)&&oN(c);if("object"!==ho(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==ho(g))return(null===c||"object"!==ho(c))&&g==c;if(null===c||"object"!==ho(c))return!1}var m=a_(g);if(m!==a_(c))return!1;if(Array.isArray(g)){if(g.length!==c.length)return!1;m=bF(g);var n=bF(c);return m.length===n.length&&Lz(g,c,h,f,1,m)}if("[object Object]"===m&&(!dF(g)&&dF(c)||!eF(g)&&eF(c)))return!1;if(b_(g)){if(!b_(c)||Date.prototype.getTime.call(g)!==
Date.prototype.getTime.call(c))return!1}else if(c_(g)){if(!c_(c)||(Iba?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Jba(g)||g instanceof Error){if(g.message!==c.message||g.name!==c.name)return!1}else{if(Kba(g)){if(h||!Lba(g)&&!Mba(g)){if(!function(a,d){return a.byteLength===d.byteLength&&0===ZZ(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(g,c))return!1}else if(!function(a,
d){if(a.byteLength!==d.byteLength)return!1;for(var k=0;k<a.byteLength;k++)if(a[k]!==d[k])return!1;return!0}(g,c))return!1;m=bF(g);n=bF(c);return m.length===n.length&&Lz(g,c,h,f,0,m)}if(eF(g))return!(!eF(c)||g.size!==c.size)&&Lz(g,c,h,f,2);if(dF(g))return!(!dF(c)||g.size!==c.size)&&Lz(g,c,h,f,3);if(Nba(g)){if(g.byteLength!==c.byteLength||0!==ZZ(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Oba(g)&&!function(a,d){return d_(a)?d_(d)&&$Z(Number.prototype.valueOf.call(a),Number.prototype.valueOf.call(d)):
e_(a)?e_(d)&&String.prototype.valueOf.call(a)===String.prototype.valueOf.call(d):f_(a)?f_(d)&&Boolean.prototype.valueOf.call(a)===Boolean.prototype.valueOf.call(d):g_(a)?g_(d)&&BigInt.prototype.valueOf.call(a)===BigInt.prototype.valueOf.call(d):Pba(d)&&Symbol.prototype.valueOf.call(a)===Symbol.prototype.valueOf.call(d)}(g,c))return!1}return Lz(g,c,h,f,0)}function h_(g,c){return c.filter(function(h){return fF(g,h)})}function Lz(g,c,h,f,m,n){if(5===arguments.length){n=Object.keys(g);var a=Object.keys(c);
if(n.length!==a.length)return!1}for(var d=0;d<n.length;d++)if(!Mz(c,n[d]))return!1;if(h&&5===arguments.length)if(a=cF(g),0!==a.length){var k=0;for(d=0;d<a.length;d++){var b=a[d];if(fF(g,b)){if(!fF(c,b))return!1;n.push(b);k++}else if(fF(c,b))return!1}d=cF(c);if(a.length!==d.length&&h_(c,d).length!==k)return!1}else if(a=cF(c),0!==a.length&&0!==h_(c,a).length)return!1;if(0===n.length&&(0===m||1===m&&0===g.length||0===g.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{a=f.val1.get(g);
if(void 0!==a&&(k=f.val2.get(c),void 0!==k))return a===k;f.position++}f.val1.set(g,f.position);f.val2.set(c,f.position);a=Qba(g,c,h,n,f,m);return f.val1.delete(g),f.val2.delete(c),a}function i_(g,c,h,f){for(var m=gF(g),n=0;n<m.length;n++){var a=m[n];if(nn(c,a,h,f))return g.delete(a),!0}return!1}function j_(g){switch(ho(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=+g;case "number":if(oN(g))return!1}return!0}function k_(g,c,h,f,m,n){for(var a=gF(g),d=
0;d<a.length;d++){var k=a[d];if(nn(h,k,m,n)&&nn(f,c.get(k),m,n))return g.delete(k),!0}return!1}function Qba(g,c,h,f,m,n){var a=0;if(2===n){if(!function(d,k,b,e){for(var l=null,p=gF(d),q=0;q<p.length;q++){var u=p[q];if("object"===ho(u)&&null!==u)null===l&&(l=new Set),l.add(u);else if(!k.has(u)){if(b)return!1;var w=d,y=k,A=j_(u);if(null!=A?!A:!y.has(A)||w.has(A))return!1;null===l&&(l=new Set);l.add(u)}}if(null!==l){k=gF(k);for(p=0;p<k.length;p++)if(q=k[p],"object"===ho(q)&&null!==q){if(!i_(l,q,b,e))return!1}else if(!b&&
!d.has(q)&&!i_(l,q,b,e))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(3===n){if(!function(d,k,b,e){for(var l=null,p=l_(d),q=0;q<p.length;q++){var u=YZ(p[q],2),w=u[0],y=u[1];if("object"===ho(w)&&null!==w)null===l&&(l=new Set),l.add(w);else if(u=k.get(w),void 0===u&&!k.has(w)||!nn(y,u,b,e)){if(b)return!1;u=d;var A=k,C=e,E=j_(w);if(null!=E)u=E;else{var L=A.get(E);u=!(void 0===L&&!A.has(E)||!nn(y,L,!1,C))&&!u.has(E)&&nn(y,L,!1,C)}if(!u)return!1;null===l&&(l=new Set);l.add(w)}}if(null!==
l){k=l_(k);for(p=0;p<k.length;p++)if(q=YZ(k[p],2),q=(w=q[0],q[1]),"object"===ho(w)&&null!==w){if(!k_(l,d,w,q,b,e))return!1}else if(!(b||d.has(w)&&nn(d.get(w),q,!1,e)||k_(l,d,w,q,!1,e)))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(1===n)for(;a<g.length;a++){if(!Mz(g,a)){if(Mz(c,a))return!1;for(f=Object.keys(g);a<f.length;a++)if(n=f[a],!Mz(c,n)||!nn(g[n],c[n],h,m))return!1;return f.length===Object.keys(c).length}if(!Mz(c,a)||!nn(g[a],c[a],h,m))return!1}for(a=0;a<f.length;a++)if(n=
f[a],!nn(g[n],c[n],h,m))return!1;return!0}function mN(){function g(S){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fa){return typeof fa}:function(fa){return fa&&"function"==typeof Symbol&&fa.constructor===Symbol&&fa!==Symbol.prototype?"symbol":typeof fa})(S)}function c(){q=m_.isDeepEqual;u=m_.isDeepStrictEqual}function h(S){if(S.message instanceof Error)throw S.message;throw new I(S);}function f(S,fa,aa,oa){if(!aa){var Va=!1;if(0===fa)Va=!0,oa="No value argument passed to `assert.ok()`";
else if(oa instanceof Error)throw oa;S=new I({actual:aa,expected:!0,message:oa,operator:"==",stackStartFn:S});throw S.generatedMessage=Va,S;}}function m(){for(var S=arguments.length,fa=Array(S),aa=0;aa<S;aa++)fa[aa]=arguments[aa];f.apply(void 0,[m,fa.length].concat(fa))}function n(S,fa,aa,oa){if("function"!=typeof fa){if(Y(fa))return fa.test(S);if(2===arguments.length)throw new A("expected",["Function","RegExp"],fa);if("object"!==g(S)||null===S){var Va=new I({actual:S,expected:fa,message:aa,operator:"deepStrictEqual",
stackStartFn:oa});throw Va.operator=oa.name,Va;}var lb=Object.keys(fa);if(fa instanceof Error)lb.push("name","message");else if(0===lb.length)throw new C("error",fa,"may not be an empty object");return void 0===q&&c(),lb.forEach(function(qa){if(!("string"==typeof S[qa]&&Y(fa[qa])&&fa[qa].test(S[qa])||qa in S&&u(S[qa],fa[qa]))){if(!aa){qa=new P(S,lb);var ja=new P(fa,lb,S);qa=new I({actual:qa,expected:ja,operator:"deepStrictEqual",stackStartFn:oa});throw qa.actual=S,qa.expected=fa,qa.operator=oa.name,
qa;}h({actual:S,expected:fa,message:aa,operator:oa.name,stackStartFn:oa})}}),!0}return void 0!==fa.prototype&&S instanceof fa||!Error.isPrototypeOf(fa)&&!0===fa.call({},S)}function a(S){if("function"!=typeof S)throw new A("fn","Function",S);try{S()}catch(fa){return fa}return W}function d(S){return T(S)||null!==S&&"object"===g(S)&&"function"==typeof S.then&&"function"==typeof S.catch}function k(S){return Promise.resolve().then(function(){var fa;if("function"==typeof S){if(!d(fa=S()))throw new E("instance of Promise",
"promiseFn",fa);}else{if(!d(S))throw new A("promiseFn",["Function","Promise"],S);fa=S}return Promise.resolve().then(function(){return fa}).then(function(){return W}).catch(function(aa){return aa})})}function b(S,fa,aa,oa){if("string"==typeof aa){if(4===arguments.length)throw new A("error",["Object","Error","Function","RegExp"],aa);if("object"===g(fa)&&null!==fa){if(fa.message===aa)throw new y("error/message",'The error message "'.concat(fa.message,'" is identical to the message.'));}else if(fa===
aa)throw new y("error/message",'The error "'.concat(fa,'" is identical to the message.'));oa=aa;aa=void 0}else if(null!=aa&&"object"!==g(aa)&&"function"!=typeof aa)throw new A("error",["Object","Error","Function","RegExp"],aa);if(fa===W){var Va="";aa&&aa.name&&(Va+=" (".concat(aa.name,")"));Va+=oa?": ".concat(oa):".";h({actual:void 0,expected:aa,operator:S.name,message:"Missing expected ".concat("rejects"===S.name?"rejection":"exception").concat(Va),stackStartFn:S})}if(aa&&!n(fa,aa,oa,S))throw fa;
}function e(S,fa,aa,oa){if(fa!==W){if("string"==typeof aa&&(oa=aa,aa=void 0),!aa||n(fa,aa))oa=oa?": ".concat(oa):".",h({actual:fa,expected:aa,operator:S.name,message:"Got unwanted ".concat("doesNotReject"===S.name?"rejection":"exception").concat(oa,"\n")+'Actual message: "'.concat(fa&&fa.message,'"'),stackStartFn:S});throw fa;}}function l(){for(var S=arguments.length,fa=Array(S),aa=0;aa<S;aa++)fa[aa]=arguments[aa];f.apply(void 0,[l,fa.length].concat(fa))}if(n_)return pN;n_=!0;var p=oh,q,u,w=UZ().codes,
y=w.ERR_AMBIGUOUS_ARGUMENT,A=w.ERR_INVALID_ARG_TYPE,C=w.ERR_INVALID_ARG_VALUE,E=w.ERR_INVALID_RETURN_VALUE,L=w.ERR_MISSING_ARGS,I=Gba(),V=ug.inspect;w=ug.types;var T=w.isPromise,Y=w.isRegExp;w=Object.assign?Object.assign:Rba.assign;var na=Object.is?Object.is:o_,Ba=!1,F=pN=m,W={};F.fail=function qa(fa,aa,oa,Va,lb){var ja=arguments.length;if(0===ja)var ta="Failed";else 1===ja?(oa=fa,fa=void 0):(!1===Ba&&(Ba=!0,(p.emitWarning?p.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.",
"DeprecationWarning","DEP0094")),2===ja&&(Va="!="));if(oa instanceof Error)throw oa;ja={actual:fa,expected:aa,operator:void 0===Va?"fail":Va,stackStartFn:lb||qa};void 0!==oa&&(ja.message=oa);ja=new I(ja);throw ta&&(ja.message=ta,ja.generatedMessage=!0),ja;};F.AssertionError=I;F.ok=m;F.equal=function lb(aa,oa,Va){if(2>arguments.length)throw new L("actual","expected");aa!=oa&&h({actual:aa,expected:oa,message:Va,operator:"==",stackStartFn:lb})};F.notEqual=function qa(oa,Va,lb){if(2>arguments.length)throw new L("actual",
"expected");oa==Va&&h({actual:oa,expected:Va,message:lb,operator:"!=",stackStartFn:qa})};F.deepEqual=function ja(Va,lb,qa){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();q(Va,lb)||h({actual:Va,expected:lb,message:qa,operator:"deepEqual",stackStartFn:ja})};F.notDeepEqual=function ta(lb,qa,ja){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();q(lb,qa)&&h({actual:lb,expected:qa,message:ja,operator:"notDeepEqual",stackStartFn:ta})};F.deepStrictEqual=function Ha(qa,
ja,ta){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();u(qa,ja)||h({actual:qa,expected:ja,message:ta,operator:"deepStrictEqual",stackStartFn:Ha})};F.notDeepStrictEqual=function zb(ja,ta,Ha){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();u(ja,ta)&&h({actual:ja,expected:ta,message:Ha,operator:"notDeepStrictEqual",stackStartFn:zb})};F.strictEqual=function Ub(ta,Ha,zb){if(2>arguments.length)throw new L("actual","expected");na(ta,Ha)||h({actual:ta,expected:Ha,
message:zb,operator:"strictEqual",stackStartFn:Ub})};F.notStrictEqual=function Nb(Ha,zb,Ub){if(2>arguments.length)throw new L("actual","expected");na(Ha,zb)&&h({actual:Ha,expected:zb,message:Ub,operator:"notStrictEqual",stackStartFn:Nb})};var P=function Sb(zb,Ub,Nb){var pc=this;if(!(this instanceof Sb))throw new TypeError("Cannot call a class as a function");!0;Ub.forEach(function(Eb){Eb in zb&&(void 0!==Nb&&"string"==typeof Nb[Eb]&&Y(zb[Eb])&&zb[Eb].test(Nb[Eb])?pc[Eb]=Nb[Eb]:pc[Eb]=zb[Eb])})};return F.throws=
function Nb(Ub){for(var Sb=arguments.length,pc=Array(1<Sb?Sb-1:0),Eb=1;Eb<Sb;Eb++)pc[Eb-1]=arguments[Eb];b.apply(void 0,[Nb,a(Ub)].concat(pc))},F.rejects=function Sb(Nb){for(var pc=arguments.length,Eb=Array(1<pc?pc-1:0),Lc=1;Lc<pc;Lc++)Eb[Lc-1]=arguments[Lc];return k(Nb).then(function(dd){return b.apply(void 0,[Sb,dd].concat(Eb))})},F.doesNotThrow=function pc(Sb){for(var Eb=arguments.length,Lc=Array(1<Eb?Eb-1:0),dd=1;dd<Eb;dd++)Lc[dd-1]=arguments[dd];e.apply(void 0,[pc,a(Sb)].concat(Lc))},F.doesNotReject=
function Eb(pc){for(var Lc=arguments.length,dd=Array(1<Lc?Lc-1:0),ia=1;ia<Lc;ia++)dd[ia-1]=arguments[ia];return k(pc).then(function(Ca){return e.apply(void 0,[Eb,Ca].concat(dd))})},F.ifError=function Lc(Eb){if(null!=Eb){var dd="ifError got unwanted exception: ";"object"===g(Eb)&&"string"==typeof Eb.message?0===Eb.message.length&&Eb.constructor?dd+=Eb.constructor.name:dd+=Eb.message:dd+=V(Eb);dd=new I({actual:Eb,expected:null,operator:"ifError",message:dd,stackStartFn:Lc});Eb=Eb.stack;if("string"==
typeof Eb){Eb=Eb.split("\n");Eb.shift();for(var ia=dd.stack.split("\n"),Ca=0;Ca<Eb.length;Ca++){var Ea=ia.indexOf(Eb[Ca]);if(-1!==Ea){ia=ia.slice(0,Ea);break}}dd.stack="".concat(ia.join("\n"),"\n").concat(Eb.join("\n"))}throw dd;}},F.strict=w(l,F,{equal:F.strictEqual,deepEqual:F.deepStrictEqual,notEqual:F.notStrictEqual,notDeepEqual:F.notDeepStrictEqual}),F.strict.strict=F.strict,pN}function Ki(g,c,h){if(!((this||Tg)instanceof Ki))return new Ki(g,c,h);var f=this||Tg;hF.call(this||Tg);this.setMaxListeners(Infinity);
"function"===typeof c&&(h=c,c={});c=c||{};if(!g||"object"!==typeof g){g=new Sba("First argument must be an abstract-leveldown compliant store");if("function"===typeof h)return iF.nextTick(h,g);throw g;}Tba.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");(this||Tg).options=Qw(c);(this||Tg)._db=g;(this||Tg).db=new p_(g);this.open(h||function(m){m&&f.emit("error",m)});(this||Tg).supports=Uba((this||Tg).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,
streams:!0});Object.keys((this||Tg).supports.additionalMethods).forEach(function(m){null==(this||Tg)[m]&&((this||Tg)[m]=function(){return(this||Tg).db[m].apply((this||Tg).db,arguments)})},this||Tg)}function Nz(g,c){if(!g._isOpening()&&!g.isOpen())return iF.nextTick(c,new q_("Database is not open")),!0}function fp(g,c){return Object.hasOwnProperty.call(g,c)&&c}function Vba(g){return g}function jF(g){return g}function qN(g){return void 0===g||null===g||rN.isBuffer(g)}function Dl(g){if(!((this||qq)instanceof
Dl))return new Dl(g);(this||qq).opts=g||{};(this||qq).encodings=sN}function Wba(g){return g.toString((this||yf).encoding)}function Xba(g){(this||yf).charReceived=g.length%2;(this||yf).charLength=(this||yf).charReceived?2:0}function Yba(g){(this||yf).charReceived=g.length%3;(this||yf).charLength=(this||yf).charReceived?3:0}function r_(){function g(A,C,E){(this||Ug).chunk=A;(this||Ug).encoding=C;(this||Ug).callback=E}function c(A,C){var E=Rw();A=A||{};var L=A.highWaterMark,I=A.objectMode?16:16384;(this||
Ug).highWaterMark=L||0===L?L:I;(this||Ug).objectMode=!!A.objectMode;C instanceof E&&((this||Ug).objectMode=(this||Ug).objectMode||!!A.writableObjectMode);(this||Ug).highWaterMark=~~(this||Ug).highWaterMark;(this||Ug).needDrain=!1;(this||Ug).ending=!1;(this||Ug).ended=!1;(this||Ug).finished=!1;(this||Ug).decodeStrings=!1!==A.decodeStrings;(this||Ug).defaultEncoding=A.defaultEncoding||"utf8";(this||Ug).length=0;(this||Ug).writing=!1;(this||Ug).corked=0;(this||Ug).sync=!0;(this||Ug).bufferProcessing=
!1;(this||Ug).onwrite=function(V){b(C,V)};(this||Ug).writecb=null;(this||Ug).writelen=0;(this||Ug).buffer=[];(this||Ug).pendingcb=0;(this||Ug).prefinished=!1;(this||Ug).errorEmitted=!1}function h(A){var C=Rw();if(!((this||Ug)instanceof h||(this||Ug)instanceof C))return new h(A);(this||Ug)._writableState=new c(A,this||Ug);(this||Ug).writable=!0;y.call(this||Ug)}function f(A,C,E){var L=Error("write after end");A.emit("error",L);q.nextTick(function(){E(L)})}function m(A,C,E,L){var I=!0;if(!(w.isBuffer(E)||
w.isString(E)||w.isNullOrUndefined(E)||C.objectMode)){var V=new TypeError("Invalid non-string/buffer chunk");A.emit("error",V);q.nextTick(function(){L(V)});I=!1}return I}function n(A,C,E,L,I){var V=L;!C.objectMode&&!1!==C.decodeStrings&&w.isString(E)&&(E=new u(E,V));w.isBuffer(E)&&(L="buffer");V=C.objectMode?1:E.length;C.length+=V;var T=C.length<C.highWaterMark;T||(C.needDrain=!0);C.writing||C.corked?C.buffer.push(new g(E,L,I)):a(A,C,!1,V,E,L,I);return T}function a(A,C,E,L,I,V,T){C.writelen=L;C.writecb=
T;C.writing=!0;C.sync=!0;E?A._writev(I,C.onwrite):A._write(I,V,C.onwrite);C.sync=!1}function d(A,C,E,L,I){E?q.nextTick(function(){C.pendingcb--;I(L)}):(C.pendingcb--,I(L));A._writableState.errorEmitted=!0;A.emit("error",L)}function k(A){A.writing=!1;A.writecb=null;A.length-=A.writelen;A.writelen=0}function b(A,C){var E=A._writableState,L=E.sync,I=E.writecb;k(E);if(C)d(A,E,L,C,I);else{var V=E.ending&&0===E.length&&!E.finished&&!E.writing;V||E.corked||E.bufferProcessing||!E.buffer.length||l(A,E);L?
q.nextTick(function(){e(A,E,V,I)}):e(A,E,V,I)}}function e(A,C,E,L){!E&&0===C.length&&C.needDrain&&(C.needDrain=!1,A.emit("drain"));C.pendingcb--;L();p(A,C)}function l(A,C){C.bufferProcessing=!0;if(A._writev&&1<C.buffer.length){for(var E=[],L=0;L<C.buffer.length;L++)E.push(C.buffer[L].callback);C.pendingcb++;a(A,C,!0,C.length,C.buffer,"",function(T){for(var Y=0;Y<E.length;Y++)C.pendingcb--,E[Y](T)});C.buffer=[]}else{for(L=0;L<C.buffer.length;L++){var I=C.buffer[L],V=I.chunk;a(A,C,!1,C.objectMode?1:
V.length,V,I.encoding,I.callback);if(C.writing){L++;break}}L<C.buffer.length?C.buffer=C.buffer.slice(L):C.buffer.length=0}C.bufferProcessing=!1}function p(A,C){var E=C.ending&&0===C.length&&!C.finished&&!C.writing;E&&(0===C.pendingcb?(C.prefinished||(C.prefinished=!0,A.emit("prefinish")),C.finished=!0,A.emit("finish")):C.prefinished||(C.prefinished=!0,A.emit("prefinish")));return E}if(s_)return tN;s_=!0;var q=oh;tN=h;var u=Eg.Buffer;h.WritableState=c;var w=Oj;w.inherits=cj;var y=Zt;w.inherits(h,y);
h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(A,C,E){var L=(this||Ug)._writableState,I=!1;w.isFunction(C)&&(E=C,C=null);w.isBuffer(A)?C="buffer":C||(C=L.defaultEncoding);w.isFunction(E)||(E=function(){});L.ended?f(this||Ug,L,E):m(this||Ug,L,A,E)&&(L.pendingcb++,I=n(this||Ug,L,A,C,E));return I};h.prototype.cork=function(){(this||Ug)._writableState.corked++};h.prototype.uncork=function(){var A=(this||Ug)._writableState;A.corked&&(A.corked--,
A.writing||A.corked||A.finished||A.bufferProcessing||!A.buffer.length||l(this||Ug,A))};h.prototype._write=function(A,C,E){E(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(A,C,E){var L=(this||Ug)._writableState;w.isFunction(A)?(E=A,C=A=null):w.isFunction(C)&&(E=C,C=null);w.isNullOrUndefined(A)||this.write(A,C);L.corked&&(L.corked=1,this.uncork());if(!L.ending&&!L.finished){A=this||Ug;L.ending=!0;p(A,L);if(E)if(L.finished)q.nextTick(E);else A.once("finish",E);L.ended=!0}};
return tN}function Rw(){function g(d){if(!((this||io)instanceof g))return new g(d);n.call(this||io,d);a.call(this||io,d);d&&!1===d.readable&&((this||io).readable=!1);d&&!1===d.writable&&((this||io).writable=!1);(this||io).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||io).allowHalfOpen=!1);this.once("end",c)}function c(){(this||io).allowHalfOpen||(this||io)._writableState.ended||h.nextTick((this||io).end.bind(this||io))}if(t_)return uN;t_=!0;var h=oh;uN=g;var f=Object.keys||function(d){var k=[],
b;for(b in d)k.push(b);return k},m=Oj;m.inherits=cj;var n=u_(),a=r_();m.inherits(g,n);(function(d,k){for(var b=0,e=d.length;b<e;b++)k(d[b],b)})(f(a.prototype),function(d){g.prototype[d]||(g.prototype[d]=a.prototype[d])});return uN}function u_(){function g(I,V){var T=Rw();I=I||{};var Y=I.highWaterMark,na=I.objectMode?16:16384;(this||Se).highWaterMark=Y||0===Y?Y:na;(this||Se).highWaterMark=~~(this||Se).highWaterMark;(this||Se).buffer=[];(this||Se).length=0;(this||Se).pipes=null;(this||Se).pipesCount=
0;(this||Se).flowing=null;(this||Se).ended=!1;(this||Se).endEmitted=!1;(this||Se).reading=!1;(this||Se).sync=!0;(this||Se).needReadable=!1;(this||Se).emittedReadable=!1;(this||Se).readableListening=!1;(this||Se).objectMode=!!I.objectMode;V instanceof T&&((this||Se).objectMode=(this||Se).objectMode||!!I.readableObjectMode);(this||Se).defaultEncoding=I.defaultEncoding||"utf8";(this||Se).ranOut=!1;(this||Se).awaitDrain=0;(this||Se).readingMore=!1;(this||Se).decoder=null;(this||Se).encoding=null;I.encoding&&
(E||(E=vN.StringDecoder),(this||Se).decoder=new E(I.encoding),(this||Se).encoding=I.encoding)}function c(I){Rw();if(!((this||Se)instanceof c))return new c(I);(this||Se)._readableState=new g(I,this||Se);(this||Se).readable=!0;A.call(this||Se)}function h(I,V,T,Y,na){var Ba=T;var F=null;C.isBuffer(Ba)||C.isString(Ba)||C.isNullOrUndefined(Ba)||V.objectMode||(F=new TypeError("Invalid non-string/buffer chunk"));(Ba=F)?I.emit("error",Ba):C.isNullOrUndefined(T)?(V.reading=!1,V.ended||(V.decoder&&!V.ended&&
(T=V.decoder.end())&&T.length&&(V.buffer.push(T),V.length+=V.objectMode?1:T.length),V.ended=!0,m(I))):V.objectMode||T&&0<T.length?V.ended&&!na?(T=Error("stream.push() after EOF"),I.emit("error",T)):V.endEmitted&&na?(T=Error("stream.unshift() after end event"),I.emit("error",T)):(!V.decoder||na||Y||(T=V.decoder.write(T)),na||(V.reading=!1),V.flowing&&0===V.length&&!V.sync?(I.emit("data",T),I.read(0)):(V.length+=V.objectMode?1:T.length,na?V.buffer.unshift(T):V.buffer.push(T),V.needReadable&&m(I)),a(I,
V)):na||(V.reading=!1);return!V.ended&&(V.needReadable||V.length<V.highWaterMark||0===V.length)}function f(I,V){if(0===V.length&&V.ended)return 0;if(V.objectMode)return 0===I?0:1;if(isNaN(I)||C.isNull(I))return V.flowing&&V.buffer.length?V.buffer[0].length:V.length;if(0>=I)return 0;if(I>V.highWaterMark){var T=I;if(8388608<=T)T=8388608;else{T--;for(var Y=1;32>Y;Y<<=1)T|=T>>Y;T++}V.highWaterMark=T}if(I>V.length){if(V.ended)return V.length;V.needReadable=!0;return 0}return I}function m(I){var V=I._readableState;
V.needReadable=!1;V.emittedReadable||(L("emitReadable",V.flowing),V.emittedReadable=!0,V.sync?q.nextTick(function(){n(I)}):n(I))}function n(I){L("emit readable");I.emit("readable");b(I)}function a(I,V){V.readingMore||(V.readingMore=!0,q.nextTick(function(){for(var T=V.length;!V.reading&&!V.flowing&&!V.ended&&V.length<V.highWaterMark&&(L("maybeReadMore read 0"),I.read(0),T!==V.length);)T=V.length;V.readingMore=!1}))}function d(I){return function(){var V=I._readableState;L("pipeOnDrain",V.awaitDrain);
V.awaitDrain&&V.awaitDrain--;0===V.awaitDrain&&y.listenerCount(I,"data")&&(V.flowing=!0,b(I))}}function k(I,V){V.resumeScheduled||(V.resumeScheduled=!0,q.nextTick(function(){V.resumeScheduled=!1;I.emit("resume");b(I);V.flowing&&!V.reading&&I.read(0)}))}function b(I){var V=I._readableState;L("flow",V.flowing);if(V.flowing){do var T=I.read();while(null!==T&&V.flowing)}}function e(I,V){var T=V.buffer,Y=V.length,na=!!V.decoder;V=!!V.objectMode;if(0===T.length)return null;if(0===Y)Y=null;else if(V)Y=T.shift();
else if(!I||I>=Y)Y=na?T.join(""):w.concat(T,Y),T.length=0;else if(I<T[0].length)V=T[0],Y=V.slice(0,I),T[0]=V.slice(I);else if(I===T[0].length)Y=T.shift();else{Y=na?"":new w(I);for(var Ba=0,F=0,W=T.length;F<W&&Ba<I;F++){V=T[0];var P=Math.min(I-Ba,V.length);na?Y+=V.slice(0,P):V.copy(Y,Ba,0,P);P<V.length?T[0]=V.slice(P):T.shift();Ba+=P}}return Y}function l(I){var V=I._readableState;if(0<V.length)throw Error("endReadable called on non-empty stream");V.endEmitted||(V.ended=!0,q.nextTick(function(){V.endEmitted||
0!==V.length||(V.endEmitted=!0,I.readable=!1,I.emit("end"))}))}function p(I,V){for(var T=0,Y=I.length;T<Y;T++)V(I[T],T)}if(v_)return wN;v_=!0;var q=oh;wN=c;var u=Zba,w=Eg.Buffer;c.ReadableState=g;var y=Wo.EventEmitter;y.listenerCount||(y.listenerCount=function(I,V){return I.listeners(V).length});var A=Zt,C=Oj;C.inherits=cj;var E,L=$ba;L=L&&L.debuglog?L.debuglog("stream"):function(){};C.inherits(c,A);c.prototype.push=function(I,V){var T=(this||Se)._readableState;C.isString(I)&&!T.objectMode&&(V=V||
T.defaultEncoding,V!==T.encoding&&(I=new w(I,V),V=""));return h(this||Se,T,I,V,!1)};c.prototype.unshift=function(I){return h(this||Se,(this||Se)._readableState,I,"",!0)};c.prototype.setEncoding=function(I){E||(E=vN.StringDecoder);(this||Se)._readableState.decoder=new E(I);(this||Se)._readableState.encoding=I;return this||Se};c.prototype.read=function(I){L("read",I);var V=(this||Se)._readableState,T=I;if(!C.isNumber(I)||0<I)V.emittedReadable=!1;if(0===I&&V.needReadable&&(V.length>=V.highWaterMark||
V.ended))return L("read: emitReadable",V.length,V.ended),0===V.length&&V.ended?l(this||Se):m(this||Se),null;I=f(I,V);if(0===I&&V.ended)return 0===V.length&&l(this||Se),null;var Y=V.needReadable;L("need readable",Y);if(0===V.length||V.length-I<V.highWaterMark)Y=!0,L("length less than watermark",Y);if(V.ended||V.reading)Y=!1,L("reading or ended",Y);Y&&(L("do read"),V.reading=!0,V.sync=!0,0===V.length&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1);Y&&!V.reading&&(I=f(T,V));Y=0<I?e(I,V):
null;C.isNull(Y)&&(V.needReadable=!0,I=0);V.length-=I;0!==V.length||V.ended||(V.needReadable=!0);T!==I&&V.ended&&0===V.length&&l(this||Se);C.isNull(Y)||this.emit("data",Y);return Y};c.prototype._read=function(I){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(I,V){function T(Va){L("onunpipe");Va===fa&&na()}function Y(){L("onend");I.end()}function na(){L("cleanup");I.removeListener("close",W);I.removeListener("finish",P);I.removeListener("drain",oa);I.removeListener("error",
F);I.removeListener("unpipe",T);fa.removeListener("end",Y);fa.removeListener("end",na);fa.removeListener("data",Ba);!aa.awaitDrain||I._writableState&&!I._writableState.needDrain||oa()}function Ba(Va){L("ondata");!1===I.write(Va)&&(L("false write response, pause",fa._readableState.awaitDrain),fa._readableState.awaitDrain++,fa.pause())}function F(Va){L("onerror",Va);S();I.removeListener("error",F);0===y.listenerCount(I,"error")&&I.emit("error",Va)}function W(){I.removeListener("finish",P);S()}function P(){L("onfinish");
I.removeListener("close",W);S()}function S(){L("unpipe");fa.unpipe(I)}var fa=this||Se,aa=(this||Se)._readableState;switch(aa.pipesCount){case 0:aa.pipes=I;break;case 1:aa.pipes=[aa.pipes,I];break;default:aa.pipes.push(I)}aa.pipesCount+=1;L("pipe count=%d opts=%j",aa.pipesCount,V);V=V&&!1===V.end||I===q.stdout||I===q.stderr?na:Y;if(aa.endEmitted)q.nextTick(V);else fa.once("end",V);I.on("unpipe",T);var oa=d(fa);I.on("drain",oa);fa.on("data",Ba);if(I._events&&I._events.error)u(I._events.error)?I._events.error.unshift(F):
I._events.error=[F,I._events.error];else I.on("error",F);I.once("close",W);I.once("finish",P);I.emit("pipe",fa);aa.flowing||(L("pipe resume"),fa.resume());return I};c.prototype.unpipe=function(I){var V=(this||Se)._readableState;if(0===V.pipesCount)return this||Se;if(1===V.pipesCount){if(I&&I!==V.pipes)return this||Se;I||(I=V.pipes);V.pipes=null;V.pipesCount=0;V.flowing=!1;I&&I.emit("unpipe",this||Se);return this||Se}if(!I){I=V.pipes;var T=V.pipesCount;V.pipes=null;V.pipesCount=0;V.flowing=!1;for(var Y=
0;Y<T;Y++)I[Y].emit("unpipe",this||Se);return this||Se}a:{Y=V.pipes;T=0;for(var na=Y.length;T<na;T++)if(Y[T]===I){Y=T;break a}Y=-1}if(-1===Y)return this||Se;V.pipes.splice(Y,1);--V.pipesCount;1===V.pipesCount&&(V.pipes=V.pipes[0]);I.emit("unpipe",this||Se);return this||Se};c.prototype.on=function(I,V){V=A.prototype.on.call(this||Se,I,V);"data"===I&&!1!==(this||Se)._readableState.flowing&&this.resume();if("readable"===I&&(this||Se).readable&&(I=(this||Se)._readableState,!I.readableListening))if(I.readableListening=
!0,I.emittedReadable=!1,I.needReadable=!0,I.reading)I.length&&m(this||Se);else{var T=this||Se;q.nextTick(function(){L("readable nexttick read 0");T.read(0)})}return V};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var I=(this||Se)._readableState;I.flowing||(L("resume"),I.flowing=!0,I.reading||(L("resume read 0"),this.read(0)),k(this||Se,I));return this||Se};c.prototype.pause=function(){L("call pause flowing=%j",(this||Se)._readableState.flowing);!1!==(this||Se)._readableState.flowing&&
(L("pause"),(this||Se)._readableState.flowing=!1,this.emit("pause"));return this||Se};c.prototype.wrap=function(I){var V=(this||Se)._readableState,T=!1,Y=this||Se;I.on("end",function(){L("wrapped end");if(V.decoder&&!V.ended){var Ba=V.decoder.end();Ba&&Ba.length&&Y.push(Ba)}Y.push(null)});I.on("data",function(Ba){L("wrapped data");V.decoder&&(Ba=V.decoder.write(Ba));Ba&&(V.objectMode||Ba.length)&&!Y.push(Ba)&&(T=!0,I.pause())});for(var na in I)C.isFunction(I[na])&&C.isUndefined((this||Se)[na])&&((this||
Se)[na]=function(Ba){return function(){return I[Ba].apply(I,arguments)}}(na));p(["error","close","destroy","pause","resume"],function(Ba){I.on(Ba,Y.emit.bind(Y,Ba))});Y._read=function(Ba){L("wrapped _read",Ba);T&&(T=!1,I.resume())};return Y};c._fromList=e;return wN}function w_(){function g(n,a){(this||Ik).afterTransform=function(d,k){var b=a._transformState;b.transforming=!1;var e=b.writecb;e?(b.writechunk=null,b.writecb=null,m.isNullOrUndefined(k)||a.push(k),e&&e(d),d=a._readableState,d.reading=
!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};(this||Ik).needTransform=!1;(this||Ik).transforming=!1;(this||Ik).writecb=null;(this||Ik).writechunk=null}function c(n){if(!((this||Ik)instanceof c))return new c(n);f.call(this||Ik,n);(this||Ik)._transformState=new g(n,this||Ik);var a=this||Ik;(this||Ik)._readableState.needReadable=!0;(this||Ik)._readableState.sync=!1;this.once("prefinish",function(){m.isFunction((this||
Ik)._flush)?this._flush(function(d){h(a,d)}):h(a)})}function h(n,a){if(a)return n.emit("error",a);a=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(a.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(x_)return xN;x_=!0;xN=c;var f=Rw(),m=Oj;m.inherits=cj;m.inherits(c,f);c.prototype.push=function(n,a){(this||Ik)._transformState.needTransform=!1;return f.prototype.push.call(this||Ik,n,a)};c.prototype._transform=
function(n,a,d){throw Error("not implemented");};c.prototype._write=function(n,a,d){var k=(this||Ik)._transformState;k.writecb=d;k.writechunk=n;k.writeencoding=a;k.transforming||(n=(this||Ik)._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||Ik)._transformState;m.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};
return xN}function aca(){function g(f){if(!((this||y_)instanceof g))return new g(f);c.call(this||y_,f)}if(z_)return yN;z_=!0;yN=g;var c=w_(),h=Oj;h.inherits=cj;h.inherits(g,c);g.prototype._transform=function(f,m,n){n(null,f)};return yN}function Oz(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function bca(g){var c={},h;for(h in g)c[h]=g[h];return c}function cca(g,c,h){g.open(function(){});return{apply:function(f,m,n){m=m||{};for(var a=[],d=-1,k=f.length;++d<k;){var b=f[d],e=b,l=b.prefix;
l&&l.options&&(e.keyEncoding=e.keyEncoding||l.options.keyEncoding,e.valueEncoding=e.valueEncoding||l.options.valueEncoding);e=b;l=b.prefix;l="function"===typeof l.prefix?l.prefix():l;e.prefix=l;a.push({key:c.encode([b.prefix,h.encodeKey(b.key,m,b)]),value:"del"!==b.type&&h.encodeValue(b.value,m,b),type:b.type})}g.db.batch(a,m,n)},get:function(f,m,n,a){n.asBuffer=h.valueAsBuffer(n);return g.db.get(c.encode([m,h.encodeKey(f,n,void 0)]),n,function(d,k){d?a(d):a(null,h.decodeValue(k,n))})},createDecoder:function(f){return function(m,
n){return{key:h.decodeKey(c.decode(m)[1],f),value:h.decodeValue(n,f)}}},isClosed:function(){return g.isClosed()},close:function(f){return g.close(f)},iterator:function(f){var m=bca(f||{}),n=f.prefix||[];dca.toLtgt(f,m,function(a){return c.encode([n,h.encodeKey(a,m,{})])},c.lowerBound,c.upperBound);m.prefix=null;m.keyAsBuffer=m.valueAsBuffer=!1;"number"!==typeof m.limit&&(m.limit=-1);m.keyAsBuffer=c.buffer;m.valueAsBuffer=h.valueAsBuffer(m);return function(a){return{next:function(d){return a.next(d)},
end:function(d){a.end(d)}}}(g.db.iterator(m))}}}function zN(){Error.call(this)}function Hr(g,c){if(!(this instanceof Hr))return new Hr(g,c);A_.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=c}function Sw(g){B_.call(this||rq,g);(this||rq)._destroyed=!1}function eca(g,c,h){h(null,g)}function AN(g){return function(c,h,f){"function"==typeof c&&(f=h,h=c,c={});"function"!=typeof h&&(h=eca);"function"!=typeof f&&(f=null);return g(c,h,f)}}function fi(g){this._capacity=
C_(g);this._front=this._length=0;if(D_(g)){for(var c=g.length,h=0;h<c;++h)this[h]=g[h];this._length=c}}function C_(g){if("number"!==typeof g)if(D_(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function BN(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;
var a=c;var d=f}}return a+"-"+n}function kF(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function fca(g,c){return g.pos-c.pos}function E_(g){var c=[];kF(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(fca).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function F_(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=
m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function gca(g,c){return g.pos-c.pos}function G_(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function hca(g,c){return g[0]<c[0]?-1:1}function H_(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||
f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=hca,p=0,q=b.length;p<q;)k=p+q>>>1,0>l(b[k],e)?p=k+1:q=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function I_(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],
conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=H_(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var q=p.pop();if(0===q.diff)q.ids[0]===e.ids[0]&&l.push(q);else for(var u=q.ids[2],w=0,y=u.length;w<y;w++)p.push({ids:u[w],diff:q.diff-1,parent:q.ids,parentIdx:w})}(l=l[0])?(n=H_(l.ids,
e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||f.push(c);f.sort(gca);return{tree:f,conflicts:m||"internal_node"}}function ica(g,c){g=F_(g);for(var h,f,m=0,n=g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+k,ids:G_(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:G_(d,0)};f=f?I_(f,b,!0).tree:[b]}h&&kF(f,function(l,p,q){delete h[p+"-"+q]});return{tree:f,revs:h?
Object.keys(h):[]}}function jca(g){return g.ids}function J_(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function K_(g){if(!/^\d+-/.test(g))return Am.createError(Am.INVALID_REV);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function L_(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=$t.uuid());var m=$t.rev(g,h.deterministic_revs);if(g._rev){c=K_(g._rev);if(c.error)return c;g._rev_tree=
[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=K_(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=[{pos:n,ids:[m,f,[]]}]}}$t.invalidIdError(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};
for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!kca[d])throw g=Am.createError(Am.DOC_VALIDATION,d),g.message=Am.DOC_VALIDATION.message+": "+d,g;n&&!lca[d]?f.metadata[d.slice(1)]=g[d]:f.data[d]=g[d]}return f}function mca(g,c,h){try{var f=Pz.atob(g.data)}catch(m){f={error:Am.createError(Am.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);g.length=f.length;g.data="blob"===c?Pz.binaryStringToBlobOrBuffer(f,g.content_type):"base64"===c?Pz.btoa(f):
f;M_.binaryMd5(f,function(m){g.digest="md5-"+m;h()})}function nca(g,c,h){M_.binaryMd5(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?Pz.blobOrBufferToBinaryString(g.data,function(m){g.data=m;h()}):"base64"===c?Pz.blobOrBufferToBase64(g.data,function(m){g.data=m;h()}):h()})}function oca(g,c,h){if(g.stub)return h();"string"===typeof g.data?mca(g,c,h):nca(g,c,h)}function N_(g,c,h,f,m,n,a,d){if(dm.revExists(c.rev_tree,h.metadata.rev)&&!d)return f[m]=h,n();var k=
c.winningRev||dm.winningRev(c),b="deleted"in c?c.deleted:dm.isDeleted(c,k),e="deleted"in h.metadata?h.metadata.deleted:dm.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);b&&!e&&d&&l&&(l=h.data,l._rev=k,l._id=h.metadata.id,h=L_(l,d));g=dm.merge(c.rev_tree,h.metadata.rev_tree[0],g);if(d&&(b&&e&&"new_leaf"!==g.conflicts||!b&&"new_leaf"!==g.conflicts||b&&!e&&"new_branch"===g.conflicts))return h=Am.createError(Am.REV_CONFLICT),f[m]=h,n();f=h.metadata.rev;h.metadata.rev_tree=g.tree;h.stemmedRevs=g.stemmedRevs||
[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=dm.winningRev(h.metadata);d=dm.isDeleted(h.metadata,c);b=b===d?0:b<d?-1:1;f=f===c?d:dm.isDeleted(h.metadata,f);a(h,c,d,f,!0,b,m,n)}function Qz(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function O_(g,c){g=new Uint8Array(g);return Rz.blob([g],{type:c})}function pca(g,c){Rz.readAsBinaryString(g,c)}function P_(g,c){c=c.prefix()[0];g=g._cache;var h=g.get(c);h||(h=new jo.Map,g.set(c,h));return h}function au(){this._batch=[];this._cache=
new jo.Map}function CN(g){return"winningRev"in g?g.winningRev:Sz.winningRev(g)}function qca(g,c,h){var f=g.content_type;return new Promise(function(m,n){c.binaryStore.get(g.digest,function(a,d){if(a){if("NotFoundError"!==a.name)return n(a);a=h.binary?Rz.binaryStringToBlobOrBuffer("",f):""}else a=h.binary?O_(d,f):d.toString("base64");delete g.stub;delete g.length;g.data=a;m()})})}function DN(g,c,h){var f=[];g.forEach(function(m){m.doc&&m.doc._attachments&&Object.keys(m.doc._attachments).forEach(function(n){n=
m.doc._attachments[n];"data"in n||f.push(n)})});return Promise.all(f.map(function(m){return qca(m,c,h)}))}function EN(g){(this||bu).db=g;(this||bu)._ended=!1;(this||bu)._nexting=!1}function Ir(g){(this||ij)._db=g;(this||ij)._operations=[];(this||ij)._written=!1}function El(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||Cj).location=g;(this||Cj).status="new"}
function Bm(g,c,h,f,m,n){this._color=g;this.key=c;this.value=h;this.left=f;this.right=m;this._count=n}function gp(g){return new Bm(g._color,g.key,g.value,g.left,g.right,g._count)}function Jr(g,c){return new Bm(g,c.key,c.value,c.left,c.right,c._count)}function jj(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function Tw(g,c){this._compare=g;this.root=c}function FN(g,c){if(c.left){var h=FN(g,c.left);if(h)return h}if(h=g(c.key,c.value))return h;if(c.right)return FN(g,c.right)}function GN(g,
c,h,f){if(0>=c(g,f.key)){if(f.left){var m=GN(g,c,h,f.left);if(m)return m}if(m=h(f.key,f.value))return m}if(f.right)return GN(g,c,h,f.right)}function HN(g,c,h,f,m){var n=h(g,m.key),a=h(c,m.key);if(0>=n&&(m.left&&(n=HN(g,c,h,f,m.left))||0<a&&(n=f(m.key,m.value))))return n;if(0<a&&m.right)return HN(g,c,h,f,m.right)}function Cm(g,c){this.tree=g;this._stack=c}function Q_(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function rca(g,c){return g<c?-1:g>
c?1:0}function R_(g,c){for(var h in g)c[h]=g[h]}function Uw(g,c,h){return sq(g,c,h)}function sca(g){return 0<Dm.compare(g,(this||Ne)._end)}function tca(g){return 0<=Dm.compare(g,(this||Ne)._end)}function uca(g){return 0>Dm.compare(g,(this||Ne)._end)}function vca(g){return 0>=Dm.compare(g,(this||Ne)._end)}function lF(g,c){S_.call(this||Ne,g);(this||Ne)._limit=c.limit;-1===(this||Ne)._limit&&((this||Ne)._limit=Infinity);g=g._store[g._location];(this||Ne).keyAsBuffer=!1!==c.keyAsBuffer;(this||Ne).valueAsBuffer=
!1!==c.valueAsBuffer;(this||Ne)._reverse=c.reverse;(this||Ne)._options=c;(this||Ne)._done=0;(this||Ne)._reverse?((this||Ne)._incr="prev",(this||Ne)._start=Dm.upperBound(c),(this||Ne)._end=Dm.lowerBound(c),"undefined"===typeof(this||Ne)._start?(this||Ne)._tree=g.end:Dm.upperBoundInclusive(c)?(this||Ne)._tree=g.le((this||Ne)._start):(this||Ne)._tree=g.lt((this||Ne)._start),(this||Ne)._end&&(Dm.lowerBoundInclusive(c)?(this||Ne)._test=tca:(this||Ne)._test=sca)):((this||Ne)._incr="next",(this||Ne)._start=
Dm.lowerBound(c),(this||Ne)._end=Dm.upperBound(c),"undefined"===typeof(this||Ne)._start?(this||Ne)._tree=g.begin:Dm.lowerBoundInclusive(c)?(this||Ne)._tree=g.ge((this||Ne)._start):(this||Ne)._tree=g.gt((this||Ne)._start),(this||Ne)._end&&(Dm.upperBoundInclusive(c)?(this||Ne)._test=vca:(this||Ne)._test=uca))}function em(g){if(!((this||Ne)instanceof em))return new em(g);T_.call(this||Ne,"string"===typeof g?g:"");(this||Ne)._location=(this||Ne).location?"$"+(this||Ne).location:"_tree";(this||Ne)._store=
(this||Ne).location?Vw:this||Ne;(this||Ne)._store[(this||Ne)._location]=(this||Ne)._store[(this||Ne)._location]||wca(Dm.compare)}function U_(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function IN(g,c){g=xca.assign({db:yca},g);zca.call(this,g,c)}function JN(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function Tz(g){var c,h,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==
k.nextAddress){if(!g||Of.obj.isEmpty(g))return k.return(!1);if(g&&g._rev)return k.return(g);c=g;h=c.type;f=c.name;m=c._id;k.setFinallyBlock(2);n=Object;a=n.assign;d=g;return k.yield(Of.MorphicDB.default.fetchCommit(h,f,m),4)}2!=k.nextAddress&&a.call(n,d,k.yieldResult);k.enterFinallyBlock();return k.return(g)})}function Uz(g){return Object.values(g).filter(function(c){return 1==Sc.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function mF(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return g.label=
"loading System Elements",g.progress=0,g.status="core elements...",c.yield(Sc.resource("styleguide://System/buttons/light").read(),2);case 2:return g.progress=.2,g.status="top bar...",c.yield(Sc.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=.4,g.status="scene graph...",c.yield(Sc.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",c.yield(Sc.resource("styleguide://SystemIDE/scene graph side bar master").read(),
5);case 5:return g.progress=.8,g.status="world loader...",c.yield(Sc.resource("styleguide://partial freezing/project browser").read(),6);case 6:return g.progress=1,c.yield(Sc.promise.delay(500),0)}})}function nF(){Sc.localNamePromise=null}function KN(g){delete Sc.fetchedSnapshots[g]}function Kr(g,c,h,f){f=void 0===f?h.name:f;(g[c]=fm.fun.wrap(g[c],h)).hookFunc=h;h.hookName=f}function cu(g,c,h){for(var f=[],m=g[c];m;)f.push(m),m=m.originalFunction;m="string"===typeof h?f.find(function(n){return n.hookFunc&&
n.hookFunc.hookName===h}):f.find(function(n){return n.hookFunc===h});if(!m)return!1;fm.arr.remove(f,m);g[c]=f.reduceRight(function(n,a){return fm.fun.wrap(n,a.hookFunc||a)});return!0}function Lr(g,c,h){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof h&&g.hookFunc.hookName===h||g.hookFunc===h))return!0;g=g.originalFunction}return!1}function Vz(g){if(g.loads){var c=g.loads;return tq.arr.uniq(Object.keys(tq.loadedModules(g)).concat(Object.keys(c))).reduce(function(h,f){var m=c[f]?c[f].depMap:{};h[f]=
Object.keys(m).map(function(n){var a=m[n];return"@empty"===a?a+"/"+n:a});return h},{})}return Object.keys(g._loader.moduleRecords).reduce(function(h,f){h[f]=g._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(m){return m.name});return h},{})}function Wz(g,c,h,f,m){var n=g.get("@lively-env").pendingExportChanges;(g=tl.module(g,c).record())&&(h in g.exports||m)&&((n[c]||(n[c]={}))[h]=f)}function oF(g,c){var h=g.get("@lively-env").pendingExportChanges[c];h&&(tl.clearPendingModuleExportChanges(g,
c),tl.updateModuleExports(g,c,h))}function Xz(g,c,h,f,m){var n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);g.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return d.yield(zi.moduleSourceChangeEsm(g,c,h,m),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+" with format "+f);return d.yield(zi.moduleSourceChangeGlobal(g,
c,h,m),7);case 7:n=d.yieldResult;d.jumpTo(5);break;case 8:n=d.yieldResult;case 5:return zi.emit("lively.modules/modulechanged",{module:c,newSource:h,options:m},Date.now(),g),d.return(n);case 2:throw a=d.enterCatchBlock(),zi.emit("lively.modules/modulechanged",{module:c,newSource:h,error:a,options:m},Date.now(),g),a;}})}function LN(g){return/\.js/i.test(g)}function MN(g){return Jk.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function du(g){return/^[^:\\]+:\/\//.test(g)}function pF(g){var c=
g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,"/");return g+h}function qF(g,c,h){h=void 0===h?!1:h;var f=oe.classHolder.PackageRegistry.ofSystem(g),m=f.allPackageURLs();g=h?c:oe.normalizePackageURL(g,c,m);return{pkg:f.findPackageWithURL(g),url:g,allPackageURLs:m,registry:f}}function rF(g,c,h){g=oe.lookupPackage(g,c,void 0===h?!1:h);c=g.url;h=g.registry;return g.pkg||h.addPackageAt(c,
"devPackageDirs")}function Yz(g,c,h){g=oe.lookupPackage(g,c,void 0===h?!1:h);if(h=g.pkg)return h;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");}function sF(g,c,h){return oe.getPackage(g,h).updateConfig(c)}function tF(g,c){return Promise.resolve(oe.ensurePackage(g,c)).then(function(h){return h.import()})}function uF(g,c){return(g=oe.lookupPackage(g,c).pkg)?g.remove():null}function vF(g,c,h){return oe.getPackage(g,c).reload(h)}function wF(g,c,h){return Promise.resolve(oe.ensurePackage(g,
c)).then(function(f){return f.register(h)})}function xF(g){return oe.Package.allPackages(g).map(function(c){return c.asSpec()})}function uq(g,c){g="string"===typeof g?Jc.parse(g):g;c.scope=Jc.query.resolveReferences(Jc.query.scopes(g));return Jc.ClassReplaceVisitor.run(g,c)}function yF(g,c,h){h=Fl.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=Fl.relative(g,c));return f._load(c,h)}function zF(g,c,h){h=Fl.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&
(c=Fl.relative(g,c));return f._resolveFilename(c,h)}function eu(g,c,h){var f=me.livelySystemEnv(g);c=g.decanonicalize(c,h);return f.loadedModules[c]||(f.loadedModules[c]=new me.ModuleInterface(g,c))}function AF(g,c,h){h=void 0===h?!1:h;var f=me.livelySystemEnv(g);return(h?c:g.normalizeSync(c))in f.loadedModules}function BF(g,c,h){h=void 0===h?!1:h;var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){me.livelySystemEnv(g);f=h?c:g.normalizeSync(c);if(me.isModuleLoaded(g,
f,!0))return a.return(!0);m=me.Package.forModuleId(g,f);return m&&"no group"!==m.name?a.yield(m.hasResource(f),3):(n=g.resource(f).exists(),a.jumpTo(2))}2!=a.nextAddress&&(n=a.yieldResult);return a.return(n)})}function NN(){return Nd.exceptions}function ON(g){return Nd.exceptions=g}function PN(g,c,h,f,m){c=String(c);g=f.sourceAccessorName;var n=f.recorder,a=f.recorderName,d=f.dontTransform,k=f.varDefinitionCallbackName,b=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;g=b?g:void 0;f={topLevelVarRecorder:n,
varRecorderName:a,sourceAccessorName:g,dontTransform:d,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:k,evalId:f.nextEvalId(),classTransform:Nd.classToFunctionTransform,currentModuleAccessor:Nd.funcCall(Nd.member(Nd.funcCall(Nd.member(Nd.member("__lvVarRecorder","System"),"get"),Nd.literal("@lively-env")),"moduleEnv"),Nd.literal(h))};n=m?'console.log("[lively.modules] executing module '+h+'");\n':"";d="";"System.global"===a?delete f.declarationWrapperName:
(n+='SystemJS.get("@lively-env").evaluationStart("'+h+'");\nvar '+(a+' = SystemJS.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+(b?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),d+='\nSystemJS.get("@lively-env").evaluationEnd("'+h+'");');try{var e=n+Nd.evalCodeTransform(c,f)+d;m&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=e);return{source:e,options:f}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+h+" "+l.stack),
{source:c,options:f}}}function QN(g,c,h,f,m,n){c=String(c);g=Object.assign({},m,{classTransform:Nd.classToFunctionTransform,topLevelVarRecorder:f.recorder,varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:Nd.funcCall(Nd.member(Nd.funcCall(Nd.member(Nd.member("__lvVarRecorder","System"),"get"),Nd.literal("@lively-env")),"moduleEnv"),Nd.literal(h))});try{var a=Nd.evalCodeTransformOfSystemRegisterSetters(c,
g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=a);return a}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",d.stack),c}}function CF(g,c){return g.translate(c).then(function(h){var f=Nd.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var m=
f.expression;f=m.arguments[0].elements.map(function(n){return n.value});m=m.arguments[1];h=h.slice(m.start,m.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");g.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:f,declare:h}})}function DF(g,c){return g.translate(c).then(function(h){return{translated:h}})}function Zz(g){Nd.isHookInstalled(g,"translate","lively_modules_translate_hook")||Nd.installHook(g,
"translate",function(c,h){return Nd.customTranslate.call(g,c,h)},"lively_modules_translate_hook")}function EF(g){Nd.removeHook(g,"translate","lively_modules_translate_hook")}function FF(g){g.resource=Yf.resource;Yf.isHookInstalled(g,"fetch",Yf.fetchResource)&&Yf.removeHook(g,"fetch","fetchResource");Yf.installHook(g,"fetch",Yf.fetchResource);Yf.isHookInstalled(g,"resource","livelyProtocol")&&Yf.removeHook(g,"fetch","livelyProtocol");Yf.installHook(g,"resource",Yf.livelyProtocol)}function RN(g){Yf.removeHook(g,
"fetch","fetchResource");Yf.removeHook(g,"resource","livelyProtocol");delete g.resource}function GF(g){ed.isHookInstalled(g,"normalize","normalizeHook")||ed.installHook(g,"normalize",ed.normalizeHook,"normalizeHook");ed.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||ed.installHook(g,"decanonicalize",ed.decanonicalizeHook,"decanonicalizeHook");ed.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||ed.installHook(g,"normalizeSync",ed.decanonicalizeHook,"decanonicalizeHook");ed.isHookInstalled(g,
"newModule","newModule_volatile")||ed.installHook(g,"newModule",ed.newModule_volatile,"newModule_volatile");ed.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||ed.installHook(g,"instantiate",ed.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");ed.isHookInstalled(g,"locate","locateHook")||ed.installHook(g,"locate",ed.locateHook,"locateHook")}function HF(g){ed.removeHook(g,"normalize","normalizeHook");ed.removeHook(g,"decanonicalize","decanonicalizeHook");
ed.removeHook(g,"normalizeSync","decanonicalizeHook");ed.removeHook(g,"newModule","newModule_volatile");ed.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");ed.removeHook(g,"locate","locateHook")}function IF(g){return{moduleEnv:function(c){return ed.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){ed.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){ed.classHolder.module(g,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]=
{}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=ed.obj.deepCopy(ed.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||
(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function fu(g,c){return g&&"string"!==typeof g?g:ed.systems()[g]||(ed.systems()[g]=ed.makeSystem(c))}function gu(g){g=g&&"string"!==typeof g?ed.nameOfSystem(g):g;delete ed.systems()[g]}function JF(g,c){g.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!ed.urlQuery().noModuleCache;g.useModuleTranslationCache=h;g.set("@lively-env",g.newModule(ed.livelySystemEnv(g)));
"undefined"!==typeof ed.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:ed.location})));(h="undefined"!==typeof ed.process&&ed.process.versions&&ed.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:h},g.get("@system-env"))));ed.wrapResource(g);ed.wrapModuleLoad(g);ed.wrapModuleResolution(g);h&&(h=["electron"].reduce(function(f,m){f[m]="@node/"+m;return f},{}),c.map=ed.obj.merge(h,c.map));ed.isNode&&
(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,m){f[m]="@node/"+m;return f},{}),c.map=ed.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(h=ed.GLOBAL.System,"lively.transpiler"===h.transpiler?(g.set("lively.transpiler",
h.get("lively.transpiler")),g._loader.transpilerPromise=h._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":h.map["plugin-babel"],"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));g.config(c);return g}function KF(g){g=ed.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,
defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function LF(g,c,h){var f=g.decanonicalize(c);if(g.get(f))try{h(ed.classHolder.module(g,f))}catch(m){console.error(m)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function MF(g){return g.get("@lively-env").loadedModules}function NF(g){var c=g.loads?Object.keys(g.loads):
Object.keys(g._loader.moduleRecords);return ed.arr.uniq(c.concat(Object.keys(ed.loadedModules(g))))}function SN(g,c,h){return Promise.all(ed.obj.values(ed.loadedModules(g)).map(function(f){return f.search(c,h)})).then(function(f){return ed.arr.flatten(f,1)})}function $z(g,c,h,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;f=void 0===f?0:f;var m,n,a,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:m=c;n=m.maxDepth;a=m.excludes;
if(0<n&&f>n)return A.return(h);A.setCatchFinallyBlocks(2);d=JSON;k=d.parse;return A.yield(ik.resource(g).join("package.json").read(),4);case 4:b=k.call(d,A.yieldResult);e=b.name+"@"+b.version;if(h[e]||a.includes(b.name))return A.return(h);h[e]=Object.assign({url:g},ik.obj.select(b,["name","version","dependencies","devDependencies","main"]));A.leaveTryBlock(3);break;case 2:return A.enterCatchBlock(),A.return(h);case 3:return A.setCatchFinallyBlocks(5),A.yield(ik.resource(g).join("node_modules").dirList(1),
7);case 7:l=A.yieldResult;A.leaveTryBlock(6);break;case 5:return A.enterCatchBlock(),A.return(h);case 6:p=$jscomp.makeIterator(l),q=p.next();case 8:if(q.done){A.jumpTo(10);break}w=u=q.value;y=w.url;return A.yield($z(y,c,h,f+1),11);case 11:h=A.yieldResult;q=p.next();A.jumpTo(8);break;case 10:return A.return(h)}})}function OF(g,c){var h=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(h).reduce(function(f,m){var n=h[m],a=ik.obj.values(c).find(function(k){var b=k.version;return k.name===
m&&lively.modules.semver.satisfies(b,n)})||{},d=a.name;a=a.version;f[m]=d?d+"@"+a:void 0;return f},{})}function PF(g){function c(m,n){var a=m+"@"+n;if(a in f)return f[a];var d=h.find(function(b){var e=b.version;return b.name===m&&lively.modules.semver.satisfies(e,n)})||{},k=d.name;d=d.version;return f[a]=k?k+"@"+d:void 0}var h=ik.obj.values(g),f={};return Object.keys(g).reduce(function(m,n){var a=g[n],d=Object.assign({},a.dependencies,{},a.devDependencies);m[n]=Object.keys(d).map(function(k){return c(k,
d[k])}).filter(function(k){return!!k});return m},{})}function QF(g,c){Ac.defaultSystem=g;c&&(Ac.GLOBAL.System=g);return g}function RF(){Ac._wrapModuleResolution(Ac.defaultSystem)}function SF(){Ac._unwrapModuleResolution(Ac.defaultSystem)}function TF(){return Object.keys(Ac.requireMap())}function aA(g){return Ac._module(Ac.defaultSystem,g)}function UF(g,c){return Ac._isModuleLoaded(Ac.defaultSystem,g,c)}function VF(g,c){return Ac._doesModuleExist(Ac.defaultSystem,g,c)}function WF(){return Ac._printSystemConfig(Ac.defaultSystem)}
function XF(g,c){return Ac._whenLoaded(Ac.defaultSystem,g,c)}function YF(g){return Ac._importPackage(Ac.defaultSystem,g)}function ZF(g,c){return Ac._registerPackage(Ac.defaultSystem,g,c)}function $F(g){return Ac._removePackage(Ac.defaultSystem,g)}function aG(g,c){return Ac._reloadPackage(Ac.defaultSystem,g,c)}function bG(){return Ac.getPackageSpecs(Ac.defaultSystem)}function cG(g,c){return Ac._getPackage(Ac.defaultSystem,g,void 0===c?!1:c)}function dG(g){return Ac.Package.forModuleId(Ac.defaultSystem,
g)}function eG(g){return Ac._ensurePackage(Ac.defaultSystem,g)}function fG(g,c){return Ac._applyPackageConfig(Ac.defaultSystem,g,c)}function gG(g,c){return Ac._lookupPackage(Ac.defaultSystem,g,void 0===c?!1:c)}function hG(g,c,h){return Ac._moduleSourceChange(Ac.defaultSystem,g,c,h)}function iG(){return Ac.computeRequireMap(Ac.defaultSystem)}function jG(g,c){return Ac._isHookInstalled(Ac.defaultSystem,g,c)}function kG(g,c){return Ac._installHook(Ac.defaultSystem,g,c)}function lG(g,c){return Ac._removeHook(Ac.defaultSystem,
g,c)}function mG(){Ac._wrapModuleLoad(Ac.defaultSystem)}function nG(){Ac._unwrapModuleLoad(Ac.defaultSystem)}function TN(g){return g&&g.__ref__}function bA(g,c){return Ud.serialize(g,Ud.normalizeOptions(c))}function cA(g,c){c=void 0===c?{}:c;return Ud.deserializeWithMigrations(g,c.migrations||Ud.migrations,Ud.normalizeOptions(c))}function UN(g){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=Ud,h=c.loadMorphFromSnapshot,f.yield(g.readJson(),2)):f.return(h.call(c,
f.yieldResult))})}function VN(g,c,h){g=void 0===g?Ud.MorphicEnv.default().world:g;var f,m,n,a,d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=h||{};m=void 0===f.showIndicator?!0:f.showIndicator;n=void 0===f.changeName?!0:f.changeName;a=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(d=Ud.resource(document.location.href),k=d.name(),c=d.join("../"+k.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&
(c=Ud.resource(c));n&&(g.name=c.nameWithoutExt());a&&(b=encodeURI(h.pathForBrowserHistory||Ud.pathForBrowserHistory(c.path())),window.location.pathname!==b&&window.history.pushState({},"lively.next",b));if(!m){u.jumpTo(2);break}return u.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return l=u.yieldResult,p=l.LoadingIndicator,e=p.open("string"===typeof m?m:"Snapshotting..."),u.yield(e.whenRendered(),4);case 4:return u.yield(Ud.promise.delay(100),2);case 2:return u.setFinallyBlock(6),
u.yield(Ud.createMorphSnapshot(g,h),8);case 8:return q=u.yieldResult,e.label="Uploading...",u.yield(e.whenRendered(),9);case 9:return u.return(c.writeJson(q));case 6:u.enterFinallyBlock(),e&&e.remove(),u.leaveFinallyBlock(0)}})}function oG(g,c){if(void 0===c||!c)return Ud.deserializeMorph(Ud.serializeMorph(g),{migrations:Ud.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var h=[];g.attributeConnections&&(h=g.attributeConnections.filter(function(m){return m.targetObj.isCommentIndicator}),
g.attributeConnections=g.attributeConnections.filter(function(m){return!(m.targetObj.isCommentIndicator||m.targetObj.isHalo)}));var f=Ud.serializeMorph(g);g.comments=c;g.attributeConnections&&(g.attributeConnections=g.attributeConnections.concat(h));return Ud.deserializeMorph(f,{migrations:Ud.migrations,reinitializeIds:!0})}function hu(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){switch(Ba.nextAddress){case 1:System.get("@system-env");
h=c;f=void 0===h.addPreview?!1:h.addPreview;m=void 0===h.previewWidth?100:h.previewWidth;n=void 0===h.previewHeight?100:h.previewHeight;a=void 0===h.previewType?"png":h.previewType;d=void 0===h.testLoad?!0:h.testLoad;k=void 0===h.addPackages?!0:h.addPackages;b=void 0===h.ignoreMorphs?[]:h.ignoreMorphs;e=void 0===h.frozenSnapshot?!1:h.frozenSnapshot;l=Ud.serializeMorph(g,{frozenSnapshot:e});if(!k){Ba.jumpTo(2);break}return Ba.yield(Ud.findRequiredPackagesOfSnapshot(l),3);case 3:p=Ba.yieldResult,q=
p.packages,u=p.depMap,l.packages=q,w=Ud.findLocalComponents(l.snapshot),Object.values(q["local://lively-object-modules/"]||{}).forEach(function(F){Object.entries(F).forEach(function(W){var P=$jscomp.makeIterator(W);W=P.next().value;P=P.next().value;if(!W.endsWith(".json")){var S=Ud.ast.parse(P),fa=[],aa=Ud.Path("metadata.commit.name").get($world);Ud.ast.AllNodesVisitor.run(S,function(oa,Va){"Literal"===oa.type&&"string"===typeof oa.value&&(oa.value.match(/^styleguide:\/\/\$world\/.+/)&&!w.includes(oa.value.replace("styleguide://$world/",
""))&&fa.push({target:oa,replacementFunc:function(){return JSON.stringify(oa.value.replace("$world",aa))}}),oa.value.match(/^part:\/\/\$world\/.+/)&&!w.includes(oa.value.replace("part://$world/",""))&&fa.push({target:oa,replacementFunc:function(){return JSON.stringify(oa.value.replace("$world",aa))}}))});F[W]=Ud.ast.transform.replaceNodes(fa,P).source}})}),l.packageDepMap=u;case 2:if(!f){Ba.jumpTo(4);break}return Ba.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return y=
Ba.yieldResult,A=y.renderMorphToDataURI,C=m||g.width,E=n||g.height,L=a||"png",Ba.setCatchFinallyBlocks(6),I=l,Ba.yield(A(g,{width:C,height:E,type:L,ignoreMorphs:[]}),8);case 8:I.preview=Ba.yieldResult;Ba.leaveTryBlock(4);break;case 6:return V=Ba.enterCatchBlock(),console.error("Error generating morph preview: "+V),T=l,Ba.yield(A(Ud.morph({fill:g.fill,width:C,height:E}),{width:C,height:E,type:L,ignoreMorphs:b}),9);case 9:T.preview=Ba.yieldResult;case 4:l.preview||(l.preview="");if(!d){Ba.jumpTo(10);
break}Ba.setCatchFinallyBlocks(11);return Ba.yield(Ud.loadMorphFromSnapshot(l,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:Y=Ba.yieldResult;if(!Y||!Y.isMorph)throw Error("reloading snapshot does not create a morph!");Ba.leaveTryBlock(10);break;case 11:throw na=Ba.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+na.stack);case 10:return Ba.return(l)}})}function hp(g,c){return Ud.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,
onDeserializationStart:Ud.loadPackagesAndModulesOfSnapshot,migrations:Ud.migrations},c))}function V_(g,c){var h,f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:if(!g.isDirectory())return d=c,k=g.name(),b.yield(g.read(),9);h=c[g.name()]={};return b.yield(g.dirList(),4);case 4:f=b.yieldResult,m=$jscomp.makeIterator(f),n=m.next();case 5:if(n.done)return b.return(c);a=n.value;return b.yield(V_(a,h),6);case 6:n=m.next();b.jumpTo(5);break;case 9:return d[k]=
b.yieldResult,b.return(c)}})}function W_(g,c){c=void 0===c?[]:c;var h=[];if(g.hasOwnProperty("package.json")){var f=c.slice(1).reduceRight(function(n,a){return n.join(a)},Ud.resource(c[0])).url;h.push({files:g,url:f,requiredPackages:g.requiredPackages})}for(var m in g)"object"===typeof g[m]&&h.push.apply(h,$jscomp.arrayFromIterable(W_(g[m],c.concat(m))));return h}function WN(g){var c=Ud.findPackagesInFileSpec(g.packages),h={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=
c.next())f=f.value,h[f.url]=f;return Ud.arr.flatten(Ud.graph.sortByReference(g)).map(function(m){return h[m]})}function dA(g){var c,h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:if(!g.packagesToRegister){C.jumpTo(2);break}c=$jscomp.makeIterator(g.packagesToRegister);h=c.next();case 3:if(h.done){C.jumpTo(2);break}f=h.value;C.setCatchFinallyBlocks(6);return C.yield(Ud.registerPackage(f),8);case 8:C.leaveTryBlock(4);break;
case 6:C.enterCatchBlock(),console.error("Failed to register package "+f);case 4:h=c.next();C.jumpTo(3);break;case 2:if(!g.packages){C.jumpTo(9);break}m=Ud.packagesOfSnapshot(g);n=$jscomp.makeIterator(m);a=n.next();case 10:if(a.done){C.jumpTo(9);break}k=d=a.value;b=k.files;e=k.url;if(p=(l=Ud.lookupPackage(e))&&l.pkg){q=p.version;u=JSON.parse(b["package.json"]);w=u.version;try{if(w&&q&&Ud.semver.lte(w,q,!0)){console.log("[load morph] Package "+e+" is loaded in version "+q+(" which is newer than "+
w+". Will NOT load older variant."));C.jumpTo(11);break}}catch(E){console.warn("Error in package version comparison: ",E)}}return C.yield(Ud.createFiles(e,b),13);case 13:return C.yield(Ud.ensurePackage(e),14);case 14:return p=C.yieldResult,C.yield(p.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return C.yield(System.import("lively.classes/object-classes.js"),16);case 16:y=C.yieldResult,A=y.default,Ud.objectScriptingEnabled=!!A,Ud.objectScriptingEnabled&&A.withId(p.name);case 11:a=n.next();C.jumpTo(10);
break;case 9:return C.yield(Promise.all(Ud.requiredModulesOfSnapshot(g).map(function(E){return(System.get(E)?null:System.import(E)).catch(function(L){return console.error("Error loading "+E,L)})})),0)}})}function pG(g){var c,h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){switch(Ha.nextAddress){case 1:c={},h=g.snapshot,f=[],m={},n=!0,a={},d={},b=Ha.forIn(h);case 2:if(null==(k=b.getNext())){Ha.jumpTo(4);
break}e=h[k]["lively.serializer-class-info"];if(!(e&&e.module&&e.module.package)){Ha.jumpTo(5);break}l=Ud.getPackage(e.module.package.name);if(!l.address.startsWith("local://")){Ha.jumpTo(5);break}return Ha.yield(System.import("lively.classes/object-classes.js"),7);case 7:return p=Ha.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2700=p.default,Ha.yield(System.import("lively.classes/util.js"),8);case 8:return q=Ha.yieldResult,u=q.withSuperclasses,Ud.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2700,
w=d.$jscomp$loop$prop$ObjectPackage$2700.forSystemPackage(l),Ha.yield(w.ensureSubModule(e.module.pathInPackage),9);case 9:y=Ha.yieldResult,A=y.systemModule._recorder[e.className],C=u(A),C.forEach(function(zb){return function(Ub){(Ub=zb.$jscomp$loop$prop$ObjectPackage$2700.lookupPackageForClass(Ub))&&f.push(Ub.systemPackage)}}(d));case 5:if(E=h[k].props.metadata)if(L=void 0,E.value&&E.value.__ref__?(I=h[E.value.id],I.props.externalPackages&&(L=I.props.externalPackages.value)):L=E.externalPackages,
L)for(n=!0,V=0;V<L.length;V++)m[L[V]]=!0;d={$jscomp$loop$prop$ObjectPackage$2700:d.$jscomp$loop$prop$ObjectPackage$2700};Ha.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(m)),T=[],Y=$jscomp.makeIterator(f),na=Y.next();case 10:if(na.done)return f=[].concat($jscomp.arrayFromIterable(T),$jscomp.arrayFromIterable(f)),Ha.yield(Promise.all(f.map(function(zb){var Ub,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sb){if(1==Sb.nextAddress)return Ub=Ud.resource(zb.address).asDirectory(),
Sb.yield(Ud.resourceToJSON(Ub,{}),2);Nb=Sb.yieldResult;c[Ub.parent().url]||(c[Ub.parent().url]={});Object.assign(c[Ub.parent().url],Nb);a[zb.url]||(a[zb.url]=[]);Sb.jumpToEnd()})})),17);Ba=na.value;F=$jscomp.makeIterator(Ba.modules());W=F.next();case 13:if(W.done){na=Y.next();Ha.jumpTo(10);break}P=W.value;if(P.id.endsWith(".json")){Ha.jumpTo(14);break}S=$jscomp;fa=S.makeIterator;return Ha.yield(P.imports(),16);case 16:for(aa=fa.call(S,Ha.yieldResult),oa=aa.next();!oa.done;oa=aa.next())if(lb=Va=oa.value,
qa=lb.fromModule,ja=Ud.module(qa).package())ta=ja.config,ta.lively&&ta.lively.isObjectPackage&&(T.push(ja),a[Ba.url]?Ud.arr.pushIfNotIncluded(a[Ba.url],ja.url):a[Ba.url]=[ja.url]);case 14:W=F.next();Ha.jumpTo(13);break;case 17:return Ha.return({packages:c,depMap:a})}})}function XN(g){return[]}function qG(g,c){c=void 0===c?{}:c;var h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return h=c.morphicDB||ce.MorphicDB.default,a.yield(h.load("part","string"===
typeof g?g:g.name,c,"string"===typeof g?void 0:g),2);case 2:f=a.yieldResult;if(!f.isWindow||!f.targetMorph){a.jumpTo(3);break}m=f.targetMorph;return a.yield(ce.ensureCommitInfo(f.metadata&&f.metadata.commit),4);case 4:(n=a.yieldResult)&&m.changeMetaData("commit",n,!0,!1);case 3:return a.return(f)}})}function YN(g,c,h,f,m,n){var a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:w.setCatchFinallyBlocks(2);if(g.isMorph){w.jumpTo(4);break}if("function"!==
typeof g.beforePublish){w.jumpTo(5);break}return w.yield(g.beforePublish(c,g),5);case 4:a=[],g.withAllSubmorphsDo(function(y){"function"===typeof y.beforePublish&&a.push(y)}),d=$jscomp.makeIterator(a),k=d.next();case 8:if(k.done){w.jumpTo(5);break}b=k.value;return w.yield(b.beforePublish(),9);case 9:k=d.next();w.jumpTo(8);break;case 5:w.leaveTryBlock(3);break;case 2:e=w.enterCatchBlock(),l="Error in beforePublish of "+g+"\n"+e.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(l)):
console.error(l);case 3:return p=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),q=h.morphicDB||ce.MorphicDB.default,w.yield(q.snapshotAndCommit("part",c,g,p,f,m,n),12);case 12:return u=w.yieldResult,ce.emit("lively.partsbin/partpublished",u),w.return(u)}})}function eA(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha,zb,Ub,Nb,Sb,pc,Eb,Lc,dd,ia,Ca,Ea,jb,Mb,Tc,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:return h=
c,f=void 0===h.showPublishDialog?!0:h.showPublishDialog,m=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?!0:h.loadingIndicator,a=void 0===h.preferWindow?!0:h.preferWindow,b=g,e=g.world()||g.env.world,l=g.name,p=[],q="",qc.yield(ce.ensureCommitInfo(ce.Path("metadata.commit").get(g)||ce.Path("metadata.commit").get(b)),2);case 2:u=qc.yieldResult;w=c.morphicDB||ce.MorphicDB.default;u||(u={type:"part",name:g.name,author:e.getCurrentUser(),tags:[],description:"no description"});
if(!f){u&&(y=u,l=y.name,p=y.tags,q=y.description);qc.jumpTo(3);break}A=e;C=A.openPrompt;return qc.yield(ce.loadPart("publish part dialog"),5);case 5:return qc.yield(C.call(A,qc.yieldResult,{part:g}),4);case 4:E=qc.yieldResult;L=E.db;I=E.commit;if(!I)return qc.return(null);L&&(c.morphicDB=w=L);V=I;l=V.name;p=V.tags;q=V.description;case 3:if(!n){qc.jumpTo(6);break}T=$world.execCommand("open loading indicator","saving "+l+"...");return qc.yield(ce.promise.delay(80),6);case 6:qc.setCatchFinallyBlocks(8,
9);Y="HEAD";na=u?u.name:g.name;if(na===l){Ba=u?u._id:void 0;qc.jumpTo(11);break}return qc.yield(w.exists("part",l),12);case 12:F=qc.yieldResult;W=F.exists;P=F.commitId;if(!W){qc.jumpTo(13);break}return qc.yield(e.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:S=qc.yieldResult;if(!S)return qc.return(null);Ba=P;case 13:b.name=l;case 11:return a&&!g.isWindow&&(fa=g.getWindow())&&fa.targetMorph===g&&(g=fa,k=fa.metadata,d=!0),aa={author:g.world().getCurrentUser(),message:"published",
tags:p,description:q},qc.yield(ce.savePart(g,l,c,aa,Y,Ba),15);case 15:oa=qc.yieldResult;if(!d){qc.jumpTo(16);break}if(b.metadata)return lb=b.metadata,qc.yield(ce.ensureCommitInfo(fa.metadata.commit),20);Va=b;return qc.yield(ce.ensureCommitInfo(fa.metadata.commit),19);case 19:Va.metadata={commit:qc.yieldResult};qc.jumpTo(18);break;case 20:lb.commit=qc.yieldResult;case 18:fa.metadata=k;case 16:return m&&g.setStatusMessage("saved part "+l),qc.return(oa);case 9:qc.enterFinallyBlock();T&&T.remove();qc.leaveFinallyBlock(0);
break;case 8:qa=qc.enterCatchBlock();ja=$jscomp.makeIterator(qa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);ja.next();ja.next();ta=ja.next().value;Ha=ja.next().value;if(!ta||!Ha){qc.jumpTo(21);break}zb=$jscomp;Ub=zb.makeIterator;return qc.yield(w.log(Ha,1,!0),22);case 22:return Nb=Ub.call(zb,qc.yieldResult),pc=Sb=Nb.next().value,Eb=pc.author,Lc=Eb.name,dd=pc.timestamp,ia='The current version of part "'+l+'" is not the most recent!\nA newer version by '+
(Lc+" was saved on ")+(ce.date.format(new Date(dd),"yyyy-mm-dd HH:MM")+". Overwrite?"),qc.yield(e.confirm(["Version Mismatch\n",{},ia,{fontWeight:"normal",fontSize:16}]),23);case 23:Ca=qc.yieldResult;if(!Ca)return qc.return(null);Ea=ce.obj.dissoc(Sb,["preview"]);b.changeMetaData("commit",Ea,!0,!1);return qc.return(eA(b,Object.assign({},c,{morphicDB:w,showPublishDialog:!1})));case 21:jb=$jscomp.makeIterator(qa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||
[]);jb.next();jb.next();Mb=jb.next().value;if(!Mb){qc.jumpTo(24);break}Tc="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return qc.yield(e.confirm(Tc),25);case 25:Rc=qc.yieldResult;if(!Rc)return qc.return(null);b.changeMetaData("commit",null,!0,!1);return qc.return(eA(b,Object.assign({},c,{morphicDB:w,showPublishDialog:!1})));case 24:throw console.error(qa),m&&e.logError("Error saving part: "+qa),qa;}})}function ZN(g){g=void 0===g?{}:g;var c,h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return c=g.morphicDB||ce.MorphicDB.default,d.yield(c.latestCommits("part"),2);if(3!=d.nextAddress)return h=d.yieldResult,f=h.map(function(k){return{isListItem:!0,string:k.name,value:k}}),d.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);m=d.yieldResult;n=$jscomp.makeIterator(m.selected);a=n.next().value;return d.return(a?ce.loadPart(a):null)})}function $N(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",
{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=h.yieldResult;if(!c)throw"canceled";return h.return(ce.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function aO(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(g=(f=g.getWindow())&&f.targetMorph===g?f:g);p.setCatchFinallyBlocks(2);
if(g.isMorph){p.jumpTo(4);break}if("function"!==typeof g.beforePublish){p.jumpTo(5);break}return p.yield(g.beforePublish(c,g),5);case 4:m=[],g.withAllSubmorphsDo(function(q){"function"===typeof q.beforePublish&&m.push(q)}),n=$jscomp.makeIterator(m),a=n.next();case 8:if(a.done){p.jumpTo(5);break}d=a.value;return p.yield(d.beforePublish(),9);case 9:a=n.next();p.jumpTo(8);break;case 5:p.leaveTryBlock(3);break;case 2:k=p.enterCatchBlock(),b="Error in beforePublish of "+g+"\n"+k.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(b)):console.error(b);case 3:return p.yield(ce.resource(h.partsbinFolder).ensureExistance(),12);case 12:return e=ce.resource(h.partsbinFolder).join(c+".json"),p.yield(ce.createMorphSnapshot(g,h),13);case 13:return l=p.yieldResult,p.yield(e.write(JSON.stringify(l,null,2)),14);case 14:return p.return({partName:c,url:e.url})}})}function rG(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(ce.loadPart(g,c))})}function bO(g){return new ce.CommitEditor(g)}
function Aca(g,c){var h={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,m,n){m&&(h[m]=n)});return h}function Bca(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*Cca;case "days":case "day":case "d":return c*fA;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function sG(g,c,h){if(!(g<c))return g<1.5*c?Math.floor(g/c)+" "+h:Math.ceil(g/c)+" "+h+"s"}function Dca(g){var c=0,h;for(h in g)c=(c<<5)-c+g.charCodeAt(h),c|=0;return jh.colors[Math.abs(c)%jh.colors.length]}function cO(g){function c(){if(c.enabled){var f=+new Date;c.diff=
f-(h||f);c.prev=h;h=c.curr=f;var m=Array(arguments.length);for(f=0;f<m.length;f++)m[f]=arguments[f];m[0]=jh.coerce(m[0]);"string"!==typeof m[0]&&m.unshift("%O");var n=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(a,d){if("%%"===a)return a;n++;d=jh.formatters[d];"function"===typeof d&&(a=d.call(c,m[n]),m.splice(n,1),n--);return a});jh.formatArgs.call(c,m);(c.log||jh.log||console.log.bind(console)).apply(c,m)}}var h;c.namespace=g;c.enabled=jh.enabled(g);c.useColors=jh.useColors();c.color=Dca(g);c.destroy=
Eca;"function"===typeof jh.init&&jh.init(c);jh.instances.push(c);return c}function Eca(){var g=jh.instances.indexOf(this||Fca);return-1!==g?(jh.instances.splice(g,1),!0):!1}function X_(){try{var g=ul.storage.debug}catch(c){}!g&&"undefined"!==typeof dO&&"env"in dO&&(g=dO.env.DEBUG);return g}function Em(g){if(g){for(var c in Em.prototype)g[c]=Em.prototype[c];return g}}function eO(g,c){if(!g)return g;if(Y_(g)){var h={_placeholder:!0,num:c.length};c.push(g);return h}if(fO(g)){h=Array(g.length);for(var f=
0;f<g.length;f++)h[f]=eO(g[f],c);return h}if("object"===typeof g&&!(g instanceof Date)){h={};for(f in g)h[f]=eO(g[f],c);return h}return g}function gO(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(fO(g))for(var h=0;h<g.length;h++)g[h]=gO(g[h],c);else if("object"===typeof g)for(h in g)g[h]=gO(g[h],c);return g}function Z_(){}function $_(g){var c=""+g.type;if(Li.BINARY_EVENT===g.type||Li.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=
g.data){try{var h=JSON.stringify(g.data)}catch(f){h=!1}if(!1!==h)c+=h;else return Gca}hO("encoded %j as %s",g,c);return c}function Hca(g,c){iO.removeBlobs(g,function(h){var f=iO.deconstructPacket(h);h=$_(f.packet);f=f.buffers;f.unshift(h);c(f)})}function tG(){(this||al).reconstructor=null}function jO(g){(this||al).reconPack=g;(this||al).buffers=[]}function uG(g){if(!g||"object"!==typeof g)return!1;if(Ica(g)){for(var c=0,h=g.length;c<h;c++)if(uG(g[c]))return!0;return!1}if("function"===typeof kO&&kO.isBuffer&&
kO.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||Jca&&g instanceof Blob||Kca&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return uG(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,c)&&uG(g[c]))return!0;return!1}function Lca(){}function a0(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var h=c.buffer;if(c.byteLength!==h.byteLength){var f=new Uint8Array(c.byteLength);f.set(new Uint8Array(h,
c.byteOffset,c.byteLength));h=f.buffer}return h}return c})}function b0(g,c){c=c||{};var h=new Ww;a0(g).forEach(function(f){h.append(f)});return c.type?h.getBlob(c.type):h.getBlob()}function c0(g,c){return new Blob(a0(g),c||{})}function d0(g){for(var c=[],h=0,f=g.length,m,n;h<f;)m=g.charCodeAt(h++),55296<=m&&56319>=m&&h<f?(n=g.charCodeAt(h++),56320==(n&64512)?c.push(((m&1023)<<10)+(n&1023)+65536):(c.push(m),h--)):c.push(m);return c}function e0(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+
g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Xw(){if(Mr>=vG)throw Error("Invalid byte index");var g=wG[Mr]&255;Mr++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Mca(g){if(Mr>vG)throw Error("Invalid byte index");if(Mr==vG)return!1;var c=wG[Mr]&255;Mr++;if(0==(c&128))return c;if(192==(c&224)){var h=Xw();c=(c&31)<<6|h;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){h=Xw();var f=Xw();c=(c&15)<<12|h<<6|
f;if(2048<=c)return e0(c,g)?c:65533;throw Error("Invalid continuation byte");}if(240==(c&248)&&(h=Xw(),f=Xw(),g=Xw(),c=(c&7)<<18|h<<12|f<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Nca(g,c,h){if(!c)return ai.encodeBase64Packet(g,h);var f=new FileReader;f.onload=function(){ai.encodePacket({type:g.type,data:f.result},c,!0,h)};return f.readAsArrayBuffer(g.data)}function lO(g,c,h){var f=Array(g.length);h=Oca(g.length,h);for(var m=function(a,d,k){c(d,function(b,
e){f[a]=e;k(b,f)})},n=0;n<g.length;n++)m(n,g[n],h)}function mO(g){var c="";do c=f0[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function nO(){var g=mO(+new Date);return g!==g0?(h0=0,g0=g):g+"."+mO(h0++)}function ip(g){(this||Ah).path=g.path;(this||Ah).hostname=g.hostname;(this||Ah).port=g.port;(this||Ah).secure=g.secure;(this||Ah).query=g.query;(this||Ah).timestampParam=g.timestampParam;(this||Ah).timestampRequests=g.timestampRequests;(this||Ah).readyState="";(this||Ah).agent=g.agent||!1;(this||
Ah).socket=g.socket;(this||Ah).enablesXDR=g.enablesXDR;(this||Ah).withCredentials=g.withCredentials;(this||Ah).pfx=g.pfx;(this||Ah).key=g.key;(this||Ah).passphrase=g.passphrase;(this||Ah).cert=g.cert;(this||Ah).ca=g.ca;(this||Ah).ciphers=g.ciphers;(this||Ah).rejectUnauthorized=g.rejectUnauthorized;(this||Ah).forceNode=g.forceNode;(this||Ah).isReactNative=g.isReactNative;(this||Ah).extraHeaders=g.extraHeaders;(this||Ah).localAddress=g.localAddress}function jp(g){var c=g&&g.forceBase64;if(!Pca||c)(this||
Xh).supportsBinary=!1;i0.call(this||Xh,g)}function j0(){}function Yw(g){k0.call(this||se,g);(this||se).requestTimeout=g.requestTimeout;(this||se).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,h=location.port;h||(h=c?443:80);(this||se).xd="undefined"!==typeof location&&g.hostname!==location.hostname||h!==g.port;(this||se).xs=g.secure!==c}}function jk(g){(this||se).method=g.method||"GET";(this||se).uri=g.uri;(this||se).xd=!!g.xd;(this||se).xs=!!g.xs;
(this||se).async=!1!==g.async;(this||se).data=void 0!==g.data?g.data:null;(this||se).agent=g.agent;(this||se).isBinary=g.isBinary;(this||se).supportsBinary=g.supportsBinary;(this||se).enablesXDR=g.enablesXDR;(this||se).withCredentials=g.withCredentials;(this||se).requestTimeout=g.requestTimeout;(this||se).pfx=g.pfx;(this||se).key=g.key;(this||se).passphrase=g.passphrase;(this||se).cert=g.cert;(this||se).ca=g.ca;(this||se).ciphers=g.ciphers;(this||se).rejectUnauthorized=g.rejectUnauthorized;(this||
se).extraHeaders=g.extraHeaders;this.create()}function l0(){for(var g in jk.requests)jk.requests.hasOwnProperty(g)&&jk.requests[g].abort()}function Qca(){}function Zw(g){oO.call(this||Jh,g);(this||Jh).query=(this||Jh).query||{};xG||(xG=m0.___eio=m0.___eio||[]);(this||Jh).index=xG.length;var c=this||Jh;xG.push(function(h){c.onData(h)});(this||Jh).query.j=(this||Jh).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Qca)},!1)}function on(g){g&&
g.forceBase64&&((this||Ff).supportsBinary=!1);(this||Ff).perMessageDeflate=g.perMessageDeflate;(this||Ff).usingBrowserWebSocket=yG&&!g.forceNode;(this||Ff).protocols=g.protocols;(this||Ff).usingBrowserWebSocket||($w=n0);pO.call(this||Ff,g)}function Kh(g,c){if(!((this||fd)instanceof Kh))return new Kh(g,c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=o0(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=o0(c.host).host);
(this||fd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=(this||fd).secure?"443":"80");(this||fd).agent=c.agent||!1;(this||fd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||fd).port=c.port||("undefined"!==typeof location&&location.port?location.port:(this||fd).secure?443:80);(this||fd).query=c.query||{};"string"===typeof(this||fd).query&&((this||fd).query=Rca.decode((this||fd).query));
(this||fd).upgrade=!1!==c.upgrade;(this||fd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||fd).forceJSONP=!!c.forceJSONP;(this||fd).jsonp=!1!==c.jsonp;(this||fd).forceBase64=!!c.forceBase64;(this||fd).enablesXDR=!!c.enablesXDR;(this||fd).withCredentials=!1!==c.withCredentials;(this||fd).timestampParam=c.timestampParam||"t";(this||fd).timestampRequests=c.timestampRequests;(this||fd).transports=c.transports||["polling","websocket"];(this||fd).transportOptions=c.transportOptions||{};(this||
fd).readyState="";(this||fd).writeBuffer=[];(this||fd).prevBufferLen=0;(this||fd).policyPort=c.policyPort||843;(this||fd).rememberUpgrade=c.rememberUpgrade||!1;(this||fd).binaryType=null;(this||fd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||fd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||{}:!1;!0===(this||fd).perMessageDeflate&&((this||fd).perMessageDeflate={});(this||fd).perMessageDeflate&&null==(this||fd).perMessageDeflate.threshold&&((this||fd).perMessageDeflate.threshold=
1024);(this||fd).pfx=c.pfx||null;(this||fd).key=c.key||null;(this||fd).passphrase=c.passphrase||null;(this||fd).cert=c.cert||null;(this||fd).ca=c.ca||null;(this||fd).ciphers=c.ciphers||null;(this||fd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||fd).forceNode=!!c.forceNode;(this||fd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||fd).isReactNative)c.extraHeaders&&
0<Object.keys(c.extraHeaders).length&&((this||fd).extraHeaders=c.extraHeaders),c.localAddress&&((this||fd).localAddress=c.localAddress);(this||fd).id=null;(this||fd).upgrades=null;(this||fd).pingInterval=null;(this||fd).pingTimeout=null;(this||fd).pingIntervalTimer=null;(this||fd).pingTimeoutTimer=null;this.open()}function vj(g,c,h){(this||ze).io=g;(this||ze).nsp=c;(this||ze).json=this||ze;(this||ze).ids=0;(this||ze).acks={};(this||ze).receiveBuffer=[];(this||ze).sendBuffer=[];(this||ze).connected=
!1;(this||ze).disconnected=!0;(this||ze).flags={};h&&h.query&&((this||ze).query=h.query);(this||ze).io.autoConnect&&this.open()}function ax(g){g=g||{};(this||Gl).ms=g.min||100;(this||Gl).max=g.max||1E4;(this||Gl).factor=g.factor||2;(this||Gl).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||Gl).attempts=0}function bi(g,c){if(!((this||xd)instanceof bi))return new bi(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||xd).nsps={};(this||xd).subs=[];(this||xd).opts=
c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||xd).backoff=new Sca({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||xd).readyState="closed";(this||xd).uri=g;(this||xd).connecting=[];(this||
xd).lastPing=null;(this||xd).encoding=!1;(this||xd).packetBuffer=[];g=c.parser||Tca;(this||xd).encoder=new g.Encoder;(this||xd).decoder=new g.Decoder;(this||xd).autoConnect=!1!==c.autoConnect;(this||xd).autoConnect&&this.open()}function p0(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Uca(g);var h=g.source,f=g.id,m=g.path;m=gA[f]&&m in gA[f].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||m?(q0("ignoring socket cache for %s",h),h=r0(h,c)):(gA[f]||(q0("new io instance for %s",h),
gA[f]=r0(h,c)),h=gA[f]);g.query&&!c.query&&(c.query=g.query);return h.socket(g.path,c)}function iu(g,c){c=void 0===c?{}:c;var h=c.l2lClient;if(!h)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Bf.ClientCommand.installLively2LivelyServices(h);h=new Bf.ClientCommand(h);h.spawn(Object.assign({command:g},Bf.obj.dissoc(c,["l2lClient"])));return h}function hA(g){return Bf.dirCache[g.trackerId]?Bf.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=m.yieldResult;h=c.data;f=h.defaultDirectory;return m.return(Bf.dirCache[g.trackerId]=f)})})}function iA(g){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);c=m.yieldResult;h=c.data;f=h.env;return m.return(f)})}function zG(g,c){c=(c=void 0===c?{}:c)||{};var h=Bf.runCommand('cat "'+g+'"',c);return h.whenDone().then(function(){if(h.exitCode)throw Error("Read "+
g+" failed: "+h.stderr);return h.output})}function AG(g,c,h){!h&&c&&c.content&&(h=c,c=h.content);var f=Bf.runCommand('tee "'+g+'"',Object.assign({stdin:c||""},h));return f.whenDone().then(function(){if(f.exitCode)throw Error("Write "+g+" failed: "+f.stderr);return f})}function BG(g,c){c=void 0===c?{}:c;return ph._runCommand(g,Object.assign({l2lClient:ph.L2LClient.ensure(ph.defaultConnection)},c))}function jA(){return ph._defaultDirectory(ph.L2LClient.ensure(ph.defaultConnection))}function qO(){return ph._env(ph.L2LClient.ensure(ph.defaultConnection))}
function rO(g){function c(){0<f.length&&h.push(f);f=""}for(var h=[],f="",m="normal",n=0,a;a=g[n];n++)if("normal"===m&&/\s/.test(a))c();else{if('"'===a||"'"===a){if("normal"===m){m=a;continue}if(m===a){m="normal";continue}}"\\"===a&&m===g[n+1]&&(n++,a=g[n]);f+=a}c();return h}function sO(g,c,h){var f=h=void 0===h?{}:h,m=f.exclusions,n=void 0===f.fileTypes?[]:f.fileTypes,a=void 0===f.sizeLimit?"+1M":f.sizeLimit;h=void 0===f.charsBefore?80:f.charsBefore;f=void 0===f.charsAfter?80:f.charsAfter;m||(m=ph.defaultGrepExclusions);
m=(m=[m.length?"-iname "+m.map(JSON.stringify).join(" -o -iname "):"",a?"-size "+a:""].filter(Boolean).join(" -o "))?"\\( "+m+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+n+" \\)":"";a='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=ph.string.format(a,c,m,n,h,g,f);var d=ph.runCommand(g);d.whenDone().then(function(k){var b=k.exitCode;b&&1!==b||(d.results=k.stdout.split("\n").map(function(e){e=
e.match(/(.*):([0-9]+):(.*)/);if(!e)return null;var l=$jscomp.makeIterator(e);l.next();e=l.next().value;var p=l.next().value;l=l.next().value;return{filename:e,lineno:Number(p)-1,match:l}}).filter(Boolean))});return d}function CG(g,c){var h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h=dh.fileInfoCommandString(g,c),f=dh.runCommand(h,c),d.yield(f.whenDone(),2);if(m=0!=f.exitCode?f.output:null)throw m;n=$jscomp.makeIterator(dh.parseDirectoryListFromLs(f.stdout,
c.rootDirectory||"."));a=n.next().value;return d.return(a)})}function tO(g,c){return dh.string.lines(g).map(function(h){return h.trim().length?(new dh.FileInfo(c)).readFromDirectoryListLine(h):null}).filter(Boolean)}function DG(g,c){var h,f,m,n,a,d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){h=Object.assign({findFilesGroup:"default-find-files-process"},c);f=h.findFilesGroup;m=h.rootDirectory;a=n=dh.findFilesProcesses[f]||(dh.findFilesProcesses[f]={promiseState:null,commands:[]});
d=a.commands;k=a.promiseState;k||(n.promiseState=k=dh.promise.deferred());b=dh.findFilesCommandString(g,c);d.forEach(function(p){return p.kill()});e=dh.runCommand(b,c);d.push(e);e.whenDone().then(function(){dh.arr.remove(d,e);if(d.some(function(q){return q.startTime>e.startTime}))console.log("[findFiles] command "+e+" exited but a newer findFiles command was started for group "+f+", discarding output");else{var p=0!=e.exitCode?e.output:null;p&&console.warn(p);p=p?[]:dh.parseDirectoryListFromLs(e.stdout,
m)||[];k.resolve(p);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(p){return console.error(p)});return l.return(k.promise)})}function uO(g){function c(h){return Array.prototype.concat.apply([h],h.children?h.children.map(c):[])}return c(g).map(function(h){var f=h.fullPath.replace(/^\//,"");return{fileName:f,path:f,rootDirectory:"./",isDirectory:h.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function EG(g,c,h){var f,
m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){f=g.isResource?g:Re.resource(System.decanonicalize(g));m=f.nameWithoutExt();return n.return(Re.loadWorldFromDB(m,void 0,c,h))})}function FG(g,c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c&&(Re.reset(),c.name=null,c.metadata&&(c.metadata.commit={})),f=Re.MorphicDB.default,a.yield(f.load("world",void 0,h,g),2);m=a.yieldResult;n="undefined"!==typeof document?document.location.search:
"";h=Object.assign({pathForBrowserHistory:Re.pathForBrowserHistory(m.name,n)},h);return a.return(Re.loadWorld(m,c,h))})}function GG(g,c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h&&(Re.reset(),h.name=null,h.metadata&&(h.metadata.commit={})),m=Re.MorphicDB.default,d.yield(m.load("world",g,f,void 0,c||void 0),2);n=d.yieldResult;a="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:Re.pathForBrowserHistory(g,
a)},f);return d.return(Re.loadWorld(n,h,f))})}function HG(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:f=h;m=f.env;n=f.root;a=void 0===f.verbose?!0:f.verbose;d=void 0===f.localconfig?!0:f.localconfig;k=void 0===f.l2l?!0:f.l2l;b=void 0===f.shell?!0:f.shell;e=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;l=void 0===f.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:f.showUserFlap;
m=m||(c?c.env:Re.MorphicEnv.default());p=m.domEnv.document||document;q=p.getElementById("dom-loading-indicator");A.setCatchFinallyBlocks(2,3);if(!(u=k)){A.jumpTo(5);break}return A.yield(Re.setupLively2Lively(g),6);case 6:u=A.yieldResult;case 5:w=u;if(!w||!b){A.jumpTo(7);break}return A.yield(Re.setupLivelyShell({l2lClient:w}),7);case 7:a&&q&&(q.style.display="");if(!d){A.jumpTo(9);break}return A.yield(Re.loadLocalConfig(),10);case 10:case 9:return A.yield(m.setWorld(g,n),11);case 11:e&&g.execCommand("load world");
h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);g.showsUserFlap=l;if(c)c.onUnload();Re.emit("world/loaded",g);return A.return(g);case 3:A.enterFinallyBlock();q&&(q.style.display="none");A.leaveFinallyBlock(0);break;case 2:y=A.enterCatchBlock();console.error("Error loading world: ",y);if(!c){A.jumpTo(12);break}return A.yield(m.setWorld(c),13);case 13:c.showError(y);case 12:throw y;}})}function bx(g,c){var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,
Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha,zb,Ub,Nb,Sb,pc,Eb,Lc,dd,ia,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ea){switch(Ea.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=g.name,f=[],m="",Ea.yield(Re.ensureCommitInfo(Re.Path("metadata.commit").get(g)),2);case 2:n=Ea.yieldResult;a=c.morphicdb||Re.MorphicDB.default;d="";k="db";if(!c.showSaveDialog){n&&(b=n,h=b.name,f=b.tags,m=b.description);
Ea.jumpTo(3);break}return Ea.yield(Re.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return e=Ea.yieldResult,Ea.yield(g.openPrompt(e,{targetWorld:g}),5);case 5:if(l=Ea.yieldResult,p=l.commit,q=l.db,u=l.mode,w=l.filePath,q&&(a=q),k=u,d=w,y=p||{},h=y.name,f=y.tags,m=y.description,!h)return Ea.return(null);case 3:return A=$world.execCommand("open loading indicator","saving "+h+"..."),Ea.yield(Re.promise.delay(80),6);case 6:if("json"!=k){Ea.jumpTo(7);break}C=Re.resource(System.baseURL).join(d).withRelativePartsResolved();
return Ea.yield(C.exists(),8);case 8:return Ea.yieldResult?(A.visible=!1,Ea.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},C.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):Ea.yield(C.ensureExistance(),10);case 12:E=Ea.yieldResult;if(!E)return A.remove(),Ea.return();A.visible=!0;case 10:return g.changeMetaData("file",d,!1,!1),
Ea.yield(Re.createMorphSnapshot(g),13);case 13:return L=Ea.yieldResult,Ea.yield(C.writeJson(L),14);case 14:return I=JSON.stringify(L),V=d.replace(".json",".br.json"),T=Re,Y=T.resource,Ea.yield(Re.defaultDirectory(Re.ShellClientResource.defaultL2lClient),16);case 16:return Ea.yield(Y.call(T,Ea.yieldResult+"/..").join(V).withRelativePartsResolved().brotli(I),15);case 15:return Re.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),A.remove(),g.setStatusMessage("saved world "+
h+" to file: "+C.url),Ea.return();case 7:Ea.setCatchFinallyBlocks(17,18);na={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[A]};Ba="HEAD";F=n?n.name:g.name;if(!c.useExpectedCommit){Ea.jumpTo(20);break}if(F===h||!c.confirmOverwrite){W=n?n._id:void 0;Ea.jumpTo(20);break}return Ea.yield(a.exists("world",h),22);case 22:P=Ea.yieldResult;S=P.exists;fa=P.commitId;if(!S){Ea.jumpTo(23);break}A.center=g.windowBounds().center();A.visible=!1;return Ea.yield(g.confirm(["The world\n",{fontWeight:"normal"},
'"'+h+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350}),24);case 24:aa=Ea.yieldResult;A.visible=!0;if(!aa)return Ea.return(null);W=fa;case 23:g.name=h;case 20:return oa={author:g.getCurrentUser(),message:"world save",tags:f,description:m},Ea.yield(a.snapshotAndCommit("world",h,g,na,oa,Ba,W),25);case 25:return Va=Ea.yieldResult,window.history&&(lb=Re.pathForBrowserHistory(h),window.history.pushState({},"lively.next",lb)),Re.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),
g.setStatusMessage("saved world "+h),g.get("world-list")&&g.get("world-list").onWorldSaved(h),Ea.return(Va);case 18:Ea.enterFinallyBlock();A.remove();Ea.leaveFinallyBlock(0);break;case 17:qa=Ea.enterCatchBlock();if(qa.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return Ea.return(bx(g,Object.assign({},c,{morphicdb:a,useExpectedCommit:!1,showSaveDialog:!1})));ja=$jscomp.makeIterator(qa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);ja.next();ja.next();ta=ja.next().value;Ha=ja.next().value;if(!ta||!Ha){Ea.jumpTo(26);break}zb=$jscomp;Ub=zb.makeIterator;return Ea.yield(a.log(Ha,1,!0),27);case 27:Nb=Ub.call(zb,Ea.yieldResult);Sb=Nb.next().value;pc=!0;if(!c.confirmOverwrite){Ea.jumpTo(28);break}Eb=Sb;Lc=Eb.author;dd=Lc.name;ia=Eb.timestamp;Ca="The current version of world "+h+" is not the most recent!\nA newer version by "+(dd+" was saved on ")+(Re.date.format(new Date(ia),"yyyy-mm-dd HH:MM")+". Overwrite?");return Ea.yield(g.confirm(["Version Conflict\n",
null,Ca,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:pc=Ea.yieldResult;case 28:if(!pc)return Ea.return(null);g.changeMetaData("commit",Re.obj.dissoc(Sb,["preview"]),!0,!1);return Ea.return(bx(g,Object.assign({},c,{morphicdb:a,showSaveDialog:!1})));case 26:console.error(qa),g.logError("Error saving world: "+qa),Ea.jumpTo(18)}})}function vO(g,c){var h=g.row;g=g.column;var f=c.row;c=c.column;return h<f?-2:h===f?g<c?-1:g===c?0:1:2}function kp(g,c){return 0>mj.comparePosition(g,c)}function cx(g,
c){return 0>=mj.comparePosition(g,c)}function lp(g,c){return 0===mj.comparePosition(g,c)}function dx(g,c){return mj.lessPosition(g,c)?g:c}function ex(g,c){return mj.lessPosition(g,c)?c:g}function wO(g,c){if(!g||!c)return g==c;var h=!0,f={},m;for(m in g)if(f[m]=!0,!c.hasOwnProperty(m)||g[m]!==c[m]){h=!1;break}if(h)for(var n in c)if(!(f[n]||g.hasOwnProperty(n)&&g[n]===c[n])){h=!1;break}return h}function IG(g,c,h,f,m){m=void 0===m?"":m;var n="string"!==typeof g,a="string"!==typeof h;if(n||a){var d=[];
n?d.push(g,c):d.push(g+m,c);a?d.push(h,f):d.push(h+m,f);return d}return!c&&!f||c==f?[g+m+h,c]:c&&f?ng.shallowEquals(c,f)?[g+m+h,c]:[g+m,c,h,f]:[g+m,c,h,f]}function JG(g,c){c=void 0===c?"":c;if(2>=g.length)return g;var h=[],f=$jscomp.makeIterator(g),m=f.next().value,n=f.next().value;for(f=2;f<g.length;f+=2)n=ng.concatAttributePair(m,n,g[f],g[f+1],c),2>=n.length?(m=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),m=n.next().value,n=n.next().value);
h.push(m,n);return h}function KG(g,c){for(var h=0,f=0;f<g.length;f+=2){var m=g[f],n=h+("string"===typeof m?m.length:1);if(n<c)h=n;else{if(h===c)return[g.slice(0,f),g.slice(f)];if(n===c)return[g.slice(0,f+2),g.slice(f+2)];if("string"!==typeof m)throw Error("Assuming text is a string for splitting it, got "+m+" instead!");var a=g[f+1],d=c-h;n=[].concat($jscomp.arrayFromIterable(g.slice(0,f)),[m.slice(0,d),a]);g=m.length===d?g.slice(f+2):[m.slice(c-h),a].concat($jscomp.arrayFromIterable(g.slice(f+2)));
return[n,g]}}return[g,[]]}function LG(g,c){var h=g;g=0;for(var f=[],m=0;m<c.length;m++){var n=$jscomp.makeIterator(ng.splitTextAndAttributesAt(h,c[m]-g));h=n.next().value;n=n.next().value;f.push(h);for(var a=0;a<h.length;a+=2)g+="string"===typeof h[a]?h[a].length:1;h=n}f.push(h);return f}function MG(g,c,h){h=void 0===h?!1:h;if(!g.length||2===g.length&&""==g[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?g:g.slice();g=h?g:g.slice();for(h=0;h<c.length;h+=2)g.push(c[h],c[h+1]);
return g}function NG(g,c,h){var f=c.start;c=c.end;if(ng.eqPosition(f,c))return null;ng.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,c=c.next().value);var m=f;f=m.row;var n=m.column;m=c;c=m.row;m=m.column;var a=g.getLine(f),d=a.textAndAttributes,k=0;n=$jscomp.makeIterator(ng.splitTextAndAttributesAt(d,n));g=n.next().value;n=n.next().value;d.length=0;ng.textAndAttributesDo(g,function(l,p){k+="string"===typeof l?l.length:1;d.push(l,p)});if(f===c){var b=$jscomp.makeIterator(ng.splitTextAndAttributesAt(n,
m-k));n=b.next().value;b=b.next().value}ng.textAndAttributesDo(n,function(l,p){return d.push(l,h(a,p))});f===c&&ng.textAndAttributesDo(b,function(l,p){return d.push(l,p)});a._textAttributes=null;a.textAndAttributes=ng.joinTextAttributes(d);if(f!==c){b={};for(f+=1;f<c;b={$jscomp$loop$prop$textAndAttributes$1598$2705:b.$jscomp$loop$prop$textAndAttributes$1598$2705},f++)a=a.nextLine(),b.$jscomp$loop$prop$textAndAttributes$1598$2705=a.textAndAttributes,g=b.$jscomp$loop$prop$textAndAttributes$1598$2705.slice(),
b.$jscomp$loop$prop$textAndAttributes$1598$2705.length=0,ng.textAndAttributesDo(g,function(l){return function(p,q){return l.$jscomp$loop$prop$textAndAttributes$1598$2705.push(p,h(a,q))}}(b)),a._textAttributes=null,a.textAndAttributes=ng.joinTextAttributes(b.$jscomp$loop$prop$textAndAttributes$1598$2705);a=a.nextLine();var e=a.textAndAttributes;f=$jscomp.makeIterator(ng.splitTextAndAttributesAt(e,m));b=f.next().value;f=f.next().value;e.length=0;ng.textAndAttributesDo(b,function(l,p){return e.push(l,
h(a,p))});ng.textAndAttributesDo(f,function(l,p){return e.push(l,p)});a._textAttributes=null;a.textAndAttributes=ng.joinTextAttributes(e)}}function OG(g,c){var h=g.column;g=g.row;var f=[],m=[];c=$jscomp.makeIterator(ng.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var a=0;a<n.length;a+=2){var d=n[a];d=h+("string"===typeof d?d.length:1);f.push({start:{row:g,column:h},end:{row:g,column:d}});m.push(n[a],n[a+1]);h=d}h=0;g++}return{ranges:f,textAndAttributes:m}}
function kA(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var h=[],f=[],m=0;m<g.length;m+=2){var n=g[m],a=g[m+1];if("string"!==typeof n)f.push(n,a);else for(;n.length;){var d=n.indexOf(c);if(-1===d){f.push(n,a);break}0<d&&f.push(n.slice(0,d),a);h.push(f);n=n.slice(d+1);f=[]}}f.length?h.push(f):(f=$jscomp.makeIterator(g.slice(-2)),g=f.next().value,f=f.next().value,"string"===typeof g&&g.endsWith(c)&&h.push(["",f]));return h}function PG(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):
c;var h=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);g=h.textRenderer.directRenderLineFn(h);c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);
for(f=h.next();!f.done;f=h.next())c.appendChild(g(f.value));return c.outerHTML}function vq(g){return g?g.replace(/^\s+|\s+$/g,""):""}function xO(g,c){var h=g&&"string"===typeof g.type,f=h?g:c,m;for(m in g){var n=g[m];Array.isArray(n)?n.forEach(function(a){xO(a,f)}):n&&"object"===typeof n&&xO(n,f)}h&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function QG(g){(this||Vca).options=g||{}}function Pj(g){g=g||{};s0.call(this||Nr,g);(this||Nr).indentation=
g.indent}function ju(g){throw new RangeError(Wca[g]);}function t0(g,c){var h=g.split("@"),f="";1<h.length&&(f=h[0]+"@",g=h[1]);g=g.replace(Xca,".").split(".");h=[];for(var m=g.length;m--;)h[m]=c(g[m]);c=h.join(".");return f+c}function u0(g){for(var c=[],h=0,f=g.length;h<f;){var m=g.charCodeAt(h++);if(55296<=m&&56319>=m&&h<f){var n=g.charCodeAt(h++);56320==(64512&n)?c.push(((1023&m)<<10)+(1023&n)+65536):(c.push(m),h--)}else c.push(m)}return c}function pn(){this.href=this.path=this.pathname=this.query=
this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function lA(g,c,h){if(g&&mp.isObject(g)&&g instanceof pn)return g;var f=new pn;return f.parse(g,c,h),f}function np(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function v0(g,c){for(var h,f="",m=0,n=-1,a=0,d=0;d<=g.length;++d){if(d<g.length)h=g.charCodeAt(d);else{if(47===h)break;h=47}if(47===h){if(n!==d-1&&1!==a)if(n!==d-1&&2===a){if(2>f.length||2!==
m||46!==f.charCodeAt(f.length-1)||46!==f.charCodeAt(f.length-2))if(2<f.length){if(n=f.lastIndexOf("/"),n!==f.length-1){-1===n?(f="",m=0):m=(f=f.slice(0,n)).length-1-f.lastIndexOf("/");n=d;a=0;continue}}else if(2===f.length||1===f.length){f="";m=0;n=d;a=0;continue}c&&(0<f.length?f+="/..":f="..",m=2)}else 0<f.length?f+="/"+g.slice(n+1,d):f=g.slice(n+1,d),m=d-n-1;n=d;a=0}else 46===h&&-1!==a?++a:a=-1}return f}function yO(g,c){try{return decodeURIComponent(g.join(""))}catch(f){}if(1===g.length)return g;
c=c||1;var h=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],yO(h),yO(g))}function zO(){return Array.prototype.reduce.call(arguments,function(g,c){return Yca.resolve(g,c)})}function w0(g){return"\\"===Zca.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function mA(g){return $ca(g.replace(/\+/g,"%2B"))}function RG(g,c,h){ada.nextTick(function(){g(c,h)})}function fx(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function x0(g,c,h){c=mA(c);
try{return String(g(c))}catch(f){throw f.sourceMapData=h,f;}}function y0(g,c,h,f){try{var m=z0(g,c)}catch(n){return RG(f,n)}if(!m||m.map)return RG(f,null,m);g=mA(m.url);h(g,function(n,a){if(n)return n.sourceMapData=m,f(n);m.map=String(a);try{m.map=fx(m.map,m)}catch(d){return f(d)}f(null,m)})}function A0(g,c,h){g=z0(g,c);if(!g||g.map)return g;g.map=x0(h,g.url,g);g.map=fx(g.map,g);return g}function z0(g,c){c=w0(c);g=(g=g.match(bda))?g[1]||g[2]||"":null;if(!g)return null;var h=g.match(cda);if(h){var f=
h[1]||"text/plain",m=h[2]||"";h=h[3]||"";c={sourceMappingURL:g,url:null,sourcesRelativeTo:c,map:h};if(!dda.test(f)){var n=Error("Unuseful data uri mime type: "+f);n.sourceMapData=c;throw n;}try{if(";base64"===m)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=B0(h);else{var a=B0(h),d=a.length,k=new Uint8Array(d);for(g=0;g<d;g++)k[g]=a.charCodeAt(g);n=(new TextDecoder(eda,{fatal:!0})).decode(k)}else n=decodeURIComponent(h);c.map=fx(n,c)}catch(b){throw b.sourceMapData=c,b;}return c}n=
zO(c,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function C0(g,c,h,f,m){"function"===typeof f&&(m=f,f={});var n=g.sources?g.sources.length:0,a={sourcesResolved:[],sourcesContent:[]};if(0===n)RG(m,null,a);else{var d=function(){n--;0===n&&m(null,a)};D0(g,c,f,function(k,b,e){a.sourcesResolved[e]=k;"string"===typeof b?(a.sourcesContent[e]=b,RG(d,null)):(k=mA(k),h(k,function(l,p){a.sourcesContent[e]=l?l:String(p);d()}))})}}function E0(g,c,h,f){var m={sourcesResolved:[],sourcesContent:[]};
if(!g.sources||0===g.sources.length)return m;D0(g,c,f,function(n,a,d){m.sourcesResolved[d]=n;if(null!==h)if("string"===typeof a)m.sourcesContent[d]=a;else{n=mA(n);try{m.sourcesContent[d]=String(h(n))}catch(k){m.sourcesContent[d]=k}}});return m}function D0(g,c,h,f){h=h||{};c=w0(c);for(var m,n,a=0,d=g.sources.length;a<d;a++)m=null,"string"===typeof h.sourceRoot?m=h.sourceRoot:"string"===typeof g.sourceRoot&&!1!==h.sourceRoot&&(m=g.sourceRoot),m=null===m||""===m?zO(c,g.sources[a]):zO(c,m.replace(fda,
"/"),g.sources[a]),n=(g.sourcesContent||[])[a],f(m,n,a)}function Kk(g){F0.call(this||AO,g)}function SG(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,f){return 0==f%2?String(h):""}).join(""):String(c):String(c);return g}function TG(g){var c=g.filePath,h=g.worldName,f=g.snapshot,m=g.commit,n=g.loadingIndicator,a=
g.progress,d=void 0===g.logError?function(fa){return console.log(fa)}:g.logError,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:return fa.setCatchFinallyBlocks(2),k=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
a.opacity=0,a.hasFixedPosition=!0,a.openInWorld(),a.bottomCenter=n.topCenter,fa.yield(Ad.polyfills(),4);case 4:return b=$world.env,Ad.doBootstrap?fa.yield(Ad.bootstrapLivelySystem(n,a,k),8):fa.yield(Ad.fastPrepLivelySystem(n),7);case 7:fa.jumpTo(6);break;case 8:case 6:return n.label="Loading lively.2lively...",fa.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Ad.askBeforeQuit&&window.addEventListener("beforeunload",function(aa){return aa.returnValue="Really?"},!0);if("dynamic"!=
k["lively.morphic"]||Ad.fastLoad){e=lively.morphic;fa.jumpTo(10);break}n.label="Loading lively.morphic...";return fa.yield(lively.modules.importPackage("lively.morphic"),11);case 11:e=fa.yieldResult,a.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:n.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;Ad.unregisterExtension("part");Ad.registerExtension(Ad.partResourceExtension);Ad.unregisterExtension("styleguide");
Ad.registerExtension(Ad.styleguideResourceExtension);lively.FreezerRuntime=!1;l=document.location;window.worldLoadingIndicator=n;fa.setCatchFinallyBlocks(12);p={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return f.startsWith("http")||(f=Ad.resource(System.baseURL).join(f).url),fa.yield(lively.modules.module("lively.morphic/world.js").recorder,33);if(m)return fa.yield(e.World.loadFromCommit(m,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+m.name})),
15);if(h)return"__newWorld__"==h?Object.values(k).every(function(aa){return"frozen"==aa})||Ad.fastLoad?fa.yield(lively.modules.module("lively.ide/world.js").recorder,29):fa.yield(lively.modules.System.import("lively.ide/world.js"),27):fa.yield(e.World.loadFromDB(h,void 0,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){fa.jumpTo(15);break}return fa.yield(e.World.loadFromResource(Ad.resource(System.baseURL).join(c),void 0,Object.assign({},p,{browserURL:"/worlds/load?file="+
c})),15);case 27:return w=fa.yieldResult,q=w.LivelyWorld,fa.yield(lively.modules.System.import("lively.morphic/world-loading.js"),28);case 28:y=fa.yieldResult;u=y.loadWorld;fa.jumpTo(26);break;case 29:return A=fa.yieldResult,q=A.LivelyWorld,fa.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:C=fa.yieldResult,u=C.loadWorld;case 26:return fa.yield(u(new q({openNewProjectPrompt:!0}),void 0,p),15);case 33:return V=fa.yieldResult,E=V.World,fa.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,
34);case 34:return T=fa.yieldResult,I=T.loadWorld,fa.yield(lively.modules.module("lively.morphic/serialization.js").recorder,35);case 35:return Y=fa.yieldResult,na=L=Y.loadMorphFromSnapshot,fa.yield(Ad.resource(f).readJson(),37);case 37:return fa.yield(na(fa.yieldResult),36);case 36:return Ba=fa.yieldResult,fa.yield(I(new E({showsUserFlap:!1,extent:$world.extent}),void 0,p),38);case 38:F=fa.yieldResult,F.addMorph(Ba),F.onWindowResize();case 15:fa.leaveTryBlock(13,2);break;case 12:W=fa.enterCatchBlock(2),
window.__loadError__=W;case 13:return a.finishPackage({packageName:"world",loaded:!0}),a.fadeIntoBack(),window.addEventListener("popstate",function(aa){document.location==l&&document.location.reload()}),Ad.worldLoaded=!0,fa.yield($world.whenReady(),39);case 39:return n.remove(),fa.yield(b.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=k["lively.morphic"]||Ad.fastLoad||(b.renderer.clear(),b.fontMetric.uninstall(),b.eventDispatcher.uninstall());fa.leaveTryBlock(0);break;case 2:throw P=fa.enterCatchBlock(),
P.originalErr&&(P=P.originalErr),S=P.message,P.stack!==P.message&&(S+=P.stack.includes(P.message)?P.stack.replace(P.message,"\n"):P.stack),d(S),P;}})}za({$:wk,G:lD,H:Yv,J:uq,P:Ag,Z:Pn,_:No,a4:rG,a5:bx,aW:bA,aX:dA,aY:pG,ad:Uf,at:dw,au:mF,ax:Zv,b:bh,b0:Vv,b1:Uv,b2:Iy,b3:Jy,b4:$p,b6:Mo,b7:Zp,b8:vD,b9:tD,bA:pm,bC:Uh,bF:Ny,bH:ir,bI:hf,bK:Wp,bR:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){qn.default().world||(c=window.$world=window.$$world=
new wq({name:G0.name,extent:bh(window.innerWidth,window.innerHeight)}),qn.default().setWorldRenderedOn(c,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var f=Py(G0,{reinitializeIds:function(m){return m}});if(f.isWorld)f.position=bh(0,0),f.isEmbedded=!0,qn.default().setWorldRenderedOn(f,g,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(m){return f.execCommand("resize on client",
m[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},f.openInWorld(bh(0,0)),f.execCommand("resize on client",g)}catch(m){f.position=bh(0,0)}});h.jumpToEnd()})},ba:uD,bb:wD,bc:BG,bd:jA,be:aA,bw:Gd,c:Jj,d:xk,i:Kb,j:hu,l:hp,m:$i,n:qG,o:Yp,p:Vf,r:Dc,u:ew,v:Bj,w:Tv,x:Yi,y:er,z:Xv});var Ie=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ie.applyExclude=Pb;Ie.parseQuery=tb;Ie.stringifyQuery=Fc;Ie.withRelativePartsResolved=
vc;Ie._relativePathBetween_checkPathes=function(g,c){g.startsWith("/")&&(g=g.slice(1));c.startsWith("/")&&(c=c.slice(1));g=g.split("/");c=c.split("/");for(var h=0;h<c.length&&g[h]&&g[h]==c[h];h++);return"../".repeat(Math.max(0,c.length-h-1))+g.splice(h,g.length).join("/")};Ie.relativePathBetween=Qc;Ie.join=mc;Ie.parent=ic;Ie.parents=zc;Ie.resource=Dc;Ie.createFiles=Gd;Ie.registerExtension=Hd;Ie.unregisterExtension=Zd;Ie.applyExclude=Pb;Ie.applyExclude=Pb;Ie.parseQuery=tb;Ie.parseQuery=tb;Ie.stringifyQuery=
Fc;Ie.stringifyQuery=Fc;Ie.slashEndRe=/\/+$/;Ie.slashStartRe=/^\/+/;Ie.protocolRe=/^[a-z0-9-_\.]+:/;Ie.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Ie.slashslashRe=/^\/\/[^\/]+/;Ie.pathDotRe=/\/\.\//g;Ie.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ie.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ie.withRelativePartsResolved=vc;Ie.withRelativePartsResolved=vc;Ie.relativePathBetween=Qc;Ie.relativePathBetween=Qc;Ie.join=mc;Ie.join=mc;Ie.parent=ic;Ie.parent=ic;Ie.parents=zc;Ie.parents=zc;var ku=Ie.extensions||[];Ie.extensions=ku;Ie.extensions=
ku;Ie.extensions=ku;Ie.resource=Dc;Ie.resource=Dc;Ie.createFiles=Gd;Ie.createFiles=Gd;Ie.registerExtension=Hd;Ie.registerExtension=Hd;Ie.unregisterExtension=Zd;Ie.unregisterExtension=Zd;var UG=/^file:\/\/\/[a-z]:\//i;Ie.windowsURLPrefixRe=UG;Ie.windowsURLPrefixRe=UG;Ie.windowsURLPrefixRe=UG;var VG=/^[a-z]:\//i;Ie.windowsPathPrefixRe=VG;Ie.windowsPathPrefixRe=VG;Ie.windowsPathPrefixRe=VG;var WG=/^[a-z]:\/$/i;Ie.windowsRootPathRe=WG;Ie.windowsRootPathRe=WG;Ie.windowsRootPathRe=WG;var Qh=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");
Qh.nyi=function(g,c){throw Error(c+" for "+g.constructor.name+" not yet implemented");};Qh.resource=Dc;Qh.parseQuery=tb;Qh.withRelativePartsResolved=vc;Qh.relativePathBetween=Qc;Qh.windowsPathPrefixRe=VG;Qh.stringifyQuery=Fc;Qh.slashEndRe=/\/+$/;Qh.slashStartRe=/^\/+/;Qh.protocolRe=/^[a-z0-9-_\.]+:/;Qh.slashslashRe=/^\/\/[^\/]+/;var zf=function(g,c){if(!g)throw Error("Cannot create resource without url");this.url=String(g);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=
this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};zf.fromProps=function(g){g=void 0===g?{}:g;return(new this(g.url)).assignProperties(g)};zf.prototype.equals=function(g){if(!g||this.constructor!==g.constructor)return!1;var c=this.url;g=g.url;"/"===c[c.length-1]&&(c=c.slice(0,-1));"/"===g[g.length-1]&&(g=g.slice(0,-1));return c===g};zf.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};zf.prototype.newResource=function(g){return Qh.resource(g,
this)};zf.prototype.path=function(){var g=this.url.replace(Qh.protocolRe,"").replace(Qh.slashslashRe,"");return""===g?"/":g};zf.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};zf.prototype.name=function(){var g=this.path(),c=g.lastIndexOf("?");-1<c&&(g=g.slice(0,c));g.endsWith("/")&&(g=g.slice(0,-1));g=g.split("/");return decodeURIComponent(g[g.length-1])};zf.prototype.ext=function(){var g=this.url;if(g.endsWith("/"))return"";g=$jscomp.makeIterator(g.match(/\.([^\/\.]+$)/)||
["",""]);g.next();return g.next().value.toLowerCase()};zf.prototype.nameWithoutExt=function(){var g=this.name(),c=g.lastIndexOf(".");0<c&&(g=g.slice(0,c));return g};zf.prototype.scheme=function(){return this.url.split(":")[0]};zf.prototype.host=function(){var g=this.url.indexOf("://");if(-1===g)return null;g=this.url.slice(g+3);var c=g.indexOf("/");return g.slice(0,-1<c?c:g.length)};zf.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};
zf.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Qh.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};zf.prototype.parents=function(){for(var g=[],c=this.parent();c;)g.unshift(c),c=c.parent();return g};zf.prototype.isParentOf=function(g){var c=this;return g.schemeAndHost()===this.schemeAndHost()&&g.parents().some(function(h){return h.equals(c)})};zf.prototype.query=function(){return Qh.parseQuery(this.url)};zf.prototype.withQuery=function(g){var c=
Object.assign({},this.query(),{},g);g=$jscomp.makeIterator(this.url.split("?")).next().value;c=Qh.stringifyQuery(c);return this.newResource(g+"?"+c)};zf.prototype.commonDirectory=function(g){if(g.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(g))return this;if(this.isRoot())return this.asDirectory();if(g.isRoot())return g.asDirectory();g=g.parents();for(var c=this.parents(),h=this.root(),f=0;f<c.length;f++){var m=c[f],n=g[f];if(!n||!m.equals(n))break;h=m}return h};
zf.prototype.withRelativePartsResolved=function(){var g=this.path(),c=Qh.withRelativePartsResolved(g);if(c===g)return this;c.startsWith("/")&&(c=c.slice(1));c[1]===":".startsWith("/")?c=c.slice(1):":"===c[1]&&c.match(Qh.windowsPathPrefixRe)&&(c=c.slice(3));return this.newResource(this.root().url+c)};zf.prototype.relativePathFrom=function(g){return Qh.relativePathBetween(g.url,this.url)};zf.prototype.withPath=function(g){return(this.isRoot()?this:this.root()).join(g)};zf.prototype.join=function(g){return this.newResource(this.url.replace(Qh.slashEndRe,
"")+"/"+g.replace(Qh.slashStartRe,""))};zf.prototype.isRoot=function(){return"/"===this.path()};zf.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Qh.slashEndRe)};zf.prototype.isDirectory=function(){return!this.isFile()};zf.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Qh.slashEndRe,"")+"/")};zf.prototype.root=function(){if(this.isRoot())return this;var g=this.url.slice(0,-this.path().length);return this.newResource(g+"/")};
zf.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Qh.slashEndRe,"")):this};zf.prototype.assignProperties=function(g){for(var c in g)if("url"!==c){var h=c;if("isLink"===c||"isDirectory"===c)h="_"+c;this[h]=g[c]}return this};zf.prototype.ensureExistance=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return h.yield(c.exists(),2);case 2:return h.yieldResult?h.return(c):h.yield(c.parent().ensureExistance(),
3);case 3:return c.isFile()?h.yield(c.write(g||""),5):h.yield(c.mkdir(),5);case 5:return h.return(c)}})};zf.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(h.isFile()){n=g.isFile()?g:g.join(h.name());if(!c){k.jumpTo(8);break}return k.yield(n.parent().ensureExistance(),8)}if(!g.isDirectory())throw Error("Cannot copy a directory to a file!");return k.yield(h.dirList("infinity"),4);case 4:return f=
k.yieldResult,m=f.map(function(b){return g.join(b.relativePathFrom(h))}),k.yield(g.ensureExistance(),5);case 5:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isDirectory()&&m[l].ensureExistance()).then(b)}},function(){return Promise.resolve()})(),6);case 6:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isFile()&&e.copyTo(m[l],!1)).then(b)}},function(){return Promise.resolve()})(),3);case 8:return a=n,d=a.write,k.yield(h.read(),
11);case 11:return k.yield(d.call(a,k.yieldResult),3);case 3:return k.return(h)}})};zf.prototype.rename=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(c.copyTo(g),2);c.remove();return h.return(g)})};zf.prototype.beBinary=function(g){return this.setBinary(!0)};zf.prototype.setBinary=function(g){this.binary=g;return this};zf.prototype.read=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Qh.nyi(g,
"read");c.jumpToEnd()})};zf.prototype.write=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Qh.nyi(g,"write");c.jumpToEnd()})};zf.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Qh.nyi(g,"mkdir");c.jumpToEnd()})};zf.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Qh.nyi(g,"exists");c.jumpToEnd()})};zf.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Qh.nyi(g,
"remove");c.jumpToEnd()})};zf.prototype.dirList=function(g,c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){Qh.nyi(h,"dirList");f.jumpToEnd()})};zf.prototype.readProperties=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Qh.nyi(c,"readProperties");h.jumpToEnd()})};zf.prototype.writeJson=function(g,c){return this.write((void 0===c?0:c)?JSON.stringify(g,null,2):JSON.stringify(g))};zf.prototype.readJson=function(g){var c=this,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==
m.nextAddress?(h=JSON,f=h.parse,m.yield(c.read(),2)):m.return(f.call(h,m.yieldResult))})};zf.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(zf.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Qh.Resource=zf;Qh.default=zf;var gx=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");
gx.evalJS=Wi;gx.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var ci=function(g,c,h,f){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(h||g);this.setFuncProperties(g||f)};ci.fromFunction=function(g,c){return new this(g,c||{})};ci.fromSource=function(g,c){return new this(null,c||{},g)};ci.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?
lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};ci.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};ci.prototype.hasFuncSource=function(){return this.source&&!0};ci.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};ci.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};ci.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in g)g.hasOwnProperty(h)&&
(c[h]=g[h])};ci.prototype.lookup=function(g){return this.varMapping[g]};ci.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=gx.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};ci.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||
null};ci.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};ci.prototype.recreateFuncFromSource=function(g,c){c=[];var h="$super"===this.firstParameter(g);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));h&&(f+="(function superWrapperForClosure() { return ");f+="("+g+")";h&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");
try{var m=gx.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(m);return this.originalFunc=m}catch(n){throw g="Cannot create function "+n+" src: "+f,console.error(g),Error(g);}};ci.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(g[h]=c[h]);this.addClosureInformation(g)};ci.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};ci.prototype.asFunction=
function(){return this.recreateFunc()};ci.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(ci.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});za("X",ci);gx.Closure=ci;gx.default=ci;var Or=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Or.groupBy=Oc;var bl=function(){};bl.fromArray=
function(g,c,h){for(var f=new Or.Group,m=0,n=g.length;m<n;m++){var a=c.call(h,g[m],m);Or.Group.prototype.hasOwnProperty(a)&&(a="_"+a);f[a]||(f[a]=[]);f[a].push(g[m])}return f};bl.prototype.toArray=function(){return this.reduceGroups(function(g,c,h){return g.concat([h])},[])};bl.prototype.forEach=function(g,c){var h=this;Object.keys(h).forEach(function(f){h[f].forEach(g.bind(c,f))});return h};bl.prototype.forEachGroup=function(g,c){var h=this;Object.keys(h).forEach(function(f){g.call(c,f,h[f])});return h};
bl.prototype.map=function(g,c){var h=new Or.Group;this.forEachGroup(function(f,m){h[f]=m.map(g.bind(c,f))});return h};bl.prototype.mapGroups=function(g,c){var h=new Or.Group;this.forEachGroup(function(f,m){h[f]=g.call(c,f,m)});return h};bl.prototype.keys=function(){return Object.keys(this)};bl.prototype.reduceGroups=function(g,c,h){this.forEachGroup(function(f,m){c=g.call(h,c,f,m)});return c};bl.prototype.count=function(){return this.reduceGroups(function(g,c,h){g[c]=h.length;return g},{})};$jscomp.global.Object.defineProperties(bl,
{by:{configurable:!0,enumerable:!0,get:function(){return Or.groupBy}}});Or.Group=bl;Or.default=bl;var yb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");yb.range=xc;yb.withN=od;yb.genN=qb;yb.filter=kc;yb.binarySearchFor=Uc;yb.findAndGet=tc;yb.filterByKey=cd;yb.grep=td;yb.mask=nb;yb.reject=cc;yb.rejectByKey=wc;yb.without=dc;yb.withoutAll=Nc;yb.uniq=$a;yb.uniqBy=Xa;yb.uniqByKey=Gb;yb.compact=ub;yb.mutableCompact=db;yb.forEach=Xb;yb.zip=Fa;yb.flatten=sb;yb.flatmap=Ya;yb.interpose=pb;yb.delimWith=
$b;yb.map=lc;yb.invoke=Jb;yb.pluck=Cb;yb.reduce=Bb;yb.reduceRight=sa;yb.some=Ta;yb.every=O;yb.equals=U;yb.deepEquals=ra;yb.isSorted=xa;yb.sort=pa;yb.sortBy=ea;yb.sortByKey=bb;yb.reverse=Aa;yb.reversed=Rb;yb.reMatches=Gc;yb.first=Ab;yb.last=Hc;yb.intersect=fb;yb.union=ud;yb.pushAt=je;yb.removeAt=rc;yb.remove=gb;yb.pushAll=Id;yb.pushAllAt=hb;yb.pushIfNotIncluded=Za;yb.replaceAt=ua;yb.clear=J;yb.isSubset=la;yb.doAndContinue=La;yb.nestedDelay=ib;yb.forEachShowingProgress=Ib;yb.swap=hc;yb.rotate=Vb;yb.groupBy=
Oc;yb.groupByKey=Pc;yb.partition=Yd;yb.batchify=r;yb.toTuples=Rd;yb.combinationsPick=ke;yb.combinations=le;yb.take=ge;yb.drop=vd;yb.takeWhile=Td;yb.dropWhile=Ce;yb.shuffle=Ae;yb.max=ld;yb.min=nf;yb.sum=gc;yb.count=id;yb.size=fe;yb.histogram=Ec;yb.clone=pe;yb.toArray=Ga;yb.each=Oa;yb.all=Ka;yb.any=N;yb.collect=G;yb.findAll=wa;yb.inject=M;yb.mapAsyncSeries=ha;yb.mapAsync=va;yb.objectEquals=Tl;yb.delay=ue;yb.once=hf;yb.NullFunction=ob;yb.Group=bl;yb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==
typeof window?window:global;yb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};yb.from=yb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,h=Array(c);c--;)h[c]=g[c];return h};yb.detect=yb.features.find?function(g,c,h){return g.find(c,h)}:function(g,c,h){for(var f,m=0,n=g.length;m<n;m++)if(f=g[m],c.call(h,
f,m))return f};yb.findIndex=yb.features.findIndex?function(g,c,h){return g.findIndex(c,h)}:function(g,c,h){var f=-1;return g.find(function(m,n){f=n;return c.call(m,h)})?f:-1};yb.isArray=Array.isArray;yb.includes=yb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};yb.include=yb.includes;yb.permutations=function(){function g(c,h){return c.length?yb.flatmap(c,function(f,m){return g(c.slice(0,m).concat(c.slice(m+1)),h.concat([f]))}):[h]}return function(c){return g(c,
[])}}();yb.features.from||(Array.from=yb.from);yb.features.filter||(Array.prototype.filter=function(g,c){return yb.filter(this,g,c)});yb.features.find||(Array.prototype.find=function(g,c){return yb.detect(this,g,c)});yb.features.findIndex||(Array.prototype.findIndex=function(g,c){return yb.findIndex(this,g,c)});yb.features.includes||(Array.prototype.includes=function(g){return yb.includes(this,g)});var BO=yb.from,CO=yb.detect,DO=yb.findIndex,EO=yb.isArray,FO=yb.includes,GO=yb.include,HO=yb.permutations;
yb.range=xc;yb.range=xc;yb.from=BO;yb.from=BO;yb.withN=od;yb.withN=od;yb.genN=qb;yb.genN=qb;yb.filter=kc;yb.filter=kc;yb.detect=CO;yb.detect=CO;yb.binarySearchFor=Uc;yb.binarySearchFor=Uc;yb.findIndex=DO;yb.findIndex=DO;yb.findAndGet=tc;yb.findAndGet=tc;yb.filterByKey=cd;yb.filterByKey=cd;yb.grep=td;yb.grep=td;yb.mask=nb;yb.mask=nb;yb.reject=cc;yb.reject=cc;yb.rejectByKey=wc;yb.rejectByKey=wc;yb.without=dc;yb.without=dc;yb.withoutAll=Nc;yb.withoutAll=Nc;yb.uniq=$a;yb.uniq=$a;yb.uniqBy=Xa;yb.uniqBy=
Xa;yb.uniqByKey=Gb;yb.uniqByKey=Gb;yb.compact=ub;yb.compact=ub;yb.mutableCompact=db;yb.mutableCompact=db;yb.forEach=Xb;yb.forEach=Xb;yb.zip=Fa;yb.zip=Fa;yb.flatten=sb;yb.flatten=sb;yb.flatmap=Ya;yb.flatmap=Ya;yb.interpose=pb;yb.interpose=pb;yb.delimWith=$b;yb.delimWith=$b;yb.map=lc;yb.map=lc;yb.invoke=Jb;yb.invoke=Jb;yb.pluck=Cb;yb.pluck=Cb;yb.reduce=Bb;yb.reduce=Bb;yb.reduceRight=sa;yb.reduceRight=sa;yb.isArray=EO;yb.isArray=EO;yb.includes=FO;yb.includes=FO;yb.include=GO;yb.include=GO;yb.some=Ta;
yb.some=Ta;yb.every=O;yb.every=O;yb.equals=U;yb.equals=U;yb.deepEquals=ra;yb.deepEquals=ra;yb.isSorted=xa;yb.isSorted=xa;yb.sort=pa;yb.sort=pa;yb.sortBy=ea;yb.sortBy=ea;yb.sortByKey=bb;yb.sortByKey=bb;yb.reverse=Aa;yb.reverse=Aa;yb.reversed=Rb;yb.reversed=Rb;yb.reMatches=Gc;yb.reMatches=Gc;yb.first=Ab;yb.first=Ab;yb.last=Hc;yb.last=Hc;yb.intersect=fb;yb.intersect=fb;yb.union=ud;yb.union=ud;yb.pushAt=je;yb.pushAt=je;yb.removeAt=rc;yb.removeAt=rc;yb.remove=gb;yb.remove=gb;yb.pushAll=Id;yb.pushAll=Id;
yb.pushAllAt=hb;yb.pushAllAt=hb;yb.pushIfNotIncluded=Za;yb.pushIfNotIncluded=Za;yb.replaceAt=ua;yb.replaceAt=ua;yb.clear=J;yb.clear=J;yb.isSubset=la;yb.isSubset=la;yb.doAndContinue=La;yb.doAndContinue=La;yb.nestedDelay=ib;yb.nestedDelay=ib;yb.forEachShowingProgress=Ib;yb.forEachShowingProgress=Ib;yb.swap=hc;yb.swap=hc;yb.rotate=Vb;yb.rotate=Vb;yb.groupBy=Oc;yb.groupBy=Oc;yb.groupByKey=Pc;yb.groupByKey=Pc;yb.partition=Yd;yb.partition=Yd;yb.batchify=r;yb.batchify=r;yb.toTuples=Rd;yb.toTuples=Rd;yb.permutations=
HO;yb.permutations=HO;yb.combinationsPick=ke;yb.combinationsPick=ke;yb.combinations=le;yb.combinations=le;yb.take=ge;yb.take=ge;yb.drop=vd;yb.drop=vd;yb.takeWhile=Td;yb.takeWhile=Td;yb.dropWhile=Ce;yb.dropWhile=Ce;yb.shuffle=Ae;yb.shuffle=Ae;yb.max=ld;yb.max=ld;yb.min=nf;yb.min=nf;yb.sum=gc;yb.sum=gc;yb.count=id;yb.count=id;yb.size=fe;yb.size=fe;yb.histogram=Ec;yb.histogram=Ec;yb.clone=pe;yb.clone=pe;yb.toArray=Ga;yb.toArray=Ga;yb.each=Oa;yb.each=Oa;yb.all=Ka;yb.all=Ka;yb.any=N;yb.any=N;yb.collect=
G;yb.collect=G;yb.findAll=wa;yb.findAll=wa;yb.inject=M;yb.inject=M;yb.mapAsyncSeries=ha;yb.mapAsyncSeries=ha;yb.mapAsync=va;yb.mapAsync=va;var Ke=Object.freeze({__proto__:null,range:xc,from:BO,withN:od,genN:qb,filter:kc,detect:CO,binarySearchFor:Uc,findIndex:DO,findAndGet:tc,filterByKey:cd,grep:td,mask:nb,reject:cc,rejectByKey:wc,without:dc,withoutAll:Nc,uniq:$a,uniqBy:Xa,uniqByKey:Gb,compact:ub,mutableCompact:db,forEach:Xb,zip:Fa,flatten:sb,flatmap:Ya,interpose:pb,delimWith:$b,map:lc,invoke:Jb,pluck:Cb,
reduce:Bb,reduceRight:sa,isArray:EO,includes:FO,include:GO,some:Ta,every:O,equals:U,deepEquals:ra,isSorted:xa,sort:pa,sortBy:ea,sortByKey:bb,reverse:Aa,reversed:Rb,reMatches:Gc,first:Ab,last:Hc,intersect:fb,union:ud,pushAt:je,removeAt:rc,remove:gb,pushAll:Id,pushAllAt:hb,pushIfNotIncluded:Za,replaceAt:ua,clear:J,isSubset:la,doAndContinue:La,nestedDelay:ib,forEachShowingProgress:Ib,swap:hc,rotate:Vb,groupBy:Oc,groupByKey:Pc,partition:Yd,batchify:r,toTuples:Rd,permutations:HO,combinationsPick:ke,combinations:le,
take:ge,drop:vd,takeWhile:Td,dropWhile:Ce,shuffle:Ae,max:ld,min:nf,sum:gc,count:id,size:fe,histogram:Ec,clone:pe,toArray:Ga,each:Oa,all:Ka,any:N,collect:G,findAll:wa,inject:M,mapAsyncSeries:ha,mapAsync:va});za("a",Ke);var Ic=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Ic.Empty=Ua;Ic.K=eb;Ic.Null=ob;Ic.False=Tb;Ic.True=Yb;Ic.notYetImplemented=yc;Ic.all=md;Ic.own=Bd;Ic.argumentNames=Wc;Ic.qualifiedMethodName=Sd;Ic.extractBody=Qd;Ic.timeToRun=Ed;Ic.timeToRunN=yd;Ic.delay=ue;Ic.throttle=
De;Ic.debounce=gg;Ic.throttleNamed=pg;Ic.debounceNamed=Tf;Ic.createQueue=Le;Ic.workerWithCallbackQueue=Pg;Ic._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};Ic.composeAsync=tg;Ic.compose=Xg;Ic.flip=uf;Ic.withNull=Hf;Ic.waitFor=Wd;Ic.waitForAll=wh;Ic.curry=vb;Ic.wrap=nc;Ic.getOriginal=qd;Ic.wrapperChain=rd;Ic.replaceMethodForOneCall=Pe;Ic.once=hf;Ic.either=Qg;Ic.eitherNamed=qg;Ic.evalJS=Wi;Ic.fromString=hl;Ic.asScript=il;Ic.asScriptOf=Sk;Ic.addToObject=
pj;Ic.binds=Tk;Ic.setLocalVarValue=qj;Ic.getVarMapping=sk;Ic.setProperty=Yj;Ic.functionNames=Eh;Ic.localFunctionNames=Zj;Ic.logErrors=Ze;Ic.logCompletion=Th;Ic.logCalls=Xi;Ic.traceCalls=tk;Ic.webkitStack=kl;Ic.objectMerge=v;Ic.safeToString=ya;Ic.Closure=ci;Ic.arr=Ke;Ic._throttledByName={};Ic._debouncedByName={};Ic._queues={};Ic._queueUntilCallbacks={};Ic._eitherNameRegistry={};Ic.Empty=Ua;Ic.Empty=Ua;Ic.K=eb;Ic.K=eb;Ic.Null=ob;Ic.Null=ob;Ic.False=Tb;Ic.False=Tb;Ic.True=Yb;Ic.True=Yb;Ic.notYetImplemented=
yc;Ic.notYetImplemented=yc;Ic.withNull=Hf;Ic.withNull=Hf;Ic.all=md;Ic.all=md;Ic.own=Bd;Ic.own=Bd;Ic.argumentNames=Wc;Ic.argumentNames=Wc;Ic.qualifiedMethodName=Sd;Ic.qualifiedMethodName=Sd;Ic.extractBody=Qd;Ic.extractBody=Qd;Ic.timeToRun=Ed;Ic.timeToRun=Ed;Ic.timeToRunN=yd;Ic.timeToRunN=yd;Ic.delay=ue;Ic.delay=ue;Ic.throttle=De;Ic.throttle=De;Ic.debounce=gg;Ic.debounce=gg;Ic.throttleNamed=pg;Ic.throttleNamed=pg;Ic.debounceNamed=Tf;Ic.debounceNamed=Tf;Ic.createQueue=Le;Ic.createQueue=Le;Ic.workerWithCallbackQueue=
Pg;Ic.workerWithCallbackQueue=Pg;Ic.composeAsync=tg;Ic.composeAsync=tg;Ic.compose=Xg;Ic.compose=Xg;Ic.waitFor=Wd;Ic.waitFor=Wd;Ic.waitForAll=wh;Ic.waitForAll=wh;Ic.flip=uf;Ic.flip=uf;Ic.curry=vb;Ic.curry=vb;Ic.wrap=nc;Ic.wrap=nc;Ic.binds=Tk;Ic.binds=Tk;Ic.getOriginal=qd;Ic.getOriginal=qd;Ic.wrapperChain=rd;Ic.wrapperChain=rd;Ic.replaceMethodForOneCall=Pe;Ic.replaceMethodForOneCall=Pe;Ic.once=hf;Ic.once=hf;Ic.either=Qg;Ic.either=Qg;Ic.eitherNamed=qg;Ic.eitherNamed=qg;Ic.evalJS=Wi;Ic.evalJS=Wi;Ic.fromString=
hl;Ic.fromString=hl;Ic.asScript=il;Ic.asScript=il;Ic.asScriptOf=Sk;Ic.asScriptOf=Sk;Ic.addToObject=pj;Ic.addToObject=pj;Ic.setLocalVarValue=qj;Ic.setLocalVarValue=qj;Ic.getVarMapping=sk;Ic.getVarMapping=sk;Ic.setProperty=Yj;Ic.setProperty=Yj;Ic.functionNames=Eh;Ic.functionNames=Eh;Ic.localFunctionNames=Zj;Ic.localFunctionNames=Zj;Ic.logErrors=Ze;Ic.logErrors=Ze;Ic.logCompletion=Th;Ic.logCompletion=Th;Ic.logCalls=Xi;Ic.logCalls=Xi;Ic.traceCalls=tk;Ic.traceCalls=tk;Ic.webkitStack=kl;Ic.webkitStack=
kl;var Qj=Object.freeze({__proto__:null,Empty:Ua,K:eb,Null:ob,False:Tb,True:Yb,notYetImplemented:yc,withNull:Hf,all:md,own:Bd,argumentNames:Wc,qualifiedMethodName:Sd,extractBody:Qd,timeToRun:Ed,timeToRunN:yd,delay:ue,throttle:De,debounce:gg,throttleNamed:pg,debounceNamed:Tf,createQueue:Le,workerWithCallbackQueue:Pg,composeAsync:tg,compose:Xg,waitFor:Wd,waitForAll:wh,flip:uf,curry:vb,wrap:nc,binds:Tk,getOriginal:qd,wrapperChain:rd,replaceMethodForOneCall:Pe,once:hf,either:Qg,eitherNamed:qg,evalJS:Wi,
fromString:hl,asScript:il,asScriptOf:Sk,addToObject:pj,setLocalVarValue:qj,getVarMapping:sk,setProperty:Yj,functionNames:Eh,localFunctionNames:Zj,logErrors:Ze,logCompletion:Th,logCalls:Xi,traceCalls:tk,webkitStack:kl});za("f",Qj);var wd=lively.FreezerRuntime.recorderFor("lively.lang/object.js");wd.print=uk;wd.indent=function(g,c,h){if(!h||0>=h)return g;for(;0<h;)h--,g=c+g;return g};wd.isArray=Gj;wd.isElement=Kn;wd.isFunction=wf;wd.isBoolean=Uk;wd.isString=mm;wd.isNumber=fj;wd.isUndefined=jl;wd.isRegExp=
yl;wd.isObject=Al;wd.isPrimitive=zl;wd.isEmpty=Qm;wd.equals=Tl;wd.values=ll;wd.select=nm;wd.dissoc=Ob;wd.addScript=vh;wd.extend=ca;wd.clone=t;wd.extract=x;wd.inspect=z;wd.merge=v;wd.deepMerge=B;wd.sortKeysWithBeforeAndAfterConstraints=D;wd.inherit=H;wd.valuesInPropertyHierarchy=R;wd.mergePropertyInHierarchy=da;wd.deepCopy=K;wd.typeStringOf=Q;wd.shortPrintStringOf=ba;wd.isMutableType=Z;wd.safeToString=ya;wd.asObject=Ja;wd.newKeyIn=Qa;wd.functionFromString=hl;wd.asScriptOf=Sk;wd.argumentNames=Wc;wd.arrayDeepEquals=
ra;wd.isSubset=la;wd.flatten=sb;wd.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},h;for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,h)});return c};wd.keys=Object.keys;var IO=wd.keys,JO=wd.getOwnPropertyDescriptors;wd.isArray=Gj;wd.isArray=Gj;wd.isElement=Kn;wd.isElement=Kn;wd.isFunction=wf;wd.isFunction=
wf;wd.isBoolean=Uk;wd.isBoolean=Uk;wd.isString=mm;wd.isString=mm;wd.isNumber=fj;wd.isNumber=fj;wd.isUndefined=jl;wd.isUndefined=jl;wd.isRegExp=yl;wd.isRegExp=yl;wd.isObject=Al;wd.isObject=Al;wd.isPrimitive=zl;wd.isPrimitive=zl;wd.isEmpty=Qm;wd.isEmpty=Qm;wd.equals=Tl;wd.equals=Tl;wd.keys=IO;wd.keys=IO;wd.values=ll;wd.values=ll;wd.select=nm;wd.select=nm;wd.dissoc=Ob;wd.dissoc=Ob;wd.addScript=vh;wd.addScript=vh;wd.extend=ca;wd.extend=ca;wd.clone=t;wd.clone=t;wd.extract=x;wd.extract=x;wd.inspect=z;wd.inspect=
z;wd.merge=v;wd.merge=v;wd.deepMerge=B;wd.deepMerge=B;wd.inherit=H;wd.inherit=H;wd.valuesInPropertyHierarchy=R;wd.valuesInPropertyHierarchy=R;wd.mergePropertyInHierarchy=da;wd.mergePropertyInHierarchy=da;wd.sortKeysWithBeforeAndAfterConstraints=D;wd.sortKeysWithBeforeAndAfterConstraints=D;wd.deepCopy=K;wd.deepCopy=K;wd.typeStringOf=Q;wd.typeStringOf=Q;wd.shortPrintStringOf=ba;wd.shortPrintStringOf=ba;wd.isMutableType=Z;wd.isMutableType=Z;wd.safeToString=ya;wd.safeToString=ya;wd.asObject=Ja;wd.asObject=
Ja;wd.newKeyIn=Qa;wd.newKeyIn=Qa;wd.getOwnPropertyDescriptors=JO;wd.getOwnPropertyDescriptors=JO;var df=Object.freeze({__proto__:null,isArray:Gj,isElement:Kn,isFunction:wf,isBoolean:Uk,isString:mm,isNumber:fj,isUndefined:jl,isRegExp:yl,isObject:Al,isPrimitive:zl,isEmpty:Qm,equals:Tl,keys:IO,values:ll,select:nm,dissoc:Ob,addScript:vh,extend:ca,clone:t,extract:x,inspect:z,merge:v,deepMerge:B,inherit:H,valuesInPropertyHierarchy:R,mergePropertyInHierarchy:da,sortKeysWithBeforeAndAfterConstraints:D,deepCopy:K,
typeStringOf:Q,shortPrintStringOf:ba,isMutableType:Z,safeToString:ya,asObject:Ja,newKeyIn:Qa,getOwnPropertyDescriptors:JO});za("Y",df);var KO={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},
8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},
t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},
"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},
_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},
I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},
i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},
a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},
i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},
p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},
S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},
"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},
R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},
S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},
c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},
"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},
f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},
":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},
C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},
R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},
n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},
d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},
t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var h=function(f,m,n){null==m&&(m=c);null==n&&(n="a");if(null==f)return n;
var a=f.slice(0,1);m=m[a];return null!=a&&null!=m?h(f.slice(1),m,m._||n):n};KO={find:h,articlize:function(){var f=1<=arguments.length?g.call(arguments,0):[];var m;var n=[];var a=0;for(m=f.length;a<m;a++){var d=f[a];null!=d&&n.push(h(d)+" "+d)}return 1===f.length?n[0]:n}}}).call(KO);var gda=KO,jc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");jc.format=Pa;jc.formatFromArray=xb;jc.indent=ec;jc.minIndent=sc;jc.changeIndent=oc;jc.quote=Bc;jc.articlize=ad;jc.findArticle=pd;jc.print=Db;jc.printNested=
Pd;jc.pad=Oe;jc.printTable=Cc;jc.printTree=bf;jc.toArray=cg;jc.lines=We;jc.paragraphs=Be;jc.nonEmptyLines=Ld;jc.tokens=Df;jc.tableize=Mf;jc.unescapeCharacterEntities=jf;jc.toQueryParams=vk;jc.base64EncodeUnicode=Vk;jc.base64DecodeUnicode=ji;jc.normalizePath=Kd;jc.joinPath=Uf;jc.newUUID=Uh;jc.createDataURI=vi;jc.hashCode=Rm;jc.md5=Ul;jc.reMatches=Me;jc.stringMatch=Ci;jc.peekRight=cf;jc.peekLeft=jg;jc.lineIndexComputer=Fh;jc.lineNumberToIndexesComputer=Wk;jc.lineRanges=vs;jc.findLineWithIndexInLineRanges=
ws;jc.regexIndexOf=Mp;jc.regexLastIndexOf=Ln;jc.diff=Mn;jc.empty=om;jc.startsWithVowel=Vl;jc.withDecimalPrecision=Np;jc.capitalize=xs;jc.camelCaseString=ys;jc.camelize=zs;jc.truncate=av;jc.truncateLeft=As;jc.regExpEscape=Nn;jc.succ=bv;jc.digitValue=cv;jc.longestCommonSubstring=dv;jc.applyChange=ev;jc.applyChanges=fv;jc.levenshtein=gv;jc.inspectObject=z;jc.min=nf;jc.last=Hc;jc.articles=gda;jc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};jc.pathDotRe=/\/\.\//g;jc.pathDoubleDotRe=/\/[^\/]+\/\.\./;jc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;jc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;jc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";jc.newUUIDRe=/[xy]/g;jc.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};jc.includes=jc.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};jc.include=jc.includes;jc.startsWith=jc.features.startsWith?
function(g,c){return g.startsWith(c)}:function(g,c){return 0===g.indexOf(c)};jc.endsWith=jc.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var h=g.length-c.length;return 0<=h&&g.lastIndexOf(c)===h};jc.times=jc.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var LO=jc.includes,MO=jc.include,NO=jc.startsWith,OO=jc.endsWith,PO=jc.times;jc.format=Pa;jc.format=Pa;jc.formatFromArray=xb;jc.formatFromArray=xb;jc.indent=ec;jc.indent=ec;
jc.minIndent=sc;jc.minIndent=sc;jc.changeIndent=oc;jc.changeIndent=oc;jc.quote=Bc;jc.quote=Bc;jc.articlize=ad;jc.articlize=ad;jc.findArticle=pd;jc.findArticle=pd;jc.print=Db;jc.print=Db;jc.printNested=Pd;jc.printNested=Pd;jc.pad=Oe;jc.pad=Oe;jc.printTable=Cc;jc.printTable=Cc;jc.printTree=bf;jc.printTree=bf;jc.toArray=cg;jc.toArray=cg;jc.lines=We;jc.lines=We;jc.paragraphs=Be;jc.paragraphs=Be;jc.nonEmptyLines=Ld;jc.nonEmptyLines=Ld;jc.tokens=Df;jc.tokens=Df;jc.tableize=Mf;jc.tableize=Mf;jc.unescapeCharacterEntities=
jf;jc.unescapeCharacterEntities=jf;jc.base64EncodeUnicode=Vk;jc.base64EncodeUnicode=Vk;jc.base64DecodeUnicode=ji;jc.base64DecodeUnicode=ji;jc.toQueryParams=vk;jc.toQueryParams=vk;jc.normalizePath=Kd;jc.normalizePath=Kd;jc.joinPath=Uf;jc.joinPath=Uf;jc.newUUID=Uh;jc.newUUID=Uh;jc.createDataURI=vi;jc.createDataURI=vi;jc.hashCode=Rm;jc.hashCode=Rm;jc.md5=Ul;jc.md5=Ul;jc.reMatches=Me;jc.reMatches=Me;jc.stringMatch=Ci;jc.stringMatch=Ci;jc.peekRight=cf;jc.peekRight=cf;jc.peekLeft=jg;jc.peekLeft=jg;jc.lineIndexComputer=
Fh;jc.lineIndexComputer=Fh;jc.lineNumberToIndexesComputer=Wk;jc.lineNumberToIndexesComputer=Wk;jc.findLineWithIndexInLineRanges=ws;jc.findLineWithIndexInLineRanges=ws;jc.regexIndexOf=Mp;jc.regexIndexOf=Mp;jc.regexLastIndexOf=Ln;jc.regexLastIndexOf=Ln;jc.lineRanges=vs;jc.lineRanges=vs;jc.diff=Mn;jc.diff=Mn;jc.empty=om;jc.empty=om;jc.includes=LO;jc.includes=LO;jc.include=MO;jc.include=MO;jc.startsWith=NO;jc.startsWith=NO;jc.startsWithVowel=Vl;jc.startsWithVowel=Vl;jc.endsWith=OO;jc.endsWith=OO;jc.withDecimalPrecision=
Np;jc.withDecimalPrecision=Np;jc.capitalize=xs;jc.capitalize=xs;jc.camelCaseString=ys;jc.camelCaseString=ys;jc.camelize=zs;jc.camelize=zs;jc.truncate=av;jc.truncate=av;jc.truncateLeft=As;jc.truncateLeft=As;jc.regExpEscape=Nn;jc.regExpEscape=Nn;jc.succ=bv;jc.succ=bv;jc.digitValue=cv;jc.digitValue=cv;jc.times=PO;jc.times=PO;jc.longestCommonSubstring=dv;jc.longestCommonSubstring=dv;jc.applyChange=ev;jc.applyChange=ev;jc.applyChanges=fv;jc.applyChanges=fv;jc.levenshtein=gv;jc.levenshtein=gv;var rg=Object.freeze({__proto__:null,
format:Pa,formatFromArray:xb,indent:ec,minIndent:sc,changeIndent:oc,quote:Bc,articlize:ad,findArticle:pd,print:Db,printNested:Pd,pad:Oe,printTable:Cc,printTree:bf,toArray:cg,lines:We,paragraphs:Be,nonEmptyLines:Ld,tokens:Df,tableize:Mf,unescapeCharacterEntities:jf,base64EncodeUnicode:Vk,base64DecodeUnicode:ji,toQueryParams:vk,normalizePath:Kd,joinPath:Uf,newUUID:Uh,createDataURI:vi,hashCode:Rm,md5:Ul,reMatches:Me,stringMatch:Ci,peekRight:cf,peekLeft:jg,lineIndexComputer:Fh,lineNumberToIndexesComputer:Wk,
findLineWithIndexInLineRanges:ws,regexIndexOf:Mp,regexLastIndexOf:Ln,lineRanges:vs,diff:Mn,empty:om,includes:LO,include:MO,startsWith:NO,startsWithVowel:Vl,endsWith:OO,withDecimalPrecision:Np,capitalize:xs,camelCaseString:ys,camelize:zs,truncate:av,truncateLeft:As,regExpEscape:Nn,succ:bv,digitValue:cv,times:PO,longestCommonSubstring:dv,applyChange:ev,applyChanges:fv,levenshtein:gv});za("s",rg);var qf=lively.FreezerRuntime.recorderFor("lively.lang/number.js");qf.random=hv;qf.randomSmallerInteger=iv;
qf.humanReadableByteSize=jv;qf.average=kv;qf.averageInc=lv;qf.median=mv;qf.between=nv;qf.clamp=ov;qf.sort=pv;qf.parseLength=qv;qf.precision=rv;qf.roundTo=sv;qf.detent=Bs;qf.toDegrees=Cs;qf.toRadians=Ds;qf.backoff=tv;qf.interpolate=uv;qf.normalRandom=function(g,c){var h,f=!1;return function(m,n){if(f)return f=!1,h*n+m;do{var a=2*Math.random()-1;var d=2*Math.random()-1;var k=a*a+d*d}while(1<=k||0==k);k=Math.sqrt(-2*Math.log(k)/k);h=d*k;f=!0;return m+n*a*k}}();qf.convertLength=function(){function g(c,
h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*g(1/96,"in");if("pt"===h)return c*g(1/72,"in");if("pc"===h)return c*g(12,"pt")}return function n(h,f,m){return f===m?h:"cm"===m?g(h,f):"cm"===f?h/g(1,m):n(n(h,f,"cm"),"cm",m)}}();var QO=qf.normalRandom,RO=qf.convertLength;qf.random=hv;qf.random=hv;qf.normalRandom=QO;qf.normalRandom=QO;qf.randomSmallerInteger=iv;qf.randomSmallerInteger=iv;qf.humanReadableByteSize=jv;qf.humanReadableByteSize=jv;qf.average=
kv;qf.average=kv;qf.averageInc=lv;qf.averageInc=lv;qf.median=mv;qf.median=mv;qf.between=nv;qf.between=nv;qf.sort=pv;qf.sort=pv;qf.parseLength=qv;qf.parseLength=qv;qf.convertLength=RO;qf.convertLength=RO;qf.roundTo=sv;qf.roundTo=sv;qf.detent=Bs;qf.detent=Bs;qf.toDegrees=Cs;qf.toDegrees=Cs;qf.toRadians=Ds;qf.toRadians=Ds;qf.backoff=tv;qf.backoff=tv;qf.interpolate=uv;qf.interpolate=uv;qf.clamp=ov;qf.clamp=ov;qf.precision=rv;qf.precision=rv;var Dj=Object.freeze({__proto__:null,random:hv,normalRandom:QO,
randomSmallerInteger:iv,humanReadableByteSize:jv,average:kv,averageInc:lv,median:mv,between:nv,sort:pv,parseLength:qv,convertLength:RO,roundTo:sv,detent:Bs,toDegrees:Cs,toRadians:Ds,backoff:tv,interpolate:uv,clamp:ov,precision:rv});za("ac",Dj);var li=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");li.all=Io;li.allOwnPropertiesOrFunctions=Op;li.own=Es;li.forEachOwn=Tq;li.nameFor=Fs;li.values=Pp;li.ownValues=vv;li.any=Uq;li.allProperties=Vq;li.hash=Qp;li.all=Io;li.all=Io;li.allOwnPropertiesOrFunctions=
Op;li.allOwnPropertiesOrFunctions=Op;li.own=Es;li.own=Es;li.forEachOwn=Tq;li.forEachOwn=Tq;li.nameFor=Fs;li.nameFor=Fs;li.values=Pp;li.values=Pp;li.ownValues=vv;li.ownValues=vv;li.any=Uq;li.any=Uq;li.allProperties=Vq;li.allProperties=Vq;li.hash=Qp;li.hash=Qp;var gm=Object.freeze({__proto__:null,all:Io,allOwnPropertiesOrFunctions:Op,own:Es,forEachOwn:Tq,nameFor:Fs,values:Pp,ownValues:vv,any:Uq,allProperties:Vq,hash:Qp});za("aw",gm);var Wl=lively.FreezerRuntime.recorderFor("lively.lang/date.js");Wl.format=
Gs;Wl.equals=Hs;Wl.relativeTo=Is;Wl.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,m=function(n,a){n=String(n);for(a=a||2;n.length<a;)n="0"+n;return n};return function(n,a,d){var k=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(a=n,n=void 0);
n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");a=String(k.masks[a]||a||k.masks.default);"UTC:"==a.slice(0,4)&&(a=a.slice(4),d=!0);var b=d?"getUTC":"get",e=n[b+"Date"](),l=n[b+"Day"](),p=n[b+"Month"](),q=n[b+"FullYear"](),u=n[b+"Hours"](),w=n[b+"Minutes"](),y=n[b+"Seconds"]();b=n[b+"Milliseconds"]();var A=d?0:n.getTimezoneOffset(),C={d:e,dd:m(e),ddd:k.i18n.dayNames[l],dddd:k.i18n.dayNames[l+7],m:p+1,mm:m(p+1),mmm:k.i18n.monthNames[p],mmmm:k.i18n.monthNames[p+12],yy:String(q).slice(2),
yyyy:q,h:u%12||12,hh:m(u%12||12),H:u,HH:m(u),M:w,MM:m(w),s:y,ss:m(y),l:m(b,3),L:m(99<b?Math.round(b/10):b),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:d?"UTC":(String(n).match(h)||[""]).pop().replace(f,""),o:(0<A?"-":"+")+m(100*Math.floor(Math.abs(A)/60)+Math.abs(A)%60,4),S:["th","st","nd","rd"][3<e%10?0:(10!=e%100-e%10)*e%10]};return a.replace(c,function(E){return E in C?C[E]:E.slice(1,E.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var SO=Wl.dateFormat;Wl.format=Gs;Wl.format=Gs;Wl.equals=Hs;Wl.equals=Hs;Wl.relativeTo=Is;Wl.relativeTo=Is;Wl.dateFormat=SO;Wl.dateFormat=SO;var op=Object.freeze({__proto__:null,format:Gs,equals:Hs,relativeTo:Is,dateFormat:SO});za("a1",op);var sf=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");sf.promise=Vf;sf.delay=dy;sf.delayReject=ey;sf.timeout=fy;sf.timeToRun=gy;sf.clearPendingWaitFors=function(){Object.kets(sf.waitForClosures).forEach(function(g){delete sf.waitForClosures[g];
clearInterval(g)})};sf.waitFor=Js;sf.deferred=hy;sf.convertCallbackFun=Ks;sf.convertCallbackFunWithManyArgs=iy;sf._chainResolveNext=jy;sf.chain=Ls;sf.promise_finally=ky;sf.parallel=ly;sf.newUUID=Uh;sf.pushIfNotIncluded=Za;sf.removeAt=rc;sf.waitForClosures={};Object.assign(sf.promise,{delay:sf.delay,delayReject:sf.delayReject,timeout:sf.timeout,waitFor:sf.waitFor,deferred:sf.deferred,convertCallbackFun:sf.convertCallbackFun,convertCallbackFunWithManyArgs:sf.convertCallbackFunWithManyArgs,chain:sf.chain,
finally:sf.promise_finally,parallel:sf.parallel});sf.promise=Vf;sf.promise=Vf;sf.delay=dy;sf.delay=dy;sf.delayReject=ey;sf.delayReject=ey;sf.timeout=fy;sf.timeout=fy;sf.timeToRun=gy;sf.timeToRun=gy;sf.waitFor=Js;sf.waitFor=Js;sf.deferred=hy;sf.deferred=hy;sf.convertCallbackFun=Ks;sf.convertCallbackFun=Ks;sf.convertCallbackFunWithManyArgs=iy;sf.convertCallbackFunWithManyArgs=iy;sf.chain=Ls;sf.chain=Ls;sf.finally=ky;sf.promise_finally=ky;sf.parallel=ly;sf.parallel=ly;sf.default=Vf;var pp=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
pp.Path=Ag;pp.inspect=z;Object.assign(pp.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return pp.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:pp.Path(g);var c=this.parts();g=g.parts();for(var h=0;h<c.length;h++)if(c[h]!=g[h])return!1;return!0},
relativePathTo:function(g){g=pp.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(g.hasOwnProperty(h))g=g[h];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,h){if(this.isRoot())return h(null,null);for(var f=0;f<this._parts.length-1;f++){var m=this._parts[f];if(!g.hasOwnProperty(m)||"object"!==typeof g[m]&&"function"!==
typeof g[m])if(c)g=g[m]={};else return h(null,m);else g=g[m]}return h(g,this._parts[this._parts.length-1])},set:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?f[m]=c:void 0})},defineProperty:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?Object.defineProperty(f,m,c):void 0})},get:function(g,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(f,m){return f?h._mapper?h._mapper(m,f[m]):f[m]:f},g)},concat:function(g,c){return pp.Path(this.parts().concat(pp.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+pp.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m="propertyWatcher$"+f,n=h&&h.hasOwnProperty(m),a=g.uninstall,d=g.haltWhenChanged,k=g.showStack,b=h.__lookupGetter__(f),e=h.__lookupSetter__(f);c&&f&&h&&(a?n&&(delete h[f],h[f]=h[m],delete h[m]):n||(b||e?console.log(h+'["'+f+'"] is a getter/setter, watching not support'):
(h[m]=h[f],h.__defineSetter__(f,function(l){var p=h[m];if(g.onSet)g.onSet(l,p);p=h+"."+f+" changed: "+p+" -> "+l;k&&(p+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(p);if(d)debugger;return h[m]=l}),h.__defineGetter__(f,function(){if(g.onGet)g.onGet(h[m]);return h[m]}),console.log("Watcher for "+h+"."+f+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=h&&f&&h[f],a=n&&n.isDebugFunctionWrapper;c&&f&&n&&h&&(g.uninstall?a&&(h[f]=h[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+f)):a?console.log("debugFunctionWrapper for "+h+"."+f+" already installed"):(g=h[f]=n.wrap(function(d){var k=Array.from(arguments);if(m)debugger;return k.shift().apply(h,k)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+f+" installed")))}});pp.default=Ag;var Oh=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
Oh.clone=Wq;Oh.without=Xq;Oh.hull=wv;Oh.subgraphReachableBy=xv;Oh.invert=yv;Oh.sortByReference=Ms;Oh.reduce=Ns;Oh.random=zv;Oh.range=xc;Oh.shuffle=Ae;Oh.withoutAll=Nc;Oh.flatten=sb;Oh.uniq=$a;Oh.values=ll;Oh.clone=Wq;Oh.clone=Wq;Oh.without=Xq;Oh.without=Xq;Oh.hull=wv;Oh.hull=wv;Oh.subgraphReachableBy=xv;Oh.subgraphReachableBy=xv;Oh.invert=yv;Oh.invert=yv;Oh.sortByReference=Ms;Oh.sortByReference=Ms;Oh.reduce=Ns;Oh.reduce=Ns;Oh.random=zv;Oh.random=zv;var xq=Object.freeze({__proto__:null,clone:Wq,without:Xq,
hull:wv,subgraphReachableBy:xv,invert:yv,sortByReference:Ms,reduce:Ns,random:zv}),Jg=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");Jg.isInterval=Os;Jg.sort=Ps;Jg.compare=Qs;Jg.coalesce=Av;Jg.coalesceOverlapping=Bv;Jg.mergeOverlapping=Rp;Jg.intervalsInRangeDo=Sp;Jg.intervalsInbetween=Jo;Jg.mapToMatchingIndexes=Yq;Jg.benchmark=function(){function g(c,h,f){return c.name+" "+Jg.timeToRunN(function(){return c.apply(null,h,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(Jg.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(Jg.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(Jg.mapToMatchingIndexes,[Jg.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};Jg.range=xc;Jg.timeToRunN=yd;Jg.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Jg.isInterval=Os;Jg.isInterval=Os;Jg.sort=Ps;Jg.sort=Ps;Jg.compare=Qs;Jg.compare=Qs;Jg.coalesce=Av;Jg.coalesce=
Av;Jg.coalesceOverlapping=Bv;Jg.coalesceOverlapping=Bv;Jg.mergeOverlapping=Rp;Jg.mergeOverlapping=Rp;Jg.intervalsInRangeDo=Sp;Jg.intervalsInRangeDo=Sp;Jg.intervalsInbetween=Jo;Jg.intervalsInbetween=Jo;Jg.mapToMatchingIndexes=Yq;Jg.mapToMatchingIndexes=Yq;var XG=Object.freeze({__proto__:null,isInterval:Os,sort:Ps,compare:Qs,coalesce:Av,coalesceOverlapping:Bv,mergeOverlapping:Rp,intervalsInRangeDo:Sp,intervalsInbetween:Jo,mapToMatchingIndexes:Yq}),ml=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
ml.create=Rs;ml.toArray=Ss;ml.originalToProjectedIndex=Ts;ml.projectedToOriginalIndex=Cv;ml.transformToIncludeIndex=Dv;ml.create=Rs;ml.create=Rs;ml.toArray=Ss;ml.toArray=Ss;ml.originalToProjectedIndex=Ts;ml.originalToProjectedIndex=Ts;ml.projectedToOriginalIndex=Cv;ml.projectedToOriginalIndex=Cv;ml.transformToIncludeIndex=Dv;ml.transformToIncludeIndex=Dv;var YG=Object.freeze({__proto__:null,create:Rs,toArray:Ss,originalToProjectedIndex:Ts,projectedToOriginalIndex:Cv,transformToIncludeIndex:Dv}),kg=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");kg.get=Ev;kg.set=Fv;kg.getRow=Zq;kg.setRow=Us;kg.getCol=$q;kg.setCol=Vs;kg.create=Gv;kg.mapCreate=Ws;kg.forEach=Xs;kg.map=ar;kg.toObjects=Ys;kg.tableFromObjects=Hv;kg.benchmark=function(){var g=[],c=kg.create(1E3,200,1);var h=kg.timeToRunN(function(){kg.forEach(c,function(m){})},10);g.push("forEach: "+h.toFixed(2)+"ms");h=kg.timeToRunN(function(){kg.map(c,function(m,n,a){return n+a+Math.round(100*Math.random())})},10);g.push("map: "+h.toFixed(2)+
"ms");var f=kg.create(1E3,2E3);h=kg.timeToRunN(function(){f=Array(1E3);for(var m=0;1E3>m;m++)f[m]=Array(2E3);kg.forEach(c,function(n,a,d){f[a][d]=a+d+Math.round(100*Math.random())})},10);g.push("map with forEach: "+h+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};kg.arrayWithN=od;kg.timeToRunN=yd;kg.get=Ev;kg.get=Ev;kg.set=Fv;kg.set=Fv;kg.getRow=Zq;kg.getRow=Zq;kg.setRow=Us;kg.setRow=Us;kg.getCol=$q;kg.getCol=$q;kg.setCol=Vs;kg.setCol=
Vs;kg.create=Gv;kg.create=Gv;kg.mapCreate=Ws;kg.mapCreate=Ws;kg.forEach=Xs;kg.forEach=Xs;kg.map=ar;kg.map=ar;kg.toObjects=Ys;kg.toObjects=Ys;kg.tableFromObjects=Hv;kg.tableFromObjects=Hv;var hx=Object.freeze({__proto__:null,get:Ev,set:Fv,getRow:Zq,setRow:Us,getCol:$q,setCol:Vs,create:Gv,mapCreate:Ws,forEach:Xs,map:ar,toObjects:Ys,tableFromObjects:Hv}),Si=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Si.prewalk=Zs;Si.postwalk=br;Si.find=$s;Si.filter=at;Si.map=bt;Si.mapTree=On;Si.flatten=
sb;Si.detect=Si.find;var TO=Si.detect;Si.prewalk=Zs;Si.prewalk=Zs;Si.postwalk=br;Si.postwalk=br;Si.find=$s;Si.find=$s;Si.detect=TO;Si.detect=TO;Si.filter=at;Si.filter=at;Si.map=bt;Si.map=bt;Si.mapTree=On;Si.mapTree=On;var yq=Object.freeze({__proto__:null,prewalk:Zs,postwalk:br,find:$s,detect:TO,filter:at,map:bt,mapTree:On});za("a0",yq);var qp=lively.FreezerRuntime.recorderFor("lively.lang/events.js");qp.isNode="undefined"!==typeof qp.process&&qp.process.versions&&qp.process.versions.node;qp.makeEmitter=
qp.isNode?function(g,c){if(g.on&&g.removeListener)return g;var h="undefined"!==typeof System?System._nodeRequire("events"):qp.require("events");Object.assign(g,h.EventEmitter.prototype);h.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,h){h&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(h))};g.once=function(c,h){function f(){g.removeListener(c,f);h.apply(this,arguments)}
if(h)g.on(c,f)};g.removeListener=function(c,h){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(f){return f!==h}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=g.listeners[h])&&h.length&&h.forEach(function(f){try{f.apply(null,c)}catch(m){console.error("Error in event handler: %s",m.stack||String(m))}})};return g};var Wv=qp.makeEmitter;qp.makeEmitter=Wv;qp.makeEmitter=Wv;var lu=Object.freeze({__proto__:null,
makeEmitter:Wv}),rj=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");rj.create=ct;rj.remove=gb;rj.pluck=Cb;rj.makeEmitter=Wv;rj.newUUID=Uh;rj.OFFLINE="offline";rj.ONLINE="online";rj.CONNECTING="connecting";rj.create=ct;rj.create=ct;var ZG=Object.freeze({__proto__:null,create:ct}),lg=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");lg.fork=Iv;lg.create=Ko;lg.makeEmitter=Wv;lg.newUUID=Uh;lg.waitFor=Wd;lg.messengerCreate=ct;lg.Closure=ci;lg.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;lg.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=
function(){for(var f=arguments[0],m=1;m<arguments.length;m++)f=f.replace("%s",arguments[m]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(g){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,h,f){try{var m=eval("("+c+")")}catch(d){f(Error("Cannot create function from string: "+d.stack||d));return}c=m.length===h.length+1;var n=lively.lang.fun.once(function(d,k){remoteWorker.isBusy=!1;f(d,k)});remoteWorker.isBusy=!0;c&&h.push(n);try{var a=m.apply(remoteWorker,h.concat([n]))}catch(d){n(d,null);return}c||n(null,a)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,f=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(f,
c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var f=eval(c.data.expr)}catch(m){f=m.stack||m}h.answer(c,{result:String(f)})},run:function(c,h){var f=c.data.func,m=c.data.args;f?remoteWorker.callStringifiedFunction(f,m,function(n,a){h.answer(c,{error:n?String(n):null,result:a})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};lg.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[lg.WorkerSetup.initBrowserGlobals,lg.WorkerSetup.loadDependenciesBrowser,lg.WorkerSetup.initOnMessageHandler,lg.WorkerSetup.initWorkerInterface,
lg.WorkerSetup.initWorkerMessenger].join("\n"));c="("+lg.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var f=new Blob([h],{type:"text/javascript"})}catch(m){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(h),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));(function(h,f){lg.makeEmitter(f);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var m=Object.keys(h).reduce(function(n,a){"function"!==typeof h[a]&&(n[a]=h[a]);return n},{});f.onmessage=function(n){void 0!==n.data.workerReady?(f.ready=!!n.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",n.data)};f.errors=[];f.onerror=function(n){console.error(n);f.errors.push(n);f.emit("error",n)};f.postMessage({action:"setup",options:m})})(g,c);return c}};lg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,h=lg.makeEmitter({ready:!1,
errors:[],postMessage:function(f){c?h.ready?c.send(f):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});lg.NodejsWorker.startWorker(g,function(f,m){f?(h.ready=!1,h.emit("error",f)):(c=m,c.on("message",function(n){lg.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,h){var f=require("path"),m=require("os"),n=require("fs");m=f.join(m.tmpDir(),"lively-nodejs-workers/");var a=f.join(m,"nodejs-worker-init.js");lg.NodejsWorker.initCodeFileCreated?n.exists(a,function(d){d?h(null,a):lg.NodejsWorker.createWorkerCodeFile(g,a,c,h)}):lg.NodejsWorker.createWorkerCodeFile(g,a,c,h)},createWorkerCodeFile:function(g,c,h,f){g=require("path");var m=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(c),
function(a,d,k){a?f(Error(["[WORKER PARENT] Could not create worker temp dir:",d,k].join("\n"))):m.writeFile(c,h,function(b){lg.NodejsWorker.debug&&console.log("worker code file %s created",c);lg.NodejsWorker.initCodeFileCreated=!0;f(b,c)})})},startWorker:function(g,c){var h=require("util"),f=require("child_process").fork,m=String(lg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[lg.WorkerSetup.loadDependenciesNodejs,lg.WorkerSetup.initOnMessageHandler,lg.WorkerSetup.initWorkerInterface,
lg.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",m);lg.NodejsWorker.ensureInitCodeFile(g,h,function(n,a){if(n)return c(n);var d=f(a,{});lg.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(k){"pong"===k.action?console.log("[WORKER pong] ",k):"log"===k.action&&console.log("[Message from WORKER] ",k.data)});d.once("message",function(k){lg.NodejsWorker.debug&&console.log("worker setup done");c(null,d,k)});d.on("close",function(){lg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:g}});global.WORKER=d})}};lg.fork=Iv;lg.fork=Iv;lg.create=Ko;lg.create=Ko;var $G=Object.freeze({__proto__:null,fork:Iv,create:Ko}),bd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");bd.createLivelyLangObject=function(){return{chain:bd.chain,noConflict:bd.noConflict,installGlobals:bd.installGlobals,uninstallGlobals:bd.uninstallGlobals,globalInterfaceSpec:bd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};bd.globalInstall=Sm;bd.chain=
pm;bd.createChain=function(g,c){return Object.keys(g).reduce(function(h,f){h[f]=function(){var m=Array.prototype.slice.call(arguments);m=g[f].apply(null,[c].concat(m));return bd.chain(m)};return h},{value:function(){return c}})};bd.noConflict=dt;bd.installGlobals=et;bd.installProperty=function(g,c){if(!g.isIn(bd.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(bd.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var h=
g;g=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return h.apply(null,f)};g.toString=function(){return h.toString()}}c.set(bd.GLOBAL,g,!0)};bd.uninstallGlobals=Jv;bd.string=rg;bd.num=Dj;bd.fun=Qj;bd.Closure=ci;bd.arr=Ke;bd.obj=df;bd.properties=gm;bd.date=op;bd.promise=Vf;bd.Path=Ag;bd.graph=xq;bd.interval=XG;bd.arrayProjection=YG;bd.Group=bl;bd.grid=hx;bd.tree=yq;bd.events=lu;bd.messenger=ZG;bd.worker=$G;bd.worker=$G;bd.worker=$G;bd.messenger=ZG;bd.messenger=ZG;bd.events=
lu;bd.events=lu;bd.tree=yq;bd.tree=yq;bd.grid=hx;bd.grid=hx;bd.arrayProjection=YG;bd.arrayProjection=YG;bd.interval=XG;bd.interval=XG;bd.graph=xq;bd.graph=xq;bd.date=op;bd.date=op;bd.properties=gm;bd.properties=gm;bd.obj=df;bd.obj=df;bd.arr=Ke;bd.arr=Ke;bd.fun=Qj;bd.fun=Qj;bd.num=Dj;bd.num=Dj;bd.string=rg;bd.string=rg;bd.Closure=ci;bd.Closure=ci;bd.promise=Vf;bd.promise=Vf;bd.Path=Ag;bd.Path=Ag;bd.Group=bl;bd.Group=bl;bd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;bd.isNode="undefined"!==typeof bd.process&&bd.process.env&&"function"===typeof bd.process.exit;bd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var aH=bd.createLivelyLangObject();bd.livelyLang=aH;bd.livelyLang=aH;bd.livelyLang=aH;bd.globalInstall=
Sm;bd.globalInstall=Sm;bd.chain=pm;bd.chain=pm;bd.noConflict=dt;bd.noConflict=dt;bd.installGlobals=et;bd.installGlobals=et;bd.uninstallGlobals=Jv;bd.uninstallGlobals=Jv;var H0=Object.freeze({__proto__:null,worker:$G,messenger:ZG,events:lu,tree:yq,grid:hx,arrayProjection:YG,interval:XG,graph:xq,date:op,properties:gm,obj:df,arr:Ke,fun:Qj,num:Dj,string:rg,Closure:ci,promise:Vf,Path:Ag,Group:bl,livelyLang:aH,globalInstall:Sm,chain:pm,noConflict:dt,installGlobals:et,uninstallGlobals:Jv}),vf=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
vf.davNs=function(g){return(g=g.match(/\/([a-z]+?):multistatus/i))?g[1]:"d"};vf.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};vf.readPropertyNode=function(g,c){c=void 0===c?{}:c;var h=g.tagName.replace(/[^:]+:/,"");
h=vf.propertyNodeMap[h];g=g.textContent;switch(h){case "lastModified":case "created":g=new Date(g);break;case "size":g=Number(g)}c[h]=g;return c};vf.readXMLPropfindResult=function(g){var c=(new vf.DOMParser).parseFromString(g,"text/xml");g=vf.davNs(g);c=(new vf.XPathQuery("/"+g+":multistatus/"+g+":response")).findAll(c.documentElement);var h=new vf.XPathQuery(g+":href"),f=new vf.XPathQuery(g+":propstat/"+g+":prop");return c.map(function(m){var n=f.findFirst(m);n=Array.from(n.childNodes).reduce(function(a,
d){return vf.readPropertyNode(d,a)},{});m=h.findFirst(m);n.url=m.textContent||m.text;return n})};vf.defaultOrigin=function(){return System.baseURL||document.location.origin};vf.makeRequest=function(g,c,h,f,m){f=void 0===f?{}:f;m=g.url;var n=g.useCors,a=g.useProxy,d=g.headers;n="undefined"!==typeof n?n:!0;c={method:void 0===c?"GET":c};if("undefined"!==typeof a?a:1)Object.assign(f,{"cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||vf.defaultOrigin();n&&(c.mode="cors");h&&(c.body=
h);c.redirect="follow";c.headers=Object.assign({},f,{},d);return fetch(m,c)};vf.upload=ft;vf.Resource=zf;vf.applyExclude=Pb;vf.promise=Vf;vf.num=Dj;var nA=function(g){this.expression=g;this.contextNode=null;this.xpe=new vf.XPathEvaluator};nA.prototype.establishContext=function(g){this.nsResolver||(g=g.ownerDocument?g.ownerDocument.documentElement:g.documentElement,g!==this.contextNode&&(this.contextNode=g,this.nsResolver=this.xpe.createNSResolver(g)))};nA.prototype.manualNSLookup=function(){this.nsResolver=
function(g){return vf.Namespace[g.toUpperCase()]||null};return this};nA.prototype.findAll=function(g,c){this.establishContext(g);g=this.xpe.evaluate(this.expression,g,this.nsResolver,vf.XPathResult.ANY_TYPE,null);for(var h=[],f;f=g.iterateNext();)h.push(f);return 0<h.length||void 0===c?h:c};nA.prototype.findFirst=function(g){this.establishContext(g);return this.xpe.evaluate(this.expression,g,this.nsResolver,vf.XPathResult.ANY_TYPE,null).iterateNext()};vf.XPathQuery=nA;vf.propertyNodeMap={getlastmodified:"lastModified",
creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};vf.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
vf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof vf.process;vf.upload=ft;vf.upload=ft;var Rj=function(g,c){c=void 0===c?{}:c;g=vf.Resource.call(this,g,c)||this;g.onLoad=c.onLoad||function(){};g.onProgress=c.onProgress||function(){};g.useProxy=c.hasOwnProperty("useProxy")?c.useProxy:!1;g.proxyDomain=c.proxyDomain||void 0;g.useCors=c.hasOwnProperty("useCors")?c.useCors:!1;g.headers=c.headers||{};g.binary=g.isFile()?vf.binaryExtensions.includes(g.ext()):
!1;g.errorOnHTTPStatusCodes=c.hasOwnProperty("errorOnHTTPStatusCodes")?c.errorOnHTTPStatusCodes:!0;return g};$jscomp.inherits(Rj,vf.Resource);Rj.prototype.join=function(g){return Object.assign(vf.Resource.prototype.join.call(this,g),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Rj.prototype.makeProxied=function(g){void 0!==g&&(this.proxyDomain=g);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Rj.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Rj.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(vf.makeRequest(g),2);c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot read "+g.url+": "+c.statusText+" "+c.status);if(!g.binary)return h.return(c.text());if("blob"===g.binary)return h.return(c.blob());if("function"===
typeof c.arrayBuffer)return h.return(c.arrayBuffer());if("function"===typeof c.buffer)return h.return(c.buffer());throw Error("Don't now how to read binary resource "+g+"'");})};Rj.prototype.write=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){if(!c.isFile())throw Error("Cannot write a non-file: "+c.url);return f.yield(vf.upload(c,g),2)}h=f.yieldResult;if(!vf.num.between(h.status,200,300)&&c.errorOnHTTPStatusCodes)throw Error("Cannot write "+
c.url+": "+h.statusText+" "+h.status);return f.return(c)})};Rj.prototype.mkdir=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.url);return h.yield(vf.makeRequest(g,"MKCOL"),2)}c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+g.url+": "+c.statusText+" "+c.status);return h.return(g)})};Rj.prototype.exists=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==
h.nextAddress)return g.isRoot()?(c=!0,h.jumpTo(2)):h.yield(vf.makeRequest(g,"HEAD"),3);2!=h.nextAddress&&(c=!!h.yieldResult.ok);return h.return(c)})};Rj.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(vf.makeRequest(g,"DELETE"),2):c.return(g)})};Rj.prototype._propfind=function(){var g=this,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(vf.makeRequest(g,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=m.nextAddress){c=m.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+g.url+": "+c.statusText);return m.yield(c.text(),3)}h=m.yieldResult;f=g.root();return m.return(vf.readXMLPropfindResult(h).map(function(n){return f.join(n.url).assignProperties(n)}))})};Rj.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if("number"!==
typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);return 1===g?k.yield(h._propfind(),5):k.yield(h.dirList(1,c),4)}if(5!=k.nextAddress)return n=k.yieldResult,a=n.filter(function(b){return b.isDirectory()}),k.return(Promise.all(a.map(function(b){return b.dirList("number"===typeof g?g-1:g,c)})).then(function(b){return b.reduce(function(e,l){return e.concat(l)},n)}));d=k.yieldResult;d.shift();m&&(d=vf.applyExclude(m,d));return k.return(d)})};
Rj.prototype.readProperties=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c._propfind(),2);h=f.yieldResult[0];return f.return(c.assignProperties(h))})};Rj.prototype.post=function(g){g=void 0===g?null:g;var c=this,h,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return"string"!==typeof g&&(g=JSON.stringify(g)),n.yield(vf.makeRequest(c,"POST",g,{}),2);case 2:return h=n.yieldResult,
n.setCatchFinallyBlocks(3),n.yield(h.text(),5);case 5:f=n.yieldResult;n.leaveTryBlock(4);break;case 3:n.enterCatchBlock();case 4:if(f&&"application/json"===h.headers.get("content-type"))try{m=JSON.parse(f)}catch(a){}if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Error in POST "+c.url+": "+(f||h.statusText));return n.return(m||f)}})};Rj.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(h.isFile()&&(f=g.isFile()?g:g.join(h.name()),
vf.isNode)){if(f.isHTTPResource)return m.return(h._copyTo_file_nodejs_http(f,c));if(f.isNodeJSFileResource)return m.return(h._copyTo_file_nodejs_fs(f,c))}return m.return(vf.Resource.prototype.copyTo.call(h,g,c))})};Rj.prototype._copyFrom_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c?a.yield(h.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return m=g._createReadStream(),m.on("error",
function(d){return f=d}),a.yield(vf.makeRequest(h,"PUT",m),4);n=a.yieldResult;if(f)throw f;if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+n.statusText+" "+n.status);return a.return(h)})};Rj.prototype._copyTo_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return c?n.yield(g.parent().ensureExistance(),2):n.jumpTo(2);if(4!=n.nextAddress)return n.yield(vf.makeRequest(h,"GET"),4);f=
n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.return(new Promise(function(a,d){return f.body.pipe(g._createWriteStream()).on("error",function(k){return m=k}).on("finish",function(){return m?d(m):a(h)})}))})};Rj.prototype._copyTo_file_nodejs_http=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:if(!c){n.jumpTo(2);break}return n.yield(g.parent().ensureExistance(),
2);case 2:return n.yield(vf.makeRequest(h,"GET"),4);case 4:f=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.yield(vf.makeRequest(g,"PUT",f.body),5);case 5:m=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+m.statusText+" "+m.status);n.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Rj.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});vf.WebDAVResource=
Rj;var bH={name:"http-webdav-resource",matches:function(g){return g.startsWith("http:")||g.startsWith("https:")},resourceClass:vf.WebDAVResource};vf.resourceExtension=bH;vf.resourceExtension=bH;vf.resourceExtension=bH;vf.default=Rj;var ko=System.get("@system-env").node?require("fs"):{},hda=ko.readFile,ida=ko.writeFile,jda=ko.exists,kda=ko.readdir,lda=ko.mkdir,mda=ko.rmdir,nda=ko.unlink,oda=ko.lstat,pda=ko.rename,qda=ko.createWriteStream,rda=ko.createReadStream,Te=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
Te.wrapInPromise=function(g){return function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return new Promise(function(m,n){return g.apply(null,h.concat(function(a,d){return a?n(a):m(d)}))})}};Te.Resource=zf;Te.applyExclude=Pb;Te.windowsURLPrefixRe=UG;Te.windowsRootPathRe=WG;Te.createWriteStream=qda;Te.createReadStream=rda;Te.readFile=hda;Te.writeFile=ida;Te.exists=jda;Te.mkdir=lda;Te.rmdir=mda;Te.unlink=nda;Te.readdir=kda;Te.lstat=oda;Te.rename=pda;Te.readFileP=Te.wrapInPromise(Te.readFile);
Te.writeFileP=Te.wrapInPromise(Te.writeFile);Te.existsP=function(g){return new Promise(function(c,h){return Te.exists(g,function(f){return c(!!f)})})};Te.readdirP=Te.wrapInPromise(Te.readdir);Te.mkdirP=Te.wrapInPromise(Te.mkdir);Te.rmdirP=Te.wrapInPromise(Te.rmdir);Te.unlinkP=Te.wrapInPromise(Te.unlink);Te.lstatP=Te.wrapInPromise(Te.lstat);Te.renameP=Te.wrapInPromise(Te.rename);var Lk=function(){return Te.Resource.apply(this,arguments)||this};$jscomp.inherits(Lk,Te.Resource);Lk.prototype.path=function(){return this.url.replace("file://",
"")};Lk.prototype.stat=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(Te.lstatP(g.path()))})};Lk.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){c=Te.readFileP(g.path());return h.return(g.binary?c:c.then(String))})};Lk.prototype.write=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(c.isDirectory())throw Error("Cannot write into a directory: "+
c.path());return h.yield(Te.writeFileP(c.path(),g),2)}return h.return(c)})};Lk.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.path());return c.yield(Te.mkdirP(g.path()),2)}return c.return(g)})};Lk.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(g.isRoot()?!0:Te.existsP(g.path()))})};Lk.prototype.dirList=
function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if("number"!==typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);if(1!==g){w.jumpTo(2);break}n=[];a=$jscomp;d=a.makeIterator;return w.yield(Te.readdirP(h.path()),3);case 3:k=d.call(a,w.yieldResult),b=k.next();case 4:if(b.done){w.jumpTo(6);break}e=b.value;l=h.join(e);
return w.yield(l.stat(),7);case 7:p=w.yieldResult;l=p.isDirectory()?l.asDirectory():l;l._assignPropsFromStat(p);n.push(l);b=k.next();w.jumpTo(4);break;case 6:return m&&(n=Te.applyExclude(m,n)),w.return(n);case 2:return w.yield(h.dirList(1,c),8);case 8:return q=w.yieldResult,u=q.filter(function(y){return y.isDirectory()}),w.return(Promise.all(u.map(function(y){return y.dirList("number"===typeof g?g-1:g,c)})).then(function(y){return y.reduce(function(A,C){return A.concat(C)},q)}))}})};Lk.prototype.isEmptyDirectory=
function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(g.dirList(),2):c.return(0===c.yieldResult.length)})};Lk.prototype.rename=function(g){var c=this,h,f,m,n,a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(!(g instanceof c.constructor))return w.return(Te.Resource.prototype.rename.call(c,g));if(c.isFile()){g=g.asFile();Te.renameP(c.path(),g.path());w.jumpTo(2);break}g=g.asDirectory();
return w.yield(g.ensureExistance(),3);case 3:return h=[],f=[],m=$jscomp,n=m.makeIterator,w.yield(c.dirList("infinity"),4);case 4:a=n.call(m,w.yieldResult);for(d=a.next();!d.done;d=a.next())k=d.value,k.isDirectory()?f.push(k):h.push(k);b=$jscomp.makeIterator(f);e=b.next();case 5:if(e.done){w.jumpTo(7);break}l=e.value;return w.yield(g.join(l.relativePathFrom(c)).ensureExistance(),6);case 6:e=b.next();w.jumpTo(5);break;case 7:p=$jscomp.makeIterator(h),q=p.next();case 9:if(q.done)return w.yield(c.remove(),
2);u=q.value;return w.yield(u.rename(g.join(u.relativePathFrom(c))),10);case 10:q=p.next();w.jumpTo(9);break;case 2:return w.return(g)}})};Lk.prototype.remove=function(){var g=this,c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(g.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return g.isDirectory()?(c=$jscomp,h=c.makeIterator,a.yield(g.dirList(),7)):a.yield(Te.unlinkP(g.path()),3);case 7:f=h.call(c,a.yieldResult),m=f.next();
case 8:if(m.done)return a.yield(Te.rmdirP(g.path()),3);n=m.value;return a.yield(n.remove(),9);case 9:m=f.next();a.jumpTo(8);break;case 3:return a.return(g)}})};Lk.prototype.readProperties=function(){var g=this,c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=g,h=c._assignPropsFromStat,f.yield(g.stat(),2)):f.return(h.call(c,f.yieldResult))})};Lk.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return h.isFile()&&
(f=g.isFile()?g:g.join(h.name()),f.isHTTPResource)?m.return(f._copyFrom_file_nodejs_fs(h,c=!0)):m.return(Te.Resource.prototype.copyTo.call(h,g,c))})};Lk.prototype._assignPropsFromStat=function(g){return this.assignProperties({lastModified:g.mtime,created:g.ctime,size:g.size,type:g.isDirectory()?"directory":"file",isLink:g.isSymbolicLink()})};Lk.prototype._createWriteStream=function(){return Te.createWriteStream(this.path())};Lk.prototype._createReadStream=function(){return Te.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(Lk.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Te.NodeJSFileResource=Lk;var oA=function(g,c){"file:///"!==g.slice(0,8)&&"file://"===g.slice(0,7)&&(g="file:///"+g.slice(7));g.includes("\\")&&(g=g.replace(/\\/g,"/"));return Te.NodeJSFileResource.call(this,g,c)||this};$jscomp.inherits(oA,Te.NodeJSFileResource);oA.prototype.path=function(){return this.url.replace("file:///","")};oA.prototype.isRoot=function(){return!!this.path().match(Te.windowsRootPathRe)};
oA.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var g=this.url.match(Te.windowsURLPrefixRe);if(g)return this.newResource(g[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};Te.NodeJSWindowsFileResource=oA;var cH={name:"nodejs-file-resource",matches:function(g){return g.startsWith("file:")},resourceClass:"undefined"!==typeof Te.process&&"win32"===Te.process.platform?Te.NodeJSWindowsFileResource:Te.NodeJSFileResource};Te.resourceExtension=
cH;Te.resourceExtension=cH;Te.resourceExtension=cH;var dj=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");dj.applyExclude=function(g,c){return c?"string"===typeof c?!g.url.includes(c):"function"===typeof c?!c(g):c instanceof RegExp?!c.test(g.url):!0:!0};dj.Resource=zf;dj.createFiles=Gd;dj.debug=!1;dj.slashRe=/\//g;var rn=function(g,c){c=void 0===c?{}:c;if(!g||"string"!==typeof g)throw Error("LocalResourceInMemoryBackend needs name!");this.name=g;this._filespec=c};rn.removeHost=
function(g){delete this.hosts[g]};rn.ensure=function(g,c){var h=this;c=void 0===c?{}:c;var f=this.named(c.host);return Promise.resolve().then(function(){return g?dj.createFiles("local://"+f.name,g):null}).then(function(){return h})};rn.named=function(g){g||(g="default");return this.hosts[g]||(this.hosts[g]=new this(g))};rn.prototype.get=function(g){return this._filespec[g]};rn.prototype.set=function(g,c){this._filespec[g]=c};rn.prototype.write=function(g,c){var h=this._filespec[g];h||(h=this._filespec[g]=
{created:new Date});h.content=c;h.isDirectory=!1;h.lastModified=new Date};rn.prototype.read=function(g){return(g=this._filespec[g])&&g.content?g.content:""};rn.prototype.mkdir=function(g){var c=this._filespec[g];c&&c.isDirectory||(c||(c=this._filespec[g]={created:new Date}),c.content&&delete c.content,c.isDirectory=!0,c.lastModified=new Date)};rn.prototype.partialFilespec=function(g,c){g=void 0===g?"/":g;c=void 0===c?Infinity:c;for(var h={},f=this.filespec,m=Object.keys(f),n=0;n<m.length;n++){var a=
m[n];if(a.startsWith(g)&&g!==a){var d=a.slice(g.length);(d.includes("/")?d.match(dj.slashRe).length+1:1)>c||(h[a]=f[a])}}return h};$jscomp.global.Object.defineProperties(rn.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(g){this._filespec=g}}});$jscomp.global.Object.defineProperties(rn,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});dj.LocalResourceInMemoryBackend=rn;var lo=function(){return dj.Resource.apply(this,
arguments)||this};$jscomp.inherits(lo,dj.Resource);lo.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};lo.prototype.write=function(g){dj.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var c=this.localBackend.get(this.path());if(c&&c.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),g);return Promise.resolve(this)};
lo.prototype.mkdir=function(){dj.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var g=this.localBackend.get(this.path());if(g&&g.isDirectory)return Promise.resolve(this);if(g&&!g.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};lo.prototype.exists=function(){dj.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};lo.prototype.remove=function(){var g=this;dj.debug&&console.log("["+this+"] remove");var c=this.path();Object.keys(this.localBackend.filespec).forEach(function(h){return h.startsWith(c)&&delete g.localBackend.filespec[h]});return Promise.resolve(this)};lo.prototype.readProperties=function(){dj.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};lo.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;dj.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(g,c);c=c.exclude;var h=this.path(),f=[],m=Object.keys(this.localBackend.filespec);"infinity"===g&&(g=Infinity);for(var n={},a=0;a<m.length;n={$jscomp$loop$prop$dirToChild$2672:n.$jscomp$loop$prop$dirToChild$2672},a++){var d=m[a];d.startsWith(h)&&h!==d&&(d=d.slice(h.length),(d.includes("/")?d.match(dj.slashRe).length+1:1)>g?(n.$jscomp$loop$prop$dirToChild$2672=this.join(d.split("/").slice(0,g).join("/")+"/"),
f.some(function(k){return function(b){return b.equals(k.$jscomp$loop$prop$dirToChild$2672)}}(n))||f.push(n.$jscomp$loop$prop$dirToChild$2672)):(d=this.join(d),c&&!dj.applyExclude(d,c)||f.push(d)))}return Promise.resolve(f)};$jscomp.global.Object.defineProperties(lo.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return dj.LocalResourceInMemoryBackend.named(this.host())}}});dj.LocalResource=lo;var dH={name:"local-resource",matches:function(g){return g.startsWith("local:")},resourceClass:dj.LocalResource};
dj.resourceExtension=dH;dj.resourceExtension=dH;dj.resourceExtension=dH;dj.default=lo;var Bg=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Bg.createFileSpec=Kv;Bg.importModuleViaNative=gt;Bg.loadViaScript=Tp;Bg.ensureFetch=cr;Bg.default=zf;Bg.Resource=zf;Bg.unregisterExtension=Zd;Bg.registerExtension=Hd;Bg.parseQuery=tb;Bg.extensions=ku;Bg.createFiles=Gd;Bg.resource=Dc;Bg.httpResourceExtension=bH;Bg.fileResourceExtension=cH;Bg.localResourceExtension=dH;Bg.newUUID=Uh;Bg.waitFor=Js;
Bg.registerExtension(Bg.localResourceExtension);Bg.registerExtension(Bg.httpResourceExtension);Bg.registerExtension(Bg.fileResourceExtension);Bg.createFileSpec=Kv;Bg.createFileSpec=Kv;Bg.importModuleViaNative=gt;Bg.importModuleViaNative=gt;Bg.loadViaScript=Tp;Bg.loadViaScript=Tp;Bg.ensureFetch=cr;Bg.ensureFetch=cr;Bg.registerExtension=Hd;Bg.registerExtension=Hd;Bg.unregisterExtension=Zd;Bg.unregisterExtension=Zd;Bg.parseQuery=tb;Bg.parseQuery=tb;Bg.extensions=ku;Bg.extensions=ku;Bg.createFiles=Gd;
Bg.createFiles=Gd;Bg.resource=Dc;Bg.resource=Dc;var sda=Object.freeze({__proto__:null,Resource:zf,createFileSpec:Kv,importModuleViaNative:gt,loadViaScript:Tp,ensureFetch:cr,registerExtension:Hd,unregisterExtension:Zd,parseQuery:tb,extensions:ku,createFiles:Gd,resource:Dc}),I0=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Jd=function(){};Jd.prototype.accept=function(g,c,h){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,h);case "SourceLocation":return this.visitSourceLocation(g,c,h);case "Position":return this.visitPosition(g,c,h);case "Program":return this.visitProgram(g,c,h);case "Function":return this.visitFunction(g,c,h);case "Statement":return this.visitStatement(g,c,h);case "Directive":return this.visitDirective(g,c,h);case "SwitchCase":return this.visitSwitchCase(g,c,h);case "CatchClause":return this.visitCatchClause(g,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,h);case "Expression":return this.visitExpression(g,c,h);case "Property":return this.visitProperty(g,c,h);case "Pattern":return this.visitPattern(g,c,h);case "Super":return this.visitSuper(g,c,h);case "SpreadElement":return this.visitSpreadElement(g,c,h);case "TemplateElement":return this.visitTemplateElement(g,c,h);case "Class":return this.visitClass(g,c,h);case "ClassBody":return this.visitClassBody(g,c,h);case "MethodDefinition":return this.visitMethodDefinition(g,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(g,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,h);case "JSXAttribute":return this.visitJSXAttribute(g,c,h);case "JSXText":return this.visitJSXText(g,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,c,h);case "Identifier":return this.visitIdentifier(g,c,h);case "Literal":return this.visitLiteral(g,c,h);case "ExpressionStatement":return this.visitExpressionStatement(g,c,h);case "BlockStatement":return this.visitBlockStatement(g,c,h);case "EmptyStatement":return this.visitEmptyStatement(g,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,h);
case "WithStatement":return this.visitWithStatement(g,c,h);case "ReturnStatement":return this.visitReturnStatement(g,c,h);case "LabeledStatement":return this.visitLabeledStatement(g,c,h);case "BreakStatement":return this.visitBreakStatement(g,c,h);case "ContinueStatement":return this.visitContinueStatement(g,c,h);case "IfStatement":return this.visitIfStatement(g,c,h);case "SwitchStatement":return this.visitSwitchStatement(g,c,h);case "ThrowStatement":return this.visitThrowStatement(g,c,h);case "TryStatement":return this.visitTryStatement(g,
c,h);case "WhileStatement":return this.visitWhileStatement(g,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,h);case "ForStatement":return this.visitForStatement(g,c,h);case "ForInStatement":return this.visitForInStatement(g,c,h);case "Declaration":return this.visitDeclaration(g,c,h);case "ThisExpression":return this.visitThisExpression(g,c,h);case "ArrayExpression":return this.visitArrayExpression(g,c,h);case "ObjectExpression":return this.visitObjectExpression(g,c,h);case "FunctionExpression":return this.visitFunctionExpression(g,
c,h);case "UnaryExpression":return this.visitUnaryExpression(g,c,h);case "UpdateExpression":return this.visitUpdateExpression(g,c,h);case "BinaryExpression":return this.visitBinaryExpression(g,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(g,c,h);case "LogicalExpression":return this.visitLogicalExpression(g,c,h);case "MemberExpression":return this.visitMemberExpression(g,c,h);case "ConditionalExpression":return this.visitConditionalExpression(g,c,h);case "CallExpression":return this.visitCallExpression(g,
c,h);case "NewExpression":return this.visitNewExpression(g,c,h);case "SequenceExpression":return this.visitSequenceExpression(g,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,h);case "YieldExpression":return this.visitYieldExpression(g,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,h);case "ObjectPattern":return this.visitObjectPattern(g,
c,h);case "ArrayPattern":return this.visitArrayPattern(g,c,h);case "RestElement":return this.visitRestElement(g,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,h);case "ClassExpression":return this.visitClassExpression(g,c,h);case "MetaProperty":return this.visitMetaProperty(g,c,h);case "ImportDeclaration":return this.visitImportDeclaration(g,c,h);case "ImportSpecifier":return this.visitImportSpecifier(g,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,c,h);case "ExportSpecifier":return this.visitExportSpecifier(g,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,h);case "AwaitExpression":return this.visitAwaitExpression(g,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,h);case "JSXElement":return this.visitJSXElement(g,
c,h);case "JSXFragment":return this.visitJSXFragment(g,c,h);case "ImportExpression":return this.visitImportExpression(g,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,h);case "FunctionBody":return this.visitFunctionBody(g,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(g,c,h);case "ForOfStatement":return this.visitForOfStatement(g,c,h);case "ClassDeclaration":return this.visitClassDeclaration(g,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(g,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(g));};Jd.prototype.visitNode=function(g,c,h){return g};Jd.prototype.visitSourceLocation=function(g,c,h){g.start=this.accept(g.start,c,h.concat(["start"]));g.end=this.accept(g.end,c,h.concat(["end"]));return g};Jd.prototype.visitPosition=function(g,c,h){return g};Jd.prototype.visitProgram=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Jd.prototype.visitFunction=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitStatement=
function(g,c,h){return g};Jd.prototype.visitDirective=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Jd.prototype.visitSwitchCase=function(g,c,h){g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));for(var f=[],m=0;m<g.consequent.length;m++){var n=g.consequent[m];n=n?this.accept(n,c,h.concat(["consequent",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.consequent=f;return g};Jd.prototype.visitCatchClause=function(g,c,h){g.param&&(g.param=this.accept(g.param,
c,h.concat(["param"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitVariableDeclarator=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));return g};Jd.prototype.visitExpression=function(g,c,h){return g};Jd.prototype.visitProperty=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Jd.prototype.visitPattern=function(g,c,h){return g};
Jd.prototype.visitSuper=function(g,c,h){return g};Jd.prototype.visitSpreadElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitTemplateElement=function(g,c,h){return g};Jd.prototype.visitClass=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitClassBody=function(g,c,h){for(var f=
[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Jd.prototype.visitMethodDefinition=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Jd.prototype.visitModuleDeclaration=function(g,c,h){return g};Jd.prototype.visitModuleSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Jd.prototype.visitJSXEmptyExpression=
function(g,c,h){return g};Jd.prototype.visitJSXExpressionContainer=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Jd.prototype.visitJSXSpreadChild=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Jd.prototype.visitJSXBoundaryElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Jd.prototype.visitJSXAttribute=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));g.value&&(g.value=
this.accept(g.value,c,h.concat(["value"])));return g};Jd.prototype.visitJSXText=function(g,c,h){return g};Jd.prototype.visitJSXOpeningFragment=function(g,c,h){return g};Jd.prototype.visitJSXClosingFragment=function(g,c,h){return g};Jd.prototype.visitIdentifier=function(g,c,h){return g};Jd.prototype.visitLiteral=function(g,c,h){return g};Jd.prototype.visitExpressionStatement=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Jd.prototype.visitBlockStatement=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Jd.prototype.visitEmptyStatement=function(g,c,h){return g};Jd.prototype.visitDebuggerStatement=function(g,c,h){return g};Jd.prototype.visitWithStatement=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitReturnStatement=function(g,
c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Jd.prototype.visitLabeledStatement=function(g,c,h){g.label=this.accept(g.label,c,h.concat(["label"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitBreakStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Jd.prototype.visitContinueStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Jd.prototype.visitIfStatement=
function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,c,h.concat(["alternate"])));return g};Jd.prototype.visitSwitchStatement=function(g,c,h){g.discriminant=this.accept(g.discriminant,c,h.concat(["discriminant"]));for(var f=[],m=0;m<g.cases.length;m++){var n=g.cases[m];n=n?this.accept(n,c,h.concat(["cases",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.cases=f;return g};
Jd.prototype.visitThrowStatement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Jd.prototype.visitWhileStatement=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Jd.prototype.visitDoWhileStatement=function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.test=this.accept(g.test,c,h.concat(["test"]));return g};Jd.prototype.visitForStatement=function(g,c,h){g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));g.update&&(g.update=this.accept(g.update,c,h.concat(["update"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitForInStatement=function(g,c,h){g.left=
this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitDeclaration=function(g,c,h){return g};Jd.prototype.visitThisExpression=function(g,c,h){return g};Jd.prototype.visitArrayExpression=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};
Jd.prototype.visitObjectExpression=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Jd.prototype.visitFunctionExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=
this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitUnaryExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitUpdateExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitBinaryExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Jd.prototype.visitAssignmentExpression=function(g,
c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Jd.prototype.visitLogicalExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Jd.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Jd.prototype.visitConditionalExpression=function(g,
c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.alternate=this.accept(g.alternate,c,h.concat(["alternate"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));return g};Jd.prototype.visitCallExpression=function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Jd.prototype.visitNewExpression=
function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Jd.prototype.visitSequenceExpression=function(g,c,h){for(var f=[],m=0;m<g.expressions.length;m++){var n=g.expressions[m];n=n?this.accept(n,c,h.concat(["expressions",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.expressions=f;return g};Jd.prototype.visitArrowFunctionExpression=
function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;return g};Jd.prototype.visitYieldExpression=function(g,c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Jd.prototype.visitTemplateLiteral=function(g,c,h){for(var f=[],m=0;m<g.quasis.length;m++){var n=
g.quasis[m];n=n?this.accept(n,c,h.concat(["quasis",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.quasis=f;f=[];for(m=0;m<g.expressions.length;m++)n=(n=g.expressions[m])?this.accept(n,c,h.concat(["expressions",m])):n,Array.isArray(n)?f.push.apply(f,n):f.push(n);g.expressions=f;return g};Jd.prototype.visitTaggedTemplateExpression=function(g,c,h){g.tag=this.accept(g.tag,c,h.concat(["tag"]));g.quasi=this.accept(g.quasi,c,h.concat(["quasi"]));return g};Jd.prototype.visitAssignmentProperty=function(g,
c,h){g.value=this.accept(g.value,c,h.concat(["value"]));g.key=this.accept(g.key,c,h.concat(["key"]));return g};Jd.prototype.visitObjectPattern=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Jd.prototype.visitArrayPattern=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",
m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};Jd.prototype.visitRestElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitAssignmentPattern=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Jd.prototype.visitClassExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,
c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitMetaProperty=function(g,c,h){g.meta=this.accept(g.meta,c,h.concat(["meta"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Jd.prototype.visitImportDeclaration=function(g,c,h){for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source=this.accept(g.source,
c,h.concat(["source"]));return g};Jd.prototype.visitImportSpecifier=function(g,c,h){g.imported=this.accept(g.imported,c,h.concat(["imported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Jd.prototype.visitImportDefaultSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Jd.prototype.visitImportNamespaceSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Jd.prototype.visitExportNamedDeclaration=function(g,c,h){g.declaration&&
(g.declaration=this.accept(g.declaration,c,h.concat(["declaration"])));for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source&&(g.source=this.accept(g.source,c,h.concat(["source"])));return g};Jd.prototype.visitExportSpecifier=function(g,c,h){g.exported=this.accept(g.exported,c,h.concat(["exported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Jd.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,
c,h.concat(["body"]));return g};Jd.prototype.visitExportDefaultDeclaration=function(g,c,h){g.declaration=this.accept(g.declaration,c,h.concat(["declaration"]));return g};Jd.prototype.visitExportAllDeclaration=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Jd.prototype.visitAwaitExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitJSXMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));
g.property=this.accept(g.property,c,h.concat(["property"]));return g};Jd.prototype.visitJSXNamespacedName=function(g,c,h){g.namespace=this.accept(g.namespace,c,h.concat(["namespace"]));g.name=this.accept(g.name,c,h.concat(["name"]));return g};Jd.prototype.visitJSXOpeningElement=function(g,c,h){for(var f=[],m=0;m<g.attributes.length;m++){var n=g.attributes[m];n=n?this.accept(n,c,h.concat(["attributes",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.attributes=f;g.name=this.accept(g.name,c,h.concat(["name"]));
return g};Jd.prototype.visitJSXClosingElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Jd.prototype.visitJSXSpreadAttribute=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Jd.prototype.visitJSXElement=function(g,c,h){g.openingElement=this.accept(g.openingElement,c,h.concat(["openingElement"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,
n):f.push(n)}g.children=f;g.closingElement&&(g.closingElement=this.accept(g.closingElement,c,h.concat(["closingElement"])));return g};Jd.prototype.visitJSXFragment=function(g,c,h){g.openingFragment=this.accept(g.openingFragment,c,h.concat(["openingFragment"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.children=f;g.closingFragment=this.accept(g.closingFragment,c,h.concat(["closingFragment"]));
return g};Jd.prototype.visitImportExpression=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Jd.prototype.visitRegExpLiteral=function(g,c,h){return g};Jd.prototype.visitFunctionBody=function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Jd.prototype.visitFunctionDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=
[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitVariableDeclaration=function(g,c,h){for(var f=[],m=0;m<g.declarations.length;m++){var n=g.declarations[m];n=n?this.accept(n,c,h.concat(["declarations",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.declarations=f;return g};Jd.prototype.visitForOfStatement=function(g,c,
h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitClassDeclaration=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Jd.prototype.visitJSXIdentifier=function(g,c,h){return g};Jd.prototype.visitBigIntLiteral=function(g,c,h){return g};
za("bN",Jd);I0.Visitor=Jd;I0.default=Jd;var wg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");wg.obj=df;wg.Path=Ag;wg.Visitor=Jd;var ix=function(){return wg.Visitor.apply(this,arguments)||this};$jscomp.inherits(ix,wg.Visitor);ix.prototype.accept=function(g,c,h){var f=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),m=[];h=wg.Visitor.prototype.accept.call(this,g,{index:c.index,tree:m},h);c.tree.push({node:g,path:f,index:c.index++,children:m});return h};
wg.PrinterVisitor=ix;var Ui=function(){return wg.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ui,wg.Visitor);Ui.prototype.recordNotEqual=function(g,c,h,f){h.comparisons.errors.push({node1:g,node2:c,path:h.completePath,msg:f})};Ui.prototype.compareType=function(g,c,h){return this.compareField("type",g,c,h)};Ui.prototype.compareField=function(g,c,h,f){h=wg.Path(f.completePath.join(".")).get(h);if(c&&h&&c[g]===h[g]||c&&"*"===c[g]||h&&"*"===h[g])return!0;var m=f.completePath.join(".")+"."+g;
this.recordNotEqual(c,h,f,c?h?m+" is not equal: "+c[g]+" vs. "+h[g]:"node2 not defined but node1 ("+m+") is: "+c[g]:"node1 on "+m+" not defined");return!1};Ui.prototype.accept=function(g,c,h,f){var m=wg.Path(f.join(".")).get(c);if("*"!==g&&"*"!==m&&(h={completePath:f,comparisons:h.comparisons},this.compareType(g,c,h)))this["visit"+g.type](g,c,h,f)};Ui.prototype.visitFunction=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return wg.Visitor.prototype.visitFunction.call(this,
g,c,h,f)};Ui.prototype.visitSwitchStatement=function(g,c,h,f){g.lexical&&this.compareField("lexical",g,c,h);return wg.Visitor.prototype.visitSwitchStatement.call(this,g,c,h,f)};Ui.prototype.visitForInStatement=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return wg.Visitor.prototype.visitForInStatement.call(this,g,c,h,f)};Ui.prototype.visitFunctionDeclaration=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return wg.Visitor.prototype.visitFunctionDeclaration.call(this,
g,c,h,f)};Ui.prototype.visitVariableDeclaration=function(g,c,h,f){this.compareField("kind",g,c,h);return wg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h,f)};Ui.prototype.visitUnaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return wg.Visitor.prototype.visitUnaryExpression.call(this,g,c,h,f)};Ui.prototype.visitBinaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return wg.Visitor.prototype.visitBinaryExpression.call(this,
g,c,h,f)};Ui.prototype.visitAssignmentExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return wg.Visitor.prototype.visitAssignmentExpression.call(this,g,c,h,f)};Ui.prototype.visitUpdateExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return wg.Visitor.prototype.visitUpdateExpression.call(this,g,c,h,f)};Ui.prototype.visitLogicalExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return wg.Visitor.prototype.visitLogicalExpression.call(this,
g,c,h,f)};Ui.prototype.visitMemberExpression=function(g,c,h,f){g.computed&&this.compareField("computed",g,c,h);return wg.Visitor.prototype.visitMemberExpression.call(this,g,c,h,f)};Ui.prototype.visitComprehensionBlock=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return wg.Visitor.prototype.visitComprehensionBlock.call(this,g,c,h,f)};Ui.prototype.visitIdentifier=function(g,c,h,f){this.compareField("name",g,c,h);return wg.Visitor.prototype.visitIdentifier.call(this,g,c,h,f)};Ui.prototype.visitLiteral=
function(g,c,h,f){this.compareField("value",g,c,h);return wg.Visitor.prototype.visitLiteral.call(this,g,c,h,f)};Ui.prototype.visitClassDeclaration=function(g,c,h,f){this.compareField("id",g,c,h);g.superClass&&this.compareField("superClass",g,c,h);this.compareField("body",g,c,h);return wg.Visitor.prototype.visitClassDeclaration.call(this,g,c,h,f)};Ui.prototype.visitClassBody=function(g,c,h,f){this.compareField("body",g,c,h);return wg.Visitor.prototype.visitClassBody.call(this,g,c,h,f)};Ui.prototype.visitMethodDefinition=
function(g,c,h,f){this.compareField("static",g,c,h);this.compareField("computed",g,c,h);this.compareField("kind",g,c,h);this.compareField("key",g,c,h);this.compareField("value",g,c,h);return wg.Visitor.prototype.visitMethodDefinition.call(this,g,c,h,f)};wg.ComparisonVisitor=Ui;var gi=function(){return wg.Visitor.apply(this,arguments)||this};$jscomp.inherits(gi,wg.Visitor);gi.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);return g};gi.prototype.visitVariableDeclaration=function(g,c,h){c.varDecls.push(g);c.varDeclPaths.push(h);return wg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h)};gi.prototype.visitVariableDeclarator=function(g,c,h){g.init&&(g.init=this.accept(g.init,
c,h.concat(["init"])));return g};gi.prototype.visitFunction=function(g,c,h){var f=this,m=this.newScope(g,c);g.params.forEach(function(n,a){"AssignmentPattern"===n.type&&f.accept(n.right,m,h.concat("params",a,"right"))});m.params=Array.prototype.slice.call(g.params);return m};gi.prototype.visitFunctionDeclaration=function(g,c,h){var f=this.visitFunction(g,c,h);c.funcDecls.push(g);c.funcDeclPaths.push(h);var m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",
d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};gi.prototype.visitFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,
f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};gi.prototype.visitArrowFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,
f,h.concat(["loc"])));return g};gi.prototype.visitIdentifier=function(g,c,h){c.refs.push(g);return wg.Visitor.prototype.visitIdentifier.call(this,g,c,h)};gi.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.computed&&(g.property=this.accept(g.property,c,h.concat(["property"])));return g};gi.prototype.visitProperty=function(g,c,h){g.computed&&(g.key=this.accept(g.key,c,h.concat(["key"])));g.value=this.accept(g.value,c,h.concat(["value"]));return g};
gi.prototype.visitThisExpression=function(g,c,h){c.thisRefs.push(g);return wg.Visitor.prototype.visitThisExpression.call(this,g,c,h)};gi.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};gi.prototype.visitLabeledStatement=function(g,c,h){g.body=this.accept(g.body,c,
h.concat(["body"]));return g};gi.prototype.visitClassDeclaration=function(g,c,h){c.classDecls.push(g);c.classDeclPaths.push(h);g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};gi.prototype.visitClassExpression=function(g,c,h){g.id&&(c.classExprs.push(g),c.classExprPaths.push(h));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};gi.prototype.visitMethodDefinition=function(g,c,h){g.value=this.accept(g.value,c,h.concat(["value"]));return g};gi.prototype.visitMetaProperty=function(g,c,h){return g};gi.prototype.visitBreakStatement=function(g,c,h){return g};gi.prototype.visitContinueStatement=function(g,c,h){return g};gi.prototype.visitImportSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};gi.prototype.visitImportDefaultSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);
c.importSpecifierPaths.push(h);return g};gi.prototype.visitImportNamespaceSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};gi.prototype.visitExportSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};gi.prototype.visitExportNamedDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);g.source||wg.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,h);return g};gi.prototype.visitExportDefaultDeclaration=
function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return wg.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,h)};gi.prototype.visitExportAllDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return wg.Visitor.prototype.visitExportAllDeclaration.call(this,g,c,h)};wg.ScopeVisitor=gi;wg.BaseVisitor=Jd;wg.Visitor=Jd;wg.PrinterVisitor=ix;wg.PrinterVisitor=ix;wg.ComparisonVisitor=Ui;wg.ComparisonVisitor=Ui;wg.ScopeVisitor=gi;wg.ScopeVisitor=gi;var Gf=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,UO={};(function h(c){function f(C){var E={},L;for(L in C)if(C.hasOwnProperty(L)){var I=C[L];E[L]="object"===typeof I&&null!==I?f(I):I}return E}function m(C,E){var L;var I=C.length;for(L=0;I;){var V=I>>>1;var T=L+V;E(C[T])?I=V:(L=T+1,I-=V+1)}return L}function n(C,E){(this||Gf).parent=C;(this||Gf).key=E}function a(C,E,L,I){(this||Gf).node=C;(this||Gf).path=E;(this||Gf).wrap=L;(this||Gf).ref=I}function d(){}function k(C){return null==
C?!1:"object"===typeof C&&"string"===typeof C.type}function b(C,E){for(var L=C.length-1;0<=L;--L)if(C[L].node===E)return!0;return!1}function e(C,E){return(new d).traverse(C,E)}function l(C,E){var L=m(E,function(I){return I.range[0]>C.range[0]});C.extendedRange=[C.range[0],C.range[1]];L!==E.length&&(C.extendedRange[1]=E[L].range[0]);--L;0<=L&&(C.extendedRange[0]=E[L].range[1]);return C}var p={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var q={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var u={};var w={};var y={};var A={Break:u,Skip:w,Remove:y};n.prototype.replace=function(C){(this||Gf).parent[(this||Gf).key]=C};n.prototype.remove=function(){if(Array.isArray((this||Gf).parent))return(this||Gf).parent.splice((this||Gf).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function C(na,Ba){if(Array.isArray(Ba))for(L=
0,I=Ba.length;L<I;++L)na.push(Ba[L]);else na.push(Ba)}var E,L,I;if(!(this||Gf).__current.path)return null;var V=[];var T=2;for(E=(this||Gf).__leavelist.length;T<E;++T){var Y=(this||Gf).__leavelist[T];C(V,Y.path)}C(V,(this||Gf).__current.path);return V};d.prototype.type=function(){return this.current().type||(this||Gf).__current.wrap};d.prototype.parents=function(){var C;var E=[];var L=1;for(C=(this||Gf).__leavelist.length;L<C;++L)E.push((this||Gf).__leavelist[L].node);return E};d.prototype.current=
function(){return(this||Gf).__current.node};d.prototype.__execute=function(C,E){var L=void 0;var I=(this||Gf).__current;(this||Gf).__current=E;(this||Gf).__state=null;C&&(L=C.call(this||Gf,E.node,(this||Gf).__leavelist[(this||Gf).__leavelist.length-1].node));(this||Gf).__current=I;return L};d.prototype.notify=function(C){(this||Gf).__state=C};d.prototype.skip=function(){this.notify(w)};d.prototype["break"]=function(){this.notify(u)};d.prototype.remove=function(){this.notify(y)};d.prototype.__initialize=
function(C,E){(this||Gf).visitor=E;(this||Gf).root=C;(this||Gf).__worklist=[];(this||Gf).__leavelist=[];(this||Gf).__current=null;(this||Gf).__state=null;(this||Gf).__fallback=null;"iteration"===E.fallback?(this||Gf).__fallback=Object.keys:"function"===typeof E.fallback&&((this||Gf).__fallback=E.fallback);(this||Gf).__keys=q;E.keys&&((this||Gf).__keys=Object.assign(Object.create((this||Gf).__keys),E.keys))};d.prototype.traverse=function(C,E){var L,I,V;this.__initialize(C,E);var T={};var Y=(this||
Gf).__worklist;var na=(this||Gf).__leavelist;Y.push(new a(C,null,null,null));for(na.push(new a(null,null,null,null));Y.length;)if(C=Y.pop(),C===T){C=na.pop();var Ba=this.__execute(E.leave,C);if((this||Gf).__state===u||Ba===u)break}else if(C.node){Ba=this.__execute(E.enter,C);if((this||Gf).__state===u||Ba===u)break;Y.push(T);na.push(C);if((this||Gf).__state!==w&&Ba!==w){Ba=C.node;var F=Ba.type||C.wrap;var W=(this||Gf).__keys[F];if(!W)if((this||Gf).__fallback)W=this.__fallback(Ba);else throw Error("Unknown node type "+
F+".");for(L=W.length;0<=--L;){var P=W[L];if(V=Ba[P])if(Array.isArray(V))for(I=V.length;0<=--I;){if(V[I]&&!b(na,V[I])){if(F!==p.ObjectExpression&&F!==p.ObjectPattern||"properties"!==W[L])if(k(V[I]))C=new a(V[I],[P,I],null,null);else continue;else C=new a(V[I],[P,I],"Property",null);Y.push(C)}}else k(V)&&!b(na,V)&&Y.push(new a(V,P,null,null))}}}};d.prototype.replace=function(C,E){function L(aa){if(aa.ref.remove()){var oa=aa.ref.key;var Va=aa.ref.parent;for(aa=na.length;aa--;){var lb=na[aa];if(lb.ref&&
lb.ref.parent===Va){if(lb.ref.key<oa)break;--lb.ref.key}}}}var I,V,T;this.__initialize(C,E);var Y={};var na=(this||Gf).__worklist;var Ba=(this||Gf).__leavelist;var F={root:C};var W=new a(C,null,null,new n(F,"root"));na.push(W);for(Ba.push(W);na.length;)if(W=na.pop(),W===Y){W=Ba.pop();var P=this.__execute(E.leave,W);void 0!==P&&P!==u&&P!==w&&P!==y&&W.ref.replace(P);(this||Gf).__state!==y&&P!==y||L(W);if((this||Gf).__state===u||P===u)break}else{P=this.__execute(E.enter,W);void 0!==P&&P!==u&&P!==w&&
P!==y&&(W.ref.replace(P),W.node=P);if((this||Gf).__state===y||P===y)L(W),W.node=null;if((this||Gf).__state===u||P===u)break;if(C=W.node)if(na.push(Y),Ba.push(W),(this||Gf).__state!==w&&P!==w){P=C.type||W.wrap;var S=(this||Gf).__keys[P];if(!S)if((this||Gf).__fallback)S=this.__fallback(C);else throw Error("Unknown node type "+P+".");for(I=S.length;0<=--I;){var fa=S[I];if(T=C[fa])if(Array.isArray(T))for(V=T.length;0<=--V;){if(T[V]){if(P!==p.ObjectExpression&&P!==p.ObjectPattern||"properties"!==S[I])if(k(T[V]))W=
new a(T[V],[fa,V],null,new n(T,V));else continue;else W=new a(T[V],[fa,V],"Property",new n(T,V));na.push(W)}}else k(T)&&na.push(new a(T,fa,null,new n(C,fa)))}}}return F.root};c.Syntax=p;c.traverse=e;c.replace=function(C,E){return(new d).replace(C,E)};c.attachComments=function(C,E,L){var I=[],V;if(!C.range)throw Error("attachComments needs range information");if(!L.length){if(E.length){var T=0;for(V=E.length;T<V;T+=1)L=f(E[T]),L.extendedRange=[0,C.range[0]],I.push(L);C.leadingComments=I}return C}T=
0;for(V=E.length;T<V;T+=1)I.push(l(f(E[T]),L));var Y=0;e(C,{enter:function(na){for(var Ba;Y<I.length;){Ba=I[Y];if(Ba.extendedRange[1]>na.range[0])break;Ba.extendedRange[1]===na.range[0]?(na.leadingComments||(na.leadingComments=[]),na.leadingComments.push(Ba),I.splice(Y,1)):Y+=1}if(Y===I.length)return A.Break;if(I[Y].extendedRange[0]>na.range[1])return A.Skip}});Y=0;e(C,{leave:function(na){for(var Ba;Y<I.length;){Ba=I[Y];if(na.range[1]<Ba.extendedRange[0])break;na.range[1]===Ba.extendedRange[0]?(na.trailingComments||
(na.trailingComments=[]),na.trailingComments.push(Ba),I.splice(Y,1)):Y+=1}if(Y===I.length)return A.Break;if(I[Y].extendedRange[0]>na.range[1])return A.Skip}});return C};c.VisitorKeys=q;c.VisitorOption=A;c.Controller=d;c.cloneEnvironment=function(){return h({})};return c})(UO);var J0={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}J0={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=h(f)}while(f);return!1},trailingStatement:h}})();var tda=J0,K0={};
(function(){function c(e){if(65535>=e)return String.fromCharCode(e);var l=String.fromCharCode(Math.floor((e-65536)/1024)+55296);e=String.fromCharCode((e-65536)%1024+56320);return l+e}var h;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var m=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var a=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var k=Array(128);for(h=0;128>h;++h)k[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var b=Array(128);for(h=0;128>h;++h)b[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;K0={isDecimalDigit:function(e){return 48<=e&&57>=e},isHexDigit:function(e){return 48<=e&&57>=e||97<=e&&102>=e||65<=e&&70>=e},isOctalDigit:function(e){return 48<=e&&55>=e},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===
e||160===e||5760<=e&&0<=d.indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return 128>e?k[e]:f.test(c(e))},isIdentifierPartES5:function(e){return 128>e?b[e]:m.test(c(e))},isIdentifierStartES6:function(e){return 128>e?k[e]:n.test(c(e))},isIdentifierPartES6:function(e){return 128>e?b[e]:a.test(c(e))}}})();var L0=K0,M0={};(function(){function c(k,b){return b||"yield"!==k?h(k,b):!1}function h(k,b){if(b)a:switch(k){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":b=
!0;break a;default:b=!1}if(b)return!0;switch(k.length){case 2:return"if"===k||"in"===k||"do"===k;case 3:return"var"===k||"for"===k||"new"===k||"try"===k;case 4:return"this"===k||"else"===k||"case"===k||"void"===k||"with"===k||"enum"===k;case 5:return"while"===k||"break"===k||"catch"===k||"throw"===k||"const"===k||"yield"===k||"class"===k||"super"===k;case 6:return"return"===k||"typeof"===k||"delete"===k||"switch"===k||"export"===k||"import"===k;case 7:return"default"===k||"finally"===k||"extends"===
k;case 8:return"function"===k||"continue"===k||"debugger"===k;case 10:return"instanceof"===k;default:return!1}}function f(k,b){return"null"===k||"true"===k||"false"===k||c(k,b)}function m(k,b){return"null"===k||"true"===k||"false"===k||h(k,b)}function n(k){var b;if(0===k.length)return!1;var e=k.charCodeAt(0);if(!d.isIdentifierStartES5(e))return!1;var l=1;for(b=k.length;l<b;++l)if(e=k.charCodeAt(l),!d.isIdentifierPartES5(e))return!1;return!0}function a(k){var b;if(0===k.length)return!1;var e=d.isIdentifierStartES6;
var l=0;for(b=k.length;l<b;++l){var p=k.charCodeAt(l);if(55296<=p&&56319>=p){++l;if(l>=b)return!1;var q=k.charCodeAt(l);if(!(56320<=q&&57343>=q))return!1;p=1024*(p-55296)+(q-56320)+65536}if(!e(p))return!1;e=d.isIdentifierPartES6}return!0}var d=L0;M0={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:f,isReservedWordES6:m,isRestrictedWord:function(k){return"eval"===k||"arguments"===k},isIdentifierNameES5:n,isIdentifierNameES6:a,isIdentifierES5:function(k,b){return n(k)&&!f(k,b)},isIdentifierES6:function(k,
b){return a(k)&&!m(k,b)}}})();var uda=M0,pA={};pA.ast=tda;pA.code=L0;pA.keyword=uda;var ak={getArg:function(c,h,f){if(h in c)return c[h];if(3===arguments.length)return f;throw Error('"'+h+'" is a required argument.');}},bS=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,C6=/^data:.+,.+$/;ak.urlParse=ht;ak.urlGenerate=X;ak.normalize=ma;ak.join=Sa;ak.isAbsolute=function(c){return"/"===c.charAt(0)||bS.test(c)};ak.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==h.indexOf(c+"/");){var m=c.lastIndexOf("/");if(0>m)return h;c=c.slice(0,m);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++f}return Array(f+1).join("../")+h.substr(c.length+1)};var N0=!("__proto__"in Object.create(null));ak.toSetString=N0?kb:Qb;ak.fromSetString=N0?kb:bc;ak.compareByOriginalPositions=function(c,h,f){var m=ee(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;if(0!==m||f)return m;m=c.generatedColumn-h.generatedColumn;
if(0!==m)return m;m=c.generatedLine-h.generatedLine;return 0!==m?m:ee(c.name,h.name)};ak.compareByGeneratedPositionsDeflated=function(c,h,f){var m=c.generatedLine-h.generatedLine;if(0!==m)return m;m=c.generatedColumn-h.generatedColumn;if(0!==m||f)return m;m=ee(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;return 0!==m?m:ee(c.name,h.name)};ak.compareByGeneratedPositionsInflated=function(c,h){var f=c.generatedLine-h.generatedLine;
if(0!==f)return f;f=c.generatedColumn-h.generatedColumn;if(0!==f)return f;f=ee(c.source,h.source);if(0!==f)return f;f=c.originalLine-h.originalLine;if(0!==f)return f;f=c.originalColumn-h.originalColumn;return 0!==f?f:ee(c.name,h.name)};ak.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};ak.computeSourceURL=function(c,h,f){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(f){c=ht(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));h=Sa(X(c),h)}return ma(h)};var eH={},O0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");eH.encode=function(c){if(0<=c&&c<O0.length)return O0[c];throw new TypeError("Must be between 0 and 63: "+c);};eH.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var jx={encode:function(c){var h="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),h+=eH.encode(c);while(0<f);return h},
decode:function(c,h,f){var m=c.length,n=0,a=0;do{if(h>=m)throw Error("Expected more digits in base 64 VLQ value.");var d=eH.decode(c.charCodeAt(h++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(h-1));var k=!!(d&32);d&=31;n+=d<<a;a+=5}while(k);c=n>>1;f.value=1===(n&1)?-c:c;f.rest=h}},Xk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VO=ak,WO=Object.prototype.hasOwnProperty,it="undefined"!==typeof Map;he.fromArray=function(c,h){for(var f=new he,m=0,n=c.length;m<
n;m++)f.add(c[m],h);return f};he.prototype.size=function(){return it?(this||Xk)._set.size:Object.getOwnPropertyNames((this||Xk)._set).length};he.prototype.add=function(c,h){var f=it?c:VO.toSetString(c),m=it?this.has(c):WO.call((this||Xk)._set,f),n=(this||Xk)._array.length;m&&!h||(this||Xk)._array.push(c);m||(it?(this||Xk)._set.set(c,n):(this||Xk)._set[f]=n)};he.prototype.has=function(c){if(it)return(this||Xk)._set.has(c);c=VO.toSetString(c);return WO.call((this||Xk)._set,c)};he.prototype.indexOf=
function(c){if(it){var h=(this||Xk)._set.get(c);if(0<=h)return h}else if(h=VO.toSetString(c),WO.call((this||Xk)._set,h))return(this||Xk)._set[h];throw Error('"'+c+'" is not in the set.');};he.prototype.at=function(c){if(0<=c&&c<(this||Xk)._array.length)return(this||Xk)._array[c];throw Error("No element indexed by "+c);};he.prototype.toArray=function(){return(this||Xk)._array.slice()};var Tm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P0=ak;af.prototype.unsortedForEach=
function(c,h){(this||Tm)._array.forEach(c,h)};af.prototype.add=function(c){var h=(this||Tm)._last,f=h.generatedLine,m=c.generatedLine,n=h.generatedColumn,a=c.generatedColumn;m>f||m==f&&a>=n||0>=P0.compareByGeneratedPositionsInflated(h,c)?(this||Tm)._last=c:(this||Tm)._sorted=!1;(this||Tm)._array.push(c)};af.prototype.toArray=function(){(this||Tm)._sorted||((this||Tm)._array.sort(P0.compareByGeneratedPositionsInflated),(this||Tm)._sorted=!0);return(this||Tm)._array};var Kg="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Hj=ak,VB=he,D6=af;$e.prototype._version=3;$e.fromSourceMap=function(c){var h=c.sourceRoot,f=new $e({file:c.file,sourceRoot:h});c.eachMapping(function(m){var n={generated:{line:m.generatedLine,column:m.generatedColumn}};null!=m.source&&(n.source=m.source,null!=h&&(n.source=Hj.relative(h,n.source)),n.original={line:m.originalLine,column:m.originalColumn},null!=m.name&&(n.name=m.name));f.addMapping(n)});c.sources.forEach(function(m){var n=m;null!==h&&
(n=Hj.relative(h,m));f._sources.has(n)||f._sources.add(n);n=c.sourceContentFor(m);null!=n&&f.setSourceContent(m,n)});return f};$e.prototype.addMapping=function(c){var h=Hj.getArg(c,"generated"),f=Hj.getArg(c,"original",null),m=Hj.getArg(c,"source",null);c=Hj.getArg(c,"name",null);(this||Kg)._skipValidation||this._validateMapping(h,f,m,c);null!=m&&(m=String(m),(this||Kg)._sources.has(m)||(this||Kg)._sources.add(m));null!=c&&(c=String(c),(this||Kg)._names.has(c)||(this||Kg)._names.add(c));(this||Kg)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:m,name:c})};$e.prototype.setSourceContent=function(c,h){null!=(this||Kg)._sourceRoot&&(c=Hj.relative((this||Kg)._sourceRoot,c));null!=h?((this||Kg)._sourcesContents||((this||Kg)._sourcesContents=Object.create(null)),(this||Kg)._sourcesContents[Hj.toSetString(c)]=h):(this||Kg)._sourcesContents&&(delete (this||Kg)._sourcesContents[Hj.toSetString(c)],0===Object.keys((this||Kg)._sourcesContents).length&&((this||
Kg)._sourcesContents=null))};$e.prototype.applySourceMap=function(c,h,f){var m=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');m=c.file}var n=(this||Kg)._sourceRoot;null!=n&&(m=Hj.relative(n,m));var a=new VB,d=new VB;(this||Kg)._mappings.unsortedForEach(function(k){if(k.source===m&&null!=k.originalLine){var b=c.originalPositionFor({line:k.originalLine,column:k.originalColumn});
null!=b.source&&(k.source=b.source,null!=f&&(k.source=Hj.join(f,k.source)),null!=n&&(k.source=Hj.relative(n,k.source)),k.originalLine=b.line,k.originalColumn=b.column,null!=b.name&&(k.name=b.name))}b=k.source;null==b||a.has(b)||a.add(b);k=k.name;null==k||d.has(k)||d.add(k)},this||Kg);(this||Kg)._sources=a;(this||Kg)._names=d;c.sources.forEach(function(k){var b=c.sourceContentFor(k);null!=b&&(null!=f&&(k=Hj.join(f,k)),null!=n&&(k=Hj.relative(n,k)),this.setSourceContent(k,b))},this||Kg)};$e.prototype._validateMapping=
function(c,h,f,m){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!f&&!m||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:m}));};$e.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,m=0,n=0,a=0,d="",k,b,e,l=(this||Kg)._mappings.toArray(),p=0,q=l.length;p<q;p++){b=l[p];k="";if(b.generatedLine!==h)for(c=0;b.generatedLine!==h;)k+=";",h++;else if(0<p){if(!Hj.compareByGeneratedPositionsInflated(b,l[p-1]))continue;k+=","}k+=jx.encode(b.generatedColumn-c);c=b.generatedColumn;null!=b.source&&(e=(this||Kg)._sources.indexOf(b.source),
k+=jx.encode(e-a),a=e,k+=jx.encode(b.originalLine-1-m),m=b.originalLine-1,k+=jx.encode(b.originalColumn-f),f=b.originalColumn,null!=b.name&&(b=(this||Kg)._names.indexOf(b.name),k+=jx.encode(b-n),n=b));d+=k}return d};$e.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!(this||Kg)._sourcesContents)return null;null!=h&&(f=Hj.relative(h,f));f=Hj.toSetString(f);return Object.prototype.hasOwnProperty.call((this||Kg)._sourcesContents,f)?(this||Kg)._sourcesContents[f]:null},this||
Kg)};$e.prototype.toJSON=function(){var c={version:(this||Kg)._version,sources:(this||Kg)._sources.toArray(),names:(this||Kg)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Kg)._file&&(c.file=(this||Kg)._file);null!=(this||Kg)._sourceRoot&&(c.sourceRoot=(this||Kg)._sourceRoot);(this||Kg)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};$e.prototype.toString=function(){return JSON.stringify(this.toJSON())};var WB={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,f,m){if(0===h.length)return-1;c=xh(-1,h.length,c,h,f,m||WB.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(h[c],h[c-1],!0);)--c;return c}},ie="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kf=ak,XO=WB,Lv=he,qA=function(c,h){Lg(c,h,0,c.length-1)};yh.fromSourceMap=function(c,h){return mh.fromSourceMap(c,h)};yh.prototype._version=3;yh.prototype.__generatedMappings=null;Object.defineProperty(yh.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||ie).__generatedMappings||this._parseMappings((this||ie)._mappings,(this||ie).sourceRoot);return(this||ie).__generatedMappings}});yh.prototype.__originalMappings=null;Object.defineProperty(yh.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||ie).__originalMappings||this._parseMappings((this||ie)._mappings,(this||ie).sourceRoot);return(this||ie).__originalMappings}});yh.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};yh.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};yh.GENERATED_ORDER=1;yh.ORIGINAL_ORDER=2;yh.GREATEST_LOWER_BOUND=1;yh.LEAST_UPPER_BOUND=2;yh.prototype.eachMapping=function(c,h,f){h=h||null;switch(f||yh.GENERATED_ORDER){case yh.GENERATED_ORDER:f=(this||ie)._generatedMappings;break;case yh.ORIGINAL_ORDER:f=(this||ie)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var m=(this||ie).sourceRoot;
f.map(function(n){var a=null===n.source?null:(this||ie)._sources.at(n.source);a=kf.computeSourceURL(m,a,(this||ie)._sourceMapURL);return{source:a,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||ie)._names.at(n.name)}},this||ie).forEach(c,h)};yh.prototype.allGeneratedPositionsFor=function(c){var h=kf.getArg(c,"line"),f={source:kf.getArg(c,"source"),originalLine:h,originalColumn:kf.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var m=[];f=this._findMapping(f,(this||ie)._originalMappings,"originalLine","originalColumn",kf.compareByOriginalPositions,XO.LEAST_UPPER_BOUND);if(0<=f){var n=(this||ie)._originalMappings[f];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)m.push({line:kf.getArg(n,"generatedLine",null),column:kf.getArg(n,"generatedColumn",null),lastColumn:kf.getArg(n,"lastGeneratedColumn",null)}),n=(this||ie)._originalMappings[++f];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)m.push({line:kf.getArg(n,"generatedLine",null),column:kf.getArg(n,"generatedColumn",null),lastColumn:kf.getArg(n,"lastGeneratedColumn",null)}),n=(this||ie)._originalMappings[++f]}return m};mh.prototype=Object.create(yh.prototype);mh.prototype.consumer=yh;mh.prototype._findSourceIndex=function(c){var h=c;null!=(this||ie).sourceRoot&&(h=kf.relative((this||ie).sourceRoot,h));if((this||ie)._sources.has(h))return(this||ie)._sources.indexOf(h);
for(h=0;h<(this||ie)._absoluteSources.length;++h)if((this||ie)._absoluteSources[h]==c)return h;return-1};mh.fromSourceMap=function(c,h){var f=Object.create(mh.prototype),m=f._names=Lv.fromArray(c._names.toArray(),!0),n=f._sources=Lv.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=h;f._absoluteSources=f._sources.toArray().map(function(p){return kf.computeSourceURL(f.sourceRoot,
p,h)});c=c._mappings.toArray().slice();for(var a=f.__generatedMappings=[],d=f.__originalMappings=[],k=0,b=c.length;k<b;k++){var e=c[k],l=new Di;l.generatedLine=e.generatedLine;l.generatedColumn=e.generatedColumn;e.source&&(l.source=n.indexOf(e.source),l.originalLine=e.originalLine,l.originalColumn=e.originalColumn,e.name&&(l.name=m.indexOf(e.name)),d.push(l));a.push(l)}qA(f.__originalMappings,kf.compareByOriginalPositions);return f};mh.prototype._version=3;Object.defineProperty(mh.prototype,"sources",
{get:function(){return(this||ie)._absoluteSources.slice()}});mh.prototype._parseMappings=function(c,h){h=1;for(var f=0,m=0,n=0,a=0,d=0,k=c.length,b=0,e={},l={},p=[],q=[],u,w,y,A,C;b<k;)if(";"===c.charAt(b))h++,b++,f=0;else if(","===c.charAt(b))b++;else{u=new Di;u.generatedLine=h;for(A=b;A<k&&!this._charIsMappingSeparator(c,A);A++);w=c.slice(b,A);if(y=e[w])b+=w.length;else{for(y=[];b<A;)jx.decode(c,b,l),C=l.value,b=l.rest,y.push(C);if(2===y.length)throw Error("Found a source, but no line and column");
if(3===y.length)throw Error("Found a source and line, but no column");e[w]=y}u.generatedColumn=f+y[0];f=u.generatedColumn;1<y.length&&(u.source=a+y[1],a+=y[1],u.originalLine=m+y[2],m=u.originalLine,u.originalLine+=1,u.originalColumn=n+y[3],n=u.originalColumn,4<y.length&&(u.name=d+y[4],d+=y[4]));q.push(u);"number"===typeof u.originalLine&&p.push(u)}qA(q,kf.compareByGeneratedPositionsDeflated);(this||ie).__generatedMappings=q;qA(p,kf.compareByOriginalPositions);(this||ie).__originalMappings=p};mh.prototype._findMapping=
function(c,h,f,m,n,a){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[m])throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return XO.search(c,h,n,a)};mh.prototype.computeColumnSpans=function(){for(var c=0;c<(this||ie)._generatedMappings.length;++c){var h=(this||ie)._generatedMappings[c];if(c+1<(this||ie)._generatedMappings.length){var f=(this||ie)._generatedMappings[c+1];if(h.generatedLine===f.generatedLine){h.lastGeneratedColumn=
f.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};mh.prototype.originalPositionFor=function(c){var h={generatedLine:kf.getArg(c,"line"),generatedColumn:kf.getArg(c,"column")};c=this._findMapping(h,(this||ie)._generatedMappings,"generatedLine","generatedColumn",kf.compareByGeneratedPositionsDeflated,kf.getArg(c,"bias",yh.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||ie)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=kf.getArg(c,"source",null);null!==h&&(h=(this||ie)._sources.at(h),
h=kf.computeSourceURL((this||ie).sourceRoot,h,(this||ie)._sourceMapURL));var f=kf.getArg(c,"name",null);null!==f&&(f=(this||ie)._names.at(f));return{source:h,line:kf.getArg(c,"originalLine",null),column:kf.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};mh.prototype.hasContentsOfAllSources=function(){return(this||ie).sourcesContent?(this||ie).sourcesContent.length>=(this||ie)._sources.size()&&!(this||ie).sourcesContent.some(function(c){return null==c}):
!1};mh.prototype.sourceContentFor=function(c,h){if(!(this||ie).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||ie).sourcesContent[f];null!=(this||ie).sourceRoot&&(c=kf.relative((this||ie).sourceRoot,c));var m;if(null!=(this||ie).sourceRoot&&(m=kf.urlParse((this||ie).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==m.scheme&&(this||ie)._sources.has(f))return(this||ie).sourcesContent[(this||ie)._sources.indexOf(f)];if((!m.path||"/"==m.path)&&(this||ie)._sources.has("/"+
c))return(this||ie).sourcesContent[(this||ie)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};mh.prototype.generatedPositionFor=function(c){var h=kf.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:kf.getArg(c,"line"),originalColumn:kf.getArg(c,"column")};c=this._findMapping(h,(this||ie)._originalMappings,"originalLine","originalColumn",kf.compareByOriginalPositions,kf.getArg(c,"bias",
yh.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||ie)._originalMappings[c],c.source===h.source)?{line:kf.getArg(c,"generatedLine",null),column:kf.getArg(c,"generatedColumn",null),lastColumn:kf.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Ij.prototype=Object.create(yh.prototype);Ij.prototype.constructor=yh;Ij.prototype._version=3;Object.defineProperty(Ij.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||ie)._sections.length;h++)for(var f=0;f<(this||ie)._sections[h].consumer.sources.length;f++)c.push((this||
ie)._sections[h].consumer.sources[f]);return c}});Ij.prototype.originalPositionFor=function(c){var h={generatedLine:kf.getArg(c,"line"),generatedColumn:kf.getArg(c,"column")},f=XO.search(h,(this||ie)._sections,function(m,n){var a=m.generatedLine-n.generatedOffset.generatedLine;return a?a:m.generatedColumn-n.generatedOffset.generatedColumn});return(f=(this||ie)._sections[f])?f.consumer.originalPositionFor({line:h.generatedLine-(f.generatedOffset.generatedLine-1),column:h.generatedColumn-(f.generatedOffset.generatedLine===
h.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};Ij.prototype.hasContentsOfAllSources=function(){return(this||ie)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};Ij.prototype.sourceContentFor=function(c,h){for(var f=0;f<(this||ie)._sections.length;f++){var m=(this||ie)._sections[f].consumer.sourceContentFor(c,!0);if(m)return m}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Ij.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||ie)._sections.length;h++){var f=(this||ie)._sections[h];if(-1!==f.consumer._findSourceIndex(kf.getArg(c,"source"))){var m=f.consumer.generatedPositionFor(c);if(m)return{line:m.line+(f.generatedOffset.generatedLine-1),column:m.column+(f.generatedOffset.generatedLine===m.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Ij.prototype._parseMappings=function(c,h){(this||ie).__generatedMappings=[];(this||ie).__originalMappings=[];for(c=0;c<(this||
ie)._sections.length;c++){h=(this||ie)._sections[c];for(var f=h.consumer._generatedMappings,m=0;m<f.length;m++){var n=f[m],a=h.consumer._sources.at(n.source);a=kf.computeSourceURL(h.consumer.sourceRoot,a,(this||ie)._sourceMapURL);(this||ie)._sources.add(a);a=(this||ie)._sources.indexOf(a);var d=null;n.name&&(d=h.consumer._names.at(n.name),(this||ie)._names.add(d),d=(this||ie)._names.indexOf(d));n={source:a,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:d};(this||ie).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||ie).__originalMappings.push(n)}}qA((this||ie).__generatedMappings,kf.compareByGeneratedPositionsDeflated);qA((this||ie).__originalMappings,kf.compareByOriginalPositions)};var zh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fH=ak,
vda=/(\r?\n)/;Yk.fromStringWithSourceMap=function(c,h,f){function m(p,q){if(null===p||void 0===p.source)n.add(q);else{var u=f?fH.join(f,p.source):p.source;n.add(new Yk(p.originalLine,p.originalColumn,u,q,p.name))}}var n=new Yk,a=c.split(vda),d=0,k=function(){var p=d<a.length?a[d++]:void 0,q=(d<a.length?a[d++]:void 0)||"";return p+q},b=1,e=0,l=null;h.eachMapping(function(p){if(null!==l)if(b<p.generatedLine)m(l,k()),b++,e=0;else{var q=a[d]||"",u=q.substr(0,p.generatedColumn-e);a[d]=q.substr(p.generatedColumn-
e);e=p.generatedColumn;m(l,u);l=p;return}for(;b<p.generatedLine;)n.add(k()),b++;e<p.generatedColumn&&(q=a[d]||"",n.add(q.substr(0,p.generatedColumn)),a[d]=q.substr(p.generatedColumn),e=p.generatedColumn);l=p},this||zh);d<a.length&&(l&&m(l,k()),n.add(a.splice(d).join("")));h.sources.forEach(function(p){var q=h.sourceContentFor(p);null!=q&&(null!=f&&(p=fH.join(f,p)),n.setSourceContent(p,q))});return n};Yk.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||zh);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||zh).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||zh};Yk.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||zh).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||zh};Yk.prototype.walk=function(c){for(var h,
f=0,m=(this||zh).children.length;f<m;f++)h=(this||zh).children[f],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||zh).source,line:(this||zh).line,column:(this||zh).column,name:(this||zh).name})};Yk.prototype.join=function(c){var h,f=(this||zh).children.length;if(0<f){var m=[];for(h=0;h<f-1;h++)m.push((this||zh).children[h]),m.push(c);m.push((this||zh).children[h]);(this||zh).children=m}return this||zh};Yk.prototype.replaceRight=function(c,h){var f=(this||zh).children[(this||zh).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,h):"string"===typeof f?(this||zh).children[(this||zh).children.length-1]=f.replace(c,h):(this||zh).children.push("".replace(c,h));return this||zh};Yk.prototype.setSourceContent=function(c,h){(this||zh).sourceContents[fH.toSetString(c)]=h};Yk.prototype.walkSourceContents=function(c){for(var h=0,f=(this||zh).children.length;h<f;h++)(this||zh).children[h].$$$isSourceNode$$$&&(this||zh).children[h].walkSourceContents(c);var m=Object.keys((this||zh).sourceContents);
h=0;for(f=m.length;h<f;h++)c(fH.fromSetString(m[h]),(this||zh).sourceContents[m[h]])};Yk.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};Yk.prototype.toStringWithSourceMap=function(c){var h="",f=1,m=0,n=new $e(c),a=!1,d=null,k=null,b=null,e=null;this.walk(function(l,p){h+=l;null!==p.source&&null!==p.line&&null!==p.column?(d===p.source&&k===p.line&&b===p.column&&e===p.name||n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},
name:p.name}),d=p.source,k=p.line,b=p.column,e=p.name,a=!0):a&&(n.addMapping({generated:{line:f,column:m}}),d=null,a=!1);for(var q=0,u=l.length;q<u;q++)10===l.charCodeAt(q)?(f++,m=0,q+1===u?(d=null,a=!1):a&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},name:p.name})):m++});this.walkSourceContents(function(l,p){n.setSourceContent(l,p)});return{code:h,map:n}};var kk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vl=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(ia,
Ca){var Ea="";for(Ca|=0;0<Ca;Ca>>>=1,ia+=ia)Ca&1&&(Ea+=ia);return Ea}function f(ia){var Ca=ia.length;return Ca&&Sb.code.isLineTerminator(ia.charCodeAt(Ca-1))}function m(ia,Ca){for(var Ea in Ca)Ca.hasOwnProperty(Ea)&&(ia[Ea]=Ca[Ea]);return ia}function n(ia,Ca){function Ea(Tc){return"object"===typeof Tc&&Tc instanceof Object&&!(Tc instanceof RegExp)}var jb;for(jb in Ca)if(Ca.hasOwnProperty(jb)){var Mb=Ca[jb];Ea(Mb)?Ea(ia[jb])?n(ia[jb],Mb):ia[jb]=n({},Mb):ia[jb]=Mb}return ia}function a(ia,Ca){return 8232===
(ia&-2)?(Ca?"u":"\\u")+(8232===ia?"2028":"2029"):10===ia||13===ia?(Ca?"":"\\")+(10===ia?"n":"r"):String.fromCharCode(ia)}function d(ia,Ca){if(8===ia)return"\\b";if(12===ia)return"\\f";if(9===ia)return"\\t";var Ea=ia.toString(16).toUpperCase();return F||255<ia?"\\u"+"0000".slice(Ea.length)+Ea:0!==ia||Sb.code.isDecimalDigit(Ca)?11===ia?"\\x0B":"\\x"+"00".slice(Ea.length)+Ea:"\\0"}function k(ia){if(92===ia)return"\\\\";if(10===ia)return"\\n";if(13===ia)return"\\r";if(8232===ia)return"\\u2028";if(8233===
ia)return"\\u2029";throw Error("Incorrectly classified character");}function b(ia){var Ca,Ea="";var jb=0;for(Ca=ia.length;jb<Ca;++jb){var Mb=ia[jb];Ea+=Array.isArray(Mb)?b(Mb):Mb}return Ea}function e(ia,Ca){if(!zb)return Array.isArray(ia)?b(ia):ia;if(null==Ca){if(ia instanceof Y)return ia;Ca={}}return null==Ca.loc?new Y(null,null,zb,ia,Ca.name||null):new Y(Ca.loc.start.line,Ca.loc.start.column,!0===zb?Ca.loc.source||null:zb,ia,Ca.name||null)}function l(){return oa?oa:" "}function p(ia,Ca){var Ea=
e(ia).toString();if(0===Ea.length)return[Ca];var jb=e(Ca).toString();if(0===jb.length)return[ia];Ea=Ea.charCodeAt(Ea.length-1);jb=jb.charCodeAt(0);return(43===Ea||45===Ea)&&Ea===jb||Sb.code.isIdentifierPartES5(Ea)&&Sb.code.isIdentifierPartES5(jb)||47===Ea&&105===jb?[ia,l(),Ca]:Sb.code.isWhiteSpace(Ea)||Sb.code.isLineTerminator(Ea)||Sb.code.isWhiteSpace(jb)||Sb.code.isLineTerminator(jb)?[ia,Ca]:[ia,oa,Ca]}function q(ia){var Ca=na;na+=Ba;ia(na);na=Ca}function u(ia,Ca){if("Line"===ia.type){if(f(ia.value))return"//"+
ia.value;Ca="//"+ia.value;Nb||(Ca+="\n");return Ca}if(ta.format.indent.adjustMultilineComment&&/[\n\r]/.test(ia.value)){var Ea,jb;ia=("/*"+ia.value+"*/").split(/\r\n|[\r\n]/);var Mb=Number.MAX_VALUE;var Tc=1;for(Ea=ia.length;Tc<Ea;++Tc){var Rc=ia[Tc];for(jb=0;jb<Rc.length&&Sb.code.isWhiteSpace(Rc.charCodeAt(jb));)++jb;Mb>jb&&(Mb=jb)}"undefined"!==typeof Ca?(Rc=na,"*"===ia[1][Mb]&&(Ca+=" "),na=Ca):(Mb&1&&--Mb,Rc=na);Tc=1;for(Ea=ia.length;Tc<Ea;++Tc)Ca=e([na,ia[Tc].slice(Mb)]),ia[Tc]=zb?Ca.join(""):
Ca;na=Rc;return ia.join("\n")}return"/*"+ia.value+"*/"}function w(ia,Ca){var Ea;if(ia.leadingComments&&0<ia.leadingComments.length){var jb=Ca;if(Nb){var Mb=ia.leadingComments[0];Ca=[];var Tc=Mb.extendedRange;var Rc=Mb.range;var qc=Ub.substring(Tc[0],Rc[0]);var de=(qc.match(/\n/g)||[]).length;0<de?(Ca.push(h("\n",de)),Ca.push([na,u(Mb)])):(Ca.push(qc),Ca.push(u(Mb)));de=Rc;qc=1;for(Ea=ia.leadingComments.length;qc<Ea;qc++)Mb=ia.leadingComments[qc],Rc=Mb.range,de=Ub.substring(de[1],Rc[0]),de=(de.match(/\n/g)||
[]).length,Ca.push(h("\n",de)),Ca.push([na,u(Mb)]),de=Rc;qc=Ub.substring(Rc[1],Tc[1]);de=(qc.match(/\n/g)||[]).length;Ca.push(h("\n",de))}else for(Mb=ia.leadingComments[0],Ca=[],qa&&ia.type===pc.Program&&0===ia.body.length&&Ca.push("\n"),Ca.push(u(Mb)),f(e(Ca).toString())||Ca.push("\n"),qc=1,Ea=ia.leadingComments.length;qc<Ea;++qc)Mb=ia.leadingComments[qc],Mb=[u(Mb)],f(e(Mb).toString())||Mb.push("\n"),Ca.push([na,Mb]);Ca.push([na,jb])}if(ia.trailingComments)if(Nb)Mb=ia.trailingComments[0],Tc=Mb.extendedRange,
Rc=Mb.range,qc=Ub.substring(Tc[0],Rc[0]),de=(qc.match(/\n/g)||[]).length,0<de?(Ca.push(h("\n",de)),Ca.push([na,u(Mb)])):(Ca.push(qc),Ca.push(u(Mb)));else{jb=!f(e(Ca).toString());qc=e([na,Ca,Ba]).toString();for(Ea=qc.length-1;0<=Ea&&!Sb.code.isLineTerminator(qc.charCodeAt(Ea));--Ea);Tc=h(" ",qc.length-1-Ea);qc=0;for(Ea=ia.trailingComments.length;qc<Ea;++qc)Mb=ia.trailingComments[qc],jb?(Ca=0===qc?[Ca,Ba]:[Ca,Tc],Ca.push(u(Mb,Tc))):Ca=[Ca,[na,u(Mb)]],qc===Ea-1||f(e(Ca).toString())||(Ca=[Ca,"\n"])}return Ca}
function y(ia,Ca,Ea){for(var jb=0;ia<Ca;ia++)"\n"===Ub[ia]&&jb++;for(ia=1;ia<jb;ia++)Ea.push(aa)}function A(ia,Ca,Ea){return Ca<Ea?["(",ia,")"]:ia}function C(ia){var Ca;var Ea=ia.split(/\r\n|\n/);ia=1;for(Ca=Ea.length;ia<Ca;ia++)Ea[ia]=aa+na+Ea[ia];return Ea}function E(){}function L(ia){return e(ia.name,ia)}function I(ia,Ca){return ia.async?"async"+(Ca?l():oa):""}function V(ia){return ia.generator&&!ta.moz.starlessGenerator?"*"+oa:""}function T(ia){var Ca=ia.value,Ea="";Ca.async&&(Ea+=I(Ca,!ia.computed));
Ca.generator&&(Ea+=V(Ca)?"*":"");return Ea}var Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha,zb,Ub,Nb;var Sb=pA;var pc=UO.Syntax;var Eb={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var Lc={"||":Eb.LogicalOR,"&&":Eb.LogicalAND,"|":Eb.BitwiseOR,
"^":Eb.BitwiseXOR,"&":Eb.BitwiseAND,"==":Eb.Equality,"!=":Eb.Equality,"===":Eb.Equality,"!==":Eb.Equality,is:Eb.Equality,isnt:Eb.Equality,"<":Eb.Relational,">":Eb.Relational,"<=":Eb.Relational,">=":Eb.Relational,"in":Eb.Relational,"instanceof":Eb.Relational,"<<":Eb.BitwiseSHIFT,">>":Eb.BitwiseSHIFT,">>>":Eb.BitwiseSHIFT,"+":Eb.Additive,"-":Eb.Additive,"*":Eb.Multiplicative,"%":Eb.Multiplicative,"/":Eb.Multiplicative,"**":Eb.Exponentiation};E.prototype.maybeBlock=function(ia,Ca){var Ea,jb=this||kk;
var Mb=!ta.comment||!ia.leadingComments;if(ia.type===pc.BlockStatement&&Mb)return[oa,this.generateStatement(ia,Ca)];if(ia.type===pc.EmptyStatement&&Mb)return";";q(function(){Ea=[aa,[na,jb.generateStatement(ia,Ca)]]});return Ea};E.prototype.maybeBlockSuffix=function(ia,Ca){var Ea=f(e(Ca).toString());return ia.type!==pc.BlockStatement||ta.comment&&ia.leadingComments||Ea?Ea?[Ca,na]:[Ca,aa,na]:[Ca,oa]};E.prototype.generatePattern=function(ia,Ca,Ea){return ia.type===pc.Identifier?L(ia):this.generateExpression(ia,
Ca,Ea)};E.prototype.generateFunctionParams=function(ia){var Ca;var Ea=!1;if(ia.type!==pc.ArrowFunctionExpression||ia.rest||ia.defaults&&0!==ia.defaults.length||1!==ia.params.length||ia.params[0].type!==pc.Identifier){var jb=ia.type===pc.ArrowFunctionExpression?[I(ia,!1)]:[];jb.push("(");ia.defaults&&(Ea=!0);var Mb=0;for(Ca=ia.params.length;Mb<Ca;++Mb)Ea&&ia.defaults[Mb]?jb.push(this.generateAssignment(ia.params[Mb],ia.defaults[Mb],"=",Eb.Assignment,7)):jb.push(this.generatePattern(ia.params[Mb],Eb.Assignment,
7)),Mb+1<Ca&&jb.push(","+oa);ia.rest&&(ia.params.length&&jb.push(","+oa),jb.push("..."),jb.push(L(ia.rest)));jb.push(")")}else jb=[I(ia,!0),L(ia.params[0])];return jb};E.prototype.generateFunctionBody=function(ia){var Ca=this.generateFunctionParams(ia);ia.type===pc.ArrowFunctionExpression&&(Ca.push(oa),Ca.push("=>"));ia.expression?(Ca.push(oa),ia=this.generateExpression(ia.body,Eb.Assignment,7),"{"===ia.toString().charAt(0)&&(ia=["(",ia,")"]),Ca.push(ia)):Ca.push(this.maybeBlock(ia.body,9));return Ca};
E.prototype.generateIterationForStatement=function(ia,Ca,Ea){var jb=["for"+(Ca.await?l()+"await":"")+oa+"("],Mb=this||kk;q(function(){Ca.left.type===pc.VariableDeclaration?q(function(){jb.push(Ca.left.kind+l());jb.push(Mb.generateStatement(Ca.left.declarations[0],0))}):jb.push(Mb.generateExpression(Ca.left,Eb.Call,7));jb=p(jb,ia);jb=[p(jb,Mb.generateExpression(Ca.right,Eb.Assignment,7)),")"]});jb.push(this.maybeBlock(Ca.body,Ea));return jb};E.prototype.generatePropertyKey=function(ia,Ca){var Ea=[];
Ca&&Ea.push("[");Ea.push(this.generateExpression(ia,Eb.Assignment,7));Ca&&Ea.push("]");return Ea};E.prototype.generateAssignment=function(ia,Ca,Ea,jb,Mb){Eb.Assignment<jb&&(Mb|=1);return A([this.generateExpression(ia,Eb.Call,Mb),oa+Ea+oa,this.generateExpression(Ca,Eb.Assignment,Mb)],Eb.Assignment,jb)};E.prototype.semicolon=function(ia){return!lb&&ia&32?"":";"};E.Statement={BlockStatement:function(ia,Ca){var Ea,jb,Mb=["{",aa],Tc=this||kk;q(function(){0===ia.body.length&&Nb&&(Ea=ia.range,2<Ea[1]-Ea[0]&&
(jb=Ub.substring(Ea[0]+1,Ea[1]-1),"\n"===jb[0]&&(Mb=["{"]),Mb.push(jb)));var Rc;var qc=1;Ca&8&&(qc|=16);var de=0;for(Rc=ia.body.length;de<Rc;++de){Nb&&(0===de&&(ia.body[0].leadingComments&&(Ea=ia.body[0].leadingComments[0].extendedRange,jb=Ub.substring(Ea[0],Ea[1]),"\n"===jb[0]&&(Mb=["{"])),ia.body[0].leadingComments||y(ia.range[0],ia.body[0].range[0],Mb)),0<de&&(ia.body[de-1].trailingComments||ia.body[de].leadingComments||y(ia.body[de-1].range[1],ia.body[de].range[0],Mb)));de===Rc-1&&(qc|=32);var Vd=
ia.body[de].leadingComments&&Nb?Tc.generateStatement(ia.body[de],qc):[na,Tc.generateStatement(ia.body[de],qc)];Mb.push(Vd);f(e(Vd).toString())||(Nb&&de<Rc-1?ia.body[de+1].leadingComments||Mb.push(aa):Mb.push(aa));Nb&&de===Rc-1&&(ia.body[de].trailingComments||y(ia.body[de].range[1],ia.range[1],Mb))}});Mb.push([na,"}"]);return Mb},BreakStatement:function(ia,Ca){return ia.label?"break "+ia.label.name+this.semicolon(Ca):"break"+this.semicolon(Ca)},ContinueStatement:function(ia,Ca){return ia.label?"continue "+
ia.label.name+this.semicolon(Ca):"continue"+this.semicolon(Ca)},ClassBody:function(ia,Ca){var Ea=["{",aa],jb=this||kk;q(function(Mb){var Tc;var Rc=0;for(Tc=ia.body.length;Rc<Tc;++Rc)Ea.push(Mb),Ea.push(jb.generateExpression(ia.body[Rc],Eb.Sequence,7)),Rc+1<Tc&&Ea.push(aa)});f(e(Ea).toString())||Ea.push(aa);Ea.push(na);Ea.push("}");return Ea},ClassDeclaration:function(ia,Ca){Ca=["class"];ia.id&&(Ca=p(Ca,this.generateExpression(ia.id,Eb.Sequence,7)));if(ia.superClass){var Ea=p("extends",this.generateExpression(ia.superClass,
Eb.Unary,7));Ca=p(Ca,Ea)}Ca.push(oa);Ca.push(this.generateStatement(ia.body,33));return Ca},DirectiveStatement:function(ia,Ca){if(ta.raw&&ia.raw)return ia.raw+this.semicolon(Ca);ia=ia.directive;var Ea;var jb="double"===S?'"':"'";var Mb=0;for(Ea=ia.length;Mb<Ea;++Mb){var Tc=ia.charCodeAt(Mb);if(39===Tc){jb='"';break}else if(34===Tc){jb="'";break}else 92===Tc&&++Mb}return jb+ia+jb+this.semicolon(Ca)},DoWhileStatement:function(ia,Ca){var Ea=p("do",this.maybeBlock(ia.body,1));Ea=this.maybeBlockSuffix(ia.body,
Ea);return p(Ea,["while"+oa+"(",this.generateExpression(ia.test,Eb.Sequence,7),")"+this.semicolon(Ca)])},CatchClause:function(ia,Ca){var Ea,jb=this||kk;q(function(){if(ia.param){if(Ea=["catch"+oa+"(",jb.generateExpression(ia.param,Eb.Sequence,7),")"],ia.guard){var Mb=jb.generateExpression(ia.guard,Eb.Sequence,7);Ea.splice(2,0," if ",Mb)}}else Ea=["catch"]});Ea.push(this.maybeBlock(ia.body,1));return Ea},DebuggerStatement:function(ia,Ca){return"debugger"+this.semicolon(Ca)},EmptyStatement:function(ia,
Ca){return";"},ExportDefaultDeclaration:function(ia,Ca){var Ea=["export"];var jb=Ca&32?33:1;Ea=p(Ea,"default");return Ea=E.Statement.hasOwnProperty(ia.declaration.type)?p(Ea,this.generateStatement(ia.declaration,jb)):p(Ea,this.generateExpression(ia.declaration,Eb.Assignment,7)+this.semicolon(Ca))},ExportNamedDeclaration:function(ia,Ca){var Ea=["export"],jb=this||kk;var Mb=Ca&32?33:1;if(ia.declaration)return p(Ea,this.generateStatement(ia.declaration,Mb));ia.specifiers&&(0===ia.specifiers.length?Ea=
p(Ea,"{"+oa+"}"):ia.specifiers[0].type===pc.ExportBatchSpecifier?Ea=p(Ea,this.generateExpression(ia.specifiers[0],Eb.Sequence,7)):(Ea=p(Ea,"{"),q(function(Tc){var Rc;Ea.push(aa);var qc=0;for(Rc=ia.specifiers.length;qc<Rc;++qc)Ea.push(Tc),Ea.push(jb.generateExpression(ia.specifiers[qc],Eb.Sequence,7)),qc+1<Rc&&Ea.push(","+aa)}),f(e(Ea).toString())||Ea.push(aa),Ea.push(na+"}")),ia.source?Ea=p(Ea,["from"+oa,this.generateExpression(ia.source,Eb.Sequence,7),this.semicolon(Ca)]):Ea.push(this.semicolon(Ca)));
return Ea},ExportAllDeclaration:function(ia,Ca){return["export"+oa,"*"+oa,"from"+oa,this.generateExpression(ia.source,Eb.Sequence,7),this.semicolon(Ca)]},ExpressionStatement:function(ia,Ca){function Ea(qc){if("class"!==qc.slice(0,5))return!1;qc=qc.charCodeAt(5);return 123===qc||Sb.code.isWhiteSpace(qc)||Sb.code.isLineTerminator(qc)}function jb(qc){if("function"!==qc.slice(0,8))return!1;qc=qc.charCodeAt(8);return 40===qc||Sb.code.isWhiteSpace(qc)||42===qc||Sb.code.isLineTerminator(qc)}function Mb(qc){var de;
if("async"!==qc.slice(0,5)||!Sb.code.isWhiteSpace(qc.charCodeAt(5)))return!1;var Vd=6;for(de=qc.length;Vd<de&&Sb.code.isWhiteSpace(qc.charCodeAt(Vd));++Vd);if(Vd===de||"function"!==qc.slice(Vd,Vd+8))return!1;qc=qc.charCodeAt(Vd+8);return 40===qc||Sb.code.isWhiteSpace(qc)||42===qc||Sb.code.isLineTerminator(qc)}var Tc=[this.generateExpression(ia.expression,Eb.Sequence,7)];var Rc=e(Tc).toString();123===Rc.charCodeAt(0)||Ea(Rc)||jb(Rc)||Mb(Rc)||ja&&Ca&16&&ia.expression.type===pc.Literal&&"string"===typeof ia.expression.value?
Tc=["(",Tc,")"+this.semicolon(Ca)]:Tc.push(this.semicolon(Ca));return Tc},ImportDeclaration:function(ia,Ca){var Ea=this||kk;if(0===ia.specifiers.length)return["import",oa,this.generateExpression(ia.source,Eb.Sequence,7),this.semicolon(Ca)];var jb=["import"];var Mb=0;ia.specifiers[Mb].type===pc.ImportDefaultSpecifier&&(jb=p(jb,[this.generateExpression(ia.specifiers[Mb],Eb.Sequence,7)]),++Mb);ia.specifiers[Mb]&&(0!==Mb&&jb.push(","),ia.specifiers[Mb].type===pc.ImportNamespaceSpecifier?jb=p(jb,[oa,this.generateExpression(ia.specifiers[Mb],
Eb.Sequence,7)]):(jb.push(oa+"{"),1===ia.specifiers.length-Mb?(jb.push(oa),jb.push(this.generateExpression(ia.specifiers[Mb],Eb.Sequence,7)),jb.push(oa+"}"+oa)):(q(function(Tc){var Rc;jb.push(aa);var qc=Mb;for(Rc=ia.specifiers.length;qc<Rc;++qc)jb.push(Tc),jb.push(Ea.generateExpression(ia.specifiers[qc],Eb.Sequence,7)),qc+1<Rc&&jb.push(","+aa)}),f(e(jb).toString())||jb.push(aa),jb.push(na+"}"+oa))));return jb=p(jb,["from"+oa,this.generateExpression(ia.source,Eb.Sequence,7),this.semicolon(Ca)])},VariableDeclarator:function(ia,
Ca){Ca=Ca&1?7:6;return ia.init?[this.generateExpression(ia.id,Eb.Assignment,Ca),oa,"=",oa,this.generateExpression(ia.init,Eb.Assignment,Ca)]:this.generatePattern(ia.id,Eb.Assignment,Ca)},VariableDeclaration:function(ia,Ca){function Ea(){Tc=ia.declarations[0];ta.comment&&Tc.leadingComments?(qc.push("\n"),qc.push([na,Rc.generateStatement(Tc,de)])):(qc.push(l()),qc.push(Rc.generateStatement(Tc,de)));jb=1;for(Mb=ia.declarations.length;jb<Mb;++jb)Tc=ia.declarations[jb],ta.comment&&Tc.leadingComments?(qc.push(","+
aa),qc.push([na,Rc.generateStatement(Tc,de)])):(qc.push(","+oa),qc.push(Rc.generateStatement(Tc,de)))}var jb,Mb,Tc,Rc=this||kk;var qc=[ia.kind];var de=Ca&1?1:0;1<ia.declarations.length?q(Ea):Ea();qc.push(this.semicolon(Ca));return qc},ThrowStatement:function(ia,Ca){return[p("throw",this.generateExpression(ia.argument,Eb.Sequence,7)),this.semicolon(Ca)]},TryStatement:function(ia,Ca){var Ea;Ca=["try",this.maybeBlock(ia.block,1)];Ca=this.maybeBlockSuffix(ia.block,Ca);if(ia.handlers){var jb=0;for(Ea=
ia.handlers.length;jb<Ea;++jb)if(Ca=p(Ca,this.generateStatement(ia.handlers[jb],1)),ia.finalizer||jb+1!==Ea)Ca=this.maybeBlockSuffix(ia.handlers[jb].body,Ca)}else{var Mb=ia.guardedHandlers||[];jb=0;for(Ea=Mb.length;jb<Ea;++jb)if(Ca=p(Ca,this.generateStatement(Mb[jb],1)),ia.finalizer||jb+1!==Ea)Ca=this.maybeBlockSuffix(Mb[jb].body,Ca);if(ia.handler)if(Array.isArray(ia.handler))for(jb=0,Ea=ia.handler.length;jb<Ea;++jb){if(Ca=p(Ca,this.generateStatement(ia.handler[jb],1)),ia.finalizer||jb+1!==Ea)Ca=
this.maybeBlockSuffix(ia.handler[jb].body,Ca)}else Ca=p(Ca,this.generateStatement(ia.handler,1)),ia.finalizer&&(Ca=this.maybeBlockSuffix(ia.handler.body,Ca))}ia.finalizer&&(Ca=p(Ca,["finally",this.maybeBlock(ia.finalizer,1)]));return Ca},SwitchStatement:function(ia,Ca){var Ea,jb,Mb=this||kk;q(function(){Ea=["switch"+oa+"(",Mb.generateExpression(ia.discriminant,Eb.Sequence,7),")"+oa+"{"+aa]});if(ia.cases){var Tc=1;var Rc=0;for(jb=ia.cases.length;Rc<jb;++Rc)Rc===jb-1&&(Tc|=32),Ca=[na,this.generateStatement(ia.cases[Rc],
Tc)],Ea.push(Ca),f(e(Ca).toString())||Ea.push(aa)}Ea.push([na,"}"]);return Ea},SwitchCase:function(ia,Ca){var Ea,jb,Mb,Tc,Rc,qc=this||kk;q(function(){Ea=ia.test?[p("case",qc.generateExpression(ia.test,Eb.Sequence,7)),":"]:["default:"];Mb=0;(Tc=ia.consequent.length)&&ia.consequent[0].type===pc.BlockStatement&&(jb=qc.maybeBlock(ia.consequent[0],1),Ea.push(jb),Mb=1);Mb===Tc||f(e(Ea).toString())||Ea.push(aa);for(Rc=1;Mb<Tc;++Mb)Mb===Tc-1&&Ca&32&&(Rc|=32),jb=[na,qc.generateStatement(ia.consequent[Mb],
Rc)],Ea.push(jb),Mb+1===Tc||f(e(jb).toString())||Ea.push(aa)});return Ea},IfStatement:function(ia,Ca){var Ea=this||kk;q(function(){Mb=["if"+oa+"(",Ea.generateExpression(ia.test,Eb.Sequence,7),")"]});var jb=1;Ca&32&&(jb|=32);if(ia.alternate){Mb.push(this.maybeBlock(ia.consequent,1));var Mb=this.maybeBlockSuffix(ia.consequent,Mb);Mb=ia.alternate.type===pc.IfStatement?p(Mb,["else ",this.generateStatement(ia.alternate,jb)]):p(Mb,p("else",this.maybeBlock(ia.alternate,jb)))}else Mb.push(this.maybeBlock(ia.consequent,
jb));return Mb},ForStatement:function(ia,Ca){var Ea,jb=this||kk;q(function(){Ea=["for"+oa+"("];ia.init?ia.init.type===pc.VariableDeclaration?Ea.push(jb.generateStatement(ia.init,0)):(Ea.push(jb.generateExpression(ia.init,Eb.Sequence,6)),Ea.push(";")):Ea.push(";");ia.test&&(Ea.push(oa),Ea.push(jb.generateExpression(ia.test,Eb.Sequence,7)));Ea.push(";");ia.update&&(Ea.push(oa),Ea.push(jb.generateExpression(ia.update,Eb.Sequence,7)));Ea.push(")")});Ea.push(this.maybeBlock(ia.body,Ca&32?33:1));return Ea},
ForInStatement:function(ia,Ca){return this.generateIterationForStatement("in",ia,Ca&32?33:1)},ForOfStatement:function(ia,Ca){return this.generateIterationForStatement("of",ia,Ca&32?33:1)},LabeledStatement:function(ia,Ca){return[ia.label.name+":",this.maybeBlock(ia.body,Ca&32?33:1)]},Program:function(ia,Ca){var Ea;var jb=ia.body.length;Ca=[qa&&0<jb?"\n":""];var Mb=17;for(Ea=0;Ea<jb;++Ea){qa||Ea!==jb-1||(Mb|=32);Nb&&(0===Ea&&(ia.body[0].leadingComments||y(ia.range[0],ia.body[Ea].range[0],Ca)),0<Ea&&
(ia.body[Ea-1].trailingComments||ia.body[Ea].leadingComments||y(ia.body[Ea-1].range[1],ia.body[Ea].range[0],Ca)));var Tc=[na,this.generateStatement(ia.body[Ea],Mb)];Ca.push(Tc);Ea+1<jb&&!f(e(Tc).toString())&&(Nb?ia.body[Ea+1].leadingComments||Ca.push(aa):Ca.push(aa));Nb&&Ea===jb-1&&(ia.body[Ea].trailingComments||y(ia.body[Ea].range[1],ia.range[1],Ca))}return Ca},FunctionDeclaration:function(ia,Ca){return[I(ia,!0),"function",V(ia)||l(),ia.id?L(ia.id):"",this.generateFunctionBody(ia)]},ReturnStatement:function(ia,
Ca){return ia.argument?[p("return",this.generateExpression(ia.argument,Eb.Sequence,7)),this.semicolon(Ca)]:["return"+this.semicolon(Ca)]},WhileStatement:function(ia,Ca){var Ea,jb=this||kk;q(function(){Ea=["while"+oa+"(",jb.generateExpression(ia.test,Eb.Sequence,7),")"]});Ea.push(this.maybeBlock(ia.body,Ca&32?33:1));return Ea},WithStatement:function(ia,Ca){var Ea,jb=this||kk;q(function(){Ea=["with"+oa+"(",jb.generateExpression(ia.object,Eb.Sequence,7),")"]});Ea.push(this.maybeBlock(ia.body,Ca&32?33:
1));return Ea}};m(E.prototype,E.Statement);E.Expression={SequenceExpression:function(ia,Ca,Ea){var jb;Eb.Sequence<Ca&&(Ea|=1);var Mb=[];var Tc=0;for(jb=ia.expressions.length;Tc<jb;++Tc)Mb.push(this.generateExpression(ia.expressions[Tc],Eb.Assignment,Ea)),Tc+1<jb&&Mb.push(","+oa);return A(Mb,Eb.Sequence,Ca)},AssignmentExpression:function(ia,Ca,Ea){return this.generateAssignment(ia.left,ia.right,ia.operator,Ca,Ea)},ArrowFunctionExpression:function(ia,Ca,Ea){return A(this.generateFunctionBody(ia),Eb.ArrowFunction,
Ca)},ConditionalExpression:function(ia,Ca,Ea){Eb.Conditional<Ca&&(Ea|=1);return A([this.generateExpression(ia.test,Eb.LogicalOR,Ea),oa+"?"+oa,this.generateExpression(ia.consequent,Eb.Assignment,Ea),oa+":"+oa,this.generateExpression(ia.alternate,Eb.Assignment,Ea)],Eb.Conditional,Ca)},LogicalExpression:function(ia,Ca,Ea){return this.BinaryExpression(ia,Ca,Ea)},BinaryExpression:function(ia,Ca,Ea){var jb=Lc[ia.operator];var Mb="**"===ia.operator?Eb.Postfix:jb;var Tc="**"===ia.operator?jb:jb+1;jb<Ca&&
(Ea|=1);Mb=this.generateExpression(ia.left,Mb,Ea);var Rc=Mb.toString();Rc=47===Rc.charCodeAt(Rc.length-1)&&Sb.code.isIdentifierPartES5(ia.operator.charCodeAt(0))?[Mb,l(),ia.operator]:p(Mb,ia.operator);Mb=this.generateExpression(ia.right,Tc,Ea);"/"===ia.operator&&"/"===Mb.toString().charAt(0)||"<"===ia.operator.slice(-1)&&"!--"===Mb.toString().slice(0,3)?(Rc.push(l()),Rc.push(Mb)):Rc=p(Rc,Mb);return"in"!==ia.operator||Ea&1?A(Rc,jb,Ca):["(",Rc,")"]},CallExpression:function(ia,Ca,Ea){var jb;var Mb=[this.generateExpression(ia.callee,
Eb.Call,3)];ia.optional&&Mb.push("?.");Mb.push("(");var Tc=0;for(jb=ia.arguments.length;Tc<jb;++Tc)Mb.push(this.generateExpression(ia.arguments[Tc],Eb.Assignment,7)),Tc+1<jb&&Mb.push(","+oa);Mb.push(")");return Ea&2?A(Mb,Eb.Call,Ca):["(",Mb,")"]},ChainExpression:function(ia,Ca,Ea){Eb.OptionalChaining<Ca&&(Ea|=2);ia=this.generateExpression(ia.expression,Eb.OptionalChaining,Ea);return A(ia,Eb.OptionalChaining,Ca)},NewExpression:function(ia,Ca,Ea){var jb=ia.arguments.length;var Mb=p("new",this.generateExpression(ia.callee,
Eb.New,Ea&4&&!Va&&0===jb?5:1));if(!(Ea&4)||Va||0<jb){Mb.push("(");for(Ea=0;Ea<jb;++Ea)Mb.push(this.generateExpression(ia.arguments[Ea],Eb.Assignment,7)),Ea+1<jb&&Mb.push(","+oa);Mb.push(")")}return A(Mb,Eb.New,Ca)},MemberExpression:function(ia,Ca,Ea){var jb=[this.generateExpression(ia.object,Eb.Call,Ea&2?3:1)];ia.computed?(ia.optional&&jb.push("?."),jb.push("["),jb.push(this.generateExpression(ia.property,Eb.Sequence,Ea&2?7:5)),jb.push("]")):(ia.optional||ia.object.type!==pc.Literal||"number"!==typeof ia.object.value||
(Ea=e(jb).toString(),0>Ea.indexOf(".")&&!/[eExX]/.test(Ea)&&Sb.code.isDecimalDigit(Ea.charCodeAt(Ea.length-1))&&!(2<=Ea.length&&48===Ea.charCodeAt(0))&&jb.push(" ")),jb.push(ia.optional?"?.":"."),jb.push(L(ia.property)));return A(jb,Eb.Member,Ca)},MetaProperty:function(ia,Ca,Ea){Ea=[];Ea.push("string"===typeof ia.meta?ia.meta:L(ia.meta));Ea.push(".");Ea.push("string"===typeof ia.property?ia.property:L(ia.property));return A(Ea,Eb.Member,Ca)},UnaryExpression:function(ia,Ca,Ea){var jb=this.generateExpression(ia.argument,
Eb.Unary,7);if(""===oa)Ea=p(ia.operator,jb);else if(Ea=[ia.operator],2<ia.operator.length)Ea=p(Ea,jb);else{ia=e(Ea).toString();var Mb=ia.charCodeAt(ia.length-1);ia=jb.toString().charCodeAt(0);((43===Mb||45===Mb)&&Mb===ia||Sb.code.isIdentifierPartES5(Mb)&&Sb.code.isIdentifierPartES5(ia))&&Ea.push(l());Ea.push(jb)}return A(Ea,Eb.Unary,Ca)},YieldExpression:function(ia,Ca,Ea){Ea=ia.delegate?"yield*":"yield";ia.argument&&(Ea=p(Ea,this.generateExpression(ia.argument,Eb.Yield,7)));return A(Ea,Eb.Yield,Ca)},
AwaitExpression:function(ia,Ca,Ea){ia=p(ia.all?"await*":"await",this.generateExpression(ia.argument,Eb.Await,7));return A(ia,Eb.Await,Ca)},UpdateExpression:function(ia,Ca,Ea){return ia.prefix?A([ia.operator,this.generateExpression(ia.argument,Eb.Unary,7)],Eb.Unary,Ca):A([this.generateExpression(ia.argument,Eb.Postfix,7),ia.operator],Eb.Postfix,Ca)},FunctionExpression:function(ia,Ca,Ea){Ca=[I(ia,!0),"function"];ia.id?(Ca.push(V(ia)||l()),Ca.push(L(ia.id))):Ca.push(V(ia)||oa);Ca.push(this.generateFunctionBody(ia));
return Ca},ArrayPattern:function(ia,Ca,Ea){return this.ArrayExpression(ia,Ca,Ea,!0)},ArrayExpression:function(ia,Ca,Ea,jb){var Mb=this||kk;if(!ia.elements.length)return"[]";var Tc=jb?!1:1<ia.elements.length;var Rc=["[",Tc?aa:""];q(function(qc){var de;var Vd=0;for(de=ia.elements.length;Vd<de;++Vd)ia.elements[Vd]?(Rc.push(Tc?qc:""),Rc.push(Mb.generateExpression(ia.elements[Vd],Eb.Assignment,7))):(Tc&&Rc.push(qc),Vd+1===de&&Rc.push(",")),Vd+1<de&&Rc.push(","+(Tc?aa:oa))});Tc&&!f(e(Rc).toString())&&Rc.push(aa);
Rc.push(Tc?na:"");Rc.push("]");return Rc},RestElement:function(ia,Ca,Ea){return"..."+this.generatePattern(ia.argument)},ClassExpression:function(ia,Ca,Ea){Ca=["class"];ia.id&&(Ca=p(Ca,this.generateExpression(ia.id,Eb.Sequence,7)));ia.superClass&&(Ea=p("extends",this.generateExpression(ia.superClass,Eb.Unary,7)),Ca=p(Ca,Ea));Ca.push(oa);Ca.push(this.generateStatement(ia.body,33));return Ca},MethodDefinition:function(ia,Ca,Ea){Ca=ia["static"]?["static"+oa]:[];ia="get"===ia.kind||"set"===ia.kind?[p(ia.kind,
this.generatePropertyKey(ia.key,ia.computed)),this.generateFunctionBody(ia.value)]:[T(ia),this.generatePropertyKey(ia.key,ia.computed),this.generateFunctionBody(ia.value)];return p(Ca,ia)},Property:function(ia,Ca,Ea){return"get"===ia.kind||"set"===ia.kind?[ia.kind,l(),this.generatePropertyKey(ia.key,ia.computed),this.generateFunctionBody(ia.value)]:ia.shorthand?"AssignmentPattern"===ia.value.type?this.AssignmentPattern(ia.value,Eb.Sequence,7):this.generatePropertyKey(ia.key,ia.computed):ia.method?
[T(ia),this.generatePropertyKey(ia.key,ia.computed),this.generateFunctionBody(ia.value)]:[this.generatePropertyKey(ia.key,ia.computed),":"+oa,this.generateExpression(ia.value,Eb.Assignment,7)]},ObjectExpression:function(ia,Ca,Ea){var jb,Mb,Tc=this||kk;if(!ia.properties.length)return"{}";var Rc=1<ia.properties.length;q(function(){Mb=Tc.generateExpression(ia.properties[0],Eb.Sequence,7)});if(!Rc&&!/[\r\n]/g.test(e(Mb).toString()))return["{",oa,Mb,oa,"}"];q(function(qc){var de;jb=["{",aa,qc,Mb];if(Rc){jb.push(","+
aa);var Vd=1;for(de=ia.properties.length;Vd<de;++Vd)jb.push(qc),jb.push(Tc.generateExpression(ia.properties[Vd],Eb.Sequence,7)),Vd+1<de&&jb.push(","+aa)}});f(e(jb).toString())||jb.push(aa);jb.push(na);jb.push("}");return jb},AssignmentPattern:function(ia,Ca,Ea){return this.generateAssignment(ia.left,ia.right,"=",Ca,Ea)},ObjectPattern:function(ia,Ca,Ea){var jb=this||kk;if(!ia.properties.length)return"{}";var Mb=!1;if(1===ia.properties.length){var Tc=ia.properties[0];Tc.type===pc.Property&&Tc.value.type!==
pc.Identifier&&(Mb=!0)}else for(Ca=0,Ea=ia.properties.length;Ca<Ea;++Ca)if(Tc=ia.properties[Ca],Tc.type===pc.Property&&!Tc.shorthand){Mb=!0;break}var Rc=["{",Mb?aa:""];q(function(qc){var de;var Vd=0;for(de=ia.properties.length;Vd<de;++Vd)Rc.push(Mb?qc:""),Rc.push(jb.generateExpression(ia.properties[Vd],Eb.Sequence,7)),Vd+1<de&&Rc.push(","+(Mb?aa:oa))});Mb&&!f(e(Rc).toString())&&Rc.push(aa);Rc.push(Mb?na:"");Rc.push("}");return Rc},ThisExpression:function(ia,Ca,Ea){return"this"},Super:function(ia,
Ca,Ea){return"super"},Identifier:function(ia,Ca,Ea){return L(ia)},ImportDefaultSpecifier:function(ia,Ca,Ea){return L(ia.id||ia.local)},ImportNamespaceSpecifier:function(ia,Ca,Ea){Ca=["*"];(ia=ia.id||ia.local)&&Ca.push(oa+"as"+l()+L(ia));return Ca},ImportSpecifier:function(ia,Ca,Ea){Ca=ia.imported;Ea=[Ca.name];(ia=ia.local)&&ia.name!==Ca.name&&Ea.push(l()+"as"+l()+L(ia));return Ea},ExportSpecifier:function(ia,Ca,Ea){Ca=ia.local;Ea=[Ca.name];(ia=ia.exported)&&ia.name!==Ca.name&&Ea.push(l()+"as"+l()+
L(ia));return Ea},Literal:function(ia,Ca,Ea){if(ia.hasOwnProperty("raw")&&Ha&&ta.raw)try{var jb=Ha(ia.raw).body[0].expression;if(jb.type===pc.Literal&&jb.value===ia.value)return ia.raw}catch(Vd){}if(ia.regex)return"/"+ia.regex.pattern+"/"+ia.regex.flags;if(null===ia.value)return"null";if("string"===typeof ia.value){ia=ia.value;Ca="";var Mb=0,Tc=0,Rc;Ea=0;for(jb=ia.length;Ea<jb;++Ea){var qc=ia.charCodeAt(Ea);if(39===qc)++Mb;else if(34===qc)++Tc;else if(47===qc&&F)Ca+="\\";else if(Sb.code.isLineTerminator(qc)||
92===qc){Ca+=k(qc);continue}else if(!Sb.code.isIdentifierPartES5(qc)&&(F&&32>qc||!F&&!fa&&(32>qc||126<qc))){Ca+=d(qc,ia.charCodeAt(Ea+1));continue}Ca+=String.fromCharCode(qc)}var de=(Rc=!("double"===S||"auto"===S&&Tc<Mb))?"'":'"';if(Rc?Mb:Tc){ia=Ca;Ca=de;Ea=0;for(jb=ia.length;Ea<jb;++Ea){qc=ia.charCodeAt(Ea);if(39===qc&&Rc||34===qc&&!Rc)Ca+="\\";Ca+=String.fromCharCode(qc)}ia=Ca+de}else ia=de+Ca+de;return ia}if("number"===typeof ia.value){ia=ia.value;if(ia!==ia)throw Error("Numeric literal whose value is NaN");
if(0>ia||0===ia&&0>1/ia)throw Error("Numeric literal whose value is negative");if(ia===1/0)ia=F?"null":W?"1e400":"1e+400";else{Ca=""+ia;if(W&&!(3>Ca.length)){Ea=Ca.indexOf(".");F||48!==Ca.charCodeAt(0)||1!==Ea||(Ea=0,Ca=Ca.slice(1));jb=Ca;Ca=Ca.replace("e+","e");qc=0;0<(Mb=jb.indexOf("e"))&&(qc=+jb.slice(Mb+1),jb=jb.slice(0,Mb));0<=Ea&&(qc-=jb.length-Ea-1,jb=+(jb.slice(0,Ea)+jb.slice(Ea+1))+"");for(Mb=0;48===jb.charCodeAt(jb.length+Mb-1);)--Mb;0!==Mb&&(qc-=Mb,jb=jb.slice(0,Mb));0!==qc&&(jb+="e"+qc);
(jb.length<Ca.length||P&&1E12<ia&&Math.floor(ia)===ia&&(jb="0x"+ia.toString(16)).length<Ca.length)&&+jb===ia&&(Ca=jb)}ia=Ca}return ia}if("boolean"===typeof ia.value)return ia.value?"true":"false";ia=ia.value;Ca=ia.toString();if(ia.source)if(Ea=Ca.match(/\/([^/]*)$/)){Ea=Ea[1];Ca="";Rc=Tc=!1;jb=0;for(qc=ia.source.length;jb<qc;++jb)Mb=ia.source.charCodeAt(jb),Rc?(Ca+=a(Mb,Rc),Rc=!1):(Tc?93===Mb&&(Tc=!1):47===Mb?Ca+="\\":91===Mb&&(Tc=!0),Ca+=a(Mb,Rc),Rc=92===Mb);ia="/"+Ca+"/"+Ea}else ia=Ca;else ia=Ca;
return ia},GeneratorExpression:function(ia,Ca,Ea){return this.ComprehensionExpression(ia,Ca,Ea)},ComprehensionExpression:function(ia,Ca,Ea){var jb,Mb,Tc=this||kk;var Rc=ia.type===pc.GeneratorExpression?["("]:["["];if(ta.moz.comprehensionExpressionStartsWithAssignment){var qc=this.generateExpression(ia.body,Eb.Assignment,7);Rc.push(qc)}ia.blocks&&q(function(){jb=0;for(Mb=ia.blocks.length;jb<Mb;++jb)qc=Tc.generateExpression(ia.blocks[jb],Eb.Sequence,7),0<jb||ta.moz.comprehensionExpressionStartsWithAssignment?
Rc=p(Rc,qc):Rc.push(qc)});ia.filter&&(Rc=p(Rc,"if"+oa),qc=this.generateExpression(ia.filter,Eb.Sequence,7),Rc=p(Rc,["(",qc,")"]));ta.moz.comprehensionExpressionStartsWithAssignment||(qc=this.generateExpression(ia.body,Eb.Assignment,7),Rc=p(Rc,qc));Rc.push(ia.type===pc.GeneratorExpression?")":"]");return Rc},ComprehensionBlock:function(ia,Ca,Ea){Ca=ia.left.type===pc.VariableDeclaration?[ia.left.kind,l(),this.generateStatement(ia.left.declarations[0],0)]:this.generateExpression(ia.left,Eb.Call,7);Ca=
p(Ca,ia.of?"of":"in");Ca=p(Ca,this.generateExpression(ia.right,Eb.Sequence,7));return["for"+oa+"(",Ca,")"]},SpreadElement:function(ia,Ca,Ea){return["...",this.generateExpression(ia.argument,Eb.Assignment,7)]},TaggedTemplateExpression:function(ia,Ca,Ea){var jb=3;Ea&2||(jb=1);ia=[this.generateExpression(ia.tag,Eb.Call,jb),this.generateExpression(ia.quasi,Eb.Primary,4)];return A(ia,Eb.TaggedTemplate,Ca)},TemplateElement:function(ia,Ca,Ea){return ia.value.raw},TemplateLiteral:function(ia,Ca,Ea){var jb;
Ca=["`"];Ea=0;for(jb=ia.quasis.length;Ea<jb;++Ea)Ca.push(this.generateExpression(ia.quasis[Ea],Eb.Primary,7)),Ea+1<jb&&(Ca.push("${"+oa),Ca.push(this.generateExpression(ia.expressions[Ea],Eb.Sequence,7)),Ca.push(oa+"}"));Ca.push("`");return Ca},ModuleSpecifier:function(ia,Ca,Ea){return this.Literal(ia,Ca,Ea)},ImportExpression:function(ia,Ca,Ea){return A(["import(",this.generateExpression(ia.source,Eb.Assignment,7),")"],Eb.Call,Ca)}};m(E.prototype,E.Expression);E.prototype.generateExpression=function(ia,
Ca,Ea){var jb=ia.type||pc.Property;if(ta.verbatim&&ia.hasOwnProperty(ta.verbatim))return jb=ia[ta.verbatim],"string"===typeof jb?Ea=A(C(jb),Eb.Sequence,Ca):(Ea=C(jb.content),jb=null!=jb.precedence?jb.precedence:Eb.Sequence,Ea=A(Ea,jb,Ca)),e(Ea,ia);Ca=this[jb](ia,Ca,Ea);ta.comment&&(Ca=w(ia,Ca));return e(Ca,ia)};E.prototype.generateStatement=function(ia,Ca){Ca=this[ia.type](ia,Ca);ta.comment&&(Ca=w(ia,Ca));var Ea=e(Ca).toString();ia.type!==pc.Program||qa||""!==aa||"\n"!==Ea.charAt(Ea.length-1)||(Ca=
zb?e(Ca).replaceRight(/\s+$/,""):Ea.replace(/\s+$/,""));return e(Ca,ia)};var dd=c().format;vl.version="2.0.0";vl.generate=function(ia,Ca){var Ea=c();null!=Ca?("string"===typeof Ca.indent&&(Ea.format.indent.style=Ca.indent),"number"===typeof Ca.base&&(Ea.format.indent.base=Ca.base),Ca=n(Ea,Ca),Ba=Ca.format.indent.style,na="string"===typeof Ca.base?Ca.base:h(Ba,Ca.format.indent.base)):(Ca=Ea,Ba=Ca.format.indent.style,na=h(Ba,Ca.format.indent.base));F=Ca.format.json;W=Ca.format.renumber;P=F?!1:Ca.format.hexadecimal;
S=F?"double":Ca.format.quotes;fa=Ca.format.escapeless;aa=Ca.format.newline;oa=Ca.format.space;Ca.format.compact&&(aa=oa=Ba=na="");Va=Ca.format.parentheses;lb=Ca.format.semicolons;qa=Ca.format.safeConcatenation;ja=Ca.directive;Ha=F?null:Ca.parse;zb=Ca.sourceMap;Ub=Ca.sourceCode;Nb=Ca.format.preserveBlankLines&&null!==Ub;ta=Ca;zb&&(Y=vl.browser?kk.sourceMap.SourceNode:Yk);Ea=new E;if(E.Statement.hasOwnProperty(ia.type))ia=Ea.generateStatement(ia,1);else if(E.Expression.hasOwnProperty(ia.type))ia=Ea.generateExpression(ia,
Eb.Sequence,7);else throw Error("Unknown node type: "+ia.type);if(!zb)return ia={code:ia.toString(),map:null},Ca.sourceMapWithCode?ia:ia.code;ia=ia.toStringWithSourceMap({file:Ca.file,sourceRoot:Ca.sourceMapRoot});Ca.sourceContent&&ia.map.setSourceContent(Ca.sourceMap,Ca.sourceContent);return Ca.sourceMapWithCode?ia:ia.map.toString()};vl.attachComments=UO.attachComments;vl.Precedence=n({},Eb);vl.browser=!1;vl.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};vl.FORMAT_DEFAULTS=dd})();var wda=Object.freeze({__proto__:null,"default":vl,FORMAT_DEFAULTS:vl.FORMAT_DEFAULTS,FORMAT_MINIFY:vl.FORMAT_MINIFY,Precedence:vl.Precedence,attachComments:vl.attachComments,browser:vl.browser,generate:vl.generate,version:vl.version}),qm=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");qm.stringify=Yi;qm.obj=df;qm.escodegen=wda;qm.es=qm.escodegen.escodegen||qm.escodegen;var kx=qm.es;qm.escodegen=kx;qm.es=kx;qm.default=
Yi;var YO={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},xda={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},yda=/^in(stanceof)?$/,ZO="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
Q0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
E6=new RegExp("["+ZO+"]"),F6=new RegExp("["+ZO+Q0+"]");ZO=Q0=null;var cS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],G6=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],Vh=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},sn={beforeExpr:!0},Fm={startsExpr:!0},XB={},Hb={num:new Vh("num",Fm),regexp:new Vh("regexp",Fm),string:new Vh("string",Fm),name:new Vh("name",Fm),eof:new Vh("eof"),bracketL:new Vh("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new Vh("]"),braceL:new Vh("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Vh("}"),parenL:new Vh("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Vh(")"),comma:new Vh(",",sn),semi:new Vh(";",sn),colon:new Vh(":",sn),dot:new Vh("."),question:new Vh("?",sn),questionDot:new Vh("?."),arrow:new Vh("=>",sn),template:new Vh("template"),invalidTemplate:new Vh("invalidTemplate"),ellipsis:new Vh("...",sn),backQuote:new Vh("`",Fm),dollarBraceL:new Vh("${",{beforeExpr:!0,startsExpr:!0}),eq:new Vh("=",{beforeExpr:!0,
isAssign:!0}),assign:new Vh("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Vh("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Vh("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Vm("||",1),logicalAND:Vm("&&",2),bitwiseOR:Vm("|",3),bitwiseXOR:Vm("^",4),bitwiseAND:Vm("&",5),equality:Vm("==/!=/===/!==",6),relational:Vm("</>/<=/>=",7),bitShift:Vm("<</>>/>>>",8),plusMin:new Vh("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Vm("%",10),star:Vm("*",10),slash:Vm("/",10),starstar:new Vh("**",
{beforeExpr:!0}),coalesce:Vm("??",1),_break:Gh("break"),_case:Gh("case",sn),_catch:Gh("catch"),_continue:Gh("continue"),_debugger:Gh("debugger"),_default:Gh("default",sn),_do:Gh("do",{isLoop:!0,beforeExpr:!0}),_else:Gh("else",sn),_finally:Gh("finally"),_for:Gh("for",{isLoop:!0}),_function:Gh("function",Fm),_if:Gh("if"),_return:Gh("return",sn),_switch:Gh("switch"),_throw:Gh("throw",sn),_try:Gh("try"),_var:Gh("var"),_const:Gh("const"),_while:Gh("while",{isLoop:!0}),_with:Gh("with"),_new:Gh("new",{beforeExpr:!0,
startsExpr:!0}),_this:Gh("this",Fm),_super:Gh("super",Fm),_class:Gh("class",Fm),_extends:Gh("extends",sn),_export:Gh("export"),_import:Gh("import",Fm),_null:Gh("null",Fm),_true:Gh("true",Fm),_false:Gh("false",Fm),_in:Gh("in",{beforeExpr:!0,binop:7}),_instanceof:Gh("instanceof",{beforeExpr:!0,binop:7}),_typeof:Gh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Gh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Gh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Gm=/\r\n?|\n|\u2028|\u2029/,
Nv=new RegExp(Gm.source,"g"),$O=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,tn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,R0=Object.prototype,ZB=R0.hasOwnProperty,zda=R0.toString,eS=Array.isArray||function(c){return"[object Array]"===zda.call(c)},Ov=function(c,h){this.line=c;this.column=h};Ov.prototype.offset=function(c){return new Ov(this.line,this.column+c)};var my=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},YB={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},dS=!1,wj=function(c,h,f){this.options=c=H6(c);this.sourceFile=c.sourceFile;this.keywords=jt(xda[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var m="";!0!==c.allowReserved&&(m=YO[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(m+=" await"));this.reservedWords=jt(m);m=(m?m+" ":"")+YO.strict;this.reservedWordsStrict=jt(m);this.reservedWordsStrictBind=jt(m+" "+YO.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Gm).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Hb.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Pr={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};wj.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Pr.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Pr.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Pr.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Pr.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Pr.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Pr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Pr.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};wj.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};wj.parse=function(c,h){return(new this(h,
c)).parse()};wj.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};wj.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(wj.prototype,Pr);var Hl=wj.prototype,Ada=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Hl.strictDirective=function(c){for(;;){tn.lastIndex=c;c+=tn.exec(this.input)[0].length;var h=Ada.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){tn.lastIndex=c+h[0].length;c=tn.exec(this.input);h=c.index+
c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Gm.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;tn.lastIndex=c;c+=tn.exec(this.input)[0].length;";"===this.input[c]&&c++}};Hl.eat=function(c){return this.type===c?(this.next(),!0):!1};Hl.isContextual=function(c){return this.type===Hb.name&&this.value===c&&!this.containsEsc};Hl.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Hl.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Hl.canInsertSemicolon=function(){return this.type===Hb.eof||this.type===Hb.braceR||Gm.test(this.input.slice(this.lastTokEnd,this.start))};Hl.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Hl.semicolon=function(){this.eat(Hb.semi)||this.insertSemicolon()||this.unexpected()};Hl.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Hl.expect=function(c){this.eat(c)||this.unexpected()};Hl.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Hl.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Hl.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Hl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Hl.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Vg=wj.prototype;Vg.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==Hb.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var aP={kind:"loop"},Bda={kind:"switch"};Vg.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;tn.lastIndex=this.pos;var h=tn.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(Bl(f,!0)){for(c=h+1;Um(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!yda.test(c))return!0}return!1};Vg.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
tn.lastIndex=this.pos;var c=tn.exec(this.input);c=this.pos+c[0].length;return!Gm.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!Um(this.input.charAt(c+8)))};Vg.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=Hb._var;var a="let"}switch(m){case Hb._break:case Hb._continue:return this.parseBreakContinueStatement(n,m.keyword);case Hb._debugger:return this.parseDebuggerStatement(n);case Hb._do:return this.parseDoStatement(n);
case Hb._for:return this.parseForStatement(n);case Hb._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Hb._class:return c&&this.unexpected(),this.parseClass(n,!0);case Hb._if:return this.parseIfStatement(n);case Hb._return:return this.parseReturnStatement(n);case Hb._switch:return this.parseSwitchStatement(n);case Hb._throw:return this.parseThrowStatement(n);case Hb._try:return this.parseTryStatement(n);
case Hb._const:case Hb._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case Hb._while:return this.parseWhileStatement(n);case Hb._with:return this.parseWithStatement(n);case Hb.braceL:return this.parseBlock(!0,n);case Hb.semi:return this.parseEmptyStatement(n);case Hb._export:case Hb._import:if(10<this.options.ecmaVersion&&m===Hb._import&&(tn.lastIndex=this.pos,c=tn.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===Hb._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===Hb.name&&"Identifier"===
f.type&&this.eat(Hb.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};Vg.parseBreakContinueStatement=function(c,h){var f="break"===h;this.next();this.eat(Hb.semi)||this.insertSemicolon()?c.label=null:this.type!==Hb.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Vg.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};Vg.parseDoStatement=function(c){this.next();this.labels.push(aP);c.body=this.parseStatement("do");this.labels.pop();this.expect(Hb._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Hb.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Vg.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(aP);this.enterScope(0);this.expect(Hb.parenL);if(this.type===Hb.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Hb._var||this.type===Hb._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");
if((this.type===Hb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Hb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new $B;f=this.parseExpression(!0,m);if(this.type===Hb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Hb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,
!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};Vg.parseFunctionStatement=function(c,h,f){this.next();return this.parseFunction(c,rA|(f?0:bP),!1,h)};Vg.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Hb._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Vg.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Hb.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};Vg.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Hb.braceL);this.labels.push(Bda);this.enterScope(0);for(var h,f=!1;this.type!==Hb.braceR;)if(this.type===Hb._case||this.type===
Hb._default){var m=this.type===Hb._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,h.test=null);this.expect(Hb.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Vg.parseThrowStatement=
function(c){this.next();Gm.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var Cda=[];Vg.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Hb._catch){var h=this.startNode();this.next();if(this.eat(Hb.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:
0);this.checkLValPattern(h.param,f?4:2);this.expect(Hb.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Hb._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Vg.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};Vg.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(aP);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};Vg.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Vg.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};Vg.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Hb._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Vg.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};Vg.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Hb.braceL);for(c&&this.enterScope(0);this.type!==Hb.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
Vg.parseFor=function(c,h){c.init=h;this.expect(Hb.semi);c.test=this.type===Hb.semi?null:this.parseExpression();this.expect(Hb.semi);c.update=this.type===Hb.parenR?null:this.parseExpression();this.expect(Hb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Vg.parseForIn=function(c,h){var f=this.type===Hb._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect(Hb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Vg.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(Hb.eq)?m.init=this.parseMaybeAssign(h):
"const"!==f||this.type===Hb._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===Hb._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(Hb.comma))break}return c};Vg.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var rA=1,bP=2;Vg.parseFunction=
function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===Hb.star&&h&bP&&this.unexpected(),c.generator=this.eat(Hb.star);8<=this.options.ecmaVersion&&(c.async=!!m);h&rA&&(c.id=h&4&&this.type!==Hb.name?null:this.parseIdent(),!c.id||h&bP||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&rA||(c.id=this.type===Hb.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,h&rA?"FunctionDeclaration":"FunctionExpression")};Vg.parseFunctionParams=function(c){this.expect(Hb.parenL);c.params=this.parseBindingList(Hb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Vg.parseClass=function(c,h){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.startNode(),n=!1;m.body=[];for(this.expect(Hb.braceL);this.type!==Hb.braceR;){var a=this.parseClassElement(null!==c.superClass);a&&(m.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(n&&this.raise(a.start,"Duplicate constructor in the same class"),n=!0))}this.strict=f;this.next();c.body=this.finishNode(m,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Vg.parseClassElement=function(c){var h=
this;if(this.eat(Hb.semi))return null;var f=this.startNode(),m=function(k,b){void 0===b&&(b=!1);var e=h.start,l=h.startLoc;if(!h.eatContextual(k))return!1;if(!(h.type===Hb.parenL||b&&h.canInsertSemicolon()))return!0;f.key&&h.unexpected();f.computed=!1;f.key=h.startNodeAt(e,l);f.key.name=k;h.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=m("static");var n=this.eat(Hb.star),a=!1;n||(8<=this.options.ecmaVersion&&m("async",!0)?(a=!0,n=9<=this.options.ecmaVersion&&this.eat(Hb.star)):
m("get")?f.kind="get":m("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);m=f.key;var d=!1;f.computed||f.static||!("Identifier"===m.type&&"constructor"===m.name||"Literal"===m.type&&"constructor"===m.value)?f.static&&"Identifier"===m.type&&"prototype"===m.name&&this.raise(m.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(m.start,"Constructor can't have get/set modifier"),n&&this.raise(m.start,"Constructor can't be a generator"),a&&this.raise(m.start,
"Constructor can't be an async method"),f.kind="constructor",d=c);this.parseClassMethod(f,n,a,d);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};Vg.parseClassMethod=function(c,
h,f,m){c.value=this.parseMethod(h,f,m);return this.finishNode(c,"MethodDefinition")};Vg.parseClassId=function(c,h){this.type===Hb.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Vg.parseClassSuper=function(c){c.superClass=this.eat(Hb._extends)?this.parseExprSubscripts():null};Vg.parseExport=function(c,h){this.next();if(this.eat(Hb.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Hb.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Hb._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Hb._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,rA|4,!1,f)):this.type===Hb._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
Hb.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Vg.checkExport=function(c,h,f){c&&(ZB.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};Vg.checkPatternExport=function(c,h){var f=h.type;if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=
0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};Vg.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,
h[f].id)};Vg.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Vg.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Hb.braceL);!this.eat(Hb.braceR);){if(f)f=!1;else if(this.expect(Hb.comma),this.afterTrailingComma(Hb.braceR))break;var m=this.startNode();m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):
m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};Vg.parseImport=function(c){this.next();this.type===Hb.string?(c.specifiers=Cda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Hb.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};Vg.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Hb.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Hb.comma))return c}if(this.type===Hb.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Hb.braceL);!this.eat(Hb.braceR);){if(h)h=!1;else if(this.expect(Hb.comma),this.afterTrailingComma(Hb.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Vg.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Vg.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var mo=wj.prototype;mo.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=
1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};mo.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};mo.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};mo.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Hb.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};mo.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Hb.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Hb.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Hb.braceL:return this.parseObj(!0)}return this.parseIdent()};
mo.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Hb.comma),h&&this.type===Hb.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Hb.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===Hb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};
mo.parseBindingListItem=function(c){return c};mo.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Hb.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};mo.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(m?"Binding ":"Assigning to ")+c.name+
" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(ZB.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return m&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};mo.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;default:this.checkLValSimple(c,h,f)}};mo.checkLValInnerPattern=
function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var gh=wj.prototype;gh.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=
m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},f[c]=!0)}};gh.parseExpression=function(c,h){var f=this.start,m=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Hb.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(Hb.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};gh.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new $B,m=!0);var d=this.start,k=this.startLoc;
if(this.type===Hb.parenL||this.type===Hb.name)this.potentialArrowAt=this.start;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===Hb.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===Hb.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};gh.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Hb.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Hb.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};gh.parseExprOps=function(c,h){var f=this.start,
m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};gh.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==Hb._in)&&a>m){var d=this.type===Hb.logicalOR||this.type===Hb.logicalAND,k=this.type===Hb.coalesce;k&&(a=Hb.logicalAND.binop);var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,
f,c,a,b,d||k);(d&&this.type===Hb.coalesce||k&&(this.type===Hb.logicalOR||this.type===Hb.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};gh.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};gh.parseMaybeUnary=function(c,h){var f=this.start,m=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var a=this.type===Hb.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);a?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,a?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,m),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Hb.starstar)?this.buildBinary(f,m,n,this.parseMaybeUnary(null,!1),"**",!1):n};gh.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===
m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};gh.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,
h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),d;c=d}};gh.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(Hb.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(Hb.bracketL);if(b||k&&this.type!==Hb.parenL&&this.type!==Hb.backQuote||this.eat(Hb.dot))h=this.startNodeAt(h,
f),h.object=c,h.property=b?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!b,b&&this.expect(Hb.bracketR),d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(Hb.parenL)){m=new $B;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(Hb.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(Hb.arrow))return this.checkPatternErrors(m,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===
Hb.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};gh.parseExprAtom=function(c){this.type===Hb.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Hb._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Hb.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Hb.dot&&this.type!==Hb.bracketL&&this.type!==Hb.parenL&&this.unexpected(),this.finishNode(h,"Super");case Hb._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Hb.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Hb._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Hb.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Hb.name&&!m)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Hb.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Hb.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Hb.num:case Hb.string:return this.parseLiteral(this.value);
case Hb._null:case Hb._true:case Hb._false:return h=this.startNode(),h.value=this.type===Hb._null?null:this.type===Hb._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Hb.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Hb.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Hb.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Hb.braceL:return this.parseObj(!1,c);case Hb._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Hb._class:return this.parseClass(this.startNode(),!1);case Hb._new:return this.parseNew();case Hb.backQuote:return this.parseTemplate();case Hb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};gh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Hb.parenL:return this.parseDynamicImport(c);case Hb.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};gh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Hb.parenR)){var h=this.start;this.eat(Hb.comma)&&this.eat(Hb.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};gh.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};gh.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};gh.parseParenExpression=function(){this.expect(Hb.parenL);var c=this.parseExpression();this.expect(Hb.parenR);return c};gh.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=
this.startLoc,d=[],k=!0,b=!1,e=new $B,l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Hb.parenR;)if(k?k=!1:this.expect(Hb.comma),m&&this.afterTrailingComma(Hb.parenR,!0)){b=!0;break}else if(this.type===Hb.ellipsis){var q=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Hb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;
this.expect(Hb.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Hb.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);q&&this.unexpected(q);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};gh.parseParenItem=function(c){return c};gh.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Dda=[];gh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Hb.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===Hb._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Hb.parenL)?c.arguments=this.parseExprList(Hb.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Dda;return this.finishNode(c,"NewExpression")};gh.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Hb.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===Hb.backQuote;return this.finishNode(h,"TemplateElement")};gh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Hb.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Hb.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Hb.braceR),h.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};gh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Hb.name||this.type===Hb.num||this.type===Hb.string||this.type===Hb.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Hb.star)&&!Gm.test(this.input.slice(this.lastTokEnd,this.start))};gh.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(Hb.braceR);){if(m)m=
!1;else if(this.expect(Hb.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Hb.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};gh.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(Hb.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Hb.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===Hb.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Hb.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(Hb.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&
8<=this.options.ecmaVersion&&!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(Hb.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};gh.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===Hb.colon&&this.unexpected();this.eat(Hb.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Hb.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Hb.comma||this.type===Hb.braceR||this.type===Hb.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):
this.type===Hb.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};gh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Hb.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Hb.bracketR),c.key;c.computed=!1}return c.key=this.type===Hb.num||this.type===Hb.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};gh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};gh.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(Hb.parenL);m.params=this.parseBindingList(Hb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};gh.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};gh.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==Hb.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};gh.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};gh.checkParams=function(c,h){var f={},m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};gh.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(Hb.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Hb.comma)var d=null;else this.type===Hb.ellipsis?(d=this.parseSpread(m),m&&this.type===Hb.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};gh.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};gh.parseIdent=function(c,h){h=this.startNode();this.type===Hb.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};gh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Hb.semi||this.canInsertSemicolon()||this.type!==Hb.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Hb.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};gh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var gH=wj.prototype;gH.raise=function(c,h){var f=dK(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};gH.raiseRecoverable=
gH.raise;gH.curPosition=function(){if(this.options.locations)return new Ov(this.curLine,this.pos-this.lineStart)};var Qr=wj.prototype,Eda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Qr.enterScope=function(c){this.scopeStack.push(new Eda(c))};Qr.exitScope=function(){this.scopeStack.pop()};Qr.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Qr.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){m=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};Qr.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Qr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Qr.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};Qr.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var sA=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new my(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},tA=wj.prototype;tA.startNode=function(){return new sA(this,this.start,this.startLoc)};tA.startNodeAt=function(c,h){return new sA(this,
c,h)};tA.finishNode=function(c,h){return fS.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};tA.finishNodeAt=function(c,h,f,m){return fS.call(this,c,h,f,m)};tA.copyNode=function(c){var h=new sA(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var un=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},nj={b_stat:new un("{",!1),b_expr:new un("{",!0),b_tmpl:new un("${",!1),p_stat:new un("(",!1),p_expr:new un("(",!0),q_tmpl:new un("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new un("function",!1),f_expr:new un("function",!0),f_expr_gen:new un("function",!0,!1,null,!0),f_gen:new un("function",!1,!1,null,!0)},hH=wj.prototype;hH.initialContext=function(){return[nj.b_stat]};hH.braceIsBlock=function(c){var h=this.curContext();return h===nj.f_expr||h===nj.f_stat?!0:c!==Hb.colon||h!==nj.b_stat&&h!==nj.b_expr?c===Hb._return||c===Hb.name&&this.exprAllowed?Gm.test(this.input.slice(this.lastTokEnd,this.start)):c===Hb._else||
c===Hb.semi||c===Hb.eof||c===Hb.parenR||c===Hb.arrow?!0:c===Hb.braceL?h===nj.b_stat:c===Hb._var||c===Hb._const||c===Hb.name?!1:!this.exprAllowed:!h.isExpr};hH.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};hH.updateContext=function(c){var h,f=this.type;f.keyword&&c===Hb.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Hb.parenR.updateContext=Hb.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===nj.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Hb.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?nj.b_stat:nj.b_expr);this.exprAllowed=!0};Hb.dollarBraceL.updateContext=function(){this.context.push(nj.b_tmpl);this.exprAllowed=!0};Hb.parenL.updateContext=function(c){this.context.push(c===Hb._if||c===Hb._for||c===Hb._with||c===Hb._while?
nj.p_stat:nj.p_expr);this.exprAllowed=!0};Hb.incDec.updateContext=function(){};Hb._function.updateContext=Hb._class.updateContext=function(c){!c.beforeExpr||c===Hb._else||c===Hb.semi&&this.curContext()!==nj.p_stat||c===Hb._return&&Gm.test(this.input.slice(this.lastTokEnd,this.start))||(c===Hb.colon||c===Hb.braceL)&&this.curContext()===nj.b_stat?this.context.push(nj.f_stat):this.context.push(nj.f_expr);this.exprAllowed=!1};Hb.backQuote.updateContext=function(){this.curContext()===nj.q_tmpl?this.context.pop():
this.context.push(nj.q_tmpl);this.exprAllowed=!1};Hb.star.updateContext=function(c){c===Hb._function&&(c=this.context.length-1,this.context[c]=this.context[c]===nj.f_expr?nj.f_expr_gen:nj.f_gen);this.exprAllowed=!0};Hb.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Hb.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var J6={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
K6={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
gS={};aC(9);aC(10);aC(11);aC(12);var Pf=wj.prototype,zq=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=gS[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
zq.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};zq.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};zq.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=m)return n;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};zq.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};zq.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};zq.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};zq.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};zq.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Pf.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Pf.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Pf.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,f=c.backReferenceNames;h<
f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Pf.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Pf.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Pf.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Pf.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=h;return!1};Pf.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Pf.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Pf.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==m&&m<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Pf.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Pf.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Pf.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Pf.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Pf.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Pf.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Pf.regexp_eatSyntaxCharacter=function(c){var h=c.current();return hS(h)?(c.lastIntValue=h,c.advance(),!0):!1};Pf.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!hS(f);)c.advance();return c.pos!==h};Pf.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Pf.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Pf.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Pf.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=bC(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=bC(c.lastIntValue);return!0}return!1};Pf.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if(Bl(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Pf.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(Um(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Pf.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Pf.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Pf.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Pf.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Pf.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Pf.regexp_eatZero=
function(c){return 48!==c.current()||cC(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Pf.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Pf.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Pf.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Pf.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Pf.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Pf.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Pf.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Pf.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){ZB.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Pf.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Pf.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";iS(h=c.current());)c.lastStringValue+=bC(h),c.advance();return""!==c.lastStringValue};Pf.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";L6(h=c.current());)c.lastStringValue+=bC(h),c.advance();return""!==c.lastStringValue};Pf.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Pf.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Pf.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Pf.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Pf.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Pf.regexp_eatClassControlLetter=function(c){var h=
c.current();return cC(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Pf.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Pf.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;cC(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Pf.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;jS(f=c.current());)c.lastIntValue=
16*c.lastIntValue+kS(f),c.advance();return c.pos!==h};Pf.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Pf.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Pf.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!jS(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+kS(n);c.advance()}return!0};var iH=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new my(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Bh=wj.prototype;Bh.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new iH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Bh.getToken=function(){this.next();return new iH(this)};"undefined"!==typeof Symbol&&(Bh[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Hb.eof,value:h}}}});Bh.curContext=function(){return this.context[this.context.length-1]};Bh.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Hb.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Bh.readToken=function(c){return Bl(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Bh.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};Bh.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){Nv.lastIndex=h;for(var m;(m=Nv.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,f),h,this.pos,c,this.curPosition())};
Bh.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Mv(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};Bh.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&$O.test(String.fromCharCode(c)))++this.pos;else break a}}};Bh.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
h;this.updateContext(f)};Bh.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Hb.ellipsis);++this.pos;return this.finishToken(Hb.dot)};Bh.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Hb.assign,2):this.finishOp(Hb.slash,1)};
Bh.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?Hb.star:Hb.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=Hb.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Hb.assign,f+1):this.finishOp(m,f)};Bh.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Hb.assign,3):this.finishOp(124===c?Hb.logicalOR:Hb.logicalAND,
2):61===h?this.finishOp(Hb.assign,2):this.finishOp(124===c?Hb.bitwiseOR:Hb.bitwiseAND,1)};Bh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Hb.assign,2):this.finishOp(Hb.bitwiseXOR,1)};Bh.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Gm.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Hb.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Hb.assign,2):this.finishOp(Hb.plusMin,1)};Bh.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Hb.assign,f+1):this.finishOp(Hb.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(f=2);return this.finishOp(Hb.relational,f)};Bh.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Hb.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Hb.arrow)):this.finishOp(61===c?Hb.eq:Hb.prefix,1)};Bh.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp(Hb.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Hb.assign,3):this.finishOp(Hb.coalesce,2)}return this.finishOp(Hb.question,1)};Bh.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Hb.parenL);case 41:return++this.pos,this.finishToken(Hb.parenR);case 59:return++this.pos,this.finishToken(Hb.semi);case 44:return++this.pos,this.finishToken(Hb.comma);case 91:return++this.pos,
this.finishToken(Hb.bracketL);case 93:return++this.pos,this.finishToken(Hb.bracketR);case 123:return++this.pos,this.finishToken(Hb.braceL);case 125:return++this.pos,this.finishToken(Hb.braceR);case 58:return++this.pos,this.finishToken(Hb.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Hb.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Hb.prefix,1)}this.raise(this.pos,"Unexpected character '"+eK(c)+"'")};Bh.finishOp=function(c,h){var f=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};Bh.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Gm.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=
!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);m=this.regexpState||(this.regexpState=new zq(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Hb.regexp,{pattern:c,flags:h,value:f})};Bh.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;
a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:a};Bh.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=lS(this.input.slice(h,this.pos)),++this.pos):Bl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Hb.num,f)};Bh.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=lS(this.input.slice(h,this.pos)),++this.pos,Bl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Hb.num,f);f&&/[89]/.test(this.input.slice(h,
this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Bl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Hb.num,f)};Bh.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};Bh.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=
this.pos):(Mv(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);return this.finishToken(Hb.string,h)};var S0={};Bh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===S0)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Bh.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw S0;this.raise(c,h)};Bh.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Hb.template||this.type===Hb.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Hb.dollarBraceL);++this.pos;return this.finishToken(Hb.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Hb.template,c)}if(92===f)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(Mv(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};Bh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Hb.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Bh.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return eK(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return Mv(h)?"":String.fromCharCode(h)}};Bh.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};Bh.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Um(n,
m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?Bl:Um)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=eK(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};Bh.readWord=function(){var c=this.readWord1(),h=Hb.name;this.keywords.test(c)&&(h=XB[c]);return this.finishToken(h,
c)};wj.acorn={Parser:wj,version:"8.0.4",defaultOptions:YB,Position:Ov,SourceLocation:my,getLineInfo:dK,Node:sA,TokenType:Vh,tokTypes:Hb,keywordTypes:XB,TokContext:un,tokContexts:nj,isIdentifierChar:Um,isIdentifierStart:Bl,Token:iH,isNewLine:Mv,lineBreak:Gm,lineBreakG:Nv,nonASCIIwhitespace:$O};var rp=Object.freeze({__proto__:null,Node:sA,Parser:wj,Position:Ov,SourceLocation:my,TokContext:un,Token:iH,TokenType:Vh,defaultOptions:YB,getLineInfo:dK,isIdentifierChar:Um,isIdentifierStart:Bl,isNewLine:Mv,
keywordTypes:XB,lineBreak:Gm,lineBreakG:Nv,nonASCIIwhitespace:$O,parse:function(c,h){return wj.parse(c,h)},parseExpressionAt:function(c,h,f){return wj.parseExpressionAt(c,h,f)},tokContexts:nj,tokTypes:Hb,tokenizer:function(c,h){return wj.tokenizer(c,h)},version:"8.0.4"});za("bL",rp);var mu=function(c,h){this.node=c;this.state=h},te={};te.Program=te.BlockStatement=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h,"Statement")};te.Statement=fK;te.EmptyStatement=kt;te.ExpressionStatement=
te.ParenthesizedExpression=te.ChainExpression=function(c,h,f){return f(c.expression,h,"Expression")};te.IfStatement=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Statement");c.alternate&&f(c.alternate,h,"Statement")};te.LabeledStatement=function(c,h,f){return f(c.body,h,"Statement")};te.BreakStatement=te.ContinueStatement=kt;te.WithStatement=function(c,h,f){f(c.object,h,"Expression");f(c.body,h,"Statement")};te.SwitchStatement=function(c,h,f){f(c.discriminant,h,"Expression");var m=0;
for(c=c.cases;m<c.length;m+=1){var n=c[m];n.test&&f(n.test,h,"Expression");var a=0;for(n=n.consequent;a<n.length;a+=1)f(n[a],h,"Statement")}};te.SwitchCase=function(c,h,f){c.test&&f(c.test,h,"Expression");var m=0;for(c=c.consequent;m<c.length;m+=1)f(c[m],h,"Statement")};te.ReturnStatement=te.YieldExpression=te.AwaitExpression=function(c,h,f){c.argument&&f(c.argument,h,"Expression")};te.ThrowStatement=te.SpreadElement=function(c,h,f){return f(c.argument,h,"Expression")};te.TryStatement=function(c,
h,f){f(c.block,h,"Statement");c.handler&&f(c.handler,h);c.finalizer&&f(c.finalizer,h,"Statement")};te.CatchClause=function(c,h,f){c.param&&f(c.param,h,"Pattern");f(c.body,h,"Statement")};te.WhileStatement=te.DoWhileStatement=function(c,h,f){f(c.test,h,"Expression");f(c.body,h,"Statement")};te.ForStatement=function(c,h,f){c.init&&f(c.init,h,"ForInit");c.test&&f(c.test,h,"Expression");c.update&&f(c.update,h,"Expression");f(c.body,h,"Statement")};te.ForInStatement=te.ForOfStatement=function(c,h,f){f(c.left,
h,"ForInit");f(c.right,h,"Expression");f(c.body,h,"Statement")};te.ForInit=function(c,h,f){"VariableDeclaration"===c.type?f(c,h):f(c,h,"Expression")};te.DebuggerStatement=kt;te.FunctionDeclaration=function(c,h,f){return f(c,h,"Function")};te.VariableDeclaration=function(c,h,f){var m=0;for(c=c.declarations;m<c.length;m+=1)f(c[m],h)};te.VariableDeclarator=function(c,h,f){f(c.id,h,"Pattern");c.init&&f(c.init,h,"Expression")};te.Function=function(c,h,f){c.id&&f(c.id,h,"Pattern");for(var m=0,n=c.params;m<
n.length;m+=1)f(n[m],h,"Pattern");f(c.body,h,c.expression?"Expression":"Statement")};te.Pattern=function(c,h,f){"Identifier"===c.type?f(c,h,"VariablePattern"):"MemberExpression"===c.type?f(c,h,"MemberPattern"):f(c,h)};te.VariablePattern=kt;te.MemberPattern=fK;te.RestElement=function(c,h,f){return f(c.argument,h,"Pattern")};te.ArrayPattern=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Pattern")}};te.ObjectPattern=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=
1){var n=c[m];"Property"===n.type?(n.computed&&f(n.key,h,"Expression"),f(n.value,h,"Pattern")):"RestElement"===n.type&&f(n.argument,h,"Pattern")}};te.Expression=fK;te.ThisExpression=te.Super=te.MetaProperty=kt;te.ArrayExpression=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Expression")}};te.ObjectExpression=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=1)f(c[m],h)};te.FunctionExpression=te.ArrowFunctionExpression=te.FunctionDeclaration;te.SequenceExpression=
function(c,h,f){var m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};te.TemplateLiteral=function(c,h,f){for(var m=0,n=c.quasis;m<n.length;m+=1)f(n[m],h);m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};te.TemplateElement=kt;te.UnaryExpression=te.UpdateExpression=function(c,h,f){f(c.argument,h,"Expression")};te.BinaryExpression=te.LogicalExpression=function(c,h,f){f(c.left,h,"Expression");f(c.right,h,"Expression")};te.AssignmentExpression=te.AssignmentPattern=function(c,
h,f){f(c.left,h,"Pattern");f(c.right,h,"Expression")};te.ConditionalExpression=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Expression");f(c.alternate,h,"Expression")};te.NewExpression=te.CallExpression=function(c,h,f){f(c.callee,h,"Expression");if(c.arguments){var m=0;for(c=c.arguments;m<c.length;m+=1)f(c[m],h,"Expression")}};te.MemberExpression=function(c,h,f){f(c.object,h,"Expression");c.computed&&f(c.property,h,"Expression")};te.ExportNamedDeclaration=te.ExportDefaultDeclaration=
function(c,h,f){c.declaration&&f(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,h,"Expression")};te.ExportAllDeclaration=function(c,h,f){c.exported&&f(c.exported,h);f(c.source,h,"Expression")};te.ImportDeclaration=function(c,h,f){for(var m=0,n=c.specifiers;m<n.length;m+=1)f(n[m],h);f(c.source,h,"Expression")};te.ImportExpression=function(c,h,f){f(c.source,h,"Expression")};te.ImportSpecifier=te.ImportDefaultSpecifier=te.ImportNamespaceSpecifier=
te.Identifier=te.PrivateIdentifier=te.Literal=kt;te.TaggedTemplateExpression=function(c,h,f){f(c.tag,h,"Expression");f(c.quasi,h,"Expression")};te.ClassDeclaration=te.ClassExpression=function(c,h,f){return f(c,h,"Class")};te.Class=function(c,h,f){c.id&&f(c.id,h,"Pattern");c.superClass&&f(c.superClass,h,"Expression");f(c.body,h)};te.ClassBody=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h)};te.MethodDefinition=te.PropertyDefinition=te.Property=function(c,h,f){c.computed&&f(c.key,h,"Expression");
c.value&&f(c.value,h,"Expression")};var no=Object.freeze({__proto__:null,ancestor:function(c,h,f,m,n){var a=[];f||(f=te);(function l(k,b,e){e=e||k.type;var p=h[e],q=k!==a[a.length-1];q&&a.push(k);f[e](k,b,l);p&&p(k,b||a,a);q&&a.pop()})(c,m,n)},base:te,findNodeAfter:function(c,h,f,m,n){f=dC(f);m||(m=te);try{(function e(d,k,b){if(!(d.end<h)){b=b||d.type;if(d.start>=h&&f(b,d))throw new mu(d,k);m[b](d,k,e)}})(c,n)}catch(a){if(a instanceof mu)return a;throw a;}},findNodeAround:function(c,h,f,m,n){f=dC(f);
m||(m=te);try{(function e(d,k,b){b=b||d.type;if(!(d.start>h||d.end<h)&&(m[b](d,k,e),f(b,d)))throw new mu(d,k);})(c,n)}catch(a){if(a instanceof mu)return a;throw a;}},findNodeAt:function(c,h,f,m,n,a){n||(n=te);m=dC(m);try{(function l(k,b,e){e=e||k.type;if((null==h||k.start<=h)&&(null==f||k.end>=f))n[e](k,b,l);if(!(null!=h&&k.start!==h||null!=f&&k.end!==f)&&m(e,k))throw new mu(k,b);})(c,a)}catch(d){if(d instanceof mu)return d;throw d;}},findNodeBefore:function(c,h,f,m,n){f=dC(f);m||(m=te);var a;(function l(k,
b,e){k.start>h||(e=e||k.type,k.end<=h&&(!a||a.node.end<k.end)&&f(e,k)&&(a=new mu(k,b)),m[e](k,b,l))})(c,n);return a},full:function(c,h,f,m,n){f||(f=te);var a;(function l(k,b,e){e=e||k.type;f[e](k,b,l);a!==k&&(h(k,b,e),a=k)})(c,m,n)},fullAncestor:function(c,h,f,m){f||(f=te);var n=[],a;(function l(k,b,e){e=e||k.type;var p=k!==n[n.length-1];p&&n.push(k);f[e](k,b,l);a!==k&&(h(k,b||n,n,e),a=k);p&&n.pop()})(c,m)},make:mS,recursive:function(c,h,f,m,n){var a=f?mS(f,m||void 0):m;(function l(k,b,e){a[e||k.type](k,
b,l)})(c,h,n)},simple:function(c,h,f,m,n){f||(f=te);(function e(d,k,b){b=b||d.type;var l=h[b];f[b](d,k,e);l&&l(d,k)})(c,m,n)}}),cP={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},
Fda={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
Gda=/^in(stanceof)?$/,dP="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
T0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
M6=new RegExp("["+dP+"]"),N6=new RegExp("["+dP+T0+"]");dP=T0=null;var nS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],O6=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],Wh=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},vn={beforeExpr:!0},hm={startsExpr:!0},hK={},Ma={num:new Wh("num",hm),regexp:new Wh("regexp",hm),string:new Wh("string",hm),name:new Wh("name",hm),privateId:new Wh("privateId",hm),eof:new Wh("eof"),bracketL:new Wh("[",
{beforeExpr:!0,startsExpr:!0}),bracketR:new Wh("]"),braceL:new Wh("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Wh("}"),parenL:new Wh("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Wh(")"),comma:new Wh(",",vn),semi:new Wh(";",vn),colon:new Wh(":",vn),dot:new Wh("."),question:new Wh("?",vn),questionDot:new Wh("?."),arrow:new Wh("=>",vn),template:new Wh("template"),invalidTemplate:new Wh("invalidTemplate"),ellipsis:new Wh("...",vn),backQuote:new Wh("`",hm),dollarBraceL:new Wh("${",{beforeExpr:!0,startsExpr:!0}),
eq:new Wh("=",{beforeExpr:!0,isAssign:!0}),assign:new Wh("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Wh("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Wh("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Wm("||",1),logicalAND:Wm("&&",2),bitwiseOR:Wm("|",3),bitwiseXOR:Wm("^",4),bitwiseAND:Wm("&",5),equality:Wm("==/!=/===/!==",6),relational:Wm("</>/<=/>=",7),bitShift:Wm("<</>>/>>>",8),plusMin:new Wh("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Wm("%",10),star:Wm("*",
10),slash:Wm("/",10),starstar:new Wh("**",{beforeExpr:!0}),coalesce:Wm("??",1),_break:Hh("break"),_case:Hh("case",vn),_catch:Hh("catch"),_continue:Hh("continue"),_debugger:Hh("debugger"),_default:Hh("default",vn),_do:Hh("do",{isLoop:!0,beforeExpr:!0}),_else:Hh("else",vn),_finally:Hh("finally"),_for:Hh("for",{isLoop:!0}),_function:Hh("function",hm),_if:Hh("if"),_return:Hh("return",vn),_switch:Hh("switch"),_throw:Hh("throw",vn),_try:Hh("try"),_var:Hh("var"),_const:Hh("const"),_while:Hh("while",{isLoop:!0}),
_with:Hh("with"),_new:Hh("new",{beforeExpr:!0,startsExpr:!0}),_this:Hh("this",hm),_super:Hh("super",hm),_class:Hh("class",hm),_extends:Hh("extends",vn),_export:Hh("export"),_import:Hh("import",hm),_null:Hh("null",hm),_true:Hh("true",hm),_false:Hh("false",hm),_in:Hh("in",{beforeExpr:!0,binop:7}),_instanceof:Hh("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hh("delete",{beforeExpr:!0,
prefix:!0,startsExpr:!0})},Hm=/\r\n?|\n|\u2028|\u2029/,mt=new RegExp(Hm.source,"g"),U0=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,wn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,V0=Object.prototype,py=V0.hasOwnProperty,Hda=V0.toString,pS=Array.isArray||function(c){return"[object Array]"===Hda.call(c)},oy=function(c,h){this.line=c;this.column=h};oy.prototype.offset=function(c){return new oy(this.line,this.column+c)};var Qv=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},
eC={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},oS=!1,lk=function(c,h,f){this.options=c=P6(c);this.sourceFile=c.sourceFile;this.keywords=lt(Fda[6<=c.ecmaVersion?6:"module"===c.sourceType?
"5module":5]);var m="";!0!==c.allowReserved&&(m=cP[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===c.sourceType&&(m+=" await"));this.reservedWords=lt(m);m=(m?m+" ":"")+cP.strict;this.reservedWordsStrict=lt(m);this.reservedWordsStrictBind=lt(m+" "+cP.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Hm).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ma.eof;this.value=
null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&
"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=[]},Aq={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};lk.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};
Aq.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Aq.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};Aq.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};Aq.canAwait.get=function(){for(var c=this.scopeStack.length-1;0<=c;c--){var h=this.scopeStack[c];if(h.inClassFieldInit)return!1;if(h.flags&2)return 0<(h.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||
this.options.allowAwaitOutsideFunction};Aq.allowSuper.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&64)||h||this.options.allowSuperOutsideMethod};Aq.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Aq.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Aq.inNonArrowFunction.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&2)||h};lk.extend=function(){for(var c=
[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};lk.parse=function(c,h){return(new this(h,c)).parse()};lk.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};lk.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(lk.prototype,Aq);var Il=lk.prototype,Ida=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Il.strictDirective=function(c){for(;;){wn.lastIndex=c;c+=wn.exec(this.input)[0].length;var h=
Ida.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){wn.lastIndex=c+h[0].length;c=wn.exec(this.input);h=c.index+c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Hm.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;wn.lastIndex=c;c+=wn.exec(this.input)[0].length;";"===this.input[c]&&c++}};Il.eat=function(c){return this.type===c?(this.next(),!0):!1};Il.isContextual=function(c){return this.type===Ma.name&&this.value===
c&&!this.containsEsc};Il.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Il.expectContextual=function(c){this.eatContextual(c)||this.unexpected()};Il.canInsertSemicolon=function(){return this.type===Ma.eof||this.type===Ma.braceR||Hm.test(this.input.slice(this.lastTokEnd,this.start))};Il.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Il.semicolon=
function(){this.eat(Ma.semi)||this.insertSemicolon()||this.unexpected()};Il.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);h||this.next();return!0}};Il.expect=function(c){this.eat(c)||this.unexpected()};Il.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Il.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),
c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Il.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Il.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Il.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var sg=lk.prototype;sg.parseTopLevel=function(c){var h=Object.create(null);c.body||(c.body=[]);for(;this.type!==Ma.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=
Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};var eP={kind:"loop"},Jda={kind:"switch"};sg.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;wn.lastIndex=this.pos;var h=wn.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);
if(91===f||92===f||55295<f&&56320>f)return!0;if(c)return!1;if(123===f)return!0;if(Vp(f,!0)){for(c=h+1;Pv(f=this.input.charCodeAt(c),!0);)++c;if(92===f||55295<f&&56320>f)return!0;c=this.input.slice(h,c);if(!Gda.test(c))return!0}return!1};sg.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;wn.lastIndex=this.pos;var c=wn.exec(this.input);c=this.pos+c[0].length;var h;return!Hm.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===
this.input.length||!(Pv(h=this.input.charCodeAt(c+8))||55295<h&&56320>h))};sg.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=Ma._var;var a="let"}switch(m){case Ma._break:case Ma._continue:return this.parseBreakContinueStatement(n,m.keyword);case Ma._debugger:return this.parseDebuggerStatement(n);case Ma._do:return this.parseDoStatement(n);case Ma._for:return this.parseForStatement(n);case Ma._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&
this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ma._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ma._if:return this.parseIfStatement(n);case Ma._return:return this.parseReturnStatement(n);case Ma._switch:return this.parseSwitchStatement(n);case Ma._throw:return this.parseThrowStatement(n);case Ma._try:return this.parseTryStatement(n);case Ma._const:case Ma._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case Ma._while:return this.parseWhileStatement(n);
case Ma._with:return this.parseWithStatement(n);case Ma.braceL:return this.parseBlock(!0,n);case Ma.semi:return this.parseEmptyStatement(n);case Ma._export:case Ma._import:if(10<this.options.ecmaVersion&&m===Ma._import&&(wn.lastIndex=this.pos,c=wn.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),
this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===Ma._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===Ma.name&&"Identifier"===f.type&&this.eat(Ma.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};sg.parseBreakContinueStatement=function(c,h){var f=
"break"===h;this.next();this.eat(Ma.semi)||this.insertSemicolon()?c.label=null:this.type!==Ma.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};sg.parseDebuggerStatement=function(c){this.next();
this.semicolon();return this.finishNode(c,"DebuggerStatement")};sg.parseDoStatement=function(c){this.next();this.labels.push(eP);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ma._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ma.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};sg.parseForStatement=function(c){this.next();var h=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(eP);
this.enterScope(0);this.expect(Ma.parenL);if(this.type===Ma.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Ma._var||this.type===Ma._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");if((this.type===Ma._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ma._in?-1<h&&this.unexpected(h):c.await=-1<
h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new fC;f=this.parseExpression(-1<h?"await":!0,m);if(this.type===Ma._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ma._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};sg.parseFunctionStatement=function(c,h,f){this.next();
return this.parseFunction(c,uA|(f?0:fP),!1,h)};sg.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ma._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};sg.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ma.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),
this.semicolon());return this.finishNode(c,"ReturnStatement")};sg.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ma.braceL);this.labels.push(Jda);this.enterScope(0);for(var h,f=!1;this.type!==Ma.braceR;)if(this.type===Ma._case||this.type===Ma._default){var m=this.type===Ma._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,
"Multiple default clauses"),f=!0,h.test=null);this.expect(Ma.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};sg.parseThrowStatement=function(c){this.next();Hm.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,
"ThrowStatement")};var Kda=[];sg.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ma._catch){var h=this.startNode();this.next();if(this.eat(Ma.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:0);this.checkLValPattern(h.param,f?4:2);this.expect(Ma.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,
"CatchClause")}c.finalizer=this.eat(Ma._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};sg.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,"VariableDeclaration")};sg.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(eP);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,
"WhileStatement")};sg.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};sg.parseEmptyStatement=function(c){this.next();return this.finishNode(c,"EmptyStatement")};sg.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?
"loop":this.type===Ma._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};sg.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};
sg.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Ma.braceL);for(c&&this.enterScope(0);this.type!==Ma.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};sg.parseFor=function(c,h){c.init=h;this.expect(Ma.semi);c.test=this.type===Ma.semi?null:this.parseExpression();this.expect(Ma.semi);c.update=this.type===Ma.parenR?null:this.parseExpression();this.expect(Ma.parenR);
c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};sg.parseForIn=function(c,h){var f=this.type===Ma._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();
this.expect(Ma.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};sg.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(Ma.eq)?m.init=this.parseMaybeAssign(h):"const"!==f||this.type===Ma._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===Ma._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,
"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(Ma.comma))break}return c};sg.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var uA=1,fP=2;sg.parseFunction=function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===Ma.star&&h&fP&&this.unexpected(),c.generator=this.eat(Ma.star);8<=this.options.ecmaVersion&&
(c.async=!!m);h&uA&&(c.id=h&4&&this.type!==Ma.name?null:this.parseIdent(),!c.id||h&fP||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));h&uA||(c.id=this.type===Ma.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=
a;return this.finishNode(c,h&uA?"FunctionDeclaration":"FunctionExpression")};sg.parseFunctionParams=function(c){this.expect(Ma.parenL);c.params=this.parseBindingList(Ma.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};sg.parseClass=function(c,h){this.next();var f=this.strict;this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.enterClassBody(),n=this.startNode(),a=!1;n.body=[];for(this.expect(Ma.braceL);this.type!==Ma.braceR;){var d=this.parseClassElement(null!==
c.superClass);if(d)if(n.body.push(d),"MethodDefinition"===d.type&&"constructor"===d.kind)a&&this.raise(d.start,"Duplicate constructor in the same class"),a=!0;else{var k;if(k="PrivateIdentifier"===d.key.type){k=m;var b=d.key.name,e=k[b],l="true";"MethodDefinition"!==d.type||"get"!==d.kind&&"set"!==d.kind||(l=(d.static?"s":"i")+d.kind);"iget"===e&&"iset"===l||"iset"===e&&"iget"===l||"sget"===e&&"sset"===l||"sset"===e&&"sget"===l?(k[b]="true",k=!1):e?k=!0:(k[b]=l,k=!1)}k&&this.raiseRecoverable(d.key.start,
"Identifier '#"+d.key.name+"' has already been declared")}}this.strict=f;this.next();c.body=this.finishNode(n,"ClassBody");this.exitClassBody();return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};sg.parseClassElement=function(c){if(this.eat(Ma.semi))return null;var h=this.options.ecmaVersion,f=this.startNode(),m="",n=!1,a=!1,d="method";f.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.type===Ma.star?f.static=!0:m="static");!m&&8<=h&&this.eatContextual("async")&&
(!this.isClassElementNameStart()&&this.type!==Ma.star||this.canInsertSemicolon()?m="async":a=!0);!m&&(9<=h||!a)&&this.eat(Ma.star)&&(n=!0);if(!m&&!a&&!n){var k=this.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?d=k:m=k}m?(f.computed=!1,f.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),f.key.name=m,this.finishNode(f.key,"Identifier")):this.parseClassElementName(f);13>h||this.type===Ma.parenL||"method"!==d||n||a?(c=(h=!f.static&&gC(f,"constructor"))&&
c,h&&"method"!==d&&this.raise(f.key.start,"Constructor can't have get/set modifier"),f.kind=h?"constructor":d,this.parseClassMethod(f,n,a,c)):this.parseClassField(f);return f};sg.isClassElementNameStart=function(){return this.type===Ma.name||this.type===Ma.privateId||this.type===Ma.num||this.type===Ma.string||this.type===Ma.bracketL||this.type.keyword};sg.parseClassElementName=function(c){this.type===Ma.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),
c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};sg.parseClassMethod=function(c,h,f,m){var n=c.key;"constructor"===c.kind?(h&&this.raise(n.start,"Constructor can't be a generator"),f&&this.raise(n.start,"Constructor can't be an async method")):c.static&&gC(c,"prototype")&&this.raise(n.start,"Classes may not have a static property named prototype");h=c.value=this.parseMethod(h,f,m);"get"===c.kind&&0!==h.params.length&&this.raiseRecoverable(h.start,"getter should have no params");
"set"===c.kind&&1!==h.params.length&&this.raiseRecoverable(h.start,"setter should have exactly one param");"set"===c.kind&&"RestElement"===h.params[0].type&&this.raiseRecoverable(h.params[0].start,"Setter cannot use rest params");return this.finishNode(c,"MethodDefinition")};sg.parseClassField=function(c){gC(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&gC(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'");
if(this.eat(Ma.eq)){var h=this.currentThisScope(),f=h.inClassFieldInit;h.inClassFieldInit=!0;c.value=this.parseMaybeAssign();h.inClassFieldInit=f}else c.value=null;this.semicolon();return this.finishNode(c,"PropertyDefinition")};sg.parseClassId=function(c,h){this.type===Ma.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};sg.parseClassSuper=function(c){c.superClass=this.eat(Ma._extends)?this.parseExprSubscripts():null};sg.enterClassBody=function(){var c=
{declared:Object.create(null),used:[]};this.privateNameStack.push(c);return c.declared};sg.exitClassBody=function(){var c=this.privateNameStack.pop(),h=c.declared;c=c.used;var f=this.privateNameStack.length;f=0===f?null:this.privateNameStack[f-1];for(var m=0;m<c.length;++m){var n=c[m];py.call(h,n.name)||(f?f.used.push(n):this.raiseRecoverable(n.start,"Private field '#"+n.name+"' must be declared in an enclosing class"))}};sg.parseExport=function(c,h){this.next();if(this.eat(Ma.star))return 11<=this.options.ecmaVersion&&
(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ma.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ma._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Ma._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,
uA|4,!1,f)):this.type===Ma._class?(f=this.startNode(),c.declaration=this.parseClass(f,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;
c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==Ma.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};sg.checkExport=function(c,h,f){c&&(py.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};sg.checkPatternExport=function(c,h){var f=h.type;
if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};
sg.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,h[f].id)};sg.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};sg.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Ma.braceL);!this.eat(Ma.braceR);){if(f)f=!1;else if(this.expect(Ma.comma),this.afterTrailingComma(Ma.braceR))break;var m=this.startNode();
m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};sg.parseImport=function(c){this.next();this.type===Ma.string?(c.specifiers=Kda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ma.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};
sg.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Ma.name){var f=this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Ma.comma))return c}if(this.type===Ma.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Ma.braceL);!this.eat(Ma.braceR);){if(h)h=!1;
else if(this.expect(Ma.comma),this.afterTrailingComma(Ma.braceR))break;f=this.startNode();f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};sg.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};sg.isDirectiveCandidate=function(c){return"ExpressionStatement"===
c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var oo=lk.prototype;oo.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";
f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,
h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,
"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};oo.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};oo.parseSpread=function(c){var h=this.startNode();this.next();
h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,"SpreadElement")};oo.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ma.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};oo.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ma.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ma.bracketR,!0,!0);return this.finishNode(c,
"ArrayPattern");case Ma.braceL:return this.parseObj(!0)}return this.parseIdent()};oo.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ma.comma),h&&this.type===Ma.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Ma.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===Ma.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,
this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};oo.parseBindingListItem=function(c){return c};oo.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ma.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};oo.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,
(m?"Binding ":"Assigning to ")+c.name+" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(py.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;
case "ParenthesizedExpression":return m&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};oo.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;
default:this.checkLValSimple(c,h,f)}};oo.checkLValInnerPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var eh=lk.prototype;eh.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||
c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},
f[c]=!0)}};eh.parseExpression=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeAssign(c,h);if(this.type===Ma.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(Ma.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};eh.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=
h.trailingComma=-1):(h=new fC,m=!0);var d=this.start,k=this.startLoc;if(this.type===Ma.parenL||this.type===Ma.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===c;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===Ma.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===
Ma.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};eh.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Ma.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Ma.colon),
h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};eh.parseExprOps=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};eh.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==Ma._in)&&a>m){var d=this.type===Ma.logicalOR||this.type===Ma.logicalAND,k=this.type===Ma.coalesce;k&&(a=Ma.logicalAND.binop);
var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,f,c,a,b,d||k);(d&&this.type===Ma.coalesce||k&&(this.type===Ma.logicalOR||this.type===Ma.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};eh.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=
m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};eh.parseMaybeUnary=function(c,h,f){var m=this.start,n=this.startLoc;if(this.isContextual("await")&&this.canAwait){var a=this.parseAwait();h=!0}else if(this.type.prefix){a=this.startNode();var d=this.type===Ma.incDec;a.operator=this.value;a.prefix=!0;this.next();a.argument=this.parseMaybeUnary(null,!0,d);this.checkExpressionErrors(c,!0);d?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?
this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&qS(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):h=!0;a=this.finishNode(a,d?"UpdateExpression":"UnaryExpression")}else{a=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return a;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(m,n),c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}if(!f&&
this.eat(Ma.starstar))if(h)this.unexpected(this.lastTokStart);else return this.buildBinary(m,n,a,this.parseMaybeUnary(null,!1),"**",!1);else return a};eh.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&
(c.parenthesizedBind=-1),c.trailingComma>=h.start&&(c.trailingComma=-1));return h};eh.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),
d;c=d}};eh.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(Ma.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(Ma.bracketL);if(b||k&&this.type!==Ma.parenL&&this.type!==Ma.backQuote||this.eat(Ma.dot))h=this.startNodeAt(h,f),h.object=c,b?(h.property=this.parseExpression(),this.expect(Ma.bracketR)):h.property=this.type===Ma.privateId&&"Super"!==c.type?this.parsePrivateIdent():this.parseIdent("never"!==
this.options.allowReserved),h.computed=!!b,d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(Ma.parenL)){m=new fC;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(Ma.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(Ma.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),
this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===Ma.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,
f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};eh.parseExprAtom=function(c){this.type===Ma.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Ma._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),this.type!==Ma.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Ma.dot&&
this.type!==Ma.bracketL&&this.type!==Ma.parenL&&this.unexpected(),this.finishNode(h,"Super");case Ma._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Ma.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ma._function))return this.parseFunction(this.startNodeAt(c,f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Ma.arrow))return this.parseArrowExpression(this.startNodeAt(c,
f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ma.name&&!m&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ma.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Ma.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Ma.num:case Ma.string:return this.parseLiteral(this.value);case Ma._null:case Ma._true:case Ma._false:return h=
this.startNode(),h.value=this.type===Ma._null?null:this.type===Ma._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Ma.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Ma.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Ma.bracketR,!0,!0,c),this.finishNode(h,"ArrayExpression");case Ma.braceL:return this.parseObj(!1,
c);case Ma._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Ma._class:return this.parseClass(this.startNode(),!1);case Ma._new:return this.parseNew();case Ma.backQuote:return this.parseTemplate();case Ma._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};eh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);
switch(this.type){case Ma.parenL:return this.parseDynamicImport(c);case Ma.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};eh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ma.parenR)){var h=this.start;this.eat(Ma.comma)&&this.eat(Ma.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,"ImportExpression")};eh.parseImportMeta=function(c){this.next();var h=this.containsEsc;
c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};eh.parseLiteral=function(c){var h=this.startNode();h.value=c;h.raw=
this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};eh.parseParenExpression=function(){this.expect(Ma.parenL);var c=this.parseExpression();this.expect(Ma.parenR);return c};eh.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=this.startLoc,d=[],k=!0,b=!1,e=new fC,
l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ma.parenR;)if(k?k=!1:this.expect(Ma.comma),m&&this.afterTrailingComma(Ma.parenR,!0)){b=!0;break}else if(this.type===Ma.ellipsis){var q=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Ma.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;this.expect(Ma.parenR);if(c&&!this.canInsertSemicolon()&&
this.eat(Ma.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);q&&this.unexpected(q);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();return this.options.preserveParens?(h=
this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};eh.parseParenItem=function(c){return c};eh.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Lda=[];eh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ma.dot))return c.meta=h,h=this.containsEsc,c.property=this.parseIdent(!0),
"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===Ma._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===c.callee.type&&this.raise(h,
"Cannot use new with import()");this.eat(Ma.parenL)?c.arguments=this.parseExprList(Ma.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Lda;return this.finishNode(c,"NewExpression")};eh.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Ma.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};
this.next();h.tail=this.type===Ma.backQuote;return this.finishNode(h,"TemplateElement")};eh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Ma.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ma.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Ma.braceR),h.quasis.push(f=this.parseTemplateElement({isTagged:c}));
this.next();return this.finishNode(h,"TemplateLiteral")};eh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ma.name||this.type===Ma.num||this.type===Ma.string||this.type===Ma.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ma.star)&&!Hm.test(this.input.slice(this.lastTokEnd,this.start))};eh.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(Ma.braceR);){if(m)m=!1;else if(this.expect(Ma.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(Ma.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};eh.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(Ma.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Ma.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,"RestElement");this.type===
Ma.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Ma.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(Ma.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&8<=this.options.ecmaVersion&&
!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(Ma.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};eh.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===Ma.colon&&this.unexpected();this.eat(Ma.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ma.parenL?(h&&this.unexpected(),c.kind="init",
c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ma.comma||this.type===Ma.braceR||this.type===Ma.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):this.type===Ma.eq&&
d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===c.kind&&"RestElement"===
c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};eh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ma.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ma.bracketR),c.key;c.computed=!1}return c.key=this.type===Ma.num||this.type===Ma.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};eh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&(c.generator=
c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};eh.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(Ma.parenL);m.params=this.parseBindingList(Ma.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};eh.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};eh.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==Ma.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};eh.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};eh.checkParams=function(c,h){var f=Object.create(null),m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};eh.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(Ma.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Ma.comma)var d=null;else this.type===Ma.ellipsis?(d=this.parseSpread(m),m&&this.type===Ma.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};eh.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.currentThisScope().inClassFieldInit&&"arguments"===c&&this.raiseRecoverable(h,"Cannot use 'arguments' in class field initializer");this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};
eh.parseIdent=function(c,h){h=this.startNode();this.type===Ma.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};eh.parsePrivateIdent=function(){var c=this.startNode();this.type===
Ma.privateId?c.name=this.value:this.unexpected();this.next();this.finishNode(c,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c);return c};eh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Ma.semi||this.canInsertSemicolon()||this.type!==Ma.star&&!this.type.startsExpr?(h.delegate=
!1,h.argument=null):(h.delegate=this.eat(Ma.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};eh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var jH=lk.prototype;jH.raise=function(c,h){var f=ny(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};jH.raiseRecoverable=
jH.raise;jH.curPosition=function(){if(this.options.locations)return new oy(this.curLine,this.pos-this.lineStart)};var Rr=lk.prototype,Mda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};Rr.enterScope=function(c){this.scopeStack.push(new Mda(c))};Rr.exitScope=function(){this.scopeStack.pop()};Rr.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Rr.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=
-1<h.lexical.indexOf(c)||-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&
-1<n.functions.indexOf(c)){m=!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};Rr.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Rr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Rr.currentVarScope=function(){for(var c=this.scopeStack.length-
1;;c--){var h=this.scopeStack[c];if(h.flags&3)return h}};Rr.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var nu=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new Qv(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},vA=lk.prototype;vA.startNode=function(){return new nu(this,this.start,this.startLoc)};vA.startNodeAt=
function(c,h){return new nu(this,c,h)};vA.finishNode=function(c,h){return rS.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};vA.finishNodeAt=function(c,h,f,m){return rS.call(this,c,h,f,m)};vA.copyNode=function(c){var h=new nu(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var po=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},xj={b_stat:new po("{",!1),b_expr:new po("{",!0),b_tmpl:new po("${",!1),p_stat:new po("(",!1),p_expr:new po("(",
!0),q_tmpl:new po("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new po("function",!1),f_expr:new po("function",!0),f_expr_gen:new po("function",!0,!1,null,!0),f_gen:new po("function",!1,!1,null,!0)},kH=lk.prototype;kH.initialContext=function(){return[xj.b_stat]};kH.braceIsBlock=function(c){var h=this.curContext();return h===xj.f_expr||h===xj.f_stat?!0:c!==Ma.colon||h!==xj.b_stat&&h!==xj.b_expr?c===Ma._return||c===Ma.name&&this.exprAllowed?Hm.test(this.input.slice(this.lastTokEnd,
this.start)):c===Ma._else||c===Ma.semi||c===Ma.eof||c===Ma.parenR||c===Ma.arrow?!0:c===Ma.braceL?h===xj.b_stat:c===Ma._var||c===Ma._const||c===Ma.name?!1:!this.exprAllowed:!h.isExpr};kH.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};kH.updateContext=function(c){var h,f=this.type;f.keyword&&c===Ma.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Ma.parenR.updateContext=
Ma.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===xj.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ma.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?xj.b_stat:xj.b_expr);this.exprAllowed=!0};Ma.dollarBraceL.updateContext=function(){this.context.push(xj.b_tmpl);this.exprAllowed=!0};Ma.parenL.updateContext=function(c){this.context.push(c===Ma._if||c===Ma._for||
c===Ma._with||c===Ma._while?xj.p_stat:xj.p_expr);this.exprAllowed=!0};Ma.incDec.updateContext=function(){};Ma._function.updateContext=Ma._class.updateContext=function(c){!c.beforeExpr||c===Ma._else||c===Ma.semi&&this.curContext()!==xj.p_stat||c===Ma._return&&Hm.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ma.colon||c===Ma.braceL)&&this.curContext()===xj.b_stat?this.context.push(xj.f_stat):this.context.push(xj.f_expr);this.exprAllowed=!1};Ma.backQuote.updateContext=function(){this.curContext()===
xj.q_tmpl?this.context.pop():this.context.push(xj.q_tmpl);this.exprAllowed=!1};Ma.star.updateContext=function(c){c===Ma._function&&(c=this.context.length-1,this.context[c]=this.context[c]===xj.f_expr?xj.f_expr_gen:xj.f_gen);this.exprAllowed=!0};Ma.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Ma.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var R6={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
S6={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
sS={};hC(9);hC(10);hC(11);hC(12);var Qf=lk.prototype,Bq=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"")+(13<=c.options.ecmaVersion?"d":"");this.unicodeProperties=sS[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};Bq.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};Bq.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Bq.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||
55295>=n||57344<=n||c+1>=m)return n;c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Bq.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};Bq.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Bq.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,
c),c)};Bq.prototype.advance=function(c){void 0===c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Bq.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Qf.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Qf.validateRegExpPattern=function(c){this.regexp_pattern(c);
!c.switchN&&9<=this.options.ecmaVersion&&0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Qf.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");
for(var h=0,f=c.backReferenceNames;h<f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Qf.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Qf.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Qf.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&
this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Qf.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),
c.lastAssertionIsQuantifiable=!f,!0}c.pos=h;return!1};Qf.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Qf.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Qf.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==
m&&m<n&&!h&&c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Qf.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Qf.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Qf.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Qf.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Qf.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Qf.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Qf.regexp_eatSyntaxCharacter=function(c){var h=c.current();return tS(h)?(c.lastIntValue=h,c.advance(),!0):!1};Qf.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!tS(f);)c.advance();return c.pos!==h};Qf.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Qf.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Qf.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Qf.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=iC(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=iC(c.lastIntValue);return!0}return!1};Qf.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if(Vp(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Qf.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(Pv(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Qf.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Qf.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Qf.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Qf.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Qf.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Qf.regexp_eatZero=
function(c){return 48!==c.current()||jC(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Qf.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Qf.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Qf.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Qf.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Qf.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Qf.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Qf.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Qf.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){py.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Qf.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Qf.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";uS(h=c.current());)c.lastStringValue+=iC(h),c.advance();return""!==c.lastStringValue};Qf.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";T6(h=c.current());)c.lastStringValue+=iC(h),c.advance();return""!==c.lastStringValue};Qf.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Qf.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Qf.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Qf.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Qf.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Qf.regexp_eatClassControlLetter=function(c){var h=
c.current();return jC(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Qf.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Qf.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;jC(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Qf.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;vS(f=c.current());)c.lastIntValue=
16*c.lastIntValue+wS(f),c.advance();return c.pos!==h};Qf.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Qf.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Qf.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!vS(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+wS(n);c.advance()}return!0};var lH=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Qv(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},qh=lk.prototype;qh.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new lH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};qh.getToken=function(){this.next();return new lH(this)};"undefined"!==typeof Symbol&&(qh[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Ma.eof,value:h}}}});qh.curContext=function(){return this.context[this.context.length-1]};qh.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ma.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};qh.readToken=function(c){return Vp(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};qh.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||56320<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return 56319>=h||57344<=h?c:(c<<10)+h-56613888};qh.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){mt.lastIndex=h;for(var m;(m=mt.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+
2,f),h,this.pos,c,this.curPosition())};qh.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!dr(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};qh.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;
case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&U0.test(String.fromCharCode(c)))++this.pos;else break a}}};qh.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());
var f=this.type;this.type=c;this.value=h;this.updateContext(f)};qh.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Ma.ellipsis);++this.pos;return this.finishToken(Ma.dot)};qh.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ma.assign,
2):this.finishOp(Ma.slash,1)};qh.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?Ma.star:Ma.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=Ma.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Ma.assign,f+1):this.finishOp(m,f)};qh.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ma.assign,3):this.finishOp(124===
c?Ma.logicalOR:Ma.logicalAND,2):61===h?this.finishOp(Ma.assign,2):this.finishOp(124===c?Ma.bitwiseOR:Ma.bitwiseAND,1)};qh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ma.assign,2):this.finishOp(Ma.bitwiseXOR,1)};qh.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Hm.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ma.incDec,
2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===h?this.finishOp(Ma.assign,2):this.finishOp(Ma.plusMin,1)};qh.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Ma.assign,f+1):this.finishOp(Ma.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),
this.skipSpace(),this.nextToken();61===h&&(f=2);return this.finishOp(Ma.relational,f)};qh.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Ma.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ma.arrow)):this.finishOp(61===c?Ma.eq:Ma.prefix,1)};qh.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=
this.input.charCodeAt(this.pos+2);if(48>f||57<f)return this.finishOp(Ma.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ma.assign,3):this.finishOp(Ma.coalesce,2)}return this.finishOp(Ma.question,1)};qh.readToken_numberSign=function(){var c=35;if(13<=this.options.ecmaVersion&&(++this.pos,c=this.fullCharCodeAtPos(),Vp(c,!0)||92===c))return this.finishToken(Ma.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+kC(c)+"'")};qh.getTokenFromCode=
function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ma.parenL);case 41:return++this.pos,this.finishToken(Ma.parenR);case 59:return++this.pos,this.finishToken(Ma.semi);case 44:return++this.pos,this.finishToken(Ma.comma);case 91:return++this.pos,this.finishToken(Ma.bracketL);case 93:return++this.pos,this.finishToken(Ma.bracketR);case 123:return++this.pos,this.finishToken(Ma.braceL);case 125:return++this.pos,this.finishToken(Ma.braceR);case 58:return++this.pos,
this.finishToken(Ma.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ma.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();
case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(Ma.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+kC(c)+"'")};qh.finishOp=function(c,h){var f=
this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};qh.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Hm.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);
m=this.regexpState||(this.regexpState=new Bq(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Ma.regexp,{pattern:c,flags:h,value:f})};qh.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,
"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?
null:a};qh.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=xS(this.input.slice(h,this.pos)),++this.pos):Vp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(Ma.num,f)};qh.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=
2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=xS(this.input.slice(h,this.pos)),++this.pos,Vp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ma.num,f);f&&/[89]/.test(this.input.slice(h,this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),
43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Vp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ma.num,f)};qh.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<
h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};qh.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=this.pos):(dr(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);
return this.finishToken(Ma.string,h)};var W0={};qh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===W0)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};qh.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw W0;this.raise(c,h)};qh.readTmplToken=function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);
if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ma.template||this.type===Ma.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Ma.dollarBraceL);++this.pos;return this.finishToken(Ma.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Ma.template,c)}if(92===f)c+=this.input.slice(h,this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(dr(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};qh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(Ma.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qh.readEscapedChar=
function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return kC(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),
c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return dr(h)?"":String.fromCharCode(h)}};
qh.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};qh.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Pv(n,m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),
++this.pos,n=this.readCodePoint(),(h?Vp:Pv)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=kC(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};qh.readWord=function(){var c=this.readWord1(),h=Ma.name;this.keywords.test(c)&&(h=hK[c]);return this.finishToken(h,c)};lk.acorn={Parser:lk,version:"8.4.1",defaultOptions:eC,Position:oy,SourceLocation:Qv,getLineInfo:ny,Node:nu,TokenType:Wh,tokTypes:Ma,keywordTypes:hK,TokContext:po,tokContexts:xj,isIdentifierChar:Pv,isIdentifierStart:Vp,
Token:lH,isNewLine:dr,lineBreak:Hm,lineBreakG:mt,nonASCIIwhitespace:U0};var Ai=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ma.eof,start:0,end:0};this.tok.validateRegExpFlags=yS;this.tok.validateRegExpPattern=yS;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Qv(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};Ai.prototype.startNode=function(){return new nu(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Ai.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};Ai.prototype.startNodeAt=function(c){return this.options.locations?new nu(this.toks,c[0],c[1]):new nu(this.toks,c)};Ai.prototype.finishNode=function(c,h){c.type=h;c.end=this.last.end;
this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Ai.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Ma.name,start:h.start,end:h.start,loc:h.loc};return h};Ai.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Ai.prototype.dummyString=function(){var c=this.dummyNode("Literal");
c.value=c.raw="\u2716";return c};Ai.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Ai.prototype.isContextual=function(c){return this.tok.type===Ma.name&&this.tok.value===c};Ai.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ma.name)};Ai.prototype.canInsertSemicolon=function(){return this.tok.type===Ma.eof||this.tok.type===Ma.braceR||Hm.test(this.input.slice(this.last.end,this.tok.start))};Ai.prototype.semicolon=function(){return this.eat(Ma.semi)};
Ai.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};Ai.prototype.pushCx=function(){this.context.push(this.curIndent)};Ai.prototype.popCx=function(){this.curIndent=this.context.pop()};Ai.prototype.lineEnd=function(c){for(;c<this.input.length&&!dr(this.input.charCodeAt(c));)++c;return c};Ai.prototype.indentationAfter=function(c){for(var h=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++h;else if(9===f)h+=
this.options.tabSize;else return h}};Ai.prototype.closes=function(c,h,f,m){return this.tok.type===c||this.tok.type===Ma.eof?!0:f!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!m||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};Ai.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};Ai.prototype.extend=function(c,h){this[c]=h(this[c])};Ai.prototype.parse=
function(){this.next();return this.parseTopLevel()};Ai.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Ai.parse=function(c,h){return(new this(c,h)).parse()};Ai.BaseParser=lk;var mH=Ai.prototype;mH.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};mH.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ma.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ma.ellipsis),new lH(this.toks)}catch(m){if(!(m instanceof SyntaxError))throw m;var c=m.message,h=m.raisedAt,f=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(m.pos+1),/string/.test(c))f={start:m.pos,end:h,type:Ma.string,value:this.input.slice(m.pos+
1,h)};else if(/regular expr/i.test(c)){f=this.input.slice(m.pos,h);try{f=new RegExp(f)}catch(n){}f={start:m.pos,end:h,type:Ma.regexp,value:f}}else f=/template/.test(c)?{start:m.pos,end:h,type:Ma.template,value:this.input.slice(m.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!U6(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!dr(c)););else if(/unexpected character/i.test(c))h++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw m;this.resetTo(h);!0===f&&(f={start:h,end:h,type:Ma.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new Qv(this.toks,ny(this.input,f.start),ny(this.input,f.end))),f}};mH.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=mt.lastIndex=0;for(var f;(f=mt.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};mH.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var Jl=Ai.prototype;Jl.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,ny(this.input,
0)]:0);for(c.body=[];this.tok.type!==Ma.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};Jl.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Ma._var;var f="let"}switch(c){case Ma._break:case Ma._continue:this.next();var m=c===Ma._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Ma.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,m?"BreakStatement":"ContinueStatement");case Ma._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Ma._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Ma._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Ma._for:this.next();m=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ma.parenL);if(this.tok.type===
Ma.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Ma._var||this.tok.type===Ma._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ma._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ma._in&&(h.await=m),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===Ma._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ma._in&&(h.await=
m),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Ma._function:return this.next(),this.parseFunction(h,!0);case Ma._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Ma._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Ma._return:return this.next(),this.eat(Ma.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");
case Ma._switch:c=this.curIndent;f=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Ma.braceL);!this.closes(Ma.braceR,c,f,!0);)if(this.tok.type===Ma._case||this.tok.type===Ma._default){var n=this.tok.type===Ma._case;m&&this.finishNode(m,"SwitchCase");h.cases.push(m=this.startNode());m.consequent=[];this.next();m.test=n?this.parseExpression():null;this.expect(Ma.colon)}else m||(h.cases.push(m=this.startNode()),m.consequent=[],m.test=
null),m.consequent.push(this.parseStatement());m&&this.finishNode(m,"SwitchCase");this.popCx();this.eat(Ma.braceR);return this.finishNode(h,"SwitchStatement");case Ma._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Ma._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Ma._catch&&(m=this.startNode(),this.next(),this.eat(Ma.parenL)?(m.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ma.parenR)):
m.param=null,m.body=this.parseBlock(),h.handler=this.finishNode(m,"CatchClause")),h.finalizer=this.eat(Ma._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Ma._var:case Ma._const:return this.parseVar(h,!1,f||this.tok.value);case Ma._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case Ma._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case Ma.braceL:return this.parseBlock();case Ma.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Ma._class:return this.parseClass(!0);case Ma._import:return 10<this.options.ecmaVersion&&(m=this.lookAhead(1).type,m===Ma.parenL||m===Ma.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case Ma._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);m=this.parseExpression();if(Lo(m))return this.next(),this.tok.type===Ma.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Ma.name&&"Identifier"===m.type&&this.eat(Ma.colon))return h.body=this.parseStatement(),h.label=m,this.finishNode(h,"LabeledStatement");h.expression=m;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};Jl.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Ma.braceL);var h=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(Ma.braceR,h,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ma.braceR);return this.finishNode(c,"BlockStatement")};Jl.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Ma.semi)&&this.tok.type!==Ma.semi&&(c.test=this.parseExpression());this.eat(Ma.semi)&&this.tok.type!==Ma.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ma.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};Jl.parseForIn=
function(c,h){var f=this.tok.type===Ma._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Ma.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};Jl.parseVar=function(c,h,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(Ma.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(Ma.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};Jl.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Ma.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Ma._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var f=this.curIndent+1,m=
this.curLineStart;this.eat(Ma.braceL);this.curIndent+1<f&&(f=this.curIndent,m=this.curLineStart);for(;!this.closes(Ma.braceR,f,m);){var n=this.parseClassElement();n&&h.body.body.push(n)}this.popCx();this.eat(Ma.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};Jl.parseClassElement=function(){if(this.eat(Ma.semi))return null;var c=
this.options,h=c.ecmaVersion,f=c.locations,m=this.curIndent,n=this.curLineStart;c=this.startNode();var a="",d=!1,k=!1,b="method";c.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.toks.type===Ma.star?c.static=!0:a="static");!a&&8<=h&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==Ma.star||this.canInsertSemicolon()?a="async":k=!0);if(!a){d=this.eat(Ma.star);var e=this.toks.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?
b=e:a=e}if(a)c.computed=!1,c.key=this.startNodeAt(f?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),c.key.name=a,this.finishNode(c.key,"Identifier");else if(this.parseClassElementName(c),Lo(c.key))return Lo(this.parseMaybeAssign())&&this.next(),this.eat(Ma.comma),null;13>h||this.toks.type===Ma.parenL||"method"!==b||d||k?(c.kind=c.computed||c.static||d||k||"method"!==b||!("Identifier"===c.key.type&&"constructor"===c.key.name||"Literal"===c.key.type&&"constructor"===c.key.value)?
b:"constructor",c.value=this.parseMethod(d,k),this.finishNode(c,"MethodDefinition")):(this.eat(Ma.eq)?this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?c.value=null:(h=this.inAsync,f=this.inGenerator,this.inGenerator=this.inAsync=!1,c.value=this.parseMaybeAssign(),this.inAsync=h,this.inGenerator=f):c.value=null,this.semicolon(),this.finishNode(c,"PropertyDefinition"));return c};Jl.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};Jl.parseClassElementName=
function(c){this.toks.type===Ma.privateId?(c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Jl.parseFunction=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ma.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===Ma.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inGenerator=c.generator;this.inFunction=!0;c.params=this.parseFunctionParams();
c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};Jl.parseExport=function(){var c=this.startNode();this.next();if(this.eat(Ma.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");
if(this.eat(Ma._default)){var h;if(this.tok.type===Ma._function||(h=this.toks.isAsyncFunction())){var f=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(f,"nullableID",h)}else this.tok.type===Ma._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=
[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};Jl.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===Ma.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ma.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");
this.eat(Ma.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ma.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};Jl.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ma.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;
var f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(Ma.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(Ma.braceR,h+(this.curLineStart<=m?1:0),f);){var n=this.startNode();if(this.eat(Ma.star))n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Lo(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,
"ImportSpecifier")}c.push(n);this.eat(Ma.comma)}this.eat(Ma.braceR);this.popCx()}return c};Jl.parseExportSpecifierList=function(){var c=[],h=this.curIndent,f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(Ma.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(Ma.braceR,h+(this.curLineStart<=m?1:0),f)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Lo(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,
"ExportSpecifier");c.push(n);this.eat(Ma.comma)}this.eat(Ma.braceR);this.popCx();return c};var mi=Ai.prototype;mi.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};mi.parseExpression=function(c){var h=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===Ma.comma){h=this.startNodeAt(h);for(h.expressions=[f];this.eat(Ma.comma);)h.expressions.push(this.parseMaybeAssign(c));
return this.finishNode(h,"SequenceExpression")}return f};mi.parseParenExpression=function(){this.pushCx();this.expect(Ma.parenL);var c=this.parseExpression();this.popCx();this.expect(Ma.parenR);return c};mi.parseMaybeAssign=function(c){if(this.inGenerator&&this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ma.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ma.star),c.argument=this.parseMaybeAssign()),
this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Ma.eq?this.toAssignable(f):this.checkLVal(f),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):f};mi.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(Ma.question)?(h=this.startNodeAt(h),h.test=f,h.consequent=this.parseMaybeAssign(),
h.alternate=this.expect(Ma.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):f};mi.parseExprOps=function(c){var h=this.storeCurrentPos(),f=this.curIndent,m=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,f,m)};mi.parseExprOp=function(c,h,f,m,n,a){if(this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine())return c;var d=this.tok.type.binop;if(null!=d&&(!m||this.tok.type!==Ma._in)&&d>f){var k=this.startNodeAt(h);k.left=c;
k.operator=this.tok.value;this.next();this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine()?k.right=this.dummyIdent():(c=this.storeCurrentPos(),k.right=this.parseExprOp(this.parseMaybeUnary(!1),c,d,m,n,a));this.finishNode(k,/&&|\|\||\?\?/.test(k.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(k,h,f,m,n,a)}return c};mi.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&
this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var m=this.tok.type===Ma.incDec;m||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);m&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,m?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ma.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&
!this.canInsertSemicolon();)m=this.startNodeAt(h),m.operator=this.tok.value,m.prefix=!1,m.argument=this.checkLVal(f),this.next(),f=this.finishNode(m,"UpdateExpression");return!c&&this.eat(Ma.starstar)?(c=this.startNodeAt(h),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};mi.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};mi.parseSubscripts=function(c,
h,f,m,n){for(var a=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine())if(this.tok.type===Ma.dot&&this.curIndent===m)--m;else break;var k="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),b=a&&this.eat(Ma.questionDot);b&&(d=!0);if(b&&this.tok.type!==Ma.parenL&&this.tok.type!==Ma.bracketL&&this.tok.type!==Ma.backQuote||this.eat(Ma.dot)){var e=this.startNodeAt(h);e.object=c;this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?
e.property=this.dummyIdent():e.property=this.parsePropertyAccessor()||this.dummyIdent();e.computed=!1;a&&(e.optional=b);c=this.finishNode(e,"MemberExpression")}else if(this.tok.type===Ma.bracketL)this.pushCx(),this.next(),e=this.startNodeAt(h),e.object=c,e.property=this.parseExpression(),e.computed=!0,a&&(e.optional=b),this.popCx(),this.expect(Ma.bracketR),c=this.finishNode(e,"MemberExpression");else if(f||this.tok.type!==Ma.parenL)if(this.tok.type===Ma.backQuote)b=this.startNodeAt(h),b.tag=c,b.quasi=
this.parseTemplate(),c=this.finishNode(b,"TaggedTemplateExpression");else break;else{e=this.parseExprList(Ma.parenR);if(k&&this.eat(Ma.arrow))return this.parseArrowExpression(this.startNodeAt(h),e,!0);k=this.startNodeAt(h);k.callee=c;k.arguments=e;a&&(k.optional=b);c=this.finishNode(k,"CallExpression")}}d&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};mi.parseExprAtom=function(){switch(this.tok.type){case Ma._this:case Ma._super:var c=this.tok.type===Ma._this?
"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case Ma.name:h=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ma._function))return this.parseFunction(this.startNodeAt(h),!1,!0);this.tok.type===Ma.name&&(c=this.parseIdent(),f=!0)}return this.eat(Ma.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],f):c;case Ma.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,
flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case Ma.num:case Ma.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ma.num&&110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Ma._null:case Ma._true:case Ma._false:return h=this.startNode(),h.value=this.tok.type===Ma._null?
null:this.tok.type===Ma._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case Ma.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ma.parenR);if(this.eat(Ma.arrow))return c=c.expressions||[c],c.length&&Lo(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Ma.bracketL:return h=this.startNode(),
h.elements=this.parseExprList(Ma.bracketR,!0),this.finishNode(h,"ArrayExpression");case Ma.braceL:return this.parseObj();case Ma._class:return this.parseClass(!1);case Ma._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Ma._new:return this.parseNew();case Ma.backQuote:return this.parseTemplate();case Ma._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};mi.parseExprImport=function(){var c=this.startNode(),
h=this.parseIdent(!0);switch(this.tok.type){case Ma.parenL:return this.parseDynamicImport(c);case Ma.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};mi.parseDynamicImport=function(c){c.source=this.parseExprList(Ma.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};mi.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};mi.parseNew=function(){var c=this.startNode(),
h=this.curIndent,f=this.curLineStart,m=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ma.dot))return c.meta=m,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");m=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),m,!0,h,f);c.arguments=this.tok.type===Ma.parenL?this.parseExprList(Ma.parenR):[];return this.finishNode(c,"NewExpression")};mi.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ma.invalidTemplate?{raw:this.tok.value,
cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Ma.backQuote;return this.finishNode(c,"TemplateElement")};mi.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ma.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=
!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Ma.backQuote);return this.finishNode(c,"TemplateLiteral")};mi.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,f=this.curLineStart;this.eat(Ma.braceL);this.curIndent+1<h&&(h=this.curIndent,f=this.curLineStart);for(;!this.closes(Ma.braceR,h,f);){var m=this.startNode(),n=void 0,a=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ma.ellipsis))m.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(m,
"SpreadElement"));else{6<=this.options.ecmaVersion&&(a=this.storeCurrentPos(),m.method=!1,m.shorthand=!1,n=this.eat(Ma.star));this.parsePropertyName(m);if(this.toks.isAsyncProp(m)){var d=!0;n=9<=this.options.ecmaVersion&&this.eat(Ma.star);this.parsePropertyName(m)}else d=!1;Lo(m.key)?Lo(this.parseMaybeAssign())&&this.next():(this.eat(Ma.colon)?(m.kind="init",m.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ma.parenL||this.tok.type===Ma.braceL)?(m.kind="init",m.method=
!0,m.value=this.parseMethod(n,d)):5<=this.options.ecmaVersion&&"Identifier"===m.key.type&&!m.computed&&("get"===m.key.name||"set"===m.key.name)&&this.tok.type!==Ma.comma&&this.tok.type!==Ma.braceR&&this.tok.type!==Ma.eq?(m.kind=m.key.name,this.parsePropertyName(m),m.value=this.parseMethod(!1)):(m.kind="init",6<=this.options.ecmaVersion?this.eat(Ma.eq)?(n=this.startNodeAt(a),n.operator="=",n.left=m.key,n.right=this.parseMaybeAssign(),m.value=this.finishNode(n,"AssignmentExpression")):m.value=m.key:
m.value=this.dummyIdent(),m.shorthand=!0),c.properties.push(this.finishNode(m,"Property")))}this.eat(Ma.comma)}this.popCx();this.eat(Ma.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};mi.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ma.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ma.bracketR);return}c.computed=!1}var h=this.tok.type===Ma.num||this.tok.type===
Ma.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};mi.parsePropertyAccessor=function(){if(this.tok.type===Ma.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===Ma.privateId)return this.parsePrivateIdent()};mi.parseIdent=function(){var c=this.tok.type===Ma.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};mi.parsePrivateIdent=function(){var c=this.startNode();
c.name=this.tok.value;this.next();return this.finishNode(c,"PrivateIdentifier")};mi.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};mi.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";
for(var f=0,m=c.properties;f<m.length;f+=1)this.toAssignable(m[f],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};mi.toAssignableList=function(c,h){for(var f=0;f<c.length;f+=1)this.toAssignable(c[f],
h);return c};mi.parseFunctionParams=function(c){c=this.parseExprList(Ma.parenR);return this.toAssignableList(c,!0)};mi.parseMethod=function(c,h){var f=this.startNode(),m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!h);this.inAsync=f.async;this.inGenerator=f.generator;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(f,"FunctionExpression")};mi.parseArrowExpression=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inGenerator=!1;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Ma.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,"ArrowFunctionExpression")};mi.parseExprList=function(c,h){this.pushCx();var f=this.curIndent,m=this.curLineStart,n=[];for(this.next();!this.closes(c,f+1,m);)if(this.eat(Ma.comma))n.push(h?null:this.dummyIdent());else{var a=this.parseMaybeAssign();if(Lo(a)){if(this.closes(c,f,m))break;this.next()}else n.push(a);this.eat(Ma.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=
this.tok.loc.start));return n};mi.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};eC.tabSize=4;var nH=Object.freeze({__proto__:null,LooseParser:Ai,isDummy:Lo,parse:function(c,h){return Ai.parse(c,h)}}),re=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");re.forEachNode=function(c,h,f,m){m=m||{};var n=m.traversal||"preorder",a=re.obj.clone(m.visitors?m.visitors:re.walk.make(re.custom.visitors.withMemberExpression)),
d="preorder"===n?function(k,b,e,l,p){h(e,f,l,b);return k(e,l+1,p)}:function(k,b,e,l,p){k=k(e,l+1,p);h(e,f,l,b);return k};Object.keys(a).forEach(function(k){var b=a[k];a[k]=function(e,l,p){return d(b,k,e,l,p)}});re.walk.recursive(c,0,null,a);return c};re.matchNodes=function(c,h,f,m){return re.forEachNode(c,function(n,a,d,k){if(h[n.type])h[n.type](n,a,d,k)},f,m)};re.findNodesIncluding=lC;re.withParentInfo=function(c,h,f){function m(b){var e={id:re.string.newUUID(),parentScope:b,containingScopes:[]};
b&&b.containingScopes.push(e);return e}f=f||{};var n=re.walk.make({Function:function(b,e,l){e&&e.scope&&(e.scope=m(e.scope));l(b.body,e,"ScopeBody")},VariableDeclarator:function(b,e,l){b.init&&l(b.init,e,"Expression")},VariableDeclaration:function(b,e,l){for(var p=0;p<b.declarations.length;++p){var q=b.declarations[p];q&&l(q,e,"VariableDeclarator")}},ObjectExpression:function(b,e,l){for(var p=0;p<b.properties.length;++p){var q=b.properties[p];l(q.key,e,"Expression");l(q.value,e,"Expression")}},MemberExpression:function(b,
e,l){l(b.object,e,"Expression");l(b.property,e,"Expression")}},re.walk.base),a,d=[];re.forEachNode(c,function(b){re.arr.withoutAll(Object.keys(b),["end","start","type","source","raw"]).forEach(function(e){if(!b.__lookupGetter__(e)){var l=b[e];b.__defineGetter__(e,function(){a=e;return l});d.push([b,e,b[e]])}})},null,{visitors:n});var k=[];Object.keys(n).forEach(function(b){var e=n[b];n[b]=function(l,p,q){return b===l.type||f.visitAllNodes?(k.push(h.call(null,l,{scope:p.scope,depth:p.depth,parent:p.parent,
type:b,propertyInParent:a})),e(l,{scope:p.scope,parent:l,depth:p.depth+1},q)):e(l,p,q)}});re.walk.recursive(c,{scope:m(),parent:null,propertyInParent:"",depth:0},null,n);d.forEach(function(b){delete b[0][b[1]];b[0][b[1]]=b[2]});return k};re.copy=iK;re.findSiblings=jK;re.findNodeByAstIndex=kK;re.findStatementOfNode=lK;re.addAstIndex=qy;re.obj=df;re.arr=Ke;re.string=rg;re.Path=Ag;re.withMozillaAstDo=ou;re.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?
self:void 0;re.acorn=rp;re.walk=no;re.loose=nH;re.custom={};re.custom.forEachNode=re.forEachNode;re.custom.matchNodes=re.matchNodes;re.custom.findNodesIncluding=re.findNodesIncluding;re.custom.withParentInfo=re.withParentInfo;re.custom.copy=re.copy;re.custom.findSiblings=re.findSiblings;re.custom.findNodeByAstIndex=re.findNodeByAstIndex;re.custom.findStatementOfNode=re.findStatementOfNode;re.custom.addAstIndex=re.addAstIndex;var Sr=za("bM",re.custom);re.walk=no;re.walk=no;re.loose=nH;re.loose=nH;
re.acorn=rp;re.acorn=rp;re.custom=Sr;re.custom=Sr;re.findStatementOfNode=lK;re.findStatementOfNode=lK;re.addAstIndex=qy;re.addAstIndex=qy;re.findNodesIncluding=lC;re.findNodesIncluding=lC;re.findSiblings=jK;re.findSiblings=jK;re.findNodeByAstIndex=kK;re.findNodeByAstIndex=kK;re.copy=iK;re.copy=iK;re.custom.visitors={stopAtFunctions:re.walk.make(Object.assign({Function:function(){}},re.walk.base)),withMemberExpression:re.walk.make({MemberExpression:function(c,h,f){f(c.object,h,"Expression");f(c.property,
h,"Expression")}},re.walk.base)};var Lh=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");Lh.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var f=c.body[h];"BlockStatement"===f.type&&f[Lh.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(f.body))}return c};Lh.block=function(c){return{type:"BlockStatement",body:c}};Lh.Visitor=Jd;var sp=function(){return Lh.Visitor.apply(this,arguments)||this};$jscomp.inherits(sp,Lh.Visitor);sp.prototype.accept=
function(c,h,f){this.doFunc(c,h,f);return Lh.Visitor.prototype.accept.call(this,c,h,f)};sp.run=function(c,h,f){var m=new this;m.doFunc=h;m.accept(c,f,[]);return f};Lh.AllNodesVisitor=sp;var pu=function(){return Lh.Visitor.apply(this,arguments)||this};$jscomp.inherits(pu,Lh.Visitor);pu.prototype.accept=function(c,h,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:f}),c;default:return Lh.Visitor.prototype.accept.call(this,
c,h,f)}};pu.run=function(c){var h=[];(new this).accept(c,h,[]);return h};Lh.FindToplevelFuncDeclVisitor=pu;Lh.canBeInlinedSym=Symbol("canBeInlined");var xn=function(){return Lh.Visitor.apply(this,arguments)||this};$jscomp.inherits(xn,Lh.Visitor);xn.prototype.accept=function(c,h,f){c=this.replacer(Lh.Visitor.prototype.accept.call(this,c,h,f));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Lh.block(c),(h[Lh.canBeInlinedSym]=!0,h)):c};xn.prototype.visitBlockStatement=function(c,h,f){return Lh.blockInliner(Lh.Visitor.prototype.visitBlockStatement.call(this,
c,h,f))};xn.prototype.visitProgram=function(c,h,f){return Lh.blockInliner(Lh.Visitor.prototype.visitProgram.call(this,c,h,f))};xn.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,[])};Lh.ReplaceManyVisitor=xn;var qo=function(){return Lh.Visitor.apply(this,arguments)||this};$jscomp.inherits(qo,Lh.Visitor);qo.prototype.accept=function(c,h,f){return this.replacer(Lh.Visitor.prototype.accept.call(this,c,h,f),f)};qo.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,
[])};Lh.ReplaceVisitor=qo;Lh.AllNodesVisitor=sp;Lh.AllNodesVisitor=sp;Lh.FindToplevelFuncDeclVisitor=pu;Lh.FindToplevelFuncDeclVisitor=pu;Lh.ReplaceVisitor=qo;Lh.ReplaceVisitor=qo;Lh.ReplaceManyVisitor=xn;Lh.ReplaceManyVisitor=xn;var mg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");mg.addSource=mC;mg.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return mg.findNodesIncluding(h,c)};mg.parseFunction=er;mg.fuzzyParse=Wp;mg.acornParseAsyncAware=function(c,h){if(h.onComment){var f=
h.onComment;h.onComment=function(a,d,k,b,e,l){return f.call(this,a,d,k-14,b-14,e,l)}}var m=mg.acorn.parse("async () => {\n"+c+"\n}",h);if(m.loc)var n=m.loc.constructor;m={body:m.body[0].expression.body.body,sourceType:"module",type:"Program"};mg.AllNodesVisitor.run(m,function(a,d,k){if(!a._positionFixed){a._positionFixed=!0;if(a.start||0===a.start)a.start-=14,a.end-=14;a.loc&&n&&(k=a.loc,d=k.start,k=k.end,a.loc=new n(h,{column:d.column,line:d.line-1},{column:k.column,line:k.line-1}));h.addSource&&
!a.source&&(a.source=c.slice(a.start,a.end))}});m.start=m.body[0].start;m.end=mg.arr.last(m.body).end;h.addSource&&(m.source=c);m.body[0].loc&&n&&(m.loc=new n(h,m.body[0].loc.start,mg.arr.last(m.body).loc.end));return m};mg.parse=Bj;mg.arr=Ke;mg.acorn=rp;mg.loose=nH;mg.walk=no;mg.addAstIndex=qy;mg.findNodesIncluding=lC;mg.custom=Sr;mg.AllNodesVisitor=sp;mg.walk=no;mg.walk=no;mg.parse=Bj;mg.parse=Bj;mg.parseFunction=er;mg.parseFunction=er;mg.fuzzyParse=Wp;mg.fuzzyParse=Wp;mg.addSource=mC;mg.addSource=
mC;mg.custom.addSource=mg.addSource;var Zf=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");Zf.string=rg;Zf.Path=Ag;Zf.BaseVisitor=Jd;Zf.PrinterVisitor=ix;Zf.ComparisonVisitor=Ui;Zf.stringify=Yi;Zf.addAstIndex=qy;Zf.parse=Bj;Zf.addSource=mC;Zf.methods={withMozillaAstDo:function(c,h,f){var m=new Zf.BaseVisitor,n=m.accept;m.accept=function(a,d,k){h=f(function(){n.call(m,a,d,k)},a,d,k);return a};m.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var f=h.printSource||
!1,m=h.printPositions||!1,n=h.printIndex||!1,a=[];if("string"===typeof c){var d=c;c=Zf.parse(c)}else d=h.source||c.source;f&&!c.source&&(d||(d=Zf.stringify(c),c=Zf.parse(d)),Zf.addSource(c,d));(new Zf.PrinterVisitor).accept(c,{index:0,tree:a},[]);return Zf.string.printTree(a[0],function(k){var b=k.path+":"+k.node.type,e=[];n&&e.push(k.index);m&&e.push(k.node.start+"-"+k.node.end);f&&(k=k.node.source||d.slice(k.node.start,k.node.end),k=Zf.string.print(k.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),e.push(k));e.length&&(b+="("+e.join(",")+")");return b},function(k){return k.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new Zf.ComparisonVisitor).accept(c,h,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,f){c.astIndex||Zf.addAstIndex(c);f=new Zf.BaseVisitor;var m=null;(f.accept=function(n,a,d,k){if(!m)return a=a.concat(k),n.astIndex===
h&&(m={pathString:a.map(function(b){return"string"===typeof b?"."+b:"["+b+"]"}).join(""),path:a,node:n}),this["visit"+n.type](n,a,d,k)}).call(f,c,[],{},[]);return m},rematchAstWithSource:function(c,h,f,m){f=!!f;h=Zf.parse(h,f?{locations:!0}:void 0);var n=new Zf.BaseVisitor;m&&(h=Zf.Path(m).get(h));n.accept=function(a,d,k){k=k||[];var b=k.reduce(function(e,l){return e[l]},c);b.start=a.start;b.end=a.end;f&&(b.loc=a.loc);return this["visit"+a.type](a,d,k)};n.accept(h)}};Zf.withMozillaAstDo=Zf.methods.withMozillaAstDo;
Zf.printAst=Zf.methods.printAst;Zf.compareAst=Zf.methods.compareAst;Zf.pathToNode=Zf.methods.pathToNode;Zf.rematchAstWithSource=Zf.methods.rematchAstWithSource;var ou=Zf.withMozillaAstDo,wA=Zf.printAst,xA=Zf.compareAst,yA=Zf.pathToNode,zA=Zf.rematchAstWithSource;Zf.BaseVisitor=Jd;Zf.BaseVisitor=Jd;Zf.withMozillaAstDo=ou;Zf.withMozillaAstDo=ou;Zf.printAst=wA;Zf.printAst=wA;Zf.compareAst=xA;Zf.compareAst=xA;Zf.pathToNode=yA;Zf.pathToNode=yA;Zf.rematchAstWithSource=zA;Zf.rematchAstWithSource=zA;var ne=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");ne.isIdentifier=nC;ne.id=ry;ne.literal=oC;ne.exprStmt=sy;ne.returnStmt=ty;ne.empty=pC;ne.binaryExpr=qC;ne.funcExpr=uy;ne.funcCall=Rv;ne.varDecl=vy;ne.member=wy;ne.memberChain=xy;ne.assign=rC;ne.block=yy;ne.program=zy;ne.tryStmt=Ay;ne.prop=sC;ne.objectLiteral=tC;ne.ifStmt=uC;ne.forIn=vC;ne.conditional=wC;ne.logical=xC;ne.isIdentifier=nC;ne.isIdentifier=nC;ne.id=ry;ne.id=ry;ne.literal=oC;ne.literal=oC;ne.objectLiteral=tC;ne.objectLiteral=
tC;ne.prop=sC;ne.prop=sC;ne.exprStmt=sy;ne.exprStmt=sy;ne.returnStmt=ty;ne.returnStmt=ty;ne.empty=pC;ne.empty=pC;ne.binaryExpr=qC;ne.binaryExpr=qC;ne.funcExpr=uy;ne.funcExpr=uy;ne.funcCall=Rv;ne.funcCall=Rv;ne.varDecl=vy;ne.varDecl=vy;ne.member=wy;ne.member=wy;ne.memberChain=xy;ne.memberChain=xy;ne.assign=rC;ne.assign=rC;ne.block=yy;ne.block=yy;ne.program=zy;ne.program=zy;ne.tryStmt=Ay;ne.tryStmt=Ay;ne.ifStmt=uC;ne.ifStmt=uC;ne.forIn=vC;ne.forIn=vC;ne.conditional=wC;ne.conditional=wC;ne.logical=xC;
ne.logical=xC;ne.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Cq=Object.freeze({__proto__:null,isIdentifier:nC,id:ry,literal:oC,objectLiteral:tC,prop:sC,exprStmt:sy,returnStmt:ty,empty:pC,binaryExpr:qC,funcExpr:uy,funcCall:Rv,varDecl:vy,member:wy,memberChain:xy,assign:rC,block:yy,program:zy,tryStmt:Ay,ifStmt:uC,forIn:vC,conditional:wC,logical:xC}),gd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");gd.scopes=By;gd.nodesAtIndex=yC;gd.scopesAtIndex=zC;gd.scopeAtIndex=
AC;gd.scopesAtPos=BC;gd.nodesInScopeOf=CC;gd.declarationsOfScope=DC;gd.declarationsWithIdsOfScope=function(c){var h=gd.arr.compact(gd.helpers.declIds(c.params).concat(c.catches)),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(gd.arr.filter(c.funcDecls,function(m){return m.id})),$jscomp.arrayFromIterable(gd.arr.filter(c.classDecls,function(m){return m.id})));return h.map(function(m){return[m,m]}).concat(f.map(function(m){return[m,m.id]})).concat(gd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(m){return[gd.statementOf(c.node,
m),m]}))};gd._declaredVarNames=EC;gd._findJsLintGlobalDeclarations=FC;gd.topLevelFuncDecls=Cy;gd.resolveReference=zS;gd.resolveReferences=GC;gd.refWithDeclAt=HC;gd.topLevelDeclsAndRefs=Dy;gd.findGlobalVarRefs=IC;gd.findNodesIncludingLines=JC;gd.__varDeclIdsFor=function(c,h){for(var f=[],m=$jscomp.makeIterator(c.params),n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);m=$jscomp.makeIterator(c.funcDecls);for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.classDecls);
for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.importSpecifiers);for(n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);c=$jscomp.makeIterator(gd.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&f.push(n);return f};gd.findReferencesAndDeclsInScope=Ey;gd.findDeclarationClosestToIndex=KC;gd.nodesAt=LC;gd.statementOf=Fy;gd.imports=MC;gd.exports=NC;gd.arr=Ke;gd.chain=pm;gd.num=Dj;gd.tree=yq;gd.fun=Qj;gd.obj=
df;gd.BaseVisitor=Jd;gd.ScopeVisitor=gi;gd.FindToplevelFuncDeclVisitor=pu;gd.withMozillaAstDo=ou;gd.parse=Bj;gd.acorn=rp;gd.walk=no;gd.custom=Sr;gd.stringify=Yi;gd.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var f=0;f<c.length;f++){var m=c[f];if(m)if("Identifier"===m.type)h.push(m);else if("RestElement"===m.type)h.push(m.argument);else if("AssignmentPattern"===m.type)gd.helpers.declIds([m.left],h);else if("ObjectPattern"===m.type)for(var n=0;n<m.properties.length;n++){var a=m.properties[n];
gd.helpers.declIds([a.value||a],h)}else"ArrayPattern"===m.type&&gd.helpers.declIds(m.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next()){m=m.value;for(var n=$jscomp.makeIterator(gd.helpers.declIds([m.id])),a=n.next();!a.done;a=n.next())h.push([m,a.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next())gd.helpers.declIds([m.value.id],h)}return h},objPropertiesAsList:function(c,h,f,m){m=void 0===m?[]:m;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var a=n.key.name,d={key:h.concat([a]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":f||m.push(d);for(d=0;d<n.value.elements.length;d++)gd.helpers.objPropertiesAsList(n.value.elements[d],
h.concat([a,d]),f,m);break;case "ObjectExpression":case "ObjectPattern":f||m.push(d);gd.helpers.objPropertiesAsList(n.value,h.concat([a]),f,m);break;case "AssignmentPattern":f||m.push(d);gd.helpers.objPropertiesAsList(n.left,h.concat([a]),f,m);break;default:m.push(d)}}return m},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};gd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
gd.globalDeclRe=/^\s*global\s*/;gd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var oH=gd.helpers,gP=gd.knownGlobals;
gd.helpers=oH;gd.helpers=oH;gd.knownGlobals=gP;gd.knownGlobals=gP;gd.scopes=By;gd.scopes=By;gd.nodesAtIndex=yC;gd.nodesAtIndex=yC;gd.scopesAtIndex=zC;gd.scopesAtIndex=zC;gd.scopeAtIndex=AC;gd.scopeAtIndex=AC;gd.scopesAtPos=BC;gd.scopesAtPos=BC;gd.nodesInScopeOf=CC;gd.nodesInScopeOf=CC;gd.declarationsOfScope=DC;gd.declarationsOfScope=DC;gd._declaredVarNames=EC;gd._declaredVarNames=EC;gd._findJsLintGlobalDeclarations=FC;gd._findJsLintGlobalDeclarations=FC;gd.topLevelDeclsAndRefs=Dy;gd.topLevelDeclsAndRefs=
Dy;gd.topLevelFuncDecls=Cy;gd.topLevelFuncDecls=Cy;gd.findGlobalVarRefs=IC;gd.findGlobalVarRefs=IC;gd.findNodesIncludingLines=JC;gd.findNodesIncludingLines=JC;gd.findReferencesAndDeclsInScope=Ey;gd.findReferencesAndDeclsInScope=Ey;gd.findDeclarationClosestToIndex=KC;gd.findDeclarationClosestToIndex=KC;gd.nodesAt=LC;gd.nodesAt=LC;gd.statementOf=Fy;gd.statementOf=Fy;gd.resolveReferences=GC;gd.resolveReferences=GC;gd.refWithDeclAt=HC;gd.refWithDeclAt=HC;gd.imports=MC;gd.imports=MC;gd.exports=NC;gd.exports=
NC;var ro=Object.freeze({__proto__:null,helpers:oH,knownGlobals:gP,scopes:By,nodesAtIndex:yC,scopesAtIndex:zC,scopeAtIndex:AC,scopesAtPos:BC,nodesInScopeOf:CC,declarationsOfScope:DC,_declaredVarNames:EC,_findJsLintGlobalDeclarations:FC,topLevelDeclsAndRefs:Dy,topLevelFuncDecls:Cy,findGlobalVarRefs:IC,findNodesIncludingLines:JC,findReferencesAndDeclsInScope:Ey,findDeclarationClosestToIndex:KC,nodesAt:LC,statementOf:Fy,resolveReferences:GC,refWithDeclAt:HC,imports:MC,exports:NC});za("bJ",ro);var rm=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");rm.objectSpreadTransform=Sv;rm.Visitor=Jd;rm.funcCall=Rv;rm.member=wy;var pH=function(){return rm.Visitor.apply(this,arguments)||this};$jscomp.inherits(pH,rm.Visitor);pH.prototype.accept=function(c,h,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return rm.Visitor.prototype.accept.call(this,c,h,f)};pH.prototype.transformSpreadElement=function(c){var h=[],f=[h];c.properties.forEach(function(m){"SpreadElement"!==
m.type?(m.shorthand=!1,h.push(m)):(f.push(m),h=[],f.push(h))});if(1===f.length)return c;h.length||f.pop();return rm.funcCall.apply(rm,[rm.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(m){return"SpreadElement"===m.type?m.argument:{properties:m,type:"ObjectExpression"}}))))};rm.ObjectSpreadTransformer=pH;rm.default=Sv;var zd=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");zd._node2string=function(c){return c.source||zd.stringify(c)};zd._findIndentAt=function(c,
h){var f=zd.string.peekLeft(c,h,/\s+$/);c="number"===typeof f?c.slice(f,h):"";"\n"===c[0]&&(c=c.slice(1));return c};zd._applyChanges=function(c,h){for(var f=0;f<c.length;f++){var m=c[f];if("del"===m.type)h=h.slice(0,m.pos)+h.slice(m.pos+m.length);else if("add"===m.type)h=h.slice(0,m.pos)+m.string+h.slice(m.pos);else throw Error("Unexpected change "+zd.obj.inspect(m));}return h};zd._compareNodesForReplacement=OC;zd.replaceNode=PC;zd.replaceNodes=QC;zd.replace=RC;zd.__findVarDecls=AS;zd.oneDeclaratorPerVarDecl=
SC;zd.oneDeclaratorForVarsInDestructoring=TC;zd.returnLastStatement=UC;zd.wrapInFunction=VC;zd.wrapInStartEndCall=WC;zd.transformSingleExpression=XC;zd.arr=Ke;zd.obj=df;zd.string=rg;zd.chain=pm;zd.Path=Ag;zd.helpers=oH;zd.scopes=By;zd.topLevelDeclsAndRefs=Dy;zd.topLevelFuncDecls=Cy;zd.parse=Bj;zd.fuzzyParse=Wp;zd.objectSpreadTransform=Sv;zd.varDecl=vy;zd.memberChain=xy;zd.id=ry;zd.exprStmt=sy;zd.funcCall=Rv;zd.returnStmt=ty;zd.tryStmt=Ay;zd.program=zy;zd.block=yy;zd.funcExpr=uy;zd.stringify=Yi;zd.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;zd.replaceNode=PC;zd.replaceNode=PC;zd.replaceNodes=QC;zd.replaceNodes=QC;zd.replace=RC;zd.replace=RC;zd._compareNodesForReplacement=OC;zd._compareNodesForReplacement=OC;zd.oneDeclaratorPerVarDecl=SC;zd.oneDeclaratorPerVarDecl=SC;zd.oneDeclaratorForVarsInDestructoring=TC;zd.oneDeclaratorForVarsInDestructoring=TC;zd.returnLastStatement=UC;zd.returnLastStatement=UC;zd.wrapInFunction=VC;zd.wrapInFunction=VC;zd.wrapInStartEndCall=WC;zd.wrapInStartEndCall=WC;zd.transformSingleExpression=
XC;zd.transformSingleExpression=XC;zd.objectSpreadTransform=Sv;zd.objectSpreadTransform=Sv;var qu=Object.freeze({__proto__:null,replaceNode:PC,replaceNodes:QC,replace:RC,_compareNodesForReplacement:OC,oneDeclaratorPerVarDecl:SC,oneDeclaratorForVarsInDestructoring:TC,returnLastStatement:UC,wrapInFunction:VC,wrapInStartEndCall:WC,transformSingleExpression:XC,objectSpreadTransform:Sv});za("bv",qu);var Xe=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");Xe.getCommentPrecedingNode=YC;Xe.extractComments=
ZC;Xe.obj=df;Xe.string=rg;Xe.Path=Ag;Xe.chain=pm;Xe.arr=Ke;Xe.fun=Qj;Xe.parse=Bj;Xe.statementOf=Fy;Xe.Visitor=Jd;Xe.stringify=Yi;Xe.getCommentPrecedingNode=YC;Xe.getCommentPrecedingNode=YC;Xe.extractComments=ZC;Xe.extractComments=ZC;var qH=Object.freeze({__proto__:null,getCommentPrecedingNode:YC,extractComments:ZC}),Wf=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");Wf.findDecls=$C;Wf.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(Wf.arr.compact(c.body.body.map(function(f,m){return Wf.es6ClassMethod(f,h,m)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};Wf.es6ClassMethod=function(c,h,f){if("MethodDefinition"!==c.type)return null;var m;"constructor"===c.kind?m="class-constructor":"method"===c.kind?m=c.static?"class-class-method":"class-instance-method":"get"===c.kind?m=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(m=c.static?"class-class-setter":"class-instance-setter");return"class-instance-getter"==m&&"commands"==c.key.name?Wf.parseCommandsMethod(c,h,m):"class-class-getter"==m&&"properties"==c.key.name?Wf.parsePropertiesMethod(c,h,m):m?{type:m,parent:h,node:c,name:c.key.name}:null};Wf.parsePropertiesMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];m.node.value.body.body[0].argument.properties.forEach(function(a){n.push({type:a.type,parent:m,node:a,name:a.key?
a.key.name:a.argument.arguments[0].value})});m.children=n}finally{return m}};Wf.parseCommandsMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];if(m.node.value.body.body){var a=m.node.value.body.body[0].argument.elements;a&&(a.forEach(function(d){n.push({type:d.type,parent:m,node:d,name:d.properties[0].value.value})}),m.children=n)}}finally{return m}};Wf.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],f={};c=$jscomp.makeIterator(Wf.withVarDeclIds(c));
for(var m=c.next();!m.done;f={$jscomp$loop$prop$def$2679:f.$jscomp$loop$prop$def$2679},m=c.next())if(m=m.value,f.$jscomp$loop$prop$def$2679={name:m.id.name,node:m.node,type:"var-decl"},h.push(f.$jscomp$loop$prop$def$2679),f.$jscomp$loop$prop$def$2679.node.init){for(m=f.$jscomp$loop$prop$def$2679.node.init;"AssignmentExpression"===m.type;)m=m.right;if("ObjectExpression"===m.type)f.$jscomp$loop$prop$def$2679.type="object-decl",f.$jscomp$loop$prop$def$2679.children=Wf.objectKeyValsAsDefs(m).map(function(n){return function(a){return Object.assign({},
a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2679})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2679.children));else{if("ArrayExpression"===m.type){f.$jscomp$loop$prop$def$2679.type="array-decl";try{f.$jscomp$loop$prop$def$2679.children=Wf.arrayEntriesAsDefs(m).map(function(n){return function(a){return Object.assign({},a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2679})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2679.children))}finally{continue}}if(m=
Wf.someObjectExpressionCall(m,f.$jscomp$loop$prop$def$2679))f.$jscomp$loop$prop$def$2679.children=m.map(function(n){return function(a){return Object.assign({},a,{parent:n.$jscomp$loop$prop$def$2679})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2679.children))}}return h};Wf.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};Wf.someObjectExpressionCall=function(c,h){"ExpressionStatement"===
c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===f.type}))?Wf.objectKeyValsAsDefs(c,h):null};Wf.functionWrapper=function(c,h){if(!Wf.isFunctionWrapper(c))return null;var f=Wf.Path("expression.arguments.0").get(c);h=f&&"FunctionExpression"===f.type&&5<Wf.string.lines(f.source||"").length?Wf.findDecls(f,h):Wf.findDecls(Wf.Path("expression.callee").get(c),h);var m={node:c,name:Wf.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||
(n.parent=m)});return h};Wf.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};Wf.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:h}})};Wf.arrayEntriesAsDefs=function(c,h){return c.elements.map(function(f){return{name:f.value||f.properties[0].value.value,type:f.type,node:f,parent:h}})};
Wf.isFunctionWrapper=function(c){return"CallExpression"===Wf.Path("expression.type").get(c)&&"FunctionExpression"===Wf.Path("expression.callee.type").get(c)};Wf.declIds=mK;Wf.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};Wf.parse=Bj;Wf.arr=Ke;Wf.Path=Ag;Wf.string=rg;Wf.obj=df;Wf.findDecls=$C;Wf.findDecls=$C;var AA=Object.freeze({__proto__:null,findDecls:$C}),lf=lively.FreezerRuntime.recorderFor("lively.ast/index.js");
lf.isValidIdentifier=Tv;lf.BaseVisitor=Jd;lf.BaseVisitor=Jd;lf.withMozillaAstDo=ou;lf.withMozillaAstDo=ou;lf.printAst=wA;lf.printAst=wA;lf.compareAst=xA;lf.compareAst=xA;lf.pathToNode=yA;lf.pathToNode=yA;lf.rematchAstWithSource=zA;lf.rematchAstWithSource=zA;lf.ReplaceManyVisitor=xn;lf.ReplaceManyVisitor=xn;lf.ReplaceVisitor=qo;lf.ReplaceVisitor=qo;lf.AllNodesVisitor=sp;lf.AllNodesVisitor=sp;lf.parse=Bj;lf.parse=Bj;lf.parseFunction=er;lf.parseFunction=er;lf.fuzzyParse=Wp;lf.fuzzyParse=Wp;lf.acorn=
rp;lf.walk=no;lf.custom=Sr;lf.stringify=Yi;lf.escodegen=kx;lf.escodegen=kx;lf.escodegen=kx;lf.acorn=rp;lf.acorn=rp;lf.walk=no;lf.walk=no;lf.nodes=Cq;lf.query=ro;lf.transform=qu;lf.comments=qH;lf.categorizer=AA;lf.query=ro;lf.query=ro;lf.transform=qu;lf.transform=qu;lf.comments=qH;lf.comments=qH;lf.categorizer=AA;lf.categorizer=AA;lf.stringify=Yi;lf.stringify=Yi;lf.nodes=Cq;lf.nodes=Cq;lf.custom=Sr;lf.custom=Sr;lf.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
lf.isValidIdentifier=Tv;lf.isValidIdentifier=Tv;lf.parse=Bj;lf.Node=lf.parse("").constructor;Object.defineProperty(lf.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var rH=Object.freeze({__proto__:null,BaseVisitor:Jd,withMozillaAstDo:ou,printAst:wA,compareAst:xA,pathToNode:yA,rematchAstWithSource:zA,ReplaceManyVisitor:xn,ReplaceVisitor:qo,AllNodesVisitor:sp,parse:Bj,parseFunction:er,fuzzyParse:Wp,escodegen:kx,acorn:rp,walk:no,query:ro,
transform:qu,comments:qH,categorizer:AA,stringify:Yi,nodes:Cq,custom:Sr,isValidIdentifier:Tv});za("a_",rH);var Xf=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");Xf.getGlobal=fr;Xf.signatureOf=aD;Xf.isClass=nK;Xf.pluck=bD;Xf.printSymbol=cD;Xf.safeToString=Gy;Xf.printEvalResult=Hy;Xf.obj=df;Xf.string=rg;Xf.getGlobal=fr;Xf.getGlobal=fr;Xf.signatureOf=aD;Xf.signatureOf=aD;Xf.isClass=nK;Xf.isClass=nK;Xf.pluck=bD;Xf.pluck=bD;Xf.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();Xf.symMatcher=/^Symbol\((.*)\)$/;Xf.printSymbol=cD;Xf.printSymbol=cD;Xf.safeToString=Gy;Xf.safeToString=Gy;Xf.printEvalResult=Hy;Xf.printEvalResult=Hy;var hP=function(){function c(n,a){"object"===typeof a&&(a=a.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return a=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),a+n+a;if(n instanceof Error)return n.stack||Xf.safeToString(n);if(!Xf.obj.isObject(n))return Xf.safeToString(n);
try{var d=Xf.obj.inspect(n,{customPrinter:f,maxNumberOfKeys:100,maxDepth:a,printFunctionSource:!0})}catch(k){}return"{}"===d?Xf.safeToString(n):d}function h(n,a){if("string"===typeof n||Array.isArray(n)||!m||"function"!==typeof n[m])return a;var d="function"===typeof n.entries,k=d?n.entries():n[m](),b=[];a=d?"{":"[";var e=d?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,p;10>l;l++){p=k.next();if(p.done)break;b.push(p.value)}k=b.map(function(q){return d?String(q[0])+": "+String(q[1]):
c(q,2)}).join(", ");return n+"("+a+k+e+")"}function f(n,a,d){if(!n)return a;if("symbol"===typeof n)return Xf.printSymbol(n);if("string"===typeof n)return Xf.string.print(Xf.string.truncate(n,100));if(n.isMorph)return Xf.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Xf.Node&&n instanceof Xf.Node||"undefined"!==typeof Xf.ImageData&&n instanceof Xf.ImageData)return Xf.safeToString(n);var k=n.length||n.byteLength;if(void 0!==k&&10<k&&n.slice)return"["+("string"===typeof n||
n.byteLength?Xf.safeToString(n.slice(0,10)):n.slice(0,10).map(d))+",...]";n=h(n,a);return n!==a?n:a}var m="undefined"!==typeof Symbol&&Symbol.iterator;return c}();Xf.printInspectEvalValue=hP;Xf.printInspectEvalValue=hP;Xf.printInspectEvalValue=hP;var ah=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");ah.getObjectForCompletion=dD;ah.propertyExtract=function(c,h,f){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(ah.printSymbol)).filter(function(m){return-1===
c.indexOf(m)}).map(f).filter(function(m){return!!m}).sort(function(m,n){return m.name<n.name?-1:m.name>n.name?1:0})};ah.getMethodsOf=function(c,h){return ah.propertyExtract(c,h,function(f){return h.__lookupGetter__&&h.__lookupGetter__(f)||"function"!==typeof h[f]?null:{name:f,completion:ah.signatureOf(f,h[f])}})};ah.getAttributesOf=function(c,h){return ah.propertyExtract(c,h,function(f){return h.__lookupGetter__&&!h.__lookupGetter__(f)&&"function"===typeof h[f]?null:{name:f,completion:f}})};ah.getProtoChain=
function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};ah.getDescriptorOf=function(c,h){function f(m,n){m.length>n&&(m=m.slice(0,n)+"...");return m.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return f(ah.safeToString(c),50);h=c.toString();h=f(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return ah.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,
50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":"prototype"};ah.getCompletionsOfObj=function(c,h){try{var f=[];var m=ah.getProtoChain(c).map(function(a){var d=ah.getDescriptorOf(c,a);a=ah.getMethodsOf(f,a).concat(ah.getAttributesOf(f,a));f=f.concat(ah.pluck(a,"name"));return[d,ah.pluck(a,"completion")]})}catch(a){var n=a}h(n,m)};ah.descriptorsOfObjAndProtoProperties=function(c){var h=[];return ah.getProtoChain(c).map(function(f){var m=ah.getDescriptorOf(c,f);f=ah.getMethodsOf(h,
f).concat(ah.getAttributesOf(h,f));h=h.concat(ah.pluck(f,"name"));return[m,ah.pluck(f,"completion")]})};ah.getCompletions=eD;ah.lang=H0;ah.signatureOf=aD;ah.pluck=bD;ah.safeToString=Gy;ah.printSymbol=cD;ah.getObjectForCompletion=dD;ah.getObjectForCompletion=dD;ah.getCompletions=eD;ah.getCompletions=eD;var BA=Object.freeze({__proto__:null,getObjectForCompletion:dD,getCompletions:eD});za("as",BA);var Wb=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");Wb.rewriteToCaptureTopLevelVariables=
Iy;Wb.transformImportMeta=function(c,h){return Wb.ReplaceVisitor.run(c,function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?h.classToFunction.currentModuleAccessor?Wb.nodes.objectLiteral(["url",Wb.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):Wb.parse('({url: eval("_context").id})').body[0].expression:f})};Wb.rewriteToRegisterModuleToCaptureSetters=fD;Wb.clearEmptyExports=function(c,h){h=Wb.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var f=h.next();!f.done;f=
h.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||Wb.arr.remove(c.body,f);return c};Wb.replaceRefs=function(c,h){var f=Wb.topLevelDeclsAndRefs(c),m=f.refs.filter(function(a){return Wb.shouldRefBeCaptured(a,f,h)}),n=[];c=Wb.ReplaceVisitor.run(c,function(a,d){if("Property"===a.type&&m.includes(a.key)&&a.shorthand)return Wb.prop(Wb.id(a.key.name),a.value);if("ExportNamedDeclaration"===a.type){d=a.declaration;var k=a.specifiers;d&&(d.id?n.push(d.id):d.declarations&&n.push.apply(n,
$jscomp.arrayFromIterable(d.declarations.map(function(b){return b.id}))));k&&k.forEach(function(b){return n.push(b.local)});return a}return"AssignmentExpression"===a.type&&m.includes(a.left)&&h.declarationWrapper?Object.assign({},a,{right:Wb.declarationWrapperCall(h.declarationWrapper,null,Wb.literal(a.left.name),Wb.literal("assignment"),a.right,h.captureObj,h)}):a});return Wb.ReplaceVisitor.run(c,function(a,d,k){return m.includes(a)&&!n.includes(a)?Wb.member(h.captureObj,a):a})};Wb.replaceVarDecls=
function(c,h){var f=Wb.topLevelDeclsAndRefs(c);return Wb.ReplaceManyVisitor.run(c,function(m){if(!f.varDecls.includes(m)||m.declarations.every(function(l){return!Wb.shouldDeclBeCaptured(l,h)}))return m;for(var n=[],a=0;a<m.declarations.length;a++){var d=m.declarations[a];if(Wb.shouldDeclBeCaptured(d,h)){var k=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};k=h.declarationWrapper&&
d.id.name?Wb.declarationWrapperCall(h.declarationWrapper,d,Wb.literal(d.id.name),Wb.literal(m.kind),k,h.captureObj,h):k;if(d.id.type.includes("Pattern")){var b=Wb.generateUniqueName(f.declaredNames,"destructured_1"),e={type:"Identifier",name:b};d=Wb.transformPattern(d.id,{parent:e,declaredNames:f.declaredNames}).map(function(l){return l[Wb.annotationSym]&&l[Wb.annotationSym].capture?Wb.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?Wb.declarationWrapperCall(h.declarationWrapper,
null,Wb.literal(l.declarations[0].id.name),Wb.literal(m.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});f.declaredNames.push(b);n.push.apply(n,$jscomp.arrayFromIterable([Wb.varDecl(e,k,m.kind)].concat(d)))}else n.push(Wb.assignExpr(h.captureObj,d.id,k,!1)),h.keepTopLevelVarDecls&&n.push(Wb.varDecl(d.id,Wb.member(h.captureObj,d.id)))}else n.push({type:"VariableDeclaration",kind:m.kind||"var",declarations:[d]})}return n})};Wb.generateUniqueName=function(c,h){for(var f=1;-1<
c.indexOf(h);){if(1E3<f)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++f)}return h};Wb.additionalIgnoredDecls=function(c,h){h=Wb.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=Wb.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type&&"ExportNamedDeclaration"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(f.map(function(d){return d.id.name}))};
Wb.additionalIgnoredRefs=function(c,h){h=Wb.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=Wb.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(Wb.queryHelpers.declIds(f.map(function(d){return d.id})).map(function(d){return d.name}))};Wb.shouldDeclBeCaptured=
function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};Wb.shouldRefBeCaptured=function(c,h,f){if(h.scope.importSpecifiers.includes(c))return!1;for(var m=0;m<h.scope.exportDecls.length;m++){var n=h.scope.exportDecls[m];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};Wb.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,
h.classToFunction);var f=Wb.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;for(var m=c.body.length-1;0<=m;m--){var n=c.body[m];n.id&&f.classDecls.includes(n)&&c.body.splice(m+1,0,Wb.assignExpr(h.captureObj,n.id,n.id,!1))}return c};Wb.splitExportDeclarations=function(c,h){h=c.body;for(var f=c.body=[],m=0;m<h.length;m++){var n=h[m];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)f.push(n);else for(var a=
n.declaration.declarations,d=0;d<a.length;d++)f.push({type:"ExportNamedDeclaration",specifiers:[],declaration:Wb.varDecl(a[d].id,a[d].init,n.declaration.kind)})}return c};Wb.insertCapturesForExportedImports=Jy;Wb.insertCapturesForExportDeclarations=function(c,h){for(var f=[],m=0;m<c.body.length;m++){var n=c.body[m];f.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var a=n.declaration,
d=Wb.generateUniqueName(Wb.topLevelDeclsAndRefs(c).declaredNames,"$"+a.raw.split('"').join(""));n.declaration=Wb.id(d);Wb.arr.pushAt(f,Wb.assignExpr(h.captureObj,d,a.raw,!1),f.indexOf(n))}else n.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(k){var b=k.id;h.declarationWrapper&&(k.init.callee&&k.init.callee.name===h.declarationWrapper.name||(b=Wb.declarationWrapperCall(h.declarationWrapper,k,Wb.literal(k.id.name),Wb.literal("assignment"),k.id,
h.captureObj,h)));return Wb.assignExpr(h.captureObj,k.id,b,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&f.push(Wb.assignExpr(h.captureObj,n.declaration.id,n.declaration.id,!1))}c.body=f;return c};Wb.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(f,m){return f.concat("ImportDeclaration"===m.type&&m.specifiers.length?[m].concat(m.specifiers.map(function(n){return Wb.assignExpr(h.captureObj,n.local,n.local,!1)})):[m])},
[]);return c};Wb.insertDeclarationsForExports=function(c,h){for(var f=Wb.topLevelDeclsAndRefs(c),m=[],n=0;n<c.body.length;n++){var a=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===a.type&&a.declaration&&!a.declaration.type.includes("Declaration")&&("Identifier"===a.declaration.type||a.declaration.id)?m=m.concat([Wb.varDeclOrAssignment(c,{type:"VariableDeclarator",id:a.declaration,init:Wb.member(h.captureObj,a.declaration)}),a]):"ExportNamedDeclaration"!==a.type||!a.specifiers.length||a.source?
m.push(a):m=m.concat(a.specifiers.map(function(d){return f.declaredNames.includes(d.local.name)?null:Wb.varDeclOrAssignment(c,{type:"VariableDeclarator",id:d.local,init:Wb.member(h.captureObj,d.local)})}).filter(Boolean)).concat(a)}c.body=m;return c};Wb.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var f=0;f<c.body.length;f++){var m=c.body[f];"ExportDefaultDeclaration"===m.type&&"FunctionDeclaration"===m.declaration.type&&m.declaration.id&&m.declaration.async&&(h.push(m.declaration),
m.declaration={type:"Identifier",name:m.declaration.id.name});h.push(m)}c.body=h;return c};Wb.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(f,m){if("ExportNamedDeclaration"===m.type)if(m.source){var n=d=m.source;var a=m.specifiers.map(function(k){return{type:"ExpressionStatement",expression:Wb.exportFromImport({type:"Literal",value:k.exported.name},{type:"Literal",value:k.local.name},d,h.moduleExportFunc,h.moduleImportFunc)}})}else a=m.declaration?(a=m.declaration.declarations)?
a.map(function(k){h.excludeDecls.push(k.id);return Wb.varDecl(k.id,Wb.assignExpr(h.captureObj,k.id,h.declarationWrapper?Wb.declarationWrapperCall(h.declarationWrapper,null,Wb.literal(k.id.name),Wb.literal(m.declaration.kind),k,h.captureObj,h):k.init,!1),m.declaration.kind)}).concat(a.map(function(k){return Wb.exportCallStmt(h.moduleExportFunc,k.id.name,k.id)})):[m.declaration].concat(Wb.exportCallStmt(h.moduleExportFunc,m.declaration.id.name,m.declaration.id)):m.specifiers.map(function(k){return Wb.exportCallStmt(h.moduleExportFunc,
k.exported.name,Wb.shouldDeclBeCaptured({id:k.local},h)?Wb.member(h.captureObj,k.local):k.local)});else if("ExportDefaultDeclaration"===m.type)a=m.declaration&&m.declaration.id?[m.declaration].concat(Wb.exportCallStmt(h.moduleExportFunc,"default",m.declaration.id)):[Wb.exportCallStmt(h.moduleExportFunc,"default",m.declaration)];else if("ExportAllDeclaration"===m.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=m.source;a=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:Wb.exportFromImport(n,n,d,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:n,init:null}]},right:Wb.importCall(null,d,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else a="ImportDeclaration"===m.type?m.specifiers.length?m.specifiers.map(function(k){return Wb.varDeclAndImportCall(c,k.local,"ImportSpecifier"===k.type&&k.imported.name||"ImportDefaultSpecifier"===k.type&&"default"||
null,m.source,h.moduleImportFunc)}):Wb.importCallStmt(null,m.source,h.moduleImportFunc):[m];return f.concat(a)},[]);return c};Wb.putFunctionDeclsInFront=function(c,h){var f=Wb.topLevelDeclsAndRefs(c).scope,m=f.funcDecls;if(!m.length)return c;for(var n=[],a=m.length;a--;){var d=m[a];if(d.id&&Wb.shouldDeclBeCaptured(d,h)){var k=f.funcDeclPaths[a].slice(0,-1),b=Wb.Path(k).get(f.node);k={type:"Identifier",name:d.id.name};var e=h.declarationWrapper?Wb.declarationWrapperCall(h.declarationWrapper,d,Wb.literal(k.name),
Wb.literal("function"),k,h.captureObj,h):k,l=Object.assign({},d);Array.isArray(b)?b.splice(b.indexOf(d),1,Wb.exprStmt(d.id)):"ExportNamedDeclaration"===b.type?(b=f.node.body.indexOf(b),-1<b&&f.node.body.splice(b,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===b.type&&(b.declaration=d.id);n.unshift(Wb.assignExpr(h.captureObj,k,e,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};Wb.computeDefRanges=function(c,h){c=Wb.topLevelDeclsAndRefs(c);
return Wb.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,m){f[m.id.name]||(f[m.id.name]=[]);f[m.id.name].push({type:m.type,start:m.start,end:m.end});return f},{})};Wb.transformPattern=function(c,h){return"ArrayPattern"===c.type?Wb.transformArrayPattern(c,h):"ObjectPattern"===c.type?Wb.transformObjectPattern(c,h):[]};Wb.transformArrayPattern=function(c,h){for(var f=h.declaredNames,m=Wb.annotationSym,n=[],
a=0;a<c.elements.length;a++){var d=c.elements[a];if("Identifier"===d.type)d=Wb.varDecl(d,Wb.member(h.parent,Wb.id(a),!0)),d[m]={capture:!0},n.push(d);else if("RestElement"===d.type)d=Wb.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:a}],callee:Wb.member(h.parent,Wb.id("slice"),!1)}),d[m]={capture:!0},n.push(d);else if("AssignmentPattern"==d.type)d=Wb.varDecl(d.left,Wb.conditional(Wb.binaryExpr(Wb.member(h.parent,Wb.id(a),!0),"===",Wb.id("undefined")),d.right,Wb.member(h.parent,
Wb.id(a),!0))),d[m]={capture:!0},n.push(d);else{var k=Wb.id(Wb.generateUniqueName(f,h.parent.name+"$"+a)),b=Wb.varDecl(k,Wb.member(h.parent,a));f.push(k.name);n.push(b);n.push.apply(n,$jscomp.arrayFromIterable(Wb.transformPattern(d,{parent:k,declaredNames:f})))}}return n};Wb.transformObjectPattern=function(c,h){for(var f=h.declaredNames,m=Wb.annotationSym,n=[],a=0;a<c.properties.length;a++){var d=c.properties[a];if("RestElement"==d.type){var k=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),
b=Wb.nodes.varDecl(d.argument.name,Wb.nodes.objectLiteral([])),e=Wb.nodes.varDecl(d.argument.name,Wb.id(d.argument.name));d=Wb.nodes.exprStmt(Wb.nodes.funcCall(Wb.nodes.funcExpr({},[],Wb.nodes.forIn("__key",h.parent,Wb.nodes.block.apply(Wb.nodes,[].concat($jscomp.arrayFromIterable(k.length?k.map(function(l){return Wb.nodes.ifStmt(Wb.nodes.binaryExpr(Wb.nodes.id("__key"),"===",Wb.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[Wb.nodes.exprStmt(Wb.nodes.assign(Wb.nodes.member(d.argument.name,
Wb.nodes.id("__key"),!0),Wb.nodes.member(h.parent,Wb.nodes.id("__key"),!0)))]))))));e[m]={capture:!0};n.push(b,e,d)}else"Identifier"==d.value.type?(b=Wb.varDecl(d.value,Wb.member(h.parent,d.key)),b[m]={capture:!0},n.push(b)):"AssignmentPattern"==d.value.type?(b=Wb.varDecl(d.value.left,Wb.conditional(Wb.binaryExpr(Wb.member(h.parent,d.key),"===",Wb.id("undefined")),d.value.right,Wb.member(h.parent,d.key))),b[m]={capture:!0},n.push(b)):(b=Wb.id(Wb.generateUniqueName(f,h.parent.name+"$"+d.key.name)),
e=Wb.varDecl(b,Wb.member(h.parent,d.key)),e[m]={capture:!1},f.push(b.name),n.push.apply(n,$jscomp.arrayFromIterable([e].concat(Wb.transformPattern(d.value,{parent:b,declaredNames:f})))))}return n};Wb.varDeclOrAssignment=function(c,h,f){return-1<Wb.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?Wb.exprStmt(Wb.assign(h.id,h.init)):{declarations:[h],kind:f||"var",type:"VariableDeclaration"}};Wb.assignExpr=function(c,h,f,m){return Wb.exprStmt(Wb.assign(Wb.member(c,h,m),f||Wb.id("undefined")))};
Wb.exportFromImport=function(c,h,f,m,n){return Wb.exportCall(m,c,Wb.importCall(h,f,n))};Wb.varDeclAndImportCall=function(c,h,f,m,n){return Wb.varDecl(h,Wb.importCall(f,m,n))};Wb.importCall=function(c,h,f){"string"===typeof c&&(c=Wb.literal(c));return{arguments:[h].concat(c||[]),callee:f,type:"CallExpression"}};Wb.importCallStmt=function(c,h,f){return Wb.exprStmt(Wb.importCall(c,h,f))};Wb.exportCall=function(c,h,f){"string"===typeof h&&(h=Wb.literal(h));f=Wb.obj.deepCopy(f);return Wb.funcCall(c,h,
f)};Wb.exportCallStmt=function(c,h,f){return Wb.exprStmt(Wb.exportCall(c,h,f))};Wb.declarationWrapperCall=function(c,h,f,m,n,a,d){if(h){var k=[],b=!1;if(h["x-lively-object-meta"]){b=h["x-lively-object-meta"];h=b.start;var e=b.end,l=b.evalId,p=b.sourceAccessorName;b=!0;k.push("start",Wb.nodes.literal(h),"end",Wb.nodes.literal(e))}void 0===l&&d.hasOwnProperty("evalId")&&(l=d.evalId,b=!0);void 0===p&&d.hasOwnProperty("sourceAccessorName")&&(p=d.sourceAccessorName,b=!0);void 0!==l&&k.push("evalId",Wb.nodes.literal(l));
p&&k.push("moduleSource",Wb.nodes.id(p));if(b)return Wb.funcCall(c,f,m,n,a,Wb.nodes.objectLiteral(k))}return Wb.funcCall(c,f,m,n,a)};Wb.obj=df;Wb.string=rg;Wb.chain=pm;Wb.arr=Ke;Wb.fun=Qj;Wb.Path=Ag;Wb.parse=Bj;Wb.stringify=Yi;Wb.query=ro;Wb.transform=qu;Wb.nodes=Cq;Wb.Visitor=Jd;Wb.ReplaceManyVisitor=xn;Wb.ReplaceVisitor=qo;var tp=Wb.nodes;Wb.member=tp.member;Wb.prop=tp.prop;Wb.varDecl=tp.varDecl;Wb.assign=tp.assign;Wb.id=tp.id;Wb.literal=tp.literal;Wb.exprStmt=tp.exprStmt;Wb.conditional=tp.conditional;
Wb.binaryExpr=tp.binaryExpr;Wb.funcCall=tp.funcCall;var X0=Wb.query;Wb.topLevelDeclsAndRefs=X0.topLevelDeclsAndRefs;Wb.queryHelpers=X0.helpers;var Y0=Wb.transform;Wb.transformSingleExpression=Y0.transformSingleExpression;Wb.wrapInStartEndCall=Y0.wrapInStartEndCall;Wb.rewriteToCaptureTopLevelVariables=Iy;Wb.rewriteToCaptureTopLevelVariables=Iy;Wb.rewriteToRegisterModuleToCaptureSetters=fD;Wb.rewriteToRegisterModuleToCaptureSetters=fD;Wb.insertCapturesForExportedImports=Jy;Wb.insertCapturesForExportedImports=
Jy;Wb.annotationSym=Symbol("lively.ast-destructuring-transform");var CA=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Iy,rewriteToRegisterModuleToCaptureSetters:fD,insertCapturesForExportedImports:Jy}),Z0={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},Nda=Z0=Z0["default"],Oda={},$0=Oda=Array.isArray,sH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,a1={};a1="object"==typeof sH&&sH&&sH.Object===
Object&&sH;var Pda={},Qda="object"==typeof self&&self&&self.Object===Object&&self,ru=Pda=a1||Qda||Function("return this")(),Rda={},tH=Rda=ru.Symbol,Sda={},b1=Object.prototype,Tda=b1.hasOwnProperty,Uda=b1.toString,DA=tH?tH.toStringTag:void 0,Vda=Sda=function(c){var h=Tda.call(c,DA),f=c[DA];try{c[DA]=void 0;var m=!0}catch(a){}var n=Uda.call(c);m&&(h?c[DA]=f:delete c[DA]);return n},c1={},Wda=Object.prototype.toString;c1=function(c){return Wda.call(c)};var Xda={},Yda=c1,d1=tH?tH.toStringTag:void 0,iP=
Xda=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":d1&&d1 in Object(c)?Vda(c):Yda(c)},Zda={},jP=Zda=function(c){return null!=c&&"object"==typeof c},$da={},aea=$da=function(c){return"string"==typeof c||!$0(c)&&jP(c)&&"[object String]"==iP(c)},bea={},kP=bea=function(c){return c},cea={},dea=cea=function(c){return"symbol"==typeof c||jP(c)&&"[object Symbol]"==iP(c)},eea={},lx=eea=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},fea={},gea=fea=function(c){if(!lx(c))return!1;
c=iP(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},e1={};e1=ru["__core-js_shared__"];var hea={},lP=e1,f1=function(){var c=/[^.]+$/.exec(lP&&lP.keys&&lP.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),iea=hea=function(c){return!!f1&&f1 in c},g1={},jea=Function.prototype.toString;g1=function(c){if(null!=c){try{return jea.call(c)}catch(h){}return c+""}return""};var kea={},lea=g1,mea=/^\[object .+?Constructor\]$/,nea=RegExp("^"+
Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oea=kea=function(c){return!lx(c)||iea(c)?!1:(gea(c)?nea:mea).test(lea(c))},h1={};h1=function(c,h){return null==c?void 0:c[h]};var pea={},qea=h1,i1=pea=function(c,h){c=qea(c,h);return oea(c)?c:void 0},rea={},j1=rea=function(){try{var c=i1(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),sea={},k1=sea=function(c,
h){var f=-1,m=c.length;for(h||(h=Array(m));++f<m;)h[f]=c[f];return h},tea={},l1=Object.create,mP=tea=function(){function c(){}return function(h){if(!lx(h))return{};if(l1)return l1(h);c.prototype=h;h=new c;c.prototype=void 0;return h}}(),uea={},vea=/^(?:0|[1-9]\d*)$/,wea=uea=function(c,h){var f=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==f||"symbol"!=f&&vea.test(c))&&-1<c&&0==c%1&&c<h},xea={},m1=xea=function(c,h,f){switch(f.length){case 0:return c.call(h);case 1:return c.call(h,f[0]);
case 2:return c.call(h,f[0],f[1]);case 3:return c.call(h,f[0],f[1],f[2])}return c.apply(h,f)},n1={};n1=function(c){return function(){return c}};var yea={},zea=n1,Aea=yea=j1?function(c,h){return j1(c,"toString",{configurable:!0,enumerable:!1,value:zea(h),writable:!0})}:kP,Bea={},Cea=Date.now,o1=Bea=function(c){var h=0,f=0;return function(){var m=Cea(),n=16-(m-f);f=m;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},Dea={},Eea=Dea=o1(Aea),Fea={},p1=Fea=i1(ru,"WeakMap"),
Gea={},Hea=Gea=function(c,h){for(var f=-1,m=null==c?0:c.length;++f<m&&!1!==h(c[f],f,c););return c},q1={},Iea=/\s/;q1=function(c){for(var h=c.length;h--&&Iea.test(c.charAt(h)););return h};var r1={},Jea=q1,Kea=/^\s+/;r1=function(c){return c?c.slice(0,Jea(c)+1).replace(Kea,""):c};var Lea={},Mea=r1,s1=0/0,Nea=/^[-+]0x[0-9a-f]+$/i,Oea=/^0b[01]+$/i,Pea=/^0o[0-7]+$/i,Qea=parseInt,Rea=Lea=function(c){if("number"==typeof c)return c;if(dea(c))return s1;lx(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=
lx(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=Mea(c);var h=Oea.test(c);return h||Pea.test(c)?Qea(c.slice(2),h?2:8):Nea.test(c)?s1:+c},Sea={},Tea=Sea=function(c,h,f,m){var n=c.length;for(f+=m?1:-1;m?f--:++f<n;)if(h(c[f],f,c))return f;return-1},t1={},u1=1/0;t1=function(c){if(!c)return 0===c?c:0;c=Rea(c);return c===u1||c===-u1?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Uea={},Vea=t1,v1=Uea=function(c){c=Vea(c);var h=c%1;return c===c?h?c-h:c:0},Wea={},Xea=Wea=function(c){return c!==c},
w1={};w1=function(c,h,f){--f;for(var m=c.length;++f<m;)if(c[f]===h)return f;return-1};var x1={},Yea=w1;x1=function(c,h,f){return h===h?Yea(c,h,f):Tea(c,Xea,f)};var Zea={},$ea=x1,afa=Zea=function(c,h){return!(null==c||!c.length)&&-1<$ea(c,h,0)},bfa={},cfa=bfa=function(){},dfa={},nP=dfa=function(){},nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,efa={};oK.prototype=mP(nP.prototype);var oP=efa=oK.prototype.constructor=oK,Ky="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,ffa={};pK.prototype=mP(nP.prototype);var y1=ffa=pK.prototype.constructor=pK,z1={};z1=function(c){if(c instanceof oP)return c.clone();var h=new y1(c.__wrapped__,c.__chain__);h.__actions__=k1(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var gfa={},X6=oP,BS=y1,W6=$0,V6=jP,Z6=z1,Y6=Object.prototype.hasOwnProperty;qK.prototype=nP.prototype;var hfa=gfa=qK.prototype.constructor=qK,ifa={},uH=ifa=p1&&new p1,jfa={},A1=jfa=uH?function(c){return uH.get(c)}:
cfa,B1={};B1={};var C1={},D1=B1,kfa=Object.prototype.hasOwnProperty;C1=function(c){for(var h=c.name+"",f=D1[h],m=kfa.call(D1,h)?f.length:0;m--;){var n=f[m],a=n.func;if(null==a||a==c)return n.name}return h};var lfa={},mfa=C1,nfa=lfa=function(c){var h=mfa(c),f=hfa[h];if("function"!=typeof f||!(h in oP.prototype))return!1;if(c===f)return!0;h=A1(f);return!!h&&c===h[0]},ofa={},E1=ofa=uH?function(c,h){uH.set(c,h);return c}:kP,pfa={},vH=pfa=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;
case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var f=mP(c.prototype);h=c.apply(f,h);return lx(h)?h:f}},wH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qfa={},rfa=qfa=function(c,h,f){function m(){return((this||wH)&&(this||wH)!==
ru&&(this||wH)instanceof m?a:c).apply(n?f:this||wH,arguments)}var n=h&1,a=vH(c);return m},sfa={},tfa=Math.max,F1=sfa=function(c,h,f,m){var n=-1,a=c.length,d=f.length,k=-1,b=h.length,e=tfa(a-d,0),l=Array(b+e);for(m=!m;++k<b;)l[k]=h[k];for(;++n<d;)if(m||n<a)l[f[n]]=c[n];for(;e--;)l[k++]=c[n++];return l},ufa={},vfa=Math.max,G1=ufa=function(c,h,f,m){var n=-1,a=c.length,d=-1,k=f.length,b=-1,e=h.length,l=vfa(a-k,0),p=Array(l+e);for(m=!m;++n<l;)p[n]=c[n];for(l=n;++b<e;)p[l+b]=h[b];for(;++d<k;)if(m||n<a)p[l+
f[d]]=c[n++];return p},wfa={},xfa=wfa=function(c,h){for(var f=c.length,m=0;f--;)c[f]===h&&++m;return m},yfa={},H1=yfa=o1(E1),zfa={},Afa=/\{\n\/\* \[wrapped with (.+)\] \*/,Bfa=/,? & /,Cfa=zfa=function(c){return(c=c.match(Afa))?c[1].split(Bfa):[]},Dfa={},Efa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ffa=Dfa=function(c,h){var f=h.length;if(!f)return c;var m=f-1;h[m]=(1<f?"& ":"")+h[m];h=h.join(2<f?", ":" ");return c.replace(Efa,"{\n/* [wrapped with "+h+"] */\n")},I1={},Gfa=[["ary",128],["bind",1],
["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];I1=function(c,h){Hea(Gfa,function(f){var m="_."+f[0];h&f[1]&&!afa(c,m)&&c.push(m)});return c.sort()};var Hfa={},Ifa=I1,J1=Hfa=function(c,h,f){h+="";return Eea(c,Ffa(h,Ifa(Cfa(h),f)))},Jfa={},K1=Jfa=function(c,h,f,m,n,a,d,k,b,e){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);n=[c,h,n,l?a:void 0,l?d:void 0,l?void 0:a,l?void 0:d,k,b,e];f=f.apply(void 0,n);nfa(c)&&H1(f,n);f.placeholder=m;return J1(f,
c,h)},Kfa={},L1=Kfa=function(c){return c.placeholder},Lfa={},Mfa=Math.min,Nfa=Lfa=function(c,h){for(var f=c.length,m=Mfa(h.length,f),n=k1(c);m--;){var a=h[m];c[m]=wea(a,f)?n[a]:void 0}return c},Ofa={},xH=Ofa=function(c,h){for(var f=-1,m=c.length,n=0,a=[];++f<m;){var d=c[f];if(d===h||"__lodash_placeholder__"===d)c[f]="__lodash_placeholder__",a[n++]=f}return a},gD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Pfa={},b7=F1,c7=G1,a7=xfa,DS=vH,e7=K1,$6=L1,f7=Nfa,d7=xH,
g7=ru,M1=Pfa=CS,yH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qfa={},Rfa=Qfa=function(c,h,f){function m(){for(var a=arguments.length,d=Array(a),k=a,b=L1(m);k--;)d[k]=arguments[k];k=3>a&&d[0]!==b&&d[a-1]!==b?[]:xH(d,b);a-=k.length;return a<f?K1(c,h,M1,m.placeholder,void 0,d,k,void 0,void 0,f-a):m1((this||yH)&&(this||yH)!==ru&&(this||yH)instanceof m?n:c,this||yH,d)}var n=vH(c);return m},zH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,Sfa={},Tfa=Sfa=function(c,h,f,m){function n(){for(var k=-1,b=arguments.length,e=-1,l=m.length,p=Array(l+b),q=(this||zH)&&(this||zH)!==ru&&(this||zH)instanceof n?d:c;++e<l;)p[e]=m[e];for(;b--;)p[e++]=arguments[++k];return m1(q,a?f:this||zH,p)}var a=h&1,d=vH(c);return n},N1={},Ufa=Math.min;N1=function(c,h){var f=c[1],m=h[1],n=f|m,a=128==m&&8==f||128==m&&256==f&&c[7].length<=h[8]||384==m&&h[7].length<=h[8]&&8==f;if(!(131>n||a))return c;m&1&&(c[2]=h[2],n|=f&1?0:4);if(f=h[3])a=c[3],c[3]=a?F1(a,
f,h[4]):f,c[4]=a?xH(c[3],"__lodash_placeholder__"):h[4];if(f=h[5])a=c[5],c[5]=a?G1(a,f,h[6]):f,c[6]=a?xH(c[5],"__lodash_placeholder__"):h[6];(f=h[7])&&(c[7]=f);m&128&&(c[8]=null==c[8]?h[8]:Ufa(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var O1={},Vfa=N1,P1=Math.max;O1=function(c,h,f,m,n,a,d,k){var b=h&2;if(!b&&"function"!=typeof c)throw new TypeError("Expected a function");var e=m?m.length:0;e||(h&=-97,m=n=void 0);d=void 0===d?d:P1(v1(d),0);k=void 0===k?k:v1(k);e-=n?n.length:0;
if(h&64){var l=m,p=n;m=n=void 0}var q=b?void 0:A1(c);a=[c,h,f,m,n,l,p,a,d,k];q&&Vfa(a,q);c=a[0];h=a[1];f=a[2];m=a[3];n=a[4];k=a[9]=void 0===a[9]?b?0:c.length:P1(a[9]-e,0);!k&&h&24&&(h&=-25);f=h&&1!=h?8==h||16==h?Rfa(c,h,k):32!=h&&33!=h||n.length?M1.apply(void 0,a):Tfa(c,h,f,m):rfa(c,h,f);return J1((q?E1:H1)(f,a),c,h)};var Wfa={},Xfa=O1,Yfa=Wfa=function(c,h,f){h=f?void 0:h;h=c&&null==h?c.length:h;return Xfa(c,128,void 0,void 0,void 0,void 0,h)},pP={};Object.defineProperty(pP,"__esModule",{value:!0});
pP.default=function(c){var h=c.types,f=function(n){return function(a){var d=n[a.type];if(d)return d(a);throw Error(a.type+" could not be transformed");}},m=function(n,a){var d=a.opts;a=d.useNew;var k=void 0===a?!1:a;a=d.module;var b=d.function;d=d.useVariables;var e=void 0===d?!1:d,l=d=void 0;!0===e?d=/^[A-Z]/:(0,Zfa.default)(e)&&(d=new RegExp(e));var p=k?h.newExpression:h.callExpression;l=function(q){return function(u){return p(q,[u])}};a?(k=n.scope.generateUidIdentifier(k?"JSXNode":"jsx"),l=l(k),
a=h.importDeclaration([h.importDefaultSpecifier(k)],h.stringLiteral(a)),n.findParent(function(q){return q.isProgram()}).unshiftContainer("body",a)):b?(n=b.split(".").map((0,Q1.default)(h.identifier,1)).reduce((0,Q1.default)(h.memberExpression,2)),l=l(n)):l=$fa.default;return{variablesRegex:d,jsxObjectTransformer:l}};return{inherits:Nda,visitor:{JSXElement:function(n,a){a.get("jsxConfig")||a.set("jsxConfig",m(n,a));var d=a.get("jsxConfig"),k=d.variablesRegex,b=d.jsxObjectTransformer,e=function(E){return h.stringLiteral(E.name)},
l=function(E){return h.stringLiteral(E.namespace.name+":"+E.name.name)},p=f({JSXIdentifier:function(E){return h.identifier(E.name)},JSXMemberExpression:function(E){return h.memberExpression(p(E.object),p(E.property))}}),q=f({JSXIdentifier:k?function(E){return k.test(E.name)?h.identifier(E.name):e(E)}:e,JSXNamespacedName:l,JSXMemberExpression:p});d=function(E){return E.expression};var u=f({JSXIdentifier:e,JSXNamespacedName:l,JSXMemberExpression:p}),w=f({StringLiteral:function(E){return E},JSXExpressionContainer:d}),
y=function(E){var L=[],I=[];E.forEach(function(V){switch(V.type){case "JSXAttribute":L||(L=[]);var T=u(V.name);T=aga.default.keyword.isIdentifierNameES6(T.value)?h.identifier(T.value):T;L.push(h.objectProperty(T,w(V.value)));break;case "JSXSpreadAttribute":L&&(I.push(h.objectExpression(L)),L=null);I.push(V.argument);break;default:throw Error(V.type+" cannot be used as a JSX attribute");}});L&&0<L.length&&I.push(h.objectExpression(L));return 0===I.length?h.objectExpression([]):1===I.length?I[0]:h.callExpression(a.addHelper("extends"),
I)};l=function(E){return b(h.objectExpression([h.objectProperty(h.identifier(bga),q(E.openingElement.name)),h.objectProperty(h.identifier(cga),y(E.openingElement.attributes)),h.objectProperty(h.identifier(dga),E.closingElement?C(E.children):h.nullLiteral())]))};var A=f({JSXText:function(E){if(a.opts.noTrim)return h.stringLiteral(E.value);E=E.value.replace(/\n\s*/g,"");return""===E?null:h.stringLiteral(E)},JSXElement:l,JSXExpressionContainer:d}),C=function(E){return h.arrayExpression(E.map(A).filter(Boolean).reduce(function(L,
I){var V=0<L.length?L[L.length-1]:null;return"StringLiteral"===I.type&&V&&"StringLiteral"===V.type?[].concat(ES(L.slice(0,-1)),[h.stringLiteral(V.value+I.value)]):[].concat(ES(L),[I])},[]))};n.replaceWith(l(n.node))}}}};var Zfa=hD(aea),$fa=hD(kP),Q1=hD(Yfa),aga=hD(pA),bga="elementName",cga="attributes",dga="children",Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.declare=function(c){return function(h,f,m){for(var n,a,d=$jscomp.makeIterator(Object.keys(R1)),k=d.next();!k.done;k=d.next())if(k=
k.value,!h[k]){if(null==a){a=h;var b=null;"string"===typeof a.version&&/^7\./.test(a.version)&&(b=Object.getPrototypeOf(a),!b||Object.prototype.hasOwnProperty.call(b,"version")&&Object.prototype.hasOwnProperty.call(b,"transform")&&Object.prototype.hasOwnProperty.call(b,"template")&&Object.prototype.hasOwnProperty.call(b,"types")||(b=null));a=Object.assign({},b,a)}a[k]=R1[k](a)}return c(null!=(n=a)?n:h,f||{},m)}};var R1={assertVersion:function(c){return function(h){var f=c.version;if("number"===typeof h){if(!Number.isInteger(h))throw Error("Expected string or integer value.");
h="^"+h+".0.0-0"}if("string"!==typeof h)throw Error("Expected string or integer value.");var m=Error.stackTraceLimit;"number"===typeof m&&25>m&&(Error.stackTraceLimit=25);var n="7."===f.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+f+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+h+'", but was loaded with "'+f+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof m&&(Error.stackTraceLimit=m);throw Object.assign(n,{code:"BABEL_VERSION_UNSUPPORTED",version:f,range:h});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},S1=Object.freeze({__proto__:null,"default":Tr,__esModule:Tr.__esModule,declare:Tr.declare}),mx={};Object.defineProperty(mx,"__esModule",{value:!0});mx.default=void 0;var ega=(0,Tr.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,
f){f.plugins.push("optionalCatchBinding")}}});mx.default=ega;var T1=Object.freeze({__proto__:null,"default":mx,__esModule:mx.__esModule}),fga="default"in S1?Tr:S1,gga="default"in T1?mx:T1,AH={};Object.defineProperty(AH,"__esModule",{value:!0});AH.default=void 0;var hga=(0,fga.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:gga.default,visitor:{CatchClause:function(h){if(!h.node.param){var f=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(f)}}}}});
AH.default=hga;var BH={};Object.defineProperty(BH,"__esModule",{value:!0});BH.default=void 0;var iga=(0,Tr.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,f){f.plugins.push("importMeta")}}});BH.default=iga;var Rg=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Rg.ensureJSXPlugin=function(){Rg.transformJSX&&("undefined"===typeof Rg.babel||Rg.babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||Rg.babel.registerPlugin("transform-jsx",
Rg.transformJSX.default))};Rg.ensureOptionalCatchBinding=function(){Rg.catchBinding&&("undefined"===typeof Rg.babel||Rg.babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||Rg.babel.registerPlugin("optional-catch-binding",Rg.catchBinding.default))};Rg.ensureImportMeta=function(){Rg.importMeta&&("undefined"===typeof Rg.babel||Rg.babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||Rg.babel.registerPlugin("syntax-import-meta",Rg.importMeta.default))};
Rg.stringifyFunctionWithoutToplevelRecorder=Uv;Rg.es5Transpilation=Vv;Rg.capturing=CA;Rg.capturing=CA;Rg.capturing=CA;Rg.parseFunction=er;Rg.stringify=Yi;Rg.ReplaceVisitor=qo;Rg.transformJSX=pP;Rg.catchBinding=AH;Rg.importMeta=BH;Rg.stringifyFunctionWithoutToplevelRecorder=Uv;Rg.stringifyFunctionWithoutToplevelRecorder=Uv;Rg.es5Transpilation=Vv;Rg.es5Transpilation=Vv;var jga=Object.freeze({__proto__:null,capturing:CA,stringifyFunctionWithoutToplevelRecorder:Uv,es5Transpilation:Vv}),xf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");
xf.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(m){return m.text.startsWith("lively.vm ")});if(!c)return h;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,f)}catch(m){return h}};xf.evalCodeTransform=gr;xf.evalCodeTransformOfSystemRegisterSetters=ot;xf.copyProperties=function(c,h,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(m){return-1===f.indexOf(m)&&
Object.defineProperty(h,m,Object.getOwnPropertyDescriptor(c,m))})};xf.arr=Ke;xf.Path=Ag;xf.parse=Bj;xf.stringify=Yi;xf.transform=qu;xf.query=ro;xf.nodes=Cq;xf.capturing=CA;xf.es5Transpilation=Vv;xf.getGlobal=fr;var CH=xf.nodes;xf.id=CH.id;xf.literal=CH.literal;xf.member=CH.member;xf.objectLiteral=CH.objectLiteral;xf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";xf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";xf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
xf.defaultClassToFunctionConverterName="initializeES6ClassForLively";xf.defaultClassToFunctionConverterName="initializeES6ClassForLively";xf.defaultClassToFunctionConverterName="initializeES6ClassForLively";xf.evalCodeTransform=gr;xf.evalCodeTransform=gr;xf.evalCodeTransformOfSystemRegisterSetters=ot;xf.evalCodeTransformOfSystemRegisterSetters=ot;var Nf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");Nf._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,
runtime:null,context:Nf.getGlobal(),varRecorderName:Nf.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Nf.startEvalFunctionName},
computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Nf.endEvalFunctionName},computed:!0});return c};Nf.runEval=Ly;Nf.finishEval=function(c,h,f,m,n,a,d){m.wrapInStartEndCall&&(delete n[Nf.startEvalFunctionName],delete n[Nf.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=h;f.value instanceof Promise&&(f.isPromise=!0);if(m.sync){if(f.processSync(m),"function"===typeof m.onEndEval)m.onEndEval(c,h)}else f.process(m).then(function(){"function"===
typeof d&&d(null,f);"function"===typeof m.onEndEval&&m.onEndEval(c,h);return f},function(k){"function"===typeof d&&d(k,void 0);"function"===typeof m.onEndEval&&m.onEndEval(k,void 0);return f}).then(a.resolve,a.reject)};Nf.syncEval=iD;Nf.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},m=new Promise(function(n){return setTimeout(n,h,f)});return Promise.race([m,c.value]).then(function(n){return Object.assign(c,n!==f?{promiseStatus:"fulfilled",
promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};Nf.arr=Ke;Nf.obj=df;Nf.string=rg;Nf.Path=Ag;Nf.promise=Vf;Nf.Closure=ci;Nf.evalCodeTransform=gr;Nf.printEvalResult=Hy;Nf.getGlobal=fr;Nf.defaultTopLevelVarRecorderName="__lvVarRecorder";Nf.startEvalFunctionName="lively.vm-on-eval-start";Nf.endEvalFunctionName="lively.vm-on-eval-end";Nf._eval=Nf.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();
var EA=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};EA.prototype.addWarning=function(c){this.warnings.push(c);return c};EA.prototype.printed=function(c){c=void 0===c?{}:c;this.value=Nf.printEvalResult(this,c)};EA.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};EA.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return Nf.tryToWaitForPromise(h,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};Nf.EvalResult=EA;var nx=Nf.defaultTopLevelVarRecorderName;Nf.defaultTopLevelVarRecorderName=nx;Nf.defaultTopLevelVarRecorderName=nx;Nf.getGlobal=fr;Nf.getGlobal=fr;Nf.runEval=Ly;Nf.runEval=Ly;Nf.syncEval=iD;Nf.syncEval=iD;var kga=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:nx,getGlobal:fr,runEval:Ly,syncEval:iD}),Mg=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
Mg.ensureImportsAreImported=function(c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(m=Mg.parse(h),n=m.body,a=n.filter(function(k){return"ImportDeclaration"===k.type}),d.yield(Promise.all(a.map(function(k){return c.normalize(k.source.value,f).then(function(b){k.source.value=b;return c.get(b)||c.import(b)})})).catch(function(k){console.error("Error ensuring imports: "+k.message);throw k;}),2)):d.return(Mg.stringify(m))})};Mg.hasUnimportedImports=
function(c,h,f){h=Mg.parse(h).body.filter(function(m){return"ImportDeclaration"===m.type});return 0<Mg.arr.uniq(h.map(function(m){return m.source.value})).filter(Boolean).filter(function(m){return!c.get(c.decanonicalize(m,f))}).length};Mg.babelTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},a);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Mg.babelPluginTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){var d=c.babelOptions||{},k=[];k.push(h.presetES2015);d.stage3&&k.push({plugins:h.pluginsStage3});d.stage2&&k.push({plugins:h.pluginsStage2});d.stage1&&k.push({plugins:h.pluginsStage1});a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,babelrc:!1,presets:k,moduleIds:!1,code:!0,ast:!1},a);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Mg.getEs6Transpiler=function(c,h,f){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var m=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return m?Mg.babelTranspilerForAsyncAwaitCode(c,m,h.targetModule,f):c.import(c.transpiler).then(function(d){return Mg.babelTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("plugin-babel"===c.transpiler){m=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var n=c.get(m);return n?Mg.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,f):c.import(m).then(function(d){return Mg.babelPluginTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("lively.transpiler"===c.transpiler){var a=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,f);return function(d,k){return a.transpileDoit(d,k)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Mg.runEval=pt;Mg.evalEnd=function(c,h,f,m){c.get("@lively-env").evaluationEnd(f.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");Mg.emit("lively.vm/doitresult",{code:h,result:m,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return m};Mg.parse=Bj;Mg.nodes=Cq;Mg.stringify=Yi;Mg.emit=Xp;var DH=Mg.nodes;Mg.funcCall=DH.funcCall;Mg.member=DH.member;Mg.id=DH.id;Mg.literal=DH.literal;Mg.arr=Ke;Mg.vmRunEval=Ly;Mg.runEval=pt;Mg.runEval=pt;var lga=Object.freeze({__proto__:null,runEval:pt}),ni=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
ni.obj=df;var ox=function(){};ox.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};ox.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};ni.EvalStrategy=ox;var su=function(){return ni.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(su,ni.EvalStrategy);su.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(m){return{isError:!0,value:m}}}))})};su.prototype.keysOfObject=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(a){return f.runEval(a,
h)},c),2);m=n.yieldResult;return n.return({completions:m.completions,prefix:m.startLetters})})};ni.SimpleEvalStrategy=su;var Ur=function(){return ni.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Ur,ni.EvalStrategy);Ur.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};Ur.prototype.runEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){h=
f.normalizeOptions(h);m=h.System||lively.modules.System;n={};m.config({meta:(n[h.targetModule]={format:"esm"},n)});return a.return(lively.vm.runEval(c,h))})};Ur.prototype.keysOfObject=function(c,h){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,h)},c),2);f=m.yieldResult;return m.return({completions:f.completions,prefix:f.startLetters})})};ni.LivelyVmEvalStrategy=Ur;
var Vr=function(){return ni.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Vr,ni.LivelyVmEvalStrategy);Vr.prototype.sourceForRemote=function(c,h,f){var m=ni.obj.isString(f.context)?f.context:!1;f=ni.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(f)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
m+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Vr.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("eval",c,h),h))})};Vr.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,h),h))})};Vr.prototype.remoteEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.setCatchFinallyBlocks(2),a.yield(f.basicRemoteEval(c,h),4);if(2!=a.nextAddress)return m=a.yieldResult,a.return("string"===typeof m?JSON.parse(m):m);n=a.enterCatchBlock();return a.return({isError:!0,value:"Remote eval failed: "+(m||n)})})};Vr.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};ni.RemoteEvalStrategy=Vr;var up=function(c){var h=ni.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(up,ni.RemoteEvalStrategy);up.prototype.normalizeOptions=function(c){c=ni.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};up.prototype.basicRemoteEval=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=f.normalizeOptions(h),
m="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(f[m]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};up.prototype.basicRemoteEval_web=function(c,h){var f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:f=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);m=f.next().value;n=System.get("@system-env").worker?window.location:document.location;if(a=n.origin!==m)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;b.setCatchFinallyBlocks(2);return b.yield(window.fetch(h,c),4);case 4:d=b.yieldResult;b.leaveTryBlock(3);break;case 2:throw k=b.enterCatchBlock(),Error("Cannot reach server at "+h+": "+k.message);case 3:if(!d.ok)throw Error("Server at "+h+": "+d.statusText);return b.return(d.text())}})};up.prototype.basicRemoteEval_node=function(c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){f=System._nodeRequire("url").parse;
m=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},f(h));return a.return(new Promise(function(d,k){var b=m.request(n,function(e){e.setEncoding("utf8");var l="";e.on("data",function(p){return l+=p});e.on("end",function(){return d(l)});e.on("error",function(p){return k(p)})});b.on("error",function(e){return k(e)});b.end(c.body)}))})};$jscomp.global.Object.defineProperties(up,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
ni.HttpEvalStrategy=up;var px=function(c,h){var f=ni.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=h;return f};$jscomp.inherits(px,ni.RemoteEvalStrategy);px.prototype.basicRemoteEval=function(c,h){var f=this,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return m=f,n=m.l2lClient,a=m.targetId,b.yield(n.sendToAndWait(a,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);d=b.yieldResult;(k=d.data)&&k.value&&k.value.isEvalResult&&(k=
k.value);return b.return(k)})};ni.L2LEvalStrategy=px;ni.EvalStrategy=ox;ni.EvalStrategy=ox;ni.SimpleEvalStrategy=su;ni.SimpleEvalStrategy=su;ni.LivelyVmEvalStrategy=Ur;ni.LivelyVmEvalStrategy=Ur;ni.HttpEvalStrategy=up;ni.HttpEvalStrategy=up;ni.L2LEvalStrategy=px;ni.L2LEvalStrategy=px;var FA=Object.freeze({__proto__:null,RemoteEvalStrategy:Vr,EvalStrategy:ox,SimpleEvalStrategy:su,LivelyVmEvalStrategy:Ur,HttpEvalStrategy:up,L2LEvalStrategy:px});za("by",FA);var Zi=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Zi.runEval=Xv;Zi.syncEval=Ny;Zi.completions=BA;Zi.completions=BA;Zi.completions=BA;Zi.globalEval=kga;Zi.esmEval=lga;Zi.defaultTopLevelVarRecorderName=nx;Zi.defaultTopLevelVarRecorderName=nx;Zi.defaultClassToFunctionConverterName="initializeES6ClassForLively";Zi.defaultClassToFunctionConverterName="initializeES6ClassForLively";Zi.evalCodeTransform=gr;Zi.evalCodeTransform=gr;Zi.evalCodeTransformOfSystemRegisterSetters=ot;Zi.evalCodeTransformOfSystemRegisterSetters=ot;Zi.runEval=Xv;Zi.runEval=Xv;Zi.syncEval=
Ny;Zi.syncEval=Ny;Zi.evalStrategies=FA;Zi.evalStrategies=FA;Zi.evalStrategies=FA;var U1=Object.freeze({__proto__:null,completions:BA,defaultTopLevelVarRecorderName:nx,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:gr,evalCodeTransformOfSystemRegisterSetters:ot,runEval:Xv,syncEval:Ny,evalStrategies:FA});za("bx",U1);var kh=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");kh.string=rg;kh.arr=Ke;kh.parse=Bj;kh.query=ro;kh.runEval=Xv;kh.objMetaSym=
Symbol.for("lively-object-meta");kh.moduleSym=Symbol.for("lively-module-meta");kh.descriptorCache=new Map;var qx=function(c,h){c&&h?this.update(h,c):this.reset()};qx.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};qx.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};qx.prototype.changeSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;h=h.slice(0,m)+c+h.slice(f);this.update(h,{start:m,end:m+c.length});this._source=c;return this};qx.prototype.toString=function(){var c=kh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(qx.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=kh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
kh.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=kh.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=kh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=kh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=kh.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=kh.arr.withoutAll(h,f);c=kh.arr.withoutAll(kh.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}}});kh.SourceDescriptor=qx;var im=function(c,h){this.obj=c;this.System=h;this.reset()};im.forObjectWithModuleSource=function(c,h,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,h);return c};im.for=function(c,h){var f=kh.descriptorCache.get(c);f||(f=new this(c,h),kh.descriptorCache.set(c,f));return f};im.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};im.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};im.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=kh.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};im.prototype.changeSource=
function(c){var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(f=h,m=f.module,n.yield(m.changeSourceAction(function(a){if(a!==h.moduleSource)throw Error("source of module "+m.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};im.prototype._modifiedSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;return{moduleSource:h.slice(0,m)+c+h.slice(f),sourceLocation:{start:m,
end:m+c.length}}};im.prototype._renamedSource=function(c){var h=this.ast,f=h.type,m=h.id;h=m.start;m=m.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(m))};im.prototype._basicChangeSource=function(c){var h=this.meta,f=this._modifiedSource(c),m=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:m},f);this._sourceLocation=f;this._moduleSource=m;this._source=c;return this};
im.prototype.toString=function(){var c=kh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(f){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(im.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[kh.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[kh.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[kh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[kh.objMetaSym]},set:function(c){this.obj[kh.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=kh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=kh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=kh.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=kh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=kh.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=kh.arr.withoutAll(h,f);
c=kh.arr.withoutAll(kh.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=kh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});za("D",im);kh.RuntimeSourceDescriptor=im;var ve=lively.FreezerRuntime.recorderFor("lively.classes/util.js");ve.superclasses=sK;ve.getClassHierarchy=
kD;ve.withSuperclasses=lD;ve.inheritsFrom=tK;ve.changeClass=uK;ve.isClass=vK;ve.isOverridden=function(c,h){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(h))return!0;return!1};ve.lexicalClassMembers=wK;ve.runtimeClassMembers=xK;ve.runtimeClassMembersInProtoChain=function(c){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(c),Object),function(h){return ve.runtimeClassMembers(h)}))};ve.runtimeNonStaticMembers=function(c){var h=c.prototype,
f=ve.obj.getOwnPropertyDescriptors(h);return ve.arr.withoutAll(Object.keys(f),["constructor"]).map(function(m){var n=f[m],a="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:m,value:"method"===a?n.value:"get"===a?n.get:"set"===a?n.set:null,kind:a,owner:h}})};ve.runtimeNonstaticClassMembersInProtoChain=function(c){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(c),Object),function(h){return ve.runtimeNonStaticMembers(h)}))};ve.runtimeStaticClassMembers=
yK;ve.runtimeStaticClassMembersInProtoChain=zK;ve.arr=Ke;ve.obj=df;ve.Path=Ag;ve.RuntimeSourceDescriptor=im;ve.superclasses=sK;ve.superclasses=sK;var EH=Symbol.for("lively-instance-initialize");ve.initializeSymbol=EH;ve.initializeSymbol=EH;ve.initializeSymbol=EH;var qP=Symbol.for("lively-instance-restorer");ve.instanceRestorerSymbol=qP;ve.instanceRestorerSymbol=qP;ve.instanceRestorerSymbol=qP;var FH=Symbol.for("lively-instance-superclass");ve.superclassSymbol=FH;ve.superclassSymbol=FH;ve.superclassSymbol=
FH;var GH=Symbol.for("lively-module-meta");ve.moduleMetaSymbol=GH;ve.moduleMetaSymbol=GH;ve.moduleMetaSymbol=GH;var HH=Symbol.for("lively-object-meta");ve.objMetaSymbol=HH;ve.objMetaSymbol=HH;ve.objMetaSymbol=HH;var IH=Symbol.for("lively-klass-changes-subscriber");ve.moduleSubscribeToToplevelChangesSym=IH;ve.moduleSubscribeToToplevelChangesSym=IH;ve.moduleSubscribeToToplevelChangesSym=IH;ve.getClassHierarchy=kD;ve.getClassHierarchy=kD;ve.withSuperclasses=lD;ve.withSuperclasses=lD;ve.inheritsFrom=
tK;ve.inheritsFrom=tK;ve.changeClass=uK;ve.changeClass=uK;ve.isClass=vK;ve.isClass=vK;ve.lexicalClassMembers=wK;ve.lexicalClassMembers=wK;ve.runtimeClassMembers=xK;ve.runtimeClassMembers=xK;ve.runtimeStaticClassMembers=yK;ve.runtimeStaticClassMembers=yK;ve.runtimeStaticClassMembersInProtoChain=zK;ve.runtimeStaticClassMembersInProtoChain=zK;var rP=za("F",function(){function c(d){return d.replace(a,function(k,b){return b[b.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},m={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(d){return f[d]||"ASCII_"+d.charCodeAt(0)},a=/([\s-]+.)/g;return function(d){d=c(d);return 0<=h.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(k){return m[k]}).replace(/[^\w\$_]/g,n)}}());ve.toJsIdentifier=rP;ve.toJsIdentifier=rP;ve.toJsIdentifier=rP;var nh=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
nh.hasManagedProperties=function(c){return c.hasOwnProperty(nh.defaultPropertiesKey)};nh.prepareClassForManagedPropertiesAfterCreation=mD;nh.prepareClassForProperties=function(c,h,f){nh.ensurePropertyInitializer(c);var m=h.valueStoreProperty,n=h.defaultGetter,a=h.defaultSetter,d=c.prototype;Object.keys(f).forEach(function(k){var b=f[k],e=d.hasOwnProperty(k)&&d.__lookupGetter__(k);if(!e||e._wasGenerated)e=b.get||"function"===typeof n&&function(){return n.call(this,k)}||function(){return this[m][k]},
e._wasGenerated=!0,d.__defineGetter__(k,e);e=d.hasOwnProperty(k)&&d.__lookupSetter__(k);if(!e||e._wasGenerated)if(b.hasOwnProperty("set")||!b.readOnly)b=b.set||"function"===typeof a&&function(l){a.call(this,k,l)}||function(l){this[m][k]=l},b._wasGenerated=!0,d.__defineSetter__(k,b)})};nh.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,f=h[nh.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=nh.getClassHierarchy(h)){var m=nh.propertiesAndSettingsInHierarchyOf(h);f=m.properties;m=m.propertySettings;h[nh.propertiesAndSettingsCacheSym]={properties:f,propertySettings:m,order:nh.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:nh.getClassHierarchy(h)};nh.prepareClassForProperties(h,m,f)}else return f;return h[nh.propertiesAndSettingsCacheSym]||nh.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var f=this.propertiesAndPropertySettings();nh.prepareInstanceForProperties(this,f.propertySettings,f.properties,h,f.order);return this}})};nh.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},nh.defaultPropertySettings),f={},m=nh.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=nh.obj.valuesInPropertyHierarchy(c,"properties"),a=0;a<m.length;a++){var d=m[a];d&&"object"===typeof d&&Object.assign(h,d)}for(a=0;a<n.length;a++)if(m=
n[a],"object"!==typeof m)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+m);else for(var k in m)f.hasOwnProperty(k)?Object.assign(f[k],m[k]):f[k]=m[k];return{properties:f,propertySettings:h}};nh.prepareInstanceForProperties=function(c,h,f,m,n){var a=h.valueStoreProperty;n=n||nh.obj.sortKeysWithBeforeAndAfterConstraints(f);h=[];var d={};c.hasOwnProperty(a)||(c[a]={});for(var k=0;k<n.length;k++){var b=n[k],e=f[b],l=e.derived,p=!!e.foldable,q=e.hasOwnProperty("defaultValue")?
e.defaultValue:void 0;Array.isArray(q)&&(q=q.slice());l||p||(c[a][b]=q);var u=void 0;e.hasOwnProperty("initialize")?(u=d[b]={initialize:q},h.push(b)):l&&void 0!==q?(u=d[b]={derived:q},h.push(b)):p&&void 0!==q&&(u=d[b]={folded:q},h.push(b));m&&b in m&&(e.readOnly?console.warn("Trying to initialize read-only property "+b+" in "+c+", skipping setting value"):(u||(u=d[b]={},h.push(b)),u.value=m[b]))}for(k=0;k<h.length;k++)m=h[k],n=d[m],a=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(f[m].initialize.call(c,
a?n.value:n.initialize),a&&(c[m]=n.value)):n.hasOwnProperty("derived")?c[m]=a?n.value:n.derived:n.hasOwnProperty("folded")?c[m]=a?n.value:n.folded:a&&(c[m]=n.value)};nh.obj=df;nh.getClassHierarchy=kD;nh.defaultPropertiesSettingKey="propertySettings";nh.defaultPropertiesKey="properties";nh.defaultInstanceInitializerMethod="initializeProperties";nh.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");nh.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
nh.prepareClassForManagedPropertiesAfterCreation=mD;nh.prepareClassForManagedPropertiesAfterCreation=mD;var Ye=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");Ye.adoptObject=Yv;Ye.setSuperclass=nD;Ye.installValueDescriptor=function(c,h,f){f=Object.assign(f,Ye.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var m=f.value.originalFunction||f.value;f.value=Object.assign(function(){return m.call.apply(m,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:m,toString:function(){return m.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};Ye.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,Ye.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};Ye.installMethods=function(c,h,f){f&&f.forEach(function(d){d.value?Ye.installValueDescriptor(c,c,d):Ye.installGetterSetterDescriptor(c,d)});h&&h.forEach(function(d){d.value?Ye.installValueDescriptor(c.prototype,c,d):Ye.installGetterSetterDescriptor(c.prototype,
d)});c.prototype[Ye.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(Ye.initializeSymbol)&&c.prototype[Ye.initializeSymbol].isDefaultInitializer&&c[Ye.superclassSymbol].prototype[Ye.initializeSymbol]&&delete c.prototype[Ye.initializeSymbol]:(Object.defineProperty(c.prototype,Ye.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[Ye.initializeSymbol].isDefaultInitializer=!0,c.prototype[Ye.initializeSymbol].displayName="lively-initialize");
h=h.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var m=Object.getOwnPropertyNames(c.prototype),n=0;n<m.length;n++){var a=m[n];h.includes(a)||delete c.prototype[a]}f=f.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(m=0;m<h.length;m++)n=h[m],f.includes(n)||delete c[n]};Ye.ensureInitializeStub=function(c){c===Object||c.prototype[Ye.initializeSymbol]||(Object.defineProperty(c.prototype,Ye.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[Ye.initializeSymbol].displayName="lively-initialize-stub")};Ye.initializeClass=Kb;Ye.prepareClassForManagedPropertiesAfterCreation=mD;Ye.superclassSymbol=FH;Ye.moduleSubscribeToToplevelChangesSym=IH;Ye.moduleMetaSymbol=GH;Ye.objMetaSymbol=HH;Ye.initializeSymbol=EH;Ye.constructorArgMatcher=/\([^\\)]*\)/;Ye.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};Ye.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var JH="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};Ye.setPrototypeOf=JH;Ye.setPrototypeOf=JH;Ye.setPrototypeOf=JH;Ye.adoptObject=Yv;Ye.adoptObject=Yv;Ye.setSuperclass=nD;Ye.setSuperclass=nD;Ye.initializeClass=Kb;Ye.initializeClass=Kb;Ye.initializeClass._get=function n(h,f,m){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,f);if(void 0===a)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,f,m);if("value"in a)return a.value;f=a.get;return void 0===f?void 0:f.call(m)};Ye.initializeClass._set=function d(f,m,n,a){var k=Object.getOwnPropertyDescriptor(f,m);void 0===k?(f=Object.getPrototypeOf(f),null!==f&&d(f,m,n,a)):"value"in k&&k.writable?k.value=n:(m=k.set,void 0!==m&&m.call(a,n));return n};var rx=Object.freeze({__proto__:null,setPrototypeOf:JH,adoptObject:Yv,setSuperclass:nD,initializeClass:Kb}),Yc=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
Yc.parse=oD;Yc.Color=function(f){this._listeners={};this.subscribe(Yc.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Yc.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Yc.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Yc.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Yc.Events.INT_UPDATED,this._INTUpdated);this.parse(f)};Yc.parse=oD;Yc.parse=oD;Yc.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};Yc.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Yc.absround=function(f){return.5+f<<0};Yc.hue2rgb=function(f,m,n){0>n&&(n+=1);1<n&&--n;return n<1/6?f+6*(m-f)*n:.5>n?m:n<2/3?f+(m-f)*(2/3-n)*6:f};Yc.p2v=function(f){return Yc.isPercent.test(f)?
Yc.absround(2.55*parseInt(f)):f};Yc.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Yc.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Yc.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Yc.isPercent=/^\d+(\.\d+)*%$/;Yc.hexBit=/([0-9a-f])/gi;Yc.leadHex=/^#/;Yc.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Yc.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Yc.Color.prototype._decimal=
0;Yc.Color.prototype._hex="#000000";Yc.Color.prototype._red=0;Yc.Color.prototype._green=0;Yc.Color.prototype._blue=0;Yc.Color.prototype._hue=0;Yc.Color.prototype._saturation=0;Yc.Color.prototype._lightness=0;Yc.Color.prototype._brightness=0;Yc.Color.prototype._alpha=1;Yc.Color.prototype.parse=function(f){if("undefined"===typeof f)return this;switch(!0){case isFinite(f):this.decimal(f);this.output=Yc.Color.INT;break;case f instanceof Yc.Color:this.copy(f);break;default:switch(typeof f){case "object":this.set(f);
break;case "string":switch(!0){case Yc.namedColors.hasOwnProperty(f):f=Yc.namedColors[f];f=f.replace(Yc.leadHex,"");this.decimal(parseInt(f,16));break;case Yc.isHex.test(f):f=f.replace(Yc.leadHex,"");3==f.length&&(f=f.replace(Yc.hexBit,"$1$1"));this.decimal(parseInt(f,16));break;case Yc.isRGB.test(f):f=f.match(Yc.matchRGB);this.red(Yc.p2v(f[1]));this.green(Yc.p2v(f[2]));this.blue(Yc.p2v(f[3]));this.alpha(parseFloat(f[5])||1);this.output=(Yc.isPercent.test(f[1])?2:1)+(f[5]?2:0);break;case Yc.isHSL.test(f):f=
f.match(Yc.matchHSL),this.hue(parseInt(f[1])),this.saturation(parseInt(f[2])),this.lightness(parseInt(f[3])),this.alpha(parseFloat(f[5])||1),this.output=f[5]?6:5}}}return this};Yc.Color.prototype.clone=function(){return new Yc.Color(this.decimal())};Yc.Color.prototype.copy=function(f){this.set(f.decimal());return this};Yc.Color.prototype.set=function(f,m){if(1==arguments.length)if("object"===typeof f)for(var n in f){if("function"===typeof this[n])this[n](f[n])}else isFinite(f)&&this.decimal(f);else if("function"===
typeof this[f])this[f](m);return this};Yc.Color.prototype.interpolate=function(f,m){f instanceof Yc.Color||(f=new Yc.Color(f));this._red=Yc.absround(+this._red+(f._red-this._red)*m);this._green=Yc.absround(+this._green+(f._green-this._green)*m);this._blue=Yc.absround(+this._blue+(f._blue-this._blue)*m);this._alpha=Yc.absround(+this._alpha+(f._alpha-this._alpha)*m);this.broadcast(Yc.Events.RGB_UPDATED);this.broadcast(Yc.Events.UPDATED);return this};Yc.Color.prototype._RGB2HSL=function(){var f=this._red/
255,m=this._green/255,n=this._blue/255,a=Math.max(f,m,n),d=Math.min(f,m,n),k=(a+d)/2;if(a==d)this._saturation=this._hue=0;else{var b=a-d;d=b/(.5>=k?a+d:2-a-d);this._hue=Yc.absround((a==f?(m-n)/b+(m<n?6:0):a==m?(n-f)/b+2:(f-m)/b+4)/6*360);this._saturation=Yc.absround(100*d)}this._lightness=Yc.absround(100*k);this._brightness=Yc.absround(100*a)};Yc.Color.prototype._HSL2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._lightness/100;m=.5>n?n*(1+m):n+m-n*m;n=2*n-m;this._red=Yc.absround(255*
Yc.hue2rgb(n,m,f+1/3));this._green=Yc.absround(255*Yc.hue2rgb(n,m,f));this._blue=Yc.absround(255*Yc.hue2rgb(n,m,f-1/3))};Yc.Color.prototype._HSV2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._brightness/100,a=0,d=0,k=0,b=Math.floor(6*f),e=6*f-b;f=n*(1-m);var l=n*(1-e*m);m=n*(1-(1-e)*m);switch(b%6){case 0:a=n;d=m;k=f;break;case 1:a=l;d=n;k=f;break;case 2:a=f;d=n;k=m;break;case 3:a=f;d=l;k=n;break;case 4:a=m;d=f;k=n;break;case 5:a=n,d=f,k=l}this._red=Yc.absround(255*a);this._green=
Yc.absround(255*d);this._blue=Yc.absround(255*k)};Yc.Color.prototype._INT2HEX=function(){var f=this._decimal.toString(16);f="000000".substr(0,6-f.length)+f;this._hex="#"+f.toUpperCase()};Yc.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Yc.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Yc.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Yc.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Yc.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Yc.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Yc.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Yc.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Yc.Color.prototype._broadcastUpdate=function(){this.broadcast(Yc.Events.UPDATED)};
Yc.Color.prototype.decimal=function(f){return this._handle("_decimal",f,Yc.Events.INT_UPDATED)};Yc.Color.prototype.hex=function(f){return this._handle("_hex",f,Yc.Events.HEX_UPDATED)};Yc.Color.prototype.red=function(f){return this._handle("_red",f,Yc.Events.RGB_UPDATED)};Yc.Color.prototype.green=function(f){return this._handle("_green",f,Yc.Events.RGB_UPDATED)};Yc.Color.prototype.blue=function(f){return this._handle("_blue",f,Yc.Events.RGB_UPDATED)};Yc.Color.prototype.hue=function(f){return this._handle("_hue",
f,Yc.Events.HSL_UPDATED)};Yc.Color.prototype.saturation=function(f){return this._handle("_saturation",f,Yc.Events.HSL_UPDATED)};Yc.Color.prototype.lightness=function(f){return this._handle("_lightness",f,Yc.Events.HSL_UPDATED)};Yc.Color.prototype.brightness=function(f){return this._handle("_brightness",f,Yc.Events.HSV_UPDATED)};Yc.Color.prototype.alpha=function(f){return this._handle("_alpha",f)};Yc.Color.prototype._handle=function(f,m,n){"undefined"!==typeof this[f]&&"undefined"!==typeof m&&(m!=
this[f]&&(this[f]=m,n&&this.broadcast(n)),this.broadcast(Yc.Events.UPDATED));return this[f]};Yc.Color.prototype.getHex=function(){return this._hex};Yc.Color.prototype.getRGB=function(){return"rgb("+[Yc.absround(this._red),Yc.absround(this._green),Yc.absround(this._blue)].join(", ")+")"};Yc.Color.prototype.getPRGB=function(){return"rgb("+[Yc.absround(100*this._red/255)+"%",Yc.absround(100*this._green/255)+"%",Yc.absround(100*this._blue/255)+"%"].join(", ")+")"};Yc.Color.prototype.getRGBA=function(){return"rgba("+
[Yc.absround(this._red),Yc.absround(this._green),Yc.absround(this._blue),this._alpha].join(", ")+")"};Yc.Color.prototype.getPRGBA=function(){return"rgba("+[Yc.absround(100*this._red/255)+"%",Yc.absround(100*this._green/255)+"%",Yc.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Yc.Color.prototype.getHSL=function(){return"hsl("+[Yc.absround(this._hue),Yc.absround(this._saturation)+"%",Yc.absround(this._lightness)+"%"].join(", ")+")"};Yc.Color.prototype.getHSLA=function(){return"hsla("+
[Yc.absround(this._hue),Yc.absround(this._saturation)+"%",Yc.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Yc.Color.prototype.format=function(f){var m={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in m)f=f.split("%"+n+"%").join(m[n]);return f};Yc.Color.prototype.output=0;Yc.Color.HEX=0;Yc.Color.RGB=1;Yc.Color.PRGB=2;Yc.Color.RGBA=3;Yc.Color.PRGBA=4;Yc.Color.HSL=5;Yc.Color.HSLA=
6;Yc.Color.INT=7;Yc.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Yc.Color.prototype._listeners=null;Yc.Color.prototype._isSubscribed=function(f){return null!=this._listeners[f]};Yc.Color.prototype.subscribe=function(f,m){this._isSubscribed(f)||(this._listeners[f]=[]);
this._listeners[f].push(m)};Yc.Color.prototype.unsubscribe=function(f,m){if(this._isSubscribed(f))for(var n=this._listeners[f],a=0,d=n.length;a<d;a++)if(n[a]===m)return n.splice(a,1),this.unsubscribe(f,m)};Yc.Color.prototype.broadcast=function(f,m){if(this._isSubscribed(f)){f=this._listeners[f];for(var n=f.length,a=0;a<n;a++)f[a].apply(this,m)}};Yc.Color.prototype.tween=function(f,m){m instanceof Yc.Color||(m=new Yc.Color(m));var n=+new Date,a=this;this.broadcast("tweenStart");var d=setInterval(function(){var k=
Math.min(1,(+new Date-n)/f);a.interpolate(m,k);a.broadcast("tweenProgress");1==k&&(clearInterval(d),a.broadcast("tweenComplete"))},20);return d};Yc.Color.prototype.bind=function(f,m){var n=this;this.subscribe("updated",function(){f[m]=n.toString()})};Yc.Color.random=function(){return new Yc.Color(Yc.absround(16777215*Math.random()))};Yc.Color.bind=function(f,m){var n=new Yc.Color(f[m]);n.bind(f,m);return n};var fh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");fh.parseUnit=
function(f,m){m||(m=[0,""]);f=String(f);var n=parseFloat(f,10);m[0]=n;m[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return m};fh.unit=function(f){return fh.parseUnit(f)[1]};fh.unitLess=function(f){return fh.parseUnit(f)[0]};fh.genericCssLengthParser=AK;fh.cssLengthToPixels=pD;fh.baseFontSize="16px";if(System.get("@system-env").browser)try{fh.newBaseFontSize=fh.genericCssLengthParser(fh.baseFontSize)(window.getComputedStyle(document.body).fontSize),fh.newBaseFontSize&&"NaN"!==fh.newBaseFontSize.slice(0,
3)&&(fh.baseFontSize=fh.newBaseFontSize)}catch(f){}fh.genericCssLengthParser=AK;fh.genericCssLengthParser=AK;var sP=fh.genericCssLengthParser(fh.baseFontSize);fh.parseCssLength=sP;fh.parseCssLength=sP;fh.parseCssLength=sP;fh.cssLengthToPixels=pD;fh.cssLengthToPixels=pD;var jd=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");jd.rect=wk;jd.pt=bh;jd.num=Dj;jd.string=rg;jd.grid=hx;jd.cssLengthToPixels=pD;var tf=function(f,m){this.x=f||0;this.y=m||0};tf.ensure=function(f){return f instanceof
jd.Point?f:new jd.Point(f.x,f.y)};tf.polar=function(f,m){return new jd.Point(f*Math.cos(m),f*Math.sin(m))};tf.random=function(f){return new jd.Point(jd.num.randomSmallerInteger(f.x),jd.num.randomSmallerInteger(f.y))};tf.fromLiteral=function(f){return jd.pt(f.x,f.y)};tf.fromTuple=function(f){return jd.pt(f[0],f[1])};tf.prototype.getX=function(){return this.x};tf.prototype.getY=function(){return this.y};tf.prototype.toFixed=function(f){return new jd.Point(this.x.toFixed(f),this.y.toFixed(f))};tf.prototype.addPt=
function(f){return new jd.Point(this.x+f.x,this.y+f.y)};tf.prototype.addXY=function(f,m){return new jd.Point(this.x+f,this.y+m)};tf.prototype.midPt=function(f){return new jd.Point((this.x+f.x)/2,(this.y+f.y)/2)};tf.prototype.subPt=function(f){return new jd.Point(this.x-f.x,this.y-f.y)};tf.prototype.subXY=function(f,m){return new jd.Point(this.x-f,this.y-m)};tf.prototype.scaleBy=function(f,m){return new jd.Point(this.x*f,this.y*(m||f))};tf.prototype.scaleByPt=function(f){return new jd.Point(this.x*
f.x,this.y*f.y)};tf.prototype.negated=function(){return new jd.Point(-this.x,-this.y)};tf.prototype.inverted=function(){return new jd.Point(1/this.x,1/this.y)};tf.prototype.invertedSafely=function(){return new jd.Point(this.x&&1/this.x,this.y&&1/this.y)};tf.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};tf.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};tf.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};tf.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};tf.prototype.withX=function(f){return jd.pt(f,this.y)};tf.prototype.withY=function(f){return jd.pt(this.x,f)};tf.prototype.copy=function(){return new jd.Point(this.x,this.y)};tf.prototype.minPt=function(f,m){m||(m=new jd.Point(0,0));m.x=Math.min(this.x,f.x);m.y=Math.min(this.y,f.y);return m};tf.prototype.maxPt=function(f,m){m||(m=new jd.Point(0,0));m.x=Math.max(this.x,f.x);m.y=Math.max(this.y,f.y);return m};tf.prototype.random=function(){return jd.Point.random(this)};tf.prototype.normalized=
function(){var f=this.r();return jd.pt(this.x/f,this.y/f)};tf.prototype.fastNormalized=function(){var f=this.fastR();return jd.pt(this.x/f,this.y/f)};tf.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};tf.prototype.matrixTransform=function(f,m){var n=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return m?Object.assign(m,{x:n,y:f}):jd.pt(n,f)};tf.prototype.matrixTransformDirection=function(f,m){var n=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return m?Object.assign(m,{x:n,
y:f}):jd.pt(n,f)};tf.prototype.griddedBy=function(f){return jd.pt(this.x-this.x%f.x,this.y-this.y%f.y)};tf.prototype.roundTo=function(f){return new jd.Point(jd.num.roundTo(this.x,f),jd.num.roundTo(this.y,f))};tf.prototype.dist=function(f){var m=this.x-f.x;f=this.y-f.y;return Math.sqrt(m*m+f*f)};tf.prototype.distSquared=function(f){var m=this.x-f.x;f=this.y-f.y;return m*m+f*f};tf.prototype.nearestPointOnLineBetween=function(f,m){if(f.x==m.x)return jd.pt(f.x,this.y);if(f.y==m.y)return jd.pt(this.x,
f.y);var n=f.x;f=f.y;var a=m.x-n;m=m.y-f;var d=((this.y-f)/a+(this.x-n)/m)/(a/m+m/a);return jd.pt(n+d*a,f+d*m)};tf.prototype.interpolate=function(f,m,n){return void 0===n||n?jd.pt(jd.num.interpolate(f,this.x,m.x),jd.num.interpolate(f,this.y,m.y)):jd.Point.polar(jd.num.interpolate(f,this.r(),m.r()),jd.num.interpolate(f,this.theta(),m.theta()))};tf.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};tf.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,m=17,n=0;6>n;n++)m=
(m+f/m)/2;return m};tf.prototype.theta=function(){return Math.atan2(this.y,this.x)};tf.prototype.asRectangle=function(){return new jd.Rectangle(this.x,this.y,0,0)};tf.prototype.extent=function(f){return new jd.Rectangle(this.x,this.y,f.x,f.y)};tf.prototype.extentAsRectangle=function(){return new jd.Rectangle(0,0,this.x,this.y)};tf.prototype.lineTo=function(f){return new jd.Line(this,f)};tf.prototype.toTuple=function(){return[this.x,this.y]};tf.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
tf.prototype.toString=function(f){return void 0===f||f?jd.string.format("pt(%1.f,%1.f)",this.x,this.y):jd.string.format("pt(%10.d,%10.d)",this.x,this.y)};tf.prototype.inspect=function(){return JSON.stringify(this)};tf.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(tf.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});za("a8",tf);jd.Point=tf;var Od=function(f,
m,n,a){this.x=f||0;this.y=m||0;this.width=n||0;this.height=a||0};Od.fromAny=function(f,m){return jd.rect(f.minPt(m),f.maxPt(m))};Od.fromLiteral=function(f){return new jd.Rectangle(f.x,f.y,f.width,f.height)};Od.fromTuple=function(f){return new jd.Rectangle(f[0],f[1],f[2],f[3])};Od.unionPts=function(f){for(var m=f[0],n=f[0],a=1;a<f.length;a++)m=m.minPt(f[a]),n=n.maxPt(f[a]);return jd.rect(m,n)};Od.ensure=function(f){return f instanceof jd.Rectangle?f:new jd.Rectangle(f.x,f.y,f.width,f.height)};Od.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var m=f.getBoundingClientRect();return jd.rect(m.left,m.top,m.width,m.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){m=jd.cssLengthToPixels(f.style.left||"0px");var n=jd.cssLengthToPixels(f.style.top||"0px"),a=jd.cssLengthToPixels(f.style.width||"0px");f=jd.cssLengthToPixels(f.style.hieght||"0px");return new jd.Rectangle(m,n,a,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new jd.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};Od.inset=function(f,m,n,a){void 0===m&&(m=f);void 0===n&&(n=f);void 0===a&&(a=m);return new jd.Rectangle(f,m,n-f,a-m)};Od.prototype.getX=function(){return this.x};Od.prototype.getY=function(){return this.y};Od.prototype.getWidth=function(){return this.width};Od.prototype.getHeight=function(){return this.height};Od.prototype.copy=function(){return new jd.Rectangle(this.x,this.y,this.width,this.height)};Od.prototype.toFixed=
function(f){return new jd.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};Od.prototype.withWidth=function(f){return new jd.Rectangle(this.x,this.y,f,this.height)};Od.prototype.withHeight=function(f){return new jd.Rectangle(this.x,this.y,this.width,f)};Od.prototype.withX=function(f){return new jd.Rectangle(f,this.y,this.width,this.height)};Od.prototype.withY=function(f){return new jd.Rectangle(this.x,f,this.width,this.height)};Od.prototype.withExtent=function(f){return new jd.Rectangle(this.x,
this.y,f.x,f.y)};Od.prototype.withTopLeft=function(f){return jd.Rectangle.fromAny(f,this.bottomRight())};Od.prototype.withTopRight=function(f){return jd.Rectangle.fromAny(this.bottomLeft(),f)};Od.prototype.withBottomRight=function(f){return jd.Rectangle.fromAny(f,this.topLeft())};Od.prototype.withBottomLeft=function(f){return jd.Rectangle.fromAny(f,this.topRight())};Od.prototype.withLeftCenter=function(f){return new jd.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};Od.prototype.withRightCenter=
function(f){return new jd.Rectangle(this.x,this.y,f.x-this.x,this.height)};Od.prototype.withTopCenter=function(f){return new jd.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};Od.prototype.withBottomCenter=function(f){return new jd.Rectangle(this.x,this.y,this.width,f.y-this.y)};Od.prototype.withCenter=function(f){return new jd.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};Od.prototype.insetBy=function(f){return new jd.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};Od.prototype.insetByPt=function(f){return new jd.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};Od.prototype.grid=function(f,m){var n=this.width/m,a=this.height/f;return jd.grid.mapCreate(f,m,function(d,k){return new jd.Rectangle(n*k,a*d,n,a)})};Od.prototype.divide=function(f){var m=this;return f.map(function(n){return jd.rect(m.x+m.width*n.x,m.y+m.height*n.y,m.width*n.width,m.height*n.height)})};Od.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Od.prototype.lineTo=function(f){var m=this.center(),n=f.center();n=m.lineTo(n);m=this.lineIntersection(n)[0];f=f.lineIntersection(n)[0];return m&&f&&m.lineTo(f)};Od.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};Od.prototype.inspect=function(){return JSON.stringify(this)};Od.prototype.topLeft=function(){return new jd.Point(this.x,this.y)};Od.prototype.topRight=function(){return new jd.Point(this.maxX(),this.y)};Od.prototype.bottomRight=
function(){return new jd.Point(this.maxX(),this.maxY())};Od.prototype.bottomLeft=function(){return new jd.Point(this.x,this.maxY())};Od.prototype.leftCenter=function(){return new jd.Point(this.x,this.center().y)};Od.prototype.rightCenter=function(){return new jd.Point(this.maxX(),this.center().y)};Od.prototype.topCenter=function(){return new jd.Point(this.center().x,this.y)};Od.prototype.bottomCenter=function(){return new jd.Point(this.center().x,this.maxY())};Od.prototype.extent=function(){return new jd.Point(this.width,
this.height)};Od.prototype.center=function(){return new jd.Point(this.x+this.width/2,this.y+this.height/2)};Od.prototype.topEdge=function(){return new jd.Line(this.topLeft(),this.topRight())};Od.prototype.bottomEdge=function(){return new jd.Line(this.bottomLeft(),this.bottomRight())};Od.prototype.leftEdge=function(){return new jd.Line(this.topLeft(),this.bottomLeft())};Od.prototype.rightEdge=function(){return new jd.Line(this.topRight(),this.bottomRight())};Od.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Od.prototype.allPoints=function(){for(var f=this.x,m=this.y,n=this.width,a=this.height,d=[],k=m;k<m+a;k++)for(var b=f;b<f+n;b++)d.push(jd.pt(b,k));return d};Od.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};Od.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};Od.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};Od.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};Od.prototype.translatedBy=function(f){return new jd.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};Od.prototype.scaleByRect=function(f){return new jd.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};Od.prototype.scaleRectIn=function(f){return new jd.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};Od.prototype.scaleRectTo=
function(f){var m,n;this.width>this.height?n=this.width:m=this.height;f=n?f.width/n:f.height/m;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};Od.prototype.expandBy=function(f){return this.insetBy(0-f)};Od.prototype.translateForInclusion=function(f){var m=f.x,n=f.y,a=m+f.width,d=n+f.height;a>this.right()&&(m-=a-this.right());d>this.bottom()&&(n-=d-this.bottom());m<this.x&&(m=this.x);n<this.y&&(n=this.y);return jd.rect(m,n,f.width,f.height)};Od.prototype.transformRectForInclusion=
function(f){var m=this.topLeft().maxPt(f.topLeft());f=m.addPt(f.extent());f=this.bottomRight().minPt(f);return jd.rect(m,f)};Od.prototype.insetByRect=function(f){return new jd.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};Od.prototype.outsetByRect=function(f){return new jd.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};Od.prototype.interpolate=function(f,m){var n=this.topLeft(),
a=this.bottomRight(),d=m.topLeft();m=m.bottomRight();return jd.Rectangle.fromAny(n.interpolate(f,d),a.interpolate(f,m))};Od.prototype.intersection=function(f){var m=Math.max(this.x,f.x),n=Math.max(this.y,f.y);return new jd.Rectangle(m,n,Math.min(this.x+this.width,f.x+f.width)-m,Math.min(this.y+this.height,f.y+f.height)-n)};Od.prototype.union=function(f){return jd.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};Od.prototype.lineIntersection=function(f){return this.edges().map(function(m){return m.intersection(f)}).filter(function(m){return!!m})};
Od.prototype.dist=function(f){var m=this.closestPointToPt(f.center());f=f.closestPointToPt(m);return m.dist(f)};Od.prototype.relativeToAbsPoint=function(f){return new jd.Point(this.x+this.width*f.x,this.y+this.height*f.y)};Od.prototype.closestPointToPt=function(f){return jd.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};Od.prototype.maxX=function(){return this.x+this.width};Od.prototype.maxY=function(){return this.y+this.height};Od.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Od.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Od.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Od.prototype.randomPoint=function(){return jd.Point.random(jd.pt(this.width,this.height)).addPt(this.topLeft())};Od.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};Od.prototype.left=function(){return this.x};Od.prototype.right=function(){return this.maxX()};
Od.prototype.top=function(){return this.y};Od.prototype.bottom=function(){return this.maxY()};Od.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Od.prototype.toAttributeValue=function(f){f=.01;var m=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&m.push(this.top()):m=m.concat([this.top(),this.right(),this.bottom()]);return m.invoke("roundTo",f||.01)};Od.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Od.prototype.partNamed=function(f){return this[f].call(this)};Od.prototype.withPartNamed=function(f,m){return this[this.setterName(f)].call(this,m)};Od.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};Od.prototype.partNameNear=function(f,m,n){f=this.partNameNearest(f,m);return m.dist(this.partNamed(f))<n?f:null};Od.prototype.partNameNearest=function(f,m){for(var n=1E99,a,d=0;d<f.length;d++){a=f[d];var k=m.dist(this.partNamed(a));if(k<
n){var b=a;n=k}}return b};Od.prototype.toString=function(){return jd.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Od.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Od.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});za("R",Od);jd.Rectangle=Od;var Mi=function(f,m,n){f?f instanceof jd.Point?(m=m||0,void 0===n&&(n=jd.pt(1,1)),this.a=this.ensureNumber(n.x*Math.cos(m)),this.b=this.ensureNumber(n.y*Math.sin(m)),this.c=this.ensureNumber(n.x*-Math.sin(m)),this.d=this.ensureNumber(n.y*Math.cos(m)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};Mi.prototype.copy=function(){return new jd.Transform(this)};Mi.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};Mi.prototype.getRotation=function(){var f=jd.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};Mi.prototype.getScale=function(){var f=this.a,m=this.c;f=Math.sqrt(f*f+m*m);return Math.abs(f-1)<this.eps?1:f};Mi.prototype.getScalePoint=function(){var f=this.a,m=this.b,n=this.c,a=this.d,d=Math.atan2(-n,f);return jd.pt(Math.sqrt(f*f+n*n),Math.abs(m)>Math.abs(a)?m/Math.sin(d):a/Math.cos(d))};Mi.prototype.getTranslation=function(){return jd.pt(this.e,this.f)};Mi.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};Mi.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var m=this.getRotation(),n=this.getScalePoint();0!=m&&(f+=" rotate("+this.getRotation()+")");if(1!=n.x||1!=n.y)f+=" scale("+n.x+","+n.y+")";return f};Mi.prototype.toCSSValue=function(f){var m="",n=this.getTranslation();m+="translate("+n.x.toFixed(2)+"px,"+n.y.toFixed(2)+"px)";if(f){n=f.width/2;var a=f.height/2;m+=" translate("+n.toFixed(2)+"px,"+a.toFixed(2)+"px)"}0!=this.getRotation()&&(m+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(n=f.width/2,a=f.height/2,m+=" translate("+(-1*n).toFixed(2)+"px,"+(-1*a).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)m+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return m};Mi.prototype.toCSSTransformString=function(){var f=this.getRotation(),m=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+m+","+m+")"};Mi.prototype.toString=function(){return this.toCSSTransformString()};Mi.prototype.toMatrix=function(){return this.copy()};Mi.prototype.transformPoint=
function(f,m){return f.matrixTransform(this,m)};Mi.prototype.transformDirection=function(f,m){return f.matrixTransformDirection(this,m)};Mi.prototype.matrixTransformForMinMax=function(f,m,n){var a=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;a>n.x&&(n.x=a);f>n.y&&(n.y=f);a<m.x&&(m.x=a);f<m.y&&(m.y=f)};Mi.prototype.transformRectToRect=function(f){var m=jd.pt(Infinity,Infinity),n=jd.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),m,n);this.matrixTransformForMinMax(f.bottomRight(),
m,n);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),m,n),this.matrixTransformForMinMax(f.bottomLeft(),m,n));return jd.rect(m,n)};Mi.prototype.preConcatenate=function(f){var m=this.matrix_||this.toMatrix();this.a=f.a*m.a+f.c*m.b;this.b=f.b*m.a+f.d*m.b;this.c=f.a*m.c+f.c*m.d;this.d=f.b*m.c+f.d*m.d;this.e=f.a*m.e+f.c*m.f+f.e;this.f=f.b*m.e+f.d*m.f+f.f;this.matrix_=this.toMatrix();return this};Mi.prototype.invert=function(){var f=this.copy(),m=1/(f.a*f.d-f.c*f.b);this.a=f.d*m;this.b=
-f.b*m;this.c=-f.c*m;this.d=f.a*m;this.e=(f.c*f.f-f.e*f.d)*m;this.f=-(f.a*f.f-f.b*f.e)*m;return this};Mi.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};Mi.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};Mi.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(Mi.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});jd.Transform=Mi;var mk=function(f,m){this.start=f;this.end=m};mk.fromCoords=function(f,m,n,a){return new jd.Line(jd.pt(f,m),jd.pt(n,a))};mk.prototype.withStart=function(f){return new jd.Line(f,this.end)};mk.prototype.withEnd=function(f){return new jd.Line(this.start,f)};mk.prototype.sampleN=function(f){f=f||10;for(var m=
this.end.subPt(this.start).scaleBy(1/f),n=[],a=0;a<=f;a++)n.push(this.start.addPt(m.scaleBy(a)));return n};mk.prototype.sample=function(f){return this.sampleN(this.length()/f)};mk.prototype.length=function(){return this.start.dist(this.end)};mk.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};mk.prototype.distanceFromLine=function(f){var m=this.start.x,n=this.start.y,a=this.end.x,d=this.end.y;return Math.abs((d-n)*f.x-(a-m)*f.y+a*n-d*m)/Math.sqrt(Math.pow(d-
n,2)+Math.pow(a-m,2))};mk.prototype.includesPoint=function(f,m){var n=this.start.x,a=this.start.y,d=this.end.x,k=this.end.y,b=f.x;f=f.y;var e=0===(d-n)*(f-a)-(b-n)*(k-a);if(m||!e)return e;m=Math.min(a,k);e=Math.max(n,d);a=Math.max(a,k);return Math.min(n,d)<=b&&b<=e&&m<=f&&f<=a};mk.prototype.intersection=function(f,m){var n=this.start,a=this.end,d=f.start,k=f.end;f=n.x;n=n.y;var b=a.x;a=a.y;var e=d.x;d=d.y;var l=k.x;k=k.y;var p=((f*a-n*b)*(e-l)-(f-b)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l)),q=((f*a-n*
b)*(d-k)-(n-a)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l));return Infinity!==p&&Infinity!==q&&(m||jd.num.between(p,f,b,1E-4)&&jd.num.between(q,n,a,1E-4)&&jd.num.between(p,e,l,1E-4)&&jd.num.between(q,d,k,1E-4))?jd.pt(p,q):null};mk.prototype.perpendicularLine=function(f,m,n){f=void 0===f?0:f;m=void 0===m?1:m;n=void 0===n?"cc":n;var a=this.start,d=this.toVector();f=a.addPt(d.scaleBy(f));n=d.theta()+("cc"===n?-1:1)*Math.PI/2;return new jd.Line(f,f.addPt(jd.Point.polar(m,n)))};mk.prototype.toVector=function(){return this.end.subPt(this.start)};
mk.prototype.toString=function(){return jd.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};mk.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(mk.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});jd.Line=mk;jd.rect=wk;jd.rect=wk;jd.pt=bh;jd.pt=bh;var mga=
Object.freeze({__proto__:null,Point:tf,Rectangle:Od,Transform:Mi,Line:mk,rect:wk,pt:bh}),hd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");hd.floor=function(f){return Math.floor(255.99*f)};hd.pad=function(f,m,n){n=void 0===n?hd.arr.last:n;return[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(Array(Math.max(m-f.length,0)).fill(n(f))))};hd.num=Dj;hd.obj=df;hd.arr=Ke;hd.parse=oD;hd.Rectangle=Od;hd.rect=wk;hd.pt=bh;hd.Point=tf;hd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var sx=function(){};sx.prototype.offsets=function(){return null};sx.prototype.stepCount=function(){return 0};sx.prototype.stepSize=function(){return 0};sx.prototype.chord=function(f){var m=this,n=f.hue,a=f.saturation,d=f.brightness;return(this.offsets()||hd.arr.range(0,this.steps()).map(function(k){return k*m.stepSize()})).map(function(k){return hd.Color.hsb(n+k%360,a,d)})};$jscomp.global.Object.defineProperties(sx.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
hd.ColorHarmony=sx;var Wr=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Wr,hd.ColorHarmony);Wr.prototype.steps=function(){return 1};Wr.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Wr.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});za("bf",Wr);hd.Complementary=Wr;var Xr=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Xr,hd.ColorHarmony);Xr.prototype.steps=function(){return 2};
Xr.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Xr.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});za("bg",Xr);hd.Triadic=Xr;var tu=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(tu,hd.ColorHarmony);tu.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(tu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});za("bh",tu);hd.Tetradic=
tu;var Yr=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Yr,hd.ColorHarmony);Yr.prototype.steps=function(){return 3};Yr.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(Yr.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});za("bi",Yr);hd.Quadratic=Yr;var Zr=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Zr,hd.ColorHarmony);Zr.prototype.steps=function(){return 5};Zr.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Zr.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});za("bj",Zr);hd.Analogous=Zr;var uu=function(){return hd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(uu,hd.ColorHarmony);uu.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(uu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});za("bk",uu);hd.Neutral=
uu;var of=function(f,m,n,a){this.r=f||0;this.g=m||0;this.b=n||0;this.a=a||(0===a?0:1)};of.random=function(f,m){void 0===f&&(f=0);void 0===m&&(m=255);return hd.Color.rgb(hd.num.random(f,m),hd.num.random(f,m),hd.num.random(f,m))};of.hsb=function(f,m,n){if(0==m)return new hd.Color(n,n,n);var a=f%360/60;f=Math.floor(a);var d=a-f;a=(1-m)*n;var k=(1-m*d)*n;m=(1-m*(1-d))*n;switch(f){case 0:return new hd.Color(n,m,a);case 1:return new hd.Color(k,n,a);case 2:return new hd.Color(a,n,m);case 3:return new hd.Color(a,
k,n);case 4:return new hd.Color(m,a,n);case 5:return new hd.Color(n,a,k);default:return new hd.Color(0,0,0)}};of.wheel=function(f){return hd.Color.wheelHsb(void 0===f?10:f,0,.9,.7)};of.wheelHsb=function(f,m,n,a){for(var d=Array(f),k=360/Math.max(f,1),b=0;b<f;b++)d[b]=hd.Color.hsb(m+b*k,n,a);return d};of.rgb=function(f,m,n){return new hd.Color(f/255,m/255,n/255)};of.rgbHex=function(f){return(f=this.parseHex(f))&&0<=f[0]&&0<=f[1]&&0<=f[2]?new hd.Color(f[0],f[1],f[2]):null};of.rgba=function(f,m,n,a){return new hd.Color(f/
255,m/255,n/255,a)};of.fromLiteral=function(f){return new hd.Color(f.r,f.g,f.b,f.a)};of.fromTuple=function(f){return new hd.Color(f[0],f[1],f[2],f[3])};of.fromTuple8Bit=function(f){return new hd.Color(f[0]/255,f[1]/255,f[2]/255,f[3]/255)};of.fromString=function(f){return f&&"none"!==f?this.fromTuple(this.parse(f)):null};of.parse=function(f){return f&&"none"!==f?(f=hd.parse(f),[f.red,f.green,f.blue,f.alpha]):null};of.parseRGB=function(f){var m=f.match(this.rgbaRegex);if(m){f=parseInt(m[1])/(m[2]?100:
255);var n=parseInt(m[3])/(m[4]?100:255),a=parseInt(m[5])/(m[6]?100:255);m=m[7]?parseFloat(m[7]):1;return[f,n,a,m]}return null};of.parseHex=function(f){var m;var n="";for(m=0;m<f.length;m++){var a=f[m].toLowerCase();if("a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==a||"8"==a||"9"==a)n+=a}if(6==n.length)m=n.substring(0,2),f=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)m=n.substring(0,1),m+=m,f=n.substring(1,2),f+=f,n=n.substring(2,
3),n+=n;else return null;m=parseInt(m,16)/255;f=parseInt(f,16)/255;n=parseInt(n,16)/255;return[m,f,n]};of.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};of.prototype.equals=function(f){return f?this.r===f.r&&this.g===f.g&&this.b===f.b&&this.a===f.a:!1};of.prototype.darker=function(f){var m=this.mixedWith(hd.Color.black,.5);return 1<f?m.darker(f-1):m};of.prototype.lighter=function(f){if(0==f)return this;var m=this.mixedWith(hd.Color.white,.5);return 1<f?m.lighter(f-1):m};of.prototype.interpolate=
function(f,m){if(m.isGradient)return m.interpolate(1-f,this);m=hd.obj.isArray(m)?m:m.toTuple();return hd.Color.fromTuple(this.toTuple().map(function(n,a){return hd.num.interpolate(f,n,m[a])}))};of.prototype.toString=function(){return 1===this.a?"rgb("+hd.floor(this.r)+","+hd.floor(this.g)+","+hd.floor(this.b)+")":this.toRGBAString()};of.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};of.prototype.toHexString=
function(){function f(m){for(;2>m.length;)m="0"+m;return m}return f(Math.floor(255.99*this.r).toString(16))+f(Math.floor(255.99*this.g).toString(16))+f(Math.floor(255.99*this.b).toString(16))};of.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};of.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};of.prototype.toHSB=function(){var f=Math.max(this.r,this.g,this.b),m=Math.min(this.r,this.g,this.b),n;f==m?n=0:f==this.r?n=(this.g-this.b)/(f-m)*60:f==
this.g?n=60*(2+(this.b-this.r)/(f-m)):f==this.b&&(n=60*(4+(this.r-this.g)/(f-m)));return[(n+360)%360,0==f?0:(f-m)/f,f]};of.prototype.withA=function(f){return new hd.Color(this.r,this.g,this.b,f)};of.prototype.mixedWith=function(f,m){var n=1-m;return new hd.Color(this.r*m+f.r*n,this.g*m+f.g*n,this.b*m+f.b*n,this.a*m+f.a*n)};of.prototype.invert=function(){return hd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};of.prototype.toCSSString=function(){return this.toRGBAString()};of.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};of.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(of.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var f=this,m=hd.Color.named;return Object.keys(m).find(function(n){return m[n].equals(f)})}}});$jscomp.global.Object.defineProperties(of,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return hd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new hd.Color(0,0,0),almostBlack:hd.Color.rgb(64,64,64),white:new hd.Color(1,1,1),gray:new hd.Color(.8,.8,.8),red:new hd.Color(.8,0,0),green:new hd.Color(0,.8,0),yellow:new hd.Color(.8,.8,0),blue:new hd.Color(0,0,.8),purple:new hd.Color(.5,0,.5),magenta:new hd.Color(1,0,1),pink:hd.Color.rgb(255,30,153),turquoise:hd.Color.rgb(0,240,255),tangerine:hd.Color.rgb(242,
133,0),orange:hd.Color.rgb(255,153,0),cyan:hd.Color.rgb(0,255,255),brown:hd.Color.rgb(182,67,0),limeGreen:hd.Color.rgb(51,255,0),darkGray:hd.Color.rgb(102,102,102),lightGray:hd.Color.rgb(230,230,230),veryLightGray:hd.Color.rgb(243,243,243),transparent:hd.Color.rgba(0,0,0,0),lively:hd.Color.rgb(245,124,0)}}}});za("C",of);hd.Color=of;Object.assign(hd.Color,hd.Color.named);var Dq=function(f){this.stops=f?f.map(function(m){return m}):[]};Dq.create=function(f){var m=[],n;for(n in f)m.push({offset:Number(n),
color:f[n]});return new this({stops:m})};Dq.parse=function(f){return f.startsWith("radial-gradient")?hd.RadialGradient.parse(f):f.startsWith("linear-gradient")?hd.LinearGradient.parse(f):hd.Color.fromTuple(hd.Color.parse(f))};Dq.prototype.equals=function(f){return f&&f.isGradient?this.toString()==f.toString():!1};Dq.prototype.getStopsLighter=function(f){return hd.arr.collect(this.stops,function(m){return{offset:m.offset,color:m.color.lighter(f)}})};Dq.prototype.getStopsDarker=function(f){return hd.arr.collect(this.stops,
function(m){return{offset:m.offset,color:m.color.darker(f)}})};Dq.prototype.interpolateStops=function(f,m){var n=hd.pad(this.stops,m.length);m=hd.pad(m,this.stops.length);var a=[],d;for(d=0;d<n.length;d++){var k=n[d];var b=k.color;var e=k.offset;var l=m[d];k=l.color;l=l.offset;a.push({color:b.interpolate(f,k),offset:hd.num.interpolate(f,e,l)})}return a};Dq.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Dq.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});hd.Gradient=Dq;var nk=function(f){var m=void 0===f?{}:f;f=m.vector;m=hd.Gradient.call(this,m.stops)||this;m.vector=f;return m};$jscomp.inherits(nk,hd.Gradient);nk.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};nk.prototype.angleToRect=function(f){return hd.Point.polar(1,f).extentAsRectangle().withCenter(hd.pt(.5,.5))};nk.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};nk.prototype.toString=function(){return this.toCSSString()};nk.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),vector:this.vector})};nk.prototype.darker=function(f){return new this.constructor({stops:this.getStopsDarker(f),vector:this.vector})};nk.prototype.interpolate=function(f,m,n){n=void 0===n?{width:1E3,height:1E3}:n;m.isColor&&(m=new hd.LinearGradient({vector:this.vector,stops:this.stops.map(function(a){return{color:m,
offset:a.offset}})}));if("radialGradient"==m.type){if(.5>f)return new hd.LinearGradient({vector:this.vector.interpolate(f,hd.rect(0,0,0,1)),stops:this.interpolateStops(f,m.stops.map(function(a,d){return{color:a.color,offset:1}}))});if(.5<=f)return new hd.RadialGradient({stops:this.interpolateStops(f,m.stops),focus:hd.pt(.5,0).interpolate(f,m.focus),bounds:hd.rect(0,0,100*n.width,2*n.height).interpolate(f,m.bounds)})}return new hd.LinearGradient({stops:this.interpolateStops(f,m.stops),vector:this.vector.interpolate(f,
m.vector)})};nk.prototype.toCSSString=function(){var f="linear-gradient("+(hd.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(m){return m.color.toRGBAString()+" "+((100*m.offset).toFixed()+"%")}).join(",");return f+")"};nk.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(nk.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:hd.rect(hd.pt(0,0),hd.pt(0,1)),northeast:hd.rect(hd.pt(1,0),hd.pt(0,1)),westeast:hd.rect(hd.pt(1,0),hd.pt(0,0)),southeast:hd.rect(hd.pt(1,1),hd.pt(0,0)),southnorth:hd.rect(hd.pt(0,1),hd.pt(0,0)),southwest:hd.rect(hd.pt(0,1),hd.pt(1,0)),eastwest:hd.rect(hd.pt(0,0),hd.pt(1,0)),northwest:hd.rect(hd.pt(0,0),hd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(f){this._vector=f?"string"===typeof f?this.vectors[f.toLowerCase()]:"number"===typeof f?this.angleToRect(f):f:this.vectors.northsouth}}});za("a9",nk);hd.LinearGradient=nk;var Kl=function(f){var m=void 0===f?{}:f;f=m.focus;var n=m.bounds;m=hd.Gradient.call(this,m.stops)||this;m.focus=f||hd.pt(.5,.5);m.bounds=n||new hd.Rectangle(0,0,20,20);return m};$jscomp.inherits(Kl,hd.Gradient);Kl.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};Kl.prototype.toString=function(){return this.toCSSString()};
Kl.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),focus:this.focus,bounds:this.bounds})};Kl.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Kl.prototype.interpolate=function(f,m,n){n=void 0===n?{height:1E3,width:1E3}:n;m.isColor&&(m=new hd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(a){return{color:m,offset:a.offset}})}));return"linearGradient"==
m.type?m.interpolate(1-f,this,n):new hd.RadialGradient({bounds:this.bounds.interpolate(f,m.bounds),stops:this.interpolateStops(f,m.stops),focus:this.focus.interpolate(f,m.focus)})};Kl.prototype.toCSSString=function(){var f=this.focus.scaleBy(100),m=this.bounds.extent();f="radial-gradient("+m.x/2+"px "+m.y/2+"px at "+f.x+"% "+f.y+"%";for(m=0;m<this.stops.length;m++)f+=","+this.stops[m].color.toRGBAString()+" "+((100*this.stops[m].offset).toFixed()+"%");return f+")"};Kl.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Kl.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});za("a7",Kl);hd.RadialGradient=Kl;var GA=za("bl","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
hd.flatDesignColors=GA;hd.flatDesignColors=GA;hd.flatDesignColors=GA;var HA=za("bm","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
hd.materialDesignColors=HA;hd.materialDesignColors=HA;hd.materialDesignColors=HA;var IA=za("bn","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
hd.webSafeColors=IA;hd.webSafeColors=IA;hd.webSafeColors=IA;var nga=Object.freeze({__proto__:null,Complementary:Wr,Triadic:Xr,Tetradic:tu,Quadratic:Yr,Analogous:Zr,Neutral:uu,Color:of,LinearGradient:nk,RadialGradient:Kl,flatDesignColors:GA,materialDesignColors:HA,webSafeColors:IA}),V1=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(V1,nga);Object.assign(V1,mga);var oga=Object.freeze({__proto__:null,Complementary:Wr,Triadic:Xr,Tetradic:tu,Quadratic:Yr,Analogous:Zr,Neutral:uu,
Color:of,LinearGradient:nk,RadialGradient:Kl,flatDesignColors:GA,materialDesignColors:HA,webSafeColors:IA,Point:tf,Rectangle:Od,Transform:Mi,Line:mk,rect:wk,pt:bh}),Ph=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Ph.getClassName=Pn;Ph.getSerializableClassMeta=hr;Ph.locateClass=Mo;Ph.arr=Ke;Ph.string=rg;Ph.classMetaForSerializationProp="lively.serializer-class-info";Ph.classSuperClassProp=Symbol.for("lively-instance-superclass");Ph.classNameProp=Symbol.for("__LivelyClassName__");
Ph.moduleMetaInClassProp=Symbol.for("lively-module-meta");Ph.getClassName=Pn;Ph.getClassName=Pn;Ph.getSerializableClassMeta=hr;Ph.getSerializableClassMeta=hr;Ph.locateClass=Mo;Ph.locateClass=Mo;var vp=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};vp.prototype.addClassInfo=function(f,m,n){(f=Ph.getSerializableClassMeta(m))&&(n[Ph.classMetaForSerializationProp]=f)};vp.prototype.restoreIfClassInstance=function(f,m){if(m.hasOwnProperty(Ph.classMetaForSerializationProp)&&
(f=m[Ph.classMetaForSerializationProp],f.className)){m=Ph.locateClass(f);if(!m||"function"!==typeof m){m="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(m);console.error(m);return{isClassPlaceHolder:!0,className:f.className}}return m.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new m(this):new m}};vp.sourceModulesInObjRef=function(f){var m=[];(f=f&&f[Ph.classMetaForSerializationProp])&&f.module&&
m.push(f.module);return m};vp.sourceModulesIn=function(f){var m=[];Object.keys(f).forEach(function(n){(n=f[n])&&n[Ph.classMetaForSerializationProp]&&m.push(n[Ph.classMetaForSerializationProp])});return Ph.arr.uniqBy(m,function(n,a){var d=n.module,k=a.module;return!d&&!k||d&&!k||!d&&k?n.className===a.className:n.className===a.className&&d.package.name==k.package.name&&d.package.pathInPackage==k.package.pathInPackage})};$jscomp.global.Object.defineProperties(vp.prototype,{sourceModuleNameProperty:{configurable:!0,
enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(vp,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Ph.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return Ph.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Ph.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return Ph.classNameProp}}});
Ph.ClassHelper=vp;Ph.default=vp;var Yg=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Yg.deserializeSpec=Qn;Yg.serializeSpec=sm;Yg.string=rg;Yg.Closure=ci;Yg.Path=Ag;Yg.obj=df;Yg.properties=gm;Yg.arr=Ke;Yg.getSerializableClassMeta=hr;Yg.connect=Jj;Yg.joinPath=Uf;var Sj=function(f){this.prefix=Object.assign({prefix:"__lv_expr__"},f).prefix+":"};Sj.prototype.isSerializedExpression=function(f){return 0===f.indexOf(this.prefix)};Sj.prototype.requiredModulesOf__expr__=
function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};Sj.prototype.exprStringDecode=function(f){var m=f.indexOf(":");f.slice(0,m);f=f.slice(m+1);for(var n={},a=!1;f&&f.startsWith("{")&&0<=(m=f.indexOf("}:"));){a=!0;var d=f.slice(1,m);f=f.slice(m+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),m=f.indexOf(":")-20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):m=f.indexOf(":");var k=
f.slice(0,m);d=d.split(",").filter(function(b){return!!b.trim()}).map(function(b){if(!b.includes(":"))return b;var e=$jscomp.makeIterator(b.split(":"));b=e.next().value;e=e.next().value;return{exported:b,local:e}});n[k]=d;f=f.slice(m+1)}return{__expr__:f,bindings:a?n:null}};Sj.prototype.exprStringEncode=function(f){var m=f.bindings;f=String(f.__expr__);if(m)for(var n=Object.keys(m),a=0;a<n.length;a++){var d=n[a],k=m[d];Array.isArray(k)&&(k=k.map(function(b){return"string"===typeof b?b:b.exported+
":"+b.local}).join(","));f="{"+k+"}:"+d+":"+f}return this.prefix+f};Sj.prototype.getExpressionForFunction=function(f){var m=f[Symbol.for("lively-module-meta")],n={};return this.exprStringEncode({__expr__:f.name,bindings:(n[Yg.joinPath(m.package.name,m.pathInPackage)]=[f.name],n)})};Sj.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};Sj.prototype.__eval__=function(f,m){return Yg.__eval__(f,m)};Sj.prototype.deserializeExpr=
function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};Sj.prototype.deserializeExprObj=function(f){var m=f.__expr__;f=f.bindings;var n={};if(f)for(var a=f?Object.keys(f):[],d=0;d<a.length;d++){var k=a[d],b=f[k];if(lively.FreezerRuntime){var e=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(k));if(!e){var l=lively.FreezerRuntime.fetchStandaloneFor(k);l&&
(e=l.exports)}e.exports&&(e=e.exports)}else e=System.get(System.decanonicalize(k));if(!e)throw Error("[lively.serializer] expression eval: bindings specify to import "+k+" but this module is not loaded!\nSource: "+m);for(k=0;k<b.length;k++){var p=b[k],q=l=void 0;"string"===typeof p?q=l=p:"object"===typeof p&&(l=p.local,q=p.exported);n[l]=e[q];m="var "+l+" = __boundValues__."+l+";\n"+m}}return this.__eval__(m,n)};za("b5",Sj);Yg.ExpressionSerializer=Sj;Yg.__eval__=Yg.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();
Yg.deserializeSpec=Qn;Yg.deserializeSpec=Qn;Yg.serializeSpec=sm;Yg.serializeSpec=sm;Yg.default=Sj;var If=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");If.connect=Jj;If.disconnect=No;If.disconnectAll=Zv;If.once=Yp;If.signal=xk;If.callWhenNotNull=qD;If.callWhenPathNotNull=rD;If.noUpdate=ir;If.string=rg;If.arr=Ke;If.Closure=ci;If.obj=df;If.stringifyFunctionWithoutToplevelRecorder=Uv;If.ExpressionSerializer=Sj;If.connect=Jj;If.connect=Jj;If.disconnect=No;If.disconnect=No;If.disconnectAll=
Zv;If.disconnectAll=Zv;If.once=Yp;If.once=Yp;If.signal=xk;If.signal=xk;If.noUpdate=ir;If.noUpdate=ir;var KH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=m.hasOwnProperty("AttributeConnection")&&"function"===typeof m.AttributeConnection?m.AttributeConnection:m.AttributeConnection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,d,k,b,e){this.init(a,d,k,b,e)}},{key:"init",value:function(a,d,k,b,e){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=a;this.sourceAttrName=d;this.targetObj=k;this.targetMethodName=b;this.varMapping={source:a,target:k};e=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},e);e.removeAfterUpdate&&(this.removeAfterUpdate=!0);e.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof e.garbageCollect&&
(this.garbageCollect=e.garbageCollect);"boolean"===typeof e.signalOnAssignment&&(this.signalOnAssignment=e.signalOnAssignment);e.converter&&this.setConverter(e.converter);e.updater&&this.setUpdater(e.updater);e.varMapping&&(this.varMapping=Object.assign(e.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(a,d,k,b){delete this.varMapping._rev;If.arr.equals(Object.keys(this.varMapping),["source","target"])?delete a.props.varMapping:b("varMapping",
this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(a,d){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},{key:"_getSerializableVarMapping",value:function(){for(var a=Object.assign({},this.varMapping),d=$jscomp.makeIterator(Object.keys(a)),k=d.next();!k.done;k=d.next()){k=k.value;try{If.obj.isFunction(a[k])&&(a[k]=(new If.ExpressionSerializer).getExpressionForFunction(a[k]))}catch(b){throw Error("Cannot be serialized due to lack of module information: "+
k+" in "+this);}}return a}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(a){return If.AttributeConnection.fromLiteral(this.toLiteral(),a)}},{key:"fixInstanceAfterCopyingFromSite",value:function(a,d,k){this.disconnect()}},{key:"clone",value:function(){var a=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(a.dependedBy=this.dependedBy);
return a}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",
value:function(){if(!this.converterString)return null;this.converter||(this.converter=If.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(a){delete this.converter;return this.converterString=a?String(a):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=If.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",
value:function(a){delete this.updater;return this.updaterString=a?If.stringifyFunctionWithoutToplevelRecorder(a):null}},{key:"getSpec",value:function(){var a={};this.updaterString&&(a.updater=this.getUpdater());this.converterString&&(a.converter=this.getConverter());this.removeAfterUpdate&&(a.removeAfterUpdate=!0);this.forceAttributeConnection&&(a.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(a.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(a.signalOnAssignment=
this.signalOnAssignment);return a}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(a){return"$$"+a}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var a=this.getExistingConnection();
a!==this&&(a&&a.disconnect(),this.addAttributeConnection());a=this.sourceObj;var d=this.sourceAttrName,k=this.forceAttributeConnection,b=a.__lookupSetter__(d),e=a.__lookupGetter__(d),l=!b&&!e&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||k?this.addSourceObjGetterAndSetter(e,b):l.isWrapped||this.addConnectionWrapper(a,d,l);return this}},{key:"disconnect",value:function(){var a=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();
d.attributeConnections=d.attributeConnections.filter(function(b){return!a.isSimilarConnection(b)});var k=d.attributeConnections.filter(function(b){return a.getSourceAttrName()==b.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;0==k.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(a,d){if(this.isActive)return null;var k=this,b=this.getUpdater(),e=this.getConverter(),l=this.targetObj,p=this.targetMethodName;if(!l||!p)return d=
"Cannot update "+this.toString(a)+" because of no target ("+l+") or targetProp ("+p+") ",this.isWeakConnection&&this.disconnect(),console.error(d),null;var q=l[p],u=function(y,A,C,E,L,I){C=[y,A,C,E,L,I];e&&(a=e.call(k,y,A),y=C[0]=a);y="function"===typeof q?q.apply(l,C):l[p]=y;k.removeAfterUpdate&&k.disconnect();return y};try{return this.isActive=!0,b?b.call(this,u,a,d):u(a,d)}catch(y){var w=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();w?w.logError(y,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+a+":\n"+y+"\n"+y.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(a,d){if(!(a&&a.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var k=this.sourceObj,b=this.sourceAttrName,e=this.privateAttrName(b);k[e]&&console.warn("newAttrName "+e+" already exists.Are there already other connections?");
k.hasOwnProperty("doNotSerialize")||(k.doNotSerialize=[]);If.arr.pushIfNotIncluded(k.doNotSerialize,e);k.hasOwnProperty("doNotCopyProperties")||(k.doNotCopyProperties=[]);If.arr.pushIfNotIncluded(k.doNotCopyProperties,e);a&&(k.hasOwnProperty(b)?k.__defineGetter__(e,a):k.__defineGetter__(e,function(){return k.constructor.prototype.__lookupGetter__(b).bind(k)()}));d&&(k.hasOwnProperty(b)?k.__defineSetter__(e,d):k.__defineSetter__(e,function(l){k.constructor.prototype.__lookupSetter__(b).bind(k)(l)}));
a||d||!k.hasOwnProperty(b)||(k[e]=k[b]);k.__defineSetter__(b,function(l){var p=k[e];k[e]=l;if(void 0===k.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;k.attributeConnections.forEach(function(q){q&&q.getSourceAttrName()===b&&q.signalOnAssignment&&q.update(l,p)});return l});k.__lookupSetter__(b).isAttributeConnectionSetter=!0;k.__defineGetter__(b,function(){return k[e]});k.__lookupGetter__(b).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(a,d,k){if("function"!==typeof k)throw Error("addConnectionWrapper didnt get a method to wrap");var b;if(b=a.hasOwnProperty(d)){a[this.privateAttrName(d)]=k;var e=function(){return k}}else e=function(){return Object.getPrototypeOf(a)[d]};a[d]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),p=this[d].originalFunction.apply(this,
arguments),q=0;q<l.length;q++){var u=l[q];u.getSourceAttrName()===d&&u.update(arguments[0])}return p};a[d].isOwnProperty=b;a[d].isWrapped=!0;a[d].isConnectionWrapper=!0;Object.defineProperty(a[d],"originalFunction",{get:e});a[d].toString=function(){return"<Wrapped "+e()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var a=this.sourceAttrName,d=this.privateAttrName(a),k=this.sourceObj;if(k){if(k.__lookupGetter__(a)){if(delete k[a],k.hasOwnProperty(d)){try{k[a]=k[d]}catch(e){}delete k[d]}}else if(k[a]&&
k[a].isConnectionWrapper){var b=k[a];delete k[a];k[a]||(k[a]=b.originalFunction)}k.doNotSerialize&&k.doNotSerialize.includes(d)&&(k.doNotSerialize=If.arr.without(k.doNotSerialize,d),0==k.doNotSerialize.length&&delete k.doNotSerialize);k.doNotCopyProperties&&k.doNotCopyProperties.includes(d)&&(k.doNotCopyProperties=If.arr.without(k.doNotCopyProperties,d),0==k.doNotCopyProperties.length&&delete k.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var a=this.sourceObj&&this.sourceObj.attributeConnections;if(!a)return null;for(var d=0,k=a.length;d<k;d++)if(this.isSimilarConnection(a[d]))return a[d];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(a){return a&&a.constructor==this.constructor?this.sourceObj==a.sourceObj&&this.sourceAttrName==
a.sourceAttrName&&this.targetObj==a.targetObj&&this.targetMethodName==a.targetMethodName:!1}},{key:"toString",value:function(a){try{return If.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),a?"--\x3e"+String(a)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],m,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:309,end:17530})}(void 0);If.AttributeConnection=KH;If.AttributeConnection=KH;If.AttributeConnection=KH;If.callWhenNotNull=qD;If.callWhenNotNull=qD;If.callWhenPathNotNull=rD;If.callWhenPathNotNull=rD;var pga=Object.freeze({__proto__:null,connect:Jj,disconnect:No,disconnectAll:Zv,once:Yp,
signal:xk,noUpdate:ir,AttributeConnection:KH,callWhenNotNull:qD,callWhenPathNotNull:rD}),nd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");nd.pt=bh;nd.Rectangle=Od;nd.rect=wk;nd.arr=Ke;nd.Closure=ci;nd.num=Dj;nd.grid=hx;nd.obj=df;nd.once=Yp;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("Layout")&&"function"===typeof m.Layout?m.Layout:m.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a=void 0===a?{}:a;a=d.spacing;var k=d.padding,b=d.border,e=d.container,l=d.manualUpdate,p=d.autoResize,q=d.ignore,u=d.onScheduleApply,w=d.layoutOrder;d=d.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},b);this.ignore=q||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=e;this.manualUpdate=l;
this.reactToSubmorphAnimations=d||!1;this.autoResize=void 0!=p?p:!0;this.onScheduleApply=u||function(y,A,C){};w&&(this.layoutOrder=w,this.layoutOrderSource=JSON.stringify(String(w)));this.spacing=a||0;this._padding=k?"number"===typeof k?nd.Rectangle.inset(k):k:null}},{key:"attach",value:function(){var a=this;this.apply();this.container.master&&this.container.master.whenApplied().then(function(){a.applyRequests=!0;a.forceLayout()});this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},
{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=nd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",
value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=nd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return nd.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&
!a.ignore.includes(d.name)}),function(d){return a.layoutOrder(d)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,d=this.layoutableSubmorphBounds;if(!d||a.length!=d.length)return!0;for(var k=0;k<a.length;k++)if(!d[k].equals(a[k].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},
{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,
animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var d=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(k){return d.forceLayoutsOfMorph(k)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){return a.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(a,d,k){k=void 0===k?{}:k;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,
d,k);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,d){this.scheduleApply(a,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onSubmorphRemoved",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onChange",value:function(a){var d=a.args,k=a.prop,b=a.value,e=a.prevValue,l=a.meta;l=this.reactToSubmorphAnimations&&l&&
l.animation;d=d&&d[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(d,l);break;case "addMorphAt":this.onSubmorphAdded(d,l)}"extent"===k&&b&&e&&(e.x!==b.x||e.y!==b.y)&&this.scheduleApply(d,l)}},{key:"affectsLayout",value:function(a,d){a=d.value;var k=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!nd.obj.equals(a,k)}},{key:"onSubmorphChange",value:function(a,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
d.meta.animation);if(this.affectsLayout(a,d))this.onSubmorphResized(a,d)}},{key:"changePropertyAnimated",value:function(a,d,k,b){if(b){var e=b.duration;b=b.easing;var l={};this.animationPromise=a.animate((l[d]=k,l.duration=e,l.easing=b,l))}else a[d]=k}},{key:"attachAnimated",value:function(a,d,k){this.active||(this.container=d,this.active=!0,d.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:k})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=
!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6778})})(void 0);var JA=za("az",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("CustomLayout")&&"function"===typeof m.CustomLayout?m.CustomLayout:m.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=nd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(d){console.error("Error in relayout() of a custom layout:",d)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6787,end:7715})}(nd.Layout));nd.CustomLayout=JA;nd.CustomLayout=JA;nd.CustomLayout=JA;var KA=za("bq",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("SnapLayout")&&"function"===typeof m.SnapLayout?m.SnapLayout:m.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var d=this;a=void 0===a?!1:a;if(!this.active&&this.container){Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var k=this.container.submorphBounds().insetBy(-this.spacing),b=nd.pt(this.spacing,this.spacing).subPt(k.topLeft());b.r()&&this.container.submorphs.forEach(function(e){return d.changePropertyAnimated(e,"position",e.position.addPt(b),a)});this.changePropertyAnimated(this.container,
"extent",k.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7724,end:8521})}(nd.Layout));nd.SnapLayout=KA;nd.SnapLayout=KA;nd.SnapLayout=KA;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("FloatLayout")&&"function"===typeof m.FloatLayout?m.FloatLayout:m.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(d.active||
!d.container||!d.container.submorphs.length||!d.layoutableSubmorphs.length)return b.return();d.layoutableSubmorphBounds||d.refreshBoundsCache();Kb._get(Object.getPrototypeOf(n.prototype),"apply",d).call(d,a);d.active=!0;try{k=d.computeMinContainerExtent(),d.layoutSubmorphs(k,a),k=d.computeMinContainerExtent(),d.resizeContainer(k,a),d.lastBoundsExtent=d.container.bounds().extent()}finally{d.active=!1,d.layoutRequests=!1}return b.return(d.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8523,end:10937})})(nd.Layout);var $r=za("aa",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("VerticalLayout")&&
"function"===typeof m.VerticalLayout?m.VerticalLayout:m.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Kb._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+nd.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.spacing,p=this.autoResize,q=this.align,u=this.resizeSubmorphs,w=this.getStartY(a),y=[];a=u?b.width:a.x;p=p&&!u;var A=function(C,E){e.reduce(function(L,I){u&&k.changePropertyAnimated(I,"width",b.width-2*l,d);k.forceLayoutsOfMorph(I);k.changePropertyAnimated(I,C,L,d);L=I.bounds();y.push(L);return L[C]().addXY(0,L.height+l)},E)};this.layoutableSubmorphBounds=
y;"left"===q?A("topLeft",nd.pt(l,w)):"right"===q?A("topRight",nd.pt(a+(p?l:-l),w)):A("topCenter",nd.pt((a+(p?2*l:0))/2,w))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphs,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].top,b=nd.arr.last(b).bottom+k):b=nd.arr.last(b).bottom+l,a=nd.pt(e?p.width:a.x+2*l,Math.max(b,a.y)),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartY",value:function(a){var d=this.layoutableSubmorphBounds,
k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.height;return Math.max(0,"bottomToTop"===b?a.y-e-2*k:"centered"===b?a.y/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,d=this.layoutableSubmorphs,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var q=d[p].bounds(),u=q.width;l+=q.height;e=Math.max(u,e)}d=nd.pt(e,l+b);k||(d=d.maxPt(a.extent));return d}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10946,end:14914})}(nd.FloatLayout));nd.VerticalLayout=$r;nd.VerticalLayout=
$r;nd.VerticalLayout=$r;var so=za("af",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("HorizontalLayout")&&"function"===typeof m.HorizontalLayout?m.HorizontalLayout:m.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Kb._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Kb._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.resizeSubmorphs,p=this.spacing,q=this.autoResize,u=this.align,w=this.getStartX(a),y=[];a=l?b.height:a.y;q=q&&!l;var A=function(C,E){e.reduce(function(L,I){l&&k.changePropertyAnimated(I,
"height",b.height-2*p,d);k.forceLayoutsOfMorph(I);k.changePropertyAnimated(I,C,L,d);L=I.bounds();y.push(L);return L[C]().addXY(L.width+p,0)},E)};this.layoutableSubmorphBounds=y;"top"===u?A("topLeft",nd.pt(w,p)):"bottom"===u?A("bottomLeft",nd.pt(w,a+(q?p:-p))):A("leftCenter",nd.pt(w,(a+(q?2*p:0))/2))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphBounds,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].left(),
b=nd.arr.last(b).right()+k):b=nd.arr.last(b).right()+l,a=nd.pt(Math.max(a.x,b),e?p.height:a.y+2*l),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartX",value:function(a){var d=this.layoutableSubmorphBounds,k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.width;return Math.max(0,"rightToLeft"===b?a.x-e-2*k:"centered"===b?a.x/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,
d=this.layoutableSubmorphBounds,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var q=d[p],u=q.height;e+=q.width;l=Math.max(u,l)}d=nd.pt(e+b,l);k||(d=d.maxPt(a.extent));return d}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14923,end:18840})}(nd.FloatLayout));nd.HorizontalLayout=so;nd.HorizontalLayout=so;nd.HorizontalLayout=so;var LA=za("ag",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("ProportionalLayout")&&"function"===typeof m.ProportionalLayout?m.ProportionalLayout:m.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=nd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Kb._get(Object.getPrototypeOf(n.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,d){var k=this._submorphSettings;a=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=nd.pt(0,0);if(k&&a){k=$jscomp.makeIterator(k);for(var b=k.next();!b.done;b=k.next()){var e=$jscomp.makeIterator(b.value);b=e.next().value;e=e.next().value;(b=$jscomp.makeIterator(this._morphsMatchingSelector(a,b)).next().value)&&d.set(b,e)}this.proportionalLayoutSettingsForMorphs=
d}}},{key:"onSubmorphChange",value:function(a,d,k,b){"name"===d.prop&&(k=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,k,!0);return Kb._get(Object.getPrototypeOf(n.prototype),"onSubmorphChange",this).call(this,a,d)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,d,k){k=void 0===k?!1:k;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},d));k&&(d=this.submorphSettings.filter(function(b){return b[0]!==a.name}),d.push([a.name,this.settingsFor(a)]),this._submorphSettings=d)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else nd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var d=this,k={};a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;k={$jscomp$loop$prop$setting$2683:k.$jscomp$loop$prop$setting$2683},b=a.next()){b=$jscomp.makeIterator(b.value);var e=b.next().value;k.$jscomp$loop$prop$setting$2683=b.next().value;this._morphsMatchingSelector(this.container,e).forEach(function(l){return function(p){return d.changeSettingsFor(p,l.$jscomp$loop$prop$setting$2683)}}(k))}}},{key:"_morphsMatchingSelector",value:function(a,
d){var k=this,b=[];if(!d)return b;d.isMorph?b=[d]:d instanceof RegExp?b=a.submorphs.filter(function(e){return e.name.match(d)}):"string"===typeof d?b=a.submorphs.filter(function(e){return e.name===d}):Array.isArray(d)&&(b=nd.arr.flatmap(d,function(e){return k._morphsMatchingSelector(a,e)}));return b}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,d=this.lastExtent;d&&!a.eqPt(d)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(d)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(k){return k.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.container,k=this.extentDelta,b=k.x;k=k.y;var e=(d||{}).extent;if(!this.active&&d&&(0!=b||0!=k)){this.extentDelta=nd.pt(0,0);this.active=!0;Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var l=this.layoutableSubmorphs;d=e.scaleByPt(e.addXY(-b,-k).invertedSafely());e=$jscomp.makeIterator(l);for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.settingsFor(l),
q=p.x,u=p.y,w=p=0,y=0,A=0;"move"===q&&(p=b);"move"===u&&(w=k);"resize"===q&&(y=b);"resize"===u&&(A=k);if("scale"===q||"scale"===u)q=nd.pt("scale"===q?d.x:1,"scale"===u?d.y:1),this.changePropertyAnimated(l,"position",l.position.scaleByPt(q),a),this.changePropertyAnimated(l,"extent",l.extent.scaleByPt(q),a);(p||w)&&this.changePropertyAnimated(l,"position",l.position.addXY(p,w),a);(y||A)&&this.changePropertyAnimated(l,"extent",l.extent.addXY(y,A),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18849,end:24393})}(nd.Layout));nd.ProportionalLayout=LA;nd.ProportionalLayout=LA;nd.ProportionalLayout=
LA;var MA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof m.CenteredTilingLayout?m.CenteredTilingLayout:m.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var d=this.spacing,k=this.layoutableSubmorphs,b=d+this.border.top;k=k.slice();for(var e={};k.length;){e.$jscomp$loop$prop$remainingWidth$2685=a;var l=nd.arr.takeWhile(k,function(u){return function(w){w=u.$jscomp$loop$prop$remainingWidth$2685-(w.width+2*d);if(0>w)return!1;u.$jscomp$loop$prop$remainingWidth$2685=
w;return!0}}(e));l.length?k=nd.arr.withoutAll(k,l):(l=[k.shift()],e.$jscomp$loop$prop$remainingWidth$2685=0);var p=nd.pt(e.$jscomp$loop$prop$remainingWidth$2685/2+d+this.border.left,b);l=$jscomp.makeIterator(l);for(var q=l.next();!q.done;q=l.next())q=q.value,q.position=p,p=p.addXY(2*d+q.width,0),b=Math.max(b,q.bottom);b+=2*d;e={$jscomp$loop$prop$remainingWidth$2685:e.$jscomp$loop$prop$remainingWidth$2685}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24402,end:25698})}(nd.TilingLayout);nd.CenteredTilingLayout=MA;nd.CenteredTilingLayout=MA;nd.CenteredTilingLayout=MA;var NA=za("aA",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("TilingLayout")&&
"function"===typeof m.TilingLayout?m.TilingLayout:m.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var d=this.axis,k=this.align,b=this.border,e=this.spacing,
l=this.layoutableSubmorphs,p=this.getOptimalWidth(this.container),q=(d="row"==d)?"left":"top",u=d?"x":"y",w=d?"y":"x",y=0,A=e+b[d?"top":"left"],C="topLeft";switch(this._verticalAlign){case "top":C="topLeft";break;case "center":C="leftCenter";break;case "bottom":C="bottomLeft"}for(;l.length;){var E=p-e,L=nd.arr.takeWhile(l,function(T){T=T.bounds().extent();T=E-(Math.floor(T[u])+e);if(0>T)return!1;E=T;return!0});L.length?l.splice(0,L.length):(L=[l.shift()],E=0);y=nd.arr.max(L.map(function(T){return T.bounds().extent()[w]}));
if(d)switch(k){case "left":var I=nd.pt(e,A);break;case "center":I=nd.pt(E/2+e+b[q],A);break;case "right":I=nd.pt(E-e,A)}else switch(k){case "left":I=nd.pt(A,e);break;case "center":I=nd.pt(A,E/2+e+b[q]);break;case "right":I=nd.pt(A,E-e)}"bottomLeft"==C&&(I=I.addXY(0,y));L=$jscomp.makeIterator(L);for(var V=L.next();!V.done;V=L.next())V=V.value,this.changePropertyAnimated(V,C,I,a),V=V.bounds().extent(),I=d?I.addXY(e+V[u],0):I.addXY(0,e+V[u]);A+=e+y;y=0}this.active=!1}}},{key:"getMinWidth",value:function(){var a=
this.border,d=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().width>k?b.bounds().width:k},0)+d+a}},{key:"getMinHeight",value:function(){var a=this.border,d=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().height>k?b.bounds().height:k},0)+d+a}},{key:"getOptimalWidth",value:function(a){var d=this.axis,k=this.border,b=k.left,e=k.top,l=k.right;k=k.bottom;a="row"==d?a.width-b-l:a.height-e-k;d="row"==d?this.getMinWidth():this.getMinHeight();
return Math.max(a,d)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:25707,end:31255})}(nd.Layout));nd.TilingLayout=NA;nd.TilingLayout=NA;nd.TilingLayout=NA;var OA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CellGroup")&&"function"===typeof m.CellGroup?m.CellGroup:m.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=
a.morph,k=a.layout;this.state={cells:[a.cell],layout:k,align:a.align,resize:k.fitToCell};k&&k.addGroup(this);this.morph=d}},{key:"morph",get:function(){var a=this.state,d=a.morph;a=a.layout;return d?d.isMorph?d:a.layoutableSubmorphs.find(function(k){return k.name==d}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||
"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var d=a&&this.layout.getCellGroupFor(a);d&&(d.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.morph;if(d){var k=this.bounds(),b=this.compensateOrigin?this.layout.container.origin.negated():nd.pt(0,0);if(a){var e=this.resize?k.extent():
d.extent,l=a;a=l.duration;l=l.easing;var p={};d.animate((p[this.alignedProperty||this.align]=k[this.align]().addPt(b),p.extent=e,p.duration=a,p.easing=l,p))}else this.resize&&(d.extent=k.extent()),d[this.alignedProperty||this.align]=k[this.align]().addPt(b);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,
d){return a.union(d)}):nd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(d){return d==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,d){a.group=(void 0===d?null:d)||new nd.CellGroup({morph:null,layout:this.layout,cell:a});nd.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",
value:function(a){var d=this;a.cells.forEach(function(k){d.connect(k)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(d){return(null==d.left||d.left.group!=a)&&(null==d.top||d.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(d){return(null==d.right||d.right.group!=a)&&(null==d.bottom||d.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31264,end:34496})}(void 0);nd.CellGroup=OA;nd.CellGroup=OA;nd.CellGroup=OA;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutAxis")&&"function"===typeof m.LayoutAxis?m.LayoutAxis:m.LayoutAxis=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,d=[];a=a.before;)d=[a].concat($jscomp.arrayFromIterable(d));return d}},{key:"axisAfter",get:function(){for(var a=
this,d=[];a=a.after;)d=[].concat($jscomp.arrayFromIterable(d),[a]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},
{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(d){return d.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var d=this;if(nd.obj.isNumber(a)){var k=a;a=!0}this.items.forEach(function(e){e.fixed[d.dimension]=a});var b=
this.containerLength;void 0!=k&&(this[this.dimension]=k);this.adjustOtherProportions(a);this.containerLength=b}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var d=this;this.items.forEach(function(k){k[d.dimension]=nd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var d=this;this.items.forEach(function(k){k.proportion[d.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var d=this;this.items.forEach(function(k){k.min[d.dimension]=0>k.min[d.dimension]+a?0:k.min[d.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var d=this,k=this.axisBefore,b=this.axisAfter,e=nd.arr.sum([].concat($jscomp.arrayFromIterable(k),$jscomp.arrayFromIterable(b)).filter(function(q){return!q.fixed}).map(function(q){return q.proportion})),
l=function(q){return q.proportion/=e},p=function(q){return q.proportion*=d.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=e);k.forEach(a?l:p);b.forEach(a?l:p)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var d;0>this.length+a&&(a=
-this.length);(d=this.axisAfter.find(function(k){return!k.fixed}))?(a=Math.min(a,d.length),this.length+=a,d.length-=a,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(k){return!k.fixed}))?(d.length-=a,this.length+=a,this.adjustProportion(),d.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(k){return k.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(k){return!k.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),d=(this.containerLength-this.staticLength)/a.length;a.map(function(k){k.fixed||(k.length=d);return k}).forEach(function(k){return k.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:35136,end:40853})})(void 0);var PA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutColumn")&&
"function"===typeof m.LayoutColumn?m.LayoutColumn:m.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new nd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new nd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(d){d.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(d){d.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new nd.LayoutColumn(new nd.LayoutCell({column:nd.arr.withN(this.items.length,null),layout:this.layout}));nd.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.height=k.height;d.fixed.height=k.fixed.height;d.frozen.height=k.frozen.height;d.proportion.height=k.proportion.height;d.min.height=k.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;nd.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.right=k;k.left=d});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.left&&(k.left.right=k.right);k.right&&(k.right.left=k.left);k.group.disconnect(k);a.layout.removeGroup(k.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40862,end:43236})}(nd.LayoutAxis);nd.LayoutColumn=PA;nd.LayoutColumn=PA;nd.LayoutColumn=PA;var QA=function(f){var m=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutRow")&&"function"===typeof m.LayoutRow?m.LayoutRow:m.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new nd.LayoutRow(new nd.LayoutCell({row:nd.arr.withN(this.items.length,null),layout:this.layout}));nd.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.width=k.width;d.fixed.width=k.fixed.width;d.frozen.width=k.frozen.width;d.proportion.width=k.proportion.width;d.min.width=k.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(d){d.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(d){d.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new nd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new nd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;nd.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.bottom=k;k.top=d});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.top&&(k.top.bottom=k.bottom);k.bottom&&(k.bottom.top=k.top);k.group.disconnect(k);a.layout.removeGroup(k.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43245,
end:45706})}(nd.LayoutAxis);nd.LayoutRow=QA;nd.LayoutRow=QA;nd.LayoutRow=QA;var RA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutCell")&&"function"===typeof m.LayoutCell?m.LayoutCell:m.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a.row,k=a.column,b=a.top,e=a.left,
l=a.right,p=a.bottom;a=a.layout;var q;d=$jscomp.makeIterator(d||[]);var u=d.next().value;d=$jscomp.arrayFromIterator(d);k=$jscomp.makeIterator(k||[]);var w=k.next().value;k=$jscomp.arrayFromIterator(k);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=b;this.left=e;this.bottom=p;this.right=l;this.padding=nd.rect(0,0,0,0);0<d.length?this.right=new nd.LayoutCell({row:d,left:this,layout:a}):0<k.length&&(this.bottom=new nd.LayoutCell({column:k,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(q=a&&a.getCellGroupFor(u||w))?q.connect(this):this.group=new nd.CellGroup({cell:this,morph:u||w,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var d=a.neighbor,k=a.prepend;a=a.append;for(var b=[],e=this;e=e[d];)k&&(b=[e].concat($jscomp.arrayFromIterable(b))),a&&(b=[].concat($jscomp.arrayFromIterable(b),[e]));return b}},{key:"col",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.right,
k--;if(!d)throw Error(a+" out of bounds! Last column was "+(a-k-1));return new nd.LayoutColumn(d)}},{key:"row",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.bottom,k--;if(!d)throw Error(a+" out of bounds! Last row was "+(a-k-1));return new nd.LayoutRow(d)}},{key:"extent",get:function(){return nd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return nd.pt(nd.arr.sum(this.before.map(function(a){return a.width})),nd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],m,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45715,end:49367})}(void 0);nd.LayoutCell=RA;nd.LayoutCell=RA;nd.LayoutCell=RA;var as=za("ab",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("GridLayout")&&"function"===typeof m.GridLayout?m.GridLayout:m.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],d=[],k=[],b={},e=$jscomp.makeIterator(nd.arr.range(0,this.rowCount-1)),l=e.next();!l.done;l=e.next())a.push(this.grid.row(l.value).items.map(function(q){return q.group.state.morph?q.group.state.morph.name||q.group.state.morph:null}));e=$jscomp.makeIterator(nd.arr.range(0,this.rowCount-1));for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.grid.row(l);d.push(l,Object.assign({},
p.fixed?{fixed:p.length}:{height:p.height},{paddingTop:p.paddingTop,paddingBottom:p.paddingBottom}))}e=$jscomp.makeIterator(nd.arr.range(0,this.columnCount-1));for(l=e.next();!l.done;l=e.next())l=l.value,p=this.grid.col(l),k.push(l,Object.assign({},p.fixed?{fixed:p.length}:{},{paddingLeft:p.paddingLeft,paddingRight:p.paddingRight}));e=$jscomp.makeIterator(this.cellGroups);for(l=e.next();!l.done;l=e.next())l=l.value,l.state.morph&&(b["string"===typeof l.state.morph?l.state.morph:l.morph.name]=nd.obj.select(l,
["align","resize"]));return{autoAssign:!1,grid:a,rows:d,columns:k,groups:b}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+nd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,d=this.ensureGrid(this.config).map(function(k){return new nd.LayoutRow(new nd.LayoutCell({row:k,layout:a}))});d.reduce(function(k,b){return k.attachTo(b)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var d in a){var k=this.getCellGroupFor(this.container.getSubmorphNamed(d)),b=a[d],e=b.resize,l=void 0===b.align?"topLeft":b.align;b=void 0===b.alignedProperty?"topLeft":b.alignedProperty;k&&(void 0!=e&&(k.resize=e),k.align=l,k.alignedProperty=b)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,d=void 0===a.columns?[]:a.columns,k=$jscomp.makeIterator(nd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=k.next();!a.done;a=k.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;b=b.next().value;Object.assign(this.row(a),b)}d=$jscomp.makeIterator(nd.arr.toTuples(d,2));for(a=d.next();!a.done;a=d.next())k=$jscomp.makeIterator(a.value),a=k.next().value,b=k.next().value,Object.assign(this.col(a),b)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(d){return d.resize=a});this.apply()}},{key:"notInLayout",get:function(){return nd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){nd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,d,k;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(b){b.prepareForResize(a.container.height);d=a.grid.totalStaticHeight;return b}).forEach(function(b){b.fixed||
(b.length=b.proportion*Math.max(0,a.container.height-d))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(b){b.prepareForResize(a.container.width);k=a.grid.totalStaticWidth;return b}).forEach(function(b){b.fixed||(b.length=b.proportion*Math.max(0,a.container.width-k))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Kb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=nd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),d=a.next();!d.done;d=a.next())if(d=d.value,d.morph&&!d.bounds().equals(d.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(d){return d.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var d=this.getCellGroupFor(a);d&&(d.morph=null);Kb._get(Object.getPrototypeOf(n.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var d=this,k=a.grid,b=a.rowCount,e=a.columnCount;k=k||[[]];b=b||k.length;e=e||nd.arr.max(k.map(function(l){return l.length}));k.length<b&&(k=k.concat(nd.arr.withN(b-k.length,
[])));return k=k.map(function(l){l.length<e&&(l=l.concat(nd.arr.withN(e-l.length,null)));return l.map(function(p){return p&&p.isMorph?(p.owner!=d.container&&d.container.addMorph(p),p):p?d.container.getSubmorphNamed(p)||p:p})})}},{key:"autoAssign",value:function(a){var d=this;a.forEach(function(k){var b,e=Infinity;d.cellGroups.forEach(function(l){l.morph||l.cells.forEach(function(p){p=p.position.dist(k.position);p<e&&(b=l,e=p)})});b&&(b.morph=k)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49376,end:56477})}(nd.Layout));nd.GridLayout=as;nd.GridLayout=as;nd.GridLayout=as;var W1=Object.freeze({__proto__:null,CustomLayout:JA,SnapLayout:KA,VerticalLayout:$r,HorizontalLayout:so,ProportionalLayout:LA,CenteredTilingLayout:MA,TilingLayout:NA,
CellGroup:OA,LayoutColumn:PA,LayoutRow:QA,LayoutCell:RA,GridLayout:as});za("bO",W1);lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,a){return n.set(Symbol[a],"Symbol."+a)},new Map)}(),m=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?
this[Symbol.toPrimitive]():this,a=Symbol.keyFor(n);if(a)return{__expr__:'Symbol.for("'+a+'")'};if(f.get(n))return{__expr__:f.get(n)};n=String(n).match(m);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,
value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;e++;l=a.snapshotProperty(a.id,l,n.concat("key",String(e)),m,f);p=a.snapshotProperty(a.id,p,n.concat("value",String(e)),m,f);b.push(l,p)}return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",
{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k+=2){var b=f[k+1],e=m.recreateProperty("key."+k,f[k],n,a,d.concat("key",k));b=m.recreateProperty("value."+k,b,n,a,d.concat("value",k));this.set(e,b)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next())l=
l.value,e++,l=a.snapshotProperty(a.id,l,n.concat("entry",String(e)),m,f),b.push(l);return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k++){var b=m.recreateProperty("entry."+k,f[k],n,a,d.concat("key",k));this.add(b)}}});var tP=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");tP.isPrimitive=sD;tP.isPrimitive=sD;tP.isPrimitive=sD;var hh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
hh.obj=df;hh.properties=gm;hh.Plugin=function(){};var uP=function(){};uP.prototype.serializeObject=function(f,m,n,a,d){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(n,a,d))&&f.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(f),f=m?n:{__expr__:n});return f};uP.prototype.deserializeObject=function(f,m,n,a){return(m=n.__expr__)?f.expressionSerializer.deserializeExpr(m):null};hh.CustomSerializePlugin=uP;var vP=function(){};vP.prototype.additionallySerialize=
function(f,m,n,a){f.classHelper.addClassInfo(m,m.realObj,n)};vP.prototype.deserializeObject=function(f,m,n,a){return f.classHelper.restoreIfClassInstance(m,n)};hh.ClassPlugin=vP;var X1=function(){};X1.prototype.serializeObject=function(f,m,n,a,d){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};hh.SerializationIndicationPlugin=X1;var Y1=function(){};Y1.prototype.additionallySerialize=function(f,m,n,a){m.realObj&&m.realObj.isMorph&&(m.realObj.__isBeingSerialized__=!1)};hh.SerializationFinishPlugin=
Y1;var LH=function(){};LH.prototype.additionallySerialize=function(f,m,n,a){var d=m.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(n,m,f,a)};LH.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){"function"===typeof n.__deserialize__&&n.__deserialize__(d,m,k,f,b)};LH.prototype.additionallyDeserializeAfterProperties=function(f,m,n,a,d,k){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(a,m,f)};hh.AdditionallySerializePlugin=
LH;var Z1=function(){};Z1.prototype.propertiesToSerialize=function(f,m,n,a){return(f=m.realObj)&&f.__only_serialize__||null};hh.OnlySerializePropsPlugin=Z1;var $1=function(){};$1.prototype.propertiesToSerialize=function(f,m,n,a){f=m.realObj;if(!f||!f.__dont_serialize__)return null;f=hh.obj.mergePropertyInHierarchy(f,"__dont_serialize__");m=[];for(n=0;n<a.length;n++){var d=a[n];f.includes(d)||m.push(d)}return m};hh.DontSerializePropsPlugin=$1;var wP=function(){};wP.prototype.propertiesToSerialize=
function(f,m,n,a){var d=m.realObj;m=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!m)return null;f=m.properties;n=m.propertySettings.valueStoreProperty||"_state";m=[];if(d[n]){if(d.__only_serialize__){for(var k=0;k<a.length;k++){d=a[k];var b=f[d];d!==n&&(b&&b&&(b.derived||b.readOnly||b.hasOwnProperty("serialize")&&!b.serialize)||m.push(d))}return m}n=a.indexOf(n);-1<n&&a.splice(n,1);for(k in f)n=f[k],d=a.indexOf(k),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<d&&a.splice(d,1):-1===d&&m.push(k);return m.concat(a)}};wP.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){var e=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!e)return a;var l=e.order;e=e.propertySettings.valueStoreProperty||"_state";a=d.props;if(a[e])return a;a=hh.obj.clone(a);n.hasOwnProperty(e)||n.initializeProperties();for(d=0;d<l.length;d++)e=l[d],a.hasOwnProperty(e)&&(m.recreatePropertyAndSetProperty(n,a,e,k,f,b),delete a[e]);return a};
hh.LivelyClassPropertiesPlugin=wP;var xP=function(){};xP.prototype.additionallySerialize=function(f,m,n,a){var d=this,k=m.realObj;k&&(this._serializable(k)?hh.properties.allOwnPropertiesOrFunctions(k,function(b,e){d._serializable(k[e])||console.warn("Attribute cannot be serialized: "+e+" of "+k+". Might be an anonymous function?")}):console.warn("Cannot serialize anonymous function "+k))};xP.prototype._serializable=function(f){return"function"!==typeof f||!!f.isWrapped||!!f.hasLivelyClosure};hh.SerializableCheckPlugin=
xP;var yP={livelyClassPropertiesPlugin:new hh.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new hh.DontSerializePropsPlugin,onlySerializePropsPlugin:new hh.OnlySerializePropsPlugin,additionallySerializePlugin:new hh.AdditionallySerializePlugin,classPlugin:new hh.ClassPlugin,customSerializePlugin:new hh.CustomSerializePlugin,indicationPlugin:new hh.SerializationIndicationPlugin,serializableCheckPlugin:new hh.SerializableCheckPlugin,finishPlugin:new hh.SerializationFinishPlugin};hh.plugins=yP;
hh.plugins=yP;hh.plugins=yP;var wp=[hh.plugins.indicationPlugin,hh.plugins.customSerializePlugin,hh.plugins.classPlugin,hh.plugins.additionallySerializePlugin,hh.plugins.onlySerializePropsPlugin,hh.plugins.dontSerializePropsPlugin,hh.plugins.livelyClassPropertiesPlugin,hh.plugins.serializableCheckPlugin,hh.plugins.finishPlugin];hh.allPlugins=wp;hh.allPlugins=wp;hh.allPlugins=wp;var hi=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");hi.__additionally_serialize__addObjectFunction=
function(f,m,n,a,d){d=void 0===d?[]:d;return function(k,b,e){e=void 0===e?!1:e;return m.props[k]=e?{value:b,verbatim:e}:{value:f.snapshotProperty(f.id,b,d.concat([k]),n,a)}}};hi.arr=Ke;hi.Path=Ag;hi.obj=df;hi.string=rg;hi.isPrimitive=sD;hi.ClassHelper=vp;hi.ExpressionSerializer=Sj;hi.allPlugins=wp;hi.debugSerialization=!1;hi.debugDeserialization=!1;var Yh=function(f){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};Yh.withDefaultPlugins=function(f){return new this(Object.assign({plugins:hi.allPlugins},
f))};Yh.resolveFromSnapshotAndId=function(f,m){return(new this(m)).resolveFromSnapshotAndId(f)};Yh.fromSnapshot=function(f,m){return(new this(m)).readSnapshot(f)};Yh.withObject=function(f,m){m=new this(m);m.add(f);return m};Yh.prototype.reset=function(){this.uuidGen=hi.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var f=this.options;this.classHelper=new hi.ClassHelper(f);this.expressionSerializer=new hi.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&
(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var m=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&m.serializeObject.push(n);"function"===typeof n.additionallySerialize&&m.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&m.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&m.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&m.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&m.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&m.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&m.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&m.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&m.afterSerialization.push(n)})};Yh.prototype.knowsId=function(f){return!!this._id_ref_map[f]};Yh.prototype.refForId=function(f){return this._id_ref_map[f]};Yh.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};Yh.prototype.ref=
function(f){return this._obj_ref_map.get(f)};Yh.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};Yh.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};Yh.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};Yh.prototype.add=function(f){var m=this;if(!hi.isPrimitive(f)){if(Array.isArray(f))return f.map(function(a){return m.add(a)});var n=f.__serialization_id_property__||this.idPropertyName;
return this.ref(f)||this.internalAddRef(new hi.ObjectRef(f[n]||this.uuidGen(),f,void 0,this.idPropertyName))}};Yh.prototype.snapshot=function(f){var m={};this.plugin_beforeSerialization(m,f);for(var n=0,a=Object.keys(this._id_ref_map);n<a.length;n++)this._id_ref_map[a[n]].snapshotObject(m,this);return m=this.plugin_afterSerialization(m,f)};Yh.prototype.snapshotObject=function(f){f=this.add(f).id;var m=this.snapshot(f);return{id:f,snapshot:m}};Yh.prototype.readSnapshot=function(f,m){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)hi.ObjectRef.fromSnapshot(m,f,this,[],this.idPropertyName);else{m=0;for(var n=Object.keys(f);m<n.length;m++)this.resolveToObj(n[m])||hi.ObjectRef.fromSnapshot(n[m],f,this,[],this.idPropertyName)}return this};Yh.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var m=f=this.plugin_beforeDeserialization(f),n=m.id;this.readSnapshot(m.snapshot,
n);this.plugin_afterDeserialization(f);return this.resolveToObj(n)};Yh.prototype.plugin_beforeSerialization=function(f,m){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,f,m)};Yh.prototype.plugin_afterSerialization=function(f,m){for(var n=0;n<this.plugins.afterSerialization.length;n++){var a=this.plugins.afterSerialization[n].afterSerialization(this,f,m);a&&(f=a)}return f};Yh.prototype.plugin_beforeDeserialization=function(f){for(var m=
0;m<this.plugins.beforeDeserialization.length;m++){var n=this.plugins.beforeDeserialization[m].beforeDeserialization(this,f);n&&(f=n)}return f};Yh.prototype.plugin_afterDeserialization=function(f){for(var m=0;m<this.plugins.afterDeserialization.length;m++)this.plugins.afterDeserialization[m].afterDeserialization(this,f)};Yh.prototype.plugin_serializeObject=function(f,m,n,a){for(var d=0;d<this.plugins.serializeObject.length;d++){var k=this.plugins.serializeObject[d].serializeObject(f,m,this,n,a);if(k)return k}};
Yh.prototype.plugin_propertiesToSerialize=function(f,m,n){for(var a=0;a<this.plugins.propertiesToSerialize.length;a++){var d=this.plugins.propertiesToSerialize[a].propertiesToSerialize(this,f,m,n);d&&(n=d)}return n};Yh.prototype.plugin_additionallySerialize=function(f,m,n,a){n=this.plugins.additionallySerialize.length?hi.__additionally_serialize__addObjectFunction(f,m,n,this,a):null;for(a=0;a<this.plugins.additionallySerialize.length;a++)this.plugins.additionallySerialize[a].additionallySerialize(this,
f,m,n)};Yh.prototype.plugin_deserializeObject=function(f,m,n){for(var a=0;a<this.plugins.deserializeObject.length;a++){var d=this.plugins.deserializeObject[a].deserializeObject(this,f,m,n);if(d)return d}};Yh.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k){for(var b=0;b<this.plugins.additionallyDeserializeBeforeProperties.length;b++){var e=this.plugins.additionallyDeserializeBeforeProperties[b].additionallyDeserializeBeforeProperties(this,f,m,n,a,d,k);e&&(n=e)}return n};
Yh.prototype.plugin_additionallyDeserializeAfterProperties=function(f,m,n,a,d){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,f,m,n,a,d)};hi.ObjectPool=Yh;var yn=function(f,m,n,a){this.id=f;this.idPropertyName=void 0===a?"id":a;this.realObj=m;this.snapshotVersions=[];this.snapshots={};n&&(f=n.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=n)};yn.fromSnapshot=function(f,
m,n,a,d){a=void 0===a?[]:a;f=new this(f,void 0,void 0,d);try{return n.internalAddRef(f).recreateObjFromSnapshot(m,n,a)}catch(k){if(n.options.highlightBuggyMorphs)for(;a.length;){if((m=hi.Path(a).map(function(b,e){return"submorphs"==b?e.filter(function(l){return!l.isHand&&!l.isEpiMorph}):e}).get(n.options.rootObject))&&m.isMorph&&m.world()){m.show(!0);n.options.highlightBuggyMorphs=!1;break}a.pop()}throw k;}};yn.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===
f?"????":f}};yn.prototype.snapshotObject=function(f,m,n){n=void 0===n?[]:n;hi.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var a=this.id,d=this.realObj,k=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+a+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var b=d._rev||0;var e=this.asRefForSerializedObjMap(b);hi.arr.pushIfNotIncluded(this.snapshotVersions,
b);if(k[b])return f[a]||(f[a]=k[b]),e;var l=typeof a;"number"===l&&(a=String(a),l="string");if("string"!==l)throw Error("Error snapshoting "+d+": id is not a string but "+(a+" (serialization path: ")+(n.join(".")+")"));if(l=m.plugin_serializeObject(d,!1,f,n))return k[b]=f[a]=l,e;l=Object.getOwnPropertyNames(d);var p={};k=k[b]=f[a]={rev:b,props:p};(b=m.plugin_propertiesToSerialize(this,k,l))&&(l=b);for(b=0;b<l.length;b++){var q=l[b];p[q]={value:this.snapshotProperty(a,d[q],n.concat([q]),f,m)}}m.plugin_additionallySerialize(this,
k,f,n);return e};yn.prototype.snapshotProperty=function(f,m,n,a,d){var k=this;if(hi.isPrimitive(m))return m;var b=d.plugin_serializeObject(m,!0,a,n);if(b)return b;if("function"!==typeof m)return Array.isArray(m)?m.map(function(e,l){return k.snapshotProperty(f,e,n.concat(l),a,d)}):(m=d.add(m))&&m.isObjectRef?m.snapshotObject(a,d,n):m};yn.prototype.recreateObjFromSnapshot=function(f,m,n){if(this.realObj)return this;hi.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var a=f[this.id];if(!a)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=a.rev,k;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=a;(k=m.plugin_deserializeObject(this,a,n))||(k={});"undefined"===typeof k._rev&&"object"===typeof k&&(k._rev=d||0);this.realObj=k;m.internalAddRef(this);if(!k)return this;d=a.props;var b=m.plugin_additionallyDeserializeBeforeProperties(this,k,d,a,f,n);b&&(d=b);if(d)for(var e in d)this.recreatePropertyAndSetProperty(k,
d,e,f,m,n);e=k.__serialization_id_property__||this.idPropertyName;m.reinitializeIds&&k.hasOwnProperty(e)&&(k[e]=m.reinitializeIds(this.id,this));m.plugin_additionallyDeserializeAfterProperties(this,k,a,f,n);return this};yn.prototype.recreatePropertyAndSetProperty=function(f,m,n,a,d,k){try{var b=m[n]||{value:"NON EXISTING"},e=b.value;f[n]=b.verbatim?e:this.recreateProperty(n,e,a,d,k.concat(n))}catch(p){try{var l=String(f)}catch(q){l="[some "+f.constructor.name+"]"}p.__seen?console.error("Error deserializing property "+
n+" of "+l):(f=n+" of "+l+" ("+JSON.stringify(e)+")",console.error("Error deserializing property "+f),p.__seen=!0)}};yn.prototype.recreateProperty=function(f,m,n,a,d){var k=this;if("string"===typeof m&&a.expressionSerializer.isSerializedExpression(m))return a.expressionSerializer.deserializeExpr(m);if(hi.isPrimitive(m))return m;if(Array.isArray(m))return m.map(function(b,e){return k.recreateProperty(e,b,n,a,d.concat(e))});f=m.__serialization_id_property__||this.idPropertyName;return(a.refForId(m[f])||
hi.ObjectRef.fromSnapshot(m[f],n,a,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(yn.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=hi.arr.last(this.snapshotVersions);else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
hi.arr.last(this.snapshotVersions):0}}});hi.ObjectRef=yn;var Je=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Je.referenceGraph=BK;Je.isReference=tD;Je.referencesOfRef=CK;Je.referencesOfId=uD;Je.referencesInArray=FS;Je.moduleOfId=vD;Je.referencesAndClassNamesOfId=DK;Je.classNameOfId=wD;Je.findPathFromToId=EK;Je.lookupPath=FK;Je.modifyProperty=GK;Je.removeUnreachableObjects=Zp;Je.clearDanglingConnections=xD;Je.requiredModulesOfSnapshot=$p;Je.ClassHelper=vp;Je.Path=
Ag;Je.obj=df;Je.arr=Ke;Je.graph=xq;Je.ExpressionSerializer=Sj;Je.referenceGraph=BK;Je.referenceGraph=BK;Je.isReference=tD;Je.isReference=tD;Je.referencesOfRef=CK;Je.referencesOfRef=CK;Je.referencesOfId=uD;Je.referencesOfId=uD;Je.moduleOfId=vD;Je.moduleOfId=vD;Je.referencesAndClassNamesOfId=DK;Je.referencesAndClassNamesOfId=DK;Je.classNameOfId=wD;Je.classNameOfId=wD;Je.findPathFromToId=EK;Je.findPathFromToId=EK;Je.lookupPath=FK;Je.lookupPath=FK;Je.modifyProperty=GK;Je.modifyProperty=GK;Je.removeUnreachableObjects=
Zp;Je.removeUnreachableObjects=Zp;Je.clearDanglingConnections=xD;Je.clearDanglingConnections=xD;Je.defaultExprSerializer=new Je.ExpressionSerializer;Je.requiredModulesOfSnapshot=$p;Je.requiredModulesOfSnapshot=$p;var a2,$v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Ej=a2={};try{var jr="function"==typeof setTimeout?setTimeout:HK}catch(f){jr=HK}try{var kr="function"==typeof clearTimeout?clearTimeout:IK}catch(f){kr=IK}!0;var qt,aq=[],aw=!1,yD=-1;Ej.nextTick=function(f){var m=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];aq.push(new IS(f,m));1!==aq.length||aw||GS(HS)};IS.prototype.run=function(){(this||$v).fun.apply(null,(this||$v).array)};Ej.title="browser";Ej.browser=!0;Ej.env={};Ej.argv=[];Ej.version="";Ej.versions={};Ej.on=bq;Ej.addListener=bq;Ej.once=bq;Ej.off=bq;Ej.removeListener=bq;Ej.removeAllListeners=bq;Ej.emit=bq;Ej.prependListener=bq;Ej.prependOnceListener=bq;Ej.listeners=function(f){return[]};Ej.binding=
function(f){throw Error("process.binding is not supported");};Ej.cwd=function(){return"/"};Ej.chdir=function(f){throw Error("process.chdir is not supported");};Ej.umask=function(){return 0};var oh=za("aV",a2),KS={},JS=!1,MS={},LS=!1,Oo={},NS=!1,PS={},OS=!1,RS={},QS=!1,TS={},SS=!1,VS={},US=!1,XS={},WS=!1,ZS={},YS=!1,aT={},$S=!1,cT={},bT=!1,eT={},dT=!1,gT={},fT=!1,iT={},hT=!1,kT={},jT=!1,mT={},lT=!1,oT={},nT=!1,qT={},pT=!1,sT={},rT=!1,vT={},uT=!1,xT={},wT=!1,AT={},zT=!1,CT={},BT=!1,qga={},rga=qga=function(f){f.prototype[Symbol.iterator]=
function n(){var a=this,d;return $jscomp.generator.createGenerator(n,function(k){1==k.nextAddress&&(d=a.head);if(3!=k.nextAddress)return d?k.yield(d.value,3):k.jumpTo(0);d=d.next;return k.jumpTo(2)})}},b2={};b2=$h;$h.Node=rt;$h.create=$h;$h.prototype.removeNode=function(f){if(f.list!==this)throw Error("removing node which does not belong to this list");var m=f.next,n=f.prev;m&&(m.prev=n);n&&(n.next=m);f===this.head&&(this.head=m);f===this.tail&&(this.tail=n);f.list.length--;f.next=null;f.prev=null;
f.list=null;return m};$h.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var m=this.head;f.list=this;if(f.next=m)m.prev=f;this.head=f;this.tail||(this.tail=f);this.length++}};$h.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var m=this.tail;f.list=this;if(f.prev=m)m.next=f;this.tail=f;this.head||(this.head=f);this.length++}};$h.prototype.push=function(){for(var f=0,m=arguments.length;f<m;f++)this.tail=new rt(arguments[f],this.tail,null,
this),this.head||(this.head=this.tail),this.length++;return this.length};$h.prototype.unshift=function(){for(var f=0,m=arguments.length;f<m;f++)this.head=new rt(arguments[f],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};$h.prototype.pop=function(){if(this.tail){var f=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return f}};$h.prototype.shift=function(){if(this.head){var f=this.head.value;(this.head=this.head.next)?
this.head.prev=null:this.tail=null;this.length--;return f}};$h.prototype.forEach=function(f,m){m=m||this;for(var n=this.head,a=0;null!==n;a++)f.call(m,n.value,a,this),n=n.next};$h.prototype.forEachReverse=function(f,m){m=m||this;for(var n=this.tail,a=this.length-1;null!==n;a--)f.call(m,n.value,a,this),n=n.prev};$h.prototype.get=function(f){for(var m=0,n=this.head;null!==n&&m<f;m++)n=n.next;if(m===f&&null!==n)return n.value};$h.prototype.getReverse=function(f){for(var m=0,n=this.tail;null!==n&&m<f;m++)n=
n.prev;if(m===f&&null!==n)return n.value};$h.prototype.map=function(f,m){m=m||this;for(var n=new $h,a=this.head;null!==a;)n.push(f.call(m,a.value,this)),a=a.next;return n};$h.prototype.mapReverse=function(f,m){m=m||this;for(var n=new $h,a=this.tail;null!==a;)n.push(f.call(m,a.value,this)),a=a.prev;return n};$h.prototype.reduce=function(f,m){var n=this.head;if(1<arguments.length)var a=m;else if(this.head)n=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var d=0;null!==n;d++)a=f(a,n.value,d),n=n.next;return a};$h.prototype.reduceReverse=function(f,m){var n=this.tail;if(1<arguments.length)var a=m;else if(this.tail)n=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==n;d--)a=f(a,n.value,d),n=n.prev;return a};$h.prototype.toArray=function(){for(var f=Array(this.length),m=0,n=this.head;null!==n;m++)f[m]=n.value,n=n.next;return f};$h.prototype.toArrayReverse=function(){for(var f=
Array(this.length),m=0,n=this.tail;null!==n;m++)f[m]=n.value,n=n.prev;return f};$h.prototype.slice=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new $h;if(m<f||0>m)return n;0>f&&(f=0);m>this.length&&(m=this.length);for(var a=0,d=this.head;null!==d&&a<f;a++)d=d.next;for(;null!==d&&a<m;a++,d=d.next)n.push(d.value);return n};$h.prototype.sliceReverse=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new $h;if(m<f||0>m)return n;
0>f&&(f=0);m>this.length&&(m=this.length);for(var a=this.length,d=this.tail;null!==d&&a>m;a--)d=d.prev;for(;null!==d&&a>f;a--,d=d.prev)n.push(d.value);return n};$h.prototype.splice=function(f,m,n){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];f>this.length&&(f=this.length-1);0>f&&(f=this.length+f);d=0;for(var k=this.head;null!==k&&d<f;d++)k=k.next;var b=[];for(d=0;k&&d<m;d++)b.push(k.value),k=this.removeNode(k);null===k&&(k=this.tail);k!==this.head&&k!==this.tail&&(k=k.prev);for(d=0;d<
a.length;d++){var e=a[d];k=k===this.head?new rt(e,null,k,this):new rt(e,k,k.next,this);null===k.next&&(this.tail=k);null===k.prev&&(this.head=k);this.length++}return b};$h.prototype.reverse=function(){for(var f=this.head,m=this.tail,n=f;null!==n;n=n.prev){var a=n.prev;n.prev=n.next;n.next=a}this.head=m;this.tail=f;return this};try{rga($h)}catch(f){}var sga={},tga=b2,vu=Symbol("max"),Im=Symbol("length"),tx=Symbol("lengthCalculator"),SA=Symbol("allowStale"),wu=Symbol("maxAge"),Eq=Symbol("dispose"),
c2=Symbol("noDisposeOnSet"),Mk=Symbol("lruList"),to=Symbol("cache"),d2=Symbol("updateAgeOnGet"),zP=function(){return 1},cl=function(f){"number"===typeof f&&(f={max:f});f||(f={});if(f.max&&("number"!==typeof f.max||0>f.max))throw new TypeError("max must be a non-negative number");this[vu]=f.max||Infinity;var m=f.length||zP;this[tx]="function"!==typeof m?zP:m;this[SA]=f.stale||!1;if(f.maxAge&&"number"!==typeof f.maxAge)throw new TypeError("maxAge must be a number");this[wu]=f.maxAge||0;this[Eq]=f.dispose;
this[c2]=f.noDisposeOnSet||!1;this[d2]=f.updateAgeOnGet||!1;this.reset()};cl.prototype.rforEach=function(f,m){m=m||this;for(var n=this[Mk].tail;null!==n;){var a=n.prev;e2(this,f,n,m);n=a}};cl.prototype.forEach=function(f,m){m=m||this;for(var n=this[Mk].head;null!==n;){var a=n.next;e2(this,f,n,m);n=a}};cl.prototype.keys=function(){return this[Mk].toArray().map(function(f){return f.key})};cl.prototype.values=function(){return this[Mk].toArray().map(function(f){return f.value})};cl.prototype.reset=function(){var f=
this;this[Eq]&&this[Mk]&&this[Mk].length&&this[Mk].forEach(function(m){return f[Eq](m.key,m.value)});this[to]=new Map;this[Mk]=new tga;this[Im]=0};cl.prototype.dump=function(){var f=this;return this[Mk].map(function(m){return MH(f,m)?!1:{k:m.key,v:m.value,e:m.now+(m.maxAge||0)}}).toArray().filter(function(m){return m})};cl.prototype.dumpLru=function(){return this[Mk]};cl.prototype.set=function(f,m,n){if((n=n||this[wu])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var a=n?Date.now():
0,d=this[tx](m,f);if(this[to].has(f)){if(d>this[vu])return ux(this,this[to].get(f)),!1;var k=this[to].get(f).value;if(this[Eq]&&!this[c2])this[Eq](f,k.value);k.now=a;k.maxAge=n;k.value=m;this[Im]+=d-k.length;k.length=d;this.get(f);TA(this);return!0}n=new uga(f,m,d,a,n);if(n.length>this[vu]){if(this[Eq])this[Eq](f,m);return!1}this[Im]+=n.length;this[Mk].unshift(n);this[to].set(f,this[Mk].head);TA(this);return!0};cl.prototype.has=function(f){if(!this[to].has(f))return!1;f=this[to].get(f).value;return!MH(this,
f)};cl.prototype.get=function(f){return AP(this,f,!0)};cl.prototype.peek=function(f){return AP(this,f,!1)};cl.prototype.pop=function(){var f=this[Mk].tail;if(!f)return null;ux(this,f);return f.value};cl.prototype.del=function(f){ux(this,this[to].get(f))};cl.prototype.load=function(f){this.reset();for(var m=Date.now(),n=f.length-1;0<=n;n--){var a=f[n],d=a.e||0;0===d?this.set(a.k,a.v):(d-=m,0<d&&this.set(a.k,a.v,d))}};cl.prototype.prune=function(){var f=this;this[to].forEach(function(m,n){return AP(f,
n,!1)})};$jscomp.global.Object.defineProperties(cl.prototype,{max:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f||0>f)throw new TypeError("max must be a non-negative number");this[vu]=f||Infinity;TA(this)},get:function(){return this[vu]}},allowStale:{configurable:!0,enumerable:!0,set:function(f){this[SA]=!!f},get:function(){return this[SA]}},maxAge:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f)throw new TypeError("maxAge must be a non-negative number");
this[wu]=f;TA(this)},get:function(){return this[wu]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(f){var m=this;"function"!==typeof f&&(f=zP);f!==this[tx]&&(this[tx]=f,this[Im]=0,this[Mk].forEach(function(n){n.length=m[tx](n.value,n.key);m[Im]+=n.length}));TA(this)},get:function(){return this[tx]}},length:{configurable:!0,enumerable:!0,get:function(){return this[Im]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[Mk].length}}});var AP=function(f,m,n){if(m=f[to].get(m)){var a=
m.value;if(MH(f,a)){if(ux(f,m),!f[SA])return}else n&&(f[d2]&&(m.value.now=Date.now()),f[Mk].unshiftNode(m));return a.value}},MH=function(f,m){if(!m||!m.maxAge&&!f[wu])return!1;var n=Date.now()-m.now;return m.maxAge?n>m.maxAge:f[wu]&&n>f[wu]},TA=function(f){if(f[Im]>f[vu])for(var m=f[Mk].tail;f[Im]>f[vu]&&null!==m;){var n=m.prev;ux(f,m);m=n}},ux=function(f,m){if(m){var n=m.value;if(f[Eq])f[Eq](n.key,n.value);f[Im]-=n.length;f[to].delete(n.key);f[Mk].removeNode(m)}},uga=function(f,m,n,a,d){this.key=
f;this.value=m;this.length=n;this.now=a;this.maxAge=d||0},e2=function(f,m,n,a){var d=n.value;MH(f,d)&&(ux(f,n),f[SA]||(d=void 0));d&&m.call(a,d.value,d.key,f)},f2=sga=cl,g2=Object.freeze({__proto__:null,"default":f2}),p7="default"in g2?f2:g2,PK={},DT=!1,QK={},ET=!1,GT={},FT=!1,IT={},HT=!1,KT={},JT=!1,MT={},LT=!1,OT={},NT=!1,QT={},PT=!1,ST={},RT=!1,UT={},TT=!1,WT={},VT=!1,YT={},XT=!1,$T={},ZT=!1,bU={},aU=!1,dU={},cU=!1,fU={},eU=!1,hU={},gU=!1,jU={},iU=!1,lU={},kU=!1,nU={},mU=!1,h2={},i2=!1,UA=function(){if(i2)return h2;
i2=!0;var f=bw();return h2={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:zD().SEMVER_SPEC_VERSION,SemVer:Cl(),compareIdentifiers:JK().compareIdentifiers,rcompareIdentifiers:JK().rcompareIdentifiers,parse:cw(),valid:i7(),clean:t7(),inc:j7(),diff:u7(),major:k7(),minor:v7(),patch:w7(),prerelease:l7(),compare:Rn(),rcompare:m7(),compareLoose:x7(),compareBuild:LK(),sort:y7(),rsort:n7(),gt:CD(),lt:MK(),eq:KK(),neq:tT(),gte:NK(),lte:OK(),cmp:yT(),coerce:o7(),Comparator:DD(),Range:Sn(),satisfies:ED(),
toComparators:z7(),maxSatisfying:q7(),minSatisfying:A7(),minVersion:B7(),validRange:r7(),outside:RK(),gtr:C7(),ltr:D7(),intersects:s7(),simplifyRange:E7(),subset:F7()}}(),Qe=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Qe.normalizeOptions=Oy;Qe.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(m){return"function"===typeof m.snapshotConverter}),after:f.filter(function(m){return"function"===typeof m.objectConverter})}};Qe.runMigrations=function(f,
m,n,a){for(var d=0;d<f.length;d++){var k=f[d];try{n=k[m](n,a)}catch(b){console.error("migration "+k.name+" failed:"),console.error(b)}}return n};Qe.serialize=dw;Qe.deserialize=Py;Qe.deserializeWithMigrations=Qy;Qe.copy=Ry;Qe.ObjectPool=Yh;Qe.serializerVersion="0.1.3";Qe.requiredModulesOfSnapshot=$p;Qe.removeUnreachableObjects=Zp;Qe.clearDanglingConnections=xD;Qe.allPlugins=wp;Qe.semver=UA;Qe.normalizeOptions=Oy;Qe.normalizeOptions=Oy;Qe.majorAndMinorVersionRe=/\.[^\.]+$/;Qe.ObjectRef=yn;Qe.ObjectRef=
yn;Qe.ObjectPool=Yh;Qe.ObjectPool=Yh;Qe.requiredModulesOfSnapshot=$p;Qe.requiredModulesOfSnapshot=$p;Qe.removeUnreachableObjects=Zp;Qe.removeUnreachableObjects=Zp;Qe.serialize=dw;Qe.serialize=dw;Qe.deserialize=Py;Qe.deserialize=Py;Qe.deserializeWithMigrations=Qy;Qe.deserializeWithMigrations=Qy;Qe.copy=Ry;Qe.copy=Ry;Qe.ExpressionSerializer=Sj;Qe.serializeSpec=sm;Qe.deserializeSpec=Qn;Qe.getSerializableClassMeta=hr;Qe.locateClass=Mo;Qe.getClassName=Pn;Qe.ExpressionSerializer=Sj;Qe.ExpressionSerializer=
Sj;Qe.getSerializableClassMeta=hr;Qe.getSerializableClassMeta=hr;Qe.locateClass=Mo;Qe.locateClass=Mo;Qe.serializeSpec=sm;Qe.serializeSpec=sm;Qe.deserializeSpec=Qn;Qe.deserializeSpec=Qn;Qe.getClassName=Pn;Qe.getClassName=Pn;Qe.allPlugins=wp;Qe.allPlugins=wp;var vga=Object.freeze({__proto__:null,normalizeOptions:Oy,ObjectRef:yn,ObjectPool:Yh,requiredModulesOfSnapshot:$p,removeUnreachableObjects:Zp,serialize:dw,deserialize:Py,deserializeWithMigrations:Qy,copy:Ry,ExpressionSerializer:Sj,getSerializableClassMeta:hr,
locateClass:Mo,serializeSpec:sm,deserializeSpec:Qn,getClassName:Pn,allPlugins:wp}),Sg=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");Sg.sanitizeFont=Sy;Sg.pathForBrowserHistory=ew;Sg.addClassMappings=Ty;Sg.morph=$i;Sg.newMorphId=Uy;Sg.lazyInspect=function(f){var m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(System.import("lively.ide/js/inspector.js"),2);m=a.yieldResult;n=m.inspect;Sg.inspect=n;return a.return(n(f))})};Sg.locateClass=
Mo;Sg.string=rg;Sg.parseQuery=tb;Sg.stringifyQuery=Fc;Sg.touchInput=Sg.touchInput||void 0;try{document.createEvent("TouchEvent"),Sg.touchInput=!0}catch(f){Sg.touchInput=!1}var Ll=za("t",Sg.touchInput);Sg.touchInputDevice=Ll;Sg.touchInputDevice=Ll;Sg.touchInputDevice=Ll;Sg.nameToClassMapping=Sg.nameToClassMapping||{};Sg.sanitizeFont=Sy;Sg.sanitizeFont=Sy;Sg.pathForBrowserHistory=ew;Sg.pathForBrowserHistory=ew;Sg.addClassMappings=Ty;Sg.addClassMappings=Ty;Sg.morph=$i;Sg.morph=$i;Sg.newMorphId=Uy;Sg.newMorphId=
Uy;var xu=za("a2",Sg.lazyInspect);Sg.inspect=xu;Sg.inspect=xu;Sg.inspect=xu;var wga={},H7=Object.prototype.toString,BP=wga=Array.isArray||G7,xga={},VA=xga="2",SK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j2={};Xm.NONE=0;Xm.VTEXT=1;Xm.VNODE=2;Xm.WIDGET=3;Xm.PROPS=4;Xm.ORDER=5;Xm.INSERT=6;Xm.REMOVE=7;Xm.THUNK=8;j2=Xm;Xm.prototype.version=VA;Xm.prototype.type="VirtualPatch";var Fq=j2,yga={},WA=yga=function(f){return f&&"VirtualNode"===f.type&&f.version===VA},zga=
{},NH=zga=function(f){return f&&"VirtualText"===f.type&&f.version===VA},Aga={},bs=Aga=function(f){return f&&"Widget"===f.type},Bga={},XA=Bga=function(f){return f&&"Thunk"===f.type},Cga={},I7=WA,J7=NH,K7=bs,k2=Cga=function(f,m){var n=f,a=m;XA(m)&&(a=oU(m,f));XA(f)&&(n=oU(f,null));return{a:n,b:a}},Dga={},OH=Dga=function(f){return"object"===typeof f&&null!==f},Ega={},YA=Ega=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},
l2={},qU=OH,L7=YA;l2=pU;var m2={},O7=BP,gj=Fq,st=WA,vU=NH,GD=bs,FD=XA,N7=k2,M7=l2;m2=sU;var Fga={},Gga=Fga=m2,Hga=Object.freeze({}),n2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Iga={},o2="undefined"!==typeof n2?n2:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var CP=document;else(CP=o2["__GLOBAL_DOCUMENT_CACHE@4"])||(CP=o2["__GLOBAL_DOCUMENT_CACHE@4"]=Hga);var p2=Iga=CP,Jga={},xU=YA,q2=Jga=function(f,m,n){for(var a in m){var d=m[a];if(void 0===
d)wU(f,a,d,n);else if(xU(d))wU(f,a,d,n),d.hook&&d.hook(f,a,n?n[a]:void 0);else if(OH(d)){var k=void 0,b=void 0,e=f,l=a,p=n?n[l]:void 0;if("attributes"===l)for(b in d)k=d[b],void 0===k?e.removeAttribute(b):e.setAttribute(b,k);else if(p&&OH(p)&&yU(p)!==yU(d))e[l]=d;else for(k in OH(e[l])||(e[l]={}),b="style"===l?"":void 0,d)p=d[k],e[l][k]=void 0===p?b:p}else f[a]=d}},Kga={},AU=p2,T7=q2,S7=WA,R7=NH,Q7=bs,P7=k2,r2=Kga=zU,Lga={},Mga=Lga=function(f,m){return bs(f)&&bs(m)?"name"in f&&"name"in m?f.id===m.id:
f.init===m.init:!1},Nga={},U7={},Oga=Nga=function(f,m,n,a){return n&&0!==n.length?(n.sort(V7),BU(f,m,n,a,0)):{}},s2={},W7=bs;s2=function(f,m,n){var a=f.vNode,d=f.patch;switch(f.type){case Fq.REMOVE:return(d=m.parentNode)&&d.removeChild(m),DU(m,a),null;case Fq.INSERT:return d=n.render(d,n),m&&m.appendChild(d),m;case Fq.VTEXT:return 3===m.nodeType?(m.replaceData(0,m.length,d.text),d=m):(a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m)),d;case Fq.WIDGET:return d=(f=Mga(a,d))?d.update(a,m)||
m:n.render(d,n),(n=m.parentNode)&&d!==m&&n.replaceChild(d,m),f||DU(m,a),d;case Fq.VNODE:return a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m),d;case Fq.ORDER:a=m.childNodes;n={};for(var k,b=0;b<d.removes.length;b++)k=d.removes[b],f=a[k.from],k.key&&(n[k.key]=f),m.removeChild(f);b=a.length;for(var e=0;e<d.inserts.length;e++)k=d.inserts[e],f=n[k.key],m.insertBefore(f,k.to>=b++?null:a[k.to]);return m;case Fq.PROPS:return q2(m,d,a.properties),m;case Fq.THUNK:return d=n.patch(m,d,n),m&&d&&
m!==d&&m.parentNode&&m.parentNode.replaceChild(d,m),d;default:return m}};var t2={},$7=p2,a8=BP,Y7=r2,Z7=Oga,FU=s2;t2=EU;var Pga={},Qga=Pga=t2,Po="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,u2={},e8=WA,f8=bs,g8=XA,d8=YA;u2=WK;var b8={},c8=[];WK.prototype.version=VA;WK.prototype.type="VirtualNode";var DP=u2,h8="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,v2={};v2=XK;XK.prototype.version=VA;XK.prototype.type="VirtualText";var EP=
v2,w2={};w2=function(f){var m=String.prototype.split,n=/()??/.exec("")[1]===f;return function(a,d,k){if("[object RegExp]"!==Object.prototype.toString.call(d))return m.call(a,d,k);var b=[],e=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),l=0;d=new RegExp(d.source,e+"g");var p,q;a+="";n||(p=new RegExp("^"+d.source+"$(?!\\s)",e));for(k=k===f?4294967295:k>>>0;q=d.exec(a);){e=q.index+q[0].length;if(e>l){b.push(a.slice(l,q.index));!n&&1<q.length&&q[0].replace(p,function(){for(var w=
1;w<arguments.length-2;w++)arguments[w]===f&&(q[w]=f)});1<q.length&&q.index<a.length&&Array.prototype.push.apply(b,q.slice(1));var u=q[0].length;l=e;if(b.length>=k)break}d.lastIndex===q.index&&d.lastIndex++}l===a.length?(u||!d.test(""))&&b.push(""):b.push(a.slice(l));return b.length>k?b.slice(0,k):b}}();var Rga={},Sga=w2,Tga=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Uga=/^\.|#/,Vga=Rga=function(f,m){if(!f)return"DIV";var n=!m.hasOwnProperty("id");f=Sga(f,Tga);var a=null;Uga.test(f[1])&&(a="DIV");var d,
k;for(k=0;k<f.length;k++)if(d=f[k]){var b=d.charAt(0);if(a)if("."===b){var e=e||[];e.push(d.substring(1,d.length))}else"#"===b&&n&&(m.id=d.substring(1,d.length));else a=d}e&&(m.className&&e.push(m.className),m.className=e.join(" "));return m.namespace?a:a.toUpperCase()},x2={};x2=ID;ID.prototype.hook=function(f,m){f[m]!==this.value&&(f[m]=this.value)};var Wga=x2,y2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z2={},FP="undefined"!==typeof window?window:"undefined"!==
typeof y2?y2:{};z2=function(f,m){return f in FP?FP[f]:FP[f]=m};var A2={},B2=z2;A2=function(f,m,n){var a="__INDIVIDUAL_ONE_VERSION_"+f,d=B2(a+"_ENFORCE_SINGLETON",m);if(d!==m)throw Error("Can only have one copy of "+f+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+m);return B2(a,n)};var C2={};A2("ev-store","7");C2=function(f){var m=f["__EV_STORE_KEY@7"];m||(m=f["__EV_STORE_KEY@7"]={});return m};var D2={},E2=C2;D2=Vy;Vy.prototype.hook=function(f,m){f=E2(f);m=
m.substr(3);f[m]=this.value};Vy.prototype.unhook=function(f,m){f=E2(f);m=m.substr(3);f[m]=void 0};var F2={},JU=BP,HU=EP,i8=WA,j8=NH,k8=bs,l8=XA,Xga=D2;F2=function(f,m,n){var a=[],d;if(d=!n)d="string"===typeof m||JU(m)||IU(m);if(d){n=m;var k={}}k=k||m||{};f=Vga(f,k);if(k.hasOwnProperty("key")){var b=k.key;k.key=void 0}if(k.hasOwnProperty("namespace")){var e=k.namespace;k.namespace=void 0}"INPUT"!==f||e||!k.hasOwnProperty("value")||void 0===k.value||YA(k.value)||(k.value=Wga(k.value));m=k;for(var l in m)m.hasOwnProperty(l)&&
(d=m[l],YA(d)||"ev-"===l.substr(0,3)&&(m[l]=Xga(d)));void 0!==n&&null!==n&&GU(n,a,f,k);return new DP(f,k,a,b,e)};var Yga={},Zga=Yga=F2,G2={};G2=r2;var $ga={},ZA=$ga={diff:Gga,patch:Qga,h:Zga,create:G2,VNode:DP,VText:EP},aha={},bha=aha={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},H2={};H2={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var cha={},n8=DP,LU=EP,GP,MU=bha,m8=H2,dha=cha=function(f,
m){if(!f)return YK(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");GP=GP||new DOMParser;f=GP.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return YK(f,m)},eha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,HP={};!function(f,m){HP?HP=m():(this||eha)[f]=m()}("bowser",function(){function f(k){function b(P){return(P=k.match(P))&&1<P.length&&P[1]||""}function e(P){return(P=k.match(P))&&1<P.length&&P[2]||""}var l=b(/(ipod|iphone|ipad)/i).toLowerCase(),p=!/like android/i.test(k)&&/android/i.test(k),q=/nexus\s*[0-6]\s*/i.test(k),u=!q&&/nexus\s*[0-9]+/i.test(k),
w=/CrOS/.test(k),y=/silk/i.test(k),A=/sailfish/i.test(k),C=/tizen/i.test(k),E=/(web|hpw)os/i.test(k),L=/windows phone/i.test(k),I=!L&&/windows/i.test(k),V=!l&&!y&&/macintosh/i.test(k),T=!p&&!A&&!C&&!E&&/linux/i.test(k),Y=b(/edge\/(\d+(\.\d+)?)/i),na=b(/version\/(\d+(\.\d+)?)/i),Ba=/tablet/i.test(k),F=!Ba&&/[^-]mobi/i.test(k),W=/xbox/i.test(k);/opera|opr|opios/i.test(k)?w={name:"Opera",opera:!0,version:na||b(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(k)?w={name:"Opera Coast",coast:!0,
version:na||b(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(k)?w={name:"Yandex Browser",yandexbrowser:!0,version:na||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(k)?w={name:"UC Browser",ucbrowser:!0,version:b(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(k)?w={name:"Maxthon",maxthon:!0,version:b(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(k)?w={name:"Epiphany",epiphany:!0,version:b(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(k)?w={name:"Puffin",puffin:!0,
version:b(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(k)?w={name:"Sleipnir",sleipnir:!0,version:b(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(k)?w={name:"K-Meleon",kMeleon:!0,version:b(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:L?(w={name:"Windows Phone",windowsphone:!0},Y?(w.msedge=!0,w.version=Y):(w.msie=!0,w.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(k)?w={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:w?w={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(k)?w={name:"Microsoft Edge",msedge:!0,version:Y}:/vivaldi/i.test(k)?w={name:"Vivaldi",vivaldi:!0,version:b(/vivaldi\/(\d+(\.\d+)?)/i)||na}:A?w={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(k)?w={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(k)?(w={name:"Firefox",firefox:!0,version:b(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(k)&&(w.firefoxos=!0)):y?w={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(k)?w={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(k)?w={name:"SlimerJS",slimer:!0,version:b(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(k)||/rim\stablet/i.test(k)?w={name:"BlackBerry",blackberry:!0,version:na||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:E?(w={name:"WebOS",webos:!0,version:na||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(k)&&(w.touchpad=!0)):/bada/i.test(k)?w={name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:C?w={name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||na}:/qupzilla/i.test(k)?w={name:"QupZilla",qupzilla:!0,version:b(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||na}:/chromium/i.test(k)?w={name:"Chromium",chromium:!0,version:b(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||na}:/chrome|crios|crmo/i.test(k)?w={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
p?w={name:"Android",version:na}:/safari|applewebkit/i.test(k)?(w={name:"Safari",safari:!0},na&&(w.version=na)):l?(w={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},na&&(w.version=na)):w=/googlebot/i.test(k)?{name:"Googlebot",googlebot:!0,version:b(/googlebot\/(\d+(\.\d+))/i)||na}:{name:b(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)};!w.msedge&&/(apple)?webkit/i.test(k)?(/(apple)?webkit\/537\.36/i.test(k)?(w.name=w.name||"Blink",w.blink=!0):(w.name=w.name||"Webkit",w.webkit=!0),!w.version&&na&&(w.version=
na)):!w.opera&&/gecko\//i.test(k)&&(w.name=w.name||"Gecko",w.gecko=!0,w.version=w.version||b(/gecko\/(\d+(\.\d+)?)/i));w.msedge||!p&&!w.silk?l?(w[l]=!0,w.ios=!0):V?w.mac=!0:W?w.xbox=!0:I?w.windows=!0:T&&(w.linux=!0):w.android=!0;I="";w.windowsphone?I=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(I=b(/os (\d+([_\s]\d+)*) like mac os x/i),I=I.replace(/[_\s]/g,".")):p?I=b(/android[ \/-](\d+(\.\d+)*)/i):w.webos?I=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):w.blackberry?I=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
w.bada?I=b(/bada\/(\d+(\.\d+)*)/i):w.tizen&&(I=b(/tizen[\/\s](\d+(\.\d+)*)/i));I&&(w.osversion=I);I=I.split(".")[0];if(Ba||u||"ipad"==l||p&&(3==I||4<=I&&!F)||w.silk)w.tablet=!0;else if(F||"iphone"==l||"ipod"==l||p||q||w.blackberry||w.webos||w.bada)w.mobile=!0;w.msedge||w.msie&&10<=w.version||w.yandexbrowser&&15<=w.version||w.vivaldi&&1<=w.version||w.chrome&&20<=w.version||w.firefox&&20<=w.version||w.safari&&6<=w.version||w.opera&&10<=w.version||w.ios&&w.osversion&&6<=w.osversion.split(".")[0]||w.blackberry&&
10.1<=w.version||w.chromium&&20<=w.version?w.a=!0:w.msie&&10>w.version||w.chrome&&20>w.version||w.firefox&&20>w.version||w.safari&&6>w.version||w.opera&&10>w.version||w.ios&&w.osversion&&6>w.osversion.split(".")[0]||w.chromium&&20>w.version?w.c=!0:w.x=!0;return w}function m(k,b){var e=[],l;if(Array.prototype.map)return Array.prototype.map.call(k,b);for(l=0;l<k.length;l++)e=b(k[l]);return e}function n(k){var b=Math.max(k[0].split(".").length,k[1].split(".").length);for(k=m(k,function(e){var l=b-e.split(".").length;
e+=Array(l+1).join(".0");return m(e.split("."),function(p){return Array(20-p.length).join("0")+p}).reverse()});0<=--b;){if(k[0][b]>k[1][b])return 1;if(k[0][b]===k[1][b]){if(0===b)return 0}else return-1}}function a(k,b,e){var l=d;"string"===typeof b&&(e=b,b=void 0);void 0===b&&(b=!1);e&&(l=f(e));e=""+l.version;for(var p in k)if(k.hasOwnProperty(p)&&l[p])return 0>n([e,k[p]]);return b}var d=f("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(k){for(var b=0;b<k.length;++b){var e=
k[b];if("string"===typeof e&&e in d)return!0}return!1};d.isUnsupportedBrowser=a;d.compareVersions=n;d.check=function(k,b,e){return!a(k,b,e)};d._detect=f;return d});var zn=HP,Tj=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Tj.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var m={};if(f)for(var n=0;n<f.length;n++){var a=f[n].split("="),d=a[0],k=!0;if(1<a.length&&
(k=decodeURIComponent(a.slice(1).join("=")),k.match(/^(true|false|null|[0-9"[{].*)$/)))try{k=JSON.parse(k)}catch(b){"["===k[0]&&(k=k.slice(1,-1).split(","))}m[d]=k}return m};Tj.Rectangle=Od;Tj.Color=of;Tj.bowser=zn;Tj.joinPath=Uf;Tj.isMac=!!Tj.bowser.mac;Tj.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});Tj.config={onloadURLQuery:Tj.parseURLQuery(),
defaultShadow:{fast:!0,distance:18,blur:30,color:Tj.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||
f.includes("node_modules")||f.includes("custom-npm-modules")||f.includes("mocha-es6")||f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},
{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",
mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},
{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",
offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Tj.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:Tj.joinPath(Tj.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Tj.joinPath(Tj.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:Tj.joinPath(Tj.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")}};var ok=za("g",Tj.config);Tj.default=ok;var Cg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
Cg.styleProps=Wy;Cg.canBePromotedToCompositionLayer=JD;Cg.addTransform=ZK;Cg.addTransformOrigin=function(f,m){if(f=f.origin)m.transformOrigin=f.x+"px "+f.y+"px"};Cg.addDisplay=function(f,m){f=f.visible;null!=f&&(m.display=f?"":"none")};Cg.addBorderRadius=function(f,m){var n=f.borderRadiusLeft,a=f.borderRadiusRight,d=f.borderRadiusBottom;f=f.borderRadiusTop;m.borderRadius=f+"px "+f+"px "+d+"px "+d+"px / "+n+"px "+a+"px "+a+"px "+n+"px"};Cg.addBorder=function(f,m){var n=f.borderWidthLeft,a=f.borderColorLeft,
d=f.borderStyleLeft,k=f.borderWidthRight,b=f.borderColorRight,e=f.borderStyleRight,l=f.borderColor,p=f.borderWidthBottom,q=f.borderColorBottom,u=f.borderStyleBottom,w=f.borderWidthTop,y=f.borderColorTop;f=f.borderStyleTop;var A=function(C){return Cg.bowser.safari?Cg.string.camelize(C):C};m[A("border-left-style")]=""+d;m[A("border-right-style")]=""+e;m[A("border-bottom-style")]=""+u;m[A("border-top-style")]=""+f;m[A("border-left-width")]=n+"px";m[A("border-right-width")]=k+"px";m[A("border-bottom-width")]=
p+"px";m[A("border-top-width")]=w+"px";m[A("border-top-color")]=y?y.toString():"transparent";m[A("border-right-color")]=b?b.toString():"transparent";m[A("border-bottom-color")]=q?q.toString():"transparent";m[A("border-left-color")]=a?a.toString():"transparent";l&&l.isGradient&&(m["border-image"]=l.toString())};Cg.addFill=function(f,m){(f=f.fill)?f.isGradient?m.backgroundImage=f.toString():m.background=f.toString():m.background=Cg.Color.transparent.toString()};Cg.addExtentStyle=function(f,m){f=f.extent;
m.width=f.x+"px";m.height=f.y+"px"};Cg.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Cg.addShadowStyle=function(f,m){f.isSvgMorph||f.isImage?m.filter=Cg.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?m.boxShadow=f?f.toCss():"none":m.filter=f?f.toFilterCss():""};Cg.addSvgAttributes=Xy;Cg.getSvgVertices=fw;Cg.addPathAttributes=Yy;Cg.addSvgBorderStyle=function(f,m){var n=f.borderStyle.valueOf();"dashed"===n?(f=f.borderWidth.valueOf(),m["stroke-dasharray"]=1.61*f+" "+f):
"dotted"===n&&(m["stroke-dasharray"]="1 "+2*f.borderWidth.valueOf(),m["stroke-linecap"]="round",m["stroke-linejoin"]="round");return m};Cg.Color=of;Cg.string=rg;Cg.bowser=zn;Cg.styleProps=Wy;Cg.styleProps=Wy;Cg.canBePromotedToCompositionLayer=JD;Cg.canBePromotedToCompositionLayer=JD;Cg.addTransform=ZK;Cg.addTransform=ZK;Cg.addSvgAttributes=Xy;Cg.addSvgAttributes=Xy;Cg.getSvgVertices=fw;Cg.getSvgVertices=fw;Cg.addPathAttributes=Yy;Cg.addPathAttributes=Yy;var ae=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
ae.defaultStyle=gw;ae.MorphAfterRenderHook=function(f,m){this.morph=f;this.renderer=m};ae.Animation=function(f){this.morph=f};ae.SvgAnimation=$K;ae.defaultAttributes=hw;ae.svgAttributes=KD;ae.pathAttributes=LD;ae.renderGradient=MD;ae.initDOMState=function(f,m){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return ae.promise.delay(500)}).then(function(){return m.env.fontMetric&&m.env.fontMetric.reset()}).then(function(){return m.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var a=
(n.metadata||{}).serializationInfo;a&&a.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};ae.renderMorph=ND;ae.renderSubTree=OD;ae.renderRootMorph=PD;ae.vdom=ZA;ae.parser=dha;ae.num=Dj;ae.obj=df;ae.arr=Ke;ae.properties=gm;ae.promise=Vf;ae.Color=of;ae.RadialGradient=Kl;ae.pt=bh;ae.Point=tf;ae.LinearGradient=nk;ae.rect=wk;ae.config=ok;ae.styleProps=Wy;ae.addSvgAttributes=Xy;ae.addPathAttributes=Yy;ae.bowser=zn;var PH=ae.vdom;ae.h=PH.h;ae.diff=PH.diff;ae.patch=
PH.patch;ae.createNode=PH.create;ae.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ae.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ae.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var An=za("br",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=m.hasOwnProperty("ShadowObject")&&"function"===typeof m.ShadowObject?m.ShadowObject:m.ShadowObject=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ae.obj.isBoolean(a)&&(a=ae.config.defaultShadow);var d=a;a=d.rotation;var k=d.distance,
b=d.blur,e=d.color,l=d.morph,p=d.inset,q=d.spread;d=d.fast;this.rotation=ae.obj.isNumber(a)?a:45;this.distance=ae.obj.isNumber(k)?k:2;this.blur=ae.obj.isNumber(b)?b:6;this.inset=p||!1;this.spread=q||0;this.color=e||ae.Color.gray.darker();this.morph=l;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(a){this._inset=a;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(a){this._distance=a;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(a){this._blur=a;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(a){this._rotation=a;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(a){this._color=a;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var a=this.toJson(),d=a.distance,k=a.rotation,b=a.color,e=a.inset,l=a.blur,p=a.spread;a=a.fast;b=b.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:k,color:b,inset:e,blur:l,spread:p,fast:a}).map(function(q){var u=$jscomp.makeIterator(q);q=u.next().value;u=u.next().value;return q+":"+u})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(a){return new ae.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},a))}},{key:"toCss",value:function(){var a=this.color,d=this.inset,k=this.blur,b=this.spread,e=ae.Point.polar(this.distance,ae.num.toRadians(this.rotation)),l=e.y;return(d?"inset":"")+" "+a.toString()+" "+e.x.toFixed(2)+"px "+l.toFixed(2)+"px "+k+"px "+b+"px"}},{key:"toJson",value:function(){return ae.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(a){return!!a&&ae.obj.equals(this.toJson(),a.toJson())}},{key:"toFilterCss",value:function(){var a=this.blur,d=this.color,k=ae.Point.polar(this.distance,ae.num.toRadians(this.rotation)),b=k.x;k=k.y;a=ae.bowser.chrome?a/3:a/2;return"drop-shadow("+b.toFixed(2)+"px "+k.toFixed(2)+"px "+a.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(a,d){return new ae.ShadowObject({distance:ae.num.interpolate(a,this.distance,d.distance),rotation:ae.num.interpolate(a,this.rotation,
d.rotation),color:this.color.interpolate(a,d.color),blur:ae.num.interpolate(a,this.blur,d.blur),spread:ae.num.interpolate(a,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],m,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));ae.ShadowObject=An;ae.ShadowObject=An;ae.ShadowObject=An;ae.defaultStyle=gw;ae.defaultStyle=gw;ae.MorphAfterRenderHook.prototype.hook=function(f,m,n,a){var d=this;a=void 0===a?0:a;var k=!!f.parentNode;k&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f));k||3<a?(this.morph._rendering=!1,this.morph.onAfterRender(f)):
(a++,setTimeout(function(){return d.hook(f,m,n,a)},20*a))};ae.MorphAfterRenderHook.prototype.updateScroll=function(f,m,n){var a=this,d=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(m&&d)return d.then(function(){return a.updateScroll(f,m,!0)});if(!f.isWorld&&m){d=f.scroll;var k=d.x,b=d.y;if(!f._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var e=f.isText&&f.viewState.fastScroll?m.querySelector(".scrollLayer"):m;!f._skipScrollUpdate&&e&&(e.scrollTop!==
b&&(e.scrollTop=b),e.scrollLeft!==k&&(e.scrollLeft=k),!n&&requestAnimationFrame(function(){e.scrollTop!==b&&(e.scrollTop=b);e.scrollLeft!==k&&(e.scrollLeft=k)},f.id))}}};ae.MorphAfterRenderHook.prototype.unhook=function(f,m){};ae.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,m){var n=this;f.submorphs.forEach(function(a){a.isClip()&&n.updateScroll(a,m.getNodeForMorph(a));n.updateScrollOfSubmorphs(a,m)})};ae.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};
ae.SvgAnimation=$K;ae.SvgAnimation=$K;ae.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};ae.defaultAttributes=hw;ae.defaultAttributes=hw;ae.svgAttributes=KD;ae.svgAttributes=KD;ae.pathAttributes=LD;ae.pathAttributes=LD;ae.renderGradient=MD;ae.renderGradient=MD;ae.renderMorph=ND;ae.renderMorph=ND;ae.renderSubTree=OD;ae.renderSubTree=OD;ae.renderRootMorph=PD;ae.renderRootMorph=PD;var fc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,IP={};!function(f,m){m(IP)}(IP,function(f){function m(ka){return 10===ka||13===ka||8232===ka||8233===ka||32===ka||9===ka||11===ka||12===ka||160===ka||5760<=ka&&0<=$A.indexOf(ka)}function n(ka){return 48<=ka&&57>=ka}function a(ka){(this||fc).index=0;(this||fc).path=ka;(this||fc).max=ka.length;(this||fc).result=[];(this||fc).param=0;(this||fc).err="";(this||fc).segmentStart=0;(this||fc).data=[]}function d(ka){for(;ka.index<ka.max&&m(ka.path.charCodeAt(ka.index));)ka.index++}function k(ka){var Ia,
Da=ka.index,Na=Da,ab=ka.max,Lb=!1,Ra=!1,Fb=!1,rb=!1;if(Na>=ab)return void(ka.err="SvgPath: missed param (at pos "+Na+")");if(Ia=ka.path.charCodeAt(Na),43!==Ia&&45!==Ia||(Na++,Ia=Na<ab?ka.path.charCodeAt(Na):0),!n(Ia)&&46!==Ia)return void(ka.err="SvgPath: param should start with 0..9 or `.` (at pos "+Na+")");if(46!==Ia){if(Lb=48===Ia,Na++,Ia=Na<ab?ka.path.charCodeAt(Na):0,Lb&&Na<ab&&Ia&&n(Ia))return void(ka.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Da+")");for(;Na<ab&&
n(ka.path.charCodeAt(Na));)Na++,Ra=!0;Ia=Na<ab?ka.path.charCodeAt(Na):0}if(46===Ia){rb=!0;for(Na++;n(ka.path.charCodeAt(Na));)Na++,Fb=!0;Ia=Na<ab?ka.path.charCodeAt(Na):0}if(101===Ia||69===Ia){if(rb&&!Ra&&!Fb||(Na++,Ia=Na<ab?ka.path.charCodeAt(Na):0,43!==Ia&&45!==Ia||Na++,!(Na<ab&&n(ka.path.charCodeAt(Na)))))return void(ka.err="SvgPath: invalid float exponent (at pos "+Na+")");for(;Na<ab&&n(ka.path.charCodeAt(Na));)Na++}ka.index=Na;ka.param=parseFloat(ka.path.slice(Da,Na))+0}function b(){if(!((this||
fc)instanceof b))return new b;(this||fc).queue=[];(this||fc).cache=null}function e(ka,Ia,Da,Na){var ab=(ka*Da+Ia*Na)/(Math.sqrt(ka*ka+Ia*Ia)*Math.sqrt(ka*ka+Ia*Ia));return 1<ab&&(ab=1),-1>ab&&(ab=-1),(0>ka*Na-Ia*Da?-1:1)*Math.acos(ab)}function l(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb,uc){var wb=uc*(ka-Da)/2+rb*(Ia-Na)/2,kd=-rb*(ka-Da)/2+uc*(Ia-Na)/2,Fd=Ra*Ra,Fe=Fb*Fb,Ge=wb*wb,$d=kd*kd,He=Fd*Fe-Fd*$d-Fe*Ge;0>He&&(He=0);He=Math.sqrt(He/(Fd*$d+Fe*Ge))*(ab===Lb?-1:1);ab=He*Ra/Fb*kd;He=He*-Fb/Ra*wb;ka=uc*ab-rb*He+
(ka+Da)/2;Ia=rb*ab+uc*He+(Ia+Na)/2;Na=(wb-ab)/Ra;rb=(kd-He)/Fb;Ra=(-wb-ab)/Ra;kd=(-kd-He)/Fb;Fb=e(1,0,Na,rb);kd=e(Na,rb,Ra,kd);return 0===Lb&&0<kd&&(kd-=aB),1===Lb&&0>kd&&(kd+=aB),[ka,Ia,Fb,kd]}function p(ka,Ia){var Da=4/3*Math.tan(Ia/4),Na=Math.cos(ka),ab=Math.sin(ka),Lb=Math.cos(ka+Ia);ka=Math.sin(ka+Ia);return[Na,ab,Na-ab*Da,ab+Na*Da,Lb+ka*Da,ka-Lb*Da,Lb,ka]}function q(ka,Ia,Da){if(!((this||fc)instanceof q))return new q(ka,Ia,Da);(this||fc).rx=ka;(this||fc).ry=Ia;(this||fc).ax=Da}function u(ka){if(!((this||
fc)instanceof u))return new u(ka);ka=new a(ka);var Ia=ka.max;for(d(ka);ka.index<Ia&&!ka.err.length;)a:{var Da,Na=void 0,ab=ka,Lb=ab.max;ab.segmentStart=ab.index;var Ra=ab.path.charCodeAt(ab.index);b:{switch(32|Ra){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:Ra=!0;break b}Ra=!1}if(Ra){if(Na=cs[ab.path[ab.index].toLowerCase()],ab.index++,d(ab),ab.data=[],Na)for(Ra=!1;;){for(Da=Na;0<Da;Da--){if(k(ab),ab.err.length)break a;ab.data.push(ab.param);d(ab);
Ra=!1;ab.index<Lb&&44===ab.path.charCodeAt(ab.index)&&(ab.index++,d(ab),Ra=!0)}if(!Ra){if(ab.index>=ab.max)break;Da=ab.path.charCodeAt(ab.index);if(!(48<=Da&&57>=Da||43===Da||45===Da||46===Da))break}}Lb=ab;ab=Lb.path[Lb.segmentStart];Na=ab.toLowerCase();Ra=Lb.data;if("m"===Na&&2<Ra.length&&(Lb.result.push([ab,Ra[0],Ra[1]]),Ra=Ra.slice(2),Na="l",ab="m"===ab?"l":"L"),"r"===Na)Lb.result.push([ab].concat(Ra));else for(;Ra.length>=cs[Na]&&(Lb.result.push([ab].concat(Ra.splice(0,cs[Na]))),cs[Na]););}else ab.err=
"SvgPath: bad command "+ab.path[ab.index]+" (at pos "+ab.index+")"}ka=(ka.err.length?ka.result=[]:ka.result.length&&(0>"mM".indexOf(ka.result[0][0])?(ka.err="SvgPath: string should start with `M` or `m`",ka.result=[]):ka.result[0][0]="M"),{err:ka.err,segments:ka.result});(this||fc).segments=ka.segments;(this||fc).err=ka.err;(this||fc).__stack=[]}function w(ka,Ia,Da,Na,ab,Lb,Ra,Fb){(this||fc).a={x:ka,y:Ia};(this||fc).b={x:Da,y:Na};(this||fc).c={x:ab,y:Lb};(this||fc).d={x:Ra,y:Fb};null!==Ra&&void 0!==
Ra&&null!==Fb&&void 0!==Fb?((this||fc).getArcLength=T,(this||fc).getPoint=L,(this||fc).getDerivative=A):((this||fc).getArcLength=I,(this||fc).getPoint=E,(this||fc).getDerivative=y);this.init()}function y(ka,Ia,Da){return{x:2*(1-Da)*(ka[1]-ka[0])+2*Da*(ka[2]-ka[1]),y:2*(1-Da)*(Ia[1]-Ia[0])+2*Da*(Ia[2]-Ia[1])}}function A(ka,Ia,Da){return E([3*(ka[1]-ka[0]),3*(ka[2]-ka[1]),3*(ka[3]-ka[2])],[3*(Ia[1]-Ia[0]),3*(Ia[2]-Ia[1]),3*(Ia[3]-Ia[2])],Da)}function C(ka,Ia,Da,Na,ab){for(var Lb=1,Ra=ka/Ia,Fb=(ka-Da(Na,
ab,Ra))/Ia;.001<Lb;){var rb=Da(Na,ab,Ra+Fb),uc=Da(Na,ab,Ra-Fb);rb=Math.abs(ka-rb)/Ia;uc=Math.abs(ka-uc)/Ia;rb<Lb?(Lb=rb,Ra+=Fb):uc<Lb?(Lb=uc,Ra-=Fb):Fb/=2}return Ra}function E(ka,Ia,Da){return{x:(1-Da)*(1-Da)*ka[0]+2*(1-Da)*Da*ka[1]+Da*Da*ka[2],y:(1-Da)*(1-Da)*Ia[0]+2*(1-Da)*Da*Ia[1]+Da*Da*Ia[2]}}function L(ka,Ia,Da){return{x:(1-Da)*(1-Da)*(1-Da)*ka[0]+3*(1-Da)*(1-Da)*Da*ka[1]+3*(1-Da)*Da*Da*ka[2]+Da*Da*Da*ka[3],y:(1-Da)*(1-Da)*(1-Da)*Ia[0]+3*(1-Da)*(1-Da)*Da*Ia[1]+3*(1-Da)*Da*Da*Ia[2]+Da*Da*Da*Ia[3]}}
function I(ka,Ia,Da){void 0===Da&&(Da=1);var Na=ka[0]-2*ka[1]+ka[2],ab=Ia[0]-2*Ia[1]+Ia[2],Lb=2*ka[1]-2*ka[0],Ra=2*Ia[1]-2*Ia[0],Fb=4*(Na*Na+ab*ab);if(0===Fb)return Da*Math.sqrt(Math.pow(ka[2]-ka[0],2)+Math.pow(Ia[2]-Ia[0],2));ka=4*(Na*Lb+ab*Ra)/(2*Fb);Da+=ka;Lb=(Lb*Lb+Ra*Ra)/Fb-ka*ka;return Math.sqrt(Fb)/2*(Da*Math.sqrt(Da*Da+Lb)-ka*Math.sqrt(ka*ka+Lb)+Lb*Math.log(Math.abs((Da+Math.sqrt(Da*Da+Lb))/(ka+Math.sqrt(ka*ka+Lb)))))}function V(ka,Ia,Da){var Na,ab=Da.length-1;if(0===ab)return 0;if(0===ka){for(Na=
ka=0;Na<=ab;Na++)ka+=fha[ab][Na]*Math.pow(1-Ia,ab-Na)*Math.pow(Ia,Na)*Da[Na];return ka}var Lb=Array(ab);for(Na=0;Na<ab;Na++)Lb[Na]=ab*(Da[Na+1]-Da[Na]);return V(ka-1,Ia,Lb)}function T(ka,Ia,Da){var Na,ab;void 0===Da&&(Da=1);Da/=2;for(ab=Na=0;20>ab;ab++){var Lb=Da*gha[20][ab]+Da;var Ra=hha[20][ab],Fb=Ia,rb=Lb;Lb=V(1,rb,ka);Fb=V(1,rb,Fb);Na+=Ra*Math.sqrt(Lb*Lb+Fb*Fb)}return Da*Na}function Y(ka,Ia,Da,Na){var ab=ka*Da+Ia*Na;return 1<ab&&(ab=1),-1>ab&&(ab=-1),(0>ka*Na-Ia*Da?-1:1)*Math.acos(ab)}function na(ka,
Ia,Da,Na,ab,Lb,Ra,Fb,rb,uc){var wb=uc*(ka-Da)/2+rb*(Ia-Na)/2,kd=-rb*(ka-Da)/2+uc*(Ia-Na)/2,Fd=Ra*Ra,Fe=Fb*Fb,Ge=wb*wb,$d=kd*kd,He=Fd*Fe-Fd*$d-Fe*Ge;0>He&&(He=0);He=Math.sqrt(He/(Fd*$d+Fe*Ge))*(ab===Lb?-1:1);ab=He*Ra/Fb*kd;He=He*-Fb/Ra*wb;ka=uc*ab-rb*He+(ka+Da)/2;Ia=rb*ab+uc*He+(Ia+Na)/2;Na=(wb-ab)/Ra;rb=(kd-He)/Fb;Ra=(-wb-ab)/Ra;kd=(-kd-He)/Fb;Fb=Y(1,0,Na,rb);kd=Y(Na,rb,Ra,kd);return 0===Lb&&0<kd&&(kd-=bB),1===Lb&&0>kd&&(kd+=bB),[ka,Ia,Fb,kd]}function Ba(ka,Ia){var Da=4/3*Math.tan(Ia/4),Na=Math.cos(ka),
ab=Math.sin(ka),Lb=Math.cos(ka+Ia);ka=Math.sin(ka+Ia);return[Na,ab,Na-ab*Da,ab+Na*Da,Lb+ka*Da,ka-Lb*Da,Lb,ka]}function F(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb){var uc=0,wb=[],kd=[];iha(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb).forEach(function(Fd){Fd=new uo(Fd[0],Fd[1],Fd[2],Fd[3],Fd[4],Fd[5],Fd[6],Fd[7]);var Fe=Fd.getTotalLength();uc+=Fe;wb.push(Fe);kd.push(Fd)});(this||fc).length=uc;(this||fc).partialLengths=wb;(this||fc).curves=kd}function W(ka,Ia,Da,Na){(this||fc).x0=ka;(this||fc).x1=Ia;(this||fc).y0=Da;(this||fc).y1=
Na}function P(ka,Ia){return Math.sqrt((ka[0]-Ia[0])*(ka[0]-Ia[0])+(ka[1]-Ia[1])*(ka[1]-Ia[1]))}function S(ka,Ia,Da){return[ka[0]+(Ia[0]-ka[0])*Da,ka[1]+(Ia[1]-ka[1])*Da]}function fa(ka,Ia,Da){var Na=ka.map(function(ab,Lb){return aa(ab,Ia[Lb])});return function(ab){var Lb=Na.map(function(Ra){return Ra(ab)});return Da?qa(Lb):Lb}}function aa(ka,Ia){return function(Da){return ka.map(function(Na,ab){return Na+Da*(Ia[ab]-Na)})}}function oa(ka){return"number"==typeof ka&&isFinite(ka)}function Va(ka){var Ia;
a:{for(Ia=0;Ia<ka.length-2;Ia++){var Da=ka[Ia],Na=ka[Ia+1],ab=ka[Ia+2];if(Da[0]*(Na[1]-ab[1])+Na[0]*(ab[1]-Da[1])+ab[0]*(Da[1]-Na[1])){Ia=!0;break a}}Ia=!1}if(Ia){ab=-1;var Lb=ka.length,Ra=0,Fb=0,rb=ka[Lb-1];for(Ia=0;++ab<Lb;)Da=rb,rb=ka[ab],Ia+=Na=Da[0]*rb[1]-rb[0]*Da[1],Ra+=(Da[0]+rb[0])*Na,Fb+=(Da[1]+rb[1])*Na;ka=(Ia*=3,[Ra/Ia,Fb/Ia])}else ka=[(ka[0][0]+ka[ka.length-1][0])/2,(ka[0][1]+ka[ka.length-1][1])/2];return ka}function lb(ka){return ka.toString().split("M").map(function(Ia,Da){return Ia=
Ia.trim(),Da&&Ia?"M"+Ia:Ia}).filter(function(Ia){return Ia})}function qa(ka){return"M"+ka.join("L")+"Z"}function ja(ka,Ia){var Da=ka.length+Ia;Ia=yu(ka)/Ia;for(var Na=0,ab=0,Lb=Ia/2;ka.length<Da;){var Ra=ka[Na],Fb=ka[(Na+1)%ka.length],rb=P(Ra,Fb);Lb<=ab+rb?(ka.splice(Na+1,0,rb?S(Ra,Fb,(Lb-ab)/rb):Ra.slice(0)),Lb+=Ia):(ab+=rb,Na++)}}function ta(ka,Ia){var Da;if("string"==typeof ka){ka=(new I2(ka)).abs();a:{var Na=ka.segments||[];var ab=[];if(Na.length&&"M"===Na[0][0]){for(var Lb=0;Lb<Na.length;Lb++){var Ra=
Na[Lb],Fb=Ra[0],rb=Ra[1];Ra=Ra[2];if("M"===Fb&&Lb||"Z"===Fb)break;if("M"===Fb||"L"===Fb)ab.push([rb,Ra]);else if("H"===Fb)ab.push([rb,ab[ab.length-1][1]]);else{if("V"!==Fb){Na=!1;break a}ab.push([ab[ab.length-1][0],rb])}}Na=!!ab.length&&{ring:ab}}else Na=!1}if(!Na){ab=lb(ka)[0];ka=[];Na=3;if(!ab)throw new TypeError(JP);a:{if("undefined"!=typeof window&&window&&window.document)try{var uc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var wb=(uc.setAttributeNS(null,"d",ab),uc);
break a}catch(kd){}wb=jha(ab)}uc=wb;wb=uc.getTotalLength();Ia&&oa(Ia)&&0<Ia&&(Na=Math.max(Na,Math.ceil(wb/Ia)));for(ab=0;ab<Na;ab++)Lb=uc.getPointAtLength(wb*ab/Na),ka.push([Lb.x,Lb.y]);Na={ring:ka,skipBisect:!0}}wb=Na;ka=wb.ring;Na=wb.skipBisect}else if(!Array.isArray(ka))throw new TypeError(JP);if(Da=ka.slice(0),!Ha(Da))throw new TypeError(JP);1<Da.length&&1E-9>P(Da[0],Da[Da.length-1])&&Da.pop();0<vx(Da)&&Da.reverse();if(!Na&&Ia&&oa(Ia)&&0<Ia)for(void 0===Ia&&(Ia=1/0),wb=0;wb<Da.length;wb++)for(uc=
Da[wb],ka=wb===Da.length-1?Da[0]:Da[wb+1];P(uc,ka)>Ia;)ka=S(uc,ka,.5),Da.splice(wb+1,0,ka);return Da}function Ha(ka){return ka.every(function(Ia){return Array.isArray(Ia)&&2<=Ia.length&&oa(Ia[0])&&oa(Ia[1])})}function zb(ka,Ia,Da){var Na;return Na=ka.length-Ia.length,ja(ka,0>Na?-1*Na:0),ja(Ia,0<Na?Na:0),kha(ka,Ia),fa(ka,Ia,Da)}function Ub(ka,Ia,Da){Da=Da||2;var Na=Ia&&Ia.length,ab=Na?Ia[0]*Da:ka.length,Lb=Nb(ka,0,ab,Da,!0),Ra=[];if(!Lb)return Ra;var Fb;if(Na){var rb=Da,uc;var wb=[];Na=0;for(uc=Ia.length;Na<
uc;Na++){var kd=Ia[Na]*rb;var Fd=Na<uc-1?Ia[Na+1]*rb:ka.length;kd=Nb(ka,kd,Fd,rb,!1);kd===kd.next&&(kd.steiner=!0);wb.push(ia(kd))}wb.sort(Eb);for(Na=0;Na<wb.length;Na++){Ia=wb[Na];rb=Lb;if(rb=Lc(Ia,rb))Ia=Rc(rb,Ia),Sb(Ia,Ia.next);Lb=Sb(Lb,Lb.next)}}if(ka.length>80*Da){var Fe=Fb=ka[0];var Ge=Na=ka[1];for(rb=Da;rb<ab;rb+=Da)wb=ka[rb],Ia=ka[rb+1],wb<Fe&&(Fe=wb),Ia<Ge&&(Ge=Ia),wb>Fb&&(Fb=wb),Ia>Na&&(Na=Ia);Fb=Math.max(Fb-Fe,Na-Ge)}return pc(Lb,Ra,Da,Fe,Ge,Fb),Ra}function Nb(ka,Ia,Da,Na,ab){if(ab===0<
Dg(ka,Ia,Da,Na))for(ab=Ia;ab<Da;ab+=Na)var Lb=qc(ab,ka[ab],ka[ab+1],Lb);else for(ab=Da-Na;ab>=Ia;ab-=Na)Lb=qc(ab,ka[ab],ka[ab+1],Lb);return Lb&&jb(Lb,Lb.next)&&(de(Lb),Lb=Lb.next),Lb}function Sb(ka,Ia){if(!ka)return ka;Ia||(Ia=ka);var Da=ka;do if(ka=!1,Da.steiner||!jb(Da,Da.next)&&0!==Ea(Da.prev,Da,Da.next))Da=Da.next;else{if(de(Da),(Da=Ia=Da.prev)===Da.next)return null;ka=!0}while(ka||Da!==Ia);return Ia}function pc(ka,Ia,Da,Na,ab,Lb,Ra){if(ka){if(!Ra&&Lb){var Fb=ka,rb=Fb;do null===rb.z&&(rb.z=dd(rb.x,
rb.y,Na,ab,Lb)),rb.prevZ=rb.prev,rb=rb.nextZ=rb.next;while(rb!==Fb);rb.prevZ.nextZ=null;rb.prevZ=null;Fb=rb;var uc,wb,kd,Fd,Fe=1;do{rb=Fb;var Ge=Fb=null;for(kd=0;rb;){kd++;var $d=rb;for(uc=Fd=0;uc<Fe&&(Fd++,$d=$d.nextZ);uc++);for(uc=Fe;0<Fd||0<uc&&$d;)0===Fd?(wb=$d,$d=$d.nextZ,uc--):0!==uc&&$d?rb.z<=$d.z?(wb=rb,rb=rb.nextZ,Fd--):(wb=$d,$d=$d.nextZ,uc--):(wb=rb,rb=rb.nextZ,Fd--),Ge?Ge.nextZ=wb:Fb=wb,wb.prevZ=Ge,Ge=wb;rb=$d}Ge.nextZ=null;Fe*=2}while(1<kd)}for(rb=ka;ka.prev!==ka.next;){wb=ka.prev;Fb=
ka.next;if(Lb)a:{$d=ka;uc=Na;var He=ab,jm=Lb;Ge=$d.prev;kd=$d;Fd=$d.next;if(0<=Ea(Ge,kd,Fd))$d=!1;else{var lha=Ge.x>kd.x?Ge.x>Fd.x?Ge.x:Fd.x:kd.x>Fd.x?kd.x:Fd.x,mha=Ge.y>kd.y?Ge.y>Fd.y?Ge.y:Fd.y:kd.y>Fd.y?kd.y:Fd.y;Fe=dd(Ge.x<kd.x?Ge.x<Fd.x?Ge.x:Fd.x:kd.x<Fd.x?kd.x:Fd.x,Ge.y<kd.y?Ge.y<Fd.y?Ge.y:Fd.y:kd.y<Fd.y?kd.y:Fd.y,uc,He,jm);uc=dd(lha,mha,uc,He,jm);for(He=$d.nextZ;He&&He.z<=uc;){if(He!==$d.prev&&He!==$d.next&&Ca(Ge.x,Ge.y,kd.x,kd.y,Fd.x,Fd.y,He.x,He.y)&&0<=Ea(He.prev,He,He.next)){$d=!1;break a}He=
He.nextZ}for(He=$d.prevZ;He&&He.z>=Fe;){if(He!==$d.prev&&He!==$d.next&&Ca(Ge.x,Ge.y,kd.x,kd.y,Fd.x,Fd.y,He.x,He.y)&&0<=Ea(He.prev,He,He.next)){$d=!1;break a}He=He.prevZ}$d=!0}}else a:if($d=ka,Ge=$d.prev,kd=$d,Fd=$d.next,0<=Ea(Ge,kd,Fd))$d=!1;else{for(Fe=$d.next.next;Fe!==$d.prev;){if(Ca(Ge.x,Ge.y,kd.x,kd.y,Fd.x,Fd.y,Fe.x,Fe.y)&&0<=Ea(Fe.prev,Fe,Fe.next)){$d=!1;break a}Fe=Fe.next}$d=!0}if($d)Ia.push(wb.i/Da),Ia.push(ka.i/Da),Ia.push(Fb.i/Da),de(ka),rb=ka=Fb.next;else if((ka=Fb)===rb){if(Ra)if(1===
Ra){Ra=Ia;wb=Da;Fb=ka;do rb=Fb.prev,$d=Fb.next.next,!jb(rb,$d)&&Mb(rb,Fb,Fb.next,$d)&&Tc(rb,$d)&&Tc($d,rb)&&(Ra.push(rb.i/wb),Ra.push(Fb.i/wb),Ra.push($d.i/wb),de(Fb),de(Fb.next),Fb=ka=$d),Fb=Fb.next;while(Fb!==ka);ka=Fb;pc(ka,Ia,Da,Na,ab,Lb,2)}else{if(2===Ra)a:{Ra=ka;do{for(wb=Ra.next.next;wb!==Ra.prev;){if(Fb=Ra.i!==wb.i){Fb=Ra;rb=wb;if($d=Fb.next.i!==rb.i&&Fb.prev.i!==rb.i){b:{$d=Fb;do{if($d.i!==Fb.i&&$d.next.i!==Fb.i&&$d.i!==rb.i&&$d.next.i!==rb.i&&Mb($d,$d.next,Fb,rb)){$d=!0;break b}$d=$d.next}while($d!==
Fb);$d=!1}$d=!$d}if($d=$d&&Tc(Fb,rb)&&Tc(rb,Fb)){$d=Fb;Ge=!1;kd=(Fb.x+rb.x)/2;rb=(Fb.y+rb.y)/2;do $d.y>rb!=$d.next.y>rb&&kd<($d.next.x-$d.x)*(rb-$d.y)/($d.next.y-$d.y)+$d.x&&(Ge=!Ge),$d=$d.next;while($d!==Fb);$d=Ge}Fb=$d}if(Fb){ka=Rc(Ra,wb);Ra=Sb(Ra,Ra.next);ka=Sb(ka,ka.next);pc(Ra,Ia,Da,Na,ab,Lb);pc(ka,Ia,Da,Na,ab,Lb);break a}wb=wb.next}Ra=Ra.next}while(Ra!==ka)}}else pc(Sb(ka),Ia,Da,Na,ab,Lb,1);break}}}}function Eb(ka,Ia){return ka.x-Ia.x}function Lc(ka,Ia){var Da=Ia,Na=ka.x,ab=ka.y,Lb=-1/0;do{if(ab<=
Da.y&&ab>=Da.next.y){var Ra=Da.x+(ab-Da.y)*(Da.next.x-Da.x)/(Da.next.y-Da.y);if(Ra<=Na&&Ra>Lb){if(Lb=Ra,Ra===Na){if(ab===Da.y)return Da;if(ab===Da.next.y)return Da.next}var Fb=Da.x<Da.next.x?Da:Da.next}}Da=Da.next}while(Da!==Ia);if(!Fb)return null;if(Na===Lb)return Fb.prev;var rb;Ia=Fb;Ra=Fb.x;var uc=Fb.y,wb=1/0;for(Da=Fb.next;Da!==Ia;)Na>=Da.x&&Da.x>=Ra&&Ca(ab<uc?Na:Lb,ab,Ra,uc,ab<uc?Lb:Na,ab,Da.x,Da.y)&&((rb=Math.abs(ab-Da.y)/(Na-Da.x))<wb||rb===wb&&Da.x>Fb.x)&&Tc(Da,ka)&&(Fb=Da,wb=rb),Da=Da.next;
return Fb}function dd(ka,Ia,Da,Na,ab){return ka=32767*(ka-Da)/ab,Ia=32767*(Ia-Na)/ab,ka=16711935&(ka|ka<<8),ka=252645135&(ka|ka<<4),ka=858993459&(ka|ka<<2),ka=1431655765&(ka|ka<<1),Ia=16711935&(Ia|Ia<<8),Ia=252645135&(Ia|Ia<<4),Ia=858993459&(Ia|Ia<<2),Ia=1431655765&(Ia|Ia<<1),ka|Ia<<1}function ia(ka){var Ia=ka,Da=ka;do Ia.x<Da.x&&(Da=Ia),Ia=Ia.next;while(Ia!==ka);return Da}function Ca(ka,Ia,Da,Na,ab,Lb,Ra,Fb){return 0<=(ab-Ra)*(Ia-Fb)-(ka-Ra)*(Lb-Fb)&&0<=(ka-Ra)*(Na-Fb)-(Da-Ra)*(Ia-Fb)&&0<=(Da-Ra)*
(Lb-Fb)-(ab-Ra)*(Na-Fb)}function Ea(ka,Ia,Da){return(Ia.y-ka.y)*(Da.x-Ia.x)-(Ia.x-ka.x)*(Da.y-Ia.y)}function jb(ka,Ia){return ka.x===Ia.x&&ka.y===Ia.y}function Mb(ka,Ia,Da,Na){return!!(jb(ka,Ia)&&jb(Da,Na)||jb(ka,Na)&&jb(Da,Ia))||0<Ea(ka,Ia,Da)!=0<Ea(ka,Ia,Na)&&0<Ea(Da,Na,ka)!=0<Ea(Da,Na,Ia)}function Tc(ka,Ia){return 0>Ea(ka.prev,ka,ka.next)?0<=Ea(ka,Ia,ka.next)&&0<=Ea(ka,ka.prev,Ia):0>Ea(ka,Ia,ka.prev)||0>Ea(ka,ka.next,Ia)}function Rc(ka,Ia){var Da=new Vd(ka.i,ka.x,ka.y),Na=new Vd(Ia.i,Ia.x,Ia.y),
ab=ka.next,Lb=Ia.prev;return ka.next=Ia,Ia.prev=ka,Da.next=ab,ab.prev=Da,Na.next=Da,Da.prev=Na,Lb.next=Na,Na.prev=Lb,Na}function qc(ka,Ia,Da,Na){ka=new Vd(ka,Ia,Da);return Na?(ka.next=Na.next,ka.prev=Na,Na.next.prev=ka,Na.next=ka):(ka.prev=ka,ka.next=ka),ka}function de(ka){ka.next.prev=ka.prev;ka.prev.next=ka.next;ka.prevZ&&(ka.prevZ.nextZ=ka.nextZ);ka.nextZ&&(ka.nextZ.prevZ=ka.prevZ)}function Vd(ka,Ia,Da){(this||fc).i=ka;(this||fc).x=Ia;(this||fc).y=Da;(this||fc).prev=null;(this||fc).next=null;(this||
fc).z=null;(this||fc).prevZ=null;(this||fc).nextZ=null;(this||fc).steiner=!1}function Dg(ka,Ia,Da,Na){for(var ab=0,Lb=Da-Na;Ia<Da;Ia+=Na)ab+=(ka[Lb]-ka[Ia])*(ka[Ia+1]+ka[Lb+1]),Lb=Ia;return ab}function eg(ka,Ia){var Da=Ia.id,Na=Ia.bbox,ab=null==Ia.properties?{}:Ia.properties;ka=Mh(ka,Ia);return null==Da&&null==Na?{type:"Feature",properties:ab,geometry:ka}:null==Na?{type:"Feature",id:Da,properties:ab,geometry:ka}:{type:"Feature",id:Da,bbox:Na,properties:ab,geometry:ka}}function Mh(ka,Ia){function Da(uc){return Fb(uc)}
function Na(uc){for(var wb=[],kd=0,Fd=uc.length;kd<Fd;++kd){var Fe=uc[kd],Ge=wb;Ge.length&&Ge.pop();for(var $d=rb[0>Fe?~Fe:Fe],He=0,jm=$d.length;He<jm;++He)Ge.push(Fb($d[He],He));if(0>Fe)for(Fe=Ge,Ge=Fe.length,$d=Ge-jm;$d<--Ge;)jm=Fe[$d],Fe[$d++]=Fe[Ge],Fe[Ge]=jm}return 2>wb.length&&wb.push(wb[0]),wb}function ab(uc){for(uc=Na(uc);4>uc.length;)uc.push(uc[0]);return uc}function Lb(uc){return uc.map(ab)}function Ra(uc){var wb=uc.type;switch(wb){case "GeometryCollection":return{type:wb,geometries:uc.geometries.map(Ra)};
case "Point":uc=Fb(uc.coordinates);break;case "MultiPoint":uc=uc.coordinates.map(Da);break;case "LineString":uc=Na(uc.arcs);break;case "MultiLineString":uc=uc.arcs.map(Na);break;case "Polygon":uc=Lb(uc.arcs);break;case "MultiPolygon":uc=uc.arcs.map(Lb);break;default:return null}return{type:wb,coordinates:uc}}var Fb=nha(ka.transform),rb=ka.arcs;return Ra(Ia)}function Ch(ka,Ia){function Da(rb){switch(rb.type){case "GeometryCollection":rb.geometries.forEach(Da);break;case "Polygon":Na(rb.arcs);break;
case "MultiPolygon":rb.arcs.forEach(Na)}}function Na(rb){rb.forEach(function(uc){uc.forEach(function(wb){(Lb[wb=0>wb?~wb:wb]||(Lb[wb]=[])).push(rb)})});Ra.push(rb)}function ab(rb){rb=Mh(ka,{type:"Polygon",arcs:[rb]}).coordinates[0];for(var uc,wb=-1,kd=rb.length,Fd=rb[kd-1],Fe=0;++wb<kd;)uc=Fd,Fd=rb[wb],Fe+=uc[0]*Fd[1]-uc[1]*Fd[0];return Math.abs(Fe)}var Lb={},Ra=[],Fb=[];return Ia.forEach(Da),Ra.forEach(function(rb){if(!rb._){var uc=[],wb=[rb];rb._=1;for(Fb.push(uc);rb=wb.pop();)uc.push(rb),rb.forEach(function(kd){kd.forEach(function(Fd){Lb[0>
Fd?~Fd:Fd].forEach(function(Fe){Fe._||(Fe._=1,wb.push(Fe))})})})}}),Ra.forEach(function(rb){delete rb._}),{type:"MultiPolygon",arcs:Fb.map(function(rb){var uc=[];if(rb.forEach(function(Ge){Ge.forEach(function($d){$d.forEach(function(He){2>Lb[0>He?~He:He].length&&uc.push(He)})})}),uc=oha(ka,uc),1<(rb=uc.length))for(var wb,kd,Fd=1,Fe=ab(uc[0]);Fd<rb;++Fd)(wb=ab(uc[Fd]))>Fe&&(kd=uc[0],uc[0]=uc[Fd],uc[Fd]=kd,Fe=wb);return uc})}}function oi(ka){return function(Ia,Da){return J2(ka(Ia),Da)}}function Ei(ka,
Ia){var Da={},Na={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return ka.forEach(function(ab){var Lb=[];ab.forEach(function(Ra,Fb){Fb=Ra[0]<Ra[1]?Ra.join(","):Ra[1]+","+Ra[0];Ra=Ra.map(function(rb){return Ia[rb]});Fb in Da?Lb.push(~Da[Fb]):(Lb.push(Da[Fb]=Na.arcs.length),Na.arcs.push(Ra))});Na.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(vx(ab.map(function(Ra){return Ia[Ra[0]]}))),arcs:[Lb]})}),Na.objects.triangles.geometries.sort(function(ab,
Lb){return ab.area-Lb.area}),Na}function Ni(ka,Ia){for(var Da=ka.objects.triangles.geometries,Na=K2(function(ab){return ab.area}).left;Da.length>Ia;)!function(){var ab=Da[0],Lb=pha(Da)[0][0],Ra=Da[Lb],Fb=Ch(ka,[ab,Ra]);Fb.area=ab.area+Ra.area;Fb.type="Polygon";Fb.arcs=Fb.arcs[0];Da.splice(Lb,1);Da.shift();Da.splice(Na(Da,Fb.area),0,Fb)}();if(Ia>Da.length)throw new RangeError("Can't collapse topology into "+Ia+" pieces.");return qha(ka,ka.objects.triangles).features.map(function(ab){return ab.geometry.coordinates[0].pop(),
ab.geometry.coordinates[0]})}function Oi(ka){ka=rha(ka.reduce(function(ab,Lb){return ab.concat([Lb[0]],[Lb[1]])},[]));for(var Ia=[],Da=0,Na=ka.length;Da<Na;Da+=3)Ia.push([[ka[Da],ka[Da+1]],[ka[Da+1],ka[Da+2]],[ka[Da+2],ka[Da]]]);return Ia}function rh(ka,Ia,Da){function Na(Ra,Fb,rb){void 0===Fb&&(Fb=[]);void 0===rb&&(rb=0);for(var uc=0;uc<Ra.length;uc++){var wb=Ra.splice(uc,1),kd=Da[wb[0]][Fb.length];rb+kd<ab&&(Ra.length?Na(Ra.slice(),Fb.concat(wb),rb+kd):(ab=rb+kd,Lb=Fb.concat(wb)));Ra.length&&Ra.splice(uc,
0,wb[0])}}var ab=1/0,Lb=ka.map(function(Ra,Fb){return Fb});return Na(Lb),Lb}function pi(ka,Ia,Da){void 0===Da&&(Da={});var Na=Da.maxSegmentLength;void 0===Na&&(Na=10);var ab=Da.string;void 0===ab&&(ab=!0);Da=Da.single;void 0===Da&&(Da=!1);var Lb=ta(ka,Na);Lb.length<Ia.length+2&&ja(Lb,Ia.length+2-Lb.length);var Ra;Lb=sha(Lb,Ia.length);var Fb=Ia.map(function(rb){return ta(rb,Na)});ka="string"==typeof ka&&ka;return Da&&!Ia.every(function(rb){return"string"==typeof rb})||(Ra=Ia.slice(0)),Pi(Lb,Fb,{match:!0,
string:ab,single:Da,t0:ka,t1:Ra})}function Pi(ka,Ia,Da){void 0===Da&&(Da={});var Na=Da.string,ab=Da.single,Lb=Da.t0,Ra=Da.t1,Fb=(Da=Da.match)?tha(ka,Ia):ka.map(function(wb,kd){return kd}),rb=Fb.map(function(wb,kd){return zb(ka[wb],Ia[kd],Na)});if(Da&&Array.isArray(Lb)&&(Lb=Fb.map(function(wb){return Lb[wb]})),ab&&Na&&(Array.isArray(Lb)&&(Lb=Lb.join(" ")),Array.isArray(Ra)&&(Ra=Ra.join(" "))),ab){var uc=Na?function(wb){return rb.map(function(kd){return kd(wb)}).join(" ")}:function(wb){return rb.map(function(kd){return kd(wb)})};
return Na&&(Lb||Ra)?function(wb){return 1E-4>wb&&Lb||1E-4>1-wb&&Ra||uc(wb)}:uc}return Na?(Lb=Array.isArray(Lb)?Lb.map(function(wb){return"string"==typeof wb&&wb}):[],Ra=Array.isArray(Ra)?Ra.map(function(wb){return"string"==typeof wb&&wb}):[],rb.map(function(wb,kd){return Lb[kd]||Ra[kd]?function(Fd){return 1E-4>Fd&&Lb[kd]||1E-4>1-Fd&&Ra[kd]||wb(Fd)}:wb})):rb}function qi(ka,Ia,Da,Na,ab){var Lb=Zc(ka,Ia,Da),Ra=ka-Da+","+Ia,Fb="A"+Da+","+Da+",0,1,1,";return wx(Lb,Na,"M"+Ra+Fb+(ka+Da+","+Ia)+Fb+Ra+"Z",
2*Math.PI*Da,ab)}function Qi(ka,Ia,Da,Na,ab,Lb){var Ra=$c(ka,Ia,Da,Na),Fb=ka+Da,rb=Ia+Na;return wx(Ra,ab,"M"+ka+","+Ia+"L"+Fb+","+Ia+"L"+Fb+","+rb+"L"+ka+","+rb+"Z",2*Da+2*Na,Lb)}function wx(ka,Ia,Da,Na,ab){void 0===ab&&(ab={});var Lb=ab.maxSegmentLength;void 0===Lb&&(Lb=10);ab=ab.string;void 0===ab&&(ab=!0);var Ra,Fb;Ia=ta(Ia,Lb);return oa(Na)&&Ia.length<Na/Lb&&ja(Ia,Math.ceil(Na/Lb-Ia.length)),Ra=ka(Ia),Fb=fa(Ra,Ia,ab),ab?function(rb){return 1E-4>rb?Da:Fb(rb)}:Fb}function Zc(ka,Ia,Da){return function(Na){var ab=
Va(Na),Lb=yu(Na.concat([Na[0]])),Ra=Math.atan2(Na[0][1]-ab[1],Na[0][0]-ab[0]),Fb=0;return Na.map(function(rb,uc){var wb;return uc&&(Fb+=P(rb,Na[uc-1])),wb=Ra+2*Math.PI*(Lb?Fb/Lb:uc/Na.length),[Math.cos(wb)*Da+ka,Math.sin(wb)*Da+Ia]})}}function $c(ka,Ia,Da,Na){return function(ab){var Lb=Va(ab),Ra=yu(ab.concat([ab[0]]));Lb=Math.atan2(ab[0][1]-Lb[1],ab[0][0]-Lb[0]);var Fb=0;0>Lb&&(Lb=2*Math.PI+Lb);var rb=Lb/(2*Math.PI);return ab.map(function(uc,wb){wb&&(Fb+=P(uc,ab[wb-1]));uc=(rb+(Ra?Fb/Ra:wb/ab.length))%
1;uc=.125>=uc?[1,.5+4*uc]:.375>=uc?[1.5-4*uc,1]:.625>=uc?[0,2.5-4*uc]:.875>=uc?[4*uc-2.5,0]:[1,4*uc-3.5];return[ka+uc[0]*Da,Ia+uc[1]*Na]})}}var vx=function(ka){for(var Ia,Da=-1,Na=ka.length,ab=ka[Na-1],Lb=0;++Da<Na;)Ia=ab,ab=ka[Da],Lb+=Ia[1]*ab[0]-Ia[0]*ab[1];return Lb/2},yu=function(ka){var Ia=-1,Da=ka.length,Na=ka[Da-1],ab=Na[0];Na=Na[1];for(var Lb=0;++Ia<Da;){var Ra=ab;var Fb=Na;Na=ka[Ia];ab=Na[0];Na=Na[1];Ra-=ab;Fb-=Na;Lb+=Math.sqrt(Ra*Ra+Fb*Fb)}return Lb},cs={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},$A=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];b.prototype.matrix=function(ka){return 1===ka[0]&&0===ka[1]&&0===ka[2]&&1===ka[3]&&0===ka[4]&&0===ka[5]?this||fc:((this||fc).cache=null,(this||fc).queue.push(ka),this||fc)};b.prototype.translate=function(ka,Ia){return 0===ka&&0===Ia||((this||fc).cache=null,(this||fc).queue.push([1,0,0,1,ka,Ia])),this||fc};b.prototype.scale=function(ka,Ia){return 1===ka&&1===Ia||((this||fc).cache=null,(this||fc).queue.push([ka,
0,0,Ia,0,0])),this||fc};b.prototype.rotate=function(ka,Ia,Da){var Na,ab,Lb;return 0!==ka&&(this.translate(Ia,Da),Na=ka*Math.PI/180,ab=Math.cos(Na),Lb=Math.sin(Na),(this||fc).queue.push([ab,Lb,-Lb,ab,0,0]),(this||fc).cache=null,this.translate(-Ia,-Da)),this||fc};b.prototype.skewX=function(ka){return 0!==ka&&((this||fc).cache=null,(this||fc).queue.push([1,0,Math.tan(ka*Math.PI/180),1,0,0])),this||fc};b.prototype.skewY=function(ka){return 0!==ka&&((this||fc).cache=null,(this||fc).queue.push([1,Math.tan(ka*
Math.PI/180),0,1,0,0])),this||fc};b.prototype.toArray=function(){var ka=this||fc;if((this||fc).cache)return(this||fc).cache;if(!(this||fc).queue.length)return(this||fc).cache=[1,0,0,1,0,0],(this||fc).cache;if((this||fc).cache=(this||fc).queue[0],1===(this||fc).queue.length)return(this||fc).cache;for(var Ia=1;Ia<(this||fc).queue.length;Ia++){var Da=ka.cache,Na=ka.queue[Ia];ka.cache=[Da[0]*Na[0]+Da[2]*Na[1],Da[1]*Na[0]+Da[3]*Na[1],Da[0]*Na[2]+Da[2]*Na[3],Da[1]*Na[2]+Da[3]*Na[3],Da[0]*Na[4]+Da[2]*Na[5]+
Da[4],Da[1]*Na[4]+Da[3]*Na[5]+Da[5]]}return(this||fc).cache};b.prototype.calc=function(ka,Ia,Da){var Na;return(this||fc).queue.length?((this||fc).cache||((this||fc).cache=this.toArray()),Na=(this||fc).cache,[ka*Na[0]+Ia*Na[2]+(Da?0:Na[4]),ka*Na[1]+Ia*Na[3]+(Da?0:Na[5])]):[ka,Ia]};var cB={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},dB=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,eB=/[\s,]+/,fB=function(ka){var Ia,Da,Na=new b;return ka.split(dB).forEach(function(ab){if(ab.length){if(void 0!==
cB[ab])return void(Ia=ab);switch(Da=ab.split(eB).map(function(Lb){return+Lb||0}),Ia){case "matrix":return void(6===Da.length&&Na.matrix(Da));case "scale":return void(1===Da.length?Na.scale(Da[0],Da[0]):2===Da.length&&Na.scale(Da[0],Da[1]));case "rotate":return void(1===Da.length?Na.rotate(Da[0],0,0):3===Da.length&&Na.rotate(Da[0],Da[1],Da[2]));case "translate":return void(1===Da.length?Na.translate(Da[0],0):2===Da.length&&Na.translate(Da[0],Da[1]));case "skewX":return void(1===Da.length&&Na.skewX(Da[0]));
case "skewY":return void(1===Da.length&&Na.skewY(Da[0]))}}}),Na},aB=2*Math.PI,uha=function(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb){var uc=Math.sin(rb*aB/360),wb=Math.cos(rb*aB/360);rb=wb*(ka-Da)/2+uc*(Ia-Na)/2;var kd=-uc*(ka-Da)/2+wb*(Ia-Na)/2;if(0===rb&&0===kd||0===Ra||0===Fb)return[];Ra=Math.abs(Ra);Fb=Math.abs(Fb);rb=rb*rb/(Ra*Ra)+kd*kd/(Fb*Fb);1<rb&&(Ra*=Math.sqrt(rb),Fb*=Math.sqrt(rb));var Fd=l(ka,Ia,Da,Na,ab,Lb,Ra,Fb,uc,wb);ka=[];Ia=Fd[2];Da=Fd[3];Na=Math.max(Math.ceil(Math.abs(Da)/(aB/4)),1);Da/=Na;for(ab=
0;ab<Na;ab++)ka.push(p(Ia,Da)),Ia+=Da;return ka.map(function(Fe){for(var Ge=0;Ge<Fe.length;Ge+=2){var $d=Fe[Ge+0],He=Fe[Ge+1];$d*=Ra;He*=Fb;var jm=uc*$d+wb*He;Fe[Ge+0]=wb*$d-uc*He+Fd[0];Fe[Ge+1]=jm+Fd[1]}return Fe})},L2=Math.PI/180;q.prototype.transform=function(ka){var Ia=Math.cos((this||fc).ax*L2),Da=Math.sin((this||fc).ax*L2),Na=[(this||fc).rx*(ka[0]*Ia+ka[2]*Da),(this||fc).rx*(ka[1]*Ia+ka[3]*Da),(this||fc).ry*(-ka[0]*Da+ka[2]*Ia),(this||fc).ry*(-ka[1]*Da+ka[3]*Ia)];ka=Na[0]*Na[0]+Na[2]*Na[2];
Ia=Na[1]*Na[1]+Na[3]*Na[3];Da=((Na[0]-Na[3])*(Na[0]-Na[3])+(Na[2]+Na[1])*(Na[2]+Na[1]))*((Na[0]+Na[3])*(Na[0]+Na[3])+(Na[2]-Na[1])*(Na[2]-Na[1]));var ab=(ka+Ia)/2;if(Da<1E-10*ab)return(this||fc).rx=(this||fc).ry=Math.sqrt(ab),(this||fc).ax=0,this||fc;Na=Na[0]*Na[1]+Na[2]*Na[3];Da=Math.sqrt(Da);var Lb=ab+Da/2;Da=ab-Da/2;return(this||fc).ax=1E-10>Math.abs(Na)&&1E-10>Math.abs(Lb-Ia)?90:180*Math.atan(Math.abs(Na)>Math.abs(Lb-Ia)?(Lb-ka)/Na:Na/(Lb-Ia))/Math.PI,0<=(this||fc).ax?((this||fc).rx=Math.sqrt(Lb),
(this||fc).ry=Math.sqrt(Da)):((this||fc).ax+=90,(this||fc).rx=Math.sqrt(Da),(this||fc).ry=Math.sqrt(Lb)),this||fc};q.prototype.isDegenerate=function(){return(this||fc).rx<1E-10*(this||fc).ry||(this||fc).ry<1E-10*(this||fc).rx};u.prototype.__matrix=function(ka){var Ia,Da=this||fc;ka.queue.length&&this.iterate(function(Na,ab,Lb,Ra){switch(Na[0]){case "v":var Fb=ka.calc(0,Na[1],!0);Lb=0===Fb[0]?["v",Fb[1]]:["l",Fb[0],Fb[1]];break;case "V":Fb=ka.calc(Lb,Na[1],!1);Lb=Fb[0]===ka.calc(Lb,Ra,!1)[0]?["V",
Fb[1]]:["L",Fb[0],Fb[1]];break;case "h":Fb=ka.calc(Na[1],0,!0);Lb=0===Fb[1]?["h",Fb[0]]:["l",Fb[0],Fb[1]];break;case "H":Fb=ka.calc(Na[1],Ra,!1);Lb=Fb[1]===ka.calc(Lb,Ra,!1)[1]?["H",Fb[0]]:["L",Fb[0],Fb[1]];break;case "a":case "A":Fb=ka.toArray();var rb=q(Na[1],Na[2],Na[3]).transform(Fb);if(0>Fb[0]*Fb[3]-Fb[1]*Fb[2]&&(Na[5]=Na[5]?"0":"1"),Fb=ka.calc(Na[6],Na[7],"a"===Na[0]),"A"===Na[0]&&Na[6]===Lb&&Na[7]===Ra||"a"===Na[0]&&0===Na[6]&&0===Na[7]){Lb=["a"===Na[0]?"l":"L",Fb[0],Fb[1]];break}Lb=rb.isDegenerate()?
["a"===Na[0]?"l":"L",Fb[0],Fb[1]]:[Na[0],rb.rx,rb.ry,rb.ax,Na[4],Na[5],Fb[0],Fb[1]];break;case "m":Fb=ka.calc(Na[1],Na[2],0<ab);Lb=["m",Fb[0],Fb[1]];break;default:for(Fb=Na[0],Lb=[Fb],Ra=Fb.toLowerCase()===Fb,Ia=1;Ia<Na.length;Ia+=2)Fb=ka.calc(Na[Ia],Na[Ia+1],Ra),Lb.push(Fb[0],Fb[1])}Da.segments[ab]=Lb},!0)};u.prototype.__evaluateStack=function(){var ka,Ia=this||fc;if((this||fc).__stack.length){if(1===(this||fc).__stack.length)return this.__matrix((this||fc).__stack[0]),void((this||fc).__stack=[]);
var Da=b();for(ka=(this||fc).__stack.length;0<=--ka;)Da.matrix(Ia.__stack[ka].toArray());this.__matrix(Da);(this||fc).__stack=[]}};u.prototype.toString=function(){var ka=this||fc,Ia=[];this.__evaluateStack();for(var Da=0;Da<(this||fc).segments.length;Da++){var Na=ka.segments[Da][0];Na=0<Da&&"m"!==Na&&"M"!==Na&&Na===ka.segments[Da-1][0];Ia=Ia.concat(Na?ka.segments[Da].slice(1):ka.segments[Da])}return Ia.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=
function(ka,Ia){return(this||fc).__stack.push(b().translate(ka,Ia||0)),this||fc};u.prototype.scale=function(ka,Ia){return(this||fc).__stack.push(b().scale(ka,Ia||0===Ia?Ia:ka)),this||fc};u.prototype.rotate=function(ka,Ia,Da){return(this||fc).__stack.push(b().rotate(ka,Ia||0,Da||0)),this||fc};u.prototype.skewX=function(ka){return(this||fc).__stack.push(b().skewX(ka)),this||fc};u.prototype.skewY=function(ka){return(this||fc).__stack.push(b().skewY(ka)),this||fc};u.prototype.matrix=function(ka){return(this||
fc).__stack.push(b().matrix(ka)),this||fc};u.prototype.transform=function(ka){return ka.trim()?((this||fc).__stack.push(fB(ka)),this||fc):this||fc};u.prototype.round=function(ka){var Ia,Da=0,Na=0,ab=0,Lb=0;return ka=ka||0,this.__evaluateStack(),(this||fc).segments.forEach(function(Ra){var Fb=Ra[0].toLowerCase()===Ra[0];switch(Ra[0]){case "H":case "h":return Fb&&(Ra[1]+=ab),ab=Ra[1]-Ra[1].toFixed(ka),void(Ra[1]=+Ra[1].toFixed(ka));case "V":case "v":return Fb&&(Ra[1]+=Lb),Lb=Ra[1]-Ra[1].toFixed(ka),
void(Ra[1]=+Ra[1].toFixed(ka));case "Z":case "z":return ab=Da,void(Lb=Na);case "M":case "m":return Fb&&(Ra[1]+=ab,Ra[2]+=Lb),ab=Ra[1]-Ra[1].toFixed(ka),Lb=Ra[2]-Ra[2].toFixed(ka),Da=ab,Na=Lb,Ra[1]=+Ra[1].toFixed(ka),void(Ra[2]=+Ra[2].toFixed(ka));case "A":case "a":return Fb&&(Ra[6]+=ab,Ra[7]+=Lb),ab=Ra[6]-Ra[6].toFixed(ka),Lb=Ra[7]-Ra[7].toFixed(ka),Ra[1]=+Ra[1].toFixed(ka),Ra[2]=+Ra[2].toFixed(ka),Ra[3]=+Ra[3].toFixed(ka+2),Ra[6]=+Ra[6].toFixed(ka),void(Ra[7]=+Ra[7].toFixed(ka));default:return Ia=
Ra.length,Fb&&(Ra[Ia-2]+=ab,Ra[Ia-1]+=Lb),ab=Ra[Ia-2]-Ra[Ia-2].toFixed(ka),Lb=Ra[Ia-1]-Ra[Ia-1].toFixed(ka),void Ra.forEach(function(rb,uc){uc&&(Ra[uc]=+Ra[uc].toFixed(ka))})}}),this||fc};u.prototype.iterate=function(ka,Ia){var Da,Na=(this||fc).segments,ab={},Lb=!1,Ra=0,Fb=0,rb=0,uc=0;if(Ia||this.__evaluateStack(),Na.forEach(function(kd,Fd){var Fe=ka(kd,Fd,Ra,Fb);Array.isArray(Fe)&&(ab[Fd]=Fe,Lb=!0);Fd=kd[0]===kd[0].toLowerCase();switch(kd[0]){case "m":case "M":return Ra=kd[1]+(Fd?Ra:0),Fb=kd[2]+
(Fd?Fb:0),rb=Ra,void(uc=Fb);case "h":case "H":return void(Ra=kd[1]+(Fd?Ra:0));case "v":case "V":return void(Fb=kd[1]+(Fd?Fb:0));case "z":case "Z":return Ra=rb,void(Fb=uc);default:Ra=kd[kd.length-2]+(Fd?Ra:0),Fb=kd[kd.length-1]+(Fd?Fb:0)}}),!Lb)return this||fc;var wb=[];for(Ia=0;Ia<Na.length;Ia++)if(void 0!==ab[Ia])for(Da=0;Da<ab[Ia].length;Da++)wb.push(ab[Ia][Da]);else wb.push(Na[Ia]);return(this||fc).segments=wb,this||fc};u.prototype.abs=function(){return this.iterate(function(ka,Ia,Da,Na){Ia=ka[0];
var ab=Ia.toUpperCase();if(Ia!==ab)switch(ka[0]=ab,Ia){case "v":return void(ka[1]+=Na);case "a":return ka[6]+=Da,void(ka[7]+=Na);default:for(Ia=1;Ia<ka.length;Ia++)ka[Ia]+=Ia%2?Da:Na}},!0),this||fc};u.prototype.rel=function(){return this.iterate(function(ka,Ia,Da,Na){var ab=ka[0],Lb=ab.toLowerCase();if(ab!==Lb&&(0!==Ia||"M"!==ab))switch(ka[0]=Lb,ab){case "V":return void(ka[1]-=Na);case "A":return ka[6]-=Da,void(ka[7]-=Na);default:for(Ia=1;Ia<ka.length;Ia++)ka[Ia]-=Ia%2?Da:Na}},!0),this||fc};u.prototype.unarc=
function(){return this.iterate(function(ka,Ia,Da,Na){var ab,Lb,Ra,Fb=[];Ia=ka[0];return"A"!==Ia&&"a"!==Ia?null:("a"===Ia?(Lb=Da+ka[6],Ra=Na+ka[7]):(Lb=ka[6],Ra=ka[7]),ab=uha(Da,Na,Lb,Ra,ka[4],ka[5],ka[1],ka[2],ka[3]),0===ab.length?[["a"===ka[0]?"l":"L",ka[6],ka[7]]]:(ab.forEach(function(rb){Fb.push(["C",rb[2],rb[3],rb[4],rb[5],rb[6],rb[7]])}),Fb))}),this||fc};u.prototype.unshort=function(){var ka,Ia,Da,Na,ab,Lb=(this||fc).segments;return this.iterate(function(Ra,Fb,rb,uc){var wb,kd=Ra[0],Fd=kd.toUpperCase();
Fb&&("T"===Fd?(wb="t"===kd,Da=Lb[Fb-1],"Q"===Da[0]?(ka=Da[1]-rb,Ia=Da[2]-uc):"q"===Da[0]?(ka=Da[1]-Da[3],Ia=Da[2]-Da[4]):(ka=0,Ia=0),Na=-ka,ab=-Ia,wb||(Na+=rb,ab+=uc),Lb[Fb]=[wb?"q":"Q",Na,ab,Ra[1],Ra[2]]):"S"===Fd&&(wb="s"===kd,Da=Lb[Fb-1],"C"===Da[0]?(ka=Da[3]-rb,Ia=Da[4]-uc):"c"===Da[0]?(ka=Da[3]-Da[5],Ia=Da[4]-Da[6]):(ka=0,Ia=0),Na=-ka,ab=-Ia,wb||(Na+=rb,ab+=uc),Lb[Fb]=[wb?"c":"C",Na,ab,Ra[1],Ra[2],Ra[3],Ra[4]]))}),this||fc};var I2=u,KP={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},vha=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
xha=function(ka){var Ia=[];return ka.replace(vha,function(Da,Na,ab){Da=Na.toLowerCase();ab=(ab=ab.match(wha))?ab.map(Number):[];for("m"===Da&&2<ab.length&&(Ia.push([Na].concat(ab.splice(0,2))),Da="l",Na="m"===Na?"l":"L");0<=ab.length;){if(ab.length===KP[Da])return ab.unshift(Na),Ia.push(ab);if(ab.length<KP[Da])throw Error("malformed path data");Ia.push([Na].concat(ab.splice(0,KP[Da])))}}),Ia},wha=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,uo=function(ka,Ia,Da,Na,ab,Lb,Ra,Fb){return new w(ka,Ia,Da,Na,ab,
Lb,Ra,Fb)};w.prototype={constructor:w,init:function(){(this||fc).length=this.getArcLength([(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y])},getTotalLength:function(){return(this||fc).length},getPointAtLength:function(ka){ka=C(ka,(this||fc).length,(this||fc).getArcLength,[(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y]);return this.getPoint([(this||
fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y],ka)},getTangentAtLength:function(ka){ka=C(ka,(this||fc).length,(this||fc).getArcLength,[(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y]);ka=this.getDerivative([(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y],ka);var Ia=Math.sqrt(ka.x*ka.x+
ka.y*ka.y);return 0<Ia?{x:ka.x/Ia,y:ka.y/Ia}:{x:0,y:0}},getPropertiesAtLength:function(ka){ka=C(ka,(this||fc).length,(this||fc).getArcLength,[(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y]);var Ia=this.getDerivative([(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y],ka);var Da=Math.sqrt(Ia.x*Ia.x+Ia.y*Ia.y);Ia=0<Da?{x:Ia.x/Da,y:Ia.y/Da}:{x:0,y:0};ka=
this.getPoint([(this||fc).a.x,(this||fc).b.x,(this||fc).c.x,(this||fc).d.x],[(this||fc).a.y,(this||fc).b.y,(this||fc).c.y,(this||fc).d.y],ka);return{x:ka.x,y:ka.y,tangentX:Ia.x,tangentY:Ia.y}}};var gha=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,
-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,
.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,
-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,
.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,
-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,
.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,
-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,
.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,
-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,
.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,
-.9951872199970213,.9951872199970213]],hha=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,
.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,
.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,
.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,
.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,
.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,
.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,
.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,
.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,
.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,
.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,
.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],fha=[[1],[1,1],[1,2,1],[1,3,3,1]],bB=2*Math.PI,iha=function(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb){var uc=Math.sin(ab*bB/360),wb=Math.cos(ab*bB/360);ab=wb*(ka-Fb)/2+uc*(Ia-rb)/2;var kd=-uc*(ka-Fb)/2+wb*(Ia-rb)/2;if(0===ab&&0===kd||0===Da||0===Na)return[];Da=Math.abs(Da);Na=Math.abs(Na);ab=ab*ab/(Da*Da)+kd*kd/(Na*Na);1<ab&&(Da*=Math.sqrt(ab),Na*=Math.sqrt(ab));var Fd=na(ka,Ia,Fb,rb,Lb,Ra,Da,Na,uc,wb);ka=[];Ia=Fd[2];Lb=Fd[3];Ra=Math.max(Math.ceil(Math.abs(Lb)/
(bB/4)),1);Lb/=Ra;for(Fb=0;Fb<Ra;Fb++)ka.push(Ba(Ia,Lb)),Ia+=Lb;return ka.map(function(Fe){for(var Ge=0;Ge<Fe.length;Ge+=2){var $d=Fe[Ge+0],He=Fe[Ge+1];$d*=Da;He*=Na;var jm=uc*$d+wb*He;Fe[Ge+0]=wb*$d-uc*He+Fd[0];Fe[Ge+1]=jm+Fd[1]}return Fe})},M2=function(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb){return new F(ka,Ia,Da,Na,ab,Lb,Ra,Fb,rb)};F.prototype={constructor:F,init:function(){},getTotalLength:function(){return(this||fc).length},getPointAtLength:function(ka){var Ia=this||fc;0>ka?ka=0:ka>(this||fc).length&&(ka=
(this||fc).length);for(var Da=(this||fc).partialLengths.length-1;(this||fc).partialLengths[Da]>=ka&&0<(this||fc).partialLengths[Da];)Da--;Da<(this||fc).partialLengths.length-1&&Da++;for(var Na=0,ab=0;ab<Da;ab++)Na+=Ia.partialLengths[ab];return(this||fc).curves[Da].getPointAtLength(ka-Na)},getTangentAtLength:function(ka){var Ia=this||fc;0>ka?ka=0:ka>(this||fc).length&&(ka=(this||fc).length);for(var Da=(this||fc).partialLengths.length-1;(this||fc).partialLengths[Da]>=ka&&0<(this||fc).partialLengths[Da];)Da--;
Da<(this||fc).partialLengths.length-1&&Da++;for(var Na=0,ab=0;ab<Da;ab++)Na+=Ia.partialLengths[ab];return(this||fc).curves[Da].getTangentAtLength(ka-Na)},getPropertiesAtLength:function(ka){var Ia=this.getTangentAtLength(ka);ka=this.getPointAtLength(ka);return{x:ka.x,y:ka.y,tangentX:Ia.x,tangentY:Ia.y}}};var Gq=function(ka,Ia,Da,Na){return new W(ka,Ia,Da,Na)};W.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||fc).x0-(this||fc).x1,2)+Math.pow((this||fc).y0-(this||fc).y1,2))};W.prototype.getPointAtLength=
function(ka){ka/=Math.sqrt(Math.pow((this||fc).x0-(this||fc).x1,2)+Math.pow((this||fc).y0-(this||fc).y1,2));return{x:(this||fc).x0+((this||fc).x1-(this||fc).x0)*ka,y:(this||fc).y0+((this||fc).y1-(this||fc).y0)*ka}};W.prototype.getTangentAtLength=function(){var ka=Math.sqrt(((this||fc).x1-(this||fc).x0)*((this||fc).x1-(this||fc).x0)+((this||fc).y1-(this||fc).y0)*((this||fc).y1-(this||fc).y0));return{x:((this||fc).x1-(this||fc).x0)/ka,y:((this||fc).y1-(this||fc).y0)/ka}};W.prototype.getPropertiesAtLength=
function(ka){ka=this.getPointAtLength(ka);var Ia=this.getTangentAtLength();return{x:ka.x,y:ka.y,tangentX:Ia.x,tangentY:Ia.y}};var jha=function(ka){function Ia(Ra){if(!Ra)return null;var Fb;Ra=xha(Ra);for(var rb=[0,0],uc=[0,0],wb=0;wb<Ra.length;wb++)"M"===Ra[wb][0]?(rb=[Ra[wb][1],Ra[wb][2]],ab.push(null)):"m"===Ra[wb][0]?(rb=[Ra[wb][1]+rb[0],Ra[wb][2]+rb[1]],ab.push(null)):"L"===Ra[wb][0]?(Da+=Math.sqrt(Math.pow(rb[0]-Ra[wb][1],2)+Math.pow(rb[1]-Ra[wb][2],2)),ab.push(new Gq(rb[0],Ra[wb][1],rb[1],Ra[wb][2])),
rb=[Ra[wb][1],Ra[wb][2]]):"l"===Ra[wb][0]?(Da+=Math.sqrt(Math.pow(Ra[wb][1],2)+Math.pow(Ra[wb][2],2)),ab.push(new Gq(rb[0],Ra[wb][1]+rb[0],rb[1],Ra[wb][2]+rb[1])),rb=[Ra[wb][1]+rb[0],Ra[wb][2]+rb[1]]):"H"===Ra[wb][0]?(Da+=Math.abs(rb[0]-Ra[wb][1]),ab.push(new Gq(rb[0],Ra[wb][1],rb[1],rb[1])),rb[0]=Ra[wb][1]):"h"===Ra[wb][0]?(Da+=Math.abs(Ra[wb][1]),ab.push(new Gq(rb[0],rb[0]+Ra[wb][1],rb[1],rb[1])),rb[0]=Ra[wb][1]+rb[0]):"V"===Ra[wb][0]?(Da+=Math.abs(rb[1]-Ra[wb][1]),ab.push(new Gq(rb[0],rb[0],rb[1],
Ra[wb][1])),rb[1]=Ra[wb][1]):"v"===Ra[wb][0]?(Da+=Math.abs(Ra[wb][1]),ab.push(new Gq(rb[0],rb[0],rb[1],rb[1]+Ra[wb][1])),rb[1]=Ra[wb][1]+rb[1]):"z"===Ra[wb][0]||"Z"===Ra[wb][0]?(Da+=Math.sqrt(Math.pow(Ra[0][1]-rb[0],2)+Math.pow(Ra[0][2]-rb[1],2)),ab.push(new Gq(rb[0],Ra[0][1],rb[1],Ra[0][2])),rb=[Ra[0][1],Ra[0][2]]):"C"===Ra[wb][0]?(Fb=new uo(rb[0],rb[1],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4],Ra[wb][5],Ra[wb][6]),Da+=Fb.getTotalLength(),rb=[Ra[wb][5],Ra[wb][6]],ab.push(Fb)):"c"===Ra[wb][0]?(Fb=new uo(rb[0],
rb[1],rb[0]+Ra[wb][1],rb[1]+Ra[wb][2],rb[0]+Ra[wb][3],rb[1]+Ra[wb][4],rb[0]+Ra[wb][5],rb[1]+Ra[wb][6]),Da+=Fb.getTotalLength(),rb=[Ra[wb][5]+rb[0],Ra[wb][6]+rb[1]],ab.push(Fb)):"S"===Ra[wb][0]?(Fb=0<wb&&-1<["C","c","S","s"].indexOf(Ra[wb-1][0])?new uo(rb[0],rb[1],2*rb[0]-Ra[wb-1][Ra[wb-1].length-4],2*rb[1]-Ra[wb-1][Ra[wb-1].length-3],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4]):new uo(rb[0],rb[1],rb[0],rb[1],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4]),Da+=Fb.getTotalLength(),rb=[Ra[wb][3],Ra[wb][4]],ab.push(Fb)):
"s"===Ra[wb][0]?(Fb=0<wb&&-1<["C","c","S","s"].indexOf(Ra[wb-1][0])?new uo(rb[0],rb[1],rb[0]+Fb.d.x-Fb.c.x,rb[1]+Fb.d.y-Fb.c.y,rb[0]+Ra[wb][1],rb[1]+Ra[wb][2],rb[0]+Ra[wb][3],rb[1]+Ra[wb][4]):new uo(rb[0],rb[1],rb[0],rb[1],rb[0]+Ra[wb][1],rb[1]+Ra[wb][2],rb[0]+Ra[wb][3],rb[1]+Ra[wb][4]),Da+=Fb.getTotalLength(),rb=[Ra[wb][3]+rb[0],Ra[wb][4]+rb[1]],ab.push(Fb)):"Q"===Ra[wb][0]?(Fb=new uo(rb[0],rb[1],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4]),Da+=Fb.getTotalLength(),ab.push(Fb),rb=[Ra[wb][3],Ra[wb][4]],
uc=[Ra[wb][1],Ra[wb][2]]):"q"===Ra[wb][0]?(Fb=new uo(rb[0],rb[1],rb[0]+Ra[wb][1],rb[1]+Ra[wb][2],rb[0]+Ra[wb][3],rb[1]+Ra[wb][4]),Da+=Fb.getTotalLength(),uc=[rb[0]+Ra[wb][1],rb[1]+Ra[wb][2]],rb=[Ra[wb][3]+rb[0],Ra[wb][4]+rb[1]],ab.push(Fb)):"T"===Ra[wb][0]?(Fb=0<wb&&-1<["Q","q","T","t"].indexOf(Ra[wb-1][0])?new uo(rb[0],rb[1],2*rb[0]-uc[0],2*rb[1]-uc[1],Ra[wb][1],Ra[wb][2]):new Gq(rb[0],Ra[wb][1],rb[1],Ra[wb][2]),ab.push(Fb),Da+=Fb.getTotalLength(),uc=[2*rb[0]-uc[0],2*rb[1]-uc[1]],rb=[Ra[wb][1],Ra[wb][2]]):
"t"===Ra[wb][0]?(Fb=0<wb&&-1<["Q","q","T","t"].indexOf(Ra[wb-1][0])?new uo(rb[0],rb[1],2*rb[0]-uc[0],2*rb[1]-uc[1],rb[0]+Ra[wb][1],rb[1]+Ra[wb][2]):new Gq(rb[0],rb[0]+Ra[wb][1],rb[1],rb[1]+Ra[wb][2]),Da+=Fb.getTotalLength(),uc=[2*rb[0]-uc[0],2*rb[1]-uc[1]],rb=[Ra[wb][1]+rb[0],Ra[wb][2]+rb[0]],ab.push(Fb)):"A"===Ra[wb][0]?(Fb=new M2(rb[0],rb[1],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4],Ra[wb][5],Ra[wb][6],Ra[wb][7]),Da+=Fb.getTotalLength(),rb=[Ra[wb][6],Ra[wb][7]],ab.push(Fb)):"a"===Ra[wb][0]&&(Fb=new M2(rb[0],
rb[1],Ra[wb][1],Ra[wb][2],Ra[wb][3],Ra[wb][4],Ra[wb][5],rb[0]+Ra[wb][6],rb[1]+Ra[wb][7]),Da+=Fb.getTotalLength(),rb=[rb[0]+Ra[wb][6],rb[1]+Ra[wb][7]],ab.push(Fb)),Na.push(Da);return Ia}var Da=0,Na=[],ab=[];Ia.getTotalLength=function(){return Da};Ia.getPointAtLength=function(Ra){Ra=Lb(Ra);return ab[Ra.i].getPointAtLength(Ra.fraction)};Ia.getTangentAtLength=function(Ra){Ra=Lb(Ra);return ab[Ra.i].getTangentAtLength(Ra.fraction)};Ia.getPropertiesAtLength=function(Ra){Ra=Lb(Ra);return ab[Ra.i].getPropertiesAtLength(Ra.fraction)};
var Lb=function(Ra){0>Ra?Ra=0:Ra>Da&&(Ra=Da);for(var Fb=Na.length-1;Na[Fb]>=Ra&&0<Na[Fb];)Fb--;return Fb++,{fraction:Ra-Na[Fb-1],i:Fb}};return Ia(ka)},JP='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',kha=function(ka,Ia){for(var Da,Na,ab,Lb=ka.length,Ra=1/0,Fb=0;Fb<Lb;Fb++)!function(rb){Na=0;Ia.forEach(function(uc,
wb){uc=P(ka[(rb+wb)%Lb],uc);Na+=uc*uc});Na<Ra&&(Ra=Na,Da=rb)}(Fb);Da&&(ab=ka.splice(0,Da),ka.splice.apply(ka,[ka.length,0].concat(ab)))},rha=Ub;Ub.deviation=function(ka,Ia,Da,Na){var ab=Ia&&Ia.length,Lb=Math.abs(Dg(ka,0,ab?Ia[0]*Da:ka.length,Da));if(ab){ab=0;for(var Ra=Ia.length;ab<Ra;ab++)Lb-=Math.abs(Dg(ka,Ia[ab]*Da,ab<Ra-1?Ia[ab+1]*Da:ka.length,Da))}for(ab=Ia=0;ab<Na.length;ab+=3){Ra=Na[ab]*Da;var Fb=Na[ab+1]*Da,rb=Na[ab+2]*Da;Ia+=Math.abs((ka[Ra]-ka[rb])*(ka[Fb+1]-ka[Ra+1])-(ka[Ra]-ka[Fb])*(ka[rb+
1]-ka[Ra+1]))}return 0===Lb&&0===Ia?0:Math.abs((Ia-Lb)/Lb)};Ub.flatten=function(ka){for(var Ia=ka[0][0].length,Da={vertices:[],holes:[],dimensions:Ia},Na=0,ab=0;ab<ka.length;ab++){for(var Lb=0;Lb<ka[ab].length;Lb++)for(var Ra=0;Ra<Ia;Ra++)Da.vertices.push(ka[ab][Lb][Ra]);0<ab&&(Na+=ka[ab-1].length,Da.holes.push(Na))}return Da};var yha=function(ka){return ka},nha=function(ka){if(null==ka)return yha;var Ia,Da,Na=ka.scale[0],ab=ka.scale[1],Lb=ka.translate[0],Ra=ka.translate[1];return function(Fb,rb){rb||
(Ia=Da=0);rb=2;var uc=Fb.length,wb=Array(uc);wb[0]=(Ia+=Fb[0])*Na+Lb;for(wb[1]=(Da+=Fb[1])*ab+Ra;rb<uc;)wb[rb]=Fb[rb],++rb;return wb}},qha=function(ka,Ia){return"GeometryCollection"===Ia.type?{type:"FeatureCollection",features:Ia.geometries.map(function(Da){return eg(ka,Da)})}:eg(ka,Ia)},oha=function(ka,Ia){function Da(uc){var wb,kd=ka.arcs[0>uc?~uc:uc],Fd=kd[0];return ka.transform?(wb=[0,0],kd.forEach(function(Fe){wb[0]+=Fe[0];wb[1]+=Fe[1]})):wb=kd[kd.length-1],0>uc?[wb,Fd]:[Fd,wb]}function Na(uc,
wb){for(var kd in uc){var Fd=uc[kd];delete wb[Fd.start];delete Fd.start;delete Fd.end;Fd.forEach(function(Fe){ab[0>Fe?~Fe:Fe]=1});Fb.push(Fd)}}var ab={},Lb={},Ra={},Fb=[],rb=-1;return Ia.forEach(function(uc,wb){var kd,Fd=ka.arcs[0>uc?~uc:uc];3>Fd.length&&!Fd[1][0]&&!Fd[1][1]&&(kd=Ia[++rb],Ia[rb]=uc,Ia[wb]=kd)}),Ia.forEach(function(uc){var wb=Da(uc);var kd=wb[0],Fd=wb[1];(wb=Ra[kd])?(delete Ra[wb.end],wb.push(uc),wb.end=Fd,uc=Lb[Fd])?(delete Lb[uc.start],kd=uc===wb?wb:wb.concat(uc),Lb[kd.start=wb.start]=
Ra[kd.end=uc.end]=kd):Lb[wb.start]=Ra[wb.end]=wb:(wb=Lb[Fd])?(delete Lb[wb.start],wb.unshift(uc),wb.start=kd,uc=Ra[kd])?(delete Ra[uc.end],kd=uc===wb?wb:uc.concat(wb),Lb[kd.start=uc.start]=Ra[kd.end=wb.end]=kd):Lb[wb.start]=Ra[wb.end]=wb:(wb=[uc],Lb[wb.start=kd]=Ra[wb.end=Fd]=wb)}),Na(Ra,Lb),Na(Lb,Ra),Ia.forEach(function(uc){ab[0>uc?~uc:uc]||Fb.push([uc])}),Fb},N2=function(ka,Ia){for(var Da=0,Na=ka.length;Da<Na;){var ab=Da+Na>>>1;ka[ab]<Ia?Da=ab+1:Na=ab}return Da},pha=function(ka){function Ia(Ge,
$d){Ge.forEach(function(He){0>He&&(He=~He);var jm=ab[He];jm?jm.push($d):ab[He]=[$d]})}function Da(Ge,$d){Ge.forEach(function(He){Ia(He,$d)})}function Na(Ge,$d){"GeometryCollection"===Ge.type?Ge.geometries.forEach(function(He){Na(He,$d)}):Ge.type in Ra&&Ra[Ge.type](Ge.arcs,$d)}var ab={},Lb=ka.map(function(){return[]}),Ra={LineString:Ia,MultiLineString:Da,Polygon:Da,MultiPolygon:function(Ge,$d){Ge.forEach(function(He){Da(He,$d)})}};ka.forEach(Na);for(var Fb in ab){ka=ab[Fb];for(var rb=ka.length,uc=
0;uc<rb;++uc)for(var wb=uc+1;wb<rb;++wb){var kd,Fd=ka[uc],Fe=ka[wb];(kd=Lb[Fd])[Fb=N2(kd,Fe)]!==Fe&&kd.splice(Fb,0,Fe);(kd=Lb[Fe])[Fb=N2(kd,Fd)]!==Fd&&kd.splice(Fb,0,Fd)}}return Lb},J2=function(ka,Ia){return ka<Ia?-1:ka>Ia?1:ka>=Ia?0:NaN},K2=function(ka){return 1===ka.length&&(ka=oi(ka)),{left:function(Ia,Da,Na,ab){null==Na&&(Na=0);for(null==ab&&(ab=Ia.length);Na<ab;){var Lb=Na+ab>>>1;0>ka(Ia[Lb],Da)?Na=Lb+1:ab=Lb}return Na},right:function(Ia,Da,Na,ab){null==Na&&(Na=0);for(null==ab&&(ab=Ia.length);Na<
ab;){var Lb=Na+ab>>>1;0<ka(Ia[Lb],Da)?ab=Lb:Na=Lb+1}return Na}}};K2(J2);var sha=function(ka,Ia){return Ni(Ei(Oi(ka),ka),Ia)},tha=function(ka,Ia){if(8<ka.length)return ka.map(function(Na,ab){return ab});var Da=ka.map(function(Na){return Ia.map(function(ab){ab=P(Va(Na),Va(ab));return ab*ab})});return rh(ka,Ia,Da)};f.interpolate=function(ka,Ia,Da){void 0===Da&&(Da={});var Na=Da.maxSegmentLength;void 0===Na&&(Na=10);Da=Da.string;void 0===Da&&(Da=!0);var ab=ta(ka,Na);Na=ta(Ia,Na);var Lb=zb(ab,Na,Da);return!Da||
"string"!=typeof ka&&"string"!=typeof Ia?Lb:function(Ra){return 1E-4>Ra&&"string"==typeof ka?ka:1E-4>1-Ra&&"string"==typeof Ia?Ia:Lb(Ra)}};f.separate=pi;f.combine=function(ka,Ia,Da){void 0===Da&&(Da={});var Na=Da.maxSegmentLength;void 0===Na&&(Na=10);var ab=Da.string;void 0===ab&&(ab=!0);Da=Da.single;void 0===Da&&(Da=!1);var Lb=pi(Ia,ka,{maxSegmentLength:Na,string:ab,single:Da});return Da?function(Ra){return Lb(1-Ra)}:Lb.map(function(Ra){return function(Fb){return Ra(1-Fb)}})};f.interpolateAll=function(ka,
Ia,Da){void 0===Da&&(Da={});var Na=Da.maxSegmentLength;void 0===Na&&(Na=10);var ab=Da.string;void 0===ab&&(ab=!0);Da=Da.single;if(void 0===Da&&(Da=!1),!Array.isArray(ka)||!Array.isArray(Ia)||ka.length!==Ia.length||!ka.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Lb,Ra,Fb=function(uc){return ta(uc,Na)},
rb=ka.map(Fb);Fb=Ia.map(Fb);return Da?(ka.every(function(uc){return"string"==typeof uc})&&(Lb=ka.slice(0)),Ia.every(function(uc){return"string"==typeof uc})&&(Ra=Ia.slice(0))):(Lb=ka.slice(0),Ra=Ia.slice(0)),Pi(rb,Fb,{string:ab,single:Da,t0:Lb,t1:Ra,match:!1})};f.splitPathString=function(ka){return lb((new I2(ka)).abs())};f.toPathString=qa;f.fromCircle=qi;f.toCircle=function(ka,Ia,Da,Na,ab){var Lb=qi(Ia,Da,Na,ka,ab);return function(Ra){return Lb(1-Ra)}};f.fromRect=Qi;f.toRect=function(ka,Ia,Da,Na,
ab,Lb){var Ra=Qi(Ia,Da,Na,ab,ka,Lb);return function(Fb){return Ra(1-Fb)}};Object.defineProperty(f,"__esModule",{value:!0})});var zha={},Aha="function"===typeof Float32Array,Bha=zha=function(f,m,n,a){if(!(0<=f&&1>=f&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(f===m&&n===a)return o8;for(var d=Aha?new Float32Array(11):Array(11),k=0;11>k;++k)d[k]=QD(.1*k,f,n);return function(b){if(0===b)return 0;if(1===b)return 1;for(var e=0,l=1;10!==l&&d[l]<=b;++l)e+=.1;--l;l=e+(b-d[l])/(d[l+
1]-d[l])*.1;var p=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(.001<=p){for(e=0;4>e;++e){p=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(0===p)break;var q=QD(l,f,n)-b;l-=q/p}b=l}else if(0===p)b=l;else{l=e;e+=.1;var u=0;do q=l+(e-l)/2,p=QD(q,f,n)-b,0<p?e=q:l=q;while(1E-7<Math.abs(p)&&10>++u);b=q}return QD(b,m,a)}},Zb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},m={};!function(n,a){function d(){(this||Zb)._delay=0;(this||Zb)._endDelay=0;(this||Zb)._fill="none";
(this||Zb)._iterationStart=0;(this||Zb)._iterations=1;(this||Zb)._duration=0;(this||Zb)._playbackRate=1;(this||Zb)._direction="normal";(this||Zb)._easing="linear";(this||Zb)._easingFunction=A}function k(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function b(S,fa,aa){var oa=new d;return fa&&(oa.fill="both",oa.duration="auto"),"number"!=typeof S||isNaN(S)?void 0!==S&&Object.getOwnPropertyNames(S).forEach(function(Va){"auto"==S[Va]||
("number"==typeof oa[Va]||"duration"==Va)&&("number"!=typeof S[Va]||isNaN(S[Va]))||"fill"==Va&&-1==w.indexOf(S[Va])||"direction"==Va&&-1==y.indexOf(S[Va])||"playbackRate"==Va&&1!==S[Va]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(oa[Va]=S[Va])}):oa.duration=S,oa}function e(S,fa,aa,oa){return 0>S||1<S||0>aa||1<aa?A:function(Va){if(0>=Va){var lb=0;return 0<S?lb=fa/S:!fa&&0<aa&&(lb=oa/aa),lb*Va}if(1<=Va)return lb=0,1>aa?lb=(oa-1)/(aa-1):
1==aa&&1>S&&(lb=(fa-1)/(S-1)),1+lb*(Va-1);lb=0;for(var qa=1;lb<qa;){var ja=(lb+qa)/2,ta=3*S*(1-ja)*(1-ja)*ja+3*aa*(1-ja)*ja*ja+ja*ja*ja;if(1E-5>Math.abs(Va-ta))break;ta<Va?lb=ja:qa=ja}return 3*fa*(1-ja)*(1-ja)*ja+3*oa*(1-ja)*ja*ja+ja*ja*ja}}function l(S,fa){return function(aa){if(1<=aa)return 1;var oa=1/S;return(aa+=fa*oa)-aa%oa}}function p(S){V||(V=document.createElement("div").style);V.animationTimingFunction="";V.animationTimingFunction=S;var fa=V.animationTimingFunction;if(""==fa&&k())throw new TypeError(S+
" is not a valid value for easing");return fa}function q(S){if("linear"==S)return A;var fa=T.exec(S);return fa?e.apply(this||Zb,fa.slice(1).map(Number)):(fa=Y.exec(S))?l(Number(fa[1]),L):(fa=na.exec(S))?l(Number(fa[1]),{start:C,middle:E,end:L}[fa[2]]):I[S]||A}function u(S,fa,aa){if(null==fa)return Ba;var oa=aa.delay+S+aa.endDelay;return fa<Math.min(aa.delay,oa)?F:fa>=Math.min(aa.delay+S,oa)?W:P}var w=["backwards","forwards","both","none"],y=["reverse","alternate","alternate-reverse"],A=function(S){return S};
d.prototype={_setMember:function(S,fa){(this||Zb)["_"+S]=fa;(this||Zb)._effect&&((this||Zb)._effect._timingInput[S]=fa,(this||Zb)._effect._timing=n.normalizeTimingInput((this||Zb)._effect._timingInput),(this||Zb)._effect.activeDuration=n.calculateActiveDuration((this||Zb)._effect._timing),(this||Zb)._effect._animation&&(this||Zb)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||Zb)._playbackRate},set delay(S){this._setMember("delay",S)},get delay(){return(this||Zb)._delay},
set endDelay(S){this._setMember("endDelay",S)},get endDelay(){return(this||Zb)._endDelay},set fill(S){this._setMember("fill",S)},get fill(){return(this||Zb)._fill},set iterationStart(S){if((isNaN(S)||0>S)&&k())throw new TypeError("iterationStart must be a non-negative number, received: "+S);this._setMember("iterationStart",S)},get iterationStart(){return(this||Zb)._iterationStart},set duration(S){if("auto"!=S&&(isNaN(S)||0>S)&&k())throw new TypeError("duration must be non-negative or auto, received: "+
S);this._setMember("duration",S)},get duration(){return(this||Zb)._duration},set direction(S){this._setMember("direction",S)},get direction(){return(this||Zb)._direction},set easing(S){(this||Zb)._easingFunction=q(p(S));this._setMember("easing",S)},get easing(){return(this||Zb)._easing},set iterations(S){if((isNaN(S)||0>S)&&k())throw new TypeError("iterations must be non-negative, received: "+S);this._setMember("iterations",S)},get iterations(){return(this||Zb)._iterations}};var C=1,E=.5,L=0,I={ease:e(.25,
.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1),"step-start":l(1,C),"step-middle":l(1,E),"step-end":l(1,L)},V=null,T=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,Y=/steps\(\s*(\d+)\s*\)/,na=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Ba=0,F=1,W=2,P=3;n.cloneTimingInput=function(S){if("number"==typeof S)return S;var fa={},aa;for(aa in S)fa[aa]=S[aa];return fa};n.makeTiming=
b;n.numericTimingToObject=function(S){return"number"==typeof S&&(S=isNaN(S)?{duration:0}:{duration:S}),S};n.normalizeTimingInput=function(S,fa){return S=n.numericTimingToObject(S),b(S,fa)};n.calculateActiveDuration=function(S){return Math.abs((0===S.duration||0===S.iterations?0:S.duration*S.iterations)/S.playbackRate)};n.calculateIterationProgress=function(S,fa,aa){var oa=u(S,fa,aa);a:{var Va=aa.fill;switch(oa){case F:S="backwards"==Va||"both"==Va?0:null;break a;case P:S=fa-aa.delay;break a;case W:S=
"forwards"==Va||"both"==Va?S:null;break a;case Ba:S=null;break a}S=void 0}if(null===S)return null;fa=aa.duration;Va=aa.iterationStart;fa=(0===fa?oa!==F&&(Va+=aa.iterations):Va+=S/fa,Va);Va=fa===1/0?aa.iterationStart%1:fa%1;S=(0!==Va||oa!==W||0===aa.iterations||0===S&&0!==aa.duration||(Va=1),Va);Va=oa===W&&aa.iterations===1/0?1/0:1===S?Math.floor(fa)-1:Math.floor(fa);fa=oa=aa.direction;"normal"!==oa&&"reverse"!==oa&&("alternate-reverse"===oa&&(Va+=1),fa="normal",Va!==1/0&&0!=Va%2&&(fa="reverse"));
return aa._easingFunction("normal"===fa?S:1-S)};n.calculatePhase=u;n.normalizeEasing=p;n.parseEasingFunction=q}(f);(function(n,a){function d(l){var p=[],q;for(q in l)if(!(q in["easing","offset","composite"])){var u=l[q];Array.isArray(u)||(u=[u]);for(var w,y=u.length,A=0;A<y;A++)w={},w.offset="offset"in l?l.offset:1==y?1:A/(y-1),"easing"in l&&(w.easing=l.easing),"composite"in l&&(w.composite=l.composite),w[q]=u[A],p.push(w)}return p.sort(function(C,E){return C.offset-E.offset}),p}var k={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},b=document.createElementNS("http://www.w3.org/1999/xhtml","div");a={thin:"1px",medium:"3px",thick:"5px"};var e={borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a,borderTopWidth:a,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:a,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=d;n.normalizeKeyframes=function(l){function p(){var A=q.length;null==q[A-1].offset&&(q[A-1].offset=1);1<A&&null==q[0].offset&&(q[0].offset=0);for(var C=0,E=q[0].offset,L=1;L<A;L++){var I=q[L].offset;if(null!=I){for(var V=1;V<L-C;V++)q[C+V].offset=E+(I-E)*V/(L-C);C=L;E=I}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=d(l));var q=l.map(function(A){var C={},E;for(E in A){var L=A[E];if("offset"==
E){if(null!=L){if(L=Number(L),!isFinite(L))throw new TypeError("Keyframe offsets must be numbers.");if(0>L||1<L)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==E){if("add"==L||"accumulate"==L)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=L)throw new TypeError("Invalid composite mode "+L+".");}else L="easing"==E?n.normalizeEasing(L):""+L;var I=void 0,V=E,T=L;L=C;var Y=V;if("display"!==
Y&&0!==Y.lastIndexOf("animation",0)&&0!==Y.lastIndexOf("transition",0))if(Y=k[V])for(I in b.style[V]=T,Y)V=Y[I],T=b.style[V],L[V]=V in e?e[V][T]||T:T;else L[V]=V in e?e[V][T]||T:T}return void 0==C.offset&&(C.offset=null),void 0==C.easing&&(C.easing="linear"),C});l=!0;for(var u=-1/0,w=0;w<q.length;w++){var y=q[w].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else l=!1}return q=q.filter(function(A){return 0<=A.offset&&1>=A.offset}),
l||p(),q}})(f);(function(n){var a={};n.isDeprecated=function(d,k,b,e){e=e?"are":"is";var l=new Date;k=new Date(k);return k.setMonth(k.getMonth()+3),!(l<k&&(d in a||console.warn("Web Animations: "+d+" "+e+" deprecated and will stop working on "+k.toDateString()+". "+b),a[d]=!0,1))};n.deprecated=function(d,k,b,e){var l=e?"are":"is";if(n.isDeprecated(d,k,b,e))throw Error(d+" "+l+" no longer supported. "+b);}})(f);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),a=!0;if(n&&(a=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===n[d]&&(a=!0)})),!a)return}!function(d,k,b){function e(p){for(var q={},u=0;u<p.length;u++)for(var w in p[u])if("offset"!=w&&"easing"!=w&&"composite"!=w){var y={offset:p[u].offset,easing:p[u].easing,value:p[u][w]};q[w]=q[w]||[];q[w].push(y)}for(var A in q)if(p=q[A],0!=p[0].offset||1!=p[p.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return q}function l(p){var q=[],u;for(u in p)for(var w=p[u],y=0;y<w.length-1;y++){var A=y,C=y+1,E=w[A].offset,L=w[C].offset,I=E,V=L;0==y&&(I=-1/0,0==L&&(C=A));y==w.length-2&&(V=1/0,1==E&&(A=C));q.push({applyFrom:I,applyTo:V,startOffset:w[A].offset,endOffset:w[C].offset,easingFunction:d.parseEasingFunction(w[A].easing),property:u,interpolation:k.propertyInterpolation(u,w[A].value,w[C].value)})}return q.sort(function(T,Y){return T.startOffset-Y.startOffset}),
q}k.convertEffectInput=function(p){p=d.normalizeKeyframes(p);var q=e(p),u=l(q);return function(w,y){if(null!=y)u.filter(function(C){return y>=C.applyFrom&&y<C.applyTo}).forEach(function(C){var E=y-C.startOffset,L=C.endOffset-C.startOffset;E=0==L?0:C.easingFunction(E/L);k.apply(w,C.property,C.interpolation(E))});else for(var A in q)"offset"!=A&&"easing"!=A&&"composite"!=A&&k.clear(w,A)}}}(f,m);(function(d,k,b){function e(q){return q.replace(/-(.)/g,function(u,w){return w.toUpperCase()})}var l={};k.addPropertiesHandler=
function(q,u,w){for(var y=0;y<w.length;y++){var A=q,C=u,E=e(w[y]);l[E]=l[E]||[];l[E].push([A,C])}};var p={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};k.propertyInterpolation=function(q,u,w){var y=q;/-/.test(q)&&!d.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(y=e(q));"initial"!=u&&"initial"!=w||("initial"==u&&(u=p[y]),"initial"==w&&(w=p[y]));q=u==w?[]:l[y];for(y=0;q&&y<q.length;y++){var A=q[y][0](u),C=q[y][0](w);if(void 0!==A&&void 0!==C&&(A=
q[y][1](A,C))){var E=k.Interpolation.apply(null,A);return function(L){return 0==L?u:1==L?w:E(L)}}}return k.Interpolation(!1,!0,function(L){return L?w:u})}})(f,m);(function(d,k,b){function e(l){var p=d.calculateActiveDuration(l),q=function(u){return d.calculateIterationProgress(p,u,l)};return q._totalDuration=l.delay+p+l.endDelay,q}k.KeyframeEffect=function(l,p,q,u){var w,y=e(d.normalizeTimingInput(q)),A=k.convertEffectInput(p);p=function(){A(l,w)};return p._update=function(C){return null!==(w=y(C))},
p._clear=function(){A(l,null)},p._hasSameTarget=function(C){return l===C},p._target=l,p._totalDuration=y._totalDuration,p._id=u,p}})(f,m);(function(d,k){function b(A,C,E){E.enumerable=!0;E.configurable=!0;Object.defineProperty(A,C,E)}function e(A){(this||Zb)._element=A;(this||Zb)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||Zb)._style=A.style;(this||Zb)._length=0;(this||Zb)._isAnimatedProperty={};var C=window;A=!(!A.namespaceURI||-1==A.namespaceURI.indexOf("/svg"))&&
(p in C||(C[p]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(C.navigator.userAgent)),C[p]);(this||Zb)._updateSvgTransformAttr=A;(this||Zb)._savedTransformAttr=null;for(A=0;A<(this||Zb)._style.length;A++)C=(this||Zb)._style[A],(this||Zb)._surrogateStyle[C]=(this||Zb)._style[C];this._updateIndices()}function l(A){if(!A._webAnimationsPatchedStyle){var C=new e(A);try{b(A,"style",{get:function(){return C}})}catch(E){A.style._set=function(L,I){A.style[L]=I},A.style._clear=function(L){A.style[L]=""}}A._webAnimationsPatchedStyle=
A.style}}var p="_webAnimationsUpdateSvgTransformAttr";k={cssText:1,length:1,parentRule:1};var q={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};e.prototype={get cssText(){return(this||Zb)._surrogateStyle.cssText},set cssText(A){for(var C={},E=0;E<(this||Zb)._surrogateStyle.length;E++)C[(this||Zb)._surrogateStyle[E]]=!0;(this||Zb)._surrogateStyle.cssText=A;this._updateIndices();for(E=0;E<(this||Zb)._surrogateStyle.length;E++)C[(this||
Zb)._surrogateStyle[E]]=!0;for(var L in C)(this||Zb)._isAnimatedProperty[L]||(this||Zb)._style.setProperty(L,(this||Zb)._surrogateStyle.getPropertyValue(L))},get length(){return(this||Zb)._surrogateStyle.length},get parentRule(){return(this||Zb)._style.parentRule},_updateIndices:function(){for(;(this||Zb)._length<(this||Zb)._surrogateStyle.length;)Object.defineProperty(this||Zb,(this||Zb)._length,{configurable:!0,enumerable:!1,get:function(A){return function(){return(this||Zb)._surrogateStyle[A]}}((this||
Zb)._length)}),(this||Zb)._length++;for(;(this||Zb)._length>(this||Zb)._surrogateStyle.length;)(this||Zb)._length--,Object.defineProperty(this||Zb,(this||Zb)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(A,C){(this||Zb)._style[A]=C;(this||Zb)._isAnimatedProperty[A]=!0;(this||Zb)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(A)&&(null==(this||Zb)._savedTransformAttr&&((this||Zb)._savedTransformAttr=(this||Zb)._element.getAttribute("transform")),(this||Zb)._element.setAttribute("transform",
d.transformToSvgMatrix(C)))},_clear:function(A){(this||Zb)._style[A]=(this||Zb)._surrogateStyle[A];(this||Zb)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(A)&&((this||Zb)._savedTransformAttr?(this||Zb)._element.setAttribute("transform",(this||Zb)._savedTransformAttr):(this||Zb)._element.removeAttribute("transform"),(this||Zb)._savedTransformAttr=null);delete (this||Zb)._isAnimatedProperty[A]}};for(var w in q)e.prototype[w]=function(A,C){return function(){var E=(this||Zb)._surrogateStyle[A].apply((this||
Zb)._surrogateStyle,arguments);return C&&((this||Zb)._isAnimatedProperty[arguments[0]]||(this||Zb)._style[A].apply((this||Zb)._style,arguments),this._updateIndices()),E}}(w,w in u);for(var y in document.documentElement.style)y in k||y in q||function(A){b(e.prototype,A,{get:function(){return(this||Zb)._surrogateStyle[A]},set:function(C){(this||Zb)._surrogateStyle[A]=C;this._updateIndices();(this||Zb)._isAnimatedProperty[A]||((this||Zb)._style[A]=C)}})}(y);d.apply=function(A,C,E){l(A);A.style._set(d.propertyName(C),
E)};d.clear=function(A,C){A._webAnimationsPatchedStyle&&A.style._clear(d.propertyName(C))}})(m);(function(d){window.Element.prototype.animate=function(k,b){var e="";return b&&b.id&&(e=b.id),d.timeline._play(d.KeyframeEffect(this||Zb,k,b,e))}})(m);(function(d,k){function b(e,l,p){if("number"==typeof e&&"number"==typeof l)return e*(1-p)+l*p;if("boolean"==typeof e&&"boolean"==typeof l)return.5>p?e:l;if(e.length==l.length){for(var q=[],u=0;u<e.length;u++)q.push(b(e[u],l[u],p));return q}throw"Mismatched interpolation arguments "+
e+":"+l;}d.Interpolation=function(e,l,p){return function(q){return p(b(e,l,q))}}})(m);(function(d,k){k=function(){function b(e,l){for(var p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],q=0;4>q;q++)for(var u=0;4>u;u++)for(var w=0;4>w;w++)p[q][u]+=l[q][w]*e[w][u];return p}return function(e,l,p,q,u){for(var w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)w[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)w[3][y]+=e[u]*w[u][y];e=q[0];y=q[1];u=q[2];q=q[3];var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
A[0][0]=1-2*(y*y+u*u);A[0][1]=2*(e*y-u*q);A[0][2]=2*(e*u+y*q);A[1][0]=2*(e*y+u*q);A[1][1]=1-2*(e*e+u*u);A[1][2]=2*(y*u-e*q);A[2][0]=2*(e*u-y*q);A[2][1]=2*(y*u+e*q);A[2][2]=1-2*(e*e+y*y);w=b(w,A);q=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[2]&&(q[2][1]=p[2],w=b(w,q));p[1]&&(q[2][1]=0,q[2][0]=p[0],w=b(w,q));p[0]&&(q[2][0]=0,q[1][0]=p[0],w=b(w,q));for(y=0;3>y;y++)for(u=0;3>u;u++)w[y][u]*=l[y];return 0==w[0][2]&&0==w[0][3]&&0==w[1][2]&&0==w[1][3]&&0==w[2][0]&&0==w[2][1]&&1==w[2][2]&&0==w[2][3]&&0==
w[3][2]&&1==w[3][3]?[w[0][0],w[0][1],w[1][0],w[1][1],w[3][0],w[3][1]]:w[0].concat(w[1],w[2],w[3])}}();d.composeMatrix=k;d.quat=function(b,e,l){var p=d.dot(b,e);p=Math.max(Math.min(p,1),-1);var q=[];if(1===p)q=b;else for(var u=Math.acos(p),w=1*Math.sin(l*u)/Math.sqrt(1-p*p),y=0;4>y;y++)q.push(b[y]*(Math.cos(l*u)-p*w)+e[y]*w);return q}})(m);(function(d,k,b){d.sequenceNumber=0;var e=function(l,p,q){(this||Zb).target=l;(this||Zb).currentTime=p;(this||Zb).timelineTime=q;(this||Zb).type="finish";(this||
Zb).bubbles=!1;(this||Zb).cancelable=!1;(this||Zb).currentTarget=l;(this||Zb).defaultPrevented=!1;(this||Zb).eventPhase=Event.AT_TARGET;(this||Zb).timeStamp=Date.now()};k.Animation=function(l){(this||Zb).id="";l&&l._id&&((this||Zb).id=l._id);(this||Zb)._sequenceNumber=d.sequenceNumber++;(this||Zb)._currentTime=0;(this||Zb)._startTime=null;(this||Zb)._paused=!1;(this||Zb)._playbackRate=1;(this||Zb)._inTimeline=!0;(this||Zb)._finishedFlag=!0;(this||Zb).onfinish=null;(this||Zb)._finishHandlers=[];(this||
Zb)._effect=l;(this||Zb)._inEffect=(this||Zb)._effect._update(0);(this||Zb)._idle=!0;(this||Zb)._currentTimePending=!1};k.Animation.prototype={_ensureAlive:function(){0>(this||Zb).playbackRate&&0===(this||Zb).currentTime?(this||Zb)._inEffect=(this||Zb)._effect._update(-1):(this||Zb)._inEffect=(this||Zb)._effect._update((this||Zb).currentTime);(this||Zb)._inTimeline||!(this||Zb)._inEffect&&(this||Zb)._finishedFlag||((this||Zb)._inTimeline=!0,k.timeline._animations.push(this||Zb))},_tickCurrentTime:function(l,
p){l!=(this||Zb)._currentTime&&((this||Zb)._currentTime=l,(this||Zb)._isFinished&&!p&&((this||Zb)._currentTime=0<(this||Zb)._playbackRate?(this||Zb)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||Zb)._idle||(this||Zb)._currentTimePending?null:(this||Zb)._currentTime},set currentTime(l){l=+l;isNaN(l)||(k.restart(),(this||Zb)._paused||null==(this||Zb)._startTime||((this||Zb)._startTime=(this||Zb)._timeline.currentTime-l/(this||Zb)._playbackRate),(this||Zb)._currentTimePending=
!1,(this||Zb)._currentTime!=l&&((this||Zb)._idle&&((this||Zb)._idle=!1,(this||Zb)._paused=!0),this._tickCurrentTime(l,!0),k.applyDirtiedAnimation(this||Zb)))},get startTime(){return(this||Zb)._startTime},set startTime(l){l=+l;isNaN(l)||(this||Zb)._paused||(this||Zb)._idle||((this||Zb)._startTime=l,this._tickCurrentTime(((this||Zb)._timeline.currentTime-(this||Zb)._startTime)*(this||Zb).playbackRate),k.applyDirtiedAnimation(this||Zb))},get playbackRate(){return(this||Zb)._playbackRate},set playbackRate(l){if(l!=
(this||Zb)._playbackRate){var p=(this||Zb).currentTime;(this||Zb)._playbackRate=l;(this||Zb)._startTime=null;"paused"!=(this||Zb).playState&&"idle"!=(this||Zb).playState&&((this||Zb)._finishedFlag=!1,(this||Zb)._idle=!1,this._ensureAlive(),k.applyDirtiedAnimation(this||Zb));null!=p&&((this||Zb).currentTime=p)}},get _isFinished(){return!(this||Zb)._idle&&(0<(this||Zb)._playbackRate&&(this||Zb)._currentTime>=(this||Zb)._totalDuration||0>(this||Zb)._playbackRate&&0>=(this||Zb)._currentTime)},get _totalDuration(){return(this||
Zb)._effect._totalDuration},get playState(){return(this||Zb)._idle?"idle":null==(this||Zb)._startTime&&!(this||Zb)._paused&&0!=(this||Zb).playbackRate||(this||Zb)._currentTimePending?"pending":(this||Zb)._paused?"paused":(this||Zb)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||Zb)._playbackRate)(this||Zb)._currentTime=0;else{if(!((this||Zb)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||Zb)._currentTime=(this||Zb)._totalDuration}},play:function(){(this||Zb)._paused=!1;((this||Zb)._isFinished||(this||Zb)._idle)&&(this._rewind(),(this||Zb)._startTime=null);(this||Zb)._finishedFlag=!1;(this||Zb)._idle=!1;this._ensureAlive();k.applyDirtiedAnimation(this||Zb)},pause:function(){(this||Zb)._isFinished||(this||Zb)._paused||(this||Zb)._idle?(this||Zb)._idle&&(this._rewind(),(this||Zb)._idle=!1):(this||Zb)._currentTimePending=!0;(this||Zb)._startTime=null;(this||Zb)._paused=!0},finish:function(){(this||
Zb)._idle||((this||Zb).currentTime=0<(this||Zb)._playbackRate?(this||Zb)._totalDuration:0,(this||Zb)._startTime=(this||Zb)._totalDuration-(this||Zb).currentTime,(this||Zb)._currentTimePending=!1,k.applyDirtiedAnimation(this||Zb))},cancel:function(){(this||Zb)._inEffect&&((this||Zb)._inEffect=!1,(this||Zb)._idle=!0,(this||Zb)._paused=!1,(this||Zb)._finishedFlag=!0,(this||Zb)._currentTime=0,(this||Zb)._startTime=null,(this||Zb)._effect._update(null),k.applyDirtiedAnimation(this||Zb))},reverse:function(){(this||
Zb).playbackRate*=-1;this.play()},addEventListener:function(l,p){"function"==typeof p&&"finish"==l&&(this||Zb)._finishHandlers.push(p)},removeEventListener:function(l,p){"finish"==l&&(l=(this||Zb)._finishHandlers.indexOf(p),0<=l&&(this||Zb)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||Zb)._isFinished){if(!(this||Zb)._finishedFlag){var p=new e(this||Zb,(this||Zb)._currentTime,l),q=(this||Zb)._finishHandlers.concat((this||Zb).onfinish?[(this||Zb).onfinish]:[]);setTimeout(function(){q.forEach(function(u){u.call(p.target,
p)})},0);(this||Zb)._finishedFlag=!0}}else(this||Zb)._finishedFlag=!1},_tick:function(l,p){(this||Zb)._idle||(this||Zb)._paused||(null==(this||Zb)._startTime?p&&((this||Zb).startTime=l-(this||Zb)._currentTime/(this||Zb).playbackRate):(this||Zb)._isFinished||this._tickCurrentTime((l-(this||Zb)._startTime)*(this||Zb).playbackRate));p&&((this||Zb)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||Zb).playState in{pending:1,running:1}||!(this||Zb)._finishedFlag},_targetAnimations:function(){var l=
(this||Zb)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||Zb)&&l.push(this||Zb)},_unmarkTarget:function(){var l=this._targetAnimations(),p=l.indexOf(this||Zb);-1!==p&&l.splice(p,1)}}})(f,m);(function(d,k,b){function e(T){var Y=y;y=[];T<V.currentTime&&(T=V.currentTime);V._animations.sort(l);V._animations=u(T,!0,V._animations)[0];Y.forEach(function(na){na[1](T)});q()}function l(T,Y){return T._sequenceNumber-
Y._sequenceNumber}function p(){(this||Zb)._animations=[];(this||Zb).currentTime=window.performance&&performance.now?performance.now():0}function q(){L.forEach(function(T){T()});L.length=0}function u(T,Y,na){I=!0;E=!1;k.timeline.currentTime=T;C=!1;var Ba=[],F=[],W=[],P=[];return na.forEach(function(S){S._tick(T,Y);S._inEffect?(F.push(S._effect),S._markTarget()):(Ba.push(S._effect),S._unmarkTarget());S._needsTick&&(C=!0);var fa=S._inEffect||S._needsTick;(S._inTimeline=fa)?W.push(S):P.push(S)}),L.push.apply(L,
Ba),L.push.apply(L,F),C&&requestAnimationFrame(function(){}),I=!1,[W,P]}var w=window.requestAnimationFrame,y=[],A=0;window.requestAnimationFrame=function(T){var Y=A++;return 0==y.length&&w(e),y.push([Y,T]),Y};window.cancelAnimationFrame=function(T){y.forEach(function(Y){Y[0]==T&&(Y[1]=function(){})})};p.prototype={_play:function(T){T._timing=d.normalizeTimingInput(T.timing);T=new k.Animation(T);return T._idle=!1,T._timeline=this||Zb,(this||Zb)._animations.push(T),k.restart(),k.applyDirtiedAnimation(T),
T}};var C=!1,E=!1;k.restart=function(){return C||(C=!0,requestAnimationFrame(function(){}),E=!0),E};k.applyDirtiedAnimation=function(T){I||(T._markTarget(),T=T._targetAnimations(),T.sort(l),u(k.timeline.currentTime,!1,T.slice())[1].forEach(function(Y){Y=V._animations.indexOf(Y);-1!==Y&&V._animations.splice(Y,1)}),q())};var L=[],I=!1,V=new p;k.timeline=V})(f,m);(function(d,k){function b(w,y){for(var A=0,C=0;C<w.length;C++)A+=w[C]*y[C];return A}function e(w,y){return[w[0]*y[0]+w[4]*y[1]+w[8]*y[2]+w[12]*
y[3],w[1]*y[0]+w[5]*y[1]+w[9]*y[2]+w[13]*y[3],w[2]*y[0]+w[6]*y[1]+w[10]*y[2]+w[14]*y[3],w[3]*y[0]+w[7]*y[1]+w[11]*y[2]+w[15]*y[3],w[0]*y[4]+w[4]*y[5]+w[8]*y[6]+w[12]*y[7],w[1]*y[4]+w[5]*y[5]+w[9]*y[6]+w[13]*y[7],w[2]*y[4]+w[6]*y[5]+w[10]*y[6]+w[14]*y[7],w[3]*y[4]+w[7]*y[5]+w[11]*y[6]+w[15]*y[7],w[0]*y[8]+w[4]*y[9]+w[8]*y[10]+w[12]*y[11],w[1]*y[8]+w[5]*y[9]+w[9]*y[10]+w[13]*y[11],w[2]*y[8]+w[6]*y[9]+w[10]*y[10]+w[14]*y[11],w[3]*y[8]+w[7]*y[9]+w[11]*y[10]+w[15]*y[11],w[0]*y[12]+w[4]*y[13]+w[8]*y[14]+
w[12]*y[15],w[1]*y[12]+w[5]*y[13]+w[9]*y[14]+w[13]*y[15],w[2]*y[12]+w[6]*y[13]+w[10]*y[14]+w[14]*y[15],w[3]*y[12]+w[7]*y[13]+w[11]*y[14]+w[15]*y[15]]}function l(w){return 2*((w.deg||0)/360+(w.grad||0)/400+(w.turn||0))*Math.PI+(w.rad||0)}function p(w){switch(w.t){case "rotatex":return w=l(w.d[0]),[1,0,0,0,0,Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1];case "rotatey":return w=l(w.d[0]),[Math.cos(w),0,-Math.sin(w),0,0,1,0,0,Math.sin(w),0,Math.cos(w),0,0,0,0,1];case "rotate":case "rotatez":return w=
l(w.d[0]),[Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=w.d[0],A=w.d[1],C=w.d[2];w=l(w.d[3]);var E=y*y+A*A+C*C;0===E?(y=1,C=A=0):1!==E&&(E=Math.sqrt(E),y/=E,A/=E,C/=E);E=Math.sin(w/2);w=E*Math.cos(w/2);E*=E;return[1-2*(A*A+C*C)*E,2*(y*A*E+C*w),2*(y*C*E-A*w),0,2*(y*A*E-C*w),1-2*(y*y+C*C)*E,2*(A*C*E+y*w),0,2*(y*C*E+A*w),2*(A*C*E-y*w),1-2*(y*y+A*A)*E,0,0,0,0,1];case "scale":return[w.d[0],0,0,0,0,w.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[w.d[0],
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,w.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,w.d[0],0,0,0,0,1];case "scale3d":return[w.d[0],0,0,0,0,w.d[1],0,0,0,0,w.d[2],0,0,0,0,1];case "skew":return y=l(w.d[0]),A=l(w.d[1]),[1,Math.tan(A),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return w=l(w.d[0]),[1,0,0,0,Math.tan(w),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return w=l(w.d[0]),[1,Math.tan(w),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=w.d[0].px||
0,A=w.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,A,0,1];case "translatex":return y=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return A=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,A,0,1];case "translatez":return C=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,C,1];case "translate3d":return y=w.d[0].px||0,A=w.d[1].px||0,C=w.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,A,C,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,w.d[0].px?-1/w.d[0].px:0,0,0,0,1];case "matrix":return[w.d[0],w.d[1],0,0,w.d[2],
w.d[3],0,0,0,0,1,0,w.d[4],w.d[5],0,1];case "matrix3d":return w.d}}function q(w){return 0===w.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:w.map(p).reduce(e)}var u=function(){function w(E){return E[0][0]*E[1][1]*E[2][2]+E[1][0]*E[2][1]*E[0][2]+E[2][0]*E[0][1]*E[1][2]-E[0][2]*E[1][1]*E[2][0]-E[1][2]*E[2][1]*E[0][0]-E[2][2]*E[0][1]*E[1][0]}function y(E){var L=A(E);return[E[0]/L,E[1]/L,E[2]/L]}function A(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2])}function C(E,L,I,V){return[I*E[0]+V*L[0],I*E[1]+V*
L[1],I*E[2]+V*L[2]]}return function(E){E=[E.slice(0,4),E.slice(4,8),E.slice(8,12),E.slice(12,16)];if(1!==E[3][3])return null;for(var L=[],I=0;4>I;I++)L.push(E[I].slice());for(I=0;3>I;I++)L[I][3]=0;if(0===w(L))return null;var V=[];if(E[0][3]||E[1][3]||E[2][3]){V.push(E[0][3]);V.push(E[1][3]);V.push(E[2][3]);V.push(E[3][3]);var T=1/w(L),Y=L[0][0],na=L[0][1];I=L[0][2];var Ba=L[1][0],F=L[1][1],W=L[1][2],P=L[2][0],S=L[2][1],fa=L[2][2];T=[[(F*fa-W*S)*T,(I*S-na*fa)*T,(na*W-I*F)*T,0],[(W*P-Ba*fa)*T,(Y*fa-
I*P)*T,(I*Ba-Y*W)*T,0],[(Ba*S-F*P)*T,(P*na-Y*S)*T,(Y*F-na*Ba)*T,0]];Y=[];for(na=0;3>na;na++){for(Ba=I=0;3>Ba;Ba++)I+=L[3][Ba]*T[Ba][na];Y.push(I)}L=(Y.push(1),T.push(Y),T);L=[[L[0][0],L[1][0],L[2][0],L[3][0]],[L[0][1],L[1][1],L[2][1],L[3][1]],[L[0][2],L[1][2],L[2][2],L[3][2]],[L[0][3],L[1][3],L[2][3],L[3][3]]];T=[];for(Y=0;4>Y;Y++){for(I=na=0;4>I;I++)na+=V[I]*L[I][Y];T.push(na)}V=T}else V=[0,0,0,1];L=E[3].slice(0,3);T=[];T.push(E[0].slice(0,3));Y=[];Y.push(A(T[0]));T[0]=y(T[0]);na=[];T.push(E[1].slice(0,
3));na.push(b(T[0],T[1]));T[1]=C(T[1],T[0],1,-na[0]);Y.push(A(T[1]));T[1]=y(T[1]);na[0]/=Y[1];T.push(E[2].slice(0,3));na.push(b(T[0],T[2]));T[2]=C(T[2],T[0],1,-na[1]);na.push(b(T[1],T[2]));T[2]=C(T[2],T[1],1,-na[2]);Y.push(A(T[2]));T[2]=y(T[2]);na[1]/=Y[2];na[2]/=Y[2];E=T[1];I=T[2];if(0>b(T[0],[E[1]*I[2]-E[2]*I[1],E[2]*I[0]-E[0]*I[2],E[0]*I[1]-E[1]*I[0]]))for(I=0;3>I;I++)Y[I]*=-1,T[I][0]*=-1,T[I][1]*=-1,T[I][2]*=-1;var aa,oa;E=T[0][0]+T[1][1]+T[2][2]+1;return 1E-4<E?(aa=.5/Math.sqrt(E),oa=[(T[2][1]-
T[1][2])*aa,(T[0][2]-T[2][0])*aa,(T[1][0]-T[0][1])*aa,.25/aa]):T[0][0]>T[1][1]&&T[0][0]>T[2][2]?(aa=2*Math.sqrt(1+T[0][0]-T[1][1]-T[2][2]),oa=[.25*aa,(T[0][1]+T[1][0])/aa,(T[0][2]+T[2][0])/aa,(T[2][1]-T[1][2])/aa]):T[1][1]>T[2][2]?(aa=2*Math.sqrt(1+T[1][1]-T[0][0]-T[2][2]),oa=[(T[0][1]+T[1][0])/aa,.25*aa,(T[1][2]+T[2][1])/aa,(T[0][2]-T[2][0])/aa]):(aa=2*Math.sqrt(1+T[2][2]-T[0][0]-T[1][1]),oa=[(T[0][2]+T[2][0])/aa,(T[1][2]+T[2][1])/aa,.25*aa,(T[1][0]-T[0][1])/aa]),[L,Y,na,oa,V]}}();d.dot=b;d.makeMatrixDecomposition=
function(w){return[u(q(w))]};d.transformListToMatrix=q})(m);(function(d){function k(p,q){var u=p.exec(q);if(u)return u=p.ignoreCase?u[0].toLowerCase():u[0],[u,q.substr(u.length)]}function b(p,q){q=q.replace(/^\s*/,"");if(p=p(q))return[p[0],p[1].replace(/^\s*/,"")]}function e(p,q){for(var u=p,w=q;u&&w;)u>w?u%=w:w%=u;return p*q/(u+w)}function l(p,q,u,w,y){for(var A=[],C=[],E=[],L=e(w.length,y.length),I=0;I<L;I++){var V=q(w[I%w.length],y[I%y.length]);if(!V)return;A.push(V[0]);C.push(V[1]);E.push(V[2])}return[A,
C,function(T){T=T.map(function(Y,na){return E[na](Y)}).join(u);return p?p(T):T}]}d.consumeToken=k;d.consumeTrimmed=b;d.consumeRepeated=function(p,q,u){p=b.bind(null,p);for(var w=[];;){var y=p(u);if(!y||(w.push(y[0]),u=y[1],!(y=k(q,u))||""==y[1]))return[w,u];u=y[1]}};d.consumeParenthesised=function(p,q){for(var u=0,w=0;w<q.length&&(!/\s|,/.test(q[w])||0!=u);w++)if("("==q[w])u++;else if(")"==q[w]&&(u--,0==u&&w++,0>=u))break;p=p(q.substr(0,w));return void 0==p?void 0:[p,q.substr(w)]};d.ignore=function(p){return function(q){q=
p(q);return q&&(q[0]=void 0),q}};d.optional=function(p,q){return function(u){return p(u)||[q,u]}};d.consumeList=function(p,q){for(var u=[],w=0;w<p.length;w++){q=d.consumeTrimmed(p[w],q);if(!q||""==q[0])return;void 0!==q[0]&&u.push(q[0]);q=q[1]}if(""==q)return u};d.mergeNestedRepeated=l.bind(null,null);d.mergeWrappedNestedRepeated=l;d.mergeList=function(p,q,u){for(var w=[],y=[],A=[],C=0,E=0;E<u.length;E++)if("function"==typeof u[E]){var L=u[E](p[C],q[C++]);w.push(L[0]);y.push(L[1]);A.push(L[2])}else!function(I){w.push(!1);
y.push(!1);A.push(function(){return u[I]})}(E);return[w,y,function(I){for(var V="",T=0;T<I.length;T++)V+=A[T](I[T]);return V}]}})(m);(function(d){function k(e){var l={inset:!1,lengths:[],color:null};if((e=d.consumeRepeated(function(p){var q=d.consumeToken(/^inset/i,p);return q?(l.inset=!0,q):(q=d.consumeLengthOrPercent(p))?(l.lengths.push(q[0]),q):(q=d.consumeColor(p),q?(l.color=q[0],q):void 0)},/^/,e))&&e[0].length)return[l,e[1]]}var b=function(e,l,p,q){function u(L){return{inset:L,color:[0,0,0,
0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var w=[],y=[],A=0;A<p.length||A<q.length;A++){var C=p[A]||u(q[A].inset),E=q[A]||u(p[A].inset);w.push(C);y.push(E)}return d.mergeNestedRepeated(e,l,w,y)}.bind(null,function(e,l){for(;e.lengths.length<Math.max(e.lengths.length,l.lengths.length);)e.lengths.push({px:0});for(;l.lengths.length<Math.max(e.lengths.length,l.lengths.length);)l.lengths.push({px:0});if(e.inset==l.inset&&!!e.color==!!l.color){for(var p,q=[],u=[[],0],w=[[],0],y=0;y<e.lengths.length;y++){var A=
d.mergeDimensions(e.lengths[y],l.lengths[y],2==y);u[0].push(A[0]);w[0].push(A[1]);q.push(A[2])}e.color&&l.color&&(l=d.mergeColors(e.color,l.color),u[1]=l[0],w[1]=l[1],p=l[2]);return[u,w,function(C){for(var E=e.inset?"inset ":" ",L=0;L<q.length;L++)E+=q[L](C[0][L])+" ";return p&&(E+=p(C[1])),E}]}},", ");d.addPropertiesHandler(function(e){if((e=d.consumeRepeated(k,/^,/,e))&&""==e[1])return e[0]},b,["box-shadow","text-shadow"])})(m);(function(d,k){function b(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,
"")}function e(u,w,y){return Math.min(w,Math.max(u,y))}function l(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function p(u,w){return function(y,A){return[y,A,function(C){return b(e(u,w,C))}]}}function q(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var w=[],y=0;y<u.length;y++){var A=l(u[y]);if(void 0===A)return;w.push(A)}return w}}d.clamp=e;d.addPropertiesHandler(q,function(u,w){if(u.length==w.length)return[u,w,function(y){return y.map(b).join(" ")}]},["stroke-dasharray"]);
d.addPropertiesHandler(l,p(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(l,p(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(l,function(u,w){if(0!=u)return p(0,1/0)(u,w)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(l,function(u,w){return[u,w,function(y){return Math.round(e(1,1/0,y))}]},["orphans","widows"]);d.addPropertiesHandler(l,function(u,w){return[u,w,Math.round]},["z-index"]);d.parseNumber=l;d.parseNumberList=q;d.mergeNumbers=function(u,w){return[u,
w,b]};d.numberToString=b})(m);(function(d,k){d.addPropertiesHandler(String,function(b,e){if("visible"==b||"visible"==e)return[0,1,function(l){return 0>=l?b:1<=l?e:"visible"}]},["visibility"])})(m);(function(d,k){function b(p){p=p.trim();l.fillStyle="#000";l.fillStyle=p;var q=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=p,q==l.fillStyle)return l.fillRect(0,0,1,1),p=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),q=p[3]/255,[p[0]*q,p[1]*q,p[2]*q,q]}function e(p,q){return[p,q,function(u){if(u[3])for(var w=
0;3>w;w++)u[w]=Math.round(Math.max(0,Math.min(255,u[w]/u[3])));return u[3]=d.numberToString(d.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");k.width=k.height=1;var l=k.getContext("2d");d.addPropertiesHandler(b,e,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));d.consumeColor=d.consumeParenthesised.bind(null,
b);d.mergeColors=e})(m);(function(d,k){function b(y){function A(){var T=V.exec(y);I=T?T[0]:void 0}function C(){if("("!==I){var T=Number(I);return A(),T}A();T=L();return")"!==I?NaN:(A(),T)}function E(){for(var T=C();"*"===I||"/"===I;){var Y=I;A();var na=C();"*"===Y?T*=na:T/=na}return T}function L(){for(var T=E();"+"===I||"-"===I;){var Y=I;A();var na=E();"+"===Y?T+=na:T-=na}return T}var I,V=/([\+\-\w\.]+|[\(\)\*\/])/g;return A(),L()}function e(y,A){if("0"==(A=A.trim().toLowerCase())&&0<="px".search(y))return{px:0};
if(/^[^(]*$|^calc/.test(A)){A=A.replace(/calc\(/g,"(");var C={};A=A.replace(y,function(T){return C[T]=null,"U"+T});y="U("+y.source+")";for(var E=A.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),L=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],I=0;I<L.length;)L[I].test(E)?(E=E.replace(L[I],"$1"),I=0):I++;if("D"==E){for(var V in C){E=b(A.replace(new RegExp("U"+V,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(E))return;
C[V]=E}return C}}}function l(y,A){return p(y,A,!0)}function p(y,A,C){var E,L=[];for(E in y)L.push(E);for(E in A)0>L.indexOf(E)&&L.push(E);return y=L.map(function(I){return y[I]||0}),A=L.map(function(I){return A[I]||0}),[y,A,function(I){var V=I.map(function(T,Y){return 1==I.length&&C&&(T=Math.max(T,0)),d.numberToString(T)+L[Y]}).join(" + ");return 1<I.length?"calc("+V+")":V}]}var q=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);k=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);
var u=e.bind(null,/deg|rad|grad|turn/g);d.parseLength=q;d.parseLengthOrPercent=k;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,k);d.parseAngle=u;d.mergeDimensions=p;q=d.consumeParenthesised.bind(null,q);q=d.consumeRepeated.bind(void 0,q,/^/);var w=d.consumeRepeated.bind(void 0,q,/^,/);d.consumeSizePairList=w;q=d.mergeNestedRepeated.bind(void 0,l," ");u=d.mergeNestedRepeated.bind(void 0,q,",");d.mergeNonNegativeSizePair=q;d.addPropertiesHandler(function(y){if((y=w(y))&&""==y[1])return y[0]},
u,["background-size"]);d.addPropertiesHandler(k,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(k,p,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(m);
(function(d,k){function b(l){return d.consumeLengthOrPercent(l)||d.consumeToken(/^auto/,l)}function e(l){if((l=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,b,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}k=d.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,p){return"auto"==l||"auto"==p?[!0,!1,function(q){q=q?l:p;if("auto"==q)return"auto";q=d.mergeDimensions(q,
q);return q[2](q[0])}]:d.mergeDimensions(l,p)},", ");d.parseBox=e;d.mergeBoxes=k;d.addPropertiesHandler(e,k,["clip"])})(m);(function(d,k){function b(E){return function(L){var I=0;return E.map(function(V){return V===w?L[I++]:V})}}function e(E){return E}function l(E){if("none"==(E=E.toLowerCase().trim()))return[];for(var L,I=/\s*(\w+)\(([^)]*)\)/g,V=[],T=0;(L=I.exec(E))&&L.index==T;){T=L.index+L[0].length;var Y=L[1],na=C[Y];if(!na)break;L=L[2].split(",");na=na[0];if(na.length<L.length)break;for(var Ba=
[],F=0;F<na.length;F++){var W=L[F];var P=na[F];if(void 0===(W=W?{A:function(S){return"0"==S.trim()?A:d.parseAngle(S)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[P.toUpperCase()](W):{a:A,n:Ba[0],t:y}[P]))return;Ba.push(W)}if(V.push({t:Y,d:Ba}),I.lastIndex==E.length)return V}}function p(E){return E.toFixed(6).replace(".000000","")}function q(E,L){if(E.decompositionPair!==L){E.decompositionPair=L;var I=d.makeMatrixDecomposition(E)}if(L.decompositionPair!==E){L.decompositionPair=E;var V=
d.makeMatrixDecomposition(L)}return null==I[0]||null==V[0]?[[!1],[!0],function(T){return T?L[0].d:E[0].d}]:(I[0].push(0),V[0].push(1),[I,V,function(T){var Y=d.quat(I[0][3],V[0][3],T[5]);return d.composeMatrix(T[0],T[1],T[2],Y,T[4]).map(p).join(",")}])}function u(E){return E.replace(/(x|y|z|3d)?$/,"3d")}var w=null,y={px:0},A={deg:0},C={matrix:["NNNNNN",[w,w,0,0,w,w,0,0,0,0,1,0,w,w,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",b([w,w,1]),e],scalex:["N",b([w,1,1]),b([w,1])],scaley:["N",b([1,w,1]),b([1,w])],scalez:["N",b([1,1,w])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,b([w,A])],skewy:["A",null,b([A,w])],translate:["Tt",b([w,w,y]),e],translatex:["T",b([w,y,y]),b([w,y])],translatey:["T",b([y,w,y]),b([y,w])],translatez:["L",b([y,y,w])],translate3d:["TTL",e]};d.addPropertiesHandler(l,function(E,L){var I=d.makeMatrixDecomposition&&!0,V=!1;if(!E.length||!L.length){E.length||(V=!0,E=L,L=[]);for(var T=
0;T<E.length;T++){var Y=E[T].t,na=E[T].d,Ba="scale"==Y.substr(0,5)?1:0;L.push({t:Y,d:na.map(function(qa){if("number"==typeof qa)return Ba;var ja={},ta;for(ta in qa)ja[ta]=Ba;return ja})})}}na=[];var F=[],W=[];if(E.length!=L.length){if(!I)return;var P=q(E,L);na=[P[0]];F=[P[1]];W=[["matrix",[P[2]]]]}else for(T=0;T<E.length;T++){Y=E[T].t;var S=L[T].t,fa=E[T].d,aa=L[T].d;P=C[Y];var oa=C[S];if("perspective"==Y&&"perspective"==S||!("matrix"!=Y&&"matrix3d"!=Y||"matrix"!=S&&"matrix3d"!=S)){if(!I)return;P=
q([E[T]],[L[T]]);na.push(P[0]);F.push(P[1]);W.push(["matrix",[P[2]]])}else{if(Y!=S)if(P[2]&&oa[2]&&Y.replace(/[xy]/,"")==S.replace(/[xy]/,""))Y=Y.replace(/[xy]/,""),fa=P[2](fa),aa=oa[2](aa);else{if(!P[1]||!oa[1]||u(Y)!=u(S)){if(!I)return;P=q(E,L);na=[P[0]];F=[P[1]];W=[["matrix",[P[2]]]];break}Y=u(Y);fa=P[1](fa);aa=oa[1](aa)}oa=[];S=[];for(var Va=[],lb=0;lb<fa.length;lb++)P=("number"==typeof fa[lb]?d.mergeNumbers:d.mergeDimensions)(fa[lb],aa[lb]),oa[lb]=P[0],S[lb]=P[1],Va.push(P[2]);na.push(oa);F.push(S);
W.push([Y,Va])}}V&&(E=na,na=F,F=E);return[na,F,function(qa){return qa.map(function(ja,ta){ja=ja.map(function(Ha,zb){return W[ta][1][zb](Ha)}).join(",");return"matrix"==W[ta][0]&&16==ja.split(",").length&&(W[ta][0]="matrix3d"),W[ta][0]+"("+ja+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(E){E=d.transformListToMatrix(l(E));return"matrix("+p(E[0])+" "+p(E[1])+" "+p(E[4])+" "+p(E[5])+" "+p(E[12])+" "+p(E[13])+")"}})(m);(function(d){function k(b){return b=100*Math.round(b/100),b=d.clamp(100,
900,b),400===b?"normal":700===b?"bold":String(b)}d.addPropertiesHandler(function(b){b=Number(b);if(!(isNaN(b)||100>b||900<b||0!=b%100))return b},function(b,e){return[b,e,k]},["font-weight"])})(m);(function(d){function k(q){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,q)||d.consumeLengthOrPercent(q)}function b(q,u){if((u=d.consumeRepeated(k,/^/,u))&&""==u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==q&&(u[2]=u[2]||{px:0}),u.length==q)){if(/top|bottom/.test(u[0])||/left|right/.test(u[1]))q=
u[0],u[0]=u[1],u[1]=q;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(w){return"object"==typeof w?w:l[w]})}}function e(q){if(q=d.consumeRepeated(k,/^/,q)){for(var u=q[0],w=[{"%":50},{"%":50}],y=0,A=!1,C=0;C<u.length;C++){var E=u[C];if("string"==typeof E)A=/bottom|right/.test(E),y={left:0,right:0,center:y,top:1,bottom:1}[E],w[y]=l[E],"center"==E&&y++;else{if(A){A=void 0;var L={};for(A in E)L[A]=-E[A];E=L;E["%"]=(E["%"]||0)+100}w[y]=E;y++;A=!1}}return[w,
q[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},p=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(b.bind(null,3),p,["transform-origin"]);d.addPropertiesHandler(b.bind(null,2),p,["perspective-origin"]);d.consumePosition=e;d.mergeOffsetList=p;p=d.mergeNestedRepeated.bind(null,p,", ");d.addPropertiesHandler(function(q){if((q=d.consumeRepeated(e,/^,/,q))&&""==q[1])return q[0]},p,["background-position","object-position"])})(m);(function(d){var k=
d.consumeParenthesised.bind(null,d.parseLengthOrPercent),b=d.consumeRepeated.bind(void 0,k,/^/),e=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),l=d.mergeNestedRepeated.bind(void 0,e,",");d.addPropertiesHandler(function(p){var q=d.consumeToken(/^circle/,p);return q&&q[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):(q=d.consumeToken(/^ellipse/,
p))&&q[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),b,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):(p=d.consumeToken(/^polygon/,p))&&p[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,/^\)/))],p[1])):void 0},function(p,q){if(p[0]===
q[0])return"circle"==p[0]?d.mergeList(p.slice(1),q.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==p[0]?d.mergeList(p.slice(1),q.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==p[0]&&p[1]==q[1]?d.mergeList(p.slice(2),q.slice(2),["polygon(",p[1],l,")"]):void 0},["shape-outside"])})(m);(function(d,k){function b(p,q){q.concat([p]).forEach(function(u){u in document.documentElement.style&&(e[p]=u);l[u]=p})}var e={},l={};b("transform",
["webkitTransform","msTransform"]);b("transformOrigin",["webkitTransformOrigin"]);b("perspective",["webkitPerspective"]);b("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(p){return e[p]||p};d.unprefixedPropertyName=function(p){return l[p]||p}})(m)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var a=function(k,b,e){(this||Zb).target=
k;(this||Zb).currentTime=b;(this||Zb).timelineTime=e;(this||Zb).type="cancel";(this||Zb).bubbles=!1;(this||Zb).cancelable=!1;(this||Zb).currentTarget=k;(this||Zb).defaultPrevented=!1;(this||Zb).eventPhase=Event.AT_TARGET;(this||Zb).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(k,b){k=d.call(this||Zb,k,b);k._cancelHandlers=[];k.oncancel=null;var e=k.cancel;k.cancel=function(){e.call(this||Zb);var q=new a(this||Zb,null,n()),u=(this||Zb)._cancelHandlers.concat((this||
Zb).oncancel?[(this||Zb).oncancel]:[]);setTimeout(function(){u.forEach(function(w){w.call(q.target,q)})},0)};var l=k.addEventListener;k.addEventListener=function(q,u){"function"==typeof u&&"cancel"==q?(this||Zb)._cancelHandlers.push(u):l.call(this||Zb,q,u)};var p=k.removeEventListener;return k.removeEventListener=function(q,u){"cancel"==q?(q=(this||Zb)._cancelHandlers.indexOf(u),0<=q&&(this||Zb)._cancelHandlers.splice(q,1)):p.call(this||Zb,q,u)},k}}})();(function(n){var a=document.documentElement,
d=null,k=!1;try{var b="0"==getComputedStyle(a).getPropertyValue("opacity")?"1":"0";d=a.animate({opacity:[b,b]},{duration:1});d.currentTime=0;k=getComputedStyle(a).getPropertyValue("opacity")==b}catch(l){}finally{d&&d.cancel()}if(!k){var e=window.Element.prototype.animate;window.Element.prototype.animate=function(l,p){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||(l=n.convertToArrayForm(l)),e.call(this||Zb,l,p)}}})(f)}();
var Ee=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Ee.convertToSvgEasing=function(f){for(var m in Ee.easings)if(Ee.easings[m]===f){if(m.includes("inOut"))return m.replace("inOut","").toLowerCase()+"InOut";if(m.includes("out"))return m.replace("out","").toLowerCase()+"Out";if(m.includes("in"))return m.replace("in","").toLowerCase()+"In"}};Ee.stringToEasing=lr;Ee.obj=df;Ee.promise=Vf;Ee.fun=Qj;Ee.num=Dj;Ee.properties=gm;Ee.arr=Ke;Ee.string=rg;Ee.Color=of;Ee.styleProps=
Wy;Ee.addPathAttributes=Yy;Ee.addSvgAttributes=Xy;Ee.flubber=IP;Ee.Bezier=Bha;Ee.ShadowObject=An;var Bn=za("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",
outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",
inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Ee.easings=Bn;Ee.easings=Bn;Ee.easings=Bn;Ee.stringToEasing=lr;Ee.stringToEasing=lr;var QH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
n=m.hasOwnProperty("AnimationQueue")&&"function"===typeof m.AnimationQueue?m.AnimationQueue:m.AnimationQueue=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.animations=[]}},{key:"maskedProps",value:function(a){return 0<this.animations.length?Ee.obj.merge(this.animations.map(function(d){return d.getAnimationProps(a)[0]})):{}}},
{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(a){var d=this,k=new Ee.PropertyAnimation(this,this.morph,a);this.morph.makeDirty();return this.morph.withMetaDo({animation:k},function(){var b=k.affectsMorph&&d.animations.find(function(l){return l.equals(k)});if(!b){var e;if(e=d.animations.find(function(l){return l.canMerge(k)}))return e.mergeWith(k),e;if(k.affectsMorph)return k.assignProps(),d.animations.push(k),k}return b})}},{key:"startAnimationsFor",value:function(a){for(var d=
0;d<this.animations.length;d++)this.animations[d].start(a)}},{key:"startSvgAnimationsFor",value:function(a,d){this.animations.forEach(function(k){return k.startSvg(a,d)})}},{key:"removeAnimation",value:function(a){Ee.arr.remove(this.animations,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Ee.AnimationQueue=QH;Ee.AnimationQueue=QH;Ee.AnimationQueue=QH;var LP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=m.hasOwnProperty("PropertyAnimation")&&"function"===typeof m.PropertyAnimation?m.PropertyAnimation:m.PropertyAnimation=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){var b=this;this.queue=a;this.morph=d;if(d.isPath&&"fill"in k){var e=d.fill||Ee.Color.transparent,l=k.fill;k.customTween=Ee.fun.compose(function(y){d.fill=e.interpolate(y,l);return y},k.customTween||function(y){});delete k.fill;d.fill=e}if("dropShadow"in k){var p=d.dropShadow||new Ee.ShadowObject({blur:0,distance:0,spread:0}),q=k.dropShadow;k.customTween=Ee.fun.compose(function(y){d.dropShadow=p.interpolate(y,q||new Ee.ShadowObject({blur:0,
distance:0,spread:0}));1==y&&(d.dropShadow=q);return y},k.customTween||function(y){});delete k.dropShadow;d.dropShadow=p}if("visible"in k&&k.visible!=d.visible){var u=void 0===a.originalOpacity?d.opacity:a.originalOpacity;a.originalOpacity=u;var w=k.visible;k.customTween=Ee.fun.compose(function(y){if(b._otherVisibleTransformationInProgress)return y;0==y&&1==w&&(d.visible=!0);d.opacity=w?Ee.num.interpolate(y,0,u):Ee.num.interpolate(y,u,0);1==y&&(d.visible=w,d.opacity=u,delete a.originalOpacity);return y},
k.customTween||function(y){});this.queue.animations.forEach(function(y){return y._otherVisibleTransformationInProgress=!0});delete k.visible}this.config=this.convertBounds(k);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=Ee.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var a=this;return this._promise||(this._promise=new Promise(function(d,k){a.resolveCallback=function(){a.onFinish(a);
a.subAnimations?a.subAnimations.then(d):d(a.morph)}}))}},{key:"finish",value:function(a){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(k){return k.isText&&k.invalidateTextLayout(!0,!0)})});this.needsAnimation[a]=!1;Ee.arr.any(Ee.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(a){var d=a.bounds,k=a.origin,
b=a.rotation,e=a.scale;k=k||this.morph.origin;b=b||this.morph.rotation;e=e||this.morph.scale;return d?Object.assign({},Ee.obj.dissoc(a,["bounds"]),{origin:k,rotation:b,scale:e,position:d.topLeft().addPt(k),extent:d.extent()}):a}},{key:"equals",value:function(a){return!this.config.customTween&&!a.config.customTweem&&Ee.obj.equals(this.animatedProps,a.animatedProps)}},{key:"canMerge",value:function(a){return this.easing==a.easing&&this.duration==a.duration}},{key:"mergeWith",value:function(a){var d=
this.config.customTween;Object.assign(this.morph,a.animatedProps);Object.assign(this.config,a.config);this.config.customTween=function(k){d&&d(k);a.config.customTween&&a.config.customTween(k);return k};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var a=this;return!!this.config.customTween||Ee.properties.any(this.animatedProps,function(d,k){return!Ee.obj.equals(d[k],a.morph[k])})}},{key:"animatedProps",get:function(){return Ee.obj.dissoc(this.config,["customTween",
"easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Ee.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(a){this.config.onFinish=a}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(a,d){var k=[],b;for(b in a)Ee.obj.equals(d[b],a[b])&&k.push(b);return[Ee.obj.dissoc(a,k),Ee.obj.dissoc(d,k)]}},{key:"getAnimationProps",value:function(a){var d=
$jscomp.makeIterator(this.getChangedProps(this.beforeProps[a],this.afterProps[a])),k=d.next().value;d=d.next().value;var b=this.capturedProperties.fill,e=this.config.fill;this.morph.isPolygon&&"css"==a&&(b=e=!1,delete k.background,delete d.background,delete k.backgroundImage,delete d.backgroundImage);"none"==k.filter&&d.boxShadow&&(delete k.filter,k.boxShadow="none");"none"==d.filter&&k.boxShadow&&(delete d.filter,d.boxShadow="none");b&&e&&(b.isGradient||e.isGradient)&&(this.tweenGradient=this.interpolate("gradient",
b,e));a=$jscomp.makeIterator(Ee.arr.union(Ee.obj.keys(k),Ee.obj.keys(d)));for(b=a.next();!b.done;b=a.next())b=b.value,b in k||(k[b]=d[b]),b in d||(d[b]=k[b]);return[Ee.obj.isEmpty(k)?!1:k,Ee.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var a=this.morph,d=a.isSvgMorph,k=a.isPath,b=a.isPolygon,e={};e.css=Ee.styleProps(this.morph);d&&(e.svg=Ee.addSvgAttributes(a,{}));k&&(e.path=Ee.addPathAttributes(a,{}));b&&(e.polygon=Ee.addPathAttributes(a,{}));return e}},{key:"assignProps",
value:function(){var a=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Ee.arr.withoutAll(a,this.morph.styleClasses),added:Ee.arr.withoutAll(this.morph.styleClasses,a),animation:this})}},{key:"interpolate",value:function(a,d,k){var b=this;switch(a){case "scrollTop":case "scrollLeft":return function(e){return Ee.num.interpolate(e,
d,k)};case "d":return Ee.flubber.interpolate(d,k);case "stroke-width":return function(e){return Ee.num.interpolate(e,d,k)};case "stroke":return function(e){return Ee.Color.fromString(d).interpolate(e,Ee.Color.fromString(k),b.morph.bounds())};case "gradient":return function(e){return d.interpolate(e,k,b.morph.bounds())};case "fill":return d=Ee.Color.fromString(d),k=Ee.Color.fromString(k),function(e){return d.interpolate(e,k)}}}},{key:"startSvg",value:function(a,d){var k=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var b=$jscomp.makeIterator(this.getAnimationProps(d)),e=b.next().value;b=b.next().value;var l={},p=Ee.stringToEasing(this.easing),q;for(q in e)l[q]=this.interpolate(q,e[q],b[q]);var u,w=function(y){u||(u=y);y-=u;if(1<y/k.duration)return k.finish(d);for(var A in l)l[A]&&a.setAttribute(A,l[A](p(y/k.duration)));requestAnimationFrame(w)};requestAnimationFrame(w)}}},{key:"start",value:function(a){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),k=d.next().value,
b=d.next().value;a&&this.tween(a,k,b);if(this.config.origin){var e=this.capturedProperties.origin,l=this.config.origin,p=a.childNodes[0];p&&this.tween(p,p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+e.x+"px, "+e.y+"px, 0px)"},p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(q){this.active=!1}}},{key:"tween",value:function(a,d,k,b){var e=this;b=void 0===b?!0:b;var l=this.animatedProps.scroll,p=this.config.customTween,q=!1,u=
function(){b&&(e.finish("css"),e.morph.makeDirty())};if(p){var w,y=Ee.stringToEasing(this.easing),A=function(aa){w||(w=aa);var oa=Math.min(1,(aa-w)/e.duration);e.morph.dontRecordChangesWhile(function(){return p(y(oa))});if(1<=oa)return e.finish("css");requestAnimationFrame(A)};requestAnimationFrame(A);q=!0}if(l){var C,E=this.morph.env.eventDispatcher.eventState;q=Ee.promise.deferred();var L=q.promise,I=q.resolve,V=this.interpolate("scrollLeft",a.scrollLeft,l.x),T=this.interpolate("scrollTop",a.scrollTop,
l.y),Y=Ee.stringToEasing(this.easing),na=function(aa){C||(C=aa);aa-=C;var oa=Math.min(1,aa/e.duration);a.scrollTop=T(Y(oa));a.scrollLeft=V(Y(oa));if(1<=aa/e.duration)return E.scroll.interactiveScrollInProgress=null,I(),e.finish("css");requestAnimationFrame(na)};L.debounce=function(){};requestAnimationFrame(na);q=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Ba,F=Ee.stringToEasing(this.easing),W=function(aa){Ba||(Ba=aa);aa-=Ba;if(1<=aa/e.duration)return e.finish("css");a.style.setProperty("background-image",
e.tweenGradient(F(aa/e.duration)));requestAnimationFrame(W)};delete d.backgroundImage;delete k.backgroundImage;delete d.background;delete k.background;requestAnimationFrame(W);q=!0}else this.tweenGradient&&(q=!0);if(a&&d&&k){l={};L={};for(var P in d)l[Ee.string.camelize(P)]=d[P];for(var S in k)L[Ee.string.camelize(S)]=k[S];try{var fa=a.animate([l,L],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});fa.onfinish=function(){u();setTimeout(function(){return fa.cancel()},
200)};q=!0}catch(aa){q=!1}}q||u()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Ee.PropertyAnimation=LP;Ee.PropertyAnimation=LP;Ee.PropertyAnimation=LP;var dg=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");dg.cumulativeOffset=iw;dg.createIFrame=function(f,m,n){m=void 0===m?"about:blank":m;n=void 0===n?new dg.Rectangle(0,0,700,700):n;return new Promise(function(a,d){if(!f)throw Error("Need parent element!");var k=document.createElement("iframe");k.style.position="absolute";k.style.top=n.top()+"px";k.style.left=n.left()+"px";k.style.width=n.width+"px";k.style.height=n.height+"px";k.src=m;var b=!1;k.onload=function(e){b=!0;k.onload=
null;a(k)};dg.promise.waitFor(1E3,function(){return!!b}).catch(function(e){return d(Error("iframe load timeout"))});f.appendChild(k)})};dg.requestAnimationFramePolyfill=function(f){for(var m=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!f.requestAnimationFrame;++a)f.requestAnimationFrame=f[n[a]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[n[a]+"CancelAnimationFrame"]||f[n[a]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(d,k){var b=Date.now(),e=Math.max(0,
16-(b-m));k=f.setTimeout(function(){d(b+e)},e);m=b+e;return k});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(d){clearTimeout(d)})};dg.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(f=dg.IFramedDomEnvironment,m.yield(dg.createIFrame(document.body),2)):m.return(new f(m.yieldResult))})};dg.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),
m=f.createVirtualConsole().sendTo(console);return new Promise(function(n,a){f.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:m},function(d,k){return d?a(d):n(new dg.DomEnvironment(k,k.document,function(){return k.close()}))})})};dg.createDOMEnvironment=aL;dg.defaultDOMEnv=RD;dg.setCSSDef=function(f,m,n){dg.arr.from(f.childNodes).forEach(function(a){return f.removeChild(a)});m=document.createTextNode(m);f.styleSheet?f.styleSheet.cssText=m.nodeValue:f.appendChild(m);
return f};dg.addCSSDef=function(f,m,n){var a=document.createElement("style");a.type="text/css";f&&a.setAttribute("id",f);dg.setCSSDef(a,m,n);(n.head||n).appendChild(a);return a};dg.addOrChangeCSSDeclaration=Qo;dg.addOrChangeLinkedCSS=tt;dg.promise=Vf;dg.obj=df;dg.arr=Ke;dg.Rectangle=Od;dg.cumulativeOffset=iw;dg.cumulativeOffset=iw;dg.createDOMEnvironment=aL;dg.createDOMEnvironment=aL;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("DomEnvironment")&&
"function"===typeof m.DomEnvironment?m.DomEnvironment:m.DomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){dg.requestAnimationFramePolyfill(a);this.window=a;this.document=d;this.destroyFn=k}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof m.IFramedDomEnvironment?m.IFramedDomEnvironment:
m.IFramedDomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.contentWindow,a.contentWindow.document,function(){a.contentWindow&&a.contentWindow.close();a.parentNode&&a.parentNode.removeChild(a)});this.iframe=a}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(dg.DomEnvironment);dg._defaultEnv=dg._defaultEnv||void 0;dg.defaultDOMEnv=RD;dg.defaultDOMEnv=RD;dg.addOrChangeCSSDeclaration=Qo;dg.addOrChangeCSSDeclaration=
Qo;dg.addOrChangeLinkedCSS=tt;dg.addOrChangeLinkedCSS=tt;var RH=function(){return function(f){f=void 0===f?window.document:f;return function(m,n,a){var d=n||void 0;"undefined"===typeof a&&(a=n,d=void 0);var k=m.split(".");if(1<k.length)for(m=k.shift(),n=0;n<k.length;n++){var b=k[n],e;-1<(e=b.indexOf("#"))&&(b.slice(e+1),b.slice(0,e))}n=m.split("#");1<n.length&&(m=n[0]);m=f.createElement(m);if(d){for(var l in d)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(m[l]=d[l]);if(l=d.style)for(var p in l)m.style[p]=
l[p];if(p=d.dataset)if(m.dataset)for(var q in p)m.dataset[q]=p[q];else for(q in p)m.setAttribute("data-"+q,p[q]);if(d=d.attributes)for(var u in d)d[u]&&dg.obj.isBoolean(d[u])?m.toggleAttribute(u):m.setAttribute(u,d[u])}a||(a="");if("string"===typeof a)m.appendChild(f.createTextNode(a));else if(Array.isArray(a))for(n=0;n<a.length;n++)u=a[n],m.appendChild("string"===typeof u?f.createTextNode(u):u);else m.appendChild("string"===typeof a?f.createTextNode(a):a);return m}}}();dg.hyperscriptFnForDocument=
RH;dg.hyperscriptFnForDocument=RH;dg.hyperscriptFnForDocument=RH;var Cn=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Cn.obj=df;Cn.morph=$i;var Ml=za("I",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=m.hasOwnProperty("Icon")&&"function"===typeof m.Icon?m.Icon:m.Icon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Icon"}},{key:"makeLabel",value:function(a,d){var k=d=void 0===d?{prefix:"",suffix:""}:d,b=k.prefix;k=k.suffix;var e=[];b&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof b?[b||"",{}]:b));e.push.apply(e,$jscomp.arrayFromIterable(this.textAttribute(a,Cn.obj.dissoc(d,["fontSize"]))));k&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof k?[k||"",{}]:k));return Cn.morph(Object.assign({type:"label",value:e},Cn.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",
value:function(a,d){d=void 0===d?{}:d;var k=d.textStyleClasses&&d.textStyleClasses.includes("far");return[Cn.Icons[a].code||"icon "+a+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:k?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(a,d){a.textAndAttributes=this.textAttribute(d)}}],m,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));Cn.Icon=Ml;Cn.Icon=Ml;Cn.Icon=Ml;var SH=za("bu",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},
airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},
"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},
"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Cn.Icons=SH;Cn.Icons=SH;Cn.Icons=SH;var Cd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Cd.vdom=ZA;Cd.promise=Vf;Cd.arr=Ke;Cd.tree=yq;Cd.obj=df;Cd.string=rg;Cd.addOrChangeCSSDeclaration=Qo;Cd.addOrChangeLinkedCSS=tt;Cd.defaultStyle=gw;Cd.renderGradient=MD;Cd.defaultAttributes=hw;Cd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Cd.pathAttributes=LD;Cd.svgAttributes=KD;Cd.renderMorph=ND;Cd.Transform=Mi;Cd.pt=bh;Cd.getSvgVertices=fw;Cd.canBePromotedToCompositionLayer=JD;Cd.config=ok;var TH=Cd.vdom;Cd.h=TH.h;Cd.diff=TH.diff;Cd.patch=TH.patch;Cd.createNode=TH.create;Cd.svgNs="http://www.w3.org/2000/svg";Cd.CanvasHook=function(f){this.canvasMorph=f};Cd.CanvasHook.prototype.hook=function(f,m,n){this.canvasMorph.afterRender(f,this.canvasMorph._canvas!==f&&"CANVAS"==f.tagName)};Cd.InitStroke=function(f,m,n){this.path=f;this.renderer=
m;this.reverse=n};Cd.InitStroke.prototype.hook=function(f,m,n){m=this.path.drawnProportion||0;0!=m&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-m:-1+(1-m))))};var UH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=m.hasOwnProperty("Renderer")&&"function"===typeof m.Renderer?m.Renderer:m.Renderer=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){if(!a||!a.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+a);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);k||(k=d.getRootNode(),k={window:System.global,document:k});this.worldMorph=a;a._renderer=this;this.rootNode=d;this.domNode=
null;this.domEnvironment=k;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=k.window.requestAnimationFrame.bind(k.window)}},{key:"clear",value:function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return d=a.domNode,b.setCatchFinallyBlocks(2),b.yield(a.stopRenderWorldLoop(),4);case 4:b.leaveTryBlock(3);break;case 2:b.enterCatchBlock();case 3:d&&
(k=d.parentNode,k.removeChild(d),[].concat($jscomp.arrayFromIterable(a.fixedMorphNodeMap.values())).forEach(function(e){return k.removeChild(e)})),a.domNode=null,a.renderMap=new WeakMap,b.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var a=this;return Cd.promise.waitFor(3E3,function(){return a.domNode.getRootNode()}).then(function(d){return Promise.all([Cd.addOrChangeCSSDeclaration("lively-morphic-css",Cd.defaultCSS,d),Cd.addOrChangeLinkedCSS("lively-ibm-plex",Cd.config.css.ibmPlex),Cd.addOrChangeLinkedCSS("lively-font-awesome",
Cd.config.css.fontAwesome,d,!1),Cd.addOrChangeLinkedCSS("lively-font-inconsolata",Cd.config.css.inconsolata,d,!1)])})}},{key:"startRenderWorldLoop",value:function(){var a=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return a.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a._stopped=!0;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopProcess);
a.renderWorldLoopProcess=null;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopLater);a.renderWorldLoopLater=null;return d.yield(Cd.promise.waitFor(2E3,function(){return!a.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(a){var d=this;this.renderWorldLoopLaterCounter=void 0===a?10:a;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-
1);try{d.renderStep()}catch(k){console.error("Error rendering morphs:",k)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(a){var d="#"+Cd.string.regExpEscape(a.id),k=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==a.id&&(k=this.domNode);if(k)return k;a=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(k=a.next();!k.done;k=a.next())if(k=k.value.querySelector(d))return k;return null}},
{key:"getMorphForNode",value:function(a){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===a.id}):null}},{key:"render",value:function(a){if(!a.needsRerender()){var d=this.renderMap.get(a);if(d)return d}a.aboutToRender(this);d=a.render(this);this.renderMap.set(a,d);return d}},{key:"renderAsFixed",value:function(a){var d=this.render(a);a.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var k=this.domNode.getBoundingClientRect(),
b=a.origin,e=a.owner,l=a.position,p=Math.round(l.x-b.x-(a._skipWrapping&&e?e.borderWidthLeft:0));b=Math.round(l.y-b.y-(a._skipWrapping&&e?e.borderWidthTop:0));a=Cd.canBePromotedToCompositionLayer(a)?Cd.pt(0,0):Cd.pt(p,b);p=a.x;d.properties.style.top=a.y+k.y+"px";d.properties.style.left=p+k.x+"px"}return d}},{key:"renderFixedMorphs",value:function(a,d){var k=this;d=this.domNode;var b=this.fixedMorphNodeMap;if((a.length||b.size)&&d&&d.parentNode){d=d.parentNode;for(var e=$jscomp.makeIterator(b),l=e.next();!l.done;l=
e.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;a.includes(l)||(p.parentNode&&p.parentNode.removeChild(p),b.delete(l))}l=a.map(function(C){return b.get(C)});var q=a.map(function(C){return C.id});e=[].concat($jscomp.arrayFromIterable(d.children)).map(function(C){return C.id}).filter(function(C){return q.includes(C)});e=!Cd.arr.equals(q,e);var u=new WeakMap;if(e){var w=new WeakMap;p=Cd.arr.compact(Cd.arr.flatten(a.map(function(C){return C.withAllSubmorphsDo(function(E){return k.getNodeForMorph(E)})})));
p.forEach(function(C){return w.set(C,C.scrollTop)});l.map(function(C){return C&&C.parentNode&&C.parentNode.removeChild(C)});p.forEach(function(C){w.get(C)!=C.scrollTop&&u.set(C,w.get(C))})}a=$jscomp.makeIterator(a);for(l=a.next();!l.done;l=a.next()){l=l.value;p=this.renderMap.get(l)||this.renderAsFixed(l);var y=this.renderAsFixed(l);y=Cd.diff(p,y);var A=b.get(l);A||(A=Cd.createNode(p,this.domEnvironment),b.set(l,A));A.parentNode||d.appendChild(A);e&&l.withAllSubmorphsDo(function(C){return k.getNodeForMorph(C)}).forEach(function(C){u.has(C)&&
(C.scrollTop=u.get(C))});Cd.patch(A,y)}}}},{key:"renderMorph",value:function(a){var d=this.renderSubmorphs(a);return Cd.h("div",Object.assign({},Cd.defaultAttributes(a,this),{style:Cd.defaultStyle(a)}),d)}},{key:"renderSubmorphs",value:function(a){return this.renderSelectedSubmorphs(a,a.submorphs)}},{key:"renderSelectedSubmorphs",value:function(a,d){var k=a.borderWidthLeft,b=a.borderWidthTop,e=a.origin,l=e.x;e=e.y;for(var p=d.length-1,q=Array(p+1);0<=p;p--)q[p]=this.render(d[p]);d={};return Cd.h("div",
{style:Object.assign({position:"absolute",left:l-(a.isPath?0:k)+"px",top:e-(a.isPath?0:b)+"px"},a.isPolygon?Object.assign({height:"100%",width:"100%",overflow:a.clipMode},"visible"!==a.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+a.id+")",d):{}):{})},q)}},{key:"renderWorld",value:function(a){for(var d=a.submorphs,k=[],b=[],e=0;e<d.length;e++){var l=d[e];l.hasFixedPosition?b.push(l):k.push(l)}d=this.renderSelectedSubmorphs(a,k);a=Cd.h("div",
Object.assign({},Cd.defaultAttributes(a,this),{style:Cd.defaultStyle(a)}),d);a.fixedMorphs=b;return a}},{key:"renderImage",value:function(a){var d=a.imageUrl;if(d.startsWith("data:")){var k=d.indexOf(","),b=d.substring(5,k),e=$jscomp.makeIterator(b.split(";"));b=e.next().value;e=e.next().value;k=d.substring(k+1);"base64"!==e&&(d=Cd.string.createDataURI(k,b))}return Cd.h("div",Object.assign({},Cd.defaultAttributes(a,this),{style:Cd.defaultStyle(a)}),[Cd.h("img",{src:d,alt:a.tooltip||"",draggable:!1,
style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(a)])}},{key:"renderCanvas",value:function(a){return Cd.h("div",Object.assign({},Cd.defaultAttributes(a,this),{style:Cd.defaultStyle(a)}),[Cd.h("canvas",{width:a.width,height:a.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new Cd.CanvasHook(a)}),this.renderSubmorphs(a)])}},{key:"renderCheckBox",value:function(a){return Cd.h("div",Object.assign({},Cd.defaultAttributes(a,
this),{style:Cd.defaultStyle(a)}),[Cd.h("input",{type:"checkbox",checked:a.checked,disabled:!a.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(a)])}},{key:"renderPath",value:function(a){var d=a.startMarker,k=a.endMarker,b=a.showControlPoints,e=Cd.getSvgVertices(a.vertices),l=Cd.h("path",Object.assign({namespace:Cd.svgNs,id:"svg"+a.id},Cd.pathAttributes(a))),p=Cd.h("mask",{namespace:Cd.svgNs,id:"mask"+a.id},[Cd.h("rect",{namespace:Cd.svgNs,
attributes:{fill:"white",x:0,y:0,width:a.width+20,height:a.height+20}}),Cd.h("path",{namespace:Cd.svgNs,initStroke:new Cd.InitStroke(a,this,!0),attributes:{d:e,stroke:"black",fill:"none"}}),Cd.h("path",{namespace:Cd.svgNs,initStroke:new Cd.InitStroke(a,this,!1),attributes:{d:e,stroke:"white",fill:"none"}})]);e=[Cd.h("clipPath",{namespace:Cd.svgNs,id:"clipPath"+a.id},Cd.h("path",{namespace:Cd.svgNs,attributes:{d:e,fill:"white"}})),p];d&&(d.id||(d.id="start-marker"),l.properties.attributes["marker-start"]=
"url(#"+a.id+"-"+d.id+")",e=[],e.push(this._renderPath_Marker(a,d)));k&&(k.id||(k.id="end-marker"),l.properties.attributes["marker-end"]="url(#"+a.id+"-"+k.id+")",e||(e=[]),e.push(this._renderPath_Marker(a,k)));var q;b&&(q=Cd.h("g",{namespace:Cd.svgNs},this._renderPath_ControlPoints(a)));return this.renderSvgMorph(a,l,e,q)}},{key:"_renderPath_ControlPoints",value:function(a,d){function k(V,T,Y,na,Ba,F){var W=na?12:Math.min(8,Math.max(3,l));Y="path-point path-point-"+Y;na=na?"orange":p;"string"===
typeof Ba&&(Y+="-"+Ba);F&&(W=Math.max(3,Math.ceil(W/2)));return F?Cd.h("circle",{namespace:Cd.svgNs,style:{fill:"white","stroke-width":2,stroke:na},attributes:{class:Y,cx:V,cy:T,r:W}}):Cd.h("circle",{namespace:Cd.svgNs,style:{fill:na},attributes:{class:Y,cx:V,cy:T,r:W}})}var b=a.vertices;d=a.borderWidth;var e=a.showControlPoints;a=a._controlPointDrag;var l=0==d?6:d+2,p="red";d=[];if("object"===typeof e){var q=e.radius;(e=e.fill)&&(p=String(e));"number"===typeof q&&(l=q)}if(b.length){e=0;var u=b[0];
q=u.x;var w=u.y;u=u.controlPoints.next;var y=a&&a.maybeMerge&&a.maybeMerge.includes(e);d.push(k(q,w,e,y));for(e=1;e<b.length-1;e++){var A=b[e];y=A.isSmooth;var C=A.x,E=A.y,L=A.controlPoints;A=L.previous;L=L.next;var I=a&&a.maybeMerge&&a.maybeMerge.includes(e);y?d.push(k(C,E,e,I),k(q+u.x,w+u.y,e-1,!1,"control-2",!0),k(C+A.x,E+A.y,e,!1,"control-1",!0)):d.push(k(C,E,e,I));q=C;w=E;u=L}E=b[b.length-1];b=E.isSmooth;y=E.x;C=E.y;E=E.controlPoints.previous;a=a&&a.maybeMerge&&a.maybeMerge.includes(e);b?d.push(k(y,
C,e,a),k(q+u.x,w+u.y,e-1,!1,"control-2",!0),k(y+E.x,C+E.y,e,!1,"control-1",!0)):d.push(k(y,C,e,a))}return d}},{key:"_renderPath_Marker",value:function(a,d){function k(b){var e=b.tagName,l=b.id,p=b.children,q=b.style;p=p?p.map(k):void 0;l&&(l=a.id+"-"+l);return Cd.h(e,{namespace:Cd.svgNs,id:l,style:q,attributes:Cd.obj.dissoc(b,["tagName","id","children","style"])},p)}return k(d)}},{key:"renderSvgMorph",value:function(a,d,k,b){b=void 0===b?[]:b;var e=Cd.svgAttributes(a),l=a.innerBounds(),p=l.width;
l=l.height;var q,u=[];a.fill&&a.fill.isGradient&&(q||(q=[]),q.push(Cd.renderGradient("fill"+a.id,a.extent,a.fill)));a.borderColor&&a.borderColor.valueOf().isGradient&&(q||(q=[]),q.push(Cd.renderGradient("borderColor"+a.id,a.extent,a.borderColor)));k&&k.length&&(q||(q=[]),q.push.apply(q,$jscomp.arrayFromIterable(k)));u.push(d);q&&u.push(Cd.h("defs",{namespace:Cd.svgNs},q));d=Cd.obj.select(Cd.defaultStyle(a),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));
return Cd.h("div",Object.assign({},Cd.defaultAttributes(a,this),{style:Object.assign({},d,{width:p+"px",height:l+"px","pointer-events":a.reactsToPointer?"auto":"none"})}),[Cd.h("svg",Object.assign({namespace:Cd.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":a.cornerStyle||"mint","stroke-linecap":a.endStyle||"round",overflow:"visible"}},e),u),this.renderSubmorphs(a),Cd.h("svg",Object.assign({namespace:Cd.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},e),b)])}},
{key:"renderPreview",value:function(a,d){var k=void 0===d.center?!0:d.center,b=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,e=void 0===d.asNode?!1:d.asNode,l=a.origin,p=a.rotation,q=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var u=Math.max(.1,1/a.scale);u=(new Cd.Transform(a.position.negated(),0,Cd.pt(u,u))).transformRectToRect(a.bounds());var w=Math.max(.1,Math.min(q/u.width,d/u.height));l=new Cd.Transform(u.topLeft().negated().scaleBy(w).subPt(l),p,Cd.pt(w,w));p=(p=this.getNodeForMorph(a))?
p.cloneNode(!0):Cd.renderMorph(a);k&&(a=l.transformRectToRect(a.extent.extentAsRectangle()),l=l.preConcatenate(new Cd.Transform(Cd.pt(a.width<q?(q-a.width)/2:0,a.height<d?(d-a.height)/2:0))));p.style.transform=l.toCSSTransformString();p.style.pointerEvents="";Cd.tree.prewalk(p,function(y){if("string"===typeof y.className){var A=y.className.split(" ").map(function(C){return C.trim()}).filter(Boolean);A.includes("Morph")&&(y.className=Cd.arr.withoutAll(A,["morph","Morph"]).join(" "),b.find(function(C){return C.id===
y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});return e?p:p.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],m,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1439,end:22095})}(void 0);Cd.Renderer=UH;Cd.Renderer=UH;Cd.Renderer=UH;var xx=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),O2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=m.hasOwnProperty("FontDetector")&&"function"===typeof m.FontDetector?m.FontDetector:m.FontDetector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,
f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.document=a;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,k){return[d,String(100*(k+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",
value:function(){var a=this.defaultWidth,d=this.defaultHeight,k=this.possibleFontWeights,b=this.baseFonts,e=this.document.getElementsByTagName("body")[0],l=this.span||this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var p=this.document.createElement("div");p.style.position="absolute";p.style.width="100%";p.style.overflow="hidden";p.style["pointer-events"]="none";p.style["-webkit-user-select"]="none";p.appendChild(l);e.appendChild(p)}for(var q in k)for(var u in b)l.style.fontFamily=
b[u],l.style.fontWeight=k[q],a[b[u]+"@"+k[q]]=l.offsetWidth,d[b[u]+"@"+k[q]]=l.offsetHeight;this.span=l;this.prepared=!0}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var k=this.defaultWidth,b=this.defaultHeight,e=this.baseFonts,l=this.span,p=this.document.body;l.parentNode||p.appendChild(l);for(var q in e)if(l.style.fontWeight=d,l.style.fontFamily=a+","+e[q],l.offsetWidth!=
k[e[q]+"@"+d]||l.offsetHeight!=b[e[q]+"@"+d])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return xx.fonts}}],m,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3680})}(void 0),Cha=O2=
xx.FontDetector,MP=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",
type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",
type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},
{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",
type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",
type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",
type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",
type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",
isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},
{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},
{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",
type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},
{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},
{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",
type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},
{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",
type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},
{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",
type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",
type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},
{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",
isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},
{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},
{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},
{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",
type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",
type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",
type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},
{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",
type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",
type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",
type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",
type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},
{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},
{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",
type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];xx.fonts=MP;xx.fonts=MP;xx.fonts=MP;xx.default=O2;var Og=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Og.textlayerNodeForFontMeasure=function(f){var m=f.viewState,n=m.text_layer_node;m=m.fontmetric_text_layer_node;
n&&!n.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));m&&!m.className.includes("newtext-text-layer")&&(f.viewState.fontmetric_text_layer_node=m=null);n&&!m&&n.parentNode&&(m=f.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return m};Og.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&Og.extendingChars.test(f)};Og.skipExtendingChars=function(f,m,n){for(;(0>
n?0<m:m<f.length)&&Og.isExtendingChar(f.charAt(m));)m+=n;return m};Og.charBoundsOfBigMonospacedLine=function(f,m,n,a,d,k,b,e){d=void 0===d?0:d;k=void 0===k?0:k;n=n.text.length;if(500>n||m.isProportional(Og.getComputedFontFamily(a)))return null;var l=Infinity,p=b.defaultTextStyle;b.lineWrapping&&(l=a.getBoundingClientRect().width);m=m._domMeasure.defaultCharExtent(f,{defaultTextStyle:p},e);f=m.width;m=m.height;a=Array(n);for(b=0;b<n;b++)d+f>l&&(d=0,k+=m),a[b]={x:d,y:k,width:f,height:m},d+=f;return a};
Og.charBoundsOfLine=function(f,m,n,a){n=void 0===n?0:n;a=void 0===a?0:a;f=m.ELEMENT_NODE;var d=m.TEXT_NODE,k=m.ownerDocument,b=[],e=0;if(m)if(m.className.includes("line")){n-=m.offsetLeft;a-=m.offsetTop;var l=m.childNodes[0]}else l=m.getElementsByClassName("line")[0].childNodes[0],n=n-m.offsetLeft+Og.getComputedMarginLeft(m),a-=m.offsetTop;else l=null;if(!l){var p=l=k.createElement("br");m.appendChild(p)}for(;l&&!(Infinity<e);){var q="BR"!==l.tagName&&l.nodeType===f&&l.childNodes[0]||l;if(q.nodeType===
d)for(var u=q.length,w=0;w<u;w++){var y=Og.measureCharInner(k,q,w,"right");var A=y.left;var C=y.top;m=y.width;y=y.height;A+=n;C+=a;b[e++]={x:A,y:C,width:m,height:y}}else if(l.nodeType===f)q=l.getBoundingClientRect(),A=q.left,C=q.top,m=q.width,y=q.height,A+=n,C+=a,b[e++]={x:A,y:C,width:m,height:y};else throw Error("Cannot deal with node "+l);l=l.nextSibling}p&&p.parentNode.removeChild(p);return b};Og.measureCharInner=function(f,m,n,a){a=void 0===a?"left":a;var d=n;n+=1;if(3==m.nodeType)for(var k=0;4>
k;k++){var b=Og.getUsefulRect(Og.range(f,m,d,n).getClientRects(),a);if(b.left||b.right||0==d)break;n=d;--d}return b};Og.range=function(f,m,n,a,d){f=f.createRange();f.setEnd(d||m,a);f.setStart(m,n);return f};Og.getUsefulRect=function(f,m){var n={left:0,right:0,top:0,bottom:0};if("left"==m)for(m=0;m<f.length&&(n=f[m]).left==n.right;m++);else for(m=f.length-1;0<=m&&(n=f[m]).left==n.right;m--);return n};Og.string=rg;Og.arr=Ke;Og.obj=df;Og.FontDetector=Cha;Og.cumulativeOffset=iw;Og.config=ok;Og.debug=
!!Og.config.onloadURLQuery["debug-font-metric"];Og.checkTimeout=1E3;var P2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("FontMetric")&&"function"===typeof m.FontMetric?m.FontMetric:m.FontMetric=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo=
{};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(a){if(this.element){var d=this.element.parentNode;var k=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};k&&d&&this.install(k,d,a)}},{key:"install",value:function(a,d,k){this.element=a.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new Og.DOMTextMeasure).install(a,
d,k)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";a.left=a.top="0px";a.visibility="hidden";a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d?"hidden":"visible"}},{key:"measure",value:function(a,d){var k=a.fontFamily,b=a.fontSize,e=a.fontWeight,l=a.fontStyle,p=
a.textDecoration,q=a.textStyleClasses;a=a.transform;var u=this.element;a&&(a=a.inverse());u.textContent=d;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:k,fontWeight:e,fontStyle:l,textDecoration:p,transform:a,fontSize:b+"px"});u.className=q?q.join(" "):"";try{var w=u.getBoundingClientRect();var y=w.width;var A=w.height}catch(C){return{width:0,height:0}}return{height:A,width:y}}},{key:"charBoundsFor",value:function(a,d){var k=d.length,b=Array(k),e=this.cachedBoundsInfo,l=e.bounds,
p=e.str;e=e.style;if(this.isProportional(a.fontFamily)){e=l&&Og.obj.equals(e,a);for(var q=!a.fixedCharacterSpacing,u=0,w=0;u<k;u++){var y=d[u];if(q)if(e=e&&y===p[u]){var A=l[u];y=A.width;A=A.height}else y=d.substr(0,u+1),A=this.measure(a,y),y=A.width,A=A.height,y-=w;else A=this.sizeFor(a,y),y=A.width,A=A.height;b[u]={x:w,y:0,width:Math.ceil(y),height:Math.ceil(A)};w+=y}q&&(this.cachedBoundsInfo={bounds:b,str:d,style:a})}else for(d=this.sizeFor(a,"x",!0),a=this.sizeFor(a,"xx",!0).width-d.width,d=d.height,
p=0;p<k;p++)l=a*p,b[p]={x:l,y:0,width:a,height:d};return b}},{key:"isProportional",value:function(a){if(this.isProportionalCache.hasOwnProperty(a))return this.isProportionalCache[a];var d={fontFamily:a,fontSize:12},k=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[a]=k!==d}},{key:"sizeFor",value:function(a,d,k){d=void 0===d?"":d;var b=a.fontFamily,e=a.fontSize,l=a.fontWeight,p=a.fontStyle,q=a.textDecoration,u=a.textStyleClasses;a={fontFamily:b,fontSize:e,fontWeight:l,
fontStyle:p,textDecoration:q,textStyleClasses:u};if((void 0===k||!k)&&1<d.length)return this.measure(a,d);k=u?u.join(" "):"";b=[b,e,l,p,q,k].join("-");this.charMap[b]||(this.charMap[b]={});this.charMap[b][d]||(this.charMap[b][d]=this.measure(a,d));return this.charMap[b][d]}},{key:"defaultLineHeight",value:function(a){return this.sizeFor(a," ").height}},{key:"supportedFonts",get:function(){return Og.arr.uniq(Object.keys(this.supportedFontCache).map(function(a){return a.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,
"")}))}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;var k=this.fontDetector||(this.fontDetector=new Og.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[a+"-"+d]){var b=this.supportedFontCache[a+"-"+d],e=b.ts;b=b.value;if(Date.now()-e<Og.checkTimeout)return b}k=k.isFontSupported(a,d);this.supportedFontCache[a+"-"+d]={ts:Date.now(),value:k};return k}},{key:"defaultCharExtent",value:function(a,d,k){return this._domMeasure.defaultCharExtent(a,d,k)}},{key:"manuallyComputeCharBoundsOfLine",
value:function(a,d,k,b,e,l,p){return this._domMeasure.computeCharBBoxes(a,d,0,0,e,l,p,this)}},{key:"manuallyComputeBoundsOfLines",value:function(a,d,k,b,e,l,p){return this._domMeasure.computeBBoxesOfLines(a,d,0,0,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(a){if(!this._fontMetric){if(!a&&"undefined"===
typeof document)throw Error("Cannot initialize FontMetric without document");a||(a={document:document});this._fontMetric=this.forDOMEnv(a)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(a){a=a.document;var d=new Og.FontMetric;d.install(a,a.body);return d}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:321,end:7644})}(void 0),Dha=P2=Og.FontMetric;Og.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("DOMTextMeasure")&&"function"===typeof m.DOMTextMeasure?m.DOMTextMeasure:m.DOMTextMeasure=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:"reset",value:function(){if(this.element){var a=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&a&&this.install(d,a);return this}},
{key:"install",value:function(a,d,k){this.maxLineBBoxCacheCount=(this.debug=k=void 0===k?!1:k)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=k?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=a;a=this.element=a.createElement("div");a.className="dom-measure"+(k?" debug":"");this.setMeasureNodeStyles(a.style,!0);d.appendChild(a);return this}},{key:"uninstall",value:function(){var a=this.element;a&&(a.parentNode&&
a.parentNode.removeChild(a),this.element=null)}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";this.debug||(a.left=a.top="0px",a.visibility="hidden");a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(a){var d=a.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,a.paddingLeft,a.paddingRight,a.paddingTop,a.paddingBottom,a.width,
a.height,a.clipMode,a.lineWrapping,a.textAlign].join("-")}},{key:"defaultCharExtent",value:function(a,d,k){var b=this,e=this.generateStyleKey(d),l=this.defaultCharWidthHeightCache[e];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var p=this.doc;return this.withTextLayerNodeDo(a,k,d,e,function(q){var u=p.createElement("span");u.className="line";u.style.whiteSpace="pre";q.appendChild(u);u.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var w=u.getBoundingClientRect().width,y=p.createElement("span");y.className="line";y.style.whiteSpace="pre";q.appendChild(y);y.textContent="H\ne\nll\no";var A=y.getBoundingClientRect().height;q.removeChild(u);q.removeChild(y);return b.defaultCharWidthHeightCache[e]={width:w/92,height:Math.ceil(A/4)}})}},{key:"computeBBoxesOfLines",value:function(a,d,k,b,e,l,p){var q=this;k=void 0===k?0:k;b=void 0===b?0:b;for(var u=this.generateStyleKey(e),w=Array(d.length),y=!0,A=0;A<d.length;A++){var C=!d[A].textAttributes.length&&
this.lineBBoxCache[u+"_"+d[A].text];C&&C.height&&C.width?w[A]=C:y=!1}return y?w:this.withTextLayerNodeDo(a,l,e,u,function(E,L,I){for(var V=Array(d.length),T=Array(d.length),Y=0;Y<d.length;Y++)if(!T[Y]){var na=p(d[Y]);na.style.display="inline-block";E.appendChild(na);V[Y]=na}for(Y=0;Y<V.length;Y++)if(!T[Y]){na=V[Y];var Ba=na.getBoundingClientRect();q.lineBBoxCache[u+"_"+d[Y].text]=T[Y]={x:Ba.left-na.offsetLeft+k-L,y:Ba.top-na.offsetTop+b-I,width:Ba.width,height:Ba.height}}for(L=0;L<V.length;L++)E.removeChild(V[L]);
return T})}},{key:"computeCharBBoxes",value:function(a,d,k,b,e,l,p,q){var u=this;k=void 0===k?0:k;b=void 0===b?0:b;return this.withTextLayerNodeDo(a,l,e,this.generateStyleKey(e),function(w,y,A){var C=p(d);w.appendChild(C);w=1E4<d.stringSize&&Og.charBoundsOfBigMonospacedLine(a,q,d,C,k,b,e,l)||Og.charBoundsOfLine(d,C,k-y,b-A);u.debug||C.parentNode.removeChild(C);return w})}},{key:"withTextLayerNodeDo",value:function(a,d,k,b,e){var l=this.doc,p=this.textlayerNodeCache,q=this.element,u=Og.textlayerNodeForFontMeasure(a);
u||(u=p[b]);if(!u){this.textlayerNodeCacheCount++;u=p[b]=d(k,[]);u.id=b;d=k.width;var w=k.clipMode;k.width||k.clipMode&&"visible"!==k.clipMode?(k=l.createElement("div"),k.style.position="absolute",w&&(k.style.overflow=w),d&&(k.style.width=d+"px"),k.id=b,k.appendChild(u),q.appendChild(k)):q.appendChild(u)}b=a.getGlobalTransform().inverse();a.env.renderer&&a.env.renderer.getNodeForMorph(a)&&(1!=b.getScale()||0!=b.getRotation())&&(b.e=b.f=0,u.style.transform=b.toString());b=u.getBoundingClientRect();
a=b.left;b=b.top;try{return e(u,a,b)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){e=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;e--&&(y=q.childNodes[0]);)p[y.id]=null,q.removeChild(y);this.textlayerNodeCacheCount-=e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11314,end:19760})})(void 0);Og.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Og.getComputedFontFamily="function"===typeof Og.GLOBAL.getComputedStyle?function(f){return Og.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};Og.getComputedMarginLeft="function"===typeof Og.GLOBAL.getComputedStyle?function(f){return parseInt(Og.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};Og.default=P2;var sh=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");sh.signalBindings=function(f,m,n){if(f=f.attributeConnections){f=f.slice();for(var a=0;a<f.length;a++)f[a].sourceAttrName===m&&f[a].update(n)}};sh.informMorph=function(f,m,n){try{n.onChange(m);sh.signalBindings(n,"change",m);for(var a=n.owner;a;)a.onSubmorphChange(m,n),a=a.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};sh.arr=Ke;sh.string=rg;sh.obj=df;sh.connect=Jj;sh.signal=
xk;sh.disconnect=No;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("Change")&&"function"===typeof m.Change?m.Change:m.Change=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.target=a;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var NP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=m.hasOwnProperty("GroupChange")&&"function"===typeof m.GroupChange?m.GroupChange:m.GroupChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(a){this.changes.push(a);
a.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(sh.Change);sh.GroupChange=NP;sh.GroupChange=NP;sh.GroupChange=NP;var OP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ValueChange")&&"function"===typeof m.ValueChange?m.ValueChange:m.ValueChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.prop=d;this.value=k;this.prevValue=null;this.meta=b}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],m,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(sh.Change);sh.ValueChange=OP;sh.ValueChange=OP;sh.ValueChange=OP;var PP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("MethodCallChange")&&"function"===typeof m.MethodCallChange?m.MethodCallChange:m.MethodCallChange=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.selector=d;this.args=k;this.undo=b;this.meta=e}},{key:"apply",value:function(){var a=this.target;a[this.selector].apply(a,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var a=this.undo,d=a.target;d[a.selector].apply(d,a.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(sh.GroupChange);sh.MethodCallChange=PP;sh.MethodCallChange=PP;sh.MethodCallChange=PP;var VH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ChangeManager")&&"function"===typeof m.ChangeManager?m.ChangeManager:m.ChangeManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(a){return this.changes.filter(function(d){return d.target===a})}},{key:"apply",value:function(a,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(a,d,k){this.defaultMeta=a;this.metaStack.push(a);try{var b=k(d)}finally{return this.metaStack.pop(),
this.defaultMeta=sh.arr.last(this.metaStack)||{},b}}},{key:"addValueChange",value:function(a,d,k,b){d=new sh.ValueChange(a,d,k,Object.assign({},this.defaultMeta,{},b));return this._record(a,d)}},{key:"addMethodCallChangeDoing",value:function(a,d,k){var b=a.target,e=a.selector,l=a.args;(a=a.undo)||(a=function(){return console.warn("No undo recorded for "+b+"."+e)});l=new sh.MethodCallChange(b,e,l,a,this.defaultMeta);d.groupChangesWhile(l,k);return l}},{key:"_record",value:function(a,d){sh.signal(this,
"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=a._morphicState[d.prop],a._morphicState[d.prop]=d.value);a.makeDirty(d);var k=sh.arr.last(this.changeGroupStack);k&&k.consumesChanges()?k.addChange(d):(this.changes.push(d),a._rev=++this.revision,this.informChangeListeners(d));sh.informMorph(this,d,a);return d}},{key:"groupChangesWhile",value:function(a,d,k,b){b=void 0===b?!0:b;d||(d=new sh.GroupChange(a));this.changeGroupStack.push(d);try{return k(),sh.arr.remove(this.changeGroupStack,d),
b?this._record(a,d):d}catch(e){throw sh.arr.remove(this.changeGroupStack,d),e;}}},{key:"dontRecordChangesWhile",value:function(a,d){return this.groupChangesWhile(a,void 0,d,!1)}},{key:"recordChangesWhile",value:function(a,d){var k=this.changes.length;a();a=this.changes.slice(k,this.changes.length);return d?a.filter(d):a}},{key:"addChangeListener",value:function(a){sh.arr.pushIfNotIncluded(this.changeRecordedListeners,a)}},{key:"removeChangeListener",value:function(a){sh.arr.remove(this.changeRecordedListeners,
a)}},{key:"informChangeListeners",value:function(a){this.changeRecordedListeners.forEach(function(d){return d(a)})}},{key:"recordChangesStart",value:function(a,d){d=sh.obj.newKeyIn(this.changeRecorders,(void 0===d?"":d)+"__change_recorder_"+Date.now());var k=a?function(e){return a(e)&&b.changes.push(e)}:function(e){return b.changes.push(e)},b=this.changeRecorders[d]={id:d,filter:a,changes:[],listener:k};this.addChangeListener(k);return b}},{key:"recordChangesStop",value:function(a){if(!(a in this.changeRecorders))return[];
var d=this.changeRecorders[a],k=d.changes;d=d.listener;delete this.changeRecorders[a];this.removeChangeListener(d);return k}},{key:"recordChangesStartForMorph",value:function(a,d){d=this.recordChangesStart(d,a.id);var k=this.changeRecordersPerMorph.get(a);k||(k=[],this.changeRecordersPerMorph.set(a,k));k.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(a,d){var k=this.changeRecordersPerMorph.get(a);if(!k||!k.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
a+": recorder not found"),[];(a=d)?sh.arr.remove(k,a):a=k.pop();return this.recordChangesStop(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);sh.ChangeManager=VH;sh.ChangeManager=
VH;sh.ChangeManager=VH;var Uj=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Uj.printArg=function(f){return Uj.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Uj.obj=df;Uj.arr=Ke;Uj.events=lu;Uj.fun=Qj;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("Undo")&&"function"===typeof m.Undo?m.Undo:m.Undo=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){d=void 0===d?[]:d;this.name=a;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===k?0:k}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(a){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(k){var b=k.target;return b.isUsedAsEpiMorph()||!d.targets.some(function(e){return e===b||e.isAncestorOf(b)})?!1:"function"===typeof a?a(k):!0});return this}},{key:"stopRecording",value:function(){var a=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(a);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}},{key:"addTarget",value:function(a){Uj.arr.pushIfNotIncluded(this.targets,a)}},{key:"addUndos",value:function(a){a=Uj.arr.sortBy(a.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});
a.length&&(this.changes=Uj.arr.flatmap(a,function(d){return d.changes}),this.timestamp=a[0].timestamp,this.no=a[0].no,this.name=a.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var a=this.name,d=this.changes,k=this.no,b=this.isRecording();d=d.length?"\n  "+d.map(function(e){var l=e.selector,p=e.args,q=e.prop,u=e.value;e=e.target;return l?e+"."+l+"("+p.map(Uj.printArg)+")":e+"."+q+" = "+Uj.printArg(u)}).join("\n  "):"no changes";return"Undo("+k+":"+a+" "+(b?"RECORDING ":
"")+d+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var gB=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("UndoManager")&&"function"===
typeof m.UndoManager?m.UndoManager:m.UndoManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.reset();this.filter=a}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(a){a=
void 0===a?null:a;this.groupLaterCancel();a&&this.undos.includes(a)&&(this.grouping.current=Uj.arr.uniq(this.undos.slice(this.undos.indexOf(a)).concat(this.grouping.current)));this.grouping.current.length&&(a=this.grouping.current.slice(1),this.grouping.current[0].addUndos(a),this.undos=Uj.arr.withoutAll(this.undos,a),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(a,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(a,d);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var a=this.grouping;a.debounce&&(a.debouncedCanceled=!0,this.grouping=Object.assign({},a,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(a){var d=this,k=this.grouping;(k.debounce||(k.debounce=Uj.fun.debounce(a||k.debounceTime,function(){k.debounce=null;k.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(a,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo "+d+" for "+
a.name+", but "+this.undoInProgress.name+" is currently in progress.");else return this.undoInProgress=(new Uj.Undo(d,[a],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var a=this.undoInProgress;if(!a)return null;a.stopRecording();this.undoInProgress=null;this.undos.push(a);this.grouping.current.push(a);this.redos.length&&(this.redos.length=0);return a}},{key:"removeLatestUndo",value:function(){this.undoStop();var a=this.undos.pop();Uj.arr.remove(this.grouping.current,
a);return a}},{key:"undo",value:function(){var a=this.removeLatestUndo();if(a){Uj.arr.remove(this.grouping.current,a);this.redos.unshift(a);this.applyCount++;try{a.reverseApply()}finally{this.applyCount--}return a}}},{key:"redo",value:function(){this.undoStop();var a=this.redos.shift();if(a){this.undos.push(a);this.applyCount++;try{a.apply()}finally{this.applyCount--}return a}}},{key:"toString",value:function(){var a=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+a+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5941})}(void 0);Uj.UndoManager=
gB;Uj.UndoManager=gB;Uj.UndoManager=gB;var Nk=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");Nk.promise=Vf;Nk.bowser=zn;Nk.touchInputDevice=Ll;Nk.placeholderValue="\u0001\u0001";Nk.placeholderRe=/\u0001/g;var Q2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=m.hasOwnProperty("TextInput")&&"function"===typeof m.TextInput?m.TextInput:m.TextInput=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.eventDispatcher=a;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(a,d){var k=this,b=this.domState,e=b.isInstalled,l=b.rootNode;this.world=d;if(e){if(l===a)return;this.uninstall()}b.isInstalled=!0;b.rootNode=
a;a.tabIndex=1;d=b.textareaNode=a.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
Nk.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";a.insertBefore(d,a.firstChild);Nk.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));b.eventHandlers=[{type:"focusin",node:a,fn:function(p){return k.onRootNodeFocus(p)},
capturing:!0},{type:"focusin",node:b.textareaNode,fn:function(p){return k.onTextAreaFocus(p)},capturing:!0},{type:"blur",node:b.textareaNode,fn:function(p){return k.onTextAreaBlur(p)},capturing:!0},{type:"keydown",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"keyup",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"cut",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},
capturing:!1},{type:"copy",node:b.textareaNode,fn:function(p){return k.inputState.manualCopy?k.inputState.manualCopy.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"paste",node:b.textareaNode,fn:function(p){return k.inputState.manualPaste?k.inputState.manualPaste.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"compositionstart",node:b.textareaNode,fn:function(p){return k.onCompositionStart(p)},capturing:!1},{type:"compositionend",node:b.textareaNode,fn:function(p){return k.onCompositionEnd(p)},
capturing:!1},{type:"compositionupdate",node:b.textareaNode,fn:function(p){return k.onCompositionUpdate(p)},capturing:!1},{type:"input",node:b.textareaNode,fn:function(p){return k.onInput(p)},capturing:!1}];b.eventHandlers.forEach(function(p){return p.node.addEventListener(p.type,p.fn,p.capturing)});return this}},{key:"uninstall",value:function(){var a=this.domState;a.isInstalled=!1;a.eventHandlers.forEach(function(k){return k.node.removeEventListener(k.type,k.fn,k.capturing)});var d=a.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);a.rootNode=null;return this}},{key:"resetValue",value:function(){var a=this.domState.textareaNode;a&&(a.value=Nk.placeholderValue)}},{key:"readValue",value:function(){var a=this.domState.textareaNode;return a?a.value.replace(Nk.placeholderRe,""):""}},{key:"focus",value:function(a,d){var k=this.domState.textareaNode;k&&(Nk.touchInputDevice&&a&&a.isText&&!a.readOnly&&k.removeAttribute("disabled"),a&&a.stealFocus||k.getRootNode().activeElement!==k&&k.focus(),
Nk.bowser.firefox&&Promise.resolve().then(function(){return k.getRootNode().activeElement!==k&&k.focus()}),a&&a.isText&&a.focusable?(Nk.touchInputDevice&&k.focus(),this.ensureBeingAtCursorOfText(a)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var a=this.domState.textareaNode;Nk.touchInputDevice&&a.setAttribute("disabled",!0);a&&a.blur()}},{key:"doCopyWithMimeTypes",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode,
b=function(e){k.removeEventListener("copy",b);e.preventDefault();a.forEach(function(l){return e.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return k.removeEventListener("copy",b)},300);k.addEventListener("copy",b);k.value="";k.select();k.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode;k.value=a;k.select();k.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var a=
this;return this.execCommand("manualPaste",function(){var d=a.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(a,d){var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(!k.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");b=k.inputState;if(!b[a]){q.jumpTo(2);break}q.setCatchFinallyBlocks(3);return q.yield(b[a].promise,
5);case 5:q.leaveTryBlock(2);break;case 3:q.enterCatchBlock();case 2:return e=Nk.promise.deferred(),l=!1,b[a]={onEvent:function(u){l||(b[a]=null,l=!0,e.resolve(u))},promise:e.promise},d(),q.setCatchFinallyBlocks(6),q.yield(Nk.promise.waitFor(1E3,function(){return l}),8);case 8:q.leaveTryBlock(7);break;case 6:p=q.enterCatchBlock(),b[a]=null,l=!0,e.reject(p);case 7:return q.return(e.promise)}})}},{key:"onTextAreaBlur",value:function(a){var d=this;setTimeout(function(){var k=d.domState||{},b=k.textareaNode;
k=k.rootNode;if(b&&k){var e=b.getRootNode();e.activeElement!==k&&(!d.world.isEmbedded||e.activeElement)||d.world.focusedMorph&&d.world.focusedMorph.stealFocus||Nk.touchInputDevice||b.focus()}})}},{key:"onTextAreaFocus",value:function(a){}},{key:"onRootNodeFocus",value:function(a){var d=this.domState||{},k=d.rootNode;if(a.target===d.textareaNode||a.target===k)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(a){if(!this.inputState.composition){if(!a.data){var d=
this.readValue();a.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(a)}}},{key:"onCompositionStart",value:function(a){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(a)}},{key:"onCompositionUpdate",value:function(a){var d=this.inputState.composition,k=this.readValue();d.lastValue!==k&&(d.lastValue=k,this.eventDispatcher.dispatchDOMEvent(a))}},{key:"onCompositionEnd",value:function(a){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(a)}},
{key:"setPosition",value:function(a){var d=(this.domState||{}).textareaNode;d&&(d.style.left=a.x+"px",d.style.top=a.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(a){this.setPosition(a.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(a){var d=a.world();if(d){var k=a.whatsVisible,b=a.cursorPosition,e=b.row;b=b.column;e=Math.max(k.startRow,Math.min(e,k.endRow));k=a.charBoundsFromTextPosition({row:e,column:b}).topLeft();a=d.visibleBounds().insetBy(10).constrainPt(a.worldPoint(k.subPt(a.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],m,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12394})}(void 0),Eha=Q2=Nk.TextInput;Nk.default=Q2;var QP=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");QP.arr=Ke;var R2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=m.hasOwnProperty("KillRing")&&"function"===typeof m.KillRing?m.KillRing:m.KillRing=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){this.size=void 0===a?0:a;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(a){var d=this.buffer;d.push(a);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return a}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],m,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Fha=R2=QP.KillRing;QP.default=R2;var Gg=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Gg.computeHashIdOfEvent=function(f){var m=
f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!Gg.canonicalizeFunctionKey(m)&&m&&Gg.letterRe.test(m)&&(f=-1);return f};Gg.isModifier=function(f){if(Gg.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return Gg.arr.withoutAll(Object.keys(Gg.KEY_MODS),["","input-"]).includes(f)};Gg.canonicalizeFunctionKey=function(f){f&&(f=f.toLowerCase());switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";
break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down"}return Gg.FUNCTION_KEYS.includes(f)?Gg.string.capitalize(f):""};Gg.decodeKeyIdentifier=function(f,m){var n=/u\+?([\d\w]{4})/gi,a=function(d,k){return String.fromCharCode(parseInt(k,16))};f=f&&f.replace(n,a);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===m&&(f="Backspace");return f};Gg.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);
if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};Gg.dedasherize=function(f){for(var m=[];;){var n=f.indexOf("-");if(-1===n)return f&&m.push(f),m;0===n?(m.push(f[0]),f=f.slice(2)):(m.push(f.slice(0,n)),f=f.slice(n+1))}};Gg.bowser=zn;Gg.arr=Ke;Gg.string=rg;Gg.letterRe=/[a-z]/i;Gg.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Gg.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},m=["alt","ctrl","meta","shift"],n=Math.pow(2,m.length);n--;)f[n]=
m.filter(function(a){return n&f[a]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();Gg.isNumber=function(){var f=/^[0-9]+$/;return function(m){return f.test(m)}}();Gg.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");Gg.Keys={computeHashIdOfEvent:Gg.computeHashIdOfEvent,keyComboToEventSpec:function(f,
m){m=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},m);var n=Gg.dedasherize(f),a={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return m.keyCombo=f,m.key=n[1],m;for(var d=n.length-1;0<=d;d--){var k=a[n[d].toLowerCase()];k&&(n.splice(d,1),m.isModified=!0,m[k]=!0)}if(!n.length)return m.keyCombo=
Gg.Keys.eventToKeyCombo(m),m.key=Gg.arr.last(Gg.dedasherize(m.keyCombo)),m.onlyModifiers=!0,m;1<n.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');f=Gg.arr.last(n);(n=Gg.canonicalizeFunctionKey(f))?(m.isFunctionKey=!0,m.key=n):m.key=m.isModified?Gg.string.capitalize(f):f;m.keyCombo=Gg.Keys.eventToKeyCombo(m);return m},eventToKeyCombo:function(f,m){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},m);m=f.key;var n=f.data,a=f.keyIdentifier;
if("string"===typeof n)return"input-"+n;if(!m&&a&&(m=Gg.decodeKeyIdentifier(a,f.which||f.keyCode),f.key=m=m[f.shiftKey?"toUpperCase":"toLowerCase"](),Gg.isModifier(m)))return Gg.string.capitalize(m);n=Gg.KEY_MODS[Gg.computeHashIdOfEvent(f)];if("input-"===n)return n+m;f.code&&(m=Gg.identifyKeyFromCode(f)||m);f=!m||Gg.isModifier(m)?n.replace(/-$/,""):n+m;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(d,k,b){return k+b.toUpperCase()})},canonicalizeKeyCombo:function(f){return Gg.Keys.eventToKeyCombo(Gg.Keys.keyComboToEventSpec(f))},
canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:Gg.Keys.keyComboToEventSpec(Gg.Keys.eventToKeyCombo(f))}};var RP=Gg.Keys;Gg.default=RP;var Hg=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");Hg.bowser=zn;Hg.obj=df;Hg.pt=bh;Hg.Keys=RP;Hg.cumulativeOffset=iw;var SP="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");Hg.pointerEvents=SP;Hg.pointerEvents=SP;Hg.pointerEvents=
SP;var TP="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");Hg.mouseEvents=TP;Hg.mouseEvents=TP;Hg.mouseEvents=TP;var UP=["keydown","keyup","keypress"];Hg.keyboardEvents=UP;Hg.keyboardEvents=UP;Hg.keyboardEvents=UP;var WH=Hg.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");Hg.keyLikeEvents=WH;Hg.keyLikeEvents=WH;Hg.keyLikeEvents=WH;var XH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
n=m.hasOwnProperty("Event")&&"function"===typeof m.Event?m.Event:m.Event=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){this.type=a;this.domEvt=d;this.dispatcher=k;this.targetMorphs=b;this.hand=e;this.halo=l;this.layoutHalo=p;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(a){this.onDispatchCallbacks.push(a);return this}},{key:"onAfterDispatch",value:function(a){this.onAfterDispatchCallbacks.push(a);return this}},{key:"onStop",value:function(a){this.onStopCallbacks.push(a);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return Hg.pointerEvents.includes(this.type)||Hg.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&Hg.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(a){return a()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return Hg.pt(0,0);for(var a=this.domEvt.composedPath()[0];a&&a.id!==this.world.id;)a=a.parentNode;if(!a){a=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;a=(a.nodeType===a.DOCUMENT_NODE?a:d).getElementById(this.world.id)}if(!a)return console.error("event position: cannot find world node for determining the position!"),
Hg.pt(0,0);a=Hg.cumulativeOffset(a);d=this.domEvt;a=Hg.pt((d.pageX||0)-a.left,(d.pageY||0)-a.top);1!==this.world.scale&&(a=a.scaleBy(1/this.world.scale));return a}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(a){return a.localize(this.position)}},{key:"isClickTarget",value:function(a){var d=this.state.clickedOnMorph;return d&&(a===d||a.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var a=this.domEvt;if(!a)return!1;var d=!1;Hg.bowser.mac||(d=d||a.ctrlKey);if(Hg.bowser.tablet||Hg.bowser.tablet)d=d||!1;return d||a.metaKey||"Meta"===a.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=Hg.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(a){return this._keyCombo=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],m,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4928})}(void 0);Hg.Event=XH;Hg.Event=XH;Hg.Event=XH;var YH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("KeyEvent")&&"function"===typeof m.KeyEvent?m.KeyEvent:m.KeyEvent=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){console.assert(Hg.keyLikeEvents.includes(a),"not a keyboard event: "+a);Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a,d,k,b,e,l,p);Object.assign(this,Hg.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4937,end:5307})}(Hg.Event);Hg.KeyEvent=YH;Hg.KeyEvent=YH;Hg.KeyEvent=YH;var ZH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof m.SimulatedDOMEvent?m.SimulatedDOMEvent:m.SimulatedDOMEvent=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(a.position){var d=a.position,k=d.x;d=d.y;a=Hg.obj.dissoc(a,["position"]);a.pageX=k;a.pageY=d}!a.hasOwnProperty("pointerId")&&Hg.mouseEvents.concat(Hg.pointerEvents).includes(a.type)&&(a=Object.assign({},a,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},a))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5316,end:6265})}(void 0);Hg.SimulatedDOMEvent=ZH;Hg.SimulatedDOMEvent=ZH;Hg.SimulatedDOMEvent=ZH;var we=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");we.dragStartEvent=function(f,m,n,a,d,k,b){var e=(new we.Event("morphicdragstart",f,m,[n],d,k,b)).onDispatch(function(){a.draggedMorph=
n;a.dragStartMorphPosition=n.position;a.dragStartPosition=e.position;a.lastDragPosition=e.position;a.dragDelta=we.pt(0,0);a.absDragDelta=we.pt(0,0)}).onStop(function(){a.draggedMorph=null;m.schedule(we.dragEndEvent(f,m,n,a,d,k,b))});return e};we.dragEvent=function(f,m,n,a,d,k,b){var e=(new we.Event("morphicdrag",f,m,[a.draggedMorph],d,k,b)).onDispatch(function(){a.dragDelta=(a.draggedMorph.owner||m.world).getInverseTransform().transformDirection(e.position.subPt(a.lastDragPosition));a.absDragDelta=
e.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){return a.lastDragPosition=e.position}).onStop(function(){a.draggedMorph=null;m.schedule(we.dragEndEvent(f,m,n,a,d,k,b))});return e};we.dragEndEvent=function(f,m,n,a,d,k,b){var e=a.draggedMorph||n,l=(new we.Event("morphicdragend",f,m,[e],d,k,b)).onDispatch(function(){a.dragDelta=(e.owner||m.world).getInverseTransform().transformDirection(l.position.subPt(a.lastDragPosition));a.absDragDelta=l.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){a.draggedMorph=
null;a.lastDragPosition=null;a.dragDelta=we.pt(0,0);a.absDragDelta=we.pt(0,0);a.dragStartMorphPosition=null;a.dragStartPosition=null});return l};we.focusEvents=function(f,m){var n=f.eventState;if(n.focusedMorph===m)return[];f=[];n.focusedMorph&&f.push((new we.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));f.push((new we.Event("focus",null,this,[m],null,null,null)).onDispatch(function(){return n.focusedMorph=m}));return f};we.arr=Ke;we.fun=
Qj;we.Path=Ag;we.promise=Vf;we.pt=bh;we.config=ok;we.TextInput=Eha;we.KillRing=Fha;we.Event=XH;we.KeyEvent=YH;we.SimulatedDOMEvent=ZH;we.keyLikeEvents=WH;we.cumulativeOffset=iw;we.bowser=zn;we.touchInputDevice=Ll;we.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];we.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);we.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];we.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};we.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");we.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var S2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=m.hasOwnProperty("EventDispatcher")&&"function"===typeof m.EventDispatcher?m.EventDispatcher:m.EventDispatcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d){this.activations=0;this.emitter=a;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new we.KillRing(we.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=we.Path("performance.timing.navigationStart").get(a)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState=
{timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",
count:void 0}}},{key:"focusMorph",value:function(a){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(a,this.world);we.focusEvents(this,a).forEach(function(k){return d.dispatchEvent(k)})}},{key:"isMorphFocused",value:function(a){return this.eventState.focusedMorph===a}},{key:"isMorphHovered",value:function(a){return this.eventState.hover.hoveredOverMorphs.includes(a)}},{key:"isMorphClicked",value:function(a){return this.eventState.clickedMorph==a}},{key:"isKeyPressed",value:function(a){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(a.toLowerCase())}},
{key:"whenIdle",value:function(){var a=this;return we.promise.waitFor(function(){return 0===a.activations})}},{key:"install",value:function(a){var d=this;if(this.installed)return this;this.installed=!0;var k=this.emitter,b=System.global;we.domEventsWeListenTo.forEach(function(e){var l=e.type,p=e.capturing;e=e.passive;var q=function(u){return d.dispatchDOMEvent(u)};d.handlerFunctions.push({node:k,type:l,fn:q,capturing:p});k.addEventListener(l,q,{capture:p,passive:e})});b.addEventListener&&we.globalDomEventsWeListenTo.forEach(function(e){var l=
e.type,p=e.capturing,q=e.morphMethod;e=e.passive;var u=function(w){return d.dispatchDOMEvent(w,d.world,q)};d.handlerFunctions.push({node:b,type:l,fn:u,capturing:p});b.addEventListener(l,u,{capture:p,passive:e})});this.keyInputHelper=(new we.TextInput(this)).install(a,this.world);we.bowser.ios&&a.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(a){var d=this.handlerFuntions.find(function(k){return k.type==a});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var a=this.handlerFunctions;a.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});a.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(a,d){var k=this,b=a.type,e=this.eventState,l=[d].concat(d.ownerChain()),p="touch"===a.pointerType,q=a.pointerId,u=a.composedPath()[0],w="number"===typeof q&&(we.touchInputDevice||a.isPrimary),y=w?this.world.handForPointerId(q,
a.isPrimary):this.world.firstHand,A=w&&!p?this.world.haloForPointerId(q):null,C=w&&!p?this.world.layoutHaloForPointerId(q):null,E=new (we.keyLikeEvents.includes(b)?we.KeyEvent:we.Event)(b,a,this,l,y,A,C),L=[E];w=[];switch(b){case "keydown":e.pressedKeys[E.key]=!0;break;case "keyup":"Meta"===E.key?e.pressedKeys={}:delete e.pressedKeys[E.key];break;case "click":L=this.processDOMEvent(Object.assign({},a,{type:"pointerdown"}),d).events;b=this.processDOMEvent(Object.assign({},a,{type:"pointerup"}),d).events;
L=L.concat(b);break;case "pointerdown":E.onDispatch(function(){k.focusMorph(d);e.clickedOnMorph=d;e.clickedOnPosition=E.position;e.downTimeStamp=a.timeStamp;var I=!1,V=0;if(e.prevClick){V=e.prevClick;I=V.clickedOnMorph;var T=V.clickedAtTime;V=V.clickCount;T=Date.now()-T;I=I===d&&T<we.config.repeatClickInterval}e.clickCount=I?V+1:1});break;case "pointerup":E.onAfterDispatch(function(){var I=e.clickedOnMorph,V=e.clickedOnPosition,T=e.clickCount,Y=Date.now();e.prevClick={clickedOnMorph:I,clickedOnPosition:V,
clickedAtTime:Y,clickCount:T};e.clickedOnMorph=null;e.clickCount=0;I=a.timeStamp-e.downTimeStamp;V=e.clickedOnPosition.dist(E.position);T=we.config.longClick;Y=T.minDur;var na=T.maxDur;V<T.maxDist&&I>=Y&&I<=na&&(I=new we.Event("longclick",a,k,l,y,A,C),k.schedule(I))});e.draggedMorph&&(L.push(we.dragEndEvent(a,this,d,e,y,A,C)),E.targetMorphs=[e.draggedMorph,this.world]);y.carriesMorphs()&&(e.dropHoverTarget?(L.push(new we.Event("morphicdrophoverout",a,this,[e.dropHoverTarget],y,A,C)),d=e.dropHoverTarget,
e.dropHoverTarget=null):d=y.findDropTarget(E.position,y.grabbedMorphs),y.isAncestorOf(d)&&(d=this.world),L.push(new we.Event("morphicdrop",a,this,[d],y,A,C)),E.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(E.targetMorphs=[this.world],b=y.findDropTarget(E.position,y.grabbedMorphs)||this.world,e.dropHoverTarget===b?L.push(new we.Event("morphicdrophoverupdate",a,this,[b],y,A,C)):(e.dropHoverTarget&&L.push(new we.Event("morphicdrophoverout",a,this,[e.dropHoverTarget],y,A,C)),
e.dropHoverTarget=b,L.push(new we.Event("morphicdrophoverin",a,this,[b],y,A,C)))):e.draggedMorph?(E.targetMorphs=[this.world],L.push(we.dragEvent(a,this,d,e,y,A,C))):e.clickedOnMorph&&e.clickedOnPosition&&e.clickedOnMorph.draggable&&!e.draggedMorph&&!y.carriesMorphs()&&(b=e.clickedOnPosition.dist(E.position),p=e.clickedOnMorph,b>p.dragTriggerDistance&&(p.grabbable?L.push(new we.Event("grab",a,this,[p],y,A,C)):p.draggable&&L.push(we.dragStartEvent(a,this,p,e,y,A,C)),E.targetMorphs=[this.world]));break;
case "pointerover":e.hover.unresolvedPointerOut&&(e.hover.unresolvedPointerOut=!1);b=[d].concat(d.ownerChain()).reverse();L=we.arr.withoutAll(e.hover.hoveredOverMorphs,b).map(function(I){return(new we.Event("hoverout",a,k,[I],y,A,C)).onDispatch(function(){return we.arr.remove(e.hover.hoveredOverMorphs,I)})});b=we.arr.withoutAll(b,e.hover.hoveredOverMorphs).map(function(I){return(new we.Event("hoverin",a,k,[I],y,A,C)).onDispatch(function(){return we.arr.pushIfNotIncluded(e.hover.hoveredOverMorphs,
I)})});L=L.concat(b);break;case "pointerout":L=[];e.hover.unresolvedPointerOut=!0;w.push(function(){if(e.hover.unresolvedPointerOut)return Promise.all(e.hover.hoveredOverMorphs.map(function(I){return k.schedule((new we.Event("hoverout",a,k,[I],y,A,C)).onAfterDispatch(function(){return we.arr.remove(e.hover.hoveredOverMorphs,I)}))}))});p&&this.world.removeHandForPointerId(q);break;case "blur":L=[(new we.Event(b,a,this,[d],y,A,C)).onDispatch(function(){return e.focusedMorph=null})];break;case "focus":L=
we.focusEvents(this,d);break;case "scroll":L=[(new we.Event(b,a,this,[d],y,A,C)).onDispatch(function(){if(!e.scroll.interactiveScrollInProgress){var I=we.promise.deferred(),V=I.promise,T=I.resolve;I="Firefox"==we.bowser.name?500:250;"Safari"==we.bowser.name&&(I=1E3);e.scroll.interactiveScrollInProgress=V;V.debounce=we.fun.debounce(I,function(){e.scroll.interactiveScrollInProgress=null;T()})}e.scroll.interactiveScrollInProgress.debounce();V=u.documentElement||u;I=V.scrollLeft;var Y=V.scrollTop,na=
d.scroll,Ba=na.x;na=na.y;if("hidden"!=V.style.overflow&&Ba!==I||na!==Y)d.scroll=we.pt(I,Y)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?E.targetMorphs=[d]:L=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==b&&"dragover"!==b||a.preventDefault()}return{events:L,later:w}}},{key:"schedule",value:function(a){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(a)}).then(function(){return d.activations--},
function(k){d.activations--;throw k;})}},{key:"dispatchEvent",value:function(a,d){d=d||we.typeToMethodMap[a.type];if(!d)throw Error("dispatchEvent: "+a.type+" not yet supported!");a.onDispatchCallbacks.forEach(function(e){return e()});this.activations++;for(var k,b=a.targetMorphs.length-1;0<=b;b--){try{a.targetMorphs[b][d](a)}catch(e){k=Error("Error in event handler "+a.targetMorphs[b]+"."+d+": "+(e.stack||e)),k.originalError=e,"undefined"!==typeof this.world?this.world.logError(k):console.error(k)}if(k||
a.stopped)break}this.activations--;a.onAfterDispatchCallbacks.forEach(function(e){return e()});if(k)throw k;}},{key:"dispatchDOMEvent",value:function(a,d,k){var b=this,e=this.world,l=this.eventState,p=this.nodeMorphMap,q=a.type;l.timeOfLastActivity=this.timestampBase+a.timeStamp;if(!d&&we.focusTargetingEvents.includes(q))d=l.focusedMorph||e;else if(!d){for(l=a.composedPath()[0];;){d=l.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(l=l.parentNode))return}d=
p.get(l);if(!d){var u=l.id;(d=e.withAllSubmorphsDetect(function(w){return w.id===u}))&&p.set(l,d)}}d&&(a=this.processDOMEvent(a,d),p=a.events,a.later.map(function(w){b.activations++;return we.promise.delay(0).then(w).then(function(){return b.activations--},function(y){b.activations--;throw y;})}),p.forEach(function(w){return b.dispatchEvent(w,k)}),e&&e.needsRerender()&&we.eventsCausingImmediateRender.has(q)&&e.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(a){for(var d=[],k=
0;k<arguments.length;++k)d[k-0]=arguments[k];k=this.emitter.document||this.emitter.ownerDocument;var b=[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next()){var l=e=e.value,p=l.target,q=l.position;l=l.type;if(we.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+l+", no keyInputHelper installed!");e=Object.assign({},e,{target:this.keyInputHelper.textareaNode})}p||(p=q?this.world.morphsContainingPoint(q)[0]:this.world);
p.isMorph&&(e=Object.assign({},e,{target:k.getElementById(p.id)}));e.position&&(p=we.cumulativeOffset(k.getElementById(this.world.id)),e.position=e.position.addXY(p.left,p.top));"scroll"===l&&("scrollLeft"in e||"scrollTop"in e)&&(e.target.scrollLeft=e.scrollLeft||0,e.target.scrollTop=e.scrollTop||0);e=new we.SimulatedDOMEvent(e);b.push(e);this.dispatchDOMEvent(e)}return b}},{key:"doCopy",value:function(a){return this.keyInputHelper.doCopy(a)}},{key:"doCopyWithMimeTypes",value:function(a){return this.keyInputHelper.doCopyWithMimeTypes(a)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(a,d){var k=this,b=[],e=this.eventState;e.clickedOnMorph=null;e.dropHoverTarget&&(b.push(new we.Event("morphicdrophoverout",d.domEvt,this,[e.dropHoverTarget],a,null,null)),e.dropHoverTarget=null);b.forEach(function(l){return k.dispatchEvent(l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],m,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7170,end:30003})}(void 0),Gha=S2=we.EventDispatcher;we.default=S2;var yj=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");yj.defaultDOMEnv=RD;yj.Renderer=UH;yj.FontMetric=Dha;yj.ChangeManager=VH;yj.UndoManager=gB;yj.EventDispatcher=Gha;yj.subscribe=My;yj.unsubscribe=rK;var qn=za("av",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=m.hasOwnProperty("MorphicEnv")&&"function"===typeof m.MorphicEnv?m.MorphicEnv:m.MorphicEnv=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=this;a=void 0===a?yj.defaultDOMEnv():a;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new yj.ChangeManager;this.undoManager=new yj.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof a.then?this._waitForDOMEnv=a.then(function(k){d._waitForDOMEnv=null;d.initWithDOMEnv(k);d.initialized=!0}).catch(function(k){return console.error("Error initializing MorphicEnv with dom env: "+k.stack)}):(this.initWithDOMEnv(a),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(a){this.domEnv=a;this.fontMetric=yj.FontMetric.forDOMEnv(a)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var a=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(a,d){var k=this;d=void 0===d?this.renderer?this.renderer.rootNode:this.domEnv.document.body:d;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return k.setWorld(a)}):
this.setWorldRenderedOn(a,d)}},{key:"setWorldRenderedOn",value:function(a,d,k){var b=this;k=void 0===k?null:k;if(!a||!a.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.setWorldRenderedOn(a,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=a;this.renderer=new yj.Renderer(a,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new yj.EventDispatcher(a.isEmbedded?d:this.domEnv.window,
a)).install(d);a.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=a);a.focus();a.makeDirty();this.renderer.renderLater();return a.whenRendered().then(function(){return b})}},{key:"installSystemChangeHandlers",value:function(){var a=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[yj.subscribe("lively.modules/moduleloaded",function(k){return a.getTargetsFor("onModuleLoaded").forEach(function(b){return b.onModuleLoaded(k)})})];
d["lively.modules/modulechanged"]=[yj.subscribe("lively.modules/modulechanged",function(k){return a.getTargetsFor("onModuleChanged").forEach(function(b){return b.onModuleChanged(k)})})];d["lively.partsbin/partpublished"]=[yj.subscribe("lively.partsbin/partpublished",function(k){return a.getTargetsFor("onPartPublished").forEach(function(b){return b.onPartPublished(k)})})];d["lively.user/userchanged"]=[yj.subscribe("lively.user/userchanged",function(k){return a.getTargetsFor("onUserChanged").forEach(function(b){return b.onUserChanged(k)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var a=this.systemChangeHandlers;a&&(this.systemChangeHandlers=null,Object.keys(a).forEach(function(d){return a[d].forEach(function(k){return yj.unsubscribe(d,k)})}))}},{key:"getTargetsFor",value:function(a){var d=this.world,k=[];if(!d||!d.submorphs)return k;"function"===typeof d[a]&&k.push(d);d=$jscomp.makeIterator(d.submorphs);for(var b=d.next();!b.done;b=d.next())b=b.value,"function"===typeof b[a]&&k.push(b),b.isWindow&&b.targetMorph&&"function"===
typeof b.targetMorph[a]&&k.push(b.targetMorph);return k}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(a){return a._pathDependants=a._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var a=this.changeManager,d=this.world,k=this.fontMetric;a&&(a.changes.length=0);d&&d.withAllSubmorphsDo(function(b){return b.undoManager&&b.undoManager.reset()});k&&k.reset()}},{key:"printStatus",value:function(){var a=this.changeManager,d=
this.world,k=0,b=0;d&&d.withAllSubmorphsDo(function(e){e.undoManager&&(k++,b+=e.undoManager.undos.length+e.undoManager.redos.length)});return a.changes.length+" changes recorded\n"+k+" morphs with undos\n"+b+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var a=this,d=this.whenRenderedRequesters,k=0,b=$jscomp.makeIterator(d),e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;var p=l=l.next().value,q=p.maxAttempts,u=p.resolve;p=p.reject;e._dirty||
e._rendering?++l.currentAttempt>q?(d.delete(e),p(Error("Failed to wait for whenRendered of "+e+" (tried "+q+"x)"))):k++:(d.delete(e),u(e))}this.whenRenderedTickingProcess=k?this.domEnv.window.requestAnimationFrame(function(){return a.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(a,d){var k=this;d=void 0===d?50:d;var b=this.whenRenderedRequesters,e=this.whenRenderedTickingProcess,l=b.get(a);if(!l){var p,q;l=new Promise(function(u,w){p=u;q=w});b.set(a,l={maxAttempts:d,currentAttempt:0,
resolve:p,reject:q,promise:l})}e||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return k.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var a=this.popDefault();if(!a)break;try{a.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var a=this.envs;a.length||this.pushDefault(new this);
return a[a.length-1]}},{key:"pushDefault",value:function(a){this.envs.push(a);return a}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],m,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8366})}(void 0));yj.MorphicEnv=
qn;yj.MorphicEnv=qn;yj.MorphicEnv=qn;var Hha=Object.freeze({__proto__:null,MorphicEnv:qn}),Hq=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Hq.printArg=function(f){return Hq.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Hq.obj=df;Hq.arr=Ke;Hq.promise=Vf;var T2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=m.hasOwnProperty("CommandHandler")&&"function"===typeof m.CommandHandler?m.CommandHandler:m.CommandHandler=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(a){this.history.push(a);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(a){var d=a.target.string,k=a.args,b=a.count,e=a.evt,l=a.keyCombo;return'"'+a.name+'" '+(e?e+" ":"")+(l?l+" ":"")+(k?Hq.printArg(k):"")+("number"===typeof b?" x"+b:"")+" "+d}},{key:"lookupCommand",value:function(a,d){var k;if(!a)return{};"string"===typeof a&&(k=a);"string"===typeof a.command&&(k=a.command);if(a.exec){var b=a;k=b.name}b||(b=d.commands.find(function(e){return e.name===k}));return{name:k,command:b}}},{key:"exec",value:function(a,d,k,b,e){var l=this,
p=this.lookupCommand(a,d)||{},q=p.name,u=p.command;if(!u)return console.warn("Cannot find command "+(q||a)),null;if(q){if(e){var w=e.type;if(e.isKeyEvent)var y=e.keyCombo}this.addToHistory({name:q,target:{string:String(d),id:d.id},args:k,count:b,time:Date.now(),evt:w,keyCombo:y})}var A=d.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=A.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var C=u.exec(d,k,u.handlesCount?b:void 0,e)}catch(E){C=
E,a="Error in interactive command "+q+": "+(E.stack||E),A?A.logError(a):console.error(a)}else console.error("command "+q+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();C&&"function"===typeof C.catch?(C.catch(function(E){var L="Error in interactive command "+q+": "+E+"\n"+(E.stack||E);A?A.logError(L):console.error(L);throw E;}),this.progressIndicator&&Hq.promise.finally(C,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
C&&"number"===typeof b&&1<b&&!u.handlesCount&&(C="function"===typeof C.then?C.then(function(){return l.exec(u,d,k,b-1,e,null)}):this.exec(u,d,k,b-1,e,null));return C}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],m,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),Iha=T2=Hq.CommandHandler;Hq.default=T2;var pf=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");pf.ensureSpaces=function(f){return f.length?f:" "};pf.invokeKeyHandlers=function(f,m,n){n=void 0===n?!1:n;var a=m=pf.Keys.canonicalizeEvent(m),d=a.key,k=a.data,b,e=!1,l=f.keyhandlers,p=m.keyInputState||{};a=a.keyCombo.startsWith("input-");var q=!1,u=p.count,w=p.keyChain||"",y=!1;if(!l||n&&a)return!1;for(n=l.length;n--;)if((b=l[n].eventCommandLookup(f,
m))&&b.command){y=b;b=y.command;var A=y.args,C=y.passEvent,E=y.count;q=y.keyChain;var L=y.onlyWhenFocused;y=!0;u=E;w=q;q="null"===b;if(L&&(L=f.world())&&L.focusedMorph&&L.focusedMorph!==f)continue;e=q?!1:f.execCommand(b,A,E,m);!e||a&&"insertstring"===b||C||"function"!==typeof m.stop||m.stop();if(e||q)break}e||q||!a||!f.onTextInput||w||(e=f.execCommand("insertstring",{string:k||d,undoGroup:pf.config.text.undoGroupDelay},p.count,m));if(y)if("function"===typeof m.onAfterDispatch)m.onAfterDispatch(function(){p.count=
e?void 0:u;p.keyChain=e?"":w});else p.count=e?void 0:u,p.keyChain=e?"":w;return e&&!q};pf.simulateKeys=function(f,m,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var a,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(a=1===m.length?[m]:m.split(/ /g).map(pf.ensureSpaces),d=$jscomp.makeIterator(a),k=d.next());if(3!=e.nextAddress){if(k.done)return e.jumpTo(0);b=k.value;return e.yield(pf.simulateKey(f,b,n),3)}k=d.next();return e.jumpTo(2)})};pf.simulateKey=function(f,
m,n){return pf.invokeKeyHandlers(f,Object.assign({},pf.Keys.keyComboToEventSpec(m),{keyInputState:n}))};pf.bowserOS=function(){return pf.bowser.mac?"mac":pf.bowser.windows?"windows":pf.bowser.windowsphone?"windowsphone":pf.bowser.linux?"linux":pf.bowser.chromeos?"chromeos":pf.bowser.android?"android":pf.bowser.ios?"ios":pf.bowser.blackberry?"blackberry":pf.bowser.firefoxos?"firefoxos":pf.bowser.webos?"webos":pf.bowser.bada?"bada":pf.bowser.tizen?"tizen":pf.bowser.sailfish?"sailfish":"unknown"};pf.findKeysForPlatform=
SD;pf.Keys=RP;pf.bowser=zn;pf.config=ok;pf.arr=Ke;pf.findKeysForPlatform=SD;pf.findKeysForPlatform=SD;pf.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var VP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=m.hasOwnProperty("KeyHandler")&&
"function"===typeof m.KeyHandler?m.KeyHandler:m.KeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.platform=a=void 0===a?pf.bowserOS():a;this.keyBindings={}}},{key:"eventCommandLookup",value:function(a,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(a,d){var k=this;d=void 0===d?{keyChain:void 0,
count:void 0}:d;a=pf.Keys.canonicalizeKeyCombo(a);var b=d.keyChain||"";d=d.count;if(!b&&a.startsWith("Ctrl-")){var e=a.match(/^Ctrl-([0-9]+)/);if(e)return{command:"null",count:parseInt(("number"===typeof d?d:"")+e[1])};if("Ctrl-U"===a)return{command:"null",count:4,keyChain:"Ctrl-U"}}e=[a];if(!p&&a.startsWith("input-")){p=a.replace(/^(input-)(.*)$/,function(q,u,w){return u+w.toUpperCase()});var l=a.replace(/^(input-)(.*)$/,function(q,u,w){return u+w.toLowerCase()});e.push(p,l)}var p=e.map(function(q){return k.keyBindings[q]})[0];
b&&(e=e.find(function(q){return k.keyBindings[b+" "+q]}))&&(b+=" "+e,p=this.keyBindings[b]||p);if(p&&"chainKeys"===p)return b=b||a,a={command:"null",keyChain:b},void 0!==d&&(a.count=d),a;if(p)return a="object"===typeof p?Object.assign({},p):{command:p},void 0!==d&&(a.count=d),a}},{key:"bindKey",value:function(a,d){var k=this;"object"===typeof a&&a&&!Array.isArray(a)&&(a=pf.findKeysForPlatform(a,this.platform));if(a){if("function"===typeof d)return this.addCommand({exec:d,bindKey:a,name:d.name||a});
(Array.isArray(a)?a:a.includes("|")?a.split("|"):[a]).forEach(function(b){var e="";if(-1!=b.indexOf(" ")){var l=b.split(/\s+/);b=l.pop();l.forEach(function(p){p=pf.Keys.canonicalizeKeyCombo(p);e+=(e?" ":"")+p;k.addCommandToBinding(e,"chainKeys")});e+=" "}k.addCommandToBinding(e+pf.Keys.canonicalizeKeyCombo(b),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(a){this.bindKey(a,null)}},{key:"cleanupUnusedKeyChains",value:function(){var a=this,d=Object.keys(this.keyBindings),k=d.filter(function(b){return"chainKeys"===
a.keyBindings[b]});k=pf.arr.sortBy(k,function(b){return b.length}).reverse();k.forEach(function(b){d.some(function(e){return b!==e&&e.startsWith(b)})||(delete a.keyBindings[b],pf.arr.remove(d,b),pf.arr.remove(k,b))})}},{key:"addCommand",value:function(a){return a&&a.bindKey?this.addCommandToBinding(a.bindKey,a):void 0}},{key:"addCommandToBinding",value:function(a,d){var k=this;"chainKeys"===this.keyBindings[a]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(b){b.startsWith(a)&&delete k.keyBindings[b]});
d?this.keyBindings[a]=d:delete this.keyBindings[a];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(a,d,k){return pf.invokeKeyHandlers(a,d,void 0===k?!1:k)}},{key:"simulateKeys",value:function(a,d,k){return pf.simulateKeys(a,d,k)}},{key:"withBindings",value:function(a,d){var k=new this(d);a.forEach(function(b){return k.bindKey(b.keys,b.command)});return k}},{key:"prettyCombo",value:function(a){var d=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[a]?d[a]:d[a]=a.replace(pf.regexps.meta,"mac"==pf.bowserOS()?"\u2318":"\u229e ").replace(pf.regexps.alt,"mac"==pf.bowserOS()?"\u2325":"Alt ").replace(pf.regexps.ctrl,"mac"==pf.bowserOS()?"\u2303":"Ctrl ").replace(pf.regexps.tab,"\u21e5").replace(pf.regexps.enter,"\u23ce").replace(pf.regexps.shift,"\u21e7").replace(pf.regexps.backspace,"\u232b").replace(pf.regexps.delete,"\u2326").replace(pf.regexps.left,"\u2192").replace(pf.regexps.right,
"\u2190").replace(pf.regexps.up,"\u2191").replace(pf.regexps.down,"\u2193").replace(pf.regexps.keySpacer,"$1").replace(pf.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(a,d,k){function b(q){if(p[q.id])return p[q.id];var u=l[q.id]||(l[q.id]=q.keyCommandMap);return p[q.id]=pf.arr.groupBy(Object.keys(u),function(w){return u[w].name})}var e=this;k=void 0===k?!0:k;var l={},p={};return((void 0===d?0:d)?a.commandsIncludingOwners:a.commands.map(function(q){return{command:q,
target:a}})).map(function(q){var u=q.target;q=q.command;var w=b(u)[q.name];return{keys:w,target:u,command:q,prettyKeys:w&&k?w.map(function(y){return e.prettyCombo(y)}):null}})}}],m,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:13079})}(void 0);VP=pf.KeyHandler;var WP=
za("a3",VP);pf.default=VP;var ds=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),U2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("Script")&&"function"===typeof m.Script?m.Script:m.Script=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=
this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(a,d,k){a.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(a){console.error("Error executing script "+this+": "+a+"\n"+a.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(a){this.stopped=
!1;this.tickTime=a;this.type="number"===typeof a?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),a):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(a){a=void 0===a?this.tickTime:a;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=
a))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),XP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
n=m.hasOwnProperty("TargetScript")&&"function"===typeof m.TargetScript?m.TargetScript:m.TargetScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=a;this.selector=d;this.args=k||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(a){return a.isScript&&this.target==a.target&&this.selector==a.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],m,{pathInPackage:function(){return"ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(ds.Script),V2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("FunctionScript")&&"function"===typeof m.FunctionScript?m.FunctionScript:m.FunctionScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Kb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=a}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(a){return a.isScript&&this.callback==a.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],
m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(ds.Script);ds.Script=U2;ds.Script=U2;ds.TargetScript=XP;ds.TargetScript=XP;ds.FunctionScript=V2;ds.FunctionScript=V2;var xp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Jha={},W2=xp.MutationObserver||
xp.WebKitMutationObserver;if(W2){var X2=0,Kha=new W2(TD),Y2=xp.document.createTextNode("");Kha.observe(Y2,{characterData:!0});var YP=function(){Y2.data=X2=++X2%2}}else if(xp.setImmediate||"undefined"===typeof xp.MessageChannel)YP="document"in xp&&"onreadystatechange"in xp.document.createElement("script")?function(){var f=xp.document.createElement("script");f.onreadystatechange=function(){TD();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};xp.document.documentElement.appendChild(f)}:
function(){setTimeout(TD,0)};else{var Z2=new xp.MessageChannel;Z2.port1.onmessage=TD;YP=function(){Z2.port2.postMessage(0)}}var bL,Zy=[],Lha=Jha=function(f){1!==Zy.push(f)||bL||YP()},ZP={},$2="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if($2){var a3=new Uint8Array(16);ZP=function(){$2(a3);return a3}}else{var b3=Array(16);ZP=function(){for(var f=
0,m;16>f;f++)0===(f&3)&&(m=4294967296*Math.random()),b3[f]=m>>>((f&3)<<3)&255;return b3}}for(var c3=ZP,Mha={},dl=[],$H=0;256>$H;++$H)dl[$H]=($H+256).toString(16).substr(1);var d3=Mha=function(f,m){m=m||0;return[dl[f[m++]],dl[f[m++]],dl[f[m++]],dl[f[m++]],"-",dl[f[m++]],dl[f[m++]],"-",dl[f[m++]],dl[f[m++]],"-",dl[f[m++]],dl[f[m++]],"-",dl[f[m++]],dl[f[m++]],dl[f[m++]],dl[f[m++]],dl[f[m++]],dl[f[m++]]].join("")},Nha={},e3,$P,aQ=0,bQ=0,Oha=Nha=function(f,m,n){n=m&&n||0;var a=m||[];f=f||{};var d=f.node||
e3,k=void 0!==f.clockseq?f.clockseq:$P;if(null==d||null==k){var b=c3();null==d&&(d=e3=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]);null==k&&(k=$P=(b[6]<<8|b[7])&16383)}b=void 0!==f.msecs?f.msecs:(new Date).getTime();var e=void 0!==f.nsecs?f.nsecs:bQ+1,l=b-aQ+(e-bQ)/1E4;0>l&&void 0===f.clockseq&&(k=k+1&16383);(0>l||b>aQ)&&void 0===f.nsecs&&(e=0);if(1E4<=e)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");aQ=b;bQ=e;$P=k;b+=122192928E5;f=(1E4*(b&268435455)+e)%4294967296;a[n++]=f>>>24&255;a[n++]=f>>>
16&255;a[n++]=f>>>8&255;a[n++]=f&255;f=b/4294967296*1E4&268435455;a[n++]=f>>>8&255;a[n++]=f&255;a[n++]=f>>>24&15|16;a[n++]=f>>>16&255;a[n++]=k>>>8|128;a[n++]=k&255;for(k=0;6>k;++k)a[n+k]=d[k];return m?m:d3(a)},f3={};f3=function(f,m,n){n=m&&n||0;"string"==typeof f&&(m="binary"===f?Array(16):null,f=null);f=f||{};f=f.random||(f.rng||c3)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(m)for(var a=0;16>a;++a)m[n+a]=f[a];return m||d3(f)};var Pha={},cQ=f3;cQ.v1=Oha;var Qha=Pha=cQ.v4=cQ,xg="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Rha={},Sha=Rha=function(f){function m(q,u){var w=q[0],y=q[1],A=q[2],C=q[3];w+=(y&A|~y&C)+u[0]-680876936|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[1]-389564586|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[2]+606105819|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[3]-1044525330|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[4]-176418897|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[5]+1200080426|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[6]-1473231341|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+
u[7]-45705983|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[8]+1770035416|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[9]-1958414417|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[10]-42063|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[11]-1990404162|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[12]+1804603682|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[13]-40341101|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[14]-1502002290|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[15]+1236535329|0;y=(y<<22|y>>>10)+A|0;w+=(y&C|A&~C)+u[1]-165796510|0;w=(w<<5|w>>>
27)+y|0;C+=(w&A|y&~A)+u[6]-1069501632|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[11]+643717713|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[0]-373897302|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[5]-701558691|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[10]+38016083|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[15]-660478335|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[4]-405537848|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[9]+568446438|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[14]-1019803690|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[3]-187363961|
0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[8]+1163531501|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[13]-1444681467|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[2]-51403784|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[7]+1735328473|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[12]-1926607734|0;y=(y<<20|y>>>12)+A|0;w+=(y^A^C)+u[5]-378558|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[8]-2022574463|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[11]+1839030562|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[14]-35309556|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[1]-1530992060|
0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[4]+1272893353|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[7]-155497632|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[10]-1094730640|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[13]+681279174|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[0]-358537222|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[3]-722521979|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[6]+76029189|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[9]-640364487|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[12]-421815835|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[15]+530742520|0;A=(A<<16|
A>>>16)+C|0;y+=(A^C^w)+u[2]-995338651|0;y=(y<<23|y>>>9)+A|0;w+=(A^(y|~C))+u[0]-198630844|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[7]+1126891415|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[14]-1416354905|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[5]-57434055|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[12]+1700485571|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[3]-1894986606|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[10]-1051523|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[1]-2054922799|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[8]+1873313359|
0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[15]-30611744|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[6]-1560198380|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[13]+1309151649|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[4]-145523070|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[11]-1120210379|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[2]+718787259|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[9]-343485551|0;q[0]=w+q[0]|0;q[1]=((y<<21|y>>>11)+A|0)+q[1]|0;q[2]=A+q[2]|0;q[3]=C+q[3]|0}function n(q){var u=[],w;for(w=0;64>w;w+=4)u[w>>2]=q.charCodeAt(w)+
(q.charCodeAt(w+1)<<8)+(q.charCodeAt(w+2)<<16)+(q.charCodeAt(w+3)<<24);return u}function a(q){var u=[],w;for(w=0;64>w;w+=4)u[w>>2]=q[w]+(q[w+1]<<8)+(q[w+2]<<16)+(q[w+3]<<24);return u}function d(q){var u=q.length,w=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)m(w,n(q.substring(y-64,y)));q=q.substring(y-64);var A=q.length;var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<A;y+=1)C[y>>2]|=q.charCodeAt(y)<<(y%4<<3);C[y>>2]|=128<<(y%4<<3);if(55<y)for(m(w,C),y=0;16>y;y+=1)C[y]=0;u=
(8*u).toString(16).match(/(.*?)(.{0,8})$/);q=parseInt(u[2],16);u=parseInt(u[1],16)||0;C[14]=q;C[15]=u;m(w,C);return w}function k(q){var u;for(u=0;u<q.length;u+=1){var w=u,y,A=q[u],C="";for(y=0;4>y;y+=1)C+=p[A>>8*y+4&15]+p[A>>8*y&15];q[w]=C}return q.join("")}function b(q){/[\u0080-\uFFFF]/.test(q)&&(q=unescape(encodeURIComponent(q)));return q}function e(q){var u=[],w=q.length,y;for(y=0;y<w-1;y+=2)u.push(parseInt(q.substr(y,2),16));return String.fromCharCode.apply(String,u)}function l(){this.reset()}
var p="0123456789abcdef".split("");k(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function q(u,w){u=u|0||0;return 0>u?Math.max(u+w,0):Math.min(u,w)}ArrayBuffer.prototype.slice=function(u,w){var y=(this||xg).byteLength;u=q(u,y);var A=y;w!==f&&(A=q(w,y));if(u>A)return new ArrayBuffer(0);A-=u;w=new ArrayBuffer(A);y=new Uint8Array(w);u=new Uint8Array(this||xg,u,A);y.set(u);return w}}();l.prototype.append=function(q){this.appendBinary(b(q));return this||xg};l.prototype.appendBinary=
function(q){(this||xg)._buff+=q;(this||xg)._length+=q.length;q=(this||xg)._buff.length;var u;for(u=64;u<=q;u+=64)m((this||xg)._hash,n((this||xg)._buff.substring(u-64,u)));(this||xg)._buff=(this||xg)._buff.substring(u-64);return this||xg};l.prototype.end=function(q){var u=(this||xg)._buff,w=u.length,y,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<w;y+=1)A[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(A,w);u=k((this||xg)._hash);q&&(u=e(u));this.reset();return u};l.prototype.reset=function(){(this||
xg)._buff="";(this||xg)._length=0;(this||xg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||xg};l.prototype.getState=function(){return{buff:(this||xg)._buff,length:(this||xg)._length,hash:(this||xg)._hash}};l.prototype.setState=function(q){(this||xg)._buff=q.buff;(this||xg)._length=q.length;(this||xg)._hash=q.hash;return this||xg};l.prototype.destroy=function(){delete (this||xg)._hash;delete (this||xg)._buff;delete (this||xg)._length};l.prototype._finish=function(q,u){q[u>>2]|=128<<
(u%4<<3);if(55<u)for(m((this||xg)._hash,q),u=0;16>u;u+=1)q[u]=0;var w=8*(this||xg)._length;w=w.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(w[2],16);w=parseInt(w[1],16)||0;q[14]=u;q[15]=w;m((this||xg)._hash,q)};l.hash=function(q,u){return l.hashBinary(b(q),u)};l.hashBinary=function(q,u){q=d(q);q=k(q);return u?e(q):q};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(q){var u=(this||xg)._buff.buffer,w=new Uint8Array(u.byteLength+q.byteLength);w.set(new Uint8Array(u));
w.set(new Uint8Array(q),u.byteLength);u=w.length;(this||xg)._length+=q.byteLength;for(q=64;q<=u;q+=64)m((this||xg)._hash,a(w.subarray(q-64,q)));(this||xg)._buff=q-64<u?new Uint8Array(w.buffer.slice(q-64)):new Uint8Array(0);return this||xg};l.ArrayBuffer.prototype.end=function(q){var u=(this||xg)._buff,w=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(A=0;A<w;A+=1)y[A>>2]|=u[A]<<(A%4<<3);this._finish(y,w);u=k((this||xg)._hash);q&&(u=e(u));this.reset();return u};l.ArrayBuffer.prototype.reset=function(){(this||
xg)._buff=new Uint8Array(0);(this||xg)._length=0;(this||xg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||xg};l.ArrayBuffer.prototype.getState=function(){var q=l.prototype.getState.call(this||xg);q.buff=String.fromCharCode.apply(null,new Uint8Array(q.buff));return q};l.ArrayBuffer.prototype.setState=function(q){var u=q.buff,w=u.length,y=new ArrayBuffer(w);y=new Uint8Array(y);var A;for(A=0;A<w;A+=1)y[A]=u.charCodeAt(A);q.buff=y;return l.prototype.setState.call(this||xg,q)};l.ArrayBuffer.prototype.destroy=
l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(q,u){var w=new Uint8Array(q),y=w.length;q=[1732584193,-271733879,-1732584194,271733878];var A;for(A=64;A<=y;A+=64)m(q,a(w.subarray(A-64,A)));w=A-64<y?w.subarray(A-64):new Uint8Array(0);var C=w.length;var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(A=0;A<C;A+=1)E[A>>2]|=w[A]<<(A%4<<3);E[A>>2]|=128<<(A%4<<3);if(55<A)for(m(q,E),A=0;16>A;A+=1)E[A]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);w=parseInt(y[2],
16);y=parseInt(y[1],16)||0;E[14]=w;E[15]=y;m(q,E);q=k(q);return u?e(q):q};return l}(),yx={stringify:function(f){var m=[];m.push({obj:f});f="";for(var n,a,d,k,b,e,l;n=m.pop();)if(a=n.obj,d=n.prefix||"",n=n.val||"",f+=d,n)f+=n;else if("object"!==typeof a)f+="undefined"===typeof a?null:JSON.stringify(a);else if(null===a)f+="null";else if(Array.isArray(a)){m.push({val:"]"});for(d=a.length-1;0<=d;d--)n=0===d?"":",",m.push({obj:a[d],prefix:n});m.push({val:"["})}else{n=[];for(k in a)a.hasOwnProperty(k)&&
n.push(k);m.push({val:"}"});for(d=n.length-1;0<=d;d--)b=n[d],e=a[b],l=0<d?",":"",l+=JSON.stringify(b)+":",m.push({obj:e,prefix:l});m.push({val:"{"})}return f},parse:function(f){for(var m=[],n=[],a=0,d,k,b,e;;)if(d=f[a++],"}"===d||"]"===d||"undefined"===typeof d){if(1===m.length)return m.pop();jw(m.pop(),m,n)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":a+=3;jw(null,m,n);break;case "t":a+=3;jw(!0,m,n);break;case "f":a+=4;jw(!1,m,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(a--;;)if(k=f[a++],/[\d\.\-e\+]/.test(k))d+=k;else{a--;break}jw(parseFloat(d),m,n);break;case '"':d="";k=void 0;for(b=0;;)if(e=f[a++],'"'!==e||"\\"===k&&1===b%2)d+=e,k=e,"\\"===k?b++:b=0;else break;jw(JSON.parse('"'+d+'"'),m,n);break;case "[":d={element:[],index:m.length};m.push(d.element);n.push(d);break;case "{":d={element:{},index:m.length};m.push(d.element);n.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},Tha={},dQ=Tha=function(f){return function(){var m=
arguments.length;if(m){for(var n=[],a=-1;++a<m;)n[a]=arguments[a];return f.call(this,n)}return f.call(this,[])}},Uha={},cj=Uha="function"===typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},zx="object"==typeof Reflect?Reflect:null,g3=zx&&"function"==typeof zx.apply?zx.apply:
function(f,m,n){return Function.prototype.apply.call(f,m,n)};var Vha=zx&&"function"==typeof zx.ownKeys?zx.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var h3=Number.isNaN||function(f){return f!=f};wi.EventEmitter=wi;wi.prototype._events=void 0;wi.prototype._eventsCount=0;wi.prototype._maxListeners=void 0;var i3=10;Object.defineProperty(wi,"defaultMaxListeners",{enumerable:!0,
get:function(){return i3},set:function(f){if("number"!=typeof f||0>f||h3(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");i3=f}});wi.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};wi.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||h3(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");return this._maxListeners=f,this};wi.prototype.getMaxListeners=function(){return void 0===this._maxListeners?wi.defaultMaxListeners:this._maxListeners};wi.prototype.emit=function(f){for(var m=[],n=1;n<arguments.length;n++)m.push(arguments[n]);n="error"===f;var a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var d;if(0<m.length&&(d=m[0]),d instanceof Error)throw d;m=Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m;}n=a[f];if(void 0===n)return!1;
if("function"==typeof n)g3(n,this,m);else for(d=n.length,a=QU(n,d),n=0;n<d;++n)g3(a[n],this,m);return!0};wi.prototype.addListener=function(f,m){return NU(this,f,m,!1)};wi.prototype.on=wi.prototype.addListener;wi.prototype.prependListener=function(f,m){return NU(this,f,m,!0)};wi.prototype.once=function(f,m){return UD(m),this.on(f,OU(this,f,m)),this};wi.prototype.prependOnceListener=function(f,m){return UD(m),this.prependListener(f,OU(this,f,m)),this};wi.prototype.removeListener=function(f,m){var n,
a,d;if((UD(m),void 0===(a=this._events))||void 0===(n=a[f]))return this;if(n===m||n.listener===m)0==--this._eventsCount?this._events=Object.create(null):(delete a[f],a.removeListener&&this.emit("removeListener",f,n.listener||m));else if("function"!=typeof n){var k=-1;for(d=n.length-1;0<=d;d--)if(n[d]===m||n[d].listener===m){var b=n[d].listener;k=d;break}if(0>k)return this;if(0===k)n.shift();else{for(;k+1<n.length;k++)n[k]=n[k+1];n.pop();!0}1===n.length&&(a[f]=n[0]);void 0!==a.removeListener&&this.emit("removeListener",
f,b||m)}return this};wi.prototype.off=wi.prototype.removeListener;wi.prototype.removeAllListeners=function(f){var m,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[f]),this;if(0===arguments.length){var a=Object.keys(n);for(n=0;n<a.length;++n)"removeListener"!==(m=a[n])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(m=n[f]))this.removeListener(f,m);else if(void 0!==m)for(n=m.length-1;0<=n;n--)this.removeListener(f,m[n]);return this};wi.prototype.listeners=function(f){return PU(this,f,!0)};wi.prototype.rawListeners=function(f){return PU(this,f,!1)};wi.listenerCount=function(f,m){return"function"==typeof f.listenerCount?f.listenerCount(m):RU.call(f,m)};wi.prototype.listenerCount=RU;wi.prototype.eventNames=function(){return 0<this._eventsCount?
Vha(this._events):[]};var Wo=wi,j3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Wha={},cE=oh,So=kw(Lha),fV=kw(Qha),YD=kw(Sha),zV=kw(yx),lw=kw(dQ),vo=kw(cj),Xl=Wo;mr.prototype.get=function(f){return this._store["$"+f]};mr.prototype.set=function(f,m){this._store["$"+f]=m;return!0};mr.prototype.has=function(f){return"$"+f in this._store};mr.prototype.delete=function(f){f="$"+f;var m=f in this._store;delete this._store[f];return m};mr.prototype.forEach=function(f){for(var m=
Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(mr.prototype,"size",{get:function(){return Object.keys(this._store).length}});$y.prototype.add=function(f){return this._store.set(f,!0)};$y.prototype.has=function(f){return this._store.has(f)};$y.prototype.forEach=function(f){this._store.forEach(function(m,n){f(n)})};Object.defineProperty($y.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map}()){var hz=Set;var tm=Map}else hz=$y,tm=mr;var SU=Function.prototype.toString,q8=SU.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var bz=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){bz=!1}vo(mw,Xl.EventEmitter);mw.prototype.addListener=function(f,m,n,a){function d(){if(k._listeners[m])if(b)b=
"waiting";else{b=!0;var e=az(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(e).on("change",function(l){l.seq>a.since&&!a.cancelled&&(a.since=l.seq,a.onChange(l))}).on("complete",function(){"waiting"===b&&So(d);b=!1}).on("error",function(){b=!1})}}if(!this._listeners[m]){var k=this,b=!1;this._listeners[m]=d;this.on(f,d)}};mw.prototype.removeListener=function(f,m){m in this._listeners&&(Xl.EventEmitter.prototype.removeListener.call(this,
f,this._listeners[m]),delete this._listeners[m])};mw.prototype.notifyLocalWindows=function(f){bz&&(localStorage[f]="a"===localStorage[f]?"b":"a")};mw.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var qw="function"===typeof Object.assign?Object.assign:function(f){for(var m=Object(f),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(m[d]=a[d])}return m};vo(Hi,Error);Hi.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new Hi(401,"unauthorized","Name or password is incorrect.");var Xha=new Hi(400,"bad_request","Missing JSON list of 'docs'"),Vn=new Hi(404,"not_found","missing"),pw=new Hi(409,"conflict","Document update conflict"),ZU=new Hi(400,"bad_request","_id field must contain a string"),w8=new Hi(412,"missing_id","_id is required for puts"),v8=new Hi(400,"bad_request","Only reserved document ids may start with underscore.");new Hi(412,"precondition_failed",
"Database not open");var XU=new Hi(500,"unknown_error","Database encountered an unknown error"),yV=new Hi(500,"badarg","Some query argument is invalid");new Hi(400,"invalid_request","Request was invalid");var Yha=new Hi(400,"query_parse_error","Some query parameter is invalid"),xV=new Hi(500,"doc_validation","Bad special document member"),VD=new Hi(400,"bad_request","Something wrong with the request"),eQ=new Hi(400,"bad_request","Document must be a JSON object");new Hi(404,"not_found","Database not found");
var qL=new Hi(500,"indexed_db_went_bad","unknown");new Hi(500,"web_sql_went_bad","unknown");new Hi(500,"levelDB_went_went_bad","unknown");new Hi(403,"forbidden","Forbidden by design doc validate_doc_update function");var vV=new Hi(400,"bad_request","Invalid rev format");new Hi(412,"file_exists","The database could not be created, the file already exists.");var m9=new Hi(412,"missing_stub","A pre-existing attachment stub wasn't found");new Hi(413,"invalid_url","Provided URL is invalid");var bV="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
y8=/(?:^|&)([^&=]*)=?([^&]*)/g,x8=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,E8=j3.setImmediate||j3.setTimeout,ZD=fV.v4;vo(cz,Xl.EventEmitter);cz.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};cz.prototype.validateChanges=function(f){var m=f.complete,n=this;Zg._changesFilterPlugin?Zg._changesFilterPlugin.validate(f,
function(a){if(a)return m(a);n.doChanges(f)}):n.doChanges(f)};cz.prototype.doChanges=function(f){var m=this,n=f.complete;f=bk(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=M8;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(k){m.isCancelled?n(null,{status:"cancelled"}):(f.since=k.update_seq,m.doChanges(f))},n);else{if(Zg._changesFilterPlugin){if(Zg._changesFilterPlugin.normalize(f),Zg._changesFilterPlugin.shouldFilter(this,
f))return Zg._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(k){k in f&&Ym("warn",'The "'+k+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=n;var a=this.db._changes(f);if(a&&"function"===typeof a.cancel){var d=m.cancel;m.cancel=lw(function(k){a.cancel();d.apply(this,
k)})}}};vo(aj,Xl.EventEmitter);aj.prototype.post=Kj("post",function(f,m,n){"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(ch(eQ));this.bulkDocs({docs:[f]},m,nL(n,f._id))});aj.prototype.put=Kj("put",function(f,m,n){function a(){var b=f._rev.split("-"),e=b[1];b=parseInt(b[0],10)+1;var l=eV();f._revisions={start:b,ids:[l,e]};f._rev=b+"-"+l;m.new_edits=!1}function d(b){"function"===typeof k._put&&!1!==m.new_edits?k._put(f,m,b):k.bulkDocs({docs:[f]},m,nL(b,f._id))}
"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(ch(eQ));YU(f._id);if(wt(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,n):this._putLocal(f,n);var k=this;m.force&&f._rev?(a(),d(function(b){n(b,b?null:{ok:!0,id:f._id,rev:f._rev})})):d(n)});aj.prototype.putAttachment=Kj("putAttachment",function(f,m,n,a,d){function k(e){var l="_rev"in e?parseInt(e._rev,10):0;e._attachments=e._attachments||{};e._attachments[m]={content_type:d,data:a,
revpos:++l};return b.put(e)}var b=this;"function"===typeof d&&(d=a,a=n,n=null);"undefined"===typeof d&&(d=a,a=n,n=null);d||Ym("warn","Attachment",m,"on document",f,"is missing content_type");return b.get(f).then(function(e){if(e._rev!==n)throw ch(pw);return k(e)},function(e){if(e.reason===Vn.message)return k({_id:f});throw e;})});aj.prototype.removeAttachment=Kj("removeAttachment",function(f,m,n,a){var d=this;d.get(f,function(k,b){if(k)a(k);else if(b._rev!==n)a(ch(pw));else{if(!b._attachments)return a();
delete b._attachments[m];0===Object.keys(b._attachments).length&&delete b._attachments;d.put(b,a)}})});aj.prototype.remove=Kj("remove",function(f,m,n,a){"string"===typeof m?(f={_id:f,_rev:m},"function"===typeof n&&(a=n,n={})):"function"===typeof m?(a=m,n={}):(a=n,n=m);n=n||{};n.was_delete=!0;m={_id:f._id,_rev:f._rev||n.rev,_deleted:!0};if(wt(m._id)&&"function"===typeof this._removeLocal)return this._removeLocal(f,a);this.bulkDocs({docs:[m]},n,nL(a,m._id))});aj.prototype.revsDiff=Kj("revsDiff",function(f,
m,n){function a(l,p){e.has(l)||e.set(l,{missing:[]});e.get(l).missing.push(p)}function d(l,p){var q=f[l].slice(0);vt(p,function(u,w,y,A,C){u=w+"-"+y;w=q.indexOf(u);-1!==w&&(q.splice(w,1),"available"!==C.status&&a(l,u))});q.forEach(function(u){a(l,u)})}"function"===typeof m&&(n=m,m={});var k=Object.keys(f);if(!k.length)return n(null,{});var b=0,e=new tm;k.map(function(l){this._getRevisionTree(l,function(p,q){if(p&&404===p.status&&"missing"===p.message)e.set(l,{missing:f[l]});else{if(p)return n(p);
d(l,q)}if(++b===k.length){var u={};e.forEach(function(w,y){u[y]=w});return n(null,u)}})},this)});aj.prototype.bulkGet=Kj("bulkGet",function(f,m){WU(this,f,m)});aj.prototype.compactDocument=Kj("compactDocument",function(f,m,n){var a=this;this._getRevisionTree(f,function(d,k){if(d)return n(d);var b=P8(k),e=[],l=[];Object.keys(b).forEach(function(p){b[p]>m&&e.push(p)});vt(k,function(p,q,u,w,y){p=q+"-"+u;"available"===y.status&&-1!==e.indexOf(p)&&l.push(p)});a._doCompaction(f,l,n)})});aj.prototype.compact=
Kj("compact",function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:m});1===this._compactionQueue.length&&lV(this)});aj.prototype._compact=function(f,m){var n=this,a=[];n.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(d){a.push(n.compactDocument(d.id,0))}).on("complete",function(d){var k=d.last_seq;Promise.all(a).then(function(){return XD(n,"_local/compaction",function(b){return!b.last_seq||
b.last_seq<k?(b.last_seq=k,b):!1})}).then(function(){m(null,{ok:!0})}).catch(m)}).on("error",m)};aj.prototype.get=Kj("get",function(f,m,n){function a(){var l=[],p=d.length;if(!p)return n(null,l);d.forEach(function(q){k.get(f,{rev:q,revs:m.revs,latest:m.latest,attachments:m.attachments,binary:m.binary},function(u,w){if(u)l.push({missing:q});else{u=0;for(var y=l.length;u<y;u++)if(l[u].ok&&l[u].ok._rev===w._rev){var A=!0;break}A||l.push({ok:w})}p--;p||n(null,l)})})}"function"===typeof m&&(n=m,m={});
if("string"!==typeof f)return n(ch(ZU));if(wt(f)&&"function"===typeof this._getLocal)return this._getLocal(f,n);var d=[],k=this;if(m.open_revs)if("all"===m.open_revs)this._getRevisionTree(f,function(l,p){if(l)return n(l);d=lL(p).map(function(q){return q.rev});a()});else if(Array.isArray(m.open_revs)){d=m.open_revs;for(var b=0;b<d.length;b++){var e=d[b];if("string"!==typeof e||!/^\d+-/.test(e))return n(ch(vV))}a()}else return n(ch(XU,"function_clause"));else return this._get(f,m,function(l,p){if(l)return l.docId=
f,n(l);var q=p.doc,u=p.metadata,w=p.ctx;m.conflicts&&(p=mL(u),p.length&&(q._conflicts=p));cq(u,q._rev)&&(q._deleted=!0);if(m.revs||m.revs_info){l=q._rev.split("-");p=parseInt(l[0],10);l=l[1];var y=gV(u.rev_tree);u=null;for(var A=0;A<y.length;A++){var C=y[A],E=C.ids.map(function(Y){return Y.id}).indexOf(l);if(E===p-1||!u&&-1!==E)u=C}if(!u)return l=Error("invalid rev tree"),l.docId=f,n(l);p=u.ids.map(function(Y){return Y.id}).indexOf(q._rev.split("-")[1])+1;u.ids.splice(p,u.ids.length-p);u.ids.reverse();
m.revs&&(q._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(Y){return Y.id})});if(m.revs_info){var L=u.pos+u.ids.length;q._revs_info=u.ids.map(function(Y){L--;return{rev:L+"-"+Y.id,status:Y.opts.status}})}}if(m.attachments&&q._attachments){var I=q._attachments,V=Object.keys(I).length;if(0===V)return n(null,q);Object.keys(I).forEach(function(Y){this._getAttachment(q._id,Y,I[Y],{rev:q._rev,binary:m.binary,ctx:w},function(na,Ba){na=q._attachments[Y];na.data=Ba;delete na.stub;delete na.length;
--V||n(null,q)})},k)}else{if(q._attachments)for(var T in q._attachments)q._attachments.hasOwnProperty(T)&&(q._attachments[T].stub=!0);n(null,q)}})});aj.prototype.getAttachment=Kj("getAttachment",function(f,m,n,a){var d=this;n instanceof Function&&(a=n,n={});this._get(f,n,function(k,b){if(k)return a(k);if(b.doc._attachments&&b.doc._attachments[m])n.ctx=b.ctx,n.binary=!0,d._getAttachment(f,m,b.doc._attachments[m],n,a);else return a(ch(Vn))})});aj.prototype.allDocs=Kj("allDocs",function(f,m){"function"===
typeof f&&(m=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return m(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(a){return a in f})[0];if(n){m(ch(Yha,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Ro(this)&&(Q8(f),0===f.keys.length))return this._allDocs({limit:0},m)}return this._allDocs(f,m)});aj.prototype.changes=
function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new cz(this,f,m)};aj.prototype.close=Kj("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});aj.prototype.info=Kj("info",function(f){var m=this;this._info(function(n,a){if(n)return f(n);a.db_name=a.db_name||m.name;a.auto_compaction=!(!m.auto_compaction||Ro(m));a.adapter=m.adapter;f(null,a)})});aj.prototype.id=Kj("id",function(f){return this._id(f)});aj.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};aj.prototype.bulkDocs=Kj("bulkDocs",function(f,m,n){"function"===typeof m&&(n=m,m={});m=m||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return n(ch(Xha));for(var a=0;a<f.docs.length;++a)if("object"!==typeof f.docs[a]||Array.isArray(f.docs[a]))return n(ch(eQ));var d;f.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(l){var p;(p=d)||(p="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);d=p;e._attachments[l].content_type||Ym("warn","Attachment",l,"on document",e._id,"is missing content_type")})});if(d)return n(ch(VD,d));"new_edits"in m||(m.new_edits="new_edits"in f?f.new_edits:!0);var k=this;m.new_edits||Ro(k)||f.docs.sort(O8);N8(f.docs);var b=f.docs.map(function(e){return e._id});return this._bulkDocs(f,m,function(e,l){if(e)return n(e);m.new_edits||(l=l.filter(function(q){return q.error}));if(!Ro(k)){e=0;for(var p=l.length;e<p;e++)l[e].id=l[e].id||b[e]}n(null,l)})});aj.prototype.registerDependentDatabase=
Kj("registerDependentDatabase",function(f,m){var n=new this.constructor(f,this.__opts);XD(this,"_local/_pouch_dependentDbs",function(a){a.dependentDbs=a.dependentDbs||{};if(a.dependentDbs[f])return!1;a.dependentDbs[f]=!0;return a}).then(function(){m(null,{db:n})}).catch(m)});aj.prototype.destroy=Kj("destroy",function(f,m){function n(){a._destroy(f,function(k,b){if(k)return m(k);a._destroyed=!0;a.emit("destroyed");m(null,b||{ok:!0})})}"function"===typeof f&&(m=f,f={});var a=this,d="use_prefix"in a?
a.use_prefix:!0;if(Ro(a))return n();a.get("_local/_pouch_dependentDbs",function(k,b){if(k)return 404!==k.status?m(k):n();var e=a.constructor;k=Object.keys(b.dependentDbs).map(function(l){l=d?l.replace(new RegExp("^"+e.prefix),""):l;return(new e(l,a.__opts)).destroy()});Promise.all(k).then(n,m)})});dz.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=this.queue.shift();)f()};dz.prototype.fail=function(f){this.failed=f;this.execute()};dz.prototype.ready=
function(f){this.isReady=!0;this.db=f;this.execute()};dz.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};vo(Zg,aj);var A9="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},HV=fetch,sw=Headers;Zg.adapters={};Zg.preferredAdapters=[];Zg.prefix="_pouch_";var k3=new Xl.EventEmitter;(function(f){Object.keys(Xl.EventEmitter.prototype).forEach(function(n){"function"===typeof Xl.EventEmitter.prototype[n]&&(f[n]=k3[n].bind(k3))});var m=
f._destructionListeners=new tm;f.on("ref",function(n){m.has(n.name)||m.set(n.name,[]);m.get(n.name).push(n)});f.on("unref",function(n){if(m.has(n.name)){var a=m.get(n.name),d=a.indexOf(n);0>d||(a.splice(d,1),1<a.length?m.set(n.name,a):m.delete(n.name))}});f.on("destroyed",function(n){if(m.has(n)){var a=m.get(n);m.delete(n);a.forEach(function(d){d.emit("destroyed",!0)})}})})(Zg);Zg.adapter=function(f,m,n){m.valid()&&(Zg.adapters[f]=m,n&&Zg.preferredAdapters.push(f))};Zg.plugin=function(f){if("function"===
typeof f)f(Zg);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(m){Zg.prototype[m]=f[m]})}this.__defaults&&(Zg.__defaults=qw({},this.__defaults));return Zg};Zg.defaults=function(f){function m(n,a){if(!(this instanceof m))return new m(n,a);a=a||{};n&&"object"===typeof n&&(a=n,n=a.name,delete a.name);a=qw({},m.__defaults,a);Zg.call(this,n,a)}vo(m,Zg);m.preferredAdapters=Zg.preferredAdapters.slice();
Object.keys(Zg).forEach(function(n){n in m||(m[n]=Zg[n])});m.__defaults=qw({},this.__defaults,f);return m};Zg.fetch=function(f,m){return HV(f,m)};var oV=["$or","$nor","$not"],rV={$elemMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.some(function(d){return ow(d,m,Object.keys(m))}):a.some(function(d){return pL(m,f,n,d)}):!1},$allMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.every(function(d){return ow(d,m,Object.keys(m))}):
a.every(function(d){return pL(m,f,n,d)}):!1},$eq:function(f,m,n,a){return yt(a)&&0===yk(a,m)},$gte:function(f,m,n,a){return yt(a)&&0<=yk(a,m)},$gt:function(f,m,n,a){return yt(a)&&0<yk(a,m)},$lte:function(f,m,n,a){return yt(a)&&0>=yk(a,m)},$lt:function(f,m,n,a){return yt(a)&&0>yk(a,m)},$exists:function(f,m,n,a){return m?yt(a):!yt(a)},$mod:function(f,m,n,a){if(f=fz(a)){f=m[0];m=m[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");
if(parseInt(m,10)!==m)throw Error("Modulus is not an integer");f=parseInt(a,10)!==a?!1:a%f===m}return f},$ne:function(f,m,n,a){return m.every(function(d){return 0!==yk(a,d)})},$in:function(f,m,n,a){return fz(a)&&sV(a,m)},$nin:function(f,m,n,a){return fz(a)&&!sV(a,m)},$size:function(f,m,n,a){return fz(a)&&a.length===m},$all:function(f,m,n,a){return Array.isArray(a)&&Z8(a,m)},$regex:function(f,m,n,a){if(f=fz(a))f=(new RegExp(m)).test(a);return f},$type:function(f,m,n,a){return $8(a,m)}};Zg.plugin(function(f){f._changesFilterPlugin=
{validate:a9,normalize:b9,shouldFilter:c9,filter:d9}});Zg.version="7.2.1";var e9=tV("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),f9=tV("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),gz=new mw,tL=!1,uL=[],rw=new tm,wL,vL=new tm;FV.valid=
function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var zL={};yL.valid=function(){return!0};vo(Bt,Error);vo(dE,Error);vo(eE,Error);var D9=Ym.bind(null,"log"),E9=Array.isArray,F9=JSON.parse;iz.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};iz.prototype.finish=function(){return this.promise};var l3={},m3=new iz,Zha=function(f,m){return CL(m)},$ha=function(f,m){return m.length},aia=function(f,m){f=CL(m);for(var n=
Math.min.apply(null,m),a=Math.max.apply(null,m),d=m.length,k=0,b=0,e=m.length;b<e;b++){var l=m[b];k+=l*l}return{sum:f,min:n,max:a,count:d,sumsqr:k}},n3=function(f,m,n,a){function d(aa,oa,Va,lb,qa){try{return{output:oa(Va,lb,qa)}}catch(ja){return OV(aa,ja),{error:ja}}}function k(aa,oa){var Va=yk(aa.key,oa.key);return 0!==Va?Va:yk(aa.value,oa.value)}function b(aa,oa,Va){Va=Va||0;return"number"===typeof oa?aa.slice(Va,oa+Va):0<Va?aa.slice(Va):aa}function e(aa){var oa=aa.value;return oa&&"object"===typeof oa&&
oa._id||aa.id}function l(aa){aa.rows.forEach(function(oa){var Va=oa.doc&&oa.doc._attachments;Va&&Object.keys(Va).forEach(function(lb){var qa=Va[lb];Va[lb].data=iL(qa.data,qa.content_type)})})}function p(aa){return function(oa){aa.include_docs&&aa.attachments&&aa.binary&&l(oa);return oa}}function q(aa,oa,Va,lb){oa=oa[aa];"undefined"!==typeof oa&&(lb&&(oa=encodeURIComponent(JSON.stringify(oa))),Va.push(aa+"="+oa))}function u(aa){if("undefined"!==typeof aa){var oa=Number(aa);return isNaN(oa)||oa!==parseInt(aa,
10)?aa:oa}}function w(aa){aa.group_level=u(aa.group_level);aa.limit=u(aa.limit);aa.skip=u(aa.skip);return aa}function y(aa,oa){var Va=aa.descending?"endkey":"startkey",lb=aa.descending?"startkey":"endkey";if("undefined"!==typeof aa[Va]&&"undefined"!==typeof aa[lb]&&0<yk(aa[Va],aa[lb]))throw new Bt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(oa.reduce&&!1!==aa.reduce){if(aa.include_docs)throw new Bt("{include_docs:true} is invalid for reduce");
if(aa.keys&&1<aa.keys.length&&!aa.group&&!aa.group_level)throw new Bt("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(qa){a:{if(qa=aa[qa]){if("number"!==typeof qa){qa=new Bt('Invalid value for integer: "'+qa+'"');break a}if(0>qa){qa=new Bt('Invalid value for positive integer: "'+qa+'"');break a}}qa=void 0}if(qa)throw qa;})}function A(aa,oa,Va){var lb=[],qa,ja="GET",ta,Ha;q("reduce",Va,lb);q("include_docs",Va,lb);q("attachments",Va,lb);
q("limit",Va,lb);q("descending",Va,lb);q("group",Va,lb);q("group_level",Va,lb);q("skip",Va,lb);q("stale",Va,lb);q("conflicts",Va,lb);q("startkey",Va,lb,!0);q("start_key",Va,lb,!0);q("endkey",Va,lb,!0);q("end_key",Va,lb,!0);q("inclusive_end",Va,lb);q("key",Va,lb,!0);q("update_seq",Va,lb);lb=lb.join("&");lb=""===lb?"":"?"+lb;if("undefined"!==typeof Va.keys){var zb="keys="+encodeURIComponent(JSON.stringify(Va.keys));2E3>=zb.length+lb.length+1?lb+=("?"===lb[0]?"&":"?")+zb:(ja="POST","string"===typeof oa?
qa={keys:Va.keys}:oa.keys=Va.keys)}if("string"===typeof oa)return zb=DL(oa),aa.fetch("_design/"+zb[0]+"/_view/"+zb[1]+lb,{headers:new sw({"Content-Type":"application/json"}),method:ja,body:JSON.stringify(qa)}).then(function(Ub){ta=Ub.ok;Ha=Ub.status;return Ub.json()}).then(function(Ub){if(!ta)throw Ub.status=Ha,nw(Ub);Ub.rows.forEach(function(Nb){if(Nb.value&&Nb.value.error&&"builtin_reduce_error"===Nb.value.error)throw Error(Nb.reason);});return Ub}).then(p(Va));qa=qa||{};Object.keys(oa).forEach(function(Ub){Array.isArray(oa[Ub])?
qa[Ub]=oa[Ub]:qa[Ub]=oa[Ub].toString()});return aa.fetch("_temp_view"+lb,{headers:new sw({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(qa)}).then(function(Ub){ta=Ub.ok;Ha=Ub.status;return Ub.json()}).then(function(Ub){if(!ta)throw Ub.status=Ha,nw(Ub);return Ub}).then(p(Va))}function C(aa,oa,Va){return new Promise(function(lb,qa){aa._query(oa,Va,function(ja,ta){if(ja)return qa(ja);lb(ta)})})}function E(aa){return new Promise(function(oa,Va){aa._viewCleanup(function(lb,qa){if(lb)return Va(lb);
oa(qa)})})}function L(aa){return function(oa){if(404===oa.status)return aa;throw oa;}}function I(aa,oa,Va){function lb(Ha,zb){for(var Ub=[],Nb=new hz,Sb=0,pc=zb.rows.length;Sb<pc;Sb++){var Eb=zb.rows[Sb].doc;if(Eb&&(Ub.push(Eb),Nb.add(Eb._id),Eb._deleted=!ta.has(Eb._id),!Eb._deleted)){var Lc=ta.get(Eb._id);"value"in Lc&&(Eb.value=Lc.value)}}zb=BL(ta);zb.forEach(function(dd){if(!Nb.has(dd)){var ia={_id:dd};dd=ta.get(dd);"value"in dd&&(ia.value=dd.value);Ub.push(ia)}});Ha.keys=JV(zb.concat(Ha.keys));
Ub.push(Ha);return Ub}var qa="_local/doc_"+aa,ja={_id:qa,keys:[]};aa=Va.get(aa);var ta=aa[0];qa=H9(aa[1])?Promise.resolve(ja):oa.db.get(qa).catch(L(ja));return qa.then(function(Ha){return(Ha.keys.length?oa.db.allDocs({keys:Ha.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(zb){return lb(Ha,zb)})})}function V(aa,oa,Va){return aa.db.get("_local/lastSeq").catch(L({_id:"_local/lastSeq",seq:0})).then(function(lb){var qa=BL(oa);return Promise.all(qa.map(function(ja){return I(ja,aa,oa)})).then(function(ja){ja=
WD(ja);lb.seq=Va;ja.push(lb);return aa.db.bulkDocs({docs:ja})})})}function T(aa){aa="string"===typeof aa?aa:aa.name;var oa=l3[aa];oa||(oa=l3[aa]=new iz);return oa}function Y(aa){return AL(T(aa),function(){return na(aa)})()}function na(aa){function oa(Ub,Nb){return function(){return V(aa,Ub,Nb)}}function Va(){return aa.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ha,limit:50}).then(lb)}function lb(Ub){Ub=Ub.results;if(Ub.length){for(var Nb=new tm,Sb=0,pc=Ub.length;Sb<
pc;Sb++){var Eb=Ub[Sb];if("_"!==Eb.doc._id[0]){qa=[];ja=Eb.doc;if(!ja._deleted){var Lc=aa.sourceDB;try{ta(ja)}catch(Tc){OV(Lc,Tc)}}qa.sort(k);Lc=void 0;for(var dd=qa,ia=new tm,Ca=0,Ea=dd.length;Ca<Ea;Ca++){var jb=dd[Ca],Mb=[jb.key,jb.id];0<Ca&&0===yk(jb.key,Lc)&&Mb.push(Ca);ia.set(Un(Mb),jb);Lc=jb.key}Nb.set(Eb.doc._id,[ia,Eb.changes])}Ha=Eb.seq}zb.add(oa(Nb,Ha));if(!(50>Ub.length))return Va()}}var qa,ja,ta=m(aa.mapFun,function(Ub,Nb){Ub={id:ja._id,key:xt(Ub)};"undefined"!==typeof Nb&&null!==Nb&&
(Ub.value=xt(Nb));qa.push(Ub)}),Ha=aa.seq||0,zb=new iz;return Va().then(function(){return zb.finish()}).then(function(){aa.seq=Ha})}function Ba(aa,oa,Va){0===Va.group_level&&delete Va.group_level;var lb=Va.group||Va.group_level,qa=n(aa.reduceFun),ja=[],ta=isNaN(Va.group_level)?Number.POSITIVE_INFINITY:Va.group_level;oa.forEach(function(Sb){var pc=ja[ja.length-1],Eb=lb?Sb.key:null;lb&&Array.isArray(Eb)&&(Eb=Eb.slice(0,ta));pc&&0===yk(pc.groupKey,Eb)?(pc.keys.push([Sb.key,Sb.id]),pc.values.push(Sb.value)):
ja.push({keys:[[Sb.key,Sb.id]],values:[Sb.value],groupKey:Eb})});oa=[];for(var Ha=0,zb=ja.length;Ha<zb;Ha++){var Ub=ja[Ha],Nb=d(aa.sourceDB,qa,Ub.keys,Ub.values,!1);if(Nb.error&&Nb.error instanceof eE)throw Nb.error;oa.push({value:Nb.error?null:Nb.output,key:Ub.groupKey})}return{rows:b(oa,Va.limit,Va.skip)}}function F(aa,oa){return AL(T(aa),function(){return W(aa,oa)})()}function W(aa,oa){function Va(Nb){Nb.include_docs=!0;return aa.db.allDocs(Nb).then(function(Sb){qa=Sb.total_rows;return Sb.rows.map(function(pc){if("value"in
pc.doc&&"object"===typeof pc.doc.value&&null!==pc.doc.value){var Eb=Object.keys(pc.doc.value).sort(),Lc=["id","key","value"];if(!(Eb<Lc||Eb>Lc))return pc.doc.value}a:{Eb=pc.doc._id;Lc=[];for(var dd=[],ia=0;;){var Ca=Eb[ia++];if("\x00"===Ca)if(1===Lc.length){Eb=Lc.pop();break a}else{var Ea=Lc;var jb=dd;Ca=Ea.pop();if(jb.length){var Mb=jb[jb.length-1];Ca===Mb.element&&(jb.pop(),Mb=jb[jb.length-1]);jb=Mb.element;Mb=Mb.index;Array.isArray(jb)?jb.push(Ca):Mb===Ea.length-2?(Ea=Ea.pop(),jb[Ea]=Ca):Ea.push(Ca)}continue}switch(Ca){case "1":Lc.push(null);
break;case "2":Lc.push("1"===Eb[ia]);ia++;break;case "3":Mb=Eb;Ea=Ca=ia;if("1"===Mb[Ca])Mb=0,Ca++;else{jb="0"===Mb[Ca];Ca++;var Tc="",Rc=Mb.substring(Ca,Ca+3);Rc=parseInt(Rc,10)+-324;jb&&(Rc=-Rc);for(Ca+=3;;){var qc=Mb[Ca];if("\x00"===qc)break;else Tc+=qc;Ca++}Tc=Tc.split(".");Mb=1===Tc.length?parseInt(Tc,10):parseFloat(Tc[0]+"."+Tc[1]);jb&&(Mb-=10);0!==Rc&&(Mb=parseFloat(Mb+"e"+Rc))}jb=Mb;Ca-=Ea;Lc.push(jb);ia+=Ca;break;case "4":for(Ca="";;){Ea=Eb[ia];if("\x00"===Ea)break;Ca+=Ea;ia++}Ca=Ca.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");Lc.push(Ca);break;case "5":Ca={element:[],index:Lc.length};Lc.push(Ca.element);dd.push(Ca);break;case "6":Ca={element:{},index:Lc.length};Lc.push(Ca.element);dd.push(Ca);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+Ca);}}}return{key:Eb[0],id:Eb[1],value:"value"in pc.doc?pc.doc.value:null}})})}function lb(Nb){var Sb=ja?Ba(aa,Nb,oa):{total_rows:qa,offset:ta,rows:Nb};oa.update_seq&&(Sb.update_seq=
aa.seq);if(oa.include_docs){var pc=JV(Nb.map(e));return aa.sourceDB.allDocs({keys:pc,include_docs:!0,conflicts:oa.conflicts,attachments:oa.attachments,binary:oa.binary}).then(function(Eb){var Lc=new tm;Eb.rows.forEach(function(dd){Lc.set(dd.id,dd.doc)});Nb.forEach(function(dd){var ia=e(dd);if(ia=Lc.get(ia))dd.doc=ia});return Sb})}return Sb}var qa,ja=aa.reduceFun&&!1!==oa.reduce,ta=oa.skip||0;"undefined"===typeof oa.keys||oa.keys.length||(oa.limit=0,delete oa.keys);if("undefined"!==typeof oa.keys){var Ha=
oa.keys.map(function(Nb){Nb={startkey:Un([Nb]),endkey:Un([Nb,{}])};oa.update_seq&&(Nb.update_seq=!0);return Va(Nb)});return Promise.all(Ha).then(WD).then(lb)}Ha={descending:oa.descending};oa.update_seq&&(Ha.update_seq=!0);if("start_key"in oa)var zb=oa.start_key;"startkey"in oa&&(zb=oa.startkey);if("end_key"in oa)var Ub=oa.end_key;"endkey"in oa&&(Ub=oa.endkey);"undefined"!==typeof zb&&(Ha.startkey=oa.descending?Un([zb,{}]):Un([zb]));"undefined"!==typeof Ub&&(zb=!1!==oa.inclusive_end,oa.descending&&
(zb=!zb),Ha.endkey=Un(zb?[Ub,{}]:[Ub]));"undefined"!==typeof oa.key&&(Ub=Un([oa.key]),zb=Un([oa.key,{}]),Ha.descending?(Ha.endkey=Ub,Ha.startkey=zb):(Ha.startkey=Ub,Ha.endkey=zb));ja||("number"===typeof oa.limit&&(Ha.limit=oa.limit),Ha.skip=ta);return Va(Ha).then(lb)}function P(aa){return aa.fetch("_view_cleanup",{headers:new sw({"Content-Type":"application/json"}),method:"POST"}).then(function(oa){return oa.json()})}function S(aa){return aa.get("_local/"+f).then(function(oa){var Va=new tm;Object.keys(oa.views).forEach(function(qa){var ja=
DL(qa);qa="_design/"+ja[0];ja=ja[1];var ta=Va.get(qa);ta||(ta=new hz,Va.set(qa,ta));ta.add(ja)});var lb={keys:BL(Va),include_docs:!0};return aa.allDocs(lb).then(function(qa){var ja={};qa.rows.forEach(function(ta){var Ha=ta.key.substring(8);Va.get(ta.key).forEach(function(zb){var Ub=Ha+"/"+zb;oa.views[Ub]||(Ub=zb);Ub=Object.keys(oa.views[Ub]);var Nb=ta.doc&&ta.doc.views&&ta.doc.views[zb];Ub.forEach(function(Sb){ja[Sb]=ja[Sb]||Nb})})});qa=Object.keys(ja).filter(function(ta){return!ja[ta]}).map(function(ta){return AL(T(ta),
function(){return(new aa.constructor(ta,aa.__opts)).destroy()})()});return Promise.all(qa).then(function(){return{ok:!0}})})},L({ok:!0}))}function fa(aa,oa,Va){if("function"===typeof aa._query)return C(aa,oa,Va);if(Ro(aa))return A(aa,oa,Va);if("string"!==typeof oa)return y(Va,oa),m3.add(function(){return NV(aa,"temp_view/temp_view",oa.map,oa.reduce,!0,f).then(function(ja){return C9(Y(ja).then(function(){return F(ja,Va)}),function(){return ja.db.destroy()})})}),m3.finish();var lb=DL(oa),qa=lb[1];return aa.get("_design/"+
lb[0]).then(function(ja){var ta=ja.views&&ja.views[qa];if(!ta)throw new dE("ddoc "+ja._id+" has no view named "+qa);a(ja,qa);y(Va,ta);return NV(aa,oa,ta.map,ta.reduce,!1,f).then(function(Ha){return"ok"===Va.stale||"update_after"===Va.stale?("update_after"===Va.stale&&So(function(){Y(Ha)}),F(Ha,Va)):Y(Ha).then(function(){return F(Ha,Va)})})})}return{query:function(aa,oa,Va){var lb=this;"function"===typeof oa&&(Va=oa,oa={});oa=oa?w(oa):{};"function"===typeof aa&&(aa={map:aa});var qa=Promise.resolve().then(function(){return fa(lb,
aa,oa)});IV(qa,Va);return qa},viewCleanup:B9(function(){return"function"===typeof this._viewCleanup?E(this):Ro(this)?P(this):S(this)})}}("mrviews",function(f,m){return"function"===typeof f&&2===f.length?function(n){return f(n,m)}:LV(f.toString(),m)},function(f){f=f.toString();if(/^_sum/.test(f))var m=Zha;else if(/^_count/.test(f))m=$ha;else if(/^_stats/.test(f))m=aia;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");m=void 0}return m?m:LV(f)},function(f,m){var n=f.views&&
f.views[m];if("string"!==typeof n.map)throw new dE("ddoc "+f._id+" has no string view named "+m+", instead found object of type: "+typeof n.map);});jz.prototype.writeCheckpoint=function(f,m){var n=this;return this.updateTarget(f,m).then(function(){return n.updateSource(f,m)})};jz.prototype.updateTarget=function(f,m){return this.opts.writeTargetCheckpoint?EL(this.target,this.id,f,m,this.returnValue):Promise.resolve(!0)};jz.prototype.updateSource=function(f,m){if(this.opts.writeSourceCheckpoint){var n=
this;return EL(this.src,this.id,f,m,this.returnValue).catch(function(a){if(RV(a))return n.opts.writeSourceCheckpoint=!1,!0;throw a;})}return Promise.resolve(!0)};var o3={undefined:function(f,m){return 0===yk(f.last_seq,m.last_seq)?m.last_seq:0},1:function(f,m){f=m.session_id===f.session_id?{last_seq:m.last_seq,history:m.history}:QV(m.history,f.history);return f.last_seq}};jz.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(m){return m.last_seq||
0}).catch(function(m){if(404!==m.status)throw m;return 0}):f.target.get(f.id).then(function(m){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?m.last_seq||0:f.src.get(f.id).then(function(n){if(m.version!==n.version)return 0;var a=m.version?m.version.toString():"undefined";return a in o3?o3[a](m,n):0},function(n){if(404===n.status&&m.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},function(a){return RV(a)?(f.opts.writeSourceCheckpoint=!1,m.last_seq):
0});throw n;})}).catch(function(m){if(404!==m.status)throw m;return 0})};vo(fE,Xl.EventEmitter);fE.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};fE.prototype.ready=function(f,m){function n(){a.cancel()}var a=this;a._readyCalled||(a._readyCalled=!0,f.once("destroyed",n),m.once("destroyed",n),a.once("complete",function(){f.removeListener("destroyed",n);m.removeListener("destroyed",n)}))};vo(HL,Xl.EventEmitter);HL.prototype.cancel=function(){this.canceled||
(this.canceled=!0,this.push.cancel(),this.pull.cancel())};Zg.plugin(function(f){f.adapter("idb",FV,!0)}).plugin(function(f){f.adapter("http",yL,!1);f.adapter("https",yL,!1)}).plugin({query:function(f,m,n){return n3.query.call(this,f,m,n)},viewCleanup:function(f){return n3.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=GL;f.sync=O9;Object.defineProperty(f.prototype,"replicate",{get:function(){var m=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(n,
a,d){return m.constructor.replicate(n,m,a,d)},to:function(n,a,d){return m.constructor.replicate(m,n,a,d)}});return this.replicateMethods}});f.prototype.sync=function(m,n,a){return this.constructor.sync(this,m,n,a)}});var bia=Wha=Zg,es={};Object.defineProperty(es,"__esModule",{value:!0});nr.prototype.get=function(f){return this._store["$"+f]};nr.prototype.set=function(f,m){this._store["$"+f]=m;return!0};nr.prototype.has=function(f){return"$"+f in this._store};nr.prototype.delete=function(f){f="$"+
f;var m=f in this._store;delete this._store[f];return m};nr.prototype.forEach=function(f){for(var m=Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(nr.prototype,"size",{get:function(){return Object.keys(this._store).length}});kz.prototype.add=function(f){return this._store.set(f,!0)};kz.prototype.has=function(f){return this._store.has(f)};kz.prototype.forEach=function(f){this._store.forEach(function(m,n){f(n)})};Object.defineProperty(kz.prototype,
"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(es.Set=Set,es.Map=Map):(es.Set=kz,es.Map=nr);var fQ={},gQ=oh;fQ.test=function(){return"undefined"!==typeof gQ&&!gQ.browser};fQ.install=function(f){return function(){gQ.nextTick(f)}};var p3="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,hQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,iQ={},q3=hQ.MutationObserver||hQ.WebKitMutationObserver;iQ.test=function(){return q3};iQ.install=function(f){var m=0;f=new q3(f);var n=hQ.document.createTextNode("");f.observe(n,{characterData:!0});return function(){n.data=m=++m%2}};var jQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,cia={},hB=[fQ,{test:function(){return"function"===typeof p3.queueMicrotask},install:function(f){return function(){p3.queueMicrotask(f)}}},iQ,{test:function(){return jQ.setImmediate?!1:"undefined"!==typeof jQ.MessageChannel},install:function(f){var m=new jQ.MessageChannel;m.port1.onmessage=f;return function(){m.port2.postMessage(0)}}},{test:function(){return"document"in aI&&"onreadystatechange"in aI.document.createElement("script")},install:function(f){return function(){var m=aI.document.createElement("script");
m.onreadystatechange=function(){f();m.onreadystatechange=null;m.parentNode.removeChild(m);m=null};aI.document.documentElement.appendChild(m);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],tw,Ct,lz=-1,or=[],IL=!1,iB=-1,dia=hB.length;for(;++iB<dia;)if(hB[iB]&&hB[iB].test&&hB[iB].test()){var eia=hB[iB].install(TV);break}UV.prototype.run=function(){var f=this.fun,m=this.array;switch(m.length){case 0:return f();case 1:return f(m[0]);case 2:return f(m[0],
m[1]);case 3:return f(m[0],m[1],m[2]);default:return f.apply(null,m)}};var Rh=cia=function(f){var m=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];or.push(new UV(f,m));IL||tw||(IL=!0,eia())},Af={};Object.defineProperty(Af,"__esModule",{value:!0});(cj&&"object"===typeof cj&&"default"in cj?cj["default"]:cj)(Ii,Error);Ii.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};
var fia=new Ii(401,"unauthorized","Name or password is incorrect."),gia=new Ii(400,"bad_request","Missing JSON list of 'docs'"),hia=new Ii(404,"not_found","missing"),iia=new Ii(409,"conflict","Document update conflict"),jia=new Ii(400,"bad_request","_id field must contain a string"),kia=new Ii(412,"missing_id","_id is required for puts"),lia=new Ii(400,"bad_request","Only reserved document ids may start with underscore."),mia=new Ii(412,"precondition_failed","Database not open"),r3=new Ii(500,"unknown_error",
"Database encountered an unknown error"),nia=new Ii(500,"badarg","Some query argument is invalid"),oia=new Ii(400,"invalid_request","Request was invalid"),pia=new Ii(400,"query_parse_error","Some query parameter is invalid"),qia=new Ii(500,"doc_validation","Bad special document member"),ria=new Ii(400,"bad_request","Something wrong with the request"),sia=new Ii(400,"bad_request","Document must be a JSON object"),tia=new Ii(404,"not_found","Database not found"),uia=new Ii(500,"indexed_db_went_bad",
"unknown"),via=new Ii(500,"web_sql_went_bad","unknown"),wia=new Ii(500,"levelDB_went_went_bad","unknown"),xia=new Ii(403,"forbidden","Forbidden by design doc validate_doc_update function"),yia=new Ii(400,"bad_request","Invalid rev format"),zia=new Ii(412,"file_exists","The database could not be created, the file already exists."),Aia=new Ii(412,"missing_stub","A pre-existing attachment stub wasn't found"),Bia=new Ii(413,"invalid_url","Provided URL is invalid");Af.UNAUTHORIZED=fia;Af.MISSING_BULK_DOCS=
gia;Af.MISSING_DOC=hia;Af.REV_CONFLICT=iia;Af.INVALID_ID=jia;Af.MISSING_ID=kia;Af.RESERVED_ID=lia;Af.NOT_OPEN=mia;Af.UNKNOWN_ERROR=r3;Af.BAD_ARG=nia;Af.INVALID_REQUEST=oia;Af.QUERY_PARSE_ERROR=pia;Af.DOC_VALIDATION=qia;Af.BAD_REQUEST=ria;Af.NOT_AN_OBJECT=sia;Af.DB_MISSING=tia;Af.WSQ_ERROR=via;Af.LDB_ERROR=wia;Af.FORBIDDEN=xia;Af.INVALID_REV=yia;Af.FILE_EXISTS=zia;Af.MISSING_STUB=Aia;Af.IDB_ERROR=uia;Af.INVALID_URL=Bia;Af.createError=function(f,m){function n(a){for(var d=Object.getOwnPropertyNames(f),
k=0,b=d.length;k<b;k++)"function"!==typeof f[d[k]]&&(this[d[k]]=f[d[k]]);void 0!==a&&(this.reason=a)}n.prototype=Ii.prototype;return new n(m)};Af.generateErrorFromResponse=function(f){if("object"!==typeof f){var m=f;f=r3;f.data=m}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};var Cia="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,kQ=Object.prototype.toString,
bI=function(f){return!(Cia&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===kQ.call(f)},s3=function(f){return!!bI(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==kQ.call(f)&&"[object Function]"===kQ.call(f.callee)},Dia=function(){return bI(arguments)}();bI.isLegacyArguments=s3;var Eia=Dia?bI:s3,Fia=Object.prototype.toString,Gia=Function.prototype.toString,Hia=/^\s*(?:function)?\*/,t3="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
u3=Object.getPrototypeOf;a:if(t3){try{var cI=Function("return function*() {}")();break a}catch(f){}cI=void 0}else cI=!1;var Iia=cI?u3(cI):{},Ng="function"==typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},v3=function(f){return f&&"object"==typeof f&&"function"==typeof f.copy&&
"function"==typeof f.fill&&"function"==typeof f.readUInt8},th={},Q9=v3,nW="undefined"!=typeof BigInt,KL="undefined"!=typeof Symbol,um=KL&&void 0!==Symbol.toStringTag,Yl="undefined"!=typeof Uint8Array,Jia="undefined"!=typeof ArrayBuffer;if(Yl&&um)var Kia=Object.getPrototypeOf(Uint8Array.prototype),Zm=Dt(Object.getOwnPropertyDescriptor(Kia,Symbol.toStringTag).get);var lj=Dt(Object.prototype.toString),R9=Dt(Number.prototype.valueOf),S9=Dt(String.prototype.valueOf),T9=Dt(Boolean.prototype.valueOf);if(nW)var U9=
Dt(BigInt.prototype.valueOf);if(KL)var V9=Dt(Symbol.prototype.valueOf);th.isArgumentsObject=Eia;th.isGeneratorFunction=function(f){return"function"==typeof f&&(!!Hia.test(Gia.call(f))||(t3?u3(f)===Iia:"[object GeneratorFunction]"===Fia.call(f)))};th.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&"function"==typeof f.catch};th.isArrayBufferView=function(f){return Jia&&ArrayBuffer.isView?ArrayBuffer.isView(f):VV(f)||
hW(f)};th.isTypedArray=VV;th.isUint8Array=WV;th.isUint8ClampedArray=XV;th.isUint16Array=YV;th.isUint32Array=ZV;th.isInt8Array=$V;th.isInt16Array=aW;th.isInt32Array=bW;th.isFloat32Array=cW;th.isFloat64Array=dW;th.isBigInt64Array=eW;th.isBigUint64Array=fW;hE.working="undefined"!=typeof Map&&hE(new Map);th.isMap=function(f){return"undefined"!=typeof Map&&(hE.working?hE(f):f instanceof Map)};iE.working="undefined"!=typeof Set&&iE(new Set);th.isSet=function(f){return"undefined"!=typeof Set&&(iE.working?
iE(f):f instanceof Set)};jE.working="undefined"!=typeof WeakMap&&jE(new WeakMap);th.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(jE.working?jE(f):f instanceof WeakMap)};JL.working="undefined"!=typeof WeakSet&&JL(new WeakSet);th.isWeakSet=function(f){return JL(f)};kE.working="undefined"!=typeof ArrayBuffer&&kE(new ArrayBuffer);th.isArrayBuffer=gW;lE.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&lE(new DataView(new ArrayBuffer(1),0,1));th.isDataView=hW;mE.working=
"undefined"!=typeof SharedArrayBuffer&&mE(new SharedArrayBuffer);th.isSharedArrayBuffer=iW;th.isAsyncFunction=function(f){return"[object AsyncFunction]"===lj(f)};th.isMapIterator=function(f){return"[object Map Iterator]"===lj(f)};th.isSetIterator=function(f){return"[object Set Iterator]"===lj(f)};th.isGeneratorObject=function(f){return"[object Generator]"===lj(f)};th.isWebAssemblyCompiledModule=function(f){return"[object WebAssembly.Module]"===lj(f)};th.isNumberObject=jW;th.isStringObject=kW;th.isBooleanObject=
lW;th.isBigIntObject=mW;th.isSymbolObject=oW;th.isBoxedPrimitive=function(f){return jW(f)||kW(f)||lW(f)||mW(f)||oW(f)};th.isAnyArrayBuffer=function(f){return Yl&&(gW(f)||iW(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(th,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var jB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ug={},yp=oh,w3=Object.getOwnPropertyDescriptors||function(f){for(var m=
Object.keys(f),n={},a=0;a<m.length;a++)n[m[a]]=Object.getOwnPropertyDescriptor(f,m[a]);return n},Lia=/%[sdj%]/g;ug.format=function(f){if(!pE(f)){for(var m=[],n=0;n<arguments.length;n++)m.push(pr(arguments[n]));return m.join(" ")}n=1;var a=arguments,d=a.length;m=String(f).replace(Lia,function(b){if("%%"===b)return"%";if(n>=d)return b;switch(b){case "%s":return String(a[n++]);case "%d":return Number(a[n++]);case "%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return b}});
for(var k=a[n];n<d;k=a[++n])null!==k&&uw(k)?m+=" "+pr(k):m+=" "+k;return m};ug.deprecate=function(f,m){if(void 0!==yp&&!0===yp.noDeprecation)return f;if(void 0===yp)return function(){return ug.deprecate(f,m).apply(this||jB,arguments)};var n=!1;return function(){if(!n){if(yp.throwDeprecation)throw Error(m);yp.traceDeprecation?console.trace(m):console.error(m);n=!0}return f.apply(this||jB,arguments)}};var dI={},x3=/^$/;if(yp.env.NODE_DEBUG){var lQ=yp.env.NODE_DEBUG;lQ=lQ.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();x3=new RegExp("^"+lQ+"$","i")}ug.debuglog=function(f){if(f=f.toUpperCase(),!dI[f])if(x3.test(f)){var m=yp.pid;dI[f]=function(){var n=ug.format.apply(ug,arguments);console.error("%s %d: %s",f,m,n)}}else dI[f]=function(){};return dI[f]};ug.inspect=pr;pr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
pr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};ug.types=th;ug.isArray=qW;ug.isBoolean=LL;ug.isNull=function(f){return null===f};ug.isNullOrUndefined=function(f){return null==f};ug.isNumber=pW;ug.isString=pE;ug.isSymbol=function(f){return"symbol"==typeof f};ug.isUndefined=Et;ug.isRegExp=oz;ug.types.isRegExp=oz;ug.isObject=uw;ug.isDate=qE;ug.types.isDate=qE;ug.isError=nz;ug.types.isNativeError=nz;ug.isFunction=oE;ug.isPrimitive=
function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};ug.isBuffer=v3;var Z9="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");ug.log=function(){console.log("%s - %s",Y9(),ug.format.apply(ug,arguments))};ug.inherits=Ng;ug._extend=function(f,m){if(!m||!uw(m))return f;for(var n=Object.keys(m),a=n.length;a--;)f[n[a]]=m[n[a]];return f};var zu="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;ug.promisify=function(f){function m(){for(var n,
a,d=new Promise(function(e,l){n=e;a=l}),k=[],b=0;b<arguments.length;b++)k.push(arguments[b]);k.push(function(e,l){e?a(e):n(l)});try{f.apply(this||jB,k)}catch(e){a(e)}return d}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(zu&&f[zu]){if("function"!=typeof(m=f[zu]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(m,zu,{value:m,enumerable:!1,writable:!1,configurable:!0}),m}return Object.setPrototypeOf(m,
Object.getPrototypeOf(f)),zu&&Object.defineProperty(m,zu,{value:m,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(m,w3(f))};ug.promisify.custom=zu;ug.callbackify=function(f){function m(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);var d=n.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var k=this||jB,b=function(){return d.apply(k,arguments)};f.apply(this||jB,n).then(function(e){yp.nextTick(b.bind(null,null,e))},function(e){yp.nextTick($9.bind(null,
e,b))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(m,Object.getPrototypeOf(f)),Object.defineProperties(m,w3(f)),m};for(var Uo=[],Dn=[],Mia="undefined"!=typeof Uint8Array?Uint8Array:Array,Ax=0;64>Ax;++Ax)Uo[Ax]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Ax],Dn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ax)]=Ax;Dn[45]=62;Dn[95]=63;var Eg={},TL={byteLength:function(f){f=
rW(f);var m=f[1];return 3*(f[0]+m)/4-m},toByteArray:function(f){var m=rW(f);var n=m[0];m=m[1];var a=new Mia(3*(n+m)/4-m),d=0,k=0<m?n-4:n;for(n=0;n<k;n+=4){var b=Dn[f.charCodeAt(n)]<<18|Dn[f.charCodeAt(n+1)]<<12|Dn[f.charCodeAt(n+2)]<<6|Dn[f.charCodeAt(n+3)];a[d++]=b>>16&255;a[d++]=b>>8&255;a[d++]=255&b}2===m&&(b=Dn[f.charCodeAt(n)]<<2|Dn[f.charCodeAt(n+1)]>>4,a[d++]=255&b);1===m&&(b=Dn[f.charCodeAt(n)]<<10|Dn[f.charCodeAt(n+1)]<<4|Dn[f.charCodeAt(n+2)]>>2,a[d++]=b>>8&255,a[d++]=255&b);return a},fromByteArray:function(f){for(var m,
n=f.length,a=n%3,d=[],k=0,b=n-a;k<b;k+=16383)d.push(a$(f,k,k+16383>b?b:k+16383));1===a?(m=f[n-1],d.push(Uo[m>>2]+Uo[m<<4&63]+"==")):2===a&&(m=(f[n-2]<<8)+f[n-1],d.push(Uo[m>>10]+Uo[m>>4&63]+Uo[m<<2&63]+"="));return d.join("")}},vw={read:function(f,m,n,a,d){var k=8*d-a-1;var b=(1<<k)-1,e=b>>1,l=-7;d=n?d-1:0;var p=n?-1:1,q=f[m+d];d+=p;n=q&(1<<-l)-1;q>>=-l;for(l+=k;0<l;n=256*n+f[m+d],d+=p,l-=8);k=n&(1<<-l)-1;n>>=-l;for(l+=a;0<l;k=256*k+f[m+d],d+=p,l-=8);if(0===n)n=1-e;else{if(n===b)return k?NaN:1/0*
(q?-1:1);k+=Math.pow(2,a);n-=e}return(q?-1:1)*k*Math.pow(2,n-a)},write:function(f,m,n,a,d,k){var b,e,l,p=8*k-d-1,q=(1<<p)-1,u=q>>1,w=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;k=a?0:k-1;a=a?1:-1;var y=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);for(isNaN(m)||m===1/0?(e=isNaN(m)?1:0,b=q):(b=Math.floor(Math.log(m)/Math.LN2),1>m*(l=Math.pow(2,-b))&&(b--,l*=2),2<=(m+=1<=b+u?w/l:w*Math.pow(2,1-u))*l&&(b++,l/=2),b+u>=q?(e=0,b=q):1<=b+u?(e=(m*l-1)*Math.pow(2,d),b+=u):(e=m*Math.pow(2,u-1)*Math.pow(2,d),b=0));8<=d;f[n+
k]=255&e,k+=a,e/=256,d-=8);b=b<<d|e;for(p+=d;0<p;f[n+k]=255&b,k+=a,b/=256,p-=8);f[n+k-a]|=128*y}},y3="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Eg.Buffer=be;Eg.SlowBuffer=function(f){+f!=f&&(f=0);return be.alloc(+f)};Eg.INSPECT_MAX_BYTES=50;Eg.kMaxLength=2147483647;be.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(f,m),42===
f.foo()}catch(n){return!1}}();be.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(be.prototype,"parent",{enumerable:!0,get:function(){if(be.isBuffer(this))return this.buffer}});Object.defineProperty(be.prototype,"offset",{enumerable:!0,get:function(){if(be.isBuffer(this))return this.byteOffset}});
be.poolSize=8192;be.from=function(f,m,n){return sW(f,m,n)};Object.setPrototypeOf(be.prototype,Uint8Array.prototype);Object.setPrototypeOf(be,Uint8Array);be.alloc=function(f,m,n){return uW(f),0>=f?dq(f):void 0!==m?"string"==typeof n?dq(f).fill(m,n):dq(f).fill(m):dq(f)};be.allocUnsafe=function(f){return PL(f)};be.allocUnsafeSlow=function(f){return PL(f)};be.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==be.prototype};be.compare=function(f,m){if(eq(f,Uint8Array)&&(f=be.from(f,f.offset,f.byteLength)),
eq(m,Uint8Array)&&(m=be.from(m,m.offset,m.byteLength)),!be.isBuffer(f)||!be.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;for(var n=f.length,a=m.length,d=0,k=Math.min(n,a);d<k;++d)if(f[d]!==m[d]){n=f[d];a=m[d];break}return n<a?-1:a<n?1:0};be.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};be.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return be.alloc(0);var n;if(void 0===m)for(n=m=0;n<f.length;++n)m+=f[n].length;m=be.allocUnsafe(m);var a=0;for(n=0;n<f.length;++n){var d=f[n];if(eq(d,Uint8Array)&&(d=be.from(d)),!be.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(m,a);a+=d.length}return m};be.byteLength=tW;be.prototype._isBuffer=!0;be.prototype.swap16=
function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<f;m+=2)Ft(this,m,m+1);return this};be.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<f;m+=4)Ft(this,m,m+3),Ft(this,m+1,m+2);return this};be.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<f;m+=8)Ft(this,m,
m+7),Ft(this,m+1,m+6),Ft(this,m+2,m+5),Ft(this,m+3,m+4);return this};be.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?wW(this,0,f):c$.apply(this,arguments)};be.prototype.toLocaleString=be.prototype.toString;be.prototype.equals=function(f){if(!be.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===be.compare(this,f)};be.prototype.inspect=function(){var f="",m=Eg.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,
"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"};y3&&(be.prototype[y3]=be.prototype.inspect);be.prototype.compare=function(f,m,n,a,d){if(eq(f,Uint8Array)&&(f=be.from(f,f.offset,f.byteLength)),!be.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===m&&(m=0),void 0===n&&(n=f?f.length:0),void 0===a&&(a=0),void 0===d&&(d=this.length),0>m||n>f.length||0>a||d>this.length)throw new RangeError("out of range index");
if(a>=d&&m>=n)return 0;if(a>=d)return-1;if(m>=n)return 1;if(this===f)return 0;var k=(d>>>=0)-(a>>>=0),b=(n>>>=0)-(m>>>=0),e=Math.min(k,b);a=this.slice(a,d);f=f.slice(m,n);for(m=0;m<e;++m)if(a[m]!==f[m]){k=a[m];b=f[m];break}return k<b?-1:b<k?1:0};be.prototype.includes=function(f,m,n){return-1!==this.indexOf(f,m,n)};be.prototype.indexOf=function(f,m,n){return xW(this,f,m,n,!0)};be.prototype.lastIndexOf=function(f,m,n){return xW(this,f,m,n,!1)};be.prototype.write=function(f,m,n,a){if(void 0===m)a="utf8",
n=this.length,m=0;else if(void 0===n&&"string"==typeof m)a=m,n=this.length,m=0;else{if(!isFinite(m))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m>>>=0;isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var d=this.length-m;if((void 0===n||n>d)&&(n=d),0<f.length&&(0>n||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{m=Number(m)||0;a=this.length-m;n?(n=Number(n))>a&&
(n=a):n=a;a=f.length;n>a/2&&(n=a/2);for(a=0;a<n;++a){d=parseInt(f.substr(2*a,2),16);if(d!=d){n=a;break a}this[m+a]=d}n=a}return n;case "utf8":case "utf-8":return rE(SL(f,this.length-m),this,m,n);case "ascii":return zW(this,f,m,n);case "latin1":case "binary":return zW(this,f,m,n);case "base64":return rE(vW(f),this,m,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=n;d=this.length-m;for(var k=[],b=0;b<f.length&&!(0>(d-=2));++b){var e=f.charCodeAt(b);n=e>>8;e%=256;k.push(e);k.push(n)}return rE(k,
this,m,a);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};be.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};be.prototype.slice=function(f,m){var n=this.length;0>(f=~~f)?0>(f+=n)&&(f=0):f>n&&(f=n);0>(m=void 0===m?n:~~m)?0>(m+=n)&&(m=0):m>n&&(m=n);m<f&&(m=f);f=this.subarray(f,m);return Object.setPrototypeOf(f,be.prototype),f};be.prototype.readUIntLE=function(f,m,n){f>>>=0;m>>>=0;n||zk(f,m,this.length);n=this[f];
for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n};be.prototype.readUIntBE=function(f,m,n){f>>>=0;m>>>=0;n||zk(f,m,this.length);n=this[f+--m];for(var a=1;0<m&&(a*=256);)n+=this[f+--m]*a;return n};be.prototype.readUInt8=function(f,m){return f>>>=0,m||zk(f,1,this.length),this[f]};be.prototype.readUInt16LE=function(f,m){return f>>>=0,m||zk(f,2,this.length),this[f]|this[f+1]<<8};be.prototype.readUInt16BE=function(f,m){return f>>>=0,m||zk(f,2,this.length),this[f]<<8|this[f+1]};be.prototype.readUInt32LE=
function(f,m){return f>>>=0,m||zk(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};be.prototype.readUInt32BE=function(f,m){return f>>>=0,m||zk(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};be.prototype.readIntLE=function(f,m,n){f>>>=0;m>>>=0;n||zk(f,m,this.length);n=this[f];for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n>=128*a&&(n-=Math.pow(2,8*m)),n};be.prototype.readIntBE=function(f,m,n){f>>>=0;m>>>=0;n||zk(f,m,this.length);n=m;for(var a=
1,d=this[f+--n];0<n&&(a*=256);)d+=this[f+--n]*a;return d>=128*a&&(d-=Math.pow(2,8*m)),d};be.prototype.readInt8=function(f,m){return f>>>=0,m||zk(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};be.prototype.readInt16LE=function(f,m){f>>>=0;m||zk(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};be.prototype.readInt16BE=function(f,m){f>>>=0;m||zk(f,2,this.length);f=this[f+1]|this[f]<<8;return 32768&f?4294901760|f:f};be.prototype.readInt32LE=function(f,m){return f>>>=0,
m||zk(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};be.prototype.readInt32BE=function(f,m){return f>>>=0,m||zk(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};be.prototype.readFloatLE=function(f,m){return f>>>=0,m||zk(f,4,this.length),vw.read(this,f,!0,23,4)};be.prototype.readFloatBE=function(f,m){return f>>>=0,m||zk(f,4,this.length),vw.read(this,f,!1,23,4)};be.prototype.readDoubleLE=function(f,m){return f>>>=0,m||zk(f,8,this.length),vw.read(this,f,!0,52,8)};
be.prototype.readDoubleBE=function(f,m){return f>>>=0,m||zk(f,8,this.length),vw.read(this,f,!1,52,8)};be.prototype.writeUIntLE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||Zl(this,f,m,n,Math.pow(2,8*n)-1,0);a=1;var d=0;for(this[m]=255&f;++d<n&&(a*=256);)this[m+d]=f/a&255;return m+n};be.prototype.writeUIntBE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||Zl(this,f,m,n,Math.pow(2,8*n)-1,0);a=n-1;var d=1;for(this[m+a]=255&f;0<=--a&&(d*=256);)this[m+a]=f/d&255;return m+n};be.prototype.writeUInt8=function(f,m,
n){return f=+f,m>>>=0,n||Zl(this,f,m,1,255,0),this[m]=255&f,m+1};be.prototype.writeUInt16LE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,2,65535,0),this[m]=255&f,this[m+1]=f>>>8,m+2};be.prototype.writeUInt16BE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=255&f,m+2};be.prototype.writeUInt32LE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=255&f,m+4};be.prototype.writeUInt32BE=function(f,
m,n){return f=+f,m>>>=0,n||Zl(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};be.prototype.writeIntLE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),Zl(this,f,m,n,a-1,-a));a=0;var d=1,k=0;for(this[m]=255&f;++a<n&&(d*=256);)0>f&&0===k&&0!==this[m+a-1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};be.prototype.writeIntBE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),Zl(this,f,m,n,a-1,-a));a=n-1;var d=1,k=0;for(this[m+a]=255&f;0<=--a&&(d*=
256);)0>f&&0===k&&0!==this[m+a+1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};be.prototype.writeInt8=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,1,127,-128),0>f&&(f=255+f+1),this[m]=255&f,m+1};be.prototype.writeInt16LE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,2,32767,-32768),this[m]=255&f,this[m+1]=f>>>8,m+2};be.prototype.writeInt16BE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=255&f,m+2};be.prototype.writeInt32LE=function(f,m,n){return f=
+f,m>>>=0,n||Zl(this,f,m,4,2147483647,-2147483648),this[m]=255&f,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4};be.prototype.writeInt32BE=function(f,m,n){return f=+f,m>>>=0,n||Zl(this,f,m,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};be.prototype.writeFloatLE=function(f,m,n){return BW(this,f,m,!0,n)};be.prototype.writeFloatBE=function(f,m,n){return BW(this,f,m,!1,n)};be.prototype.writeDoubleLE=function(f,m,n){return CW(this,
f,m,!0,n)};be.prototype.writeDoubleBE=function(f,m,n){return CW(this,f,m,!1,n)};be.prototype.copy=function(f,m,n,a){if(!be.isBuffer(f))throw new TypeError("argument should be a Buffer");if((n||(n=0),a||0===a||(a=this.length),m>=f.length&&(m=f.length),m||(m=0),0<a&&a<n&&(a=n),a===n)||0===f.length||0===this.length)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");
a>this.length&&(a=this.length);f.length-m<a-n&&(a=f.length-m+n);var d=a-n;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(m,n,a);else if(this===f&&n<m&&m<a)for(a=d-1;0<=a;--a)f[a+m]=this[a+n];else Uint8Array.prototype.set.call(f,this.subarray(n,a),m);return d};be.prototype.fill=function(f,m,n,a){if("string"==typeof f){if("string"==typeof m?(a=m,m=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");
if("string"==typeof a&&!be.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===f.length){var d=f.charCodeAt(0);("utf8"===a&&128>d||"latin1"===a)&&(f=d)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>m||this.length<m||this.length<n)throw new RangeError("Out of range index");if(n<=m)return this;if(m>>>=0,n=void 0===n?this.length:n>>>0,f||(f=0),"number"==typeof f)for(a=m;a<n;++a)this[a]=f;else{d=be.isBuffer(f)?f:be.from(f,a);var k=d.length;if(0===k)throw new TypeError('The value "'+
f+'" is invalid for argument "value"');for(a=0;a<n-m;++a)this[a+m]=d[a%k]}return this};var e$=/[^+/0-9A-Za-z-_]/g,d$=function(){for(var f=Array(256),m=0;16>m;++m)for(var n=16*m,a=0;16>a;++a)f[n+a]="0123456789abcdef"[m]+"0123456789abcdef"[a];return f}(),eI={},fI=Eg,Vo=fI.Buffer;Vo.from&&Vo.alloc&&Vo.allocUnsafe&&Vo.allocUnsafeSlow?eI=fI:(DW(fI,eI),eI.Buffer=Gt);Gt.prototype=Object.create(Vo.prototype);DW(Vo,Gt);Gt.from=function(f,m,n){if("number"==typeof f)throw new TypeError("Argument must not be a number");
return Vo(f,m,n)};Gt.alloc=function(f,m,n){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=Vo(f);return void 0!==m?"string"==typeof n?f.fill(m,n):f.fill(m):f.fill(0),f};Gt.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Vo(f)};Gt.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return fI.SlowBuffer(f)};var Dh=eI,ww={},UL=Dh.Buffer,EW=UL.isEncoding||function(f){switch((f=
""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};ww.StringDecoder=pz;pz.prototype.write=function(f){if(0===f.length)return"";var m;if(this.lastNeed){if(void 0===(m=this.fillLast(f)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<f.length?m?m+this.text(f,n):this.text(f,n):m||""};pz.prototype.end=function(f){f=f&&f.length?this.write(f):"";
return this.lastNeed?f+"\ufffd":f};pz.prototype.text=function(f,m){var n=f.length-1;if(n<m)n=0;else{var a=VL(f[n]);n=0<=a?(0<a&&(this.lastNeed=a-1),a):--n<m||-2===a?0:0<=(a=VL(f[n]))?(0<a&&(this.lastNeed=a-2),a):--n<m||-2===a?0:0<=(a=VL(f[n]))?(0<a&&(2===a?a=0:this.lastNeed=a-3),a):0}if(!this.lastNeed)return f.toString("utf8",m);this.lastTotal=n;a=f.length-(n-this.lastNeed);return f.copy(this.lastChar,0,a),f.toString("utf8",m,a)};pz.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var tE=Wo.EventEmitter,Xn={},FW={};$m("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+m+'" is invalid for option "'+f+'"'},TypeError);$m("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;f=("string"==typeof m&&"not "===m.substr(0,4)?(a="must not be",m=m.replace(/^not /,"")):a="must be",function(d,k,b){return(void 0===
b||b>d.length)&&(b=d.length),d.substring(b-k.length,b)===k}(f," argument"))?"The "+f+" "+a+" "+GW(m,"type"):'The "'+f+'" '+(function(d,k,b){return"number"!=typeof b&&(b=0),!(b+k.length>d.length)&&-1!==d.indexOf(k,b)}(f,".")?"property":"argument")+" "+a+" "+GW(m,"type");return f+=". Received type "+typeof n,f},TypeError);$m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");$m("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});$m("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");$m("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});$m("ERR_MULTIPLE_CALLBACK","Callback called multiple times");$m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");$m("ERR_STREAM_WRITE_AFTER_END","write after end");$m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);$m("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);$m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
Xn.codes=FW;var OW=function(){throw Error("Readable.from is not available in the browser");},XL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,QW=function(f,m){if(WL("noDeprecation"))return f;var n=!1;return function(){if(!n){if(WL("throwDeprecation"))throw Error(m);WL("traceDeprecation")?console.trace(m):console.warn(m);n=!0}return f.apply(this||XL,arguments)}},gI=Eg.Buffer,mQ=ug.inspect,Nia=mQ&&mQ.custom||"inspect",r$=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var m;return m=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var a=this.head,d=""+a.data;a=a.next;)d+=n+a.data;return d}},{key:"concat",value:function(n){if(0===this.length)return gI.alloc(0);for(var a,d,k=gI.allocUnsafe(n>>>0),b=this.head,e=0;b;)n=b.data,a=k,d=e,void gI.prototype.copy.call(n,a,d),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(n,a){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):
d=n===this.head.data.length?this.shift():a?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var a=this.head,d=1,k=a.data;for(n-=k.length;a=a.next;){var b=a.data,e=n>b.length?b.length:n;if(e===b.length?k+=b:k+=b.slice(0,n),0==(n-=e)){e===b.length?(++d,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=b.slice(e));break}++d}return this.length-=d,k}},{key:"_getBuffer",value:function(n){var a=gI.allocUnsafe(n),
d=this.head,k=1;d.data.copy(a);for(n-=d.data.length;d=d.next;){var b=d.data,e=n>b.length?b.length:n;if(b.copy(a,a.length-n,0,e),0==(n-=e)){e===b.length?(++k,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=b.slice(e));break}++k}return this.length-=k,a}},{key:Nia,value:function(n,a){return mQ(this,function(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?HW(Object(b),!0).forEach(function(e){var l=b[e];e in d?Object.defineProperty(d,e,{value:l,
enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):HW(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}({},a,{depth:0,customInspect:!1}))}}],m$(f.prototype,m),f}(),Au=oh,MW={destroy:function(f,m){var n=this,a=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||a?(m?m(f):f&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Au.nextTick(YL,this,f)):Au.nextTick(YL,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(d){!m&&d?n._writableState?n._writableState.errorEmitted?Au.nextTick(sE,n):(n._writableState.errorEmitted=!0,Au.nextTick(IW,n,d)):Au.nextTick(IW,n,d):m?(Au.nextTick(sE,n),m(d)):Au.nextTick(sE,n)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,m){var n=f._readableState,a=f._writableState;n&&n.autoDestroy||a&&a.autoDestroy?f.destroy(m):
f.emit("error",m)}},Oia=Xn.codes.ERR_INVALID_OPT_VALUE,NW={getHighWaterMark:function(f,m,n,a){m=null!=m.highWaterMark?m.highWaterMark:a?m[n]:null;if(null!=m){if(!isFinite(m)||Math.floor(m)!==m||0>m)throw new Oia(a?n:"highWaterMark",m);return Math.floor(m)}return f.objectMode?16:16384}},z3=Xn.codes.ERR_STREAM_PREMATURE_CLOSE,nQ,JW=oh,Pia=function d(m,n,a){if("function"==typeof n)return d(m,null,n);n||(n={});a=function(C){var E=!1;return function(){if(!E){E=!0;for(var L=arguments.length,I=Array(L),
V=0;V<L;V++)I[V]=arguments[V];C.apply(this,I)}}}(a||n$);var k=n.readable||!1!==n.readable&&m.readable,b=n.writable||!1!==n.writable&&m.writable,e=function(){m.writable||p()},l=m._writableState&&m._writableState.finished,p=function(){b=!1;l=!0;k||a.call(m)},q=m._readableState&&m._readableState.endEmitted,u=function(){k=!1;q=!0;b||a.call(m)},w=function(C){a.call(m,C)},y=function(){var C;return k&&!q?(m._readableState&&m._readableState.ended||(C=new z3),a.call(m,C)):b&&!l?(m._writableState&&m._writableState.ended||
(C=new z3),a.call(m,C)):void 0},A=function(){m.req.on("finish",p)};return m.setHeader&&"function"==typeof m.abort?(m.on("complete",p),m.on("abort",y),m.req?A():m.on("request",A)):b&&!m._writableState&&(m.on("end",e),m.on("close",e)),m.on("end",u),m.on("finish",p),!1!==n.error&&m.on("error",w),m.on("close",y),function(){m.removeListener("complete",p);m.removeListener("abort",y);m.removeListener("request",A);m.req&&m.req.removeListener("finish",p);m.removeListener("end",e);m.removeListener("close",
e);m.removeListener("finish",p);m.removeListener("end",u);m.removeListener("error",w);m.removeListener("close",y)}},sr=Symbol("lastResolve"),Jt=Symbol("lastReject"),kB=Symbol("error"),hI=Symbol("ended"),It=Symbol("lastPromise"),oQ=Symbol("handlePromise"),Ht=Symbol("stream"),Qia=Object.getPrototypeOf(function(){}),Ria=Object.setPrototypeOf((qr(nQ={get stream(){return this[Ht]},next:function(){var m=this,n=this[kB];if(null!==n)return Promise.reject(n);if(this[hI])return Promise.resolve(rr(void 0,!0));
if(this[Ht].destroyed)return new Promise(function(a,d){JW.nextTick(function(){m[kB]?d(m[kB]):a(rr(void 0,!0))})});if(n=this[It])n=new Promise(function(a,d){return function(k,b){a.then(function(){if(d[hI])return k(rr(void 0,!0)),void 0;d[oQ](k,b)},b)}}(n,this));else{n=this[Ht].read();if(null!==n)return Promise.resolve(rr(n,!1));n=new Promise(this[oQ])}return this[It]=n,n}},Symbol.asyncIterator,function(){return this}),qr(nQ,"return",function(){var m=this;return new Promise(function(n,a){m[Ht].destroy(null,
function(d){if(d)return a(d),void 0;n(rr(void 0,!0))})})}),nQ),Qia),s$=function(m){var n,a=Object.create(Ria,(qr(n={},Ht,{value:m,writable:!0}),qr(n,sr,{value:null,writable:!0}),qr(n,Jt,{value:null,writable:!0}),qr(n,kB,{value:null,writable:!0}),qr(n,hI,{value:m._readableState.endEmitted,writable:!0}),qr(n,oQ,{value:function(d,k){var b=a[Ht].read();b?(a[It]=null,a[sr]=null,a[Jt]=null,d(rr(b,!1))):(a[sr]=d,a[Jt]=k)},writable:!0}),n));return a[It]=null,Pia(m,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==
d.code){var k=a[Jt];return null!==k&&(a[It]=null,a[sr]=null,a[Jt]=null,k(d)),a[kB]=d,void 0}d=a[sr];null!==d&&(a[It]=null,a[sr]=null,a[Jt]=null,d(rr(void 0,!0)));a[hI]=!0}),m.on("readable",p$.bind(null,a)),a},ZL={},LW=!1,q$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$L={},PW=!1,u$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,aM={},RW=!1,Sia=KW(),A3=Xn.codes.ERR_STREAM_PREMATURE_CLOSE,gM=function k(n,a,d){if("function"==typeof a)return k(n,
null,a);a||(a={});d=function(E){var L=!1;return function(){if(!L){L=!0;for(var I=arguments.length,V=Array(I),T=0;T<I;T++)V[T]=arguments[T];E.apply(this,V)}}}(d||v$);var b=a.readable||!1!==a.readable&&n.readable,e=a.writable||!1!==a.writable&&n.writable,l=function(){n.writable||q()},p=n._writableState&&n._writableState.finished,q=function(){e=!1;p=!0;b||d.call(n)},u=n._readableState&&n._readableState.endEmitted,w=function(){b=!1;u=!0;e||d.call(n)},y=function(E){d.call(n,E)},A=function(){var E;return b&&
!u?(n._readableState&&n._readableState.ended||(E=new A3),d.call(n,E)):e&&!p?(n._writableState&&n._writableState.ended||(E=new A3),d.call(n,E)):void 0},C=function(){n.req.on("finish",q)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",q),n.on("abort",A),n.req?C():n.on("request",C)):e&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",w),n.on("finish",q),!1!==a.error&&n.on("error",y),n.on("close",A),function(){n.removeListener("complete",q);n.removeListener("abort",A);n.removeListener("request",
C);n.req&&n.req.removeListener("finish",q);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",q);n.removeListener("end",w);n.removeListener("error",y);n.removeListener("close",A)}},iI=Eg.Buffer,pQ=ug.inspect,Tia=pQ&&pQ.custom||"inspect",B$=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var a;return a=[{key:"push",value:function(d){d={data:d,next:null};0<this.length?this.tail.next=
d:this.head=d;this.tail=d;++this.length}},{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var k=this.head,b=""+k.data;k=k.next;)b+=d+k.data;
return b}},{key:"concat",value:function(d){if(0===this.length)return iI.alloc(0);for(var k,b,e=iI.allocUnsafe(d>>>0),l=this.head,p=0;l;)d=l.data,k=e,b=p,void iI.prototype.copy.call(d,k,b),p+=l.data.length,l=l.next;return e}},{key:"consume",value:function(d,k){var b;return d<this.head.data.length?(b=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):b=d===this.head.data.length?this.shift():k?this._getString(d):this._getBuffer(d),b}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(d){var k=this.head,b=1,e=k.data;for(d-=e.length;k=k.next;){var l=k.data,p=d>l.length?l.length:d;if(p===l.length?e+=l:e+=l.slice(0,d),0==(d-=p)){p===l.length?(++b,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=l.slice(p));break}++b}return this.length-=b,e}},{key:"_getBuffer",value:function(d){var k=iI.allocUnsafe(d),b=this.head,e=1;b.data.copy(k);for(d-=b.data.length;b=b.next;){var l=b.data,p=d>l.length?l.length:d;if(l.copy(k,k.length-d,0,p),
0==(d-=p)){p===l.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=l.slice(p));break}++e}return this.length-=e,k}},{key:Tia,value:function(d,k){return pQ(this,function(b){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?SW(Object(l),!0).forEach(function(p){var q=l[p];p in b?Object.defineProperty(b,p,{value:q,enumerable:!0,configurable:!0,writable:!0}):b[p]=q}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(l)):
SW(Object(l)).forEach(function(p){Object.defineProperty(b,p,Object.getOwnPropertyDescriptor(l,p))})}return b}({},k,{depth:0,customInspect:!1}))}}],w$(n.prototype,a),n}(),Bu=oh,WW={destroy:function(n,a){var d=this,k=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||k?(a?a(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Bu.nextTick(bM,this,n)):Bu.nextTick(bM,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!a&&b?d._writableState?d._writableState.errorEmitted?Bu.nextTick(uE,d):(d._writableState.errorEmitted=!0,Bu.nextTick(TW,d,b)):Bu.nextTick(TW,d,b):a?(Bu.nextTick(uE,d),a(b)):Bu.nextTick(uE,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,a){var d=n._readableState,k=n._writableState;d&&d.autoDestroy||k&&k.autoDestroy?n.destroy(a):n.emit("error",a)}},Uia=Xn.codes.ERR_INVALID_OPT_VALUE,qQ,XW={getHighWaterMark:function(n,a,d,k){a=null!=a.highWaterMark?a.highWaterMark:k?a[d]:null;
if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new Uia(k?d:"highWaterMark",a);return Math.floor(a)}return n.objectMode?16:16384}},UW=oh,Via=gM,vr=Symbol("lastResolve"),Mt=Symbol("lastReject"),lB=Symbol("error"),jI=Symbol("ended"),Lt=Symbol("lastPromise"),rQ=Symbol("handlePromise"),Kt=Symbol("stream"),Wia=Object.getPrototypeOf(function(){}),Xia=Object.setPrototypeOf((tr(qQ={get stream(){return this[Kt]},next:function(){var n=this,a=this[lB];if(null!==a)return Promise.reject(a);if(this[jI])return Promise.resolve(ur(void 0,
!0));if(this[Kt].destroyed)return new Promise(function(d,k){UW.nextTick(function(){n[lB]?k(n[lB]):d(ur(void 0,!0))})});if(a=this[Lt])a=new Promise(function(d,k){return function(b,e){d.then(function(){if(k[jI])return b(ur(void 0,!0)),void 0;k[rQ](b,e)},e)}}(a,this));else{a=this[Kt].read();if(null!==a)return Promise.resolve(ur(a,!1));a=new Promise(this[rQ])}return this[Lt]=a,a}},Symbol.asyncIterator,function(){return this}),tr(qQ,"return",function(){var n=this;return new Promise(function(a,d){n[Kt].destroy(null,
function(k){if(k)return d(k),void 0;a(ur(void 0,!0))})})}),qQ),Wia),C$=function(n){var a,d=Object.create(Xia,(tr(a={},Kt,{value:n,writable:!0}),tr(a,vr,{value:null,writable:!0}),tr(a,Mt,{value:null,writable:!0}),tr(a,lB,{value:null,writable:!0}),tr(a,jI,{value:n._readableState.endEmitted,writable:!0}),tr(a,rQ,{value:function(k,b){var e=d[Kt].read();e?(d[Lt]=null,d[vr]=null,d[Mt]=null,k(ur(e,!1))):(d[vr]=k,d[Mt]=b)},writable:!0}),a));return d[Lt]=null,Via(n,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==
k.code){var b=d[Mt];return null!==b&&(d[Lt]=null,d[vr]=null,d[Mt]=null,b(k)),d[lB]=k,void 0}k=d[vr];null!==k&&(d[Lt]=null,d[vr]=null,d[Mt]=null,k(ur(void 0,!0)));d[jI]=!0}),n.on("readable",y$.bind(null,d)),d},cM={},VW=!1,A$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dM={},ZW=!1,D$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,eM={},$W=!1,Yia=YW(),B3=qz(),kI=Xn.codes,Zia=kI.ERR_METHOD_NOT_IMPLEMENTED,F$=kI.ERR_MULTIPLE_CALLBACK,I$=
kI.ERR_TRANSFORM_ALREADY_TRANSFORMING,H$=kI.ERR_TRANSFORM_WITH_LENGTH_0,wE=B3;Ng(Xo,wE);Xo.prototype.push=function(n,a){return this._transformState.needTransform=!1,wE.prototype.push.call(this,n,a)};Xo.prototype._transform=function(n,a,d){d(new Zia("_transform()"))};Xo.prototype._write=function(n,a,d){var k=this._transformState;(k.writecb=d,k.writechunk=n,k.writeencoding=a,k.transforming)||(n=this._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
Xo.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};Xo.prototype._destroy=function(n,a){wE.prototype._destroy.call(this,n,function(d){a(d)})};var bX=Xo;Ng(rz,bX);rz.prototype._transform=function(n,a,d){d(null,n)};var fM,C3=Xn.codes,$ia=C3.ERR_MISSING_ARGS,K$=C3.ERR_STREAM_DESTROYED,iM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
hM=Wo.EventEmitter;Ng(an,hM);an.Readable=Sia;an.Writable=Yia;an.Duplex=B3;an.Transform=Xo;an.PassThrough=rz;an.finished=gM;an.pipeline=function(){for(var n=arguments.length,a=Array(n),d=0;d<n;d++)a[d]=arguments[d];var k,b=a.length?"function"!=typeof a[a.length-1]?cX:a.pop():cX;if(Array.isArray(a[0])&&(a=a[0]),2>a.length)throw new $ia("streams");var e=a.map(function(l,p){var q=p<a.length-1;return J$(l,q,0<p,function(u){k||(k=u);u&&e.forEach(dX);q||(e.forEach(dX),b(k))})});return a.reduce(L$)};an.Stream=
an;an.prototype.pipe=function(n,a){function d(w){n.writable&&!1===n.write(w)&&q.pause&&q.pause()}function k(){q.readable&&q.resume&&q.resume()}function b(){u||(u=!0,n.end())}function e(){u||(u=!0,"function"==typeof n.destroy&&n.destroy())}function l(w){if(p(),0===hM.listenerCount(this||iM,"error"))throw w;}function p(){q.removeListener("data",d);n.removeListener("drain",k);q.removeListener("end",b);q.removeListener("close",e);q.removeListener("error",l);n.removeListener("error",l);q.removeListener("end",
p);q.removeListener("close",p);n.removeListener("close",p)}var q=this||iM;q.on("data",d);n.on("drain",k);n._isStdio||a&&!1===a.end||(q.on("end",b),q.on("close",e));var u=!1;return q.on("error",l),n.on("error",l),q.on("end",p),q.on("close",p),n.on("close",p),n.emit("pipe",q),n};var Zt=an,lI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,St={},Bx=function(n){if(Object.keys)return Object.keys(n);var a=[],d;for(d in n)a.push(d);return a},Cu=function(n,a){if(n.forEach)return n.forEach(a);
for(var d=0;d<n.length;d++)a(n[d],d,n)},aja=function(){try{return Object.defineProperty({},"_",{}),function(n,a,d){Object.defineProperty(n,a,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(n){return function(a,d,k){a[d]=k}}}(),D3="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
xE.prototype={};var zp=St.Script=function(n){if(!((this||lI)instanceof zp))return new zp(n);(this||lI).code=n};zp.prototype.runInContext=function(n){if(!(n instanceof xE))throw new TypeError("needs a 'context' argument.");var a=document.createElement("iframe");a.style||(a.style={});a.style.display="none";document.body.appendChild(a);var d=a.contentWindow,k=d.eval,b=d.execScript;!k&&b&&(b.call(d,"null"),k=d.eval);Cu(Bx(n),function(l){d[l]=n[l]});Cu(D3,function(l){n[l]&&(d[l]=n[l])});var e=Bx(d);k=
k.call(d,(this||lI).code);return Cu(Bx(d),function(l){var p;if(!(p=l in n)){a:if(e.indexOf)p=e.indexOf(l);else{for(p=0;p<e.length;p++)if(e[p]===l)break a;p=-1}p=-1===p}p&&(n[l]=d[l])}),Cu(D3,function(l){l in n||aja(n,l,d[l])}),document.body.removeChild(a),k};zp.prototype.runInThisContext=function(){return eval((this||lI).code)};zp.prototype.runInNewContext=function(n){var a=zp.createContext(n),d=this.runInContext(a);return n&&Cu(Bx(a),function(k){n[k]=a[k]}),d};Cu(Bx(zp.prototype),function(n){St[n]=
zp[n]=function(a){var d=zp(a);return d[n].apply(d,[].slice.call(arguments,1))}});St.isContext=function(n){return n instanceof xE};St.createScript=function(n){return St.Script(n)};St.createContext=zp.createContext=function(n){var a=new xE;return"object"==typeof n&&Cu(Bx(n),function(d){a[d]=n[d]}),a};var E3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,bja=oh,cja=Dh.Buffer,mI=E3.crypto||E3.msCrypto,fs=mI&&mI.getRandomValues?function(n,a){if(4294967295<n)throw new RangeError("requested too many random bytes");
var d=cja.allocUnsafe(n);if(0<n)if(65536<n)for(var k=0;k<n;k+=65536)mI.getRandomValues(d.slice(k,k+65536));else mI.getRandomValues(d);return"function"==typeof a?bja.nextTick(function(){a(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},yE=Dh.Buffer,eX=Zt.Transform;Ng(fq,eX);fq.prototype._transform=function(n,a,d){var k=null;try{this.update(n,a)}catch(b){k=b}d(k)};fq.prototype._flush=function(n){var a=
null;try{this.push(this.digest())}catch(d){a=d}n(a)};fq.prototype.update=function(n,a){var d=n;if(!yE.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");yE.isBuffer(n)||(n=yE.from(n,a));a=this._block;for(d=0;this._blockOffset+n.length-d>=this._blockSize;){for(var k=this._blockOffset;k<this._blockSize;)a[k++]=n[d++];this._update();this._blockOffset=0}for(;d<n.length;)a[this._blockOffset++]=n[d++];a=0;for(n=
8*n.length;0<n;++a)this._length[a]+=n,0<(n=this._length[a]/4294967296|0)&&(this._length[a]-=4294967296*n);return this};fq.prototype._update=function(){throw Error("_update is not implemented");};fq.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var a=this._digest();void 0!==n&&(a=a.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return a};fq.prototype._digest=function(){throw Error("_digest is not implemented");
};var fX=fq,dja=Dh.Buffer,ef=Array(16);Ng(xw,fX);xw.prototype._update=function(){for(var n=0;16>n;++n)ef[n]=this._block.readInt32LE(4*n);n=this._a;var a=this._b,d=this._c,k=this._d;n=nl(n,a,d,k,ef[0],3614090360,7);k=nl(k,n,a,d,ef[1],3905402710,12);d=nl(d,k,n,a,ef[2],606105819,17);a=nl(a,d,k,n,ef[3],3250441966,22);n=nl(n,a,d,k,ef[4],4118548399,7);k=nl(k,n,a,d,ef[5],1200080426,12);d=nl(d,k,n,a,ef[6],2821735955,17);a=nl(a,d,k,n,ef[7],4249261313,22);n=nl(n,a,d,k,ef[8],1770035416,7);k=nl(k,n,a,d,ef[9],
2336552879,12);d=nl(d,k,n,a,ef[10],4294925233,17);a=nl(a,d,k,n,ef[11],2304563134,22);n=nl(n,a,d,k,ef[12],1804603682,7);k=nl(k,n,a,d,ef[13],4254626195,12);d=nl(d,k,n,a,ef[14],2792965006,17);n=ol(n,a=nl(a,d,k,n,ef[15],1236535329,22),d,k,ef[1],4129170786,5);k=ol(k,n,a,d,ef[6],3225465664,9);d=ol(d,k,n,a,ef[11],643717713,14);a=ol(a,d,k,n,ef[0],3921069994,20);n=ol(n,a,d,k,ef[5],3593408605,5);k=ol(k,n,a,d,ef[10],38016083,9);d=ol(d,k,n,a,ef[15],3634488961,14);a=ol(a,d,k,n,ef[4],3889429448,20);n=ol(n,a,d,
k,ef[9],568446438,5);k=ol(k,n,a,d,ef[14],3275163606,9);d=ol(d,k,n,a,ef[3],4107603335,14);a=ol(a,d,k,n,ef[8],1163531501,20);n=ol(n,a,d,k,ef[13],2850285829,5);k=ol(k,n,a,d,ef[2],4243563512,9);d=ol(d,k,n,a,ef[7],1735328473,14);n=pl(n,a=ol(a,d,k,n,ef[12],2368359562,20),d,k,ef[5],4294588738,4);k=pl(k,n,a,d,ef[8],2272392833,11);d=pl(d,k,n,a,ef[11],1839030562,16);a=pl(a,d,k,n,ef[14],4259657740,23);n=pl(n,a,d,k,ef[1],2763975236,4);k=pl(k,n,a,d,ef[4],1272893353,11);d=pl(d,k,n,a,ef[7],4139469664,16);a=pl(a,
d,k,n,ef[10],3200236656,23);n=pl(n,a,d,k,ef[13],681279174,4);k=pl(k,n,a,d,ef[0],3936430074,11);d=pl(d,k,n,a,ef[3],3572445317,16);a=pl(a,d,k,n,ef[6],76029189,23);n=pl(n,a,d,k,ef[9],3654602809,4);k=pl(k,n,a,d,ef[12],3873151461,11);d=pl(d,k,n,a,ef[15],530742520,16);n=ql(n,a=pl(a,d,k,n,ef[2],3299628645,23),d,k,ef[0],4096336452,6);k=ql(k,n,a,d,ef[7],1126891415,10);d=ql(d,k,n,a,ef[14],2878612391,15);a=ql(a,d,k,n,ef[5],4237533241,21);n=ql(n,a,d,k,ef[12],1700485571,6);k=ql(k,n,a,d,ef[3],2399980690,10);d=
ql(d,k,n,a,ef[10],4293915773,15);a=ql(a,d,k,n,ef[1],2240044497,21);n=ql(n,a,d,k,ef[8],1873313359,6);k=ql(k,n,a,d,ef[15],4264355552,10);d=ql(d,k,n,a,ef[6],2734768916,15);a=ql(a,d,k,n,ef[13],1309151649,21);n=ql(n,a,d,k,ef[4],4149444226,6);k=ql(k,n,a,d,ef[11],3174756917,10);d=ql(d,k,n,a,ef[2],718787259,15);a=ql(a,d,k,n,ef[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+a|0;this._c=this._c+d|0;this._d=this._d+k|0};xw.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=dja.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var sQ=Eg.Buffer,gX=fq,wo=Array(16),mB=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],nB=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],oB=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],pB=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],qB=[0,1518500249,1859775393,2400959708,2840853838],rB=[1352829926,1548603684,1836072691,2053994217,0];Ng(yw,gX);yw.prototype._update=function(){for(var n=0;16>n;++n)wo[n]=this._block.readInt32LE(4*n);var a=0|this._a;n=0|this._b;for(var d=0|this._c,k=0|this._d,b=0|this._e,e=0|this._a,l=0|this._b,p=0|this._c,
q=0|this._d,u=0|this._e,w=0;80>w;w+=1){if(16>w){var y=b;y=bn(a+(n^d^k)+wo[mB[w]]+qB[0]|0,oB[w])+y|0;a=u;var A=bn(e+(l^(p|~q))+wo[nB[w]]+rB[0]|0,pB[w])+a|0}else 32>w?(y=b,y=bn(a+(n&d|~n&k)+wo[mB[w]]+qB[1]|0,oB[w])+y|0,a=u,A=bn(e+(l&q|p&~q)+wo[nB[w]]+rB[1]|0,pB[w])+a|0):48>w?(y=b,y=bn(a+((n|~d)^k)+wo[mB[w]]+qB[2]|0,oB[w])+y|0,a=u,A=bn(e+((l|~p)^q)+wo[nB[w]]+rB[2]|0,pB[w])+a|0):64>w?(y=b,y=bn(a+(n&k|d&~k)+wo[mB[w]]+qB[3]|0,oB[w])+y|0,a=u,A=bn(e+(l&p|~l&q)+wo[nB[w]]+rB[3]|0,pB[w])+a|0):(y=b,y=bn(a+(n^
(d|~k))+wo[mB[w]]+qB[4]|0,oB[w])+y|0,a=u,A=bn(e+(l^p^q)+wo[nB[w]]+rB[4]|0,pB[w])+a|0);a=b;b=k;k=bn(d,10);d=n;n=y;e=u;u=q;q=bn(p,10);p=l;l=A}d=this._b+d+q|0;this._b=this._c+k+u|0;this._c=this._d+b+e|0;this._d=this._e+a+l|0;this._e=this._a+n+p|0;this._a=d};yw.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=sQ.alloc?sQ.alloc(20):new sQ(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var bj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hX=Dh.Buffer;gq.prototype.update=function(n,a){"string"==typeof n&&(a=a||"utf8",n=hX.from(n,a));a=(this||bj)._block;for(var d=(this||bj)._blockSize,k=n.length,b=(this||bj)._len,
e=0;e<k;){for(var l=b%d,p=Math.min(k-e,d-l),q=0;q<p;q++)a[l+q]=n[e+q];e+=p;0==(b+=p)%d&&this._update(a)}return(this||bj)._len+=k,this||bj};gq.prototype.digest=function(n){var a=(this||bj)._len%(this||bj)._blockSize;(this||bj)._block[a]=128;(this||bj)._block.fill(0,a+1);a>=(this||bj)._finalSize&&(this._update((this||bj)._block),(this||bj)._block.fill(0));a=8*(this||bj)._len;if(4294967295>=a)(this||bj)._block.writeUInt32BE(a,(this||bj)._blockSize-4);else{var d=(4294967295&a)>>>0;(this||bj)._block.writeUInt32BE((a-
d)/4294967296,(this||bj)._blockSize-8);(this||bj)._block.writeUInt32BE(d,(this||bj)._blockSize-4)}this._update((this||bj)._block);a=this._hash();return n?a.toString(n):a};gq.prototype._update=function(){throw Error("_update must be implemented by subclass");};var Fg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,iX=gq,eja=Dh.Buffer,fja=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],M$=Array(64);Ng(zw,iX);zw.prototype.init=function(){return(this||Fg)._a=1779033703,(this||Fg)._b=3144134277,(this||Fg)._c=1013904242,(this||Fg)._d=2773480762,(this||Fg)._e=1359893119,(this||Fg)._f=2600822924,(this||Fg)._g=528734635,(this||Fg)._h=1541459225,this||Fg};zw.prototype._update=function(n){for(var a,d=(this||Fg)._w,k=0|(this||Fg)._a,b=0|(this||Fg)._b,e=0|(this||Fg)._c,l=0|(this||Fg)._d,p=0|(this||Fg)._e,q=0|(this||Fg)._f,u=0|(this||Fg)._g,w=0|
(this||Fg)._h,y=0;16>y;++y)d[y]=n.readInt32BE(4*y);for(;64>y;++y){n=y;var A=(((a=d[y-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10)+d[y-7],C=d[y-15];d[n]=0|A+((C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3)+d[y-16]}for(a=0;64>a;++a)y=w+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(u^p&(q^u))+fja[a]+d[a]|0,n=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&b|e&(k|b))|0,w=u,u=q,q=p,p=l+y|0,l=e,e=b,b=k,k=y+n|0;(this||Fg)._a=k+(this||Fg)._a|0;(this||Fg)._b=b+(this||Fg)._b|0;(this||Fg)._c=e+(this||Fg)._c|0;(this||Fg)._d=
l+(this||Fg)._d|0;(this||Fg)._e=p+(this||Fg)._e|0;(this||Fg)._f=q+(this||Fg)._f|0;(this||Fg)._g=u+(this||Fg)._g|0;(this||Fg)._h=w+(this||Fg)._h|0};zw.prototype._hash=function(){var n=eja.allocUnsafe(32);return n.writeInt32BE((this||Fg)._a,0),n.writeInt32BE((this||Fg)._b,4),n.writeInt32BE((this||Fg)._c,8),n.writeInt32BE((this||Fg)._d,12),n.writeInt32BE((this||Fg)._e,16),n.writeInt32BE((this||Fg)._f,20),n.writeInt32BE((this||Fg)._g,24),n.writeInt32BE((this||Fg)._h,28),n};var xi="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,jX=gq,gja=Dh.Buffer,hja=[1518500249,1859775393,-1894007588,-899497514],N$=Array(80);Ng(sz,jX);sz.prototype.init=function(){return(this||xi)._a=1732584193,(this||xi)._b=4023233417,(this||xi)._c=2562383102,(this||xi)._d=271733878,(this||xi)._e=3285377520,this||xi};sz.prototype._update=function(n){for(var a,d=(this||xi)._w,k=0|(this||xi)._a,b=0|(this||xi)._b,e=0|(this||xi)._c,l=0|(this||xi)._d,p=0|(this||xi)._e,q=0;16>q;++q)d[q]=n.readInt32BE(4*q);for(;80>
q;++q)d[q]=d[q-3]^d[q-8]^d[q-14]^d[q-16];for(n=0;80>n;++n)q=~~(n/20),q=0|((a=k)<<5|a>>>27)+(0===q?b&e|~b&l:2===q?b&e|b&l|e&l:b^e^l)+p+d[n]+hja[q],p=l,l=e,e=b<<30|b>>>2,b=k,k=q;(this||xi)._a=k+(this||xi)._a|0;(this||xi)._b=b+(this||xi)._b|0;(this||xi)._c=e+(this||xi)._c|0;(this||xi)._d=l+(this||xi)._d|0;(this||xi)._e=p+(this||xi)._e|0};sz.prototype._hash=function(){var n=gja.allocUnsafe(20);return n.writeInt32BE(0|(this||xi)._a,0),n.writeInt32BE(0|(this||xi)._b,4),n.writeInt32BE(0|(this||xi)._c,8),
n.writeInt32BE(0|(this||xi)._d,12),n.writeInt32BE(0|(this||xi)._e,16),n};var yi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,kX=gq,ija=Dh.Buffer,jja=[1518500249,1859775393,-1894007588,-899497514],O$=Array(80);Ng(tz,kX);tz.prototype.init=function(){return(this||yi)._a=1732584193,(this||yi)._b=4023233417,(this||yi)._c=2562383102,(this||yi)._d=271733878,(this||yi)._e=3285377520,this||yi};tz.prototype._update=function(n){for(var a,d=(this||yi)._w,k=0|(this||yi)._a,b=
0|(this||yi)._b,e=0|(this||yi)._c,l=0|(this||yi)._d,p=0|(this||yi)._e,q=0;16>q;++q)d[q]=n.readInt32BE(4*q);for(;80>q;++q)d[q]=(a=d[q-3]^d[q-8]^d[q-14]^d[q-16])<<1|a>>>31;for(n=0;80>n;++n)a=~~(n/20),a=(k<<5|k>>>27)+(0===a?b&e|~b&l:2===a?b&e|b&l|e&l:b^e^l)+p+d[n]+jja[a]|0,p=l,l=e,e=b<<30|b>>>2,b=k,k=a;(this||yi)._a=k+(this||yi)._a|0;(this||yi)._b=b+(this||yi)._b|0;(this||yi)._c=e+(this||yi)._c|0;(this||yi)._d=l+(this||yi)._d|0;(this||yi)._e=p+(this||yi)._e|0};tz.prototype._hash=function(){var n=ija.allocUnsafe(20);
return n.writeInt32BE(0|(this||yi)._a,0),n.writeInt32BE(0|(this||yi)._b,4),n.writeInt32BE(0|(this||yi)._c,8),n.writeInt32BE(0|(this||yi)._d,12),n.writeInt32BE(0|(this||yi)._e,16),n};var Ak="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Q$=gq,kja=Dh.Buffer,P$=Array(64);Ng(AE,zw);AE.prototype.init=function(){return(this||Ak)._a=3238371032,(this||Ak)._b=914150663,(this||Ak)._c=812702999,(this||Ak)._d=4144912697,(this||Ak)._e=4290775857,(this||Ak)._f=1750603025,(this||
Ak)._g=1694076839,(this||Ak)._h=3204075428,this||Ak};AE.prototype._hash=function(){var n=kja.allocUnsafe(28);return n.writeInt32BE((this||Ak)._a,0),n.writeInt32BE((this||Ak)._b,4),n.writeInt32BE((this||Ak)._c,8),n.writeInt32BE((this||Ak)._d,12),n.writeInt32BE((this||Ak)._e,16),n.writeInt32BE((this||Ak)._f,20),n.writeInt32BE((this||Ak)._g,24),n};var qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,lX=gq,lja=Dh.Buffer,F3=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],R$=Array(160);Ng(Aw,lX);Aw.prototype.init=function(){return(this||qe)._ah=1779033703,(this||qe)._bh=3144134277,(this||qe)._ch=1013904242,(this||qe)._dh=2773480762,(this||qe)._eh=1359893119,(this||qe)._fh=2600822924,(this||qe)._gh=528734635,(this||qe)._hh=1541459225,(this||qe)._al=4089235720,(this||qe)._bl=2227873595,(this||qe)._cl=4271175723,(this||
qe)._dl=1595750129,(this||qe)._el=2917565137,(this||qe)._fl=725511199,(this||qe)._gl=4215389547,(this||qe)._hl=327033209,this||qe};Aw.prototype._update=function(n){for(var a=(this||qe)._w,d=0|(this||qe)._ah,k=0|(this||qe)._bh,b=0|(this||qe)._ch,e=0|(this||qe)._dh,l=0|(this||qe)._eh,p=0|(this||qe)._fh,q=0|(this||qe)._gh,u=0|(this||qe)._hh,w=0|(this||qe)._al,y=0|(this||qe)._bl,A=0|(this||qe)._cl,C=0|(this||qe)._dl,E=0|(this||qe)._el,L=0|(this||qe)._fl,I=0|(this||qe)._gl,V=0|(this||qe)._hl,T=0;32>T;T+=
2)a[T]=n.readInt32BE(4*T),a[T+1]=n.readInt32BE(4*T+4);for(;160>T;T+=2){n=a[T-30];var Y=a[T-30+1],na=(n>>>1|Y<<31)^(n>>>8|Y<<24)^n>>>7,Ba=(Y>>>1|n<<31)^(Y>>>8|n<<24)^(Y>>>7|n<<25);var F=n=a[T-4];var W=Y=a[T-4+1];F=(F>>>19|W<<13)^(W>>>29|F<<3)^F>>>6;Y=(Y>>>19|n<<13)^(n>>>29|Y<<3)^(Y>>>6|n<<26);W=a[T-32];var P=a[T-32+1];n=Ba+a[T-14+1]|0;na=na+a[T-14]+Bk(n,Ba)|0;na=(na=na+F+Bk(n=n+Y|0,Y)|0)+W+Bk(n=n+P|0,P)|0;a[T]=na;a[T+1]=n}for(T=0;160>T;T+=2){na=a[T];n=a[T+1];Y=d&k|b&(d|k);var S=w&y|A&(w|y);W=(d>>>
28|w<<4)^(w>>>2|d<<30)^(w>>>7|d<<25);P=(w>>>28|d<<4)^(d>>>2|w<<30)^(d>>>7|w<<25);var fa=F3[T],aa=F3[T+1],oa=q^l&(p^q),Va=I^E&(L^I);Ba=V+((E>>>14|l<<18)^(E>>>18|l<<14)^(l>>>9|E<<23))|0;F=u+((l>>>14|E<<18)^(l>>>18|E<<14)^(E>>>9|l<<23))+Bk(Ba,V)|0;F=(F=(F=F+oa+Bk(Ba=Ba+Va|0,Va)|0)+fa+Bk(Ba=Ba+aa|0,aa)|0)+na+Bk(Ba=Ba+n|0,n)|0;n=P+S|0;na=W+Y+Bk(n,P)|0;u=q;V=I;q=p;I=L;p=l;L=E;l=e+F+Bk(E=C+Ba|0,C)|0;e=b;C=A;b=k;A=y;k=d;y=w;d=F+na+Bk(w=Ba+n|0,Ba)|0}(this||qe)._al=(this||qe)._al+w|0;(this||qe)._bl=(this||
qe)._bl+y|0;(this||qe)._cl=(this||qe)._cl+A|0;(this||qe)._dl=(this||qe)._dl+C|0;(this||qe)._el=(this||qe)._el+E|0;(this||qe)._fl=(this||qe)._fl+L|0;(this||qe)._gl=(this||qe)._gl+I|0;(this||qe)._hl=(this||qe)._hl+V|0;(this||qe)._ah=(this||qe)._ah+d+Bk((this||qe)._al,w)|0;(this||qe)._bh=(this||qe)._bh+k+Bk((this||qe)._bl,y)|0;(this||qe)._ch=(this||qe)._ch+b+Bk((this||qe)._cl,A)|0;(this||qe)._dh=(this||qe)._dh+e+Bk((this||qe)._dl,C)|0;(this||qe)._eh=(this||qe)._eh+l+Bk((this||qe)._el,E)|0;(this||qe)._fh=
(this||qe)._fh+p+Bk((this||qe)._fl,L)|0;(this||qe)._gh=(this||qe)._gh+q+Bk((this||qe)._gl,I)|0;(this||qe)._hh=(this||qe)._hh+u+Bk((this||qe)._hl,V)|0};Aw.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=lja.allocUnsafe(64);return n((this||qe)._ah,(this||qe)._al,0),n((this||qe)._bh,(this||qe)._bl,8),n((this||qe)._ch,(this||qe)._cl,16),n((this||qe)._dh,(this||qe)._dl,24),n((this||qe)._eh,(this||qe)._el,32),n((this||qe)._fh,(this||qe)._fl,40),n((this||qe)._gh,
(this||qe)._gl,48),n((this||qe)._hh,(this||qe)._hl,56),a};var di="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,T$=gq,mja=Dh.Buffer,S$=Array(160);Ng(BE,Aw);BE.prototype.init=function(){return(this||di)._ah=3418070365,(this||di)._bh=1654270250,(this||di)._ch=2438529370,(this||di)._dh=355462360,(this||di)._eh=1731405415,(this||di)._fh=2394180231,(this||di)._gh=3675008525,(this||di)._hh=1203062813,(this||di)._al=3238371032,(this||di)._bl=914150663,(this||di)._cl=812702999,
(this||di)._dl=4144912697,(this||di)._el=4290775857,(this||di)._fl=1750603025,(this||di)._gl=1694076839,(this||di)._hl=3204075428,this||di};BE.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=mja.allocUnsafe(48);return n((this||di)._ah,(this||di)._al,0),n((this||di)._bh,(this||di)._bl,8),n((this||di)._ch,(this||di)._cl,16),n((this||di)._dh,(this||di)._dl,24),n((this||di)._eh,(this||di)._el,32),n((this||di)._fh,(this||di)._fl,40),a};var gs,G3=gs={};(gs=G3=
function(n){n=n.toLowerCase();var a=gs[n];if(!a)throw Error(n+" is not supported (we accept pull requests)");return new a}).sha=sz;gs.sha1=tz;gs.sha224=AE;gs.sha256=zw;gs.sha384=BE;gs.sha512=Aw;var tQ=G3,sj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,H3=Dh.Buffer,mX=Zt.Transform,nja=ww.StringDecoder;Ng(Ck,mX);Ck.prototype.update=function(n,a,d){"string"==typeof n&&(n=H3.from(n,a));n=this._update(n);return(this||sj).hashMode?this||sj:(d&&(n=this._toString(n,d)),n)};
Ck.prototype.setAutoPadding=function(){};Ck.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Ck.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Ck.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Ck.prototype._transform=function(n,a,d){try{(this||sj).hashMode?this._update(n):this.push(this._update(n))}catch(b){var k=b}finally{d(k)}};Ck.prototype._flush=function(n){try{this.push(this.__final())}catch(d){var a=
d}n(a)};Ck.prototype._finalOrDigest=function(n){var a=this.__final()||H3.alloc(0);return n&&(a=this._toString(a,n,!0)),a};Ck.prototype._toString=function(n,a,d){if((this||sj)._decoder||((this||sj)._decoder=new nja(a),(this||sj)._encoding=a),(this||sj)._encoding!==a)throw Error("can't switch encodings");n=(this||sj)._decoder.write(n);return d&&(n+=(this||sj)._decoder.end()),n};var nX=Ck;Ng(CE,nX);CE.prototype._update=function(n){this._hash.update(n)};CE.prototype._final=function(){return this._hash.digest()};
var sB=function(n){return"md5"===(n=n.toLowerCase())?new xw:"rmd160"===n||"ripemd160"===n?new yw:new CE(tQ(n))},I3=function(n){return(new xw).update(n).digest()},oja=Ng,Nt=Dh.Buffer,oX=Ck,U$=Nt.alloc(128);oja(DE,oX);DE.prototype._update=function(n){this._hash.push(n)};DE.prototype._final=function(){var n=this._alg(Nt.concat(this._hash));return this._alg(Nt.concat([this._opad,n]))};var pja=Ng,pX=Ck,vz=Dh.Buffer,jM=yw,kM=tQ,V$=vz.alloc(128);pja(uz,pX);uz.prototype._update=function(n){this._hash.update(n)};
uz.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new jM:kM(this._alg)).update(this._opad).update(n).digest()};var J3=function(n,a){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new uz("rmd160",a):"md5"===n?new DE(I3,a):new uz(n,a)},K3={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},W$=Eg.Buffer,qja=Math.pow(2,30)-1,uQ,L3=function(n,a,d,k){if(qX(n,"Password"),qX(a,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof k)throw new TypeError("Key length not a number");if(0>k||k>qja||k!=k)throw new TypeError("Bad key length");},M3=oh;M3.browser?uQ="utf-8":uQ=6<=parseInt(M3.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var nI=uQ,Zn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Z$=I3,Y$=yw,X$=tQ,Yn=Dh.Buffer,$$=Yn.alloc(128),EE={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};rX.prototype.run=function(n,a){return n.copy(a,(this||Zn).blocksize),this.hash(a).copy((this||Zn).opad,(this||Zn).blocksize),this.hash((this||Zn).opad)};var vQ,wQ=function(n,a,d,k,b){L3(n,a,d,k);Yn.isBuffer(n)||(n=Yn.from(n,nI));Yn.isBuffer(a)||(a=Yn.from(a,
nI));n=new rX(b=b||"sha1",n,a.length);var e=Yn.allocUnsafe(k),l=Yn.allocUnsafe(a.length+4);a.copy(l,0,0,a.length);var p=0;b=EE[b];k=Math.ceil(k/b);for(var q=1;q<=k;q++){l.writeUInt32BE(q,a.length);for(var u=n.run(l,n.ipad1),w=u,y=1;y<d;y++){w=n.run(w,n.ipad2);for(var A=0;A<b;A++)u[A]^=w[A]}u.copy(e,p);p+=b}return e},tB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xQ=oh,Bw=Dh.Buffer,wz=tB.crypto&&tB.crypto.subtle,rja={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},yQ=[],oI={pbkdf2:function(n,a,d,k,b,e){"function"==typeof b&&(e=b,b=void 0);var l=rja[(b=b||"sha1").toLowerCase()];if(!l||"function"!=typeof tB.Promise)return xQ.nextTick(function(){try{var p=wQ(n,a,d,k,b)}catch(q){return e(q)}e(null,p)});if(L3(n,a,d,k),"function"!=typeof e)throw Error("No callback provided to pbkdf2");Bw.isBuffer(n)||(n=Bw.from(n,nI));Bw.isBuffer(a)||(a=Bw.from(a,nI));(function(p,q){p.then(function(u){xQ.nextTick(function(){q(null,
u)})},function(u){xQ.nextTick(function(){q(u)})})})(function(p){if(tB.process&&!tB.process.browser||!wz||!wz.importKey||!wz.deriveBits)return Promise.resolve(!1);if(void 0!==yQ[p])return yQ[p];var q=sX(vQ=vQ||Bw.alloc(8),vQ,10,128,p).then(function(){return!0}).catch(function(){return!1});return yQ[p]=q,q}(l).then(function(p){return p?sX(n,a,d,k,l):wQ(n,a,d,k,b)}),e)}};oI.pbkdf2Sync=wQ;tX.equal=function(n,a,d){if(n!=a)throw Error(d||"Assertion failed: "+n+" != "+a);};var mn=tX,kj={readUInt32BE:function(n,
a){return(n[0+a]<<24|n[1+a]<<16|n[2+a]<<8|n[3+a])>>>0},writeUInt32BE:function(n,a,d){n[0+d]=a>>>24;n[1+d]=a>>>16&255;n[2+d]=a>>>8&255;n[3+d]=255&a},ip:function(n,a,d,k){for(var b=0,e=0,l=6;0<=l;l-=2){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>>p+l&1}for(l=6;0<=l;l-=2){for(p=1;25>=p;p+=8)e<<=1,e|=a>>>p+l&1;for(p=1;25>=p;p+=8)e<<=1,e|=n>>>p+l&1}d[k+0]=b>>>0;d[k+1]=e>>>0},rip:function(n,a,d,k){for(var b=0,e=0,l=0;4>l;l++)for(var p=24;0<=p;p-=8)b<<=1,b|=a>>>p+l&1,b<<=1,b|=
n>>>p+l&1;for(l=4;8>l;l++)for(p=24;0<=p;p-=8)e<<=1,e|=a>>>p+l&1,e<<=1,e|=n>>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},pc1:function(n,a,d,k){for(var b=0,e=0,l=7;5<=l;l--){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>p+l&1}for(p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(l=1;3>=l;l++){for(p=0;24>=p;p+=8)e<<=1,e|=a>>p+l&1;for(p=0;24>=p;p+=8)e<<=1,e|=n>>p+l&1}for(p=0;24>=p;p+=8)e<<=1,e|=n>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},r28shl:function(n,a){return n<<a&268435455|n>>>28-a}},pI=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];kj.pc2=function(n,a,d,k){for(var b=0,e=0,l=pI.length>>>1,p=0;p<l;p++)b<<=1,b|=n>>>pI[p]&1;for(p=l;p<pI.length;p++)e<<=1,e|=a>>>pI[p]&1;d[k+0]=b>>>0;d[k+1]=e>>>0};kj.expand=function(n,a,d){var k=0;var b=(1&n)<<5|n>>>27;for(var e=23;15<=e;e-=4)b<<=6,b|=n>>>e&63;for(e=11;3<=e;e-=4)k|=n>>>e&63,k<<=6;a[d+0]=b>>>0;a[d+1]=(k|(31&n)<<1|n>>>31)>>>0};var N3=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];kj.substitute=function(n,a){for(var d=0,k=0;4>k;k++)d<<=4,d|=N3[64*k+(n>>>18-6*k&63)];for(k=0;4>k;k++)d<<=4,d|=N3[256+64*k+(a>>>18-6*k&63)];return d>>>0};var O3=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];kj.permute=function(n){for(var a=0,d=0;d<O3.length;d++)a<<=1,a|=n>>>O3[d]&
1;return a>>>0};kj.padSplit=function(n,a,d){for(n=n.toString(2);n.length<a;)n="0"+n;for(var k=[],b=0;b<a;b+=d)k.push(n.slice(b,b+d));return k.join(" ")};var sja=mn;vm.prototype._init=function(){};vm.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};vm.prototype._buffer=function(n,a){for(var d=Math.min(this.buffer.length-this.bufferOff,n.length-a),k=0;k<d;k++)this.buffer[this.bufferOff+k]=n[a+k];return this.bufferOff+=d,d};vm.prototype._flushBuffer=
function(n,a){return this._update(this.buffer,0,n,a),this.bufferOff=0,this.blockSize};vm.prototype._updateEncrypt=function(n){var a=0,d=0,k=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(a+=this._buffer(n,a),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(k,d)));for(var b=n.length-(n.length-a)%this.blockSize;a<b;a+=this.blockSize)this._update(n,a,k,d),d+=this.blockSize;for(;a<n.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=n[a];return k};
vm.prototype._updateDecrypt=function(n){for(var a=0,d=0,k=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,b=Array(k*this.blockSize);0<k;k--)a+=this._buffer(n,a),d+=this._flushBuffer(b,d);return this._buffer(n,a),b};vm.prototype.final=function(n){var a,d;return n&&(a=this.update(n)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),a?a.concat(d):d};vm.prototype._pad=function(n,a){if(0===a)return!1;for(;a<n.length;)n[a++]=0;return!0};vm.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};vm.prototype._unpad=function(n){return n};vm.prototype._finalDecrypt=function(){sja.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var P3=mn,uX=vm;Ng(cn,uX);cn.create=function(n){return new cn(n)};var tja=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];cn.prototype.deriveKeys=function(n,a){n.keys=Array(32);P3.equal(a.length,this.blockSize,
"Invalid key length");var d=kj.readUInt32BE(a,0);a=kj.readUInt32BE(a,4);kj.pc1(d,a,n.tmp,0);d=n.tmp[0];a=n.tmp[1];for(var k=0;k<n.keys.length;k+=2){var b=tja[k>>>1];d=kj.r28shl(d,b);a=kj.r28shl(a,b);kj.pc2(d,a,n.keys,k)}};cn.prototype._update=function(n,a,d,k){var b=this._desState,e=kj.readUInt32BE(n,a);n=kj.readUInt32BE(n,a+4);kj.ip(e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];"encrypt"===this.type?this._encrypt(b,e,n,b.tmp,0):this._decrypt(b,e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];kj.writeUInt32BE(d,e,k);kj.writeUInt32BE(d,
n,k+4)};cn.prototype._pad=function(n,a){for(var d=n.length-a;a<n.length;a++)n[a]=d;return!0};cn.prototype._unpad=function(n){for(var a=n[n.length-1],d=n.length-a;d<n.length;d++)P3.equal(n[d],a);return n.slice(0,n.length-a)};cn.prototype._encrypt=function(n,a,d,k,b){for(var e=0;e<n.keys.length;e+=2){var l=n.keys[e],p=n.keys[e+1];kj.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=kj.substitute(l,p);p=d;d=(a^kj.permute(l))>>>0;a=p}kj.rip(d,a,k,b)};cn.prototype._decrypt=function(n,a,d,k,b){for(var e=n.keys.length-
2;0<=e;e-=2){var l=n.keys[e],p=n.keys[e+1];kj.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=kj.substitute(l,p);p=d;d=(a^kj.permute(l))>>>0;a=p}kj.rip(d,a,k,b)};var qI={},caa=mn,uja=Ng,rI={};qI.instantiate=function(n){function a(e){n.call(this,e);this._cbcInit()}uja(a,n);for(var d=Object.keys(rI),k=0;k<d.length;k++){var b=d[k];a.prototype[b]=rI[b]}return a.create=function(e){return new a(e)},a};rI._cbcInit=function(){this._cbcState=new baa(this.options.iv)};rI._update=function(n,a,d,k){var b=this.constructor.super_.prototype,
e=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)e[l]^=n[a+l];b._update.call(this,e,0,d,k);for(l=0;l<this.blockSize;l++)e[l]=d[k+l]}else{b._update.call(this,n,a,d,k);for(l=0;l<this.blockSize;l++)d[k+l]^=e[l];for(l=0;l<this.blockSize;l++)e[l]=n[a+l]}};var eaa=mn,vX=vm,wr=cn;Ng(Yo,vX);Yo.create=function(n){return new Yo(n)};Yo.prototype._update=function(n,a,d,k){var b=this._edeState;b.ciphers[0]._update(n,a,d,k);b.ciphers[1]._update(d,k,d,k);b.ciphers[2]._update(d,k,d,
k)};Yo.prototype._pad=wr.prototype._pad;Yo.prototype._unpad=wr.prototype._unpad;var GE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,wX=Ck,vja=Ng,Ot=Dh.Buffer,xz={"des-ede3-cbc":qI.instantiate(Yo),"des-ede3":Yo,"des-ede-cbc":qI.instantiate(Yo),"des-ede":Yo,"des-cbc":qI.instantiate(cn),"des-ecb":cn};xz.des=xz["des-cbc"];xz.des3=xz["des-ede3-cbc"];vja(FE,wX);FE.prototype._update=function(n){return Ot.from((this||GE)._des.update(n))};FE.prototype._final=function(){return Ot.from((this||
GE)._des.final())};var wja=Eg.Buffer,Cx=function(n,a){for(var d=Math.min(n.length,a.length),k=new wja(d),b=0;b<d;++b)k[b]=n[b]^a[b];return k},Q3=function(n){for(var a,d=n.length;d--;){if(255!==(a=n.readUInt8(d))){a++;n.writeUInt8(a,d);break}n.writeUInt8(0,d)}},R3={},yz=Dh.Buffer,faa=Cx;R3.encrypt=function(n,a,d){for(var k,b=yz.allocUnsafe(0);a.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=yz.allocUnsafe(0)),!(n._cache.length<=a.length)){b=yz.concat([b,xX(n,a,d)]);
break}k=n._cache.length;b=yz.concat([b,xX(n,a.slice(0,k),d)]);a=a.slice(k)}return b};var S3={},zQ=Dh.Buffer;S3.encrypt=function(n,a,d){for(var k=a.length,b=zQ.allocUnsafe(k),e=-1;++e<k;){var l=e;var p=n;var q=a[e],u=d,w=p._cipher.encryptBlock(p._prev)[0]^q;p=(p._prev=zQ.concat([p._prev.slice(1),zQ.from([u?q:w])]),w);b[l]=p}return b};var T3={},sI=Dh.Buffer;T3.encrypt=function(n,a,d){for(var k=a.length,b=sI.allocUnsafe(k),e=-1;++e<k;){for(var l=e,p,q,u=n,w=a[e],y=d,A=-1,C=0;8>++A;){q=w&1<<7-A?128:0;
C+=(128&(p=u._cipher.encryptBlock(u._prev)[0]^q))>>A%8;var E=u,L=u._prev;p=y?q:p;q=L.length;var I=-1,V=sI.allocUnsafe(L.length);for(L=sI.concat([L,sI.from([p])]);++I<q;)V[I]=L[I]<<1|L[I+1]>>7;E._prev=V}b[l]=C}return b};var U3={},xja=Eg.Buffer;U3.encrypt=function(n,a){for(;n._cache.length<a.length;)n._cache=xja.concat([n._cache,gaa(n)]);var d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),Cx(a,d)};var AQ={},V3=Dh.Buffer;AQ.encrypt=function(n,a){var d=Math.ceil(a.length/16),k=n._cache.length;
n._cache=V3.concat([n._cache,V3.allocUnsafe(16*d)]);for(var b=0;b<d;b++){var e=n;var l=e._cipher.encryptBlockRaw(e._prev);e=(Q3(e._prev),l);l=k+16*b;n._cache.writeUInt32BE(e[0],l+0);n._cache.writeUInt32BE(e[1],l+4);n._cache.writeUInt32BE(e[2],l+8);n._cache.writeUInt32BE(e[3],l+12)}d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),Cx(a,d)};var Du={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},
"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},
"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",
key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",
type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},yja={ECB:{encrypt:function(n,a){return n._cipher.encryptBlock(a)},decrypt:function(n,a){return n._cipher.decryptBlock(a)}},CBC:{encrypt:function(n,a){a=Cx(a,n._prev);return n._prev=n._cipher.encryptBlock(a),n._prev},decrypt:function(n,a){var d=n._prev;n._prev=a;n=n._cipher.decryptBlock(a);return Cx(n,d)}},CFB:R3,CFB8:S3,CFB1:T3,OFB:U3,CTR:AQ,GCM:AQ},BQ;
for(BQ in Du)Du[BQ].module=yja[Du[BQ].mode];var en="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uB={},HE=Dh.Buffer,zja=[0,1,2,4,8,16,32,64,128,27,54],Vj=function(){for(var n=Array(256),a=0;256>a;a++)n[a]=128>a?a<<1:a<<1^283;a=[];for(var d=[],k=[[],[],[],[]],b=[[],[],[],[]],e=0,l=0,p=0;256>p;++p){var q=l^l<<1^l<<2^l<<3^l<<4;q=q>>>8^255&q^99;a[e]=q;d[q]=e;var u=n[e],w=n[u],y=n[w],A=257*n[q]^16843008*q;k[0][e]=A<<24|A>>>8;k[1][e]=A<<16|A>>>16;k[2][e]=A<<8|A>>>24;k[3][e]=
A;A=16843009*y^65537*w^257*u^16843008*e;b[0][q]=A<<24|A>>>8;b[1][q]=A<<16|A>>>16;b[2][q]=A<<8|A>>>24;b[3][q]=A;0===e?e=l=1:(e=u^n[n[n[y^u]]],l^=n[n[l]])}return{SBOX:a,INV_SBOX:d,SUB_MIX:k,INV_SUB_MIX:b}}();dn.blockSize=16;dn.keySize=32;dn.prototype.blockSize=dn.blockSize;dn.prototype.keySize=dn.keySize;dn.prototype._reset=function(){for(var n=(this||en)._key,a=n.length,d=a+6,k=4*(d+1),b=[],e=0;e<a;e++)b[e]=n[e];for(e=a;e<k;e++)n=b[e-1],0==e%a?(n=n<<8|n>>>24,n=Vj.SBOX[n>>>24]<<24|Vj.SBOX[n>>>16&255]<<
16|Vj.SBOX[n>>>8&255]<<8|Vj.SBOX[255&n],n^=zja[e/a|0]<<24):6<a&&4==e%a&&(n=Vj.SBOX[n>>>24]<<24|Vj.SBOX[n>>>16&255]<<16|Vj.SBOX[n>>>8&255]<<8|Vj.SBOX[255&n]),b[e]=b[e-a]^n;a=[];for(e=0;e<k;e++){n=k-e;var l=b[n-(e%4?0:4)];a[e]=4>e||4>=n?l:Vj.INV_SUB_MIX[0][Vj.SBOX[l>>>24]]^Vj.INV_SUB_MIX[1][Vj.SBOX[l>>>16&255]]^Vj.INV_SUB_MIX[2][Vj.SBOX[l>>>8&255]]^Vj.INV_SUB_MIX[3][Vj.SBOX[255&l]]}(this||en)._nRounds=d;(this||en)._keySchedule=b;(this||en)._invKeySchedule=a};dn.prototype.encryptBlockRaw=function(n){return yX(lM(n),
(this||en)._keySchedule,Vj.SUB_MIX,Vj.SBOX,(this||en)._nRounds)};dn.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var a=HE.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[1],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[3],12),a};dn.prototype.decryptBlock=function(n){var a=(n=lM(n))[1];n[1]=n[3];n[3]=a;n=yX(n,(this||en)._invKeySchedule,Vj.INV_SUB_MIX,Vj.INV_SBOX,(this||en)._nRounds);a=HE.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],
8),a.writeUInt32BE(n[1],12),a};dn.prototype.scrub=function(){mM((this||en)._keySchedule);mM((this||en)._invKeySchedule);mM((this||en)._key)};uB.AES=dn;var Zk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Cw=Dh.Buffer,Aja=Cw.alloc(16,0);zz.prototype.ghash=function(n){for(var a=-1;++a<n.length;)(this||Zk).state[a]^=n[a];this._multiply()};zz.prototype._multiply=function(){for(var n,a,d=[(n=(this||Zk).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],
k=[0,0,0,0],b=-1;128>++b;){0!=((this||Zk).state[~~(b/8)]&1<<7-b%8)&&(k[0]^=d[0],k[1]^=d[1],k[2]^=d[2],k[3]^=d[3]);a=0!=(1&d[3]);for(n=3;0<n;n--)d[n]=d[n]>>>1|(1&d[n-1])<<31;d[0]>>>=1;a&&(d[0]^=-520093696)}(this||Zk).state=zX(k)};zz.prototype.update=function(n){for((this||Zk).cache=Cw.concat([(this||Zk).cache,n]);16<=(this||Zk).cache.length;)n=(this||Zk).cache.slice(0,16),(this||Zk).cache=(this||Zk).cache.slice(16),this.ghash(n)};zz.prototype.final=function(n,a){return(this||Zk).cache.length&&this.ghash(Cw.concat([(this||
Zk).cache,Aja],16)),this.ghash(zX([0,n,0,a])),(this||Zk).state};var vg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,haa=uB,$l=Dh.Buffer,AX=Ck,BX=zz,iaa=Q3;Ng(xr,AX);xr.prototype._update=function(n){if(!(this||vg)._called&&(this||vg)._alen){var a=16-(this||vg)._alen%16;16>a&&(a=$l.alloc(a,0),(this||vg)._ghash.update(a))}(this||vg)._called=!0;a=(this||vg)._mode.encrypt(this||vg,n);return(this||vg)._decrypt?(this||vg)._ghash.update(n):(this||vg)._ghash.update(a),(this||
vg)._len+=n.length,a};xr.prototype._final=function(){if((this||vg)._decrypt&&!(this||vg)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=Cx((this||vg)._ghash.final(8*(this||vg)._alen,8*(this||vg)._len),(this||vg)._cipher.encryptBlock((this||vg)._finID)),a;if(a=(this||vg)._decrypt){a=(this||vg)._authTag;var d=0;n.length!==a.length&&d++;for(var k=Math.min(n.length,a.length),b=0;b<k;++b)d+=n[b]^a[b];a=d}if(a)throw Error("Unsupported state or unable to authenticate data");
(this||vg)._authTag=n;(this||vg)._cipher.scrub()};xr.prototype.getAuthTag=function(){if((this||vg)._decrypt||!$l.isBuffer((this||vg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||vg)._authTag};xr.prototype.setAuthTag=function(n){if(!(this||vg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||vg)._authTag=n};xr.prototype.setAAD=function(n){if((this||vg)._called)throw Error("Attempting to set AAD in unsupported state");(this||vg)._ghash.update(n);
(this||vg)._alen+=n.length};var $n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jaa=uB,nM=Dh.Buffer,CX=Ck;Ng(Az,CX);Az.prototype._update=function(n){return(this||$n)._mode.encrypt(this||$n,n,(this||$n)._decrypt)};Az.prototype._final=function(){(this||$n)._cipher.scrub()};var Eu=Dh.Buffer,Fz=function(n,a,d,k){if(Eu.isBuffer(n)||(n=Eu.from(n,"binary")),a&&(Eu.isBuffer(a)||(a=Eu.from(a,"binary")),8!==a.length))throw new RangeError("salt should be Buffer with 8 byte length");
d/=8;for(var b=Eu.alloc(d),e=Eu.alloc(k||0),l=Eu.alloc(0);0<d||0<k;){var p=new xw;p.update(l);p.update(n);a&&p.update(a);l=p.digest();p=0;if(0<d){var q=b.length-d;p=Math.min(d,l.length);l.copy(b,q,0,p);d-=p}p<l.length&&0<k&&(q=Math.min(k,l.length-p),l.copy(e,e.length-k,p,p+q),k-=q)}return l.fill(0),{key:b,iv:e}},ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,maa=xr,Dw=Dh.Buffer,FX=Du,laa=Az,DX=Ck,kaa=uB;Ng(Bz,DX);Bz.prototype._update=function(n){var a;(this||ei)._cache.add(n);
for(n=[];a=(this||ei)._cache.get((this||ei)._autopadding);)a=(this||ei)._mode.decrypt(this||ei,a),n.push(a);return Dw.concat(n)};Bz.prototype._final=function(){var n=(this||ei)._cache.flush();if((this||ei)._autopadding){n=(this||ei)._mode.decrypt(this||ei,n);var a=n[15];if(1>a||16<a)throw Error("unable to decrypt data");for(var d=-1;++d<a;)if(n[d+(16-a)]!==a)throw Error("unable to decrypt data");n=16===a?void 0:n.slice(0,16-a);return n}if(n)throw Error("data not multiple of block length");};Bz.prototype.setAutoPadding=
function(n){return(this||ei)._autopadding=!!n,this||ei};IE.prototype.add=function(n){(this||ei).cache=Dw.concat([(this||ei).cache,n])};IE.prototype.get=function(n){var a;if(n){if(16<(this||ei).cache.length)return a=(this||ei).cache.slice(0,16),(this||ei).cache=(this||ei).cache.slice(16),a}else if(16<=(this||ei).cache.length)return a=(this||ei).cache.slice(0,16),(this||ei).cache=(this||ei).cache.slice(16),a;return null};IE.prototype.flush=function(){if((this||ei).cache.length)return(this||ei).cache};
var Ji="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IX=Du,paa=xr,hq=Dh.Buffer,oaa=Az,GX=Ck,naa=uB;Ng(Cz,GX);Cz.prototype._update=function(n){var a;(this||Ji)._cache.add(n);for(n=[];a=(this||Ji)._cache.get();)a=(this||Ji)._mode.encrypt(this||Ji,a),n.push(a);return hq.concat(n)};var Bja=hq.alloc(16,16);Cz.prototype._final=function(){var n=(this||Ji)._cache.flush();if((this||Ji)._autopadding)return n=(this||Ji)._mode.encrypt(this||Ji,n),(this||Ji)._cipher.scrub(),n;
if(!n.equals(Bja))throw(this||Ji)._cipher.scrub(),Error("data not multiple of block length");};Cz.prototype.setAutoPadding=function(n){return(this||Ji)._autopadding=!!n,this||Ji};JE.prototype.add=function(n){(this||Ji).cache=hq.concat([(this||Ji).cache,n])};JE.prototype.get=function(){if(15<(this||Ji).cache.length){var n=(this||Ji).cache.slice(0,16);return(this||Ji).cache=(this||Ji).cache.slice(16),n}return null};JE.prototype.flush=function(){for(var n=16-(this||Ji).cache.length,a=hq.allocUnsafe(n),
d=-1;++d<n;)a.writeUInt8(n,d);return hq.concat([(this||Ji).cache,a])};var xm={};xm.createCipher=xm.Cipher=function(n,a){var d=IX[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=Fz(a,!1,d.key,d.iv);return HX(n,a.key,a.iv)};xm.createCipheriv=xm.Cipheriv=HX;xm.createDecipher=xm.Decipher=function(n,a){var d=FX[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=Fz(a,!1,d.key,d.iv);return EX(n,a.key,a.iv)};xm.createDecipheriv=xm.Decipheriv=EX;xm.listCiphers=xm.getCiphers=
function(){return Object.keys(Du)};var hs={"des-ecb":{key:8,iv:0}};hs["des-cbc"]=hs.des={key:8,iv:8};hs["des-ede3-cbc"]=hs.des3={key:24,iv:8};hs["des-ede3"]={key:24,iv:0};hs["des-ede-cbc"]={key:16,iv:8};hs["des-ede"]={key:16,iv:0};var W3,X3,Y3,JX=FE,pM=xm,yr=Du,iq=hs;var Cja=W3=function(n,a){if(n=n.toLowerCase(),yr[n]){var d=yr[n].key;var k=yr[n].iv}else{if(!iq[n])throw new TypeError("invalid suite type");d=8*iq[n].key;k=iq[n].iv}a=Fz(a,!1,d,k);return oM(n,a.key,a.iv)};var Dja=X3=function(n,a){if(n=
n.toLowerCase(),yr[n]){var d=yr[n].key;var k=yr[n].iv}else{if(!iq[n])throw new TypeError("invalid suite type");d=8*iq[n].key;k=iq[n].iv}a=Fz(a,!1,d,k);return qM(n,a.key,a.iv)};var Eja=Y3=function(){return Object.keys(iq).concat(pM.getCiphers())};var Fja=Object.freeze({}),Wa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Z3={},$3={exports:Z3};!function(n,a){function d(F,W){if(!F)throw Error(W||"Assertion failed");}function k(F,W){F.super_=W;var P=function(){};P.prototype=
W.prototype;F.prototype=new P;F.prototype.constructor=F}function b(F,W,P){if(b.isBN(F))return F;(this||Wa).negative=0;(this||Wa).words=null;(this||Wa).length=0;(this||Wa).red=null;null!==F&&("le"!==W&&"be"!==W||(P=W,W=10),this._init(F||0,W||10,P||"be"))}function e(F,W,P){var S=0;for(P=Math.min(F.length,P);W<P;W++){var fa=F.charCodeAt(W)-48;S<<=4;S|=49<=fa&&54>=fa?fa-49+10:17<=fa&&22>=fa?fa-17+10:15&fa}return S}function l(F,W,P,S){var fa=0;for(P=Math.min(F.length,P);W<P;W++){var aa=F.charCodeAt(W)-
48;fa*=S;fa+=49<=aa?aa-49+10:17<=aa?aa-17+10:aa}return fa}function p(F,W,P){P.negative=W.negative^F.negative;var S=F.length+W.length|0;P.length=S;S=S-1|0;var fa=(0|F.words[0])*(0|W.words[0]),aa=fa/67108864|0;P.words[0]=67108863&fa;for(var oa=1;oa<S;oa++){var Va=aa>>>26;fa=67108863&aa;aa=Math.min(oa,W.length-1);for(var lb=Math.max(0,oa-F.length+1);lb<=aa;lb++)Va+=(fa=(0|F.words[oa-lb|0])*(0|W.words[lb])+fa)/67108864|0,fa&=67108863;P.words[oa]=0|fa;aa=0|Va}return 0!==aa?P.words[oa]=0|aa:P.length--,
P.strip()}function q(F,W){(this||Wa).x=F;(this||Wa).y=W}function u(F,W){(this||Wa).name=F;(this||Wa).p=new b(W,16);(this||Wa).n=(this||Wa).p.bitLength();(this||Wa).k=(new b(1)).iushln((this||Wa).n).isub((this||Wa).p);(this||Wa).tmp=this._tmp()}function w(){u.call(this||Wa,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){u.call(this||Wa,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){u.call(this||Wa,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function C(){u.call(this||Wa,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(F){"string"==typeof F?(F=b._prime(F),(this||Wa).m=F.p,(this||Wa).prime=F):(d(F.gtn(1),"modulus must be greater than 1"),(this||Wa).m=F,(this||Wa).prime=null)}function L(F){E.call(this||Wa,F);(this||Wa).shift=(this||Wa).m.bitLength();0!=(this||Wa).shift%26&&((this||Wa).shift+=26-(this||Wa).shift%26);(this||Wa).r=(new b(1)).iushln((this||Wa).shift);(this||Wa).r2=this.imod((this||Wa).r.sqr());
(this||Wa).rinv=(this||Wa).r._invmp((this||Wa).m);(this||Wa).minv=(this||Wa).rinv.mul((this||Wa).r).isubn(1).div((this||Wa).m);(this||Wa).minv=(this||Wa).minv.umod((this||Wa).r);(this||Wa).minv=(this||Wa).r.sub((this||Wa).minv)}"object"==typeof n?n.exports=b:a.BN=b;b.BN=b;b.wordSize=26;try{var I=Fja.Buffer}catch(F){}b.isBN=function(F){return F instanceof b||null!==F&&"object"==typeof F&&F.constructor.wordSize===b.wordSize&&Array.isArray(F.words)};b.max=function(F,W){return 0<F.cmp(W)?F:W};b.min=function(F,
W){return 0>F.cmp(W)?F:W};b.prototype._init=function(F,W,P){if("number"==typeof F)return this._initNumber(F,W,P);if("object"==typeof F)return this._initArray(F,W,P);"hex"===W&&(W=16);d(W===(0|W)&&2<=W&&36>=W);var S=0;"-"===(F=F.toString().replace(/\s+/g,""))[0]&&S++;16===W?this._parseHex(F,S):this._parseBase(F,W,S);"-"===F[0]&&((this||Wa).negative=1);this.strip();"le"===P&&this._initArray(this.toArray(),W,P)};b.prototype._initNumber=function(F,W,P){0>F&&((this||Wa).negative=1,F=-F);67108864>F?((this||
Wa).words=[67108863&F],(this||Wa).length=1):4503599627370496>F?((this||Wa).words=[67108863&F,F/67108864&67108863],(this||Wa).length=2):(d(9007199254740992>F),(this||Wa).words=[67108863&F,F/67108864&67108863,1],(this||Wa).length=3);"le"===P&&this._initArray(this.toArray(),W,P)};b.prototype._initArray=function(F,W,P){if(d("number"==typeof F.length),0>=F.length)return(this||Wa).words=[0],(this||Wa).length=1,this||Wa;(this||Wa).length=Math.ceil(F.length/3);(this||Wa).words=Array((this||Wa).length);for(W=
0;W<(this||Wa).length;W++)(this||Wa).words[W]=0;var S=0;if("be"===P)for(W=F.length-1,P=0;0<=W;W-=3){var fa=F[W]|F[W-1]<<8|F[W-2]<<16;(this||Wa).words[P]|=fa<<S&67108863;(this||Wa).words[P+1]=fa>>>26-S&67108863;26<=(S+=24)&&(S-=26,P++)}else if("le"===P)for(P=W=0;W<F.length;W+=3)fa=F[W]|F[W+1]<<8|F[W+2]<<16,(this||Wa).words[P]|=fa<<S&67108863,(this||Wa).words[P+1]=fa>>>26-S&67108863,26<=(S+=24)&&(S-=26,P++);return this.strip()};b.prototype._parseHex=function(F,W){(this||Wa).length=Math.ceil((F.length-
W)/6);(this||Wa).words=Array((this||Wa).length);for(var P=0;P<(this||Wa).length;P++)(this||Wa).words[P]=0;var S,fa=0;P=F.length-6;for(S=0;P>=W;P-=6){var aa=e(F,P,P+6);(this||Wa).words[S]|=aa<<fa&67108863;(this||Wa).words[S+1]|=aa>>>26-fa&4194303;26<=(fa+=24)&&(fa-=26,S++)}P+6!==W&&(aa=e(F,W,P+6),(this||Wa).words[S]|=aa<<fa&67108863,(this||Wa).words[S+1]|=aa>>>26-fa&4194303);this.strip()};b.prototype._parseBase=function(F,W,P){(this||Wa).words=[0];(this||Wa).length=1;for(var S=0,fa=1;67108863>=fa;fa*=
W)S++;S--;fa=fa/W|0;var aa=F.length-P,oa=aa%S;aa=Math.min(aa,aa-oa)+P;for(var Va=P;Va<aa;Va+=S)P=l(F,Va,Va+S,W),this.imuln(fa),67108864>(this||Wa).words[0]+P?(this||Wa).words[0]+=P:this._iaddn(P);if(0!==oa){S=1;P=l(F,Va,F.length,W);for(Va=0;Va<oa;Va++)S*=W;this.imuln(S);67108864>(this||Wa).words[0]+P?(this||Wa).words[0]+=P:this._iaddn(P)}};b.prototype.copy=function(F){F.words=Array((this||Wa).length);for(var W=0;W<(this||Wa).length;W++)F.words[W]=(this||Wa).words[W];F.length=(this||Wa).length;F.negative=
(this||Wa).negative;F.red=(this||Wa).red};b.prototype.clone=function(){var F=new b(null);return this.copy(F),F};b.prototype._expand=function(F){for(;(this||Wa).length<F;)(this||Wa).words[(this||Wa).length++]=0;return this||Wa};b.prototype.strip=function(){for(;1<(this||Wa).length&&0===(this||Wa).words[(this||Wa).length-1];)(this||Wa).length--;return this._normSign()};b.prototype._normSign=function(){return 1===(this||Wa).length&&0===(this||Wa).words[0]&&((this||Wa).negative=0),this||Wa};b.prototype.inspect=
function(){return((this||Wa).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var V=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,
5,5,5,5,5,5,5,5,5,5,5,5,5],Y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];b.prototype.toString=function(F,W){if(W=0|W||1,16===(F=F||10)||"hex"===F){var P="";for(var S=F=0,fa=0;fa<(this||Wa).length;fa++){var aa=(this||Wa).words[fa],oa=(16777215&
(aa<<F|S)).toString(16);P=0!==(S=aa>>>24-F&16777215)||fa!==(this||Wa).length-1?V[6-oa.length]+oa+P:oa+P;26<=(F+=2)&&(F-=26,fa--)}for(0!==S&&(P=S.toString(16)+P);0!=P.length%W;)P="0"+P;return 0!==(this||Wa).negative&&(P="-"+P),P}if(F===(0|F)&&2<=F&&36>=F){S=T[F];fa=Y[F];P="";aa=this.clone();for(aa.negative=0;!aa.isZero();)oa=aa.modn(fa).toString(F),P=(aa=aa.idivn(fa)).isZero()?oa+P:V[S-oa.length]+oa+P;for(this.isZero()&&(P="0"+P);0!=P.length%W;)P="0"+P;return 0!==(this||Wa).negative&&(P="-"+P),P}d(!1,
"Base should be between 2 and 36")};b.prototype.toNumber=function(){var F=(this||Wa).words[0];return 2===(this||Wa).length?F+=67108864*(this||Wa).words[1]:3===(this||Wa).length&&1===(this||Wa).words[2]?F+=4503599627370496+67108864*(this||Wa).words[1]:2<(this||Wa).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||Wa).negative?-F:F};b.prototype.toJSON=function(){return this.toString(16)};b.prototype.toBuffer=function(F,W){return d(void 0!==I),this.toArrayLike(I,F,W)};b.prototype.toArray=
function(F,W){return this.toArrayLike(Array,F,W)};b.prototype.toArrayLike=function(F,W,P){var S=this.byteLength();P=P||Math.max(1,S);d(S<=P,"byte array longer than desired length");d(0<P,"Requested array length <= 0");this.strip();var fa="le"===W;F=new F(P);W=this.clone();if(fa){for(fa=0;!W.isZero();fa++)S=W.andln(255),W.iushrn(8),F[fa]=S;for(;fa<P;fa++)F[fa]=0}else{for(fa=0;fa<P-S;fa++)F[fa]=0;for(fa=0;!W.isZero();fa++)S=W.andln(255),W.iushrn(8),F[P-fa-1]=S}return F};Math.clz32?b.prototype._countBits=
function(F){return 32-Math.clz32(F)}:b.prototype._countBits=function(F){var W=0;return 4096<=F&&(W+=13,F>>>=13),64<=F&&(W+=7,F>>>=7),8<=F&&(W+=4,F>>>=4),2<=F&&(W+=2,F>>>=2),W+F};b.prototype._zeroBits=function(F){if(0===F)return 26;var W=0;return 0==(8191&F)&&(W+=13,F>>>=13),0==(127&F)&&(W+=7,F>>>=7),0==(15&F)&&(W+=4,F>>>=4),0==(3&F)&&(W+=2,F>>>=2),0==(1&F)&&W++,W};b.prototype.bitLength=function(){var F=this._countBits((this||Wa).words[(this||Wa).length-1]);return 26*((this||Wa).length-1)+F};b.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var F=0,W=0;W<(this||Wa).length;W++){var P=this._zeroBits((this||Wa).words[W]);if(F+=P,26!==P)break}return F};b.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};b.prototype.toTwos=function(F){return 0!==(this||Wa).negative?this.abs().inotn(F).iaddn(1):this.clone()};b.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()};b.prototype.isNeg=function(){return 0!==(this||Wa).negative};b.prototype.neg=
function(){return this.clone().ineg()};b.prototype.ineg=function(){return this.isZero()||((this||Wa).negative^=1),this||Wa};b.prototype.iuor=function(F){for(;(this||Wa).length<F.length;)(this||Wa).words[(this||Wa).length++]=0;for(var W=0;W<F.length;W++)(this||Wa).words[W]|=F.words[W];return this.strip()};b.prototype.ior=function(F){return d(0==((this||Wa).negative|F.negative)),this.iuor(F)};b.prototype.or=function(F){return(this||Wa).length>F.length?this.clone().ior(F):F.clone().ior(this||Wa)};b.prototype.uor=
function(F){return(this||Wa).length>F.length?this.clone().iuor(F):F.clone().iuor(this||Wa)};b.prototype.iuand=function(F){var W=(this||Wa).length>F.length?F:this||Wa;for(var P=0;P<W.length;P++)(this||Wa).words[P]&=F.words[P];return(this||Wa).length=W.length,this.strip()};b.prototype.iand=function(F){return d(0==((this||Wa).negative|F.negative)),this.iuand(F)};b.prototype.and=function(F){return(this||Wa).length>F.length?this.clone().iand(F):F.clone().iand(this||Wa)};b.prototype.uand=function(F){return(this||
Wa).length>F.length?this.clone().iuand(F):F.clone().iuand(this||Wa)};b.prototype.iuxor=function(F){var W,P;(this||Wa).length>F.length?(W=this||Wa,P=F):(W=F,P=this||Wa);for(F=0;F<P.length;F++)(this||Wa).words[F]=W.words[F]^P.words[F];if((this||Wa)!==W)for(;F<W.length;F++)(this||Wa).words[F]=W.words[F];return(this||Wa).length=W.length,this.strip()};b.prototype.ixor=function(F){return d(0==((this||Wa).negative|F.negative)),this.iuxor(F)};b.prototype.xor=function(F){return(this||Wa).length>F.length?this.clone().ixor(F):
F.clone().ixor(this||Wa)};b.prototype.uxor=function(F){return(this||Wa).length>F.length?this.clone().iuxor(F):F.clone().iuxor(this||Wa)};b.prototype.inotn=function(F){d("number"==typeof F&&0<=F);var W=0|Math.ceil(F/26);F%=26;this._expand(W);0<F&&W--;for(var P=0;P<W;P++)(this||Wa).words[P]=67108863&~(this||Wa).words[P];return 0<F&&((this||Wa).words[P]=~(this||Wa).words[P]&67108863>>26-F),this.strip()};b.prototype.notn=function(F){return this.clone().inotn(F)};b.prototype.setn=function(F,W){d("number"==
typeof F&&0<=F);var P=F/26|0;F%=26;return this._expand(P+1),(this||Wa).words[P]=W?(this||Wa).words[P]|1<<F:(this||Wa).words[P]&~(1<<F),this.strip()};b.prototype.iadd=function(F){var W,P,S;if(0!==(this||Wa).negative&&0===F.negative)return(this||Wa).negative=0,this.isub(F),(this||Wa).negative^=1,this._normSign();if(0===(this||Wa).negative&&0!==F.negative)return F.negative=0,W=this.isub(F),F.negative=1,W._normSign();(this||Wa).length>F.length?(P=this||Wa,S=F):(P=F,S=this||Wa);for(F=W=0;F<S.length;F++)W=
(0|P.words[F])+(0|S.words[F])+W,(this||Wa).words[F]=67108863&W,W>>>=26;for(;0!==W&&F<P.length;F++)W=(0|P.words[F])+W,(this||Wa).words[F]=67108863&W,W>>>=26;if((this||Wa).length=P.length,0!==W)(this||Wa).words[(this||Wa).length]=W,(this||Wa).length++;else if(P!==(this||Wa))for(;F<P.length;F++)(this||Wa).words[F]=P.words[F];return this||Wa};b.prototype.add=function(F){var W;return 0!==F.negative&&0===(this||Wa).negative?(F.negative=0,W=this.sub(F),F.negative^=1,W):0===F.negative&&0!==(this||Wa).negative?
((this||Wa).negative=0,W=F.sub(this||Wa),(this||Wa).negative=1,W):(this||Wa).length>F.length?this.clone().iadd(F):F.clone().iadd(this||Wa)};b.prototype.isub=function(F){if(0!==F.negative){F.negative=0;var W=this.iadd(F);return F.negative=1,W._normSign()}if(0!==(this||Wa).negative)return(this||Wa).negative=0,this.iadd(F),(this||Wa).negative=1,this._normSign();var P,S;W=this.cmp(F);if(0===W)return(this||Wa).negative=0,(this||Wa).length=1,(this||Wa).words[0]=0,this||Wa;0<W?(P=this||Wa,S=F):(P=F,S=this||
Wa);for(var fa=F=0;fa<S.length;fa++)F=(W=(0|P.words[fa])-(0|S.words[fa])+F)>>26,(this||Wa).words[fa]=67108863&W;for(;0!==F&&fa<P.length;fa++)F=(W=(0|P.words[fa])+F)>>26,(this||Wa).words[fa]=67108863&W;if(0===F&&fa<P.length&&P!==(this||Wa))for(;fa<P.length;fa++)(this||Wa).words[fa]=P.words[fa];return(this||Wa).length=Math.max((this||Wa).length,fa),P!==(this||Wa)&&((this||Wa).negative=1),this.strip()};b.prototype.sub=function(F){return this.clone().isub(F)};var na=function(F,W,P){var S=F.words,fa=W.words,
aa=P.words,oa=0|S[0],Va=8191&oa;oa>>>=13;var lb=0|S[1],qa=8191&lb;lb>>>=13;var ja=0|S[2],ta=8191&ja;ja>>>=13;var Ha=0|S[3],zb=8191&Ha;Ha>>>=13;var Ub=0|S[4],Nb=8191&Ub;Ub>>>=13;var Sb=0|S[5],pc=8191&Sb;Sb>>>=13;var Eb=0|S[6],Lc=8191&Eb;Eb>>>=13;var dd=0|S[7],ia=8191&dd;dd>>>=13;var Ca=0|S[8],Ea=8191&Ca;Ca>>>=13;var jb=0|S[9];S=8191&jb;jb>>>=13;var Mb=0|fa[0],Tc=8191&Mb,Rc=Mb>>>13,qc=0|fa[1];Mb=8191&qc;var de=qc>>>13,Vd=0|fa[2];qc=8191&Vd;var Dg=Vd>>>13,eg=0|fa[3];Vd=8191&eg;var Mh=eg>>>13,Ch=0|fa[4];
eg=8191&Ch;var oi=Ch>>>13,Ei=0|fa[5];Ch=8191&Ei;var Ni=Ei>>>13,Oi=0|fa[6];Ei=8191&Oi;var rh=Oi>>>13,pi=0|fa[7];Oi=8191&pi;var Pi=pi>>>13,qi=0|fa[8];pi=8191&qi;qi>>>=13;var Qi=0|fa[9];fa=8191&Qi;Qi>>>=13;P.negative=F.negative^W.negative;P.length=19;var wx=(0+Math.imul(Va,Tc)|0)+((8191&(F=(F=Math.imul(Va,Rc))+Math.imul(oa,Tc)|0))<<13)|0;W=(Math.imul(oa,Rc)+(F>>>13)|0)+(wx>>>26)|0;wx&=67108863;var Zc=Math.imul(qa,Tc);F=(F=Math.imul(qa,Rc))+Math.imul(lb,Tc)|0;var $c=Math.imul(lb,Rc);var vx=(W+(Zc+Math.imul(Va,
Mb)|0)|0)+((8191&(F=(F=F+Math.imul(Va,de)|0)+Math.imul(oa,Mb)|0))<<13)|0;W=(($c+Math.imul(oa,de)|0)+(F>>>13)|0)+(vx>>>26)|0;vx&=67108863;Zc=Math.imul(ta,Tc);F=(F=Math.imul(ta,Rc))+Math.imul(ja,Tc)|0;$c=Math.imul(ja,Rc);Zc=Zc+Math.imul(qa,Mb)|0;F=(F=F+Math.imul(qa,de)|0)+Math.imul(lb,Mb)|0;$c=$c+Math.imul(lb,de)|0;var yu=(W+(Zc+Math.imul(Va,qc)|0)|0)+((8191&(F=(F=F+Math.imul(Va,Dg)|0)+Math.imul(oa,qc)|0))<<13)|0;W=(($c+Math.imul(oa,Dg)|0)+(F>>>13)|0)+(yu>>>26)|0;yu&=67108863;Zc=Math.imul(zb,Tc);F=
(F=Math.imul(zb,Rc))+Math.imul(Ha,Tc)|0;$c=Math.imul(Ha,Rc);Zc=Zc+Math.imul(ta,Mb)|0;F=(F=F+Math.imul(ta,de)|0)+Math.imul(ja,Mb)|0;$c=$c+Math.imul(ja,de)|0;Zc=Zc+Math.imul(qa,qc)|0;F=(F=F+Math.imul(qa,Dg)|0)+Math.imul(lb,qc)|0;$c=$c+Math.imul(lb,Dg)|0;var cs=(W+(Zc+Math.imul(Va,Vd)|0)|0)+((8191&(F=(F=F+Math.imul(Va,Mh)|0)+Math.imul(oa,Vd)|0))<<13)|0;W=(($c+Math.imul(oa,Mh)|0)+(F>>>13)|0)+(cs>>>26)|0;cs&=67108863;Zc=Math.imul(Nb,Tc);F=(F=Math.imul(Nb,Rc))+Math.imul(Ub,Tc)|0;$c=Math.imul(Ub,Rc);Zc=
Zc+Math.imul(zb,Mb)|0;F=(F=F+Math.imul(zb,de)|0)+Math.imul(Ha,Mb)|0;$c=$c+Math.imul(Ha,de)|0;Zc=Zc+Math.imul(ta,qc)|0;F=(F=F+Math.imul(ta,Dg)|0)+Math.imul(ja,qc)|0;$c=$c+Math.imul(ja,Dg)|0;Zc=Zc+Math.imul(qa,Vd)|0;F=(F=F+Math.imul(qa,Mh)|0)+Math.imul(lb,Vd)|0;$c=$c+Math.imul(lb,Mh)|0;var $A=(W+(Zc+Math.imul(Va,eg)|0)|0)+((8191&(F=(F=F+Math.imul(Va,oi)|0)+Math.imul(oa,eg)|0))<<13)|0;W=(($c+Math.imul(oa,oi)|0)+(F>>>13)|0)+($A>>>26)|0;$A&=67108863;Zc=Math.imul(pc,Tc);F=(F=Math.imul(pc,Rc))+Math.imul(Sb,
Tc)|0;$c=Math.imul(Sb,Rc);Zc=Zc+Math.imul(Nb,Mb)|0;F=(F=F+Math.imul(Nb,de)|0)+Math.imul(Ub,Mb)|0;$c=$c+Math.imul(Ub,de)|0;Zc=Zc+Math.imul(zb,qc)|0;F=(F=F+Math.imul(zb,Dg)|0)+Math.imul(Ha,qc)|0;$c=$c+Math.imul(Ha,Dg)|0;Zc=Zc+Math.imul(ta,Vd)|0;F=(F=F+Math.imul(ta,Mh)|0)+Math.imul(ja,Vd)|0;$c=$c+Math.imul(ja,Mh)|0;Zc=Zc+Math.imul(qa,eg)|0;F=(F=F+Math.imul(qa,oi)|0)+Math.imul(lb,eg)|0;$c=$c+Math.imul(lb,oi)|0;var cB=(W+(Zc+Math.imul(Va,Ch)|0)|0)+((8191&(F=(F=F+Math.imul(Va,Ni)|0)+Math.imul(oa,Ch)|0))<<
13)|0;W=(($c+Math.imul(oa,Ni)|0)+(F>>>13)|0)+(cB>>>26)|0;cB&=67108863;Zc=Math.imul(Lc,Tc);F=(F=Math.imul(Lc,Rc))+Math.imul(Eb,Tc)|0;$c=Math.imul(Eb,Rc);Zc=Zc+Math.imul(pc,Mb)|0;F=(F=F+Math.imul(pc,de)|0)+Math.imul(Sb,Mb)|0;$c=$c+Math.imul(Sb,de)|0;Zc=Zc+Math.imul(Nb,qc)|0;F=(F=F+Math.imul(Nb,Dg)|0)+Math.imul(Ub,qc)|0;$c=$c+Math.imul(Ub,Dg)|0;Zc=Zc+Math.imul(zb,Vd)|0;F=(F=F+Math.imul(zb,Mh)|0)+Math.imul(Ha,Vd)|0;$c=$c+Math.imul(Ha,Mh)|0;Zc=Zc+Math.imul(ta,eg)|0;F=(F=F+Math.imul(ta,oi)|0)+Math.imul(ja,
eg)|0;$c=$c+Math.imul(ja,oi)|0;Zc=Zc+Math.imul(qa,Ch)|0;F=(F=F+Math.imul(qa,Ni)|0)+Math.imul(lb,Ch)|0;$c=$c+Math.imul(lb,Ni)|0;var dB=(W+(Zc+Math.imul(Va,Ei)|0)|0)+((8191&(F=(F=F+Math.imul(Va,rh)|0)+Math.imul(oa,Ei)|0))<<13)|0;W=(($c+Math.imul(oa,rh)|0)+(F>>>13)|0)+(dB>>>26)|0;dB&=67108863;Zc=Math.imul(ia,Tc);F=(F=Math.imul(ia,Rc))+Math.imul(dd,Tc)|0;$c=Math.imul(dd,Rc);Zc=Zc+Math.imul(Lc,Mb)|0;F=(F=F+Math.imul(Lc,de)|0)+Math.imul(Eb,Mb)|0;$c=$c+Math.imul(Eb,de)|0;Zc=Zc+Math.imul(pc,qc)|0;F=(F=F+
Math.imul(pc,Dg)|0)+Math.imul(Sb,qc)|0;$c=$c+Math.imul(Sb,Dg)|0;Zc=Zc+Math.imul(Nb,Vd)|0;F=(F=F+Math.imul(Nb,Mh)|0)+Math.imul(Ub,Vd)|0;$c=$c+Math.imul(Ub,Mh)|0;Zc=Zc+Math.imul(zb,eg)|0;F=(F=F+Math.imul(zb,oi)|0)+Math.imul(Ha,eg)|0;$c=$c+Math.imul(Ha,oi)|0;Zc=Zc+Math.imul(ta,Ch)|0;F=(F=F+Math.imul(ta,Ni)|0)+Math.imul(ja,Ch)|0;$c=$c+Math.imul(ja,Ni)|0;Zc=Zc+Math.imul(qa,Ei)|0;F=(F=F+Math.imul(qa,rh)|0)+Math.imul(lb,Ei)|0;$c=$c+Math.imul(lb,rh)|0;var eB=(W+(Zc+Math.imul(Va,Oi)|0)|0)+((8191&(F=(F=F+Math.imul(Va,
Pi)|0)+Math.imul(oa,Oi)|0))<<13)|0;W=(($c+Math.imul(oa,Pi)|0)+(F>>>13)|0)+(eB>>>26)|0;eB&=67108863;Zc=Math.imul(Ea,Tc);F=(F=Math.imul(Ea,Rc))+Math.imul(Ca,Tc)|0;$c=Math.imul(Ca,Rc);Zc=Zc+Math.imul(ia,Mb)|0;F=(F=F+Math.imul(ia,de)|0)+Math.imul(dd,Mb)|0;$c=$c+Math.imul(dd,de)|0;Zc=Zc+Math.imul(Lc,qc)|0;F=(F=F+Math.imul(Lc,Dg)|0)+Math.imul(Eb,qc)|0;$c=$c+Math.imul(Eb,Dg)|0;Zc=Zc+Math.imul(pc,Vd)|0;F=(F=F+Math.imul(pc,Mh)|0)+Math.imul(Sb,Vd)|0;$c=$c+Math.imul(Sb,Mh)|0;Zc=Zc+Math.imul(Nb,eg)|0;F=(F=F+
Math.imul(Nb,oi)|0)+Math.imul(Ub,eg)|0;$c=$c+Math.imul(Ub,oi)|0;Zc=Zc+Math.imul(zb,Ch)|0;F=(F=F+Math.imul(zb,Ni)|0)+Math.imul(Ha,Ch)|0;$c=$c+Math.imul(Ha,Ni)|0;Zc=Zc+Math.imul(ta,Ei)|0;F=(F=F+Math.imul(ta,rh)|0)+Math.imul(ja,Ei)|0;$c=$c+Math.imul(ja,rh)|0;Zc=Zc+Math.imul(qa,Oi)|0;F=(F=F+Math.imul(qa,Pi)|0)+Math.imul(lb,Oi)|0;$c=$c+Math.imul(lb,Pi)|0;var fB=(W+(Zc+Math.imul(Va,pi)|0)|0)+((8191&(F=(F=F+Math.imul(Va,qi)|0)+Math.imul(oa,pi)|0))<<13)|0;W=(($c+Math.imul(oa,qi)|0)+(F>>>13)|0)+(fB>>>26)|
0;fB&=67108863;Zc=Math.imul(S,Tc);F=(F=Math.imul(S,Rc))+Math.imul(jb,Tc)|0;$c=Math.imul(jb,Rc);Zc=Zc+Math.imul(Ea,Mb)|0;F=(F=F+Math.imul(Ea,de)|0)+Math.imul(Ca,Mb)|0;$c=$c+Math.imul(Ca,de)|0;Zc=Zc+Math.imul(ia,qc)|0;F=(F=F+Math.imul(ia,Dg)|0)+Math.imul(dd,qc)|0;$c=$c+Math.imul(dd,Dg)|0;Zc=Zc+Math.imul(Lc,Vd)|0;F=(F=F+Math.imul(Lc,Mh)|0)+Math.imul(Eb,Vd)|0;$c=$c+Math.imul(Eb,Mh)|0;Zc=Zc+Math.imul(pc,eg)|0;F=(F=F+Math.imul(pc,oi)|0)+Math.imul(Sb,eg)|0;$c=$c+Math.imul(Sb,oi)|0;Zc=Zc+Math.imul(Nb,Ch)|
0;F=(F=F+Math.imul(Nb,Ni)|0)+Math.imul(Ub,Ch)|0;$c=$c+Math.imul(Ub,Ni)|0;Zc=Zc+Math.imul(zb,Ei)|0;F=(F=F+Math.imul(zb,rh)|0)+Math.imul(Ha,Ei)|0;$c=$c+Math.imul(Ha,rh)|0;Zc=Zc+Math.imul(ta,Oi)|0;F=(F=F+Math.imul(ta,Pi)|0)+Math.imul(ja,Oi)|0;$c=$c+Math.imul(ja,Pi)|0;Zc=Zc+Math.imul(qa,pi)|0;F=(F=F+Math.imul(qa,qi)|0)+Math.imul(lb,pi)|0;$c=$c+Math.imul(lb,qi)|0;Va=(W+(Zc+Math.imul(Va,fa)|0)|0)+((8191&(F=(F=F+Math.imul(Va,Qi)|0)+Math.imul(oa,fa)|0))<<13)|0;W=(($c+Math.imul(oa,Qi)|0)+(F>>>13)|0)+(Va>>>
26)|0;Va&=67108863;Zc=Math.imul(S,Mb);F=(F=Math.imul(S,de))+Math.imul(jb,Mb)|0;$c=Math.imul(jb,de);Zc=Zc+Math.imul(Ea,qc)|0;F=(F=F+Math.imul(Ea,Dg)|0)+Math.imul(Ca,qc)|0;$c=$c+Math.imul(Ca,Dg)|0;Zc=Zc+Math.imul(ia,Vd)|0;F=(F=F+Math.imul(ia,Mh)|0)+Math.imul(dd,Vd)|0;$c=$c+Math.imul(dd,Mh)|0;Zc=Zc+Math.imul(Lc,eg)|0;F=(F=F+Math.imul(Lc,oi)|0)+Math.imul(Eb,eg)|0;$c=$c+Math.imul(Eb,oi)|0;Zc=Zc+Math.imul(pc,Ch)|0;F=(F=F+Math.imul(pc,Ni)|0)+Math.imul(Sb,Ch)|0;$c=$c+Math.imul(Sb,Ni)|0;Zc=Zc+Math.imul(Nb,
Ei)|0;F=(F=F+Math.imul(Nb,rh)|0)+Math.imul(Ub,Ei)|0;$c=$c+Math.imul(Ub,rh)|0;Zc=Zc+Math.imul(zb,Oi)|0;F=(F=F+Math.imul(zb,Pi)|0)+Math.imul(Ha,Oi)|0;$c=$c+Math.imul(Ha,Pi)|0;Zc=Zc+Math.imul(ta,pi)|0;F=(F=F+Math.imul(ta,qi)|0)+Math.imul(ja,pi)|0;$c=$c+Math.imul(ja,qi)|0;oa=(W+(Zc+Math.imul(qa,fa)|0)|0)+((8191&(F=(F=F+Math.imul(qa,Qi)|0)+Math.imul(lb,fa)|0))<<13)|0;W=(($c+Math.imul(lb,Qi)|0)+(F>>>13)|0)+(oa>>>26)|0;oa&=67108863;Zc=Math.imul(S,qc);F=(F=Math.imul(S,Dg))+Math.imul(jb,qc)|0;$c=Math.imul(jb,
Dg);Zc=Zc+Math.imul(Ea,Vd)|0;F=(F=F+Math.imul(Ea,Mh)|0)+Math.imul(Ca,Vd)|0;$c=$c+Math.imul(Ca,Mh)|0;Zc=Zc+Math.imul(ia,eg)|0;F=(F=F+Math.imul(ia,oi)|0)+Math.imul(dd,eg)|0;$c=$c+Math.imul(dd,oi)|0;Zc=Zc+Math.imul(Lc,Ch)|0;F=(F=F+Math.imul(Lc,Ni)|0)+Math.imul(Eb,Ch)|0;$c=$c+Math.imul(Eb,Ni)|0;Zc=Zc+Math.imul(pc,Ei)|0;F=(F=F+Math.imul(pc,rh)|0)+Math.imul(Sb,Ei)|0;$c=$c+Math.imul(Sb,rh)|0;Zc=Zc+Math.imul(Nb,Oi)|0;F=(F=F+Math.imul(Nb,Pi)|0)+Math.imul(Ub,Oi)|0;$c=$c+Math.imul(Ub,Pi)|0;Zc=Zc+Math.imul(zb,
pi)|0;F=(F=F+Math.imul(zb,qi)|0)+Math.imul(Ha,pi)|0;$c=$c+Math.imul(Ha,qi)|0;qa=(W+(Zc+Math.imul(ta,fa)|0)|0)+((8191&(F=(F=F+Math.imul(ta,Qi)|0)+Math.imul(ja,fa)|0))<<13)|0;W=(($c+Math.imul(ja,Qi)|0)+(F>>>13)|0)+(qa>>>26)|0;qa&=67108863;Zc=Math.imul(S,Vd);F=(F=Math.imul(S,Mh))+Math.imul(jb,Vd)|0;$c=Math.imul(jb,Mh);Zc=Zc+Math.imul(Ea,eg)|0;F=(F=F+Math.imul(Ea,oi)|0)+Math.imul(Ca,eg)|0;$c=$c+Math.imul(Ca,oi)|0;Zc=Zc+Math.imul(ia,Ch)|0;F=(F=F+Math.imul(ia,Ni)|0)+Math.imul(dd,Ch)|0;$c=$c+Math.imul(dd,
Ni)|0;Zc=Zc+Math.imul(Lc,Ei)|0;F=(F=F+Math.imul(Lc,rh)|0)+Math.imul(Eb,Ei)|0;$c=$c+Math.imul(Eb,rh)|0;Zc=Zc+Math.imul(pc,Oi)|0;F=(F=F+Math.imul(pc,Pi)|0)+Math.imul(Sb,Oi)|0;$c=$c+Math.imul(Sb,Pi)|0;Zc=Zc+Math.imul(Nb,pi)|0;F=(F=F+Math.imul(Nb,qi)|0)+Math.imul(Ub,pi)|0;$c=$c+Math.imul(Ub,qi)|0;lb=(W+(Zc+Math.imul(zb,fa)|0)|0)+((8191&(F=(F=F+Math.imul(zb,Qi)|0)+Math.imul(Ha,fa)|0))<<13)|0;W=(($c+Math.imul(Ha,Qi)|0)+(F>>>13)|0)+(lb>>>26)|0;lb&=67108863;Zc=Math.imul(S,eg);F=(F=Math.imul(S,oi))+Math.imul(jb,
eg)|0;$c=Math.imul(jb,oi);Zc=Zc+Math.imul(Ea,Ch)|0;F=(F=F+Math.imul(Ea,Ni)|0)+Math.imul(Ca,Ch)|0;$c=$c+Math.imul(Ca,Ni)|0;Zc=Zc+Math.imul(ia,Ei)|0;F=(F=F+Math.imul(ia,rh)|0)+Math.imul(dd,Ei)|0;$c=$c+Math.imul(dd,rh)|0;Zc=Zc+Math.imul(Lc,Oi)|0;F=(F=F+Math.imul(Lc,Pi)|0)+Math.imul(Eb,Oi)|0;$c=$c+Math.imul(Eb,Pi)|0;Zc=Zc+Math.imul(pc,pi)|0;F=(F=F+Math.imul(pc,qi)|0)+Math.imul(Sb,pi)|0;$c=$c+Math.imul(Sb,qi)|0;ta=(W+(Zc+Math.imul(Nb,fa)|0)|0)+((8191&(F=(F=F+Math.imul(Nb,Qi)|0)+Math.imul(Ub,fa)|0))<<13)|
0;W=(($c+Math.imul(Ub,Qi)|0)+(F>>>13)|0)+(ta>>>26)|0;ta&=67108863;Zc=Math.imul(S,Ch);F=(F=Math.imul(S,Ni))+Math.imul(jb,Ch)|0;$c=Math.imul(jb,Ni);Zc=Zc+Math.imul(Ea,Ei)|0;F=(F=F+Math.imul(Ea,rh)|0)+Math.imul(Ca,Ei)|0;$c=$c+Math.imul(Ca,rh)|0;Zc=Zc+Math.imul(ia,Oi)|0;F=(F=F+Math.imul(ia,Pi)|0)+Math.imul(dd,Oi)|0;$c=$c+Math.imul(dd,Pi)|0;Zc=Zc+Math.imul(Lc,pi)|0;F=(F=F+Math.imul(Lc,qi)|0)+Math.imul(Eb,pi)|0;$c=$c+Math.imul(Eb,qi)|0;ja=(W+(Zc+Math.imul(pc,fa)|0)|0)+((8191&(F=(F=F+Math.imul(pc,Qi)|0)+
Math.imul(Sb,fa)|0))<<13)|0;W=(($c+Math.imul(Sb,Qi)|0)+(F>>>13)|0)+(ja>>>26)|0;ja&=67108863;Zc=Math.imul(S,Ei);F=(F=Math.imul(S,rh))+Math.imul(jb,Ei)|0;$c=Math.imul(jb,rh);Zc=Zc+Math.imul(Ea,Oi)|0;F=(F=F+Math.imul(Ea,Pi)|0)+Math.imul(Ca,Oi)|0;$c=$c+Math.imul(Ca,Pi)|0;Zc=Zc+Math.imul(ia,pi)|0;F=(F=F+Math.imul(ia,qi)|0)+Math.imul(dd,pi)|0;$c=$c+Math.imul(dd,qi)|0;zb=(W+(Zc+Math.imul(Lc,fa)|0)|0)+((8191&(F=(F=F+Math.imul(Lc,Qi)|0)+Math.imul(Eb,fa)|0))<<13)|0;W=(($c+Math.imul(Eb,Qi)|0)+(F>>>13)|0)+(zb>>>
26)|0;zb&=67108863;Zc=Math.imul(S,Oi);F=(F=Math.imul(S,Pi))+Math.imul(jb,Oi)|0;$c=Math.imul(jb,Pi);Zc=Zc+Math.imul(Ea,pi)|0;F=(F=F+Math.imul(Ea,qi)|0)+Math.imul(Ca,pi)|0;$c=$c+Math.imul(Ca,qi)|0;Ha=(W+(Zc+Math.imul(ia,fa)|0)|0)+((8191&(F=(F=F+Math.imul(ia,Qi)|0)+Math.imul(dd,fa)|0))<<13)|0;W=(($c+Math.imul(dd,Qi)|0)+(F>>>13)|0)+(Ha>>>26)|0;Ha&=67108863;Zc=Math.imul(S,pi);F=(F=Math.imul(S,qi))+Math.imul(jb,pi)|0;$c=Math.imul(jb,qi);Nb=(W+(Zc+Math.imul(Ea,fa)|0)|0)+((8191&(F=(F=F+Math.imul(Ea,Qi)|0)+
Math.imul(Ca,fa)|0))<<13)|0;W=(($c+Math.imul(Ca,Qi)|0)+(F>>>13)|0)+(Nb>>>26)|0;Nb&=67108863;Ub=(W+Math.imul(S,fa)|0)+((8191&(F=(F=Math.imul(S,Qi))+Math.imul(jb,fa)|0))<<13)|0;return W=(Math.imul(jb,Qi)+(F>>>13)|0)+(Ub>>>26)|0,Ub&=67108863,aa[0]=wx,aa[1]=vx,aa[2]=yu,aa[3]=cs,aa[4]=$A,aa[5]=cB,aa[6]=dB,aa[7]=eB,aa[8]=fB,aa[9]=Va,aa[10]=oa,aa[11]=qa,aa[12]=lb,aa[13]=ta,aa[14]=ja,aa[15]=zb,aa[16]=Ha,aa[17]=Nb,aa[18]=Ub,0!==W&&(aa[19]=W,P.length++),P};Math.imul||(na=p);b.prototype.mulTo=function(F,W){var P=
(this||Wa).length+F.length;if(10===(this||Wa).length&&10===F.length)F=na(this||Wa,F,W);else if(63>P)F=p(this||Wa,F,W);else if(1024>P){P=this||Wa;W.negative=F.negative^P.negative;W.length=P.length+F.length;for(var S=0,fa=0,aa=0;aa<W.length-1;aa++){var oa=fa;fa=0;S&=67108863;for(var Va=Math.min(aa,F.length-1),lb=Math.max(0,aa-P.length+1);lb<=Va;lb++){var qa=(0|P.words[aa-lb])*(0|F.words[lb]),ja=67108863&qa;S=67108863&(ja=ja+S|0);fa+=(oa=(oa=oa+(qa/67108864|0)|0)+(ja>>>26)|0)>>>26;oa&=67108863}W.words[aa]=
S;S=oa}F=(0!==S?W.words[aa]=S:W.length--,W.strip())}else P=this||Wa,F=(new q).mulp(P,F,W);return F};q.prototype.makeRBT=function(F){for(var W=Array(F),P=b.prototype._countBits(F)-1,S=0;S<F;S++)W[S]=this.revBin(S,P,F);return W};q.prototype.revBin=function(F,W,P){if(0===F||F===P-1)return F;for(var S=P=0;S<W;S++)P|=(1&F)<<W-S-1,F>>=1;return P};q.prototype.permute=function(F,W,P,S,fa,aa){for(var oa=0;oa<aa;oa++)S[oa]=W[F[oa]],fa[oa]=P[F[oa]]};q.prototype.transform=function(F,W,P,S,fa,aa){this.permute(aa,
F,W,P,S,fa);for(F=1;F<fa;F<<=1){W=F<<1;aa=Math.cos(2*Math.PI/W);for(var oa=Math.sin(2*Math.PI/W),Va=0;Va<fa;Va+=W)for(var lb=aa,qa=oa,ja=0;ja<F;ja++){var ta=P[Va+ja],Ha=S[Va+ja],zb=P[Va+ja+F],Ub=S[Va+ja+F],Nb=lb*zb-qa*Ub;Ub=lb*Ub+qa*zb;zb=Nb;P[Va+ja]=ta+zb;S[Va+ja]=Ha+Ub;P[Va+ja+F]=ta-zb;S[Va+ja+F]=Ha-Ub;ja!==W&&(Nb=aa*lb-oa*qa,qa=aa*qa+oa*lb,lb=Nb)}}};q.prototype.guessLen13b=function(F,W){F=1|Math.max(W,F);W=1&F;var P=0;for(F=F/2|0;F;F>>>=1)P++;return 1<<P+1+W};q.prototype.conjugate=function(F,W,
P){if(!(1>=P))for(var S=0;S<P/2;S++){var fa=F[S];F[S]=F[P-S-1];F[P-S-1]=fa;fa=W[S];W[S]=-W[P-S-1];W[P-S-1]=-fa}};q.prototype.normalize13b=function(F,W){for(var P=0,S=0;S<W/2;S++)P=8192*Math.round(F[2*S+1]/W)+Math.round(F[2*S]/W)+P,F[S]=67108863&P,P=67108864>P?0:P/67108864|0;return F};q.prototype.convert13b=function(F,W,P,S){for(var fa=0,aa=0;aa<W;aa++)fa+=0|F[aa],P[2*aa]=8191&fa,fa>>>=13,P[2*aa+1]=8191&fa,fa>>>=13;for(aa=2*W;aa<S;++aa)P[aa]=0;d(0===fa);d(0==(-8192&fa))};q.prototype.stub=function(F){for(var W=
Array(F),P=0;P<F;P++)W[P]=0;return W};q.prototype.mulp=function(F,W,P){var S=2*this.guessLen13b(F.length,W.length),fa=this.makeRBT(S),aa=this.stub(S),oa=Array(S),Va=Array(S),lb=Array(S),qa=Array(S),ja=Array(S),ta=Array(S),Ha=P.words;Ha.length=S;this.convert13b(F.words,F.length,oa,S);this.convert13b(W.words,W.length,qa,S);this.transform(oa,aa,Va,lb,S,fa);this.transform(qa,aa,ja,ta,S,fa);for(oa=0;oa<S;oa++)qa=Va[oa]*ja[oa]-lb[oa]*ta[oa],lb[oa]=Va[oa]*ta[oa]+lb[oa]*ja[oa],Va[oa]=qa;return this.conjugate(Va,
lb,S),this.transform(Va,lb,Ha,aa,S,fa),this.conjugate(Ha,aa,S),this.normalize13b(Ha,S),P.negative=F.negative^W.negative,P.length=F.length+W.length,P.strip()};b.prototype.mul=function(F){var W=new b(null);return W.words=Array((this||Wa).length+F.length),this.mulTo(F,W)};b.prototype.mulf=function(F){var W=new b(null);W.words=Array((this||Wa).length+F.length);var P=this||Wa;return(new q).mulp(P,F,W)};b.prototype.imul=function(F){return this.clone().mulTo(F,this||Wa)};b.prototype.imuln=function(F){d("number"==
typeof F);d(67108864>F);for(var W=0,P=0;P<(this||Wa).length;P++){var S=(0|(this||Wa).words[P])*F,fa=(67108863&S)+(67108863&W);W>>=26;W+=S/67108864|0;W+=fa>>>26;(this||Wa).words[P]=67108863&fa}return 0!==W&&((this||Wa).words[P]=W,(this||Wa).length++),this||Wa};b.prototype.muln=function(F){return this.clone().imuln(F)};b.prototype.sqr=function(){return this.mul(this||Wa)};b.prototype.isqr=function(){return this.imul(this.clone())};b.prototype.pow=function(F){for(var W=Array(F.bitLength()),P=0;P<W.length;P++){var S=
P%26;W[P]=(F.words[P/26|0]&1<<S)>>>S}if(0===W.length)return new b(1);F=this||Wa;for(P=0;P<W.length&&0===W[P];P++,F=F.sqr());if(++P<W.length)for(S=F.sqr();P<W.length;P++,S=S.sqr())0!==W[P]&&(F=F.mul(S));return F};b.prototype.iushln=function(F){d("number"==typeof F&&0<=F);var W=F%26,P=(F-W)/26,S=67108863>>>26-W<<26-W;if(0!==W){var fa=0;for(F=0;F<(this||Wa).length;F++){var aa=(this||Wa).words[F]&S;(this||Wa).words[F]=(0|(this||Wa).words[F])-aa<<W|fa;fa=aa>>>26-W}fa&&((this||Wa).words[F]=fa,(this||Wa).length++)}if(0!==
P){for(F=(this||Wa).length-1;0<=F;F--)(this||Wa).words[F+P]=(this||Wa).words[F];for(F=0;F<P;F++)(this||Wa).words[F]=0;(this||Wa).length+=P}return this.strip()};b.prototype.ishln=function(F){return d(0===(this||Wa).negative),this.iushln(F)};b.prototype.iushrn=function(F,W,P){d("number"==typeof F&&0<=F);W=W?(W-W%26)/26:0;var S=F%26,fa=Math.min((F-S)/26,(this||Wa).length);F=67108863^67108863>>>S<<S;if(W-=fa,W=Math.max(0,W),P){for(var aa=0;aa<fa;aa++)P.words[aa]=(this||Wa).words[aa];P.length=fa}if(0!==
fa)if((this||Wa).length>fa)for((this||Wa).length-=fa,aa=0;aa<(this||Wa).length;aa++)(this||Wa).words[aa]=(this||Wa).words[aa+fa];else(this||Wa).words[0]=0,(this||Wa).length=1;fa=0;for(aa=(this||Wa).length-1;0<=aa&&(0!==fa||aa>=W);aa--){var oa=0|(this||Wa).words[aa];(this||Wa).words[aa]=fa<<26-S|oa>>>S;fa=oa&F}return P&&0!==fa&&(P.words[P.length++]=fa),0===(this||Wa).length&&((this||Wa).words[0]=0,(this||Wa).length=1),this.strip()};b.prototype.ishrn=function(F,W,P){return d(0===(this||Wa).negative),
this.iushrn(F,W,P)};b.prototype.shln=function(F){return this.clone().ishln(F)};b.prototype.ushln=function(F){return this.clone().iushln(F)};b.prototype.shrn=function(F){return this.clone().ishrn(F)};b.prototype.ushrn=function(F){return this.clone().iushrn(F)};b.prototype.testn=function(F){d("number"==typeof F&&0<=F);var W=F%26;F=(F-W)/26;return!((this||Wa).length<=F)&&!!((this||Wa).words[F]&1<<W)};b.prototype.imaskn=function(F){d("number"==typeof F&&0<=F);var W=F%26;F=(F-W)/26;if(d(0===(this||Wa).negative,
"imaskn works only with positive numbers"),(this||Wa).length<=F)return this||Wa;if(0!==W&&F++,(this||Wa).length=Math.min(F,(this||Wa).length),0!==W)(this||Wa).words[(this||Wa).length-1]&=67108863^67108863>>>W<<W;return this.strip()};b.prototype.maskn=function(F){return this.clone().imaskn(F)};b.prototype.iaddn=function(F){return d("number"==typeof F),d(67108864>F),0>F?this.isubn(-F):0!==(this||Wa).negative?1===(this||Wa).length&&(0|(this||Wa).words[0])<F?((this||Wa).words[0]=F-(0|(this||Wa).words[0]),
(this||Wa).negative=0,this||Wa):((this||Wa).negative=0,this.isubn(F),(this||Wa).negative=1,this||Wa):this._iaddn(F)};b.prototype._iaddn=function(F){(this||Wa).words[0]+=F;for(F=0;F<(this||Wa).length&&67108864<=(this||Wa).words[F];F++)(this||Wa).words[F]-=67108864,F===(this||Wa).length-1?(this||Wa).words[F+1]=1:(this||Wa).words[F+1]++;return(this||Wa).length=Math.max((this||Wa).length,F+1),this||Wa};b.prototype.isubn=function(F){if(d("number"==typeof F),d(67108864>F),0>F)return this.iaddn(-F);if(0!==
(this||Wa).negative)return(this||Wa).negative=0,this.iaddn(F),(this||Wa).negative=1,this||Wa;if((this||Wa).words[0]-=F,1===(this||Wa).length&&0>(this||Wa).words[0])(this||Wa).words[0]=-(this||Wa).words[0],(this||Wa).negative=1;else for(F=0;F<(this||Wa).length&&0>(this||Wa).words[F];F++)(this||Wa).words[F]+=67108864,--(this||Wa).words[F+1];return this.strip()};b.prototype.addn=function(F){return this.clone().iaddn(F)};b.prototype.subn=function(F){return this.clone().isubn(F)};b.prototype.iabs=function(){return(this||
Wa).negative=0,this||Wa};b.prototype.abs=function(){return this.clone().iabs()};b.prototype._ishlnsubmul=function(F,W,P){var S;this._expand(F.length+P);var fa=0;for(S=0;S<F.length;S++){var aa=(0|(this||Wa).words[S+P])+fa;fa=(0|F.words[S])*W;fa=((aa-=67108863&fa)>>26)-(fa/67108864|0);(this||Wa).words[S+P]=67108863&aa}for(;S<(this||Wa).length-P;S++)fa=(aa=(0|(this||Wa).words[S+P])+fa)>>26,(this||Wa).words[S+P]=67108863&aa;if(0===fa)return this.strip();d(-1===fa);for(S=fa=0;S<(this||Wa).length;S++)fa=
(aa=-(0|(this||Wa).words[S])+fa)>>26,(this||Wa).words[S]=67108863&aa;return(this||Wa).negative=1,this.strip()};b.prototype._wordDiv=function(F,W){var P=((this||Wa).length,F.length),S=this.clone(),fa=0|F.words[F.length-1];0!==(P=26-this._countBits(fa))&&(F=F.ushln(P),S.iushln(P),fa=0|F.words[F.length-1]);var aa,oa=S.length-F.length;if("mod"!==W){(aa=new b(null)).length=oa+1;aa.words=Array(aa.length);for(var Va=0;Va<aa.length;Va++)aa.words[Va]=0}Va=S.clone()._ishlnsubmul(F,1,oa);0===Va.negative&&(S=
Va,aa&&(aa.words[oa]=1));for(--oa;0<=oa;oa--){Va=67108864*(0|S.words[F.length+oa])+(0|S.words[F.length+oa-1]);Va=Math.min(Va/fa|0,67108863);for(S._ishlnsubmul(F,Va,oa);0!==S.negative;)Va--,S.negative=0,S._ishlnsubmul(F,1,oa),S.isZero()||(S.negative^=1);aa&&(aa.words[oa]=Va)}return aa&&aa.strip(),S.strip(),"div"!==W&&0!==P&&S.iushrn(P),{div:aa||null,mod:S}};b.prototype.divmod=function(F,W,P){return d(!F.isZero()),this.isZero()?{div:new b(0),mod:new b(0)}:0!==(this||Wa).negative&&0===F.negative?(aa=
this.neg().divmod(F,W),"mod"!==W&&(S=aa.div.neg()),"div"!==W&&(fa=aa.mod.neg(),P&&0!==fa.negative&&fa.iadd(F)),{div:S,mod:fa}):0===(this||Wa).negative&&0!==F.negative?(aa=this.divmod(F.neg(),W),"mod"!==W&&(S=aa.div.neg()),{div:S,mod:aa.mod}):0!=((this||Wa).negative&F.negative)?(aa=this.neg().divmod(F.neg(),W),"div"!==W&&(fa=aa.mod.neg(),P&&0!==fa.negative&&fa.isub(F)),{div:aa.div,mod:fa}):F.length>(this||Wa).length||0>this.cmp(F)?{div:new b(0),mod:this||Wa}:1===F.length?"div"===W?{div:this.divn(F.words[0]),
mod:null}:"mod"===W?{div:null,mod:new b(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new b(this.modn(F.words[0]))}:this._wordDiv(F,W);var S,fa,aa};b.prototype.div=function(F){return this.divmod(F,"div",!1).div};b.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod};b.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod};b.prototype.divRound=function(F){var W=this.divmod(F);if(W.mod.isZero())return W.div;var P=0!==W.div.negative?W.mod.isub(F):W.mod,S=F.ushrn(1);F=F.andln(1);
P=P.cmp(S);return 0>P||1===F&&0===P?W.div:0!==W.div.negative?W.div.isubn(1):W.div.iaddn(1)};b.prototype.modn=function(F){d(67108863>=F);for(var W=67108864%F,P=0,S=(this||Wa).length-1;0<=S;S--)P=(W*P+(0|(this||Wa).words[S]))%F;return P};b.prototype.idivn=function(F){d(67108863>=F);for(var W=0,P=(this||Wa).length-1;0<=P;P--)W=(0|(this||Wa).words[P])+67108864*W,(this||Wa).words[P]=W/F|0,W%=F;return this.strip()};b.prototype.divn=function(F){return this.clone().idivn(F)};b.prototype.egcd=function(F){d(0===
F.negative);d(!F.isZero());var W=this||Wa,P=F.clone();W=0!==W.negative?W.umod(F):W.clone();F=new b(1);for(var S=new b(0),fa=new b(0),aa=new b(1),oa=0;W.isEven()&&P.isEven();)W.iushrn(1),P.iushrn(1),++oa;for(var Va=P.clone(),lb=W.clone();!W.isZero();){for(var qa=0,ja=1;0==(W.words[0]&ja)&&26>qa;++qa,ja<<=1);if(0<qa)for(W.iushrn(qa);0<qa--;)(F.isOdd()||S.isOdd())&&(F.iadd(Va),S.isub(lb)),F.iushrn(1),S.iushrn(1);qa=0;for(ja=1;0==(P.words[0]&ja)&&26>qa;++qa,ja<<=1);if(0<qa)for(P.iushrn(qa);0<qa--;)(fa.isOdd()||
aa.isOdd())&&(fa.iadd(Va),aa.isub(lb)),fa.iushrn(1),aa.iushrn(1);0<=W.cmp(P)?(W.isub(P),F.isub(fa),S.isub(aa)):(P.isub(W),fa.isub(F),aa.isub(S))}return{a:fa,b:aa,gcd:P.iushln(oa)}};b.prototype._invmp=function(F){d(0===F.negative);d(!F.isZero());var W=this||Wa,P=F.clone();W=0!==W.negative?W.umod(F):W.clone();for(var S,fa=new b(1),aa=new b(0),oa=P.clone();0<W.cmpn(1)&&0<P.cmpn(1);){for(var Va=0,lb=1;0==(W.words[0]&lb)&&26>Va;++Va,lb<<=1);if(0<Va)for(W.iushrn(Va);0<Va--;)fa.isOdd()&&fa.iadd(oa),fa.iushrn(1);
Va=0;for(lb=1;0==(P.words[0]&lb)&&26>Va;++Va,lb<<=1);if(0<Va)for(P.iushrn(Va);0<Va--;)aa.isOdd()&&aa.iadd(oa),aa.iushrn(1);0<=W.cmp(P)?(W.isub(P),fa.isub(aa)):(P.isub(W),aa.isub(fa))}return 0>(S=0===W.cmpn(1)?fa:aa).cmpn(0)&&S.iadd(F),S};b.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var W=this.clone();F=F.clone();W.negative=0;for(var P=F.negative=0;W.isEven()&&F.isEven();P++)W.iushrn(1),F.iushrn(1);for(;;){for(;W.isEven();)W.iushrn(1);for(;F.isEven();)F.iushrn(1);
var S=W.cmp(F);if(0>S)S=W,W=F,F=S;else if(0===S||0===F.cmpn(1))break;W.isub(F)}return F.iushln(P)};b.prototype.invm=function(F){return this.egcd(F).a.umod(F)};b.prototype.isEven=function(){return 0==(1&(this||Wa).words[0])};b.prototype.isOdd=function(){return 1==(1&(this||Wa).words[0])};b.prototype.andln=function(F){return(this||Wa).words[0]&F};b.prototype.bincn=function(F){d("number"==typeof F);var W=F%26;F=(F-W)/26;W=1<<W;if((this||Wa).length<=F)return this._expand(F+1),(this||Wa).words[F]|=W,this||
Wa;for(;0!==W&&F<(this||Wa).length;F++){var P=0|(this||Wa).words[F];W=(P+=W)>>>26;P&=67108863;(this||Wa).words[F]=P}return 0!==W&&((this||Wa).words[F]=W,(this||Wa).length++),this||Wa};b.prototype.isZero=function(){return 1===(this||Wa).length&&0===(this||Wa).words[0]};b.prototype.cmpn=function(F){var W=0>F;if(0!==(this||Wa).negative&&!W)return-1;if(0===(this||Wa).negative&&W)return 1;(this.strip(),1<(this||Wa).length)?F=1:(W&&(F=-F),d(67108863>=F,"Number is too big"),W=0|(this||Wa).words[0],F=W===
F?0:W<F?-1:1);return 0!==(this||Wa).negative?0|-F:F};b.prototype.cmp=function(F){if(0!==(this||Wa).negative&&0===F.negative)return-1;if(0===(this||Wa).negative&&0!==F.negative)return 1;F=this.ucmp(F);return 0!==(this||Wa).negative?0|-F:F};b.prototype.ucmp=function(F){if((this||Wa).length>F.length)return 1;if((this||Wa).length<F.length)return-1;for(var W=0,P=(this||Wa).length-1;0<=P;P--){var S=0|(this||Wa).words[P],fa=0|F.words[P];if(S!==fa){S<fa?W=-1:S>fa&&(W=1);break}}return W};b.prototype.gtn=function(F){return 1===
this.cmpn(F)};b.prototype.gt=function(F){return 1===this.cmp(F)};b.prototype.gten=function(F){return 0<=this.cmpn(F)};b.prototype.gte=function(F){return 0<=this.cmp(F)};b.prototype.ltn=function(F){return-1===this.cmpn(F)};b.prototype.lt=function(F){return-1===this.cmp(F)};b.prototype.lten=function(F){return 0>=this.cmpn(F)};b.prototype.lte=function(F){return 0>=this.cmp(F)};b.prototype.eqn=function(F){return 0===this.cmpn(F)};b.prototype.eq=function(F){return 0===this.cmp(F)};b.red=function(F){return new E(F)};
b.prototype.toRed=function(F){return d(!(this||Wa).red,"Already a number in reduction context"),d(0===(this||Wa).negative,"red works only with positives"),F.convertTo(this||Wa)._forceRed(F)};b.prototype.fromRed=function(){return d((this||Wa).red,"fromRed works only with numbers in reduction context"),(this||Wa).red.convertFrom(this||Wa)};b.prototype._forceRed=function(F){return(this||Wa).red=F,this||Wa};b.prototype.forceRed=function(F){return d(!(this||Wa).red,"Already a number in reduction context"),
this._forceRed(F)};b.prototype.redAdd=function(F){return d((this||Wa).red,"redAdd works only with red numbers"),(this||Wa).red.add(this||Wa,F)};b.prototype.redIAdd=function(F){return d((this||Wa).red,"redIAdd works only with red numbers"),(this||Wa).red.iadd(this||Wa,F)};b.prototype.redSub=function(F){return d((this||Wa).red,"redSub works only with red numbers"),(this||Wa).red.sub(this||Wa,F)};b.prototype.redISub=function(F){return d((this||Wa).red,"redISub works only with red numbers"),(this||Wa).red.isub(this||
Wa,F)};b.prototype.redShl=function(F){return d((this||Wa).red,"redShl works only with red numbers"),(this||Wa).red.shl(this||Wa,F)};b.prototype.redMul=function(F){return d((this||Wa).red,"redMul works only with red numbers"),(this||Wa).red._verify2(this||Wa,F),(this||Wa).red.mul(this||Wa,F)};b.prototype.redIMul=function(F){return d((this||Wa).red,"redMul works only with red numbers"),(this||Wa).red._verify2(this||Wa,F),(this||Wa).red.imul(this||Wa,F)};b.prototype.redSqr=function(){return d((this||
Wa).red,"redSqr works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.sqr(this||Wa)};b.prototype.redISqr=function(){return d((this||Wa).red,"redISqr works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.isqr(this||Wa)};b.prototype.redSqrt=function(){return d((this||Wa).red,"redSqrt works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.sqrt(this||Wa)};b.prototype.redInvm=function(){return d((this||Wa).red,"redInvm works only with red numbers"),
(this||Wa).red._verify1(this||Wa),(this||Wa).red.invm(this||Wa)};b.prototype.redNeg=function(){return d((this||Wa).red,"redNeg works only with red numbers"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.neg(this||Wa)};b.prototype.redPow=function(F){return d((this||Wa).red&&!F.red,"redPow(normalNum)"),(this||Wa).red._verify1(this||Wa),(this||Wa).red.pow(this||Wa,F)};var Ba={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var F=new b(null);return F.words=Array(Math.ceil((this||
Wa).n/13)),F};u.prototype.ireduce=function(F){do{this.split(F,(this||Wa).tmp);var W=(F=(F=this.imulK(F)).iadd((this||Wa).tmp)).bitLength()}while(W>(this||Wa).n);W=W<(this||Wa).n?-1:F.ucmp((this||Wa).p);return 0===W?(F.words[0]=0,F.length=1):0<W?F.isub((this||Wa).p):F.strip(),F};u.prototype.split=function(F,W){F.iushrn((this||Wa).n,0,W)};u.prototype.imulK=function(F){return F.imul((this||Wa).k)};k(w,u);w.prototype.split=function(F,W){for(var P=Math.min(F.length,9),S=0;S<P;S++)W.words[S]=F.words[S];
if(W.length=P,9>=F.length)return F.words[0]=0,F.length=1,void 0;P=F.words[9];W.words[W.length++]=4194303&P;for(S=10;S<F.length;S++)W=0|F.words[S],F.words[S-10]=(4194303&W)<<4|P>>>22,P=W;P>>>=22;F.words[S-10]=P;0===P&&10<F.length?F.length-=10:F.length-=9};w.prototype.imulK=function(F){F.words[F.length]=0;F.words[F.length+1]=0;F.length+=2;for(var W=0,P=0;P<F.length;P++){var S=0|F.words[P];W+=977*S;F.words[P]=67108863&W;W=64*S+(W/67108864|0)}return 0===F.words[F.length-1]&&(F.length--,0===F.words[F.length-
1]&&F.length--),F};k(y,u);k(A,u);k(C,u);C.prototype.imulK=function(F){for(var W=0,P=0;P<F.length;P++){W=19*(0|F.words[P])+W;var S=67108863&W;W>>>=26;F.words[P]=S}return 0!==W&&(F.words[F.length++]=W),F};b._prime=function(F){if(Ba[F])return Ba[F];if("k256"===F)var W=new w;else if("p224"===F)W=new y;else if("p192"===F)W=new A;else{if("p25519"!==F)throw Error("Unknown prime "+F);W=new C}return Ba[F]=W,W};E.prototype._verify1=function(F){d(0===F.negative,"red works only with positives");d(F.red,"red works only with red numbers")};
E.prototype._verify2=function(F,W){d(0==(F.negative|W.negative),"red works only with positives");d(F.red&&F.red===W.red,"red works only with red numbers")};E.prototype.imod=function(F){return(this||Wa).prime?(this||Wa).prime.ireduce(F)._forceRed(this||Wa):F.umod((this||Wa).m)._forceRed(this||Wa)};E.prototype.neg=function(F){return F.isZero()?F.clone():(this||Wa).m.sub(F)._forceRed(this||Wa)};E.prototype.add=function(F,W){this._verify2(F,W);F=F.add(W);return 0<=F.cmp((this||Wa).m)&&F.isub((this||Wa).m),
F._forceRed(this||Wa)};E.prototype.iadd=function(F,W){this._verify2(F,W);F=F.iadd(W);return 0<=F.cmp((this||Wa).m)&&F.isub((this||Wa).m),F};E.prototype.sub=function(F,W){this._verify2(F,W);F=F.sub(W);return 0>F.cmpn(0)&&F.iadd((this||Wa).m),F._forceRed(this||Wa)};E.prototype.isub=function(F,W){this._verify2(F,W);F=F.isub(W);return 0>F.cmpn(0)&&F.iadd((this||Wa).m),F};E.prototype.shl=function(F,W){return this._verify1(F),this.imod(F.ushln(W))};E.prototype.imul=function(F,W){return this._verify2(F,
W),this.imod(F.imul(W))};E.prototype.mul=function(F,W){return this._verify2(F,W),this.imod(F.mul(W))};E.prototype.isqr=function(F){return this.imul(F,F.clone())};E.prototype.sqr=function(F){return this.mul(F,F)};E.prototype.sqrt=function(F){if(F.isZero())return F.clone();var W=(this||Wa).m.andln(3);if(d(1==W%2),3===W)return W=(this||Wa).m.add(new b(1)).iushrn(2),this.pow(F,W);for(var P=(this||Wa).m.subn(1),S=0;!P.isZero()&&0===P.andln(1);)S++,P.iushrn(1);d(!P.isZero());W=(new b(1)).toRed(this||Wa);
var fa=W.redNeg(),aa=(this||Wa).m.subn(1).iushrn(1),oa=(this||Wa).m.bitLength();for(oa=(new b(2*oa*oa)).toRed(this||Wa);0!==this.pow(oa,aa).cmp(fa);)oa.redIAdd(fa);aa=this.pow(oa,P);fa=this.pow(F,P.addn(1).iushrn(1));F=this.pow(F,P);for(P=S;0!==F.cmp(W);){oa=F;for(S=0;0!==oa.cmp(W);S++)oa=oa.redSqr();d(S<P);aa=this.pow(aa,(new b(1)).iushln(P-S-1));fa=fa.redMul(aa);aa=aa.redSqr();F=F.redMul(aa);P=S}return fa};E.prototype.invm=function(F){F=F._invmp((this||Wa).m);return 0!==F.negative?(F.negative=0,
this.imod(F).redNeg()):this.imod(F)};E.prototype.pow=function(F,W){if(W.isZero())return(new b(1)).toRed(this||Wa);if(0===W.cmpn(1))return F.clone();var P=Array(16);P[0]=(new b(1)).toRed(this||Wa);P[1]=F;for(var S=2;S<P.length;S++)P[S]=this.mul(P[S-1],F);F=P[0];var fa=0,aa=0,oa=W.bitLength()%26;0===oa&&(oa=26);for(S=W.length-1;0<=S;S--){var Va=W.words[S];for(--oa;0<=oa;oa--){var lb=Va>>oa&1;F!==P[0]&&(F=this.sqr(F));0!==lb||0!==fa?(fa<<=1,fa|=lb,(4===++aa||0===S&&0===oa)&&(F=this.mul(F,P[fa]),aa=0,
fa=0)):aa=0}oa=26}return F};E.prototype.convertTo=function(F){var W=F.umod((this||Wa).m);return W===F?W.clone():W};E.prototype.convertFrom=function(F){F=F.clone();return F.red=null,F};b.mont=function(F){return new L(F)};k(L,E);L.prototype.convertTo=function(F){return this.imod(F.ushln((this||Wa).shift))};L.prototype.convertFrom=function(F){F=this.imod(F.mul((this||Wa).rinv));return F.red=null,F};L.prototype.imul=function(F,W){if(F.isZero()||W.isZero())return F.words[0]=0,F.length=1,F;F=F.imul(W);
W=F.maskn((this||Wa).shift).mul((this||Wa).minv).imaskn((this||Wa).shift).mul((this||Wa).m);W=F=F.isub(W).iushrn((this||Wa).shift);return 0<=F.cmp((this||Wa).m)?W=F.isub((this||Wa).m):0>F.cmpn(0)&&(W=F.iadd((this||Wa).m)),W._forceRed(this||Wa)};L.prototype.mul=function(F,W){if(F.isZero()||W.isZero())return(new b(0))._forceRed(this||Wa);F=F.mul(W);W=F.maskn((this||Wa).shift).mul((this||Wa).minv).imaskn((this||Wa).shift).mul((this||Wa).m);W=F=F.isub(W).iushrn((this||Wa).shift);return 0<=F.cmp((this||
Wa).m)?W=F.isub((this||Wa).m):0>F.cmpn(0)&&(W=F.iadd((this||Wa).m)),W._forceRed(this||Wa)};L.prototype.invm=function(F){return this.imod(F._invmp((this||Wa).m).mul((this||Wa).r2))._forceRed(this||Wa)}}($3,Z3);var Lj=$3.exports,tI,CQ,a4=Object.freeze({}),KE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((tI=function(n){return CQ||(CQ=new zr(null)),CQ.generate(n)}).Rand=zr,zr.prototype.generate=function(n){return this._rand(n)},zr.prototype._rand=function(n){if((this||
KE).rand.getBytes)return(this||KE).rand.getBytes(n);n=new Uint8Array(n);for(var a=0;a<n.length;a++)n[a]=(this||KE).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?zr.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?zr.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(zr.prototype._rand=function(){throw Error("Not implemented yet");
});else try{if("function"!=typeof a4.randomBytes)throw Error("Not supported");zr.prototype._rand=function(n){return a4.randomBytes(n)}}catch(n){}var KX="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Fu=Lj,qaa=tI;Ar.create=function(n){return new Ar(n)};Ar.prototype._randbelow=function(n){var a=n.bitLength();a=Math.ceil(a/8);do var d=new Fu((this||KX).rand.generate(a));while(0<=d.cmp(n));return d};Ar.prototype._randrange=function(n,a){a=a.sub(n);return n.add(this._randbelow(a))};
Ar.prototype.test=function(n,a,d){var k=n.bitLength(),b=Fu.mont(n),e=(new Fu(1)).toRed(b);a||(a=Math.max(1,k/48|0));k=n.subn(1);for(var l=0;!k.testn(l);l++);n=n.shrn(l);for(var p=k.toRed(b);0<a;a--){var q=this._randrange(new Fu(2),k);d&&d(q);q=q.toRed(b).redPow(n);if(0!==q.cmp(e)&&0!==q.cmp(p)){for(var u=1;u<l;u++){if(0===(q=q.redSqr()).cmp(e))return!1;if(0===q.cmp(p))break}if(u===l)return!1}}return!0};Ar.prototype.getDivisor=function(n,a){var d=n.bitLength(),k=Fu.mont(n),b=(new Fu(1)).toRed(k);a||
(a=Math.max(1,d/48|0));d=n.subn(1);for(var e=0;!d.testn(e);e++);for(var l=n.shrn(e),p=d.toRed(k);0<a;a--){var q=this._randrange(new Fu(2),d),u=n.gcd(q);if(0!==u.cmpn(1))return u;q=q.toRed(k).redPow(l);if(0!==q.cmp(b)&&0!==q.cmp(p)){for(u=1;u<e;u++){if(0===(q=q.redSqr()).cmp(b))return q.fromRed().subn(1).gcd(n);if(0===q.cmp(p))break}if(u===e)return q.redSqr().fromRed().subn(1).gcd(n)}}return!1};var raa=fs;Dz.simpleSieve=rM;Dz.fermatTest=tM;var rl=Lj,waa=new rl(24),MX=new Ar,saa=new rl(1),uM=new rl(2),
taa=new rl(5),uaa=(new rl(16),new rl(8),new rl(10)),vaa=new rl(3),xaa=(new rl(7),new rl(11)),LX=new rl(4),sM=(new rl(12),null),Ih="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Zo=Eg.Buffer,fn=Lj,b4=new Ar,Gja=new fn(24),Hja=new fn(11),Ija=new fn(10),Jja=new fn(3),Kja=new fn(7),uI={};Object.defineProperty(ao.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||Ih)._primeCode){var n=(this||Ih).__prime;var a=(this||Ih).__gen.toString("hex"),
d=[a,n.toString(16)].join("_");if(d in uI)n=uI[d];else{var k,b=0;if(!n.isEven()&&Dz.simpleSieve&&Dz.fermatTest(n)&&b4.test(n)){switch(b4.test(n.shrn(1))||(b+=2),a){case "02":n.mod(Gja).cmp(Hja)&&(b+=8);break;case "05":(k=n.mod(Ija)).cmp(Jja)&&k.cmp(Kja)&&(b+=8);break;default:b+=4}n=(uI[d]=b,b)}else n=(b+=1,b+="02"===a||"05"===a?8:4,uI[d]=b,b)}(this||Ih)._primeCode=n}return(this||Ih)._primeCode}});ao.prototype.generateKeys=function(){return(this||Ih)._priv||((this||Ih)._priv=new fn(fs((this||Ih)._primeLen))),
(this||Ih)._pub=(this||Ih)._gen.toRed((this||Ih)._prime).redPow((this||Ih)._priv).fromRed(),this.getPublicKey()};ao.prototype.computeSecret=function(n){n=(new fn(n)).toRed((this||Ih)._prime).redPow((this||Ih)._priv).fromRed();n=new Zo(n.toArray());var a=this.getPrime();n.length<a.length&&(a=new Zo(a.length-n.length),a.fill(0),n=Zo.concat([a,n]));return n};ao.prototype.getPublicKey=function(n){return LE((this||Ih)._pub,n)};ao.prototype.getPrivateKey=function(n){return LE((this||Ih)._priv,n)};ao.prototype.getPrime=
function(n){return LE((this||Ih).__prime,n)};ao.prototype.getGenerator=function(n){return LE((this||Ih)._gen,n)};ao.prototype.setGenerator=function(n,a){return a=a||"utf8",Zo.isBuffer(n)||(n=new Zo(n,a)),(this||Ih).__gen=n,(this||Ih)._gen=new fn(n),this||Ih};var c4,d4,e4,is=Eg.Buffer,f4={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Lja={binary:!0,hex:!0,base64:!0};var Mja=c4=d4=function(n){var a=new is(f4[n].prime,"hex");n=new is(f4[n].gen,"hex");return new ao(a,n)};var Nja=e4=function e(a,d,k,b){return is.isBuffer(d)||void 0===Lja[d]?e(a,"binary",d,k):(d=d||"binary",b=b||"binary",k=k||new is([2]),is.isBuffer(k)||(k=new is(k,b)),"number"==typeof a?new ao(Dz(a,k),k,!0):(is.isBuffer(a)||(a=new is(a,d)),new ao(a,k,!0)))};var Aaa=Eg.Buffer,Br=Lj,OX=fs;ME.getr=NX;var js={toArray:function(a,d){if(Array.isArray(a))return a.slice();
if(!a)return[];var k=[];if("string"!=typeof a){for(d=0;d<a.length;d++)k[d]=0|a[d];return k}if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),d=0;d<a.length;d+=2)k.push(parseInt(a[d]+a[d+1],16));else for(d=0;d<a.length;d++){var b=a.charCodeAt(d),e=b>>8;b&=255;e?k.push(e,b):k.push(b)}return k}};js.zero2=PX;js.toHex=QX;js.encode=function(a,d){return"hex"===d?QX(a):a};var $g={},Oja=Lj;$g.assert=mn;$g.toArray=js.toArray;$g.zero2=js.zero2;$g.toHex=js.toHex;$g.encode=js.encode;$g.getNAF=
function(a,d,k){k=Array(Math.max(a.bitLength(),k)+1);k.fill(0);d=1<<d+1;a=a.clone();for(var b=0;b<k.length;b++){var e,l=a.andln(d-1);a.isOdd()?(e=l>(d>>1)-1?(d>>1)-l:l,a.isubn(e)):e=0;k[b]=e;a.iushrn(1)}return k};$g.getJSF=function(a,d){var k=[[],[]];a=a.clone();d=d.clone();for(var b=0,e=0;0<a.cmpn(-b)||0<d.cmpn(-e);){var l;var p=a.andln(3)+b&3;var q=d.andln(3)+e&3;var u=(3===p&&(p=-1),3===q&&(q=-1),0==(1&p))?0:3!==(l=a.andln(7)+b&7)&&5!==l||2!==q?p:-p;p=(k[0].push(u),0==(1&q))?0:3!==(l=d.andln(7)+
e&7)&&5!==l||2!==p?q:-q;k[1].push(p);2*b===u+1&&(b=1-b);2*e===p+1&&(e=1-e);a.iushrn(1);d.iushrn(1)}return k};$g.cachedProperty=function(a,d,k){var b="_"+d;a.prototype[d]=function(){return void 0!==this[b]?this[b]:this[b]=k.call(this)}};$g.parseBytes=function(a){return"string"==typeof a?$g.toArray(a,"hex"):a};$g.intFromLE=function(a){return new Oja(a,"hex","le")};var NE=Lj,Baa=$g.assert;Pt.prototype._importDER=function(a,d){a=$g.toArray(a,d);var k=new Caa;if(48!==a[k.place++]||vM(a,k)+k.place!==a.length||
2!==a[k.place++])return!1;var b=vM(a,k);d=a.slice(k.place,b+k.place);if(k.place+=b,2!==a[k.place++])return!1;b=vM(a,k);if(a.length!==b+k.place)return!1;a=a.slice(k.place,b+k.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===a[0]&&128&a[1]&&(a=a.slice(1)),this.r=new NE(d),this.s=new NE(a),this.recoveryParam=null,!0};Pt.prototype.toDER=function(a){var d=this.r.toArray(),k=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&k[0]&&(k=[0].concat(k));d=RX(d);for(k=RX(k);!(k[0]||128&k[1]);)k=k.slice(1);
var b=[2];wM(b,d.length);(b=b.concat(d)).push(2);wM(b,k.length);d=b.concat(k);k=[48];return wM(k,d.length),k=k.concat(d),$g.encode(k,a)};var Ve={},Pja=mn;Ve.inherits=Ng;Ve.toArray=function(a,d){if(Array.isArray(a))return a.slice();if(!a)return[];var k=[];if("string"==typeof a)if(d){if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),b=0;b<a.length;b+=2)k.push(parseInt(a[b]+a[b+1],16))}else for(var b=d=0;b<a.length;b++){var e=a.charCodeAt(b);if(128>e)k[d++]=e;else if(2048>e)k[d++]=
e>>6|192,k[d++]=63&e|128;else{var l=a,p=b;55296!=(64512&l.charCodeAt(p))||0>p||p+1>=l.length||56320!=(64512&l.charCodeAt(p+1))?(k[d++]=e>>12|224,k[d++]=e>>6&63|128,k[d++]=63&e|128):(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++b)),k[d++]=e>>18|240,k[d++]=e>>12&63|128,k[d++]=e>>6&63|128,k[d++]=63&e|128)}}else for(b=0;b<a.length;b++)k[b]=0|a[b];return k};Ve.toHex=function(a){for(var d="",k=0;k<a.length;k++)d+=TX(a[k].toString(16));return d};Ve.htonl=SX;Ve.toHex32=function(a,d){for(var k="",b=0;b<a.length;b++){var e=
a[b];"little"===d&&(e=SX(e));k+=UX(e.toString(16))}return k};Ve.zero2=TX;Ve.zero8=UX;Ve.join32=function(a,d,k,b){k-=d;Pja(0==k%4);k=Array(k/4);for(var e=0;e<k.length;e++,d+=4)k[e]=("big"===b?a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3]:a[d+3]<<24|a[d+2]<<16|a[d+1]<<8|a[d])>>>0;return k};Ve.split32=function(a,d){for(var k=Array(4*a.length),b=0,e=0;b<a.length;b++,e+=4){var l=a[b];"big"===d?(k[e]=l>>>24,k[e+1]=l>>>16&255,k[e+2]=l>>>8&255,k[e+3]=255&l):(k[e+3]=l>>>24,k[e+2]=l>>>16&255,k[e+1]=l>>>8&255,k[e]=255&
l)}return k};Ve.rotr32=function(a,d){return a>>>d|a<<32-d};Ve.rotl32=function(a,d){return a<<d|a>>>32-d};Ve.sum32=function(a,d){return a+d>>>0};Ve.sum32_3=function(a,d,k){return a+d+k>>>0};Ve.sum32_4=function(a,d,k,b){return a+d+k+b>>>0};Ve.sum32_5=function(a,d,k,b,e){return a+d+k+b+e>>>0};Ve.sum64=function(a,d,k,b){var e=b+a[d+1]>>>0;a[d]=(e<b?1:0)+k+a[d]>>>0;a[d+1]=e};Ve.sum64_hi=function(a,d,k,b){return(d+b>>>0<d?1:0)+a+k>>>0};Ve.sum64_lo=function(a,d,k,b){return d+b>>>0};Ve.sum64_4_hi=function(a,
d,k,b,e,l,p,q){var u=0,w=d;return u+=(w=w+b>>>0)<d?1:0,u+=(w=w+l>>>0)<l?1:0,a+k+e+p+(u+(w+q>>>0<q?1:0))>>>0};Ve.sum64_4_lo=function(a,d,k,b,e,l,p,q){return d+b+l+q>>>0};Ve.sum64_5_hi=function(a,d,k,b,e,l,p,q,u,w){var y=0,A=d;return y+=(A=A+b>>>0)<d?1:0,y+=(A=A+l>>>0)<l?1:0,y+=(A=A+q>>>0)<q?1:0,a+k+e+p+u+(y+(A+w>>>0<w?1:0))>>>0};Ve.sum64_5_lo=function(a,d,k,b,e,l,p,q,u,w){return d+b+l+q+w>>>0};Ve.rotr64_hi=function(a,d,k){return(d<<32-k|a>>>k)>>>0};Ve.rotr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>
0};Ve.shr64_hi=function(a,d,k){return a>>>k};Ve.shr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>0};var Dx={},Qja=mn;Dx.BlockHash=OE;OE.prototype.update=function(a,d){if(a=Ve.toArray(a,d),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8)for(d=(a=this.pending).length%this._delta8,this.pending=a.slice(a.length-d,a.length),0===this.pending.length&&(this.pending=null),a=Ve.join32(a,0,a.length-d,this.endian),d=0;d<a.length;d+=
this._delta32)this._update(a,d,d+this._delta32);return this};OE.prototype.digest=function(a){return this.update(this._pad()),Qja(null===this.pending),this._digest(a)};OE.prototype._pad=function(){var a=this.pendingTotal,d=this._delta8,k=d-(a+this.padLength)%d;d=Array(k+this.padLength);d[0]=128;for(var b=1;b<k;b++)d[b]=0;if(a<<=3,"big"===this.endian){for(k=8;k<this.padLength;k++)d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=a>>>24&255;d[b++]=a>>>16&255;d[b++]=a>>>8&255;d[b++]=255&a}else for(d[b++]=
255&a,d[b++]=a>>>8&255,d[b++]=a>>>16&255,d[b++]=a>>>24&255,d[b++]=0,d[b++]=0,d[b++]=0,d[b++]=0,k=8;k<this.padLength;k++)d[b++]=0;return d};var Rja=mn,Ap=Ve.rotr64_hi,Bp=Ve.rotr64_lo,g4=Ve.shr64_hi,h4=Ve.shr64_lo,ks=Ve.sum64,DQ=Ve.sum64_hi,EQ=Ve.sum64_lo,Sja=Ve.sum64_4_hi,Tja=Ve.sum64_4_lo,Uja=Ve.sum64_5_hi,Vja=Ve.sum64_5_lo,VX=Dx.BlockHash,Daa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];Ve.inherits(gn,VX);gn.blockSize=1024;gn.outSize=512;gn.hmacStrength=192;gn.padLength=128;gn.prototype._prepareBlock=function(a,d){for(var k=this.W,b=0;32>b;b++)k[b]=a[d+b];for(;b<k.length;b+=2){a=k[b-4];d=k[b-3];d=Ap(a,d,19)^Ap(d,a,29)^g4(a,d,6);a=(0>d&&(d+=4294967296),d);d=k[b-4];var e=k[b-3];e=Bp(d,e,19)^Bp(e,d,29)^h4(d,e,6);d=(0>e&&(e+=4294967296),e);e=k[b-14];var l=k[b-13];var p=k[b-30];var q=k[b-29];q=Ap(p,q,1)^Ap(p,q,8)^g4(p,q,7);p=(0>q&&(q+=4294967296),
q);q=k[b-30];var u=k[b-29];u=Bp(q,u,1)^Bp(q,u,8)^h4(q,u,7);q=(0>u&&(u+=4294967296),u);u=k[b-32];var w=k[b-31];k[b]=Sja(a,d,e,l,p,q,u,w);k[b+1]=Tja(a,d,e,l,p,q,u,w)}};gn.prototype._update=function(a,d){this._prepareBlock(a,d);a=this.W;d=this.h[0];var k=this.h[1],b=this.h[2],e=this.h[3],l=this.h[4],p=this.h[5],q=this.h[6],u=this.h[7],w=this.h[8],y=this.h[9],A=this.h[10],C=this.h[11],E=this.h[12],L=this.h[13],I=this.h[14],V=this.h[15];Rja(this.k.length===a.length);for(var T=0;T<a.length;T+=2){var Y=
w;var na=y;Y=Ap(Y,na,14)^Ap(Y,na,18)^Ap(na,Y,9);na=(0>Y&&(Y+=4294967296),Y);Y=w;var Ba=y;Y=Bp(Y,Ba,14)^Bp(Y,Ba,18)^Bp(Ba,Y,9);var F=(0>Y&&(Y+=4294967296),Y);Y=w&A^~w&E;Ba=(0>Y&&(Y+=4294967296),Y);Y=y&C^~y&L;var W=(0>Y&&(Y+=4294967296),Y);var P=this.k[T],S=this.k[T+1],fa=a[T],aa=a[T+1];Y=Uja(I,V,na,F,Ba,W,P,S,fa,aa);Ba=Vja(I,V,na,F,Ba,W,P,S,fa,aa);I=d;V=k;V=Ap(I,V,28)^Ap(V,I,2)^Ap(V,I,7);I=(0>V&&(V+=4294967296),V);V=d;na=k;na=Bp(V,na,28)^Bp(na,V,2)^Bp(na,V,7);V=(0>na&&(na+=4294967296),na);F=d&b^d&
l^b&l;na=(0>F&&(F+=4294967296),F);W=k&e^k&p^e&p;F=(0>W&&(W+=4294967296),W);W=DQ(I,V,na,F);na=EQ(I,V,na,F);I=E;V=L;E=A;L=C;A=w;C=y;w=DQ(q,u,Y,Ba);y=EQ(u,u,Y,Ba);q=l;u=p;l=b;p=e;b=d;e=k;d=DQ(Y,Ba,W,na);k=EQ(Y,Ba,W,na)}ks(this.h,0,d,k);ks(this.h,2,b,e);ks(this.h,4,l,p);ks(this.h,6,q,u);ks(this.h,8,w,y);ks(this.h,10,A,C);ks(this.h,12,E,L);ks(this.h,14,I,V)};gn.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h,"big"):Ve.split32(this.h,"big")};var Cp=Ve.rotr32,Wja=mn,xo=Ve.sum32,Xja=Ve.sum32_4,
Yja=Ve.sum32_5,WX=Dx.BlockHash,Eaa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Ve.inherits(bo,WX);bo.blockSize=512;bo.outSize=256;bo.hmacStrength=192;bo.padLength=64;bo.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+b];for(;b<k.length;b++){a=b;d=k[b-2];d=Cp(d,17)^Cp(d,19)^d>>>10;var e=k[b-7];var l=k[b-15];l=Cp(l,7)^Cp(l,18)^l>>>3;k[a]=Xja(d,
e,l,k[b-16])}a=this.h[0];d=this.h[1];e=this.h[2];l=this.h[3];var p=this.h[4],q=this.h[5],u=this.h[6],w=this.h[7];Wja(this.k.length===k.length);for(b=0;b<k.length;b++){var y=w;w=p;w=Cp(w,6)^Cp(w,11)^Cp(w,25);y=Yja(y,w,p&q^~p&u,this.k[b],k[b]);w=a;w=Cp(w,2)^Cp(w,13)^Cp(w,22);var A=xo(w,a&d^a&e^d&e);w=u;u=q;q=p;p=xo(l,y);l=e;e=d;d=a;a=xo(y,A)}this.h[0]=xo(this.h[0],a);this.h[1]=xo(this.h[1],d);this.h[2]=xo(this.h[2],e);this.h[3]=xo(this.h[3],l);this.h[4]=xo(this.h[4],p);this.h[5]=xo(this.h[5],q);this.h[6]=
xo(this.h[6],u);this.h[7]=xo(this.h[7],w)};bo.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h,"big"):Ve.split32(this.h,"big")};var FQ=Ve.rotl32,vB=Ve.sum32,Zja=Ve.sum32_5,XX=Dx.BlockHash,$ja=[1518500249,1859775393,2400959708,3395469782];Ve.inherits($o,XX);$o.blockSize=512;$o.outSize=160;$o.hmacStrength=80;$o.padLength=64;$o.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+b];for(;b<k.length;b++)k[b]=FQ(k[b-3]^k[b-8]^k[b-14]^k[b-16],1);a=this.h[0];d=this.h[1];
var e=this.h[2],l=this.h[3],p=this.h[4];for(b=0;b<k.length;b++){var q=~~(b/20);q=Zja(FQ(a,5),0===q?d&e^~d&l:1===q||3===q?d^e^l:2===q?d&e^d&l^e&l:void 0,p,k[b],$ja[q]);p=l;l=e;e=FQ(d,30);d=a;a=q}this.h[0]=vB(this.h[0],a);this.h[1]=vB(this.h[1],d);this.h[2]=vB(this.h[2],e);this.h[3]=vB(this.h[3],l);this.h[4]=vB(this.h[4],p)};$o.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h,"big"):Ve.split32(this.h,"big")};var YX=bo;Ve.inherits(jq,YX);jq.blockSize=512;jq.outSize=224;jq.hmacStrength=
192;jq.padLength=64;jq.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h.slice(0,7),"big"):Ve.split32(this.h.slice(0,7),"big")};var ZX=gn;Ve.inherits(kq,ZX);kq.blockSize=1024;kq.outSize=384;kq.hmacStrength=192;kq.padLength=128;kq.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h.slice(0,12),"big"):Ve.split32(this.h.slice(0,12),"big")};var Ex={};Ex.sha1=$o;Ex.sha224=jq;Ex.sha256=bo;Ex.sha384=kq;Ex.sha512=gn;var i4={},vI=Ve.rotl32,j4=Ve.sum32,wB=Ve.sum32_3,k4=Ve.sum32_4,
$X=Dx.BlockHash;Ve.inherits(ap,$X);i4.ripemd160=ap;ap.blockSize=512;ap.outSize=160;ap.hmacStrength=192;ap.padLength=64;ap.prototype._update=function(a,d){for(var k=this.h[0],b=this.h[1],e=this.h[2],l=this.h[3],p=this.h[4],q=k,u=b,w=e,y=l,A=p,C=0;80>C;C++){var E=j4(vI(k4(k,aY(C,b,e,l),a[aka[C]+d],15>=C?0:31>=C?1518500249:47>=C?1859775393:63>=C?2400959708:2840853838),bka[C]),p);k=p;p=l;l=vI(e,10);e=b;b=E;E=j4(vI(k4(q,aY(79-C,u,w,y),a[cka[C]+d],15>=C?1352829926:31>=C?1548603684:47>=C?1836072691:63>=
C?2053994217:0),dka[C]),A);q=A;A=y;y=vI(w,10);w=u;u=E}E=wB(this.h[1],e,y);this.h[1]=wB(this.h[2],l,A);this.h[2]=wB(this.h[3],p,q);this.h[3]=wB(this.h[4],k,u);this.h[4]=wB(this.h[0],b,w);this.h[0]=E};ap.prototype._digest=function(a){return"hex"===a?Ve.toHex32(this.h,"little"):Ve.split32(this.h,"little")};var aka=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,
13],cka=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],bka=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dka=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,
8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Faa=Ve,eka=mn;Ew.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest());eka(a.length<=this.blockSize);for(var d=a.length;d<this.blockSize;d++)a.push(0);for(d=0;d<a.length;d++)a[d]^=54;this.inner=(new this.Hash).update(a);for(d=0;d<a.length;d++)a[d]^=106;this.outer=(new this.Hash).update(a)};Ew.prototype.update=function(a,d){return this.inner.update(a,
d),this};Ew.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)};var Ri={};Ri.utils=Ve;Ri.common=Dx;Ri.sha=Ex;Ri.ripemd=i4;Ri.hmac=Ew;Ri.sha1=Ri.sha.sha1;Ri.sha256=Ri.sha.sha256;Ri.sha224=Ri.sha.sha224;Ri.sha384=Ri.sha.sha384;Ri.sha512=Ri.sha.sha512;Ri.ripemd160=Ri.ripemd.ripemd160;var Qt=js,bY=mn;lq.prototype._init=function(a,d,k){a=a.concat(d).concat(k);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=
1;this._update(a);this._reseed=1;this.reseedInterval=281474976710656};lq.prototype._hmac=function(){return new Ri.hmac(this.hash,this.K)};lq.prototype._update=function(a){var d=this._hmac().update(this.V).update([0]);a&&(d=d.update(a));this.K=d.digest();this.V=this._hmac().update(this.V).digest();a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())};lq.prototype.reseed=function(a,d,k,b){"string"!=typeof d&&(b=k,k=d,d=null);a=Qt.toArray(a,
d);k=Qt.toArray(k,b);bY(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(a.concat(k||[]));this._reseed=1};lq.prototype.generate=function(a,d,k,b){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(b=k,k=d,d=null);k&&(k=Qt.toArray(k,b||"hex"),this._update(k));for(b=[];b.length<a;)this.V=this._hmac().update(this.V).digest(),b=b.concat(this.V);a=b.slice(0,a);return this._update(k),this._reseed++,Qt.encode(a,d)};
var Rt=Lj,wI=$g.getNAF,fka=$g.getJSF,xI=$g.assert;co.prototype.point=function(){throw Error("Not implemented");};co.prototype.validate=function(){throw Error("Not implemented");};co.prototype._fixedNafMul=function(a,d){xI(a.precomputed);a=a._getDoubles();var k=wI(d,1,this._bitLength),b=(1<<a.step+1)-(0==a.step%2?2:1);b/=3;for(var e=[],l=0;l<k.length;l+=a.step){var p=0;for(d=l+a.step-1;d>=l;d--)p=(p<<1)+k[d];e.push(p)}d=this.jpoint(null,null,null);for(k=this.jpoint(null,null,null);0<b;b--){for(l=0;l<
e.length;l++)(p=e[l])===b?k=k.mixedAdd(a.points[l]):p===-b&&(k=k.mixedAdd(a.points[l].neg()));d=d.add(k)}return d.toP()};co.prototype._wnafMul=function(a,d){var k=a._getNAFPoints(4),b=k.points;k=wI(d,k.wnd,this._bitLength);for(var e=this.jpoint(null,null,null),l=k.length-1;0<=l;l--){for(d=0;0<=l&&0===k[l];l--)d++;if(0<=l&&d++,e=e.dblp(d),0>l)break;d=k[l];xI(0!==d);e="affine"===a.type?0<d?e.mixedAdd(b[d-1>>1]):e.mixedAdd(b[-d-1>>1].neg()):0<d?e.add(b[d-1>>1]):e.add(b[-d-1>>1].neg())}return"affine"===
a.type?e.toP():e};co.prototype._wnafMulAdd=function(a,d,k,b,e){for(var l=this._wnafT1,p=this._wnafT2,q=this._wnafT3,u=0,w=0;w<b;w++){var y=(I=d[w])._getNAFPoints(a);l[w]=y.wnd;p[w]=y.points}for(w=b-1;1<=w;w-=2){y=w-1;var A=w;if(1===l[y]&&1===l[A]){var C=[d[y],null,null,d[A]];0===d[y].y.cmp(d[A].y)?(C[1]=d[y].add(d[A]),C[2]=d[y].toJ().mixedAdd(d[A].neg())):0===d[y].y.cmp(d[A].y.redNeg())?(C[1]=d[y].toJ().mixedAdd(d[A]),C[2]=d[y].add(d[A].neg())):(C[1]=d[y].toJ().mixedAdd(d[A]),C[2]=d[y].toJ().mixedAdd(d[A].neg()));
var E=[-3,-1,-5,-7,0,7,5,1,3],L=fka(k[y],k[A]);u=Math.max(L[0].length,u);q[y]=Array(u);q[A]=Array(u);for(a=0;a<u;a++)q[y][a]=E[3*((0|L[0][a])+1)+((0|L[1][a])+1)],q[A][a]=0,p[y]=C}else q[y]=wI(k[y],l[y],this._bitLength),q[A]=wI(k[A],l[A],this._bitLength),u=Math.max(q[y].length,u),u=Math.max(q[A].length,u)}d=this.jpoint(null,null,null);k=this._wnafT4;for(w=u;0<=w;w--){for(u=0;0<=w;){l=!0;for(a=0;a<b;a++)k[a]=0|q[a][w],0!==k[a]&&(l=!1);if(!l)break;u++;w--}if(0<=w&&u++,d=d.dblp(u),0>w)break;for(a=0;a<
b;a++){var I;u=k[a];0!==u&&(0<u?I=p[a][u-1>>1]:0>u&&(I=p[a][-u-1>>1].neg()),d="affine"===I.type?d.mixedAdd(I):d.add(I))}}for(w=0;w<b;w++)p[w]=null;return e?d:d.toP()};co.BasePoint=hn;hn.prototype.eq=function(){throw Error("Not implemented");};hn.prototype.validate=function(){return this.curve.validate(this)};co.prototype.decodePoint=function(a,d){a=$g.toArray(a,d);d=this.p.byteLength();if((4===a[0]||6===a[0]||7===a[0])&&a.length-1==2*d)return 6===a[0]?xI(0==a[a.length-1]%2):7===a[0]&&xI(1==a[a.length-
1]%2),this.point(a.slice(1,1+d),a.slice(1+d,1+2*d));if((2===a[0]||3===a[0])&&a.length-1===d)return this.pointFromX(a.slice(1,1+d),3===a[0]);throw Error("Unknown point format");};hn.prototype.encodeCompressed=function(a){return this.encode(a,!0)};hn.prototype._encode=function(a){var d=this.curve.p.byteLength(),k=this.getX().toArray("be",d);return a?[this.getY().isEven()?2:3].concat(k):[4].concat(k,this.getY().toArray("be",d))};hn.prototype.encode=function(a,d){return $g.encode(this._encode(d),a)};
hn.prototype.precompute=function(a){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,a),d.beta=this._getBeta(),this.precomputed=d,this};hn.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((a.bitLength()+1)/d.step)};hn.prototype._getDoubles=function(a,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var k=[this],b=this,e=0;e<d;e+=a){for(var l=0;l<a;l++)b=b.dbl();k.push(b)}return{step:a,points:k}};hn.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],k=(1<<a)-1,b=1===k?null:this.dbl(),e=1;e<k;e++)d[e]=d[e-1].add(b);return{wnd:a,points:d}};hn.prototype._getBeta=function(){return null};hn.prototype.dblp=function(a){for(var d=this,k=0;k<a;k++)d=d.dbl();return d};var tj=Lj,GQ=Ng,Fw=co,gka=$g.assert;GQ(jn,Fw);jn.prototype._getEndomorphism=
function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(a.beta)var d=(new tj(a.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(a.lambda)var k=new tj(a.lambda,16);else{var b=this._getEndoRoots(this.n);0===this.g.mul(b[0]).x.cmp(this.g.x.redMul(d))?k=b[0]:(k=b[1],gka(0===this.g.mul(k).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:k,basis:a.basis?a.basis.map(function(e){return{a:new tj(e.a,16),b:new tj(e.b,16)}}):this._getEndoBasis(k)}}};
jn.prototype._getEndoRoots=function(a){var d=a===this.p?this.red:tj.mont(a),k=(new tj(2)).toRed(d).redInvm();a=k.redNeg();d=(new tj(3)).toRed(d).redNeg().redSqrt().redMul(k);return[a.redAdd(d).fromRed(),a.redSub(d).fromRed()]};jn.prototype._getEndoBasis=function(a){for(var d,k,b,e,l,p,q,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),w=this.n.clone(),y=new tj(1),A=new tj(0),C=new tj(0),E=new tj(1),L=0;0!==a.cmpn(0);){var I=w.div(a);q=w.sub(I.mul(a));p=C.sub(I.mul(y));I=E.sub(I.mul(A));if(!b&&0>q.cmp(u))d=
l.neg(),k=y,b=q.neg(),e=p;else if(b&&2==++L)break;l=q;w=a;a=q;C=y;y=p;E=A;A=I}l=q.neg();q=b.sqr().add(e.sqr());return 0<=l.sqr().add(p.sqr()).cmp(q)&&(l=d,p=k),b.negative&&(b=b.neg(),e=e.neg()),l.negative&&(l=l.neg(),p=p.neg()),[{a:b,b:e},{a:l,b:p}]};jn.prototype._endoSplit=function(a){var d=this.endo.basis,k=d[0],b=d[1],e=b.b.mul(a).divRound(this.n),l=k.b.neg().mul(a).divRound(this.n);d=e.mul(k.a);var p=l.mul(b.a);k=e.mul(k.b);b=l.mul(b.b);return{k1:a.sub(d).sub(p),k2:k.add(b).neg()}};jn.prototype.pointFromX=
function(a,d){(a=new tj(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr().redMul(a).redIAdd(a.redMul(this.a)).redIAdd(this.b),b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,b)};jn.prototype.validate=function(a){if(a.inf)return!0;var d=a.x;a=a.y;var k=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(k).redIAdd(this.b);return 0===a.redSqr().redISub(d).cmpn(0)};jn.prototype._endoWnafMulAdd=
function(a,d,k){for(var b=this._endoWnafT1,e=this._endoWnafT2,l=0;l<a.length;l++){var p=this._endoSplit(d[l]),q=a[l],u=q._getBeta();p.k1.negative&&(p.k1.ineg(),q=q.neg(!0));p.k2.negative&&(p.k2.ineg(),u=u.neg(!0));b[2*l]=q;b[2*l+1]=u;e[2*l]=p.k1;e[2*l+1]=p.k2}a=this._wnafMulAdd(1,b,e,2*l,k);for(d=0;d<2*l;d++)b[d]=null,e[d]=null;return a};GQ(Dk,Fw.BasePoint);jn.prototype.point=function(a,d,k){return new Dk(this,a,d,k)};jn.prototype.pointFromJSON=function(a,d){return Dk.fromJSON(this,a,d)};Dk.prototype._getBeta=
function(){if(this.curve.endo){var a=this.precomputed;if(a&&a.beta)return a.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(a){var k=this.curve,b=function(e){return k.point(e.x.redMul(k.endo.beta),e.y)};a.beta=d;d.precomputed={beta:null,naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(b)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(b)}}}return d}};Dk.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Dk.fromJSON=function(a,d,k){function b(l){return a.point(l[0],l[1],k)}"string"==typeof d&&(d=JSON.parse(d));var e=a.point(d[0],d[1],k);if(!d[2])return e;d=d[2];return e.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[e].concat(d.doubles.points.map(b))},naf:d.naf&&{wnd:d.naf.wnd,
points:[e].concat(d.naf.points.map(b))}},e};Dk.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Dk.prototype.isInfinity=function(){return this.inf};Dk.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a)||0===this.x.cmp(a.x))return this.curve.point(null,null);var d=this.y.redSub(a.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(a.x).redInvm()));
a=d.redSqr().redISub(this.x).redISub(a.x);d=d.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,d)};Dk.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,k=this.x.redSqr();a=a.redInvm();k=k.redAdd(k).redIAdd(k).redIAdd(d).redMul(a);d=k.redSqr().redISub(this.x.redAdd(this.x));k=k.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,k)};Dk.prototype.getX=function(){return this.x.fromRed()};
Dk.prototype.getY=function(){return this.y.fromRed()};Dk.prototype.mul=function(a){return a=new tj(a,16),this.isInfinity()?this:this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)};Dk.prototype.mulAdd=function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,a):this.curve._wnafMulAdd(1,d,a,2)};Dk.prototype.jmulAdd=function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,
a,!0):this.curve._wnafMulAdd(1,d,a,2,!0)};Dk.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))};Dk.prototype.neg=function(a){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){a=this.precomputed;var k=function(b){return b.neg()};d.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(k)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(k)}}}return d};Dk.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};GQ($k,Fw.BasePoint);jn.prototype.jpoint=function(a,d,k){return new $k(this,a,d,k)};$k.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),d=a.redSqr(),k=this.x.redMul(d);a=this.y.redMul(d).redMul(a);return this.curve.point(k,a)};$k.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};$k.prototype.add=function(a){if(this.isInfinity())return a;
if(a.isInfinity())return this;var d=a.z.redSqr(),k=this.z.redSqr(),b=this.x.redMul(d),e=a.x.redMul(k);d=this.y.redMul(d.redMul(a.z));k=a.y.redMul(k.redMul(this.z));e=b.redSub(e);k=d.redSub(k);if(0===e.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=e.redSqr(),p=l.redMul(e);l=b.redMul(l);b=k.redSqr().redIAdd(p).redISub(l).redISub(l);d=k.redMul(l.redISub(b)).redISub(d.redMul(p));a=this.z.redMul(a.z).redMul(e);return this.curve.jpoint(b,d,a)};$k.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();
if(a.isInfinity())return this;var d=this.z.redSqr(),k=this.x,b=a.x.redMul(d),e=this.y;a=a.y.redMul(d).redMul(this.z);b=k.redSub(b);a=e.redSub(a);if(0===b.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=b.redSqr();d=l.redMul(b);l=k.redMul(l);k=a.redSqr().redIAdd(d).redISub(l).redISub(l);e=a.redMul(l.redISub(k)).redISub(e.redMul(d));b=this.z.redMul(b);return this.curve.jpoint(k,e,b)};$k.prototype.dblp=function(a){if(0===a||this.isInfinity())return this;if(!a)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var d=this,k=0;k<a;k++)d=d.dbl();return d}d=this.curve.a;var b=this.curve.tinv,e=this.x;k=this.y;var l=this.z,p=l.redSqr().redSqr(),q=k.redAdd(k);for(k=0;k<a;k++){var u=e.redSqr(),w=q.redSqr(),y=w.redSqr();u=u.redAdd(u).redIAdd(u).redIAdd(d.redMul(p));w=e.redMul(w);e=u.redSqr().redISub(w.redAdd(w));w=w.redISub(e);u=u.redMul(w);u=u.redIAdd(u).redISub(y);l=q.redMul(l);k+1<a&&(p=p.redMul(y));q=u}return this.curve.jpoint(e,q.redMul(b),l)};$k.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};$k.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr();var d=this.y.redSqr();var k=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(a).redISub(k);d=d.redIAdd(d);a=a.redAdd(a).redIAdd(a);var b=a.redSqr().redISub(d).redISub(d),e=k.redIAdd(k);e=(e=e.redIAdd(e)).redIAdd(e);k=b;a=a.redMul(d.redISub(b)).redISub(e);d=this.y.redAdd(this.y)}else{b=this.x.redSqr();a=this.y.redSqr();k=a.redSqr();a=this.x.redAdd(a).redSqr().redISub(b).redISub(k);
a=a.redIAdd(a);b=b.redAdd(b).redIAdd(b);e=b.redSqr();var l=k.redIAdd(k);l=(l=l.redIAdd(l)).redIAdd(l);k=e.redISub(a).redISub(a);a=b.redMul(a.redISub(k)).redISub(l);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(k,a,d)};$k.prototype._threeDbl=function(){var a;if(this.zOne){var d=this.x.redSqr();var k=this.y.redSqr();var b=k.redSqr();k=this.x.redAdd(k).redSqr().redISub(d).redISub(b);k=k.redIAdd(k);var e=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=a=e.redSqr().redISub(k).redISub(k);
b=b.redIAdd(b);b=(b=b.redIAdd(b)).redIAdd(b);b=e.redMul(k.redISub(a)).redISub(b);a=this.y.redAdd(this.y)}else a=this.z.redSqr(),k=this.y.redSqr(),d=this.x.redMul(k),b=this.x.redSub(a).redMul(this.x.redAdd(a)),b=b.redAdd(b).redIAdd(b),e=d.redIAdd(d),d=(e=e.redIAdd(e)).redAdd(e),d=b.redSqr().redISub(d),a=this.y.redAdd(this.z).redSqr().redISub(k).redISub(a),k=k.redSqr(),k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),b=b.redMul(e.redISub(d)).redISub(k);return this.curve.jpoint(d,b,a)};$k.prototype._dbl=
function(){var a=this.curve.a,d=this.x,k=this.y,b=this.z,e=b.redSqr().redSqr(),l=d.redSqr(),p=k.redSqr();a=l.redAdd(l).redIAdd(l).redIAdd(a.redMul(e));d=d.redAdd(d);e=d.redIAdd(d).redMul(p);d=a.redSqr().redISub(e.redAdd(e));e=e.redISub(d);p=p.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);p=a.redMul(e).redISub(p);k=k.redAdd(k).redMul(b);return this.curve.jpoint(d,p,k)};$k.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr(),
b=d.redSqr(),e=a.redAdd(a).redIAdd(a),l=e.redSqr();a=this.x.redAdd(d).redSqr().redISub(a).redISub(b);var p=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(l)).redSqr();b=b.redIAdd(b);b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);e=e.redIAdd(a).redSqr().redISub(l).redISub(p).redISub(b);d=d.redMul(e);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(p).redISub(d);d=(d=d.redIAdd(d)).redIAdd(d);b=this.y.redMul(e.redMul(b.redISub(e)).redISub(a.redMul(p)));b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);k=
this.z.redAdd(a).redSqr().redISub(k).redISub(p);return this.curve.jpoint(d,b,k)};$k.prototype.mul=function(a,d){return a=new tj(a,d),this.curve._wnafMul(this,a)};$k.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var d=this.z.redSqr(),k=a.z.redSqr();if(0!==this.x.redMul(k).redISub(a.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);k=k.redMul(a.z);return 0===this.y.redMul(k).redISub(a.y.redMul(d)).cmpn(0)};$k.prototype.eqXToP=function(a){var d=this.z.redSqr(),
k=a.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(k))return!0;a=a.clone();for(d=this.curve.redN.redMul(d);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(k.redIAdd(d),0===this.x.cmp(k))return!0}};$k.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};$k.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Hw=Lj,l4=Ng,PE=co;l4(Gw,PE);Gw.prototype.validate=
function(a){a=a.normalize().x;var d=a.redSqr();a=d.redMul(a).redAdd(d.redMul(this.a)).redAdd(a);return 0===a.redSqrt().redSqr().cmp(a)};l4(Ek,PE.BasePoint);Gw.prototype.decodePoint=function(a,d){return this.point($g.toArray(a,d),1)};Gw.prototype.point=function(a,d){return new Ek(this,a,d)};Gw.prototype.pointFromJSON=function(a){return Ek.fromJSON(this,a)};Ek.prototype.precompute=function(){};Ek.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ek.fromJSON=function(a,
d){return new Ek(a,d[0],d[1]||a.one)};Ek.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ek.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Ek.prototype.dbl=function(){var a=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),k=a.redSub(d);a=a.redMul(d);d=k.redMul(d.redAdd(this.curve.a24.redMul(k)));return this.curve.point(a,d)};Ek.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Ek.prototype.diffAdd=function(a,d){var k=this.x.redAdd(this.z),b=this.x.redSub(this.z),e=a.x.redAdd(a.z);a=a.x.redSub(a.z).redMul(k);e=e.redMul(b);b=d.z.redMul(a.redAdd(e).redSqr());d=d.x.redMul(a.redISub(e).redSqr());return this.curve.point(b,d)};Ek.prototype.mul=function(a){var d=a.clone();a=this;for(var k=this.curve.point(null,null),b=[];0!==d.cmpn(0);d.iushrn(1))b.push(d.andln(1));for(d=b.length-1;0<=d;d--)0===b[d]?(a=a.diffAdd(k,this),k=k.dbl()):(k=a.diffAdd(k,this),a=a.dbl());return k};Ek.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Ek.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Ek.prototype.eq=function(a){return 0===this.getX().cmp(a.getX())};Ek.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ek.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var mq=Lj,m4=Ng,QE=co,Gaa=$g.assert;m4(bp,QE);bp.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)};
bp.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)};bp.prototype.jpoint=function(a,d,k,b){return this.point(a,d,k,b)};bp.prototype.pointFromX=function(a,d){(a=new mq(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=this.c2.redSub(this.a.redMul(k));k=this.one.redSub(this.c2.redMul(this.d).redMul(k));k=b.redMul(k.redInvm());b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,
b)};bp.prototype.pointFromY=function(a,d){(a=new mq(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=k.redSub(this.c2);k=k.redMul(this.d).redMul(this.c2).redSub(this.a);b=b.redMul(k.redInvm());if(0===b.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,a)}k=b.redSqrt();if(0!==k.redSqr().redSub(b).cmp(this.zero))throw Error("invalid point");return k.fromRed().isOdd()!==d&&(k=k.redNeg()),this.point(k,a)};bp.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();
var d=a.x.redSqr(),k=a.y.redSqr();a=d.redMul(this.a).redAdd(k);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(k)));return 0===a.cmp(d)};m4(Ti,QE.BasePoint);bp.prototype.pointFromJSON=function(a){return Ti.fromJSON(this,a)};bp.prototype.point=function(a,d,k,b){return new Ti(this,a,d,k,b)};Ti.fromJSON=function(a,d){return new Ti(a,d[0],d[1],d[2])};Ti.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ti.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};Ti.prototype._extDbl=function(){var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr();k=k.redIAdd(k);var b=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(d);a=b.redAdd(d);k=a.redSub(k);var l=b.redSub(d);d=e.redMul(k);b=a.redMul(l);e=e.redMul(l);a=k.redMul(a);return this.curve.point(d,b,a,e)};Ti.prototype._projDbl=
function(){var a=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var k=this.y.redSqr();if(this.curve.twisted){var b=(l=this.curve._mulA(d)).redAdd(k);if(this.zOne)a=a.redSub(d).redSub(k).redMul(b.redSub(this.curve.two)),d=b.redMul(l.redSub(k)),b=b.redSqr().redSub(b).redSub(b);else{var e=this.z.redSqr();e=b.redSub(e).redISub(e);a=a.redSub(d).redISub(k).redMul(e);d=b.redMul(l.redSub(k));b=b.redMul(e)}}else{var l=d.redAdd(k);e=this.curve._mulC(this.z).redSqr();e=l.redSub(e).redSub(e);a=this.curve._mulC(a.redISub(l)).redMul(e);
d=this.curve._mulC(l).redMul(d.redISub(k));b=l.redMul(e)}return this.curve.point(a,d,b)};Ti.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ti.prototype._extAdd=function(a){var d=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),k=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),b=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),l=k.redSub(d);a=e.redSub(b);b=e.redAdd(b);e=k.redAdd(d);d=l.redMul(a);k=b.redMul(e);l=l.redMul(e);
a=a.redMul(b);return this.curve.point(d,k,a,l)};Ti.prototype._projAdd=function(a){var d,k,b=this.z.redMul(a.z),e=b.redSqr(),l=this.x.redMul(a.x),p=this.y.redMul(a.y),q=this.curve.d.redMul(l).redMul(p),u=e.redSub(q);e=e.redAdd(q);a=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(l).redISub(p);a=b.redMul(u).redMul(a);return this.curve.twisted?(d=b.redMul(e).redMul(p.redSub(this.curve._mulA(l))),k=u.redMul(e)):(d=b.redMul(e).redMul(p.redSub(l)),k=this.curve._mulC(u).redMul(e)),this.curve.point(a,
d,k)};Ti.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)};Ti.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)};Ti.prototype.mulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,[this,d],[a,k],2,!1)};Ti.prototype.jmulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,[this,d],[a,k],2,!0)};Ti.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();
return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this};Ti.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ti.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ti.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ti.prototype.eq=function(a){return this===a||0===this.getX().cmp(a.getX())&&0===this.getY().cmp(a.getY())};Ti.prototype.eqXToP=
function(a){var d=a.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;a=a.clone();for(var k=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(d.redIAdd(k),0===this.x.cmp(d))return!0}};Ti.prototype.toP=Ti.prototype.normalize;Ti.prototype.mixedAdd=Ti.prototype.add;var Fx={};Fx.base=co;Fx.short=jn;Fx.mont=Gw;Fx.edwards=bp;var hka={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},yI={},yM=yI,xM=Fx,dY=$g.assert;yM.PresetCurve=cY;Cr("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ri.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Cr("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ri.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Cr("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:Ri.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Cr("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ri.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Cr("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ri.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Cr("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ri.sha256,gRed:!1,g:["9"]});Cr("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ri.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var n4=hka}catch(a){n4=void 0}Cr("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:Ri.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n4]});var ika=Lj,o4=$g.assert;
Fk.fromPublic=function(a,d,k){return d instanceof Fk?d:new Fk(a,{pub:d,pubEnc:k})};Fk.fromPrivate=function(a,d,k){return d instanceof Fk?d:new Fk(a,{priv:d,privEnc:k})};Fk.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Fk.prototype.getPublic=function(a,d){return"string"==
typeof a&&(d=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,a):this.pub};Fk.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv};Fk.prototype._importPrivate=function(a,d){this.priv=new ika(a,d||16);this.priv=this.priv.umod(this.ec.curve.n)};Fk.prototype._importPublic=function(a,d){if(a.x||a.y)return"mont"===this.ec.curve.type?o4(a.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o4(a.x&&a.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(a.x,a.y),void 0;this.pub=this.ec.curve.decodePoint(a,d)};Fk.prototype.derive=function(a){return a.mul(this.priv).getX()};Fk.prototype.sign=function(a,d,k){return this.ec.sign(a,this,d,k)};Fk.prototype.verify=function(a,d){return this.ec.verify(a,d,this)};Fk.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Gu=Lj,zM=yI,eY=$g.assert;kn.prototype.keyPair=function(a){return new Fk(this,
a)};kn.prototype.keyFromPrivate=function(a,d){return Fk.fromPrivate(this,a,d)};kn.prototype.keyFromPublic=function(a,d){return Fk.fromPublic(this,a,d)};kn.prototype.genKeyPair=function(a){a||(a={});a=new lq({hash:this.hash,pers:a.pers,persEnc:a.persEnc||"utf8",entropy:a.entropy||tI(this.hash.hmacStrength),entropyEnc:a.entropy&&a.entropyEnc||"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),k=this.n.sub(new Gu(2));;){var b=new Gu(a.generate(d));if(!(0<b.cmp(k)))return b.iaddn(1),this.keyFromPrivate(b)}};
kn.prototype._truncateToN=function(a,d){var k=8*a.byteLength()-this.n.bitLength();return 0<k&&(a=a.ushrn(k)),!d&&0<=a.cmp(this.n)?a.sub(this.n):a};kn.prototype.sign=function(a,d,k,b){"object"==typeof k&&(b=k,k=null);b||(b={});d=this.keyFromPrivate(d,k);a=this._truncateToN(new Gu(a,16));var e=this.n.byteLength();k=d.getPrivate().toArray("be",e);e=a.toArray("be",e);e=new lq({hash:this.hash,entropy:k,nonce:e,pers:b.pers,persEnc:b.persEnc||"utf8"});for(var l=this.n.sub(new Gu(1)),p=0;;p++){var q=b.k?
b.k(p):new Gu(e.generate(this.n.byteLength()));if(!(0>=(q=this._truncateToN(q,!0)).cmpn(1)||0<=q.cmp(l))){var u=this.g.mul(q);if(!u.isInfinity()){var w=u.getX();k=w.umod(this.n);if(0!==k.cmpn(0)&&(q=q.invm(this.n).mul(k.mul(d.getPrivate()).iadd(a)),0!==(q=q.umod(this.n)).cmpn(0)))return a=(u.getY().isOdd()?1:0)|(0!==w.cmp(k)?2:0),b.canonical&&0<q.cmp(this.nh)&&(q=this.n.sub(q),a^=1),new Pt({r:k,s:q,recoveryParam:a})}}}};kn.prototype.verify=function(a,d,k,b){a=this._truncateToN(new Gu(a,16));k=this.keyFromPublic(k,
b);b=(d=new Pt(d,"hex")).r;d=d.s;if(0>b.cmpn(1)||0<=b.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var e;d=d.invm(this.n);a=d.mul(a).umod(this.n);d=d.mul(b).umod(this.n);return this.curve._maxwellTrick?!(e=this.g.jmulAdd(a,k.getPublic(),d)).isInfinity()&&e.eqXToP(b):!(e=this.g.mulAdd(a,k.getPublic(),d)).isInfinity()&&0===e.getX().umod(this.n).cmp(b)};kn.prototype.recoverPubKey=function(a,d,k,b){eY((3&k)===k,"The recovery param is more than two bits");d=new Pt(d,b);b=this.n;var e=new Gu(a);
a=d.r;var l=d.s,p=1&k;k>>=1;if(0<=a.cmp(this.curve.p.umod(this.curve.n))&&k)throw Error("Unable to find sencond key candinate");a=k?this.curve.pointFromX(a.add(this.curve.n),p):this.curve.pointFromX(a,p);d=d.r.invm(b);k=b.sub(e).mul(d).umod(b);b=l.mul(d).umod(b);return this.g.mulAdd(k,a,b)};kn.prototype.getKeyRecoveryParam=function(a,d,k,b){if(null!==(d=new Pt(d,b)).recoveryParam)return d.recoveryParam;for(b=0;4>b;b++){try{var e=this.recoverPubKey(a,d,b)}catch(l){continue}if(e.eq(k))return b}throw Error("Unable to find valid recovery factor");
};var p4=$g.assert,fY=$g.parseBytes,Gx=$g.cachedProperty;dk.fromPublic=function(a,d){return d instanceof dk?d:new dk(a,{pub:d})};dk.fromSecret=function(a,d){return d instanceof dk?d:new dk(a,{secret:d})};dk.prototype.secret=function(){return this._secret};Gx(dk,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Gx(dk,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Gx(dk,"privBytes",function(){var a=this.eddsa,d=this.hash(),
k=a.encodingLength-1;a=d.slice(0,a.encodingLength);return a[0]&=248,a[k]&=127,a[k]|=64,a});Gx(dk,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Gx(dk,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Gx(dk,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});dk.prototype.sign=function(a){return p4(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)};dk.prototype.verify=function(a,d){return this.eddsa.verify(a,d,this)};
dk.prototype.getSecret=function(a){return p4(this._secret,"KeyPair is public only"),$g.encode(this.secret(),a)};dk.prototype.getPublic=function(a){return $g.encode(this.pubBytes(),a)};var Jaa=Lj,Iaa=$g.assert,zI=$g.cachedProperty,Haa=$g.parseBytes;zI(Dr,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});zI(Dr,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});zI(Dr,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});zI(Dr,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
Dr.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Dr.prototype.toHex=function(){return $g.encode(this.toBytes(),"hex").toUpperCase()};var Maa=Ri,Laa=yI,Kaa=$g.assert,q4=$g.parseBytes;am.prototype.sign=function(a,d){a=q4(a);var k=this.keyFromSecret(d),b=this.hashInt(k.messagePrefix(),a);d=this.g.mul(b);var e=this.encodePoint(d);a=this.hashInt(e,k.pubBytes(),a).mul(k.priv());a=b.add(a).umod(this.curve.n);return this.makeSignature({R:d,S:a,Rencoded:e})};am.prototype.verify=
function(a,d,k){a=q4(a);d=this.makeSignature(d);k=this.keyFromPublic(k);a=this.hashInt(d.Rencoded(),k.pubBytes(),a);var b=this.g.mul(d.S());return d.R().add(k.pub().mul(a)).eq(b)};am.prototype.hashInt=function(){for(var a=this.hash(),d=0;d<arguments.length;d++)a.update(arguments[d]);return $g.intFromLE(a.digest()).umod(this.curve.n)};am.prototype.keyFromPublic=function(a){return dk.fromPublic(this,a)};am.prototype.keyFromSecret=function(a){return dk.fromSecret(this,a)};am.prototype.makeSignature=
function(a){return a instanceof Dr?a:new Dr(this,a)};am.prototype.encodePoint=function(a){var d=a.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=a.getX().isOdd()?128:0,d};am.prototype.decodePoint=function(a){var d=(a=$g.parseBytes(a)).length-1,k=a.slice(0,d).concat(-129&a[d]);a=0!=(128&a[d]);k=$g.intFromLE(k);return this.curve.pointFromY(k,a)};am.prototype.encodeInt=function(a){return a.toArray("le",this.encodingLength)};am.prototype.decodeInt=function(a){return $g.intFromLE(a)};
am.prototype.isPoint=function(a){return a instanceof this.pointClass};var Iq={version:"6.5.2"};Iq.utils=$g;Iq.rand=tI;Iq.curve=Fx;Iq.curves=yI;Iq.ec=kn;Iq.eddsa=am;var MM={},xY=!1,wm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ek="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jY={},jka=Ng;jY.Reporter=ln;ln.prototype.isError=function(a){return a instanceof Iw};ln.prototype.save=function(){var a=(this||ek)._reporterState;return{obj:a.obj,
pathLen:a.path.length}};ln.prototype.restore=function(a){var d=(this||ek)._reporterState;d.obj=a.obj;d.path=d.path.slice(0,a.pathLen)};ln.prototype.enterKey=function(a){return(this||ek)._reporterState.path.push(a)};ln.prototype.exitKey=function(a){var d=(this||ek)._reporterState;d.path=d.path.slice(0,a-1)};ln.prototype.leaveKey=function(a,d,k){var b=(this||ek)._reporterState;this.exitKey(a);null!==b.obj&&(b.obj[d]=k)};ln.prototype.path=function(){return(this||ek)._reporterState.path.join("/")};ln.prototype.enterObject=
function(){var a=(this||ek)._reporterState,d=a.obj;return a.obj={},d};ln.prototype.leaveObject=function(a){var d=(this||ek)._reporterState,k=d.obj;return d.obj=a,k};ln.prototype.error=function(a){var d=(this||ek)._reporterState,k=a instanceof Iw;if(a=k?a:new Iw(d.path.map(function(b){return"["+JSON.stringify(b)+"]"}).join(""),a.message||a,a.stack),!d.options.partial)throw a;return k||d.errors.push(a),a};ln.prototype.wrapResult=function(a){var d=(this||ek)._reporterState;return d.options.partial?{result:this.isError(a)?
null:a,errors:d.errors}:a};jka(Iw,Error);Iw.prototype.rethrow=function(a){if((this||ek).message=a+" at: "+((this||ek).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||ek,Iw),!(this||ek).stack)try{throw Error((this||ek).message);}catch(d){(this||ek).stack=d.stack}return this||ek};var RE={},hY=!1,hg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,BM={},kY=!1,Ef="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AM={},
iY=!1,Er={},nY=!1,CM={},mY=!1,DM={},pY=!1,Fr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,GM={},rY=!1,FM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,EM={},qY=!1,HM={},tY=!1,fk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,KM={},vY=!1,JM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IM={},uY=!1,LM={},wY=!1,zj=SE(),r4=zj.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),kka=zj.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),HQ=zj.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),lka=zj.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(HQ),this.key("subjectPublicKey").bitstr())}),mka=zj.define("RelativeDistinguishedName",function(){this.setof(kka)}),
nka=zj.define("RDNSequence",function(){this.seqof(mka)}),s4=zj.define("Name",function(){this.choice({rdnSequence:this.use(nka)})}),oka=zj.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r4),this.key("notAfter").use(r4))}),pka=zj.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),qka=zj.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(HQ),this.key("issuer").use(s4),this.key("validity").use(oka),this.key("subject").use(s4),this.key("subjectPublicKeyInfo").use(lka),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(pka).optional())}),rka=zj.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(qka),this.key("signatureAlgorithm").use(HQ),this.key("signatureValue").bitstr())}),
yo={};yo.certificate=rka;var ska=zj.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});yo.RSAPrivateKey=ska;var tka=zj.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});yo.RSAPublicKey=
tka;var uka=zj.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(t4),this.key("subjectPublicKey").bitstr())});yo.PublicKey=uka;var t4=zj.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),vka=zj.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(t4),this.key("subjectPrivateKey").octstr())});yo.PrivateKey=vka;var wka=zj.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
yo.EncryptedPrivateKey=wka;var xka=zj.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});yo.DSAPrivateKey=xka;yo.DSAparam=zj.define("DSAparam",function(){this.int()});var zka=zj.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(yka),this.key("publicKey").optional().explicit(1).bitstr())});
yo.ECPrivateKey=zka;var yka=zj.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});yo.signature=zj.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Paa=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,Raa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Qaa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,TE=Dh.Buffer,bm=yo,Saa={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Uaa=xm,Taa=oI,NM=Dh.Buffer;Jw.signature=bm.signature;var u4={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},IQ={},sl=Eg.Buffer,Tt=J3,Aka=Iq.ec,UE=Lj;(IQ=function(a,d,k,b,e){d=Jw(d);if(d.curve){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong private key type");return function(l,p){var q=u4[p.curve.join(".")];if(!q)throw Error("unknown curve "+p.curve.join("."));l=(new Aka(q)).keyFromPrivate(p.privateKey).sign(l);return new sl(l.toDER())}(a,d)}if("dsa"===d.type){if("dsa"!==b)throw Error("wrong private key type");
return function(l,p,q){var u=p.params.priv_key,w=p.params.p,y=p.params.q;p=p.params.g;var A=new UE(0),C=OM(l,y).mod(y);var E=!1;for(l=yY(u,y,l,q);!1===E;){A=E=zY(y,l,q);var L=y;A=p.toRed(UE.mont(w)).redPow(A).fromRed().mod(L);0===(E=E.invm(y).imul(C.add(u.mul(A))).mod(y)).cmpn(0)&&(E=!1,A=new UE(0))}q=E;u=A.toArray();q=q.toArray();128&u[0]&&(u=[0].concat(u));128&q[0]&&(q=[0].concat(q));w=[48,u.length+q.length+4,2,u.length];return w=w.concat(u,[2,q.length],q),new sl(w)}(a,d,k)}if("rsa"!==b&&"ecdsa/rsa"!==
b)throw Error("wrong private key type");a=sl.concat([e,a]);b=d.modulus.byteLength();for(k=[0,1];a.length+k.length+1<b;)k.push(255);k.push(0);for(b=-1;++b<a.length;)k.push(a[b]);return ME(k,d)}).getKey=yY;IQ.makeKey=zY;var JQ=Eg.Buffer,xB=Lj,Bka=Iq.ec,uj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AI=Eg.Buffer,BY=sB,VE=Zt,v4=Ng,Cka=IQ,Dka=function(a,d,k,b,e){k=Jw(k);if("ec"===k.type){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");return function(q,
u,w){var y=u4[w.data.algorithm.curve.join(".")];if(!y)throw Error("unknown curve "+w.data.algorithm.curve.join("."));return(new Bka(y)).verify(u,q,w.data.subjectPrivateKey.data)}(a,d,k)}if("dsa"===k.type){if("dsa"!==b)throw Error("wrong public key type");return function(q,u,w){var y=w.data.p,A=w.data.q,C=w.data.g;w=w.data.pub_key;var E=Jw.signature.decode(q,"der");q=E.s;E=E.r;AY(q,A);AY(E,A);var L=xB.mont(y);q=q.invm(A);return 0===C.toRed(L).redPow((new xB(u)).mul(q).mod(A)).fromRed().mul(w.toRed(L).redPow(E.mul(q).mod(A)).fromRed()).mod(y).mod(A).cmp(E)}(a,
d,k)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");d=JQ.concat([e,d]);e=k.modulus.byteLength();b=[1];for(var l=0;d.length+b.length+2<e;)b.push(255),l++;b.push(0);for(var p=-1;++p<d.length;)b.push(d[p]);b=new JQ(b);d=xB.mont(k.modulus);a=(a=(new xB(a)).toRed(d)).redPow(new xB(k.publicExponent));a=new JQ(a.fromRed().toArray());d=8>l?1:0;e=Math.min(a.length,b.length);a.length!==b.length&&(d=1);for(p=-1;++p<e;)d|=a[p]^b[p];return 0===d},Ut=K3;Object.keys(Ut).forEach(function(a){Ut[a].id=
new AI(Ut[a].id,"hex");Ut[a.toLowerCase()]=Ut[a]});v4(Gz,VE.Writable);Gz.prototype._write=function(a,d,k){(this||uj)._hash.update(a);k()};Gz.prototype.update=function(a,d){return"string"==typeof a&&(a=new AI(a,d)),(this||uj)._hash.update(a),this||uj};Gz.prototype.sign=function(a,d){this.end();var k=(this||uj)._hash.digest();a=Cka(k,a,(this||uj)._hashType,(this||uj)._signType,(this||uj)._tag);return d?a.toString(d):a};v4(Hz,VE.Writable);Hz.prototype._write=function(a,d,k){(this||uj)._hash.update(a);
k()};Hz.prototype.update=function(a,d){return"string"==typeof a&&(a=new AI(a,d)),(this||uj)._hash.update(a),this||uj};Hz.prototype.verify=function(a,d,k){"string"==typeof d&&(d=new AI(d,k));this.end();k=(this||uj)._hash.digest();return Dka(d,k,a,(this||uj)._signType,(this||uj)._tag)};var gk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nq=Eg.Buffer,Vaa=Iq,Eka=Lj,ym={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};ym.p224=ym.secp224r1;ym.p256=ym.secp256r1=ym.prime256v1;ym.p192=ym.secp192r1=ym.prime192v1;ym.p384=ym.secp384r1;ym.p521=ym.secp521r1;Vt.prototype.generateKeys=function(a,d){return(this||gk).keys=(this||gk).curve.genKeyPair(),this.getPublicKey(a,d)};Vt.prototype.computeSecret=function(a,d,k){return d=d||"utf8",nq.isBuffer(a)||(a=new nq(a,
d)),PM((this||gk).curve.keyFromPublic(a).getPublic().mul((this||gk).keys.getPrivate()).getX(),k,(this||gk).curveType.byteLength)};Vt.prototype.getPublicKey=function(a,d){var k=(this||gk).keys.getPublic("compressed"===d,!0);return"hybrid"===d&&(k[k.length-1]%2?k[0]=7:k[0]=6),PM(k,a)};Vt.prototype.getPrivateKey=function(a){return PM((this||gk).keys.getPrivate(),a)};Vt.prototype.setPublicKey=function(a,d){return d=d||"utf8",nq.isBuffer(a)||(a=new nq(a,d)),(this||gk).keys._importPublic(a),this||gk};Vt.prototype.setPrivateKey=
function(a,d){d=d||"utf8";nq.isBuffer(a)||(a=new nq(a,d));a=new Eka(a);return a=a.toString(16),(this||gk).keys=(this||gk).curve.genKeyPair(),(this||gk).keys._importPrivate(a),this||gk};var KQ=Dh.Buffer,BI=function(a,d){for(var k,b=KQ.alloc(0),e=0;b.length<d;){k=e++;var l=KQ.allocUnsafe(4);k=(l.writeUInt32BE(k,0),l);b=KQ.concat([b,sB("sha1").update(a).update(k).digest()])}return b.slice(0,d)},CI=function(a,d){for(var k=a.length,b=-1;++b<k;)a[b]^=d[b];return a},w4=Lj,Fka=Dh.Buffer,x4=function(a,d){return Fka.from(a.toRed(w4.mont(d.modulus)).redPow(new w4(d.publicExponent)).fromRed().toArray())},
LQ=Lj,zo=Dh.Buffer,y4=Lj,yB=Dh.Buffer,Hx={publicEncrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=Jw(a);if(4===b)d=function(e,l){e=e.modulus.byteLength();var p=l.length,q=sB("sha1").update(zo.alloc(0)).digest(),u=q.length,w=2*u;if(p>e-w-2)throw Error("message too long");w=zo.alloc(e-p-w-2);var y=e-u-1;p=fs(u);l=CI(zo.concat([q,w,zo.alloc(1,1),l],y),BI(p,y));u=CI(p,BI(l,u));return new LQ(zo.concat([zo.alloc(1),u,l],e))}(a,d);else if(1===b)d=function(e,l,p){var q=l.length;e=e.modulus.byteLength();
if(q>e-11)throw Error("message too long");if(p)var u=zo.alloc(e-q-3,255);else{q=e-q-3;for(var w=zo.allocUnsafe(q),y=0,A=fs(2*q),C=0;y<q;)C===A.length&&(A=fs(2*q),C=0),(u=A[C++])&&(w[y++]=u);u=w}return new LQ(zo.concat([zo.from([0,p?1:2]),u,zo.alloc(1),l],e))}(a,d,k);else{if(3!==b)throw Error("unknown padding");if(0<=(d=new LQ(d)).cmp(a.modulus))throw Error("data too long for modulus");}return k?ME(d,a):x4(d,a)},privateDecrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=Jw(a);var e=a.modulus.byteLength();
if(d.length>e||0<=(new y4(d)).cmp(a.modulus))throw Error("decryption error");d=k?x4(new y4(d),a):ME(d,a);var l=yB.alloc(e-d.length);if(d=yB.concat([l,d],e),4===b)return function(p,q){var u=p.modulus.byteLength(),w=sB("sha1").update(yB.alloc(0)).digest();p=w.length;if(0!==q[0])throw Error("decryption error");var y=q.slice(1,p+1);q=q.slice(p+1);y=CI(y,BI(q,p));u=CI(q,BI(y,u-p-1));q=u.slice(0,p);w=yB.from(w);q=yB.from(q);y=0;var A=w.length;w.length!==q.length&&(y++,A=Math.min(w.length,q.length));for(var C=
-1;++C<A;)y+=w[C]^q[C];if(y)throw Error("decryption error");for(;0===u[p];)p++;if(1!==u[p++])throw Error("decryption error");return u.slice(p)}(a,d);if(1===b)return function(p,q,u){p=q.slice(0,2);for(var w=2,y=0;0!==q[w++];)if(w>=q.length){y++;break}var A=q.slice(2,w-1);("0002"!==p.toString("hex")&&!u||"0001"!==p.toString("hex")&&u)&&y++;8>A.length&&y++;if(y)throw Error("decryption error");return q.slice(w)}(0,d,k);if(3===b)return d;throw Error("unknown padding");},privateEncrypt:function(a,d){return Hx.publicEncrypt(a,
d,!0)},publicDecrypt:function(a,d){return Hx.privateDecrypt(a,d,!0)}},DI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,MQ,NQ,QM=oh,KY=fs,z4=Dh.Buffer,HY=Dh.kMaxLength,RM=DI.crypto||DI.msCrypto,GY=Math.pow(2,32)-1;RM&&RM.getRandomValues||!QM.browser?(MQ=function(a,d,k,b){if(!(z4.isBuffer(a)||a instanceof DI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)b=d,d=0,k=a.length;else if("function"==typeof k)b=k,k=a.length-
d;else if("function"!=typeof b)throw new TypeError('"cb" argument must be a function');return FY(d,a.length),IY(k,d,a.length),JY(a,d,k,b)},NQ=function(a,d,k){void 0===d&&(d=0);if(!(z4.isBuffer(a)||a instanceof DI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');FY(d,a.length);void 0===k&&(k=a.length-d);return IY(k,d,a.length),JY(a,d,k)}):(MQ=EY,NQ=EY);var $f={};$f.randomBytes=$f.rng=$f.pseudoRandomBytes=$f.prng=fs;$f.createHash=$f.Hash=sB;$f.createHmac=$f.Hmac=J3;var Gka=
Object.keys(K3),Hka="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(Gka);$f.getHashes=function(){return Hka};$f.pbkdf2=oI.pbkdf2;$f.pbkdf2Sync=oI.pbkdf2Sync;$f.Cipher=W3;$f.createCipher=Cja;$f.Cipheriv=oM;$f.createCipheriv=oM;$f.Decipher=X3;$f.createDecipher=Dja;$f.Decipheriv=qM;$f.createDecipheriv=qM;$f.getCiphers=Y3;$f.listCiphers=Eja;$f.DiffieHellmanGroup=Mja;$f.createDiffieHellmanGroup=c4;$f.getDiffieHellman=d4;$f.createDiffieHellman=Nja;$f.DiffieHellman=e4;$f.createSign=CY;$f.Sign=
CY;$f.createVerify=DY;$f.Verify=DY;$f.createECDH=function(a){return new Vt(a)};$f.publicEncrypt=Hx.publicEncrypt;$f.privateEncrypt=Hx.privateEncrypt;$f.publicDecrypt=Hx.publicDecrypt;$f.privateDecrypt=Hx.privateDecrypt;$f.randomFill=MQ;$f.randomFillSync=NQ;$f.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};$f.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.default=function(){return Ika.default.randomFillSync(Jka)};var Ika=$f&&$f.__esModule?$f:{default:$f},Jka=new Uint8Array(16),Nl={};Object.defineProperty(Nl,"__esModule",
{value:!0});Nl.default=void 0;for(var el=[],OQ=0;256>OQ;++OQ)el.push((OQ+256).toString(16).substr(1));Nl.default=function(a,d){d=d||0;return(el[a[d+0]]+el[a[d+1]]+el[a[d+2]]+el[a[d+3]]+"-"+el[a[d+4]]+el[a[d+5]]+"-"+el[a[d+6]]+el[a[d+7]]+"-"+el[a[d+8]]+el[a[d+9]]+"-"+el[a[d+10]]+el[a[d+11]]+el[a[d+12]]+el[a[d+13]]+el[a[d+14]]+el[a[d+15]]).toLowerCase()};var EI={};Object.defineProperty(EI,"__esModule",{value:!0});EI.default=void 0;var Kka=Dp&&Dp.__esModule?Dp:{default:Dp},Lka=Nl&&Nl.__esModule?Nl:{default:Nl},
A4,PQ,QQ=0,RQ=0;EI.default=function(a,d,k){k=d&&k||0;var b=d||[];a=a||{};var e=a.node||A4,l=void 0!==a.clockseq?a.clockseq:PQ;if(null==e||null==l){var p=a.random||(a.rng||Kka.default)();null==e&&(e=A4=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]);null==l&&(l=PQ=(p[6]<<8|p[7])&16383)}p=void 0!==a.msecs?a.msecs:Date.now();var q=void 0!==a.nsecs?a.nsecs:RQ+1,u=p-QQ+(q-RQ)/1E4;0>u&&void 0===a.clockseq&&(l=l+1&16383);(0>u||p>QQ)&&void 0===a.nsecs&&(q=0);if(1E4<=q)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
QQ=p;RQ=q;PQ=l;p+=122192928E5;a=(1E4*(p&268435455)+q)%4294967296;b[k++]=a>>>24&255;b[k++]=a>>>16&255;b[k++]=a>>>8&255;b[k++]=a&255;a=p/4294967296*1E4&268435455;b[k++]=a>>>8&255;b[k++]=a&255;b[k++]=a>>>24&15|16;b[k++]=a>>>16&255;b[k++]=l>>>8|128;b[k++]=l&255;for(l=0;6>l;++l)b[k+l]=e[l];return d||(0,Lka.default)(b)};var km={};Object.defineProperty(km,"__esModule",{value:!0});km.default=function(a,d,k){function b(e,l,p,q){q=p&&q||0;if("string"===typeof e){e=unescape(encodeURIComponent(e));for(var u=
[],w=0;w<e.length;++w)u.push(e.charCodeAt(w));e=u}"string"===typeof l&&(l=Waa(l));if(!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=k(l.concat(e));l[6]=l[6]&15|d;l[8]=l[8]&63|128;if(p)for(e=0;16>e;++e)p[q+e]=l[e];return p||(0,Mka.default)(l)}try{b.name=a}catch(e){}b.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";b.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return b};
km.URL=km.DNS=void 0;var Mka=Nl&&Nl.__esModule?Nl:{default:Nl};km.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";km.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var Hu={},B4=Eg.Buffer;Object.defineProperty(Hu,"__esModule",{value:!0});Hu.default=void 0;var Nka=$f&&$f.__esModule?$f:{default:$f};Hu.default=function(a){Array.isArray(a)?a=B4.from(a):"string"===typeof a&&(a=B4.from(a,"utf8"));return Nka.default.createHash("md5").update(a).digest()};var FI={};Object.defineProperty(FI,"__esModule",{value:!0});
FI.default=void 0;var Oka=km&&km.__esModule?km:{default:km},Pka=Hu&&Hu.__esModule?Hu:{default:Hu},Qka=(0,Oka.default)("v3",48,Pka.default);FI.default=Qka;var GI={};Object.defineProperty(GI,"__esModule",{value:!0});GI.default=void 0;var Rka=Dp&&Dp.__esModule?Dp:{default:Dp},Ska=Nl&&Nl.__esModule?Nl:{default:Nl};GI.default=function(a,d,k){"string"===typeof a&&(d="binary"===a?new Uint8Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Rka.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(d){k=k||0;for(var b=
0;16>b;++b)d[k+b]=a[b];return d}return(0,Ska.default)(a)};var Iu={},C4=Eg.Buffer;Object.defineProperty(Iu,"__esModule",{value:!0});Iu.default=void 0;var Tka=$f&&$f.__esModule?$f:{default:$f};Iu.default=function(a){Array.isArray(a)?a=C4.from(a):"string"===typeof a&&(a=C4.from(a,"utf8"));return Tka.default.createHash("sha1").update(a).digest()};var HI={};Object.defineProperty(HI,"__esModule",{value:!0});HI.default=void 0;var Uka=km&&km.__esModule?km:{default:km},Vka=Iu&&Iu.__esModule?Iu:{default:Iu},
Wka=(0,Uka.default)("v5",80,Vka.default);HI.default=Wka;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Object.defineProperty(Ju,"v1",{enumerable:!0,get:function(){return Xka.default}});Object.defineProperty(Ju,"v3",{enumerable:!0,get:function(){return Yka.default}});Object.defineProperty(Ju,"v4",{enumerable:!0,get:function(){return Zka.default}});Object.defineProperty(Ju,"v5",{enumerable:!0,get:function(){return $ka.default}});var Xka=WE(EI),Yka=WE(FI),Zka=WE(GI),$ka=WE(HI),fl={};Object.defineProperty(fl,
"__esModule",{value:!0});fl.atob=function(a){return D4(a)};fl.btoa=function(a){return E4(a)};fl.base64StringToBlobOrBuffer=function(a,d){return NY(D4(a),d)};fl.binaryStringToArrayBuffer=MY;fl.binaryStringToBlobOrBuffer=NY;fl.blob=LY;fl.blobOrBufferToBase64=function(a,d){PY(a,function(k){d(E4(k))})};fl.blobOrBufferToBinaryString=PY;fl.readAsArrayBuffer=function(a,d){var k=new FileReader;k.onloadend=function(b){b=b.target.result||new ArrayBuffer(0);d(b)};k.readAsArrayBuffer(a)};fl.readAsBinaryString=
OY;fl.typedBuffer=function(){};var D4=fl.atob,E4=fl.btoa,yg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ala={},zB=ala=function(a){function d(y,A){var C=y[0],E=y[1],L=y[2],I=y[3];C+=(E&L|~E&I)+A[0]-680876936|0;C=(C<<7|C>>>25)+E|0;I+=(C&E|~C&L)+A[1]-389564586|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&E)+A[2]+606105819|0;L=(L<<17|L>>>15)+I|0;E+=(L&I|~L&C)+A[3]-1044525330|0;E=(E<<22|E>>>10)+L|0;C+=(E&L|~E&I)+A[4]-176418897|0;C=(C<<7|C>>>25)+E|0;I+=(C&E|~C&L)+A[5]+1200080426|
0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&E)+A[6]-1473231341|0;L=(L<<17|L>>>15)+I|0;E+=(L&I|~L&C)+A[7]-45705983|0;E=(E<<22|E>>>10)+L|0;C+=(E&L|~E&I)+A[8]+1770035416|0;C=(C<<7|C>>>25)+E|0;I+=(C&E|~C&L)+A[9]-1958414417|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&E)+A[10]-42063|0;L=(L<<17|L>>>15)+I|0;E+=(L&I|~L&C)+A[11]-1990404162|0;E=(E<<22|E>>>10)+L|0;C+=(E&L|~E&I)+A[12]+1804603682|0;C=(C<<7|C>>>25)+E|0;I+=(C&E|~C&L)+A[13]-40341101|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&E)+A[14]-1502002290|0;L=(L<<17|L>>>15)+I|0;E+=(L&I|
~L&C)+A[15]+1236535329|0;E=(E<<22|E>>>10)+L|0;C+=(E&I|L&~I)+A[1]-165796510|0;C=(C<<5|C>>>27)+E|0;I+=(C&L|E&~L)+A[6]-1069501632|0;I=(I<<9|I>>>23)+C|0;L+=(I&E|C&~E)+A[11]+643717713|0;L=(L<<14|L>>>18)+I|0;E+=(L&C|I&~C)+A[0]-373897302|0;E=(E<<20|E>>>12)+L|0;C+=(E&I|L&~I)+A[5]-701558691|0;C=(C<<5|C>>>27)+E|0;I+=(C&L|E&~L)+A[10]+38016083|0;I=(I<<9|I>>>23)+C|0;L+=(I&E|C&~E)+A[15]-660478335|0;L=(L<<14|L>>>18)+I|0;E+=(L&C|I&~C)+A[4]-405537848|0;E=(E<<20|E>>>12)+L|0;C+=(E&I|L&~I)+A[9]+568446438|0;C=(C<<5|C>>>
27)+E|0;I+=(C&L|E&~L)+A[14]-1019803690|0;I=(I<<9|I>>>23)+C|0;L+=(I&E|C&~E)+A[3]-187363961|0;L=(L<<14|L>>>18)+I|0;E+=(L&C|I&~C)+A[8]+1163531501|0;E=(E<<20|E>>>12)+L|0;C+=(E&I|L&~I)+A[13]-1444681467|0;C=(C<<5|C>>>27)+E|0;I+=(C&L|E&~L)+A[2]-51403784|0;I=(I<<9|I>>>23)+C|0;L+=(I&E|C&~E)+A[7]+1735328473|0;L=(L<<14|L>>>18)+I|0;E+=(L&C|I&~C)+A[12]-1926607734|0;E=(E<<20|E>>>12)+L|0;C+=(E^L^I)+A[5]-378558|0;C=(C<<4|C>>>28)+E|0;I+=(C^E^L)+A[8]-2022574463|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^E)+A[11]+1839030562|0;
L=(L<<16|L>>>16)+I|0;E+=(L^I^C)+A[14]-35309556|0;E=(E<<23|E>>>9)+L|0;C+=(E^L^I)+A[1]-1530992060|0;C=(C<<4|C>>>28)+E|0;I+=(C^E^L)+A[4]+1272893353|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^E)+A[7]-155497632|0;L=(L<<16|L>>>16)+I|0;E+=(L^I^C)+A[10]-1094730640|0;E=(E<<23|E>>>9)+L|0;C+=(E^L^I)+A[13]+681279174|0;C=(C<<4|C>>>28)+E|0;I+=(C^E^L)+A[0]-358537222|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^E)+A[3]-722521979|0;L=(L<<16|L>>>16)+I|0;E+=(L^I^C)+A[6]+76029189|0;E=(E<<23|E>>>9)+L|0;C+=(E^L^I)+A[9]-640364487|0;C=(C<<4|C>>>
28)+E|0;I+=(C^E^L)+A[12]-421815835|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^E)+A[15]+530742520|0;L=(L<<16|L>>>16)+I|0;E+=(L^I^C)+A[2]-995338651|0;E=(E<<23|E>>>9)+L|0;C+=(L^(E|~I))+A[0]-198630844|0;C=(C<<6|C>>>26)+E|0;I+=(E^(C|~L))+A[7]+1126891415|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~E))+A[14]-1416354905|0;L=(L<<15|L>>>17)+I|0;E+=(I^(L|~C))+A[5]-57434055|0;E=(E<<21|E>>>11)+L|0;C+=(L^(E|~I))+A[12]+1700485571|0;C=(C<<6|C>>>26)+E|0;I+=(E^(C|~L))+A[3]-1894986606|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~E))+A[10]-1051523|0;
L=(L<<15|L>>>17)+I|0;E+=(I^(L|~C))+A[1]-2054922799|0;E=(E<<21|E>>>11)+L|0;C+=(L^(E|~I))+A[8]+1873313359|0;C=(C<<6|C>>>26)+E|0;I+=(E^(C|~L))+A[15]-30611744|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~E))+A[6]-1560198380|0;L=(L<<15|L>>>17)+I|0;E+=(I^(L|~C))+A[13]+1309151649|0;E=(E<<21|E>>>11)+L|0;C+=(L^(E|~I))+A[4]-145523070|0;C=(C<<6|C>>>26)+E|0;I+=(E^(C|~L))+A[11]-1120210379|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~E))+A[2]+718787259|0;L=(L<<15|L>>>17)+I|0;E+=(I^(L|~C))+A[9]-343485551|0;y[0]=C+y[0]|0;y[1]=((E<<21|E>>>
11)+L|0)+y[1]|0;y[2]=L+y[2]|0;y[3]=I+y[3]|0}function k(y){var A=[],C;for(C=0;64>C;C+=4)A[C>>2]=y.charCodeAt(C)+(y.charCodeAt(C+1)<<8)+(y.charCodeAt(C+2)<<16)+(y.charCodeAt(C+3)<<24);return A}function b(y){var A=[],C;for(C=0;64>C;C+=4)A[C>>2]=y[C]+(y[C+1]<<8)+(y[C+2]<<16)+(y[C+3]<<24);return A}function e(y){var A=y.length,C=[1732584193,-271733879,-1732584194,271733878],E;for(E=64;E<=A;E+=64)d(C,k(y.substring(E-64,E)));y=y.substring(E-64);var L=y.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=
0;E<L;E+=1)I[E>>2]|=y.charCodeAt(E)<<(E%4<<3);I[E>>2]|=128<<(E%4<<3);if(55<E)for(d(C,I),E=0;16>E;E+=1)I[E]=0;A=(8*A).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(A[2],16);A=parseInt(A[1],16)||0;I[14]=y;I[15]=A;d(C,I);return C}function l(y){var A;for(A=0;A<y.length;A+=1){var C=A,E,L=y[A],I="";for(E=0;4>E;E+=1)I+=w[L>>8*E+4&15]+w[L>>8*E&15];y[C]=I}return y.join("")}function p(y){/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y)));return y}function q(y){var A=[],C=y.length,E;for(E=0;E<
C-1;E+=2)A.push(parseInt(y.substr(E,2),16));return String.fromCharCode.apply(String,A)}function u(){this.reset()}var w="0123456789abcdef".split("");l(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function y(A,C){A=A|0||0;return 0>A?Math.max(A+C,0):Math.min(A,C)}ArrayBuffer.prototype.slice=function(A,C){var E=(this||yg).byteLength;A=y(A,E);var L=E;C!==a&&(L=y(C,E));if(A>L)return new ArrayBuffer(0);L-=A;C=new ArrayBuffer(L);E=new Uint8Array(C);A=new Uint8Array(this||
yg,A,L);E.set(A);return C}}();u.prototype.append=function(y){this.appendBinary(p(y));return this||yg};u.prototype.appendBinary=function(y){(this||yg)._buff+=y;(this||yg)._length+=y.length;y=(this||yg)._buff.length;var A;for(A=64;A<=y;A+=64)d((this||yg)._hash,k((this||yg)._buff.substring(A-64,A)));(this||yg)._buff=(this||yg)._buff.substring(A-64);return this||yg};u.prototype.end=function(y){var A=(this||yg)._buff,C=A.length,E,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(E=0;E<C;E+=1)L[E>>2]|=A.charCodeAt(E)<<
(E%4<<3);this._finish(L,C);A=l((this||yg)._hash);y&&(A=q(A));this.reset();return A};u.prototype.reset=function(){(this||yg)._buff="";(this||yg)._length=0;(this||yg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||yg};u.prototype.getState=function(){return{buff:(this||yg)._buff,length:(this||yg)._length,hash:(this||yg)._hash.slice()}};u.prototype.setState=function(y){(this||yg)._buff=y.buff;(this||yg)._length=y.length;(this||yg)._hash=y.hash;return this||yg};u.prototype.destroy=function(){delete (this||
yg)._hash;delete (this||yg)._buff;delete (this||yg)._length};u.prototype._finish=function(y,A){y[A>>2]|=128<<(A%4<<3);if(55<A)for(d((this||yg)._hash,y),A=0;16>A;A+=1)y[A]=0;var C=8*(this||yg)._length;C=C.toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(C[2],16);C=parseInt(C[1],16)||0;y[14]=A;y[15]=C;d((this||yg)._hash,y)};u.hash=function(y,A){return u.hashBinary(p(y),A)};u.hashBinary=function(y,A){y=e(y);y=l(y);return A?q(y):y};u.ArrayBuffer=function(){this.reset()};u.ArrayBuffer.prototype.append=
function(y){var A=(this||yg)._buff.buffer,C=new Uint8Array(A.byteLength+y.byteLength);C.set(new Uint8Array(A));C.set(new Uint8Array(y),A.byteLength);A=C.length;(this||yg)._length+=y.byteLength;for(y=64;y<=A;y+=64)d((this||yg)._hash,b(C.subarray(y-64,y)));(this||yg)._buff=y-64<A?new Uint8Array(C.buffer.slice(y-64)):new Uint8Array(0);return this||yg};u.ArrayBuffer.prototype.end=function(y){var A=(this||yg)._buff,C=A.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L;for(L=0;L<C;L+=1)E[L>>2]|=A[L]<<(L%4<<
3);this._finish(E,C);A=l((this||yg)._hash);y&&(A=q(A));this.reset();return A};u.ArrayBuffer.prototype.reset=function(){(this||yg)._buff=new Uint8Array(0);(this||yg)._length=0;(this||yg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||yg};u.ArrayBuffer.prototype.getState=function(){var y=u.prototype.getState.call(this||yg);y.buff=String.fromCharCode.apply(null,new Uint8Array(y.buff));return y};u.ArrayBuffer.prototype.setState=function(y){var A=y.buff,C=A.length,E=new ArrayBuffer(C);
E=new Uint8Array(E);var L;for(L=0;L<C;L+=1)E[L]=A.charCodeAt(L);y.buff=E;return u.prototype.setState.call(this||yg,y)};u.ArrayBuffer.prototype.destroy=u.prototype.destroy;u.ArrayBuffer.prototype._finish=u.prototype._finish;u.ArrayBuffer.hash=function(y,A){var C=new Uint8Array(y),E=C.length;y=[1732584193,-271733879,-1732584194,271733878];var L;for(L=64;L<=E;L+=64)d(y,b(C.subarray(L-64,L)));C=L-64<E?C.subarray(L-64):new Uint8Array(0);var I=C.length;var V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(L=0;L<
I;L+=1)V[L>>2]|=C[L]<<(L%4<<3);V[L>>2]|=128<<(L%4<<3);if(55<L)for(d(y,V),L=0;16>L;L+=1)V[L]=0;E=(8*E).toString(16).match(/(.*?)(.{0,8})$/);C=parseInt(E[2],16);E=parseInt(E[1],16)||0;V[14]=C;V[15]=E;d(y,V);y=l(y);return A?q(y):y};return u}(),Ix={};Object.defineProperty(Ix,"__esModule",{value:!0});var QY=fl,SQ=zB&&"object"===typeof zB&&"default"in zB?zB["default"]:zB,bla=self.setImmediate||self.setTimeout;Ix.binaryMd5=function(a,d){function k(){bla(e)}function b(){var C=y.end(!0);C=QY.btoa(C);d(C);
y.destroy()}function e(){var C=w*q,E=C+q;w++;w<u?A(y,a,C,E,k):A(y,a,C,E,b)}var l="string"===typeof a,p=l?a.length:a.size,q=Math.min(32768,p),u=Math.ceil(p/q),w=0,y=l?new SQ:new SQ.ArrayBuffer,A=l?Zaa:Yaa;e()};Ix.stringMd5=function(a){return SQ.hash(a)};var fg={};Object.defineProperty(fg,"__esModule",{value:!0});var SM=XE(dQ),cla=XE(cj),F4=XE(Rh),ZE=XE(Wo),RY=Function.prototype.toString,$aa=RY.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var YE=!!localStorage.getItem("_pouch_check_localstorage")}catch(a){YE=
!1}cla(Kw,ZE);Kw.prototype.addListener=function(a,d,k,b){function e(){if(l._listeners[d])if(p)p="waiting";else{p=!0;var q=TM(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));k.changes(q).on("change",function(u){u.seq>b.since&&!b.cancelled&&(b.since=u.seq,b.onChange(u))}).on("complete",function(){"waiting"===p&&F4(e);p=!1}).on("error",function(){p=!1})}}if(!this._listeners[d]){var l=this,p=!1;this._listeners[d]=e;this.on(a,e)}};Kw.prototype.removeListener=
function(a,d){d in this._listeners&&(ZE.prototype.removeListener.call(this,a,this._listeners[d]),delete this._listeners[d])};Kw.prototype.notifyLocalWindows=function(a){YE&&(localStorage[a]="a"===localStorage[a]?"b":"a")};Kw.prototype.notify=function(a){this.emit(a);this.notifyLocalWindows(a)};var dla="function"===typeof Object.assign?Object.assign:function(a){for(var d=Object(a),k=1;k<arguments.length;k++){var b=arguments[k];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=
b[e])}return d},ela=function(){}.name?function(a){return a.name}:function(a){return(a=a.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&a[1]?a[1]:""},G4="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),fla=/(?:^|&)([^&=]*)=?([^&]*)/g,gla=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
hla=Ju.v4;fg.adapterFun=function(a,d){return TY(SM(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var b=this;aba(b,a,k);return this.taskqueue.isReady?d.apply(this,k):new Promise(function(e,l){b.taskqueue.addTask(function(p){p?l(p):e(b[a].apply(b,k))})})}))};fg.assign=dla;fg.bulkGetShim=function(a,d,k){function b(){var E=[];y.forEach(function(L){L.docs.forEach(function(I){E.push({id:L.id,docs:[I]})})});
k(null,{results:E})}function e(){if(!(C>=A.length)){var E=A.slice(C,Math.min(C+6,A.length));l(E,C);C+=E.length}}function l(E,L){E.forEach(function(I,V){var T=L+V;V=q.get(I);var Y=TM(V[0],["atts_since","attachments"]);Y.open_revs=V.map(function(Ba){return Ba.rev});Y.open_revs=Y.open_revs.filter(UY);var na=UY;0===Y.open_revs.length&&(delete Y.open_revs,na=bba);["revs","attachments","binary","ajax","latest"].forEach(function(Ba){Ba in d&&(Y[Ba]=d[Ba])});a.get(I,Y,function(Ba,F){Ba=Ba?[{error:Ba}]:na(F);
y[T]={id:I,docs:Ba};++w===u&&b();e()})})}var p=d.docs,q=new es.Map;p.forEach(function(E){q.has(E.id)?q.get(E.id).push(E):q.set(E.id,[E])});var u=q.size,w=0,y=Array(u),A=[];q.forEach(function(E,L){A.push(L)});var C=0;e()};fg.changesHandler=Kw;fg.clone=Iz;fg.defaultBackOff=function(a){var d=0;a||(d=2E3);a=parseInt(a,10)||0;d=parseInt(d,10);d=d!==d||d<=a?(a||1)<<1:d+1;6E5<d&&(a=3E5,d=6E5);return~~((d-a)*Math.random()+a)};fg.explainError=function(a,d){UM("info","The above "+a+" is totally normal. "+d)};
fg.filterChange=function(a){var d={},k=a.filter&&"function"===typeof a.filter;d.query=a.query_params;return function(b){b.doc||(b.doc={});var e;if(e=k)try{e=!(0,a.filter)(b.doc,d)}catch(p){e=Af.createError(Af.BAD_REQUEST,"Filter function threw: "+p.toString())}if("object"===typeof e)return e;if(e)return!1;if(!a.include_docs)delete b.doc;else if(!a.attachments)for(var l in b.doc._attachments)b.doc._attachments.hasOwnProperty(l)&&(b.doc._attachments[l].stub=!0);return!0}};fg.flatten=function(a){for(var d=
[],k=0,b=a.length;k<b;k++)d=d.concat(a[k]);return d};fg.functionName=ela;fg.guardedConsole=UM;fg.hasLocalStorage=function(){return YE};fg.invalidIdError=function(a){var d;a?"string"!==typeof a?d=Af.createError(Af.INVALID_ID):/^_/.test(a)&&!/^_(design|local)/.test(a)&&(d=Af.createError(Af.RESERVED_ID)):d=Af.createError(Af.MISSING_ID);if(d)throw d;};fg.isRemote=function(a){return"boolean"===typeof a._remote?a._remote:"function"===typeof a.type?(UM("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===a.type()):!1};fg.listenerCount=function(a,d){return"listenerCount"in a?a.listenerCount(d):ZE.listenerCount(a,d)};fg.nextTick=F4;fg.normalizeDdocFunctionName=function(a){return(a=VY(a))?a.join("/"):null};fg.once=SY;fg.parseDdocFunctionName=VY;fg.parseUri=function(a){a=gla.exec(a);for(var d={},k=14;k--;){var b=G4[k],e=a[k]||"",l=-1!==["user","password"].indexOf(b);d[b]=l?decodeURIComponent(e):e}d.queryKey={};d[G4[12]].replace(fla,function(p,q,u){q&&(d.queryKey[q]=u)});return d};fg.pick=TM;
fg.rev=function(a,d){a=Iz(a);if(!d)return Ju.v4().replace(/-/g,"").toLowerCase();delete a._rev_tree;return Ix.stringMd5(JSON.stringify(a))};fg.scopeEval=function(a,d){var k=[],b=[],e;for(e in d)d.hasOwnProperty(e)&&(k.push(e),b.push(d[e]));k.push(a);return Function.apply(null,k).apply(null,b)};fg.toPromise=TY;fg.upsert=WY;fg.uuid=hla;var H4={};H4=function(){for(var a={},d=0;d<arguments.length;d++){var k=arguments[d],b;for(b in k)ila.call(k,b)&&(a[b]=k[b])}return a};var ila=Object.prototype.hasOwnProperty,
ls=H4,I4={};I4=function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],b;for(b in k)jla.call(k,b)&&(a[b]=k[b])}return a};for(var jla=Object.prototype.hasOwnProperty,kla={},lla=I4,J4=kla=function(){var a=ls.apply(null,arguments);return lla(a,{bufferKeys:a.bufferKeys||!1,snapshots:a.snapshots||!1,permanence:a.permanence||!1,seek:a.seek||!1,clear:a.clear||!1,status:a.status||!1,createIfMissing:a.createIfMissing||!1,errorIfExists:a.errorIfExists||!1,deferredOpen:a.deferredOpen||!1,openCallback:a.openCallback||
!1,promises:a.promises||!1,streams:a.streams||!1,encodings:a.encodings||!1,additionalMethods:ls(a.additionalMethods)})},cp=[],En=[],mla="undefined"!==typeof Uint8Array?Uint8Array:Array,Jx=0;64>Jx;++Jx)cp[Jx]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Jx],En["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Jx)]=Jx;En[45]=62;En[95]=63;var $E={byteLength:function(a){a=XY(a);var d=a[1];return 3*(a[0]+d)/4-d},toByteArray:function(a){var d=XY(a);var k=
d[0];d=d[1];var b=new mla(3*(k+d)/4-d),e=0,l=0<d?k-4:k,p;for(p=0;p<l;p+=4)k=En[a.charCodeAt(p)]<<18|En[a.charCodeAt(p+1)]<<12|En[a.charCodeAt(p+2)]<<6|En[a.charCodeAt(p+3)],b[e++]=k>>16&255,b[e++]=k>>8&255,b[e++]=k&255;2===d&&(k=En[a.charCodeAt(p)]<<2|En[a.charCodeAt(p+1)]>>4,b[e++]=k&255);1===d&&(k=En[a.charCodeAt(p)]<<10|En[a.charCodeAt(p+1)]<<4|En[a.charCodeAt(p+2)]>>2,b[e++]=k>>8&255,b[e++]=k&255);return b},fromByteArray:function(a){for(var d=a.length,k=d%3,b=[],e=0,l=d-k;e<l;e+=16383)b.push(eba(a,
e,e+16383>l?l:e+16383));1===k?(a=a[d-1],b.push(cp[a>>2]+cp[a<<4&63]+"==")):2===k&&(a=(a[d-2]<<8)+a[d-1],b.push(cp[a>>10]+cp[a>>4&63]+cp[a<<2&63]+"="));return b.join("")}},Lw={read:function(a,d,k,b,e){var l=8*e-b-1;var p=(1<<l)-1,q=p>>1,u=-7;e=k?e-1:0;var w=k?-1:1,y=a[d+e];e+=w;k=y&(1<<-u)-1;y>>=-u;for(u+=l;0<u;k=256*k+a[d+e],e+=w,u-=8);l=k&(1<<-u)-1;k>>=-u;for(u+=b;0<u;l=256*l+a[d+e],e+=w,u-=8);if(0===k)k=1-q;else{if(k===p)return l?NaN:Infinity*(y?-1:1);l+=Math.pow(2,b);k-=q}return(y?-1:1)*l*Math.pow(2,
k-b)},write:function(a,d,k,b,e,l){var p,q=8*l-e-1,u=(1<<q)-1,w=u>>1,y=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;var A=b?1:-1,C=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,b=u):(b=Math.floor(Math.log(d)/Math.LN2),1>d*(p=Math.pow(2,-b))&&(b--,p*=2),d=1<=b+w?d+y/p:d+y*Math.pow(2,1-w),2<=d*p&&(b++,p/=2),b+w>=u?(d=0,b=u):1<=b+w?(d=(d*p-1)*Math.pow(2,e),b+=w):(d=d*Math.pow(2,w-1)*Math.pow(2,e),b=0));for(;8<=e;a[k+l]=d&255,l+=A,d/=256,e-=8);b=b<<e|d;for(q+=e;0<q;a[k+
l]=b&255,l+=A,b/=256,q-=8);a[k+l-A]|=128*C}},K4="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var L4=Md;var VM=2147483647;Md.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(a,d);return 42===a.foo()}catch(k){return!1}}();Md.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Md.prototype,"parent",{enumerable:!0,get:function(){if(Md.isBuffer(this))return this.buffer}});Object.defineProperty(Md.prototype,"offset",{enumerable:!0,get:function(){if(Md.isBuffer(this))return this.byteOffset}});Md.poolSize=8192;Md.from=function(a,d,k){return YY(a,d,k)};Object.setPrototypeOf(Md.prototype,Uint8Array.prototype);Object.setPrototypeOf(Md,Uint8Array);Md.alloc=function(a,d,k){aZ(a);a=0>=a?oq(a):void 0!==d?"string"===typeof k?oq(a).fill(d,k):oq(a).fill(d):oq(a);
return a};Md.allocUnsafe=function(a){return WM(a)};Md.allocUnsafeSlow=function(a){return WM(a)};Md.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==Md.prototype};Md.compare=function(a,d){dp(a,Uint8Array)&&(a=Md.from(a,a.offset,a.byteLength));dp(d,Uint8Array)&&(d=Md.from(d,d.offset,d.byteLength));if(!Md.isBuffer(a)||!Md.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===d)return 0;for(var k=a.length,b=d.length,e=0,l=Math.min(k,
b);e<l;++e)if(a[e]!==d[e]){k=a[e];b=d[e];break}return k<b?-1:b<k?1:0};Md.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Md.concat=function(a,d){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return Md.alloc(0);var k;if(void 0===d)for(k=d=0;k<a.length;++k)d+=a[k].length;
d=Md.allocUnsafe(d);var b=0;for(k=0;k<a.length;++k){var e=a[k];if(dp(e,Uint8Array))b+e.length>d.length?Md.from(e).copy(d,b):Uint8Array.prototype.set.call(d,e,b);else if(Md.isBuffer(e))e.copy(d,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=e.length}return d};Md.byteLength=ZY;Md.prototype._isBuffer=!0;Md.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<a;d+=2)Wt(this,d,d+1);return this};
Md.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<a;d+=4)Wt(this,d,d+3),Wt(this,d+1,d+2);return this};Md.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<a;d+=8)Wt(this,d,d+7),Wt(this,d+1,d+6),Wt(this,d+2,d+5),Wt(this,d+3,d+4);return this};Md.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?
cZ(this,0,a):gba.apply(this,arguments)};Md.prototype.toLocaleString=Md.prototype.toString;Md.prototype.equals=function(a){if(!Md.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===Md.compare(this,a)};Md.prototype.inspect=function(){var a=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(a+=" ... ");return"<Buffer "+a+">"};K4&&(Md.prototype[K4]=Md.prototype.inspect);Md.prototype.compare=function(a,d,k,b,e){dp(a,Uint8Array)&&(a=Md.from(a,a.offset,
a.byteLength));if(!Md.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);void 0===d&&(d=0);void 0===k&&(k=a?a.length:0);void 0===b&&(b=0);void 0===e&&(e=this.length);if(0>d||k>a.length||0>b||e>this.length)throw new RangeError("out of range index");if(b>=e&&d>=k)return 0;if(b>=e)return-1;if(d>=k)return 1;d>>>=0;k>>>=0;b>>>=0;e>>>=0;if(this===a)return 0;var l=e-b,p=k-d,q=Math.min(l,p);b=this.slice(b,e);a=a.slice(d,k);for(d=0;d<
q;++d)if(b[d]!==a[d]){l=b[d];p=a[d];break}return l<p?-1:p<l?1:0};Md.prototype.includes=function(a,d,k){return-1!==this.indexOf(a,d,k)};Md.prototype.indexOf=function(a,d,k){return dZ(this,a,d,k,!0)};Md.prototype.lastIndexOf=function(a,d,k){return dZ(this,a,d,k,!1)};Md.prototype.write=function(a,d,k,b){if(void 0===d)b="utf8",k=this.length,d=0;else if(void 0===k&&"string"===typeof d)b=d,k=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(k)?(k>>>=0,void 0===b&&(b="utf8")):(b=k,k=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var e=this.length-d;if(void 0===k||k>e)k=e;if(0<a.length&&(0>k||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{d=Number(d)||0;b=this.length-d;k?(k=Number(k),k>b&&(k=b)):k=b;b=a.length;k>b/2&&(k=b/2);for(b=0;b<k;++b){e=parseInt(a.substr(2*b,2),16);if(e!==e){a=b;break a}this[d+b]=e}a=b}return a;case "utf8":case "utf-8":return aF(ZM(a,this.length-d),this,d,k);case "ascii":case "latin1":case "binary":b=[];for(e=0;e<a.length;++e)b.push(a.charCodeAt(e)&
255);return aF(b,this,d,k);case "base64":return aF($E.toByteArray(bZ(a)),this,d,k);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=a;e=this.length-d;for(var l=[],p=0;p<b.length&&!(0>(e-=2));++p){var q=b.charCodeAt(p);a=q>>8;q%=256;l.push(q);l.push(a)}return aF(l,this,d,k);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};Md.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var fZ=4096;Md.prototype.slice=
function(a,d){var k=this.length;a=~~a;d=void 0===d?k:~~d;0>a?(a+=k,0>a&&(a=0)):a>k&&(a=k);0>d?(d+=k,0>d&&(d=0)):d>k&&(d=k);d<a&&(d=a);a=this.subarray(a,d);Object.setPrototypeOf(a,Md.prototype);return a};Md.prototype.readUintLE=Md.prototype.readUIntLE=function(a,d,k){a>>>=0;d>>>=0;k||Gk(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;return k};Md.prototype.readUintBE=Md.prototype.readUIntBE=function(a,d,k){a>>>=0;d>>>=0;k||Gk(a,d,this.length);k=this[a+--d];for(var b=1;0<
d&&(b*=256);)k+=this[a+--d]*b;return k};Md.prototype.readUint8=Md.prototype.readUInt8=function(a,d){a>>>=0;d||Gk(a,1,this.length);return this[a]};Md.prototype.readUint16LE=Md.prototype.readUInt16LE=function(a,d){a>>>=0;d||Gk(a,2,this.length);return this[a]|this[a+1]<<8};Md.prototype.readUint16BE=Md.prototype.readUInt16BE=function(a,d){a>>>=0;d||Gk(a,2,this.length);return this[a]<<8|this[a+1]};Md.prototype.readUint32LE=Md.prototype.readUInt32LE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return(this[a]|
this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};Md.prototype.readUint32BE=Md.prototype.readUInt32BE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};Md.prototype.readIntLE=function(a,d,k){a>>>=0;d>>>=0;k||Gk(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;k>=128*b&&(k-=Math.pow(2,8*d));return k};Md.prototype.readIntBE=function(a,d,k){a>>>=0;d>>>=0;k||Gk(a,d,this.length);k=d;for(var b=1,e=this[a+--k];0<k&&(b*=256);)e+=
this[a+--k]*b;e>=128*b&&(e-=Math.pow(2,8*d));return e};Md.prototype.readInt8=function(a,d){a>>>=0;d||Gk(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};Md.prototype.readInt16LE=function(a,d){a>>>=0;d||Gk(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};Md.prototype.readInt16BE=function(a,d){a>>>=0;d||Gk(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};Md.prototype.readInt32LE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return this[a]|this[a+
1]<<8|this[a+2]<<16|this[a+3]<<24};Md.prototype.readInt32BE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};Md.prototype.readFloatLE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return Lw.read(this,a,!0,23,4)};Md.prototype.readFloatBE=function(a,d){a>>>=0;d||Gk(a,4,this.length);return Lw.read(this,a,!1,23,4)};Md.prototype.readDoubleLE=function(a,d){a>>>=0;d||Gk(a,8,this.length);return Lw.read(this,a,!0,52,8)};Md.prototype.readDoubleBE=function(a,
d){a>>>=0;d||Gk(a,8,this.length);return Lw.read(this,a,!1,52,8)};Md.prototype.writeUintLE=Md.prototype.writeUIntLE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||cm(this,a,d,k,Math.pow(2,8*k)-1,0);b=1;var e=0;for(this[d]=a&255;++e<k&&(b*=256);)this[d+e]=a/b&255;return d+k};Md.prototype.writeUintBE=Md.prototype.writeUIntBE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||cm(this,a,d,k,Math.pow(2,8*k)-1,0);b=k-1;var e=1;for(this[d+b]=a&255;0<=--b&&(e*=256);)this[d+b]=a/e&255;return d+k};Md.prototype.writeUint8=Md.prototype.writeUInt8=
function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,1,255,0);this[d]=a&255;return d+1};Md.prototype.writeUint16LE=Md.prototype.writeUInt16LE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,2,65535,0);this[d]=a&255;this[d+1]=a>>>8;return d+2};Md.prototype.writeUint16BE=Md.prototype.writeUInt16BE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,2,65535,0);this[d]=a>>>8;this[d+1]=a&255;return d+2};Md.prototype.writeUint32LE=Md.prototype.writeUInt32LE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,4,4294967295,0);this[d+3]=
a>>>24;this[d+2]=a>>>16;this[d+1]=a>>>8;this[d]=a&255;return d+4};Md.prototype.writeUint32BE=Md.prototype.writeUInt32BE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,4,4294967295,0);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};Md.prototype.writeIntLE=function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),cm(this,a,d,k,b-1,-b));b=0;var e=1,l=0;for(this[d]=a&255;++b<k&&(e*=256);)0>a&&0===l&&0!==this[d+b-1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};Md.prototype.writeIntBE=
function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),cm(this,a,d,k,b-1,-b));b=k-1;var e=1,l=0;for(this[d+b]=a&255;0<=--b&&(e*=256);)0>a&&0===l&&0!==this[d+b+1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};Md.prototype.writeInt8=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,1,127,-128);0>a&&(a=255+a+1);this[d]=a&255;return d+1};Md.prototype.writeInt16LE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,2,32767,-32768);this[d]=a&255;this[d+1]=a>>>8;return d+2};Md.prototype.writeInt16BE=function(a,d,k){a=+a;d>>>=
0;k||cm(this,a,d,2,32767,-32768);this[d]=a>>>8;this[d+1]=a&255;return d+2};Md.prototype.writeInt32LE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,4,2147483647,-2147483648);this[d]=a&255;this[d+1]=a>>>8;this[d+2]=a>>>16;this[d+3]=a>>>24;return d+4};Md.prototype.writeInt32BE=function(a,d,k){a=+a;d>>>=0;k||cm(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};Md.prototype.writeFloatLE=function(a,d,k){return hZ(this,a,d,
!0,k)};Md.prototype.writeFloatBE=function(a,d,k){return hZ(this,a,d,!1,k)};Md.prototype.writeDoubleLE=function(a,d,k){return iZ(this,a,d,!0,k)};Md.prototype.writeDoubleBE=function(a,d,k){return iZ(this,a,d,!1,k)};Md.prototype.copy=function(a,d,k,b){if(!Md.isBuffer(a))throw new TypeError("argument should be a Buffer");k||(k=0);b||0===b||(b=this.length);d>=a.length&&(d=a.length);d||(d=0);0<b&&b<k&&(b=k);if(b===k||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>k||k>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);a.length-d<b-k&&(b=a.length-d+k);var e=b-k;this===a&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(d,k,b):Uint8Array.prototype.set.call(a,this.subarray(k,b),d);return e};Md.prototype.fill=function(a,d,k,b){if("string"===typeof a){"string"===typeof d?(b=d,d=0,k=this.length):"string"===typeof k&&(b=k,k=this.length);if(void 0!==
b&&"string"!==typeof b)throw new TypeError("encoding must be a string");if("string"===typeof b&&!Md.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===a.length){var e=a.charCodeAt(0);if("utf8"===b&&128>e||"latin1"===b)a=e}}else"number"===typeof a?a&=255:"boolean"===typeof a&&(a=Number(a));if(0>d||this.length<d||this.length<k)throw new RangeError("Out of range index");if(k<=d)return this;d>>>=0;k=void 0===k?this.length:k>>>0;a||(a=0);if("number"===typeof a)for(b=d;b<k;++b)this[b]=a;else{e=
Md.isBuffer(a)?a:Md.from(a,b);var l=e.length;if(0===l)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(b=0;b<k-d;++b)this[b+d]=e[b%l]}return this};var iba=/[^+/0-9A-Za-z-_]/g,hba=function(){for(var a=Array(256),d=0;16>d;++d)for(var k=16*d,b=0;16>b;++b)a[k+b]="0123456789abcdef"[d]+"0123456789abcdef"[b];return a}(),pq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nla={};Gr.prototype.next=function(a){var d=this||pq;if("function"!==typeof a)throw Error("next() requires a callback argument");
if(d._ended)return Rh(a,Error("cannot call next() after end()")),d;if(d._nexting)return Rh(a,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;a.apply(null,arguments)});return d};Gr.prototype._next=function(a){Rh(a)};Gr.prototype.seek=function(a){if((this||pq)._ended)throw Error("cannot call seek() after end()");if((this||pq)._nexting)throw Error("cannot call seek() before next() has completed");a=(this||pq).db._serializeKey(a);this._seek(a)};
Gr.prototype._seek=function(a){};Gr.prototype.end=function(a){if("function"!==typeof a)throw Error("end() requires a callback argument");if((this||pq)._ended)return Rh(a,Error("end() already called on iterator"));(this||pq)._ended=!0;this._end(a)};Gr.prototype._end=function(a){Rh(a)};Gr.prototype._nextTick=Rh;var M4=nla=Gr,hk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ola={};eo.prototype._checkWritten=function(){if((this||hk)._written)throw Error("write() already called on this batch");
};eo.prototype.put=function(a,d){this._checkWritten();var k=(this||hk).db._checkKey(a)||(this||hk).db._checkValue(d);if(k)throw k;a=(this||hk).db._serializeKey(a);d=(this||hk).db._serializeValue(d);this._put(a,d);return this||hk};eo.prototype._put=function(a,d){(this||hk)._operations.push({type:"put",key:a,value:d})};eo.prototype.del=function(a){this._checkWritten();var d=(this||hk).db._checkKey(a);if(d)throw d;a=(this||hk).db._serializeKey(a);this._del(a);return this||hk};eo.prototype._del=function(a){(this||
hk)._operations.push({type:"del",key:a})};eo.prototype.clear=function(){this._checkWritten();this._clear();return this||hk};eo.prototype._clear=function(){(this||hk)._operations=[]};eo.prototype.write=function(a,d){this._checkWritten();"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==typeof a||null===a)a={};(this||hk)._written=!0;this._write(a,d)};eo.prototype._write=function(a,d){(this||hk).db._batch((this||hk)._operations,a,
d)};eo.prototype._nextTick=Rh;var pla=ola=eo,zm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,N4={},jba=J4,kba=Object.prototype.hasOwnProperty,lba="start end gt gte lt lte".split(" ");hj.prototype.open=function(a,d){var k=this||zm,b=(this||zm).status;"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("open() requires a callback argument");if("object"!==typeof a||null===a)a={};a.createIfMissing=!1!==a.createIfMissing;a.errorIfExists=!!a.errorIfExists;
(this||zm).status="opening";this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})};hj.prototype._open=function(a,d){Rh(d)};hj.prototype.close=function(a){var d=this||zm,k=(this||zm).status;if("function"!==typeof a)throw Error("close() requires a callback argument");(this||zm).status="closing";this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})};hj.prototype._close=function(a){Rh(a)};hj.prototype.get=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==
typeof k)throw Error("get() requires a callback argument");var b=this._checkKey(a);if(b)return Rh(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(a,d,k)};hj.prototype._get=function(a,d,k){Rh(function(){k(Error("NotFound"))})};hj.prototype.put=function(a,d,k,b){"function"===typeof k&&(b=k);if("function"!==typeof b)throw Error("put() requires a callback argument");var e=this._checkKey(a)||this._checkValue(d);if(e)return Rh(b,e);a=this._serializeKey(a);
d=this._serializeValue(d);if("object"!==typeof k||null===k)k={};this._put(a,d,k,b)};hj.prototype._put=function(a,d,k,b){Rh(b)};hj.prototype.del=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==typeof k)throw Error("del() requires a callback argument");var b=this._checkKey(a);if(b)return Rh(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};this._del(a,d,k)};hj.prototype._del=function(a,d,k){Rh(k)};hj.prototype.batch=function(a,d,k){if(!arguments.length)return this._chainedBatch();
"function"===typeof d&&(k=d);"function"===typeof a&&(k=a);if("function"!==typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return Rh(k,Error("batch(array) requires an array argument"));if(0===a.length)return Rh(k);if("object"!==typeof d||null===d)d={};for(var b=Array(a.length),e=0;e<a.length;e++){if("object"!==typeof a[e]||null===a[e])return Rh(k,Error("batch(array) element must be an object and not `null`"));var l=ls(a[e]);if("put"!==l.type&&"del"!==l.type)return Rh(k,
Error("`type` must be 'put' or 'del'"));var p=this._checkKey(l.key);if(p)return Rh(k,p);l.key=this._serializeKey(l.key);if("put"===l.type){if(p=this._checkValue(l.value))return Rh(k,p);l.value=this._serializeValue(l.value)}b[e]=l}this._batch(b,d,k)};hj.prototype._batch=function(a,d,k){Rh(k)};hj.prototype.clear=function(a,d){if("function"===typeof a)d=a;else if("function"!==typeof d)throw Error("clear() requires a callback argument");a=jZ(this||zm,a);a.reverse=!!a.reverse;a.limit="limit"in a?a.limit:
-1;this._clear(a,d)};hj.prototype._clear=function(a,d){a.keys=!0;a.values=!1;a.keyAsBuffer=!0;a.valueAsBuffer=!0;var k=this._iterator(a),b={},e=this||zm,l=function(p){if(p)return k.end(function(){d(p)});k.next(function(q,u){if(q)return l(q);if(void 0===u)return k.end(d);e._del(u,b,l)})};l()};hj.prototype._setupIteratorOptions=function(a){a=jZ(this||zm,a);a.reverse=!!a.reverse;a.keys=!1!==a.keys;a.values=!1!==a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=!1!==a.keyAsBuffer;a.valueAsBuffer=
!1!==a.valueAsBuffer;return a};hj.prototype.iterator=function(a){if("object"!==typeof a||null===a)a={};a=this._setupIteratorOptions(a);return this._iterator(a)};hj.prototype._iterator=function(a){return new M4(this||zm)};hj.prototype._chainedBatch=function(){return new pla(this||zm)};hj.prototype._serializeKey=function(a){return a};hj.prototype._serializeValue=function(a){return a};hj.prototype._checkKey=function(a){if(null===a||void 0===a)return Error("key cannot be `null` or `undefined`");if(L4.isBuffer(a)&&
0===a.length)return Error("key cannot be an empty Buffer");if(""===a)return Error("key cannot be an empty String");if(Array.isArray(a)&&0===a.length)return Error("key cannot be an empty Array")};hj.prototype._checkValue=function(a){if(null===a||void 0===a)return Error("value cannot be `null` or `undefined`")};hj.prototype._nextTick=Rh;N4=hj;var qla=N4;var fo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O4={},kZ=M4;cj(Mw,kZ);Mw.prototype.setDb=function(a){var d=
(this||fo)._iterator=a.iterator((this||fo)._options);(this||fo)._operations.forEach(function(k){d[k.method].apply(d,k.args)})};Mw.prototype._operation=function(a,d){if((this||fo)._iterator)return(this||fo)._iterator[a].apply((this||fo)._iterator,d);(this||fo)._operations.push({method:a,args:d})};["next","end"].forEach(function(a){Mw.prototype["_"+a]=function(){this._operation(a,arguments)}});Mw.prototype.seek=function(){this._operation("seek",arguments)};O4=Mw;var Hk="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,TQ={},lZ=qla,oZ=O4,nZ=["put","get","del","batch","clear"],mba=["approximateSize","compactRange"];cj(Xt,lZ);Xt.prototype.type="deferred-leveldown";Xt.prototype._open=function(a,d){var k=this||Hk;(this||Hk)._db.open(a,function(b){if(b)return d(b);k._operations.forEach(function(e){e.iterator?e.iterator.setDb(k._db):k._db[e.method].apply(k._db,e.args)});k._operations=[];nba(k);d()})};Xt.prototype._close=function(a){var d=this||Hk;(this||Hk)._db.close(function(k){if(k)return a(k);
mZ(d);a()})};Xt.prototype._serializeKey=function(a){return a};Xt.prototype._serializeValue=function(a){return a};TQ=Xt;TQ.DeferredIterator=oZ;var rla=TQ,rZ={},qZ=!1,$M={},sZ=!1,bN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sla={},zba=sla=function(a,d){if(aN("noDeprecation"))return a;var k=!1;return function(){if(!k){if(aN("throwDeprecation"))throw Error(d);aN("traceDeprecation")?console.trace(d):console.warn(d);k=!0}return a.apply(this||bN,arguments)}},II={},
JI=Eg,ep=JI.Buffer;ep.from&&ep.alloc&&ep.allocUnsafe&&ep.allocUnsafeSlow?II=JI:(tZ(JI,II),II.Buffer=Yt);Yt.prototype=Object.create(ep.prototype);tZ(ep,Yt);Yt.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return ep(a,d,k)};Yt.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=ep(a);void 0!==d?"string"===typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};Yt.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");
return ep(a)};Yt.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return JI.SlowBuffer(a)};var hN={},cN=II.Buffer,uZ=cN.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};hN.StringDecoder=Jz;Jz.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var d=
this.fillLast(a);if(void 0===d)return"";var k=this.lastNeed;this.lastNeed=0}else k=0;return k<a.length?d?d+this.text(a,k):this.text(a,k):d||""};Jz.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};Jz.prototype.text=function(a,d){var k=wba(this,a,d);if(!this.lastNeed)return a.toString("utf8",d);this.lastTotal=k;k=a.length-(k-this.lastNeed);a.copy(this.lastChar,0,k);return a.toString("utf8",d,k)};Jz.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};var wZ={},vZ=!1,yZ={},xZ=!1,BZ=Object.freeze({}),AZ={},zZ=!1,EZ={},DZ=!1,HZ={},GZ=!1,fN={},JZ=!1,Aba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gN={},KZ=!1,NZ={},MZ=!1,iN={},OZ=!1,Cba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jN={},QZ=!1,
UQ={},P4=!1,Q4={},R4=!1,Jm={},S4=!1;S4||(S4=!0,Jm=Jm=LZ(),Jm.Stream=Jm,Jm.Readable=Jm,Jm.Writable=IZ(),Jm.Duplex=Ow(),Jm.Transform=PZ(),Jm.PassThrough=function(){function a(k){if(!(this instanceof a))return new a(k);d.call(this,k)}if(P4)return UQ;P4=!0;UQ=a;var d=PZ();cj(a,d);a.prototype._transform=function(k,b,e){e(null,k)};return UQ}(),Jm.finished=eN(),Jm.pipeline=function(){function a(w){var y=!1;return function(){y||(y=!0,w.apply(void 0,arguments))}}function d(w){if(w)throw w;}function k(w,y,
A,C){C=a(C);var E=!1;w.on("close",function(){E=!0});void 0===l&&(l=eN());l(w,{readable:y,writable:A},function(I){if(I)return C(I);E=!0;C()});var L=!1;return function(I){if(!E&&!L){L=!0;if(w.setHeader&&"function"===typeof w.abort)return w.abort();if("function"===typeof w.destroy)return w.destroy();C(I||new u("pipe"))}}}function b(w){w()}function e(w,y){return w.pipe(y)}if(R4)return Q4;R4=!0;var l,p=Nw().codes,q=p.ERR_MISSING_ARGS,u=p.ERR_STREAM_DESTROYED;return Q4=function(){for(var w=arguments.length,
y=Array(w),A=0;A<w;A++)y[A]=arguments[A];var C=y.length?"function"!==typeof y[y.length-1]?d:y.pop():d;Array.isArray(y[0])&&(y=y[0]);if(2>y.length)throw new q("streams");var E,L=y.map(function(I,V){var T=V<y.length-1;return k(I,T,0<V,function(Y){E||(E=Y);Y&&L.forEach(b);T||(L.forEach(b),C(E))})});return y.reduce(e)}}());var T4=Jm;var go="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,U4={},tla=cj,RZ=T4.Readable,Dba=ls;U4=Pw;tla(Pw,RZ);Pw.prototype._read=function(){var a=
this||go,d=(this||go)._options;(this||go).destroyed||(this||go)._iterator.next(function(k,b,e){if(!a.destroyed){if(k)return a.destroy(k);void 0===b&&void 0===e?a.push(null):!1!==d.keys&&!1===d.values?a.push(b):!1===d.keys&&!1!==d.values?a.push(e):a.push({key:b,value:e})}})};Pw.prototype._destroy=function(a,d){(this||go)._iterator.end(function(k){d(a||k)})};var ula=U4,KI={};(function(a,d,k){KI?KI=k():d[a]=k()})("prr",KI,function(){var a="function"==typeof Object.defineProperty?function(k,b,e){Object.defineProperty(k,
b,e);return k}:function(k,b,e){k[b]=e.value;return k},d=function(k,b){var e="object"==typeof b,l=!e&&"string"==typeof b,p=function(q){return e?!!b[q]:l?-1<b.indexOf(q[0]):!1};return{enumerable:p("enumerable"),configurable:p("configurable"),writable:p("writable"),value:k}};return function(k,b,e,l){var p;l=d(e,l);if("object"==typeof b){for(p in b)Object.hasOwnProperty.call(b,p)&&(l.value=b[p],a(k,p,l));return k}return a(k,b,l)}});var Mj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,vla={},Eba=KI;kN.prototype=Error();var wla=vla=function(a){var d=function(k,b){return Fba(a,k,b)};return{CustomError:kN,FilesystemError:d("FilesystemError"),createError:d}},Ep={},xla=Ep.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Ep.errno={};Ep.code={};xla.forEach(function(a){Ep.errno[a.errno]=a;Ep.code[a.code]=a});Ep.custom=wla(Ep);
Ep.create=Ep.custom.createError;var yla={},Ku=Ep.create,Lu=Ku("LevelUPError"),VQ=Ku("NotFoundError",Lu);VQ.prototype.notFound=!0;VQ.prototype.status=404;var Mu=yla={LevelUPError:Lu,InitializationError:Ku("InitializationError",Lu),OpenError:Ku("OpenError",Lu),ReadError:Ku("ReadError",Lu),WriteError:Ku("WriteError",Lu),NotFoundError:VQ,EncodingError:Ku("EncodingError",Lu)},zla={},ms=zla=function(){var a,d=new Promise(function(k,b){a=function(e,l){e?b(e):k(l)}});a.promise=d;return a};var Kx=function(a,
d){return"function"===typeof a?a:d};var V4=function(a){return"object"===typeof a&&null!==a?a:{}};var Nj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Ala={},AB=Mu.WriteError;Kz.prototype.put=function(a,d){try{(this||Nj).batch.put(a,d)}catch(k){throw new AB(k);}(this||Nj).ops.push({type:"put",key:a,value:d});(this||Nj).length++;return this||Nj};Kz.prototype.del=function(a){try{(this||Nj).batch.del(a)}catch(d){throw new AB(d);}(this||Nj).ops.push({type:"del",key:a});
(this||Nj).length++;return this||Nj};Kz.prototype.clear=function(){try{(this||Nj).batch.clear()}catch(a){throw new AB(a);}(this||Nj).ops=[];(this||Nj).length=0;return this||Nj};Kz.prototype.write=function(a,d){var k=(this||Nj)._levelup,b=(this||Nj).ops;d=Kx(a,d);if(!d){d=ms();var e=d.promise}a=V4(a);try{(this||Nj).batch.write(a,function(l){if(l)return d(new AB(l));k.emit("batch",b);d()})}catch(l){throw new AB(l);}return e};var Bla=Ala=Kz,Rba={assign:TZ,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:TZ})}},W4=Object.prototype.toString,X4=function(a){var d=W4.call(a),k="[object Arguments]"===d;return k||(k="[object Array]"!==d&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&0<=a.length&&"[object Function]"===W4.call(a.callee)),k};if(!Object.keys){var LI=Object.prototype.hasOwnProperty,Y4=Object.prototype.toString,Z4=Object.prototype.propertyIsEnumerable,Cla=!Z4.call({toString:null},"toString"),Dla=Z4.call(function(){},"prototype"),
MI="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),WQ=function(a){var d=a.constructor;return d&&d.prototype===a},Ela={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,
$window:!0},Fla=function(){if("undefined"==typeof window)return!1;for(var a in window)try{if(!Ela["$"+a]&&LI.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{WQ(window[a])}catch(d){return!0}}catch(d){return!0}return!1}();var Gla=function(a){var d=null!==a&&"object"==typeof a,k="[object Function]"===Y4.call(a),b=X4(a),e=d&&"[object String]"===Y4.call(a),l=[];if(!d&&!k&&!b)throw new TypeError("Object.keys called on a non-object");d=Dla&&k;if(e&&0<a.length&&!LI.call(a,0))for(e=0;e<a.length;++e)l.push(String(e));
if(b&&0<a.length)for(b=0;b<a.length;++b)l.push(String(b));else for(var p in a)d&&"prototype"===p||!LI.call(a,p)||l.push(String(p));if(Cla){if("undefined"!=typeof window&&Fla)try{var q=WQ(a)}catch(u){q=!1}else q=WQ(a);for(b=0;b<MI.length;++b)q&&"constructor"===MI[b]||!LI.call(a,MI[b])||l.push(MI[b])}return l}}var Hla=Gla,Ila=Array.prototype.slice,$4=Object.keys,NI=$4?function(a){return $4(a)}:Hla,a5=Object.keys;NI.shim=function(){Object.keys?function(){var a=Object.keys(arguments);return a&&a.length===
arguments.length}(1,2)||(Object.keys=function(a){return X4(a)?a5(Ila.call(a)):a5(a)}):Object.keys=NI;return Object.keys||NI};var Jla="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Kla=Object.prototype.toString,Lla=Array.prototype.concat,XQ=Object.defineProperty,b5=XQ&&function(){var a={};try{for(var d in XQ(a,"x",{enumerable:!1,value:a}),a)return!1;return a.x===a}catch(k){return!1}}(),BB=function(a,d){var k=2<arguments.length?arguments[2]:{},b=NI(d);Jla&&(b=Lla.call(b,Object.getOwnPropertySymbols(d)));
for(var e=0;e<b.length;e+=1){var l=void 0,p=a,q=b[e],u=d[b[e]],w=k[b[e]];(!(q in p)||"function"==typeof(l=w)&&"[object Function]"===Kla.call(l)&&w())&&(b5?XQ(p,q,{configurable:!0,enumerable:!1,value:u,writable:!0}):p[q]=u)}};BB.supportsDescriptors=!!b5;var c5=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Mla=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var a=
{},d=Symbol("test"),k=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(k))return!1;for(d in a[d]=42,a)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;k=Object.getOwnPropertySymbols(a);return 1!==k.length||k[0]!==d||!Object.prototype.propertyIsEnumerable.call(a,d)||"function"==typeof Object.getOwnPropertyDescriptor&&
(a=Object.getOwnPropertyDescriptor(a,d),42!==a.value||!0!==a.enumerable)?!1:!0},YQ=Array.prototype.slice,Nla=Object.prototype.toString,Ola=function(a){var d=this;if("function"!=typeof d||"[object Function]"!==Nla.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var k,b=YQ.call(arguments,1),e=Math.max(0,d.length-b.length),l=[],p=0;p<e;p++)l.push("$"+p);if(k=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof
k){var q=d.apply(this,b.concat(YQ.call(arguments)));return Object(q)===q?q:this}return d.apply(a,b.concat(YQ.call(arguments)))}),d.prototype)e=function(){},e.prototype=d.prototype,k.prototype=new e,e.prototype=null;return k},ZQ=Function.prototype.bind||Ola,CB=TypeError,Nu=Object.getOwnPropertyDescriptor;if(Nu)try{Nu({},"")}catch(a){Nu=null}var $Q=function(){throw new CB;},Pla=Nu?function(){try{return arguments.callee,$Q}catch(a){try{return Nu(arguments,"callee").get}catch(d){return $Q}}}():$Q,Ou=
"function"==typeof c5&&"function"==typeof Symbol&&"symbol"==typeof c5("foo")&&"symbol"==typeof Symbol("bar")&&Mla(),Pu=Object.getPrototypeOf||function(a){return a.__proto__},aR="undefined"==typeof Uint8Array?void 0:Pu(Uint8Array),bR={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Ou?Pu([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,
"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:
Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==
typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ou?Pu(Pu([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==
typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Ou?Pu((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==
typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Ou?Pu((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==
typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Ou?Pu(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Ou?Symbol:void 0,"%SymbolPrototype%":Ou?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Pla,"%TypedArray%":aR,"%TypedArrayPrototype%":aR?aR.prototype:void 0,"%TypeError%":CB,"%TypeErrorPrototype%":CB.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?
void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,
"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},d5=ZQ.call(Function.call,String.prototype.replace),Qla=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
Rla=/\\(\\)?/g,Sla=function(a){var d=[];return d5(a,Qla,function(k,b,e,l){d[d.length]=e?d5(l,Rla,"$1"):b||k}),d},e5,f5=function(a,d){if("string"!=typeof a||0===a.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');var k=Sla(a);var b="%"+(0<k.length?k[0]:"")+"%";if(!(b in bR))throw new SyntaxError("intrinsic "+b+" does not exist!");if(void 0===bR[b]&&!d)throw new CB("intrinsic "+
b+" exists, but is not available. Please file an issue!");b=bR[b];for(var e=1;e<k.length;e+=1)if(null!=b)if(Nu&&e+1>=k.length){var l=Nu(b,k[e]);if(!(d||k[e]in b))throw new CB("base intrinsic for "+a+" exists, but the property is not available.");b=l?l.get||l.value:b[k[e]]}else b=b[k[e]];return b}("%Function%"),Tla=f5.apply,Ula=f5.call;(e5=function(){return ZQ.apply(Ula,arguments)}).apply=function(){return ZQ.apply(Tla,arguments)};var cR,OI,Vla=(cR=function(a,d){return 0===a&&0===d?1/a==1/d:a===d||
!(a==a||d==d)},cR),Wla=(OI=function(){return"function"==typeof Object.is?Object.is:Vla},OI),g5=e5(OI(),Object);BB(g5,{getPolyfill:OI,implementation:cR,shim:function(){var a=Wla();return BB(Object,{is:a},{is:function(){return Object.is!==a}}),a}});var o_=g5;var h5=function(a){return a!=a};var PI,Xla=h5,Yla=(PI=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Xla},BB),Zla=h5,i5=PI();BB(i5,{getPolyfill:PI,implementation:Zla,shim:function(){var a=PI();return Yla(Number,
{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a}});var lN={},VZ=!1,XZ={},WZ=!1,Iba=void 0!==/a/g.flags,gF=function(a){var d=[];return a.forEach(function(k){return d.push(k)}),d},l_=function(a){var d=[];return a.forEach(function(k,b){return d.push([b,k])}),d},$Z=Object.is?Object.is:o_,cF=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},oN=Number.isNaN?Number.isNaN:i5,Mz=nN(Object.prototype.hasOwnProperty),fF=nN(Object.prototype.propertyIsEnumerable),a_=nN(Object.prototype.toString),
Ol=ug.types,Nba=Ol.isAnyArrayBuffer,Kba=Ol.isArrayBufferView,b_=Ol.isDate,dF=Ol.isMap,c_=Ol.isRegExp,eF=Ol.isSet,Jba=Ol.isNativeError,Oba=Ol.isBoxedPrimitive,d_=Ol.isNumberObject,e_=Ol.isStringObject,f_=Ol.isBooleanObject,g_=Ol.isBigIntObject,Pba=Ol.isSymbolObject,Lba=Ol.isFloat32Array,Mba=Ol.isFloat64Array,m_={isDeepEqual:function(a,d){return nn(a,d,!1)},isDeepStrictEqual:function(a,d){return nn(a,d,!0)}},pN={},n_=!1,$la=mN(),Tg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,ama={},iF=oh,hF=Wo.EventEmitter,bma=ug.inherits,p_=rla,Uba=J4,Tba=$la,Qw=V4,QI=Mu.WriteError,q_=Mu.ReadError,cma=Mu.NotFoundError,dma=Mu.OpenError,Sba=Mu.InitializationError;Ki.prototype.emit=hF.prototype.emit;Ki.prototype.once=hF.prototype.once;bma(Ki,hF);Ki.prototype.open=function(a,d){var k=this||Tg;"function"===typeof a&&(d=a,a=null);if(!d){d=ms();var b=d.promise}a||(a=(this||Tg).options);if(this.isOpen())return iF.nextTick(d,null,k),b;if(this._isOpening())return this.once("open",
function(){d(null,k)}),b;this.emit("opening");(this||Tg).db.open(a,function(e){if(e)return d(new dma(e));k.db=k._db;d(null,k);k.emit("open");k.emit("ready")});return b};Ki.prototype.close=function(a){var d=this||Tg;if(!a){a=ms();var k=a.promise}if(this.isOpen())(this||Tg).db.close(function(){d.emit("closed");a.apply(null,arguments)}),this.emit("closing"),(this||Tg).db=new p_((this||Tg)._db);else if(this.isClosed())iF.nextTick(a);else if("closing"===(this||Tg).db.status)this.once("closed",a);else if(this._isOpening())this.once("open",
function(){d.close(a)});return k};Ki.prototype.isOpen=function(){return"open"===(this||Tg).db.status};Ki.prototype._isOpening=function(){return"opening"===(this||Tg).db.status};Ki.prototype.isClosed=function(){return/^clos|new/.test((this||Tg).db.status)};Ki.prototype.get=function(a,d,k){k=Kx(d,k);if(!k){k=ms();var b=k.promise}if(Nz(this||Tg,k))return b;d=Qw(d);(this||Tg).db.get(a,d,function(e,l){if(e)return e=/notfound/i.test(e)||e.notFound?new cma("Key not found in database ["+a+"]",e):new q_(e),
k(e);k(null,l)});return b};Ki.prototype.put=function(a,d,k,b){var e=this||Tg;b=Kx(k,b);if(!b){b=ms();var l=b.promise}if(Nz(this||Tg,b))return l;k=Qw(k);(this||Tg).db.put(a,d,k,function(p){if(p)return b(new QI(p));e.emit("put",a,d);b()});return l};Ki.prototype.del=function(a,d,k){var b=this||Tg;k=Kx(d,k);if(!k){k=ms();var e=k.promise}if(Nz(this||Tg,k))return e;d=Qw(d);(this||Tg).db.del(a,d,function(l){if(l)return k(new QI(l));b.emit("del",a);k()});return e};Ki.prototype.batch=function(a,d,k){if(!arguments.length)return new Bla(this||
Tg);var b=this||Tg;k="function"===typeof a?a:Kx(d,k);if(!k){k=ms();var e=k.promise}if(Nz(this||Tg,k))return e;d=Qw(d);(this||Tg).db.batch(a,d,function(l){if(l)return k(new QI(l));b.emit("batch",a);k()});return e};Ki.prototype.iterator=function(a){return(this||Tg).db.iterator(a)};Ki.prototype.clear=function(a,d){var k=this||Tg;d=Kx(a,d);a=Qw(a);if(!d){d=ms();var b=d.promise}if(Nz(this||Tg,d))return b;(this||Tg).db.clear(a,function(e){if(e)return d(new QI(e));k.emit("clear",a);d()});return b};Ki.prototype.readStream=
Ki.prototype.createReadStream=function(a){a=ls({keys:!0,values:!0},a);"number"!==typeof a.limit&&(a.limit=-1);return new ula((this||Tg).db.iterator(a),a)};Ki.prototype.keyStream=Ki.prototype.createKeyStream=function(a){return this.createReadStream(ls(a,{keys:!0,values:!1}))};Ki.prototype.valueStream=Ki.prototype.createValueStream=function(a){return this.createReadStream(ls(a,{keys:!1,values:!0}))};Ki.prototype.toString=function(){return"LevelUP"};Ki.prototype.type="levelup";Ki.errors=Mu;var ema=ama=
Ki.default=Ki,Aj={},fma=Eg.Buffer;Aj.compare=function(a,d){if(fma.isBuffer(a)){for(var k=Math.min(a.length,d.length),b=0;b<k;b++){var e=a[b]-d[b];if(e)return e}return a.length-d.length}return a<d?-1:a>d?1:0};var gma=Aj.lowerBoundKey=function(a){return fp(a,"gt")||fp(a,"gte")||fp(a,"min")||(a.reverse?fp(a,"end"):fp(a,"start"))||void 0},dR=Aj.lowerBound=function(a,d){var k=gma(a);return k?a[k]:d},eR=Aj.lowerBoundInclusive=function(a){return Object.hasOwnProperty.call(a,"gt")?!1:!0},fR=Aj.upperBoundInclusive=
function(a){return Object.hasOwnProperty.call(a,"lt")?!1:!0},hma=Aj.lowerBoundExclusive=function(a){return!eR(a)},ima=Aj.upperBoundExclusive=function(a){return!fR(a)},jma=Aj.upperBoundKey=function(a){return fp(a,"lt")||fp(a,"lte")||fp(a,"max")||(a.reverse?fp(a,"start"):fp(a,"end"))||void 0},gR=Aj.upperBound=function(a,d){var k=jma(a);return k?a[k]:d};Aj.start=function(a,d){return a.reverse?gR(a,d):dR(a,d)};Aj.end=function(a,d){return a.reverse?dR(a,d):gR(a,d)};Aj.startInclusive=function(a){return a.reverse?
fR(a):eR(a)};Aj.endInclusive=function(a){return a.reverse?eR(a):fR(a)};Aj.toLtgt=function(a,d,k,b,e){d=d||{};k=k||Vba;var l=3<arguments.length,p=Aj.lowerBoundKey(a),q=Aj.upperBoundKey(a);p?"gt"===p?d.gt=k(a.gt,!1):d.gte=k(a[p],!1):l&&(d.gte=k(b,!1));q?"lt"===q?d.lt=k(a.lt,!0):d.lte=k(a[q],!0):l&&(d.lte=k(e,!0));null!=a.reverse&&(d.reverse=!!a.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;
Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};Aj.contains=function(a,d,k){k=k||Aj.compare;var b=dR(a);if(void 0!==b&&""!==b&&(b=k(d,b),0>b||0===b&&hma(a)))return!1;b=gR(a);return void 0!==b&&""!==b&&(b=k(d,b),0<b||0===b&&ima(a))?!1:!0};Aj.filter=function(a,d){return function(k){return Aj.contains(a,k,d)}};var Jq={},rN=L4;Jq.utf8=Jq["utf-8"]={encode:function(a){return qN(a)?a:String(a)},decode:jF,buffer:!1,type:"utf8"};Jq.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};
Jq.binary={encode:function(a){return qN(a)?a:rN.from(a)},decode:jF,buffer:!0,type:"binary"};Jq.none={encode:jF,decode:jF,buffer:!1,type:"id"};Jq.id=Jq.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(a){Jq[a]={encode:function(d){return qN(d)?d:rN.from(d,a)},decode:function(d){return d.toString(a)},buffer:!0,type:a}});var qq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,j5={},sN=Jq;j5=Dl;Dl.prototype._encoding=function(a){"string"===
typeof a&&(a=sN[a]);a||(a=sN.id);return a};Dl.prototype._keyEncoding=function(a,d){return this._encoding(d&&d.keyEncoding||a&&a.keyEncoding||(this||qq).opts.keyEncoding)};Dl.prototype._valueEncoding=function(a,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||a&&(a.valueEncoding||a.encoding)||(this||qq).opts.valueEncoding||(this||qq).opts.encoding)};Dl.prototype.encodeKey=function(a,d,k){return this._keyEncoding(d,k).encode(a)};Dl.prototype.encodeValue=function(a,d,k){return this._valueEncoding(d,
k).encode(a)};Dl.prototype.decodeKey=function(a,d){return this._keyEncoding(d).decode(a)};Dl.prototype.decodeValue=function(a,d){return this._valueEncoding(d).decode(a)};Dl.prototype.encodeBatch=function(a,d){var k=this||qq;return a.map(function(b){var e={type:b.type,key:k.encodeKey(b.key,d,b)};k.keyAsBuffer(d,b)&&(e.keyEncoding="binary");b.prefix&&(e.prefix=b.prefix);"value"in b&&(e.value=k.encodeValue(b.value,d,b),k.valueAsBuffer(d,b)&&(e.valueEncoding="binary"));return e})};var kma="lt gt lte gte start end".split(" ");
Dl.prototype.encodeLtgt=function(a){var d=this||qq,k={};Object.keys(a).forEach(function(b){k[b]=-1<kma.indexOf(b)?d.encodeKey(a[b],a):a[b]});return k};Dl.prototype.createStreamDecoder=function(a){var d=this||qq;return a.keys&&a.values?function(k,b){return{key:d.decodeKey(k,a),value:d.decodeValue(b,a)}}:a.keys?function(k){return d.decodeKey(k,a)}:a.values?function(k,b){return d.decodeValue(b,a)}:function(){}};Dl.prototype.keyAsBuffer=function(a){return this._keyEncoding(a).buffer};Dl.prototype.valueAsBuffer=
function(a){return this._valueEncoding(a).buffer};var lma=j5,mma={},Zba=mma=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},Oj={},nma=Eg.Buffer;Oj.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};Oj.isBoolean=function(a){return"boolean"===typeof a};Oj.isNull=function(a){return null===a};Oj.isNullOrUndefined=function(a){return null==a};Oj.isNumber=function(a){return"number"===typeof a};Oj.isString=
function(a){return"string"===typeof a};Oj.isSymbol=function(a){return"symbol"===typeof a};Oj.isUndefined=function(a){return void 0===a};Oj.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};Oj.isObject=function(a){return"object"===typeof a&&null!==a};Oj.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};Oj.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};Oj.isFunction=function(a){return"function"===
typeof a};Oj.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};Oj.isBuffer=nma.isBuffer;var yf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vN={},k5=Eg.Buffer,oma=k5.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},hR=vN.StringDecoder=function(a){(this||yf).encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!oma(a))throw Error("Unknown encoding: "+a);switch((this||yf).encoding){case "utf8":(this||yf).surrogateSize=3;break;case "ucs2":case "utf16le":(this||yf).surrogateSize=2;(this||yf).detectIncompleteChar=Xba;break;case "base64":(this||yf).surrogateSize=3;(this||yf).detectIncompleteChar=Yba;break;default:(this||yf).write=Wba;return}(this||yf).charBuffer=new k5(6);(this||yf).charReceived=
0;(this||yf).charLength=0};hR.prototype.write=function(a){for(var d="";(this||yf).charLength;){d=a.length>=(this||yf).charLength-(this||yf).charReceived?(this||yf).charLength-(this||yf).charReceived:a.length;a.copy((this||yf).charBuffer,(this||yf).charReceived,0,d);(this||yf).charReceived+=d;if((this||yf).charReceived<(this||yf).charLength)return"";a=a.slice(d,a.length);d=(this||yf).charBuffer.slice(0,(this||yf).charLength).toString((this||yf).encoding);var k=d.charCodeAt(d.length-1);if(55296<=k&&
56319>=k)(this||yf).charLength+=(this||yf).surrogateSize,d="";else{(this||yf).charReceived=(this||yf).charLength=0;if(0===a.length)return d;break}}this.detectIncompleteChar(a);var b=a.length;(this||yf).charLength&&(a.copy((this||yf).charBuffer,0,a.length-(this||yf).charReceived,b),b-=(this||yf).charReceived);d+=a.toString((this||yf).encoding,0,b);b=d.length-1;k=d.charCodeAt(b);return 55296<=k&&56319>=k?(k=(this||yf).surrogateSize,(this||yf).charLength+=k,(this||yf).charReceived+=k,(this||yf).charBuffer.copy((this||
yf).charBuffer,k,0,k),a.copy((this||yf).charBuffer,0,0,k),d.substring(0,b)):d};hR.prototype.detectIncompleteChar=function(a){for(var d=3<=a.length?3:a.length;0<d;d--){var k=a[a.length-d];if(1==d&&6==k>>5){(this||yf).charLength=2;break}if(2>=d&&14==k>>4){(this||yf).charLength=3;break}if(3>=d&&30==k>>3){(this||yf).charLength=4;break}}(this||yf).charReceived=d};hR.prototype.end=function(a){var d="";a&&a.length&&(d=this.write(a));(this||yf).charReceived&&(a=(this||yf).encoding,d+=(this||yf).charBuffer.slice(0,
(this||yf).charReceived).toString(a));return d};var $ba=Object.freeze({}),tN={},s_=!1,Ug="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uN={},t_=!1,io="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wN={},v_=!1,Se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xN={},x_=!1,Ik="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yN={},z_=!1,y_="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Fn={},l5=!1,pma=function(){if(l5)return Fn;l5=!0;var a=oh;Fn=Fn=u_();Fn.Stream=Zt;Fn.Readable=Fn;Fn.Writable=r_();Fn.Duplex=Rw();Fn.Transform=w_();Fn.PassThrough=aca();a.browser||"disable"!==a.env.READABLE_STREAM||(Fn=Zt);return Fn}(),qma={},dca=Oz(Aj),rma=Oz(Wo),sma=Oz(lma),tma=Oz(pma),m5=Oz(cj);m5(zN,Error);zN.prototype.name="NotFoundError";var uma=rma.EventEmitter,vma=new zN,n5=function(a,d,k,b){function e(p){var q={},u;if(b)for(u in b)"undefined"!==
typeof b[u]&&(q[u]=b[u]);if(p)for(u in p)"undefined"!==typeof p[u]&&(q[u]=p[u]);return q}var l=new uma;l.sublevels={};l.options=b;l.version="6.5.4";l.methods={};d=d||[];l.put=function(p,q,u,w){"function"===typeof u&&(w=u,u={});a.apply([{key:p,value:q,prefix:d.slice(),type:"put"}],e(u),function(y){if(y)return w(y);l.emit("put",p,q);w(null)})};l.prefix=function(){return d.slice()};l.batch=function(p,q,u){"function"===typeof q&&(u=q,q={});p=p.map(function(w){return{key:w.key,value:w.value,prefix:w.prefix||
d,keyEncoding:w.keyEncoding,valueEncoding:w.valueEncoding,type:w.type}});a.apply(p,e(q),function(w){if(w)return u(w);l.emit("batch",p);u(null)})};l.get=function(p,q,u){"function"===typeof q&&(u=q,q={});a.get(p,d,e(q),function(w,y){w?u(vma):u(null,y)})};l.sublevel=function(p,q){return l.sublevels[p]=l.sublevels[p]||n5(a,d.concat(p),k,e(q))};l.readStream=l.createReadStream=function(p){p=e(p);p.prefix=d;var q=a.iterator(p);p=k(p,a.createDecoder(p));p.setIterator(q);return p};l.close=function(p){a.close(p)};
l.isOpen=a.isOpen;l.isClosed=a.isClosed;return l},A_=tma.Readable;m5(Hr,A_);Hr.prototype.setIterator=function(a){this._iterator=a;return this._destroyed?a.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Hr.prototype._read=function(){var a=this;if(!a._destroyed){if(!a._iterator)return this._waiting=!0;a._iterator.next(function(d,k,b){if(d||void 0===k&&void 0===b)return d||a._destroyed||a.push(null),a._cleanup(d);b=a._makeData(k,b);a._destroyed||a.push(b)})}};Hr.prototype._cleanup=
function(a){if(!this._destroyed){this._destroyed=!0;var d=this;a&&"iterator has ended"!==a.message&&d.emit("error",a);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};Hr.prototype.destroy=function(){this._cleanup()};var wma={encode:function(a){return"\u00ff"+a[0]+"\u00ff"+a[1]},decode:function(a){a=a.toString();var d=a.indexOf("\u00ff",1);return[a.substring(1,d),a.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},xma=new sma,yma=qma=function(a){return n5(cca(a,
wma,xma),[],Hr,a.options)},rq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,RI={},zma=oh,B_=T4.Transform,o5=cj;o5(Sw,B_);Sw.prototype.destroy=function(a){if(!(this||rq)._destroyed){(this||rq)._destroyed=!0;var d=this||rq;zma.nextTick(function(){a&&d.emit("error",a);d.emit("close")})}};RI=AN(function(a,d,k){a=new Sw(a);a._transform=d;k&&(a._flush=k);return a});RI.ctor=AN(function(a,d,k){function b(e){if(!((this||rq)instanceof b))return new b(e);(this||rq).options=
Object.assign({},a,e);Sw.call(this||rq,(this||rq).options)}o5(b,Sw);b.prototype._transform=d;k&&(b.prototype._flush=k);return b});RI.obj=AN(function(a,d,k){a=new Sw(Object.assign({objectMode:!0,highWaterMark:16},a));a._transform=d;k&&(a._flush=k);return a});var p5=RI,Ama={};fi.prototype.toArray=function(){for(var a=this._length,d=Array(a),k=this._front,b=this._capacity,e=0;e<a;++e)d[e]=this[k+e&b-1];return d};fi.prototype.push=function(a){var d=arguments.length,k=this._length;if(1<d){var b=this._capacity;
if(k+d>b){for(var e=0;e<d;++e){this._checkCapacity(k+1);var l=this._front+k&this._capacity-1;this[l]=arguments[e];k++;this._length=k}return k}l=this._front;for(e=0;e<d;++e)this[l+k&b-1]=arguments[e],l++;this._length=k+d;return k+d}if(0===d)return k;this._checkCapacity(k+1);e=this._front+k&this._capacity-1;this[e]=a;this._length=k+1;return k+1};fi.prototype.pop=function(){var a=this._length;if(0!==a){var d=this._front+a-1&this._capacity-1,k=this[d];this[d]=void 0;this._length=a-1;return k}};fi.prototype.shift=
function(){var a=this._length;if(0!==a){var d=this._front,k=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=a-1;return k}};fi.prototype.unshift=function(a){var d=this._length,k=arguments.length;if(1<k){var b=this._capacity;if(d+k>b){for(var e=k-1;0<=e;e--){this._checkCapacity(d+1);b=this._capacity;var l=(this._front-1&b-1^b)-b;this[l]=arguments[e];d++;this._length=d;this._front=l}return d}l=this._front;for(e=k-1;0<=e;e--)l=(l-1&b-1^b)-b,this[l]=arguments[e];this._front=l;this._length=
d+k;return d+k}if(0===k)return d;this._checkCapacity(d+1);b=this._capacity;e=(this._front-1&b-1^b)-b;this[e]=a;this._length=d+1;this._front=e;return d+1};fi.prototype.peekBack=function(){var a=this._length;if(0!==a)return this[this._front+a-1&this._capacity-1]};fi.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};fi.prototype.get=function(a){if(a===(a|0)){var d=this._length;0>a&&(a+=d);if(!(0>a||a>=d))return this[this._front+a&this._capacity-1]}};fi.prototype.isEmpty=function(){return 0===
this._length};fi.prototype.clear=function(){for(var a=this._length,d=this._front,k=this._capacity,b=0;b<a;++b)this[d+b&k-1]=void 0;this._front=this._length=0};fi.prototype.toString=function(){return this.toArray().toString()};fi.prototype.valueOf=fi.prototype.toString;fi.prototype.removeFront=fi.prototype.shift;fi.prototype.removeBack=fi.prototype.pop;fi.prototype.insertFront=fi.prototype.unshift;fi.prototype.insertBack=fi.prototype.push;fi.prototype.enqueue=fi.prototype.push;fi.prototype.dequeue=
fi.prototype.shift;fi.prototype.toJSON=fi.prototype.toArray;Object.defineProperty(fi.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});fi.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(C_(1.5*this._capacity+16))};fi.prototype._resizeTo=function(a){var d=this._capacity;this._capacity=a;a=this._front;var k=this._length;if(a+k>d)for(a=a+k&d-1,k=0;k<a;++k)this[k+d]=this[k+0],this[k+0]=void 0};var D_=Array.isArray,Bma=Ama=fi,Cma=
{},Fp=Eg.Buffer,Dma=Object.prototype.toString,iR="function"===typeof Fp.alloc&&"function"===typeof Fp.allocUnsafe&&"function"===typeof Fp.from,Ema=Cma=function(a,d,k){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Dma.call(a).slice(8,-1)){d>>>=0;var b=a.byteLength-d;if(0>b)throw new RangeError("'offset' is out of bounds");if(void 0===k)k=b;else if(k>>>=0,k>b)throw new RangeError("'length' is out of bounds");return iR?Fp.from(a.slice(d,d+k)):
new Fp(new Uint8Array(a.slice(d,d+k)))}if("string"===typeof a){k=d;if("string"!==typeof k||""===k)k="utf8";if(!Fp.isEncoding(k))throw new TypeError('"encoding" must be a valid string encoding');return iR?Fp.from(a,k):new Fp(a,k)}return iR?Fp.from(a):new Fp(a)},lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.collectConflicts=function(a){var d=BN(a);a=E_(a.rev_tree);for(var k=[],b=0,e=a.length;b<e;b++){var l=a[b];l.rev===d||l.opts.deleted||k.push(l.rev)}return k};lm.collectLeaves=E_;lm.compactTree=
function(a){var d=[];kF(a.rev_tree,function(k,b,e,l,p){"available"!==p.status||k||(d.push(b+"-"+e),p.status="missing")});return d};lm.isDeleted=function(a,d){d||(d=BN(a));d=d.substring(d.indexOf("-")+1);a=a.rev_tree.map(jca);for(var k;k=a.pop();){if(k[0]===d)return!!k[1].deleted;a=a.concat(k[2])}};lm.isLocalId=function(a){return/^_local/.test(a)};lm.merge=function(a,d,k){a=I_(a,d);k=ica(a.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:a.conflicts}};lm.revExists=function(a,d){a=a.slice();
var k=d.split("-");d=parseInt(k[0],10);k=k[1];for(var b;b=a.pop();){if(b.pos===d&&b.ids[0]===k)return!0;for(var e=b.ids[2],l=0,p=e.length;l<p;l++)a.push({pos:b.pos+1,ids:e[l]})}return!1};lm.rootToLeaf=F_;lm.traverseRevTree=kF;lm.winningRev=BN;lm.latest=function(a,d){for(var k=d.rev_tree.slice(),b;b=k.pop();){var e=b.pos,l=b.ids,p=l[0],q=l[1];l=l[2];var u=0===l.length;b=b.history?b.history.slice():[];b.push({id:p,pos:e,opts:q});if(u)for(q=0,u=b.length;q<u;q++){var w=b[q];if(w.pos+"-"+w.id===a)return e+
"-"+p}p=0;for(q=l.length;p<q;p++)k.push({pos:e+1,ids:l[p],history:b})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+a);};var pk={};Object.defineProperty(pk,"__esModule",{value:!0});var $t=fg,Pz=fl,M_=Ix,Am=Af,dm=lm,kca=J_("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),lca=J_("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
pk.invalidIdError=$t.invalidIdError;pk.normalizeDdocFunctionName=$t.normalizeDdocFunctionName;pk.parseDdocFunctionName=$t.parseDdocFunctionName;pk.isDeleted=dm.isDeleted;pk.isLocalId=dm.isLocalId;pk.allDocsKeysQuery=function(a,d){var k={offset:d.skip};return Promise.all(d.keys.map(function(b){var e=$t.assign({key:b,deleted:"ok"},d);["limit","skip","keys"].forEach(function(l){delete e[l]});return new Promise(function(l,p){a._allDocs(e,function(q,u){if(q)return p(q);d.update_seq&&void 0!==u.update_seq&&
(k.update_seq=u.update_seq);k.total_rows=u.total_rows;l(u.rows[0]||{key:b,error:"not_found"})})})})).then(function(b){k.rows=b;return k})};pk.parseDoc=L_;pk.preprocessAttachments=function(a,d,k){function b(){e++;a.length===e&&(l?k(l):k())}if(!a.length)return k();var e=0,l;a.forEach(function(p){function q(A){l=A;w++;w===u.length&&b()}var u=p.data&&p.data._attachments?Object.keys(p.data._attachments):[],w=0;if(!u.length)return b();for(var y in p.data._attachments)p.data._attachments.hasOwnProperty(y)&&
oca(p.data._attachments[y],d,q)})};pk.processDocs=function(a,d,k,b,e,l,p,q,u){a=a||1E3;var w=q.new_edits,y=new es.Map,A=0,C=d.length;d.forEach(function(E,L){if(E._id&&dm.isLocalId(E._id))k[E._deleted?"_removeLocal":"_putLocal"](E,{ctx:e},function(V,T){l[L]=V||T;++A===C&&u&&u()});else{var I=E.metadata.id;y.has(I)?(C--,y.get(I).push([E,L])):y.set(I,[[E,L]])}});y.forEach(function(E,L){function I(){++T<E.length?V():++A===C&&u&&u()}function V(){var Y=E[T],na=Y[0];Y=Y[1];if(b.has(L))N_(a,b.get(L),na,l,
Y,I,p,w);else{var Ba=dm.merge([],na.metadata.rev_tree[0],a);na.metadata.rev_tree=Ba.tree;na.stemmedRevs=Ba.stemmedRevs||[];Ba=dm.winningRev(na.metadata);var F=dm.isDeleted(na.metadata,Ba);"was_delete"in q&&F?(l[Y]=Am.createError(Am.MISSING_DOC,"deleted"),I()):w&&"missing"===na.metadata.rev_tree[0].ids[1].status?(na=Am.createError(Am.REV_CONFLICT),l[Y]=na,I()):p(na,Ba,F,F,!1,F?0:1,Y,I)}}var T=0;V()})};pk.updateDoc=N_;var DB={};Object.defineProperty(DB,"__esModule",{value:!0});var q5=yx&&"object"===
typeof yx&&"default"in yx?yx["default"]:yx;DB.safeJsonParse=function(a){try{return JSON.parse(a)}catch(d){return q5.parse(a)}};DB.safeJsonStringify=function(a){try{return JSON.stringify(a)}catch(d){return q5.stringify(a)}};var Fma={},Gma=Qz(ema),Hma=Qz(yma),SI=Qz(dQ),Ima=Qz(Bma),Jma=Qz(Ema),Sz=lm,Rz=fl,jo=es;au.prototype.get=function(a,d,k){var b=P_(this,a),e=b.get(d);if(e)return fg.nextTick(function(){k(null,e)});if(null===e)return fg.nextTick(function(){k({name:"NotFoundError"})});a.get(d,function(l,
p){if(l)return"NotFoundError"===l.name&&b.set(d,null),k(l);b.set(d,p);k(null,p)})};au.prototype.batch=function(a){for(var d=0,k=a.length;d<k;d++){var b=a[d],e=P_(this,b.prefix);"put"===b.type?e.set(b.key,b.value):e.set(b.key,null)}this._batch=this._batch.concat(a)};au.prototype.execute=function(a,d){for(var k=new jo.Set,b=[],e=this._batch.length-1;0<=e;e--){var l=this._batch[e],p=l.prefix.prefix()[0]+"\u00ff"+l.key;k.has(p)||(k.add(p),b.push(l))}a.batch(b,d)};var EB=new jo.Map,Kma={encode:DB.safeJsonStringify,
decode:DB.safeJsonParse,buffer:!1,type:"cheap-json"},FB=new fg.changesHandler,Lma=Fma=function(a,d){function k(){I.docStore=F.sublevel("document-store",{valueEncoding:Kma});I.bySeqStore=F.sublevel("by-sequence",{valueEncoding:"json"});I.attachmentStore=F.sublevel("attach-store",{valueEncoding:"json"});I.binaryStore=F.sublevel("attach-binary-store",{valueEncoding:"binary"});I.localStore=F.sublevel("local-store",{valueEncoding:"json"});I.metaStore=F.sublevel("meta-store",{valueEncoding:"json"});"object"===
typeof a.migrate?a.migrate.doMigrationTwo(F,I,b):b()}function b(){I.metaStore.get("_local_last_update_seq",function(W,P){"undefined"===typeof F._updateSeq&&(F._updateSeq=P||0);I.metaStore.get("_local_doc_count",function(S,fa){F._docCount=S?0:fa;I.metaStore.get("_local_uuid",function(aa,oa){L=aa?fg.uuid():oa;I.metaStore.put("_local_uuid",L,function(){fg.nextTick(function(){d(null,E)})})})})})}function e(W){return F.isClosed()?W(Error("database is closed")):W(null,F._docCount)}function l(W,P){try{W.apply(null,
P)}catch(S){P[P.length-1](S)}}function p(){var W=F._queue.peekFront();"read"===W.type?q(W):u(W)}function q(W){var P=[W];W=1;for(var S=F._queue.get(W);"undefined"!==typeof S&&"read"===S.type;)P.push(S),W++,S=F._queue.get(W);var fa=0;P.forEach(function(aa){var oa=aa.args,Va=oa[oa.length-1];oa[oa.length-1]=SI(function(lb){Va.apply(null,lb);++fa===P.length&&fg.nextTick(function(){P.forEach(function(){F._queue.shift()});F._queue.length&&p()})});l(aa.fun,oa)})}function u(W){var P=W.args,S=P[P.length-1];
P[P.length-1]=SI(function(fa){S.apply(null,fa);fg.nextTick(function(){F._queue.shift();F._queue.length&&p()})});l(W.fun,P)}function w(W){return SI(function(P){F._queue.push({fun:W,args:P,type:"write"});1===F._queue.length&&fg.nextTick(p)})}function y(W){return SI(function(P){F._queue.push({fun:W,args:P,type:"read"});1===F._queue.length&&fg.nextTick(p)})}function A(W){return("0000000000000000"+W).slice(-16)}function C(W,P){"destroy"in Y?Y.destroy(W,P):P(null)}a=fg.clone(a);var E=this,L,I={},V=a.revs_limit,
T=a.name;"undefined"===typeof a.createIfMissing&&(a.createIfMissing=!0);var Y=a.db,na=fg.functionName(Y);if(EB.has(na))var Ba=EB.get(na);else Ba=new jo.Map,EB.set(na,Ba);if(Ba.has(T)){var F=Ba.get(T);k()}else Ba.set(T,Hma(Gma(Y(T),a,function(W){if(W)return Ba.delete(T),d(W);F=Ba.get(T);F._docCount=-1;F._queue=new Ima;"object"===typeof a.migrate?a.migrate.doMigrationOne(T,F,k):k()})));E._remote=!1;E.type=function(){return"leveldb"};E._id=function(W){W(null,L)};E._info=function(W){var P={doc_count:F._docCount,
update_seq:F._updateSeq,backend_adapter:fg.functionName(Y)};return fg.nextTick(function(){W(null,P)})};E._get=y(function(W,P,S){P=fg.clone(P);I.docStore.get(W,function(fa,aa){if(fa||!aa)return S(Af.createError(Af.MISSING_DOC,"missing"));if(P.rev)var oa=P.latest?Sz.latest(P.rev,aa):P.rev;else if(oa=CN(aa),"deleted"in aa?aa.deleted:pk.isDeleted(aa,oa))return S(Af.createError(Af.MISSING_DOC,"deleted"));I.bySeqStore.get(A(aa.rev_map[oa]),function(Va,lb){if(!lb)return S(Af.createError(Af.MISSING_DOC));
if("_id"in lb&&lb._id!==aa.id)return S(Error("wrong doc returned"));lb._id=aa.id;if("_rev"in lb){if(lb._rev!==oa)return S(Error("wrong doc returned"))}else lb._rev=oa;return S(null,{doc:lb,metadata:aa})})})});E._getAttachment=function(W,P,S,fa,aa){var oa=S.content_type;I.binaryStore.get(S.digest,function(Va,lb){if(Va)return"NotFoundError"!==Va.name?aa(Va):aa(null,fa.binary?Rz.blob([""],{type:oa}):"");fa.binary?aa(null,O_(lb,oa)):aa(null,lb.toString("base64"))})};E._bulkDocs=w(function(W,P,S){function fa(Ea,
jb){pc.get(I.attachmentStore,Ea,function(Mb){Mb?(Mb=Af.createError(Af.MISSING_STUB,"unknown stub attachment with digest "+Ea),jb(Mb)):jb()})}function aa(Ea){function jb(){if(++Mb===dd.length)return Ea(Tc)}var Mb=0,Tc;dd.forEach(function(Rc){if(Rc._id&&pk.isLocalId(Rc._id))return jb();pc.get(I.docStore,Rc._id,function(qc,de){qc?"NotFoundError"!==qc.name&&(Tc=qc):Nb.set(Rc._id,de);jb()})})}function oa(Ea,jb){var Mb=Promise.resolve();Ea.forEach(function(Tc,Rc){Mb=Mb.then(function(){return new Promise(function(qc,
de){E._doCompactionNoLock(Rc,Tc,{ctx:pc},function(Vd){if(Vd)return de(Vd);qc()})})})});Mb.then(function(){jb()},jb)}function Va(Ea){var jb=new jo.Map;Nb.forEach(function(Mb,Tc){jb.set(Tc,Sz.compactTree(Mb))});oa(jb,Ea)}function lb(){oa(Sb,function(Ea){Ea&&Ha(Ea);if(E.auto_compaction)return Va(Ha);Ha()})}function qa(Ea,jb,Mb,Tc,Rc,qc,de,Vd){function Dg(rh){Ei++;oi||(rh?(oi=rh,Vd(oi)):Ei===Ni.length&&Ch())}function eg(rh,pi,Pi,qi){return function(Qi){ta(rh,"md5-"+Qi,pi,Pi,qi)}}function Mh(rh,pi,Pi){return function(qi){Ix.binaryMd5(qi,
eg(rh,pi,qi,Pi))}}function Ch(){var rh=Ea.metadata.rev_map[Ea.metadata.rev];if(rh)return Vd();rh=++Lc;Ea.metadata.rev_map[Ea.metadata.rev]=Ea.metadata.seq=rh;rh=[{key:A(rh),value:Ea.data,prefix:I.bySeqStore,type:"put"},{key:Ea.metadata.id,value:Ea.metadata,prefix:I.docStore,type:"put"}];pc.batch(rh);Ub[de]={ok:!0,id:Ea.metadata.id,rev:Ea.metadata.rev};Nb.set(Ea.metadata.id,Ea.metadata);Vd()}Eb+=qc;var oi=null,Ei=0;Ea.metadata.winningRev=jb;Ea.metadata.deleted=Mb;Ea.data._id=Ea.metadata.id;Ea.data._rev=
Ea.metadata.rev;Tc&&(Ea.data._deleted=!0);Ea.stemmedRevs.length&&Sb.set(Ea.metadata.id,Ea.stemmedRevs);var Ni=Ea.data._attachments?Object.keys(Ea.data._attachments):[];for(jb=0;jb<Ni.length;jb++)if(Mb=Ni[jb],Tc=Ea.data._attachments[Mb],Tc.stub)ja(Ea.data._id,Ea.data._rev,Tc.digest,Dg);else if("string"===typeof Tc.data){try{var Oi=Rz.atob(Tc.data)}catch(rh){S(Af.createError(Af.BAD_ARG,"Attachment is not a valid base64 string"));return}Mh(Ea,Mb,Dg)(Oi)}else pca(Tc.data,Mh(Ea,Mb,Dg));Ni.length||Ch()}
function ja(Ea,jb,Mb,Tc){function Rc(){return new Promise(function(Vd,Dg){pc.get(I.attachmentStore,Mb,function(eg,Mh){if(eg&&"NotFoundError"!==eg.name)return Dg(eg);Vd(Mh)})})}function qc(Vd){var Dg=[Ea,jb].join("@"),eg={};Vd?Vd.refs&&(eg.refs=Vd.refs,eg.refs[Dg]=!0):(eg.refs={},eg.refs[Dg]=!0);return new Promise(function(Mh){pc.batch([{type:"put",prefix:I.attachmentStore,key:Mb,value:eg}]);Mh(!Vd)})}var de=Ca[Mb]||Promise.resolve();Ca[Mb]=de.then(function(){return Rc().then(qc).then(function(Vd){Tc(null,
Vd)},Tc)})}function ta(Ea,jb,Mb,Tc,Rc){Mb=Ea.data._attachments[Mb];delete Mb.data;Mb.digest=jb;Mb.length=Tc.length;var qc=Ea.metadata.id;Ea=Ea.metadata.rev;Mb.revpos=parseInt(Ea,10);ja(qc,Ea,jb,function(de,Vd){if(de||0===Tc.length||!Vd)return Rc(de);pc.batch([{type:"put",prefix:I.binaryStore,key:jb,value:Jma(Tc,"binary")}]);Rc()})}function Ha(Ea){if(Ea)return fg.nextTick(function(){S(Ea)});pc.batch([{prefix:I.metaStore,type:"put",key:"_local_last_update_seq",value:Lc},{prefix:I.metaStore,type:"put",
key:"_local_doc_count",value:F._docCount+Eb}]);pc.execute(F,function(jb){if(jb)return S(jb);F._docCount+=Eb;F._updateSeq=Lc;FB.notify(T);fg.nextTick(function(){S(null,Ub)})})}var zb=P.new_edits,Ub=Array(W.docs.length),Nb=new jo.Map,Sb=new jo.Map,pc=new au,Eb=0,Lc=F._updateSeq,dd=W.docs,ia=dd.map(function(Ea){if(Ea._id&&pk.isLocalId(Ea._id))return Ea;Ea=pk.parseDoc(Ea,zb,E.__opts);Ea.metadata&&!Ea.metadata.rev_map&&(Ea.metadata.rev_map={});return Ea});W=ia.filter(function(Ea){return Ea.error});if(W.length)return S(W[0]);
var Ca={};if(!ia.length)return S(null,[]);(function(Ea){var jb=[];dd.forEach(function(Rc){Rc&&Rc._attachments&&Object.keys(Rc._attachments).forEach(function(qc){qc=Rc._attachments[qc];qc.stub&&jb.push(qc.digest)})});if(!jb.length)return Ea();var Mb=0,Tc;jb.forEach(function(Rc){fa(Rc,function(qc){qc&&!Tc&&(Tc=qc);++Mb===jb.length&&Ea(Tc)})})})(function(Ea){if(Ea)return S(Ea);aa(function(jb){if(jb)return S(jb);pk.processDocs(V,ia,E,Nb,pc,Ub,qa,P,lb)})})});E._allDocs=function(W,P){return"keys"in W?pk.allDocsKeysQuery(this,
W):y(function(S,fa){S=fg.clone(S);e(function(aa,oa){if(aa)return fa(aa);aa={};var Va=S.skip||0;S.startkey&&(aa.gte=S.startkey);S.endkey&&(aa.lte=S.endkey);S.key&&(aa.gte=aa.lte=S.key);if(S.descending){aa.reverse=!0;var lb=aa.lte;aa.lte=aa.gte;aa.gte=lb}if("number"===typeof S.limit)var qa=S.limit;if(0===qa||"gte"in aa&&"lte"in aa&&aa.gte>aa.lte)return aa={total_rows:oa,offset:S.skip,rows:[]},S.update_seq&&(aa.update_seq=F._updateSeq),fa(null,aa);var ja=[],ta=I.docStore.readStream(aa),Ha=p5.obj(function(zb,
Ub,Nb){function Sb(dd){var ia={id:pc.id,key:pc.id,value:{rev:Eb}};if(S.include_docs){ia.doc=dd;ia.doc._rev=ia.value.rev;S.conflicts&&(dd=Sz.collectConflicts(pc),dd.length&&(ia.doc._conflicts=dd));for(var Ca in ia.doc._attachments)ia.doc._attachments.hasOwnProperty(Ca)&&(ia.doc._attachments[Ca].stub=!0)}if(!1===S.inclusive_end&&pc.id===S.endkey)return Nb();if(Lc)if("ok"===S.deleted)ia.value.deleted=!0,ia.doc=null;else return Nb();ja.push(ia);Nb()}var pc=zb.value,Eb=CN(pc),Lc="deleted"in pc?pc.deleted:
pk.isDeleted(pc,Eb);if(!Lc){if(0<Va--){Nb();return}if("number"===typeof qa&&0>=qa--){ta.unpipe();ta.destroy();Nb();return}}else if("ok"!==S.deleted){Nb();return}S.include_docs?I.bySeqStore.get(A(pc.rev_map[Eb]),function(dd,ia){Sb(ia)}):Sb()},function(zb){Promise.resolve().then(function(){if(S.include_docs&&S.attachments)return DN(ja,I,S)}).then(function(){var Ub={total_rows:oa,offset:S.skip,rows:ja};S.update_seq&&(Ub.update_seq=F._updateSeq);fa(null,Ub)},fa);zb()}).on("unpipe",function(){Ha.end()});
ta.on("error",fa);ta.pipe(Ha)})})(W,P)};E._changes=function(W){function P(){W.done=!0;W.return_docs&&W.limit&&W.limit<aa.length&&(aa.length=W.limit);zb.unpipe(Ub);zb.destroy();W.continuous||W.cancelled||(W.include_docs&&W.attachments&&W.return_docs?DN(aa,I,W).then(function(){W.complete(null,{results:aa,last_seq:oa})}):W.complete(null,{results:aa,last_seq:oa}))}W=fg.clone(W);if(W.continuous){var S=T+":"+fg.uuid();FB.addListener(T,S,E,W);FB.notify(T);return{cancel:function(){FB.removeListener(T,S)}}}var fa=
W.descending,aa=[],oa=W.since||0,Va=0,lb={reverse:fa};if("limit"in W&&0<W.limit)var qa=W.limit;lb.reverse||(lb.start=A(W.since||0));var ja=W.doc_ids&&new jo.Set(W.doc_ids),ta=fg.filterChange(W),Ha=new jo.Map,zb=I.bySeqStore.readStream(lb),Ub=p5.obj(function(Nb,Sb,pc){function Eb(ia){function Ca(jb){var Mb=W.processChange(jb,ia,W);Mb.seq=ia.seq;jb=ta(Mb);if("object"===typeof jb)return W.complete(jb);if(jb){Va++;if(W.attachments&&W.include_docs)DN([Mb],I,W).then(function(){W.onChange(Mb)});else W.onChange(Mb);
W.return_docs&&aa.push(Mb)}pc()}var Ea=CN(ia);if(ia.seq!==Lc)return pc();oa=Lc;if(Ea===dd._rev)return Ca(dd);I.bySeqStore.get(A(ia.rev_map[Ea]),function(jb,Mb){Ca(Mb)})}if(qa&&Va>=qa)return P(),pc();if(W.cancelled||W.done)return pc();var Lc=parseInt(Nb.key,10),dd=Nb.value;if(Lc===W.since&&!fa||ja&&!ja.has(dd._id))return pc();if(Nb=Ha.get(dd._id))return Eb(Nb);I.docStore.get(dd._id,function(ia,Ca){if(W.cancelled||W.done||F.isClosed()||pk.isLocalId(Ca.id))return pc();Ha.set(dd._id,Ca);Eb(Ca)})},function(Nb){if(W.cancelled)return Nb();
W.return_docs&&W.limit&&W.limit<aa.length&&(aa.length=W.limit);Nb()}).on("unpipe",function(){Ub.end();P()});zb.pipe(Ub);return{cancel:function(){W.cancelled=!0;P()}}};E._close=function(W){if(F.isClosed())return W(Af.createError(Af.NOT_OPEN));F.close(function(P){P?W(P):(Ba.delete(T),W())})};E._getRevisionTree=function(W,P){I.docStore.get(W,function(S,fa){S?P(Af.createError(Af.MISSING_DOC)):P(null,fa.rev_tree)})};E._doCompaction=w(function(W,P,S,fa){E._doCompactionNoLock(W,P,S,fa)});E._doCompactionNoLock=
function(W,P,S,fa){"function"===typeof S&&(fa=S,S={});if(!P.length)return fa();var aa=S.ctx||new au;aa.get(I.docStore,W,function(oa,Va){function lb(Nb){Nb&&(Ub=Nb);if(++zb===P.length){if(Ub)return fa(Ub);ja()}}function qa(Nb){if(Nb)return fa(Nb);aa.batch(ta);if(S.ctx)return fa();aa.execute(F,fa)}function ja(){function Nb(dd){dd&&(Eb=dd);++pc===Sb.length&&qa(Eb)}var Sb=Object.keys(Ha);if(!Sb.length)return qa();var pc=0,Eb,Lc=new jo.Map;P.forEach(function(dd){Lc.set(W+"@"+dd,!0)});Sb.forEach(function(dd){aa.get(I.attachmentStore,
dd,function(ia,Ca){if(ia)return"NotFoundError"===ia.name?Nb():Nb(ia);ia=Object.keys(Ca.refs||{}).filter(function(jb){return!Lc.has(jb)});var Ea={};ia.forEach(function(jb){Ea[jb]=!0});ia.length?ta.push({key:dd,type:"put",value:{refs:Ea},prefix:I.attachmentStore}):ta=ta.concat([{key:dd,type:"del",prefix:I.attachmentStore},{key:dd,type:"del",prefix:I.binaryStore}]);Nb()})})}if(oa)return fa(oa);oa=P.map(function(Nb){var Sb=Va.rev_map[Nb];delete Va.rev_map[Nb];return Sb});Sz.traverseRevTree(Va.rev_tree,
function(Nb,Sb,pc,Eb,Lc){-1!==P.indexOf(Sb+"-"+pc)&&(Lc.status="missing")});var ta=[];ta.push({key:Va.id,value:Va,type:"put",prefix:I.docStore});var Ha={},zb=0,Ub;oa.forEach(function(Nb){ta.push({key:A(Nb),type:"del",prefix:I.bySeqStore});aa.get(I.bySeqStore,A(Nb),function(Sb,pc){if(Sb)return"NotFoundError"===Sb.name?lb():lb(Sb);Object.keys(pc._attachments||{}).forEach(function(Eb){Ha[pc._attachments[Eb].digest]=!0});lb()})})})};E._getLocal=function(W,P){I.localStore.get(W,function(S,fa){S?P(Af.createError(Af.MISSING_DOC)):
P(null,fa)})};E._putLocal=function(W,P,S){"function"===typeof P&&(S=P,P={});P.ctx?E._putLocalNoLock(W,P,S):E._putLocalWithLock(W,P,S)};E._putLocalWithLock=w(function(W,P,S){E._putLocalNoLock(W,P,S)});E._putLocalNoLock=function(W,P,S){delete W._revisions;var fa=W._rev,aa=W._id,oa=P.ctx||new au;oa.get(I.localStore,aa,function(Va,lb){if(Va&&fa||lb&&lb._rev!==fa)return S(Af.createError(Af.REV_CONFLICT));W._rev=fa?"0-"+(parseInt(fa.split("-")[1],10)+1):"0-1";oa.batch([{type:"put",prefix:I.localStore,key:aa,
value:W}]);var qa={ok:!0,id:W._id,rev:W._rev};if(P.ctx)return S(null,qa);oa.execute(F,function(ja){if(ja)return S(ja);S(null,qa)})})};E._removeLocal=function(W,P,S){"function"===typeof P&&(S=P,P={});P.ctx?E._removeLocalNoLock(W,P,S):E._removeLocalWithLock(W,P,S)};E._removeLocalWithLock=w(function(W,P,S){E._removeLocalNoLock(W,P,S)});E._removeLocalNoLock=function(W,P,S){var fa=P.ctx||new au;fa.get(I.localStore,W._id,function(aa,oa){if(aa)return"NotFoundError"!==aa.name?S(aa):S(Af.createError(Af.MISSING_DOC));
if(oa._rev!==W._rev)return S(Af.createError(Af.REV_CONFLICT));fa.batch([{prefix:I.localStore,type:"del",key:W._id}]);var Va={ok:!0,id:W._id,rev:"0-0"};if(P.ctx)return S(null,Va);fa.execute(F,function(lb){if(lb)return S(lb);S(null,Va)})})};E._destroy=function(W,P){W=fg.functionName(Y);if(EB.has(W))var S=EB.get(W);else return C(T,P);S.has(T)?(FB.removeAllListeners(T),S.get(T).close(function(){S.delete(T);C(T,P)})):C(T,P)}},bu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,Mma={},r5=oh;EN.prototype.next=function(a){var d=this||bu;if("function"!=typeof a)throw Error("next() requires a callback argument");if(d._ended)return a(Error("cannot call next() after end()"));if(d._nexting)return a(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=!1;a.apply(null,arguments)});r5.nextTick(function(){d._nexting=!1;a()})};EN.prototype.end=function(a){if("function"!=typeof a)throw Error("end() requires a callback argument");
if((this||bu)._ended)return a(Error("end() already called on iterator"));(this||bu)._ended=!0;if("function"==typeof(this||bu)._end)return this._end(a);r5.nextTick(a)};var s5=Mma=EN,ij="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Nma={},Oma=oh;Ir.prototype._serializeKey=function(a){return(this||ij)._db._serializeKey(a)};Ir.prototype._serializeValue=function(a){return(this||ij)._db._serializeValue(a)};Ir.prototype._checkWritten=function(){if((this||ij)._written)throw Error("write() already called on this batch");
};Ir.prototype.put=function(a,d){this._checkWritten();var k=(this||ij)._db._checkKey(a,"key",(this||ij)._db._isBuffer);if(k)throw k;a=this._serializeKey(a);d=this._serializeValue(d);"function"==typeof(this||ij)._put?this._put(a,d):(this||ij)._operations.push({type:"put",key:a,value:d});return this||ij};Ir.prototype.del=function(a){this._checkWritten();var d=(this||ij)._db._checkKey(a,"key",(this||ij)._db._isBuffer);if(d)throw d;a=this._serializeKey(a);"function"==typeof(this||ij)._del?this._del(a):
(this||ij)._operations.push({type:"del",key:a});return this||ij};Ir.prototype.clear=function(){this._checkWritten();(this||ij)._operations=[];"function"==typeof(this||ij)._clear&&this._clear();return this||ij};Ir.prototype.write=function(a,d){this._checkWritten();"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof a&&(a={});(this||ij)._written=!0;if("function"==typeof(this||ij)._write)return this._write(d);if("function"==typeof(this||
ij)._db._batch)return(this||ij)._db._batch((this||ij)._operations,a,d);Oma.nextTick(d)};var Pma=Nma=Ir,Cj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,t5={},Qma=Eg.Buffer,ns=oh;El.prototype.open=function(a,d){var k=this||Cj,b=(this||Cj).status;"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof a&&(a={});a.createIfMissing=0!=a.createIfMissing;a.errorIfExists=!!a.errorIfExists;"function"==typeof(this||
Cj)._open?((this||Cj).status="opening",this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})):((this||Cj).status="open",ns.nextTick(d))};El.prototype.close=function(a){var d=this||Cj,k=(this||Cj).status;if("function"!=typeof a)throw Error("close() requires a callback argument");"function"==typeof(this||Cj)._close?((this||Cj).status="closing",this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})):((this||Cj).status="closed",ns.nextTick(a))};El.prototype.get=
function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("get() requires a callback argument");if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||Cj)._get)return this._get(a,d,k);ns.nextTick(function(){k(Error("NotFound"))})};El.prototype.put=function(a,d,k,b){var e;"function"==typeof k&&(b=k);if("function"!=typeof b)throw Error("put() requires a callback argument");if(e=this._checkKey(a,
"key"))return b(e);a=this._serializeKey(a);d=this._serializeValue(d);"object"!=typeof k&&(k={});if("function"==typeof(this||Cj)._put)return this._put(a,d,k,b);ns.nextTick(b)};El.prototype.del=function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("del() requires a callback argument");if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});if("function"==typeof(this||Cj)._del)return this._del(a,d,k);ns.nextTick(k)};El.prototype.batch=
function(a,d,k){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(k=d);"function"==typeof a&&(k=a);if("function"!=typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return k(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var b=0,e=a.length,l,p;b<e;b++)if(l=a[b],"object"==typeof l&&((p=this._checkKey(l.type,"type"))||(p=this._checkKey(l.key,"key"))))return k(p);if("function"==typeof(this||Cj)._batch)return this._batch(a,
d,k);ns.nextTick(k)};El.prototype.approximateSize=function(a,d,k){if(null==a||null==d||"function"==typeof a||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof k)throw Error("approximateSize() requires a callback argument");a=this._serializeKey(a);d=this._serializeKey(d);if("function"==typeof(this||Cj)._approximateSize)return this._approximateSize(a,d,k);ns.nextTick(function(){k(null,0)})};El.prototype._setupIteratorOptions=
function(a){var d=this||Cj;a=ls(a);"start end gt gte lt lte".split(" ").forEach(function(k){a[k]&&d._isBuffer(a[k])&&0===a[k].length&&delete a[k]});a.reverse=!!a.reverse;a.keys=0!=a.keys;a.values=0!=a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=0!=a.keyAsBuffer;a.valueAsBuffer=0!=a.valueAsBuffer;return a};El.prototype.iterator=function(a){"object"!=typeof a&&(a={});a=this._setupIteratorOptions(a);return"function"==typeof(this||Cj)._iterator?this._iterator(a):new s5(this||Cj)};El.prototype._chainedBatch=
function(){return new Pma(this||Cj)};El.prototype._isBuffer=function(a){return Qma.isBuffer(a)};El.prototype._serializeKey=function(a){return this._isBuffer(a)?a:String(a)};El.prototype._serializeValue=function(a){return null==a?"":this._isBuffer(a)||ns.browser?a:String(a)};El.prototype._checkKey=function(a,d){if(null===a||void 0===a)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(a)&&0===a.length)return Error(d+" cannot be an empty Buffer");if(""===String(a))return Error(d+" cannot be an empty String")};
t5=El;var Rma=t5;var u5={};u5=function(a){return new Tw(a||rca,null)};var Pl=Tw.prototype;Object.defineProperty(Pl,"keys",{get:function(){var a=[];this.forEach(function(d,k){a.push(d)});return a}});Object.defineProperty(Pl,"values",{get:function(){var a=[];this.forEach(function(d,k){a.push(k)});return a}});Object.defineProperty(Pl,"length",{get:function(){return this.root?this.root._count:0}});Pl.insert=function(a,d){for(var k=this._compare,b=this.root,e=[],l=[];b;){var p=k(a,b.key);e.push(b);l.push(p);
b=0>=p?b.left:b.right}e.push(new Bm(0,a,d,null,null,1));for(a=e.length-2;0<=a;--a)b=e[a],e[a]=0>=l[a]?new Bm(b._color,b.key,b.value,e[a+1],b.right,b._count+1):new Bm(b._color,b.key,b.value,b.left,e[a+1],b._count+1);for(a=e.length-1;1<a;--a){l=e[a-1];b=e[a];if(1===l._color||1===b._color)break;d=e[a-2];if(d.left===l)if(l.left===b)if((p=d.right)&&0===p._color)l._color=1,d.right=Jr(1,p),d._color=0,--a;else{d._color=0;d.left=l.right;l._color=1;l.right=d;e[a-2]=l;e[a-1]=b;jj(d);jj(l);3<=a&&(a=e[a-3],a.left===
d?a.left=l:a.right=l);break}else if((p=d.right)&&0===p._color)l._color=1,d.right=Jr(1,p),d._color=0,--a;else{l.right=b.left;d._color=0;d.left=b.right;b._color=1;b.left=l;b.right=d;e[a-2]=b;e[a-1]=l;jj(d);jj(l);jj(b);3<=a&&(a=e[a-3],a.left===d?a.left=b:a.right=b);break}else if(l.right===b)if((p=d.left)&&0===p._color)l._color=1,d.left=Jr(1,p),d._color=0,--a;else{d._color=0;d.right=l.left;l._color=1;l.left=d;e[a-2]=l;e[a-1]=b;jj(d);jj(l);3<=a&&(a=e[a-3],a.right===d?a.right=l:a.left=l);break}else if((p=
d.left)&&0===p._color)l._color=1,d.left=Jr(1,p),d._color=0,--a;else{l.left=b.right;d._color=0;d.right=b.left;b._color=1;b.right=l;b.left=d;e[a-2]=b;e[a-1]=l;jj(d);jj(l);jj(b);3<=a&&(a=e[a-3],a.right===d?a.right=b:a.left=b);break}}e[0]._color=1;return new Tw(k,e[0])};Pl.forEach=function(a,d,k){if(this.root)switch(arguments.length){case 1:return FN(a,this.root);case 2:return GN(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,k)))return HN(d,k,this._compare,a,this.root)}};Object.defineProperty(Pl,
"begin",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.left;return new Cm(this,a)}});Object.defineProperty(Pl,"end",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.right;return new Cm(this,a)}});Pl.at=function(a){if(0>a)return new Cm(this,[]);for(var d=this.root,k=[];;){k.push(d);if(d.left){if(a<d.left._count){d=d.left;continue}a-=d.left._count}if(!a)return new Cm(this,k);--a;if(d.right){if(a>=d.right._count)break;d=d.right}else break}return new Cm(this,[])};Pl.ge=function(a){for(var d=
this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0>=l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Cm(this,b)};Pl.gt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0>l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Cm(this,b)};Pl.lt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Cm(this,b)};Pl.le=function(a){for(var d=
this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<=l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Cm(this,b)};Pl.find=function(a){for(var d=this._compare,k=this.root,b=[];k;){var e=d(a,k.key);b.push(k);if(0===e)return new Cm(this,b);k=0>=e?k.left:k.right}return new Cm(this,[])};Pl.remove=function(a){return(a=this.find(a))?a.remove():this};Pl.get=function(a){for(var d=this._compare,k=this.root;k;){var b=d(a,k.key);if(0===b)return k.value;k=0>=b?k.left:k.right}};var Gn=
Cm.prototype;Object.defineProperty(Gn,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Gn,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Gn.clone=function(){return new Cm(this.tree,this._stack.slice())};Gn.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var d=Array(a.length),k=a[a.length-1];d[d.length-1]=new Bm(k._color,k.key,k.value,k.left,k.right,k._count);for(var b=a.length-2;0<=b;--b)k=
a[b],d[b]=k.left===a[b+1]?new Bm(k._color,k.key,k.value,d[b+1],k.right,k._count):new Bm(k._color,k.key,k.value,k.left,d[b+1],k._count);k=d[d.length-1];if(k.left&&k.right){a=d.length;for(k=k.left;k.right;)d.push(k),k=k.right;b=d[a-1];d.push(new Bm(k._color,b.key,b.value,k.left,k.right,k._count));d[a-1].key=k.key;d[a-1].value=k.value;for(b=d.length-2;b>=a;--b)k=d[b],d[b]=new Bm(k._color,k.key,k.value,k.left,d[b+1],k._count);d[a-1].left=d[a]}k=d[d.length-1];if(0===k._color)for(b=d[d.length-2],b.left===
k?b.left=null:b.right===k&&(b.right=null),d.pop(),b=0;b<d.length;++b)d[b]._count--;else if(k.left||k.right)for(k.left?Q_(k,k.left):k.right&&Q_(k,k.right),k._color=1,b=0;b<d.length-1;++b)d[b]._count--;else{if(1===d.length)return new Tw(this.tree._compare,null);for(b=0;b<d.length;++b)d[b]._count--;b=d[d.length-2];for(var e,l,p,q=d.length-1;0<=q;--q){a=d[q];if(0===q){a._color=1;break}e=d[q-1];if(e.left===a){l=e.right;if(l.right&&0===l.right._color){l=e.right=gp(l);p=l.right=gp(l.right);e.right=l.left;
l.left=e;l.right=p;l._color=e._color;a._color=1;e._color=1;p._color=1;jj(e);jj(l);if(1<q){var u=d[q-2];u.left===e?u.left=l:u.right=l}d[q-1]=l;break}else if(l.left&&0===l.left._color){l=e.right=gp(l);p=l.left=gp(l.left);e.right=p.left;l.left=p.right;p.left=e;p.right=l;p._color=e._color;e._color=1;l._color=1;a._color=1;jj(e);jj(l);jj(p);1<q&&(u=d[q-2],u.left===e?u.left=p:u.right=p);d[q-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.right=Jr(0,l);break}else e.right=Jr(0,l);else l=gp(l),e.right=
l.left,l.left=e,l._color=e._color,e._color=0,jj(e),jj(l),1<q&&(u=d[q-2],u.left===e?u.left=l:u.right=l),d[q-1]=l,d[q]=e,q+1<d.length?d[q+1]=a:d.push(a),q+=2}else{l=e.left;if(l.left&&0===l.left._color){l=e.left=gp(l);p=l.left=gp(l.left);e.left=l.right;l.right=e;l.left=p;l._color=e._color;a._color=1;e._color=1;p._color=1;jj(e);jj(l);1<q&&(u=d[q-2],u.right===e?u.right=l:u.left=l);d[q-1]=l;break}else if(l.right&&0===l.right._color){l=e.left=gp(l);p=l.right=gp(l.right);e.left=p.right;l.right=p.left;p.right=
e;p.left=l;p._color=e._color;e._color=1;l._color=1;a._color=1;jj(e);jj(l);jj(p);1<q&&(u=d[q-2],u.right===e?u.right=p:u.left=p);d[q-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.left=Jr(0,l);break}else e.left=Jr(0,l);else l=gp(l),e.left=l.right,l.right=e,l._color=e._color,e._color=0,jj(e),jj(l),1<q&&(u=d[q-2],u.right===e?u.right=l:u.left=l),d[q-1]=l,d[q]=e,q+1<d.length?d[q+1]=a:d.push(a),q+=2}}b.left===k?b.left=null:b.right=null}return new Tw(this.tree._compare,d[0])};Object.defineProperty(Gn,
"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Gn,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Gn,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-1].left._count);for(var k=d.length-2;0<=k;--k)d[k+1]===d[k].right&&(++a,d[k].left&&(a+=d[k].left._count));
return a},enumerable:!0});Gn.next=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(Gn,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===a[d])return!0;return!1}});Gn.update=function(a){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");
var k=Array(d.length),b=d[d.length-1];k[k.length-1]=new Bm(b._color,b.key,a,b.left,b.right,b._count);for(a=d.length-2;0<=a;--a)b=d[a],k[a]=b.left===d[a+1]?new Bm(b._color,b.key,b.value,k[a+1],b.right,b._count):new Bm(b._color,b.key,b.value,b.left,k[a+1],b._count);return new Tw(this.tree._compare,k[0])};Gn.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-1].left===d;)d=a[a.length-1],a.pop()}};
Object.defineProperty(Gn,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}});var Sma=u5,TI={},UI=Eg,sq=UI.Buffer;sq.from&&sq.alloc&&sq.allocUnsafe&&sq.allocUnsafeSlow?TI=UI:(R_(UI,TI),TI.Buffer=Uw);R_(sq,Uw);Uw.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return sq(a,d,k)};Uw.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");
a=sq(a);void 0!==d?"string"===typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};Uw.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return sq(a)};Uw.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return UI.SlowBuffer(a)};var Ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tma={},v5=cj,T_=Rma,S_=s5,Dm=Aj,wca=Sma,VI=TI.Buffer,Vw={};v5(lF,S_);lF.prototype._next=function(a){if((this||
Ne)._done++>=(this||Ne)._limit||!(this||Ne)._tree.valid)return Rh(a);var d=(this||Ne)._tree.key;var k=(this||Ne)._tree.value;if(!this._test(d))return Rh(a);(this||Ne).keyAsBuffer&&(d=VI.from(d));(this||Ne).valueAsBuffer&&(k=VI.from(k));(this||Ne)._tree[(this||Ne)._incr]();Rh(function(){a(null,d,k)})};lF.prototype._test=function(){return!0};em.clearGlobalStore=function(a){a?Object.keys(Vw).forEach(function(d){delete Vw[d]}):Vw={}};v5(em,T_);em.prototype._open=function(a,d){var k=this||Ne;Rh(function(){d(null,
k)})};em.prototype._put=function(a,d,k,b){if("undefined"===typeof d||null===d)d="";k=(this||Ne)._store[(this||Ne)._location].find(a);(this||Ne)._store[(this||Ne)._location]=k.valid?k.update(d):(this||Ne)._store[(this||Ne)._location].insert(a,d);Rh(b)};em.prototype._get=function(a,d,k){var b=(this||Ne)._store[(this||Ne)._location].get(a);if("undefined"===typeof b)return Rh(function(){k(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(b)||(b=VI.from(String(b)));Rh(function(){k(null,b)})};em.prototype._del=
function(a,d,k){(this||Ne)._store[(this||Ne)._location]=(this||Ne)._store[(this||Ne)._location].remove(a);Rh(k)};em.prototype._batch=function(a,d,k){d=-1;for(var b,e,l,p=a.length,q=(this||Ne)._store[(this||Ne)._location];++d<p;)a[d]&&(b=this._isBuffer(a[d].key)?a[d].key:String(a[d].key),l=q.find(b),"put"===a[d].type?(e=this._isBuffer(a[d].value)?a[d].value:String(a[d].value),q=l.valid?l.update(e):q.insert(b,e)):q=l.remove());(this||Ne)._store[(this||Ne)._location]=q;Rh(k)};em.prototype._iterator=
function(a){return new lF(this||Ne,a)};em.prototype._isBuffer=function(a){return VI.isBuffer(a)};em.destroy=function(a,d){a="$"+a;a in Vw&&delete Vw[a];Rh(d)};var Uma=Tma=em.default=em,Vma={},xca=fg,zca=U_(Lma),yca=U_(Uma);IN.valid=function(){return!0};IN.use_prefix=!1;var Wma=Vma=function(a){a.adapter("memory",IN,!0)},og=lively.FreezerRuntime.recorderFor("lively.storage/database.js");og.nodejsRequire=function(a){if(!og.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(a):og.require("module")._load(a)};og.nodejs_leveldbPath=function(a){if(a.startsWith("/"))return a;if(a.match(/[^\/]+:\/\//))return a.startsWith("file:")&&(a=a.replace(/^file:\/\//,"")),a;if(!og.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):og.GLOBAL.process.cwd(),k=og.nodejsRequire("path").join,b=og.nodejsRequire("fs"),e=b.mkdirSync,
l=b.existsSync;b=b.readFileSync;if(a.includes("/"))return k(d,a);try{var p=b(k(d,"../package.json")),q=JSON.parse(p);if("lively.web"===q.name||"lively.next"===q.name){var u=k(d,"../.livelydbs");l(u)||e(u);return k(u,a)}}catch(w){}d=k(d,".livelydbs");l(d)||e(d);return k(d,a)};og.nodejs_attemptToLoadProperPouchDB=function(){if(!og.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var a=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");
d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");a=a(d,"../../lib/index.js");try{return og.PouchDB=System._nodeRequire(a),og.PouchDB.plugin(og.pouchdbAdapterMem),!0}catch(k){return!1}}try{return og.PouchDB=og.require("pouchdb"),og.PouchDB.plugin(og.pouchdbAdapterMem),!0}catch(k){return!1}};og._PouchDB=bia;og.pouchdbAdapterMem=Wma;og.Path=Ag;og.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;og.isNode="undefined"!==typeof global&&
"undefined"!==typeof og.process;og.PouchDB=og._PouchDB;og.PouchDB.plugin&&og.pouchdbAdapterMem&&og.PouchDB.plugin(og.pouchdbAdapterMem);og.createPouchDB=og.isNode?function(){var a=!1,d=!1;return function(k,b){b=void 0===b?{}:b;a||(a=!0,d=og.nodejs_attemptToLoadProperPouchDB());b.adapter||(b.adapter=k.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==b.adapter&&(k=og.nodejs_leveldbPath(k));b=Object.assign({},b,{name:k});return new og.PouchDB(b)}}():function(a,d){return new og.PouchDB(Object.assign({name:a},
d))};var ag=function(a,d){d=void 0===d?{}:d;this.name=a;this.options=d;this._pouchdb=null};ag.findDB=function(a){return this.databases.get(a)};ag.ensureDB=function(a,d){var k=this.findDB(a);if(k)return k;k=new this(a,d);this.databases.set(a,k);a.endsWith("lively.storage-meta")||this.createMetaEntryForDB(a,d);return k};ag.knownDBs=function(a,d){return og.Database.ensureDB("lively.storage-meta").getAll().then(function(k){return k.map(function(b){return b._id})})};ag.createMetaEntryForDB=function(a,
d){var k=og.Database.ensureDB("lively.storage-meta");k.has(a).then(function(b){return!b&&k.set(a,{created:Date.now(),options:d})})};ag.knowsDB=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.ensureDB(a),e.yield(k.docCount(),2)):3!=e.nextAddress?(b=e.yieldResult,0<b?e.return(!0):e.yield(k.destroy(),3)):e.return(!1)})};ag.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};ag.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};ag.prototype.destroy=function(a){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(a)};ag.prototype.update=function(a,d,k,b){b=void 0===b?0:b;var e=this,l,p,q,u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:return l=k=k||{},p=void 0===l.ensure?!0:l.ensure,q=void 0===l.retryOnConflict?!0:l.retryOnConflict,u=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,
w={latest:!0},y=e,A=y.pouchdb,Y.setCatchFinallyBlocks(2),Y.yield(A.get(a,w),4);case 4:C=Y.yieldResult;Y.leaveTryBlock(3);break;case 2:if(L=Y.enterCatchBlock(),"not_found"!==L.name||!p)throw L;case 3:return Y.yield(d(C),5);case 5:E=Y.yieldResult;if(!E||"object"!==typeof E)return Y.return(null);E._id!==a&&(E._id=a);C&&E._rev!==C._rev&&(E._rev=C._rev);Y.setCatchFinallyBlocks(6);return Y.yield(A.put(E),8);case 8:return I=Y.yieldResult,V=I.rev,Y.return(Object.assign(E,{_rev:V}));case 6:T=Y.enterCatchBlock();
if("conflict"===T.name&&q&&b<u)return Y.return(e.update(a,d,k,b+1));throw T;}})};ag.prototype.mixin=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return Object.assign(l||{_id:a},d)},k))})};ag.prototype.set=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return d},k))})};ag.prototype.get=function(a,d){d=void 0===d?{}:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.setCatchFinallyBlocks(2),e.yield(k.pouchdb.get(a,d),4);if(2!=e.nextAddress)return e.return(e.yieldResult);b=e.enterCatchBlock();if("not_found"===b.name)return e.return(void 0);throw b;})};ag.prototype.has=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(d.get(a),2):k.return(!!k.yieldResult)})};ag.prototype.add=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.pouchdb.post(a))})};
ag.prototype.docList=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.pouchdb.allDocs(a),2);k=y.yieldResult;b=k.rows;e=[];for(l=0;l<b.length;l++)p=b[l],q=p.id,u=p.value,w=u.rev,e.push({id:q,rev:w});return y.return(e)})};ag.prototype.docCount=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(a.pouchdb.allDocs(),2);d=k.yieldResult;
return k.return(d.rows.length)})};ag.prototype.revList=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(d.pouchdb.get(a,{revs:!0}),2);k=p.yieldResult;b=k._revisions;e=b.start;l=b.ids;return p.return(l.map(function(q){return e--+"-"+q}))})};ag.prototype.getAllRevisions=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(b=d,e=void 0===
b.skip?0:b.skip,l=void 0===b.limit?0:b.limit,u.yield(k.revList(a),2)):3!=u.nextAddress?(p=u.yieldResult,0<e&&(p=p.slice(e)),0<l&&(p=p.slice(0,l)),q=p.map(function(w){return{rev:w,id:a}}),u.yield(k.getDocuments(q),3)):u.return(u.yieldResult)})};ag.prototype.getAll=function(a){a=void 0===a?{}:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.allDocs(Object.assign({},a,{include_docs:!0})),2);k=e.yieldResult;b=k.rows;return e.return(b.map(function(l){return l.doc}))})};
ag.prototype.setDocuments=function(a,d){var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(k.pouchdb.bulkDocs(a,d),2);case 2:b=y.yieldResult,e=0;case 3:if(!(e<b.length)){y.jumpTo(5);break}l=a[e];p=b[e];if(p.ok||"conflict"!==p.name||l._rev){y.jumpTo(4);break}return y.yield(k.set(l._id,l),7);case 7:q=y.yieldResult,u=q._id,w=q._rev,b[e]={ok:!0,id:u,rev:w};case 4:e++;y.jumpTo(3);break;case 5:return y.return(b)}})};ag.prototype.updateDocuments=
function(a,d,k){var b=this,e,l,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(b.pouchdb.bulkDocs(a,k),2);case 2:e=I.yieldResult,l=[],p={},q=0;case 3:if(!(q<e.length)){if(!l.length){I.jumpTo(8);break}C=Object;E=C.assign;L=p;return I.yield(b.updateDocuments(l,d,k),9)}u=a[q];w=e[q];p[w._id||u._id]=w;if(w.ok||"conflict"!==w.name){I.jumpTo(4);break}return I.yield(b.get(u._id),7);case 7:if(y=I.yieldResult,A=d(y,u))A._id||(A._id=
u._id),A._rev||(A._rev=y._rev),l.push(A);case 4:q++;I.jumpTo(3);break;case 9:p=E.call(C,{},L,{},I.yieldResult);case 8:return I.return(p)}})};ag.prototype.getDocuments=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return b=d,e=void 0===b.ignoreErrors?!0:b.ignoreErrors,L.yield(k.pouchdb.bulkGet({docs:a}),2);l=L.yieldResult;p=l.results;q=[];for(u=0;u<p.length;u++)for(w=p[u],y=w.docs,A=w.id,console.assert(1===
y.length,"getDocuments: expected only one doc for "+A),C=0;C<y.length;C++)E=y[C],e&&!E.ok||q.push(E.ok||E.error||E);return L.return(q)})};ag.prototype.query=function(a,d){return this.pouchdb.query(a,d)};ag.prototype.remove=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return"undefined"!==typeof d?(e={_id:a,_rev:d},p.jumpTo(2)):p.yield(b.get(a),3);2!=p.nextAddress&&(e=p.yieldResult);l=e;return p.return(l?b.pouchdb.remove(l):void 0)})};
ag.prototype.removeAll=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=a.pouchdb,b.yield(d.allDocs(),2)):3!=b.nextAddress?(k=b.yieldResult,b.yield(Promise.all(k.rows.map(function(e){return d.remove(e.id,e.value.rev)})),3)):b.return(b.yieldResult)})};ag.prototype.replicateTo=function(a,d){a instanceof og.Database&&(a=a.pouchdb);return this.pouchdb.replicate.to(a,d)};ag.prototype.replicateFrom=function(a,d){a instanceof og.Database&&
(a=a.pouchdb);return this.pouchdb.replicate.from(a,d)};ag.prototype.sync=function(a,d){a instanceof og.Database&&(a=a.pouchdb);return this.pouchdb.sync(a,d)};ag.prototype.getConflicts=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},a)),2);k=e.yieldResult;b=k.rows;return e.return(b.map(function(l){var p={id:l.id,rev:l.doc._rev,
doc:l.doc};l.doc._conflicts&&(p.conflicts=l.doc._conflicts,delete l.doc._conflicts);return p}))})};ag.prototype.resolveConflicts=function(a,d){var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(k.pouchdb.get(a,{conflicts:!0}),2);case 2:return b=y.yieldResult,e=b._conflicts.map(function(A){return{id:a,rev:A}}),y.yield(k.getDocuments(e),3);case 3:l=y.yieldResult,p=b,q=$jscomp.makeIterator(l),u=q.next();case 4:if(u.done){y.jumpTo(6);
break}w=u.value;return y.yield(d(p,w),7);case 7:return(p=y.yieldResult)?y.yield(k.set(a,p),8):y.return(null);case 8:return p=y.yieldResult,y.yield(k.pouchdb.remove(w),5);case 5:u=q.next();y.jumpTo(4);break;case 6:return y.return(p)}})};ag.prototype.diffWith=function(a){var d=this,k,b,e,l,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(a.docList(),2);if(3!=I.nextAddress)return k=I.yieldResult,I.yield(d.docList(),3);b=I.yieldResult;
e=k.reduce(function(V,T){var Y={};return Object.assign(V,(Y[T.id]=T.rev,Y))},{});l=b.reduce(function(V,T){var Y={};return Object.assign(V,(Y[T.id]=T.rev,Y))},{});p=[];q=[];u=[];for(w in e)y=e[w],(A=l[w])?y!=A&&u.push({right:{id:w,rev:y},left:{id:w,rev:A}}):q.push({id:w,rev:y});for(C in l)E=l[C],(L=e[C])||p.push({id:C,rev:E});return I.return({inLeft:p,inRight:q,changed:u})})};ag.loadDump=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(b=a,e=b.header,l=b.docs,p=d.name||e.name,q=k.ensureDB(p),u.yield(q.setDocuments(l,{new_edits:!1}),2)):u.return(q)})};ag.prototype.dump=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){if(1==Y.nextAddress)return k=a,b=k.filterFn,e=k.name,l=k.type,p=k.dbInfo,q=d,u=q.name,w=q.pouchdb,A=y=e||u,C=l||w.type(),E=(new Date).toJSON(),L=Object,I=L.assign,Y.yield(w.info(),2);if(3!=Y.nextAddress)return V={name:A,
db_type:C,start_time:E,db_info:I.call(L,{},Y.yieldResult,{db_name:y},p)},Y.yield(d.getAll({attachments:!0}),3);T=Y.yieldResult;"function"===typeof b&&(T=b(T,V));return Y.return({header:V,docs:T})})};ag.prototype.backup=function(a){a=void 0===a?1:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.name+"_backup_"+a,b=d.constructor.ensureDB(k),e.yield(d.replicateTo(b),2)):e.return(b)})};ag.prototype.migrate=function(a){var d=this,k,b,e,l,p,q;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(d.getAll(),2);if(3!=u.nextAddress){k=u.yieldResult;b=[];e=[];for(l=0;l<k.length;l++)p=k[l],(q=a(p,l))?(q.hasOwnProperty("_id")||(q._id=p._id),q.hasOwnProperty("_rev")&&delete q._rev,b.push(q)):e.push(p);return u.yield(d.setDocuments(b),3)}return u.return({migrated:b.length,unchanged:e.length})})};ag.prototype.createDesignDocs=function(a){return a.map(this.createDesignDoc)};ag.prototype.createDesignDoc=
function(a){var d=a.name,k=a.mapFn,b=a.reduceFn,e=a.filterFn;a={_id:"_design/"+d,version:void 0===a.version?1:a.version};e&&og.Path("filters."+d).set(a,e.toString(),!0);k&&og.Path("views."+d+".map").set(a,k.toString(),!0);b&&og.Path("views."+d+".reduce").set(a,b.toString(),!0);return a};ag.prototype.addDesignDocs=function(a,d){d=void 0===d?!1:d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(b=k.createDesignDocs(a),l.yield(k.updateDocuments(b,
function(p,q){return!p.hasOwnProperty("version")||q.hasOwnProperty("version")&&q.version>p.version?q:null}),2)):3!=l.nextAddress?(e=l.yieldResult,d?l.yield(Promise.all(b.map(function(p){return k.designDocDoQueryStale(p._id)})),3):l.jumpTo(3)):l.return(e)})};ag.prototype.addDesignDoc=function(a,d){var k=a.name,b=a.mapFn,e=a.reduceFn,l=a.version;d=void 0===d?!1:d;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){return 1==w.nextAddress?(q=p.createDesignDoc({name:k,mapFn:b,
reduceFn:e,version:l}),w.yield(p.set(q._id,q),2)):3!=w.nextAddress?(u=w.yieldResult,d?w.yield(p.designDocDoQueryStale(q._id),3):w.jumpTo(3)):w.return(u)})};ag.prototype.removeDesignDoc=function(a){return this.remove("_design/"+a)};ag.prototype.designDocDoQueryStale=function(a){a=$jscomp.makeIterator(a.split("/"));a.next();a=a.next().value;return this.query(a,{stale:"update_after"})};$jscomp.global.Object.defineProperties(ag.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=og.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(ag,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return og.PouchDB},set:function(a){og.PouchDB=a}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});og.Database=ag;og.default=ag;var Dd=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Dd.isHash=function(a){return"string"===typeof a&&40===a.length&&a.match(Dd.hashRe)};
Dd.checkArg=function(a,d,k){if("undefined"===typeof d&&"string"===typeof k&&!k.includes("undefined"))throw Error("parameter "+a+" is undefined");if(null===d&&"string"===typeof k&&!k.includes("null"))throw Error("parameter "+a+" is null");if("string"===typeof k){var b=typeof d,e=d?d.constructor.name:"";if(!k.split("|").some(function(l){return b===l||e===l}))throw Error('parameter "'+a+'" expected to be of type '+k+" but is "+(e||b));}if("function"===typeof k&&(d=k(d))&&d.error)throw Error('check of parameter "'+
a+'" failed: '+d.error);};Dd.checkArgs=function(a,d,k){for(var b in d)Dd.checkArg(b,a[b],d[b]);if("function"===typeof k&&(d=k(a))&&d.error)throw Error(d.error);return a};Dd.Database=ag;Dd.resource=Dc;Dd.obj=df;Dd.promise=Vf;Dd.arr=Ke;Dd.string=rg;Dd.Path=Ag;Dd.parse=Bj;Dd.categorizer=AA;Dd.sha1=function(){function a(){var l=e.createHash("sha1");return{update:function(p){return l.update(p)},digest:function(){return l.digest("hex")}}}function d(l){function p(Y){w[I]|=(255&Y)<<V;V?V-=8:(I++,V=24);16===
I&&q()}function q(){for(var Y=16;80>Y;Y++){var na=w[Y-3]^w[Y-8]^w[Y-14]^w[Y-16];w[Y]=na<<1|na>>>31}var Ba,F;na=y;var W=A,P=C,S=E,fa=L;for(Y=0;80>Y;Y++){20>Y?(Ba=S^W&(P^S),F=1518500249):40>Y?(Ba=W^P^S,F=1859775393):60>Y?(Ba=W&P|S&(W|P),F=2400959708):(Ba=W^P^S,F=3395469782);var aa=(na<<5|na>>>27)+Ba+fa+F+(0|w[Y]);fa=S;S=P;P=W<<30|W>>>2;W=na;na=aa}y=y+na|0;A=A+W|0;C=C+P|0;E=E+S|0;L=L+fa|0;for(Y=I=0;16>Y;Y++)w[Y]=0}function u(Y){for(var na="",Ba=28;0<=Ba;Ba-=4)na+=(Y>>Ba&15).toString(16);return na}var w,
y=1732584193,A=4023233417,C=2562383102,E=271733878,L=3285377520,I=0,V=24,T=0;return w=l?k:new Uint32Array(80),{update:function(Y){if("string"===typeof Y){var na=Y.length;T+=8*na;for(var Ba=0;Ba<na;Ba++)p(Y.charCodeAt(Ba))}else for(na=Y.length,T+=8*na,Ba=0;Ba<na;Ba++)p(Y[Ba])},digest:function(){p(128);(14<I||14===I&&24>V)&&q();I=14;V=24;p(0);p(0);p(0xffffffffff<T?T/1099511627776:0);p(4294967295<T?T/4294967296:0);for(var Y=24;0<=Y;Y-=8)p(T>>Y);return u(y)+u(A)+u(C)+u(E)+u(L)}}}var k,b,e;return"object"===
typeof Dd.process&&"object"===typeof Dd.process.versions&&Dd.process.versions.node&&"renderer"!==Dd.process.__atom_type?(e="undefined"!==typeof System?System._nodeRequire("crypto"):Dd.require("crypto"),b=a):(k=new Uint32Array(80),b=d),function(l){if(void 0===l)return b(!1);var p=b(!0);return p.update(l),p.digest()}}();Dd.hashRe=/^[0-9a-f]+$/i;Dd.objectDBs=Dd.objectDBs||new Map;var zg=function(a,d){this.name=a;if(!d.snapshotLocation||!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=d.snapshotLocation;this.__versionDB=this.__commitDB=null};zg.dbList=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(a=Dd.Database.ensureDB("internal__objectdb-meta"),d.yield(a.getAll(),2)):d.return(d.yieldResult.map(function(k){return k._id}))})};zg.find=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(k=Dd.objectDBs.get(a))return l.return(k);b=Dd.Database.ensureDB("internal__objectdb-meta");
return l.yield(b.get(a),2)}return(e=l.yieldResult)?l.return(d.named(a,e)):l.return()})};zg.named=function(a,d){d=void 0===d?{}:d;var k=Dd.objectDBs.get(a);if(k)return k;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=Dd.resource(d.snapshotLocation)}catch(b){d.snapshotLocation=Dd.resource(System.baseURL).join(d.snapshotLocation)}k=new this(a,d);Dd.objectDBs.set(a,k);Dd.Database.ensureDB("internal__objectdb-meta").set(a,
Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(b){return console.error("error writing objectdb meta:",b)});return k};zg.prototype.destroy=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(d=Dd.Database.findDB(a.name+"-commits"))?e.yield(d.destroy(),2):e.jumpTo(2);if(4!=e.nextAddress)return(k=Dd.Database.findDB(a.name+"-version-graph"))?e.yield(k.destroy(),4):e.jumpTo(4);Dd.objectDBs.delete(a.name);b=
Dd.Database.ensureDB("internal__objectdb-meta");return e.yield(b.remove(a.name),0)})};zg.prototype.snapshotResourceFor=function(a){var d=a.content.slice(0,2);a=a.content.slice(2);return this.snapshotLocation.join(d+"/"+a+".json")};zg.prototype.snapshotObject=function(a,d,k,b,e,l,p,q){var u=this,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return w=function(C){return C},A.yield(w(k),2);y=A.yieldResult;return A.return(u.commit(a,d,y,e,l,p,q))})};zg.prototype.loadObject=
function(a,d,k,b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.loadSnapshot(a,d,b,e),2);p=u.yieldResult;q=function(w){return w};return u.return(q(p))})};zg.prototype.has=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k.objectStats(a,d),2):b.return(!!b.yieldResult)})};zg.prototype.objects=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(d.objectStats(a),2);k=l.yieldResult;if(a)return l.return(Object.keys(k||{}));b={};for(e in k)b[e]=Object.keys(k[e]);return l.return(b)})};zg.prototype.objectStats=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:b={};if(e=k.__commitDB){P.jumpTo(2);break}return P.yield(k._commitDB(),3);case 3:e=P.yieldResult;case 2:return l=e,p={reduce:!0,group:!0},a&&d?p.key=a+
"\x00"+d:a&&(p.startkey=a+"\x00",p.endkey=a+"\ufff0"),P.setCatchFinallyBlocks(4),P.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",p),6);case 6:q=P.yieldResult;u=q.rows;w=$jscomp.makeIterator(u);for(y=w.next();!y.done;y=w.next())C=A=y.value,E=C.key,L=C.value,I=L.count,V=L.max,T=L.min,Y=$jscomp.makeIterator(E.split("\x00")),na=Y.next().value,Ba=Y.next().value,F=b[na]||(b[na]={}),F[Ba]={count:I,newest:V,oldest:T};P.leaveTryBlock(5);break;case 4:return W=P.enterCatchBlock(),console.error(W),P.return(b);
case 5:return a&&d?P.return((b[a]||{})[d]):a?P.return(b[a]):P.return(b)}})};zg.prototype.getCommits=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?Infinity:b;var e=this,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(e._log(a,d,k,b),2);case 2:l=w.yieldResult;if(!l.length)return w.return([]);if(p=e.__commitDB){w.jumpTo(3);break}return w.yield(e._commitDB(),4);case 4:p=w.yieldResult;case 3:return q=p,w.yield(q.getDocuments(l.map(function(y){return{id:y}})),
5);case 5:return u=w.yieldResult,w.return(u)}})};zg.prototype.getCommit=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.get(a))})};zg.prototype.getCommitsWithIds=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.length?(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),
3):e.return([]);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.getDocuments(a.map(function(l){return{id:l}})))})};zg.prototype.getLatestCommit=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?!1:b;var e=this,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return l=$jscomp,p=l.makeIterator,C.yield(e._log(a,d,k,1),2);case 2:q=p.call(l,C.yieldResult);u=q.next().value;if(!u)return C.return(null);if(w=e.__commitDB){C.jumpTo(3);break}return C.yield(e._commitDB(),
4);case 4:w=C.yieldResult;case 3:return y=w,C.yield(y.get(u),5);case 5:return(A=C.yieldResult)&&A.deleted&&!b?C.return(null):C.return(A)}})};zg.prototype.commit=function(a,d,k,b,e,l,p){l=void 0===l?"HEAD":l;var q=this,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){switch(oa.nextAddress){case 1:u=b;w=u.author;y=void 0===u.description?"no description":u.description;A=void 0===u.tags?[]:u.tags;C=u.timestamp;E=void 0===u.message?"":u.message;
L=u.metadata;I=u.preview;if(!a)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!w)throw Error("Cannot commit "+a+"/"+d+" without user");if(V=q.__versionDB){oa.jumpTo(2);break}return oa.yield(q._versionDB(),3);case 3:V=oa.yieldResult;case 2:return T=V,oa.yield(q.versionGraph(a,d),4);case 4:Ba=(na=(Y=oa.yieldResult)?Y.refs[l]:null)?[na]:[];if(p){if(!Y)throw Error('Trying to store "'+a+"/"+d+'" on top of expected version '+p+" but no version entry exists!");if(na!==p)throw Error('Trying to store "'+
a+"/"+d+'" on top of expected version '+p+" but ref "+l+" is of version "+na+"!");}W=(F=Dd.isHash(k))?null:k?JSON.stringify(k):null;P=q._createCommit(a,d,y,A,L,w,C,E,Ba,F?null:k,W,e||I,F?k:null);if(!k||F){oa.jumpTo(5);break}S=q.snapshotResourceFor(P);return oa.yield(S.parent().ensureExistance(),6);case 6:return S.canDealWithJSON?oa.yield(S.writeJson(k),5):oa.yield(S.write(W),5);case 5:if(fa=q.__commitDB){oa.jumpTo(11);break}return oa.yield(q._commitDB(),12);case 12:fa=oa.yieldResult;case 11:return aa=
fa,oa.yield(aa.set(P._id,P),13);case 13:return P=oa.yieldResult,Y||(Y={refs:{},history:{}}),Y.refs[l]=P._id,Y.history[P._id]=Ba,oa.yield(T.set(a+"/"+d,Y),14);case 14:return oa.return(P)}})};zg.prototype.loadSnapshot=function(a,d,k,b){b=void 0===b?"HEAD":b;var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(k&&"string"!==typeof k){l=k;u.jumpTo(2);break}if(k){if(p=e.__commitDB){u.jumpTo(6);break}return u.yield(e._commitDB(),7)}return u.yield(e.getLatestCommit(a,
d,b),5);case 5:l=u.yieldResult;u.jumpTo(2);break;case 7:p=u.yieldResult;case 6:return q=p,u.yield(q.get(k),8);case 8:l=u.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+a+"/"+d+" (using "+k+")");return u.return(e.snapshotResourceFor(l).readJson())}})};zg.prototype.revert=function(a,d,k,b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(l=e.__versionDB){u.jumpTo(2);break}return u.yield(e._versionDB(),3);
case 3:l=u.yieldResult;case 2:return p=l,u.yield(p.get(a+"/"+d),4);case 4:return q=u.yieldResult,q.refs[k||"HEAD"]=b,delete q.deleted,u.yield(p.set(a+"/"+d,q),5);case 5:return u.return(q)}})};zg.prototype._createCommit=function(a,d,k,b,e,l,p,q,u,w,y,A,C){q=void 0===q?"":q;u=void 0===u?[]:u;!A&&w&&w.preview&&(A=w.preview);return this._createCommitFromSpec({name:d,type:a,timestamp:p||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:b,description:k,preview:A,message:q,content:C||y&&Dd.sha1(y)||
null,deleted:!C&&!w,metadata:e,ancestors:u},!0)};zg.prototype._createCommitFromSpec=function(a,d){d=void 0===d?!1:d;if(!a.name)throw Error("commit needs name");if(!a.type)throw Error("commit needs type");if(!a.author)throw Error("commit needs author");if(!a.author.name)throw Error("commit needs author.name");a.timestamp||(a.timestamp=Date.now());a.tags||(a.tags=[]);!d&&a.content&&(d=Dd.isHash(a.content),d||(a.content=Dd.sha1(a.content)));d=Dd.obj.dissoc(a,["preview"]);d=Dd.sha1(JSON.stringify(d));
return Object.assign(a,{_id:d})};zg.prototype._commitDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(a.__commitDB)return b.return(a.__commitDB);d=a.name+"-commits";if(k=Dd.Database.findDB(d))return b.return(a.__commitDB=k);k=Dd.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._commitdb_indexes),2)}return b.return(a.__commitDB=k)})};zg.prototype.close=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!a.__commitDB){d.jumpTo(2);
break}return d.yield(a.__commitDB.close(),3);case 3:a.__commitDB=null;case 2:if(!a.__versionDB){d.jumpTo(0);break}return d.yield(a.__versionDB.close(),5);case 5:a.__versionDB=null,d.jumpToEnd()}})};zg.prototype.versionGraph=function(a,d){var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:if(b=k.__versionDB){p.jumpTo(2);break}return p.yield(k._versionDB(),3);case 3:b=p.yieldResult;case 2:return e=b,p.yield(e.get(a+"/"+d),4);case 4:return l=
p.yieldResult,p.return(!l||l.deleted||l._deleted?null:l)}})};zg.prototype._log=function(a,d,k,b){b=void 0===b?Infinity:b;var e=this,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(e.versionGraph(a,d),2);l=w.yieldResult;if(!l||l.deleted||l._deleted)return w.return([]);p=l.refs.HEAD;for(q=[];;){if(q.includes(p))throw Error("cyclic version graph???");q.push(p);u=$jscomp.makeIterator(l.history[p]||[]);p=u.next().value;if(!p||q.length>=b)break}return w.return(q)})};
zg.prototype._findTimestampedVersionsOfObjectNamed=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:b=d;e=void 0===b.include_docs?!0:b.include_docs;l=void 0===b.descending?!0:b.descending;p=void 0===b.startTime?"0".repeat(13):b.startTime;q=void 0===b.endTime?"9".repeat(13):b.endTime;u=a+"\x00"+(l?q:p);w=a+"\x00"+(l?p:q);if(y=k.__commitDB){L.jumpTo(2);break}return L.yield(k._commitDB(),3);case 3:y=
L.yieldResult;case 2:return A=y,L.yield(A.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:l,include_docs:e,startkey:u,endkey:w})),4);case 4:return C=L.yieldResult,E=C.rows,L.return(e?E.map(function(I){return I.doc}):E.map(function(I){return I.id}))}})};zg.prototype._versionDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(a.__versionDB)return b.return(a.__versionDB);d=a.name+"-version-graph";if(k=Dd.Database.findDB(d))return b.return(a.__versionDB=
k);k=Dd.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._versiondb_indexes),2)}return b.return(a.__versionDB=k)})};zg.prototype.exportToDir=function(a,d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;var e=this,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha,zb,Ub,Nb,Sb,pc,Eb,Lc,dd,ia,Ca,Ea,jb,Mb,Tc,Rc,qc,de;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vd){switch(Vd.nextAddress){case 1:"string"===typeof a&&(a=Dd.resource(a));if(e.__commitDB){Vd.jumpTo(2);break}return Vd.yield(e._commitDB(),
3);case 3:case 2:if(l=e.__versionDB){Vd.jumpTo(4);break}return Vd.yield(e._versionDB(),5);case 5:l=Vd.yieldResult;case 4:p=l;q=[];if(!d)return Vd.yield(p.getAll(),13);u=$jscomp.makeIterator(d);w=u.next();case 8:if(w.done){Vd.jumpTo(7);break}A=y=w.value;C=A.name;E=A.type;L=a.join(E).join(C).asDirectory();return Vd.yield(e.versionGraph(E,C),11);case 11:return I=Vd.yieldResult,V=I.refs,T=I.history,Y=Object.keys(T),Vd.yield(e.getCommitsWithIds(Y),12);case 12:na=Vd.yieldResult;q.push({refs:V,history:T,
currentExportDir:L,commits:na,name:C,type:E});w=u.next();Vd.jumpTo(8);break;case 13:Ba=Vd.yieldResult,F=$jscomp.makeIterator(Ba),W=F.next();case 14:if(W.done){Vd.jumpTo(7);break}S=P=W.value;fa=S.refs;aa=S.history;oa=S._id;if(oa.startsWith("_")){Vd.jumpTo(15);break}return Vd.yield(e.getCommit(fa.HEAD||Object.keys(aa)[0]),17);case 17:return Va=Vd.yieldResult,lb=Va.type,qa=Va.name,ja=a.join(lb).join(qa).asDirectory(),ta=Object.keys(aa),Vd.yield(e.getCommitsWithIds(ta),18);case 18:Ha=Vd.yieldResult,q.push({refs:fa,
history:aa,currentExportDir:ja,commits:Ha,name:qa,type:lb});case 15:W=F.next();Vd.jumpTo(14);break;case 7:zb={},Ub=$jscomp.makeIterator(q),Nb=Ub.next();case 19:if(Nb.done){Vd.jumpTo(0);break}pc=Sb=Nb.value;Eb=pc.refs;Lc=pc.history;zb.$jscomp$loop$prop$currentExportDir$1307$2694=pc.currentExportDir;dd=pc.commits;ia=pc.name;Ca=pc.type;b||(dd=dd.filter(function(Dg){return!Dg.deleted}));Ea=k?dd.map(function(Dg){return function(eg){if(eg.deleted||eg._deleted||!eg.content)return null;delete eg._rev;eg=
e.snapshotResourceFor(eg);var Mh=Dg.$jscomp$loop$prop$currentExportDir$1307$2694.join(eg.parent().name()+"/"+eg.name());return{from:eg,to:Mh}}}(zb)).filter(Boolean):[];k||dd.forEach(function(Dg){delete Dg._rev});return Vd.yield(zb.$jscomp$loop$prop$currentExportDir$1307$2694.ensureExistance(),22);case 22:return Vd.yield(zb.$jscomp$loop$prop$currentExportDir$1307$2694.join("index.json").writeJson({name:ia,type:Ca}),23);case 23:return Vd.yield(zb.$jscomp$loop$prop$currentExportDir$1307$2694.join("commits.json").writeJson(dd),
24);case 24:return Vd.yield(zb.$jscomp$loop$prop$currentExportDir$1307$2694.join("history.json").writeJson({refs:Eb,history:Lc}),25);case 25:jb=$jscomp.makeIterator(Ea),Mb=jb.next();case 26:if(Mb.done){zb={$jscomp$loop$prop$currentExportDir$1307$2694:zb.$jscomp$loop$prop$currentExportDir$1307$2694};Nb=Ub.next();Vd.jumpTo(19);break}Rc=Tc=Mb.value;qc=Rc.from;de=Rc.to;return Vd.yield(qc.copyTo(de),27);case 27:Mb=jb.next(),Vd.jumpTo(26)}})};zg.prototype.exportToSpecs=function(a,d){d=void 0===d?!1:d;var k=
this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:b=[];if(a){Y.jumpTo(2);break}a=[];return Y.yield(k.objectStats(),3);case 3:for(l in e=Y.yieldResult||{},e)for(p in e[l])a.push({type:l,name:p});case 2:q=$jscomp.makeIterator(a),u=q.next();case 4:if(u.done){Y.jumpTo(6);break}y=w=u.value;A=y.name;C=y.type;return Y.yield(k.versionGraph(C,A),7);case 7:return E=Y.yieldResult,L=E.refs,I=E.history,V=Object.keys(I),Y.yield(k.getCommitsWithIds(V),
8);case 8:T=Y.yieldResult;d||(T=T.filter(function(na){return!na.deleted}));T.forEach(function(na){delete na._rev});b.push({type:C,name:A,commits:T,history:{refs:L,history:I}});u=q.next();Y.jumpTo(4);break;case 6:return Y.return(b)}})};zg.prototype.importFromDir=function(a,d,k){function b(E){var L,I,V,T,Y,na,Ba,F,W,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:return L=$jscomp,I=L.makeIterator,S.yield(Promise.all([E.join("index.json").readJson(),E.join("commits.json").readJson(),
E.join("history.json").readJson()]),2);case 2:V=I.call(L,S.yieldResult);T=V.next().value;Y=T.type;na=T.name;Ba=V.next().value;F=V.next().value;if(!k){W=[];S.jumpTo(3);break}return S.yield(E.dirList(1,{exclude:function(fa){return!fa.isDirectory()}}),4);case 4:W=S.yieldResult;case 3:return P=W,S.return({dir:E,type:Y,name:na,commits:Ba,history:F,snapshotDirs:P})}})}d=void 0===d?!1:d;k=void 0===k?!1:k;var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.yield(a.dirList(3,
{exclude:function(L){return!L.isDirectory()&&"index.json"!==L.name()}}),2);case 2:l=E.yieldResult,l=l.filter(function(L){return"index.json"===L.name()}),p=l.map(function(L){return L.parent()}),q=[],u=$jscomp.makeIterator(p),w=u.next();case 3:if(w.done){E.jumpTo(5);break}y=w.value;A=q;C=A.push;return E.yield(b(y),6);case 6:C.call(A,E.yieldResult);w=u.next();E.jumpTo(3);break;case 5:return E.return(e.importFromSpecs(q,d,k))}})};zg.prototype.importFromSpecs=function(a,d,k){d=void 0===d?!1:d;k=void 0===
k?!1:k;var b=this,e,l,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(d){I.jumpTo(2);break}if(e=b.__versionDB){I.jumpTo(3);break}return I.yield(b._versionDB(),4);case 4:e=I.yieldResult;case 3:l=e,p=$jscomp.makeIterator(a),q=p.next();case 5:if(q.done){I.jumpTo(2);break}w=u=q.value;y=w.type;A=w.name;return I.yield(l.get(y+"/"+A),8);case 8:if(I.yieldResult)throw Error("Import failed: object "+y+"/"+A+" already exists and overwrite is not allowed");
q=p.next();I.jumpTo(5);break;case 2:C=$jscomp.makeIterator(a),E=C.next();case 9:if(E.done){I.jumpTo(11);break}L=E.value;return I.yield(b.importFromSpec(L,!0,k),10);case 10:E=C.next();I.jumpTo(9);break;case 11:return I.return(a)}})};zg.prototype.importFromSpec=function(a,d,k){d=void 0===d?!1:d;k=void 0===k?!1:k;var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:if(e=b.__versionDB){T.jumpTo(2);break}return T.yield(b._versionDB(),
3);case 3:e=T.yieldResult;case 2:l=e;if(p=b.__commitDB){T.jumpTo(4);break}return T.yield(b._commitDB(),5);case 5:p=T.yieldResult;case 4:q=p;u=b;w=u.snapshotLocation;y=a;A=y.type;C=y.name;E=y.commits;L=y.history;I=y.snapshotDirs;if(!(V=!d)){T.jumpTo(6);break}return T.yield(l.get(A+"/"+C),7);case 7:V=T.yieldResult;case 6:if(V)throw Error("Import failed: object "+A+"/"+C+" already exists and overwrite is not allowed");return T.yield(Promise.all([q.setDocuments(E),l.set(A+"/"+C,L)].concat($jscomp.arrayFromIterable(I&&
k?I.map(function(Y){return Y.copyTo(w.join(Y.name()).asDirectory())}):[]))),8);case 8:return T.return(a)}})};zg.prototype.importFromResource=function(a,d,k,b,e){e=void 0===e?!1:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(k.readJson(),2);case 2:p=u.yieldResult;if(!(q=e)){u.jumpTo(3);break}return u.yield(l.has(a,d),4);case 4:q=u.yieldResult;case 3:if(!q){u.jumpTo(5);break}return u.yield(l.delete(a,d,!1),5);case 5:return u.return(l.commit(a,
d,p,b))}})};zg.prototype.replicateTo=function(a,d,k,b){return(new Dd.Synchronization(this,a,d,k,Object.assign({method:"replicateTo"},b))).start()};zg.prototype.replicateFrom=function(a,d,k,b){return(new Dd.Synchronization(this,a,d,k,Object.assign({method:"replicateFrom"},b))).start()};zg.prototype.sync=function(a,d,k,b){return(new Dd.Synchronization(this,a,d,k,Object.assign({method:"sync"},b))).start()};zg.prototype.getConflicts=function(a,d){function k(w,y){var A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){return 1==
C.nextAddress?C.yield(w.getConflicts({include_docs:!0}),2):3!=C.nextAddress?(A=C.yieldResult,C.yield(Promise.all(A.map(function(E){var L,I,V,T,Y,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress){L=E;I=L.id;V=L.rev;T=L.conflicts;Y=L.doc;if(d&&d[y]&&!d[y][I])return Ba.return(null);if(!a)return Ba.jumpTo(2);na=T.map(function(F){return{id:I,rev:F}});return Ba.yield(w.getDocuments(na),3)}2!=Ba.nextAddress&&(T=Ba.yieldResult);a?Dd.obj.dissoc(Y,["_conflicts"]):Y=null;
return Ba.return({id:I,rev:V,conflicts:T,kind:y,doc:Y})})})),3)):C.return(C.yieldResult.filter(Boolean))})}var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(e=b.__commitDB){w.jumpTo(2);break}return w.yield(b._commitDB(),3);case 3:e=w.yieldResult;case 2:l=e;if(p=b.__versionDB){w.jumpTo(4);break}return w.yield(b._versionDB(),5);case 5:p=w.yieldResult;case 4:return q=p,w.yield(k(q,"versions"),6);case 6:return u=w.yieldResult,w.yield(k(l,
"commits"),8);case 8:return w.yield(w.yieldResult,7);case 7:return w.return({versionConflicts:u,commitConflicts:w.yieldResult})}})};zg.prototype.resolveConflict=function(a){var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:k=a;b=k.resolved;e=k.delete;l=k.kind;p=k.id;if("versions"===l){if(w=d.__versionDB){y.jumpTo(7);break}return y.yield(d._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(u=d.__commitDB){y.jumpTo(5);
break}return y.yield(d._commitDB(),6);case 6:u=y.yieldResult;case 5:q=u;y.jumpTo(3);break;case 8:w=y.yieldResult;case 7:q=w;case 3:return y.yield(q.set(p,b),9);case 9:return y.yield(Promise.all(e.map(function(A){return q.pouchdb.remove(p,A)})),0)}})};zg.prototype.getDiff=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha,zb,Ub,Nb,Sb,pc,Eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lc){switch(Lc.nextAddress){case 1:b=a;"string"===typeof a&&
(b=Dd.Database.ensureDB(a+"-commits"),d=Dd.Database.ensureDB(a+"-version-graph"));if(e=k.__commitDB){Lc.jumpTo(2);break}return Lc.yield(k._commitDB(),3);case 3:e=Lc.yieldResult;case 2:l=e;if(p=k.__versionDB){Lc.jumpTo(4);break}return Lc.yield(k._versionDB(),5);case 5:p=Lc.yieldResult;case 4:return q=p,Lc.yield(l.diffWith(b),6);case 6:return u=Lc.yieldResult,Lc.yield(q.diffWith(d),7);case 7:return w=Lc.yieldResult,Lc.yield(Promise.all(w.inLeft.map(function(dd){var ia;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){return 1==
Ca.nextAddress?(ia=dd.id,Ca.yield(q.get(dd.id),2)):Ca.return({id:ia,doc:Ca.yieldResult})})})),8);case 8:return y=Lc.yieldResult,A=Dd.arr,C=A.groupBy,Lc.yield(d.getAll(),9);case 9:return E=C.call(A,Lc.yieldResult,function(dd){return dd._id}),Lc.yield(Promise.all(w.inRight.map(function(dd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){return ia.return({id:dd.id,doc:E[dd.id]})})})),10);case 10:return L=Lc.yieldResult,Lc.yield(Promise.all(w.changed.map(function(dd){var ia,Ca,Ea,jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Mb){return 1==
Mb.nextAddress?(ia=Object,Ca=ia.assign,Ea=dd.left,Mb.yield(q.get(dd.left.id),2)):3!=Mb.nextAddress?(jb=Mb.yieldResult,Mb.yield(d.get(dd.right.id),3)):Mb.return(Ca.call(ia,{},Ea,{docA:jb,docB:Mb.yieldResult}))})})),11);case 11:return I=Lc.yieldResult,V=Dd.arr,T=V.groupBy,Lc.yield(b.getAll(),12);case 12:Y=T.call(V,Lc.yieldResult,function(dd){return dd._id}),na=[],Ba=[],F=[],W=$jscomp.makeIterator(u.inLeft),P=W.next();case 13:if(P.done){Lc.jumpTo(15);break}S=P.value;fa=na;aa=fa.push;return Lc.yield(l.get(S.id),
16);case 16:aa.call(fa,Lc.yieldResult);P=W.next();Lc.jumpTo(13);break;case 15:oa=$jscomp.makeIterator(u.inRight),P=oa.next();case 17:if(P.done){Lc.jumpTo(19);break}Va=P.value;lb=Ba;qa=lb.push;return Lc.yield(Y[Va.id],20);case 20:qa.call(lb,Lc.yieldResult);P=oa.next();Lc.jumpTo(17);break;case 19:ja=$jscomp.makeIterator(u.changed),P=ja.next();case 21:if(P.done){Lc.jumpTo(23);break}ta=P.value;Ha=F;zb=Ha.push;return Lc.yield(l.get(ta.left.id),24);case 24:return zb.call(Ha,Lc.yieldResult),Ub=F,Nb=Ub.push,
Lc.yield(b.get(ta.right.id),25);case 25:Nb.call(Ub,Lc.yieldResult);P=ja.next();Lc.jumpTo(21);break;case 23:return Sb=na.map(function(dd){return Dd.obj.select(dd,["_id","name","type"])}),pc=Ba.map(function(dd){return Dd.obj.select(dd,["_id","name","type"])}),Eb=F.map(function(dd){return Dd.obj.select(dd,["_id","name","type"])}),Lc.return({changed:I,remote:L,local:y,changedCommitTypeAndNames:Eb,remoteCommitTypeAndNames:pc,localCommitTypeAndNames:Sb})}})};zg.prototype.delete=function(a,d,k){k=void 0===
k?!0:k;var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:e=[];l=[];if(p=b.__commitDB){W.jumpTo(2);break}return W.yield(b._commitDB(),3);case 3:p=W.yieldResult;case 2:return q=p,u={include_docs:!0,startkey:a+"\x00"+d+"\x00",endkey:a+"\x00"+d+"\uffff"},W.yield(q.query("nameAndTimestamp_index",u),4);case 4:w=W.yieldResult;y=w.rows;A=$jscomp.makeIterator(y);for(C=A.next();!C.done;C=A.next())L=E=C.value,I=L.doc,
I.deleted||I._deleted||!I.content||e.push(b.snapshotResourceFor(I)),l.push(Object.assign({},I,{_deleted:!0}));if(V=b.__versionDB){W.jumpTo(5);break}return W.yield(b._versionDB(),6);case 6:V=W.yieldResult;case 5:return T=V,W.yield(T.get(a+"/"+d),7);case 7:Y=W.yieldResult;na=Y._id;Ba=Y._rev;F={_id:na,_rev:Ba,_deleted:!0};if(k){W.jumpTo(8);break}return W.yield(q.setDocuments(l),9);case 9:return W.yield(T.setDocuments([F]),10);case 10:Promise.all(e.map(function(P){return P.remove()}));case 8:return W.return({commits:l,
history:F,resources:e})}})};zg.prototype.deleteCommit=function(a,d,k){d=void 0===d?!0:d;k=void 0===k?"HEAD":k;var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:if(a&&"string"!==typeof a){e=a;na.jumpTo(2);break}if(!a){na.jumpTo(2);break}if(l=b.__commitDB){na.jumpTo(4);break}return na.yield(b._commitDB(),5);case 5:l=na.yieldResult;case 4:return p=l,na.yield(p.get(a),6);case 6:e=na.yieldResult;case 2:if(!e)throw Error("commit needed!");
if(q=b.__versionDB){na.jumpTo(7);break}return na.yield(b._versionDB(),8);case 8:q=na.yieldResult;case 7:u=q;if(w=b.__commitDB){na.jumpTo(9);break}return na.yield(b._commitDB(),10);case 10:w=na.yieldResult;case 9:return y=w,A=e,C=A.name,E=A.type,L=e.deleted||e._deleted||!e.content?[]:[b.snapshotResourceFor(e)],I=[Object.assign({},e,{_deleted:!0})],na.yield(u.get(E+"/"+C),11);case 11:V=na.yieldResult;if(!V)throw Error("No history for "+E+"/"+C+"@"+e._id);if(!V.refs[k])throw Error("Cannot delete commit "+
E+"/"+C+"@"+e._id+" b/c it is not where ref "+k+" is pointing!");T=$jscomp.makeIterator(V.history[e._id]||[]);Y=T.next().value;if(!Y&&1>=Object.keys(V.history).length)V._deleted=!0;else if(Y)delete V.history[e._id],V.refs[k]=Y;else throw Error("Cannot delete commit "+E+"/"+C+"@"+e._id+" b/c it has no ancestor but there are still other commits!");if(d){na.jumpTo(12);break}return na.yield(u.set(E+"/"+C,V),13);case 13:return na.yield(y.setDocuments(I),14);case 14:return na.yield(Promise.all(L.map(function(Ba){return Ba.remove()})),
12);case 12:return na.return({commits:I,history:V,resources:L})}})};$jscomp.global.Object.defineProperties(zg.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Dd.ObjectDB=zg;var Kq=function(a,
d,k,b,e){e=void 0===e?{}:e;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},e);this.state="not started";this.method="";this.fromObjectDB=a;this.remoteCommitDB=d;this.remoteVersionDB=k;this.remoteLocation=b;this.deferred=Dd.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Kq.prototype.whenPaused=function(){var a=this;return Promise.resolve().then(function(){return Dd.promise.waitFor(function(){return a.isPaused||a.isComplete})}).then(function(){return a})};
Kq.prototype.waitForIt=function(){return this.deferred.promise};Kq.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(a){return console.error("Error starting synchronization: ",a)});return this};Kq.prototype._startReplicationAndCopy=function(){function a(Nb){return"paused"===Ub&&"paused"===zb&&0>=Ha.copyCalls&&0>=Ha.copyCallsWaiting?Nb.state="paused":"complete"===Ub&&"complete"===zb&&Ha.isComplete()?Nb.state="complete":Nb.state="running"}function d(Nb,Sb){if(Sb.length||
"complete"===zb&&"complete"===Ub&&Ha.isComplete()){S.cancel();if(Sb.length){Nb.state="complete";Nb.errors=Sb;ja.cancel();ta.cancel();var pc=Error("Synchronization error:\n  "+Sb.join("\n  "));pc.errors=Sb;console.log(Nb+" errored")}else console.log(Nb+" completed");pc?Nb.deferred.reject(pc):Nb.deferred.resolve(Nb)}}function k(Nb){if(!Nb.content)return null;var Sb=Nb.content.slice(0,2);Nb=Nb.content.slice(2);return Sb+"/"+Nb+".json"}var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,
lb,qa,ja,ta,Ha,zb,Ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nb){switch(Nb.nextAddress){case 1:e=b;l=e.fromObjectDB;p=e.remoteCommitDB;q=e.remoteVersionDB;u=e.remoteLocation;w=e.options;y=w.debug;A=void 0===w.live?!1:w.live;C=void 0===w.retry?!1:w.retry;E=w.method;L=w.replicationFilter;I=void 0===w.pushDesignDocToRemote?!1:w.pushDesignDocToRemote;if(V=l.__versionDB){Nb.jumpTo(2);break}return Nb.yield(l._versionDB(),3);case 3:V=Nb.yieldResult;case 2:T=V;if(Y=l.__commitDB){Nb.jumpTo(4);
break}return Nb.yield(l._commitDB(),5);case 5:Y=Nb.yieldResult;case 4:na=Y;Ba=l;F=Ba._commitdb_indexes;W=Ba._versiondb_indexes;P=Ba.snapshotLocation;b.method=E;aa=F.find(function(Sb){return"nameTypeFilter"===Sb.name});oa=W.find(function(Sb){return"nameTypeFilter"===Sb.name});if(!I){Nb.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Nb.yield(p.addDesignDoc(aa),7);case 7:return console.log("adding versionNameTypeFilter"),Nb.yield(q.addDesignDoc(oa),6);case 6:return Va={live:A,retry:C},
lb=Object.assign({},Va),qa=Object.assign({},Va),L&&(lb.filter=eval("("+aa.filterFn+")"),lb.query_params=L,qa.filter=eval("("+oa.filterFn+")"),qa.query_params=L),ja=na[E](p,lb),ta=T[E](q,qa),Ha={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},Ub=zb="not started",b.versionReplication=ta,b.commitReplication=ja,b.snapshotReplication=Ha,fa=p.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
S=q.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),fa.on("change",function(Sb){var pc=Sb.id,Eb=Sb.changes;Sb=Sb.doc._conflicts;y&&console.log("commit changes "+pc+":",Eb,Sb);Sb&&(console.log("commit conflict "+pc+":",Eb,Sb),b.conflicts.push({db:"commits",id:pc,changes:Eb,conflicts:Sb}))}),S.on("change",function(Sb){var pc=Sb.id,Eb=Sb.changes;Sb=Sb.doc._conflicts;y&&console.log("version changes "+pc+":",Eb,Sb);Sb&&(console.log("version conflict "+pc+":",Eb,Sb),b.conflicts.push({db:"versions",
id:pc,changes:Eb,conflicts:Sb}))}),ja.on("change",function(Sb){var pc,Eb,Lc,dd,ia,Ca,Ea,jb,Mb,Tc,Rc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:"replicateTo"===E?Sb={direction:"push",change:Sb}:"replicateFrom"===E&&(Sb={direction:"pull",change:Sb});pc=Sb;Eb=pc.direction;Lc=pc.change;dd=Lc.docs;console.log(b+" "+("push"===Eb?"send":"received")+" "+dd.length+" commits");qc.setCatchFinallyBlocks(2,3);Ca=[];Ea=$jscomp.makeIterator(dd);for(jb=Ea.next();!jb.done;jb=
Ea.next())Mb=jb.value,Mb._id.startsWith("_")||(b.changes.push({direction:Eb,kind:"commits",id:Mb._id,type:Mb.type,name:Mb.name}),(Tc=k(Mb))&&Ca.push(Tc));Ha.nFilesToCopy+=Ca.length;if(!(0<Ha.copyCalls)){qc.jumpTo(5);break}Ha.copyCallsWaiting++;return qc.yield(Dd.promise.waitFor(function(){return 0>=Ha.copyCalls}),6);case 6:Ha.copyCallsWaiting--;case 5:return Ha.copyCalls++,a(b),console.log(b+" copying "+Ca.length+" snapshots..."),qc.yield(Dd.promise.parallel(Ca.map(function(de){return function(){var Vd=
("push"===Eb?P:u).join(de),Dg=("push"===Eb?u:P).join(de);return Ha.stopped?(console.warn(b+" Stopping copying resources b/c synchronization ended ("+Ha.copyCalls+", "+Vd.url+" => "+Dg.url+")"),Promise.resolve()):Dg.exists().then(function(eg){function Mh(Ch){Ch=void 0===Ch?0:Ch;return Vd.copyTo(Dg).catch(function(oi){if(5<=Ch)throw oi;return Mh(Ch+1)})}return eg?(y&&console.log("Skip copying to "+Dg.url+", already exist"),Promise.resolve()):Vd.exists().then(function(Ch){if(!Ch)return console.warn("Skip copying "+
Vd.url+", does not exist"),Promise.resolve();y&&console.log(b+" Copying "+Vd.url+" => "+Dg.url);return Mh(0).then(function(oi){Ha.nFilesCopied++;Ha.stopped||0!==Ha.nFilesCopied%10||console.log(b+" copied "+Ha.nFilesCopied+" of "+Ha.nFilesToCopy+" snapshots");return oi})})})}}),5),7);case 7:console.log(b+" sending files done");case 3:qc.enterFinallyBlock();Ha.copyCalls--;a(b);d(b,ia?[ia]:[]);qc.leaveFinallyBlock(0);break;case 2:throw Rc=qc.enterCatchBlock(),console.error("error in commitReplication onChange",
Rc),ia=Rc,Rc;}})}).on("paused",function(){zb="paused";a(b);y&&console.log(b+" commit replication paused")}).on("active",function(){zb="active";a(b);y&&console.log(b+" commit replication active")}).on("error",function(Sb){zb="complete";a(b);console.error(b+" commit replication error",Sb);d(b,[Sb])}).on("complete",function(Sb){zb="complete";a(b);Sb="sync"===E?Sb.push.errors.concat(Sb.pull.errors):Sb.errors;d(b,Sb)}),ta.on("change",function(Sb){"replicateTo"===E?Sb={direction:"push",change:Sb}:"replicateFrom"===
E&&(Sb={direction:"pull",change:Sb});var pc=Sb.direction;Sb=Sb.change.docs;y&&console.log(b+" "+("push"===pc?"send":"received")+" "+Sb.length+" histories");Sb.forEach(function(Eb){Eb._id.startsWith("_")||b.changes.push({direction:pc,kind:"versions",id:Eb._id})})}).on("paused",function(){Ub="paused";a(b);y&&console.log(b+" version replication paused")}).on("active",function(Sb){Ub="active";a(b);y&&console.log(b+" version replication active",Sb)}).on("error",function(Sb){Ub="complete";a(b);console.error(b+
" version replication error",Sb);d(b,[Sb])}).on("complete",function(Sb){Ub="complete";a(b);Sb="sync"===E?Sb.push.errors.concat(Sb.pull.errors):Sb.errors;d(b,Sb)}),b.state="running",Nb.return(b)}})};Kq.prototype.safeStop=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==a.state&&a.isSynchonizing?d.yield(a.whenPaused(),2):d.return(a):d.return(a.stop())})};Kq.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Kq.prototype.toString=function(){var a=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===a?"<=>":"replicateTo"===a?"=>":"replicateFrom"===a?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Kq.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var a={push:{},pull:{}};this.changes.forEach(function(d){var k=d.direction,b=d.id,e=d.kind;if("_"!==b[0]){if("versions"===e)var l=a[k][b]||(a[k][b]=[]);else"commits"===e&&(b=d.type+"/"+d.name,l=a[k][b]||(a[k][b]=[]));
l.push(d)}});return a}}});Dd.Synchronization=Kq;var Qu={describe:function(a){function d(q,u){q=q.find(function(C){return C.name===u}).node.value.body;var w=q.body||[],y=(q.comments||[]).find(function(C){return C.end<w[0].start});q={name:u,parameters:[],sideEffect:!1,returns:null,description:""};if(y&&y.text.trim()){y=Dd.string.changeIndent(y.text," ",0).split("\n");y=$jscomp.makeIterator(y);for(var A=y.next();!A.done;A=y.next()){A=A.value;if(A.startsWith("ignore-in-doc")){q.description="";break}A.startsWith("side effect:")?
q.sideEffect=JSON.parse(A.split(":")[1]):A.startsWith("returns:")?q.returns=A.split(":")[1].trim():q.description+=A+"\n"}}y=$jscomp.makeIterator(w);for(A=y.next();!A.done;A=y.next())if(A=A.value,"checkArgs"===Dd.Path("declarations.0.init.callee.name").get(A)&&(A=Dd.Path("declarations.0.id.properties").get(A)))q.parameters=A.map(function(C){return C.key.name});return q}var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:q.setCatchFinallyBlocks(2);
if(k._methodSpecs){q.jumpTo(4);break}return q.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:b=q.yieldResult,e=Dd.parse(b,{withComments:!0}),l=Dd.categorizer.findDecls(e),k._methodSpecs=l.filter(function(u){return u.parent&&"ObjectDBInterface"===u.parent.name});case 4:return q.return(a?d(k._methodSpecs,a):k._methodSpecs.map(function(u){return d(k._methodSpecs,u.name)}).filter(Boolean));case 2:return p=q.enterCatchBlock(),q.return("Error in describe "+p)}})},ensureDB:function(a){var d,
k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=Dd.checkArgs(a,{db:"string",snapshotLocation:"string|Resource"}),k=d.db,b=d.snapshotLocation,l.yield(Dd.ObjectDB.find(k),2);if(e=l.yieldResult)return l.return(!1);Dd.ObjectDB.named(k,{snapshotLocation:b});return l.return(!0)})},destroyDB:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=Dd.checkArgs(a,{db:"string"}),k=d.db,e.yield(Dd.ObjectDB.find(k),
2)):3!=e.nextAddress?(b=e.yieldResult)?e.yield(b.destroy(),3):e.return(!1):e.return(!0)})},fetchCommits:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,Va,lb,qa,ja,ta,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zb){switch(zb.nextAddress){case 1:return d=Dd.checkArgs(a,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
k=d.db,b=d.ref,e=d.type,l=d.typesAndNames,p=d.knownCommitIds,q=d.includeDeleted,u=d.filterFn,zb.yield(Dd.ObjectDB.find(k),2);case 2:w=zb.yieldResult;b||(b="HEAD");if(!w)throw Error("db "+k+" does not exist");if(w.__commitDB){zb.jumpTo(3);break}return zb.yield(w._commitDB(),4);case 4:case 3:if(y=w.__versionDB){zb.jumpTo(5);break}return zb.yield(w._versionDB(),6);case 6:y=zb.yieldResult;case 5:A=y;C={};E={};if(l)for(L=C.keys=[],I=$jscomp.makeIterator(l),V=I.next();!V.done;V=I.next())Y=T=V.value,na=
Y.type,Ba=Y.name,F=Y.ref,L.push(na+"/"+Ba),F&&(E[na+"/"+Ba]=F);else e&&(C.startkey=e+'/\x00"',C.endkey=e+'/\uffff"');return zb.yield(A.getAll(C),7);case 7:W=zb.yieldResult;P=[];S=$jscomp.makeIterator(W);for(fa=S.next();!fa.done;fa=S.next())!(aa=fa.value)||aa.deleted||aa._deleted||(oa=aa,Va=oa._id,lb=oa.refs,Va.startsWith("_")||(qa=lb[E[Va]||b]||b,!qa||p&&p.hasOwnProperty(qa)||P.push(qa)));return zb.yield(w.getCommitsWithIds(P),8);case 8:ja=zb.yieldResult;q||(ja=ja.filter(function(Ub){return Ub&&!Ub.deleted}));
if(u)try{ta=eval("("+u+")");if("function"!==typeof ta)throw Error(u+" does not eval to a function!");Ha=ja.filter(ta);if(Array.isArray(Ha))ja=Ha;else throw Error(u+" does not return an array!");}catch(Ub){console.error("fetchCommits filterFn failed:",Ub)}return zb.return(ja)}})},fetchVersionGraph:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string"}),k=d.db,b=d.type,e=d.name,
w.yield(Dd.ObjectDB.find(k),2);if(3!=w.nextAddress){l=w.yieldResult;if(!l)throw Error("db "+k+" does not exist");return w.yield(l.versionGraph(b,e),3)}p=w.yieldResult;q=p.refs;u=p.history;return w.return({refs:q,history:u})})},exists:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,w.yield(Dd.ObjectDB.find(k),2);
if(3!=w.nextAddress)return p=w.yieldResult,w.yield(p.versionGraph(b,e),3);q=w.yieldResult;if(!q)return w.return({exists:!1,commitId:void 0});l=l||"HEAD";return(u=q.refs[l])?w.return({exists:!0,commitId:u}):w.return({exists:!1,commitId:void 0})})},fetchLog:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return d=Dd.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(S){return S.type&&S.name||S.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,q=d.limit,u=d.includeCommits,w=d.knownCommitIds,P.yield(Dd.ObjectDB.find(k),2);case 2:y=P.yieldResult;A=l||"HEAD";if(!y)throw Error("db "+k+" does not exist");q||(q=Infinity);p||l||(l=A);if(!p){P.jumpTo(3);break}C=p;if(b&&e){P.jumpTo(3);
break}return P.yield(y.getCommit(p),5);case 5:E=P.yieldResult;if(!E)throw Error("fetchLog: specified commit "+p+" but no commit with this id is in the database!");L=E;b=L.type;e=L.name;case 3:return P.yield(y.versionGraph(b,e),6);case 6:I=P.yieldResult;if(!I)throw Error("Unknown object "+b+"/"+e);V=I;T=V.refs;Y=V.history;C||(C=T[l]);na=C;for(Ba=[];Ba.length<q&&!Ba.includes(na);){Ba.push(na);F=Y[na];if(!F||!F.length)break;W=$jscomp.makeIterator(F);na=W.next().value}if(!u){P.jumpTo(7);break}w&&(Ba=
Ba.filter(function(S){return!w.hasOwnProperty(S)}));return P.yield(y.getCommitsWithIds(Ba),8);case 8:Ba=P.yieldResult;case 7:return P.return(Ba)}})},fetchSnapshot:function(a){var d,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return d=Dd.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(A){return A.type&&A.name||A.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,y.yield(Dd.ObjectDB.find(k),2);case 2:q=y.yieldResult;l=l||"HEAD";if(!q)throw Error("db "+k+" does not exist");if(p){y.jumpTo(3);break}return y.yield(q.versionGraph(b,e),4);case 4:u=y.yieldResult;if(!u)throw Error("Unknown object "+b+"/"+e);p=u.refs[l];if(!p)throw Error("Cannot find commit for ref "+l+" of "+b+"/"+e);case 3:return y.yield(q.getCommit(p),5);case 5:w=y.yieldResult;if(!w)throw Error("Cannot find commit "+p);return y.return(q.loadSnapshot(void 0,
void 0,w))}})},revert:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.toCommitId,u.yield(Dd.ObjectDB.find(k),2);q=u.yieldResult;l||(l="HEAD");return u.return(q.revert(b,e,l,p))})},commit:function(a){var d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.expectedParentCommit,q=d.commitSpec,u=d.snapshot,w=d.preview,A.yield(Dd.ObjectDB.find(k),2);y=A.yieldResult;l||(l="HEAD");return A.return(y.commit(b,e,u,q,w,l,p))})},exportToSpecs:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d=Dd.checkArgs(a,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),k=d.db,b=d.nameAndTypes,l.yield(Dd.ObjectDB.find(k),2);e=l.yieldResult;if(!e)throw Error("db "+k+" does not exist");return l.return(e.exportToSpecs(b))})},exportToDir:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Dd.checkArgs(a,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),k=d.db,b=d.url,e=d.nameAndTypes,l=d.copyResources,p=d.includeDeleted,w.yield(Dd.ObjectDB.find(k),2);q=w.yieldResult;if(!q)throw Error("db "+k+" does not exist");try{u=Dd.resource(b)}catch(y){u=Dd.resource(System.baseURL).join(b)}return w.return(q.exportToDir(u,e,l,p))})},importFromDir:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Dd.checkArgs(a,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),k=d.db,b=d.url,e=d.overwrite,l=d.copyResources,u.yield(Dd.ObjectDB.find(k),2);p=u.yieldResult;if(!p)throw Error("db "+k+" does not exist");try{q=Dd.resource(b)}catch(w){q=Dd.resource(System.baseURL).join(b)}return u.return(p.importFromDir(q,e,l))})},importFromSpecs:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=Dd.checkArgs(a,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
k=d.db,b=d.specs,e=d.overwrite,l=d.copyResources,q.yield(Dd.ObjectDB.find(k),2);p=q.yieldResult;if(!p)throw Error("db "+k+" does not exist");return q.return(p.importFromSpecs(b,e,l))})},importFromResource:function(a){var d,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.url,p=d.commitSpec,
q=d.purgeHistory,y.yield(Dd.ObjectDB.find(k),2);u=y.yieldResult;if(!u)throw Error("db "+k+" does not exist");try{w=Dd.resource(l)}catch(A){w=Dd.resource(System.baseURL).join(l)}return y.return(u.importFromResource(b,e,w,p,q))})},delete:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=Dd.checkArgs(a,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.dryRun,q.yield(Dd.ObjectDB.find(k),
2);p=q.yieldResult;return q.return(p.delete(b,e,"undefined"===typeof l||l))})},deleteCommit:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return d=Dd.checkArgs(a,{db:"string",commit:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.commit,e=d.dryRun,p.yield(Dd.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.deleteCommit(b,"undefined"===typeof e||e))})},fetchConflicts:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return d=Dd.checkArgs(a,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),k=d.db,b=d.includeDocs,e=d.only,p.yield(Dd.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.getConflicts(b,e))})},resolveConflict:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Dd.checkArgs(a,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),k=d.db,b=d.resolved,e=d.delete,l=d.kind,p=d.id,
u.yield(Dd.ObjectDB.find(k),2);q=u.yieldResult;return u.return(q.resolveConflict({resolved:b,delete:e,kind:l,id:p}))})},fetchDiff:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=Dd.checkArgs(a,{db:"string",otherDB:"string"}),k=d.db,b=d.otherDB,l.yield(Dd.ObjectDB.find(k),2);e=l.yieldResult;return l.return(e.getDiff(b))})},synchronize:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return d=
Dd.checkArgs(a,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),k=d.db,b=d.otherDB,e=d.otherDBSnapshotLocation,l=d.onlyTypesAndNames,p=d.method,L.yield(Dd.ObjectDB.find(k),2);case 2:return e||(e=b.replace(/\/$/,"")+"/snapshots"),p||(p="replicateTo"),L.yield(Dd.ObjectDB.find(k),3);case 3:return q=L.yieldResult,L.yield(Dd.ObjectDB.named(b,{snapshotLocation:e}),4);case 4:return u=L.yieldResult,L.yield(u._commitDB(),
5);case 5:return w=L.yieldResult,L.yield(u._versionDB(),6);case 6:return y=L.yieldResult,A=u.snapshotLocation,C={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},E=q[p](w,y,A,C),L.yield(E.whenPaused(),7);case 7:return L.yield(E.safeStop(),8);case 8:return L.yield(E.waitForIt(),9);case 9:return L.return(Dd.obj.select(E,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Dd.ObjectDBInterface=Qu;Dd.ObjectDBInterface=Qu;Dd.ObjectDBInterface=Qu;var ri=function(a){this.serverURL=
a=void 0===a?document.location.origin+"/objectdb/":a};ri.prototype._processResponse=function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=a.headers.get("content-type"),e.yield(a.text(),2);k=e.yieldResult;if("application/json"===d)try{b=JSON.parse(k)}catch(l){}if(!a.ok||b&&b.error)throw Error(b&&b.error||k||a.statusText);return e.return(b||k)})};ri.prototype._GET=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==
q.nextAddress?(b=Object.keys(d).map(function(u){var w=d[u];"object"===typeof w&&(w=JSON.stringify(w));return u+"="+encodeURIComponent(w)}).join("&"),e=k.serverURL+a+"?"+b,l=k,p=l._processResponse,q.yield(fetch(e),2)):q.return(p.call(l,q.yieldResult))})};ri.prototype._POST=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(b=k.serverURL+a,e=k,l=e._processResponse,p.yield(fetch(b,{method:"POST",body:JSON.stringify(d),
headers:{"content-type":"application/json"}}),2)):p.return(l.call(e,p.yieldResult))})};ri.prototype.describe=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("describe",a))})};ri.prototype.ensureDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("ensureDB",a))})};ri.prototype.destroyDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("destroyDB",
a))})};ri.prototype.fetchCommits=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchCommits",a))})};ri.prototype.fetchVersionGraph=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchVersionGraph",a))})};ri.prototype.exists=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exists",a))})};ri.prototype.fetchLog=function(a){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchLog",a))})};ri.prototype.fetchSnapshot=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchSnapshot",a))})};ri.prototype.revert=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("revert",a))})};ri.prototype.commit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("commit",
a))})};ri.prototype.exportToSpecs=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exportToSpecs",a))})};ri.prototype.exportToDir=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("exportToDir",a))})};ri.prototype.importFromDir=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromDir",a))})};ri.prototype.importFromSpecs=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromSpecs",a))})};ri.prototype.importFromResource=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromResource",a))})};ri.prototype.delete=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("delete",a))})};ri.prototype.deleteCommit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("deleteCommit",
a))})};ri.prototype.fetchConflicts=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchConflicts",a))})};ri.prototype.resolveConflict=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("resolveConflict",a))})};ri.prototype.fetchDiff=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchDiff",a))})};ri.prototype.synchronize=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("synchronize",a))})};Dd.ObjectDBHTTPInterface=ri;Dd.default=zg;var si=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");si.applyExclude=function(a,d){return d?"string"===typeof d?!a.url.includes(d):"function"===typeof d?!d(a):d instanceof RegExp?!d.test(a.url):!0:!0};si.Resource=zf;si.Database=ag;si.debug=!1;si.slashRe=/\//g;var jR=function(){return si.Database.apply(this,
arguments)||this};$jscomp.inherits(jR,si.Database);jR.ensureDB=function(a,d){return si.Database.ensureDB.call(this,"lively.storage-"+a,d)};si.StorageDatabase=jR;var Km=function(){return si.Resource.apply(this,arguments)||this};$jscomp.inherits(Km,si.Resource);Km.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return si.debug&&console.log("["+a+"] read"),b.yield(a.db.get(a.pathWithoutQuery()),2);k=(d=b.yieldResult)&&d.content;
return b.return(k?"string"===typeof k?k:JSON.stringify(k):"")})};Km.prototype.readJson=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(a.read(),2);d=k.yieldResult;return k.return("string"===typeof d?JSON.parse(d):d)})};Km.prototype.write=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){si.debug&&console.log("["+d+"] write");a||(a="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+
d.url+")");return k.yield(d.db.update(d.pathWithoutQuery(),function(b){if(b&&b.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var e=Date.now();return b?Object.assign({},b,{lastModified:e,size:a.length,content:a}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:e,created:e,size:"string"===typeof a?a.length:0,content:a}}),2)}return k.return(d)})};Km.prototype.writeJson=function(a){return this.write(a)};Km.prototype.mkdir=
function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){si.debug&&console.log("["+a+"] mkdir");if(!a.isDirectory())throw Error("Cannot mkdir a file! ("+a.url+")");return b.yield(a.db.get(a.pathWithoutQuery()),2)}if(3!=b.nextAddress){if(d=b.yieldResult){if(!d.isDirectory)throw Error(a.url+" already exists and is a file (cannot mkdir it!)");return b.return(a)}k=Date.now();return b.yield(a.db.set(a.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:k,created:k,isDirectory:!0}),3)}return b.return(a)})};Km.prototype.exists=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return si.debug&&console.log("["+a+"] exists"),(d=a.isRoot())?k.jumpTo(2):k.yield(a.db.get(a.pathWithoutQuery()),3);2!=k.nextAddress&&(d=!!k.yieldResult);return k.return(d)})};Km.prototype.remove=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(si.debug&&console.log("["+a+"] remove"),d=a.pathWithoutQuery(),k=a.db,e.yield(k.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=e.nextAddress?(b=e.yieldResult,e.yield(k.setDocuments(b.map(function(l){return{_id:l.id,_rev:l.rev,_deleted:!0}})),3)):e.return(a)})};Km.prototype.readProperties=function(){si.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Km.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===d?{}:d;var k=this,b,e,l,p,q,
u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){if(1==Y.nextAddress){si.debug&&console.log("["+k+"] dirList");if(!k.isDirectory())return Y.return(k.asDirectory().dirList(a,d));b=d;e=b.exclude;l=k.pathWithoutQuery();p=[];return Y.yield(k.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}q=Y.yieldResult;"infinity"===a&&(a=Infinity);u={};for(w=0;w<q.length;u={$jscomp$loop$prop$dirToChild$2696:u.$jscomp$loop$prop$dirToChild$2696},w++)if(A=y=q[w],C=A._id,C.startsWith(l)&&
l!==C)if(E=C.slice(l.length),L=E.includes("/")?E.match(si.slashRe).length+1:1,L>a)u.$jscomp$loop$prop$dirToChild$2696=k.join(E.split("/").slice(0,a).join("/")+"/"),p.some(function(na){return function(Ba){return Ba.equals(na.$jscomp$loop$prop$dirToChild$2696)}}(u))||p.push(u.$jscomp$loop$prop$dirToChild$2696);else if(I=k.join(E),!e||si.applyExclude(I,e))for(p.push(I),V="created lastModified mode group user contentType type etag size".split(" "),T=0;T<V.length;T++)I[V[T]]=y[V[T]];return Y.return(p)})};
$jscomp.global.Object.defineProperties(Km.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=si.StorageDatabase.ensureDB(this.host()))}}});si.LivelyStorageResource=Km;var kR={name:"lively.storage",matches:function(a){return a.startsWith("lively.storage:")},resourceClass:si.LivelyStorageResource};si.resourceExtension=kR;si.resourceExtension=kR;si.resourceExtension=kR;si.registerExtension=Hd;
si.registerExtension(si.resourceExtension);si.default=Km;var Ao=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Ao.default=ag;Ao.Database=ag;Ao.ObjectDB=zg;Ao.ObjectDBInterface=Qu;Ao.ObjectDBHTTPInterface=ri;Ao.ObjectDB=zg;Ao.ObjectDB=zg;Ao.ObjectDBInterface=Qu;Ao.ObjectDBInterface=Qu;Ao.ObjectDBHTTPInterface=ri;Ao.ObjectDBHTTPInterface=ri;var Xma=Object.freeze({__proto__:null,Database:ag,ObjectDB:zg,ObjectDBInterface:Qu,ObjectDBHTTPInterface:ri}),Of=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
Of.convertToSerializableCommit=JN;Of.ensureCommitInfo=Tz;Of.ObjectDBHTTPInterface=ri;Of.Database=ag;Of.loadMorphFromSnapshot=hp;Of.createMorphSnapshot=hu;Of.resource=Dc;Of.obj=df;Of.Path=Ag;Of.arr=Ke;Of.string=rg;Of.morphicDBs=Of.morphicDBs||(Of.morphicDBs=new Map);Of.getDefaultServerUrl=function(){return Of.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};Of.convertToSerializableCommit=JN;Of.convertToSerializableCommit=JN;Of.ensureCommitInfo=
Tz;Of.ensureCommitInfo=Tz;var lR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){var l=e.snapshotLocation;e=e.serverURL;this.name=b;this.serverURL=e;this.snapshotLocation=
l||b+"/snapshots/";this.httpDB=new Of.ObjectDBHTTPInterface(e);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b._initialized?e.return():e.yield(b.ensureDB(),
2);b._initialized=!0;e.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return Of.resource(System.decanonicalize(this.snapshotLocation)).join(e+"/"+b+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(b,e){b=void 0===b?"world":
b;e=void 0===e?!1:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(l.initializeIfNecessary(),2);p=l;q=p.name;u={};return w.return(l.httpDB.fetchCommits({db:q,type:b,ref:"HEAD",knownCommitIds:u,includeDeleted:e}))})}},{key:"fetchCommit",value:function(b,e,l){var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);if(3!=w.nextAddress)return q=[{type:b,
name:e,ref:l}],w.yield(p.httpDB.fetchCommits({db:p.name,ref:l,type:b,typesAndNames:q,knownCommitIds:{}}),3);u=w.yieldResult;return w.return(Of.convertToSerializableCommit(u[0]))})}},{key:"fetchSnapshot",value:function(b,e,l,p){var q=this,u=arguments,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return w=b,1===u.length&&w.type&&w.name&&(b=w.type,e=w.name,l=w._id),C.yield(q.initializeIfNecessary(),2);y=q;A=y.name;return C.return(q.httpDB.fetchSnapshot({db:A,
type:b,name:e,ref:p,commit:l}))})}},{key:"exists",value:function(b,e,l){var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);q=p;u=q.name;return w.return(p.httpDB.exists({db:u,type:b,name:e,ref:l}))})}},{key:"history",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;q=p.name;return u.return(l.httpDB.fetchVersionGraph({db:q,
type:b,name:e}))})}},{key:"log",value:function(b,e,l,p){l=void 0===l?!1:l;var q=this,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(q.initializeIfNecessary(),2):3!=y.nextAddress?(u=q,w=u.name,y.yield(q.httpDB.fetchLog({db:w,commit:b,limit:e,includeCommits:l,knownCommitIds:p}),3)):y.return(y.yieldResult.map(Of.convertToSerializableCommit))})}},{key:"revert",value:function(b,e,l,p){p=void 0===p?"HEAD":p;var q=this,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return y.yield(q.initializeIfNecessary(),2);u=q;w=u.name;return y.return(q.httpDB.revert({db:w,type:b,name:e,toCommitId:l,ref:p}))})}},{key:"snapshotAndCommit",value:function(b,e,l,p,q,u,w){var y=this,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(Of.createMorphSnapshot(l,p),2);if(3!=E.nextAddress)return A=E.yieldResult,E.yield(y.commit(b,e,A,q,u,w),3);C=E.yieldResult;C=Of.convertToSerializableCommit(C);l.changeMetaData("commit",
Of.obj.dissoc(C,["preview"]),!0,!1);return E.return(C)})}},{key:"commit",value:function(b,e,l,p,q,u){var w=this,y=arguments,A,C,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return A=b,1===y.length&&A.type&&A.name&&(b=A.type,e=A.name,l=A.snapshot||A.content,p=Of.obj.dissoc(A,["snapshot","_rev","_id","ancestors","deleted"]),u=A._id),L.yield(w.initializeIfNecessary(),2);C=w;E=C.name;return L.return(w.httpDB.commit({db:E,type:b,name:e,ref:q,expectedParentCommit:u,
commitSpec:p,snapshot:l}))})}},{key:"load",value:function(b,e,l,p,q){var u=this,w,y,A,C,E,L,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:"object"===typeof b?p=b:w=b;y=p;if(!y)return V.yield(u.fetchCommit(w,e,q),6);if("string"!==typeof y){V.jumpTo(3);break}A=$jscomp;C=A.makeIterator;return V.yield(u.log(y,1,!0),5);case 5:E=C.call(A,V.yieldResult);y=E.next().value;V.jumpTo(3);break;case 6:y=V.yieldResult;case 3:return V.yield(u.fetchSnapshot(void 0,void 0,
y._id),7);case 7:return L=V.yieldResult,V.yield(Of.loadMorphFromSnapshot(L,l),8);case 8:return I=V.yieldResult,y=Of.convertToSerializableCommit(y),I.changeMetaData("commit",Of.obj.dissoc(y,["preview"]),!0,!1),V.return(I)}})}},{key:"fetchDiff",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.initializeIfNecessary(),2);l=e;p=l.name;return q.return(e.httpDB.fetchDiff({db:p,otherDB:b}))})}},{key:"fetchConflicts",value:function(b,
e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;q=p.name;return u.return(l.httpDB.fetchConflicts({db:q,includeDocs:b,only:e}))})}},{key:"resolveConflict",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.initializeIfNecessary(),2);l=e;p=l.name;return q.return(e.httpDB.resolveConflict(Object.assign({db:p},b)))})}},{key:"synchronize",
value:function(b){var e=b.method,l=b.otherDB,p=b.otherDBSnapshotLocation,q=b.onlyTypesAndNames,u=this,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(u.initializeIfNecessary(),2);w=u;y=w.name;return A.return(u.httpDB.synchronize({db:y,method:e,otherDB:l,otherDBSnapshotLocation:p,onlyTypesAndNames:q}))})}},{key:"softDelete",value:function(b,e,l,p,q){var u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){return w.return(u.commit(b,
e,void 0,l,p,q))})}},{key:"delete",value:function(b,e,l){l=void 0===l?!0:l;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);q=p;u=q.name;return w.return(p.httpDB.delete({db:u,type:b,name:e,dryRun:l}))})}},{key:"deleteCommit",value:function(b,e){e=void 0===e?!0:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;
q=p.name;return u.return(l.httpDB.deleteCommit({db:q,commit:b,dryRun:e}))})}},{key:"codeSearchInPackages",value:function(b,e,l,p){e=void 0===e?"part":e;var q=this,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(q.latestCommits(e),2);case 2:u=I.yieldResult,w=[],y=0,"function"===typeof p&&(u=u.filter(p)),A=$jscomp.makeIterator(u),C=A.next();case 3:if(C.done){I.jumpTo(5);break}E=C.value;"function"===typeof l&&l(E.name,y++,u.length);
return I.yield(q._textSearchInSnapshotOfCommit(b,E),6);case 6:L=I.yieldResult;L.length&&w.push.apply(w,$jscomp.arrayFromIterable(L));C=A.next();I.jumpTo(3);break;case 5:return I.return(w)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(b,e,l){var p=this,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return q=e,u=q._id,(w=l)?A.jumpTo(2):A.yield(p.fetchSnapshot(void 0,void 0,u),3);2!=A.nextAddress&&(w=A.yieldResult);y=w;return A.return((new Of.SnapshotPackageHelper(y)).textSearch(b,
e))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:Of.getDefaultServerUrl()})}},{key:"named",value:function(b,e){var l=Of.morphicDBs.get(b);if(l)return l;if(!e.serverURL)throw Error("Needs serverURL!");e=new this(b,e);Of.morphicDBs.set(b,e);return e}},{key:"wellKnownMorphicDBs",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return e=Of.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),q.yield(e.getAll(),2);l=q.yieldResult;p=l.reduce(function(u,w){var y={};return Object.assign(u,(y[w._id]=b.named(w.name,{serverURL:w.serverURL,snapshotLocation:w.snapshotLocation}),y))},{});p.default||(p.default=b.default);return q.return(p)})}},{key:"addWellKnownMorphicDB",value:function(b,e){var l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){l=e;p=l.name;q=l.snapshotLocation;
u=l.serverURL;w=Of.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return y.yield(w.set(b,{name:p,snapshotLocation:q,serverURL:u}),0)})}},{key:"removeWellKnownMorphicDB",value:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=Of.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(e.remove(b),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);lR=Of.MorphicDB;var Gp=za("ae",lR),WI=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.snapshot=b}},{key:"textSearch",value:function(b,e){var l=b&&b instanceof RegExp,p=[];if(!b)return p;for(var q={},u=$jscomp.makeIterator(this.filesInPackages()),w=u.next();!w.done;q={$jscomp$loop$prop$file$2698:q.$jscomp$loop$prop$file$2698},w=u.next()){q.$jscomp$loop$prop$file$2698=w.value;w=q.$jscomp$loop$prop$file$2698.get(this.snapshot);var y=Of.string.lineIndexComputer(w),A=Of.string.lineRanges(w);
if(l)w=Of.string.reMatches(w,b),w.length&&p.push.apply(p,$jscomp.arrayFromIterable(w.map(function(Y){return function(na){return Object.assign(na,{commit:e,file:Y.$jscomp$loop$prop$file$2698})}}(q))));else for(var C=0,E=0;0<=(C=w.indexOf(b));){var L=C+E,I=L+b.length,V=y(L),T=w.slice.apply(w,$jscomp.arrayFromIterable(A[V]));p.push({match:b,start:L,end:I,length:b.length,line:V,lineString:T,commit:e,file:q.$jscomp$loop$prop$file$2698});E+=C+b.length;w=w.slice(C+b.length)}}return p}},{key:"filesInPackages",
value:function(){function b(p,q,u,w,y){y=void 0===y?[]:y;if(p["package.json"]&&"string"===typeof p["package.json"])try{var A=JSON.parse(p["package.json"]);w={url:u,path:q,name:A.name||Of.arr.last(q)}}catch(E){}A=[];for(var C in p)"string"===typeof p[C]?y.push({path:q.concat(C),url:Of.string.joinPath(u,C),package:w,get:function(E){return Of.Path(this.path).get(E.packages)},set:function(E,L){Of.Path(this.path).set(E.packages,L)}}):A.push(C);A.forEach(function(E){return b(p[E],q.concat(E),Of.string.joinPath(u,
E),w,y)});return y}var e=[],l;for(l in this.snapshot.packages)b(this.snapshot.packages[l],[l],l,null,e);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);Of.SnapshotPackageHelper=
WI;Of.SnapshotPackageHelper=WI;Of.SnapshotPackageHelper=WI;Of.default=lR;var Sc=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Sc.ensureAbsoluteComponentRefs=function(a){var d=a.snapshotAndPackages,k=void 0===a.localComponents?Uz(snapshot):a.localComponents,b=void 0===a.localWorldName?Ag("metadata.commit.name").get($world):a.localWorldName;Object.values(d.packages["local://lively-object-modules/"]||{}).forEach(function(e){Object.entries(e).forEach(function(l){var p=$jscomp.makeIterator(l);
l=p.next().value;p=p.next().value;if(!l.endsWith(".json")){var q=Sc.ast.parse(p),u=[];Sc.ast.AllNodesVisitor.run(q,function(w,y){"Literal"===w.type&&"string"===typeof w.value&&(w.value.match(/^styleguide:\/\/\$world\/.+/)&&!k.includes(w.value.replace("styleguide://$world/",""))&&u.push({target:w,replacementFunc:function(){return JSON.stringify(w.value.replace("$world",b))}}),w.value.match(/^part:\/\/\$world\/.+/)&&!k.includes(w.value.replace("part://$world/",""))&&u.push({target:w,replacementFunc:function(){return JSON.stringify(w.value.replace("$world",
b))}}))});e[l]=Sc.ast.transform.replaceNodes(u,p).source}})})};Sc.findLocalComponents=Uz;Sc.prefetchCoreStyleguides=mF;Sc.getProjectName=function(a){return Sc.Path("metadata.commit.name").get(a)||a.name};Sc.reset=nF;Sc.clearSnapshot=KN;Sc.arr=Ke;Sc.properties=gm;Sc.Path=Ag;Sc.promise=Vf;Sc.obj=df;Sc.registerExtension=Hd;Sc.Resource=zf;Sc.resource=Dc;Sc.pt=bh;Sc.MorphicDB=Gp;Sc.ObjectPool=Yh;Sc.allPlugins=wp;Sc.normalizeOptions=Oy;Sc.deserializeMorph=cA;Sc.loadPackagesAndModulesOfSnapshot=dA;Sc.subscribeOnce=
function(a,d,k){jD(k).emitter.once(a,d);return d};Sc.once=Yp;Sc.ast=rH;Sc.findLocalComponents=Uz;Sc.findLocalComponents=Uz;var XI=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleguidePlugin")&&"function"===typeof d.StyleguidePlugin?d.StyleguidePlugin:d.StyleguidePlugin=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"afterSerialization",
value:function(b,e,l){var p={},q="styleguide://"+Sc.getProjectName($world);Sc.findLocalComponents(e).forEach(function(u){return p[q+"/"+u]="styleguide://$world/"+u});Object.values(e).forEach(function(u){if((u=u.props.master)&&u.value)for(var w in p)Object.values(b.expressionSerializer.deserializeExpr(u.value)).includes(w)&&(u.value=u.value.split(w).join(p[w]))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3123,end:4357})}(void 0);Sc.StyleguidePlugin=XI;Sc.StyleguidePlugin=XI;Sc.StyleguidePlugin=XI;Sc.prefetchCoreStyleguides=mF;Sc.prefetchCoreStyleguides=mF;var YI=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("ComponentPolicy")&&
"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.derivedMorph=b;this._overriddenProps=new WeakMap;if(e.isMorph||"string"===typeof e)this.auto=e,e.isMorph&&(this.auto.isComponent=!0),"string"===typeof e&&this.resolveMasterComponents();else{b=e.click;var l=e.auto,
p=e.hover,q=void 0===e.light?{}:e.light;e=void 0===e.dark?{}:e.dark;q&&(this.light=q);e&&(this.dark=e);b&&(this.click=b);l&&(this.auto=l);p&&(this.hover=p);this.resolveMasterComponents()}}},{key:"uses",value:function(b){return[this.auto,this.click,this.hover].includes(b)}},{key:"spec",value:function(){return Sc.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(b){if(!b)return!1;if("string"===typeof b){b=b.replace("styleguide://$world","styleguide://"+Sc.getProjectName($world));
var e=this.getResourceUrlFor(this.auto);e&&(e=e.replace("styleguide://$world","styleguide://"+Sc.getProjectName($world)));return e==b}e=$jscomp.makeIterator(["auto","click","hover"]);for(var l=e.next();!l.done;l=e.next())if(l=l.value,"string"===typeof b[l]){if(this.getResourceUrlFor(this[l])!=b[l])return!1}else if((this[l]||null)!=(b[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var b=this,e=[];this.derivedMorph.withAllSubmorphsDo(function(l){b.managesMorph(l)&&0<Object.keys(b._overriddenProps.get(l)).filter(function(p){return"_rev"!=
p}).length&&e.push([l,Object.keys(b._overriddenProps.get(l))])});return e}},{key:"__dont_serialize__",get:function(){var b=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Sc.obj.isEmpty(this.dark)&&b.push("dark");Sc.obj.isEmpty(this.light)&&b.push("light");return b}},{key:"__serialize__",value:function(){var b=this,e={},l=function(p){return Sc.obj.isString(p)?p:b.getResourceUrlFor(p)};this.auto&&(e.auto=l(this.auto));this.click&&(e.click=l(this.click));this.hover&&(e.hover=
l(this.hover));return{__expr__:"("+JSON.stringify(e)+")"}}},{key:"__after_deserialize__",value:function(b,e){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(e=Sc.promise.deferred(),l=e.promise,p=e.resolve,Sc.once(b,"_appliedMaster",p),q.yield(b._hasUnresolvedMaster,2)):3!=q.nextAddress?b._appliedMaster?q.jumpTo(3):
q.yield(l,3):q.return(!0)})}},{key:"whenReady",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(b){return b?b._resourceHandle?b._resourceHandle.url.replace("$world",Sc.getProjectName($world)):void 0==b.name?null:"styleguide://"+Sc.getProjectName($world)+"/"+b.name:null}},{key:"getWorldUrlFor",value:function(b){b=Sc.resource("string "===typeof b?b:this.getResourceUrlFor(b)).worldName;
return b==Sc.getProjectName($world)?document.location.href:Sc.worldToUrl[b]}},{key:"resolveMasterComponents",value:function(){var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){switch(Ba.nextAddress){case 1:e=Sc.promise.deferred(),b._hasUnresolvedMaster=e.promise,l=b,p=void 0===l.light?{}:l.light,q=void 0===l.dark?{}:l.dark,u=["auto","click","hover"],w=[],Ba.setCatchFinallyBlocks(2),y=$jscomp.makeIterator(u),A=y.next();case 4:if(A.done){Ba.leaveTryBlock(3);
break}C=A.value;if("string"!==typeof b[C]){Ba.jumpTo(7);break}E=b;L=C;return Ba.yield(Sc.resource(b[C]).read(),8);case 8:E[L]=Ba.yieldResult;case 7:if("string"!==typeof p[C]){Ba.jumpTo(9);break}I=p;V=C;return Ba.yield(Sc.resource(p[C]).read(),10);case 10:I[V]=Ba.yieldResult;case 9:if("string"!==typeof q[C]){Ba.jumpTo(11);break}T=q;Y=C;return Ba.yield(Sc.resource(q[C]).read(),12);case 12:T[Y]=Ba.yieldResult;case 11:w.push(b[C],p[C],q[C]);A=y.next();Ba.jumpTo(4);break;case 2:throw na=Ba.enterCatchBlock(),
Error("Encountered invalid master component reference: "+na.message);case 3:Sc.arr.compact(w).forEach(function(F){F.isComponent||(F.isComponent=!0)}),e.resolve(),b._hasUnresolvedMaster=!1,Ba.jumpToEnd()}})}},{key:"applyAnimated",value:function(b){b=void 0===b?{duration:1E3}:b;var e=Sc.promise.deferred(),l=e.promise;e=e.resolve;this.applyIfNeeded(!0,b);Sc.once(this,"_animationConfig",e);return l}},{key:"applyIfNeeded",value:function(b,e){var l=this;b=void 0===b?!1:b;if(e=void 0===e?!1:e)this._animationConfig=
e;var p=this.derivedMorph;if(p.env.world)if(p.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=p.opacity,p.withMetaDo({metaInteraction:!0},function(){e||[p].concat($jscomp.arrayFromIterable(p.ownerChain())).find(function(u){return u.isComponent})||(p.opacity=0)}),this._hasUnresolvedMaster.then(function(){l.applyIfNeeded(b);p.withMetaDo({metaInteraction:!0},function(){p.opacity=l._originalOpacity});delete l._originalOpacity;delete l._capturedExtents});var q=this.determineMaster(p);
q&&this._appliedMaster!=q&&(b=!0);q&&b&&(this.apply(p,q),this._appliedMaster=q)}else Sc.once(p.env,"eventDispatcher",function(){l.applyIfNeeded(b,e)});else Sc.once(p.env,"world",function(){l.applyIfNeeded(b,e)})}},{key:"getStyleProperties",value:function(b){var e=b.propertiesAndPropertySettings();b=e.properties;var l=[];e=$jscomp.makeIterator(e.order);for(var p=e.next();!p.done;p=e.next())p=p.value,b[p].isStyleProp&&l.push(p);return l}},{key:"apply",value:function(b,e,l){var p=this;l=void 0===l?this._animationConfig:
l;if(!this._applying){this._applying=!0;try{var q=function(){return b.withMetaDo({metaInteraction:!0},function(){var u=p.prepareSubmorphsToBeManaged(b,e);e.withAllSubmorphsDoExcluding(function(w){var y=w==e,A=y?b:u[w.name];if(A)if(Sc.obj.isArray(A)&&(A=A.pop()),!w.master||y||w.master.equals(A.master)||p._overriddenProps.get(A).master||(A.master=w.master.spec(),A.requestMasterStyling()),A.master&&!y)y=A.master._overriddenProps.get(A)||{},y.position||(A.position=w.position),y.extent||(A.extent=w.extent);
else{y=$jscomp.makeIterator(p.getStyleProperties(w));for(var C=y.next();!C.done;C=y.next())if(C=C.value,!p._overriddenProps.get(A)[C])if("layout"==C)A.layout&&w.layout&&A.layout.name()==w.layout.name()&&A.layout.equals(w.layout)||(A.layout=w.layout?w.layout.copy():void 0);else{if(w==e){if("extent"==C&&!A.extent.equals(Sc.pt(10,10))&&(!A.owner||A.owner.isWorld||A.ownerChain().find(function(E){return E.master&&E.master.managesMorph(A)})))continue;if("position"==C)continue}A.isLabel&&"extent"==C||["border",
"borderTop","borderBottom","borderRight","borderLeft"].includes(C)||(Sc.obj.equals(A[C],w[C])||(A[C]=w[C]),["fixedHeight","fixedWidth"].includes(C)&&A._parametrizedProps&&A._parametrizedProps.extent&&(A.extent=A._parametrizedProps.extent))}A._parametrizedProps&&delete A._parametrizedProps}},function(w){return e!=w&&w.master})})};l?b.withAnimationDo(q,l).then(function(){p._animationConfig=!1;p._applying=!1}):b.dontRecordChangesWhile(q)}finally{l||(this._applying=!1),delete b._parametrizedProps}}}},
{key:"clearOverriddenPropertiesFor",value:function(b,e){var l=this._overriddenProps.get(b);this._overriddenProps.set(b,Sc.obj.dissoc(l,e))}},{key:"prepareSubmorphsToBeManaged",value:function(b,e){var l=this,p={};b.withAllSubmorphsDoExcluding(function(q){p[q.name]&&(Sc.obj.isArray(p[q.name])?p[q.name].push(q):p[q.name]=[p[q.name],q]);p[q.name]=q},function(q){return q!=b&&q.master});e.withAllSubmorphsDoExcluding(function(q){if(q=q==e?b:p[q.name])Sc.obj.isArray(q)&&(q=q.pop()),l.prepareMorphToBeManaged(q)},
function(q){return q!=e&&q.master});return p}},{key:"managedMorphs",get:function(){var b=this,e=Sc.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(p){return b.managesMorph(p)}),function(p){return p.name}),l;for(l in e)e[l]=e[l][0];return e}},{key:"reconcileSubmorphs",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(b.whenReady(),2);e=b.managedMorphs;l=b._appliedMaster||b.auto;e[l.name]=b.derivedMorph;if(!l)return p.return();
b.derivedMorph.submorphs=l.copy().submorphs;b.derivedMorph.submorphs.forEach(function(q,u){q.position=l.submorphs[u].position});b.prepareSubmorphsToBeManaged(b.derivedMorph,l);p.jumpToEnd()})}},{key:"managesMorph",value:function(b){return this._overriddenProps.has(b)}},{key:"propsToSerializeForMorph",value:function(b,e){if(!this.managesMorph(b))return e;for(var l=[],p=$jscomp.makeIterator(this.getStyleProperties(b)),q=p.next();!q.done;q=p.next())q=q.value,this._overriddenProps.get(b)[q]||!("position"==
q&&b==this.derivedMorph||"extent"==q&&b==this.derivedMorph)&&l.push(q);return Sc.arr.withoutAll(e,l)}},{key:"prepareMorphToBeManaged",value:function(b){if(!this._overriddenProps.has(b)){var e={},l;for(l in b._parametrizedProps)"__takenFromSnapshot__"!=l&&(e[l]=!0);this._overriddenProps.set(b,e)}}},{key:"determineMaster",value:function(b){var e=b.env.world.colorScheme,l=b.env.eventDispatcher.isMorphHovered(b);b=b.env.eventDispatcher.isMorphClicked(b);var p=this.getMasterForState(this,{isHovered:l,
isClicked:b});this.light&&"light"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||p);this.dark&&"dark"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||p);return p}},{key:"getMasterForState",value:function(b,e){var l=b.auto,p=b.hover,q=b.click,u=e.isClicked;b=l;if(e.isHovered)if(p)b=p;else for(e=b&&b.master,p=[];e;){if(e.hover){b=e.hover;break}e=Sc.Path("auto.master").get(e);if(p.includes(e))break;p.push(e)}if(u)if(b=l,q)b=q;else for(l=b&&b.master,q=[];l;){if(l.click){b=
l.click;break}l=Sc.Path("auto.master").get(l);if(q.includes(l))break;q.push(l)}return b}},{key:"onMorphChange",value:function(b,e){if(!this._applying&&!Sc.Path("meta.metaInteraction").get(e)&&!["_rev","name"].includes(e.prop)&&("opacity"==e.prop&&delete this._originalOpacity,"master"==e.prop&&this.managesMorph(b)&&(this._overriddenProps.get(b).master=!0),b.styleProperties.includes(e.prop)))if(this.managesMorph(b)){if(!b.master||b.master==this||["extent","position"].includes(e.prop))this._overriddenProps.get(b)[e.prop]=
!0}else if(b._parametrizedProps)b._parametrizedProps[e.prop]=e.value;else{var l={};b._parametrizedProps=(l[e.prop]=e.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(b,e){e=e.constructor===Sc.ComponentPolicy?e:new this(b,e);b.master&&(e._overriddenProps=b.master._overriddenProps);return e}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5251,end:28442})}(void 0);Sc.ComponentPolicy=YI;Sc.ComponentPolicy=YI;Sc.ComponentPolicy=YI;Sc.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Sc.fetchedSnapshots=Sc.fetchedSnapshots||{};Sc.fetchedMasters=Sc.fetchedMasters||{};Sc.resolvedMasters=Sc.resolvedMasters||{};Sc.modulesToLoad=Sc.modulesToLoad||{};Sc.li=Sc.li||void 0;Sc.localNamePromise=Sc.localNamePromise||void 0;Sc.masterComponentFetches=Sc.masterComponentFetches||
{};Sc.worldToUrl=Sc.worldToUrl||{};var w5=za("bQ",Sc.resolvedMasters);Sc.resolvedMasters=w5;Sc.resolvedMasters=w5;Sc.reset=nF;Sc.reset=nF;Sc.clearSnapshot=KN;Sc.clearSnapshot=KN;var GB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:d.StyleGuideResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var b=this.url.match(Sc.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();b.next();return b.next().value}},{key:"worldName",get:function(){var b=this.url.match(Sc.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();var e=b.next().value;b.next();"$world"==e&&(e=this.localWorldName());return e}},{key:"dirList",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return l.worldName==
Sc.getProjectName($world)?q.return(Sc.arr.uniq([].concat($jscomp.arrayFromIterable($world.localComponents),$jscomp.arrayFromIterable($world.withAllSubmorphsSelect(function(u){return u.isComponent}))))):(p=Sc.resolvedMasters[l.worldName])?q.return(Object.values(p)):q.return([])})}},{key:"localWorldName",value:function(){var b;if(b=Sc.getProjectName($world))return b;if(Sc.localNamePromise)return Sc.localNamePromise;b=Sc.promise.deferred();var e=b.resolve;Sc.localNamePromise=b.promise;if("__newWorld__"==
Sc.resource(document.location.href).query().name)return e("__newWorld__"),Sc.localNamePromise;Sc.subscribeOnce("world/loaded",function(){e(Sc.getProjectName($world))},System);return Sc.localNamePromise}},{key:"fetchFromMasterDir",value:function(b,e){var l=b.join(this.worldName).join(e+".json");if(Sc.masterComponentFetches[l.url])return Sc.masterComponentFetches[l.url];Sc.masterComponentFetches[l.url]=function(){var p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?
(p=Sc,q=p.deserializeMorph,u.yield(l.readJson(),2)):u.return(q.call(p,u.yieldResult))})}();return Sc.masterComponentFetches[l.url]}},{key:"read",value:function(){var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:return e=b.componentName,na.yield(b.worldName,2);case 2:l=na.yieldResult;if(p=Sc.Path([l,b.componentName]).get(Sc.resolvedMasters))return na.return(p);q=Sc.resource(System.baseURL).join("components_cache").join(l).join(e+
".json");return"undefined"===typeof Sc.fetchedMasters[q.url]?(w=Sc.promise.deferred(),u=w.resolve,Sc.fetchedMasters[q.url]=w.promise,na.yield(b.localWorldName(),6)):na.yield(Sc.fetchedMasters[q.url],5);case 5:p=na.yieldResult;na.jumpTo(4);break;case 6:if(na.yieldResult==l){p="undefined"!==typeof $world&&$world.localComponents.find(function(Ba){return Ba.name==e});if(!p)throw Error('Master component "'+e+'" can not be found in "'+l+'"');u(p);na.jumpTo(4);break}return na.yield(q.exists(),8);case 8:if(!na.yieldResult){u(null);
na.jumpTo(4);break}Sc.worldToUrl[l]=Sc.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+l+".json"}).url;return na.yield(q.readJson(),10);case 10:return y=na.yieldResult,na.yield(Sc.loadPackagesAndModulesOfSnapshot(y),11);case 11:return p=Sc.deserializeMorph(y),na.yield(b.resolveComponent(p),12);case 12:u(p);case 4:if(p)return na.return(p);Sc.fetchedSnapshots[l]||(console.log("scheduling fetch of",l),C=Sc.promise.deferred(),A=C.resolve,Sc.fetchedSnapshots[l]=
C.promise);return A?(L=Sc.MorphicDB.default,na.yield(L.fetchCommit("world",l),16)):na.yield(Sc.fetchedSnapshots[l],15);case 15:E=na.yieldResult;na.jumpTo(14);break;case 16:if(na.yieldResult)return na.yield(L.fetchSnapshot("world",l),22);I=Sc.resource(System.baseURL).join("lively.morphic/styleguides").join(l+".json");return na.yield(I.exists(),19);case 19:if(!na.yieldResult){A(null);na.jumpTo(18);break}return na.yield(I.readJson(),21);case 21:E=na.yieldResult;Sc.worldToUrl[l]=Sc.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+
l+".json"}).url;na.jumpTo(18);break;case 22:E=na.yieldResult,Sc.worldToUrl[l]=Sc.resource(System.baseURL).join("worlds/load").withQuery({name:l}).url;case 18:return Sc.ensureAbsoluteComponentRefs({snapshotAndPackages:E,localComponents:[],localWorldName:b.worldName}),na.yield(Sc.loadPackagesAndModulesOfSnapshot(E),23);case 23:Object.values(E.snapshot).filter(function(Ba){return Ba.props.master}).forEach(function(Ba){var F=Ba.props.master.value;Sc.obj.isString(F)&&(Ba.props.master.value=F.split("$world").join(b.worldName))}),
A(E);case 14:V=new Sc.ObjectPool(Sc.normalizeOptions({plugins:[new Sc.StyleguidePlugin].concat($jscomp.arrayFromIterable(Sc.allPlugins))}));T=$jscomp.makeIterator(Object.entries(E.snapshot).find(function(Ba){Ba=$jscomp.makeIterator(Ba);Ba.next();Ba=Ba.next().value;return Sc.Path("props.isComponent.value").get(Ba)&&Sc.Path("props.name.value").get(Ba)==e})||[]);Y=T.next().value;if(!Y)throw Error('Master component "'+e+'" can not be found in "'+l+'"');p=V.resolveFromSnapshotAndId(Object.assign({},E,
{id:Y}));return na.yield(b.resolveComponent(p),24);case 24:return na.return(na.yieldResult)}})}},{key:"resolveComponent",value:function(b){var e=this,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:l=e.componentName;Sc.resolvedMasters[e.worldName]?Sc.resolvedMasters[e.worldName][l]=b:(p={},Sc.resolvedMasters[e.worldName]=(p[l]=b,p));b._resourceHandle=e;if(!b._pool||!b._pool.mastersInSubHierarchy){y.jumpTo(2);break}q=$jscomp.makeIterator(b._pool.mastersInSubHierarchy);
u=q.next();case 3:if(u.done){y.jumpTo(5);break}w=u.value;return y.yield(w.applyIfNeeded(!0),6);case 6:w.derivedMorph.ownerChain().includes(b)||w.derivedMorph.requestMasterStyling();u=q.next();y.jumpTo(3);break;case 5:delete b._pool;case 2:return y.return(b)}})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=
"undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName});return l.return(e&&e.isComponent)})}},{key:"remove",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(e="undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName}))e.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:32223,end:39780})}(Sc.Resource);Sc.StyleGuideResource=GB;Sc.StyleGuideResource=GB;Sc.StyleGuideResource=GB;var ZI={name:"styleguide",matches:function(a){return a.match(Sc.styleGuideURLRe)},resourceClass:Sc.StyleGuideResource};Sc.resourceExtension=ZI;Sc.resourceExtension=ZI;Sc.resourceExtension=
ZI;Sc.registerExtension(Sc.resourceExtension);var fm=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");fm.install=Kr;fm.remove=cu;fm.isInstalled=Lr;fm.arr=Ke;fm.fun=Qj;fm.install=Kr;fm.install=Kr;fm.remove=cu;fm.remove=cu;fm.isInstalled=Lr;fm.isInstalled=Lr;var $I=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");$I.classHolder={};var Lq=$I.classHolder;$I.classHolder=Lq;$I.classHolder=Lq;var tq=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");
tq.computeRequireMap=Vz;tq.graph=xq;tq.arr=Ke;tq.obj=df;tq.loadedModules=MF;tq.computeRequireMap=Vz;tq.computeRequireMap=Vz;var tl=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");tl.scheduleModuleExportsChange=Wz;tl.runScheduledExportChanges=oF;tl.clearPendingModuleExportChanges=function(a,d){delete a.get("@lively-env").pendingExportChanges[d]};tl.updateModuleExports=function(a,d,k){var b=a.debug;tl.module(a,d).updateRecord(function(e){var l=[],p=[];Object.keys(k).forEach(function(E){var L=
k[E];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",d,E,String(L).slice(0,30).replace(/\n/g,"")+"...");var I=!(E in e.exports);I&&(e.__lively_modules__.evalOnlyExport[E]=!0);e.exports[E]=L;I?l.push(E):p.push(E)});if(l.length){var q=a.get(d);Object.isFrozen(q)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
d),a.set(d,a.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",d),l.forEach(function(E){Object.defineProperty(q,E,{configurable:!1,enumerable:!0,get:function(){return e.exports[E]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(p.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,d);for(var u=0,w=e.importers.length;u<w;u++){var y=e.importers[u];if(!y.locked){var A;
if(y.dependencies.some(function(E,L){A=L;return E&&E.name===e.name})){if(b){var C=tl.module(a,y.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+C.package().name+"/"+C.pathInPackage())}tl.module(a,y.name).evaluationStart();y.setters[A](e.exports);tl.module(a,y.name).evaluationEnd()}}}}})};tl.module=eu;tl.scheduleModuleExportsChange=Wz;tl.scheduleModuleExportsChange=Wz;tl.runScheduledExportChanges=oF;tl.runScheduledExportChanges=oF;var zi=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
zi.moduleSourceChange=Xz;zi.moduleSourceChangeEsm=function(a,d,k,b){var e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:return e=a.debug,l={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"esm"}},na.yield(zi.instrumentSourceOfEsmModuleLoad(a,l),2);case 2:p=na.yieldResult,q=function(Ba,F){return zi.scheduleModuleExportsChange(a,l.name,Ba,F,!0)},u=p.declare(q),e&&console.log("[lively.vm es6] sourceChange of %s with deps",
l.name,p.localDeps),w=[],y=$jscomp.makeIterator(p.localDeps),A=y.next();case 3:if(A.done){na.jumpTo(5);break}C=A.value;return na.yield(a.normalize(C,l.name),6);case 6:return E=na.yieldResult,L=zi.classHolder.module(a,E),na.yield(L.load(),7);case 7:I=na.yieldResult;w.push({name:C,fullname:E,module:L,exports:I});A=y.next();na.jumpTo(3);break;case 5:if(V=a.loads&&a.loads[l.name])V.deps=w.map(function(Ba){return Ba.name}),V.depMap=w.reduce(function(Ba,F){Ba[F.name]=F.fullname;return Ba},{}),V.metadata&&
V.metadata.entry&&(V.metadata.entry.deps=V.deps,V.metadata.entry.normalizedDeps=w.map(function(Ba){return Ba.fullname}),V.metadata.entry.declare=p.declare);T=zi.classHolder.module(a,l.name);Y=T.record();w.forEach(function(Ba,F){return T.addDependencyToModuleRecord(Ba.module,u.setters[F])});Y&&(Y.execute=u.execute);w.forEach(function(Ba,F){return u.setters[F](Ba.exports)});return na.return(u.execute())}})};zi.moduleSourceChangeGlobal=function(a,d,k,b){var e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return e={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"global"}},a.get(d)?q.jumpTo(2):q.yield(a.import(d),2);if(4!=q.nextAddress)return q.yield(zi.instrumentSourceOfGlobalModuleLoad(a,e),4);l=q.yieldResult;e.source=l.translated;p=zi.doInstantiateGlobalModule(a,e);a.delete(d);a.set(p.name,p.esModule);return q.return(p.module)})};zi.doInstantiateGlobalModule=function(a,d){var k=zi.__createEntry();k.name=d.name;k.esmExports=!0;d.metadata.entry=
k;k.deps=[];for(var b in d.metadata.globals){var e=d.metadata.globals[b];e&&k.deps.push(e)}k.execute=function(l,p,q){(p=(p=zi.classHolder.module(a,q.id).metadata())&&p.entry&&p.entry.module&&p.entry.module.exports)&&Object.keys(p).forEach(function(y){try{delete a.global[y]}catch(A){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+y+'"]')}});if(d.metadata.globals){var u={};for(var w in d.metadata.globals)d.metadata.globals[w]&&(u[w]=l(d.metadata.globals[w]))}if(l=d.metadata.exports)d.source+=
'\nSystem.global["'+l+'"] = '+l+";";q=a.get("@@global-helpers").prepareGlobal(q.id,l,u);zi.__evaluateGlobalLoadSource(a,d);return q()};return zi.runExecuteOfGlobalModule(a,k)};zi.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};zi.__evaluateGlobalLoadSource=function(a,d){function k(){0==--e&&(l.System=l.SystemJS=b)}var b,e=
0,l=a.global;return function(p){try{0==e++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(p.source),k()}catch(q){throw k(),Error("Error evaluating "+p.address+":\n"+q.stack);}}.call(a,d)};zi.runExecuteOfGlobalModule=function(a,d){var k={},b=d.module={exports:k,id:d.name};d.evaluated=!0;if(k=d.execute.call(a.global,function(e){var l=d.deps.find(function(p){return p===e});if(l=l&&a.get(d.normalizedDeps[d.deps.indexOf(l)])||a.get(a.decanonicalize(e,d.name)))return l;throw Error("Module "+e+" not declared as a dependency of "+
d.name);},k,b))b.exports=k;k=b.exports;b=a.get("@system-env").constructor;d.esModule=k&&(k.__esModule||k instanceof b)?k:d.esmExports&&k!==a.global?a.newModule(k):{default:k};return d};zi.arr=Ke;zi.emit=Xp;zi.instrumentSourceOfEsmModuleLoad=CF;zi.instrumentSourceOfGlobalModuleLoad=DF;zi.scheduleModuleExportsChange=Wz;zi.classHolder=Lq;zi.moduleSourceChange=Xz;zi.moduleSourceChange=Xz;var Jk=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Jk.isJsFile=LN;Jk.asDir=MN;Jk.isURL=
du;Jk.urlResolve=pF;Jk.string=rg;Jk.isJsFile=LN;Jk.isJsFile=LN;Jk.asDir=MN;Jk.asDir=MN;var HB=Jk.string.joinPath;Jk.join=HB;Jk.join=HB;Jk.join=HB;Jk.isURL=du;Jk.isURL=du;Jk.urlResolve=pF;Jk.urlResolve=pF;var Hn=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Hn.arr=Ke;Hn.obj=df;Hn.isURL=du;Hn.installHook=Kr;Hn.isHookInstalled=Lr;var Hp=function(a){this.pkg=a};Hp.prototype.applyConfig=function(a){var d=this.System,k=this.packageURL,b=this.pkg;a=Hn.obj.deepMerge(b.config,
a);var e=a.name||k.split("/").slice(-1)[0],l=a.version,p=a.systemjs||{},q=a.lively,u=a.main||"index.js",w={},y={};d.config({map:(w[e]=k,w),packages:(y[k]=Object.assign({},p,{meta:Object.assign({"package.json":{format:"json"}},p.meta),configured:!0}),y)});d.packages[k].configured=!0;d=d.getConfig().packages[k]||{};d.map||(d.map={});p&&(q&&q.main?u=q.main:p.main&&(u=p.main),this.applySystemJSConfig(p));u.match(/\.[^\/\.]+/)||(u+=".js");d.main=u;b.version=l;b.config=a;b._name=e;b.mergeWithConfig(d);
return q?this.applyLivelyConfig(q):{subPackages:[]}};Hp.prototype.applySystemJSConfig=function(a){var d=this.System;a.packageConfigPaths&&d.config({packageConfigPaths:Hn.arr.uniq(d.packageConfigPaths.concat(a.packageConfigPaths))});a.packages&&d.config({packages:a.packages});a.globalmap&&d.config({map:a.globalmap});a.babelOptions&&d.config({babelOptions:a.babelOptions});a.meta&&d.config({meta:a.meta})};Hp.prototype.applyLivelyConfig=function(a){this.applyLivelyConfigMeta(a);this.applyLivelyConfigHooks(a);
this.applyLivelyConfigBundles(a)};Hp.prototype.applyLivelyConfigHooks=function(a){var d=this;(a.hooks||[]).forEach(function(k){try{var b=eval("("+k.source+")");b.name&&Hn.isHookInstalled(d.System,k.target,b.name)||Hn.installHook(d.System,k.target,b)}catch(e){console.error("Error installing hook for %s: %s",d.packageURL,e,k)}})};Hp.prototype.applyLivelyConfigBundles=function(a){var d=this;if(!a.bundles)return Promise.resolve();var k=Object.keys(a.bundles).reduce(function(b,e){var l=d.packageURL+"/"+
e;e=a.bundles[e].map(function(p){return d.System.decanonicalize(p,d.packageURL+"/")});b[l]=e;return b},{});this.System.config({bundles:k});return Promise.resolve()};Hp.prototype.applyLivelyConfigMeta=function(a){if(a.meta){var d=this.System.getConfig().packages[this.packageURL]||{},k={},b={meta:{},packages:(k[this.packageURL]=d,k)};Object.keys(a.meta).forEach(function(e){var l=a.meta[e];Hn.isURL(e)?b.meta[e]=l:(d.meta||(d.meta={}),d.meta[e]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Hp.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Hn.PackageConfiguration=Hp;Hn.default=Hp;var oe=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");oe.normalizePackageURL=function(a,d,k){k=void 0===k?[]:k;if(k.some(function(b){return b===d}))return d;a=a.decanonicalize(d.replace(/[\/]+$/,"")+"/");if(!oe.isURL(a))throw Error("Strange package URL: "+a+" is not a valid URL");
a.match(/\.js/)&&(a=-1<a.indexOf(a+".js")?a.replace(/\.js$/,""):a.split("/").slice(0,-1).join("/"));a.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+a);return String(a).replace(/\/$/,"")};oe.lookupPackage=qF;oe.ensurePackage=rF;oe.getPackage=Yz;oe.applyConfig=sF;oe.importPackage=tF;oe.removePackage=uF;oe.reloadPackage=vF;oe.registerPackage=wF;oe.getPackageSpecs=xF;oe.arr=Ke;oe.promise=Vf;oe.obj=df;oe.emit=Xp;oe.module=eu;oe.resource=Dc;oe.PackageConfiguration=
Hp;oe.isURL=du;oe.join=HB;oe.classHolder=Lq;var Nh=function(a,d,k,b,e){e=void 0===e?{}:e;this.System=a;this.url=d;this.registerProcess=null;this.map={};this.setConfig(e)};Nh.allPackages=function(a){return oe.obj.values(oe.classHolder.PackageRegistry.ofSystem(a).byURL)};Nh.allPackageURLs=function(a){return oe.classHolder.PackageRegistry.ofSystem(a).allPackageURLs()};Nh.forModule=function(a,d){return this.forModuleId(a,d.id)};Nh.forModuleId=function(a,d){return(d=oe.classHolder.ModulePackageMapping.forSystem(a).getPackageURLForModuleId(d))?
oe.getPackage(a,d,!0):null};Nh.fromJSON=function(a,d){return(new oe.Package(a)).fromJSON(d)};Nh.prototype.setConfig=function(a){this._name=a.name;this.version=a.version;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.main=a.main||"index.js";this.systemjs=a.systemjs;this.lively=a.lively};Nh.prototype.toJSON=function(){var a=this.System,d=oe.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));d.url.startsWith(a.baseURL)&&
(d.url=d.url.slice(a.baseURL.length).replace(/^\//,""));return d};Nh.prototype.fromJSON=function(a){var d=this.System;this.url=a.url;this._name=a._name;this.version=a.version;this.map=a.map||{};this.main=a.main;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.systemjs=a.systemjs;this.lively=a.lively;oe.isURL(this.url)||(this.url=oe.join(d.baseURL,this.url));this.registerWithConfig();return this};Nh.prototype.asSpec=function(){return Object.assign({},oe.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(a){return{name:a.id,deps:a.directRequirements().map(function(d){return d.id})}})})};Nh.prototype.path=function(){var a=this.System.baseURL;return 0===this.url.indexOf(a)?this.url.slice(a.length):this.url};Nh.prototype.modules=function(){var a=this.url,d=this.System;return oe.classHolder.ModulePackageMapping.forSystem(d).getModuleIdsForPackageURL(a).map(function(k){return oe.module(d,k)})};Nh.prototype.resources=
function(a,d){d=void 0===d?[".git","node_modules",".module_cache","lively.next-node_modules"]:d;var k=this,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return b=k,e=b.System,l=b.url,p=oe.Package.allPackageURLs(e),q=p.filter(function(C){return C!==l&&!l.startsWith(C)}),A.yield(oe.resource(l).dirList("infinity",{exclude:d}),2);u=A.yieldResult;w=u.filter(function(C){return!C.isDirectory()&&!q.some(function(E){return C.url.startsWith(E)})}).map(function(C){return C.url});
y=oe.arr.pluck(k.modules(),"id");a&&(w=w.filter(a));return A.return(w.map(function(C){var E=C.replace(l,"").replace(/^\//,"");return{isLoaded:y.includes(C),url:C,nameInPackage:E,package:k}}))})};Nh.prototype.hasResource=function(a){var d=this.url;return(a.startsWith(d)?oe.resource(a):oe.resource(d).join(a)).exists()};Nh.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Nh.prototype.mergeWithConfig=function(a){var d=a=Object.assign({},a),k=d.name;d=d.map;k&&(delete a.name,
this._name=k);d&&(delete a.map,Object.assign(this.map,d));Object.assign(this,a);return this};Nh.prototype.addMapping=function(a,d){this.map[a]=d;var k={},b={};this.System.config({packages:(b[this.url]={map:(k[a]=d,k)},b)})};Nh.prototype.tryToLoadPackageConfig=function(){var a=this,d,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:d=a;k=d.System;b=d.url;e=b+"/package.json";l={};p={};k.config({meta:(l[e]={format:"json"},l),packages:(p[b]=
{meta:{"package.json":{format:"json"}}},p)});k.debug&&console.log("[lively.modules package reading config] %s",e);C.setCatchFinallyBlocks(2);if(q=k.get(e)){C.jumpTo(4);break}return C.yield(k.import(e),5);case 5:q=C.yieldResult;case 4:return u=q,w=[].concat($jscomp.arrayFromIterable(k.packageConfigPaths)),oe.arr.pushIfNotIncluded(w,e),k.config({packageConfigPaths:w}),C.return(u);case 2:return y=C.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
e,y),delete k.meta[e],A=b.split("/").slice(-1)[0],C.return({name:A})}})};Nh.prototype.import=function(){var a=this,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(a.register(),2);case 2:return d=a,k=d.url,b=d.System,e=oe,l=e.module,p=b,w.yield(b.normalize(k),3);case 3:return q=l.call(e,p,w.yieldResult),w.yield(b.import(q.id),4);case 4:return u=w.yieldResult,w.yield(oe.promise.waitFor(1E3,function(){return q.isLoaded()}),5);
case 5:return w.return(u)}})};Nh.prototype.isRegistering=function(){return!!this.registerProcess};Nh.prototype.register=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(d.isRegistering())return w.return(d.registerProcess.promise);k=d;b=k.System;e=k.url;d.registerProcess=oe.promise.deferred();l=d.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);w.setCatchFinallyBlocks(2,3);if(p=
a){w.jumpTo(5);break}return w.yield(d.tryToLoadPackageConfig(),6);case 6:p=w.yieldResult;case 5:q=p,d.registerWithConfig(q),d.registerProcess.resolve(q);case 3:w.enterFinallyBlock();delete d.registerProcess;w.leaveFinallyBlock(4);break;case 2:throw u=w.enterCatchBlock(),d.registerProcess.reject(u),u;case 4:return w.return(l)}})};Nh.prototype.updateConfig=function(a){a=Object.assign({},this.runtimeConfig,{},a);var d=this.name,k=this.version,b=a,e=b.name;b=b.version;(new oe.PackageConfiguration(this)).applyConfig(a);
if(d!==a.name||k!==a.version)console.log("[lively.modules] Updating registry "+d+"@"+k+" => "+e+"@"+b),oe.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,d,k,e,b)};Nh.prototype.registerWithConfig=function(a){a=void 0===a?this.runtimeConfig:a;var d=this.System,k=this.url,b=(new oe.PackageConfiguration(this)).applyConfig(a),e=oe.join(k,"package.json");d.get(e)||d.set(e,d.newModule(Object.assign({},a,{default:a})));oe.emit("lively.modules/packageregistered",{package:k},
Date.now(),d);return b};Nh.prototype.remove=function(a){a=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},a);var d=this.System,k=this.url;k=k.replace(/\/$/,"");a.unloadModules&&this.modules().forEach(function(q){return q.unload(a)});oe.classHolder.PackageRegistry.ofSystem(d).removePackage(this);var b=d.getConfig(),e=k+"/package.json";d.delete(String(e));oe.arr.remove(b.packageConfigPaths||[],e);var l={},p={};d.config({meta:(l[e]={},l),packages:(p[k]={},p),packageConfigPaths:b.packageConfigPaths});
delete d.packages[k];oe.emit("lively.modules/packageremoved",{package:this.url},Date.now(),d)};Nh.prototype.reload=function(a){var d=this.url,k=oe.classHolder.PackageRegistry.ofSystem(this.System),b=k.coversDirectory(d);this.remove(a);a={};k.addPackageAt(d,b||"devPackageDirs",(a[d]=this,a));return this.import()};Nh.prototype.fork=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d||(d=oe.resource(k.url).join("../"+a).withRelativePartsResolved().url),
b.yield(k.changeAddress(d,a,!1),2)):b.return(b.yieldResult)})};Nh.prototype.rename=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=oe.resource(d.url).join("../"+a).withRelativePartsResolved().url,b.yield(d.changeAddress(k,a,!0),2)):b.return(b.yieldResult)})};Nh.prototype.changeAddress=function(a,d,k){d=void 0===d?null:d;k=void 0===k?!0:k;var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Va){switch(Va.nextAddress){case 1:return a=
a.replace(/\/?/,""),e=b,l=e.System,p=e.url,Va.yield(b.runtimeConfig,2);case 2:return q=Va.yieldResult,u=oe.resource(p).asDirectory(),w=new oe.Package(l,a),Va.yield(oe.resource(a).asDirectory(),3);case 3:return y=Va.yieldResult,q.name=d||b.name,A=oe.classHolder.PackageRegistry.ofSystem(l),C=A.coversDirectory(p),oe.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[p]&&(l.packages[a]=l.packages[p],k&&delete l.packages[p]),Object.assign(w,oe.obj.select(b,["_name","map","config"])),
Va.yield(y.ensureExistance(),4);case 4:return Va.yield(b.resources(void 0,[]),5);case 5:E=Va.yieldResult.map(function(lb){return lb.url}),L=b.modules(),I=$jscomp.makeIterator(L),V=I.next();case 6:if(V.done){Va.jumpTo(8);break}T=V.value;Y=y.join(T.pathInPackage()).url;return k?Va.yield(T.renameTo(Y),10):Va.yield(T.copyTo(Y),10);case 10:na=E.indexOf(T.id);-1<na&&E.splice(na,1);V=I.next();Va.jumpTo(6);break;case 8:Ba=$jscomp.makeIterator(E),F=Ba.next();case 13:if(F.done){if(!k){Va.jumpTo(17);break}return Va.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}W=F.value;P=oe.resource(W);S=P.relativePathFrom(u);return Va.yield(P.copyTo(y.join(S)),14);case 14:F=Ba.next();Va.jumpTo(13);break;case 18:return Va.yield(u.remove(),17);case 17:if(!d){Va.jumpTo(20);break}w.name=d;w.config.name=d;fa=oe.resource(a).join("package.json");Va.setCatchFinallyBlocks(21);return Va.yield(fa.exists(),23);case 23:if(!Va.yieldResult){Va.jumpTo(24);break}return Va.yield(fa.readJson(),25);case 25:aa=Va.yieldResult;if(aa.name!==b.name){Va.jumpTo(26);break}aa.name=
d;return Va.yield(fa.writeJson(aa,!0),26);case 26:(oa=l.get(fa.url))&&l.set(fa.url,l.newModule(Object.assign({},oa,{name:d})));case 24:Va.leaveTryBlock(20);break;case 21:Va.enterCatchBlock();case 20:return C=C||"individualPackageDirs","individualPackageDirs"!==C&&"devPackageDirs"!==C||A._addPackageDir(a,C,!0),A._addPackageWithConfig(w,q,a,C),A.resetByURL(),A._updateLatestPackages(),Va.return(w)}})};Nh.prototype.search=function(a,d){d=void 0===d?{}:d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d.includeUnloaded?l.yield(k.resources(function(p){return p.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=k.modules().filter(function(p){return p.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(p){return oe.module(k.System,p.url)}));e=b;return l.return(Promise.all(e.map(function(p){return p.search(a,d).catch(function(q){console.error("Error searching module "+p.name+":\n"+q.stack);return[]})})).then(function(p){return oe.arr.flatten(p,
1)}))})};$jscomp.global.Object.defineProperties(Nh.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var a=this.System.get(this.url+"/package.json");return a&&a.name?a.name:oe.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(a){return this._name=a}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(a){return this.url=a}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var a=this.main,d=this.systemjs,k=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};a&&(b.main=a);d&&(b.systemjs=d);k&&(b.lively=k);return b}}});oe.Package=Nh;oe.ensurePackage=rF;oe.ensurePackage=rF;oe.importPackage=tF;oe.importPackage=tF;oe.removePackage=uF;oe.removePackage=uF;oe.reloadPackage=
vF;oe.reloadPackage=vF;oe.registerPackage=wF;oe.registerPackage=wF;oe.getPackage=Yz;oe.getPackage=Yz;oe.lookupPackage=qF;oe.lookupPackage=qF;oe.applyConfig=sF;oe.applyConfig=sF;oe.getPackageSpecs=xF;oe.getPackageSpecs=xF;oe.Package=Nh;oe.Package=Nh;var Jc=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");Jc.isFunctionNode=function(a){return"ArrowFunctionExpression"===a.type||"FunctionExpression"===a.type||"FunctionDeclaration"===a.type};Jc.ensureIdentifier=function(a){return a.replace(Jc.firstIdRe,
"_").replace(Jc.trailingIdRe,"_")};Jc.constructorTemplate=function(a){return Jc.funcExpr({id:a?Jc.id(a):null},["__first_arg__"],Jc.ifStmt(Jc.binaryExpr(Jc.id("__first_arg__"),"&&",Jc.member("__first_arg__",Jc.funcCall(Jc.member("Symbol","for"),Jc.literal("lively-instance-restorer")),!0)),Jc.block(),Jc.block(Jc.exprStmt(Jc.funcCall(Jc.member(Jc.member("this",Jc.funcCall(Jc.member("Symbol","for"),Jc.literal("lively-instance-initialize")),!0),"apply"),Jc.id("this"),Jc.id("arguments"))))))};Jc.replaceSuper=
function(a,d,k,b){console.assert("Super"===a.type);(d=d.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Jc.stringify(a)+" in "+k.join("."));b=$jscomp.makeIterator(k.slice(-2));k=b.next().value;b=b.next().value;return"callee"===k&&"object"===b||"callee"===b?a:d&&"static"===d[Jc.methodKindSymbol]?Jc.funcCall(Jc.member("Object","getPrototypeOf"),Jc.id(Jc.tempLivelyClassVar)):Jc.funcCall(Jc.member("Object","getPrototypeOf"),Jc.member(Jc.id(Jc.tempLivelyClassVar),
"prototype"))};Jc.replaceSuperMethodCall=function(a,d,k,b){console.assert("CallExpression"===a.type);console.assert("Super"===a.callee.object.type);return Jc.funcCall.apply(Jc,[Jc.member(Jc.funcCall(Jc.member(b.functionNode,"_get"),Jc.replaceSuper(a.callee.object,d,k.concat(["callee","object"]),b),Jc.literal(a.callee.property.value||a.callee.property.name),Jc.id("this")),"call"),Jc.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};Jc.replaceDirectSuperCall=function(a,d,k,b){console.assert("CallExpression"===
a.type);console.assert("Super"===a.callee.type);return Jc.funcCall.apply(Jc,[Jc.member(Jc.funcCall(Jc.member(b.functionNode,"_get"),Jc.replaceSuper(a.callee,d,k.concat(["callee"]),b),Jc.funcCall(Jc.member("Symbol","for"),Jc.literal("lively-instance-initialize")),Jc.id("this")),"call"),Jc.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};Jc.replaceSuperGetter=function(a,d,k,b){console.assert("MemberExpression"===a.type);console.assert("Super"===a.object.type);return Jc.funcCall(Jc.member(b.functionNode,
"_get"),Jc.replaceSuper(a.object,d,k.concat(["object"]),b),Jc.literal(a.property.value||a.property.name),Jc.id("this"))};Jc.replaceSuperSetter=function(a,d,k,b){console.assert("AssignmentExpression"===a.type);console.assert("Super"===a.left.object.type);return Jc.funcCall(Jc.member(b.functionNode,"_set"),Jc.replaceSuper(a.left.object,d,k.concat(["left","object"]),b),Jc.literal(a.left.property.value||a.left.property.name),a.right,Jc.id("this"))};Jc.replaceClass=function(a,d,k,b){console.assert("ClassDeclaration"===
a.type||"ClassExpression"===a.type);var e=a.body.body,l=a.superClass;k=a.id;var p=a.type,q=a.start,u=a.end,w=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,y=Jc.id("undefined"),A=Jc.id("undefined"),C=k?k.name:"anonymous_class",E=b.evalId,L=b.sourceAccessorName;a=a["x-lively-object-meta"]||{start:q,end:u};w=e.reduce(function(Y,na){var Ba=na.key,F=na.kind,W=na.value,P=na.static;"Literal"!==Ba.type&&"Identifier"!==Ba.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(Ba));
if("method"===F){F=Jc.id(C+"_"+Jc.ensureIdentifier(Ba.name||Ba.value||Jc.Path("property.name").get(Ba))+"_");na={};W=["key",Jc.literal(Ba.name||Ba.value||Jc.Path("property.name").get(Ba)),"value",Object.assign({},W,(na.id=F,na[Jc.methodKindSymbol]=P?"static":"proto",na))];var S=Jc.objectLiteral(W)}else"get"===F||"set"===F?(na={},S=Jc.objectLiteral(["key",Jc.literal(Ba.name||Ba.value||Jc.Path("property.name").get(Ba)),F,Object.assign({},W,(na.id=Jc.id(F),na[Jc.methodKindSymbol]=P?"static":"proto",
na))])):"constructor"===F?(Ba={},W=["key",Jc.funcCall(Jc.member("Symbol","for"),Jc.literal("lively-instance-initialize")),"value",Object.assign({},W,(Ba.id=Jc.id(C+"_initialize_"),Ba[Jc.methodKindSymbol]="proto",Ba))],S=Jc.objectLiteral(W)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+F+", ignoring it, "+JSON.stringify(na));(P?Y.clazz:Y.inst).push(S);return Y},{inst:[],clazz:w?[Jc.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+
C+'"; } })').body[0].expression]:[]});e=w.inst;w=w.clazz;e.length&&(y={type:"ArrayExpression",elements:e});w.length&&(A={type:"ArrayExpression",elements:w});e=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var I=l;var V=l.property.name}else{var T=e&&e.resolvedRefMap&&e.resolvedRefMap.get(l);T&&T.decl&&e.decls&&e.decls.find(function(Y){return $jscomp.makeIterator(Y).next().value===T.decl})&&(I=l,V=l.name)}V=I?Jc.objectLiteral(["referencedAs",Jc.literal(V),"value",I]):l||Jc.id("undefined");
I=k&&"ClassDeclaration"===p;l=["start",Jc.literal(a.start),"end",Jc.literal(a.end)];"undefined"!==typeof E&&l.push("evalId",Jc.literal(E));L&&l.push("moduleSource",Jc.nodes.id(L));E=Jc.objectLiteral(l);y=Jc.funcCall(Jc.funcExpr({},["superclass"],Jc.varDecl(Jc.tempLivelyClassHolderVar,d.classHolder),Jc.varDecl(Jc.tempLivelyClassVar,I?{type:"ConditionalExpression",test:Jc.binaryExpr(Jc.funcCall(Jc.member(Jc.tempLivelyClassHolderVar,"hasOwnProperty"),Jc.literal(k.name)),"&&",Jc.binaryExpr({argument:Jc.member(Jc.tempLivelyClassHolderVar,
k),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Jc.literal("function"))),consequent:Jc.member(Jc.tempLivelyClassHolderVar,k),alternate:Jc.assign(Jc.member(Jc.tempLivelyClassHolderVar,k),Jc.constructorTemplate(k.name))}:k?Jc.constructorTemplate(k.name):Jc.constructorTemplate(null)),Jc.returnStmt(Jc.funcCall(b.functionNode,Jc.id(Jc.tempLivelyClassVar),Jc.id("superclass"),y,A,Jc.id(Jc.tempLivelyClassHolderVar),b.currentModuleAccessor||Jc.id("undefined"),E))),V);if("ClassExpression"===p)return y;
p=y;b.declarationWrapper&&d.classHolder===b.classHolder&&(p=Jc.funcCall(b.declarationWrapper,Jc.literal(k.name),Jc.literal("class"),p,b.classHolder,E));p=Jc.varDecl(k,p,"var");p[Jc.isTransformedClassVarDeclSymbol]=!0;return p};Jc.splitExportDefaultWithClass=function(a,d,k,b){return a.declaration&&a.declaration[Jc.isTransformedClassVarDeclSymbol]?[a.declaration,{declaration:a.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:a};Jc.classToFunctionTransform=uq;Jc.arr=Ke;Jc.Path=Ag;Jc.parse=
Bj;Jc.stringify=Yi;Jc.query=ro;Jc.nodes=Cq;Jc.Visitor=Jd;var Lm=Jc.nodes;Jc.assign=Lm.assign;Jc.member=Lm.member;Jc.id=Lm.id;Jc.exprStmt=Lm.exprStmt;Jc.funcCall=Lm.funcCall;Jc.literal=Lm.literal;Jc.objectLiteral=Lm.objectLiteral;Jc.varDecl=Lm.varDecl;Jc.funcExpr=Lm.funcExpr;Jc.returnStmt=Lm.returnStmt;Jc.binaryExpr=Lm.binaryExpr;Jc.ifStmt=Lm.ifStmt;Jc.block=Lm.block;Jc.firstIdRe=/^[^_a-z]/i;Jc.trailingIdRe=/[^_a-z0-9]/ig;Jc.isTransformedClassVarDeclSymbol=Symbol();Jc.methodKindSymbol=Symbol();Jc.tempLivelyClassVar=
"__lively_class__";Jc.tempLivelyClassHolderVar="__lively_classholder__";var aJ=function(){return Jc.Visitor.apply(this,arguments)||this};$jscomp.inherits(aJ,Jc.Visitor);aJ.prototype.accept=function(a,d,k){Jc.isFunctionNode(a)&&(d=Object.assign({},d,{classHolder:Jc.objectLiteral([]),currentMethod:a[Jc.methodKindSymbol]?a:d.currentMethod}));if("ClassExpression"===a.type||"ClassDeclaration"===a.type)a=Jc.replaceClass(a,d,k,d.options);"Super"===a.type&&(a=Jc.replaceSuper(a,d,k,d.options));"MemberExpression"===
a.type&&a.object&&"Super"===a.object.type&&(a=Jc.replaceSuperGetter(a,d,k,d.options));"AssignmentExpression"===a.type&&"MemberExpression"===a.left.type&&"Super"===a.left.object.type&&(a=Jc.replaceSuperSetter(a,d,k,d.options));"CallExpression"===a.type&&"Super"===a.callee.type&&(a=Jc.replaceDirectSuperCall(a,d,k,d.options));"CallExpression"===a.type&&a.callee.object&&"Super"===a.callee.object.type&&(a=Jc.replaceSuperMethodCall(a,d,k,d.options));a=Jc.Visitor.prototype.accept.call(this,a,d,k);return"ExportDefaultDeclaration"===
a.type?Jc.splitExportDefaultWithClass(a,d,k,d.options):a};aJ.run=function(a,d){var k=new this,b=d.classHolder||Jc.objectLiteral([]);return k.accept(a,{options:d,classHolder:b},[])};Jc.ClassReplaceVisitor=aJ;Jc.classToFunctionTransform=uq;Jc.classToFunctionTransform=uq;var Lx=lively.FreezerRuntime.recorderFor("lively.classes/index.js");Lx.runtime=rx;Lx.classToFunctionTransform=uq;Lx.runtime=rx;Lx.runtime=rx;Lx.classToFunctionTransform=uq;Lx.classToFunctionTransform=uq;var x5=Object.freeze({__proto__:null,
runtime:rx,classToFunctionTransform:uq});za("a$",x5);var Sh=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");Sh.arr=Ke;Sh.Path=Ag;Sh.fuzzyParse=Wp;Sh.query=ro;Sh.stringify=Yi;Sh.resource=Dc;var Ip=function(a,d,k,b,e,l,p){this.System=a;this.intoModuleId=d;this.intoPackage=k;this.intoModuleSource=b;this.fromModuleId=e.moduleId;this.importData=e;this.alias=l;this.parsed=p||Sh.fuzzyParse(b)};Ip.run=function(a,d,k,b,e,l,p){return(new this(a,d,k,b,e,l,p)).run()};Ip.prototype.run=
function(){var a=this.generateImportStatement(),d=a.standaloneImport,k=a.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,a);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:d,from:b[0].start,to:b[0].end};if(l.length&&(a=this.modifyExistingImport(l,d)))return a;e=Sh.arr.last(e);return this.insertNewImport(l,d,k,e?e.end:0)};Ip.prototype.importsToBeReused=
function(a,d,k){k.isDefault&&(a=a.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return a};Ip.prototype.generateImportStatement=function(){var a=this.intoModuleId,d=this.fromModuleId,k=this.importData,b=this.intoPackage,e="default"===k.exported,l=this.alias||(e?k.local:k.exported),p=!e&&k.exported!==l;b=b&&b.name;var q=d,u=k.packageName,w=k.pathInPackage;if(k.isMain)q=u;else if(b===u)try{q=Sh.resource(d).relativePathFrom(Sh.resource(a)),q.startsWith(".")||
(q="./"+q)}catch(y){u&&"no group"!==u&&w&&(q=u+"/"+w)}else u&&"no group"!==u&&w&&(q=u+"/"+w);return{isDefault:e,standaloneImport:e?"import "+l+' from "'+q+'";':"import { "+k.exported+(p?" as "+l:"")+' } from "'+q+'";',importedVarName:l}};Ip.prototype.existingImportsOfFromModule=function(){var a=this.System,d=this.fromModuleId,k=this.intoModuleId,b=this.importData,e=b.exported,l=b.local,p=this.alias,q="default"===e;b=this.parsed.body.filter(function(w){return"ImportDeclaration"===w.type});var u=q?
p||l:p||e;l=b.filter(function(w){if(!w.source||"string"!==typeof w.source.value)return null;w=a.decanonicalize(w.source.value,k);return d===w});p=l.filter(function(w){return(w.specifiers||[]).some(function(y){return q?"ImportDefaultSpecifier"===y.type&&y.local.name===u:Sh.Path("imported.name").get(y)===e&&Sh.Path("local.name").get(y)===u})});return{imports:b,importsOfFromModule:l,importsOfVar:p}};Ip.prototype.modifyExistingImport=function(a,d){a=Sh.arr.flatmap(a,function(u){return u.specifiers||[]});
if(!a.length)return null;a=$jscomp.makeIterator(Sh.arr.partition(a,function(u){return"ImportDefaultSpecifier"===u.type}));var k=$jscomp.makeIterator(a.next().value).next().value,b=$jscomp.makeIterator(a.next().value).next().value;a=this.alias;var e=this.intoModuleSource,l=this.importData,p=l.exported;l=l.local;var q="default"===p;q?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||k,"at least one kine of specifier is expected");if(q){k=e.slice(0,b.start).lastIndexOf("{")-1;if(0>k)return null;
b=(a||l)+",";p=e.slice(0,k);e=e.slice(k);p.endsWith(" ")&&p.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+p+b+e,generated:b,standaloneImport:d,importedVarName:a||l,from:k,to:k+b.length}}k=b?b.end:k.end;q=(l=a&&a!==p)?p+" as "+a:p;b=b?", "+q:", { "+q+" }";return{status:"modified",newSource:""+e.slice(0,k)+b+e.slice(k),generated:b,standaloneImport:d,importedVarName:l?a:p,from:k,to:k+b.length}};Ip.prototype.insertNewImport=function(a,d,k,b){b=void 0===b?
0:b;a&&a.length&&(b=Sh.arr.last(a).end);var e=this.intoModuleSource;a=e.slice(0,b);e=e.slice(b);var l=d;a.length&&!a.endsWith("\n")&&(l="\n"+l);e.length&&!e.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:a+l+e,generated:l,standaloneImport:d,importedVarName:k,from:b,to:b+l.length}};Sh.ImportInjector=Ip;var bJ=function(){};bJ.getGlobals=function(a,d){a=d||Sh.fuzzyParse(a,{withComments:!0});d=(d=a.comments?a.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?
d.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var k=[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Sh.query.knownGlobals));a=Sh.query.findGlobalVarRefs(a,{jslintGlobalComment:!0}).filter(function(b){return!k.includes(b.name)}).map(function(b){return b.name});return Sh.arr.compact([].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(a)))};bJ.run=function(a,d,k){k=k||Sh.fuzzyParse(a,{withComments:!0});var b=(k=k.comments?
k.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?k.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],e=d.filter(function(l){return!b.includes(l)});if(!e.length)return{status:"not modified",newSource:a,generated:"",from:0,to:0};if(!k)return k="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:k+a,generated:k,from:0,to:k.length};d=k.start+2+k.text.length;e=e.join(",");b.length?e=","+e:k.text.startsWith("global ")||
(e=" "+e);k=d+e.length;return{status:"modified",newSource:a.slice(0,d)+e+a.slice(d),generated:e,from:d,to:k}};Sh.GlobalInjector=bJ;var IB=function(){};IB.removeImports=function(a,d,k){k=k||Sh.fuzzyParse(a);var b=Sh.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,importStmt:e}}):[]}).filter(function(e){return d.some(function(l){return l.local===e.local.name})});k=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});
a=Sh.arr.uniq(b.map(function(e){var l=e.importStmt.specifiers.find(function(p){return e.local===p.local});Sh.arr.remove(e.importStmt.specifiers,l);return e.importStmt})).slice().reverse().reduce(function(e,l){var p=e.source;e=e.changes;var q=l.start,u=l.end,w=l.specifiers,y=p.slice(0,q),A=p.slice(u);p=p.slice(q,u);(l=w.length?Sh.stringify(l):"")&&l.includes("\n")&&!p.includes("\n")&&(l=l.replace(/\s+/g," "));p=y+l+A;e=e.concat({replacement:l,start:q,end:u});return{source:p,changes:e}},{source:a,changes:[]});
return Object.assign({},a,{removedImports:k})};IB.findUnusedImports=function(a){var d="string"===typeof a?Sh.fuzzyParse(a):a;a=Sh.arr.flatmap(d.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var k=a.map(function(e){return e.local});d=Sh.query.resolveReferences(Sh.query.scopes(d));d=Array.from(d.resolvedRefMap.keys()).filter(function(e){return!k.includes(e)});var b=Sh.arr.uniq(d.map(function(e){return e.name}));
return a.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};IB.removeUnusedImports=function(a){var d=Sh.fuzzyParse(a);return this.removeImports(a,this.findUnusedImports(d),d)};Sh.ImportRemover=IB;var Fl=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");Fl.ensureParent=function(a,d,k){if(k)return k;k=a.id;var b=a.System;d=k.startsWith("file://")?k.replace("file://",""):k;if(k=b._nodeRequire("module").Module._cache[k])return k;
k={id:d,filename:d,paths:[]};(a=a.package())&&k.paths.push(Fl.resource(a.url).join("node_modules/").path());return k};Fl.relative=function(a,d){return Fl.resource(a.id).parent().join(d).url.replace("file://","")};Fl._require=yF;Fl._resolve=zF;Fl.resource=Dc;Fl._require=yF;Fl._require=yF;Fl._resolve=zF;Fl._resolve=zF;var me=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");me.module=eu;me.isModuleLoaded=AF;me.doesModuleExist=BF;me.arr=Ke;me.obj=df;me.graph=xq;me.parse=Bj;me.query=ro;
me.computeRequireMap=Vz;me.moduleSourceChange=Xz;me.scheduleModuleExportsChange=Wz;me.runScheduledExportChanges=oF;me.livelySystemEnv=IF;me.Package=Nh;me.isURL=du;me.emit=Xp;me.subscribe=My;me.defaultClassToFunctionConverterName="initializeES6ClassForLively";me.classRuntime=rx;me.ImportInjector=Ip;me.GlobalInjector=bJ;me.ImportRemover=IB;me._require=yF;me._resolve=zF;me.classHolder=Lq;var cJ=function(){var a=/['"]format (esm|es6)['"];/,d=/['"]format cjs['"];/,k=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):a.test(b.slice(0,5E3))||!d.test(b.slice(0,5E3))&&k.test(b)?"esm":d.test(b.slice(0,5E3))?"cjs":"global"}}();me.detectModuleFormat=cJ;me.detectModuleFormat=cJ;me.detectModuleFormat=cJ;me.classHolder.module=me.module;me.isModuleLoaded=AF;me.isModuleLoaded=AF;me.doesModuleExist=BF;me.doesModuleExist=BF;me.globalProps={initialized:!1,descriptors:{}};var rf=function(a,d){var k=this;if(!me.isURL(d)&&!/^@/.test(d))throw Error("ModuleInterface constructor called with "+
d+" that does not seem to be a fully normalized module id.");this.System=a;this.id=d;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;me.subscribe("lively.modules/modulechanged",function(b){b.module===k.id&&k.reset()})};rf.prototype.fullName=function(){return this.id};rf.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};rf.prototype.source=function(){var a=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(d){return a._source=d})};rf.prototype.setSource=function(a){this.sourceAccessorName&&this.recorderName&&a.includes("var "+this.recorderName)&&a.includes("var "+this.sourceAccessorName)||this._source===a||(this.reset(),this._source=a)};rf.prototype.ast=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(a._ast)return e.return(a._ast);d=a;k=me;b=k.parse;return e.yield(a.source(),2)}return e.return(d._ast=b.call(k,e.yieldResult))})};rf.prototype.scope=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return a._scope?k.return(a._scope):k.yield(a.ast(),2);d=k.yieldResult;return k.return(a._scope=me.query.topLevelDeclsAndRefs(d).scope)})};rf.prototype.resolvedScope=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(d=a,k=me.query,b=k.resolveReferences,e.yield(a.scope(),2)):e.return(d._scope=b.call(k,e.yieldResult))})};rf.prototype.metadata=function(){var a=this.System.loads?this.System.loads[this.id]:null;return a?a.metadata:null};rf.prototype.addMetadata=function(a){var d=this.System,k=this.id,b=this.metadata();a=b?Object.assign(b,a):a;b={};d.config({meta:(b[k]=a,b)});return d.meta[k]};rf.prototype.format=function(){var a=this.metadata();return a&&a.format?a.format:this._source?me.detectModuleFormat(this._source):
"global"};rf.prototype.setFormat=function(a){return this.addMetadata({format:a})};rf.prototype.reset=function(){this._scope=this._ast=this._source=null};rf.prototype.get=function(){return this.System.get(this.id)};rf.prototype.load=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k=d,b=k.id,e=k.System,a&&d.addMetadata(a),(l=e.get(b))?p.jumpTo(2):p.yield(e.import(b),3);2!=p.nextAddress&&(l=p.yieldResult);return p.return(l)})};
rf.prototype.isLoaded=function(){return!!this.System.get(this.id)};rf.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete me.livelySystemEnv(this.System).loadedModules[this.id]};rf.prototype.unloadDeps=function(a){var d=this;a=me.obj.merge({forgetDeps:!0,forgetEnv:!0},a);this.dependents().forEach(function(k){d.System.delete(k.id);d.System.loads&&delete d.System.loads[k.id];a.forgetEnv&&k.unloadEnv()})};rf.prototype.unload=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return a=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},a),k=d,b=k.System,e=k.id,a.reset&&d.reset(),a.forgetDeps&&d.unloadDeps(a),d.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],a.forgetEnv&&d.unloadEnv(),(l=b._livelyModulesTranslationCache)?p.yield(l.deleteCachedData(e),2):p.jumpTo(2);me.emit("lively.modules/moduleunloaded",{module:d.id},Date.now(),d.System);p.jumpToEnd()})};rf.prototype.reload=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(a=me.obj.merge({reloadDeps:!0,resetEnv:!0},a),k=[d],a.reloadDeps&&(k=d.dependents().concat(k)),b.yield(d.unload({forgetDeps:a.reloadDeps,forgetEnv:a.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(k.map(function(e){return e.id!==d.id&&e.load()})),3):b.yield(d.load(),0)})};rf.prototype.copyTo=function(a){var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return k=d.System.resource(a),b=k.write,u.yield(d.source(),3);if(2!=u.nextAddress)return u.yield(b.call(k,
u.yieldResult),2);e=d;l=e.System;p=me.module(l,a);q=me.obj.select(d,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(p,q);l.set(a,l.newModule(l.get(d.id)));return u.return(p)})};rf.prototype.renameTo=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return b=d,e=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,q.yield(k.copyTo(a),
2);case 2:p=q.yieldResult;if(!e){q.jumpTo(3);break}return q.yield(k.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){q.jumpTo(5);break}return q.yield(k.System.resource(k.id).remove(),5);case 5:return q.return(p)}})};rf.prototype.whenLoaded=function(a){if(this.isLoaded())try{a(this)}catch(d){console.error(d)}else me.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:a})};rf.prototype.changeSourceAction=function(a){var d=this;return Promise.resolve(this.source()).then(function(k){return a(k)}).then(function(k){return d.changeSource(k)})};
rf.prototype.changeSource=function(a,d){d=Object.assign({doSave:!0,doEval:!0},d);var k=this.System,b=this.id,e=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([d.doSave&&this.System.resource(b).write(a),d.doEval&&me.moduleSourceChange(k,b,a,e,d).then(function(p){return l=p})]).then(function(){return l})};rf.prototype.addDependencyToModuleRecord=function(a,d){var k=this;d=void 0===d?function(){}:d;var b=this.record(),e=a.record();if(b&&e){var l,p=b.dependencies.some(function(u,
w){if(u)return l=w,u&&u.name===a.id});p?e!==b.dependencies[l]&&b.dependencies.splice(l,1,e):b.dependencies.push(e);p&&b.setters[l]||(b.setters[p?l:b.dependencies.length-1]=d);var q;e.importers.some(function(u,w){if(u)return q=w,u&&u.name===k.id})?b!==e.importers[q]&&e.importers.splice(q,1,b):e.importers.push(b)}};rf.prototype.dependents=function(){var a=this;return me.graph.hull(me.graph.invert(me.computeRequireMap(this.System)),this.id).map(function(d){return me.module(a.System,d)})};rf.prototype.requirements=
function(){var a=this;return me.graph.hull(me.computeRequireMap(this.System),this.id).map(function(d){return me.module(a.System,d)})};rf.prototype.directRequirements=function(){var a=this,d=(this.record()||{}).dependencies||[];return me.arr.pluck(d.filter(Boolean),"name").map(function(k){return me.module(a.System,k)})};rf.prototype.isMochaTest=function(){if(!this._source)return!1;var a=this._scope||(this._scope=me.query.topLevelDeclsAndRefs(me.parse(this._source)).scope);return me.query.imports(a).map(function(d){return d.fromModule}).some(function(d){return d.endsWith("mocha-es6")||
d.endsWith("mocha-es6/index.js")})?!0:!1};rf.prototype.define=function(a,d,k,b){k=void 0===k?!0:k;var e=this.System,l=this.id,p=this.recorder,q=Symbol.for("lively-object-meta"),u=Symbol.for("lively-module-meta");"function"!==typeof d||!b||"function"!==b.kind&&"class"!==b.kind||(d[q]=b);d&&d[q]&&!d[u]&&(b=this.pathInPackage(),q=this.package(),d[u]={package:q?{name:q.name,version:q.version}:{},pathInPackage:b});p[a]=d;me.scheduleModuleExportsChange(e,l,a,d,!1);this.notifyTopLevelObservers(a);(k=k||
!this.isEvalutionInProgress())&&me.runScheduledExportChanges(e,l);return d};rf.prototype.undefine=function(a){delete this.recorder[a]};rf.prototype.subscribeToToplevelDefinitionChanges=function(a){this._observersOfTopLevelState.push(a);return a};rf.prototype.notifyTopLevelObservers=function(a){var d=this.recorder;me.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],a)||this._observersOfTopLevelState.forEach(function(k){return k(a,d[a])})};rf.prototype.unsubscribeFromToplevelDefinitionChanges=
function(a){this._observersOfTopLevelState="string"===typeof a?this._observersOfTopLevelState.filter(function(d){return d.name!==a}):this._observersOfTopLevelState.filter(function(d){return d!==a})};rf.prototype.evaluationStart=function(){this._evaluationsInProgress++};rf.prototype.evaluationEnd=function(){this._evaluationsInProgress--;me.runScheduledExportChanges(this.System,this.id)};rf.prototype.nextEvalId=function(){return this._evalId++};rf.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};rf.prototype.env=function(){return this};rf.prototype.package=function(){return me.Package.forModule(this.System,this)};rf.prototype.pathInPackage=function(){var a=this.package();return a&&0===this.id.indexOf(a.address)?this.id.slice(a.address.length).replace(/^\//,""):this.id};rf.prototype.imports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=me.query,k=d.imports,b.yield(a.scope(),2)):b.return(k.call(d,
b.yieldResult))})};rf.prototype.exports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=me.query,k=d.exports,b.yield(a.scope(),2)):b.return(k.call(d,b.yieldResult))})};rf.prototype.addImports=function(a){var d=this,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(d.source(),2);k=A.yieldResult;b=$jscomp.makeIterator(a);for(e=b.next();!e.done;e=b.next())l=e.value,p=
me.module(d.System,l.from||l.moduleId),q=p.package(),u={exported:l.exported||l.local,moduleId:p.id,packageName:q.name,packageURL:q.url,pathInPackage:p.pathInPackage()},w=l.local,y=me.ImportInjector.run(d.System,d.id,d.package(),k,u,w),k=y.newSource;return A.yield(d.changeSource(k),0)})};rf.prototype.addGlobalDeclaration=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(d.source(),2):3!=q.nextAddress?(k=q.yieldResult,b=me.GlobalInjector.run(k,
a),e=b.status,l=b.newSource,(p="modified"===e)?q.yield(d.changeSource(l),3):q.jumpTo(3)):q.return(p)})};rf.prototype.removeImports=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return a.length?p.yield(d.source(),2):p.return();case 2:return k=p.yieldResult,p.yield(me.ImportRemover.removeImports(k,a),3);case 3:return b=p.yieldResult,e=b.source,l=b.removedImports,p.yield(d.changeSource(e),4);case 4:l.forEach(function(q){return delete d.recorder[q.local]}),
p.jumpToEnd()}})};rf.prototype._localDeclForRefAt=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.resolvedScope(),2);k=e.yieldResult;b=me.query.refWithDeclAt(a,k);return e.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};rf.prototype._localDeclForName=function(a){var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.resolvedScope(),2);k=y.yieldResult;
e=$jscomp.makeIterator(k.resolvedRefMap.values());for(l=e.next();!l.done;l=e.next())if(q=p=l.value,u=q.ref,w=u.name,a===w){b=p;break}return y.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};rf.prototype._importForNSRefAt=function(a){var d=this,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(d.resolvedScope(),2);k=A.yieldResult;b=k.node;e=me.query.nodesAtIndex(b,a);if(2>e.length)return A.return([null,null]);l=e[e.length-1];p=
e[e.length-2];if("Identifier"!=l.type||"MemberExpression"!=p.type||p.computed||"Identifier"!==p.object.type)return A.return([null,null]);q=k.resolvedRefMap.get(p.object)||{};u=q.decl;if(!u||"ImportDeclaration"!==u.type)return A.return([null,null]);w=p.object.name;y=u.specifiers.find(function(C){return C.local.name===w});return A.return("ImportNamespaceSpecifier"!==y.type?[null,null]:[u,y.local,l.name])})};rf.prototype._resolveImportedDecl=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(!a)return w.return([]);
k=a.id;b=k.name;return w.yield(d.imports(),2);case 2:e=w.yieldResult;l=e.find(function(y){return y.local==b});if(!l){w.jumpTo(3);break}p=me.module(d.System,l.fromModule,d.id);q=[a];u=q.concat;return w.yield(p.bindingPathForExport(l.imported),4);case 4:return w.return(u.call(q,w.yieldResult));case 3:return w.return([a])}})};rf.prototype.bindingPathFor=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(d._localDeclForName(a),2):4!=
b.nextAddress?(k=b.yieldResult)?b.yield(d._resolveImportedDecl(k),4):b.jumpTo(0):b.return(b.yieldResult)})};rf.prototype.bindingPathForExport=function(a){var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(d.resolvedScope(),2);case 2:return u.yield(d.exports(),3);case 3:k=u.yieldResult;b=k.find(function(w){return w.exported===a});if(!b.fromModule)return u.return(d._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?d:null}));e=me.module(d.System,b.fromModule,d.id);l={decl:b.node,id:b.declId,declModule:d};p=[l];q=p.concat;return u.yield(e.bindingPathForExport(b.imported),5);case 5:return u.return(q.call(p,u.yieldResult))}})};rf.prototype.bindingPathForRefAt=function(a){var d=this,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return C.yield(d._localDeclForRefAt(a),2);case 2:k=C.yieldResult;if(!k){C.jumpTo(3);break}return C.yield(d._resolveImportedDecl(k),
4);case 4:return C.return(C.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,C.yield(d._importForNSRefAt(a),5);case 5:l=e.call(b,C.yieldResult);p=l.next().value;q=l.next().value;u=l.next().value;if(!p)return C.return([]);w=me.module(d.System,p.source.value,d.id);y=[{decl:p,declModule:d,id:q}];A=y.concat;return C.yield(w.bindingPathForExport(u),6);case 6:return C.return(A.call(y,C.yieldResult))}})};rf.prototype.definitionForRefAt=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(d.bindingPathForRefAt(a),2);k=b.yieldResult;return b.return(1>k.length?null:k[k.length-1].decl)})};rf.prototype.ensureRecord=function(){var a=this.System,d=a._loader.moduleRecords;return d[this.id]?d[this.id]:d[this.id]={name:this.id,exports:a.newModule({}),dependencies:[],importers:[],setters:[]}};rf.prototype.record=function(){var a=this.System._loader.moduleRecords[this.id];if(!a)return null;a.hasOwnProperty("__lively_modules__")||(a.__lively_modules__={evalOnlyExport:{}});
return a};rf.prototype.updateRecord=function(a){var d=this.record();if(!d)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");d.locked=!0;try{return a(d)}finally{d.locked=!1}};rf.prototype.search=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return d=Object.assign({excludedModules:[]},d),d.excludedModules.some(function(Y){return"string"===typeof Y?Y===k.id:Y instanceof
RegExp?Y.test(k.id):"function"===typeof Y?Y(k.id):!1})?T.return([]):T.yield(k.source(),2);b=T.yieldResult;a instanceof RegExp?(l="g",a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),e=RegExp(a.source,l)):e=RegExp(a,"g");for(q=[];null!==(p=e.exec(b));)q.push([p.index,p[0].length]);w=u=0;y=1;for(A=0;u<b.length&&w<q.length;u++)"\n"==b[u]&&(y++,A=u+1),C=$jscomp.makeIterator(q[w]),E=C.next().value,L=C.next().value,u===E&&(I=b.slice(A).indexOf("\n"),I=-1===I?b.length:I+A,V=k.package(),q[w]={moduleId:k.id,packageName:V?
V.name:void 0,pathInPackage:V?k.pathInPackage():k.id,isLoaded:k.isLoaded(),length:L,line:y,column:u-A,lineString:1E3<I-A?"..."+b.slice(u-10,u+100)+"...":b.slice(A,I)},w++);return T.return(q)})};rf.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(rf.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:me.GlobalInjector.getGlobals(this._source))).concat(me.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(a){return this._recorder=a},get:function(){if(this._recorder)return this._recorder;var a=this.System,d=this;if(!me.globalProps.initialized){me.globalProps.initialized=!0;for(var k in a.global)if(a.global.__lookupGetter__(k)||"closed"==k)me.globalProps.descriptors[k]={value:void 0,configurable:!0,
writable:!0}}k={};if(a.get("@system-env").node){var b=me._require.bind(null,this);b.resolve=me._resolve.bind(null,this);k.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(a.global,Object.assign({},me.globalProps.descriptors,{},k,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:a},b.__currentLivelyModule={value:d},b[me.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:me.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,l,p,q,u){u=u||{};u.kind=l;return d.define(e,p,!1,u)}},b._moduleExport={value:function(e,l){me.scheduleModuleExportsChange(a,d.id,e,l,!0)}},b._moduleImport={value:function(e,l){var p=a.decanonicalize(e,d.id),q=a.get(p);if(q){d.addDependencyToModuleRecord(me.module(a,p),function(u){return Object.assign(d.recorder,u)});if(void 0==l)return q;q.hasOwnProperty(l)||console.warn("import from "+q+": Has no export "+l+"!");return q[l]}console.warn("import of "+
l+" failed: "+e+" (tried as "+d.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});me.ModuleInterface=rf;me.default=eu;var Nd=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Nd.canonicalURL=function(a){var d=a.match(/([^:]+:\/\/)(.*)/);if(d){var k=d[1];a=d[2]}a=a.replace(/([^:])\/[\/]+/g,"$1/");return(k||"")+a};Nd.prepareNodejsCaching=function(){var a=System._nodeRequire("fs"),d=System._nodeRequire("path"),
k="win32"===Nd.process.platform;d=k||"/"!==Nd.process.cwd()?Nd.process.cwd():d.join(Nd.process.env.HOME,".lively.next");Nd.nodejsCacheDirURL=k?"file:///"+d.replace(/\\/g,"/"):"file://"+d;a.existsSync(d)||a.mkdirSync(d)};Nd.getExceptions=NN;Nd.setExceptions=ON;Nd.prepareCodeForCustomCompile=PN;Nd.prepareTranslatedCodeForSetterCapture=QN;Nd.getCachedNodejsModule=function(a,d){try{var k=a._nodeRequire("module").Module,b=k._resolveFilename(d.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return k._cache[b]}catch(e){a.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",d.name)}return null};Nd.addNodejsWrapperSource=function(a,d){var k=Nd.getCachedNodejsModule(a,d);if(k)return d.metadata.format="esm",d.source="var exports = System._nodeRequire('"+k.id+"'); export default exports;\n"+Nd.properties.allOwnPropertiesOrFunctions(k.exports).map(function(b){return Nd.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
a.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",d.name),!0;a.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",d.name);return!1};Nd.customTranslate=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:b=k;e=b.debug;if(p=(l=d.metadata)&&l.hasOwnProperty("instrument")&&!l.instrument||Nd.exceptions.some(function(P){return P(d.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",d.name),W.return(a(d));if(Nd.isNode&&Nd.addNodejsWrapperSource(b,d))return e&&console.log("[lively.modules] loaded %s from nodejs cache",d.name),W.return(a(d));q=Date.now();u=Nd.detectModuleFormat(d.source,l);w=Nd.module(b,d.name);y=!1;A="esm"===u;w.setSource(d.source);W.setCatchFinallyBlocks(2);C=b.useModuleTranslationCache;E=b.global.indexedDB;L=C&&String(Nd.string.hashCode(d.source));if(C&&E&&A)return I=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Nd.BrowserModuleTranslationCache),W.yield(I.fetchStoredModuleSource(d.name),8);if(!(Nd.isNode&&C&&A)){W.jumpTo(5);break}I=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.NodeModuleTranslationCache);return W.yield(I.fetchStoredModuleSource(d.name),7);case 7:if((V=W.yieldResult)&&V.hash==L&&V.timestamp>=Nd.NodeModuleTranslationCache.earliestDate&&V.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
d.name,Date.now()-q),W.return(Promise.resolve(V.source));W.jumpTo(5);break;case 8:if((V=W.yieldResult)&&V.hash==L&&V.timestamp>=Nd.BrowserModuleTranslationCache.earliestDate&&V.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",d.name,Date.now()-q),W.return(Promise.resolve(V.source));case 5:W.leaveTryBlock(3);break;case 2:T=W.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
T.stack);case 3:return Y={},A?(w.recorderName="__lvVarRecorder",w.recorder===b.global&&w.unloadEnv(),d.metadata.format="esm",na=Nd.prepareCodeForCustomCompile(b,d.source,d.name,w,e),Y=na.options,Ba=na.source,d.source=Ba,y=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",d.name)):"global"===d.metadata.format&&(w.recorderName="System.global",w.recorder=b.global,d.metadata.format="global",F=Nd.prepareCodeForCustomCompile(b,d.source,d.name,w,e),Y=
F.options,Ba=F.source,d.source=Ba,y=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",d.name)),y||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",d.name,d.metadata.format),W.return(a(d).then(function(P){var S,fa,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oa){switch(oa.nextAddress){case 1:0===P.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
d.name),P=Nd.prepareTranslatedCodeForSetterCapture(b,P,d.name,w,Y,e));if(Nd.isNode&&C&&A)return S=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.NodeModuleTranslationCache),oa.setCatchFinallyBlocks(8),oa.yield(S.cacheModuleSource(d.name,L,P),10);if(!(C&&E&&A)){oa.jumpTo(3);break}S=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Nd.BrowserModuleTranslationCache);oa.setCatchFinallyBlocks(5);return oa.yield(S.cacheModuleSource(d.name,L,P),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",d.name);oa.leaveTryBlock(3);break;case 5:fa=oa.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+fa.stack);oa.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",d.name);oa.leaveTryBlock(3);break;case 8:aa=oa.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+aa.stack);
case 3:return e&&console.log("[lively.modules customTranslate] done %s after %sms",d.name,Date.now()-q),oa.return(P)}})}))}})};Nd.instrumentSourceOfEsmModuleLoad=CF;Nd.instrumentSourceOfGlobalModuleLoad=DF;Nd.wrapModuleLoad=Zz;Nd.unwrapModuleLoad=EF;Nd.parse=Bj;Nd.nodes=Cq;Nd.isValidIdentifier=Tv;var mR=Nd.nodes;Nd.funcCall=mR.funcCall;Nd.member=mR.member;Nd.literal=mR.literal;Nd.evalCodeTransform=gr;Nd.evalCodeTransformOfSystemRegisterSetters=ot;Nd.arr=Ke;Nd.string=rg;Nd.properties=gm;Nd.module=
eu;Nd.detectModuleFormat=cJ;Nd.resource=Dc;Nd.installHook=Kr;Nd.removeHook=cu;Nd.isHookInstalled=Lr;Nd.classToFunctionTransform=uq;Nd.isNode=System.get("@system-env").node;var JB=function(){};JB.prototype.cacheModuleSource=function(a,d,k){throw Error("not yet implemented");};JB.prototype.fetchStoredModuleSource=function(a){throw Error("not yet implemented");};JB.prototype.deleteCachedData=function(a){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(JB,{earliestDate:{configurable:!0,
enumerable:!0,get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Nd.ModuleTranslationCache=JB;Nd.nodejsCacheDirURL=null;var Mq=function(){return Nd.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Mq,Nd.ModuleTranslationCache);Mq.prototype.ensurePath=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(d.moduleCacheDir.join(a).exists(),2);case 2:if(w.yieldResult)return w.return();
k="";l=$jscomp.makeIterator(a.split("/"));p=l.next();case 3:if(p.done){w.jumpTo(0);break}q=p.value;k+=q+"/";b=d.moduleCacheDir.join(k);return w.yield(b.exists(),6);case 6:if(w.yieldResult){w.jumpTo(7);break}w.setCatchFinallyBlocks(8);return w.yield(b.mkdir(),10);case 10:w.leaveTryBlock(7);break;case 8:if(u=w.enterCatchBlock(),"EEXIST"!=u.code)throw u;case 7:return b=Nd.resource("file://"+k+"/package.json"),w.yield(b.exists(),11);case 11:if(!w.yieldResult){w.jumpTo(4);break}return w.yield(b.read(),
13);case 13:return e=w.yieldResult,w.yield(d.moduleCacheDir.join(k+"/package.json").write(e),4);case 4:p=l.next(),w.jumpTo(3)}})};Mq.prototype.dumpModuleCache=function(){var a=this,d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:k=q.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(d=k.getNext())){q.jumpTo(0);break}b=Nd.resource("file://"+d);return q.yield(b.exists(),5);case 5:if(!q.yieldResult){q.jumpTo(2);break}e=a;l=e.cacheModuleSource;
p=d;return q.yield(b.read(),8);case 8:return q.yield(l.call(e,p,"NO_HASH",q.yieldResult),2)}})};Mq.prototype.getFileName=function(a){return a.match(/([^\/]*.)(\.js)?$/)[0]};Mq.prototype.fetchStoredModuleSource=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return a=a.replace("file://",""),k=d.getFileName(a),b=a.replace(k,""),e=d.moduleCacheDir.join(a),w.yield(e.exists(),2);case 2:return w.yieldResult?w.yield(e.stat(),
3):w.return(null);case 3:return l=w.yieldResult,p=l.birthtime,w.yield(e.read(),4);case 4:return q=w.yieldResult,w.yield(d.moduleCacheDir.join(b+"/.hash_"+k).read(),5);case 5:return u=w.yieldResult,w.return({source:q,timestamp:p,hash:u})}})};Mq.prototype.cacheModuleSource=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(a=a.replace("file://",""),e=b.getFileName(a),l=a.replace(e,""),p.yield(b.ensurePath(l),2)):3!=p.nextAddress?p.yield(b.moduleCacheDir.join(a).write(k),
3):p.yield(b.moduleCacheDir.join(l+"/.hash_"+e).write(d),0)})};Mq.prototype.deleteCachedData=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=a.replace("file://",""),k=d.getFileName(a),a.replace(k,""),b=d.moduleCacheDir.join(a),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Mq.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Nd.nodejsCacheDirURL||
Nd.prepareNodejsCaching();return Nd.resource(Nd.nodejsCacheDirURL+"/.module_cache/")}}});Nd.NodeModuleTranslationCache=Mq;var Nq=function(a){a=void 0===a?"lively.modules-module-translation-cache":a;var d=Nd.ModuleTranslationCache.call(this)||this;d.version=2;d.sourceCodeCacheStoreName="sourceCodeStore";d.dbName=a;d.db=d.openDb();return d};$jscomp.inherits(Nq,Nd.ModuleTranslationCache);Nq.prototype.openDb=function(){var a=this,d=System.global.indexedDB.open(this.version);return new Promise(function(k,
b){d.onsuccess=function(e){k(this.result)};d.onerror=function(e){return b(e.target)};d.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(a.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Nq.prototype.deleteDb=function(){var a=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(d,k){a.onerror=function(b){return k(b.target)};a.onsuccess=function(b){return d(b)}})};Nq.prototype.closeDb=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(a.db,2);d=b.yieldResult;k=d.close();return b.return(new Promise(function(e,l){k.onsuccess=function(p){e(this.result)};k.onerror=function(p){return l(p.target.errorCode)}}))})};Nq.prototype.cacheModuleSource=function(a,d,k){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);e=l.yieldResult;return l.return(new Promise(function(p,q){var u=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),w=u.objectStore(b.sourceCodeCacheStoreName),
y=Date.now();w.put({moduleId:a,hash:d,source:k,timestamp:y});u.oncomplete=p;u.onerror=q}))})};Nq.prototype.fetchStoredModuleSource=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName]).objectStore(d.sourceCodeCacheStoreName).get(a);p.onerror=l;p.onsuccess=function(q){return e(p.result)}}))})};Nq.prototype.deleteCachedData=
function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName],"readwrite").objectStore(d.sourceCodeCacheStoreName).delete(a);p.onerror=l;p.onsuccess=function(q){return e(p.result)}}))})};za("a6",Nq);Nd.BrowserModuleTranslationCache=Nq;Nd.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Nd.exceptions=[function(a){return!a.endsWith(".js")&&
!a.endsWith(".jsx")&&!a.startsWith("https://jspm.dev")},function(a){return a.endsWith("dist/acorn.js")||a.endsWith("dist/escodegen.browser.js")||a.endsWith("bowser.js")||a.endsWith("TweenMax.min.js")},function(a){return a.endsWith("babel-core/browser.js")||a.endsWith("system.src.js")||a.includes("systemjs-plugin-babel")}];Nd.pendingConfigs=[];Nd.configInitialized=!1;Nd.prepareCodeForCustomCompile=PN;Nd.prepareCodeForCustomCompile=PN;Nd.prepareTranslatedCodeForSetterCapture=QN;Nd.prepareTranslatedCodeForSetterCapture=
QN;Nd.wrapModuleLoad=Zz;Nd.wrapModuleLoad=Zz;Nd.unwrapModuleLoad=EF;Nd.unwrapModuleLoad=EF;Nd.getExceptions=NN;Nd.getExceptions=NN;Nd.setExceptions=ON;Nd.setExceptions=ON;Nd.instrumentSourceOfEsmModuleLoad=CF;Nd.instrumentSourceOfEsmModuleLoad=CF;Nd.instrumentSourceOfGlobalModuleLoad=DF;Nd.instrumentSourceOfGlobalModuleLoad=DF;var Yf=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");Yf.fetchResource=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:b=
k;e=25E4;l=b.resource(d.name);p=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!p){aa.jumpTo(2);break}return aa.yield(Yma(d.name),3);case 3:l=aa.yieldResult;case 2:if(!l)return aa.return(a(d));if(Yf.jsFileHashMap||b.get("@system-env").node){aa.jumpTo(4);break}w=Yf;return aa.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:w.jsFileHashMap=aa.yieldResult;case 4:y=b.useModuleTranslationCache;A=b.global.indexedDB;C=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!y||!A||!C){aa.jumpTo(6);break}return aa.yield(C.fetchStoredModuleSource(d.name),7);case 7:if((E=aa.yieldResult)&&(Yf.jsFileHashMap[d.name.replace(b.baseURL,"/")]==E.hash||d.name.includes("jspm")))return d.metadata.instrument=!1,aa.return(E.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return aa.return("");aa.setCatchFinallyBlocks(8);if(!l.isResource){L=l;aa.jumpTo(10);break}return aa.yield(l.read(),11);case 11:L=aa.yieldResult;case 10:q=L;aa.leaveTryBlock(9);break;case 8:u=I=
aa.enterCatchBlock();case 9:if(!u||!b.get("@system-env").browser){aa.jumpTo(12);break}V=l.url.startsWith("http");T=!l.url.startsWith(document.location.origin);if(!V||!T){aa.jumpTo(12);break}aa.setCatchFinallyBlocks(14);return aa.yield(l.makeProxied(b.baseURL).read(),16);case 16:q=aa.yieldResult;u=null;aa.leaveTryBlock(12);break;case 14:aa.enterCatchBlock();case 12:if(u)throw u;if(!p){aa.jumpTo(17);break}Y=q.headers||{};na=Y._headers;Ba=$jscomp.makeIterator(na&&na["content-encoding"]||[]);F=Ba.next().value;
return"br"==F?(W=Yf.Buffer,P=W.from,S=Yf.brotli,fa=S.decompress,aa.yield(q.buffer(),21)):aa.yield(q.text(),20);case 20:q=aa.yieldResult;aa.jumpTo(17);break;case 21:q=P.call(W,fa.call(S,aa.yieldResult)).toString();case 17:if(!(q.length>e&&$world)||b._loadingIndicator){aa.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:d.name.replace(b.baseURL,"")});return aa.yield(Yf.promise.delay(500),23);case 23:if(!b._loadingIndicator){aa.jumpTo(22);
break}return aa.yield(b._loadingIndicator.whenRendered(),22);case 22:return aa.return(q)}})};Yf.livelyProtocol=function(a,d){var k=d.match(Yf.livelyURLRe);if(!k)return a(d);a=$jscomp.makeIterator(k);a.next();a.next();var b=a.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+
b);l.textString=e;return Promise.resolve(this)}}};Yf.wrapResource=FF;Yf.unwrapResource=RN;Yf.resource=Dc;Yf.Resource=zf;Yf.installHook=Kr;Yf.removeHook=cu;Yf.isHookInstalled=Lr;Yf.brotli=Yf.brotli||void 0;if(System.get("@system-env").node){var Yma=System._nodeRequire("node-fetch");Yf.brotli=System._nodeRequire("brotli")}Yf.jsFileHashMap=Yf.jsFileHashMap||void 0;Yf.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;Yf.wrapResource=FF;Yf.wrapResource=FF;Yf.unwrapResource=RN;Yf.unwrapResource=RN;var Ru=function(){return Yf.Resource.apply(this,
arguments)||this};$jscomp.inherits(Ru,Yf.Resource);Ru.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=a.morphId;k="undefined"!==typeof $world&&$world.getMorphWithId(d);return b.return(Promise.resolve(k?k.textString:"/*Could not locate "+d+"*/"))})};Ru.prototype.write=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){k=d.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(k);if(!b)return e.return(Promise.reject("Could not save morph "+
k));b.textString=a;return e.return(Promise.resolve(d))})};Ru.prototype.exists=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return("undefined"!==typeof $world&&$world.getMorphWithId(a.morphId))})};Ru.prototype.remove=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){"undefined"!==typeof $world&&$world.getMorphWithId(a.morphId).remove();return d.return(!0)})};$jscomp.global.Object.defineProperties(Ru.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(Yf.livelyURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}}});Yf.LivelyResource=Ru;var nR={name:"lively.modules",matches:function(a){return a.match(Yf.livelyURLRe)},resourceClass:Yf.LivelyResource};Yf.resourceExtension=nR;Yf.resourceExtension=nR;Yf.resourceExtension=nR;Yf.registerExtension=Hd;Yf.promise=Vf;Yf.registerExtension(Yf.resourceExtension);var ed=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
ed.wrapModuleResolution=GF;ed.unwrapModuleResolution=HF;ed.livelySystemEnv=IF;ed.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};ed.nameOfSystem=function(a){return Object.keys(ed.systems()).detect(function(d){return ed.systems()[d]===a})};ed.getSystem=fu;ed.removeSystem=gu;ed.makeSystem=function(a){return ed.prepareSystem(new System.constructor,a)};ed.prepareSystem=JF;ed.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(a,d){var k=d.split("=");d=k[0];k=k[1];"true"===k||"false"===k?k=eval(k):isNaN(Number(k))||(k=Number(k));a[d]=k;return a},{}):{}};ed.preNormalize=function(a,d,k){".."===d&&(d="../index.js");d=d.replace(ed.doubleSlashRe,function(q){return":"===q[0]?q:q[0]+"/"});var b=a.get("@lively-env").packageRegistry;if(b){var e=k&&b.findPackageHavingURL(k);if(e){var l=e.map,p=e.url;if(l=l&&l[d]||a.map[d])"object"===typeof l&&(l=ed.normalize_doMapWithObject(l,
e,a)),"string"===typeof l&&""!==l&&(d=l),d.startsWith(".")&&(d=ed.urlResolve(ed.join(p,d)))}}b&&(a=b.resolvePath(d,k))&&(a.endsWith("/")&&!d.endsWith("/")&&(a=a.slice(0,-1)),!a.endsWith("/")&&d.endsWith("/")&&(a+="/"),d=a);return d};ed.postNormalize=function(a,d,k){k=d.replace(ed.jsExtRe,"");if(d.endsWith("/"))return d;var b=a.get("@lively-env").packageRegistry;if(b){if(b=b.findPackageWithURL(k))return b=(b.main||"index.js").replace(ed.dotSlashStartRe,""),a=k.replace(ed.trailingSlashRe,"")+"/"+b}else if(k in
a.packages&&(b=a.packages[k].main))return a=k.replace(ed.trailingSlashRe,"")+"/"+b.replace(ed.dotSlashStartRe,"");k=d.match(ed.jsonJsExtRe);a.debug&&console.log(">> [postNormalize] "+(k?k[1]:d));return k?k[1]:d};ed.checkExistence=function(a,d){var k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:d._fileCheckMap=d._fileCheckMap||{};if(a in d._fileCheckMap)return p.return(d._fileCheckMap[a]);k=d._livelyModulesTranslationCache;if(!(b=k)){p.jumpTo(2);
break}return p.yield(k.fetchStoredModuleSource(a),3);case 3:b=p.yieldResult;case 2:if(b)return p.return(d._fileCheckMap[a]=!0);e=d._fileCheckMap;l=a;return p.yield(ed.resource(a).exists(),4);case 4:return p.return(e[l]=p.yieldResult)}})};ed.normalizeHook=function(a,d,k,b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(k&&"cjs"==d)return A.return("cjs");l=e;p=ed.preNormalize(l,d,k);return A.yield(a(p,k,b),2);case 2:q=A.yieldResult;
u=ed.postNormalize(l,q||p,!1);w=u.startsWith("file:");l.debug&&console.log("[normalize] "+d+" => "+u);if(ed.jsExtRe.test(d)||ed.jsxExtRe.test(d)||ed.jsonExtRe.test(u)||ed.nodeModRe.test(u)||ed.nodeExtRe.test(u)||l.loads&&l.loads[u]){A.jumpTo(3);break}if(ed.jsExtRe.test(u))return A.yield(ed.checkExistence(u,l),9);if(u.includes("jspm.dev")||"@empty"==u){A.jumpTo(3);break}return A.yield(ed.checkExistence(u+".js",l),7);case 7:return A.yieldResult?A.return(u+".js"):A.yield(ed.checkExistence(u+"/index.js",
l),8);case 8:if(A.yieldResult)return A.return(u+"/index.js");A.jumpTo(3);break;case 9:if(A.yieldResult)return A.return(u);y=u.replace(".js","/index.js");return A.yield(ed.checkExistence(y,l),10);case 10:return A.yieldResult||!w?A.return(y):A.return(u.replace(".js","/index.node"));case 3:return ed.jsxJsExtRe.test(u)&&(u=u.replace(".jsx.js",".jsx")),A.return(u)}})};ed.decanonicalizeHook=function(a,d,k,b){if(d&&d.endsWith("!cjs")){d=d.replace("!cjs","");var e="!cjs"}var l=ed.preNormalize(this,d,k);a=
a(l,k,b);a=ed.postNormalize(this,a,!0);e&&(a+=e);this.debug&&console.log("[normalizeSync] "+d+" => "+a);return a};ed.locateHook=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return k=$jscomp.makeIterator(d.name.split("!")),b=k.next().value,k.next(),d.name=b,l.yield(a(d),2);e=l.yieldResult;return l.return(e)})};ed.normalize_doMapWithObject=function(a,d,k){d=k.get(d.map["@env"]||"@system-env");var b;for(b in a){var e=(k="~"==b[0])?b.substr(1):
b,l=d;for(e=e.split(".");e.length;)l=l[e.shift()];if(!k&&l||k&&!l){var p=a[b];break}}if(p&&"string"!==typeof p)throw Error("Unable to map a package conditional to a package conditional.");return p};ed.normalize_packageOfURL=function(a,d){var k=Object.keys(d.packages||{}).map(function(b){return 0===a.indexOf(b)?{url:b,penalty:a.slice(b.length).length}:null}).filter(function(b){return!!b});return(d=(k=k.length?k.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&d.packages[k])?{systemPackage:d,
packageURL:k}:null};ed.newModule_volatile=function(a,d){var k=Object.freeze;Object.freeze=function(b){return b};a=a(d);Object.freeze=k;return a};ed.printSystemConfig=KF;ed.instantiate_triggerOnLoadCallbacks=function(a,d){var k=this;return a(d).then(function(b){var e={};ed.promise.waitFor(6E4,function(){return k.get(d.name)},e).then(function(l){if(l===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+d.name+" timed out");else{l=d.name;for(var p=ed.classHolder.module(k,l),q=
k.get("@lively-env").onLoadCallbacks,u=q.length;u--;){var w=q[u],y=w.moduleName,A=w.callback;if((w.resolved?y:k.decanonicalize(y))===l){q.splice(u,1);try{A(p)}catch(C){console.error(C)}}}ed.emit("lively.modules/moduleloaded",{module:d.name},Date.now(),k);k._loadingIndicator&&(k._loadingIndicator.remove(),k._loadingIndicator=null)}});return b})};ed.whenLoaded=LF;ed.loadedModules=MF;ed.knownModuleNames=NF;ed.searchLoadedModules=SN;ed.arr=Ke;ed.obj=df;ed.promise=Vf;ed.removeHook=cu;ed.installHook=Kr;
ed.isHookInstalled=Lr;ed.classHolder=Lq;ed.isNode=System.get("@system-env").node;ed.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;ed.defaultOptions={notificationLimit:null};ed.wrapModuleResolution=GF;ed.wrapModuleResolution=GF;ed.unwrapModuleResolution=HF;ed.unwrapModuleResolution=HF;ed.wrapModuleLoad=Zz;ed.wrapResource=FF;ed.emit=Xp;ed.join=HB;ed.urlResolve=pF;ed.resource=Dc;ed.dotSlashStartRe=/^\.?\//;ed.trailingSlashRe=/\/$/;
ed.jsExtRe=/\.js$/;ed.jsxExtRe=/\.jsx$/;ed.nodeExtRe=/\.node$/;ed.jsonExtRe=/\.json$/;ed.jsonJsExtRe=/(.*\.json)\.js$/i;ed.jsxJsExtRe=/(.*\.jsx)\.js$/i;ed.doubleSlashRe=/.\/{2,}/g;ed.nodeModRe=/@node.*/;ed.whenLoaded=LF;ed.whenLoaded=LF;ed.getSystem=fu;ed.getSystem=fu;ed.removeSystem=gu;ed.removeSystem=gu;ed.prepareSystem=JF;ed.prepareSystem=JF;ed.printSystemConfig=KF;ed.printSystemConfig=KF;ed.livelySystemEnv=IF;ed.livelySystemEnv=IF;ed.loadedModules=MF;ed.loadedModules=MF;ed.knownModuleNames=NF;
ed.knownModuleNames=NF;ed.searchLoadedModules=SN;ed.searchLoadedModules=SN;var Jf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Jf.isAbsolute=function(a){return a.startsWith("/")||a.startsWith("http:")||a.startsWith("https:")||a.startsWith("file:")||a.match(Jf.urlStartRe)};Jf.ensureResource=function(a){return a.isResource?a:Jf.resource(a)};Jf.semver=UA;Jf.arr=Ke;Jf.obj=df;Jf.promise=Vf;Jf.getPackage=Yz;Jf.Package=Nh;Jf.resource=Dc;Jf.isURL=du;Jf.classHolder=
Lq;Jf.urlStartRe=/^[a-z\.-_\+]+:/i;var lh=function(a,d){d=void 0===d?{}:d;this.System=a;this.packageBaseDirs=d.packageBaseDirs||[];this.devPackageDirs=d.devPackageDirs||[];this.individualPackageDirs=d.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};lh.ofSystem=function(a){var d=a.get("@lively-env").packageRegistry;d||(d=a["__lively.modules__packageRegistry"]=new this(a));return d};lh.forDirectory=function(a,d){return new this(a,{packageBaseDirs:[Jf.ensureResource(d)]})};
lh.fromJSON=function(a,d){return(new this(a)).fromJSON(d)};lh.prototype.resetByURL=function(){this._byURL=null};lh.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};lh.prototype.toJSON=function(){function a(y){y=y.url;return y.startsWith(d.baseURL)?y.slice(d.baseURL.length).replace(/^\//,""):y}var d=this.System,k=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,l=this.packageBaseDirs,p={},q;for(q in k){var u=k[q];p[q]={};p[q].latest=u.latest;p[q].versions={};for(var w in u.versions)p[q].versions[w]=
u.versions[w].toJSON()}return{packageMap:p,individualPackageDirs:b.map(a),devPackageDirs:e.map(a),packageBaseDirs:l.map(a)}};lh.prototype.fromJSON=function(a){function d(y){return Jf.isURL(y)?Jf.resource(y):Jf.resource(b.baseURL).join(y)}var k={},b=this.System,e=Jf.resource(b.baseURL),l;for(l in a.packageMap){var p=a.packageMap[l];k[l]={};k[l].latest=p.latest;k[l].versions={};for(var q in p.versions){var u=p.versions[q],w=u.url;Jf.isAbsolute(w)||(w=e.join(w).url);u=Jf.Package.fromJSON(b,Object.assign({},
u,{url:w}));k[l].versions[q]=u}}this.packageMap=k;this.individualPackageDirs=a.individualPackageDirs.map(d);this.devPackageDirs=a.devPackageDirs.map(d);this.packageBaseDirs=a.packageBaseDirs.map(d);this.resetByURL();Jf.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};lh.prototype.updateFromJSON=function(a){var d=this.packageMap,k;for(k in a.packageMap){var b=a.packageMap[k];d[k]||(d[k]={});d[k].latest?Jf.semver.gt(b.latest,d[k].latest)&&(d[k].latest=b.latest):d[k].latest;d[k].versions||
(d[k].versions={});var e=this.System,l=Jf.resource(e.baseURL),p;for(p in b.versions){var q=b.versions[p],u=q.url;Jf.isAbsolute(u)||(u=l.join(u).url);q=new Jf.Package.fromJSON(e,Object.assign({},q,{url:u}));d[k].versions[p]=q}}this.resetByURL();Jf.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};lh.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};lh.prototype.isReady=function(){return!this._readyPromise};lh.prototype.withPackagesDo=function(a){for(var d in this.packageMap){var k=
this.packageMap[d].versions,b;for(b in k)a(k[b])}};lh.prototype.findPackage=function(a){for(var d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k){var e=k[b];if(a(e))return e}}return null};lh.prototype.filterPackages=function(a){var d=[];this.withPackagesDo(function(k){return a(k)&&d.push(k)});return d};lh.prototype.allPackages=function(){var a=[],d;for(d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k)a.push(k[b])}return a};lh.prototype.sortPackagesByVersion=
function(a){return a.sort(function(d,k){return Jf.semver.compare(d.version,k.version,!0)})};lh.prototype.matches=function(a,d,k){var b=a.version;return a.name!==d?!1:!k||Jf.semver.validRange(b||"",!0)&&Jf.semver.satisfies(b,k,!0)?!0:!1};lh.prototype.coversDirectory=function(a){a=Jf.ensureResource(a).asDirectory();var d=this.packageBaseDirs,k=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(a)}))return"individualPackageDirs";if(k.some(function(e){return e.equals(a)}))return"devPackageDirs";
var b=a.parent().parent();return d.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return Jf.ensureResource(e.url).equals(a)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};lh.prototype.lookup=function(a,d){var k=this,b=this.packageMap[a];if(!b)return null;if(!d||"latest"===d)return b.versions[b.latest];if(!Jf.semver.validRange(d,!0))throw Error("PackageRegistry>>lookup of "+a+": Invalid version - "+d);b=Jf.obj.values(b.versions).filter(function(e){return k.matches(e,
a,d)});return 1>=b.length?b[0]:Jf.arr.last(this.sortPackagesByVersion(b))};lh.prototype.findPackageDependency=function(a,d,k){k||(k=a.dependencies[d]||a.devDependencies[d]);Jf.semver.validRange(k,!0)||(k=null);return this.lookup(d,k)};lh.prototype.findPackageWithURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&(a=a.slice(0,-1));return this.byURL[a]};lh.prototype.findPackageHavingURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&(a=a.slice(0,-1));var d=Infinity,k=null,b=this.byURL,e;
for(e in b)if(0===a.indexOf(e)){var l=a.slice(e.length).length;l>=d||(d=l,k=b[e])}return k};lh.prototype.findPackageForPath=function(a,d){if(Jf.isAbsolute(a))return this.findPackageHavingURL(a);if(a.startsWith("."))return null;a=$jscomp.makeIterator(a.split("/")).next().value;if(!a)return null;var k=a.indexOf("@");if(-1<k){var b=a.slice(k+1);a=a.slice(0,k)}return!b&&d?this.findPackageDependency(d,a):this.lookup(a,b)};lh.prototype.resolvePath=function(a,d){if(Jf.isAbsolute(a))return a;var k=d&&d.isPackage||
null;if(!k&&d){if(a.startsWith("."))return d=Jf.resource(d),d.isDirectory()||(d=d.parent()),d.join(a).withRelativePartsResolved().url;k=this.findPackageHavingURL(d)}d=this.findPackageForPath(a,k);if(!d)return null;k=a.indexOf("/");return(a=-1===k||k===a.length-1?"":a.slice(k))?Jf.resource(d.url).join(a).url:d.url};lh.prototype.update=function(){var a=this,d,k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){switch(aa.nextAddress){case 1:if(!a.isReady())return aa.return(a.whenReady().then(function(){return a.update()}));
d=Jf.promise.deferred();a._readyPromise=d.promise;a.packageBaseDirs=a.packageBaseDirs.map(function(oa){return oa.asDirectory()});a.individualPackageDirs=a.individualPackageDirs.map(function(oa){return oa.asDirectory()});a.devPackageDirs=a.devPackageDirs.map(function(oa){return oa.asDirectory()});k={};aa.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(a.packageBaseDirs);e=b.next();case 5:if(e.done){aa.jumpTo(7);break}l=e.value;p=$jscomp;q=p.makeIterator;return aa.yield(l.dirList(1),8);case 8:u=q.call(p,
aa.yieldResult),w=u.next();case 9:if(w.done){e=b.next();aa.jumpTo(5);break}y=w.value;A=$jscomp;C=A.makeIterator;return aa.yield(y.dirList(1),12);case 12:E=C.call(A,aa.yieldResult.filter(function(oa){return oa.isDirectory()})),L=E.next();case 13:if(L.done){w=u.next();aa.jumpTo(9);break}I=L.value;return aa.yield(a._discoverPackagesIn(I,k,"packageCollectionDirs"),16);case 16:k=aa.yieldResult;L=E.next();aa.jumpTo(13);break;case 7:V=$jscomp.makeIterator(a.individualPackageDirs),e=V.next();case 17:if(e.done){aa.jumpTo(19);
break}T=e.value;return aa.yield(a._discoverPackagesIn(T,k,"individualPackageDirs"),20);case 20:k=aa.yieldResult;e=V.next();aa.jumpTo(17);break;case 19:Y=$jscomp.makeIterator(a.devPackageDirs),e=Y.next();case 21:if(e.done){aa.jumpTo(23);break}na=e.value;return aa.yield(a._discoverPackagesIn(na,k,"devPackageDirs"),24);case 24:k=aa.yieldResult;e=Y.next();aa.jumpTo(21);break;case 23:for(Ba in k)F=k[Ba],W=F.pkg,P=F.config,S=F.covered,a.System.debug&&console.log("[PackageRegistry] Adding discovered package "+
Ba+" (from "+S+")"),a._addPackageWithConfig(W,P,Ba+"/",S);a._updateLatestPackages();d.resolve();case 3:aa.enterFinallyBlock();a._readyPromise=null;a.resetByURL();Jf.classHolder.ModulePackageMapping.forSystem(a.System).clearCache();aa.leaveFinallyBlock(4);break;case 2:fa=aa.enterCatchBlock();d.reject(fa);aa.jumpTo(3);break;case 4:return aa.return(a)}})};lh.prototype.addPackageAt=function(a,d,k){d=void 0===d?"individualPackageDirs":d;var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){e=a.isResource?a.url:a;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return A.yield(b._discoverPackagesIn(Jf.ensureResource(a).asDirectory(),{},void 0,k),2)}l=A.yieldResult;for(p in l)b.byURL[p]||(q=l[p],u=q.pkg,w=q.config,y=b._addPackageDir(p,d,!0),b._addPackageWithConfig(u,w,p+"/",y));b.resetByURL();Jf.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return A.return(b.findPackageWithURL(a))})};
lh.prototype.removePackage=function(a,d){d=void 0===d?!0:d;var k=a.name,b=a.version,e=Jf.ensureResource(a.url),l=this.coversDirectory(e);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(p){return!p.equals(e)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(p){return!p.equals(e)}));l=this.packageMap;l[k]&&(delete l[k].versions[b],0===Object.keys(l[k].versions).length&&delete l[k]);this.resetByURL();Jf.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
d&&this._updateLatestPackages(a.name)};lh.prototype.updateNameAndVersionOf=function(a,d,k,b,e){var l=this.packageMap;l[d]?l[d].versions[k]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+k+" of "+d+" found in registry ("+a.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+d+"@"+k+" not found in registry ("+a.url+")");this._addToPackageMap(a,b,e);l[d]&&l[d].versions[k]&&(delete l[d].versions[k],0===Object.keys(l[d].versions).length&&delete l[d]);this._updateLatestPackages(a.name)};
lh.prototype._updateLatestPackages=function(a){var d=this.packageMap;if(a&&d[a])d[a].latest=Jf.arr.last(Jf.semver.sort(Object.keys(d[a].versions),!0));else for(var k in d)d[k].latest=Jf.arr.last(Jf.semver.sort(Object.keys(d[k].versions),!0))};lh.prototype._discoverPackagesIn=function(a,d,k,b){b=void 0===b?null:b;var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){if(!a.isDirectory())return A.return(d);l=a.asFile().url;if(d.hasOwnProperty(l))return A.return(d);
A.setCatchFinallyBlocks(2);p=b&&b[l]||new Jf.Package(e.System,l);return A.yield(p.tryToLoadPackageConfig(),4)}if(2!=A.nextAddress)return q=A.yieldResult,p.setConfig(q),d[l]={pkg:p,config:q,covered:k},e.System.debug&&(u=q,w=u.name,y=u.version,console.log("[lively.modules] package "+w+"@"+y+" discovered in "+a.url)),A.return(d);A.enterCatchBlock();return A.return(d)})};lh.prototype._addToPackageMap=function(a,d,k,b){if(!d)throw Error("Cannot add package without name");k||(k="0.0.0");var e=this.packageMap;
d=e[d]||(e[d]={versions:{},latest:null});if(d.versions[k])if(e="Redefining version "+k+" of package "+a.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");d.versions[k]=a};lh.prototype._addPackageWithConfig=function(a,d,k,b){(void 0===b?0:b)||this._addPackageDir(k,"individualPackageDirs",!0);a.registerWithConfig(d);this._addToPackageMap(a,a.name,a.version);return a};lh.prototype._addPackageDir=function(a,d,k){d=void 0===d?"individualPackageDirs":d;k=void 0===k?!0:k;a=Jf.ensureResource(a).asDirectory();
if(("packageCollectionDirs"===d||"maybe packageCollectionDirs"===d)&&(this.coversDirectory(a)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";a=this[d].concat(a);this[d]=k?Jf.arr.uniqBy(a,function(b,e){return b.equals(e)}):a;return d};$jscomp.global.Object.defineProperties(lh.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var a=$jscomp.makeIterator(this.allPackages()),d=a.next();!d.done;d=a.next())d=d.value,this._byURL[d.url]=
d}return this._byURL}}});Jf.PackageRegistry=lh;var Ok=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");Ok.arr=Ke;Ok.obj=df;Ok.subscribe=My;Ok.unsubscribe=rK;Ok.module=eu;var gl=function(a){this.System=a;this.subscribeToSystemChanges()};gl.forSystem=function(a){this._forSystemMap||(this._forSystemMap=new WeakMap);var d=this._forSystemMap.get(a);if(d)return d;d=new this(a);this._forSystemMap.set(a,d);return d};gl.run=function(a,d){a=void 0===a?System:a;return this.forSystem(a).systemExports(d)};
gl.findExportOfValue=function(a,d){d=void 0===d?System:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.run(d),2);b=e.yieldResult;return e.return(b.find(function(l){var p=l.local;l=Ok.module(d,l.moduleId);l=l.recorder||d.get(l.id)||{};try{return l[p]===a}catch(q){return!1}}))})};gl.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[Ok.subscribe("lively.modules/moduleloaded",
function(k){return a.clearCacheFor(k.module)},d),Ok.subscribe("lively.modules/modulechanged",function(k){return a.clearCacheFor(k.module)},d),Ok.subscribe("lively.vm/doitresult",function(k){return a.clearCacheFor(k.targetModule)},d)]}};gl.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;Ok.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);Ok.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],a);Ok.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],a);this._notificationHandlers=null}};gl.prototype.clearCacheFor=function(a){this.exportByModuleCache[a]=null};gl.prototype.systemExports=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.rawExportsByModule(a),2);k=b.yieldResult;Object.keys(k).forEach(function(e){return d.resolveExportsOfModule(e,k)});return b.return(Ok.arr.flatmap(Object.keys(k),function(e){return k[e]?k[e].resolvedExports||k[e].rawExports:
[]}))})};gl.prototype.rawExportsByModule=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=a||{},k=d.System,b=k.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),l={},p=function(u){1>u%50&&a.progress.step&&a.progress.step("Scanning ...",u/e.length)},q.yield(Promise.all(e.map(function(u,w){a.progress&&p(w);return d.rawExportsOfModule(u,a,l).then(function(y){return y?l[u]=y:null})})),2)):q.return(l)})};gl.prototype.rawExportsOfModule=
function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:b=k;e=b.System;l=b.exportByModuleCache;p=d.excludedPackages||[];q=d.excludedURLs||(d.excludedURLs=p.filter(function(aa){return"string"===typeof aa}));u=d.excludeFns||(d.excludeFns=p.filter(function(aa){return"function"===typeof aa}));w=d.excludedPackageURLs||(d.excludedPackageURLs=q.concat(q.map(function(aa){return e.decanonicalize(aa.replace(/\/?$/,
"/")).replace(/\/$/,"")})));y=d.livelyEnv||(d.livelyEnv=e.get("@lively-env")||{});d.modes||(d.modes=Object.keys(y.loadedModules||{}));if(l[a])return A=l[a].rawExports,fa.return(w.includes(A.packageURL)||u.some(function(aa){return aa(A.packageURL)})?null:l[a]);C=Ok.module(e,a);E=C.pathInPackage();I=(L=C.package())&&L.main&&E===L.main;V=L?L.url:"";T=L?L.name:"";Y=L?L.version:"";na={moduleId:a,isMain:I,pathInPackage:E,packageName:T,packageURL:V,packageVersion:Y,exports:[]};if(w.includes(V)||u.some(function(aa){return aa(V)}))return fa.return(null);
fa.setCatchFinallyBlocks(2);Ba=C.format();return["register","es6","esm"].includes(Ba)?(P=na,fa.yield(C.exports(),7)):fa.yield(C.load(),6);case 6:F=fa.yieldResult;na.exports=[];for(W in F)"__useDefault"!==W&&"default"!==W&&na.exports.push({exported:W,local:W,type:"id"});fa.jumpTo(5);break;case 7:P.exports=fa.yieldResult;case 5:fa.leaveTryBlock(3);break;case 2:S=fa.enterCatchBlock(),na.error=S;case 3:return fa.return(l[a]={rawExports:na})}})};gl.prototype.resolveExportsOfModule=function(a,d,k){var b=
this;k=void 0===k?{}:k;if(!k[a]){k[a]=!0;var e=d[a];if(e&&!e.resolvedExports){var l=this.System,p=Ok.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=Ok.arr.flatmap(e.rawExports.exports,function(q){var u=q.type,w=q.exported,y=q.local,A=q.fromModule;if("all"!==u)return[Object.assign({},p,{type:u,exported:w,local:y,fromModule:A})];q=l.decanonicalize(A,a);b.resolveExportsOfModule(q,d,k);return(d[q]&&d[q].resolvedExports||[]).map(function(C){return Object.assign({},
p,{type:C.type,exported:C.exported,local:C.local,fromModule:C.fromModule||A})})});k[a]=!1}}};$jscomp.global.Object.defineProperties(gl.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});za("E",gl);Ok.ExportLookup=gl;Ok.default=gl;var ik=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");ik.buildPackageMap=$z;ik.resolvePackageDependencies=OF;ik.dependencyGraph=PF;ik.arr=Ke;ik.fun=Qj;
ik.promise=Vf;ik.obj=df;ik.resource=Dc;ik.buildPackageMap=$z;ik.buildPackageMap=$z;ik.resolvePackageDependencies=OF;ik.resolvePackageDependencies=OF;ik.dependencyGraph=PF;ik.dependencyGraph=PF;var dJ=Object.freeze({__proto__:null,buildPackageMap:$z,resolvePackageDependencies:OF,dependencyGraph:PF}),Pk=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");Pk.arr=Ke;Pk.unsubscribe=rK;Pk.subscribe=My;Pk.knownModuleNames=NF;Pk.classHolder=Lq;var In=function(a){this.System=
a;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};In.forSystem=function(a){var d=a["__lively.modules__modulePackageMapCache"];if(d)return d;d=new this(a);return a["__lively.modules__modulePackageMapCache"]=d};In.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[Pk.subscribe("lively.modules/moduleloaded",function(k){return a.addModuleIdToCache(k.module)},d),Pk.subscribe("lively.modules/moduleunloaded",
function(k){return a.removeModuleFromCache(k.module)},d),Pk.subscribe("lively.modules/packageregistered",function(k){return a.clearCache()},d),Pk.subscribe("lively.modules/packageremoved",function(k){return a.clearCache()},d)]}};In.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;Pk.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);Pk.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],a);Pk.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],a);Pk.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],a);this._notificationHandlers=null}};In.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};In.prototype.ensureCache=function(){var a=this.System,d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=Pk.classHolder.Package.allPackageURLs(a),
l=0;l<e.length;l++)d[e[l]]=[];a=Pk.knownModuleNames(a);for(l=0;l<a.length;l++){for(var p=a[l],q=void 0,u=0;u<e.length;u++){var w=e[u];p.startsWith(w)&&(!q||q.length<w.length)&&(q=w)}q?(d[q].push(p),k[p]=q):b[p]={}}this._cacheInitialized=!0;return this};In.prototype.addModuleIdToCache=function(a){this.ensureCache();var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(k[a])return k[a];if(b[a])return null;for(var e=Object.keys(d),l,p=0;p<e.length;p++){var q=e[p];a.startsWith(q)&&
(!l||l.length<q.length)&&(l=q)}if(l)return(d[l]||(d[l]=[])).push(a),k[a]=l;b[a]={};return null};In.prototype.removeModuleFromCache=function(a){if(this._cacheInitialized){var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(a))delete b[a];else if(b=k[a])delete k[a],d[b]&&Pk.arr.remove(d[b],a)}};In.prototype.getPackageURLForModuleId=function(a){return this.modulesToPackage[a]||this.addModuleIdToCache(a)};In.prototype.getModuleIdsForPackageURL=function(a){this.ensureCache();
return this.packageToModule[a]||[]};Pk.ModulePackageMapping=In;Pk.default=In;var Ac=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Ac.changeSystem=QF;Ac.wrapModuleResolution=RF;Ac.unwrapModuleResolution=SF;Ac.loadedModules=TF;Ac.module=aA;Ac.isModuleLoaded=UF;Ac.doesModuleExist=VF;Ac.printSystemConfig=WF;Ac.whenLoaded=XF;Ac.importPackage=YF;Ac.registerPackage=ZF;Ac.removePackage=$F;Ac.reloadPackage=aG;Ac.getPackages=bG;Ac.getPackage=cG;Ac.getPackageOfModule=dG;Ac.ensurePackage=eG;Ac.applyPackageConfig=
fG;Ac.lookupPackage=gG;Ac.moduleSourceChange=hG;Ac.requireMap=iG;Ac.isHookInstalled=jG;Ac.installHook=kG;Ac.removeHook=lG;Ac.wrapModuleLoad=mG;Ac.unwrapModuleLoad=nG;Ac.getSystem=fu;Ac.removeSystem=gu;Ac.prepareSystem=JF;Ac._printSystemConfig=KF;Ac._unwrapModuleResolution=HF;Ac._wrapModuleResolution=GF;Ac._whenLoaded=LF;Ac._module=eu;Ac._doesModuleExist=BF;Ac._isModuleLoaded=AF;Ac.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Ac.defaultSystem=
Ac.defaultSystem||Ac.prepareSystem(Ac.GLOBAL.System);var oR=Ac.defaultSystem;Ac.System=oR;Ac.defaultSystem=oR;Ac.getSystem=fu;Ac.getSystem=fu;Ac.removeSystem=gu;Ac.removeSystem=gu;Ac.loadedModules=TF;Ac.loadedModules=TF;Ac.printSystemConfig=WF;Ac.printSystemConfig=WF;Ac.whenLoaded=XF;Ac.whenLoaded=XF;Ac.changeSystem=QF;Ac.changeSystem=QF;Ac.module=aA;Ac.module=aA;Ac.doesModuleExist=VF;Ac.doesModuleExist=VF;Ac.isModuleLoaded=UF;Ac.isModuleLoaded=UF;Ac.unwrapModuleResolution=SF;Ac.unwrapModuleResolution=
SF;Ac.wrapModuleResolution=RF;Ac.wrapModuleResolution=RF;Ac.Package=Nh;Ac._getPackage=Yz;Ac._ensurePackage=rF;Ac.getPackageSpecs=xF;Ac._applyPackageConfig=sF;Ac._importPackage=tF;Ac._removePackage=uF;Ac._reloadPackage=vF;Ac._registerPackage=wF;Ac._lookupPackage=qF;Ac.importPackage=YF;Ac.importPackage=YF;Ac.registerPackage=ZF;Ac.registerPackage=ZF;Ac.removePackage=$F;Ac.removePackage=$F;Ac.reloadPackage=aG;Ac.reloadPackage=aG;Ac.getPackages=bG;Ac.getPackages=bG;Ac.getPackage=cG;Ac.getPackage=cG;Ac.getPackageOfModule=
dG;Ac.getPackageOfModule=dG;Ac.ensurePackage=eG;Ac.ensurePackage=eG;Ac.applyPackageConfig=fG;Ac.applyPackageConfig=fG;Ac.lookupPackage=gG;Ac.lookupPackage=gG;Ac.PackageRegistry=lh;Ac.PackageRegistry=lh;Ac.PackageRegistry=lh;Ac._moduleSourceChange=Xz;Ac.moduleSourceChange=hG;Ac.moduleSourceChange=hG;Ac.computeRequireMap=Vz;Ac.requireMap=iG;Ac.requireMap=iG;Ac._isHookInstalled=Lr;Ac._installHook=Kr;Ac._removeHook=cu;Ac.isHookInstalled=jG;Ac.isHookInstalled=jG;Ac.installHook=kG;Ac.installHook=kG;Ac.removeHook=
lG;Ac.removeHook=lG;Ac._wrapModuleLoad=Zz;Ac._unwrapModuleLoad=EF;Ac.wrapModuleLoad=mG;Ac.wrapModuleLoad=mG;Ac.unwrapModuleLoad=nG;Ac.unwrapModuleLoad=nG;Ac.default=gl;Ac.ExportLookup=gl;Ac.cjs=dJ;Ac.cjs=dJ;Ac.cjs=dJ;Ac.default=UA;Ac.semver=UA;Ac.ImportInjector=Ip;Ac.scripting=Ac.defaultSystem._scripting={module:Ac._module,ensurePackage:Ac._ensurePackage,registerPackage:Ac._registerPackage,importPackage:Ac._importPackage,lookupPackage:Ac._lookupPackage,ImportInjector:Ac.ImportInjector};Ac.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Ac.classRuntime=rx;Ac.defaultSystem.global[Ac.defaultClassToFunctionConverterName]=Ac.classRuntime.initializeClass;Ac.classHolder=Lq;Ac.ModulePackageMapping=In;Ac.classHolder.ModulePackageMapping=Ac.ModulePackageMapping;Ac.classHolder.Package=Ac.Package;Ac.classHolder.PackageRegistry=Ac.PackageRegistry;var pR=za("A",Ac.scripting);Ac.scripting=pR;Ac.scripting=pR;var eJ=Object.freeze({__proto__:null,System:oR,getSystem:fu,removeSystem:gu,loadedModules:TF,printSystemConfig:WF,
whenLoaded:XF,changeSystem:QF,module:aA,doesModuleExist:VF,isModuleLoaded:UF,unwrapModuleResolution:SF,wrapModuleResolution:RF,importPackage:YF,registerPackage:ZF,removePackage:$F,reloadPackage:aG,getPackages:bG,getPackage:cG,getPackageOfModule:dG,ensurePackage:eG,applyPackageConfig:fG,lookupPackage:gG,PackageRegistry:lh,moduleSourceChange:hG,requireMap:iG,isHookInstalled:jG,installHook:kG,removeHook:lG,wrapModuleLoad:mG,unwrapModuleLoad:nG,ExportLookup:gl,cjs:dJ,semver:UA,scripting:pR});za("aZ",
eJ);var qk=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");qk.isReference=TN;qk.removeUnreachableObjects=Zp;qk.obj=df;qk.Path=Ag;qk.connect=Jj;qk.disconnectAll=Zv;qk.isReference=TN;qk.isReference=TN;var fJ=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(a){var d=a.snapshot,
k;for(k in d){var b=d[k],e=b.props&&b.props.textAndAttributes;if(e){var l=e.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var p=0;p<l.length;p+=2){var q=l[p+1];q&&Array.isArray(q)&&(l[p+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(q))))}b.props.textAndAttributes=Object.assign({},e,{value:l})}}}return a}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.isWindow&&(k.submorphs.some(function(b){return"button wrapper"===b.name})&&k.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),k.minimizedBounds=null,qk.disconnectAll(k.get("minimize")),qk.connect(k.get("minimize"),"onMouseDown",
k,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return a}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(a){var d=a.id,k=a.snapshot,b;for(b in k){var e=k[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(l){l=
k[l.id];var p=k[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in p)}))}qk.removeUnreachableObjects([d],k);return a}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return a}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.styleSheets&&0<k.styleSheets.length&&k.styleSheets.forEach(function(b){for(var e in qk.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return a}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return a}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(a){var d=a.snapshot,k=a.packages,b=k&&k["local://lively-object-modules/"]||{};k=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(C){return"{"+C+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var l=b[e]["index.js"],p=$jscomp.makeIterator(k),q=p.next();!q.done;q=p.next()){var u=$jscomp.makeIterator(q.value),w=u.next().value;
q=u.next().value;if(u=u.next().value){w=new RegExp('(import\\s)(.*)(\\sfrom \\"'+w+")","g");var y=w.exec(l);y&&(l=l.replace(w,"import "+u(y[2])+'from "'+q))}else l=l.replace(new RegExp(w,"g"),q)}b[e]["index.js"]=l}for(var A in d)if((e=d[A]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,l=$jscomp.makeIterator(k),p=l.next();!p.done;p=l.next())if(u=$jscomp.makeIterator(p.value),p=u.next().value,q=u.next().value,u.next(),u=u.next().value,b.includes(p)){e.module.package.name=
q;e.module.package.version="0.1.0";e.module.pathInPackage=u||b.substring(b.indexOf(p)+p.length+1)||"index.js";break}return a}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(a,d){d=$jscomp.makeIterator(d.objectRefs());for(var k=d.next();!k.done;k=d.next())k=k.value.realObj,k.isList&&"function"===typeof k.initializeSubmorphs&&k.initializeSubmorphs();return a}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(a){var d=
a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete d[k],"InspectorTreeData"==e.className&&delete d[k],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete d[k])}return a}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(a){var d=
a.id,k=a.snapshot;Object.values(k).map(function(b){if(b.props.metadata&&qk.isReference(b.props.metadata.value)&&(b=k[b.props.metadata.value.id],b.props.commit&&qk.isReference(b.props.commit.value))){var e=k[b.props.commit.value.id].props,l=e.type,p=e.name;e=e._id;l&&p&&e&&(b.props.commit.value='__lv_expr__:({type: "'+l.value+'", name: "'+p.value+'", _id: "'+e.value+'"})')}});qk.removeUnreachableObjects([d],k);return a}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(a){var d=
a.packages,k,b=qk.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(k=b.get(d))k=k.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(d,k);return a}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(a){Object.values(a.snapshot).map(function(d){d.props.fontFamily&&
"Camphor"==d.props.fontFamily.value&&(d.props.fontFamily.value="Nunito")});return a}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(a){var d=a.snapshot;Object.values(d).map(function(k){k.props.master&&"string"===typeof k.props.master.value&&(k.props.master.value=k.props.master.value.split("styleguide://style guide").join("styleguide://System"));k.props.master&&k.props.master.value.id&&(k=d[k.props.master.value.id],k.props.auto.value=k.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return a}}];qk.migrations=fJ;qk.migrations=fJ;qk.migrations=fJ;var Ud=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Ud.normalizeOptions=function(a){a=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(Ud.allPlugins),[new Ud.StyleguidePlugin])},a);a.reinitializeIds&&(a.reinitializeIds="function"===typeof a.reinitializeIds?a.reinitializeIds:function(d,k){return k.realObj.isMorph?Ud.newMorphId(k.realObj.constructor):null});return a};Ud.serializeMorph=
bA;Ud.deserializeMorph=cA;Ud.loadWorldFromResource=UN;Ud.saveWorldToResource=VN;Ud.copyMorph=oG;Ud.createMorphSnapshot=hu;Ud.loadMorphFromSnapshot=hp;Ud.resourceToJSON=V_;Ud.findPackagesInFileSpec=W_;Ud.packagesOfSnapshot=WN;Ud.loadPackagesAndModulesOfSnapshot=dA;Ud.findRequiredPackagesOfSnapshot=pG;Ud.requiredModulesOfSnapshot=$p;Ud.deserializeWithMigrations=Qy;Ud.serialize=dw;Ud.allPlugins=wp;Ud.MorphicEnv=qn;Ud.resource=Dc;Ud.newMorphId=Uy;Ud.morph=$i;Ud.pathForBrowserHistory=ew;Ud.ast=rH;Ud.StyleguidePlugin=
XI;Ud.findLocalComponents=Uz;Ud.serializeMorph=bA;Ud.serializeMorph=bA;Ud.deserializeMorph=cA;Ud.deserializeMorph=cA;Ud.loadWorldFromResource=UN;Ud.loadWorldFromResource=UN;Ud.saveWorldToResource=VN;Ud.saveWorldToResource=VN;Ud.copyMorph=oG;Ud.copyMorph=oG;Ud.modules=eJ;Ud.createFiles=Gd;Ud.promise=Vf;Ud.Path=Ag;Ud.graph=xq;Ud.arr=Ke;Ud.migrations=fJ;var Mx=Ud.modules;Ud.registerPackage=Mx.registerPackage;Ud.module=Mx.module;Ud.getPackage=Mx.getPackage;Ud.ensurePackage=Mx.ensurePackage;Ud.lookupPackage=
Mx.lookupPackage;Ud.semver=Mx.semver;Ud.objectScriptingEnabled=!1;Ud.createMorphSnapshot=hu;Ud.createMorphSnapshot=hu;Ud.loadMorphFromSnapshot=hp;Ud.loadMorphFromSnapshot=hp;Ud.packagesOfSnapshot=WN;Ud.packagesOfSnapshot=WN;Ud.loadPackagesAndModulesOfSnapshot=dA;Ud.loadPackagesAndModulesOfSnapshot=dA;Ud.findRequiredPackagesOfSnapshot=pG;Ud.findRequiredPackagesOfSnapshot=pG;var ac=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");ac.generateUnfolded=function(a,d,k){d=void 0===d?["top","left",
"right","bottom"]:d;k=void 0===k?"core":k;var b={},e={};d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;e={$jscomp$loop$prop$m$1457$2703:e.$jscomp$loop$prop$m$1457$2703},l=d.next())e.$jscomp$loop$prop$m$1457$2703=l.value,b[a+ac.string.capitalize(e.$jscomp$loop$prop$m$1457$2703)]={group:k,derived:!0,generated:!0,after:[a],get:function(p){return function(){return this.getProperty(a)[p.$jscomp$loop$prop$m$1457$2703]}}(e),set:function(p){return function(q){var u={};this[a]=Object.assign({},this.getProperty(a),
(u[p.$jscomp$loop$prop$m$1457$2703]=q,u))}}(e)};return b};ac.Color=of;ac.Line=mk;ac.Point=tf;ac.pt=bh;ac.rect=wk;ac.Rectangle=Od;ac.Transform=Mi;ac.string=rg;ac.properties=gm;ac.obj=df;ac.arr=Ke;ac.num=Dj;ac.promise=Vf;ac.tree=yq;ac.PropertyPath=Ag;ac.signal=xk;ac.copy=Ry;ac.deserializeSpec=Qn;ac.ExpressionSerializer=Sj;ac.serializeSpec=sm;ac.getClassName=Pn;ac.renderRootMorph=PD;ac.ShadowObject=An;ac.AnimationQueue=QH;ac.easings=Bn;ac.addOrChangeCSSDeclaration=Qo;ac.Icon=Ml;ac.morph=$i;ac.newMorphId=
Uy;ac.sanitizeFont=Sy;ac.MorphicEnv=qn;ac.config=ok;ac.CommandHandler=Iha;ac.KeyHandler=WP;ac.findKeysForPlatform=SD;ac.TargetScript=XP;ac.copyMorph=oG;ac.ComponentPolicy=YI;ac.defaultCommandHandler=new ac.CommandHandler;var Vi=za("M",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b||(b={});var e=b.env||ac.MorphicEnv.default();this._env=e;this._rev=e.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=ac.newMorphId(ac.getClassName(this));this._animationQueue=new ac.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=ac.obj.select(b,ac.arr.intersect(Object.keys(b),this.styleProperties));
this.initializeProperties(b);b.bounds&&(this.setBounds(b.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=b.height||void 0!=b.width)this._parametrizedProps.extent=this.extent;b.layout&&(this.layout=b.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(b,e,l,p){this._env=ac.MorphicEnv.default();this._rev=b.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=e.id;this._animationQueue=new ac.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=ac.obj.select(b.props,ac.arr.intersect(Object.keys(b.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;b=p.expressionSerializer;for(var q in this._parametrizedProps)(e=this._parametrizedProps[q].value)&&ac.obj.isString(e)&&b.isSerializedExpression(e)&&
(this._parametrizedProps[q]=b.deserializeExpr(e));this.initializeProperties();this._pool=p}},{key:"__after_deserialize__",value:function(b,e,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(p){console.error("[lively.morphic] "+this+".onLoad() error: "+p.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var b=
this.defaultProperties,e=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var p=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(w){return w.__isBeingSerialized__&&w.master}).find(Boolean),q;for(q in e){var u=e[q];p&&p.managesMorph(this)&&void 0!=p._overriddenProps.get(this)[q]?l.push(q):u.readOnly||u.derived||ac.obj.equals(this[q],b[q])||u.hasOwnProperty("serialize")&&
!u.serialize||l.push(q)}return p&&!this.isComponent?p.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(b,e,l,p){if((e=b.props.submorphs)&&!this.isEpiMorph)for(e=e.value,p=e.length;p--;)l.refForId(e[p].id).realObj.isEpiMorph&&ac.arr.removeAt(e,p);l=$jscomp.makeIterator(ac.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(e=l.next();!e.done;e=l.next())e=e.value,b.props[e]={key:e,verbatim:!0,value:ac.obj.extract(this[e],
["top","right","bottom","left"],function(q,u){return u&&u.isColor?u.toTuple():u})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(b,e){b=void 0===b?!0:b;e=void 0===e?new WeakMap:e;var l=this.defaultProperties,p=this.propertiesAndPropertySettings().properties,q={submorphs:!0},u={};if(e.has(this))return e.get(this);e.set(this,u);for(var w in p){var y=p[w];y&&(y.readOnly||y.derived||y.hasOwnProperty("serialize")&&
!y.serialize||w in q||b&&(ac.obj.equals(this[w],l[w])||this[w]&&l[w]&&this[w].valueOf&&l[w].valueOf&&ac.obj.equals(this[w].valueOf(),l[w].valueOf()))||(u[w]=this[w]&&this[w].isMorph?this[w].spec(b,e):this[w]&&"layout"===w?this[w].copy():this[w]))}u.submorphs=this.submorphs.map(function(A){return A.spec(b,e)});u.type=this.constructor;return u}},{key:"printSpec",value:function(b,e){e=void 0===e?0:e;b=(void 0===b?null:b)||this.spec();var l={name:!0,type:!0,submorphs:!0},p="  ".repeat(e+1),q="  ".repeat(e)+
"{\n"+(p+'name: "'+b.name+'",\n')+(p+'type: "'+b.type+'",\n'),u;for(u in b)l[u]||(q+=""+p+u+": "+ac.string.print(b[u])+",\n");if(b.submorphs){q+=p+"submorphs: [\n";b=$jscomp.makeIterator(b.submorphs);for(l=b.next();!l.done;l=b.next())q+=this.printSpec(l.value,e+1);q+="]\n"}return q+="  ".repeat(e)+"}\n"}},{key:"defaultProperties",get:function(){var b=this.constructor,e=b[Symbol.for("lively-instance-superclass")];if(!b._morphicDefaultPropertyValues||b._morphicDefaultPropertyValues==(e&&e._morphicDefaultPropertyValues)){b=
this.constructor._morphicDefaultPropertyValues={};e=this.propertiesAndPropertySettings().properties;for(var l in e){var p=e[l];p.hasOwnProperty("defaultValue")&&(p=p.defaultValue,Array.isArray(p)&&(p=p.slice()),b[l]=p)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(b){return this.defaultProperties[b]}},{key:"getProperty",value:function(b){return this._morphicState[b]}},{key:"setProperty",value:function(b,e,l){return this.addValueChange(b,e,l)}},{key:"changeMetaData",
value:function(b,e,l,p){l=void 0===l?!0:l;p=void 0===p?!0:p;var q=this.metadata;q||(q={});(new ac.PropertyPath(b)).withParentAndKeyDo(q,!0,function(u,w){u[w]=p?Object.assign({},u[w],{},e):e;var y=u.__dont_serialize__;l?y&&y.includes(w)&&(ac.arr.remove(y,w),0===y.length&&delete u.__dont_serialize__):(y||(y=u.__dont_serialize__=[]),ac.arr.pushIfNotIncluded(y,w))});this.metadata=q}},{key:"installFont",value:function(b,e){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[b]=e,l));this.insertFontCSS(b,
e)}},{key:"uninstallFont",value:function(b){delete this.installedFonts[b];(b=document.getElementById(this.id+"-"+b))&&b.remove()}},{key:"ensureInstalledFonts",value:function(b,e){b=$jscomp.makeIterator(b);for(var l=b.next();!l.done;l=b.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();e=$jscomp.makeIterator(e);for(l=e.next();!l.done;l=e.next())b=l.value,this.env.fontMetric.isFontSupported(ac.sanitizeFont(b))||this.insertFontCSS(b,this.installedFonts[b])}},{key:"insertFontCSS",value:function(b,
e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);e.endsWith(".otf")?ac.addOrChangeCSSDeclaration(l.id+"-"+b,"@font-face {\n             font-family: "+b+';\n             src: url("'+l.installedFonts[b]+'") format("opentype");\n         }'):ac.addOrChangeCSSDeclaration(l.id+"-"+b,'@import url("'+l.installedFonts[b]+'");');p.jumpToEnd()})}},{key:"toString",value:function(){return"<"+ac.getClassName(this)+" - "+(this.name?
this.name:this.id)+">"}},{key:"edit",value:function(b){return this.env.world.execCommand("open object editor",Object.assign({className:ac.getClassName(this)},b,{target:this}))}},{key:"inspect",value:function(b){return this.env.world.execCommand("open object inspector",Object.assign({},b,{target:this}))}},{key:"livelyCustomInspect",value:function(){var b={_id:!0,_owner:!0},e={},l=this.propertiesAndPropertySettings().properties,p=[],q;for(q in l)b[q]||l[q].derived&&!l[q].showInInspector||(e[q]=!0,p.push({key:q,
value:this[q]}));p.push({key:"id",value:this.id});p.push({key:"owner",value:this.owner});p=p.sort(function(w,y){w=w.key.toLowerCase();y=y.key.toLowerCase();return w<y?-1:w===y?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),q=l.next();!q.done;q=l.next())q=q.value,b["$$"+q.sourceAttrName,""+q.sourceAttrName]=!0;Object.assign(e,b);b=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=b.next();!l.done;l=b.next())l=l.value,l in this&&(e[l]=!0,p.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var u in this)!e[u]&&this.hasOwnProperty(u)&&p.unshift({key:u,value:this[u],keyString:"[UNKNOWN PROPERTY] "+u});return{sort:!1,includeDefault:!1,properties:p}}},{key:"show",value:function(b){return $world.execCommand("show morph",{morph:this,loop:b})}},{key:"setStatusMessage",value:function(b,e,l,p){var q=this.world();p=Object.assign({maxLines:7},p);return q?q.setStatusMessageFor(this,
b,e,l,p):console.log(b)}},{key:"showError",value:function(b){var e=this.world();return e?e.showErrorFor(this,b):console.error(b)}},{key:"onChange",value:function(b){var e=this,l=b.meta&&b.meta.animation,p=b.prop,q=b.value;if("position"===p||"rotation"===p||"scale"===p||"origin"===p||"reactsToPointer"===p)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[p]=q,l));else if("extent"==p)this.onBoundsChanged(this.bounds());else"layout"==p&&(l?q&&q.attachAnimated(l.duration,this,l.easing):
q&&q.attach());this.layout&&this.layout.onChange(b);this.isComponent&&!ac.PropertyPath("meta.metaInteraction").get(b)&&(p=this.world(),delete this._preview,(p?p.withAllSubmorphsSelect(function(u){return u.master&&u.master.uses(e)}):[]).forEach(function(u){u.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,b)}},{key:"onBoundsChanged",value:function(b){var e=this;ac.signal(this,"bounds",b);[].concat($jscomp.arrayFromIterable(b.corners),$jscomp.arrayFromIterable(b.sides)).forEach(function(l){ac.signal(e,
l,b.partNamed(l))})}},{key:"onSubmorphChange",value:function(b,e){var l=this;if(this.isComponent&&!ac.PropertyPath("meta.metaInteraction").get(b)&&!ac.PropertyPath("meta.layoutAction").get(b)){var p=this.world();p&&p.withAllSubmorphsDo(function(q){q.master&&q.master.uses(l)&&q.requestMasterStyling()})}if(this.master)this.master.onMorphChange(e,b);this.layout&&this.layout.onSubmorphChange(e,b)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(b){this.env.changeManager.apply(this,
b)}},{key:"addValueChange",value:function(b,e,l){return this.env.changeManager.addValueChange(this,b,e,l)}},{key:"addMethodCallChangeDoing",value:function(b,e){return this.env.changeManager.addMethodCallChangeDoing(b,this,e)}},{key:"groupChangesWhile",value:function(b,e){return this.env.changeManager.groupChangesWhile(this,b,e)}},{key:"dontRecordChangesWhile",value:function(b){return this.env.changeManager.dontRecordChangesWhile(this,b)}},{key:"recordChangesWhile",value:function(b,e){return this.env.changeManager.recordChangesWhile(b,
e)}},{key:"recordChangesStart",value:function(b){return this.env.changeManager.recordChangesStartForMorph(this,b)}},{key:"recordChangesStop",value:function(b){return this.env.changeManager.recordChangesStopForMorph(this,b)}},{key:"withMetaDo",value:function(b,e){return this.env.changeManager.doWithValueChangeMeta(b,this,e)}},{key:"undoStart",value:function(b){return this.env.undoManager.undoStart(this,b)}},{key:"undoStop",value:function(b){return this.env.undoManager.undoStop(this,b)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e._animationQueue.registerAnimation(b),e._animationQueue.animationsActive?l?p.yield(l.asPromise(),3):p.jumpTo(2):(l&&l.finish(),p.return(Promise.resolve(e)))):2!=p.nextAddress?p.return(p.yieldResult):p.return(Promise.resolve(e))})}},{key:"withAnimationDo",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){p=
l.groupChangesWhile(!1,b);q=p.changes;return u.yield(Promise.all(Object.values(ac.arr.groupBy(q,function(w){return w.target.id})).map(function(w){var y=Object.assign({},e),A;w.forEach(function(C){A=C.target;C.reverseApply();y[C.prop]=C.value});return A&&A.animate(y)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var b=this.scroll,e=this.scrollExtent;return new ac.Rectangle(b.x,b.y,e.x,e.y)}},{key:"scrollDown",value:function(b){this.scroll=this.scroll.addXY(0,b)}},{key:"scrollUp",value:function(b){this.scrollDown(50*-b)}},{key:"scrollLeft",value:function(b){this.scroll=this.scroll.addXY(b,0)}},{key:"scrollRight",value:function(b){this.scrollLeft(-b)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(b){this.styleClasses=ac.arr.uniq(this.styleClasses.concat(b))}},{key:"removeStyleClass",value:function(b){this.styleClasses=this.styleClasses.filter(function(e){return e!=b})}},{key:"adjustOrigin",value:function(b){var e=this.origin,l=this.globalBounds().topLeft();this.origin=b;this.submorphs.forEach(function(q){return q.position=q.position.subPt(b.subPt(e))});var p=this.globalBounds().topLeft();l=l.subPt(p);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",
value:function(b){this.extent=b.extent();this.position=b.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var b=this.extent;return ac.rect(0,0,b.x,b.y)}},{key:"relativeBounds",value:function(b){b=b||this.world();var e=this.origin.negated().extent(this.extent);e=b?this.transformRectToMorph(b,e):this.getGlobalTransform().transformRectToRect(e);this.isClip()||this.submorphs.forEach(function(l){e=e.union(l.relativeBounds(b))});return e}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var b=this.innerBounds();return this.submorphs.map(function(e){e=e.bounds();return ac.rect(e.x/b.width,e.y/b.height,e.width/b.width,e.height/b.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(b){b=ac.arr.filter(this.submorphs,void 0===b?function(){return!0}:b);return 1>b.length?this.innerBounds():b.map(function(e){return e.bounds()}).reduce(function(e,l){return e.union(l)})}},
{key:"fitToSubmorphs",value:function(b){b=void 0===b?ac.Rectangle.inset(0):b;var e=this.submorphs;if(e.length){e=e.reduce(function(q,u){return q.union(u.bounds())},e[0].bounds());var l=e.top()-b.top(),p=e.left()-b.left();this.moveBy(ac.pt(p,l));ac.arr.invoke(this.submorphs,"moveBy",ac.pt(-p,-l));this.extent=ac.pt(e.width+b.left()+b.right(),e.height+b.top()+b.bottom())}}},{key:"align",value:function(b,e){return this.moveBy(e.subPt(b))}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);
return this}},{key:"rotateBy",value:function(b){this.rotation+=b}},{key:"resizeBy",value:function(b){this.extent=this.extent.addPt(b)}},{key:"snap",value:function(b){this.position=this.position.roundTo(b||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var b=this;b;){if(b.isEpiMorph)return!0;b=b.owner}return!1}},{key:"replaceWith",value:function(b,e,l){l=void 0===l?!0:l;if(this===b||!b)return b;if(this===b.owner)return b.replaceWith(this),
b;var p=this.owner,q=this.submorphs,u=this.getTransform().copy();e="number"===typeof e?e:p?p.submorphs.indexOf(this):-1;var w=b.owner,y=ac.arr.without(b.submorphs,this),A=b.getTransform().copy(),C=w?w.submorphs.indexOf(b):-1;p&&this.remove();w&&b.remove();l&&(this.submorphs=[],b.submorphs=[]);p===b?(w&&w.addMorphAt(this,C),l&&(this.submorphs=y.slice(0,e).concat(b).concat(y.slice(e)),b.submorphs=q)):(p&&p.addMorphAt(b,e),w&&w.addMorphAt(this,C),l&&(b.submorphs=q,this.submorphs=y));b.setTransform(u);
this.setTransform(A);return b}},{key:"addMorphAt",value:function(b,e){var l=this;if(!b||"object"!==typeof b)throw Error(b+" cannot be added as a submorph to "+this);if(b.isMorph){if(b.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+b+" to "+this)),null;if(b===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}b.isMorph||(b=ac.morph(b));var p=this.submorphs.indexOf(b);
if(!(-1<p&&p===e))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[b,e],undo:{target:this,selector:"removeMorph",args:[b]}},function(){var q=b.owner,u=l.submorphs;if(q&&q!==l){var w=b.transformForNewOwner(l);b.remove()}b._env!==l._env&&(b._env=l._env);e=Math.min(u.length,Math.max(0,e));-1<p&&(u.splice(p,1),p<e&&e--);u.splice(e,0,b);b._owner=l;b._cachedPaths={};w&&b.setTransform(w);b.requestStyling();l._morphicState.submorphs=u;l._submorphOrderChanged=
!0;l.makeDirty();b.resumeSteppingAll();b.withAllSubmorphsDo(function(y){return y.onOwnerChanged(l)});l.world()&&b._requestMasterStyling&&(b.master&&b.master.applyIfNeeded(!0),b._requestMasterStyling=!1)}),b}},{key:"addMorph",value:function(b,e){var l=this.submorphs;e=e?l.indexOf(e):-1;return this.addMorphAt(b,-1===e?l.length:e)}},{key:"addMorphBack",value:function(b){return this.addMorph(b,b===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(b){var e=this.submorphs.indexOf(b);
-1!==e&&((this.getProperty("submorphs")||[]).splice(e,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[b],undo:{target:this,selector:"addMorphAt",args:[b,e]}},function(){b.suspendSteppingAll();b._owner=null}),this._pathDependants=ac.arr.withoutAll(this._pathDependants,b._pathDependants))}},{key:"remove",value:function(){var b=this;ac.signal(this,"onRemove");this.ownerChain().forEach(function(e){e._stylingVisitor&&e._stylingVisitor.deleteFromCache(b)});this.owner&&this.owner.removeMorph(this);
this._cachedPaths={};this._pathDependants.forEach(function(e){return e._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(e){return e.onOwnerChanged(null)});return this}},{key:"abandon",value:function(b){b=void 0===b?!0:b;ac.signal(this,"onAbandon");this.emptyComments();b&&this.remove();this.submorphs.forEach(function(e){return e.abandon(!1)})}},{key:"onOwnerChanged",value:function(b){b&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(b){b=void 0===
b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:b,easing:ac.easings.outQuad}),2);e.remove();e.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(b){b=void 0===b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e.opacity=0;e.animate({opacity:1,duration:b});return l.return(e)})}},{key:"fadeIntoWorld",value:function(b,e){b=void 0===b?$world.visibleBounds().center():
b;e=void 0===e?200:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return p=new ac.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:ac.Color.transparent}),q=l.env.world,p.openInWorld(),p.addMorph(l),l.position=p.extent.scaleBy(.5),p.center=b,p.scale=.8,w.yield(p.animate({opacity:1,scale:1,duration:e}),2);u=l.globalBounds();q.addMorph(l);l.top=u.top();l.left=u.left();p.remove();return w.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=
[]}},{key:"bringToFront",value:function(){this.owner&&ac.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(b){if(b(this))return this;for(var e=$jscomp.makeIterator(this.submorphs),l=e.next();!l.done;l=e.next())if(l=l.value.withAllSubmorphsDetect(b))return l}},{key:"withAllSubmorphsDoExcluding",value:function(b,e){var l=[b(this)];if(e(this))return l;for(var p=$jscomp.makeIterator(this.submorphs),
q=p.next();!q.done;q=p.next())ac.arr.pushAll(l,q.value.withAllSubmorphsDoExcluding(b,e));return l}},{key:"withAllSubmorphsDo",value:function(b){for(var e=[b(this)],l=$jscomp.makeIterator(this.submorphs),p=l.next();!p.done;p=l.next())ac.arr.pushAll(e,p.value.withAllSubmorphsDo(b));return e}},{key:"withAllSubmorphsSelect",value:function(b){var e=[];this.withAllSubmorphsDo(function(l){return b(l)&&e.push(l)});return e}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(b){return b.isWindow})}},{key:"openInWorldNear",value:function(b,e){var l=this;e=e||this.world()||this.env.world;if(!e)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);l.opacity=
1;p.jumpToEnd()})}));this.center=b;this.setBounds(e.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(b){b=b||this.world()||this.env.world;var e=b.firstHand?b.firstHand.position.addPt(this.hasFixedPosition?ac.pt(0,0):b.scroll):ac.pt(0,0);return b?this.openInWorldNear(e):void 0}},{key:"openInWorld",value:function(b,e){e=e||this.world()||this.env.world;if(!e)return console.warn("Cannot open morph "+
this+", world morph not found;"),this;b?this.position=b:(this.center=this.hasFixedPosition?e.visibleBounds().extent().scaleBy(.5,.5):e.visibleBounds().center(),this.snap());e.addMorph(this);return this}},{key:"openInHand",value:function(b){b||(b=(this.world()||this.env.world).firstHand);b.grab(this);this.center=ac.pt(0,0)}},{key:"openInWindow",value:function(b){b=void 0===b?{title:this.name,name:"window for "+this.name,world:null}:b;return(b.world||this.world()||this.env.world).openInWindow(this,
ac.obj.dissoc(b,["world"]))}},{key:"isAncestorOf",value:function(b){for(b=b.owner;b;){if(b===this)return!0;b=b.owner}return!1}},{key:"morphsContainingPoint",value:function(b,e){e||(e=[]);if(!this.fullContainsWorldPoint(b))return e;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(b,e);this.innerBoundsContainsWorldPoint(b)&&e.push(this);return e}},{key:"morphBeneath",value:function(b){var e=this.world()||this.owner;if(!e)return null;b=e.morphsContainingPoint(b);e=b.indexOf(this);
return b[e+1]}},{key:"transformTillMorph",value:function(b,e){if("down"==(void 0===e?"up":e))return b.transformTillMorph(this,"up").inverse();e=new ac.Transform;for(var l=this;l&&l!=b;l=l.owner){var p=l,q=p.origin;p=p.scroll;0===q.x&&0===q.y||e.preConcatenate(new ac.Transform(l.origin));e.preConcatenate(l.getTransform());l!=this&&(0===p.x&&0===p.y||!l.owner||e.preConcatenate(new ac.Transform(p.negated())));l.hasFixedPosition&&l.owner&&e.preConcatenate(new ac.Transform(l.owner.scroll))}return e}},
{key:"localize",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?e.transformPointToMorph(this,ac.pt(l,p)):b}},{key:"worldPoint",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?this.transformPointToMorph(e,ac.pt(l,p)):b.addPt(this.position)}},{key:"transformToMorph",value:function(b){var e=this.getGlobalTransform(),l=b.getGlobalTransform().inverse();e.preConcatenate(l);l=b.scroll;0===l.x&&0===l.y||!b.owner||e.preConcatenate(new ac.Transform(l));return e}},{key:"transformPointToMorph",
value:function(b,e){for(var l=this.hasFixedPosition,p=$jscomp.makeIterator(this.pathToMorph(b)),q=p.next();!q.done;q=p.next()){var u=$jscomp.makeIterator(q.value);q=u.next().value;u=u.next().value;this!=u&&"up"==q&&(e.x-=u.scroll.x,e.y-=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(e.x+=u.owner.scroll.x,e.y+=u.owner.scroll.y));this.applyTransform(q,u,e);this!=u&&"down"==q&&(e.x+=u.scroll.x,e.y+=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),
u.hasFixedPosition&&u.owner&&u.owner.owner&&(e.x-=u.owner.scroll.x,e.y-=u.owner.scroll.y))}l&&b.isWorld&&(e.x=e.x-b.position.x+b.scroll.x,e.y=e.y-b.position.y+b.scroll.y);l&&this.isWorld&&(e.x=e.x+this.position.x-this.scroll.x,e.y=e.y+this.position.y-this.scroll.y);return e}},{key:"transformRectToMorph",value:function(b,e){var l=this,p,q,u;[p=e.topLeft(),q=e.topRight(),u=e.bottomRight(),e=e.bottomLeft()].forEach(function(w){return l.transformPointToMorph(b,w)});return ac.Rectangle.unionPts([p,q,u,
e])}},{key:"applyTransform",value:function(b,e,l){"up"==b?(l.x+=e.origin.x,l.y+=e.origin.y,l.matrixTransform(e.getTransform(),l)):(l.matrixTransform(e.getInverseTransform(),l),l.x-=e.origin.x,l.y-=e.origin.y)}},{key:"_addPathDependant",value:function(b){this._pathDependants.includes(b)||this._pathDependants.push(b)}},{key:"pathToMorph",value:function(b){var e;if(e=this._cachedPaths[b.id])return e;e=this.closestCommonAncestor(b)||this;var l=this,p=[],q=[];for(e._addPathDependant(this);l&&l!=e;)q.push(["up",
l]),l._addPathDependant(this),l=l.owner;for(l=b;l&&l!=e;)p.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[b.id]=e=[].concat($jscomp.arrayFromIterable(q),$jscomp.arrayFromIterable(p.reverse()))}},{key:"closestCommonAncestor",value:function(b){return ac.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[b].concat($jscomp.arrayFromIterable(b.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(b){return new ac.Transform(this.transformToMorph(b))}},
{key:"localizePointFrom",value:function(b,e){var l=b.x;b=b.y;try{return e.transformPointToMorph(this,ac.pt(l,b))}catch(p){return console.warn("problem "+p+" in localizePointFrom"),ac.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(ac.pt(0,0))}},{key:"globalPosition",set:function(b){return this.position=this.owner?this.owner.localize(b):b}},{key:"ensureToBeInWorldBounds",value:function(){var b=
this.world();if(b){var e=this.globalBounds();b=b.innerBounds().translateForInclusion(e).topLeft().subPt(e.topLeft());this.moveBy(b)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(b){b=void 0===b?{}:b;var e=b.position,l=b.scale,p=b.origin,q=b.rotation;b=this._transform||new ac.Transform;var u=
this._invTransform||new ac.Transform;e=e||this.position;p=p||this.origin;l=l||this.scale;q=q||this.rotation;b.a=l*Math.cos(q);b.b=l*Math.sin(q);b.c=l*-Math.sin(q);b.d=l*Math.cos(q);b.e=b.a*-p.x+b.c*-p.y+e.x;b.f=b.b*-p.x+b.d*-p.y+e.y;e=b.a;l=b.b;p=b.c;q=b.d;var w=b.e,y=b.f,A=1/(e*q-p*l);u.a=q*A;u.b=-l*A;u.c=-p*A;u.d=e*A;u.e=(p*y-w*q)*A;u.f=-(e*y-l*w)*A;this._transform=b;this._invTransform=u}},{key:"setTransform",value:function(b){this.position=b.getTranslation();this.rotation=ac.num.toRadians(b.getRotation());
this.scale=b.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(b){return this.fullContainsPoint(null==this.owner?b:this.owner.localize(b))}},{key:"fullContainsPoint",value:function(b){return this.bounds().containsPoint(b)}},{key:"innerBoundsContainsWorldPoint",value:function(b){return this.innerBoundsContainsPoint(this.localize(b))}},{key:"innerBoundsContainsPoint",value:function(b){return this.innerBounds().containsPoint(b.addPt(this.origin).subPt(this.scroll))}},
{key:"get",value:function(b){if(!b)return null;try{return this.getSubmorphNamed(b)||this.getNameTest(this,b)&&this||this.getOwnerOrOwnerSubmorphNamed(b)}catch(e){if(e.constructor==RangeError&&"Maximum call stack size exceeded"==e.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+
e.stack);throw e;}}},{key:"getNameTest",value:function(b,e){if(ac.obj.isRegExp(e)){if(e.test(b.name)||e.test(String(b)))return!0}else if(b.name===e||String(b)===e)return!0;return!1}},{key:"getAllNamed",value:function(b,e){e=void 0===e?[]:e;if(!this._morphicState||!this.submorphs.length)return e;for(var l=0;l<this.submorphs.length;l++){var p=this.submorphs[l];this.getNameTest(p,b)&&e.push(p)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(b,e);return e}},{key:"getSubmorphNamed",value:function(b){if(!this._morphicState||
!this.submorphs.length)return null;for(var e=0;e<this.submorphs.length;e++){var l=this.submorphs[e];if(this.getNameTest(l,b))return l}for(e=0;e<this.submorphs.length;e++)if(l=this.submorphs[e].getSubmorphNamed(b))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(b){return this.withAllSubmorphsSelect(function(e){return e.styleClasses.includes(b)})}},{key:"getOwnerNamed",value:function(b){return this.ownerChain().find(function(e){return e.name===b})}},{key:"getOwnerOrOwnerSubmorphNamed",
value:function(b){var e=this.owner;if(!e)return null;if(e.name===b)return e;for(var l=0;l<e.submorphs.length;l++){var p=e.submorphs[l];if(p!==this&&(this.getNameTest(p,b)||(p=p.getSubmorphNamed(b))))return p}return this.owner.getOwnerOrOwnerSubmorphNamed(b)}},{key:"getMorphWithId",value:function(b){return this.withAllSubmorphsDetect(function(e){return b===e.id})}},{key:"setMirrored",value:function(b){b?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",
value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onMouseDown",value:function(b){if(this===b.targetMorph&&(b.state.clickedMorph=this,1==b.state.prevClick.clickCount&&200>=Date.now()-b.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(b);return}this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(b){}},{key:"onMouseUp",value:function(b){b.state.clickedMorph=
null;this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(b){}},{key:"onLongClick",value:function(b){}},{key:"addKeyBindings",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[b],undo:null},function(){e._keybindings||(e._keybindings=[]);e._cachedKeyhandlers=null;e._keybindings.unshift.apply(e._keybindings,$jscomp.arrayFromIterable(b))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(b){this._cachedKeyhandlers=null;return this._keybindings=b}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[ac.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var b=this.keyhandlers[0].platform;return this.keybindings.reduce(function(e,l){var p=ac.findKeysForPlatform(l.keys,b),q=l.command,u="string"===typeof q?q:q.command||q.name;return"string"!==typeof p?e:p.split("|").reduce(function(w,
y){var A={};return Object.assign(w,(A[y]={name:u,command:q,prettyKeys:ac.KeyHandler.prettyCombo(y)},A))},e)},{})}},{key:"keysForCommand",value:function(b,e){e=void 0===e?!0:e;var l=this.keyCommandMap,p=Object.keys(l).find(function(q){return l[q].name===b});return p&&e?l[p].prettyKeys:p}},{key:"simulateKeys",value:function(b){return ac.KeyHandler.simulateKeys(this,b)}},{key:"onKeyDown",value:function(b){ac.KeyHandler.invokeKeyHandlers(this,b,!1)&&b.stop()}},{key:"onKeyUp",value:function(b){}},{key:"onContextMenu",
value:function(b){var e=this;b.targetMorph===this&&(lively.FreezerRuntime||b.stop(),Promise.resolve(this.menuItems(b)).then(function(l){return e.openMenu(l,b)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(b,e){var l=this.world();return b&&b.length&&l?l.openWorldMenu(e,b):null}},{key:"menuItems",value:function(b){return $world.defaultMenuItems(this,b)}},{key:"onCut",value:function(b){}},{key:"onCopy",value:function(b){}},{key:"onPaste",value:function(b){}},{key:"onDragStart",
value:function(b){this.undoStart("drag-move");b=b.state;this.position=b.dragStartMorphPosition.addPt(b.absDragDelta)}},{key:"onDragEnd",value:function(b){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(b){var e=b.state;this.position=e.dragStartMorphPosition.addPt(e.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:b.isCtrlDown(),snap:b.isCtrlDown()})}},{key:"onGrab",value:function(b){if(b.isShiftDown()){var e=
this.copy();e.position=this.transformPointToMorph(b.hand,ac.pt(0,0));b.hand.grab(e)}else b.hand.grab(this)}},{key:"onDrop",value:function(b){b.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(b){return!0}},{key:"onDropHoverIn",value:function(b){}},
{key:"onDropHoverUpdate",value:function(b){}},{key:"onDropHoverOut",value:function(b){}},{key:"onBeingDroppedOn",value:function(b,e){e.addMorph(this)}},{key:"onHoverIn",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(b){}},{key:"onMouseWheel",value:function(b){}},{key:"onNativeDrop",value:function(b){}},{key:"onNativeDragleave",value:function(b){}},{key:"onNativeDragenter",value:function(b){}},
{key:"onNativeDragover",value:function(b){}},{key:"onNativeDragend",value:function(b){}},{key:"onNativeDragstart",value:function(b){}},{key:"onNativeDrag",value:function(b){}},{key:"focus",value:function(){var b=this.env.eventDispatcher;b&&b.focusMorph(this)}},{key:"onFocus",value:function(b){}},{key:"onBlur",value:function(b){}},{key:"isFocused",value:function(){var b=this.env.eventDispatcher;return b&&b.isMorphFocused(this)}},{key:"exportToJSON",value:function(b){return ac.serializeSpec(this,b)}},
{key:"initFromJSON",value:function(b){var e=this;this._env=b.env||b._env||ac.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=b._id||ac.newMorphId(ac.getClassName(this));this._animationQueue=new ac.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){e.initializeProperties();ac.deserializeSpec(b,function(l){return ac.morph(l)},e)});return this}},{key:"copyViaJSON",
value:function(){var b=this.exportToJSON();ac.tree.prewalk(b,function(e){return e._id=ac.newMorphId(e.type)},function(e){return e.submorphs});b.name=b.name.replace(/copy( [0-9]+)?$/,function(e,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return ac.morph({type:b.type}).initFromJSON(b)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(b){return ac.copyMorph(this,void 0===b?!1:b)}},{key:"interactivelyPublish",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return e=
b.world()||b.env.world,w.setCatchFinallyBlocks(2),w.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return l=w.yieldResult,p=l.interactivelySavePart,w.yield(p(b,{notifications:!1,loadingIndicator:!0}),5);case 5:q=w.yieldResult;e.setStatusMessage(q?"Published "+b+" as "+q.name:"Failed to publish part "+b,q?ac.Color.green:ac.Color.red);w.leaveTryBlock(0);break;case 2:u=w.enterCatchBlock(),"canceled"!=u&&e.showError(u),w.jumpToEnd()}})}},{key:"makeDirty",value:function(b){this._dirty=!0;
this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(b){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(b){}},{key:"whenRendered",value:function(b){return this.env.whenRendered(this,void 0===b?50:b).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return b.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var b=0;b<this.submorphs.length;b++)this.submorphs[b].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var b=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(e){return b.master._capturedExtents.set(e,e.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(b){b._wantsStyling=!0;b.makeDirty()})}},{key:"renderAsRoot",value:function(b){var e=this;this.dontRecordChangesWhile(function(){e.applyLayoutIfNeeded()});return ac.renderRootMorph(this,b)}},{key:"renderPreview",value:function(b,e){b=void 0===b?{}:b;e=void 0===e?this.env.renderer:e;return e.renderPreview(this,b)}},{key:"startStepping",value:function(){var b=Array.from(arguments),e="number"===typeof b[0]?
b.shift():null,l=b.shift();b=new ac.TargetScript(this,l,b);this.removeEqualScripts(b);this._tickingScripts.push(b);b.startTicking(e);return b}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){ac.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(b){var e=this._tickingScripts.filter(function(l){return l.selector===b});this.stopScripts(e)}},{key:"stopScripts",value:function(b){ac.arr.invoke(b,
"stop");this._tickingScripts=ac.arr.withoutAll(this._tickingScripts,b)}},{key:"suspendStepping",value:function(){this._tickingScripts&&ac.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return b.suspendStepping()})}},{key:"resumeStepping",value:function(){ac.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return ac.arr.invoke(b._tickingScripts,"resume")})}},
{key:"removeEqualScripts",value:function(b){this.stopScripts(this._tickingScripts.filter(function(e){return e.equals(b)}))}},{key:"addComment",value:function(b,e){e=void 0===e?ac.pt(0,0):e;var l=this,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(System.import("lively.collab"),2):3!=y.nextAddress?(p=y.yieldResult,q=p.Comment,u=p.CommentBrowser,w=new q(b,e),l.comments.push(w),y.yield(u.addCommentForMorph(w,l),3)):y.return(w)})}},{key:"removeComment",
value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(System.import("lively.collab"),2);l=q.yieldResult;p=l.CommentBrowser;e.comments=e.comments.filter(function(u){return!b.equals(u)});p.removeCommentForMorph(b,e);q.jumpToEnd()})}},{key:"emptyComments",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(System.import("lively.collab"),2);e=p.yieldResult;
l=e.CommentBrowser;b.comments.forEach(function(q){return l.removeCommentForMorph(q,b)});b.comments=[];p.jumpToEnd()})}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(b){this._commands&&this.removeCommands(this._commands);this.addCommands(b)}},{key:"commandsIncludingOwners",get:function(){return ac.arr.flatmap([this].concat(this.ownerChain()),function(b){return ac.arr.sortByKey(b.commands,"name").map(function(e){return{target:b,command:e}})})}},{key:"addCommands",
value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[b],undo:{target:this,selector:"removeCommands",args:[b]}},function(){e.removeCommands(b);e._commands=(e._commands||[]).concat(b)})}},{key:"removeCommands",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[b],undo:{target:this,selector:"addCommands",args:[b]}},function(){var l=b.map(function(q){return"string"===typeof q?q:q.name}),p=(e._commands||
[]).filter(function(q){return!l.includes(q.name)});p.length?e._commands=p:delete e._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||ac.defaultCommandHandler}},{key:"lookupCommand",value:function(b){return(b=this.commandHandler.lookupCommand(b,this))&&b.command?b:null}},{key:"execCommand",value:function(b,e,l,p){return this.commandHandler.exec(b,this,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(b){return this.getProperty(b)},
defaultSetter:function(b,e){this.setProperty(b,e)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(b){b||(b=ac.getClassName(this),b=ac.string.findArticle(b)+b);this.name=b}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(b){this.setProperty("isComponent",b);b&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(b){this.master&&this.master.equals(b)||
(this.setProperty("master",b?ac.ComponentPolicy.for(this,b):0==b?!1:null),b&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(b){b&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",b)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(b){b&&!b.isShadowObject&&(b=new ac.ShadowObject(b),b.morph=this);this.setProperty("dropShadow",b)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!ac.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:ac.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:ac.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:ac.pt(10,10),set:function(b){var e=this.extent;this.setProperty("extent",b);this.origin.equals(ac.pt(0,
0))||(b=ac.pt(b.x/e.x,b.y/e.y),this.adjustOrigin(this.origin.scaleByPt(b)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(b){return this.extent=ac.pt(b,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(b){return this.extent=ac.pt(this.extent.x,b)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(b){return this.moveBy(ac.pt(b-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(b){return this.moveBy(ac.pt(b-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(b){return this.moveBy(ac.pt(0,b-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(b){return this.moveBy(ac.pt(0,b-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(b){return this.align(this.center,b)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(b){return this.align(this.topLeft,b)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(b){return this.align(this.topRight,b)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(b){return this.align(this.bottomRight,b)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(b){return this.align(this.bottomLeft,b)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(b){return this.align(this.bottomCenter,b)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(b){return this.align(this.topCenter,b)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(b){return this.align(this.leftCenter,b)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(b){return this.align(this.rightCenter,b)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:ac.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(b){b||this.makeDirty();
this.setProperty("visible",b)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(b){var e=this,l=this.layout,p=l&&l.isEnabled();p&&l.disable();this.submorphs.forEach(function(q){return b.includes(q)||q.remove()});b.forEach(function(q,u){return e.submorphs[u]!==q&&e.addMorph(q,e.submorphs[u])});p&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.isClip()||(this.scroll=ac.pt(0,0))}},scroll:{group:"geometry",defaultValue:ac.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(b){var e=b.x;b=b.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),p=l.y;e=Math.max(0,Math.min(l.x,e));b=Math.max(0,Math.min(p,b));this.setProperty("scroll",ac.pt(e,b));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:ac.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(b){this._cachedStyleClasses=null;this.setProperty("styleClasses",ac.arr.withoutAll(b,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(b){b&&
(b.container=this);this.setProperty("layout",b)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(b){"style"in b&&(this.borderStyleLeft=b.style);"width"in b&&(this.borderWidthLeft=b.width);"color"in b&&(this.borderColorLeft=b.color);"radius"in b&&(this.borderRadiusLeft=
b.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(b){"style"in b&&(this.borderStyleRight=b.style);"width"in b&&(this.borderWidthRight=b.width);"color"in b&&(this.borderColorRight=b.color);"radius"in b&&(this.borderRadiusRight=b.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(b){"style"in b&&(this.borderStyleBottom=b.style);"width"in b&&(this.borderWidthBottom=b.width);"color"in b&&(this.borderColorBottom=b.color);"radius"in b&&(this.borderRadiusBottom=b.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(b){"style"in b&&(this.borderStyleTop=b.style);"width"in b&&(this.borderWidthTop=b.width);"color"in b&&(this.borderColorTop=b.color);"radius"in b&&(this.borderRadiusTop=b.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderWidth");return Object.assign({},
b,{valueOf:function(){return b.left}})},set:function(b){ac.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderWidth",b)}}},ac.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderRadius");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||
(b=0);ac.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});b.isRectangle&&(b={left:b.left(),right:b.right(),top:b.top(),bottom:b.bottom()});this.setProperty("borderRadius",b)}}},ac.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var b=this.getProperty("borderStyle");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){ac.obj.isString(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderStyle",b)}}},ac.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:ac.Color.white,left:ac.Color.white,bottom:ac.Color.white,right:ac.Color.white,valueOf:function(){return ac.Color.white}},
get:function(){var b=this.getProperty("borderColor");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||(b=ac.Color.white);b.isColor&&(b={top:b,left:b,right:b,bottom:b});this.setProperty("borderColor",b?ac.obj.extract(b,["top","left","right","bottom"],function(e,l){return ac.obj.isArray(l)?ac.Color.fromTuple(l):l}):b)}}},ac.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var b=this;return{get style(){return b.borderStyle},set style(e){b.borderStyle=e},get width(){return b.borderWidth},set width(e){b.borderWidth=e},get color(){return b.borderColor},set color(e){b.borderColor=e},get borderRadius(){return b.borderRadius},set borderRadius(e){b.borderRadius=e}}},set:function(b){"style"in b&&(this.borderStyle=b.style);"width"in b&&(this.borderWidth=b.width);"color"in b&&(this.borderColor=b.color);"radius"in b&&(this.borderRadius=b.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var b=this.propertiesAndPropertySettings(),e=b.properties,l=[];b=$jscomp.makeIterator(b.order);for(var p=b.next();!p.done;p=b.next())p=p.value,e[p].isStyleProp&&l.push(p);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var b=this.styleProperties,e={},l=0;l<b.length;l++){var p=b[l];e[p]=this[p]}return e}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(b){var e=ac.arr.without(ac.obj.keys(this.installedFonts||
{}),"_rev"),l=ac.arr.without(ac.obj.keys(b||{}),"_rev");this.setProperty("installedFonts",b);this.ensureInstalledFonts(e,l)},get:function(){return this.getProperty("installedFonts")||{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var b=this,e=[];b&&b!==Object;)e.push(b[Symbol.for("__LivelyClassName__")]),b=b[Symbol.for("lively-instance-superclass")];
return this._styleClasses=e}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1667,end:82521})}(void 0));ac.Morph=Vi;ac.Morph=Vi;ac.Morph=Vi;var Su=za("W",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?
d.Ellipse:d.Ellipse=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var b=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return b.borderRadiusLeft}}}},
borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82530,end:83287})}(ac.Morph));ac.Ellipse=Su;ac.Ellipse=Su;ac.Ellipse=Su;var Nx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?d.Triangle:d.Triangle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.update()}},{key:"onChange",value:function(b){("extent"==b.prop||"direction"==b.prop||"fill"==b.prop&&b.value)&&this.update();Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"update",value:function(){var b=this.extent,e=b.x;b=b.y;e!=b&&(this.extent=ac.pt(Math.max(e,b),Math.max(e,b)));this.origin=ac.pt(e/2,b/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;e={width:e/2,style:"solid",
color:l};b={width:b/2,style:"solid",color:ac.Color.transparent};switch(this.direction){case "down":var p="borderLeft";var q="borderRight";var u="borderTop";break;case "up":p="borderLeft";q="borderRight";u="borderBottom";break;case "left":p="borderBottom";q="borderTop";u="borderRight";break;case "right":p="borderBottom",q="borderTop",u="borderLeft"}l={};Object.assign(this,(l[p]=b,l[q]=b,l[u]=e,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},
triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:83296,end:84754})}(ac.Morph);ac.Triangle=Nx;ac.Triangle=Nx;ac.Triangle=Nx;var Tu=za("S",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("Image")&&"function"===typeof d.Image?d.Image:d.Image=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"__deserialize__",value:function(b,e,l,p){this._isDeserializing=!0;Kb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p)}},{key:"__after_deserialize__",value:function(b,e,l){delete this._isDeserializing;Kb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",
this).call(this,b,e,l)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var b=this.naturalExtent;return b.x/b.y}},{key:"setWidthKeepingRatio",value:function(b){this.width=b;this.height=b/this.ratio}},{key:"setHeightKeepingRatio",value:function(b){this.width=this.ratio*b;this.height=b}},{key:"loadUrl",value:function(b,e){var l=this;e=void 0===e?this.autoResize:e;var p=this.autoResize;this.autoResize=e;this.imageUrl=b;return ac.promise.finally(this.whenLoaded(),function(){return l.autoResize=
p})}},{key:"whenLoaded",value:function(){var b=this;return this.isLoaded?Promise.resolve(this):new Promise(function(e,l){var p=b.imageUrl;b.imageElement(function(q){b.imageUrl!==p&&l(Error("url changed ("+p+" => "+b.imageUrl+")"));b.naturalExtent=ac.pt(q.width,q.height);b.isLoaded=!0;e(b)})})}},{key:"determineNaturalExtent",value:function(){var b=this;return this.whenLoaded().then(function(){return b.naturalExtent})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(b){var e=this;return new Promise(function(l,p){var q=e.env.domEnv.document.createElement("img");q.onload=function(){l(q);"function"===typeof b&&b(q)};q.src=e.imageUrl})}},{key:"canvasElementAndContext",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e=b.env.domEnv.document,u.yield(b.imageElement(),2);l=u.yieldResult;p=e.createElement("canvas");q=p.getContext("2d");p.width=l.width;p.height=l.height;q.drawImage(l,0,0,l.width,l.height);return u.return({canvas:p,ctx:q,image:l})})}},{key:"imageData",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(e.canvasElementAndContext(),2);l=E.yieldResult;p=l.ctx;q=l.image;b||(b=ac.rect(0,0,q.width,
q.height));u=b;w=u.x;y=u.y;A=u.width;C=u.height;return E.return(p.getImageData(w,y,A,C))})}},{key:"pixelAt",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(e.imageData(b.extent(ac.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(l=ac.Color,p=l.fromTuple8Bit,q.yield(e.pixelAt(b),2)):q.return(p.call(l,
q.yieldResult))})}},{key:"loadArrayBuffer",value:function(b,e){b=new Uint8Array(b);b=new Blob([b],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(b);this.makeDirty()}},{key:"convertToBase64",value:function(){var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=b.imageUrl,l=e.slice(e.lastIndexOf(".")+1,e.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(l)||
(l="gif"),e.startsWith("http")||(e=ac.location.origin+"/"+e),A.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=A.nextAddress)return p=A.yieldResult,q=p.runCommand,u='curl --silent "'+e+'" | openssl base64',A.yield(q(u).whenDone(),3);w=A.yieldResult;y=w.stdout;return A.return(b.loadUrl("data:image/"+l+";base64,"+y,!1))})}},{key:"downloadImage",value:function(){var b=this.imageUrl;if(b.match(/^data:image/)){var e=this.name||"image-from-lively";var l=b.match(/image\/([^;]+)/);l&&l[1]&&
(e+="."+l[1])}else e||(e=ac.arr.last(b.split("/")));l=document.createElement("a");l.download=e;l.href=b;l.click()}},{key:"convertTo",value:function(b,e){e||(e=1);var l=this.canvasElementAndContext(),p=l.ctx,q=l.canvas;l=l.image;var u=this.width,w=this.height;q.width=l.width;q.height=l.height;p.drawImage(l,0,0,u,w);return this.loadUrl(q.toDataURL(b,e),!1)}},{key:"resampleImageToFitBounds",value:function(){var b=this,e,l,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(b.canvasElementAndContext(),2);e=I.yieldResult;l=e.ctx;p=e.canvas;q=e.image;u=b;w=u.width;y=u.height;A=q;C=A.width;E=A.height;p.width=C;p.height=E;l.drawImage(q,0,0,w,y);L=l.getImageData(0,0,C,E);p.width=w;p.height=y;l.putImageData(L,0,0);return I.return(b.loadUrl(p.toDataURL(),!1))})}},{key:"crop",value:function(b){var e=this.canvasElementAndContext(),l=e.ctx,p=e.canvas;e=e.image;var q=this.innerBounds(),u=e.width,w=e.height;b=q.intersection(b);b=new ac.Rectangle(b.x/
q.width,b.y/q.height,b.width/q.width,b.height/q.height);b=$jscomp.makeIterator((new ac.Rectangle(0,0,u,w)).divide([b])).next().value;p.width=u;p.height=w;l.drawImage(e,0,0,u,w);e=l.getImageData(b.x,b.y,b.width,b.height);p.width=b.width;p.height=b.height;l.putImageData(e,0,0);return this.loadUrl(p.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:b.imageUrl.startsWith("data:")?"":b.imageUrl,requester:b,selectInput:!0}),2);e=l.yieldResult;"string"===typeof e&&(b.imageUrl=e);l.jumpToEnd()})}},{key:"menuItems",value:function(b){var e=this;b=Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this,b);b.unshift(["change image url...",function(){return e.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(e.world().visibleBounds().width/e.naturalExtent.x,
e.world().visibleBounds().height/e.naturalExtent.y);e.extent=e.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.determineNaturalExtent(),2)):p.return(l.extent=p.yieldResult)})}],["resample image to fit current bounds",function(){return e.resampleImageToFitBounds()}],{isDivider:!0});return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},
{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(b){var e=this;this.isLoaded=!1;this.setProperty("imageUrl",b);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){e.imageUrl===b&&(e.isLoaded=!0,l&&(e.extent=e.naturalExtent))})}},fill:{defaultValue:ac.Color.transparent},naturalExtent:{defaultValue:null},
isLoaded:{defaultValue:!1,serialize:!1},autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:84763,end:94132})}(ac.Morph));ac.Image=Tu;ac.Image=Tu;ac.Image=Tu;var KB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("PathPoint")&&"function"===typeof d.PathPoint?d.PathPoint:d.PathPoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){e=void 0===e?{}:e;this.path=b;this._isSmooth=e.isSmooth||!1;this.x=e.position?e.position.x:e.x||0;this.y=e.position?e.position.y:e.y||0;this._controlPoints=e.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections",
"$$controlPoints","$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(b){this._isSmooth!==b&&(this._isSmooth=b,this.adaptControlPoints(b))}},{key:"position",get:function(){return ac.pt(this.x,this.y)}},{key:"position",set:function(b){var e=b.y;this.x=b.x;this.y=e;this.path.makeDirty()}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var b=new ac.ExpressionSerializer;return new ac.PathPoint(this.path,b.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:ac.pt(0,0),previous:ac.pt(0,0)}}},{key:"controlPoints",set:function(b){var e=b=void 0===b?{}:b;b=e.next;e=e.previous;this._controlPoints={next:b?ac.Point.fromLiteral(b):ac.pt(0,0),previous:e?ac.Point.fromLiteral(e):ac.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(b){this.moveControlPoint("next",b)}},{key:"movePreviousControlPoint",value:function(b){this.moveControlPoint("previous",
b)}},{key:"moveControlPoint",value:function(b,e){var l=this.controlPoints[b];l=l?l.addPt(e):e;e="next"==b?"previous":"next";var p=this.controlPoints[e];this.isSmooth&&(p=l.negated().normalized().scaleBy(p.r()));var q={};this.controlPoints=(q[b]=l,q[e]=p,q);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(b,e,l,p){b=ac.pt(b.x,b.y);e=ac.pt(e.x,e.y);b=e.subPt(b);var q=b.scaleBy(1/b.r());l=e.subPt(l).dotProduct(q);return e.subPt(q.scaleBy(Math.max(1,Math.min(l,b.r())))).addXY(p,p)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(b,e){var l=this.copy();l.position=l.position.interpolate(b,e);return l}},{key:"adaptControlPoints",value:function(b){var e=this.nextVertex,l=this.previousVertex,p=this.position,q=this.path,u=q.vertices,w=u.indexOf(this),y=0===w;u=w===u.length-1;l=l?l.position:p;e=e?e.position:p;b?(b=this.pointOnLine(l,e,p,q.borderWidth),
this.controlPoints={previous:y?ac.pt(0,0):b.subPt(e),next:b.subPt(l)}):this.controlPoints={previous:y?ac.pt(0,0):l.subPt(p).scaleBy(.5),next:u?ac.pt(0,0):e.subPt(p).scaleBy(.5)};q.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:94141,end:98106})}(void 0);ac.PathPoint=KB;ac.PathPoint=KB;ac.PathPoint=KB;var Uu=za("Q",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Path")&&"function"===typeof d.Path?d.Path:d.Path=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},ac.obj.dissoc(b,"origin")));this.adjustOrigin(b.origin||this.origin);this.position=b.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(b,e,l){Kb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);e=this.getProperty("draggable");e!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(b.props.draggable={value:e});if(e=this.borderColor.valueOf())b.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:e.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",ac.getClassName(e)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(b){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(b){return b.copy()})}},{key:"updateBounds",value:function(b){b=void 0===b?this.vertices:b;if(b.length&&!this._adjustingVertices){this._adjustingVertices=!0;var e=this.origin,l=this.extent,p=e.x/l.x;l=e.y/l.y;var q=[];b.forEach(function(w,y){var A=w.isSmooth,C=w.position,E=w.controlPoints||{};w=E.next;E=E.previous;q.push(C);A&&0<y&&y<b.length-
1&&q.push(C.addPt(w),C.addPt(E))});e=ac.Rectangle.unionPts(q);p=ac.pt(e.width*p,e.height*l);var u=e.topLeft();b.forEach(function(w){return w.moveBy(u.negated())});this.moveBy(this.getTransform().transformDirection(u));this.extent=e.extent().maxPt(ac.pt(this.borderWidth,this.borderWidth));this.origin=p;this._adjustingVertices=!1}}},{key:"onChange",value:function(b){var e=b.prop,l=b.value,p=b.prevValue,q=this._adjustingVertices,u=this._adjustingOrigin;"extent"==e&&l&&p&&!q&&this.adjustVertices(l.scaleByPt(p.inverted()));
(!u&&"vertices"===e||"borderWidthLeft"===e)&&this.updateBounds("vertices"==e?l:this.vertices);q||"origin"!==e||this.updateBounds(this.vertices);Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"vertexBefore",value:function(b){b=this.vertices.indexOf(b)-1;return this.vertices[0<=b?b:this.vertices.length-1]}},{key:"vertexAfter",value:function(b){b=this.vertices.indexOf(b)+1;return this.vertices[b>this.vertices.length-1?0:b]}},{key:"adjustVertices",value:function(b){var e=
this,l=this.vertices;l&&l.forEach(function(p){var q=p.controlPoints,u=q.next;q=q.previous;u=u.scaleByPt(b);q=q.scaleByPt(b);p.position=p.position.addPt(e.origin).scaleByPt(b).subPt(e.origin);p.controlPoints={next:u,previous:q}})}},{key:"adjustOrigin",value:function(b){this._adjustingOrigin=!0;var e=this.origin;this.vertices.forEach(function(l){return l.position=e.subPt(b).addXY(l.x,l.y)});Kb._get(Object.getPrototypeOf(k.prototype),"adjustOrigin",this).call(this,b);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(b,e){e=void 0===e?null:e;var l=this.vertices;e="number"===typeof e?e:e&&e.isPathPoint?l.indexOf(e):void 0;"number"===typeof e&&-1<e?l.splice(e,0,b):l.push(b);this.vertices=l}},{key:"addVertexCloseTo",value:function(b){var e=this.verticesCloseTo(b),l=e.closest,p=l.length;l=l.vertex;e=e.next;b=this.findClosestPointOnPath(b,10,3);return this.addVertex(b.point,b.length<=p?l:e?e.vertex:null)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderPath(this)}},{key:"_pathNode",get:function(){var b=ac.PropertyPath("env.renderer").get(this);return(b=b&&b.getNodeForMorph(this))&&b.querySelector("#svg"+ac.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(b,e){e=void 0===e?!0:e;for(var l=this.vertices,p=Infinity,q=-1,u=0;u<l.length;u++){var w=l[u].position.dist(b);w>=p||(p=w,q=u)}b=0===q?null:{index:q-1,vertex:l[q-1]};p=q===l.length-1?null:{index:q+1,vertex:l[q+1]};l={index:q,vertex:l[q]};
e&&(e=this._pathNode,b&&(q=this.findClosestPointOnPath(b.vertex.position,6,3,e).length,b.length=q),p&&(q=this.findClosestPointOnPath(p.vertex.position,6,3,e).length,p.length=q),e=this.findClosestPointOnPath(l.vertex.position,20,3,e).length,l.length=e);return{previous:b,next:p,closest:l}}},{key:"findClosestPointOnPath",value:function(b,e,l,p){function q(u,w,y,A,C,E,L){y=void 0===y?10:y;A=void 0===A?3:A;C=void 0===C?0:C;E=void 0===E?u.getTotalLength():E;L=void 0===L?0:L;var I=E,V=y;E=[];var T=(C-I)/
(V-1),Y=0;E.push([ac.Point.ensure(u.getPointAtLength(I)),I,Y]);for(Y=1;Y<V-1;Y++){var na=I+Y*T;E.push([ac.Point.ensure(u.getPointAtLength(na)),na,Y])}E.push([ac.Point.ensure(u.getPointAtLength(C)),C,Y]);C=Infinity;I=-1;V=$jscomp.makeIterator(E);for(T=V.next();!T.done;T=V.next())Y=$jscomp.makeIterator(T.value),T=Y.next().value,Y.next(),Y=Y.next().value,T=w.dist(T),T>=C||(C=T,I=Y);if(L>=A)return w=$jscomp.makeIterator(E[I]),u=w.next().value,w=w.next().value,{point:u,length:w};C=E[Math.max(0,I-1)][1];
E=E[Math.min(E.length-1,I+1)][1];return q(u,w,y,A,C,E,L+1)}p||(p=(p=this.env.renderer.getNodeForMorph(this))&&p.querySelector("#svg"+ac.string.regExpEscape(this.id)));return p?q(p,b,e,l):{length:0,point:b}}},{key:"onDragStart",value:function(b){var e=b.domEvt.target,l=(new ac.PropertyPath("attributes.class.value")).get(e);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),b=l.next().value,l=l.next().value,this._controlPointDrag={marker:e,
n:Number(b)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return Kb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){if(!this._controlPointDrag)return Kb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);var e=this._controlPointDrag,l=e.n,p=e.ctrlN,q=this.vertices;if(e=q[l])b=this.getInverseTransform().transformDirection(b.state.dragDelta),void 0===p?(e.moveBy(b),b=q[l-1],q=q[l+1],b&&10>b.position.dist(e.position)?
this._controlPointDrag.maybeMerge=[l-1,l]:q&&10>q.position.dist(e.position)?this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===p?e.movePreviousControlPoint(b):2===p&&e.moveNextControlPoint(b)}},{key:"onDragEnd",value:function(b){b=this.vertices;var e=this._controlPointDrag;if(e&&(e=e.maybeMerge,delete this._controlPointDrag,e)){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;b[e].controlPoints.next=b[l].controlPoints.next;b.splice(l,1);this.vertices=
b}}},{key:"onDoubleMouseDown",value:function(b){this.showControlPoints&&this.addVertexCloseTo(this.localize(b.position))}},{key:"menuItems",value:function(){var b=this,e=ac.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=ac.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";e[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?e:l),[" control points"]),function(){return b.showControlPoints=!b.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
e:l),[" smooth"]),function(){return b.isSmooth=!b.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(b){if(!this._pathNode)return ac.pt(0,0);b=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*b)||ac.pt(0,0);return ac.pt(b.x,b.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(b){b||(b=ac.Color.white);if(b.isColor||b.isGradient)b={top:b,left:b,right:b,bottom:b};this.setProperty("borderColor",ac.obj.extract(b,["top","left","right","bottom"],function(e,l){return ac.obj.isArray(l)?ac.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(b){var e=this,l=this.isSmooth;
this._adjustingVertices=!0;b=b.map(function(p){return p.isPathPoint?Object.assign(p,{path:e}):new ac.PathPoint(e,Object.assign({isSmooth:l},p))});this.setProperty("vertices",b);this._adjustingVertices=!1;this.updateBounds(b)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(b){this.setProperty("isSmooth",b);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(e){return e.isSmooth=b}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:98115,end:111865})}(ac.Morph));ac.Path=Uu;ac.Path=Uu;ac.Path=Uu;var Ox=za("N",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){if(b.vertices&&2<b.vertices.length)Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111874,end:112128})}(ac.Path));ac.Polygon=Ox;ac.Polygon=Ox;ac.Polygon=Ox;var Px=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var b=this.line,e=this.height,l=b.toVector();this.setProperty("position",this.position.addPt(b.perpendicularLine(0,e,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:ac.Color.black},height:{defaultValue:1},line:{defaultValue:ac.Line.fromCoords(0,0,0,0),set:function(b){this.setProperty("line",b);this.update(b)}},start:{derived:!0,after:["line"],get:function(b){return this.line.start},set:function(b){this.line=this.line.withStart(b)}},end:{derived:!0,after:["line"],get:function(b){return this.line.end},set:function(b){this.line=this.line.withEnd(b)}},position:{derived:!0,after:["line"],get:function(b){return this.start},set:function(b){var e=
b.subPt(this.start),l=this.rotation;this.line=new ac.Line(b,this.end.addPt(e));this.rotation=l}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:112137,end:113629})}(ac.Morph);ac.LineMorph=Px;ac.LineMorph=Px;ac.LineMorph=Px;var Zma=Object.freeze({__proto__:null,Morph:Vi,Ellipse:Su,Triangle:Nx,
Image:Tu,PathPoint:KB,Path:Uu,Polygon:Ox,LineMorph:Px}),ce=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");ce.getAllPartResources=XN;ce.loadPart=qG;ce.savePart=YN;ce.interactivelySavePart=eA;ce.interactivelyLoadObjectFromPartsBinFolder=ZN;ce.interactivelySaveObjectToPartsBinFolder=$N;ce.saveObjectToPartsbinFolder=aO;ce.loadObjectFromPartsbinFolder=rG;ce.buildCommitEditor=bO;ce.resource=Dc;ce.Resource=zf;ce.registerExtension=Hd;ce.Path=Ag;ce.obj=df;ce.date=op;ce.promise=Vf;ce.HorizontalLayout=
so;ce.VerticalLayout=$r;ce.morph=$i;ce.Morph=Vi;ce.pt=bh;ce.Color=of;ce.Rectangle=Od;ce.connect=Jj;ce.emit=Xp;ce.SnapshotPackageHelper=WI;ce.ensureCommitInfo=Tz;ce.MorphicDB=Gp;ce.createMorphSnapshot=hu;ce.getClassName=Pn;ce.getAllPartResources=XN;ce.getAllPartResources=XN;ce.loadPart=qG;ce.loadPart=qG;ce.savePart=YN;ce.savePart=YN;ce.interactivelySavePart=eA;ce.interactivelySavePart=eA;ce.interactivelyLoadObjectFromPartsBinFolder=ZN;ce.interactivelyLoadObjectFromPartsBinFolder=ZN;ce.interactivelySaveObjectToPartsBinFolder=
$N;ce.interactivelySaveObjectToPartsBinFolder=$N;ce.saveObjectToPartsbinFolder=aO;ce.saveObjectToPartsbinFolder=aO;ce.loadObjectFromPartsbinFolder=rG;ce.loadObjectFromPartsbinFolder=rG;var qR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){this.commit=b;this.snapshot=e;this._db=l}},{key:"db",get:function(){return this._db||ce.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(b,e){var l=this,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){p=b;q=p._id;u=p.name;w=p.type;if(!q)throw Error("No id of commit, cannot save!");return y.yield(l.db.commit(w,u,e,b,void 0,q),2)}b=y.yieldResult;l.commit=b;l.snapshot=
e;return y.return(b)})}},{key:"interactivelySaveModifiedSnapshot",value:function(b,e){var l=this,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){p=ce.promise.deferred();q=p.promise;u=p.resolve;w=p.reject;y=l;Object.assign(ce.buildCommitEditor(),{commit:Object.assign({},l.commit,{},b),cancel:function(){(this.getWindow()||this).remove();w("canceled")},accept:function(){var C=this,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.setCatchFinallyBlocks(2),
I.yield(y.saveModifiedSnapshot(C.commit,e),4);if(2!=I.nextAddress)return E=I.yieldResult,(C.getWindow()||C).remove(),u(C.commit=E),I.leaveTryBlock(0);L=I.enterCatchBlock();C.showError(L);w(L);I.jumpToEnd()})}}).openInWindow({title:"commit"});return A.return(q)})}},{key:"interactivelyEditMetadata",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(e.interactivelySaveModifiedSnapshot(e.commit,e.snapshot),2);l=p.yieldResult;
"function"===typeof b&&b({commit:l,snapshot:e.snapshot});return p.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(b){var e=this,l,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return l=e,p=l.commit,q=l.snapshot,u=p,w=u._id,y=u.name,A=u.type,I.yield(System.import("lively.ide/text-editor.js"),2);E=I.yieldResult;L=E.default;L.openURL("<"+A+"/"+y+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(V){var T,
Y,na,Ba,F,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:if(T=q){P.jumpTo(2);break}return P.yield(e.db.fetchSnapshot(void 0,void 0,w),3);case 3:T=P.yieldResult;case 2:Y=T;na=JSON.stringify(Y,null,2);if(na===C){P.jumpTo(4);break}return P.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Ba=P.yieldResult,!Ba)return P.return({saved:!1,
message:"canceled"});case 4:return F=JSON.parse(V.ui.contentText.textString),P.yield(e.interactivelySaveModifiedSnapshot(e.commit,F),6);case 6:return p=P.yieldResult,q=F,C=V.ui.contentText.textString,W={saved:!0,snapshot:F,commit:p},"function"===typeof b&&b(W),P.return(W)}})},customLoadContentAction:function(V,T){var Y,na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return(Y=q)?Ba.jumpTo(2):Ba.yield(e.db.fetchSnapshot(void 0,void 0,w),3);2!=Ba.nextAddress&&
(Y=Ba.yieldResult);na=Y;return Ba.return({content:C=JSON.stringify(na,null,2),url:A+"/"+y+".json"})})}});I.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(b){var e=this,l,p,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){switch(T.nextAddress){case 1:l=e;p=l.commit;q=l.snapshot;u=p;w=u._id;if(y=q){T.jumpTo(2);break}return T.yield(e.db.fetchSnapshot(void 0,void 0,w),3);case 3:y=T.yieldResult;case 2:return A=y,C=(new ce.SnapshotPackageHelper(A)).filesInPackages(),
E=C.map(function(Y){return{isListItem:!0,string:Y.url,value:Y}}),T.yield($world.filterableListPrompt("Select file to edit",E,{historyId:"object-serialization-debugger-hist"}),4);case 4:return L=T.yieldResult,I=$jscomp.makeIterator(L.selected),(V=I.next().value)?T.return(e.interactivelyEditFileInSnapshotPackage(V,b)):T.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(b,e,l){var p=this,q,u,w,y,A,C,E,L,I,V,T,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:q=
p;u=q.snapshot;w=q.commit;y=w._id;A=w.name;C=w.type;if(E=u){na.jumpTo(2);break}return na.yield(p.db.fetchSnapshot(void 0,void 0,y),3);case 3:E=na.yieldResult;case 2:return L=E,I=b.get(L),na.yield(System.import("lively.ide/text-editor.js"),4);case 4:return V=na.yieldResult,T=V.default,Y=T.openURL("<"+C+"/"+A+" - "+b.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(Ba){var F,W,P,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:F=
b.get(L);if(F===I){fa.jumpTo(2);break}return fa.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(W=fa.yieldResult,!W)return fa.return({saved:!1,message:"canceled"});case 2:return b.set(L,Ba.ui.contentText.textString),P=p,fa.yield(p.interactivelySaveModifiedSnapshot(p.commit,L),4);case 4:return P.commit=fa.yieldResult,S={commit:p.commit,snapshot:L,saved:!0},"function"===typeof e&&
e(S),fa.return(S)}})},customLoadContentAction:function(Ba,F){return{content:b.get(L),url:b.url}}}),l&&Y.whenRendered().then(function(){return Y.lineNumber=l.row}),na.return(Y)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9614,end:14833})}(void 0);ce.SnapshotEditor=qR;ce.SnapshotEditor=qR;ce.SnapshotEditor=qR;ce.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;var Qx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(b,e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?p.yield(ce.resource(l.url.replace("part://","styleguide://")).dirList(b,e),2):p.return(p.yieldResult)})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var b=this,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(ce.resource(b.url.replace("part://","styleguide://")).read(),2);case 2:e=y.yieldResult;if(!e.master){y.jumpTo(3);break}return y.yield(e.master.whenReady(),3);case 3:l=e.copy();l.isComponent=!1;l.name="a"+ce.getClassName(l);l.withAllSubmorphsDoExcluding(function(A){A!=l&&A.master||delete A._parametrizedProps},function(A){return A.master&&A!=l});p=l.master;
l.master=e;if(!l._pool.mastersInSubHierarchy){y.jumpTo(5);break}q=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);u=q.next();case 6:if(u.done){y.jumpTo(5);break}w=u.value;if(p==w){y.jumpTo(7);break}return y.yield(w.applyIfNeeded(!0),9);case 9:w.derivedMorph.ownerChain().includes(l)||w.derivedMorph.requestMasterStyling();case 7:u=q.next();y.jumpTo(6);break;case 5:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(A){if("function"===typeof A.onLoad)A.onLoad()}),y.return(l)}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14890,end:16664})}(ce.Resource);ce.PartResource=Qx;ce.PartResource=Qx;ce.PartResource=Qx;var gJ={name:"part",matches:function(a){return a.match(ce.partURLRe)},
resourceClass:ce.PartResource};ce.resourceExtension=gJ;ce.resourceExtension=gJ;ce.resourceExtension=gJ;ce.registerExtension(ce.resourceExtension);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("CommitEditor")&&"function"===typeof d.CommitEditor?d.CommitEditor:d.CommitEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onLoad",value:function(){ce.connect(this.ui.okButton,
"fire",this,"accept");ce.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:ce.pt(420,24)},layout:{initialize:function(){this.layout=new ce.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(b){this._commit=b;var e=b.type,l=b.timestamp,
p=b.author,q=b.tags,u=b.description,w=b.metadata,y=this.ui,A=y.typeInput,C=y.timestampInput,E=y.authorNameInput,L=y.authorEmailInput,I=y.authorRealmInput,V=y.tagsInput,T=y.descriptionInput,Y=y.messageInput,na=y.metadataInput;y.nameInput.input=b.name;A.input=e;C.input=String(new Date(l));E.input=p.name;L.input=p.email;I.input=p.realm;V.input=q.join(" ");T.textString=u;Y.textString="";na.textString=w?JSON.stringify(w,null,2):""},get:function(){var b=this._commit;if(!b)throw Error("commit editor does not have a _commit object");
var e=this.ui,l=e.authorNameInput,p=e.authorEmailInput,q=e.authorRealmInput,u=e.tagsInput,w=e.descriptionInput,y=e.messageInput,A=e.metadataInput,C=e.nameInput.input;e=e.typeInput.input;if(b.name!==C)throw Error("name does not match _commit.name: "+C+" vs "+b.name);if(b.type!==e)throw Error("type does not match _commit.type: "+e+" vs "+b.type);b.author.name=l.input;b.author.email=p.input;b.author.realm=q.input;b.tags=u.input.split(" ").map(function(E){return E.trim()}).filter(Boolean);b.description=
w.textString;b.message=y.textString;b.metadata=A.textString?JSON.parse(A.textString):null;return b}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),
nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var b={type:"input",extent:ce.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:ce.Rectangle.inset(4,4),border:{color:ce.Color.gray,width:1}};this.submorphs=[Object.assign({},b,{name:"name input",placeholder:"name"}),Object.assign({},b,{name:"type input",placeholder:"type"}),Object.assign({},b,{name:"timestamp input",placeholder:"timestamp"}),{layout:new ce.VerticalLayout({resizeSubmorphs:!0,
spacing:3}),submorphs:[Object.assign({},b,{name:"author.name input",placeholder:"author name"}),Object.assign({},b,{name:"author.email input",placeholder:"author email"}),Object.assign({},b,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},b,{name:"tags input",placeholder:"tags"}),Object.assign({},b,{height:70,name:"description input",type:"text"}),Object.assign({},b,{height:70,name:"message input",type:"text"}),Object.assign({},b,{height:70,name:"metadata input",type:"text"}),
{layout:new ce.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16850,end:21944})})(ce.Morph);ce.buildCommitEditor=bO;
ce.buildCommitEditor=bO;var Qk=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");Qk.pt=bh;Qk.Morph=Vi;Qk.morph=$i;Qk.touchInputDevice=Ll;Qk.config=ok;Qk.fun=Qj;var Rx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.currentMorph=b}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(b){return!b.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(b){return b.tooltip||this.notPartOfCurrentTooltip(b)}},{key:"mouseMove",value:function(b){var e=this;if(!Qk.touchInputDevice&&!b.state.draggedMorph){var l=b.hand,p=$world.morphsContainingPoint(b.positionIn($world)).filter(function(y){return y.reactsToPointer||
y.tooltip});p=$jscomp.makeIterator(p.slice(p.indexOf(l)+1));for(var q=p.next();!q.done;q=p.next()){q=q.value;if(w&&!w.ownerChain().includes(q))break;if(q.tooltip){var u=q;break}var w=q}for(;u&&!u.visible;)u=u.morphBeneath(b.positionIn($world));u?this.currentMorph!==u&&this.invalidatesCurrentTooltip(u)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(u,l),this.currentMorph=u):this.currentTooltip?this.currentTooltip.softRemove().then(function(){e.currentTooltip&&!e.currentTooltip.owner&&
(e.currentTooltip=null)}):this.currentMorph=null}}},{key:"mouseDown",value:function(b){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(b,e){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(b,e):this.scheduleTooltipFor(b,e)}},{key:"hoverOutOfMorph",value:function(b){var e=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return e.currentTooltip==l&&(e.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(b,e){var l=this;this.timer=setTimeout(function(){l.currentMorph&&l.showTooltipFor(b,e)},1E3*Qk.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var b=this.currentTooltip;b&&b.remove()}},{key:"showTooltipFor",value:function(b,e){b.tooltip&&b.world()&&!e.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),e=e?e.position.addXY(10,7):b.globalBounds().bottomRight(),this.currentTooltip=
new Qk.Tooltip({position:e,description:b.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:207,end:3202})}(void 0);Qk.TooltipViewer=
Rx;Qk.TooltipViewer=Rx;Qk.TooltipViewer=Rx;var Vu=za("T",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?d.Tooltip:d.Tooltip=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"update",value:function(b){this.position=b.globalBounds().bottomCenter().subPt(b.world().scroll).addPt(Qk.pt(0,7))}},{key:"softRemove",
value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:300}),2);b&&b(e);e.remove();l.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],
derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(b){var e=$jscomp.makeIterator(this.submorphs).next().value;e.value=b;e.fit()}},submorphs:{initialize:function(){this.submorphs=[new Qk.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3211,end:4406})}(Qk.Morph));Qk.Tooltip=Vu;Qk.Tooltip=Vu;Qk.Tooltip=Vu;var $ma=Object.freeze({__proto__:null,TooltipViewer:Rx,Tooltip:Vu}),y5=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");y5.default=Gp;y5.MorphicDB=Gp;var ana=Object.freeze({__proto__:null,MorphicDB:Gp}),Wj=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Wj.nyi=function(a){throw Error("Not yet implemented: "+a);};Wj.string=rg;Wj.promise=Vf;Wj.debugMessageOrder=!1;var Fi=
function(a){this.id=Wj.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};Fi.prototype.isOnline=function(){Wj.nyi("isOnline")};Fi.prototype.open=function(){Wj.nyi("open")};Fi.prototype.close=function(){Wj.nyi("close")};Fi.prototype.remove=function(){Wj.nyi("remove")};Fi.prototype.whenOnline=function(a){var d=this;return Wj.promise.waitFor(a,function(){return d.isOnline()}).then(function(){return d}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?
Error("Timeout in "+d+".whenOnline"):k)})};Fi.prototype.onError=function(a){this.debug&&console.log("["+this+"] error: "+a)};Fi.prototype.removeService=function(a){delete this.actions[a]};Fi.prototype.removeServices=function(a){var d=this;a.forEach(function(k){return d.removeService(k)})};Fi.prototype.addService=function(a,d){this.actions[a]=d};Fi.prototype.addServices=function(a){var d=this;Object.keys(a).forEach(function(k){return d.addService(k,a[k])})};Fi.prototype.ping=function(a){var d=this,
k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return k=Date.now(),q.yield(d.sendToAndWait(a,"l2l-ping",{timestamp:k}),2);b=q.yieldResult;e=b.data;l=e.timestamp;p=Date.now();return q.return({to:l-k,from:p-l,roundtrip:p-k})})};Fi.prototype.send=function(a,d){Wj.nyi("send")};Fi.prototype.sendAndWait=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return k=new Promise(function(q,u){return d.send(a,
q)}),b={},e=d.options.ackTimeout+400,"ackTimeout"in a&&(e=!a.ackTimeout||0>a.ackTimeout?null:a.ackTimeout+400),e?p.yield(Promise.race([Wj.promise.delay(e,b),k]),5):p.yield(k,4);case 4:l=p.yieldResult;p.jumpTo(3);break;case 5:l=p.yieldResult;case 3:if(l===b)throw Error("Timeout sending "+a.action);return p.return(l)}})};Fi.prototype.sendTo=function(a,d,k,b){return this.send({target:a,action:d,data:k},b)};Fi.prototype.sendToAndWait=function(a,d,k,b){return this.sendAndWait(Object.assign({target:a,action:d,
data:k},b))};Fi.prototype.prepareSend=function(a,d){var k=a.target,b=a.action,e=a.messageId,l=a.sender;if(!b)throw Error("Trying to send a message without specifying action!");if(!k)throw Error("Trying to send message "+b+" without specifying target!");e||(a.messageId=Wj.string.newUUID());l||(a.sender=this.id);b=a.n=this._outgoingOrderNumberingByTargets.get(k)||0;this._outgoingOrderNumberingByTargets.set(k,b+1);if("function"===typeof d){l=this;var p=d;d=function(q){var u=l._incomingOrderNumberingBySenders.get(q.sender)||
0;l.debug&&Wj.debugMessageOrder&&console.log("[MSG ORDER] "+l+" received ack for "+q.action+" as msg "+u);try{p.apply(null,arguments)}catch(w){console.error("Error in ack fn of "+l+": "+w.stack)}l._incomingOrderNumberingBySenders.set(q.sender,u+1);setTimeout(function(){return l.invokeOutOfOrderMessages(q.sender)},0)}}this.debug&&Wj.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+b+" ("+a.action+") to "+k);return[a,d]};Fi.prototype.prepareAnswerMessage=function(a,d){return{action:a.action+
"-response",inResponseTo:a.messageId,target:a.sender,data:d,sender:this.id}};Fi.prototype.installEventToMessageTranslator=function(a){var d=this,k=a.onevent;a.onevent=function(b){var e=b.data||[];k.call(this,b);b.data=["*"].concat(e);k.call(this,b)};a.on("*",function(b,e){b&&"object"===typeof b&&b.action&&(e=b,b=e.action);var l=arguments[arguments.length-1];l="function"===typeof l?l:null;(e=e===l?null:e)&&e.data&&("number"===typeof e.n||e.broadcast)&&e.sender?d.receive(e,a,l):(console.warn(d+" received non-conformant message "+
b+":",arguments),"function"===typeof l&&l({data:{error:"invalid l2l message"}}))})};Fi.prototype.receive=function(a,d,k){this.dispatchL2LMessageToSelf(a,d,k)};Fi.prototype.dispatchL2LMessageToSelf=function(a,d,k){var b=this,e=a.action;if(a.broadcast)this.safeInvokeServiceHandler(e,a,k,d);else try{var l=this._incomingOrderNumberingBySenders.get(a.sender)||0,p="register"===e||"unregister";if(!p&&a.n<l)console.error("[MSG ORDER] ["+this+"] received message no. "+a.n+" but expected >= "+l+", dropping "+
e);else if(!p&&a.n>l){this.debug&&Wj.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+e+" ("+a.n+") for later invocation");var q=this._outOfOrderCacheBySenders.get(a.sender);q||(q=[],this._outOfOrderCacheBySenders.set(a.sender,q));q.push([e,a,k,d])}else this.safeInvokeServiceHandler(e,a,k,d),setTimeout(function(){return b.invokeOutOfOrderMessages(a.sender)},0)}catch(u){console.error("Error message ordering when handling "+e+": "+(u.stack||u)),"function"===typeof k&&
k(this.prepareAnswerMessage(a,{isError:!0,error:String(u.stack||u)}))}};Fi.prototype.invokeOutOfOrderMessages=function(a){var d=this._outOfOrderCacheBySenders.get(a);if(d&&d.length){var k=this._incomingOrderNumberingBySenders.get(a)||0;a=d.findIndex(function(b){b=$jscomp.makeIterator(b);b.next();return b.next().value.n===k});-1!==a&&(d.splice(a,1),this.invokeServiceHandler.apply(this,d[a]))}};Fi.prototype.renameTarget=function(a,d){if(a!==d){var k=this._outgoingOrderNumberingByTargets.get(a);this._outgoingOrderNumberingByTargets.delete(a);
this._outgoingOrderNumberingByTargets.set(d,k)}};Fi.prototype.safeInvokeServiceHandler=function(a,d,k,b){try{"function"===typeof this.actions[a]?this.invokeServiceHandler(a,d,k,b):b._events&&Object.keys(b._events).includes(a)||(console.warn("WARNING ["+this+"] Unhandled message: "+a),"function"===typeof k&&k(this.prepareAnswerMessage(d,{isError:!0,error:"message not understood: "+a})))}catch(e){console.error("Error when handling "+a+": "+(e.stack||e)),"function"===typeof k&&k(this.prepareAnswerMessage(d,
{isError:!0,error:String(e.stack||e)}))}};Fi.prototype.invokeServiceHandler=function(a,d,k,b){var e=this;this.debug&&Wj.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+d.n+" ("+d.action+") from "+d.sender);this._incomingOrderNumberingBySenders.set(d.sender,d.n+1);if("function"===typeof k){var l=!1,p=!1,q="ackTimeout"in d?d.ackTimeout:this.options.ackTimeout,u=this._outgoingOrderNumberingByTargets.get(d.sender)||0;this._outgoingOrderNumberingByTargets.set(d.sender,u+1);var w=function(y){p?
console.warn("["+e+"] ackFn for "+d.action+" called after it timed out, dropping answer!"):l?console.warn("["+e+"] ack function called repeatedly when handling "+d.action):(l=!0,k(e.prepareAnswerMessage(d,y)),e.debug&&Wj.debugMessageOrder&&console.log("[MSG ORDER] "+e+" sending "+u+" (ack for "+d.action+")"))};q&&setTimeout(function(){l||(w({isError:!0,error:"Timeout error: "+e+" did not send answer for "+d.action+" after "+q+"ms"}),p=!0)},q)}try{this.actions[a].call(this,this,d,w,b)}catch(y){console.error("["+
this+"] Error handling "+a+": "+(y.stack||y)),w&&w({error:y.stack})}};$jscomp.global.Object.defineProperties(Fi.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(a){this.options.debug=a}}});Wj.L2LConnection=Fi;Wj.default=Fi;var Oq=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),hJ={"l2l-ping":function(a,d,k,b){b=d.sender;d=d.data.timestamp;var e=Date.now();"function"===typeof k&&k({timestamp:e});a.debug&&console.log("[undefined] got ping from "+
b+", time: "+(e-d)+"ms")},"remote-eval":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){return eval(e)}).then(function(l){return k({value:l})}).catch(function(l){l.originalErr&&(l=l.originalErr);console.error("eval error: "+l);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})},"remote-eval-2":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){var l=eval(e);if(!(l instanceof Promise))throw console.error("unexpected eval result:"+l),Error("unexpected eval result:"+
l);return l}).then(function(l){return k(l)}).catch(function(l){console.error("eval error: "+l);l.originalErr&&(l=l.originalErr);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})}};Oq.defaultActions=hJ;Oq.defaultActions=hJ;Oq.defaultActions=hJ;var os={},rR=(os["[broadcast] send"]=function(a,d,k,b){var e=d.sender,l=d.data,p,q,u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){p=l;q=p.action;u=p.broadcast;w=p.room;y=p.namespace;A=p.isSystemBroadcast;C=
p.isMultiServerBroadcast;E=[];C?(console.log(".......isMultiServerBroadcast"),L=a,I=L.id,V=a.getTrackerList(),console.log(V),E=V.map(function(na){return na.id!=I?na.io.nsps["/"+na.namespace]:b.broadcast})):(A&&(y=a.namespace),E.push(y?a.io.nsps["/"+y]:b.broadcast));E.forEach(function(na){console.log(q,{action:q,sender:e,broadcast:!0,data:u});na.to(w).emit(q,{action:q,sender:e,broadcast:!0,data:u})});k&&"function"===typeof k&&(T="message broadcasted to "+w,y&&(T+=" in namespace "+y),1<E.length&&(T+=
" "+E.length+" trackers"),console.log(T),k({status:T}));Y.jumpToEnd()})},os["[broadcast] join room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return q=!1,u=a.io.nsps["/"+a.namespace].adapter.rooms,(w=u[l]&&u[l].sockets&&u[l].sockets[b.id])?(p=e+" already in "+l,y.jumpTo(2)):y.yield(new Promise(function(A,C){return b.join(l,function(E){return E?C(E):A()})}),3);2!=y.nextAddress&&(p=e+" joined "+l,q=!0);
k&&"function"===typeof k&&k({status:p,joined:q});y.jumpToEnd()})},os["[broadcast] leave room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return q=!1,u=a.io.nsps["/"+a.namespace].adapter.rooms,w=u[l]&&u[l].sockets&&u[l].sockets[b.id],w?y.yield(new Promise(function(A,C){return b.leave(l,function(E){return E?C(E):A()})}),3):(p=e+" not in "+l,y.jumpTo(2));2!=y.nextAddress&&(p=e+" left room "+l,q=!0);console.log(p);
k&&"function"===typeof k&&k({left:q,status:p});y.jumpToEnd()})},os["[broadcast] my rooms"]=function(a,d,k,b){k(b.rooms)},os["[broadcast] all rooms"]=function(a,d,k,b){k(a.io.nsps["/"+a.namespace].adapter.rooms)},os["[broadcast] list room members"]=function(a,d,k,b){d=d.data.room;b=a.io;d?(a=b.nsps["/"+a.namespace].adapter.rooms[d],k({room:d,sockets:a?a.sockets:{},length:a?a.length:0})):k({isError:!0,error:"`room` paramerter missing!"})},os.getClients=function(a,d,k){a.removeDisconnectedClients();
k(Array.from(a.clients))},os);Oq.defaultTrackerActions=rR;Oq.defaultTrackerActions=rR;Oq.defaultTrackerActions=rR;var LB={},iJ=(LB.getRoomList=function(a){var d=a.client,k=a.ackFn,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=d._socketioClient.rooms;k(b);e.jumpToEnd()})},LB["ask for"]=function(a,d,k,b){var e=d.sender,l=d.data.query,p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return q=l.match(/password|sudo/i)?"passwordPrompt":
"prompt",w.yield($world[q](l),2);u=w.yieldResult;"function"===typeof k&&k({answer:u});a.debug&&console.log("["+p+"] message 'ask for' from "+e+", query: "+l);w.jumpToEnd()})},LB["open editor"]=function(a,d,k,b){var e=d.data.args,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return e.length?p.yield($world.execCommand("open file for EDITOR",{url:e[0]}),2):(k({error:"no file specified"}),p.return());l=p.yieldResult;"function"===typeof k&&k("aborted"===l?{error:String(l)}:
{status:l});p.jumpToEnd()})},LB.changeWorkingDirectory=function(a,d,k,b){var e=d.data.args,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){l=$jscomp.makeIterator(e||[]);p=l.next().value;q=l.next().value;u="OK";try{if(p)if(q){if(w=$world.getMorphWithId(q))if(w.__lookupSetter__("cwd"))w.cwd=p;else if("function"===typeof w.changeWorkingDirectory)w.changeWorkingDirectory(p);else if("function"===typeof w.pluginFind){if(y=w.pluginFind(function(C){return C.isShellEditorPlugin}))y.cwd=
p}else u="[changeWorkingDirectory] cannot figure pout how to set dir"}else u="[changeWorkingDirectory] No command morph";else u="[changeWorkingDirectory] No directory received"}catch(C){u=String(C)}"OK"!==u&&console.warn(u);"function"===typeof k&&k(u);A.jumpToEnd()})},LB);Oq.defaultClientActions=iJ;Oq.defaultClientActions=iJ;Oq.defaultClientActions=iJ;var bna={},cna=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
dna="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),z5=bna=function(a){var d=a,k=a.indexOf("["),b=a.indexOf("]");-1!=k&&-1!=b&&(a=a.substring(0,k)+a.substring(k,b).replace(/:/g,";")+a.substring(b,a.length));var e=cna.exec(a||"");a={};for(var l=14;l--;)a[dna[l]]=e[l]||"";-1!=k&&-1!=b&&(a.source=d,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=
!0);d=a.path;k=d.replace(/\/{2,9}/g,"/").split("/");"/"!=d.substr(0,1)&&0!==d.length||k.splice(0,1);"/"==d.substr(d.length-1,1)&&k.splice(k.length-1,1);a.pathNames=k;a.queryKey=Aca(a,a.query);return a},ena={},fA=864E5,Cca=365.25*fA,fna=ena=function(a,d){d=d||{};var k=typeof a;if("string"===k&&0<a.length)return Bca(a);if("number"===k&&!1===isNaN(a))return d.long?sG(a,fA,"day")||sG(a,36E5,"hour")||sG(a,6E4,"minute")||sG(a,1E3,"second")||a+" ms":a>=fA?Math.round(a/fA)+"d":36E5<=a?Math.round(a/36E5)+
"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a));},Fca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jh={};jh=jh=cO.debug=cO["default"]=cO;jh.coerce=function(a){return a instanceof Error?a.stack||a.message:a};jh.disable=function(){jh.enable("")};jh.enable=function(a){jh.save(a);jh.names=[];jh.skips=[];var d,k=("string"===typeof a?a:"").split(/[\s,]+/),b=k.length;
for(d=0;d<b;d++)k[d]&&(a=k[d].replace(/\*/g,".*?"),"-"===a[0]?jh.skips.push(new RegExp("^"+a.substr(1)+"$")):jh.names.push(new RegExp("^"+a+"$")));for(d=0;d<jh.instances.length;d++)a=jh.instances[d],a.enabled=jh.enabled(a.namespace)};jh.enabled=function(a){if("*"===a[a.length-1])return!0;var d;var k=0;for(d=jh.skips.length;k<d;k++)if(jh.skips[k].test(a))return!1;k=0;for(d=jh.names.length;k<d;k++)if(jh.names[k].test(a))return!0;return!1};jh.humanize=fna;jh.instances=[];jh.names=[];jh.skips=[];jh.formatters=
{};var jJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ul={},dO=oh;ul=ul=jh;ul.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};ul.formatArgs=function(a){var d=(this||jJ).useColors;a[0]=(d?"%c":"")+(this||jJ).namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+ul.humanize((this||jJ).diff);if(d){d="color: "+(this||jJ).color;a.splice(1,0,d,"color: inherit");var k=0,b=0;a[0].replace(/%[a-zA-Z%]/g,
function(e){"%%"!==e&&(k++,"%c"===e&&(b=k))});a.splice(b,0,d)}};ul.save=function(a){try{null==a?ul.storage.removeItem("debug"):ul.storage.debug=a}catch(d){}};ul.load=X_;ul.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var gna=ul;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var sR=chrome.storage.local;else a:{try{sR=window.localStorage;
break a}catch(a){}sR=void 0}gna.storage=sR;ul.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
ul.formatters.j=function(a){try{return JSON.stringify(a)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};ul.enable(X_());var Pq=ul,ej="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,A5={};A5=Em;Em.prototype.on=Em.prototype.addEventListener=function(a,d){(this||ej)._callbacks=(this||ej)._callbacks||{};((this||ej)._callbacks["$"+a]=(this||ej)._callbacks["$"+a]||[]).push(d);return this||ej};Em.prototype.once=function(a,d){function k(){this.off(a,k);d.apply(this||
ej,arguments)}k.fn=d;this.on(a,k);return this||ej};Em.prototype.off=Em.prototype.removeListener=Em.prototype.removeAllListeners=Em.prototype.removeEventListener=function(a,d){(this||ej)._callbacks=(this||ej)._callbacks||{};if(0==arguments.length)return(this||ej)._callbacks={},this||ej;var k=(this||ej)._callbacks["$"+a];if(!k)return this||ej;if(1==arguments.length)return delete (this||ej)._callbacks["$"+a],this||ej;for(var b,e=0;e<k.length;e++)if(b=k[e],b===d||b.fn===d){k.splice(e,1);break}0===k.length&&
delete (this||ej)._callbacks["$"+a];return this||ej};Em.prototype.emit=function(a){(this||ej)._callbacks=(this||ej)._callbacks||{};for(var d=Array(arguments.length-1),k=(this||ej)._callbacks["$"+a],b=1;b<arguments.length;b++)d[b-1]=arguments[b];if(k){k=k.slice(0);b=0;for(var e=k.length;b<e;++b)k[b].apply(this||ej,d)}return this||ej};Em.prototype.listeners=function(a){(this||ej)._callbacks=(this||ej)._callbacks||{};return(this||ej)._callbacks["$"+a]||[]};Em.prototype.hasListeners=function(a){return!!this.listeners(a).length};
var Wu=A5,hna={},ina={}.toString,tR=hna=Array.isArray||function(a){return"[object Array]"==ina.call(a)},B5={},uR=Eg.Buffer;B5=function(a){var d;!(d=jna&&uR.isBuffer(a))&&(d=kna)&&((d=a instanceof ArrayBuffer)||(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer));return d};var jna="function"===typeof uR&&"function"===typeof uR.isBuffer,kna="function"===typeof ArrayBuffer,C5=B5,D5="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,kJ={},fO=tR,Y_=C5,E5=Object.prototype.toString,lna="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===E5.call(Blob),mna="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===E5.call(File);kJ.deconstructPacket=function(a){var d=[];a.data=eO(a.data,d);a.attachments=d.length;return{packet:a,buffers:d}};kJ.reconstructPacket=function(a,d){a.data=gO(a.data,d);a.attachments=void 0;return a};kJ.removeBlobs=function(a,d){function k(l,p,q){if(!l)return l;
if(lna&&l instanceof Blob||mna&&l instanceof File){b++;var u=new FileReader;u.onload=function(){q?q[p]=(this||D5).result:e=(this||D5).result;--b||d(e)};u.readAsArrayBuffer(l)}else if(fO(l))for(u=0;u<l.length;u++)k(l[u],u,l);else if("object"===typeof l&&!Y_(l))for(u in l)k(l[u],u,l)}var b=0,e=a;k(e);b||d(e)};var al="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Li={},hO=Pq("socket.io-parser"),iO=kJ;Li.protocol=4;Li.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
Li.CONNECT=0;Li.DISCONNECT=1;Li.EVENT=2;Li.ACK=3;Li.ERROR=4;Li.BINARY_EVENT=5;Li.BINARY_ACK=6;Li.Encoder=Z_;Li.Decoder=tG;var Gca=Li.ERROR+'"encode error"';Z_.prototype.encode=function(a,d){hO("encoding packet %j",a);Li.BINARY_EVENT===a.type||Li.BINARY_ACK===a.type?Hca(a,d):(a=$_(a),d([a]))};Wu(tG.prototype);tG.prototype.add=function(a){if("string"===typeof a){a:{var d=0,k={type:Number(a.charAt(0))};if(null==Li.types[k.type])a={type:Li.ERROR,data:"parser error: unknown packet type "+k.type};else{if(Li.BINARY_EVENT===
k.type||Li.BINARY_ACK===k.type){for(var b=d+1;"-"!==a.charAt(++d)&&d!=a.length;);b=a.substring(b,d);if(b!=Number(b)||"-"!==a.charAt(d))throw Error("Illegal attachments");k.attachments=Number(b)}if("/"===a.charAt(d+1)){for(b=d+1;++d;){var e=a.charAt(d);if(","===e)break;if(d===a.length)break}k.nsp=a.substring(b,d)}else k.nsp="/";b=a.charAt(d+1);if(""!==b&&Number(b)==b){for(b=d+1;++d;){e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(d===a.length)break}k.id=Number(a.substring(b,d+1))}if(a.charAt(++d)){d=
a.substr(d);try{var l=JSON.parse(d)}catch(p){l=!1}if(!1===l||k.type!==Li.ERROR&&!tR(l)){a={type:Li.ERROR,data:"parser error: invalid payload"};break a}else k.data=l}hO("decoded %s as %j",a,k);a=k}}Li.BINARY_EVENT===a.type||Li.BINARY_ACK===a.type?((this||al).reconstructor=new jO(a),0===(this||al).reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(C5(a)||a.base64)if((this||al).reconstructor){if(a=(this||al).reconstructor.takeBinaryData(a))(this||al).reconstructor=
null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};tG.prototype.destroy=function(){(this||al).reconstructor&&(this||al).reconstructor.finishedReconstruction()};jO.prototype.takeBinaryData=function(a){(this||al).buffers.push(a);return(this||al).buffers.length===(this||al).reconPack.attachments?(a=iO.reconstructPacket((this||al).reconPack,(this||al).buffers),this.finishedReconstruction(),a):null};jO.prototype.finishedReconstruction=
function(){(this||al).reconPack=null;(this||al).buffers=[]};var vR={};try{vR="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){vR=!1}var nna=vR,ona={},wR=ona="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),pna={},xR=pna=function(a){var d=a.xdomain,k=a.xscheme;a=a.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!d||nna))return new XMLHttpRequest}catch(b){}try{if("undefined"!==typeof XDomainRequest&&!k&&a)return new XDomainRequest}catch(b){}if(!d)try{return new (wR[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}},
qna={},kO=Eg.Buffer,Ica=tR,F5=Object.prototype.toString,Jca="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===F5.call(Blob),Kca="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===F5.call(File),yR=qna=uG,rna={},lJ=rna=function(a,d,k){var b=a.byteLength;d=d||0;k=k||b;if(a.slice)return a.slice(d,k);0>d&&(d+=b);0>k&&(k+=b);k>b&&(k=b);if(d>=b||d>=k||0===b)return new ArrayBuffer(0);a=new Uint8Array(a);b=new Uint8Array(k-d);for(var e=0;d<k;d++,
e++)b[e]=a[d];return b.buffer},sna={},tna=sna=function(a,d,k){function b(l,p){if(0>=b.count)throw Error("after called too many times");--b.count;l?(e=!0,d(l),d=k):0!==b.count||e||d(null,p)}var e=!1;k=k||Lca;b.count=a;return 0===a?d():b},zR={};(function(a){zR.encode=function(d){d=new Uint8Array(d);var k,b=d.length,e="";for(k=0;k<b;k+=3)e+=a[d[k]>>2],e+=a[(d[k]&3)<<4|d[k+1]>>4],e+=a[(d[k+1]&15)<<2|d[k+2]>>6],e+=a[d[k+2]&63];2===b%3?e=e.substring(0,e.length-1)+"=":1===b%3&&(e=e.substring(0,e.length-
2)+"==");return e};zR.decode=function(d){var k=.75*d.length,b=d.length,e=0;"="===d[d.length-1]&&(k--,"="===d[d.length-2]&&k--);var l=new ArrayBuffer(k),p=new Uint8Array(l);for(k=0;k<b;k+=4){var q=a.indexOf(d[k]);var u=a.indexOf(d[k+1]);var w=a.indexOf(d[k+2]);var y=a.indexOf(d[k+3]);p[e++]=q<<2|u>>4;p[e++]=(u&15)<<4|w>>2;p[e++]=(w&3)<<6|y&63}return l}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var G5={},Ww="undefined"!==typeof Ww?Ww:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var AR=2===(new Blob(["hi"])).size}catch(a){AR=!1}var mJ;if(mJ=AR)try{mJ=2===(new Blob([new Uint8Array([1,2])])).size}catch(a){mJ=!1}var una=mJ,vna=Ww&&Ww.prototype.append&&Ww.prototype.getBlob;"undefined"!==typeof Blob&&(b0.prototype=Blob.prototype,c0.prototype=Blob.prototype);G5=AR?una?Blob:c0:vna?b0:void 0;var Mm=G5,wna={},xna=wna=Object.keys||function(a){var d=[],k=Object.prototype.hasOwnProperty,
b;for(b in a)k.call(a,b)&&d.push(b);return d},H5={},Jp=String.fromCharCode,wG,vG,Mr;H5={version:"2.1.2",encode:function(a,d){d=d||{};d=!1!==d.strict;a=d0(a);for(var k=a.length,b=-1,e,l="";++b<k;){e=a[b];var p=d;if(0==(e&4294967168))e=Jp(e);else{var q="";0==(e&4294965248)?q=Jp(e>>6&31|192):0==(e&4294901760)?(e0(e,p)||(e=65533),q=Jp(e>>12&15|224),q+=Jp(e>>6&63|128)):0==(e&4292870144)&&(q=Jp(e>>18&7|240),q+=Jp(e>>12&63|128),q+=Jp(e>>6&63|128));e=q+=Jp(e&63|128)}l+=e}return l},decode:function(a,d){d=
d||{};d=!1!==d.strict;wG=d0(a);vG=wG.length;Mr=0;a=[];for(var k;!1!==(k=Mca(d));)a.push(k);d=a.length;k=-1;for(var b,e="";++k<d;)b=a[k],65535<b&&(b-=65536,e+=Jp(b>>>10&1023|55296),b=56320|b&1023),e+=Jp(b);return e}};var ai={},Oca=tna,I5=H5,BR;"undefined"!==typeof ArrayBuffer&&(BR=zR);var yna="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),zna="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),J5=yna||zna;ai.protocol=3;var nJ=ai.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},MB=xna(nJ),Bo={type:"error",data:"parser error"};ai.encodePacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=!1);"function"===typeof k&&(b=k,k=null);var e=void 0===a.data?void 0:a.data.buffer||a.data;if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer){if(d){k=a.data;d=new Uint8Array(k);k=new Uint8Array(1+k.byteLength);k[0]=nJ[a.type];for(a=0;a<d.length;a++)k[a+1]=d[a];a=b(k.buffer)}else a=ai.encodeBase64Packet(a,b);return a}if("undefined"!==typeof Mm&&
e instanceof Mm)return d?J5?a=Nca(a,d,b):(d=new Uint8Array(1),d[0]=nJ[a.type],a=new Mm([d.buffer,a.data]),a=b(a)):a=ai.encodeBase64Packet(a,b),a;if(e&&e.base64)return b("b"+ai.packets[a.type]+a.data.data);d=nJ[a.type];void 0!==a.data&&(d+=k?I5.encode(String(a.data),{strict:!1}):String(a.data));return b(""+d)};ai.encodeBase64Packet=function(a,d){var k="b"+ai.packets[a.type];if("undefined"!==typeof Mm&&a.data instanceof Mm){var b=new FileReader;b.onload=function(){var p=b.result.split(",")[1];d(k+p)};
return b.readAsDataURL(a.data)}try{var e=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(p){a=new Uint8Array(a.data);e=Array(a.length);for(var l=0;l<a.length;l++)e[l]=a[l];e=String.fromCharCode.apply(null,e)}k+=btoa(e);return d(k)};ai.decodePacket=function(a,d,k){if(void 0===a)return Bo;if("string"===typeof a){if("b"===a.charAt(0))return ai.decodeBase64Packet(a.substr(1),d);if(k){a:{d=a;try{d=I5.decode(d,{strict:!1})}catch(b){a=!1;break a}a=d}if(!1===a)return Bo}k=a.charAt(0);return Number(k)==
k&&MB[k]?1<a.length?{type:MB[k],data:a.substring(1)}:{type:MB[k]}:Bo}k=(new Uint8Array(a))[0];a=lJ(a,1);Mm&&"blob"===d&&(a=new Mm([a]));return{type:MB[k],data:a}};ai.decodeBase64Packet=function(a,d){var k=MB[a.charAt(0)];if(!BR)return{type:k,data:{base64:!0,data:a.substr(1)}};a=BR.decode(a.substr(1));"blob"===d&&Mm&&(a=new Mm([a]));return{type:k,data:a}};ai.encodePayload=function(a,d,k){"function"===typeof d&&(k=d,d=null);var b=yR(a);if(d&&b)return Mm&&!J5?ai.encodePayloadAsBlob(a,k):ai.encodePayloadAsArrayBuffer(a,
k);if(!a.length)return k("0:");lO(a,function(e,l){ai.encodePacket(e,b?d:!1,!1,function(p){l(null,p.length+":"+p)})},function(e,l){return k(l.join(""))})};ai.decodePayload=function(a,d,k){if("string"!==typeof a)return ai.decodePayloadAsBinary(a,d,k);"function"===typeof d&&(k=d,d=null);if(""===a)return k(Bo,0,1);var b="";for(var e,l,p=0,q=a.length;p<q;p++)if(l=a.charAt(p),":"!==l)b+=l;else{if(""===b||b!=(e=Number(b)))return k(Bo,0,1);l=a.substr(p+1,e);if(b!=l.length)return k(Bo,0,1);if(l.length){b=
ai.decodePacket(l,d,!1);if(Bo.type===b.type&&Bo.data===b.data)return k(Bo,0,1);if(!1===k(b,p+e,q))return}p+=e;b=""}if(""!==b)return k(Bo,0,1)};ai.encodePayloadAsArrayBuffer=function(a,d){if(!a.length)return d(new ArrayBuffer(0));lO(a,function(k,b){ai.encodePacket(k,!0,!0,function(e){return b(null,e)})},function(k,b){k=b.reduce(function(p,q){q="string"===typeof q?q.length:q.byteLength;return p+q.toString().length+q+2},0);var e=new Uint8Array(k),l=0;b.forEach(function(p){var q="string"===typeof p,u=
p;if(q){u=new Uint8Array(p.length);for(var w=0;w<p.length;w++)u[w]=p.charCodeAt(w);u=u.buffer}q?e[l++]=0:e[l++]=1;p=u.byteLength.toString();for(w=0;w<p.length;w++)e[l++]=parseInt(p[w]);e[l++]=255;u=new Uint8Array(u);for(w=0;w<u.length;w++)e[l++]=u[w]});return d(e.buffer)})};ai.encodePayloadAsBlob=function(a,d){lO(a,function(k,b){ai.encodePacket(k,!0,!0,function(e){var l=new Uint8Array(1);l[0]=1;if("string"===typeof e){for(var p=new Uint8Array(e.length),q=0;q<e.length;q++)p[q]=e.charCodeAt(q);e=p.buffer;
l[0]=0}p=(e instanceof ArrayBuffer?e.byteLength:e.size).toString();var u=new Uint8Array(p.length+1);for(q=0;q<p.length;q++)u[q]=parseInt(p[q]);u[p.length]=255;Mm&&(e=new Mm([l.buffer,u.buffer,e]),b(null,e))})},function(k,b){return d(new Mm(b))})};ai.decodePayloadAsBinary=function(a,d,k){"function"===typeof d&&(k=d,d=null);for(var b=[];0<a.byteLength;){for(var e=new Uint8Array(a),l=0===e[0],p="",q=1;255!==e[q];q++){if(310<p.length)return k(Bo,0,1);p+=e[q]}a=lJ(a,2+p.length);p=parseInt(p);e=lJ(a,0,
p);if(l)try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(w){for(l=new Uint8Array(e),e="",q=0;q<l.length;q++)e+=String.fromCharCode(l[q])}b.push(e);a=lJ(a,p)}var u=b.length;b.forEach(function(w,y){k(ai.decodePacket(w,d,!0),y,u)})};for(var oJ={encode:function(a){var d="",k;for(k in a)a.hasOwnProperty(k)&&(d.length&&(d+="&"),d+=encodeURIComponent(k)+"="+encodeURIComponent(a[k]));return d},decode:function(a){var d={};a=a.split("&");for(var k=0,b=a.length;k<b;k++){var e=a[k].split("=");d[decodeURIComponent(e[0])]=
decodeURIComponent(e[1])}return d}},Ana={},pJ=Ana=function(a,d){var k=function(){};k.prototype=d.prototype;a.prototype=new k;a.prototype.constructor=a},Bna={},f0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),K5={},h0=0,ps=0,g0;64>ps;ps++)K5[f0[ps]]=ps;nO.encode=mO;nO.decode=function(a){var d=0;for(ps=0;ps<a.length;ps++)d=64*d+K5[a.charAt(ps)];return d};var L5=Bna=nO,Ah="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,M5={},Cna=ai;M5=ip;
Wu(ip.prototype);ip.prototype.onError=function(a,d){a=Error(a);a.type="TransportError";a.description=d;this.emit("error",a);return this||Ah};ip.prototype.open=function(){if("closed"===(this||Ah).readyState||""===(this||Ah).readyState)(this||Ah).readyState="opening",this.doOpen();return this||Ah};ip.prototype.close=function(){if("opening"===(this||Ah).readyState||"open"===(this||Ah).readyState)this.doClose(),this.onClose();return this||Ah};ip.prototype.send=function(a){if("open"===(this||Ah).readyState)this.write(a);
else throw Error("Transport not open");};ip.prototype.onOpen=function(){(this||Ah).readyState="open";(this||Ah).writable=!0;this.emit("open")};ip.prototype.onData=function(a){a=Cna.decodePacket(a,(this||Ah).socket.binaryType);this.onPacket(a)};ip.prototype.onPacket=function(a){this.emit("packet",a)};ip.prototype.onClose=function(){(this||Ah).readyState="closed";this.emit("close")};var CR=M5,Xh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,N5={},i0=CR,O5=ai,Co=Pq("engine.io-client:polling");
N5=jp;var Pca=null!=(new xR({xdomain:!1})).responseType;pJ(jp,i0);jp.prototype.name="polling";jp.prototype.doOpen=function(){this.poll()};jp.prototype.pause=function(a){function d(){Co("paused");k.readyState="paused";a()}var k=this||Xh;(this||Xh).readyState="pausing";if((this||Xh).polling||!(this||Xh).writable){var b=0;(this||Xh).polling&&(Co("we are currently polling - waiting to pause"),b++,this.once("pollComplete",function(){Co("pre-pause polling complete");--b||d()}));(this||Xh).writable||(Co("we are currently writing - waiting to pause"),
b++,this.once("drain",function(){Co("pre-pause writing complete");--b||d()}))}else d()};jp.prototype.poll=function(){Co("polling");(this||Xh).polling=!0;this.doPoll();this.emit("poll")};jp.prototype.onData=function(a){var d=this||Xh;Co("polling got data %s",a);O5.decodePayload(a,(this||Xh).socket.binaryType,function(k,b,e){if("opening"===d.readyState)d.onOpen();if("close"===k.type)return d.onClose(),!1;d.onPacket(k)});"closed"!==(this||Xh).readyState&&((this||Xh).polling=!1,this.emit("pollComplete"),
"open"===(this||Xh).readyState?this.poll():Co('ignoring poll - transport state "%s"',(this||Xh).readyState))};jp.prototype.doClose=function(){function a(){Co("writing close packet");d.write([{type:"close"}])}var d=this||Xh;"open"===(this||Xh).readyState?(Co("transport open - closing"),a()):(Co("transport not open - deferring close"),this.once("open",a))};jp.prototype.write=function(a){var d=this||Xh;(this||Xh).writable=!1;var k=function(){d.writable=!0;d.emit("drain")};O5.encodePayload(a,(this||Xh).supportsBinary,
function(b){d.doWrite(b,k)})};jp.prototype.uri=function(){var a=(this||Xh).query||{},d=(this||Xh).secure?"https":"http",k="";!1!==(this||Xh).timestampRequests&&(a[(this||Xh).timestampParam]=L5());(this||Xh).supportsBinary||a.sid||(a.b64=1);a=oJ.encode(a);(this||Xh).port&&("https"===d&&443!==Number((this||Xh).port)||"http"===d&&80!==Number((this||Xh).port))&&(k=":"+(this||Xh).port);a.length&&(a="?"+a);var b=-1!==(this||Xh).hostname.indexOf(":");return d+"://"+(b?"["+(this||Xh).hostname+"]":(this||
Xh).hostname)+k+(this||Xh).path+a};var P5=N5,se="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,DR={},k0=P5,ER=Pq("engine.io-client:polling-xhr");DR=Yw;DR.Request=jk;pJ(Yw,k0);Yw.prototype.supportsBinary=!0;Yw.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=(this||se).xd;a.xs=(this||se).xs;a.agent=(this||se).agent||!1;a.supportsBinary=(this||se).supportsBinary;a.enablesXDR=(this||se).enablesXDR;a.withCredentials=(this||se).withCredentials;a.pfx=(this||
se).pfx;a.key=(this||se).key;a.passphrase=(this||se).passphrase;a.cert=(this||se).cert;a.ca=(this||se).ca;a.ciphers=(this||se).ciphers;a.rejectUnauthorized=(this||se).rejectUnauthorized;a.requestTimeout=(this||se).requestTimeout;a.extraHeaders=(this||se).extraHeaders;return new jk(a)};Yw.prototype.doWrite=function(a,d){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var k=this||se;a.on("success",d);a.on("error",function(b){k.onError("xhr post error",b)});(this||se).sendXhr=
a};Yw.prototype.doPoll=function(){ER("xhr poll");var a=this.request(),d=this||se;a.on("data",function(k){d.onData(k)});a.on("error",function(k){d.onError("xhr poll error",k)});(this||se).pollXhr=a};Wu(jk.prototype);jk.prototype.create=function(){var a={agent:(this||se).agent,xdomain:(this||se).xd,xscheme:(this||se).xs,enablesXDR:(this||se).enablesXDR};a.pfx=(this||se).pfx;a.key=(this||se).key;a.passphrase=(this||se).passphrase;a.cert=(this||se).cert;a.ca=(this||se).ca;a.ciphers=(this||se).ciphers;
a.rejectUnauthorized=(this||se).rejectUnauthorized;var d=(this||se).xhr=new xR(a),k=this||se;try{ER("xhr open %s: %s",(this||se).method,(this||se).uri);d.open((this||se).method,(this||se).uri,(this||se).async);try{if((this||se).extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var b in(this||se).extraHeaders)(this||se).extraHeaders.hasOwnProperty(b)&&d.setRequestHeader(b,(this||se).extraHeaders[b])}}catch(e){}if("POST"===(this||se).method)try{(this||se).isBinary?d.setRequestHeader("Content-type",
"application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{d.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in d&&(d.withCredentials=(this||se).withCredentials);(this||se).requestTimeout&&(d.timeout=(this||se).requestTimeout);this.hasXDR()?(d.onload=function(){k.onLoad()},d.onerror=function(){k.onError(d.responseText)}):d.onreadystatechange=function(){if(2===d.readyState)try{var e=d.getResponseHeader("Content-Type");if(k.supportsBinary&&"application/octet-stream"===
e||"application/octet-stream; charset=UTF-8"===e)d.responseType="arraybuffer"}catch(l){}if(4===d.readyState)if(200===d.status||1223===d.status)k.onLoad();else setTimeout(function(){k.onError("number"===typeof d.status?d.status:0)},0)};ER("xhr data %s",(this||se).data);d.send((this||se).data)}catch(e){setTimeout(function(){k.onError(e)},0);return}"undefined"!==typeof document&&((this||se).index=jk.requestsCount++,jk.requests[(this||se).index]=this||se)};jk.prototype.onSuccess=function(){this.emit("success");
this.cleanup()};jk.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};jk.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};jk.prototype.cleanup=function(a){if("undefined"!==typeof(this||se).xhr&&null!==(this||se).xhr){this.hasXDR()?(this||se).xhr.onload=(this||se).xhr.onerror=j0:(this||se).xhr.onreadystatechange=j0;if(a)try{(this||se).xhr.abort()}catch(d){}"undefined"!==typeof document&&delete jk.requests[(this||se).index];(this||se).xhr=null}};jk.prototype.onLoad=
function(){try{try{var a=(this||se).xhr.getResponseHeader("Content-Type")}catch(k){}var d="application/octet-stream"===a||"application/octet-stream; charset=UTF-8"===a?(this||se).xhr.response||(this||se).xhr.responseText:(this||se).xhr.responseText}catch(k){this.onError(k)}if(null!=d)this.onData(d)};jk.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||se).xs&&(this||se).enablesXDR};jk.prototype.abort=function(){this.cleanup()};jk.requestsCount=0;jk.requests={};"undefined"!==
typeof document&&("function"===typeof attachEvent?attachEvent("onunload",l0):"function"===typeof addEventListener&&addEventListener("onpagehide"in wR?"pagehide":"unload",l0,!1));var Dna=DR,Ena={},Fna=[].indexOf,FR=Ena=function(a,d){if(Fna)return a.indexOf(d);for(var k=0;k<a.length;++k)if(a[k]===d)return k;return-1},Jh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Q5={},oO=P5,m0=wR;Q5=Zw;var Gna=/\n/g,Hna=/\\n/g,xG;pJ(Zw,oO);Zw.prototype.supportsBinary=!1;Zw.prototype.doClose=
function(){(this||Jh).script&&((this||Jh).script.parentNode.removeChild((this||Jh).script),(this||Jh).script=null);(this||Jh).form&&((this||Jh).form.parentNode.removeChild((this||Jh).form),(this||Jh).form=null,(this||Jh).iframe=null);oO.prototype.doClose.call(this||Jh)};Zw.prototype.doPoll=function(){var a=this||Jh,d=document.createElement("script");(this||Jh).script&&((this||Jh).script.parentNode.removeChild((this||Jh).script),(this||Jh).script=null);d.async=!0;d.src=this.uri();d.onerror=function(b){a.onError("jsonp poll error",
b)};var k=document.getElementsByTagName("script")[0];k?k.parentNode.insertBefore(d,k):(document.head||document.body).appendChild(d);(this||Jh).script=d;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var b=document.createElement("iframe");document.body.appendChild(b);document.body.removeChild(b)},100)};Zw.prototype.doWrite=function(a,d){function k(){b();d()}function b(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(w){e.onError("jsonp polling iframe removal error",
w)}try{u=document.createElement('<iframe src="javascript:0" name="'+e.iframeId+'">')}catch(w){u=document.createElement("iframe"),u.name=e.iframeId,u.src="javascript:0"}u.id=e.iframeId;e.form.appendChild(u);e.iframe=u}var e=this||Jh;if(!(this||Jh).form){var l=document.createElement("form"),p=document.createElement("textarea"),q=(this||Jh).iframeId="eio_iframe_"+(this||Jh).index,u;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=q;l.method="POST";
l.setAttribute("accept-charset","utf-8");p.name="d";l.appendChild(p);document.body.appendChild(l);(this||Jh).form=l;(this||Jh).area=p}(this||Jh).form.action=this.uri();b();a=a.replace(Hna,"\\\n");(this||Jh).area.value=a.replace(Gna,"\\n");try{(this||Jh).form.submit()}catch(w){}(this||Jh).iframe.attachEvent?(this||Jh).iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&k()}:(this||Jh).iframe.onload=k};var Ina=Q5,Jna=Object.freeze({}),Ff="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,R5={},Kna=Eg.Buffer,pO=CR,Lna=ai,Mna=Pq("engine.io-client:websocket"),yG;"undefined"!==typeof WebSocket?yG=WebSocket:"undefined"!==typeof self&&(yG=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var n0=Jna}catch(a){}var $w=yG||n0;R5=on;pJ(on,pO);on.prototype.name="websocket";on.prototype.supportsBinary=!0;on.prototype.doOpen=function(){if(this.check()){var a=this.uri(),d=(this||Ff).protocols,k={};(this||Ff).isReactNative||(k.agent=(this||
Ff).agent,k.perMessageDeflate=(this||Ff).perMessageDeflate,k.pfx=(this||Ff).pfx,k.key=(this||Ff).key,k.passphrase=(this||Ff).passphrase,k.cert=(this||Ff).cert,k.ca=(this||Ff).ca,k.ciphers=(this||Ff).ciphers,k.rejectUnauthorized=(this||Ff).rejectUnauthorized);(this||Ff).extraHeaders&&(k.headers=(this||Ff).extraHeaders);(this||Ff).localAddress&&(k.localAddress=(this||Ff).localAddress);try{(this||Ff).ws=(this||Ff).usingBrowserWebSocket&&!(this||Ff).isReactNative?d?new $w(a,d):new $w(a):new $w(a,d,k)}catch(b){return this.emit("error",
b)}void 0===(this||Ff).ws.binaryType&&((this||Ff).supportsBinary=!1);(this||Ff).ws.supports&&(this||Ff).ws.supports.binary?((this||Ff).supportsBinary=!0,(this||Ff).ws.binaryType="nodebuffer"):(this||Ff).ws.binaryType="arraybuffer";this.addEventListeners()}};on.prototype.addEventListeners=function(){var a=this||Ff;(this||Ff).ws.onopen=function(){a.onOpen()};(this||Ff).ws.onclose=function(){a.onClose()};(this||Ff).ws.onmessage=function(d){a.onData(d.data)};(this||Ff).ws.onerror=function(d){a.onError("websocket error",
d)}};on.prototype.write=function(a){function d(){k.emit("flush");setTimeout(function(){k.writable=!0;k.emit("drain")},0)}var k=this||Ff;(this||Ff).writable=!1;for(var b=a.length,e=0,l=b;e<l;e++)(function(p){Lna.encodePacket(p,k.supportsBinary,function(q){if(!k.usingBrowserWebSocket){var u={};p.options&&(u.compress=p.options.compress);k.perMessageDeflate&&("string"===typeof q?Kna.byteLength(q):q.length)<k.perMessageDeflate.threshold&&(u.compress=!1)}try{k.usingBrowserWebSocket?k.ws.send(q):k.ws.send(q,
u)}catch(w){Mna("websocket closed before onclose event")}--b||d()})})(a[e])};on.prototype.onClose=function(){pO.prototype.onClose.call(this||Ff)};on.prototype.doClose=function(){"undefined"!==typeof(this||Ff).ws&&(this||Ff).ws.close()};on.prototype.uri=function(){var a=(this||Ff).query||{},d=(this||Ff).secure?"wss":"ws",k="";(this||Ff).port&&("wss"===d&&443!==Number((this||Ff).port)||"ws"===d&&80!==Number((this||Ff).port))&&(k=":"+(this||Ff).port);(this||Ff).timestampRequests&&(a[(this||Ff).timestampParam]=
L5());(this||Ff).supportsBinary||(a.b64=1);a=oJ.encode(a);a.length&&(a="?"+a);var b=-1!==(this||Ff).hostname.indexOf(":");return d+"://"+(b?"["+(this||Ff).hostname+"]":(this||Ff).hostname)+k+(this||Ff).path+a};on.prototype.check=function(){return!!$w&&!("__initialize"in $w&&(this||Ff).name===on.prototype.name)};var qJ={},Nna=R5;qJ.polling=function(a){var d=!1,k=!1,b=!1!==a.jsonp;"undefined"!==typeof location&&(k="https:"===location.protocol,(d=location.port)||(d=k?443:80),d=a.hostname!==location.hostname||
d!==a.port,k=a.secure!==k);a.xdomain=d;a.xscheme=k;if("open"in new xR(a)&&!a.forceJSONP)return new Dna(a);if(!b)throw Error("JSONP disabled");return new Ina(a)};qJ.websocket=Nna;var fd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,S5={},Xj=Pq("engine.io-client:socket"),T5=ai,o0=z5,Rca=oJ;S5=Kh;Kh.priorWebsocketSuccess=!1;Wu(Kh.prototype);Kh.protocol=T5.protocol;Kh.Socket=Kh;Kh.Transport=CR;Kh.transports=qJ;Kh.parser=ai;Kh.prototype.createTransport=function(a){Xj('creating transport "%s"',
a);var d=(this||fd).query,k={},b;for(b in d)d.hasOwnProperty(b)&&(k[b]=d[b]);k.EIO=T5.protocol;k.transport=a;d=(this||fd).transportOptions[a]||{};(this||fd).id&&(k.sid=(this||fd).id);return new qJ[a]({query:k,socket:this||fd,agent:d.agent||(this||fd).agent,hostname:d.hostname||(this||fd).hostname,port:d.port||(this||fd).port,secure:d.secure||(this||fd).secure,path:d.path||(this||fd).path,forceJSONP:d.forceJSONP||(this||fd).forceJSONP,jsonp:d.jsonp||(this||fd).jsonp,forceBase64:d.forceBase64||(this||
fd).forceBase64,enablesXDR:d.enablesXDR||(this||fd).enablesXDR,withCredentials:d.withCredentials||(this||fd).withCredentials,timestampRequests:d.timestampRequests||(this||fd).timestampRequests,timestampParam:d.timestampParam||(this||fd).timestampParam,policyPort:d.policyPort||(this||fd).policyPort,pfx:d.pfx||(this||fd).pfx,key:d.key||(this||fd).key,passphrase:d.passphrase||(this||fd).passphrase,cert:d.cert||(this||fd).cert,ca:d.ca||(this||fd).ca,ciphers:d.ciphers||(this||fd).ciphers,rejectUnauthorized:d.rejectUnauthorized||
(this||fd).rejectUnauthorized,perMessageDeflate:d.perMessageDeflate||(this||fd).perMessageDeflate,extraHeaders:d.extraHeaders||(this||fd).extraHeaders,forceNode:d.forceNode||(this||fd).forceNode,localAddress:d.localAddress||(this||fd).localAddress,requestTimeout:d.requestTimeout||(this||fd).requestTimeout,protocols:d.protocols||void 0,isReactNative:(this||fd).isReactNative})};Kh.prototype.open=function(){if((this||fd).rememberUpgrade&&Kh.priorWebsocketSuccess&&-1!==(this||fd).transports.indexOf("websocket"))var a=
"websocket";else{if(0===(this||fd).transports.length){var d=this||fd;setTimeout(function(){d.emit("error","No transports available")},0);return}a=(this||fd).transports[0]}(this||fd).readyState="opening";try{a=this.createTransport(a)}catch(k){(this||fd).transports.shift();this.open();return}a.open();this.setTransport(a)};Kh.prototype.setTransport=function(a){Xj("setting transport %s",a.name);var d=this||fd;(this||fd).transport&&(Xj("clearing existing transport %s",(this||fd).transport.name),(this||
fd).transport.removeAllListeners());(this||fd).transport=a;a.on("drain",function(){d.onDrain()}).on("packet",function(k){d.onPacket(k)}).on("error",function(k){d.onError(k)}).on("close",function(){d.onClose("transport close")})};Kh.prototype.probe=function(a){function d(){if(y.onlyBinaryUpgrades){var A=!(this||fd).supportsBinary&&y.transport.supportsBinary;w=w||A}w||(Xj('probe transport "%s" opened',a),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(C){w||("pong"===C.type&&"probe"===
C.data?(Xj('probe transport "%s" pong',a),y.upgrading=!0,y.emit("upgrading",u),u&&(Kh.priorWebsocketSuccess="websocket"===u.name,Xj('pausing current transport "%s"',y.transport.name),y.transport.pause(function(){w||"closed"===y.readyState||(Xj("changing transport and sending upgrade packet"),q(),y.setTransport(u),u.send([{type:"upgrade"}]),y.emit("upgrade",u),u=null,y.upgrading=!1,y.flush())}))):(Xj('probe transport "%s" failed',a),C=Error("probe error"),C.transport=u.name,y.emit("upgradeError",C)))}))}
function k(){w||(w=!0,q(),u.close(),u=null)}function b(A){var C=Error("probe error: "+A);C.transport=u.name;k();Xj('probe transport "%s" failed because of error: %s',a,A);y.emit("upgradeError",C)}function e(){b("transport closed")}function l(){b("socket closed")}function p(A){u&&A.name!==u.name&&(Xj('"%s" works - aborting "%s"',A.name,u.name),k())}function q(){u.removeListener("open",d);u.removeListener("error",b);u.removeListener("close",e);y.removeListener("close",l);y.removeListener("upgrading",
p)}Xj('probing transport "%s"',a);var u=this.createTransport(a,{probe:1}),w=!1,y=this||fd;Kh.priorWebsocketSuccess=!1;u.once("open",d);u.once("error",b);u.once("close",e);this.once("close",l);this.once("upgrading",p);u.open()};Kh.prototype.onOpen=function(){Xj("socket open");(this||fd).readyState="open";Kh.priorWebsocketSuccess="websocket"===(this||fd).transport.name;this.emit("open");this.flush();if("open"===(this||fd).readyState&&(this||fd).upgrade&&(this||fd).transport.pause){Xj("starting upgrade probes");
for(var a=0,d=(this||fd).upgrades.length;a<d;a++)this.probe((this||fd).upgrades[a])}};Kh.prototype.onPacket=function(a){if("opening"===(this||fd).readyState||"open"===(this||fd).readyState||"closing"===(this||fd).readyState)switch(Xj('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(JSON.parse(a.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=a.data;
this.onError(d);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else Xj('packet received with socket readyState "%s"',(this||fd).readyState)};Kh.prototype.onHandshake=function(a){this.emit("handshake",a);(this||fd).id=a.sid;(this||fd).transport.query.sid=a.sid;(this||fd).upgrades=this.filterUpgrades(a.upgrades);(this||fd).pingInterval=a.pingInterval;(this||fd).pingTimeout=a.pingTimeout;this.onOpen();"closed"!==(this||fd).readyState&&(this.setPing(),this.removeListener("heartbeat",
(this||fd).onHeartbeat),this.on("heartbeat",(this||fd).onHeartbeat))};Kh.prototype.onHeartbeat=function(a){clearTimeout((this||fd).pingTimeoutTimer);var d=this||fd;d.pingTimeoutTimer=setTimeout(function(){if("closed"!==d.readyState)d.onClose("ping timeout")},a||d.pingInterval+d.pingTimeout)};Kh.prototype.setPing=function(){var a=this||fd;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){Xj("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},
a.pingInterval)};Kh.prototype.ping=function(){var a=this||fd;this.sendPacket("ping",function(){a.emit("ping")})};Kh.prototype.onDrain=function(){(this||fd).writeBuffer.splice(0,(this||fd).prevBufferLen);(this||fd).prevBufferLen=0;0===(this||fd).writeBuffer.length?this.emit("drain"):this.flush()};Kh.prototype.flush=function(){"closed"!==(this||fd).readyState&&(this||fd).transport.writable&&!(this||fd).upgrading&&(this||fd).writeBuffer.length&&(Xj("flushing %d packets in socket",(this||fd).writeBuffer.length),
(this||fd).transport.send((this||fd).writeBuffer),(this||fd).prevBufferLen=(this||fd).writeBuffer.length,this.emit("flush"))};Kh.prototype.write=Kh.prototype.send=function(a,d,k){this.sendPacket("message",a,d,k);return this||fd};Kh.prototype.sendPacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=void 0);"function"===typeof k&&(b=k,k=null);if("closing"!==(this||fd).readyState&&"closed"!==(this||fd).readyState){k=k||{};k.compress=!1!==k.compress;a={type:a,data:d,options:k};this.emit("packetCreate",
a);(this||fd).writeBuffer.push(a);if(b)this.once("flush",b);this.flush()}};Kh.prototype.close=function(){function a(){b.onClose("forced close");Xj("socket closing - telling transport to close");b.transport.close()}function d(){b.removeListener("upgrade",d);b.removeListener("upgradeError",d);a()}function k(){b.once("upgrade",d);b.once("upgradeError",d)}if("opening"===(this||fd).readyState||"open"===(this||fd).readyState){(this||fd).readyState="closing";var b=this||fd;if((this||fd).writeBuffer.length)this.once("drain",
function(){(this||fd).upgrading?k():a()});else(this||fd).upgrading?k():a()}return this||fd};Kh.prototype.onError=function(a){Xj("socket error %j",a);Kh.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};Kh.prototype.onClose=function(a,d){if("opening"===(this||fd).readyState||"open"===(this||fd).readyState||"closing"===(this||fd).readyState){Xj('socket close with reason: "%s"',a);var k=this||fd;clearTimeout((this||fd).pingIntervalTimer);clearTimeout((this||fd).pingTimeoutTimer);
(this||fd).transport.removeAllListeners("close");(this||fd).transport.close();(this||fd).transport.removeAllListeners();(this||fd).readyState="closed";(this||fd).id=null;this.emit("close",a,d);k.writeBuffer=[];k.prevBufferLen=0}};Kh.prototype.filterUpgrades=function(a){for(var d=[],k=0,b=a.length;k<b;k++)~FR((this||fd).transports,a[k])&&d.push(a[k]);return d};var GR={};GR=S5;GR.parser=ai;var Ona=GR,Pna={},HR=Pna=function(a,d){for(var k=[],b=(d=d||0)||0;b<a.length;b++)k[b-d]=a[b];return k},Qna={},
U5=[].slice,Qq=Qna=function(a,d){"string"==typeof d&&(d=a[d]);if("function"!=typeof d)throw Error("bind() requires a function");var k=U5.call(arguments,2);return function(){return d.apply(a,k.concat(U5.call(arguments)))}},Rna={},Do=Rna=function(a,d,k){a.on(d,k);return{destroy:function(){a.removeListener(d,k)}}},ze="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,IR={},Ql=Li,Eo=Pq("socket.io-client:socket");IR=IR=vj;var Sna={connect:1,connect_error:1,connect_timeout:1,
connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},JR=Wu.prototype.emit;Wu(vj.prototype);vj.prototype.subEvents=function(){if(!(this||ze).subs){var a=(this||ze).io;(this||ze).subs=[Do(a,"open",Qq(this||ze,"onopen")),Do(a,"packet",Qq(this||ze,"onpacket")),Do(a,"close",Qq(this||ze,"onclose"))]}};vj.prototype.open=vj.prototype.connect=function(){if((this||ze).connected)return this||ze;this.subEvents();(this||ze).io.reconnecting||
(this||ze).io.open();if("open"===(this||ze).io.readyState)this.onopen();this.emit("connecting");return this||ze};vj.prototype.send=function(){var a=HR(arguments);a.unshift("message");(this||ze).emit.apply(this||ze,a);return this||ze};vj.prototype.emit=function(a){if(Sna.hasOwnProperty(a))return JR.apply(this||ze,arguments),this||ze;var d=HR(arguments),k={type:(void 0!==(this||ze).flags.binary?(this||ze).flags.binary:yR(d))?Ql.BINARY_EVENT:Ql.EVENT,data:d,options:{}};k.options.compress=!(this||ze).flags||
!1!==(this||ze).flags.compress;"function"===typeof d[d.length-1]&&(Eo("emitting packet with ack id %d",(this||ze).ids),(this||ze).acks[(this||ze).ids]=d.pop(),k.id=(this||ze).ids++);(this||ze).connected?this.packet(k):(this||ze).sendBuffer.push(k);(this||ze).flags={};return this||ze};vj.prototype.packet=function(a){a.nsp=(this||ze).nsp;(this||ze).io.packet(a)};vj.prototype.onopen=function(){Eo("transport is open - connecting");if("/"!==(this||ze).nsp)if((this||ze).query){var a="object"===typeof(this||
ze).query?oJ.encode((this||ze).query):(this||ze).query;Eo("sending connect packet with query %s",a);this.packet({type:Ql.CONNECT,query:a})}else this.packet({type:Ql.CONNECT})};vj.prototype.onclose=function(a){Eo("close (%s)",a);(this||ze).connected=!1;(this||ze).disconnected=!0;delete (this||ze).id;this.emit("disconnect",a)};vj.prototype.onpacket=function(a){var d=a.type===Ql.ERROR&&"/"===a.nsp;if(a.nsp===(this||ze).nsp||d)switch(a.type){case Ql.CONNECT:this.onconnect();break;case Ql.EVENT:this.onevent(a);
break;case Ql.BINARY_EVENT:this.onevent(a);break;case Ql.ACK:this.onack(a);break;case Ql.BINARY_ACK:this.onack(a);break;case Ql.DISCONNECT:this.ondisconnect();break;case Ql.ERROR:this.emit("error",a.data)}};vj.prototype.onevent=function(a){var d=a.data||[];Eo("emitting event %j",d);null!=a.id&&(Eo("attaching ack callback to event"),d.push(this.ack(a.id)));(this||ze).connected?JR.apply(this||ze,d):(this||ze).receiveBuffer.push(d)};vj.prototype.ack=function(a){var d=this||ze,k=!1;return function(){if(!k){k=
!0;var b=HR(arguments);Eo("sending ack %j",b);d.packet({type:yR(b)?Ql.BINARY_ACK:Ql.ACK,id:a,data:b})}}};vj.prototype.onack=function(a){var d=(this||ze).acks[a.id];"function"===typeof d?(Eo("calling ack %s with %j",a.id,a.data),d.apply(this||ze,a.data),delete (this||ze).acks[a.id]):Eo("bad ack %s",a.id)};vj.prototype.onconnect=function(){(this||ze).connected=!0;(this||ze).disconnected=!1;this.emit("connect");this.emitBuffered()};vj.prototype.emitBuffered=function(){var a;for(a=0;a<(this||ze).receiveBuffer.length;a++)JR.apply(this||
ze,(this||ze).receiveBuffer[a]);(this||ze).receiveBuffer=[];for(a=0;a<(this||ze).sendBuffer.length;a++)this.packet((this||ze).sendBuffer[a]);(this||ze).sendBuffer=[]};vj.prototype.ondisconnect=function(){Eo("server disconnect (%s)",(this||ze).nsp);this.destroy();this.onclose("io server disconnect")};vj.prototype.destroy=function(){if((this||ze).subs){for(var a=0;a<(this||ze).subs.length;a++)(this||ze).subs[a].destroy();(this||ze).subs=null}(this||ze).io.destroy(this||ze)};vj.prototype.close=vj.prototype.disconnect=
function(){(this||ze).connected&&(Eo("performing disconnect (%s)",(this||ze).nsp),this.packet({type:Ql.DISCONNECT}));this.destroy();if((this||ze).connected)this.onclose("io client disconnect");return this||ze};vj.prototype.compress=function(a){(this||ze).flags.compress=a;return this||ze};vj.prototype.binary=function(a){(this||ze).flags.binary=a;return this||ze};var V5=IR,Gl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W5={};W5=ax;ax.prototype.duration=function(){var a=
(this||Gl).ms*Math.pow((this||Gl).factor,(this||Gl).attempts++);if((this||Gl).jitter){var d=Math.random(),k=Math.floor(d*(this||Gl).jitter*a);a=0==(Math.floor(10*d)&1)?a-k:a+k}return Math.min(a,(this||Gl).max)|0};ax.prototype.reset=function(){(this||Gl).attempts=0};ax.prototype.setMin=function(a){(this||Gl).ms=a};ax.prototype.setMax=function(a){(this||Gl).max=a};ax.prototype.setJitter=function(a){(this||Gl).jitter=a};var Tna=W5,Una={},X5=Pq("socket.io-client:url"),Vna=Una=function(a,d){var k=a;d=
d||"undefined"!==typeof location&&location;null==a&&(a=d.protocol+"//"+d.host);"string"===typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?d.protocol+a:d.host+a),/^(https?|wss?):\/\//.test(a)||(X5("protocol-less url %s",a),a="undefined"!==typeof d?d.protocol+"//"+a:"https://"+a),X5("parse %s",a),k=z5(a));k.port||(/^(http|ws)$/.test(k.protocol)?k.port="80":/^(http|ws)s$/.test(k.protocol)&&(k.port="443"));k.path=k.path||"/";a=-1!==k.host.indexOf(":")?"["+k.host+"]":k.host;k.id=k.protocol+"://"+a+
":"+k.port;k.href=k.protocol+"://"+a+(d&&d.port===k.port?"":":"+k.port);return k},xd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Y5={},Tca=Li,wl=Pq("socket.io-client:manager"),Sca=Tna,Z5=Object.prototype.hasOwnProperty;Y5=bi;bi.prototype.emitAll=function(){(this||xd).emit.apply(this||xd,arguments);for(var a in(this||xd).nsps)Z5.call((this||xd).nsps,a)&&(this||xd).nsps[a].emit.apply((this||xd).nsps[a],arguments)};bi.prototype.updateSocketIds=function(){for(var a in(this||
xd).nsps)Z5.call((this||xd).nsps,a)&&((this||xd).nsps[a].id=this.generateId(a))};bi.prototype.generateId=function(a){return("/"===a?"":a+"#")+(this||xd).engine.id};Wu(bi.prototype);bi.prototype.reconnection=function(a){if(!arguments.length)return(this||xd)._reconnection;(this||xd)._reconnection=!!a;return this||xd};bi.prototype.reconnectionAttempts=function(a){if(!arguments.length)return(this||xd)._reconnectionAttempts;(this||xd)._reconnectionAttempts=a;return this||xd};bi.prototype.reconnectionDelay=
function(a){if(!arguments.length)return(this||xd)._reconnectionDelay;(this||xd)._reconnectionDelay=a;(this||xd).backoff&&(this||xd).backoff.setMin(a);return this||xd};bi.prototype.randomizationFactor=function(a){if(!arguments.length)return(this||xd)._randomizationFactor;(this||xd)._randomizationFactor=a;(this||xd).backoff&&(this||xd).backoff.setJitter(a);return this||xd};bi.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return(this||xd)._reconnectionDelayMax;(this||xd)._reconnectionDelayMax=
a;(this||xd).backoff&&(this||xd).backoff.setMax(a);return this||xd};bi.prototype.timeout=function(a){if(!arguments.length)return(this||xd)._timeout;(this||xd)._timeout=a;return this||xd};bi.prototype.maybeReconnectOnOpen=function(){!(this||xd).reconnecting&&(this||xd)._reconnection&&0===(this||xd).backoff.attempts&&this.reconnect()};bi.prototype.open=bi.prototype.connect=function(a,d){wl("readyState %s",(this||xd).readyState);if(~(this||xd).readyState.indexOf("open"))return this||xd;wl("opening %s",
(this||xd).uri);(this||xd).engine=Ona((this||xd).uri,(this||xd).opts);var k=(this||xd).engine,b=this||xd;(this||xd).readyState="opening";(this||xd).skipReconnect=!1;var e=Do(k,"open",function(){b.onopen();a&&a()});d=Do(k,"error",function(q){wl("connect_error");b.cleanup();b.readyState="closed";b.emitAll("connect_error",q);if(a){var u=Error("Connection error");u.data=q;a(u)}else b.maybeReconnectOnOpen()});if(!1!==(this||xd)._timeout){var l=(this||xd)._timeout;wl("connect attempt will timeout after %d",
l);0===l&&e.destroy();var p=setTimeout(function(){wl("connect attempt timed out after %d",l);e.destroy();k.close();k.emit("error","timeout");b.emitAll("connect_timeout",l)},l);(this||xd).subs.push({destroy:function(){clearTimeout(p)}})}(this||xd).subs.push(e);(this||xd).subs.push(d);return this||xd};bi.prototype.onopen=function(){wl("open");this.cleanup();(this||xd).readyState="open";this.emit("open");var a=(this||xd).engine;(this||xd).subs.push(Do(a,"data",Qq(this||xd,"ondata")));(this||xd).subs.push(Do(a,
"ping",Qq(this||xd,"onping")));(this||xd).subs.push(Do(a,"pong",Qq(this||xd,"onpong")));(this||xd).subs.push(Do(a,"error",Qq(this||xd,"onerror")));(this||xd).subs.push(Do(a,"close",Qq(this||xd,"onclose")));(this||xd).subs.push(Do((this||xd).decoder,"decoded",Qq(this||xd,"ondecoded")))};bi.prototype.onping=function(){(this||xd).lastPing=new Date;this.emitAll("ping")};bi.prototype.onpong=function(){this.emitAll("pong",new Date-(this||xd).lastPing)};bi.prototype.ondata=function(a){(this||xd).decoder.add(a)};
bi.prototype.ondecoded=function(a){this.emit("packet",a)};bi.prototype.onerror=function(a){wl("error",a);this.emitAll("error",a)};bi.prototype.socket=function(a,d){function k(){~FR(e.connecting,b)||e.connecting.push(b)}var b=(this||xd).nsps[a];if(!b){b=new V5(this||xd,a,d);(this||xd).nsps[a]=b;var e=this||xd;b.on("connecting",k);b.on("connect",function(){b.id=e.generateId(a)});(this||xd).autoConnect&&k()}return b};bi.prototype.destroy=function(a){a=FR((this||xd).connecting,a);~a&&(this||xd).connecting.splice(a,
1);(this||xd).connecting.length||this.close()};bi.prototype.packet=function(a){wl("writing packet %j",a);var d=this||xd;a.query&&0===a.type&&(a.nsp+="?"+a.query);d.encoding?d.packetBuffer.push(a):(d.encoding=!0,(this||xd).encoder.encode(a,function(k){for(var b=0;b<k.length;b++)d.engine.write(k[b],a.options);d.encoding=!1;d.processPacketQueue()}))};bi.prototype.processPacketQueue=function(){if(0<(this||xd).packetBuffer.length&&!(this||xd).encoding){var a=(this||xd).packetBuffer.shift();this.packet(a)}};
bi.prototype.cleanup=function(){wl("cleanup");for(var a=(this||xd).subs.length,d=0;d<a;d++)(this||xd).subs.shift().destroy();(this||xd).packetBuffer=[];(this||xd).encoding=!1;(this||xd).lastPing=null;(this||xd).decoder.destroy()};bi.prototype.close=bi.prototype.disconnect=function(){wl("disconnect");(this||xd).skipReconnect=!0;(this||xd).reconnecting=!1;"opening"===(this||xd).readyState&&this.cleanup();(this||xd).backoff.reset();(this||xd).readyState="closed";(this||xd).engine&&(this||xd).engine.close()};
bi.prototype.onclose=function(a){wl("onclose");this.cleanup();(this||xd).backoff.reset();(this||xd).readyState="closed";this.emit("close",a);(this||xd)._reconnection&&!(this||xd).skipReconnect&&this.reconnect()};bi.prototype.reconnect=function(){if((this||xd).reconnecting||(this||xd).skipReconnect)return this||xd;var a=this||xd;if((this||xd).backoff.attempts>=(this||xd)._reconnectionAttempts)wl("reconnect failed"),(this||xd).backoff.reset(),this.emitAll("reconnect_failed"),(this||xd).reconnecting=
!1;else{var d=(this||xd).backoff.duration();wl("will wait %dms before reconnect attempt",d);(this||xd).reconnecting=!0;var k=setTimeout(function(){a.skipReconnect||(wl("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(wl("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(wl("reconnect success"),a.onreconnect())}))},d);(this||xd).subs.push({destroy:function(){clearTimeout(k)}})}};
bi.prototype.onreconnect=function(){var a=(this||xd).backoff.attempts;(this||xd).reconnecting=!1;(this||xd).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)};var $5=Y5,qs={},Uca=Vna,Wna=Li,r0=$5,q0=Pq("socket.io-client");qs=qs=p0;var gA=qs.managers={};qs.protocol=Wna.protocol;qs.connect=p0;qs.Manager=$5;qs.Socket=V5;var Xna=qs,Kf=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");Kf.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||
document.location.origin:Kf.isNode?System._nodeRequire("os").hostname():System.baseURL};Kf.promise=Vf;Kf.fun=Qj;Kf.obj=df;Kf.events=lu;Kf.num=Dj;Kf.L2LConnection=Fi;Kf.defaultActions=hJ;Kf.defaultClientActions=iJ;Kf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof Kf.process&&Kf.process.env;Kf._ioClient=Xna;Kf.resource=Dc;Kf.ioClient=Kf.ioClient||void 0;Kf.isNode?(Kf.require=System._nodeRequire("module")._load,Kf.ioClient=Kf.require("socket.io-client")):Kf.ioClient=
Kf._ioClient;Kf.urlHelper={isRoot:function(a){return"/"===Kf.urlHelper.path(a)},root:function(a){return Kf.urlHelper.isRoot(a)?a:a.slice(0,-Kf.urlHelper.path(a).length)+"/"},path:function(){var a=/^[a-z0-9-_\.]+:/,d=/^\/\/[^\/]+/;return function(k){k=k.replace(a,"").replace(d,"");return""===k?"/":k}}(),join:function(a,d){a.endsWith("/")&&(a=a.slice(0,-1));d.startsWith("/")&&(d=d.slice(1));return a+"/"+d}};var ti=function(a,d,k,b){var e=Kf.L2LConnection.call(this)||this;Kf.events.makeEmitter(e);e.info=
b;e.origin=a;e.path=d;e.namespace=k.replace(/^\/?/,"/");e.trackerId=null;e._socketioClient=null;e._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(Kf.defaultActions).forEach(function(l){return e.addService(l,Kf.defaultActions[l])});Object.keys(Kf.defaultClientActions).forEach(function(l){return e.addService(l,Kf.defaultClientActions[l])});return e};$jscomp.inherits(ti,Kf.L2LConnection);ti.clientKey=
function(a,d,k){a=a.replace(/\/$/,"");d=d.replace(/^\//,"");k=k.replace(/^\//,"");return a+"-"+d+"-"+k};ti.forLivelyInBrowser=function(a){var d=!!a;a=Object.assign({type:"lively.morphic browser"},a);var k=this.default();if(!k)return Kf.L2LClient.ensure({url:Kf.resource(Kf.determineLocation()).join("/lively-socket.io").url,namespace:"l2l",info:a});d&&!Kf.obj.equals(k.info,a)&&k.isRegistered()&&(k.info=a,k.unregister().then(function(){return k.register()}).catch(function(b){return console.error("l2l re-register on info change errored: "+
b)}));return k};ti.default=function(){var a=Kf.L2LClient.clients.keys().next().value;return Kf.L2LClient.clients.get(a)};ti.create=function(a){var d=a=void 0===a?{}:a;a=void 0===d.debug?!1:d.debug;var k=d.url,b=d.namespace,e=void 0===d.autoOpen?!0:d.autoOpen;d=void 0===d.info?{}:d.info;if(!k)throw Error("L2LClient needs server url!");var l=Kf.urlHelper.root(k).replace(/\/+$/,"");k=Kf.urlHelper.path(k);b=new this(l,k,b||"",d);e&&b.register();b.debug=a;return b};ti.ensure=function(a){var d=a=void 0===
a?{}:a,k=d.url;d=d.namespace;if(!k)throw Error("L2LClient needs server url!");var b=Kf.urlHelper.root(k).replace(/\/+$/,""),e=Kf.urlHelper.path(k);b=this.clientKey(b,e,d||"");(e=this.clients.get(b))||this.clients.set(b,e=this.create(Object.assign({},a,{url:k,namespace:d})));return e};ti.prototype.isOnline=function(){return this.socket&&this.socket.connected};ti.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};ti.prototype.open=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return a.isOnline()||a._reconnectState.isOpening?e.return(a):e.yield(a.close(),2);a._reconnectState.closed=!1;d=Kf.urlHelper.join(a.origin,a.namespace);k={path:a.path,transports:["websocket","polling"]};b=a._socketioClient=Kf.ioClient(d,k);a.debug&&console.log("["+a+"] connecting");b.on("error",function(l){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] errored: "+l)});b.on("close",function(l){return a.debug&&console.log("["+a+"] closed: "+l)});b.on("reconnect_failed",function(){return a.debug&&
console.log("["+a+"] could not reconnect")});b.on("reconnect_error",function(l){return a.debug&&console.log("["+a+"] reconnect error "+l)});b.on("connect",function(){a.debug&&console.log("["+a+"] connected");a.emit("connected",a);a._reconnectState.isOpening=!1;a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=!1});b.on("disconnect",function(){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] disconnected");a.emit("disconnected",a);a.trackerId?("tracker"!==
a.trackerId&&(a.renameTarget(a.trackerId,"tracker"),a.trackerId=null),a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed"):a._reconnectState.autoReconnect?(a._reconnectState.isReconnecting=!0,setTimeout(function(){a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed 2"):a._reconnectState.isReconnectingViaSocketio?a.debug&&console.log("["+a+"] won't reconnect again, client already reconnecting"):(a.debug&&
console.log("["+a+"] initiating reconnection to tracker"),a.register())},20)):a.debug&&console.log("["+a+"] won't reconnect b/c client has reconnection disabled")):(a.debug&&console.log("["+a+"] disconnect: don't have a tracker id, won't try reconnect"),a.trackerId="tracker")});b.on("reconnecting",function(){a.debug&&console.log("["+a+"] reconnecting",a._reconnectState);a.emit("reconnecting",a);a._reconnectState.closed?(a._reconnectState.isReconnecting=!1,a._reconnectState.isReconnectingViaSocketio=
!1,b.close(),a.close()):(a._reconnectState.isReconnecting=!0,a._reconnectState.isReconnectingViaSocketio=!0)});b.on("reconnect",function(){a.debug&&console.log("["+a+"] reconnected");a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=!1;a.register();if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect()});a.installEventToMessageTranslator(b);a._reconnectState.isOpening=!0;return e.return((new Promise(function(l,p){b.once("error",p);b.once("connect",l)})).then(function(){return a}))})};
ti.prototype.onReconnect=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a=(new Date).toTimeString();console.log("Reconnected at "+a);d.jumpToEnd()})};ti.prototype.close=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){a._reconnectState.closed=!0;if(d=a.socket)d.removeAllListeners("reconnect"),d.removeAllListeners("reconnecting"),d.removeAllListeners("disconnect"),d.removeAllListeners("connect"),d.removeAllListeners("reconnect_error"),
d.removeAllListeners("reconnect_failed"),d.removeAllListeners("close"),d.removeAllListeners("error"),d.close();a.debug&&console.log("["+a+"] closing...");return a.isRegistered()?b.yield(a.unregister(),2):b.jumpTo(2)}return a.isOnline()||a.socket?d&&!d.connected?(a.debug&&console.log("["+a+"] socket not connected, considering client closed"),b.return(a)):b.return(Promise.race([Kf.promise.delay(2E3).then(function(){return d.removeAllListeners("disconnect")}),new Promise(function(e){return d.once("disconnect",
e)})]).then(function(){a.debug&&console.log("["+a+"] closed");return a})):(a.debug&&(k=a.isOnline()?"no socket":"not online",a.debug&&console.log("["+a+"] cannot close: "+k)),b.return(a))})};ti.prototype.remove=function(){var a=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients.delete(a);return this.close()};ti.prototype.register=function(){var a=this,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(a.isRegistered())return A.return();
if(a._reconnectState.closed)return a.debug&&console.log("["+a+"] not registering this b/c closed"),a._reconnectState.registerAttempt=0,A.return();if(a._reconnectState.registerProcess)return a.debug&&console.log("["+a+"] not registering this b/c register process exists"),A.return();A.setCatchFinallyBlocks(2);if(a.isOnline()){A.jumpTo(4);break}return A.yield(a.open(),4);case 4:return a.debug&&console.log("["+a+"] register"),A.yield(a.sendToAndWait("tracker","register",Object.assign({userName:"unknown",
type:"l2l "+(Kf.isNode?"node":"browser"),location:Kf.determineLocation()},a.info)),6);case 6:d=A.yieldResult;if(!d.data)throw k=Error("Register answer is empty!"),a.emit("error",k),k;if(d.data.isError)throw b=Error(d.data.error),a.emit("error",b),b;a._reconnectState.registerAttempt=0;e=d;l=e.data;p=l.trackerId;q=l.messageNumber;a.trackerId=p;a._incomingOrderNumberingBySenders.set(p,q||0);a.emit("registered",{trackerId:p});if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect();A.leaveTryBlock(0);
break;case 2:u=A.enterCatchBlock(),console.error("Error in register request of "+a+": "+u),w=a._reconnectState.registerAttempt++,y=Kf.num.backoff(w,4,3E5),a._reconnectState.registerProcess=setTimeout(function(){a._reconnectState.registerProcess=null;a.register()},y),A.jumpToEnd()}})};ti.prototype.unregister=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(!a.isRegistered())return k.return();a.debug&&console.log("["+a+"] unregister");
d=a.trackerId;k.setCatchFinallyBlocks(2);return k.yield(a.sendToAndWait(a.trackerId,"unregister",{}),4);case 4:k.leaveTryBlock(3);break;case 2:k.enterCatchBlock();case 3:a.renameTarget(d,"tracker"),a.trackerId=null,a.emit("unregistered",a),k.jumpToEnd()}})};ti.prototype.whenRegistered=function(a){var d=this;return Kf.promise.waitFor(a,function(){return d.isRegistered()}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenRegistered"):k)})};ti.prototype.send=
function(a,d){var k=this,b=$jscomp.makeIterator(this.prepareSend(a,d));a=b.next().value;d=b.next().value;this.whenOnline().then(function(){var e=k.socket,l=a,p=l.action;l=l.target;if(!e)throw Error("Trying to send message "+p+" to "+l+" but cannot find a connection to it!");"function"===typeof d?e.emit(p,a,d):e.emit(p,a)})};ti.prototype.joinRoom=function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:a})})};ti.prototype.leaveRoom=
function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:a})})};ti.prototype.broadcast=function(a,d,k,b,e){var l=this,p={action:d,room:a,broadcast:k};if(void 0===b?0:b)p.isSystemBroadcast=!0;if(void 0===e?0:e)p.isMultiServerBroadcast=!0;return this.whenOnline().then(function(){return l.sendToAndWait(l.trackerId,"[broadcast] send",p)})};ti.prototype.listRoomMembers=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(d.sendToAndWait(d.trackerId,"[broadcast] list room members",{room:a}),2);k=e.yieldResult;b=k.data;return e.return(b)})};ti.prototype.joinedRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,"[broadcast] my rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};ti.prototype.listRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,"[broadcast] all rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};ti.prototype.listPeers=function(a){a=void 0===a?!1:a;var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return k=d,b=k._peersCached,e=Date.now(),!a&&b&&1E3>e-b.timestamp?u.return(d._peersCached.sessions):d.isOnline()?u.yield(d.sendToAndWait(d.trackerId,"getClients",{}),2):u.return([]);l=u.yieldResult;p=l.data;
q=p.map(function(w){var y=$jscomp.makeIterator(w);w=y.next().value;var A=y.next().value,C=A.info||{};y=C.userRealm;var E=C.userToken,L=C.l2lUserToken,I=C.location,V=C.type;C=C.world;w=Object.assign({},Kf.obj.dissoc(A,["info"]),{id:w,world:C,location:I,type:V});(E=E||L)&&"null"!==E&&(lively.user?w.user=lively.user.ClientUser.fromToken(E,y):(w.userToken=E,w.userRealm=y));return w});d._peersCached={timestamp:e,sessions:q};return u.return(q)})};ti.prototype.toString=function(){var a=this.origin,d=this.path,
k=this.namespace,b=this.id,e=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(b||"").slice(0,5)+" "+a+d+" - "+k+" "+e+")"};$jscomp.global.Object.defineProperties(ti.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(ti,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||
(this._clients=new Map)}}});Kf.L2LClient=ti;Kf.default=ti;var a6=Object.freeze({__proto__:null,"default":ti});za("bS",a6);var Xu=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");Xu.promise=Vf;Xu.events=lu;var Nm=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=Xu.promise.deferred();this._whenStarted=Xu.promise.deferred();this.startTime=0;this.lastSignal=null;Xu.events.makeEmitter(this)};Nm.findCommand=function(a){return this.commands.find(function(d){return d.pid===
a})};Nm.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};Nm.prototype.isDone=function(){return void 0!=this.exitCode};Nm.prototype.whenStarted=function(){return this._whenStarted.promise};Nm.prototype.whenDone=function(){return this._whenDone.promise};Nm.prototype.spawn=function(a){throw Error("not yet implemented");};Nm.prototype.kill=function(a){this.lastSignal=void 0===a?"KILL":a};Nm.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+
this.status+")"};$jscomp.global.Object.defineProperties(Nm.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+
this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(Nm,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||(this._commands=[])}}});Xu.CommandInterface=Nm;Xu.default=Nm;var Bf=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Bf.runCommand=iu;Bf.defaultDirectory=hA;Bf.env=iA;Bf.readFile=zG;Bf.writeFile=
AG;Bf.CommandInterface=Nm;Bf.promise=Vf;Bf.arr=Ke;Bf.obj=df;Bf.signal=xk;Bf.debug=!1;Bf.runCommand=iu;Bf.runCommand=iu;Bf.dirCache={};Bf.defaultDirectory=hA;Bf.defaultDirectory=hA;Bf.env=iA;Bf.env=iA;Bf.readFile=zG;Bf.readFile=zG;Bf.writeFile=AG;Bf.writeFile=AG;var Jn=function(a){var d=Bf.CommandInterface.call(this)||this;d.debug=Bf.debug;d.l2lClient=a;return d};$jscomp.inherits(Jn,Bf.CommandInterface);Jn.installLively2LivelyServices=function(a){Object.keys(Bf.L2LServices).forEach(function(d){return a.addService(d,
function(k,b,e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Bf.L2LServices[d](k,b,e))})})})};Jn.prototype.envForCommand=function(a){var d=this.l2lClient,k=d.id,b=d.origin,e=d.path;d=d.namespace;var l=a||{};a=l.env;l=l.owner;a=a||{};l&&(a.LIVELY_COMMAND_OWNER=l);return Object.assign({ASKPASS_SESSIONID:k,L2L_EDITOR_SESSIONID:k,L2L_SESSIONTRACKER_SERVER:b,L2L_SESSIONTRACKER_PATH:e,L2L_SESSIONTRACKER_NS:d},a)};Jn.prototype.spawn=function(a){a=void 0===a?{command:null,
env:{},cwd:null,stdin:null}:a;var d=this,k,b,e,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return k=d,b=k.l2lClient,e=a,l=e.command,p=e.env,q=e.cwd,u=e.stdin,d.startTime=new Date,p=d.envForCommand(a),d.debug&&console.log(d+" spawning "+l),d.debug&&d.whenStarted().then(function(){return console.log(d+" started")}),d.debug&&d.whenDone().then(function(){return console.log(d+" exited")}),Bf.arr.pushIfNotIncluded(d.constructor.commands,d),d.commandString=
Array.isArray(l)?l.join(""):l,E.yield(b.sendToAndWait(b.trackerId,"lively.shell.spawn",{command:l,env:p,cwd:q,stdin:u},{ackTimeout:3E4}),2);w=E.yieldResult;y=w.data;A=y.error;C=y.pid;if(A)throw Bf.debug&&console.error("["+d+"] error at start: "+A),d.process={error:A},d.exitCode=1,Bf.signal(d,"error",A),Error(A);d.process={pid:C};Bf.debug&&console.log("["+d+"] got pid "+C);Bf.signal(d,"pid",C);d._whenStarted.resolve();return E.return(d)})};Jn.prototype.writeToStdin=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!d.isRunning())return l.return();
k=d;b=k.l2lClient;e=k.pid;return l.yield(b.sendToAndWait(b.trackerId,"lively.shell.writeToStdin",{pid:e,stdin:String(a)}),0)})};Jn.prototype.kill=function(a){a=void 0===a?"KILL":a;var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){if(!d.isRunning())return w.return();Bf.debug&&console.log(d+" signaling "+a);d.lastSignal=a;k=d;b=k.pid;e=k.l2lClient;return w.yield(e.sendToAndWait(e.trackerId,"lively.shell.kill",{pid:b}),2)}l=w.yieldResult;p=l.data;
q=p.status;u=p.error;Bf.debug&&console.log(d+" kill send: "+(u||q));if(u)throw Error(u);return w.return(d.whenDone())})};Jn.prototype.onOutput=function(a){var d=a.stdout;a=a.stderr;d&&(this._stdout+=d,Bf.signal(this,"stdout",d),this.emit("stdout",d));a&&(this._stderr+=a,Bf.signal(this,"stderr",a),this.emit("stderr",a))};Jn.prototype.onClose=function(a){Bf.arr.remove(this.constructor.commands,this);this.exitCode=a;this.emit("close",a);Bf.signal(this,"close",a);this._whenDone.resolve(this)};Jn.prototype.onError=
function(a){Bf.arr.remove(this.constructor.commands,this);this._stderr+=a.stack;this.exitCode=1;this.emit("error",a.stack);Bf.signal(this,"error",a.stack);this._whenDone.reject(a)};Bf.ClientCommand=Jn;Bf.L2LServices={"lively.shell.onOutput":function(a,d,k,b){a=d.data;var e=a.pid,l=a.stdout,p=a.stderr,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Bf.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+e),u.setCatchFinallyBlocks(2),
u.yield(Bf.promise.waitFor(1E3,function(){return Bf.ClientCommand.findCommand(e)}),4);case 4:q=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received output for command "+e+" but it isn't registered!'"),u.return();case 3:q.onOutput({stdout:l,stderr:p}),u.jumpToEnd()}})},"lively.shell.onExit":function(a,d,k,b){a=d.data;var e=a.pid,l=a.code,p=a.error,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Bf.debug&&
console.log("[lively.shell] client received lively.shell.onExit for command "+e),u.setCatchFinallyBlocks(2),u.yield(Bf.promise.waitFor(1E3,function(){return Bf.ClientCommand.findCommand(e)}),4);case 4:q=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+e+" but it isn't registered!'"),u.return();case 3:if(p)"string"===typeof p&&(p=Error(p)),q.onError(p);else q.onClose(l);u.jumpToEnd()}})}};Bf.default=Jn;var Yna=
Object.freeze({__proto__:null,runCommand:iu,defaultDirectory:hA,env:iA,readFile:zG,writeFile:AG,"default":Jn}),ph=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");ph.runCommand=BG;ph.defaultDirectory=jA;ph.env=qO;ph.readFile=function(a,d){d=(d=void 0===d?{}:d)||{};var k=ph.runCommand('cat "'+a+'"',d);return k.whenDone().then(function(){return k.output})};ph.writeFile=function(a,d,k){"string"===typeof d&&(d={content:d});d=d||{};d.content=d.content||"";"win32"!==this.PLATFORM&&
(a='"'+a+'"');a=this.run("tee "+a,{stdin:d.content,cwd:d.cwd});d.onEnd&&lively.bindings.connect(a,"end",d,"onEnd");k&&lively.bindings.connect(a,"end",{thenDo:k},"thenDo");return a};ph.parseCommand=rO;ph.doGrep=sO;ph.L2LClient=ti;ph._runCommand=iu;ph._env=iA;ph._defaultDirectory=hA;ph.string=rg;ph.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};ph.runCommand=BG;ph.runCommand=BG;ph.defaultDirectory=jA;ph.defaultDirectory=jA;ph.env=qO;ph.env=qO;ph.parseCommand=rO;
ph.parseCommand=rO;ph.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");ph.doGrep=sO;ph.doGrep=sO;var dh=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");dh.fileInfo=CG;dh.fileInfoCommandString=function(a,d){var k=d=void 0===d?{}:d;d=k.rootDirectory;k=k.platform;d=d||".";var b="win32"===k?"\\":"/";"win32"===k||d.endsWith(b)||(d+=b);return"win32"===k?"cd "+d+' && ls -lLd --time-style=locale "'+a+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+
(d+' && ls -lLd "$timeformat" "'+a+'"')};dh.parseDirectoryListFromLs=tO;dh.findFiles=DG;dh.findFilesCommandString=function(a,d){var k=d=void 0===d?{}:d,b=k.rootDirectory,e=k.exclude,l=k.depth;k=k.platform;b=b||".";e=e||"-iname "+dh.defaultExcludes.map(dh.string.print).join(" -o -iname ");var p="win32"===k?"\\":"/";"win32"===k||b.endsWith(p)||(b+=p);a=dh.string.format('%s "%s"',d.re?"-iregex":d.matchPath?"-ipath":"-iname",a);l="number"===typeof l?" -maxdepth "+l:"";return"win32"===k?dh.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
b,d.re?"-E ":"",e.replace(/"/g,""),a.replace(/"/g,""),l):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+dh.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',b,d.re?"-E ":"",e,a,l)};dh.convertDirectoryUploadEntriesToFileInfos=uO;dh.runCommand=iu;dh.string=rg;dh.promise=Vf;dh.arr=Ke;dh.fileInfo=CG;dh.fileInfo=CG;dh.parseDirectoryListFromLs=
tO;dh.parseDirectoryListFromLs=tO;var rJ=function(a){this.rootDirectory=a;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};rJ.prototype.readFromDirectoryListLine=function(a){var d=this;if(!a.trim().length)return null;var k=a;this.reader.forEach(function(b){return k=b(k,d)});return this};rJ.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(rJ.prototype,
{reader:{configurable:!0,enumerable:!0,get:function(){return[function(a,d){var k=a.indexOf(" ");d.mode=a.slice(0,k);d.isDirectory="d"===d.mode[0];return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.linkCount=Number(a.slice(0,k));return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.user=a.slice(0,k);return a.slice(k+1).trim()},function(a,d){var k=dh.string.peekRight(a,0,/\s+[0-9]/);d.group=a.slice(0,k).trim();return a.slice(k).trim()},function(a,d){var k=a.indexOf(" ");d.size=
Number(a.slice(0,k));return a.slice(k+1).trim()},function(a,d){var k=dh.string.reMatches(a,/[^s]+\s+[0-9:\s]+/);if(!k||!k[0])return a;d.lastModified=new Date(k[0].match+" GMT");return a.slice(k[0].end).trim()},function(a,d){var k=(a=a.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&a.split(" -> "),b=""===a?!1:a&&2===k.length,e=(k=b?k[0]:a)&&0===k.indexOf(d.rootDirectory)?k.slice(d.rootDirectory.length):k;d.fileName=""===a?".":e;d.path=k;d.isLink=b;return e}]}}});dh.FileInfo=rJ;dh.findFilesProcesses=
{};dh.findFiles=DG;dh.findFiles=DG;dh.defaultExcludes=[".svn",".git","node_modules",".module_cache"];dh.convertDirectoryUploadEntriesToFileInfos=uO;dh.convertDirectoryUploadEntriesToFileInfos=uO;var Zh=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");Zh.Resource=zf;Zh.runCommand=iu;Zh.fileInfo=CG;Zh.findFiles=DG;Zh.string=rg;Zh.promise=Vf;Zh.arr=Ke;Zh.obj=df;var xl=function(a,d,k){k=void 0===k?{}:k;a=Zh.Resource.call(this,a)||this;a.options=Object.assign({},k,{l2lClient:d||a.constructor.defaultL2lClient});
return a};$jscomp.inherits(xl,Zh.Resource);xl.prototype.newResource=function(a){return new this.constructor(a,this.options.l2lClient,this.options)};xl.prototype.read=function(){var a=this,d=Zh.runCommand('cat "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read "+a.url+" failed: "+d.stderr);return d.output})};xl.prototype.write=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a?
e.yield(Zh.runCommand('touch "'+d.url+'" && tee "'+d.url+'"',Object.assign({stdin:String(a)},d.options)).whenDone(),4):e.yield(Zh.runCommand('echo -n > "'+d.url+'"',Object.assign({},d.options)).whenDone(),5);case 4:k=e.yieldResult;e.jumpTo(3);break;case 5:k=e.yieldResult;case 3:b=k;if(b.exitCode)throw Error("Write "+d.url+" failed: "+b.stderr);return e.return(d)}})};xl.prototype.mkdir=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Zh.runCommand('mkdir -p "'+
a.url+'"',a.options).whenDone(),2);d=k.yieldResult;if(d.exitCode)throw Error(a+" cannot create directory: "+d.stderr);return k.return(a)})};xl.prototype.exists=function(){var a=Zh.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return a.whenDone().then(function(){return 0===a.exitCode})};xl.prototype.remove=function(){var a=this,d=Zh.runCommand('rm -rf "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of "+a.url+" failed: "+
d.stderr);return a})};xl.prototype.gzip=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=Zh.runCommand('gzip > "'+d.url+'"',Object.assign({stdin:String(a)},d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Gzip compression of "+d.url+" failed: "+k.stderr);return d}))})};xl.prototype.brotli=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=Zh.runCommand('brotli > "'+d.url+'"',Object.assign({stdin:String(a)},
d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Brotli compression of "+d.url+" failed: "+k.stderr);return d}))})};xl.prototype.readProperties=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(Zh.fileInfo(a.url,a.options),2);d=k.yieldResult;a.assignProperties(Zh.obj.dissoc(d,["fileName","path","rootDirectory"]));return k.return(a)})};xl.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===
d?{}:d;var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=d,e=b.exclude,Array.isArray(e)&&(e="-iname "+e.map(Zh.string.print).join(" -o -iname ")),l=k,p=l.url,q=l.options,u=q.l2lClient,y.yield(Zh.findFiles("*",{exclude:e,depth:a,rootDirectory:p,l2lClient:u}),2);w=y.yieldResult;w[0].path.replace(/\/$/,"")===k.url.replace(/\/$/,"")&&w.shift();return y.return(w.map(function(A){var C=A.path;A.isDirectory&&(C=C.replace(/\/?$/,"/"));C=new k.constructor(C,
u,k.options);C.assignProperties(Zh.obj.dissoc(A,["fileName","path","rootDirectory"]));return C}))})};$jscomp.global.Object.defineProperties(xl,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||Zh._defaultL2LClient},set:function(a){this._defaultL2lClient=Zh._defaultL2LClient=a}}});Zh.ShellClientResource=xl;Zh._defaultL2LClient=Zh._defaultL2LClient||void 0;var sJ={name:"shell-client",matches:function(a){return a.startsWith("/")||a.match(/[a-z]:\\/i)},resourceClass:Zh.ShellClientResource};
Zh.resourceExtension=sJ;Zh.resourceExtension=sJ;Zh.resourceExtension=sJ;Zh.default=xl;var Zna=Object.freeze({__proto__:null,"default":xl,resourceExtension:sJ}),Re=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");Re.loadWorldFromURL=EG;Re.loadWorldFromCommit=FG;Re.loadWorldFromDB=GG;Re.loadWorld=HG;Re.loadLocalConfig=function(){var a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return a=lively.modules.module("localconfig.js"),k.setCatchFinallyBlocks(2),
k.yield(Re.resource(a.id).exists(),4);case 4:if(!k.yieldResult){k.jumpTo(5);break}return k.yield(a.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:k.leaveTryBlock(0);break;case 2:d=k.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),k.jumpToEnd()}})};Re.setupLivelyShell=function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return q.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=q.yieldResult,k=d.default,q.yield(System.import("lively.shell/client-resource.js"),4);case 4:b=q.yieldResult,e=b.resourceExtension,l=a,p=l.l2lClient,k.installLively2LivelyServices(p),e.resourceClass.defaultL2lClient=p,Re.registerResourceExension(e),console.log("[lively] lively.shell setup"),q.jumpToEnd()}})};Re.setupLively2Lively=function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return d=
a.getCurrentUser(),k={world:a.name},d&&(k.userToken=d.token,k.userRealm=d.realm),p.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return p.yield(System.import("lively.2lively/client.js"),3);case 3:return b=p.yieldResult,e=b.default,p.yield(e.forLivelyInBrowser(k),4);case 4:return l=p.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?Re.reportWorldLoad(a,d):(l._onUserChange=function(q){l.isOnline()&&q.user&&(q=q.user,l.info=Object.assign({},l.info,
{userToken:q.token,userRealm:q.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},Re.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){Re.reportWorldLoad(a,d)}),l.on("registered",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)}),l.on("connected",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var q=a.get("user flap");
q&&q.updateNetworkIndicator(l)}),l.on("disconnected",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)})),p.return(l)}})};Re.interactivelySaveWorld=bx;Re.reportWorldLoad=function(a,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch(Re.joinPath(System.baseURL,"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+a.name+" ["+window._livelyLoadId+"]"})}).catch(function(k){return console.warn("report-world-load failed: "+
k)})};Re.resource=Dc;Re.registerResourceExension=Hd;Re.Color=of;Re.Path=Ag;Re.obj=df;Re.date=op;Re.promise=Vf;Re.MorphicEnv=qn;Re.createMorphSnapshot=hu;Re.MorphicDB=Gp;Re.ensureCommitInfo=Tz;Re.pathForBrowserHistory=ew;Re.subscribe=My;Re.emit=Xp;Re.defaultDirectory=jA;Re.ShellClientResource=xl;Re.joinPath=Uf;Re.reset=nF;Re.loadWorldFromURL=EG;Re.loadWorldFromURL=EG;Re.loadWorldFromCommit=FG;Re.loadWorldFromCommit=FG;Re.loadWorldFromDB=GG;Re.loadWorldFromDB=GG;Re.loadWorld=HG;Re.loadWorld=HG;Re.interactivelySaveWorld=
bx;Re.interactivelySaveWorld=bx;var ii=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");ii.jwtTokenDecode=function(a){a=$jscomp.makeIterator(a.split("."));a.next();var d=a.next().value;a.next();return JSON.parse(atob(d))};ii.guid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};ii.makeRequest=function(a,d,k,b){b=void 0===b?{}:b;d={method:void 0===d?"GET":d,mode:"cors"};k&&(d.body=
k);d.redirect="follow";d.headers=Object.assign({},b);return fetch(a,d)};ii.POST=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(ii.makeRequest(a,"POST",d,{}),2);case 2:return k=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(k.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===k.headers.get("content-type"))try{e=
JSON.parse(b)}catch(p){}if(!e)throw Error("Unexpected response: "+b);return l.return(e)}})};ii.resource=Dc;var Yu=za("k",function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.realm=e;this.name=
b;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(b,e,l){var p=this,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return q=p,u=q.email,w=q.createdAt,y=q.roles,A=q.name,C="register"===b?{password:e,email:u,createdAt:w,roles:y,name:A}:{password:e,name:A},T.yield(ii.POST(l+"/"+b,C),2);E=T.yieldResult;if(E.error)return T.return(E);L=E;I=L.token;
V=ii.jwtTokenDecode(I);y=V.roles;w=V.createdAt;u=V.email;Object.assign(p,{roles:y,createdAt:w,email:u,token:I});return T.return({status:E.status})})}},{key:"verify",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(ii.POST(b.realm+"/verify",{token:b.token}),2);e=p.yieldResult;l=e.error;return p.return(!l)})}},{key:"login",value:function(b){return this.loginOrRegister("login",b,this.realm)}},{key:"register",value:function(b){return this.loginOrRegister("register",
b,this.realm)}},{key:"checkPassword",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!e.isLoggedIn)throw Error("To check password, user needs to login.");return u.yield(ii.POST(e.realm+"/check-password",{token:e.token,password:b}),2)}l=u.yieldResult;p=l.error;q=l.status;if(p)throw Error(p);return u.return(q)})}},{key:"modify",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==
E.nextAddress)return E.yield(ii.POST(e.realm+"/modify",{token:e.token,changes:b}),2);l=E.yieldResult;p=l.error;q=l.status;u=l.token;if(p)return E.return({error:p});u&&(w=ii.jwtTokenDecode(u),y=w.roles,A=w.createdAt,C=w.email,Object.assign(e,{roles:y,createdAt:A,email:C,token:u}));return E.return({status:q})})}},{key:"getDir",value:function(){return ii.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?
"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return ii.guestUser}},{key:"named",value:function(b,e){var l=b+"-"+e,p=ii.userMap.get(l);p||(p=new this(b,e),ii.userMap.set(l,p));return p}},{key:"fromToken",value:function(b,e){var l=ii.jwtTokenDecode(b),p=l.roles,q=l.createdAt,u=l.email;return Object.assign(this.named(l.name,e),{roles:p,createdAt:q,email:u,token:b})}},{key:"clearCache",value:function(){ii.userMap=new Map}}],
d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1106,end:3681})}(void 0));ii.User=Yu;ii.User=Yu;ii.User=Yu;var Zu=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("GuestUser")&&"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(b,e,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){throw Error("Guest user cannot "+b+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],d,{pathInPackage:function(){return"client/user.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3690,end:3918})}(ii.User);ii.GuestUser=Zu;ii.GuestUser=Zu;ii.GuestUser=Zu;ii.userMap=ii.userMap||new Map;ii.guestUser=ii.guestUser||ii.GuestUser.named("guest-"+ii.guid(),null);var Fo=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Fo.User=Yu;Fo.GuestUser=Zu;Fo.emit=
Xp;var KR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),k=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(b){return!1}}},
{key:"login",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b.isGuestUser?u.jumpTo(2):u.yield(b.login(e),3);if(2!=u.nextAddress&&(p=u.yieldResult,q=p.error))throw Error(q);l.saveUserToLocalStorage(b);return u.return(b)})}},{key:"logout",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{e.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(p){}b=
b&&b.isGuestUser?b:Fo.User.guest;Fo.emit("lively.user/userchanged",{user:b},Date.now(),System);return l.return(b)})}},{key:"register",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!b||b.isGuestUser)throw Error("guest users cannot register");return u.yield(b.register(e),2)}p=u.yieldResult;if(q=p.error)throw Error(q);l.saveUserToLocalStorage(b);return u.return(b)})}},{key:"loadUserFromLocalStorage",value:function(b){try{var e=
localStorage["lively.user"]||sessionStorage["lively.user"];if(e)return e=JSON.parse(e),e.isGuest?Fo.GuestUser.named(e.name,null):Fo.User.fromToken(e.token,b)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?!1:Fo.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(b){if(!b||!b.isGuestUser&&!b.token)return!1;Fo.emit("lively.user/userchanged",{user:b},Date.now(),System);try{return b.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=
JSON.stringify({isGuest:!0,name:b.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=b.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:b.name}):JSON.stringify({token:b.token}),!0}catch(e){return console.warn("Could not save user into local/sessionStorage: "+e),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,{pathInPackage:function(){return"client/user-registry.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);KR=Fo.UserRegistry;var tJ=za("U",KR);Fo.default=KR;var Sx=lively.FreezerRuntime.recorderFor("lively.user/index.js");Sx.User=Yu;Sx.ClientUser=Yu;Sx.GuestUser=Zu;Sx.GuestUser=Zu;Sx.default=tJ;Sx.UserRegistry=tJ;var $na=Object.freeze({__proto__:null,ClientUser:Yu,GuestUser:Zu,
UserRegistry:tJ}),ff=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");ff.bowser=zn;ff.Rectangle=Od;ff.Color=of;ff.pt=bh;ff.arr=Ke;ff.promise=Vf;ff.Path=Ag;ff.obj=df;ff.signal=xk;ff.config=ok;ff.MorphicEnv=qn;ff.Morph=Vi;ff.TooltipViewer=Rx;ff.Tooltip=Vu;ff.loadWorldFromURL=EG;ff.loadWorldFromDB=GG;ff.loadWorldFromCommit=FG;ff.loadWorld=HG;ff.touchInputDevice=Ll;ff.UserRegistry=tJ;ff.emit=Xp;ff.resource=Dc;ff.loadMorphFromSnapshot=hp;var wq=za("ah",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),
k=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._renderer=null;this._tooltipViewer=new ff.TooltipViewer(this)}},{key:"__deserialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),
"__deserialize__",this).call(this,b,e,l,p);this._renderer=null;this._tooltipViewer=new ff.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);if(b.props.submorphs)for(b=b.props.submorphs.value,e=b.length;e--;)l.refForId(b[e].id).realObj.isHand&&ff.arr.removeAt(b,e)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Kb._get(Object.getPrototypeOf(k.prototype),
"commands",this)),[{name:"resize to fit window",exec:function(b){var e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=function(){b.extent=lively.FreezerRuntime?b.windowBounds().extent():b.windowBounds().union(b.submorphBounds(function(w){return!w.isEpiMorph&&!w.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(b.whenRendered(),2);delete b._cachedWindowBounds;
return w.return(!b.windowBounds().extent().equals(b.extent))})},p=0;case 2:if(!(q=5>p)){u.jumpTo(4);break}return u.yield(l(),5);case 5:q=u.yieldResult;case 4:if(!q){u.jumpTo(3);break}p++;e();u.jumpTo(2);break;case 3:return b.relayout(),u.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(!0)})}},{key:"render",value:function(b){return b.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},
{key:"grabbable",set:function(b){}},{key:"existingHandForPointerId",value:function(b){return this.submorphs.find(function(e){return e instanceof ff.Hand&&e.pointerId===b})}},{key:"layoutHaloForPointerId",value:function(b){}},{key:"haloForPointerId",value:function(b){}},{key:"handForPointerId",value:function(b,e){e=void 0===e?!1:e;var l=this.existingHandForPointerId(b);return l?l:!l&&this.firstHand&&e?(this.firstHand.pointerId=b,this.firstHand):this.addMorph(new ff.Hand(b),this.submorphs[0])}},{key:"removeHandForPointerId",
value:function(b){(b=this.existingHandForPointerId(b))&&1<this.hands.length&&b.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var b=this.env.renderer;b&&b.renderLater()}}},{key:"hands",get:function(){return ff.arr.sortBy(this.submorphs.filter(function(b){return b.isHand}),function(b){return b.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return ff.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||
ff.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var b=this.env.eventDispatcher;return(b=b&&b.eventState.focusedMorph)&&b.world()===this?b:this}},{key:"onMouseMove",value:function(b){b.hand&&b.hand.update(b);this._tooltipViewer.mouseMove(b)}},{key:"onHoverOut",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);if(b.state.draggedMorph){var e=b.state;e.dragDelta=(e.draggedMorph.owner||this).getInverseTransform().transformDirection(b.position.subPt(e.lastDragPosition));
e.absDragDelta=b.position.subPt(e.clickedOnPosition);b.onAfterDispatch(function(){return e.lastDragPosition=b.position});b.state.draggedMorph.onDrag(b)}}},{key:"onMouseDown",value:function(b){b.state.menu&&b.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(b)}},{key:"onMouseUp",value:function(b){b.isCommandKey()&&b.stop();if(b.isAltDown()&&ff.config.altClickDefinesThat){var e=this.morphsContainingPoint(b.position)[0];setTimeout(function(){return System.global.that=e},100);e.show();
b.stop();console.log('Set global "that" to '+e)}}},{key:"onMouseWheel",value:function(b){b.isShiftDown()&&(window.scrollBy(-b.domEvt.wheelDeltaX,-b.domEvt.wheelDeltaY),b.stop())}},{key:"onBeforeUnload",value:function(b){return this.onUnload(b)}},{key:"onUnload",value:function(b){this.submorphs.forEach(function(e){if("function"===typeof e.onWorldUnload)e.onWorldUnload(b)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(b){if(b.respondsToVisibleWindow){if("function"!==
typeof b.relayout)return b.showError(Error(b+" listed as responding to visible window change, but has no relayout instruction"));b.relayout()}})}},{key:"onWindowScroll",value:function(){var b=this.env.eventDispatcher.keyInputHelper.inputState,e=b.positionChangedTime,l=b.scrollLeftWhenChanged;b=b.scrollTopWhenChanged;var p=document.documentElement;500>Date.now()-e&&!ff.bowser.firefox?(p.scrollLeft=l,p.scrollTop=b):(this.setProperty("scroll",ff.pt(p.scrollLeft,p.scrollTop)),this._cachedWindowBounds=
null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.whenRendered(),2);if(3!=u.nextAddress)return e._cachedWindowBounds=null,"elastic"!==e.resizePolicy?u.jumpTo(3):u.yield(e.execCommand("resize to fit window"),3);e.updateVisibleWindowMorphs();l=$jscomp.makeIterator(e.submorphs);for(p=l.next();!p.done;p=l.next())if(q=p.value,"function"===typeof q.onWorldResize)q.onWorldResize(b);
u.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(b){if(!b)return null;var e=this.focusedMorph,l=ff.arr.findAndGet(ff.arr.without([e].concat($jscomp.arrayFromIterable(e.ownerChain())),this),function(p){return ff.arr.findAndGet(p.keyhandlers,function(q){return(q=q.eventCommandLookup(p,b))?{command:q,morph:p}:null})})||{};e=l.command;l=l.morph;return e?l.execCommand(e):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):
this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(b){if(this._cachedWindowBounds)return this._cachedWindowBounds;b=this.env.domEnv.window;var e=1/this.scale;return this._cachedWindowBounds=new ff.Rectangle(b.scrollX*e,b.scrollY*e,(b.innerWidth||this.width)*e,(b.innerHeight||this.height)*e)}},{key:"logError",value:function(b){console.log(b)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(b){return[]}},
{key:"serveFileAsDownload",value:function(b,e){var l=void 0===e?{}:e;e=void 0===l.fileName?"file.txt":l.fileName;l=void 0===l.type?"text/plain":l.type;var p=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,q=b instanceof Blob,u=window.document.createElement("a");u.href=ff.obj.isString(b)&&b.match(p)?b:window.URL.createObjectURL(q?b:new Blob([b],{type:l}));u.download=e;document.body.appendChild(u);u.click();document.body.removeChild(u)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(b){this.setProperty("resizePolicy",b);this.clipMode="static"===b?"visible":"hidden";"elastic"==b&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(b){var e=this,l=ff.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof l&&(b=l);this.setProperty("showsUserFlap",b);System.import("lively.user/morphic/user-ui.js").then(function(p){return p.UserUI[b?"showUserFlap":"hideUserFlap"](e).then(function(){b&&(e.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(b){this.setProperty("enableComments",b);b&&System.import("lively.collab").then(function(e){return e.CommentBrowser.initializeCommentBrowser()})}}}}},
{key:"defaultWorld",value:function(){return ff.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return ff.loadWorldFromURL(b,e,l)}},{key:"loadWorld",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return ff.loadWorld(b,e,l)}},{key:"loadFromCommit",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return ff.loadWorldFromCommit(b,e,l)}},{key:"loadFromDB",value:function(b,
e,l,p){l=void 0===l?this.defaultWorld():l;p=void 0===p?{}:p;return ff.loadWorldFromDB(b,e,l,p)}},{key:"loadFromResource",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;var p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return p=ff,q=p.loadWorld,u=ff,w=u.loadMorphFromSnapshot,y.yield(b.readJson(),4);case 4:return y.yield(w.call(u,y.yieldResult),3);case 3:return y.yield(q.call(p,y.yieldResult,e,l),2);case 2:return y.return(y.yieldResult)}})}}],
d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:12867})}(ff.Morph));ff.World=wq;ff.World=wq;ff.World=wq;var Tx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:b})}},{key:"__deserialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",
value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(b,e){return e}},{key:"update",value:function(b){this.position=b.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(b,e){b=void 0===b?!0:b;var l=this,p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(!l.grabbedMorphs.length)return I.return();l.env.eventDispatcher.cancelGrab(l,e);p=[];q=$jscomp.makeIterator(l.grabbedMorphs);for(u=q.next();!u.done;u=
q.next())w=u.value,y=l._grabbedMorphProperties.get(w)||{},A=y.prevOwner,C=y.prevIndex,E=y.prevPosition,L=y.pointerAndShadow,Object.assign(w,L),A?(A.addMorphAt(w,C),b?p.push(w.animate({position:E})):w.position=E):w.remove();return I.return(p.length?Promise.all(p):null)})}},{key:"grab",value:function(b){var e=this;if(ff.obj.isArray(b))return b.forEach(function(l){return e.grab(l)});this.withMetaDo({metaInteraction:!0},function(){e._grabbedMorphProperties.set(b,{prevOwner:b.owner,prevPosition:b.position,
prevIndex:b.owner?b.owner.submorphs.indexOf(b):-1,pointerAndShadow:ff.obj.select(b,["dropShadow","reactsToPointer"])});b.reactsToPointer=!1;b.dropShadow=!0;e.addMorph(b)});ff.signal(this,"grab",b)}},{key:"dropMorphsOn",value:function(b){var e=this;this.withMetaDo({metaInteraction:!0},function(){e.grabbedMorphs.forEach(function(l){try{var p=(e._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,p);ff.signal(e,"drop",l);l.onBeingDroppedOn(e,b)}catch(q){console.error(q),e.world().showError("Error dropping "+
l+" onto "+b+":\n"+q.stack),l.owner!==b&&e.world().addMorph(b)}})})}},{key:"findDropTarget",value:function(b,e,l){var p=this;b=void 0===b?this.globalPosition:b;e=void 0===e?this.grabbedMorphs:e;b=this.world().morphsContainingPoint(b);return ff.arr.sortBy(b,function(q){return[q].concat($jscomp.arrayFromIterable(q.ownerChain())).find(function(u){return ff.Path("owner.isWorld").get(u)&&u.hasFixedPosition})?0:1}).find("function"===typeof l?function(q,u){return!p.isAncestorOf(q)&&q.acceptsDrops&&!e.includes(q)&&
e.every(function(w){return w.wantsToBeDroppedOn(q)})&&l(q,u)}:function(q){return!p.isAncestorOf(q)&&q.acceptsDrops&&q.ownerChain().every(function(u){return u.visible})&&e.every(function(u){return u.wantsToBeDroppedOn(q)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:ff.touchInputDevice?ff.Color.transparent:ff.Color.orange},extent:{defaultValue:ff.pt(1,1)},reactsToPointer:{defaultValue:!1},
pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12876,end:16942})}(ff.Morph);ff.Hand=Tx;ff.Hand=Tx;ff.Hand=Tx;var aoa=Object.freeze({__proto__:null,World:wq,Hand:Tx}),mj=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");mj.comparePosition=vO;mj.lessPosition=kp;mj.lessEqPosition=cx;mj.eqPosition=lp;mj.minPosition=dx;mj.maxPosition=ex;mj.comparePosition=vO;mj.comparePosition=vO;mj.lessPosition=kp;mj.lessPosition=kp;mj.lessEqPosition=cx;mj.lessEqPosition=
cx;mj.eqPosition=lp;mj.eqPosition=lp;mj.minPosition=dx;mj.minPosition=dx;mj.maxPosition=ex;mj.maxPosition=ex;var Rf=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");Rf.lessPosition=kp;Rf.lessEqPosition=cx;Rf.eqPosition=lp;Rf.minPosition=dx;Rf.maxPosition=ex;var rs=za("bz",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),k=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=b=void 0===b?{start:{row:0,column:0},end:{row:0,column:0}}:b,l=e.start;b=l.row;l=l.column;var p=e.end;e=p.row;p=p.column;if(e<b||e===b&&p<l)l=$jscomp.makeIterator([b,l,e,p]),e=l.next().value,p=l.next().value,b=l.next().value,l=l.next().value;this.start={row:b,column:l};this.end={row:e,column:p}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",
value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(b){return b&&b.start&&b.end?Rf.eqPosition(this.start,b.start)&&Rf.eqPosition(this.end,b.end):!1}},{key:"copy",value:function(){return new Rf.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(b){b.isRange||(b=new Rf.Range(b));return Rf.lessPosition(this.end,b.start)||Rf.lessPosition(b.end,this.start)?this:Rf.Range.fromPositions(Rf.minPosition(this.start,
b.start),Rf.maxPosition(this.end,b.end))}},{key:"without",value:function(b){b.isRange||(b=new Rf.Range(b));var e=Rf.Range.compare(this,b);return 0===e?Rf.Range.fromPositions(this.start,this.start):5<=Math.abs(e)?this:0>e?Rf.Range.fromPositions(this.start,b.start):Rf.Range.fromPositions(b.end,this.end)}},{key:"intersect",value:function(b){b.isRange||(b=new Rf.Range(b));var e=Rf.Range.compare(this,b),l=0>e?this:b;b=0>e?b:this;switch(Math.abs(e)){case 0:case 1:return new Rf.Range(l);case 2:case 3:return new Rf.Range(b);
case 4:return Rf.Range.fromPositions(b.start,l.end);case 5:return Rf.Range.at(b.start);case 6:return Rf.Range.at(l.end)}}},{key:"subtract",value:function(b){b.isRange||(b=new Rf.Range(b));switch(Rf.Range.compare(this,b)){case -6:case -5:case 5:case 6:return[new Rf.Range(this)];case -1:case 0:case 2:case 3:return[Rf.Range.at(this.start)];case 1:case 4:return[Rf.Range.fromPositions(b.end,this.end)];case -4:case -3:return[Rf.Range.fromPositions(this.start,b.start)];case -2:return[Rf.Range.fromPositions(this.start,
b.start),Rf.Range.fromPositions(b.end,this.end)]}}},{key:"containsPosition",value:function(b){return Rf.lessEqPosition(this.start,b)&&Rf.lessEqPosition(b,this.end)}},{key:"toString",value:function(){var b=this.start,e=this.end;return"Range("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(b){return b.sort(Rf.Range.compare)}},{key:"compare",value:function(b,e){var l=b.start,p=b.end,q=e.start,u=e.end;
return Rf.lessPosition(l,q)?Rf.lessPosition(p,q)?-6:Rf.eqPosition(p,q)?-5:Rf.lessPosition(p,u)?-4:Rf.eqPosition(p,u)?-3:-2:Rf.eqPosition(l,q)?Rf.eqPosition(p,u)?0:Rf.lessPosition(p,u)?-1:1:-1*Rf.Range.compare(e,b)}},{key:"at",value:function(b){return new this({start:b,end:b})}},{key:"fromPositions",value:function(b,e){return new this({start:b,end:e})}},{key:"create",value:function(b,e,l,p){return new this({start:{row:b,column:e},end:{row:l,column:p}})}},{key:"isValidLiteral",value:function(b){return b?
b.isRange?!0:b.start&&b.end&&"number"===typeof b.start.row&&"number"===typeof b.start.column&&"number"===typeof b.end.row&&"number"===typeof b.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));Rf.Range=rs;Rf.Range=rs;Rf.Range=rs;var uJ=new Rf.Range;
Rf.defaultRange=uJ;Rf.defaultRange=uJ;Rf.defaultRange=uJ;var ui=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");ui.lessPosition=kp;ui.Range=rs;ui.defaultRange=uJ;ui.config=ok;ui.string=rg;ui.arr=Ke;ui.signal=xk;var vJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:d.Selection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.textMorph=b;this.initialize(e)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(b){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var e=ui.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+e);this.endAnchor=this.textMorph.addAnchor("selection-end-"+e);this.range=ui.Range.isValidLiteral(b)?b:ui.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=
null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(b,e){var l=b.start,p=l.row;l=l.column;var q=b.end,u=q.row;q=q.column;var w=e.start,y=w.row;w=w.column;var A=e.end,C=A.row;A=A.column;return p<y||p===y&&l<w?u<y||u===y&&q<w?"separate":u===y&&q===w?y===C&&w===A?"overlapping":"bordering":"overlapping":p===y&&
l===w?u===C&&q===A?"equal":"overlapping":this.compareRangesForMerge(e,b)}},{key:"mergeWith",value:function(b){if(!b||!b.isSelection)return!1;var e=this.compareRangesForMerge(this.range,b.range);if("separate"===e||"bordering"===e)return!1;this.range=this.range.merge(b.range);b.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(b){if(b){var e=b,l=e.start;e=e.end;if(void 0!==l&&void 0!==e){var p=this.textMorph.document;
"number"===typeof l&&(b.start=l=p.indexToPosition(l));"number"===typeof e&&(b.end=e=p.indexToPosition(e));if(ui.Range.isValidLiteral(b)){l=p.clipPositionToLines(l);e=p.clipPositionToLines(e);if(this._isReverse=ui.lessPosition(e,l))e=$jscomp.makeIterator([e,l]),l=e.next().value,e=e.next().value;b.start=l;b.end=e;b.isRange||(b=new ui.Range(b));b.equals(this._range)||(this._range=b,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=
this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=b.start,this.endAnchor.position=b.end,this.textMorph.makeDirty(),ui.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(b){this.range=ui.Range.fromPositions(b,
this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(b){this.range=ui.Range.fromPositions(this.start,b)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(b){this.range={start:b,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(b){this.range=
{start:this.anchor,end:b}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(b){this.replace(b)}},{key:"replace",value:function(b,e,l,p){var q=this.range,u=this.textMorph,w=this.isReverse();this.range=u.replace(q,b,e,l,p);w&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",
value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(b){b=void 0===b?this.start:b;this.range={start:b,end:b};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.end);b=Math.min(l,e.positionToIndex(this.start)-b);l=this.isReverse();this.start=e.indexToPosition(b);this._isReverse=
l;return this}},{key:"growRight",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.start);b=Math.max(l,e.positionToIndex(this.end)+b);l=this.isReverse();this.end=e.indexToPosition(b);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(b,e){b=void 0===b?this.lead.row:b;this.includingLineEnd=void 0===e?!1:e;this.range={start:{row:b,column:0},
end:{row:b,column:this.textMorph.getLine(b).length}};return this}},{key:"gotoLineEnd",value:function(b){b=void 0===b?this.lead.row:b;b={row:b,column:this.textMorph.getLine(b).length};this.range={start:b,end:b}}},{key:"selectLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()?(this.growLeft(b),this.reverse()):this.isReverse()?this.growLeft(b):this.growRight(-b);return this}},{key:"selectRight",value:function(b){b=void 0===b?1:b;this.isReverse()?this.growLeft(-b):this.growRight(b);return this}},
{key:"selectUp",value:function(b,e){return this.goUp(void 0===b?1:b,e,!0)}},{key:"selectDown",value:function(b,e){return this.selectUp(-(void 0===b?1:b),e)}},{key:"goUp",value:function(b,e,l){b=void 0===b?1:b;l=void 0===l?!1:l;if(0===b)return this;var p=this._goalColumn,q=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(b,this.lead,void 0===e?!1:e,p,q);l||(this.anchor=this.lead);this._goalColumn=p;this._goalX=q;return this}},{key:"goDown",value:function(b,e){return this.goUp(-(void 0===
b?1:b),e)}},{key:"goLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growLeft(b);this.collapse();return this}},{key:"goRight",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growRight(b);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var b=this;this.cursorBlinkStop();var e=ui.config.text.cursorBlinkPeriod;if(e){var l=this.textMorph,
p=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){p||(p=l.env.renderer.getNodeForMorph(l));if(p){b._cursorVisible=!b._cursorVisible;var q=p.className.split(" "),u=q.indexOf("hidden-cursor");b._cursorVisible&&-1<u&&(q.splice(u,1),p.className=q.join(" "));b._cursorVisible||-1!==u||(p.className=[].concat($jscomp.arrayFromIterable(q),["hidden-cursor"]).join(" "))}},1E3*e)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);
this.cursorBlinkProcess=null;this._cursorVisible=!0;var b=this.textMorph;if(b=b.env.renderer.getNodeForMorph(b)){var e=b.className.split(" "),l=e.indexOf("hidden-cursor");-1<l&&(e.splice(l,1),b.className=e.join(" "))}}},{key:"toString",value:function(){var b=this.anchor,e=this.lead;return"Selection("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);ui.Selection=vJ;ui.Selection=vJ;ui.Selection=vJ;var wJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"initialize",value:function(b){this._selections=[new ui.Selection(this.textMorph,b)]}},{key:"__deserialize__",value:function(b,e){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(b){var e=this._selections?this._selections.filter(function(l){return!b.includes(l)}):[];this._selections=b;e.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(b){return b.uninstall()})}},
{key:"defaultSelection",get:function(){return ui.arr.last(this.selections)}},{key:"removeSelections",value:function(b){b=this.selections.slice(void 0===b?1:b);b.forEach(function(e){return e.uninstall()});this.selections=ui.arr.withoutAll(this.selections,b)}},{key:"disableMultiSelect",value:function(){ui.arr.without(this.selections,this.defaultSelection).forEach(function(b){return b.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},
{key:"range",set:function(b){this.disableMultiSelect();this.defaultSelection.range=b}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(b){return b.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(b){this.defaultSelection.start=b}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(b){this.defaultSelection.end=b}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},
{key:"anchor",set:function(b){this.defaultSelection.anchor=b}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(b){this.defaultSelection.lead=b}},{key:"text",get:function(){return this.selections.map(function(b){return b.text}).join("\n")}},{key:"text",set:function(b){this.selections.forEach(function(e){return e.text=b})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},
{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(b){this.defaultSelection.collapse(b);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(b){this.defaultSelection.growLeft(b);return this}},{key:"growRight",value:function(b){this.defaultSelection.growRight(b);return this}},{key:"selectAll",
value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(b,e){this.includingLineEnd=e;this.defaultSelection.selectLine(b,e);return this}},{key:"gotoLineEnd",value:function(b){this.defaultSelection.gotoLineEnd(b)}},{key:"selectLeft",value:function(b){this.defaultSelection.selectLeft(b);return this}},{key:"selectRight",value:function(b){this.defaultSelection.selectRight(b);return this}},{key:"selectUp",value:function(b,e){this.defaultSelection.selectUp(b,
e);return this}},{key:"selectDown",value:function(b,e){this.defaultSelection.selectDown(b,e);return this}},{key:"goUp",value:function(b,e){return this.defaultSelection.goUp(b,e)}},{key:"goDown",value:function(b,e){return this.defaultSelection.goDown(b,e)}},{key:"goLeft",value:function(b){return this.defaultSelection.goLeft(b)}},{key:"goRight",value:function(b){return this.defaultSelection.goRight(b)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(b){this.defaultSelection.style=
b}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var b=this.selections.slice(),e=b.length-1;0<=e;e--)for(var l=b.length-1;0<=l;l--)if(e!==l&&b[l].mergeWith(b[e])){b.splice(e,1);break}this.selections=b}},{key:"ranges",get:function(){return this.selections.map(function(b){return b.range})}},{key:"ranges",set:function(b){for(var e=
0;e<b.length;e++){var l=this.selections[e];l?l.range=b[e]:this.addRange(b[e],!1)}this.removeSelections(e);this.mergeSelections()}},{key:"addRange",value:function(b,e){e=void 0===e?!0:e;this.selections.push(new ui.Selection(this.textMorph,b));e&&this.mergeSelections();return ui.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(ui.Selection);ui.MultiSelection=wJ;ui.MultiSelection=wJ;ui.MultiSelection=wJ;var ng=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");ng.shallowEquals=wO;ng.concatAttributePair=IG;ng.joinTextAttributes=JG;ng.splitTextAndAttributesAt=KG;ng.splitTextAndAttributesAtColumns=LG;ng.concatTextAndAttributes=MG;ng.modifyAttributesInRange=
NG;ng.textAndAttributesWithSubRanges=OG;ng.textAndAttributesDo=function(a,d){for(var k=0;k<a.length;k+=2)d(a[k],a[k+1])};ng.splitTextAndAttributesIntoLines=kA;ng.eqPosition=lp;ng.lessPosition=kp;ng.shallowEquals=wO;ng.shallowEquals=wO;ng.concatAttributePair=IG;ng.concatAttributePair=IG;ng.joinTextAttributes=JG;ng.joinTextAttributes=JG;ng.splitTextAndAttributesAt=KG;ng.splitTextAndAttributesAt=KG;ng.splitTextAndAttributesAtColumns=LG;ng.splitTextAndAttributesAtColumns=LG;ng.concatTextAndAttributes=
MG;ng.concatTextAndAttributes=MG;ng.modifyAttributesInRange=NG;ng.modifyAttributesInRange=NG;ng.textAndAttributesWithSubRanges=OG;ng.textAndAttributesWithSubRanges=OG;ng.splitTextAndAttributesIntoLines=kA;ng.splitTextAndAttributesIntoLines=kA;var sd=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");sd.arr=Ke;sd.num=Dj;sd.string=rg;sd.lessEqPosition=cx;sd.minPosition=dx;sd.maxPosition=ex;sd.lessPosition=kp;sd.eqPosition=lp;sd.concatTextAndAttributes=MG;sd.splitTextAndAttributesAtColumns=
LG;sd.splitTextAndAttributesIntoLines=kA;sd.joinTextAttributes=JG;sd.modifyAttributesInRange=NG;sd.concatAttributePair=IG;sd.splitTextAndAttributesAt=KG;sd.objectReplacementChar="\ufffd";sd.objectReplacementChar="\ufffd";sd.objectReplacementChar="\ufffd";sd.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?
d.TreeNode:d.TreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.parent=b}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var b=this,e=[];b;)e.push(b),b=b.parent;return e}},{key:"traverse",value:function(b){var e=[b.call(null,
this)];if(this.isLeaf)return e;for(var l=0;l<this.children.length;l++)e.push.apply(e,$jscomp.arrayFromIterable(this.children[l].traverse(b)));return e}},{key:"consistencyCheck",value:function(){var b=[],e=this.isRoot,l=this.isLeaf,p=this.children,q=this.size,u=this.stringSize,w=this.height,y=this.width,A=this.options,C=A.maxLeafSize,E=A.maxNodeSize,L=A.minLeafSize;A=A.minNodeSize;e||0!==q||b.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(p))return b.push({error:this+".children is not an array but "+
p}),b;var I=sd.arr.sum(sd.arr.pluck(p,"size"));I!=q&&b.push({error:"Sum of child sizes is not size of "+this+": "+I+" != "+q});q=sd.arr.sum(sd.arr.pluck(p,"stringSize"));q!=u&&b.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+q+" != "+u});u=sd.arr.sum(sd.arr.pluck(p,"height"));Number.parseInt(u)!=Number.parseInt(w)&&b.push({error:"Sum of child Height is not Height of "+this+": "+u+" != "+w});w=p.length?Math.max.apply(null,sd.arr.pluck(p,"width")):0;(p.find(function(V){return V.isLine&&
V.hasEstimatedExtent})?Number.parseInt(w)>Number.parseInt(y):Number.parseInt(w)!=Number.parseInt(y))&&b.push({error:"max width of children of "+this+" is not node width: "+w+" != "+y});y=l?C:E;!e&&p.length>y&&b.push({error:"children count of "+this+" expected to be between "+(l?L:A)+" and "+y+" but is "+p.length});for(e=0;e<p.length;e++)(L=p[e])?(l&&!L.isLine?b.push({error:"child "+e+" of leaf "+this+" is not a line!"}):!l&&L.isLine&&b.push({error:"child of non-leaf "+this+" is a line!"}),this!==
L.parent&&b.push({error:"child.parent is "+L.parent+" but should be "+this})):b.push({error:"child "+e+" of "+this+" is nullish!"});b.push.apply(b,$jscomp.arrayFromIterable(sd.arr.flatmap(p,function(V){return V.consistencyCheck()})));return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b.parent);this.options=b.options;this.children=b.children;this.size=b.size;this.stringSize=b.stringSize;this.height=b.height;this.width=b.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(b,e,l){this.size+=b;this.height+=e;this.stringSize+=l;for(var p=0,q=0;q<this.children.length;q++){var u=this.children[q].width;u>p&&(p=u)}this.width=p;this.parent&&this.parent.resize(b,e,l)}},{key:"lines",value:function(b){b=
void 0===b?[]:b;if(this.isLeaf)return b.push.apply(b,$jscomp.arrayFromIterable(this.children)),b;for(var e=0;e<this.children.length;e++)this.children[e].lines(b);return b}},{key:"findRow",value:function(b){if(0>b||b>=this.size)return null;if(this.isLeaf)return this.children[b];for(var e=0;e<this.children.length;e++){var l=this.children[e],p=l.size;if(b<p)return l.findRow(b);b-=p}return null}},{key:"findLineByVerticalOffset",value:function(b,e,l){e=void 0===e?0:e;l=void 0===l?0:l;if(0>b||b>this.height)return null;
for(var p=0;p<this.children.length;p++){var q=this.children[p],u=q.height;if(b<=u)return this.isLeaf?{line:q,offset:b,y:e,row:l}:q.findLineByVerticalOffset(b,e,l);b-=u;e+=u;l+=q.size}return null}},{key:"computeVerticalOffsetOf",value:function(b,e){e=void 0===e?0:e;if(0>b||b>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+b),e;if(this.isLeaf){for(var l=0;l<Math.min(b,this.children.length);l++)e+=this.children[l].height;return e}for(l=0;l<this.children.length;l++){var p=this.children[l],
q=p.size;if(b<q)return p.computeVerticalOffsetOf(b,e);b-=q;e+=p.height}return e}},{key:"ensureLine",value:function(b){b||(b="");var e="string"===typeof b;return!e&&b.isLine?(b.parent=this,b):new sd.Line({parent:this,width:e?0:b.width||0,height:e?0:b.height||0,textAndAttributes:e?[b,null]:b.textAndAttributes||[b.text||"",null]})}},{key:"insert",value:function(b,e){e=void 0===e?this.size:e;var l=this.children,p=this.options;if(this.isLeaf){var q=[],u=0,w=0;for(p=0;p<b.length;p++){var y=this.ensureLine(b[p]);
q.push(y);u+=y.height;w+=y.stringSize;l.splice(e++,0,y)}this.resize(q.length,u,w);this.balanceAfterGrowth();return q}0===l.length&&l.push(new sd.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:p}));for(p=0;p<l.length;p++){q=l[p];u=q.size;if(e<=u)return q.insert(b,e);e-=u}e=l[p-1];return e.insert(b,e.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(b,e,l){for(var p=this.withParents(),q,u=0;b;){if(p.includes(b)){q=b;break}e(b,u++);b=b.parent}e=p.indexOf(q);
0>e&&(e=p.length);p=p.slice(0,e);for(e=0;e<p.length;e++)l(p[e],e)}},{key:"findLineWithTextIndex",value:function(b,e){e=void 0===e?0:e;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var p=this.children[l],q=p.stringSize;if(b<q)return{line:p,column:b,row:e};b-=q;e++}b=sd.arr.last(this.children);return{line:b,row:e-1,column:b.stringSize-1}}for(p=l=0;p<this.children.length;p++){q=this.children[p];var u=q.stringSize;if(b<l+u)return q.findLineWithTextIndex(b-l,e);e+=q.size;l+=u}return sd.arr.last(this.children).findLineWithTextIndex(b-
l)}},{key:"findLeafs",value:function(b,e,l){l=void 0===l?0:l;if(b>l+this.size||e<l)return[];if(this.isLeaf){b=Math.max(0,b-l);var p=this.children.length-1;e=Math.min(p,e-l);l=!1;0===b&&e===p&&(l=!0,e=p);return[{node:this,firstLine:b,lastLine:e,full:l}]}p=[];for(var q=0;q<this.children.length;q++){var u=this.children[q];p.push.apply(p,$jscomp.arrayFromIterable(u.findLeafs(b,e,l)));l+=u.size}return p}},{key:"removeFromToInRoot",value:function(b,e,l){var p=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
b>e&&(e=$jscomp.makeIterator([e,b]),b=e.next().value,e=e.next().value);var q=this.size,u=this.options.minLeafSize,w=this.findLeafs(b,e),y=w.shift();e=w.pop();var A=[],C=!1,E=!1;if(!(b>=q)){e&&y.node===e.node&&(e=null);y.full?(l&&l.log("Removing complete first line "+y),w.push(y)):C=y.node.children.length-(y.lastLine-y.firstLine+1)<u;e&&(e.full?(l&&l.log("Removing complete last line "+e),w.push(e)):(E=e,E=E.node.children.length-(E.lastLine-E.firstLine+1)<u));if(C||E){var L=(L=y.node.children[0].prevLine())?
L.parent:null;var I=(I=sd.arr.last(e?e.node.children:y.node.children).nextLine())?I.parent:null}for(b=0;b<w.length;b++){u=w[b].node;q=u.children.length;for(var V=0,T=0,Y=0;Y<q;Y++){var na=u.children[Y];V+=na.height;T+=na.stringSize;na.parent=null}u.children.length=0;u.resize(-q,-V,-T);if(q=u.parent)u.parent=null,q.children.splice(q.children.indexOf(u),1),A.includes(q)||A.push(q)}if(!y.full){u=y.firstLine;w=y.node;b=y.lastLine-u+1;u=w.children.splice(u,b);for(T=V=q=0;T<u.length;T++)Y=u[T],q+=Y.height,
V+=Y.stringSize,Y.parent=null;w.resize(-b,-q,-V)}if(e&&!e.full){b=e;u=b.firstLine;w=b.node;b=b.lastLine-u+1;u=w.children.splice(u,b);for(T=V=q=0;T<u.length;T++)Y=u[T],q+=Y.height,V+=Y.stringSize,Y.parent=null;w.resize(-b,-q,-V)}l&&l.dump(""+this.print(!1));C&&y.node.balanceByMergeOrTheft(L,!e||e.full?I:e.node,l);e&&E&&e.node.root===this&&(E=!0,L=y.full||!y.node.parent?L:y.node,C&&(e.node.root!==this&&(E=!1),L&&L.root!==this&&(L=null),I&&I.root!==this&&(I=null)),E&&e.node.balanceByMergeOrTheft(L,I,
l));A.forEach(function(Ba){return Ba.root===p&&Ba.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(b,e,l){var p=this,q=this.children,u=this.options,w=this.isLeaf,y=w?u.maxLeafSize:u.maxNodeSize;u=w?u.minLeafSize:u.minNodeSize;w=b&&b.children.length+q.length<=y;y=!w&&e&&e.children.length+q.length<=y;var A=w?b:y?e:null;if(A){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(w?"left":"right")+" into "+A);var C=this.size,E=this.width,L=this.height,I=this.stringSize;q.forEach(function(P){return P.parent=
A});w?A.children.push.apply(A.children,$jscomp.arrayFromIterable(q)):A.children.unshift.apply(A.children,$jscomp.arrayFromIterable(q));this.width=q.length=0;this.withParentChainsUpToCommonParentDo(A,function(P){E>P.width&&(P.width=E);P.height+=L;P.size+=C;P.stringSize+=I},function(P){if(E===P.width)for(var S=0;S<P.children.length;S++){var fa=P.children[S];fa.width>P.width&&(P.width=fa.width)}P.height-=L;P.size-=C;P.stringSize-=I})}else{w=b?Math.ceil((b.children.length-u)/2):0;var V=e?Math.ceil((e.children.length-
u)/2):0;if((y=0<w&&w>=V)||!y&&0<V){u=y?b.children.splice(b.children.length-w,w):e.children.splice(0,V);var T=y?b:e,Y=y?w:V,na=0,Ba=0,F=0,W=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(y?"left":"right")+" node "+T+" "+Y+" nodes");for(b=0;b<u.length;b++)na+=u[b].height,Ba+=u[b].stringSize,F=Math.max(F,u[b].width);for(b=0;b<T.children.length;b++)W=Math.max(W,T.children[b].width);this.withParentChainsUpToCommonParentDo(T,function(P){if(W<F&&W<P.width){if(P===T)P.width=W;else{for(var S=
!1,fa=0;fa<P.children.length;fa++)if(P.children[fa].width>W){S=!0;break}S||(P.width=W)}P.width=F}P.height-=na;P.size-=Y;P.stringSize-=Ba},function(P){P.width<F&&(P.width=F);P.height+=na;P.size+=Y;P.stringSize+=Ba});u.forEach(function(P){return P.parent=p});y?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(u)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(u))}}b=this.parent;0===q.length&&(this.parent=null,b&&b.children.splice(b.children.indexOf(this),1));b&&b.balanceAfterShrink(l)}},
{key:"balanceAfterGrowth",value:function(){var b=this.isLeaf,e=this.size,l=this.stringSize,p=this.parent,q=this.children,u=this.width,w=this.height,y=this.options,A=b?y.maxLeafSize:y.maxNodeSize;if(q.length>A){p||(p=this.parent=new sd.InnerTreeNode({parent:null,children:[this],size:e,width:u,height:w,stringSize:l,options:y}),p.isLeaf=!1);var C=Math.floor(q.length/2),E=0,L=0,I=e=0,V=l=0,T=u=0;for(w=0;E<C;E++)L+=q[E].size,I=Math.max(I,q[E].width),V+=q[E].height,T+=q[E].stringSize;for(;E<q.length;E++)e+=
q[E].size,l=Math.max(l,q[E].width),u+=q[E].height,w+=q[E].stringSize;this.children=q.slice(0,C);this.size=L;this.width=I;this.height=V;this.stringSize=T;E=p.children.indexOf(this);q=q.slice(C);var Y=new sd.InnerTreeNode({parent:p,children:q,size:e,height:u,width:l,stringSize:w,options:y});Y.isLeaf=b;q.forEach(function(na){return na.parent=Y});p.children.splice(E+1,0,Y);Y.children.length>A&&Y.balanceAfterGrowth();this.children.length>A&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},
{key:"balanceAfterShrink",value:function(b){var e=this,l=this.isLeaf,p=this.parent,q=this.children,u=this.options,w=u.maxLeafSize,y=u.maxNodeSize,A=u.minLeafSize,C=u.minNodeSize;u=l?w:y;A=l?A:C;C=!1;for(var E=q.length;E--;)0===q[E].size&&(q.splice(E,1),C=!0,b&&b.log("[balanceAfterShrink] "+this+" removes node "+E+" b/c it is empty, remaining children: "+q.length+" (min: "+A+", max: "+u+")"));C&&b&&b.dump(""+this.root.print(!1));if(q.length>=A)p&&p.balanceAfterShrink(b);else if(0===q.length)p&&p.balanceAfterShrink(b);
else if(l)p&&(1===p.children.length?(b&&b.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),b&&b.dump(""+this.root.print(!1)),this.parent=null,p.children.length=0,p.children.push.apply(p.children,$jscomp.arrayFromIterable(q)),q.forEach(function(I){return I.parent=p}),p.isLeaf=!0):(w=(w=q[0].prevLine())&&w.parent,q=sd.arr.last(q).nextLine(),this.balanceByMergeOrTheft(w,q&&q.parent,b))),this.parent&&this.parent.balanceAfterShrink(b);else{l=[];u=C=
A=!1;for(E=0;E<q.length;E++){var L=q[E];!A&&L.isLeaf&&(A=!0);C||L.isLeaf||(C=!0);if(A&&C){u=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(L.children))}!u&&l.length<=(A?w:y)&&(b&&b.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),q.forEach(function(I){return I.parent=null}),l.forEach(function(I){return I.parent=e}),q.length=0,q.push.apply(q,$jscomp.arrayFromIterable(l)),this.isLeaf=A,b&&b.log("[balanceAfterShrink] "+
q.join("\n")),b&&b.dump(""+this.root.print(!1)));p&&p.balanceAfterShrink(b)}}},{key:"print",value:function(b,e,l,p){b=void 0===b?!0:b;e=void 0===e?0:e;l=void 0===l?0:l;var q=this.isLeaf,u=this.size,w=this.stringSize,y=this.width,A=this.height,C=this.children;p=p||(q?"leaf":"node");w=""+" ".repeat(l)+p+" (size: "+u+" width: "+Math.round(y)+" height: "+Math.round(A)+" text length: "+w+")";if(C.length){y="";e+=u;for(u=C.length;u--;)A=C[u],e-=A.size,y="\n"+A.print(b,e,l+1)+y;w+=y}return w}},{key:"toString",
value:function(){var b=this.isLeaf,e=this.size,l=this.width,p=this.height,q=this.children;return"node ("+(b?"leaf, ":"")+(b&&q.length?"rows: "+q[0].row+"-"+sd.arr.last(q).row+" ":"")+("size: "+e+" "+l+"x"+p+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4638,end:29081})})(sd.TreeNode);var LR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,b.parent);this.textAndAttributes=sd.joinTextAttributes(b.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=b.width;this.height=b.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var b="",e=this.textAndAttributes,l=0;l<e.length;l+=2)b+="string"===typeof e[l]?e[l]:sd.objectReplacementChar;return this._text=b}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var b=[],e=this.textAndAttributes,l=0;l<e.length;l+=2){var p=e[l+1];p&&!b.includes(p)&&b.push(p)}return this._textAttributes=b}},{key:"row",get:function(){if(!this.parent)return 0;var b=this.withParents();if(1===b.length)return b.children.indexOf(this);for(var e=0,l=b.length-
1;1<=l;l--)for(var p=b[l],q=p.children.indexOf(b[l-1]),u=0;u<q;u++)e+=p.children[u].size;return e}},{key:"nextLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)+1])?b:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)-1])?b:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(b,e,l){var p=this.height,q=this.width,u=this.parent;this.width=b;this.height=e;this.hasEstimatedExtent=
void 0===l?!1:l;if(q!==b||p!==e)for(e-=p;u;){u.height+=e;if(b>=u.width)u.width=b;else if(q===u.width){for(p=l=0;p<u.children.length;p++){var w=u.children[p].width;w>l&&(l=w)}u.width=l}u=u.parent}return this}},{key:"changeText",value:function(b,e){e=void 0===e?null:e;var l=this.parent,p=this.height,q=b.length+1-(this.text.length+1),u=0;this.modeState&&this.modeState._string!==b&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,u=-p);this._text=b;this._textAttributes=null;this.textAndAttributes=e||(e=[b,null]);if(0!==e.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(b=0;b<e.length;b+=2)if((p=e[b+1])&&Array.isArray(p))throw Error("invalid attr part of text/attr pair, its an array: "+p);for(;l;){l.stringSize+=q;l.height+=u;for(b=e=0;b<l.children.length;b++)p=l.children[b].width,p>e&&(e=p);l.width=e;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(b){b=
sd.joinTextAttributes(b);for(var e="",l=0;l<b.length;l+=2)e+="string"===typeof b[l]?b[l]:sd.objectReplacementChar;return this.changeText(e,b)}},{key:"print",value:function(b,e,l){b=void 0===b?!0:b;e=void 0===e?0:e;e=" ".repeat(void 0===l?0:l)+"line "+e+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=sd.arr.toTuples(this.textAndAttributes,2).map(function(p){var q=$jscomp.makeIterator(p);p=q.next().value;q=q.next().value;return("string"===
typeof p?'"'+p+'"':String(p))+(","+JSON.stringify(q))}).join(",");return e+(b?")":" content: ["+l+"])")}},{key:"toString",value:function(){var b=this.width,e=this.height;return'line ("'+sd.string.truncate(this._text,30)+'", '+b+"x"+e+")"}},{key:"consistencyCheck",value:function(){var b=[];if(!this.parent)return b.push("line "+this+" has no parent!"),b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(sd.TreeNode);sd.Line=LR;sd.Line=LR;sd.Line=LR;sd.documentFuzzier={makeString:function(a,d){a=void 0===a?5:a;d=void 0===d?50:d;var k=sd.arr.range(65,90).map(function(b){return String.fromCharCode(b)}).join("");k+=k.toLowerCase()+" \n";a=sd.num.random(a,d);return sd.arr.shuffle(Array.from(k.repeat(Math.ceil(a/k.length)))).slice(0,a).join("")},
randomDocPosition:function(a){var d=0===a.rowCount?0:sd.num.random(0,a.rowCount-1);a=sd.num.random(0,a.getLineString(d).length-1);return{row:d,column:a}},insertRandom:function(a,d,k,b){k=[this.makeString(k,b),null];b=this.randomDocPosition(a);d.push(["insertTextAndAttributes",k,b]);a.insertTextAndAttributes(k,b)},deleteRandom:function(a,d,k,b){k={start:this.randomDocPosition(a),end:this.randomDocPosition(a)};d.push(["remove",k]);a.remove(k)},maybe:function(){return.5>Math.random()},replay:function(a,
d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;k&&(a.debug=k,k=a.debugHelper(),k.reset());var e=new sd.Document([""]);d.forEach(function(l,p){var q=$jscomp.makeIterator(l);l=q.next().value;q=$jscomp.arrayFromIterator(q);if(b&&p==d.length-1)debugger;e[l].apply(e,[].concat($jscomp.arrayFromIterable(q),[k]))});a.changeDocument(e)},run:function(){var a=Date.now(),d=0,k=new sd.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),b=[];try{for(;1E4>k.stringSize&&
1E4>d++;)this.maybe()?this.deleteRandom(k,b):this.insertRandom(k,b),k.consistencyCheck()}catch(l){var e=l}a=Date.now()-a;return{error:e,doc:k,actions:b,time:a}}};sd.newline="\n";sd.newlineLength=1;var b6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.options=Object.assign({},sd.defaultOptions,{},e);this.lines=b}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var b=this.root.root;this.root!==b&&(this.root=b)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(b){return b.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(b){b=void 0===b?[]:b;this.root=new sd.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(b)}},{key:"clipRow",value:function(b){return Math.max(0,Math.min(b,this.rowCount-1))}},{key:"clipPositionToLines",value:function(b){var e=b.row;
b=b.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>e?e=0:e>=l&&(e=l-1,b=Infinity);0>b?b=0:(l=this.getLineString(e).length,b>l&&(b=l));return{row:e,column:b}}},{key:"findLineByVerticalOffset",value:function(b){return this.root.findLineByVerticalOffset(b)}},{key:"computeVerticalOffsetOf",value:function(b){return this.root.computeVerticalOffsetOf(b)}},{key:"getLine",value:function(b){return this.root.findRow(this.clipRow(b))}},{key:"getLineString",value:function(b){return(b=this.getLine(b))?
b.text:""}},{key:"insertLine",value:function(b,e){e=void 0===e?this.root.rowCount:e;return this.insertLines([b],e)[0]}},{key:"removeLine",value:function(b){this.root.removeFromToInRoot(b,b)}},{key:"removeLines",value:function(b,e,l){this.root.removeFromToInRoot(b,e,l)}},{key:"insertLines",value:function(b,e){b=this.root.insert(b,e);this.fixRoot();return b}},{key:"textString",get:function(){var b="",e=this.lines;if(!e.length)return b;for(var l=0;l<e.length-1;l++)b=b+e[l].text+sd.newline;return b+=
e[l].text}},{key:"textString",set:function(b){this.lines=b.split(sd.newline)}},{key:"endPosition",get:function(){var b=this.rowCount;if(0===b)return{row:0,column:0};--b;var e=this.getLine(b);return{row:b,column:e.stringSize-1}}},{key:"textAndAttributes",get:function(){var b=this.lines;if(!b.length)return[];for(var e=sd.newline,l=b.length-1,p=b[0].textAndAttributes.slice(),q=1;q<=l;q++){var u=b[q],w=p.pop()||null,y=p.pop()||"";u=u.textAndAttributes;p.push.apply(p,$jscomp.arrayFromIterable(sd.concatAttributePair(y,
w,u[0]||"",u[1]||null,e)));for(w=2;w<u.length;w+=2)p.push(u[w],u[w+1])}return p}},{key:"textAndAttributes",set:function(b){this.lines=sd.splitTextAndAttributesIntoLines(b,sd.newline).map(function(e){return new sd.Line({parent:null,width:0,height:0,textAndAttributes:e})})}},{key:"getTextAndAttributesOfLine",value:function(b){return this.getLine(b).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(b,e){this.getLine(b).changeTextAndAttributes(e);return e}},{key:"mixinTextAttribute",
value:function(b,e){sd.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return Object.assign({},p,b)})}},{key:"setTextAttribute",value:function(b,e){sd.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return b})}},{key:"mixoutTextAttribute",value:function(b,e){e=void 0===e?{start:{row:0,column:0},end:this.endPosition}:e;if(b){var l=Object.keys(b);sd.modifyAttributesInRange(this,e,function(p,q){if(!q)return q;p._textAttributes=null;p=0;var u={},w;for(w in q)l.includes(w)||
(u[w]=q[w],p++);return 0===p?null:u})}}},{key:"setTextAttributesWithSortedRanges",value:function(b){function e(E,L,I,V){V=void 0===V?0:V;var T=0,Y=L.length;if(0>=I.length-V)return{attributes:[L,null],index:V};for(var na=[];V<I.length&&!(T>=Y);V+=2){var Ba=I[V],F=Ba.start;Ba=Ba.end;var W=I[V+1];if(Ba.row<E)T=0;else{F.row===E&&T<F.column&&(na.push(L.slice(T,F.column),null),T=F.column);if(Ba.row>E){na.push(W.embeddedMorph||L.slice(T,Y),W);T=Y;break}T<Ba.column&&na.push(W.embeddedMorph||L.slice(T,Ba.column),
W);T=Ba.column}}T<Y&&na.push(L.slice(T,Y),null);return{attributes:na,index:V}}if(!(2>b.length)){var l=b[0].start,p=b.slice(-2)[0].end,q=this.getLine(l.row);if(l.row===p.row){if(!(l.column>=p.column)){var u=e(l.row,q.text,b,0).attributes,w=$jscomp.makeIterator(sd.splitTextAndAttributesAtColumns(q.textAndAttributes,[l.column,p.column]));b=w.next().value;w.next();w=w.next().value;p=$jscomp.makeIterator(sd.splitTextAndAttributesAtColumns(u,[l.column,p.column]));p.next();l=p.next().value;p.next();q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(b),
$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(w)))}}else{w=l.row;var y=l.column;l=e(w,q.text,b,0);var A=l.attributes;l=l.index;var C=$jscomp.makeIterator(sd.splitTextAndAttributesAt(q.textAndAttributes,y));u=C.next().value;C.next();y=$jscomp.makeIterator(sd.splitTextAndAttributesAt(A,y));y.next();y=y.next().value;for(q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(y)));q=q.nextLine();){w++;if(w===p.row)break;l=e(w,q.text,b,l);u=l.attributes;l=l.index;
q.changeTextAndAttributes(u)}q&&(p=p.column,b=e(w,q.text,b,l).attributes,w=$jscomp.makeIterator(sd.splitTextAndAttributesAt(q.textAndAttributes,p)),w.next(),w=w.next().value,p=$jscomp.makeIterator(sd.splitTextAndAttributesAt(b,p)).next().value,q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(p),$jscomp.arrayFromIterable(w))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(b){return b.changeText(b.text)})}},{key:"textAttributeAt",value:function(b){var e=b.row;
b=b.column;b=Math.max(0,b);var l=this.getLine(e);if(!l)return null;e=0;l=l.textAndAttributes;for(var p=0;p<l.length;p+=2){var q=l[p],u=l[p+1];e+="string"===typeof q?q.length:1;if(b<e)return u}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(b){var e=b.start,l=b.end;if(sd.eqPosition(e,l))return["",null];sd.lessPosition(l,e)&&(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);e=sd.maxPosition(e,{column:0,row:0});l=sd.minPosition(l,this.endPosition);var p=this.getLine(e.row),
q=p;if(l.row===e.row)return b=e.column,l=l.column,b===l&&l++,b=$jscomp.makeIterator(sd.splitTextAndAttributesAtColumns(q.textAndAttributes,[b,l])),b.next(),b.next().value;b=[p];for(var u=0;u<l.row-e.row;u++)b.push(p=p.nextLine());p=b[b.length-1];e=$jscomp.makeIterator(sd.splitTextAndAttributesAt(q.textAndAttributes,e.column));e.next();e=e.next().value;l=$jscomp.makeIterator(sd.splitTextAndAttributesAt(p.textAndAttributes,l.column)).next().value;0===e.length&&(e=["",null]);if(1===b.length)return sd.concatTextAndAttributes(e,
l,!0);for(q=1;q<b.length-1;q++)"string"===typeof e[e.length-2]&&(e[e.length-2]+=sd.newline),sd.concatTextAndAttributes(e,b[q].textAndAttributes,!0);"string"===typeof e[e.length-2]&&(e[e.length-2]+=sd.newline);sd.concatTextAndAttributes(e,l,!0);return sd.joinTextAttributes(e,"")}},{key:"textInRange",value:function(b){var e=b.start,l=b.end;e=this.clipPositionToLines(e);l=this.clipPositionToLines(l);sd.lessPosition(l,e)&&(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);b=e;e=b.row;b=
b.column;var p=l;l=p.row;p=p.column;if(e===l)return b===p?"":this.getLineString(e).slice(b,p);var q=this.getLine(e);for(b=q.text.slice(b);(q=q.nextLine())&&++e<l;)b+=sd.newline+q.text;return b+sd.newline+this.getLineString(l).slice(0,p)}},{key:"setTextInRange",value:function(b,e){this.remove(e);return this.insertText(b,e.start,!1)}},{key:"indexToPosition",value:function(b){0>b&&(b=0);b=this.root.findLineWithTextIndex(b,0);return{row:b.row,column:b.column}}},{key:"positionToIndex",value:function(b){var e=
b.column,l=this.getLine(b.row);e=Math.max(0,Math.min(e,l.stringSize-1));for(b=l.parent;b;){l=b.children.indexOf(l);l=b.children.slice(0,l);for(var p=0;p<l.length;p++)e+=l[p].stringSize;l=b;b=b.parent}return e}},{key:"insertTextAndAttributes",value:function(b,e,l){l=void 0===l?!1:l;if(!b||!b.length||2===b.length&&!b[0])return{start:e,end:e};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var p=e.row;e=e.column;0>p&&(p=0);0>e&&(e=0);var q=this.getLine(p);b=sd.splitTextAndAttributesIntoLines(b,
sd.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!q)return p=this.insertLines(b.map(function(V){return new sd.Line({parent:null,width:0,height:0,textAndAttributes:V})})),l&&l.log("insert "+p.length+" lines into empty text"),{start:{row:0,column:0},end:{row:p.length,column:sd.arr.last(p).text.length}};if(p>=this.rowCount){var u=this.endPosition;l&&l.log("insertion after doc end, "+p+"/"+e+", inserting "+(p-u.row)+" rows");for(e=0;e<p-u.row;e++)b.unshift(["",
null]);p=u.row;e=u.column}if(1===b.length&&""===b[0][0])return l&&l.log("insert just newline at "+p+"/"+e),p=this.splitLineAt({row:p,column:e}),l&&l.dump(""+this.root.print(!1)),p;var w=b.shift(),y=b.length;u={row:p,column:e};var A=q.stringSize-1;e>A&&(l&&l.log("filling up insertion column at "+p+"/"+e+": "+(e-A)),A=" ".repeat(e-A),w.length?"string"===typeof w[0]?w[0]=A+w[0]:w.unshift(A,null):w.push(A,null));A=$jscomp.makeIterator(sd.splitTextAndAttributesAt(q.textAndAttributes,e));var C=A.next().value;
A=A.next().value;""===C[0]&&(C=[]);C=sd.concatTextAndAttributes(C,w,!0);if(0===y){for(var E=0,L=0;L<w.length;L+=2){var I=w[L];E+="string"===typeof I?I.length:1}u.column=e+E;sd.concatTextAndAttributes(C,A,!0)}q.changeTextAndAttributes(C);if(0===y)return l&&(l.log("single line inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1))),{start:{row:p,column:e},end:u};q=b[y-1];for(C=w=0;C<q.length;C+=2)E=q[C],w+="string"===typeof E?E.length:1;u.row+=y;u.column=w;b=this.insertLines(b.map(function(V){return new sd.Line({parent:null,
width:0,height:0,textAndAttributes:V})}),p+1);y=sd.arr.last(b);y.changeTextAndAttributes(sd.concatTextAndAttributes(y.textAndAttributes,A,!0));l&&(l.log(b.length+" inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1)));return{start:{row:p,column:e},end:u}}},{key:"insertText",value:function(b,e,l){l=void 0===l?!1:l;if(!b)return{start:e,end:e};var p=e.row;e=e.column;0>p&&(p=0);0>e&&(e=0);var q=this.getLine(p);if(!q)return p=this.insertLines(b.split(sd.newline)),{start:{row:0,column:0},end:{row:p.length,
column:sd.arr.last(p).text.length}};p>=this.rowCount&&(e=this.endPosition,b="\n".repeat(p-e.row)+b,p=e.row,e=e.column);var u=b.split(sd.newline),w=u.shift(),y=u.length;b={row:p,column:e};var A=q.stringSize-1;e>A&&(w=" ".repeat(e-A)+w);A=$jscomp.makeIterator(sd.splitTextAndAttributesAt(q.textAndAttributes,e));var C=A.next().value;A=A.next().value;""===C[0]&&(C=[]);l=sd.concatTextAndAttributes(C,[w,l&&C.length?C[C.length-1]:null],!0);0===y&&(b.column=e+w.length,sd.concatTextAndAttributes(l,A,!0));q.changeTextAndAttributes(l);
if(0===y)return{start:{row:p,column:e},end:b};b.row+=y;b.column=u[y-1].length;l=this.insertLines(u,p+1);l=sd.arr.last(l);l.changeTextAndAttributes(sd.concatTextAndAttributes(l.textAndAttributes,A,!0));return{start:{row:p,column:e},end:b}}},{key:"remove",value:function(b,e){e=void 0===e?!1:e;if(0!==this.rowCount){var l=b.start,p=b.end;if(l.row!==p.row||l.column!==p.column){sd.lessPosition(p,l)&&(p=$jscomp.makeIterator([p,l]),l=p.next().value,p=p.next().value);var q=this.endPosition;if(!sd.lessEqPosition(q,
l)){var u=sd.maxPosition(l,{column:0,row:0});l=u.row;u=u.column;q=sd.minPosition(p,q);p=q.row;var w=q.column;0>u&&(u=0);0>w&&(w=0);e&&!e.debugDocumentUpdate&&(e=!1);e&&(e.log||(e={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),e.group("document.remove "+JSON.stringify(b)),e.log("[text doc] removing "+l+"/"+u+" => "+p+"/"+w));var y=this.getLine(l);b=y;q=[y];for(var A=0;A<p-l;A++)q.push(y=y.nextLine());y=q[q.length-
1];u=$jscomp.makeIterator(sd.splitTextAndAttributesAt(b.textAndAttributes,u)).next().value;w=$jscomp.makeIterator(sd.splitTextAndAttributesAt(y.textAndAttributes,w));w.next();w=w.next().value;b.changeTextAndAttributes(sd.concatTextAndAttributes(u,w,!0));e&&e.log('[text doc removal] what remains of start/end line: "'+b.textAndAttributes+'"');1<q.length&&this.removeLines(l+1,p,e);e&&e.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(b){var e=b.row;b=b.column;var l=this.getLine(e),
p=$jscomp.makeIterator(sd.splitTextAndAttributesAt(l.textAndAttributes,b)),q=p.next().value;p=p.next().value;l.changeTextAndAttributes(q);l=new sd.Line({parent:null,width:0,height:0,textAndAttributes:p});this.insertLines([l],e+1);return{start:{row:e,column:b},end:{row:e+1,column:0}}}},{key:"replace",value:function(b,e,l){var p=b.start;b=b.end;if(!e.length)return this.remove({start:p,end:b},l),{removed:{start:p,end:b},inserted:{start:p,end:p}};var q=this.clipPositionToLines(p),u=this.clipPositionToLines(b);
q.row===u.row&&this.remove({start:q,end:u},l);if(q.row===u.row||sd.lessEqPosition(this.endPosition,p)){var w;"string"===typeof e?e.length&&(w=e.length&&this.insertText(e,p)):e.length&&(2!==e.length||e[0])&&(w=this.insertTextAndAttributes(e,p,l));w||(w={start:q,end:q});return{removed:{start:p,end:b},inserted:w}}p=q;b=u;l=p;w=l.row;u=l.column;q=b.row;if("string"===typeof e){l=[];e=e.split(sd.newline);for(var y=0;y<e.length;y++)l.push([e[y],null])}else l=sd.splitTextAndAttributesIntoLines(e,sd.newline);
var A=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);A&&(l=[]);var C=e=this.getLine(w);y=this.getLine(q);u=$jscomp.makeIterator(sd.splitTextAndAttributesAt(C.textAndAttributes,u));var E=u.next().value;u.next();for(C.changeTextAndAttributes(A?E:sd.concatTextAndAttributes(E,l.shift(),!0));l.length;){e=e.nextLine();w++;if(e===y)break;e.changeTextAndAttributes(l.shift())}if(!l.length)return l=e.stringSize-1,this.remove({start:{row:w,column:e.stringSize},end:b}),{removed:{start:p,end:b},inserted:{start:p,
end:{row:w,column:l}}};console.assert(w==q,"not end row");console.assert(e.row==w,"row != last line.row");this.remove({start:{row:w,column:0},end:b});q=[];e=l.length;for(u=0;u<e-1;u++)y=l[u],y.length||(y=["",null]),"string"===typeof y[y.length-2]?y[y.length-2]+=sd.newline:y.push(sd.newline,null),q.push.apply(q,$jscomp.arrayFromIterable(y));q.push.apply(q,$jscomp.arrayFromIterable(l[e-1]));l=this.insertTextAndAttributes(q,{row:w,column:0}).end;return{removed:{start:p,end:b},inserted:{start:p,end:l}}}},
{key:"wordsOfLine",value:function(b){for(var e=this.getLineString(b),l=[],p,q=0;q<e.length;q++)/[^a-z0-9_]/i.test(e[q])?p&&(p.range.end.column=q,l.push(p),p=null):(p=p||{index:l.length,string:"",range:{start:{row:b,column:q},end:{row:b,column:q}}},p.string+=e[q]);p&&(p.range.end.column=q,l.push(p));return l}},{key:"wordAt",value:function(b,e){var l=b.row,p=b.column;e=void 0===e?this.wordsOfLine(l):e;return e.find(function(q){q=q.range;var u=q.end.column;return q.start.column<=p&&p<=u})||{range:{start:{column:p,
row:l},end:{column:p,row:l}},string:""}}},{key:"wordLeft",value:function(b){var e=b.row,l=b.column,p=this.wordsOfLine(e);if(!p.length||sd.lessEqPosition(b,p[0].range.start)){for(;0<=--e;)if(p=this.wordsOfLine(e),p.length)return sd.arr.last(p);return{range:{start:b,end:b},string:""}}e=this.wordAt(b);return e.string?sd.eqPosition(e.range.start,b)?p[e.index-1]:e:p.slice().reverse().find(function(q){return q.range.end.column<=l})||{range:{start:b,end:b},string:""}}},{key:"wordRight",value:function(b){var e=
b.column,l=b.row,p=this.wordsOfLine(b.row);if(!p.length||sd.lessEqPosition(sd.arr.last(p).range.end,b)){for(;++l<this.lines.length;)if(p=this.wordsOfLine(l),p.length)return p[0];return{range:{start:b,end:b},string:""}}l=this.wordAt(b);return l.string?sd.eqPosition(l.range.end,b)?p[l.index+1]:l:p.find(function(q){return q.range.start.column>=e})||{range:{start:b,end:b},string:""}}},{key:"scanForward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);for(var q=b.text;p<b.stringSize-1;p++){var u=
e(q[p],{row:l,column:p});if(u)return u}for(;b=b.nextLine();)for(l++,q=b.text,p=0;p<b.stringSize-1;p++)if(u=e(q[p],{row:l,column:p}))return u;return null}},{key:"scanBackward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);var q=b.text;for(--p;0<=p;p--){var u=e(q[p],{row:l,column:p});if(u)return u}for(;b=b.prevLine();)for(l--,q=b.text,p=b.stringSize-2;0<=p;p--)if(u=e(q[p],{row:l,column:p}))return u;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var b=[],e=this.rowCount,l=this.stringSize,p=this.lines,q=this.textString,u=this.root;e!==p.length&&b.push({error:"document "+this+" row count: "+e+" !== "+p.length});q.length!==l&&b.push({error:"document "+this+" textString.length vs stringSize: "+q.length+" !== "+l});b.push.apply(b,$jscomp.arrayFromIterable(u.consistencyCheck()));e=0;for(l=p[0];l;)l!=p[e]&&b.push({error:"line iteration at "+
e+" is broken: nextLine() of "+p[e-1]+" is not "+p[e]+"!"}),e++,l=l.nextLine();p[e]&&b.push({error:"nextLine() of\n  "+p[e-1]+"\nis nullish but \n  "+p[e]+"\nexists in tree!"});if(b.length)throw Error("Consistency check of document revealed "+b.length+" error"+(1<b.length?"s":"")+":\n"+b.map(function(w){return w.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var b=System.decanonicalize("lively.lang/text-graphics.js"),
e=(System.get(b)||{}).printTree;return e?e(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(b).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return sd.documentFuzzier.run()}},
{key:"newline",get:function(){return sd.newline}},{key:"fromString",value:function(b,e){return new this(b.split(sd.newline),e)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),boa=b6=sd.Document;sd.default=b6;var Om=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");
Om.lessPosition=kp;Om.lessEqPosition=cx;Om.eqPosition=lp;var Ux=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),k=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){e=void 0===e?{column:0,row:0}:e;this.id=b||""+(this.constructor._id=
(this.constructor._id||0)+1);this.position=e;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(b){if(Om.lessEqPosition(this.position,b.start))return!1;if(Om.lessEqPosition(b.start,this.position)&&Om.lessEqPosition(this.position,b.end))return this.position=b.start,!0;var e=this.position,l=e.column,p=b.start,q=p.column,u=b.end;b=u.row;u=u.column;this.position={column:b!==this.position.row?l:q===u?l-(u-q):q+(l-u),row:e.row-(b-p.row)};return!0}},
{key:"onInsert",value:function(b){if(Om.lessPosition(this.position,b.start)||Om.eqPosition(this.position,b.start)&&"stay"===this.insertBehavior)return!1;var e=this.position,l=b.start,p=l.row;l=l.column;b=b.end;var q=b.column;this.position={column:e.column+(p!==this.position.row?0:q-l),row:e.row+(b.row-p)};return!0}},{key:"equalsPosition",value:function(b){return b?b.isAnchor?Om.eqPosition(this.position,b.position):Om.eqPosition(this.position,b):!1}},{key:"toString",value:function(){var b=this.position;
return"Anchor("+this.id+" "+b.row+"/"+b.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);Om.Anchor=Ux;Om.Anchor=Ux;Om.Anchor=Ux;var coa=Object.freeze({__proto__:null,Anchor:Ux}),
gf=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");gf.pt=bh;gf.Color=of;gf.connect=Jj;gf.once=Yp;gf.disconnect=No;gf.Path=Ag;gf.morph=$i;gf.GridLayout=as;gf.config=ok;gf.Morph=Vi;gf.lessPosition=kp;gf.minPosition=dx;gf.maxPosition=ex;gf.Icon=Ml;var xJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(b,e){var l=this.doc.positionToIndex(b);l=this.doc.indexToPosition(l+e.length);return{range:{start:b,end:l},match:e}}},{key:"stringSearch",value:function(b,e,l,p,q,u,w){if(q&&(gf.lessPosition(w,q.start)||gf.lessPosition(q.end,w)))return this.STOP;
l||(u=u.toLowerCase());if(u!==e[0])return null;q=w.row;w=w.column;u=b[q];b=1>=p?"":"\n"+b.slice(q+1,q+1+(p-1)).join("\n");b=u.slice(w)+b;return 0!==(l?b:b.toLowerCase()).indexOf(e)?null:this.processFind({row:q,column:w},b.slice(0,e.length))}},{key:"reSearch",value:function(b,e,l,p,q,u){if(p&&(gf.lessPosition(u,p.start)||gf.lessPosition(p.end,u)))return this.STOP;p=u.row;u=u.column;return(b=(b[p].slice(u)+(l?"\n"+b.slice(p+1).join("\n"):"")).match(e))?this.processFind({row:p,column:u},b[0]):null}},
{key:"search",value:function(b){var e=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},b);b=e.start;var l=e.needle,p=e.backwards,q=e.caseSensitive;e=e.inRange;if(!l)return null;e&&(b=p?gf.minPosition(e.end,b):gf.maxPosition(e.start,b));if(l instanceof RegExp){var u=(l.flags||"").split(""),w=!!l.multiline;u.splice(u.indexOf("m"),1);q||u.includes("i")||u.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),u.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,
l,w,e)}else l=String(l),q||(l=l.toLowerCase()),u=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,q,u,e);b=this.doc[p?"scanBackward":"scanForward"](b,l);return b===this.STOP?null:b}},{key:"searchForAll",value:function(b){for(var e=[],l=0;;){if(1E4<l++)throw Error("endless loop");var p=this.search(b);if(!p)return e;e.push(p);b=Object.assign({},b,{start:b.backwards?p.range.start:p.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],
d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);gf.TextSearcher=xJ;gf.TextSearcher=xJ;gf.TextSearcher=xJ;var MR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?
d.SearchWidget:d.SearchWidget=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=this;b=void 0===b?{}:b;b.targetText&&(b.target=b.targetText);if(!b.target)throw Error("SearchWidget needs a target text morph!");Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);b=this.getSubmorphNamed("replaceButton");
var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var p=this.getSubmorphNamed("searchInput"),q=this.getSubmorphNamed("prevButton"),u=this.getSubmorphNamed("nextButton"),w=this.getSubmorphNamed("cancelButton"),y=this.getSubmorphNamed("acceptButton");gf.connect(y,"fire",this,"execCommand",{converter:function(){return"accept search"}});gf.connect(w,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});gf.connect(u,"fire",
this,"execCommand",{converter:function(){return"search next"}});gf.connect(q,"fire",this,"execCommand",{converter:function(){return"search prev"}});gf.connect(p,"inputChanged",this,"search");gf.connect(b,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});gf.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};p.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){e.target.execCommand("realign top-bottom-center");
e.addSearchMarkersForPreview(e.state.inProgress&&e.state.inProgress.found,!1);return A.return(!0)})}}])}},{key:"focus",value:function(){var b=this;this.get("searchInput").focus();this.whenRendered().then(function(){return b.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(b){var e=this,l=this.world();l&&setTimeout(function(){var p=l.focusedMorph;e.withAllSubmorphsDetect(function(q){return q.isFocused()})?e.get("searchInput")!=p&&e.get("replaceInput")!=p&&e.get("searchInput").focus():
e.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(b){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&b){b=this.state.before;var e=b.scroll;this.target.selection=b.selectionRange;this.target.scroll=e;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&
(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(b){if(!b||!b.found)return null;var e=this.target,l=e.selection,p=!!e.activeMark||!l.isEmpty(),q=b.found.range,u=q.start;q=q.end;u=b.backwards?u:q;p?l.lead=u:e.cursorPosition=
u;e.isLineFullyVisible(u.row)||e.centerRow();return b}},{key:"removeSearchMarkers",value:function(){var b=this;(this.target.markers||[]).forEach(function(e){e=e.id;return e.startsWith("search-highlight")&&b.target.removeMarker(e)})}},{key:"addSearchMarkers",value:function(b,e,l){l=void 0===l?!1:l;this.removeSearchMarkers();e=this.target;var p=this.textMap,q=e.whatsVisible,u=q.startRow;q=q.endRow;var w=e.document.lineStrings,y=0,A=gf.config.codeEditor.search,C=A.maxCharsPerLine;A=A.fastHighlightLineCount;
p&&3<=b.match.length&&w.length<A&&(u=0,q=w.length-1);A=!1;for(var E=window.performance.now();u<=q&&!A;u++)for(var L=w[u]||"",I=0;I<Math.min(L.length,C);I++){if(300<window.performance.now()-E){A=!0;break}if(l?0===L.slice(I).indexOf(b.match):0===L.slice(I).toLowerCase().indexOf(b.match.toLowerCase()))e.addMarker({id:"search-highlight-"+y++,range:{start:{row:u,column:I},end:{row:u,column:I+b.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)",
"pointer-events":"none"}}),I+=b.match.length}this.state.backwards?(l=b.range.start,b=l.row,l=l.column,b={start:{row:b,column:l},end:{row:b,column:l+1}}):(l=b.range.end,b=l.row,l=l.column,b={start:{row:b,column:l-1},end:{row:b,column:l}});l={};e.addMarker({id:"search-highlight-cursor",range:b,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});p&&p.update()}},{key:"addSearchMarkersForPreview",value:function(b,e){e=
void 0===e?!0:e;b&&(this.addSearchMarkers(b),e&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var b=this.target,e=this.state,l=b.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=b.globalBounds().insetBy(5).topRight();if(b.getWindow())gf.once(b.getWindow(),"remove",this,"remove");l=this.get("searchInput");var p=b.scroll;b=b.selection;e.position=b.lead;e.before={scroll:p,position:b.lead,selectionRange:b.range,selectionReverse:b.isReverse()};
e.last&&e.last.found&&(gf.disconnect(l,"inputChanged",this,"search"),this.input=e.last.needle,gf.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(e.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(b){var e=this.state.inProgress;if(e&&e.found){var l=e.found.range;e=l.start;l=l.end;this.state.position=b!==this.state.backwards?b?l:e:b?e:l}this.state.backwards=b;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",
value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var b=this.state,e=b.backwards,l={backwards:e,start:b.position};b=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:b});this.applySearchResult(l);b?this.addSearchMarkers(b,e):this.cleanup();return l}},{key:"showTextMap",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);e=b.textMap=gf.morph({type:"textmap"});e.attachTo(b.target);e.isLayoutable=!1;b.addMorph(e);e.topRight=b.innerBounds().bottomRight().addXY(0,5);e.height=b.target.height-b.height-15;e.update();b.renderOnGPU=!0;return l.return(e)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},
{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var b=this;return[{name:"occur with search term",exec:function(){var e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return p.yield(System.import("lively.morphic/text/occur.js"),2);e=p.yieldResult;l=e.occurStartCommand;b.target.addCommands([l]);b.execCommand("accept search");return p.return(b.target.execCommand("occur",{needle:b.input}))})}},{name:"accept search",exec:function(){b.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){b.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){b.cancelSearch(!1);return!0}},{name:"search next",exec:function(){b.searchNext();
return!0}},{name:"search prev",exec:function(){b.searchPrev();return!0}},{name:"only search prev",exec:function(){if(b.get("searchInput").isFocused())return b.searchPrev(),!0}},{name:"search next or replace and go to next",exec:function(e,l,p){b.get("searchInput").acceptInput();return b.execCommand(b.get("replaceInput").isFocused()?"replace and go to next":"search next",l,p)}},{name:"replace current search location with replace input",exec:function(){var e=gf.Path("state.inProgress").get(b);if(e.found){var l=
b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();e.needle instanceof RegExp&&(l=e.found.match.replace(e.needle,l));b.target.replace(e.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){b.execCommand("replace current search location with replace input");b.execCommand(b.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var e=gf.Path("state.inProgress").get(b);if(e.found){e=Object.assign({},e,{start:{row:0,
column:0}});var l=b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();var p=(new gf.TextSearcher(b.target)).searchForAll(e);b.target.undoManager.group();p.forEach(function(q){var u=q.range;q=q.match;e.needle instanceof RegExp&&(l=q.replace(e.needle,l));b.target.replace(u,l,!0,!0,!1)});b.target.undoManager.group();b.acceptSearch()}return!0}},{name:"change focus",exec:function(){b.get("searchInput").isFocused()?b.get("replaceInput").focus():b.get("searchInput").focus();
return!0}},{name:"yank next word from text",exec:function(){var e=b.target,l=e.wordRight(),p=b.get("searchInput");p.selection.isEmpty()||(p.selection.text="");e=e.textInRange({start:e.cursorPosition,end:l.range.end});p.textString+=e;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:gf.Color.gray},borderRadius:{defaultValue:3},
fill:{defaultValue:gf.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var b=this.get("searchInput").textString,e=b.match(/^\/(.*)\/([a-z]*)$/);return e?new RegExp(e[1],e[2]):b},set:function(b){this.get("searchInput").textString=String(b)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(b){this.get("replaceInput").fontSize=
b}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(b){this.get("searchInput").fontFamily=b;this.get("replaceInput").fontFamily=b}},layout:{initialize:function(){this.layout=new gf.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},
2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[gf.morph({type:"button",name:"acceptButton",label:gf.Icon.textAttribute("check-circle")}).fit(),gf.morph({type:"button",name:"cancelButton",label:gf.Icon.textAttribute("times-circle")}).fit(),
gf.morph({type:"button",name:"nextButton",label:gf.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),gf.morph({type:"button",name:"prevButton",label:gf.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),gf.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),gf.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),gf.morph({type:"button",
styleClasses:["replace"],name:"replaceButton",label:"replace"}),gf.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];gf.connect(this.get("searchInput"),"onBlur",this,"onBlur");gf.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21677})}(gf.Morph);gf.SearchWidget=MR;gf.SearchWidget=MR;gf.SearchWidget=MR;var yJ=[{name:"search in text",exec:function(a,d){d=void 0===d?{backwards:!1}:d;a=a._searchWidget||(a._searchWidget=new gf.SearchWidget({target:a,extent:gf.pt(300,20)}));a.state.backwards=d.backwards;a.prepareForNewSearch();gf.config.codeEditor.search.showTextMap&&a.showTextMap();return!0}}];gf.searchCommands=yJ;gf.searchCommands=yJ;gf.searchCommands=
yJ;var Fj=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Fj.todo=function(a){throw Error("not yet implemented "+a);};Fj.Rectangle=Od;Fj.rect=wk;Fj.pt=bh;Fj.arr=Ke;Fj.Range=rs;var c6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),k=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?d.TextLayout:d.TextLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(b,e){var l=function(u){var w=0;return Fj.arr.flatten(Fj.arr.histogram(u,u.length/3).map(function(y){var A=$jscomp.makeIterator(y);y=A.next().value;var C=A.next().value;A=A.next().value;for(var E=[],L=0;L<y;L++)E.push(Fj.rect(w,0,C,A)),w+=C;return E}))};b=$jscomp.makeIterator(b);for(var p=b.next();!p.done;p=b.next()){var q=
$jscomp.makeIterator(p.value);p=q.next().value;q=q.next().value;q=l(q);this.lineCharBoundsCache.set(e.document.getLine(p),q)}}},{key:"resetLineCharBoundsCache",value:function(b){this.lineCharBoundsCache=new WeakMap;b&&!b._isDeserializing&&(this.estimateLineHeights(b),b.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(b){b&&this.lineCharBoundsCache.set(b,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(b,e){var l=b.document;b._isDeserializing&&b._initializedByCachedBounds||
l&&this.resetLineCharBoundsCacheOfLine(l.getLine(e))}},{key:"resetLineCharBoundsCacheOfRange",value:function(b,e){for(var l=e.start.row;l<=e.end.row;l++)this.resetLineCharBoundsCacheOfRow(b,l)}},{key:"estimateLineHeightsInRange",value:function(b,e){for(var l=b.document,p=b.getGlobalTransform(),q=e.start.row;q<=e.end.row;q++)this.resetLineCharBoundsCacheOfRow(b,l.getLine(q),p)}},{key:"estimateExtentOfLine",value:function(b,e,l){l=void 0===l?b.getGlobalTransform():l;var p=b.fontMetric,q=b.lineWrapping,
u=b.padding,w=b.textRenderer,y=b.debug,A=b.defaultTextStyle,C=b.getProperty("extent").x,E=u.left(),L=u.right(),I=u.top();u=u.bottom();w=w.directRenderTextLayerFn(b);var V=e.textAndAttributes,T=[],Y;C=C-E-L;if(V&&V.length)for(var na=0,Ba=0;na<V.length;na+=2)(Y=V[na])&&Y.isMorph?(Y.position=this.pixelPositionFor(b,{row:e.row,column:Ba}).subPt(b.origin),Ba++):Y&&(Ba+=Y.length),T.push(Object.assign({},A,{},V[na+1]));else T.push(A);V=T.length;for(na=A=Y=0;na<V;na++){Ba=p.defaultCharExtent(b,{defaultTextStyle:T[na],
width:1E3,transform:l,paddingBottom:u,paddingTop:I,paddingRight:L,paddingLeft:E},w);var F=Ba.width;A=Math.max(Ba.height,A);Y+=F}b=A;l=e.text.length||1;p=Math.round(Y/V);E=l*p;E=q?Math.min(E,C):E;q&&(b=Math.round((Math.ceil(l/Math.max(3,C/p))||1)*A));y&&console.log(e.row+": "+e.height+" => "+b);e.changeExtent(E,b,!0)}},{key:"estimateLineHeights",value:function(b,e){var l=b.fontMetric,p=b.textRenderer,q=b.document,u=b.defaultTextStyle,w=b.clipMode,y=b.textAlign,A=b.padding,C=b.lineWrapping,E=b.debug,
L=b.getProperty("extent"),I=L.x,V=L.y;L=b.getGlobalTransform();var T=A.left(),Y=A.right(),na=A.top();A=A.bottom();q=q.lines;var Ba=p.directRenderTextLayerFn(b);E&&(E=b.debugHelper(E),E.debugTextLayout||(E=!1));if(!E&&10>b.lineCount()&&3E3>b.document.stringSize&&!Fj.arr.any(b.textAndAttributes,function(F){return F&&void 0!=F.fontFamily}))for(e=p.directRenderLineFn(b),e=l.manuallyComputeBoundsOfLines(b,q,0,0,{defaultTextStyle:u,width:I,height:V,clipMode:w,lineWrapping:C,textAlign:y,transform:L,paddingLeft:T,
paddingRight:Y,paddingTop:na,paddingBottom:A},Ba,e),u=0;u<q.length;u++)E=e[u],q[u].changeExtent(E.width,E.height,!l.isFontSupported(b.fontFamily,b.fontWeight));else{for(u=l=0;u<q.length;u++)w=q[u],!e&&0<w.height||(l++,this.estimateExtentOfLine(b,w,L));b.viewState._textLayoutStale=!1;E&&E.log("estimateLineHeights, "+l+"/"+q.length+" updated, force: "+e)}}},{key:"defaultCharExtent",value:function(b){var e=b.textRenderer,l=b.fontMetric,p=b.defaultTextStyle,q=b.getGlobalTransform();e=e.directRenderTextLayerFn(b);
return l.defaultCharExtent(b,{transform:q,defaultTextStyle:p,width:1E3},e)}},{key:"textBounds",value:function(b){var e=b.document,l=b.padding,p=b.borderWidthLeft,q=b.borderWidthRight,u=b.borderWidthTop;b=b.borderWidthBottom;return new Fj.Rectangle(l.left(),l.top(),Math.round(e.width+p+q),Math.round(e.height+u+b))}},{key:"isFirstLineVisible",value:function(b){return 0>=b.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(b){return b.viewState.lastVisibleRow>=b.lineCount()-1}},{key:"isLineVisible",
value:function(b,e){return e>=b.viewState.firstVisibleRow&&e<=b.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(b,e){return e>=b.viewState.firstFullyVisibleRow&&e<=b.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(b){var e=b.viewState.firstVisibleRow,l=b.viewState.lastVisibleRow;return{lines:b.document.lines.slice(e,l),startRow:e,endRow:l}}},{key:"firstFullVisibleLine",value:function(b){return b.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(b){return b.viewState.lastFullyVisibleRow}},
{key:"screenLineRange",value:function(b,e,l){var p=e.row,q=e.column;q=Math.max(0,q);p=Math.min(b.lineCount()-1,Math.max(0,p));var u=this.charBoundsOfRow(b,p);q>u.length-1&&(q=u.length-1);for(var w=u[q],y=e=q,A=q+1;A<u.length&&!(u[A].y>w.y+w.height);A++)y=A;y===u.length-1&&y++;for(A=q-1;0<=A&&!(u[A].y<w.y+w.height);A--)e=A;l&&(b=b.getLine(p).slice(e,y).match(/^\s*/)[0].length,e+=b);return new Fj.Range({start:{row:p,column:e},end:{row:p,column:y}})}},{key:"rangesOfWrappedLine",value:function(b,e){for(var l=
b.getLine(e).length,p=0,q=[];;){var u=this.screenLineRange(b,{row:e,column:p},!1);q.push(u);if(u.end.column>=l)break;var w=u.end.column+1;if(w>=l)break;if(w<=p){if(!b.env.renderer.getNodeForMorph(b))break;throw Error("should not happen "+u.end.column+" vs "+p);}p=w}return q}},{key:"chunkAtPos",value:function(b,e){Fj.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(b,e){e=b.document.getLine(e);b._initializedByCachedBounds&&!this._restored&&(this.restore(b._initializedByCachedBounds,b),this._restored=
!0);var l=this.lineCharBoundsCache.get(e);if(l)return l;var p=b.getProperty("extent");l=p.x;p=p.y;var q=b.fontMetric,u=b.textRenderer,w=b.defaultTextStyle,y=b.clipMode,A=b.textAlign,C=b.padding,E=b.lineWrapping,L=b.getGlobalTransform(),I=C.left(),V=C.right(),T=C.top();C=C.bottom();var Y=u.directRenderLineFn(b);u=u.directRenderTextLayerFn(b);b=q.manuallyComputeCharBoundsOfLine(b,e,0,0,{defaultTextStyle:w,width:l,height:p,clipMode:y,lineWrapping:E,textAlign:A,paddingLeft:I,paddingRight:V,paddingTop:T,
paddingBottom:C,transform:L},u,Y);if(b.find(function(na){return void 0==na.width&&void 0==na.height}))return b;this.lineCharBoundsCache.set(e,b);return b}},{key:"computeMaxBoundsForLineSelection",value:function(b,e){var l=e.start,p=e.end,q=b.textLayout,u=q.rangesOfWrappedLine(b,l.row).find(function(w){return w.containsPosition(l)});p=b.lineWrapping&&u?u.intersect(e).end:p;p=p.row==l.row?p:{row:p.row,column:-1};e=q.charBoundsOfRow(b,l.row);e=0>p.column?e.slice(l.column):e.slice(l.column,p.column+1);
p=l.column+(e?e.indexOf(Fj.arr.max(e,function(w){return w.height})):0);return q.boundsFor(b,{row:l.row,column:p})}},{key:"boundsFor",value:function(b,e){var l=e.row;e=e.column;e=Math.max(0,e);l=Math.min(b.lineCount()-1,Math.max(0,l));var p=this.charBoundsOfRow(b,l);if(0<p.length)if(e>=p.length){var q=p[p.length-1];q=new Fj.Rectangle(q.x+q.width,q.y,0,q.height)}else q=Fj.Rectangle.fromLiteral(p[e]);q||(console.warn("Cannot compute bounds for line "+l+"/"+e),q=new Fj.Rectangle(0,0,0,0));e=b.document;
b=b.padding;q.x+=b.left();q.y=q.y+e.computeVerticalOffsetOf(l)+b.top();return q}},{key:"pixelPositionFor",value:function(b,e){return this.boundsFor(b,e).topLeft()}},{key:"textPositionFromPoint",value:function(b,e){var l=e.addPt(b.origin),p=l.x,q=l.y,u=b.document;l=b.padding;var w=l.left(),y=l.top();if(q>u.height+y)return u.endPosition;if(q<y)return{row:0,column:0};l=u.findLineByVerticalOffset(q-y);if(!l)return{row:0,column:0};var A=l.line.row;b=this.charBoundsOfRow(b,A);var C=b.length,E=b[0],L=b[C-
1];l={row:A,column:0};p-=w;q-=y+u.computeVerticalOffsetOf(A);if(0===C||p<=E.x+Math.round(E.width/2)&&q>=E.y&&q<=E.y+E.height)return l;if(p>L.x+Math.round(L.width/2)&&q>=L.y&&q<=L.y+L.height)return l.column=C,l;w=[];for(u=C-1;0<=u;u--)if(L=y=b[u],A=L.x,C=L.width,E=L.y,L=L.height,!(q<E||q>E+L)&&(w.push(y),p>=A+Math.round(C/2)))return l.column=1===w.length?u:u+1,l;if(w.length)return l.column=b.indexOf(Fj.arr.last(w)),l;p=Infinity;q=-1;for(u=0;u<b.length;u++)w=b[u],w=e.distSquared(Fj.pt(w.x+w.width/2,
w.y+w.height/2)),w>=p||(p=w,q=u);l.column=q;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),doa=c6=Fj.TextLayout;Fj.default=c6;var ye=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
ye.printViewState=function(a){var d=a.viewState,k=d.scrollTop,b=d.scrollHeight,e=d.textHeight,l=d.firstVisibleRow;d=d.lastVisibleRow;var p=a.document.lines;console.log(a+" #"+a.id.slice(0,12)+"\nscroll: "+k+" + "+b+"\nlines: "+l+" - "+d+"\nvisible lines: "+(d-l)+"\nheight: "+e+", "+p.length+" lines")};ye.installCSS=function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return ye.cssInstalled=!0,k.yield(ye.waitFor(2E4,function(){return a.renderer&&a.renderer.domNode}),
2);d=k.yieldResult;ye.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
d.getRootNode());k.jumpToEnd()})};ye.extractHTMLFromTextMorph=PG;ye.obj=df;ye.arr=Ke;ye.num=Dj;ye.pt=bh;ye.Rectangle=Od;ye.vdom=ZA;ye.defaultAttributes=hw;ye.defaultStyle=gw;ye.addOrChangeCSSDeclaration=Qo;ye.hyperscriptFnForDocument=RH;ye.objectReplacementChar="\ufffd";ye.config=ok;ye.getSvgVertices=fw;ye.waitFor=Js;var zJ=ye.vdom;ye.h=zJ.h;ye.create=zJ.create;ye.patch=zJ.patch;ye.diff=zJ.diff;ye.cssInstalled=!1;ye.debug=!!ye.config.onloadURLQuery["debug-text"];ye.nextTick=function(a,d,k,b,e,l){for(;!e&&
k<d.length;)e=a[d[k++]+"equestAnimationFrame"];return e&&e.bind(a)||a.setImmediate||function(p){a.setTimeout(p,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"reset",value:function(b){this.morph=b;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(b,e,l){if(0===e.height||e.hasEstimatedExtent){var p=b.getGlobalTransform().inverse();p.e=p.f=0;var q=1!=p.getScale()||0!=p.getRotation();q&&(l.style.transform=p.toString());var u=l.getBoundingClientRect();p=u.height;u=u.width;q&&(l.style.transform="");p&&u&&(e.height!==p||e.width!==u)&&b.fontMetric.isFontSupported(b.fontFamily,b.fontWeight)&&(e.changeExtent(u,
p,!1),b.textLayout.resetLineCharBoundsCacheOfLine(e),this.needsRerender=!0,b.viewState._needsFit=!0);if(e.textAndAttributes&&e.textAndAttributes.length)for(u=q=0;q<e.textAndAttributes.length;q+=2)(l=e.textAndAttributes[q])&&l.isMorph?(b._positioningSubmorph=l,l.position=b.textLayout.pixelPositionFor(b,{row:e.row,column:u}).subPt(b.origin),l._dirty=!1,b._positioningSubmorph=null,u++):l&&(u+=l.length);return p}return e.height}},{key:"updateExtentsOfLines",value:function(b){var e=this.morph,l=e.viewState,
p=e.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=0;l.textWidth=b.scrollWidth;b=b.children;for(var q=0,u;q<b.length&&"line"!=b[q].className;)q++;if(q<b.length){u=b[q];var w=u.dataset;w=Number(w?w.row:u.getAttribute("data-row"));if("number"===typeof w&&!isNaN(w)){l.dom_nodeFirstRow=w;u=0;w=e.document.getLine(w);for(var y;q<b.length;q++){var A=b[q];l.dom_nodes.push(A);w&&(y||(y=w.hasEstimatedExtent),w.hasEstimatedExtent=y,u+=this.updateLineHeightOfNode(e,w,A),w.hasEstimatedExtent=!p.isFontSupported(e.fontFamily,
e.fontWeight),w=w.nextLine())}this.needsRerender?(e.fitIfNeeded(),e.makeDirty()):e._dirty=!!e.submorphs.find(function(C){return C.needsRerender()})}}}},{key:"hook",value:function(b,e,l){b&&b.parentNode&&(e=this.morph.viewState,e.text_layer_node=b,e.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5104,end:9179})})(void 0);var d6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.domEnv?ye.cssInstalled||ye.installCSS(b):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=b.domEnv}},{key:"directRenderLineFn",value:function(b){var e=this,l=b.viewState._renderLineFn;if(!l){var p=ye.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderLineFn=function(q){return e.renderLine(p,null,b,q)}}return l}},{key:"directRenderTextLayerFn",
value:function(b){var e=this,l=b.viewState._renderTextLayerFn;if(!l){var p=ye.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderTextLayerFn=function(q){return e.renderJustTextLayerNode(p,b,q,[])}}return l}},{key:"renderMorph",value:function(b,e){var l=b.cursorWidth||1,p=[],q=b.selection;if(b.inMultiSelectMode()){l=q.selections;for(q=0;q<l.length-1;q++)p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,l[q],!0,2)));p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,
l[q],!1,4)))}else p=this.renderSelectionLayer(b,q,!1,l);l=this.renderTextLayer(b,e);q=this.renderJustTextLayerNode(ye.h,b,null,[]);var u=this.renderMarkerLayer(b,e),w=b.document.width>b.width?b.scrollbarOffset:ye.pt(0,0);w=ye.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},b.viewState.fastScroll?{overflow:b.scrollActive?b.clipMode:"hidden"}:{},{width:b.width+"px",height:b.height+"px"})},[ye.h("div",{style:{width:Math.max(b.document.width,b.width)+"px",height:Math.max(b.document.height,
b.height)-w.y+"px"}})]);l.properties.className+=" actual";l.properties.style.overflow="visible"===b.clipMode?"visible":"hidden";q.properties.className+=" font-measure";var y=b.embeddedMorphMap,A=y?b.submorphs.filter(function(C){return!y.has(C)}):b.submorphs;p=[].concat($jscomp.arrayFromIterable(p),[u,q,l,e.renderSelectedSubmorphs(b,A)]);return ye.h("div",Object.assign({},ye.defaultAttributes(b,e),{style:Object.assign({},ye.defaultStyle(b),{},b.viewState.fastScroll?{overflow:"visible"==b.clipMode?
"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===b.nativeCursor?b.readOnly?"default":"text":b.nativeCursor})}),[w].concat($jscomp.arrayFromIterable(b.viewState.fastScroll?[ye.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+b.scroll.x+"px, -"+b.scroll.y+"px)"}},p)]:p)))}},{key:"renderTextLayer",value:function(b,e){var l=this,p=b.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(b)),
$jscomp.arrayFromIterable(this.renderLines(ye.h,e,b))):this.renderLines(ye.h,e,b);p=this.renderJustTextLayerNode(ye.h,b,null,p);p.properties.style.position="absolute";var q=b.viewState.afterTextRenderHook||(b.viewState.afterTextRenderHook=new ye.AfterTextRenderHook);q.reset(b);p.properties["after-text-render-hook"]=q;ye.nextTick(function(){l.manuallyTriggerTextRenderHook(b,e)});return p}},{key:"manuallyTriggerTextRenderHook",value:function(b,e){var l=b.viewState.afterTextRenderHook;l&&!l.called&&
((e=(e=e.getNodeForMorph(b))&&e.querySelector(".actual.newtext-text-layer"))&&l.hook(e),b.ownerChain().every(function(p){return p.visible})&&b.fit())}},{key:"renderJustTextLayerNode",value:function(b,e,l,p){var q=e.padding,u=q.x,w=q.y,y=e.fixedWidth,A=e.fixedHeight,C=e.backgroundColor,E=e.fontColor,L=e.textAlign,I=e.fontSize,V=e.textDecoration,T=e.fontStyle,Y=e.fontWeight,na=e.fontFamily,Ba=e.lineHeight,F=e.wordSpacing,W=e.letterSpacing,P=e.tabWidth,S=u+q.width;q=w+q.height;var fa=Math.max(e.document.height,
e.height),aa="newtext-text-layer";switch(e.lineWrapping){case !0:case "by-words":aa+=" wrap-by-words";break;case "only-by-words":aa+=" only-wrap-by-words";break;case "by-chars":aa+=" wrap-by-chars";break;case !1:aa+=" no-wrapping"}y||(aa+=" auto-width");A||(aa+=" auto-height");e={height:fa+"px"};0<u&&(e.paddingLeft=u+"px");0<S&&(e.paddingRight=S+"px");0<w&&(e.paddingTop=w+"px");0<q&&(e.paddingBottom=q+"px");W&&(e.letterSpacing=W);F&&(e.wordSpacing=F);Ba&&(e.lineHeight=Ba);na&&(e.fontFamily=na);Y&&
(e.fontWeight=Y);T&&(e.fontStyle=T);V&&(e.textDecoration=V);I&&(e.fontSize=I+"px");L&&(e.textAlign=L);E&&(e.color=String(E));C&&(e.backgroundColor=C);8!==P&&(e.tabSize=P);u={className:aa,style:e};e.overflow="hidden";l&&(w=l.clipMode,C=l.height,l=l.width,"number"===typeof l&&(e.width=l+"px"),"number"===typeof C&&(e.height=C+"px"),w&&(e.overflow=w));return b("div",u,p)}},{key:"renderLines",value:function(b,e,l){var p=l.height,q=l.scroll,u=l.padding.y,w=l.document,y=l.clipMode;e.getNodeForMorph(l);q=
q.y;var A=w.rowCount-1,C=w.height,E="visible"!==y,L=w.findLineByVerticalOffset(E?Math.max(0,E?q-u:0):0)||{row:0,y:0,offset:0,line:w.getLine(0)},I=L.line,V=L.offset;y=L.y;L=L.row;u=w.findLineByVerticalOffset(E?Math.min(C,q-u+p):C)||{row:A,offset:0,y:0,line:w.getLine(A)};w=u.line;var T=u.offset,Y=u.row;u=E?L:0;V=0===V?L:L+1;A=E?Y+1:A;E=w&&T!==w.height?Y-1:Y;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,A-u+1);L=[];w=[];w.push(b("div.newtext-before-filler",{key:"filler",style:{height:y+"px"}}));
for(T=0;T<this.maxVisibleLines&&(L.push(I),Y=this.renderLine(b,e,l,I),w.push(Y),Y.key=I.row%this.maxVisibleLines,T++,I=I.nextLine(),I););Object.assign(l.viewState,{scrollTop:q,scrollHeight:p,scrollBottom:q+p,heightBefore:y,textHeight:C,firstVisibleRow:u,lastVisibleRow:A,firstFullyVisibleRow:V,lastFullyVisibleRow:E,visibleLines:L});l.debug&&ye.printViewState(l);return w}},{key:"renderLine",value:function(b,e,l,p){var q=p.textAndAttributes,u=[],w=q.length,y=l.fontSize;if(0<w)for(var A=0;A<w;A+=2){var C=
q[A]||"\u00a0";var E=q[A+1];if("string"!==typeof C)u.push(C.isMorph?this.renderEmbeddedSubmorph(b,e,C,E):ye.objectReplacementChar);else if(E){var L=E.fontSize&&(ye.obj.isString(E.fontSize)?E.fontSize:E.fontSize+"px");var I=E.fontFamily;var V=E.fontWeight;var T=E.fontStyle;var Y=E.textDecoration;var na=E.fontColor;var Ba=E.backgroundColor;var F=E.nativeCursor;var W=E.textStyleClasses;var P=E.link;var S=E.lineHeight||S;var fa=E.textAlign||fa;var aa=E.wordSpacing||aa;var oa=E.letterSpacing||oa;var Va=
E.paddingRight;var lb=E.paddingLeft;var qa=E.paddingTop;var ja=E.paddingBottom;var ta=E.verticalAlign;var Ha=E.textStroke;var zb=E.quote||zb;var Ub="span";var Nb={};var Sb={style:Nb};L&&E.fontSize<y&&(y=E.fontSize);P&&(Ub="a",(Sb.href=P)&&P.startsWith("http")&&(Sb.target="_blank"));if(P||F)Nb.pointerEvents="auto";L&&(Nb.fontSize=L);I&&(Nb.fontFamily=I);V&&(Nb.fontWeight=V);T&&(Nb.fontStyle=T);Y&&(Nb.textDecoration=Y);na&&(Nb.color=String(na));Ba&&(Nb.backgroundColor=String(Ba));F&&(Nb.cursor=F);Va&&
(Nb.paddingRight=Va);lb&&(Nb.paddingLeft=lb);qa&&(Nb.paddingTop=qa);ja&&(Nb.paddingBottom=ja);ta&&(Nb.verticalAlign=ta);Ha&&(Nb["-webkit-text-stroke"]=Ha);E.doit&&(Nb.pointerEvents="auto",Nb.cursor="pointer");W&&W.length&&(Sb.className=W.join(" "));u.push(b(Ub,Sb,C))}else u.push(C)}else u.push(b("br"));e={};l.fontSize>y&&(e.fontSize=y+"px");S&&(e.lineHeight=S);fa&&(e.textAlign=fa);oa&&(e.letterSpacing=oa);aa&&(e.wordSpacing=aa);l=b("div",{className:"line",style:e,dataset:{row:p.row}},u);if(zb)for("number"!==
typeof zb&&(zb=1);zb--;)l=b("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",value:function(b,e,l,p){p=p||{};if(e)return b=e.render(l),b.properties.style.position="relative",b.properties.style.transform="",b.properties.style.textAlign="initial",p.paddingTop&&(b.properties.style.marginTop=p.paddingTop),p.paddingLeft&&(b.properties.style.marginLeft=p.paddingLeft),p.paddingRight&&(b.properties.style.marginRight=p.paddingRight),p.paddingBottom&&(b.properties.style.marginBottom=p.paddingBottom),
b;e=l.extent;p=e.x+"px";e=e.y+"px";return b("div",{className:l.styleClasses.join(" "),style:{width:p,height:e}},[])}},{key:"renderSelectionLayer",value:function(b,e,l,p){l=void 0===l?!1:l;p=void 0===p?2:p;if(!e)return[];var q=b.textLayout,u=e.start,w=e.end,y=e.cursorVisible,A=e.selectionColor,C=b.document,E=b.cursorColor,L=e.isReverse();u=q.boundsFor(b,u);var I=q.computeMaxBoundsForLineSelection(b,e),V=q.boundsFor(b,w);ye.pt(u.x,I.y);I=ye.pt(V.x,V.y);w=u.height;V=V.height;u=L?ye.pt(u.x,u.y):I;l=this.cursor(u,
L?w:V,y,l,p,E);if(e.isEmpty())return[l];p=[];y=e.start.row;E=C.computeVerticalOffsetOf(y)+b.padding.top();L=b.padding.left();for(var T,Y,na;y<=e.end.row;){w=C.getLine(y);if(!(y<b.viewState.firstVisibleRow-50)){if(y>b.viewState.lastVisibleRow+50)break;u=q.charBoundsOfRow(b,y).map(ye.Rectangle.fromLiteral);V=y==e.start.row;if(na=u[0].bottom()<ye.arr.last(u).top()){I=q.rangesOfWrappedLine(b,y).map(function(P){return P.intersect(e)});Y=V;var Ba=0,F=T=void 0,W=$jscomp.makeIterator(I);for(I=W.next();!I.done;I=
W.next())I=I.value,I.isEmpty()||(T=u.slice(I.start.column,I.end.column),Ba=Y?ye.arr.min(T.map(function(P){return P.top()})):Ba,F=ye.arr.max(T.map(function(P){return P.bottom()})),Y=T[0],I=ye.pt(L+Y.left(),E+Ba),Y=ye.arr.last(T),T=ye.pt(L+Y.right(),E+F),Ba=F,Y=!1,p.push(ye.Rectangle.fromAny(I,T)))}na||(na=y==e.end.row,I=V?e.start.column:0,Ba=na?e.end.column:u.length-1,V=V&&ye.arr.min(u.slice(I,Ba+1).map(function(P){return P.top()}))||0,W=I>=Ba?5:0,Y=u[I],I=ye.pt(L+(Y?Y.left():ye.arr.last(u).right()),
E+V),Y=u[Ba],e.includingLineEnd?T=ye.pt(b.width-b.padding.right(),E+V+w.height):(na=na&&e.end.column<=u.length-1,T=ye.pt(L+(Y?na?Y.left():Y.right():ye.arr.last(u).right())+W,E+V+w.height)),p.push(ye.Rectangle.fromAny(I,T)))}E+=w.height;y++}b=this.selectionLayerRounded(p,A,b);b.push(l);return b}},{key:"selectionLayerRounded",value:function(b,e,l){var p=[l={left:[],right:[]}];b=$jscomp.makeIterator(b);for(var q=b.next();!q.done;q=b.next()){q=q.value;u&&(u.left()>q.right()||u.right()<q.left())&&p.push(l=
{left:[],right:[]});l.left.push(q.topLeft(),q.bottomLeft());l.right.push(q.topRight(),q.bottomRight());var u=q}u=[];l={};p=$jscomp.makeIterator(p);for(b=p.next();!b.done;l={$jscomp$loop$prop$pos$2707:l.$jscomp$loop$prop$pos$2707},b=p.next())if(b=b.value,b.left.length){l.$jscomp$loop$prop$pos$2707=b.left.reduce(function(L,I){return L.minPt(I)});q=b.left.concat(b.right.reverse());b=[];for(var w=0;w<q.length;w++){var y=q[w-1]||ye.arr.last(q),A=q[w],C=q[w+1]||ye.arr.first(q),E=y.subPt(A).normalized().scaleBy(6);
y=A.addPt(E);y._next=E.scaleBy(-1);C=C.subPt(A).normalized().scaleBy(6);A=A.addPt(C);A._prev=C.scaleBy(-1);b.push(y,A)}b=b.map(function(L){return function(I){return{position:I.subPt(L.$jscomp$loop$prop$pos$2707),isSmooth:!0,controlPoints:{next:I._next||ye.pt(0),previous:I._prev||ye.pt(0)}}}}(l));q=ye.getSvgVertices(b);A=b.map(function(L){return L.position}).reduce(function(L,I){return L.minPt(I)});w=A.y;A=A.x;b=b.map(function(L){return L.position}).reduce(function(L,I){return L.maxPt(I)});u.push(ye.h("svg",
{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2707.x+"px",top:l.$jscomp$loop$prop$pos$2707.y+"px",width:b.x-A,height:b.y-w}},ye.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:q,fill:e.toString()}})))}return u}},{key:"cursor",value:function(b,e,l,p,q,u){return ye.h("div",{className:"newtext-cursor"+(p?" diminished":""),style:{left:b.x-Math.ceil(q/2)+"px",top:b.y+"px",width:q+"px",height:e+"px",display:l?"":"none",background:u||
"black"}})}},{key:"renderMarkerLayer",value:function(b){var e=b.markers,l=b.textLayout,p=b.viewState,q=p.firstVisibleRow;p=p.lastVisibleRow;var u=[];if(!e)return u;e=$jscomp.makeIterator(e);for(var w=e.next();!w.done;w=e.next()){var y=w.value;w=y.style;y=y.range;var A=y.start;y=y.end;if(!(y.row<q||A.row>p))if(A.row===y.row)u.push(this.renderMarkerPart(l,b,A,y,w));else{u.push(this.renderMarkerPart(l,b,A,b.lineRange(A.row).end,w));for(A=A.row+1;A<=y.row-1;A++){var C=b.lineRange(A);u.push(this.renderMarkerPart(l,
b,C.start,C.end,w,!0))}u.push(this.renderMarkerPart(l,b,{row:y.row,column:0},y,w))}}return u}},{key:"renderMarkerPart",value:function(b,e,l,p,q,u){u=void 0===u?!1:u;var w=e.document;var y=w.getLine(l.row);u?(b=e.padding,u=b.left(),l=b.top()+w.computeVerticalOffsetOf(l.row),b=u+y.width,y=y.height):(y=b.boundsFor(e,l),u=y.x,l=y.y,y=b.boundsFor(e,p),b=y.x,y=y.height);y=Math.ceil(y);return ye.h("div.newtext-marker-layer",{style:Object.assign({},q,{left:u+"px",top:l+"px",height:y+"px",width:b-u+"px"})})}},
{key:"renderDebugLayer",value:function(b){var e=[],l=b.viewState,p=l.heightBefore,q=l.firstVisibleRow,u=l.lastVisibleRow;l=l.visibleLines;var w=b.padding,y=b.scroll,A=y.x,C=y.y;y=w.left();var E=w.right(),L=w.top();w.bottom();e.push(ye.h("div.debug-info",{style:{left:A+y+"px",top:C+"px",width:b.width-E+"px"}},ye.h("span","visible rows: "+q+" - "+u)));for(w=0;q<u;w++,q++){var I=l[w];C=b.textLayout.lineCharBoundsCache.get(I);I=I.height;e.push(ye.h("div.debug-line",{style:{left:A+y+"px",top:L+p+"px",
width:b.width-E+"px",height:I+"px"}},ye.h("span",String(q))));if(C)for(var V=0;V<C.length;V++){var T=C[V];e.push(ye.h("div.debug-char",{style:{left:y+T.x+"px",top:L+p+T.y+"px",width:T.width+"px",height:T.height+"px"}}))}p+=I}return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9196,end:36226})}(void 0),eoa=d6=ye.TextRenderer;ye.extractHTMLFromTextMorph=PG;ye.extractHTMLFromTextMorph=PG;ye.default=d6;var Pm=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Pm.arr=Ke;Pm.eqPosition=lp;Pm.KeyHandler=WP;Pm.commands={activate:{name:"[IyGotoChar] activate",exec:function(a,d){d=void 0===d?{backwards:!1}:d;Pm.IyGotoCharKeyHandler.installInto(a,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",
exec:function(a,d){a.saveMark();var k=a.selection,b=k.lead,e=b.row,l=b.column;b=!!a.activeMark||!k.isEmpty();var p={row:e,column:l-1};a=a.document[d.backwards?"scanBackward":"scanForward"](p,function(q,u){return q!==d.needle||Pm.eqPosition(p,u)?null:u});if(!a)return!0;a.column++;k.lead=a;b||(k.anchor=a);return!0},multiSelectAction:"forEach",readOnly:!0}};var AJ=Pm.commands.activate;Pm.activate=AJ;Pm.activate=AJ;Pm.activate=AJ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),
k=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:d.IyGotoCharKeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?!1:b;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=b}},
{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(b){b._cachedKeyhandlers=null;Pm.arr.remove(b._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(b,e){var l=e.keyCombo,p=l.startsWith("input-");if(e.onlyModifiers||l.startsWith("Shift-")||!p&&!e.isModified&&!e.isFunctionKey)return{command:"null",passEvent:!0};e=p&&l.slice(6);if(!this.charToFind)if(p)this.charToFind=e;else return this.uninstallFrom(b),null;return e!==this.charToFind?(this.uninstallFrom(b),
null):{command:Pm.commands.moveTo,args:{backwards:this.backwards,needle:e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(b,e){e=void 0===e?!1:e;b.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(b)});b._cachedKeyhandlers=null;b._keyhandlers=(b._keyhandlers||[]).concat(new this(e))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(Pm.KeyHandler);var Wg=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");Wg.chain=pm;Wg.arr=Ke;Wg.string=rg;Wg.date=op;Wg.pt=bh;Wg.Range=rs;Wg.eqPosition=lp;Wg.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row);
return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var k=a.selection,b=k.text,e=d.hasOwnProperty("collapseSelection")?d.collapseSelection:!0;a.saveMark(k.anchor);a.activeMark=null;(k.isMultiSelection?k.selections.slice():[k]).forEach(function(l){var p=l.isEmpty()?a.lineRange():l.range,q=a.textInRange(p);a.env.eventDispatcher.killRing.add(q);
d.delete?a.deleteText(p):!l.isEmpty()&&e&&l.collapse(l.lead)});d.dontTryNativeClipboard||a.env.eventDispatcher.doCopy(b);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",
exec:function(a,d){d=void 0===d?{killRingCycleBack:!1}:d;var k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=a.env.eventDispatcher.killRing;d.killRingCycleBack&&(Wg.arr.last(Wg.arr.pluck(a.commandHandler.history,"name"))||"").includes("clipboard paste")&&(k=b.back());!k&&b.isCycling()&&(k=b.yank());k||(k=b.yank());a.selection.isMultiSelection?(a.undoManager.group(),a.selection.selections.slice(0,-1).reverse().map(function(l,p){p=b.pointer-1-p;0>p&&(p=b.buffer.length-1);return{selection:l,
pasted:b.buffer[p]||""}}).concat({selection:a.selection.defaultSelection,pasted:k}).forEach(function(l){return l.selection.text=l.pasted}),a.undoManager.group()):k&&(a.undoManager.group(),a.selection.text=k,a.undoManager.group());return e.return(!0)})}},{name:"browse clipboard",exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=a.env.eventDispatcher.killRing,k=d.pointer,b=d.buffer,e=b.map(function(u){return{isListItem:!0,string:Wg.string.truncate(u,
80).replace(/\n/g,""),value:u}}),q.yield(a.world().filterableListPrompt("select items to paste",e,{preselect:k,multiSelect:!0}),2);l=q.yieldResult;p=l.selected;p.length&&(a.undoManager.group(),a.insertTextAndSelect(p.join("\n")),a.undoManager.group());return q.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(a){a.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(a){a.textRedo();return!0}},{name:"select all",
doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.saveMark();a.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(a){if(a.rejectsInput())return!1;if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&a.editorPlugin.cmd_delete_backwards())return!0;var d=a.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},
{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(a){var d=a.selection;if(a.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();a.withSelectedLinesDo(function(d,k){return a.insertText(a.tab,k.start)});a.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();
a.withSelectedLinesDo(function(d,k){return d.startsWith(a.tab)&&a.deleteText({start:k.start,end:{row:k.start.row,column:a.tab.length}})});a.undoManager.group();return!0}},{name:"indent according to mode",exec:function(a,d){d=void 0===d?{}:d;var k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){k=a.editorPlugin&&a.editorPlugin.mode;if(!k)return y.return(!0);l=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?
(p=d,b=p.firstRow,e=p.lastRow):a.selection.isEmpty()?b=e=a.cursorPosition.row:(q=a.selection.selectedRows,b=q.first,e=q.last);return y.yield(System.import("lively.ide/editor-modes.js"),2)}u=y.yieldResult;w=u.indentLines;l&&a.undoManager.group();w(a,k,b,e,"smart",!0,d);l&&a.undoManager.group();return y.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(a){var d=a.snippets.find(function(k){return k.canExpand(a)});return d?(d.expandAtCursor(a),!0):a.selection.isEmpty()?
a.execCommand("insertstring",{string:a.tab}):a.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=a.snippets.map(function(p){return{isListItem:!0,string:p.trigger+" - "+p.expansion,value:p}}),l.yield(a.world().filterableListPrompt("select snippet",d,{requester:a}),2);k=l.yieldResult;b=$jscomp.makeIterator(k.selected);(e=b.next().value)&&e.expandAtCursor(a);
return l.return(!0)})}},{name:"transpose chars",exec:function(a){if(a.selection.isEmpty()){var d=a.cursorPosition,k=d.row,b=d.column;d=Wg.Range.create(k,b-1,k,b+1);var e=a.getLine(k);k=e[b-1];b=e[b];k&&b&&a.replace(d,b+k,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(a){var d=a.selection.selections;a.undoManager.group();d.reduce(function(k,b){var e=b.text;b.text=k;return e},Wg.arr.last(d).text);a.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(a){a.activeMark?a.selection.selectLeft(1):a.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(a){a.activeMark?a.selection.selectRight(1):a.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(a){a.activeMark?a.selection.selectUp(1):a.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(a){a.activeMark?a.selection.selectDown(1):a.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(a){a.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(a){a.selection.selectRight(1);return!0}},{name:"select up",exec:function(a){a.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(a){a.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(a){var d=a.selection,k=d.lead.row,b=a.lineRange(k,!1);d.range=d.range.equals(b)?a.lineRange(k,!0):b;return!0}},{name:"goto line start",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection,b=k.lead;
a=a.screenLineRange(b,!0);k.lead=Wg.eqPosition(b,a.start)?{column:0,row:b.row}:a.start;!d&&(k.anchor=k.lead);return!0}},{name:"goto line end",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection;a=a.screenLineRange(k.lead,!0);k.lead=a.end;!d&&(k.anchor=k.lead);return!0}},{name:"goto page up",exec:function(a){a.pageUpOrDown({direction:"up",select:!!a.activeMark});return!0}},{name:"goto page down",exec:function(a){a.pageUpOrDown({direction:"down",select:!!a.activeMark});
return!0}},{name:"goto page up and select",exec:function(a){a.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(a){a.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeAbove(a.cursorPosition.row);k.start.row--;a.selection.lead=k.start;d.select||a.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeBelow(a.cursorPosition.row);k.end.row++;a.selection.lead=k.end;d.select||a.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,
k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<b)k.row=b;else if(k.row<l)k.row=l;else if(k.row<e)k.row=e;else return!0;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<=b)return!0;
k.row=k.row<=l?b:k.row<=e?l:e;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto line",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=!!a.activeMark,k=Number,e.yield(a.world().prompt("Enter line number"),2);b=k(e.yieldResult);isNaN(b)||(d?a.selection.lead={row:b,column:0}:a.cursorPosition={row:b,column:0},a.scrollCursorIntoView(),a.focus());return e.return(!0)})}},{name:"join line",exec:function(a,
d){d=void 0===d?{withLine:"before"}:d;var k=a.selection,b=k.start,e=k.end;k=k.lead;if(!a.selection.isEmpty()){if(b.row===e.row)return!0;d=a.undoManager.ensureNewGroup(a,"join line");e=Wg.arr.range(0,e.row-1-b.row).map(function(l){return a.joinLine(b.row)});a.undoManager.group(d);a.selection.isMultiSelection&&(a.cursorPosition=e[0],e.slice(1).forEach(function(l){return a.selection.addRange({start:l,end:l})}));return!0}e=k.row;if("before"===d.withLine&&0>=e||"after"===d.withLine&&e>=a.document.endPosition.row)return!0;
a.undoManager.group();a.cursorPosition=a.joinLine("before"===d.withLine?e-1:e);a.undoManager.group();return!0}},{name:"split line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row).match(/^\s*/)[0].length;a.insertText("\n"+" ".repeat(k),d);a.cursorPosition=d;return!0}},{name:"insert line",exec:function(a,d){d=void 0===d?{where:"above"}:d;var k=a.cursorPosition.row,b=a.getLine(k).match(/^\s*/)[0].length;"below"===d.where&&k++;a.insertText(" ".repeat(b)+"\n",{column:0,row:k});a.cursorPosition=
{column:b,row:k};return!0}},{name:"duplicate line or selection",exec:function(a){a.undoManager.group();var d=a.selection.end;if(a.selection.isEmpty())a.insertText(a.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var k=a.selection.range;a.insertText(a.selection.text,d);a.selection=k}a.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row);if(Wg.eqPosition(a.document.endPosition,d))return!0;d=k.trim()?{start:d,end:{row:d.row,
column:k.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};a.env.eventDispatcher.doCopy(a.textInRange(d));a.undoManager.group();a.deleteText(d);a.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(a){a.activeMark&&(a.activeMark=null);if(!a.selection.isEmpty())return a.selection.text="",!0;var d=a.lineRange(),k=a.cursorPosition;if(Wg.eqPosition({row:k.row,column:0},k))return!0;d={start:Wg.eqPosition(d.start,k)?{row:k.row,column:0}:d.start,end:k};
a.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(Wg.Range.compare).forEach(function(l){a.selection=l;a.execCommand("move lines up")});k.forEach(function(l){l.start.row--;l.end.row--});a.selection.ranges=k;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);k=d.start;d=d.end;var b=a.getLine(k.row-1),e=a.undoManager.ensureNewGroup(a);a.insertText(b+
"\n",{row:d.row+1,column:0});a.deleteText({start:{row:k.row-1,column:0},end:{row:k.row,column:0}});a.undoManager.group(e);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(Wg.Range.compare).reverse().forEach(function(l){a.selection=l;a.execCommand("move lines down")});k.forEach(function(l){l.start.row++;l.end.row++});a.selection.ranges=k;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var b=d.range,e=b;k=e.start;e=e.end;d.isEmpty()?b={start:{row:k.row,column:0},end:{row:k.row+1,column:0}}:0!==e.column&&(b={start:k,end:{row:e.row+1,column:0}});d=a.undoManager.ensureNewGroup(a);b=a.deleteText(b);a.insertText(b,{row:k.row+1,column:0});a.undoManager.group(d);a.selection={start:Object.assign({},k,{row:k.row+1}),end:Object.assign({},e,{row:e.row+1})};return!0}},{name:"old select word",exec:function(a){var d=a.selection;d.range=a.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(a){var d=a.selection;if(a=a.selectMatchingBrackets(a.textString,a.positionToIndex(d.lead)))d.range={start:a[0],end:a[1]+1};return!0}},{name:"select word right",exec:function(a){var d=a.selection;d.anchor=a.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordLeft().range;a.selection.lead=k.start;d||(a.selection.anchor=k.start);return!0}},{name:"goto word right",
exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordRight().range;a.selection.lead=k.end;d||(a.selection.anchor=k.end);return!0}},{name:"delete word right",exec:function(a){a.undoManager.group();var d=a.wordRight().range.end;d={start:a.cursorPosition,end:d};a.env.eventDispatcher.doCopy(a.textInRange(d));a.deleteText(d);a.undoManager.group();return!0}},{name:"delete word left",exec:function(a){a.undoManager.group();var d={start:a.wordLeft().range.start,end:a.cursorPosition};
a.deleteText(d);a.undoManager.group();return!0}},{name:"goto matching right",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(k=a.findMatchingForward(a.cursorPosition,"right",k)||a.findMatchingForward(a.cursorPosition,"left",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto matching left",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(k=a.findMatchingBackward(a.cursorPosition,"left",k)||a.findMatchingBackward(a.cursorPosition,"right",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){var d=a.charBoundsFromTextPosition(a.cursorPosition),k=d.topLeft();d=a.height-d.height;var b=a.scroll,e=b.x;b=b.y;
b=2>Math.abs(k.y-b)?k.y-d:2>Math.abs(k.y-b-.5*d)?k.y:k.y-.5*d;a.scroll=Wg.pt(e,b);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(a){var d=a.selection;if(d.isEmpty()){var k=a.popSavedMark();k&&(a.saveMark(a.cursorPosition),d.lead=k.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){var b=a.activeMark;d=a.selection;var e=!d.isEmpty();if(4===k){if(a=a.popSavedMark())d.lead=
a.position,e||(d.anchor=d.lead);return!0}if(!b&&!e)return a.activeMark=d.lead,!0;a.saveMark(b||d.anchor);a.activeMark=null;e&&(a.inMultiSelectMode()?d.selections:[d]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(a,d,k){function b(u,w,y){if(u.length<=e)return[w+u.trim()];y=u.slice(0,e);var A=Wg.arr.last(Wg.string.reMatches(y,p)),C=A&&0<A.start?A.start:e;A=y.slice(0,C);u=w+(y.slice(C)+u.slice(e)).trimLeft();
return[A].concat(b(u,w))}if(4===k)return a.execCommand("join line");a.selection.isEmpty()&&a.selectLine();d=a.selection;var e=k||80,l=d.selectedRows;k=d.range;var p=/[ ]+/g,q=/^[\s\t]+/;d=Wg.string.paragraphs(Wg.arr.range(l.first,l.last).map(function(u){return a.getLine(u)}).join("\n"),{keepEmptyLines:!0});d=Wg.chain(d.map(function(u){if(!/^\s*$/.test(u)){u=u.split("\n").join(" ");if(""===u.trim())u=[""];else{var w=u.match(q);w=w?w[0]:"";u=b(w+u.trim(),w)}u=u.join("\n")+"\n"}return u})).flatten().value().join("\n");
a.undoManager.group();a.replace(k,d);a.undoManager.group();return!0}},{name:"lowercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toLowerCase();a.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(a){a.undoManager.group();var d=0;a.withLinesDo(0,a.documentEndPosition.row,function(k,b){return k.match(/\s+$/)&&++d&&a.replace(b,k.trimRight())});a.world().setStatusMessage(d+" lines cleaned up");
a.undoManager.group();return!0}},{name:"uppercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toUpperCase();a.undoManager.group();return!0}},{name:"newline",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row),b=k.match(/^\s*/)[0].length;a.undoManager.group();!k.trim()&&b&&(a.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:b}}),d.column=0);if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&
a.editorPlugin.cmd_newline(d,k,b))return!0;a.selection.text="\n"+" ".repeat(b);a.selection.collapseToEnd();a.undoManager.group();return!0}},{name:"insertstring",exec:function(a,d){var k=d=void 0===d?{string:null,undoGroup:!1}:d;d=k.string;k=k.undoGroup;var b="string"===typeof d&&d.length;b||console.warn("command insertstring called with not string value");if(a.rejectsInput()||!b)return!1;a.saveActiveMarkAndDeactivate();if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_insertstring&&a.editorPlugin.cmd_insertstring(d))return!0;
b=a.selection;var e=!b.isEmpty();e&&a.undoManager.group();var l=b.lead;b.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<l.column));b.collapseToEnd();e&&a.undoManager.group();k&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof k?a.undoManager.group():a.undoManager.groupLater(k));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.keepPosAtSameScrollOffsetWhile(function(){return a.lineWrapping=a.lineWrapping?!1:a.fontMetric.isProportional(a.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d,k,b){a.env.eventDispatcher.resetKeyInputState();a.selection.disableMultiSelect&&a.selection.disableMultiSelect();a.selection.isEmpty()||(a.selection.anchor=a.selection.lead);a.activeMark&&(a.activeMark=null);return!0}}];Wg.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(a,d,k){d=Wg.date.format(new Date,k?"mediumDate":"isoDate");a.undoManager.group();a.insertText(d);
a.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(a){var d=a.selection;d.isEmpty()&&a.selectLine();a=/\[\s*\]/g;var k=/\[X\]/g,b=d.text;b=a.test(b)?b.replace(a,"[X]"):k.test(b)?b.replace(k,"[ ]"):"[ ] "+b.trimLeft();d.text=b;return!0}},{name:"selected lines: sort",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){var l=b.findIndex(function(p){return p>e});-1<l?b.splice(l,0,e):b.push(e)});a.undoManager.group();a.replace({start:{row:k,
column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){return b.push(e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.reverse().join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,
d,function(e){return Wg.arr.pushIfNotIncluded(b,e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){function b(C,E){var L,I,V=e(C).trim();"uppercased"===V?L=/\s*[A-Z0-9]+/g:"dashed"===V?L=/-\w/g:"spaced"===V&&(L=/\s+.?/g);"uppercased"===E?I=function(T){return T.trim().replace(/^-/,"").toUpperCase()}:"dashed"===E?I=function(T){return"-"+
T.trim().replace(/^-/,"").toLowerCase()}:"spaced"===E&&(I=function(T){return" "+T.trim().replace(/^-/,"").toLowerCase()});return C.replace(L,I)}function e(C){return C.match(/[A-Z]/)?"uppercased":C.match(/-/)?"dashed":C.match(/\s/)?"spaced":"unknown"}var l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress){a.selection.isEmpty()&&(a.selection=a.wordAt().range);l=a.selection.ranges;p=a.textInRange(l[0]);if(!p)return a.setStatusMessage("Please select some text"),
C.return(!0);q=e(p);u=Wg.arr.without(["uppercased","dashed","spaced"],q);return C.yield(a.world().listPrompt("Convert "+q+" into?",u,{}),2)}w=C.yieldResult;y=$jscomp.makeIterator(w.selected);A=y.next().value;if(!A)return C.return(!0);a.undoManager.group();l.forEach(function(E,L){L=a.textInRange(E);L=b(L,A);a.replace(E,L)});a.undoManager.group();a.focus();return C.return(!0)})}},{name:"spell check word",exec:function(a,d){var k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return k=
a.wordAt(),k.string?w.yield(System.import("lively.ide/shell/spell-checker.js"),2):(a.setStatusMessage("no word for spellcheck!"),w.return(!0));case 2:return b=w.yieldResult,e=b.spellCheckWord,w.yield(e(k.string),3);case 3:return l=w.yieldResult,l.length?w.yield(a.world().filterableListPrompt("Choose replacement for "+k.string,l),4):(a.setStatusMessage("no suggestions for word "+k.string),w.return(!0));case 4:p=w.yieldResult;q=$jscomp.makeIterator(p.selected);if(u=q.next().value)a.undoManager.group(),
a.replace(k.range,u),a.undoManager.group();return w.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(a,d){var k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return b=(k=a.textInRange(a.selection))&&0!==k.length?{stdin:k}:{},y.yield(a.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return e=y.yieldResult,y.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=y.yieldResult;p=l.runCommand;if(!e)return y.return(a.setStatusMessage("No command entered, aborting...!"));q=p(e,b);y.setCatchFinallyBlocks(4);return y.yield(q.whenDone(),6);case 6:u=q.output.trim();a.undoManager.group();a.selection.selections.forEach(function(A){return A.text=u});a.undoManager.group();y.leaveTryBlock(5);break;case 4:w=y.enterCatchBlock(),a.showError(w);case 5:return y.return(!0)}})}},{name:"open file at cursor",exec:function(a,d){var k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return a.getLine(),k=a.cursorPosition.row,b=a.document.scanBackward(a.cursorPosition,function(C,E){return(0>=E.column||C.match(/\s/))&&E})||{row:0,column:0},e=a.document.scanForward(a.cursorPosition,function(C,E){return(E.row!=k||C.match(/\s/))&&E})||a.documentEndPosition,l=a.textInRange({start:b,end:e}).replace(/\s/g,""),p=l.split(":"),q=p[0].match(/^file|http/)?p.shift()+":"+p.shift():p.shift(),p[0].match(/^[0-9]+$/)&&(q+=":"+p.shift()),A.yield(System.import("lively.ide/text-editor.js"),
2);u=A.yieldResult;w=u.default;y=w.openInWindow();y.location=q;return A.return(y)})}},{name:"run code on text morph",doc:"...",exec:function(a,d){var k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return k={targetModule:"lively://code-on-text-morph",context:a},q.yield(a.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:a,mode:"js",evalEnvironment:k,historyId:"run-code-on-text-morph-hist"}),2);case 2:return b=
q.yieldResult,q.setCatchFinallyBlocks(3),a.undoManager.group(),q.yield(lively.vm.runEval(b,k),5);case 5:l=q.yieldResult;a.undoManager.group();e=l.isError?l.value:null;q.leaveTryBlock(4);break;case 3:e=p=q.enterCatchBlock();case 4:return e&&a.showError(e),q.return(void 0)}})}},{name:"change editor mode",exec:function(a){var d,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return d=function(A){return!A.endsWith("ide/editor-plugin.js")&&A.endsWith("editor-plugin.js")},
y.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return k=y.yieldResult,b=a.editorPlugin||{},e=b.shortName,l=0,p=["<no mode>"].concat(k.map(function(A,C){var E=A.url.match(/([^\/]+)\/editor-plugin.js/)[1];E===e&&(l=C);return{isListItem:!0,string:E,value:A}})),y.yield(a.world().filterableListPrompt("choose mode",p,{requester:a,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:q=y.yieldResult;u=$jscomp.makeIterator(q.selected);w=u.next().value;
if(!w)return y.return();if("<no mode>"!==w){y.jumpTo(4);break}return y.yield(a.changeEditorMode(null),5);case 5:return a.resetTextAttributes(),y.return();case 4:if(w.isLoaded){y.jumpTo(6);break}return y.yield(lively.modules.module(w.url).load(),6);case 6:return y.yield(a.changeEditorMode(w.url),0)}})}},{name:"report token at cursor",exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){d=a.tokenAt(a.cursorPosition)||{};k=d.token;b=d.start;e=d.end;a.setStatusMessage(k?
k+" "+b.column+" => "+e.column:"no token");return l.return(!0)})}}];Wg.commands.push.apply(Wg.commands,$jscomp.arrayFromIterable(Wg.usefulEditorCommands));Wg.iyGotoCharActivate=AJ;Wg.commands.push(Wg.iyGotoCharActivate);Wg.searchCommands=yJ;Wg.commands.push.apply(Wg.commands,$jscomp.arrayFromIterable(Wg.searchCommands));var e6=Wg.commands;Wg.default=e6;var Kc=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Kc.Rectangle=Od;Kc.Point=tf;Kc.rect=wk;Kc.Color=of;Kc.pt=bh;Kc.string=rg;
Kc.num=Dj;Kc.obj=df;Kc.fun=Qj;Kc.promise=Vf;Kc.arr=Ke;Kc.signal=xk;Kc.noUpdate=ir;Kc.connect=Jj;Kc.disconnect=No;Kc.bowser=zn;Kc.morph=$i;Kc.touchInputDevice=Ll;Kc.sanitizeFont=Sy;Kc.config=ok;Kc.Morph=Vi;Kc.Selection=vJ;Kc.MultiSelection=wJ;Kc.Document=boa;Kc.objectReplacementChar="\ufffd";Kc.Anchor=Ux;Kc.Range=rs;Kc.eqPosition=lp;Kc.lessPosition=kp;Kc.KeyHandler=WP;Kc.UndoManager=gB;Kc.TextSearcher=xJ;Kc.TextLayout=doa;Kc.Renderer=eoa;Kc.extractHTMLFromTextMorph=PG;Kc.commands=e6;Kc.textAndAttributesWithSubRanges=
OG;Kc.serializeMorph=bA;Kc.deserializeMorph=cA;Kc.getSvgVertices=fw;Kc.renderSubTree=OD;Kc.ShadowObject=An;Kc.getClassName=Pn;var Go=za("K",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),k=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=
b=void 0===b?{}:b,l=e.position,p=e.rightCenter,q=e.leftCenter,u=e.topCenter,w=e.bottom,y=e.top,A=e.right,C=e.left,E=e.bottomCenter,L=e.bottomLeft,I=e.bottomRight,V=e.topRight,T=e.topLeft;e=e.center;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==p&&(this.rightCenter=p);void 0!==q&&(this.leftCenter=q);void 0!==u&&(this.topCenter=u);void 0!==w&&(this.bottom=w);void 0!==y&&
(this.top=y);void 0!==A&&(this.right=A);void 0!==C&&(this.left=C);void 0!==E&&(this.bottomCenter=E);void 0!==L&&(this.bottomLeft=L);void 0!==I&&(this.bottomRight=I);void 0!==V&&(this.topRight=V);void 0!==T&&(this.topLeft=T);void 0!==e&&(this.center=e)}},{key:"__deserialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Kc.Renderer(this.env);this.textLayout=new Kc.TextLayout(this);
this.changeDocument(Kc.Document.fromString(""));this.ensureUndoManager();b.cachedLineBounds&&(this._initializedByCachedBounds=b.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(b,e,l){var p=this;Kb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this._isDeserializing=!1;this.whenRendered().then(function(){p.embeddedMorphs.forEach(function(q){return q.top=0})})}},{key:"__only_serialize__",get:function(){return Kc.arr.withoutAll(Kb._get(Object.getPrototypeOf(k.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);b.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(E){return Kc.obj.select(E,
["start","end"])})};b.props.anchors&&this.selection.isEmpty()&&(b.props.anchors.value=b.props.anchors.value.filter(function(E){return!E.id.includes("selection-")}));b.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(E){if(!E)return E;if(E.isMorph)return l.ref(E).asRefForSerializedObjMap();if(Kc.obj.isObject(E)){var L={};E=JSON.stringify(E,function(I,V){return V&&V.__serialize__?(V=V.__serialize__(),Object.assign(L,V.bindings),"->["+(V.__expr__+"]")):V});E=
E.replace(/"->\[.*\]"/g,function(I){return I.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+E+")",bindings:L})}return E})};e=[];p=$jscomp.makeIterator(this.document.lines);for(var q=p.next();!q.done;q=p.next()){q=q.value;var u=this.textLayout.lineCharBoundsCache.get(q);if(u){var w=[],y=void 0,A=0;if(u){u=$jscomp.makeIterator(u);for(var C=u.next();!C.done;C=u.next()){C=C.value;if(y){if(Kc.num.roundTo(y.width,.001)==Kc.num.roundTo(C.width||0,.001)&&C.height==y.height){A++;
continue}w.push([A,Kc.num.roundTo(y.width||0,.001),y.height||0])}A=1;y=C}}y&&w.push([A,Kc.num.roundTo(y.width||0,.001),y.height||0]);e.push([q.row,Kc.arr.flatten(w)])}}b.cachedLineBounds=e}},{key:"spec",value:function(){var b=Kb._get(Object.getPrototypeOf(k.prototype),"spec",this).call(this);b.textString=this.textString;return Kc.obj.dissoc(b,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Kb._get(Object.getPrototypeOf(k.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(b){var e=this,l=b.prop,p=b.selector,q=b.meta,u=this.lineWrapping,w=!1,y=!1,A=!1,C=!1,E=!1,L=!1;if(p)w="replace"===p,C="addTextAttribute"===p,this._displacementChange=!this._displacing&&w;else switch(l){case "scroll":E=y=!0;break;case "extent":y=!0;l=b.prevValue.subPt(b.value);L=(A=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":u&&(C=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":C=b.prevValue!=b.value;break;case "lineWrapping":C=!0;break;case "borderWidth":case "fixedHeight":A=b.prevValue!=b.value;break;case "padding":A=!0}Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);l=function(){e._textChange=
!0;E&&(e.viewState.wasScrolled=!0);(C||L||A&&!q.styleSheetChange)&&e.invalidateTextLayout(C,C);(A||C)&&e.document&&e.world()&&e.document.lines.forEach(function(I){return I.hasEstimatedExtent=!0});e._displacementChange&&(e._displacementChange=!1);w&&Kc.signal(e,"textChange",b);y&&Kc.signal(e,"viewChange",b);e._textChange=!1};q.animation?Kc.promise.delay(q.animation.duration).then(l):this.ownerChain().every(function(I){return I.visible})&&l()}},{key:"onSubmorphChange",value:function(b,e){var l=this,
p,q,u,w,y,A,C,E,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){if(b.meta&&b.meta.styleSheetChange)return I.return();Kb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",l).call(l,b,e);return b.meta.animation?I.yield(b.meta.animation.asPromise(),2):I.jumpTo(2)}if(l._textChange||l._positioningSubmorph===e)return I.return();p=b;q=p.prop;u="position"==q||"extent"==q||"scale"==q||"rotation"==q;l.displacingMorphMap.get(e)&&u&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(V){return V.top>=
e.top}).forEach(function(V){l._intersectionShapeCache&&l._intersectionShapeCache.delete(V);l.updateTextDisplacementFor(V)});w=l.embeddedMorphMap.get(e)||{};if((y=w.anchor)&&u){if("position"==q)return l._positioningSubmorph=e,e.position=b.prevValue,l._positioningSubmorph=null,I.return();A=e.bounds();C=e._lastBounds;E=y.position.row;L=l.document.getLine(E);C&&C.height==A.height&&C.bottom()==A.bottom()||(L.hasEstimatedExtent=!0,e._lastBounds=A)}I.jumpToEnd()})}},{key:"removeMorph",value:function(b,e){e=
void 0===e?!0:e;var l=this.embeddedMorphMap,p=this.displacingMorphMap;p&&p.has(b)&&this.toggleTextWrappingAround(b,!1);if(l&&l.has(b)){if(p=l.get(b).anchor){var q=p.position;p=q.row;q=q.column;this.replace({start:{row:p,column:q},end:{row:p,column:q+1}},[],!0,e);this.replace}l.delete(b)}return Kb._get(Object.getPrototypeOf(k.prototype),"removeMorph",this).call(this,b)}},{key:"toggleTextWrappingAround",value:function(b,e){var l=this;if(e)this.displacingMorphMap.has(b)||(this.embeddedMorphMap.has(b)&&
this.addMorph(b.remove()),this.displacingMorphMap.set(b,[]),this.updateTextDisplacementFor(b));else if(e=this.displacingMorphMap.get(b))this._displacing=!0,e.forEach(function(p){return l.removeMorph(p)}),this._displacing=!1,this.displacingMorphMap.delete(b)}},{key:"updateTextDisplacementFor",value:function(b){var e=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(b),p=this.computeDisplacementRectsFor(b).values(),q=[];l.forEach(function(C){return e.removeMorph(C,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,b._displacementRange);p=$jscomp.makeIterator(p);for(var u=p.next();!u.done;u=p.next()){u=u.value;var w=l.shift()||Kc.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),y=this.textLayout.textPositionFromPoint(this,u.leftCenter());w.setBounds(u);this.insertText([w,{}],y);this.viewState._needsFit=!1;if(A==w.top)w.remove();else{var A=w.top;q.push(w)}}l.forEach(function(C){return e.removeMorph(C,!1)});this.displacingMorphMap.set(b,q);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(b){var e=this.textLayout,l=e.textPositionFromPoint(this,b.topLeft),p=e.textPositionFromPoint(this,b.bottomLeft),q=[];b._displacementRange=Kc.Range.fromPositions(l,p);for(l=l.row;l<p.row+1;l++)q.push.apply(q,$jscomp.arrayFromIterable(e.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(p=this._intersectionShapeCache.get(b))||(p=b.isPath?Kc.Shapes.path(Kc.getSvgVertices(b.vertices)):"Ellipse"==Kc.getClassName(b)?
Kc.Shapes.ellipse(b.center.x,b.center.y,b.width/2,b.height/2):Kc.Shapes.rectangle(b.left,b.top,b.width,b.height));this._intersectionShapeCache.set(b,p);b=this.width;l=new Map;q=$jscomp.makeIterator(q);for(var u=q.next();!u.done;u=q.next()){u=u.value;var w=e.computeMaxBoundsForLineSelection(this,u),y=w.height;w=w.y;var A=Kc.Shapes.rectangle(b,y,0,w);A=Kc.Intersection.intersect(A,p);1>A.points.length||(A=Kc.Rectangle.unionPts(A.points.map(Kc.Point.fromLiteral)),A.y=w,A.height=y,A.x-=15,A.width+=30,
l.set(u,A))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(b){if(b){"string"===typeof b&&(b={id:b,row:0,column:0});if(!b.isAnchor){var e=b,l=e.column,p=e.row;b=new Kc.Anchor(e.id,"number"===typeof p&&"number"===typeof l?{row:p,column:l}:void 0,e.insertBehavior||"move")}if(e=b.id&&this.anchors.find(function(q){return q.id===b.id}))return Object.assign(e,b);this.anchors.push(b);return b}}},{key:"removeAnchor",value:function(b){for(var e=this.anchors,
l,p=e.length;p--;){var q=e[p];if(q.id==b||q===b)l=q,e.splice(p,1)}return l}},{key:"addMarker",value:function(b){this.removeMarker(b.id);this.markers.push(b);this.makeDirty();return b}},{key:"removeMarker",value:function(b){var e="string"===typeof b?b:b.id;this.markers=this.markers.filter(function(l){return l.id!==e});this.makeDirty()}},{key:"saveMark",value:function(b,e){b=void 0===b?this.cursorPosition:b;var l=this.activeMark;l&&l!==b&&!l.equalsPosition(b)&&(this.savedMarks=this.savedMarks.concat(l));
e?this.activeMark=b:this.savedMarks=this.savedMarks.concat(b)}},{key:"saveActiveMarkAndDeactivate",value:function(){var b=this.activeMark;b&&(this.saveMark(b),this.activeMark=null)}},{key:"popSavedMark",value:function(){var b=this.activeMark;if(b)return this.activeMark=null,b;b=Kc.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return b}},{key:"lastSavedMark",get:function(){return this.activeMark||Kc.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(b){var e=
this.selection,l=this.savedMarks,p=this.multiSelect?this.multiSelect.getAllRanges().length:1;p=l.length-(p-(e.index||0));e=l[p]||e.anchor;b&&"row"in b&&"column"in b&&(this.savedMarks=l.slice(0,p).concat(b).concat(l.slice(p+1)));return e}},{key:"addPlugin",value:function(b){this.plugins.includes(b)||(this.plugins.push(b),this._cachedKeyhandlers=null,"function"===typeof b.attach&&b.attach(this));return b}},{key:"removePlugin",value:function(b){if(!this.plugins.includes(b))return!1;this._cachedKeyhandlers=
null;Kc.arr.remove(this.plugins,b);"function"===typeof b.detach&&b.detach(this);return!0}},{key:"pluginCollect",value:function(b,e){e=void 0===e?[]:e;this.plugins.forEach(function(l){return"function"===typeof l[b]&&(e=l[b](e))});return e}},{key:"pluginInvokeFirst",value:function(b,e){for(var l=[],p=1;p<arguments.length;++p)l[p-1]=arguments[p];return(p=this.pluginFind(function(q){return"function"===typeof q[b]}))?p[b].apply(p,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(b){return this.plugins.slice().reverse().find(b)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(b){return b.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(b){var e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b=Kc.config.ide.modes.aliases[b]||b,l=(e=/^[^:\\]+:\/\//.test(b))?b:"lively.ide/"+b+"/editor-plugin.js",u.yield(lively.modules.doesModuleExist(l),2);if(3!=u.nextAddress)return u.yieldResult?u.yield(lively.modules.module(l).load(),3):u.return(null);p=u.yieldResult;
q=p.default;return u.return(q)})}},{key:"changeEditorMode",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return l=e.plugins.filter(function(u){return!u.isEditorPlugin}),b?"string"!==typeof b?q.jumpTo(2):q.yield(e.lookupEditorPluginNamed(b),3):(e.plugins=l,q.return(null));if(2!=q.nextAddress){p=q.yieldResult;if(!p)throw Error("Cannot find editor mode "+b);b=new p(Kc.config.codeEditor.defaultTheme);e.evalEnvironment&&(b.evalEnvironment=
e.evalEnvironment)}e.plugins=l.concat(b);return q.return(b)})}},{key:"invalidateTextLayout",value:function(b,e){e=void 0===e?!1:e;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===b?0:b)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,e))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Kb._get(Object.getPrototypeOf(k.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Kc.commands))}},{key:"execCommand",value:function(b,e,l,p){function q(T){(w.hasOwnProperty("scrollCursorIntoView")?w.scrollCursorIntoView:1)&&Kc.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
T.id,100,function(){return T.scrollCursorIntoView()})()}var u=this,w=(this.lookupCommand(b)||{}).command;if(w){var y=this.inMultiSelectMode(),A=w.hasOwnProperty("multiSelectAction")?w.multiSelectAction:"forEach";if(y&&"forEach"===A){var C=this.selection;y=this.selection.selections.slice().reverse();this.selection=y[0];this._multiSelection=C;try{var E=this.execCommand(b,e,l,p)}catch(T){throw this.selection=C,this._multiSelection=null,this.selection.mergeSelections(),T;}if(!E)return E;var L=[E];if("function"===
typeof E.then&&"function"===typeof E.catch)return Kc.promise.finally(Kc.promise.chain([function(){return E}].concat(y.slice(1).map(function(T){return function(){u.selection=T;return Promise.resolve(u.execCommand(b,e,l,p)).then(function(Y){return L.push(Y)})}}))).then(function(){return L}),function(){u.selection=C;u._multiSelection=null;u.selection.mergeSelections()});try{for(var I=$jscomp.makeIterator(y.slice(1)),V=I.next();!V.done;V=I.next())this.selection=V.value,L.push(this.execCommand(b,e,l,p))}finally{this.selection=
C,this._multiSelection=null,this.selection.mergeSelections()}return L}(E=this.commandHandler.exec(b,this,e,l,p))&&("function"===typeof E.then&&"function"===typeof E.catch?E.then(function(){return q(u)}):q(this));return E}}},{key:"changeDocument",value:function(b,e){e=void 0===e?!1:e;if(this.document)var l=this.defaultTextStyle;else e=!1;this.document=b;this.textLayout.reset();e&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(b){return this.document.textInRange(b)}},
{key:"charRight",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e,e+1)}},{key:"charLeft",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e-1,e)}},{key:"indexToPosition",value:function(b){return this.document.indexToPosition(b)}},{key:"positionToIndex",value:function(b){return this.document.positionToIndex(b)}},{key:"getVisibleLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.wrappedLines(this)[b].text}},
{key:"isLineVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineVisible(this,b)}},{key:"isLineFullyVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineFullyVisible(this,b)}},{key:"getLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.getLineString(b)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(b){return!this.getLine(b).trim()}},
{key:"isAtLineEnd",value:function(b){b=void 0===b?this.cursorPosition:b;var e=this.getLine(b.row);return b.column===e.length}},{key:"wordsOfLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.wordsOfLine(b)}},{key:"wordAt",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordAt(b)}},{key:"wordLeft",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordLeft(b)}},{key:"wordRight",value:function(b){b=void 0===b?this.cursorPosition:
b;return this.document.wordRight(b)}},{key:"lineRange",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?!0:e;"number"!==typeof b&&this.cursorPosition.row;var l=this.getLine(b);b={start:{column:0,row:b},end:{column:l.length,row:b}};l=l.match(/^\s*/);l[0].length&&e&&(b.start.column+=l[0].length);return new Kc.Range(b)}},{key:"screenLineRange",value:function(b,e){b=void 0===b?this.cursorPosition:b;return this.textLayout.screenLineRange(this,b,void 0===e?!0:e)}},{key:"insertTextAndSelect",
value:function(b,e){e=void 0===e?null:e;b=String(b);e?this.selection.range=this.insertText(b,e):this.selection.text=b}},{key:"append",value:function(b){var e=this;return this.saveExcursion(function(){return e.insertText(b,e.documentEndPosition)})}},{key:"insertText",value:function(b,e,l,p){e=void 0===e?this.cursorPosition:e;return this.replace({start:e,end:e},b,void 0===l?!0:l,void 0===p?!0:p)}},{key:"deleteText",value:function(b,e){e=void 0===e?!0:e;var l=this.textAndAttributesInRange(b);this.replace(b,
[],!1,e);return l}},{key:"replace",value:function(b,e,l,p,q,u){var w=this;l=void 0===l?!0:l;p=void 0===p?!0:p;q=void 0===q?!0:q;u=void 0===u?!0:u;b=b.isRange?b:new Kc.Range(b);var y="string"===typeof e?[e,null]:Array.isArray(e)?e:[String(e||""),null];e=!y.length||2==y.length&&!y[0];var A=b.isEmpty();if(e&&A)return b;var C;l&&(C=this.textAttributeAt({row:b.start.row,column:b.start.column-(0<b.start.column?1:0)}));var E=[];for(l=0;l<y.length;l+=2)e=y[l],A=y[l+1],e.isMorph&&E.push(e),C&&(y[l+1]=Object.assign({},
C,{},A));q&&this.undoManager.undoStart(this,"replace");var L=this.textAndAttributesInRange(b),I=this.document.replace(b,y,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[b,y],undo:{target:this,selector:"replace",args:[I,L,!1]}},function(){p&&(w.invalidateTextLayout(!1,!1),w.textLayout.resetLineCharBoundsCacheOfRange(w,I));if(!Kc.eqPosition(b.end,I.end)){if(Kc.lessPosition(I.end,b.end)){var V=$jscomp.makeIterator((new Kc.Range(b)).subtract(I)).next().value;
w.anchors.forEach(function(Y){return Y.onDelete(V)})}else{var T=$jscomp.makeIterator((new Kc.Range(I)).subtract(b)).next().value;w.anchors.forEach(function(Y){return Y.onInsert(T)})}w._multiSelection?w._multiSelection.updateFromAnchors():w.selection.updateFromAnchors()}w._updateEmbeddedMorphsDuringReplace(E,I,y,L);w._isDeserializing&&w._initializedByCachedBounds||w.textLayout.estimateLineHeights(w,!1);u&&w.consistencyCheck()});q&&this.undoManager.undoStop();return I}},{key:"_updateEmbeddedMorphsDuringReplace",
value:function(b,e,l,p){for(var q=this.embeddedMorphMap,u=0;u<p.length;u+=2){var w=p[u];if(w.isMorph&&!b.includes(w)){if(q){var y=q.get(w);y&&y.anchor&&(this.removeAnchor(y.anchor),Kc.disconnect(y.anchor,"position",w,"position"));q.set(w,Object.assign({},y,{anchor:null}))}w.remove()}}if(b.length)for(l=Kc.textAndAttributesWithSubRanges(e.start,l),e=l.ranges,l=l.textAndAttributes,p=0;p<e.length;p++)u=l[2*p],u.isMorph&&(console.assert(b.includes(u),"????"),w=e[p].start,u.owner!==this&&this.addMorph(u),
q&&(q.has(u)?q.get(u).anchor.position=w:(w=this.addAnchor(Object.assign({id:"embedded-"+u.id},w)),Kc.connect(w,"position",u,"position",{updater:function(A,C){var E=this.targetObj.owner,L=this.targetObj;C=E&&E.isText?E.charBoundsFromTextPosition(C).topLeft().subPt(E.origin):L.position;E&&(E._positioningSubmorph=L);A(C);E&&(E._positioningSubmorph=!1)}}).update(w.position),q.set(u,{anchor:w}))))}},{key:"applyJsDiffPatch",value:function(b){function e(A,C,E,L){var I=p.indexToPosition(A+E),V=p.indexToPosition(C+
E);L.push(p.deleteText({start:I,end:V}));return E-(C-A)}function l(A,C,E,L){L.push(p.insertText(C,p.indexToPosition(A+E)));return E}var p=this,q=[],u=0,w=0;b=$jscomp.makeIterator(b);for(var y=b.next();!y.done;y=b.next())y=y.value,y.removed?w=e(u,u+y.count,w,q):y.added&&(w=l(u,y.value,w,q)),u+=y.count;return q}},{key:"applyTextChanges",value:function(b,e,l,p){e=void 0===e?0:e;l=void 0===l?!0:l;var q=[];b=$jscomp.makeIterator(b);for(var u=b.next();!u.done;u=b.next()){var w=$jscomp.makeIterator(u.value);
u=w.next().value;var y=w.next().value;w=w.next().value;e&&(y="number"===typeof y?y:this.positionToIndex(y),w&&"string"!==typeof w&&!Array.isArray(w)&&(w=("number"===typeof w?w:this.positionToIndex(w))+e),y+=e);y="number"===typeof y?this.indexToPosition(y):y;switch(u){case "delete":case "remove":u="number"===typeof w?this.indexToPosition(w):w;q.push(this.deleteText({start:y,end:u},p));break;case "insert":q.push(this.insertText(w,y,l,p));break;default:console.warn("[applyTextChanges] unknown type: "+
u)}}return q}},{key:"modifyLines",value:function(b,e,l){var p=this;l=Kc.arr.range(b,e).map(function(q){return p.getLine(q)}).map(l).join("\n")+"\n";this.deleteText({start:{row:b,column:0},end:{row:e+1,column:0}},!1);this.insertText(l,{row:b,column:0})}},{key:"modifySelectedLines",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(e.start.row,e.end.row,b)}},{key:"withLinesDo",value:function(b,e,l){var p=this;return Kc.arr.range(b,
e).map(function(q){var u=p.getLine(q);q=Kc.Range.create(q,0,q,u.length);return l(u,q)})}},{key:"withSelectedLinesDo",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,l=e.start.row;e=e.end;var p=e.row;return this.withLinesDo(l,0===e.column&&p>l?p-1:p,b)}},{key:"joinLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;var e=this.getLine(b),l=this.getLine(b+1);l=e+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,
row:b},end:{column:0,row:b+2}},l,!0);return{row:b,column:e.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(b,e){var l=this;b=void 0===b?this.selection.range:b;e=Object.assign({time:1E3,fill:Kc.Color.orange},e);var p=e.id||"flash"+Kc.string.newUUID();this.addMarker({id:p,range:b,style:{"background-color":e.fill.toCSSString(),"pointer-events":"none"}});Kc.fun.debounceNamed("flash-"+p,e.time,function(){return l.removeMarker(p)})()}},
{key:"addTextAttribute",value:function(b,e){var l=this;e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[b,p],undo:{target:this,selector:"removeTextAttribute",args:[b,p]}},function(){l.document.mixinTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop();return b}},{key:"removeTextAttribute",value:function(b,e){var l=this;
e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[b,p],undo:{target:this,selector:"addTextAttribute",args:[b,p]}},function(){l.document.mixoutTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(b){this.document.setTextAttributesWithSortedRanges(b);this.consistencyCheck();
for(var e=0;e<b.length;)this.onAttributesChanged(b[e]),e+=2}},{key:"textAttributeAt",value:function(b){return this.document.textAttributeAt(b)}},{key:"textAttributeAtPoint",value:function(b){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,b))}},{key:"textAndAttributesInRange",value:function(b){b=void 0===b?this.selection.range:b;return this.document.textAndAttributesInRange(b)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(b){this.invalidateTextLayout(!1,!1);var e=this.textLayout;e&&e.resetLineCharBoundsCacheOfRange(this,b);this.makeDirty()}},{key:"styleAt",value:function(b){return(b=this.textLayout.chunkAtPos(this,b))?b.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(b){b=void 0===b?this.selection:b;return this.textAndAttributesInRange(b).filter(function(e,l){return 0!=l%2}).reduce(function(e,l){for(var p in l){var q=
l[p];if(!e.hasOwnProperty(p)||void 0!==q&&null!==q)e[p]=q}return e},{})}},{key:"setStyleInRange",value:function(b,e){var l=this;e=void 0===e?this.selection:e;for(var p=this.textAndAttributesInRange(e),q={start:Object.assign({},e.start),end:Object.assign({},e.start)},u=[],w=0;w<p.length;w+=2){var y=p[w],A=p[w+1],C=-1;"string"!==typeof y&&(y=Kc.objectReplacementChar);for(;-1<(C=y.indexOf("\n"));)0<C&&(q.end.column+=C,u.push(q,A)),q={row:q.end.row+1,column:0},q={start:q,end:Object.assign({},q)},y=y.slice(C+
1);q.end.column+=y.length;u.push(q,A);q={start:Object.assign({},q.end),end:Object.assign({},q.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[b,e],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[u]}},function(){l.document.setTextAttribute(b,e);l.consistencyCheck();l.onAttributesChanged(e)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(b){b=void 0===b?this.selection:b;
for(var e=this.document.textAndAttributesInRange(b),l={},p=0;p<e.length;p+=2)Object.assign(l,e[p+1]);this.removeTextAttribute(l,b)}},{key:"changeStyleProperty",value:function(b,e,l){var p=this;l=void 0===l?this.selection:l;l=this.getStyleInRange(l)[b];var q=e(l);this.selections.forEach(function(u){var w={};return p.addTextAttribute((w[b]=q,w),u)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var b=
this;return this.selections.map(function(e){var l=b.charBoundsFromTextPosition(e.start),p=b.charBoundsFromTextPosition(e.end);return e.start.row===e.end.row?l.union(p):Kc.rect(Kc.pt(b.padding.left(),l.top()),Kc.pt(b.width-b.padding.left(),p.bottom()))}).reduce(function(e,l){return l.union(e)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Kc.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(b){return this.selection.goUp(void 0===b?1:b)}},{key:"cursorDown",value:function(b){return this.selection.goDown(void 0===b?1:b)}},{key:"cursorLeft",value:function(b){return this.selection.goLeft(void 0===b?1:b)}},{key:"cursorRight",value:function(b){return this.selection.goRight(void 0===b?1:b)}},{key:"getPositionAboveOrBelow",value:function(b,e,l,p,q){function u(C,E){C=
C.slice();C.push({x:Kc.arr.last(C).x+Kc.arr.last(C).width});for(var L=0,I=Infinity,V=0;V<C.length;V++){var T=Math.abs(C[V].x-E);T<I&&(I=T,L=V)}return L}b=void 0===b?1:b;e=void 0===e?this.cursorPosition:e;l=void 0===l?!1:l;if(0===b)return e;"number"===typeof q&&(q-=this.padding.left());var w=e.row,y=e.column;if(l&&this.lineWrapping){w=this.textLayout.rangesOfWrappedLine(this,e.row);if(!w.length)return e;y=w.length-1-w.slice().reverse().findIndex(function(C){return C.start.column<=e.column});if(1<=
b){var A=0===y?0>=e.row?null:Kc.arr.last(this.textLayout.rangesOfWrappedLine(this,e.row-1)):w[y-1];if(!A)return e}else if(-1>=b&&(A=(w.length-1===y?e.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,e.row+1):w.slice(y+1))[0],!A))return e;w=A.start.row;y=this.textLayout.charBoundsOfRow(this,w).slice(A.start.column,A.end.column+1);y=A.start.column+u(y,q)}else w=Math.min(Math.max(0,e.row-b),this.lineCount()-1),"number"===typeof q&&(A=this.textLayout.charBoundsOfRow(this,w),y=u(A,q));
A={row:w,column:y};return 1<Math.abs(b)?this.getPositionAboveOrBelow(b+(1<b?-1:1),A,l,p,q):A}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;this.selection.selectLine(b,void 0===e?!1:e);return this.selection}},{key:"selectionOrLineString",value:function(){var b=this.selection,
e=b.start;return b.text||this.getLine(e.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(b,e,l){b=void 0===b?this.selection.range:b;e=void 0===e?Kc.pt(0,0):e;l=void 0===l?!0:l;var p=this.charBoundsFromTextPosition(b.start).top();b=this.charBoundsFromTextPosition(b.end).bottom()-p;this.scroll=b<this.height||!1===l?this.scroll.withY(p+b/2-this.height/2).addPt(e):this.scroll.withY(p).addPt(e)}},{key:"centerRow",value:function(b,
e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Kc.pt(0,0):e;return this.alignRowAtTop(b,e.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Kc.pt(0,0):e;this.scroll=this.charBoundsFromTextPosition({row:b,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(e)}},{key:"alignRowAtBottom",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Kc.pt(0,0):e;var l=this.charBoundsFromTextPosition({row:b,column:0}).height;
this.alignRowAtTop(b,e.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(b,e){e=void 0===e?Kc.pt(0,0):e;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);b=this.charBoundsFromTextPosition(b);this.lineWrapping||(b=b.insetByPt(Kc.pt(-20,0)));var p=20<l.bottom()-b.bottom()?"bottomLeft":"topLeft";l=b[p]().subPt(l.translateForInclusion(b)[p]()).addPt(e);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(e),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(b,e){var l=this;e=void 0===e?this.cursorPosition:e;var p=this.scroll;e=this.selection.lead;var q=this.charBoundsFromTextPosition(e).y-p.y;p=!1;var u=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(e).y-q)};try{var w=b();p=w&&w instanceof Promise}finally{!p&&u()}p&&Kc.promise.finally(w,u);return w}},{key:"saveExcursion",value:function(b,e){var l=this;e=Object.assign({useAnchors:!1},
e);var p=this.selection.isMultiSelection?this.selection.selections.map(function(y){return y.directedRange}):[this.selection],q=e.useAnchors?p.map(function(y){var A=y.end;return[l.addAnchor(Object.assign({},y.start,{id:"save-excursion-"+Kc.string.newUUID()})),l.addAnchor(Object.assign({},A,{id:"save-excursion-"+Kc.string.newUUID()}))]}):null,u=!1;e=e.useAnchors?function(){var y=q.map(function(A){var C=$jscomp.makeIterator(A);A=C.next().value.position;C=C.next().value.position;return{start:A,end:C}});
l.selections=y;q.forEach(function(A){var C=$jscomp.makeIterator(A);A=C.next().value;C=C.next().value;l.removeAnchor(A);l.removeAnchor(C)})}:function(){return l.selections=p};try{var w=this.keepPosAtSameScrollOffsetWhile(b);u=w&&w instanceof Promise}finally{!u&&e()}u&&Kc.promise.finally(w,e);return w}},{key:"alignRow",value:function(b,e){e=void 0===e?"center":e;if(this.isClip()){var l=this.scroll,p=this.padding;l=this.innerBounds().insetByRect(p).translatedBy(l);b=this.charBoundsFromTextPosition({row:b,
column:0});if(e="top"===e||"bottom"===e?l[e]()-b[e]():"center"===e?l[e]().y-b[e]().y:0)this.scroll=this.scroll.addXY(0,-e)}}},{key:"fit",value:function(){var b=this,e=this.viewState,l=this.fixedWidth,p=this.fixedHeight;e._needsFit=!1;if(p&&l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var q=this.textBounds().outsetByRect(this.padding),u=function(){p||b.height==q.height||(b.height=q.height);l||b.width==q.width||(b.width=q.width);b.embeddedMorphs.forEach(function(w){w=b.embeddedMorphMap.get(w).anchor;
w.position=w.position})};e._needsFit=!1;this.document.lines.find(function(w){return w.hasEstimatedExtent})?this.whenRendered().then(u):u();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var b=this.padding;return b.top()+b.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(b){if(!this.lineWrapping)return b.column;var e=this.screenLineRange(b,
!0).start.column;return b.column-e}},{key:"textPositionFromPoint",value:function(b){return this.textLayout.textPositionFromPoint(this,b)}},{key:"charBoundsFromTextPosition",value:function(b){return this.textLayout.boundsFor(this,b)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"aboutToRender",this).call(this,b)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Kb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){return this.textRenderer.renderMorph(this,b)}},{key:"directRender",value:function(){var b=this.env.renderer,e=this.textRenderer;b&&e&&!b._stopped&&(Kc.renderSubTree(this,b),e.manuallyTriggerTextRenderHook(this,b))}},{key:"onMouseDown",value:function(b){if(!b.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var e=b.state;if(e.clickedOnMorph===this){e=(e.clickCount-1)%3+1;var l=this.localize(b.position),p=this.textPositionFromPoint(l);b.leftMouseButtonPressed()&&!b.isShiftDown()&&!b.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(b,l);this.selectable&&(b.isShiftDown()?this.selection.lead=p:b.isAltDown()?this.selection.addRange(Kc.Range.at(p)):(this.selection.disableMultiSelect(),1===e?b.isShiftDown()?this.selection.lead=p:this.selection={start:p,end:p}:2===e?this.execCommand("select word",
null,1,b):3===e&&this.execCommand("select line",null,1,b)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(b){var e="lively://text-doit/"+this.id;lively.modules.module(e);return{context:b.context||this,format:"esm",targetModule:e}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(b,e){var l=this;e=(e=this.textAttributeAtPoint(e)||[],e.doit);if(!e||!e.code)return!1;var p=this.evalEnvForDoit(e),q=lively.modules.module(p.targetModule);q.recorder.evt=
b;lively.vm.runEval(e.code,p).catch(function(u){return l.world().logError(Error("Error in text doit: "+u.stack))}).then(function(){return q.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(b){b.leftMouseButtonPressed()&&this.selectable&&b.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(b.position)))}},{key:"selectMatchingBrackets",value:function(b,e){function l(A){return"\t"===A||" "===A}function p(A,C,E,L,I){for(var V=1;(0>I?0<=L-1:L+1<A.length)&&
(L+=I,A[L]==C&&C!=E&&V++,A[L]==E&&V--,0!=V););return L}function q(A,C,E,L){for(var I=C;0>E?0<=I-1:I+1<A.length;)if(I+=E,A[I]==L)return 0<E?[C,I]:[I+1,C];return 0<E?[C+1,A.length-1]:[0,C]}if(!b)return e;if(0==e||e==b.length)return[0,b.length-1];var u=e-1;if(0<e){if("\n"==b[e-1]||"\r"==b[e-1])return q(b,e,1,b[e-1]);var w="*({[<'\"`".indexOf(b[e-1]);"*"==b[e-1]&&(0>e-2||"/"!=b[e-2])&&(w=-1);if(0<=w)return u=p(b,"*({[<'\"`"[w],"*)}]>'\"`"[w],e-1,1),[e,u-1]}if(e<b.length){if("\n"==b[e]||"\r"==b[e])return q(b,
e,-1,b[e]);w="*)}]>'\"`".indexOf(b[e]);"*"==b[e]&&(e+1>=b.length||"/"!=b[e+1])&&(w=-1);if(0<=w)return e=p(b,"*)}]>'\"`"[w],"*({[<'\"`"[w],e,-1),[e+1,u]}if("/"===b[e-1]&&"/"===b[e-2]){for(;u+1<b.length&&"\n"!==b[u+1]&&"\r"!==b[u+1];)u++;return[e,u]}w=e;for(var y=u;0<=w-1&&l(b[w-1]);)w--;for(;y<b.length&&l(b[y+1]);)y++;if(1<=y-w)return[w,y];for(w=e<b.length?b[e]:"";0<=e-1&&((b[e-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[e-1]?0:0<="0123456789".indexOf(w)));)w=b[e-1],e--;for(;u+1<b.length&&((b[u+1]||
"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[u+1]?0:0<="0123456789".indexOf(w)));)w=b[u+1],u++;return[e,u]}},{key:"onContextMenu",value:function(b){var e=this;if(b.targetMorph===this){b.stop();var l=this.textPositionFromPoint(this.localize(b.position)),p=this.selection.selections||[this.selection];if(this.selection.isEmpty()||p.every(function(q){return!q.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(q){return e.openMenu(q,b)}).catch(function(q){return $world.logError(q)})}}},
{key:"onDrop",value:function(b){var e=b.hand.grabbedMorphs.filter(function(p){return p.isLayoutable});Kb._get(Object.getPrototypeOf(k.prototype),"onDrop",this).call(this,b);if(e[0]){var l=this.textPositionFromPoint(this.localize(b.hand.globalPosition));this.insertText([e[0],null],l);e[0].opacity=b.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(b){var e=this;if(b.simpleDrop)return null;var l=this.whatsVisible,p=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var q=
this.document,u=this.padding.left(),w=this.padding.top();p=Kc.arr.range(p,l).reduce(function(y,A){var C=e.textLayout.charBoundsOfRow(e,A).slice();1<=C.length&&0==Kc.arr.last(C).width&&(Kc.arr.last(C).width=12);if(1<C.length){var E=Kc.arr.last(C);C.push({x:E.x+E.width,y:E.y,height:E.height,width:E.width||12})}C=C.map(function(L,I){L=Kc.Rectangle.fromLiteral(L).translatedBy(Kc.pt(u,w+q.computeVerticalOffsetOf(A)));var V=e.getGlobalTransform().transformRectToRect(L);return{textPos:{row:A,column:I},bounds:L,
globalBounds:V,morph:b.showDropGrid?Kc.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:L,border:{width:1,color:Kc.Color.green},fill:null}):null}});return y.concat(C)},[]);p.forEach(function(y){return y.morph&&e.addMorph(y.morph)});return p}},{key:"onDropHoverIn",value:function(b){var e={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},l=b.hand.grabbedMorphs[0];l&&(b.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(e);b=b.state.dropHover||(b.state.dropHover=new WeakMap);var p=b.get(this);p||(p={},b.set(this,p));p.config=e;p.dropGrid=l}},{key:"onDropHoverUpdate",value:function(b){var e=b.hand.grabbedMorphs[0];if(e){var l=b.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var p=l.config;b=b.positionIn(this);for(var q,u,w=Infinity,y=$jscomp.makeIterator(l.dropGrid),A=y.next();!A.done;A=
y.next()){A=A.value;if(A.bounds.containsPoint(b)){q=A;break}var C=A.bounds.closestPointToPt(b).dist(b);C<w&&(w=C,u=A)}q||(q=u);q&&(u=l.placeholder,u||(l.placeholder=u=Kc.morph({fill:e.fill,extent:e.extent,reactsToPointer:!1,acceptsDrops:!1})),Kc.obj.equals(u._textPos||{},q.textPos)||(this!==u.owner&&this.addMorph(u),u.position=q.bounds.topLeft(),p&&p.useTextFlowPlaceholder&&(u.remove(),u._textPos=q.textPos,this.insertText([u,null],q.textPos))))}else e=this.textPositionFromPoint(b.positionIn(this)),
this.focus(),this.cursorPosition=e}}},{key:"onDropHoverOut",value:function(b){var e=b.hand.grabbedMorphs[0];e&&(e.opacity=b.state.originalOpacity||1);if(b=b.state.dropHover)if(e=b.get(this))b.delete(this),e.dropGrid&&(e.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),e.dropGrid=null),e.placeholder&&(e.placeholder.remove(),e.placeholder=null)}},{key:"menuItems",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return e=
$jscomp,l=e.makeIterator,w.yield(Promise.all([Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),b.menuItemsForContextMenu()]),2);p=l.call(e,w.yieldResult);q=p.next().value;u=p.next().value;return w.return(q.concat({isDivider:!0}).concat(u))})}},{key:"menuItemsForContextMenu",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=[{command:"text undo",alias:"undo",target:b,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:b,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:b,showKeyShortcuts:b.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:b,showKeyShortcuts:b.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:b},{isDivider:!0},{command:"toggle line wrapping",alias:(b.lineWrapping?"disable":"enable")+" line wrapping",target:b,showKeyShortcuts:!0},
["run command",function(){b.focus();b.world().execCommand("run command")}]],l=$jscomp.makeIterator(b.plugins),p=l.next();case 2:if(p.done){u.jumpTo(4);break}q=p.value;if("function"!==typeof q.getMenuItems){u.jumpTo(3);break}return u.yield(q.getMenuItems(e),6);case 6:e=u.yieldResult;case 3:p=l.next();u.jumpTo(2);break;case 4:return u.return(e)}})}},{key:"keybindings",get:function(){var b=this.world();b=b&&b.getCurrentUser()&&b.getCurrentUser().config&&b.getCurrentUser().config.textKeyBindings||[];
b=Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat(b).concat(Kc.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",b)}},{key:"keybindings",set:function(b){Kb._set(Object.getPrototypeOf(k.prototype),"keybindings",b,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var b=Kb._get(Object.getPrototypeOf(k.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=b=this.pluginCollect("getKeyHandlers",
b)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);Kc.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(b){this.compositionRange||b.targetMorph!=this||(this.selection.cursorBlinkStart(),
Kc.KeyHandler.invokeKeyHandlers(this,b,!0))}},{key:"onTextInput",value:function(b){Kc.KeyHandler.invokeKeyHandlers(this,b,!1)}},{key:"onCompositionStart",value:function(b){this.insertTextAndSelect(b.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(b){this.selection.range=this.compositionRange;this.selection.text=[b.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(b){this.selection.range=
this.compositionRange;this.selection.text=b.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(b){if(!this.rejectsInput()&&this.isFocused()&&!Kc.config.emacs)this.onCopy(b,!this.rejectsInput())}},{key:"onCopy",value:function(b,e){e=void 0===e?!1:e;if(this.isFocused()){b.stop();var l=this.selection;try{for(var p=this.textAndAttributesInRange(this.selection.range),q=this.defaultTextStyle,u={},w=0;w<p.length;w+=2){var y=p[w];if(y.isMorph)if(y.isDisplacementMorph)p[w]=
"";else{var A=u[w]=Kc.serializeMorph(p[w]);p[w]=Kc.deserializeMorph(A,{reinitializeIds:!0})}}var C=Kc.extractHTMLFromTextMorph(this,p);b.domEvt.clipboardData.setData("text/html",C);for(var E in u)p[E]=u[E];var L=JSON.stringify({textAndAttributes:p,defaultTextStyle:q});b.domEvt.clipboardData.setData("application/x-lively-text",L)}catch(I){$world.logError(I)}b.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:Kc.config.codeEditor.collapseSelection||
!1,delete:e,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(b){var e=this;if(!this.rejectsInput()){b.stop();var l="";try{l=b.domEvt.clipboardData.getData("text")}catch(w){console.warn(w)}if(!this.editorPlugin)try{var p=b.domEvt.clipboardData.getData("application/x-lively-text");var q=p&&JSON.parse(p);var u=q.textAndAttributes;for(b=0;b<u.length;b+=2)"string"!==typeof u[b]&&(u[b]=Kc.deserializeMorph(u[b],{reinitializeIds:!0}))}catch(w){console.warn(w)}u=this.selection;u=u.isMultiSelection?
u.selections:[u];q&&this.undoManager.group();u.forEach(function(w){q?e.replace(w.range,q.textAndAttributes,!1,!0,!0):w.text=l;e.saveMark(w.start);w.collapseToEnd()});q&&this.undoManager.group()}}},{key:"onFocus",value:function(b){var e=this;Kb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var l=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;l&&!l.equals&&(l=
new Kc.ShadowObject(l));l&&!l.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){e.highlightWhenFocused&&e.animate({dropShadow:l,duration:200})})}}},{key:"onBlur",value:function(b){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Kb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b)}},{key:"onScroll",
value:function(b){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(b=this.env.renderer.getNodeForMorph(this))&&Kc.signal(this,"viewChanged",{prop:"scroll",value:Kc.pt(b.scrollLeft,b.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var b=this.padding,e=this.borderWidthBottom,l=this.borderWidthTop;return this.height-b.top()-
b.bottom()-e-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(b){var e=b=void 0===b?{direction:"up",select:!1}:b;b=e.direction;e=e.select;var l=this.textLayout["down"===b?"lastFullVisibleLine":"firstFullVisibleLine"](this),p=this.cursorPosition.column,q=this.padding;e?this.selection.lead={row:l,column:p}:this.cursorPosition={row:l,column:p};"down"===b?this.alignRowAtTop(l,
Kc.pt(0,-q.top()-q.bottom())):(this.alignRowAtBottom(l,Kc.pt(0,0)),this.alignRowAtBottom(l,Kc.pt(0,q.top()+q.bottom())))}},{key:"gotoDocumentStart",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead={row:0,column:0};b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead=this.documentEndPosition;b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(b){if(this.isLineEmpty(b)){for(var e=
b-1;0<=e;e--)if(!this.isLineEmpty(e)){var l=e;break}if(void 0===l)return{start:{row:b,column:0},end:{row:b,column:0}}}else l=b;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(b){var e=this.isLineEmpty(b),l=this.documentEndPosition;if(e){for(e=b+1;e<=l.row;e++)if(!this.isLineEmpty(e)){var p=e;break}if(void 0===p)return{start:{row:b,column:0},end:{row:b,column:0}}}else p=b;return this.paragraphRange(p)}},{key:"paragraphRange",value:function(b){if(this.isLineEmpty(b))return{start:{row:b,
column:0},end:{row:b,column:0}};var e=this.documentEndPosition;for(b+=1;b<=e.row;b++)if(this.isLineEmpty(b)){var l={row:b-1,column:this.getLine(b-1).length};break}l||(l=e);for(b=l.row-1;0<=b;b--)if(this.isLineEmpty(b)){var p={row:b+1,column:0};break}p||(p={row:0,column:0});return{start:p,end:l}}},{key:"astNodeRange",value:function(b){return{start:this.document.indexToPosition(b.start),end:this.document.indexToPosition(b.end)}}},{key:"parseIntoLines",value:function(b){return b.split("\n")}},{key:"computeTextRangeForChanges",
value:function(b){function e(w,y){for(var A="",C=0;C<w.length;C+=2)A+="string"===typeof w[C]?w[C]:Kc.objectReplacementChar;w=p.parseIntoLines(A);return 1===w.length?Kc.Range.fromPositions(y,{row:y.row,column:y.column+w[0].length}):1<w.length?Kc.Range.fromPositions(y,{row:y.row+w.length-1,column:Kc.arr.last(w).length}):Kc.Range.at(y)}var l=Kc.Range.at(this.cursorPosition);if(!b.length)return l;var p=this,q=b[0];l="replace"===q.selector?e(q.args[1],q.args[0].start):l;for(q=1;q<b.length;q++){var u=b[q];
l="replace"===u.selector?l.merge(e(u.args[1],u.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var b=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Kc.UndoManager(function(e){return b.includes(e.selector)})}},{key:"textUndo",value:function(){var b=this.undoManager.undo();b&&(b=b.changes.slice().reverse().map(function(e){return e.undo}),this.selection=this.computeTextRangeForChanges(b))}},
{key:"textRedo",value:function(){var b=this.undoManager.redo();b&&(b=b.changes.slice(),this.selection=this.computeTextRangeForChanges(b))}},{key:"findMatchingForward",value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),q=l[p];if(!q)return null;var u="right"===e?-1:0;return this.document.scanForward(b,function(w,y){if(w===q){if(0===u)return"right"===e?{row:y.row,column:y.column+1}:y;u--}else w===p&&u++;return null})}},{key:"findMatchingBackward",
value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),q=l[p];if(!q)return null;var u="left"===e?-1:0;return this.document.scanBackward(b,function(w,y){if(w===q){if(0===u)return"right"===e?{row:y.row,column:y.column+1}:y;u--}else w===p&&u++;return null})}},{key:"search",value:function(b,e){e=void 0===e?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:e;return(new Kc.TextSearcher(this)).search(Object.assign({needle:b},e))}},{key:"searchForAll",
value:function(b,e){e=void 0===e?{caseSensitive:!1}:e;return(new Kc.TextSearcher(this)).searchForAll(Object.assign({needle:b},e))}},{key:"tokenAt",value:function(b){return this.pluginInvokeFirst("tokenAt",b)}},{key:"astAt",value:function(b){return this.pluginInvokeFirst("astAt",b)}},{key:"evalEnvironment",get:function(){var b=this.editorPlugin;return b&&b.evalEnvironment}},{key:"evalEnvironment",set:function(b){var e=this.editorPlugin;e&&(e.evalEnvironment=b)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(b){(this.evalEnvironment||{}).context=b}},{key:"logDoit",value:function(b,e){e=void 0===e?{}:e;e=void 0===e.time?Date.now():e.time;if(!(12E4<b.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(p){}l||(l=[]);if(!l.some(function(p){return"string"===typeof p?p===b:p.source===b})){l.push({source:b,time:e});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(p){}}}}},{key:"doEval",
value:function(b,e,l){b=void 0===b?this.selection.isEmpty()?this.lineRange():this.selection.range:b;l=void 0===l?this.textInRange(b):l;b=this.pluginFind(function(p){return p.isEditorPlugin&&"function"===typeof p.runEval});if(!b)throw Error("doit not possible: cannot find js editor plugin of !"+this);e&&e.logDoit&&this.logDoit(l,e);return b.runEval(l,e)}},{key:"maybeSelectCommentOrLine",value:function(){var b=this.selection,e=b.lead,l=e.row;e=e.column;var p=this.selectionOrLineString();if(b.isEmpty()){var q=
p.indexOf("//");-1===q||e<q||0<q&&0<=":\"'".indexOf(p[q-1])?this.selectLine(l):b.range={start:{row:l,column:q+2},end:{row:l,column:p.length}}}}},{key:"debugHelper",value:function(b){b=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},b);return this._debugHelper?Object.assign(this._debugHelper,b):this._debugHelper=Object.assign({},b,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(e){for(var l=[],p=0;p<arguments.length;++p)l[p-0]=arguments[p];
console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(e){console.log(e.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:e})},group:function(e){this.groups.push([]);this.logged=Kc.arr.last(this.groups);console.group(e)},groupEnd:function(e){console.groupEnd(e)},steps:function(e){for(var l=[];e.length;){var p=Kc.arr.takeWhile(e,function(u){return!u.dump});e=e.slice(p.length);var q=(e.shift()||{}).dump;l.push({actions:p,
dump:q})}return l},printToConsole:function(){var e=this;console.clear();this.groups.forEach(function(l){var p=e.steps(l);console.group(p.length);e.steps(l).forEach(function(q,u){q=q.actions;console.group("step "+(u+1));q.forEach(function(w){return console.log.apply(console,$jscomp.arrayFromIterable(w.args))});console.groupEnd("step "+(u+1))});console.groupEnd(p.length)})},report:function(){var e=this,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=C.nextAddress)return l=C.yieldResult,C.yield(System.import("lively.ide/diff/editor-plugin.js"),3);p=C.yieldResult;q=p.default;u=0;w="";y=[];A=0;e.groups.forEach(function(E,L){w+=">>> group "+(L+1)+"\n";A++;u++;var I=e.steps(E);I.forEach(function(V,T){var Y=V.actions;V=V.dump;w+=Kc.string.indent(">>> step "+(T+1)," ",u)+"\n";A++;u++;Y.forEach(function(na){na=Kc.string.indent(Kc.string.formatFromArray(na.args.slice()).trim()," ",u);A+=na.split("\n").length;
w+=na+"\n"});1<=T&&V&&I[T-1].dump&&(Y=new q,V=l.createPatch(String(T),I[T-1].dump,V),Y.tokenize(V),y.push.apply(y,$jscomp.arrayFromIterable(Y.styledRanges(A,u))),w+=V,A+=V.split("\n").length-1);w+=Kc.string.indent("<< step "+(T+1)," ",u)+"\n";A++;u--});w+="<<< group "+(L+1)+"\n";A++;u--});return C.return({report:w,reportStyles:y})})},openReport:function(){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.report(),2);l=u.yieldResult;
p=l.reportStyles;q=l.report;return u.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:q,rangesAndStyles:p}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(p){var b=this.document;this.brokenDocument||(this.brokenDocument=b);var e=this.world()||$world;try{var l=new Kc.Document([]);l.textAndAttributes=b.textAndAttributes;this.changeDocument(l)}catch(q){e?
e.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}e?e.logError(p):console.error(p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(b,e){return new Kc.morph(Object.assign({type:"label",value:b,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Kc.Color.almostBlack,fontSize:11},e))}},{key:"makeInputLine",value:function(b){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(b)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var b=this.prototype.propertiesAndPropertySettings().properties,e=this.defaultTextStyleProps,l={},p=0;p<e.length;p++){var q=e[p];l[q]=b[q].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var b=this.prototype.propertiesAndPropertySettings().properties,e=[],l;for(l in b)b[l].isDefaultTextStyleProp&&
e.push(l);return this._defaultTextStyleProps=e}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new Kc.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Kc.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Kc.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Kc.config.text.useSoftTabs?Kc.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Kc.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var b=this,e=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&e&&this.owner&&(this._measuringTextBox=!0,Kc.noUpdate(function(){b.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(b){this.setProperty("selectable",b);b||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Kc.Rectangle.inset(0),
set:function(b){this.setProperty("padding","number"===typeof b?Kc.Rectangle.inset(b):b)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(b){this.setProperty("highlightWhenFocused",b);b&&!this.haloShadow&&(this.haloShadow={blur:6,color:Kc.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},
set:function(b){this.selection.range={start:b,end:b}}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var b=this.getProperty("selection");if(b)return b;b=new (Kc.config.text.useMultiSelect?Kc.MultiSelection:Kc.Selection)(this);this.setProperty("selection",b);return b},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);b?b.isSelection?this.setProperty("selection",
b):this.selection.range=b:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(b){var e=this;this.selection=b[0];this.selection.isMultiSelection&&b.slice(1).forEach(function(l){return e.selection.addRange(l)})}},textString:{group:"text",after:["document"],derived:!0,get:function(){return this.document?
this.document.textString:""},set:function(b){b=null!=b?String(b):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(b,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var b=this.textAndAttributes;if(1===b.length){var e=$jscomp.makeIterator(b[0]),l=e.next().value;e=e.next().value;if(!Object.keys(e||
{}).length)return l}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},b)}},defaultTextStyleProps:{group:"_internal",readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},
defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Kc.obj.select(this,this.defaultTextStyleProps)},set:function(b){Object.assign(this,b)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var b={},e=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,p=0;p<e.length;p++){var q=e[p],u=this[q];u!==l[q]&&(b[q]=u)}return b}},nativeCursor:{defaultValue:"text",isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",
values:Kc.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(b){this.setProperty("fontFamily",Kc.sanitizeFont(b))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Kc.Color.rgba(212,230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",
type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Kc.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Kc.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",
isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",
values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,
after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(b){var e=this,l=Kc.arr.withoutAll(b,this.anchors);Kc.arr.withoutAll(this.anchors,b).forEach(function(p){return e.removeAnchor(p)});l.forEach(function(p){return e.addAnchor(p)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",
defaultValue:[],after:["anchors"],set:function(b){var e=this;b=b.map(function(p){return p.isAnchor?p:e.addAnchor(Object.assign({},p,{id:"saved-mark-"+Kc.string.newUUID()}))});var l=this.savedMarks.filter(function(p){return!b.includes(p)});b>Kc.config.text.markStackSize&&l.push.apply(l,$jscomp.arrayFromIterable(b.splice(0,b.length-Kc.config.text.markStackSize)));l.map(function(p){return e.removeAnchor(p)});return this.setProperty("savedMarks",b)}},activeMarkPosition:{group:"_internal",after:["activeMark"],
derived:!0,get:function(){var b=this.activeMark;return b?b.position:null}},activeMark:{group:"core",after:["anchors"],set:function(b){if(b)b=this.addAnchor(b.isAnchor?b:Object.assign({},b,{id:"saved-mark-"+Kc.string.newUUID()}));else{var e=this.activeMark;this.savedMarks.includes(e)||this.removeAnchor(e)}this.setProperty("activeMark",b)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(b){var e=this,l=this.getProperty("plugins");Kc.arr.withoutAll(l,b).forEach(function(p){return p&&
e.removePlugin(p)});b.forEach(function(p){return p&&e.addPlugin(p)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var b=this.editorPlugin;return b?b.shortName:null},set:function(b){this.changeEditorMode(b)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1319,end:113497})}(Kc.Morph));Kc.Text=Go;Kc.Text=Go;Kc.Text=Go;var foa=Object.freeze({__proto__:null,Text:Go}),ig=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");ig.obj=df;ig.promise=Vf;ig.arr=Ke;ig.string=rg;ig.properties=gm;ig.Rectangle=Od;ig.Color=of;ig.signal=xk;ig.connect=Jj;ig.vdom=ZA;ig.Morph=Vi;ig.config=ok;ig.defaultStyle=gw;ig.defaultAttributes=hw;ig.Icon=Ml;ig.Icons=SH;ig.splitTextAndAttributesIntoLines=kA;ig.h=ig.vdom.h;var Ho=za("O",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),
k=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onChange",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b.prop&&b.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=b=void 0===b?{}:b,l=e.fontMetric,p=e.position,q=e.rightCenter,
u=e.leftCenter,w=e.topCenter,y=e.bottom,A=e.top,C=e.right,E=e.left,L=e.bottomCenter,I=e.bottomLeft,V=e.bottomRight,T=e.topRight,Y=e.topLeft,na=e.center;e=e.extent;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ig.obj.dissoc(b,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==e&&(this.extent=e);void 0!==p&&(this.position=p);void 0!==q&&(this.rightCenter=q);void 0!==u&&(this.leftCenter=u);void 0!==w&&(this.topCenter=
w);void 0!==y&&(this.bottom=y);void 0!==A&&(this.top=A);void 0!==C&&(this.right=C);void 0!==E&&(this.left=E);void 0!==L&&(this.bottomCenter=L);void 0!==I&&(this.bottomLeft=I);void 0!==V&&(this.bottomRight=V);void 0!==T&&(this.topRight=T);void 0!==Y&&(this.topLeft=Y);void 0!==na&&(this.center=na)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);this.autofit&&this.fitIfNeeded();b._cachedTextBounds=
this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(b,e,l){Kb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);b._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=ig.Rectangle.fromTuple(b._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return ig.obj.select(this,"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},
{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return ig.splitTextAndAttributesIntoLines(this.textAndAttributes,"\n")}},{key:"allFontsLoaded",value:function(){var b=this,e=this.env.fontMetric;
return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,p){if(p%2)return{fontFamily:l&&l.fontFamily||b.fontFamily,fontWeight:l&&l.fontWeight||b.fontWeight}}).filter(Boolean))).every(function(l){return e.isFontSupported(l.fontFamily,l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(ig.promise.waitFor(5E3,function(){return b.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",
value:function(){var b=this._fontMetric||this.env.fontMetric,e=$jscomp.makeIterator(this.textAndAttributes),l=e.next().value;e=e.next().value;var p=Object.assign({},this.textStyle,{},e);e=this.padding;b.isProportional(p.fontFamily)?(b=b.sizeFor(p,l),l=b.width,b=b.height):(p=b.sizeFor(p,"x"),b=p.height,l=l.length*p.width);return new ig.Rectangle(0,0,Math.ceil(e.left()+e.right()+l),Math.ceil(e.top()+e.bottom()+b))}},{key:"textBoundsAllChunks",value:function(){for(var b=this._fontMetric||this.env.fontMetric,
e=this.padding,l=this.textStyle,p=this.textAndAttributesOfLines,q=!b.isProportional(l.fontFamily),u=b.sizeFor(l,"x").height,w=0,y=0,A=0;A<p.length;A++){var C=p[A];if(C.length){for(var E=0,L=0,I=0;I<C.length;I+=2){var V=C[I],T=C[I+1]||{},Y=Object.assign({},l,{},T);q&&!T.fontFamily||!b.isProportional(Y.fontFamily)?(Y=b.sizeFor(Y,"x"),T=Y.height,L+=V.length*Y.width,E=Math.max(E,T)):(V=b.sizeFor(Y,V),T=V.height,L+=V.width,Y.paddingRight&&(L+=Number.parseInt(Y.paddingRight)),Y.paddingLeft&&(L+=Number.parseInt(Y.paddingLeft)),
E=Math.max(E,T))}w+=E;y=Math.max(y,L)}else w+=u}return new ig.Rectangle(0,0,Math.ceil(e.left()+e.right()+y),Math.ceil(e.top()+e.bottom()+w))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var b=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=b.length?this.textBoundsSingleChunk():this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=
null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Kb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var e=[],l=this.textAndAttributesOfLines.length,p=0;p<l;p++){for(var q=this.textAndAttributesOfLines[p],u=0;u<q.length;u+=2){var w=q[u+1];e.push(this.renderChunk(q[u],w))}p<l-1&&e.push(ig.h("br"))}w=
this.textStyle;var y=w.fontColor,A=w.fontSize;l=w.fontStyle;p=w.fontWeight;q=w.textShadow;u=w.textDecoration;var C=w.textStyleClasses,E=this.padding;w={fontFamily:w.fontFamily,fontSize:"number"===typeof A?A+"px":A,color:y?String(y):"transparent",position:"absolute",cursor:this.nativeCursor};y=ig.defaultAttributes(this,b);q&&(w.textShadow=q);"normal"!==p&&(w.fontWeight=p);"normal"!==l&&(w.fontStyle=l);"none"!==u&&(w.textDecoration=u);C&&C.length&&(y.className=(y.className||"")+" "+C.join(" "));y.style=
Object.assign({},ig.defaultStyle(this),{},w);return ig.h("div",y,[ig.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:E.left()+"px",paddingRight:E.right()+"px",paddingTop:E.top()+"px",paddingBottom:E.bottom()+"px",width:"calc(100% - "+E.left()+"px - "+E.right()+"px)"}},e),b.renderSubmorphs(this)])}},{key:"renderChunk",value:function(b,e){var l=e=e||{},p=l.backgroundColor,q=l.fontColor,u=l.fontFamily,w=l.fontStyle,y=l.fontWeight,A=l.textShadow,C=l.textDecoration,E=l.textStyleClasses,
L=l.textAlign,I=l.float,V=l.display,T=l.lineHeight,Y=l.opacity;l={};var na={style:l};I&&(l.float=I);V&&(l.display=V);p&&(l.backgroundColor=String(p));u&&(l.fontFamily=u);q&&(l.color=String(q));A&&(l.textShadow=A);"normal"!==y&&(l.fontWeight=y);"normal"!==w&&(l.fontStyle=w);"none"!==C&&(l.textDecoration=C);L&&(l.textAlign=L);T&&(l.lineHeight=T);Y&&(l.opacity=Y);E&&E.length&&(na.className=E.join(" "));p="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");
for(q=0;q<p.length;q++)u=p[q],e.hasOwnProperty(u)&&(w=e[u],l[u]="number"===typeof w?w+"px":w);return ig.h("span",na,b)}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit label",{input:b.textString,historyId:"lively.morphic-label-edit-hist",selectInput:!0}),2);e=l.yieldResult;"string"===typeof e&&(b.textString=e);l.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var b=
this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(b.world().filterableListPrompt("Select Icon",Object.keys(ig.Icons).map(function(u){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(ig.Icon.textAttribute(u,{paddingRight:"10px"})),[u,{}]),value:u}})),2);e=q.yieldResult;l=$jscomp.makeIterator(e.selected);if(p=l.next().value)b.value=ig.Icon.textAttribute(p);q.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=Kb._get(Object.getPrototypeOf(k.prototype),
"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["edit label as rich text",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield($world.editPrompt("rich text",{input:b.value,resolveTextAttributes:!0}),2);if(l=p.yieldResult)b.value=l;p.jumpToEnd()})}]);e.unshift(["change label",function(){return b.interactivelyChangeLabel()}]);e.unshift(["set Icon",function(){return b.interactivelySetIcon()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:ig.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return ig.properties.values(ig.Icons).map(function(b){return b.code}).includes(this.textString)}},value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var b=this.textAndAttributes;if(2>=b.length){var e=$jscomp.makeIterator(b),l=e.next().value;
e=e.next().value;if(!Object.keys(e||{}).length)return l||""}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(b,e){return 0==e%2?b:""}).join("")},set:function(b){this.textAndAttributes=[b,null]}},textAndAttributes:{after:["autofit"],get:function(){var b=this.getProperty("textAndAttributes");if(!b||1>b.length)b=["",null];return b},set:function(b){Array.isArray(b)||
(b=[String(b),{}]);0===b.length&&(b=["",{}]);this.setProperty("textAndAttributes",b);this.autofit&&this.invalidateTextLayout();ig.signal(this,"value",b)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var b=this.textAndAttributes,e=null;if(2<b.length){var l=$jscomp.makeIterator(b.slice(-2)),p=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&(b=b.slice(0,-2),e=[p,l])}return{value:b,annotation:e}},set:function(b){var e=b.value;
b=b.annotation;e||(e="");"string"===typeof e&&(e=[e,null]);Array.isArray(e)||(e=[String(e),null]);e=e.slice();if(b){"string"===typeof b&&(b=[b,null]);var l=b[1];l||(l=b[1]={});e.push.apply(e,$jscomp.arrayFromIterable(b));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||l.textStyleClasses.push("annotation")}this.textAndAttributes=e}},autofit:{defaultValue:!0,set:function(b){this.setProperty("autofit",b);b&&(this._needsFit=!0)}},padding:{type:"Rectangle",
isStyleProp:!0,defaultValue:ig.Rectangle.inset(0),after:["autofit"],initialize:function(b){this.padding=b},set:function(b){b||(b=ig.Rectangle.inset(0));var e=this.padding;this.setProperty("padding","number"===typeof b?ig.Rectangle.inset(b):b);this.autofit&&!e.equals(b)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,type:"Enum",values:ig.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(b){var e=this.fontFamily;this.setProperty("fontFamily",
b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(b){var e=this.fontSize;this.setProperty("fontSize",b);this.autofit&&b!=e&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:ig.Color.black},fontWeight:{type:"Enum",values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontWeight;this.setProperty("fontWeight",
b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontStyle;this.setProperty("fontStyle",b);this.autofit&&e!=b&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(b){this.setProperty("textStyleClasses",b);this.autofit&&
this.invalidateTextLayout()}}}}},{key:"icon",value:function(b,e){e=void 0===e?{prefix:"",suffix:""}:e;return ig.Icon.makeLabel(b,e)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:499,end:18907})}(ig.Morph));ig.Label=Ho;ig.Label=Ho;ig.Label=Ho;var goa=Object.freeze({__proto__:null,
Label:Ho}),NR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,hoa={},f6=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ioa=hoa=function(a,d){function k(aa){var oa=aa.match(/\n/g);oa&&(Ba+=oa.length);oa=aa.lastIndexOf("\n");F=~oa?aa.length-oa:F+aa.length}function b(){var aa={line:Ba,column:F};return function(oa){oa.position=new e(aa);w(/^\s*/);return oa}}function e(aa){(this||NR).start=aa;(this||NR).end={line:Ba,column:F};(this||NR).source=d.source}function l(aa){var oa=Error(d.source+
":"+Ba+":"+F+": "+aa);oa.reason=aa;oa.filename=d.source;oa.line=Ba;oa.column=F;oa.source=a;if(d.silent)W.push(oa);else throw oa;}function p(){return w(/^{\s*/)}function q(){return w(/^}/)}function u(){var aa,oa=[];w(/^\s*/);for(y(oa);a.length&&"}"!=a.charAt(0)&&(aa=Y()||na());)!1!==aa&&(oa.push(aa),y(oa));return oa}function w(aa){if(aa=aa.exec(a)){var oa=aa[0];k(oa);a=a.slice(oa.length);return aa}}function y(aa){var oa;for(aa=aa||[];oa=A();)!1!==oa&&aa.push(oa);return aa}function A(){var aa=b();if("/"==
a.charAt(0)&&"*"==a.charAt(1)){for(var oa=2;""!=a.charAt(oa)&&("*"!=a.charAt(oa)||"/"!=a.charAt(oa+1));)++oa;oa+=2;if(""===a.charAt(oa-1))return l("End of comment missing");var Va=a.slice(2,oa-2);F+=2;k(Va);a=a.slice(oa);F+=2;return aa({type:"comment",comment:Va})}}function C(){var aa=w(/^([^{]+)/);if(aa)return vq(aa[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(oa){return oa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(oa){return oa.replace(/\u200C/g,
",")})}function E(){var aa=b(),oa=w(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(oa){oa=vq(oa[0]);if(!w(/^:\s*/))return l("property missing ':'");var Va=w(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);aa=aa({type:"declaration",property:oa.replace(f6,""),value:Va?vq(Va[0]).replace(f6,""):""});w(/^[;\s]*/);return aa}}function L(){var aa=[];if(!p())return l("missing '{'");y(aa);for(var oa;oa=E();)!1!==oa&&(aa.push(oa),y(aa));return q()?aa:l("missing '}'")}function I(){for(var aa,oa=[],Va=
b();aa=w(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)oa.push(aa[1]),w(/^,\s*/);if(oa.length)return Va({type:"keyframe",values:oa,declarations:L()})}function V(){var aa=b(),oa=w(/^@([-\w]+)?keyframes\s*/);if(oa){var Va=oa[1];oa=w(/^([-\w]+)\s*/);if(!oa)return l("@keyframes missing name");oa=oa[1];if(!p())return l("@keyframes missing '{'");for(var lb,qa=y();lb=I();)qa.push(lb),qa=qa.concat(y());return q()?aa({type:"keyframes",name:oa,vendor:Va,keyframes:qa}):l("@keyframes missing '}'")}}function T(aa){var oa=
new RegExp("^@"+aa+"\\s*([^;]+);");return function(){var Va=b(),lb=w(oa);if(lb){var qa={type:aa};qa[aa]=lb[1].trim();return Va(qa)}}}function Y(){if("@"==a[0]){var aa;if(!(aa=V())){aa=b();var oa=w(/^@media *([^{]+)/);if(oa)if(oa=vq(oa[1]),p()){var Va=y().concat(u());aa=q()?aa({type:"media",media:oa,rules:Va}):l("@media missing '}'")}else aa=l("@media missing '{'");else aa=void 0}aa||(aa=b(),aa=(oa=w(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?aa({type:"custom-media",name:vq(oa[1]),media:vq(oa[2])}):
void 0);aa||(aa=b(),(oa=w(/^@supports *([^{]+)/))?(oa=vq(oa[1]),p()?(Va=y().concat(u()),aa=q()?aa({type:"supports",supports:oa,rules:Va}):l("@supports missing '}'")):aa=l("@supports missing '{'")):aa=void 0);if(!(aa=aa||P()||S()||fa()))if(aa=b(),Va=w(/^@([-\w]+)?document *([^{]+)/))if(oa=vq(Va[1]),Va=vq(Va[2]),p()){var lb=y().concat(u());aa=q()?aa({type:"document",document:Va,vendor:oa,rules:lb}):l("@document missing '}'")}else aa=l("@document missing '{'");else aa=void 0;if(!aa)if(aa=b(),w(/^@page */))if(oa=
C()||[],p()){for(Va=y();lb=E();)Va.push(lb),Va=Va.concat(y());aa=q()?aa({type:"page",selectors:oa,declarations:Va}):l("@page missing '}'")}else aa=l("@page missing '{'");else aa=void 0;aa||(aa=b(),w(/^@host\s*/)?p()?(oa=y().concat(u()),aa=q()?aa({type:"host",rules:oa}):l("@host missing '}'")):aa=l("@host missing '{'"):aa=void 0);if(!aa)if(aa=b(),w(/^@font-face\s*/))if(p()){for(oa=y();Va=E();)oa.push(Va),oa=oa.concat(y());aa=q()?aa({type:"font-face",declarations:oa}):l("@font-face missing '}'")}else aa=
l("@font-face missing '{'");else aa=void 0;return aa}}function na(){var aa=b(),oa=C();if(!oa)return l("selector missing");y();return aa({type:"rule",selectors:oa,declarations:L()})}d=d||{};var Ba=1,F=1;e.prototype.content=a;var W=[],P=T("import"),S=T("charset"),fa=T("namespace");return xO(function(){var aa=u();return{type:"stylesheet",stylesheet:{source:d.source,rules:aa,parsingErrors:W}}}())},Vca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,g6={};g6=QG;QG.prototype.emit=
function(a){return a};QG.prototype.visit=function(a){return this[a.type](a)};QG.prototype.mapVisit=function(a,d){var k="";d=d||"";for(var b=0,e=a.length;b<e;b++)k+=this.visit(a[b]),d&&b<e-1&&(k+=this.emit(d));return k};var h6=g6,Nr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,i6={},s0=h6,joa=cj;i6=Pj;joa(Pj,s0);Pj.prototype.compile=function(a){return this.stylesheet(a)};Pj.prototype.stylesheet=function(a){return this.mapVisit(a.stylesheet.rules,"\n\n")};Pj.prototype.comment=
function(a){return this.emit(this.indent()+"/*"+a.comment+"*/",a.position)};Pj.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};Pj.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Pj.prototype.document=function(a){return this.emit("@"+(a.vendor||"")+"document "+a.document,a.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+
this.emit(this.indent(-1)+"\n}")};Pj.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};Pj.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)};Pj.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Pj.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+
this.emit(" {\n"+this.indent(1))+this.mapVisit(a.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Pj.prototype.keyframe=function(a){var d=a.declarations;return this.emit(this.indent())+this.emit(a.values.join(", "),a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Pj.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", ")+" ":"";return this.emit("@page "+d,a.position)+this.emit("{\n")+this.emit(this.indent(1))+
this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Pj.prototype["font-face"]=function(a){return this.emit("@font-face ",a.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Pj.prototype.host=function(a){return this.emit("@host",a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Pj.prototype["custom-media"]=function(a){return this.emit("@custom-media "+
a.name+" "+a.media+";",a.position)};Pj.prototype.rule=function(a){var d=this.indent(),k=a.declarations;return k.length?this.emit(a.selectors.map(function(b){return d+b}).join(",\n"),a.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(k,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Pj.prototype.declaration=function(a){return this.emit(this.indent())+this.emit(a.property+": "+a.value,a.position)+this.emit(";")};Pj.prototype.indent=function(a){(this||Nr).level=
(this||Nr).level||1;return null!=a?((this||Nr).level+=a,""):Array((this||Nr).level).join((this||Nr).indentation||"  ")};var koa=i6,OR={},j6=Eg.Buffer;(function(a){var d=function(k){return"function"===typeof k?k:"function"===typeof j6?function(b){return(new j6(b,"base64")).toString("binary")}:"object"===typeof a.base64js?function(b){b=a.base64js.b64ToByteArray(b);return Array.prototype.map.call(b,function(e){return String.fromCharCode(e)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");
}}(a.atob);a.atob=d;OR&&(OR=d)})(window);var loa=OR,moa=/^xn--/,noa=/[^\0-\x7E]/,Xca=/[\x2E\u3002\uFF0E\uFF61]/g,Wca={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Kp=Math.floor,PR=String.fromCharCode,k6=function(a,d){return a+22+75*(26>a)-((0!=d)<<5)},l6=function(a,d,k){var b=0;a=k?Kp(a/700):a>>1;for(a+=Kp(a/d);455<a;b+=36)a=Kp(a/35);return Kp(b+36*a/(a+38))},m6=function(a){var d=[],k=a.length,
b=0,e=128,l=72,p=a.lastIndexOf("-");0>p&&(p=0);for(var q=0;q<p;++q)128<=a.charCodeAt(q)&&ju("not-basic"),d.push(a.charCodeAt(q));for(p=0<p?p+1:0;p<k;){q=b;for(var u=1,w=36;;w+=36){p>=k&&ju("invalid-input");var y=10>(C=a.charCodeAt(p++))-48?C-22:26>C-65?C-65:26>C-97?C-97:36;(36<=y||y>Kp((2147483647-b)/u))&&ju("overflow");b+=y*u;var A=w<=l?1:w>=l+26?26:w-l;if(y<A)break;y=36-A;u>Kp(2147483647/y)&&ju("overflow");u*=y}u=d.length+1;l=l6(b-q,u,0==q);Kp(b/u)>2147483647-e&&ju("overflow");e+=Kp(b/u);b%=u;d.splice(b++,
0,e)}var C;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},n6=function(a){for(var d=[],k=(a=u0(a)).length,b=128,e=0,l=72,p=$jscomp.makeIterator(a),q=p.next();!q.done;q=p.next()){var u=q.value;128>u&&d.push(PR(u))}for((u=p=d.length)&&d.push("-");u<k;){var w=2147483647,y=$jscomp.makeIterator(a);for(q=y.next();!q.done;q=y.next())q=q.value,q>=b&&q<w&&(w=q);q=u+1;w-b>Kp((2147483647-e)/q)&&ju("overflow");e+=(w-b)*q;b=w;w=$jscomp.makeIterator(a);for(y=w.next();!y.done;y=w.next())if(y=
y.value,y<b&&2147483647<++e&&ju("overflow"),y==b){var A=e;for(y=36;;y+=36){var C=y<=l?1:y>=l+26?26:y-l;if(A<C)break;A-=C;var E=36-C;d.push(PR(k6(C+A%E,0)));A=Kp(A/E)}d.push(PR(k6(A,0)));l=l6(e,q,u==p);e=0;++u}++e;++b}return d.join("")},ooa={version:"2.1.0",ucs2:{decode:u0,encode:function(a){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(a))}},decode:m6,encode:n6,toASCII:function(a){return t0(a,function(d){return noa.test(d)?"xn--"+n6(d):d})},toUnicode:function(a){return t0(a,function(d){return moa.test(d)?
m6(d.slice(4).toLowerCase()):d})}},NB=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}},$u={};$u.decode=$u.parse=function(a,d,k,b){k=k||"=";var e={};if("string"!=typeof a||0===a.length)return e;var l=/\+/g;a=a.split(d||"&");d=1E3;b&&"number"==typeof b.maxKeys&&(d=b.maxKeys);b=a.length;0<d&&b>d&&(b=d);for(d=0;d<b;++d){var p,q;var u=a[d].replace(l,"%20");var w=u.indexOf(k);0<=w?(p=u.substr(0,w),q=u.substr(w+
1)):(p=u,q="");u=decodeURIComponent(p);w=decodeURIComponent(q);Object.prototype.hasOwnProperty.call(e,u)?Array.isArray(e[u])?e[u].push(w):e[u]=[e[u],w]:e[u]=w}return e};$u.encode=$u.stringify=function(a,d,k,b){return d=d||"&",k=k||"=",null===a&&(a=void 0),"object"==typeof a?Object.keys(a).map(function(e){var l=encodeURIComponent(NB(e))+k;return Array.isArray(a[e])?a[e].map(function(p){return l+encodeURIComponent(NB(p))}).join(d):l+encodeURIComponent(NB(a[e]))}).join(d):b?encodeURIComponent(NB(b))+
k+encodeURIComponent(NB(a)):""};var Vx={},mp={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}};Vx.parse=lA;Vx.resolve=function(a,d){return lA(a,!1,!0).resolve(d)};Vx.resolveObject=function(a,d){return a?lA(a,!1,!0).resolveObject(d):d};Vx.format=function(a){mp.isString(a)&&(a=lA(a));return a instanceof pn?a.format():pn.prototype.format.call(a)};Vx.Url=pn;var poa=
/^([a-z0-9.+-]+:)/i,qoa=/:[0-9]*$/,roa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,soa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),QR=["'"].concat(soa),o6=["%","/","?",";","#"].concat(QR),p6=["/","?","#"],q6=/^[+a-z0-9A-Z_-]{0,63}$/,toa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,uoa={javascript:!0,"javascript:":!0},RR={javascript:!0,"javascript:":!0},Wx={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};pn.prototype.parse=function(a,d,k){if(!mp.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+
typeof a);var b=a.indexOf("?");b=-1!==b&&b<a.indexOf("#")?"?":"#";a=a.split(b);a[0]=a[0].replace(/\\/g,"/");b=a=a.join(b);if(b=b.trim(),!k&&1===a.split("#").length)if(a=roa.exec(b))return this.path=b,this.href=b,this.pathname=a[1],a[2]?(this.search=a[2],this.query=d?$u.parse(this.search.substr(1)):this.search.substr(1)):d&&(this.search="",this.query={}),this;if(a=poa.exec(b)){var e=(a=a[0]).toLowerCase();this.protocol=e;b=b.substr(a.length)}if(k||a||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===b.substr(0,
2);!l||a&&RR[a]||(b=b.substr(2),this.slashes=!0)}if(!RR[a]&&(l||a&&!Wx[a])){var p,q;l=-1;for(k=0;k<p6.length;k++)-1!==(u=b.indexOf(p6[k]))&&(-1===l||u<l)&&(l=u);-1!==(q=-1===l?b.lastIndexOf("@"):b.lastIndexOf("@",l))&&(p=b.slice(0,q),b=b.slice(q+1),this.auth=decodeURIComponent(p));l=-1;for(k=0;k<o6.length;k++){var u;-1!==(u=b.indexOf(o6[k]))&&(-1===l||u<l)&&(l=u)}-1===l&&(l=b.length);this.host=b.slice(0,l);b=b.slice(l);this.parseHost();this.hostname=this.hostname||"";p="["===this.hostname[0]&&"]"===
this.hostname[this.hostname.length-1];if(!p)for(l=this.hostname.split(/\./),q=(k=0,l.length);k<q;k++)if((u=l[k])&&!u.match(q6)){a="";for(var w=0,y=u.length;w<y;w++)127<u.charCodeAt(w)?a+="x":a+=u[w];if(!a.match(q6)){q=l.slice(0,k);k=l.slice(k+1);(u=u.match(toa))&&(q.push(u[1]),k.unshift(u[2]));k.length&&(b="/"+k.join(".")+b);this.hostname=q.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();p||(this.hostname=ooa.toASCII(this.hostname));k=this.port?
":"+this.port:"";this.host=(this.hostname||"")+k;this.href+=this.host;p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!uoa[e])for(k=0,q=QR.length;k<q;k++)p=QR[k],-1!==b.indexOf(p)&&(u=encodeURIComponent(p),u===p&&(u=escape(p)),b=b.split(p).join(u));k=b.indexOf("#");-1!==k&&(this.hash=b.substr(k),b=b.slice(0,k));k=b.indexOf("?");if(-1!==k?(this.search=b.substr(k),this.query=b.substr(k+1),d&&(this.query=$u.parse(this.query)),b=b.slice(0,k)):d&&(this.search=
"",this.query={}),b&&(this.pathname=b),Wx[e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)k=this.pathname||"",this.path=k+(this.search||"");return this.href=this.format(),this};pn.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@");var d=this.protocol||"",k=this.pathname||"",b=this.hash||"",e=!1,l="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+
"]"),this.port&&(e+=":"+this.port));this.query&&mp.isObject(this.query)&&Object.keys(this.query).length&&(l=$u.stringify(this.query));a=this.search||l&&"?"+l||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||Wx[d])&&!1!==e?(e="//"+(e||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):e||(e=""),b&&"#"!==b.charAt(0)&&(b="#"+b),a&&"?"!==a.charAt(0)&&(a="?"+a),d+e+(k=k.replace(/[?#]/g,function(p){return encodeURIComponent(p)}))+(a=a.replace("#","%23"))+b};pn.prototype.resolve=function(a){return this.resolveObject(lA(a,
!1,!0)).format()};pn.prototype.resolveObject=function(a){if(mp.isString(a)){var d=new pn;d.parse(a,!1,!0);a=d}d=new pn;for(var k=Object.keys(this),b=0;b<k.length;b++){var e=k[b];d[e]=this[e]}if(d.hash=a.hash,""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol){var l=Object.keys(a);for(k=0;k<l.length;k++)b=l[k],"protocol"!==b&&(d[b]=a[b]);return Wx[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(a.protocol&&a.protocol!==d.protocol){if(!Wx[a.protocol]){l=
Object.keys(a);for(k=0;k<l.length;k++)b=l[k],d[b]=a[b];return d.href=d.format(),d}if(d.protocol=a.protocol,a.host||RR[a.protocol])d.pathname=a.pathname;else{for(var p=(a.pathname||"").split("/");p.length&&!(a.host=p.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==p[0]&&p.unshift("");2>p.length&&p.unshift("");d.pathname=p.join("/")}if(d.search=a.search,d.query=a.query,d.host=a.host||"",d.auth=a.auth,d.hostname=a.hostname||a.host,d.port=a.port,d.pathname||d.search)d.path=(d.pathname||
"")+(d.search||"");return d.slashes=d.slashes||a.slashes,d.href=d.format(),d}k=d.pathname&&"/"===d.pathname.charAt(0);var q=a.host||a.pathname&&"/"===a.pathname.charAt(0),u=k=q||k||d.host&&a.pathname;b=d.pathname&&d.pathname.split("/")||[];e=(p=a.pathname&&a.pathname.split("/")||[],d.protocol&&!Wx[d.protocol]);if(e&&(d.hostname="",d.port=null,d.host&&(""===b[0]?b[0]=d.host:b.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===p[0]?p[0]=a.host:p.unshift(a.host)),a.host=
null),k=k&&(""===p[0]||""===b[0])),q)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),d.search=a.search,d.query=a.query;else if(!mp.isNullOrUndefined(a.search))return e&&(d.hostname=d.host=b.shift(),(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift())),d.search=a.search,d.query=a.query,mp.isNull(d.pathname)&&
mp.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!b.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;q=b.slice(-1)[0];p=(d.host||a.host||1<b.length)&&("."===q||".."===q)||""===q;for(var w=0,y=b.length;0<=y;y--)"."===(q=b[y])?b.splice(y,1):".."===q?(b.splice(y,1),w++):w&&(b.splice(y,1),w--);if(!k&&!u)for(;w--;w)b.unshift("..");!k||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift("");p&&"/"!==b.join("/").substr(-1)&&
b.push("");u=""===b[0]||b[0]&&"/"===b[0].charAt(0);e&&(d.hostname=d.host=u?"":b.length?b.shift():"",(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift()));return(k||d.host&&b.length)&&!u&&b.unshift(""),b.length?d.pathname=b.join("/"):(d.pathname=null,d.path=null),mp.isNull(d.pathname)&&mp.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=a.auth||d.auth,d.slashes=d.slashes||a.slashes,d.href=d.format(),d};pn.prototype.parseHost=
function(){var a=this.host,d=qoa.exec(a);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),a=a.substr(0,a.length-d.length));a&&(this.hostname=a)};var voa=oh,Xx={resolve:function(){for(var a,d="",k=!1,b=arguments.length-1;-1<=b&&!k;b--){var e;0<=b?e=arguments[b]:(void 0===a&&(a=voa.cwd()),e=a);np(e);0!==e.length&&(d=e+"/"+d,k=47===e.charCodeAt(0))}return d=v0(d,!k),k?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(a){if(np(a),0===a.length)return".";var d=47===a.charCodeAt(0),k=47===a.charCodeAt(a.length-
1);return 0!==(a=v0(a,!d)).length||d||(a="."),0<a.length&&k&&(a+="/"),d?"/"+a:a},isAbsolute:function(a){return np(a),0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,d=0;d<arguments.length;++d){var k=arguments[d];np(k);0<k.length&&(void 0===a?a=k:a+="/"+k)}return void 0===a?".":Xx.normalize(a)},relative:function(a,d){if((np(a),np(d),a===d)||(a=Xx.resolve(a))===(d=Xx.resolve(d)))return"";for(var k=1;k<a.length&&47===a.charCodeAt(k);++k);for(var b=a.length,
e=b-k,l=1;l<d.length&&47===d.charCodeAt(l);++l);for(var p=d.length-l,q=e<p?e:p,u=-1,w=0;w<=q;++w){if(w===q){if(p>q){if(47===d.charCodeAt(l+w))return d.slice(l+w+1);if(0===w)return d.slice(l+w)}else e>q&&(47===a.charCodeAt(k+w)?u=w:0===w&&(u=0));break}var y=a.charCodeAt(k+w);if(y!==d.charCodeAt(l+w))break;47===y&&(u=w)}e="";for(w=k+u+1;w<=b;++w)w!==b&&47!==a.charCodeAt(w)||(0===e.length?e+="..":e+="/..");return 0<e.length?e+d.slice(l+u):(l+=u,47===d.charCodeAt(l)&&++l,d.slice(l))},_makeLong:function(a){return a},
dirname:function(a){if(np(a),0===a.length)return".";for(var d=47===a.charCodeAt(0),k=-1,b=!0,e=a.length-1;1<=e;--e)if(47===a.charCodeAt(e)){if(!b){k=e;break}}else b=!1;return-1===k?d?"/":".":d&&1===k?"//":a.slice(0,k)},basename:function(a,d){if(void 0!==d&&"string"!=typeof d)throw new TypeError('"ext" argument must be a string');np(a);var k,b=0,e=-1,l=!0;if(void 0!==d&&0<d.length&&d.length<=a.length){if(d.length===a.length&&d===a)return"";var p=d.length-1,q=-1;for(k=a.length-1;0<=k;--k){var u=a.charCodeAt(k);
if(47===u){if(!l){b=k+1;break}}else-1===q&&(l=!1,q=k+1),0<=p&&(u===d.charCodeAt(p)?-1==--p&&(e=k):(p=-1,e=q))}return b===e?e=q:-1===e&&(e=a.length),a.slice(b,e)}for(k=a.length-1;0<=k;--k)if(47===a.charCodeAt(k)){if(!l){b=k+1;break}}else-1===e&&(l=!1,e=k+1);return-1===e?"":a.slice(b,e)},extname:function(a){np(a);for(var d=-1,k=0,b=-1,e=!0,l=0,p=a.length-1;0<=p;--p){var q=a.charCodeAt(p);if(47!==q)-1===b&&(e=!1,b=p+1),46===q?-1===d?d=p:1!==l&&(l=1):-1!==d&&(l=-1);else if(!e){k=p+1;break}}return-1===
d||-1===b||0===l||1===l&&d===b-1&&d===k+1?"":a.slice(d,b)},format:function(a){if(null===a||"object"!=typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);var d=a.dir||a.root,k=a.base||(a.name||"")+(a.ext||"");return d?d===a.root?d+k:d+"/"+k:k},parse:function(a){np(a);var d={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return d;var k,b=a.charCodeAt(0),e=47===b;e?(d.root="/",k=1):k=0;for(var l=-1,p=0,q=-1,u=!0,w=a.length-1,y=0;w>=k;--w)if(47!==
(b=a.charCodeAt(w)))-1===q&&(u=!1,q=w+1),46===b?-1===l?l=w:1!==y&&(y=1):-1!==l&&(y=-1);else if(!u){p=w+1;break}return-1===l||-1===q||0===y||1===y&&l===q-1&&l===p+1?-1!==q&&(d.base=d.name=0===p&&e?a.slice(1,q):a.slice(p,q)):(0===p&&e?(d.name=a.slice(1,l),d.base=a.slice(1,q)):(d.name=a.slice(p,l),d.base=a.slice(p,q)),d.ext=a.slice(l,q)),0<p?d.dir=a.slice(0,p-1):e&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null};Xx.posix=Xx;var Rk=za("aF",Xx);za("aG",Rk._makeLong);za("aH",Rk.basename);za("aI",
Rk.delimiter);za("aJ",Rk.dirname);za("aK",Rk.extname);za("aL",Rk.format);za("aM",Rk.isAbsolute);za("aN",Rk.join);za("aO",Rk.normalize);za("aP",Rk.parse);za("aQ",Rk.posix);za("aR",Rk.relative);za("aS",Rk.resolve);za("aT",Rk.sep);za("aU",Rk.win32);var r6={},s6=/%[a-f0-9]{2}/gi,t6=/(%[a-f0-9]{2})+/gi;r6=function(a){if("string"!==typeof a)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch(p){for(var d={"%FE%FF":"\ufffd\ufffd",
"%FF%FE":"\ufffd\ufffd"},k=t6.exec(a);k;){try{d[k[0]]=decodeURIComponent(k[0])}catch(q){var b=k[0];try{var e=decodeURIComponent(b)}catch(u){e=b.match(s6);for(var l=1;l<e.length;l++)b=yO(e,l).join(""),e=b.match(s6);e=b}e!==k[0]&&(d[k[0]]=e)}k=t6.exec(a)}d["%C2"]="\ufffd";k=Object.keys(d);for(b=0;b<k.length;b++)e=k[b],a=a.replace(new RegExp(e,"g"),d[e]);return a}};var woa={},ada=oh,B0=loa,Yca=Vx,Zca=Rk,$ca=r6,u6=/[#@] sourceMappingURL=([^\s'"]*)/,bda=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+u6.source+
")\\s*\\*/|//(?:"+u6.source+"))\\s*"),cda=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,dda=/^(?:application|text)\/json$/,eda="utf-8",fda=/\/?$/,xoa=woa={resolveSourceMap:y0,resolveSourceMapSync:A0,resolveSources:C0,resolveSourcesSync:E0,resolve:function(a,d,k,b,e){function l(q){C0(q.map,q.sourcesRelativeTo,k,b,function(u,w){if(u)return e(u);q.sourcesResolved=w.sourcesResolved;q.sourcesContent=w.sourcesContent;e(null,q)})}"function"===typeof b&&(e=b,b={});if(null===a){var p={sourceMappingURL:null,url:d,
sourcesRelativeTo:d,map:null};a=mA(d);k(a,function(q,u){if(q)return q.sourceMapData=p,e(q);p.map=String(u);try{p.map=fx(p.map,p)}catch(w){return e(w)}l(p)})}else y0(a,d,k,function(q,u){if(q)return e(q);if(!u)return e(null,null);l(u)})},resolveSync:function(a,d,k,b){if(null===a)a={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null},a.map=x0(k,d,a),a.map=fx(a.map,a);else if(a=A0(a,d,k),!a)return null;d=E0(a.map,a.sourcesRelativeTo,k,b);a.sourcesResolved=d.sourcesResolved;a.sourcesContent=d.sourcesContent;
return a},parseMapToJSON:fx},yoa=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},AO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,v6={},F0=h6,zoa=cj;v6=Kk;zoa(Kk,F0);Kk.prototype.compile=function(a){return a.stylesheet.rules.map((this||AO).visit,this||AO).join("")};Kk.prototype.comment=function(a){return this.emit("",
a.position)};Kk.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};Kk.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Kk.prototype.document=function(a){return this.emit("@"+(a.vendor||"")+"document "+a.document,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Kk.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};Kk.prototype.namespace=
function(a){return this.emit("@namespace "+a.namespace+";",a.position)};Kk.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Kk.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+this.emit("{")+this.mapVisit(a.keyframes)+this.emit("}")};Kk.prototype.keyframe=function(a){var d=a.declarations;return this.emit(a.values.join(","),a.position)+this.emit("{")+this.mapVisit(d)+
this.emit("}")};Kk.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", "):"";return this.emit("@page "+d,a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")};Kk.prototype["font-face"]=function(a){return this.emit("@font-face",a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")};Kk.prototype.host=function(a){return this.emit("@host",a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Kk.prototype["custom-media"]=function(a){return this.emit("@custom-media "+
a.name+" "+a.media+";",a.position)};Kk.prototype.rule=function(a){var d=a.declarations;return d.length?this.emit(a.selectors.join(","),a.position)+this.emit("{")+this.mapVisit(d)+this.emit("}"):""};Kk.prototype.declaration=function(a){return this.emit(a.property+":"+a.value,a.position)+this.emit(";")};var Aoa=v6,Rl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Rq={};Rq=function(a){a._comment=a.comment;a.map=new $e;a.position={line:1,column:1};a.files={};for(var d in Rq)a[d]=
Rq[d]};var w6=function(a){return"\\"===Rk.sep?a.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):a};Rq.updatePosition=function(a){var d=a.match(/\n/g);d&&((this||Rl).position.line+=d.length);d=a.lastIndexOf("\n");(this||Rl).position.column=~d?a.length-d:(this||Rl).position.column+a.length};Rq.emit=function(a,d){if(d){var k=w6(d.source||"source.css");(this||Rl).map.addMapping({source:k,generated:{line:(this||Rl).position.line,column:Math.max((this||Rl).position.column-1,0)},original:{line:d.start.line,
column:d.start.column-1}});this.addFile(k,d)}this.updatePosition(a);return a};Rq.addFile=function(a,d){"string"!==typeof d.content||Object.prototype.hasOwnProperty.call((this||Rl).files,a)||((this||Rl).files[a]=d.content)};Rq.applySourceMaps=function(){Object.keys((this||Rl).files).forEach(function(a){var d=(this||Rl).files[a];(this||Rl).map.setSourceContent(a,d);if(!1!==(this||Rl).options.inputSourcemaps&&(d=xoa.resolveSync(d,a,yoa))){var k=new yh(d.map);(this||Rl).map.applySourceMap(k,a,w6(Rk.dirname(d.sourcesRelativeTo)))}},
this||Rl)};Rq.comment=function(a){return/^# sourceMappingURL=/.test(a.comment)?this.emit("",a.position):this._comment(a)};var Boa=Rq,Coa={},Doa=Coa=function(a,d){d=d||{};var k=d.compress?new Aoa(d):new koa(d);return d.sourcemap?(Boa(k),a=k.compile(a),k.applySourceMaps(),d="generator"===d.sourcemap?k.map:k.map.toJSON(),{code:a,map:d}):a=k.compile(a)},SR={};SR.parse=ioa;SR.stringify=Doa;var uh=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");uh.obj=df;uh.promise=Vf;uh.string=rg;uh.pt=
bh;uh.Morph=Vi;uh.vdom=ZA;uh.addOrChangeCSSDeclaration=Qo;uh.css=SR;var BJ=uh.vdom;uh.diff=BJ.diff;uh.patch=BJ.patch;uh.h=BJ.h;uh.createElement=BJ.create;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("CustomVNode")&&"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),
value:function(b,e){this.morph=b;this.renderer=e;this.morphVtree=null;this.key="custom-"+b.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var b=this.morph,e=this.morphVtree=this.renderer.renderMorph(b),l="customNode-key-"+b.id;e.children[0]&&e.children[0].key===l||e.children.unshift(uh.h(b.domNodeTagName||"div",{key:l},[]));b._updateCSSDeclaration&&(b.ensureCSSDeclaration(),b._updateCSSDeclaration=!1);return e}},{key:"init",value:function(){var b=uh.createElement(this.renderMorph(),
this.renderer.domEnvironment);b.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return b}},{key:"update",value:function(b,e){b=b.morphVtree||this.renderMorph();var l=this.renderMorph();b=uh.diff(b,l);uh.patch(e,b);return null}},{key:"destroy",value:function(b){(b=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&b.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var ss=za("V",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:
d.HTMLMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var b=this;try{var e=uh.css.parse(this.cssDeclaration);this.whenRendered().then(function(){e.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(p){return"#"+b.id+" "+p}))});uh.addOrChangeCSSDeclaration("css-for-"+b.id,uh.css.stringify(e))})}catch(l){console.error("Error setting cssDeclaration of "+
this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&
this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new uh.CustomVNode(this,b)}},{key:"menuItems",value:function(){var b=this,e=Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift(["edit CSS...",function(){return b.world().execCommand("open workspace",{language:"css",content:b.cssDeclaration,target:b})}],["edit html...",function(){return b.world().execCommand("open workspace",{language:"html",content:b.html,target:b})}],{isDivider:!0});return e}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:uh.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(b){this.domNode.innerHTML=b;var e=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).find(function(w){return w.master});if(e)e.master.onMorphChange(this,{prop:"html",value:b});if(b.includes("<script"))for(b=this.domNode.querySelectorAll("script"),
b=$jscomp.makeIterator(b),e=b.next();!e.done;e=b.next()){var l=e.value;e=l.parentNode;l.remove();for(var p=document.createElement("script"),q=$jscomp.makeIterator(l.attributes),u=q.next();!u.done;u=q.next())u=u.value,p.setAttribute(u.name,u.value);l=$jscomp.makeIterator(l.childNodes);for(q=l.next();!q.done;q=l.next())p.appendChild(q.value);e.appendChild(p)}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},
domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(b){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(b,this.domNode);return this._domNode=b}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return uh.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,
set:function(b){this.setProperty("cssDeclaration",b);b?(this.makeDirty(),this._updateCSSDeclaration=!0):(b=this.env.domEnv.document.getElementById("css-for-"+this.id))&&b.remove()}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2752,end:7157})}(uh.Morph));uh.HTMLMorph=ss;uh.HTMLMorph=
ss;uh.HTMLMorph=ss;var OB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):
null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(b,e){e=void 0===e?{}:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){p=e;if(q=void 0===p.keepScroll?!0:p.keepScroll)u=l.iframeScroll;l.srcDoc=b;return w.yield(l.whenLoaded(),2)}q&&u&&(l.iframeScroll=u);return w.return(l)})}},{key:"loadURL",value:function(b,e){e=void 0===e?{}:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress){p=e;if(q=void 0===p.keepScroll?!0:p.keepScroll)u=l.iframeScroll;l.src=b;return w.yield(l.whenLoaded(),2)}q&&u&&(l.iframeScroll=u);return w.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b=(new uh.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,b.srcDoc="",b.src="http://localhost:9011/worlds/html%20export",e.yield(b.loadURL("https://google.com"),2);b.iframe.src;
b.iframe.srcDoc;b.src="";b.srcDoc="fooo";return e.yield(b.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(b){this.iframe.removeAttribute("srcDoc");this.iframe.src=b;var e=uh.promise.deferred().resolve;this._whenLoaded=
uh.promise;this.iframe.onload=function(l){return e(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(b){this.iframe.removeAttribute("src");this.iframe.srcdoc=b;this._whenLoaded=this.whenRendered().then(function(){return uh.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var b=this.iframe.contentWindow;return uh.pt(b.scrollX,b.scrollY)}catch(e){return uh.pt(0,0)}},set:function(b){try{this.iframe.contentWindow.scrollTo(b.x,
b.y)}catch(e){}}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7167,end:10464})}(uh.HTMLMorph);uh.IFrameMorph=OB;uh.IFrameMorph=OB;uh.IFrameMorph=OB;var Eoa=Object.freeze({__proto__:null,HTMLMorph:ss,IFrameMorph:OB}),oj=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
oj.arr=Ke;oj.obj=df;oj.rect=wk;oj.ShadowObject=An;oj.morph=$i;var Lp=za("ay",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),k=d.hasOwnProperty("StyleSheet")&&"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){oj.obj.isObject(b)&&!e&&(e=b,b=null);
this.rules=e;for(var l in e)e[l]=this.unwrapFoldedProps(e[l]);this.name=b}},{key:"copy",value:function(){var b={},e;for(e in this.rules)b[e]=Object.assign({},this.rules[e]);return new oj.StyleSheet(this.name,b)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(b){this._context=b}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(b){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(e){if(e in
b){var l=b[e];l||(l=0);b[e]=4==oj.arr.intersect(oj.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return b}},{key:"removeRule",value:function(b){delete this.rules[b];this.context.requestStyling()}},{key:"setRule",value:function(b,e){this.rules[b]=this.unwrapFoldedProps(e);this.context.requestStyling()}},{key:"toggleRule",value:function(b,e){this.rules[b]._deactivated=!e;this.context.requestStyling()}},{key:"applicableRules",value:function(){var b=
{},e;for(e in this.rules)b[e]={styleSheet:this,rule:e};return b}},{key:"toJSExpr",value:function(){return"new StyleSheet("+oj.obj.inspect(this.rules,{customPrinter:function(b,e,l){return b&&b.isColor||b&&b.isGradient?b.toJSExpr():b&&b.isPoint?b.toString():b&&oj.arr.all([b.top,b.left,b.right,b.bottom],function(p){return p&&oj.obj.equals(p,b.top)})?l(b.top):b&&oj.obj.keys(b).includes("_rev")?l(oj.obj.dissoc(b,["_rev","_deactivated"])):e},escapeKeys:!0})+")"}},{key:"applyRule",value:function(b,e,l){var p=
this.rules[b];if(p._deactivated)return{};p=oj.obj.dissoc(p,["_deactivated"]);return e.withMetaDo({styleSheetChange:!0},function(){if("layout"in p){var q=p.layout.copy();q.container=e;p.layout=q}"dropShadow"in p&&(p.dropShadow=new oj.ShadowObject(p.dropShadow),p.dropShadow.morph=e);"padding"in p&&(p.padding=p.padding.isRect?p.padding:oj.rect(p.padding,p.padding));q=oj.obj.keys(p).filter(function(A){return!oj.obj.equals(e[A],p[A])});q=oj.obj.select(p,q);var u=e.propertiesAndPropertySettings().properties,
w={},y;for(y in p)w[y]=u[y]&&u[y].defaultValue||e[y];l?e.animate(Object.assign({},q,{duration:l.duration,easing:l.easing})):Object.assign(e,q);return w})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));oj.StyleSheet=Lp;oj.StyleSheet=Lp;oj.StyleSheet=Lp;var Cf=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Cf.obj=df;Cf.arr=Ke;Cf.num=Dj;Cf.Rectangle=Od;Cf.rect=wk;Cf.Color=of;Cf.pt=bh;Cf.connect=Jj;Cf.noUpdate=ir;Cf.signal=xk;Cf.disconnect=No;Cf.Text=Go;Cf.Range=rs;Cf.HTMLMorph=ss;Cf.Icon=Ml;Cf.morph=$i;var TR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?
d.InputLine:d.InputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Cf.connect(this,"textChange",this,"onInputChanged");Cf.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var b=this,
e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(e=[{command:"change placeholder",target:b},{isDivider:!0}],l=e.concat,p=$jscomp,q=p.arrayFromIterable,u.yield(Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),2)):u.return(l.call(e,q.call(p,u.yieldResult)))})}},{key:"onChange",value:function(b){"extent fontSize padding fontFamily position selection".split(" ").includes(b.prop)&&this.updatePlaceholder();return Kb._get(Object.getPrototypeOf(k.prototype),
"onChange",this).call(this,b)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(b){this._inputHistory=b;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Kb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderColor=Cf.Color.red,e._errorIcon=e.addMorph(e._errorIcon||Cf.morph({type:"label",value:[" "+b,{fontSize:e.fontSize}," ",{}].concat($jscomp.arrayFromIterable(Cf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:e.fontSize,fontColor:Cf.Color.red,opacity:0,reactsToPointer:!1,fill:Cf.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Cf.Color.transparent)}},{key:"updatePlaceholder",value:function(){var b=this.getSubmorphNamed("placeholder");if(b)if(this.input.length)b.visible=!1;else{var e=this.innerBounds();b.fontSize=this.fontSize;b.visible=!0;b.height=this.height;b.padding=this.padding;b.defaultTextStyle=this.defaultTextStyle;b.lineHeight=this.height+"px";b.fit();b.topLeft=this.label.length?e.topLeft().addXY(0,
this.borderWidth):e.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var b=this.input;this.onInput(b);return b}},{key:"onInput",value:function(b){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();Cf.signal(this,"inputAccepted",b)}},{key:"onInputChanged",value:function(b){Cf.signal(this,"inputChanged",b);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(b){b=b.isRange?b:new Cf.Range(b);if(!b.isEmpty())return b=b.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
Kb._get(Object.getPrototypeOf(k.prototype),"deleteText",this).call(this,b)}},{key:"addInputToHistory",value:function(b){var e=this.inputHistory,l=e.items;if(Cf.arr.last(l)!==b){l.push(b);l.length>e.max&&(e.items=l=l.slice(-e.max));e.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=e.items.length-1;l--;)e.items[l]===b&&(e.items.splice(l,1),e.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,e)}}},{key:"browseHistory",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e=b.inputHistory.items.map(function(w,y){return{isListItem:!0,string:w,value:y}}).reverse(),u.yield(b.world().filterableListPrompt("Choose item:",e,{commands:[b.histEditCommandForHistBrowse()]}),2);l=u.yieldResult;p=$jscomp.makeIterator(l.selected);q=p.next().value;"number"===typeof q&&b.setAndShowHistItem(q);b.focus();u.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var b=this;return{name:"edit history "+this.historyId,exec:function(e){var l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress)return l=b.inputHistory.items.slice().reverse(),w.yield(e.world().editListPrompt("edit history "+b.historyId,l),2);p=w.yieldResult;q=p.status;u=p.list;if("canceled"===q)return w.return(!0);l=l.filter(function(y){return y.isListItem?u.includes(y.value):u.includes(y)});b.inputHistory=Object.assign({},b.inputHistory,{items:l});e.get("list").items=l.map(function(y,A){return{isListItem:!0,string:y,value:A}}).reverse();return w.return(!0)})}}}},{key:"setAndShowHistItem",value:function(b){var e=
this.inputHistory,l=e.items,p=l.length-1;Cf.num.between(b,0,p+1)?e.index=b:e.index=b=p;this.input!==l[b]&&"undefined"!==typeof l[b]&&(this.input=l[b])}},{key:"showHistItem",value:function(b){b=b||"next";var e=this.inputHistory,l=e.items,p=l.length-1,q=e.index;Cf.num.between(q,0,p+1)||(e.index=q=p);if(this.input!==l[q]&&"undefined"!==typeof l[q])this.input=l[q];else{if("next"===b){if(q>p)return;q=++e.index}else{if(0>=q)return;q=--e.index}this.input=l[q]||""}}},{key:"commands",get:function(){var b=
this;return[{name:"change placeholder",exec:function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter Placeholder:",{input:b.placeholder}),2);if(e=l.yieldResult)b.placeholder=e;l.jumpToEnd()})}},{name:"accept input",exec:function(){b.acceptInput();return!0}},{name:"show previous input from history",exec:function(){b.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){b.showHistItem("next");
return!0}},{name:"browse history",exec:function(){b.browseHistory();return!0}},{name:"remove items from history",exec:function(e){var l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return l=e.inputHistory,p=l.items.map(function(y,A){return{isListItem:!0,string:y,value:A}}).reverse(),w.yield(e.world().filterableListPrompt("Choose items to delete:",p,{multiSelect:!0}),2);q=w.yieldResult;u=q.selected;Cf.arr.sort(u).reverse().forEach(function(y){y<l.index&&
l.index--;l.items.splice(y,1)});e.inputHistory=l;return w.return(!0)})}}].concat(Kb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode().createElement("input"),l=b.querySelector(".newtext-text-layer.actual");e.id=b.id;e.className=b.className;e.style=b.style.cssText;Object.assign(e.style,Cf.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));e.placeholder=this.placeholder;e.type="text";e.autocomplete=e.name=this.name.replace(/[\s"]/g,
"-");return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(b){if("undefined"===typeof localStorage)return null;try{var e=localStorage.getItem("lively.morphic-inputline-"+b);return e?JSON.parse(e):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(b,e){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+b,JSON.stringify(e))}catch(l){console.error(l)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(b){var e=this.histories.get(b);if(e)return e;e=this.getHistoryFromLocalSorage(b)||{items:[],max:50,index:0};this.histories.set(b,e);return e}},{key:"setHistory",value:function(b,e){e=void 0===e?{items:[],max:50,index:0}:e;this.histories.set(b,e);this.addHistoryToLocalStorage(b,e);return e}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:Cf.pt(100,20)},padding:{defaultValue:Cf.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(b){var e=this;this.setProperty("label",b);this.textString.startsWith(b)||Cf.noUpdate(function(){e.textString=b+e.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(b){this.textString=this.label+(b?String(b):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var b=this.getSubmorphNamed("placeholder");return b?b.value:null},set:function(b){var e=this.getSubmorphNamed("placeholder");b?e?(e.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Cf.Color.gray}),e.value=b):this.addMorph(Cf.Text.makeLabel(b,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Cf.Color.gray}))):e&&e.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14839})}(Cf.Text);TR=Cf.InputLine;var PB=za("aB",TR),ts=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("PasswordInputLine")&&
"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onChange",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"borderRadius"==b.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.onLoad()}},{key:"onChange",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);["fill","borderRadius"].includes(b.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.whenRendered(),2);b.ensureInputNode().then(function(l){b.updateHtml(b.input);l.onkeydown=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,
b,"onKeyDown")};l.onkeyup=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,b,"onKeyUp")}});e.jumpToEnd()})}},{key:"onMouseDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(b){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var b=this;return this.whenRendered().then(function(){var e=b.domNode;e.parentNode&&"INPUT"==e.parentNode.tagName&&(e.parentNode.remove(),
e=b.env.renderer.getNodeForMorph(b),e.insertBefore(b.domNode,e.firstChild));return b.domNode})}},{key:"onKeyDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),
"onFocus",this).call(this,b);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderWidth=3,e.borderColor=Cf.Color.red,e._errorIcon=e.addMorph(e._errorIcon||Cf.morph({type:"label",value:[" "+b,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Cf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Cf.Color.red,opacity:0,reactsToPointer:!1,fill:Cf.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Cf.Color.transparent)}},{key:"acceptInput",value:function(){var b=this.input;Cf.signal(this,"inputAccepted",b);return b}},{key:"onInputChanged",value:function(b){this.clearError();Cf.signal(this,"inputChanged",b)}},{key:"updateHtml",value:function(b){var e=this,l,p,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress)return l=e,p=l.fontSize,
q=l.fontFamily,u=l.padding,w=l.placeholder,y=void 0===l.fill?of.white:l.fill,A=l.borderRadius,C=u.top(),E=u.right(),L=u.bottom(),I=u.left(),T.yield(e.ensureInputNode(),2);V=T.yieldResult;V.setAttribute("type","password");V.setAttribute("placeholder",w);V.setAttribute("value",b);Object.assign(V.style,{position:"absolute",width:"calc(100% - "+I+"px - "+E+"px)","border-width":0,outline:"none","border-radius":A.valueOf()+"px",background:y.toString(),padding:C+"px "+E+"px "+L+"px "+I+"px","font-size":p+
"px","font-family":""+q});T.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept input",exec:function(){b.acceptInput();return!0}}].concat(Kb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode(),
l=e.createElement("div"),p=b.querySelector("input");e=e.createElement("input");p.childNodes[0]&&"INPUT"===p.childNodes[0].tagName&&(p=p.childNodes[0]);e.id=b.id;e.className=b.className;l.style=b.style.cssText;Object.assign(e.style,Cf.obj.select(p.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));e.style.position="absolute";e.style.width=b.style.width;e.style.height=b.style.height;e.style["border-width"]=b.style["border-width"];e.placeholder=
this.placeholder;e.type="password";e.autocomplete=e.name=this.name.replace(/[\s"]/g,"-");l.appendChild(e);l.appendChild(b.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Cf.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(b){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(b){this.domNode.value=b;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(b){this.setProperty("placeholder",b);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(b){this.setProperty("fontSize",b);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(b){this.setProperty("fontFamily",b);this.updateHtml(this.input)}},padding:{defaultValue:Cf.Rectangle.inset(2),after:["input"],set:function(b){this.setProperty("padding",b);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14914,end:21842})}(Cf.HTMLMorph);
Cf.PasswordInputLine=ts;Cf.PasswordInputLine=ts;Cf.PasswordInputLine=ts;Cf.default=TR;var Ue=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Ue.default=ok;Ue.config=ok;Object.assign(Ue,Zma);Object.assign(Ue,aoa);Object.assign(Ue,foa);Object.assign(Ue,goa);Object.assign(Ue,coa);Object.assign(Ue,Eoa);Object.assign(Ue,Hha);Object.assign(Ue,W1);Ue.StyleSheet=Lp;Ue.StyleSheet=Lp;Ue.ShadowObject=An;Ue.ShadowObject=An;Ue.addOrChangeCSSDeclaration=Qo;Ue.addOrChangeCSSDeclaration=Qo;Ue.addOrChangeLinkedCSS=
tt;Ue.addOrChangeLinkedCSS=tt;Ue.easings=Bn;Ue.easings=Bn;Ue.stringToEasing=lr;Ue.stringToEasing=lr;Object.assign(Ue,$ma);Ue.Icon=Ml;Ue.Icon=Ml;Ue.loadMorphFromSnapshot=hp;Ue.loadMorphFromSnapshot=hp;Object.assign(Ue,ana);Ue.World=wq;Ue.Hand=Tx;Ue.Morph=Vi;Ue.Image=Tu;Ue.Ellipse=Su;Ue.Triangle=Nx;Ue.Path=Uu;Ue.Polygon=Ox;Ue.LineMorph=Px;Ue.Text=Go;Ue.Label=Ho;Ue.HTMLMorph=ss;Ue.InputLine=PB;Ue.PasswordInputLine=ts;Ue.InputLine=PB;Ue.InputLine=PB;Ue.PasswordInputLine=ts;Ue.PasswordInputLine=ts;Ue.locateClass=
Mo;Ue.morph=$i;Ue.addClassMappings=Ty;Ue.inspect=xu;Ue.touchInputDevice=Ll;Ue.addClassMappings({default:Ue.Morph,world:Ue.World,hand:Ue.Hand,image:Ue.Image,ellipse:Ue.Ellipse,triangle:Ue.Triangle,path:Ue.Path,text:Ue.Text,input:Ue.InputLine,label:Ue.Label,polygon:Ue.Polygon,line:Ue.LineMorph,html:Ue.HTMLMorph});Ue.morph=$i;Ue.morph=$i;Ue.inspect=xu;Ue.inspect=xu;Ue.touchInputDevice=Ll;Ue.touchInputDevice=Ll;var Foa=Object.freeze({__proto__:null,config:ok,StyleSheet:Lp,ShadowObject:An,addOrChangeCSSDeclaration:Qo,
addOrChangeLinkedCSS:tt,easings:Bn,stringToEasing:lr,Icon:Ml,loadMorphFromSnapshot:hp,InputLine:PB,PasswordInputLine:ts,morph:$i,inspect:xu,touchInputDevice:Ll,Morph:Vi,Ellipse:Su,Triangle:Nx,Image:Tu,PathPoint:KB,Path:Uu,Polygon:Ox,LineMorph:Px,World:wq,Hand:Tx,Text:Go,Label:Ho,Anchor:Ux,HTMLMorph:ss,IFrameMorph:OB,MorphicEnv:qn,CustomLayout:JA,SnapLayout:KA,VerticalLayout:$r,HorizontalLayout:so,ProportionalLayout:LA,CenteredTilingLayout:MA,TilingLayout:NA,CellGroup:OA,LayoutColumn:PA,LayoutRow:QA,
LayoutCell:RA,GridLayout:as,TooltipViewer:Rx,Tooltip:Vu,MorphicDB:Gp}),rk=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");rk.Morph=Vi;rk.stringToEasing=lr;rk.easings=Bn;rk.pt=bh;rk.num=Dj;rk.Path=Ag;rk.promise=Vf;rk.fun=Qj;var x6=function(a){var d=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),k=d.hasOwnProperty("ModuleProgress")&&"function"===typeof d.ModuleProgress?d.ModuleProgress:d.ModuleProgress=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&rk.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var b=this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(b.map(function(e){return[e,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(e){e._cachedTextBounds=null;e.fit()})}},{key:"updateProgressBar",
value:function(){if(this._lastWidth){this.relayout();var b=this.get("progress path"),e=rk.stringToEasing(rk.easings.inOutExpo)(rk.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);b.width=rk.num.interpolate(e,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){1==u.nextAddress&&(b.reset(),e="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),
l=$jscomp.makeIterator(e),p=l.next());if(3!=u.nextAddress){if(p.done)return u.jumpTo(0);q=p.value;b.finishPackage({packageName:q,loaded:!0});return u.yield(rk.promise.delay(200),3)}p=l.next();return u.jumpTo(2)})}},{key:"finishPackage",value:function(b){var e=this,l=b.frozen,p=b.loaded;b="stage "+b.packageName.replace("lively.","");b=this.get(b);l&&this.stages.set(b,"frozen");p&&this.stages.set(b,"loaded");rk.fun.debounceNamed("update progress",200,function(){e.updateProgressVisualization()})()}},
{key:"updateProgressVisualization",value:function(){var b=this,e=this.getSubmorphNamed("progress path"),l=this.getAllNamed(/stage/),p=l[0];l.forEach(function(q){var u=q.get("checkmark"),w=q.get("frozen indicator"),y=q.get("icon");q=b.stages.get(q);if("not loaded"!=q){p=u;if("loaded"==q){if(u.visible)return;u.animate({duration:300,visible:!0})}if("frozen"==q){if(w.visible)return;w.animate({duration:300,visible:!0})}y.opacity=1}else u.visible=!1,w.visible=!1,y.opacity=.2});l=this.localizePointFrom(rk.pt(-20,
0),p).x;l=Math.max(20,l-e.left);e.visible=20==l?!1:!0;this._lastWidth=e.width;this._timeStamp=Date.now();this._currentProgress=l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var b=this;this.whenRendered().then(function(){b.reset()})}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(rk.Morph);x6=rk.ModuleProgress;rk.default=x6;var bg=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");bg.promise=Vf;bg.fun=Qj;bg.num=Dj;bg.Icon=Ml;bg.stringToEasing=lr;bg.easings=Bn;bg.VerticalLayout=$r;bg.ShadowObject=An;bg.HorizontalLayout=so;bg.morph=$i;bg.Morph=Vi;bg.StyleSheet=Lp;bg.Image=Tu;bg.pt=bh;bg.RadialGradient=Kl;bg.rect=wk;bg.Rectangle=Od;bg.Color=of;bg.connect=Jj;
(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"test",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(b.progress=0);if(!(1>b.progress))return e.jumpTo(0);
b.progress+=.1;return e.yield(bg.promise.delay(1E3),2)})}},{key:"update",value:function(){var b=this;setTimeout(function(){b.world()||b.stopStepping()},1E3);if(this._lastWidth){var e=this.get("progress path"),l=bg.stringToEasing(bg.easings.inOutExpo)(bg.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),p=this._targetWidth;e.topLeft=bg.pt(0,0);e.height=this.height;e.width=this._lastWidth>p?p:bg.num.interpolate(l,this._lastWidth,p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},
{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(b){var e=this.get("progress path");this._lastWidth=Math.max(e.width,this._targetWidth,1);this._targetWidth=this.width*b;this._timeStamp=Date.now();this.setProperty("progress",b)}},fill:{defaultValue:bg.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",
fill:bg.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(bg.Morph);var UR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("LoadingIndicator")&&"function"===typeof d.LoadingIndicator?
d.LoadingIndicator:d.LoadingIndicator=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);var e=this.ui;b=e.label;var l=e.closeButton;if(e=e.progressBar)e.opacity=0,e.isLayoutable=!1;bg.connect(this,"extent",this,"relayout");
bg.connect(b,"extent",this,"relayout");bg.connect(b,"value",this,"updateLabel");bg.connect(b,"fontSize",this,"updateLabel");bg.connect(b,"fontFamily",this,"updateLabel");bg.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=e.ui,(p=l.progressBar)||(p=e.addMorph(new bg.ProgressBar({name:"progress bar"}))),q=e.center,0==b?(p.isLayoutable=!1,p.opacity=
0):(p.isLayoutable=!0,p.opacity=1),p.progress=b,u.yield(e.whenRendered(),2);e.center=q;u.jumpToEnd()})}},{key:"hideSpinner",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!b.ui.spinner)return e.return();b.ui.spinner.visible=!1;b.ui.spinner.width=50;b.ui.spinner.remove();return e.yield(b.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var b=this.center;this.relayout();this.center=b}},{key:"relayout",
value:function(){bg.Rectangle.inset(20,12);var b=this.ui,e=b.label,l=b.progressBar,p=b.status;b.closeButton.topRight=this.innerBounds().insetBy(2).topRight();l.extent=bg.pt(e.owner.bounds().width,5);p[p.visible?"top":"bottom"]=e.height}},{key:"onHoverIn",value:function(b){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(b){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(b,e){var l=bg.morph(Object.assign({type:bg.LoadingIndicator},
e,{label:b}));if(e&&e.animated)return bg.promise.delay(e.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.top+=25;l.animate({top:l.top-25,easing:bg.easings.outExpo});l.animate({opacity:1,easing:bg.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.ui.label.fit()});return l}},{key:"forPromise",value:function(b,e,l){var p=this.open(e,l);bg.promise.finally(Promise.resolve(b),
function(){return p.remove()});return p}},{key:"runFn",value:function(b,e,l){var p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return q=p.open(e,l),u.yield(q.whenRendered(),2);case 2:return u.setFinallyBlock(3),u.yield(b(q),5);case 5:return u.return(u.yieldResult);case 3:u.enterFinallyBlock(),q.remove(),u.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},
hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(b){this.animateProgress(bg.num.clamp(b,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(b){this.ui.label.value=b}},status:{derived:!0,
after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(b){var e=this.ui.status;b?(e.visible=!0,e.value=b):(e.visible=!1,e.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(b){this.ui.label.fontFamily=b}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(b){this.ui.label.fontSize=b}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+
"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:bg.pt(86.2,70.2)},{type:"label",name:"ld label",extent:bg.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:bg.Icon.textAttribute("times")},{type:bg.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2099,end:8211})}(bg.Morph);UR=bg.LoadingIndicator;var Yx=za("q",UR);bg.default=UR;var ih=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");ih.Morph=Vi;ih.World=wq;ih.HorizontalLayout=so;ih.morph=$i;ih.MorphicDB=Gp;ih.graph=xq;ih.promise=Vf;ih.date=op;ih.string=rg;ih.arr=
Ke;ih.Color=of;ih.pt=bh;ih.LoadingIndicator=Yx;ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
ih.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersion")&&"function"===typeof d.WorldVersion?d.WorldVersion:d.WorldVersion=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"update",value:function(){var b=$jscomp.makeIterator(this.submorphs),e=b.next().value;b=b.next().value;e.imageUrl=this.commit.preview||ih.missingSVG;b.textAndAttributes=
this.info;b.fontColor=this.selected?ih.Color.white:ih.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:ih.Color.transparent},info:{derived:!0,get:function(){var b=this.commit,e=b.message,l=b.name,p=b.timestamp;return[b._id.slice(0,6)+" ",{fontWeight:"bold"},ih.string.truncate(e.split("\n")[0],40)+" ",{}," ("+l+" ",{},""+ih.date.format(new Date(p),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(b){this.setProperty("selected",
b);this.update()}},layout:{initialize:function(){this.layout=new ih.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:ih.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:ih.Color.gray}]}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(ih.Morph);var y6=function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersionViewer")&&"function"===typeof d.WorldVersionViewer?d.WorldVersionViewer:d.WorldVersionViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(b){switch(b.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var b=this,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return e=b.get("version list").selection,l=ih.LoadingIndicator.open("Loading "+e.name+"..."),p=$world,q=b.db||
ih.MorphicDB.default,u=e._id,C.setCatchFinallyBlocks(2,3),u?C.yield(ih.World.loadFromCommit(u,void 0,{morphicDB:q}),8):C.yield(ih.World.loadFromDB(e.name,e.ref,void 0,{morphicDB:q}),7);case 7:w=C.yieldResult;C.jumpTo(6);break;case 8:w=C.yieldResult;case 6:return y=w,C.return(y);case 3:C.enterFinallyBlock();l.remove();C.leaveFinallyBlock(0);break;case 2:A=C.enterCatchBlock(),console.error(A),p.showError("Error loading world:"+A),C.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var b=
this,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){e=b.get("version list").selection;if(!e)return y.return();l=b.db||ih.MorphicDB.default;p=e;q=p._id;u=p.name;w=p.type;return y.yield(l.revert(w,u,q,"HEAD"),2)}return y.return(b.initializeFromStartCommit(e,l,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(b,e,l){e=void 0===e?ih.MorphicDB.default:e;l=void 0===l?{}:l;var p=this,q,u,w,y,A,C,E,L,I,V,T,Y,na,Ba,F,W,P,S,fa,aa,oa,
Va,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:return q=l,u=void 0===q.showRefs?!0:q.showRefs,w=p.startCommit=b,y=w._id,A=w.type,C=w.name,E=p.getSubmorphNamed("version list spinner"),E.visible=!0,E.center=p.get("version list").center,p.db=e,qa.yield(e.history(A,C),2);case 2:L=qa.yieldResult,I=L.refs,V=L.history,T=y,Y=ih.graph.invert(V),na=ih.graph.hull(Y,y),Ba={_id:!0},F=[b],W=$jscomp.makeIterator(na),P=W.next();case 3:if(P.done)return aa=ih.arr.max(F,
function(ja){return ja.timestamp}),T=aa._id,qa.yield(e.log(T,void 0,!0),7);S=P.value;return qa.yield(e.log(S,void 0,!0,Ba),6);case 6:fa=qa.yieldResult;F.push.apply(F,$jscomp.arrayFromIterable(fa));fa.forEach(function(ja){return Ba[ja._id]=!0});P=W.next();qa.jumpTo(3);break;case 7:oa=qa.yieldResult;if(u)for(Va in I);lb=oa.map(function(ja){var ta=new ih.WorldVersion({reactsToPointer:!1,commit:ja});ta.update();return{isListItem:!0,morph:ta,value:ja}});p.get("version list").items=lb;E.visible=!1;qa.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(ih.Morph);y6=ih.WorldVersionViewer;ih.default=y6;var Ig=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");Ig.Morph=
Vi;Ig.morph=$i;Ig.Icon=Ml;Ig.touchInputDevice=Ll;Ig.Rectangle=Od;Ig.LinearGradient=nk;Ig.Color=of;Ig.pt=bh;Ig.signal=xk;Ig.connect=Jj;Ig.arr=Ke;Ig.obj=df;Ig.Closure=ci;var Zx=za("B",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);p("fontSize",this.fontSize);this.label!=this.labelMorph.value&&p("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(b){var e=b.prop;if(this.label)switch(e){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"onSubmorphChange",value:function(b,e){e===this.labelMorph&&"extent"===b.prop&&this.relayout();return Kb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",this).call(this,b,e)}},{key:"fitLabelMorph",value:function(){var b=this;this.labelMorph.whenFontLoaded().then(function(){b.labelMorph.invalidateTextLayout();
b.labelMorph.fit()})}},{key:"relayout",value:function(){var b=this.labelMorph;if(b&&!this._relayouting){this._relayouting=!0;try{var e=this.padding,l=e.top(),p=e.bottom(),q=e.left(),u=e.right(),w=b.height+l+p,y=b.width+q+u;w>this.height&&(this.height=w);y>this.width&&(this.width=y);var A=this.innerBounds().insetByRect(e);b.center=A.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var b=this.padding,e=this.labelMorph;e.fit();this.extent=b.bottomLeft().addPt(b.bottomRight()).addPt(e.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{Ig.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(e){var b=this.world();b?b.logError(e):console.error(e)}}},{key:"considerPress",value:function(b){return Ig.touchInputDevice?!0:this.innerBoundsContainsPoint(b.positionIn(this))}},{key:"onMouseDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);b.isAltDown()||this.deactivated||!this.considerPress(b)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);b.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(b){Ig.touchInputDevice?(this.draggable=!0,this.pressed=null):Kb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){}},{key:"onHoverOut",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",
this).call(this,b);!Ig.touchInputDevice&&this.pressed&&b.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);Ig.touchInputDevice||this.deactivated||!b.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit button label",
{input:b.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);e=l.yieldResult;"string"===typeof e&&(b.label=e);l.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=Kb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["change label",function(){return b.interactivelyChangeLabel()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:Ig.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:Ig.pt(100,20)},borderColor:{defaultValue:Ig.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new Ig.LinearGradient({stops:[{offset:0,color:Ig.Color.white},{offset:1,color:Ig.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(b){this.setProperty("deactivated",b);this.nativeCursor=
b?"not-allowed":"pointer";this.labelMorph.opacity=b?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(b){this.getProperty("pressed");this.setProperty("pressed",b)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(b){this.labelMorph.fontSize=b},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(b){this.labelMorph.fontColor=b},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(b){var e=this.labelMorph;e&&e.remove();b.name="label";b.reactsToPointer=!1;this.addMorphAt(b,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(b){this.labelMorph.textAndAttributes=
b}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(b){b.isMorph?(this.setProperty("label",b.value),this.labelMorph=b):(this.setProperty("label",b),this.labelMorph.value=b,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=b));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(Ig.Morph));Ig.Button=Zx;Ig.Button=Zx;Ig.Button=Zx;var QB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"getMaster",value:function(b){return b?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var b=this.indicator;b.borderWidth=1;b.borderColor=Ig.Color.gray;this.selected=!1;Ig.connect(b,"onMouseUp",this,"select")}},{key:"morph",get:function(){var b=this.indicator;return this.submorphs.find(function(e){return e!==b})}},{key:"morph",set:function(b){var e=this.indicator;
this.submorphs.forEach(function(l){l!==e&&l.remove()});b.position=Ig.pt(50,0);this.addMorph(b)}},{key:"value",get:function(){if(!this.valueFn){try{var b=JSON.parse(this.valueFunctionString)}catch(e){b=this.valueFunctionString}this.valueFn=Ig.Closure.fromSource(b).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(b){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(b){var e=this;this.whenRendered().then(function(l){e.master={auto:e.getMaster(b)}});this.setProperty("selected",!!b)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(b){this.setProperty("valueFunctionString",b.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8302,end:10679})}(Ig.Morph);Ig.RadioButton=QB;Ig.RadioButton=
QB;Ig.RadioButton=QB;var RB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButtonGroup")&&"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"reset",value:function(){this.submorphs.forEach(function(b){return b.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(b,e){var l=new Ig.RadioButton;l.reset();l.morph=b;void 0!=e&&(l.internalValue=e,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(b){this.submorphs.forEach(function(e){e!==b&&(e.selected=!1)});b.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(b){return b.selected})}},
{key:"value",get:function(){var b=this.selectedButton;return b?b.value:null}},{key:"value",set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(b){return b.value})},set:function(b){var e=this;this.removeAllButtons();
if(Ig.obj.isArray(b)){if(0==b.length)return;b.forEach(function(l){e.addButton(Ig.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{b=[].concat($jscomp.arrayFromIterable(b.entries()));if(0==b.length)return;b.forEach(function(l){var p=$jscomp.makeIterator(l);l=p.next().value;p=p.next().value;e.addButton(Ig.morph({name:"label",type:"label",value:l,reactsToPointer:!1}),p)})}this.submorphs[0].master.whenApplied().then(function(){return e.setSelection(e.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var b=this.selectedButton;return b?b.value:null},set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10688,end:13602})}(Ig.Morph);
Ig.RadioButtonGroup=RB;Ig.RadioButtonGroup=RB;Ig.RadioButtonGroup=RB;var Goa=Object.freeze({__proto__:null,Button:Zx,RadioButton:QB,RadioButtonGroup:RB}),Vc=lively.FreezerRuntime.recorderFor("lively.components/list.js");Vc.asItem=SG;Vc.Morph=Vi;Vc.Text=Go;Vc.StyleSheet=Lp;Vc.Label=Ho;Vc.Icon=Ml;Vc.morph=$i;Vc.touchInputDevice=Ll;Vc.pt=bh;Vc.LinearGradient=nk;Vc.Color=of;Vc.Rectangle=Od;Vc.rect=wk;Vc.arr=Ke;Vc.Path=Ag;Vc.string=rg;Vc.signal=xk;Vc.noUpdate=ir;Vc.once=Yp;Vc.Button=Zx;Vc.bowser=zn;Vc.asItem=
SG;Vc.asItem=SG;var CJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"displayItem",value:function(b,e,l,p,q,u,w){u=void 0===u?!1:u;var y=b.morph,A=y?"":b.label||b.string||"no item.string";b.annotation?this.valueAndAnnotation=
{value:A,annotation:b.annotation}:"string"===typeof A?this.textString=A:this.value=A;this.tooltip=b.tooltip||this.tooltip||this.textString;0==b.tooltip&&(this.tooltip=!1);this.itemIndex=e;this.position=q;if(w){e=w.fontFamily;q=w.selectionColor;A=w.selectionFontColor;var C=w.nonSelectionFontColor,E=w.borderRadius,L=w.fontSize;w=w.padding;A&&this.selectionFontColor!==A&&(this.selectionFontColor=A);C&&this.nonSelectionFontColor!==C&&(this.nonSelectionFontColor=C);q&&this.selectionColor!==q&&(this.selectionColor=
q);E&&E!=this.borderRadius&&(this.borderRadius=E);L&&this.fontSize!==L&&(this.fontSize=L);e&&this.fontFamily!==e&&(this.fontFamily=e);w&&!this.padding.equals(w)&&(this.padding=w)}b.autoFit&&(y.width=l);this.extent=Vc.pt(y?Math.max(y.width,l):l,p);y?(b=y.getTransform().copy(),this.submorphs=[y],y.setTransform(b),y.position=Vc.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=u}},{key:"onDragStart",value:function(b){var e=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,
source:this,itemsTouched:[]};if(!e.multiSelect||!e.multiSelectViaDrag)e.onItemMorphDragged(b,this)}},{key:"onMouseDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.owner.owner.clickOnItem(b)}},{key:"onDrag",value:function(b){var e=this.owner.owner;if(e.multiSelect&&e.multiSelectViaDrag){b=b.hand.morphBeneath(b.position);var l=e.selectedIndexes,p=e.itemMorphs;b!==this&&p.includes(b)&&(this._dragState.sourceIsSelected&&!b.isSelected?(Vc.arr.pushIfNotIncluded(l,
b.itemIndex),e.selectedIndexes=l):!this._dragState.sourceIsSelected&&b.isSelected&&(Vc.arr.remove(l,b.itemIndex),e.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Vc.touchInputDevice},fill:{derived:!0,get:function(){return Vc.touchInputDevice&&this.pressed?Vc.Color.gray.withA(.5):this.isSelected?
this.selectionColor:Vc.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Vc.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Vc.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Vc.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5192})}(Vc.Label);Vc.ListItemMorph=CJ;Vc.ListItemMorph=CJ;Vc.ListItemMorph=CJ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"onScroll",value:function(b){return this.owner.update()}},{key:"onMouseDown",value:function(b){var e=this,l=this.scroll.y;if(Vc.touchInputDevice){var p=this.owner.itemForClick(b);p&&(p.pressed=!0,p.makeDirty(),setTimeout(function(){p.pressed=!1;if(0==l-e.scroll.y)return e.owner.clickOnItem(b)},300))}else return this.owner.clickOnItem(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:Vc.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5194,
end:6156})})(Vc.Morph);Vc.listCommands=[{name:"page up",exec:function(a){a.gotoIndex(Math.max(0,a.selectedIndex-Math.round(a.height/a.itemHeight)));return!0}},{name:"page down",exec:function(a){a.gotoIndex(Math.min(a.items.length-1,a.selectedIndex+Math.round(a.height/a.itemHeight)));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(0);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.items.length-1);return!0}},{name:"arrow up",exec:function(a){a.gotoIndex(a.indexUp());
return!0}},{name:"arrow down",exec:function(a){a.gotoIndex(a.indexDown());return!0}},{name:"select up",exec:function(a){var d=a.selectedIndexes;if(!a.multiSelect||!d.length)return a.execCommand("arrow up");var k=d[0];if("number"!==typeof k)a.selectedIndexes=[k];else{var b=a.indexUp(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}))}return!0}},{name:"select down",exec:function(a){var d=a.selectedIndexes;
if(!a.multiSelect||!d.length)return a.execCommand("arrow down");var k=d[0],b=a.indexDown(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}));return!0}},{name:"select all",exec:function(a){a.selectedIndexes=Vc.arr.range(a.items.length-1,0);a.scrollIndexIntoView(a.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return d=a.selectedIndex||0,e.yield(a.world().filterableListPrompt("Select item",a.items,{preselect:d,requester:a.getWindow()||a,itemPadding:Vc.Rectangle.inset(0,2),multiSelect:!0}),2);k=e.yieldResult;b=k.selected;b.length&&(a.multiSelect?a.selections=b:a.selection=b[0],a.scrollSelectionIntoView(),a.update());return e.return(!0)})}},{name:"realign top-bottom-center",exec:function(a){if(a.selection){var d=a.padding,k=a.itemHeight,b=a.scroll,e=b.x;b=b.y;var l=Vc.pt(0,a.selectedIndex*k);
d=a.height-k-d.top()-d.bottom();b=2>Math.abs(l.y-b)?l.y-d:2>Math.abs(l.y-b-.5*d)?l.y:l.y-.5*d;a.scroll=Vc.pt(e,b);return!0}}},{name:"print contents in text window",exec:function(a){var d="items of "+a.name,k=a.items.map(function(b){if("string"===typeof b)return b;var e=b.string,l=b.label;b=b.annotation;var p="";l?p="string"===typeof l?p+l:p+l.map(function(q,u){return 0==u%2?q:""}).join(""):e&&(p+=e);b&&(p+=" ",p="string"===typeof b?p+b:p+b[0]);return p}).join("\n");return a.world().execCommand("open text window",
{title:d,content:k,name:d,fontFamily:"Monaco, monospace"})}}];var $x=za("L",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"__additionally_serialize__",value:function(b,e,l,p){var q=this;Kb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);this.whenRendered().then(function(){return q.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Vc.touchInputDevice}},{key:"initializeSubmorphs",value:function(b){this.submorphs=b=b||this.submorphs||[];for(var e=0;e<b.length;e++)switch(b[e].name){case "listItemContainer":var l=b[e];continue;case "scroller":var p=b[e]}p||(p=this.addMorph(new Vc.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",
fill:Vc.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||p)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(b){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(b.prop)&&this.update();return Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"itemForClick",value:function(b){b=b.positionIn(this.world()).subPt(this.scroll);
b=this.listItemContainer.morphsContainingPoint(b);return b.find(function(e){return e.isListItem})||b[0]}},{key:"clickOnItem",value:function(b){var e=this.itemForClick(b),l=b.state.clickCount;if(!(b.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===l?"onItemMorphDoubleClicked":"onItemMorphClicked"](b,e)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(b){return this.items.find(function(e){return e===b||e.value===b})}},{key:"findIndex",value:function(b){return this.items.findIndex(function(e){return e===b||e.value===b})}},{key:"addItem",value:function(b){return this.addItemAt(b)}},{key:"addItemAt",value:function(b,e){var l=this;e=void 0===e?this.items.length:e;var p=this.items;e=Math.min(p.length,Math.max(0,e));p.splice(e,0,Vc.asItem(b));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[b,e],undo:{target:this,
selector:"removeItem",args:[b]}},function(){return l.update()})}},{key:"removeItem",value:function(b){var e=this;b=this.find(b);var l=this.items,p=l.indexOf(b);-1!==p&&(l.splice(p,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[b],undo:{target:this,selector:"addItemAt",args:[b,p]}},function(){return e.update()}))}},{key:"selectItemMorph",value:function(b){this.selectedIndexes=[b.itemIndex]}},{key:"gotoIndex",value:function(b){this.scrollIndexIntoView(this.selectedIndex=b)}},
{key:"indexUp",value:function(b){b="number"===typeof b?b:this.selectedIndex;return(b||this.items.length)-1}},{key:"indexDown",value:function(b){b=void 0===b?this.selectedIndex:b;return(("number"===typeof b?b:-1)+1)%this.items.length}},{key:"update",value:function(){var b=this,e=this.items;e&&this.scroller&&this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,q=b.listItemContainer,u=b.selectedIndexes,w=b.extent.y,y=b.fontSize,A=b.fontFamily,C=b.fontColor,E=b.padding,L=b.itemPadding,
I=b.selectionColor,V=b.selectionFontColor,T=b.nonSelectionFontColor,Y=b.itemBorderRadius,na=b.scrollBar,Ba=b.scroller,F=b.scrollable,W=Ba.scroll.y;E=E||Vc.Rectangle.inset(0);var P=E.top(),S=E.left(),fa=E.bottom();E=E.right();var aa=Math.max(0,Math.floor(W/l)),oa=Math.min(e.length,aa+w/l+2);w=0;E=b.width-(S+E);p=Vc.arr.sortBy(p,function(Ha){return Ha.itemIndex});var Va=$jscomp.makeIterator(Vc.arr.partition(p,function(Ha){return Ha.itemIndex<aa}));p=Va.next().value;var lb=Va.next().value;lb=$jscomp.makeIterator(Vc.arr.partition(lb,
function(Ha){return Ha.itemIndex>oa-1}));Va=lb.next().value;lb=lb.next().value;p=[].concat($jscomp.arrayFromIterable(Va),$jscomp.arrayFromIterable(lb),$jscomp.arrayFromIterable(p));for(Va=0;Va<oa-aa;Va++){lb=aa+Va;var qa=e[lb];if(!qa){p.slice(Va).forEach(function(Ha){Ha.remove()});break}var ja={fontSize:y,fontFamily:A,fontColor:T||C,padding:L,borderRadius:Y||0,selectionFontColor:V,nonSelectionFontColor:T,selectionColor:I},ta=p[Va];ta||(ta=p[Va]=q.addMorph(new Vc.ListItemMorph(ja)));ta.reactsToPointer=
!F;ta.displayItem(qa,lb,E,l,Vc.pt(0,l*lb),u.includes(lb),ja);w=Math.max(w,ta.width)}p.slice(oa-aa).forEach(function(Ha){return Ha.remove()});l=Math.max(P+fa+l*e.length,b.height);q.setBounds(Vc.pt(S,P).subXY(0,W).extent(Vc.pt(b.width,l)));Ba.extent=b.extent.subXY(b.borderWidthRight,b.borderWidthBottom);na.left=w/2;Ba.position=Vc.pt(0,0);na.extent=Vc.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",
value:function(b){var e=this.itemHeight,l=this.itemScroll;b=new Vc.Rectangle(0,b*e,this.width,e);e=this.innerBounds().insetByRect(this.padding).translatedBy(l);var p=0;b.bottom()>e.bottom()&&(p=b.bottom()-e.bottom());b.top()<e.top()&&(p=b.top()-e.top());this.itemScroll=l.addXY(0,p);this.update()}},{key:"onItemMorphDoubleClicked",value:function(b,e){}},{key:"onItemMorphClicked",value:function(b,e){var l=e.itemIndex;e=this.selectedIndexes;var p=e.includes(l),q=[];if(this.multiSelect)if(b.isShiftDown())if(p)q=
e.filter(function(w){return w!=l});else{b=e[0];var u="number"===typeof b?Vc.arr.range(l,b):[l];q=u.concat(e.filter(function(w){return!u.includes(w)}))}else q=this.multiSelectWithSimpleClick||b.isCommandKey()?p?e.filter(function(w){return w!=l}):[l].concat(e.filter(function(w){return w!=l})):[l];else q=[l];this.selectedIndexes=q}},{key:"onItemMorphDragged",value:function(b,e){}},{key:"onHoverIn",value:function(b){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(b){Vc.touchInputDevice||
(this.scroller.visible=!1)}},{key:"onDragStart",value:function(b){}},{key:"onDrag",value:function(b){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",
command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){return Vc.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Vc.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Vc.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:Vc.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Vc.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Vc.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Vc.pt(0,0)},set:function(b){this.scroller&&(this.scroller.scroll=b)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:Vc.pt(400,
360),set:function(b){b.eqPt(this.extent)||(this.setProperty("extent",b),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(b){this.setProperty("fontFamily",b);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(b){this.setProperty("fontSize",b);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Vc.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(b){this.setProperty("itemBorderRadius",
b);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Vc.Rectangle.inset(1),set:function(b){this.setProperty("itemPadding",b);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map(Vc.asItem));this.itemScroll=Vc.pt(0,0);this.update();this.attributeConnections&&Vc.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(b){return b.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(b){return this.selectedIndexes="number"===typeof b?[b]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(b){var e=
this.items.length;this.setProperty("selectedIndexes",(b||[]).filter(function(l){return 0<=l&&l<e}));this.update();Vc.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(b){this.selections=[b]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]&&b.items[e].value})},set:function(b){var e=this;this.selectedIndexes=b.map(function(l){return e.findIndex(l)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]})}},submorphs:{initialize:function(b){this.initializeSubmorphs(b)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(b){this.setProperty("itemHeight",b);this.manualItemHeight="number"===typeof b;this.update()},get:function(){var b=this.getProperty("itemHeight");if(b)return b;
b=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var e=this.itemPadding;e&&(b+=e.top()+e.bottom());this.setProperty("itemHeight",b);return b}},theme:{after:["styleClasses"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.addStyleClass(b);this.setProperty("theme",b)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10560,end:27175})}(Vc.Morph));Vc.List=$x;Vc.List=$x;Vc.List=$x;Vc.connect=Jj;var SB=za("ar",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("FilterableList")&&"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,
[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;b.bounds||b.extent||(b.extent=Vc.pt(400,360));Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Vc.connect(this.inputMorph,"inputChanged",this,"updateFilter");Vc.connect(this.listMorph,"selection",this,"selectionChanged");Vc.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Vc.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var b=this,e=this.attributeConnections;if(e){var l=["accepted","canceled","remove"];e.filter(function(p){return l.includes(p.sourceAttrName)&&p.targetObj!==b}).forEach(function(p){return p.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var b=this.listMorph,e=this.inputMorph,l=this.paddingMorph,p=this.borderWidth;e.topLeft=Vc.pt(p,p);e.width=b.width=this.width-2*p;l&&(l.topLeft=e.bottomLeft);b.position=l?l.bottomLeft:e.bottomLeft;b.height=
this.height-b.top-p}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(b){Vc.signal(this,"selection",b)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var b=this.get("input").textString,e=Array.from(b).reduce(function(p,q){if("\\"===q&&!p.escaped)return p.escaped=!0,p;" "!==q||p.escaped?(p.spaceSeen=!1,p.current+=q):(!p.spaceSeen&&p.current&&(p.tokens.push(p.current),
p.current=""),p.spaceSeen=!0);p.escaped=!1;return p},{tokens:[],current:"",escaped:!1,spaceSeen:!1});e.current&&e.tokens.push(e.current);var l=e.tokens.map(function(p){return p.toLowerCase()});return{tokens:e.tokens,lowercasedTokens:l,input:b}}},{key:"updateFilter",value:function(){var b=this,e=this.parseInput(),l=this.filterFunction,p=this.sortFunction,q=this.items.filter(function(y){return l.call(b,e,y)});p&&(q=Vc.arr.sortBy(q,function(y){return p.call(b,e,y)}));var u=this.listMorph,w=this.updateSelectionsAfterFilter?
u.selectedIndexes.map(function(y){return q.indexOf(u.items[y])}).filter(function(y){return-1!==y}):u.selectedIndexes;u.items=q;u.selectedIndexes=w.length?w:q.length?[0]:[];this.scrollSelectionIntoView();Vc.signal(this,"filterChanged",{parsedInput:e,items:u.items})}},{key:"acceptInput",value:function(){var b=this.listMorph;this.get("input").acceptInput();b={filtered:this.items,selected:b.selections,action:this.selectedAction,status:"accepted"};Vc.signal(this,"accepted",b);return b}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Vc.arr.range(0,
8).map(function(b){return{keys:"Alt-"+(b+1),command:{command:"choose action and accept input",args:{actionNo:b}}}}))).concat(Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){var b=this;return Kb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"accept input",exec:function(e){b.acceptInput();return!0}},{name:"cancel",exec:function(e){Vc.signal(e,"canceled");return!0}},{name:"choose action and accept input",exec:function(e,l){l=void 0===
l?{}:l;e.selectedAction=(e.actions||[])[void 0===l.actionNo?0:l.actionNo];return e.execCommand("accept input")}},{name:"choose action",exec:function(e){var l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(!e.actions)return u.return(!0);l=Object.assign({},e.style,{extent:e.extent});p=new Vc.FilterableList(l);p.openInWorld(e.globalPosition);p.items=e.actions;q=e.actions.indexOf(e.selectedAction);-1===q&&(q=0);p.selectedIndex=q;Vc.connect(p,"accepted",e,"selectedAction",{converter:function(w){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return w.selected[0]}});Vc.connect(p,"canceled",e,"selectedAction",{converter:function(w){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});p.focus();return u.return(!0)})}}].concat($jscomp.arrayFromIterable(Vc.listCommands.map(function(e){return Object.assign({},e,{exec:function(l,p,q){return e.exec(b.listMorph,p,q)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:Vc.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(b);this.listMorph.addStyleClass(b);this.setProperty("theme",b)}},submorphs:{initialize:function(){var b=this;this.submorphs=[Vc.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new Vc.morph({name:"padding",fill:Vc.Color.transparent}),new Vc.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return b.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(b){this.listMorph.fontFamily=b;this.inputMorph.fontFamily=b}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(b){this.listMorph.padding=b;this.inputMorph.padding=b}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(b){this.listMorph.fontSize=
b}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(b){this.listMorph.itemPadding=b}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(b){this.inputMorph.padding=b}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(b){this.inputMorph.input=b}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(b){this.inputMorph.historyId=b}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(b){this.listMorph.multiSelect=b}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(b){this.setProperty("items",b.map(Vc.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(b){this.listMorph.selection=b}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(b){this.listMorph.selectedIndex=b}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(b){this.listMorph.selectedIndexes=b}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(b){this.listMorph.selectedItems=b}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(b){this.listMorph.selections=b}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},
fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String(Vc.Path("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),q=0;e.lowercasedTokens.forEach(function(u){p.startsWith(u)?q-=10:p.includes(u)&&(q-=5)});return Vc.arr.sum(e.lowercasedTokens.map(function(u){return Vc.string.levenshtein(p.toLowerCase(),u)}))+q})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var q=String(Vc.Path(p).get(l)).toLowerCase();return 3>=Vc.arr.sum(e.lowercasedTokens.map(function(u){return Vc.string.levenshtein(q,u)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27288,end:41612})}(Vc.Morph));Vc.FilterableList=SB;Vc.FilterableList=SB;Vc.FilterableList=SB;var TB=za("bE",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);Vc.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(b){var e=
this;setTimeout(function(){var l=e.listMorph,p=e.world()&&e.world().focusedMorph;p!==l&&p!==e&&l.world()&&!l.withAllSubmorphsDetect(function(q){return q==p})?l.fadeOut(200):l.world()&&(l=Vc.touchInputDevice?l.scroller:l,Vc.once(l,"onBlur",e,"removeWhenFocusLost"),l.focus())},100)}},{key:"adjustLableFor",value:function(b){b=b.label||[b.string,null];b=[].concat($jscomp.arrayFromIterable(b),[" ",null],$jscomp.arrayFromIterable(Vc.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
b[5]&&(b[5].paddingRight="0px",b[5].textStyleClasses=["fa","annotation"]);this.label=b;this.relayout()}},{key:"toggleList",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){e=b.listMorph;if(b.isListVisible())return Vc.signal(b,"deactivated"),b.selection=e.selection,e.epiMorph=!1,e.remove(),q.jumpTo(0);Vc.signal(b,"activated");b.openListInWorld?(e.openInWorld(),e.epiMorph=!0,e.hasFixedPosition=!0,e.setTransform(b.getGlobalTransform()),
l=b.globalBounds()):(l=b.innerBounds(),b.addMorph(e));p=e.items.length*e.itemHeight+e.padding.top()+e.padding.bottom();e.extent=Vc.pt(b.width,Math.min(b.listHeight,p));"top"===b.listAlign?e.bottomLeft=l.topLeft():e.topLeft=l.bottomLeft();e.moveBy(b.listOffset||Vc.pt(0,0));Vc.once(e,"onItemMorphClicked",b,"toggleList");Vc.once(Vc.touchInputDevice?e.scroller:e,"onBlur",b,"removeWhenFocusLost");return q.yield(e.whenRendered(),3)}if(4!=q.nextAddress)return q.yield(e.whenRendered(),4);Vc.touchInputDevice?
e.scroller.focus():e.focus();e.scrollSelectionIntoView();q.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept",exec:function(){b.isListVisible()&&b.toggleList();return!0}},{name:"cancel",exec:function(){b.isListVisible()&&b.listMorph.remove();return!0}}].concat(Kb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Vc.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:Vc.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var b=this.getProperty("listMorph");if(b)return b;b=new Vc.List({name:"dropDownList"});
this.setProperty("listMorph",b);return b}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(b){var e=this,l=this.items.find(function(p){return p.value==e.selection});this.listMorph.items=b;l&&Vc.noUpdate(function(){e.selection=e.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(b){var e=this.listMorph;if(b){var l=e.items,p=e.find(b);p||"string"!==typeof b||(p=l.find(function(q){return q.string===
b}));if(!p)return;this.adjustLableFor(p);e.selectedIndex=l.indexOf(p)}else e.selection=null,this.label="";Vc.signal(this,"selection",e.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41621,end:46703})}(Vc.Button));Vc.DropDownList=TB;Vc.DropDownList=TB;Vc.DropDownList=
TB;var DJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(b){this.list.showDropPreviewFor(this,b)}},{key:"onDrop",value:function(b){var e=this,l;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!e.item.isPreview)return p.jumpTo(0);l=b.hand.grabbedMorphs[0];Kb._get(Object.getPrototypeOf(k.prototype),"onDrop",e).call(e,b);return p.yield(e.list.whenRendered(),3)}e.list.addItemAt({morph:l,isListItem:!0},e.itemIndex);e.list.clearPreviews();p.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(b){Vc.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(b){Vc.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(b,e,l,p,q,u,w){u=void 0===u?!1:u;Kb._get(Object.getPrototypeOf(k.prototype),"displayItem",this).call(this,b,e,l,p,q,u,w);b.morph&&(b.morph.selected=u)}},{key:"onGrab",value:function(b){var e=this.list,l=b.halo&&b.halo.target===this;l&&b.halo.detachFromTarget();var p=this.submorphs.length?this.submorphs[0]:Vc.morph({type:"label",
value:this.value});b.hand.grab(p);p.position=b.hand.localize(this.globalPosition);l&&b.halo.refocus(p);e.removeItem(this.list.items[this.itemIndex]);e.itemMorphs.forEach(function(q){return q.remove()});e.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Vc.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46712,end:48961})}(Vc.ListItemMorph);Vc.InteractiveItem=DJ;Vc.InteractiveItem=DJ;Vc.InteractiveItem=DJ;var EJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("MorphList")&&
"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onLoad",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(b,e){b=b.itemIndex;this.items[b].isPreview&&e||(this.clearPreviews(),e&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:Vc.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Vc.Color.orange.withA(.5)})},b))}},{key:"clearPreviews",value:function(){var b=this;this.items.filter(function(e){return e.morph&&e.morph.owner&&!Vc.Path("morph.owner.isListItem").get(e)}).map(function(e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(b.removeItem(e))})});this.items.filter(function(e){return e.isPreview}).map(function(e){return b.removeItem(e)})}},{key:"update",
value:function(){var b=this,e=this.items;e&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,q=b.listItemContainer,u=b.selectedIndexes,w=b.extent.y,y=b.fontSize,A=b.fontFamily,C=b.fontColor,E=b.padding,L=b.itemPadding,I=b.selectionColor,V=b.selectionFontColor,T=b.nonSelectionFontColor,Y=b.itemBorderRadius,na=b.scrollBar,Ba=b.scroll.y;E=E||Vc.Rectangle.inset(0);var F=E.top(),W=E.left(),P=E.bottom();E=E.right();
var S=Math.max(0,Math.floor(Ba/l)),fa=Math.min(e.length,Math.ceil((Ba+w)/l));w=0;Ba=b.width-(W+E);p=Vc.arr.sortBy(p,function(Va){return Va.itemIndex});var aa=$jscomp.makeIterator(Vc.arr.partition(p,function(Va){return Va.itemIndex<S}));p=aa.next().value;var oa=aa.next().value;oa=$jscomp.makeIterator(Vc.arr.partition(oa,function(Va){return Va.itemIndex>fa}));aa=oa.next().value;oa=oa.next().value;p=[].concat($jscomp.arrayFromIterable(aa),$jscomp.arrayFromIterable(oa),$jscomp.arrayFromIterable(p));y=
{fontSize:y,fontFamily:A,fontColor:T||C,padding:L,borderRadius:Y||0,selectionFontColor:V,nonSelectionFontColor:T,selectionColor:I};p.length&&fa-S>p.length&&(S!=p[0].itemIndex?Vc.arr.pushAt(p,q.addMorph(new Vc.InteractiveItem(y)),0):fa!=Vc.arr.last(p).itemIndex&&p.push(q.addMorph(new Vc.InteractiveItem(y))));for(A=0;A<fa-S;A++){C=S+A;L=e[C];if(!L){p.slice(A).forEach(function(Va){return Va.remove()});break}I=p[A];I||(I=p[A]=q.addMorph(new Vc.InteractiveItem(y)),I.clipMode="visible");I.displayItem(L,
C,Ba,l,Vc.pt(0,l*C),u.includes(C),y);w=Math.max(w,I.width)}l=Math.max(F+P+l*e.length,b.height);u=Vc.pt(b.width,l).subPt(Vc.pt(W+E,0));q.setBounds(Vc.pt(W,F).extent(u));na.left=w-10;na.fill=null;na.top=0;na.extent=Vc.pt(1,l)}))}},{key:"onHoverIn",value:function(b){this.clipMode="auto"}},{key:"onHoverOut",value:function(b){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(b){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return Vc.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map(Vc.asItem));this.itemMorphs.forEach(function(e){return e.remove()});this.update();this.attributeConnections&&Vc.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48970,end:54202})}(Vc.List);Vc.MorphList=EJ;Vc.MorphList=EJ;Vc.MorphList=EJ;var Hoa=Object.freeze({__proto__:null,asItem:SG,ListItemMorph:CJ,List:$x,FilterableList:SB,DropDownList:TB,InteractiveItem:DJ,MorphList:EJ}),Sf=lively.FreezerRuntime.recorderFor("lively.components/menus.js");Sf.Label=Ho;Sf.config=ok;Sf.Morph=Vi;Sf.obj=df;Sf.promise=Vf;Sf.fun=Qj;Sf.pt=bh;Sf.Color=of;Sf.Rectangle=Od;var FJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
k=d.hasOwnProperty("MenuDivider")&&"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:Sf.Color.gray.lighter()},extent:{defaultValue:Sf.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(Sf.Morph);Sf.MenuDivider=FJ;Sf.MenuDivider=FJ;Sf.MenuDivider=FJ;var GJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:
d.MenuItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onHoverIn",value:function(b){var e=this;this.owner.itemMorphs.forEach(function(l){return l!==e&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(b,this,this.submenu)}},{key:"onHoverOut",value:function(b){var e=this,l=b.hand;setTimeout(function(){(e.owner?e.owner.submenus:[]).some(function(p){return p.fullContainsWorldPoint(l.globalPosition)})||
(e.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(e.submenu)return q.return();q.setCatchFinallyBlocks(2);e.owner.startFinish();if("function"!==typeof e.action)throw Error("Menu item "+e.textString+" has no executable action!");return q.yield(e.action(),4)}if(2!=q.nextAddress)return e.owner.completeFinish(),q.leaveTryBlock(0);l=q.enterCatchBlock();(p=e.world())?
p.logError(l):console.error(l);q.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:Sf.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(b){this.selected!==b&&(this.addValueChange("selected",
b),b?(this.fontColor=Sf.Color.white,this.fill=Sf.Color.rgb(21,101,192)):(this.fill=Sf.Color.transparent,this.fontColor=Sf.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(b,e){return 0===e%2?b:""}).join("\n")},set:function(b){this.valueAndAnnotation={value:b,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(b){this.valueAndAnnotation={value:this.value,
annotation:b}}},action:{},submenu:{}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(Sf.Label);Sf.MenuItem=GJ;Sf.MenuItem=GJ;Sf.MenuItem=GJ;Sf.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var HJ=za("h",function(a){var d=
lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(b){switch(b.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"remove",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.animate({opacity:0,duration:300}),2);b._waitingForFinish||b.completeFinish();Kb._get(Object.getPrototypeOf(k.prototype),
"remove",b).call(b);e.jumpToEnd()})}},{key:"ensureItem",value:function(b){if(!b)return Sf.invalidItem;if(b.title)return this.title=b.title,null;if(b.isDivider)return b;if(b.hasOwnProperty("string")&&b.hasOwnProperty("action"))return Sf.obj.select(b,["string","action","annotation"]);if(Array.isArray(b)){var e=$jscomp.makeIterator(b),l=e.next().value;e=e.next().value;return"string"===typeof l||Array.isArray(l)?e&&"function"!==typeof e?"object"===typeof e&&e.getItems?{label:l,submenu:e.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(e)?{label:l,submenu:e,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Sf.invalidItem:{label:l,action:e||function(){return $world.setStatusMessage(l)}}:Sf.invalidItem}if(b.command){var p=b.command,q=b.showKeyShortcuts,u=b.target;e=b.alias;var w=b.args;b=b.tooltip;if(!p||!u)return Sf.invalidItem;void 0===q&&(q=!0);q=q?"string"===typeof q?q:u.keysForCommand(p):null;return{tooltip:b,string:e||p,annotation:q?["\t"+q,{fontSize:"70%"}]:
["",{}],action:function(){return u.execCommand(p,w)}}}return Sf.invalidItem}},{key:"updateMorphs",value:function(){var b=this;this.submorphs=[];var e=this.padding.left(),l=this.padding.right(),p=this.padding.top(),q=this.padding.bottom(),u=0,w=Sf.pt(e,p),y={};this.fontFamily&&(y.fontFamily=this.fontFamily);this.fontSize&&(y.fontSize=this.fontSize);this.itemPadding&&(y.padding=this.itemPadding);this.title&&(p=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:w,fontWeight:"bold"},
y)),w=p.bottomLeft,u=Math.max(p.width,u));this.items.forEach(function(A){var C=A.label,E=A.string,L=A.annotation,I=A.action,V=A.submenu,T=A.tooltip;A=b.addMorph(A.isDivider?new Sf.MenuDivider({position:w}):new Sf.MenuItem(Object.assign({label:C||E,annotation:L,action:I,submenu:V,tooltip:T,position:w},y)));w=A.bottomLeft;u=Math.max(A.width,u)});this.submorphs.forEach(function(A){A.isLabel&&(A.fit(),A.autofit=!1,A.fixedWidth=!0,A.fixedHeight=!0);A.width=u});this.extent=Sf.pt(u+l+e,w.y+q)}},{key:"openSubMenuDelayed",
value:function(b,e,l){var p=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{p.openSubMenu(b,e,l)}catch(u){var q=p.world();q?q.logError(u):console.error(u)}},200)}},{key:"openSubMenu",value:function(b,e,l){if(e.selected){var p=this.submenu;if(p){if(p.ownerItemMorph===e||this.morphsContainingPoint(b.position).includes(p))return;this.removeSubMenu()}"function"===typeof l&&(l=l());b=this.submenu=this.addMorph(new Sf.Menu({items:l,
ownerItemMorph:e,ownerMenu:this}));b.updateMorphs();b.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var b=this;Sf.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var e=b.world();if(e){var l=b.submenu,p=b.selectedItemMorph;e=e&&l&&l.fullContainsWorldPoint(e.firstHand.position);l&&l.ownerItemMorph!==p&&!l.ownerItemMorph.selected&&(e?(p&&(p.selected=!1),l.ownerItemMorph.selected=!0):b.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var b=
this.submenu;this.submenu=b.ownerMenu=null;b.remove()}}},{key:"moveBoundsForVisibility",value:function(b,e){var l=0,p=0;b.right()>e.right()&&(l=-1*(b.right()-e.right()));var q=b.left()+l;0>q&&(l+=-q);b.bottom()>e.bottom()&&(p=-1*(b.bottom()-e.bottom()),l+=1);e=b.top()+p;0>e&&(p+=-e);return b.translatedBy(Sf.pt(l,p))}},{key:"moveSubMenuBoundsForVisibility",value:function(b,e,l,p){p||(p=e.right()+b.width>l.right()?"left":"right");b=b.extent();b="left"===p?e.topLeft().addXY(-b.x,0).extent(b):e.topRight().extent(b);
b.bottom()>l.bottom()&&(e=-1*(b.bottom()-l.bottom()),b=b.translatedBy(Sf.pt(0,e)));b.top()<l.top()&&(l=l.top()-b.top(),b=b.translatedBy(Sf.pt(0,l)));return b}},{key:"offsetForOwnerMenu",value:function(){var b=this.ownerMenu,e=this.world().visibleBounds(),l=b.getGlobalTransform().inverse().transformRectToRect(e);b=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),b.selectedItemMorph?b.selectedItemMorph.bounds():b.innerBounds(),l),e);this.setBounds(b)}},{key:"clipForVisibility",
value:function(b,e){b=void 0===b?this.bounds():b;e=void 0===e?this.world().visibleBounds():e;var l=this.transformRectToMorph(this.world(),b.withX(0).withY(0));e.containsRect(l.insetBy(10))||(b=b.withExtent(Sf.pt(5+b.width,Math.min(l.height,e.height))));return b}},{key:"offsetForWorld",value:function(b){b=this.innerBounds().translatedBy(b);if(this.owner.visibleBounds){var e=this.owner.visibleBounds();b=this.clipForVisibility(this.moveBoundsForVisibility(b,e),e)}this.setBounds(b)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(b,e){e=void 0===e?{title:""}:e;return new this(Object.assign({},e,{items:b}))}},{key:"openAt",value:function(b,e,l){l=void 0===l?{title:""}:l;e=this.forItems(e,l).openInWorldNear(b);e.offsetForWorld(b);return e}},{key:"openAtHand",value:function(b,e){e=void 0===e?{title:""}:e;var l=e.hand;b=this.forItems(b,Sf.obj.dissoc(e,["hand"]));l=l?l.position:
Sf.pt(0,0);b.titleMorph&&(l=l.addXY(0,-b.titleMorph.height));b.openInWorld(l);b.offsetForWorld(l);return b}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(Sf.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:Sf.Rectangle.inset(0,2)},itemPadding:{defaultValue:Sf.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:Sf.Color.white},borderColor:{defaultValue:Sf.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(b){this.addValueChange("title",b)}},finishedPromise:{initialize:function(){this.finishedPromise=Sf.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?
[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(b){b=b.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",b)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(b){return b.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(b){return b.isMenuItem})}}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16006})}(Sf.Morph));Sf.Menu=HJ;Sf.Menu=HJ;Sf.Menu=HJ;var Ioa=Object.freeze({__proto__:null,MenuDivider:FJ,MenuItem:GJ,Menu:HJ}),Gi=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");Gi.arr=Ke;Gi.pt=bh;Gi.Color=of;
Gi.Morph=Vi;var IJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onDrag",value:function(b){this.movedHorizontallyBy(b.position.x-b.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||
"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.x-this.extent.x;if(!(0>e)){var l=this.getRelativeDivide();this.movedHorizontallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.left();e=this.owner.extent.x-e.width;return 0>e?NaN:b/e}},{key:"movedHorizontallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingRight).forEach(function(e){var l=e.position;e.position=Gi.pt(l.x+b,l.y)}),this.scalingLeft.forEach(function(e){var l=e.extent;
e.extent=Gi.pt(l.x+b,l.y)}),this.scalingRight.forEach(function(e){var l=e.extent;e.extent=Gi.pt(l.x-b,l.y)}),this.position=this.position.addPt(Gi.pt(b,0)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingLeft.every(function(l){return l.extent.x+b>=e.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-b>=e.minWidth})}},{key:"addFixed",value:function(b){Gi.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingLeft",value:function(b){Gi.arr.pushIfNotIncluded(this.scalingLeft,
b)}},{key:"addScalingRight",value:function(b){Gi.arr.pushIfNotIncluded(this.scalingRight,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Gi.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2722})}(Gi.Morph);Gi.VerticalResizer=IJ;Gi.VerticalResizer=IJ;Gi.VerticalResizer=IJ;var JJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onDrag",value:function(b){this.movedVerticallyBy(b.position.y-b.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.y-this.extent.y;if(!(0>e)){var l=this.getRelativeDivide();this.movedVerticallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.top();e=this.owner.extent.y-e.height;
return 0>e?NaN:b/e}},{key:"movedVerticallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingBelow).forEach(function(e){var l=e.position;e.position=Gi.pt(l.x,l.y+b)}),this.scalingAbove.forEach(function(e){var l=e.extent;e.extent=Gi.pt(l.x,l.y+b)}),this.scalingBelow.forEach(function(e){var l=e.extent;e.extent=Gi.pt(l.x,l.y-b)}),this.position=this.position.addPt(Gi.pt(0,b)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingAbove.every(function(l){return l.extent.y+
b>=e.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-b>=e.minHeight})}},{key:"addFixed",value:function(b){Gi.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingAbove",value:function(b){Gi.arr.pushIfNotIncluded(this.scalingAbove,b)}},{key:"addScalingBelow",value:function(b){Gi.arr.pushIfNotIncluded(this.scalingBelow,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Gi.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2731,end:5358})}(Gi.Morph);Gi.HorizontalResizer=
JJ;Gi.HorizontalResizer=JJ;Gi.HorizontalResizer=JJ;var Joa=Object.freeze({__proto__:null,VerticalResizer:IJ,HorizontalResizer:JJ}),mf=lively.FreezerRuntime.recorderFor("lively.components/tree.js");mf.arr=Ke;mf.fun=Qj;mf.obj=df;mf.tree=yq;mf.string=rg;mf.promise=Vf;mf.pt=bh;mf.Rectangle=Od;mf.Color=of;mf.Morph=Vi;mf.Text=Go;mf.config=ok;mf.touchInputDevice=Ll;mf.Label=Ho;mf.connect=Jj;mf.signal=xk;mf.bowser=zn;var KJ=za("bD",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
k=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(!b.treeData)throw Error("Cannot create tree without TreeData!");Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.resetCache();this.update()}},{key:"onChange",
value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(b.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(b){var e=
this.textLayout.charBoundsOfRow(this,b);b=mf.Rectangle.fromLiteral(mf.arr.first(e)).topLeft();e=mf.Rectangle.fromLiteral(mf.arr.last(e)).bottomRight();return mf.Rectangle.fromAny(b,e)}},{key:"recoverOriginalLine",value:function(b){for(var e=this.document.getTextAndAttributesOfLine(b),l=0;l<e.length;l++){var p=this._originalColor[l];p&&!mf.obj.isString(e[l])&&(e[l]?e[l].fontColor=p:e[l]={fontColor:p})}this.document.setTextAndAttributesOfLine(b,e)}},{key:"renderSelectedLine",value:function(b){var e=
this.document.getTextAndAttributesOfLine(b);this._originalColor=Array(e.length);for(var l=0;l<e.length;l++)0===l%2?e[l]&&e[l].isMorph&&(this._originalColor[l]=e[l]?e[l].fontColor||this.nonSelectionFontColor:null,e[l].fontColor=this.selectionFontColor,e[l].isSelected=!0):(this._originalColor[l]=(e[l]?e[l].fontColor:null)||this.nonSelectionFontColor,e[l]?e[l].fontColor=this.selectionFontColor:e[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(b,e);this.selectLine(b,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(b){if(!b.length)return[];for(var e=mf.arr.genN(8*(b.length-1),function(){return null}),l=1,p,q,u=this.disableIndent?0:1.3*this.fontSize;l<b.length;l++){p=8*(l-1);q=this.selectedIndex==l;b[l].node.isSelected=q;e[p]=" ";e[p+1]={fontSize:u,fontColor:mf.Color.transparent,textStyleClasses:["fas"],paddingRight:u*(b[l].depth-1)+"px"};e[p+3]={fontColor:mf.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(b[l].node)?e[p+2]=this.disableIndent?"":"    ":(e[p+2]=this.treeData.isCollapsed(b[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(e[p+3],{paddingRight:this.treeData.isCollapsed(b[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var w=this.treeData.safeDisplay(b[l].node);w.isMorph&&(w._capturedProps&&Object.assign(w,w._capturedProps),q&&(w._capturedProps=mf.obj.select(w,["fontColor"])),
w.fontColor=this.nonSelectionFontColor);e[p+4]=w;mf.arr.isArray(w)?e[p+5]=[]:e[p+5]={fontColor:this.fontColor};e[p+6]="\n";e[p+7]={}}e.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<b.length?mf.arr.flatten(e):[]}},{key:"update",value:function(b){var e=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=e.treeData.asListWithIndexAndDepth();e.treeData!==e.lastTreeData||e.lastNumberOfNodes!==
l.length||b?(e.replace({start:{row:0,column:0},end:e.documentEndPosition},e.computeTreeAttributes(l),!1,!1),e.invalidateTextLayout(!0,!1),e.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e.makeDirty();p.jumpToEnd()})})):e._lastSelectedIndex&&e.recoverOriginalLine(e._lastSelectedIndex-1);e.lastTreeData=e.treeData;e.lastNumberOfNodes=l.length;e.cursorPosition={row:0,column:0};0<e.selectedIndex&&e.renderSelectedLine(e.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(b){var e=this;"function"!==typeof b&&(b=function(q){return q});var l=this.selectedNode?b(this.selectedNode):null,p=new Map;mf.tree.prewalk(this.treeData.root,function(q){return p.set(b(q),e.treeData.isCollapsed(q))},function(q){return e.treeData.getChildrenIfUncollapsed(q)});return{selectionId:l,collapsedMap:p,scroll:this.scroll}}},{key:"applyViewState",value:function(b,e){var l=this,p,q,u,w,y,A,C,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:"function"!==
typeof e&&(e=function(I){return I}),p=b,q=p.selectionId,u=p.collapsedMap,w=p.scroll,y=0,A=-1;case 2:C=l.nodes;if(y>=C.length){L.jumpTo(3);break}E=e(C[y]);q===E&&(A=y);if(!u.has(E)||u.get(E)){L.jumpTo(4);break}return L.yield(l.treeData.collapse(C[y],!1),4);case 4:y++;L.jumpTo(2);break;case 3:return l.selectedIndex=A,l.update(),l.scroll=w,l.scrollSelectionIntoView(),L.yield(mf.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==
q.nextAddress?(p=l.buildViewState(e),q.yield(b(),2)):q.yield(l.applyViewState(p,e),0)})}},{key:"onNodeCollapseChanged",value:function(b){var e=b.node,l=b.isCollapsed,p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return p.resetCache(),u.setCatchFinallyBlocks(2),u.yield(p.treeData.collapse(e,l),4);if(2!=u.nextAddress)return mf.signal(p,"nodeCollapseChanged",{node:e,isCollapsed:l}),p.update(),u.leaveTryBlock(0);q=u.enterCatchBlock();p.showError(q);u.jumpToEnd()})}},
{key:"uncollapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?b&&e.treeData.isCollapsed(b)?l.yield(e.onNodeCollapseChanged({node:b,isCollapsed:!1}),2):l.return():l.return(b)})}},{key:"collapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!b||e.treeData.isCollapsed(b)?l.return():l.yield(e.onNodeCollapseChanged({node:b,
isCollapsed:!0}),2):l.return(b)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.treeData.followPath(b),2)):p.return(l.selectedNode=p.yieldResult)})}},{key:"gotoIndex",value:function(b){this.selectedNode=this.nodes[b];this.scrollIndexIntoView(b)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(b){this.scrollToIndex(b,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(b){this.scrollPositionIntoView({row:b-1,column:0})}},{key:"contextMenuForNode",value:function(b,e){mf.signal(this,"contextMenuRequested",{node:b,evt:e})}},{key:"onKeyDown",value:function(b){var e=this.world().focusedMorph;if(!e.isText||
e.readOnly)return Kb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}},{key:"onDragStart",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);var e=this.textAttributeAtPoint(b.positionIn(this))||{},l=e.onDragStart,p=e.onDrag;e=e.onDragEnd;p&&(this._onDragHandler=p);e&&(this._onDragEndHandler=e);l&&l(b)}},{key:"onDrag",value:function(b){this._onDragHandler?this._onDragHandler(b):Kb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,
b)}},{key:"onDragEnd",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(b);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=e.textPositionFromPoint(b.positionIn(e)),p=l.row,q=l.column,u=e.nodes[p+1],u?!e.treeData.isLeaf(u)&&4>q?A.yield(u.isCollapsed,
3):(e.selectedIndex!=p+1&&(e.selectedIndex=p+1),A.jumpTo(2)):A.return();2!=A.nextAddress&&(A.yieldResult?e.uncollapse(u):e.collapse(u));w=e.textAttributeAt({row:p,column:q})||{};(y=w.onMouseDown)&&y(b);A.jumpToEnd()})}},{key:"onMouseUp",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);var e=(this.textAttributeAtPoint(b.positionIn(this))||{}).onMouseUp;e&&e(b)}},{key:"onHoverIn",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,
b);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);!mf.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(b){if(b.targetMorph===this){b.stop();var e=this.textPositionFromPoint(b.positionIn(this));(e=this.nodes[e.row+1])&&this.contextMenuForNode(e,b)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return mf.treeCommands}},{key:"highlightChangedNodes",value:function(b){this.treeData.diff(b).forEach(function(e){e=$jscomp.makeIterator(e);var l=e.next().value;e.next();return l.renderedNode&&l.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:mf.Color.rgb(21,101,192)},fontFamily:{defaultValue:mf.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:mf.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(b){this.setProperty("resizeNodes",b);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(b){this.setProperty("treeData",b);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(b){this.selectedNode=this.nodes[b]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Kb._get(Object.getPrototypeOf(k),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(b){this.setProperty("selectedNode",b);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:mf.Color.white,set:function(b){this.setProperty("selectionFontColor",b)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:mf.Color.rgbHex("333"),set:function(b){this.setProperty("nonSelectionFontColor",b)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1472,end:17578})}(mf.Text));mf.Tree=KJ;mf.Tree=KJ;mf.Tree=KJ;var LJ=za("bB",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),k=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.root=b;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(b){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(b){throw Error("Not yet implemented");
}},{key:"collapse",value:function(b,e){throw Error("Not yet implemented");}},{key:"getChildren",value:function(b){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(b){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(b){return this.isCollapsed(b)?[]:this.getChildren(b)}},{key:"safeDisplay",value:function(b){try{return this.display(b)}catch(e){return"[TreeData] Error when trying to display node: "+e}}},{key:"nodeToString",value:function(b){b=this.safeDisplay(b);
return"string"===typeof b?b:b&&Array.isArray(b)?b.map(function(e,l){return 0===l%2?e:""}).join(""):String(b)}},{key:"parentNode",value:function(b){var e=this;return this.parentMap.get(b)||mf.tree.detect(this.root,function(l){return!e.isLeaf(l)&&e.getChildrenIfUncollapsed(l).includes(b)},function(l){return e.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(b){return(b=this.parentNode(b))?this.getChildrenIfUncollapsed(b):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(b){return b.node})}},
{key:"asListWithIndexAndDepth",value:function(b){var e=this;b=void 0===b?!1:b;var l=[];mf.tree.prewalk(this.root,function(p,q,u){return l.push({node:p,depth:u,i:q})},function(p){return e.getChildrenIfUncollapsed(p)});return b?mf.arr.filter(l,b):l}},{key:"pathOf",value:function(b){for(var e=[];b;)e.unshift(b),b=this.parentNode(b);return e}},{key:"followPath",value:function(b,e,l){l=void 0===l?this.root:l;var p=this,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:e||
(e=function(C,E){return C===E});q=b.findIndex(function(C){return e(C,l)});b=b.slice(q+1);if(!b.length)return A.return(null);u=l;case 2:if(!b.length){A.jumpTo(3);break}if(!p.isCollapsed(u)){A.jumpTo(4);break}return A.yield(p.collapse(u,!1),4);case 4:w=b.shift();y=p.getChildrenIfUncollapsed(u).find(function(C){return e(w,C)});if(!y)throw Error("Cannot descend into tree, next node of "+b.join(".")+" not found at "+p.safeDisplay(u));u=y;A.jumpTo(2);break;case 3:return A.return(u)}})}},{key:"diff",value:function(b){var e=
[],l=this.asListWithIndexAndDepth();b=b.asListWithIndexAndDepth();if(l.length!=b.length)return[];l=$jscomp.makeIterator(mf.arr.zip(l,b));for(b=l.next();!b.done;b=l.next()){var p=$jscomp.makeIterator(b.value);b=p.next().value;p=p.next().value;mf.obj.equals(b.node.value,p&&p.node.value)||e.push([b.node,p.node])}return e}},{key:"patch",value:function(b){var e=this.diff(b);if(0<e.length){b=$jscomp.makeIterator(e);for(e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;
l=l.next().value;e.value=l.value}return this}return b}},{key:"uncollapseAll",value:function(b,e,l){e=void 0===e?0:e;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(l){w.jumpTo(2);break}return w.yield(p.uncollapseAll(b,e,p.root),3);case 3:return w.return(w.yieldResult);case 2:if(!b(l,e)){w.jumpTo(0);break}if(!l.isCollapsed){w.jumpTo(5);break}return w.yield(p.collapse(l,!1),6);case 6:case 5:u=w.forIn(l.children);case 7:if(null==(q=u.getNext()))w.jumpTo(0);
else return w.yield(p.uncollapseAll(b,e+1,l.children[q]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17587,end:22608})}(void 0));mf.TreeData=LJ;mf.TreeData=LJ;mf.TreeData=LJ;mf.treeCommands=[{name:"select via filter",
exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=a.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(u){return Object.assign(u,{string:d.nodeToString(u.node)})}),k=mf.string.lines(mf.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),b=d.asList().map(function(u,w){return{isListItem:!0,string:k[w],value:u}}),q.yield(a.world().filterableListPrompt("Select item",b),
2);e=q.yieldResult;l=$jscomp.makeIterator(e.selected);if(p=l.next().value)a.selectedNode=p,a.scrollSelectionIntoView();return q.return(!0)})}},{name:"page up",exec:function(a){a.scrollPageUp(1);var d=a.scroll,k=a.padding.top(),b=d.y;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;a.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(a){a.scrollPageDown(1);var d=a.scroll,k=a.padding.top(),b=d.y+a.height;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;
a.gotoIndex(Math.min(d,a.nodes.length-1));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(1);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)+1])a.selectedNode=d,a.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)-1])a.selectedNode=d,a.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(a){a.selectedNode&&(a.selectedNode=a.treeData.parentNode(a.selectedNode),a.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(d=a.selectedNode,d?a.treeData.isCollapsed(d)?(a.selectedNode=a.treeData.parentNode(d),a.scrollSelectionIntoView(),k.jumpTo(2)):k.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!0}),2):k.return(!0)):
k.return(!0)})}},{name:"uncollapse selected node",exec:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?a.selectedNode?d.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(a,d){function k(A){return mf.arr.filter(l.getChildrenIfUncollapsed(A),function(C){return!l.isLeaf(C)})}function b(A,C){return Promise.all(A.map(function(E){return a.onNodeCollapseChanged({node:E,
isCollapsed:C})}))}d=void 0===d?{what:"collapse"}:d;var e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){e="collapse"===d.what;l=a.treeData;if(e){if(l.isCollapsed(a.selectedNode))return A.return(!0);q=l.parentNode(a.selectedNode);u=-1;mf.tree.prewalk(q,function(C,E,L){L<u||(L>u&&(u=L,p=[]),L===u&&mf.arr.pushIfNotIncluded(p,l.parentNode(C)))},l.getChildrenIfUncollapsed.bind(l))}else for(w=mf.arr.compact([l.parentNode(a.selectedNode)]);w.length;){p=mf.arr.flatmap(w,
function(C){return k(C)});y=p.every(function(C){return l.isCollapsed(C)===e});if(!y)break;w=p}return A.yield(b(p,e),2)}a.scrollSelectionIntoView();return A.return(!0)})}},{name:"select node above",exec:function(a){var d=a.nodes,k=a.selectedIndex;1>=k&&(k=d.length);a.selectedNode=d[k-1];a.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(a){var d=a.nodes,k=a.selectedIndex;if(-1>=k||k>=d.length-1)k=0;a.selectedNode=d[k+1];a.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(a){if(a.selectedNode){var d=a.scroll,k=d.x;d=d.y;var b=a.lineBounds(a.selectedIndex),e=b.topLeft();b=a.height-b.height;d=2>Math.abs(e.y-d)?e.y-b:2>Math.abs(e.y-d-.5*b)?e.y:e.y-.5*b;a.scroll=mf.pt(k,d);return!0}}},{name:"print contents in text window",exec:function(a){var d=a.treeData;d=mf.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));var k=a.getWindow()?"printed "+a.getWindow().title:a.name;return a.world().execCommand("open text window",{title:k,
content:d,name:k,fontFamily:mf.config.codeEditor.defaultStyle.fontFamily})}}];var Koa=Object.freeze({__proto__:null,Tree:KJ,TreeData:LJ}),us=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");us.promise=Vf;us.HTMLMorph=ss;var MJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.src||b.srcdoc||(b.srcdoc="<p>Empty iframe</p>");Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"changeSrc",value:function(b,e){var l=this,p=this.iframe,q=this._loadPromise;q&&!q.loaded&&q.reject();this._loadPromise=us.promise.deferred();this._loadPromise.loaded=!1;p.onload=function(u){l._loadPromise.loaded=!0;l._loadPromise.resolve(u)};e=b||e;
q=b?"src":"srcdoc";b=b?"srcdoc":"src";this.addValueChange(b,null);this.addValueChange(q,e);p.removeAttribute(b);p.setAttribute(q,e);this._loadPromise[q]=e}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(b){return this.innerWindow.eval("("+b+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(b){var e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress)return w.yield(b.whenRendered(),2);if(3!=w.nextAddress)return e=b.env.renderer.getNodeForMorph(b),l=us.IFrameMorph.open({srcdoc:e.outerHTML}),w.yield(l.whenLoaded(),3);p=l.innerWindow.document;p.body.style.whiteSpace="normal";p.body.style.margin="0.5cm";p.querySelector(".Text").style.width="100%";p.querySelector(".Text").style.overflow="visible";p.querySelectorAll(".marker-layer-part").forEach(function(y){return y.parentNode.removeChild(y)});q=p.querySelector(".text-layer");q.style.whiteSpace=
"pre-wrap";u=Array.from(q.querySelectorAll("div"));u.forEach(function(y){y.childNodes[0]&&(Array.from(y.childNodes).forEach(function(A){return q.insertBefore(A,y)}),q.insertBefore(p.createElement("br"),y),q.removeChild(y))});l.innerWindow.print();l.getWindow().remove();w.jumpToEnd()})}},{key:"open",value:function(b){b=void 0===b?{}:b;return(new this(b)).openInWindow({title:b.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(b){this.changeSrc(b,null)}},srcdoc:{after:["domNode"],set:function(b){this.changeSrc(null,b)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(b){return this._domNode=b}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:621,end:6201})}(us.HTMLMorph);us.IFrameMorph=MJ;us.IFrameMorph=MJ;us.IFrameMorph=MJ;var Loa=Object.freeze({__proto__:null,IFrameMorph:MJ}),xe=lively.FreezerRuntime.recorderFor("lively.components/window.js");
xe.arr=Ke;xe.promise=Vf;xe.pt=bh;xe.LinearGradient=nk;xe.Color=of;xe.Rectangle=Od;xe.Label=Ho;xe.morph=$i;xe.Morph=Vi;xe.HorizontalLayout=so;xe.StyleSheet=Lp;xe.connect=Jj;xe.signal=xk;xe.easings=Bn;var VR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),k=d.hasOwnProperty("Window")&&"function"===typeof d.Window?d.Window:d.Window=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,
a,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==A.nextAddress?(e=b.world()||b.env.world,l=b.targetMorph.world(),p=l.openMenu,q=[["Change Window Title",function(){var C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return E.yield(e.prompt("Enter New Name",{input:b.title}),2);if(C=E.yieldResult)b.title=
C;E.jumpToEnd()})}],["Align and resize",[{alias:"full",target:e,command:"resize active window",args:{window:b,how:"full"}},{alias:"left",target:e,command:"resize active window",args:{window:b,how:"left"}},{alias:"center",target:e,command:"resize active window",args:{window:b,how:"center"}},{alias:"right",target:e,command:"resize active window",args:{window:b,how:"right"}},{alias:"top",target:e,command:"resize active window",args:{window:b,how:"top"}},{alias:"bottom",target:e,command:"resize active window",
args:{window:b,how:"bottom"}},{alias:"reset",target:e,command:"resize active window",args:{window:b,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:e,command:"toggle minimize all except active window"},{alias:"close all except this",target:e,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:e,command:"toggle minimize all windows"},{alias:"close all",target:e,command:"close all windows"}]],{isDivider:!0}],u=q.concat,w=$jscomp,y=w.arrayFromIterable,
A.yield(b.targetMorph.menuItems(),2)):A.return(p.call(l,u.call(q,y.call(w,A.yieldResult))))})}},{key:"toggleFader",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:l=e.getSubmorphNamed("fader")||e.addMorph({name:"fader",fill:xe.Color.black.withA(.5),opacity:0,extent:e.extent});if(b){p=e.world().visibleBoundsExcludingTopBar().translateForInclusion(e.bounds());e._originalBounds=e.bounds();e.animate({bounds:p,duration:300});
e.borderColor=xe.Color.gray.darker();e._faderTriggered=!0;l.opacity=1;q.jumpTo(0);break}e._originalBounds&&(e.animate({bounds:e._originalBounds,duration:300}),e._originalBounds=null);e._faderTriggered=!1;return q.yield(e.whenRendered(),3);case 3:return q.yield(xe.promise.delay(100),4);case 4:return e.borderColor=xe.Color.gray,e._faderTriggered?q.return():q.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),q.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new xe.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var b=this.innerBounds(),e=this.ui.windowTitle,l=this.ui.resizer,p=b.withHeight(25),q=this.ui.header,u=this.ui.windowControls.bounds().right()+3,w=p.withLeftCenter(xe.pt(u,p.height/2));l.bottomRight=b.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());e.textBounds().width<p.width-2*u?e.center=
p.center():e.leftCenter=w.leftCenter();q.width=this.width}catch(y){}}},{key:"ensureNotOverTheTop",value:function(){var b=this,e=this.world();if(e){var l=this.globalBounds();e.withTopBarDo(function(p){l.top()<p.height&&b.moveBy(xe.pt(0,p.height-l.top()))})}}},{key:"buildHeader",value:function(){return xe.morph({name:"header",extent:xe.pt(this.width,50),submorphs:[xe.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var b=this.getSubmorphNamed("close")||xe.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[xe.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});xe.connect(b,"onMouseDown",this,"close");var e=this.getSubmorphNamed("minimize")||xe.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[xe.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});xe.connect(e,"onMouseDown",this,"minimized",{updater:function(p){p(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||xe.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[xe.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});xe.connect(l,"onMouseDown",this,"openWindowMenu")}return xe.arr.compact([b,e,l])}},{key:"buildTitleLabel",value:function(){var b=xe.morph({padding:xe.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});xe.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});return this.addMorph(b)}},{key:"resizeBy",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"resizeBy",this).call(this,b);this.relayoutWindowControls()}},{key:"resizeAt",
value:function(b){b=$jscomp.makeIterator(b);var e=b.next().value;b=b.next().value;var l=this.bounds();switch(e){case "right":this.resizeBy(b.withY(0));break;case "bottom right":this.resizeBy(b);break;case "bottom":this.resizeBy(b.withX(0));break;case "left":e=this.right;this.resizeBy(b.withY(0).negated());this.right=e;break;case "bottom left":e=this.right;this.resizeBy(b.scaleByPt(xe.pt(-1,1)));this.right=e;break;case "top":e=l.x;var p=l.y+b.y;var q=l.width;b=l.height-b.y;this.setBounds(new xe.Rectangle(e,
p,q,b));break;case "top left":e=l.x+b.x;p=l.y+b.y;q=l.width-b.x;b=l.height-b.y;this.setBounds(new xe.Rectangle(e,p,q,b));break;case "top right":e=l.x,p=l.y+b.y,q=l.width+b.x,b=l.height-b.y,this.setBounds(new xe.Rectangle(e,p,q,b))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var b=this.getSubmorphNamed("resizer"),e=$jscomp.makeIterator(b.submorphs),l=e.next().value,p=e.next().value,q=e.next().value,u=e.next().value,w=e.next().value,y=e.next().value,A=e.next().value;e=e.next().value;
l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);p.bottomRight=this.extent;q.height=this.height-10;q.bottomLeft=xe.pt(0,this.height-10);u.bottomLeft=xe.pt(0,this.height);w.width=this.width-20;w.bottomLeft=xe.pt(10,this.height);y.width=this.width-20;y.bottomLeft=xe.pt(10,2.5);A.topLeft=xe.pt(0,0);e.topRight=xe.pt(this.width,0);b.position=xe.pt(0,0)}},{key:"buildResizer",value:function(){var b,e,l,p,q,u,w;var y=xe.Color.transparent;var A=xe.morph({name:"resizer",fill:xe.Color.transparent,
position:xe.pt(0,0),submorphs:[b=xe.morph({name:"right resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),e=xe.morph({name:"bottom right resizer",fill:y,extent:xe.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=xe.morph({name:"left resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),p=xe.morph({name:"bottom left resizer",draggable:!0,fill:y,extent:xe.pt(10,10),nativeCursor:"nesw-resize"}),q=xe.morph({name:"bottom resizer",draggable:!0,fill:y,height:10,nativeCursor:"ns-resize"}),
u=xe.morph({name:"top resizer",draggable:!0,fill:y,height:2.5,nativeCursor:"ns-resize"}),w=xe.morph({name:"top left resizer",draggable:!0,fill:y,extent:xe.pt(10,10),nativeCursor:"nwse-resize"}),y=xe.morph({name:"top rigth resizer",draggable:!0,fill:y,extent:xe.pt(10,10),nativeCursor:"nesw-resize"})]});xe.connect(u,"onDrag",this,"resizeAt",{converter:function(C){return["top",C.state.dragDelta]}});xe.connect(y,"onDrag",this,"resizeAt",{converter:function(C){return["top right",C.state.dragDelta]}});
xe.connect(w,"onDrag",this,"resizeAt",{converter:function(C){return["top left",C.state.dragDelta]}});xe.connect(e,"onDrag",this,"resizeAt",{converter:function(C){return["bottom right",C.state.dragDelta]}});xe.connect(b,"onDrag",this,"resizeAt",{converter:function(C){return["right",C.state.dragDelta]}});xe.connect(q,"onDrag",this,"resizeAt",{converter:function(C){return["bottom",C.state.dragDelta]}});xe.connect(l,"onDrag",this,"resizeAt",{converter:function(C){return["left",C.state.dragDelta]}});xe.connect(p,
"onDrag",this,"resizeAt",{converter:function(C){return["bottom left",C.state.dragDelta]}});this.addMorph(A);this.relayoutResizer();return A}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.minimized=
!b.minimized;e.jumpToEnd()})}},{key:"applyMinimize",value:function(){var b=this,e,l,p,q,u,w,y,A,C,E,L,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(T){if(1==T.nextAddress){if(!b.targetMorph)return T.return();e=b;l=e.nonMinizedBounds;p=e.minimized;q=e.width;u=b.ui;w=u.windowTitle;y=u.resizer;A=b.bounds();C=b.getSubmorphNamed("minimize");E=xe.easings.outQuad;if(!p)return b.minimizedBounds=A,b.withMetaDo({metaInteraction:!0},function(){b.targetMorph&&(b.targetMorph.visible=!0)}),l=
b.world().visibleBoundsExcludingTopBar().translateForInclusion(l||A),b.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(xe.arr.without(b.styleClasses,"minimzed"))),duration:100,easing:E}),C.tooltip="collapse window",T.jumpTo(2);b.nonMinizedBounds=A;L=(b.minimizedBounds||A).withExtent(xe.pt(q,28));I=w.textBounds();V=b.get("window controls").bounds().right()+3;I.width+2*V<L.width&&(L=L.withWidth(I.width+V+5));b.minimizedBounds=L;C.tooltip="uncollapse window";return T.yield(b.animate({styleClasses:["minimized",
"active"].concat($jscomp.arrayFromIterable(xe.arr.without(b.styleClasses,"neutral"))),bounds:L,duration:100,easing:E}),3)}2!=T.nextAddress&&b.targetMorph&&(b.targetMorph.isComponent?b.targetMorph.top=b.height:b.targetMorph.visible=!1);w.reactsToPointer=!b.minimized;y.visible=!b.minimized;b.relayoutWindowControls();T.jumpToEnd()})}},{key:"setBounds",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",
value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return b.targetMorph&&"function"===typeof b.targetMorph.onWindowClose?q.yield(b.targetMorph.onWindowClose(),3):q.jumpTo(2);2!=q.nextAddress&&(e=q.yieldResult);if(!1===e)return q.return();l=b.world();b.deactivate();b.remove();
(p=l.activeWindow()||xe.arr.last(l.getWindows()))&&p.activate();xe.signal(b,"windowClosed",b);q.jumpToEnd()})}},{key:"onMouseUp",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.activate(b);this.minimized||this.ui.resizer.submorphs.includes(b.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",
value:function(b){var e=this;Kb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);this.targetMorph&&(b.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(b){var e=this;Kb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=b.state.origReactsToPointer});
this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var b=this.world(),e=this.targetMorph;b&&e&&(!b.focusedMorph||b.focusedMorph!==e&&!e.isAncestorOf(b.focusedMorph))&&e.focus()}},{key:"isActive",value:function(){var b=this.world();return b&&"bold"==this.ui.windowTitle.fontWeight?xe.arr.last(b.getWindows())===this:!1}},{key:"activate",value:function(b){var e=
this;if(this.isActive())return this.bringToFront(),this.focus(b),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){e.master={auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;xe.arr.without(l.getWindows(),this).forEach(function(p){return p.deactivate()});this.focus(b);xe.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return e.relayoutWindowControls()});
return this}},{key:"deactivate",value:function(){var b=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master.whenApplied().then(function(){b.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},
{key:"commands",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"[window] change title",exec:function(b,e){e=void 0===e?{}:e;var l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return(l=e.title)?q.jumpTo(2):q.yield(b.world().prompt("Enter new title",{input:b.title,historyId:"lively.morphic-window-title-hist"}),3);2!=q.nextAddress&&(l=q.yieldResult);if(p=l)b.title=p;return q.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},position:{set:function(b){this.setProperty("position",b.roundTo(1))}},ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},
resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){l="string"===typeof b?[b,{}]:b;p=[];for(q=0;q<l.length;q+=2)u=l[q],w=l[q+1],u=u.replace(/\n/g,""),y=u.length+0-100,0<y&&(u=u.slice(0,-y)),p.push(u,w||{});e.ui.windowTitle.value=p;return A.yield(e.whenRendered(),2)}e.ui.windowTitle.reactsToPointer=!1;e.relayoutWindowControls();
A.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return xe.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(b){var e=[this.get("header"),this.get("resizer")];xe.arr.withoutAll(this.submorphs,e).forEach(function(l){return l.remove()});b&&this.addMorph(b,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(b){this.setProperty("minimized",
b);this.applyMinimize()}},maximized:{set:function(b){this.setProperty("maximized",b);this.applyMaximize()}}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:21133})}(xe.Morph);VR=xe.Window;var WR=za("aq",VR);xe.default=VR;var Xd=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");
Xd.Rectangle=Od;Xd.rect=wk;Xd.Color=of;Xd.pt=bh;Xd.morph=$i;Xd.VerticalLayout=$r;Xd.Morph=Vi;Xd.StyleSheet=Lp;Xd.Text=Go;Xd.GridLayout=as;Xd.Icon=Ml;Xd.HorizontalLayout=so;Xd.InputLine=PB;Xd.PasswordInputLine=ts;Xd.arr=Ke;Xd.obj=df;Xd.promise=Vf;Xd.connect=Jj;Xd.List=$x;Xd.FilterableList=SB;Xd.RadioButtonGroup=RB;Xd.RadioButton=QB;var NJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:
d.AbstractPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Kb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Xd.obj.dissoc(b,["label","commands","keybindings"]));this.build(b);b.commands&&this.addCommands(b.commands);b.keybindings&&this.addKeyBindings(b.keybindings)}},
{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(b){return this.answer.resolve(b)}},{key:"reject",value:function(b){return this.answer.resolve(b)}},{key:"activate",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.focus();b.answer=Xd.promise.deferred();b._isActive=!0;Xd.promise.finally(b.answer.promise,function(){return b._isActive=!1});b.autoRemove&&Xd.promise.finally(b.answer.promise,function(){return b.fadeOut(200)});return e.return(b.answer.promise)})}},
{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var b=this;return Kb._get(Object.getPrototypeOf(k.prototype),
"commands",this).concat([{name:"resolve",exec:function(e,l){b.resolve(l);return!0}},{name:"reject",exec:function(e,l){b.reject(l);return!0}}])}},{key:"transitionTo",value:function(b,e){e=void 0===e?300:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){p=Xd.morph({fill:l.fill,borderRadius:l.borderRadius});q=Xd.morph({fill:null,origin:Xd.pt(5,5)});b.opacity=0;b.fill=Xd.Color.transparent;b.openInWorld();l.fill=Xd.Color.transparent;$world.addMorph(p,l);p.setBounds(l.bounds());
q.openInWorld();q.addMorph(b);b.center=q.origin;q.center=p.center=l.center;q.scale=b.width/l.width;p.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return l.animate({scale:l.width/b.width,opacity:0,duration:e}),b.animate({opacity:1,duration:e}),q.animate({scale:1,duration:e}),w.yield(p.animate({bounds:q.bounds(),duration:e}),2);b.fill=p.fill;$world.addMorph(b);p.remove();l.remove();q.remove();w.jumpToEnd()})});u.jumpToEnd()})}},{key:"addNamed",
value:function(b,e){var l=this.getSubmorphNamed(b)||this.addMorph(e.isMorph?e:Xd.morph(Object.assign({},e,{name:b})));e.label&&(l.label=e.label);e.isMorph&&(l.name=b);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:Xd.Color.black.withA(.6)},extent:{defaultValue:Xd.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},
autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(b){this.getSubmorphNamed("promptTitle").value=b}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:446,end:3935})}(Xd.Morph);Xd.AbstractPrompt=NJ;Xd.AbstractPrompt=NJ;Xd.AbstractPrompt=NJ;var OJ=za("ai",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("InformPrompt")&&"function"===typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"build",value:function(b){var e=this,l=
b=void 0===b?{}:b,p=l.label,q=this.addNamed("promptTitle",{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});q.textString=p;Xd.connect(l,"fire",this,"resolve");b.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(q.document){var u=e.center;e.width=Math.max(e.width,q.document.width+100);e.align(e.center,u)}e.opacity=1}))}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),
"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Xd.AbstractPrompt));Xd.InformPrompt=OJ;Xd.InformPrompt=OJ;Xd.InformPrompt=OJ;var PJ=za("aj",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"build",value:function(b){var e=this,l=this.addNamed("promptTitle",{type:"text"});l.value=b.label;b=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var p=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[b,p]});Xd.connect(b,"fire",this,"resolve");Xd.connect(p,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||
(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=e.lineWrapping;var q=e.center;e.width=Math.max(e.width,l.document.width+100);e.center=q;e.opacity=1}))}},{key:"resolve",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,
end:6757})}(Xd.AbstractPrompt));Xd.ConfirmPrompt=PJ;Xd.ConfirmPrompt=PJ;Xd.ConfirmPrompt=PJ;var QJ=za("ak",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"resolve",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),
"resolve",this).call(this,b||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(b){var e=b=void 0===b?{choices:["No choice"]}:b;b=e.label;var l=e.choices;e=this.addNamed("ok button",{type:"button"});var p=this.addNamed("cancel button",{type:"button"});b&&(this.addNamed("promptTitle",{type:"text"}).value=b);var q=this.addNamed("choices",{name:"choices",type:Xd.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[e,p]});e&&Xd.connect(e,"fire",this,"resolve");p&&Xd.connect(p,
"fire",this,"reject");this.whenRendered().then(function(){q.choices=l})}},{key:"onKeyDown",value:function(b){if(/^[0-9]$/.test(b.keyCombo)){var e=this.getSubmorphNamed("button "+(Number(b.keyCombo)-1));if(e)return e.trigger(),b.stop()}return Kb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},
{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(b){this.getSubmorphNamed("title").value=b}},choices:{after:["submorphs"],derived:!0,set:function(b){var e;if(e=this.getSubmorphNamed("choices"))e.choices=b}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Xd.AbstractPrompt));Xd.MultipleChoicePrompt=QJ;Xd.MultipleChoicePrompt=QJ;Xd.MultipleChoicePrompt=QJ;var RJ=za("al",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("TextPrompt")&&"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var b=this.getSubmorphNamed("input");this.validate(b.input)?Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,b.acceptInput()):b.indicateError(this.errorMessage)}},{key:"build",value:function(b){var e=this,l=b.label,p=b.input,q=b.historyId,u=b.useLastInput;b=b.selectInput;var w=this.addNamed("promptTitle",{type:"text"});w.value=l;l=this.addNamed("input",
Xd.Text.makeInputLine({historyId:q,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=p||"";q&&u&&(p=Xd.arr.last(l.inputHistory.items))&&(l.textString=p);this.lineWrapping||(this.width=Math.max(this.width,w.textBounds().width+50));p=this.addNamed("ok button",{type:"button",label:this.confirmLabel});q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[p,q]});Xd.connect(p,"fire",this,"resolve");Xd.connect(q,"fire",this,"reject");
w.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var y=e.center;e.width=Math.max(350,w.document.width+100);e.opacity=1;e.center=y}));l.gotoDocumentEnd();l.scrollCursorIntoView();b&&l.selectAll()}},{key:"initLayout",value:function(){var b=this;if(!this.layout){var e=this.getSubmorphNamed("promptTitle"),l=this.getSubmorphNamed("input");e.fit();this.whenRendered().then(function(){var p=Math.max(l.textBounds().width,e.textBounds().width)+20;b.width=
Math.min(b.maxWidth,p);b.opacity=1});this.layout=new Xd.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:e.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield($world.prompt("enter",{input:"a little longer text"}),2):b.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},
validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12404})}(Xd.AbstractPrompt));Xd.TextPrompt=RJ;
Xd.TextPrompt=RJ;Xd.TextPrompt=RJ;var SJ=za("am",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditPrompt")&&"function"===typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(b){var e=b.input,l=b.mode,
p=b.textStyle,q=b.evalEnvironment,u=void 0===b.resolveTextAttributes?!1:b.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",value:b.label});this.resolveTextAttributes=u;p||(p={});l&&!p.fontFamily&&(p.fontFamily="Monaco, monospace");var w=this.addNamed("editor",{type:"text"});w.value=e||"";Object.assign(w,p);w.changeEditorMode(l).then(function(){q&&w.editorPlugin&&Object.assign(w.editorPlugin.evalEnvironment,q)});b=w.textBounds().width+50;b>this.width-25&&(this.width=Math.min(this.maxWidth,
b+125));b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[b,e]});Xd.connect(b,"fire",this,"resolve");Xd.connect(e,"fire",this,"reject");w.gotoDocumentEnd();w.scrollCursorIntoView()}},{key:"resolve",value:function(b){if(this.resolveTextAttributes)return Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);var e=this.getSubmorphNamed("editor").textString.trim();
if(this.historyId){b=Xd.InputLine.getHistory(this.historyId);b.items=b.items.filter(function(l){return l!==e});for(b.items.push(e);b.items.length>b.items.max;)b.items.shift();b.index=b.items.length;Xd.InputLine.setHistory(this.historyId,b)}return Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,e)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},
{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var b=this;return Kb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"history back",exec:function(e,l){if(b.historyId){e=Xd.InputLine.getHistory(b.historyId);l=e.items;var p=e.index;e.index=--p;0>p&&(e.index=p=l.length-1);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}},{name:"browse history",
exec:function(e,l){var p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress){if(!b.historyId)return C.jumpTo(2);p=Xd.InputLine.getHistory(b.historyId);return C.yield(b.world().editListPrompt("input history "+b.historyId,p.items,{requester:b}),3)}2!=C.nextAddress&&(q=C.yieldResult,u=q.status,w=q.list,y=$jscomp.makeIterator(q.selections),A=y.next().value,"canceled"!==u&&(p.items=w,Xd.InputLine.setHistory(b.historyId,p),A&&(p.index=p.items.indexOf(A),b.get("editor").textString=
A)));return C.return(!0)})}},{name:"history forward",exec:function(e,l){if(b.historyId){e=Xd.InputLine.getHistory(b.historyId);l=e.items;var p=e.index;e.index=++p;p>=l.length&&(e.index=p=0);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var b=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);b.editorPlugin.evalEnvironment;e.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Xd.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12413,end:17125})}(Xd.AbstractPrompt));Xd.EditPrompt=SJ;Xd.EditPrompt=SJ;Xd.EditPrompt=SJ;var TJ=za("an",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"build",value:function(b){var e=b.placeholder;this.addNamed("promptTitle",{type:"text",value:b.label,fixedHeight:!0});this.addNamed("input",{type:Xd.PasswordInputLine,fontSize:22,padding:Xd.rect(5,5,0,0),name:"input",placeholder:e||""});b=this.addNamed("ok button",{type:"button",label:"OK"});e=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Xd.connect(b,"fire",this,"resolve");Xd.connect(e,"fire",
this,"reject");this.addNamed("button wrapper",{submorphs:[b,e]})}},{key:"resolve",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var b=this.get("input");b.whenRendered().then(function(){return b.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.passwordPrompt("Enter your secret password:"),
0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17134,end:18532})}(Xd.AbstractPrompt));
Xd.PasswordPrompt=TJ;Xd.PasswordPrompt=TJ;Xd.PasswordPrompt=TJ;var UJ=za("ao",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ListPrompt")&&"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onChange",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,
b);"extent"==b.prop&&this.layout&&!this.layout.active&&(b=b.value.subPt(b.prevValue),this.getSubmorphNamed("prompt list").height+=b.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(b){var e=b.label,l=b.filterable,p=b.multiSelect,q=b.historyId,u=b.useLastInput,w=b.fuzzy,y=b.filterFunction,A=b.sortFunction,C=b.actions,E=b.selectedAction,
L=b.items,I=b.onSelection,V=b.onFilter;this.extent=b.extent||Xd.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=e;var T=this.addNamed("prompt list",{type:l?Xd.FilterableList:Xd.List,multiSelect:p,historyId:q,useLastInput:u});l?this.get("list").master=!1:this.get("prompt list").master=!1;T.items=L;l&&w&&(T.fuzzy=w);l&&"function"===typeof y&&(T.filterFunction=y);l&&"function"===typeof A&&(T.sortFunction=A);I&&"function"===typeof I&&(this.onSelection=I);l&&C&&(T.actions=C);l&&E&&(T.selectedAction=
E);b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[b,e]});Xd.connect(b,"fire",this,"resolve");Xd.connect(e,"fire",this,"reject");l&&(Xd.connect(T,"accepted",this,"resolve"),Xd.connect(T,"canceled",this,"reject"),V&&Xd.connect(T,"updateFilter",function(){return V(T)}),T.whenRendered().then(function(){return T.relayout()}))}},{key:"resolve",value:function(b){var e=this.getSubmorphNamed("prompt list");b=b||e instanceof
Xd.FilterableList?e.acceptInput():{selected:e.selections,status:"accepted",actions:"default"};return this.answer.resolve(b)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.listPrompt("hello",
[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(b){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=b||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(b){var e=this.getSubmorphNamed("prompt list");e&&(e.selectedIndex=b,e.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect",
"submorphs"],set:function(b){var e=this,l=this.getSubmorphNamed("prompt list");l&&Xd.connect(l,"selection",function(p){return b(p,e)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18630,end:22839})}(Xd.AbstractPrompt));Xd.ListPrompt=UJ;Xd.ListPrompt=UJ;Xd.ListPrompt=UJ;var VJ=
za("ap",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditListPrompt")&&"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"build",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"build",this).call(this,b);this.getSubmorphNamed("prompt list").items=b.items;b=this.addNamed("add item button",
{type:"button",label:Xd.Icon.makeLabel("plus")});var e=this.addNamed("remove item button",{type:"button",label:Xd.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(b);this.getSubmorphNamed("button wrapper").addMorph(e);Xd.connect(b,"fire",this,"addItemToList");Xd.connect(e,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e=b.get("prompt list");l=1!=
e.selectedItems.length?-1:0===e.selectedIndex?0:e.selectedIndex-1;e.items=Xd.arr.withoutAll(e.items,e.selectedItems);0>l?e.selection=null:e.selectedIndex=l;e.focus();p.jumpToEnd()})}},{key:"addItemToList",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=b.get("prompt list"),l=e.selection?e.items[e.selectedIndex].string:"",u.yield(b.world().prompt("Input to add to the list",{historyId:b.historyId||"EditListPrompt-input-history",
input:l}),2);p=u.yieldResult;if(!p)return u.return();e=b.get("list");q=e.selection?e.selectedIndex+1:e.items.length;e.addItemAt(p,q);e.focus();e.selectedIndex=q;u.jumpToEnd()})}},{key:"keybindings",get:function(){return Kb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",
get:function(){var b=this;return Kb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"deselect",exec:function(){b.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){b.addItemToList();return!0}},{name:"remove item from list",exec:function(){b.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var b=this.get("prompt list");return this.answer.resolve({list:b.values,selections:b.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],
selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22848,end:25736})}(Xd.ListPrompt));Xd.EditListPrompt=VJ;Xd.EditListPrompt=VJ;Xd.EditListPrompt=VJ;var YR=Object.freeze({__proto__:null,AbstractPrompt:NJ,InformPrompt:OJ,ConfirmPrompt:PJ,MultipleChoicePrompt:QJ,TextPrompt:RJ,EditPrompt:SJ,PasswordPrompt:TJ,ListPrompt:UJ,EditListPrompt:VJ}),Mc=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");
Mc.obj=df;Mc.PropertyPath=Ag;Mc.string=rg;Mc.num=Dj;Mc.arr=Ke;Mc.properties=gm;Mc.pt=bh;Mc.Color=of;Mc.Rectangle=Od;Mc.rect=wk;Mc.signal=xk;Mc.connect=Jj;Mc.disconnect=No;Mc.Morph=Vi;Mc.ShadowObject=An;Mc.morph=$i;Mc.Text=Go;Mc.GridLayout=as;Mc.HorizontalLayout=so;Mc.Path=Uu;Mc.Ellipse=Su;Mc.Label=Ho;Mc.Tooltip=Vu;Mc.Icon=Ml;Mc.kld=mb;var z6=Mc.kld;Mc.Shapes=z6.Shapes;Mc.Intersection=z6.Intersection;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LeashEndpoint")&&
"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(b){var e=b.state;b.state.dragDelta=e.lastDragPosition.subPt(e.clickedOnPosition);b.state.endpoint=this;this.leash.onEndpointDrag(b)}},{key:"canConnectTo",value:function(b){return!b.isWorld&&
!b.isHaloItem&&this.leash.canConnectTo(b)&&!b.isHighlighter&&!b.ownerChain().some(function(e){return e.isHaloItem})}},{key:"onDrag",value:function(b){var e=this;if(this.connectedMorph)this.clearConnection();else{var l=b.hand.findDropTarget(b.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(p){return e.canConnectTo(p)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Mc.obj.keys(Mc.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}b.state.endpoint=this;this.leash.onEndpointDrag(b)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var b=this.connectedMorph,e=b.isPath,
l=b.isPolygon,p=b.vertices,q=b.origin;b=this.connectedMorph.globalBounds();if((e||l)&&"center"!=this.attachedSide){e=p.map(function(w){return Mc.pt(w.x,w.y).addPt(q)});l=Mc.Rectangle.unionPts(e);var u=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(u));l=Mc.Shapes.line(u.x,u.y,l.x,l.y);e=Mc.Shapes.polyline(Mc.arr.flatten(e.map(function(w){return[w.x,w.y]})));e=Mc.arr.min(Mc.Intersection.intersect(e,l).points,function(w){return Mc.pt(w.x,w.y).dist(u)});return Mc.pt(e.x,e.y).addPt(b.topLeft())}return b[this.attachedSide]()}},
{key:"update",value:function(b){b&&!["position","extent","rotation","scale"].includes(b.prop)&&b.target!=this.connectedMorph||!this.connectedMorph||(b=this.getConnectionPoint(),b=this.leash.localize(b),this.vertex.position=b,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Mc.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(b){var e=this.vertex.position,l=e.x;e=e.y;var p=this.leash.borderWidth;b&&b.meta&&
b.meta.animation?this.animate({center:Mc.pt(l+p,e+p),duration:b.duration}):this.center=Mc.pt(l+p,e+p)}},{key:"attachTo",value:function(b,e){this.clearConnection();this.leash.world()||this.leash.openInWorld(b.globalPosition);this.connectedMorph=b;this.attachedSide=e;this.vertex.controlPoints=this.leash.controlPointsFor(e,this);this.update();Mc.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},
leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(b){this.leash.vertices[this.index]=b;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:444,end:4597})})(Mc.Ellipse);var WJ=za("bG",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Leash")&&"function"===typeof d.Leash?d.Leash:d.Leash=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onMouseDown",value:function(b){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,
this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Kb._get(Object.getPrototypeOf(k.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(b){b.state.endpoint.vertex.position=b.state.endpoint.vertex.position.addPt(b.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(b){return Object.assign({},this.endpointStyle,{},
0==b?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(b){var e=this.vertices[b];return new Mc.LeashEndpoint({index:b,leash:this,position:Mc.pt(e.x,e.y)})}},{key:"controlPointsFor",value:function(b,e){b=Mc.Leash.connectionPoints[b];b=e==this.startPoint?b.negated():b;return{previous:b.scaleBy(100),next:b.negated().scaleBy(100)}}},{key:"relayout",value:function(b){if(!b||["vertices","position"].includes(b.prop))this.startPoint.relayout(b),this.endPoint.relayout(b)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Mc.pt(0,-1),topLeft:Mc.pt(-1,-1),rightCenter:Mc.pt(1,0),bottomRight:Mc.pt(1,1),bottomCenter:Mc.pt(0,1),bottomLeft:Mc.pt(-1,1),leftCenter:Mc.pt(-1,0),topRight:Mc.pt(1,-1),center:Mc.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Mc.pt(0,0)},end:{defaultValue:Mc.pt(0,0)},canConnectTo:{defaultValue:function(b){return!0}},getLabelFor:{defaultValue:function(b){return b.name}},
reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Mc.Color.black,origin:Mc.pt(3.5,3.5),extent:Mc.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Mc.Color.black},fill:{defaultValue:Mc.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=
[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Mc.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4606,end:7493})}(Mc.Path));
Mc.Leash=WJ;Mc.Leash=WJ;Mc.Leash=WJ;var XJ=za("bp",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"normalize",value:function(b){return Math.abs(b/(this.max-this.min))}},{key:"update",value:function(b){b=void 0===b?this.value:b;b=(this.width-
15)*this.normalize(b);this.getSubmorphNamed("slideHandle").center=Mc.pt(b+7.5,10)}},{key:"onSlide",value:function(b,e){b=Mc.num.roundTo(this.value+e.x/this.width,.01);this.value=b=Math.max(this.min,Math.min(this.max,b));this.update(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Mc.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],
initialize:function(){var b=new Mc.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Mc.Path({borderColor:Mc.Color.gray.darker(),borderWidth:2,vertices:[Mc.pt(0,0),Mc.pt(this.width,0)],position:Mc.pt(0,this.height/2)}),b];Mc.connect(this,"extent",this,"update");this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:7502,end:8800})}(Mc.Morph));Mc.Slider=XJ;Mc.Slider=XJ;Mc.Slider=XJ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?d.SliderHandle:d.SliderHandle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"onDragStart",value:function(b){this.valueView=(new Mc.Tooltip({description:""})).openInWorld(b.hand.position.addXY(10,
10))}},{key:"onDrag",value:function(b){this.slider.onSlide(this,b.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=b.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(b){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Mc.Color.gray},borderColor:{defaultValue:Mc.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Mc.ShadowObject({blur:5})},
extent:{defaultValue:Mc.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8802,end:9638})})(Mc.Ellipse);var YJ=za("aC",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
k=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if("Enter"==b.keyCombo){var e=
$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=e.next().value;e.next();"string"===typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));b.stop()}}},{key:"scrub",value:function(b){this.field.update(b)}},{key:"onDragStart",value:function(b){this.execCommand("toggle active mark");this.initPos=b.position;this.factorLabel=(new Mc.Tooltip({description:"1x"})).openInWorld(b.hand.position.addXY(10,10));b.hand.extent=Mc.pt(30,30);b.hand.nativeCursor="ew-resize";b.hand.fill=
Mc.Color.transparent;b.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(b){var e=b.position.subPt(this.initPos);b=e.x;e=Mc.num.roundTo(Math.exp(-e.y/$world.height*4),.01)*this.baseFactor;return{offset:b,scale:e}}},{key:"onDrag",value:function(b){var e=this.getScaleAndOffset(b),l=e.scale;e=this.getCurrentValue(e.offset,l);this.scrub(e);e=this.floatingPoint?e.toFixed(3):Mc.obj.safeToString(e);this.unit&&(e+=" "+this.unit);this.replace(this.documentRange,e,!1,this.scaleToBounds,!1,!1);
this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=b.hand.position.addXY(10,10);b.hand.moveBy(Mc.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(b,e){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?b*e:Math.round(b*e))))}},{key:"onDragEnd",value:function(b){var e=this.getScaleAndOffset(b);this.value=this.getCurrentValue(e.offset,e.scale);this.factorLabel.softRemove();b.hand.extent=Mc.pt(1,1);b.hand.fill=Mc.Color.orange;b.hand.reactsToPointer=
!1}},{key:"value",set:function(b){this.scrubbedValue=b=Math.max(this.min,Math.min(this.max,b));b=this.floatingPoint?b.toFixed(3):Mc.obj.safeToString(b);b=this.unit?b+(" "+this.unit):b+"";this.replace(this.documentRange,b,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(b){this.fixedWidth=!0;this.setProperty("scaleToBounds",b)}},field:{derived:!0,get:function(){return this.owner}},
value:{defaultValue:0},fill:{defaultValue:Mc.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9647,end:12810})}(Mc.Text));
Mc.ValueScrubber=YJ;Mc.ValueScrubber=YJ;Mc.ValueScrubber=YJ;var UB=za("bt",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"trigger",value:function(){try{this.checked=!this.checked,Mc.signal(this,"toggle",this.checked)}catch(e){var b=
this.world();b?b.logError(e):console.error(e)}}},{key:"onMouseDown",value:function(b){this.active&&this.trigger()}},{key:"render",value:function(b){return b.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Mc.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Mc.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],
d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12819,end:13565})}(Mc.Morph));Mc.CheckBox=UB;Mc.CheckBox=UB;Mc.CheckBox=UB;var ZJ=za("aD",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LabeledCheckBox")&&"function"===typeof d.LabeledCheckBox?
d.LabeledCheckBox:d.LabeledCheckBox=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(b){this.active&&this.trigger();b.stop()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Mc.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(b){this.layout=new Mc.HorizontalLayout({direction:"left"==b?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",b)}},layout:{initialize:function(){this.layout=new Mc.HorizontalLayout({direction:"left"==
this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(b){this.labelMorph.value=b}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(b){this.checkboxMorph.checked=b;Mc.signal(this,"checked",b)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(b){this.checkboxMorph.active=b}},labelMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new Mc.CheckBox({name:"checkbox"}),new Mc.Label({nativeCursor:"pointer",name:"label",padding:Mc.Rectangle.inset(5,3)})];Mc.connect(this,"alignCheckBox",this,"extent");Mc.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13574,end:16133})}(Mc.Morph));Mc.LabeledCheckBox=ZJ;Mc.LabeledCheckBox=ZJ;Mc.LabeledCheckBox=ZJ;var $J=za("bo",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"createLabels",value:function(b,e,l){var p=this;l=void 0===l?{}:l;return Mc.arr.zip(b,e).map(function(q){q=$jscomp.makeIterator(q);var u=q.next().value,w=q.next().value;q=l[u];q=Mc.morph(Object.assign({name:u+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:u},q&&{tooltip:q}));Mc.connect(q,"onMouseDown",p,"update",{updater:function(y){y(u,w)},varMapping:{name:u,value:w}});return q})}},{key:"relayout",value:function(b){b=void 0===b?!0:b;var e=
this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!e.currentLabel||!e.layout)return q.return();e.layout.forceLayout();l=e.get("typeMarker");p=e.currentLabel.bounds();return b?q.yield(l.animate({bounds:p,duration:200}),3):(l.setBounds(p),q.jumpTo(2))}q.jumpToEnd()})}},{key:"animateFontColor",value:function(b,e,l){var p=b.fontColor;b.animate({customTween:function(q){return b.fontColor=p.interpolate(q,e)},duration:l})}},{key:"update",value:function(b,e,l){l=
void 0===l?!1:l;var p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=p.get(b+"Label");if(q==p.currentLabel)return u.return();p.getSubmorphsByStyleClassName("Label").forEach(function(w){w!=q&&p.animateFontColor(w,p.fontColor,200)});p.currentLabel=q;!l&&Mc.signal(p,b,e);!l&&Mc.signal(p,"switchLabel",e);p.relayout(!l);return u.yield(p.animateFontColor(q,p.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",
value:function(){(new Mc.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(b){Mc.obj.isArray(b)?this.keys=this.values=b:(this.keys=Mc.obj.keys(b),this.values=Mc.obj.values(b))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Mc.Color.black},selectionFontColor:{defaultValue:Mc.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},
layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new Mc.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Mc.arr.interpose(this.keys.map(function(b){return b+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,
this.values,this.tooltips))),Mc.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16142,end:19750})}(Mc.Morph));Mc.ModeSelector=
$J;Mc.ModeSelector=$J;Mc.ModeSelector=$J;var aK=za("aE",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("DropDownSelector")&&"function"===typeof d.DropDownSelector?d.DropDownSelector:d.DropDownSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"build",value:function(){this.dropDownLabel=Mc.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});
this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var b=this,e=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:e,target:this}]:[]),$jscomp.arrayFromIterable(Mc.arr.compact(this.commands.map(function(l){return l.name!=e&&{command:l.name,target:b}}))))}},{key:"commands",get:function(){var b=this;return Mc.obj.isArray(this.values)?this.values.map(function(e){return{name:String(e),
exec:function(){Mc.signal(b,"update",e);b.selectedValue=e}}}):Mc.properties.forEachOwn(this.values,function(e,l){return{name:e,exec:function(){Mc.signal(b,"update",l);b.selectedValue=l}}})}},{key:"getNameFor",value:function(b){return this.getCurrentValue?this.getCurrentValue():Mc.obj.isArray(this.values)?Mc.obj.safeToString(b):Mc.obj.safeToString(Mc.properties.nameFor(this.values,b))}},{key:"relayout",value:function(){var b=this.getNameFor(this.selectedValue),e=this.get("currentValue");"undefined"==
b?(e.value="Not set",e.fontColor=Mc.Color.gray):(e.value=b,e.fontColor=Mc.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(b){this.menu=this.world().openWorldMenu(b,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},
{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(b){this.setProperty("selectedValue",b);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Mc.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Mc.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",
set:function(b){this.setProperty("isSelected",b);this.fontColor=b?Mc.Color.white:Mc.Color.black}},layout:{initialize:function(){this.layout=new Mc.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:19759,end:23034})}(Mc.Morph));Mc.DropDownSelector=aK;Mc.DropDownSelector=aK;Mc.DropDownSelector=aK;var bK=za("bs",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SearchField")&&"function"===typeof d.SearchField?d.SearchField:d.SearchField=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"parseInput",value:function(){var b=Array.from(this.textString).reduce(function(l,
p){if("\\"===p&&!l.escaped)return l.escaped=!0,l;" "!==p||l.escaped?(l.spaceSeen=!1,l.current+=p):(!l.spaceSeen&&l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});b.current&&b.tokens.push(b.current);var e=b.tokens.map(function(l){return l.toLowerCase()});return{tokens:b.tokens,lowercasedTokens:e}}},{key:"clearInput",value:function(){this.textString="";Mc.signal(this,"searchInput",this.parseInput());this.onBlur()}},
{key:"matches",value:function(b){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:b}):!0}},{key:"onChange",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b="replace"===b.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&b&&Mc.signal(this,"searchInput",
this.parseInput())}},{key:"onBlur",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},
{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Mc.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Mc.Color.gray},borderColor:{defaultValue:Mc.Color.gray},layout:{initialize:function(){this.layout=new Mc.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",
b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},
defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String(Mc.PropertyPath("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),q=0;e.lowercasedTokens.forEach(function(u){p.startsWith(u)?q-=10:p.includes(u)&&
(q-=5)});return Mc.arr.sum(e.lowercasedTokens.map(function(u){return Mc.string.levenshtein(p.toLowerCase(),u)}))+q})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var q=String(Mc.PropertyPath(p).get(l)).toLowerCase();return 3>=Mc.arr.sum(e.lowercasedTokens.map(function(u){return Mc.string.levenshtein(q,
u)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Mc.Icon.makeLabel("times-circle",{padding:Mc.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Mc.pt(20,22),name:"placeholder icon",fontColor:Mc.Color.gray,nativeCursor:"pointer"})];Mc.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:23078,end:29598})}(Mc.Text));Mc.SearchField=bK;Mc.SearchField=bK;Mc.SearchField=bK;var ZR=Object.freeze({__proto__:null,Leash:WJ,Slider:XJ,ValueScrubber:YJ,CheckBox:UB,LabeledCheckBox:ZJ,ModeSelector:$J,DropDownSelector:aK,SearchField:bK}),Bi=lively.FreezerRuntime.recorderFor("lively.components/index.js");
Object.assign(Bi,Hoa);Object.assign(Bi,Goa);Object.assign(Bi,Ioa);Object.assign(Bi,Joa);Object.assign(Bi,Koa);Object.assign(Bi,Loa);Bi.Window=WR;Bi.prompts=YR;Bi.widgets=ZR;Bi.LoadingIndicator=Yx;Bi.addClassMappings=Ty;Bi.List=$x;Bi.DropDownList=TB;Bi.Button=Zx;Bi.CheckBox=UB;Bi.addClassMappings({list:Bi.List,dropdownlist:Bi.DropDownList,button:Bi.Button,checkbox:Bi.CheckBox,labeledcheckbox:Bi.widgets.LabeledCheckBox});Bi.Window=WR;Bi.Window=WR;Bi.LoadingIndicator=Yx;Bi.LoadingIndicator=Yx;Bi.prompts=
YR;Bi.prompts=YR;Bi.widgets=ZR;Bi.widgets=ZR;var Sl=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Sl.Morph=Vi;Sl.MorphicDB=Gp;Sl.LoadingIndicator=Yx;Sl.resource=Dc;var ay=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),k=d.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof d.WorldLoadingScreen?d.WorldLoadingScreen:d.WorldLoadingScreen=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Kb(k,a,[{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;b.setBounds($world.windowBounds());b.get("json target indicator").topRight=b.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){if(!lively.FreezerRuntime)return w.jumpTo(0);e=b.get("package loading indicator");l=b.get("css loading screen");p=b.getWorldName();q=b.getFilePath();(u=b.getSnapshot())?(e.isLayoutable=e.visible=!1,l.isLayoutable=l.visible=!0):(e.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");q&&b.get("json target indicator").animate({opacity:1,duration:300});
return w.yield(b.transitionToLivelyWorld({worldName:p,filePath:q,snapshot:u},e),3)}e.stopStepping();w.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(b,e){var l=b.worldName,p=b.filePath,q=b.snapshot,u=this,w,y,A,C,E,L,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:return w=Sl.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,y=u.get("package loading indicator"),V.yield(Promise.resolve().then(function(){return A6}),
2);case 2:A=V.yieldResult;C=A.bootstrap;if(!(E=l&&"__newWorld__"!=l)){V.jumpTo(3);break}return V.yield(Sl.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:w}).exists("world",l),4);case 4:E=!V.yieldResult.exists;case 3:if(E)return V.return(u.indicateMissingWorld(!0));if(!(L=p)){V.jumpTo(5);break}return V.yield(Sl.resource(document.location.origin).join(p).exists(),6);case 6:L=!V.yieldResult;case 5:if(L)return V.return(u.indicateMissingWorld(!0));I=Sl.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3});q&&(I.visible=!1);e.opacity=1;return V.yield(C({worldName:l,filePath:p,loadingIndicator:I,progress:y,snapshot:q}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Sl.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return Sl.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return Sl.resource(document.location.href).query().snapshot||
window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(b){this.get("package loading indicator").visible=!b;this.get("broken heart").visible=this.get("broken heart").isLayoutable=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:158,end:3675})}(Sl.Morph);Sl.WorldLoadingScreen=ay;Sl.WorldLoadingScreen=ay;Sl.WorldLoadingScreen=ay;var Lf=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Lf.Morph=Vi;Lf.MorphicDB=Gp;Lf.World=wq;Lf.easings=Bn;Lf.morph=$i;Lf.promise=Vf;Lf.string=rg;Lf.date=op;Lf.Color=of;Lf.pt=bh;Lf.LoadingIndicator=Yx;Lf.resource=Dc;Lf.missingSVG=
'data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var $R=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("TitleWrapper")&&"function"===typeof d.TitleWrapper?d.TitleWrapper:d.TitleWrapper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"startMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=e}})}},{key:"stopMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=
1-e}})}},{key:"startMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-e}})}},{key:"stopMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-1+e}})}},{key:"startOnce",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(e._fn)return l.return();e._fn=b;return l.yield(b(),2)}e._fn=null;l.jumpToEnd()})}},{key:"updateTitle",value:function(){var b=this;if(this.title){var e=
$jscomp.makeIterator(this.submorphs).next().value;e.left+=this._hoverDelta;e.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingLeft(),2):l.yield(b.startMovingRight(),0)})}):20<e.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingRight(),2):l.yield(b.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!b.title)return p.return();e=$jscomp.makeIterator(b.submorphs);l=e.next().value;l.textString=b.title;return p.yield(l.whenRendered(),2)}b._hoverDelta=0;b.startStepping("updateTitle");l.right>b.width&&b.startMovingLeft();p.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var b=this.submorphs[0];b.textString=Lf.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;b.left=0}}},{key:"onHoverIn",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(b){Kb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(b){this.setProperty("title",
b);b&&(this.submorphs[0].textString=Lf.string.truncate(b,18,"..."))}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(Lf.Morph);Lf.TitleWrapper=$R;Lf.TitleWrapper=$R;Lf.TitleWrapper=$R;var by=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
k=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Kb(k,a,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b.initWithCommit(b._commit),
0)})}},{key:"initWithCommit",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){if(1==E.nextAddress)return l=e.ui,p=l.preview,q=l.timestamp,u=l.title,w=l.description,y=l.previewContainer,e.opacity=.5,y.opacity=0,E.yield(e.whenRendered(),2);if(3!=E.nextAddress)return e._commit=b,p.imageUrl=b.preview||Lf.missingSVG,A=b.author,C=A.name,C=C.startsWith("guest-")?"guest":C,q.value=[C,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Lf.date.format(b.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],u.title=b.name,w.value=b.description,E.yield(e.whenRendered(),3);y.opacity=1;e.animate({opacity:1,duration:300});E.jumpToEnd()})}},{key:"openAnimated",value:function(b){b=void 0===b?$world.visibleBounds():b;var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return l=Lf.morph(Object.assign({},e.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[e.ui.spinner.spec()]})).openInWorld(),
l.hasFixedPosition=!0,l.globalPosition=e.globalPosition,l.opacity=0,p.yield(l.whenRendered(),2);case 2:return p.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:b,borderRadius:0,duration:500,easing:Lf.easings.inOutQuint}),l.respondsToVisibleWindow=!0,p.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Lf.easings.inOutQuint}),4);case 4:return p.yield(Lf.promise.delay(1E3),5);case 5:return p.return(l)}})}},{key:"openWorld",value:function(){var b=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.openAnimated(),2);b.loadWorld();e.jumpToEnd()})}},{key:"loadWorld",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){e=b._commit;l=e._id;p=e.name;if(lively.FreezerRuntime)return q=Lf.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),b.transitionToLivelyWorld(document.location.origin,b._commit,
q),w.jumpTo(0);u=Lf.LoadingIndicator.open("loading "+p);return w.yield(Lf.World.loadFromCommit(l,void 0,{morphicDB:Lf.MorphicDB.default}),3)}u.remove();w.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(b,e,l){var p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(Lf.resource("part://partial freezing/package loading progress indicator").read(),2);if(3!=w.nextAddress)return p=w.yieldResult,w.yield(Promise.resolve().then(function(){return A6}),
3);q=w.yieldResult;u=q.bootstrap;return w.yield(u({commit:e,loadingIndicator:l,progress:p}),0)})}},{key:"showVersions",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return e=200,l=Lf.easings.inOutExpo,p=b.ui,q=p.previewContainer,w.yield(Lf.resource("part://partial freezing/version container").read(),2);if(3!=w.nextAddress)return u=w.yieldResult,u.name="version container",u.position=Lf.pt(0,0),b.addMorph(u),u.reactsToPointer=
u.visible=!0,u.initializeFromStartCommit(b._commit),b.animate({width:515,duration:e,easing:l}),q.animate({opacity:0,duration:e}),w.yield(u.animate({opacity:1,duration:e}),3);q.reactsToPointer=q.visible=!1;w.jumpToEnd()})}},{key:"hideVersions",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=Lf.easings.inOutExpo,l=b.ui,p=l.previewContainer,q=l.versionContainer,p.reactsToPointer=p.visible=!0,b.animate({width:245,duration:200,
easing:e}),p.animate({opacity:1,duration:200}),u.yield(q.animate({opacity:0,duration:200}),2);q.reset();q.remove();u.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(b){this.ui.deleteButton.visible=b}},{key:"onHoverIn",value:function(b){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(b){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=300,l=b.ui,p=
l.previewContainer,u.yield(Lf.resource("part://partial freezing/delete world prompt").read(),2);q=u.yieldResult;Object.assign(q,{name:"delete world prompt",position:Lf.pt(0,0),opacity:0});b.addMorph(q);q.visible=!0;return u.yield(b.withAnimationDo(function(){q.opacity=1;b.dropShadow=b.dropShadow.with({color:Lf.Color.black.withA(.5),blur:50});p.opacity=.3;p.blur=1},{duration:e}),0)})}},{key:"confirmDelete",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(Lf.MorphicDB.default.commit(Object.assign({},b._commit,{content:void 0,snapshot:null})),2);b.isComponent||b.owner.isWorld||b.owner.remove();e.jumpToEnd()})}},{key:"cancelDelete",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e=b.ui,l=e.previewContainer,p=e.deleteWorldPrompt,q.yield(b.withAnimationDo(function(){Object.assign(l,{opacity:1,blur:0});b.dropShadow=b.dropShadow.with({color:Lf.Color.rgba(0,
0,0,.11)});p.opacity=0},{duration:300}),2);p.remove();q.jumpToEnd()})}},{key:"onMouseUp",value:function(b){var e=this.ui,l=e.openButton,p=e.versionButton,q=e.deleteButton,u=e.closeVersionsButton,w=e.cancelDeleteButton;e=e.confirmDeleteButton;switch(b.targetMorph){case l:this.openWorld();break;case p:this.showVersions();break;case q:this.tryToDelete();break;case u:this.hideVersions();break;case e:this.confirmDelete();break;case w:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10197})}(Lf.Morph);Lf.WorldPreview=by;Lf.WorldPreview=by;Lf.WorldPreview=by;var cy=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Kb(k,a,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";b.setBounds($world.windowBounds());b.getSubmorphNamed("globe").extent=b.extent;b.ensureUserFlap();var e=b.getSubmorphNamed("a project browser");e&&(e.center=b.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return $world.get("user flap")?
e.return():e.yield(Lf.resource("part://SystemIDE/user flap master/dark").read(),2);if(3!=e.nextAddress)return b=e.yieldResult,b.name="user flap",b.showMorphControls=!1,b.hasFixedPosition=!0,b.openInWorld(),b.opacity=0,b.alignInWorld(),b.get("fast load toggler").refresh(),e.yield(Lf.promise.delay(1E3),3);b.animate({opacity:1});e.jumpToEnd()})}},{key:"beforePublish",value:function(){var b=this.getSubmorphNamed("a project browser");b&&b.remove()}},{key:"onLoad",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(b.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Lf.Color.black;document.documentElement.style.background=Lf.Color.black;b.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});b.getSubmorphNamed("globe").fullyLoaded();(e=document.getElementById("loading screen"))&&e.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress){if(e=b.getSubmorphNamed("a poject browser"))return w.jumpTo(2);l=b;p=l.addMorph;q=l;return w.yield(Lf.resource("part://partial freezing/project browser").read(),3)}2!=w.nextAddress&&(e=p.call(q,w.yieldResult));u=e;u.name="a project browser";b.reset();u.showCloseButton=!1;u.extent=Lf.pt(1110,800).minPt(b.extent.subPt(Lf.pt(50,150)));u.center=b.innerBounds().center();u.animate({opacity:1,duration:300});u.displayWorlds();u.hasFixedPosition=!1;w.jumpToEnd()})}},{key:"reset",value:function(){var b=
this.getSubmorphNamed("a project browser");b.opacity=0;b.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10208,end:13426})}(Lf.Morph);Lf.WorldLandingPage=cy;Lf.WorldLandingPage=cy;Lf.WorldLandingPage=cy;var Sq=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");Sq.WorldLoadingScreen=ay;Sq.WorldLandingPage=cy;Sq.WorldPreview=by;Sq.WorldLoadingScreen=ay;Sq.WorldLoadingScreen=ay;Sq.WorldLandingPage=cy;Sq.WorldLandingPage=cy;Sq.WorldPreview=by;Sq.WorldPreview=by;var Ad=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");
Ad.bootstrap=TG;Ad.fastPrepLivelySystem=function(a){return Promise.resolve().then(function(){a.status="starting fast system preparation..."}).then(function(){return Ad.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return Ad.loadViaScript(Ad.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};Ad.installFetchHook=
function(a){function d(k,b){Ad.loads++;a.status="loading "+Ad.string.truncateLeft(b.name.replace(window.System.baseURL,""),25,"...");a.progress=Ad.loads/(800-4*Object.keys(Ad.extractedModules).length);a.center=$world.innerBounds().center();return k(b)}window.__logFetch=d;lively.modules.installHook("fetch",d)};Ad.extractModules=function(a){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(a)}).forEach(function(d){Ad.extractedModules[Ad.resource(System.baseURL).join(d).url]=
Object.assign({},lively.FreezerRuntime.registry[d].exports)})};Ad.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(cb.import("./world-778a409e.js").then(function(d){return d.w}),2);case 2:return a.yield(cb.import("./editor-plugin-bcd9fa99.js").then(function(d){return d.e}),3);case 3:return a.yield(cb.import("./editor-plugin-05c33777.js"),4);case 4:return a.yield(cb.import("./index-a98bf65c.js"),5);case 5:return a.yield(Promise.resolve().then(function(){return Yna}),
6);case 6:return a.yield(Promise.resolve().then(function(){return Zna}),7);case 7:return a.yield(Promise.resolve().then(function(){return pga}),8);case 8:Ad.extractModules("lively.bindings"),Ad.extractModules("lively.shell"),Ad.extractModules("lively.ide"),Ad.extractModules("lively.components"),a.jumpToEnd()}})};Ad.bootstrapLivelySystem=function(a,d,k){return Promise.resolve().then(function(){a.status="starting bootstrap process..."}).then(function(){var b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(d.whenRendered(),
2);case 2:if("frozen"!=k["lively.lang"]&&!Ad.fastLoad){w.jumpTo(3);break}return w.yield(Promise.resolve().then(function(){return H0}),4);case 4:b=w.yieldResult,Ad.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete b._prevLivelyGlobal;case 3:if("frozen"!=k["lively.ast"]&&!Ad.fastLoad){w.jumpTo(5);break}e=lively;return w.yield(Promise.resolve().then(function(){return rH}),6);case 6:e.ast=w.yieldResult,Ad.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=k["lively.source-transform"]&&!Ad.fastLoad){w.jumpTo(7);break}l=lively;return w.yield(Promise.resolve().then(function(){return jga}),8);case 8:l.sourceTransform=w.yieldResult,Ad.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=k["lively.classes"]&&!Ad.fastLoad){w.jumpTo(9);break}return w.yield(cb.import("./object-classes-27c453f9.js"),10);case 10:return p=lively,w.yield(Promise.resolve().then(function(){return x5}),
11);case 11:p.classes=w.yieldResult,Ad.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=k["lively.vm"]&&!Ad.fastLoad){w.jumpTo(12);break}q=lively;return w.yield(Promise.resolve().then(function(){return U1}),13);case 13:q.vm=w.yieldResult,Ad.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=k["lively.modules"]&&!Ad.fastLoad){w.jumpTo(14);break}return w.yield(Promise.resolve().then(function(){return eJ}),
15);case 15:Ad.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=k["lively.user"]&&!Ad.fastLoad){w.jumpTo(16);break}return w.yield(Promise.resolve().then(function(){return $na}),17);case 17:return w.yield(cb.import("./user-ui-2bb4d74a.js"),18);case 18:Ad.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=k["lively.storage"]&&!Ad.fastLoad){w.jumpTo(19);break}return w.yield(Promise.resolve().then(function(){return Xma}),
20);case 20:Ad.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=k["lively.morphic"]&&!Ad.fastLoad){w.jumpTo(0);break}return w.yield(Promise.resolve().then(function(){return sda}),22);case 22:return Ad.extractModules("lively.resources"),w.yield(Promise.resolve().then(function(){return a6}),23);case 23:return w.yield(cb.import("./index-792c91c7.js"),24);case 24:return Ad.extractModules("lively.2lively"),w.yield(Promise.resolve().then(function(){return vga}),
25);case 25:return Ad.extractModules("lively.serializer2"),w.yield(Ad.loadComponents(),26);case 26:return w.yield(cb.import("./index-9ec474a0.js").then(function(y){return y.i}),27);case 27:return Ad.extractModules("lively.halos"),w.yield(cb.import("./index-27557bc7.js"),28);case 28:return Ad.extractModules("lively-system-interface"),w.yield(Promise.resolve().then(function(){return oga}),29);case 29:return Ad.extractModules("lively.graphics"),u=lively,w.yield(Promise.resolve().then(function(){return Foa}),
30);case 30:u.morphic=w.yieldResult,Ad.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),w.jumpToEnd()}})}).then(function(){var b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return b=window.SYSTEM_BASE_URL||document.location.origin,e=window.System,l=e.baseURL,l.endsWith("/")&&(l=l.slice(0,-1)),A.yield(Ad.resource(b).join("package-registry.json").readJson(),2);case 2:return p=A.yieldResult,A.yield(Ad.loadViaScript(Ad.resource(b).join("/lively.next-node_modules/babel-standalone/babel.js").url),
3);case 3:return A.yield(Ad.loadViaScript(Ad.resource(b).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return A.yield(Ad.loadViaScript(Ad.resource(b).join("/lively.modules/systemjs-init.js").url),5);case 5:q=lively.modules.getSystem("bootstrapped",{baseURL:b});lively.modules.changeSystem(q,!0);q["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(q,p);for(u in Ad.extractedModules)w=u.replace(l,b),q.set(w,q.newModule(Ad.extractedModules[u])),
y=lively.modules.module(w),y._recorder=Ad.extractedModules[u],y._frozenModule=!0;e.config({baseURL:b});Ad.installFetchHook(a);A.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.lang"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.lang",function(e){d.finishPackage({packageName:"lively.lang",loaded:!0});delete e._prevLivelyGlobal},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d.animate({opacity:1,
easing:Ad.easings.outExpo,duration:300});if("dynamic"==k["lively.ast"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.ast",function(e){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.source-transform"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.source-transform",function(e){d.finishPackage({packageName:"lively.source-transform",
loaded:!0});lively.sourceTransform=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.classes"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.classes",function(e){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.vm"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.vm",
function(e){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=e},a));b.jumpToEnd()})}).then(function(){function b(e){lively.modules=e;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Ad.installFetchHook(a);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];e=System["__lively.modules__packageRegistry"]=e.PackageRegistry.ofSystem(System);Object.assign(e,
Ad.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));e.resetByURL();l=e.allPackages();var p=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Ad.adoptObject(u,p)});l=Object.values(System["__lively.modules__loadedModules"]);var q=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Ad.adoptObject(u,
q)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return"frozen"==k["lively.modules"]||Ad.fastLoad?(System._scripting=lively.modules.scripting,e.jumpTo(2)):e.yield(Ad.importPackageAndDo("lively.modules",b,a),2);d.finishPackage({packageName:"lively.modules",loaded:!0});e.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.user"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.user",
function(e){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.storage"]&&!Ad.fastLoad)return b.return(Ad.importPackageAndDo("lively.storage",function(e){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=e},a));b.jumpToEnd()})})};Ad.importPackageAndDo=function(a,d,k){var b=a.split("/").slice(-1)[0];k.label="loading "+b;return lively.modules.importPackage(a).then(d||
function(){})};Ad.polyfills=function(){var a=[];"PointerEvent"in window||a.push(Ad.loadViaScript(Ad.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));"fetch"in window||a.push(Ad.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(a)};Ad.resource=Dc;Ad.unregisterExtension=Zd;Ad.registerExtension=Hd;Ad.loadViaScript=Tp;Ad.promise=Vf;Ad.string=rg;Ad.obj=df;Ad.modulePackage=eJ;Ad.easings=Bn;Ad.adoptObject=Yv;Ad.Color=of;Ad.styleguideResourceExtension=
ZI;Ad.partResourceExtension=gJ;lively.modules=Ad.modulePackage;Ad.loginDone=!0;Ad.doBootstrap=!0;Ad.askBeforeQuit=!0;Ad.worldLoaded=!1;Ad.loc=document.location;Ad.query=Ad.resource(Ad.loc.href).query();Ad.fastLoad=1==Ad.query.fastLoad||window.FORCE_FAST_LOAD;Ad.bootstrap=TG;Ad.bootstrap=TG;Ad.loads=0;Ad.extractedModules={};var A6=Object.freeze({__proto__:null,bootstrap:TG}),Moa=/^part:\/\/([^\/]+)\/(.*)$/,aS=function(){return Qx.apply(this,arguments)||this};$jscomp.inherits(aS,Qx);aS.prototype.read=
function(){var a=this,d=function(){return Qx.prototype.read},k,b,e,l,p,q,u,w,y,A,C,E,L,I,V,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:switch(a.url){case "part://partial freezing/package loading progress indicator":return Y.jumpTo(2);case "part://partial freezing/version container":return Y.jumpTo(3);case "part://partial freezing/delete world prompt":return Y.jumpTo(4);case "part://SystemIDE/user flap master/dark":return Y.jumpTo(5);case "part://SystemIDE/lively top bar master":return Y.jumpTo(6);
case "part://SystemUserUI/version checker":return Y.jumpTo(7);case "part://SystemUserUI/login widget":return Y.jumpTo(8);case "part://SystemUserUI/user info":return Y.jumpTo(9);case "part://SystemUserUI/register widget":return Y.jumpTo(10);case "part://SystemIDE/user menu master":return Y.jumpTo(11);case "part://SystemIDE/scene graph side bar master":return Y.jumpTo(12);case "part://SystemIDE/styling side bar master":return Y.jumpTo(13);case "part://SystemWidgets/new color picker":return Y.jumpTo(14);
case "part://SystemWidgets/gradient editor/color stop":return Y.jumpTo(15);case "part://partial freezing/project browser":return Y.jumpTo(16);case "part://partial freezing/world preview":return Y.jumpTo(17);default:return Y.jumpTo(18)}case 2:return Y.yield(cb.import("./package loading progress indicator-800da467.js"),20);case 20:if(!(k=Y.yieldResult)){Y.jumpTo(21);break}return Y.yield(d().call(a),22);case 22:k=Y.yieldResult;case 21:return Y.return(k);case 3:return Y.yield(cb.import("./version container-67579ee6.js"),
23);case 23:if(!(b=Y.yieldResult)){Y.jumpTo(24);break}return Y.yield(d().call(a),25);case 25:b=Y.yieldResult;case 24:return Y.return(b);case 4:return Y.yield(cb.import("./delete world prompt-3f4fd3f8.js"),26);case 26:if(!(e=Y.yieldResult)){Y.jumpTo(27);break}return Y.yield(d().call(a),28);case 28:e=Y.yieldResult;case 27:return Y.return(e);case 5:return Y.yield(cb.import("./dark-c1a06b2d.js"),29);case 29:if(!(l=Y.yieldResult)){Y.jumpTo(30);break}return Y.yield(d().call(a),31);case 31:l=Y.yieldResult;
case 30:return Y.return(l);case 6:return Y.yield(cb.import("./lively top bar master-6e2658e5.js"),32);case 32:if(!(p=Y.yieldResult)){Y.jumpTo(33);break}return Y.yield(d().call(a),34);case 34:p=Y.yieldResult;case 33:return Y.return(p);case 7:return Y.yield(cb.import("./version checker-c7ff5b63.js"),35);case 35:if(!(q=Y.yieldResult)){Y.jumpTo(36);break}return Y.yield(d().call(a),37);case 37:q=Y.yieldResult;case 36:return Y.return(q);case 8:return Y.yield(cb.import("./login widget-782a4240.js"),38);
case 38:if(!(u=Y.yieldResult)){Y.jumpTo(39);break}return Y.yield(d().call(a),40);case 40:u=Y.yieldResult;case 39:return Y.return(u);case 9:return Y.yield(cb.import("./user info-2fdbc51a.js"),41);case 41:if(!(w=Y.yieldResult)){Y.jumpTo(42);break}return Y.yield(d().call(a),43);case 43:w=Y.yieldResult;case 42:return Y.return(w);case 10:return Y.yield(cb.import("./register widget-275b4c80.js"),44);case 44:if(!(y=Y.yieldResult)){Y.jumpTo(45);break}return Y.yield(d().call(a),46);case 46:y=Y.yieldResult;
case 45:return Y.return(y);case 11:return Y.yield(cb.import("./user menu master-0fdc9473.js"),47);case 47:if(!(A=Y.yieldResult)){Y.jumpTo(48);break}return Y.yield(d().call(a),49);case 49:A=Y.yieldResult;case 48:return Y.return(A);case 12:return Y.yield(cb.import("./scene graph side bar master-0d1444ea.js"),50);case 50:if(!(C=Y.yieldResult)){Y.jumpTo(51);break}return Y.yield(d().call(a),52);case 52:C=Y.yieldResult;case 51:return Y.return(C);case 13:return Y.yield(cb.import("./styling side bar master-1f976b8b.js"),
53);case 53:if(!(E=Y.yieldResult)){Y.jumpTo(54);break}return Y.yield(d().call(a),55);case 55:E=Y.yieldResult;case 54:return Y.return(E);case 14:return Y.yield(cb.import("./new color picker-6005b20c.js"),56);case 56:if(!(L=Y.yieldResult)){Y.jumpTo(57);break}return Y.yield(d().call(a),58);case 58:L=Y.yieldResult;case 57:return Y.return(L);case 15:return Y.yield(cb.import("./color stop-6e5b6a1e.js"),59);case 59:if(!(I=Y.yieldResult)){Y.jumpTo(60);break}return Y.yield(d().call(a),61);case 61:I=Y.yieldResult;
case 60:return Y.return(I);case 16:return Y.yield(cb.import("./project browser-84d38d87.js"),62);case 62:if(!(V=Y.yieldResult)){Y.jumpTo(63);break}return Y.yield(d().call(a),64);case 64:V=Y.yieldResult;case 63:return Y.return(V);case 17:return Y.yield(cb.import("./world preview-e052231d.js"),65);case 65:if(!(T=Y.yieldResult)){Y.jumpTo(66);break}return Y.yield(d().call(a),67);case 67:T=Y.yieldResult;case 66:return Y.return(T);case 18:return Y.yield(d().call(a),68);case 68:return Y.return(Y.yieldResult)}})};
var Noa={name:"part",matches:function(a){return a.match(Moa)},resourceClass:aS};Zd("part");Hd(Noa);var cK=function(){return GB.apply(this,arguments)||this};$jscomp.inherits(cK,GB);cK.prototype.read=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=Dc(System.baseURL),d.isFile()&&(d=d.parent()),k=d.join("masters/"),e.yield(a.fetchFromMasterDir(k,a.componentName),2)):3!=e.nextAddress?(b=e.yieldResult,e.yield(a.resolveComponent(b),3)):
e.return(e.yieldResult)})};$jscomp.global.Object.defineProperties(cK.prototype,{worldName:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(B6);a=$jscomp.makeIterator(a);a.next();var d=a.next().value;a.next();return d}}});var B6=/^styleguide:\/\/([^\/]+)\/(.*)$/,Ooa={name:"styleguide",matches:function(a){return a.match(B6)},resourceClass:cK};Zd("styleguide");Hd(Ooa);var G0=JSON.parse('{"id":"WorldLoadingScreen_6500DD35_A4F0_4D23_99FD_A740554BDDD3","snapshot":{"WorldLoadingScreen_6500DD35_A4F0_4D23_99FD_A740554BDDD3":{"rev":165383,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(67.99453124999991,685.8828125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_6A34EB6E_54EF_4402_A64A_F53FFCDDCFD5","rev":2686},{"__ref__":true,"id":"Label_6B8D3ADB_855C_4C9F_9967_B4123C38364D","rev":66044},{"__ref__":true,"id":"ModuleProgress_FAB77010_5956_411F_BAA1_2269692A6A35","rev":3864},{"__ref__":true,"id":"HTMLMorph_191A2D42_A172_49FC_8864_762425103823","rev":3744}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: null,\\n  reactToSubmorphAnimations: false,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"18A01B82-BA18-4339-BA35-1F0E8BE0C9D0","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-119"},"pathInPackage":"loading-page.js"}}},"Label_6A34EB6E_54EF_4402_A64A_F53FFCDDCFD5":{"rev":2686,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(72,35)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"2D03A4B5-3D70-4477-8567-45853A2FD725","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2D03A4B5-3D70-4477-8567-45853A2FD725":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E5797B11-9AFA-4DAD-A7FD-E27DBF831BE3","rev":0}}}},"E5797B11-9AFA-4DAD-A7FD-E27DBF831BE3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_6B8D3ADB_855C_4C9F_9967_B4123C38364D":{"rev":66044,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_E627E316_696F_4178_9020_C25D2B2C3FC1","rev":2734}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"40A5C11C-3B92-468A-830C-2C734DCDCB0F","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_E627E316_696F_4178_9020_C25D2B2C3FC1":{"rev":2734,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[]},"40A5C11C-3B92-468A-830C-2C734DCDCB0F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_FAB77010_5956_411F_BAA1_2269692A6A35":{"rev":3864,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"3825BA7F-AD2D-4D21-8310-7FDB616529FC","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":"__lv_expr__:({\\"auto\\":\\"styleguide://partial freezing/package loading progress indicator\\"})"},"blur":{"value":0},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.440511315235426,187.92724609375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(985.8603515624998,163.8603515625)"},"opacity":{},"submorphs":{"value":[{"__ref__":true,"id":"Path_6E8579D6_F142_4210_94DF_08828C363C1C","rev":165374},{"__ref__":true,"id":"Morph_CA682A88_461D_4FD4_83AC_5B069946CB93","rev":3854},{"__ref__":true,"id":"Morph_7D842F64_F919_4A16_B53C_B7ED7637617B","rev":3855},{"__ref__":true,"id":"Morph_6EF01BF9_A501_46D8_9A00_52E8D3F11284","rev":3856},{"__ref__":true,"id":"Morph_3BC26FF9_285E_458E_9460_4E8C87BA77A4","rev":3857},{"__ref__":true,"id":"Morph_DF9B5068_ABC4_4573_851C_C658D2F9CBF6","rev":3858},{"__ref__":true,"id":"Morph_F1B04965_DF25_4A0A_A805_BAC034E6B27A","rev":3859},{"__ref__":true,"id":"Morph_D9B84ED4_63E6_4E59_B03B_A08C190B34ED","rev":3860},{"__ref__":true,"id":"Morph_14591677_5AC8_4429_8AA2_6FE9CA99CF73","rev":3861},{"__ref__":true,"id":"Morph_C5216A1C_8118_4E8C_A377_849FC7B84672","rev":3862},{"__ref__":true,"id":"Morph_E56AF1DC_FA00_41BC_B95F_4805F1BD7823","rev":3863}]},"styleClasses":{"value":["ModuleProgress","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BF84D517-AB61-4835-8A2C-2F0026B78070","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-109"},"pathInPackage":"index.js"}}},"3825BA7F-AD2D-4D21-8310-7FDB616529FC":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":70532},"target":{"value":{"__ref__":true,"id":"ModuleProgress_FAB77010_5956_411F_BAA1_2269692A6A35","rev":3864}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"Path_6E8579D6_F142_4210_94DF_08828C363C1C":{"rev":165374,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"styleClasses":{"value":["Path","Morph","morph"]},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"CB03E419-3776-4652-83CB-23DE28DD107C","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"CB03E419-3776-4652-83CB-23DE28DD107C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"77D63DB6-2192-4D68-B41F-51F256D4D2D0","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"77D63DB6-2192-4D68-B41F-51F256D4D2D0":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"Morph_CA682A88_461D_4FD4_83AC_5B069946CB93":{"rev":3854,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_109CBFC0_E545_437B_BAC6_F892B3A523F6","rev":3803},{"__ref__":true,"id":"Label_B929CF1A_7D59_4B67_BC72_058724F56EFC","rev":3832},{"__ref__":true,"id":"Ellipse_AF03B0E3_4769_400E_8CCC_D3BB92ED3D65","rev":2861}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7D304846-7854-42C7-AED4-90EDF570C64D","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_109CBFC0_E545_437B_BAC6_F892B3A523F6":{"rev":3803,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BBD51C40-D6C1-4D93-A82C-32DF00A8AED0","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"D9180519-89CD-4A5A-8210-9547745C4A2E","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BBD51C40-D6C1-4D93-A82C-32DF00A8AED0":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C6D02CA2-B673-43A8-B344-621EC49A89DF","rev":0}}}},"C6D02CA2-B673-43A8-B344-621EC49A89DF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D9180519-89CD-4A5A-8210-9547745C4A2E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_B929CF1A_7D59_4B67_BC72_058724F56EFC":{"rev":3832,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"798AE411-E627-422A-9237-DE5B3028E39D","rev":0}},"textAndAttributes":{"value":["lang",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"798AE411-E627-422A-9237-DE5B3028E39D":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"DCA9BF03-1F98-4878-B8A2-B22E0A7C8B9D","rev":0}}}},"DCA9BF03-1F98-4878-B8A2-B22E0A7C8B9D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_AF03B0E3_4769_400E_8CCC_D3BB92ED3D65":{"rev":2861,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_4388CA6D_AE64_4B89_B3F1_1E0479F2EE17","rev":66047},{"__ref__":true,"id":"Label_84454885_15E9_4C2A_A10C_703132F5CE9A","rev":66048}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"597C22EB-1F8D-4C94-91C8-21A1E7364B31","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D573748C-0DDF-4D4D-A0E5-0D8153E0363E","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_4388CA6D_AE64_4B89_B3F1_1E0479F2EE17":{"rev":66047,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"96A25636-1AF9-4903-9080-6E1DD1BADD1A","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"1EBB3B6D-2F4E-45E5-A14F-92DD87586622","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"96A25636-1AF9-4903-9080-6E1DD1BADD1A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"209C2ADC-17ED-48E9-88D0-3870C733320D","rev":0}}}},"209C2ADC-17ED-48E9-88D0-3870C733320D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1EBB3B6D-2F4E-45E5-A14F-92DD87586622":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_84454885_15E9_4C2A_A10C_703132F5CE9A":{"rev":66048,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"286B292D-BF7A-4B2C-BA48-1FA9E7295B7D","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"1881B7AD-3756-42DB-9956-88D340CA6160","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"286B292D-BF7A-4B2C-BA48-1FA9E7295B7D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2D2A283A-32C1-4A96-8AD8-BFD547E6A0C1","rev":0}}}},"2D2A283A-32C1-4A96-8AD8-BFD547E6A0C1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1881B7AD-3756-42DB-9956-88D340CA6160":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"597C22EB-1F8D-4C94-91C8-21A1E7364B31":{"rev":0,"props":{"_rev":{"value":0}}},"D573748C-0DDF-4D4D-A0E5-0D8153E0363E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"7D304846-7854-42C7-AED4-90EDF570C64D":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_7D842F64_F919_4A16_B53C_B7ED7637617B":{"rev":3855,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(46.86035156249977,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Ellipse_1522A93C_0953_4375_9C2A_3969D272616A","rev":2925},{"__ref__":true,"id":"Label_A346A09A_527D_4ACB_8D73_99DCFEFF0D52","rev":3806},{"__ref__":true,"id":"Label_3068176C_3C79_4E8E_98F6_C0FCB8842792","rev":3833}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BAFAF343-512E-4AE5-976A-EE9B6D59C6DE","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Ellipse_1522A93C_0953_4375_9C2A_3969D272616A":{"rev":2925,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_221B9B3D_DD1B_493A_8A10_25DE410A4B30","rev":66051},{"__ref__":true,"id":"Label_200291D5_96A3_45C3_8196_6996EF3B0751","rev":66052}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C18864B2-D915-4AD2-8916-CA34A44D10A2","rev":0}},"metadata":{"value":{"__ref__":true,"id":"0C9AE61E-90B9-4AB8-A99A-BAB91742FFF2","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_221B9B3D_DD1B_493A_8A10_25DE410A4B30":{"rev":66051,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0A3FBF12-5585-4340-9C02-F8FE5752FB73","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"9F8C0ABF-89BA-4C5E-A711-FE7E3B15FE04","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0A3FBF12-5585-4340-9C02-F8FE5752FB73":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2A6EA15D-C5ED-4EF4-8842-11D24826C35D","rev":0}}}},"2A6EA15D-C5ED-4EF4-8842-11D24826C35D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"9F8C0ABF-89BA-4C5E-A711-FE7E3B15FE04":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_200291D5_96A3_45C3_8196_6996EF3B0751":{"rev":66052,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"7F533426-98DF-4EC9-8E98-DADA6B57E563","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"ED32FD42-72C1-4B35-B7A5-047631E0309E","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7F533426-98DF-4EC9-8E98-DADA6B57E563":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B53DDB2F-BCFF-4731-AF76-38697A9B3169","rev":0}}}},"B53DDB2F-BCFF-4731-AF76-38697A9B3169":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"ED32FD42-72C1-4B35-B7A5-047631E0309E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C18864B2-D915-4AD2-8916-CA34A44D10A2":{"rev":0,"props":{"_rev":{"value":0}}},"0C9AE61E-90B9-4AB8-A99A-BAB91742FFF2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_A346A09A_527D_4ACB_8D73_99DCFEFF0D52":{"rev":3806,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C4458794-DA1A-42EA-83DF-13386D04E37A","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"94603099-228F-4A13-8AA7-3F75CCCC05EA","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"C4458794-DA1A-42EA-83DF-13386D04E37A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1FD603CC-1A45-4111-9661-A1A972C42657","rev":0}}}},"1FD603CC-1A45-4111-9661-A1A972C42657":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"94603099-228F-4A13-8AA7-3F75CCCC05EA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_3068176C_3C79_4E8E_98F6_C0FCB8842792":{"rev":3833,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(22,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C4FEBE52-CB29-4E60-9D74-8CC43EF2ED2A","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"C4FEBE52-CB29-4E60-9D74-8CC43EF2ED2A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"BAEB7A48-2BE5-42F4-BBDC-664302B87EC0","rev":0}}}},"BAEB7A48-2BE5-42F4-BBDC-664302B87EC0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BAFAF343-512E-4AE5-976A-EE9B6D59C6DE":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_6EF01BF9_A501_46D8_9A00_52E8D3F11284":{"rev":3856,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(173.86035156249977,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(143,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E02FFE5A_5DBC_430F_8359_6F995C4AAADA","rev":3834},{"__ref__":true,"id":"Ellipse_7F528988_4AC0_481C_BFB0_D524FF939C8C","rev":3040},{"__ref__":true,"id":"Label_B84C90FD_53B3_4752_B7BB_FCCAAB6A10AD","rev":3809}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2FDF0CBC-4433-486D-9E86-B7E3A25A1058","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E02FFE5A_5DBC_430F_8359_6F995C4AAADA":{"rev":3834,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(123,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0E87D0E3-C682-40F2-B1DE-340F3CCA7A94","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0E87D0E3-C682-40F2-B1DE-340F3CCA7A94":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"280E3525-4AB0-4319-B9D1-FB6520B28D3A","rev":0}}}},"280E3525-4AB0-4319-B9D1-FB6520B28D3A":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_7F528988_4AC0_481C_BFB0_D524FF939C8C":{"rev":3040,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58.93017578124979,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_DC4EC42C_6704_441E_8811_667E1FBA30BF","rev":66055},{"__ref__":true,"id":"Label_6D4C14E1_9772_4B08_9259_2EF1549DDC37","rev":66056}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"C7CEF4D6-F8F0-41A8-8D81-02E7A61C374E","rev":0}},"metadata":{"value":{"__ref__":true,"id":"970E0A0B-C739-471D-972C-E1ED33B3D0B0","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_DC4EC42C_6704_441E_8811_667E1FBA30BF":{"rev":66055,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.13964843750044,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E3D8E0D3-DDE8-4C1B-977B-D7956DDC3BB6","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"A058B26D-0E3B-405C-A041-11F6203D1FAD","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E3D8E0D3-DDE8-4C1B-977B-D7956DDC3BB6":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"862C2197-12F8-4A31-8939-2CA97EAB3788","rev":0}}}},"862C2197-12F8-4A31-8939-2CA97EAB3788":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A058B26D-0E3B-405C-A041-11F6203D1FAD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_6D4C14E1_9772_4B08_9259_2EF1549DDC37":{"rev":66056,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"B4EA1A37-625B-467A-9496-B9B8A1BFC473","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"FE007F52-6F51-498E-8DEF-D8E4EA249B2E","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B4EA1A37-625B-467A-9496-B9B8A1BFC473":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4C399D61-A0E3-4A76-AEF2-8E1A9B7DB5D4","rev":0}}}},"4C399D61-A0E3-4A76-AEF2-8E1A9B7DB5D4":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FE007F52-6F51-498E-8DEF-D8E4EA249B2E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"C7CEF4D6-F8F0-41A8-8D81-02E7A61C374E":{"rev":0,"props":{"_rev":{"value":0}}},"970E0A0B-C739-471D-972C-E1ED33B3D0B0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_B84C90FD_53B3_4752_B7BB_FCCAAB6A10AD":{"rev":3809,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(52.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A74C52E2-262F-4809-A4D6-DEF6DBF208D5","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"C4D49C30-6830-40A2-B7B0-72DF30BCDD1C","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A74C52E2-262F-4809-A4D6-DEF6DBF208D5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"52748A0A-937B-4B3B-9189-66CA49487057","rev":0}}}},"52748A0A-937B-4B3B-9189-66CA49487057":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"C4D49C30-6830-40A2-B7B0-72DF30BCDD1C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"2FDF0CBC-4433-486D-9E86-B7E3A25A1058":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_3BC26FF9_285E_458E_9460_4E8C87BA77A4":{"rev":3857,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(339.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_90CE188C_0F63_415B_B1EF_B8B907A9B752","rev":3835},{"__ref__":true,"id":"Ellipse_057676EB_8F59_4ACE_AB4A_5B7DAD4458CD","rev":3137},{"__ref__":true,"id":"Label_0FE32DD3_8EFF_4F2C_B5D1_8AC5E2BA7545","rev":3812}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"133F12C2-94B7-444D-971C-5BA2C6230DC8","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_90CE188C_0F63_415B_B1EF_B8B907A9B752":{"rev":3835,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"8D165806-99B8-4F47-BA73-ED159C2A0A9A","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8D165806-99B8-4F47-BA73-ED159C2A0A9A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"D7673EE8-8B1D-4889-A8EE-CA5EC8382BA2","rev":0}}}},"D7673EE8-8B1D-4889-A8EE-CA5EC8382BA2":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_057676EB_8F59_4ACE_AB4A_5B7DAD4458CD":{"rev":3137,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_D2DA20CC_0165_40E6_B840_84EFD07A8737","rev":66059},{"__ref__":true,"id":"Label_C58EC2DB_3E76_4A1A_8BF2_A111EC3A0522","rev":66060}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"3642BA75-F133-4F74-904F-CF2EB656156F","rev":0}},"metadata":{"value":{"__ref__":true,"id":"6D99C260-7AB4-4853-8920-DDAD62D89A24","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_D2DA20CC_0165_40E6_B840_84EFD07A8737":{"rev":66059,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B829A201-B2F5-4D44-9787-9EB77D512427","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"AE7C12FD-FBD5-45EF-B8DB-3151D83306E5","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B829A201-B2F5-4D44-9787-9EB77D512427":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"598C4BFB-373B-4B54-A689-A53297BBD2FD","rev":0}}}},"598C4BFB-373B-4B54-A689-A53297BBD2FD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"AE7C12FD-FBD5-45EF-B8DB-3151D83306E5":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_C58EC2DB_3E76_4A1A_8BF2_A111EC3A0522":{"rev":66060,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"D48F7842-7671-4BF5-A36A-EFB70420BB0D","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"1D7D9D16-0704-4291-9DE6-85EFEEFFC665","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D48F7842-7671-4BF5-A36A-EFB70420BB0D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"0F786080-8763-4596-9F1D-25E8608F13C1","rev":0}}}},"0F786080-8763-4596-9F1D-25E8608F13C1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1D7D9D16-0704-4291-9DE6-85EFEEFFC665":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"3642BA75-F133-4F74-904F-CF2EB656156F":{"rev":0,"props":{"_rev":{"value":0}}},"6D99C260-7AB4-4853-8920-DDAD62D89A24":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_0FE32DD3_8EFF_4F2C_B5D1_8AC5E2BA7545":{"rev":3812,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F17CB540-6806-46FB-A219-35A1D65E36B6","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"C53F0646-913B-43B2-93E6-52EE921AA0C0","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F17CB540-6806-46FB-A219-35A1D65E36B6":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2CA68ACD-C36D-4FF9-9962-5986D31BFF53","rev":0}}}},"2CA68ACD-C36D-4FF9-9962-5986D31BFF53":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"C53F0646-913B-43B2-93E6-52EE921AA0C0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"133F12C2-94B7-444D-971C-5BA2C6230DC8":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_DF9B5068_ABC4_4573_851C_C658D2F9CBF6":{"rev":3858,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(436.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_38E6A051_9169_463A_A8B7_180117D70F6D","rev":3836},{"__ref__":true,"id":"Ellipse_1B0ECA65_0B91_4D35_AB0F_311526F81BD4","rev":3234},{"__ref__":true,"id":"Label_AE63BA81_712B_46AF_8724_65A5446DD76C","rev":3815}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D6CD2EF4-5C6F-4950-BD60-6F53034B6A03","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_38E6A051_9169_463A_A8B7_180117D70F6D":{"rev":3836,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.5,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0F4BA28F-1A4A-435F-837E-8996B915BC08","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0F4BA28F-1A4A-435F-837E-8996B915BC08":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"50C7EE97-F189-4319-B44D-0B227A1B3671","rev":0}}}},"50C7EE97-F189-4319-B44D-0B227A1B3671":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_1B0ECA65_0B91_4D35_AB0F_311526F81BD4":{"rev":3234,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_9DE84D74_C1E2_43E7_BC2A_6B3560629754","rev":66063},{"__ref__":true,"id":"Label_0CFB2593_1C09_4BA3_871E_3AE44E83467C","rev":66064}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"34A1522F-E67C-481D-B8C0-16B967BE58E7","rev":0}},"metadata":{"value":{"__ref__":true,"id":"7EDD5201-99BE-4E93-B77E-C5C14A20B303","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_9DE84D74_C1E2_43E7_BC2A_6B3560629754":{"rev":66063,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"64BD8002-367A-4DDD-8C97-5B5A9EAD543B","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"DB0B9C38-B1EE-4174-A9BF-D286FC1574C8","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"64BD8002-367A-4DDD-8C97-5B5A9EAD543B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"03F85D71-DB8F-4996-903B-AB2B089FC101","rev":0}}}},"03F85D71-DB8F-4996-903B-AB2B089FC101":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"DB0B9C38-B1EE-4174-A9BF-D286FC1574C8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_0CFB2593_1C09_4BA3_871E_3AE44E83467C":{"rev":66064,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"D21C7C2B-44B5-4D0F-8285-6CD717E411ED","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D5A2EB5C-2215-4B12-BDFF-E6758DEF721E","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D21C7C2B-44B5-4D0F-8285-6CD717E411ED":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2914627B-43F4-4773-AFFA-37733EB791B7","rev":0}}}},"2914627B-43F4-4773-AFFA-37733EB791B7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D5A2EB5C-2215-4B12-BDFF-E6758DEF721E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"34A1522F-E67C-481D-B8C0-16B967BE58E7":{"rev":0,"props":{"_rev":{"value":0}}},"7EDD5201-99BE-4E93-B77E-C5C14A20B303":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_AE63BA81_712B_46AF_8724_65A5446DD76C":{"rev":3815,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"070C2411-5E59-4943-AA82-53138ECBE672","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"86C4D443-0076-45B8-9711-55871C66DD56","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"070C2411-5E59-4943-AA82-53138ECBE672":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8D702838-8869-4412-9EC3-F42699987DA3","rev":0}}}},"8D702838-8869-4412-9EC3-F42699987DA3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"86C4D443-0076-45B8-9711-55871C66DD56":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"D6CD2EF4-5C6F-4950-BD60-6F53034B6A03":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_F1B04965_DF25_4A0A_A805_BAC034E6B27A":{"rev":3859,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(517.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(83,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_12FFE731_1FA1_4A74_A82F_8F6B6546D4B0","rev":3837},{"__ref__":true,"id":"Ellipse_7085712C_FCCF_40B1_86F7_8255686A67A4","rev":3331},{"__ref__":true,"id":"Label_9705CA4C_3315_4B75_8E65_CADA7D702416","rev":3818}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"5888A37E-6908-4640-ADBE-B5215BD9B8BC","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_12FFE731_1FA1_4A74_A82F_8F6B6546D4B0":{"rev":3837,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(63,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"519FDA4D-7FAA-4DC3-8485-0FCE7CF2845C","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"519FDA4D-7FAA-4DC3-8485-0FCE7CF2845C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"D0A09CFD-CB03-4B38-A0AB-0B689D9E73B3","rev":0}}}},"D0A09CFD-CB03-4B38-A0AB-0B689D9E73B3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_7085712C_FCCF_40B1_86F7_8255686A67A4":{"rev":3331,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(28.93017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_06D4056A_F57C_4ADD_9CEF_23A4E9CE856D","rev":66067},{"__ref__":true,"id":"Label_6813CFA5_8AC5_4CC1_886C_2D883E04274B","rev":66068}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"842FF741-C203-4EB3-826B-4C528F7FB612","rev":0}},"metadata":{"value":{"__ref__":true,"id":"EF0C4229-7B12-4210-AEA8-3836C0E0C88C","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_06D4056A_F57C_4ADD_9CEF_23A4E9CE856D":{"rev":66067,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"6A49244B-46E5-4BC8-937D-921680351BA8","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"71E1DB85-D09B-4677-A53D-71B2EEB66CFD","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"6A49244B-46E5-4BC8-937D-921680351BA8":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"37117270-9FEA-43CD-B974-83076CD6134D","rev":0}}}},"37117270-9FEA-43CD-B974-83076CD6134D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"71E1DB85-D09B-4677-A53D-71B2EEB66CFD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_6813CFA5_8AC5_4CC1_886C_2D883E04274B":{"rev":66068,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"D9DF5D48-4FB2-435E-81F0-67024A008C6A","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D63246B0-2DBE-4457-B924-7A9E585B9339","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D9DF5D48-4FB2-435E-81F0-67024A008C6A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"3664BA12-7FD6-4490-9B31-09F8F1FC16ED","rev":0}}}},"3664BA12-7FD6-4490-9B31-09F8F1FC16ED":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D63246B0-2DBE-4457-B924-7A9E585B9339":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"842FF741-C203-4EB3-826B-4C528F7FB612":{"rev":0,"props":{"_rev":{"value":0}}},"EF0C4229-7B12-4210-AEA8-3836C0E0C88C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_9705CA4C_3315_4B75_8E65_CADA7D702416":{"rev":3818,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(22.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"36C35DDE-09B8-4E35-844B-341E561B28B1","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"D8D5C31C-2E3F-4B05-80B9-D091979119CD","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"36C35DDE-09B8-4E35-844B-341E561B28B1":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5AD70CBF-26DD-4236-9E64-C04604BB65A2","rev":0}}}},"5AD70CBF-26DD-4236-9E64-C04604BB65A2":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D8D5C31C-2E3F-4B05-80B9-D091979119CD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"5888A37E-6908-4640-ADBE-B5215BD9B8BC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_D9B84ED4_63E6_4E59_B03B_A08C190B34ED":{"rev":3860,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(623.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(52,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E8A5CDFD_26EA_4592_9F39_D13ADEA35BAD","rev":3838},{"__ref__":true,"id":"Ellipse_A0F263E4_2A8A_4E08_9348_83F34D3F00E6","rev":3428},{"__ref__":true,"id":"Label_7570A970_0059_4D31_8CA8_F0F62B7155DA","rev":3821}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"19931167-07B4-4B80-8B71-E1EF471B7E7C","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E8A5CDFD_26EA_4592_9F39_D13ADEA35BAD":{"rev":3838,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(32,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"9A045173-A96A-4B0A-99D8-584DA2333C7B","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"9A045173-A96A-4B0A-99D8-584DA2333C7B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"404E150F-2306-4D28-BCCE-F9B646EE9ECD","rev":0}}}},"404E150F-2306-4D28-BCCE-F9B646EE9ECD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_A0F263E4_2A8A_4E08_9348_83F34D3F00E6":{"rev":3428,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E5C5DD53_479C_42BD_B566_1A6CC8353D3F","rev":66071},{"__ref__":true,"id":"Label_912D583C_E519_40E3_9817_BFA1E6065B05","rev":66072}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"B7FCC3AD-0317-44F9-B9D3-6A1D25328219","rev":0}},"metadata":{"value":{"__ref__":true,"id":"F1A5737E-A5BF-41D9-9D32-495538471CF2","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E5C5DD53_479C_42BD_B566_1A6CC8353D3F":{"rev":66071,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0FE9BC0C-2F77-439E-BC88-CBABE3035A5E","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"57245F70-CFCE-4809-9ECC-1F0C1219DFDE","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0FE9BC0C-2F77-439E-BC88-CBABE3035A5E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FB5A6971-D46D-4971-9A2E-4F2333D08433","rev":0}}}},"FB5A6971-D46D-4971-9A2E-4F2333D08433":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"57245F70-CFCE-4809-9ECC-1F0C1219DFDE":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_912D583C_E519_40E3_9817_BFA1E6065B05":{"rev":66072,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"F2490BB6-B81D-44D1-B0E3-1F906C423EE7","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"216AFF9F-5E8D-4A4B-96A5-4A2875D28575","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F2490BB6-B81D-44D1-B0E3-1F906C423EE7":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"BE6C9E6C-D0D7-4D0D-89F3-40AF8CB16217","rev":0}}}},"BE6C9E6C-D0D7-4D0D-89F3-40AF8CB16217":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"216AFF9F-5E8D-4A4B-96A5-4A2875D28575":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"B7FCC3AD-0317-44F9-B9D3-6A1D25328219":{"rev":0,"props":{"_rev":{"value":0}}},"F1A5737E-A5BF-41D9-9D32-495538471CF2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_7570A970_0059_4D31_8CA8_F0F62B7155DA":{"rev":3821,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A25FC23E-0711-45AF-8E05-35A60C287BFF","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"2DE80DA0-D7A1-4EE7-9615-07F8D470078F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A25FC23E-0711-45AF-8E05-35A60C287BFF":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E2DB9483-C1E0-4C86-8079-51829C084E09","rev":0}}}},"E2DB9483-C1E0-4C86-8079-51829C084E09":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2DE80DA0-D7A1-4EE7-9615-07F8D470078F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"19931167-07B4-4B80-8B71-E1EF471B7E7C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_14591677_5AC8_4429_8AA2_6FE9CA99CF73":{"rev":3861,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(698.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_75D6CEF4_E353_4DFB_B572_0E4C823BEB4C","rev":3839},{"__ref__":true,"id":"Ellipse_92904249_E212_46E9_916B_DC020D66FE8C","rev":3525},{"__ref__":true,"id":"Label_9E459A40_83BD_427E_9297_08A337AF7539","rev":3824}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"AA0A577C-7B0E-4D49-B2D2-B9CE40976792","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_75D6CEF4_E353_4DFB_B572_0E4C823BEB4C":{"rev":3839,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"BD35E5B5-2E8F-4031-9290-F43742916DDA","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BD35E5B5-2E8F-4031-9290-F43742916DDA":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"F4DADF61-C63C-4858-AB67-F623477BCFBF","rev":0}}}},"F4DADF61-C63C-4858-AB67-F623477BCFBF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_92904249_E212_46E9_916B_DC020D66FE8C":{"rev":3525,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_C20B42DA_F4EB_496E_BC15_2F494E01200E","rev":66075},{"__ref__":true,"id":"Label_EA205791_A10C_4EFB_946A_C6F59AB24DD6","rev":66076}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"7674B1C2-E7B9-4833-AE8B-C84DEB038A14","rev":0}},"metadata":{"value":{"__ref__":true,"id":"51E9FA99-0256-4040-B0C7-9433ED92EF68","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_C20B42DA_F4EB_496E_BC15_2F494E01200E":{"rev":66075,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2DD2EAC4-6570-445A-801E-6DEA0146EEFE","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"242449E9-9B71-42DA-AD9C-1822A7EBB62A","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2DD2EAC4-6570-445A-801E-6DEA0146EEFE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"CB9E7ACA-8092-45E3-8986-168179F3D3F7","rev":0}}}},"CB9E7ACA-8092-45E3-8986-168179F3D3F7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"242449E9-9B71-42DA-AD9C-1822A7EBB62A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_EA205791_A10C_4EFB_946A_C6F59AB24DD6":{"rev":66076,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"04B99D1A-B36F-4863-9E69-81F7ADFB1A87","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"44CCE7A9-FA3C-4AE1-AE46-6B7184DDED80","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"04B99D1A-B36F-4863-9E69-81F7ADFB1A87":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"CA85F2CD-D11D-4D96-82E3-D736090D72FF","rev":0}}}},"CA85F2CD-D11D-4D96-82E3-D736090D72FF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"44CCE7A9-FA3C-4AE1-AE46-6B7184DDED80":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"7674B1C2-E7B9-4833-AE8B-C84DEB038A14":{"rev":0,"props":{"_rev":{"value":0}}},"51E9FA99-0256-4040-B0C7-9433ED92EF68":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_9E459A40_83BD_427E_9297_08A337AF7539":{"rev":3824,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E25A0DAF-D005-46FB-A914-BD870F4BC2CA","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"E1BAE0CA-4560-47D3-99BE-3789B687BB9C","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E25A0DAF-D005-46FB-A914-BD870F4BC2CA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"57D241DA-FB49-4159-9801-EF226FD4F8BE","rev":0}}}},"57D241DA-FB49-4159-9801-EF226FD4F8BE":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"E1BAE0CA-4560-47D3-99BE-3789B687BB9C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"AA0A577C-7B0E-4D49-B2D2-B9CE40976792":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_C5216A1C_8118_4E8C_A377_849FC7B84672":{"rev":3862,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(795.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(80,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_070D0142_AFE0_4DC7_865B_E946333A6242","rev":3840},{"__ref__":true,"id":"Ellipse_7AC8AB0C_64AC_466B_9178_520401B31BD7","rev":3622},{"__ref__":true,"id":"Label_4E0F5315_DE1E_4C2A_8C43_55B9F6901EDB","rev":3827}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"CD48D7B4-974E-4E60-8E51-937E451981B5","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_070D0142_AFE0_4DC7_865B_E946333A6242":{"rev":3840,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(60,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7CB23C4E-3FB5-41A8-9903-52662EC09B26","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7CB23C4E-3FB5-41A8-9903-52662EC09B26":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"63131087-282C-4AB8-8864-C75FBEDCAF35","rev":0}}}},"63131087-282C-4AB8-8864-C75FBEDCAF35":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_7AC8AB0C_64AC_466B_9178_520401B31BD7":{"rev":3622,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_8C203AED_9038_4AB8_A211_D8596BAD7BC8","rev":66079},{"__ref__":true,"id":"Label_8F76A5A4_8917_44EE_9288_9769B61DB79B","rev":66080}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"40409A6F-79D0-4066-8198-9B7F5B0F7527","rev":0}},"metadata":{"value":{"__ref__":true,"id":"A88FD31C-4738-404C-A017-E639EA6E601C","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_8C203AED_9038_4AB8_A211_D8596BAD7BC8":{"rev":66079,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"225F6E31-173A-4EFC-A9DB-DBF7885F4BA9","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"FE70EBAE-27BE-4C55-B699-3B8B6F9ABCFA","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"225F6E31-173A-4EFC-A9DB-DBF7885F4BA9":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B608C0DA-8723-45FD-96EC-D0D7A4802577","rev":0}}}},"B608C0DA-8723-45FD-96EC-D0D7A4802577":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FE70EBAE-27BE-4C55-B699-3B8B6F9ABCFA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_8F76A5A4_8917_44EE_9288_9769B61DB79B":{"rev":66080,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"BFB6AB6D-1155-410E-A8D9-D95208C4F334","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"844080F8-2D42-4998-81A0-84D02FFBBEFD","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BFB6AB6D-1155-410E-A8D9-D95208C4F334":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"69119B09-5E9A-4CBA-BD5A-479807193D94","rev":0}}}},"69119B09-5E9A-4CBA-BD5A-479807193D94":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"844080F8-2D42-4998-81A0-84D02FFBBEFD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"40409A6F-79D0-4066-8198-9B7F5B0F7527":{"rev":0,"props":{"_rev":{"value":0}}},"A88FD31C-4738-404C-A017-E639EA6E601C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_4E0F5315_DE1E_4C2A_8C43_55B9F6901EDB":{"rev":3827,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"176F1D47-32D8-4635-A89F-1F4B15B128B5","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"1EADA161-358D-4C73-B2AF-71610C9538D5","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"176F1D47-32D8-4635-A89F-1F4B15B128B5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4A014D9F-7E5A-42D0-A03A-5236E77C882D","rev":0}}}},"4A014D9F-7E5A-42D0-A03A-5236E77C882D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1EADA161-358D-4C73-B2AF-71610C9538D5":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"CD48D7B4-974E-4E60-8E51-937E451981B5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E56AF1DC_FA00_41BC_B95F_4805F1BD7823":{"rev":3863,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(898.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(64,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_1A1D283D_C8D9_49A8_B365_0D131C0CD9C4","rev":3841},{"__ref__":true,"id":"Ellipse_960CA862_2097_4D0E_A747_EDF203AC33CE","rev":3703},{"__ref__":true,"id":"Label_ADF66AA8_4178_450E_BCCE_6501FC133CC7","rev":3830}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0AA35FE2-3D31-45E9-9CE5-905949353E22","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_1A1D283D_C8D9_49A8_B365_0D131C0CD9C4":{"rev":3841,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(44,20)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E908FDA4-0B47-4AC6-8842-9D20AAC05BD3","rev":0}},"textAndAttributes":{"value":["world",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E908FDA4-0B47-4AC6-8842-9D20AAC05BD3":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"13F0C6F6-01FF-4DA8-9AD2-1D0B9929AE14","rev":0}}}},"13F0C6F6-01FF-4DA8-9AD2-1D0B9929AE14":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_960CA862_2097_4D0E_A747_EDF203AC33CE":{"rev":3703,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(19.430175781249996,80.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_8153A5FD_6C8E_4E5F_BB94_DA553A698831","rev":66083},{"__ref__":true,"id":"Label_D1EC61B6_67BE_4790_8E85_A68593884DE5","rev":66084}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"82CFE57C-FC2E-4B2B-85DB-B0EE785E27F7","rev":0}},"metadata":{"value":{"__ref__":true,"id":"C477C1A8-8FD0-4E31-9FAF-F9098D0D56FF","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_8153A5FD_6C8E_4E5F_BB94_DA553A698831":{"rev":66083,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500004,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"8968458A-8B08-4F7F-A523-B2470981EB03","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"6B20C2A0-EEA9-4649-8BA8-18BCAE1959BA","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8968458A-8B08-4F7F-A523-B2470981EB03":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B3E4EDA8-25D1-46F7-8D44-8FAEB895F1E0","rev":0}}}},"B3E4EDA8-25D1-46F7-8D44-8FAEB895F1E0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"6B20C2A0-EEA9-4649-8BA8-18BCAE1959BA":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_D1EC61B6_67BE_4790_8E85_A68593884DE5":{"rev":66084,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"39944501-6AC9-4202-A874-1A6C8877C302","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D19BB8F2-4DB0-4866-B3C3-0E71D42E26FB","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"39944501-6AC9-4202-A874-1A6C8877C302":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B4BE5A3D-FA08-4CF2-832C-A00DB0C2B62A","rev":0}}}},"B4BE5A3D-FA08-4CF2-832C-A00DB0C2B62A":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D19BB8F2-4DB0-4866-B3C3-0E71D42E26FB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"82CFE57C-FC2E-4B2B-85DB-B0EE785E27F7":{"rev":0,"props":{"_rev":{"value":0}}},"C477C1A8-8FD0-4E31-9FAF-F9098D0D56FF":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_ADF66AA8_4178_450E_BCCE_6501FC133CC7":{"rev":3830,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"CF7EB72A-F8F8-4C99-95A6-AB8F95C52D7D","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"CD5361FB-D6B7-43E3-BD75-E75954B854ED","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CF7EB72A-F8F8-4C99-95A6-AB8F95C52D7D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"96415540-92B6-4282-8C7B-1B27C4682CB5","rev":0}}}},"96415540-92B6-4282-8C7B-1B27C4682CB5":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CD5361FB-D6B7-43E3-BD75-E75954B854ED":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"0AA35FE2-3D31-45E9-9CE5-905949353E22":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"BF84D517-AB61-4835-8A2C-2F0026B78070":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"HTMLMorph_191A2D42_A172_49FC_8864_762425103823":{"rev":3744,"props":{"name":{"value":"css loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(36.38826522148531,50.78076171875)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(939.96484375,274.29296875)"},"visible":{"value":false},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"isLayoutable":{"value":false},"metadata":{"value":{"__ref__":true,"id":"EF98D497-1298-4516-87D2-7ED288783691","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: transparent\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"EF98D497-1298-4516-87D2-7ED288783691":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}},"18A01B82-BA18-4339-BA35-1F0E8BE0C9D0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/ModuleProgress":[]}}');
lively.resources={resource:Dc,loadViaScript:Tp};lively.morphic={loadMorphFromSnapshot:hp};za("bP",void 0)}}});System.register("2",["./__root_module__-884b54f8.js","kld-intersections"],function(){return{setters:[function(){},function(){}],execute:function(){}}});System.register("3",["./__root_module__-884b54f8.js","kld-intersections","./index-4d2f3cd3.js","./index-46ea5601.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});