System.register("./__root_module__-b4667baa.js kld-intersections ./index-1bf516c3.js ./index-7dbbd7dc.js ./index-82fc4eeb.js ./color-picker-fa10ea31.js ./editor-plugin-44123d71.js ./index-3aad35e9.js ./editor-plugin-558839eb.js ./index-190f7b7b.js".split(" "),function(){var ta,lb,yb,Qb,Kb,yd,Cc,rd,Fc,Dc,Rc,$c,Hd,gd,Uc,Pa,mb,Nb,Ub,Ic,wd,Eb,Sb,sb,ec,rc,yc,Db,ab,Zb,kc,ua,Ga,cb,rb,pb,Ta,Ua,ob,Wb,lc;return{setters:[function(Lb){ta=Lb.as;lb=Lb.ai;yb=Lb.aA;Qb=Lb.av;Kb=Lb.a3;yd=Lb.at;Cc=Lb.aq;rd=Lb.au;
Fc=Lb.C;Dc=Lb.a2;Rc=Lb.a6;$c=Lb.$;Hd=Lb.aV;gd=Lb.P;Uc=Lb.a7;Pa=Lb.aB;mb=Lb.ak;Nb=Lb.aU;Ub=Lb.ao;Ic=Lb.al;wd=Lb.an;Eb=Lb.bp;Sb=Lb.br;sb=Lb.bP;ec=Lb.b1;rc=Lb.bh;yc=Lb.aN;Db=Lb.n;ab=Lb.a1;Zb=Lb.bQ;kc=Lb.aW;ua=Lb.aX;Ga=Lb.ap;cb=Lb.a4;rb=Lb.ar;pb=Lb.bR},function(){},function(){},function(){},function(Lb){Ta=Lb.d;Ua=Lb.s;ob=Lb.I;Wb=Lb.M},function(){},function(Lb){lc=Lb.I},function(){},function(){},function(){}],execute:function(){function Lb(Ec){var Wa=Ec.sourceObj,cd=Ec.targetObj;Wa.isMorph&&cd.isMorph?
(Wa.show(),cd.show(),Kc.showConnector&&Kc.showConnector(Wa,cd)):Kc.show(String(Ec))}function qc(Ec){var Wa=Ec.sourceObj,cd=Ec.sourceAttrName,Na=Ec.targetObj,bb=Ec.targetMethodName,db=Ec.getConverter();Ec=Ec.getUpdater();return Kc.printConnectionElements(Wa,cd,Na,bb,db,Ec)}function I(Ec,Wa,cd,Na,bb,db){Ec="/* global connect, source, target */\nconnect(source, '"+Wa+"', target, '"+Na+"'";if(bb||db)Ec+=", {\n";bb&&(Ec+="  converter: "+bb);bb&&db&&(Ec+=",");bb&&(Ec+="\n");db&&(Ec+="  updater: "+db+"\n");
if(bb||db)Ec+="}";return Ec+");"}function V(Ec,Wa){var cd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Na.yield(Kc.InteractiveMorphSelector.selectMorph(),2);cd=Na.yieldResult;return Na.return(cd?Kc.interactiveConnectGivenSourceAndTarget(Ec,Wa,cd):null)})}function ra(Ec,Wa,cd,Na){var bb,db,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){bb=cd&&cd.world().targetDataBindings(cd);db=Ec.world();if(!bb||!bb.length)return db.setStatusMessage("connect canceled"),
Fd.return();Sc=bb.map(function(Pd){return[Pd[0].group||"uncategorized",Pd.map(function(ae){return[ae.signature||ae.name,function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(tc){return 1==tc.nextAddress?tc.yield(Kc.interactivelyEvaluateConnection({sourceObj:Ec,sourceAttr:Wa,targetObj:cd,targetAttr:ae.name,onConnect:Na}),2):tc.return(tc.yieldResult)})}]})]});Sc.push(["custom...",function(){var Pd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ae){return 1==ae.nextAddress?
ae.yield(db.prompt("Enter custom connection point",{requester:$world,historyId:"lively.morphic-custom-connection-points",useLastInput:!0}),2):(Pd=ae.yieldResult)?ae.yield(Kc.interactivelyEvaluateConnection({sourceObj:Ec,sourceAttr:Wa,targetObj:cd,targetAttr:Pd,onConnect:Na}),0):ae.jumpTo(0)})}]);return Fd.yield(cd.openMenu(Sc).whenFinished(),0)})}function ya(Ec,Wa,cd,Na){Wa=void 0===Wa?"confirm connection":Wa;var bb,db,Sc,Fd,Pd,ae,tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kd){bb=
Ec;db=bb.sourceObj;Sc=bb.sourceAttrName;Fd=bb.targetObj;Pd=bb.targetMethodName;ae=Ec.getConverter();tc=Ec.getUpdater();return Kd.return(Kc.interactivelyEvaluateConnection({sourceObj:db,sourceAttr:Sc,targetObj:Fd,targetAttr:Pd,converter:ae,updater:tc,prompt:Wa,highlight:cd,onConnect:Na}))})}function Gb(Ec,Wa,cd,Na,bb){Na=void 0===Na?{}:Na;bb=Kc.rect(0).sides.concat(Kc.rect(0).corners);cd=cd||new Kc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Kc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Kc.Color.transparent,
nativeCursor:"auto"},end:{fill:Kc.Color.orange}}},Na,{hasFixedPosition:!0}));cd.startPoint.attachTo(Ec,"rightCenter");Wa.isMorph?(Na=Wa.globalBounds().partNameNearest(bb,Ec.globalPosition),Ec.globalPosition.equals(Wa.globalBounds().partNamed(Na))&&Wa.globalBounds().partNameNearest(Kc.arr.without(bb,Na),Ec.globalPosition),cd.endPoint.attachTo(Wa,"leftCenter")):(bb=Ec.globalBounds().topRight().addPt(Kc.pt(100,0)),Wa=Kc.morph({type:"label",value:Wa.toString(),styleClasses:["Tooltip"],padding:Kc.rect(8,
4)}).openInWorld(bb),Wa.position=Ec.world().bounds().translateForInclusion(Wa.bounds()).topLeft(),Kc.once(cd,"remove",Wa,"remove"),cd.endPoint.attachTo(Wa,"leftCenter"));return cd}function Pb(Ec){var Wa,cd,Na,bb,db,Sc,Fd,Pd,ae,tc,Kd,Yc,ub,ja,oa,tb,H,la,Fa,kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){switch(fc.nextAddress){case 1:Wa=Ec;cd=Wa.sourceObj;Na=Wa.sourceAttr;bb=Wa.targetObj;db=Wa.targetAttr;Sc=Wa.converter;Fd=Wa.updater;Pd=Wa.prompt;ae=void 0===Wa.highlight?!0:Wa.highlight;
tc=Wa.onConnect;Kd="lively://lively.bindings-interactive-connect/x"+cd.id;Yc={context:window,format:"esm",targetModule:Kd,classTransform:Kc.classToFunctionTransform};ub=Kc.printConnectionElements(cd,Na,bb,db,Sc,Fd);bb.isMorph&&cd.isMorph&&(ja=bb.propertiesAndPropertySettings().properties[db]||{type:typeof bb[db]},oa=ja.type,tb=cd.propertiesAndPropertySettings().properties[Na]||{type:typeof cd[Na]},H=tb.type,H!==oa&&(Pd=!0));la={};Object.assign(lively.modules.module(Kd).recorder,(la.source=cd,la.target=
bb,la.connect=Cc,la.once=rd,la[Na]=cd[Na],la));if(!Pd){Fa=ub;fc.jumpTo(2);break}return fc.yield($world.editPrompt(Pd,{input:ub,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Yc,animated:!1}),3);case 3:if(Fa=fc.yieldResult,!Fa)return $world.setStatusMessage("connect canceled"),fc.return();case 2:return fc.yield(lively.vm.runEval(Fa,Yc),4);case 4:kb=fc.yieldResult;if(kb.isError)return $world.logError(kb.value),fc.return(Pb({sourceObj:cd,sourceAttr:Na,
targetObj:bb,targetAttr:db,converter:Sc,updater:Fd,prompt:"confirm connection",highlight:ae,onConnect:tc}));ae&&($world.setStatusMessage("connected!",Kc.Color.green),Kc.interactivelyShowConnection(kb.value));"function"===typeof tc&&tc(kb);fc.jumpToEnd()}})}var Ca=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");Ca.Inspector=lc;var Yb=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),cd=Wa.hasOwnProperty("ProtoInspector")&&"function"===typeof Wa.ProtoInspector?
Wa.ProtoInspector:Wa.ProtoInspector=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(Ca.Inspector);Yb=Ca.ProtoInspector;Ca.default=Yb;var jd=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");jd.Morph=lb;jd.touchInputDevice=yb;jd.easings=Qb;jd.pt=Kb;jd.fun=yd;jd.connect=Cc;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),cd=Wa.hasOwnProperty("MorphicSideBar")&&"function"===typeof Wa.MorphicSideBar?Wa.MorphicSideBar:Wa.MorphicSideBar=function(Na){Na&&
Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(Na){Na=void 0===Na?!0:Na;if(this.respondsToVisibleWindow){var bb=$world.visibleBounds(),db=navigator.standalone&&jd.touchInputDevice?25:0;this.height=bb.height-db;this.top=db+bb.top();db=this.get("horizontal resizer");db.height=this.height;db.top=0;Na&&(this.visible?this.topLeft=
bb.topLeft():this.topRight=bb.topLeft())}}},{key:"switchMode",value:function(Na){"inspector"==Na&&this.showInspector();"connections"==Na&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Na){var bb=this,db,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){switch(Fd.nextAddress){case 1:db=
$world.visibleBounds();Sc=navigator.standalone&&jd.touchInputDevice?25:0;bb.height=db.height-Sc;bb.top=Sc+db.top();if(Na)return $world.addMorph(bb,$world.get("lively top bar")),bb.right=0,bb.attachToWorld($world),bb.visible=!0,Fd.yield(bb.whenRendered(),5);bb.detachFromWorld($world);return Fd.yield(bb.animate({opacity:0,right:0,duration:300}),4);case 4:bb.visible=!1;bb.remove();Fd.jumpTo(0);break;case 5:return bb.onWorldResize(!1),bb.get("scene graph").adjustProportions(),Fd.yield(bb.animate({opacity:1,
easing:jd.easings.outCirc,left:1,duration:300}),6);case 6:bb.get("scene graph").refresh(),Fd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Na){jd.connect(Na,"onChange",this,"onHierarchyChange",{garbageCollect:!0});jd.connect(Na,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});jd.connect(Na,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Na){var bb=this;Na.attributeConnections.forEach(function(db){db.targetObj===bb&&db.disconnect()})}},
{key:"selectNode",value:function(Na){this.getSubmorphNamed("scene graph").selectMorphInTarget(Na);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Na)}},{key:"onHierarchyChange",value:function(Na){var bb=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if("addMorphAt"===Na.selector||"removeMorph"===Na.selector||"name"===Na.prop){db=bb._sceneGraph||(bb._sceneGraph=bb.getSubmorphNamed("scene graph"));if(!db||!db.owner.visible||Na.target&&Na.target.isHand||Na.target&&
db.ignoreMorph(Na.target)||Na.args&&!Na.args[0].isHalo&&db.ignoreMorph(Na.args[0])||Na.target.ownerChain().find(function(Fd){return db.ignoreMorph(Fd)}))return Sc.return();jd.fun.debounceNamed("scene-graph-update",50,function(){return db.refresh()})()}Sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-70"}}},{start:226,end:3612})}(jd.Morph);Ca=jd.MorphicSideBar;jd.default=Ca;var Kc=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Kc.interactivelyShowConnection=Lb;Kc.printConnection=qc;Kc.printConnectionElements=I;Kc.interactiveConnectGivenSource=V;Kc.interactiveConnectGivenSourceAndTarget=ra;Kc.interactivelyReEvaluateConnection=ya;Kc.visualizeConnection=Gb;
Kc.interactivelyEvaluateConnection=Pb;Kc.connect=Cc;Kc.once=rd;Kc.Color=Fc;Kc.rect=Dc;Kc.pt=Kb;Kc.arr=Rc;Kc.promise=$c;Kc.properties=Hd;Kc.Path=gd;Kc.obj=Uc;Kc.HorizontalLayout=Pa;Kc.Morph=lb;Kc.VerticalLayout=mb;Kc.StyleSheet=Nb;Kc.Icon=Ub;Kc.GridLayout=Ic;Kc.morph=wd;Kc.TreeData=Eb;Kc.Tree=Sb;Kc.Leash=sb;Kc.LabeledCheckBox=ec;Kc.SearchField=rc;Kc.showConnector=Ta;Kc.show=Ua;Kc.InteractiveMorphSelector=ob;Kc.MorphHighlighter=Wb;Kc.Window=yc;Kc.classToFunctionTransform=Db;Kc.interactivelyShowConnection=
Lb;Kc.interactivelyShowConnection=Lb;Kc.printConnection=qc;Kc.printConnection=qc;Kc.printConnectionElements=I;Kc.printConnectionElements=I;Kc.interactiveConnectGivenSource=V;Kc.interactiveConnectGivenSource=V;Kc.interactiveConnectGivenSourceAndTarget=ra;Kc.interactiveConnectGivenSourceAndTarget=ra;Kc.interactivelyReEvaluateConnection=ya;Kc.interactivelyReEvaluateConnection=ya;Kc.visualizeConnection=Gb;Kc.visualizeConnection=Gb;Kc.interactivelyEvaluateConnection=Pb;Kc.interactivelyEvaluateConnection=
Pb;var zc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");zc.Tree=Sb;zc.TreeData=Eb;zc.morph=wd;zc.Icon=Ub;zc.HorizontalLayout=Pa;zc.easings=Qb;zc.Morph=lb;zc.Color=Fc;zc.Rectangle=ab;zc.rect=Dc;zc.pt=Kb;zc.connect=Cc;zc.noUpdate=Zb;zc.disconnect=kc;zc.disconnectAll=ua;zc.once=rd;zc.arr=Rc;zc.num=Ga;zc.fun=yd;zc.tree=cb;zc.promise=$c;zc.ConnectionHalo=_missingExportShim;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),cd=Wa.hasOwnProperty("InteractiveTreeContainer")&&
"function"===typeof Wa.InteractiveTreeContainer?Wa.InteractiveTreeContainer:Wa.InteractiveTreeContainer=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"onChildRemoved",value:function(Na){}},{key:"onChildAdded",value:function(Na){}},{key:"toggleSelected",value:function(Na){if(this.tree){var bb=this.tree,db=bb.selectionFontColor,Sc=bb.nonSelectionFontColor;this.submorphs.filter(function(Fd){return!Fd._isControlElement&&
Fd.styleClasses.includes("Label")}).forEach(function(Fd){Fd.fontColor=Na?db:Sc})}}},{key:"onGrab",value:function(Na){var bb=this.tree,db=this.node;this.fill=zc.Color.gray.withA(.5);this.fontColor=bb.selectionFontColor;this.opacity=.8;ta._get(Object.getPrototypeOf(cd.prototype),"onGrab",this).call(this,Na);db&&(this.toggleSelected(!1),bb.collapse(db),bb.treeData.parentNode(db).container.onChildRemoved(this),this._data=bb.treeData.remove(db),db.container.target.remove(),bb.update(!0))}},{key:"wantsToBeDroppedOn",
value:function(Na){this.showPreviewOn(Na);return!0}},{key:"showPreviewOn",value:function(Na){if(Na.isContainer)var bb=Na.tree;Na.isTree&&(bb=Na);bb&&bb.showDropPreviewFor&&bb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Na){var bb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return bb.tree.treeData.add(Na._data,bb.node,bb.node.children[0]),bb.tree.uncollapse(bb.node),bb.tree.treeData.remove(bb.tree._previewNode),db.yield(bb.tree.whenRendered(),
2);bb.tree.update(!0);bb.onChildAdded(Na);db.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Na,bb){var db=this;debugger;this.tree._dropInProgress=!0;ta._get(Object.getPrototypeOf(cd.prototype),"onBeingDroppedOn",this).call(this,Na,bb);Na=function(){db.fill=zc.Color.gray.withA(.5);db.opacity=1;db.tree._dropInProgress=!1;db.tree.refresh()};bb.isTree?bb.insertAtPlaceholder(this).then(Na):bb.isContainer?bb.insertAsChild(this).then(Na):Na()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},
{key:"properties",get:function(){return{fill:{defaultValue:zc.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Na=this,bb=this.tree.treeData;return bb&&bb.asList().find(function(db){return db.container===Na})}}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:447,end:2927})}(zc.Morph);zc.InteractiveTreeContainer=Ca;zc.InteractiveTreeContainer=Ca;zc.InteractiveTreeContainer=Ca;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),cd=Wa.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Wa.InteractiveTreeData?Wa.InteractiveTreeData:Wa.InteractiveTreeData=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,
Ec,[{key:"display",value:function(Na){return[Na.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Na){return Na.isCollapsed}},{key:"collapse",value:function(Na,bb){Na.isCollapsed=bb}},{key:"getChildren",value:function(Na){var bb=this;return Na.isLeaf?null:Na.children.filter(function(db){return db&&(bb.filterActive?db.visible:!0)})}},{key:"isLeaf",value:function(Na){var bb=this;return!Na.children||0==Na.children.filter(function(db){return db&&(bb.filterActive?db.visible:!0)}).length}},
{key:"add",value:function(Na,bb,db){bb=void 0===bb?this.root:bb;bb.children||(bb.children=[]);db?zc.arr.pushAt(bb.children,Na,bb.children.indexOf(db)):bb.children.push(Na);bb.isLeaf=!1}},{key:"replace",value:function(Na,bb){var db=this.parentNode(Na);Na=db.children.indexOf(Na);db.children[Na]=bb}},{key:"next",value:function(Na){var bb=this.parentNode(Na);return bb&&bb.children[bb.children.indexOf(Na)+1]}},{key:"isBefore",value:function(Na,bb){this.next(Na)===bb}},{key:"isAfter",value:function(Na,
bb){this.next(bb)===Na}},{key:"addBefore",value:function(Na,bb){this.add(Na,this.parentNode(bb),bb)}},{key:"addAfter",value:function(Na,bb){var db=this.parentNode(bb);bb=db.children.indexOf(bb)+1;this.add(Na,db,db.children[bb])}},{key:"remove",value:function(Na){var bb=this.parentNode(Na);if(bb)return zc.arr.remove(bb.children,Na),bb.children==[]&&(bb.children=null),Na}},{key:"filter",value:function(Na,bb){bb=void 0===bb?1:bb;var db=this,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fd){if(1==
Fd.nextAddress)return Fd.yield(db.uncollapseAll(function(Pd,ae){return ae<bb+1}),2);Sc=db.filterActive;db.filterActive=!1;db.asListWithIndexAndDepth(!1).reverse().forEach(function(Pd){var ae=Pd.node;if(0==Pd.depth)return ae.visible=!0;ae.visible=Na(ae);ae.visible||ae.isCollapsed||!ae.children.find(function(tc){return tc.visible})?ae.container.opacity=1:(ae.visible=!0,ae.container.opacity=.5);return ae.visible});db.filterActive=Sc;Fd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],
Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:2936,end:5375})}(zc.TreeData);zc.InteractiveTreeData=Ca;zc.InteractiveTreeData=Ca;zc.InteractiveTreeData=Ca;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),cd=Wa.hasOwnProperty("InteractiveTree")&&
"function"===typeof Wa.InteractiveTree?Wa.InteractiveTree:Wa.InteractiveTree=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"update",value:function(Na){var bb=this;ta._get(Object.getPrototypeOf(cd.prototype),"update",this).call(this,Na);this.treeData&&this.relayoutContainers();Na&&this.embeddedMorphs.forEach(function(db){db.isContainer&&(db.fill=zc.Color.transparent,db.fontFamily=bb.fontFamily,
db.fontSize=bb.fontSize)})}},{key:"onDrop",value:function(Na){ta._get(Object.getPrototypeOf(cd.prototype),"onDrop",this).call(this,Na);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Na){}},{key:"onDropHoverUpdate",value:function(Na){}},{key:"onDropHoverOut",value:function(Na){}},{key:"onHoverOut",value:function(Na){var bb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){ta._get(Object.getPrototypeOf(cd.prototype),"onHoverOut",bb).call(bb,
Na);bb._previewNode&&bb._previewNode.container.world()&&bb.treeData.remove(bb._previewNode);bb.resetContainerSelection();bb.update(!0);db.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Na){var bb=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return db=bb.treeData.parentNode(bb._previewNode),bb.treeData.replace(bb._previewNode,Na._data),bb.treeData.remove(bb._previewNode),Sc.yield(bb.whenRendered(),2);bb.update(!0);db.container.onChildAdded(Na);
Sc.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Na=this;if(!this._scrollingUp){this._scrollingUp=!0;var bb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Na._scrollingUp&&0<Na.scroll.y?db.yield(Na.animate({scroll:Na.scroll.subXY(0,30),duration:300,easing:zc.easings.linear}),3):(Na._scrollingUp=!1,db.jumpTo(0));bb();db.jumpToEnd()})};bb()}}},{key:"scrollDownSlowly",value:function(){var Na=this;if(!this._scrollingDown){this._scrollingDown=
!0;var bb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){if(1==db.nextAddress)return Na._scrollingDown&&Na.scroll.y<Na.scrollExtent.y-Na.height?db.yield(Na.animate({scroll:Na.scroll.addXY(0,30),duration:300,easing:zc.easings.linear}),3):(Na._scrollingDown=!1,db.jumpTo(0));bb();db.jumpToEnd()})};bb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Na){Na.isContainer&&
(Na.fill=zc.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Na){var bb=this;Na=this.localize(Na.globalBounds().center());var db=this.textPositionFromPoint(Na),Sc=this.treeData.asListWithIndexAndDepth(function(Yc){Yc=Yc.node;return Yc!=bb._previewNode&&Yc.container.world()}),Fd=(Sc.find(function(Yc){return Yc.i-1===db.row})||{}).node,Pd=Fd&&Fd.container,ae=this.ensurePlaceholder(),tc=!!ae.container.world(),Kd=Na.subPt(this.scroll).subPt(this.scrollbarOffset);10>Kd.y?this.scrollUpSlowly():
Kd.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Pd){if(Sc.length>db.row||zc.arr.last(this.treeData.root.children)===ae)return;this.treeData.remove(ae);this.treeData.add(ae);this.update(!0)}if(Pd){Sc=this.textLayout.boundsFor(this,db);if(4>Math.abs(Sc.top()-Na.y)){if(this.treeData.isBefore(ae,Fd))return;this.treeData.remove(ae);this.treeData.addBefore(ae,Fd)}else if(4>Math.abs(Sc.bottom()-Na.y)&&(Fd.isCollapsed||this.treeData.isLeaf(Fd))){if(this.treeData.isAfter(ae,
Fd))return;this.treeData.remove(ae);this.treeData.addAfter(ae,Fd)}else{Pd.fill=zc.Color.gray;if(!tc)return;this.treeData.remove(ae)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Na=zc.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:zc.morph({acceptsDrops:!1,reactsToPointer:!1,fill:zc.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Na;return this._previewNode}},{key:"relayoutContainers",
value:function(){var Na=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(bb){return bb.height});this.treeData.asListWithIndexAndDepth().forEach(function(bb){var db=bb.node;bb=bb.i;db.container.nativeCursor="grab";db.container.width=Na.width-25-db.container.left;db.container.toggleSelected&&db.container.toggleSelected(bb==Na.selectedIndex)});this.anchors.forEach(function(bb){return bb.position=bb.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:5384,end:10721})}(zc.Tree);zc.InteractiveTree=Ca;zc.InteractiveTree=Ca;zc.InteractiveTree=Ca;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),cd=Wa.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Wa.SceneGraphTree?Wa.SceneGraphTree:Wa.SceneGraphTree=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Na){var bb=this.treeData.asList().find(function(db){return db.container.target===Na});bb&&this.selectedNode!=bb&&this.selectPath(this.treeData.pathOf(bb))}},{key:"onLoad",
value:function(){var Na=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Na.submorphs=[],bb.yield(Na.whenRendered(),2);Na.get("inspector").makeEditorVisible(!0);Na.get("inspector").makeEditorVisible(!1);Na.setTarget($world);bb.jumpToEnd()})}},{key:"adjustProportions",value:function(Na){Na=(Na?Na.state.dragDelta:{y:0}).y;var bb=this.get("inspector"),db=this.get("scene graph resizer"),Sc=this.get("mode selector"),Fd=this.get("connections tree");this.height+=
Na;bb.height-=Na;Fd.height-=Na;db.top=this.bottom;db.left=0;Sc.top=db.bottom;Fd.top=bb.top=Sc.bottom+5}},{key:"reset",value:function(){var Na=this;this.treeData=new zc.InteractiveTreeData({children:[],container:zc.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(bb){return null==bb.id}).forEach(function(bb){return Na.removeAnchor(bb)})}},{key:"setTarget",value:function(Na){this.target=Na;this.treeData=this.getTreeFromSubmorphHierarchy(Na);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(Na){var bb=this;if(Na===this._previewNode)return!1;if(Na.container.nameNeedsUpdate)return!0;var db=Na.container.target.submorphs.filter(function(Sc){return!bb.ignoreMorph(Sc)});return db.length!=Na.children.length||db.map(function(Sc){return Sc.name}).join("")!=Na.children.map(function(Sc){return Sc.target?Sc.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Na){var bb=this,db=Na.container.target.submorphs.map(function(tc){return tc.__scene_graph_target__?
tc.__scene_graph_target__():tc}).filter(function(tc){return!bb.ignoreMorph(tc)}),Sc=[],Fd={},Pd;for(Pd in db){Fd.$jscomp$loop$prop$m$2259=db[Pd];var ae=zc.arr.without(Na.children,this._previewNode).find(function(tc){return function(Kd){return Kd.container.target.id==tc.$jscomp$loop$prop$m$2259.id}}(Fd));Sc[Pd]=ae?ae:this.readMorphHierarchy(Fd.$jscomp$loop$prop$m$2259);Fd={$jscomp$loop$prop$m$2259:Fd.$jscomp$loop$prop$m$2259}}return Sc}},{key:"refresh",value:function(){var Na=this;if(!this._updating&&
!this._dropInProgress){var bb=!1;zc.tree.prewalk(this.treeData.root,function(db){Na.isNodeOutOfSync(db)&&(bb=!0,db.name=db.container.target.name,db.container.refresh(),db.children=Na.getNewChildren(db))},function(db){return db.children});this.update(bb)}}},{key:"ignoreMorph",value:function(Na){return Na.isMorph?Na.isContainer||Na.isWindow||Na.getWindow()||Na.isEpiMorph||Na.isHand||["lively.halos"].includes(Na.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(Na.constructor.name):!1}},{key:"onDropHoverOut",value:function(Na){var bb=Na.hand.grabbedMorphs[0];Na=Na.hand.findDropTarget();if(!(Na===this||Na&&Na.ownerChain().includes(this))&&bb&&bb.isContainer)bb.onDragOutside()}},{key:"onDropHoverIn",value:function(Na){var bb=Na.hand.grabbedMorphs[0];bb&&!bb.isContainer&&($world.halos().forEach(function(db){return db.remove()}),bb.remove(),Object.assign(bb,Na.hand._grabbedMorphProperties.get(bb).pointerAndShadow),bb=this.renderContainerFor(bb,
!1),Na.hand.grab(bb),bb.leftCenter=zc.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Na){return new zc.InteractiveTreeData(this.readMorphHierarchy(Na))}},{key:"readMorphHierarchy",value:function(Na){var bb=this;return zc.tree.mapTree(Na,function(db,Sc){return{name:db.name,isCollapsed:!0,container:bb.renderContainerFor(db),visible:!0,children:Sc}},function(db){return db.submorphs.filter(function(Sc){return db.isWorld?!bb.ignoreMorph(Sc):!0})})}},{key:"renderContainerFor",value:function(Na,
bb){Na=void 0===Na?zc.morph({name:"root"}):Na;bb=new zc.MorphContainer({tree:this,fill:void 0===bb||bb?zc.Color.transparent:zc.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Na,opacity:Na.visible?1:.5});Na._data?(bb._data=Na._data,Na._data.container=bb):bb._data={name:Na.name,isCollapsed:!0,container:bb,children:[]};return bb}},{key:"collapseAll",value:function(){var Na=this;this.treeData.asList().forEach(function(bb){return bb!=Na.treeData.root?bb.isCollapsed=
!0:bb.isCollapsed=!1})}},{key:"filterMorphs",value:function(Na){var bb=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return db=Na.tokens[0],bb.treeData.filterActive||(bb._collapseState=new WeakMap(bb.treeData.asList().map(function(Fd){return[Fd,Fd.isCollapsed]}))),bb.treeData.filterActive=!!db,Sc.yield(bb.treeData.filter(function(Fd){var Pd=!db||Fd.container.target.name.includes(db);Fd.container.highlightTerm(db);return Pd},3),2);bb.treeData.filterActive||
bb.treeData.asList().forEach(function(Fd){return Fd.isCollapsed=bb._collapseState.has(Fd)?bb._collapseState.get(Fd):!0});bb.refresh();Sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1102"}}},{start:10730,end:17203})}(zc.InteractiveTree);zc.SceneGraphTree=Ca;zc.SceneGraphTree=Ca;zc.SceneGraphTree=Ca;Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),cd=Wa.hasOwnProperty("MorphContainer")&&"function"===typeof Wa.MorphContainer?Wa.MorphContainer:Wa.MorphContainer=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"refresh",value:function(){var Na=
this,bb,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){bb=Na.target;if(!bb)return Sc.return();Na.reactsToPointer=!0;Na.dropShadow=!1;Na.submorphs=[Na.getLabel(),bb.layout&&Na.getLayoutControls(),Na.getConnectionControls()].filter(Boolean).map(function(Fd,Pd){Fd.fitIfNeeded();Fd.left=db?db.right+5:0;Fd.top=2;return db=Fd});Na.height=20;Na.opacity=bb.visible?1:.5;Sc.jumpToEnd()})}},{key:"getLabel",value:function(){var Na=this.getSubmorphNamed("name label")||zc.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:zc.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),bb=Na.textString.slice(2,-1);bb&&bb==this.target.name||(Na.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Na}},{key:"getIcon",value:function(Na){return zc.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Na.constructor.className]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Na=this.getSubmorphNamed("layout label")||zc.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:zc.Rectangle.inset(4,2,4,2),fill:zc.Color.orange,fontColor:zc.Color.white});Na._isControlElement=!0;Na.textString!=this.target.layout.name()&&(Na.value=this.target.layout.name());return Na}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(db){return!db.targetObj.isHalo}).length:0;var Na=this.getSubmorphNamed("connections label")||zc.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:zc.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:zc.Color.red,fontColor:zc.Color.white});Na._isControlElement=!0;Na.visible=!this.connectionHalo&&!!this.connectionCount;var bb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Na.textString!=bb&&(Na.value=bb);return Na}},{key:"highlightTerm",value:function(Na){var bb=this.submorphs[0],db=bb.textAndAttributes.slice(0,2),Sc=bb.textString.slice(1).split(Na);bb.textAndAttributes=1===Sc.length?[].concat($jscomp.arrayFromIterable(db),[Sc[0]]):[].concat($jscomp.arrayFromIterable(db),$jscomp.arrayFromIterable(zc.arr.flatten(zc.arr.interpose(Sc.map(function(Fd){return[Fd,{}]}),[Na,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Na){var bb=ta._get(Object.getPrototypeOf(cd.prototype),"wantsToBeDroppedOn",this).call(this,Na);if(![Na].concat($jscomp.arrayFromIterable(Na.ownerChain())).includes(this.tree))this.onDragOutside();return bb}},{key:"onGrab",value:function(Na){var bb=this,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return bb.tree._dropInProgress=!0,db=bb.target.globalPosition,ta._get(Object.getPrototypeOf(cd.prototype),
"onGrab",bb).call(bb,Na),bb._data.globalTargetPosition=db,Sc.yield(bb.whenRendered(),2);if(bb.tree.fullContainsWorldPoint(bb.globalPosition))bb.leftCenter=zc.pt(-20,0);else bb.onDragOutside();bb.tree._dropInProgress=!1;Sc.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=zc.fun.createQueue("container-hover-queue",function(Na,bb){var db,Sc,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pd){if(1==Pd.nextAddress)return db=
Na.target,Sc=db.opacity,Fd=db.scale,Na.target.opacity=0,Na.target.scale=.5,$world.halos().forEach(function(ae){return ae.remove()}),$world.firstHand.grab(Na.target),Na.target._data=Na._data,Na.remove(),Na.target.position=zc.pt(0,0),Pd.yield(Na.target.animate({opacity:Sc,scale:Fd,duration:200}),2);bb();Pd.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Na){var bb=this.node.children.indexOf(Na.node||Na._data)+1;bb=this.node.children[bb];Na.target.remove();bb?(bb=this.target.submorphs.indexOf(bb.container.target),
this.target.addMorphAt(Na.target,bb)):this.target.addMorph(Na.target);Na._data.globalTargetPosition&&(Na.target.position=this.target.localize(Na._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Na){}},{key:"toggleConnectionControl",value:function(Na){this.getSubmorphNamed("connections label").visible=Na}},{key:"toggleSelected",value:function(Na){var bb=this,db,Sc,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pd){if(1==Pd.nextAddress)return ta._get(Object.getPrototypeOf(cd.prototype),
"toggleSelected",bb).call(bb,Na),bb._active===Na?Pd.return():(bb._active=Na)&&bb.target&&bb.target.isMorph&&bb.world()?Pd.yield(bb.target.whenRendered(),3):Pd.jumpTo(0);bb.get("inspector").targetObject=bb.target;bb.get("connections tree").inspectConnectionsOf(bb.target);if(bb.connectionHalo)return Pd.return();db=$jscomp.makeIterator(bb.world().halos());for(Sc=db.next();!Sc.done;Sc=db.next()){Fd=Sc.value;if(Fd.target===bb.target)return Pd.return();Fd.remove()}zc.noUpdate({sourceObj:bb.world(),targetObj:bb.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return bb.world().showHaloFor(bb.target)});Pd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Na){this.submorphs[0].fontFamily=Na}},fontColor:{after:["submorphs"],derived:!0,set:function(Na){this.submorphs[0].fontColor=Na}},fontSize:{derived:!0,set:function(Na){this.submorphs[0].fontSize=
Na}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Wa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1102"}}},{start:17212,end:24827})}(zc.InteractiveTreeContainer);zc.MorphContainer=Ca;zc.MorphContainer=Ca;zc.MorphContainer=Ca;var Ha=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");Ha.visualizeConnection=function(Ec,Wa,cd,Na,bb){Na=void 0===Na?{}:Na;bb=Ha.rect(0).sides.concat(Ha.rect(0).corners);
cd=cd||new Ha.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ha.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ha.Color.transparent,nativeCursor:"auto"},end:{fill:Ha.Color.orange}}},Na,{hasFixedPosition:!0}));cd.startPoint.attachTo(Ec,"rightCenter");Wa.isMorph?(Na=Wa.globalBounds().partNameNearest(bb,Ec.globalPosition),Ec.globalPosition.equals(Wa.globalBounds().partNamed(Na))&&Wa.globalBounds().partNameNearest(Ha.arr.without(bb,Na),Ec.globalPosition),cd.endPoint.attachTo(Wa,
"leftCenter")):(bb=Ec.globalBounds().topRight().addPt(Ha.pt(100,0)),Wa=Ha.morph({type:"label",value:Wa.toString(),styleClasses:["Tooltip"],padding:Ha.rect(8,4)}).openInWorld(bb),Wa.position=Ec.world().bounds().translateForInclusion(Wa.bounds()).topLeft(),Ha.once(cd,"remove",Wa,"remove"),cd.endPoint.attachTo(Wa,"leftCenter"));return cd};Ha.startConnecting=function(Ec,Wa){Ec.animate({opacity:.8,duration:300});Ec.startPoint.attachTo(Wa,"center");Ec.vertices[0].position=Ha.pt(2,2)};Ha.stopConnecting=
function(Ec,Wa,cd,Na){function bb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pd){if(1==Pd.nextAddress)return Pd.yield(Ec.animate({opacity:0,duration:300}),2);Ec.startPoint.clearConnection();Ec.endPoint.clearConnection();Ec.remove();Pd.jumpToEnd()})}Na=void 0===Na?"sourceAttrName":Na;var db,Sc,Fd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pd){return 1==Pd.nextAddress?(db=Ec,Sc=db.endPoint,(Fd=Sc.connectedMorph)&&"MorphContainer"==Fd.constructor.className&&(Fd=Fd.target),
Fd?Pd.yield(Ha.interactiveConnectGivenSourceAndTarget(cd,Na,Fd),2):Pd.jumpTo(2)):Pd.yield(bb(),0)})};Ha.editConnection=function(Ec){var Wa=Ec.connection,cd=Ec.connectionPoint,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Na=Ha.visualizeConnection(cd,Wa.targetObj,!1,{borderColor:Ha.Color.gray.darker(),endpointStyle:{start:{fill:Ha.Color.transparent,nativeCursor:"auto"},end:{fill:Ha.Color.gray.darker()}}}),bb.yield(Ha.interactivelyReEvaluateConnection(Wa,
"Edit Connection",!1),2);Na.remove();bb.jumpToEnd()})};Ha.Tree=Sb;Ha.TreeData=Eb;Ha.Icon=Ub;Ha.morph=wd;Ha.pt=Kb;Ha.Rectangle=ab;Ha.rect=Dc;Ha.Color=Fc;Ha.arr=Rc;Ha.connect=Cc;Ha.signal=rb;Ha.Leash=sb;Ha.once=pb;Ha.interactivelyReEvaluateConnection=ya;Ha.interactiveConnectGivenSource=V;Ha.interactiveConnectGivenSourceAndTarget=ra;(function(Ec){var Wa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),cd=Wa.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Wa.ConnectionsTreeData?
Wa.ConnectionsTreeData:Wa.ConnectionsTreeData=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"parseMorphConnections",value:function(Na){for(var bb={},db=$jscomp.makeIterator(void 0===Na.attributeConnections?[]:Na.attributeConnections),Sc=db.next();!Sc.done;Sc=db.next())Sc=Sc.value,Sc.targetObj.isHalo||(bb[Sc.sourceAttrName]=bb[Sc.sourceAttrName]||[{name:["      New Connection  ",{fontColor:Ha.Color.white.withA(.5),
fontStyle:"italic"},this.renderPin(Na,Sc.sourceAttrName),{}]}],Ha.arr.pushAt(bb[Sc.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Sc)))},0));return{children:Object.entries(bb).map(function(Fd){var Pd=$jscomp.makeIterator(Fd);Fd=Pd.next().value;Pd=Pd.next().value;return{name:[Fd,{fontWeight:"bold"}," ",{},Ha.morph({fill:Ha.Color.white,opacity:.7,value:""+(Pd.length-1),borderRadius:15,fontWeight:"bold",padding:Ha.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],
children:Pd}}).concat([{name:["New Connection  ",{fontColor:Ha.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Na),{}]}])}}},{key:"renderExistingConnection",value:function(Na){var bb=this,db=Ha.morph({type:"label",fontColor:Ha.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(Ha.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Na.targetMethodName,{}])}),Sc=this.renderDeadPin(),Fd=Sc.submorphs[0];Ha.connect(db,"onHoverIn",function(){db.fontColor=
Ha.Color.orange;db._leash=Ha.visualizeConnection(Fd,Na.targetObj,db._leash);Fd.fill=Ha.Color.orange;Fd.border={color:Ha.Color.orange,width:3}});Ha.connect(db,"onMouseDown",function(Pd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ae){if(1==ae.nextAddress)return Pd.stop(),ae.yield(Ha.interactivelyReEvaluateConnection(Na),2);Ha.signal(bb,"refresh");ae.jumpToEnd()})});Ha.connect(db,"onHoverOut",function(){db.fontColor=Ha.Color.gray;Fd.fill=Ha.Color.gray;Fd.border={color:Ha.Color.white,
width:1};db._leash.remove();db._leash=void 0});return[db,{},"  ",{}].concat($jscomp.arrayFromIterable(Ha.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Na.disconnect();Ha.signal(bb,"refresh")}})),["  ",{},Sc,{}])}},{key:"renderDeadPin",value:function(){var Na=Ha.morph({type:"ellipse",fill:Ha.Color.gray,extent:Ha.pt(10,10),center:Ha.pt(8,12),borderWidth:1});return Ha.morph({extent:Ha.pt(20,20),fill:Ha.Color.transparent,reactsToPointer:!1,submorphs:[Na]})}},{key:"renderPin",
value:function(Na,bb){var db=this,Sc=Ha.morph({type:"ellipse",fill:Ha.Color.gray.withA(.5),extent:Ha.pt(10,10),center:Ha.pt(8,12),draggable:!1,borderWidth:1}),Fd=new Ha.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:Ha.Color.gray.darker(),endpointStyle:{fill:Ha.Color.gray.darker()},position:Ha.pt(1,1),vertices:[Ha.pt(0,0),Ha.pt(0,0)],canConnectTo:function(Pd){return"MorphContainer"==Pd.constructor.className||2>Ha.arr.intersect([Pd].concat($jscomp.arrayFromIterable(Pd.ownerChain())),
[Sc].concat($jscomp.arrayFromIterable(Sc.ownerChain()))).length}});Sc.addMorph(Fd);Ha.connect(Fd.endPoint,"onDragStart",function(){Ha.startConnecting(Fd,Sc)});Ha.connect(Fd.endPoint,"onDragEnd",function(Pd){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ae){if(1==ae.nextAddress)return Sc.center=Ha.pt(8,12),ae.yield(Ha.stopConnecting(Fd,Sc,Na,bb),2);Ha.signal(db,"refresh");ae.jumpToEnd()})});return Ha.morph({extent:Ha.pt(20,20),fill:Ha.Color.transparent,reactsToPointer:!1,submorphs:[Sc]})}},
{key:"display",value:function(Na){return Na.name}},{key:"collapse",value:function(Na,bb){Na.isCollapsed=bb}},{key:"isCollapsed",value:function(Na){return Na.isCollapsed}},{key:"isLeaf",value:function(Na){return!Na.children}},{key:"getChildren",value:function(Na){return Na.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Na){var bb=new this;bb.root=bb.parseMorphConnections(Na);return bb}}],Wa,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3535,end:8087})})(Ha.TreeData);Ca=function(Ec){var Wa=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),cd=Wa.hasOwnProperty("ConnectionsTree")&&"function"===typeof Wa.ConnectionsTree?Wa.ConnectionsTree:Wa.ConnectionsTree=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(cd,Ec,[{key:"inspectConnectionsOf",value:function(Na){if(this.targetMorph=Na)this.treeData=Ha.ConnectionsTreeData.for(Na),Ha.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=Ha.ConnectionsTreeData.for(this.targetMorph),Ha.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Wa,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8104,end:8657})}(Ha.Tree);Ca=Ha.ConnectionsTree;Ha.default=Ca}}});