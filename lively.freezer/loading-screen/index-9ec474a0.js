System.register(["./__root_module__-884b54f8.js"],function(za){var cb,mb,Pb,tb,Fc,vc,Qc,mc,ic,zc,Dc,Gd,Hd,Zd,xc,od,qb,kc,Uc,tc,cd,td,nb,cc,wc,dc,Nc,$a,Xa,Gb,ub,db,Xb,Fa,sb,Ya,pb,$b,lc,Jb,Cb,Bb;return{setters:[function(sa){cb=sa.f;mb=sa.b;Pb=sa.C;tb=sa.m;Fc=sa.Y;vc=sa.p;Qc=sa.s;mc=sa.R;ic=sa.$;zc=sa.e;Dc=sa.Q;Gd=sa.I;Hd=sa.M;Zd=sa.av;xc=sa.c;od=sa.o;qb=sa._;kc=sa.i;Uc=sa.O;tc=sa.af;cd=sa.K;td=sa.ab;nb=sa.j;cc=sa.a9;wc=sa.P;dc=sa.aw;Nc=sa.ac;$a=sa.a;Xa=sa.d;Gb=sa.ax;ub=sa.aa;db=sa.ay;Xb=sa.az;
Fa=sa.aA;sb=sa.aB;Ya=sa.g;pb=sa.aC;$b=sa.W;lc=sa.aD;Jb=sa.aE;Cb=sa.B;Bb=sa.h}],execute:function(){function sa(hb){(hb=xa.cachedGuideLines.get(hb))&&hb.forEach(function(Za){return Za.remove()})}function Ta(hb,Za,ua,J,la){Za=void 0===Za?!0:Za;ua=void 0===ua?!0:ua;J=void 0===J?10:J;la=void 0===la?100:la;if(Za||ua){var La=hb.owner,ib=La.world();La=La.getGlobalTransform();var Ib=hb.owner.submorphs.filter(function(G){return G!==hb&&!G.isEpiMorph&&G.visible&&G.reactsToPointer}),hc=xa.findAlignedMorphs(hb,
Ib,J,la,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));la=[];var Vb=0,Oc=0,Pc=0,Yd=0;La.e-=ib.scroll.x;La.f-=ib.scroll.y;if(hc){hc=$jscomp.makeIterator(hc);for(var r=hc.next();!r.done;r=hc.next()){r=$jscomp.makeIterator(r.value);r.next();var Rd=r.next().value;r=Rd.vertical;Rd=$jscomp.makeIterator(Rd.horizontal);for(var ke=Rd.next();!ke.done;ke=Rd.next()){ke=ke.value;var le=ke.edgeAVal,ge=ke.refPointsA,vd=ke.refPointsB,Td=ke.edgeBVal,Ce=Math.ceil(J-
ke.delta),Ae=Math.min(ge.top,vd.top);ge=Math.max(ge.bottom,vd.bottom);ke.maxDist>J&&(Ce-=J/2);Vb<Ce&&(Vb=Ce,Pc=Td-le);la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:xa.guideWidth,start:La.transformPoint(xa.pt(Td,Ae)),end:La.transformPoint(xa.pt(Td,ge)),fill:xa.guideColor,guideType:"h",priority:Ce})}r=$jscomp.makeIterator(r);for(Rd=r.next();!Rd.done;Rd=r.next())Rd=Rd.value,ke=Rd.edgeAVal,Ae=Rd.refPointsA,ge=Rd.refPointsB,le=Rd.edgeBVal,Td=Math.ceil(J-Rd.delta),Ce=Math.min(Ae.left,ge.left),
Ae=Math.max(Ae.right,ge.right),Rd.maxDist>J&&(Td-=J/2),Oc<Td&&Math.abs(le-ke)<=J&&(Oc=Td,Yd=le-ke),la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:xa.guideWidth,start:La.transformPoint(xa.pt(Ce,le)),end:La.transformPoint(xa.pt(Ae,le)),fill:xa.guideColor,guideType:"v",priority:Td})}}if(!Vb||!Oc){Ib=[hb].concat($jscomp.arrayFromIterable(Ib));ke=xa.computeClosestMorphs(Ib);Rd=ke[0];Ib=Rd.l;hc=Rd.r;r=Rd.t;Rd=Rd.b;var ld;if(Ib||hc||r||Rd){var nf=(Ib||hc||r||Rd).refPointsA;for(le=1;le<ke.length&&
(ge=ke[le],Td=ge.l,Ce=ge.r,Ae=ge.t,ge=ge.b,Vb||(Ib&&Td&&Ib.index!==Td.index&&Math.abs(Td.dist-Ib.dist)<=J?ld=Object.assign({neighbor:le,direction:"left"},Td):hc&&Ce&&hc!==Ce.index&&Math.abs(Ce.dist-hc.dist)<=J&&(ld=Object.assign({neighbor:le,direction:"right"},Ce))),Oc||(r&&Ae&&r.index!==Ae.index&&Math.abs(Ae.dist-r.dist)<=J?ld=Object.assign({neighbor:le,direction:"top"},Ae):Rd&&ge&&Rd.index!==ge.index&&Math.abs(ge.dist-Rd.dist)<=J&&(ld=Object.assign({neighbor:le,direction:"bottom"},ge))),!ld);le++);
}if(ld){var gc=ld;J=gc.direction;Ae=gc.dist;var id=nf.left;vd=nf.top;var fe=nf.bottom,Ec=nf.right,pe=nf.width,Ga=nf.height;ge=gc.refPointsA;nf=ge.left;ke=ge.top;le=ge.bottom;Td=ge.right;Ce=ge.width;ge=ge.height;var Oa=gc.refPointsB,Ka=Oa.left;gc=Oa.top;var N=Oa.bottom;Oa=Oa.right;Ec="left"===J?id:"right"===J?Ec:id+pe/2;fe="bottom"===J?fe:"top"===J?vd:vd+Ga/2;id="left"===J?Ec-Ae:"right"===J?Ec+Ae:id+pe/2;Ae="bottom"===J?fe+Ae:"top"===J?fe-Ae:vd+Ga/2;vd="left"===J?Oa:"right"===J?Ka:nf+Ce/2;pe="bottom"===
J?gc:"top"===J?N:ke+ge/2;!ua||Vb||"right"!==J&&"left"!==J||(Vb=10,Pc=(ld.dist-(hc||Ib).dist)*("right"===J?-1:1),Ec+=Pc,id+=Pc);!ua||Oc||"top"!==J&&"bottom"!==J||(Oc=10,Yd=((r||Rd).dist-ld.dist)*("top"===J?-1:1),fe+=Yd,Ae+=Yd);la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:La.transformPoint(xa.pt("left"===J?nf:"right"===J?Td:nf+Ce/2,"bottom"===J?le:"top"===J?ke:ke+ge/2)),end:La.transformPoint(xa.pt(vd,pe)),fill:xa.Color.orange,height:xa.guideWidth,guideType:J,priority:10},{type:"line",
epiMorph:!0,hasFixedPosition:!0,start:La.transformPoint(xa.pt(Ec,fe)),end:La.transformPoint(xa.pt(id,Ae)),fill:xa.Color.orange,height:xa.guideWidth,guideType:J,priority:10})}}ua&&(Pc||Yd)&&hb.moveBy(xa.pt(Pc,Yd));if(Za){la=la.filter(function(G){var wa=G.guideType;G=G.priority;return"h"===wa?G===Vb:"v"===wa?G===Oc:!0});(Za=xa.cachedGuideLines.get(hb))||xa.cachedGuideLines.set(hb,Za=[]);for(ua=0;ua<la.length;ua++)ld=void 0,Za[ua]?ld=Object.assign(Za[ua],la[ua]):(ld=xa.morph(la[ua]),Za.push(ld)),ld.owner||
ib.addMorph(ld);Za.slice(ua).forEach(function(G){return G.remove()});xa.fun.debounceNamed(hb.id+"-drag-guides-cleanup",1300,function(){var G=xa.cachedGuideLines.get(hb);G&&G.forEach(function(wa){return wa.remove()})})()}}}function O(hb,Za,ua,J,la,La){ua=void 0===ua?!0:ua;J=void 0===J?!0:J;la=void 0===la?5:la;La=void 0===La?100:La;if(ua||J){var ib=hb.owner,Ib=ib.world(),hc=ib.getGlobalTransform(),Vb=hb.owner.submorphs.filter(function(fe){return fe!==hb&&!fe.isEpiMorph&&fe.visible&&fe.reactsToPointer});
ib=(Za.includes("left")||Za.includes("right")?"x":"")+(Za.includes("top")||Za.includes("bottom")?"y":"");var Oc=xa.findMorphsWithSimilarWidthOrHeight(hb,ib,Vb,la,La),Pc=-Infinity,Yd=-Infinity,r=0,Rd=0,ke=0,le=0,ge=0,vd=0;ib=[];hc.e-=Ib.scroll.x;hc.f-=Ib.scroll.y;if(Oc){Oc=$jscomp.makeIterator(Oc);for(var Td=Oc.next();!Td.done;Td=Oc.next()){Td=$jscomp.makeIterator(Td.value);Td.next();var Ce=Td.next().value;Td=Ce.similarIn;var Ae=Ce.delta,ld=Ce.refPointsA,nf=Ce.refPointsB;Ce=la-Ae+(La-Ce.minDist);"width"===
Td?Pc<Ce&&(Pc=Ce,Za.includes("left")&&(Rd=-Ae),Za.includes("right")&&(r=Ae)):Yd<Ce&&(Yd=Ce,Za.includes("top")&&(ke=-Ae),Za.includes("bottom")&&(le=Ae));Ae={type:"line",epiMorph:!0,hasFixedPosition:!0,height:xa.guideWidth,fill:xa.guideColor,guideType:Td,priority:Ce,start:hc.transformPoint("width"===Td?xa.pt(ld.left,ld.top+ld.height/2):xa.pt(ld.left+ld.width/2,ld.top)),end:hc.transformPoint("width"===Td?xa.pt(ld.right,ld.top+ld.height/2):xa.pt(ld.left+ld.width/2,ld.bottom))};Td=Object.assign({},Ae,
{start:hc.transformPoint("width"===Td?xa.pt(nf.left,nf.top+nf.height/2):xa.pt(nf.left+nf.width/2,nf.top)),end:hc.transformPoint("width"===Td?xa.pt(nf.right,nf.top+nf.height/2):xa.pt(nf.left+nf.width/2,nf.bottom))});ib.push(Ae,Td)}}if(La=xa.findAlignedMorphs(hb,Vb,la,La,Za,void 0))for(La=$jscomp.makeIterator(La),Vb=La.next();!Vb.done;Vb=La.next()){Vb=$jscomp.makeIterator(Vb.value);Vb.next();Oc=Vb.next().value;Vb=Oc.vertical;Oc=$jscomp.makeIterator(Oc.horizontal);for(Td=Oc.next();!Td.done;Td=Oc.next()){Td=
Td.value;nf=Td.edgeAVal;var gc=Td.refPointsA,id=Td.refPointsB;Ae=Td.edgeBVal;ld=Math.ceil(la-Td.delta);Ce=Math.min(gc.top,id.top);gc=Math.max(gc.bottom,id.bottom);Td.maxDist>la&&(ld-=la/2);ge<ld&&(ge=ld,Za.includes("left")&&(Rd=-(Ae-nf)),Za.includes("right")&&(r=+(Ae-nf)));ib.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:xa.guideWidth,start:hc.transformPoint(xa.pt(Ae,Ce)),end:hc.transformPoint(xa.pt(Ae,gc)),fill:xa.guideColor,guideType:"h",priority:ld})}Vb=$jscomp.makeIterator(Vb);for(Oc=
Vb.next();!Oc.done;Oc=Vb.next())Oc=Oc.value,Td=Oc.edgeAVal,Ce=Oc.refPointsA,gc=Oc.refPointsB,nf=Oc.edgeBVal,Ae=Math.ceil(la-Oc.delta),ld=Math.min(Ce.left,gc.left),Ce=Math.max(Ce.right,gc.right),Oc.maxDist>la&&(Ae-=la/2),vd<Ae&&Math.abs(nf-Td)<=la&&(vd=Ae,Za.includes("top")&&(ke=nf-Td),Za.includes("bottom")&&(le=nf-Td)),ib.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:xa.guideWidth,start:hc.transformPoint(xa.pt(ld,nf)),end:hc.transformPoint(xa.pt(Ce,nf)),fill:xa.guideColor,guideType:"v",
priority:Ae})}J&&(Rd&&(hb.left+=Rd,hb.right-=Rd),ke&&(hb.top+=ke,hb.bottom-=ke),r&&(hb.width+=r),le&&(hb.height+=le));if(ua){ib=ib.filter(function(fe){var Ec=fe.guideType;fe=fe.priority;return"width"===Ec?fe===Pc:"height"===Ec?fe===Yd:"v"===Ec?fe===vd:"h"===Ec?fe===ge:!1});(Za=xa.cachedGuideLines.get(hb))||xa.cachedGuideLines.set(hb,Za=[]);for(ua=0;ua<ib.length;ua++)J=void 0,Za[ua]?J=Object.assign(Za[ua],ib[ua]):(J=xa.morph(ib[ua]),Za.push(J)),J.owner||Ib.addMorph(J);Za.slice(ua).forEach(function(fe){return fe.remove()});
xa.fun.debounceNamed(hb.id+"-drag-guides-cleanup",1300,function(){var fe=xa.cachedGuideLines.get(hb);fe&&fe.forEach(function(Ec){return Ec.remove()})})()}}}function U(hb,Za){Za=void 0===Za?!1:Za;var ua=ea.MorphicEnv.default().world;if(null===hb||void 0===hb)hb=String(hb);if(hb.isMorph)return ea.showRect(hb.world(),hb.globalBounds().translatedBy(ua.scroll.negated()),Za);if(hb.isPoint)return ea.showRect(ua,new ea.Rectangle(hb.x-5,hb.y-5,10,10));if(hb.isLine)return ea.showLine(ua,hb);if(hb.isRectangle)return ea.showRect(ua,
hb);if("undefined"!==typeof ea.Element&&hb instanceof ea.Element)return ea.showRect(ua,ea.Rectangle.fromElement(hb));if("number"===typeof hb||"symbol"===typeof hb||"boolean"===typeof hb||"undefined"!==typeof ea.Node&&hb instanceof ea.Node||hb instanceof RegExp)hb=String(hb);"object"===typeof hb&&(hb=ea.obj.inspect(hb,{maxDepth:1}));return"string"===typeof hb&&1===arguments.length?ua.setStatusMessage(hb):ua.setStatusMessage(ea.string.formatFromArray(Array.from(arguments)))}function ra(hb,Za,ua){ua=
void 0===ua?3E3:ua;var J,la,La,ib,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress){if(!(hb&&hb.world()&&Za&&Za.world()))return hc.return(null);J=hb.owner.worldPoint(hb.center);la=Za.owner.worldPoint(Za.center);La=J.lineTo(la).sampleN(2)[1];ib={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:ea.Color.red,fill:ea.Color.red,cx:5,cy:5,r:4}]};Ib=$world.addMorph(new ea.Path({position:La,
renderOnGPU:!0,vertices:[ea.pt(0),ea.pt(0)],borderWidth:2,startMarker:ib,endMarker:ib,borderColor:ea.Color.red}));return hc.yield(Ib.whenRendered(),2)}if(3!=hc.nextAddress)return hc.yield(Ib.animate({opacity:1,customTween:function(Vb){var Oc=Ib.center;Ib.vertices=[ea.pt(0).interpolate(Vb,J.subPt(La)),ea.pt(0).interpolate(Vb,la.subPt(La))];Ib.center=Oc},duration:400}),3);ua&&setTimeout(function(){return Ib.fadeOut()},ua);return hc.return(Ib)})}za({a:Ta,e:ra,r:sa,s:U});var xa=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
xa.removeSnapToGuidesOf=sa;xa.showAndSnapToGuides=Ta;xa.showAndSnapToResizeGuides=O;xa.computeRefPoints=function(hb){var Za=hb.x,ua=hb.y,J=hb.width;hb=hb.height;return{left:Za,top:ua,hCenter:Za+J/2,vCenter:ua+hb/2,right:Za+J,bottom:ua+hb,width:J,height:hb}};xa.findEdgesInAlignment=function(hb,Za,ua,J,la,La,ib,Ib,hc,Vb){ua=void 0===ua?15:ua;La=void 0===La?0:La;ib=void 0===ib?0:ib;Ib=void 0===Ib?0:Ib;hc=void 0===hc?0:hc;Vb=void 0===Vb?0:Vb;for(var Oc=[],Pc=[],Yd=0;Yd<xa.edges.length;Yd++){var r=$jscomp.makeIterator(xa.edges[Yd]),
Rd=r.next().value,ke=r.next().value;r=r.next().value;var le=hb[ke],ge=Za[r],vd=Math.max(le,ge)-Math.min(le,ge);vd>ua||!(J&&!J.includes(ke)||la&&!la.includes(r))&&("vertical"===Rd?Oc:Pc).push({delta:vd,edgeA:ke,edgeB:r,edgeAVal:le,edgeBVal:ge,refPointsA:hb,refPointsB:Za,distLeft:La,distTop:ib,distRight:Ib,distBottom:hc,maxDist:Vb})}return Oc.length||Pc.length?{vertical:Oc,horizontal:Pc}:null};xa.findAlignedMorphs=function(hb,Za,ua,J,la,La){ua=void 0===ua?15:ua;J=void 0===J?Infinity:J;for(var ib,Ib=
xa.computeRefPoints(hb.bounds()),hc=0;hc<Za.length;hc++){var Vb=Za[hc];if(Vb!==hb){var Oc=xa.computeRefPoints(Vb.bounds()),Pc=Math.max(0,Ib.left-Oc.right),Yd=Math.max(0,Oc.left-Ib.right),r=Math.max(0,Ib.top-Oc.bottom),Rd=Math.max(0,Oc.top-Ib.bottom);Math.max(Rd,r,Yd,Pc)>J||!(Oc=xa.findEdgesInAlignment(Ib,Oc,ua,la,La,Pc,r,Yd,Rd,Math.max(Rd,r,Yd,Pc)))||(ib||(ib=new Map),ib.set(Vb,Oc))}}hb=hb.owner;Za=xa.computeRefPoints(hb.innerBounds());if(ua=xa.findEdgesInAlignment(Ib,Za,ua))ib||(ib=new Map),ib.set(hb,
ua);return ib};xa.findMorphsWithSimilarWidthOrHeight=function(hb,Za,ua,J,la){J=void 0===J?15:J;la=void 0===la?Infinity:la;for(var La,ib=xa.computeRefPoints(hb.bounds()),Ib=0;Ib<ua.length;Ib++){var hc=ua[Ib];if(hc!==hb){var Vb=xa.computeRefPoints(hc.bounds()),Oc=Math.max(0,ib.left-Vb.right),Pc=Math.max(0,Vb.left-ib.right),Yd=Math.max(0,ib.top-Vb.bottom),r=Math.max(0,Vb.top-ib.bottom),Rd=Math.min(r,Yd,Pc,Oc),ke=Math.max(r,Yd,Pc,Oc);if(!(Math.max(r,Yd,Pc,Oc)>la)){Pc=ib;Oc=Pc.width;Pc=Pc.height;r=Vb;
Yd=r.width;r=r.height;var le=Yd-Oc,ge=r-Pc;("x"===Za||"xy"===Za)&&Math.abs(le)<=J&&(La||(La=new Map),La.set(hc,{similarIn:"width",minDist:Rd,maxDist:ke,refPointsA:ib,refPointsB:Vb,valA:Oc,valB:Yd,delta:le}));("y"===Za||"xy"===Za)&&Math.abs(ge)<=J&&(La||(La=new Map),La.set(hc,{similarIn:"height",minDist:Rd,maxDist:ke,refPointsA:ib,refPointsB:Vb,valA:Pc,valB:r,delta:ge}))}}}return La};xa.closest=function(hb,Za,ua,J,la,La,ib,Ib){Ib=void 0===Ib?!0:Ib;var hc=J[hb],Vb=la[hb],Oc=La[hb];Za=ib[hb];for(var Pc,
Yd,r,Rd,ke=0;ke<la.length;ke++)hb===ke||hc<la[ke]||Pc&&la[Pc.index]>=la[ke]||Ib&&ib[hb]<La[ke]||La[hb]>ib[ke]||(Pc={index:ke,dist:hc-la[ke],refPointsA:ua[hb],refPointsB:ua[ke]});for(hc=0;hc<J.length;hc++)hb===hc||Vb>J[hc]||Yd&&J[Yd.index]<=J[hc]||Ib&&ib[hb]<La[hc]||La[hb]>ib[hc]||(Yd={index:hc,dist:J[hc]-Vb,refPointsA:ua[hb],refPointsB:ua[hc]});for(Vb=0;Vb<ib.length;Vb++)hb===Vb||Oc<ib[Vb]||r&&ib[r.index]>=ib[Vb]||Ib&&J[hb]>la[Vb]||la[hb]<J[Vb]||(r={index:Vb,dist:Oc-ib[Vb],refPointsA:ua[hb],refPointsB:ua[Vb]});
for(ib=0;ib<La.length;ib++)hb===ib||Za>La[ib]||Rd&&La[Rd.index]<=La[ib]||Ib&&J[hb]>la[ib]||la[hb]<J[ib]||(Rd={index:ib,dist:La[ib]-Za,refPointsA:ua[hb],refPointsB:ua[ib]});return{l:Pc,r:Yd,t:r,b:Rd}};xa.computeClosestMorphs=function(hb){for(var Za=[],ua=[],J=[],la=[],La=[],ib=[],Ib=0;Ib<hb.length;Ib++){var hc=xa.computeRefPoints(hb[Ib].bounds());La.push(hc);var Vb=hc.right,Oc=hc.top,Pc=hc.bottom;Za.push(hc.left);ua.push(Vb);J.push(Oc);la.push(Pc)}for(Ib=0;Ib<hb.length;Ib++)ib.push(xa.closest(Ib,hb,
La,Za,ua,J,la));return ib};xa.fun=cb;xa.pt=mb;xa.Color=Pb;xa.morph=tb;xa.cachedGuideLines=new WeakMap;xa.guideWidth=1;xa.guideColor=xa.Color.orange.lighter();xa.removeSnapToGuidesOf=sa;xa.removeSnapToGuidesOf=sa;xa.showAndSnapToGuides=Ta;xa.showAndSnapToGuides=Ta;xa.showAndSnapToResizeGuides=O;xa.showAndSnapToResizeGuides=O;xa.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var pa=lively.FreezerRuntime.recorderFor("lively.collab/index.js");pa.CommentGroupMorph=void 0;pa.CommentGroupMorph=void 0;pa.CommentMorph=void 0;pa.CommentMorph=void 0;pa.CommentIndicator=void 0;pa.CommentIndicator=void 0;pa.CommentBrowser=void 0;pa.CommentBrowser=void 0;pa.Comment=
void 0;pa.Comment=void 0;pa.Badge=void 0;pa.Badge=void 0;var ea=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");ea.show=U;ea.showRect=function(hb,Za,ua){var J=ea.BoundsMarker.highlightBounds(Za);return ua?ea.showInLoop(hb,J,Za):ea.showThenHide(hb,J)};ea.showInLoop=function(hb,Za,ua){var J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:return ea.showThenHide(hb,Za,!1),la.yield(ea.promise.delay(300),2);case 2:J=!1,ea.once(hb,"onMouseDown",
function(){return J=!0}),ea.once(hb,"hideMarkers",function(){return J=!0});case 3:if(J){la.jumpTo(4);break}return la.yield(Za.retract(ua),3);case 4:Za.fadeOut(2E3),la.jumpToEnd()}})};ea.showThenHide=function(hb,Za,ua){ua=void 0===ua?3:ua;if(hb){var J=Array.isArray(Za)?Za:[Za];J.forEach(function(la){return hb.addMorph(la)});ua&&setTimeout(function(){return J.forEach(function(la){return la.fadeOut(2E3)})},1E3*ua);return Za}};ea.showLine=function(hb,Za,ua){ua=void 0===ua?3E3:ua;var J=Za.start;Za=Za.end.subPt(J);
var la=hb.addMorph({position:J,rotation:Za.theta(),border:{width:1,color:ea.Color.red},width:Za.fastR(),height:0});ua&&setTimeout(function(){return la.fadeOut()},ua);return la};ea.showConnector=ra;ea.obj=Fc;ea.promise=vc;ea.string=Qc;ea.pt=mb;ea.Color=Pb;ea.Rectangle=mc;ea.rect=ic;ea.morph=tb;ea.easings=zc;ea.Path=Dc;ea.Icon=Gd;ea.Morph=Hd;ea.MorphicEnv=Zd;ea.connect=xc;ea.once=od;ea.disconnect=qb;ea.show=U;ea.show=U;(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),
ua=Za.hasOwnProperty("BoundsMarker")&&"function"===typeof Za.BoundsMarker?Za.BoundsMarker:Za.BoundsMarker=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(){kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:ea.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",
get:function(){return!0}},{key:"markerLength",value:function(J){J=J.insetBy(-2);J=Math.min(J.width,J.height);return Math.max(4,Math.floor(10>J/10?J/2-5:J/10))}},{key:"createMarkerEdge",value:function(){return ea.morph({fill:ea.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var J=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),la=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),La=this.topRightH||(this.topRightH=
this.addMorph(this.createMarkerEdge())),ib=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Ib=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),hc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Vb=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Oc=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[J,la,La,ib,Ib,hc,Vb,Oc]}},{key:"alignWithMorph",value:function(J){return this.alignWithBounds(J.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(J){this.alignWithRect(J.insetBy(-20));return this.alignWithRect(J,!0)}},{key:"alignWithRect",value:function(J,la){var La=this.ensureMarkerCorners(),ib=this.markerLength(J),Ib=[J.topLeft().addXY(0,0).extent(ea.pt(ib,5)),J.topLeft().addXY(0,0).extent(ea.pt(5,ib)),J.topRight().addXY(-ib,0).extent(ea.pt(ib,5)),J.topRight().addXY(-5,0).extent(ea.pt(5,ib)),J.bottomRight().addXY(-5,-ib).extent(ea.pt(5,ib)),J.bottomRight().addXY(-ib,-5).extent(ea.pt(ib,5)),J.bottomLeft().addXY(0,
-5).extent(ea.pt(ib,5)),J.bottomLeft().addXY(0,-ib).extent(ea.pt(5,ib))];La.forEach(function(hc,Vb){return hc.setBounds(Ib[Vb])});la&&(this.adjustOrigin(J.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(J){var la=this,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return ib.yield(la.animate({scale:Math.max(30/J.width,1.05)}),2);La=la.center;return ib.yield(la.animate({center:La,
scale:1,duration:300,easing:ea.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(J){return(new this).alignWithMorph(J)}},{key:"highlightBounds",value:function(J){return(new this).alignWithBounds(J)}}],Za,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2323,end:6E3})})(ea.Morph);pa=za("S",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ua=Za.hasOwnProperty("StatusMessage")&&"function"===typeof Za.StatusMessage?Za.StatusMessage:Za.StatusMessage=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"relayout",value:function(){this.title=ea.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(J,la){this.message=J;this.color=la}},{key:"slideTo",value:function(J){var la=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la.sliding=la.animate({position:J,duration:500}),La.yield(la.sliding,2);la.sliding=!1;La.jumpToEnd()})}},{key:"expand",value:function(){var J=this,la,La,ib,Ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==
hc.nextAddress)return J.expandable?J.sliding?hc.yield(J.sliding,2):hc.jumpTo(2):hc.return();la=J.world();if(!la||J.isMaximized)return hc.return();J.isMaximized=!0;J.stayOpen=!0;La=J.getSubmorphNamed("message text");La.lineWrapping=!1;Object.assign(La,{clipMode:"auto",fixedWidth:!0,selectable:!0});J.expandedContent&&(La.value=J.expandedContent);La.fit();ib=La.textBounds().extent();Ib=la.visibleBounds();ib.y>Ib.extent().y&&(ib.y=Ib.extent().y-20);ib.x>Ib.extent().x&&(ib.x=Ib.extent().x-20);ib=J.extent.maxPt(ib);
J.animate({extent:ib,center:Ib.center(),duration:200});J.relayout();J.focus();hc.jumpToEnd()})}},{key:"fit",value:function(){var J=this.getSubmorphNamed("message text");J&&(this.extent=ea.pt(100,35).maxPt(J.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var J=this.getSubmorphNamed("message text");J&&J.focus()}},{key:"onMouseUp",value:function(J){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:ea.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(J){this.setProperty("message",J);var la=this.getSubmorphNamed("message text");if(la){la.value=J;var La=la.documentEndPosition;La.row>this.maxLines&&(la.replace({start:{row:this.maxLines,
column:0},end:La},"...\n"),this.expandedContent||(this.expandedContent=J));La=la.documentEndPosition;0!==La.column&&la.insertText("\n",La)}}},title:{isStyleProp:!0,derived:!0,set:function(J){this.getSubmorphNamed("message title").value=J},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(J){this.get("message icon").fontColor=J;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=J)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:ea.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];ea.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");ea.connect(this,"extent",this,"relayout")}}}}}],Za,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(ea.Morph));ea.StatusMessage=pa;ea.StatusMessage=pa;ea.StatusMessage=pa;var bb=za("b",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),ua=Za.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Za.StatusMessageForMorph?Za.StatusMessageForMorph:Za.StatusMessageForMorph=function(J){J&&J[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"alignAtBottomOf",value:function(J){var la=this.world();la&&(this.bringToFront(),this.fit(),this.width=J.bounds().width,this.relayout(),J.world()&&(this.position=J.owner.worldPoint(J.bounds().bottomLeft())),J=la.visibleBounds(),J=this.bounds().top()+this.height-J.bottom(),0<J&&this.moveBy(ea.pt(0,-J)))}},{key:"onMouseUp",value:function(J){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var J=this.getProperty("targetMorph");return J&&$world.getMorphWithId(J)},set:function(J){this.setProperty("targetMorph",J?J.id:null);this.alignAtBottomOf(J)}},expandable:{after:["submorphs"],set:function(J){this.setProperty("expandable",J);if(J){var la=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});ea.connect(la,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),ea.disconnect(la,"fire",this,"expand"))}}}}}],Za,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(ea.StatusMessage));ea.StatusMessageForMorph=
bb;ea.StatusMessageForMorph=bb;ea.StatusMessageForMorph=bb;ea.showConnector=ra;ea.showConnector=ra;var Aa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Aa.Morph=Hd;Aa.Label=Uc;Aa.HorizontalLayout=tc;Aa.Path=Dc;Aa.Text=cd;Aa.GridLayout=td;Aa.morph=tb;Aa.Icon=Gd;Aa.createMorphSnapshot=nb;Aa.Color=Pb;Aa.pt=mb;Aa.rect=ic;Aa.Rectangle=mc;Aa.LinearGradient=cc;Aa.obj=Fc;Aa.PropertyPath=wc;Aa.promise=vc;Aa.properties=dc;Aa.num=Nc;Aa.arr=$a;Aa.connect=xc;Aa.signal=Xa;Aa.disconnect=qb;Aa.disconnectAll=
Gb;Aa.once=od;Aa.showAndSnapToGuides=Ta;Aa.showAndSnapToResizeGuides=O;Aa.removeSnapToGuidesOf=sa;Aa.CommentBrowser=void 0;Aa.show=U;Aa.haloBlue=Aa.Color.rgb(23,160,251);Aa.componentAccent=Aa.Color.magenta;Aa.derivedAccent=Aa.Color.purple;var Rb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("Halo")&&"function"===typeof Za.Halo?Za.Halo:Za.Halo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return kc(ua,hb,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(J){J.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var J=this;setTimeout(function(){J.target.owner||J.remove()})}},{key:"initLayout",
value:function(){var J=this.layout=new Aa.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,
null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});J.col(1).row(7).group.align="center";J.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),
this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Aa.morph({name:"border-box",halosEnabled:!1,fill:Aa.Color.transparent,borderColor:this.target.isComponent?Aa.componentAccent:Aa.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",
set:function(J){this.state||(this.state={});this.state.pointerId=J}},{key:"prepareTarget",value:function(J){if(!Aa.obj.isArray(J))return J;if(1>=J.length)return J[0];J=J[0].world().addMorph(new Aa.MultiSelectionTarget({selectedMorphs:J}));J.alignWithSelection();J.modifiesSelectedMorphs=!0;return J}},{key:"refocus",value:function(J){this.target=J;this.alignWithTarget()}},{key:"alignWithTarget",value:function(J){var la=this;if((!J||["extent","position","scale","rotation"].includes(J.prop))&&!this.active&&
this.target){J=this.target.world()||$world;var La=this.maskBounds,ib=this.target.globalBounds(),Ib=ib.insetBy(-36).intersection(La);La=ib.intersection(La);this.layout&&this.layout.disable();this.setBounds(Ib.translatedBy(J.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,La));this.state.activeButton?(this.buttonControls.forEach(function(hc){return hc.visible=!1}),this.ensureResizeHandles().forEach(function(hc){return hc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):
(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(hc){return hc.visible=!0}),this.buttonControls.filter(function(hc){return la.activeItems.includes("*")?!0:la.activeItems.includes(hc.name)}).forEach(function(hc){hc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(hc){return hc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},
{key:"detachFromTarget",value:function(){var J=this.target;J&&(Aa.disconnect(J,"onChange",this,"alignWithTarget"),Aa.disconnect(J,"onOwnerChanged",this,"removeIfDetached"),J instanceof Aa.MultiSelectionTarget?(J.modifiesSelectedMorphs=!1,J.remove()):"function"===typeof J.detachedHalo&&J.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();kc._get(Object.getPrototypeOf(ua.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return Aa.HaloPropertyDisplay.for(this)}},
{key:"nameHalo",value:function(){return Aa.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Aa.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Aa.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Aa.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Aa.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Aa.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Aa.EditHaloItem.for(this)}},{key:"rotateHalo",
value:function(){return Aa.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Aa.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Aa.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Aa.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(J){return J.isHaloItem&&!J.isResizeHandle})}},{key:"addMorphToSelection",value:function(J){var la=this,La,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==
Ib.nextAddress){La=la.world();ib=la.target.isMorphSelection?la.target.selectedMorphs:[la.target];if(ib.includes(J))return Ib.return();la.remove();return Ib.yield(La.showHaloForSelection([].concat($jscomp.arrayFromIterable(ib),[J]),la.state.pointerId),2)}return Ib.return(Ib.yieldResult)})}},{key:"removeMorphFromSelection",value:function(J){var la=this,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress){La=la.world();la.remove();if(!la.target.isMorphSelection)return ib.jumpTo(0);
Aa.arr.remove(la.target.selectedMorphs,J);return ib.yield(La.showHaloForSelection(la.target.selectedMorphs,la.state.pointerId),3)}return ib.return(ib.yieldResult)})}},{key:"isAlreadySelected",value:function(J){return this.target==J||this.target.isMorphSelection&&this.target.selectsMorph(J)}},{key:"updateBoundsFor",value:function(J,la,La,ib,Ib){var hc={topLeft:Aa.rect(-1,-1,1,1),topCenter:la?Aa.rect(1,-1,0,1):Aa.rect(0,-1,0,1),topRight:Aa.rect(0,-1,1,1),rightCenter:la?Aa.rect(0,1,1,1):Aa.rect(0,0,
1,0),bottomRight:Aa.rect(0,0,1,1),bottomCenter:la?Aa.rect(1,0,0,1):Aa.rect(0,0,0,1),bottomLeft:Aa.rect(-1,0,1,1),leftCenter:la?Aa.rect(-1,1,1,0):Aa.rect(-1,0,1,0)}[J];Ib=hc.x;var Vb=hc.y,Oc=hc.width;hc=hc.height;La=la?this.proportionalDelta(J,La,ib):La;J=Aa.rect(La.x*Ib,La.y*Vb,La.x*Oc,La.y*hc);this.active=!0;this.target.setBounds(ib.insetByRect(J));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Pc){if(Pc.activeSideBars.includes("Styling Palette"))Pc.stylingPalette.onHierarchyChange()})}},
{key:"proportionalDelta",value:function(J,la,La){var ib=La.width,Ib=La.height;La={topLeft:Aa.pt(-1,-1),topCenter:Aa.pt(0,-1),topRight:Aa.pt(1,-1),leftCenter:Aa.pt(-1,0),rightCenter:Aa.pt(1,0),bottomLeft:Aa.pt(-1,1),bottomCenter:Aa.pt(0,1),bottomRight:Aa.pt(1,1)};var hc=ib/Math.max(ib,Ib),Vb=Ib/Math.max(Ib,ib);ib={topLeft:Aa.pt(-hc,-Vb),topCenter:Aa.pt(1/(2*Ib/ib),-1),topRight:Aa.pt(hc,-Vb),leftCenter:Aa.pt(-1,Ib/(2*ib)),rightCenter:Aa.pt(1,Ib/(3*ib)),bottomLeft:Aa.pt(-hc,Vb),bottomCenter:Aa.pt(1/
(2*Ib/ib),1),bottomRight:Aa.pt(hc,Vb)};La=La[J];return ib[J].scaleBy(La.dotProduct(la)/La.dotProduct(La))}},{key:"ensureResizeHandles",value:function(){return Aa.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(J){J=J.valueForPropertyDisplay();"undefined"!==typeof J?this.propertyDisplay.displayProperty(J):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(J,la){if(!Aa.rect(0).sides.includes(la)){var La=this.getSubmorphNamed("diagonal");if(J){J=this.target.globalBounds();
var ib=J.width,Ib=J.height;J=this.localize(Aa.pt(J.x,J.y)).extent(Aa.pt(ib,Ib)).scaleRectTo(this.innerBounds());ib={topLeft:[Aa.pt(ib,Ib),Aa.pt(0,0)],topRight:[Aa.pt(0,Ib),Aa.pt(ib,0)],bottomRight:[Aa.pt(0,0),Aa.pt(ib,Ib)],bottomLeft:[Aa.pt(ib,0),Aa.pt(0,Ib)]};La?La.setBounds(J):(La=$jscomp.makeIterator(ib[la]),la=La.next().value,La=La.next().value,ib=new Aa.LinearGradient({stops:[{offset:0,color:Aa.Color.orange.withA(0)},{offset:.2,color:Aa.Color.orange},{offset:.8,color:Aa.Color.orange},{offset:1,
color:Aa.Color.orange.withA(0)}]}),La=this.addMorphBack(new Aa.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:J,borderColor:ib,vertices:[la,La]})),La.setBounds(J),La.animate({opacity:1,duration:500}))}else La&&La.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(J,la){var La=this.getSubmorphNamed("rotationIndicator");J&&la?(J=this.getSubmorphNamed("origin").center,La=La||this.addMorphBack(new Aa.Path({name:"rotationIndicator",borderColor:Aa.haloBlue,borderWidth:1,
vertices:[]})),La.setBounds(la.bounds().union(this.innerBounds())),La.vertices=[La.localizePointFrom(J,this),La.localizePointFrom(la.center,this)]):La&&La.remove()}},{key:"toggleMorphHighlighter",value:function(J,la,La){La=void 0===La?!1:La;if(la)if(la.onHaloGrabover)la.onHaloGrabover(J);else La=Aa.MorphHighlighter.for(this,la,La),J&&la&&la!=this.world()?La&&La.show(la):La&&La.deactivate()}},{key:"onMouseDown",value:function(J){var la=this,La=J.state.clickedOnMorph;if(!J.isCommandKey()&&La==this.borderBox){if(2==
J.state.clickCount&&this.target.isText){var ib=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(J.positionIn(this.target));var Ib=this.world(),hc=this.target,Vb=this.topBar,Oc=function(Yd){Vb.stylingPalette&&Vb.stylingPalette.fullContainsWorldPoint(Ib.firstHand.position)?(hc.whenRendered().then(function(){Aa.once(hc,"onBlur",Oc)}),Aa.once(hc,"onBlur",Oc)):(Vb.setEditMode("Halo",!0),hc.readOnly=ib,hc.collapseSelection(),Vb.showHaloFor(hc))};
this.target.whenRendered().then(function(){Aa.once(hc,"onBlur",Oc)});Vb.setEditMode("Hand",!0);this.remove();return}return Aa.promise.delay(200).then(function(){2!=J.state.clickCount&&la.remove()})}if(J.isShiftDown()&&J.isCommandKey())La=this.target.isMorphSelection?this.target.morphBeneath(J.position):this.morphBeneath(J.position),this.isAlreadySelected(La)?this.removeMorphFromSelection(La):this.addMorphToSelection(La);else{if(La==this.borderBox&&J.isCommandKey()){var Pc=J.world.morphsContainingPoint(J.position).filter(function(Yd){return Yd.halosEnabled});
(Pc=Pc.slice(Pc.indexOf(this.target)+1)[0]||Pc[0]||J.world)&&J.world.showHaloFor(Pc,J.domEvt.pointerId);this.remove()}La==this&&J.isCommandKey()&&(Pc=this.morphBeneath(J.position),J.world.showHaloFor(Pc,J.domEvt.pointerId));La==this&&Aa.promise.delay(500).then(function(){la.remove()})}}},{key:"onContextMenu",value:function(J){var la=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(La){return la.target.openMenu(La,J)}).catch(function(La){return $world.logError(La)})}},{key:"onKeyUp",
value:function(J){this.changingName||this.buttonControls.map(function(la){return la.onKeyUp(J)})}},{key:"getMesh",value:function(J,la){var La=J.x;J=J.y;la=void 0===la?Aa.pt(0,0):la;var ib=this.world().visibleBounds(),Ib=ib.height;ib=ib.width;var hc={borderStyle:"dotted",borderWidth:2,borderColor:Aa.Color.orange};hc=this.get("mesh")||this.addMorph(new Aa.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Aa.pt(ib,Ib),fill:null,submorphs:[new Aa.Path(Object.assign({name:"vertical"},hc)),new Aa.Path(Object.assign({name:"horizontal"},
hc))]}));hc.globalPosition=la;hc.getSubmorphNamed("vertical").vertices=[Aa.pt(La,0).subPt(la),Aa.pt(La,Ib).subPt(la)];hc.getSubmorphNamed("horizontal").vertices=[Aa.pt(0,J).subPt(la),Aa.pt(ib,J).subPt(la)];return hc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Aa.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},acceptsDrops:{defaultValue:!1},
maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(J){this.setProperty("maskBounds",J);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(J){this.setProperty("activeItems",J);this.buttonControls.forEach(function(la){return la.visible=J.includes(la.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(Aa.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},target:{get:function(){return this.state?this.state.target:null},set:function(J){this.state||(this.state={});var la=!!this.state.target;this.detachFromTarget();J=this.prepareTarget(J);this.state.target=J;la&&this.alignWithTarget();Aa.connect(J,"onChange",this,"alignWithTarget");Aa.connect(J,"onOwnerChanged",this,"removeIfDetached")}}}}}],
Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19579})}(Aa.Morph);Rb=Aa.Halo;var Gc=za("H",Rb);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Za.HaloPropertyDisplay?Za.HaloPropertyDisplay:
Za.HaloPropertyDisplay=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(J){var la=this.halo.state.activeButton;J=String(J);this.visible=!0;this.textString=J;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(la.bounds())&&
(this.position=Aa.pt(la.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Aa.pt(25,0)}},{key:"for",value:function(J){return J.getSubmorphNamed(this.morphName)||J.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},
fill:{defaultValue:Aa.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Aa.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Aa.Color.white},position:{defaultValue:this.defaultPosition}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:19769,end:21107})})(Aa.Label);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Za.MultiSelectionTarget?Za.MultiSelectionTarget:Za.MultiSelectionTarget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},
{key:"selectsMorph",value:function(J){return this.selectedMorphs.includes(J)}},{key:"alignWithSelection",value:function(){var J=this.selectedMorphs.map(function(la){return la.globalBounds()}).reduce(function(la,La){return la.union(La)});this.setBounds(J)}},{key:"onGrab",value:function(J){this.grabbingHand=J.hand;this.selectionGrabbed=!0;J.hand.grab(this.selectedMorphs);Aa.once(J.hand,"dropMorphsOn",this,"onGrabEnd");Aa.connect(J.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=
!1;Aa.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(J){var la=J.value.subPt(J.prevValue);this.selectedMorphs.forEach(function(La){return La.resizeBy(la)})}},{key:"updatePosition",value:function(J){if(!this.selectionGrabbed){var la=J.value.subPt(J.prevValue);this.selectedMorphs.forEach(function(La){return La.moveBy(la)})}}},{key:"updateRotation",value:function(J){var la=this,La=J.value-J.prevValue;this.selectedMorphs.forEach(function(ib){var Ib=ib.origin;ib.adjustOrigin(ib.localize(la.worldPoint(Aa.pt(0,
0))));ib.rotation+=La;ib.adjustOrigin(Ib)})}},{key:"updateScale",value:function(J){var la=this,La=J.value-J.prevValue;this.selectedMorphs.forEach(function(ib){var Ib=ib.origin;ib.adjustOrigin(ib.localize(la.worldPoint(Aa.pt(0,0))));ib.scale+=La;ib.adjustOrigin(Ib)})}},{key:"onChange",value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),"onChange",this).call(this,J);if(this.modifiesSelectedMorphs){switch(J.prop){case "extent":this.updateExtent(J);break;case "scale":this.updateScale(J);break;
case "position":this.updatePosition(J);break;case "rotation":this.updateRotation(J)}return J}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21175,end:23446})})(Aa.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("HaloItem")&&"function"===typeof Za.HaloItem?Za.HaloItem:Za.HaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Aa.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Aa.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},
{key:"for",value:function(J){return J.getSubmorphNamed(this.morphName)||J.addMorph(new this({halo:J,name:this.morphName}))}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23610,end:24328})})(Aa.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("NameHolder")&&
"function"===typeof Za.NameHolder?Za.NameHolder:Za.NameHolder=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onHoverIn",value:function(J){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Aa.Color.orange)}},{key:"onHoverOut",value:function(J){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Aa.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(J){"Enter"==J.keyCombo?(this.accept(),this.halo.focus(),J.stop()):kc._get(Object.getPrototypeOf(ua.prototype),"onKeyDown",this).call(this,J)}},{key:"onMouseUp",value:function(){Aa.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(J){this.nameHolder.fontColor=Aa.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(J){J=this.nameHolder.textString;var la=this.target.owner;this.validName=!la||!la.getSubmorphNamed(J)||this.target.name==J;Aa.signal(this,"valid",[this.validName,J])}},{key:"update",value:function(){var J=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return J.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(J){if(!this.forceUniqueName||this.validName)this.target.name=J,Aa.signal(this,"active",[!1,this]),Aa.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},
fill:{defaultValue:Aa.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Aa.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Aa.Text({fill:Aa.Color.transparent,fontColor:Aa.Color.white,fontWeight:"bold",active:!0}));Aa.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24363,end:27001})})(Aa.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("NameHaloItem")&&"function"===typeof Za.NameHaloItem?Za.NameHaloItem:Za.NameHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,
[{key:Symbol.for("lively-instance-initialize"),value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this,J);this.initComponentLink();this.initNameHolders();this.validityIndicator=Aa.Icon.makeLabel("check",{fontColor:Aa.Color.green,fontSize:15,padding:Aa.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Aa.componentAccent:Aa.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var J=this,la=this.halo.target;if(la&&
!la.isMorphSelection&&la.master){var La=la.master.determineMaster(la),ib=La&&!!La.world(),Ib=La?la.master.getWorldUrlFor(La):"this project";la=this.addMorph(Aa.Icon.makeLabel(Ib?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Aa.Color.white,padding:Aa.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Ib}));Ib&&Aa.connect(la,"onMouseDown",function(){ib?J.showLocalMaster(La):window.open(Ib)})}}},{key:"showLocalMaster",value:function(J){var la;if(la=J.getWindow())la.activate(),
la.minimized&&(la.minimized=!1);J.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(J){return{target:J,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var J=this;this.nameHolders=this.targets().map(function(la){la=new Aa.NameHolder({halo:J.halo,highlightOnHover:la.highlightOnHover,target:la.target});Aa.connect(la,"active",J,"toggleActive");
Aa.connect(la,"valid",J,"toggleNameValid");return la});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Aa.arr.interpose(this.nameHolders,{extent:Aa.pt(1,28),fill:Aa.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(J){var la=$jscomp.makeIterator(J);J=la.next().value;var La=la.next().value;if(this.halo.changingName!==J){this.halo.changingName=J;if(la=this.get("master link"))la.visible=la.isLayoutable=!J;J?(this.nameHolders.forEach(function(ib){return ib!=
La&&ib.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Aa.Color.darkGray,setTimeout(function(){return La.nameHolder.selectAll()})):(this.fill=Aa.haloBlue,this.nameHolders.forEach(function(ib){return ib!=La&&ib.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(J){var la=$jscomp.makeIterator(J);J=la.next().value;la=la.next().value;(this.validName=J)?(this.conflictingMorph=null,this.borderColor=
Aa.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Aa.Color.green,Aa.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(la),this.borderColor=Aa.Color.red,this.validityIndicator.fontColor=Aa.Color.red,this.validityIndicator.nativeCursor="pointer",Aa.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Aa.arr.zip(this.targets(),this.nameHolders).map(function(la){var La=$jscomp.makeIterator(la);
la=La.next().value.target;La=La.next().value;La.target=la;La.update()});var J=this.halo.innerBounds().bottomCenter().addPt(Aa.pt(0,2));this.topCenter=Aa.pt(Math.max(J.x,30),Math.max(J.y,80))}},{key:"onMouseDown",value:function(J){var la=this,La=this.conflictingMorph;La&&(this.halo.toggleMorphHighlighter(!0,La),setTimeout(function(){return la.halo.toggleMorphHighlighter(!1,La)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Aa.haloBlue},borderColor:{defaultValue:Aa.Color.green},layout:{initialize:function(){this.layout=new Aa.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:27003,end:31470})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("CloseHaloItem")&&"function"===typeof Za.CloseHaloItem?Za.CloseHaloItem:Za.CloseHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"update",value:function(){var J=this.halo,la=J.target.owner;la.undoStart("close-halo");J.target.selectedMorphs?
J.target.selectedMorphs.forEach(function(La){return La.abandon()}):J.target.abandon();la.undoStop("close-halo");J.remove()}},{key:"onMouseDown",value:function(J){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",
this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":"Remove this morph from the world"}}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31472,end:32482})})(Aa.HaloItem);
(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("GrabHaloItem")&&"function"===typeof Za.GrabHaloItem?Za.GrabHaloItem:Za.GrabHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"adjustTarget",value:function(J,la){Aa.PropertyPath("owner.layout.autoResize").get(J)&&!J.globalBounds().insetBy(10).containsPoint(la)&&(J=J.owner);return J}},{key:"valueForPropertyDisplay",
value:function(){var J=this.hand,la=this.halo,La=this.prevDropTarget,ib=J.world(),Ib=J.findDropTarget(J.globalPosition,[la.target],function(hc){return!hc.isHaloItem&&!hc.ownerChain().some(function(Vb){return Vb.isHaloItem||!Vb.visible||0==Vb.opacity})});if(Ib)return Ib=this.adjustTarget(Ib,J.globalPosition),la.toggleMorphHighlighter(Ib&&Ib!=ib,Ib,!0),La&&La!=Ib&&la.toggleMorphHighlighter(!1,La),(this.prevDropTarget=Ib)&&Ib.name}},{key:"init",value:function(J){var la=this.halo,La=la.target.undoStart("grab-halo");
La&&La.addTarget(la.target.owner);this.hand=J;la.target.onGrab({halo:la,hand:J,isShiftDown:function(){return!1}});la.state.activeButton=this;this.opacity=.3;var ib=Aa.connect(J,"update",this,"update");Aa.once(la.target,"remove",function(){return ib.disconnect()})}},{key:"stop",value:function(J){var la=this.halo,La=this.prevDropTarget,ib=la.target.undoInProgress,Ib=J.hand.findDropTarget(J.hand.globalPosition,[la.target],function(hc){return!hc.isHaloItem&&!hc.ownerChain().some(function(Vb){return Vb.isHaloItem})});
Ib=this.adjustTarget(Ib,J.hand.globalPosition);Aa.disconnect(J.hand,"update",this,"update");Aa.MorphHighlighter.interceptDrop(la,Ib,la.target);ib.addTarget(Ib);Ib.onDrop(J);la.state.activeButton=null;la.alignWithTarget();la.toggleMorphHighlighter(!1,La);Aa.MorphHighlighter.removeHighlighters(la);la.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(J){this.init(J.hand)}},{key:"onDragEnd",value:function(J){this.stop(J)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:32484,end:35012})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("DragHaloItem")&&"function"===typeof Za.DragHaloItem?Za.DragHaloItem:Za.DragHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",
value:function(J){var la=this.halo.getSubmorphNamed("mesh");if(J)return la=this.halo.getMesh(this.halo.target.worldPoint(Aa.pt(0,0))),this.focus(),la;la&&la.remove()}},{key:"init",value:function(){var J=this.halo.target;J.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=J.position;this.targetTransform=J.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);
Aa.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(J,la,La){la=void 0===la?!1:la;La=void 0===La?!1:La;this.actualPos=J=this.actualPos.addPt(this.targetTransform.transformDirection(J));la&&(J=J.griddedBy(Aa.pt(10,10)));this.halo.target.position=J;this.updateAlignmentGuide(la);this.world().withTopBarDo(function(ib){if(ib.activeSideBars.includes("Styling Palette"))ib.stylingPalette.onHierarchyChange()});la||Aa.showAndSnapToGuides(this.halo.target,!0,La,5,500)}},{key:"onDragStart",
value:function(J){this.init()}},{key:"onDrag",value:function(J){this.update(J.state.dragDelta,J.isAltDown(),J.isCtrlDown())}},{key:"onDragEnd",value:function(J){this.stop()}},{key:"onKeyUp",value:function(J){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35014,end:37012})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("InspectHaloItem")&&"function"===typeof Za.InspectHaloItem?Za.InspectHaloItem:Za.InspectHaloItem=function(J){J&&
J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){var la=this;(function(){var La,ib,Ib,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vb){if(1==Vb.nextAddress)return Vb.yield(System.import("lively.ide/js/inspector.js"),2);La=Vb.yieldResult;ib=La.default;(Ib=la.world().getSubmorphsByStyleClassName("Inspector").find(function(Oc){return Oc.targetObject==la.halo.target}))&&
(hc=Ib.getWindow())?(hc.minimized=!1,hc.activate(),hc.animate({center:la.world().visibleBounds().center(),duration:200})):ib.openInWindow({targetObject:la.halo.target});la.halo.remove();Vb.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37014,end:37931})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("EditHaloItem")&&"function"===typeof Za.EditHaloItem?Za.EditHaloItem:Za.EditHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){var la=this;(J=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(La){return La.target==la.halo.target}))?(J=J.getWindow(),J.bringToFront(),J.minimized=!1,J.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:37933,end:38713})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("RotateHaloItem")&&"function"===typeof Za.RotateHaloItem?Za.RotateHaloItem:Za.RotateHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,J);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(J){this.setProperty("angle",J)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(J){this.setProperty("scaleGauge",J)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(J){this.setProperty("initRotation",J)}},{key:"valueForPropertyDisplay",
value:function(){var J=this.halo.target;return this.scaleGauge?J.scale.toFixed(4).toString():Aa.num.toDegrees(J.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(J){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=J;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(J){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=J.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(J){this.scaleGauge=null;J=this.initRotation+(J-this.angle);J=Aa.num.toRadians(Aa.num.detent(Aa.num.toDegrees(J),10,45));this.halo.target.rotation=J;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(J){var la=this.scaleGauge,La=this.halo;la||(la=this.scaleGauge=J.scaleBy(1/La.target.scale));this.angle=J.theta();this.initRotation=La.target.rotation;La.target.scale=Aa.num.detent(J.dist(Aa.pt(0,0))/
la.dist(Aa.pt(0,0)),.1,.5);La.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(J){this.styleClasses=["fas",J?"fa-search-plus":"fa-redo"];this.tooltip=J?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=
this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(J){this.adaptAppearance(J.isShiftDown());J.isShiftDown()?this.initScale(J.position.subPt(this.halo.target.globalPosition)):this.init(J.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(J){this.globalPosition=J.position.addPt(Aa.pt(-10,-10));this.adaptAppearance(J.isShiftDown());J.isShiftDown()?this.updateScale(J.position.subPt(this.halo.target.globalPosition)):
this.update(J.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(J){this.adaptAppearance(J.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(J){this.adaptAppearance(J.isShiftDown())}},{key:"onKeyUp",value:function(J){this.adaptAppearance(J.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38715,end:42192})})(Aa.HaloItem);Aa.nameNumberRe=/(.+)([0-9]+)$/;(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Za.ComponentHaloItem?Za.ComponentHaloItem:
Za.ComponentHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"updateComponentIndicator",value:function(){var J=this.world(),la=this.halo.target;this.halo.remove();J.showHaloFor(la)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var J=this,la,La,ib,Ib,hc,Vb,Oc,Pc,Yd,r,Rd,ke;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){switch(le.nextAddress){case 1:la=J.halo.target;
La=J.world();ib=[];la.withAllSubmorphsDoExcluding(function(ge){ge!=la&&ib.push(ge)},function(ge){return ge.master&&ge!=la});Ib=Aa.arr.groupBy(ib,function(ge){return ge.name});hc={fontWeight:"normal",fontSize:16};if(!Object.values(Ib).find(function(ge){return 1<ge.length})){le.jumpTo(2);break}Vb=Aa.arr.sum(Object.values(Ib).filter(function(ge){return 1<ge.length}).map(function(ge){return ge.length}));return le.yield(La.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Aa.Icon.textAttribute("exclamation-triangle",
{fontColor:Aa.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+Vb+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},hc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},hc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},hc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},hc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Oc=le.yieldResult,!Oc)return le.return();case 2:Yd=le.forIn(Ib);case 4:if(null==(Pc=Yd.getNext())){le.jumpTo(6);break}if(2>Ib[Pc].length){le.jumpTo(4);break}r=Ib[Pc];case 7:if(!(1<r.length)){le.jumpTo(4);break}Rd=r[0];Aa.show(Rd,!0);return le.yield(La.prompt(["Name Collision\n",{},"The name of\n",hc,Rd.toString(),Object.assign({},hc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},hc),la.name,Object.assign({},hc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<r.length?"are "+(r.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",hc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
hc],{input:Rd.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(ge){return!Object.keys(Ib).includes(ge)}}),9);case 9:ke=le.yieldResult;Aa.signal(La,"hideMarkers");ke&&(Rd.name=ke);if(ke in Ib){le.jumpTo(7);break}else if(!ke){r=Aa.arr.rotate(r);le.jumpTo(7);break}Aa.arr.remove(r,Rd);le.jumpTo(7);break;case 6:return le.return(!0)}})}},{key:"onMouseDown",value:function(){var J=this,la,La,ib,Ib,hc,Vb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Oc){switch(Oc.nextAddress){case 1:la=
J.halo.target;La=!la.isComponent;ib=$world.getAllNamed(la.name).length;if(!(La&&1<ib)){Oc.jumpTo(2);break}return Oc.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(ib-1)+" other morph"+(2<ib?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:la.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Pc){return 0==$world.getAllNamed(Pc).length}}),3);case 3:Ib=Oc.yieldResult;if(!Ib)return Oc.return();la.name=Ib;case 2:hc=la;if(!(Vb=La)){Oc.jumpTo(4);break}return Oc.yield(J.checkForDuplicateNamesInHierarchy(),5);case 5:Vb=Oc.yieldResult;case 4:hc.isComponent=Vb,La?(Aa.arr.pushIfNotIncluded(la.world().localComponents,la),Aa.arr.pushIfNotIncluded(la.world().hiddenComponents,la.name)):Aa.arr.remove(la.world().localComponents,la),J.world()?J.updateComponentIndicator():la.world().showHaloFor(la),
Oc.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42233,end:48387})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("CopyHaloItem")&&"function"===typeof Za.CopyHaloItem?Za.CopyHaloItem:Za.CopyHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,
hb,[{key:"init",value:function(J){function la(Pc,Yd){return Yd.match(Aa.nameNumberRe)?Yd.replace(Aa.nameNumberRe,function(r,Rd,ke){ke||(ke="0");for(r=Number(ke);Pc.get(Rd+ ++r););return Rd+r}):Yd+"1"}var La=this.halo,ib=La.target,Ib=La.world(),hc=ib instanceof Aa.MultiSelectionTarget;La.remove();Aa.connect(J,"update",this,"update");if(hc){var Vb=Aa.arr.compact(ib.selectedMorphs.map(function(Pc){if(Pc.canBeCopied())return Pc=Pc.copy(!0),Ib.addMorph(Pc),Pc}));hc=Vb.map(function(Pc){Pc.name=la(ib,Pc.name);
return Pc.position});Vb[0].undoStart("copy-halo");Ib.addMorph(La);La.refocus(Vb);J.grab(La.target);La.target.onGrab({halo:La,hand:J,isShiftDown:function(){return!1}});hc.forEach(function(Pc,Yd){return Vb[Yd].globalPosition=Pc});La.alignWithTarget()}else{hc=ib.globalPosition;var Oc=ib.copy(!0);ib.isComponent&&(Oc.isComponent=!1,Oc.withAllSubmorphsDoExcluding(function(Pc){Pc!=Oc&&Pc.master||delete Pc._parametrizedProps},function(Pc){return Pc.master&&Pc!=Oc}),Oc.master=ib);Oc.name=la(ib,ib.name);Ib.addMorph(Oc);
Oc.globalPosition=hc;Oc.undoStart("copy-halo");J.grab(Oc);Ib.addMorph(La);La.visible=!1}}},{key:"stop",value:function(J){var la=this.halo,La=$jscomp.makeIterator(J.grabbedMorphs).next().value,ib=J.findDropTarget(J.globalPosition,[la.target],function(hc){return!hc.isHaloItem&&!hc.ownerChain().some(function(Vb){return Vb.isHaloItem})}),Ib=la.target.undoInProgress;Aa.disconnect(J,"update",this,"update");Ib.addTarget(ib);J.dropMorphsOn(ib);la.target.undoStop("copy-halo");la.remove();J.world().showHaloFor(La)}},
{key:"onDragStart",value:function(J){this.init(J.hand)}},{key:"onDragEnd",value:function(J){this.stop(J.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var J=this,la,La,ib,Ib,hc,Vb,Oc,Pc,Yd,r,Rd,ke,le,ge,vd,Td;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ce){switch(Ce.nextAddress){case 1:la=J;La=la.halo;if(La.nameHalo().nameHolders.find(function(Ae){return Ae.nameHolder===$world.focusedMorph}))return Ce.return();ib=La.target;
Ib=La.world();hc=ib instanceof Aa.MultiSelectionTarget;Vb=ib.globalBounds().topLeft();Oc=hc?ib.selectedMorphs:[ib];Pc=Oc.filter(function(Ae){return!Ae.isCommentIndicator}).map(function(Ae){return Ae.copy(!0)});Yd=[];r='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";La.remove();Ce.setCatchFinallyBlocks(2);Rd=$jscomp.makeIterator(Pc);ke=Rd.next();
case 4:if(ke.done)return r+="</body></html>",vd=JSON.stringify(Yd),Ce.yield(J.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:r},{type:"application/morphic",data:vd}]),8);le=ke.value;return Ce.yield(Aa.createMorphSnapshot(le,{addPreview:!1,testLoad:!1}),7);case 7:ge=Ce.yieldResult;ge.copyMeta={offset:le.worldPoint(Aa.pt(0,0)).subPt(Vb)};Yd.push(ge);r+=le.renderPreview();ke=Rd.next();Ce.jumpTo(4);break;case 8:Ce.leaveTryBlock(3);break;case 2:return Td=Ce.enterCatchBlock(),Ib.logError(Td),
Ce.return();case 3:Ib.addMorph(La),La.refocus(Oc),La.setStatusMessage("copied"),Ce.jumpToEnd()}})}},{key:"onMouseUp",value:function(J){var la=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){J.stop();return La.yield(la.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far",
"fa-clone"]}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48389,end:52774})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("OriginHaloItem")&&"function"===typeof Za.OriginHaloItem?Za.OriginHaloItem:Za.OriginHaloItem=
function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"fill",get:function(){return Aa.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Aa.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=
!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(J){var la=this.halo,La=la.target.origin,ib=la.target.worldPoint(La);J=la.target.localize(ib.addPt(J)).subPt(la.target.scroll).subPt(La);
la.target.adjustOrigin(la.target.origin.addPt(J))}},{key:"onDragStart",value:function(J){this.init()}},{key:"onDragEnd",value:function(J){this.stop()}},{key:"onDrag",value:function(J){this.update(J.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],
initialize:function(){this.borderColor=this.halo.target.isComponent?Aa.componentAccent:Aa.haloBlue}}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:52776,end:54437})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("ResizeHandle")&&
"function"===typeof Za.ResizeHandle?Za.ResizeHandle:Za.ResizeHandle=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"valueForPropertyDisplay",value:function(){var J=this.halo.target.extent,la=J.y;return J.x.toFixed(1)+"x"+la.toFixed(1)}},{key:"positionInHalo",value:function(){var J=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Aa.Rectangle.prototype.sides.includes(this.location)&&(this.visible=
!1),J=J.insetBy(-4));return J.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(J){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(J.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(J){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(J.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(J){this.init(J.position,J.isShiftDown())}},{key:"onDragEnd",value:function(J){this.stop(J.isShiftDown())}},
{key:"onDrag",value:function(J){this.update(J.position,J.isShiftDown(),J.isAltDown(),J.isCtrlDown());this.focus()}},{key:"init",value:function(J,la){la=void 0===la?!1:la;var La=this.halo.target,ib=La.origin,Ib=La.position;La=La.extent;this.startPos=J;this.startBounds=Ib.subPt(ib).extent(La);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();J=this.halo.target.getGlobalTransform().getRotation();
this.offsetRotation=Aa.num.toRadians(J%45);this.halo.toggleDiagonal(la,this.corner)}},{key:"update",value:function(J,la,La,ib){la=void 0===la?!1:la;La=void 0===La?!1:La;ib=void 0===ib?!1:ib;var Ib=this.corner,hc=this.tfm;J=this.startPos.subPt(J);hc=hc.transformDirection(Aa.pt(J.x,J.y));La&&(hc=hc.griddedBy(Aa.pt(10,10)));this.halo.updateBoundsFor(Ib,la,hc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(la,Ib);this.updateAlignmentGuide(La);la=[];Ib=Ib.toLowerCase();Ib.includes("left")&&
la.push("left");Ib.includes("top")&&la.push("top");Ib.includes("bottom")&&la.push("bottom");Ib.includes("right")&&la.push("right");Aa.showAndSnapToResizeGuides(this.halo.target,la,!0,ib,5,200)}},{key:"stop",value:function(J){J=this.halo;J.layout=this.savedLayout;J.state.activeButton=null;J.alignWithTarget();J.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Aa.removeSnapToGuidesOf(J.target)}},{key:"updateAlignmentGuide",value:function(J){var la=this.halo.getSubmorphNamed("mesh");if(J)return J=this.halo.target.extent,
J=Aa.pt(J.x%10,J.y%10),la=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),J),this.focus(),la;la&&la.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(J){0<J&&(J-=360);J=-8-(J/45).toFixed();0==J&&(J=8);return Aa.arr.zip(Aa.arr.rotate([["topLeft",function(la){return la.negated()}],
["topCenter",function(la){return la.withX(0).negated()}],["topRight",function(la){return la.withX(0).negated()}],["rightCenter",function(la){return Aa.pt(0,0)}],["bottomRight",function(la){return Aa.pt(0,0)}],["bottomCenter",function(la){return Aa.pt(0,0)}],["bottomLeft",function(la){return la.withY(0).negated()}],["leftCenter",function(la){return la.withY(0).negated()}]],J),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize",
"bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(J){var la=this;if(!J.target)return[];var La=J.target.getGlobalTransform().getRotation();return Aa.arr.compact(this.getResizeParts(La).map(function(ib){var Ib=$jscomp.makeIterator(ib),hc=$jscomp.makeIterator(Ib.next().value);ib=hc.next().value;hc.next();hc.next();hc=$jscomp.makeIterator(Ib.next().value);Ib=hc.next().value;hc=hc.next().value;return la.for(J,ib,hc,
Ib)})).map(function(ib){return ib.alignInHalo()})}},{key:"for",value:function(J,la,La,ib){var Ib="Resize "+la;J=J.getSubmorphNamed(Ib)||new this({name:Ib,halo:J,corner:la,tooltip:"Resize "+la,extent:Aa.pt(10,10),borderWidth:1,borderRadius:0,borderColor:J.target.isComponent?Aa.componentAccent:Aa.haloBlue,fill:Aa.Color.white});return Object.assign(J,{nativeCursor:ib,location:La})}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:54496,end:59794})})(Aa.HaloItem);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("MenuHaloItem")&&"function"===typeof Za.MenuHaloItem?Za.MenuHaloItem:Za.MenuHaloItem=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,
hb,[{key:"onMouseDown",value:function(J){var la=this,La,ib;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ib){if(1==Ib.nextAddress)return La=la.halo.target,la.halo.remove(),Ib.yield(La.menuItems(J),2);ib=Ib.yieldResult;La.world().openMenu(ib).hasFixedPosition=la.halo.hasFixedPosition;Ib.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:59796,end:60321})})(Aa.HaloItem);var Ab=za("M",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("MorphHighlighter")&&
"function"===typeof Za.MorphHighlighter?Za.MorphHighlighter:Za.MorphHighlighter=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,
this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(J){this.layoutHalo&&
this.layoutHalo.handleDrop(J)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Aa.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Aa.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(J){var la=this;this.setProperty("highlightedSides",J);this.submorphs=J.map(function(La){return{type:"ellipse",isHaloItem:!0,fill:Aa.Color.orange,center:la.innerBounds()[La]()}});this.addMorph({type:"label",name:"name tag",padding:Aa.Rectangle.inset(5,
5,5,5),fontColor:Aa.Color.white,fill:Aa.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(J){J=void 0===J?$world:J;var la=J._morphHighlighters,La;for(La in la)la[La].remove();delete J._morphHighlighters}},{key:"for",value:function(J,la,La,ib){La=void 0===La?!1:La;ib=void 0===ib?[]:ib;var Ib=J._morphHighlighters=
J._morphHighlighters||{};Aa.properties.forEachOwn(Ib,function(hc,Vb){return Vb.alignWithHalo()});if(!la||la.ownerChain().find(function(hc){return hc.isHaloItem}))return null;Ib[la.id]=Ib[la.id]||new this({targetId:la.id,halo:J,showLayout:La});J.addMorph(Ib[la.id]);Ib[la.id].highlightedSides=ib;return Ib[la.id]}},{key:"interceptDrop",value:function(J,la,La){(J=J._morphHighlighters=J._morphHighlighters||{},J[la.id])&&J[la.id].handleDrop(La)}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60510,end:64305})}(Aa.Morph));Aa.MorphHighlighter=Ab;Aa.MorphHighlighter=Ab;Aa.MorphHighlighter=Ab;var Hc=za("I",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),ua=Za.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Za.InteractiveMorphSelector?Za.InteractiveMorphSelector:Za.InteractiveMorphSelector=function(J){J&&
J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(J,la,La){J=void 0===J?$world:J;this.controllingMorph=void 0===la?null:la;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=J;this.filterFn=La;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var J=Aa.promise.deferred();J.promise.resolve=J.resolve;this.whenDone=
J.promise;this.selectorMorph=Aa.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Aa.connect(this.world.firstHand,"position",this,"scanForTargetAt");Aa.once(this.selectorMorph,"onMouseUp",this,"selectTarget");Aa.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var J=this.world.firstHand.globalPosition;this.selectorMorph.center=J;this.selectorMorph.focus();
var la=this.selectorMorph.morphBeneath(J),La,ib=this.possibleTarget,Ib=this.controllingMorph,hc=this.filterFn,Vb=this.world,Oc=this.morphHighlighter;for(Oc==la?la=Oc.morphBeneath(J):la&&la.isEpiMorph&&(la=la.morphBeneath(J));la&&(La=[la].concat($jscomp.arrayFromIterable(la.ownerChain())).find(function(Pc){return!Pc.visible}));)la=La=La.morphBeneath(J);if(la&&hc&&!hc(la))for(;la&&![la].concat($jscomp.arrayFromIterable(la.ownerChain())).find(hc);)la=la.morphBeneath(J);!la||la==ib||Ib&&la.ownerChain().includes(Ib.getWindow())||
(Oc&&Oc.deactivate(),(this.possibleTarget=ib=la)&&!ib.isWorld&&(J=this.morphHighlighter=Aa.MorphHighlighter.for(Vb,la))&&J.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Aa.MorphHighlighter.removeHighlighters(this.world);Aa.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(J,la,La){J=new this(J,la,La);J.selectNewTarget();return J.whenDone}}],Za,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64314,end:67067})}(void 0));Aa.InteractiveMorphSelector=Hc;Aa.InteractiveMorphSelector=
Hc;Aa.InteractiveMorphSelector=Hc;Aa.default=Rb;var fb=lively.FreezerRuntime.recorderFor("lively.ide/index.js");fb.info="import via sub modules";fb.info="import via sub modules";fb.info="import via sub modules";Rb=za("v",{});fb.valueWidgets=Rb;fb.valueWidgets=Rb;fb.valueWidgets=Rb;var ud=za("p",{});fb.popovers=ud;fb.popovers=ud;fb.popovers=ud;var je=lively.FreezerRuntime.recorderFor("lively.components/popup.js");je.Morph=Hd;je.VerticalLayout=ub;je.StyleSheet=db;je.Icon=Gd;je.CustomLayout=Xb;je.Color=
Pb;je.rect=ic;je.pt=mb;je.connect=xc;je.Path=wc;je.duration=300;fb=za("P",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),ua=Za.hasOwnProperty("Popover")&&"function"===typeof Za.Popover?Za.Popover:Za.Popover=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"relayout",value:function(J){var la=this.get("body"),La=this.get("arrow"),ib=this.get("close button");La=La.height;
J?(la.animate({topCenter:je.pt(0,La),duration:200}),ib.animate({topRight:la.topRight.addXY(8,-8),duration:200})):(la.topCenter=je.pt(0,La),ib.topRight=la.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,
after:["submorphs"],defaultValue:{extent:je.pt(200,200),fill:je.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(J){var la=this;this.get("body").addMorph(J);this.whenRendered().then(function(){return la.relayout()})}},submorphs:{initialize:function(){var J=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:je.pt(0,0),borderColor:je.Color.transparent,vertices:[je.pt(-10,0),je.pt(0,
-15),je.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(je.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:je.pt(16,16),borderColor:je.Color.transparent}];var la=$jscomp.makeIterator(this.submorphs);la.next();var La=la.next().value;la=la.next().value;je.connect(la,"fire",this,"close");je.connect(La,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return J.animated=!0},1E3)}}}}}],Za,{pathInPackage:function(){return"popup.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2625})}(je.Morph));je.Popover=fb;je.Popover=fb;je.Popover=fb;var rc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");rc.Morph=Hd;rc.TilingLayout=Fa;rc.morph=tb;rc.Label=Uc;rc.HorizontalLayout=tc;rc.Icon=Gd;rc.InputLine=sb;rc.config=Ya;rc.connect=xc;rc.signal=
Xa;rc.Color=Pb;rc.LinearGradient=cc;rc.pt=mb;rc.rect=ic;rc.num=Nc;rc.obj=Fc;rc.popovers=ud;rc.ValueScrubber=pb;rc.Popover=fb;(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Za.ContextSensitiveWidget?Za.ContextSensitiveWidget:Za.ContextSensitiveWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,
void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:rc.Color.transparent},isSelected:{defaultValue:"false",set:function(J){this.setProperty("isSelected",J);this.fontColor=J?rc.Color.white:rc.Color.black}},layout:{initialize:function(){this.layout=new rc.HorizontalLayout}},context:{serialize:!1}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(rc.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("ShortcutWidget")&&"function"===typeof Za.ShortcutWidget?Za.ShortcutWidget:Za.ShortcutWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,
hb,[{key:"onMouseDown",value:function(J){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){J.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(J){this.setProperty("title",J);this.getSubmorphNamed("valueString").value=J}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(J){this.submorphs.forEach(function(la){return la.fontColor=J})}},submorphs:{initialize:function(){this.submorphs=[rc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:rc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:rc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(rc.ContextSensitiveWidget);ud=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("LayoutWidget")&&"function"===typeof Za.LayoutWidget?Za.LayoutWidget:Za.LayoutWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return kc(ua,hb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.LayoutPopover({hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition}),container:J.context}),La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"layoutChanged",
J,"layoutChanged");rc.signal(J,"openWidget",la);La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4641})}(rc.ShortcutWidget);rc.LayoutWidget=ud;rc.LayoutWidget=ud;rc.LayoutWidget=ud;ud=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("ColorWidget")&&"function"===typeof Za.ColorWidget?Za.ColorWidget:Za.ColorWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"relayout",
value:function(J){J?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var J=this.color;if(2*J.stops.length==this.submorphs.length-3){var la;for(la in this.color.stops){var La=J.stops[la];var ib=La.color,Ib=La.offset,hc=$jscomp.makeIterator(this.submorphs[2+2*la].submorphs).next().value;La=this.submorphs[3+
2*la];hc.fill=ib;La.value=(100*Ib).toFixed()+"%"+(la<J.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
rc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:rc.pt(15,15),fill:rc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:rc.pt(5,7.5),fill:rc.Color.white,borderColor:rc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[rc.pt(0,0),rc.pt(10,10)],borderColor:rc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:rc.pt(15,
15),fill:rc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:rc.pt(5,7.5),fill:this.color,borderColor:rc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:rc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var J=this.color,la=[{type:"label",padding:rc.rect(0,0,5,0),value:"linearGradient"==J.type?rc.num.toDegrees(J.vectorAsAngle()).toFixed()+"\u00b0,":""}],La;
for(La in J.stops){var ib=J.stops[La],Ib=ib.color;ib=ib.offset;la.push({extent:rc.pt(this.fontSize,this.fontSize),fill:rc.Color.transparent,layout:new rc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Ib}]});la.push({type:"label",padding:rc.rect(0,0,5,0),value:(100*ib).toFixed()+"%"+(La<J.stops.length-1?",":"")})}return la}},{key:"onMouseDown",value:function(J){this.openFillEditor()}},{key:"update",value:function(J){this.color=J}},{key:"openFillEditor",value:function(){var J=
this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.FillPopover({hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition}),handleMorph:J.context,fillValue:J.color,title:"Fill Control",gradientEnabled:J.gradientEnabled}),La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"fillValue",J,"update");rc.signal(J,"openWidget",la);La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new rc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:rc.Color.white},nonSelectionFontColor:{defaultValue:rc.Color.black},color:{defaultValue:rc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(J){this.getProperty("isSelected")!=J&&(this.getSubmorphNamed("valueString").fontColor=J?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",J))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){rc.connect(this,"color",this,"relayout",{converter:function(J,la){return(la&&la.isColor)!=(J&&J.isColor)}});this.relayout(!0)}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4705,end:10188})}(rc.ContextSensitiveWidget);rc.ColorWidget=ud;rc.ColorWidget=ud;rc.ColorWidget=ud;ud=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("BooleanWidget")&&"function"===typeof Za.BooleanWidget?Za.BooleanWidget:Za.BooleanWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){this.boolean=!this.boolean}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:rc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(J){this.setProperty("boolean",J);this.value=rc.obj.safeToString(J);this.fontColor=this.boolean?rc.Color.green:rc.Color.red}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10197,end:10682})}(rc.Label);rc.BooleanWidget=ud;rc.BooleanWidget=ud;rc.BooleanWidget=ud;ud=za("N",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("NumberWidget")&&"function"===typeof Za.NumberWidget?Za.NumberWidget:Za.NumberWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),"onMouseDown",this).call(this,J);"up"==J.targetMorph.name&&this.increment();"down"==J.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return rc.obj.dissoc(kc._get(Object.getPrototypeOf(ua.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(J,la){la=void 0===la?!0:la;this.setProperty("number",la?J/this.scaleFactor:J);rc.signal(this,"number",this.number);
this.relayout(la)}},{key:"relayoutButtons",value:function(){var J=this.getSubmorphNamed("up"),la=this.getSubmorphNamed("down");this.getSubmorphNamed("value");J.height=la.height=Math.floor(this.height/2);J.width=la.width=20}},{key:"onChange",value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),"onChange",this).call(this,J);"extent"!=J.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(J){var la=this.getSubmorphNamed("value"),La=this.showStepControls?20:0;la&&(this.autofit?
(J||(la.value=this.number*this.scaleFactor),la.fit(),this.height=la.height,this.width=la.width+La):J||(la.width=this.width-La),this.relayoutButtons(),J||(la.value=rc.num.roundTo(this.number*this.scaleFactor,1),la.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,la.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,la.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=
this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(J){this.setProperty("autofit",J);this.getSubmorphNamed("value").scaleToBounds=!J}},number:{defaultValue:0,after:["unit","autofit"],set:function(J){this.setProperty("number",
J);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(J){this.setProperty("floatingPoint",J);this.get("value").floatingPoint=J},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var J=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&J&&!!J[1]}},padding:{isStyleProp:!0,defaultValue:rc.rect(5,3,0,0),after:["submorphs"],set:function(J){this.setProperty("padding",
J);this.getSubmorphNamed("value").padding=J}},extent:{defaultValue:rc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(J){this.get("value").baseFactor=J}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var J=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){J.relayout()})}},
fontColor:{isStyleProp:!0,defaultValue:rc.Color.rgbHex("#0086b3"),set:function(J){this.setProperty("fontColor",J)}},isSelected:{set:function(J){this.getProperty("isSelected")!=J&&(J?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",J))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(J){this.setProperty("fontFamily",J)}},fontSize:{defaultValue:15,isStyleProp:!0,
set:function(J){this.setProperty("fontSize",J)}},layout:{initialize:function(){this.layout=new rc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(J){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=J)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(J){0<J.length||(this.submorphs=[new rc.ValueScrubber({name:"value",
unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[rc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[rc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(rc.Morph));rc.NumberWidget=ud;rc.NumberWidget=ud;rc.NumberWidget=ud;fb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("ShadowWidget")&&"function"===typeof Za.ShadowWidget?Za.ShadowWidget:Za.ShadowWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){this.openPopover()}},
{key:"openPopover",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.ShadowPopover({hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition}),shadowValue:J.shadowValue}),La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"shadowValue",J,"shadowValue");rc.connect(J,"shadowValue",J,"update");rc.signal(J,"openWidget",la);La.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var J=this.shadowValue,la=J.blur,La=J.spread,ib=J.distance;J=J.color;var Ib=$jscomp.makeIterator(this.submorphs),hc=Ib.next().value,Vb=Ib.next().value;Vb=$jscomp.makeIterator(Vb.submorphs).next().value;
Ib=Ib.next().value;hc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Vb.fill=J;Ib.value=", "+la+"px, "+ib+"px, "+La+"px)"}},{key:"initShadowDisplay",value:function(){var J=this.shadowValue,la=J.blur,La=J.spread,ib=J.distance;J=J.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},rc.morph({fill:rc.Color.transparent,extent:rc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:rc.pt(this.fontSize,
this.fontSize),position:rc.pt(2,2),fill:J,borderColor:rc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+la+"px, "+ib+"px, "+La+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(J){this.setProperty("shadowValue",J);this.renderShadowDisplay()}},fill:{defaultValue:rc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(J){this.submorphs.forEach(function(la){return la.fontColor=J})}},isSelected:{defaultValue:!1,set:function(J){this.setProperty("isSelected",J);this.fontColor=J?rc.Color.white:rc.Color.black}},layout:{initialize:function(){this.layout=new rc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(rc.Morph);rc.ShadowWidget=fb;rc.ShadowWidget=fb;rc.ShadowWidget=fb;fb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("PointWidget")&&"function"===typeof Za.PointWidget?Za.PointWidget:Za.PointWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){this.openPopover()}},{key:"openPopover",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.PointPopover({pointValue:J.pointValue,hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition})}),La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"pointValue",J,"pointValue");rc.signal(J,"openWidget",la);La.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(J){this.setProperty("isSelected",J);this.fontColor=J?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:rc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:rc.Color.black},fontFamily:{defaultValue:rc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(J){var la=rc.Color.rgbHex("#0086b3");this.setProperty("pointValue",J);this.textAndAttributes=["pt(",null,J.x.toFixed(),{fontColor:la},",",{},J.y.toFixed(),{fontColor:la},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(rc.Label);rc.PointWidget=fb;rc.PointWidget=fb;rc.PointWidget=fb;fb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("PaddingWidget")&&"function"===typeof Za.PaddingWidget?Za.PaddingWidget:Za.PaddingWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){this.openPopover()}},{key:"openPopover",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.RectanglePopover({hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition}),rectangle:J.rectangle}),la.relayout(),La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"rectangle",J,"rectangle");rc.signal(J,"openWidget",
la);La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:rc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(J){this.setProperty("isSelected",J);this.fontColor=J?rc.Color.white:rc.Color.black}},rectangle:{defaultValue:rc.rect(0),set:function(J){this.setProperty("rectangle",
J);this.value=rc.obj.safeToString(J)}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(rc.Label);rc.PaddingWidget=fb;rc.PaddingWidget=fb;rc.PaddingWidget=fb;fb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("IconWidget")&&
"function"===typeof Za.IconWidget?Za.IconWidget:Za.IconWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"onMouseDown",value:function(J){this.openPopover()}},{key:"openPopover",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=new rc.popovers.IconPopover({hasFixedPosition:!!J.ownerChain().find(function(ib){return ib.hasFixedPosition})}),
La.yield(la.fadeIntoWorld(J.globalBounds().center()),2);rc.connect(la,"select",J,"iconValue",{converter:function(ib){return ib&&rc.Icon.makeLabel(ib).value},varMapping:{Icon:rc.Icon}});rc.signal(J,"openWidget",la);La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:rc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(J){this.value=J||"No Icon"}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(rc.Label);rc.IconWidget=fb;rc.IconWidget=fb;rc.IconWidget=fb;fb=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),ua=Za.hasOwnProperty("StringWidget")&&
"function"===typeof Za.StringWidget?Za.StringWidget:Za.StringWidget=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"truncate",value:function(J){return 200<J.length?J.slice(0,20)+"...":J}},{key:"onFocus",value:function(J){var la=this,La;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ib){if(1==ib.nextAddress)return kc._get(Object.getPrototypeOf(ua.prototype),"onFocus",la).call(la,J),la.readOnly?
ib.return():la.stringTooLong?ib.yield(la.world().editPrompt("edit string",{requester:la,input:la.stringValue}),2):(la.borderColor=rc.Color.white.withA(.9),la.textString=la.stringValue,ib.return());La=ib.yieldResult;if("string"===typeof La)la.onInput(La);ib.jumpToEnd()})}},{key:"onBlur",value:function(J){kc._get(Object.getPrototypeOf(ua.prototype),"onBlur",this).call(this,J);this.readOnly||(this.borderColor=rc.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(J){this.owner.focus();
rc.signal(this,"inputAccepted",J);this.stringValue=J}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:rc.Color.transparent},fontColor:{defaultValue:rc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:rc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:rc.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(J){this.setProperty("stringValue",J);this.textString=this.truncate(J);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(J){this.setProperty("isSelected",J);this.fontColor=J?rc.Color.white:rc.Color.blue}}}}}],Za,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(rc.InputLine);rc.StringWidget=fb;rc.StringWidget=fb;rc.StringWidget=fb;rc.valueWidgets=Rb;Object.assign(rc.valueWidgets,{NumberWidget:rc.NumberWidget,StringWidget:rc.StringWidget,IconWidget:rc.IconWidget,PaddingWidget:rc.PaddingWidget,ShadowWidget:rc.ShadowWidget,PointWidget:rc.PointWidget,BooleanWidget:rc.BooleanWidget,LayoutWidget:rc.LayoutWidget,
ColorWidget:rc.ColorWidget});var gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");gb.Ellipse=$b;gb.Icon=Gd;gb.Morph=Hd;gb.Path=Dc;gb.Text=cd;gb.HorizontalLayout=tc;gb.VerticalLayout=ub;gb.morph=tb;gb.Color=Pb;gb.pt=mb;gb.rect=ic;gb.Rectangle=mc;gb.arr=$a;gb.connect=xc;gb.disconnect=qb;gb.LabeledCheckBox=lc;gb.DropDownSelector=Jb;gb.Button=Cb;gb.Menu=Bb;gb.NumberWidget=ud;gb.InteractiveMorphSelector=Hc;gb.easings=zc;(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
ua=Za.hasOwnProperty("AxisHalo")&&"function"===typeof Za.AxisHalo?Za.AxisHalo:Za.AxisHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(J){var la=J.halo;J=J.targetAxis;kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:gb.Color.transparent,halo:la,targetAxis:J,container:la.container});
this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(J){this._forceMenuHidden=J;this.axisMenu.visible=!J}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},
{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(J){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},
{key:"proportionSlider",value:function(){var J=this,la=this,La=this.proportionViewer();return this.halo.addGuide(new gb.Morph({nativeCursor:this.getResizeCursor(),fill:gb.Color.transparent,submorphs:[this.devider(),La],alignWithTarget:function(){this.setBounds(la.getProportionSliderBounds(this))},onDragStart:function(){La.visible=!0},onDrag:function(ib){J.adjustStretch(J.getDelta(ib));J.halo.alignWithTarget()},onDragEnd:function(){La.visible=!1}}))}},{key:"devider",value:function(){return new gb.Morph({visible:!this.lastAxis,
fill:gb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var J=this,la=this,La=this.minSpaceVisualizer(),ib=this.minViewer();return this.halo.addGuide(new gb.Ellipse({nativeCursor:this.getResizeCursor(),fill:gb.Color.green,extent:gb.pt(10,10),visible:!1,submorphs:[La,ib],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=la.getMinSliderPosition()},requestToShow:function(){this.visible=!la.targetAxis.fixed},requestToHide:function(){this.active?
this.shouldHide=!0:this.visible=!1},onDragStart:function(){la.forceMenuHidden=!0;ib.visible=!0;this.active=La.visible=!0},onDrag:function(Ib){J.targetAxis.min+=-J.getDelta(Ib);J.halo.alignWithTarget()},onDragEnd:function(){la.forceMenuHidden=!1;ib.visible=!1;this.active=La.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var J=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+J.targetAxis.min.toFixed()+
"px !"}})}},{key:"minSpaceBorder",value:function(){return new gb.Path(Object.assign({position:gb.pt(-1,-1),borderStyle:"dashed",borderColor:gb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var J=this,la=this.minSpaceBorder();return this.halo.addGuide(new gb.Morph({fill:gb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[la],alignWithTarget:function(){this.extent=J.getMinSpaceExtent();this.topLeft=gb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var J=
this.lockButton(),la=this.menuButton(),La=this;return new gb.Morph({layout:this.getMenuLayout(),submorphs:[J,la],fill:gb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(La.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var J=this;return this.halo.addGuide(new gb.Morph({fill:gb.Color.transparent,extent:gb.pt(25,25),submorphs:[{center:gb.pt(12.5,12.5),fill:gb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){J.targetAxis.fixed?
(this.fontColor=gb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=gb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){J.targetAxis.fixed=!J.targetAxis.fixed;J.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var J=this,la=this;return new gb.Morph({fill:gb.Color.transparent,extent:gb.pt(25,25),submorphs:[{fill:gb.Color.transparent,styleClasses:["fa","fa-cog"],center:gb.pt(12.5,
12.5)}],onMouseDown:function(La){la.forceMenuVisible=!0;this.addMorph(La.state.menu=new gb.Menu({position:gb.pt(15,15),items:[["Remove "+la.subject,function(){J.targetAxis.remove();J.halo.initGuides();J.halo.alignWithTarget()}],["Insert "+la.subject+" before",function(){J.targetAxis.addBefore();J.halo.initGuides();J.halo.alignWithTarget()}],["Insert "+la.subject+" after",function(){J.targetAxis.addAfter();J.halo.initGuides();J.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(J){var la=
J.position;J=J.alignWithTarget;return this.halo.addGuide(new gb.Text({styleClasses:["Halo"],padding:gb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:gb.Color.white,fill:gb.Color.black.withA(.5),position:la,alignWithTarget:J,readOnly:!0}))}},{key:"proportionViewer",value:function(){var J=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=J.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],
Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:8012})})(gb.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("RowHalo")&&"function"===typeof Za.RowHalo?Za.RowHalo:Za.RowHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(J){var la=J.row;J=J.halo;kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:J.target.row(la),halo:J})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(J){this.targetAxis.height+=J}},{key:"getDelta",value:function(J){return J.state.dragDelta.y}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return gb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return gb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(J){return this.targetAxis.length>J.height?gb.pt(2,5):gb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new gb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return gb.pt(50,
20)}},{key:"getMinSliderPosition",value:function(){return gb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return gb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:gb.pt(this.container.width+50,2),vertices:[gb.pt(0,1),gb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return gb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(J){return gb.pt(0,J.owner.height-5).extent(gb.pt(40,
10))}},{key:"getDeviderBounds",value:function(){return gb.pt(15,4).extent(gb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8014,end:9262})})(gb.AxisHalo);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
ua=Za.hasOwnProperty("ColumnHalo")&&"function"===typeof Za.ColumnHalo?Za.ColumnHalo:Za.ColumnHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:Symbol.for("lively-instance-initialize"),value:function(J){var la=J.col;J=J.halo;kc._get(Object.getPrototypeOf(ua.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:J.target.col(la),halo:J})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(J){this.targetAxis.width+=J}},{key:"getDelta",value:function(J){return J.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return gb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return gb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(J){return this.targetAxis.length>J.width?gb.pt(5,3):gb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new gb.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return gb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return gb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return gb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:gb.pt(2,this.container.height+50),vertices:[gb.pt(1,0),gb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return gb.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(J){return gb.pt(J.owner.width-5,0).extent(gb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return gb.pt(4,15).extent(gb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9264,end:10519})})(gb.AxisHalo);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("CellGuide")&&"function"===typeof Za.CellGuide?Za.CellGuide:Za.CellGuide=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"menuItems",value:function(){var J=this,la=gb.Icon.textAttribute("check-square-o"),La=gb.Icon.textAttribute("square-o");
la[1].textStyleClasses.push("annotation");La[1].textStyleClasses.push("annotation");La[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?La:la)),function(){J.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?la:La)),function(){J.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new gb.Rectangle).sides),$jscomp.arrayFromIterable((new gb.Rectangle).corners)).map(function(ib){return[[ib,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(J.cellGroup.align==ib?la:La),["  ",null]),function(){return J.cellGroup.align=ib}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var ib=J.cellGroup.morph;ib&&(J.world().firstHand.grab(ib),J.world().firstHand.longClickGrab=!0,ib.position=gb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Za,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10521,end:11840})})(gb.Morph);(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("LayoutHalo")&&"function"===typeof Za.LayoutHalo?Za.LayoutHalo:Za.LayoutHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return kc(ua,hb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:gb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11842,end:12256})})(gb.Morph);Rb=za("G",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Za.GridLayoutHalo?Za.GridLayoutHalo:Za.GridLayoutHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return kc(ua,hb,[{key:"previewDrop",value:function(J){1>J.length||(J=this.cellGuides.find(function(la){return la.fullContainsWorldPoint($world.firstHand.position)}),J!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=J)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(J){var la=this;this.currentCell&&J.whenRendered().then(function(){return la.currentCell.cellGroup.morph=J})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var J=this.target,la=new gb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:gb.Color.transparent,checked:J.compensateOrigin}),La=new gb.LabeledCheckBox({label:"Resize Submorphs",fill:gb.Color.transparent,name:"fitToCell",checked:J.fitToCell});gb.connect(la,"checked",J,"compensateOrigin");gb.connect(La,"checked",J,"fitToCell");gb.connect(la,"checked",this,"alignWithTarget");return[la,La]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();gb.arr.reverse(this.guides).forEach(function(J){return J.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var J=this;gb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(la){return la.cellGroup})).forEach(function(la){return J.addMorph(J.cellGuide(la))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var J=this,la=this.addMorph({fill:gb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(La){la.addMorph(J.cellGuide(La))});this.cellGuides=la.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(J){J.isHaloItem=!0;this.guides.push(J);return J}},{key:"initRowGuides",
value:function(){var J=this,la=this;this.addGuide(this.addMorph(new gb.Morph({width:25,fill:gb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:gb.pt(-5,0),alignWithTarget:function(){this.height=la.container.height}})));gb.arr.range(0,this.target.rowCount-1).forEach(function(La){J.addMorph(new gb.RowHalo({row:La,halo:J}))})}},{key:"initColumnGuides",value:function(){var J=this,la=this;this.addGuide(this.addMorph(new gb.Morph({height:25,fill:gb.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:gb.pt(0,-5),alignWithTarget:function(){this.width=la.container.width}})));gb.arr.range(0,this.target.columnCount-1).forEach(function(La){J.addMorph(new gb.ColumnHalo({col:La,halo:J}))})}},{key:"resizer",value:function(){var J=this;return this.addGuide(new gb.Morph({fill:gb.Color.transparent,extent:gb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(la){J.container.resizeBy(la.state.dragDelta);J.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
J.extent}}))}},{key:"cellResizer",value:function(J,la){var La=this,ib="topLeft"==la?"bottomRight":"topLeft";return new gb.Ellipse({borderWidth:1,visible:!1,borderColor:gb.Color.black,nativeCursor:"nwse-resize",removeCell:function(Ib){J.disconnect(Ib);La.alignWithTarget()},addCell:function(Ib){J.connect(Ib);La.alignWithTarget()},start:function(){this.fixpointCell=J[ib];this.draggedDelta=J.bounds().partNamed(la);this.debugMorph=La.addMorph(new gb.Morph({fill:gb.Color.orange.withA(.5)}))},update:function(Ib){var hc=
this;this.draggedDelta=this.draggedDelta.addPt(Ib);var Vb=gb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Vb);La.cells.forEach(function(Oc){var Pc=Vb.intersection(Oc.bounds()).area()/Oc.bounds().area();J.includes(Oc)&&.1>Pc&&hc.removeCell(Oc);!J.includes(Oc)&&Pc>1/3&&hc.addCell(Oc)})},onDragEnd:function(Ib){this.debugMorph.remove()},onDragStart:function(Ib){this.start(Ib.position)},onDrag:function(Ib){this.update(Ib.state.dragDelta)}})}},{key:"cellGuide",
value:function(J){var la=this,La=this.cellResizer(J,"topLeft"),ib=this.cellResizer(J,"bottomRight");return this.addGuide(new gb.CellGuide({cellGroup:J,bounds:J.bounds(),fill:gb.Color.transparent,borderColor:gb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[La,ib],onMouseDown:function(Ib){this.becomeActive()},deactivate:function(){this.borderColor=gb.Color.orange;this.fill=gb.Color.transparent;this.submorphs.forEach(function(Ib){Ib.visible=!1})},becomeActive:function(){la.guides.forEach(function(Ib){Ib.isCell&&
Ib.deactivate()});this.borderColor=gb.Color.rgbHex("#1565C0");this.fill=gb.Color.rgbHex("#1565C0").withA(.3);la.addMorph(this.remove());this.submorphs.forEach(function(Ib){Ib.visible=!0})},startPreview:function(Ib){this.fill=gb.Color.orange.withA(.7)},stopPreview:function(Ib){this.fill=gb.Color.transparent},onDrop:function(Ib){var hc=$jscomp.makeIterator(Ib.hand.grabbedMorphs).next().value;Ib.hand.dropMorphsOn(la.container);J.morph=hc},alignWithTarget:function(){J.bounds().isNonEmpty()?(this.setBounds(J.bounds()),
La.center=this.innerBounds().topLeft(),ib.center=this.innerBounds().bottomRight()):(gb.arr.remove(la.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:gb.Color.transparent},cells:{derived:!0,get:function(){return gb.arr.flatten(this.target.col(0).items.map(function(J){return J.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],Za,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12265,end:19680})}(gb.LayoutHalo));gb.GridLayoutHalo=Rb;gb.GridLayoutHalo=Rb;gb.GridLayoutHalo=Rb;ud=function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Za.TilingLayoutHalo?Za.TilingLayoutHalo:Za.TilingLayoutHalo=
function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"remove",value:function(){kc._get(Object.getPrototypeOf(ua.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(J){}},{key:"removePreviews",value:function(){this.previews.forEach(function(J){return J.clear()})}},
{key:"previewDrop",value:function(J){var la=this;0<this.previews.length||(this.previews=J.map(function(La){return la.container.addMorph({type:gb.DropPreview,bounds:La.bounds()})}),this.previews.forEach(function(La){La.step()}))}},{key:"updateSpacing",value:function(J){this.target.spacing=J}},{key:"updateAxis",value:function(J){this.target.axis=J}},{key:"updateAlign",value:function(J){this.target.align=J}},{key:"optionControls",value:function(){var J=this.target,la=new gb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:J.axis,values:["row","column"]}),La=new gb.DropDownSelector({borderRadius:2,padding:3,selectedValue:J.align,values:["left","center"]});J=new gb.NumberWidget({min:0,number:J.spacing,padding:gb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:gb.Color.gray,unit:"px"});gb.connect(J,"update",this,"updateSpacing");gb.connect(La,"update",this,"updateAlign");gb.connect(la,"update",this,"updateAxis");var ib={type:"label",padding:gb.rect(0,5,5,5),fill:gb.Color.transparent,fontColor:gb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},ib,{textString:"Submorph Spacing"}),J],[Object.assign({},ib,{textString:"Tiling Align"}),La],[Object.assign({},ib,{textString:"Tiling Axis"}),la]].map(function(Ib){return{submorphs:Ib,fill:null,layout:new gb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:gb.Color.transparent},previews:{defaultValue:[]}}}}],Za,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19689,end:21804})}(gb.LayoutHalo);gb.TilingLayoutHalo=ud;gb.TilingLayoutHalo=ud;gb.TilingLayoutHalo=ud;(function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("DropPreview")&&"function"===typeof Za.DropPreview?Za.DropPreview:Za.DropPreview=function(J){J&&
J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var J=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){if(1==La.nextAddress)return la=gb.easings.inOutQuad,La.yield(J.animate({opacity:.5,duration:(J.pulseDuration-10)/2,easing:la}),2);if(3!=La.nextAddress)return La.yield(J.animate({opacity:1,duration:(J.pulseDuration-
10)/2,easing:la}),3);J.stopped||J.step();La.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:gb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:gb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21806,end:22642})})(gb.Morph);ud=za("F",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Za.FlexLayoutHalo?Za.FlexLayoutHalo:Za.FlexLayoutHalo=function(J){J&&
J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"handleDrop",value:function(J){}},{key:"previewDrop",value:function(J){var la=this;0<this.previews.length||(this.previews=J.map(function(La){return la.container.addMorph({type:gb.DropPreview,position:la.container.localize(la.world().firstHand.position),extent:La.bounds().extent()})}),this.previews.forEach(function(La){La.step()}))}},{key:"remove",value:function(){kc._get(Object.getPrototypeOf(ua.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(J){return J.clear()})}},{key:"onDrop",value:function(J){this.removePreviews();J.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(J){J&&(this.originalExtent=this.container.extent);this.target.autoResize=J;J||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(J){this.target.resizeSubmorphs=J;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(J){this.target.align=J}},{key:"updateDirectionPolicy",value:function(J){this.target.direction=J}},{key:"updateSpacing",value:function(J){this.target.spacing=J}},{key:"optionControls",value:function(){var J=this.target,la=J.possibleAlignValues?{fill:gb.Color.transparent,layout:new gb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new gb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:J.align,values:J.possibleAlignValues})]}:null,La=J.possibleDirectionValues?{fill:gb.Color.transparent,layout:new gb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new gb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:J.direction,values:J.possibleDirectionValues})]}:
null,ib=new gb.NumberWidget({fill:gb.Color.white,borderWidth:1,borderRadius:4,padding:gb.rect(5,4,0,0),borderColor:gb.Color.gray,min:0,number:J.spacing,unit:"px"}),Ib=new gb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:gb.Color.transparent,checked:J.autoResize});J=new gb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:gb.Color.transparent,checked:J.resizeSubmorphs});gb.connect(ib,"update",this,"updateSpacing");gb.connect(Ib,
"checked",this,"updateAutoResizePolicy");gb.connect(J,"checked",this,"updateResizeSubmorphsPolicy");la&&gb.connect(la.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");La&&gb.connect(La.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Ib,J].concat($jscomp.arrayFromIterable([la,La].filter(Boolean)),[{fill:gb.Color.transparent,layout:new gb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:gb.Color.gray.darker(),padding:gb.rect(0,5,5,5)},ib]}])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:gb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:22651,end:26838})}(gb.LayoutHalo));gb.FlexLayoutHalo=ud;gb.FlexLayoutHalo=ud;gb.FlexLayoutHalo=ud;fb=za("c",function(hb){var Za=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),ua=Za.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Za.ProportionalLayoutHalo?Za.ProportionalLayoutHalo:Za.ProportionalLayoutHalo=function(J){J&&J[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return kc(ua,hb,[{key:"handleDrop",
value:function(J){}},{key:"onDrop",value:function(J){J.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(J){var la={};this.target.changeSettingsFor(J.submorph,(la[J.axis]=J.policy,la),!0)}},{key:"onSubmorphSettingsDragStart",value:function(J,la){var La=this;J.stop();var ib=this.target.settingsFor(la);la="";for(var Ib in ib)la+=Ib+":"+ib[Ib]+" ";var hc=gb.morph({type:"label",
value:la,isLayoutable:!1});hc.wantsToBeDroppedOn=function(Vb){return La.target.layoutableSubmorphs.includes(Vb)};hc.onBeingDroppedOn=function(Vb,Oc){hc.remove();if(Vb=La.target.layoutableSubmorphs.includes(Oc)?Oc:J.world.morphsContainingPoint(J.hand.position).find(function(Pc){return La.target.layoutableSubmorphs.includes(Pc)}))La.updateSubmorphProportionalLayoutSettings({policy:ib.x,axis:"x",submorph:Vb}),La.updateSubmorphProportionalLayoutSettings({policy:ib.y,axis:"y",submorph:Vb}),Vb.show(),$world.setStatusMessage("layout settings applied")};
J.hand.grab(hc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var J=this,la,La,ib,Ib,hc,Vb,Oc,Pc,Yd,r,Rd,ke;return $jscomp.asyncExecutePromiseGeneratorProgram(function(le){switch(le.nextAddress){case 1:return la=J.target.layoutableSubmorphs,J.env.eventDispatcher.isKeyPressed("Shift")?(ib=la.map(function(ge){return{isListItem:!0,string:String(ge),value:ge}}),le.yield($world.listPrompt("Select morph",ib,{requester:J,onSelection:function(ge){return ge.show()}}),5)):le.yield(gb.InteractiveMorphSelector.selectMorph(J.world(),
J,function(ge){return la.includes(ge)}),4);case 4:La=le.yieldResult;le.jumpTo(3);break;case 5:Ib=le.yieldResult,hc=$jscomp.makeIterator(Ib.selected),La=hc.next().value;case 3:if(!La)return le.return();Vb=J.state.popover.get("controlContainer");Oc=Vb.getAllNamed(/submorph config/);Pc=["move","resize","scale","fixed"];Yd=J.target.settingsFor(La);Oc.length||(Vb.submorphs=[].concat($jscomp.arrayFromIterable(Vb.submorphs),[{name:"submorph config X-Axis policy",position:gb.pt(0,J.height),fill:gb.Color.transparent,
layout:new gb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new gb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Yd.x,values:Pc})]},{name:"submorph config Y-Axis policy",position:gb.pt(0,J.height),fill:gb.Color.transparent,layout:new gb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new gb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:Yd.y,values:Pc})]},gb.morph({position:gb.pt(0,J.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));r=Vb.getSubmorphNamed("x-axis policy selector");Rd=Vb.getSubmorphNamed("y-axis policy selector");ke=Vb.getSubmorphNamed("dragme");gb.disconnect(r,"selectedValue",J,"updateSubmorphProportionalLayoutSettings");gb.disconnect(Rd,"selectedValue",J,"updateSubmorphProportionalLayoutSettings");r.selectedValue=Yd.x;Rd.selectedValue=Yd.y;gb.connect(ke,
"onDragStart",J,"onSubmorphSettingsDragStart",{updater:function(ge,vd){return ge(vd,La)},varMapping:{submorph:La}});gb.connect(r,"selectedValue",J,"updateSubmorphProportionalLayoutSettings",{converter:function(ge){return{policy:ge,axis:"x",submorph:La}},varMapping:{submorph:La}});gb.connect(Rd,"selectedValue",J,"updateSubmorphProportionalLayoutSettings",{converter:function(ge){return{policy:ge,axis:"y",submorph:La}},varMapping:{submorph:La}});le.jumpToEnd()}})}},{key:"optionControls",value:function(J){this.state.popover=
J;var la=this.target;J=new gb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:gb.Color.transparent,checked:la.xAxisEnabled});la=new gb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:gb.Color.transparent,checked:la.yAxisEnabled});var La=new gb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(gb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});gb.connect(J,"checked",this,"updateXAxisEnabled");
gb.connect(la,"checked",this,"updateYAxisEnabled");gb.connect(La,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[La]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:gb.Color.transparent}}}}],Za,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26847,end:32579})}(gb.LayoutHalo));gb.ProportionalLayoutHalo=fb;gb.ProportionalLayoutHalo=fb;gb.ProportionalLayoutHalo=fb;var Id=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Id.Halo=Gc;Id.MorphHighlighter=Ab;Id.InteractiveMorphSelector=Hc;Id.StatusMessage=pa;Id.StatusMessageForMorph=bb;Id.show=U;Id.showConnector=ra;Id.ProportionalLayoutHalo=fb;Id.GridLayoutHalo=Rb;Id.FlexLayoutHalo=ud;Id.showAndSnapToGuides=Ta;Id.removeSnapToGuidesOf=
sa;Id.StatusMessage=pa;Id.StatusMessage=pa;Id.StatusMessageForMorph=bb;Id.StatusMessageForMorph=bb;Id.show=U;Id.show=U;Id.showConnector=ra;Id.showConnector=ra;Id.Halo=Gc;Id.Halo=Gc;Id.MorphHighlighter=Ab;Id.MorphHighlighter=Ab;Id.InteractiveMorphSelector=Hc;Id.InteractiveMorphSelector=Hc;Id.ProportionalLayoutHalo=fb;Id.ProportionalLayoutHalo=fb;Id.GridLayoutHalo=Rb;Id.GridLayoutHalo=Rb;Id.FlexLayoutHalo=ud;Id.FlexLayoutHalo=ud;Id.showAndSnapToGuides=Ta;Id.showAndSnapToGuides=Ta;Id.removeSnapToGuidesOf=
sa;Id.removeSnapToGuidesOf=sa;pa=Object.freeze({__proto__:null,StatusMessage:pa,StatusMessageForMorph:bb,show:U,showConnector:ra,Halo:Gc,MorphHighlighter:Ab,InteractiveMorphSelector:Hc,ProportionalLayoutHalo:fb,GridLayoutHalo:Rb,FlexLayoutHalo:ud,showAndSnapToGuides:Ta,removeSnapToGuidesOf:sa,SvgStyleHalo:void 0});za("i",pa);za({_:void 0,d:void 0})}}});