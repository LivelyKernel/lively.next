System.register(["./__root_module__-28353364.js","./index-2245b428.js","./color-picker-93cc3061.js","./index-d97c8020.js","./index-0def8bbc.js"],function(){var Ia,mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab;return{setters:[function(qc){Ia=qc.M;mb=qc.a;vb=qc.C;Vb=qc.d;Eb=qc.i;Jc=qc.a9;Bc=qc.a7;Uc=qc.$;tc=qc.r;oc=qc.c;sc=qc.bH;Tc=qc.ac;Fd=qc.b;Rd=qc.a8;ee=qc.V;Dc=qc.bm;rd=qc.bn;Ab=qc.bl},function(){},function(){},function(){},function(){}],execute:function(){var qc=lively.FreezerRuntime.recorderFor("ColorPicker/index.js");
qc.Morph=Ia;qc.arr=mb;qc.Color=vb;qc.signal=Vb;var Xc=function(Cc){var ic=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),Qc=ic.hasOwnProperty("ColorPicker")&&"function"===typeof ic.ColorPicker?ic.ColorPicker:ic.ColorPicker=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Eb(Qc,Cc,[{key:"toggleHalos",value:function(jb){this.withAllSubmorphsDo(function(fb){return fb.halosEnabled=jb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(fb){return fb.halosEnabled=
jb})}},{key:"focusOnMorph",value:function(jb,fb){var Ob=jb&&jb.world();Ob&&(Ob.halos().forEach(function(Cb){return Cb.remove()}),Ob.withTopBarDo(function(Cb){return Cb.setEditMode("Hand",!0)}));this._target=jb;fb.isGradient?(this.ui.gradientControl.setGradient(fb,this),this.ui.colorTypeSelector.selection=fb.type):(this.color=fb,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",value:function(){this.remove();var jb=this._target&&this._target.world();jb&&jb.withTopBarDo(function(fb){return fb.setEditMode("Halo",
!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":qc.signal(this,"value",this.gradientValue);break;case "Solid":qc.signal(this,"value",this.color)}}},{key:"switchMode",value:function(jb){var fb=["linearGradient","radialGradient"].includes(jb);this.ui.gradientControl.toggle(fb,this);this.colorMode=jb;this.update();this.confirm()}},{key:"enterColor",value:function(jb){this.color=jb;this.update(this.ui.colorEncoder);
this.confirm()}},{key:"adjustColor",value:function(jb){this.color=jb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(jb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[jb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(jb){this.hsb=[jb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(jb){var fb=$jscomp.makeIterator(jb);jb=fb.next().value;
fb=fb.next().value;this.hsb=[this.hsb[0],fb,jb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(jb){this.confirm()}},{key:"update",value:function(jb){for(var fb=[],Ob=0;Ob<arguments.length;++Ob)fb[Ob-0]=arguments[Ob];var Cb=this;qc.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(fb),[this.ui.colorTypeSelector])).forEach(function(ob){return ob.update(Cb)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},
{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(qc.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(jb){this.ui.gradientControl.gradientValue=jb}},color:{derived:!0,get:function(){return qc.Color.hsb.apply(qc.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},set:function(jb){this.hsb=[].concat($jscomp.arrayFromIterable(jb.toHSB()),
[jb.a])}},solidOnly:{derived:!0,set:function(jb){var fb=this.ui.colorTypeSelector;jb&&(fb.selection="Solid");fb.visible=!jb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],ic,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(qc.Morph);Xc=qc.ColorPicker;qc.default=Xc;var zc=lively.FreezerRuntime.recorderFor("GradientControl/index.js");zc.Morph=Ia;zc.LinearGradient=Jc;zc.RadialGradient=Bc;zc.Color=vb;zc.rect=Uc;zc.resource=tc;zc.connect=oc;zc.noUpdate=sc;zc.signal=Vb;zc.num=Tc;zc.arr=mb;Xc=function(Cc){var ic=
lively.FreezerRuntime.recorderFor("GradientControl/index.js"),Qc=ic.hasOwnProperty("GradientControl")&&"function"===typeof ic.GradientControl?ic.GradientControl:ic.GradientControl=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Eb(Qc,Cc,[{key:"onKeyDown",value:function(jb){Eb._get(Object.getPrototypeOf(Qc.prototype),"onKeyDown",this).call(this,jb);"Delete"==jb.keyCombo&&this.removeStop(this.selectedStopControl)}},
{key:"onMouseDown",value:function(jb){Eb._get(Object.getPrototypeOf(Qc.prototype),"onMouseDown",this).call(this,jb);"gradient preview"==jb.targetMorph.name&&(jb=jb.positionIn(jb.targetMorph).x/jb.targetMorph.width,this.addStopAt(jb))}},{key:"removeStop",value:function(jb){3>this.gradientValue.stops.length||(zc.arr.remove(this.gradientValue.stops,jb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",value:function(jb){var fb=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Ob=$jscomp.makeIterator(zc.arr.sortBy(zc.arr.sortBy(fb,
function(ob){return Math.abs(ob.offset-jb)}).slice(0,2),function(ob){return ob.offset})),Cb=Ob.next().value;Ob=Ob.next().value;fb.push({color:Cb.color.interpolate((jb-Cb.offset)/(Ob.offset-Cb.offset),Ob.color),offset:jb});this.gradientValue.stops=zc.arr.sortBy(fb,function(ob){return ob.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(jb,fb){(this.isLayoutable=this.visible=jb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();jb||this.reset()}},{key:"reset",value:function(){this.gradientValue=
null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(jb){return jb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(jb){this.gradientValue=jb.isGradient?new zc.LinearGradient({stops:jb.stops}):new zc.LinearGradient({stops:[{color:jb,offset:0},{color:zc.Color.transparent,offset:1}]})}},{key:"initRadialGradient",value:function(jb,fb){fb=fb.innerBounds();this.gradientValue=jb.isGradient?new zc.RadialGradient({bounds:fb,stops:jb.stops}):new zc.RadialGradient({bounds:fb,
stops:[{color:jb,offset:0},{color:zc.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(jb,fb){this.gradientValue=jb;this.gradientHalo.initFromPicker(fb)}},{key:"update",value:function(jb){if(!this.isDisabled){var fb=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==jb.colorMode||("linearGradient"==jb.colorMode&&this.initLinearGradient(this.gradientValue||jb.color),"radialGradient"==jb.colorMode&&this.initRadialGradient(this.gradientValue||jb.color,jb._target),
this.gradientHalo.initFromPicker(jb),this.gradientHalo.confirm());if(fb){var Ob=this.gradientValue.stops.find(function(Cb){return fb.stop==Cb});Ob&&(Ob.color=jb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(jb){var fb=this.getSubmorphNamed("gradient preview").bounds().topEdge();return fb.start.interpolate(jb.offset,fb.end).subXY(0,5)}},{key:"confirm",value:function(){zc.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var jb=
this.getSubmorphNamed("gradient"),fb=this.gradientValue.stops.map(function(Ob){return Object.assign({},Ob)});jb.fill=new zc.LinearGradient({vector:zc.rect(0),stops:fb});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(jb){var fb=$jscomp.makeIterator(jb);jb=fb.next().value;fb=fb.next().value/this.getSubmorphNamed("gradient preview").width;this.adjustStop(jb,fb)}},{key:"adjustStop",value:function(jb,fb){jb.offset=zc.num.clamp(jb.offset+
fb,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(jb){this.addMorph(jb)}},{key:"getControlFor",value:function(jb,fb){fb=void 0===fb?this:fb;var Ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cb){if(1==Cb.nextAddress)return Cb.yield(zc.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Ob=Cb.yieldResult;Ob.withAllSubmorphsDo(function(ob){return ob.halosEnabled=!1});fb.placeStop(Ob);zc.connect(Ob,"select",fb,"selectStop");zc.connect(Ob,"moveColorStop",
fb,"moveStop");return Cb.return(Ob.forStop(jb))})}},{key:"selectStop",value:function(jb){this.deselectAllStopsExcept(jb,this);this.deselectAllStopsExcept(jb,this.gradientHalo);zc.signal(this,"switchColor",jb.stop.color)}},{key:"deselectAllStopsExcept",value:function(jb,fb){zc.noUpdate(function(){fb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Ob){Ob.stop!=jb.stop?Ob.deselect():Ob.select()})})}},{key:"updateStopControls",value:function(jb,fb){fb=void 0===fb?this:fb;var Ob=this,Cb,ob,
bc,Ma,Db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){switch(gb.nextAddress){case 1:if(fb._active)return gb.return();fb._active=!0;Cb=fb.getSubmorphsByStyleClassName("ColorStop");ob=$jscomp.makeIterator(jb);bc=ob.next();case 2:if(bc.done){gb.jumpTo(4);break}Ma=bc.value;if(Db=Cb.shift()){Db.forStop(Ma);gb.jumpTo(3);break}return gb.yield(Ob.getControlFor(Ma,fb),3);case 3:bc=ob.next();gb.jumpTo(2);break;case 4:zc.arr.invoke(Cb,"remove"),fb.getSubmorphsByStyleClassName("ColorStop").forEach(function(zb){zb.positionIn(fb)}),
fb._active=!1,gb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,get:function(){return this.stopControls.find(function(jb){return jb.isSelected})}}}}}],ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(zc.Morph);Xc=zc.GradientControl;zc.default=Xc;var ed=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");ed.Morph=Ia;ed.arr=mb;ed.resource=tc;ed.connect=oc;ed.signal=Vb;ed.pt=Fd;ed.RadialGradient=Bc;ed.LinearGradient=Jc;ed.Point=Rd;Xc=function(Cc){var ic=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),Qc=ic.hasOwnProperty("GradientHalo")&&
"function"===typeof ic.GradientHalo?ic.GradientHalo:ic.GradientHalo=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Eb(Qc,Cc,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(jb){return jb.remove()})}},{key:"initFromPicker",value:function(jb){var fb=jb.gradientValue;this.picker=jb;"linearGradient"==fb.type&&this.initFromLinearGradient(this.targetMorph,fb);"radialGradient"==
fb.type&&this.initFromRadialGradient(this.targetMorph,fb);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(jb,fb){jb=jb.innerBounds();fb=fb.vectorAsAngle();var Ob=jb.center(),Cb=Math.max(jb.height,jb.width),ob=Ob.addPt(ed.Point.polar(Cb,fb));fb=Ob.subPt(ed.Point.polar(Cb,fb));Ob=$jscomp.makeIterator(jb.lineIntersection(fb.lineTo(ob)));fb=Ob.next().value;var bc=Ob.next().value;Ob=ed.arr.min([fb,bc],function(Ma){return Ma.dist(ob)});this.originPoint=Ob==fb?bc:fb;this.directionPoint=
Ob;this.orthogonalDist=ed.arr.min(jb.edges(),function(Ma){return Ma.distanceFromLine(bc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(jb,fb){jb=jb.innerBounds().relativeToAbsPoint(fb.focus);var Ob=fb.bounds;fb=Ob.height;Ob=Ob.width;this.originPoint=jb;this.directionPoint=jb.addXY(0,fb/2);this.orthogonalDist=Ob/2;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){var jb=this.ui,fb=jb.directionHandle,Ob=jb.orthogonalHandle,Cb=jb.colorStopWrapper;jb.originHandle.center=
ed.pt(0);fb.center=ed.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);Cb.width=this.width;fb.center=ed.pt(this.width,0);Ob.center=ed.pt(0,this.orthogonalDist);0<this.orthogonalDist?(Cb.tilted=1,Cb.position=ed.pt(this.width/2,this.height/4-1)):(Cb.tilted=0,Cb.position=ed.pt(this.width/2,-this.height/4+1));this.position=this.targetMorph.worldPoint(this.originPoint);this.rotation=this.angle}},{key:"confirm",value:function(){var jb=this.picker.ui.gradientControl;"linearGradient"==
jb.gradientValue.type&&(jb.gradientValue.vector=this.angle);if("radialGradient"==jb.gradientValue.type){var fb=jb.gradientValue,Ob=2*Math.abs(this.orthogonalDist),Cb=2*this.originPoint.dist(this.directionPoint);fb.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());fb.bounds=ed.pt(0,0).extent(ed.pt(Ob,Cb));fb.angle=this.angle}jb.confirm();this.refresh(jb,this.targetMorph);this.alignWithTarget()}},{key:"normalize",value:function(jb){return this.getGlobalTransform().transformDirection(jb)}},
{key:"moveOriginHandle",value:function(jb){jb=this.normalize(jb.state.dragDelta);this.originPoint=this.originPoint.addPt(jb);this.confirm()}},{key:"moveDirectionHandle",value:function(jb){jb=this.normalize(jb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(jb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(jb){jb=this.normalize(jb.state.dragDelta);this.orthogonalDist-=jb.dotProduct(ed.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(jb){var fb=
$jscomp.makeIterator(jb);jb=fb.next().value;fb=fb.next().value;this.picker.ui.gradientControl.adjustStop(jb,fb/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(jb,fb){fb=jb.gradientValue;this.alignWithTarget();jb.updateStopControls(fb.stops,this)}},{key:"placeStop",value:function(jb){this.get("color stop wrapper").addMorph(jb)}},{key:"selectStop",value:function(jb){this.picker.ui.gradientControl.selectStop(jb)}},{key:"getPositionFor",value:function(jb){var fb=this.getSubmorphNamed("color stop wrapper"),
Ob=fb.innerBounds().bottomEdge();return Ob.start.interpolate(jb.offset,Ob.end).subXY(0,5).subPt(fb.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),
colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5821})}(ed.Morph);Xc=ed.GradientHalo;ed.default=Xc;var wd=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");
wd.Morph=Ia;wd.pt=Fd;wd.Color=vb;wd.LinearGradient=Jc;wd.signal=Vb;wd.num=Tc;Xc=function(Cc){var ic=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),Qc=ic.hasOwnProperty("OpacityPicker")&&"function"===typeof ic.OpacityPicker?ic.OpacityPicker:ic.OpacityPicker=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Eb(Qc,Cc,[{key:"confirm",value:function(){wd.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",
value:function(jb){var fb=this.get("slider").width;this.sliderPosition=wd.pt(0,jb.positionIn(this).y-fb/2);this.confirm()}},{key:"onDrag",value:function(jb){var fb=this.get("slider").width;this.sliderPosition=wd.pt(0,jb.positionIn(this).y-fb/2);this.confirm()}},{key:"update",value:function(jb){this.alpha=jb.color.a;this.getSubmorphNamed("opacity gradient").fill=new wd.LinearGradient({stops:[{offset:0,color:jb.color.withA(0)},{offset:1,color:jb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=
this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return wd.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(jb){this.alpha=wd.num.clamp(jb.y/(this.height-10),0,1);this.refresh()}}}}}],ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(wd.Morph);Xc=wd.OpacityPicker;wd.default=Xc;var xb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");xb.Morph=Ia;xb.Color=vb;xb.signal=Vb;xb.noUpdate=sc;xb.num=Tc;Xc=function(Cc){var ic=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),Qc=ic.hasOwnProperty("ColorEncoder")&&"function"===typeof ic.ColorEncoder?ic.ColorEncoder:ic.ColorEncoder=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Eb(Qc,Cc,[{key:"update",value:function(jb){this.currentColor=jb.hsb;this.refresh()}},{key:"refresh",value:function(){var jb=this,fb=this.currentColor;xb.noUpdate(function(){({Hex:function(){return jb.updateHex(fb)},RGB:function(){return jb.updateRGB(fb)},HSL:function(){return jb.updateHSL(fb)},HSB:function(){return jb.updateHSB(fb)},CSS:function(){return jb.updateCSS(fb)}})[jb.encodingMode]()})}},{key:"updateHex",value:function(jb){jb=
xb.Color.hsb.apply(xb.Color,$jscomp.arrayFromIterable(jb)).withA(xb.num.roundTo(jb[3],.01));var fb=this.getSubmorphNamed("hex input"),Ob=this.getSubmorphNamed("hex opacity control");fb.input=jb.toHexString().toUpperCase();Ob.number=jb.a}},{key:"updateRGB",value:function(jb){var fb=this.getSubmorphNamed("first value"),Ob=this.getSubmorphNamed("second value"),Cb=this.getSubmorphNamed("third value"),ob=this.getSubmorphNamed("opacity control"),bc=$jscomp.makeIterator(xb.Color.hsb.apply(xb.Color,$jscomp.arrayFromIterable(jb)).toTuple()),
Ma=bc.next().value,Db=bc.next().value;bc=bc.next().value;jb=jb[3];fb.number=255*Ma;Ob.number=255*Db;Cb.number=255*bc;ob.number=jb}},{key:"updateHSL",value:function(jb,fb){fb=void 0===fb?!0:fb;var Ob=this.getSubmorphNamed("first value"),Cb=this.getSubmorphNamed("second value"),ob=this.getSubmorphNamed("third value"),bc=this.getSubmorphNamed("opacity control"),Ma=$jscomp.makeIterator(jb),Db=Ma.next().value,gb=Ma.next().value;Ma=Ma.next().value;ob.number=fb?1-Ma:Ma;Ob.number=Db;Cb.number=gb;bc.number=
jb[3]}},{key:"updateHSB",value:function(jb){this.updateHSL(jb,!1)}},{key:"updateCSS",value:function(jb){var fb=this.getSubmorphNamed("css input");jb=xb.Color.hsb.apply(xb.Color,$jscomp.arrayFromIterable(jb)).withA(xb.num.roundTo(jb[3],.01));fb.input=jb.toCSSString()}},{key:"confirm",value:function(){var jb=this;({Hex:function(){return jb.confirmHex()},RGB:function(){return jb.confirmRGB()},HSL:function(){return jb.confirmHSL()},HSB:function(){return jb.confirmHSB()},CSS:function(){return jb.confirmCSS()}})[this.encodingMode]()}},
{key:"confirmHex",value:function(){var jb=this.getSubmorphNamed("hex input"),fb=this.getSubmorphNamed("hex opacity control");jb=xb.Color.rgbHex(jb.input).withA(fb.number);xb.signal(this,"colorEntered",jb)}},{key:"confirmRGB",value:function(){var jb=this.getSubmorphNamed("first value"),fb=this.getSubmorphNamed("second value"),Ob=this.getSubmorphNamed("third value"),Cb=this.getSubmorphNamed("opacity control");jb=xb.Color.rgba(jb.number,fb.number,Ob.number,Cb.number);xb.signal(this,"colorEntered",jb)}},
{key:"confirmHSL",value:function(){var jb=this.getSubmorphNamed("first value"),fb=this.getSubmorphNamed("second value"),Ob=this.getSubmorphNamed("third value"),Cb=this.getSubmorphNamed("opacity control");jb=xb.Color.hsb(jb.number,fb.number,1-Ob.number).withA(Cb.number);xb.signal(this,"colorEntered",jb)}},{key:"confirmHSB",value:function(){var jb=this.getSubmorphNamed("first value"),fb=this.getSubmorphNamed("second value"),Ob=this.getSubmorphNamed("third value"),Cb=this.getSubmorphNamed("opacity control");
jb=xb.Color.hsb(jb.number,fb.number,Ob.number).withA(Cb.number);xb.signal(this,"colorEntered",jb)}},{key:"confirmCSS",value:function(){var jb=this.getSubmorphNamed("css input");jb=xb.Color.fromString(jb.input);xb.signal(this,"colorEntered",jb)}},{key:"selectEncoding",value:function(jb){this.encodingMode=jb;this.submorphs.map(function(Ob){return Ob.visible=Ob.isLayoutable=!1});var fb=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[jb]);
fb.visible=fb.isLayoutable=!0;"RGB"==jb&&[fb.getSubmorphNamed("first value"),fb.getSubmorphNamed("second value"),fb.getSubmorphNamed("third value")].forEach(function(Ob){Object.assign(Ob,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(jb)&&(Object.assign(fb.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[fb.getSubmorphNamed("second value"),fb.getSubmorphNamed("third value")].forEach(function(Ob){Object.assign(Ob,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:xb.Color.white}}}}],ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-41"}}},{start:211,end:5347})}(xb.Morph);Xc=xb.ColorEncoder;xb.default=
Xc;var hc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");hc.HTMLMorph=ee;hc.arr=mb;hc.materialDesignColors=Dc;hc.webSafeColors=rd;hc.flatDesignColors=Ab;hc.Color=vb;hc.signal=Vb;Xc=function(Cc){var ic=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),Qc=ic.hasOwnProperty("ColorPaletteView")&&"function"===typeof ic.ColorPaletteView?ic.ColorPaletteView:ic.ColorPaletteView=function(jb){jb&&jb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Eb(Qc,Cc,[{key:"test",value:function(){this.showPalette(hc.materialDesignColors.map(function(jb){return hc.Color.rgbHex(jb)}))}},{key:"selectPalette",value:function(jb){var fb={"Flat Design":hc.flatDesignColors,Material:hc.materialDesignColors,"Web Safe":hc.webSafeColors};fb[jb]&&this.showPalette(fb[jb].map(function(Ob){return hc.Color.rgbHex(Ob)}))}},{key:"onMouseDown",value:function(jb){Eb._get(Object.getPrototypeOf(Qc.prototype),"onMouseDown",this).call(this,jb);(jb=jb.domEvt.target.dataset.color)&&
hc.signal(this,"colorSelected",hc.Color.fromString(jb))}},{key:"showPalette",value:function(jb){this.html='<div class="palette-container">\n      '+jb.map(function(fb){return'<div class="color-cell" data-color="'+fb+'" style="background: '+fb+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(hc.HTMLMorph);Xc=hc.ColorPaletteView;hc.default=Xc}}});