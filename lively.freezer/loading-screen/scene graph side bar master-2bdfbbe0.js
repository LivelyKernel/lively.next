System.register("./__root_module__-7487a13e.js kld-intersections ./index-e37496ed.js ./index-014f5f9e.js ./index-217a7911.js ./color-picker-62758da8.js ./editor-plugin-4aa56136.js ./index-48d24552.js ./editor-plugin-22f4bc37.js ./index-51aaa4bb.js".split(" "),function(){var ta,ob,ub,Tb,Jb,rd,yc,vd,zc,Ec,Mc,zd,ne,De,Xd,Qb,qc,ld,Pb,ud,Ed,vc,ac,Eb,ec,wc,fd,cd,pc,cb,fb,ya,Ea,Ba,xa,Qa,wb,fc,$a,ib,ab,U;return{setters:[function(ua){ta=ua.aw;ob=ua.an;ub=ua.aC;Tb=ua.aa;Jb=ua.a3;rd=ua.ax;yc=ua.au;vd=ua.aj;
zc=ua.C;Ec=ua.a2;Mc=ua.a6;zd=ua.$;ne=ua.a_;De=ua.P;Xd=ua.a8;Qb=ua.aD;qc=ua.ap;ld=ua.aZ;Pb=ua.as;ud=ua.aq;Ed=ua.ab;vc=ua.bp;ac=ua.br;Eb=ua.bO;ec=ua.b4;wc=ua.bk;fd=ua.aP;cd=ua.l;pc=ua.a1;cb=ua.bP;fb=ua.aY;ya=ua.a$;Ea=ua.at;Ba=ua.a4;xa=ua.aV;Qa=ua.av;wb=ua.bQ},function(){},function(){},function(){},function(ua){fc=ua.d;$a=ua.s;ib=ua.I;ab=ua.M},function(){},function(ua){U=ua.I},function(){},function(){},function(){}],execute:function(){function ua(bb){var Bc=bb.sourceObj,uc=bb.targetObj;Bc.isMorph&&uc.isMorph?
(Bc.show(),uc.show(),Ta.showConnector&&Ta.showConnector(Bc,uc)):Ta.show(String(bb))}function M(bb){var Bc=bb.sourceObj,uc=bb.sourceAttrName,Sa=bb.targetObj,Da=bb.targetMethodName,Ya=bb.getConverter();bb=bb.getUpdater();return Ta.printConnectionElements(Bc,uc,Sa,Da,Ya,bb)}function ea(bb,Bc,uc,Sa,Da,Ya){bb="/* global connect, source, target */\nconnect(source, '"+Bc+"', target, '"+Sa+"'";if(Da||Ya)bb+=", {\n";Da&&(bb+="  converter: "+Da);Da&&Ya&&(bb+=",");Da&&(bb+="\n");Ya&&(bb+="  updater: "+Ya+"\n");
if(Da||Ya)bb+="}";return bb+");"}function Ka(bb,Bc){var uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sa){if(1==Sa.nextAddress)return Sa.yield(Ta.InteractiveMorphSelector.selectMorph(),2);uc=Sa.yieldResult;return Sa.return(uc?Ta.interactiveConnectGivenSourceAndTarget(bb,Bc,uc):null)})}function Za(bb,Bc,uc,Sa){var Da,Ya,Na,oc,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){switch(na.nextAddress){case 1:Da=uc&&uc.world().targetDataBindings(uc);Ya=bb.world();if(!Da||
!Da.length)return Ya.setStatusMessage("connect canceled"),na.return();if(Bc){na.jumpTo(2);break}Na=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ta.arr.flatten(bb.world().targetDataBindings(bb)).map(function(gb){return{isListItem:!0,string:gb.signature||gb.name,value:gb}})));return na.yield(Ya.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Na,{filterable:!0}),3);case 3:Bc=na.yieldResult;if("canceled"==Bc.status)return na.return();Bc=Bc.selected[0];Bc=Bc.custom?"sourceAttribute":Bc.name;case 2:return oc=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ta.arr.flatten(Da).map(function(gb){return{isListItem:!0,value:gb,string:gb.signature||gb.name}}))),na.yield(Ya.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],oc,{filterable:!0}),4);case 4:aa=na.yieldResult;if("canceled"==aa.status)return na.return();aa=aa.selected[0];return na.yield(Ta.interactivelyEvaluateConnection({sourceObj:bb,sourceAttr:Bc,targetObj:uc,targetAttr:aa.custom?"targetAttribute":aa.name,onConnect:Sa,prompt:"Edit and confirm connection:"}),0)}})}function $b(bb,Bc,uc,Sa){Bc=void 0===Bc?"confirm connection":Bc;var Da,Ya,Na,oc,aa,na,gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){Da=
bb;Ya=Da.sourceObj;Na=Da.sourceAttrName;oc=Da.targetObj;aa=Da.targetMethodName;na=bb.getConverter();gb=bb.getUpdater();return H.return(Ta.interactivelyEvaluateConnection({sourceObj:Ya,sourceAttr:Na,targetObj:oc,targetAttr:aa,converter:na,updater:gb,prompt:Bc,highlight:uc,onConnect:Sa}))})}function Qc(bb,Bc,uc,Sa,Da){Sa=void 0===Sa?{}:Sa;Da=Ta.rect(0).sides.concat(Ta.rect(0).corners);uc=uc||new Ta.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ta.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ta.Color.transparent,
nativeCursor:"auto"},end:{fill:Ta.Color.orange}}},Sa,{hasFixedPosition:!0}));uc.startPoint.attachTo(bb,"rightCenter");Bc.isMorph?(Sa=Bc.globalBounds().partNameNearest(Da,bb.globalPosition),bb.globalPosition.equals(Bc.globalBounds().partNamed(Sa))&&Bc.globalBounds().partNameNearest(Ta.arr.without(Da,Sa),bb.globalPosition),uc.endPoint.attachTo(Bc,"leftCenter")):(Da=bb.globalBounds().topRight().addPt(Ta.pt(100,0)),Bc=Ta.morph({type:"label",value:Bc.toString(),styleClasses:["Tooltip"],padding:Ta.rect(8,
4)}).openInWorld(Da),Bc.position=bb.world().bounds().translateForInclusion(Bc.bounds()).topLeft(),Ta.once(uc,"remove",Bc,"remove"),uc.endPoint.attachTo(Bc,"leftCenter"));return uc}function Ub(bb){var Bc,uc,Sa,Da,Ya,Na,oc,aa,na,gb,H,ha,Ga,lb,Sb,Ab,sc,Fc,Fd,Ee;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cd){switch(Cd.nextAddress){case 1:Bc=bb;uc=Bc.sourceObj;Sa=Bc.sourceAttr;Da=Bc.targetObj;Ya=Bc.targetAttr;Na=Bc.converter;oc=Bc.updater;aa=Bc.prompt;na=void 0===Bc.highlight?!0:Bc.highlight;
gb=Bc.onConnect;H="lively://lively.bindings-interactive-connect/x"+uc.id;ha={context:window,format:"esm",targetModule:H,classTransform:Ta.classToFunctionTransform};Ga=Ta.printConnectionElements(uc,Sa,Da,Ya,Na,oc);Da.isMorph&&uc.isMorph&&(lb=Da.propertiesAndPropertySettings().properties[Ya]||{type:typeof Da[Ya]},Sb=lb.type,Ab=uc.propertiesAndPropertySettings().properties[Sa]||{type:typeof uc[Sa]},sc=Ab.type,sc!==Sb&&(aa=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
uc.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Da.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Fc={};Object.assign(lively.modules.module(H).recorder,(Fc.source=uc,Fc.target=Da,Fc.connect=Ta.connect,Fc.once=Ta.once,Fc[Sa]=uc[Sa],Fc));if(!aa){Fd=Ga;Cd.jumpTo(2);break}return Cd.yield($world.editPrompt(aa,{input:Ga,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:ha,
animated:!1}),3);case 3:if(Fd=Cd.yieldResult,!Fd)return $world.setStatusMessage("connect canceled"),Cd.return();case 2:return Cd.yield(lively.vm.runEval(Fd,ha),4);case 4:Ee=Cd.yieldResult;if(Ee.isError)return $world.logError(Ee.value),Cd.return(Ub({sourceObj:uc,sourceAttr:Sa,targetObj:Da,targetAttr:Ya,converter:Na,updater:oc,prompt:"confirm connection",highlight:na,onConnect:gb}));na&&($world.setStatusMessage("connected!",Ta.Color.green),Ta.interactivelyShowConnection(Ee.value));"function"===typeof gb&&
gb(Ee);Cd.jumpToEnd()}})}var vb=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");vb.Inspector=U;var pd=function(bb){var Bc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),uc=Bc.hasOwnProperty("ProtoInspector")&&"function"===typeof Bc.ProtoInspector?Bc.ProtoInspector:Bc.ProtoInspector=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(vb.Inspector);pd=vb.ProtoInspector;vb.default=pd;var $c=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
$c.Morph=ob;$c.touchInputDevice=ub;$c.easings=Tb;$c.pt=Jb;$c.fun=rd;$c.connect=yc;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),uc=Bc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Bc.MorphicSideBar?Bc.MorphicSideBar:Bc.MorphicSideBar=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(Sa){Sa=void 0===Sa?!0:Sa;if(this.respondsToVisibleWindow){var Da=$world.visibleBounds(),Ya=navigator.standalone&&$c.touchInputDevice?25:0;this.height=Da.height-Ya;this.top=Ya+Da.top();Ya=this.get("horizontal resizer");Ya.height=this.height;Ya.top=0;Sa&&(this.visible?this.topLeft=Da.topLeft():this.topRight=Da.topLeft())}}},{key:"switchMode",value:function(Sa){"inspector"==Sa&&this.showInspector();"connections"==Sa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Sa){var Da=this,Ya,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){switch(oc.nextAddress){case 1:Ya=$world.visibleBounds();Na=navigator.standalone&&$c.touchInputDevice?25:0;Da.height=Ya.height-Na;Da.top=Na+Ya.top();if(Sa)return $world.addMorph(Da,$world.get("lively top bar")),Da.topRight=Ya.topLeft(),
Da.attachToWorld($world),Da.visible=!0,oc.yield(Da.whenRendered(),5);Da.detachFromWorld($world);return oc.yield(Da.animate({opacity:0,topRight:Ya.topLeft(),duration:300}),4);case 4:Da.visible=!1;Da.remove();oc.jumpTo(0);break;case 5:return Da.onWorldResize(!1),Da.get("scene graph").adjustProportions(),oc.yield(Da.animate({opacity:1,easing:$c.easings.outCirc,topLeft:Ya.topLeft(),duration:300}),6);case 6:Da.get("scene graph").refresh(),oc.jumpToEnd()}})}},{key:"attachToWorld",value:function(Sa){$c.connect(Sa,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});$c.connect(Sa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});$c.connect(Sa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Sa){var Da=this;Sa.attributeConnections.forEach(function(Ya){Ya.targetObj===Da&&Ya.disconnect()})}},{key:"selectNode",value:function(Sa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Sa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Sa)}},
{key:"onHierarchyChange",value:function(Sa){var Da=this,Ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if("addMorphAt"===Sa.selector||"removeMorph"===Sa.selector||"name"===Sa.prop){Ya=Da._sceneGraph||(Da._sceneGraph=Da.getSubmorphNamed("scene graph"));if(!Ya||!Ya.owner.visible||Sa.target&&Sa.target.isHand||Sa.target&&Ya.ignoreMorph(Sa.target)||Sa.args&&!Sa.args[0].isHalo&&Ya.ignoreMorph(Sa.args[0])||Sa.target.ownerChain().find(function(oc){return Ya.ignoreMorph(oc)}))return Na.return();
$c.fun.debounceNamed("scene-graph-update",50,function(){return Ya.refresh()})()}Na.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}($c.Morph);vb=$c.MorphicSideBar;$c.default=vb;var Ta=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Ta.interactivelyShowConnection=ua;Ta.printConnection=M;Ta.printConnectionElements=ea;Ta.interactiveConnectGivenSource=Ka;Ta.interactiveConnectGivenSourceAndTarget=Za;Ta.interactivelyReEvaluateConnection=$b;Ta.visualizeConnection=Qc;Ta.interactivelyEvaluateConnection=Ub;Ta.connect=yc;Ta.once=vd;Ta.Color=zc;Ta.rect=Ec;Ta.pt=Jb;Ta.arr=Mc;Ta.promise=zd;Ta.properties=ne;
Ta.Path=De;Ta.obj=Xd;Ta.HorizontalLayout=Qb;Ta.Morph=ob;Ta.VerticalLayout=qc;Ta.StyleSheet=ld;Ta.Icon=Pb;Ta.GridLayout=ud;Ta.morph=Ed;Ta.TreeData=vc;Ta.Tree=ac;Ta.Leash=Eb;Ta.LabeledCheckBox=ec;Ta.SearchField=wc;Ta.showConnector=fc;Ta.show=$a;Ta.InteractiveMorphSelector=ib;Ta.MorphHighlighter=ab;Ta.Window=fd;Ta.classToFunctionTransform=cd;Ta.interactivelyShowConnection=ua;Ta.interactivelyShowConnection=ua;Ta.printConnection=M;Ta.printConnection=M;Ta.printConnectionElements=ea;Ta.printConnectionElements=
ea;Ta.interactiveConnectGivenSource=Ka;Ta.interactiveConnectGivenSource=Ka;Ta.interactiveConnectGivenSourceAndTarget=Za;Ta.interactiveConnectGivenSourceAndTarget=Za;Ta.interactivelyReEvaluateConnection=$b;Ta.interactivelyReEvaluateConnection=$b;Ta.visualizeConnection=Qc;Ta.visualizeConnection=Qc;Ta.interactivelyEvaluateConnection=Ub;Ta.interactivelyEvaluateConnection=Ub;var mb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");mb.Tree=ac;mb.TreeData=vc;mb.morph=Ed;mb.Icon=Pb;mb.HorizontalLayout=
Qb;mb.easings=Tb;mb.Morph=ob;mb.Color=zc;mb.Rectangle=pc;mb.rect=Ec;mb.pt=Jb;mb.connect=yc;mb.noUpdate=cb;mb.disconnect=fb;mb.disconnectAll=ya;mb.once=vd;mb.arr=Mc;mb.num=Ea;mb.fun=rd;mb.tree=Ba;mb.promise=zd;mb.ConnectionHalo=_missingExportShim;mb.getClassName=xa;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),uc=Bc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Bc.InteractiveTreeContainer?Bc.InteractiveTreeContainer:Bc.InteractiveTreeContainer=
function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"onChildRemoved",value:function(Sa){}},{key:"onChildAdded",value:function(Sa){}},{key:"toggleSelected",value:function(Sa){if(this.tree){var Da=this.tree,Ya=Da.selectionFontColor,Na=Da.nonSelectionFontColor;this.submorphs.filter(function(oc){return!oc._isControlElement&&oc.styleClasses.includes("Label")}).forEach(function(oc){oc.fontColor=Sa?Ya:Na})}}},
{key:"onGrab",value:function(Sa){var Da=this.tree,Ya=this.node;this.fill=mb.Color.gray.withA(.5);this.fontColor=Da.selectionFontColor;this.opacity=.8;ta._get(Object.getPrototypeOf(uc.prototype),"onGrab",this).call(this,Sa);Ya&&(this.toggleSelected(!1),Da.collapse(Ya),Da.treeData.parentNode(Ya).container.onChildRemoved(this),this._data=Da.treeData.remove(Ya),Ya.container.target.remove(),Da.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Sa){this.showPreviewOn(Sa);return!0}},{key:"showPreviewOn",
value:function(Sa){if(Sa.isContainer)var Da=Sa.tree;Sa.isTree&&(Da=Sa);Da&&Da.showDropPreviewFor&&Da.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Sa){var Da=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ya){if(1==Ya.nextAddress)return Da.tree.treeData.add(Sa._data,Da.node,Da.node.children[0]),Da.tree.uncollapse(Da.node),Da.tree.treeData.remove(Da.tree._previewNode),Ya.yield(Da.tree.whenRendered(),2);Da.tree.update(!0);Da.onChildAdded(Sa);Ya.jumpToEnd()})}},{key:"onBeingDroppedOn",
value:function(Sa,Da){var Ya=this;debugger;this.tree._dropInProgress=!0;ta._get(Object.getPrototypeOf(uc.prototype),"onBeingDroppedOn",this).call(this,Sa,Da);Sa=function(){Ya.fill=mb.Color.gray.withA(.5);Ya.opacity=1;Ya.tree._dropInProgress=!1;Ya.tree.refresh()};Da.isTree?Da.insertAtPlaceholder(this).then(Sa):Da.isContainer?Da.insertAsChild(this).then(Sa):Sa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:mb.Color.transparent},
isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Sa=this,Da=this.tree.treeData;return Da&&Da.asList().find(function(Ya){return Ya.container===Sa})}}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:498,end:2975})}(mb.Morph);mb.InteractiveTreeContainer=
vb;mb.InteractiveTreeContainer=vb;mb.InteractiveTreeContainer=vb;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),uc=Bc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Bc.InteractiveTreeData?Bc.InteractiveTreeData:Bc.InteractiveTreeData=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"display",value:function(Sa){return[Sa.container||"<NO CONTAINER>",
{}]}},{key:"isCollapsed",value:function(Sa){return Sa.isCollapsed}},{key:"collapse",value:function(Sa,Da){Sa.isCollapsed=Da}},{key:"getChildren",value:function(Sa){var Da=this;return Sa.isLeaf?null:Sa.children.filter(function(Ya){return Ya&&(Da.filterActive?Ya.visible:!0)})}},{key:"isLeaf",value:function(Sa){var Da=this;return!Sa.children||0==Sa.children.filter(function(Ya){return Ya&&(Da.filterActive?Ya.visible:!0)}).length}},{key:"add",value:function(Sa,Da,Ya){Da=void 0===Da?this.root:Da;Da.children||
(Da.children=[]);Ya?mb.arr.pushAt(Da.children,Sa,Da.children.indexOf(Ya)):Da.children.push(Sa);Da.isLeaf=!1}},{key:"replace",value:function(Sa,Da){var Ya=this.parentNode(Sa);Sa=Ya.children.indexOf(Sa);Ya.children[Sa]=Da}},{key:"next",value:function(Sa){var Da=this.parentNode(Sa);return Da&&Da.children[Da.children.indexOf(Sa)+1]}},{key:"isBefore",value:function(Sa,Da){this.next(Sa)===Da}},{key:"isAfter",value:function(Sa,Da){this.next(Da)===Sa}},{key:"addBefore",value:function(Sa,Da){this.add(Sa,this.parentNode(Da),
Da)}},{key:"addAfter",value:function(Sa,Da){var Ya=this.parentNode(Da);Da=Ya.children.indexOf(Da)+1;this.add(Sa,Ya,Ya.children[Da])}},{key:"remove",value:function(Sa){var Da=this.parentNode(Sa);if(Da)return mb.arr.remove(Da.children,Sa),Da.children==[]&&(Da.children=null),Sa}},{key:"filter",value:function(Sa,Da){Da=void 0===Da?1:Da;var Ya=this,Na;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){if(1==oc.nextAddress)return oc.yield(Ya.uncollapseAll(function(aa,na){return na<Da+1}),2);
Na=Ya.filterActive;Ya.filterActive=!1;Ya.asListWithIndexAndDepth(!1).reverse().forEach(function(aa){var na=aa.node;if(0==aa.depth)return na.visible=!0;na.visible=Sa(na);na.visible||na.isCollapsed||!na.children.find(function(gb){return gb.visible})?na.container.opacity=1:(na.visible=!0,na.container.opacity=.5);return na.visible});Ya.filterActive=Na;oc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Bc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:2984,end:5441})}(mb.TreeData);mb.InteractiveTreeData=vb;mb.InteractiveTreeData=vb;mb.InteractiveTreeData=vb;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),uc=Bc.hasOwnProperty("InteractiveTree")&&"function"===typeof Bc.InteractiveTree?Bc.InteractiveTree:
Bc.InteractiveTree=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"update",value:function(Sa){var Da=this;ta._get(Object.getPrototypeOf(uc.prototype),"update",this).call(this,Sa);this.treeData&&this.relayoutContainers();Sa&&this.embeddedMorphs.forEach(function(Ya){Ya.isContainer&&(Ya.fill=mb.Color.transparent,Ya.fontFamily=Da.fontFamily,Ya.fontSize=Da.fontSize)})}},{key:"onDrop",value:function(Sa){ta._get(Object.getPrototypeOf(uc.prototype),
"onDrop",this).call(this,Sa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Sa){}},{key:"onDropHoverUpdate",value:function(Sa){}},{key:"onDropHoverOut",value:function(Sa){}},{key:"onHoverOut",value:function(Sa){var Da=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ya){ta._get(Object.getPrototypeOf(uc.prototype),"onHoverOut",Da).call(Da,Sa);Da._previewNode&&Da._previewNode.container.world()&&Da.treeData.remove(Da._previewNode);Da.resetContainerSelection();
Da.update(!0);Ya.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Sa){var Da=this,Ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Ya=Da.treeData.parentNode(Da._previewNode),Da.treeData.replace(Da._previewNode,Sa._data),Da.treeData.remove(Da._previewNode),Na.yield(Da.whenRendered(),2);Da.update(!0);Ya.container.onChildAdded(Sa);Na.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Sa=this;if(!this._scrollingUp){this._scrollingUp=!0;var Da=
function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ya){if(1==Ya.nextAddress)return Sa._scrollingUp&&0<Sa.scroll.y?Ya.yield(Sa.animate({scroll:Sa.scroll.subXY(0,30),duration:300,easing:mb.easings.linear}),3):(Sa._scrollingUp=!1,Ya.jumpTo(0));Da();Ya.jumpToEnd()})};Da()}}},{key:"scrollDownSlowly",value:function(){var Sa=this;if(!this._scrollingDown){this._scrollingDown=!0;var Da=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ya){if(1==Ya.nextAddress)return Sa._scrollingDown&&
Sa.scroll.y<Sa.scrollExtent.y-Sa.height?Ya.yield(Sa.animate({scroll:Sa.scroll.addXY(0,30),duration:300,easing:mb.easings.linear}),3):(Sa._scrollingDown=!1,Ya.jumpTo(0));Da();Ya.jumpToEnd()})};Da()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Sa){Sa.isContainer&&(Sa.fill=mb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Sa){var Da=this;Sa=this.localize(Sa.globalBounds().center());
var Ya=this.textPositionFromPoint(Sa),Na=this.treeData.asListWithIndexAndDepth(function(ha){ha=ha.node;return ha!=Da._previewNode&&ha.container.world()}),oc=(Na.find(function(ha){return ha.i-1===Ya.row})||{}).node,aa=oc&&oc.container,na=this.ensurePlaceholder(),gb=!!na.container.world(),H=Sa.subPt(this.scroll).subPt(this.scrollbarOffset);10>H.y?this.scrollUpSlowly():H.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!aa){if(Na.length>Ya.row||mb.arr.last(this.treeData.root.children)===
na)return;this.treeData.remove(na);this.treeData.add(na);this.update(!0)}if(aa){Na=this.textLayout.boundsFor(this,Ya);if(4>Math.abs(Na.top()-Sa.y)){if(this.treeData.isBefore(na,oc))return;this.treeData.remove(na);this.treeData.addBefore(na,oc)}else if(4>Math.abs(Na.bottom()-Sa.y)&&(oc.isCollapsed||this.treeData.isLeaf(oc))){if(this.treeData.isAfter(na,oc))return;this.treeData.remove(na);this.treeData.addAfter(na,oc)}else{aa.fill=mb.Color.gray;if(!gb)return;this.treeData.remove(na)}this.update(!0)}}},
{key:"ensurePlaceholder",value:function(){var Sa=mb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:mb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:mb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Sa;return this._previewNode}},{key:"relayoutContainers",value:function(){var Sa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(Da){return Da.height});
this.treeData.asListWithIndexAndDepth().forEach(function(Da){var Ya=Da.node;Da=Da.i;Ya.container.nativeCursor="grab";Ya.container.width=Sa.width-25-Ya.container.left;Ya.container.toggleSelected&&Ya.container.toggleSelected(Da==Sa.selectedIndex)});this.anchors.forEach(function(Da){return Da.position=Da.position})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:5450,end:10824})}(mb.Tree);mb.InteractiveTree=vb;mb.InteractiveTree=vb;mb.InteractiveTree=vb;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),uc=Bc.hasOwnProperty("SceneGraphTree")&&"function"===typeof Bc.SceneGraphTree?Bc.SceneGraphTree:Bc.SceneGraphTree=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Sa){var Da=this.treeData.asList().find(function(Ya){return Ya.container.target===Sa});Da&&this.selectedNode!=Da&&this.selectPath(this.treeData.pathOf(Da))}},{key:"onLoad",value:function(){var Sa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress)return Da.yield(Sa.whenRendered(),
2);if(3!=Da.nextAddress){if(Sa.ownerChain().find(function(Ya){return Ya.isComponent}))return Da.return();Sa.submorphs=[];return Da.yield(Sa.whenRendered(),3)}Sa.get("inspector").makeEditorVisible(!0);Sa.get("inspector").makeEditorVisible(!1);Sa.setTarget($world);Da.jumpToEnd()})}},{key:"adjustProportions",value:function(Sa){Sa=(Sa?Sa.state.dragDelta:{y:0}).y;var Da=this.get("inspector"),Ya=this.get("scene graph resizer"),Na=this.get("mode selector"),oc=this.get("connections tree");this.height+=Sa;
Da.height-=Sa;oc.height-=Sa;Ya.top=this.bottom;Ya.left=0;Na.top=Ya.bottom;oc.top=Da.top=Na.bottom+5}},{key:"reset",value:function(){var Sa=this;this.treeData=new mb.InteractiveTreeData({children:[],container:mb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Da){return null==Da.id}).forEach(function(Da){return Sa.removeAnchor(Da)})}},{key:"setTarget",value:function(Sa){this.target=Sa;this.treeData=this.getTreeFromSubmorphHierarchy(Sa);this.uncollapse(this.treeData.root)}},
{key:"isNodeOutOfSync",value:function(Sa){var Da=this;if(Sa===this._previewNode)return!1;if(Sa.container.nameNeedsUpdate)return!0;var Ya=Sa.container.target.submorphs.filter(function(Na){return!Da.ignoreMorph(Na)});return Ya.length!=Sa.children.length||Ya.map(function(Na){return Na.name}).join("")!=Sa.children.map(function(Na){return Na.target?Na.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Sa){var Da=this,Ya=Sa.container.target.submorphs.map(function(gb){return gb.__scene_graph_target__?
gb.__scene_graph_target__():gb}).filter(function(gb){return!Da.ignoreMorph(gb)}),Na=[],oc={},aa;for(aa in Ya){oc.$jscomp$loop$prop$m$2655=Ya[aa];var na=mb.arr.without(Sa.children,this._previewNode).find(function(gb){return function(H){return H.container.target.id==gb.$jscomp$loop$prop$m$2655.id}}(oc));Na[aa]=na?na:this.readMorphHierarchy(oc.$jscomp$loop$prop$m$2655);oc={$jscomp$loop$prop$m$2655:oc.$jscomp$loop$prop$m$2655}}return Na}},{key:"refresh",value:function(){var Sa=this;if(!this._updating&&
!this._dropInProgress){var Da=!1;mb.tree.prewalk(this.treeData.root,function(Ya){Sa.isNodeOutOfSync(Ya)&&(Da=!0,Ya.name=Ya.container.target.name,Ya.container.refresh(),Ya.children=Sa.getNewChildren(Ya))},function(Ya){return Ya.children});this.update(Da)}}},{key:"ignoreMorph",value:function(Sa){return Sa.isMorph?Sa.isContainer||Sa.isWindow||Sa.getWindow()||Sa.isEpiMorph||Sa.isHand||["lively.halos"].includes(Sa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler",
"UserFlap","Menu"].includes(Sa.constructor.name):!1}},{key:"onDropHoverOut",value:function(Sa){var Da=Sa.hand.grabbedMorphs[0];Sa=Sa.hand.findDropTarget();if(!(Sa===this||Sa&&Sa.ownerChain().includes(this))&&Da&&Da.isContainer)Da.onDragOutside()}},{key:"onDropHoverIn",value:function(Sa){var Da=Sa.hand.grabbedMorphs[0];Da&&!Da.isContainer&&($world.halos().forEach(function(Ya){return Ya.remove()}),Da.remove(),Object.assign(Da,Sa.hand._grabbedMorphProperties.get(Da).pointerAndShadow),Da=this.renderContainerFor(Da,
!1),Sa.hand.grab(Da),Da.leftCenter=mb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Sa){return new mb.InteractiveTreeData(this.readMorphHierarchy(Sa))}},{key:"readMorphHierarchy",value:function(Sa){var Da=this;return mb.tree.mapTree(Sa,function(Ya,Na){return{name:Ya.name,isCollapsed:!0,container:Da.renderContainerFor(Ya),visible:!0,children:Na}},function(Ya){return Ya.submorphs.filter(function(Na){return Ya.isWorld?!Da.ignoreMorph(Na):!0})})}},{key:"renderContainerFor",value:function(Sa,
Da){Sa=void 0===Sa?mb.morph({name:"root"}):Sa;Da=new mb.MorphContainer({tree:this,fill:void 0===Da||Da?mb.Color.transparent:mb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Sa,opacity:Sa.visible?1:.5});Sa._data?(Da._data=Sa._data,Sa._data.container=Da):Da._data={name:Sa.name,isCollapsed:!0,container:Da,children:[]};return Da}},{key:"collapseAll",value:function(){var Sa=this;this.treeData.asList().forEach(function(Da){return Da!=Sa.treeData.root?Da.isCollapsed=
!0:Da.isCollapsed=!1})}},{key:"filterMorphs",value:function(Sa){var Da=this,Ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Ya=Sa.tokens[0],Da.treeData.filterActive||(Da._collapseState=new WeakMap(Da.treeData.asList().map(function(oc){return[oc,oc.isCollapsed]}))),Da.treeData.filterActive=!!Ya,Na.yield(Da.treeData.filter(function(oc){var aa=!Ya||oc.container.target.name.includes(Ya);oc.container.highlightTerm(Ya);return aa},3),2);Da.treeData.filterActive||
Da.treeData.asList().forEach(function(oc){return oc.isCollapsed=Da._collapseState.has(oc)?Da._collapseState.get(oc):!0});Da.refresh();Na.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1104"}}},{start:10833,end:17441})}(mb.InteractiveTree);mb.SceneGraphTree=vb;mb.SceneGraphTree=vb;mb.SceneGraphTree=vb;vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),uc=Bc.hasOwnProperty("MorphContainer")&&"function"===typeof Bc.MorphContainer?Bc.MorphContainer:Bc.MorphContainer=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"refresh",value:function(){var Sa=
this,Da,Ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){Da=Sa.target;if(!Da)return Na.return();Sa.reactsToPointer=!0;Sa.dropShadow=!1;Sa.submorphs=[Sa.getLabel(),Da.layout&&Sa.getLayoutControls(),Sa.getConnectionControls()].filter(Boolean).map(function(oc,aa){oc.fitIfNeeded();oc.left=Ya?Ya.right+5:0;oc.top=2;return Ya=oc});Sa.height=20;Sa.opacity=Da.visible?1:.5;Na.jumpToEnd()})}},{key:"getLabel",value:function(){var Sa=this.getSubmorphNamed("name label")||mb.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:mb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Da=Sa.textString.slice(2,-1);Da&&Da==this.target.name||(Sa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Sa}},{key:"getIcon",value:function(Sa){return mb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[mb.getClassName(Sa)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Sa=this.getSubmorphNamed("layout label")||mb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:mb.Rectangle.inset(4,2,4,2),fill:mb.Color.orange,fontColor:mb.Color.white});Sa._isControlElement=!0;Sa.textString!=this.target.layout.name()&&(Sa.value=this.target.layout.name());return Sa}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(Ya){return!Ya.targetObj.isHalo}).length:0;var Sa=this.getSubmorphNamed("connections label")||mb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:mb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:mb.Color.red,fontColor:mb.Color.white});Sa._isControlElement=!0;Sa.visible=!this.connectionHalo&&!!this.connectionCount;var Da=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Sa.textString!=Da&&(Sa.value=Da);return Sa}},{key:"highlightTerm",value:function(Sa){var Da=this.submorphs[0],Ya=Da.textAndAttributes.slice(0,2),Na=Da.textString.slice(1).split(Sa);Da.textAndAttributes=1===Na.length?[].concat($jscomp.arrayFromIterable(Ya),[Na[0]]):[].concat($jscomp.arrayFromIterable(Ya),$jscomp.arrayFromIterable(mb.arr.flatten(mb.arr.interpose(Na.map(function(oc){return[oc,{}]}),[Sa,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Sa){var Da=ta._get(Object.getPrototypeOf(uc.prototype),"wantsToBeDroppedOn",this).call(this,Sa);if(![Sa].concat($jscomp.arrayFromIterable(Sa.ownerChain())).includes(this.tree))this.onDragOutside();return Da}},{key:"onGrab",value:function(Sa){var Da=this,Ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Na){if(1==Na.nextAddress)return Da.tree._dropInProgress=!0,Ya=Da.target.globalPosition,ta._get(Object.getPrototypeOf(uc.prototype),
"onGrab",Da).call(Da,Sa),Da._data.globalTargetPosition=Ya,Na.yield(Da.whenRendered(),2);if(Da.tree.fullContainsWorldPoint(Da.globalPosition))Da.leftCenter=mb.pt(-20,0);else Da.onDragOutside();Da.tree._dropInProgress=!1;Na.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=mb.fun.createQueue("container-hover-queue",function(Sa,Da){var Ya,Na,oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==aa.nextAddress)return Ya=
Sa.target,Na=Ya.opacity,oc=Ya.scale,Sa.target.opacity=0,Sa.target.scale=.5,$world.halos().forEach(function(na){return na.remove()}),$world.firstHand.grab(Sa.target),Sa.target._data=Sa._data,Sa.remove(),Sa.target.position=mb.pt(0,0),aa.yield(Sa.target.animate({opacity:Na,scale:oc,duration:200}),2);Da();aa.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Sa){var Da=this.node.children.indexOf(Sa.node||Sa._data)+1;Da=this.node.children[Da];Sa.target.remove();Da?(Da=this.target.submorphs.indexOf(Da.container.target),
this.target.addMorphAt(Sa.target,Da)):this.target.addMorph(Sa.target);Sa._data.globalTargetPosition&&(Sa.target.position=this.target.localize(Sa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Sa){}},{key:"toggleConnectionControl",value:function(Sa){this.getSubmorphNamed("connections label").visible=Sa}},{key:"toggleSelected",value:function(Sa){var Da=this,Ya,Na,oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==aa.nextAddress)return ta._get(Object.getPrototypeOf(uc.prototype),
"toggleSelected",Da).call(Da,Sa),Da._active===Sa?aa.return():(Da._active=Sa)&&Da.target&&Da.target.isMorph&&Da.world()?aa.yield(Da.target.whenRendered(),3):aa.jumpTo(0);Da.get("inspector").targetObject=Da.target;Da.get("connections tree").inspectConnectionsOf(Da.target);if(Da.connectionHalo)return aa.return();Ya=$jscomp.makeIterator(Da.world().halos());for(Na=Ya.next();!Na.done;Na=Ya.next()){oc=Na.value;if(oc.target===Da.target)return aa.return();oc.remove()}mb.noUpdate({sourceObj:Da.world(),targetObj:Da.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return Da.world().showHaloFor(Da.target)});aa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Sa){this.submorphs[0].fontFamily=Sa}},fontColor:{after:["submorphs"],derived:!0,set:function(Sa){this.submorphs[0].fontColor=Sa}},fontSize:{derived:!0,set:function(Sa){this.submorphs[0].fontSize=
Sa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Bc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1104"}}},{start:17452,end:25124})}(mb.InteractiveTreeContainer);mb.MorphContainer=vb;mb.MorphContainer=vb;mb.MorphContainer=vb;var xc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");xc.visualizeConnection=function(bb,Bc,uc,Sa,Da){Sa=void 0===Sa?{}:Sa;Da=xc.rect(0).sides.concat(xc.rect(0).corners);
uc=uc||new xc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:xc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.orange}}},Sa,{hasFixedPosition:!0}));uc.startPoint.attachTo(bb,"rightCenter");Bc.isMorph?(Sa=Bc.globalBounds().partNameNearest(Da,bb.globalPosition),bb.globalPosition.equals(Bc.globalBounds().partNamed(Sa))&&Bc.globalBounds().partNameNearest(xc.arr.without(Da,Sa),bb.globalPosition),uc.endPoint.attachTo(Bc,
"leftCenter")):(Da=bb.globalBounds().topRight().addPt(xc.pt(100,0)),Bc=xc.morph({type:"label",value:Bc.toString(),styleClasses:["Tooltip"],padding:xc.rect(8,4)}).openInWorld(Da),Bc.position=bb.world().bounds().translateForInclusion(Bc.bounds()).topLeft(),xc.once(uc,"remove",Bc,"remove"),uc.endPoint.attachTo(Bc,"leftCenter"));return uc};xc.startConnecting=function(bb,Bc){bb.animate({opacity:.8,duration:300});bb.startPoint.attachTo(Bc,"center");bb.vertices[0].position=xc.pt(2,2)};xc.stopConnecting=
function(bb,Bc,uc,Sa){function Da(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==aa.nextAddress)return aa.yield(bb.animate({opacity:0,duration:300}),2);bb.startPoint.clearConnection();bb.endPoint.clearConnection();bb.remove();aa.jumpToEnd()})}Sa=void 0===Sa?!1:Sa;var Ya,Na,oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){return 1==aa.nextAddress?(Ya=bb,Na=Ya.endPoint,(oc=Na.connectedMorph)&&"MorphContainer"==xc.getClassName(oc)&&(oc=oc.target),oc?aa.yield(xc.interactiveConnectGivenSourceAndTarget(uc,
Sa,oc),2):aa.jumpTo(2)):aa.yield(Da(),0)})};xc.editConnection=function(bb){var Bc=bb.connection,uc=bb.connectionPoint,Sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){if(1==Da.nextAddress)return Sa=xc.visualizeConnection(uc,Bc.targetObj,!1,{borderColor:xc.Color.gray.darker(),endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.gray.darker()}}}),Da.yield(xc.interactivelyReEvaluateConnection(Bc,"Edit Connection",!1),2);Sa.remove();Da.jumpToEnd()})};
xc.Tree=ac;xc.TreeData=vc;xc.Icon=Pb;xc.morph=Ed;xc.pt=Jb;xc.Rectangle=pc;xc.rect=Ec;xc.Color=zc;xc.arr=Mc;xc.connect=yc;xc.signal=Qa;xc.Leash=Eb;xc.once=wb;xc.interactivelyReEvaluateConnection=$b;xc.interactiveConnectGivenSource=Ka;xc.interactiveConnectGivenSourceAndTarget=Za;xc.getClassName=xa;(function(bb){var Bc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),uc=Bc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Bc.ConnectionsTreeData?Bc.ConnectionsTreeData:Bc.ConnectionsTreeData=
function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ta(uc,bb,[{key:"parseMorphConnections",value:function(Sa){for(var Da={},Ya=$jscomp.makeIterator(void 0===Sa.attributeConnections?[]:Sa.attributeConnections),Na=Ya.next();!Na.done;Na=Ya.next())Na=Na.value,Na.targetObj.isHalo||(Da[Na.sourceAttrName]=Da[Na.sourceAttrName]||[{name:["      New Connection  ",{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Sa,
Na.sourceAttrName),{}]}],xc.arr.pushAt(Da[Na.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Na)))},0));return{children:Object.entries(Da).map(function(oc){var aa=$jscomp.makeIterator(oc);oc=aa.next().value;aa=aa.next().value;return{name:[oc,{fontWeight:"bold"}," ",{},xc.morph({fill:xc.Color.white,opacity:.7,value:""+(aa.length-1),borderRadius:15,fontWeight:"bold",padding:xc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:aa}}).concat([{name:["New Connection  ",
{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Sa),{}]}])}}},{key:"renderExistingConnection",value:function(Sa){var Da=this,Ya=xc.morph({type:"label",fontColor:xc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Sa.targetMethodName,{}])}),Na=this.renderDeadPin(),oc=Na.submorphs[0];xc.connect(Ya,"onHoverIn",function(){Ya.fontColor=xc.Color.orange;Ya._leash=xc.visualizeConnection(oc,
Sa.targetObj,Ya._leash);oc.fill=xc.Color.orange;oc.border={color:xc.Color.orange,width:3}});xc.connect(Ya,"onMouseDown",function(aa){return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){if(1==na.nextAddress)return aa.stop(),na.yield(xc.interactivelyReEvaluateConnection(Sa),2);xc.signal(Da,"refresh");na.jumpToEnd()})});xc.connect(Ya,"onHoverOut",function(){Ya.fontColor=xc.Color.gray;oc.fill=xc.Color.gray;oc.border={color:xc.Color.white,width:1};Ya._leash.remove();Ya._leash=void 0});return[Ya,
{},"  ",{}].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Sa.disconnect();xc.signal(Da,"refresh")}})),["  ",{},Na,{}])}},{key:"renderDeadPin",value:function(){var Sa=xc.morph({type:"ellipse",fill:xc.Color.gray,extent:xc.pt(10,10),center:xc.pt(8,12),borderWidth:1});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Sa]})}},{key:"renderPin",value:function(Sa,Da){var Ya=this,Na=xc.morph({type:"ellipse",
fill:xc.Color.gray.withA(.5),extent:xc.pt(10,10),center:xc.pt(8,12),draggable:!1,borderWidth:1}),oc=new xc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:xc.Color.gray.darker(),endpointStyle:{fill:xc.Color.gray.darker()},position:xc.pt(1,1),vertices:[xc.pt(0,0),xc.pt(0,0)],canConnectTo:function(aa){return"MorphContainer"==xc.getClassName(aa)||2>xc.arr.intersect([aa].concat($jscomp.arrayFromIterable(aa.ownerChain())),[Na].concat($jscomp.arrayFromIterable(Na.ownerChain()))).length}});
Na.addMorph(oc);xc.connect(oc.endPoint,"onDragStart",function(){xc.startConnecting(oc,Na)});xc.connect(oc.endPoint,"onDragEnd",function(aa){return $jscomp.asyncExecutePromiseGeneratorProgram(function(na){if(1==na.nextAddress)return Na.center=xc.pt(8,12),na.yield(xc.stopConnecting(oc,Na,Sa,Da),2);xc.signal(Ya,"refresh");na.jumpToEnd()})});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Na]})}},{key:"display",value:function(Sa){return Sa.name}},{key:"collapse",
value:function(Sa,Da){Sa.isCollapsed=Da}},{key:"isCollapsed",value:function(Sa){return Sa.isCollapsed}},{key:"isLeaf",value:function(Sa){return!Sa.children}},{key:"getChildren",value:function(Sa){return Sa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Sa){var Da=new this;Da.root=Da.parseMorphConnections(Sa);return Da}}],Bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3542,end:8147})})(xc.TreeData);vb=function(bb){var Bc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),uc=Bc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Bc.ConnectionsTree?Bc.ConnectionsTree:Bc.ConnectionsTree=function(Sa){Sa&&Sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ta(uc,bb,[{key:"inspectConnectionsOf",value:function(Sa){if(this.targetMorph=Sa)this.treeData=xc.ConnectionsTreeData.for(Sa),xc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=xc.ConnectionsTreeData.for(this.targetMorph),xc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Bc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8164,end:8717})}(xc.Tree);vb=xc.ConnectionsTree;xc.default=vb}}});